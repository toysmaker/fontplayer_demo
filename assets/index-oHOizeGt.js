(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))g(y);new MutationObserver(y=>{for(const k of y)if(k.type==="childList")for(const $ of k.addedNodes)$.tagName==="LINK"&&$.rel==="modulepreload"&&g($)}).observe(document,{childList:!0,subtree:!0});function r(y){const k={};return y.integrity&&(k.integrity=y.integrity),y.referrerPolicy&&(k.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?k.credentials="include":y.crossOrigin==="anonymous"?k.credentials="omit":k.credentials="same-origin",k}function g(y){if(y.ep)return;y.ep=!0;const k=r(y);fetch(y.href,k)}})();function makeMap(e,n){const r=Object.create(null),g=e.split(",");for(let y=0;y<g.length;y++)r[g[y]]=!0;return n?y=>!!r[y.toLowerCase()]:y=>!!r[y]}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=e=>onRE.test(e),isModelListener=e=>e.startsWith("onUpdate:"),extend=Object.assign,remove$1=(e,n)=>{const r=e.indexOf(n);r>-1&&e.splice(r,1)},hasOwnProperty$f=Object.prototype.hasOwnProperty,hasOwn$1=(e,n)=>hasOwnProperty$f.call(e,n),isArray$3=Array.isArray,isMap$1=e=>toTypeString$1(e)==="[object Map]",isSet$1=e=>toTypeString$1(e)==="[object Set]",isDate$1=e=>toTypeString$1(e)==="[object Date]",isFunction$3=e=>typeof e=="function",isString$3=e=>typeof e=="string",isSymbol$1=e=>typeof e=="symbol",isObject$3=e=>e!==null&&typeof e=="object",isPromise=e=>isObject$3(e)&&isFunction$3(e.then)&&isFunction$3(e.catch),objectToString$2=Object.prototype.toString,toTypeString$1=e=>objectToString$2.call(e),toRawType=e=>toTypeString$1(e).slice(8,-1),isPlainObject$2=e=>toTypeString$1(e)==="[object Object]",isIntegerKey=e=>isString$3(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const n=Object.create(null);return r=>n[r]||(n[r]=e(r))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(n,r)=>r?r.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$2=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize$2(e)}`:""),hasChanged=(e,n)=>!Object.is(e,n),invokeArrayFns=(e,n)=>{for(let r=0;r<e.length;r++)e[r](n)},def=(e,n,r)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value:r})},looseToNumber=e=>{const n=parseFloat(e);return isNaN(n)?e:n},toNumber$1=e=>{const n=isString$3(e)?Number(e):NaN;return isNaN(n)?e:n};let _globalThis$1;const getGlobalThis$1=()=>_globalThis$1||(_globalThis$1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(e){if(isArray$3(e)){const n={};for(let r=0;r<e.length;r++){const g=e[r],y=isString$3(g)?parseStringStyle(g):normalizeStyle(g);if(y)for(const k in y)n[k]=y[k]}return n}else{if(isString$3(e))return e;if(isObject$3(e))return e}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(e){const n={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach(r=>{if(r){const g=r.split(propertyDelimiterRE);g.length>1&&(n[g[0].trim()]=g[1].trim())}}),n}function normalizeClass(e){let n="";if(isString$3(e))n=e;else if(isArray$3(e))for(let r=0;r<e.length;r++){const g=normalizeClass(e[r]);g&&(n+=g+" ")}else if(isObject$3(e))for(const r in e)e[r]&&(n+=r+" ");return n.trim()}function normalizeProps(e){if(!e)return null;let{class:n,style:r}=e;return n&&!isString$3(n)&&(e.class=normalizeClass(n)),r&&(e.style=normalizeStyle(r)),e}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}function looseCompareArrays(e,n){if(e.length!==n.length)return!1;let r=!0;for(let g=0;r&&g<e.length;g++)r=looseEqual(e[g],n[g]);return r}function looseEqual(e,n){if(e===n)return!0;let r=isDate$1(e),g=isDate$1(n);if(r||g)return r&&g?e.getTime()===n.getTime():!1;if(r=isSymbol$1(e),g=isSymbol$1(n),r||g)return e===n;if(r=isArray$3(e),g=isArray$3(n),r||g)return r&&g?looseCompareArrays(e,n):!1;if(r=isObject$3(e),g=isObject$3(n),r||g){if(!r||!g)return!1;const y=Object.keys(e).length,k=Object.keys(n).length;if(y!==k)return!1;for(const $ in e){const V=e.hasOwnProperty($),L=n.hasOwnProperty($);if(V&&!L||!V&&L||!looseEqual(e[$],n[$]))return!1}}return String(e)===String(n)}function looseIndexOf(e,n){return e.findIndex(r=>looseEqual(r,n))}const toDisplayString$1=e=>isString$3(e)?e:e==null?"":isArray$3(e)||isObject$3(e)&&(e.toString===objectToString$2||!isFunction$3(e.toString))?JSON.stringify(e,replacer,2):String(e),replacer=(e,n)=>n&&n.__v_isRef?replacer(e,n.value):isMap$1(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((r,[g,y])=>(r[`${g} =>`]=y,r),{})}:isSet$1(n)?{[`Set(${n.size})`]:[...n.values()]}:isObject$3(n)&&!isArray$3(n)&&!isPlainObject$2(n)?String(n):n;let activeEffectScope;class EffectScope{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!n&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(n){if(this._active){const r=activeEffectScope;try{return activeEffectScope=this,n()}finally{activeEffectScope=r}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(n){if(this._active){let r,g;for(r=0,g=this.effects.length;r<g;r++)this.effects[r].stop();for(r=0,g=this.cleanups.length;r<g;r++)this.cleanups[r]();if(this.scopes)for(r=0,g=this.scopes.length;r<g;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!n){const y=this.parent.scopes.pop();y&&y!==this&&(this.parent.scopes[this.index]=y,y.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(e){return new EffectScope(e)}function recordEffectScope(e,n=activeEffectScope){n&&n.active&&n.effects.push(e)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(e){activeEffectScope&&activeEffectScope.cleanups.push(e)}const createDep=e=>{const n=new Set(e);return n.w=0,n.n=0,n},wasTracked=e=>(e.w&trackOpBit)>0,newTracked=e=>(e.n&trackOpBit)>0,initDepMarkers=({deps:e})=>{if(e.length)for(let n=0;n<e.length;n++)e[n].w|=trackOpBit},finalizeDepMarkers=e=>{const{deps:n}=e;if(n.length){let r=0;for(let g=0;g<n.length;g++){const y=n[g];wasTracked(y)&&!newTracked(y)?y.delete(e):n[r++]=y,y.w&=~trackOpBit,y.n&=~trackOpBit}n.length=r}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(n,r=null,g){this.fn=n,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,g)}run(){if(!this.active)return this.fn();let n=activeEffect,r=shouldTrack;for(;n;){if(n===this)return;n=n.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(e){const{deps:n}=e;if(n.length){for(let r=0;r<n.length;r++)n[r].delete(e);n.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function track(e,n,r){if(shouldTrack&&activeEffect){let g=targetMap.get(e);g||targetMap.set(e,g=new Map);let y=g.get(r);y||g.set(r,y=createDep()),trackEffects(y)}}function trackEffects(e,n){let r=!1;effectTrackDepth<=maxMarkerBits?newTracked(e)||(e.n|=trackOpBit,r=!wasTracked(e)):r=!e.has(activeEffect),r&&(e.add(activeEffect),activeEffect.deps.push(e))}function trigger(e,n,r,g,y,k){const $=targetMap.get(e);if(!$)return;let V=[];if(n==="clear")V=[...$.values()];else if(r==="length"&&isArray$3(e)){const L=Number(g);$.forEach((z,j)=>{(j==="length"||j>=L)&&V.push(z)})}else switch(r!==void 0&&V.push($.get(r)),n){case"add":isArray$3(e)?isIntegerKey(r)&&V.push($.get("length")):(V.push($.get(ITERATE_KEY)),isMap$1(e)&&V.push($.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$3(e)||(V.push($.get(ITERATE_KEY)),isMap$1(e)&&V.push($.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$1(e)&&V.push($.get(ITERATE_KEY));break}if(V.length===1)V[0]&&triggerEffects(V[0]);else{const L=[];for(const z of V)z&&L.push(...z);triggerEffects(createDep(L))}}function triggerEffects(e,n){const r=isArray$3(e)?e:[...e];for(const g of r)g.computed&&triggerEffect(g);for(const g of r)g.computed||triggerEffect(g)}function triggerEffect(e,n){(e!==activeEffect||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function getDepFromReactive(e,n){var r;return(r=targetMap.get(e))==null?void 0:r.get(n)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol$1)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach(n=>{e[n]=function(...r){const g=toRaw(this);for(let k=0,$=this.length;k<$;k++)track(g,"get",k+"");const y=g[n](...r);return y===-1||y===!1?g[n](...r.map(toRaw)):y}}),["push","pop","shift","unshift","splice"].forEach(n=>{e[n]=function(...r){pauseTracking();const g=toRaw(this)[n].apply(this,r);return resetTracking(),g}}),e}function hasOwnProperty$e(e){const n=toRaw(this);return track(n,"has",e),n.hasOwnProperty(e)}function createGetter(e=!1,n=!1){return function(g,y,k){if(y==="__v_isReactive")return!e;if(y==="__v_isReadonly")return e;if(y==="__v_isShallow")return n;if(y==="__v_raw"&&k===(e?n?shallowReadonlyMap:readonlyMap:n?shallowReactiveMap:reactiveMap).get(g))return g;const $=isArray$3(g);if(!e){if($&&hasOwn$1(arrayInstrumentations,y))return Reflect.get(arrayInstrumentations,y,k);if(y==="hasOwnProperty")return hasOwnProperty$e}const V=Reflect.get(g,y,k);return(isSymbol$1(y)?builtInSymbols.has(y):isNonTrackableKeys(y))||(e||track(g,"get",y),n)?V:isRef(V)?$&&isIntegerKey(y)?V:V.value:isObject$3(V)?e?readonly(V):reactive(V):V}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(e=!1){return function(r,g,y,k){let $=r[g];if(isReadonly($)&&isRef($)&&!isRef(y))return!1;if(!e&&(!isShallow(y)&&!isReadonly(y)&&($=toRaw($),y=toRaw(y)),!isArray$3(r)&&isRef($)&&!isRef(y)))return $.value=y,!0;const V=isArray$3(r)&&isIntegerKey(g)?Number(g)<r.length:hasOwn$1(r,g),L=Reflect.set(r,g,y,k);return r===toRaw(k)&&(V?hasChanged(y,$)&&trigger(r,"set",g,y):trigger(r,"add",g,y)),L}}function deleteProperty(e,n){const r=hasOwn$1(e,n);e[n];const g=Reflect.deleteProperty(e,n);return g&&r&&trigger(e,"delete",n,void 0),g}function has$1(e,n){const r=Reflect.has(e,n);return(!isSymbol$1(n)||!builtInSymbols.has(n))&&track(e,"has",n),r}function ownKeys$2(e){return track(e,"iterate",isArray$3(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$1,ownKeys:ownKeys$2},readonlyHandlers={get:readonlyGet,set(e,n){return!0},deleteProperty(e,n){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function get$2(e,n,r=!1,g=!1){e=e.__v_raw;const y=toRaw(e),k=toRaw(n);r||(n!==k&&track(y,"get",n),track(y,"get",k));const{has:$}=getProto(y),V=g?toShallow:r?toReadonly:toReactive;if($.call(y,n))return V(e.get(n));if($.call(y,k))return V(e.get(k));e!==y&&e.get(n)}function has(e,n=!1){const r=this.__v_raw,g=toRaw(r),y=toRaw(e);return n||(e!==y&&track(g,"has",e),track(g,"has",y)),e===y?r.has(e):r.has(e)||r.has(y)}function size(e,n=!1){return e=e.__v_raw,!n&&track(toRaw(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add$1(e){e=toRaw(e);const n=toRaw(this);return getProto(n).has.call(n,e)||(n.add(e),trigger(n,"add",e,e)),this}function set$2(e,n){n=toRaw(n);const r=toRaw(this),{has:g,get:y}=getProto(r);let k=g.call(r,e);k||(e=toRaw(e),k=g.call(r,e));const $=y.call(r,e);return r.set(e,n),k?hasChanged(n,$)&&trigger(r,"set",e,n):trigger(r,"add",e,n),this}function deleteEntry(e){const n=toRaw(this),{has:r,get:g}=getProto(n);let y=r.call(n,e);y||(e=toRaw(e),y=r.call(n,e)),g&&g.call(n,e);const k=n.delete(e);return y&&trigger(n,"delete",e,void 0),k}function clear(){const e=toRaw(this),n=e.size!==0,r=e.clear();return n&&trigger(e,"clear",void 0,void 0),r}function createForEach(e,n){return function(g,y){const k=this,$=k.__v_raw,V=toRaw($),L=n?toShallow:e?toReadonly:toReactive;return!e&&track(V,"iterate",ITERATE_KEY),$.forEach((z,j)=>g.call(y,L(z),L(j),k))}}function createIterableMethod(e,n,r){return function(...g){const y=this.__v_raw,k=toRaw(y),$=isMap$1(k),V=e==="entries"||e===Symbol.iterator&&$,L=e==="keys"&&$,z=y[e](...g),j=r?toShallow:n?toReadonly:toReactive;return!n&&track(k,"iterate",L?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:ae,done:oe}=z.next();return oe?{value:ae,done:oe}:{value:V?[j(ae[0]),j(ae[1])]:j(ae),done:oe}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...n){return e==="delete"?!1:this}}function createInstrumentations(){const e={get(k){return get$2(this,k)},get size(){return size(this)},has,add:add$1,set:set$2,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},n={get(k){return get$2(this,k,!1,!0)},get size(){return size(this)},has,add:add$1,set:set$2,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},r={get(k){return get$2(this,k,!0)},get size(){return size(this,!0)},has(k){return has.call(this,k,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},g={get(k){return get$2(this,k,!0,!0)},get size(){return size(this,!0)},has(k){return has.call(this,k,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(k=>{e[k]=createIterableMethod(k,!1,!1),r[k]=createIterableMethod(k,!0,!1),n[k]=createIterableMethod(k,!1,!0),g[k]=createIterableMethod(k,!0,!0)}),[e,r,n,g]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,n){const r=n?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(g,y,k)=>y==="__v_isReactive"?!e:y==="__v_isReadonly"?e:y==="__v_raw"?g:Reflect.get(hasOwn$1(r,y)&&y in g?r:g,y,k)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(e,n,r,g,y){if(!isObject$3(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const k=y.get(e);if(k)return k;const $=getTargetType(e);if($===0)return e;const V=new Proxy(e,$===2?g:r);return y.set(e,V),V}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw(e){const n=e&&e.__v_raw;return n?toRaw(n):e}function markRaw(e){return def(e,"__v_skip",!0),e}const toReactive=e=>isObject$3(e)?reactive(e):e,toReadonly=e=>isObject$3(e)?readonly(e):e;function trackRefValue(e){shouldTrack&&activeEffect&&(e=toRaw(e),trackEffects(e.dep||(e.dep=createDep())))}function triggerRefValue(e,n){e=toRaw(e);const r=e.dep;r&&triggerEffects(r)}function isRef(e){return!!(e&&e.__v_isRef===!0)}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,n){return isRef(e)?e:new RefImpl(e,n)}class RefImpl{constructor(n,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?n:toRaw(n),this._value=r?n:toReactive(n)}get value(){return trackRefValue(this),this._value}set value(n){const r=this.__v_isShallow||isShallow(n)||isReadonly(n);n=r?n:toRaw(n),hasChanged(n,this._rawValue)&&(this._rawValue=n,this._value=r?n:toReactive(n),triggerRefValue(this))}}function triggerRef(e){triggerRefValue(e)}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,n,r)=>unref(Reflect.get(e,n,r)),set:(e,n,r,g)=>{const y=e[n];return isRef(y)&&!isRef(r)?(y.value=r,!0):Reflect.set(e,n,r,g)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}function toRefs(e){const n=isArray$3(e)?new Array(e.length):{};for(const r in e)n[r]=propertyToRef(e,r);return n}class ObjectRefImpl{constructor(n,r,g){this._object=n,this._key=r,this._defaultValue=g,this.__v_isRef=!0}get value(){const n=this._object[this._key];return n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(n){this._getter=n,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function toRef(e,n,r){return isRef(e)?e:isFunction$3(e)?new GetterRefImpl(e):isObject$3(e)&&arguments.length>1?propertyToRef(e,n,r):ref(e)}function propertyToRef(e,n,r){const g=e[n];return isRef(g)?g:new ObjectRefImpl(e,n,r)}class ComputedRefImpl{constructor(n,r,g,y){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(n,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!y,this.__v_isReadonly=g}get value(){const n=toRaw(this);return trackRefValue(n),(n._dirty||!n._cacheable)&&(n._dirty=!1,n._value=n.effect.run()),n._value}set value(n){this._setter(n)}}function computed$1(e,n,r=!1){let g,y;const k=isFunction$3(e);return k?(g=e,y=NOOP):(g=e.get,y=e.set),new ComputedRefImpl(g,y,k||!y,r)}function warn$1(e,...n){}function callWithErrorHandling(e,n,r,g){let y;try{y=g?e(...g):e()}catch(k){handleError(k,n,r)}return y}function callWithAsyncErrorHandling(e,n,r,g){if(isFunction$3(e)){const k=callWithErrorHandling(e,n,r,g);return k&&isPromise(k)&&k.catch($=>{handleError($,n,r)}),k}const y=[];for(let k=0;k<e.length;k++)y.push(callWithAsyncErrorHandling(e[k],n,r,g));return y}function handleError(e,n,r,g=!0){const y=n?n.vnode:null;if(n){let k=n.parent;const $=n.proxy,V=r;for(;k;){const z=k.ec;if(z){for(let j=0;j<z.length;j++)if(z[j](e,$,V)===!1)return}k=k.parent}const L=n.appContext.config.errorHandler;if(L){callWithErrorHandling(L,null,10,[e,$,V]);return}}logError(e,r,y,g)}function logError(e,n,r,g=!0){console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const n=currentFlushPromise||resolvedPromise;return e?n.then(this?e.bind(this):e):n}function findInsertionIndex(e){let n=flushIndex+1,r=queue.length;for(;n<r;){const g=n+r>>>1;getId(queue[g])<e?n=g+1:r=g}return n}function queueJob(e){(!queue.length||!queue.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex))&&(e.id==null?queue.push(e):queue.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const n=queue.indexOf(e);n>flushIndex&&queue.splice(n,1)}function queuePostFlushCb(e){isArray$3(e)?pendingPostFlushCbs.push(...e):(!activePostFlushCbs||!activePostFlushCbs.includes(e,e.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(e),queueFlush()}function flushPreFlushCbs(e,n=isFlushing?flushIndex+1:0){for(;n<queue.length;n++){const r=queue[n];r&&r.pre&&(queue.splice(n,1),n--,r())}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const n=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...n);return}for(activePostFlushCbs=n,activePostFlushCbs.sort((r,g)=>getId(r)-getId(g)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?1/0:e.id,comparator=(e,n)=>{const r=getId(e)-getId(n);if(r===0){if(e.pre&&!n.pre)return-1;if(n.pre&&!e.pre)return 1}return r};function flushJobs(e){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const n=queue[flushIndex];n&&n.active!==!1&&callWithErrorHandling(n,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit$1(e,n,...r){if(e.isUnmounted)return;const g=e.vnode.props||EMPTY_OBJ;let y=r;const k=n.startsWith("update:"),$=k&&n.slice(7);if($&&$ in g){const j=`${$==="modelValue"?"model":$}Modifiers`,{number:ae,trim:oe}=g[j]||EMPTY_OBJ;oe&&(y=r.map(re=>isString$3(re)?re.trim():re)),ae&&(y=r.map(looseToNumber))}let V,L=g[V=toHandlerKey(n)]||g[V=toHandlerKey(camelize(n))];!L&&k&&(L=g[V=toHandlerKey(hyphenate(n))]),L&&callWithAsyncErrorHandling(L,e,6,y);const z=g[V+"Once"];if(z){if(!e.emitted)e.emitted={};else if(e.emitted[V])return;e.emitted[V]=!0,callWithAsyncErrorHandling(z,e,6,y)}}function normalizeEmitsOptions(e,n,r=!1){const g=n.emitsCache,y=g.get(e);if(y!==void 0)return y;const k=e.emits;let $={},V=!1;if(!isFunction$3(e)){const L=z=>{const j=normalizeEmitsOptions(z,n,!0);j&&(V=!0,extend($,j))};!r&&n.mixins.length&&n.mixins.forEach(L),e.extends&&L(e.extends),e.mixins&&e.mixins.forEach(L)}return!k&&!V?(isObject$3(e)&&g.set(e,null),null):(isArray$3(k)?k.forEach(L=>$[L]=null):extend($,k),isObject$3(e)&&g.set(e,$),$)}function isEmitListener(e,n){return!e||!isOn(n)?!1:(n=n.slice(2).replace(/Once$/,""),hasOwn$1(e,n[0].toLowerCase()+n.slice(1))||hasOwn$1(e,hyphenate(n))||hasOwn$1(e,n))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const n=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,n}function pushScopeId(e){currentScopeId=e}function popScopeId(){currentScopeId=null}function withCtx(e,n=currentRenderingInstance,r){if(!n||e._n)return e;const g=(...y)=>{g._d&&setBlockTracking(-1);const k=setCurrentRenderingInstance(n);let $;try{$=e(...y)}finally{setCurrentRenderingInstance(k),g._d&&setBlockTracking(1)}return $};return g._n=!0,g._c=!0,g._d=!0,g}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:n,vnode:r,proxy:g,withProxy:y,props:k,propsOptions:[$],slots:V,attrs:L,emit:z,render:j,renderCache:ae,data:oe,setupState:re,ctx:ue,inheritAttrs:le}=e;let de,he;const _e=setCurrentRenderingInstance(e);try{if(r.shapeFlag&4){const Ne=y||g;de=normalizeVNode(j.call(Ne,Ne,ae,k,re,oe,ue)),he=L}else{const Ne=n;de=normalizeVNode(Ne.length>1?Ne(k,{attrs:L,slots:V,emit:z}):Ne(k,null)),he=n.props?L:getFunctionalFallthrough(L)}}catch(Ne){blockStack.length=0,handleError(Ne,e,1),de=createVNode(Comment)}let xe=de;if(he&&le!==!1){const Ne=Object.keys(he),{shapeFlag:$e}=xe;Ne.length&&$e&7&&($&&Ne.some(isModelListener)&&(he=filterModelListeners(he,$)),xe=cloneVNode(xe,he))}return r.dirs&&(xe=cloneVNode(xe),xe.dirs=xe.dirs?xe.dirs.concat(r.dirs):r.dirs),r.transition&&(xe.transition=r.transition),de=xe,setCurrentRenderingInstance(_e),de}const getFunctionalFallthrough=e=>{let n;for(const r in e)(r==="class"||r==="style"||isOn(r))&&((n||(n={}))[r]=e[r]);return n},filterModelListeners=(e,n)=>{const r={};for(const g in e)(!isModelListener(g)||!(g.slice(9)in n))&&(r[g]=e[g]);return r};function shouldUpdateComponent(e,n,r){const{props:g,children:y,component:k}=e,{props:$,children:V,patchFlag:L}=n,z=k.emitsOptions;if(n.dirs||n.transition)return!0;if(r&&L>=0){if(L&1024)return!0;if(L&16)return g?hasPropsChanged(g,$,z):!!$;if(L&8){const j=n.dynamicProps;for(let ae=0;ae<j.length;ae++){const oe=j[ae];if($[oe]!==g[oe]&&!isEmitListener(z,oe))return!0}}}else return(y||V)&&(!V||!V.$stable)?!0:g===$?!1:g?$?hasPropsChanged(g,$,z):!0:!!$;return!1}function hasPropsChanged(e,n,r){const g=Object.keys(n);if(g.length!==Object.keys(e).length)return!0;for(let y=0;y<g.length;y++){const k=g[y];if(n[k]!==e[k]&&!isEmitListener(r,k))return!0}return!1}function updateHOCHostEl({vnode:e,parent:n},r){for(;n&&n.subTree===e;)(e=n.vnode).el=r,n=n.parent}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,n){n&&n.pendingBranch?isArray$3(e)?n.effects.push(...e):n.effects.push(e):queuePostFlushCb(e)}function watchEffect(e,n){return doWatch(e,null,n)}const INITIAL_WATCHER_VALUE={};function watch(e,n,r){return doWatch(e,n,r)}function doWatch(e,n,{immediate:r,deep:g,flush:y,onTrack:k,onTrigger:$}=EMPTY_OBJ){var V;const L=getCurrentScope()===((V=currentInstance)==null?void 0:V.scope)?currentInstance:null;let z,j=!1,ae=!1;if(isRef(e)?(z=()=>e.value,j=isShallow(e)):isReactive(e)?(z=()=>e,g=!0):isArray$3(e)?(ae=!0,j=e.some(Ne=>isReactive(Ne)||isShallow(Ne)),z=()=>e.map(Ne=>{if(isRef(Ne))return Ne.value;if(isReactive(Ne))return traverse(Ne);if(isFunction$3(Ne))return callWithErrorHandling(Ne,L,2)})):isFunction$3(e)?n?z=()=>callWithErrorHandling(e,L,2):z=()=>{if(!(L&&L.isUnmounted))return oe&&oe(),callWithAsyncErrorHandling(e,L,3,[re])}:z=NOOP,n&&g){const Ne=z;z=()=>traverse(Ne())}let oe,re=Ne=>{oe=_e.onStop=()=>{callWithErrorHandling(Ne,L,4)}},ue;if(isInSSRComponentSetup)if(re=NOOP,n?r&&callWithAsyncErrorHandling(n,L,3,[z(),ae?[]:void 0,re]):z(),y==="sync"){const Ne=useSSRContext();ue=Ne.__watcherHandles||(Ne.__watcherHandles=[])}else return NOOP;let le=ae?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const de=()=>{if(_e.active)if(n){const Ne=_e.run();(g||j||(ae?Ne.some(($e,Ce)=>hasChanged($e,le[Ce])):hasChanged(Ne,le)))&&(oe&&oe(),callWithAsyncErrorHandling(n,L,3,[Ne,le===INITIAL_WATCHER_VALUE?void 0:ae&&le[0]===INITIAL_WATCHER_VALUE?[]:le,re]),le=Ne)}else _e.run()};de.allowRecurse=!!n;let he;y==="sync"?he=de:y==="post"?he=()=>queuePostRenderEffect(de,L&&L.suspense):(de.pre=!0,L&&(de.id=L.uid),he=()=>queueJob(de));const _e=new ReactiveEffect(z,he);n?r?de():le=_e.run():y==="post"?queuePostRenderEffect(_e.run.bind(_e),L&&L.suspense):_e.run();const xe=()=>{_e.stop(),L&&L.scope&&remove$1(L.scope.effects,_e)};return ue&&ue.push(xe),xe}function instanceWatch(e,n,r){const g=this.proxy,y=isString$3(e)?e.includes(".")?createPathGetter(g,e):()=>g[e]:e.bind(g,g);let k;isFunction$3(n)?k=n:(k=n.handler,r=n);const $=currentInstance;setCurrentInstance(this);const V=doWatch(y,k.bind(g),r);return $?setCurrentInstance($):unsetCurrentInstance(),V}function createPathGetter(e,n){const r=n.split(".");return()=>{let g=e;for(let y=0;y<r.length&&g;y++)g=g[r[y]];return g}}function traverse(e,n){if(!isObject$3(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),isRef(e))traverse(e.value,n);else if(isArray$3(e))for(let r=0;r<e.length;r++)traverse(e[r],n);else if(isSet$1(e)||isMap$1(e))e.forEach(r=>{traverse(r,n)});else if(isPlainObject$2(e))for(const r in e)traverse(e[r],n);return e}function withDirectives(e,n){const r=currentRenderingInstance;if(r===null)return e;const g=getExposeProxy(r)||r.proxy,y=e.dirs||(e.dirs=[]);for(let k=0;k<n.length;k++){let[$,V,L,z=EMPTY_OBJ]=n[k];$&&(isFunction$3($)&&($={mounted:$,updated:$}),$.deep&&traverse(V),y.push({dir:$,instance:g,value:V,oldValue:void 0,arg:L,modifiers:z}))}return e}function invokeDirectiveHook(e,n,r,g){const y=e.dirs,k=n&&n.dirs;for(let $=0;$<y.length;$++){const V=y[$];k&&(V.oldValue=k[$].value);let L=V.dir[g];L&&(pauseTracking(),callWithAsyncErrorHandling(L,r,8,[e.el,V,e,n]),resetTracking())}}function useTransitionState(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{e.isMounted=!0}),onBeforeUnmount(()=>{e.isUnmounting=!0}),e}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(e,{slots:n}){const r=getCurrentInstance(),g=useTransitionState();let y;return()=>{const k=n.default&&getTransitionRawChildren(n.default(),!0);if(!k||!k.length)return;let $=k[0];if(k.length>1){for(const le of k)if(le.type!==Comment){$=le;break}}const V=toRaw(e),{mode:L}=V;if(g.isLeaving)return emptyPlaceholder($);const z=getKeepAliveChild($);if(!z)return emptyPlaceholder($);const j=resolveTransitionHooks(z,V,g,r);setTransitionHooks(z,j);const ae=r.subTree,oe=ae&&getKeepAliveChild(ae);let re=!1;const{getTransitionKey:ue}=z.type;if(ue){const le=ue();y===void 0?y=le:le!==y&&(y=le,re=!0)}if(oe&&oe.type!==Comment&&(!isSameVNodeType(z,oe)||re)){const le=resolveTransitionHooks(oe,V,g,r);if(setTransitionHooks(oe,le),L==="out-in")return g.isLeaving=!0,le.afterLeave=()=>{g.isLeaving=!1,r.update.active!==!1&&r.update()},emptyPlaceholder($);L==="in-out"&&z.type!==Comment&&(le.delayLeave=(de,he,_e)=>{const xe=getLeavingNodesForType(g,oe);xe[String(oe.key)]=oe,de._leaveCb=()=>{he(),de._leaveCb=void 0,delete j.delayedLeave},j.delayedLeave=_e})}return $}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(e,n){const{leavingVNodes:r}=e;let g=r.get(n.type);return g||(g=Object.create(null),r.set(n.type,g)),g}function resolveTransitionHooks(e,n,r,g){const{appear:y,mode:k,persisted:$=!1,onBeforeEnter:V,onEnter:L,onAfterEnter:z,onEnterCancelled:j,onBeforeLeave:ae,onLeave:oe,onAfterLeave:re,onLeaveCancelled:ue,onBeforeAppear:le,onAppear:de,onAfterAppear:he,onAppearCancelled:_e}=n,xe=String(e.key),Ne=getLeavingNodesForType(r,e),$e=(ze,Ue)=>{ze&&callWithAsyncErrorHandling(ze,g,9,Ue)},Ce=(ze,Ue)=>{const Pt=Ue[1];$e(ze,Ue),isArray$3(ze)?ze.every(hn=>hn.length<=1)&&Pt():ze.length<=1&&Pt()},Ie={mode:k,persisted:$,beforeEnter(ze){let Ue=V;if(!r.isMounted)if(y)Ue=le||V;else return;ze._leaveCb&&ze._leaveCb(!0);const Pt=Ne[xe];Pt&&isSameVNodeType(e,Pt)&&Pt.el._leaveCb&&Pt.el._leaveCb(),$e(Ue,[ze])},enter(ze){let Ue=L,Pt=z,hn=j;if(!r.isMounted)if(y)Ue=de||L,Pt=he||z,hn=_e||j;else return;let Dt=!1;const xn=ze._enterCb=jt=>{Dt||(Dt=!0,jt?$e(hn,[ze]):$e(Pt,[ze]),Ie.delayedLeave&&Ie.delayedLeave(),ze._enterCb=void 0)};Ue?Ce(Ue,[ze,xn]):xn()},leave(ze,Ue){const Pt=String(e.key);if(ze._enterCb&&ze._enterCb(!0),r.isUnmounting)return Ue();$e(ae,[ze]);let hn=!1;const Dt=ze._leaveCb=xn=>{hn||(hn=!0,Ue(),xn?$e(ue,[ze]):$e(re,[ze]),ze._leaveCb=void 0,Ne[Pt]===e&&delete Ne[Pt])};Ne[Pt]=e,oe?Ce(oe,[ze,Dt]):Dt()},clone(ze){return resolveTransitionHooks(ze,n,r,g)}};return Ie}function emptyPlaceholder(e){if(isKeepAlive(e))return e=cloneVNode(e),e.children=null,e}function getKeepAliveChild(e){return isKeepAlive(e)?e.children?e.children[0]:void 0:e}function setTransitionHooks(e,n){e.shapeFlag&6&&e.component?setTransitionHooks(e.component.subTree,n):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function getTransitionRawChildren(e,n=!1,r){let g=[],y=0;for(let k=0;k<e.length;k++){let $=e[k];const V=r==null?$.key:String(r)+String($.key!=null?$.key:k);$.type===Fragment?($.patchFlag&128&&y++,g=g.concat(getTransitionRawChildren($.children,n,V))):(n||$.type!==Comment)&&g.push(V!=null?cloneVNode($,{key:V}):$)}if(y>1)for(let k=0;k<g.length;k++)g[k].patchFlag=-2;return g}function defineComponent(e,n){return isFunction$3(e)?extend({name:e.name},n,{setup:e}):e}const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,n){registerKeepAliveHook(e,"a",n)}function onDeactivated(e,n){registerKeepAliveHook(e,"da",n)}function registerKeepAliveHook(e,n,r=currentInstance){const g=e.__wdc||(e.__wdc=()=>{let y=r;for(;y;){if(y.isDeactivated)return;y=y.parent}return e()});if(injectHook(n,g,r),r){let y=r.parent;for(;y&&y.parent;)isKeepAlive(y.parent.vnode)&&injectToKeepAliveRoot(g,n,r,y),y=y.parent}}function injectToKeepAliveRoot(e,n,r,g){const y=injectHook(n,e,g,!0);onUnmounted(()=>{remove$1(g[n],y)},r)}function injectHook(e,n,r=currentInstance,g=!1){if(r){const y=r[e]||(r[e]=[]),k=n.__weh||(n.__weh=(...$)=>{if(r.isUnmounted)return;pauseTracking(),setCurrentInstance(r);const V=callWithAsyncErrorHandling(n,r,e,$);return unsetCurrentInstance(),resetTracking(),V});return g?y.unshift(k):y.push(k),k}}const createHook=e=>(n,r=currentInstance)=>(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...g)=>n(...g),r),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,n=currentInstance){injectHook("ec",e,n)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(e,n){return resolveAsset(COMPONENTS,e,!0,n)||e}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(e){return isString$3(e)?resolveAsset(COMPONENTS,e,!1)||e:e||NULL_DYNAMIC_COMPONENT}function resolveDirective(e){return resolveAsset(DIRECTIVES,e)}function resolveAsset(e,n,r=!0,g=!1){const y=currentRenderingInstance||currentInstance;if(y){const k=y.type;if(e===COMPONENTS){const V=getComponentName(k,!1);if(V&&(V===n||V===camelize(n)||V===capitalize$2(camelize(n))))return k}const $=resolve(y[e]||k[e],n)||resolve(y.appContext[e],n);return!$&&g?k:$}}function resolve(e,n){return e&&(e[n]||e[camelize(n)]||e[capitalize$2(camelize(n))])}function renderList(e,n,r,g){let y;const k=r&&r[g];if(isArray$3(e)||isString$3(e)){y=new Array(e.length);for(let $=0,V=e.length;$<V;$++)y[$]=n(e[$],$,void 0,k&&k[$])}else if(typeof e=="number"){y=new Array(e);for(let $=0;$<e;$++)y[$]=n($+1,$,void 0,k&&k[$])}else if(isObject$3(e))if(e[Symbol.iterator])y=Array.from(e,($,V)=>n($,V,void 0,k&&k[V]));else{const $=Object.keys(e);y=new Array($.length);for(let V=0,L=$.length;V<L;V++){const z=$[V];y[V]=n(e[z],z,V,k&&k[V])}}else y=[];return r&&(r[g]=y),y}function createSlots(e,n){for(let r=0;r<n.length;r++){const g=n[r];if(isArray$3(g))for(let y=0;y<g.length;y++)e[g[y].name]=g[y].fn;else g&&(e[g.name]=g.key?(...y)=>{const k=g.fn(...y);return k&&(k.key=g.key),k}:g.fn)}return e}function renderSlot(e,n,r={},g,y){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return n!=="default"&&(r.name=n),createVNode("slot",r,g&&g());let k=e[n];k&&k._c&&(k._d=!1),openBlock();const $=k&&ensureValidVNode(k(r)),V=createBlock(Fragment,{key:r.key||$&&$.key||`_${n}`},$||(g?g():[]),$&&e._===1?64:-2);return!y&&V.scopeId&&(V.slotScopeIds=[V.scopeId+"-s"]),k&&k._c&&(k._d=!0),V}function ensureValidVNode(e){return e.some(n=>isVNode$1(n)?!(n.type===Comment||n.type===Fragment&&!ensureValidVNode(n.children)):!0)?e:null}function toHandlers(e,n){const r={};for(const g in e)r[n&&/[A-Z]/.test(g)?`on:${g}`:toHandlerKey(g)]=e[g];return r}const getPublicInstance=e=>e?isStatefulComponent(e)?getExposeProxy(e)||e.proxy:getPublicInstance(e.parent):null,publicPropertiesMap=extend(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>queueJob(e.update)),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,n)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn$1(e,n),PublicInstanceProxyHandlers={get({_:e},n){const{ctx:r,setupState:g,data:y,props:k,accessCache:$,type:V,appContext:L}=e;let z;if(n[0]!=="$"){const re=$[n];if(re!==void 0)switch(re){case 1:return g[n];case 2:return y[n];case 4:return r[n];case 3:return k[n]}else{if(hasSetupBinding(g,n))return $[n]=1,g[n];if(y!==EMPTY_OBJ&&hasOwn$1(y,n))return $[n]=2,y[n];if((z=e.propsOptions[0])&&hasOwn$1(z,n))return $[n]=3,k[n];if(r!==EMPTY_OBJ&&hasOwn$1(r,n))return $[n]=4,r[n];shouldCacheAccess&&($[n]=0)}}const j=publicPropertiesMap[n];let ae,oe;if(j)return n==="$attrs"&&track(e,"get",n),j(e);if((ae=V.__cssModules)&&(ae=ae[n]))return ae;if(r!==EMPTY_OBJ&&hasOwn$1(r,n))return $[n]=4,r[n];if(oe=L.config.globalProperties,hasOwn$1(oe,n))return oe[n]},set({_:e},n,r){const{data:g,setupState:y,ctx:k}=e;return hasSetupBinding(y,n)?(y[n]=r,!0):g!==EMPTY_OBJ&&hasOwn$1(g,n)?(g[n]=r,!0):hasOwn$1(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(k[n]=r,!0)},has({_:{data:e,setupState:n,accessCache:r,ctx:g,appContext:y,propsOptions:k}},$){let V;return!!r[$]||e!==EMPTY_OBJ&&hasOwn$1(e,$)||hasSetupBinding(n,$)||(V=k[0])&&hasOwn$1(V,$)||hasOwn$1(g,$)||hasOwn$1(publicPropertiesMap,$)||hasOwn$1(y.config.globalProperties,$)},defineProperty(e,n,r){return r.get!=null?e._.accessCache[n]=0:hasOwn$1(r,"value")&&this.set(e,n,r.value,null),Reflect.defineProperty(e,n,r)}};function useSlots(){return getContext().slots}function useAttrs$1(){return getContext().attrs}function getContext(){const e=getCurrentInstance();return e.setupContext||(e.setupContext=createSetupContext(e))}function normalizePropsOrEmits(e){return isArray$3(e)?e.reduce((n,r)=>(n[r]=null,n),{}):e}let shouldCacheAccess=!0;function applyOptions(e){const n=resolveMergedOptions(e),r=e.proxy,g=e.ctx;shouldCacheAccess=!1,n.beforeCreate&&callHook$1(n.beforeCreate,e,"bc");const{data:y,computed:k,methods:$,watch:V,provide:L,inject:z,created:j,beforeMount:ae,mounted:oe,beforeUpdate:re,updated:ue,activated:le,deactivated:de,beforeDestroy:he,beforeUnmount:_e,destroyed:xe,unmounted:Ne,render:$e,renderTracked:Ce,renderTriggered:Ie,errorCaptured:ze,serverPrefetch:Ue,expose:Pt,inheritAttrs:hn,components:Dt,directives:xn,filters:jt}=n;if(z&&resolveInjections(z,g,null),$)for(const Tn in $){const Ln=$[Tn];isFunction$3(Ln)&&(g[Tn]=Ln.bind(r))}if(y){const Tn=y.call(r,r);isObject$3(Tn)&&(e.data=reactive(Tn))}if(shouldCacheAccess=!0,k)for(const Tn in k){const Ln=k[Tn],Sn=isFunction$3(Ln)?Ln.bind(r,r):isFunction$3(Ln.get)?Ln.get.bind(r,r):NOOP,An=!isFunction$3(Ln)&&isFunction$3(Ln.set)?Ln.set.bind(r):NOOP,In=computed({get:Sn,set:An});Object.defineProperty(g,Tn,{enumerable:!0,configurable:!0,get:()=>In.value,set:Mn=>In.value=Mn})}if(V)for(const Tn in V)createWatcher(V[Tn],g,r,Tn);if(L){const Tn=isFunction$3(L)?L.call(r):L;Reflect.ownKeys(Tn).forEach(Ln=>{provide(Ln,Tn[Ln])})}j&&callHook$1(j,e,"c");function Rn(Tn,Ln){isArray$3(Ln)?Ln.forEach(Sn=>Tn(Sn.bind(r))):Ln&&Tn(Ln.bind(r))}if(Rn(onBeforeMount,ae),Rn(onMounted,oe),Rn(onBeforeUpdate,re),Rn(onUpdated,ue),Rn(onActivated,le),Rn(onDeactivated,de),Rn(onErrorCaptured,ze),Rn(onRenderTracked,Ce),Rn(onRenderTriggered,Ie),Rn(onBeforeUnmount,_e),Rn(onUnmounted,Ne),Rn(onServerPrefetch,Ue),isArray$3(Pt))if(Pt.length){const Tn=e.exposed||(e.exposed={});Pt.forEach(Ln=>{Object.defineProperty(Tn,Ln,{get:()=>r[Ln],set:Sn=>r[Ln]=Sn})})}else e.exposed||(e.exposed={});$e&&e.render===NOOP&&(e.render=$e),hn!=null&&(e.inheritAttrs=hn),Dt&&(e.components=Dt),xn&&(e.directives=xn)}function resolveInjections(e,n,r=NOOP){isArray$3(e)&&(e=normalizeInject(e));for(const g in e){const y=e[g];let k;isObject$3(y)?"default"in y?k=inject(y.from||g,y.default,!0):k=inject(y.from||g):k=inject(y),isRef(k)?Object.defineProperty(n,g,{enumerable:!0,configurable:!0,get:()=>k.value,set:$=>k.value=$}):n[g]=k}}function callHook$1(e,n,r){callWithAsyncErrorHandling(isArray$3(e)?e.map(g=>g.bind(n.proxy)):e.bind(n.proxy),n,r)}function createWatcher(e,n,r,g){const y=g.includes(".")?createPathGetter(r,g):()=>r[g];if(isString$3(e)){const k=n[e];isFunction$3(k)&&watch(y,k)}else if(isFunction$3(e))watch(y,e.bind(r));else if(isObject$3(e))if(isArray$3(e))e.forEach(k=>createWatcher(k,n,r,g));else{const k=isFunction$3(e.handler)?e.handler.bind(r):n[e.handler];isFunction$3(k)&&watch(y,k,e)}}function resolveMergedOptions(e){const n=e.type,{mixins:r,extends:g}=n,{mixins:y,optionsCache:k,config:{optionMergeStrategies:$}}=e.appContext,V=k.get(n);let L;return V?L=V:!y.length&&!r&&!g?L=n:(L={},y.length&&y.forEach(z=>mergeOptions$2(L,z,$,!0)),mergeOptions$2(L,n,$)),isObject$3(n)&&k.set(n,L),L}function mergeOptions$2(e,n,r,g=!1){const{mixins:y,extends:k}=n;k&&mergeOptions$2(e,k,r,!0),y&&y.forEach($=>mergeOptions$2(e,$,r,!0));for(const $ in n)if(!(g&&$==="expose")){const V=internalOptionMergeStrats[$]||r&&r[$];e[$]=V?V(e[$],n[$]):n[$]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,n){return n?e?function(){return extend(isFunction$3(e)?e.call(this,this):e,isFunction$3(n)?n.call(this,this):n)}:n:e}function mergeInject(e,n){return mergeObjectOptions(normalizeInject(e),normalizeInject(n))}function normalizeInject(e){if(isArray$3(e)){const n={};for(let r=0;r<e.length;r++)n[e[r]]=e[r];return n}return e}function mergeAsArray(e,n){return e?[...new Set([].concat(e,n))]:n}function mergeObjectOptions(e,n){return e?extend(Object.create(null),e,n):n}function mergeEmitsOrPropsOptions(e,n){return e?isArray$3(e)&&isArray$3(n)?[...new Set([...e,...n])]:extend(Object.create(null),normalizePropsOrEmits(e),normalizePropsOrEmits(n??{})):n}function mergeWatchOptions(e,n){if(!e)return n;if(!n)return e;const r=extend(Object.create(null),e);for(const g in n)r[g]=mergeAsArray(e[g],n[g]);return r}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,n){return function(g,y=null){isFunction$3(g)||(g=extend({},g)),y!=null&&!isObject$3(y)&&(y=null);const k=createAppContext(),$=new Set;let V=!1;const L=k.app={_uid:uid$1++,_component:g,_props:y,_container:null,_context:k,_instance:null,version:version$1,get config(){return k.config},set config(z){},use(z,...j){return $.has(z)||(z&&isFunction$3(z.install)?($.add(z),z.install(L,...j)):isFunction$3(z)&&($.add(z),z(L,...j))),L},mixin(z){return k.mixins.includes(z)||k.mixins.push(z),L},component(z,j){return j?(k.components[z]=j,L):k.components[z]},directive(z,j){return j?(k.directives[z]=j,L):k.directives[z]},mount(z,j,ae){if(!V){const oe=createVNode(g,y);return oe.appContext=k,j&&n?n(oe,z):e(oe,z,ae),V=!0,L._container=z,z.__vue_app__=L,getExposeProxy(oe.component)||oe.component.proxy}},unmount(){V&&(e(null,L._container),delete L._container.__vue_app__)},provide(z,j){return k.provides[z]=j,L},runWithContext(z){currentApp=L;try{return z()}finally{currentApp=null}}};return L}}let currentApp=null;function provide(e,n){if(currentInstance){let r=currentInstance.provides;const g=currentInstance.parent&&currentInstance.parent.provides;g===r&&(r=currentInstance.provides=Object.create(g)),r[e]=n}}function inject(e,n,r=!1){const g=currentInstance||currentRenderingInstance;if(g||currentApp){const y=g?g.parent==null?g.vnode.appContext&&g.vnode.appContext.provides:g.parent.provides:currentApp._context.provides;if(y&&e in y)return y[e];if(arguments.length>1)return r&&isFunction$3(n)?n.call(g&&g.proxy):n}}function initProps(e,n,r,g=!1){const y={},k={};def(k,InternalObjectKey,1),e.propsDefaults=Object.create(null),setFullProps(e,n,y,k);for(const $ in e.propsOptions[0])$ in y||(y[$]=void 0);r?e.props=g?y:shallowReactive(y):e.type.props?e.props=y:e.props=k,e.attrs=k}function updateProps(e,n,r,g){const{props:y,attrs:k,vnode:{patchFlag:$}}=e,V=toRaw(y),[L]=e.propsOptions;let z=!1;if((g||$>0)&&!($&16)){if($&8){const j=e.vnode.dynamicProps;for(let ae=0;ae<j.length;ae++){let oe=j[ae];if(isEmitListener(e.emitsOptions,oe))continue;const re=n[oe];if(L)if(hasOwn$1(k,oe))re!==k[oe]&&(k[oe]=re,z=!0);else{const ue=camelize(oe);y[ue]=resolvePropValue(L,V,ue,re,e,!1)}else re!==k[oe]&&(k[oe]=re,z=!0)}}}else{setFullProps(e,n,y,k)&&(z=!0);let j;for(const ae in V)(!n||!hasOwn$1(n,ae)&&((j=hyphenate(ae))===ae||!hasOwn$1(n,j)))&&(L?r&&(r[ae]!==void 0||r[j]!==void 0)&&(y[ae]=resolvePropValue(L,V,ae,void 0,e,!0)):delete y[ae]);if(k!==V)for(const ae in k)(!n||!hasOwn$1(n,ae))&&(delete k[ae],z=!0)}z&&trigger(e,"set","$attrs")}function setFullProps(e,n,r,g){const[y,k]=e.propsOptions;let $=!1,V;if(n)for(let L in n){if(isReservedProp(L))continue;const z=n[L];let j;y&&hasOwn$1(y,j=camelize(L))?!k||!k.includes(j)?r[j]=z:(V||(V={}))[j]=z:isEmitListener(e.emitsOptions,L)||(!(L in g)||z!==g[L])&&(g[L]=z,$=!0)}if(k){const L=toRaw(r),z=V||EMPTY_OBJ;for(let j=0;j<k.length;j++){const ae=k[j];r[ae]=resolvePropValue(y,L,ae,z[ae],e,!hasOwn$1(z,ae))}}return $}function resolvePropValue(e,n,r,g,y,k){const $=e[r];if($!=null){const V=hasOwn$1($,"default");if(V&&g===void 0){const L=$.default;if($.type!==Function&&!$.skipFactory&&isFunction$3(L)){const{propsDefaults:z}=y;r in z?g=z[r]:(setCurrentInstance(y),g=z[r]=L.call(null,n),unsetCurrentInstance())}else g=L}$[0]&&(k&&!V?g=!1:$[1]&&(g===""||g===hyphenate(r))&&(g=!0))}return g}function normalizePropsOptions(e,n,r=!1){const g=n.propsCache,y=g.get(e);if(y)return y;const k=e.props,$={},V=[];let L=!1;if(!isFunction$3(e)){const j=ae=>{L=!0;const[oe,re]=normalizePropsOptions(ae,n,!0);extend($,oe),re&&V.push(...re)};!r&&n.mixins.length&&n.mixins.forEach(j),e.extends&&j(e.extends),e.mixins&&e.mixins.forEach(j)}if(!k&&!L)return isObject$3(e)&&g.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$3(k))for(let j=0;j<k.length;j++){const ae=camelize(k[j]);validatePropName(ae)&&($[ae]=EMPTY_OBJ)}else if(k)for(const j in k){const ae=camelize(j);if(validatePropName(ae)){const oe=k[j],re=$[ae]=isArray$3(oe)||isFunction$3(oe)?{type:oe}:extend({},oe);if(re){const ue=getTypeIndex(Boolean,re.type),le=getTypeIndex(String,re.type);re[0]=ue>-1,re[1]=le<0||ue<le,(ue>-1||hasOwn$1(re,"default"))&&V.push(ae)}}}const z=[$,V];return isObject$3(e)&&g.set(e,z),z}function validatePropName(e){return e[0]!=="$"}function getType(e){const n=e&&e.toString().match(/^\s*(function|class) (\w+)/);return n?n[2]:e===null?"null":""}function isSameType(e,n){return getType(e)===getType(n)}function getTypeIndex(e,n){return isArray$3(n)?n.findIndex(r=>isSameType(r,e)):isFunction$3(n)&&isSameType(n,e)?0:-1}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray$3(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot$1=(e,n,r)=>{if(n._n)return n;const g=withCtx((...y)=>normalizeSlotValue(n(...y)),r);return g._c=!1,g},normalizeObjectSlots=(e,n,r)=>{const g=e._ctx;for(const y in e){if(isInternalKey(y))continue;const k=e[y];if(isFunction$3(k))n[y]=normalizeSlot$1(y,k,g);else if(k!=null){const $=normalizeSlotValue(k);n[y]=()=>$}}},normalizeVNodeSlots=(e,n)=>{const r=normalizeSlotValue(n);e.slots.default=()=>r},initSlots=(e,n)=>{if(e.vnode.shapeFlag&32){const r=n._;r?(e.slots=toRaw(n),def(n,"_",r)):normalizeObjectSlots(n,e.slots={})}else e.slots={},n&&normalizeVNodeSlots(e,n);def(e.slots,InternalObjectKey,1)},updateSlots=(e,n,r)=>{const{vnode:g,slots:y}=e;let k=!0,$=EMPTY_OBJ;if(g.shapeFlag&32){const V=n._;V?r&&V===1?k=!1:(extend(y,n),!r&&V===1&&delete y._):(k=!n.$stable,normalizeObjectSlots(n,y)),$=n}else n&&(normalizeVNodeSlots(e,n),$={default:1});if(k)for(const V in y)!isInternalKey(V)&&!(V in $)&&delete y[V]};function setRef(e,n,r,g,y=!1){if(isArray$3(e)){e.forEach((oe,re)=>setRef(oe,n&&(isArray$3(n)?n[re]:n),r,g,y));return}if(isAsyncWrapper(g)&&!y)return;const k=g.shapeFlag&4?getExposeProxy(g.component)||g.component.proxy:g.el,$=y?null:k,{i:V,r:L}=e,z=n&&n.r,j=V.refs===EMPTY_OBJ?V.refs={}:V.refs,ae=V.setupState;if(z!=null&&z!==L&&(isString$3(z)?(j[z]=null,hasOwn$1(ae,z)&&(ae[z]=null)):isRef(z)&&(z.value=null)),isFunction$3(L))callWithErrorHandling(L,V,12,[$,j]);else{const oe=isString$3(L),re=isRef(L);if(oe||re){const ue=()=>{if(e.f){const le=oe?hasOwn$1(ae,L)?ae[L]:j[L]:L.value;y?isArray$3(le)&&remove$1(le,k):isArray$3(le)?le.includes(k)||le.push(k):oe?(j[L]=[k],hasOwn$1(ae,L)&&(ae[L]=j[L])):(L.value=[k],e.k&&(j[e.k]=L.value))}else oe?(j[L]=$,hasOwn$1(ae,L)&&(ae[L]=$)):re&&(L.value=$,e.k&&(j[e.k]=$))};$?(ue.id=-1,queuePostRenderEffect(ue,r)):ue()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,n){const r=getGlobalThis$1();r.__VUE__=!0;const{insert:g,remove:y,patchProp:k,createElement:$,createText:V,createComment:L,setText:z,setElementText:j,parentNode:ae,nextSibling:oe,setScopeId:re=NOOP,insertStaticContent:ue}=e,le=(sa,Hn,bn,Xn=null,$n=null,kt=null,At=!1,Dn=null,Qn=!!Hn.dynamicChildren)=>{if(sa===Hn)return;sa&&!isSameVNodeType(sa,Hn)&&(Xn=Nn(sa),Mn(sa,$n,kt,!0),sa=null),Hn.patchFlag===-2&&(Qn=!1,Hn.dynamicChildren=null);const{type:oa,ref:na,shapeFlag:la}=Hn;switch(oa){case Text$2:de(sa,Hn,bn,Xn);break;case Comment:he(sa,Hn,bn,Xn);break;case Static:sa==null&&_e(Hn,bn,Xn,At);break;case Fragment:Dt(sa,Hn,bn,Xn,$n,kt,At,Dn,Qn);break;default:la&1?$e(sa,Hn,bn,Xn,$n,kt,At,Dn,Qn):la&6?xn(sa,Hn,bn,Xn,$n,kt,At,Dn,Qn):(la&64||la&128)&&oa.process(sa,Hn,bn,Xn,$n,kt,At,Dn,Qn,Zn)}na!=null&&$n&&setRef(na,sa&&sa.ref,kt,Hn||sa,!Hn)},de=(sa,Hn,bn,Xn)=>{if(sa==null)g(Hn.el=V(Hn.children),bn,Xn);else{const $n=Hn.el=sa.el;Hn.children!==sa.children&&z($n,Hn.children)}},he=(sa,Hn,bn,Xn)=>{sa==null?g(Hn.el=L(Hn.children||""),bn,Xn):Hn.el=sa.el},_e=(sa,Hn,bn,Xn)=>{[sa.el,sa.anchor]=ue(sa.children,Hn,bn,Xn,sa.el,sa.anchor)},xe=({el:sa,anchor:Hn},bn,Xn)=>{let $n;for(;sa&&sa!==Hn;)$n=oe(sa),g(sa,bn,Xn),sa=$n;g(Hn,bn,Xn)},Ne=({el:sa,anchor:Hn})=>{let bn;for(;sa&&sa!==Hn;)bn=oe(sa),y(sa),sa=bn;y(Hn)},$e=(sa,Hn,bn,Xn,$n,kt,At,Dn,Qn)=>{At=At||Hn.type==="svg",sa==null?Ce(Hn,bn,Xn,$n,kt,At,Dn,Qn):Ue(sa,Hn,$n,kt,At,Dn,Qn)},Ce=(sa,Hn,bn,Xn,$n,kt,At,Dn)=>{let Qn,oa;const{type:na,props:la,shapeFlag:ma,transition:ca,dirs:pe}=sa;if(Qn=sa.el=$(sa.type,kt,la&&la.is,la),ma&8?j(Qn,sa.children):ma&16&&ze(sa.children,Qn,null,Xn,$n,kt&&na!=="foreignObject",At,Dn),pe&&invokeDirectiveHook(sa,null,Xn,"created"),Ie(Qn,sa,sa.scopeId,At,Xn),la){for(const Ve in la)Ve!=="value"&&!isReservedProp(Ve)&&k(Qn,Ve,null,la[Ve],kt,sa.children,Xn,$n,aa);"value"in la&&k(Qn,"value",null,la.value),(oa=la.onVnodeBeforeMount)&&invokeVNodeHook(oa,Xn,sa)}pe&&invokeDirectiveHook(sa,null,Xn,"beforeMount");const Oe=(!$n||$n&&!$n.pendingBranch)&&ca&&!ca.persisted;Oe&&ca.beforeEnter(Qn),g(Qn,Hn,bn),((oa=la&&la.onVnodeMounted)||Oe||pe)&&queuePostRenderEffect(()=>{oa&&invokeVNodeHook(oa,Xn,sa),Oe&&ca.enter(Qn),pe&&invokeDirectiveHook(sa,null,Xn,"mounted")},$n)},Ie=(sa,Hn,bn,Xn,$n)=>{if(bn&&re(sa,bn),Xn)for(let kt=0;kt<Xn.length;kt++)re(sa,Xn[kt]);if($n){let kt=$n.subTree;if(Hn===kt){const At=$n.vnode;Ie(sa,At,At.scopeId,At.slotScopeIds,$n.parent)}}},ze=(sa,Hn,bn,Xn,$n,kt,At,Dn,Qn=0)=>{for(let oa=Qn;oa<sa.length;oa++){const na=sa[oa]=Dn?cloneIfMounted(sa[oa]):normalizeVNode(sa[oa]);le(null,na,Hn,bn,Xn,$n,kt,At,Dn)}},Ue=(sa,Hn,bn,Xn,$n,kt,At)=>{const Dn=Hn.el=sa.el;let{patchFlag:Qn,dynamicChildren:oa,dirs:na}=Hn;Qn|=sa.patchFlag&16;const la=sa.props||EMPTY_OBJ,ma=Hn.props||EMPTY_OBJ;let ca;bn&&toggleRecurse(bn,!1),(ca=ma.onVnodeBeforeUpdate)&&invokeVNodeHook(ca,bn,Hn,sa),na&&invokeDirectiveHook(Hn,sa,bn,"beforeUpdate"),bn&&toggleRecurse(bn,!0);const pe=$n&&Hn.type!=="foreignObject";if(oa?Pt(sa.dynamicChildren,oa,Dn,bn,Xn,pe,kt):At||Ln(sa,Hn,Dn,null,bn,Xn,pe,kt,!1),Qn>0){if(Qn&16)hn(Dn,Hn,la,ma,bn,Xn,$n);else if(Qn&2&&la.class!==ma.class&&k(Dn,"class",null,ma.class,$n),Qn&4&&k(Dn,"style",la.style,ma.style,$n),Qn&8){const Oe=Hn.dynamicProps;for(let Ve=0;Ve<Oe.length;Ve++){const qe=Oe[Ve],Et=la[qe],Lt=ma[qe];(Lt!==Et||qe==="value")&&k(Dn,qe,Et,Lt,$n,sa.children,bn,Xn,aa)}}Qn&1&&sa.children!==Hn.children&&j(Dn,Hn.children)}else!At&&oa==null&&hn(Dn,Hn,la,ma,bn,Xn,$n);((ca=ma.onVnodeUpdated)||na)&&queuePostRenderEffect(()=>{ca&&invokeVNodeHook(ca,bn,Hn,sa),na&&invokeDirectiveHook(Hn,sa,bn,"updated")},Xn)},Pt=(sa,Hn,bn,Xn,$n,kt,At)=>{for(let Dn=0;Dn<Hn.length;Dn++){const Qn=sa[Dn],oa=Hn[Dn],na=Qn.el&&(Qn.type===Fragment||!isSameVNodeType(Qn,oa)||Qn.shapeFlag&70)?ae(Qn.el):bn;le(Qn,oa,na,null,Xn,$n,kt,At,!0)}},hn=(sa,Hn,bn,Xn,$n,kt,At)=>{if(bn!==Xn){if(bn!==EMPTY_OBJ)for(const Dn in bn)!isReservedProp(Dn)&&!(Dn in Xn)&&k(sa,Dn,bn[Dn],null,At,Hn.children,$n,kt,aa);for(const Dn in Xn){if(isReservedProp(Dn))continue;const Qn=Xn[Dn],oa=bn[Dn];Qn!==oa&&Dn!=="value"&&k(sa,Dn,oa,Qn,At,Hn.children,$n,kt,aa)}"value"in Xn&&k(sa,"value",bn.value,Xn.value)}},Dt=(sa,Hn,bn,Xn,$n,kt,At,Dn,Qn)=>{const oa=Hn.el=sa?sa.el:V(""),na=Hn.anchor=sa?sa.anchor:V("");let{patchFlag:la,dynamicChildren:ma,slotScopeIds:ca}=Hn;ca&&(Dn=Dn?Dn.concat(ca):ca),sa==null?(g(oa,bn,Xn),g(na,bn,Xn),ze(Hn.children,bn,na,$n,kt,At,Dn,Qn)):la>0&&la&64&&ma&&sa.dynamicChildren?(Pt(sa.dynamicChildren,ma,bn,$n,kt,At,Dn),(Hn.key!=null||$n&&Hn===$n.subTree)&&traverseStaticChildren(sa,Hn,!0)):Ln(sa,Hn,bn,na,$n,kt,At,Dn,Qn)},xn=(sa,Hn,bn,Xn,$n,kt,At,Dn,Qn)=>{Hn.slotScopeIds=Dn,sa==null?Hn.shapeFlag&512?$n.ctx.activate(Hn,bn,Xn,At,Qn):jt(Hn,bn,Xn,$n,kt,At,Qn):Vn(sa,Hn,Qn)},jt=(sa,Hn,bn,Xn,$n,kt,At)=>{const Dn=sa.component=createComponentInstance(sa,Xn,$n);if(isKeepAlive(sa)&&(Dn.ctx.renderer=Zn),setupComponent(Dn),Dn.asyncDep){if($n&&$n.registerDep(Dn,Rn),!sa.el){const Qn=Dn.subTree=createVNode(Comment);he(null,Qn,Hn,bn)}return}Rn(Dn,sa,Hn,bn,$n,kt,At)},Vn=(sa,Hn,bn)=>{const Xn=Hn.component=sa.component;if(shouldUpdateComponent(sa,Hn,bn))if(Xn.asyncDep&&!Xn.asyncResolved){Tn(Xn,Hn,bn);return}else Xn.next=Hn,invalidateJob(Xn.update),Xn.update();else Hn.el=sa.el,Xn.vnode=Hn},Rn=(sa,Hn,bn,Xn,$n,kt,At)=>{const Dn=()=>{if(sa.isMounted){let{next:na,bu:la,u:ma,parent:ca,vnode:pe}=sa,Oe=na,Ve;toggleRecurse(sa,!1),na?(na.el=pe.el,Tn(sa,na,At)):na=pe,la&&invokeArrayFns(la),(Ve=na.props&&na.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Ve,ca,na,pe),toggleRecurse(sa,!0);const qe=renderComponentRoot(sa),Et=sa.subTree;sa.subTree=qe,le(Et,qe,ae(Et.el),Nn(Et),sa,$n,kt),na.el=qe.el,Oe===null&&updateHOCHostEl(sa,qe.el),ma&&queuePostRenderEffect(ma,$n),(Ve=na.props&&na.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Ve,ca,na,pe),$n)}else{let na;const{el:la,props:ma}=Hn,{bm:ca,m:pe,parent:Oe}=sa,Ve=isAsyncWrapper(Hn);if(toggleRecurse(sa,!1),ca&&invokeArrayFns(ca),!Ve&&(na=ma&&ma.onVnodeBeforeMount)&&invokeVNodeHook(na,Oe,Hn),toggleRecurse(sa,!0),la&&xa){const qe=()=>{sa.subTree=renderComponentRoot(sa),xa(la,sa.subTree,sa,$n,null)};Ve?Hn.type.__asyncLoader().then(()=>!sa.isUnmounted&&qe()):qe()}else{const qe=sa.subTree=renderComponentRoot(sa);le(null,qe,bn,Xn,sa,$n,kt),Hn.el=qe.el}if(pe&&queuePostRenderEffect(pe,$n),!Ve&&(na=ma&&ma.onVnodeMounted)){const qe=Hn;queuePostRenderEffect(()=>invokeVNodeHook(na,Oe,qe),$n)}(Hn.shapeFlag&256||Oe&&isAsyncWrapper(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&sa.a&&queuePostRenderEffect(sa.a,$n),sa.isMounted=!0,Hn=bn=Xn=null}},Qn=sa.effect=new ReactiveEffect(Dn,()=>queueJob(oa),sa.scope),oa=sa.update=()=>Qn.run();oa.id=sa.uid,toggleRecurse(sa,!0),oa()},Tn=(sa,Hn,bn)=>{Hn.component=sa;const Xn=sa.vnode.props;sa.vnode=Hn,sa.next=null,updateProps(sa,Hn.props,Xn,bn),updateSlots(sa,Hn.children,bn),pauseTracking(),flushPreFlushCbs(),resetTracking()},Ln=(sa,Hn,bn,Xn,$n,kt,At,Dn,Qn=!1)=>{const oa=sa&&sa.children,na=sa?sa.shapeFlag:0,la=Hn.children,{patchFlag:ma,shapeFlag:ca}=Hn;if(ma>0){if(ma&128){An(oa,la,bn,Xn,$n,kt,At,Dn,Qn);return}else if(ma&256){Sn(oa,la,bn,Xn,$n,kt,At,Dn,Qn);return}}ca&8?(na&16&&aa(oa,$n,kt),la!==oa&&j(bn,la)):na&16?ca&16?An(oa,la,bn,Xn,$n,kt,At,Dn,Qn):aa(oa,$n,kt,!0):(na&8&&j(bn,""),ca&16&&ze(la,bn,Xn,$n,kt,At,Dn,Qn))},Sn=(sa,Hn,bn,Xn,$n,kt,At,Dn,Qn)=>{sa=sa||EMPTY_ARR,Hn=Hn||EMPTY_ARR;const oa=sa.length,na=Hn.length,la=Math.min(oa,na);let ma;for(ma=0;ma<la;ma++){const ca=Hn[ma]=Qn?cloneIfMounted(Hn[ma]):normalizeVNode(Hn[ma]);le(sa[ma],ca,bn,null,$n,kt,At,Dn,Qn)}oa>na?aa(sa,$n,kt,!0,!1,la):ze(Hn,bn,Xn,$n,kt,At,Dn,Qn,la)},An=(sa,Hn,bn,Xn,$n,kt,At,Dn,Qn)=>{let oa=0;const na=Hn.length;let la=sa.length-1,ma=na-1;for(;oa<=la&&oa<=ma;){const ca=sa[oa],pe=Hn[oa]=Qn?cloneIfMounted(Hn[oa]):normalizeVNode(Hn[oa]);if(isSameVNodeType(ca,pe))le(ca,pe,bn,null,$n,kt,At,Dn,Qn);else break;oa++}for(;oa<=la&&oa<=ma;){const ca=sa[la],pe=Hn[ma]=Qn?cloneIfMounted(Hn[ma]):normalizeVNode(Hn[ma]);if(isSameVNodeType(ca,pe))le(ca,pe,bn,null,$n,kt,At,Dn,Qn);else break;la--,ma--}if(oa>la){if(oa<=ma){const ca=ma+1,pe=ca<na?Hn[ca].el:Xn;for(;oa<=ma;)le(null,Hn[oa]=Qn?cloneIfMounted(Hn[oa]):normalizeVNode(Hn[oa]),bn,pe,$n,kt,At,Dn,Qn),oa++}}else if(oa>ma)for(;oa<=la;)Mn(sa[oa],$n,kt,!0),oa++;else{const ca=oa,pe=oa,Oe=new Map;for(oa=pe;oa<=ma;oa++){const Cn=Hn[oa]=Qn?cloneIfMounted(Hn[oa]):normalizeVNode(Hn[oa]);Cn.key!=null&&Oe.set(Cn.key,oa)}let Ve,qe=0;const Et=ma-pe+1;let Lt=!1,_n=0;const vn=new Array(Et);for(oa=0;oa<Et;oa++)vn[oa]=0;for(oa=ca;oa<=la;oa++){const Cn=sa[oa];if(qe>=Et){Mn(Cn,$n,kt,!0);continue}let Bn;if(Cn.key!=null)Bn=Oe.get(Cn.key);else for(Ve=pe;Ve<=ma;Ve++)if(vn[Ve-pe]===0&&isSameVNodeType(Cn,Hn[Ve])){Bn=Ve;break}Bn===void 0?Mn(Cn,$n,kt,!0):(vn[Bn-pe]=oa+1,Bn>=_n?_n=Bn:Lt=!0,le(Cn,Hn[Bn],bn,null,$n,kt,At,Dn,Qn),qe++)}const wn=Lt?getSequence(vn):EMPTY_ARR;for(Ve=wn.length-1,oa=Et-1;oa>=0;oa--){const Cn=pe+oa,Bn=Hn[Cn],zn=Cn+1<na?Hn[Cn+1].el:Xn;vn[oa]===0?le(null,Bn,bn,zn,$n,kt,At,Dn,Qn):Lt&&(Ve<0||oa!==wn[Ve]?In(Bn,bn,zn,2):Ve--)}}},In=(sa,Hn,bn,Xn,$n=null)=>{const{el:kt,type:At,transition:Dn,children:Qn,shapeFlag:oa}=sa;if(oa&6){In(sa.component.subTree,Hn,bn,Xn);return}if(oa&128){sa.suspense.move(Hn,bn,Xn);return}if(oa&64){At.move(sa,Hn,bn,Zn);return}if(At===Fragment){g(kt,Hn,bn);for(let la=0;la<Qn.length;la++)In(Qn[la],Hn,bn,Xn);g(sa.anchor,Hn,bn);return}if(At===Static){xe(sa,Hn,bn);return}if(Xn!==2&&oa&1&&Dn)if(Xn===0)Dn.beforeEnter(kt),g(kt,Hn,bn),queuePostRenderEffect(()=>Dn.enter(kt),$n);else{const{leave:la,delayLeave:ma,afterLeave:ca}=Dn,pe=()=>g(kt,Hn,bn),Oe=()=>{la(kt,()=>{pe(),ca&&ca()})};ma?ma(kt,pe,Oe):Oe()}else g(kt,Hn,bn)},Mn=(sa,Hn,bn,Xn=!1,$n=!1)=>{const{type:kt,props:At,ref:Dn,children:Qn,dynamicChildren:oa,shapeFlag:na,patchFlag:la,dirs:ma}=sa;if(Dn!=null&&setRef(Dn,null,bn,sa,!0),na&256){Hn.ctx.deactivate(sa);return}const ca=na&1&&ma,pe=!isAsyncWrapper(sa);let Oe;if(pe&&(Oe=At&&At.onVnodeBeforeUnmount)&&invokeVNodeHook(Oe,Hn,sa),na&6)ua(sa.component,bn,Xn);else{if(na&128){sa.suspense.unmount(bn,Xn);return}ca&&invokeDirectiveHook(sa,null,Hn,"beforeUnmount"),na&64?sa.type.remove(sa,Hn,bn,$n,Zn,Xn):oa&&(kt!==Fragment||la>0&&la&64)?aa(oa,Hn,bn,!1,!0):(kt===Fragment&&la&384||!$n&&na&16)&&aa(Qn,Hn,bn),Xn&&ra(sa)}(pe&&(Oe=At&&At.onVnodeUnmounted)||ca)&&queuePostRenderEffect(()=>{Oe&&invokeVNodeHook(Oe,Hn,sa),ca&&invokeDirectiveHook(sa,null,Hn,"unmounted")},bn)},ra=sa=>{const{type:Hn,el:bn,anchor:Xn,transition:$n}=sa;if(Hn===Fragment){da(bn,Xn);return}if(Hn===Static){Ne(sa);return}const kt=()=>{y(bn),$n&&!$n.persisted&&$n.afterLeave&&$n.afterLeave()};if(sa.shapeFlag&1&&$n&&!$n.persisted){const{leave:At,delayLeave:Dn}=$n,Qn=()=>At(bn,kt);Dn?Dn(sa.el,kt,Qn):Qn()}else kt()},da=(sa,Hn)=>{let bn;for(;sa!==Hn;)bn=oe(sa),y(sa),sa=bn;y(Hn)},ua=(sa,Hn,bn)=>{const{bum:Xn,scope:$n,update:kt,subTree:At,um:Dn}=sa;Xn&&invokeArrayFns(Xn),$n.stop(),kt&&(kt.active=!1,Mn(At,sa,Hn,bn)),Dn&&queuePostRenderEffect(Dn,Hn),queuePostRenderEffect(()=>{sa.isUnmounted=!0},Hn),Hn&&Hn.pendingBranch&&!Hn.isUnmounted&&sa.asyncDep&&!sa.asyncResolved&&sa.suspenseId===Hn.pendingId&&(Hn.deps--,Hn.deps===0&&Hn.resolve())},aa=(sa,Hn,bn,Xn=!1,$n=!1,kt=0)=>{for(let At=kt;At<sa.length;At++)Mn(sa[At],Hn,bn,Xn,$n)},Nn=sa=>sa.shapeFlag&6?Nn(sa.component.subTree):sa.shapeFlag&128?sa.suspense.next():oe(sa.anchor||sa.el),En=(sa,Hn,bn)=>{sa==null?Hn._vnode&&Mn(Hn._vnode,null,null,!0):le(Hn._vnode||null,sa,Hn,null,null,null,bn),flushPreFlushCbs(),flushPostFlushCbs(),Hn._vnode=sa},Zn={p:le,um:Mn,m:In,r:ra,mt:jt,mc:ze,pc:Ln,pbc:Pt,n:Nn,o:e};let ha,xa;return n&&([ha,xa]=n(Zn)),{render:En,hydrate:ha,createApp:createAppAPI(En,ha)}}function toggleRecurse({effect:e,update:n},r){e.allowRecurse=n.allowRecurse=r}function traverseStaticChildren(e,n,r=!1){const g=e.children,y=n.children;if(isArray$3(g)&&isArray$3(y))for(let k=0;k<g.length;k++){const $=g[k];let V=y[k];V.shapeFlag&1&&!V.dynamicChildren&&((V.patchFlag<=0||V.patchFlag===32)&&(V=y[k]=cloneIfMounted(y[k]),V.el=$.el),r||traverseStaticChildren($,V)),V.type===Text$2&&(V.el=$.el)}}function getSequence(e){const n=e.slice(),r=[0];let g,y,k,$,V;const L=e.length;for(g=0;g<L;g++){const z=e[g];if(z!==0){if(y=r[r.length-1],e[y]<z){n[g]=y,r.push(g);continue}for(k=0,$=r.length-1;k<$;)V=k+$>>1,e[r[V]]<z?k=V+1:$=V;z<e[r[k]]&&(k>0&&(n[g]=r[k-1]),r[k]=g)}}for(k=r.length,$=r[k-1];k-- >0;)r[k]=$,$=n[$];return r}const isTeleport=e=>e.__isTeleport,isTeleportDisabled=e=>e&&(e.disabled||e.disabled===""),isTargetSVG=e=>typeof SVGElement<"u"&&e instanceof SVGElement,resolveTarget=(e,n)=>{const r=e&&e.to;return isString$3(r)?n?n(r):null:r},TeleportImpl={__isTeleport:!0,process(e,n,r,g,y,k,$,V,L,z){const{mc:j,pc:ae,pbc:oe,o:{insert:re,querySelector:ue,createText:le,createComment:de}}=z,he=isTeleportDisabled(n.props);let{shapeFlag:_e,children:xe,dynamicChildren:Ne}=n;if(e==null){const $e=n.el=le(""),Ce=n.anchor=le("");re($e,r,g),re(Ce,r,g);const Ie=n.target=resolveTarget(n.props,ue),ze=n.targetAnchor=le("");Ie&&(re(ze,Ie),$=$||isTargetSVG(Ie));const Ue=(Pt,hn)=>{_e&16&&j(xe,Pt,hn,y,k,$,V,L)};he?Ue(r,Ce):Ie&&Ue(Ie,ze)}else{n.el=e.el;const $e=n.anchor=e.anchor,Ce=n.target=e.target,Ie=n.targetAnchor=e.targetAnchor,ze=isTeleportDisabled(e.props),Ue=ze?r:Ce,Pt=ze?$e:Ie;if($=$||isTargetSVG(Ce),Ne?(oe(e.dynamicChildren,Ne,Ue,y,k,$,V),traverseStaticChildren(e,n,!0)):L||ae(e,n,Ue,Pt,y,k,$,V,!1),he)ze||moveTeleport(n,r,$e,z,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const hn=n.target=resolveTarget(n.props,ue);hn&&moveTeleport(n,hn,null,z,0)}else ze&&moveTeleport(n,Ce,Ie,z,1)}updateCssVars(n)},remove(e,n,r,g,{um:y,o:{remove:k}},$){const{shapeFlag:V,children:L,anchor:z,targetAnchor:j,target:ae,props:oe}=e;if(ae&&k(j),($||!isTeleportDisabled(oe))&&(k(z),V&16))for(let re=0;re<L.length;re++){const ue=L[re];y(ue,n,r,!0,!!ue.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(e,n,r,{o:{insert:g},m:y},k=2){k===0&&g(e.targetAnchor,n,r);const{el:$,anchor:V,shapeFlag:L,children:z,props:j}=e,ae=k===2;if(ae&&g($,n,r),(!ae||isTeleportDisabled(j))&&L&16)for(let oe=0;oe<z.length;oe++)y(z[oe],n,r,2);ae&&g(V,n,r)}function hydrateTeleport(e,n,r,g,y,k,{o:{nextSibling:$,parentNode:V,querySelector:L}},z){const j=n.target=resolveTarget(n.props,L);if(j){const ae=j._lpa||j.firstChild;if(n.shapeFlag&16)if(isTeleportDisabled(n.props))n.anchor=z($(e),n,V(e),r,g,y,k),n.targetAnchor=ae;else{n.anchor=$(e);let oe=ae;for(;oe;)if(oe=$(oe),oe&&oe.nodeType===8&&oe.data==="teleport anchor"){n.targetAnchor=oe,j._lpa=n.targetAnchor&&$(n.targetAnchor);break}z(ae,n,j,r,g,y,k)}updateCssVars(n)}return n.anchor&&$(n.anchor)}const Teleport=TeleportImpl;function updateCssVars(e){const n=e.ctx;if(n&&n.ut){let r=e.children[0].el;for(;r!==e.targetAnchor;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}const Fragment=Symbol.for("v-fgt"),Text$2=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,n,r,g,y,k){return setupBlock(createBaseVNode(e,n,r,g,y,k,!0))}function createBlock(e,n,r,g,y){return setupBlock(createVNode(e,n,r,g,y,!0))}function isVNode$1(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,n){return e.type===n.type&&e.key===n.key}const InternalObjectKey="__vInternal",normalizeKey=({key:e})=>e??null,normalizeRef=({ref:e,ref_key:n,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?isString$3(e)||isRef(e)||isFunction$3(e)?{i:currentRenderingInstance,r:e,k:n,f:!!r}:e:null);function createBaseVNode(e,n=null,r=null,g=0,y=null,k=e===Fragment?0:1,$=!1,V=!1){const L={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&normalizeKey(n),ref:n&&normalizeRef(n),scopeId:currentScopeId,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:k,patchFlag:g,dynamicProps:y,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return V?(normalizeChildren(L,r),k&128&&e.normalize(L)):r&&(L.shapeFlag|=isString$3(r)?8:16),isBlockTreeEnabled>0&&!$&&currentBlock&&(L.patchFlag>0||k&6)&&L.patchFlag!==32&&currentBlock.push(L),L}const createVNode=_createVNode;function _createVNode(e,n=null,r=null,g=0,y=null,k=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode$1(e)){const V=cloneVNode(e,n,!0);return r&&normalizeChildren(V,r),isBlockTreeEnabled>0&&!k&&currentBlock&&(V.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=V:currentBlock.push(V)),V.patchFlag|=-2,V}if(isClassComponent(e)&&(e=e.__vccOpts),n){n=guardReactiveProps(n);let{class:V,style:L}=n;V&&!isString$3(V)&&(n.class=normalizeClass(V)),isObject$3(L)&&(isProxy(L)&&!isArray$3(L)&&(L=extend({},L)),n.style=normalizeStyle(L))}const $=isString$3(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject$3(e)?4:isFunction$3(e)?2:0;return createBaseVNode(e,n,r,g,y,$,k,!0)}function guardReactiveProps(e){return e?isProxy(e)||InternalObjectKey in e?extend({},e):e:null}function cloneVNode(e,n,r=!1){const{props:g,ref:y,patchFlag:k,children:$}=e,V=n?mergeProps(g||{},n):g;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:V,key:V&&normalizeKey(V),ref:n&&n.ref?r&&y?isArray$3(y)?y.concat(normalizeRef(n)):[y,normalizeRef(n)]:normalizeRef(n):y,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:$,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==Fragment?k===-1?16:k|16:k,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function createTextVNode(e=" ",n=0){return createVNode(Text$2,null,e,n)}function createCommentVNode(e="",n=!1){return n?(openBlock(),createBlock(Comment,null,e)):createVNode(Comment,null,e)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray$3(e)?createVNode(Fragment,null,e.slice()):typeof e=="object"?cloneIfMounted(e):createVNode(Text$2,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,n){let r=0;const{shapeFlag:g}=e;if(n==null)n=null;else if(isArray$3(n))r=16;else if(typeof n=="object")if(g&65){const y=n.default;y&&(y._c&&(y._d=!1),normalizeChildren(e,y()),y._c&&(y._d=!0));return}else{r=32;const y=n._;!y&&!(InternalObjectKey in n)?n._ctx=currentRenderingInstance:y===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else isFunction$3(n)?(n={default:n,_ctx:currentRenderingInstance},r=32):(n=String(n),g&64?(r=16,n=[createTextVNode(n)]):r=8);e.children=n,e.shapeFlag|=r}function mergeProps(...e){const n={};for(let r=0;r<e.length;r++){const g=e[r];for(const y in g)if(y==="class")n.class!==g.class&&(n.class=normalizeClass([n.class,g.class]));else if(y==="style")n.style=normalizeStyle([n.style,g.style]);else if(isOn(y)){const k=n[y],$=g[y];$&&k!==$&&!(isArray$3(k)&&k.includes($))&&(n[y]=k?[].concat(k,$):$)}else y!==""&&(n[y]=g[y])}return n}function invokeVNodeHook(e,n,r,g=null){callWithAsyncErrorHandling(e,n,7,[r,g])}const emptyAppContext=createAppContext();let uid$2=0;function createComponentInstance(e,n,r){const g=e.type,y=(n?n.appContext:e.appContext)||emptyAppContext,k={uid:uid$2++,vnode:e,type:g,parent:n,appContext:y,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(y.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(g,y),emitsOptions:normalizeEmitsOptions(g,y),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:g.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return k.ctx={_:k},k.root=n?n.root:k,k.emit=emit$1.bind(null,k),e.ce&&e.ce(k),k}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis$1()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis$1()[settersKey]=[]),globalCurrentInstanceSetters.push(e=>currentInstance=e),internalSetCurrentInstance=e=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(n=>n(e)):globalCurrentInstanceSetters[0](e)};const setCurrentInstance=e=>{internalSetCurrentInstance(e),e.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,n=!1){isInSSRComponentSetup=n;const{props:r,children:g}=e.vnode,y=isStatefulComponent(e);initProps(e,r,y,n),initSlots(e,g);const k=y?setupStatefulComponent(e,n):void 0;return isInSSRComponentSetup=!1,k}function setupStatefulComponent(e,n){const r=e.type;e.accessCache=Object.create(null),e.proxy=markRaw(new Proxy(e.ctx,PublicInstanceProxyHandlers));const{setup:g}=r;if(g){const y=e.setupContext=g.length>1?createSetupContext(e):null;setCurrentInstance(e),pauseTracking();const k=callWithErrorHandling(g,e,0,[e.props,y]);if(resetTracking(),unsetCurrentInstance(),isPromise(k)){if(k.then(unsetCurrentInstance,unsetCurrentInstance),n)return k.then($=>{handleSetupResult(e,$,n)}).catch($=>{handleError($,e,0)});e.asyncDep=k}else handleSetupResult(e,k,n)}else finishComponentSetup(e,n)}function handleSetupResult(e,n,r){isFunction$3(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:isObject$3(n)&&(e.setupState=proxyRefs(n)),finishComponentSetup(e,r)}let compile$1;function finishComponentSetup(e,n,r){const g=e.type;if(!e.render){if(!n&&compile$1&&!g.render){const y=g.template||resolveMergedOptions(e).template;if(y){const{isCustomElement:k,compilerOptions:$}=e.appContext.config,{delimiters:V,compilerOptions:L}=g,z=extend(extend({isCustomElement:k,delimiters:V},$),L);g.render=compile$1(y,z)}}e.render=g.render||NOOP}setCurrentInstance(e),pauseTracking(),applyOptions(e),resetTracking(),unsetCurrentInstance()}function getAttrsProxy(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(n,r){return track(e,"get","$attrs"),n[r]}}))}function createSetupContext(e){const n=r=>{e.exposed=r||{}};return{get attrs(){return getAttrsProxy(e)},slots:e.slots,emit:e.emit,expose:n}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(n,r){if(r in n)return n[r];if(r in publicPropertiesMap)return publicPropertiesMap[r](e)},has(n,r){return r in n||r in publicPropertiesMap}}))}function getComponentName(e,n=!0){return isFunction$3(e)?e.displayName||e.name:e.name||n&&e.__name}function isClassComponent(e){return isFunction$3(e)&&"__vccOpts"in e}const computed=(e,n)=>computed$1(e,n,isInSSRComponentSetup);function h$1(e,n,r){const g=arguments.length;return g===2?isObject$3(n)&&!isArray$3(n)?isVNode$1(n)?createVNode(e,null,[n]):createVNode(e,n):createVNode(e,null,n):(g>3?r=Array.prototype.slice.call(arguments,2):g===3&&isVNode$1(r)&&(r=[r]),createVNode(e,n,r))}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),version$1="3.3.4",svgNS="http://www.w3.org/2000/svg",doc$1=typeof document<"u"?document:null,templateContainer=doc$1&&doc$1.createElement("template"),nodeOps={insert:(e,n,r)=>{n.insertBefore(e,r||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,r,g)=>{const y=n?doc$1.createElementNS(svgNS,e):doc$1.createElement(e,r?{is:r}:void 0);return e==="select"&&g&&g.multiple!=null&&y.setAttribute("multiple",g.multiple),y},createText:e=>doc$1.createTextNode(e),createComment:e=>doc$1.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc$1.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,r,g,y,k){const $=r?r.previousSibling:n.lastChild;if(y&&(y===k||y.nextSibling))for(;n.insertBefore(y.cloneNode(!0),r),!(y===k||!(y=y.nextSibling)););else{templateContainer.innerHTML=g?`<svg>${e}</svg>`:e;const V=templateContainer.content;if(g){const L=V.firstChild;for(;L.firstChild;)V.appendChild(L.firstChild);V.removeChild(L)}n.insertBefore(V,r)}return[$?$.nextSibling:n.firstChild,r?r.previousSibling:n.lastChild]}};function patchClass(e,n,r){const g=e._vtc;g&&(n=(n?[n,...g]:[...g]).join(" ")),n==null?e.removeAttribute("class"):r?e.setAttribute("class",n):e.className=n}function patchStyle(e,n,r){const g=e.style,y=isString$3(r);if(r&&!y){if(n&&!isString$3(n))for(const k in n)r[k]==null&&setStyle(g,k,"");for(const k in r)setStyle(g,k,r[k])}else{const k=g.display;y?n!==r&&(g.cssText=r):n&&e.removeAttribute("style"),"_vod"in e&&(g.display=k)}}const importantRE=/\s*!important$/;function setStyle(e,n,r){if(isArray$3(r))r.forEach(g=>setStyle(e,n,g));else if(r==null&&(r=""),n.startsWith("--"))e.setProperty(n,r);else{const g=autoPrefix(e,n);importantRE.test(r)?e.setProperty(hyphenate(g),r.replace(importantRE,""),"important"):e[g]=r}}const prefixes$1=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,n){const r=prefixCache[n];if(r)return r;let g=camelize(n);if(g!=="filter"&&g in e)return prefixCache[n]=g;g=capitalize$2(g);for(let y=0;y<prefixes$1.length;y++){const k=prefixes$1[y]+g;if(k in e)return prefixCache[n]=k}return n}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,n,r,g,y){if(g&&n.startsWith("xlink:"))r==null?e.removeAttributeNS(xlinkNS,n.slice(6,n.length)):e.setAttributeNS(xlinkNS,n,r);else{const k=isSpecialBooleanAttr(n);r==null||k&&!includeBooleanAttr(r)?e.removeAttribute(n):e.setAttribute(n,k?"":r)}}function patchDOMProp(e,n,r,g,y,k,$){if(n==="innerHTML"||n==="textContent"){g&&$(g,y,k),e[n]=r??"";return}const V=e.tagName;if(n==="value"&&V!=="PROGRESS"&&!V.includes("-")){e._value=r;const z=V==="OPTION"?e.getAttribute("value"):e.value,j=r??"";z!==j&&(e.value=j),r==null&&e.removeAttribute(n);return}let L=!1;if(r===""||r==null){const z=typeof e[n];z==="boolean"?r=includeBooleanAttr(r):r==null&&z==="string"?(r="",L=!0):z==="number"&&(r=0,L=!0)}try{e[n]=r}catch{}L&&e.removeAttribute(n)}function addEventListener(e,n,r,g){e.addEventListener(n,r,g)}function removeEventListener(e,n,r,g){e.removeEventListener(n,r,g)}function patchEvent(e,n,r,g,y=null){const k=e._vei||(e._vei={}),$=k[n];if(g&&$)$.value=g;else{const[V,L]=parseName(n);if(g){const z=k[n]=createInvoker(g,y);addEventListener(e,V,z,L)}else $&&(removeEventListener(e,V,$,L),k[n]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let n;if(optionsModifierRE.test(e)){n={};let g;for(;g=e.match(optionsModifierRE);)e=e.slice(0,e.length-g[0].length),n[g[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),n]}let cachedNow=0;const p$2=Promise.resolve(),getNow=()=>cachedNow||(p$2.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,n){const r=g=>{if(!g._vts)g._vts=Date.now();else if(g._vts<=r.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(g,r.value),n,5,[g])};return r.value=e,r.attached=getNow(),r}function patchStopImmediatePropagation(e,n){if(isArray$3(n)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},n.map(g=>y=>!y._stopped&&g&&g(y))}else return n}const nativeOnRE=/^on[a-z]/,patchProp=(e,n,r,g,y=!1,k,$,V,L)=>{n==="class"?patchClass(e,g,y):n==="style"?patchStyle(e,r,g):isOn(n)?isModelListener(n)||patchEvent(e,n,r,g,$):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):shouldSetAsProp(e,n,g,y))?patchDOMProp(e,n,g,k,$,V,L):(n==="true-value"?e._trueValue=g:n==="false-value"&&(e._falseValue=g),patchAttr(e,n,g,y))};function shouldSetAsProp(e,n,r,g){return g?!!(n==="innerHTML"||n==="textContent"||n in e&&nativeOnRE.test(n)&&isFunction$3(r)):n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA"||nativeOnRE.test(n)&&isString$3(r)?!1:n in e}const TRANSITION="transition",ANIMATION="animation",Transition=(e,{slots:n})=>h$1(BaseTransition,resolveTransitionProps(e),n);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),callHook=(e,n=[])=>{isArray$3(e)?e.forEach(r=>r(...n)):e&&e(...n)},hasExplicitCallback=e=>e?isArray$3(e)?e.some(n=>n.length>1):e.length>1:!1;function resolveTransitionProps(e){const n={};for(const Dt in e)Dt in DOMTransitionPropsValidators||(n[Dt]=e[Dt]);if(e.css===!1)return n;const{name:r="v",type:g,duration:y,enterFromClass:k=`${r}-enter-from`,enterActiveClass:$=`${r}-enter-active`,enterToClass:V=`${r}-enter-to`,appearFromClass:L=k,appearActiveClass:z=$,appearToClass:j=V,leaveFromClass:ae=`${r}-leave-from`,leaveActiveClass:oe=`${r}-leave-active`,leaveToClass:re=`${r}-leave-to`}=e,ue=normalizeDuration(y),le=ue&&ue[0],de=ue&&ue[1],{onBeforeEnter:he,onEnter:_e,onEnterCancelled:xe,onLeave:Ne,onLeaveCancelled:$e,onBeforeAppear:Ce=he,onAppear:Ie=_e,onAppearCancelled:ze=xe}=n,Ue=(Dt,xn,jt)=>{removeTransitionClass(Dt,xn?j:V),removeTransitionClass(Dt,xn?z:$),jt&&jt()},Pt=(Dt,xn)=>{Dt._isLeaving=!1,removeTransitionClass(Dt,ae),removeTransitionClass(Dt,re),removeTransitionClass(Dt,oe),xn&&xn()},hn=Dt=>(xn,jt)=>{const Vn=Dt?Ie:_e,Rn=()=>Ue(xn,Dt,jt);callHook(Vn,[xn,Rn]),nextFrame(()=>{removeTransitionClass(xn,Dt?L:k),addTransitionClass(xn,Dt?j:V),hasExplicitCallback(Vn)||whenTransitionEnds(xn,g,le,Rn)})};return extend(n,{onBeforeEnter(Dt){callHook(he,[Dt]),addTransitionClass(Dt,k),addTransitionClass(Dt,$)},onBeforeAppear(Dt){callHook(Ce,[Dt]),addTransitionClass(Dt,L),addTransitionClass(Dt,z)},onEnter:hn(!1),onAppear:hn(!0),onLeave(Dt,xn){Dt._isLeaving=!0;const jt=()=>Pt(Dt,xn);addTransitionClass(Dt,ae),forceReflow(),addTransitionClass(Dt,oe),nextFrame(()=>{Dt._isLeaving&&(removeTransitionClass(Dt,ae),addTransitionClass(Dt,re),hasExplicitCallback(Ne)||whenTransitionEnds(Dt,g,de,jt))}),callHook(Ne,[Dt,jt])},onEnterCancelled(Dt){Ue(Dt,!1),callHook(xe,[Dt])},onAppearCancelled(Dt){Ue(Dt,!0),callHook(ze,[Dt])},onLeaveCancelled(Dt){Pt(Dt),callHook($e,[Dt])}})}function normalizeDuration(e){if(e==null)return null;if(isObject$3(e))return[NumberOf(e.enter),NumberOf(e.leave)];{const n=NumberOf(e);return[n,n]}}function NumberOf(e){return toNumber$1(e)}function addTransitionClass(e,n){n.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e._vtc||(e._vtc=new Set)).add(n)}function removeTransitionClass(e,n){n.split(/\s+/).forEach(g=>g&&e.classList.remove(g));const{_vtc:r}=e;r&&(r.delete(n),r.size||(e._vtc=void 0))}function nextFrame(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let endId=0;function whenTransitionEnds(e,n,r,g){const y=e._endId=++endId,k=()=>{y===e._endId&&g()};if(r)return setTimeout(k,r);const{type:$,timeout:V,propCount:L}=getTransitionInfo(e,n);if(!$)return g();const z=$+"end";let j=0;const ae=()=>{e.removeEventListener(z,oe),k()},oe=re=>{re.target===e&&++j>=L&&ae()};setTimeout(()=>{j<L&&ae()},V+1),e.addEventListener(z,oe)}function getTransitionInfo(e,n){const r=window.getComputedStyle(e),g=ue=>(r[ue]||"").split(", "),y=g(`${TRANSITION}Delay`),k=g(`${TRANSITION}Duration`),$=getTimeout(y,k),V=g(`${ANIMATION}Delay`),L=g(`${ANIMATION}Duration`),z=getTimeout(V,L);let j=null,ae=0,oe=0;n===TRANSITION?$>0&&(j=TRANSITION,ae=$,oe=k.length):n===ANIMATION?z>0&&(j=ANIMATION,ae=z,oe=L.length):(ae=Math.max($,z),j=ae>0?$>z?TRANSITION:ANIMATION:null,oe=j?j===TRANSITION?k.length:L.length:0);const re=j===TRANSITION&&/\b(transform|all)(,|$)/.test(g(`${TRANSITION}Property`).toString());return{type:j,timeout:ae,propCount:oe,hasTransform:re}}function getTimeout(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max(...n.map((r,g)=>toMs(r)+toMs(e[g])))}function toMs(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const positionMap=new WeakMap,newPositionMap=new WeakMap,TransitionGroupImpl={name:"TransitionGroup",props:extend({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(e,{slots:n}){const r=getCurrentInstance(),g=useTransitionState();let y,k;return onUpdated(()=>{if(!y.length)return;const $=e.moveClass||`${e.name||"v"}-move`;if(!hasCSSTransform(y[0].el,r.vnode.el,$))return;y.forEach(callPendingCbs),y.forEach(recordPosition);const V=y.filter(applyTranslation);forceReflow(),V.forEach(L=>{const z=L.el,j=z.style;addTransitionClass(z,$),j.transform=j.webkitTransform=j.transitionDuration="";const ae=z._moveCb=oe=>{oe&&oe.target!==z||(!oe||/transform$/.test(oe.propertyName))&&(z.removeEventListener("transitionend",ae),z._moveCb=null,removeTransitionClass(z,$))};z.addEventListener("transitionend",ae)})}),()=>{const $=toRaw(e),V=resolveTransitionProps($);let L=$.tag||Fragment;y=k,k=n.default?getTransitionRawChildren(n.default()):[];for(let z=0;z<k.length;z++){const j=k[z];j.key!=null&&setTransitionHooks(j,resolveTransitionHooks(j,V,g,r))}if(y)for(let z=0;z<y.length;z++){const j=y[z];setTransitionHooks(j,resolveTransitionHooks(j,V,g,r)),positionMap.set(j,j.el.getBoundingClientRect())}return createVNode(L,null,k)}}},removeMode=e=>delete e.mode;TransitionGroupImpl.props;const TransitionGroup=TransitionGroupImpl;function callPendingCbs(e){const n=e.el;n._moveCb&&n._moveCb(),n._enterCb&&n._enterCb()}function recordPosition(e){newPositionMap.set(e,e.el.getBoundingClientRect())}function applyTranslation(e){const n=positionMap.get(e),r=newPositionMap.get(e),g=n.left-r.left,y=n.top-r.top;if(g||y){const k=e.el.style;return k.transform=k.webkitTransform=`translate(${g}px,${y}px)`,k.transitionDuration="0s",e}}function hasCSSTransform(e,n,r){const g=e.cloneNode();e._vtc&&e._vtc.forEach($=>{$.split(/\s+/).forEach(V=>V&&g.classList.remove(V))}),r.split(/\s+/).forEach($=>$&&g.classList.add($)),g.style.display="none";const y=n.nodeType===1?n:n.parentNode;y.appendChild(g);const{hasTransform:k}=getTransitionInfo(g);return y.removeChild(g),k}const getModelAssigner=e=>{const n=e.props["onUpdate:modelValue"]||!1;return isArray$3(n)?r=>invokeArrayFns(n,r):n};function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const vModelText={created(e,{modifiers:{lazy:n,trim:r,number:g}},y){e._assign=getModelAssigner(y);const k=g||y.props&&y.props.type==="number";addEventListener(e,n?"change":"input",$=>{if($.target.composing)return;let V=e.value;r&&(V=V.trim()),k&&(V=looseToNumber(V)),e._assign(V)}),r&&addEventListener(e,"change",()=>{e.value=e.value.trim()}),n||(addEventListener(e,"compositionstart",onCompositionStart),addEventListener(e,"compositionend",onCompositionEnd),addEventListener(e,"change",onCompositionEnd))},mounted(e,{value:n}){e.value=n??""},beforeUpdate(e,{value:n,modifiers:{lazy:r,trim:g,number:y}},k){if(e._assign=getModelAssigner(k),e.composing||document.activeElement===e&&e.type!=="range"&&(r||g&&e.value.trim()===n||(y||e.type==="number")&&looseToNumber(e.value)===n))return;const $=n??"";e.value!==$&&(e.value=$)}},vModelCheckbox={deep:!0,created(e,n,r){e._assign=getModelAssigner(r),addEventListener(e,"change",()=>{const g=e._modelValue,y=getValue$2(e),k=e.checked,$=e._assign;if(isArray$3(g)){const V=looseIndexOf(g,y),L=V!==-1;if(k&&!L)$(g.concat(y));else if(!k&&L){const z=[...g];z.splice(V,1),$(z)}}else if(isSet$1(g)){const V=new Set(g);k?V.add(y):V.delete(y),$(V)}else $(getCheckboxValue(e,k))})},mounted:setChecked,beforeUpdate(e,n,r){e._assign=getModelAssigner(r),setChecked(e,n,r)}};function setChecked(e,{value:n,oldValue:r},g){e._modelValue=n,isArray$3(n)?e.checked=looseIndexOf(n,g.props.value)>-1:isSet$1(n)?e.checked=n.has(g.props.value):n!==r&&(e.checked=looseEqual(n,getCheckboxValue(e,!0)))}const vModelRadio={created(e,{value:n},r){e.checked=looseEqual(n,r.props.value),e._assign=getModelAssigner(r),addEventListener(e,"change",()=>{e._assign(getValue$2(e))})},beforeUpdate(e,{value:n,oldValue:r},g){e._assign=getModelAssigner(g),n!==r&&(e.checked=looseEqual(n,g.props.value))}};function getValue$2(e){return"_value"in e?e._value:e.value}function getCheckboxValue(e,n){const r=n?"_trueValue":"_falseValue";return r in e?e[r]:n}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>systemModifiers.some(r=>e[`${r}Key`]&&!n.includes(r))},withModifiers=(e,n)=>(r,...g)=>{for(let y=0;y<n.length;y++){const k=modifierGuards[n[y]];if(k&&k(r,n))return}return e(r,...g)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(e,n)=>r=>{if(!("key"in r))return;const g=hyphenate(r.key);if(n.some(y=>y===g||keyNames[y]===g))return e(r)},vShow={beforeMount(e,{value:n},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&n?r.beforeEnter(e):setDisplay(e,n)},mounted(e,{value:n},{transition:r}){r&&n&&r.enter(e)},updated(e,{value:n,oldValue:r},{transition:g}){!n!=!r&&(g?n?(g.beforeEnter(e),setDisplay(e,!0),g.enter(e)):g.leave(e,()=>{setDisplay(e,!1)}):setDisplay(e,n))},beforeUnmount(e,{value:n}){setDisplay(e,n)}};function setDisplay(e,n){e.style.display=n?e._vod:"none"}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const render$2=(...e)=>{ensureRenderer().render(...e)},createApp=(...e)=>{const n=ensureRenderer().createApp(...e),{mount:r}=n;return n.mount=g=>{const y=normalizeContainer(g);if(!y)return;const k=n._component;!isFunction$3(k)&&!k.render&&!k.template&&(k.template=y.innerHTML),y.innerHTML="";const $=r(y,!1,y instanceof SVGElement);return y instanceof Element&&(y.removeAttribute("v-cloak"),y.setAttribute("data-v-app","")),$},n};function normalizeContainer(e){return isString$3(e)?document.querySelector(e):e}/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const assign$2=Object.assign;function applyToParams(e,n){const r={};for(const g in n){const y=n[g];r[g]=isArray$2(y)?y.map(e):e(y)}return r}const noop$5=()=>{},isArray$2=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=e=>e.replace(TRAILING_SLASH_RE,"");function parseURL(e,n,r="/"){let g,y={},k="",$="";const V=n.indexOf("#");let L=n.indexOf("?");return V<L&&V>=0&&(L=-1),L>-1&&(g=n.slice(0,L),k=n.slice(L+1,V>-1?V:n.length),y=e(k)),V>-1&&(g=g||n.slice(0,V),$=n.slice(V,n.length)),g=resolveRelativePath(g??n,r),{fullPath:g+(k&&"?")+k+$,path:g,query:y,hash:$}}function stringifyURL(e,n){const r=n.query?e(n.query):"";return n.path+(r&&"?")+r+(n.hash||"")}function stripBase(e,n){return!n||!e.toLowerCase().startsWith(n.toLowerCase())?e:e.slice(n.length)||"/"}function isSameRouteLocation(e,n,r){const g=n.matched.length-1,y=r.matched.length-1;return g>-1&&g===y&&isSameRouteRecord(n.matched[g],r.matched[y])&&isSameRouteLocationParams(n.params,r.params)&&e(n.query)===e(r.query)&&n.hash===r.hash}function isSameRouteRecord(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function isSameRouteLocationParams(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(!isSameRouteLocationParamsValue(e[r],n[r]))return!1;return!0}function isSameRouteLocationParamsValue(e,n){return isArray$2(e)?isEquivalentArray(e,n):isArray$2(n)?isEquivalentArray(n,e):e===n}function isEquivalentArray(e,n){return isArray$2(n)?e.length===n.length&&e.every((r,g)=>r===n[g]):e.length===1&&e[0]===n}function resolveRelativePath(e,n){if(e.startsWith("/"))return e;if(!e)return n;const r=n.split("/"),g=e.split("/"),y=g[g.length-1];(y===".."||y===".")&&g.push("");let k=r.length-1,$,V;for($=0;$<g.length;$++)if(V=g[$],V!==".")if(V==="..")k>1&&k--;else break;return r.slice(0,k).join("/")+"/"+g.slice($-($===g.length?1:0)).join("/")}var NavigationType;(function(e){e.pop="pop",e.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(e){e.back="back",e.forward="forward",e.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(e){if(!e)if(isBrowser){const n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),removeTrailingSlash(e)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(e,n){return e.replace(BEFORE_HASH_RE,"#")+n}function getElementPosition(e,n){const r=document.documentElement.getBoundingClientRect(),g=e.getBoundingClientRect();return{behavior:n.behavior,left:g.left-r.left-(n.left||0),top:g.top-r.top-(n.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(e){let n;if("el"in e){const r=e.el,g=typeof r=="string"&&r.startsWith("#"),y=typeof r=="string"?g?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!y)return;n=getElementPosition(y,e)}else n=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.pageXOffset,n.top!=null?n.top:window.pageYOffset)}function getScrollKey(e,n){return(history.state?history.state.position-n:-1)+e}const scrollPositions=new Map;function saveScrollPosition(e,n){scrollPositions.set(e,n)}function getSavedScrollPosition(e){const n=scrollPositions.get(e);return scrollPositions.delete(e),n}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(e,n){const{pathname:r,search:g,hash:y}=n,k=e.indexOf("#");if(k>-1){let V=y.includes(e.slice(k))?e.slice(k).length:1,L=y.slice(V);return L[0]!=="/"&&(L="/"+L),stripBase(L,"")}return stripBase(r,e)+g+y}function useHistoryListeners(e,n,r,g){let y=[],k=[],$=null;const V=({state:oe})=>{const re=createCurrentLocation(e,location),ue=r.value,le=n.value;let de=0;if(oe){if(r.value=re,n.value=oe,$&&$===ue){$=null;return}de=le?oe.position-le.position:0}else g(re);y.forEach(he=>{he(r.value,ue,{delta:de,type:NavigationType.pop,direction:de?de>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function L(){$=r.value}function z(oe){y.push(oe);const re=()=>{const ue=y.indexOf(oe);ue>-1&&y.splice(ue,1)};return k.push(re),re}function j(){const{history:oe}=window;oe.state&&oe.replaceState(assign$2({},oe.state,{scroll:computeScrollPosition()}),"")}function ae(){for(const oe of k)oe();k=[],window.removeEventListener("popstate",V),window.removeEventListener("beforeunload",j)}return window.addEventListener("popstate",V),window.addEventListener("beforeunload",j,{passive:!0}),{pauseListeners:L,listen:z,destroy:ae}}function buildState(e,n,r,g=!1,y=!1){return{back:e,current:n,forward:r,replaced:g,position:window.history.length,scroll:y?computeScrollPosition():null}}function useHistoryStateNavigation(e){const{history:n,location:r}=window,g={value:createCurrentLocation(e,r)},y={value:n.state};y.value||k(g.value,{back:null,current:g.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function k(L,z,j){const ae=e.indexOf("#"),oe=ae>-1?(r.host&&document.querySelector("base")?e:e.slice(ae))+L:createBaseLocation()+e+L;try{n[j?"replaceState":"pushState"](z,"",oe),y.value=z}catch(re){console.error(re),r[j?"replace":"assign"](oe)}}function $(L,z){const j=assign$2({},n.state,buildState(y.value.back,L,y.value.forward,!0),z,{position:y.value.position});k(L,j,!0),g.value=L}function V(L,z){const j=assign$2({},y.value,n.state,{forward:L,scroll:computeScrollPosition()});k(j.current,j,!0);const ae=assign$2({},buildState(g.value,L,null),{position:j.position+1},z);k(L,ae,!1),g.value=L}return{location:g,state:y,push:V,replace:$}}function createWebHistory(e){e=normalizeBase(e);const n=useHistoryStateNavigation(e),r=useHistoryListeners(e,n.state,n.location,n.replace);function g(k,$=!0){$||r.pauseListeners(),history.go(k)}const y=assign$2({location:"",base:e,go:g,createHref:createHref.bind(null,e)},n,r);return Object.defineProperty(y,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(y,"state",{enumerable:!0,get:()=>n.state.value}),y}function createWebHashHistory(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),createWebHistory(e)}function isRouteLocation(e){return typeof e=="string"||e&&typeof e=="object"}function isRouteName(e){return typeof e=="string"||typeof e=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(e,n){return assign$2(new Error,{type:e,[NavigationFailureSymbol]:!0},n)}function isNavigationFailure(e,n){return e instanceof Error&&NavigationFailureSymbol in e&&(n==null||!!(e.type&n))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(e,n){const r=assign$2({},BASE_PATH_PARSER_OPTIONS,n),g=[];let y=r.start?"^":"";const k=[];for(const z of e){const j=z.length?[]:[90];r.strict&&!z.length&&(y+="/");for(let ae=0;ae<z.length;ae++){const oe=z[ae];let re=40+(r.sensitive?.25:0);if(oe.type===0)ae||(y+="/"),y+=oe.value.replace(REGEX_CHARS_RE,"\\$&"),re+=40;else if(oe.type===1){const{value:ue,repeatable:le,optional:de,regexp:he}=oe;k.push({name:ue,repeatable:le,optional:de});const _e=he||BASE_PARAM_PATTERN;if(_e!==BASE_PARAM_PATTERN){re+=10;try{new RegExp(`(${_e})`)}catch(Ne){throw new Error(`Invalid custom RegExp for param "${ue}" (${_e}): `+Ne.message)}}let xe=le?`((?:${_e})(?:/(?:${_e}))*)`:`(${_e})`;ae||(xe=de&&z.length<2?`(?:/${xe})`:"/"+xe),de&&(xe+="?"),y+=xe,re+=20,de&&(re+=-8),le&&(re+=-20),_e===".*"&&(re+=-50)}j.push(re)}g.push(j)}if(r.strict&&r.end){const z=g.length-1;g[z][g[z].length-1]+=.7000000000000001}r.strict||(y+="/?"),r.end?y+="$":r.strict&&(y+="(?:/|$)");const $=new RegExp(y,r.sensitive?"":"i");function V(z){const j=z.match($),ae={};if(!j)return null;for(let oe=1;oe<j.length;oe++){const re=j[oe]||"",ue=k[oe-1];ae[ue.name]=re&&ue.repeatable?re.split("/"):re}return ae}function L(z){let j="",ae=!1;for(const oe of e){(!ae||!j.endsWith("/"))&&(j+="/"),ae=!1;for(const re of oe)if(re.type===0)j+=re.value;else if(re.type===1){const{value:ue,repeatable:le,optional:de}=re,he=ue in z?z[ue]:"";if(isArray$2(he)&&!le)throw new Error(`Provided param "${ue}" is an array but it is not repeatable (* or + modifiers)`);const _e=isArray$2(he)?he.join("/"):he;if(!_e)if(de)oe.length<2&&(j.endsWith("/")?j=j.slice(0,-1):ae=!0);else throw new Error(`Missing required param "${ue}"`);j+=_e}}return j||"/"}return{re:$,score:g,keys:k,parse:V,stringify:L}}function compareScoreArray(e,n){let r=0;for(;r<e.length&&r<n.length;){const g=n[r]-e[r];if(g)return g;r++}return e.length<n.length?e.length===1&&e[0]===80?-1:1:e.length>n.length?n.length===1&&n[0]===80?1:-1:0}function comparePathParserScore(e,n){let r=0;const g=e.score,y=n.score;for(;r<g.length&&r<y.length;){const k=compareScoreArray(g[r],y[r]);if(k)return k;r++}if(Math.abs(y.length-g.length)===1){if(isLastScoreNegative(g))return 1;if(isLastScoreNegative(y))return-1}return y.length-g.length}function isLastScoreNegative(e){const n=e[e.length-1];return e.length>0&&n[n.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(e){if(!e)return[[]];if(e==="/")return[[ROOT_TOKEN]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function n(re){throw new Error(`ERR (${r})/"${z}": ${re}`)}let r=0,g=r;const y=[];let k;function $(){k&&y.push(k),k=[]}let V=0,L,z="",j="";function ae(){z&&(r===0?k.push({type:0,value:z}):r===1||r===2||r===3?(k.length>1&&(L==="*"||L==="+")&&n(`A repeatable param (${z}) must be alone in its segment. eg: '/:ids+.`),k.push({type:1,value:z,regexp:j,repeatable:L==="*"||L==="+",optional:L==="*"||L==="?"})):n("Invalid state to consume buffer"),z="")}function oe(){z+=L}for(;V<e.length;){if(L=e[V++],L==="\\"&&r!==2){g=r,r=4;continue}switch(r){case 0:L==="/"?(z&&ae(),$()):L===":"?(ae(),r=1):oe();break;case 4:oe(),r=g;break;case 1:L==="("?r=2:VALID_PARAM_RE.test(L)?oe():(ae(),r=0,L!=="*"&&L!=="?"&&L!=="+"&&V--);break;case 2:L===")"?j[j.length-1]=="\\"?j=j.slice(0,-1)+L:r=3:j+=L;break;case 3:ae(),r=0,L!=="*"&&L!=="?"&&L!=="+"&&V--,j="";break;default:n("Unknown state");break}}return r===2&&n(`Unfinished custom RegExp for param "${z}"`),ae(),$(),y}function createRouteRecordMatcher(e,n,r){const g=tokensToParser(tokenizePath(e.path),r),y=assign$2(g,{record:e,parent:n,children:[],alias:[]});return n&&!y.record.aliasOf==!n.record.aliasOf&&n.children.push(y),y}function createRouterMatcher(e,n){const r=[],g=new Map;n=mergeOptions$1({strict:!1,end:!0,sensitive:!1},n);function y(j){return g.get(j)}function k(j,ae,oe){const re=!oe,ue=normalizeRouteRecord(j);ue.aliasOf=oe&&oe.record;const le=mergeOptions$1(n,j),de=[ue];if("alias"in j){const xe=typeof j.alias=="string"?[j.alias]:j.alias;for(const Ne of xe)de.push(assign$2({},ue,{components:oe?oe.record.components:ue.components,path:Ne,aliasOf:oe?oe.record:ue}))}let he,_e;for(const xe of de){const{path:Ne}=xe;if(ae&&Ne[0]!=="/"){const $e=ae.record.path,Ce=$e[$e.length-1]==="/"?"":"/";xe.path=ae.record.path+(Ne&&Ce+Ne)}if(he=createRouteRecordMatcher(xe,ae,le),oe?oe.alias.push(he):(_e=_e||he,_e!==he&&_e.alias.push(he),re&&j.name&&!isAliasRecord(he)&&$(j.name)),ue.children){const $e=ue.children;for(let Ce=0;Ce<$e.length;Ce++)k($e[Ce],he,oe&&oe.children[Ce])}oe=oe||he,(he.record.components&&Object.keys(he.record.components).length||he.record.name||he.record.redirect)&&L(he)}return _e?()=>{$(_e)}:noop$5}function $(j){if(isRouteName(j)){const ae=g.get(j);ae&&(g.delete(j),r.splice(r.indexOf(ae),1),ae.children.forEach($),ae.alias.forEach($))}else{const ae=r.indexOf(j);ae>-1&&(r.splice(ae,1),j.record.name&&g.delete(j.record.name),j.children.forEach($),j.alias.forEach($))}}function V(){return r}function L(j){let ae=0;for(;ae<r.length&&comparePathParserScore(j,r[ae])>=0&&(j.record.path!==r[ae].record.path||!isRecordChildOf(j,r[ae]));)ae++;r.splice(ae,0,j),j.record.name&&!isAliasRecord(j)&&g.set(j.record.name,j)}function z(j,ae){let oe,re={},ue,le;if("name"in j&&j.name){if(oe=g.get(j.name),!oe)throw createRouterError(1,{location:j});le=oe.record.name,re=assign$2(paramsFromLocation(ae.params,oe.keys.filter(_e=>!_e.optional).map(_e=>_e.name)),j.params&&paramsFromLocation(j.params,oe.keys.map(_e=>_e.name))),ue=oe.stringify(re)}else if("path"in j)ue=j.path,oe=r.find(_e=>_e.re.test(ue)),oe&&(re=oe.parse(ue),le=oe.record.name);else{if(oe=ae.name?g.get(ae.name):r.find(_e=>_e.re.test(ae.path)),!oe)throw createRouterError(1,{location:j,currentLocation:ae});le=oe.record.name,re=assign$2({},ae.params,j.params),ue=oe.stringify(re)}const de=[];let he=oe;for(;he;)de.unshift(he.record),he=he.parent;return{name:le,path:ue,params:re,matched:de,meta:mergeMetaFields(de)}}return e.forEach(j=>k(j)),{addRoute:k,resolve:z,removeRoute:$,getRoutes:V,getRecordMatcher:y}}function paramsFromLocation(e,n){const r={};for(const g of n)g in e&&(r[g]=e[g]);return r}function normalizeRouteRecord(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:normalizeRecordProps(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function normalizeRecordProps(e){const n={},r=e.props||!1;if("component"in e)n.default=r;else for(const g in e.components)n[g]=typeof r=="object"?r[g]:r;return n}function isAliasRecord(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function mergeMetaFields(e){return e.reduce((n,r)=>assign$2(n,r.meta),{})}function mergeOptions$1(e,n){const r={};for(const g in e)r[g]=g in n?n[g]:e[g];return r}function isRecordChildOf(e,n){return n.children.some(r=>r===e||isRecordChildOf(e,r))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(e){return encodeURI(""+e).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(e){return commonEncode(e).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(e){return commonEncode(e).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(e){return encodeQueryValue(e).replace(EQUAL_RE,"%3D")}function encodePath(e){return commonEncode(e).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(e){return e==null?"":encodePath(e).replace(SLASH_RE,"%2F")}function decode(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function parseQuery(e){const n={};if(e===""||e==="?")return n;const g=(e[0]==="?"?e.slice(1):e).split("&");for(let y=0;y<g.length;++y){const k=g[y].replace(PLUS_RE," "),$=k.indexOf("="),V=decode($<0?k:k.slice(0,$)),L=$<0?null:decode(k.slice($+1));if(V in n){let z=n[V];isArray$2(z)||(z=n[V]=[z]),z.push(L)}else n[V]=L}return n}function stringifyQuery(e){let n="";for(let r in e){const g=e[r];if(r=encodeQueryKey(r),g==null){g!==void 0&&(n+=(n.length?"&":"")+r);continue}(isArray$2(g)?g.map(k=>k&&encodeQueryValue(k)):[g&&encodeQueryValue(g)]).forEach(k=>{k!==void 0&&(n+=(n.length?"&":"")+r,k!=null&&(n+="="+k))})}return n}function normalizeQuery(e){const n={};for(const r in e){const g=e[r];g!==void 0&&(n[r]=isArray$2(g)?g.map(y=>y==null?null:""+y):g==null?g:""+g)}return n}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let e=[];function n(g){return e.push(g),()=>{const y=e.indexOf(g);y>-1&&e.splice(y,1)}}function r(){e=[]}return{add:n,list:()=>e.slice(),reset:r}}function registerGuard(e,n,r){const g=()=>{e[n].delete(r)};onUnmounted(g),onDeactivated(g),onActivated(()=>{e[n].add(r)}),e[n].add(r)}function onBeforeRouteLeave(e){const n=inject(matchedRouteKey,{}).value;n&&registerGuard(n,"leaveGuards",e)}function guardToPromiseFn(e,n,r,g,y){const k=g&&(g.enterCallbacks[y]=g.enterCallbacks[y]||[]);return()=>new Promise(($,V)=>{const L=ae=>{ae===!1?V(createRouterError(4,{from:r,to:n})):ae instanceof Error?V(ae):isRouteLocation(ae)?V(createRouterError(2,{from:n,to:ae})):(k&&g.enterCallbacks[y]===k&&typeof ae=="function"&&k.push(ae),$())},z=e.call(g&&g.instances[y],n,r,L);let j=Promise.resolve(z);e.length<3&&(j=j.then(L)),j.catch(ae=>V(ae))})}function extractComponentsGuards(e,n,r,g){const y=[];for(const k of e)for(const $ in k.components){let V=k.components[$];if(!(n!=="beforeRouteEnter"&&!k.instances[$]))if(isRouteComponent(V)){const z=(V.__vccOpts||V)[n];z&&y.push(guardToPromiseFn(z,r,g,k,$))}else{let L=V();y.push(()=>L.then(z=>{if(!z)return Promise.reject(new Error(`Couldn't resolve component "${$}" at "${k.path}"`));const j=isESModule(z)?z.default:z;k.components[$]=j;const oe=(j.__vccOpts||j)[n];return oe&&guardToPromiseFn(oe,r,g,k,$)()}))}}return y}function isRouteComponent(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function useLink(e){const n=inject(routerKey),r=inject(routeLocationKey),g=computed(()=>n.resolve(unref(e.to))),y=computed(()=>{const{matched:L}=g.value,{length:z}=L,j=L[z-1],ae=r.matched;if(!j||!ae.length)return-1;const oe=ae.findIndex(isSameRouteRecord.bind(null,j));if(oe>-1)return oe;const re=getOriginalPath(L[z-2]);return z>1&&getOriginalPath(j)===re&&ae[ae.length-1].path!==re?ae.findIndex(isSameRouteRecord.bind(null,L[z-2])):oe}),k=computed(()=>y.value>-1&&includesParams(r.params,g.value.params)),$=computed(()=>y.value>-1&&y.value===r.matched.length-1&&isSameRouteLocationParams(r.params,g.value.params));function V(L={}){return guardEvent(L)?n[unref(e.replace)?"replace":"push"](unref(e.to)).catch(noop$5):Promise.resolve()}return{route:g,href:computed(()=>g.value.href),isActive:k,isExactActive:$,navigate:V}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(e,{slots:n}){const r=reactive(useLink(e)),{options:g}=inject(routerKey),y=computed(()=>({[getLinkClass(e.activeClass,g.linkActiveClass,"router-link-active")]:r.isActive,[getLinkClass(e.exactActiveClass,g.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const k=n.default&&n.default(r);return e.custom?k:h$1("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:y.value},k)}}}),RouterLink=RouterLinkImpl;function guardEvent(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function includesParams(e,n){for(const r in n){const g=n[r],y=e[r];if(typeof g=="string"){if(g!==y)return!1}else if(!isArray$2(y)||y.length!==g.length||g.some((k,$)=>k!==y[$]))return!1}return!0}function getOriginalPath(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const getLinkClass=(e,n,r)=>e??n??r,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:n,slots:r}){const g=inject(routerViewLocationKey),y=computed(()=>e.route||g.value),k=inject(viewDepthKey,0),$=computed(()=>{let z=unref(k);const{matched:j}=y.value;let ae;for(;(ae=j[z])&&!ae.components;)z++;return z}),V=computed(()=>y.value.matched[$.value]);provide(viewDepthKey,computed(()=>$.value+1)),provide(matchedRouteKey,V),provide(routerViewLocationKey,y);const L=ref();return watch(()=>[L.value,V.value,e.name],([z,j,ae],[oe,re,ue])=>{j&&(j.instances[ae]=z,re&&re!==j&&z&&z===oe&&(j.leaveGuards.size||(j.leaveGuards=re.leaveGuards),j.updateGuards.size||(j.updateGuards=re.updateGuards))),z&&j&&(!re||!isSameRouteRecord(j,re)||!oe)&&(j.enterCallbacks[ae]||[]).forEach(le=>le(z))},{flush:"post"}),()=>{const z=y.value,j=e.name,ae=V.value,oe=ae&&ae.components[j];if(!oe)return normalizeSlot(r.default,{Component:oe,route:z});const re=ae.props[j],ue=re?re===!0?z.params:typeof re=="function"?re(z):re:null,de=h$1(oe,assign$2({},ue,n,{onVnodeUnmounted:he=>{he.component.isUnmounted&&(ae.instances[j]=null)},ref:L}));return normalizeSlot(r.default,{Component:de,route:z})||de}}});function normalizeSlot(e,n){if(!e)return null;const r=e(n);return r.length===1?r[0]:r}const RouterView=RouterViewImpl;function createRouter(e){const n=createRouterMatcher(e.routes,e),r=e.parseQuery||parseQuery,g=e.stringifyQuery||stringifyQuery,y=e.history,k=useCallbacks(),$=useCallbacks(),V=useCallbacks(),L=shallowRef(START_LOCATION_NORMALIZED);let z=START_LOCATION_NORMALIZED;isBrowser&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const j=applyToParams.bind(null,Nn=>""+Nn),ae=applyToParams.bind(null,encodeParam),oe=applyToParams.bind(null,decode);function re(Nn,En){let Zn,ha;return isRouteName(Nn)?(Zn=n.getRecordMatcher(Nn),ha=En):ha=Nn,n.addRoute(ha,Zn)}function ue(Nn){const En=n.getRecordMatcher(Nn);En&&n.removeRoute(En)}function le(){return n.getRoutes().map(Nn=>Nn.record)}function de(Nn){return!!n.getRecordMatcher(Nn)}function he(Nn,En){if(En=assign$2({},En||L.value),typeof Nn=="string"){const bn=parseURL(r,Nn,En.path),Xn=n.resolve({path:bn.path},En),$n=y.createHref(bn.fullPath);return assign$2(bn,Xn,{params:oe(Xn.params),hash:decode(bn.hash),redirectedFrom:void 0,href:$n})}let Zn;if("path"in Nn)Zn=assign$2({},Nn,{path:parseURL(r,Nn.path,En.path).path});else{const bn=assign$2({},Nn.params);for(const Xn in bn)bn[Xn]==null&&delete bn[Xn];Zn=assign$2({},Nn,{params:ae(bn)}),En.params=ae(En.params)}const ha=n.resolve(Zn,En),xa=Nn.hash||"";ha.params=j(oe(ha.params));const sa=stringifyURL(g,assign$2({},Nn,{hash:encodeHash(xa),path:ha.path})),Hn=y.createHref(sa);return assign$2({fullPath:sa,hash:xa,query:g===stringifyQuery?normalizeQuery(Nn.query):Nn.query||{}},ha,{redirectedFrom:void 0,href:Hn})}function _e(Nn){return typeof Nn=="string"?parseURL(r,Nn,L.value.path):assign$2({},Nn)}function xe(Nn,En){if(z!==Nn)return createRouterError(8,{from:En,to:Nn})}function Ne(Nn){return Ie(Nn)}function $e(Nn){return Ne(assign$2(_e(Nn),{replace:!0}))}function Ce(Nn){const En=Nn.matched[Nn.matched.length-1];if(En&&En.redirect){const{redirect:Zn}=En;let ha=typeof Zn=="function"?Zn(Nn):Zn;return typeof ha=="string"&&(ha=ha.includes("?")||ha.includes("#")?ha=_e(ha):{path:ha},ha.params={}),assign$2({query:Nn.query,hash:Nn.hash,params:"path"in ha?{}:Nn.params},ha)}}function Ie(Nn,En){const Zn=z=he(Nn),ha=L.value,xa=Nn.state,sa=Nn.force,Hn=Nn.replace===!0,bn=Ce(Zn);if(bn)return Ie(assign$2(_e(bn),{state:typeof bn=="object"?assign$2({},xa,bn.state):xa,force:sa,replace:Hn}),En||Zn);const Xn=Zn;Xn.redirectedFrom=En;let $n;return!sa&&isSameRouteLocation(g,ha,Zn)&&($n=createRouterError(16,{to:Xn,from:ha}),In(ha,ha,!0,!1)),($n?Promise.resolve($n):Pt(Xn,ha)).catch(kt=>isNavigationFailure(kt)?isNavigationFailure(kt,2)?kt:An(kt):Ln(kt,Xn,ha)).then(kt=>{if(kt){if(isNavigationFailure(kt,2))return Ie(assign$2({replace:Hn},_e(kt.to),{state:typeof kt.to=="object"?assign$2({},xa,kt.to.state):xa,force:sa}),En||Xn)}else kt=Dt(Xn,ha,!0,Hn,xa);return hn(Xn,ha,kt),kt})}function ze(Nn,En){const Zn=xe(Nn,En);return Zn?Promise.reject(Zn):Promise.resolve()}function Ue(Nn){const En=da.values().next().value;return En&&typeof En.runWithContext=="function"?En.runWithContext(Nn):Nn()}function Pt(Nn,En){let Zn;const[ha,xa,sa]=extractChangingRecords(Nn,En);Zn=extractComponentsGuards(ha.reverse(),"beforeRouteLeave",Nn,En);for(const bn of ha)bn.leaveGuards.forEach(Xn=>{Zn.push(guardToPromiseFn(Xn,Nn,En))});const Hn=ze.bind(null,Nn,En);return Zn.push(Hn),aa(Zn).then(()=>{Zn=[];for(const bn of k.list())Zn.push(guardToPromiseFn(bn,Nn,En));return Zn.push(Hn),aa(Zn)}).then(()=>{Zn=extractComponentsGuards(xa,"beforeRouteUpdate",Nn,En);for(const bn of xa)bn.updateGuards.forEach(Xn=>{Zn.push(guardToPromiseFn(Xn,Nn,En))});return Zn.push(Hn),aa(Zn)}).then(()=>{Zn=[];for(const bn of sa)if(bn.beforeEnter)if(isArray$2(bn.beforeEnter))for(const Xn of bn.beforeEnter)Zn.push(guardToPromiseFn(Xn,Nn,En));else Zn.push(guardToPromiseFn(bn.beforeEnter,Nn,En));return Zn.push(Hn),aa(Zn)}).then(()=>(Nn.matched.forEach(bn=>bn.enterCallbacks={}),Zn=extractComponentsGuards(sa,"beforeRouteEnter",Nn,En),Zn.push(Hn),aa(Zn))).then(()=>{Zn=[];for(const bn of $.list())Zn.push(guardToPromiseFn(bn,Nn,En));return Zn.push(Hn),aa(Zn)}).catch(bn=>isNavigationFailure(bn,8)?bn:Promise.reject(bn))}function hn(Nn,En,Zn){V.list().forEach(ha=>Ue(()=>ha(Nn,En,Zn)))}function Dt(Nn,En,Zn,ha,xa){const sa=xe(Nn,En);if(sa)return sa;const Hn=En===START_LOCATION_NORMALIZED,bn=isBrowser?history.state:{};Zn&&(ha||Hn?y.replace(Nn.fullPath,assign$2({scroll:Hn&&bn&&bn.scroll},xa)):y.push(Nn.fullPath,xa)),L.value=Nn,In(Nn,En,Zn,Hn),An()}let xn;function jt(){xn||(xn=y.listen((Nn,En,Zn)=>{if(!ua.listening)return;const ha=he(Nn),xa=Ce(ha);if(xa){Ie(assign$2(xa,{replace:!0}),ha).catch(noop$5);return}z=ha;const sa=L.value;isBrowser&&saveScrollPosition(getScrollKey(sa.fullPath,Zn.delta),computeScrollPosition()),Pt(ha,sa).catch(Hn=>isNavigationFailure(Hn,12)?Hn:isNavigationFailure(Hn,2)?(Ie(Hn.to,ha).then(bn=>{isNavigationFailure(bn,20)&&!Zn.delta&&Zn.type===NavigationType.pop&&y.go(-1,!1)}).catch(noop$5),Promise.reject()):(Zn.delta&&y.go(-Zn.delta,!1),Ln(Hn,ha,sa))).then(Hn=>{Hn=Hn||Dt(ha,sa,!1),Hn&&(Zn.delta&&!isNavigationFailure(Hn,8)?y.go(-Zn.delta,!1):Zn.type===NavigationType.pop&&isNavigationFailure(Hn,20)&&y.go(-1,!1)),hn(ha,sa,Hn)}).catch(noop$5)}))}let Vn=useCallbacks(),Rn=useCallbacks(),Tn;function Ln(Nn,En,Zn){An(Nn);const ha=Rn.list();return ha.length?ha.forEach(xa=>xa(Nn,En,Zn)):console.error(Nn),Promise.reject(Nn)}function Sn(){return Tn&&L.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((Nn,En)=>{Vn.add([Nn,En])})}function An(Nn){return Tn||(Tn=!Nn,jt(),Vn.list().forEach(([En,Zn])=>Nn?Zn(Nn):En()),Vn.reset()),Nn}function In(Nn,En,Zn,ha){const{scrollBehavior:xa}=e;if(!isBrowser||!xa)return Promise.resolve();const sa=!Zn&&getSavedScrollPosition(getScrollKey(Nn.fullPath,0))||(ha||!Zn)&&history.state&&history.state.scroll||null;return nextTick().then(()=>xa(Nn,En,sa)).then(Hn=>Hn&&scrollToPosition(Hn)).catch(Hn=>Ln(Hn,Nn,En))}const Mn=Nn=>y.go(Nn);let ra;const da=new Set,ua={currentRoute:L,listening:!0,addRoute:re,removeRoute:ue,hasRoute:de,getRoutes:le,resolve:he,options:e,push:Ne,replace:$e,go:Mn,back:()=>Mn(-1),forward:()=>Mn(1),beforeEach:k.add,beforeResolve:$.add,afterEach:V.add,onError:Rn.add,isReady:Sn,install(Nn){const En=this;Nn.component("RouterLink",RouterLink),Nn.component("RouterView",RouterView),Nn.config.globalProperties.$router=En,Object.defineProperty(Nn.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(L)}),isBrowser&&!ra&&L.value===START_LOCATION_NORMALIZED&&(ra=!0,Ne(y.location).catch(xa=>{}));const Zn={};for(const xa in START_LOCATION_NORMALIZED)Object.defineProperty(Zn,xa,{get:()=>L.value[xa],enumerable:!0});Nn.provide(routerKey,En),Nn.provide(routeLocationKey,shallowReactive(Zn)),Nn.provide(routerViewLocationKey,L);const ha=Nn.unmount;da.add(Nn),Nn.unmount=function(){da.delete(Nn),da.size<1&&(z=START_LOCATION_NORMALIZED,xn&&xn(),xn=null,L.value=START_LOCATION_NORMALIZED,ra=!1,Tn=!1),ha()}}};function aa(Nn){return Nn.reduce((En,Zn)=>En.then(()=>Ue(Zn)),Promise.resolve())}return ua}function extractChangingRecords(e,n){const r=[],g=[],y=[],k=Math.max(n.matched.length,e.matched.length);for(let $=0;$<k;$++){const V=n.matched[$];V&&(e.matched.find(z=>isSameRouteRecord(z,V))?g.push(V):r.push(V));const L=e.matched[$];L&&(n.matched.find(z=>isSameRouteRecord(z,L))||y.push(L))}return[r,g,y]}const ENV=ref("web");ref(!0);function __classPrivateFieldGet(e,n,r,g){if(r==="a"&&!g)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!g:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?g:r==="a"?g.call(e):g?g.value:n.get(e)}function __classPrivateFieldSet(e,n,r,g,y){if(g==="m")throw new TypeError("Private method is not writable");if(g==="a"&&!y)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?e!==n||!y:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return g==="a"?y.call(e,r):y?y.value=r:n.set(e,r),r}typeof SuppressedError=="function"&&SuppressedError;var _Resource_rid;const SERIALIZE_TO_IPC_FN="__TAURI_TO_IPC_KEY__";function transformCallback(e,n=!1){return window.__TAURI_INTERNALS__.transformCallback(e,n)}async function invoke(e,n={},r){return window.__TAURI_INTERNALS__.invoke(e,n,r)}class Resource{get rid(){return __classPrivateFieldGet(this,_Resource_rid,"f")}constructor(n){_Resource_rid.set(this,void 0),__classPrivateFieldSet(this,_Resource_rid,n,"f")}async close(){return invoke("plugin:resources|close",{rid:this.rid})}}_Resource_rid=new WeakMap;class LogicalSize{constructor(...n){this.type="Logical",n.length===1?"Logical"in n[0]?(this.width=n[0].Logical.width,this.height=n[0].Logical.height):(this.width=n[0].width,this.height=n[0].height):(this.width=n[0],this.height=n[1])}toPhysical(n){return new PhysicalSize(this.width*n,this.height*n)}[SERIALIZE_TO_IPC_FN](){return{width:this.width,height:this.height}}toJSON(){return this[SERIALIZE_TO_IPC_FN]()}}class PhysicalSize{constructor(...n){this.type="Physical",n.length===1?"Physical"in n[0]?(this.width=n[0].Physical.width,this.height=n[0].Physical.height):(this.width=n[0].width,this.height=n[0].height):(this.width=n[0],this.height=n[1])}toLogical(n){return new LogicalSize(this.width/n,this.height/n)}[SERIALIZE_TO_IPC_FN](){return{width:this.width,height:this.height}}toJSON(){return this[SERIALIZE_TO_IPC_FN]()}}class Size{constructor(n){this.size=n}toLogical(n){return this.size instanceof LogicalSize?this.size:this.size.toLogical(n)}toPhysical(n){return this.size instanceof PhysicalSize?this.size:this.size.toPhysical(n)}[SERIALIZE_TO_IPC_FN](){return{[`${this.size.type}`]:{width:this.size.width,height:this.size.height}}}toJSON(){return this[SERIALIZE_TO_IPC_FN]()}}class LogicalPosition{constructor(...n){this.type="Logical",n.length===1?"Logical"in n[0]?(this.x=n[0].Logical.x,this.y=n[0].Logical.y):(this.x=n[0].x,this.y=n[0].y):(this.x=n[0],this.y=n[1])}toPhysical(n){return new PhysicalPosition(this.x*n,this.y*n)}[SERIALIZE_TO_IPC_FN](){return{x:this.x,y:this.y}}toJSON(){return this[SERIALIZE_TO_IPC_FN]()}}class PhysicalPosition{constructor(...n){this.type="Physical",n.length===1?"Physical"in n[0]?(this.x=n[0].Physical.x,this.y=n[0].Physical.y):(this.x=n[0].x,this.y=n[0].y):(this.x=n[0],this.y=n[1])}toLogical(n){return new LogicalPosition(this.x/n,this.y/n)}[SERIALIZE_TO_IPC_FN](){return{x:this.x,y:this.y}}toJSON(){return this[SERIALIZE_TO_IPC_FN]()}}class Position{constructor(n){this.position=n}toLogical(n){return this.position instanceof LogicalPosition?this.position:this.position.toLogical(n)}toPhysical(n){return this.position instanceof PhysicalPosition?this.position:this.position.toPhysical(n)}[SERIALIZE_TO_IPC_FN](){return{[`${this.position.type}`]:{x:this.position.x,y:this.position.y}}}toJSON(){return this[SERIALIZE_TO_IPC_FN]()}}var TauriEvent;(function(e){e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_CREATED="tauri://window-created",e.WEBVIEW_CREATED="tauri://webview-created",e.DRAG_ENTER="tauri://drag-enter",e.DRAG_OVER="tauri://drag-over",e.DRAG_DROP="tauri://drag-drop",e.DRAG_LEAVE="tauri://drag-leave"})(TauriEvent||(TauriEvent={}));async function _unlisten(e,n){await invoke("plugin:event|unlisten",{event:e,eventId:n})}async function listen(e,n,r){var g;const y=typeof r?.target=="string"?{kind:"AnyLabel",label:r.target}:(g=r?.target)!==null&&g!==void 0?g:{kind:"Any"};return invoke("plugin:event|listen",{event:e,target:y,handler:transformCallback(n)}).then(k=>async()=>_unlisten(e,k))}async function once(e,n,r){return listen(e,g=>{_unlisten(e,g.id),n(g)},r)}async function emit(e,n){await invoke("plugin:event|emit",{event:e,payload:n})}async function emitTo(e,n,r){await invoke("plugin:event|emit_to",{target:typeof e=="string"?{kind:"AnyLabel",label:e}:e,event:n,payload:r})}let Image$2=class vr extends Resource{constructor(n){super(n)}static async new(n,r,g){return invoke("plugin:image|new",{rgba:transformImage(n),width:r,height:g}).then(y=>new vr(y))}static async fromBytes(n){return invoke("plugin:image|from_bytes",{bytes:transformImage(n)}).then(r=>new vr(r))}static async fromPath(n){return invoke("plugin:image|from_path",{path:n}).then(r=>new vr(r))}async rgba(){return invoke("plugin:image|rgba",{rid:this.rid}).then(n=>new Uint8Array(n))}async size(){return invoke("plugin:image|size",{rid:this.rid})}};function transformImage(e){return e==null?null:typeof e=="string"?e:e instanceof Image$2?e.rid:e}var UserAttentionType;(function(e){e[e.Critical=1]="Critical",e[e.Informational=2]="Informational"})(UserAttentionType||(UserAttentionType={}));class CloseRequestedEvent{constructor(n){this._preventDefault=!1,this.event=n.event,this.id=n.id}preventDefault(){this._preventDefault=!0}isPreventDefault(){return this._preventDefault}}var ProgressBarStatus;(function(e){e.None="none",e.Normal="normal",e.Indeterminate="indeterminate",e.Paused="paused",e.Error="error"})(ProgressBarStatus||(ProgressBarStatus={}));function getCurrentWindow(){return new Window$1(window.__TAURI_INTERNALS__.metadata.currentWindow.label,{skip:!0})}async function getAllWindows(){return invoke("plugin:window|get_all_windows").then(e=>e.map(n=>new Window$1(n,{skip:!0})))}const localTauriEvents$1=["tauri://created","tauri://error"];let Window$1=class{constructor(n,r={}){var g;this.label=n,this.listeners=Object.create(null),r?.skip||invoke("plugin:window|create",{options:{...r,parent:typeof r.parent=="string"?r.parent:(g=r.parent)===null||g===void 0?void 0:g.label,label:n}}).then(async()=>this.emit("tauri://created")).catch(async y=>this.emit("tauri://error",y))}static async getByLabel(n){var r;return(r=(await getAllWindows()).find(g=>g.label===n))!==null&&r!==void 0?r:null}static getCurrent(){return getCurrentWindow()}static async getAll(){return getAllWindows()}static async getFocusedWindow(){for(const n of await getAllWindows())if(await n.isFocused())return n;return null}async listen(n,r){return this._handleTauriEvent(n,r)?()=>{const g=this.listeners[n];g.splice(g.indexOf(r),1)}:listen(n,r,{target:{kind:"Window",label:this.label}})}async once(n,r){return this._handleTauriEvent(n,r)?()=>{const g=this.listeners[n];g.splice(g.indexOf(r),1)}:once(n,r,{target:{kind:"Window",label:this.label}})}async emit(n,r){if(localTauriEvents$1.includes(n)){for(const g of this.listeners[n]||[])g({event:n,id:-1,payload:r});return}return emit(n,r)}async emitTo(n,r,g){if(localTauriEvents$1.includes(r)){for(const y of this.listeners[r]||[])y({event:r,id:-1,payload:g});return}return emitTo(n,r,g)}_handleTauriEvent(n,r){return localTauriEvents$1.includes(n)?(n in this.listeners?this.listeners[n].push(r):this.listeners[n]=[r],!0):!1}async scaleFactor(){return invoke("plugin:window|scale_factor",{label:this.label})}async innerPosition(){return invoke("plugin:window|inner_position",{label:this.label}).then(n=>new PhysicalPosition(n))}async outerPosition(){return invoke("plugin:window|outer_position",{label:this.label}).then(n=>new PhysicalPosition(n))}async innerSize(){return invoke("plugin:window|inner_size",{label:this.label}).then(n=>new PhysicalSize(n))}async outerSize(){return invoke("plugin:window|outer_size",{label:this.label}).then(n=>new PhysicalSize(n))}async isFullscreen(){return invoke("plugin:window|is_fullscreen",{label:this.label})}async isMinimized(){return invoke("plugin:window|is_minimized",{label:this.label})}async isMaximized(){return invoke("plugin:window|is_maximized",{label:this.label})}async isFocused(){return invoke("plugin:window|is_focused",{label:this.label})}async isDecorated(){return invoke("plugin:window|is_decorated",{label:this.label})}async isResizable(){return invoke("plugin:window|is_resizable",{label:this.label})}async isMaximizable(){return invoke("plugin:window|is_maximizable",{label:this.label})}async isMinimizable(){return invoke("plugin:window|is_minimizable",{label:this.label})}async isClosable(){return invoke("plugin:window|is_closable",{label:this.label})}async isVisible(){return invoke("plugin:window|is_visible",{label:this.label})}async title(){return invoke("plugin:window|title",{label:this.label})}async theme(){return invoke("plugin:window|theme",{label:this.label})}async center(){return invoke("plugin:window|center",{label:this.label})}async requestUserAttention(n){let r=null;return n&&(n===UserAttentionType.Critical?r={type:"Critical"}:r={type:"Informational"}),invoke("plugin:window|request_user_attention",{label:this.label,value:r})}async setResizable(n){return invoke("plugin:window|set_resizable",{label:this.label,value:n})}async setEnabled(n){return invoke("plugin:window|set_enabled",{label:this.label,value:n})}async isEnabled(){return invoke("plugin:window|is_enabled",{label:this.label})}async setMaximizable(n){return invoke("plugin:window|set_maximizable",{label:this.label,value:n})}async setMinimizable(n){return invoke("plugin:window|set_minimizable",{label:this.label,value:n})}async setClosable(n){return invoke("plugin:window|set_closable",{label:this.label,value:n})}async setTitle(n){return invoke("plugin:window|set_title",{label:this.label,value:n})}async maximize(){return invoke("plugin:window|maximize",{label:this.label})}async unmaximize(){return invoke("plugin:window|unmaximize",{label:this.label})}async toggleMaximize(){return invoke("plugin:window|toggle_maximize",{label:this.label})}async minimize(){return invoke("plugin:window|minimize",{label:this.label})}async unminimize(){return invoke("plugin:window|unminimize",{label:this.label})}async show(){return invoke("plugin:window|show",{label:this.label})}async hide(){return invoke("plugin:window|hide",{label:this.label})}async close(){return invoke("plugin:window|close",{label:this.label})}async destroy(){return invoke("plugin:window|destroy",{label:this.label})}async setDecorations(n){return invoke("plugin:window|set_decorations",{label:this.label,value:n})}async setShadow(n){return invoke("plugin:window|set_shadow",{label:this.label,value:n})}async setEffects(n){return invoke("plugin:window|set_effects",{label:this.label,value:n})}async clearEffects(){return invoke("plugin:window|set_effects",{label:this.label,value:null})}async setAlwaysOnTop(n){return invoke("plugin:window|set_always_on_top",{label:this.label,value:n})}async setAlwaysOnBottom(n){return invoke("plugin:window|set_always_on_bottom",{label:this.label,value:n})}async setContentProtected(n){return invoke("plugin:window|set_content_protected",{label:this.label,value:n})}async setSize(n){return invoke("plugin:window|set_size",{label:this.label,value:n instanceof Size?n:new Size(n)})}async setMinSize(n){return invoke("plugin:window|set_min_size",{label:this.label,value:n instanceof Size?n:n?new Size(n):null})}async setMaxSize(n){return invoke("plugin:window|set_max_size",{label:this.label,value:n instanceof Size?n:n?new Size(n):null})}async setSizeConstraints(n){function r(g){return g?{Logical:g}:null}return invoke("plugin:window|set_size_constraints",{label:this.label,value:{minWidth:r(n?.minWidth),minHeight:r(n?.minHeight),maxWidth:r(n?.maxWidth),maxHeight:r(n?.maxHeight)}})}async setPosition(n){return invoke("plugin:window|set_position",{label:this.label,value:n instanceof Position?n:new Position(n)})}async setFullscreen(n){return invoke("plugin:window|set_fullscreen",{label:this.label,value:n})}async setFocus(){return invoke("plugin:window|set_focus",{label:this.label})}async setIcon(n){return invoke("plugin:window|set_icon",{label:this.label,value:transformImage(n)})}async setSkipTaskbar(n){return invoke("plugin:window|set_skip_taskbar",{label:this.label,value:n})}async setCursorGrab(n){return invoke("plugin:window|set_cursor_grab",{label:this.label,value:n})}async setCursorVisible(n){return invoke("plugin:window|set_cursor_visible",{label:this.label,value:n})}async setCursorIcon(n){return invoke("plugin:window|set_cursor_icon",{label:this.label,value:n})}async setBackgroundColor(n){return invoke("plugin:window|set_background_color",{color:n})}async setCursorPosition(n){return invoke("plugin:window|set_cursor_position",{label:this.label,value:n instanceof Position?n:new Position(n)})}async setIgnoreCursorEvents(n){return invoke("plugin:window|set_ignore_cursor_events",{label:this.label,value:n})}async startDragging(){return invoke("plugin:window|start_dragging",{label:this.label})}async startResizeDragging(n){return invoke("plugin:window|start_resize_dragging",{label:this.label,value:n})}async setProgressBar(n){return invoke("plugin:window|set_progress_bar",{label:this.label,value:n})}async setVisibleOnAllWorkspaces(n){return invoke("plugin:window|set_visible_on_all_workspaces",{label:this.label,value:n})}async setTitleBarStyle(n){return invoke("plugin:window|set_title_bar_style",{label:this.label,value:n})}async setTheme(n){return invoke("plugin:window|set_theme",{label:this.label,value:n})}async onResized(n){return this.listen(TauriEvent.WINDOW_RESIZED,r=>{r.payload=new PhysicalSize(r.payload),n(r)})}async onMoved(n){return this.listen(TauriEvent.WINDOW_MOVED,r=>{r.payload=new PhysicalPosition(r.payload),n(r)})}async onCloseRequested(n){return this.listen(TauriEvent.WINDOW_CLOSE_REQUESTED,async r=>{const g=new CloseRequestedEvent(r);await n(g),g.isPreventDefault()||await this.destroy()})}async onDragDropEvent(n){const r=await this.listen(TauriEvent.DRAG_ENTER,$=>{n({...$,payload:{type:"enter",paths:$.payload.paths,position:new PhysicalPosition($.payload.position)}})}),g=await this.listen(TauriEvent.DRAG_OVER,$=>{n({...$,payload:{type:"over",position:new PhysicalPosition($.payload.position)}})}),y=await this.listen(TauriEvent.DRAG_DROP,$=>{n({...$,payload:{type:"drop",paths:$.payload.paths,position:new PhysicalPosition($.payload.position)}})}),k=await this.listen(TauriEvent.DRAG_LEAVE,$=>{n({...$,payload:{type:"leave"}})});return()=>{r(),y(),g(),k()}}async onFocusChanged(n){const r=await this.listen(TauriEvent.WINDOW_FOCUS,y=>{n({...y,payload:!0})}),g=await this.listen(TauriEvent.WINDOW_BLUR,y=>{n({...y,payload:!1})});return()=>{r(),g()}}async onScaleChanged(n){return this.listen(TauriEvent.WINDOW_SCALE_FACTOR_CHANGED,n)}async onThemeChanged(n){return this.listen(TauriEvent.WINDOW_THEME_CHANGED,n)}};var Effect;(function(e){e.AppearanceBased="appearanceBased",e.Light="light",e.Dark="dark",e.MediumLight="mediumLight",e.UltraDark="ultraDark",e.Titlebar="titlebar",e.Selection="selection",e.Menu="menu",e.Popover="popover",e.Sidebar="sidebar",e.HeaderView="headerView",e.Sheet="sheet",e.WindowBackground="windowBackground",e.HudWindow="hudWindow",e.FullScreenUI="fullScreenUI",e.Tooltip="tooltip",e.ContentBackground="contentBackground",e.UnderWindowBackground="underWindowBackground",e.UnderPageBackground="underPageBackground",e.Mica="mica",e.Blur="blur",e.Acrylic="acrylic",e.Tabbed="tabbed",e.TabbedDark="tabbedDark",e.TabbedLight="tabbedLight"})(Effect||(Effect={}));var EffectState;(function(e){e.FollowsWindowActiveState="followsWindowActiveState",e.Active="active",e.Inactive="inactive"})(EffectState||(EffectState={}));function getCurrentWebview(){return new Webview(getCurrentWindow(),window.__TAURI_INTERNALS__.metadata.currentWebview.label,{skip:!0})}async function getAllWebviews(){return invoke("plugin:webview|get_all_webviews").then(e=>e.map(n=>new Webview(new Window$1(n.windowLabel,{skip:!0}),n.label,{skip:!0})))}const localTauriEvents=["tauri://created","tauri://error"];class Webview{constructor(n,r,g){this.window=n,this.label=r,this.listeners=Object.create(null),g?.skip||invoke("plugin:webview|create_webview",{windowLabel:n.label,label:r,options:g}).then(async()=>this.emit("tauri://created")).catch(async y=>this.emit("tauri://error",y))}static async getByLabel(n){var r;return(r=(await getAllWebviews()).find(g=>g.label===n))!==null&&r!==void 0?r:null}static getCurrent(){return getCurrentWebview()}static async getAll(){return getAllWebviews()}async listen(n,r){return this._handleTauriEvent(n,r)?()=>{const g=this.listeners[n];g.splice(g.indexOf(r),1)}:listen(n,r,{target:{kind:"Webview",label:this.label}})}async once(n,r){return this._handleTauriEvent(n,r)?()=>{const g=this.listeners[n];g.splice(g.indexOf(r),1)}:once(n,r,{target:{kind:"Webview",label:this.label}})}async emit(n,r){if(localTauriEvents.includes(n)){for(const g of this.listeners[n]||[])g({event:n,id:-1,payload:r});return}return emit(n,r)}async emitTo(n,r,g){if(localTauriEvents.includes(r)){for(const y of this.listeners[r]||[])y({event:r,id:-1,payload:g});return}return emitTo(n,r,g)}_handleTauriEvent(n,r){return localTauriEvents.includes(n)?(n in this.listeners?this.listeners[n].push(r):this.listeners[n]=[r],!0):!1}async position(){return invoke("plugin:webview|webview_position",{label:this.label}).then(n=>new PhysicalPosition(n))}async size(){return invoke("plugin:webview|webview_size",{label:this.label}).then(n=>new PhysicalSize(n))}async close(){return invoke("plugin:webview|close",{label:this.label})}async setSize(n){return invoke("plugin:webview|set_webview_size",{label:this.label,value:n instanceof Size?n:new Size(n)})}async setPosition(n){return invoke("plugin:webview|set_webview_position",{label:this.label,value:n instanceof Position?n:new Position(n)})}async setFocus(){return invoke("plugin:webview|set_webview_focus",{label:this.label})}async hide(){return invoke("plugin:webview|webview_hide",{label:this.label})}async show(){return invoke("plugin:webview|webview_show",{label:this.label})}async setZoom(n){return invoke("plugin:webview|set_webview_zoom",{label:this.label,value:n})}async reparent(n){return invoke("plugin:webview|reparent",{label:this.label,window:typeof n=="string"?n:n.label})}async clearAllBrowsingData(){return invoke("plugin:webview|clear_all_browsing_data")}async setBackgroundColor(n){return invoke("plugin:webview|set_webview_background_color",{color:n})}async onDragDropEvent(n){const r=await this.listen(TauriEvent.DRAG_ENTER,$=>{n({...$,payload:{type:"enter",paths:$.payload.paths,position:new PhysicalPosition($.payload.position)}})}),g=await this.listen(TauriEvent.DRAG_OVER,$=>{n({...$,payload:{type:"over",position:new PhysicalPosition($.payload.position)}})}),y=await this.listen(TauriEvent.DRAG_DROP,$=>{n({...$,payload:{type:"drop",paths:$.payload.paths,position:new PhysicalPosition($.payload.position)}})}),k=await this.listen(TauriEvent.DRAG_LEAVE,$=>{n({...$,payload:{type:"leave"}})});return()=>{r(),y(),g(),k()}}}function getCurrentWebviewWindow(){const e=getCurrentWebview();return new WebviewWindow(e.label,{skip:!0})}async function getAllWebviewWindows(){return invoke("plugin:window|get_all_windows").then(e=>e.map(n=>new WebviewWindow(n,{skip:!0})))}class WebviewWindow{constructor(n,r={}){var g;this.label=n,this.listeners=Object.create(null),r?.skip||invoke("plugin:webview|create_webview_window",{options:{...r,parent:typeof r.parent=="string"?r.parent:(g=r.parent)===null||g===void 0?void 0:g.label,label:n}}).then(async()=>this.emit("tauri://created")).catch(async y=>this.emit("tauri://error",y))}static async getByLabel(n){var r;const g=(r=(await getAllWebviewWindows()).find(y=>y.label===n))!==null&&r!==void 0?r:null;return g?new WebviewWindow(g.label,{skip:!0}):null}static getCurrent(){return getCurrentWebviewWindow()}static async getAll(){return getAllWebviewWindows()}async listen(n,r){return this._handleTauriEvent(n,r)?()=>{const g=this.listeners[n];g.splice(g.indexOf(r),1)}:listen(n,r,{target:{kind:"WebviewWindow",label:this.label}})}async once(n,r){return this._handleTauriEvent(n,r)?()=>{const g=this.listeners[n];g.splice(g.indexOf(r),1)}:once(n,r,{target:{kind:"WebviewWindow",label:this.label}})}async setBackgroundColor(n){return invoke("plugin:window|set_background_color",{color:n}).then(()=>invoke("plugin:webview|set_webview_background_color",{color:n}))}}applyMixins(WebviewWindow,[Window$1,Webview]);function applyMixins(e,n){(Array.isArray(n)?n:[n]).forEach(r=>{Object.getOwnPropertyNames(r.prototype).forEach(g=>{var y;typeof e.prototype=="object"&&e.prototype&&g in e.prototype||Object.defineProperty(e.prototype,g,(y=Object.getOwnPropertyDescriptor(r.prototype,g))!==null&&y!==void 0?y:Object.create(null))})})}const createFileDialogVisible=ref(!1),setCreateFileDialogVisible=e=>{createFileDialogVisible.value=e},fontSettingsDialogVisible=ref(!1),setFontSettingsDialogVisible=e=>{fontSettingsDialogVisible.value=e},fontSettings2DialogVisible=ref(!1),setFontSettings2DialogVisible=e=>{fontSettings2DialogVisible.value=e},preferenceSettingsDialogVisible=ref(!1),setPreferenceSettingsDialogVisible=e=>{preferenceSettingsDialogVisible.value=e},addTextDialogVisible=ref(!1),setAddTextDialogVisible=e=>{addTextDialogVisible.value=e},addGlyphDialogVisible=ref(!1),setAddGlyphDialogVisible=e=>{addGlyphDialogVisible.value=e},copyGlyphDialogVisible=ref(!1),setCopyGlyphDialogVisible=e=>{copyGlyphDialogVisible.value=e},editGlyphDialogVisible=ref(!1),setEditGlyphDialogVisible=e=>{editGlyphDialogVisible.value=e},copyCharacterDialogVisible=ref(!1),setCopyCharacterDialogVisible=e=>{copyCharacterDialogVisible.value=e},editCharacterDialogVisible=ref(!1),setEditCharacterDialogVisible=e=>{editCharacterDialogVisible.value=e},glyphComponentsDialogVisible=ref(!1),setGlyphComponentsDialogVisible=e=>{glyphComponentsDialogVisible.value=e},addIconDialogVisible=ref(!1),setAddIconDialogVisible=e=>{addIconDialogVisible.value=e},languageSettingsDialogVisible=ref(!1),setLanguageSettingsDialogVisible=e=>{languageSettingsDialogVisible.value=e},importTemplatesDialogVisible=ref(!1),setImportTemplatesDialogVisible=e=>{importTemplatesDialogVisible.value=e},setAsGlobalParamDialogVisible=ref(!1),setSetAsGlobalParamDialogVisible=e=>{setAsGlobalParamDialogVisible.value=e},selectGlobalParamDialogVisible=ref(!1),setSelectGlobalParamDialogVisible=e=>{selectGlobalParamDialogVisible.value=e},tipsDialogVisible=ref(!1),tipsDialogConfirmCallback=ref(null),setTipsDialogVisible=(e,n)=>{tipsDialogVisible.value=e,tipsDialogConfirmCallback.value=n||null},closeFileTipDialogVisible=ref(!1),setCloseFileTipDialogVisible=e=>{closeFileTipDialogVisible.value=e},saveFileTipDialogVisible=ref(!1),setSaveFileTipDialogVisible=e=>{saveFileTipDialogVisible.value=e},exportDialogVisible=ref(!1),setExportDialogVisible=e=>{exportDialogVisible.value=e},saveDialogVisible=ref(!1),setSaveDialogVisible=e=>{saveDialogVisible.value=e},saveAsDialogVisible=ref(!1),setSaveAsDialogVisible=e=>{saveAsDialogVisible.value=e},exportFontDialogVisible=ref(!1),setExportFontDialogVisible=e=>{exportFontDialogVisible.value=e},exportFontTauriDialogVisible=ref(!1),setExportFontTauriDialogVisible=e=>{exportFontTauriDialogVisible.value=e},copiedGlyphUUID=ref(""),copiedCharacterUUID=ref(""),editedGlyphUUID=ref(""),editedCharacterUUID=ref(""),glyphComponentsDialogVisible2=ref(!1),exportVarFontDialogVisible=ref(!1),setExportVarFontDialogVisible=e=>{exportVarFontDialogVisible.value=e},exportVarFontTauriDialogVisible=ref(!1),setExportVarFontTauriDialogVisible=e=>{exportVarFontTauriDialogVisible.value=e},exportColorFontDialogVisible=ref(!1),setExportColorFontDialogVisible=e=>{exportColorFontDialogVisible.value=e},exportColorFontTauriDialogVisible=ref(!1),setExportColorFontTauriDialogVisible=e=>{exportColorFontTauriDialogVisible.value=e};var GridType=(e=>(e[e.None=0]="None",e[e.Mesh=1]="Mesh",e[e.Mi=2]="Mi",e[e.LayoutGrid=3]="LayoutGrid",e))(GridType||{}),BackgroundType=(e=>(e[e.Transparent=0]="Transparent",e[e.Color=1]="Color",e))(BackgroundType||{});const base$1="/fontplayer_demo";ref(!1);const useFixedCurves=ref(!1),jointsCheckedMap=ref({}),draggable$1=ref(!0),dragOption=ref("default"),checkJoints=ref(!1),checkRefLines=ref(!1),fontRenderStyle=ref("contour"),fontPreviewStyle=ref("black"),tips=ref(""),tool=ref(""),width$3=ref(500),height$1=ref(500),canvas=ref(null),glyphDraggerTool=ref(""),setGlyphDraggerTool=e=>{e==="glyphDragger"&&(setTool("select"),checkJoints.value=!0,checkRefLines.value=!0),glyphDraggerTool.value=e};let grid=reactive({type:0,precision:20}),background$1=reactive({type:0,color:""});const gridSettings$1=ref({dx:0,dy:0,centerSquareSize:1e3/3,size:1e3,default:!0});ref([{value:"",label:"",layout:"<0,x1+0.5*(x2-x1)><x1+0.5*(x2-x1),l>",subLayout:"<x,x+0.5*w><x+0.5*w,x+w>"},{value:"",label:"",layout:"<0,l/3)><l/3,2*l/3><2*l/3,l>",subLayout:"<x,x+0.33*w><x+0.33*w,x+0.66w><x+0.66w,x+w>"},{value:"",label:"",layout:"<0,x1+0.5*(y2-y1)><x1+0.5*(y2-y1),l>",subLayout:"<y,y+0.5*h><y+0.5*h,y+h>"},{value:"",label:"",layout:"<0,l/3)><l/3,2*l/3><2*l/3,l>",subLayout:"<y,x+0.33*h><y+0.33*h,y+0.66h><y+0.66h,y+h>"},{value:"",label:"",layout:"",subLayout:""}]);const strokeWidthRatio=2,strokeWidth=5,getStrokeWidth=()=>strokeWidthRatio*strokeWidth/(window.devicePixelRatio||1),setTool=e=>{tool.value=e},setBackgroundType=e=>{background$1.type=e},setBackgroundColor=e=>{background$1.color=e},setGridType=e=>{grid.type=e},setGridPrecision=e=>{grid.precision=e},setCanvas=e=>{canvas.value=e},loading$1=ref(!1),loaded$1=ref(0),total$1=ref(100),loadingMsg=ref(""),gridChanged=ref(!1),maxSegment=5,minSegment=3,skeletonThreshold=1,FOCUSABLE_ELEMENT_SELECTORS='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',isVisible=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,obtainAllFocusableElements$1=e=>Array.from(e.querySelectorAll(FOCUSABLE_ELEMENT_SELECTORS)).filter(n=>isFocusable(n)&&isVisible(n)),isFocusable=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},triggerEvent=function(e,n,...r){let g;n.includes("mouse")||n.includes("click")?g="MouseEvents":n.includes("key")?g="KeyboardEvent":g="HTMLEvents";const y=document.createEvent(g);return y.initEvent(n,...r),e.dispatchEvent(y),e},isLeaf=e=>!e.getAttribute("aria-owns"),getSibling=(e,n,r)=>{const{parentNode:g}=e;if(!g)return null;const y=g.querySelectorAll(r),k=Array.prototype.indexOf.call(y,e);return y[k+n]||null},focusNode=e=>{e&&(e.focus(),!isLeaf(e)&&e.click())},composeEventHandlers=(e,n,{checkForDefaultPrevented:r=!0}={})=>y=>{const k=e?.(y);if(r===!1||!k)return n?.(y)},whenMouse=e=>n=>n.pointerType==="mouse"?e(n):void 0;var __defProp$9=Object.defineProperty,__defProps$6=Object.defineProperties,__getOwnPropDescs$6=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$b=Object.getOwnPropertySymbols,__hasOwnProp$b=Object.prototype.hasOwnProperty,__propIsEnum$b=Object.prototype.propertyIsEnumerable,__defNormalProp$9=(e,n,r)=>n in e?__defProp$9(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,__spreadValues$9=(e,n)=>{for(var r in n||(n={}))__hasOwnProp$b.call(n,r)&&__defNormalProp$9(e,r,n[r]);if(__getOwnPropSymbols$b)for(var r of __getOwnPropSymbols$b(n))__propIsEnum$b.call(n,r)&&__defNormalProp$9(e,r,n[r]);return e},__spreadProps$6=(e,n)=>__defProps$6(e,__getOwnPropDescs$6(n));function computedEager(e,n){var r;const g=shallowRef();return watchEffect(()=>{g.value=e()},__spreadProps$6(__spreadValues$9({},n),{flush:(r=n?.flush)!=null?r:"sync"})),readonly(g)}var _a$1;const isClient=typeof window<"u",isDef=e=>typeof e<"u",isFunction$2=e=>typeof e=="function",isString$2=e=>typeof e=="string",noop$4=()=>{},isIOS=isClient&&((_a$1=window?.navigator)==null?void 0:_a$1.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function resolveUnref(e){return typeof e=="function"?e():unref(e)}function createFilterWrapper(e,n){function r(...g){return new Promise((y,k)=>{Promise.resolve(e(()=>n.apply(this,g),{fn:n,thisArg:this,args:g})).then(y).catch(k)})}return r}function debounceFilter(e,n={}){let r,g,y=noop$4;const k=V=>{clearTimeout(V),y(),y=noop$4};return V=>{const L=resolveUnref(e),z=resolveUnref(n.maxWait);return r&&k(r),L<=0||z!==void 0&&z<=0?(g&&(k(g),g=null),Promise.resolve(V())):new Promise((j,ae)=>{y=n.rejectOnCancel?ae:j,z&&!g&&(g=setTimeout(()=>{r&&k(r),g=null,j(V())},z)),r=setTimeout(()=>{g&&k(g),g=null,j(V())},L)})}}function throttleFilter(e,n=!0,r=!0,g=!1){let y=0,k,$=!0,V=noop$4,L;const z=()=>{k&&(clearTimeout(k),k=void 0,V(),V=noop$4)};return ae=>{const oe=resolveUnref(e),re=Date.now()-y,ue=()=>L=ae();return z(),oe<=0?(y=Date.now(),ue()):(re>oe&&(r||!$)?(y=Date.now(),ue()):n&&(L=new Promise((le,de)=>{V=g?de:le,k=setTimeout(()=>{y=Date.now(),$=!0,le(ue()),z()},Math.max(0,oe-re))})),!r&&!k&&(k=setTimeout(()=>$=!0,oe)),$=!1,L)}}function identity$1(e){return e}function tryOnScopeDispose(e){return getCurrentScope()?(onScopeDispose(e),!0):!1}function useDebounceFn(e,n=200,r={}){return createFilterWrapper(debounceFilter(n,r),e)}function refDebounced(e,n=200,r={}){const g=ref(e.value),y=useDebounceFn(()=>{g.value=e.value},n,r);return watch(e,()=>y()),g}function useThrottleFn(e,n=200,r=!1,g=!0,y=!1){return createFilterWrapper(throttleFilter(n,r,g,y),e)}function tryOnMounted(e,n=!0){getCurrentInstance()?onMounted(e):n?e():nextTick(e)}function useTimeoutFn(e,n,r={}){const{immediate:g=!0}=r,y=ref(!1);let k=null;function $(){k&&(clearTimeout(k),k=null)}function V(){y.value=!1,$()}function L(...z){$(),y.value=!0,k=setTimeout(()=>{y.value=!1,k=null,e(...z)},resolveUnref(n))}return g&&(y.value=!0,isClient&&L()),tryOnScopeDispose(V),{isPending:readonly(y),start:L,stop:V}}function unrefElement(e){var n;const r=resolveUnref(e);return(n=r?.$el)!=null?n:r}const defaultWindow=isClient?window:void 0,defaultDocument=isClient?window.document:void 0;function useEventListener(...e){let n,r,g,y;if(isString$2(e[0])||Array.isArray(e[0])?([r,g,y]=e,n=defaultWindow):[n,r,g,y]=e,!n)return noop$4;Array.isArray(r)||(r=[r]),Array.isArray(g)||(g=[g]);const k=[],$=()=>{k.forEach(j=>j()),k.length=0},V=(j,ae,oe,re)=>(j.addEventListener(ae,oe,re),()=>j.removeEventListener(ae,oe,re)),L=watch(()=>[unrefElement(n),resolveUnref(y)],([j,ae])=>{$(),j&&k.push(...r.flatMap(oe=>g.map(re=>V(j,oe,re,ae))))},{immediate:!0,flush:"post"}),z=()=>{L(),$()};return tryOnScopeDispose(z),z}let _iOSWorkaround=!1;function onClickOutside(e,n,r={}){const{window:g=defaultWindow,ignore:y=[],capture:k=!0,detectIframe:$=!1}=r;if(!g)return;isIOS&&!_iOSWorkaround&&(_iOSWorkaround=!0,Array.from(g.document.body.children).forEach(oe=>oe.addEventListener("click",noop$4)));let V=!0;const L=oe=>y.some(re=>{if(typeof re=="string")return Array.from(g.document.querySelectorAll(re)).some(ue=>ue===oe.target||oe.composedPath().includes(ue));{const ue=unrefElement(re);return ue&&(oe.target===ue||oe.composedPath().includes(ue))}}),j=[useEventListener(g,"click",oe=>{const re=unrefElement(e);if(!(!re||re===oe.target||oe.composedPath().includes(re))){if(oe.detail===0&&(V=!L(oe)),!V){V=!0;return}n(oe)}},{passive:!0,capture:k}),useEventListener(g,"pointerdown",oe=>{const re=unrefElement(e);re&&(V=!oe.composedPath().includes(re)&&!L(oe))},{passive:!0}),$&&useEventListener(g,"blur",oe=>{var re;const ue=unrefElement(e);((re=g.document.activeElement)==null?void 0:re.tagName)==="IFRAME"&&!ue?.contains(g.document.activeElement)&&n(oe)})].filter(Boolean);return()=>j.forEach(oe=>oe())}function useSupported(e,n=!1){const r=ref(),g=()=>r.value=!!e();return g(),tryOnMounted(g,n),r}function cloneFnJSON(e){return JSON.parse(JSON.stringify(e))}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__";_global[globalKey]=_global[globalKey]||{};function useCssVar(e,n,{window:r=defaultWindow,initialValue:g=""}={}){const y=ref(g),k=computed(()=>{var $;return unrefElement(n)||(($=r?.document)==null?void 0:$.documentElement)});return watch([k,()=>resolveUnref(e)],([$,V])=>{var L;if($&&r){const z=(L=r.getComputedStyle($).getPropertyValue(V))==null?void 0:L.trim();y.value=z||g}},{immediate:!0}),watch(y,$=>{var V;(V=k.value)!=null&&V.style&&k.value.style.setProperty(resolveUnref(e),$)}),y}function useDocumentVisibility({document:e=defaultDocument}={}){if(!e)return ref("visible");const n=ref(e.visibilityState);return useEventListener(e,"visibilitychange",()=>{n.value=e.visibilityState}),n}var __getOwnPropSymbols$g=Object.getOwnPropertySymbols,__hasOwnProp$g=Object.prototype.hasOwnProperty,__propIsEnum$g=Object.prototype.propertyIsEnumerable,__objRest$2=(e,n)=>{var r={};for(var g in e)__hasOwnProp$g.call(e,g)&&n.indexOf(g)<0&&(r[g]=e[g]);if(e!=null&&__getOwnPropSymbols$g)for(var g of __getOwnPropSymbols$g(e))n.indexOf(g)<0&&__propIsEnum$g.call(e,g)&&(r[g]=e[g]);return r};function useResizeObserver(e,n,r={}){const g=r,{window:y=defaultWindow}=g,k=__objRest$2(g,["window"]);let $;const V=useSupported(()=>y&&"ResizeObserver"in y),L=()=>{$&&($.disconnect(),$=void 0)},z=watch(()=>unrefElement(e),ae=>{L(),V.value&&y&&ae&&($=new ResizeObserver(n),$.observe(ae,k))},{immediate:!0,flush:"post"}),j=()=>{L(),z()};return tryOnScopeDispose(j),{isSupported:V,stop:j}}function useElementBounding(e,n={}){const{reset:r=!0,windowResize:g=!0,windowScroll:y=!0,immediate:k=!0}=n,$=ref(0),V=ref(0),L=ref(0),z=ref(0),j=ref(0),ae=ref(0),oe=ref(0),re=ref(0);function ue(){const le=unrefElement(e);if(!le){r&&($.value=0,V.value=0,L.value=0,z.value=0,j.value=0,ae.value=0,oe.value=0,re.value=0);return}const de=le.getBoundingClientRect();$.value=de.height,V.value=de.bottom,L.value=de.left,z.value=de.right,j.value=de.top,ae.value=de.width,oe.value=de.x,re.value=de.y}return useResizeObserver(e,ue),watch(()=>unrefElement(e),le=>!le&&ue()),y&&useEventListener("scroll",ue,{capture:!0,passive:!0}),g&&useEventListener("resize",ue,{passive:!0}),tryOnMounted(()=>{k&&ue()}),{height:$,bottom:V,left:L,right:z,top:j,width:ae,x:oe,y:re,update:ue}}var SwipeDirection;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(SwipeDirection||(SwipeDirection={}));var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,n,r)=>n in e?__defProp(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,__spreadValues=(e,n)=>{for(var r in n||(n={}))__hasOwnProp.call(n,r)&&__defNormalProp(e,r,n[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(n))__propIsEnum.call(n,r)&&__defNormalProp(e,r,n[r]);return e};const _TransitionPresets={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};__spreadValues({linear:identity$1},_TransitionPresets);function useVModel(e,n,r,g={}){var y,k,$;const{clone:V=!1,passive:L=!1,eventName:z,deep:j=!1,defaultValue:ae}=g,oe=getCurrentInstance(),re=r||oe?.emit||((y=oe?.$emit)==null?void 0:y.bind(oe))||(($=(k=oe?.proxy)==null?void 0:k.$emit)==null?void 0:$.bind(oe?.proxy));let ue=z;n||(n="modelValue"),ue=z||ue||`update:${n.toString()}`;const le=he=>V?isFunction$2(V)?V(he):cloneFnJSON(he):he,de=()=>isDef(e[n])?le(e[n]):ae;if(L){const he=de(),_e=ref(he);return watch(()=>e[n],xe=>_e.value=le(xe)),watch(_e,xe=>{(xe!==e[n]||j)&&re(ue,xe)},{deep:j}),_e}else return computed({get(){return de()},set(he){re(ue,he)}})}function useWindowFocus({window:e=defaultWindow}={}){if(!e)return ref(!1);const n=ref(e.document.hasFocus());return useEventListener(e,"blur",()=>{n.value=!1}),useEventListener(e,"focus",()=>{n.value=!0}),n}function useWindowSize(e={}){const{window:n=defaultWindow,initialWidth:r=1/0,initialHeight:g=1/0,listenOrientation:y=!0,includeScrollbar:k=!0}=e,$=ref(r),V=ref(g),L=()=>{n&&(k?($.value=n.innerWidth,V.value=n.innerHeight):($.value=n.document.documentElement.clientWidth,V.value=n.document.documentElement.clientHeight))};return L(),tryOnMounted(L),useEventListener("resize",L,{passive:!0}),y&&useEventListener("orientationchange",L,{passive:!0}),{width:$,height:V}}const isFirefox=()=>isClient&&/firefox/i.test(window.navigator.userAgent),isInContainer=(e,n)=>{if(!isClient||!e||!n)return!1;const r=e.getBoundingClientRect();let g;return n instanceof Element?g=n.getBoundingClientRect():g={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},r.top<g.bottom&&r.bottom>g.top&&r.right>g.left&&r.left<g.right},getOffsetTop=e=>{let n=0,r=e;for(;r;)n+=r.offsetTop,r=r.offsetParent;return n},getOffsetTopDistance=(e,n)=>Math.abs(getOffsetTop(e)-getOffsetTop(n)),getClientXY=e=>{let n,r;return e.type==="touchend"?(r=e.changedTouches[0].clientY,n=e.changedTouches[0].clientX):e.type.startsWith("touch")?(r=e.touches[0].clientY,n=e.touches[0].clientX):(r=e.clientY,n=e.clientX),{clientX:n,clientY:r}};var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$f=Object.prototype,hasOwnProperty$d=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(e){var n=hasOwnProperty$d.call(e,symToStringTag$1),r=e[symToStringTag$1];try{e[symToStringTag$1]=void 0;var g=!0}catch{}var y=nativeObjectToString$1.call(e);return g&&(n?e[symToStringTag$1]=r:delete e[symToStringTag$1]),y}var objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString$1(e){return nativeObjectToString.call(e)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(e){return e==null?e===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString$1(e)}function isObjectLike(e){return e!=null&&typeof e=="object"}var symbolTag$3="[object Symbol]";function isSymbol(e){return typeof e=="symbol"||isObjectLike(e)&&baseGetTag(e)==symbolTag$3}function arrayMap(e,n){for(var r=-1,g=e==null?0:e.length,y=Array(g);++r<g;)y[r]=n(e[r],r,e);return y}var isArray$1=Array.isArray,INFINITY$4=1/0,symbolProto$2=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(e){if(typeof e=="string")return e;if(isArray$1(e))return arrayMap(e,baseToString)+"";if(isSymbol(e))return symbolToString?symbolToString.call(e):"";var n=e+"";return n=="0"&&1/e==-INFINITY$4?"-0":n}var reWhitespace=/\s/;function trimmedEndIndex(e){for(var n=e.length;n--&&reWhitespace.test(e.charAt(n)););return n}var reTrimStart=/^\s+/;function baseTrim(e){return e&&e.slice(0,trimmedEndIndex(e)+1).replace(reTrimStart,"")}function isObject$2(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(e){if(typeof e=="number")return e;if(isSymbol(e))return NAN;if(isObject$2(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=isObject$2(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=baseTrim(e);var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}var INFINITY$3=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(e){if(!e)return e===0?e:0;if(e=toNumber(e),e===INFINITY$3||e===-INFINITY$3){var n=e<0?-1:1;return n*MAX_INTEGER}return e===e?e:0}function toInteger(e){var n=toFinite(e),r=n%1;return n===n?r?n-r:n:0}function identity(e){return e}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(e){if(!isObject$2(e))return!1;var n=baseGetTag(e);return n==funcTag$2||n==genTag$1||n==asyncTag||n==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(e){if(e!=null){try{return funcToString$2.call(e)}catch{}try{return e+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$d=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$c=objectProto$d.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$c).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){if(!isObject$2(e)||isMasked(e))return!1;var n=isFunction$1(e)?reIsNative:reIsHostCtor;return n.test(toSource(e))}function getValue$1(e,n){return e?.[n]}function getNative(e,n){var r=getValue$1(e,n);return baseIsNative(r)?r:void 0}var WeakMap$1=getNative(root,"WeakMap"),objectCreate=Object.create,baseCreate=function(){function e(){}return function(n){if(!isObject$2(n))return{};if(objectCreate)return objectCreate(n);e.prototype=n;var r=new e;return e.prototype=void 0,r}}();function apply$1(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}function noop$3(){}function copyArray(e,n){var r=-1,g=e.length;for(n||(n=Array(g));++r<g;)n[r]=e[r];return n}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(e){var n=0,r=0;return function(){var g=nativeNow(),y=HOT_SPAN-(g-r);if(r=g,y>0){if(++n>=HOT_COUNT)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}function constant(e){return function(){return e}}var defineProperty=function(){try{var e=getNative(Object,"defineProperty");return e({},"",{}),e}catch{}}(),baseSetToString=defineProperty?function(e,n){return defineProperty(e,"toString",{configurable:!0,enumerable:!1,value:constant(n),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);function arrayEach(e,n){for(var r=-1,g=e==null?0:e.length;++r<g&&n(e[r],r,e)!==!1;);return e}function baseFindIndex(e,n,r,g){for(var y=e.length,k=r+(g?1:-1);g?k--:++k<y;)if(n(e[k],k,e))return k;return-1}function baseIsNaN(e){return e!==e}function strictIndexOf(e,n,r){for(var g=r-1,y=e.length;++g<y;)if(e[g]===n)return g;return-1}function baseIndexOf(e,n,r){return n===n?strictIndexOf(e,n,r):baseFindIndex(e,baseIsNaN,r)}function arrayIncludes(e,n){var r=e==null?0:e.length;return!!r&&baseIndexOf(e,n,0)>-1}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(e,n){var r=typeof e;return n=n??MAX_SAFE_INTEGER$1,!!n&&(r=="number"||r!="symbol"&&reIsUint.test(e))&&e>-1&&e%1==0&&e<n}function baseAssignValue(e,n,r){n=="__proto__"&&defineProperty?defineProperty(e,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[n]=r}function eq(e,n){return e===n||e!==e&&n!==n}var objectProto$c=Object.prototype,hasOwnProperty$b=objectProto$c.hasOwnProperty;function assignValue(e,n,r){var g=e[n];(!(hasOwnProperty$b.call(e,n)&&eq(g,r))||r===void 0&&!(n in e))&&baseAssignValue(e,n,r)}function copyObject(e,n,r,g){var y=!r;r||(r={});for(var k=-1,$=n.length;++k<$;){var V=n[k],L=g?g(r[V],e[V],V,r,e):void 0;L===void 0&&(L=e[V]),y?baseAssignValue(r,V,L):assignValue(r,V,L)}return r}var nativeMax$2=Math.max;function overRest(e,n,r){return n=nativeMax$2(n===void 0?e.length-1:n,0),function(){for(var g=arguments,y=-1,k=nativeMax$2(g.length-n,0),$=Array(k);++y<k;)$[y]=g[n+y];y=-1;for(var V=Array(n+1);++y<n;)V[y]=g[y];return V[n]=r($),apply$1(e,this,V)}}function baseRest(e,n){return setToString(overRest(e,n,identity),e+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isArrayLike(e){return e!=null&&isLength(e.length)&&!isFunction$1(e)}function isIterateeCall(e,n,r){if(!isObject$2(r))return!1;var g=typeof n;return(g=="number"?isArrayLike(r)&&isIndex(n,r.length):g=="string"&&n in r)?eq(r[n],e):!1}function createAssigner(e){return baseRest(function(n,r){var g=-1,y=r.length,k=y>1?r[y-1]:void 0,$=y>2?r[2]:void 0;for(k=e.length>3&&typeof k=="function"?(y--,k):void 0,$&&isIterateeCall(r[0],r[1],$)&&(k=y<3?void 0:k,y=1),n=Object(n);++g<y;){var V=r[g];V&&e(n,V,g,k)}return n})}var objectProto$b=Object.prototype;function isPrototype(e){var n=e&&e.constructor,r=typeof n=="function"&&n.prototype||objectProto$b;return e===r}function baseTimes(e,n){for(var r=-1,g=Array(e);++r<e;)g[r]=n(r);return g}var argsTag$3="[object Arguments]";function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==argsTag$3}var objectProto$a=Object.prototype,hasOwnProperty$a=objectProto$a.hasOwnProperty,propertyIsEnumerable$1=objectProto$a.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&hasOwnProperty$a.call(e,"callee")&&!propertyIsEnumerable$1.call(e,"callee")};function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$3=moduleExports$2?root.Buffer:void 0,nativeIsBuffer=Buffer$3?Buffer$3.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!typedArrayTags[baseGetTag(e)]}function baseUnary(e){return function(n){return e(n)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=function(){try{var e=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return e||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$9=Object.prototype,hasOwnProperty$9=objectProto$9.hasOwnProperty;function arrayLikeKeys(e,n){var r=isArray$1(e),g=!r&&isArguments(e),y=!r&&!g&&isBuffer(e),k=!r&&!g&&!y&&isTypedArray(e),$=r||g||y||k,V=$?baseTimes(e.length,String):[],L=V.length;for(var z in e)(n||hasOwnProperty$9.call(e,z))&&!($&&(z=="length"||y&&(z=="offset"||z=="parent")||k&&(z=="buffer"||z=="byteLength"||z=="byteOffset")||isIndex(z,L)))&&V.push(z);return V}function overArg(e,n){return function(r){return e(n(r))}}var nativeKeys=overArg(Object.keys,Object),objectProto$8=Object.prototype,hasOwnProperty$8=objectProto$8.hasOwnProperty;function baseKeys(e){if(!isPrototype(e))return nativeKeys(e);var n=[];for(var r in Object(e))hasOwnProperty$8.call(e,r)&&r!="constructor"&&n.push(r);return n}function keys$1(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function nativeKeysIn(e){var n=[];if(e!=null)for(var r in Object(e))n.push(r);return n}var objectProto$7=Object.prototype,hasOwnProperty$7=objectProto$7.hasOwnProperty;function baseKeysIn(e){if(!isObject$2(e))return nativeKeysIn(e);var n=isPrototype(e),r=[];for(var g in e)g=="constructor"&&(n||!hasOwnProperty$7.call(e,g))||r.push(g);return r}function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(e,n){if(isArray$1(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||isSymbol(e)?!0:reIsPlainProp.test(e)||!reIsDeepProp.test(e)||n!=null&&e in Object(n)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty;function hashGet(e){var n=this.__data__;if(nativeCreate){var r=n[e];return r===HASH_UNDEFINED$2?void 0:r}return hasOwnProperty$6.call(n,e)?n[e]:void 0}var objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function hashHas(e){var n=this.__data__;return nativeCreate?n[e]!==void 0:hasOwnProperty$5.call(n,e)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,n){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=nativeCreate&&n===void 0?HASH_UNDEFINED$1:n,this}function Hash(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var g=e[n];this.set(g[0],g[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(e,n){for(var r=e.length;r--;)if(eq(e[r][0],n))return r;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(e){var n=this.__data__,r=assocIndexOf(n,e);if(r<0)return!1;var g=n.length-1;return r==g?n.pop():splice.call(n,r,1),--this.size,!0}function listCacheGet(e){var n=this.__data__,r=assocIndexOf(n,e);return r<0?void 0:n[r][1]}function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,n){var r=this.__data__,g=assocIndexOf(r,e);return g<0?(++this.size,r.push([e,n])):r[g][1]=n,this}function ListCache(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var g=e[n];this.set(g[0],g[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function getMapData(e,n){var r=e.__data__;return isKeyable(n)?r[typeof n=="string"?"string":"hash"]:r.map}function mapCacheDelete(e){var n=getMapData(this,e).delete(e);return this.size-=n?1:0,n}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,n){var r=getMapData(this,e),g=r.size;return r.set(e,n),this.size+=r.size==g?0:1,this}function MapCache(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var g=e[n];this.set(g[0],g[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$2="Expected a function";function memoize(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new TypeError(FUNC_ERROR_TEXT$2);var r=function(){var g=arguments,y=n?n.apply(this,g):g[0],k=r.cache;if(k.has(y))return k.get(y);var $=e.apply(this,g);return r.cache=k.set(y,$)||k,$};return r.cache=new(memoize.Cache||MapCache),r}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var n=memoize(e,function(g){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),g}),r=n.cache;return n}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(rePropName,function(r,g,y,k){n.push(y?k.replace(reEscapeChar,"$1"):g||r)}),n});function toString(e){return e==null?"":baseToString(e)}function castPath(e,n){return isArray$1(e)?e:isKey(e,n)?[e]:stringToPath(toString(e))}var INFINITY$2=1/0;function toKey(e){if(typeof e=="string"||isSymbol(e))return e;var n=e+"";return n=="0"&&1/e==-INFINITY$2?"-0":n}function baseGet(e,n){n=castPath(n,e);for(var r=0,g=n.length;e!=null&&r<g;)e=e[toKey(n[r++])];return r&&r==g?e:void 0}function get(e,n,r){var g=e==null?void 0:baseGet(e,n);return g===void 0?r:g}function arrayPush(e,n){for(var r=-1,g=n.length,y=e.length;++r<g;)e[y+r]=n[r];return e}var spreadableSymbol=Symbol$1?Symbol$1.isConcatSpreadable:void 0;function isFlattenable(e){return isArray$1(e)||isArguments(e)||!!(spreadableSymbol&&e&&e[spreadableSymbol])}function baseFlatten(e,n,r,g,y){var k=-1,$=e.length;for(r||(r=isFlattenable),y||(y=[]);++k<$;){var V=e[k];n>0&&r(V)?n>1?baseFlatten(V,n-1,r,g,y):arrayPush(y,V):g||(y[y.length]=V)}return y}function flatten$1(e){var n=e==null?0:e.length;return n?baseFlatten(e,1):[]}function flatRest(e){return setToString(overRest(e,void 0,flatten$1),e+"")}var getPrototype=overArg(Object.getPrototypeOf,Object);const getPrototype$1=getPrototype;var objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$4=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$4=objectProto$4.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$1(e){if(!isObjectLike(e)||baseGetTag(e)!=objectTag$3)return!1;var n=getPrototype$1(e);if(n===null)return!0;var r=hasOwnProperty$4.call(n,"constructor")&&n.constructor;return typeof r=="function"&&r instanceof r&&funcToString.call(r)==objectCtorString}function castArray$1(){if(!arguments.length)return[];var e=arguments[0];return isArray$1(e)?e:[e]}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}function stackGet(e){return this.__data__.get(e)}function stackHas(e){return this.__data__.has(e)}var LARGE_ARRAY_SIZE$1=200;function stackSet(e,n){var r=this.__data__;if(r instanceof ListCache){var g=r.__data__;if(!Map$1||g.length<LARGE_ARRAY_SIZE$1-1)return g.push([e,n]),this.size=++r.size,this;r=this.__data__=new MapCache(g)}return r.set(e,n),this.size=r.size,this}function Stack$1(e){var n=this.__data__=new ListCache(e);this.size=n.size}Stack$1.prototype.clear=stackClear;Stack$1.prototype.delete=stackDelete;Stack$1.prototype.get=stackGet;Stack$1.prototype.has=stackHas;Stack$1.prototype.set=stackSet;function baseAssign(e,n){return e&&copyObject(n,keys$1(n),e)}function baseAssignIn(e,n){return e&&copyObject(n,keysIn(n),e)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$2=moduleExports?root.Buffer:void 0,allocUnsafe=Buffer$2?Buffer$2.allocUnsafe:void 0;function cloneBuffer(e,n){if(n)return e.slice();var r=e.length,g=allocUnsafe?allocUnsafe(r):new e.constructor(r);return e.copy(g),g}function arrayFilter(e,n){for(var r=-1,g=e==null?0:e.length,y=0,k=[];++r<g;){var $=e[r];n($,r,e)&&(k[y++]=$)}return k}function stubArray(){return[]}var objectProto$3=Object.prototype,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(e){return e==null?[]:(e=Object(e),arrayFilter(nativeGetSymbols$1(e),function(n){return propertyIsEnumerable.call(e,n)}))}:stubArray;function copySymbols(e,n){return copyObject(e,getSymbols(e),n)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(e){for(var n=[];e;)arrayPush(n,getSymbols(e)),e=getPrototype$1(e);return n}:stubArray;function copySymbolsIn(e,n){return copyObject(e,getSymbolsIn(e),n)}function baseGetAllKeys(e,n,r){var g=n(e);return isArray$1(e)?g:arrayPush(g,r(e))}function getAllKeys(e){return baseGetAllKeys(e,keys$1,getSymbols)}function getAllKeysIn(e){return baseGetAllKeys(e,keysIn,getSymbolsIn)}var DataView$1=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set$1=getNative(root,"Set"),mapTag$4="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$3||Map$1&&getTag(new Map$1)!=mapTag$4||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set$1&&getTag(new Set$1)!=setTag$4||WeakMap$1&&getTag(new WeakMap$1)!=weakMapTag$1)&&(getTag=function(e){var n=baseGetTag(e),r=n==objectTag$2?e.constructor:void 0,g=r?toSource(r):"";if(g)switch(g){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return n});const getTag$1=getTag;var objectProto$2=Object.prototype,hasOwnProperty$3=objectProto$2.hasOwnProperty;function initCloneArray(e){var n=e.length,r=new e.constructor(n);return n&&typeof e[0]=="string"&&hasOwnProperty$3.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var Uint8Array$1=root.Uint8Array;function cloneArrayBuffer(e){var n=new e.constructor(e.byteLength);return new Uint8Array$1(n).set(new Uint8Array$1(e)),n}function cloneDataView(e,n){var r=n?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var reFlags=/\w*$/;function cloneRegExp(e){var n=new e.constructor(e.source,reFlags.exec(e));return n.lastIndex=e.lastIndex,n}var symbolProto$1=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(e){return symbolValueOf$1?Object(symbolValueOf$1.call(e)):{}}function cloneTypedArray(e,n){var r=n?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(e,n,r){var g=e.constructor;switch(n){case arrayBufferTag$2:return cloneArrayBuffer(e);case boolTag$2:case dateTag$2:return new g(+e);case dataViewTag$2:return cloneDataView(e,r);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(e,r);case mapTag$3:return new g;case numberTag$2:case stringTag$2:return new g(e);case regexpTag$2:return cloneRegExp(e);case setTag$3:return new g;case symbolTag$2:return cloneSymbol(e)}}function initCloneObject(e){return typeof e.constructor=="function"&&!isPrototype(e)?baseCreate(getPrototype$1(e)):{}}var mapTag$2="[object Map]";function baseIsMap(e){return isObjectLike(e)&&getTag$1(e)==mapTag$2}var nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,setTag$2="[object Set]";function baseIsSet(e){return isObjectLike(e)&&getTag$1(e)==setTag$2}var nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$2=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(e,n,r,g,y,k){var $,V=n&CLONE_DEEP_FLAG$1,L=n&CLONE_FLAT_FLAG,z=n&CLONE_SYMBOLS_FLAG$2;if(r&&($=y?r(e,g,y,k):r(e)),$!==void 0)return $;if(!isObject$2(e))return e;var j=isArray$1(e);if(j){if($=initCloneArray(e),!V)return copyArray(e,$)}else{var ae=getTag$1(e),oe=ae==funcTag||ae==genTag;if(isBuffer(e))return cloneBuffer(e,V);if(ae==objectTag$1||ae==argsTag$1||oe&&!y){if($=L||oe?{}:initCloneObject(e),!V)return L?copySymbolsIn(e,baseAssignIn($,e)):copySymbols(e,baseAssign($,e))}else{if(!cloneableTags[ae])return y?e:{};$=initCloneByTag(e,ae,V)}}k||(k=new Stack$1);var re=k.get(e);if(re)return re;k.set(e,$),isSet(e)?e.forEach(function(de){$.add(baseClone(de,n,r,de,e,k))}):isMap(e)&&e.forEach(function(de,he){$.set(he,baseClone(de,n,r,he,e,k))});var ue=z?L?getAllKeysIn:getAllKeys:L?keysIn:keys$1,le=j?void 0:ue(e);return arrayEach(le||e,function(de,he){le&&(he=de,de=e[he]),assignValue($,he,baseClone(de,n,r,he,e,k))}),$}var CLONE_SYMBOLS_FLAG$1=4;function clone$1(e){return baseClone(e,CLONE_SYMBOLS_FLAG$1)}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(e){return baseClone(e,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED),this}function setCacheHas(e){return this.__data__.has(e)}function SetCache(e){var n=-1,r=e==null?0:e.length;for(this.__data__=new MapCache;++n<r;)this.add(e[n])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(e,n){for(var r=-1,g=e==null?0:e.length;++r<g;)if(n(e[r],r,e))return!0;return!1}function cacheHas(e,n){return e.has(n)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(e,n,r,g,y,k){var $=r&COMPARE_PARTIAL_FLAG$5,V=e.length,L=n.length;if(V!=L&&!($&&L>V))return!1;var z=k.get(e),j=k.get(n);if(z&&j)return z==n&&j==e;var ae=-1,oe=!0,re=r&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(k.set(e,n),k.set(n,e);++ae<V;){var ue=e[ae],le=n[ae];if(g)var de=$?g(le,ue,ae,n,e,k):g(ue,le,ae,e,n,k);if(de!==void 0){if(de)continue;oe=!1;break}if(re){if(!arraySome(n,function(he,_e){if(!cacheHas(re,_e)&&(ue===he||y(ue,he,r,g,k)))return re.push(_e)})){oe=!1;break}}else if(!(ue===le||y(ue,le,r,g,k))){oe=!1;break}}return k.delete(e),k.delete(n),oe}function mapToArray(e){var n=-1,r=Array(e.size);return e.forEach(function(g,y){r[++n]=[y,g]}),r}function setToArray(e){var n=-1,r=Array(e.size);return e.forEach(function(g){r[++n]=g}),r}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(e,n,r,g,y,k,$){switch(r){case dataViewTag:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case arrayBufferTag:return!(e.byteLength!=n.byteLength||!k(new Uint8Array$1(e),new Uint8Array$1(n)));case boolTag:case dateTag:case numberTag:return eq(+e,+n);case errorTag:return e.name==n.name&&e.message==n.message;case regexpTag:case stringTag:return e==n+"";case mapTag:var V=mapToArray;case setTag:var L=g&COMPARE_PARTIAL_FLAG$4;if(V||(V=setToArray),e.size!=n.size&&!L)return!1;var z=$.get(e);if(z)return z==n;g|=COMPARE_UNORDERED_FLAG$2,$.set(e,n);var j=equalArrays(V(e),V(n),g,y,k,$);return $.delete(e),j;case symbolTag:if(symbolValueOf)return symbolValueOf.call(e)==symbolValueOf.call(n)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$2=objectProto$1.hasOwnProperty;function equalObjects(e,n,r,g,y,k){var $=r&COMPARE_PARTIAL_FLAG$3,V=getAllKeys(e),L=V.length,z=getAllKeys(n),j=z.length;if(L!=j&&!$)return!1;for(var ae=L;ae--;){var oe=V[ae];if(!($?oe in n:hasOwnProperty$2.call(n,oe)))return!1}var re=k.get(e),ue=k.get(n);if(re&&ue)return re==n&&ue==e;var le=!0;k.set(e,n),k.set(n,e);for(var de=$;++ae<L;){oe=V[ae];var he=e[oe],_e=n[oe];if(g)var xe=$?g(_e,he,oe,n,e,k):g(he,_e,oe,e,n,k);if(!(xe===void 0?he===_e||y(he,_e,r,g,k):xe)){le=!1;break}de||(de=oe=="constructor")}if(le&&!de){var Ne=e.constructor,$e=n.constructor;Ne!=$e&&"constructor"in e&&"constructor"in n&&!(typeof Ne=="function"&&Ne instanceof Ne&&typeof $e=="function"&&$e instanceof $e)&&(le=!1)}return k.delete(e),k.delete(n),le}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty$1=objectProto.hasOwnProperty;function baseIsEqualDeep(e,n,r,g,y,k){var $=isArray$1(e),V=isArray$1(n),L=$?arrayTag:getTag$1(e),z=V?arrayTag:getTag$1(n);L=L==argsTag?objectTag:L,z=z==argsTag?objectTag:z;var j=L==objectTag,ae=z==objectTag,oe=L==z;if(oe&&isBuffer(e)){if(!isBuffer(n))return!1;$=!0,j=!1}if(oe&&!j)return k||(k=new Stack$1),$||isTypedArray(e)?equalArrays(e,n,r,g,y,k):equalByTag(e,n,L,r,g,y,k);if(!(r&COMPARE_PARTIAL_FLAG$2)){var re=j&&hasOwnProperty$1.call(e,"__wrapped__"),ue=ae&&hasOwnProperty$1.call(n,"__wrapped__");if(re||ue){var le=re?e.value():e,de=ue?n.value():n;return k||(k=new Stack$1),y(le,de,r,g,k)}}return oe?(k||(k=new Stack$1),equalObjects(e,n,r,g,y,k)):!1}function baseIsEqual(e,n,r,g,y){return e===n?!0:e==null||n==null||!isObjectLike(e)&&!isObjectLike(n)?e!==e&&n!==n:baseIsEqualDeep(e,n,r,g,baseIsEqual,y)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(e,n,r,g){var y=r.length,k=y,$=!g;if(e==null)return!k;for(e=Object(e);y--;){var V=r[y];if($&&V[2]?V[1]!==e[V[0]]:!(V[0]in e))return!1}for(;++y<k;){V=r[y];var L=V[0],z=e[L],j=V[1];if($&&V[2]){if(z===void 0&&!(L in e))return!1}else{var ae=new Stack$1;if(g)var oe=g(z,j,L,e,n,ae);if(!(oe===void 0?baseIsEqual(j,z,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,g,ae):oe))return!1}}return!0}function isStrictComparable(e){return e===e&&!isObject$2(e)}function getMatchData(e){for(var n=keys$1(e),r=n.length;r--;){var g=n[r],y=e[g];n[r]=[g,y,isStrictComparable(y)]}return n}function matchesStrictComparable(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}function baseMatches(e){var n=getMatchData(e);return n.length==1&&n[0][2]?matchesStrictComparable(n[0][0],n[0][1]):function(r){return r===e||baseIsMatch(r,e,n)}}function baseHasIn(e,n){return e!=null&&n in Object(e)}function hasPath(e,n,r){n=castPath(n,e);for(var g=-1,y=n.length,k=!1;++g<y;){var $=toKey(n[g]);if(!(k=e!=null&&r(e,$)))break;e=e[$]}return k||++g!=y?k:(y=e==null?0:e.length,!!y&&isLength(y)&&isIndex($,y)&&(isArray$1(e)||isArguments(e)))}function hasIn(e,n){return e!=null&&hasPath(e,n,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(e,n){return isKey(e)&&isStrictComparable(n)?matchesStrictComparable(toKey(e),n):function(r){var g=get(r,e);return g===void 0&&g===n?hasIn(r,e):baseIsEqual(n,g,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(e){return function(n){return n?.[e]}}function basePropertyDeep(e){return function(n){return baseGet(n,e)}}function property(e){return isKey(e)?baseProperty(toKey(e)):basePropertyDeep(e)}function baseIteratee(e){return typeof e=="function"?e:e==null?identity:typeof e=="object"?isArray$1(e)?baseMatchesProperty(e[0],e[1]):baseMatches(e):property(e)}function createBaseFor(e){return function(n,r,g){for(var y=-1,k=Object(n),$=g(n),V=$.length;V--;){var L=$[e?V:++y];if(r(k[L],L,k)===!1)break}return n}}var baseFor=createBaseFor();function baseForOwn(e,n){return e&&baseFor(e,n,keys$1)}function createBaseEach(e,n){return function(r,g){if(r==null)return r;if(!isArrayLike(r))return e(r,g);for(var y=r.length,k=n?y:-1,$=Object(r);(n?k--:++k<y)&&g($[k],k,$)!==!1;);return r}}var baseEach=createBaseEach(baseForOwn),now=function(){return root.Date.now()},FUNC_ERROR_TEXT$1="Expected a function",nativeMax$1=Math.max,nativeMin$1=Math.min;function debounce(e,n,r){var g,y,k,$,V,L,z=0,j=!1,ae=!1,oe=!0;if(typeof e!="function")throw new TypeError(FUNC_ERROR_TEXT$1);n=toNumber(n)||0,isObject$2(r)&&(j=!!r.leading,ae="maxWait"in r,k=ae?nativeMax$1(toNumber(r.maxWait)||0,n):k,oe="trailing"in r?!!r.trailing:oe);function re(Ce){var Ie=g,ze=y;return g=y=void 0,z=Ce,$=e.apply(ze,Ie),$}function ue(Ce){return z=Ce,V=setTimeout(he,n),j?re(Ce):$}function le(Ce){var Ie=Ce-L,ze=Ce-z,Ue=n-Ie;return ae?nativeMin$1(Ue,k-ze):Ue}function de(Ce){var Ie=Ce-L,ze=Ce-z;return L===void 0||Ie>=n||Ie<0||ae&&ze>=k}function he(){var Ce=now();if(de(Ce))return _e(Ce);V=setTimeout(he,le(Ce))}function _e(Ce){return V=void 0,oe&&g?re(Ce):(g=y=void 0,$)}function xe(){V!==void 0&&clearTimeout(V),z=0,g=L=y=V=void 0}function Ne(){return V===void 0?$:_e(now())}function $e(){var Ce=now(),Ie=de(Ce);if(g=arguments,y=this,L=Ce,Ie){if(V===void 0)return ue(L);if(ae)return clearTimeout(V),V=setTimeout(he,n),re(L)}return V===void 0&&(V=setTimeout(he,n)),$}return $e.cancel=xe,$e.flush=Ne,$e}function assignMergeValue(e,n,r){(r!==void 0&&!eq(e[n],r)||r===void 0&&!(n in e))&&baseAssignValue(e,n,r)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function safeGet(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}function toPlainObject(e){return copyObject(e,keysIn(e))}function baseMergeDeep(e,n,r,g,y,k,$){var V=safeGet(e,r),L=safeGet(n,r),z=$.get(L);if(z){assignMergeValue(e,r,z);return}var j=k?k(V,L,r+"",e,n,$):void 0,ae=j===void 0;if(ae){var oe=isArray$1(L),re=!oe&&isBuffer(L),ue=!oe&&!re&&isTypedArray(L);j=L,oe||re||ue?isArray$1(V)?j=V:isArrayLikeObject(V)?j=copyArray(V):re?(ae=!1,j=cloneBuffer(L,!0)):ue?(ae=!1,j=cloneTypedArray(L,!0)):j=[]:isPlainObject$1(L)||isArguments(L)?(j=V,isArguments(V)?j=toPlainObject(V):(!isObject$2(V)||isFunction$1(V))&&(j=initCloneObject(L))):ae=!1}ae&&($.set(L,j),y(j,L,g,k,$),$.delete(L)),assignMergeValue(e,r,j)}function baseMerge(e,n,r,g,y){e!==n&&baseFor(n,function(k,$){if(y||(y=new Stack$1),isObject$2(k))baseMergeDeep(e,n,$,r,baseMerge,g,y);else{var V=g?g(safeGet(e,$),k,$+"",e,n,y):void 0;V===void 0&&(V=k),assignMergeValue(e,$,V)}},keysIn)}function arrayIncludesWith(e,n,r){for(var g=-1,y=e==null?0:e.length;++g<y;)if(r(n,e[g]))return!0;return!1}var nativeMax=Math.max,nativeMin=Math.min;function findLastIndex(e,n,r){var g=e==null?0:e.length;if(!g)return-1;var y=g-1;return r!==void 0&&(y=toInteger(r),y=r<0?nativeMax(g+y,0):nativeMin(y,g-1)),baseFindIndex(e,baseIteratee(n),y,!0)}function baseMap(e,n){var r=-1,g=isArrayLike(e)?Array(e.length):[];return baseEach(e,function(y,k,$){g[++r]=n(y,k,$)}),g}function map(e,n){var r=isArray$1(e)?arrayMap:baseMap;return r(e,baseIteratee(n))}function flatMap(e,n){return baseFlatten(map(e,n),1)}var INFINITY$1=1/0;function flattenDeep(e){var n=e==null?0:e.length;return n?baseFlatten(e,INFINITY$1):[]}function fromPairs(e){for(var n=-1,r=e==null?0:e.length,g={};++n<r;){var y=e[n];g[y[0]]=y[1]}return g}function isEqual$1(e,n){return baseIsEqual(e,n)}function isNil(e){return e==null}function isUndefined$1(e){return e===void 0}var merge=createAssigner(function(e,n,r){baseMerge(e,n,r)});const merge$1=merge;function baseSet(e,n,r,g){if(!isObject$2(e))return e;n=castPath(n,e);for(var y=-1,k=n.length,$=k-1,V=e;V!=null&&++y<k;){var L=toKey(n[y]),z=r;if(L==="__proto__"||L==="constructor"||L==="prototype")return e;if(y!=$){var j=V[L];z=g?g(j,L,V):void 0,z===void 0&&(z=isObject$2(j)?j:isIndex(n[y+1])?[]:{})}assignValue(V,L,z),V=V[L]}return e}function basePickBy(e,n,r){for(var g=-1,y=n.length,k={};++g<y;){var $=n[g],V=baseGet(e,$);r(V,$)&&baseSet(k,castPath($,e),V)}return k}function basePick(e,n){return basePickBy(e,n,function(r,g){return hasIn(e,g)})}var pick=flatRest(function(e,n){return e==null?{}:basePick(e,n)});function set(e,n,r){return e==null?e:baseSet(e,n,r)}var FUNC_ERROR_TEXT="Expected a function";function throttle$1(e,n,r){var g=!0,y=!0;if(typeof e!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$2(r)&&(g="leading"in r?!!r.leading:g,y="trailing"in r?!!r.trailing:y),debounce(e,n,{leading:g,maxWait:n,trailing:y})}var INFINITY=1/0,createSet=Set$1&&1/setToArray(new Set$1([,-0]))[1]==INFINITY?function(e){return new Set$1(e)}:noop$3,LARGE_ARRAY_SIZE=200;function baseUniq(e,n,r){var g=-1,y=arrayIncludes,k=e.length,$=!0,V=[],L=V;if(r)$=!1,y=arrayIncludesWith;else if(k>=LARGE_ARRAY_SIZE){var z=n?null:createSet(e);if(z)return setToArray(z);$=!1,y=cacheHas,L=new SetCache}else L=n?[]:V;e:for(;++g<k;){var j=e[g],ae=n?n(j):j;if(j=r||j!==0?j:0,$&&ae===ae){for(var oe=L.length;oe--;)if(L[oe]===ae)continue e;n&&L.push(ae),V.push(j)}else y(L,ae,r)||(L!==V&&L.push(ae),V.push(j))}return V}var union=baseRest(function(e){return baseUniq(baseFlatten(e,1,isArrayLikeObject,!0))});const isUndefined=e=>e===void 0,isBoolean$1=e=>typeof e=="boolean",isNumber$1=e=>typeof e=="number",isEmpty=e=>!e&&e!==0||isArray$3(e)&&e.length===0||isObject$3(e)&&!Object.keys(e).length,isElement$1=e=>typeof Element>"u"?!1:e instanceof Element,isPropAbsent=e=>isNil(e),isStringNumber=e=>isString$3(e)?!Number.isNaN(Number(e)):!1,escapeStringRegexp=(e="")=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),capitalize$1=e=>capitalize$2(e),keysOf=e=>Object.keys(e),entriesOf=e=>Object.entries(e),getProp=(e,n,r)=>({get value(){return get(e,n,r)},set value(g){set(e,n,g)}});class ElementPlusError extends Error{constructor(n){super(n),this.name="ElementPlusError"}}function throwError(e,n){throw new ElementPlusError(`[${e}] ${n}`)}function debugWarn(e,n){}const classNameToArray=(e="")=>e.split(" ").filter(n=>!!n.trim()),hasClass=(e,n)=>{if(!e||!n)return!1;if(n.includes(" "))throw new Error("className should not contain space.");return e.classList.contains(n)},addClass=(e,n)=>{!e||!n.trim()||e.classList.add(...classNameToArray(n))},removeClass=(e,n)=>{!e||!n.trim()||e.classList.remove(...classNameToArray(n))},getStyle=(e,n)=>{var r;if(!isClient||!e||!n)return"";let g=camelize(n);g==="float"&&(g="cssFloat");try{const y=e.style[g];if(y)return y;const k=(r=document.defaultView)==null?void 0:r.getComputedStyle(e,"");return k?k[g]:""}catch{return e.style[g]}};function addUnit(e,n="px"){if(!e)return"";if(isNumber$1(e)||isStringNumber(e))return`${e}${n}`;if(isString$3(e))return e}const isScroll=(e,n)=>{if(!isClient)return!1;const r={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(n)],g=getStyle(e,r);return["scroll","auto","overlay"].some(y=>g.includes(y))},getScrollContainer=(e,n)=>{if(!isClient)return;let r=e;for(;r;){if([window,document,document.documentElement].includes(r))return window;if(isScroll(r,n))return r;r=r.parentNode}return r};let scrollBarWidth;const getScrollBarWidth=e=>{var n;if(!isClient)return 0;if(scrollBarWidth!==void 0)return scrollBarWidth;const r=document.createElement("div");r.className=`${e}-scrollbar__wrap`,r.style.visibility="hidden",r.style.width="100px",r.style.position="absolute",r.style.top="-9999px",document.body.appendChild(r);const g=r.offsetWidth;r.style.overflow="scroll";const y=document.createElement("div");y.style.width="100%",r.appendChild(y);const k=y.offsetWidth;return(n=r.parentNode)==null||n.removeChild(r),scrollBarWidth=g-k,scrollBarWidth};function scrollIntoView$2(e,n){if(!isClient)return;if(!n){e.scrollTop=0;return}const r=[];let g=n.offsetParent;for(;g!==null&&e!==g&&e.contains(g);)r.push(g),g=g.offsetParent;const y=n.offsetTop+r.reduce((L,z)=>L+z.offsetTop,0),k=y+n.offsetHeight,$=e.scrollTop,V=$+e.clientHeight;y<$?e.scrollTop=y:k>V&&(e.scrollTop=k-e.clientHeight)}/*! Element Plus Icons Vue v2.1.0 */var export_helper_default=(e,n)=>{let r=e.__vccOpts||e;for(let[g,y]of n)r[g]=y;return r},arrow_down_vue_vue_type_script_lang_default={name:"ArrowDown"},_hoisted_16$k={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_26$6=createBaseVNode("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"},null,-1),_hoisted_36$2=[_hoisted_26$6];function _sfc_render6(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_16$k,_hoisted_36$2)}var arrow_down_default=export_helper_default(arrow_down_vue_vue_type_script_lang_default,[["render",_sfc_render6],["__file","arrow-down.vue"]]),arrow_left_bold_vue_vue_type_script_lang_default={name:"ArrowLeftBold"},_hoisted_17$i={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_27$6=createBaseVNode("path",{fill:"currentColor",d:"M685.248 104.704a64 64 0 0 1 0 90.496L368.448 512l316.8 316.8a64 64 0 0 1-90.496 90.496L232.704 557.248a64 64 0 0 1 0-90.496l362.048-362.048a64 64 0 0 1 90.496 0z"},null,-1),_hoisted_37$2=[_hoisted_27$6];function _sfc_render7(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_17$i,_hoisted_37$2)}var arrow_left_bold_default=export_helper_default(arrow_left_bold_vue_vue_type_script_lang_default,[["render",_sfc_render7],["__file","arrow-left-bold.vue"]]),arrow_left_vue_vue_type_script_lang_default={name:"ArrowLeft"},_hoisted_18$g={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_28$6=createBaseVNode("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"},null,-1),_hoisted_38$2=[_hoisted_28$6];function _sfc_render8(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_18$g,_hoisted_38$2)}var arrow_left_default=export_helper_default(arrow_left_vue_vue_type_script_lang_default,[["render",_sfc_render8],["__file","arrow-left.vue"]]),arrow_right_bold_vue_vue_type_script_lang_default={name:"ArrowRightBold"},_hoisted_19$g={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_29$6=createBaseVNode("path",{fill:"currentColor",d:"M338.752 104.704a64 64 0 0 0 0 90.496l316.8 316.8-316.8 316.8a64 64 0 0 0 90.496 90.496l362.048-362.048a64 64 0 0 0 0-90.496L429.248 104.704a64 64 0 0 0-90.496 0z"},null,-1),_hoisted_39$2=[_hoisted_29$6];function _sfc_render9(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_19$g,_hoisted_39$2)}var arrow_right_bold_default=export_helper_default(arrow_right_bold_vue_vue_type_script_lang_default,[["render",_sfc_render9],["__file","arrow-right-bold.vue"]]),arrow_right_vue_vue_type_script_lang_default={name:"ArrowRight"},_hoisted_110={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_210=createBaseVNode("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"},null,-1),_hoisted_310=[_hoisted_210];function _sfc_render10(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_110,_hoisted_310)}var arrow_right_default=export_helper_default(arrow_right_vue_vue_type_script_lang_default,[["render",_sfc_render10],["__file","arrow-right.vue"]]),arrow_up_vue_vue_type_script_lang_default={name:"ArrowUp"},_hoisted_112={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_212=createBaseVNode("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z"},null,-1),_hoisted_312=[_hoisted_212];function _sfc_render12(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_112,_hoisted_312)}var arrow_up_default=export_helper_default(arrow_up_vue_vue_type_script_lang_default,[["render",_sfc_render12],["__file","arrow-up.vue"]]),back_vue_vue_type_script_lang_default={name:"Back"},_hoisted_114={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_214=createBaseVNode("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z"},null,-1),_hoisted_314=createBaseVNode("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312L237.248 512z"},null,-1),_hoisted_44$2=[_hoisted_214,_hoisted_314];function _sfc_render14(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_114,_hoisted_44$2)}var back_default=export_helper_default(back_vue_vue_type_script_lang_default,[["render",_sfc_render14],["__file","back.vue"]]),calendar_vue_vue_type_script_lang_default={name:"Calendar"},_hoisted_129={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_229=createBaseVNode("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64H128zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0v32zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64z"},null,-1),_hoisted_328=[_hoisted_229];function _sfc_render29(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_129,_hoisted_328)}var calendar_default=export_helper_default(calendar_vue_vue_type_script_lang_default,[["render",_sfc_render29],["__file","calendar.vue"]]),caret_right_vue_vue_type_script_lang_default={name:"CaretRight"},_hoisted_134={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_234=createBaseVNode("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"},null,-1),_hoisted_333=[_hoisted_234];function _sfc_render34(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_134,_hoisted_333)}var caret_right_default=export_helper_default(caret_right_vue_vue_type_script_lang_default,[["render",_sfc_render34],["__file","caret-right.vue"]]),caret_top_vue_vue_type_script_lang_default={name:"CaretTop"},_hoisted_135={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_235=createBaseVNode("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"},null,-1),_hoisted_334=[_hoisted_235];function _sfc_render35(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_135,_hoisted_334)}var caret_top_default=export_helper_default(caret_top_vue_vue_type_script_lang_default,[["render",_sfc_render35],["__file","caret-top.vue"]]),check_vue_vue_type_script_lang_default={name:"Check"},_hoisted_143={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_243=createBaseVNode("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"},null,-1),_hoisted_342=[_hoisted_243];function _sfc_render43(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_143,_hoisted_342)}var check_default=export_helper_default(check_vue_vue_type_script_lang_default,[["render",_sfc_render43],["__file","check.vue"]]),circle_check_filled_vue_vue_type_script_lang_default={name:"CircleCheckFilled"},_hoisted_148={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_248=createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"},null,-1),_hoisted_347=[_hoisted_248];function _sfc_render48(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_148,_hoisted_347)}var circle_check_filled_default=export_helper_default(circle_check_filled_vue_vue_type_script_lang_default,[["render",_sfc_render48],["__file","circle-check-filled.vue"]]),circle_check_vue_vue_type_script_lang_default={name:"CircleCheck"},_hoisted_149={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_249=createBaseVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),_hoisted_348=createBaseVNode("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"},null,-1),_hoisted_415=[_hoisted_249,_hoisted_348];function _sfc_render49(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_149,_hoisted_415)}var circle_check_default=export_helper_default(circle_check_vue_vue_type_script_lang_default,[["render",_sfc_render49],["__file","circle-check.vue"]]),circle_close_filled_vue_vue_type_script_lang_default={name:"CircleCloseFilled"},_hoisted_150={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_250=createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336L512 457.664z"},null,-1),_hoisted_349=[_hoisted_250];function _sfc_render50(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_150,_hoisted_349)}var circle_close_filled_default=export_helper_default(circle_close_filled_vue_vue_type_script_lang_default,[["render",_sfc_render50],["__file","circle-close-filled.vue"]]),circle_close_vue_vue_type_script_lang_default={name:"CircleClose"},_hoisted_151={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_251=createBaseVNode("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248L466.752 512z"},null,-1),_hoisted_350=createBaseVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),_hoisted_416=[_hoisted_251,_hoisted_350];function _sfc_render51(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_151,_hoisted_416)}var circle_close_default=export_helper_default(circle_close_vue_vue_type_script_lang_default,[["render",_sfc_render51],["__file","circle-close.vue"]]),clock_vue_vue_type_script_lang_default={name:"Clock"},_hoisted_154={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_254=createBaseVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),_hoisted_353=createBaseVNode("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32z"},null,-1),_hoisted_418=createBaseVNode("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32z"},null,-1),_hoisted_56$2=[_hoisted_254,_hoisted_353,_hoisted_418];function _sfc_render54(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_154,_hoisted_56$2)}var clock_default=export_helper_default(clock_vue_vue_type_script_lang_default,[["render",_sfc_render54],["__file","clock.vue"]]),close_vue_vue_type_script_lang_default={name:"Close"},_hoisted_156={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_256=createBaseVNode("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),_hoisted_355=[_hoisted_256];function _sfc_render56(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_156,_hoisted_355)}var close_default=export_helper_default(close_vue_vue_type_script_lang_default,[["render",_sfc_render56],["__file","close.vue"]]),d_arrow_left_vue_vue_type_script_lang_default={name:"DArrowLeft"},_hoisted_172={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_272=createBaseVNode("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"},null,-1),_hoisted_371=[_hoisted_272];function _sfc_render72(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_172,_hoisted_371)}var d_arrow_left_default=export_helper_default(d_arrow_left_vue_vue_type_script_lang_default,[["render",_sfc_render72],["__file","d-arrow-left.vue"]]),d_arrow_right_vue_vue_type_script_lang_default={name:"DArrowRight"},_hoisted_173={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_273=createBaseVNode("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688zm-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"},null,-1),_hoisted_372=[_hoisted_273];function _sfc_render73(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_173,_hoisted_372)}var d_arrow_right_default=export_helper_default(d_arrow_right_vue_vue_type_script_lang_default,[["render",_sfc_render73],["__file","d-arrow-right.vue"]]),delete_vue_vue_type_script_lang_default={name:"Delete"},_hoisted_180={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_280=createBaseVNode("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z"},null,-1),_hoisted_379=[_hoisted_280];function _sfc_render80(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_180,_hoisted_379)}var delete_default=export_helper_default(delete_vue_vue_type_script_lang_default,[["render",_sfc_render80],["__file","delete.vue"]]),document_add_vue_vue_type_script_lang_default={name:"DocumentAdd"},_hoisted_185={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_285=createBaseVNode("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640V384zm-26.496-64L640 154.496V320h165.504zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32zm320 512V448h64v128h128v64H544v128h-64V640H352v-64h128z"},null,-1),_hoisted_384=[_hoisted_285];function _sfc_render85(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_185,_hoisted_384)}var document_add_default=export_helper_default(document_add_vue_vue_type_script_lang_default,[["render",_sfc_render85],["__file","document-add.vue"]]),document_vue_vue_type_script_lang_default={name:"Document"},_hoisted_190={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_290=createBaseVNode("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640V384zm-26.496-64L640 154.496V320h165.504zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32zm160 448h384v64H320v-64zm0-192h160v64H320v-64zm0 384h384v64H320v-64z"},null,-1),_hoisted_389=[_hoisted_290];function _sfc_render90(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_190,_hoisted_389)}var document_default=export_helper_default(document_vue_vue_type_script_lang_default,[["render",_sfc_render90],["__file","document.vue"]]),download_vue_vue_type_script_lang_default={name:"Download"},_hoisted_191={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_291=createBaseVNode("path",{fill:"currentColor",d:"M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64zm384-253.696 236.288-236.352 45.248 45.248L508.8 704 192 387.2l45.248-45.248L480 584.704V128h64v450.304z"},null,-1),_hoisted_390=[_hoisted_291];function _sfc_render91(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_191,_hoisted_390)}var download_default=export_helper_default(download_vue_vue_type_script_lang_default,[["render",_sfc_render91],["__file","download.vue"]]),edit_vue_vue_type_script_lang_default={name:"Edit"},_hoisted_194={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_294=createBaseVNode("path",{fill:"currentColor",d:"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640V512z"},null,-1),_hoisted_393=createBaseVNode("path",{fill:"currentColor",d:"m469.952 554.24 52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"},null,-1),_hoisted_431=[_hoisted_294,_hoisted_393];function _sfc_render94(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_194,_hoisted_431)}var edit_default=export_helper_default(edit_vue_vue_type_script_lang_default,[["render",_sfc_render94],["__file","edit.vue"]]),files_vue_vue_type_script_lang_default={name:"Files"},_hoisted_1101={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2101=createBaseVNode("path",{fill:"currentColor",d:"M128 384v448h768V384H128zm-32-64h832a32 32 0 0 1 32 32v512a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V352a32 32 0 0 1 32-32zm64-128h704v64H160zm96-128h512v64H256z"},null,-1),_hoisted_3100=[_hoisted_2101];function _sfc_render101(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1101,_hoisted_3100)}var files_default=export_helper_default(files_vue_vue_type_script_lang_default,[["render",_sfc_render101],["__file","files.vue"]]),folder_opened_vue_vue_type_script_lang_default={name:"FolderOpened"},_hoisted_1111={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2111=createBaseVNode("path",{fill:"currentColor",d:"M878.08 448H241.92l-96 384h636.16l96-384zM832 384v-64H485.76L357.504 192H128v448l57.92-231.744A32 32 0 0 1 216.96 384H832zm-24.96 512H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h287.872l128.384 128H864a32 32 0 0 1 32 32v96h23.04a32 32 0 0 1 31.04 39.744l-112 448A32 32 0 0 1 807.04 896z"},null,-1),_hoisted_3110=[_hoisted_2111];function _sfc_render111(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1111,_hoisted_3110)}var folder_opened_default=export_helper_default(folder_opened_vue_vue_type_script_lang_default,[["render",_sfc_render111],["__file","folder-opened.vue"]]),full_screen_vue_vue_type_script_lang_default={name:"FullScreen"},_hoisted_1118={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2118=createBaseVNode("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64l-192 .192zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64v-.064z"},null,-1),_hoisted_3117=[_hoisted_2118];function _sfc_render118(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1118,_hoisted_3117)}var full_screen_default=export_helper_default(full_screen_vue_vue_type_script_lang_default,[["render",_sfc_render118],["__file","full-screen.vue"]]),grid_vue_vue_type_script_lang_default={name:"Grid"},_hoisted_1127={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2127=createBaseVNode("path",{fill:"currentColor",d:"M640 384v256H384V384h256zm64 0h192v256H704V384zm-64 512H384V704h256v192zm64 0V704h192v192H704zm-64-768v192H384V128h256zm64 0h192v192H704V128zM320 384v256H128V384h192zm0 512H128V704h192v192zm0-768v192H128V128h192z"},null,-1),_hoisted_3126=[_hoisted_2127];function _sfc_render127(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1127,_hoisted_3126)}var grid_default=export_helper_default(grid_vue_vue_type_script_lang_default,[["render",_sfc_render127],["__file","grid.vue"]]),hide_vue_vue_type_script_lang_default={name:"Hide"},_hoisted_1133={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2133=createBaseVNode("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2L371.2 588.8ZM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"},null,-1),_hoisted_3132=createBaseVNode("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"},null,-1),_hoisted_438=[_hoisted_2133,_hoisted_3132];function _sfc_render133(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1133,_hoisted_438)}var hide_default=export_helper_default(hide_vue_vue_type_script_lang_default,[["render",_sfc_render133],["__file","hide.vue"]]),info_filled_vue_vue_type_script_lang_default={name:"InfoFilled"},_hoisted_1143={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2143=createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"},null,-1),_hoisted_3142=[_hoisted_2143];function _sfc_render143(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1143,_hoisted_3142)}var info_filled_default=export_helper_default(info_filled_vue_vue_type_script_lang_default,[["render",_sfc_render143],["__file","info-filled.vue"]]),list_vue_vue_type_script_lang_default={name:"List"},_hoisted_1149={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2149=createBaseVNode("path",{fill:"currentColor",d:"M704 192h160v736H160V192h160v64h384v-64zM288 512h448v-64H288v64zm0 256h448v-64H288v64zm96-576V96h256v96H384z"},null,-1),_hoisted_3148=[_hoisted_2149];function _sfc_render149(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1149,_hoisted_3148)}var list_default=export_helper_default(list_vue_vue_type_script_lang_default,[["render",_sfc_render149],["__file","list.vue"]]),loading_vue_vue_type_script_lang_default={name:"Loading"},_hoisted_1150={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2150=createBaseVNode("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"},null,-1),_hoisted_3149=[_hoisted_2150];function _sfc_render150(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1150,_hoisted_3149)}var loading_default=export_helper_default(loading_vue_vue_type_script_lang_default,[["render",_sfc_render150],["__file","loading.vue"]]),lock_vue_vue_type_script_lang_default={name:"Lock"},_hoisted_1154={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2154=createBaseVNode("path",{fill:"currentColor",d:"M224 448a32 32 0 0 0-32 32v384a32 32 0 0 0 32 32h576a32 32 0 0 0 32-32V480a32 32 0 0 0-32-32H224zm0-64h576a96 96 0 0 1 96 96v384a96 96 0 0 1-96 96H224a96 96 0 0 1-96-96V480a96 96 0 0 1 96-96z"},null,-1),_hoisted_3153=createBaseVNode("path",{fill:"currentColor",d:"M512 544a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V576a32 32 0 0 1 32-32zm192-160v-64a192 192 0 1 0-384 0v64h384zM512 64a256 256 0 0 1 256 256v128H256V320A256 256 0 0 1 512 64z"},null,-1),_hoisted_442=[_hoisted_2154,_hoisted_3153];function _sfc_render154(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1154,_hoisted_442)}var lock_default=export_helper_default(lock_vue_vue_type_script_lang_default,[["render",_sfc_render154],["__file","lock.vue"]]),minus_vue_vue_type_script_lang_default={name:"Minus"},_hoisted_1169={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2169=createBaseVNode("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64z"},null,-1),_hoisted_3168=[_hoisted_2169];function _sfc_render169(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1169,_hoisted_3168)}var minus_default=export_helper_default(minus_vue_vue_type_script_lang_default,[["render",_sfc_render169],["__file","minus.vue"]]),more_filled_vue_vue_type_script_lang_default={name:"MoreFilled"},_hoisted_1174={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2174=createBaseVNode("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224z"},null,-1),_hoisted_3173=[_hoisted_2174];function _sfc_render174(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1174,_hoisted_3173)}var more_filled_default=export_helper_default(more_filled_vue_vue_type_script_lang_default,[["render",_sfc_render174],["__file","more-filled.vue"]]),more_vue_vue_type_script_lang_default={name:"More"},_hoisted_1175={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2175=createBaseVNode("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96zm336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96zm336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96z"},null,-1),_hoisted_3174=[_hoisted_2175];function _sfc_render175(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1175,_hoisted_3174)}var more_default=export_helper_default(more_vue_vue_type_script_lang_default,[["render",_sfc_render175],["__file","more.vue"]]),picture_filled_vue_vue_type_script_lang_default={name:"PictureFilled"},_hoisted_1195={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2195=createBaseVNode("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32H96zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112zM256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384z"},null,-1),_hoisted_3194=[_hoisted_2195];function _sfc_render195(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1195,_hoisted_3194)}var picture_filled_default=export_helper_default(picture_filled_vue_vue_type_script_lang_default,[["render",_sfc_render195],["__file","picture-filled.vue"]]),plus_vue_vue_type_script_lang_default={name:"Plus"},_hoisted_1201={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2201=createBaseVNode("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1),_hoisted_3200=[_hoisted_2201];function _sfc_render201(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1201,_hoisted_3200)}var plus_default=export_helper_default(plus_vue_vue_type_script_lang_default,[["render",_sfc_render201],["__file","plus.vue"]]),question_filled_vue_vue_type_script_lang_default={name:"QuestionFilled"},_hoisted_1211={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2211=createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"},null,-1),_hoisted_3210=[_hoisted_2211];function _sfc_render211(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1211,_hoisted_3210)}var question_filled_default=export_helper_default(question_filled_vue_vue_type_script_lang_default,[["render",_sfc_render211],["__file","question-filled.vue"]]),refresh_left_vue_vue_type_script_lang_default={name:"RefreshLeft"},_hoisted_1215={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2215=createBaseVNode("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"},null,-1),_hoisted_3214=[_hoisted_2215];function _sfc_render215(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1215,_hoisted_3214)}var refresh_left_default=export_helper_default(refresh_left_vue_vue_type_script_lang_default,[["render",_sfc_render215],["__file","refresh-left.vue"]]),refresh_right_vue_vue_type_script_lang_default={name:"RefreshRight"},_hoisted_1216={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2216=createBaseVNode("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"},null,-1),_hoisted_3215=[_hoisted_2216];function _sfc_render216(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1216,_hoisted_3215)}var refresh_right_default=export_helper_default(refresh_right_vue_vue_type_script_lang_default,[["render",_sfc_render216],["__file","refresh-right.vue"]]),scale_to_original_vue_vue_type_script_lang_default={name:"ScaleToOriginal"},_hoisted_1222={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2222=createBaseVNode("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zM512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412zM512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512z"},null,-1),_hoisted_3221=[_hoisted_2222];function _sfc_render222(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1222,_hoisted_3221)}var scale_to_original_default=export_helper_default(scale_to_original_vue_vue_type_script_lang_default,[["render",_sfc_render222],["__file","scale-to-original.vue"]]),search_vue_vue_type_script_lang_default={name:"Search"},_hoisted_1225={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2225=createBaseVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1),_hoisted_3224=[_hoisted_2225];function _sfc_render225(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1225,_hoisted_3224)}var search_default=export_helper_default(search_vue_vue_type_script_lang_default,[["render",_sfc_render225],["__file","search.vue"]]),setting_vue_vue_type_script_lang_default={name:"Setting"},_hoisted_1231={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2231=createBaseVNode("path",{fill:"currentColor",d:"M600.704 64a32 32 0 0 1 30.464 22.208l35.2 109.376c14.784 7.232 28.928 15.36 42.432 24.512l112.384-24.192a32 32 0 0 1 34.432 15.36L944.32 364.8a32 32 0 0 1-4.032 37.504l-77.12 85.12a357.12 357.12 0 0 1 0 49.024l77.12 85.248a32 32 0 0 1 4.032 37.504l-88.704 153.6a32 32 0 0 1-34.432 15.296L708.8 803.904c-13.44 9.088-27.648 17.28-42.368 24.512l-35.264 109.376A32 32 0 0 1 600.704 960H423.296a32 32 0 0 1-30.464-22.208L357.696 828.48a351.616 351.616 0 0 1-42.56-24.64l-112.32 24.256a32 32 0 0 1-34.432-15.36L79.68 659.2a32 32 0 0 1 4.032-37.504l77.12-85.248a357.12 357.12 0 0 1 0-48.896l-77.12-85.248A32 32 0 0 1 79.68 364.8l88.704-153.6a32 32 0 0 1 34.432-15.296l112.32 24.256c13.568-9.152 27.776-17.408 42.56-24.64l35.2-109.312A32 32 0 0 1 423.232 64H600.64zm-23.424 64H446.72l-36.352 113.088-24.512 11.968a294.113 294.113 0 0 0-34.816 20.096l-22.656 15.36-116.224-25.088-65.28 113.152 79.68 88.192-1.92 27.136a293.12 293.12 0 0 0 0 40.192l1.92 27.136-79.808 88.192 65.344 113.152 116.224-25.024 22.656 15.296a294.113 294.113 0 0 0 34.816 20.096l24.512 11.968L446.72 896h130.688l36.48-113.152 24.448-11.904a288.282 288.282 0 0 0 34.752-20.096l22.592-15.296 116.288 25.024 65.28-113.152-79.744-88.192 1.92-27.136a293.12 293.12 0 0 0 0-40.256l-1.92-27.136 79.808-88.128-65.344-113.152-116.288 24.96-22.592-15.232a287.616 287.616 0 0 0-34.752-20.096l-24.448-11.904L577.344 128zM512 320a192 192 0 1 1 0 384 192 192 0 0 1 0-384zm0 64a128 128 0 1 0 0 256 128 128 0 0 0 0-256z"},null,-1),_hoisted_3230=[_hoisted_2231];function _sfc_render231(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1231,_hoisted_3230)}var setting_default=export_helper_default(setting_vue_vue_type_script_lang_default,[["render",_sfc_render231],["__file","setting.vue"]]),sort_down_vue_vue_type_script_lang_default={name:"SortDown"},_hoisted_1242={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2242=createBaseVNode("path",{fill:"currentColor",d:"M576 96v709.568L333.312 562.816A32 32 0 1 0 288 608l297.408 297.344A32 32 0 0 0 640 882.688V96a32 32 0 0 0-64 0z"},null,-1),_hoisted_3241=[_hoisted_2242];function _sfc_render242(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1242,_hoisted_3241)}var sort_down_default=export_helper_default(sort_down_vue_vue_type_script_lang_default,[["render",_sfc_render242],["__file","sort-down.vue"]]),sort_up_vue_vue_type_script_lang_default={name:"SortUp"},_hoisted_1243={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2243=createBaseVNode("path",{fill:"currentColor",d:"M384 141.248V928a32 32 0 1 0 64 0V218.56l242.688 242.688A32 32 0 1 0 736 416L438.592 118.656A32 32 0 0 0 384 141.248z"},null,-1),_hoisted_3242=[_hoisted_2243];function _sfc_render243(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1243,_hoisted_3242)}var sort_up_default=export_helper_default(sort_up_vue_vue_type_script_lang_default,[["render",_sfc_render243],["__file","sort-up.vue"]]),star_filled_vue_vue_type_script_lang_default={name:"StarFilled"},_hoisted_1246={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2246=createBaseVNode("path",{fill:"currentColor",d:"M283.84 867.84 512 747.776l228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72z"},null,-1),_hoisted_3245=[_hoisted_2246];function _sfc_render246(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1246,_hoisted_3245)}var star_filled_default=export_helper_default(star_filled_vue_vue_type_script_lang_default,[["render",_sfc_render246],["__file","star-filled.vue"]]),star_vue_vue_type_script_lang_default={name:"Star"},_hoisted_1247={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2247=createBaseVNode("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72L512 747.84zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"},null,-1),_hoisted_3246=[_hoisted_2247];function _sfc_render247(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1247,_hoisted_3246)}var star_default=export_helper_default(star_vue_vue_type_script_lang_default,[["render",_sfc_render247],["__file","star.vue"]]),success_filled_vue_vue_type_script_lang_default={name:"SuccessFilled"},_hoisted_1249={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2249=createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"},null,-1),_hoisted_3248=[_hoisted_2249];function _sfc_render249(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1249,_hoisted_3248)}var success_filled_default=export_helper_default(success_filled_vue_vue_type_script_lang_default,[["render",_sfc_render249],["__file","success-filled.vue"]]),switch_vue_vue_type_script_lang_default={name:"Switch"},_hoisted_1258={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2258=createBaseVNode("path",{fill:"currentColor",d:"M118.656 438.656a32 32 0 0 1 0-45.248L416 96l4.48-3.776A32 32 0 0 1 461.248 96l3.712 4.48a32.064 32.064 0 0 1-3.712 40.832L218.56 384H928a32 32 0 1 1 0 64H141.248a32 32 0 0 1-22.592-9.344zM64 608a32 32 0 0 1 32-32h786.752a32 32 0 0 1 22.656 54.592L608 928l-4.48 3.776a32.064 32.064 0 0 1-40.832-49.024L805.632 640H96a32 32 0 0 1-32-32z"},null,-1),_hoisted_3257=[_hoisted_2258];function _sfc_render258(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1258,_hoisted_3257)}var switch_default=export_helper_default(switch_vue_vue_type_script_lang_default,[["render",_sfc_render258],["__file","switch.vue"]]),tickets_vue_vue_type_script_lang_default={name:"Tickets"},_hoisted_1261={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2261=createBaseVNode("path",{fill:"currentColor",d:"M192 128v768h640V128H192zm-32-64h704a32 32 0 0 1 32 32v832a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32zm160 448h384v64H320v-64zm0-192h192v64H320v-64zm0 384h384v64H320v-64z"},null,-1),_hoisted_3260=[_hoisted_2261];function _sfc_render261(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1261,_hoisted_3260)}var tickets_default=export_helper_default(tickets_vue_vue_type_script_lang_default,[["render",_sfc_render261],["__file","tickets.vue"]]),tools_vue_vue_type_script_lang_default={name:"Tools"},_hoisted_1264={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2264=createBaseVNode("path",{fill:"currentColor",d:"M764.416 254.72a351.68 351.68 0 0 1 86.336 149.184H960v192.064H850.752a351.68 351.68 0 0 1-86.336 149.312l54.72 94.72-166.272 96-54.592-94.72a352.64 352.64 0 0 1-172.48 0L371.136 936l-166.272-96 54.72-94.72a351.68 351.68 0 0 1-86.336-149.312H64v-192h109.248a351.68 351.68 0 0 1 86.336-149.312L204.8 160l166.208-96h.192l54.656 94.592a352.64 352.64 0 0 1 172.48 0L652.8 64h.128L819.2 160l-54.72 94.72zM704 499.968a192 192 0 1 0-384 0 192 192 0 0 0 384 0z"},null,-1),_hoisted_3263=[_hoisted_2264];function _sfc_render264(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1264,_hoisted_3263)}var tools_default=export_helper_default(tools_vue_vue_type_script_lang_default,[["render",_sfc_render264],["__file","tools.vue"]]),unlock_vue_vue_type_script_lang_default={name:"Unlock"},_hoisted_1273={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2273=createBaseVNode("path",{fill:"currentColor",d:"M224 448a32 32 0 0 0-32 32v384a32 32 0 0 0 32 32h576a32 32 0 0 0 32-32V480a32 32 0 0 0-32-32H224zm0-64h576a96 96 0 0 1 96 96v384a96 96 0 0 1-96 96H224a96 96 0 0 1-96-96V480a96 96 0 0 1 96-96z"},null,-1),_hoisted_3272=createBaseVNode("path",{fill:"currentColor",d:"M512 544a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V576a32 32 0 0 1 32-32zm178.304-295.296A192.064 192.064 0 0 0 320 320v64h352l96 38.4V448H256V320a256 256 0 0 1 493.76-95.104l-59.456 23.808z"},null,-1),_hoisted_484=[_hoisted_2273,_hoisted_3272];function _sfc_render273(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1273,_hoisted_484)}var unlock_default=export_helper_default(unlock_vue_vue_type_script_lang_default,[["render",_sfc_render273],["__file","unlock.vue"]]),upload_vue_vue_type_script_lang_default={name:"Upload"},_hoisted_1275={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2275=createBaseVNode("path",{fill:"currentColor",d:"M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64zm384-578.304V704h-64V247.296L237.248 490.048 192 444.8 508.8 128l316.8 316.8-45.312 45.248L544 253.696z"},null,-1),_hoisted_3274=[_hoisted_2275];function _sfc_render275(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1275,_hoisted_3274)}var upload_default=export_helper_default(upload_vue_vue_type_script_lang_default,[["render",_sfc_render275],["__file","upload.vue"]]),view_vue_vue_type_script_lang_default={name:"View"},_hoisted_1283={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2283=createBaseVNode("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352zm0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448zm0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160z"},null,-1),_hoisted_3282=[_hoisted_2283];function _sfc_render283(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1283,_hoisted_3282)}var view_default=export_helper_default(view_vue_vue_type_script_lang_default,[["render",_sfc_render283],["__file","view.vue"]]),warning_filled_vue_vue_type_script_lang_default={name:"WarningFilled"},_hoisted_1287={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2287=createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256zm0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4z"},null,-1),_hoisted_3286=[_hoisted_2287];function _sfc_render287(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1287,_hoisted_3286)}var warning_filled_default=export_helper_default(warning_filled_vue_vue_type_script_lang_default,[["render",_sfc_render287],["__file","warning-filled.vue"]]),zoom_in_vue_vue_type_script_lang_default={name:"ZoomIn"},_hoisted_1292={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2292=createBaseVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zm-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64h96z"},null,-1),_hoisted_3291=[_hoisted_2292];function _sfc_render292(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1292,_hoisted_3291)}var zoom_in_default=export_helper_default(zoom_in_vue_vue_type_script_lang_default,[["render",_sfc_render292],["__file","zoom-in.vue"]]),zoom_out_vue_vue_type_script_lang_default={name:"ZoomOut"},_hoisted_1293={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2293=createBaseVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zM352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64z"},null,-1),_hoisted_3292=[_hoisted_2293];function _sfc_render293(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1293,_hoisted_3292)}var zoom_out_default=export_helper_default(zoom_out_vue_vue_type_script_lang_default,[["render",_sfc_render293],["__file","zoom-out.vue"]]);const epPropKey="__epPropKey",definePropType=e=>e,isEpProp=e=>isObject$3(e)&&!!e[epPropKey],buildProp=(e,n)=>{if(!isObject$3(e)||isEpProp(e))return e;const{values:r,required:g,default:y,type:k,validator:$}=e,L={type:k,required:!!g,validator:r||$?z=>{let j=!1,ae=[];if(r&&(ae=Array.from(r),hasOwn$1(e,"default")&&ae.push(y),j||(j=ae.includes(z))),$&&(j||(j=$(z))),!j&&ae.length>0){const oe=[...new Set(ae)].map(re=>JSON.stringify(re)).join(", ");warn$1(`Invalid prop: validation failed${n?` for prop "${n}"`:""}. Expected one of [${oe}], got value ${JSON.stringify(z)}.`)}return j}:void 0,[epPropKey]:!0};return hasOwn$1(e,"default")&&(L.default=y),L},buildProps=e=>fromPairs(Object.entries(e).map(([n,r])=>[n,buildProp(r,n)])),iconPropType=definePropType([String,Object,Function]),CloseComponents={Close:close_default},TypeComponents={Close:close_default,SuccessFilled:success_filled_default,InfoFilled:info_filled_default,WarningFilled:warning_filled_default,CircleCloseFilled:circle_close_filled_default},TypeComponentsMap={success:success_filled_default,warning:warning_filled_default,error:circle_close_filled_default,info:info_filled_default},ValidateComponentsMap={validating:loading_default,success:circle_check_default,error:circle_close_default},withInstall=(e,n)=>{if(e.install=r=>{for(const g of[e,...Object.values(n??{})])r.component(g.name,g)},n)for(const[r,g]of Object.entries(n))e[r]=g;return e},withInstallFunction=(e,n)=>(e.install=r=>{e._context=r._context,r.config.globalProperties[n]=e},e),withInstallDirective=(e,n)=>(e.install=r=>{r.directive(n,e)},e),withNoopInstall=e=>(e.install=NOOP,e),composeRefs=(...e)=>n=>{e.forEach(r=>{isFunction$3(r)?r(n):r.value=n})},EVENT_CODE={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},datePickTypes=["year","month","date","dates","week","datetime","datetimerange","daterange","monthrange"],WEEK_DAYS=["sun","mon","tue","wed","thu","fri","sat"],UPDATE_MODEL_EVENT="update:modelValue",CHANGE_EVENT="change",INPUT_EVENT="input",INSTALLED_KEY=Symbol("INSTALLED_KEY"),componentSizes=["","default","small","large"],componentSizeMap={large:40,default:32,small:24},getComponentSize=e=>componentSizeMap[e||"default"],isValidComponentSize=e=>["",...componentSizes].includes(e);var PatchFlags=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(PatchFlags||{});function isFragment(e){return isVNode$1(e)&&e.type===Fragment}function isComment(e){return isVNode$1(e)&&e.type===Comment}function isValidElementNode(e){return isVNode$1(e)&&!isFragment(e)&&!isComment(e)}const getNormalizedProps=e=>{if(!isVNode$1(e))return{};const n=e.props||{},r=(isVNode$1(e.type)?e.type.props:void 0)||{},g={};return Object.keys(r).forEach(y=>{hasOwn$1(r[y],"default")&&(g[y]=r[y].default)}),Object.keys(n).forEach(y=>{g[camelize(y)]=n[y]}),g},ensureOnlyChild=e=>{if(!isArray$3(e)||e.length>1)throw new Error("expect to receive a single Vue element child");return e[0]},flattedChildren=e=>{const n=isArray$3(e)?e:[e],r=[];return n.forEach(g=>{var y;isArray$3(g)?r.push(...flattedChildren(g)):isVNode$1(g)&&isArray$3(g.children)?r.push(...flattedChildren(g.children)):(r.push(g),isVNode$1(g)&&((y=g.component)!=null&&y.subTree)&&r.push(...flattedChildren(g.component.subTree)))}),r},unique=e=>[...new Set(e)],castArray=e=>!e&&e!==0?[]:Array.isArray(e)?e:[e],isKorean=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e),rAF=e=>isClient?window.requestAnimationFrame(e):setTimeout(e,16),cAF=e=>isClient?window.cancelAnimationFrame(e):clearTimeout(e),generateId=()=>Math.floor(Math.random()*1e4),mutable=e=>e,DEFAULT_EXCLUDE_KEYS=["class","style"],LISTENER_PREFIX=/^on[A-Z]/,useAttrs=(e={})=>{const{excludeListeners:n=!1,excludeKeys:r}=e,g=computed(()=>(r?.value||[]).concat(DEFAULT_EXCLUDE_KEYS)),y=getCurrentInstance();return computed(y?()=>{var k;return fromPairs(Object.entries((k=y.proxy)==null?void 0:k.$attrs).filter(([$])=>!g.value.includes($)&&!(n&&LISTENER_PREFIX.test($))))}:()=>({}))},useDeprecated=({from:e,replacement:n,scope:r,version:g,ref:y,type:k="API"},$)=>{watch(()=>unref($),V=>{},{immediate:!0})},useDraggable=(e,n,r)=>{let g={offsetX:0,offsetY:0};const y=V=>{const L=V.clientX,z=V.clientY,{offsetX:j,offsetY:ae}=g,oe=e.value.getBoundingClientRect(),re=oe.left,ue=oe.top,le=oe.width,de=oe.height,he=document.documentElement.clientWidth,_e=document.documentElement.clientHeight,xe=-re+j,Ne=-ue+ae,$e=he-re-le+j,Ce=_e-ue-de+ae,Ie=Ue=>{const Pt=Math.min(Math.max(j+Ue.clientX-L,xe),$e),hn=Math.min(Math.max(ae+Ue.clientY-z,Ne),Ce);g={offsetX:Pt,offsetY:hn},e.value.style.transform=`translate(${addUnit(Pt)}, ${addUnit(hn)})`},ze=()=>{document.removeEventListener("mousemove",Ie),document.removeEventListener("mouseup",ze)};document.addEventListener("mousemove",Ie),document.addEventListener("mouseup",ze)},k=()=>{n.value&&e.value&&n.value.addEventListener("mousedown",y)},$=()=>{n.value&&e.value&&n.value.removeEventListener("mousedown",y)};onMounted(()=>{watchEffect(()=>{r.value?k():$()})}),onBeforeUnmount(()=>{$()})};var English={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const buildTranslator=e=>(n,r)=>translate$2(n,r,unref(e)),translate$2=(e,n,r)=>get(r,e,e).replace(/\{(\w+)\}/g,(g,y)=>{var k;return`${(k=n?.[y])!=null?k:`{${y}}`}`}),buildLocaleContext=e=>{const n=computed(()=>unref(e).name),r=isRef(e)?e:ref(e);return{lang:n,locale:r,t:buildTranslator(e)}},localeContextKey=Symbol("localeContextKey"),useLocale=e=>{const n=e||inject(localeContextKey,ref());return buildLocaleContext(computed(()=>n.value||English))},defaultNamespace="el",statePrefix="is-",_bem=(e,n,r,g,y)=>{let k=`${e}-${n}`;return r&&(k+=`-${r}`),g&&(k+=`__${g}`),y&&(k+=`--${y}`),k},namespaceContextKey=Symbol("namespaceContextKey"),useGetDerivedNamespace=e=>{const n=e||(getCurrentInstance()?inject(namespaceContextKey,ref(defaultNamespace)):ref(defaultNamespace));return computed(()=>unref(n)||defaultNamespace)},useNamespace=(e,n)=>{const r=useGetDerivedNamespace(n);return{namespace:r,b:(le="")=>_bem(r.value,e,le,"",""),e:le=>le?_bem(r.value,e,"",le,""):"",m:le=>le?_bem(r.value,e,"","",le):"",be:(le,de)=>le&&de?_bem(r.value,e,le,de,""):"",em:(le,de)=>le&&de?_bem(r.value,e,"",le,de):"",bm:(le,de)=>le&&de?_bem(r.value,e,le,"",de):"",bem:(le,de,he)=>le&&de&&he?_bem(r.value,e,le,de,he):"",is:(le,...de)=>{const he=de.length>=1?de[0]:!0;return le&&he?`${statePrefix}${le}`:""},cssVar:le=>{const de={};for(const he in le)le[he]&&(de[`--${r.value}-${he}`]=le[he]);return de},cssVarName:le=>`--${r.value}-${le}`,cssVarBlock:le=>{const de={};for(const he in le)le[he]&&(de[`--${r.value}-${e}-${he}`]=le[he]);return de},cssVarBlockName:le=>`--${r.value}-${e}-${le}`}},useLockscreen=(e,n={})=>{isRef(e)||throwError("[useLockscreen]","You need to pass a ref param to this function");const r=n.ns||useNamespace("popup"),g=computed$1(()=>r.bm("parent","hidden"));if(!isClient||hasClass(document.body,g.value))return;let y=0,k=!1,$="0";const V=()=>{setTimeout(()=>{removeClass(document?.body,g.value),k&&document&&(document.body.style.width=$)},200)};watch(e,L=>{if(!L){V();return}k=!hasClass(document.body,g.value),k&&($=document.body.style.width),y=getScrollBarWidth(r.namespace.value);const z=document.documentElement.clientHeight<document.body.scrollHeight,j=getStyle(document.body,"overflowY");y>0&&(z||j==="scroll")&&k&&(document.body.style.width=`calc(100% - ${y}px)`),addClass(document.body,g.value)}),onScopeDispose(()=>V())},_prop=buildProp({type:definePropType(Boolean),default:null}),_event=buildProp({type:definePropType(Function)}),createModelToggleComposable=e=>{const n=`update:${e}`,r=`onUpdate:${e}`,g=[n],y={[e]:_prop,[r]:_event};return{useModelToggle:({indicator:$,toggleReason:V,shouldHideWhenRouteChanges:L,shouldProceed:z,onShow:j,onHide:ae})=>{const oe=getCurrentInstance(),{emit:re}=oe,ue=oe.props,le=computed(()=>isFunction$3(ue[r])),de=computed(()=>ue[e]===null),he=Ie=>{$.value!==!0&&($.value=!0,V&&(V.value=Ie),isFunction$3(j)&&j(Ie))},_e=Ie=>{$.value!==!1&&($.value=!1,V&&(V.value=Ie),isFunction$3(ae)&&ae(Ie))},xe=Ie=>{if(ue.disabled===!0||isFunction$3(z)&&!z())return;const ze=le.value&&isClient;ze&&re(n,!0),(de.value||!ze)&&he(Ie)},Ne=Ie=>{if(ue.disabled===!0||!isClient)return;const ze=le.value&&isClient;ze&&re(n,!1),(de.value||!ze)&&_e(Ie)},$e=Ie=>{isBoolean$1(Ie)&&(ue.disabled&&Ie?le.value&&re(n,!1):$.value!==Ie&&(Ie?he():_e()))},Ce=()=>{$.value?Ne():xe()};return watch(()=>ue[e],$e),L&&oe.appContext.config.globalProperties.$route!==void 0&&watch(()=>({...oe.proxy.$route}),()=>{L.value&&$.value&&Ne()}),onMounted(()=>{$e(ue[e])}),{hide:Ne,show:xe,toggle:Ce,hasUpdateHandler:le}},useModelToggleProps:y,useModelToggleEmits:g}};createModelToggleComposable("modelValue");const useProp=e=>{const n=getCurrentInstance();return computed(()=>{var r,g;return(g=(r=n?.proxy)==null?void 0:r.$props)==null?void 0:g[e]})};var E$1="top",R="bottom",W="right",P$1="left",me="auto",G=[E$1,R,W,P$1],U$1="start",J="end",Xe="clippingParents",je="viewport",K="popper",Ye="reference",De=G.reduce(function(e,n){return e.concat([n+"-"+U$1,n+"-"+J])},[]),Ee=[].concat(G,[me]).reduce(function(e,n){return e.concat([n,n+"-"+U$1,n+"-"+J])},[]),Ge="beforeRead",Je="read",Ke="afterRead",Qe="beforeMain",Ze="main",et="afterMain",tt="beforeWrite",nt="write",rt="afterWrite",ot=[Ge,Je,Ke,Qe,Ze,et,tt,nt,rt];function C$1(e){return e?(e.nodeName||"").toLowerCase():null}function H(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var n=e.ownerDocument;return n&&n.defaultView||window}return e}function Q(e){var n=H(e).Element;return e instanceof n||e instanceof Element}function B(e){var n=H(e).HTMLElement;return e instanceof n||e instanceof HTMLElement}function Pe(e){if(typeof ShadowRoot>"u")return!1;var n=H(e).ShadowRoot;return e instanceof n||e instanceof ShadowRoot}function Mt(e){var n=e.state;Object.keys(n.elements).forEach(function(r){var g=n.styles[r]||{},y=n.attributes[r]||{},k=n.elements[r];!B(k)||!C$1(k)||(Object.assign(k.style,g),Object.keys(y).forEach(function($){var V=y[$];V===!1?k.removeAttribute($):k.setAttribute($,V===!0?"":V)}))})}function Rt(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow),function(){Object.keys(n.elements).forEach(function(g){var y=n.elements[g],k=n.attributes[g]||{},$=Object.keys(n.styles.hasOwnProperty(g)?n.styles[g]:r[g]),V=$.reduce(function(L,z){return L[z]="",L},{});!B(y)||!C$1(y)||(Object.assign(y.style,V),Object.keys(k).forEach(function(L){y.removeAttribute(L)}))})}}var Ae={name:"applyStyles",enabled:!0,phase:"write",fn:Mt,effect:Rt,requires:["computeStyles"]};function q(e){return e.split("-")[0]}var X$1=Math.max,ve=Math.min,Z=Math.round;function ee(e,n){n===void 0&&(n=!1);var r=e.getBoundingClientRect(),g=1,y=1;if(B(e)&&n){var k=e.offsetHeight,$=e.offsetWidth;$>0&&(g=Z(r.width)/$||1),k>0&&(y=Z(r.height)/k||1)}return{width:r.width/g,height:r.height/y,top:r.top/y,right:r.right/g,bottom:r.bottom/y,left:r.left/g,x:r.left/g,y:r.top/y}}function ke(e){var n=ee(e),r=e.offsetWidth,g=e.offsetHeight;return Math.abs(n.width-r)<=1&&(r=n.width),Math.abs(n.height-g)<=1&&(g=n.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:g}}function it(e,n){var r=n.getRootNode&&n.getRootNode();if(e.contains(n))return!0;if(r&&Pe(r)){var g=n;do{if(g&&e.isSameNode(g))return!0;g=g.parentNode||g.host}while(g)}return!1}function N$1(e){return H(e).getComputedStyle(e)}function Wt(e){return["table","td","th"].indexOf(C$1(e))>=0}function I$1(e){return((Q(e)?e.ownerDocument:e.document)||window.document).documentElement}function ge(e){return C$1(e)==="html"?e:e.assignedSlot||e.parentNode||(Pe(e)?e.host:null)||I$1(e)}function at(e){return!B(e)||N$1(e).position==="fixed"?null:e.offsetParent}function Bt(e){var n=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,r=navigator.userAgent.indexOf("Trident")!==-1;if(r&&B(e)){var g=N$1(e);if(g.position==="fixed")return null}var y=ge(e);for(Pe(y)&&(y=y.host);B(y)&&["html","body"].indexOf(C$1(y))<0;){var k=N$1(y);if(k.transform!=="none"||k.perspective!=="none"||k.contain==="paint"||["transform","perspective"].indexOf(k.willChange)!==-1||n&&k.willChange==="filter"||n&&k.filter&&k.filter!=="none")return y;y=y.parentNode}return null}function se(e){for(var n=H(e),r=at(e);r&&Wt(r)&&N$1(r).position==="static";)r=at(r);return r&&(C$1(r)==="html"||C$1(r)==="body"&&N$1(r).position==="static")?n:r||Bt(e)||n}function Le(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function fe(e,n,r){return X$1(e,ve(n,r))}function St(e,n,r){var g=fe(e,n,r);return g>r?r:g}function st(){return{top:0,right:0,bottom:0,left:0}}function ft(e){return Object.assign({},st(),e)}function ct(e,n){return n.reduce(function(r,g){return r[g]=e,r},{})}var Tt=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,ft(typeof e!="number"?e:ct(e,G))};function Ht(e){var n,r=e.state,g=e.name,y=e.options,k=r.elements.arrow,$=r.modifiersData.popperOffsets,V=q(r.placement),L=Le(V),z=[P$1,W].indexOf(V)>=0,j=z?"height":"width";if(!(!k||!$)){var ae=Tt(y.padding,r),oe=ke(k),re=L==="y"?E$1:P$1,ue=L==="y"?R:W,le=r.rects.reference[j]+r.rects.reference[L]-$[L]-r.rects.popper[j],de=$[L]-r.rects.reference[L],he=se(k),_e=he?L==="y"?he.clientHeight||0:he.clientWidth||0:0,xe=le/2-de/2,Ne=ae[re],$e=_e-oe[j]-ae[ue],Ce=_e/2-oe[j]/2+xe,Ie=fe(Ne,Ce,$e),ze=L;r.modifiersData[g]=(n={},n[ze]=Ie,n.centerOffset=Ie-Ce,n)}}function Ct(e){var n=e.state,r=e.options,g=r.element,y=g===void 0?"[data-popper-arrow]":g;y!=null&&(typeof y=="string"&&(y=n.elements.popper.querySelector(y),!y)||!it(n.elements.popper,y)||(n.elements.arrow=y))}var pt={name:"arrow",enabled:!0,phase:"main",fn:Ht,effect:Ct,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function te(e){return e.split("-")[1]}var qt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Vt(e){var n=e.x,r=e.y,g=window,y=g.devicePixelRatio||1;return{x:Z(n*y)/y||0,y:Z(r*y)/y||0}}function ut(e){var n,r=e.popper,g=e.popperRect,y=e.placement,k=e.variation,$=e.offsets,V=e.position,L=e.gpuAcceleration,z=e.adaptive,j=e.roundOffsets,ae=e.isFixed,oe=$.x,re=oe===void 0?0:oe,ue=$.y,le=ue===void 0?0:ue,de=typeof j=="function"?j({x:re,y:le}):{x:re,y:le};re=de.x,le=de.y;var he=$.hasOwnProperty("x"),_e=$.hasOwnProperty("y"),xe=P$1,Ne=E$1,$e=window;if(z){var Ce=se(r),Ie="clientHeight",ze="clientWidth";if(Ce===H(r)&&(Ce=I$1(r),N$1(Ce).position!=="static"&&V==="absolute"&&(Ie="scrollHeight",ze="scrollWidth")),Ce=Ce,y===E$1||(y===P$1||y===W)&&k===J){Ne=R;var Ue=ae&&Ce===$e&&$e.visualViewport?$e.visualViewport.height:Ce[Ie];le-=Ue-g.height,le*=L?1:-1}if(y===P$1||(y===E$1||y===R)&&k===J){xe=W;var Pt=ae&&Ce===$e&&$e.visualViewport?$e.visualViewport.width:Ce[ze];re-=Pt-g.width,re*=L?1:-1}}var hn=Object.assign({position:V},z&&qt),Dt=j===!0?Vt({x:re,y:le}):{x:re,y:le};if(re=Dt.x,le=Dt.y,L){var xn;return Object.assign({},hn,(xn={},xn[Ne]=_e?"0":"",xn[xe]=he?"0":"",xn.transform=($e.devicePixelRatio||1)<=1?"translate("+re+"px, "+le+"px)":"translate3d("+re+"px, "+le+"px, 0)",xn))}return Object.assign({},hn,(n={},n[Ne]=_e?le+"px":"",n[xe]=he?re+"px":"",n.transform="",n))}function Nt(e){var n=e.state,r=e.options,g=r.gpuAcceleration,y=g===void 0?!0:g,k=r.adaptive,$=k===void 0?!0:k,V=r.roundOffsets,L=V===void 0?!0:V,z={placement:q(n.placement),variation:te(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:y,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,ut(Object.assign({},z,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:$,roundOffsets:L})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,ut(Object.assign({},z,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:L})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}var Me={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Nt,data:{}},ye={passive:!0};function It(e){var n=e.state,r=e.instance,g=e.options,y=g.scroll,k=y===void 0?!0:y,$=g.resize,V=$===void 0?!0:$,L=H(n.elements.popper),z=[].concat(n.scrollParents.reference,n.scrollParents.popper);return k&&z.forEach(function(j){j.addEventListener("scroll",r.update,ye)}),V&&L.addEventListener("resize",r.update,ye),function(){k&&z.forEach(function(j){j.removeEventListener("scroll",r.update,ye)}),V&&L.removeEventListener("resize",r.update,ye)}}var Re={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:It,data:{}},_t={left:"right",right:"left",bottom:"top",top:"bottom"};function be(e){return e.replace(/left|right|bottom|top/g,function(n){return _t[n]})}var zt={start:"end",end:"start"};function lt$1(e){return e.replace(/start|end/g,function(n){return zt[n]})}function We(e){var n=H(e),r=n.pageXOffset,g=n.pageYOffset;return{scrollLeft:r,scrollTop:g}}function Be(e){return ee(I$1(e)).left+We(e).scrollLeft}function Ft(e){var n=H(e),r=I$1(e),g=n.visualViewport,y=r.clientWidth,k=r.clientHeight,$=0,V=0;return g&&(y=g.width,k=g.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||($=g.offsetLeft,V=g.offsetTop)),{width:y,height:k,x:$+Be(e),y:V}}function Ut(e){var n,r=I$1(e),g=We(e),y=(n=e.ownerDocument)==null?void 0:n.body,k=X$1(r.scrollWidth,r.clientWidth,y?y.scrollWidth:0,y?y.clientWidth:0),$=X$1(r.scrollHeight,r.clientHeight,y?y.scrollHeight:0,y?y.clientHeight:0),V=-g.scrollLeft+Be(e),L=-g.scrollTop;return N$1(y||r).direction==="rtl"&&(V+=X$1(r.clientWidth,y?y.clientWidth:0)-k),{width:k,height:$,x:V,y:L}}function Se(e){var n=N$1(e),r=n.overflow,g=n.overflowX,y=n.overflowY;return/auto|scroll|overlay|hidden/.test(r+y+g)}function dt(e){return["html","body","#document"].indexOf(C$1(e))>=0?e.ownerDocument.body:B(e)&&Se(e)?e:dt(ge(e))}function ce(e,n){var r;n===void 0&&(n=[]);var g=dt(e),y=g===((r=e.ownerDocument)==null?void 0:r.body),k=H(g),$=y?[k].concat(k.visualViewport||[],Se(g)?g:[]):g,V=n.concat($);return y?V:V.concat(ce(ge($)))}function Te(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Xt(e){var n=ee(e);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function ht(e,n){return n===je?Te(Ft(e)):Q(n)?Xt(n):Te(Ut(I$1(e)))}function Yt(e){var n=ce(ge(e)),r=["absolute","fixed"].indexOf(N$1(e).position)>=0,g=r&&B(e)?se(e):e;return Q(g)?n.filter(function(y){return Q(y)&&it(y,g)&&C$1(y)!=="body"}):[]}function Gt(e,n,r){var g=n==="clippingParents"?Yt(e):[].concat(n),y=[].concat(g,[r]),k=y[0],$=y.reduce(function(V,L){var z=ht(e,L);return V.top=X$1(z.top,V.top),V.right=ve(z.right,V.right),V.bottom=ve(z.bottom,V.bottom),V.left=X$1(z.left,V.left),V},ht(e,k));return $.width=$.right-$.left,$.height=$.bottom-$.top,$.x=$.left,$.y=$.top,$}function mt(e){var n=e.reference,r=e.element,g=e.placement,y=g?q(g):null,k=g?te(g):null,$=n.x+n.width/2-r.width/2,V=n.y+n.height/2-r.height/2,L;switch(y){case E$1:L={x:$,y:n.y-r.height};break;case R:L={x:$,y:n.y+n.height};break;case W:L={x:n.x+n.width,y:V};break;case P$1:L={x:n.x-r.width,y:V};break;default:L={x:n.x,y:n.y}}var z=y?Le(y):null;if(z!=null){var j=z==="y"?"height":"width";switch(k){case U$1:L[z]=L[z]-(n[j]/2-r[j]/2);break;case J:L[z]=L[z]+(n[j]/2-r[j]/2);break}}return L}function ne(e,n){n===void 0&&(n={});var r=n,g=r.placement,y=g===void 0?e.placement:g,k=r.boundary,$=k===void 0?Xe:k,V=r.rootBoundary,L=V===void 0?je:V,z=r.elementContext,j=z===void 0?K:z,ae=r.altBoundary,oe=ae===void 0?!1:ae,re=r.padding,ue=re===void 0?0:re,le=ft(typeof ue!="number"?ue:ct(ue,G)),de=j===K?Ye:K,he=e.rects.popper,_e=e.elements[oe?de:j],xe=Gt(Q(_e)?_e:_e.contextElement||I$1(e.elements.popper),$,L),Ne=ee(e.elements.reference),$e=mt({reference:Ne,element:he,strategy:"absolute",placement:y}),Ce=Te(Object.assign({},he,$e)),Ie=j===K?Ce:Ne,ze={top:xe.top-Ie.top+le.top,bottom:Ie.bottom-xe.bottom+le.bottom,left:xe.left-Ie.left+le.left,right:Ie.right-xe.right+le.right},Ue=e.modifiersData.offset;if(j===K&&Ue){var Pt=Ue[y];Object.keys(ze).forEach(function(hn){var Dt=[W,R].indexOf(hn)>=0?1:-1,xn=[E$1,R].indexOf(hn)>=0?"y":"x";ze[hn]+=Pt[xn]*Dt})}return ze}function Jt(e,n){n===void 0&&(n={});var r=n,g=r.placement,y=r.boundary,k=r.rootBoundary,$=r.padding,V=r.flipVariations,L=r.allowedAutoPlacements,z=L===void 0?Ee:L,j=te(g),ae=j?V?De:De.filter(function(ue){return te(ue)===j}):G,oe=ae.filter(function(ue){return z.indexOf(ue)>=0});oe.length===0&&(oe=ae);var re=oe.reduce(function(ue,le){return ue[le]=ne(e,{placement:le,boundary:y,rootBoundary:k,padding:$})[q(le)],ue},{});return Object.keys(re).sort(function(ue,le){return re[ue]-re[le]})}function Kt(e){if(q(e)===me)return[];var n=be(e);return[lt$1(e),n,lt$1(n)]}function Qt(e){var n=e.state,r=e.options,g=e.name;if(!n.modifiersData[g]._skip){for(var y=r.mainAxis,k=y===void 0?!0:y,$=r.altAxis,V=$===void 0?!0:$,L=r.fallbackPlacements,z=r.padding,j=r.boundary,ae=r.rootBoundary,oe=r.altBoundary,re=r.flipVariations,ue=re===void 0?!0:re,le=r.allowedAutoPlacements,de=n.options.placement,he=q(de),_e=he===de,xe=L||(_e||!ue?[be(de)]:Kt(de)),Ne=[de].concat(xe).reduce(function(da,ua){return da.concat(q(ua)===me?Jt(n,{placement:ua,boundary:j,rootBoundary:ae,padding:z,flipVariations:ue,allowedAutoPlacements:le}):ua)},[]),$e=n.rects.reference,Ce=n.rects.popper,Ie=new Map,ze=!0,Ue=Ne[0],Pt=0;Pt<Ne.length;Pt++){var hn=Ne[Pt],Dt=q(hn),xn=te(hn)===U$1,jt=[E$1,R].indexOf(Dt)>=0,Vn=jt?"width":"height",Rn=ne(n,{placement:hn,boundary:j,rootBoundary:ae,altBoundary:oe,padding:z}),Tn=jt?xn?W:P$1:xn?R:E$1;$e[Vn]>Ce[Vn]&&(Tn=be(Tn));var Ln=be(Tn),Sn=[];if(k&&Sn.push(Rn[Dt]<=0),V&&Sn.push(Rn[Tn]<=0,Rn[Ln]<=0),Sn.every(function(da){return da})){Ue=hn,ze=!1;break}Ie.set(hn,Sn)}if(ze)for(var An=ue?3:1,In=function(da){var ua=Ne.find(function(aa){var Nn=Ie.get(aa);if(Nn)return Nn.slice(0,da).every(function(En){return En})});if(ua)return Ue=ua,"break"},Mn=An;Mn>0;Mn--){var ra=In(Mn);if(ra==="break")break}n.placement!==Ue&&(n.modifiersData[g]._skip=!0,n.placement=Ue,n.reset=!0)}}var vt={name:"flip",enabled:!0,phase:"main",fn:Qt,requiresIfExists:["offset"],data:{_skip:!1}};function gt(e,n,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-n.height-r.y,right:e.right-n.width+r.x,bottom:e.bottom-n.height+r.y,left:e.left-n.width-r.x}}function yt(e){return[E$1,W,R,P$1].some(function(n){return e[n]>=0})}function Zt(e){var n=e.state,r=e.name,g=n.rects.reference,y=n.rects.popper,k=n.modifiersData.preventOverflow,$=ne(n,{elementContext:"reference"}),V=ne(n,{altBoundary:!0}),L=gt($,g),z=gt(V,y,k),j=yt(L),ae=yt(z);n.modifiersData[r]={referenceClippingOffsets:L,popperEscapeOffsets:z,isReferenceHidden:j,hasPopperEscaped:ae},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":j,"data-popper-escaped":ae})}var bt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Zt};function en(e,n,r){var g=q(e),y=[P$1,E$1].indexOf(g)>=0?-1:1,k=typeof r=="function"?r(Object.assign({},n,{placement:e})):r,$=k[0],V=k[1];return $=$||0,V=(V||0)*y,[P$1,W].indexOf(g)>=0?{x:V,y:$}:{x:$,y:V}}function tn(e){var n=e.state,r=e.options,g=e.name,y=r.offset,k=y===void 0?[0,0]:y,$=Ee.reduce(function(j,ae){return j[ae]=en(ae,n.rects,k),j},{}),V=$[n.placement],L=V.x,z=V.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=L,n.modifiersData.popperOffsets.y+=z),n.modifiersData[g]=$}var wt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:tn};function nn(e){var n=e.state,r=e.name;n.modifiersData[r]=mt({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})}var He={name:"popperOffsets",enabled:!0,phase:"read",fn:nn,data:{}};function rn(e){return e==="x"?"y":"x"}function on(e){var n=e.state,r=e.options,g=e.name,y=r.mainAxis,k=y===void 0?!0:y,$=r.altAxis,V=$===void 0?!1:$,L=r.boundary,z=r.rootBoundary,j=r.altBoundary,ae=r.padding,oe=r.tether,re=oe===void 0?!0:oe,ue=r.tetherOffset,le=ue===void 0?0:ue,de=ne(n,{boundary:L,rootBoundary:z,padding:ae,altBoundary:j}),he=q(n.placement),_e=te(n.placement),xe=!_e,Ne=Le(he),$e=rn(Ne),Ce=n.modifiersData.popperOffsets,Ie=n.rects.reference,ze=n.rects.popper,Ue=typeof le=="function"?le(Object.assign({},n.rects,{placement:n.placement})):le,Pt=typeof Ue=="number"?{mainAxis:Ue,altAxis:Ue}:Object.assign({mainAxis:0,altAxis:0},Ue),hn=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,Dt={x:0,y:0};if(Ce){if(k){var xn,jt=Ne==="y"?E$1:P$1,Vn=Ne==="y"?R:W,Rn=Ne==="y"?"height":"width",Tn=Ce[Ne],Ln=Tn+de[jt],Sn=Tn-de[Vn],An=re?-ze[Rn]/2:0,In=_e===U$1?Ie[Rn]:ze[Rn],Mn=_e===U$1?-ze[Rn]:-Ie[Rn],ra=n.elements.arrow,da=re&&ra?ke(ra):{width:0,height:0},ua=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:st(),aa=ua[jt],Nn=ua[Vn],En=fe(0,Ie[Rn],da[Rn]),Zn=xe?Ie[Rn]/2-An-En-aa-Pt.mainAxis:In-En-aa-Pt.mainAxis,ha=xe?-Ie[Rn]/2+An+En+Nn+Pt.mainAxis:Mn+En+Nn+Pt.mainAxis,xa=n.elements.arrow&&se(n.elements.arrow),sa=xa?Ne==="y"?xa.clientTop||0:xa.clientLeft||0:0,Hn=(xn=hn?.[Ne])!=null?xn:0,bn=Tn+Zn-Hn-sa,Xn=Tn+ha-Hn,$n=fe(re?ve(Ln,bn):Ln,Tn,re?X$1(Sn,Xn):Sn);Ce[Ne]=$n,Dt[Ne]=$n-Tn}if(V){var kt,At=Ne==="x"?E$1:P$1,Dn=Ne==="x"?R:W,Qn=Ce[$e],oa=$e==="y"?"height":"width",na=Qn+de[At],la=Qn-de[Dn],ma=[E$1,P$1].indexOf(he)!==-1,ca=(kt=hn?.[$e])!=null?kt:0,pe=ma?na:Qn-Ie[oa]-ze[oa]-ca+Pt.altAxis,Oe=ma?Qn+Ie[oa]+ze[oa]-ca-Pt.altAxis:la,Ve=re&&ma?St(pe,Qn,Oe):fe(re?pe:na,Qn,re?Oe:la);Ce[$e]=Ve,Dt[$e]=Ve-Qn}n.modifiersData[g]=Dt}}var xt={name:"preventOverflow",enabled:!0,phase:"main",fn:on,requiresIfExists:["offset"]};function an(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function sn(e){return e===H(e)||!B(e)?We(e):an(e)}function fn(e){var n=e.getBoundingClientRect(),r=Z(n.width)/e.offsetWidth||1,g=Z(n.height)/e.offsetHeight||1;return r!==1||g!==1}function cn(e,n,r){r===void 0&&(r=!1);var g=B(n),y=B(n)&&fn(n),k=I$1(n),$=ee(e,y),V={scrollLeft:0,scrollTop:0},L={x:0,y:0};return(g||!g&&!r)&&((C$1(n)!=="body"||Se(k))&&(V=sn(n)),B(n)?(L=ee(n,!0),L.x+=n.clientLeft,L.y+=n.clientTop):k&&(L.x=Be(k))),{x:$.left+V.scrollLeft-L.x,y:$.top+V.scrollTop-L.y,width:$.width,height:$.height}}function pn(e){var n=new Map,r=new Set,g=[];e.forEach(function(k){n.set(k.name,k)});function y(k){r.add(k.name);var $=[].concat(k.requires||[],k.requiresIfExists||[]);$.forEach(function(V){if(!r.has(V)){var L=n.get(V);L&&y(L)}}),g.push(k)}return e.forEach(function(k){r.has(k.name)||y(k)}),g}function un(e){var n=pn(e);return ot.reduce(function(r,g){return r.concat(n.filter(function(y){return y.phase===g}))},[])}function ln(e){var n;return function(){return n||(n=new Promise(function(r){Promise.resolve().then(function(){n=void 0,r(e())})})),n}}function dn(e){var n=e.reduce(function(r,g){var y=r[g.name];return r[g.name]=y?Object.assign({},y,g,{options:Object.assign({},y.options,g.options),data:Object.assign({},y.data,g.data)}):g,r},{});return Object.keys(n).map(function(r){return n[r]})}var Ot={placement:"bottom",modifiers:[],strategy:"absolute"};function $t(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return!n.some(function(g){return!(g&&typeof g.getBoundingClientRect=="function")})}function we(e){e===void 0&&(e={});var n=e,r=n.defaultModifiers,g=r===void 0?[]:r,y=n.defaultOptions,k=y===void 0?Ot:y;return function($,V,L){L===void 0&&(L=k);var z={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ot,k),modifiersData:{},elements:{reference:$,popper:V},attributes:{},styles:{}},j=[],ae=!1,oe={state:z,setOptions:function(le){var de=typeof le=="function"?le(z.options):le;ue(),z.options=Object.assign({},k,z.options,de),z.scrollParents={reference:Q($)?ce($):$.contextElement?ce($.contextElement):[],popper:ce(V)};var he=un(dn([].concat(g,z.options.modifiers)));return z.orderedModifiers=he.filter(function(_e){return _e.enabled}),re(),oe.update()},forceUpdate:function(){if(!ae){var le=z.elements,de=le.reference,he=le.popper;if($t(de,he)){z.rects={reference:cn(de,se(he),z.options.strategy==="fixed"),popper:ke(he)},z.reset=!1,z.placement=z.options.placement,z.orderedModifiers.forEach(function(ze){return z.modifiersData[ze.name]=Object.assign({},ze.data)});for(var _e=0;_e<z.orderedModifiers.length;_e++){if(z.reset===!0){z.reset=!1,_e=-1;continue}var xe=z.orderedModifiers[_e],Ne=xe.fn,$e=xe.options,Ce=$e===void 0?{}:$e,Ie=xe.name;typeof Ne=="function"&&(z=Ne({state:z,options:Ce,name:Ie,instance:oe})||z)}}}},update:ln(function(){return new Promise(function(le){oe.forceUpdate(),le(z)})}),destroy:function(){ue(),ae=!0}};if(!$t($,V))return oe;oe.setOptions(L).then(function(le){!ae&&L.onFirstUpdate&&L.onFirstUpdate(le)});function re(){z.orderedModifiers.forEach(function(le){var de=le.name,he=le.options,_e=he===void 0?{}:he,xe=le.effect;if(typeof xe=="function"){var Ne=xe({state:z,name:de,instance:oe,options:_e}),$e=function(){};j.push(Ne||$e)}})}function ue(){j.forEach(function(le){return le()}),j=[]}return oe}}we();var mn=[Re,He,Me,Ae];we({defaultModifiers:mn});var gn=[Re,He,Me,Ae,wt,vt,xt,pt,bt],yn=we({defaultModifiers:gn});const usePopper=(e,n,r={})=>{const g={name:"updateState",enabled:!0,phase:"write",fn:({state:L})=>{const z=deriveState(L);Object.assign($.value,z)},requires:["computeStyles"]},y=computed(()=>{const{onFirstUpdate:L,placement:z,strategy:j,modifiers:ae}=unref(r);return{onFirstUpdate:L,placement:z||"bottom",strategy:j||"absolute",modifiers:[...ae||[],g,{name:"applyStyles",enabled:!1}]}}),k=shallowRef(),$=ref({styles:{popper:{position:unref(y).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),V=()=>{k.value&&(k.value.destroy(),k.value=void 0)};return watch(y,L=>{const z=unref(k);z&&z.setOptions(L)},{deep:!0}),watch([e,n],([L,z])=>{V(),!(!L||!z)&&(k.value=yn(L,z,unref(y)))}),onBeforeUnmount(()=>{V()}),{state:computed(()=>{var L;return{...((L=unref(k))==null?void 0:L.state)||{}}}),styles:computed(()=>unref($).styles),attributes:computed(()=>unref($).attributes),update:()=>{var L;return(L=unref(k))==null?void 0:L.update()},forceUpdate:()=>{var L;return(L=unref(k))==null?void 0:L.forceUpdate()},instanceRef:computed(()=>unref(k))}};function deriveState(e){const n=Object.keys(e.elements),r=fromPairs(n.map(y=>[y,e.styles[y]||{}])),g=fromPairs(n.map(y=>[y,e.attributes[y]]));return{styles:r,attributes:g}}const useSameTarget=e=>{if(!e)return{onClick:NOOP,onMousedown:NOOP,onMouseup:NOOP};let n=!1,r=!1;return{onClick:$=>{n&&r&&e($),n=r=!1},onMousedown:$=>{n=$.target===$.currentTarget},onMouseup:$=>{r=$.target===$.currentTarget}}},useThrottleRender=(e,n=0)=>{if(n===0)return e;const r=ref(!1);let g=0;const y=()=>{g&&clearTimeout(g),g=window.setTimeout(()=>{r.value=e.value},n)};return onMounted(y),watch(()=>e.value,k=>{k?y():r.value=k}),r};function useTimeout(){let e;const n=(g,y)=>{r(),e=window.setTimeout(g,y)},r=()=>window.clearTimeout(e);return tryOnScopeDispose(()=>r()),{registerTimeout:n,cancelTimeout:r}}const defaultIdInjection={prefix:Math.floor(Math.random()*1e4),current:0},ID_INJECTION_KEY=Symbol("elIdInjection"),useIdInjection=()=>getCurrentInstance()?inject(ID_INJECTION_KEY,defaultIdInjection):defaultIdInjection,useId=e=>{const n=useIdInjection(),r=useGetDerivedNamespace();return computed(()=>unref(e)||`${r.value}-id-${n.prefix}-${n.current++}`)};let registeredEscapeHandlers=[];const cachedHandler=e=>{const n=e;n.key===EVENT_CODE.esc&&registeredEscapeHandlers.forEach(r=>r(n))},useEscapeKeydown=e=>{onMounted(()=>{registeredEscapeHandlers.length===0&&document.addEventListener("keydown",cachedHandler),isClient&&registeredEscapeHandlers.push(e)}),onBeforeUnmount(()=>{registeredEscapeHandlers=registeredEscapeHandlers.filter(n=>n!==e),registeredEscapeHandlers.length===0&&isClient&&document.removeEventListener("keydown",cachedHandler)})};let cachedContainer;const usePopperContainerId=()=>{const e=useGetDerivedNamespace(),n=useIdInjection(),r=computed(()=>`${e.value}-popper-container-${n.prefix}`),g=computed(()=>`#${r.value}`);return{id:r,selector:g}},createContainer=e=>{const n=document.createElement("div");return n.id=e,document.body.appendChild(n),n},usePopperContainer=()=>{const{id:e,selector:n}=usePopperContainerId();return onBeforeMount(()=>{isClient&&!cachedContainer&&!document.body.querySelector(n.value)&&(cachedContainer=createContainer(e.value))}),{id:e,selector:n}},useDelayedToggleProps=buildProps({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),useDelayedToggle=({showAfter:e,hideAfter:n,autoClose:r,open:g,close:y})=>{const{registerTimeout:k}=useTimeout(),{registerTimeout:$,cancelTimeout:V}=useTimeout();return{onOpen:j=>{k(()=>{g(j);const ae=unref(r);isNumber$1(ae)&&ae>0&&$(()=>{y(j)},ae)},unref(e))},onClose:j=>{V(),k(()=>{y(j)},unref(n))}}},FORWARD_REF_INJECTION_KEY=Symbol("elForwardRef"),useForwardRef=e=>{provide(FORWARD_REF_INJECTION_KEY,{setForwardRef:r=>{e.value=r}})},useForwardRefDirective=e=>({mounted(n){e(n)},updated(n){e(n)},unmounted(){e(null)}}),zIndex=ref(0),defaultInitialZIndex=2e3,zIndexContextKey=Symbol("zIndexContextKey"),useZIndex=e=>{const n=e||(getCurrentInstance()?inject(zIndexContextKey,void 0):void 0),r=computed(()=>{const k=unref(n);return isNumber$1(k)?k:defaultInitialZIndex}),g=computed(()=>r.value+zIndex.value);return{initialZIndex:r,currentZIndex:g,nextZIndex:()=>(zIndex.value++,g.value)}},min$1=Math.min,max$1=Math.max,round=Math.round,createCoords=e=>({x:e,y:e});function clamp(e,n,r){return max$1(e,min$1(n,r))}function evaluate(e,n){return typeof e=="function"?e(n):e}function getSide(e){return e.split("-")[0]}function getAlignment(e){return e.split("-")[1]}function getOppositeAxis(e){return e==="x"?"y":"x"}function getAxisLength(e){return e==="y"?"height":"width"}function getSideAxis(e){return["top","bottom"].includes(getSide(e))?"y":"x"}function getAlignmentAxis(e){return getOppositeAxis(getSideAxis(e))}function expandPaddingObject(e){return{top:0,right:0,bottom:0,left:0,...e}}function getPaddingObject(e){return typeof e!="number"?expandPaddingObject(e):{top:e,right:e,bottom:e,left:e}}function rectToClientRect(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function computeCoordsFromPlacement(e,n,r){let{reference:g,floating:y}=e;const k=getSideAxis(n),$=getAlignmentAxis(n),V=getAxisLength($),L=getSide(n),z=k==="y",j=g.x+g.width/2-y.width/2,ae=g.y+g.height/2-y.height/2,oe=g[V]/2-y[V]/2;let re;switch(L){case"top":re={x:j,y:g.y-y.height};break;case"bottom":re={x:j,y:g.y+g.height};break;case"right":re={x:g.x+g.width,y:ae};break;case"left":re={x:g.x-y.width,y:ae};break;default:re={x:g.x,y:g.y}}switch(getAlignment(n)){case"start":re[$]-=oe*(r&&z?-1:1);break;case"end":re[$]+=oe*(r&&z?-1:1);break}return re}const computePosition$1=async(e,n,r)=>{const{placement:g="bottom",strategy:y="absolute",middleware:k=[],platform:$}=r,V=k.filter(Boolean),L=await($.isRTL==null?void 0:$.isRTL(n));let z=await $.getElementRects({reference:e,floating:n,strategy:y}),{x:j,y:ae}=computeCoordsFromPlacement(z,g,L),oe=g,re={},ue=0;for(let le=0;le<V.length;le++){const{name:de,fn:he}=V[le],{x:_e,y:xe,data:Ne,reset:$e}=await he({x:j,y:ae,initialPlacement:g,placement:oe,strategy:y,middlewareData:re,rects:z,platform:$,elements:{reference:e,floating:n}});if(j=_e??j,ae=xe??ae,re={...re,[de]:{...re[de],...Ne}},$e&&ue<=50){ue++,typeof $e=="object"&&($e.placement&&(oe=$e.placement),$e.rects&&(z=$e.rects===!0?await $.getElementRects({reference:e,floating:n,strategy:y}):$e.rects),{x:j,y:ae}=computeCoordsFromPlacement(z,oe,L)),le=-1;continue}}return{x:j,y:ae,placement:oe,strategy:y,middlewareData:re}},arrow=e=>({name:"arrow",options:e,async fn(n){const{x:r,y:g,placement:y,rects:k,platform:$,elements:V}=n,{element:L,padding:z=0}=evaluate(e,n)||{};if(L==null)return{};const j=getPaddingObject(z),ae={x:r,y:g},oe=getAlignmentAxis(y),re=getAxisLength(oe),ue=await $.getDimensions(L),le=oe==="y",de=le?"top":"left",he=le?"bottom":"right",_e=le?"clientHeight":"clientWidth",xe=k.reference[re]+k.reference[oe]-ae[oe]-k.floating[re],Ne=ae[oe]-k.reference[oe],$e=await($.getOffsetParent==null?void 0:$.getOffsetParent(L));let Ce=$e?$e[_e]:0;(!Ce||!await($.isElement==null?void 0:$.isElement($e)))&&(Ce=V.floating[_e]||k.floating[re]);const Ie=xe/2-Ne/2,ze=Ce/2-ue[re]/2-1,Ue=min$1(j[de],ze),Pt=min$1(j[he],ze),hn=Ue,Dt=Ce-ue[re]-Pt,xn=Ce/2-ue[re]/2+Ie,jt=clamp(hn,xn,Dt),Rn=getAlignment(y)!=null&&xn!=jt&&k.reference[re]/2-(xn<hn?Ue:Pt)-ue[re]/2<0?xn<hn?hn-xn:Dt-xn:0;return{[oe]:ae[oe]-Rn,data:{[oe]:jt,centerOffset:xn-jt+Rn}}}});async function convertValueToCoords(e,n){const{placement:r,platform:g,elements:y}=e,k=await(g.isRTL==null?void 0:g.isRTL(y.floating)),$=getSide(r),V=getAlignment(r),L=getSideAxis(r)==="y",z=["left","top"].includes($)?-1:1,j=k&&L?-1:1,ae=evaluate(n,e);let{mainAxis:oe,crossAxis:re,alignmentAxis:ue}=typeof ae=="number"?{mainAxis:ae,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...ae};return V&&typeof ue=="number"&&(re=V==="end"?ue*-1:ue),L?{x:re*j,y:oe*z}:{x:oe*z,y:re*j}}const offset$1=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){const{x:r,y:g}=n,y=await convertValueToCoords(n,e);return{x:r+y.x,y:g+y.y,data:y}}}};function getNodeName(e){return isNode(e)?(e.nodeName||"").toLowerCase():"#document"}function getWindow(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function getDocumentElement(e){var n;return(n=(isNode(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function isNode(e){return e instanceof Node||e instanceof getWindow(e).Node}function isElement(e){return e instanceof Element||e instanceof getWindow(e).Element}function isHTMLElement(e){return e instanceof HTMLElement||e instanceof getWindow(e).HTMLElement}function isShadowRoot(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof getWindow(e).ShadowRoot}function isOverflowElement(e){const{overflow:n,overflowX:r,overflowY:g,display:y}=getComputedStyle$1(e);return/auto|scroll|overlay|hidden|clip/.test(n+g+r)&&!["inline","contents"].includes(y)}function isTableElement(e){return["table","td","th"].includes(getNodeName(e))}function isContainingBlock(e){const n=isWebKit(),r=getComputedStyle$1(e);return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!n&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!n&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(g=>(r.willChange||"").includes(g))||["paint","layout","strict","content"].some(g=>(r.contain||"").includes(g))}function getContainingBlock(e){let n=getParentNode(e);for(;isHTMLElement(n)&&!isLastTraversableNode(n);){if(isContainingBlock(n))return n;n=getParentNode(n)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(e){return["html","body","#document"].includes(getNodeName(e))}function getComputedStyle$1(e){return getWindow(e).getComputedStyle(e)}function getNodeScroll(e){return isElement(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function getParentNode(e){if(getNodeName(e)==="html")return e;const n=e.assignedSlot||e.parentNode||isShadowRoot(e)&&e.host||getDocumentElement(e);return isShadowRoot(n)?n.host:n}function getNearestOverflowAncestor(e){const n=getParentNode(e);return isLastTraversableNode(n)?e.ownerDocument?e.ownerDocument.body:e.body:isHTMLElement(n)&&isOverflowElement(n)?n:getNearestOverflowAncestor(n)}function getOverflowAncestors(e,n){var r;n===void 0&&(n=[]);const g=getNearestOverflowAncestor(e),y=g===((r=e.ownerDocument)==null?void 0:r.body),k=getWindow(g);return y?n.concat(k,k.visualViewport||[],isOverflowElement(g)?g:[],k.frameElement?getOverflowAncestors(k.frameElement):[]):n.concat(g,getOverflowAncestors(g))}function getCssDimensions(e){const n=getComputedStyle$1(e);let r=parseFloat(n.width)||0,g=parseFloat(n.height)||0;const y=isHTMLElement(e),k=y?e.offsetWidth:r,$=y?e.offsetHeight:g,V=round(r)!==k||round(g)!==$;return V&&(r=k,g=$),{width:r,height:g,$:V}}function unwrapElement(e){return isElement(e)?e:e.contextElement}function getScale$1(e){const n=unwrapElement(e);if(!isHTMLElement(n))return createCoords(1);const r=n.getBoundingClientRect(),{width:g,height:y,$:k}=getCssDimensions(n);let $=(k?round(r.width):r.width)/g,V=(k?round(r.height):r.height)/y;return(!$||!Number.isFinite($))&&($=1),(!V||!Number.isFinite(V))&&(V=1),{x:$,y:V}}const noOffsets=createCoords(0);function getVisualOffsets(e){const n=getWindow(e);return!isWebKit()||!n.visualViewport?noOffsets:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function shouldAddVisualOffsets(e,n,r){return n===void 0&&(n=!1),!r||n&&r!==getWindow(e)?!1:n}function getBoundingClientRect(e,n,r,g){n===void 0&&(n=!1),r===void 0&&(r=!1);const y=e.getBoundingClientRect(),k=unwrapElement(e);let $=createCoords(1);n&&(g?isElement(g)&&($=getScale$1(g)):$=getScale$1(e));const V=shouldAddVisualOffsets(k,r,g)?getVisualOffsets(k):createCoords(0);let L=(y.left+V.x)/$.x,z=(y.top+V.y)/$.y,j=y.width/$.x,ae=y.height/$.y;if(k){const oe=getWindow(k),re=g&&isElement(g)?getWindow(g):g;let ue=oe.frameElement;for(;ue&&g&&re!==oe;){const le=getScale$1(ue),de=ue.getBoundingClientRect(),he=getComputedStyle$1(ue),_e=de.left+(ue.clientLeft+parseFloat(he.paddingLeft))*le.x,xe=de.top+(ue.clientTop+parseFloat(he.paddingTop))*le.y;L*=le.x,z*=le.y,j*=le.x,ae*=le.y,L+=_e,z+=xe,ue=getWindow(ue).frameElement}}return rectToClientRect({width:j,height:ae,x:L,y:z})}function convertOffsetParentRelativeRectToViewportRelativeRect(e){let{rect:n,offsetParent:r,strategy:g}=e;const y=isHTMLElement(r),k=getDocumentElement(r);if(r===k)return n;let $={scrollLeft:0,scrollTop:0},V=createCoords(1);const L=createCoords(0);if((y||!y&&g!=="fixed")&&((getNodeName(r)!=="body"||isOverflowElement(k))&&($=getNodeScroll(r)),isHTMLElement(r))){const z=getBoundingClientRect(r);V=getScale$1(r),L.x=z.x+r.clientLeft,L.y=z.y+r.clientTop}return{width:n.width*V.x,height:n.height*V.y,x:n.x*V.x-$.scrollLeft*V.x+L.x,y:n.y*V.y-$.scrollTop*V.y+L.y}}function getClientRects(e){return Array.from(e.getClientRects())}function getWindowScrollBarX(e){return getBoundingClientRect(getDocumentElement(e)).left+getNodeScroll(e).scrollLeft}function getDocumentRect(e){const n=getDocumentElement(e),r=getNodeScroll(e),g=e.ownerDocument.body,y=max$1(n.scrollWidth,n.clientWidth,g.scrollWidth,g.clientWidth),k=max$1(n.scrollHeight,n.clientHeight,g.scrollHeight,g.clientHeight);let $=-r.scrollLeft+getWindowScrollBarX(e);const V=-r.scrollTop;return getComputedStyle$1(g).direction==="rtl"&&($+=max$1(n.clientWidth,g.clientWidth)-y),{width:y,height:k,x:$,y:V}}function getViewportRect(e,n){const r=getWindow(e),g=getDocumentElement(e),y=r.visualViewport;let k=g.clientWidth,$=g.clientHeight,V=0,L=0;if(y){k=y.width,$=y.height;const z=isWebKit();(!z||z&&n==="fixed")&&(V=y.offsetLeft,L=y.offsetTop)}return{width:k,height:$,x:V,y:L}}function getInnerBoundingClientRect(e,n){const r=getBoundingClientRect(e,!0,n==="fixed"),g=r.top+e.clientTop,y=r.left+e.clientLeft,k=isHTMLElement(e)?getScale$1(e):createCoords(1),$=e.clientWidth*k.x,V=e.clientHeight*k.y,L=y*k.x,z=g*k.y;return{width:$,height:V,x:L,y:z}}function getClientRectFromClippingAncestor(e,n,r){let g;if(n==="viewport")g=getViewportRect(e,r);else if(n==="document")g=getDocumentRect(getDocumentElement(e));else if(isElement(n))g=getInnerBoundingClientRect(n,r);else{const y=getVisualOffsets(e);g={...n,x:n.x-y.x,y:n.y-y.y}}return rectToClientRect(g)}function hasFixedPositionAncestor(e,n){const r=getParentNode(e);return r===n||!isElement(r)||isLastTraversableNode(r)?!1:getComputedStyle$1(r).position==="fixed"||hasFixedPositionAncestor(r,n)}function getClippingElementAncestors(e,n){const r=n.get(e);if(r)return r;let g=getOverflowAncestors(e).filter(V=>isElement(V)&&getNodeName(V)!=="body"),y=null;const k=getComputedStyle$1(e).position==="fixed";let $=k?getParentNode(e):e;for(;isElement($)&&!isLastTraversableNode($);){const V=getComputedStyle$1($),L=isContainingBlock($);!L&&V.position==="fixed"&&(y=null),(k?!L&&!y:!L&&V.position==="static"&&!!y&&["absolute","fixed"].includes(y.position)||isOverflowElement($)&&!L&&hasFixedPositionAncestor(e,$))?g=g.filter(j=>j!==$):y=V,$=getParentNode($)}return n.set(e,g),g}function getClippingRect(e){let{element:n,boundary:r,rootBoundary:g,strategy:y}=e;const $=[...r==="clippingAncestors"?getClippingElementAncestors(n,this._c):[].concat(r),g],V=$[0],L=$.reduce((z,j)=>{const ae=getClientRectFromClippingAncestor(n,j,y);return z.top=max$1(ae.top,z.top),z.right=min$1(ae.right,z.right),z.bottom=min$1(ae.bottom,z.bottom),z.left=max$1(ae.left,z.left),z},getClientRectFromClippingAncestor(n,V,y));return{width:L.right-L.left,height:L.bottom-L.top,x:L.left,y:L.top}}function getDimensions(e){return getCssDimensions(e)}function getRectRelativeToOffsetParent(e,n,r){const g=isHTMLElement(n),y=getDocumentElement(n),k=r==="fixed",$=getBoundingClientRect(e,!0,k,n);let V={scrollLeft:0,scrollTop:0};const L=createCoords(0);if(g||!g&&!k)if((getNodeName(n)!=="body"||isOverflowElement(y))&&(V=getNodeScroll(n)),g){const z=getBoundingClientRect(n,!0,k,n);L.x=z.x+n.clientLeft,L.y=z.y+n.clientTop}else y&&(L.x=getWindowScrollBarX(y));return{x:$.left+V.scrollLeft-L.x,y:$.top+V.scrollTop-L.y,width:$.width,height:$.height}}function getTrueOffsetParent(e,n){return!isHTMLElement(e)||getComputedStyle$1(e).position==="fixed"?null:n?n(e):e.offsetParent}function getOffsetParent(e,n){const r=getWindow(e);if(!isHTMLElement(e))return r;let g=getTrueOffsetParent(e,n);for(;g&&isTableElement(g)&&getComputedStyle$1(g).position==="static";)g=getTrueOffsetParent(g,n);return g&&(getNodeName(g)==="html"||getNodeName(g)==="body"&&getComputedStyle$1(g).position==="static"&&!isContainingBlock(g))?r:g||getContainingBlock(e)||r}const getElementRects=async function(e){let{reference:n,floating:r,strategy:g}=e;const y=this.getOffsetParent||getOffsetParent,k=this.getDimensions;return{reference:getRectRelativeToOffsetParent(n,await y(r),g),floating:{x:0,y:0,...await k(r)}}};function isRTL$1(e){return getComputedStyle$1(e).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale:getScale$1,isElement,isRTL:isRTL$1},computePosition=(e,n,r)=>{const g=new Map,y={platform,...r},k={...y.platform,_c:g};return computePosition$1(e,n,{...y,platform:k})};buildProps({});const unrefReference=e=>{if(!isClient)return;if(!e)return e;const n=unrefElement(e);return n||(isRef(e)?n:e)},useFloating=({middleware:e,placement:n,strategy:r})=>{const g=ref(),y=ref(),k=ref(),$=ref(),V=ref({}),L={x:k,y:$,placement:n,strategy:r,middlewareData:V},z=async()=>{if(!isClient)return;const j=unrefReference(g),ae=unrefElement(y);if(!j||!ae)return;const oe=await computePosition(j,ae,{placement:unref(n),strategy:unref(r),middleware:unref(e)});keysOf(L).forEach(re=>{L[re].value=oe[re]})};return onMounted(()=>{watchEffect(()=>{z()})}),{...L,update:z,referenceRef:g,contentRef:y}},arrowMiddleware=({arrowRef:e,padding:n})=>({name:"arrow",options:{element:e,padding:n},fn(r){const g=unref(e);return g?arrow({element:g,padding:n}).fn(r):{}}});function useCursor(e){const n=ref();function r(){if(e.value==null)return;const{selectionStart:y,selectionEnd:k,value:$}=e.value;if(y==null||k==null)return;const V=$.slice(0,Math.max(0,y)),L=$.slice(Math.max(0,k));n.value={selectionStart:y,selectionEnd:k,value:$,beforeTxt:V,afterTxt:L}}function g(){if(e.value==null||n.value==null)return;const{value:y}=e.value,{beforeTxt:k,afterTxt:$,selectionStart:V}=n.value;if(k==null||$==null||V==null)return;let L=y.length;if(y.endsWith($))L=y.length-$.length;else if(y.startsWith(k))L=k.length;else{const z=k[V-1],j=y.indexOf(z,V-1);j!==-1&&(L=j+1)}e.value.setSelectionRange(L,L)}return[r,g]}const getOrderedChildren=(e,n,r)=>flattedChildren(e.subTree).filter(k=>{var $;return isVNode$1(k)&&(($=k.type)==null?void 0:$.name)===n&&!!k.component}).map(k=>k.component.uid).map(k=>r[k]).filter(k=>!!k),useOrderedChildren=(e,n)=>{const r={},g=shallowRef([]);return{children:g,addChild:$=>{r[$.uid]=$,g.value=getOrderedChildren(e,n,r)},removeChild:$=>{delete r[$],g.value=g.value.filter(V=>V.uid!==$)}}},useSizeProp=buildProp({type:String,values:componentSizes,required:!1}),SIZE_INJECTION_KEY=Symbol("size"),useGlobalSize=()=>{const e=inject(SIZE_INJECTION_KEY,{});return computed(()=>unref(e.size)||"")};function useFocusController(e,{afterFocus:n,afterBlur:r}={}){const g=getCurrentInstance(),{emit:y}=g,k=shallowRef(),$=ref(!1),V=j=>{$.value||($.value=!0,y("focus",j),n?.())},L=j=>{var ae;j.relatedTarget&&((ae=k.value)!=null&&ae.contains(j.relatedTarget))||($.value=!1,y("blur",j),r?.())},z=()=>{var j;(j=e.value)==null||j.focus()};return watch(k,j=>{j&&j.setAttribute("tabindex","-1")}),useEventListener(k,"click",z),{wrapperRef:k,isFocused:$,handleFocus:V,handleBlur:L}}const configProviderContextKey=Symbol(),globalConfig=ref();function useGlobalConfig(e,n=void 0){const r=getCurrentInstance()?inject(configProviderContextKey,globalConfig):globalConfig;return e?computed(()=>{var g,y;return(y=(g=r.value)==null?void 0:g[e])!=null?y:n}):r}function useGlobalComponentSettings(e,n){const r=useGlobalConfig(),g=useNamespace(e,computed(()=>{var V;return((V=r.value)==null?void 0:V.namespace)||defaultNamespace})),y=useLocale(computed(()=>{var V;return(V=r.value)==null?void 0:V.locale})),k=useZIndex(computed(()=>{var V;return((V=r.value)==null?void 0:V.zIndex)||defaultInitialZIndex})),$=computed(()=>{var V;return unref(n)||((V=r.value)==null?void 0:V.size)||""});return provideGlobalConfig(computed(()=>unref(r)||{})),{ns:g,locale:y,zIndex:k,size:$}}const provideGlobalConfig=(e,n,r=!1)=>{var g;const y=!!getCurrentInstance(),k=y?useGlobalConfig():void 0,$=(g=n?.provide)!=null?g:y?provide:void 0;if(!$)return;const V=computed(()=>{const L=unref(e);return k?.value?mergeConfig(k.value,L):L});return $(configProviderContextKey,V),$(localeContextKey,computed(()=>V.value.locale)),$(namespaceContextKey,computed(()=>V.value.namespace)),$(zIndexContextKey,computed(()=>V.value.zIndex)),$(SIZE_INJECTION_KEY,{size:computed(()=>V.value.size||"")}),(r||!globalConfig.value)&&(globalConfig.value=V.value),V},mergeConfig=(e,n)=>{var r;const g=[...new Set([...keysOf(e),...keysOf(n)])],y={};for(const k of g)y[k]=(r=n[k])!=null?r:e[k];return y},configProviderProps=buildProps({a11y:{type:Boolean,default:!0},locale:{type:definePropType(Object)},size:useSizeProp,button:{type:definePropType(Object)},experimentalFeatures:{type:definePropType(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:definePropType(Object)},zIndex:Number,namespace:{type:String,default:"el"}}),messageConfig={},ConfigProvider=defineComponent({name:"ElConfigProvider",props:configProviderProps,setup(e,{slots:n}){watch(()=>e.message,g=>{Object.assign(messageConfig,g??{})},{immediate:!0,deep:!0});const r=provideGlobalConfig(e);return()=>renderSlot(n,"default",{config:r?.value})}}),ElConfigProvider=withInstall(ConfigProvider),version="2.3.12",makeInstaller=(e=[])=>({version,install:(r,g)=>{r[INSTALLED_KEY]||(r[INSTALLED_KEY]=!0,e.forEach(y=>r.use(y)),g&&provideGlobalConfig(g,r,!0))}}),affixProps=buildProps({zIndex:{type:definePropType([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),affixEmits={scroll:({scrollTop:e,fixed:n})=>isNumber$1(e)&&isBoolean$1(n),[CHANGE_EVENT]:e=>isBoolean$1(e)};var _export_sfc$1=(e,n)=>{const r=e.__vccOpts||e;for(const[g,y]of n)r[g]=y;return r};const COMPONENT_NAME$n="ElAffix",__default__$1C=defineComponent({name:COMPONENT_NAME$n}),_sfc_main$3z=defineComponent({...__default__$1C,props:affixProps,emits:affixEmits,setup(e,{expose:n,emit:r}){const g=e,y=useNamespace("affix"),k=shallowRef(),$=shallowRef(),V=shallowRef(),{height:L}=useWindowSize(),{height:z,width:j,top:ae,bottom:oe,update:re}=useElementBounding($,{windowScroll:!1}),ue=useElementBounding(k),le=ref(!1),de=ref(0),he=ref(0),_e=computed(()=>({height:le.value?`${z.value}px`:"",width:le.value?`${j.value}px`:""})),xe=computed(()=>{if(!le.value)return{};const Ce=g.offset?addUnit(g.offset):0;return{height:`${z.value}px`,width:`${j.value}px`,top:g.position==="top"?Ce:"",bottom:g.position==="bottom"?Ce:"",transform:he.value?`translateY(${he.value}px)`:"",zIndex:g.zIndex}}),Ne=()=>{if(V.value)if(de.value=V.value instanceof Window?document.documentElement.scrollTop:V.value.scrollTop||0,g.position==="top")if(g.target){const Ce=ue.bottom.value-g.offset-z.value;le.value=g.offset>ae.value&&ue.bottom.value>0,he.value=Ce<0?Ce:0}else le.value=g.offset>ae.value;else if(g.target){const Ce=L.value-ue.top.value-g.offset-z.value;le.value=L.value-g.offset<oe.value&&L.value>ue.top.value,he.value=Ce<0?-Ce:0}else le.value=L.value-g.offset<oe.value},$e=()=>{re(),r("scroll",{scrollTop:de.value,fixed:le.value})};return watch(le,Ce=>r("change",Ce)),onMounted(()=>{var Ce;g.target?(k.value=(Ce=document.querySelector(g.target))!=null?Ce:void 0,k.value||throwError(COMPONENT_NAME$n,`Target is not existed: ${g.target}`)):k.value=document.documentElement,V.value=getScrollContainer($.value,!0),re()}),useEventListener(V,"scroll",$e),watchEffect(Ne),n({update:Ne,updateRoot:re}),(Ce,Ie)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:$,class:normalizeClass(unref(y).b()),style:normalizeStyle(unref(_e))},[createBaseVNode("div",{class:normalizeClass({[unref(y).m("fixed")]:le.value}),style:normalizeStyle(unref(xe))},[renderSlot(Ce.$slots,"default")],6)],6))}});var Affix=_export_sfc$1(_sfc_main$3z,[["__file","/home/runner/work/element-plus/element-plus/packages/components/affix/src/affix.vue"]]);const ElAffix=withInstall(Affix),iconProps=buildProps({size:{type:definePropType([Number,String])},color:{type:String}}),__default__$1B=defineComponent({name:"ElIcon",inheritAttrs:!1}),_sfc_main$3y=defineComponent({...__default__$1B,props:iconProps,setup(e){const n=e,r=useNamespace("icon"),g=computed(()=>{const{size:y,color:k}=n;return!y&&!k?{}:{fontSize:isUndefined(y)?void 0:addUnit(y),"--color":k}});return(y,k)=>(openBlock(),createElementBlock("i",mergeProps({class:unref(r).b(),style:unref(g)},y.$attrs),[renderSlot(y.$slots,"default")],16))}});var Icon=_export_sfc$1(_sfc_main$3y,[["__file","/home/runner/work/element-plus/element-plus/packages/components/icon/src/icon.vue"]]);const ElIcon=withInstall(Icon),alertEffects=["light","dark"],alertProps=buildProps({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:keysOf(TypeComponentsMap),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:alertEffects,default:"light"}}),alertEmits={close:e=>e instanceof MouseEvent},__default__$1A=defineComponent({name:"ElAlert"}),_sfc_main$3x=defineComponent({...__default__$1A,props:alertProps,emits:alertEmits,setup(e,{emit:n}){const r=e,{Close:g}=TypeComponents,y=useSlots(),k=useNamespace("alert"),$=ref(!0),V=computed(()=>TypeComponentsMap[r.type]),L=computed(()=>[k.e("icon"),{[k.is("big")]:!!r.description||!!y.default}]),z=computed(()=>({[k.is("bold")]:r.description||y.default})),j=ae=>{$.value=!1,n("close",ae)};return(ae,oe)=>(openBlock(),createBlock(Transition,{name:unref(k).b("fade"),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{class:normalizeClass([unref(k).b(),unref(k).m(ae.type),unref(k).is("center",ae.center),unref(k).is(ae.effect)]),role:"alert"},[ae.showIcon&&unref(V)?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(L))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(V))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(k).e("content"))},[ae.title||ae.$slots.title?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass([unref(k).e("title"),unref(z)])},[renderSlot(ae.$slots,"title",{},()=>[createTextVNode(toDisplayString$1(ae.title),1)])],2)):createCommentVNode("v-if",!0),ae.$slots.default||ae.description?(openBlock(),createElementBlock("p",{key:1,class:normalizeClass(unref(k).e("description"))},[renderSlot(ae.$slots,"default",{},()=>[createTextVNode(toDisplayString$1(ae.description),1)])],2)):createCommentVNode("v-if",!0),ae.closable?(openBlock(),createElementBlock(Fragment,{key:2},[ae.closeText?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([unref(k).e("close-btn"),unref(k).is("customed")]),onClick:j},toDisplayString$1(ae.closeText),3)):(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass(unref(k).e("close-btn")),onClick:j},{default:withCtx(()=>[createVNode(unref(g))]),_:1},8,["class"]))],64)):createCommentVNode("v-if",!0)],2)],2),[[vShow,$.value]])]),_:3},8,["name"]))}});var Alert=_export_sfc$1(_sfc_main$3x,[["__file","/home/runner/work/element-plus/element-plus/packages/components/alert/src/alert.vue"]]);const ElAlert=withInstall(Alert),formContextKey=Symbol("formContextKey"),formItemContextKey=Symbol("formItemContextKey"),useFormSize=(e,n={})=>{const r=ref(void 0),g=n.prop?r:useProp("size"),y=n.global?r:useGlobalSize(),k=n.form?{size:void 0}:inject(formContextKey,void 0),$=n.formItem?{size:void 0}:inject(formItemContextKey,void 0);return computed(()=>g.value||unref(e)||$?.size||k?.size||y.value||"")},useFormDisabled=e=>{const n=useProp("disabled"),r=inject(formContextKey,void 0);return computed(()=>n.value||unref(e)||r?.disabled||!1)},useFormItem=()=>{const e=inject(formContextKey,void 0),n=inject(formItemContextKey,void 0);return{form:e,formItem:n}},useFormItemInputId=(e,{formItemContext:n,disableIdGeneration:r,disableIdManagement:g})=>{r||(r=ref(!1)),g||(g=ref(!1));const y=ref();let k;const $=computed(()=>{var V;return!!(!e.label&&n&&n.inputIds&&((V=n.inputIds)==null?void 0:V.length)<=1)});return onMounted(()=>{k=watch([toRef(e,"id"),r],([V,L])=>{const z=V??(L?void 0:useId().value);z!==y.value&&(n?.removeInputId&&(y.value&&n.removeInputId(y.value),!g?.value&&!L&&z&&n.addInputId(z)),y.value=z)},{immediate:!0})}),onUnmounted(()=>{k&&k(),n?.removeInputId&&y.value&&n.removeInputId(y.value)}),{isLabeledByFormItem:$,inputId:y}},formMetaProps=buildProps({size:{type:String,values:componentSizes},disabled:Boolean}),formProps=buildProps({...formMetaProps,model:Object,rules:{type:definePropType(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),formEmits={validate:(e,n,r)=>(isArray$3(e)||isString$3(e))&&isBoolean$1(n)&&isString$3(r)};function useFormLabelWidth(){const e=ref([]),n=computed(()=>{if(!e.value.length)return"0";const k=Math.max(...e.value);return k?`${k}px`:""});function r(k){const $=e.value.indexOf(k);return $===-1&&n.value,$}function g(k,$){if(k&&$){const V=r($);e.value.splice(V,1,k)}else k&&e.value.push(k)}function y(k){const $=r(k);$>-1&&e.value.splice($,1)}return{autoLabelWidth:n,registerLabelWidth:g,deregisterLabelWidth:y}}const filterFields=(e,n)=>{const r=castArray$1(n);return r.length>0?e.filter(g=>g.prop&&r.includes(g.prop)):e},COMPONENT_NAME$m="ElForm",__default__$1z=defineComponent({name:COMPONENT_NAME$m}),_sfc_main$3w=defineComponent({...__default__$1z,props:formProps,emits:formEmits,setup(e,{expose:n,emit:r}){const g=e,y=[],k=useFormSize(),$=useNamespace("form"),V=computed(()=>{const{labelPosition:_e,inline:xe}=g;return[$.b(),$.m(k.value||"default"),{[$.m(`label-${_e}`)]:_e,[$.m("inline")]:xe}]}),L=_e=>{y.push(_e)},z=_e=>{_e.prop&&y.splice(y.indexOf(_e),1)},j=(_e=[])=>{g.model&&filterFields(y,_e).forEach(xe=>xe.resetField())},ae=(_e=[])=>{filterFields(y,_e).forEach(xe=>xe.clearValidate())},oe=computed(()=>!!g.model),re=_e=>{if(y.length===0)return[];const xe=filterFields(y,_e);return xe.length?xe:[]},ue=async _e=>de(void 0,_e),le=async(_e=[])=>{if(!oe.value)return!1;const xe=re(_e);if(xe.length===0)return!0;let Ne={};for(const $e of xe)try{await $e.validate("")}catch(Ce){Ne={...Ne,...Ce}}return Object.keys(Ne).length===0?!0:Promise.reject(Ne)},de=async(_e=[],xe)=>{const Ne=!isFunction$3(xe);try{const $e=await le(_e);return $e===!0&&xe?.($e),$e}catch($e){if($e instanceof Error)throw $e;const Ce=$e;return g.scrollToError&&he(Object.keys(Ce)[0]),xe?.(!1,Ce),Ne&&Promise.reject(Ce)}},he=_e=>{var xe;const Ne=filterFields(y,_e)[0];Ne&&((xe=Ne.$el)==null||xe.scrollIntoView(g.scrollIntoViewOptions))};return watch(()=>g.rules,()=>{g.validateOnRuleChange&&ue().catch(_e=>void 0)},{deep:!0}),provide(formContextKey,reactive({...toRefs(g),emit:r,resetFields:j,clearValidate:ae,validateField:de,addField:L,removeField:z,...useFormLabelWidth()})),n({validate:ue,validateField:de,resetFields:j,clearValidate:ae,scrollToField:he}),(_e,xe)=>(openBlock(),createElementBlock("form",{class:normalizeClass(unref(V))},[renderSlot(_e.$slots,"default")],2))}});var Form=_export_sfc$1(_sfc_main$3w,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form.vue"]]),define_process_env_default$1={};function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var g in r)Object.prototype.hasOwnProperty.call(r,g)&&(e[g]=r[g])}return e},_extends.apply(this,arguments)}function _inheritsLoose(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,_setPrototypeOf(e,n)}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_getPrototypeOf(e)}function _setPrototypeOf(e,n){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,y){return g.__proto__=y,g},_setPrototypeOf(e,n)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _construct(e,n,r){return _isNativeReflectConstruct()?_construct=Reflect.construct.bind():_construct=function(y,k,$){var V=[null];V.push.apply(V,k);var L=Function.bind.apply(y,V),z=new L;return $&&_setPrototypeOf(z,$.prototype),z},_construct.apply(null,arguments)}function _isNativeFunction(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function _wrapNativeSuper(e){var n=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(g){if(g===null||!_isNativeFunction(g))return g;if(typeof g!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(g))return n.get(g);n.set(g,y)}function y(){return _construct(g,arguments,_getPrototypeOf(this).constructor)}return y.prototype=Object.create(g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(y,g)},_wrapNativeSuper(e)}var formatRegExp=/%[sdj%]/g,warning=function(){};typeof process<"u";function convertFieldsError(e){if(!e||!e.length)return null;var n={};return e.forEach(function(r){var g=r.field;n[g]=n[g]||[],n[g].push(r)}),n}function format$2(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),g=1;g<n;g++)r[g-1]=arguments[g];var y=0,k=r.length;if(typeof e=="function")return e.apply(null,r);if(typeof e=="string"){var $=e.replace(formatRegExp,function(V){if(V==="%%")return"%";if(y>=k)return V;switch(V){case"%s":return String(r[y++]);case"%d":return Number(r[y++]);case"%j":try{return JSON.stringify(r[y++])}catch{return"[Circular]"}break;default:return V}});return $}return e}function isNativeStringType(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function isEmptyValue(e,n){return!!(e==null||n==="array"&&Array.isArray(e)&&!e.length||isNativeStringType(n)&&typeof e=="string"&&!e)}function asyncParallelArray(e,n,r){var g=[],y=0,k=e.length;function $(V){g.push.apply(g,V||[]),y++,y===k&&r(g)}e.forEach(function(V){n(V,$)})}function asyncSerialArray(e,n,r){var g=0,y=e.length;function k($){if($&&$.length){r($);return}var V=g;g=g+1,V<y?n(e[V],k):r([])}k([])}function flattenObjArr(e){var n=[];return Object.keys(e).forEach(function(r){n.push.apply(n,e[r]||[])}),n}var AsyncValidationError=function(e){_inheritsLoose(n,e);function n(r,g){var y;return y=e.call(this,"Async Validation Error")||this,y.errors=r,y.fields=g,y}return n}(_wrapNativeSuper(Error));function asyncMap(e,n,r,g,y){if(n.first){var k=new Promise(function(oe,re){var ue=function(he){return g(he),he.length?re(new AsyncValidationError(he,convertFieldsError(he))):oe(y)},le=flattenObjArr(e);asyncSerialArray(le,r,ue)});return k.catch(function(oe){return oe}),k}var $=n.firstFields===!0?Object.keys(e):n.firstFields||[],V=Object.keys(e),L=V.length,z=0,j=[],ae=new Promise(function(oe,re){var ue=function(de){if(j.push.apply(j,de),z++,z===L)return g(j),j.length?re(new AsyncValidationError(j,convertFieldsError(j))):oe(y)};V.length||(g(j),oe(y)),V.forEach(function(le){var de=e[le];$.indexOf(le)!==-1?asyncSerialArray(de,r,ue):asyncParallelArray(de,r,ue)})});return ae.catch(function(oe){return oe}),ae}function isErrorObj(e){return!!(e&&e.message!==void 0)}function getValue(e,n){for(var r=e,g=0;g<n.length;g++){if(r==null)return r;r=r[n[g]]}return r}function complementError(e,n){return function(r){var g;return e.fullFields?g=getValue(n,e.fullFields):g=n[r.field||e.fullField],isErrorObj(r)?(r.field=r.field||e.fullField,r.fieldValue=g,r):{message:typeof r=="function"?r():r,fieldValue:g,field:r.field||e.fullField}}}function deepMerge(e,n){if(n){for(var r in n)if(n.hasOwnProperty(r)){var g=n[r];typeof g=="object"&&typeof e[r]=="object"?e[r]=_extends({},e[r],g):e[r]=g}}return e}var required$1=function(n,r,g,y,k,$){n.required&&(!g.hasOwnProperty(n.field)||isEmptyValue(r,$||n.type))&&y.push(format$2(k.messages.required,n.fullField))},whitespace=function(n,r,g,y,k){(/^\s+$/.test(r)||r==="")&&y.push(format$2(k.messages.whitespace,n.fullField))},urlReg,getUrlRegex=function(){if(urlReg)return urlReg;var e="[a-fA-F\\d:]",n=function(Ne){return Ne&&Ne.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",g="[a-fA-F\\d]{1,4}",y=(`
(?:
(?:`+g+":){7}(?:"+g+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+g+":){6}(?:"+r+"|:"+g+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+g+":){5}(?::"+r+"|(?::"+g+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+g+":){4}(?:(?::"+g+"){0,1}:"+r+"|(?::"+g+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+g+":){3}(?:(?::"+g+"){0,2}:"+r+"|(?::"+g+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+g+":){2}(?:(?::"+g+"){0,3}:"+r+"|(?::"+g+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+g+":){1}(?:(?::"+g+"){0,4}:"+r+"|(?::"+g+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+g+"){0,5}:"+r+"|(?::"+g+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),k=new RegExp("(?:^"+r+"$)|(?:^"+y+"$)"),$=new RegExp("^"+r+"$"),V=new RegExp("^"+y+"$"),L=function(Ne){return Ne&&Ne.exact?k:new RegExp("(?:"+n(Ne)+r+n(Ne)+")|(?:"+n(Ne)+y+n(Ne)+")","g")};L.v4=function(xe){return xe&&xe.exact?$:new RegExp(""+n(xe)+r+n(xe),"g")},L.v6=function(xe){return xe&&xe.exact?V:new RegExp(""+n(xe)+y+n(xe),"g")};var z="(?:(?:[a-z]+:)?//)",j="(?:\\S+(?::\\S*)?@)?",ae=L.v4().source,oe=L.v6().source,re="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",ue="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",le="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",de="(?::\\d{2,5})?",he='(?:[/?#][^\\s"]*)?',_e="(?:"+z+"|www\\.)"+j+"(?:localhost|"+ae+"|"+oe+"|"+re+ue+le+")"+de+he;return urlReg=new RegExp("(?:^"+_e+"$)","i"),urlReg},pattern$2={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},types$b={integer:function(n){return types$b.number(n)&&parseInt(n,10)===n},float:function(n){return types$b.number(n)&&!types$b.integer(n)},array:function(n){return Array.isArray(n)},regexp:function(n){if(n instanceof RegExp)return!0;try{return!!new RegExp(n)}catch{return!1}},date:function(n){return typeof n.getTime=="function"&&typeof n.getMonth=="function"&&typeof n.getYear=="function"&&!isNaN(n.getTime())},number:function(n){return isNaN(n)?!1:typeof n=="number"},object:function(n){return typeof n=="object"&&!types$b.array(n)},method:function(n){return typeof n=="function"},email:function(n){return typeof n=="string"&&n.length<=320&&!!n.match(pattern$2.email)},url:function(n){return typeof n=="string"&&n.length<=2048&&!!n.match(getUrlRegex())},hex:function(n){return typeof n=="string"&&!!n.match(pattern$2.hex)}},type$1=function(n,r,g,y,k){if(n.required&&r===void 0){required$1(n,r,g,y,k);return}var $=["integer","float","array","regexp","object","method","email","number","date","url","hex"],V=n.type;$.indexOf(V)>-1?types$b[V](r)||y.push(format$2(k.messages.types[V],n.fullField,n.type)):V&&typeof r!==n.type&&y.push(format$2(k.messages.types[V],n.fullField,n.type))},range$1=function(n,r,g,y,k){var $=typeof n.len=="number",V=typeof n.min=="number",L=typeof n.max=="number",z=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,j=r,ae=null,oe=typeof r=="number",re=typeof r=="string",ue=Array.isArray(r);if(oe?ae="number":re?ae="string":ue&&(ae="array"),!ae)return!1;ue&&(j=r.length),re&&(j=r.replace(z,"_").length),$?j!==n.len&&y.push(format$2(k.messages[ae].len,n.fullField,n.len)):V&&!L&&j<n.min?y.push(format$2(k.messages[ae].min,n.fullField,n.min)):L&&!V&&j>n.max?y.push(format$2(k.messages[ae].max,n.fullField,n.max)):V&&L&&(j<n.min||j>n.max)&&y.push(format$2(k.messages[ae].range,n.fullField,n.min,n.max))},ENUM$1="enum",enumerable$1=function(n,r,g,y,k){n[ENUM$1]=Array.isArray(n[ENUM$1])?n[ENUM$1]:[],n[ENUM$1].indexOf(r)===-1&&y.push(format$2(k.messages[ENUM$1],n.fullField,n[ENUM$1].join(", ")))},pattern$1=function(n,r,g,y,k){if(n.pattern){if(n.pattern instanceof RegExp)n.pattern.lastIndex=0,n.pattern.test(r)||y.push(format$2(k.messages.pattern.mismatch,n.fullField,r,n.pattern));else if(typeof n.pattern=="string"){var $=new RegExp(n.pattern);$.test(r)||y.push(format$2(k.messages.pattern.mismatch,n.fullField,r,n.pattern))}}},rules={required:required$1,whitespace,type:type$1,range:range$1,enum:enumerable$1,pattern:pattern$1},string$1=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r,"string")&&!n.required)return g();rules.required(n,r,y,$,k,"string"),isEmptyValue(r,"string")||(rules.type(n,r,y,$,k),rules.range(n,r,y,$,k),rules.pattern(n,r,y,$,k),n.whitespace===!0&&rules.whitespace(n,r,y,$,k))}g($)},method2=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r)&&!n.required)return g();rules.required(n,r,y,$,k),r!==void 0&&rules.type(n,r,y,$,k)}g($)},number2=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(r===""&&(r=void 0),isEmptyValue(r)&&!n.required)return g();rules.required(n,r,y,$,k),r!==void 0&&(rules.type(n,r,y,$,k),rules.range(n,r,y,$,k))}g($)},_boolean=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r)&&!n.required)return g();rules.required(n,r,y,$,k),r!==void 0&&rules.type(n,r,y,$,k)}g($)},regexp2=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r)&&!n.required)return g();rules.required(n,r,y,$,k),isEmptyValue(r)||rules.type(n,r,y,$,k)}g($)},integer2=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r)&&!n.required)return g();rules.required(n,r,y,$,k),r!==void 0&&(rules.type(n,r,y,$,k),rules.range(n,r,y,$,k))}g($)},floatFn=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r)&&!n.required)return g();rules.required(n,r,y,$,k),r!==void 0&&(rules.type(n,r,y,$,k),rules.range(n,r,y,$,k))}g($)},array2=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(r==null&&!n.required)return g();rules.required(n,r,y,$,k,"array"),r!=null&&(rules.type(n,r,y,$,k),rules.range(n,r,y,$,k))}g($)},object2=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r)&&!n.required)return g();rules.required(n,r,y,$,k),r!==void 0&&rules.type(n,r,y,$,k)}g($)},ENUM="enum",enumerable2=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r)&&!n.required)return g();rules.required(n,r,y,$,k),r!==void 0&&rules[ENUM](n,r,y,$,k)}g($)},pattern2=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r,"string")&&!n.required)return g();rules.required(n,r,y,$,k),isEmptyValue(r,"string")||rules.pattern(n,r,y,$,k)}g($)},date2=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r,"date")&&!n.required)return g();if(rules.required(n,r,y,$,k),!isEmptyValue(r,"date")){var L;r instanceof Date?L=r:L=new Date(r),rules.type(n,L,y,$,k),L&&rules.range(n,L.getTime(),y,$,k)}}g($)},required2=function(n,r,g,y,k){var $=[],V=Array.isArray(r)?"array":typeof r;rules.required(n,r,y,$,k,V),g($)},type2=function(n,r,g,y,k){var $=n.type,V=[],L=n.required||!n.required&&y.hasOwnProperty(n.field);if(L){if(isEmptyValue(r,$)&&!n.required)return g();rules.required(n,r,y,V,k,$),isEmptyValue(r,$)||rules.type(n,r,y,V,k)}g(V)},any=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r)&&!n.required)return g();rules.required(n,r,y,$,k)}g($)},validators$1={string:string$1,method:method2,number:number2,boolean:_boolean,regexp:regexp2,integer:integer2,float:floatFn,array:array2,object:object2,enum:enumerable2,pattern:pattern2,date:date2,url:type2,hex:type2,email:type2,required:required2,any};function newMessages(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var n=JSON.parse(JSON.stringify(this));return n.clone=this.clone,n}}}var messages$1=newMessages(),Schema=function(){function e(r){this.rules=null,this._messages=messages$1,this.define(r)}var n=e.prototype;return n.define=function(g){var y=this;if(!g)throw new Error("Cannot configure a schema with no rules");if(typeof g!="object"||Array.isArray(g))throw new Error("Rules must be an object");this.rules={},Object.keys(g).forEach(function(k){var $=g[k];y.rules[k]=Array.isArray($)?$:[$]})},n.messages=function(g){return g&&(this._messages=deepMerge(newMessages(),g)),this._messages},n.validate=function(g,y,k){var $=this;y===void 0&&(y={}),k===void 0&&(k=function(){});var V=g,L=y,z=k;if(typeof L=="function"&&(z=L,L={}),!this.rules||Object.keys(this.rules).length===0)return z&&z(null,V),Promise.resolve(V);function j(le){var de=[],he={};function _e(Ne){if(Array.isArray(Ne)){var $e;de=($e=de).concat.apply($e,Ne)}else de.push(Ne)}for(var xe=0;xe<le.length;xe++)_e(le[xe]);de.length?(he=convertFieldsError(de),z(de,he)):z(null,V)}if(L.messages){var ae=this.messages();ae===messages$1&&(ae=newMessages()),deepMerge(ae,L.messages),L.messages=ae}else L.messages=this.messages();var oe={},re=L.keys||Object.keys(this.rules);re.forEach(function(le){var de=$.rules[le],he=V[le];de.forEach(function(_e){var xe=_e;typeof xe.transform=="function"&&(V===g&&(V=_extends({},V)),he=V[le]=xe.transform(he)),typeof xe=="function"?xe={validator:xe}:xe=_extends({},xe),xe.validator=$.getValidationMethod(xe),xe.validator&&(xe.field=le,xe.fullField=xe.fullField||le,xe.type=$.getType(xe),oe[le]=oe[le]||[],oe[le].push({rule:xe,value:he,source:V,field:le}))})});var ue={};return asyncMap(oe,L,function(le,de){var he=le.rule,_e=(he.type==="object"||he.type==="array")&&(typeof he.fields=="object"||typeof he.defaultField=="object");_e=_e&&(he.required||!he.required&&le.value),he.field=le.field;function xe(Ce,Ie){return _extends({},Ie,{fullField:he.fullField+"."+Ce,fullFields:he.fullFields?[].concat(he.fullFields,[Ce]):[Ce]})}function Ne(Ce){Ce===void 0&&(Ce=[]);var Ie=Array.isArray(Ce)?Ce:[Ce];!L.suppressWarning&&Ie.length&&e.warning("async-validator:",Ie),Ie.length&&he.message!==void 0&&(Ie=[].concat(he.message));var ze=Ie.map(complementError(he,V));if(L.first&&ze.length)return ue[he.field]=1,de(ze);if(!_e)de(ze);else{if(he.required&&!le.value)return he.message!==void 0?ze=[].concat(he.message).map(complementError(he,V)):L.error&&(ze=[L.error(he,format$2(L.messages.required,he.field))]),de(ze);var Ue={};he.defaultField&&Object.keys(le.value).map(function(Dt){Ue[Dt]=he.defaultField}),Ue=_extends({},Ue,le.rule.fields);var Pt={};Object.keys(Ue).forEach(function(Dt){var xn=Ue[Dt],jt=Array.isArray(xn)?xn:[xn];Pt[Dt]=jt.map(xe.bind(null,Dt))});var hn=new e(Pt);hn.messages(L.messages),le.rule.options&&(le.rule.options.messages=L.messages,le.rule.options.error=L.error),hn.validate(le.value,le.rule.options||L,function(Dt){var xn=[];ze&&ze.length&&xn.push.apply(xn,ze),Dt&&Dt.length&&xn.push.apply(xn,Dt),de(xn.length?xn:null)})}}var $e;if(he.asyncValidator)$e=he.asyncValidator(he,le.value,Ne,le.source,L);else if(he.validator){try{$e=he.validator(he,le.value,Ne,le.source,L)}catch(Ce){console.error?.(Ce),L.suppressValidatorError||setTimeout(function(){throw Ce},0),Ne(Ce.message)}$e===!0?Ne():$e===!1?Ne(typeof he.message=="function"?he.message(he.fullField||he.field):he.message||(he.fullField||he.field)+" fails"):$e instanceof Array?Ne($e):$e instanceof Error&&Ne($e.message)}$e&&$e.then&&$e.then(function(){return Ne()},function(Ce){return Ne(Ce)})},function(le){j(le)},V)},n.getType=function(g){if(g.type===void 0&&g.pattern instanceof RegExp&&(g.type="pattern"),typeof g.validator!="function"&&g.type&&!validators$1.hasOwnProperty(g.type))throw new Error(format$2("Unknown rule type %s",g.type));return g.type||"string"},n.getValidationMethod=function(g){if(typeof g.validator=="function")return g.validator;var y=Object.keys(g),k=y.indexOf("message");return k!==-1&&y.splice(k,1),y.length===1&&y[0]==="required"?validators$1.required:validators$1[this.getType(g)]||void 0},e}();Schema.register=function(n,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");validators$1[n]=r};Schema.warning=warning;Schema.messages=messages$1;Schema.validators=validators$1;const formItemValidateStates=["","error","validating","success"],formItemProps=buildProps({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:definePropType([String,Array])},required:{type:Boolean,default:void 0},rules:{type:definePropType([Object,Array])},error:String,validateStatus:{type:String,values:formItemValidateStates},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:componentSizes}}),COMPONENT_NAME$l="ElLabelWrap";var FormLabelWrap=defineComponent({name:COMPONENT_NAME$l,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(e,{slots:n}){const r=inject(formContextKey,void 0),g=inject(formItemContextKey);g||throwError(COMPONENT_NAME$l,"usage: <el-form-item><label-wrap /></el-form-item>");const y=useNamespace("form"),k=ref(),$=ref(0),V=()=>{var j;if((j=k.value)!=null&&j.firstElementChild){const ae=window.getComputedStyle(k.value.firstElementChild).width;return Math.ceil(Number.parseFloat(ae))}else return 0},L=(j="update")=>{nextTick(()=>{n.default&&e.isAutoWidth&&(j==="update"?$.value=V():j==="remove"&&r?.deregisterLabelWidth($.value))})},z=()=>L("update");return onMounted(()=>{z()}),onBeforeUnmount(()=>{L("remove")}),onUpdated(()=>z()),watch($,(j,ae)=>{e.updateAll&&r?.registerLabelWidth(j,ae)}),useResizeObserver(computed(()=>{var j,ae;return(ae=(j=k.value)==null?void 0:j.firstElementChild)!=null?ae:null}),z),()=>{var j,ae;if(!n)return null;const{isAutoWidth:oe}=e;if(oe){const re=r?.autoLabelWidth,ue=g?.hasLabel,le={};if(ue&&re&&re!=="auto"){const de=Math.max(0,Number.parseInt(re,10)-$.value),he=r.labelPosition==="left"?"marginRight":"marginLeft";de&&(le[he]=`${de}px`)}return createVNode("div",{ref:k,class:[y.be("item","label-wrap")],style:le},[(j=n.default)==null?void 0:j.call(n)])}else return createVNode(Fragment,{ref:k},[(ae=n.default)==null?void 0:ae.call(n)])}}});const _hoisted_1$2i=["role","aria-labelledby"],__default__$1y=defineComponent({name:"ElFormItem"}),_sfc_main$3v=defineComponent({...__default__$1y,props:formItemProps,setup(e,{expose:n}){const r=e,g=useSlots(),y=inject(formContextKey,void 0),k=inject(formItemContextKey,void 0),$=useFormSize(void 0,{formItem:!1}),V=useNamespace("form-item"),L=useId().value,z=ref([]),j=ref(""),ae=refDebounced(j,100),oe=ref(""),re=ref();let ue,le=!1;const de=computed(()=>{if(y?.labelPosition==="top")return{};const Nn=addUnit(r.labelWidth||y?.labelWidth||"");return Nn?{width:Nn}:{}}),he=computed(()=>{if(y?.labelPosition==="top"||y?.inline)return{};if(!r.label&&!r.labelWidth&&Ue)return{};const Nn=addUnit(r.labelWidth||y?.labelWidth||"");return!r.label&&!g.label?{marginLeft:Nn}:{}}),_e=computed(()=>[V.b(),V.m($.value),V.is("error",j.value==="error"),V.is("validating",j.value==="validating"),V.is("success",j.value==="success"),V.is("required",jt.value||r.required),V.is("no-asterisk",y?.hideRequiredAsterisk),y?.requireAsteriskPosition==="right"?"asterisk-right":"asterisk-left",{[V.m("feedback")]:y?.statusIcon}]),xe=computed(()=>isBoolean$1(r.inlineMessage)?r.inlineMessage:y?.inlineMessage||!1),Ne=computed(()=>[V.e("error"),{[V.em("error","inline")]:xe.value}]),$e=computed(()=>r.prop?isString$3(r.prop)?r.prop:r.prop.join("."):""),Ce=computed(()=>!!(r.label||g.label)),Ie=computed(()=>r.for||z.value.length===1?z.value[0]:void 0),ze=computed(()=>!Ie.value&&Ce.value),Ue=!!k,Pt=computed(()=>{const Nn=y?.model;if(!(!Nn||!r.prop))return getProp(Nn,r.prop).value}),hn=computed(()=>{const{required:Nn}=r,En=[];r.rules&&En.push(...castArray$1(r.rules));const Zn=y?.rules;if(Zn&&r.prop){const ha=getProp(Zn,r.prop).value;ha&&En.push(...castArray$1(ha))}if(Nn!==void 0){const ha=En.map((xa,sa)=>[xa,sa]).filter(([xa])=>Object.keys(xa).includes("required"));if(ha.length>0)for(const[xa,sa]of ha)xa.required!==Nn&&(En[sa]={...xa,required:Nn});else En.push({required:Nn})}return En}),Dt=computed(()=>hn.value.length>0),xn=Nn=>hn.value.filter(Zn=>!Zn.trigger||!Nn?!0:Array.isArray(Zn.trigger)?Zn.trigger.includes(Nn):Zn.trigger===Nn).map(({trigger:Zn,...ha})=>ha),jt=computed(()=>hn.value.some(Nn=>Nn.required)),Vn=computed(()=>{var Nn;return ae.value==="error"&&r.showMessage&&((Nn=y?.showMessage)!=null?Nn:!0)}),Rn=computed(()=>`${r.label||""}${y?.labelSuffix||""}`),Tn=Nn=>{j.value=Nn},Ln=Nn=>{var En,Zn;const{errors:ha,fields:xa}=Nn;(!ha||!xa)&&console.error(Nn),Tn("error"),oe.value=ha?(Zn=(En=ha?.[0])==null?void 0:En.message)!=null?Zn:`${r.prop} is required`:"",y?.emit("validate",r.prop,!1,oe.value)},Sn=()=>{Tn("success"),y?.emit("validate",r.prop,!0,"")},An=async Nn=>{const En=$e.value;return new Schema({[En]:Nn}).validate({[En]:Pt.value},{firstFields:!0}).then(()=>(Sn(),!0)).catch(ha=>(Ln(ha),Promise.reject(ha)))},In=async(Nn,En)=>{if(le||!r.prop)return!1;const Zn=isFunction$3(En);if(!Dt.value)return En?.(!1),!1;const ha=xn(Nn);return ha.length===0?(En?.(!0),!0):(Tn("validating"),An(ha).then(()=>(En?.(!0),!0)).catch(xa=>{const{fields:sa}=xa;return En?.(!1,sa),Zn?!1:Promise.reject(sa)}))},Mn=()=>{Tn(""),oe.value="",le=!1},ra=async()=>{const Nn=y?.model;if(!Nn||!r.prop)return;const En=getProp(Nn,r.prop);le=!0,En.value=clone$1(ue),await nextTick(),Mn(),le=!1},da=Nn=>{z.value.includes(Nn)||z.value.push(Nn)},ua=Nn=>{z.value=z.value.filter(En=>En!==Nn)};watch(()=>r.error,Nn=>{oe.value=Nn||"",Tn(Nn?"error":"")},{immediate:!0}),watch(()=>r.validateStatus,Nn=>Tn(Nn||""));const aa=reactive({...toRefs(r),$el:re,size:$,validateState:j,labelId:L,inputIds:z,isGroup:ze,hasLabel:Ce,addInputId:da,removeInputId:ua,resetField:ra,clearValidate:Mn,validate:In});return provide(formItemContextKey,aa),onMounted(()=>{r.prop&&(y?.addField(aa),ue=clone$1(Pt.value))}),onBeforeUnmount(()=>{y?.removeField(aa)}),n({size:$,validateMessage:oe,validateState:j,validate:In,clearValidate:Mn,resetField:ra}),(Nn,En)=>{var Zn;return openBlock(),createElementBlock("div",{ref_key:"formItemRef",ref:re,class:normalizeClass(unref(_e)),role:unref(ze)?"group":void 0,"aria-labelledby":unref(ze)?unref(L):void 0},[createVNode(unref(FormLabelWrap),{"is-auto-width":unref(de).width==="auto","update-all":((Zn=unref(y))==null?void 0:Zn.labelWidth)==="auto"},{default:withCtx(()=>[unref(Ce)?(openBlock(),createBlock(resolveDynamicComponent(unref(Ie)?"label":"div"),{key:0,id:unref(L),for:unref(Ie),class:normalizeClass(unref(V).e("label")),style:normalizeStyle(unref(de))},{default:withCtx(()=>[renderSlot(Nn.$slots,"label",{label:unref(Rn)},()=>[createTextVNode(toDisplayString$1(unref(Rn)),1)])]),_:3},8,["id","for","class","style"])):createCommentVNode("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),createBaseVNode("div",{class:normalizeClass(unref(V).e("content")),style:normalizeStyle(unref(he))},[renderSlot(Nn.$slots,"default"),createVNode(TransitionGroup,{name:`${unref(V).namespace.value}-zoom-in-top`},{default:withCtx(()=>[unref(Vn)?renderSlot(Nn.$slots,"error",{key:0,error:oe.value},()=>[createBaseVNode("div",{class:normalizeClass(unref(Ne))},toDisplayString$1(oe.value),3)]):createCommentVNode("v-if",!0)]),_:3},8,["name"])],6)],10,_hoisted_1$2i)}}});var FormItem=_export_sfc$1(_sfc_main$3v,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form-item.vue"]]);const ElForm=withInstall(Form,{FormItem}),ElFormItem=withNoopInstall(FormItem);let hiddenTextarea;const HIDDEN_STYLE=`
  height:0 !important;
  visibility:hidden !important;
  ${isFirefox()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,CONTEXT_STYLE=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function calculateNodeStyling(e){const n=window.getComputedStyle(e),r=n.getPropertyValue("box-sizing"),g=Number.parseFloat(n.getPropertyValue("padding-bottom"))+Number.parseFloat(n.getPropertyValue("padding-top")),y=Number.parseFloat(n.getPropertyValue("border-bottom-width"))+Number.parseFloat(n.getPropertyValue("border-top-width"));return{contextStyle:CONTEXT_STYLE.map($=>`${$}:${n.getPropertyValue($)}`).join(";"),paddingSize:g,borderSize:y,boxSizing:r}}function calcTextareaHeight(e,n=1,r){var g;hiddenTextarea||(hiddenTextarea=document.createElement("textarea"),document.body.appendChild(hiddenTextarea));const{paddingSize:y,borderSize:k,boxSizing:$,contextStyle:V}=calculateNodeStyling(e);hiddenTextarea.setAttribute("style",`${V};${HIDDEN_STYLE}`),hiddenTextarea.value=e.value||e.placeholder||"";let L=hiddenTextarea.scrollHeight;const z={};$==="border-box"?L=L+k:$==="content-box"&&(L=L-y),hiddenTextarea.value="";const j=hiddenTextarea.scrollHeight-y;if(isNumber$1(n)){let ae=j*n;$==="border-box"&&(ae=ae+y+k),L=Math.max(ae,L),z.minHeight=`${ae}px`}if(isNumber$1(r)){let ae=j*r;$==="border-box"&&(ae=ae+y+k),L=Math.min(ae,L)}return z.height=`${L}px`,(g=hiddenTextarea.parentNode)==null||g.removeChild(hiddenTextarea),hiddenTextarea=void 0,z}const inputProps=buildProps({id:{type:String,default:void 0},size:useSizeProp,disabled:Boolean,modelValue:{type:definePropType([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:definePropType([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:iconPropType},prefixIcon:{type:iconPropType},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:definePropType([Object,Array,String]),default:()=>mutable({})}}),inputEmits={[UPDATE_MODEL_EVENT]:e=>isString$3(e),input:e=>isString$3(e),change:e=>isString$3(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},_hoisted_1$2h=["role"],_hoisted_2$1T=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],_hoisted_3$18=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],__default__$1x=defineComponent({name:"ElInput",inheritAttrs:!1}),_sfc_main$3u=defineComponent({...__default__$1x,props:inputProps,emits:inputEmits,setup(e,{expose:n,emit:r}){const g=e,y=useAttrs$1(),k=useSlots(),$=computed(()=>{const ca={};return g.containerRole==="combobox"&&(ca["aria-haspopup"]=y["aria-haspopup"],ca["aria-owns"]=y["aria-owns"],ca["aria-expanded"]=y["aria-expanded"]),ca}),V=computed(()=>[g.type==="textarea"?de.b():le.b(),le.m(re.value),le.is("disabled",ue.value),le.is("exceed",da.value),{[le.b("group")]:k.prepend||k.append,[le.bm("group","append")]:k.append,[le.bm("group","prepend")]:k.prepend,[le.m("prefix")]:k.prefix||g.prefixIcon,[le.m("suffix")]:k.suffix||g.suffixIcon||g.clearable||g.showPassword,[le.bm("suffix","password-clear")]:An.value&&In.value},y.class]),L=computed(()=>[le.e("wrapper"),le.is("focus",Pt.value)]),z=useAttrs({excludeKeys:computed(()=>Object.keys($.value))}),{form:j,formItem:ae}=useFormItem(),{inputId:oe}=useFormItemInputId(g,{formItemContext:ae}),re=useFormSize(),ue=useFormDisabled(),le=useNamespace("input"),de=useNamespace("textarea"),he=shallowRef(),_e=shallowRef(),xe=ref(!1),Ne=ref(!1),$e=ref(!1),Ce=ref(),Ie=shallowRef(g.inputStyle),ze=computed(()=>he.value||_e.value),{wrapperRef:Ue,isFocused:Pt,handleFocus:hn,handleBlur:Dt}=useFocusController(ze,{afterBlur(){var ca;g.validateEvent&&((ca=ae?.validate)==null||ca.call(ae,"blur").catch(pe=>void 0))}}),xn=computed(()=>{var ca;return(ca=j?.statusIcon)!=null?ca:!1}),jt=computed(()=>ae?.validateState||""),Vn=computed(()=>jt.value&&ValidateComponentsMap[jt.value]),Rn=computed(()=>$e.value?view_default:hide_default),Tn=computed(()=>[y.style,g.inputStyle]),Ln=computed(()=>[g.inputStyle,Ie.value,{resize:g.resize}]),Sn=computed(()=>isNil(g.modelValue)?"":String(g.modelValue)),An=computed(()=>g.clearable&&!ue.value&&!g.readonly&&!!Sn.value&&(Pt.value||xe.value)),In=computed(()=>g.showPassword&&!ue.value&&!g.readonly&&!!Sn.value&&(!!Sn.value||Pt.value)),Mn=computed(()=>g.showWordLimit&&!!z.value.maxlength&&(g.type==="text"||g.type==="textarea")&&!ue.value&&!g.readonly&&!g.showPassword),ra=computed(()=>Sn.value.length),da=computed(()=>!!Mn.value&&ra.value>Number(z.value.maxlength)),ua=computed(()=>!!k.suffix||!!g.suffixIcon||An.value||g.showPassword||Mn.value||!!jt.value&&xn.value),[aa,Nn]=useCursor(he);useResizeObserver(_e,ca=>{if(ha(),!Mn.value||g.resize!=="both")return;const pe=ca[0],{width:Oe}=pe.contentRect;Ce.value={right:`calc(100% - ${Oe+15+6}px)`}});const En=()=>{const{type:ca,autosize:pe}=g;if(!(!isClient||ca!=="textarea"||!_e.value))if(pe){const Oe=isObject$3(pe)?pe.minRows:void 0,Ve=isObject$3(pe)?pe.maxRows:void 0,qe=calcTextareaHeight(_e.value,Oe,Ve);Ie.value={overflowY:"hidden",...qe},nextTick(()=>{_e.value.offsetHeight,Ie.value=qe})}else Ie.value={minHeight:calcTextareaHeight(_e.value).minHeight}},ha=(ca=>{let pe=!1;return()=>{var Oe;if(pe||!g.autosize)return;((Oe=_e.value)==null?void 0:Oe.offsetParent)===null||(ca(),pe=!0)}})(En),xa=()=>{const ca=ze.value,pe=g.formatter?g.formatter(Sn.value):Sn.value;!ca||ca.value===pe||(ca.value=pe)},sa=async ca=>{aa();let{value:pe}=ca.target;if(g.formatter&&(pe=g.parser?g.parser(pe):pe),!Ne.value){if(pe===Sn.value){xa();return}r(UPDATE_MODEL_EVENT,pe),r("input",pe),await nextTick(),xa(),Nn()}},Hn=ca=>{r("change",ca.target.value)},bn=ca=>{r("compositionstart",ca),Ne.value=!0},Xn=ca=>{var pe;r("compositionupdate",ca);const Oe=(pe=ca.target)==null?void 0:pe.value,Ve=Oe[Oe.length-1]||"";Ne.value=!isKorean(Ve)},$n=ca=>{r("compositionend",ca),Ne.value&&(Ne.value=!1,sa(ca))},kt=()=>{$e.value=!$e.value,At()},At=async()=>{var ca;await nextTick(),(ca=ze.value)==null||ca.focus()},Dn=()=>{var ca;return(ca=ze.value)==null?void 0:ca.blur()},Qn=ca=>{xe.value=!1,r("mouseleave",ca)},oa=ca=>{xe.value=!0,r("mouseenter",ca)},na=ca=>{r("keydown",ca)},la=()=>{var ca;(ca=ze.value)==null||ca.select()},ma=()=>{r(UPDATE_MODEL_EVENT,""),r("change",""),r("clear"),r("input","")};return watch(()=>g.modelValue,()=>{var ca;nextTick(()=>En()),g.validateEvent&&((ca=ae?.validate)==null||ca.call(ae,"change").catch(pe=>void 0))}),watch(Sn,()=>xa()),watch(()=>g.type,async()=>{await nextTick(),xa(),En()}),onMounted(()=>{!g.formatter&&g.parser,xa(),nextTick(En)}),n({input:he,textarea:_e,ref:ze,textareaStyle:Ln,autosize:toRef(g,"autosize"),focus:At,blur:Dn,select:la,clear:ma,resizeTextarea:En}),(ca,pe)=>withDirectives((openBlock(),createElementBlock("div",mergeProps(unref($),{class:unref(V),style:unref(Tn),role:ca.containerRole,onMouseenter:oa,onMouseleave:Qn}),[createCommentVNode(" input "),ca.type!=="textarea"?(openBlock(),createElementBlock(Fragment,{key:0},[createCommentVNode(" prepend slot "),ca.$slots.prepend?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(le).be("group","prepend"))},[renderSlot(ca.$slots,"prepend")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{ref_key:"wrapperRef",ref:Ue,class:normalizeClass(unref(L))},[createCommentVNode(" prefix slot "),ca.$slots.prefix||ca.prefixIcon?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(le).e("prefix"))},[createBaseVNode("span",{class:normalizeClass(unref(le).e("prefix-inner"))},[renderSlot(ca.$slots,"prefix"),ca.prefixIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(le).e("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ca.prefixIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],2)):createCommentVNode("v-if",!0),createBaseVNode("input",mergeProps({id:unref(oe),ref_key:"input",ref:he,class:unref(le).e("inner")},unref(z),{type:ca.showPassword?$e.value?"text":"password":ca.type,disabled:unref(ue),formatter:ca.formatter,parser:ca.parser,readonly:ca.readonly,autocomplete:ca.autocomplete,tabindex:ca.tabindex,"aria-label":ca.label,placeholder:ca.placeholder,style:ca.inputStyle,form:g.form,onCompositionstart:bn,onCompositionupdate:Xn,onCompositionend:$n,onInput:sa,onFocus:pe[0]||(pe[0]=(...Oe)=>unref(hn)&&unref(hn)(...Oe)),onBlur:pe[1]||(pe[1]=(...Oe)=>unref(Dt)&&unref(Dt)(...Oe)),onChange:Hn,onKeydown:na}),null,16,_hoisted_2$1T),createCommentVNode(" suffix slot "),unref(ua)?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(le).e("suffix"))},[createBaseVNode("span",{class:normalizeClass(unref(le).e("suffix-inner"))},[!unref(An)||!unref(In)||!unref(Mn)?(openBlock(),createElementBlock(Fragment,{key:0},[renderSlot(ca.$slots,"suffix"),ca.suffixIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(le).e("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ca.suffixIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],64)):createCommentVNode("v-if",!0),unref(An)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(le).e("icon"),unref(le).e("clear")]),onMousedown:withModifiers(unref(NOOP),["prevent"]),onClick:ma},{default:withCtx(()=>[createVNode(unref(circle_close_default))]),_:1},8,["class","onMousedown"])):createCommentVNode("v-if",!0),unref(In)?(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass([unref(le).e("icon"),unref(le).e("password")]),onClick:kt},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(Rn))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),unref(Mn)?(openBlock(),createElementBlock("span",{key:3,class:normalizeClass(unref(le).e("count"))},[createBaseVNode("span",{class:normalizeClass(unref(le).e("count-inner"))},toDisplayString$1(unref(ra))+" / "+toDisplayString$1(unref(z).maxlength),3)],2)):createCommentVNode("v-if",!0),unref(jt)&&unref(Vn)&&unref(xn)?(openBlock(),createBlock(unref(ElIcon),{key:4,class:normalizeClass([unref(le).e("icon"),unref(le).e("validateIcon"),unref(le).is("loading",unref(jt)==="validating")])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(Vn))))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],2)):createCommentVNode("v-if",!0)],2),createCommentVNode(" append slot "),ca.$slots.append?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(le).be("group","append"))},[renderSlot(ca.$slots,"append")],2)):createCommentVNode("v-if",!0)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" textarea "),createBaseVNode("textarea",mergeProps({id:unref(oe),ref_key:"textarea",ref:_e,class:unref(de).e("inner")},unref(z),{tabindex:ca.tabindex,disabled:unref(ue),readonly:ca.readonly,autocomplete:ca.autocomplete,style:unref(Ln),"aria-label":ca.label,placeholder:ca.placeholder,form:g.form,onCompositionstart:bn,onCompositionupdate:Xn,onCompositionend:$n,onInput:sa,onFocus:pe[2]||(pe[2]=(...Oe)=>unref(hn)&&unref(hn)(...Oe)),onBlur:pe[3]||(pe[3]=(...Oe)=>unref(Dt)&&unref(Dt)(...Oe)),onChange:Hn,onKeydown:na}),null,16,_hoisted_3$18),unref(Mn)?(openBlock(),createElementBlock("span",{key:0,style:normalizeStyle(Ce.value),class:normalizeClass(unref(le).e("count"))},toDisplayString$1(unref(ra))+" / "+toDisplayString$1(unref(z).maxlength),7)):createCommentVNode("v-if",!0)],64))],16,_hoisted_1$2h)),[[vShow,ca.type!=="hidden"]])}});var Input=_export_sfc$1(_sfc_main$3u,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const ElInput=withInstall(Input),GAP=4,BAR_MAP={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},renderThumbStyle$1=({move:e,size:n,bar:r})=>({[r.size]:n,transform:`translate${r.axis}(${e}%)`}),scrollbarContextKey=Symbol("scrollbarContextKey"),thumbProps=buildProps({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),COMPONENT_NAME$k="Thumb",_sfc_main$3t=defineComponent({__name:"thumb",props:thumbProps,setup(e){const n=e,r=inject(scrollbarContextKey),g=useNamespace("scrollbar");r||throwError(COMPONENT_NAME$k,"can not inject scrollbar context");const y=ref(),k=ref(),$=ref({}),V=ref(!1);let L=!1,z=!1,j=isClient?document.onselectstart:null;const ae=computed(()=>BAR_MAP[n.vertical?"vertical":"horizontal"]),oe=computed(()=>renderThumbStyle$1({size:n.size,move:n.move,bar:ae.value})),re=computed(()=>y.value[ae.value.offset]**2/r.wrapElement[ae.value.scrollSize]/n.ratio/k.value[ae.value.offset]),ue=Ce=>{var Ie;if(Ce.stopPropagation(),Ce.ctrlKey||[1,2].includes(Ce.button))return;(Ie=window.getSelection())==null||Ie.removeAllRanges(),de(Ce);const ze=Ce.currentTarget;ze&&($.value[ae.value.axis]=ze[ae.value.offset]-(Ce[ae.value.client]-ze.getBoundingClientRect()[ae.value.direction]))},le=Ce=>{if(!k.value||!y.value||!r.wrapElement)return;const Ie=Math.abs(Ce.target.getBoundingClientRect()[ae.value.direction]-Ce[ae.value.client]),ze=k.value[ae.value.offset]/2,Ue=(Ie-ze)*100*re.value/y.value[ae.value.offset];r.wrapElement[ae.value.scroll]=Ue*r.wrapElement[ae.value.scrollSize]/100},de=Ce=>{Ce.stopImmediatePropagation(),L=!0,document.addEventListener("mousemove",he),document.addEventListener("mouseup",_e),j=document.onselectstart,document.onselectstart=()=>!1},he=Ce=>{if(!y.value||!k.value||L===!1)return;const Ie=$.value[ae.value.axis];if(!Ie)return;const ze=(y.value.getBoundingClientRect()[ae.value.direction]-Ce[ae.value.client])*-1,Ue=k.value[ae.value.offset]-Ie,Pt=(ze-Ue)*100*re.value/y.value[ae.value.offset];r.wrapElement[ae.value.scroll]=Pt*r.wrapElement[ae.value.scrollSize]/100},_e=()=>{L=!1,$.value[ae.value.axis]=0,document.removeEventListener("mousemove",he),document.removeEventListener("mouseup",_e),$e(),z&&(V.value=!1)},xe=()=>{z=!1,V.value=!!n.size},Ne=()=>{z=!0,V.value=L};onBeforeUnmount(()=>{$e(),document.removeEventListener("mouseup",_e)});const $e=()=>{document.onselectstart!==j&&(document.onselectstart=j)};return useEventListener(toRef(r,"scrollbarElement"),"mousemove",xe),useEventListener(toRef(r,"scrollbarElement"),"mouseleave",Ne),(Ce,Ie)=>(openBlock(),createBlock(Transition,{name:unref(g).b("fade"),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{ref_key:"instance",ref:y,class:normalizeClass([unref(g).e("bar"),unref(g).is(unref(ae).key)]),onMousedown:le},[createBaseVNode("div",{ref_key:"thumb",ref:k,class:normalizeClass(unref(g).e("thumb")),style:normalizeStyle(unref(oe)),onMousedown:ue},null,38)],34),[[vShow,Ce.always||V.value]])]),_:1},8,["name"]))}});var Thumb=_export_sfc$1(_sfc_main$3t,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const barProps=buildProps({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),_sfc_main$3s=defineComponent({__name:"bar",props:barProps,setup(e,{expose:n}){const r=e,g=ref(0),y=ref(0);return n({handleScroll:$=>{if($){const V=$.offsetHeight-GAP,L=$.offsetWidth-GAP;y.value=$.scrollTop*100/V*r.ratioY,g.value=$.scrollLeft*100/L*r.ratioX}}}),($,V)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(Thumb,{move:g.value,ratio:$.ratioX,size:$.width,always:$.always},null,8,["move","ratio","size","always"]),createVNode(Thumb,{move:y.value,ratio:$.ratioY,size:$.height,vertical:"",always:$.always},null,8,["move","ratio","size","always"])],64))}});var Bar=_export_sfc$1(_sfc_main$3s,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const scrollbarProps=buildProps({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:definePropType([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),scrollbarEmits={scroll:({scrollTop:e,scrollLeft:n})=>[e,n].every(isNumber$1)},COMPONENT_NAME$j="ElScrollbar",__default__$1w=defineComponent({name:COMPONENT_NAME$j}),_sfc_main$3r=defineComponent({...__default__$1w,props:scrollbarProps,emits:scrollbarEmits,setup(e,{expose:n,emit:r}){const g=e,y=useNamespace("scrollbar");let k,$;const V=ref(),L=ref(),z=ref(),j=ref("0"),ae=ref("0"),oe=ref(),re=ref(1),ue=ref(1),le=computed(()=>{const Ie={};return g.height&&(Ie.height=addUnit(g.height)),g.maxHeight&&(Ie.maxHeight=addUnit(g.maxHeight)),[g.wrapStyle,Ie]}),de=computed(()=>[g.wrapClass,y.e("wrap"),{[y.em("wrap","hidden-default")]:!g.native}]),he=computed(()=>[y.e("view"),g.viewClass]),_e=()=>{var Ie;L.value&&((Ie=oe.value)==null||Ie.handleScroll(L.value),r("scroll",{scrollTop:L.value.scrollTop,scrollLeft:L.value.scrollLeft}))};function xe(Ie,ze){isObject$3(Ie)?L.value.scrollTo(Ie):isNumber$1(Ie)&&isNumber$1(ze)&&L.value.scrollTo(Ie,ze)}const Ne=Ie=>{isNumber$1(Ie)&&(L.value.scrollTop=Ie)},$e=Ie=>{isNumber$1(Ie)&&(L.value.scrollLeft=Ie)},Ce=()=>{if(!L.value)return;const Ie=L.value.offsetHeight-GAP,ze=L.value.offsetWidth-GAP,Ue=Ie**2/L.value.scrollHeight,Pt=ze**2/L.value.scrollWidth,hn=Math.max(Ue,g.minSize),Dt=Math.max(Pt,g.minSize);re.value=Ue/(Ie-Ue)/(hn/(Ie-hn)),ue.value=Pt/(ze-Pt)/(Dt/(ze-Dt)),ae.value=hn+GAP<Ie?`${hn}px`:"",j.value=Dt+GAP<ze?`${Dt}px`:""};return watch(()=>g.noresize,Ie=>{Ie?(k?.(),$?.()):({stop:k}=useResizeObserver(z,Ce),$=useEventListener("resize",Ce))},{immediate:!0}),watch(()=>[g.maxHeight,g.height],()=>{g.native||nextTick(()=>{var Ie;Ce(),L.value&&((Ie=oe.value)==null||Ie.handleScroll(L.value))})}),provide(scrollbarContextKey,reactive({scrollbarElement:V,wrapElement:L})),onMounted(()=>{g.native||nextTick(()=>{Ce()})}),onUpdated(()=>Ce()),n({wrapRef:L,update:Ce,scrollTo:xe,setScrollTop:Ne,setScrollLeft:$e,handleScroll:_e}),(Ie,ze)=>(openBlock(),createElementBlock("div",{ref_key:"scrollbarRef",ref:V,class:normalizeClass(unref(y).b())},[createBaseVNode("div",{ref_key:"wrapRef",ref:L,class:normalizeClass(unref(de)),style:normalizeStyle(unref(le)),onScroll:_e},[(openBlock(),createBlock(resolveDynamicComponent(Ie.tag),{ref_key:"resizeRef",ref:z,class:normalizeClass(unref(he)),style:normalizeStyle(Ie.viewStyle)},{default:withCtx(()=>[renderSlot(Ie.$slots,"default")]),_:3},8,["class","style"]))],38),Ie.native?createCommentVNode("v-if",!0):(openBlock(),createBlock(Bar,{key:0,ref_key:"barRef",ref:oe,height:ae.value,width:j.value,always:Ie.always,"ratio-x":ue.value,"ratio-y":re.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Scrollbar=_export_sfc$1(_sfc_main$3r,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const ElScrollbar=withInstall(Scrollbar),POPPER_INJECTION_KEY=Symbol("popper"),POPPER_CONTENT_INJECTION_KEY=Symbol("popperContent"),roleTypes=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],popperProps=buildProps({role:{type:String,values:roleTypes,default:"tooltip"}}),__default__$1v=defineComponent({name:"ElPopper",inheritAttrs:!1}),_sfc_main$3q=defineComponent({...__default__$1v,props:popperProps,setup(e,{expose:n}){const r=e,g=ref(),y=ref(),k=ref(),$=ref(),V=computed(()=>r.role),L={triggerRef:g,popperInstanceRef:y,contentRef:k,referenceRef:$,role:V};return n(L),provide(POPPER_INJECTION_KEY,L),(z,j)=>renderSlot(z.$slots,"default")}});var Popper=_export_sfc$1(_sfc_main$3q,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/popper.vue"]]);const popperArrowProps=buildProps({arrowOffset:{type:Number,default:5}}),__default__$1u=defineComponent({name:"ElPopperArrow",inheritAttrs:!1}),_sfc_main$3p=defineComponent({...__default__$1u,props:popperArrowProps,setup(e,{expose:n}){const r=e,g=useNamespace("popper"),{arrowOffset:y,arrowRef:k,arrowStyle:$}=inject(POPPER_CONTENT_INJECTION_KEY,void 0);return watch(()=>r.arrowOffset,V=>{y.value=V}),onBeforeUnmount(()=>{k.value=void 0}),n({arrowRef:k}),(V,L)=>(openBlock(),createElementBlock("span",{ref_key:"arrowRef",ref:k,class:normalizeClass(unref(g).e("arrow")),style:normalizeStyle(unref($)),"data-popper-arrow":""},null,6))}});var ElPopperArrow=_export_sfc$1(_sfc_main$3p,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/arrow.vue"]]);const NAME="ElOnlyChild",OnlyChild=defineComponent({name:NAME,setup(e,{slots:n,attrs:r}){var g;const y=inject(FORWARD_REF_INJECTION_KEY),k=useForwardRefDirective((g=y?.setForwardRef)!=null?g:NOOP);return()=>{var $;const V=($=n.default)==null?void 0:$.call(n,r);if(!V||V.length>1)return null;const L=findFirstLegitChild(V);return L?withDirectives(cloneVNode(L,r),[[k]]):null}}});function findFirstLegitChild(e){if(!e)return null;const n=e;for(const r of n){if(isObject$3(r))switch(r.type){case Comment:continue;case Text$2:case"svg":return wrapTextContent(r);case Fragment:return findFirstLegitChild(r.children);default:return r}return wrapTextContent(r)}return null}function wrapTextContent(e){const n=useNamespace("only-child");return createVNode("span",{class:n.e("content")},[e])}const popperTriggerProps=buildProps({virtualRef:{type:definePropType(Object)},virtualTriggering:Boolean,onMouseenter:{type:definePropType(Function)},onMouseleave:{type:definePropType(Function)},onClick:{type:definePropType(Function)},onKeydown:{type:definePropType(Function)},onFocus:{type:definePropType(Function)},onBlur:{type:definePropType(Function)},onContextmenu:{type:definePropType(Function)},id:String,open:Boolean}),__default__$1t=defineComponent({name:"ElPopperTrigger",inheritAttrs:!1}),_sfc_main$3o=defineComponent({...__default__$1t,props:popperTriggerProps,setup(e,{expose:n}){const r=e,{role:g,triggerRef:y}=inject(POPPER_INJECTION_KEY,void 0);useForwardRef(y);const k=computed(()=>V.value?r.id:void 0),$=computed(()=>{if(g&&g.value==="tooltip")return r.open&&r.id?r.id:void 0}),V=computed(()=>{if(g&&g.value!=="tooltip")return g.value}),L=computed(()=>V.value?`${r.open}`:void 0);let z;return onMounted(()=>{watch(()=>r.virtualRef,j=>{j&&(y.value=unrefElement(j))},{immediate:!0}),watch(y,(j,ae)=>{z?.(),z=void 0,isElement$1(j)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(oe=>{var re;const ue=r[oe];ue&&(j.addEventListener(oe.slice(2).toLowerCase(),ue),(re=ae?.removeEventListener)==null||re.call(ae,oe.slice(2).toLowerCase(),ue))}),z=watch([k,$,V,L],oe=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((re,ue)=>{isNil(oe[ue])?j.removeAttribute(re):j.setAttribute(re,oe[ue])})},{immediate:!0})),isElement$1(ae)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(oe=>ae.removeAttribute(oe))},{immediate:!0})}),onBeforeUnmount(()=>{z?.(),z=void 0}),n({triggerRef:y}),(j,ae)=>j.virtualTriggering?createCommentVNode("v-if",!0):(openBlock(),createBlock(unref(OnlyChild),mergeProps({key:0},j.$attrs,{"aria-controls":unref(k),"aria-describedby":unref($),"aria-expanded":unref(L),"aria-haspopup":unref(V)}),{default:withCtx(()=>[renderSlot(j.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var ElPopperTrigger=_export_sfc$1(_sfc_main$3o,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/trigger.vue"]]);const FOCUS_AFTER_TRAPPED="focus-trap.focus-after-trapped",FOCUS_AFTER_RELEASED="focus-trap.focus-after-released",FOCUSOUT_PREVENTED="focus-trap.focusout-prevented",FOCUS_AFTER_TRAPPED_OPTS={cancelable:!0,bubbles:!1},FOCUSOUT_PREVENTED_OPTS={cancelable:!0,bubbles:!1},ON_TRAP_FOCUS_EVT="focusAfterTrapped",ON_RELEASE_FOCUS_EVT="focusAfterReleased",FOCUS_TRAP_INJECTION_KEY=Symbol("elFocusTrap"),focusReason=ref(),lastUserFocusTimestamp=ref(0),lastAutomatedFocusTimestamp=ref(0);let focusReasonUserCount=0;const obtainAllFocusableElements=e=>{const n=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:g=>{const y=g.tagName==="INPUT"&&g.type==="hidden";return g.disabled||g.hidden||y?NodeFilter.FILTER_SKIP:g.tabIndex>=0||g===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)n.push(r.currentNode);return n},getVisibleElement=(e,n)=>{for(const r of e)if(!isHidden(r,n))return r},isHidden=(e,n)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},getEdges=e=>{const n=obtainAllFocusableElements(e),r=getVisibleElement(n,e),g=getVisibleElement(n.reverse(),e);return[r,g]},isSelectable=e=>e instanceof HTMLInputElement&&"select"in e,tryFocus=(e,n)=>{if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),lastAutomatedFocusTimestamp.value=window.performance.now(),e!==r&&isSelectable(e)&&n&&e.select()}};function removeFromStack(e,n){const r=[...e],g=e.indexOf(n);return g!==-1&&r.splice(g,1),r}const createFocusableStack=()=>{let e=[];return{push:g=>{const y=e[0];y&&g!==y&&y.pause(),e=removeFromStack(e,g),e.unshift(g)},remove:g=>{var y,k;e=removeFromStack(e,g),(k=(y=e[0])==null?void 0:y.resume)==null||k.call(y)}}},focusFirstDescendant=(e,n=!1)=>{const r=document.activeElement;for(const g of e)if(tryFocus(g,n),document.activeElement!==r)return},focusableStack=createFocusableStack(),isFocusCausedByUserEvent=()=>lastUserFocusTimestamp.value>lastAutomatedFocusTimestamp.value,notifyFocusReasonPointer=()=>{focusReason.value="pointer",lastUserFocusTimestamp.value=window.performance.now()},notifyFocusReasonKeydown=()=>{focusReason.value="keyboard",lastUserFocusTimestamp.value=window.performance.now()},useFocusReason=()=>(onMounted(()=>{focusReasonUserCount===0&&(document.addEventListener("mousedown",notifyFocusReasonPointer),document.addEventListener("touchstart",notifyFocusReasonPointer),document.addEventListener("keydown",notifyFocusReasonKeydown)),focusReasonUserCount++}),onBeforeUnmount(()=>{focusReasonUserCount--,focusReasonUserCount<=0&&(document.removeEventListener("mousedown",notifyFocusReasonPointer),document.removeEventListener("touchstart",notifyFocusReasonPointer),document.removeEventListener("keydown",notifyFocusReasonKeydown))}),{focusReason,lastUserFocusTimestamp,lastAutomatedFocusTimestamp}),createFocusOutPreventedEvent=e=>new CustomEvent(FOCUSOUT_PREVENTED,{...FOCUSOUT_PREVENTED_OPTS,detail:e}),_sfc_main$3n=defineComponent({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[ON_TRAP_FOCUS_EVT,ON_RELEASE_FOCUS_EVT,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:n}){const r=ref();let g,y;const{focusReason:k}=useFocusReason();useEscapeKeydown(ue=>{e.trapped&&!$.paused&&n("release-requested",ue)});const $={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},V=ue=>{if(!e.loop&&!e.trapped||$.paused)return;const{key:le,altKey:de,ctrlKey:he,metaKey:_e,currentTarget:xe,shiftKey:Ne}=ue,{loop:$e}=e,Ce=le===EVENT_CODE.tab&&!de&&!he&&!_e,Ie=document.activeElement;if(Ce&&Ie){const ze=xe,[Ue,Pt]=getEdges(ze);if(Ue&&Pt){if(!Ne&&Ie===Pt){const Dt=createFocusOutPreventedEvent({focusReason:k.value});n("focusout-prevented",Dt),Dt.defaultPrevented||(ue.preventDefault(),$e&&tryFocus(Ue,!0))}else if(Ne&&[Ue,ze].includes(Ie)){const Dt=createFocusOutPreventedEvent({focusReason:k.value});n("focusout-prevented",Dt),Dt.defaultPrevented||(ue.preventDefault(),$e&&tryFocus(Pt,!0))}}else if(Ie===ze){const Dt=createFocusOutPreventedEvent({focusReason:k.value});n("focusout-prevented",Dt),Dt.defaultPrevented||ue.preventDefault()}}};provide(FOCUS_TRAP_INJECTION_KEY,{focusTrapRef:r,onKeydown:V}),watch(()=>e.focusTrapEl,ue=>{ue&&(r.value=ue)},{immediate:!0}),watch([r],([ue],[le])=>{ue&&(ue.addEventListener("keydown",V),ue.addEventListener("focusin",j),ue.addEventListener("focusout",ae)),le&&(le.removeEventListener("keydown",V),le.removeEventListener("focusin",j),le.removeEventListener("focusout",ae))});const L=ue=>{n(ON_TRAP_FOCUS_EVT,ue)},z=ue=>n(ON_RELEASE_FOCUS_EVT,ue),j=ue=>{const le=unref(r);if(!le)return;const de=ue.target,he=ue.relatedTarget,_e=de&&le.contains(de);e.trapped||he&&le.contains(he)||(g=he),_e&&n("focusin",ue),!$.paused&&e.trapped&&(_e?y=de:tryFocus(y,!0))},ae=ue=>{const le=unref(r);if(!($.paused||!le))if(e.trapped){const de=ue.relatedTarget;!isNil(de)&&!le.contains(de)&&setTimeout(()=>{if(!$.paused&&e.trapped){const he=createFocusOutPreventedEvent({focusReason:k.value});n("focusout-prevented",he),he.defaultPrevented||tryFocus(y,!0)}},0)}else{const de=ue.target;de&&le.contains(de)||n("focusout",ue)}};async function oe(){await nextTick();const ue=unref(r);if(ue){focusableStack.push($);const le=ue.contains(document.activeElement)?g:document.activeElement;if(g=le,!ue.contains(le)){const he=new Event(FOCUS_AFTER_TRAPPED,FOCUS_AFTER_TRAPPED_OPTS);ue.addEventListener(FOCUS_AFTER_TRAPPED,L),ue.dispatchEvent(he),he.defaultPrevented||nextTick(()=>{let _e=e.focusStartEl;isString$3(_e)||(tryFocus(_e),document.activeElement!==_e&&(_e="first")),_e==="first"&&focusFirstDescendant(obtainAllFocusableElements(ue),!0),(document.activeElement===le||_e==="container")&&tryFocus(ue)})}}}function re(){const ue=unref(r);if(ue){ue.removeEventListener(FOCUS_AFTER_TRAPPED,L);const le=new CustomEvent(FOCUS_AFTER_RELEASED,{...FOCUS_AFTER_TRAPPED_OPTS,detail:{focusReason:k.value}});ue.addEventListener(FOCUS_AFTER_RELEASED,z),ue.dispatchEvent(le),!le.defaultPrevented&&(k.value=="keyboard"||!isFocusCausedByUserEvent()||ue.contains(document.activeElement))&&tryFocus(g??document.body),ue.removeEventListener(FOCUS_AFTER_RELEASED,z),focusableStack.remove($)}}return onMounted(()=>{e.trapped&&oe(),watch(()=>e.trapped,ue=>{ue?oe():re()})}),onBeforeUnmount(()=>{e.trapped&&re()}),{onKeydown:V}}});function _sfc_render$v(e,n,r,g,y,k){return renderSlot(e.$slots,"default",{handleKeydown:e.onKeydown})}var ElFocusTrap=_export_sfc$1(_sfc_main$3n,[["render",_sfc_render$v],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);const POSITIONING_STRATEGIES=["fixed","absolute"],popperCoreConfigProps=buildProps({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:definePropType(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:Ee,default:"bottom"},popperOptions:{type:definePropType(Object),default:()=>({})},strategy:{type:String,values:POSITIONING_STRATEGIES,default:"absolute"}}),popperContentProps=buildProps({...popperCoreConfigProps,id:String,style:{type:definePropType([String,Array,Object])},className:{type:definePropType([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:definePropType([String,Array,Object])},popperStyle:{type:definePropType([String,Array,Object])},referenceEl:{type:definePropType(Object)},triggerTargetEl:{type:definePropType(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},ariaLabel:{type:String,default:void 0},virtualTriggering:Boolean,zIndex:Number}),popperContentEmits={mouseenter:e=>e instanceof MouseEvent,mouseleave:e=>e instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},buildPopperOptions=(e,n=[])=>{const{placement:r,strategy:g,popperOptions:y}=e,k={placement:r,strategy:g,...y,modifiers:[...genModifiers(e),...n]};return deriveExtraModifiers(k,y?.modifiers),k},unwrapMeasurableEl=e=>{if(isClient)return unrefElement(e)};function genModifiers(e){const{offset:n,gpuAcceleration:r,fallbackPlacements:g}=e;return[{name:"offset",options:{offset:[0,n??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:g}},{name:"computeStyles",options:{gpuAcceleration:r}}]}function deriveExtraModifiers(e,n){n&&(e.modifiers=[...e.modifiers,...n??[]])}const DEFAULT_ARROW_OFFSET=0,usePopperContent=e=>{const{popperInstanceRef:n,contentRef:r,triggerRef:g,role:y}=inject(POPPER_INJECTION_KEY,void 0),k=ref(),$=ref(),V=computed(()=>({name:"eventListeners",enabled:!!e.visible})),L=computed(()=>{var he;const _e=unref(k),xe=(he=unref($))!=null?he:DEFAULT_ARROW_OFFSET;return{name:"arrow",enabled:!isUndefined$1(_e),options:{element:_e,padding:xe}}}),z=computed(()=>({onFirstUpdate:()=>{ue()},...buildPopperOptions(e,[unref(L),unref(V)])})),j=computed(()=>unwrapMeasurableEl(e.referenceEl)||unref(g)),{attributes:ae,state:oe,styles:re,update:ue,forceUpdate:le,instanceRef:de}=usePopper(j,r,z);return watch(de,he=>n.value=he),onMounted(()=>{watch(()=>{var he;return(he=unref(j))==null?void 0:he.getBoundingClientRect()},()=>{ue()})}),{attributes:ae,arrowRef:k,contentRef:r,instanceRef:de,state:oe,styles:re,role:y,forceUpdate:le,update:ue}},usePopperContentDOM=(e,{attributes:n,styles:r,role:g})=>{const{nextZIndex:y}=useZIndex(),k=useNamespace("popper"),$=computed(()=>unref(n).popper),V=ref(e.zIndex||y()),L=computed(()=>[k.b(),k.is("pure",e.pure),k.is(e.effect),e.popperClass]),z=computed(()=>[{zIndex:unref(V)},unref(r).popper,e.popperStyle||{}]),j=computed(()=>g.value==="dialog"?"false":void 0),ae=computed(()=>unref(r).arrow||{});return{ariaModal:j,arrowStyle:ae,contentAttrs:$,contentClass:L,contentStyle:z,contentZIndex:V,updateZIndex:()=>{V.value=e.zIndex||y()}}},usePopperContentFocusTrap=(e,n)=>{const r=ref(!1),g=ref();return{focusStartRef:g,trapped:r,onFocusAfterReleased:z=>{var j;((j=z.detail)==null?void 0:j.focusReason)!=="pointer"&&(g.value="first",n("blur"))},onFocusAfterTrapped:()=>{n("focus")},onFocusInTrap:z=>{e.visible&&!r.value&&(z.target&&(g.value=z.target),r.value=!0)},onFocusoutPrevented:z=>{e.trapping||(z.detail.focusReason==="pointer"&&z.preventDefault(),r.value=!1)},onReleaseRequested:()=>{r.value=!1,n("close")}}},__default__$1s=defineComponent({name:"ElPopperContent"}),_sfc_main$3m=defineComponent({...__default__$1s,props:popperContentProps,emits:popperContentEmits,setup(e,{expose:n,emit:r}){const g=e,{focusStartRef:y,trapped:k,onFocusAfterReleased:$,onFocusAfterTrapped:V,onFocusInTrap:L,onFocusoutPrevented:z,onReleaseRequested:j}=usePopperContentFocusTrap(g,r),{attributes:ae,arrowRef:oe,contentRef:re,styles:ue,instanceRef:le,role:de,update:he}=usePopperContent(g),{ariaModal:_e,arrowStyle:xe,contentAttrs:Ne,contentClass:$e,contentStyle:Ce,updateZIndex:Ie}=usePopperContentDOM(g,{styles:ue,attributes:ae,role:de}),ze=inject(formItemContextKey,void 0),Ue=ref();provide(POPPER_CONTENT_INJECTION_KEY,{arrowStyle:xe,arrowRef:oe,arrowOffset:Ue}),ze&&(ze.addInputId||ze.removeInputId)&&provide(formItemContextKey,{...ze,addInputId:NOOP,removeInputId:NOOP});let Pt;const hn=(xn=!0)=>{he(),xn&&Ie()},Dt=()=>{hn(!1),g.visible&&g.focusOnShow?k.value=!0:g.visible===!1&&(k.value=!1)};return onMounted(()=>{watch(()=>g.triggerTargetEl,(xn,jt)=>{Pt?.(),Pt=void 0;const Vn=unref(xn||re.value),Rn=unref(jt||re.value);isElement$1(Vn)&&(Pt=watch([de,()=>g.ariaLabel,_e,()=>g.id],Tn=>{["role","aria-label","aria-modal","id"].forEach((Ln,Sn)=>{isNil(Tn[Sn])?Vn.removeAttribute(Ln):Vn.setAttribute(Ln,Tn[Sn])})},{immediate:!0})),Rn!==Vn&&isElement$1(Rn)&&["role","aria-label","aria-modal","id"].forEach(Tn=>{Rn.removeAttribute(Tn)})},{immediate:!0}),watch(()=>g.visible,Dt,{immediate:!0})}),onBeforeUnmount(()=>{Pt?.(),Pt=void 0}),n({popperContentRef:re,popperInstanceRef:le,updatePopper:hn,contentStyle:Ce}),(xn,jt)=>(openBlock(),createElementBlock("div",mergeProps({ref_key:"contentRef",ref:re},unref(Ne),{style:unref(Ce),class:unref($e),tabindex:"-1",onMouseenter:jt[0]||(jt[0]=Vn=>xn.$emit("mouseenter",Vn)),onMouseleave:jt[1]||(jt[1]=Vn=>xn.$emit("mouseleave",Vn))}),[createVNode(unref(ElFocusTrap),{trapped:unref(k),"trap-on-focus-in":!0,"focus-trap-el":unref(re),"focus-start-el":unref(y),onFocusAfterTrapped:unref(V),onFocusAfterReleased:unref($),onFocusin:unref(L),onFocusoutPrevented:unref(z),onReleaseRequested:unref(j)},{default:withCtx(()=>[renderSlot(xn.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16))}});var ElPopperContent=_export_sfc$1(_sfc_main$3m,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/content.vue"]]);const ElPopper=withInstall(Popper),TOOLTIP_INJECTION_KEY=Symbol("elTooltip"),useTooltipContentProps=buildProps({...useDelayedToggleProps,...popperContentProps,appendTo:{type:definePropType([String,Object])},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:definePropType(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean}),useTooltipTriggerProps=buildProps({...popperTriggerProps,disabled:Boolean,trigger:{type:definePropType([String,Array]),default:"hover"},triggerKeys:{type:definePropType(Array),default:()=>[EVENT_CODE.enter,EVENT_CODE.space]}}),{useModelToggleProps:useTooltipModelToggleProps,useModelToggleEmits:useTooltipModelToggleEmits,useModelToggle:useTooltipModelToggle}=createModelToggleComposable("visible"),useTooltipProps=buildProps({...popperProps,...useTooltipModelToggleProps,...useTooltipContentProps,...useTooltipTriggerProps,...popperArrowProps,showArrow:{type:Boolean,default:!0}}),tooltipEmits=[...useTooltipModelToggleEmits,"before-show","before-hide","show","hide","open","close"],isTriggerType=(e,n)=>isArray$3(e)?e.includes(n):e===n,whenTrigger=(e,n,r)=>g=>{isTriggerType(unref(e),n)&&r(g)},__default__$1r=defineComponent({name:"ElTooltipTrigger"}),_sfc_main$3l=defineComponent({...__default__$1r,props:useTooltipTriggerProps,setup(e,{expose:n}){const r=e,g=useNamespace("tooltip"),{controlled:y,id:k,open:$,onOpen:V,onClose:L,onToggle:z}=inject(TOOLTIP_INJECTION_KEY,void 0),j=ref(null),ae=()=>{if(unref(y)||r.disabled)return!0},oe=toRef(r,"trigger"),re=composeEventHandlers(ae,whenTrigger(oe,"hover",V)),ue=composeEventHandlers(ae,whenTrigger(oe,"hover",L)),le=composeEventHandlers(ae,whenTrigger(oe,"click",Ne=>{Ne.button===0&&z(Ne)})),de=composeEventHandlers(ae,whenTrigger(oe,"focus",V)),he=composeEventHandlers(ae,whenTrigger(oe,"focus",L)),_e=composeEventHandlers(ae,whenTrigger(oe,"contextmenu",Ne=>{Ne.preventDefault(),z(Ne)})),xe=composeEventHandlers(ae,Ne=>{const{code:$e}=Ne;r.triggerKeys.includes($e)&&(Ne.preventDefault(),z(Ne))});return n({triggerRef:j}),(Ne,$e)=>(openBlock(),createBlock(unref(ElPopperTrigger),{id:unref(k),"virtual-ref":Ne.virtualRef,open:unref($),"virtual-triggering":Ne.virtualTriggering,class:normalizeClass(unref(g).e("trigger")),onBlur:unref(he),onClick:unref(le),onContextmenu:unref(_e),onFocus:unref(de),onMouseenter:unref(re),onMouseleave:unref(ue),onKeydown:unref(xe)},{default:withCtx(()=>[renderSlot(Ne.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var ElTooltipTrigger=_export_sfc$1(_sfc_main$3l,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/trigger.vue"]]);const __default__$1q=defineComponent({name:"ElTooltipContent",inheritAttrs:!1}),_sfc_main$3k=defineComponent({...__default__$1q,props:useTooltipContentProps,setup(e,{expose:n}){const r=e,{selector:g}=usePopperContainerId(),y=useNamespace("tooltip"),k=ref(null),$=ref(!1),{controlled:V,id:L,open:z,trigger:j,onClose:ae,onOpen:oe,onShow:re,onHide:ue,onBeforeShow:le,onBeforeHide:de}=inject(TOOLTIP_INJECTION_KEY,void 0),he=computed(()=>r.transition||`${y.namespace.value}-fade-in-linear`),_e=computed(()=>r.persistent);onBeforeUnmount(()=>{$.value=!0});const xe=computed(()=>unref(_e)?!0:unref(z)),Ne=computed(()=>r.disabled?!1:unref(z)),$e=computed(()=>r.appendTo||g.value),Ce=computed(()=>{var Tn;return(Tn=r.style)!=null?Tn:{}}),Ie=computed(()=>!unref(z)),ze=()=>{ue()},Ue=()=>{if(unref(V))return!0},Pt=composeEventHandlers(Ue,()=>{r.enterable&&unref(j)==="hover"&&oe()}),hn=composeEventHandlers(Ue,()=>{unref(j)==="hover"&&ae()}),Dt=()=>{var Tn,Ln;(Ln=(Tn=k.value)==null?void 0:Tn.updatePopper)==null||Ln.call(Tn),le?.()},xn=()=>{de?.()},jt=()=>{re(),Rn=onClickOutside(computed(()=>{var Tn;return(Tn=k.value)==null?void 0:Tn.popperContentRef}),()=>{if(unref(V))return;unref(j)!=="hover"&&ae()})},Vn=()=>{r.virtualTriggering||ae()};let Rn;return watch(()=>unref(z),Tn=>{Tn||Rn?.()},{flush:"post"}),watch(()=>r.content,()=>{var Tn,Ln;(Ln=(Tn=k.value)==null?void 0:Tn.updatePopper)==null||Ln.call(Tn)}),n({contentRef:k}),(Tn,Ln)=>(openBlock(),createBlock(Teleport,{disabled:!Tn.teleported,to:unref($e)},[createVNode(Transition,{name:unref(he),onAfterLeave:ze,onBeforeEnter:Dt,onAfterEnter:jt,onBeforeLeave:xn},{default:withCtx(()=>[unref(xe)?withDirectives((openBlock(),createBlock(unref(ElPopperContent),mergeProps({key:0,id:unref(L),ref_key:"contentRef",ref:k},Tn.$attrs,{"aria-label":Tn.ariaLabel,"aria-hidden":unref(Ie),"boundaries-padding":Tn.boundariesPadding,"fallback-placements":Tn.fallbackPlacements,"gpu-acceleration":Tn.gpuAcceleration,offset:Tn.offset,placement:Tn.placement,"popper-options":Tn.popperOptions,strategy:Tn.strategy,effect:Tn.effect,enterable:Tn.enterable,pure:Tn.pure,"popper-class":Tn.popperClass,"popper-style":[Tn.popperStyle,unref(Ce)],"reference-el":Tn.referenceEl,"trigger-target-el":Tn.triggerTargetEl,visible:unref(Ne),"z-index":Tn.zIndex,onMouseenter:unref(Pt),onMouseleave:unref(hn),onBlur:Vn,onClose:unref(ae)}),{default:withCtx(()=>[$.value?createCommentVNode("v-if",!0):renderSlot(Tn.$slots,"default",{key:0})]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[vShow,unref(Ne)]]):createCommentVNode("v-if",!0)]),_:3},8,["name"])],8,["disabled","to"]))}});var ElTooltipContent=_export_sfc$1(_sfc_main$3k,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/content.vue"]]);const _hoisted_1$2g=["innerHTML"],_hoisted_2$1S={key:1},__default__$1p=defineComponent({name:"ElTooltip"}),_sfc_main$3j=defineComponent({...__default__$1p,props:useTooltipProps,emits:tooltipEmits,setup(e,{expose:n,emit:r}){const g=e;usePopperContainer();const y=useId(),k=ref(),$=ref(),V=()=>{var he;const _e=unref(k);_e&&((he=_e.popperInstanceRef)==null||he.update())},L=ref(!1),z=ref(),{show:j,hide:ae,hasUpdateHandler:oe}=useTooltipModelToggle({indicator:L,toggleReason:z}),{onOpen:re,onClose:ue}=useDelayedToggle({showAfter:toRef(g,"showAfter"),hideAfter:toRef(g,"hideAfter"),autoClose:toRef(g,"autoClose"),open:j,close:ae}),le=computed(()=>isBoolean$1(g.visible)&&!oe.value);provide(TOOLTIP_INJECTION_KEY,{controlled:le,id:y,open:readonly(L),trigger:toRef(g,"trigger"),onOpen:he=>{re(he)},onClose:he=>{ue(he)},onToggle:he=>{unref(L)?ue(he):re(he)},onShow:()=>{r("show",z.value)},onHide:()=>{r("hide",z.value)},onBeforeShow:()=>{r("before-show",z.value)},onBeforeHide:()=>{r("before-hide",z.value)},updatePopper:V}),watch(()=>g.disabled,he=>{he&&L.value&&(L.value=!1)});const de=he=>{var _e,xe;const Ne=(xe=(_e=$.value)==null?void 0:_e.contentRef)==null?void 0:xe.popperContentRef,$e=he?.relatedTarget||document.activeElement;return Ne&&Ne.contains($e)};return onDeactivated(()=>L.value&&ae()),n({popperRef:k,contentRef:$,isFocusInsideContent:de,updatePopper:V,onOpen:re,onClose:ue,hide:ae}),(he,_e)=>(openBlock(),createBlock(unref(ElPopper),{ref_key:"popperRef",ref:k,role:he.role},{default:withCtx(()=>[createVNode(ElTooltipTrigger,{disabled:he.disabled,trigger:he.trigger,"trigger-keys":he.triggerKeys,"virtual-ref":he.virtualRef,"virtual-triggering":he.virtualTriggering},{default:withCtx(()=>[he.$slots.default?renderSlot(he.$slots,"default",{key:0}):createCommentVNode("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),createVNode(ElTooltipContent,{ref_key:"contentRef",ref:$,"aria-label":he.ariaLabel,"boundaries-padding":he.boundariesPadding,content:he.content,disabled:he.disabled,effect:he.effect,enterable:he.enterable,"fallback-placements":he.fallbackPlacements,"hide-after":he.hideAfter,"gpu-acceleration":he.gpuAcceleration,offset:he.offset,persistent:he.persistent,"popper-class":he.popperClass,"popper-style":he.popperStyle,placement:he.placement,"popper-options":he.popperOptions,pure:he.pure,"raw-content":he.rawContent,"reference-el":he.referenceEl,"trigger-target-el":he.triggerTargetEl,"show-after":he.showAfter,strategy:he.strategy,teleported:he.teleported,transition:he.transition,"virtual-triggering":he.virtualTriggering,"z-index":he.zIndex,"append-to":he.appendTo},{default:withCtx(()=>[renderSlot(he.$slots,"content",{},()=>[he.rawContent?(openBlock(),createElementBlock("span",{key:0,innerHTML:he.content},null,8,_hoisted_1$2g)):(openBlock(),createElementBlock("span",_hoisted_2$1S,toDisplayString$1(he.content),1))]),he.showArrow?(openBlock(),createBlock(unref(ElPopperArrow),{key:0,"arrow-offset":he.arrowOffset},null,8,["arrow-offset"])):createCommentVNode("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Tooltip=_export_sfc$1(_sfc_main$3j,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/tooltip.vue"]]);const ElTooltip=withInstall(Tooltip),autocompleteProps=buildProps({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:definePropType(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:definePropType([Function,Array]),default:NOOP},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:useTooltipContentProps.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:String}),autocompleteEmits={[UPDATE_MODEL_EVENT]:e=>isString$3(e),[INPUT_EVENT]:e=>isString$3(e),[CHANGE_EVENT]:e=>isString$3(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>isObject$3(e)},_hoisted_1$2f=["aria-expanded","aria-owns"],_hoisted_2$1R={key:0},_hoisted_3$17=["id","aria-selected","onClick"],COMPONENT_NAME$i="ElAutocomplete",__default__$1o=defineComponent({name:COMPONENT_NAME$i,inheritAttrs:!1}),_sfc_main$3i=defineComponent({...__default__$1o,props:autocompleteProps,emits:autocompleteEmits,setup(e,{expose:n,emit:r}){const g=e,y=useAttrs(),k=useAttrs$1(),$=useFormDisabled(),V=useNamespace("autocomplete"),L=ref(),z=ref(),j=ref(),ae=ref();let oe=!1,re=!1;const ue=ref([]),le=ref(-1),de=ref(""),he=ref(!1),_e=ref(!1),xe=ref(!1),Ne=computed(()=>V.b(String(generateId()))),$e=computed(()=>k.style),Ce=computed(()=>(ue.value.length>0||xe.value)&&he.value),Ie=computed(()=>!g.hideLoading&&xe.value),ze=computed(()=>L.value?Array.from(L.value.$el.querySelectorAll("input")):[]),Ue=()=>{Ce.value&&(de.value=`${L.value.$el.offsetWidth}px`)},Pt=()=>{le.value=-1},Dt=debounce(async aa=>{if(_e.value)return;const Nn=En=>{xe.value=!1,!_e.value&&(isArray$3(En)?(ue.value=En,le.value=g.highlightFirstItem?0:-1):throwError(COMPONENT_NAME$i,"autocomplete suggestions must be an array"))};if(xe.value=!0,isArray$3(g.fetchSuggestions))Nn(g.fetchSuggestions);else{const En=await g.fetchSuggestions(aa,Nn);isArray$3(En)&&Nn(En)}},g.debounce),xn=aa=>{const Nn=!!aa;if(r(INPUT_EVENT,aa),r(UPDATE_MODEL_EVENT,aa),_e.value=!1,he.value||(he.value=Nn),!g.triggerOnFocus&&!aa){_e.value=!0,ue.value=[];return}Dt(aa)},jt=aa=>{var Nn;$.value||(((Nn=aa.target)==null?void 0:Nn.tagName)!=="INPUT"||ze.value.includes(document.activeElement))&&(he.value=!0)},Vn=aa=>{r(CHANGE_EVENT,aa)},Rn=aa=>{re?re=!1:(he.value=!0,r("focus",aa),g.triggerOnFocus&&!oe&&Dt(String(g.modelValue)))},Tn=aa=>{setTimeout(()=>{var Nn;if((Nn=j.value)!=null&&Nn.isFocusInsideContent()){re=!0;return}he.value&&In(),r("blur",aa)})},Ln=()=>{he.value=!1,r(UPDATE_MODEL_EVENT,""),r("clear")},Sn=async()=>{Ce.value&&le.value>=0&&le.value<ue.value.length?da(ue.value[le.value]):g.selectWhenUnmatched&&(r("select",{value:g.modelValue}),ue.value=[],le.value=-1)},An=aa=>{Ce.value&&(aa.preventDefault(),aa.stopPropagation(),In())},In=()=>{he.value=!1},Mn=()=>{var aa;(aa=L.value)==null||aa.focus()},ra=()=>{var aa;(aa=L.value)==null||aa.blur()},da=async aa=>{r(INPUT_EVENT,aa[g.valueKey]),r(UPDATE_MODEL_EVENT,aa[g.valueKey]),r("select",aa),ue.value=[],le.value=-1},ua=aa=>{if(!Ce.value||xe.value)return;if(aa<0){le.value=-1;return}aa>=ue.value.length&&(aa=ue.value.length-1);const Nn=z.value.querySelector(`.${V.be("suggestion","wrap")}`),Zn=Nn.querySelectorAll(`.${V.be("suggestion","list")} li`)[aa],ha=Nn.scrollTop,{offsetTop:xa,scrollHeight:sa}=Zn;xa+sa>ha+Nn.clientHeight&&(Nn.scrollTop+=sa),xa<ha&&(Nn.scrollTop-=sa),le.value=aa,L.value.ref.setAttribute("aria-activedescendant",`${Ne.value}-item-${le.value}`)};return onClickOutside(ae,()=>{Ce.value&&In()}),onMounted(()=>{L.value.ref.setAttribute("role","textbox"),L.value.ref.setAttribute("aria-autocomplete","list"),L.value.ref.setAttribute("aria-controls","id"),L.value.ref.setAttribute("aria-activedescendant",`${Ne.value}-item-${le.value}`),oe=L.value.ref.hasAttribute("readonly")}),n({highlightedIndex:le,activated:he,loading:xe,inputRef:L,popperRef:j,suggestions:ue,handleSelect:da,handleKeyEnter:Sn,focus:Mn,blur:ra,close:In,highlight:ua}),(aa,Nn)=>(openBlock(),createBlock(unref(ElTooltip),{ref_key:"popperRef",ref:j,visible:unref(Ce),placement:aa.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[unref(V).e("popper"),aa.popperClass],teleported:aa.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${unref(V).namespace.value}-zoom-in-top`,persistent:"",role:"listbox",onBeforeShow:Ue,onHide:Pt},{content:withCtx(()=>[createBaseVNode("div",{ref_key:"regionRef",ref:z,class:normalizeClass([unref(V).b("suggestion"),unref(V).is("loading",unref(Ie))]),style:normalizeStyle({[aa.fitInputWidth?"width":"minWidth"]:de.value,outline:"none"}),role:"region"},[createVNode(unref(ElScrollbar),{id:unref(Ne),tag:"ul","wrap-class":unref(V).be("suggestion","wrap"),"view-class":unref(V).be("suggestion","list"),role:"listbox"},{default:withCtx(()=>[unref(Ie)?(openBlock(),createElementBlock("li",_hoisted_2$1R,[createVNode(unref(ElIcon),{class:normalizeClass(unref(V).is("loading"))},{default:withCtx(()=>[createVNode(unref(loading_default))]),_:1},8,["class"])])):(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(ue.value,(En,Zn)=>(openBlock(),createElementBlock("li",{id:`${unref(Ne)}-item-${Zn}`,key:Zn,class:normalizeClass({highlighted:le.value===Zn}),role:"option","aria-selected":le.value===Zn,onClick:ha=>da(En)},[renderSlot(aa.$slots,"default",{item:En},()=>[createTextVNode(toDisplayString$1(En[aa.valueKey]),1)])],10,_hoisted_3$17))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:withCtx(()=>[createBaseVNode("div",{ref_key:"listboxRef",ref:ae,class:normalizeClass([unref(V).b(),aa.$attrs.class]),style:normalizeStyle(unref($e)),role:"combobox","aria-haspopup":"listbox","aria-expanded":unref(Ce),"aria-owns":unref(Ne)},[createVNode(unref(ElInput),mergeProps({ref_key:"inputRef",ref:L},unref(y),{clearable:aa.clearable,disabled:unref($),name:aa.name,"model-value":aa.modelValue,onInput:xn,onChange:Vn,onFocus:Rn,onBlur:Tn,onClear:Ln,onKeydown:[Nn[0]||(Nn[0]=withKeys(withModifiers(En=>ua(le.value-1),["prevent"]),["up"])),Nn[1]||(Nn[1]=withKeys(withModifiers(En=>ua(le.value+1),["prevent"]),["down"])),withKeys(Sn,["enter"]),withKeys(In,["tab"]),withKeys(An,["esc"])],onMousedown:jt}),createSlots({_:2},[aa.$slots.prepend?{name:"prepend",fn:withCtx(()=>[renderSlot(aa.$slots,"prepend")])}:void 0,aa.$slots.append?{name:"append",fn:withCtx(()=>[renderSlot(aa.$slots,"append")])}:void 0,aa.$slots.prefix?{name:"prefix",fn:withCtx(()=>[renderSlot(aa.$slots,"prefix")])}:void 0,aa.$slots.suffix?{name:"suffix",fn:withCtx(()=>[renderSlot(aa.$slots,"suffix")])}:void 0]),1040,["clearable","disabled","name","model-value","onKeydown"])],14,_hoisted_1$2f)]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var Autocomplete=_export_sfc$1(_sfc_main$3i,[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]);const ElAutocomplete=withInstall(Autocomplete),avatarProps=buildProps({size:{type:[Number,String],values:componentSizes,default:"",validator:e=>isNumber$1(e)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:iconPropType},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:definePropType(String),default:"cover"}}),avatarEmits={error:e=>e instanceof Event},_hoisted_1$2e=["src","alt","srcset"],__default__$1n=defineComponent({name:"ElAvatar"}),_sfc_main$3h=defineComponent({...__default__$1n,props:avatarProps,emits:avatarEmits,setup(e,{emit:n}){const r=e,g=useNamespace("avatar"),y=ref(!1),k=computed(()=>{const{size:z,icon:j,shape:ae}=r,oe=[g.b()];return isString$3(z)&&oe.push(g.m(z)),j&&oe.push(g.m("icon")),ae&&oe.push(g.m(ae)),oe}),$=computed(()=>{const{size:z}=r;return isNumber$1(z)?g.cssVarBlock({size:addUnit(z)||""}):void 0}),V=computed(()=>({objectFit:r.fit}));watch(()=>r.src,()=>y.value=!1);function L(z){y.value=!0,n("error",z)}return(z,j)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(k)),style:normalizeStyle(unref($))},[(z.src||z.srcSet)&&!y.value?(openBlock(),createElementBlock("img",{key:0,src:z.src,alt:z.alt,srcset:z.srcSet,style:normalizeStyle(unref(V)),onError:L},null,44,_hoisted_1$2e)):z.icon?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(z.icon)))]),_:1})):renderSlot(z.$slots,"default",{key:2})],6))}});var Avatar=_export_sfc$1(_sfc_main$3h,[["__file","/home/runner/work/element-plus/element-plus/packages/components/avatar/src/avatar.vue"]]);const ElAvatar=withInstall(Avatar),backtopProps={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},backtopEmits={click:e=>e instanceof MouseEvent},useBackTop=(e,n,r)=>{const g=shallowRef(),y=shallowRef(),k=ref(!1),$=()=>{g.value&&(k.value=g.value.scrollTop>=e.visibilityHeight)},V=z=>{var j;(j=g.value)==null||j.scrollTo({top:0,behavior:"smooth"}),n("click",z)},L=useThrottleFn($,300,!0);return useEventListener(y,"scroll",L),onMounted(()=>{var z;y.value=document,g.value=document.documentElement,e.target&&(g.value=(z=document.querySelector(e.target))!=null?z:void 0,g.value||throwError(r,`target does not exist: ${e.target}`),y.value=g.value),$()}),{visible:k,handleClick:V}},COMPONENT_NAME$h="ElBacktop",__default__$1m=defineComponent({name:COMPONENT_NAME$h}),_sfc_main$3g=defineComponent({...__default__$1m,props:backtopProps,emits:backtopEmits,setup(e,{emit:n}){const r=e,g=useNamespace("backtop"),{handleClick:y,visible:k}=useBackTop(r,n,COMPONENT_NAME$h),$=computed(()=>({right:`${r.right}px`,bottom:`${r.bottom}px`}));return(V,L)=>(openBlock(),createBlock(Transition,{name:`${unref(g).namespace.value}-fade-in`},{default:withCtx(()=>[unref(k)?(openBlock(),createElementBlock("div",{key:0,style:normalizeStyle(unref($)),class:normalizeClass(unref(g).b()),onClick:L[0]||(L[0]=withModifiers((...z)=>unref(y)&&unref(y)(...z),["stop"]))},[renderSlot(V.$slots,"default",{},()=>[createVNode(unref(ElIcon),{class:normalizeClass(unref(g).e("icon"))},{default:withCtx(()=>[createVNode(unref(caret_top_default))]),_:1},8,["class"])])],6)):createCommentVNode("v-if",!0)]),_:3},8,["name"]))}});var Backtop=_export_sfc$1(_sfc_main$3g,[["__file","/home/runner/work/element-plus/element-plus/packages/components/backtop/src/backtop.vue"]]);const ElBacktop=withInstall(Backtop),badgeProps=buildProps({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),_hoisted_1$2d=["textContent"],__default__$1l=defineComponent({name:"ElBadge"}),_sfc_main$3f=defineComponent({...__default__$1l,props:badgeProps,setup(e,{expose:n}){const r=e,g=useNamespace("badge"),y=computed(()=>r.isDot?"":isNumber$1(r.value)&&isNumber$1(r.max)?r.max<r.value?`${r.max}+`:`${r.value}`:`${r.value}`);return n({content:y}),(k,$)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(g).b())},[renderSlot(k.$slots,"default"),createVNode(Transition,{name:`${unref(g).namespace.value}-zoom-in-center`,persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("sup",{class:normalizeClass([unref(g).e("content"),unref(g).em("content",k.type),unref(g).is("fixed",!!k.$slots.default),unref(g).is("dot",k.isDot)]),textContent:toDisplayString$1(unref(y))},null,10,_hoisted_1$2d),[[vShow,!k.hidden&&(unref(y)||k.isDot)]])]),_:1},8,["name"])],2))}});var Badge=_export_sfc$1(_sfc_main$3f,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const ElBadge=withInstall(Badge),breadcrumbKey=Symbol("breadcrumbKey"),breadcrumbProps=buildProps({separator:{type:String,default:"/"},separatorIcon:{type:iconPropType}}),__default__$1k=defineComponent({name:"ElBreadcrumb"}),_sfc_main$3e=defineComponent({...__default__$1k,props:breadcrumbProps,setup(e){const n=e,r=useNamespace("breadcrumb"),g=ref();return provide(breadcrumbKey,n),onMounted(()=>{const y=g.value.querySelectorAll(`.${r.e("item")}`);y.length&&y[y.length-1].setAttribute("aria-current","page")}),(y,k)=>(openBlock(),createElementBlock("div",{ref_key:"breadcrumb",ref:g,class:normalizeClass(unref(r).b()),"aria-label":"Breadcrumb",role:"navigation"},[renderSlot(y.$slots,"default")],2))}});var Breadcrumb=_export_sfc$1(_sfc_main$3e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb.vue"]]);const breadcrumbItemProps=buildProps({to:{type:definePropType([String,Object]),default:""},replace:{type:Boolean,default:!1}}),__default__$1j=defineComponent({name:"ElBreadcrumbItem"}),_sfc_main$3d=defineComponent({...__default__$1j,props:breadcrumbItemProps,setup(e){const n=e,r=getCurrentInstance(),g=inject(breadcrumbKey,void 0),y=useNamespace("breadcrumb"),k=r.appContext.config.globalProperties.$router,$=ref(),V=()=>{!n.to||!k||(n.replace?k.replace(n.to):k.push(n.to))};return(L,z)=>{var j,ae;return openBlock(),createElementBlock("span",{class:normalizeClass(unref(y).e("item"))},[createBaseVNode("span",{ref_key:"link",ref:$,class:normalizeClass([unref(y).e("inner"),unref(y).is("link",!!L.to)]),role:"link",onClick:V},[renderSlot(L.$slots,"default")],2),(j=unref(g))!=null&&j.separatorIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(y).e("separator"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(g).separatorIcon)))]),_:1},8,["class"])):(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(y).e("separator")),role:"presentation"},toDisplayString$1((ae=unref(g))==null?void 0:ae.separator),3))],2)}}});var BreadcrumbItem=_export_sfc$1(_sfc_main$3d,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb-item.vue"]]);const ElBreadcrumb=withInstall(Breadcrumb,{BreadcrumbItem}),ElBreadcrumbItem=withNoopInstall(BreadcrumbItem),buttonGroupContextKey=Symbol("buttonGroupContextKey"),useButton=(e,n)=>{useDeprecated({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},computed(()=>e.type==="text"));const r=inject(buttonGroupContextKey,void 0),g=useGlobalConfig("button"),{form:y}=useFormItem(),k=useFormSize(computed(()=>r?.size)),$=useFormDisabled(),V=ref(),L=useSlots(),z=computed(()=>e.type||r?.type||""),j=computed(()=>{var ue,le,de;return(de=(le=e.autoInsertSpace)!=null?le:(ue=g.value)==null?void 0:ue.autoInsertSpace)!=null?de:!1}),ae=computed(()=>e.tag==="button"?{ariaDisabled:$.value||e.loading,disabled:$.value||e.loading,autofocus:e.autofocus,type:e.nativeType}:{}),oe=computed(()=>{var ue;const le=(ue=L.default)==null?void 0:ue.call(L);if(j.value&&le?.length===1){const de=le[0];if(de?.type===Text$2){const he=de.children;return/^\p{Unified_Ideograph}{2}$/u.test(he.trim())}}return!1});return{_disabled:$,_size:k,_type:z,_ref:V,_props:ae,shouldAddSpace:oe,handleClick:ue=>{e.nativeType==="reset"&&y?.resetFields(),n("click",ue)}}},buttonTypes=["default","primary","success","warning","info","danger","text",""],buttonNativeTypes=["button","submit","reset"],buttonProps=buildProps({size:useSizeProp,disabled:Boolean,type:{type:String,values:buttonTypes,default:""},icon:{type:iconPropType},nativeType:{type:String,values:buttonNativeTypes,default:"button"},loading:Boolean,loadingIcon:{type:iconPropType,default:()=>loading_default},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:definePropType([String,Object]),default:"button"}}),buttonEmits={click:e=>e instanceof MouseEvent};function bound01$1(e,n){isOnePointZero$1(e)&&(e="100%");var r=isPercentage$1(e);return e=n===360?e:Math.min(n,Math.max(0,parseFloat(e))),r&&(e=parseInt(String(e*n),10)/100),Math.abs(e-n)<1e-6?1:(n===360?e=(e<0?e%n+n:e%n)/parseFloat(String(n)):e=e%n/parseFloat(String(n)),e)}function clamp01(e){return Math.min(1,Math.max(0,e))}function isOnePointZero$1(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function isPercentage$1(e){return typeof e=="string"&&e.indexOf("%")!==-1}function boundAlpha(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function convertToPercentage(e){return e<=1?"".concat(Number(e)*100,"%"):e}function pad2(e){return e.length===1?"0"+e:String(e)}function rgbToRgb(e,n,r){return{r:bound01$1(e,255)*255,g:bound01$1(n,255)*255,b:bound01$1(r,255)*255}}function rgbToHsl(e,n,r){e=bound01$1(e,255),n=bound01$1(n,255),r=bound01$1(r,255);var g=Math.max(e,n,r),y=Math.min(e,n,r),k=0,$=0,V=(g+y)/2;if(g===y)$=0,k=0;else{var L=g-y;switch($=V>.5?L/(2-g-y):L/(g+y),g){case e:k=(n-r)/L+(n<r?6:0);break;case n:k=(r-e)/L+2;break;case r:k=(e-n)/L+4;break}k/=6}return{h:k,s:$,l:V}}function hue2rgb(e,n,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(n-e)*(6*r):r<1/2?n:r<2/3?e+(n-e)*(2/3-r)*6:e}function hslToRgb(e,n,r){var g,y,k;if(e=bound01$1(e,360),n=bound01$1(n,100),r=bound01$1(r,100),n===0)y=r,k=r,g=r;else{var $=r<.5?r*(1+n):r+n-r*n,V=2*r-$;g=hue2rgb(V,$,e+1/3),y=hue2rgb(V,$,e),k=hue2rgb(V,$,e-1/3)}return{r:g*255,g:y*255,b:k*255}}function rgbToHsv(e,n,r){e=bound01$1(e,255),n=bound01$1(n,255),r=bound01$1(r,255);var g=Math.max(e,n,r),y=Math.min(e,n,r),k=0,$=g,V=g-y,L=g===0?0:V/g;if(g===y)k=0;else{switch(g){case e:k=(n-r)/V+(n<r?6:0);break;case n:k=(r-e)/V+2;break;case r:k=(e-n)/V+4;break}k/=6}return{h:k,s:L,v:$}}function hsvToRgb(e,n,r){e=bound01$1(e,360)*6,n=bound01$1(n,100),r=bound01$1(r,100);var g=Math.floor(e),y=e-g,k=r*(1-n),$=r*(1-y*n),V=r*(1-(1-y)*n),L=g%6,z=[r,$,k,k,V,r][L],j=[V,r,r,$,k,k][L],ae=[k,k,V,r,r,$][L];return{r:z*255,g:j*255,b:ae*255}}function rgbToHex(e,n,r,g){var y=[pad2(Math.round(e).toString(16)),pad2(Math.round(n).toString(16)),pad2(Math.round(r).toString(16))];return g&&y[0].startsWith(y[0].charAt(1))&&y[1].startsWith(y[1].charAt(1))&&y[2].startsWith(y[2].charAt(1))?y[0].charAt(0)+y[1].charAt(0)+y[2].charAt(0):y.join("")}function rgbaToHex(e,n,r,g,y){var k=[pad2(Math.round(e).toString(16)),pad2(Math.round(n).toString(16)),pad2(Math.round(r).toString(16)),pad2(convertDecimalToHex(g))];return y&&k[0].startsWith(k[0].charAt(1))&&k[1].startsWith(k[1].charAt(1))&&k[2].startsWith(k[2].charAt(1))&&k[3].startsWith(k[3].charAt(1))?k[0].charAt(0)+k[1].charAt(0)+k[2].charAt(0)+k[3].charAt(0):k.join("")}function convertDecimalToHex(e){return Math.round(parseFloat(e)*255).toString(16)}function convertHexToDecimal(e){return parseIntFromHex(e)/255}function parseIntFromHex(e){return parseInt(e,16)}function numberInputToObject(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function inputToRGB(e){var n={r:0,g:0,b:0},r=1,g=null,y=null,k=null,$=!1,V=!1;return typeof e=="string"&&(e=stringInputToObject(e)),typeof e=="object"&&(isValidCSSUnit(e.r)&&isValidCSSUnit(e.g)&&isValidCSSUnit(e.b)?(n=rgbToRgb(e.r,e.g,e.b),$=!0,V=String(e.r).substr(-1)==="%"?"prgb":"rgb"):isValidCSSUnit(e.h)&&isValidCSSUnit(e.s)&&isValidCSSUnit(e.v)?(g=convertToPercentage(e.s),y=convertToPercentage(e.v),n=hsvToRgb(e.h,g,y),$=!0,V="hsv"):isValidCSSUnit(e.h)&&isValidCSSUnit(e.s)&&isValidCSSUnit(e.l)&&(g=convertToPercentage(e.s),k=convertToPercentage(e.l),n=hslToRgb(e.h,g,k),$=!0,V="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(r=e.a)),r=boundAlpha(r),{ok:$,format:e.format||V,r:Math.min(255,Math.max(n.r,0)),g:Math.min(255,Math.max(n.g,0)),b:Math.min(255,Math.max(n.b,0)),a:r}}var CSS_INTEGER="[-\\+]?\\d+%?",CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?",CSS_UNIT="(?:".concat(CSS_NUMBER,")|(?:").concat(CSS_INTEGER,")"),PERMISSIVE_MATCH3="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),PERMISSIVE_MATCH4="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),matchers={CSS_UNIT:new RegExp(CSS_UNIT),rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function stringInputToObject(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var n=!1;if(names[e])e=names[e],n=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r=matchers.rgb.exec(e);return r?{r:r[1],g:r[2],b:r[3]}:(r=matchers.rgba.exec(e),r?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=matchers.hsl.exec(e),r?{h:r[1],s:r[2],l:r[3]}:(r=matchers.hsla.exec(e),r?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=matchers.hsv.exec(e),r?{h:r[1],s:r[2],v:r[3]}:(r=matchers.hsva.exec(e),r?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=matchers.hex8.exec(e),r?{r:parseIntFromHex(r[1]),g:parseIntFromHex(r[2]),b:parseIntFromHex(r[3]),a:convertHexToDecimal(r[4]),format:n?"name":"hex8"}:(r=matchers.hex6.exec(e),r?{r:parseIntFromHex(r[1]),g:parseIntFromHex(r[2]),b:parseIntFromHex(r[3]),format:n?"name":"hex"}:(r=matchers.hex4.exec(e),r?{r:parseIntFromHex(r[1]+r[1]),g:parseIntFromHex(r[2]+r[2]),b:parseIntFromHex(r[3]+r[3]),a:convertHexToDecimal(r[4]+r[4]),format:n?"name":"hex8"}:(r=matchers.hex3.exec(e),r?{r:parseIntFromHex(r[1]+r[1]),g:parseIntFromHex(r[2]+r[2]),b:parseIntFromHex(r[3]+r[3]),format:n?"name":"hex"}:!1)))))))))}function isValidCSSUnit(e){return!!matchers.CSS_UNIT.exec(String(e))}var TinyColor=function(){function e(n,r){n===void 0&&(n=""),r===void 0&&(r={});var g;if(n instanceof e)return n;typeof n=="number"&&(n=numberInputToObject(n)),this.originalInput=n;var y=inputToRGB(n);this.originalInput=n,this.r=y.r,this.g=y.g,this.b=y.b,this.a=y.a,this.roundA=Math.round(100*this.a)/100,this.format=(g=r.format)!==null&&g!==void 0?g:y.format,this.gradientType=r.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=y.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var n=this.toRgb();return(n.r*299+n.g*587+n.b*114)/1e3},e.prototype.getLuminance=function(){var n=this.toRgb(),r,g,y,k=n.r/255,$=n.g/255,V=n.b/255;return k<=.03928?r=k/12.92:r=Math.pow((k+.055)/1.055,2.4),$<=.03928?g=$/12.92:g=Math.pow(($+.055)/1.055,2.4),V<=.03928?y=V/12.92:y=Math.pow((V+.055)/1.055,2.4),.2126*r+.7152*g+.0722*y},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(n){return this.a=boundAlpha(n),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var n=this.toHsl().s;return n===0},e.prototype.toHsv=function(){var n=rgbToHsv(this.r,this.g,this.b);return{h:n.h*360,s:n.s,v:n.v,a:this.a}},e.prototype.toHsvString=function(){var n=rgbToHsv(this.r,this.g,this.b),r=Math.round(n.h*360),g=Math.round(n.s*100),y=Math.round(n.v*100);return this.a===1?"hsv(".concat(r,", ").concat(g,"%, ").concat(y,"%)"):"hsva(".concat(r,", ").concat(g,"%, ").concat(y,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var n=rgbToHsl(this.r,this.g,this.b);return{h:n.h*360,s:n.s,l:n.l,a:this.a}},e.prototype.toHslString=function(){var n=rgbToHsl(this.r,this.g,this.b),r=Math.round(n.h*360),g=Math.round(n.s*100),y=Math.round(n.l*100);return this.a===1?"hsl(".concat(r,", ").concat(g,"%, ").concat(y,"%)"):"hsla(".concat(r,", ").concat(g,"%, ").concat(y,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(n){return n===void 0&&(n=!1),rgbToHex(this.r,this.g,this.b,n)},e.prototype.toHexString=function(n){return n===void 0&&(n=!1),"#"+this.toHex(n)},e.prototype.toHex8=function(n){return n===void 0&&(n=!1),rgbaToHex(this.r,this.g,this.b,this.a,n)},e.prototype.toHex8String=function(n){return n===void 0&&(n=!1),"#"+this.toHex8(n)},e.prototype.toHexShortString=function(n){return n===void 0&&(n=!1),this.a===1?this.toHexString(n):this.toHex8String(n)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var n=Math.round(this.r),r=Math.round(this.g),g=Math.round(this.b);return this.a===1?"rgb(".concat(n,", ").concat(r,", ").concat(g,")"):"rgba(".concat(n,", ").concat(r,", ").concat(g,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var n=function(r){return"".concat(Math.round(bound01$1(r,255)*100),"%")};return{r:n(this.r),g:n(this.g),b:n(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var n=function(r){return Math.round(bound01$1(r,255)*100)};return this.a===1?"rgb(".concat(n(this.r),"%, ").concat(n(this.g),"%, ").concat(n(this.b),"%)"):"rgba(".concat(n(this.r),"%, ").concat(n(this.g),"%, ").concat(n(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var n="#"+rgbToHex(this.r,this.g,this.b,!1),r=0,g=Object.entries(names);r<g.length;r++){var y=g[r],k=y[0],$=y[1];if(n===$)return k}return!1},e.prototype.toString=function(n){var r=!!n;n=n??this.format;var g=!1,y=this.a<1&&this.a>=0,k=!r&&y&&(n.startsWith("hex")||n==="name");return k?n==="name"&&this.a===0?this.toName():this.toRgbString():(n==="rgb"&&(g=this.toRgbString()),n==="prgb"&&(g=this.toPercentageRgbString()),(n==="hex"||n==="hex6")&&(g=this.toHexString()),n==="hex3"&&(g=this.toHexString(!0)),n==="hex4"&&(g=this.toHex8String(!0)),n==="hex8"&&(g=this.toHex8String()),n==="name"&&(g=this.toName()),n==="hsl"&&(g=this.toHslString()),n==="hsv"&&(g=this.toHsvString()),g||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(n){n===void 0&&(n=10);var r=this.toHsl();return r.l+=n/100,r.l=clamp01(r.l),new e(r)},e.prototype.brighten=function(n){n===void 0&&(n=10);var r=this.toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(n/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(n/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(n/100)))),new e(r)},e.prototype.darken=function(n){n===void 0&&(n=10);var r=this.toHsl();return r.l-=n/100,r.l=clamp01(r.l),new e(r)},e.prototype.tint=function(n){return n===void 0&&(n=10),this.mix("white",n)},e.prototype.shade=function(n){return n===void 0&&(n=10),this.mix("black",n)},e.prototype.desaturate=function(n){n===void 0&&(n=10);var r=this.toHsl();return r.s-=n/100,r.s=clamp01(r.s),new e(r)},e.prototype.saturate=function(n){n===void 0&&(n=10);var r=this.toHsl();return r.s+=n/100,r.s=clamp01(r.s),new e(r)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(n){var r=this.toHsl(),g=(r.h+n)%360;return r.h=g<0?360+g:g,new e(r)},e.prototype.mix=function(n,r){r===void 0&&(r=50);var g=this.toRgb(),y=new e(n).toRgb(),k=r/100,$={r:(y.r-g.r)*k+g.r,g:(y.g-g.g)*k+g.g,b:(y.b-g.b)*k+g.b,a:(y.a-g.a)*k+g.a};return new e($)},e.prototype.analogous=function(n,r){n===void 0&&(n=6),r===void 0&&(r=30);var g=this.toHsl(),y=360/r,k=[this];for(g.h=(g.h-(y*n>>1)+720)%360;--n;)g.h=(g.h+y)%360,k.push(new e(g));return k},e.prototype.complement=function(){var n=this.toHsl();return n.h=(n.h+180)%360,new e(n)},e.prototype.monochromatic=function(n){n===void 0&&(n=6);for(var r=this.toHsv(),g=r.h,y=r.s,k=r.v,$=[],V=1/n;n--;)$.push(new e({h:g,s:y,v:k})),k=(k+V)%1;return $},e.prototype.splitcomplement=function(){var n=this.toHsl(),r=n.h;return[this,new e({h:(r+72)%360,s:n.s,l:n.l}),new e({h:(r+216)%360,s:n.s,l:n.l})]},e.prototype.onBackground=function(n){var r=this.toRgb(),g=new e(n).toRgb(),y=r.a+g.a*(1-r.a);return new e({r:(r.r*r.a+g.r*g.a*(1-r.a))/y,g:(r.g*r.a+g.g*g.a*(1-r.a))/y,b:(r.b*r.a+g.b*g.a*(1-r.a))/y,a:y})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(n){for(var r=this.toHsl(),g=r.h,y=[this],k=360/n,$=1;$<n;$++)y.push(new e({h:(g+$*k)%360,s:r.s,l:r.l}));return y},e.prototype.equals=function(n){return this.toRgbString()===new e(n).toRgbString()},e}();function darken(e,n=20){return e.mix("#141414",n).toString()}function useButtonCustomStyle(e){const n=useFormDisabled(),r=useNamespace("button");return computed(()=>{let g={};const y=e.color;if(y){const k=new TinyColor(y),$=e.dark?k.tint(20).toString():darken(k,20);if(e.plain)g=r.cssVarBlock({"bg-color":e.dark?darken(k,90):k.tint(90).toString(),"text-color":y,"border-color":e.dark?darken(k,50):k.tint(50).toString(),"hover-text-color":`var(${r.cssVarName("color-white")})`,"hover-bg-color":y,"hover-border-color":y,"active-bg-color":$,"active-text-color":`var(${r.cssVarName("color-white")})`,"active-border-color":$}),n.value&&(g[r.cssVarBlockName("disabled-bg-color")]=e.dark?darken(k,90):k.tint(90).toString(),g[r.cssVarBlockName("disabled-text-color")]=e.dark?darken(k,50):k.tint(50).toString(),g[r.cssVarBlockName("disabled-border-color")]=e.dark?darken(k,80):k.tint(80).toString());else{const V=e.dark?darken(k,30):k.tint(30).toString(),L=k.isDark()?`var(${r.cssVarName("color-white")})`:`var(${r.cssVarName("color-black")})`;if(g=r.cssVarBlock({"bg-color":y,"text-color":L,"border-color":y,"hover-bg-color":V,"hover-text-color":L,"hover-border-color":V,"active-bg-color":$,"active-border-color":$}),n.value){const z=e.dark?darken(k,50):k.tint(50).toString();g[r.cssVarBlockName("disabled-bg-color")]=z,g[r.cssVarBlockName("disabled-text-color")]=e.dark?"rgba(255, 255, 255, 0.5)":`var(${r.cssVarName("color-white")})`,g[r.cssVarBlockName("disabled-border-color")]=z}}}return g})}const __default__$1i=defineComponent({name:"ElButton"}),_sfc_main$3c=defineComponent({...__default__$1i,props:buttonProps,emits:buttonEmits,setup(e,{expose:n,emit:r}){const g=e,y=useButtonCustomStyle(g),k=useNamespace("button"),{_ref:$,_size:V,_type:L,_disabled:z,_props:j,shouldAddSpace:ae,handleClick:oe}=useButton(g,r);return n({ref:$,size:V,type:L,disabled:z,shouldAddSpace:ae}),(re,ue)=>(openBlock(),createBlock(resolveDynamicComponent(re.tag),mergeProps({ref_key:"_ref",ref:$},unref(j),{class:[unref(k).b(),unref(k).m(unref(L)),unref(k).m(unref(V)),unref(k).is("disabled",unref(z)),unref(k).is("loading",re.loading),unref(k).is("plain",re.plain),unref(k).is("round",re.round),unref(k).is("circle",re.circle),unref(k).is("text",re.text),unref(k).is("link",re.link),unref(k).is("has-bg",re.bg)],style:unref(y),onClick:unref(oe)}),{default:withCtx(()=>[re.loading?(openBlock(),createElementBlock(Fragment,{key:0},[re.$slots.loading?renderSlot(re.$slots,"loading",{key:0}):(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass(unref(k).is("loading"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(re.loadingIcon)))]),_:1},8,["class"]))],64)):re.icon||re.$slots.icon?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[re.icon?(openBlock(),createBlock(resolveDynamicComponent(re.icon),{key:0})):renderSlot(re.$slots,"icon",{key:1})]),_:3})):createCommentVNode("v-if",!0),re.$slots.default?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass({[unref(k).em("text","expand")]:unref(ae)})},[renderSlot(re.$slots,"default")],2)):createCommentVNode("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var Button=_export_sfc$1(_sfc_main$3c,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button.vue"]]);const buttonGroupProps={size:buttonProps.size,type:buttonProps.type},__default__$1h=defineComponent({name:"ElButtonGroup"}),_sfc_main$3b=defineComponent({...__default__$1h,props:buttonGroupProps,setup(e){const n=e;provide(buttonGroupContextKey,reactive({size:toRef(n,"size"),type:toRef(n,"type")}));const r=useNamespace("button");return(g,y)=>(openBlock(),createElementBlock("div",{class:normalizeClass(`${unref(r).b("group")}`)},[renderSlot(g.$slots,"default")],2))}});var ButtonGroup=_export_sfc$1(_sfc_main$3b,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button-group.vue"]]);const ElButton=withInstall(Button,{ButtonGroup}),ElButtonGroup$1=withNoopInstall(ButtonGroup);var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var r=function g(){return this instanceof g?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(g){var y=Object.getOwnPropertyDescriptor(e,g);Object.defineProperty(r,g,y.get?y:{enumerable:!0,get:function(){return e[g]}})}),r}var dayjs_min={exports:{}};(function(e,n){(function(r,g){e.exports=g()})(commonjsGlobal$1,function(){var r=1e3,g=6e4,y=36e5,k="millisecond",$="second",V="minute",L="hour",z="day",j="week",ae="month",oe="quarter",re="year",ue="date",le="Invalid Date",de=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,he=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_e={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(xn){var jt=["th","st","nd","rd"],Vn=xn%100;return"["+xn+(jt[(Vn-20)%10]||jt[Vn]||jt[0])+"]"}},xe=function(xn,jt,Vn){var Rn=String(xn);return!Rn||Rn.length>=jt?xn:""+Array(jt+1-Rn.length).join(Vn)+xn},Ne={s:xe,z:function(xn){var jt=-xn.utcOffset(),Vn=Math.abs(jt),Rn=Math.floor(Vn/60),Tn=Vn%60;return(jt<=0?"+":"-")+xe(Rn,2,"0")+":"+xe(Tn,2,"0")},m:function xn(jt,Vn){if(jt.date()<Vn.date())return-xn(Vn,jt);var Rn=12*(Vn.year()-jt.year())+(Vn.month()-jt.month()),Tn=jt.clone().add(Rn,ae),Ln=Vn-Tn<0,Sn=jt.clone().add(Rn+(Ln?-1:1),ae);return+(-(Rn+(Vn-Tn)/(Ln?Tn-Sn:Sn-Tn))||0)},a:function(xn){return xn<0?Math.ceil(xn)||0:Math.floor(xn)},p:function(xn){return{M:ae,y:re,w:j,d:z,D:ue,h:L,m:V,s:$,ms:k,Q:oe}[xn]||String(xn||"").toLowerCase().replace(/s$/,"")},u:function(xn){return xn===void 0}},$e="en",Ce={};Ce[$e]=_e;var Ie=function(xn){return xn instanceof hn},ze=function xn(jt,Vn,Rn){var Tn;if(!jt)return $e;if(typeof jt=="string"){var Ln=jt.toLowerCase();Ce[Ln]&&(Tn=Ln),Vn&&(Ce[Ln]=Vn,Tn=Ln);var Sn=jt.split("-");if(!Tn&&Sn.length>1)return xn(Sn[0])}else{var An=jt.name;Ce[An]=jt,Tn=An}return!Rn&&Tn&&($e=Tn),Tn||!Rn&&$e},Ue=function(xn,jt){if(Ie(xn))return xn.clone();var Vn=typeof jt=="object"?jt:{};return Vn.date=xn,Vn.args=arguments,new hn(Vn)},Pt=Ne;Pt.l=ze,Pt.i=Ie,Pt.w=function(xn,jt){return Ue(xn,{locale:jt.$L,utc:jt.$u,x:jt.$x,$offset:jt.$offset})};var hn=function(){function xn(Vn){this.$L=ze(Vn.locale,null,!0),this.parse(Vn)}var jt=xn.prototype;return jt.parse=function(Vn){this.$d=function(Rn){var Tn=Rn.date,Ln=Rn.utc;if(Tn===null)return new Date(NaN);if(Pt.u(Tn))return new Date;if(Tn instanceof Date)return new Date(Tn);if(typeof Tn=="string"&&!/Z$/i.test(Tn)){var Sn=Tn.match(de);if(Sn){var An=Sn[2]-1||0,In=(Sn[7]||"0").substring(0,3);return Ln?new Date(Date.UTC(Sn[1],An,Sn[3]||1,Sn[4]||0,Sn[5]||0,Sn[6]||0,In)):new Date(Sn[1],An,Sn[3]||1,Sn[4]||0,Sn[5]||0,Sn[6]||0,In)}}return new Date(Tn)}(Vn),this.$x=Vn.x||{},this.init()},jt.init=function(){var Vn=this.$d;this.$y=Vn.getFullYear(),this.$M=Vn.getMonth(),this.$D=Vn.getDate(),this.$W=Vn.getDay(),this.$H=Vn.getHours(),this.$m=Vn.getMinutes(),this.$s=Vn.getSeconds(),this.$ms=Vn.getMilliseconds()},jt.$utils=function(){return Pt},jt.isValid=function(){return this.$d.toString()!==le},jt.isSame=function(Vn,Rn){var Tn=Ue(Vn);return this.startOf(Rn)<=Tn&&Tn<=this.endOf(Rn)},jt.isAfter=function(Vn,Rn){return Ue(Vn)<this.startOf(Rn)},jt.isBefore=function(Vn,Rn){return this.endOf(Rn)<Ue(Vn)},jt.$g=function(Vn,Rn,Tn){return Pt.u(Vn)?this[Rn]:this.set(Tn,Vn)},jt.unix=function(){return Math.floor(this.valueOf()/1e3)},jt.valueOf=function(){return this.$d.getTime()},jt.startOf=function(Vn,Rn){var Tn=this,Ln=!!Pt.u(Rn)||Rn,Sn=Pt.p(Vn),An=function(En,Zn){var ha=Pt.w(Tn.$u?Date.UTC(Tn.$y,Zn,En):new Date(Tn.$y,Zn,En),Tn);return Ln?ha:ha.endOf(z)},In=function(En,Zn){return Pt.w(Tn.toDate()[En].apply(Tn.toDate("s"),(Ln?[0,0,0,0]:[23,59,59,999]).slice(Zn)),Tn)},Mn=this.$W,ra=this.$M,da=this.$D,ua="set"+(this.$u?"UTC":"");switch(Sn){case re:return Ln?An(1,0):An(31,11);case ae:return Ln?An(1,ra):An(0,ra+1);case j:var aa=this.$locale().weekStart||0,Nn=(Mn<aa?Mn+7:Mn)-aa;return An(Ln?da-Nn:da+(6-Nn),ra);case z:case ue:return In(ua+"Hours",0);case L:return In(ua+"Minutes",1);case V:return In(ua+"Seconds",2);case $:return In(ua+"Milliseconds",3);default:return this.clone()}},jt.endOf=function(Vn){return this.startOf(Vn,!1)},jt.$set=function(Vn,Rn){var Tn,Ln=Pt.p(Vn),Sn="set"+(this.$u?"UTC":""),An=(Tn={},Tn[z]=Sn+"Date",Tn[ue]=Sn+"Date",Tn[ae]=Sn+"Month",Tn[re]=Sn+"FullYear",Tn[L]=Sn+"Hours",Tn[V]=Sn+"Minutes",Tn[$]=Sn+"Seconds",Tn[k]=Sn+"Milliseconds",Tn)[Ln],In=Ln===z?this.$D+(Rn-this.$W):Rn;if(Ln===ae||Ln===re){var Mn=this.clone().set(ue,1);Mn.$d[An](In),Mn.init(),this.$d=Mn.set(ue,Math.min(this.$D,Mn.daysInMonth())).$d}else An&&this.$d[An](In);return this.init(),this},jt.set=function(Vn,Rn){return this.clone().$set(Vn,Rn)},jt.get=function(Vn){return this[Pt.p(Vn)]()},jt.add=function(Vn,Rn){var Tn,Ln=this;Vn=Number(Vn);var Sn=Pt.p(Rn),An=function(ra){var da=Ue(Ln);return Pt.w(da.date(da.date()+Math.round(ra*Vn)),Ln)};if(Sn===ae)return this.set(ae,this.$M+Vn);if(Sn===re)return this.set(re,this.$y+Vn);if(Sn===z)return An(1);if(Sn===j)return An(7);var In=(Tn={},Tn[V]=g,Tn[L]=y,Tn[$]=r,Tn)[Sn]||1,Mn=this.$d.getTime()+Vn*In;return Pt.w(Mn,this)},jt.subtract=function(Vn,Rn){return this.add(-1*Vn,Rn)},jt.format=function(Vn){var Rn=this,Tn=this.$locale();if(!this.isValid())return Tn.invalidDate||le;var Ln=Vn||"YYYY-MM-DDTHH:mm:ssZ",Sn=Pt.z(this),An=this.$H,In=this.$m,Mn=this.$M,ra=Tn.weekdays,da=Tn.months,ua=Tn.meridiem,aa=function(Zn,ha,xa,sa){return Zn&&(Zn[ha]||Zn(Rn,Ln))||xa[ha].slice(0,sa)},Nn=function(Zn){return Pt.s(An%12||12,Zn,"0")},En=ua||function(Zn,ha,xa){var sa=Zn<12?"AM":"PM";return xa?sa.toLowerCase():sa};return Ln.replace(he,function(Zn,ha){return ha||function(xa){switch(xa){case"YY":return String(Rn.$y).slice(-2);case"YYYY":return Pt.s(Rn.$y,4,"0");case"M":return Mn+1;case"MM":return Pt.s(Mn+1,2,"0");case"MMM":return aa(Tn.monthsShort,Mn,da,3);case"MMMM":return aa(da,Mn);case"D":return Rn.$D;case"DD":return Pt.s(Rn.$D,2,"0");case"d":return String(Rn.$W);case"dd":return aa(Tn.weekdaysMin,Rn.$W,ra,2);case"ddd":return aa(Tn.weekdaysShort,Rn.$W,ra,3);case"dddd":return ra[Rn.$W];case"H":return String(An);case"HH":return Pt.s(An,2,"0");case"h":return Nn(1);case"hh":return Nn(2);case"a":return En(An,In,!0);case"A":return En(An,In,!1);case"m":return String(In);case"mm":return Pt.s(In,2,"0");case"s":return String(Rn.$s);case"ss":return Pt.s(Rn.$s,2,"0");case"SSS":return Pt.s(Rn.$ms,3,"0");case"Z":return Sn}return null}(Zn)||Sn.replace(":","")})},jt.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},jt.diff=function(Vn,Rn,Tn){var Ln,Sn=this,An=Pt.p(Rn),In=Ue(Vn),Mn=(In.utcOffset()-this.utcOffset())*g,ra=this-In,da=function(){return Pt.m(Sn,In)};switch(An){case re:Ln=da()/12;break;case ae:Ln=da();break;case oe:Ln=da()/3;break;case j:Ln=(ra-Mn)/6048e5;break;case z:Ln=(ra-Mn)/864e5;break;case L:Ln=ra/y;break;case V:Ln=ra/g;break;case $:Ln=ra/r;break;default:Ln=ra}return Tn?Ln:Pt.a(Ln)},jt.daysInMonth=function(){return this.endOf(ae).$D},jt.$locale=function(){return Ce[this.$L]},jt.locale=function(Vn,Rn){if(!Vn)return this.$L;var Tn=this.clone(),Ln=ze(Vn,Rn,!0);return Ln&&(Tn.$L=Ln),Tn},jt.clone=function(){return Pt.w(this.$d,this)},jt.toDate=function(){return new Date(this.valueOf())},jt.toJSON=function(){return this.isValid()?this.toISOString():null},jt.toISOString=function(){return this.$d.toISOString()},jt.toString=function(){return this.$d.toUTCString()},xn}(),Dt=hn.prototype;return Ue.prototype=Dt,[["$ms",k],["$s",$],["$m",V],["$H",L],["$W",z],["$M",ae],["$y",re],["$D",ue]].forEach(function(xn){Dt[xn[1]]=function(jt){return this.$g(jt,xn[0],xn[1])}}),Ue.extend=function(xn,jt){return xn.$i||(xn(jt,hn,Ue),xn.$i=!0),Ue},Ue.locale=ze,Ue.isDayjs=Ie,Ue.unix=function(xn){return Ue(1e3*xn)},Ue.en=Ce[$e],Ue.Ls=Ce,Ue.p={},Ue})})(dayjs_min);var dayjs_minExports=dayjs_min.exports;const dayjs=getDefaultExportFromCjs(dayjs_minExports);var customParseFormat$1={exports:{}};(function(e,n){(function(r,g){e.exports=g()})(commonjsGlobal$1,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},g=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,y=/\d\d/,k=/\d\d?/,$=/\d*[^-_:/,()\s\d]+/,V={},L=function(le){return(le=+le)+(le>68?1900:2e3)},z=function(le){return function(de){this[le]=+de}},j=[/[+-]\d\d:?(\d\d)?|Z/,function(le){(this.zone||(this.zone={})).offset=function(de){if(!de||de==="Z")return 0;var he=de.match(/([+-]|\d\d)/g),_e=60*he[1]+(+he[2]||0);return _e===0?0:he[0]==="+"?-_e:_e}(le)}],ae=function(le){var de=V[le];return de&&(de.indexOf?de:de.s.concat(de.f))},oe=function(le,de){var he,_e=V.meridiem;if(_e){for(var xe=1;xe<=24;xe+=1)if(le.indexOf(_e(xe,0,de))>-1){he=xe>12;break}}else he=le===(de?"pm":"PM");return he},re={A:[$,function(le){this.afternoon=oe(le,!1)}],a:[$,function(le){this.afternoon=oe(le,!0)}],S:[/\d/,function(le){this.milliseconds=100*+le}],SS:[y,function(le){this.milliseconds=10*+le}],SSS:[/\d{3}/,function(le){this.milliseconds=+le}],s:[k,z("seconds")],ss:[k,z("seconds")],m:[k,z("minutes")],mm:[k,z("minutes")],H:[k,z("hours")],h:[k,z("hours")],HH:[k,z("hours")],hh:[k,z("hours")],D:[k,z("day")],DD:[y,z("day")],Do:[$,function(le){var de=V.ordinal,he=le.match(/\d+/);if(this.day=he[0],de)for(var _e=1;_e<=31;_e+=1)de(_e).replace(/\[|\]/g,"")===le&&(this.day=_e)}],M:[k,z("month")],MM:[y,z("month")],MMM:[$,function(le){var de=ae("months"),he=(ae("monthsShort")||de.map(function(_e){return _e.slice(0,3)})).indexOf(le)+1;if(he<1)throw new Error;this.month=he%12||he}],MMMM:[$,function(le){var de=ae("months").indexOf(le)+1;if(de<1)throw new Error;this.month=de%12||de}],Y:[/[+-]?\d+/,z("year")],YY:[y,function(le){this.year=L(le)}],YYYY:[/\d{4}/,z("year")],Z:j,ZZ:j};function ue(le){var de,he;de=le,he=V&&V.formats;for(var _e=(le=de.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(Ue,Pt,hn){var Dt=hn&&hn.toUpperCase();return Pt||he[hn]||r[hn]||he[Dt].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(xn,jt,Vn){return jt||Vn.slice(1)})})).match(g),xe=_e.length,Ne=0;Ne<xe;Ne+=1){var $e=_e[Ne],Ce=re[$e],Ie=Ce&&Ce[0],ze=Ce&&Ce[1];_e[Ne]=ze?{regex:Ie,parser:ze}:$e.replace(/^\[|\]$/g,"")}return function(Ue){for(var Pt={},hn=0,Dt=0;hn<xe;hn+=1){var xn=_e[hn];if(typeof xn=="string")Dt+=xn.length;else{var jt=xn.regex,Vn=xn.parser,Rn=Ue.slice(Dt),Tn=jt.exec(Rn)[0];Vn.call(Pt,Tn),Ue=Ue.replace(Tn,"")}}return function(Ln){var Sn=Ln.afternoon;if(Sn!==void 0){var An=Ln.hours;Sn?An<12&&(Ln.hours+=12):An===12&&(Ln.hours=0),delete Ln.afternoon}}(Pt),Pt}}return function(le,de,he){he.p.customParseFormat=!0,le&&le.parseTwoDigitYear&&(L=le.parseTwoDigitYear);var _e=de.prototype,xe=_e.parse;_e.parse=function(Ne){var $e=Ne.date,Ce=Ne.utc,Ie=Ne.args;this.$u=Ce;var ze=Ie[1];if(typeof ze=="string"){var Ue=Ie[2]===!0,Pt=Ie[3]===!0,hn=Ue||Pt,Dt=Ie[2];Pt&&(Dt=Ie[2]),V=this.$locale(),!Ue&&Dt&&(V=he.Ls[Dt]),this.$d=function(Rn,Tn,Ln){try{if(["x","X"].indexOf(Tn)>-1)return new Date((Tn==="X"?1e3:1)*Rn);var Sn=ue(Tn)(Rn),An=Sn.year,In=Sn.month,Mn=Sn.day,ra=Sn.hours,da=Sn.minutes,ua=Sn.seconds,aa=Sn.milliseconds,Nn=Sn.zone,En=new Date,Zn=Mn||(An||In?1:En.getDate()),ha=An||En.getFullYear(),xa=0;An&&!In||(xa=In>0?In-1:En.getMonth());var sa=ra||0,Hn=da||0,bn=ua||0,Xn=aa||0;return Nn?new Date(Date.UTC(ha,xa,Zn,sa,Hn,bn,Xn+60*Nn.offset*1e3)):Ln?new Date(Date.UTC(ha,xa,Zn,sa,Hn,bn,Xn)):new Date(ha,xa,Zn,sa,Hn,bn,Xn)}catch{return new Date("")}}($e,ze,Ce),this.init(),Dt&&Dt!==!0&&(this.$L=this.locale(Dt).$L),hn&&$e!=this.format(ze)&&(this.$d=new Date("")),V={}}else if(ze instanceof Array)for(var xn=ze.length,jt=1;jt<=xn;jt+=1){Ie[1]=ze[jt-1];var Vn=he.apply(this,Ie);if(Vn.isValid()){this.$d=Vn.$d,this.$L=Vn.$L,this.init();break}jt===xn&&(this.$d=new Date(""))}else xe.call(this,Ne)}}})})(customParseFormat$1);var customParseFormatExports=customParseFormat$1.exports;const customParseFormat=getDefaultExportFromCjs(customParseFormatExports),timeUnits$1=["hours","minutes","seconds"],DEFAULT_FORMATS_TIME="HH:mm:ss",DEFAULT_FORMATS_DATE="YYYY-MM-DD",DEFAULT_FORMATS_DATEPICKER={date:DEFAULT_FORMATS_DATE,dates:DEFAULT_FORMATS_DATE,week:"gggg[w]ww",year:"YYYY",month:"YYYY-MM",datetime:`${DEFAULT_FORMATS_DATE} ${DEFAULT_FORMATS_TIME}`,monthrange:"YYYY-MM",daterange:DEFAULT_FORMATS_DATE,datetimerange:`${DEFAULT_FORMATS_DATE} ${DEFAULT_FORMATS_TIME}`},buildTimeList=(e,n)=>[e>0?e-1:void 0,e,e<n?e+1:void 0],rangeArr=e=>Array.from(Array.from({length:e}).keys()),extractDateFormat=e=>e.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),extractTimeFormat=e=>e.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),dateEquals=function(e,n){const r=isDate$1(e),g=isDate$1(n);return r&&g?e.getTime()===n.getTime():!r&&!g?e===n:!1},valueEquals=function(e,n){const r=isArray$3(e),g=isArray$3(n);return r&&g?e.length!==n.length?!1:e.every((y,k)=>dateEquals(y,n[k])):!r&&!g?dateEquals(e,n):!1},parseDate=function(e,n,r){const g=isEmpty(n)||n==="x"?dayjs(e).locale(r):dayjs(e,n).locale(r);return g.isValid()?g:void 0},formatter=function(e,n,r){return isEmpty(n)?e:n==="x"?+e:dayjs(e).locale(r).format(n)},makeList=(e,n)=>{var r;const g=[],y=n?.();for(let k=0;k<e;k++)g.push((r=y?.includes(k))!=null?r:!1);return g},disabledTimeListsProps=buildProps({disabledHours:{type:definePropType(Function)},disabledMinutes:{type:definePropType(Function)},disabledSeconds:{type:definePropType(Function)}}),timePanelSharedProps=buildProps({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),timePickerDefaultProps=buildProps({id:{type:definePropType([Array,String])},name:{type:definePropType([Array,String]),default:""},popperClass:{type:String,default:""},format:String,valueFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:definePropType([String,Object]),default:circle_close_default},editable:{type:Boolean,default:!0},prefixIcon:{type:definePropType([String,Object]),default:""},size:useSizeProp,readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""},popperOptions:{type:definePropType(Object),default:()=>({})},modelValue:{type:definePropType([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:definePropType([Date,Array])},defaultTime:{type:definePropType([Date,Array])},isRange:{type:Boolean,default:!1},...disabledTimeListsProps,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:{type:Boolean,default:!1},label:{type:String,default:void 0},tabindex:{type:definePropType([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean}),_hoisted_1$2c=["id","name","placeholder","value","disabled","readonly"],_hoisted_2$1Q=["id","name","placeholder","value","disabled","readonly"],__default__$1g=defineComponent({name:"Picker"}),_sfc_main$3a=defineComponent({...__default__$1g,props:timePickerDefaultProps,emits:["update:modelValue","change","focus","blur","calendar-change","panel-change","visible-change","keydown"],setup(e,{expose:n,emit:r}){const g=e,y=useAttrs$1(),{lang:k}=useLocale(),$=useNamespace("date"),V=useNamespace("input"),L=useNamespace("range"),{form:z,formItem:j}=useFormItem(),ae=inject("ElPopperOptions",{}),oe=ref(),re=ref(),ue=ref(!1),le=ref(!1),de=ref(null);let he=!1,_e=!1;const xe=computed(()=>[$.b("editor"),$.bm("editor",g.type),V.e("wrapper"),$.is("disabled",Mn.value),$.is("active",ue.value),L.b("editor"),kt?L.bm("editor",kt.value):"",y.class]),Ne=computed(()=>[V.e("icon"),L.e("close-icon"),Zn.value?"":L.e("close-icon--hidden")]);watch(ue,Cn=>{Cn?nextTick(()=>{Cn&&(de.value=g.modelValue)}):(Qn.value=null,nextTick(()=>{$e(g.modelValue)}))});const $e=(Cn,Bn)=>{(Bn||!valueEquals(Cn,de.value))&&(r("change",Cn),g.validateEvent&&j?.validate("change").catch(zn=>void 0))},Ce=Cn=>{if(!valueEquals(g.modelValue,Cn)){let Bn;isArray$3(Cn)?Bn=Cn.map(zn=>formatter(zn,g.valueFormat,k.value)):Cn&&(Bn=formatter(Cn,g.valueFormat,k.value)),r("update:modelValue",Cn&&Bn,k.value)}},Ie=Cn=>{r("keydown",Cn)},ze=computed(()=>{if(re.value){const Cn=$n.value?re.value:re.value.$el;return Array.from(Cn.querySelectorAll("input"))}return[]}),Ue=(Cn,Bn,zn)=>{const Fn=ze.value;Fn.length&&(!zn||zn==="min"?(Fn[0].setSelectionRange(Cn,Bn),Fn[0].focus()):zn==="max"&&(Fn[1].setSelectionRange(Cn,Bn),Fn[1].focus()))},Pt=()=>{Ln(!0,!0),nextTick(()=>{_e=!1})},hn=(Cn="",Bn=!1)=>{Bn||(_e=!0),ue.value=Bn;let zn;isArray$3(Cn)?zn=Cn.map(Fn=>Fn.toDate()):zn=Cn&&Cn.toDate(),Qn.value=null,Ce(zn)},Dt=()=>{le.value=!0},xn=()=>{r("visible-change",!0)},jt=Cn=>{Cn?.key===EVENT_CODE.esc&&Ln(!0,!0)},Vn=()=>{le.value=!1,ue.value=!1,_e=!1,r("visible-change",!1)},Rn=()=>{ue.value=!0},Tn=()=>{ue.value=!1},Ln=(Cn=!0,Bn=!1)=>{_e=Bn;const[zn,Fn]=unref(ze);let Gn=zn;!Cn&&$n.value&&(Gn=Fn),Gn&&Gn.focus()},Sn=Cn=>{g.readonly||Mn.value||ue.value||_e||(ue.value=!0,r("focus",Cn))};let An;const In=Cn=>{const Bn=async()=>{setTimeout(()=>{var zn;An===Bn&&(!((zn=oe.value)!=null&&zn.isFocusInsideContent()&&!he)&&ze.value.filter(Fn=>Fn.contains(document.activeElement)).length===0&&(oa(),ue.value=!1,r("blur",Cn),g.validateEvent&&j?.validate("blur").catch(Fn=>void 0)),he=!1)},0)};An=Bn,Bn()},Mn=computed(()=>g.disabled||z?.disabled),ra=computed(()=>{let Cn;if(xa.value?Lt.value.getDefaultValue&&(Cn=Lt.value.getDefaultValue()):isArray$3(g.modelValue)?Cn=g.modelValue.map(Bn=>parseDate(Bn,g.valueFormat,k.value)):Cn=parseDate(g.modelValue,g.valueFormat,k.value),Lt.value.getRangeAvailableTime){const Bn=Lt.value.getRangeAvailableTime(Cn);isEqual$1(Bn,Cn)||(Cn=Bn,Ce(isArray$3(Cn)?Cn.map(zn=>zn.toDate()):Cn.toDate()))}return isArray$3(Cn)&&Cn.some(Bn=>!Bn)&&(Cn=[]),Cn}),da=computed(()=>{if(!Lt.value.panelReady)return"";const Cn=la(ra.value);return isArray$3(Qn.value)?[Qn.value[0]||Cn&&Cn[0]||"",Qn.value[1]||Cn&&Cn[1]||""]:Qn.value!==null?Qn.value:!aa.value&&xa.value||!ue.value&&xa.value?"":Cn?Nn.value?Cn.join(", "):Cn:""}),ua=computed(()=>g.type.includes("time")),aa=computed(()=>g.type.startsWith("time")),Nn=computed(()=>g.type==="dates"),En=computed(()=>g.prefixIcon||(ua.value?clock_default:calendar_default)),Zn=ref(!1),ha=Cn=>{g.readonly||Mn.value||Zn.value&&(Cn.stopPropagation(),Pt(),Ce(null),$e(null,!0),Zn.value=!1,ue.value=!1,Lt.value.handleClear&&Lt.value.handleClear())},xa=computed(()=>{const{modelValue:Cn}=g;return!Cn||isArray$3(Cn)&&!Cn.filter(Boolean).length}),sa=async Cn=>{var Bn;g.readonly||Mn.value||(((Bn=Cn.target)==null?void 0:Bn.tagName)!=="INPUT"||ze.value.includes(document.activeElement))&&(ue.value=!0)},Hn=()=>{g.readonly||Mn.value||!xa.value&&g.clearable&&(Zn.value=!0)},bn=()=>{Zn.value=!1},Xn=Cn=>{var Bn;g.readonly||Mn.value||(((Bn=Cn.touches[0].target)==null?void 0:Bn.tagName)!=="INPUT"||ze.value.includes(document.activeElement))&&(ue.value=!0)},$n=computed(()=>g.type.includes("range")),kt=useFormSize(),At=computed(()=>{var Cn,Bn;return(Bn=(Cn=unref(oe))==null?void 0:Cn.popperRef)==null?void 0:Bn.contentRef}),Dn=computed(()=>{var Cn;return unref($n)?unref(re):(Cn=unref(re))==null?void 0:Cn.$el});onClickOutside(Dn,Cn=>{const Bn=unref(At),zn=unref(Dn);Bn&&(Cn.target===Bn||Cn.composedPath().includes(Bn))||Cn.target===zn||Cn.composedPath().includes(zn)||(ue.value=!1)});const Qn=ref(null),oa=()=>{if(Qn.value){const Cn=na(da.value);Cn&&ma(Cn)&&(Ce(isArray$3(Cn)?Cn.map(Bn=>Bn.toDate()):Cn.toDate()),Qn.value=null)}Qn.value===""&&(Ce(null),$e(null),Qn.value=null)},na=Cn=>Cn?Lt.value.parseUserInput(Cn):null,la=Cn=>Cn?Lt.value.formatToString(Cn):null,ma=Cn=>Lt.value.isValidValue(Cn),ca=async Cn=>{if(g.readonly||Mn.value)return;const{code:Bn}=Cn;if(Ie(Cn),Bn===EVENT_CODE.esc){ue.value===!0&&(ue.value=!1,Cn.preventDefault(),Cn.stopPropagation());return}if(Bn===EVENT_CODE.down&&(Lt.value.handleFocusPicker&&(Cn.preventDefault(),Cn.stopPropagation()),ue.value===!1&&(ue.value=!0,await nextTick()),Lt.value.handleFocusPicker)){Lt.value.handleFocusPicker();return}if(Bn===EVENT_CODE.tab){he=!0;return}if(Bn===EVENT_CODE.enter||Bn===EVENT_CODE.numpadEnter){(Qn.value===null||Qn.value===""||ma(na(da.value)))&&(oa(),ue.value=!1),Cn.stopPropagation();return}if(Qn.value){Cn.stopPropagation();return}Lt.value.handleKeydownInput&&Lt.value.handleKeydownInput(Cn)},pe=Cn=>{Qn.value=Cn,ue.value||(ue.value=!0)},Oe=Cn=>{const Bn=Cn.target;Qn.value?Qn.value=[Bn.value,Qn.value[1]]:Qn.value=[Bn.value,null]},Ve=Cn=>{const Bn=Cn.target;Qn.value?Qn.value=[Qn.value[0],Bn.value]:Qn.value=[null,Bn.value]},qe=()=>{var Cn;const Bn=Qn.value,zn=na(Bn&&Bn[0]),Fn=unref(ra);if(zn&&zn.isValid()){Qn.value=[la(zn),((Cn=da.value)==null?void 0:Cn[1])||null];const Gn=[zn,Fn&&(Fn[1]||null)];ma(Gn)&&(Ce(Gn),Qn.value=null)}},Et=()=>{var Cn;const Bn=unref(Qn),zn=na(Bn&&Bn[1]),Fn=unref(ra);if(zn&&zn.isValid()){Qn.value=[((Cn=unref(da))==null?void 0:Cn[0])||null,la(zn)];const Gn=[Fn&&Fn[0],zn];ma(Gn)&&(Ce(Gn),Qn.value=null)}},Lt=ref({}),_n=Cn=>{Lt.value[Cn[0]]=Cn[1],Lt.value.panelReady=!0},vn=Cn=>{r("calendar-change",Cn)},wn=(Cn,Bn,zn)=>{r("panel-change",Cn,Bn,zn)};return provide("EP_PICKER_BASE",{props:g}),n({focus:Ln,handleFocusInput:Sn,handleBlurInput:In,handleOpen:Rn,handleClose:Tn,onPick:hn}),(Cn,Bn)=>(openBlock(),createBlock(unref(ElTooltip),mergeProps({ref_key:"refPopper",ref:oe,visible:ue.value,effect:"light",pure:"",trigger:"click"},Cn.$attrs,{role:"dialog",teleported:"",transition:`${unref($).namespace.value}-zoom-in-top`,"popper-class":[`${unref($).namespace.value}-picker__popper`,Cn.popperClass],"popper-options":unref(ae),"fallback-placements":["bottom","top","right","left"],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:Dt,onShow:xn,onHide:Vn}),{default:withCtx(()=>[unref($n)?(openBlock(),createElementBlock("div",{key:1,ref_key:"inputRef",ref:re,class:normalizeClass(unref(xe)),style:normalizeStyle(Cn.$attrs.style),onClick:Sn,onMouseenter:Hn,onMouseleave:bn,onTouchstart:Xn,onKeydown:ca},[unref(En)?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass([unref(V).e("icon"),unref(L).e("icon")]),onMousedown:withModifiers(sa,["prevent"]),onTouchstart:Xn},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(En))))]),_:1},8,["class","onMousedown"])):createCommentVNode("v-if",!0),createBaseVNode("input",{id:Cn.id&&Cn.id[0],autocomplete:"off",name:Cn.name&&Cn.name[0],placeholder:Cn.startPlaceholder,value:unref(da)&&unref(da)[0],disabled:unref(Mn),readonly:!Cn.editable||Cn.readonly,class:normalizeClass(unref(L).b("input")),onMousedown:sa,onInput:Oe,onChange:qe,onFocus:Sn,onBlur:In},null,42,_hoisted_1$2c),renderSlot(Cn.$slots,"range-separator",{},()=>[createBaseVNode("span",{class:normalizeClass(unref(L).b("separator"))},toDisplayString$1(Cn.rangeSeparator),3)]),createBaseVNode("input",{id:Cn.id&&Cn.id[1],autocomplete:"off",name:Cn.name&&Cn.name[1],placeholder:Cn.endPlaceholder,value:unref(da)&&unref(da)[1],disabled:unref(Mn),readonly:!Cn.editable||Cn.readonly,class:normalizeClass(unref(L).b("input")),onMousedown:sa,onFocus:Sn,onBlur:In,onInput:Ve,onChange:Et},null,42,_hoisted_2$1Q),Cn.clearIcon?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass(unref(Ne)),onClick:ha},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Cn.clearIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],38)):(openBlock(),createBlock(unref(ElInput),{key:0,id:Cn.id,ref_key:"inputRef",ref:re,"container-role":"combobox","model-value":unref(da),name:Cn.name,size:unref(kt),disabled:unref(Mn),placeholder:Cn.placeholder,class:normalizeClass([unref($).b("editor"),unref($).bm("editor",Cn.type),Cn.$attrs.class]),style:normalizeStyle(Cn.$attrs.style),readonly:!Cn.editable||Cn.readonly||unref(Nn)||Cn.type==="week",label:Cn.label,tabindex:Cn.tabindex,"validate-event":!1,onInput:pe,onFocus:Sn,onBlur:In,onKeydown:ca,onChange:oa,onMousedown:sa,onMouseenter:Hn,onMouseleave:bn,onTouchstart:Xn,onClick:Bn[0]||(Bn[0]=withModifiers(()=>{},["stop"]))},{prefix:withCtx(()=>[unref(En)?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(V).e("icon")),onMousedown:withModifiers(sa,["prevent"]),onTouchstart:Xn},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(En))))]),_:1},8,["class","onMousedown"])):createCommentVNode("v-if",!0)]),suffix:withCtx(()=>[Zn.value&&Cn.clearIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(`${unref(V).e("icon")} clear-icon`),onClick:withModifiers(ha,["stop"])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Cn.clearIcon)))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","label","tabindex","onKeydown"]))]),content:withCtx(()=>[renderSlot(Cn.$slots,"default",{visible:ue.value,actualVisible:le.value,parsedValue:unref(ra),format:Cn.format,unlinkPanels:Cn.unlinkPanels,type:Cn.type,defaultValue:Cn.defaultValue,onPick:hn,onSelectRange:Ue,onSetPickerOption:_n,onCalendarChange:vn,onPanelChange:wn,onKeydown:jt,onMousedown:Bn[1]||(Bn[1]=withModifiers(()=>{},["stop"]))})]),_:3},16,["visible","transition","popper-class","popper-options"]))}});var CommonPicker=_export_sfc$1(_sfc_main$3a,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/common/picker.vue"]]);const panelTimePickerProps=buildProps({...timePanelSharedProps,datetimeRole:String,parsedValue:{type:definePropType(Object)}}),useTimePanel=({getAvailableHours:e,getAvailableMinutes:n,getAvailableSeconds:r})=>{const g=($,V,L,z)=>{const j={hour:e,minute:n,second:r};let ae=$;return["hour","minute","second"].forEach(oe=>{if(j[oe]){let re;const ue=j[oe];switch(oe){case"minute":{re=ue(ae.hour(),V,z);break}case"second":{re=ue(ae.hour(),ae.minute(),V,z);break}default:{re=ue(V,z);break}}if(re?.length&&!re.includes(ae[oe]())){const le=L?0:re.length-1;ae=ae[oe](re[le])}}}),ae},y={};return{timePickerOptions:y,getAvailableTime:g,onSetOption:([$,V])=>{y[$]=V}}},makeAvailableArr=e=>{const n=(g,y)=>g||y,r=g=>g!==!0;return e.map(n).filter(r)},getTimeLists=(e,n,r)=>({getHoursList:($,V)=>makeList(24,e&&(()=>e?.($,V))),getMinutesList:($,V,L)=>makeList(60,n&&(()=>n?.($,V,L))),getSecondsList:($,V,L,z)=>makeList(60,r&&(()=>r?.($,V,L,z)))}),buildAvailableTimeSlotGetter=(e,n,r)=>{const{getHoursList:g,getMinutesList:y,getSecondsList:k}=getTimeLists(e,n,r);return{getAvailableHours:(z,j)=>makeAvailableArr(g(z,j)),getAvailableMinutes:(z,j,ae)=>makeAvailableArr(y(z,j,ae)),getAvailableSeconds:(z,j,ae,oe)=>makeAvailableArr(k(z,j,ae,oe))}},useOldValue=e=>{const n=ref(e.parsedValue);return watch(()=>e.visible,r=>{r||(n.value=e.parsedValue)}),n},nodeList=new Map;let startClick;isClient&&(document.addEventListener("mousedown",e=>startClick=e),document.addEventListener("mouseup",e=>{for(const n of nodeList.values())for(const{documentHandler:r}of n)r(e,startClick)}));function createDocumentHandler(e,n){let r=[];return Array.isArray(n.arg)?r=n.arg:isElement$1(n.arg)&&r.push(n.arg),function(g,y){const k=n.instance.popperRef,$=g.target,V=y?.target,L=!n||!n.instance,z=!$||!V,j=e.contains($)||e.contains(V),ae=e===$,oe=r.length&&r.some(ue=>ue?.contains($))||r.length&&r.includes(V),re=k&&(k.contains($)||k.contains(V));L||z||j||ae||oe||re||n.value(g,y)}}const ClickOutside={beforeMount(e,n){nodeList.has(e)||nodeList.set(e,[]),nodeList.get(e).push({documentHandler:createDocumentHandler(e,n),bindingFn:n.value})},updated(e,n){nodeList.has(e)||nodeList.set(e,[]);const r=nodeList.get(e),g=r.findIndex(k=>k.bindingFn===n.oldValue),y={documentHandler:createDocumentHandler(e,n),bindingFn:n.value};g>=0?r.splice(g,1,y):r.push(y)},unmounted(e){nodeList.delete(e)}},REPEAT_INTERVAL=100,REPEAT_DELAY=600,vRepeatClick={beforeMount(e,n){const r=n.value,{interval:g=REPEAT_INTERVAL,delay:y=REPEAT_DELAY}=isFunction$3(r)?{}:r;let k,$;const V=()=>isFunction$3(r)?r():r.handler(),L=()=>{$&&(clearTimeout($),$=void 0),k&&(clearInterval(k),k=void 0)};e.addEventListener("mousedown",z=>{z.button===0&&(L(),V(),document.addEventListener("mouseup",()=>L(),{once:!0}),$=setTimeout(()=>{k=setInterval(()=>{V()},g)},y))})}},FOCUSABLE_CHILDREN="_trap-focus-children",FOCUS_STACK=[],FOCUS_HANDLER=e=>{if(FOCUS_STACK.length===0)return;const n=FOCUS_STACK[FOCUS_STACK.length-1][FOCUSABLE_CHILDREN];if(n.length>0&&e.code===EVENT_CODE.tab){if(n.length===1){e.preventDefault(),document.activeElement!==n[0]&&n[0].focus();return}const r=e.shiftKey,g=e.target===n[0],y=e.target===n[n.length-1];g&&r&&(e.preventDefault(),n[n.length-1].focus()),y&&!r&&(e.preventDefault(),n[0].focus())}},TrapFocus={beforeMount(e){e[FOCUSABLE_CHILDREN]=obtainAllFocusableElements$1(e),FOCUS_STACK.push(e),FOCUS_STACK.length<=1&&document.addEventListener("keydown",FOCUS_HANDLER)},updated(e){nextTick(()=>{e[FOCUSABLE_CHILDREN]=obtainAllFocusableElements$1(e)})},unmounted(){FOCUS_STACK.shift(),FOCUS_STACK.length===0&&document.removeEventListener("keydown",FOCUS_HANDLER)}};var v=!1,o,f,s,u,d$1,N,l,p$1,m,w$1,D,x,E,M,F;function a(){if(!v){v=!0;var e=navigator.userAgent,n=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),r=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(x=/\b(iPhone|iP[ao]d)/.exec(e),E=/\b(iP[ao]d)/.exec(e),w$1=/Android/i.exec(e),M=/FBAN\/\w+;/i.exec(e),F=/Mobile/i.exec(e),D=!!/Win64/.exec(e),n){o=n[1]?parseFloat(n[1]):n[5]?parseFloat(n[5]):NaN,o&&document&&document.documentMode&&(o=document.documentMode);var g=/(?:Trident\/(\d+.\d+))/.exec(e);N=g?parseFloat(g[1])+4:o,f=n[2]?parseFloat(n[2]):NaN,s=n[3]?parseFloat(n[3]):NaN,u=n[4]?parseFloat(n[4]):NaN,u?(n=/(?:Chrome\/(\d+\.\d+))/.exec(e),d$1=n&&n[1]?parseFloat(n[1]):NaN):d$1=NaN}else o=f=s=d$1=u=NaN;if(r){if(r[1]){var y=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);l=y?parseFloat(y[1].replace("_",".")):!0}else l=!1;p$1=!!r[2],m=!!r[3]}else l=p$1=m=!1}}var _={ie:function(){return a()||o},ieCompatibilityMode:function(){return a()||N>o},ie64:function(){return _.ie()&&D},firefox:function(){return a()||f},opera:function(){return a()||s},webkit:function(){return a()||u},safari:function(){return _.webkit()},chrome:function(){return a()||d$1},windows:function(){return a()||p$1},osx:function(){return a()||l},linux:function(){return a()||m},iphone:function(){return a()||x},mobile:function(){return a()||x||E||w$1||F},nativeApp:function(){return a()||M},android:function(){return a()||w$1},ipad:function(){return a()||E}},A=_,c=!!(typeof window<"u"&&window.document&&window.document.createElement),U={canUseDOM:c,canUseWorkers:typeof Worker<"u",canUseEventListeners:c&&!!(window.addEventListener||window.attachEvent),canUseViewport:c&&!!window.screen,isInWorker:!c},h=U,X;h.canUseDOM&&(X=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function S(e,n){if(!h.canUseDOM||n&&!("addEventListener"in document))return!1;var r="on"+e,g=r in document;if(!g){var y=document.createElement("div");y.setAttribute(r,"return;"),g=typeof y[r]=="function"}return!g&&X&&e==="wheel"&&(g=document.implementation.hasFeature("Events.wheel","3.0")),g}var b=S,O=10,I=40,P=800;function T(e){var n=0,r=0,g=0,y=0;return"detail"in e&&(r=e.detail),"wheelDelta"in e&&(r=-e.wheelDelta/120),"wheelDeltaY"in e&&(r=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(n=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(n=r,r=0),g=n*O,y=r*O,"deltaY"in e&&(y=e.deltaY),"deltaX"in e&&(g=e.deltaX),(g||y)&&e.deltaMode&&(e.deltaMode==1?(g*=I,y*=I):(g*=P,y*=P)),g&&!n&&(n=g<1?-1:1),y&&!r&&(r=y<1?-1:1),{spinX:n,spinY:r,pixelX:g,pixelY:y}}T.getEventType=function(){return A.firefox()?"DOMMouseScroll":b("wheel")?"wheel":"mousewheel"};var Y=T;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const mousewheel=function(e,n){if(e&&e.addEventListener){const r=function(g){const y=Y(g);n&&Reflect.apply(n,this,[g,y])};e.addEventListener("wheel",r,{passive:!0})}},Mousewheel={beforeMount(e,n){mousewheel(e,n.value)}},basicTimeSpinnerProps=buildProps({role:{type:String,required:!0},spinnerDate:{type:definePropType(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:definePropType(String),default:""},...disabledTimeListsProps}),_hoisted_1$2b=["onClick"],_hoisted_2$1P=["onMouseenter"],_sfc_main$39=defineComponent({__name:"basic-time-spinner",props:basicTimeSpinnerProps,emits:["change","select-range","set-option"],setup(e,{emit:n}){const r=e,g=useNamespace("time"),{getHoursList:y,getMinutesList:k,getSecondsList:$}=getTimeLists(r.disabledHours,r.disabledMinutes,r.disabledSeconds);let V=!1;const L=ref(),z=ref(),j=ref(),ae=ref(),oe={hours:z,minutes:j,seconds:ae},re=computed(()=>r.showSeconds?timeUnits$1:timeUnits$1.slice(0,2)),ue=computed(()=>{const{spinnerDate:Sn}=r,An=Sn.hour(),In=Sn.minute(),Mn=Sn.second();return{hours:An,minutes:In,seconds:Mn}}),le=computed(()=>{const{hours:Sn,minutes:An}=unref(ue);return{hours:y(r.role),minutes:k(Sn,r.role),seconds:$(Sn,An,r.role)}}),de=computed(()=>{const{hours:Sn,minutes:An,seconds:In}=unref(ue);return{hours:buildTimeList(Sn,23),minutes:buildTimeList(An,59),seconds:buildTimeList(In,59)}}),he=debounce(Sn=>{V=!1,Ne(Sn)},200),_e=Sn=>{if(!!!r.amPmMode)return"";const In=r.amPmMode==="A";let Mn=Sn<12?" am":" pm";return In&&(Mn=Mn.toUpperCase()),Mn},xe=Sn=>{let An;switch(Sn){case"hours":An=[0,2];break;case"minutes":An=[3,5];break;case"seconds":An=[6,8];break}const[In,Mn]=An;n("select-range",In,Mn),L.value=Sn},Ne=Sn=>{Ie(Sn,unref(ue)[Sn])},$e=()=>{Ne("hours"),Ne("minutes"),Ne("seconds")},Ce=Sn=>Sn.querySelector(`.${g.namespace.value}-scrollbar__wrap`),Ie=(Sn,An)=>{if(r.arrowControl)return;const In=unref(oe[Sn]);In&&In.$el&&(Ce(In.$el).scrollTop=Math.max(0,An*ze(Sn)))},ze=Sn=>{const An=unref(oe[Sn]),In=An?.$el.querySelector("li");return In&&Number.parseFloat(getStyle(In,"height"))||0},Ue=()=>{hn(1)},Pt=()=>{hn(-1)},hn=Sn=>{L.value||xe("hours");const An=L.value,In=unref(ue)[An],Mn=L.value==="hours"?24:60,ra=Dt(An,In,Sn,Mn);xn(An,ra),Ie(An,ra),nextTick(()=>xe(An))},Dt=(Sn,An,In,Mn)=>{let ra=(An+In+Mn)%Mn;const da=unref(le)[Sn];for(;da[ra]&&ra!==An;)ra=(ra+In+Mn)%Mn;return ra},xn=(Sn,An)=>{if(unref(le)[Sn][An])return;const{hours:ra,minutes:da,seconds:ua}=unref(ue);let aa;switch(Sn){case"hours":aa=r.spinnerDate.hour(An).minute(da).second(ua);break;case"minutes":aa=r.spinnerDate.hour(ra).minute(An).second(ua);break;case"seconds":aa=r.spinnerDate.hour(ra).minute(da).second(An);break}n("change",aa)},jt=(Sn,{value:An,disabled:In})=>{In||(xn(Sn,An),xe(Sn),Ie(Sn,An))},Vn=Sn=>{V=!0,he(Sn);const An=Math.min(Math.round((Ce(unref(oe[Sn]).$el).scrollTop-(Rn(Sn)*.5-10)/ze(Sn)+3)/ze(Sn)),Sn==="hours"?23:59);xn(Sn,An)},Rn=Sn=>unref(oe[Sn]).$el.offsetHeight,Tn=()=>{const Sn=An=>{const In=unref(oe[An]);In&&In.$el&&(Ce(In.$el).onscroll=()=>{Vn(An)})};Sn("hours"),Sn("minutes"),Sn("seconds")};onMounted(()=>{nextTick(()=>{!r.arrowControl&&Tn(),$e(),r.role==="start"&&xe("hours")})});const Ln=(Sn,An)=>{oe[An].value=Sn};return n("set-option",[`${r.role}_scrollDown`,hn]),n("set-option",[`${r.role}_emitSelectRange`,xe]),watch(()=>r.spinnerDate,()=>{V||$e()}),(Sn,An)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(g).b("spinner"),{"has-seconds":Sn.showSeconds}])},[Sn.arrowControl?createCommentVNode("v-if",!0):(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(unref(re),In=>(openBlock(),createBlock(unref(ElScrollbar),{key:In,ref_for:!0,ref:Mn=>Ln(Mn,In),class:normalizeClass(unref(g).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":unref(g).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:Mn=>xe(In),onMousemove:Mn=>Ne(In)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(le)[In],(Mn,ra)=>(openBlock(),createElementBlock("li",{key:ra,class:normalizeClass([unref(g).be("spinner","item"),unref(g).is("active",ra===unref(ue)[In]),unref(g).is("disabled",Mn)]),onClick:da=>jt(In,{value:ra,disabled:Mn})},[In==="hours"?(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString$1(("0"+(Sn.amPmMode?ra%12||12:ra)).slice(-2))+toDisplayString$1(_e(ra)),1)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString$1(("0"+ra).slice(-2)),1)],64))],10,_hoisted_1$2b))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),Sn.arrowControl?(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(unref(re),In=>(openBlock(),createElementBlock("div",{key:In,class:normalizeClass([unref(g).be("spinner","wrapper"),unref(g).is("arrow")]),onMouseenter:Mn=>xe(In)},[withDirectives((openBlock(),createBlock(unref(ElIcon),{class:normalizeClass(["arrow-up",unref(g).be("spinner","arrow")])},{default:withCtx(()=>[createVNode(unref(arrow_up_default))]),_:1},8,["class"])),[[unref(vRepeatClick),Pt]]),withDirectives((openBlock(),createBlock(unref(ElIcon),{class:normalizeClass(["arrow-down",unref(g).be("spinner","arrow")])},{default:withCtx(()=>[createVNode(unref(arrow_down_default))]),_:1},8,["class"])),[[unref(vRepeatClick),Ue]]),createBaseVNode("ul",{class:normalizeClass(unref(g).be("spinner","list"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(de)[In],(Mn,ra)=>(openBlock(),createElementBlock("li",{key:ra,class:normalizeClass([unref(g).be("spinner","item"),unref(g).is("active",Mn===unref(ue)[In]),unref(g).is("disabled",unref(le)[In][Mn])])},[typeof Mn=="number"?(openBlock(),createElementBlock(Fragment,{key:0},[In==="hours"?(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString$1(("0"+(Sn.amPmMode?Mn%12||12:Mn)).slice(-2))+toDisplayString$1(_e(Mn)),1)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString$1(("0"+Mn).slice(-2)),1)],64))],64)):createCommentVNode("v-if",!0)],2))),128))],2)],42,_hoisted_2$1P))),128)):createCommentVNode("v-if",!0)],2))}});var TimeSpinner=_export_sfc$1(_sfc_main$39,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/basic-time-spinner.vue"]]);const _sfc_main$38=defineComponent({__name:"panel-time-pick",props:panelTimePickerProps,emits:["pick","select-range","set-picker-option"],setup(e,{emit:n}){const r=e,g=inject("EP_PICKER_BASE"),{arrowControl:y,disabledHours:k,disabledMinutes:$,disabledSeconds:V,defaultValue:L}=g.props,{getAvailableHours:z,getAvailableMinutes:j,getAvailableSeconds:ae}=buildAvailableTimeSlotGetter(k,$,V),oe=useNamespace("time"),{t:re,lang:ue}=useLocale(),le=ref([0,2]),de=useOldValue(r),he=computed(()=>isUndefined(r.actualVisible)?`${oe.namespace.value}-zoom-in-top`:""),_e=computed(()=>r.format.includes("ss")),xe=computed(()=>r.format.includes("A")?"A":r.format.includes("a")?"a":""),Ne=Ln=>{const Sn=dayjs(Ln).locale(ue.value),An=jt(Sn);return Sn.isSame(An)},$e=()=>{n("pick",de.value,!1)},Ce=(Ln=!1,Sn=!1)=>{Sn||n("pick",r.parsedValue,Ln)},Ie=Ln=>{if(!r.visible)return;const Sn=jt(Ln).millisecond(0);n("pick",Sn,!0)},ze=(Ln,Sn)=>{n("select-range",Ln,Sn),le.value=[Ln,Sn]},Ue=Ln=>{const Sn=[0,3].concat(_e.value?[6]:[]),An=["hours","minutes"].concat(_e.value?["seconds"]:[]),Mn=(Sn.indexOf(le.value[0])+Ln+Sn.length)%Sn.length;hn.start_emitSelectRange(An[Mn])},Pt=Ln=>{const Sn=Ln.code,{left:An,right:In,up:Mn,down:ra}=EVENT_CODE;if([An,In].includes(Sn)){Ue(Sn===An?-1:1),Ln.preventDefault();return}if([Mn,ra].includes(Sn)){const da=Sn===Mn?-1:1;hn.start_scrollDown(da),Ln.preventDefault();return}},{timePickerOptions:hn,onSetOption:Dt,getAvailableTime:xn}=useTimePanel({getAvailableHours:z,getAvailableMinutes:j,getAvailableSeconds:ae}),jt=Ln=>xn(Ln,r.datetimeRole||"",!0),Vn=Ln=>Ln?dayjs(Ln,r.format).locale(ue.value):null,Rn=Ln=>Ln?Ln.format(r.format):null,Tn=()=>dayjs(L).locale(ue.value);return n("set-picker-option",["isValidValue",Ne]),n("set-picker-option",["formatToString",Rn]),n("set-picker-option",["parseUserInput",Vn]),n("set-picker-option",["handleKeydownInput",Pt]),n("set-picker-option",["getRangeAvailableTime",jt]),n("set-picker-option",["getDefaultValue",Tn]),(Ln,Sn)=>(openBlock(),createBlock(Transition,{name:unref(he)},{default:withCtx(()=>[Ln.actualVisible||Ln.visible?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(oe).b("panel"))},[createBaseVNode("div",{class:normalizeClass([unref(oe).be("panel","content"),{"has-seconds":unref(_e)}])},[createVNode(TimeSpinner,{ref:"spinner",role:Ln.datetimeRole||"start","arrow-control":unref(y),"show-seconds":unref(_e),"am-pm-mode":unref(xe),"spinner-date":Ln.parsedValue,"disabled-hours":unref(k),"disabled-minutes":unref($),"disabled-seconds":unref(V),onChange:Ie,onSetOption:unref(Dt),onSelectRange:ze},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),createBaseVNode("div",{class:normalizeClass(unref(oe).be("panel","footer"))},[createBaseVNode("button",{type:"button",class:normalizeClass([unref(oe).be("panel","btn"),"cancel"]),onClick:$e},toDisplayString$1(unref(re)("el.datepicker.cancel")),3),createBaseVNode("button",{type:"button",class:normalizeClass([unref(oe).be("panel","btn"),"confirm"]),onClick:Sn[0]||(Sn[0]=An=>Ce())},toDisplayString$1(unref(re)("el.datepicker.confirm")),3)],2)],2)):createCommentVNode("v-if",!0)]),_:1},8,["name"]))}});var TimePickPanel=_export_sfc$1(_sfc_main$38,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-pick.vue"]]);const panelTimeRangeProps=buildProps({...timePanelSharedProps,parsedValue:{type:definePropType(Array)}}),_hoisted_1$2a=["disabled"],_sfc_main$37=defineComponent({__name:"panel-time-range",props:panelTimeRangeProps,emits:["pick","select-range","set-picker-option"],setup(e,{emit:n}){const r=e,g=(xa,sa)=>{const Hn=[];for(let bn=xa;bn<=sa;bn++)Hn.push(bn);return Hn},{t:y,lang:k}=useLocale(),$=useNamespace("time"),V=useNamespace("picker"),L=inject("EP_PICKER_BASE"),{arrowControl:z,disabledHours:j,disabledMinutes:ae,disabledSeconds:oe,defaultValue:re}=L.props,ue=computed(()=>[$.be("range-picker","body"),$.be("panel","content"),$.is("arrow",z),Ne.value?"has-seconds":""]),le=computed(()=>[$.be("range-picker","body"),$.be("panel","content"),$.is("arrow",z),Ne.value?"has-seconds":""]),de=computed(()=>r.parsedValue[0]),he=computed(()=>r.parsedValue[1]),_e=useOldValue(r),xe=()=>{n("pick",_e.value,!1)},Ne=computed(()=>r.format.includes("ss")),$e=computed(()=>r.format.includes("A")?"A":r.format.includes("a")?"a":""),Ce=(xa=!1)=>{n("pick",[de.value,he.value],xa)},Ie=xa=>{Pt(xa.millisecond(0),he.value)},ze=xa=>{Pt(de.value,xa.millisecond(0))},Ue=xa=>{const sa=xa.map(bn=>dayjs(bn).locale(k.value)),Hn=In(sa);return sa[0].isSame(Hn[0])&&sa[1].isSame(Hn[1])},Pt=(xa,sa)=>{n("pick",[xa,sa],!0)},hn=computed(()=>de.value>he.value),Dt=ref([0,2]),xn=(xa,sa)=>{n("select-range",xa,sa,"min"),Dt.value=[xa,sa]},jt=computed(()=>Ne.value?11:8),Vn=(xa,sa)=>{n("select-range",xa,sa,"max");const Hn=unref(jt);Dt.value=[xa+Hn,sa+Hn]},Rn=xa=>{const sa=Ne.value?[0,3,6,11,14,17]:[0,3,8,11],Hn=["hours","minutes"].concat(Ne.value?["seconds"]:[]),Xn=(sa.indexOf(Dt.value[0])+xa+sa.length)%sa.length,$n=sa.length/2;Xn<$n?ua.start_emitSelectRange(Hn[Xn]):ua.end_emitSelectRange(Hn[Xn-$n])},Tn=xa=>{const sa=xa.code,{left:Hn,right:bn,up:Xn,down:$n}=EVENT_CODE;if([Hn,bn].includes(sa)){Rn(sa===Hn?-1:1),xa.preventDefault();return}if([Xn,$n].includes(sa)){const kt=sa===Xn?-1:1,At=Dt.value[0]<jt.value?"start":"end";ua[`${At}_scrollDown`](kt),xa.preventDefault();return}},Ln=(xa,sa)=>{const Hn=j?j(xa):[],bn=xa==="start",$n=(sa||(bn?he.value:de.value)).hour(),kt=bn?g($n+1,23):g(0,$n-1);return union(Hn,kt)},Sn=(xa,sa,Hn)=>{const bn=ae?ae(xa,sa):[],Xn=sa==="start",$n=Hn||(Xn?he.value:de.value),kt=$n.hour();if(xa!==kt)return bn;const At=$n.minute(),Dn=Xn?g(At+1,59):g(0,At-1);return union(bn,Dn)},An=(xa,sa,Hn,bn)=>{const Xn=oe?oe(xa,sa,Hn):[],$n=Hn==="start",kt=bn||($n?he.value:de.value),At=kt.hour(),Dn=kt.minute();if(xa!==At||sa!==Dn)return Xn;const Qn=kt.second(),oa=$n?g(Qn+1,59):g(0,Qn-1);return union(Xn,oa)},In=([xa,sa])=>[aa(xa,"start",!0,sa),aa(sa,"end",!1,xa)],{getAvailableHours:Mn,getAvailableMinutes:ra,getAvailableSeconds:da}=buildAvailableTimeSlotGetter(Ln,Sn,An),{timePickerOptions:ua,getAvailableTime:aa,onSetOption:Nn}=useTimePanel({getAvailableHours:Mn,getAvailableMinutes:ra,getAvailableSeconds:da}),En=xa=>xa?isArray$3(xa)?xa.map(sa=>dayjs(sa,r.format).locale(k.value)):dayjs(xa,r.format).locale(k.value):null,Zn=xa=>xa?isArray$3(xa)?xa.map(sa=>sa.format(r.format)):xa.format(r.format):null,ha=()=>{if(isArray$3(re))return re.map(sa=>dayjs(sa).locale(k.value));const xa=dayjs(re).locale(k.value);return[xa,xa.add(60,"m")]};return n("set-picker-option",["formatToString",Zn]),n("set-picker-option",["parseUserInput",En]),n("set-picker-option",["isValidValue",Ue]),n("set-picker-option",["handleKeydownInput",Tn]),n("set-picker-option",["getDefaultValue",ha]),n("set-picker-option",["getRangeAvailableTime",In]),(xa,sa)=>xa.actualVisible?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([unref($).b("range-picker"),unref(V).b("panel")])},[createBaseVNode("div",{class:normalizeClass(unref($).be("range-picker","content"))},[createBaseVNode("div",{class:normalizeClass(unref($).be("range-picker","cell"))},[createBaseVNode("div",{class:normalizeClass(unref($).be("range-picker","header"))},toDisplayString$1(unref(y)("el.datepicker.startTime")),3),createBaseVNode("div",{class:normalizeClass(unref(ue))},[createVNode(TimeSpinner,{ref:"minSpinner",role:"start","show-seconds":unref(Ne),"am-pm-mode":unref($e),"arrow-control":unref(z),"spinner-date":unref(de),"disabled-hours":Ln,"disabled-minutes":Sn,"disabled-seconds":An,onChange:Ie,onSetOption:unref(Nn),onSelectRange:xn},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),createBaseVNode("div",{class:normalizeClass(unref($).be("range-picker","cell"))},[createBaseVNode("div",{class:normalizeClass(unref($).be("range-picker","header"))},toDisplayString$1(unref(y)("el.datepicker.endTime")),3),createBaseVNode("div",{class:normalizeClass(unref(le))},[createVNode(TimeSpinner,{ref:"maxSpinner",role:"end","show-seconds":unref(Ne),"am-pm-mode":unref($e),"arrow-control":unref(z),"spinner-date":unref(he),"disabled-hours":Ln,"disabled-minutes":Sn,"disabled-seconds":An,onChange:ze,onSetOption:unref(Nn),onSelectRange:Vn},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),createBaseVNode("div",{class:normalizeClass(unref($).be("panel","footer"))},[createBaseVNode("button",{type:"button",class:normalizeClass([unref($).be("panel","btn"),"cancel"]),onClick:sa[0]||(sa[0]=Hn=>xe())},toDisplayString$1(unref(y)("el.datepicker.cancel")),3),createBaseVNode("button",{type:"button",class:normalizeClass([unref($).be("panel","btn"),"confirm"]),disabled:unref(hn),onClick:sa[1]||(sa[1]=Hn=>Ce())},toDisplayString$1(unref(y)("el.datepicker.confirm")),11,_hoisted_1$2a)],2)],2)):createCommentVNode("v-if",!0)}});var TimeRangePanel=_export_sfc$1(_sfc_main$37,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);dayjs.extend(customParseFormat);var TimePicker=defineComponent({name:"ElTimePicker",install:null,props:{...timePickerDefaultProps,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,n){const r=ref(),[g,y]=e.isRange?["timerange",TimeRangePanel]:["time",TimePickPanel],k=$=>n.emit("update:modelValue",$);return provide("ElPopperOptions",e.popperOptions),n.expose({focus:$=>{var V;(V=r.value)==null||V.handleFocusInput($)},blur:$=>{var V;(V=r.value)==null||V.handleBlurInput($)},handleOpen:()=>{var $;($=r.value)==null||$.handleOpen()},handleClose:()=>{var $;($=r.value)==null||$.handleClose()}}),()=>{var $;const V=($=e.format)!=null?$:DEFAULT_FORMATS_TIME;return createVNode(CommonPicker,mergeProps(e,{ref:r,type:g,format:V,"onUpdate:modelValue":k}),{default:L=>createVNode(y,L,null)})}}});const _TimePicker=TimePicker;_TimePicker.install=e=>{e.component(_TimePicker.name,_TimePicker)};const ElTimePicker=_TimePicker,getPrevMonthLastDays=(e,n)=>{const r=e.subtract(1,"month").endOf("month").date();return rangeArr(n).map((g,y)=>r-(n-y-1))},getMonthDays=e=>{const n=e.daysInMonth();return rangeArr(n).map((r,g)=>g+1)},toNestedArr=e=>rangeArr(e.length/7).map(n=>{const r=n*7;return e.slice(r,r+7)}),dateTableProps=buildProps({selectedDay:{type:definePropType(Object)},range:{type:definePropType(Array)},date:{type:definePropType(Object),required:!0},hideHeader:{type:Boolean}}),dateTableEmits={pick:e=>isObject$3(e)};var localeData$1={exports:{}};(function(e,n){(function(r,g){e.exports=g()})(commonjsGlobal$1,function(){return function(r,g,y){var k=g.prototype,$=function(ae){return ae&&(ae.indexOf?ae:ae.s)},V=function(ae,oe,re,ue,le){var de=ae.name?ae:ae.$locale(),he=$(de[oe]),_e=$(de[re]),xe=he||_e.map(function($e){return $e.slice(0,ue)});if(!le)return xe;var Ne=de.weekStart;return xe.map(function($e,Ce){return xe[(Ce+(Ne||0))%7]})},L=function(){return y.Ls[y.locale()]},z=function(ae,oe){return ae.formats[oe]||function(re){return re.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(ue,le,de){return le||de.slice(1)})}(ae.formats[oe.toUpperCase()])},j=function(){var ae=this;return{months:function(oe){return oe?oe.format("MMMM"):V(ae,"months")},monthsShort:function(oe){return oe?oe.format("MMM"):V(ae,"monthsShort","months",3)},firstDayOfWeek:function(){return ae.$locale().weekStart||0},weekdays:function(oe){return oe?oe.format("dddd"):V(ae,"weekdays")},weekdaysMin:function(oe){return oe?oe.format("dd"):V(ae,"weekdaysMin","weekdays",2)},weekdaysShort:function(oe){return oe?oe.format("ddd"):V(ae,"weekdaysShort","weekdays",3)},longDateFormat:function(oe){return z(ae.$locale(),oe)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};k.localeData=function(){return j.bind(this)()},y.localeData=function(){var ae=L();return{firstDayOfWeek:function(){return ae.weekStart||0},weekdays:function(){return y.weekdays()},weekdaysShort:function(){return y.weekdaysShort()},weekdaysMin:function(){return y.weekdaysMin()},months:function(){return y.months()},monthsShort:function(){return y.monthsShort()},longDateFormat:function(oe){return z(ae,oe)},meridiem:ae.meridiem,ordinal:ae.ordinal}},y.months=function(){return V(L(),"months")},y.monthsShort=function(){return V(L(),"monthsShort","months",3)},y.weekdays=function(ae){return V(L(),"weekdays",null,null,ae)},y.weekdaysShort=function(ae){return V(L(),"weekdaysShort","weekdays",3,ae)},y.weekdaysMin=function(ae){return V(L(),"weekdaysMin","weekdays",2,ae)}}})})(localeData$1);var localeDataExports=localeData$1.exports;const localeData=getDefaultExportFromCjs(localeDataExports),useDateTable=(e,n)=>{dayjs.extend(localeData);const r=dayjs.localeData().firstDayOfWeek(),{t:g,lang:y}=useLocale(),k=dayjs().locale(y.value),$=computed(()=>!!e.range&&!!e.range.length),V=computed(()=>{let oe=[];if($.value){const[re,ue]=e.range,le=rangeArr(ue.date()-re.date()+1).map(_e=>({text:re.date()+_e,type:"current"}));let de=le.length%7;de=de===0?0:7-de;const he=rangeArr(de).map((_e,xe)=>({text:xe+1,type:"next"}));oe=le.concat(he)}else{const re=e.date.startOf("month").day(),ue=getPrevMonthLastDays(e.date,(re-r+7)%7).map(_e=>({text:_e,type:"prev"})),le=getMonthDays(e.date).map(_e=>({text:_e,type:"current"}));oe=[...ue,...le];const de=7-(oe.length%7||7),he=rangeArr(de).map((_e,xe)=>({text:xe+1,type:"next"}));oe=oe.concat(he)}return toNestedArr(oe)}),L=computed(()=>{const oe=r;return oe===0?WEEK_DAYS.map(re=>g(`el.datepicker.weeks.${re}`)):WEEK_DAYS.slice(oe).concat(WEEK_DAYS.slice(0,oe)).map(re=>g(`el.datepicker.weeks.${re}`))}),z=(oe,re)=>{switch(re){case"prev":return e.date.startOf("month").subtract(1,"month").date(oe);case"next":return e.date.startOf("month").add(1,"month").date(oe);case"current":return e.date.date(oe)}};return{now:k,isInRange:$,rows:V,weekDays:L,getFormattedDate:z,handlePickDay:({text:oe,type:re})=>{const ue=z(oe,re);n("pick",ue)},getSlotData:({text:oe,type:re})=>{const ue=z(oe,re);return{isSelected:ue.isSame(e.selectedDay),type:`${re}-month`,day:ue.format("YYYY-MM-DD"),date:ue.toDate()}}}},_hoisted_1$29={key:0},_hoisted_2$1O=["onClick"],__default__$1f=defineComponent({name:"DateTable"}),_sfc_main$36=defineComponent({...__default__$1f,props:dateTableProps,emits:dateTableEmits,setup(e,{expose:n,emit:r}){const g=e,{isInRange:y,now:k,rows:$,weekDays:V,getFormattedDate:L,handlePickDay:z,getSlotData:j}=useDateTable(g,r),ae=useNamespace("calendar-table"),oe=useNamespace("calendar-day"),re=({text:ue,type:le})=>{const de=[le];if(le==="current"){const he=L(ue,le);he.isSame(g.selectedDay,"day")&&de.push(oe.is("selected")),he.isSame(k,"day")&&de.push(oe.is("today"))}return de};return n({getFormattedDate:L}),(ue,le)=>(openBlock(),createElementBlock("table",{class:normalizeClass([unref(ae).b(),unref(ae).is("range",unref(y))]),cellspacing:"0",cellpadding:"0"},[ue.hideHeader?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("thead",_hoisted_1$29,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(V),de=>(openBlock(),createElementBlock("th",{key:de},toDisplayString$1(de),1))),128))])),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref($),(de,he)=>(openBlock(),createElementBlock("tr",{key:he,class:normalizeClass({[unref(ae).e("row")]:!0,[unref(ae).em("row","hide-border")]:he===0&&ue.hideHeader})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(de,(_e,xe)=>(openBlock(),createElementBlock("td",{key:xe,class:normalizeClass(re(_e)),onClick:Ne=>unref(z)(_e)},[createBaseVNode("div",{class:normalizeClass(unref(oe).b())},[renderSlot(ue.$slots,"date-cell",{data:unref(j)(_e)},()=>[createBaseVNode("span",null,toDisplayString$1(_e.text),1)])],2)],10,_hoisted_2$1O))),128))],2))),128))])],2))}});var DateTable$1=_export_sfc$1(_sfc_main$36,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/date-table.vue"]]);const adjacentMonth=(e,n)=>{const r=e.endOf("month"),g=n.startOf("month"),k=r.isSame(g,"week")?g.add(1,"week"):g;return[[e,r],[k.startOf("week"),n]]},threeConsecutiveMonth=(e,n)=>{const r=e.endOf("month"),g=e.add(1,"month").startOf("month"),y=r.isSame(g,"week")?g.add(1,"week"):g,k=y.endOf("month"),$=n.startOf("month"),V=k.isSame($,"week")?$.add(1,"week"):$;return[[e,r],[y.startOf("week"),k],[V.startOf("week"),n]]},useCalendar=(e,n,r)=>{const g=useSlots(),{lang:y}=useLocale(),k=ref(),$=dayjs().locale(y.value),V=computed({get(){return e.modelValue?z.value:k.value},set(he){if(!he)return;k.value=he;const _e=he.toDate();n(INPUT_EVENT,_e),n(UPDATE_MODEL_EVENT,_e)}}),L=computed(()=>{if(!e.range)return[];const he=e.range.map(Ne=>dayjs(Ne).locale(y.value)),[_e,xe]=he;return _e.isAfter(xe)?[]:_e.isSame(xe,"month")?ue(_e,xe):_e.add(1,"month").month()!==xe.month()?[]:ue(_e,xe)}),z=computed(()=>e.modelValue?dayjs(e.modelValue).locale(y.value):V.value||(L.value.length?L.value[0][0]:$)),j=computed(()=>z.value.subtract(1,"month").date(1)),ae=computed(()=>z.value.add(1,"month").date(1)),oe=computed(()=>z.value.subtract(1,"year").date(1)),re=computed(()=>z.value.add(1,"year").date(1)),ue=(he,_e)=>{const xe=he.startOf("week"),Ne=_e.endOf("week"),$e=xe.get("month"),Ce=Ne.get("month");return $e===Ce?[[xe,Ne]]:($e+1)%12===Ce?adjacentMonth(xe,Ne):$e+2===Ce||($e+1)%11===Ce?threeConsecutiveMonth(xe,Ne):[]},le=he=>{V.value=he},de=he=>{const xe={"prev-month":j.value,"next-month":ae.value,"prev-year":oe.value,"next-year":re.value,today:$}[he];xe.isSame(z.value,"day")||le(xe)};return useDeprecated({from:'"dateCell"',replacement:'"date-cell"',scope:"ElCalendar",version:"2.3.0",ref:"https://element-plus.org/en-US/component/calendar.html#slots",type:"Slot"},computed(()=>!!g.dateCell)),{calculateValidatedDateRange:ue,date:z,realSelectedDay:V,pickDay:le,selectDate:de,validatedRange:L}},isValidRange$1=e=>isArray$3(e)&&e.length===2&&e.every(n=>isDate$1(n)),calendarProps=buildProps({modelValue:{type:Date},range:{type:definePropType(Array),validator:isValidRange$1}}),calendarEmits={[UPDATE_MODEL_EVENT]:e=>isDate$1(e),[INPUT_EVENT]:e=>isDate$1(e)},COMPONENT_NAME$g="ElCalendar",__default__$1e=defineComponent({name:COMPONENT_NAME$g}),_sfc_main$35=defineComponent({...__default__$1e,props:calendarProps,emits:calendarEmits,setup(e,{expose:n,emit:r}){const g=e,y=useNamespace("calendar"),{calculateValidatedDateRange:k,date:$,pickDay:V,realSelectedDay:L,selectDate:z,validatedRange:j}=useCalendar(g,r),{t:ae}=useLocale(),oe=computed(()=>{const re=`el.datepicker.month${$.value.format("M")}`;return`${$.value.year()} ${ae("el.datepicker.year")} ${ae(re)}`});return n({selectedDay:L,pickDay:V,selectDate:z,calculateValidatedDateRange:k}),(re,ue)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(y).b())},[createBaseVNode("div",{class:normalizeClass(unref(y).e("header"))},[renderSlot(re.$slots,"header",{date:unref(oe)},()=>[createBaseVNode("div",{class:normalizeClass(unref(y).e("title"))},toDisplayString$1(unref(oe)),3),unref(j).length===0?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(y).e("button-group"))},[createVNode(unref(ElButtonGroup$1),null,{default:withCtx(()=>[createVNode(unref(ElButton),{size:"small",onClick:ue[0]||(ue[0]=le=>unref(z)("prev-month"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(ae)("el.datepicker.prevMonth")),1)]),_:1}),createVNode(unref(ElButton),{size:"small",onClick:ue[1]||(ue[1]=le=>unref(z)("today"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(ae)("el.datepicker.today")),1)]),_:1}),createVNode(unref(ElButton),{size:"small",onClick:ue[2]||(ue[2]=le=>unref(z)("next-month"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(ae)("el.datepicker.nextMonth")),1)]),_:1})]),_:1})],2)):createCommentVNode("v-if",!0)])],2),unref(j).length===0?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(y).e("body"))},[createVNode(DateTable$1,{date:unref($),"selected-day":unref(L),onPick:unref(V)},createSlots({_:2},[re.$slots["date-cell"]||re.$slots.dateCell?{name:"date-cell",fn:withCtx(le=>[re.$slots["date-cell"]?renderSlot(re.$slots,"date-cell",normalizeProps(mergeProps({key:0},le))):renderSlot(re.$slots,"dateCell",normalizeProps(mergeProps({key:1},le)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(y).e("body"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(j),(le,de)=>(openBlock(),createBlock(DateTable$1,{key:de,date:le[0],"selected-day":unref(L),range:le,"hide-header":de!==0,onPick:unref(V)},createSlots({_:2},[re.$slots["date-cell"]||re.$slots.dateCell?{name:"date-cell",fn:withCtx(he=>[re.$slots["date-cell"]?renderSlot(re.$slots,"date-cell",normalizeProps(mergeProps({key:0},he))):renderSlot(re.$slots,"dateCell",normalizeProps(mergeProps({key:1},he)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var Calendar=_export_sfc$1(_sfc_main$35,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/calendar.vue"]]);const ElCalendar=withInstall(Calendar),cardProps=buildProps({header:{type:String,default:""},bodyStyle:{type:definePropType([String,Object,Array]),default:""},bodyClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),__default__$1d=defineComponent({name:"ElCard"}),_sfc_main$34=defineComponent({...__default__$1d,props:cardProps,setup(e){const n=useNamespace("card");return(r,g)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(n).b(),unref(n).is(`${r.shadow}-shadow`)])},[r.$slots.header||r.header?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(n).e("header"))},[renderSlot(r.$slots,"header",{},()=>[createTextVNode(toDisplayString$1(r.header),1)])],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass([unref(n).e("body"),r.bodyClass]),style:normalizeStyle(r.bodyStyle)},[renderSlot(r.$slots,"default")],6)],2))}});var Card=_export_sfc$1(_sfc_main$34,[["__file","/home/runner/work/element-plus/element-plus/packages/components/card/src/card.vue"]]);const ElCard=withInstall(Card),carouselProps=buildProps({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),carouselEmits={change:(e,n)=>[e,n].every(isNumber$1)},carouselContextKey=Symbol("carouselContextKey"),THROTTLE_TIME=300,useCarousel=(e,n,r)=>{const{children:g,addChild:y,removeChild:k}=useOrderedChildren(getCurrentInstance(),"ElCarouselItem"),$=ref(-1),V=ref(null),L=ref(!1),z=ref(),j=ref(0),ae=computed(()=>e.arrow!=="never"&&!unref(ue)),oe=computed(()=>g.value.some(Sn=>Sn.props.label.toString().length>0)),re=computed(()=>e.type==="card"),ue=computed(()=>e.direction==="vertical"),le=computed(()=>e.height!=="auto"?{height:e.height}:{height:`${j.value}px`,overflow:"hidden"}),de=throttle$1(Sn=>{$e(Sn)},THROTTLE_TIME,{trailing:!0}),he=throttle$1(Sn=>{xn(Sn)},THROTTLE_TIME);function _e(){V.value&&(clearInterval(V.value),V.value=null)}function xe(){e.interval<=0||!e.autoplay||V.value||(V.value=setInterval(()=>Ne(),e.interval))}const Ne=()=>{$.value<g.value.length-1?$.value=$.value+1:e.loop&&($.value=0)};function $e(Sn){if(isString$3(Sn)){const Mn=g.value.filter(ra=>ra.props.name===Sn);Mn.length>0&&(Sn=g.value.indexOf(Mn[0]))}if(Sn=Number(Sn),Number.isNaN(Sn)||Sn!==Math.floor(Sn))return;const An=g.value.length,In=$.value;Sn<0?$.value=e.loop?An-1:0:Sn>=An?$.value=e.loop?0:An-1:$.value=Sn,In===$.value&&Ce(In),Rn()}function Ce(Sn){g.value.forEach((An,In)=>{An.translateItem(In,$.value,Sn)})}function Ie(Sn,An){var In,Mn,ra,da;const ua=unref(g),aa=ua.length;if(aa===0||!Sn.states.inStage)return!1;const Nn=An+1,En=An-1,Zn=aa-1,ha=ua[Zn].states.active,xa=ua[0].states.active,sa=(Mn=(In=ua[Nn])==null?void 0:In.states)==null?void 0:Mn.active,Hn=(da=(ra=ua[En])==null?void 0:ra.states)==null?void 0:da.active;return An===Zn&&xa||sa?"left":An===0&&ha||Hn?"right":!1}function ze(){L.value=!0,e.pauseOnHover&&_e()}function Ue(){L.value=!1,xe()}function Pt(Sn){unref(ue)||g.value.forEach((An,In)=>{Sn===Ie(An,In)&&(An.states.hover=!0)})}function hn(){unref(ue)||g.value.forEach(Sn=>{Sn.states.hover=!1})}function Dt(Sn){$.value=Sn}function xn(Sn){e.trigger==="hover"&&Sn!==$.value&&($.value=Sn)}function jt(){$e($.value-1)}function Vn(){$e($.value+1)}function Rn(){_e(),xe()}function Tn(Sn){e.height==="auto"&&(j.value=Sn)}watch(()=>$.value,(Sn,An)=>{Ce(An),An>-1&&n("change",Sn,An)}),watch(()=>e.autoplay,Sn=>{Sn?xe():_e()}),watch(()=>e.loop,()=>{$e($.value)}),watch(()=>e.interval,()=>{Rn()}),watch(()=>g.value,()=>{g.value.length>0&&$e(e.initialIndex)});const Ln=shallowRef();return onMounted(()=>{Ln.value=useResizeObserver(z.value,()=>{Ce()}),xe()}),onBeforeUnmount(()=>{_e(),z.value&&Ln.value&&Ln.value.stop()}),provide(carouselContextKey,{root:z,isCardType:re,isVertical:ue,items:g,loop:e.loop,addItem:y,removeItem:k,setActiveItem:$e,setContainerHeight:Tn}),{root:z,activeIndex:$,arrowDisplay:ae,hasLabel:oe,hover:L,isCardType:re,items:g,isVertical:ue,containerStyle:le,handleButtonEnter:Pt,handleButtonLeave:hn,handleIndicatorClick:Dt,handleMouseEnter:ze,handleMouseLeave:Ue,setActiveItem:$e,prev:jt,next:Vn,throttledArrowClick:de,throttledIndicatorHover:he}},_hoisted_1$28=["onMouseenter","onClick"],_hoisted_2$1N={key:0},COMPONENT_NAME$f="ElCarousel",__default__$1c=defineComponent({name:COMPONENT_NAME$f}),_sfc_main$33=defineComponent({...__default__$1c,props:carouselProps,emits:carouselEmits,setup(e,{expose:n,emit:r}){const g=e,{root:y,activeIndex:k,arrowDisplay:$,hasLabel:V,hover:L,isCardType:z,items:j,isVertical:ae,containerStyle:oe,handleButtonEnter:re,handleButtonLeave:ue,handleIndicatorClick:le,handleMouseEnter:de,handleMouseLeave:he,setActiveItem:_e,prev:xe,next:Ne,throttledArrowClick:$e,throttledIndicatorHover:Ce}=useCarousel(g,r),Ie=useNamespace("carousel"),ze=computed(()=>{const Pt=[Ie.b(),Ie.m(g.direction)];return unref(z)&&Pt.push(Ie.m("card")),Pt}),Ue=computed(()=>{const Pt=[Ie.e("indicators"),Ie.em("indicators",g.direction)];return unref(V)&&Pt.push(Ie.em("indicators","labels")),g.indicatorPosition==="outside"&&Pt.push(Ie.em("indicators","outside")),unref(ae)&&Pt.push(Ie.em("indicators","right")),Pt});return n({setActiveItem:_e,prev:xe,next:Ne}),(Pt,hn)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:y,class:normalizeClass(unref(ze)),onMouseenter:hn[6]||(hn[6]=withModifiers((...Dt)=>unref(de)&&unref(de)(...Dt),["stop"])),onMouseleave:hn[7]||(hn[7]=withModifiers((...Dt)=>unref(he)&&unref(he)(...Dt),["stop"]))},[createBaseVNode("div",{class:normalizeClass(unref(Ie).e("container")),style:normalizeStyle(unref(oe))},[unref($)?(openBlock(),createBlock(Transition,{key:0,name:"carousel-arrow-left",persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("button",{type:"button",class:normalizeClass([unref(Ie).e("arrow"),unref(Ie).em("arrow","left")]),onMouseenter:hn[0]||(hn[0]=Dt=>unref(re)("left")),onMouseleave:hn[1]||(hn[1]=(...Dt)=>unref(ue)&&unref(ue)(...Dt)),onClick:hn[2]||(hn[2]=withModifiers(Dt=>unref($e)(unref(k)-1),["stop"]))},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1})],34),[[vShow,(Pt.arrow==="always"||unref(L))&&(g.loop||unref(k)>0)]])]),_:1})):createCommentVNode("v-if",!0),unref($)?(openBlock(),createBlock(Transition,{key:1,name:"carousel-arrow-right",persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("button",{type:"button",class:normalizeClass([unref(Ie).e("arrow"),unref(Ie).em("arrow","right")]),onMouseenter:hn[3]||(hn[3]=Dt=>unref(re)("right")),onMouseleave:hn[4]||(hn[4]=(...Dt)=>unref(ue)&&unref(ue)(...Dt)),onClick:hn[5]||(hn[5]=withModifiers(Dt=>unref($e)(unref(k)+1),["stop"]))},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})],34),[[vShow,(Pt.arrow==="always"||unref(L))&&(g.loop||unref(k)<unref(j).length-1)]])]),_:1})):createCommentVNode("v-if",!0),renderSlot(Pt.$slots,"default")],6),Pt.indicatorPosition!=="none"?(openBlock(),createElementBlock("ul",{key:0,class:normalizeClass(unref(Ue))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(j),(Dt,xn)=>(openBlock(),createElementBlock("li",{key:xn,class:normalizeClass([unref(Ie).e("indicator"),unref(Ie).em("indicator",Pt.direction),unref(Ie).is("active",xn===unref(k))]),onMouseenter:jt=>unref(Ce)(xn),onClick:withModifiers(jt=>unref(le)(xn),["stop"])},[createBaseVNode("button",{class:normalizeClass(unref(Ie).e("button"))},[unref(V)?(openBlock(),createElementBlock("span",_hoisted_2$1N,toDisplayString$1(Dt.props.label),1)):createCommentVNode("v-if",!0)],2)],42,_hoisted_1$28))),128))],2)):createCommentVNode("v-if",!0)],34))}});var Carousel=_export_sfc$1(_sfc_main$33,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const carouselItemProps=buildProps({name:{type:String,default:""},label:{type:[String,Number],default:""}}),useCarouselItem=(e,n)=>{const r=inject(carouselContextKey),g=getCurrentInstance(),y=.83,k=ref(),$=ref(!1),V=ref(0),L=ref(1),z=ref(!1),j=ref(!1),ae=ref(!1),oe=ref(!1),{isCardType:re,isVertical:ue}=r;function le(Ne,$e,Ce){const Ie=Ce-1,ze=$e-1,Ue=$e+1,Pt=Ce/2;return $e===0&&Ne===Ie?-1:$e===Ie&&Ne===0?Ce:Ne<ze&&$e-Ne>=Pt?Ce+1:Ne>Ue&&Ne-$e>=Pt?-2:Ne}function de(Ne,$e){var Ce,Ie;const ze=unref(ue)?((Ce=r.root.value)==null?void 0:Ce.offsetHeight)||0:((Ie=r.root.value)==null?void 0:Ie.offsetWidth)||0;return ae.value?ze*((2-y)*(Ne-$e)+1)/4:Ne<$e?-(1+y)*ze/4:(3+y)*ze/4}function he(Ne,$e,Ce){const Ie=r.root.value;return Ie?((Ce?Ie.offsetHeight:Ie.offsetWidth)||0)*(Ne-$e):0}const _e=(Ne,$e,Ce)=>{var Ie;const ze=unref(re),Ue=(Ie=r.items.value.length)!=null?Ie:Number.NaN,Pt=Ne===$e;!ze&&!isUndefined(Ce)&&(oe.value=Pt||Ne===Ce),!Pt&&Ue>2&&r.loop&&(Ne=le(Ne,$e,Ue));const hn=unref(ue);z.value=Pt,ze?(ae.value=Math.round(Math.abs(Ne-$e))<=1,V.value=de(Ne,$e),L.value=unref(z)?1:y):V.value=he(Ne,$e,hn),j.value=!0,Pt&&k.value&&r.setContainerHeight(k.value.offsetHeight)};function xe(){if(r&&unref(re)){const Ne=r.items.value.findIndex(({uid:$e})=>$e===g.uid);r.setActiveItem(Ne)}}return onMounted(()=>{r.addItem({props:e,states:reactive({hover:$,translate:V,scale:L,active:z,ready:j,inStage:ae,animating:oe}),uid:g.uid,translateItem:_e})}),onUnmounted(()=>{r.removeItem(g.uid)}),{carouselItemRef:k,active:z,animating:oe,hover:$,inStage:ae,isVertical:ue,translate:V,isCardType:re,scale:L,ready:j,handleItemClick:xe}},__default__$1b=defineComponent({name:"ElCarouselItem"}),_sfc_main$32=defineComponent({...__default__$1b,props:carouselItemProps,setup(e){const n=e,r=useNamespace("carousel"),{carouselItemRef:g,active:y,animating:k,hover:$,inStage:V,isVertical:L,translate:z,isCardType:j,scale:ae,ready:oe,handleItemClick:re}=useCarouselItem(n),ue=computed(()=>{const de=`${`translate${unref(L)?"Y":"X"}`}(${unref(z)}px)`,he=`scale(${unref(ae)})`;return{transform:[de,he].join(" ")}});return(le,de)=>withDirectives((openBlock(),createElementBlock("div",{ref_key:"carouselItemRef",ref:g,class:normalizeClass([unref(r).e("item"),unref(r).is("active",unref(y)),unref(r).is("in-stage",unref(V)),unref(r).is("hover",unref($)),unref(r).is("animating",unref(k)),{[unref(r).em("item","card")]:unref(j),[unref(r).em("item","card-vertical")]:unref(j)&&unref(L)}]),style:normalizeStyle(unref(ue)),onClick:de[0]||(de[0]=(...he)=>unref(re)&&unref(re)(...he))},[unref(j)?withDirectives((openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(r).e("mask"))},null,2)),[[vShow,!unref(y)]]):createCommentVNode("v-if",!0),renderSlot(le.$slots,"default")],6)),[[vShow,unref(oe)]])}});var CarouselItem=_export_sfc$1(_sfc_main$32,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const ElCarousel=withInstall(Carousel,{CarouselItem}),ElCarouselItem=withNoopInstall(CarouselItem),checkboxProps={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object]},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:useSizeProp,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0}},checkboxEmits={[UPDATE_MODEL_EVENT]:e=>isString$3(e)||isNumber$1(e)||isBoolean$1(e),change:e=>isString$3(e)||isNumber$1(e)||isBoolean$1(e)},checkboxGroupContextKey=Symbol("checkboxGroupContextKey"),useCheckboxDisabled=({model:e,isChecked:n})=>{const r=inject(checkboxGroupContextKey,void 0),g=computed(()=>{var k,$;const V=(k=r?.max)==null?void 0:k.value,L=($=r?.min)==null?void 0:$.value;return!isUndefined(V)&&e.value.length>=V&&!n.value||!isUndefined(L)&&e.value.length<=L&&n.value});return{isDisabled:useFormDisabled(computed(()=>r?.disabled.value||g.value)),isLimitDisabled:g}},useCheckboxEvent=(e,{model:n,isLimitExceeded:r,hasOwnLabel:g,isDisabled:y,isLabeledByFormItem:k})=>{const $=inject(checkboxGroupContextKey,void 0),{formItem:V}=useFormItem(),{emit:L}=getCurrentInstance();function z(ue){var le,de;return ue===e.trueLabel||ue===!0?(le=e.trueLabel)!=null?le:!0:(de=e.falseLabel)!=null?de:!1}function j(ue,le){L("change",z(ue),le)}function ae(ue){if(r.value)return;const le=ue.target;L("change",z(le.checked),ue)}async function oe(ue){r.value||!g.value&&!y.value&&k.value&&(ue.composedPath().some(he=>he.tagName==="LABEL")||(n.value=z([!1,e.falseLabel].includes(n.value)),await nextTick(),j(n.value,ue)))}const re=computed(()=>$?.validateEvent||e.validateEvent);return watch(()=>e.modelValue,()=>{re.value&&V?.validate("change").catch(ue=>void 0)}),{handleChange:ae,onClickRoot:oe}},useCheckboxModel=e=>{const n=ref(!1),{emit:r}=getCurrentInstance(),g=inject(checkboxGroupContextKey,void 0),y=computed(()=>isUndefined(g)===!1),k=ref(!1);return{model:computed({get(){var V,L;return y.value?(V=g?.modelValue)==null?void 0:V.value:(L=e.modelValue)!=null?L:n.value},set(V){var L,z;y.value&&isArray$3(V)?(k.value=((L=g?.max)==null?void 0:L.value)!==void 0&&V.length>g?.max.value,k.value===!1&&((z=g?.changeEvent)==null||z.call(g,V))):(r(UPDATE_MODEL_EVENT,V),n.value=V)}}),isGroup:y,isLimitExceeded:k}},useCheckboxStatus=(e,n,{model:r})=>{const g=inject(checkboxGroupContextKey,void 0),y=ref(!1),k=computed(()=>{const z=r.value;return isBoolean$1(z)?z:isArray$3(z)?isObject$3(e.label)?z.map(toRaw).some(j=>isEqual$1(j,e.label)):z.map(toRaw).includes(e.label):z!=null?z===e.trueLabel:!!z}),$=useFormSize(computed(()=>{var z;return(z=g?.size)==null?void 0:z.value}),{prop:!0}),V=useFormSize(computed(()=>{var z;return(z=g?.size)==null?void 0:z.value})),L=computed(()=>!!(n.default||e.label));return{checkboxButtonSize:$,isChecked:k,isFocused:y,checkboxSize:V,hasOwnLabel:L}},setStoreValue=(e,{model:n})=>{function r(){isArray$3(n.value)&&!n.value.includes(e.label)?n.value.push(e.label):n.value=e.trueLabel||!0}e.checked&&r()},useCheckbox=(e,n)=>{const{formItem:r}=useFormItem(),{model:g,isGroup:y,isLimitExceeded:k}=useCheckboxModel(e),{isFocused:$,isChecked:V,checkboxButtonSize:L,checkboxSize:z,hasOwnLabel:j}=useCheckboxStatus(e,n,{model:g}),{isDisabled:ae}=useCheckboxDisabled({model:g,isChecked:V}),{inputId:oe,isLabeledByFormItem:re}=useFormItemInputId(e,{formItemContext:r,disableIdGeneration:j,disableIdManagement:y}),{handleChange:ue,onClickRoot:le}=useCheckboxEvent(e,{model:g,isLimitExceeded:k,hasOwnLabel:j,isDisabled:ae,isLabeledByFormItem:re});return setStoreValue(e,{model:g}),{inputId:oe,isLabeledByFormItem:re,isChecked:V,isDisabled:ae,isFocused:$,checkboxButtonSize:L,checkboxSize:z,hasOwnLabel:j,model:g,handleChange:ue,onClickRoot:le}},_hoisted_1$27=["tabindex","role","aria-checked"],_hoisted_2$1M=["id","aria-hidden","name","tabindex","disabled","true-value","false-value"],_hoisted_3$16=["id","aria-hidden","disabled","value","name","tabindex"],__default__$1a=defineComponent({name:"ElCheckbox"}),_sfc_main$31=defineComponent({...__default__$1a,props:checkboxProps,emits:checkboxEmits,setup(e){const n=e,r=useSlots(),{inputId:g,isLabeledByFormItem:y,isChecked:k,isDisabled:$,isFocused:V,checkboxSize:L,hasOwnLabel:z,model:j,handleChange:ae,onClickRoot:oe}=useCheckbox(n,r),re=useNamespace("checkbox"),ue=computed(()=>[re.b(),re.m(L.value),re.is("disabled",$.value),re.is("bordered",n.border),re.is("checked",k.value)]),le=computed(()=>[re.e("input"),re.is("disabled",$.value),re.is("checked",k.value),re.is("indeterminate",n.indeterminate),re.is("focus",V.value)]);return(de,he)=>(openBlock(),createBlock(resolveDynamicComponent(!unref(z)&&unref(y)?"span":"label"),{class:normalizeClass(unref(ue)),"aria-controls":de.indeterminate?de.controls:null,onClick:unref(oe)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(unref(le)),tabindex:de.indeterminate?0:void 0,role:de.indeterminate?"checkbox":void 0,"aria-checked":de.indeterminate?"mixed":void 0},[de.trueLabel||de.falseLabel?withDirectives((openBlock(),createElementBlock("input",{key:0,id:unref(g),"onUpdate:modelValue":he[0]||(he[0]=_e=>isRef(j)?j.value=_e:null),class:normalizeClass(unref(re).e("original")),type:"checkbox","aria-hidden":de.indeterminate?"true":"false",name:de.name,tabindex:de.tabindex,disabled:unref($),"true-value":de.trueLabel,"false-value":de.falseLabel,onChange:he[1]||(he[1]=(..._e)=>unref(ae)&&unref(ae)(..._e)),onFocus:he[2]||(he[2]=_e=>V.value=!0),onBlur:he[3]||(he[3]=_e=>V.value=!1),onClick:he[4]||(he[4]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$1M)),[[vModelCheckbox,unref(j)]]):withDirectives((openBlock(),createElementBlock("input",{key:1,id:unref(g),"onUpdate:modelValue":he[5]||(he[5]=_e=>isRef(j)?j.value=_e:null),class:normalizeClass(unref(re).e("original")),type:"checkbox","aria-hidden":de.indeterminate?"true":"false",disabled:unref($),value:de.label,name:de.name,tabindex:de.tabindex,onChange:he[6]||(he[6]=(..._e)=>unref(ae)&&unref(ae)(..._e)),onFocus:he[7]||(he[7]=_e=>V.value=!0),onBlur:he[8]||(he[8]=_e=>V.value=!1),onClick:he[9]||(he[9]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_3$16)),[[vModelCheckbox,unref(j)]]),createBaseVNode("span",{class:normalizeClass(unref(re).e("inner"))},null,2)],10,_hoisted_1$27),unref(z)?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(re).e("label"))},[renderSlot(de.$slots,"default"),de.$slots.default?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString$1(de.label),1)],64))],2)):createCommentVNode("v-if",!0)]),_:3},8,["class","aria-controls","onClick"]))}});var Checkbox=_export_sfc$1(_sfc_main$31,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox.vue"]]);const _hoisted_1$26=["name","tabindex","disabled","true-value","false-value"],_hoisted_2$1L=["name","tabindex","disabled","value"],__default__$19=defineComponent({name:"ElCheckboxButton"}),_sfc_main$30=defineComponent({...__default__$19,props:checkboxProps,emits:checkboxEmits,setup(e){const n=e,r=useSlots(),{isFocused:g,isChecked:y,isDisabled:k,checkboxButtonSize:$,model:V,handleChange:L}=useCheckbox(n,r),z=inject(checkboxGroupContextKey,void 0),j=useNamespace("checkbox"),ae=computed(()=>{var re,ue,le,de;const he=(ue=(re=z?.fill)==null?void 0:re.value)!=null?ue:"";return{backgroundColor:he,borderColor:he,color:(de=(le=z?.textColor)==null?void 0:le.value)!=null?de:"",boxShadow:he?`-1px 0 0 0 ${he}`:void 0}}),oe=computed(()=>[j.b("button"),j.bm("button",$.value),j.is("disabled",k.value),j.is("checked",y.value),j.is("focus",g.value)]);return(re,ue)=>(openBlock(),createElementBlock("label",{class:normalizeClass(unref(oe))},[re.trueLabel||re.falseLabel?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":ue[0]||(ue[0]=le=>isRef(V)?V.value=le:null),class:normalizeClass(unref(j).be("button","original")),type:"checkbox",name:re.name,tabindex:re.tabindex,disabled:unref(k),"true-value":re.trueLabel,"false-value":re.falseLabel,onChange:ue[1]||(ue[1]=(...le)=>unref(L)&&unref(L)(...le)),onFocus:ue[2]||(ue[2]=le=>g.value=!0),onBlur:ue[3]||(ue[3]=le=>g.value=!1),onClick:ue[4]||(ue[4]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$26)),[[vModelCheckbox,unref(V)]]):withDirectives((openBlock(),createElementBlock("input",{key:1,"onUpdate:modelValue":ue[5]||(ue[5]=le=>isRef(V)?V.value=le:null),class:normalizeClass(unref(j).be("button","original")),type:"checkbox",name:re.name,tabindex:re.tabindex,disabled:unref(k),value:re.label,onChange:ue[6]||(ue[6]=(...le)=>unref(L)&&unref(L)(...le)),onFocus:ue[7]||(ue[7]=le=>g.value=!0),onBlur:ue[8]||(ue[8]=le=>g.value=!1),onClick:ue[9]||(ue[9]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$1L)),[[vModelCheckbox,unref(V)]]),re.$slots.default||re.label?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass(unref(j).be("button","inner")),style:normalizeStyle(unref(y)?unref(ae):void 0)},[renderSlot(re.$slots,"default",{},()=>[createTextVNode(toDisplayString$1(re.label),1)])],6)):createCommentVNode("v-if",!0)],2))}});var CheckboxButton=_export_sfc$1(_sfc_main$30,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-button.vue"]]);const checkboxGroupProps=buildProps({modelValue:{type:definePropType(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:useSizeProp,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0}}),checkboxGroupEmits={[UPDATE_MODEL_EVENT]:e=>isArray$3(e),change:e=>isArray$3(e)},__default__$18=defineComponent({name:"ElCheckboxGroup"}),_sfc_main$2$=defineComponent({...__default__$18,props:checkboxGroupProps,emits:checkboxGroupEmits,setup(e,{emit:n}){const r=e,g=useNamespace("checkbox"),{formItem:y}=useFormItem(),{inputId:k,isLabeledByFormItem:$}=useFormItemInputId(r,{formItemContext:y}),V=async z=>{n(UPDATE_MODEL_EVENT,z),await nextTick(),n("change",z)},L=computed({get(){return r.modelValue},set(z){V(z)}});return provide(checkboxGroupContextKey,{...pick(toRefs(r),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:L,changeEvent:V}),watch(()=>r.modelValue,()=>{r.validateEvent&&y?.validate("change").catch(z=>void 0)}),(z,j)=>{var ae;return openBlock(),createBlock(resolveDynamicComponent(z.tag),{id:unref(k),class:normalizeClass(unref(g).b("group")),role:"group","aria-label":unref($)?void 0:z.label||"checkbox-group","aria-labelledby":unref($)?(ae=unref(y))==null?void 0:ae.labelId:void 0},{default:withCtx(()=>[renderSlot(z.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var CheckboxGroup=_export_sfc$1(_sfc_main$2$,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-group.vue"]]);const ElCheckbox=withInstall(Checkbox,{CheckboxButton,CheckboxGroup}),ElCheckboxButton=withNoopInstall(CheckboxButton),ElCheckboxGroup$1=withNoopInstall(CheckboxGroup),radioPropsBase=buildProps({size:useSizeProp,disabled:Boolean,label:{type:[String,Number,Boolean],default:""}}),radioProps=buildProps({...radioPropsBase,modelValue:{type:[String,Number,Boolean],default:""},name:{type:String,default:""},border:Boolean}),radioEmits={[UPDATE_MODEL_EVENT]:e=>isString$3(e)||isNumber$1(e)||isBoolean$1(e),[CHANGE_EVENT]:e=>isString$3(e)||isNumber$1(e)||isBoolean$1(e)},radioGroupKey=Symbol("radioGroupKey"),useRadio=(e,n)=>{const r=ref(),g=inject(radioGroupKey,void 0),y=computed(()=>!!g),k=computed({get(){return y.value?g.modelValue:e.modelValue},set(j){y.value?g.changeEvent(j):n&&n(UPDATE_MODEL_EVENT,j),r.value.checked=e.modelValue===e.label}}),$=useFormSize(computed(()=>g?.size)),V=useFormDisabled(computed(()=>g?.disabled)),L=ref(!1),z=computed(()=>V.value||y.value&&k.value!==e.label?-1:0);return{radioRef:r,isGroup:y,radioGroup:g,focus:L,size:$,disabled:V,tabIndex:z,modelValue:k}},_hoisted_1$25=["value","name","disabled"],__default__$17=defineComponent({name:"ElRadio"}),_sfc_main$2_=defineComponent({...__default__$17,props:radioProps,emits:radioEmits,setup(e,{emit:n}){const r=e,g=useNamespace("radio"),{radioRef:y,radioGroup:k,focus:$,size:V,disabled:L,modelValue:z}=useRadio(r,n);function j(){nextTick(()=>n("change",z.value))}return(ae,oe)=>{var re;return openBlock(),createElementBlock("label",{class:normalizeClass([unref(g).b(),unref(g).is("disabled",unref(L)),unref(g).is("focus",unref($)),unref(g).is("bordered",ae.border),unref(g).is("checked",unref(z)===ae.label),unref(g).m(unref(V))])},[createBaseVNode("span",{class:normalizeClass([unref(g).e("input"),unref(g).is("disabled",unref(L)),unref(g).is("checked",unref(z)===ae.label)])},[withDirectives(createBaseVNode("input",{ref_key:"radioRef",ref:y,"onUpdate:modelValue":oe[0]||(oe[0]=ue=>isRef(z)?z.value=ue:null),class:normalizeClass(unref(g).e("original")),value:ae.label,name:ae.name||((re=unref(k))==null?void 0:re.name),disabled:unref(L),type:"radio",onFocus:oe[1]||(oe[1]=ue=>$.value=!0),onBlur:oe[2]||(oe[2]=ue=>$.value=!1),onChange:j,onClick:oe[3]||(oe[3]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$25),[[vModelRadio,unref(z)]]),createBaseVNode("span",{class:normalizeClass(unref(g).e("inner"))},null,2)],2),createBaseVNode("span",{class:normalizeClass(unref(g).e("label")),onKeydown:oe[4]||(oe[4]=withModifiers(()=>{},["stop"]))},[renderSlot(ae.$slots,"default",{},()=>[createTextVNode(toDisplayString$1(ae.label),1)])],34)],2)}}});var Radio=_export_sfc$1(_sfc_main$2_,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio.vue"]]);const radioButtonProps=buildProps({...radioPropsBase,name:{type:String,default:""}}),_hoisted_1$24=["value","name","disabled"],__default__$16=defineComponent({name:"ElRadioButton"}),_sfc_main$2Z=defineComponent({...__default__$16,props:radioButtonProps,setup(e){const n=e,r=useNamespace("radio"),{radioRef:g,focus:y,size:k,disabled:$,modelValue:V,radioGroup:L}=useRadio(n),z=computed(()=>({backgroundColor:L?.fill||"",borderColor:L?.fill||"",boxShadow:L?.fill?`-1px 0 0 0 ${L.fill}`:"",color:L?.textColor||""}));return(j,ae)=>{var oe;return openBlock(),createElementBlock("label",{class:normalizeClass([unref(r).b("button"),unref(r).is("active",unref(V)===j.label),unref(r).is("disabled",unref($)),unref(r).is("focus",unref(y)),unref(r).bm("button",unref(k))])},[withDirectives(createBaseVNode("input",{ref_key:"radioRef",ref:g,"onUpdate:modelValue":ae[0]||(ae[0]=re=>isRef(V)?V.value=re:null),class:normalizeClass(unref(r).be("button","original-radio")),value:j.label,type:"radio",name:j.name||((oe=unref(L))==null?void 0:oe.name),disabled:unref($),onFocus:ae[1]||(ae[1]=re=>y.value=!0),onBlur:ae[2]||(ae[2]=re=>y.value=!1),onClick:ae[3]||(ae[3]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$24),[[vModelRadio,unref(V)]]),createBaseVNode("span",{class:normalizeClass(unref(r).be("button","inner")),style:normalizeStyle(unref(V)===j.label?unref(z):{}),onKeydown:ae[4]||(ae[4]=withModifiers(()=>{},["stop"]))},[renderSlot(j.$slots,"default",{},()=>[createTextVNode(toDisplayString$1(j.label),1)])],38)],2)}}});var RadioButton=_export_sfc$1(_sfc_main$2Z,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-button.vue"]]);const radioGroupProps=buildProps({id:{type:String,default:void 0},size:useSizeProp,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:""},fill:{type:String,default:""},label:{type:String,default:void 0},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0}}),radioGroupEmits=radioEmits,_hoisted_1$23=["id","aria-label","aria-labelledby"],__default__$15=defineComponent({name:"ElRadioGroup"}),_sfc_main$2Y=defineComponent({...__default__$15,props:radioGroupProps,emits:radioGroupEmits,setup(e,{emit:n}){const r=e,g=useNamespace("radio"),y=useId(),k=ref(),{formItem:$}=useFormItem(),{inputId:V,isLabeledByFormItem:L}=useFormItemInputId(r,{formItemContext:$}),z=ae=>{n(UPDATE_MODEL_EVENT,ae),nextTick(()=>n("change",ae))};onMounted(()=>{const ae=k.value.querySelectorAll("[type=radio]"),oe=ae[0];!Array.from(ae).some(re=>re.checked)&&oe&&(oe.tabIndex=0)});const j=computed(()=>r.name||y.value);return provide(radioGroupKey,reactive({...toRefs(r),changeEvent:z,name:j})),watch(()=>r.modelValue,()=>{r.validateEvent&&$?.validate("change").catch(ae=>void 0)}),(ae,oe)=>(openBlock(),createElementBlock("div",{id:unref(V),ref_key:"radioGroupRef",ref:k,class:normalizeClass(unref(g).b("group")),role:"radiogroup","aria-label":unref(L)?void 0:ae.label||"radio-group","aria-labelledby":unref(L)?unref($).labelId:void 0},[renderSlot(ae.$slots,"default")],10,_hoisted_1$23))}});var RadioGroup=_export_sfc$1(_sfc_main$2Y,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-group.vue"]]);const ElRadio=withInstall(Radio,{RadioButton,RadioGroup}),ElRadioGroup=withNoopInstall(RadioGroup),ElRadioButton=withNoopInstall(RadioButton);var NodeContent$1=defineComponent({name:"NodeContent",setup(){return{ns:useNamespace("cascader-node")}},render(){const{ns:e}=this,{node:n,panel:r}=this.$parent,{data:g,label:y}=n,{renderLabelFn:k}=r;return h$1("span",{class:e.e("label")},k?k({node:n,data:g}):y)}});const CASCADER_PANEL_INJECTION_KEY=Symbol(),_sfc_main$2X=defineComponent({name:"ElCascaderNode",components:{ElCheckbox,ElRadio,NodeContent:NodeContent$1,ElIcon,Check:check_default,Loading:loading_default,ArrowRight:arrow_right_default},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:n}){const r=inject(CASCADER_PANEL_INJECTION_KEY),g=useNamespace("cascader-node"),y=computed(()=>r.isHoverMenu),k=computed(()=>r.config.multiple),$=computed(()=>r.config.checkStrictly),V=computed(()=>{var Ce;return(Ce=r.checkedNodes[0])==null?void 0:Ce.uid}),L=computed(()=>e.node.isDisabled),z=computed(()=>e.node.isLeaf),j=computed(()=>$.value&&!z.value||!L.value),ae=computed(()=>re(r.expandingNode)),oe=computed(()=>$.value&&r.checkedNodes.some(re)),re=Ce=>{var Ie;const{level:ze,uid:Ue}=e.node;return((Ie=Ce?.pathNodes[ze-1])==null?void 0:Ie.uid)===Ue},ue=()=>{ae.value||r.expandNode(e.node)},le=Ce=>{const{node:Ie}=e;Ce!==Ie.checked&&r.handleCheckChange(Ie,Ce)},de=()=>{r.lazyLoad(e.node,()=>{z.value||ue()})},he=Ce=>{y.value&&(_e(),!z.value&&n("expand",Ce))},_e=()=>{const{node:Ce}=e;!j.value||Ce.loading||(Ce.loaded?ue():de())},xe=()=>{y.value&&!z.value||(z.value&&!L.value&&!$.value&&!k.value?$e(!0):_e())},Ne=Ce=>{$.value?(le(Ce),e.node.loaded&&ue()):$e(Ce)},$e=Ce=>{e.node.loaded?(le(Ce),!$.value&&ue()):de()};return{panel:r,isHoverMenu:y,multiple:k,checkStrictly:$,checkedNodeId:V,isDisabled:L,isLeaf:z,expandable:j,inExpandingPath:ae,inCheckedPath:oe,ns:g,handleHoverExpand:he,handleExpand:_e,handleClick:xe,handleCheck:$e,handleSelectCheck:Ne}}}),_hoisted_1$22=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],_hoisted_2$1K=createBaseVNode("span",null,null,-1);function _sfc_render$u(e,n,r,g,y,k){const $=resolveComponent("el-checkbox"),V=resolveComponent("el-radio"),L=resolveComponent("check"),z=resolveComponent("el-icon"),j=resolveComponent("node-content"),ae=resolveComponent("loading"),oe=resolveComponent("arrow-right");return openBlock(),createElementBlock("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:normalizeClass([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:n[2]||(n[2]=(...re)=>e.handleHoverExpand&&e.handleHoverExpand(...re)),onFocus:n[3]||(n[3]=(...re)=>e.handleHoverExpand&&e.handleHoverExpand(...re)),onClick:n[4]||(n[4]=(...re)=>e.handleClick&&e.handleClick(...re))},[createCommentVNode(" prefix "),e.multiple?(openBlock(),createBlock($,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:n[0]||(n[0]=withModifiers(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(openBlock(),createBlock(V,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:n[1]||(n[1]=withModifiers(()=>{},["stop"]))},{default:withCtx(()=>[createCommentVNode(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),_hoisted_2$1K]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(openBlock(),createBlock(z,{key:2,class:normalizeClass(e.ns.e("prefix"))},{default:withCtx(()=>[createVNode(L)]),_:1},8,["class"])):createCommentVNode("v-if",!0),createCommentVNode(" content "),createVNode(j),createCommentVNode(" postfix "),e.isLeaf?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:3},[e.node.loading?(openBlock(),createBlock(z,{key:0,class:normalizeClass([e.ns.is("loading"),e.ns.e("postfix")])},{default:withCtx(()=>[createVNode(ae)]),_:1},8,["class"])):(openBlock(),createBlock(z,{key:1,class:normalizeClass(["arrow-right",e.ns.e("postfix")])},{default:withCtx(()=>[createVNode(oe)]),_:1},8,["class"]))],64))],42,_hoisted_1$22)}var ElCascaderNode=_export_sfc$1(_sfc_main$2X,[["render",_sfc_render$u],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const _sfc_main$2W=defineComponent({name:"ElCascaderMenu",components:{Loading:loading_default,ElIcon,ElScrollbar,ElCascaderNode},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const n=getCurrentInstance(),r=useNamespace("cascader-menu"),{t:g}=useLocale(),y=generateId();let k=null,$=null;const V=inject(CASCADER_PANEL_INJECTION_KEY),L=ref(null),z=computed(()=>!e.nodes.length),j=computed(()=>!V.initialLoaded),ae=computed(()=>`cascader-menu-${y}-${e.index}`),oe=de=>{k=de.target},re=de=>{if(!(!V.isHoverMenu||!k||!L.value))if(k.contains(de.target)){ue();const he=n.vnode.el,{left:_e}=he.getBoundingClientRect(),{offsetWidth:xe,offsetHeight:Ne}=he,$e=de.clientX-_e,Ce=k.offsetTop,Ie=Ce+k.offsetHeight;L.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${$e} ${Ce} L${xe} 0 V${Ce} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${$e} ${Ie} L${xe} ${Ne} V${Ie} Z" />
        `}else $||($=window.setTimeout(le,V.config.hoverThreshold))},ue=()=>{$&&(clearTimeout($),$=null)},le=()=>{L.value&&(L.value.innerHTML="",ue())};return{ns:r,panel:V,hoverZone:L,isEmpty:z,isLoading:j,menuId:ae,t:g,handleExpand:oe,handleMouseMove:re,clearHoverZone:le}}});function _sfc_render$t(e,n,r,g,y,k){const $=resolveComponent("el-cascader-node"),V=resolveComponent("loading"),L=resolveComponent("el-icon"),z=resolveComponent("el-scrollbar");return openBlock(),createBlock(z,{key:e.menuId,tag:"ul",role:"menu",class:normalizeClass(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:withCtx(()=>{var j;return[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.nodes,ae=>(openBlock(),createBlock($,{key:ae.uid,node:ae,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(e.ns.e("empty-text"))},[createVNode(L,{size:"14",class:normalizeClass(e.ns.is("loading"))},{default:withCtx(()=>[createVNode(V)]),_:1},8,["class"]),createTextVNode(" "+toDisplayString$1(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(e.ns.e("empty-text"))},toDisplayString$1(e.t("el.cascader.noData")),3)):(j=e.panel)!=null&&j.isHoverMenu?(openBlock(),createElementBlock("svg",{key:2,ref:"hoverZone",class:normalizeClass(e.ns.e("hover-zone"))},null,2)):createCommentVNode("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var ElCascaderMenu=_export_sfc$1(_sfc_main$2W,[["render",_sfc_render$t],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]);let uid=0;const calculatePathNodes=e=>{const n=[e];let{parent:r}=e;for(;r;)n.unshift(r),r=r.parent;return n};let Node$2=class Dr{constructor(n,r,g,y=!1){this.data=n,this.config=r,this.parent=g,this.root=y,this.uid=uid++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:k,label:$,children:V}=r,L=n[V],z=calculatePathNodes(this);this.level=y?0:g?g.level+1:1,this.value=n[k],this.label=n[$],this.pathNodes=z,this.pathValues=z.map(j=>j.value),this.pathLabels=z.map(j=>j.label),this.childrenData=L,this.children=(L||[]).map(j=>new Dr(j,r,this)),this.loaded=!r.lazy||this.isLeaf||!isEmpty(L)}get isDisabled(){const{data:n,parent:r,config:g}=this,{disabled:y,checkStrictly:k}=g;return(isFunction$3(y)?y(n,this):!!n[y])||!k&&r?.isDisabled}get isLeaf(){const{data:n,config:r,childrenData:g,loaded:y}=this,{lazy:k,leaf:$}=r,V=isFunction$3($)?$(n,this):n[$];return isUndefined(V)?k&&!y?!1:!(Array.isArray(g)&&g.length):!!V}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(n){const{childrenData:r,children:g}=this,y=new Dr(n,this.config,this);return Array.isArray(r)?r.push(n):this.childrenData=[n],g.push(y),y}calcText(n,r){const g=n?this.pathLabels.join(r):this.label;return this.text=g,g}broadcast(n,...r){const g=`onParent${capitalize$1(n)}`;this.children.forEach(y=>{y&&(y.broadcast(n,...r),y[g]&&y[g](...r))})}emit(n,...r){const{parent:g}=this,y=`onChild${capitalize$1(n)}`;g&&(g[y]&&g[y](...r),g.emit(n,...r))}onParentCheck(n){this.isDisabled||this.setCheckState(n)}onChildCheck(){const{children:n}=this,r=n.filter(y=>!y.isDisabled),g=r.length?r.every(y=>y.checked):!1;this.setCheckState(g)}setCheckState(n){const r=this.children.length,g=this.children.reduce((y,k)=>{const $=k.checked?1:k.indeterminate?.5:0;return y+$},0);this.checked=this.loaded&&this.children.filter(y=>!y.isDisabled).every(y=>y.loaded&&y.checked)&&n,this.indeterminate=this.loaded&&g!==r&&g>0}doCheck(n){if(this.checked===n)return;const{checkStrictly:r,multiple:g}=this.config;r||!g?this.checked=n:(this.broadcast("check",n),this.setCheckState(n),this.emit("check"))}};const flatNodes=(e,n)=>e.reduce((r,g)=>(g.isLeaf?r.push(g):(!n&&r.push(g),r=r.concat(flatNodes(g.children,n))),r),[]);class Store{constructor(n,r){this.config=r;const g=(n||[]).map(y=>new Node$2(y,this.config));this.nodes=g,this.allNodes=flatNodes(g,!1),this.leafNodes=flatNodes(g,!0)}getNodes(){return this.nodes}getFlattedNodes(n){return n?this.leafNodes:this.allNodes}appendNode(n,r){const g=r?r.appendChild(n):new Node$2(n,this.config);r||this.nodes.push(g),this.allNodes.push(g),g.isLeaf&&this.leafNodes.push(g)}appendNodes(n,r){n.forEach(g=>this.appendNode(g,r))}getNodeByValue(n,r=!1){return!n&&n!==0?null:this.getFlattedNodes(r).find(y=>isEqual$1(y.value,n)||isEqual$1(y.pathValues,n))||null}getSameNode(n){return n&&this.getFlattedNodes(!1).find(({value:g,level:y})=>isEqual$1(n.value,g)&&n.level===y)||null}}const CommonProps=buildProps({modelValue:{type:definePropType([Number,String,Array])},options:{type:definePropType(Array),default:()=>[]},props:{type:definePropType(Object),default:()=>({})}}),DefaultProps={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:NOOP,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},useCascaderConfig=e=>computed(()=>({...DefaultProps,...e.props})),getMenuIndex=e=>{if(!e)return 0;const n=e.id.split("-");return Number(n[n.length-2])},checkNode=e=>{if(!e)return;const n=e.querySelector("input");n?n.click():isLeaf(e)&&e.click()},sortByOriginalOrder=(e,n)=>{const r=n.slice(0),g=r.map(k=>k.uid),y=e.reduce((k,$)=>{const V=g.indexOf($.uid);return V>-1&&(k.push($),r.splice(V,1),g.splice(V,1)),k},[]);return y.push(...r),y},_sfc_main$2V=defineComponent({name:"ElCascaderPanel",components:{ElCascaderMenu},props:{...CommonProps,border:{type:Boolean,default:!0},renderLabel:Function},emits:[UPDATE_MODEL_EVENT,CHANGE_EVENT,"close","expand-change"],setup(e,{emit:n,slots:r}){let g=!1;const y=useNamespace("cascader"),k=useCascaderConfig(e);let $=null;const V=ref(!0),L=ref([]),z=ref(null),j=ref([]),ae=ref(null),oe=ref([]),re=computed(()=>k.value.expandTrigger==="hover"),ue=computed(()=>e.renderLabel||r.default),le=()=>{const{options:Dt}=e,xn=k.value;g=!1,$=new Store(Dt,xn),j.value=[$.getNodes()],xn.lazy&&isEmpty(e.options)?(V.value=!1,de(void 0,jt=>{jt&&($=new Store(jt,xn),j.value=[$.getNodes()]),V.value=!0,ze(!1,!0)})):ze(!1,!0)},de=(Dt,xn)=>{const jt=k.value;Dt=Dt||new Node$2({},jt,void 0,!0),Dt.loading=!0;const Vn=Rn=>{const Tn=Dt,Ln=Tn.root?null:Tn;Rn&&$?.appendNodes(Rn,Ln),Tn.loading=!1,Tn.loaded=!0,Tn.childrenData=Tn.childrenData||[],xn&&xn(Rn)};jt.lazyLoad(Dt,Vn)},he=(Dt,xn)=>{var jt;const{level:Vn}=Dt,Rn=j.value.slice(0,Vn);let Tn;Dt.isLeaf?Tn=Dt.pathNodes[Vn-2]:(Tn=Dt,Rn.push(Dt.children)),((jt=ae.value)==null?void 0:jt.uid)!==Tn?.uid&&(ae.value=Dt,j.value=Rn,!xn&&n("expand-change",Dt?.pathValues||[]))},_e=(Dt,xn,jt=!0)=>{const{checkStrictly:Vn,multiple:Rn}=k.value,Tn=oe.value[0];g=!0,!Rn&&Tn?.doCheck(!1),Dt.doCheck(xn),Ie(),jt&&!Rn&&!Vn&&n("close"),!jt&&!Rn&&!Vn&&xe(Dt)},xe=Dt=>{Dt&&(Dt=Dt.parent,xe(Dt),Dt&&he(Dt))},Ne=Dt=>$?.getFlattedNodes(Dt),$e=Dt=>{var xn;return(xn=Ne(Dt))==null?void 0:xn.filter(jt=>jt.checked!==!1)},Ce=()=>{oe.value.forEach(Dt=>Dt.doCheck(!1)),Ie(),j.value=j.value.slice(0,1),ae.value=null,n("expand-change",[])},Ie=()=>{var Dt;const{checkStrictly:xn,multiple:jt}=k.value,Vn=oe.value,Rn=$e(!xn),Tn=sortByOriginalOrder(Vn,Rn),Ln=Tn.map(Sn=>Sn.valueByOption);oe.value=Tn,z.value=jt?Ln:(Dt=Ln[0])!=null?Dt:null},ze=(Dt=!1,xn=!1)=>{const{modelValue:jt}=e,{lazy:Vn,multiple:Rn,checkStrictly:Tn}=k.value,Ln=!Tn;if(!(!V.value||g||!xn&&isEqual$1(jt,z.value)))if(Vn&&!Dt){const An=unique(flattenDeep(castArray(jt))).map(In=>$?.getNodeByValue(In)).filter(In=>!!In&&!In.loaded&&!In.loading);An.length?An.forEach(In=>{de(In,()=>ze(!1,xn))}):ze(!0,xn)}else{const Sn=Rn?castArray(jt):[jt],An=unique(Sn.map(In=>$?.getNodeByValue(In,Ln)));Ue(An,xn),z.value=cloneDeep(jt)}},Ue=(Dt,xn=!0)=>{const{checkStrictly:jt}=k.value,Vn=oe.value,Rn=Dt.filter(Sn=>!!Sn&&(jt||Sn.isLeaf)),Tn=$?.getSameNode(ae.value),Ln=xn&&Tn||Rn[0];Ln?Ln.pathNodes.forEach(Sn=>he(Sn,!0)):ae.value=null,Vn.forEach(Sn=>Sn.doCheck(!1)),e.props.multiple?reactive(Rn).forEach(Sn=>Sn.doCheck(!0)):Rn.forEach(Sn=>Sn.doCheck(!0)),oe.value=Rn,nextTick(Pt)},Pt=()=>{isClient&&L.value.forEach(Dt=>{const xn=Dt?.$el;if(xn){const jt=xn.querySelector(`.${y.namespace.value}-scrollbar__wrap`),Vn=xn.querySelector(`.${y.b("node")}.${y.is("active")}`)||xn.querySelector(`.${y.b("node")}.in-active-path`);scrollIntoView$2(jt,Vn)}})},hn=Dt=>{const xn=Dt.target,{code:jt}=Dt;switch(jt){case EVENT_CODE.up:case EVENT_CODE.down:{Dt.preventDefault();const Vn=jt===EVENT_CODE.up?-1:1;focusNode(getSibling(xn,Vn,`.${y.b("node")}[tabindex="-1"]`));break}case EVENT_CODE.left:{Dt.preventDefault();const Vn=L.value[getMenuIndex(xn)-1],Rn=Vn?.$el.querySelector(`.${y.b("node")}[aria-expanded="true"]`);focusNode(Rn);break}case EVENT_CODE.right:{Dt.preventDefault();const Vn=L.value[getMenuIndex(xn)+1],Rn=Vn?.$el.querySelector(`.${y.b("node")}[tabindex="-1"]`);focusNode(Rn);break}case EVENT_CODE.enter:checkNode(xn);break}};return provide(CASCADER_PANEL_INJECTION_KEY,reactive({config:k,expandingNode:ae,checkedNodes:oe,isHoverMenu:re,initialLoaded:V,renderLabelFn:ue,lazyLoad:de,expandNode:he,handleCheckChange:_e})),watch([k,()=>e.options],le,{deep:!0,immediate:!0}),watch(()=>e.modelValue,()=>{g=!1,ze()},{deep:!0}),watch(()=>z.value,Dt=>{isEqual$1(Dt,e.modelValue)||(n(UPDATE_MODEL_EVENT,Dt),n(CHANGE_EVENT,Dt))}),onBeforeUpdate(()=>L.value=[]),onMounted(()=>!isEmpty(e.modelValue)&&ze()),{ns:y,menuList:L,menus:j,checkedNodes:oe,handleKeyDown:hn,handleCheckChange:_e,getFlattedNodes:Ne,getCheckedNodes:$e,clearCheckedNodes:Ce,calculateCheckedValue:Ie,scrollToExpandingNode:Pt}}});function _sfc_render$s(e,n,r,g,y,k){const $=resolveComponent("el-cascader-menu");return openBlock(),createElementBlock("div",{class:normalizeClass([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:n[0]||(n[0]=(...V)=>e.handleKeyDown&&e.handleKeyDown(...V))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.menus,(V,L)=>(openBlock(),createBlock($,{key:L,ref_for:!0,ref:z=>e.menuList[L]=z,index:L,nodes:[...V]},null,8,["index","nodes"]))),128))],34)}var CascaderPanel=_export_sfc$1(_sfc_main$2V,[["render",_sfc_render$s],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);CascaderPanel.install=e=>{e.component(CascaderPanel.name,CascaderPanel)};const _CascaderPanel=CascaderPanel,ElCascaderPanel=_CascaderPanel,tagProps=buildProps({type:{type:String,values:["success","info","warning","danger",""],default:""},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:{type:String,default:""},size:{type:String,values:componentSizes,default:""},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),tagEmits={close:e=>e instanceof MouseEvent,click:e=>e instanceof MouseEvent},__default__$14=defineComponent({name:"ElTag"}),_sfc_main$2U=defineComponent({...__default__$14,props:tagProps,emits:tagEmits,setup(e,{emit:n}){const r=e,g=useFormSize(),y=useNamespace("tag"),k=computed(()=>{const{type:L,hit:z,effect:j,closable:ae,round:oe}=r;return[y.b(),y.is("closable",ae),y.m(L),y.m(g.value),y.m(j),y.is("hit",z),y.is("round",oe)]}),$=L=>{n("close",L)},V=L=>{n("click",L)};return(L,z)=>L.disableTransitions?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(k)),style:normalizeStyle({backgroundColor:L.color}),onClick:V},[createBaseVNode("span",{class:normalizeClass(unref(y).e("content"))},[renderSlot(L.$slots,"default")],2),L.closable?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(y).e("close")),onClick:withModifiers($,["stop"])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],6)):(openBlock(),createBlock(Transition,{key:1,name:`${unref(y).namespace.value}-zoom-in-center`,appear:""},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(unref(k)),style:normalizeStyle({backgroundColor:L.color}),onClick:V},[createBaseVNode("span",{class:normalizeClass(unref(y).e("content"))},[renderSlot(L.$slots,"default")],2),L.closable?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(y).e("close")),onClick:withModifiers($,["stop"])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],6)]),_:3},8,["name"]))}});var Tag$1=_export_sfc$1(_sfc_main$2U,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tag/src/tag.vue"]]);const ElTag=withInstall(Tag$1),cascaderProps=buildProps({...CommonProps,size:useSizeProp,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:definePropType(Function),default:(e,n)=>e.text.includes(n)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:definePropType(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:useTooltipContentProps.teleported,tagType:{...tagProps.type,default:"info"},validateEvent:{type:Boolean,default:!0}}),cascaderEmits={[UPDATE_MODEL_EVENT]:e=>!!e||e===null,[CHANGE_EVENT]:e=>!!e||e===null,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,visibleChange:e=>isBoolean$1(e),expandChange:e=>!!e,removeTag:e=>!!e},_hoisted_1$21={key:0},_hoisted_2$1J=["placeholder","onKeydown"],_hoisted_3$15=["onClick"],COMPONENT_NAME$e="ElCascader",__default__$13=defineComponent({name:COMPONENT_NAME$e}),_sfc_main$2T=defineComponent({...__default__$13,props:cascaderProps,emits:cascaderEmits,setup(e,{expose:n,emit:r}){const g=e,y={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:_n})=>{const{modifiersData:vn,placement:wn}=_n;["right","left","bottom","top"].includes(wn)||(vn.arrow.x=35)},requires:["arrow"]}]},k=useAttrs$1();let $=0,V=0;const L=useNamespace("cascader"),z=useNamespace("input"),{t:j}=useLocale(),{form:ae,formItem:oe}=useFormItem(),re=ref(null),ue=ref(null),le=ref(null),de=ref(null),he=ref(null),_e=ref(!1),xe=ref(!1),Ne=ref(!1),$e=ref(!1),Ce=ref(""),Ie=ref(""),ze=ref([]),Ue=ref([]),Pt=ref([]),hn=ref(!1),Dt=computed(()=>k.style),xn=computed(()=>g.disabled||ae?.disabled),jt=computed(()=>g.placeholder||j("el.cascader.placeholder")),Vn=computed(()=>Ie.value||ze.value.length>0||hn.value?"":jt.value),Rn=useFormSize(),Tn=computed(()=>["small"].includes(Rn.value)?"small":"default"),Ln=computed(()=>!!g.props.multiple),Sn=computed(()=>!g.filterable||Ln.value),An=computed(()=>Ln.value?Ie.value:Ce.value),In=computed(()=>{var _n;return((_n=de.value)==null?void 0:_n.checkedNodes)||[]}),Mn=computed(()=>!g.clearable||xn.value||Ne.value||!xe.value?!1:!!In.value.length),ra=computed(()=>{const{showAllLevels:_n,separator:vn}=g,wn=In.value;return wn.length?Ln.value?"":wn[0].calcText(_n,vn):""}),da=computed({get(){return cloneDeep(g.modelValue)},set(_n){r(UPDATE_MODEL_EVENT,_n),r(CHANGE_EVENT,_n),g.validateEvent&&oe?.validate("change").catch(vn=>void 0)}}),ua=computed(()=>[L.b(),L.m(Rn.value),L.is("disabled",xn.value),k.class]),aa=computed(()=>[z.e("icon"),"icon-arrow-down",L.is("reverse",_e.value)]),Nn=computed(()=>L.is("focus",_e.value||$e.value)),En=computed(()=>{var _n,vn;return(vn=(_n=re.value)==null?void 0:_n.popperRef)==null?void 0:vn.contentRef}),Zn=_n=>{var vn,wn,Cn;xn.value||(_n=_n??!_e.value,_n!==_e.value&&(_e.value=_n,(wn=(vn=ue.value)==null?void 0:vn.input)==null||wn.setAttribute("aria-expanded",`${_n}`),_n?(ha(),nextTick((Cn=de.value)==null?void 0:Cn.scrollToExpandingNode)):g.filterable&&la(),r("visibleChange",_n)))},ha=()=>{nextTick(()=>{var _n;(_n=re.value)==null||_n.updatePopper()})},xa=()=>{Ne.value=!1},sa=_n=>{const{showAllLevels:vn,separator:wn}=g;return{node:_n,key:_n.uid,text:_n.calcText(vn,wn),hitState:!1,closable:!xn.value&&!_n.isDisabled,isCollapseTag:!1}},Hn=_n=>{var vn;const wn=_n.node;wn.doCheck(!1),(vn=de.value)==null||vn.calculateCheckedValue(),r("removeTag",wn.valueByOption)},bn=()=>{if(!Ln.value)return;const _n=In.value,vn=[],wn=[];if(_n.forEach(Cn=>wn.push(sa(Cn))),Ue.value=wn,_n.length){_n.slice(0,g.maxCollapseTags).forEach(zn=>vn.push(sa(zn)));const Cn=_n.slice(g.maxCollapseTags),Bn=Cn.length;Bn&&(g.collapseTags?vn.push({key:-1,text:`+ ${Bn}`,closable:!1,isCollapseTag:!0}):Cn.forEach(zn=>vn.push(sa(zn))))}ze.value=vn},Xn=()=>{var _n,vn;const{filterMethod:wn,showAllLevels:Cn,separator:Bn}=g,zn=(vn=(_n=de.value)==null?void 0:_n.getFlattedNodes(!g.props.checkStrictly))==null?void 0:vn.filter(Fn=>Fn.isDisabled?!1:(Fn.calcText(Cn,Bn),wn(Fn,An.value)));Ln.value&&(ze.value.forEach(Fn=>{Fn.hitState=!1}),Ue.value.forEach(Fn=>{Fn.hitState=!1})),Ne.value=!0,Pt.value=zn,ha()},$n=()=>{var _n;let vn;Ne.value&&he.value?vn=he.value.$el.querySelector(`.${L.e("suggestion-item")}`):vn=(_n=de.value)==null?void 0:_n.$el.querySelector(`.${L.b("node")}[tabindex="-1"]`),vn&&(vn.focus(),!Ne.value&&vn.click())},kt=()=>{var _n,vn;const wn=(_n=ue.value)==null?void 0:_n.input,Cn=le.value,Bn=(vn=he.value)==null?void 0:vn.$el;if(!(!isClient||!wn)){if(Bn){const zn=Bn.querySelector(`.${L.e("suggestion-list")}`);zn.style.minWidth=`${wn.offsetWidth}px`}if(Cn){const{offsetHeight:zn}=Cn,Fn=ze.value.length>0?`${Math.max(zn+6,$)}px`:`${$}px`;wn.style.height=Fn,ha()}}},At=_n=>{var vn;return(vn=de.value)==null?void 0:vn.getCheckedNodes(_n)},Dn=_n=>{ha(),r("expandChange",_n)},Qn=_n=>{var vn;const wn=(vn=_n.target)==null?void 0:vn.value;if(_n.type==="compositionend")hn.value=!1,nextTick(()=>Et(wn));else{const Cn=wn[wn.length-1]||"";hn.value=!isKorean(Cn)}},oa=_n=>{if(!hn.value)switch(_n.code){case EVENT_CODE.enter:Zn();break;case EVENT_CODE.down:Zn(!0),nextTick($n),_n.preventDefault();break;case EVENT_CODE.esc:_e.value===!0&&(_n.preventDefault(),_n.stopPropagation(),Zn(!1));break;case EVENT_CODE.tab:Zn(!1);break}},na=()=>{var _n;(_n=de.value)==null||_n.clearCheckedNodes(),!_e.value&&g.filterable&&la(),Zn(!1)},la=()=>{const{value:_n}=ra;Ce.value=_n,Ie.value=_n},ma=_n=>{var vn,wn;const{checked:Cn}=_n;Ln.value?(vn=de.value)==null||vn.handleCheckChange(_n,!Cn,!1):(!Cn&&((wn=de.value)==null||wn.handleCheckChange(_n,!0,!1)),Zn(!1))},ca=_n=>{const vn=_n.target,{code:wn}=_n;switch(wn){case EVENT_CODE.up:case EVENT_CODE.down:{const Cn=wn===EVENT_CODE.up?-1:1;focusNode(getSibling(vn,Cn,`.${L.e("suggestion-item")}[tabindex="-1"]`));break}case EVENT_CODE.enter:vn.click();break}},pe=()=>{const _n=ze.value,vn=_n[_n.length-1];V=Ie.value?0:V+1,!(!vn||!V||g.collapseTags&&_n.length>1)&&(vn.hitState?Hn(vn):vn.hitState=!0)},Oe=_n=>{const vn=_n.target,wn=L.e("search-input");vn.className===wn&&($e.value=!0),r("focus",_n)},Ve=_n=>{$e.value=!1,r("blur",_n)},qe=debounce(()=>{const{value:_n}=An;if(!_n)return;const vn=g.beforeFilter(_n);isPromise(vn)?vn.then(Xn).catch(()=>{}):vn!==!1?Xn():xa()},g.debounce),Et=(_n,vn)=>{!_e.value&&Zn(!0),!vn?.isComposing&&(_n?qe():xa())},Lt=_n=>Number.parseFloat(useCssVar(z.cssVarName("input-height"),_n).value)-2;return watch(Ne,ha),watch([In,xn],bn),watch(ze,()=>{nextTick(()=>kt())}),watch(Rn,async()=>{await nextTick();const _n=ue.value.input;$=Lt(_n)||$,kt()}),watch(ra,la,{immediate:!0}),onMounted(()=>{const _n=ue.value.input,vn=Lt(_n);$=_n.offsetHeight||vn,useResizeObserver(_n,kt)}),n({getCheckedNodes:At,cascaderPanelRef:de,togglePopperVisible:Zn,contentRef:En}),(_n,vn)=>(openBlock(),createBlock(unref(ElTooltip),{ref_key:"tooltipRef",ref:re,visible:_e.value,teleported:_n.teleported,"popper-class":[unref(L).e("dropdown"),_n.popperClass],"popper-options":y,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${unref(L).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:xa},{default:withCtx(()=>[withDirectives((openBlock(),createElementBlock("div",{class:normalizeClass(unref(ua)),style:normalizeStyle(unref(Dt)),onClick:vn[5]||(vn[5]=()=>Zn(unref(Sn)?void 0:!0)),onKeydown:oa,onMouseenter:vn[6]||(vn[6]=wn=>xe.value=!0),onMouseleave:vn[7]||(vn[7]=wn=>xe.value=!1)},[createVNode(unref(ElInput),{ref_key:"input",ref:ue,modelValue:Ce.value,"onUpdate:modelValue":vn[1]||(vn[1]=wn=>Ce.value=wn),placeholder:unref(Vn),readonly:unref(Sn),disabled:unref(xn),"validate-event":!1,size:unref(Rn),class:normalizeClass(unref(Nn)),tabindex:unref(Ln)&&_n.filterable&&!unref(xn)?-1:void 0,onCompositionstart:Qn,onCompositionupdate:Qn,onCompositionend:Qn,onFocus:Oe,onBlur:Ve,onInput:Et},{suffix:withCtx(()=>[unref(Mn)?(openBlock(),createBlock(unref(ElIcon),{key:"clear",class:normalizeClass([unref(z).e("icon"),"icon-circle-close"]),onClick:withModifiers(na,["stop"])},{default:withCtx(()=>[createVNode(unref(circle_close_default))]),_:1},8,["class","onClick"])):(openBlock(),createBlock(unref(ElIcon),{key:"arrow-down",class:normalizeClass(unref(aa)),onClick:vn[0]||(vn[0]=withModifiers(wn=>Zn(),["stop"]))},{default:withCtx(()=>[createVNode(unref(arrow_down_default))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),unref(Ln)?(openBlock(),createElementBlock("div",{key:0,ref_key:"tagWrapper",ref:le,class:normalizeClass(unref(L).e("tags"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(ze.value,wn=>(openBlock(),createBlock(unref(ElTag),{key:wn.key,type:_n.tagType,size:unref(Tn),hit:wn.hitState,closable:wn.closable,"disable-transitions":"",onClose:Cn=>Hn(wn)},{default:withCtx(()=>[wn.isCollapseTag===!1?(openBlock(),createElementBlock("span",_hoisted_1$21,toDisplayString$1(wn.text),1)):(openBlock(),createBlock(unref(ElTooltip),{key:1,disabled:_e.value||!_n.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(wn.text),1)]),content:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(unref(L).e("collapse-tags"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(Ue.value.slice(_n.maxCollapseTags),(Cn,Bn)=>(openBlock(),createElementBlock("div",{key:Bn,class:normalizeClass(unref(L).e("collapse-tag"))},[(openBlock(),createBlock(unref(ElTag),{key:Cn.key,class:"in-tooltip",type:_n.tagType,size:unref(Tn),hit:Cn.hitState,closable:Cn.closable,"disable-transitions":"",onClose:zn=>Hn(Cn)},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(Cn.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),_n.filterable&&!unref(xn)?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":vn[2]||(vn[2]=wn=>Ie.value=wn),type:"text",class:normalizeClass(unref(L).e("search-input")),placeholder:unref(ra)?"":unref(jt),onInput:vn[3]||(vn[3]=wn=>Et(Ie.value,wn)),onClick:vn[4]||(vn[4]=withModifiers(wn=>Zn(!0),["stop"])),onKeydown:withKeys(pe,["delete"]),onCompositionstart:Qn,onCompositionupdate:Qn,onCompositionend:Qn,onFocus:Oe,onBlur:Ve},null,42,_hoisted_2$1J)),[[vModelText,Ie.value]]):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0)],38)),[[unref(ClickOutside),()=>Zn(!1),unref(En)]])]),content:withCtx(()=>[withDirectives(createVNode(unref(_CascaderPanel),{ref_key:"cascaderPanelRef",ref:de,modelValue:unref(da),"onUpdate:modelValue":vn[8]||(vn[8]=wn=>isRef(da)?da.value=wn:null),options:_n.options,props:g.props,border:!1,"render-label":_n.$slots.default,onExpandChange:Dn,onClose:vn[9]||(vn[9]=wn=>_n.$nextTick(()=>Zn(!1)))},null,8,["modelValue","options","props","render-label"]),[[vShow,!Ne.value]]),_n.filterable?withDirectives((openBlock(),createBlock(unref(ElScrollbar),{key:0,ref_key:"suggestionPanel",ref:he,tag:"ul",class:normalizeClass(unref(L).e("suggestion-panel")),"view-class":unref(L).e("suggestion-list"),onKeydown:ca},{default:withCtx(()=>[Pt.value.length?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(Pt.value,wn=>(openBlock(),createElementBlock("li",{key:wn.uid,class:normalizeClass([unref(L).e("suggestion-item"),unref(L).is("checked",wn.checked)]),tabindex:-1,onClick:Cn=>ma(wn)},[createBaseVNode("span",null,toDisplayString$1(wn.text),1),wn.checked?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[createVNode(unref(check_default))]),_:1})):createCommentVNode("v-if",!0)],10,_hoisted_3$15))),128)):renderSlot(_n.$slots,"empty",{key:1},()=>[createBaseVNode("li",{class:normalizeClass(unref(L).e("empty-text"))},toDisplayString$1(unref(j)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[vShow,Ne.value]]):createCommentVNode("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var Cascader=_export_sfc$1(_sfc_main$2T,[["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/cascader.vue"]]);Cascader.install=e=>{e.component(Cascader.name,Cascader)};const _Cascader=Cascader,ElCascader=_Cascader,checkTagProps=buildProps({checked:{type:Boolean,default:!1}}),checkTagEmits={"update:checked":e=>isBoolean$1(e),[CHANGE_EVENT]:e=>isBoolean$1(e)},__default__$12=defineComponent({name:"ElCheckTag"}),_sfc_main$2S=defineComponent({...__default__$12,props:checkTagProps,emits:checkTagEmits,setup(e,{emit:n}){const r=e,g=useNamespace("check-tag"),y=computed(()=>[g.b(),g.is("checked",r.checked)]),k=()=>{const $=!r.checked;n(CHANGE_EVENT,$),n("update:checked",$)};return($,V)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(y)),onClick:k},[renderSlot($.$slots,"default")],2))}});var CheckTag=_export_sfc$1(_sfc_main$2S,[["__file","/home/runner/work/element-plus/element-plus/packages/components/check-tag/src/check-tag.vue"]]);const ElCheckTag=withInstall(CheckTag),rowContextKey=Symbol("rowContextKey"),RowJustify=["start","center","end","space-around","space-between","space-evenly"],RowAlign=["top","middle","bottom"],rowProps=buildProps({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:RowJustify,default:"start"},align:{type:String,values:RowAlign}}),__default__$11=defineComponent({name:"ElRow"}),_sfc_main$2R=defineComponent({...__default__$11,props:rowProps,setup(e){const n=e,r=useNamespace("row"),g=computed(()=>n.gutter);provide(rowContextKey,{gutter:g});const y=computed(()=>{const $={};return n.gutter&&($.marginRight=$.marginLeft=`-${n.gutter/2}px`),$}),k=computed(()=>[r.b(),r.is(`justify-${n.justify}`,n.justify!=="start"),r.is(`align-${n.align}`,!!n.align)]);return($,V)=>(openBlock(),createBlock(resolveDynamicComponent($.tag),{class:normalizeClass(unref(k)),style:normalizeStyle(unref(y))},{default:withCtx(()=>[renderSlot($.$slots,"default")]),_:3},8,["class","style"]))}});var Row=_export_sfc$1(_sfc_main$2R,[["__file","/home/runner/work/element-plus/element-plus/packages/components/row/src/row.vue"]]);const ElRow=withInstall(Row),colProps=buildProps({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:definePropType([Number,Object]),default:()=>mutable({})},sm:{type:definePropType([Number,Object]),default:()=>mutable({})},md:{type:definePropType([Number,Object]),default:()=>mutable({})},lg:{type:definePropType([Number,Object]),default:()=>mutable({})},xl:{type:definePropType([Number,Object]),default:()=>mutable({})}}),__default__$10=defineComponent({name:"ElCol"}),_sfc_main$2Q=defineComponent({...__default__$10,props:colProps,setup(e){const n=e,{gutter:r}=inject(rowContextKey,{gutter:computed(()=>0)}),g=useNamespace("col"),y=computed(()=>{const $={};return r.value&&($.paddingLeft=$.paddingRight=`${r.value/2}px`),$}),k=computed(()=>{const $=[];return["span","offset","pull","push"].forEach(z=>{const j=n[z];isNumber$1(j)&&(z==="span"?$.push(g.b(`${n[z]}`)):j>0&&$.push(g.b(`${z}-${n[z]}`)))}),["xs","sm","md","lg","xl"].forEach(z=>{isNumber$1(n[z])?$.push(g.b(`${z}-${n[z]}`)):isObject$3(n[z])&&Object.entries(n[z]).forEach(([j,ae])=>{$.push(j!=="span"?g.b(`${z}-${j}-${ae}`):g.b(`${z}-${ae}`))})}),r.value&&$.push(g.is("guttered")),[g.b(),$]});return($,V)=>(openBlock(),createBlock(resolveDynamicComponent($.tag),{class:normalizeClass(unref(k)),style:normalizeStyle(unref(y))},{default:withCtx(()=>[renderSlot($.$slots,"default")]),_:3},8,["class","style"]))}});var Col=_export_sfc$1(_sfc_main$2Q,[["__file","/home/runner/work/element-plus/element-plus/packages/components/col/src/col.vue"]]);const ElCol=withInstall(Col),emitChangeFn=e=>typeof isNumber$1(e),collapseProps=buildProps({accordion:Boolean,modelValue:{type:definePropType([Array,String,Number]),default:()=>mutable([])}}),collapseEmits={[UPDATE_MODEL_EVENT]:emitChangeFn,[CHANGE_EVENT]:emitChangeFn},collapseContextKey=Symbol("collapseContextKey"),useCollapse=(e,n)=>{const r=ref(castArray$1(e.modelValue)),g=k=>{r.value=k;const $=e.accordion?r.value[0]:r.value;n(UPDATE_MODEL_EVENT,$),n(CHANGE_EVENT,$)},y=k=>{if(e.accordion)g([r.value[0]===k?"":k]);else{const $=[...r.value],V=$.indexOf(k);V>-1?$.splice(V,1):$.push(k),g($)}};return watch(()=>e.modelValue,()=>r.value=castArray$1(e.modelValue),{deep:!0}),provide(collapseContextKey,{activeNames:r,handleItemClick:y}),{activeNames:r,setActiveNames:g}},useCollapseDOM=()=>{const e=useNamespace("collapse");return{rootKls:computed(()=>e.b())}},__default__$$=defineComponent({name:"ElCollapse"}),_sfc_main$2P=defineComponent({...__default__$$,props:collapseProps,emits:collapseEmits,setup(e,{expose:n,emit:r}){const g=e,{activeNames:y,setActiveNames:k}=useCollapse(g,r),{rootKls:$}=useCollapseDOM();return n({activeNames:y,setActiveNames:k}),(V,L)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref($)),role:"tablist","aria-multiselectable":"true"},[renderSlot(V.$slots,"default")],2))}});var Collapse=_export_sfc$1(_sfc_main$2P,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse.vue"]]);const __default__$_=defineComponent({name:"ElCollapseTransition"}),_sfc_main$2O=defineComponent({...__default__$_,setup(e){const n=useNamespace("collapse-transition"),r=y=>{y.style.maxHeight="",y.style.overflow=y.dataset.oldOverflow,y.style.paddingTop=y.dataset.oldPaddingTop,y.style.paddingBottom=y.dataset.oldPaddingBottom},g={beforeEnter(y){y.dataset||(y.dataset={}),y.dataset.oldPaddingTop=y.style.paddingTop,y.dataset.oldPaddingBottom=y.style.paddingBottom,y.style.maxHeight=0,y.style.paddingTop=0,y.style.paddingBottom=0},enter(y){y.dataset.oldOverflow=y.style.overflow,y.scrollHeight!==0?y.style.maxHeight=`${y.scrollHeight}px`:y.style.maxHeight=0,y.style.paddingTop=y.dataset.oldPaddingTop,y.style.paddingBottom=y.dataset.oldPaddingBottom,y.style.overflow="hidden"},afterEnter(y){y.style.maxHeight="",y.style.overflow=y.dataset.oldOverflow},enterCancelled(y){r(y)},beforeLeave(y){y.dataset||(y.dataset={}),y.dataset.oldPaddingTop=y.style.paddingTop,y.dataset.oldPaddingBottom=y.style.paddingBottom,y.dataset.oldOverflow=y.style.overflow,y.style.maxHeight=`${y.scrollHeight}px`,y.style.overflow="hidden"},leave(y){y.scrollHeight!==0&&(y.style.maxHeight=0,y.style.paddingTop=0,y.style.paddingBottom=0)},afterLeave(y){r(y)},leaveCancelled(y){r(y)}};return(y,k)=>(openBlock(),createBlock(Transition,mergeProps({name:unref(n).b()},toHandlers(g)),{default:withCtx(()=>[renderSlot(y.$slots,"default")]),_:3},16,["name"]))}});var CollapseTransition=_export_sfc$1(_sfc_main$2O,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse-transition/src/collapse-transition.vue"]]);CollapseTransition.install=e=>{e.component(CollapseTransition.name,CollapseTransition)};const _CollapseTransition=CollapseTransition,ElCollapseTransition=_CollapseTransition,collapseItemProps=buildProps({title:{type:String,default:""},name:{type:definePropType([String,Number]),default:()=>generateId()},disabled:Boolean}),useCollapseItem=e=>{const n=inject(collapseContextKey),r=ref(!1),g=ref(!1),y=ref(generateId()),k=computed(()=>n?.activeNames.value.includes(e.name));return{focusing:r,id:y,isActive:k,handleFocus:()=>{setTimeout(()=>{g.value?g.value=!1:r.value=!0},50)},handleHeaderClick:()=>{e.disabled||(n?.handleItemClick(e.name),r.value=!1,g.value=!0)},handleEnterClick:()=>{n?.handleItemClick(e.name)}}},useCollapseItemDOM=(e,{focusing:n,isActive:r,id:g})=>{const y=useNamespace("collapse"),k=computed(()=>[y.b("item"),y.is("active",unref(r)),y.is("disabled",e.disabled)]),$=computed(()=>[y.be("item","header"),y.is("active",unref(r)),{focusing:unref(n)&&!e.disabled}]),V=computed(()=>[y.be("item","arrow"),y.is("active",unref(r))]),L=computed(()=>y.be("item","wrap")),z=computed(()=>y.be("item","content")),j=computed(()=>y.b(`content-${unref(g)}`)),ae=computed(()=>y.b(`head-${unref(g)}`));return{arrowKls:V,headKls:$,rootKls:k,itemWrapperKls:L,itemContentKls:z,scopedContentId:j,scopedHeadId:ae}},_hoisted_1$20=["aria-expanded","aria-controls","aria-describedby"],_hoisted_2$1I=["id","tabindex"],_hoisted_3$14=["id","aria-hidden","aria-labelledby"],__default__$Z=defineComponent({name:"ElCollapseItem"}),_sfc_main$2N=defineComponent({...__default__$Z,props:collapseItemProps,setup(e,{expose:n}){const r=e,{focusing:g,id:y,isActive:k,handleFocus:$,handleHeaderClick:V,handleEnterClick:L}=useCollapseItem(r),{arrowKls:z,headKls:j,rootKls:ae,itemWrapperKls:oe,itemContentKls:re,scopedContentId:ue,scopedHeadId:le}=useCollapseItemDOM(r,{focusing:g,isActive:k,id:y});return n({isActive:k}),(de,he)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(ae))},[createBaseVNode("div",{role:"tab","aria-expanded":unref(k),"aria-controls":unref(ue),"aria-describedby":unref(ue)},[createBaseVNode("div",{id:unref(le),class:normalizeClass(unref(j)),role:"button",tabindex:de.disabled?-1:0,onClick:he[0]||(he[0]=(..._e)=>unref(V)&&unref(V)(..._e)),onKeypress:he[1]||(he[1]=withKeys(withModifiers((..._e)=>unref(L)&&unref(L)(..._e),["stop","prevent"]),["space","enter"])),onFocus:he[2]||(he[2]=(..._e)=>unref($)&&unref($)(..._e)),onBlur:he[3]||(he[3]=_e=>g.value=!1)},[renderSlot(de.$slots,"title",{},()=>[createTextVNode(toDisplayString$1(de.title),1)]),createVNode(unref(ElIcon),{class:normalizeClass(unref(z))},{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1},8,["class"])],42,_hoisted_2$1I)],8,_hoisted_1$20),createVNode(unref(_CollapseTransition),null,{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:unref(ue),class:normalizeClass(unref(oe)),role:"tabpanel","aria-hidden":!unref(k),"aria-labelledby":unref(le)},[createBaseVNode("div",{class:normalizeClass(unref(re))},[renderSlot(de.$slots,"default")],2)],10,_hoisted_3$14),[[vShow,unref(k)]])]),_:3})],2))}});var CollapseItem=_export_sfc$1(_sfc_main$2N,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse-item.vue"]]);const ElCollapse=withInstall(Collapse,{CollapseItem}),ElCollapseItem=withNoopInstall(CollapseItem),alphaSliderProps=buildProps({color:{type:definePropType(Object),required:!0},vertical:{type:Boolean,default:!1}});let isDragging=!1;function draggable(e,n){if(!isClient)return;const r=function(k){var $;($=n.drag)==null||$.call(n,k)},g=function(k){var $;document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",g),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",g),document.onselectstart=null,document.ondragstart=null,isDragging=!1,($=n.end)==null||$.call(n,k)},y=function(k){var $;isDragging||(k.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",r),document.addEventListener("mouseup",g),document.addEventListener("touchmove",r),document.addEventListener("touchend",g),isDragging=!0,($=n.start)==null||$.call(n,k))};e.addEventListener("mousedown",y),e.addEventListener("touchstart",y)}const useAlphaSlider=e=>{const n=getCurrentInstance(),r=shallowRef(),g=shallowRef();function y($){$.target!==r.value&&k($)}function k($){if(!g.value||!r.value)return;const L=n.vnode.el.getBoundingClientRect(),{clientX:z,clientY:j}=getClientXY($);if(e.vertical){let ae=j-L.top;ae=Math.max(r.value.offsetHeight/2,ae),ae=Math.min(ae,L.height-r.value.offsetHeight/2),e.color.set("alpha",Math.round((ae-r.value.offsetHeight/2)/(L.height-r.value.offsetHeight)*100))}else{let ae=z-L.left;ae=Math.max(r.value.offsetWidth/2,ae),ae=Math.min(ae,L.width-r.value.offsetWidth/2),e.color.set("alpha",Math.round((ae-r.value.offsetWidth/2)/(L.width-r.value.offsetWidth)*100))}}return{thumb:r,bar:g,handleDrag:k,handleClick:y}},useAlphaSliderDOM=(e,{bar:n,thumb:r,handleDrag:g})=>{const y=getCurrentInstance(),k=useNamespace("color-alpha-slider"),$=ref(0),V=ref(0),L=ref();function z(){if(!r.value||e.vertical)return 0;const _e=y.vnode.el,xe=e.color.get("alpha");return _e?Math.round(xe*(_e.offsetWidth-r.value.offsetWidth/2)/100):0}function j(){if(!r.value)return 0;const _e=y.vnode.el;if(!e.vertical)return 0;const xe=e.color.get("alpha");return _e?Math.round(xe*(_e.offsetHeight-r.value.offsetHeight/2)/100):0}function ae(){if(e.color&&e.color.value){const{r:_e,g:xe,b:Ne}=e.color.toRgb();return`linear-gradient(to right, rgba(${_e}, ${xe}, ${Ne}, 0) 0%, rgba(${_e}, ${xe}, ${Ne}, 1) 100%)`}return""}function oe(){$.value=z(),V.value=j(),L.value=ae()}onMounted(()=>{if(!n.value||!r.value)return;const _e={drag:xe=>{g(xe)},end:xe=>{g(xe)}};draggable(n.value,_e),draggable(r.value,_e),oe()}),watch(()=>e.color.get("alpha"),()=>oe()),watch(()=>e.color.value,()=>oe());const re=computed(()=>[k.b(),k.is("vertical",e.vertical)]),ue=computed(()=>k.e("bar")),le=computed(()=>k.e("thumb")),de=computed(()=>({background:L.value})),he=computed(()=>({left:addUnit($.value),top:addUnit(V.value)}));return{rootKls:re,barKls:ue,barStyle:de,thumbKls:le,thumbStyle:he,update:oe}},COMPONENT_NAME$d="ElColorAlphaSlider",__default__$Y=defineComponent({name:COMPONENT_NAME$d}),_sfc_main$2M=defineComponent({...__default__$Y,props:alphaSliderProps,setup(e,{expose:n}){const r=e,{bar:g,thumb:y,handleDrag:k,handleClick:$}=useAlphaSlider(r),{rootKls:V,barKls:L,barStyle:z,thumbKls:j,thumbStyle:ae,update:oe}=useAlphaSliderDOM(r,{bar:g,thumb:y,handleDrag:k});return n({update:oe,bar:g,thumb:y}),(re,ue)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(V))},[createBaseVNode("div",{ref_key:"bar",ref:g,class:normalizeClass(unref(L)),style:normalizeStyle(unref(z)),onClick:ue[0]||(ue[0]=(...le)=>unref($)&&unref($)(...le))},null,6),createBaseVNode("div",{ref_key:"thumb",ref:y,class:normalizeClass(unref(j)),style:normalizeStyle(unref(ae))},null,6)],2))}});var AlphaSlider=_export_sfc$1(_sfc_main$2M,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/alpha-slider.vue"]]);const _sfc_main$2L=defineComponent({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const n=useNamespace("color-hue-slider"),r=getCurrentInstance(),g=ref(),y=ref(),k=ref(0),$=ref(0),V=computed(()=>e.color.get("hue"));watch(()=>V.value,()=>{oe()});function L(re){re.target!==g.value&&z(re)}function z(re){if(!y.value||!g.value)return;const le=r.vnode.el.getBoundingClientRect(),{clientX:de,clientY:he}=getClientXY(re);let _e;if(e.vertical){let xe=he-le.top;xe=Math.min(xe,le.height-g.value.offsetHeight/2),xe=Math.max(g.value.offsetHeight/2,xe),_e=Math.round((xe-g.value.offsetHeight/2)/(le.height-g.value.offsetHeight)*360)}else{let xe=de-le.left;xe=Math.min(xe,le.width-g.value.offsetWidth/2),xe=Math.max(g.value.offsetWidth/2,xe),_e=Math.round((xe-g.value.offsetWidth/2)/(le.width-g.value.offsetWidth)*360)}e.color.set("hue",_e)}function j(){if(!g.value)return 0;const re=r.vnode.el;if(e.vertical)return 0;const ue=e.color.get("hue");return re?Math.round(ue*(re.offsetWidth-g.value.offsetWidth/2)/360):0}function ae(){if(!g.value)return 0;const re=r.vnode.el;if(!e.vertical)return 0;const ue=e.color.get("hue");return re?Math.round(ue*(re.offsetHeight-g.value.offsetHeight/2)/360):0}function oe(){k.value=j(),$.value=ae()}return onMounted(()=>{if(!y.value||!g.value)return;const re={drag:ue=>{z(ue)},end:ue=>{z(ue)}};draggable(y.value,re),draggable(g.value,re),oe()}),{bar:y,thumb:g,thumbLeft:k,thumbTop:$,hueValue:V,handleClick:L,update:oe,ns:n}}});function _sfc_render$r(e,n,r,g,y,k){return openBlock(),createElementBlock("div",{class:normalizeClass([e.ns.b(),e.ns.is("vertical",e.vertical)])},[createBaseVNode("div",{ref:"bar",class:normalizeClass(e.ns.e("bar")),onClick:n[0]||(n[0]=(...$)=>e.handleClick&&e.handleClick(...$))},null,2),createBaseVNode("div",{ref:"thumb",class:normalizeClass(e.ns.e("thumb")),style:normalizeStyle({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}var HueSlider=_export_sfc$1(_sfc_main$2L,[["render",_sfc_render$r],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/hue-slider.vue"]]);const colorPickerProps=buildProps({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:useSizeProp,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},predefine:{type:definePropType(Array)},validateEvent:{type:Boolean,default:!0}}),colorPickerEmits={[UPDATE_MODEL_EVENT]:e=>isString$3(e)||isNil(e),[CHANGE_EVENT]:e=>isString$3(e)||isNil(e),activeChange:e=>isString$3(e)||isNil(e)},colorPickerContextKey=Symbol("colorPickerContextKey"),hsv2hsl=function(e,n,r){return[e,n*r/((e=(2-n)*r)<1?e:2-e)||0,e/2]},isOnePointZero=function(e){return typeof e=="string"&&e.includes(".")&&Number.parseFloat(e)===1},isPercentage=function(e){return typeof e=="string"&&e.includes("%")},bound01=function(e,n){isOnePointZero(e)&&(e="100%");const r=isPercentage(e);return e=Math.min(n,Math.max(0,Number.parseFloat(`${e}`))),r&&(e=Number.parseInt(`${e*n}`,10)/100),Math.abs(e-n)<1e-6?1:e%n/Number.parseFloat(n)},INT_HEX_MAP={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},hexOne=e=>{e=Math.min(Math.round(e),255);const n=Math.floor(e/16),r=e%16;return`${INT_HEX_MAP[n]||n}${INT_HEX_MAP[r]||r}`},toHex$1=function({r:e,g:n,b:r}){return Number.isNaN(+e)||Number.isNaN(+n)||Number.isNaN(+r)?"":`#${hexOne(e)}${hexOne(n)}${hexOne(r)}`},HEX_INT_MAP={A:10,B:11,C:12,D:13,E:14,F:15},parseHexChannel=function(e){return e.length===2?(HEX_INT_MAP[e[0].toUpperCase()]||+e[0])*16+(HEX_INT_MAP[e[1].toUpperCase()]||+e[1]):HEX_INT_MAP[e[1].toUpperCase()]||+e[1]},hsl2hsv=function(e,n,r){n=n/100,r=r/100;let g=n;const y=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,g*=y<=1?y:2-y;const k=(r+n)/2,$=r===0?2*g/(y+g):2*n/(r+n);return{h:e,s:$*100,v:k*100}},rgb2hsv=(e,n,r)=>{e=bound01(e,255),n=bound01(n,255),r=bound01(r,255);const g=Math.max(e,n,r),y=Math.min(e,n,r);let k;const $=g,V=g-y,L=g===0?0:V/g;if(g===y)k=0;else{switch(g){case e:{k=(n-r)/V+(n<r?6:0);break}case n:{k=(r-e)/V+2;break}case r:{k=(e-n)/V+4;break}}k/=6}return{h:k*360,s:L*100,v:$*100}},hsv2rgb=function(e,n,r){e=bound01(e,360)*6,n=bound01(n,100),r=bound01(r,100);const g=Math.floor(e),y=e-g,k=r*(1-n),$=r*(1-y*n),V=r*(1-(1-y)*n),L=g%6,z=[r,$,k,k,V,r][L],j=[V,r,r,$,k,k][L],ae=[k,k,V,r,r,$][L];return{r:Math.round(z*255),g:Math.round(j*255),b:Math.round(ae*255)}};class Color{constructor(n={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const r in n)hasOwn$1(n,r)&&(this[r]=n[r]);n.value?this.fromString(n.value):this.doOnChange()}set(n,r){if(arguments.length===1&&typeof n=="object"){for(const g in n)hasOwn$1(n,g)&&this.set(g,n[g]);return}this[`_${n}`]=r,this.doOnChange()}get(n){return n==="alpha"?Math.floor(this[`_${n}`]):this[`_${n}`]}toRgb(){return hsv2rgb(this._hue,this._saturation,this._value)}fromString(n){if(!n){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const r=(g,y,k)=>{this._hue=Math.max(0,Math.min(360,g)),this._saturation=Math.max(0,Math.min(100,y)),this._value=Math.max(0,Math.min(100,k)),this.doOnChange()};if(n.includes("hsl")){const g=n.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(y=>y!=="").map((y,k)=>k>2?Number.parseFloat(y):Number.parseInt(y,10));if(g.length===4?this._alpha=Number.parseFloat(g[3])*100:g.length===3&&(this._alpha=100),g.length>=3){const{h:y,s:k,v:$}=hsl2hsv(g[0],g[1],g[2]);r(y,k,$)}}else if(n.includes("hsv")){const g=n.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(y=>y!=="").map((y,k)=>k>2?Number.parseFloat(y):Number.parseInt(y,10));g.length===4?this._alpha=Number.parseFloat(g[3])*100:g.length===3&&(this._alpha=100),g.length>=3&&r(g[0],g[1],g[2])}else if(n.includes("rgb")){const g=n.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(y=>y!=="").map((y,k)=>k>2?Number.parseFloat(y):Number.parseInt(y,10));if(g.length===4?this._alpha=Number.parseFloat(g[3])*100:g.length===3&&(this._alpha=100),g.length>=3){const{h:y,s:k,v:$}=rgb2hsv(g[0],g[1],g[2]);r(y,k,$)}}else if(n.includes("#")){const g=n.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(g))return;let y,k,$;g.length===3?(y=parseHexChannel(g[0]+g[0]),k=parseHexChannel(g[1]+g[1]),$=parseHexChannel(g[2]+g[2])):(g.length===6||g.length===8)&&(y=parseHexChannel(g.slice(0,2)),k=parseHexChannel(g.slice(2,4)),$=parseHexChannel(g.slice(4,6))),g.length===8?this._alpha=parseHexChannel(g.slice(6))/255*100:(g.length===3||g.length===6)&&(this._alpha=100);const{h:V,s:L,v:z}=rgb2hsv(y,k,$);r(V,L,z)}}compare(n){return Math.abs(n._hue-this._hue)<2&&Math.abs(n._saturation-this._saturation)<1&&Math.abs(n._value-this._value)<1&&Math.abs(n._alpha-this._alpha)<1}doOnChange(){const{_hue:n,_saturation:r,_value:g,_alpha:y,format:k}=this;if(this.enableAlpha)switch(k){case"hsl":{const $=hsv2hsl(n,r/100,g/100);this.value=`hsla(${n}, ${Math.round($[1]*100)}%, ${Math.round($[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${n}, ${Math.round(r)}%, ${Math.round(g)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${toHex$1(hsv2rgb(n,r,g))}${hexOne(y*255/100)}`;break}default:{const{r:$,g:V,b:L}=hsv2rgb(n,r,g);this.value=`rgba(${$}, ${V}, ${L}, ${this.get("alpha")/100})`}}else switch(k){case"hsl":{const $=hsv2hsl(n,r/100,g/100);this.value=`hsl(${n}, ${Math.round($[1]*100)}%, ${Math.round($[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${n}, ${Math.round(r)}%, ${Math.round(g)}%)`;break}case"rgb":{const{r:$,g:V,b:L}=hsv2rgb(n,r,g);this.value=`rgb(${$}, ${V}, ${L})`;break}default:this.value=toHex$1(hsv2rgb(n,r,g))}}}const _sfc_main$2K=defineComponent({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(e){const n=useNamespace("color-predefine"),{currentColor:r}=inject(colorPickerContextKey),g=ref(k(e.colors,e.color));watch(()=>r.value,$=>{const V=new Color;V.fromString($),g.value.forEach(L=>{L.selected=V.compare(L)})}),watchEffect(()=>{g.value=k(e.colors,e.color)});function y($){e.color.fromString(e.colors[$])}function k($,V){return $.map(L=>{const z=new Color;return z.enableAlpha=!0,z.format="rgba",z.fromString(L),z.selected=z.value===V.value,z})}return{rgbaColors:g,handleSelect:y,ns:n}}}),_hoisted_1$1$=["onClick"];function _sfc_render$q(e,n,r,g,y,k){return openBlock(),createElementBlock("div",{class:normalizeClass(e.ns.b())},[createBaseVNode("div",{class:normalizeClass(e.ns.e("colors"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.rgbaColors,($,V)=>(openBlock(),createElementBlock("div",{key:e.colors[V],class:normalizeClass([e.ns.e("color-selector"),e.ns.is("alpha",$._alpha<100),{selected:$.selected}]),onClick:L=>e.handleSelect(V)},[createBaseVNode("div",{style:normalizeStyle({backgroundColor:$.value})},null,4)],10,_hoisted_1$1$))),128))],2)],2)}var Predefine=_export_sfc$1(_sfc_main$2K,[["render",_sfc_render$q],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/predefine.vue"]]);const _sfc_main$2J=defineComponent({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const n=useNamespace("color-svpanel"),r=getCurrentInstance(),g=ref(0),y=ref(0),k=ref("hsl(0, 100%, 50%)"),$=computed(()=>{const z=e.color.get("hue"),j=e.color.get("value");return{hue:z,value:j}});function V(){const z=e.color.get("saturation"),j=e.color.get("value"),ae=r.vnode.el,{clientWidth:oe,clientHeight:re}=ae;y.value=z*oe/100,g.value=(100-j)*re/100,k.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function L(z){const ae=r.vnode.el.getBoundingClientRect(),{clientX:oe,clientY:re}=getClientXY(z);let ue=oe-ae.left,le=re-ae.top;ue=Math.max(0,ue),ue=Math.min(ue,ae.width),le=Math.max(0,le),le=Math.min(le,ae.height),y.value=ue,g.value=le,e.color.set({saturation:ue/ae.width*100,value:100-le/ae.height*100})}return watch(()=>$.value,()=>{V()}),onMounted(()=>{draggable(r.vnode.el,{drag:z=>{L(z)},end:z=>{L(z)}}),V()}),{cursorTop:g,cursorLeft:y,background:k,colorValue:$,handleDrag:L,update:V,ns:n}}}),_hoisted_1$1_=createBaseVNode("div",null,null,-1),_hoisted_2$1H=[_hoisted_1$1_];function _sfc_render$p(e,n,r,g,y,k){return openBlock(),createElementBlock("div",{class:normalizeClass(e.ns.b()),style:normalizeStyle({backgroundColor:e.background})},[createBaseVNode("div",{class:normalizeClass(e.ns.e("white"))},null,2),createBaseVNode("div",{class:normalizeClass(e.ns.e("black"))},null,2),createBaseVNode("div",{class:normalizeClass(e.ns.e("cursor")),style:normalizeStyle({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},_hoisted_2$1H,6)],6)}var SvPanel=_export_sfc$1(_sfc_main$2J,[["render",_sfc_render$p],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/sv-panel.vue"]]);const _hoisted_1$1Z=["id","aria-label","aria-labelledby","aria-description","tabindex","onKeydown"],__default__$X=defineComponent({name:"ElColorPicker"}),_sfc_main$2I=defineComponent({...__default__$X,props:colorPickerProps,emits:colorPickerEmits,setup(e,{expose:n,emit:r}){const g=e,{t:y}=useLocale(),k=useNamespace("color"),{formItem:$}=useFormItem(),V=useFormSize(),L=useFormDisabled(),{inputId:z,isLabeledByFormItem:j}=useFormItemInputId(g,{formItemContext:$}),ae=ref(),oe=ref(),re=ref(),ue=ref();let le=!0;const de=reactive(new Color({enableAlpha:g.showAlpha,format:g.colorFormat||"",value:g.modelValue})),he=ref(!1),_e=ref(!1),xe=ref(""),Ne=computed(()=>!g.modelValue&&!_e.value?"transparent":Ue(de,g.showAlpha)),$e=computed(()=>!g.modelValue&&!_e.value?"":de.value),Ce=computed(()=>j.value?void 0:g.label||y("el.colorpicker.defaultLabel")),Ie=computed(()=>j.value?$?.labelId:void 0),ze=computed(()=>[k.b("picker"),k.is("disabled",L.value),k.bm("picker",V.value)]);function Ue(Sn,An){if(!(Sn instanceof Color))throw new TypeError("color should be instance of _color Class");const{r:In,g:Mn,b:ra}=Sn.toRgb();return An?`rgba(${In}, ${Mn}, ${ra}, ${Sn.get("alpha")/100})`:`rgb(${In}, ${Mn}, ${ra})`}function Pt(Sn){he.value=Sn}const hn=debounce(Pt,100);function Dt(){L.value||Pt(!0)}function xn(){hn(!1),jt()}function jt(){nextTick(()=>{g.modelValue?de.fromString(g.modelValue):(de.value="",nextTick(()=>{_e.value=!1}))})}function Vn(){L.value||hn(!he.value)}function Rn(){de.fromString(xe.value)}function Tn(){const Sn=de.value;r(UPDATE_MODEL_EVENT,Sn),r("change",Sn),g.validateEvent&&$?.validate("change").catch(An=>void 0),hn(!1),nextTick(()=>{const An=new Color({enableAlpha:g.showAlpha,format:g.colorFormat||"",value:g.modelValue});de.compare(An)||jt()})}function Ln(){hn(!1),r(UPDATE_MODEL_EVENT,null),r("change",null),g.modelValue!==null&&g.validateEvent&&$?.validate("change").catch(Sn=>void 0),jt()}return onMounted(()=>{g.modelValue&&(xe.value=$e.value)}),watch(()=>g.modelValue,Sn=>{Sn?Sn&&Sn!==de.value&&(le=!1,de.fromString(Sn)):_e.value=!1}),watch(()=>$e.value,Sn=>{xe.value=Sn,le&&r("activeChange",Sn),le=!0}),watch(()=>de.value,()=>{!g.modelValue&&!_e.value&&(_e.value=!0)}),watch(()=>he.value,()=>{nextTick(()=>{var Sn,An,In;(Sn=ae.value)==null||Sn.update(),(An=oe.value)==null||An.update(),(In=re.value)==null||In.update()})}),provide(colorPickerContextKey,{currentColor:$e}),n({color:de,show:Dt,hide:xn}),(Sn,An)=>(openBlock(),createBlock(unref(ElTooltip),{ref_key:"popper",ref:ue,visible:he.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[unref(k).be("picker","panel"),unref(k).b("dropdown"),Sn.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",transition:`${unref(k).namespace.value}-zoom-in-top`,persistent:""},{content:withCtx(()=>[withDirectives((openBlock(),createElementBlock("div",null,[createBaseVNode("div",{class:normalizeClass(unref(k).be("dropdown","main-wrapper"))},[createVNode(HueSlider,{ref_key:"hue",ref:ae,class:"hue-slider",color:unref(de),vertical:""},null,8,["color"]),createVNode(SvPanel,{ref_key:"sv",ref:oe,color:unref(de)},null,8,["color"])],2),Sn.showAlpha?(openBlock(),createBlock(AlphaSlider,{key:0,ref_key:"alpha",ref:re,color:unref(de)},null,8,["color"])):createCommentVNode("v-if",!0),Sn.predefine?(openBlock(),createBlock(Predefine,{key:1,ref:"predefine",color:unref(de),colors:Sn.predefine},null,8,["color","colors"])):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(k).be("dropdown","btns"))},[createBaseVNode("span",{class:normalizeClass(unref(k).be("dropdown","value"))},[createVNode(unref(ElInput),{modelValue:xe.value,"onUpdate:modelValue":An[0]||(An[0]=In=>xe.value=In),"validate-event":!1,size:"small",onKeyup:withKeys(Rn,["enter"]),onBlur:Rn},null,8,["modelValue","onKeyup"])],2),createVNode(unref(ElButton),{class:normalizeClass(unref(k).be("dropdown","link-btn")),text:"",size:"small",onClick:Ln},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(y)("el.colorpicker.clear")),1)]),_:1},8,["class"]),createVNode(unref(ElButton),{plain:"",size:"small",class:normalizeClass(unref(k).be("dropdown","btn")),onClick:Tn},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(y)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)])),[[unref(ClickOutside),xn]])]),default:withCtx(()=>[createBaseVNode("div",{id:unref(z),class:normalizeClass(unref(ze)),role:"button","aria-label":unref(Ce),"aria-labelledby":unref(Ie),"aria-description":unref(y)("el.colorpicker.description",{color:Sn.modelValue||""}),tabindex:Sn.tabindex,onKeydown:withKeys(Vn,["enter"])},[unref(L)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(k).be("picker","mask"))},null,2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(k).be("picker","trigger")),onClick:Vn},[createBaseVNode("span",{class:normalizeClass([unref(k).be("picker","color"),unref(k).is("alpha",Sn.showAlpha)])},[createBaseVNode("span",{class:normalizeClass(unref(k).be("picker","color-inner")),style:normalizeStyle({backgroundColor:unref(Ne)})},[withDirectives(createVNode(unref(ElIcon),{class:normalizeClass([unref(k).be("picker","icon"),unref(k).is("icon-arrow-down")])},{default:withCtx(()=>[createVNode(unref(arrow_down_default))]),_:1},8,["class"]),[[vShow,Sn.modelValue||_e.value]]),!Sn.modelValue&&!_e.value?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass([unref(k).be("picker","empty"),unref(k).is("icon-close")])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],6)],2)],2)],42,_hoisted_1$1Z)]),_:1},8,["visible","popper-class","transition"]))}});var ColorPicker=_export_sfc$1(_sfc_main$2I,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/color-picker.vue"]]);const ElColorPicker=withInstall(ColorPicker),__default__$W=defineComponent({name:"ElContainer"}),_sfc_main$2H=defineComponent({...__default__$W,props:{direction:{type:String}},setup(e){const n=e,r=useSlots(),g=useNamespace("container"),y=computed(()=>n.direction==="vertical"?!0:n.direction==="horizontal"?!1:r&&r.default?r.default().some($=>{const V=$.type.name;return V==="ElHeader"||V==="ElFooter"}):!1);return(k,$)=>(openBlock(),createElementBlock("section",{class:normalizeClass([unref(g).b(),unref(g).is("vertical",unref(y))])},[renderSlot(k.$slots,"default")],2))}});var Container=_export_sfc$1(_sfc_main$2H,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/container.vue"]]);const __default__$V=defineComponent({name:"ElAside"}),_sfc_main$2G=defineComponent({...__default__$V,props:{width:{type:String,default:null}},setup(e){const n=e,r=useNamespace("aside"),g=computed(()=>n.width?r.cssVarBlock({width:n.width}):{});return(y,k)=>(openBlock(),createElementBlock("aside",{class:normalizeClass(unref(r).b()),style:normalizeStyle(unref(g))},[renderSlot(y.$slots,"default")],6))}});var Aside=_export_sfc$1(_sfc_main$2G,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/aside.vue"]]);const __default__$U=defineComponent({name:"ElFooter"}),_sfc_main$2F=defineComponent({...__default__$U,props:{height:{type:String,default:null}},setup(e){const n=e,r=useNamespace("footer"),g=computed(()=>n.height?r.cssVarBlock({height:n.height}):{});return(y,k)=>(openBlock(),createElementBlock("footer",{class:normalizeClass(unref(r).b()),style:normalizeStyle(unref(g))},[renderSlot(y.$slots,"default")],6))}});var Footer$2=_export_sfc$1(_sfc_main$2F,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/footer.vue"]]);const __default__$T=defineComponent({name:"ElHeader"}),_sfc_main$2E=defineComponent({...__default__$T,props:{height:{type:String,default:null}},setup(e){const n=e,r=useNamespace("header"),g=computed(()=>n.height?r.cssVarBlock({height:n.height}):{});return(y,k)=>(openBlock(),createElementBlock("header",{class:normalizeClass(unref(r).b()),style:normalizeStyle(unref(g))},[renderSlot(y.$slots,"default")],6))}});var Header=_export_sfc$1(_sfc_main$2E,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/header.vue"]]);const __default__$S=defineComponent({name:"ElMain"}),_sfc_main$2D=defineComponent({...__default__$S,setup(e){const n=useNamespace("main");return(r,g)=>(openBlock(),createElementBlock("main",{class:normalizeClass(unref(n).b())},[renderSlot(r.$slots,"default")],2))}});var Main=_export_sfc$1(_sfc_main$2D,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/main.vue"]]);const ElContainer=withInstall(Container,{Aside,Footer:Footer$2,Header,Main}),ElAside=withNoopInstall(Aside),ElFooter=withNoopInstall(Footer$2),ElHeader=withNoopInstall(Header),ElMain=withNoopInstall(Main);var advancedFormat$1={exports:{}};(function(e,n){(function(r,g){e.exports=g()})(commonjsGlobal$1,function(){return function(r,g){var y=g.prototype,k=y.format;y.format=function($){var V=this,L=this.$locale();if(!this.isValid())return k.bind(this)($);var z=this.$utils(),j=($||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(ae){switch(ae){case"Q":return Math.ceil((V.$M+1)/3);case"Do":return L.ordinal(V.$D);case"gggg":return V.weekYear();case"GGGG":return V.isoWeekYear();case"wo":return L.ordinal(V.week(),"W");case"w":case"ww":return z.s(V.week(),ae==="w"?1:2,"0");case"W":case"WW":return z.s(V.isoWeek(),ae==="W"?1:2,"0");case"k":case"kk":return z.s(String(V.$H===0?24:V.$H),ae==="k"?1:2,"0");case"X":return Math.floor(V.$d.getTime()/1e3);case"x":return V.$d.getTime();case"z":return"["+V.offsetName()+"]";case"zzz":return"["+V.offsetName("long")+"]";default:return ae}});return k.bind(this)(j)}}})})(advancedFormat$1);var advancedFormatExports=advancedFormat$1.exports;const advancedFormat=getDefaultExportFromCjs(advancedFormatExports);var weekOfYear$1={exports:{}};(function(e,n){(function(r,g){e.exports=g()})(commonjsGlobal$1,function(){var r="week",g="year";return function(y,k,$){var V=k.prototype;V.week=function(L){if(L===void 0&&(L=null),L!==null)return this.add(7*(L-this.week()),"day");var z=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var j=$(this).startOf(g).add(1,g).date(z),ae=$(this).endOf(r);if(j.isBefore(ae))return 1}var oe=$(this).startOf(g).date(z).startOf(r).subtract(1,"millisecond"),re=this.diff(oe,r,!0);return re<0?$(this).startOf("week").week():Math.ceil(re)},V.weeks=function(L){return L===void 0&&(L=null),this.week(L)}}})})(weekOfYear$1);var weekOfYearExports=weekOfYear$1.exports;const weekOfYear=getDefaultExportFromCjs(weekOfYearExports);var weekYear$1={exports:{}};(function(e,n){(function(r,g){e.exports=g()})(commonjsGlobal$1,function(){return function(r,g){g.prototype.weekYear=function(){var y=this.month(),k=this.week(),$=this.year();return k===1&&y===11?$+1:y===0&&k>=52?$-1:$}}})})(weekYear$1);var weekYearExports=weekYear$1.exports;const weekYear=getDefaultExportFromCjs(weekYearExports);var dayOfYear$1={exports:{}};(function(e,n){(function(r,g){e.exports=g()})(commonjsGlobal$1,function(){return function(r,g,y){g.prototype.dayOfYear=function(k){var $=Math.round((y(this).startOf("day")-y(this).startOf("year"))/864e5)+1;return k==null?$:this.add(k-$,"day")}}})})(dayOfYear$1);var dayOfYearExports=dayOfYear$1.exports;const dayOfYear=getDefaultExportFromCjs(dayOfYearExports);var isSameOrAfter$1={exports:{}};(function(e,n){(function(r,g){e.exports=g()})(commonjsGlobal$1,function(){return function(r,g){g.prototype.isSameOrAfter=function(y,k){return this.isSame(y,k)||this.isAfter(y,k)}}})})(isSameOrAfter$1);var isSameOrAfterExports=isSameOrAfter$1.exports;const isSameOrAfter=getDefaultExportFromCjs(isSameOrAfterExports);var isSameOrBefore$1={exports:{}};(function(e,n){(function(r,g){e.exports=g()})(commonjsGlobal$1,function(){return function(r,g){g.prototype.isSameOrBefore=function(y,k){return this.isSame(y,k)||this.isBefore(y,k)}}})})(isSameOrBefore$1);var isSameOrBeforeExports=isSameOrBefore$1.exports;const isSameOrBefore=getDefaultExportFromCjs(isSameOrBeforeExports),ROOT_PICKER_INJECTION_KEY=Symbol(),datePickerProps=buildProps({...timePickerDefaultProps,type:{type:definePropType(String),default:"date"}}),selectionModes=["date","dates","year","month","week","range"],datePickerSharedProps=buildProps({disabledDate:{type:definePropType(Function)},date:{type:definePropType(Object),required:!0},minDate:{type:definePropType(Object)},maxDate:{type:definePropType(Object)},parsedValue:{type:definePropType([Object,Array])},rangeState:{type:definePropType(Object),default:()=>({endDate:null,selecting:!1})}}),panelSharedProps=buildProps({type:{type:definePropType(String),required:!0,values:datePickTypes}}),panelRangeSharedProps=buildProps({unlinkPanels:Boolean,parsedValue:{type:definePropType(Array)}}),selectionModeWithDefault=e=>({type:String,values:selectionModes,default:e}),panelDatePickProps=buildProps({...panelSharedProps,parsedValue:{type:definePropType([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),basicDateTableProps=buildProps({...datePickerSharedProps,cellClassName:{type:definePropType(Function)},showWeekNumber:Boolean,selectionMode:selectionModeWithDefault("date")}),isValidRange=e=>{if(!isArray$3(e))return!1;const[n,r]=e;return dayjs.isDayjs(n)&&dayjs.isDayjs(r)&&n.isSameOrBefore(r)},getDefaultValue=(e,{lang:n,unit:r,unlinkPanels:g})=>{let y;if(isArray$3(e)){let[k,$]=e.map(V=>dayjs(V).locale(n));return g||($=k.add(1,r)),[k,$]}else e?y=dayjs(e):y=dayjs();return y=y.locale(n),[y,y.add(1,r)]},buildPickerTable=(e,n,{columnIndexOffset:r,startDate:g,nextEndDate:y,now:k,unit:$,relativeDateGetter:V,setCellMetadata:L,setRowMetadata:z})=>{for(let j=0;j<e.row;j++){const ae=n[j];for(let oe=0;oe<e.column;oe++){let re=ae[oe+r];re||(re={row:j,column:oe,type:"normal",inRange:!1,start:!1,end:!1});const ue=j*e.column+oe,le=V(ue);re.dayjs=le,re.date=le.toDate(),re.timestamp=le.valueOf(),re.type="normal",re.inRange=!!(g&&le.isSameOrAfter(g,$)&&y&&le.isSameOrBefore(y,$))||!!(g&&le.isSameOrBefore(g,$)&&y&&le.isSameOrAfter(y,$)),g?.isSameOrAfter(y)?(re.start=!!y&&le.isSame(y,$),re.end=g&&le.isSame(g,$)):(re.start=!!g&&le.isSame(g,$),re.end=!!y&&le.isSame(y,$)),le.isSame(k,$)&&(re.type="today"),L?.(re,{rowIndex:j,columnIndex:oe}),ae[oe+r]=re}z?.(ae)}},basicCellProps=buildProps({cell:{type:definePropType(Object)}});var ElDatePickerCell=defineComponent({name:"ElDatePickerCell",props:basicCellProps,setup(e){const n=useNamespace("date-table-cell"),{slots:r}=inject(ROOT_PICKER_INJECTION_KEY);return()=>{const{cell:g}=e;if(r.default){const y=r.default(g).filter(k=>k.patchFlag!==-2&&k.type.toString()!=="Symbol(Comment)");if(y.length)return y}return createVNode("div",{class:n.b()},[createVNode("span",{class:n.e("text")},[g?.text])])}}});const _hoisted_1$1Y=["aria-label","onMousedown"],_hoisted_2$1G={key:0,scope:"col"},_hoisted_3$13=["aria-label"],_hoisted_4$T=["aria-current","aria-selected","tabindex"],_sfc_main$2C=defineComponent({__name:"basic-date-table",props:basicDateTableProps,emits:["changerange","pick","select"],setup(e,{expose:n,emit:r}){const g=e,y=useNamespace("date-table"),{t:k,lang:$}=useLocale(),V=ref(),L=ref(),z=ref(),j=ref(),ae=ref([[],[],[],[],[],[]]);let oe=!1;const re=g.date.$locale().weekStart||7,ue=g.date.locale("en").localeData().weekdaysShort().map(Mn=>Mn.toLowerCase()),le=computed(()=>re>3?7-re:-re),de=computed(()=>{const Mn=g.date.startOf("month");return Mn.subtract(Mn.day()||7,"day")}),he=computed(()=>ue.concat(ue).slice(re,re+7)),_e=computed(()=>flatten$1(ze.value).some(Mn=>Mn.isCurrent)),xe=computed(()=>{const Mn=g.date.startOf("month"),ra=Mn.day()||7,da=Mn.daysInMonth(),ua=Mn.subtract(1,"month").daysInMonth();return{startOfMonthDay:ra,dateCountOfMonth:da,dateCountOfLastMonth:ua}}),Ne=computed(()=>g.selectionMode==="dates"?castArray(g.parsedValue):[]),$e=(Mn,{count:ra,rowIndex:da,columnIndex:ua})=>{const{startOfMonthDay:aa,dateCountOfMonth:Nn,dateCountOfLastMonth:En}=unref(xe),Zn=unref(le);if(da>=0&&da<=1){const ha=aa+Zn<0?7+aa+Zn:aa+Zn;if(ua+da*7>=ha)return Mn.text=ra,!0;Mn.text=En-(ha-ua%7)+1+da*7,Mn.type="prev-month"}else return ra<=Nn?Mn.text=ra:(Mn.text=ra-Nn,Mn.type="next-month"),!0;return!1},Ce=(Mn,{columnIndex:ra,rowIndex:da},ua)=>{const{disabledDate:aa,cellClassName:Nn}=g,En=unref(Ne),Zn=$e(Mn,{count:ua,rowIndex:da,columnIndex:ra}),ha=Mn.dayjs.toDate();return Mn.selected=En.find(xa=>xa.valueOf()===Mn.dayjs.valueOf()),Mn.isSelected=!!Mn.selected,Mn.isCurrent=hn(Mn),Mn.disabled=aa?.(ha),Mn.customClass=Nn?.(ha),Zn},Ie=Mn=>{if(g.selectionMode==="week"){const[ra,da]=g.showWeekNumber?[1,7]:[0,6],ua=In(Mn[ra+1]);Mn[ra].inRange=ua,Mn[ra].start=ua,Mn[da].inRange=ua,Mn[da].end=ua}},ze=computed(()=>{const{minDate:Mn,maxDate:ra,rangeState:da,showWeekNumber:ua}=g,aa=le.value,Nn=ae.value,En="day";let Zn=1;if(ua)for(let ha=0;ha<6;ha++)Nn[ha][0]||(Nn[ha][0]={type:"week",text:de.value.add(ha*7+1,En).week()});return buildPickerTable({row:6,column:7},Nn,{startDate:Mn,columnIndexOffset:ua?1:0,nextEndDate:da.endDate||ra||da.selecting&&Mn||null,now:dayjs().locale(unref($)).startOf(En),unit:En,relativeDateGetter:ha=>de.value.add(ha-aa,En),setCellMetadata:(...ha)=>{Ce(...ha,Zn)&&(Zn+=1)},setRowMetadata:Ie}),Nn});watch(()=>g.date,async()=>{var Mn,ra;(Mn=V.value)!=null&&Mn.contains(document.activeElement)&&(await nextTick(),(ra=L.value)==null||ra.focus())});const Ue=async()=>{var Mn;(Mn=L.value)==null||Mn.focus()},Pt=(Mn="")=>["normal","today"].includes(Mn),hn=Mn=>g.selectionMode==="date"&&Pt(Mn.type)&&Dt(Mn,g.parsedValue),Dt=(Mn,ra)=>ra?dayjs(ra).locale($.value).isSame(g.date.date(Number(Mn.text)),"day"):!1,xn=Mn=>{const ra=[];return Pt(Mn.type)&&!Mn.disabled?(ra.push("available"),Mn.type==="today"&&ra.push("today")):ra.push(Mn.type),hn(Mn)&&ra.push("current"),Mn.inRange&&(Pt(Mn.type)||g.selectionMode==="week")&&(ra.push("in-range"),Mn.start&&ra.push("start-date"),Mn.end&&ra.push("end-date")),Mn.disabled&&ra.push("disabled"),Mn.selected&&ra.push("selected"),Mn.customClass&&ra.push(Mn.customClass),ra.join(" ")},jt=(Mn,ra)=>{const da=Mn*7+(ra-(g.showWeekNumber?1:0))-le.value;return de.value.add(da,"day")},Vn=Mn=>{var ra;if(!g.rangeState.selecting)return;let da=Mn.target;if(da.tagName==="SPAN"&&(da=(ra=da.parentNode)==null?void 0:ra.parentNode),da.tagName==="DIV"&&(da=da.parentNode),da.tagName!=="TD")return;const ua=da.parentNode.rowIndex-1,aa=da.cellIndex;ze.value[ua][aa].disabled||(ua!==z.value||aa!==j.value)&&(z.value=ua,j.value=aa,r("changerange",{selecting:!0,endDate:jt(ua,aa)}))},Rn=Mn=>!_e.value&&Mn?.text===1&&Mn.type==="normal"||Mn.isCurrent,Tn=Mn=>{oe||_e.value||g.selectionMode!=="date"||An(Mn,!0)},Ln=Mn=>{Mn.target.closest("td")&&(oe=!0)},Sn=Mn=>{Mn.target.closest("td")&&(oe=!1)},An=(Mn,ra=!1)=>{const da=Mn.target.closest("td");if(!da)return;const ua=da.parentNode.rowIndex-1,aa=da.cellIndex,Nn=ze.value[ua][aa];if(Nn.disabled||Nn.type==="week")return;const En=jt(ua,aa);if(g.selectionMode==="range")!g.rangeState.selecting||!g.minDate?(r("pick",{minDate:En,maxDate:null}),r("select",!0)):(En>=g.minDate?r("pick",{minDate:g.minDate,maxDate:En}):r("pick",{minDate:En,maxDate:g.minDate}),r("select",!1));else if(g.selectionMode==="date")r("pick",En,ra);else if(g.selectionMode==="week"){const Zn=En.week(),ha=`${En.year()}w${Zn}`;r("pick",{year:En.year(),week:Zn,value:ha,date:En.startOf("week")})}else if(g.selectionMode==="dates"){const Zn=Nn.selected?castArray(g.parsedValue).filter(ha=>ha?.valueOf()!==En.valueOf()):castArray(g.parsedValue).concat([En]);r("pick",Zn)}},In=Mn=>{if(g.selectionMode!=="week")return!1;let ra=g.date.startOf("day");if(Mn.type==="prev-month"&&(ra=ra.subtract(1,"month")),Mn.type==="next-month"&&(ra=ra.add(1,"month")),ra=ra.date(Number.parseInt(Mn.text,10)),g.parsedValue&&!Array.isArray(g.parsedValue)){const da=(g.parsedValue.day()-re+7)%7-1;return g.parsedValue.subtract(da,"day").isSame(ra,"day")}return!1};return n({focus:Ue}),(Mn,ra)=>(openBlock(),createElementBlock("table",{role:"grid","aria-label":unref(k)("el.datepicker.dateTablePrompt"),cellspacing:"0",cellpadding:"0",class:normalizeClass([unref(y).b(),{"is-week-mode":Mn.selectionMode==="week"}]),onClick:An,onMousemove:Vn,onMousedown:withModifiers(Ln,["prevent"]),onMouseup:Sn},[createBaseVNode("tbody",{ref_key:"tbodyRef",ref:V},[createBaseVNode("tr",null,[Mn.showWeekNumber?(openBlock(),createElementBlock("th",_hoisted_2$1G,toDisplayString$1(unref(k)("el.datepicker.week")),1)):createCommentVNode("v-if",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(he),(da,ua)=>(openBlock(),createElementBlock("th",{key:ua,scope:"col","aria-label":unref(k)("el.datepicker.weeksFull."+da)},toDisplayString$1(unref(k)("el.datepicker.weeks."+da)),9,_hoisted_3$13))),128))]),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(ze),(da,ua)=>(openBlock(),createElementBlock("tr",{key:ua,class:normalizeClass([unref(y).e("row"),{current:In(da[1])}])},[(openBlock(!0),createElementBlock(Fragment,null,renderList(da,(aa,Nn)=>(openBlock(),createElementBlock("td",{key:`${ua}.${Nn}`,ref_for:!0,ref:En=>Rn(aa)&&(L.value=En),class:normalizeClass(xn(aa)),"aria-current":aa.isCurrent?"date":void 0,"aria-selected":aa.isCurrent,tabindex:Rn(aa)?0:-1,onFocus:Tn},[createVNode(unref(ElDatePickerCell),{cell:aa},null,8,["cell"])],42,_hoisted_4$T))),128))],2))),128))],512)],42,_hoisted_1$1Y))}});var DateTable=_export_sfc$1(_sfc_main$2C,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-date-table.vue"]]);const basicMonthTableProps=buildProps({...datePickerSharedProps,selectionMode:selectionModeWithDefault("month")}),_hoisted_1$1X=["aria-label"],_hoisted_2$1F=["aria-selected","aria-label","tabindex","onKeydown"],_hoisted_3$12={class:"cell"},_sfc_main$2B=defineComponent({__name:"basic-month-table",props:basicMonthTableProps,emits:["changerange","pick","select"],setup(e,{expose:n,emit:r}){const g=e,y=(Ne,$e,Ce)=>{const Ie=dayjs().locale(Ce).startOf("month").month($e).year(Ne),ze=Ie.daysInMonth();return rangeArr(ze).map(Ue=>Ie.add(Ue,"day").toDate())},k=useNamespace("month-table"),{t:$,lang:V}=useLocale(),L=ref(),z=ref(),j=ref(g.date.locale("en").localeData().monthsShort().map(Ne=>Ne.toLowerCase())),ae=ref([[],[],[]]),oe=ref(),re=ref(),ue=computed(()=>{var Ne,$e;const Ce=ae.value,Ie=dayjs().locale(V.value).startOf("month");for(let ze=0;ze<3;ze++){const Ue=Ce[ze];for(let Pt=0;Pt<4;Pt++){const hn=Ue[Pt]||(Ue[Pt]={row:ze,column:Pt,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});hn.type="normal";const Dt=ze*4+Pt,xn=g.date.startOf("year").month(Dt),jt=g.rangeState.endDate||g.maxDate||g.rangeState.selecting&&g.minDate||null;hn.inRange=!!(g.minDate&&xn.isSameOrAfter(g.minDate,"month")&&jt&&xn.isSameOrBefore(jt,"month"))||!!(g.minDate&&xn.isSameOrBefore(g.minDate,"month")&&jt&&xn.isSameOrAfter(jt,"month")),(Ne=g.minDate)!=null&&Ne.isSameOrAfter(jt)?(hn.start=!!(jt&&xn.isSame(jt,"month")),hn.end=g.minDate&&xn.isSame(g.minDate,"month")):(hn.start=!!(g.minDate&&xn.isSame(g.minDate,"month")),hn.end=!!(jt&&xn.isSame(jt,"month"))),Ie.isSame(xn)&&(hn.type="today"),hn.text=Dt,hn.disabled=(($e=g.disabledDate)==null?void 0:$e.call(g,xn.toDate()))||!1}}return Ce}),le=()=>{var Ne;(Ne=z.value)==null||Ne.focus()},de=Ne=>{const $e={},Ce=g.date.year(),Ie=new Date,ze=Ne.text;return $e.disabled=g.disabledDate?y(Ce,ze,V.value).every(g.disabledDate):!1,$e.current=castArray(g.parsedValue).findIndex(Ue=>dayjs.isDayjs(Ue)&&Ue.year()===Ce&&Ue.month()===ze)>=0,$e.today=Ie.getFullYear()===Ce&&Ie.getMonth()===ze,Ne.inRange&&($e["in-range"]=!0,Ne.start&&($e["start-date"]=!0),Ne.end&&($e["end-date"]=!0)),$e},he=Ne=>{const $e=g.date.year(),Ce=Ne.text;return castArray(g.date).findIndex(Ie=>Ie.year()===$e&&Ie.month()===Ce)>=0},_e=Ne=>{var $e;if(!g.rangeState.selecting)return;let Ce=Ne.target;if(Ce.tagName==="A"&&(Ce=($e=Ce.parentNode)==null?void 0:$e.parentNode),Ce.tagName==="DIV"&&(Ce=Ce.parentNode),Ce.tagName!=="TD")return;const Ie=Ce.parentNode.rowIndex,ze=Ce.cellIndex;ue.value[Ie][ze].disabled||(Ie!==oe.value||ze!==re.value)&&(oe.value=Ie,re.value=ze,r("changerange",{selecting:!0,endDate:g.date.startOf("year").month(Ie*4+ze)}))},xe=Ne=>{var $e;const Ce=($e=Ne.target)==null?void 0:$e.closest("td");if(Ce?.tagName!=="TD"||hasClass(Ce,"disabled"))return;const Ie=Ce.cellIndex,Ue=Ce.parentNode.rowIndex*4+Ie,Pt=g.date.startOf("year").month(Ue);g.selectionMode==="range"?g.rangeState.selecting?(g.minDate&&Pt>=g.minDate?r("pick",{minDate:g.minDate,maxDate:Pt}):r("pick",{minDate:Pt,maxDate:g.minDate}),r("select",!1)):(r("pick",{minDate:Pt,maxDate:null}),r("select",!0)):r("pick",Ue)};return watch(()=>g.date,async()=>{var Ne,$e;(Ne=L.value)!=null&&Ne.contains(document.activeElement)&&(await nextTick(),($e=z.value)==null||$e.focus())}),n({focus:le}),(Ne,$e)=>(openBlock(),createElementBlock("table",{role:"grid","aria-label":unref($)("el.datepicker.monthTablePrompt"),class:normalizeClass(unref(k).b()),onClick:xe,onMousemove:_e},[createBaseVNode("tbody",{ref_key:"tbodyRef",ref:L},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(ue),(Ce,Ie)=>(openBlock(),createElementBlock("tr",{key:Ie},[(openBlock(!0),createElementBlock(Fragment,null,renderList(Ce,(ze,Ue)=>(openBlock(),createElementBlock("td",{key:Ue,ref_for:!0,ref:Pt=>he(ze)&&(z.value=Pt),class:normalizeClass(de(ze)),"aria-selected":`${he(ze)}`,"aria-label":unref($)(`el.datepicker.month${+ze.text+1}`),tabindex:he(ze)?0:-1,onKeydown:[withKeys(withModifiers(xe,["prevent","stop"]),["space"]),withKeys(withModifiers(xe,["prevent","stop"]),["enter"])]},[createBaseVNode("div",null,[createBaseVNode("span",_hoisted_3$12,toDisplayString$1(unref($)("el.datepicker.months."+j.value[ze.text])),1)])],42,_hoisted_2$1F))),128))]))),128))],512)],42,_hoisted_1$1X))}});var MonthTable=_export_sfc$1(_sfc_main$2B,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-month-table.vue"]]);const{date,disabledDate,parsedValue}=datePickerSharedProps,basicYearTableProps=buildProps({date,disabledDate,parsedValue}),_hoisted_1$1W=["aria-label"],_hoisted_2$1E=["aria-selected","tabindex","onKeydown"],_hoisted_3$11={class:"cell"},_hoisted_4$S={key:1},_sfc_main$2A=defineComponent({__name:"basic-year-table",props:basicYearTableProps,emits:["pick"],setup(e,{expose:n,emit:r}){const g=e,y=(le,de)=>{const he=dayjs(String(le)).locale(de).startOf("year"),xe=he.endOf("year").dayOfYear();return rangeArr(xe).map(Ne=>he.add(Ne,"day").toDate())},k=useNamespace("year-table"),{t:$,lang:V}=useLocale(),L=ref(),z=ref(),j=computed(()=>Math.floor(g.date.year()/10)*10),ae=()=>{var le;(le=z.value)==null||le.focus()},oe=le=>{const de={},he=dayjs().locale(V.value);return de.disabled=g.disabledDate?y(le,V.value).every(g.disabledDate):!1,de.current=castArray(g.parsedValue).findIndex(_e=>_e.year()===le)>=0,de.today=he.year()===le,de},re=le=>le===j.value&&g.date.year()<j.value&&g.date.year()>j.value+9||castArray(g.date).findIndex(de=>de.year()===le)>=0,ue=le=>{const he=le.target.closest("td");if(he&&he.textContent){if(hasClass(he,"disabled"))return;const _e=he.textContent||he.innerText;r("pick",Number(_e))}};return watch(()=>g.date,async()=>{var le,de;(le=L.value)!=null&&le.contains(document.activeElement)&&(await nextTick(),(de=z.value)==null||de.focus())}),n({focus:ae}),(le,de)=>(openBlock(),createElementBlock("table",{role:"grid","aria-label":unref($)("el.datepicker.yearTablePrompt"),class:normalizeClass(unref(k).b()),onClick:ue},[createBaseVNode("tbody",{ref_key:"tbodyRef",ref:L},[(openBlock(),createElementBlock(Fragment,null,renderList(3,(he,_e)=>createBaseVNode("tr",{key:_e},[(openBlock(),createElementBlock(Fragment,null,renderList(4,(xe,Ne)=>(openBlock(),createElementBlock(Fragment,{key:_e+"_"+Ne},[_e*4+Ne<10?(openBlock(),createElementBlock("td",{key:0,ref_for:!0,ref:$e=>re(unref(j)+_e*4+Ne)&&(z.value=$e),class:normalizeClass(["available",oe(unref(j)+_e*4+Ne)]),"aria-selected":`${re(unref(j)+_e*4+Ne)}`,tabindex:re(unref(j)+_e*4+Ne)?0:-1,onKeydown:[withKeys(withModifiers(ue,["prevent","stop"]),["space"]),withKeys(withModifiers(ue,["prevent","stop"]),["enter"])]},[createBaseVNode("span",_hoisted_3$11,toDisplayString$1(unref(j)+_e*4+Ne),1)],42,_hoisted_2$1E)):(openBlock(),createElementBlock("td",_hoisted_4$S))],64))),64))])),64))],512)],10,_hoisted_1$1W))}});var YearTable=_export_sfc$1(_sfc_main$2A,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-year-table.vue"]]);const _hoisted_1$1V=["onClick"],_hoisted_2$1D=["aria-label"],_hoisted_3$10=["aria-label"],_hoisted_4$R=["aria-label"],_hoisted_5$H=["aria-label"],_sfc_main$2z=defineComponent({__name:"panel-date-pick",props:panelDatePickProps,emits:["pick","set-picker-option","panel-change"],setup(e,{emit:n}){const r=e,g=(Lt,_n,vn)=>!0,y=useNamespace("picker-panel"),k=useNamespace("date-picker"),$=useAttrs$1(),V=useSlots(),{t:L,lang:z}=useLocale(),j=inject("EP_PICKER_BASE"),ae=inject(TOOLTIP_INJECTION_KEY),{shortcuts:oe,disabledDate:re,cellClassName:ue,defaultTime:le}=j.props,de=toRef(j.props,"defaultValue"),he=ref(),_e=ref(dayjs().locale(z.value)),xe=ref(!1);let Ne=!1;const $e=computed(()=>dayjs(le).locale(z.value)),Ce=computed(()=>_e.value.month()),Ie=computed(()=>_e.value.year()),ze=ref([]),Ue=ref(null),Pt=ref(null),hn=Lt=>ze.value.length>0?g(Lt,ze.value,r.format||"HH:mm:ss"):!0,Dt=Lt=>le&&!bn.value&&!xe.value&&!Ne?$e.value.year(Lt.year()).month(Lt.month()).date(Lt.date()):aa.value?Lt.millisecond(0):Lt.startOf("day"),xn=(Lt,..._n)=>{if(!Lt)n("pick",Lt,..._n);else if(isArray$3(Lt)){const vn=Lt.map(Dt);n("pick",vn,..._n)}else n("pick",Dt(Lt),..._n);Ue.value=null,Pt.value=null,xe.value=!1,Ne=!1},jt=(Lt,_n)=>{if(An.value==="date"){Lt=Lt;let vn=r.parsedValue?r.parsedValue.year(Lt.year()).month(Lt.month()).date(Lt.date()):Lt;hn(vn)||(vn=ze.value[0][0].year(Lt.year()).month(Lt.month()).date(Lt.date())),_e.value=vn,xn(vn,aa.value||_n)}else An.value==="week"?xn(Lt.date):An.value==="dates"&&xn(Lt,!0)},Vn=Lt=>{const _n=Lt?"add":"subtract";_e.value=_e.value[_n](1,"month"),Et("month")},Rn=Lt=>{const _n=_e.value,vn=Lt?"add":"subtract";_e.value=Tn.value==="year"?_n[vn](10,"year"):_n[vn](1,"year"),Et("year")},Tn=ref("date"),Ln=computed(()=>{const Lt=L("el.datepicker.year");if(Tn.value==="year"){const _n=Math.floor(Ie.value/10)*10;return Lt?`${_n} ${Lt} - ${_n+9} ${Lt}`:`${_n} - ${_n+9}`}return`${Ie.value} ${Lt}`}),Sn=Lt=>{const _n=isFunction$3(Lt.value)?Lt.value():Lt.value;if(_n){Ne=!0,xn(dayjs(_n).locale(z.value));return}Lt.onClick&&Lt.onClick({attrs:$,slots:V,emit:n})},An=computed(()=>{const{type:Lt}=r;return["week","month","year","dates"].includes(Lt)?Lt:"date"}),In=computed(()=>An.value==="date"?Tn.value:An.value),Mn=computed(()=>!!oe.length),ra=async Lt=>{_e.value=_e.value.startOf("month").month(Lt),An.value==="month"?xn(_e.value,!1):(Tn.value="date",["month","year","date","week"].includes(An.value)&&(xn(_e.value,!0),await nextTick(),Oe())),Et("month")},da=async Lt=>{An.value==="year"?(_e.value=_e.value.startOf("year").year(Lt),xn(_e.value,!1)):(_e.value=_e.value.year(Lt),Tn.value="month",["month","year","date","week"].includes(An.value)&&(xn(_e.value,!0),await nextTick(),Oe())),Et("year")},ua=async Lt=>{Tn.value=Lt,await nextTick(),Oe()},aa=computed(()=>r.type==="datetime"||r.type==="datetimerange"),Nn=computed(()=>aa.value||An.value==="dates"),En=computed(()=>re?r.parsedValue?isArray$3(r.parsedValue)?re(r.parsedValue[0].toDate()):re(r.parsedValue.toDate()):!0:!1),Zn=()=>{if(An.value==="dates")xn(r.parsedValue);else{let Lt=r.parsedValue;if(!Lt){const _n=dayjs(le).locale(z.value),vn=pe();Lt=_n.year(vn.year()).month(vn.month()).date(vn.date())}_e.value=Lt,xn(Lt)}},ha=computed(()=>re?re(dayjs().locale(z.value).toDate()):!1),xa=()=>{const _n=dayjs().locale(z.value).toDate();xe.value=!0,(!re||!re(_n))&&hn(_n)&&(_e.value=dayjs().locale(z.value),xn(_e.value))},sa=computed(()=>extractTimeFormat(r.format)),Hn=computed(()=>extractDateFormat(r.format)),bn=computed(()=>{if(Pt.value)return Pt.value;if(!(!r.parsedValue&&!de.value))return(r.parsedValue||_e.value).format(sa.value)}),Xn=computed(()=>{if(Ue.value)return Ue.value;if(!(!r.parsedValue&&!de.value))return(r.parsedValue||_e.value).format(Hn.value)}),$n=ref(!1),kt=()=>{$n.value=!0},At=()=>{$n.value=!1},Dn=Lt=>({hour:Lt.hour(),minute:Lt.minute(),second:Lt.second(),year:Lt.year(),month:Lt.month(),date:Lt.date()}),Qn=(Lt,_n,vn)=>{const{hour:wn,minute:Cn,second:Bn}=Dn(Lt),zn=r.parsedValue?r.parsedValue.hour(wn).minute(Cn).second(Bn):Lt;_e.value=zn,xn(_e.value,!0),vn||($n.value=_n)},oa=Lt=>{const _n=dayjs(Lt,sa.value).locale(z.value);if(_n.isValid()&&hn(_n)){const{year:vn,month:wn,date:Cn}=Dn(_e.value);_e.value=_n.year(vn).month(wn).date(Cn),Pt.value=null,$n.value=!1,xn(_e.value,!0)}},na=Lt=>{const _n=dayjs(Lt,Hn.value).locale(z.value);if(_n.isValid()){if(re&&re(_n.toDate()))return;const{hour:vn,minute:wn,second:Cn}=Dn(_e.value);_e.value=_n.hour(vn).minute(wn).second(Cn),Ue.value=null,xn(_e.value,!0)}},la=Lt=>dayjs.isDayjs(Lt)&&Lt.isValid()&&(re?!re(Lt.toDate()):!0),ma=Lt=>An.value==="dates"?Lt.map(_n=>_n.format(r.format)):Lt.format(r.format),ca=Lt=>dayjs(Lt,r.format).locale(z.value),pe=()=>{const Lt=dayjs(de.value).locale(z.value);if(!de.value){const _n=$e.value;return dayjs().hour(_n.hour()).minute(_n.minute()).second(_n.second()).locale(z.value)}return Lt},Oe=async()=>{var Lt;["week","month","year","date"].includes(An.value)&&((Lt=he.value)==null||Lt.focus(),An.value==="week"&&qe(EVENT_CODE.down))},Ve=Lt=>{const{code:_n}=Lt;[EVENT_CODE.up,EVENT_CODE.down,EVENT_CODE.left,EVENT_CODE.right,EVENT_CODE.home,EVENT_CODE.end,EVENT_CODE.pageUp,EVENT_CODE.pageDown].includes(_n)&&(qe(_n),Lt.stopPropagation(),Lt.preventDefault()),[EVENT_CODE.enter,EVENT_CODE.space,EVENT_CODE.numpadEnter].includes(_n)&&Ue.value===null&&Pt.value===null&&(Lt.preventDefault(),xn(_e.value,!1))},qe=Lt=>{var _n;const{up:vn,down:wn,left:Cn,right:Bn,home:zn,end:Fn,pageUp:Gn,pageDown:Kn}=EVENT_CODE,Wn={year:{[vn]:-4,[wn]:4,[Cn]:-1,[Bn]:1,offset:(Pn,jn)=>Pn.setFullYear(Pn.getFullYear()+jn)},month:{[vn]:-4,[wn]:4,[Cn]:-1,[Bn]:1,offset:(Pn,jn)=>Pn.setMonth(Pn.getMonth()+jn)},week:{[vn]:-1,[wn]:1,[Cn]:-1,[Bn]:1,offset:(Pn,jn)=>Pn.setDate(Pn.getDate()+jn*7)},date:{[vn]:-7,[wn]:7,[Cn]:-1,[Bn]:1,[zn]:Pn=>-Pn.getDay(),[Fn]:Pn=>-Pn.getDay()+6,[Gn]:Pn=>-new Date(Pn.getFullYear(),Pn.getMonth(),0).getDate(),[Kn]:Pn=>new Date(Pn.getFullYear(),Pn.getMonth()+1,0).getDate(),offset:(Pn,jn)=>Pn.setDate(Pn.getDate()+jn)}},ea=_e.value.toDate();for(;Math.abs(_e.value.diff(ea,"year",!0))<1;){const Pn=Wn[In.value];if(!Pn)return;if(Pn.offset(ea,isFunction$3(Pn[Lt])?Pn[Lt](ea):(_n=Pn[Lt])!=null?_n:0),re&&re(ea))break;const jn=dayjs(ea).locale(z.value);_e.value=jn,n("pick",jn,!0);break}},Et=Lt=>{n("panel-change",_e.value.toDate(),Lt,Tn.value)};return watch(()=>An.value,Lt=>{if(["month","year"].includes(Lt)){Tn.value=Lt;return}Tn.value="date"},{immediate:!0}),watch(()=>Tn.value,()=>{ae?.updatePopper()}),watch(()=>de.value,Lt=>{Lt&&(_e.value=pe())},{immediate:!0}),watch(()=>r.parsedValue,Lt=>{if(Lt){if(An.value==="dates"||Array.isArray(Lt))return;_e.value=Lt}else _e.value=pe()},{immediate:!0}),n("set-picker-option",["isValidValue",la]),n("set-picker-option",["formatToString",ma]),n("set-picker-option",["parseUserInput",ca]),n("set-picker-option",["handleFocusPicker",Oe]),(Lt,_n)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(y).b(),unref(k).b(),{"has-sidebar":Lt.$slots.sidebar||unref(Mn),"has-time":unref(aa)}])},[createBaseVNode("div",{class:normalizeClass(unref(y).e("body-wrapper"))},[renderSlot(Lt.$slots,"sidebar",{class:normalizeClass(unref(y).e("sidebar"))}),unref(Mn)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(y).e("sidebar"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(oe),(vn,wn)=>(openBlock(),createElementBlock("button",{key:wn,type:"button",class:normalizeClass(unref(y).e("shortcut")),onClick:Cn=>Sn(vn)},toDisplayString$1(vn.text),11,_hoisted_1$1V))),128))],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(y).e("body"))},[unref(aa)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(k).e("time-header"))},[createBaseVNode("span",{class:normalizeClass(unref(k).e("editor-wrap"))},[createVNode(unref(ElInput),{placeholder:unref(L)("el.datepicker.selectDate"),"model-value":unref(Xn),size:"small","validate-event":!1,onInput:_n[0]||(_n[0]=vn=>Ue.value=vn),onChange:na},null,8,["placeholder","model-value"])],2),withDirectives((openBlock(),createElementBlock("span",{class:normalizeClass(unref(k).e("editor-wrap"))},[createVNode(unref(ElInput),{placeholder:unref(L)("el.datepicker.selectTime"),"model-value":unref(bn),size:"small","validate-event":!1,onFocus:kt,onInput:_n[1]||(_n[1]=vn=>Pt.value=vn),onChange:oa},null,8,["placeholder","model-value"]),createVNode(unref(TimePickPanel),{visible:$n.value,format:unref(sa),"parsed-value":_e.value,onPick:Qn},null,8,["visible","format","parsed-value"])],2)),[[unref(ClickOutside),At]])],2)):createCommentVNode("v-if",!0),withDirectives(createBaseVNode("div",{class:normalizeClass([unref(k).e("header"),(Tn.value==="year"||Tn.value==="month")&&unref(k).e("header--bordered")])},[createBaseVNode("span",{class:normalizeClass(unref(k).e("prev-btn"))},[createBaseVNode("button",{type:"button","aria-label":unref(L)("el.datepicker.prevYear"),class:normalizeClass(["d-arrow-left",unref(y).e("icon-btn")]),onClick:_n[2]||(_n[2]=vn=>Rn(!1))},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_left_default))]),_:1})],10,_hoisted_2$1D),withDirectives(createBaseVNode("button",{type:"button","aria-label":unref(L)("el.datepicker.prevMonth"),class:normalizeClass([unref(y).e("icon-btn"),"arrow-left"]),onClick:_n[3]||(_n[3]=vn=>Vn(!1))},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1})],10,_hoisted_3$10),[[vShow,Tn.value==="date"]])],2),createBaseVNode("span",{role:"button",class:normalizeClass(unref(k).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:_n[4]||(_n[4]=withKeys(vn=>ua("year"),["enter"])),onClick:_n[5]||(_n[5]=vn=>ua("year"))},toDisplayString$1(unref(Ln)),35),withDirectives(createBaseVNode("span",{role:"button","aria-live":"polite",tabindex:"0",class:normalizeClass([unref(k).e("header-label"),{active:Tn.value==="month"}]),onKeydown:_n[6]||(_n[6]=withKeys(vn=>ua("month"),["enter"])),onClick:_n[7]||(_n[7]=vn=>ua("month"))},toDisplayString$1(unref(L)(`el.datepicker.month${unref(Ce)+1}`)),35),[[vShow,Tn.value==="date"]]),createBaseVNode("span",{class:normalizeClass(unref(k).e("next-btn"))},[withDirectives(createBaseVNode("button",{type:"button","aria-label":unref(L)("el.datepicker.nextMonth"),class:normalizeClass([unref(y).e("icon-btn"),"arrow-right"]),onClick:_n[8]||(_n[8]=vn=>Vn(!0))},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})],10,_hoisted_4$R),[[vShow,Tn.value==="date"]]),createBaseVNode("button",{type:"button","aria-label":unref(L)("el.datepicker.nextYear"),class:normalizeClass([unref(y).e("icon-btn"),"d-arrow-right"]),onClick:_n[9]||(_n[9]=vn=>Rn(!0))},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_right_default))]),_:1})],10,_hoisted_5$H)],2)],2),[[vShow,Tn.value!=="time"]]),createBaseVNode("div",{class:normalizeClass(unref(y).e("content")),onKeydown:Ve},[Tn.value==="date"?(openBlock(),createBlock(DateTable,{key:0,ref_key:"currentViewRef",ref:he,"selection-mode":unref(An),date:_e.value,"parsed-value":Lt.parsedValue,"disabled-date":unref(re),"cell-class-name":unref(ue),onPick:jt},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):createCommentVNode("v-if",!0),Tn.value==="year"?(openBlock(),createBlock(YearTable,{key:1,ref_key:"currentViewRef",ref:he,date:_e.value,"disabled-date":unref(re),"parsed-value":Lt.parsedValue,onPick:da},null,8,["date","disabled-date","parsed-value"])):createCommentVNode("v-if",!0),Tn.value==="month"?(openBlock(),createBlock(MonthTable,{key:2,ref_key:"currentViewRef",ref:he,date:_e.value,"parsed-value":Lt.parsedValue,"disabled-date":unref(re),onPick:ra},null,8,["date","parsed-value","disabled-date"])):createCommentVNode("v-if",!0)],34)],2)],2),withDirectives(createBaseVNode("div",{class:normalizeClass(unref(y).e("footer"))},[withDirectives(createVNode(unref(ElButton),{text:"",size:"small",class:normalizeClass(unref(y).e("link-btn")),disabled:unref(ha),onClick:xa},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(L)("el.datepicker.now")),1)]),_:1},8,["class","disabled"]),[[vShow,unref(An)!=="dates"]]),createVNode(unref(ElButton),{plain:"",size:"small",class:normalizeClass(unref(y).e("link-btn")),disabled:unref(En),onClick:Zn},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(L)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2),[[vShow,unref(Nn)&&Tn.value==="date"]])],2))}});var DatePickPanel=_export_sfc$1(_sfc_main$2z,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-pick.vue"]]);const panelDateRangeProps=buildProps({...panelSharedProps,...panelRangeSharedProps}),useShortcut=e=>{const{emit:n}=getCurrentInstance(),r=useAttrs$1(),g=useSlots();return k=>{const $=isFunction$3(k.value)?k.value():k.value;if($){n("pick",[dayjs($[0]).locale(e.value),dayjs($[1]).locale(e.value)]);return}k.onClick&&k.onClick({attrs:r,slots:g,emit:n})}},useRangePicker=(e,{defaultValue:n,leftDate:r,rightDate:g,unit:y,onParsedValueChanged:k})=>{const{emit:$}=getCurrentInstance(),{pickerNs:V}=inject(ROOT_PICKER_INJECTION_KEY),L=useNamespace("date-range-picker"),{t:z,lang:j}=useLocale(),ae=useShortcut(j),oe=ref(),re=ref(),ue=ref({endDate:null,selecting:!1}),le=xe=>{ue.value=xe},de=(xe=!1)=>{const Ne=unref(oe),$e=unref(re);isValidRange([Ne,$e])&&$("pick",[Ne,$e],xe)},he=xe=>{ue.value.selecting=xe,xe||(ue.value.endDate=null)},_e=()=>{const[xe,Ne]=getDefaultValue(unref(n),{lang:unref(j),unit:y,unlinkPanels:e.unlinkPanels});oe.value=void 0,re.value=void 0,r.value=xe,g.value=Ne};return watch(n,xe=>{xe&&_e()},{immediate:!0}),watch(()=>e.parsedValue,xe=>{if(isArray$3(xe)&&xe.length===2){const[Ne,$e]=xe;oe.value=Ne,r.value=Ne,re.value=$e,k(unref(oe),unref(re))}else _e()},{immediate:!0}),{minDate:oe,maxDate:re,rangeState:ue,lang:j,ppNs:V,drpNs:L,handleChangeRange:le,handleRangeConfirm:de,handleShortcutClick:ae,onSelect:he,t:z}},_hoisted_1$1U=["onClick"],_hoisted_2$1C=["disabled"],_hoisted_3$$=["disabled"],_hoisted_4$Q=["disabled"],_hoisted_5$G=["disabled"],unit$1="month",_sfc_main$2y=defineComponent({__name:"panel-date-range",props:panelDateRangeProps,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(e,{emit:n}){const r=e,g=inject("EP_PICKER_BASE"),{disabledDate:y,cellClassName:k,format:$,defaultTime:V,clearable:L}=g.props,z=toRef(g.props,"shortcuts"),j=toRef(g.props,"defaultValue"),{lang:ae}=useLocale(),oe=ref(dayjs().locale(ae.value)),re=ref(dayjs().locale(ae.value).add(1,unit$1)),{minDate:ue,maxDate:le,rangeState:de,ppNs:he,drpNs:_e,handleChangeRange:xe,handleRangeConfirm:Ne,handleShortcutClick:$e,onSelect:Ce,t:Ie}=useRangePicker(r,{defaultValue:j,leftDate:oe,rightDate:re,unit:unit$1,onParsedValueChanged:_n}),ze=ref({min:null,max:null}),Ue=ref({min:null,max:null}),Pt=computed(()=>`${oe.value.year()} ${Ie("el.datepicker.year")} ${Ie(`el.datepicker.month${oe.value.month()+1}`)}`),hn=computed(()=>`${re.value.year()} ${Ie("el.datepicker.year")} ${Ie(`el.datepicker.month${re.value.month()+1}`)}`),Dt=computed(()=>oe.value.year()),xn=computed(()=>oe.value.month()),jt=computed(()=>re.value.year()),Vn=computed(()=>re.value.month()),Rn=computed(()=>!!z.value.length),Tn=computed(()=>ze.value.min!==null?ze.value.min:ue.value?ue.value.format(Mn.value):""),Ln=computed(()=>ze.value.max!==null?ze.value.max:le.value||ue.value?(le.value||ue.value).format(Mn.value):""),Sn=computed(()=>Ue.value.min!==null?Ue.value.min:ue.value?ue.value.format(In.value):""),An=computed(()=>Ue.value.max!==null?Ue.value.max:le.value||ue.value?(le.value||ue.value).format(In.value):""),In=computed(()=>extractTimeFormat($)),Mn=computed(()=>extractDateFormat($)),ra=vn=>isValidRange(vn)&&(y?!y(vn[0].toDate())&&!y(vn[1].toDate()):!0),da=()=>{oe.value=oe.value.subtract(1,"year"),r.unlinkPanels||(re.value=oe.value.add(1,"month")),sa("year")},ua=()=>{oe.value=oe.value.subtract(1,"month"),r.unlinkPanels||(re.value=oe.value.add(1,"month")),sa("month")},aa=()=>{r.unlinkPanels?re.value=re.value.add(1,"year"):(oe.value=oe.value.add(1,"year"),re.value=oe.value.add(1,"month")),sa("year")},Nn=()=>{r.unlinkPanels?re.value=re.value.add(1,"month"):(oe.value=oe.value.add(1,"month"),re.value=oe.value.add(1,"month")),sa("month")},En=()=>{oe.value=oe.value.add(1,"year"),sa("year")},Zn=()=>{oe.value=oe.value.add(1,"month"),sa("month")},ha=()=>{re.value=re.value.subtract(1,"year"),sa("year")},xa=()=>{re.value=re.value.subtract(1,"month"),sa("month")},sa=vn=>{n("panel-change",[oe.value.toDate(),re.value.toDate()],vn)},Hn=computed(()=>{const vn=(xn.value+1)%12,wn=xn.value+1>=12?1:0;return r.unlinkPanels&&new Date(Dt.value+wn,vn)<new Date(jt.value,Vn.value)}),bn=computed(()=>r.unlinkPanels&&jt.value*12+Vn.value-(Dt.value*12+xn.value+1)>=12),Xn=computed(()=>!(ue.value&&le.value&&!de.value.selecting&&isValidRange([ue.value,le.value]))),$n=computed(()=>r.type==="datetime"||r.type==="datetimerange"),kt=(vn,wn)=>{if(vn)return V?dayjs(V[wn]||V).locale(ae.value).year(vn.year()).month(vn.month()).date(vn.date()):vn},At=(vn,wn=!0)=>{const Cn=vn.minDate,Bn=vn.maxDate,zn=kt(Cn,0),Fn=kt(Bn,1);le.value===Fn&&ue.value===zn||(n("calendar-change",[Cn.toDate(),Bn&&Bn.toDate()]),le.value=Fn,ue.value=zn,!(!wn||$n.value)&&Ne())},Dn=ref(!1),Qn=ref(!1),oa=()=>{Dn.value=!1},na=()=>{Qn.value=!1},la=(vn,wn)=>{ze.value[wn]=vn;const Cn=dayjs(vn,Mn.value).locale(ae.value);if(Cn.isValid()){if(y&&y(Cn.toDate()))return;wn==="min"?(oe.value=Cn,ue.value=(ue.value||oe.value).year(Cn.year()).month(Cn.month()).date(Cn.date()),!r.unlinkPanels&&(!le.value||le.value.isBefore(ue.value))&&(re.value=Cn.add(1,"month"),le.value=ue.value.add(1,"month"))):(re.value=Cn,le.value=(le.value||re.value).year(Cn.year()).month(Cn.month()).date(Cn.date()),!r.unlinkPanels&&(!ue.value||ue.value.isAfter(le.value))&&(oe.value=Cn.subtract(1,"month"),ue.value=le.value.subtract(1,"month")))}},ma=(vn,wn)=>{ze.value[wn]=null},ca=(vn,wn)=>{Ue.value[wn]=vn;const Cn=dayjs(vn,In.value).locale(ae.value);Cn.isValid()&&(wn==="min"?(Dn.value=!0,ue.value=(ue.value||oe.value).hour(Cn.hour()).minute(Cn.minute()).second(Cn.second()),(!le.value||le.value.isBefore(ue.value))&&(le.value=ue.value)):(Qn.value=!0,le.value=(le.value||re.value).hour(Cn.hour()).minute(Cn.minute()).second(Cn.second()),re.value=le.value,le.value&&le.value.isBefore(ue.value)&&(ue.value=le.value)))},pe=(vn,wn)=>{Ue.value[wn]=null,wn==="min"?(oe.value=ue.value,Dn.value=!1):(re.value=le.value,Qn.value=!1)},Oe=(vn,wn,Cn)=>{Ue.value.min||(vn&&(oe.value=vn,ue.value=(ue.value||oe.value).hour(vn.hour()).minute(vn.minute()).second(vn.second())),Cn||(Dn.value=wn),(!le.value||le.value.isBefore(ue.value))&&(le.value=ue.value,re.value=vn))},Ve=(vn,wn,Cn)=>{Ue.value.max||(vn&&(re.value=vn,le.value=(le.value||re.value).hour(vn.hour()).minute(vn.minute()).second(vn.second())),Cn||(Qn.value=wn),le.value&&le.value.isBefore(ue.value)&&(ue.value=le.value))},qe=()=>{oe.value=getDefaultValue(unref(j),{lang:unref(ae),unit:"month",unlinkPanels:r.unlinkPanels})[0],re.value=oe.value.add(1,"month"),n("pick",null)},Et=vn=>isArray$3(vn)?vn.map(wn=>wn.format($)):vn.format($),Lt=vn=>isArray$3(vn)?vn.map(wn=>dayjs(wn,$).locale(ae.value)):dayjs(vn,$).locale(ae.value);function _n(vn,wn){if(r.unlinkPanels&&wn){const Cn=vn?.year()||0,Bn=vn?.month()||0,zn=wn.year(),Fn=wn.month();re.value=Cn===zn&&Bn===Fn?wn.add(1,unit$1):wn}else re.value=oe.value.add(1,unit$1),wn&&(re.value=re.value.hour(wn.hour()).minute(wn.minute()).second(wn.second()))}return n("set-picker-option",["isValidValue",ra]),n("set-picker-option",["parseUserInput",Lt]),n("set-picker-option",["formatToString",Et]),n("set-picker-option",["handleClear",qe]),(vn,wn)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(he).b(),unref(_e).b(),{"has-sidebar":vn.$slots.sidebar||unref(Rn),"has-time":unref($n)}])},[createBaseVNode("div",{class:normalizeClass(unref(he).e("body-wrapper"))},[renderSlot(vn.$slots,"sidebar",{class:normalizeClass(unref(he).e("sidebar"))}),unref(Rn)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(he).e("sidebar"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(z),(Cn,Bn)=>(openBlock(),createElementBlock("button",{key:Bn,type:"button",class:normalizeClass(unref(he).e("shortcut")),onClick:zn=>unref($e)(Cn)},toDisplayString$1(Cn.text),11,_hoisted_1$1U))),128))],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(he).e("body"))},[unref($n)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(_e).e("time-header"))},[createBaseVNode("span",{class:normalizeClass(unref(_e).e("editors-wrap"))},[createBaseVNode("span",{class:normalizeClass(unref(_e).e("time-picker-wrap"))},[createVNode(unref(ElInput),{size:"small",disabled:unref(de).selecting,placeholder:unref(Ie)("el.datepicker.startDate"),class:normalizeClass(unref(_e).e("editor")),"model-value":unref(Tn),"validate-event":!1,onInput:wn[0]||(wn[0]=Cn=>la(Cn,"min")),onChange:wn[1]||(wn[1]=Cn=>ma(Cn,"min"))},null,8,["disabled","placeholder","class","model-value"])],2),withDirectives((openBlock(),createElementBlock("span",{class:normalizeClass(unref(_e).e("time-picker-wrap"))},[createVNode(unref(ElInput),{size:"small",class:normalizeClass(unref(_e).e("editor")),disabled:unref(de).selecting,placeholder:unref(Ie)("el.datepicker.startTime"),"model-value":unref(Sn),"validate-event":!1,onFocus:wn[2]||(wn[2]=Cn=>Dn.value=!0),onInput:wn[3]||(wn[3]=Cn=>ca(Cn,"min")),onChange:wn[4]||(wn[4]=Cn=>pe(Cn,"min"))},null,8,["class","disabled","placeholder","model-value"]),createVNode(unref(TimePickPanel),{visible:Dn.value,format:unref(In),"datetime-role":"start","parsed-value":oe.value,onPick:Oe},null,8,["visible","format","parsed-value"])],2)),[[unref(ClickOutside),oa]])],2),createBaseVNode("span",null,[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})]),createBaseVNode("span",{class:normalizeClass([unref(_e).e("editors-wrap"),"is-right"])},[createBaseVNode("span",{class:normalizeClass(unref(_e).e("time-picker-wrap"))},[createVNode(unref(ElInput),{size:"small",class:normalizeClass(unref(_e).e("editor")),disabled:unref(de).selecting,placeholder:unref(Ie)("el.datepicker.endDate"),"model-value":unref(Ln),readonly:!unref(ue),"validate-event":!1,onInput:wn[5]||(wn[5]=Cn=>la(Cn,"max")),onChange:wn[6]||(wn[6]=Cn=>ma(Cn,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"])],2),withDirectives((openBlock(),createElementBlock("span",{class:normalizeClass(unref(_e).e("time-picker-wrap"))},[createVNode(unref(ElInput),{size:"small",class:normalizeClass(unref(_e).e("editor")),disabled:unref(de).selecting,placeholder:unref(Ie)("el.datepicker.endTime"),"model-value":unref(An),readonly:!unref(ue),"validate-event":!1,onFocus:wn[7]||(wn[7]=Cn=>unref(ue)&&(Qn.value=!0)),onInput:wn[8]||(wn[8]=Cn=>ca(Cn,"max")),onChange:wn[9]||(wn[9]=Cn=>pe(Cn,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"]),createVNode(unref(TimePickPanel),{"datetime-role":"end",visible:Qn.value,format:unref(In),"parsed-value":re.value,onPick:Ve},null,8,["visible","format","parsed-value"])],2)),[[unref(ClickOutside),na]])],2)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass([[unref(he).e("content"),unref(_e).e("content")],"is-left"])},[createBaseVNode("div",{class:normalizeClass(unref(_e).e("header"))},[createBaseVNode("button",{type:"button",class:normalizeClass([unref(he).e("icon-btn"),"d-arrow-left"]),onClick:da},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_left_default))]),_:1})],2),createBaseVNode("button",{type:"button",class:normalizeClass([unref(he).e("icon-btn"),"arrow-left"]),onClick:ua},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1})],2),vn.unlinkPanels?(openBlock(),createElementBlock("button",{key:0,type:"button",disabled:!unref(bn),class:normalizeClass([[unref(he).e("icon-btn"),{"is-disabled":!unref(bn)}],"d-arrow-right"]),onClick:En},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_right_default))]),_:1})],10,_hoisted_2$1C)):createCommentVNode("v-if",!0),vn.unlinkPanels?(openBlock(),createElementBlock("button",{key:1,type:"button",disabled:!unref(Hn),class:normalizeClass([[unref(he).e("icon-btn"),{"is-disabled":!unref(Hn)}],"arrow-right"]),onClick:Zn},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})],10,_hoisted_3$$)):createCommentVNode("v-if",!0),createBaseVNode("div",null,toDisplayString$1(unref(Pt)),1)],2),createVNode(DateTable,{"selection-mode":"range",date:oe.value,"min-date":unref(ue),"max-date":unref(le),"range-state":unref(de),"disabled-date":unref(y),"cell-class-name":unref(k),onChangerange:unref(xe),onPick:At,onSelect:unref(Ce)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2),createBaseVNode("div",{class:normalizeClass([[unref(he).e("content"),unref(_e).e("content")],"is-right"])},[createBaseVNode("div",{class:normalizeClass(unref(_e).e("header"))},[vn.unlinkPanels?(openBlock(),createElementBlock("button",{key:0,type:"button",disabled:!unref(bn),class:normalizeClass([[unref(he).e("icon-btn"),{"is-disabled":!unref(bn)}],"d-arrow-left"]),onClick:ha},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_left_default))]),_:1})],10,_hoisted_4$Q)):createCommentVNode("v-if",!0),vn.unlinkPanels?(openBlock(),createElementBlock("button",{key:1,type:"button",disabled:!unref(Hn),class:normalizeClass([[unref(he).e("icon-btn"),{"is-disabled":!unref(Hn)}],"arrow-left"]),onClick:xa},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1})],10,_hoisted_5$G)):createCommentVNode("v-if",!0),createBaseVNode("button",{type:"button",class:normalizeClass([unref(he).e("icon-btn"),"d-arrow-right"]),onClick:aa},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_right_default))]),_:1})],2),createBaseVNode("button",{type:"button",class:normalizeClass([unref(he).e("icon-btn"),"arrow-right"]),onClick:Nn},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})],2),createBaseVNode("div",null,toDisplayString$1(unref(hn)),1)],2),createVNode(DateTable,{"selection-mode":"range",date:re.value,"min-date":unref(ue),"max-date":unref(le),"range-state":unref(de),"disabled-date":unref(y),"cell-class-name":unref(k),onChangerange:unref(xe),onPick:At,onSelect:unref(Ce)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2)],2)],2),unref($n)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(he).e("footer"))},[unref(L)?(openBlock(),createBlock(unref(ElButton),{key:0,text:"",size:"small",class:normalizeClass(unref(he).e("link-btn")),onClick:qe},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(Ie)("el.datepicker.clear")),1)]),_:1},8,["class"])):createCommentVNode("v-if",!0),createVNode(unref(ElButton),{plain:"",size:"small",class:normalizeClass(unref(he).e("link-btn")),disabled:unref(Xn),onClick:wn[10]||(wn[10]=Cn=>unref(Ne)(!1))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(Ie)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2)):createCommentVNode("v-if",!0)],2))}});var DateRangePickPanel=_export_sfc$1(_sfc_main$2y,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-range.vue"]]);const panelMonthRangeProps=buildProps({...panelRangeSharedProps}),panelMonthRangeEmits=["pick","set-picker-option"],useMonthRangeHeader=({unlinkPanels:e,leftDate:n,rightDate:r})=>{const{t:g}=useLocale(),y=()=>{n.value=n.value.subtract(1,"year"),e.value||(r.value=r.value.subtract(1,"year"))},k=()=>{e.value||(n.value=n.value.add(1,"year")),r.value=r.value.add(1,"year")},$=()=>{n.value=n.value.add(1,"year")},V=()=>{r.value=r.value.subtract(1,"year")},L=computed(()=>`${n.value.year()} ${g("el.datepicker.year")}`),z=computed(()=>`${r.value.year()} ${g("el.datepicker.year")}`),j=computed(()=>n.value.year()),ae=computed(()=>r.value.year()===n.value.year()?n.value.year()+1:r.value.year());return{leftPrevYear:y,rightNextYear:k,leftNextYear:$,rightPrevYear:V,leftLabel:L,rightLabel:z,leftYear:j,rightYear:ae}},_hoisted_1$1T=["onClick"],_hoisted_2$1B=["disabled"],_hoisted_3$_=["disabled"],unit="year",__default__$R=defineComponent({name:"DatePickerMonthRange"}),_sfc_main$2x=defineComponent({...__default__$R,props:panelMonthRangeProps,emits:panelMonthRangeEmits,setup(e,{emit:n}){const r=e,{lang:g}=useLocale(),y=inject("EP_PICKER_BASE"),{shortcuts:k,disabledDate:$,format:V}=y.props,L=toRef(y.props,"defaultValue"),z=ref(dayjs().locale(g.value)),j=ref(dayjs().locale(g.value).add(1,unit)),{minDate:ae,maxDate:oe,rangeState:re,ppNs:ue,drpNs:le,handleChangeRange:de,handleRangeConfirm:he,handleShortcutClick:_e,onSelect:xe}=useRangePicker(r,{defaultValue:L,leftDate:z,rightDate:j,unit,onParsedValueChanged:Rn}),Ne=computed(()=>!!k.length),{leftPrevYear:$e,rightNextYear:Ce,leftNextYear:Ie,rightPrevYear:ze,leftLabel:Ue,rightLabel:Pt,leftYear:hn,rightYear:Dt}=useMonthRangeHeader({unlinkPanels:toRef(r,"unlinkPanels"),leftDate:z,rightDate:j}),xn=computed(()=>r.unlinkPanels&&Dt.value>hn.value+1),jt=(Tn,Ln=!0)=>{const Sn=Tn.minDate,An=Tn.maxDate;oe.value===An&&ae.value===Sn||(oe.value=An,ae.value=Sn,Ln&&he())},Vn=Tn=>Tn.map(Ln=>Ln.format(V));function Rn(Tn,Ln){if(r.unlinkPanels&&Ln){const Sn=Tn?.year()||0,An=Ln.year();j.value=Sn===An?Ln.add(1,unit):Ln}else j.value=z.value.add(1,unit)}return n("set-picker-option",["formatToString",Vn]),(Tn,Ln)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(ue).b(),unref(le).b(),{"has-sidebar":!!Tn.$slots.sidebar||unref(Ne)}])},[createBaseVNode("div",{class:normalizeClass(unref(ue).e("body-wrapper"))},[renderSlot(Tn.$slots,"sidebar",{class:normalizeClass(unref(ue).e("sidebar"))}),unref(Ne)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(ue).e("sidebar"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(k),(Sn,An)=>(openBlock(),createElementBlock("button",{key:An,type:"button",class:normalizeClass(unref(ue).e("shortcut")),onClick:In=>unref(_e)(Sn)},toDisplayString$1(Sn.text),11,_hoisted_1$1T))),128))],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(ue).e("body"))},[createBaseVNode("div",{class:normalizeClass([[unref(ue).e("content"),unref(le).e("content")],"is-left"])},[createBaseVNode("div",{class:normalizeClass(unref(le).e("header"))},[createBaseVNode("button",{type:"button",class:normalizeClass([unref(ue).e("icon-btn"),"d-arrow-left"]),onClick:Ln[0]||(Ln[0]=(...Sn)=>unref($e)&&unref($e)(...Sn))},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_left_default))]),_:1})],2),Tn.unlinkPanels?(openBlock(),createElementBlock("button",{key:0,type:"button",disabled:!unref(xn),class:normalizeClass([[unref(ue).e("icon-btn"),{[unref(ue).is("disabled")]:!unref(xn)}],"d-arrow-right"]),onClick:Ln[1]||(Ln[1]=(...Sn)=>unref(Ie)&&unref(Ie)(...Sn))},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_right_default))]),_:1})],10,_hoisted_2$1B)):createCommentVNode("v-if",!0),createBaseVNode("div",null,toDisplayString$1(unref(Ue)),1)],2),createVNode(MonthTable,{"selection-mode":"range",date:z.value,"min-date":unref(ae),"max-date":unref(oe),"range-state":unref(re),"disabled-date":unref($),onChangerange:unref(de),onPick:jt,onSelect:unref(xe)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),createBaseVNode("div",{class:normalizeClass([[unref(ue).e("content"),unref(le).e("content")],"is-right"])},[createBaseVNode("div",{class:normalizeClass(unref(le).e("header"))},[Tn.unlinkPanels?(openBlock(),createElementBlock("button",{key:0,type:"button",disabled:!unref(xn),class:normalizeClass([[unref(ue).e("icon-btn"),{"is-disabled":!unref(xn)}],"d-arrow-left"]),onClick:Ln[2]||(Ln[2]=(...Sn)=>unref(ze)&&unref(ze)(...Sn))},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_left_default))]),_:1})],10,_hoisted_3$_)):createCommentVNode("v-if",!0),createBaseVNode("button",{type:"button",class:normalizeClass([unref(ue).e("icon-btn"),"d-arrow-right"]),onClick:Ln[3]||(Ln[3]=(...Sn)=>unref(Ce)&&unref(Ce)(...Sn))},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_right_default))]),_:1})],2),createBaseVNode("div",null,toDisplayString$1(unref(Pt)),1)],2),createVNode(MonthTable,{"selection-mode":"range",date:j.value,"min-date":unref(ae),"max-date":unref(oe),"range-state":unref(re),"disabled-date":unref($),onChangerange:unref(de),onPick:jt,onSelect:unref(xe)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var MonthRangePickPanel=_export_sfc$1(_sfc_main$2x,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-month-range.vue"]]);const getPanel$1=function(e){switch(e){case"daterange":case"datetimerange":return DateRangePickPanel;case"monthrange":return MonthRangePickPanel;default:return DatePickPanel}};dayjs.extend(localeData);dayjs.extend(advancedFormat);dayjs.extend(customParseFormat);dayjs.extend(weekOfYear);dayjs.extend(weekYear);dayjs.extend(dayOfYear);dayjs.extend(isSameOrAfter);dayjs.extend(isSameOrBefore);var DatePicker=defineComponent({name:"ElDatePicker",install:null,props:datePickerProps,emits:["update:modelValue"],setup(e,{expose:n,emit:r,slots:g}){const y=useNamespace("picker-panel");provide("ElPopperOptions",reactive(toRef(e,"popperOptions"))),provide(ROOT_PICKER_INJECTION_KEY,{slots:g,pickerNs:y});const k=ref();n({focus:(L=!0)=>{var z;(z=k.value)==null||z.focus(L)},handleOpen:()=>{var L;(L=k.value)==null||L.handleOpen()},handleClose:()=>{var L;(L=k.value)==null||L.handleClose()}});const V=L=>{r("update:modelValue",L)};return()=>{var L;const z=(L=e.format)!=null?L:DEFAULT_FORMATS_DATEPICKER[e.type]||DEFAULT_FORMATS_DATE,j=getPanel$1(e.type);return createVNode(CommonPicker,mergeProps(e,{format:z,type:e.type,ref:k,"onUpdate:modelValue":V}),{default:ae=>createVNode(j,ae,null),"range-separator":g["range-separator"]})}}});const _DatePicker=DatePicker;_DatePicker.install=e=>{e.component(_DatePicker.name,_DatePicker)};const ElDatePicker=_DatePicker,descriptionsKey=Symbol("elDescriptions");var ElDescriptionsCell=defineComponent({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String},type:{type:String}},setup(){return{descriptions:inject(descriptionsKey,{})}},render(){var e,n,r,g,y,k;const $=getNormalizedProps(this.cell),{border:V,direction:L}=this.descriptions,z=L==="vertical",j=((r=(n=(e=this.cell)==null?void 0:e.children)==null?void 0:n.label)==null?void 0:r.call(n))||$.label,ae=(k=(y=(g=this.cell)==null?void 0:g.children)==null?void 0:y.default)==null?void 0:k.call(y),oe=$.span,re=$.align?`is-${$.align}`:"",ue=$.labelAlign?`is-${$.labelAlign}`:re,le=$.className,de=$.labelClassName,he={width:addUnit($.width),minWidth:addUnit($.minWidth)},_e=useNamespace("descriptions");switch(this.type){case"label":return h$1(this.tag,{style:he,class:[_e.e("cell"),_e.e("label"),_e.is("bordered-label",V),_e.is("vertical-label",z),ue,de],colSpan:z?oe:1},j);case"content":return h$1(this.tag,{style:he,class:[_e.e("cell"),_e.e("content"),_e.is("bordered-content",V),_e.is("vertical-content",z),re,le],colSpan:z?oe:oe*2-1},ae);default:return h$1("td",{style:he,class:[_e.e("cell"),re],colSpan:oe},[isNil(j)?void 0:h$1("span",{class:[_e.e("label"),de]},j),h$1("span",{class:[_e.e("content"),le]},ae)])}}});const descriptionsRowProps=buildProps({row:{type:Array,default:()=>[]}}),_hoisted_1$1S={key:1},__default__$Q=defineComponent({name:"ElDescriptionsRow"}),_sfc_main$2w=defineComponent({...__default__$Q,props:descriptionsRowProps,setup(e){const n=inject(descriptionsKey,{});return(r,g)=>unref(n).direction==="vertical"?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("tr",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.row,(y,k)=>(openBlock(),createBlock(unref(ElDescriptionsCell),{key:`tr1-${k}`,cell:y,tag:"th",type:"label"},null,8,["cell"]))),128))]),createBaseVNode("tr",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.row,(y,k)=>(openBlock(),createBlock(unref(ElDescriptionsCell),{key:`tr2-${k}`,cell:y,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(openBlock(),createElementBlock("tr",_hoisted_1$1S,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.row,(y,k)=>(openBlock(),createElementBlock(Fragment,{key:`tr3-${k}`},[unref(n).border?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(unref(ElDescriptionsCell),{cell:y,tag:"td",type:"label"},null,8,["cell"]),createVNode(unref(ElDescriptionsCell),{cell:y,tag:"td",type:"content"},null,8,["cell"])],64)):(openBlock(),createBlock(unref(ElDescriptionsCell),{key:1,cell:y,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var ElDescriptionsRow=_export_sfc$1(_sfc_main$2w,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/descriptions-row.vue"]]);const descriptionProps=buildProps({border:{type:Boolean,default:!1},column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:useSizeProp,title:{type:String,default:""},extra:{type:String,default:""}}),__default__$P=defineComponent({name:"ElDescriptions"}),_sfc_main$2v=defineComponent({...__default__$P,props:descriptionProps,setup(e){const n=e,r=useNamespace("descriptions"),g=useFormSize(),y=useSlots();provide(descriptionsKey,n);const k=computed(()=>[r.b(),r.m(g.value)]),$=(L,z,j,ae=!1)=>(L.props||(L.props={}),z>j&&(L.props.span=j),ae&&(L.props.span=z),L),V=()=>{var L;const z=flattedChildren((L=y.default)==null?void 0:L.call(y)).filter(ue=>{var le;return((le=ue?.type)==null?void 0:le.name)==="ElDescriptionsItem"}),j=[];let ae=[],oe=n.column,re=0;return z.forEach((ue,le)=>{var de;const he=((de=ue.props)==null?void 0:de.span)||1;if(le<z.length-1&&(re+=he>oe?oe:he),le===z.length-1){const _e=n.column-re%n.column;ae.push($(ue,_e,oe,!0)),j.push(ae);return}he<oe?(oe-=he,ae.push(ue)):(ae.push($(ue,he,oe)),j.push(ae),oe=n.column,ae=[])}),j};return(L,z)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(k))},[L.title||L.extra||L.$slots.title||L.$slots.extra?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(r).e("header"))},[createBaseVNode("div",{class:normalizeClass(unref(r).e("title"))},[renderSlot(L.$slots,"title",{},()=>[createTextVNode(toDisplayString$1(L.title),1)])],2),createBaseVNode("div",{class:normalizeClass(unref(r).e("extra"))},[renderSlot(L.$slots,"extra",{},()=>[createTextVNode(toDisplayString$1(L.extra),1)])],2)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(r).e("body"))},[createBaseVNode("table",{class:normalizeClass([unref(r).e("table"),unref(r).is("bordered",L.border)])},[createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(V(),(j,ae)=>(openBlock(),createBlock(ElDescriptionsRow,{key:ae,row:j},null,8,["row"]))),128))])],2)],2)],2))}});var Descriptions=_export_sfc$1(_sfc_main$2v,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/description.vue"]]),DescriptionsItem=defineComponent({name:"ElDescriptionsItem",props:{label:{type:String,default:""},span:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}});const ElDescriptions=withInstall(Descriptions,{DescriptionsItem}),ElDescriptionsItem=withNoopInstall(DescriptionsItem),overlayProps=buildProps({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:definePropType([String,Array,Object])},zIndex:{type:definePropType([String,Number])}}),overlayEmits={click:e=>e instanceof MouseEvent},BLOCK="overlay";var Overlay$1=defineComponent({name:"ElOverlay",props:overlayProps,emits:overlayEmits,setup(e,{slots:n,emit:r}){const g=useNamespace(BLOCK),y=L=>{r("click",L)},{onClick:k,onMousedown:$,onMouseup:V}=useSameTarget(e.customMaskEvent?void 0:y);return()=>e.mask?createVNode("div",{class:[g.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:k,onMousedown:$,onMouseup:V},[renderSlot(n,"default")],PatchFlags.STYLE|PatchFlags.CLASS|PatchFlags.PROPS,["onClick","onMouseup","onMousedown"]):h$1("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[renderSlot(n,"default")])}});const ElOverlay=Overlay$1,dialogInjectionKey=Symbol("dialogInjectionKey"),dialogContentProps=buildProps({center:Boolean,alignCenter:Boolean,closeIcon:{type:iconPropType},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),dialogContentEmits={close:()=>!0},_hoisted_1$1R=["aria-level"],_hoisted_2$1A=["aria-label"],_hoisted_3$Z=["id"],__default__$O=defineComponent({name:"ElDialogContent"}),_sfc_main$2u=defineComponent({...__default__$O,props:dialogContentProps,emits:dialogContentEmits,setup(e){const n=e,{t:r}=useLocale(),{Close:g}=CloseComponents,{dialogRef:y,headerRef:k,bodyId:$,ns:V,style:L}=inject(dialogInjectionKey),{focusTrapRef:z}=inject(FOCUS_TRAP_INJECTION_KEY),j=computed(()=>[V.b(),V.is("fullscreen",n.fullscreen),V.is("draggable",n.draggable),V.is("align-center",n.alignCenter),{[V.m("center")]:n.center},n.customClass]),ae=composeRefs(z,y),oe=computed(()=>n.draggable);return useDraggable(y,k,oe),(re,ue)=>(openBlock(),createElementBlock("div",{ref:unref(ae),class:normalizeClass(unref(j)),style:normalizeStyle(unref(L)),tabindex:"-1"},[createBaseVNode("header",{ref_key:"headerRef",ref:k,class:normalizeClass(unref(V).e("header"))},[renderSlot(re.$slots,"header",{},()=>[createBaseVNode("span",{role:"heading","aria-level":re.ariaLevel,class:normalizeClass(unref(V).e("title"))},toDisplayString$1(re.title),11,_hoisted_1$1R)]),re.showClose?(openBlock(),createElementBlock("button",{key:0,"aria-label":unref(r)("el.dialog.close"),class:normalizeClass(unref(V).e("headerbtn")),type:"button",onClick:ue[0]||(ue[0]=le=>re.$emit("close"))},[createVNode(unref(ElIcon),{class:normalizeClass(unref(V).e("close"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(re.closeIcon||unref(g))))]),_:1},8,["class"])],10,_hoisted_2$1A)):createCommentVNode("v-if",!0)],2),createBaseVNode("div",{id:unref($),class:normalizeClass(unref(V).e("body"))},[renderSlot(re.$slots,"default")],10,_hoisted_3$Z),re.$slots.footer?(openBlock(),createElementBlock("footer",{key:0,class:normalizeClass(unref(V).e("footer"))},[renderSlot(re.$slots,"footer")],2)):createCommentVNode("v-if",!0)],6))}});var ElDialogContent=_export_sfc$1(_sfc_main$2u,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const dialogProps=buildProps({...dialogContentProps,appendToBody:Boolean,beforeClose:{type:definePropType(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),dialogEmits={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[UPDATE_MODEL_EVENT]:e=>isBoolean$1(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},useDialog=(e,n)=>{const g=getCurrentInstance().emit,{nextZIndex:y}=useZIndex();let k="";const $=useId(),V=useId(),L=ref(!1),z=ref(!1),j=ref(!1),ae=ref(e.zIndex||y());let oe,re;const ue=useGlobalConfig("namespace",defaultNamespace),le=computed(()=>{const jt={},Vn=`--${ue.value}-dialog`;return e.fullscreen||(e.top&&(jt[`${Vn}-margin-top`]=e.top),e.width&&(jt[`${Vn}-width`]=addUnit(e.width))),jt}),de=computed(()=>e.alignCenter?{display:"flex"}:{});function he(){g("opened")}function _e(){g("closed"),g(UPDATE_MODEL_EVENT,!1),e.destroyOnClose&&(j.value=!1)}function xe(){g("close")}function Ne(){re?.(),oe?.(),e.openDelay&&e.openDelay>0?{stop:oe}=useTimeoutFn(()=>ze(),e.openDelay):ze()}function $e(){oe?.(),re?.(),e.closeDelay&&e.closeDelay>0?{stop:re}=useTimeoutFn(()=>Ue(),e.closeDelay):Ue()}function Ce(){function jt(Vn){Vn||(z.value=!0,L.value=!1)}e.beforeClose?e.beforeClose(jt):$e()}function Ie(){e.closeOnClickModal&&Ce()}function ze(){isClient&&(L.value=!0)}function Ue(){L.value=!1}function Pt(){g("openAutoFocus")}function hn(){g("closeAutoFocus")}function Dt(jt){var Vn;((Vn=jt.detail)==null?void 0:Vn.focusReason)==="pointer"&&jt.preventDefault()}e.lockScroll&&useLockscreen(L);function xn(){e.closeOnPressEscape&&Ce()}return watch(()=>e.modelValue,jt=>{jt?(z.value=!1,Ne(),j.value=!0,ae.value=e.zIndex?ae.value++:y(),nextTick(()=>{g("open"),n.value&&(n.value.scrollTop=0)})):L.value&&$e()}),watch(()=>e.fullscreen,jt=>{n.value&&(jt?(k=n.value.style.transform,n.value.style.transform=""):n.value.style.transform=k)}),onMounted(()=>{e.modelValue&&(L.value=!0,j.value=!0,Ne())}),{afterEnter:he,afterLeave:_e,beforeLeave:xe,handleClose:Ce,onModalClick:Ie,close:$e,doClose:Ue,onOpenAutoFocus:Pt,onCloseAutoFocus:hn,onCloseRequested:xn,onFocusoutPrevented:Dt,titleId:$,bodyId:V,closed:z,style:le,overlayDialogStyle:de,rendered:j,visible:L,zIndex:ae}},_hoisted_1$1Q=["aria-label","aria-labelledby","aria-describedby"],__default__$N=defineComponent({name:"ElDialog",inheritAttrs:!1}),_sfc_main$2t=defineComponent({...__default__$N,props:dialogProps,emits:dialogEmits,setup(e,{expose:n}){const r=e,g=useSlots();useDeprecated({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},computed(()=>!!g.title)),useDeprecated({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},computed(()=>!!r.customClass));const y=useNamespace("dialog"),k=ref(),$=ref(),V=ref(),{visible:L,titleId:z,bodyId:j,style:ae,overlayDialogStyle:oe,rendered:re,zIndex:ue,afterEnter:le,afterLeave:de,beforeLeave:he,handleClose:_e,onModalClick:xe,onOpenAutoFocus:Ne,onCloseAutoFocus:$e,onCloseRequested:Ce,onFocusoutPrevented:Ie}=useDialog(r,k);provide(dialogInjectionKey,{dialogRef:k,headerRef:$,bodyId:j,ns:y,rendered:re,style:ae});const ze=useSameTarget(xe),Ue=computed(()=>r.draggable&&!r.fullscreen);return n({visible:L,dialogContentRef:V}),(Pt,hn)=>(openBlock(),createBlock(Teleport,{to:"body",disabled:!Pt.appendToBody},[createVNode(Transition,{name:"dialog-fade",onAfterEnter:unref(le),onAfterLeave:unref(de),onBeforeLeave:unref(he),persisted:""},{default:withCtx(()=>[withDirectives(createVNode(unref(ElOverlay),{"custom-mask-event":"",mask:Pt.modal,"overlay-class":Pt.modalClass,"z-index":unref(ue)},{default:withCtx(()=>[createBaseVNode("div",{role:"dialog","aria-modal":"true","aria-label":Pt.title||void 0,"aria-labelledby":Pt.title?void 0:unref(z),"aria-describedby":unref(j),class:normalizeClass(`${unref(y).namespace.value}-overlay-dialog`),style:normalizeStyle(unref(oe)),onClick:hn[0]||(hn[0]=(...Dt)=>unref(ze).onClick&&unref(ze).onClick(...Dt)),onMousedown:hn[1]||(hn[1]=(...Dt)=>unref(ze).onMousedown&&unref(ze).onMousedown(...Dt)),onMouseup:hn[2]||(hn[2]=(...Dt)=>unref(ze).onMouseup&&unref(ze).onMouseup(...Dt))},[createVNode(unref(ElFocusTrap),{loop:"",trapped:unref(L),"focus-start-el":"container",onFocusAfterTrapped:unref(Ne),onFocusAfterReleased:unref($e),onFocusoutPrevented:unref(Ie),onReleaseRequested:unref(Ce)},{default:withCtx(()=>[unref(re)?(openBlock(),createBlock(ElDialogContent,mergeProps({key:0,ref_key:"dialogContentRef",ref:V},Pt.$attrs,{"custom-class":Pt.customClass,center:Pt.center,"align-center":Pt.alignCenter,"close-icon":Pt.closeIcon,draggable:unref(Ue),fullscreen:Pt.fullscreen,"show-close":Pt.showClose,title:Pt.title,"aria-level":Pt.headerAriaLevel,onClose:unref(_e)}),createSlots({header:withCtx(()=>[Pt.$slots.title?renderSlot(Pt.$slots,"title",{key:1}):renderSlot(Pt.$slots,"header",{key:0,close:unref(_e),titleId:unref(z),titleClass:unref(y).e("title")})]),default:withCtx(()=>[renderSlot(Pt.$slots,"default")]),_:2},[Pt.$slots.footer?{name:"footer",fn:withCtx(()=>[renderSlot(Pt.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):createCommentVNode("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,_hoisted_1$1Q)]),_:3},8,["mask","overlay-class","z-index"]),[[vShow,unref(L)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var Dialog=_export_sfc$1(_sfc_main$2t,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const ElDialog=withInstall(Dialog),dividerProps=buildProps({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:definePropType(String),default:"solid"}}),__default__$M=defineComponent({name:"ElDivider"}),_sfc_main$2s=defineComponent({...__default__$M,props:dividerProps,setup(e){const n=e,r=useNamespace("divider"),g=computed(()=>r.cssVar({"border-style":n.borderStyle}));return(y,k)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(r).b(),unref(r).m(y.direction)]),style:normalizeStyle(unref(g)),role:"separator"},[y.$slots.default&&y.direction!=="vertical"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([unref(r).e("text"),unref(r).is(y.contentPosition)])},[renderSlot(y.$slots,"default")],2)):createCommentVNode("v-if",!0)],6))}});var Divider=_export_sfc$1(_sfc_main$2s,[["__file","/home/runner/work/element-plus/element-plus/packages/components/divider/src/divider.vue"]]);const ElDivider=withInstall(Divider),drawerProps=buildProps({...dialogProps,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),drawerEmits=dialogEmits,_sfc_main$2r=defineComponent({name:"ElDrawer",components:{ElOverlay,ElFocusTrap,ElIcon,Close:close_default},inheritAttrs:!1,props:drawerProps,emits:drawerEmits,setup(e,{slots:n}){useDeprecated({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},computed(()=>!!n.title)),useDeprecated({scope:"el-drawer",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/drawer.html#attributes",type:"Attribute"},computed(()=>!!e.customClass));const r=ref(),g=ref(),y=useNamespace("drawer"),{t:k}=useLocale(),$=computed(()=>e.direction==="rtl"||e.direction==="ltr"),V=computed(()=>addUnit(e.size));return{...useDialog(e,r),drawerRef:r,focusStartRef:g,isHorizontal:$,drawerSize:V,ns:y,t:k}}}),_hoisted_1$1P=["aria-label","aria-labelledby","aria-describedby"],_hoisted_2$1z=["id","aria-level"],_hoisted_3$Y=["aria-label"],_hoisted_4$P=["id"];function _sfc_render$o(e,n,r,g,y,k){const $=resolveComponent("close"),V=resolveComponent("el-icon"),L=resolveComponent("el-focus-trap"),z=resolveComponent("el-overlay");return openBlock(),createBlock(Teleport,{to:"body",disabled:!e.appendToBody},[createVNode(Transition,{name:e.ns.b("fade"),onAfterEnter:e.afterEnter,onAfterLeave:e.afterLeave,onBeforeLeave:e.beforeLeave,persisted:""},{default:withCtx(()=>[withDirectives(createVNode(z,{mask:e.modal,"overlay-class":e.modalClass,"z-index":e.zIndex,onClick:e.onModalClick},{default:withCtx(()=>[createVNode(L,{loop:"",trapped:e.visible,"focus-trap-el":e.drawerRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:withCtx(()=>[createBaseVNode("div",mergeProps({ref:"drawerRef","aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:e.titleId,"aria-describedby":e.bodyId},e.$attrs,{class:[e.ns.b(),e.direction,e.visible&&"open",e.customClass],style:e.isHorizontal?"width: "+e.drawerSize:"height: "+e.drawerSize,role:"dialog",onClick:n[1]||(n[1]=withModifiers(()=>{},["stop"]))}),[createBaseVNode("span",{ref:"focusStartRef",class:normalizeClass(e.ns.e("sr-focus")),tabindex:"-1"},null,2),e.withHeader?(openBlock(),createElementBlock("header",{key:0,class:normalizeClass(e.ns.e("header"))},[e.$slots.title?renderSlot(e.$slots,"title",{key:1},()=>[createCommentVNode(" DEPRECATED SLOT ")]):renderSlot(e.$slots,"header",{key:0,close:e.handleClose,titleId:e.titleId,titleClass:e.ns.e("title")},()=>[e.$slots.title?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",{key:0,id:e.titleId,role:"heading","aria-level":e.headerAriaLevel,class:normalizeClass(e.ns.e("title"))},toDisplayString$1(e.title),11,_hoisted_2$1z))]),e.showClose?(openBlock(),createElementBlock("button",{key:2,"aria-label":e.t("el.drawer.close"),class:normalizeClass(e.ns.e("close-btn")),type:"button",onClick:n[0]||(n[0]=(...j)=>e.handleClose&&e.handleClose(...j))},[createVNode(V,{class:normalizeClass(e.ns.e("close"))},{default:withCtx(()=>[createVNode($)]),_:1},8,["class"])],10,_hoisted_3$Y)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),e.rendered?(openBlock(),createElementBlock("div",{key:1,id:e.bodyId,class:normalizeClass(e.ns.e("body"))},[renderSlot(e.$slots,"default")],10,_hoisted_4$P)):createCommentVNode("v-if",!0),e.$slots.footer?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(e.ns.e("footer"))},[renderSlot(e.$slots,"footer")],2)):createCommentVNode("v-if",!0)],16,_hoisted_1$1P)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[vShow,e.visible]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var Drawer=_export_sfc$1(_sfc_main$2r,[["render",_sfc_render$o],["__file","/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]);const ElDrawer=withInstall(Drawer),_sfc_main$2q=defineComponent({inheritAttrs:!1});function _sfc_render$n(e,n,r,g,y,k){return renderSlot(e.$slots,"default")}var Collection=_export_sfc$1(_sfc_main$2q,[["render",_sfc_render$n],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const _sfc_main$2p=defineComponent({name:"ElCollectionItem",inheritAttrs:!1});function _sfc_render$m(e,n,r,g,y,k){return renderSlot(e.$slots,"default")}var CollectionItem=_export_sfc$1(_sfc_main$2p,[["render",_sfc_render$m],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const COLLECTION_ITEM_SIGN="data-el-collection-item",createCollectionWithScope=e=>{const n=`El${e}Collection`,r=`${n}Item`,g=Symbol(n),y=Symbol(r),k={...Collection,name:n,setup(){const V=ref(null),L=new Map;provide(g,{itemMap:L,getItems:()=>{const j=unref(V);if(!j)return[];const ae=Array.from(j.querySelectorAll(`[${COLLECTION_ITEM_SIGN}]`));return[...L.values()].sort((re,ue)=>ae.indexOf(re.ref)-ae.indexOf(ue.ref))},collectionRef:V})}},$={...CollectionItem,name:r,setup(V,{attrs:L}){const z=ref(null),j=inject(g,void 0);provide(y,{collectionItemRef:z}),onMounted(()=>{const ae=unref(z);ae&&j.itemMap.set(ae,{ref:ae,...L})}),onBeforeUnmount(()=>{const ae=unref(z);j.itemMap.delete(ae)})}};return{COLLECTION_INJECTION_KEY:g,COLLECTION_ITEM_INJECTION_KEY:y,ElCollection:k,ElCollectionItem:$}},rovingFocusGroupProps=buildProps({style:{type:definePropType([String,Array,Object])},currentTabId:{type:definePropType(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:definePropType(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:ElCollection$1,ElCollectionItem:ElCollectionItem$1,COLLECTION_INJECTION_KEY:COLLECTION_INJECTION_KEY$1,COLLECTION_ITEM_INJECTION_KEY:COLLECTION_ITEM_INJECTION_KEY$1}=createCollectionWithScope("RovingFocusGroup"),ROVING_FOCUS_GROUP_INJECTION_KEY=Symbol("elRovingFocusGroup"),ROVING_FOCUS_GROUP_ITEM_INJECTION_KEY=Symbol("elRovingFocusGroupItem"),MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},getDirectionAwareKey=(e,n)=>{if(n!=="rtl")return e;switch(e){case EVENT_CODE.right:return EVENT_CODE.left;case EVENT_CODE.left:return EVENT_CODE.right;default:return e}},getFocusIntent=(e,n,r)=>{const g=getDirectionAwareKey(e.key,r);if(!(n==="vertical"&&[EVENT_CODE.left,EVENT_CODE.right].includes(g))&&!(n==="horizontal"&&[EVENT_CODE.up,EVENT_CODE.down].includes(g)))return MAP_KEY_TO_FOCUS_INTENT[g]},reorderArray=(e,n)=>e.map((r,g)=>e[(g+n)%e.length]),focusFirst=e=>{const{activeElement:n}=document;for(const r of e)if(r===n||(r.focus(),n!==document.activeElement))return},CURRENT_TAB_ID_CHANGE_EVT="currentTabIdChange",ENTRY_FOCUS_EVT="rovingFocusGroup.entryFocus",EVT_OPTS={bubbles:!1,cancelable:!0},_sfc_main$2o=defineComponent({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:rovingFocusGroupProps,emits:[CURRENT_TAB_ID_CHANGE_EVT,"entryFocus"],setup(e,{emit:n}){var r;const g=ref((r=e.currentTabId||e.defaultCurrentTabId)!=null?r:null),y=ref(!1),k=ref(!1),$=ref(null),{getItems:V}=inject(COLLECTION_INJECTION_KEY$1,void 0),L=computed(()=>[{outline:"none"},e.style]),z=le=>{n(CURRENT_TAB_ID_CHANGE_EVT,le)},j=()=>{y.value=!0},ae=composeEventHandlers(le=>{var de;(de=e.onMousedown)==null||de.call(e,le)},()=>{k.value=!0}),oe=composeEventHandlers(le=>{var de;(de=e.onFocus)==null||de.call(e,le)},le=>{const de=!unref(k),{target:he,currentTarget:_e}=le;if(he===_e&&de&&!unref(y)){const xe=new Event(ENTRY_FOCUS_EVT,EVT_OPTS);if(_e?.dispatchEvent(xe),!xe.defaultPrevented){const Ne=V().filter(Ue=>Ue.focusable),$e=Ne.find(Ue=>Ue.active),Ce=Ne.find(Ue=>Ue.id===unref(g)),ze=[$e,Ce,...Ne].filter(Boolean).map(Ue=>Ue.ref);focusFirst(ze)}}k.value=!1}),re=composeEventHandlers(le=>{var de;(de=e.onBlur)==null||de.call(e,le)},()=>{y.value=!1}),ue=(...le)=>{n("entryFocus",...le)};provide(ROVING_FOCUS_GROUP_INJECTION_KEY,{currentTabbedId:readonly(g),loop:toRef(e,"loop"),tabIndex:computed(()=>unref(y)?-1:0),rovingFocusGroupRef:$,rovingFocusGroupRootStyle:L,orientation:toRef(e,"orientation"),dir:toRef(e,"dir"),onItemFocus:z,onItemShiftTab:j,onBlur:re,onFocus:oe,onMousedown:ae}),watch(()=>e.currentTabId,le=>{g.value=le??null}),useEventListener($,ENTRY_FOCUS_EVT,ue)}});function _sfc_render$l(e,n,r,g,y,k){return renderSlot(e.$slots,"default")}var ElRovingFocusGroupImpl=_export_sfc$1(_sfc_main$2o,[["render",_sfc_render$l],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]]);const _sfc_main$2n=defineComponent({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:ElCollection$1,ElRovingFocusGroupImpl}});function _sfc_render$k(e,n,r,g,y,k){const $=resolveComponent("el-roving-focus-group-impl"),V=resolveComponent("el-focus-group-collection");return openBlock(),createBlock(V,null,{default:withCtx(()=>[createVNode($,normalizeProps(guardReactiveProps(e.$attrs)),{default:withCtx(()=>[renderSlot(e.$slots,"default")]),_:3},16)]),_:3})}var ElRovingFocusGroup=_export_sfc$1(_sfc_main$2n,[["render",_sfc_render$k],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const _sfc_main$2m=defineComponent({components:{ElRovingFocusCollectionItem:ElCollectionItem$1},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:n}){const{currentTabbedId:r,loop:g,onItemFocus:y,onItemShiftTab:k}=inject(ROVING_FOCUS_GROUP_INJECTION_KEY,void 0),{getItems:$}=inject(COLLECTION_INJECTION_KEY$1,void 0),V=useId(),L=ref(null),z=composeEventHandlers(re=>{n("mousedown",re)},re=>{e.focusable?y(unref(V)):re.preventDefault()}),j=composeEventHandlers(re=>{n("focus",re)},()=>{y(unref(V))}),ae=composeEventHandlers(re=>{n("keydown",re)},re=>{const{key:ue,shiftKey:le,target:de,currentTarget:he}=re;if(ue===EVENT_CODE.tab&&le){k();return}if(de!==he)return;const _e=getFocusIntent(re);if(_e){re.preventDefault();let Ne=$().filter($e=>$e.focusable).map($e=>$e.ref);switch(_e){case"last":{Ne.reverse();break}case"prev":case"next":{_e==="prev"&&Ne.reverse();const $e=Ne.indexOf(he);Ne=g.value?reorderArray(Ne,$e+1):Ne.slice($e+1);break}}nextTick(()=>{focusFirst(Ne)})}}),oe=computed(()=>r.value===unref(V));return provide(ROVING_FOCUS_GROUP_ITEM_INJECTION_KEY,{rovingFocusGroupItemRef:L,tabIndex:computed(()=>unref(oe)?0:-1),handleMousedown:z,handleFocus:j,handleKeydown:ae}),{id:V,handleKeydown:ae,handleFocus:j,handleMousedown:z}}});function _sfc_render$j(e,n,r,g,y,k){const $=resolveComponent("el-roving-focus-collection-item");return openBlock(),createBlock($,{id:e.id,focusable:e.focusable,active:e.active},{default:withCtx(()=>[renderSlot(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var ElRovingFocusItem=_export_sfc$1(_sfc_main$2m,[["render",_sfc_render$j],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const dropdownProps=buildProps({trigger:useTooltipTriggerProps.trigger,effect:{...useTooltipContentProps.effect,default:"light"},type:{type:definePropType(String)},placement:{type:definePropType(String),default:"bottom"},popperOptions:{type:definePropType(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:definePropType([Number,String]),default:0},maxHeight:{type:definePropType([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:definePropType(Object)},teleported:useTooltipContentProps.teleported}),dropdownItemProps=buildProps({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:iconPropType}}),dropdownMenuProps=buildProps({onKeydown:{type:definePropType(Function)}}),FIRST_KEYS=[EVENT_CODE.down,EVENT_CODE.pageDown,EVENT_CODE.home],LAST_KEYS=[EVENT_CODE.up,EVENT_CODE.pageUp,EVENT_CODE.end],FIRST_LAST_KEYS=[...FIRST_KEYS,...LAST_KEYS],{ElCollection,ElCollectionItem,COLLECTION_INJECTION_KEY,COLLECTION_ITEM_INJECTION_KEY}=createCollectionWithScope("Dropdown"),DROPDOWN_INJECTION_KEY=Symbol("elDropdown"),{ButtonGroup:ElButtonGroup}=ElButton,_sfc_main$2l=defineComponent({name:"ElDropdown",components:{ElButton,ElButtonGroup,ElScrollbar,ElDropdownCollection:ElCollection,ElTooltip,ElRovingFocusGroup,ElOnlyChild:OnlyChild,ElIcon,ArrowDown:arrow_down_default},props:dropdownProps,emits:["visible-change","click","command"],setup(e,{emit:n}){const r=getCurrentInstance(),g=useNamespace("dropdown"),{t:y}=useLocale(),k=ref(),$=ref(),V=ref(null),L=ref(null),z=ref(null),j=ref(null),ae=ref(!1),oe=[EVENT_CODE.enter,EVENT_CODE.space,EVENT_CODE.down],re=computed(()=>({maxHeight:addUnit(e.maxHeight)})),ue=computed(()=>[g.m($e.value)]),le=computed(()=>castArray$1(e.trigger)),de=useId().value,he=computed(()=>e.id||de);watch([k,le],([Tn,Ln],[Sn])=>{var An,In,Mn;(An=Sn?.$el)!=null&&An.removeEventListener&&Sn.$el.removeEventListener("pointerenter",Ie),(In=Tn?.$el)!=null&&In.removeEventListener&&Tn.$el.removeEventListener("pointerenter",Ie),(Mn=Tn?.$el)!=null&&Mn.addEventListener&&Ln.includes("hover")&&Tn.$el.addEventListener("pointerenter",Ie)},{immediate:!0}),onBeforeUnmount(()=>{var Tn,Ln;(Ln=(Tn=k.value)==null?void 0:Tn.$el)!=null&&Ln.removeEventListener&&k.value.$el.removeEventListener("pointerenter",Ie)});function _e(){xe()}function xe(){var Tn;(Tn=V.value)==null||Tn.onClose()}function Ne(){var Tn;(Tn=V.value)==null||Tn.onOpen()}const $e=useFormSize();function Ce(...Tn){n("command",...Tn)}function Ie(){var Tn,Ln;(Ln=(Tn=k.value)==null?void 0:Tn.$el)==null||Ln.focus()}function ze(){}function Ue(){const Tn=unref(L);le.value.includes("hover")&&Tn?.focus(),j.value=null}function Pt(Tn){j.value=Tn}function hn(Tn){ae.value||(Tn.preventDefault(),Tn.stopImmediatePropagation())}function Dt(){n("visible-change",!0)}function xn(Tn){Tn?.type==="keydown"&&L.value.focus()}function jt(){n("visible-change",!1)}return provide(DROPDOWN_INJECTION_KEY,{contentRef:L,role:computed(()=>e.role),triggerId:he,isUsingKeyboard:ae,onItemEnter:ze,onItemLeave:Ue}),provide("elDropdown",{instance:r,dropdownSize:$e,handleClick:_e,commandHandler:Ce,trigger:toRef(e,"trigger"),hideOnClick:toRef(e,"hideOnClick")}),{t:y,ns:g,scrollbar:z,wrapStyle:re,dropdownTriggerKls:ue,dropdownSize:$e,triggerId:he,triggerKeys:oe,currentTabId:j,handleCurrentTabIdChange:Pt,handlerMainButtonClick:Tn=>{n("click",Tn)},handleEntryFocus:hn,handleClose:xe,handleOpen:Ne,handleBeforeShowTooltip:Dt,handleShowTooltip:xn,handleBeforeHideTooltip:jt,onFocusAfterTrapped:Tn=>{var Ln,Sn;Tn.preventDefault(),(Sn=(Ln=L.value)==null?void 0:Ln.focus)==null||Sn.call(Ln,{preventScroll:!0})},popperRef:V,contentRef:L,triggeringElementRef:k,referenceElementRef:$}}});function _sfc_render$i(e,n,r,g,y,k){var $;const V=resolveComponent("el-dropdown-collection"),L=resolveComponent("el-roving-focus-group"),z=resolveComponent("el-scrollbar"),j=resolveComponent("el-only-child"),ae=resolveComponent("el-tooltip"),oe=resolveComponent("el-button"),re=resolveComponent("arrow-down"),ue=resolveComponent("el-icon"),le=resolveComponent("el-button-group");return openBlock(),createElementBlock("div",{class:normalizeClass([e.ns.b(),e.ns.is("disabled",e.disabled)])},[createVNode(ae,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":($=e.referenceElementRef)==null?void 0:$.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:"",onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},createSlots({content:withCtx(()=>[createVNode(z,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:withCtx(()=>[createVNode(L,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:withCtx(()=>[createVNode(V,null,{default:withCtx(()=>[renderSlot(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:withCtx(()=>[createVNode(j,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:withCtx(()=>[renderSlot(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(openBlock(),createBlock(le,{key:0},{default:withCtx(()=>[createVNode(oe,mergeProps({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:withCtx(()=>[renderSlot(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),createVNode(oe,mergeProps({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:withCtx(()=>[createVNode(ue,{class:normalizeClass(e.ns.e("icon"))},{default:withCtx(()=>[createVNode(re)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):createCommentVNode("v-if",!0)],2)}var Dropdown=_export_sfc$1(_sfc_main$2l,[["render",_sfc_render$i],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);const _sfc_main$2k=defineComponent({name:"DropdownItemImpl",components:{ElIcon},props:dropdownItemProps,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:n}){const r=useNamespace("dropdown"),{role:g}=inject(DROPDOWN_INJECTION_KEY,void 0),{collectionItemRef:y}=inject(COLLECTION_ITEM_INJECTION_KEY,void 0),{collectionItemRef:k}=inject(COLLECTION_ITEM_INJECTION_KEY$1,void 0),{rovingFocusGroupItemRef:$,tabIndex:V,handleFocus:L,handleKeydown:z,handleMousedown:j}=inject(ROVING_FOCUS_GROUP_ITEM_INJECTION_KEY,void 0),ae=composeRefs(y,k,$),oe=computed(()=>g.value==="menu"?"menuitem":g.value==="navigation"?"link":"button"),re=composeEventHandlers(ue=>{const{code:le}=ue;if(le===EVENT_CODE.enter||le===EVENT_CODE.space)return ue.preventDefault(),ue.stopImmediatePropagation(),n("clickimpl",ue),!0},z);return{ns:r,itemRef:ae,dataset:{[COLLECTION_ITEM_SIGN]:""},role:oe,tabIndex:V,handleFocus:L,handleKeydown:re,handleMousedown:j}}}),_hoisted_1$1O=["aria-disabled","tabindex","role"];function _sfc_render$h(e,n,r,g,y,k){const $=resolveComponent("el-icon");return openBlock(),createElementBlock(Fragment,null,[e.divided?(openBlock(),createElementBlock("li",mergeProps({key:0,role:"separator",class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):createCommentVNode("v-if",!0),createBaseVNode("li",mergeProps({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:n[0]||(n[0]=V=>e.$emit("clickimpl",V)),onFocus:n[1]||(n[1]=(...V)=>e.handleFocus&&e.handleFocus(...V)),onKeydown:n[2]||(n[2]=withModifiers((...V)=>e.handleKeydown&&e.handleKeydown(...V),["self"])),onMousedown:n[3]||(n[3]=(...V)=>e.handleMousedown&&e.handleMousedown(...V)),onPointermove:n[4]||(n[4]=V=>e.$emit("pointermove",V)),onPointerleave:n[5]||(n[5]=V=>e.$emit("pointerleave",V))}),[e.icon?(openBlock(),createBlock($,{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(e.icon)))]),_:1})):createCommentVNode("v-if",!0),renderSlot(e.$slots,"default")],16,_hoisted_1$1O)],64)}var ElDropdownItemImpl=_export_sfc$1(_sfc_main$2k,[["render",_sfc_render$h],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]]);const useDropdown=()=>{const e=inject("elDropdown",{}),n=computed(()=>e?.dropdownSize);return{elDropdown:e,_elDropdownSize:n}},_sfc_main$2j=defineComponent({name:"ElDropdownItem",components:{ElDropdownCollectionItem:ElCollectionItem,ElRovingFocusItem,ElDropdownItemImpl},inheritAttrs:!1,props:dropdownItemProps,emits:["pointermove","pointerleave","click"],setup(e,{emit:n,attrs:r}){const{elDropdown:g}=useDropdown(),y=getCurrentInstance(),k=ref(null),$=computed(()=>{var re,ue;return(ue=(re=unref(k))==null?void 0:re.textContent)!=null?ue:""}),{onItemEnter:V,onItemLeave:L}=inject(DROPDOWN_INJECTION_KEY,void 0),z=composeEventHandlers(re=>(n("pointermove",re),re.defaultPrevented),whenMouse(re=>{if(e.disabled){L(re);return}const ue=re.currentTarget;ue===document.activeElement||ue.contains(document.activeElement)||(V(re),re.defaultPrevented||ue?.focus())})),j=composeEventHandlers(re=>(n("pointerleave",re),re.defaultPrevented),whenMouse(re=>{L(re)})),ae=composeEventHandlers(re=>{if(!e.disabled)return n("click",re),re.type!=="keydown"&&re.defaultPrevented},re=>{var ue,le,de;if(e.disabled){re.stopImmediatePropagation();return}(ue=g?.hideOnClick)!=null&&ue.value&&((le=g.handleClick)==null||le.call(g)),(de=g.commandHandler)==null||de.call(g,e.command,y,re)}),oe=computed(()=>({...e,...r}));return{handleClick:ae,handlePointerMove:z,handlePointerLeave:j,textContent:$,propsAndAttrs:oe}}});function _sfc_render$g(e,n,r,g,y,k){var $;const V=resolveComponent("el-dropdown-item-impl"),L=resolveComponent("el-roving-focus-item"),z=resolveComponent("el-dropdown-collection-item");return openBlock(),createBlock(z,{disabled:e.disabled,"text-value":($=e.textValue)!=null?$:e.textContent},{default:withCtx(()=>[createVNode(L,{focusable:!e.disabled},{default:withCtx(()=>[createVNode(V,mergeProps(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:withCtx(()=>[renderSlot(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var DropdownItem=_export_sfc$1(_sfc_main$2j,[["render",_sfc_render$g],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const _sfc_main$2i=defineComponent({name:"ElDropdownMenu",props:dropdownMenuProps,setup(e){const n=useNamespace("dropdown"),{_elDropdownSize:r}=useDropdown(),g=r.value,{focusTrapRef:y,onKeydown:k}=inject(FOCUS_TRAP_INJECTION_KEY,void 0),{contentRef:$,role:V,triggerId:L}=inject(DROPDOWN_INJECTION_KEY,void 0),{collectionRef:z,getItems:j}=inject(COLLECTION_INJECTION_KEY,void 0),{rovingFocusGroupRef:ae,rovingFocusGroupRootStyle:oe,tabIndex:re,onBlur:ue,onFocus:le,onMousedown:de}=inject(ROVING_FOCUS_GROUP_INJECTION_KEY,void 0),{collectionRef:he}=inject(COLLECTION_INJECTION_KEY$1,void 0),_e=computed(()=>[n.b("menu"),n.bm("menu",g?.value)]),xe=composeRefs($,z,y,ae,he),Ne=composeEventHandlers(Ce=>{var Ie;(Ie=e.onKeydown)==null||Ie.call(e,Ce)},Ce=>{const{currentTarget:Ie,code:ze,target:Ue}=Ce;if(Ie.contains(Ue),EVENT_CODE.tab===ze&&Ce.stopImmediatePropagation(),Ce.preventDefault(),Ue!==unref($)||!FIRST_LAST_KEYS.includes(ze))return;const hn=j().filter(Dt=>!Dt.disabled).map(Dt=>Dt.ref);LAST_KEYS.includes(ze)&&hn.reverse(),focusFirst(hn)});return{size:g,rovingFocusGroupRootStyle:oe,tabIndex:re,dropdownKls:_e,role:V,triggerId:L,dropdownListWrapperRef:xe,handleKeydown:Ce=>{Ne(Ce),k(Ce)},onBlur:ue,onFocus:le,onMousedown:de}}}),_hoisted_1$1N=["role","aria-labelledby"];function _sfc_render$f(e,n,r,g,y,k){return openBlock(),createElementBlock("ul",{ref:e.dropdownListWrapperRef,class:normalizeClass(e.dropdownKls),style:normalizeStyle(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:n[0]||(n[0]=(...$)=>e.onBlur&&e.onBlur(...$)),onFocus:n[1]||(n[1]=(...$)=>e.onFocus&&e.onFocus(...$)),onKeydown:n[2]||(n[2]=withModifiers((...$)=>e.handleKeydown&&e.handleKeydown(...$),["self"])),onMousedown:n[3]||(n[3]=withModifiers((...$)=>e.onMousedown&&e.onMousedown(...$),["self"]))},[renderSlot(e.$slots,"default")],46,_hoisted_1$1N)}var DropdownMenu=_export_sfc$1(_sfc_main$2i,[["render",_sfc_render$f],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const ElDropdown=withInstall(Dropdown,{DropdownItem,DropdownMenu}),ElDropdownItem=withNoopInstall(DropdownItem),ElDropdownMenu=withNoopInstall(DropdownMenu),_hoisted_1$1M={viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},_hoisted_2$1y=["id"],_hoisted_3$X=["stop-color"],_hoisted_4$O=["stop-color"],_hoisted_5$F=["id"],_hoisted_6$z=["stop-color"],_hoisted_7$u=["stop-color"],_hoisted_8$t=["id"],_hoisted_9$t={id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},_hoisted_10$r={id:"B-type",transform:"translate(-1268.000000, -535.000000)"},_hoisted_11$r={id:"Group-2",transform:"translate(1268.000000, 535.000000)"},_hoisted_12$r=["fill"],_hoisted_13$p=["fill"],_hoisted_14$o={id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},_hoisted_15$l=["fill"],_hoisted_16$j=["fill"],_hoisted_17$h=["fill"],_hoisted_18$f=["fill"],_hoisted_19$f=["fill"],_hoisted_20$d={id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},_hoisted_21$c=["fill","xlink:href"],_hoisted_22$a=["fill","mask"],_hoisted_23$9=["fill"],__default__$L=defineComponent({name:"ImgEmpty"}),_sfc_main$2h=defineComponent({...__default__$L,setup(e){const n=useNamespace("empty"),r=useId();return(g,y)=>(openBlock(),createElementBlock("svg",_hoisted_1$1M,[createBaseVNode("defs",null,[createBaseVNode("linearGradient",{id:`linearGradient-1-${unref(r)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[createBaseVNode("stop",{"stop-color":`var(${unref(n).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,_hoisted_3$X),createBaseVNode("stop",{"stop-color":`var(${unref(n).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,_hoisted_4$O)],8,_hoisted_2$1y),createBaseVNode("linearGradient",{id:`linearGradient-2-${unref(r)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[createBaseVNode("stop",{"stop-color":`var(${unref(n).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,_hoisted_6$z),createBaseVNode("stop",{"stop-color":`var(${unref(n).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,_hoisted_7$u)],8,_hoisted_5$F),createBaseVNode("rect",{id:`path-3-${unref(r)}`,x:"0",y:"0",width:"17",height:"36"},null,8,_hoisted_8$t)]),createBaseVNode("g",_hoisted_9$t,[createBaseVNode("g",_hoisted_10$r,[createBaseVNode("g",_hoisted_11$r,[createBaseVNode("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${unref(n).cssVarBlockName("fill-color-3")})`},null,8,_hoisted_12$r),createBaseVNode("polygon",{id:"Rectangle-Copy-14",fill:`var(${unref(n).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,_hoisted_13$p),createBaseVNode("g",_hoisted_14$o,[createBaseVNode("polygon",{id:"Rectangle-Copy-10",fill:`var(${unref(n).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,_hoisted_15$l),createBaseVNode("polygon",{id:"Rectangle-Copy-11",fill:`var(${unref(n).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,_hoisted_16$j),createBaseVNode("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${unref(r)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,_hoisted_17$h),createBaseVNode("polygon",{id:"Rectangle-Copy-13",fill:`var(${unref(n).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,_hoisted_18$f)]),createBaseVNode("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${unref(r)})`,x:"13",y:"45",width:"40",height:"36"},null,8,_hoisted_19$f),createBaseVNode("g",_hoisted_20$d,[createBaseVNode("use",{id:"Mask",fill:`var(${unref(n).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${unref(r)}`},null,8,_hoisted_21$c),createBaseVNode("polygon",{id:"Rectangle-Copy",fill:`var(${unref(n).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${unref(r)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,_hoisted_22$a)]),createBaseVNode("polygon",{id:"Rectangle-Copy-18",fill:`var(${unref(n).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,_hoisted_23$9)])])])]))}});var ImgEmpty=_export_sfc$1(_sfc_main$2h,[["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/img-empty.vue"]]);const emptyProps=buildProps({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),_hoisted_1$1L=["src"],_hoisted_2$1x={key:1},__default__$K=defineComponent({name:"ElEmpty"}),_sfc_main$2g=defineComponent({...__default__$K,props:emptyProps,setup(e){const n=e,{t:r}=useLocale(),g=useNamespace("empty"),y=computed(()=>n.description||r("el.table.emptyText")),k=computed(()=>({width:addUnit(n.imageSize)}));return($,V)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(g).b())},[createBaseVNode("div",{class:normalizeClass(unref(g).e("image")),style:normalizeStyle(unref(k))},[$.image?(openBlock(),createElementBlock("img",{key:0,src:$.image,ondragstart:"return false"},null,8,_hoisted_1$1L)):renderSlot($.$slots,"image",{key:1},()=>[createVNode(ImgEmpty)])],6),createBaseVNode("div",{class:normalizeClass(unref(g).e("description"))},[$.$slots.description?renderSlot($.$slots,"description",{key:0}):(openBlock(),createElementBlock("p",_hoisted_2$1x,toDisplayString$1(unref(y)),1))],2),$.$slots.default?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(g).e("bottom"))},[renderSlot($.$slots,"default")],2)):createCommentVNode("v-if",!0)],2))}});var Empty=_export_sfc$1(_sfc_main$2g,[["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/empty.vue"]]);const ElEmpty=withInstall(Empty),imageViewerProps=buildProps({urlList:{type:definePropType(Array),default:()=>mutable([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),imageViewerEmits={close:()=>!0,switch:e=>isNumber$1(e)},_hoisted_1$1K=["src"],__default__$J=defineComponent({name:"ElImageViewer"}),_sfc_main$2f=defineComponent({...__default__$J,props:imageViewerProps,emits:imageViewerEmits,setup(e,{expose:n,emit:r}){const g=e,y={CONTAIN:{name:"contain",icon:markRaw(full_screen_default)},ORIGINAL:{name:"original",icon:markRaw(scale_to_original_default)}},{t:k}=useLocale(),$=useNamespace("image-viewer"),{nextZIndex:V}=useZIndex(),L=ref(),z=ref([]),j=effectScope(),ae=ref(!0),oe=ref(g.initialIndex),re=shallowRef(y.CONTAIN),ue=ref({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),le=computed(()=>{const{urlList:Sn}=g;return Sn.length<=1}),de=computed(()=>oe.value===0),he=computed(()=>oe.value===g.urlList.length-1),_e=computed(()=>g.urlList[oe.value]),xe=computed(()=>[$.e("btn"),$.e("prev"),$.is("disabled",!g.infinite&&de.value)]),Ne=computed(()=>[$.e("btn"),$.e("next"),$.is("disabled",!g.infinite&&he.value)]),$e=computed(()=>{const{scale:Sn,deg:An,offsetX:In,offsetY:Mn,enableTransition:ra}=ue.value;let da=In/Sn,ua=Mn/Sn;switch(An%360){case 90:case-270:[da,ua]=[ua,-da];break;case 180:case-180:[da,ua]=[-da,-ua];break;case 270:case-90:[da,ua]=[-ua,da];break}const aa={transform:`scale(${Sn}) rotate(${An}deg) translate(${da}px, ${ua}px)`,transition:ra?"transform .3s":""};return re.value.name===y.CONTAIN.name&&(aa.maxWidth=aa.maxHeight="100%"),aa}),Ce=computed(()=>isNumber$1(g.zIndex)?g.zIndex:V());function Ie(){Ue(),r("close")}function ze(){const Sn=throttle$1(In=>{switch(In.code){case EVENT_CODE.esc:g.closeOnPressEscape&&Ie();break;case EVENT_CODE.space:jt();break;case EVENT_CODE.left:Rn();break;case EVENT_CODE.up:Ln("zoomIn");break;case EVENT_CODE.right:Tn();break;case EVENT_CODE.down:Ln("zoomOut");break}}),An=throttle$1(In=>{const Mn=In.deltaY||In.deltaX;Ln(Mn<0?"zoomIn":"zoomOut",{zoomRate:g.zoomRate,enableTransition:!1})});j.run(()=>{useEventListener(document,"keydown",Sn),useEventListener(document,"wheel",An)})}function Ue(){j.stop()}function Pt(){ae.value=!1}function hn(Sn){ae.value=!1,Sn.target.alt=k("el.image.error")}function Dt(Sn){if(ae.value||Sn.button!==0||!L.value)return;ue.value.enableTransition=!1;const{offsetX:An,offsetY:In}=ue.value,Mn=Sn.pageX,ra=Sn.pageY,da=throttle$1(aa=>{ue.value={...ue.value,offsetX:An+aa.pageX-Mn,offsetY:In+aa.pageY-ra}}),ua=useEventListener(document,"mousemove",da);useEventListener(document,"mouseup",()=>{ua()}),Sn.preventDefault()}function xn(){ue.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function jt(){if(ae.value)return;const Sn=keysOf(y),An=Object.values(y),In=re.value.name,ra=(An.findIndex(da=>da.name===In)+1)%Sn.length;re.value=y[Sn[ra]],xn()}function Vn(Sn){const An=g.urlList.length;oe.value=(Sn+An)%An}function Rn(){de.value&&!g.infinite||Vn(oe.value-1)}function Tn(){he.value&&!g.infinite||Vn(oe.value+1)}function Ln(Sn,An={}){if(ae.value)return;const{zoomRate:In,rotateDeg:Mn,enableTransition:ra}={zoomRate:g.zoomRate,rotateDeg:90,enableTransition:!0,...An};switch(Sn){case"zoomOut":ue.value.scale>.2&&(ue.value.scale=Number.parseFloat((ue.value.scale/In).toFixed(3)));break;case"zoomIn":ue.value.scale<7&&(ue.value.scale=Number.parseFloat((ue.value.scale*In).toFixed(3)));break;case"clockwise":ue.value.deg+=Mn;break;case"anticlockwise":ue.value.deg-=Mn;break}ue.value.enableTransition=ra}return watch(_e,()=>{nextTick(()=>{const Sn=z.value[0];Sn?.complete||(ae.value=!0)})}),watch(oe,Sn=>{xn(),r("switch",Sn)}),onMounted(()=>{var Sn,An;ze(),(An=(Sn=L.value)==null?void 0:Sn.focus)==null||An.call(Sn)}),n({setActiveItem:Vn}),(Sn,An)=>(openBlock(),createBlock(Teleport,{to:"body",disabled:!Sn.teleported},[createVNode(Transition,{name:"viewer-fade",appear:""},{default:withCtx(()=>[createBaseVNode("div",{ref_key:"wrapper",ref:L,tabindex:-1,class:normalizeClass(unref($).e("wrapper")),style:normalizeStyle({zIndex:unref(Ce)})},[createBaseVNode("div",{class:normalizeClass(unref($).e("mask")),onClick:An[0]||(An[0]=withModifiers(In=>Sn.hideOnClickModal&&Ie(),["self"]))},null,2),createCommentVNode(" CLOSE "),createBaseVNode("span",{class:normalizeClass([unref($).e("btn"),unref($).e("close")]),onClick:Ie},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(close_default))]),_:1})],2),createCommentVNode(" ARROW "),unref(le)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",{class:normalizeClass(unref(xe)),onClick:Rn},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1})],2),createBaseVNode("span",{class:normalizeClass(unref(Ne)),onClick:Tn},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})],2)],64)),createCommentVNode(" ACTIONS "),createBaseVNode("div",{class:normalizeClass([unref($).e("btn"),unref($).e("actions")])},[createBaseVNode("div",{class:normalizeClass(unref($).e("actions__inner"))},[createVNode(unref(ElIcon),{onClick:An[1]||(An[1]=In=>Ln("zoomOut"))},{default:withCtx(()=>[createVNode(unref(zoom_out_default))]),_:1}),createVNode(unref(ElIcon),{onClick:An[2]||(An[2]=In=>Ln("zoomIn"))},{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1}),createBaseVNode("i",{class:normalizeClass(unref($).e("actions__divider"))},null,2),createVNode(unref(ElIcon),{onClick:jt},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(re).icon)))]),_:1}),createBaseVNode("i",{class:normalizeClass(unref($).e("actions__divider"))},null,2),createVNode(unref(ElIcon),{onClick:An[3]||(An[3]=In=>Ln("anticlockwise"))},{default:withCtx(()=>[createVNode(unref(refresh_left_default))]),_:1}),createVNode(unref(ElIcon),{onClick:An[4]||(An[4]=In=>Ln("clockwise"))},{default:withCtx(()=>[createVNode(unref(refresh_right_default))]),_:1})],2)],2),createCommentVNode(" CANVAS "),createBaseVNode("div",{class:normalizeClass(unref($).e("canvas"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(Sn.urlList,(In,Mn)=>withDirectives((openBlock(),createElementBlock("img",{ref_for:!0,ref:ra=>z.value[Mn]=ra,key:In,src:In,style:normalizeStyle(unref($e)),class:normalizeClass(unref($).e("img")),onLoad:Pt,onError:hn,onMousedown:Dt},null,46,_hoisted_1$1K)),[[vShow,Mn===oe.value]])),128))],2),renderSlot(Sn.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var ImageViewer=_export_sfc$1(_sfc_main$2f,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const ElImageViewer=withInstall(ImageViewer),imageProps=buildProps({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:definePropType([String,Object])},previewSrcList:{type:definePropType(Array),default:()=>mutable([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),imageEmits={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>isNumber$1(e),close:()=>!0,show:()=>!0},_hoisted_1$1J=["src","loading"],_hoisted_2$1w={key:0},__default__$I=defineComponent({name:"ElImage",inheritAttrs:!1}),_sfc_main$2e=defineComponent({...__default__$I,props:imageProps,emits:imageEmits,setup(e,{emit:n}){const r=e;let g="";const{t:y}=useLocale(),k=useNamespace("image"),$=useAttrs$1(),V=useAttrs(),L=ref(),z=ref(!1),j=ref(!0),ae=ref(!1),oe=ref(),re=ref(),ue=isClient&&"loading"in HTMLImageElement.prototype;let le,de;const he=computed(()=>[k.e("inner"),Ne.value&&k.e("preview"),j.value&&k.is("loading")]),_e=computed(()=>$.style),xe=computed(()=>{const{fit:Ln}=r;return isClient&&Ln?{objectFit:Ln}:{}}),Ne=computed(()=>{const{previewSrcList:Ln}=r;return Array.isArray(Ln)&&Ln.length>0}),$e=computed(()=>{const{previewSrcList:Ln,initialIndex:Sn}=r;let An=Sn;return Sn>Ln.length-1&&(An=0),An}),Ce=computed(()=>r.loading==="eager"?!1:!ue&&r.loading==="lazy"||r.lazy),Ie=()=>{isClient&&(j.value=!0,z.value=!1,L.value=r.src)};function ze(Ln){j.value=!1,z.value=!1,n("load",Ln)}function Ue(Ln){j.value=!1,z.value=!0,n("error",Ln)}function Pt(){isInContainer(oe.value,re.value)&&(Ie(),xn())}const hn=useThrottleFn(Pt,200,!0);async function Dt(){var Ln;if(!isClient)return;await nextTick();const{scrollContainer:Sn}=r;isElement$1(Sn)?re.value=Sn:isString$3(Sn)&&Sn!==""?re.value=(Ln=document.querySelector(Sn))!=null?Ln:void 0:oe.value&&(re.value=getScrollContainer(oe.value)),re.value&&(le=useEventListener(re,"scroll",hn),setTimeout(()=>Pt(),100))}function xn(){!isClient||!re.value||!hn||(le?.(),re.value=void 0)}function jt(Ln){if(Ln.ctrlKey){if(Ln.deltaY<0)return Ln.preventDefault(),!1;if(Ln.deltaY>0)return Ln.preventDefault(),!1}}function Vn(){Ne.value&&(de=useEventListener("wheel",jt,{passive:!1}),g=document.body.style.overflow,document.body.style.overflow="hidden",ae.value=!0,n("show"))}function Rn(){de?.(),document.body.style.overflow=g,ae.value=!1,n("close")}function Tn(Ln){n("switch",Ln)}return watch(()=>r.src,()=>{Ce.value?(j.value=!0,z.value=!1,xn(),Dt()):Ie()}),onMounted(()=>{Ce.value?Dt():Ie()}),(Ln,Sn)=>(openBlock(),createElementBlock("div",{ref_key:"container",ref:oe,class:normalizeClass([unref(k).b(),Ln.$attrs.class]),style:normalizeStyle(unref(_e))},[z.value?renderSlot(Ln.$slots,"error",{key:0},()=>[createBaseVNode("div",{class:normalizeClass(unref(k).e("error"))},toDisplayString$1(unref(y)("el.image.error")),3)]):(openBlock(),createElementBlock(Fragment,{key:1},[L.value!==void 0?(openBlock(),createElementBlock("img",mergeProps({key:0},unref(V),{src:L.value,loading:Ln.loading,style:unref(xe),class:unref(he),onClick:Vn,onLoad:ze,onError:Ue}),null,16,_hoisted_1$1J)):createCommentVNode("v-if",!0),j.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(k).e("wrapper"))},[renderSlot(Ln.$slots,"placeholder",{},()=>[createBaseVNode("div",{class:normalizeClass(unref(k).e("placeholder"))},null,2)])],2)):createCommentVNode("v-if",!0)],64)),unref(Ne)?(openBlock(),createElementBlock(Fragment,{key:2},[ae.value?(openBlock(),createBlock(unref(ElImageViewer),{key:0,"z-index":Ln.zIndex,"initial-index":unref($e),infinite:Ln.infinite,"zoom-rate":Ln.zoomRate,"url-list":Ln.previewSrcList,"hide-on-click-modal":Ln.hideOnClickModal,teleported:Ln.previewTeleported,"close-on-press-escape":Ln.closeOnPressEscape,onClose:Rn,onSwitch:Tn},{default:withCtx(()=>[Ln.$slots.viewer?(openBlock(),createElementBlock("div",_hoisted_2$1w,[renderSlot(Ln.$slots,"viewer")])):createCommentVNode("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):createCommentVNode("v-if",!0)],64)):createCommentVNode("v-if",!0)],6))}});var Image$1=_export_sfc$1(_sfc_main$2e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const ElImage=withInstall(Image$1),inputNumberProps=buildProps({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:useSizeProp,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>e===null||isNumber$1(e)||["min","max"].includes(e),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0}}),inputNumberEmits={[CHANGE_EVENT]:(e,n)=>n!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[INPUT_EVENT]:e=>isNumber$1(e)||isNil(e),[UPDATE_MODEL_EVENT]:e=>isNumber$1(e)||isNil(e)},_hoisted_1$1I=["aria-label","onKeydown"],_hoisted_2$1v=["aria-label","onKeydown"],__default__$H=defineComponent({name:"ElInputNumber"}),_sfc_main$2d=defineComponent({...__default__$H,props:inputNumberProps,emits:inputNumberEmits,setup(e,{expose:n,emit:r}){const g=e,{t:y}=useLocale(),k=useNamespace("input-number"),$=ref(),V=reactive({currentValue:g.modelValue,userInput:null}),{formItem:L}=useFormItem(),z=computed(()=>isNumber$1(g.modelValue)&&g.modelValue<=g.min),j=computed(()=>isNumber$1(g.modelValue)&&g.modelValue>=g.max),ae=computed(()=>{const xn=he(g.step);return isUndefined(g.precision)?Math.max(he(g.modelValue),xn):(xn>g.precision,g.precision)}),oe=computed(()=>g.controls&&g.controlsPosition==="right"),re=useFormSize(),ue=useFormDisabled(),le=computed(()=>{if(V.userInput!==null)return V.userInput;let xn=V.currentValue;if(isNil(xn))return"";if(isNumber$1(xn)){if(Number.isNaN(xn))return"";isUndefined(g.precision)||(xn=xn.toFixed(g.precision))}return xn}),de=(xn,jt)=>{if(isUndefined(jt)&&(jt=ae.value),jt===0)return Math.round(xn);let Vn=String(xn);const Rn=Vn.indexOf(".");if(Rn===-1||!Vn.replace(".","").split("")[Rn+jt])return xn;const Sn=Vn.length;return Vn.charAt(Sn-1)==="5"&&(Vn=`${Vn.slice(0,Math.max(0,Sn-1))}6`),Number.parseFloat(Number(Vn).toFixed(jt))},he=xn=>{if(isNil(xn))return 0;const jt=xn.toString(),Vn=jt.indexOf(".");let Rn=0;return Vn!==-1&&(Rn=jt.length-Vn-1),Rn},_e=(xn,jt=1)=>isNumber$1(xn)?de(xn+g.step*jt):V.currentValue,xe=()=>{if(g.readonly||ue.value||j.value)return;const xn=Number(le.value)||0,jt=_e(xn);Ce(jt),r(INPUT_EVENT,V.currentValue)},Ne=()=>{if(g.readonly||ue.value||z.value)return;const xn=Number(le.value)||0,jt=_e(xn,-1);Ce(jt),r(INPUT_EVENT,V.currentValue)},$e=(xn,jt)=>{const{max:Vn,min:Rn,step:Tn,precision:Ln,stepStrictly:Sn,valueOnClear:An}=g;Vn<Rn&&throwError("InputNumber","min should not be greater than max.");let In=Number(xn);if(isNil(xn)||Number.isNaN(In))return null;if(xn===""){if(An===null)return null;In=isString$3(An)?{min:Rn,max:Vn}[An]:An}return Sn&&(In=de(Math.round(In/Tn)*Tn,Ln)),isUndefined(Ln)||(In=de(In,Ln)),(In>Vn||In<Rn)&&(In=In>Vn?Vn:Rn,jt&&r(UPDATE_MODEL_EVENT,In)),In},Ce=(xn,jt=!0)=>{var Vn;const Rn=V.currentValue,Tn=$e(xn);if(!jt){r(UPDATE_MODEL_EVENT,Tn);return}Rn!==Tn&&(V.userInput=null,r(UPDATE_MODEL_EVENT,Tn),r(CHANGE_EVENT,Tn,Rn),g.validateEvent&&((Vn=L?.validate)==null||Vn.call(L,"change").catch(Ln=>void 0)),V.currentValue=Tn)},Ie=xn=>{V.userInput=xn;const jt=xn===""?null:Number(xn);r(INPUT_EVENT,jt),Ce(jt,!1)},ze=xn=>{const jt=xn!==""?Number(xn):"";(isNumber$1(jt)&&!Number.isNaN(jt)||xn==="")&&Ce(jt),V.userInput=null},Ue=()=>{var xn,jt;(jt=(xn=$.value)==null?void 0:xn.focus)==null||jt.call(xn)},Pt=()=>{var xn,jt;(jt=(xn=$.value)==null?void 0:xn.blur)==null||jt.call(xn)},hn=xn=>{r("focus",xn)},Dt=xn=>{var jt;r("blur",xn),g.validateEvent&&((jt=L?.validate)==null||jt.call(L,"blur").catch(Vn=>void 0))};return watch(()=>g.modelValue,xn=>{const jt=$e(V.userInput),Vn=$e(xn,!0);!isNumber$1(jt)&&(!jt||jt!==Vn)&&(V.currentValue=Vn,V.userInput=null)},{immediate:!0}),onMounted(()=>{var xn;const{min:jt,max:Vn,modelValue:Rn}=g,Tn=(xn=$.value)==null?void 0:xn.input;if(Tn.setAttribute("role","spinbutton"),Number.isFinite(Vn)?Tn.setAttribute("aria-valuemax",String(Vn)):Tn.removeAttribute("aria-valuemax"),Number.isFinite(jt)?Tn.setAttribute("aria-valuemin",String(jt)):Tn.removeAttribute("aria-valuemin"),Tn.setAttribute("aria-valuenow",V.currentValue||V.currentValue===0?String(V.currentValue):""),Tn.setAttribute("aria-disabled",String(ue.value)),!isNumber$1(Rn)&&Rn!=null){let Ln=Number(Rn);Number.isNaN(Ln)&&(Ln=null),r(UPDATE_MODEL_EVENT,Ln)}}),onUpdated(()=>{var xn,jt;const Vn=(xn=$.value)==null?void 0:xn.input;Vn?.setAttribute("aria-valuenow",`${(jt=V.currentValue)!=null?jt:""}`)}),n({focus:Ue,blur:Pt}),(xn,jt)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(k).b(),unref(k).m(unref(re)),unref(k).is("disabled",unref(ue)),unref(k).is("without-controls",!xn.controls),unref(k).is("controls-right",unref(oe))]),onDragstart:jt[1]||(jt[1]=withModifiers(()=>{},["prevent"]))},[xn.controls?withDirectives((openBlock(),createElementBlock("span",{key:0,role:"button","aria-label":unref(y)("el.inputNumber.decrease"),class:normalizeClass([unref(k).e("decrease"),unref(k).is("disabled",unref(z))]),onKeydown:withKeys(Ne,["enter"])},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[unref(oe)?(openBlock(),createBlock(unref(arrow_down_default),{key:0})):(openBlock(),createBlock(unref(minus_default),{key:1}))]),_:1})],42,_hoisted_1$1I)),[[unref(vRepeatClick),Ne]]):createCommentVNode("v-if",!0),xn.controls?withDirectives((openBlock(),createElementBlock("span",{key:1,role:"button","aria-label":unref(y)("el.inputNumber.increase"),class:normalizeClass([unref(k).e("increase"),unref(k).is("disabled",unref(j))]),onKeydown:withKeys(xe,["enter"])},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[unref(oe)?(openBlock(),createBlock(unref(arrow_up_default),{key:0})):(openBlock(),createBlock(unref(plus_default),{key:1}))]),_:1})],42,_hoisted_2$1v)),[[unref(vRepeatClick),xe]]):createCommentVNode("v-if",!0),createVNode(unref(ElInput),{id:xn.id,ref_key:"input",ref:$,type:"number",step:xn.step,"model-value":unref(le),placeholder:xn.placeholder,readonly:xn.readonly,disabled:unref(ue),size:unref(re),max:xn.max,min:xn.min,name:xn.name,label:xn.label,"validate-event":!1,onWheel:jt[0]||(jt[0]=withModifiers(()=>{},["prevent"])),onKeydown:[withKeys(withModifiers(xe,["prevent"]),["up"]),withKeys(withModifiers(Ne,["prevent"]),["down"])],onBlur:Dt,onFocus:hn,onInput:Ie,onChange:ze},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var InputNumber=_export_sfc$1(_sfc_main$2d,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const ElInputNumber=withInstall(InputNumber),linkProps=buildProps({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:iconPropType}}),linkEmits={click:e=>e instanceof MouseEvent},_hoisted_1$1H=["href"],__default__$G=defineComponent({name:"ElLink"}),_sfc_main$2c=defineComponent({...__default__$G,props:linkProps,emits:linkEmits,setup(e,{emit:n}){const r=e,g=useNamespace("link"),y=computed(()=>[g.b(),g.m(r.type),g.is("disabled",r.disabled),g.is("underline",r.underline&&!r.disabled)]);function k($){r.disabled||n("click",$)}return($,V)=>(openBlock(),createElementBlock("a",{class:normalizeClass(unref(y)),href:$.disabled||!$.href?void 0:$.href,onClick:k},[$.icon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent($.icon)))]),_:1})):createCommentVNode("v-if",!0),$.$slots.default?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(g).e("inner"))},[renderSlot($.$slots,"default")],2)):createCommentVNode("v-if",!0),$.$slots.icon?renderSlot($.$slots,"icon",{key:2}):createCommentVNode("v-if",!0)],10,_hoisted_1$1H))}});var Link=_export_sfc$1(_sfc_main$2c,[["__file","/home/runner/work/element-plus/element-plus/packages/components/link/src/link.vue"]]);const ElLink=withInstall(Link);let SubMenu$1=class{constructor(n,r){this.parent=n,this.domNode=r,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(n){n===this.subMenuItems.length?n=0:n<0&&(n=this.subMenuItems.length-1),this.subMenuItems[n].focus(),this.subIndex=n}addListeners(){const n=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,r=>{r.addEventListener("keydown",g=>{let y=!1;switch(g.code){case EVENT_CODE.down:{this.gotoSubIndex(this.subIndex+1),y=!0;break}case EVENT_CODE.up:{this.gotoSubIndex(this.subIndex-1),y=!0;break}case EVENT_CODE.tab:{triggerEvent(n,"mouseleave");break}case EVENT_CODE.enter:case EVENT_CODE.space:{y=!0,g.currentTarget.click();break}}return y&&(g.preventDefault(),g.stopPropagation()),!1})})}},MenuItem$1=class{constructor(n,r){this.domNode=n,this.submenu=null,this.submenu=null,this.init(r)}init(n){this.domNode.setAttribute("tabindex","0");const r=this.domNode.querySelector(`.${n}-menu`);r&&(this.submenu=new SubMenu$1(this,r)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",n=>{let r=!1;switch(n.code){case EVENT_CODE.down:{triggerEvent(n.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),r=!0;break}case EVENT_CODE.up:{triggerEvent(n.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),r=!0;break}case EVENT_CODE.tab:{triggerEvent(n.currentTarget,"mouseleave");break}case EVENT_CODE.enter:case EVENT_CODE.space:{r=!0,n.currentTarget.click();break}}r&&n.preventDefault()})}},Menu$1=class{constructor(n,r){this.domNode=n,this.init(r)}init(n){const r=this.domNode.childNodes;Array.from(r).forEach(g=>{g.nodeType===1&&new MenuItem$1(g,n)})}};const _sfc_main$2b=defineComponent({name:"ElMenuCollapseTransition",setup(){const e=useNamespace("menu");return{listeners:{onBeforeEnter:r=>r.style.opacity="0.2",onEnter(r,g){addClass(r,`${e.namespace.value}-opacity-transition`),r.style.opacity="1",g()},onAfterEnter(r){removeClass(r,`${e.namespace.value}-opacity-transition`),r.style.opacity=""},onBeforeLeave(r){r.dataset||(r.dataset={}),hasClass(r,e.m("collapse"))?(removeClass(r,e.m("collapse")),r.dataset.oldOverflow=r.style.overflow,r.dataset.scrollWidth=r.clientWidth.toString(),addClass(r,e.m("collapse"))):(addClass(r,e.m("collapse")),r.dataset.oldOverflow=r.style.overflow,r.dataset.scrollWidth=r.clientWidth.toString(),removeClass(r,e.m("collapse"))),r.style.width=`${r.scrollWidth}px`,r.style.overflow="hidden"},onLeave(r){addClass(r,"horizontal-collapse-transition"),r.style.width=`${r.dataset.scrollWidth}px`}}}}});function _sfc_render$e(e,n,r,g,y,k){return openBlock(),createBlock(Transition,mergeProps({mode:"out-in"},e.listeners),{default:withCtx(()=>[renderSlot(e.$slots,"default")]),_:3},16)}var ElMenuCollapseTransition=_export_sfc$1(_sfc_main$2b,[["render",_sfc_render$e],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-collapse-transition.vue"]]);function useMenu(e,n){const r=computed(()=>{let y=e.parent;const k=[n.value];for(;y.type.name!=="ElMenu";)y.props.index&&k.unshift(y.props.index),y=y.parent;return k});return{parentMenu:computed(()=>{let y=e.parent;for(;y&&!["ElMenu","ElSubMenu"].includes(y.type.name);)y=y.parent;return y}),indexPath:r}}function useMenuColor(e){return computed(()=>{const r=e.backgroundColor;return r?new TinyColor(r).shade(20).toString():""})}const useMenuCssVar=(e,n)=>{const r=useNamespace("menu");return computed(()=>r.cssVarBlock({"text-color":e.textColor||"","hover-text-color":e.textColor||"","bg-color":e.backgroundColor||"","hover-bg-color":useMenuColor(e).value||"","active-color":e.activeTextColor||"",level:`${n}`}))},subMenuProps=buildProps({index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0},teleported:{type:Boolean,default:void 0},popperOffset:{type:Number,default:6},expandCloseIcon:{type:iconPropType},expandOpenIcon:{type:iconPropType},collapseCloseIcon:{type:iconPropType},collapseOpenIcon:{type:iconPropType}}),COMPONENT_NAME$c="ElSubMenu";var SubMenu=defineComponent({name:COMPONENT_NAME$c,props:subMenuProps,setup(e,{slots:n,expose:r}){useDeprecated({from:"popper-append-to-body",replacement:"teleported",scope:COMPONENT_NAME$c,version:"2.3.0",ref:"https://element-plus.org/en-US/component/menu.html#submenu-attributes"},computed(()=>e.popperAppendToBody!==void 0));const g=getCurrentInstance(),{indexPath:y,parentMenu:k}=useMenu(g,computed(()=>e.index)),$=useNamespace("menu"),V=useNamespace("sub-menu"),L=inject("rootMenu");L||throwError(COMPONENT_NAME$c,"can not inject root menu");const z=inject(`subMenu:${k.value.uid}`);z||throwError(COMPONENT_NAME$c,"can not inject sub menu");const j=ref({}),ae=ref({});let oe;const re=ref(!1),ue=ref(),le=ref(null),de=computed(()=>hn.value==="horizontal"&&_e.value?"bottom-start":"right-start"),he=computed(()=>hn.value==="horizontal"&&_e.value||hn.value==="vertical"&&!L.props.collapse?e.expandCloseIcon&&e.expandOpenIcon?Ce.value?e.expandOpenIcon:e.expandCloseIcon:arrow_down_default:e.collapseCloseIcon&&e.collapseOpenIcon?Ce.value?e.collapseOpenIcon:e.collapseCloseIcon:arrow_right_default),_e=computed(()=>z.level===0),xe=computed(()=>{var An;const In=(An=e.teleported)!=null?An:e.popperAppendToBody;return In===void 0?_e.value:In}),Ne=computed(()=>L.props.collapse?`${$.namespace.value}-zoom-in-left`:`${$.namespace.value}-zoom-in-top`),$e=computed(()=>hn.value==="horizontal"&&_e.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),Ce=computed(()=>L.openedMenus.includes(e.index)),Ie=computed(()=>{let An=!1;return Object.values(j.value).forEach(In=>{In.active&&(An=!0)}),Object.values(ae.value).forEach(In=>{In.active&&(An=!0)}),An}),ze=computed(()=>L.props.backgroundColor||""),Ue=computed(()=>L.props.activeTextColor||""),Pt=computed(()=>L.props.textColor||""),hn=computed(()=>L.props.mode),Dt=reactive({index:e.index,indexPath:y,active:Ie}),xn=useMenuCssVar(L.props,z.level+1),jt=computed(()=>hn.value!=="horizontal"?{color:Pt.value}:{borderBottomColor:Ie.value?L.props.activeTextColor?Ue.value:"":"transparent",color:Ie.value?Ue.value:Pt.value}),Vn=()=>{var An,In,Mn;return(Mn=(In=(An=le.value)==null?void 0:An.popperRef)==null?void 0:In.popperInstanceRef)==null?void 0:Mn.destroy()},Rn=An=>{An||Vn()},Tn=()=>{L.props.menuTrigger==="hover"&&L.props.mode==="horizontal"||L.props.collapse&&L.props.mode==="vertical"||e.disabled||L.handleSubMenuClick({index:e.index,indexPath:y.value,active:Ie.value})},Ln=(An,In=e.showTimeout)=>{var Mn;An.type!=="focus"&&(L.props.menuTrigger==="click"&&L.props.mode==="horizontal"||!L.props.collapse&&L.props.mode==="vertical"||e.disabled||(z.mouseInChild.value=!0,oe?.(),{stop:oe}=useTimeoutFn(()=>{L.openMenu(e.index,y.value)},In),xe.value&&((Mn=k.value.vnode.el)==null||Mn.dispatchEvent(new MouseEvent("mouseenter")))))},Sn=(An=!1)=>{var In,Mn;L.props.menuTrigger==="click"&&L.props.mode==="horizontal"||!L.props.collapse&&L.props.mode==="vertical"||(oe?.(),z.mouseInChild.value=!1,{stop:oe}=useTimeoutFn(()=>!re.value&&L.closeMenu(e.index,y.value),e.hideTimeout),xe.value&&An&&((In=g.parent)==null?void 0:In.type.name)==="ElSubMenu"&&((Mn=z.handleMouseleave)==null||Mn.call(z,!0)))};watch(()=>L.props.collapse,An=>Rn(!!An));{const An=Mn=>{ae.value[Mn.index]=Mn},In=Mn=>{delete ae.value[Mn.index]};provide(`subMenu:${g.uid}`,{addSubMenu:An,removeSubMenu:In,handleMouseleave:Sn,mouseInChild:re,level:z.level+1})}return r({opened:Ce}),onMounted(()=>{L.addSubMenu(Dt),z.addSubMenu(Dt)}),onBeforeUnmount(()=>{z.removeSubMenu(Dt),L.removeSubMenu(Dt)}),()=>{var An;const In=[(An=n.title)==null?void 0:An.call(n),h$1(ElIcon,{class:V.e("icon-arrow"),style:{transform:Ce.value?e.expandCloseIcon&&e.expandOpenIcon||e.collapseCloseIcon&&e.collapseOpenIcon&&L.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>isString$3(he.value)?h$1(g.appContext.components[he.value]):h$1(he.value)})],Mn=L.isMenuPopup?h$1(ElTooltip,{ref:le,visible:Ce.value,effect:"light",pure:!0,offset:e.popperOffset,showArrow:!1,persistent:!0,popperClass:e.popperClass,placement:de.value,teleported:xe.value,fallbackPlacements:$e.value,transition:Ne.value,gpuAcceleration:!1},{content:()=>{var ra;return h$1("div",{class:[$.m(hn.value),$.m("popup-container"),e.popperClass],onMouseenter:da=>Ln(da,100),onMouseleave:()=>Sn(!0),onFocus:da=>Ln(da,100)},[h$1("ul",{class:[$.b(),$.m("popup"),$.m(`popup-${de.value}`)],style:xn.value},[(ra=n.default)==null?void 0:ra.call(n)])])},default:()=>h$1("div",{class:V.e("title"),style:[jt.value,{backgroundColor:ze.value}],onClick:Tn},In)}):h$1(Fragment,{},[h$1("div",{class:V.e("title"),style:[jt.value,{backgroundColor:ze.value}],ref:ue,onClick:Tn},In),h$1(_CollapseTransition,{},{default:()=>{var ra;return withDirectives(h$1("ul",{role:"menu",class:[$.b(),$.m("inline")],style:xn.value},[(ra=n.default)==null?void 0:ra.call(n)]),[[vShow,Ce.value]])}})]);return h$1("li",{class:[V.b(),V.is("active",Ie.value),V.is("opened",Ce.value),V.is("disabled",e.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:Ce.value,onMouseenter:Ln,onMouseleave:()=>Sn(!0),onFocus:Ln},[Mn])}}});const menuProps=buildProps({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:definePropType(Array),default:()=>mutable([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperEffect:{type:String,values:["dark","light"],default:"dark"}}),checkIndexPath=e=>Array.isArray(e)&&e.every(n=>isString$3(n)),menuEmits={close:(e,n)=>isString$3(e)&&checkIndexPath(n),open:(e,n)=>isString$3(e)&&checkIndexPath(n),select:(e,n,r,g)=>isString$3(e)&&checkIndexPath(n)&&isObject$3(r)&&(g===void 0||g instanceof Promise)};var Menu=defineComponent({name:"ElMenu",props:menuProps,emits:menuEmits,setup(e,{emit:n,slots:r,expose:g}){const y=getCurrentInstance(),k=y.appContext.config.globalProperties.$router,$=ref(),V=useNamespace("menu"),L=useNamespace("sub-menu"),z=ref(-1),j=ref(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),ae=ref(e.defaultActive),oe=ref({}),re=ref({}),ue=computed(()=>e.mode==="horizontal"||e.mode==="vertical"&&e.collapse),le=()=>{const hn=ae.value&&oe.value[ae.value];if(!hn||e.mode==="horizontal"||e.collapse)return;hn.indexPath.forEach(xn=>{const jt=re.value[xn];jt&&de(xn,jt.indexPath)})},de=(hn,Dt)=>{j.value.includes(hn)||(e.uniqueOpened&&(j.value=j.value.filter(xn=>Dt.includes(xn))),j.value.push(hn),n("open",hn,Dt))},he=hn=>{const Dt=j.value.indexOf(hn);Dt!==-1&&j.value.splice(Dt,1)},_e=(hn,Dt)=>{he(hn),n("close",hn,Dt)},xe=({index:hn,indexPath:Dt})=>{j.value.includes(hn)?_e(hn,Dt):de(hn,Dt)},Ne=hn=>{(e.mode==="horizontal"||e.collapse)&&(j.value=[]);const{index:Dt,indexPath:xn}=hn;if(!(isNil(Dt)||isNil(xn)))if(e.router&&k){const jt=hn.route||Dt,Vn=k.push(jt).then(Rn=>(Rn||(ae.value=Dt),Rn));n("select",Dt,xn,{index:Dt,indexPath:xn,route:jt},Vn)}else ae.value=Dt,n("select",Dt,xn,{index:Dt,indexPath:xn})},$e=hn=>{const Dt=oe.value,xn=Dt[hn]||ae.value&&Dt[ae.value]||Dt[e.defaultActive];xn?ae.value=xn.index:ae.value=hn},Ce=()=>{var hn,Dt;if(!$.value)return-1;const xn=Array.from((Dt=(hn=$.value)==null?void 0:hn.childNodes)!=null?Dt:[]).filter(An=>An.nodeName!=="#comment"&&(An.nodeName!=="#text"||An.nodeValue)),jt=64,Vn=Number.parseInt(getComputedStyle($.value).paddingLeft,10),Rn=Number.parseInt(getComputedStyle($.value).paddingRight,10),Tn=$.value.clientWidth-Vn-Rn;let Ln=0,Sn=0;return xn.forEach((An,In)=>{Ln+=An.offsetWidth||0,Ln<=Tn-jt&&(Sn=In+1)}),Sn===xn.length?-1:Sn},Ie=(hn,Dt=33.34)=>{let xn;return()=>{xn&&clearTimeout(xn),xn=setTimeout(()=>{hn()},Dt)}};let ze=!0;const Ue=()=>{const hn=()=>{z.value=-1,nextTick(()=>{z.value=Ce()})};ze?hn():Ie(hn)(),ze=!1};watch(()=>e.defaultActive,hn=>{oe.value[hn]||(ae.value=""),$e(hn)}),watch(()=>e.collapse,hn=>{hn&&(j.value=[])}),watch(oe.value,le);let Pt;watchEffect(()=>{e.mode==="horizontal"&&e.ellipsis?Pt=useResizeObserver($,Ue).stop:Pt?.()});{const hn=Vn=>{re.value[Vn.index]=Vn},Dt=Vn=>{delete re.value[Vn.index]};provide("rootMenu",reactive({props:e,openedMenus:j,items:oe,subMenus:re,activeIndex:ae,isMenuPopup:ue,addMenuItem:Vn=>{oe.value[Vn.index]=Vn},removeMenuItem:Vn=>{delete oe.value[Vn.index]},addSubMenu:hn,removeSubMenu:Dt,openMenu:de,closeMenu:_e,handleMenuItemClick:Ne,handleSubMenuClick:xe})),provide(`subMenu:${y.uid}`,{addSubMenu:hn,removeSubMenu:Dt,mouseInChild:ref(!1),level:0})}return onMounted(()=>{e.mode==="horizontal"&&new Menu$1(y.vnode.el,V.namespace.value)}),g({open:Dt=>{const{indexPath:xn}=re.value[Dt];xn.forEach(jt=>de(jt,xn))},close:he,handleResize:Ue}),()=>{var hn,Dt;let xn=(Dt=(hn=r.default)==null?void 0:hn.call(r))!=null?Dt:[];const jt=[];if(e.mode==="horizontal"&&$.value){const Tn=flattedChildren(xn),Ln=z.value===-1?Tn:Tn.slice(0,z.value),Sn=z.value===-1?[]:Tn.slice(z.value);Sn?.length&&e.ellipsis&&(xn=Ln,jt.push(h$1(SubMenu,{index:"sub-menu-more",class:L.e("hide-arrow")},{title:()=>h$1(ElIcon,{class:L.e("icon-more")},{default:()=>h$1(more_default)}),default:()=>Sn})))}const Vn=useMenuCssVar(e,0),Rn=h$1("ul",{key:String(e.collapse),role:"menubar",ref:$,style:Vn.value,class:{[V.b()]:!0,[V.m(e.mode)]:!0,[V.m("collapse")]:e.collapse}},[...xn,...jt]);return e.collapseTransition&&e.mode==="vertical"?h$1(ElMenuCollapseTransition,()=>Rn):Rn}}});const menuItemProps=buildProps({index:{type:definePropType([String,null]),default:null},route:{type:definePropType([String,Object])},disabled:Boolean}),menuItemEmits={click:e=>isString$3(e.index)&&Array.isArray(e.indexPath)},COMPONENT_NAME$b="ElMenuItem",_sfc_main$2a=defineComponent({name:COMPONENT_NAME$b,components:{ElTooltip},props:menuItemProps,emits:menuItemEmits,setup(e,{emit:n}){const r=getCurrentInstance(),g=inject("rootMenu"),y=useNamespace("menu"),k=useNamespace("menu-item");g||throwError(COMPONENT_NAME$b,"can not inject root menu");const{parentMenu:$,indexPath:V}=useMenu(r,toRef(e,"index")),L=inject(`subMenu:${$.value.uid}`);L||throwError(COMPONENT_NAME$b,"can not inject sub menu");const z=computed(()=>e.index===g.activeIndex),j=reactive({index:e.index,indexPath:V,active:z}),ae=()=>{e.disabled||(g.handleMenuItemClick({index:e.index,indexPath:V.value,route:e.route}),n("click",j))};return onMounted(()=>{L.addSubMenu(j),g.addMenuItem(j)}),onBeforeUnmount(()=>{L.removeSubMenu(j),g.removeMenuItem(j)}),{parentMenu:$,rootMenu:g,active:z,nsMenu:y,nsMenuItem:k,handleClick:ae}}});function _sfc_render$d(e,n,r,g,y,k){const $=resolveComponent("el-tooltip");return openBlock(),createElementBlock("li",{class:normalizeClass([e.nsMenuItem.b(),e.nsMenuItem.is("active",e.active),e.nsMenuItem.is("disabled",e.disabled)]),role:"menuitem",tabindex:"-1",onClick:n[0]||(n[0]=(...V)=>e.handleClick&&e.handleClick(...V))},[e.parentMenu.type.name==="ElMenu"&&e.rootMenu.props.collapse&&e.$slots.title?(openBlock(),createBlock($,{key:0,effect:e.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:withCtx(()=>[renderSlot(e.$slots,"title")]),default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(e.nsMenu.be("tooltip","trigger"))},[renderSlot(e.$slots,"default")],2)]),_:3},8,["effect"])):(openBlock(),createElementBlock(Fragment,{key:1},[renderSlot(e.$slots,"default"),renderSlot(e.$slots,"title")],64))],2)}var MenuItem=_export_sfc$1(_sfc_main$2a,[["render",_sfc_render$d],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item.vue"]]);const menuItemGroupProps={title:String},COMPONENT_NAME$a="ElMenuItemGroup",_sfc_main$29=defineComponent({name:COMPONENT_NAME$a,props:menuItemGroupProps,setup(){return{ns:useNamespace("menu-item-group")}}});function _sfc_render$c(e,n,r,g,y,k){return openBlock(),createElementBlock("li",{class:normalizeClass(e.ns.b())},[createBaseVNode("div",{class:normalizeClass(e.ns.e("title"))},[e.$slots.title?renderSlot(e.$slots,"title",{key:1}):(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString$1(e.title),1)],64))],2),createBaseVNode("ul",null,[renderSlot(e.$slots,"default")])],2)}var MenuItemGroup=_export_sfc$1(_sfc_main$29,[["render",_sfc_render$c],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item-group.vue"]]);const ElMenu=withInstall(Menu,{MenuItem,MenuItemGroup,SubMenu}),ElMenuItem=withNoopInstall(MenuItem),ElMenuItemGroup=withNoopInstall(MenuItemGroup),ElSubMenu=withNoopInstall(SubMenu),pageHeaderProps=buildProps({icon:{type:iconPropType,default:()=>back_default},title:String,content:{type:String,default:""}}),pageHeaderEmits={back:()=>!0},_hoisted_1$1G=["aria-label"],__default__$F=defineComponent({name:"ElPageHeader"}),_sfc_main$28=defineComponent({...__default__$F,props:pageHeaderProps,emits:pageHeaderEmits,setup(e,{emit:n}){const r=useSlots(),{t:g}=useLocale(),y=useNamespace("page-header"),k=computed(()=>[y.b(),{[y.m("has-breadcrumb")]:!!r.breadcrumb,[y.m("has-extra")]:!!r.extra,[y.is("contentful")]:!!r.default}]);function $(){n("back")}return(V,L)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(k))},[V.$slots.breadcrumb?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(y).e("breadcrumb"))},[renderSlot(V.$slots,"breadcrumb")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(y).e("header"))},[createBaseVNode("div",{class:normalizeClass(unref(y).e("left"))},[createBaseVNode("div",{class:normalizeClass(unref(y).e("back")),role:"button",tabindex:"0",onClick:$},[V.icon||V.$slots.icon?(openBlock(),createElementBlock("div",{key:0,"aria-label":V.title||unref(g)("el.pageHeader.title"),class:normalizeClass(unref(y).e("icon"))},[renderSlot(V.$slots,"icon",{},()=>[V.icon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(V.icon)))]),_:1})):createCommentVNode("v-if",!0)])],10,_hoisted_1$1G)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(y).e("title"))},[renderSlot(V.$slots,"title",{},()=>[createTextVNode(toDisplayString$1(V.title||unref(g)("el.pageHeader.title")),1)])],2)],2),createVNode(unref(ElDivider),{direction:"vertical"}),createBaseVNode("div",{class:normalizeClass(unref(y).e("content"))},[renderSlot(V.$slots,"content",{},()=>[createTextVNode(toDisplayString$1(V.content),1)])],2)],2),V.$slots.extra?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(y).e("extra"))},[renderSlot(V.$slots,"extra")],2)):createCommentVNode("v-if",!0)],2),V.$slots.default?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(y).e("main"))},[renderSlot(V.$slots,"default")],2)):createCommentVNode("v-if",!0)],2))}});var PageHeader=_export_sfc$1(_sfc_main$28,[["__file","/home/runner/work/element-plus/element-plus/packages/components/page-header/src/page-header.vue"]]);const ElPageHeader=withInstall(PageHeader),elPaginationKey=Symbol("elPaginationKey"),paginationPrevProps=buildProps({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:iconPropType}}),paginationPrevEmits={click:e=>e instanceof MouseEvent},_hoisted_1$1F=["disabled","aria-label","aria-disabled"],_hoisted_2$1u={key:0},__default__$E=defineComponent({name:"ElPaginationPrev"}),_sfc_main$27=defineComponent({...__default__$E,props:paginationPrevProps,emits:paginationPrevEmits,setup(e){const n=e,{t:r}=useLocale(),g=computed(()=>n.disabled||n.currentPage<=1);return(y,k)=>(openBlock(),createElementBlock("button",{type:"button",class:"btn-prev",disabled:unref(g),"aria-label":y.prevText||unref(r)("el.pagination.prev"),"aria-disabled":unref(g),onClick:k[0]||(k[0]=$=>y.$emit("click",$))},[y.prevText?(openBlock(),createElementBlock("span",_hoisted_2$1u,toDisplayString$1(y.prevText),1)):(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(y.prevIcon)))]),_:1}))],8,_hoisted_1$1F))}});var Prev=_export_sfc$1(_sfc_main$27,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/prev.vue"]]);const paginationNextProps=buildProps({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:iconPropType}}),_hoisted_1$1E=["disabled","aria-label","aria-disabled"],_hoisted_2$1t={key:0},__default__$D=defineComponent({name:"ElPaginationNext"}),_sfc_main$26=defineComponent({...__default__$D,props:paginationNextProps,emits:["click"],setup(e){const n=e,{t:r}=useLocale(),g=computed(()=>n.disabled||n.currentPage===n.pageCount||n.pageCount===0);return(y,k)=>(openBlock(),createElementBlock("button",{type:"button",class:"btn-next",disabled:unref(g),"aria-label":y.nextText||unref(r)("el.pagination.next"),"aria-disabled":unref(g),onClick:k[0]||(k[0]=$=>y.$emit("click",$))},[y.nextText?(openBlock(),createElementBlock("span",_hoisted_2$1t,toDisplayString$1(y.nextText),1)):(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(y.nextIcon)))]),_:1}))],8,_hoisted_1$1E))}});var Next=_export_sfc$1(_sfc_main$26,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/next.vue"]]);const selectGroupKey=Symbol("ElSelectGroup"),selectKey=Symbol("ElSelect");function useOption$1(e,n){const r=inject(selectKey),g=inject(selectGroupKey,{disabled:!1}),y=computed(()=>Object.prototype.toString.call(e.value).toLowerCase()==="[object object]"),k=computed(()=>r.props.multiple?ae(r.props.modelValue,e.value):oe(e.value,r.props.modelValue)),$=computed(()=>{if(r.props.multiple){const le=r.props.modelValue||[];return!k.value&&le.length>=r.props.multipleLimit&&r.props.multipleLimit>0}else return!1}),V=computed(()=>e.label||(y.value?"":e.value)),L=computed(()=>e.value||e.label||""),z=computed(()=>e.disabled||n.groupDisabled||$.value),j=getCurrentInstance(),ae=(le=[],de)=>{if(y.value){const he=r.props.valueKey;return le&&le.some(_e=>toRaw(get(_e,he))===get(de,he))}else return le&&le.includes(de)},oe=(le,de)=>{if(y.value){const{valueKey:he}=r.props;return get(le,he)===get(de,he)}else return le===de},re=()=>{!e.disabled&&!g.disabled&&(r.hoverIndex=r.optionsArray.indexOf(j.proxy))};watch(()=>V.value,()=>{!e.created&&!r.props.remote&&r.setSelected()}),watch(()=>e.value,(le,de)=>{const{remote:he,valueKey:_e}=r.props;if(Object.is(le,de)||(r.onOptionDestroy(de,j.proxy),r.onOptionCreate(j.proxy)),!e.created&&!he){if(_e&&typeof le=="object"&&typeof de=="object"&&le[_e]===de[_e])return;r.setSelected()}}),watch(()=>g.disabled,()=>{n.groupDisabled=g.disabled},{immediate:!0});const{queryChange:ue}=toRaw(r);return watch(ue,le=>{const{query:de}=unref(le),he=new RegExp(escapeStringRegexp(de),"i");n.visible=he.test(V.value)||e.created,n.visible||r.filteredOptionsCount--},{immediate:!0}),{select:r,currentLabel:V,currentValue:L,itemSelected:k,isDisabled:z,hoverItem:re}}const _sfc_main$25=defineComponent({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(e){const n=useNamespace("select"),r=computed(()=>[n.be("dropdown","item"),n.is("disabled",unref($)),{selected:unref(k),hover:unref(j)}]),g=reactive({index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}),{currentLabel:y,itemSelected:k,isDisabled:$,select:V,hoverItem:L}=useOption$1(e,g),{visible:z,hover:j}=toRefs(g),ae=getCurrentInstance().proxy;V.onOptionCreate(ae),onBeforeUnmount(()=>{const re=ae.value,{selected:ue}=V,de=(V.props.multiple?ue:[ue]).some(he=>he.value===ae.value);nextTick(()=>{V.cachedOptions.get(re)===ae&&!de&&V.cachedOptions.delete(re)}),V.onOptionDestroy(re,ae)});function oe(){e.disabled!==!0&&g.groupDisabled!==!0&&V.handleOptionSelect(ae)}return{ns:n,containerKls:r,currentLabel:y,itemSelected:k,isDisabled:$,select:V,hoverItem:L,visible:z,hover:j,selectOptionClick:oe,states:g}}});function _sfc_render$b(e,n,r,g,y,k){return withDirectives((openBlock(),createElementBlock("li",{class:normalizeClass(e.containerKls),onMouseenter:n[0]||(n[0]=(...$)=>e.hoverItem&&e.hoverItem(...$)),onClick:n[1]||(n[1]=withModifiers((...$)=>e.selectOptionClick&&e.selectOptionClick(...$),["stop"]))},[renderSlot(e.$slots,"default",{},()=>[createBaseVNode("span",null,toDisplayString$1(e.currentLabel),1)])],34)),[[vShow,e.visible]])}var Option$1=_export_sfc$1(_sfc_main$25,[["render",_sfc_render$b],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option.vue"]]);const _sfc_main$24=defineComponent({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const e=inject(selectKey),n=useNamespace("select"),r=computed(()=>e.props.popperClass),g=computed(()=>e.props.multiple),y=computed(()=>e.props.fitInputWidth),k=ref("");function $(){var V;k.value=`${(V=e.selectWrapper)==null?void 0:V.offsetWidth}px`}return onMounted(()=>{$(),useResizeObserver(e.selectWrapper,$)}),{ns:n,minWidth:k,popperClass:r,isMultiple:g,isFitInputWidth:y}}});function _sfc_render$a(e,n,r,g,y,k){return openBlock(),createElementBlock("div",{class:normalizeClass([e.ns.b("dropdown"),e.ns.is("multiple",e.isMultiple),e.popperClass]),style:normalizeStyle({[e.isFitInputWidth?"width":"minWidth"]:e.minWidth})},[renderSlot(e.$slots,"default")],6)}var ElSelectMenu$1=_export_sfc$1(_sfc_main$24,[["render",_sfc_render$a],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select-dropdown.vue"]]);function useSelectStates(e){const{t:n}=useLocale();return reactive({options:new Map,cachedOptions:new Map,disabledOptions:new Map,createdLabel:null,createdSelected:!1,selected:e.multiple?[]:{},inputLength:20,inputWidth:0,optionsCount:0,filteredOptionsCount:0,visible:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,cachedPlaceHolder:"",currentPlaceholder:n("el.select.placeholder"),menuVisibleOnFocus:!1,isOnComposition:!1,prefixWidth:11,mouseEnter:!1,focused:!1})}const useSelect$2=(e,n,r)=>{const{t:g}=useLocale(),y=useNamespace("select");useDeprecated({from:"suffixTransition",replacement:"override style scheme",version:"2.3.0",scope:"props",ref:"https://element-plus.org/en-US/component/select.html#select-attributes"},computed(()=>e.suffixTransition===!1));const k=ref(null),$=ref(null),V=ref(null),L=ref(null),z=ref(null),j=ref(null),ae=ref(null),oe=ref(null),re=ref(-1),ue=shallowRef({query:""}),le=shallowRef(""),de=ref([]);let he=0;const{form:_e,formItem:xe}=useFormItem(),Ne=computed(()=>!e.filterable||e.multiple||!n.visible),$e=computed(()=>e.disabled||_e?.disabled),Ce=computed(()=>{const Pn=e.multiple?Array.isArray(e.modelValue)&&e.modelValue.length>0:e.modelValue!==void 0&&e.modelValue!==null&&e.modelValue!=="";return e.clearable&&!$e.value&&n.inputHovering&&Pn}),Ie=computed(()=>e.remote&&e.filterable&&!e.remoteShowSuffix?"":e.suffixIcon),ze=computed(()=>y.is("reverse",Ie.value&&n.visible&&e.suffixTransition)),Ue=computed(()=>_e?.statusIcon&&xe?.validateState&&ValidateComponentsMap[xe?.validateState]),Pt=computed(()=>e.remote?300:0),hn=computed(()=>e.loading?e.loadingText||g("el.select.loading"):e.remote&&n.query===""&&n.options.size===0?!1:e.filterable&&n.query&&n.options.size>0&&n.filteredOptionsCount===0?e.noMatchText||g("el.select.noMatch"):n.options.size===0?e.noDataText||g("el.select.noData"):null),Dt=computed(()=>{const Pn=Array.from(n.options.values()),jn=[];return de.value.forEach(On=>{const Un=Pn.findIndex(Yn=>Yn.currentLabel===On);Un>-1&&jn.push(Pn[Un])}),jn.length?jn:Pn}),xn=computed(()=>Array.from(n.cachedOptions.values())),jt=computed(()=>{const Pn=Dt.value.filter(jn=>!jn.created).some(jn=>jn.currentLabel===n.query);return e.filterable&&e.allowCreate&&n.query!==""&&!Pn}),Vn=useFormSize(),Rn=computed(()=>["small"].includes(Vn.value)?"small":"default"),Tn=computed({get(){return n.visible&&hn.value!==!1},set(Pn){n.visible=Pn}});watch([()=>$e.value,()=>Vn.value,()=>_e?.size],()=>{nextTick(()=>{Ln()})}),watch(()=>e.placeholder,Pn=>{n.cachedPlaceHolder=n.currentPlaceholder=Pn,e.multiple&&Array.isArray(e.modelValue)&&e.modelValue.length>0&&(n.currentPlaceholder="")}),watch(()=>e.modelValue,(Pn,jn)=>{e.multiple&&(Ln(),Pn&&Pn.length>0||$.value&&n.query!==""?n.currentPlaceholder="":n.currentPlaceholder=n.cachedPlaceHolder,e.filterable&&!e.reserveKeyword&&(n.query="",Sn(n.query))),Mn(),e.filterable&&!e.multiple&&(n.inputLength=20),!isEqual$1(Pn,jn)&&e.validateEvent&&xe?.validate("change").catch(On=>void 0)},{flush:"post",deep:!0}),watch(()=>n.visible,Pn=>{var jn,On,Un,Yn,ta;Pn?((On=(jn=L.value)==null?void 0:jn.updatePopper)==null||On.call(jn),e.filterable&&(n.filteredOptionsCount=n.optionsCount,n.query=e.remote?"":n.selectedLabel,(Yn=(Un=V.value)==null?void 0:Un.focus)==null||Yn.call(Un),e.multiple?(ta=$.value)==null||ta.focus():n.selectedLabel&&(n.currentPlaceholder=`${n.selectedLabel}`,n.selectedLabel=""),Sn(n.query),!e.multiple&&!e.remote&&(ue.value.query="",triggerRef(ue),triggerRef(le)))):(e.filterable&&(isFunction$3(e.filterMethod)&&e.filterMethod(""),isFunction$3(e.remoteMethod)&&e.remoteMethod("")),n.query="",n.previousQuery=null,n.selectedLabel="",n.inputLength=20,n.menuVisibleOnFocus=!1,da(),nextTick(()=>{$.value&&$.value.value===""&&n.selected.length===0&&(n.currentPlaceholder=n.cachedPlaceHolder)}),e.multiple||(n.selected&&(e.filterable&&e.allowCreate&&n.createdSelected&&n.createdLabel?n.selectedLabel=n.createdLabel:n.selectedLabel=n.selected.currentLabel,e.filterable&&(n.query=n.selectedLabel)),e.filterable&&(n.currentPlaceholder=n.cachedPlaceHolder))),r.emit("visible-change",Pn)}),watch(()=>n.options.entries(),()=>{var Pn,jn,On;if(!isClient)return;(jn=(Pn=L.value)==null?void 0:Pn.updatePopper)==null||jn.call(Pn),e.multiple&&Ln();const Un=((On=ae.value)==null?void 0:On.querySelectorAll("input"))||[];(!e.filterable&&!e.defaultFirstOption&&!isUndefined(e.modelValue)||!Array.from(Un).includes(document.activeElement))&&Mn(),e.defaultFirstOption&&(e.filterable||e.remote)&&n.filteredOptionsCount&&In()},{flush:"post"}),watch(()=>n.hoverIndex,Pn=>{isNumber$1(Pn)&&Pn>-1?re.value=Dt.value[Pn]||{}:re.value={},Dt.value.forEach(jn=>{jn.hover=re.value===jn})});const Ln=()=>{nextTick(()=>{var Pn,jn;if(!k.value)return;const On=k.value.$el.querySelector("input");he=he||(On.clientHeight>0?On.clientHeight+2:0);const Un=j.value,Yn=getComponentSize(Vn.value||_e?.size),ta=Vn.value||Yn===he||he<=0?Yn:he;!(On.offsetParent===null)&&(On.style.height=`${(n.selected.length===0?ta:Math.max(Un?Un.clientHeight+(Un.clientHeight>ta?6:0):0,ta))-2}px`),n.visible&&hn.value!==!1&&((jn=(Pn=L.value)==null?void 0:Pn.updatePopper)==null||jn.call(Pn))})},Sn=async Pn=>{if(!(n.previousQuery===Pn||n.isOnComposition)){if(n.previousQuery===null&&(isFunction$3(e.filterMethod)||isFunction$3(e.remoteMethod))){n.previousQuery=Pn;return}n.previousQuery=Pn,nextTick(()=>{var jn,On;n.visible&&((On=(jn=L.value)==null?void 0:jn.updatePopper)==null||On.call(jn))}),n.hoverIndex=-1,e.multiple&&e.filterable&&nextTick(()=>{if(!$e.value){const jn=$.value.value.length*15+20;n.inputLength=e.collapseTags?Math.min(50,jn):jn,An()}Ln()}),e.remote&&isFunction$3(e.remoteMethod)?(n.hoverIndex=-1,e.remoteMethod(Pn)):isFunction$3(e.filterMethod)?(e.filterMethod(Pn),triggerRef(le)):(n.filteredOptionsCount=n.optionsCount,ue.value.query=Pn,triggerRef(ue),triggerRef(le)),e.defaultFirstOption&&(e.filterable||e.remote)&&n.filteredOptionsCount&&(await nextTick(),In())}},An=()=>{n.currentPlaceholder!==""&&(n.currentPlaceholder=$.value.value?"":n.cachedPlaceHolder)},In=()=>{const Pn=Dt.value.filter(Un=>Un.visible&&!Un.disabled&&!Un.states.groupDisabled),jn=Pn.find(Un=>Un.created),On=Pn[0];n.hoverIndex=$n(Dt.value,jn||On)},Mn=()=>{var Pn;if(e.multiple)n.selectedLabel="";else{const On=ra(e.modelValue);(Pn=On.props)!=null&&Pn.created?(n.createdLabel=On.props.value,n.createdSelected=!0):n.createdSelected=!1,n.selectedLabel=On.currentLabel,n.selected=On,e.filterable&&(n.query=n.selectedLabel);return}const jn=[];Array.isArray(e.modelValue)&&e.modelValue.forEach(On=>{jn.push(ra(On))}),n.selected=jn,nextTick(()=>{Ln()})},ra=Pn=>{let jn;const On=toRawType(Pn).toLowerCase()==="object",Un=toRawType(Pn).toLowerCase()==="null",Yn=toRawType(Pn).toLowerCase()==="undefined";for(let pa=n.cachedOptions.size-1;pa>=0;pa--){const ga=xn.value[pa];if(On?get(ga.value,e.valueKey)===get(Pn,e.valueKey):ga.value===Pn){jn={value:Pn,currentLabel:ga.currentLabel,isDisabled:ga.isDisabled};break}}if(jn)return jn;const ta=On?Pn.label:!Un&&!Yn?Pn:"",Jn={value:Pn,currentLabel:ta};return e.multiple&&(Jn.hitState=!1),Jn},da=()=>{setTimeout(()=>{const Pn=e.valueKey;e.multiple?n.selected.length>0?n.hoverIndex=Math.min.apply(null,n.selected.map(jn=>Dt.value.findIndex(On=>get(On,Pn)===get(jn,Pn)))):n.hoverIndex=-1:n.hoverIndex=Dt.value.findIndex(jn=>wn(jn)===wn(n.selected))},300)},ua=()=>{var Pn,jn;aa(),(jn=(Pn=L.value)==null?void 0:Pn.updatePopper)==null||jn.call(Pn),e.multiple&&Ln()},aa=()=>{var Pn;n.inputWidth=(Pn=k.value)==null?void 0:Pn.$el.offsetWidth},Nn=()=>{e.filterable&&n.query!==n.selectedLabel&&(n.query=n.selectedLabel,Sn(n.query))},En=debounce(()=>{Nn()},Pt.value),Zn=debounce(Pn=>{Sn(Pn.target.value)},Pt.value),ha=Pn=>{isEqual$1(e.modelValue,Pn)||r.emit(CHANGE_EVENT,Pn)},xa=Pn=>findLastIndex(Pn,jn=>!n.disabledOptions.has(jn)),sa=Pn=>{if(Pn.code!==EVENT_CODE.delete){if(Pn.target.value.length<=0&&!na()){const jn=e.modelValue.slice(),On=xa(jn);if(On<0)return;jn.splice(On,1),r.emit(UPDATE_MODEL_EVENT,jn),ha(jn)}Pn.target.value.length===1&&e.modelValue.length===0&&(n.currentPlaceholder=n.cachedPlaceHolder)}},Hn=(Pn,jn)=>{const On=n.selected.indexOf(jn);if(On>-1&&!$e.value){const Un=e.modelValue.slice();Un.splice(On,1),r.emit(UPDATE_MODEL_EVENT,Un),ha(Un),r.emit("remove-tag",jn.value)}Pn.stopPropagation(),pe()},bn=Pn=>{Pn.stopPropagation();const jn=e.multiple?[]:"";if(!isString$3(jn))for(const On of n.selected)On.isDisabled&&jn.push(On.value);r.emit(UPDATE_MODEL_EVENT,jn),ha(jn),n.hoverIndex=-1,n.visible=!1,r.emit("clear"),pe()},Xn=Pn=>{var jn;if(e.multiple){const On=(e.modelValue||[]).slice(),Un=$n(On,Pn.value);Un>-1?On.splice(Un,1):(e.multipleLimit<=0||On.length<e.multipleLimit)&&On.push(Pn.value),r.emit(UPDATE_MODEL_EVENT,On),ha(On),Pn.created&&(n.query="",Sn(""),n.inputLength=20),e.filterable&&((jn=$.value)==null||jn.focus())}else r.emit(UPDATE_MODEL_EVENT,Pn.value),ha(Pn.value),n.visible=!1;kt(),!n.visible&&nextTick(()=>{At(Pn)})},$n=(Pn=[],jn)=>{if(!isObject$3(jn))return Pn.indexOf(jn);const On=e.valueKey;let Un=-1;return Pn.some((Yn,ta)=>toRaw(get(Yn,On))===get(jn,On)?(Un=ta,!0):!1),Un},kt=()=>{const Pn=$.value||k.value;Pn&&Pn?.focus()},At=Pn=>{var jn,On,Un,Yn,ta;const Jn=Array.isArray(Pn)?Pn[0]:Pn;let pa=null;if(Jn?.value){const ga=Dt.value.filter(ba=>ba.value===Jn.value);ga.length>0&&(pa=ga[0].$el)}if(L.value&&pa){const ga=(Yn=(Un=(On=(jn=L.value)==null?void 0:jn.popperRef)==null?void 0:On.contentRef)==null?void 0:Un.querySelector)==null?void 0:Yn.call(Un,`.${y.be("dropdown","wrap")}`);ga&&scrollIntoView$2(ga,pa)}(ta=oe.value)==null||ta.handleScroll()},Dn=Pn=>{n.optionsCount++,n.filteredOptionsCount++,n.options.set(Pn.value,Pn),n.cachedOptions.set(Pn.value,Pn),Pn.disabled&&n.disabledOptions.set(Pn.value,Pn)},Qn=(Pn,jn)=>{n.options.get(Pn)===jn&&(n.optionsCount--,n.filteredOptionsCount--,n.options.delete(Pn))},oa=Pn=>{Pn.code!==EVENT_CODE.backspace&&na(!1),n.inputLength=$.value.value.length*15+20,Ln()},na=Pn=>{if(!Array.isArray(n.selected))return;const jn=xa(n.selected.map(Un=>Un.value)),On=n.selected[jn];if(On)return Pn===!0||Pn===!1?(On.hitState=Pn,Pn):(On.hitState=!On.hitState,On.hitState)},la=Pn=>{const jn=Pn.target.value;if(Pn.type==="compositionend")n.isOnComposition=!1,nextTick(()=>Sn(jn));else{const On=jn[jn.length-1]||"";n.isOnComposition=!isKorean(On)}},ma=()=>{nextTick(()=>At(n.selected))},ca=Pn=>{n.focused||((e.automaticDropdown||e.filterable)&&(e.filterable&&!n.visible&&(n.menuVisibleOnFocus=!0),n.visible=!0),n.focused=!0,r.emit("focus",Pn))},pe=()=>{var Pn,jn;n.visible?(Pn=$.value||k.value)==null||Pn.focus():(jn=k.value)==null||jn.focus()},Oe=()=>{var Pn,jn,On;n.visible=!1,(Pn=k.value)==null||Pn.blur(),(On=(jn=V.value)==null?void 0:jn.blur)==null||On.call(jn)},Ve=Pn=>{var jn,On,Un;(jn=L.value)!=null&&jn.isFocusInsideContent(Pn)||(On=z.value)!=null&&On.isFocusInsideContent(Pn)||(Un=ae.value)!=null&&Un.contains(Pn.relatedTarget)||(n.visible&&Et(),n.focused=!1,r.emit("blur",Pn))},qe=Pn=>{bn(Pn)},Et=()=>{n.visible=!1},Lt=Pn=>{n.visible&&(Pn.preventDefault(),Pn.stopPropagation(),n.visible=!1)},_n=Pn=>{Pn&&!n.mouseEnter||$e.value||(n.menuVisibleOnFocus?n.menuVisibleOnFocus=!1:(!L.value||!L.value.isFocusInsideContent())&&(n.visible=!n.visible),pe())},vn=()=>{n.visible?Dt.value[n.hoverIndex]&&Xn(Dt.value[n.hoverIndex]):_n()},wn=Pn=>isObject$3(Pn.value)?get(Pn.value,e.valueKey):Pn.value,Cn=computed(()=>Dt.value.filter(Pn=>Pn.visible).every(Pn=>Pn.disabled)),Bn=computed(()=>n.selected.slice(0,e.maxCollapseTags)),zn=computed(()=>n.selected.slice(e.maxCollapseTags)),Fn=Pn=>{if(!n.visible){n.visible=!0;return}if(!(n.options.size===0||n.filteredOptionsCount===0)&&!n.isOnComposition&&!Cn.value){Pn==="next"?(n.hoverIndex++,n.hoverIndex===n.options.size&&(n.hoverIndex=0)):Pn==="prev"&&(n.hoverIndex--,n.hoverIndex<0&&(n.hoverIndex=n.options.size-1));const jn=Dt.value[n.hoverIndex];(jn.disabled===!0||jn.states.groupDisabled===!0||!jn.visible)&&Fn(Pn),nextTick(()=>At(re.value))}},Gn=()=>{n.mouseEnter=!0},Kn=()=>{n.mouseEnter=!1},Wn=(Pn,jn)=>{var On,Un;Hn(Pn,jn),(Un=(On=z.value)==null?void 0:On.updatePopper)==null||Un.call(On)},ea=computed(()=>({maxWidth:`${unref(n.inputWidth)-32-(Ue.value?22:0)}px`,width:"100%"}));return{optionList:de,optionsArray:Dt,selectSize:Vn,handleResize:ua,debouncedOnInputChange:En,debouncedQueryChange:Zn,deletePrevTag:sa,deleteTag:Hn,deleteSelected:bn,handleOptionSelect:Xn,scrollToOption:At,readonly:Ne,resetInputHeight:Ln,showClose:Ce,iconComponent:Ie,iconReverse:ze,showNewOption:jt,collapseTagSize:Rn,setSelected:Mn,managePlaceholder:An,selectDisabled:$e,emptyText:hn,toggleLastOptionHitState:na,resetInputState:oa,handleComposition:la,onOptionCreate:Dn,onOptionDestroy:Qn,handleMenuEnter:ma,handleFocus:ca,focus:pe,blur:Oe,handleBlur:Ve,handleClearClick:qe,handleClose:Et,handleKeydownEscape:Lt,toggleMenu:_n,selectOption:vn,getValueKey:wn,navigateOptions:Fn,handleDeleteTooltipTag:Wn,dropMenuVisible:Tn,queryChange:ue,groupQueryChange:le,showTagList:Bn,collapseTagList:zn,selectTagsStyle:ea,reference:k,input:$,iOSInput:V,tooltipRef:L,tagTooltipRef:z,tags:j,selectWrapper:ae,scrollbar:oe,handleMouseEnter:Gn,handleMouseLeave:Kn}};var ElOptions=defineComponent({name:"ElOptions",emits:["update-options"],setup(e,{slots:n,emit:r}){let g=[];function y(k,$){if(k.length!==$.length)return!1;for(const[V]of k.entries())if(k[V]!=$[V])return!1;return!0}return()=>{var k,$;const V=(k=n.default)==null?void 0:k.call(n),L=[];function z(j){Array.isArray(j)&&j.forEach(ae=>{var oe,re,ue,le;const de=(oe=ae?.type||{})==null?void 0:oe.name;de==="ElOptionGroup"?z(!isString$3(ae.children)&&!Array.isArray(ae.children)&&isFunction$3((re=ae.children)==null?void 0:re.default)?(ue=ae.children)==null?void 0:ue.default():ae.children):de==="ElOption"?L.push((le=ae.props)==null?void 0:le.label):Array.isArray(ae.children)&&z(ae.children)})}return V.length&&z(($=V[0])==null?void 0:$.children),y(L,g)||(g=L,r("update-options",L)),V}}});const COMPONENT_NAME$9="ElSelect",_sfc_main$23=defineComponent({name:COMPONENT_NAME$9,componentName:COMPONENT_NAME$9,components:{ElInput,ElSelectMenu:ElSelectMenu$1,ElOption:Option$1,ElOptions,ElTag,ElScrollbar,ElTooltip,ElIcon},directives:{ClickOutside},props:{name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:{type:String,validator:isValidComponentSize},effect:{type:String,default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:useTooltipContentProps.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:iconPropType,default:circle_close_default},fitInputWidth:Boolean,suffixIcon:{type:iconPropType,default:arrow_down_default},tagType:{...tagProps.type,default:"info"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,suffixTransition:{type:Boolean,default:!0},placement:{type:String,values:Ee,default:"bottom-start"},ariaLabel:{type:String,default:void 0}},emits:[UPDATE_MODEL_EVENT,CHANGE_EVENT,"remove-tag","clear","visible-change","focus","blur"],setup(e,n){const r=useNamespace("select"),g=useNamespace("input"),{t:y}=useLocale(),k=useSelectStates(e),{optionList:$,optionsArray:V,selectSize:L,readonly:z,handleResize:j,collapseTagSize:ae,debouncedOnInputChange:oe,debouncedQueryChange:re,deletePrevTag:ue,deleteTag:le,deleteSelected:de,handleOptionSelect:he,scrollToOption:_e,setSelected:xe,resetInputHeight:Ne,managePlaceholder:$e,showClose:Ce,selectDisabled:Ie,iconComponent:ze,iconReverse:Ue,showNewOption:Pt,emptyText:hn,toggleLastOptionHitState:Dt,resetInputState:xn,handleComposition:jt,onOptionCreate:Vn,onOptionDestroy:Rn,handleMenuEnter:Tn,handleFocus:Ln,focus:Sn,blur:An,handleBlur:In,handleClearClick:Mn,handleClose:ra,handleKeydownEscape:da,toggleMenu:ua,selectOption:aa,getValueKey:Nn,navigateOptions:En,handleDeleteTooltipTag:Zn,dropMenuVisible:ha,reference:xa,input:sa,iOSInput:Hn,tooltipRef:bn,tagTooltipRef:Xn,tags:$n,selectWrapper:kt,scrollbar:At,queryChange:Dn,groupQueryChange:Qn,handleMouseEnter:oa,handleMouseLeave:na,showTagList:la,collapseTagList:ma,selectTagsStyle:ca}=useSelect$2(e,k,n),{inputWidth:pe,selected:Oe,inputLength:Ve,filteredOptionsCount:qe,visible:Et,selectedLabel:Lt,hoverIndex:_n,query:vn,inputHovering:wn,currentPlaceholder:Cn,menuVisibleOnFocus:Bn,isOnComposition:zn,options:Fn,cachedOptions:Gn,optionsCount:Kn,prefixWidth:Wn}=toRefs(k),ea=computed(()=>{const ba=[r.b()],Oa=unref(L);return Oa&&ba.push(r.m(Oa)),e.disabled&&ba.push(r.m("disabled")),ba}),Pn=computed(()=>[r.e("tags"),r.is("disabled",unref(Ie))]),jn=computed(()=>[r.b("tags-wrapper"),{"has-prefix":unref(Wn)&&unref(Oe).length}]),On=computed(()=>[r.e("input"),r.is(unref(L)),r.is("disabled",unref(Ie))]),Un=computed(()=>[r.e("input"),r.is(unref(L)),r.em("input","iOS")]),Yn=computed(()=>[r.is("empty",!e.allowCreate&&!!unref(vn)&&unref(qe)===0)]),ta=computed(()=>({maxWidth:`${unref(pe)>123?unref(pe)-123:unref(pe)-75}px`})),Jn=computed(()=>({marginLeft:`${unref(Wn)}px`,flexGrow:1,width:`${unref(Ve)/(unref(pe)-32)}%`,maxWidth:`${unref(pe)-42}px`}));provide(selectKey,reactive({props:e,options:Fn,optionsArray:V,cachedOptions:Gn,optionsCount:Kn,filteredOptionsCount:qe,hoverIndex:_n,handleOptionSelect:he,onOptionCreate:Vn,onOptionDestroy:Rn,selectWrapper:kt,selected:Oe,setSelected:xe,queryChange:Dn,groupQueryChange:Qn})),onMounted(()=>{k.cachedPlaceHolder=Cn.value=e.placeholder||(()=>y("el.select.placeholder")),e.multiple&&Array.isArray(e.modelValue)&&e.modelValue.length>0&&(Cn.value=""),useResizeObserver(kt,j),e.remote&&e.multiple&&Ne(),nextTick(()=>{const ba=xa.value&&xa.value.$el;if(ba&&(pe.value=ba.getBoundingClientRect().width,n.slots.prefix)){const Oa=ba.querySelector(`.${g.e("prefix")}`);Wn.value=Math.max(Oa.getBoundingClientRect().width+11,30)}}),xe()}),e.multiple&&!Array.isArray(e.modelValue)&&n.emit(UPDATE_MODEL_EVENT,[]),!e.multiple&&Array.isArray(e.modelValue)&&n.emit(UPDATE_MODEL_EVENT,"");const pa=computed(()=>{var ba,Oa;return(Oa=(ba=bn.value)==null?void 0:ba.popperRef)==null?void 0:Oa.contentRef});return{isIOS,onOptionsRendered:ba=>{$.value=ba},prefixWidth:Wn,selectSize:L,readonly:z,handleResize:j,collapseTagSize:ae,debouncedOnInputChange:oe,debouncedQueryChange:re,deletePrevTag:ue,deleteTag:le,handleDeleteTooltipTag:Zn,deleteSelected:de,handleOptionSelect:he,scrollToOption:_e,inputWidth:pe,selected:Oe,inputLength:Ve,filteredOptionsCount:qe,visible:Et,selectedLabel:Lt,hoverIndex:_n,query:vn,inputHovering:wn,currentPlaceholder:Cn,menuVisibleOnFocus:Bn,isOnComposition:zn,options:Fn,resetInputHeight:Ne,managePlaceholder:$e,showClose:Ce,selectDisabled:Ie,iconComponent:ze,iconReverse:Ue,showNewOption:Pt,emptyText:hn,toggleLastOptionHitState:Dt,resetInputState:xn,handleComposition:jt,handleMenuEnter:Tn,handleFocus:Ln,focus:Sn,blur:An,handleBlur:In,handleClearClick:Mn,handleClose:ra,handleKeydownEscape:da,toggleMenu:ua,selectOption:aa,getValueKey:Nn,navigateOptions:En,dropMenuVisible:ha,reference:xa,input:sa,iOSInput:Hn,tooltipRef:bn,popperPaneRef:pa,tags:$n,selectWrapper:kt,scrollbar:At,wrapperKls:ea,tagsKls:Pn,tagWrapperKls:jn,inputKls:On,iOSInputKls:Un,scrollbarKls:Yn,selectTagsStyle:ca,nsSelect:r,tagTextStyle:ta,inputStyle:Jn,handleMouseEnter:oa,handleMouseLeave:na,showTagList:la,collapseTagList:ma,tagTooltipRef:Xn}}}),_hoisted_1$1D=["disabled","autocomplete","aria-label"],_hoisted_2$1s=["disabled"],_hoisted_3$W={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}};function _sfc_render$9(e,n,r,g,y,k){const $=resolveComponent("el-tag"),V=resolveComponent("el-tooltip"),L=resolveComponent("el-icon"),z=resolveComponent("el-input"),j=resolveComponent("el-option"),ae=resolveComponent("el-options"),oe=resolveComponent("el-scrollbar"),re=resolveComponent("el-select-menu"),ue=resolveDirective("click-outside");return withDirectives((openBlock(),createElementBlock("div",{ref:"selectWrapper",class:normalizeClass(e.wrapperKls),onMouseenter:n[22]||(n[22]=(...le)=>e.handleMouseEnter&&e.handleMouseEnter(...le)),onMouseleave:n[23]||(n[23]=(...le)=>e.handleMouseLeave&&e.handleMouseLeave(...le)),onClick:n[24]||(n[24]=withModifiers((...le)=>e.toggleMenu&&e.toggleMenu(...le),["stop"]))},[createVNode(V,{ref:"tooltipRef",visible:e.dropMenuVisible,placement:e.placement,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:e.effect,pure:"",trigger:"click",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:e.persistent,onShow:e.handleMenuEnter},{default:withCtx(()=>[createBaseVNode("div",{class:"select-trigger",onMouseenter:n[20]||(n[20]=le=>e.inputHovering=!0),onMouseleave:n[21]||(n[21]=le=>e.inputHovering=!1)},[e.multiple?(openBlock(),createElementBlock("div",{key:0,ref:"tags",tabindex:"-1",class:normalizeClass(e.tagsKls),style:normalizeStyle(e.selectTagsStyle),onClick:n[15]||(n[15]=(...le)=>e.focus&&e.focus(...le))},[e.collapseTags&&e.selected.length?(openBlock(),createBlock(Transition,{key:0,onAfterLeave:e.resetInputHeight},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(e.tagWrapperKls)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.showTagList,le=>(openBlock(),createBlock($,{key:e.getValueKey(le),closable:!e.selectDisabled&&!le.isDisabled,size:e.collapseTagSize,hit:le.hitState,type:e.tagType,"disable-transitions":"",onClose:de=>e.deleteTag(de,le)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(e.nsSelect.e("tags-text")),style:normalizeStyle(e.tagTextStyle)},toDisplayString$1(le.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128)),e.selected.length>e.maxCollapseTags?(openBlock(),createBlock($,{key:0,closable:!1,size:e.collapseTagSize,type:e.tagType,"disable-transitions":""},{default:withCtx(()=>[e.collapseTagsTooltip?(openBlock(),createBlock(V,{key:0,ref:"tagTooltipRef",disabled:e.dropMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(e.nsSelect.e("tags-text"))},"+ "+toDisplayString$1(e.selected.length-e.maxCollapseTags),3)]),content:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(e.nsSelect.e("collapse-tags"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.collapseTagList,le=>(openBlock(),createElementBlock("div",{key:e.getValueKey(le),class:normalizeClass(e.nsSelect.e("collapse-tag"))},[createVNode($,{class:"in-tooltip",closable:!e.selectDisabled&&!le.isDisabled,size:e.collapseTagSize,hit:le.hitState,type:e.tagType,"disable-transitions":"",style:{margin:"2px"},onClose:de=>e.handleDeleteTooltipTag(de,le)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(e.nsSelect.e("tags-text")),style:normalizeStyle({maxWidth:e.inputWidth-75+"px"})},toDisplayString$1(le.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"])],2))),128))],2)]),_:1},8,["disabled","effect","teleported"])):(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(e.nsSelect.e("tags-text"))},"+ "+toDisplayString$1(e.selected.length-e.maxCollapseTags),3))]),_:1},8,["size","type"])):createCommentVNode("v-if",!0)],2)]),_:1},8,["onAfterLeave"])):createCommentVNode("v-if",!0),e.collapseTags?createCommentVNode("v-if",!0):(openBlock(),createBlock(Transition,{key:1,onAfterLeave:e.resetInputHeight},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(e.tagWrapperKls),style:normalizeStyle(e.prefixWidth&&e.selected.length?{marginLeft:`${e.prefixWidth}px`}:"")},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.selected,le=>(openBlock(),createBlock($,{key:e.getValueKey(le),closable:!e.selectDisabled&&!le.isDisabled,size:e.collapseTagSize,hit:le.hitState,type:e.tagType,"disable-transitions":"",onClose:de=>e.deleteTag(de,le)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(e.nsSelect.e("tags-text")),style:normalizeStyle({maxWidth:e.inputWidth-75+"px"})},toDisplayString$1(le.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128))],6)]),_:1},8,["onAfterLeave"])),e.filterable&&!e.selectDisabled?withDirectives((openBlock(),createElementBlock("input",{key:2,ref:"input","onUpdate:modelValue":n[0]||(n[0]=le=>e.query=le),type:"text",class:normalizeClass(e.inputKls),disabled:e.selectDisabled,autocomplete:e.autocomplete,style:normalizeStyle(e.inputStyle),"aria-label":e.ariaLabel,onFocus:n[1]||(n[1]=(...le)=>e.handleFocus&&e.handleFocus(...le)),onBlur:n[2]||(n[2]=(...le)=>e.handleBlur&&e.handleBlur(...le)),onKeyup:n[3]||(n[3]=(...le)=>e.managePlaceholder&&e.managePlaceholder(...le)),onKeydown:[n[4]||(n[4]=(...le)=>e.resetInputState&&e.resetInputState(...le)),n[5]||(n[5]=withKeys(withModifiers(le=>e.navigateOptions("next"),["prevent"]),["down"])),n[6]||(n[6]=withKeys(withModifiers(le=>e.navigateOptions("prev"),["prevent"]),["up"])),n[7]||(n[7]=withKeys((...le)=>e.handleKeydownEscape&&e.handleKeydownEscape(...le),["esc"])),n[8]||(n[8]=withKeys(withModifiers((...le)=>e.selectOption&&e.selectOption(...le),["stop","prevent"]),["enter"])),n[9]||(n[9]=withKeys((...le)=>e.deletePrevTag&&e.deletePrevTag(...le),["delete"])),n[10]||(n[10]=withKeys(le=>e.visible=!1,["tab"]))],onCompositionstart:n[11]||(n[11]=(...le)=>e.handleComposition&&e.handleComposition(...le)),onCompositionupdate:n[12]||(n[12]=(...le)=>e.handleComposition&&e.handleComposition(...le)),onCompositionend:n[13]||(n[13]=(...le)=>e.handleComposition&&e.handleComposition(...le)),onInput:n[14]||(n[14]=(...le)=>e.debouncedQueryChange&&e.debouncedQueryChange(...le))},null,46,_hoisted_1$1D)),[[vModelText,e.query]]):createCommentVNode("v-if",!0)],6)):createCommentVNode("v-if",!0),createCommentVNode(" fix: https://github.com/element-plus/element-plus/issues/11415 "),e.isIOS&&!e.multiple&&e.filterable&&e.readonly?(openBlock(),createElementBlock("input",{key:1,ref:"iOSInput",class:normalizeClass(e.iOSInputKls),disabled:e.selectDisabled,type:"text"},null,10,_hoisted_2$1s)):createCommentVNode("v-if",!0),createVNode(z,{id:e.id,ref:"reference",modelValue:e.selectedLabel,"onUpdate:modelValue":n[16]||(n[16]=le=>e.selectedLabel=le),type:"text",placeholder:typeof e.currentPlaceholder=="function"?e.currentPlaceholder():e.currentPlaceholder,name:e.name,autocomplete:e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,class:normalizeClass([e.nsSelect.is("focus",e.visible)]),tabindex:e.multiple&&e.filterable?-1:void 0,label:e.ariaLabel,onFocus:e.handleFocus,onBlur:e.handleBlur,onInput:e.debouncedOnInputChange,onPaste:e.debouncedOnInputChange,onCompositionstart:e.handleComposition,onCompositionupdate:e.handleComposition,onCompositionend:e.handleComposition,onKeydown:[n[17]||(n[17]=withKeys(withModifiers(le=>e.navigateOptions("next"),["stop","prevent"]),["down"])),n[18]||(n[18]=withKeys(withModifiers(le=>e.navigateOptions("prev"),["stop","prevent"]),["up"])),withKeys(withModifiers(e.selectOption,["stop","prevent"]),["enter"]),withKeys(e.handleKeydownEscape,["esc"]),n[19]||(n[19]=withKeys(le=>e.visible=!1,["tab"]))]},createSlots({suffix:withCtx(()=>[e.iconComponent&&!e.showClose?(openBlock(),createBlock(L,{key:0,class:normalizeClass([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.iconReverse])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(e.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),e.showClose&&e.clearIcon?(openBlock(),createBlock(L,{key:1,class:normalizeClass([e.nsSelect.e("caret"),e.nsSelect.e("icon")]),onClick:e.handleClearClick},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(e.clearIcon)))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)]),_:2},[e.$slots.prefix?{name:"prefix",fn:withCtx(()=>[createBaseVNode("div",_hoisted_3$W,[renderSlot(e.$slots,"prefix")])])}:void 0]),1032,["id","modelValue","placeholder","name","autocomplete","size","disabled","readonly","class","tabindex","label","onFocus","onBlur","onInput","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown"])],32)]),content:withCtx(()=>[createVNode(re,null,{default:withCtx(()=>[withDirectives(createVNode(oe,{ref:"scrollbar",tag:"ul","wrap-class":e.nsSelect.be("dropdown","wrap"),"view-class":e.nsSelect.be("dropdown","list"),class:normalizeClass(e.scrollbarKls)},{default:withCtx(()=>[e.showNewOption?(openBlock(),createBlock(j,{key:0,value:e.query,created:!0},null,8,["value"])):createCommentVNode("v-if",!0),createVNode(ae,{onUpdateOptions:e.onOptionsRendered},{default:withCtx(()=>[renderSlot(e.$slots,"default")]),_:3},8,["onUpdateOptions"])]),_:3},8,["wrap-class","view-class","class"]),[[vShow,e.options.size>0&&!e.loading]]),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&e.options.size===0)?(openBlock(),createElementBlock(Fragment,{key:0},[e.$slots.empty?renderSlot(e.$slots,"empty",{key:0}):(openBlock(),createElementBlock("p",{key:1,class:normalizeClass(e.nsSelect.be("dropdown","empty"))},toDisplayString$1(e.emptyText),3))],64)):createCommentVNode("v-if",!0)]),_:3})]),_:3},8,["visible","placement","teleported","popper-class","popper-options","effect","transition","persistent","onShow"])],34)),[[ue,e.handleClose,e.popperPaneRef]])}var Select$1=_export_sfc$1(_sfc_main$23,[["render",_sfc_render$9],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select.vue"]]);const _sfc_main$22=defineComponent({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(e){const n=useNamespace("select"),r=ref(!0),g=getCurrentInstance(),y=ref([]);provide(selectGroupKey,reactive({...toRefs(e)}));const k=inject(selectKey);onMounted(()=>{y.value=$(g.subTree)});const $=L=>{const z=[];return Array.isArray(L.children)&&L.children.forEach(j=>{var ae;j.type&&j.type.name==="ElOption"&&j.component&&j.component.proxy?z.push(j.component.proxy):(ae=j.children)!=null&&ae.length&&z.push(...$(j))}),z},{groupQueryChange:V}=toRaw(k);return watch(V,()=>{r.value=y.value.some(L=>L.visible===!0)},{flush:"post"}),{visible:r,ns:n}}});function _sfc_render$8(e,n,r,g,y,k){return withDirectives((openBlock(),createElementBlock("ul",{class:normalizeClass(e.ns.be("group","wrap"))},[createBaseVNode("li",{class:normalizeClass(e.ns.be("group","title"))},toDisplayString$1(e.label),3),createBaseVNode("li",null,[createBaseVNode("ul",{class:normalizeClass(e.ns.b("group"))},[renderSlot(e.$slots,"default")],2)])],2)),[[vShow,e.visible]])}var OptionGroup=_export_sfc$1(_sfc_main$22,[["render",_sfc_render$8],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option-group.vue"]]);const ElSelect=withInstall(Select$1,{Option:Option$1,OptionGroup}),ElOption=withNoopInstall(Option$1),ElOptionGroup=withNoopInstall(OptionGroup),usePagination=()=>inject(elPaginationKey,{}),paginationSizesProps=buildProps({pageSize:{type:Number,required:!0},pageSizes:{type:definePropType(Array),default:()=>mutable([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,size:{type:String,values:componentSizes}}),__default__$C=defineComponent({name:"ElPaginationSizes"}),_sfc_main$21=defineComponent({...__default__$C,props:paginationSizesProps,emits:["page-size-change"],setup(e,{emit:n}){const r=e,{t:g}=useLocale(),y=useNamespace("pagination"),k=usePagination(),$=ref(r.pageSize);watch(()=>r.pageSizes,(z,j)=>{if(!isEqual$1(z,j)&&Array.isArray(z)){const ae=z.includes(r.pageSize)?r.pageSize:r.pageSizes[0];n("page-size-change",ae)}}),watch(()=>r.pageSize,z=>{$.value=z});const V=computed(()=>r.pageSizes);function L(z){var j;z!==$.value&&($.value=z,(j=k.handleSizeChange)==null||j.call(k,Number(z)))}return(z,j)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(y).e("sizes"))},[createVNode(unref(ElSelect),{"model-value":$.value,disabled:z.disabled,"popper-class":z.popperClass,size:z.size,"validate-event":!1,onChange:L},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(V),ae=>(openBlock(),createBlock(unref(ElOption),{key:ae,value:ae,label:ae+unref(g)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size"])],2))}});var Sizes=_export_sfc$1(_sfc_main$21,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/sizes.vue"]]);const paginationJumperProps=buildProps({size:{type:String,values:componentSizes}}),_hoisted_1$1C=["disabled"],__default__$B=defineComponent({name:"ElPaginationJumper"}),_sfc_main$20=defineComponent({...__default__$B,props:paginationJumperProps,setup(e){const{t:n}=useLocale(),r=useNamespace("pagination"),{pageCount:g,disabled:y,currentPage:k,changeEvent:$}=usePagination(),V=ref(),L=computed(()=>{var ae;return(ae=V.value)!=null?ae:k?.value});function z(ae){V.value=ae?+ae:""}function j(ae){ae=Math.trunc(+ae),$?.(ae),V.value=void 0}return(ae,oe)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(r).e("jump")),disabled:unref(y)},[createBaseVNode("span",{class:normalizeClass([unref(r).e("goto")])},toDisplayString$1(unref(n)("el.pagination.goto")),3),createVNode(unref(ElInput),{size:ae.size,class:normalizeClass([unref(r).e("editor"),unref(r).is("in-pagination")]),min:1,max:unref(g),disabled:unref(y),"model-value":unref(L),"validate-event":!1,label:unref(n)("el.pagination.page"),type:"number","onUpdate:modelValue":z,onChange:j},null,8,["size","class","max","disabled","model-value","label"]),createBaseVNode("span",{class:normalizeClass([unref(r).e("classifier")])},toDisplayString$1(unref(n)("el.pagination.pageClassifier")),3)],10,_hoisted_1$1C))}});var Jumper=_export_sfc$1(_sfc_main$20,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/jumper.vue"]]);const paginationTotalProps=buildProps({total:{type:Number,default:1e3}}),_hoisted_1$1B=["disabled"],__default__$A=defineComponent({name:"ElPaginationTotal"}),_sfc_main$1$=defineComponent({...__default__$A,props:paginationTotalProps,setup(e){const{t:n}=useLocale(),r=useNamespace("pagination"),{disabled:g}=usePagination();return(y,k)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(r).e("total")),disabled:unref(g)},toDisplayString$1(unref(n)("el.pagination.total",{total:y.total})),11,_hoisted_1$1B))}});var Total=_export_sfc$1(_sfc_main$1$,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/total.vue"]]);const paginationPagerProps=buildProps({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),_hoisted_1$1A=["onKeyup"],_hoisted_2$1r=["aria-current","aria-label","tabindex"],_hoisted_3$V=["tabindex","aria-label"],_hoisted_4$N=["aria-current","aria-label","tabindex"],_hoisted_5$E=["tabindex","aria-label"],_hoisted_6$y=["aria-current","aria-label","tabindex"],__default__$z=defineComponent({name:"ElPaginationPager"}),_sfc_main$1_=defineComponent({...__default__$z,props:paginationPagerProps,emits:["change"],setup(e,{emit:n}){const r=e,g=useNamespace("pager"),y=useNamespace("icon"),{t:k}=useLocale(),$=ref(!1),V=ref(!1),L=ref(!1),z=ref(!1),j=ref(!1),ae=ref(!1),oe=computed(()=>{const Ne=r.pagerCount,$e=(Ne-1)/2,Ce=Number(r.currentPage),Ie=Number(r.pageCount);let ze=!1,Ue=!1;Ie>Ne&&(Ce>Ne-$e&&(ze=!0),Ce<Ie-$e&&(Ue=!0));const Pt=[];if(ze&&!Ue){const hn=Ie-(Ne-2);for(let Dt=hn;Dt<Ie;Dt++)Pt.push(Dt)}else if(!ze&&Ue)for(let hn=2;hn<Ne;hn++)Pt.push(hn);else if(ze&&Ue){const hn=Math.floor(Ne/2)-1;for(let Dt=Ce-hn;Dt<=Ce+hn;Dt++)Pt.push(Dt)}else for(let hn=2;hn<Ie;hn++)Pt.push(hn);return Pt}),re=computed(()=>["more","btn-quickprev",y.b(),g.is("disabled",r.disabled)]),ue=computed(()=>["more","btn-quicknext",y.b(),g.is("disabled",r.disabled)]),le=computed(()=>r.disabled?-1:0);watchEffect(()=>{const Ne=(r.pagerCount-1)/2;$.value=!1,V.value=!1,r.pageCount>r.pagerCount&&(r.currentPage>r.pagerCount-Ne&&($.value=!0),r.currentPage<r.pageCount-Ne&&(V.value=!0))});function de(Ne=!1){r.disabled||(Ne?L.value=!0:z.value=!0)}function he(Ne=!1){Ne?j.value=!0:ae.value=!0}function _e(Ne){const $e=Ne.target;if($e.tagName.toLowerCase()==="li"&&Array.from($e.classList).includes("number")){const Ce=Number($e.textContent);Ce!==r.currentPage&&n("change",Ce)}else $e.tagName.toLowerCase()==="li"&&Array.from($e.classList).includes("more")&&xe(Ne)}function xe(Ne){const $e=Ne.target;if($e.tagName.toLowerCase()==="ul"||r.disabled)return;let Ce=Number($e.textContent);const Ie=r.pageCount,ze=r.currentPage,Ue=r.pagerCount-2;$e.className.includes("more")&&($e.className.includes("quickprev")?Ce=ze-Ue:$e.className.includes("quicknext")&&(Ce=ze+Ue)),Number.isNaN(+Ce)||(Ce<1&&(Ce=1),Ce>Ie&&(Ce=Ie)),Ce!==ze&&n("change",Ce)}return(Ne,$e)=>(openBlock(),createElementBlock("ul",{class:normalizeClass(unref(g).b()),onClick:xe,onKeyup:withKeys(_e,["enter"])},[Ne.pageCount>0?(openBlock(),createElementBlock("li",{key:0,class:normalizeClass([[unref(g).is("active",Ne.currentPage===1),unref(g).is("disabled",Ne.disabled)],"number"]),"aria-current":Ne.currentPage===1,"aria-label":unref(k)("el.pagination.currentPage",{pager:1}),tabindex:unref(le)}," 1 ",10,_hoisted_2$1r)):createCommentVNode("v-if",!0),$.value?(openBlock(),createElementBlock("li",{key:1,class:normalizeClass(unref(re)),tabindex:unref(le),"aria-label":unref(k)("el.pagination.prevPages",{pager:Ne.pagerCount-2}),onMouseenter:$e[0]||($e[0]=Ce=>de(!0)),onMouseleave:$e[1]||($e[1]=Ce=>L.value=!1),onFocus:$e[2]||($e[2]=Ce=>he(!0)),onBlur:$e[3]||($e[3]=Ce=>j.value=!1)},[(L.value||j.value)&&!Ne.disabled?(openBlock(),createBlock(unref(d_arrow_left_default),{key:0})):(openBlock(),createBlock(unref(more_filled_default),{key:1}))],42,_hoisted_3$V)):createCommentVNode("v-if",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(oe),Ce=>(openBlock(),createElementBlock("li",{key:Ce,class:normalizeClass([[unref(g).is("active",Ne.currentPage===Ce),unref(g).is("disabled",Ne.disabled)],"number"]),"aria-current":Ne.currentPage===Ce,"aria-label":unref(k)("el.pagination.currentPage",{pager:Ce}),tabindex:unref(le)},toDisplayString$1(Ce),11,_hoisted_4$N))),128)),V.value?(openBlock(),createElementBlock("li",{key:2,class:normalizeClass(unref(ue)),tabindex:unref(le),"aria-label":unref(k)("el.pagination.nextPages",{pager:Ne.pagerCount-2}),onMouseenter:$e[4]||($e[4]=Ce=>de()),onMouseleave:$e[5]||($e[5]=Ce=>z.value=!1),onFocus:$e[6]||($e[6]=Ce=>he()),onBlur:$e[7]||($e[7]=Ce=>ae.value=!1)},[(z.value||ae.value)&&!Ne.disabled?(openBlock(),createBlock(unref(d_arrow_right_default),{key:0})):(openBlock(),createBlock(unref(more_filled_default),{key:1}))],42,_hoisted_5$E)):createCommentVNode("v-if",!0),Ne.pageCount>1?(openBlock(),createElementBlock("li",{key:3,class:normalizeClass([[unref(g).is("active",Ne.currentPage===Ne.pageCount),unref(g).is("disabled",Ne.disabled)],"number"]),"aria-current":Ne.currentPage===Ne.pageCount,"aria-label":unref(k)("el.pagination.currentPage",{pager:Ne.pageCount}),tabindex:unref(le)},toDisplayString$1(Ne.pageCount),11,_hoisted_6$y)):createCommentVNode("v-if",!0)],42,_hoisted_1$1A))}});var Pager=_export_sfc$1(_sfc_main$1_,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/pager.vue"]]);const isAbsent=e=>typeof e!="number",paginationProps=buildProps({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:e=>isNumber$1(e)&&Math.trunc(e)===e&&e>4&&e<22&&e%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:definePropType(Array),default:()=>mutable([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:iconPropType,default:()=>arrow_left_default},nextText:{type:String,default:""},nextIcon:{type:iconPropType,default:()=>arrow_right_default},small:Boolean,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean}),paginationEmits={"update:current-page":e=>isNumber$1(e),"update:page-size":e=>isNumber$1(e),"size-change":e=>isNumber$1(e),"current-change":e=>isNumber$1(e),"prev-click":e=>isNumber$1(e),"next-click":e=>isNumber$1(e)},componentName="ElPagination";var Pagination=defineComponent({name:componentName,props:paginationProps,emits:paginationEmits,setup(e,{emit:n,slots:r}){const{t:g}=useLocale(),y=useNamespace("pagination"),k=getCurrentInstance().vnode.props||{},$="onUpdate:currentPage"in k||"onUpdate:current-page"in k||"onCurrentChange"in k,V="onUpdate:pageSize"in k||"onUpdate:page-size"in k||"onSizeChange"in k,L=computed(()=>{if(isAbsent(e.total)&&isAbsent(e.pageCount)||!isAbsent(e.currentPage)&&!$)return!1;if(e.layout.includes("sizes")){if(isAbsent(e.pageCount)){if(!isAbsent(e.total)&&!isAbsent(e.pageSize)&&!V)return!1}else if(!V)return!1}return!0}),z=ref(isAbsent(e.defaultPageSize)?10:e.defaultPageSize),j=ref(isAbsent(e.defaultCurrentPage)?1:e.defaultCurrentPage),ae=computed({get(){return isAbsent(e.pageSize)?z.value:e.pageSize},set(xe){isAbsent(e.pageSize)&&(z.value=xe),V&&(n("update:page-size",xe),n("size-change",xe))}}),oe=computed(()=>{let xe=0;return isAbsent(e.pageCount)?isAbsent(e.total)||(xe=Math.max(1,Math.ceil(e.total/ae.value))):xe=e.pageCount,xe}),re=computed({get(){return isAbsent(e.currentPage)?j.value:e.currentPage},set(xe){let Ne=xe;xe<1?Ne=1:xe>oe.value&&(Ne=oe.value),isAbsent(e.currentPage)&&(j.value=Ne),$&&(n("update:current-page",Ne),n("current-change",Ne))}});watch(oe,xe=>{re.value>xe&&(re.value=xe)});function ue(xe){re.value=xe}function le(xe){ae.value=xe;const Ne=oe.value;re.value>Ne&&(re.value=Ne)}function de(){e.disabled||(re.value-=1,n("prev-click",re.value))}function he(){e.disabled||(re.value+=1,n("next-click",re.value))}function _e(xe,Ne){xe&&(xe.props||(xe.props={}),xe.props.class=[xe.props.class,Ne].join(" "))}return provide(elPaginationKey,{pageCount:oe,disabled:computed(()=>e.disabled),currentPage:re,changeEvent:ue,handleSizeChange:le}),()=>{var xe,Ne;if(!L.value)return g("el.pagination.deprecationWarning"),null;if(!e.layout||e.hideOnSinglePage&&oe.value<=1)return null;const $e=[],Ce=[],Ie=h$1("div",{class:y.e("rightwrapper")},Ce),ze={prev:h$1(Prev,{disabled:e.disabled,currentPage:re.value,prevText:e.prevText,prevIcon:e.prevIcon,onClick:de}),jumper:h$1(Jumper,{size:e.small?"small":"default"}),pager:h$1(Pager,{currentPage:re.value,pageCount:oe.value,pagerCount:e.pagerCount,onChange:ue,disabled:e.disabled}),next:h$1(Next,{disabled:e.disabled,currentPage:re.value,pageCount:oe.value,nextText:e.nextText,nextIcon:e.nextIcon,onClick:he}),sizes:h$1(Sizes,{pageSize:ae.value,pageSizes:e.pageSizes,popperClass:e.popperClass,disabled:e.disabled,size:e.small?"small":"default"}),slot:(Ne=(xe=r?.default)==null?void 0:xe.call(r))!=null?Ne:null,total:h$1(Total,{total:isAbsent(e.total)?0:e.total})},Ue=e.layout.split(",").map(hn=>hn.trim());let Pt=!1;return Ue.forEach(hn=>{if(hn==="->"){Pt=!0;return}Pt?Ce.push(ze[hn]):$e.push(ze[hn])}),_e($e[0],y.is("first")),_e($e[$e.length-1],y.is("last")),Pt&&Ce.length>0&&(_e(Ce[0],y.is("first")),_e(Ce[Ce.length-1],y.is("last")),$e.push(Ie)),h$1("div",{class:[y.b(),y.is("background",e.background),{[y.m("small")]:e.small}]},$e)}}});const ElPagination=withInstall(Pagination),popconfirmProps=buildProps({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:buttonTypes,default:"primary"},cancelButtonType:{type:String,values:buttonTypes,default:"text"},icon:{type:iconPropType,default:()=>question_filled_default},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:useTooltipContentProps.teleported,persistent:useTooltipContentProps.persistent,width:{type:[String,Number],default:150}}),popconfirmEmits={confirm:e=>e instanceof MouseEvent,cancel:e=>e instanceof MouseEvent},__default__$y=defineComponent({name:"ElPopconfirm"}),_sfc_main$1Z=defineComponent({...__default__$y,props:popconfirmProps,emits:popconfirmEmits,setup(e,{emit:n}){const r=e,{t:g}=useLocale(),y=useNamespace("popconfirm"),k=ref(),$=()=>{var oe,re;(re=(oe=k.value)==null?void 0:oe.onClose)==null||re.call(oe)},V=computed(()=>({width:addUnit(r.width)})),L=oe=>{n("confirm",oe),$()},z=oe=>{n("cancel",oe),$()},j=computed(()=>r.confirmButtonText||g("el.popconfirm.confirmButtonText")),ae=computed(()=>r.cancelButtonText||g("el.popconfirm.cancelButtonText"));return(oe,re)=>(openBlock(),createBlock(unref(ElTooltip),mergeProps({ref_key:"tooltipRef",ref:k,trigger:"click",effect:"light"},oe.$attrs,{"popper-class":`${unref(y).namespace.value}-popover`,"popper-style":unref(V),teleported:oe.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":oe.hideAfter,persistent:oe.persistent}),{content:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(unref(y).b())},[createBaseVNode("div",{class:normalizeClass(unref(y).e("main"))},[!oe.hideIcon&&oe.icon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(y).e("icon")),style:normalizeStyle({color:oe.iconColor})},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(oe.icon)))]),_:1},8,["class","style"])):createCommentVNode("v-if",!0),createTextVNode(" "+toDisplayString$1(oe.title),1)],2),createBaseVNode("div",{class:normalizeClass(unref(y).e("action"))},[createVNode(unref(ElButton),{size:"small",type:oe.cancelButtonType==="text"?"":oe.cancelButtonType,text:oe.cancelButtonType==="text",onClick:z},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(ae)),1)]),_:1},8,["type","text"]),createVNode(unref(ElButton),{size:"small",type:oe.confirmButtonType==="text"?"":oe.confirmButtonType,text:oe.confirmButtonType==="text",onClick:L},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(j)),1)]),_:1},8,["type","text"])],2)],2)]),default:withCtx(()=>[oe.$slots.reference?renderSlot(oe.$slots,"reference",{key:0}):createCommentVNode("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var Popconfirm=_export_sfc$1(_sfc_main$1Z,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popconfirm/src/popconfirm.vue"]]);const ElPopconfirm=withInstall(Popconfirm),popoverProps=buildProps({trigger:useTooltipTriggerProps.trigger,placement:dropdownProps.placement,disabled:useTooltipTriggerProps.disabled,visible:useTooltipContentProps.visible,transition:useTooltipContentProps.transition,popperOptions:dropdownProps.popperOptions,tabindex:dropdownProps.tabindex,content:useTooltipContentProps.content,popperStyle:useTooltipContentProps.popperStyle,popperClass:useTooltipContentProps.popperClass,enterable:{...useTooltipContentProps.enterable,default:!0},effect:{...useTooltipContentProps.effect,default:"light"},teleported:useTooltipContentProps.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),popoverEmits={"update:visible":e=>isBoolean$1(e),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},updateEventKeyRaw="onUpdate:visible",__default__$x=defineComponent({name:"ElPopover"}),_sfc_main$1Y=defineComponent({...__default__$x,props:popoverProps,emits:popoverEmits,setup(e,{expose:n,emit:r}){const g=e,y=computed(()=>g[updateEventKeyRaw]),k=useNamespace("popover"),$=ref(),V=computed(()=>{var de;return(de=unref($))==null?void 0:de.popperRef}),L=computed(()=>[{width:addUnit(g.width)},g.popperStyle]),z=computed(()=>[k.b(),g.popperClass,{[k.m("plain")]:!!g.content}]),j=computed(()=>g.transition===`${k.namespace.value}-fade-in-linear`),ae=()=>{var de;(de=$.value)==null||de.hide()},oe=()=>{r("before-enter")},re=()=>{r("before-leave")},ue=()=>{r("after-enter")},le=()=>{r("update:visible",!1),r("after-leave")};return n({popperRef:V,hide:ae}),(de,he)=>(openBlock(),createBlock(unref(ElTooltip),mergeProps({ref_key:"tooltipRef",ref:$},de.$attrs,{trigger:de.trigger,placement:de.placement,disabled:de.disabled,visible:de.visible,transition:de.transition,"popper-options":de.popperOptions,tabindex:de.tabindex,content:de.content,offset:de.offset,"show-after":de.showAfter,"hide-after":de.hideAfter,"auto-close":de.autoClose,"show-arrow":de.showArrow,"aria-label":de.title,effect:de.effect,enterable:de.enterable,"popper-class":unref(z),"popper-style":unref(L),teleported:de.teleported,persistent:de.persistent,"gpu-acceleration":unref(j),"onUpdate:visible":unref(y),onBeforeShow:oe,onBeforeHide:re,onShow:ue,onHide:le}),{content:withCtx(()=>[de.title?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(k).e("title")),role:"title"},toDisplayString$1(de.title),3)):createCommentVNode("v-if",!0),renderSlot(de.$slots,"default",{},()=>[createTextVNode(toDisplayString$1(de.content),1)])]),default:withCtx(()=>[de.$slots.reference?renderSlot(de.$slots,"reference",{key:0}):createCommentVNode("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var Popover=_export_sfc$1(_sfc_main$1Y,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popover/src/popover.vue"]]);const attachEvents=(e,n)=>{const r=n.arg||n.value,g=r?.popperRef;g&&(g.triggerRef=e)};var PopoverDirective={mounted(e,n){attachEvents(e,n)},updated(e,n){attachEvents(e,n)}};const VPopover="popover",ElPopoverDirective=withInstallDirective(PopoverDirective,VPopover),ElPopover=withInstall(Popover,{directive:ElPopoverDirective}),progressProps=buildProps({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:definePropType(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:definePropType([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:definePropType(Function),default:e=>`${e}%`}}),_hoisted_1$1z=["aria-valuenow"],_hoisted_2$1q={viewBox:"0 0 100 100"},_hoisted_3$U=["d","stroke","stroke-linecap","stroke-width"],_hoisted_4$M=["d","stroke","opacity","stroke-linecap","stroke-width"],_hoisted_5$D={key:0},__default__$w=defineComponent({name:"ElProgress"}),_sfc_main$1X=defineComponent({...__default__$w,props:progressProps,setup(e){const n=e,r={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},g=useNamespace("progress"),y=computed(()=>({width:`${n.percentage}%`,animationDuration:`${n.duration}s`,backgroundColor:_e(n.percentage)})),k=computed(()=>(n.strokeWidth/n.width*100).toFixed(1)),$=computed(()=>["circle","dashboard"].includes(n.type)?Number.parseInt(`${50-Number.parseFloat(k.value)/2}`,10):0),V=computed(()=>{const xe=$.value,Ne=n.type==="dashboard";return`
          M 50 50
          m 0 ${Ne?"":"-"}${xe}
          a ${xe} ${xe} 0 1 1 0 ${Ne?"-":""}${xe*2}
          a ${xe} ${xe} 0 1 1 0 ${Ne?"":"-"}${xe*2}
          `}),L=computed(()=>2*Math.PI*$.value),z=computed(()=>n.type==="dashboard"?.75:1),j=computed(()=>`${-1*L.value*(1-z.value)/2}px`),ae=computed(()=>({strokeDasharray:`${L.value*z.value}px, ${L.value}px`,strokeDashoffset:j.value})),oe=computed(()=>({strokeDasharray:`${L.value*z.value*(n.percentage/100)}px, ${L.value}px`,strokeDashoffset:j.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),re=computed(()=>{let xe;return n.color?xe=_e(n.percentage):xe=r[n.status]||r.default,xe}),ue=computed(()=>n.status==="warning"?warning_filled_default:n.type==="line"?n.status==="success"?circle_check_default:circle_close_default:n.status==="success"?check_default:close_default),le=computed(()=>n.type==="line"?12+n.strokeWidth*.4:n.width*.111111+2),de=computed(()=>n.format(n.percentage));function he(xe){const Ne=100/xe.length;return xe.map((Ce,Ie)=>isString$3(Ce)?{color:Ce,percentage:(Ie+1)*Ne}:Ce).sort((Ce,Ie)=>Ce.percentage-Ie.percentage)}const _e=xe=>{var Ne;const{color:$e}=n;if(isFunction$3($e))return $e(xe);if(isString$3($e))return $e;{const Ce=he($e);for(const Ie of Ce)if(Ie.percentage>xe)return Ie.color;return(Ne=Ce[Ce.length-1])==null?void 0:Ne.color}};return(xe,Ne)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(g).b(),unref(g).m(xe.type),unref(g).is(xe.status),{[unref(g).m("without-text")]:!xe.showText,[unref(g).m("text-inside")]:xe.textInside}]),role:"progressbar","aria-valuenow":xe.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[xe.type==="line"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(g).b("bar"))},[createBaseVNode("div",{class:normalizeClass(unref(g).be("bar","outer")),style:normalizeStyle({height:`${xe.strokeWidth}px`})},[createBaseVNode("div",{class:normalizeClass([unref(g).be("bar","inner"),{[unref(g).bem("bar","inner","indeterminate")]:xe.indeterminate},{[unref(g).bem("bar","inner","striped")]:xe.striped},{[unref(g).bem("bar","inner","striped-flow")]:xe.stripedFlow}]),style:normalizeStyle(unref(y))},[(xe.showText||xe.$slots.default)&&xe.textInside?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(g).be("bar","innerText"))},[renderSlot(xe.$slots,"default",{percentage:xe.percentage},()=>[createBaseVNode("span",null,toDisplayString$1(unref(de)),1)])],2)):createCommentVNode("v-if",!0)],6)],6)],2)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(g).b("circle")),style:normalizeStyle({height:`${xe.width}px`,width:`${xe.width}px`})},[(openBlock(),createElementBlock("svg",_hoisted_2$1q,[createBaseVNode("path",{class:normalizeClass(unref(g).be("circle","track")),d:unref(V),stroke:`var(${unref(g).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":xe.strokeLinecap,"stroke-width":unref(k),fill:"none",style:normalizeStyle(unref(ae))},null,14,_hoisted_3$U),createBaseVNode("path",{class:normalizeClass(unref(g).be("circle","path")),d:unref(V),stroke:unref(re),fill:"none",opacity:xe.percentage?1:0,"stroke-linecap":xe.strokeLinecap,"stroke-width":unref(k),style:normalizeStyle(unref(oe))},null,14,_hoisted_4$M)]))],6)),(xe.showText||xe.$slots.default)&&!xe.textInside?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(unref(g).e("text")),style:normalizeStyle({fontSize:`${unref(le)}px`})},[renderSlot(xe.$slots,"default",{percentage:xe.percentage},()=>[xe.status?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(ue))))]),_:1})):(openBlock(),createElementBlock("span",_hoisted_5$D,toDisplayString$1(unref(de)),1))])],6)):createCommentVNode("v-if",!0)],10,_hoisted_1$1z))}});var Progress=_export_sfc$1(_sfc_main$1X,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const ElProgress=withInstall(Progress),rateProps=buildProps({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:definePropType([Array,Object]),default:()=>mutable(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:definePropType([Array,Object]),default:()=>[star_filled_default,star_filled_default,star_filled_default]},voidIcon:{type:iconPropType,default:()=>star_default},disabledVoidIcon:{type:iconPropType,default:()=>star_filled_default},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:definePropType(Array),default:()=>mutable(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:useSizeProp,label:{type:String,default:void 0},clearable:{type:Boolean,default:!1}}),rateEmits={[CHANGE_EVENT]:e=>isNumber$1(e),[UPDATE_MODEL_EVENT]:e=>isNumber$1(e)},_hoisted_1$1y=["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"],_hoisted_2$1p=["onMousemove","onClick"],__default__$v=defineComponent({name:"ElRate"}),_sfc_main$1W=defineComponent({...__default__$v,props:rateProps,emits:rateEmits,setup(e,{expose:n,emit:r}){const g=e;function y(Rn,Tn){const Ln=In=>isObject$3(In),Sn=Object.keys(Tn).map(In=>+In).filter(In=>{const Mn=Tn[In];return(Ln(Mn)?Mn.excluded:!1)?Rn<In:Rn<=In}).sort((In,Mn)=>In-Mn),An=Tn[Sn[0]];return Ln(An)&&An.value||An}const k=inject(formContextKey,void 0),$=inject(formItemContextKey,void 0),V=useFormSize(),L=useNamespace("rate"),{inputId:z,isLabeledByFormItem:j}=useFormItemInputId(g,{formItemContext:$}),ae=ref(g.modelValue),oe=ref(-1),re=ref(!0),ue=computed(()=>[L.b(),L.m(V.value)]),le=computed(()=>g.disabled||k?.disabled),de=computed(()=>L.cssVarBlock({"void-color":g.voidColor,"disabled-void-color":g.disabledVoidColor,"fill-color":Ne.value})),he=computed(()=>{let Rn="";return g.showScore?Rn=g.scoreTemplate.replace(/\{\s*value\s*\}/,le.value?`${g.modelValue}`:`${ae.value}`):g.showText&&(Rn=g.texts[Math.ceil(ae.value)-1]),Rn}),_e=computed(()=>g.modelValue*100-Math.floor(g.modelValue)*100),xe=computed(()=>isArray$3(g.colors)?{[g.lowThreshold]:g.colors[0],[g.highThreshold]:{value:g.colors[1],excluded:!0},[g.max]:g.colors[2]}:g.colors),Ne=computed(()=>{const Rn=y(ae.value,xe.value);return isObject$3(Rn)?"":Rn}),$e=computed(()=>{let Rn="";return le.value?Rn=`${_e.value}%`:g.allowHalf&&(Rn="50%"),{color:Ne.value,width:Rn}}),Ce=computed(()=>{let Rn=isArray$3(g.icons)?[...g.icons]:{...g.icons};return Rn=markRaw(Rn),isArray$3(Rn)?{[g.lowThreshold]:Rn[0],[g.highThreshold]:{value:Rn[1],excluded:!0},[g.max]:Rn[2]}:Rn}),Ie=computed(()=>y(g.modelValue,Ce.value)),ze=computed(()=>le.value?isString$3(g.disabledVoidIcon)?g.disabledVoidIcon:markRaw(g.disabledVoidIcon):isString$3(g.voidIcon)?g.voidIcon:markRaw(g.voidIcon)),Ue=computed(()=>y(ae.value,Ce.value));function Pt(Rn){const Tn=le.value&&_e.value>0&&Rn-1<g.modelValue&&Rn>g.modelValue,Ln=g.allowHalf&&re.value&&Rn-.5<=ae.value&&Rn>ae.value;return Tn||Ln}function hn(Rn){g.clearable&&Rn===g.modelValue&&(Rn=0),r(UPDATE_MODEL_EVENT,Rn),g.modelValue!==Rn&&r("change",Rn)}function Dt(Rn){le.value||(g.allowHalf&&re.value?hn(ae.value):hn(Rn))}function xn(Rn){if(le.value)return;let Tn=ae.value;const Ln=Rn.code;return Ln===EVENT_CODE.up||Ln===EVENT_CODE.right?(g.allowHalf?Tn+=.5:Tn+=1,Rn.stopPropagation(),Rn.preventDefault()):(Ln===EVENT_CODE.left||Ln===EVENT_CODE.down)&&(g.allowHalf?Tn-=.5:Tn-=1,Rn.stopPropagation(),Rn.preventDefault()),Tn=Tn<0?0:Tn,Tn=Tn>g.max?g.max:Tn,r(UPDATE_MODEL_EVENT,Tn),r("change",Tn),Tn}function jt(Rn,Tn){if(!le.value){if(g.allowHalf&&Tn){let Ln=Tn.target;hasClass(Ln,L.e("item"))&&(Ln=Ln.querySelector(`.${L.e("icon")}`)),(Ln.clientWidth===0||hasClass(Ln,L.e("decimal")))&&(Ln=Ln.parentNode),re.value=Tn.offsetX*2<=Ln.clientWidth,ae.value=re.value?Rn-.5:Rn}else ae.value=Rn;oe.value=Rn}}function Vn(){le.value||(g.allowHalf&&(re.value=g.modelValue!==Math.floor(g.modelValue)),ae.value=g.modelValue,oe.value=-1)}return watch(()=>g.modelValue,Rn=>{ae.value=Rn,re.value=g.modelValue!==Math.floor(g.modelValue)}),g.modelValue||r(UPDATE_MODEL_EVENT,0),n({setCurrentValue:jt,resetCurrentValue:Vn}),(Rn,Tn)=>{var Ln;return openBlock(),createElementBlock("div",{id:unref(z),class:normalizeClass([unref(ue),unref(L).is("disabled",unref(le))]),role:"slider","aria-label":unref(j)?void 0:Rn.label||"rating","aria-labelledby":unref(j)?(Ln=unref($))==null?void 0:Ln.labelId:void 0,"aria-valuenow":ae.value,"aria-valuetext":unref(he)||void 0,"aria-valuemin":"0","aria-valuemax":Rn.max,tabindex:"0",style:normalizeStyle(unref(de)),onKeydown:xn},[(openBlock(!0),createElementBlock(Fragment,null,renderList(Rn.max,(Sn,An)=>(openBlock(),createElementBlock("span",{key:An,class:normalizeClass(unref(L).e("item")),onMousemove:In=>jt(Sn,In),onMouseleave:Vn,onClick:In=>Dt(Sn)},[createVNode(unref(ElIcon),{class:normalizeClass([unref(L).e("icon"),{hover:oe.value===Sn},unref(L).is("active",Sn<=ae.value)])},{default:withCtx(()=>[Pt(Sn)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:0},[withDirectives((openBlock(),createBlock(resolveDynamicComponent(unref(Ue)),null,null,512)),[[vShow,Sn<=ae.value]]),withDirectives((openBlock(),createBlock(resolveDynamicComponent(unref(ze)),null,null,512)),[[vShow,!(Sn<=ae.value)]])],64)),Pt(Sn)?(openBlock(),createBlock(unref(ElIcon),{key:1,style:normalizeStyle(unref($e)),class:normalizeClass([unref(L).e("icon"),unref(L).e("decimal")])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(Ie))))]),_:1},8,["style","class"])):createCommentVNode("v-if",!0)]),_:2},1032,["class"])],42,_hoisted_2$1p))),128)),Rn.showText||Rn.showScore?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(L).e("text"))},toDisplayString$1(unref(he)),3)):createCommentVNode("v-if",!0)],46,_hoisted_1$1y)}}});var Rate=_export_sfc$1(_sfc_main$1W,[["__file","/home/runner/work/element-plus/element-plus/packages/components/rate/src/rate.vue"]]);const ElRate=withInstall(Rate),IconMap={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},IconComponentMap={[IconMap.success]:circle_check_filled_default,[IconMap.warning]:warning_filled_default,[IconMap.error]:circle_close_filled_default,[IconMap.info]:info_filled_default},resultProps=buildProps({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["success","warning","info","error"],default:"info"}}),__default__$u=defineComponent({name:"ElResult"}),_sfc_main$1V=defineComponent({...__default__$u,props:resultProps,setup(e){const n=e,r=useNamespace("result"),g=computed(()=>{const y=n.icon,k=y&&IconMap[y]?IconMap[y]:"icon-info",$=IconComponentMap[k]||IconComponentMap["icon-info"];return{class:k,component:$}});return(y,k)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(r).b())},[createBaseVNode("div",{class:normalizeClass(unref(r).e("icon"))},[renderSlot(y.$slots,"icon",{},()=>[unref(g).component?(openBlock(),createBlock(resolveDynamicComponent(unref(g).component),{key:0,class:normalizeClass(unref(g).class)},null,8,["class"])):createCommentVNode("v-if",!0)])],2),y.title||y.$slots.title?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(r).e("title"))},[renderSlot(y.$slots,"title",{},()=>[createBaseVNode("p",null,toDisplayString$1(y.title),1)])],2)):createCommentVNode("v-if",!0),y.subTitle||y.$slots["sub-title"]?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(r).e("subtitle"))},[renderSlot(y.$slots,"sub-title",{},()=>[createBaseVNode("p",null,toDisplayString$1(y.subTitle),1)])],2)):createCommentVNode("v-if",!0),y.$slots.extra?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(unref(r).e("extra"))},[renderSlot(y.$slots,"extra")],2)):createCommentVNode("v-if",!0)],2))}});var Result=_export_sfc$1(_sfc_main$1V,[["__file","/home/runner/work/element-plus/element-plus/packages/components/result/src/result.vue"]]);const ElResult=withInstall(Result);var safeIsNaN=Number.isNaN||function(n){return typeof n=="number"&&n!==n};function isEqual(e,n){return!!(e===n||safeIsNaN(e)&&safeIsNaN(n))}function areInputsEqual(e,n){if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(!isEqual(e[r],n[r]))return!1;return!0}function memoizeOne(e,n){n===void 0&&(n=areInputsEqual);var r=null;function g(){for(var y=[],k=0;k<arguments.length;k++)y[k]=arguments[k];if(r&&r.lastThis===this&&n(y,r.lastArgs))return r.lastResult;var $=e.apply(this,y);return r={lastResult:$,lastArgs:y,lastThis:this},$}return g.clear=function(){r=null},g}const useCache=()=>{const n=getCurrentInstance().proxy.$props;return computed(()=>{const r=(g,y,k)=>({});return n.perfMode?memoize(r):memoizeOne(r)})},DEFAULT_DYNAMIC_LIST_ITEM_SIZE=50,ITEM_RENDER_EVT="itemRendered",SCROLL_EVT="scroll",FORWARD="forward",BACKWARD="backward",AUTO_ALIGNMENT="auto",SMART_ALIGNMENT="smart",START_ALIGNMENT="start",CENTERED_ALIGNMENT="center",END_ALIGNMENT="end",HORIZONTAL="horizontal",VERTICAL="vertical",LTR$1="ltr",RTL$1="rtl",RTL_OFFSET_NAG="negative",RTL_OFFSET_POS_ASC="positive-ascending",RTL_OFFSET_POS_DESC="positive-descending",ScrollbarDirKey={[HORIZONTAL]:"left",[VERTICAL]:"top"},SCROLLBAR_MIN_SIZE=20,LayoutKeys={[HORIZONTAL]:"deltaX",[VERTICAL]:"deltaY"},useWheel=({atEndEdge:e,atStartEdge:n,layout:r},g)=>{let y,k=0;const $=L=>L<0&&n.value||L>0&&e.value;return{hasReachedEdge:$,onWheel:L=>{cAF(y);const z=L[LayoutKeys[r.value]];$(k)&&$(k+z)||(k+=z,isFirefox()||L.preventDefault(),y=rAF(()=>{g(k),k=0}))}}},itemSize$1=buildProp({type:definePropType([Number,Function]),required:!0}),estimatedItemSize=buildProp({type:Number}),cache$2=buildProp({type:Number,default:2}),direction=buildProp({type:String,values:["ltr","rtl"],default:"ltr"}),initScrollOffset=buildProp({type:Number,default:0}),total=buildProp({type:Number,required:!0}),layout=buildProp({type:String,values:["horizontal","vertical"],default:VERTICAL}),virtualizedProps=buildProps({className:{type:String,default:""},containerElement:{type:definePropType([String,Object]),default:"div"},data:{type:definePropType(Array),default:()=>mutable([])},direction,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:definePropType([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),virtualizedListProps=buildProps({cache:cache$2,estimatedItemSize,layout,initScrollOffset,total,itemSize:itemSize$1,...virtualizedProps}),scrollbarSize={type:Number,default:6},startGap={type:Number,default:0},endGap={type:Number,default:2},virtualizedGridProps=buildProps({columnCache:cache$2,columnWidth:itemSize$1,estimatedColumnWidth:estimatedItemSize,estimatedRowHeight:estimatedItemSize,initScrollLeft:initScrollOffset,initScrollTop:initScrollOffset,itemKey:{type:definePropType(Function),default:({columnIndex:e,rowIndex:n})=>`${n}:${e}`},rowCache:cache$2,rowHeight:itemSize$1,totalColumn:total,totalRow:total,hScrollbarSize:scrollbarSize,vScrollbarSize:scrollbarSize,scrollbarStartGap:startGap,scrollbarEndGap:endGap,role:String,...virtualizedProps}),virtualizedScrollbarProps=buildProps({alwaysOn:Boolean,class:String,layout,total,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize,startGap,endGap,visible:Boolean}),getScrollDir=(e,n)=>e<n?FORWARD:BACKWARD,isHorizontal=e=>e===LTR$1||e===RTL$1||e===HORIZONTAL,isRTL=e=>e===RTL$1;let cachedRTLResult=null;function getRTLOffsetType(e=!1){if(cachedRTLResult===null||e){const n=document.createElement("div"),r=n.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";const g=document.createElement("div"),y=g.style;return y.width="100px",y.height="100px",n.appendChild(g),document.body.appendChild(n),n.scrollLeft>0?cachedRTLResult=RTL_OFFSET_POS_DESC:(n.scrollLeft=1,n.scrollLeft===0?cachedRTLResult=RTL_OFFSET_NAG:cachedRTLResult=RTL_OFFSET_POS_ASC),document.body.removeChild(n),cachedRTLResult}return cachedRTLResult}function renderThumbStyle({move:e,size:n,bar:r},g){const y={},k=`translate${r.axis}(${e}px)`;return y[r.size]=n,y.transform=k,y.msTransform=k,y.webkitTransform=k,g==="horizontal"?y.height="100%":y.width="100%",y}const ScrollBar=defineComponent({name:"ElVirtualScrollBar",props:virtualizedScrollbarProps,emits:["scroll","start-move","stop-move"],setup(e,{emit:n}){const r=computed(()=>e.startGap+e.endGap),g=useNamespace("virtual-scrollbar"),y=useNamespace("scrollbar"),k=ref(),$=ref();let V=null,L=null;const z=reactive({isDragging:!1,traveled:0}),j=computed(()=>BAR_MAP[e.layout]),ae=computed(()=>e.clientSize-unref(r)),oe=computed(()=>({position:"absolute",width:`${HORIZONTAL===e.layout?ae.value:e.scrollbarSize}px`,height:`${HORIZONTAL===e.layout?e.scrollbarSize:ae.value}px`,[ScrollbarDirKey[e.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),re=computed(()=>{const Ce=e.ratio,Ie=e.clientSize;if(Ce>=100)return Number.POSITIVE_INFINITY;if(Ce>=50)return Ce*Ie/100;const ze=Ie/3;return Math.floor(Math.min(Math.max(Ce*Ie,SCROLLBAR_MIN_SIZE),ze))}),ue=computed(()=>{if(!Number.isFinite(re.value))return{display:"none"};const Ce=`${re.value}px`;return renderThumbStyle({bar:j.value,size:Ce,move:z.traveled},e.layout)}),le=computed(()=>Math.floor(e.clientSize-re.value-unref(r))),de=()=>{window.addEventListener("mousemove",Ne),window.addEventListener("mouseup",xe);const Ce=unref($);Ce&&(L=document.onselectstart,document.onselectstart=()=>!1,Ce.addEventListener("touchmove",Ne),Ce.addEventListener("touchend",xe))},he=()=>{window.removeEventListener("mousemove",Ne),window.removeEventListener("mouseup",xe),document.onselectstart=L,L=null;const Ce=unref($);Ce&&(Ce.removeEventListener("touchmove",Ne),Ce.removeEventListener("touchend",xe))},_e=Ce=>{Ce.stopImmediatePropagation(),!(Ce.ctrlKey||[1,2].includes(Ce.button))&&(z.isDragging=!0,z[j.value.axis]=Ce.currentTarget[j.value.offset]-(Ce[j.value.client]-Ce.currentTarget.getBoundingClientRect()[j.value.direction]),n("start-move"),de())},xe=()=>{z.isDragging=!1,z[j.value.axis]=0,n("stop-move"),he()},Ne=Ce=>{const{isDragging:Ie}=z;if(!Ie||!$.value||!k.value)return;const ze=z[j.value.axis];if(!ze)return;cAF(V);const Ue=(k.value.getBoundingClientRect()[j.value.direction]-Ce[j.value.client])*-1,Pt=$.value[j.value.offset]-ze,hn=Ue-Pt;V=rAF(()=>{z.traveled=Math.max(e.startGap,Math.min(hn,le.value)),n("scroll",hn,le.value)})},$e=Ce=>{const Ie=Math.abs(Ce.target.getBoundingClientRect()[j.value.direction]-Ce[j.value.client]),ze=$.value[j.value.offset]/2,Ue=Ie-ze;z.traveled=Math.max(0,Math.min(Ue,le.value)),n("scroll",Ue,le.value)};return watch(()=>e.scrollFrom,Ce=>{z.isDragging||(z.traveled=Math.ceil(Ce*le.value))}),onBeforeUnmount(()=>{he()}),()=>h$1("div",{role:"presentation",ref:k,class:[g.b(),e.class,(e.alwaysOn||z.isDragging)&&"always-on"],style:oe.value,onMousedown:withModifiers($e,["stop","prevent"]),onTouchstartPrevent:_e},h$1("div",{ref:$,class:y.e("thumb"),style:ue.value,onMousedown:_e},[]))}}),createList=({name:e,getOffset:n,getItemSize:r,getItemOffset:g,getEstimatedTotalSize:y,getStartIndexForOffset:k,getStopIndexForStartIndex:$,initCache:V,clearCache:L,validateProps:z})=>defineComponent({name:e??"ElVirtualList",props:virtualizedListProps,emits:[ITEM_RENDER_EVT,SCROLL_EVT],setup(j,{emit:ae,expose:oe}){z(j);const re=getCurrentInstance(),ue=useNamespace("vl"),le=ref(V(j,re)),de=useCache(),he=ref(),_e=ref(),xe=ref(),Ne=ref({isScrolling:!1,scrollDir:"forward",scrollOffset:isNumber$1(j.initScrollOffset)?j.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:j.scrollbarAlwaysOn}),$e=computed(()=>{const{total:ra,cache:da}=j,{isScrolling:ua,scrollDir:aa,scrollOffset:Nn}=unref(Ne);if(ra===0)return[0,0,0,0];const En=k(j,Nn,unref(le)),Zn=$(j,En,Nn,unref(le)),ha=!ua||aa===BACKWARD?Math.max(1,da):1,xa=!ua||aa===FORWARD?Math.max(1,da):1;return[Math.max(0,En-ha),Math.max(0,Math.min(ra-1,Zn+xa)),En,Zn]}),Ce=computed(()=>y(j,unref(le))),Ie=computed(()=>isHorizontal(j.layout)),ze=computed(()=>[{position:"relative",[`overflow-${Ie.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:j.direction,height:isNumber$1(j.height)?`${j.height}px`:j.height,width:isNumber$1(j.width)?`${j.width}px`:j.width},j.style]),Ue=computed(()=>{const ra=unref(Ce),da=unref(Ie);return{height:da?"100%":`${ra}px`,pointerEvents:unref(Ne).isScrolling?"none":void 0,width:da?`${ra}px`:"100%"}}),Pt=computed(()=>Ie.value?j.width:j.height),{onWheel:hn}=useWheel({atStartEdge:computed(()=>Ne.value.scrollOffset<=0),atEndEdge:computed(()=>Ne.value.scrollOffset>=Ce.value),layout:computed(()=>j.layout)},ra=>{var da,ua;(ua=(da=xe.value).onMouseUp)==null||ua.call(da),Tn(Math.min(Ne.value.scrollOffset+ra,Ce.value-Pt.value))}),Dt=()=>{const{total:ra}=j;if(ra>0){const[Nn,En,Zn,ha]=unref($e);ae(ITEM_RENDER_EVT,Nn,En,Zn,ha)}const{scrollDir:da,scrollOffset:ua,updateRequested:aa}=unref(Ne);ae(SCROLL_EVT,da,ua,aa)},xn=ra=>{const{clientHeight:da,scrollHeight:ua,scrollTop:aa}=ra.currentTarget,Nn=unref(Ne);if(Nn.scrollOffset===aa)return;const En=Math.max(0,Math.min(aa,ua-da));Ne.value={...Nn,isScrolling:!0,scrollDir:getScrollDir(Nn.scrollOffset,En),scrollOffset:En,updateRequested:!1},nextTick(An)},jt=ra=>{const{clientWidth:da,scrollLeft:ua,scrollWidth:aa}=ra.currentTarget,Nn=unref(Ne);if(Nn.scrollOffset===ua)return;const{direction:En}=j;let Zn=ua;if(En===RTL$1)switch(getRTLOffsetType()){case RTL_OFFSET_NAG:{Zn=-ua;break}case RTL_OFFSET_POS_DESC:{Zn=aa-da-ua;break}}Zn=Math.max(0,Math.min(Zn,aa-da)),Ne.value={...Nn,isScrolling:!0,scrollDir:getScrollDir(Nn.scrollOffset,Zn),scrollOffset:Zn,updateRequested:!1},nextTick(An)},Vn=ra=>{unref(Ie)?jt(ra):xn(ra),Dt()},Rn=(ra,da)=>{const ua=(Ce.value-Pt.value)/da*ra;Tn(Math.min(Ce.value-Pt.value,ua))},Tn=ra=>{ra=Math.max(ra,0),ra!==unref(Ne).scrollOffset&&(Ne.value={...unref(Ne),scrollOffset:ra,scrollDir:getScrollDir(unref(Ne).scrollOffset,ra),updateRequested:!0},nextTick(An))},Ln=(ra,da=AUTO_ALIGNMENT)=>{const{scrollOffset:ua}=unref(Ne);ra=Math.max(0,Math.min(ra,j.total-1)),Tn(n(j,ra,da,ua,unref(le)))},Sn=ra=>{const{direction:da,itemSize:ua,layout:aa}=j,Nn=de.value(L&&ua,L&&aa,L&&da);let En;if(hasOwn$1(Nn,String(ra)))En=Nn[ra];else{const Zn=g(j,ra,unref(le)),ha=r(j,ra,unref(le)),xa=unref(Ie),sa=da===RTL$1,Hn=xa?Zn:0;Nn[ra]=En={position:"absolute",left:sa?void 0:`${Hn}px`,right:sa?`${Hn}px`:void 0,top:xa?0:`${Zn}px`,height:xa?"100%":`${ha}px`,width:xa?`${ha}px`:"100%"}}return En},An=()=>{Ne.value.isScrolling=!1,nextTick(()=>{de.value(-1,null,null)})},In=()=>{const ra=he.value;ra&&(ra.scrollTop=0)};onMounted(()=>{if(!isClient)return;const{initScrollOffset:ra}=j,da=unref(he);isNumber$1(ra)&&da&&(unref(Ie)?da.scrollLeft=ra:da.scrollTop=ra),Dt()}),onUpdated(()=>{const{direction:ra,layout:da}=j,{scrollOffset:ua,updateRequested:aa}=unref(Ne),Nn=unref(he);if(aa&&Nn)if(da===HORIZONTAL)if(ra===RTL$1)switch(getRTLOffsetType()){case RTL_OFFSET_NAG:{Nn.scrollLeft=-ua;break}case RTL_OFFSET_POS_ASC:{Nn.scrollLeft=ua;break}default:{const{clientWidth:En,scrollWidth:Zn}=Nn;Nn.scrollLeft=Zn-En-ua;break}}else Nn.scrollLeft=ua;else Nn.scrollTop=ua});const Mn={ns:ue,clientSize:Pt,estimatedTotalSize:Ce,windowStyle:ze,windowRef:he,innerRef:_e,innerStyle:Ue,itemsToRender:$e,scrollbarRef:xe,states:Ne,getItemStyle:Sn,onScroll:Vn,onScrollbarScroll:Rn,onWheel:hn,scrollTo:Tn,scrollToItem:Ln,resetScrollTop:In};return oe({windowRef:he,innerRef:_e,getItemStyleCache:de,scrollTo:Tn,scrollToItem:Ln,resetScrollTop:In,states:Ne}),Mn},render(j){var ae;const{$slots:oe,className:re,clientSize:ue,containerElement:le,data:de,getItemStyle:he,innerElement:_e,itemsToRender:xe,innerStyle:Ne,layout:$e,total:Ce,onScroll:Ie,onScrollbarScroll:ze,onWheel:Ue,states:Pt,useIsScrolling:hn,windowStyle:Dt,ns:xn}=j,[jt,Vn]=xe,Rn=resolveDynamicComponent(le),Tn=resolveDynamicComponent(_e),Ln=[];if(Ce>0)for(let Mn=jt;Mn<=Vn;Mn++)Ln.push((ae=oe.default)==null?void 0:ae.call(oe,{data:de,key:Mn,index:Mn,isScrolling:hn?Pt.isScrolling:void 0,style:he(Mn)}));const Sn=[h$1(Tn,{style:Ne,ref:"innerRef"},isString$3(Tn)?Ln:{default:()=>Ln})],An=h$1(ScrollBar,{ref:"scrollbarRef",clientSize:ue,layout:$e,onScroll:ze,ratio:ue*100/this.estimatedTotalSize,scrollFrom:Pt.scrollOffset/(this.estimatedTotalSize-ue),total:Ce}),In=h$1(Rn,{class:[xn.e("window"),re],style:Dt,onScroll:Ie,onWheel:Ue,ref:"windowRef",key:0},isString$3(Rn)?[Sn]:{default:()=>[Sn]});return h$1("div",{key:0,class:[xn.e("wrapper"),Pt.scrollbarAlwaysOn?"always-on":""]},[In,An])}}),FixedSizeList=createList({name:"ElFixedSizeList",getItemOffset:({itemSize:e},n)=>n*e,getItemSize:({itemSize:e})=>e,getEstimatedTotalSize:({total:e,itemSize:n})=>n*e,getOffset:({height:e,total:n,itemSize:r,layout:g,width:y},k,$,V)=>{const L=isHorizontal(g)?y:e,z=Math.max(0,n*r-L),j=Math.min(z,k*r),ae=Math.max(0,(k+1)*r-L);switch($===SMART_ALIGNMENT&&(V>=ae-L&&V<=j+L?$=AUTO_ALIGNMENT:$=CENTERED_ALIGNMENT),$){case START_ALIGNMENT:return j;case END_ALIGNMENT:return ae;case CENTERED_ALIGNMENT:{const oe=Math.round(ae+(j-ae)/2);return oe<Math.ceil(L/2)?0:oe>z+Math.floor(L/2)?z:oe}case AUTO_ALIGNMENT:default:return V>=ae&&V<=j?V:V<ae?ae:j}},getStartIndexForOffset:({total:e,itemSize:n},r)=>Math.max(0,Math.min(e-1,Math.floor(r/n))),getStopIndexForStartIndex:({height:e,total:n,itemSize:r,layout:g,width:y},k,$)=>{const V=k*r,L=isHorizontal(g)?y:e,z=Math.ceil((L+$-V)/r);return Math.max(0,Math.min(n-1,k+z-1))},initCache(){},clearCache:!0,validateProps(){}}),getItemFromCache$1=(e,n,r)=>{const{itemSize:g}=e,{items:y,lastVisitedIndex:k}=r;if(n>k){let $=0;if(k>=0){const V=y[k];$=V.offset+V.size}for(let V=k+1;V<=n;V++){const L=g(V);y[V]={offset:$,size:L},$+=L}r.lastVisitedIndex=n}return y[n]},findItem$1=(e,n,r)=>{const{items:g,lastVisitedIndex:y}=n;return(y>0?g[y].offset:0)>=r?bs$1(e,n,0,y,r):es$1(e,n,Math.max(0,y),r)},bs$1=(e,n,r,g,y)=>{for(;r<=g;){const k=r+Math.floor((g-r)/2),$=getItemFromCache$1(e,k,n).offset;if($===y)return k;$<y?r=k+1:$>y&&(g=k-1)}return Math.max(0,r-1)},es$1=(e,n,r,g)=>{const{total:y}=e;let k=1;for(;r<y&&getItemFromCache$1(e,r,n).offset<g;)r+=k,k*=2;return bs$1(e,n,Math.floor(r/2),Math.min(r,y-1),g)},getEstimatedTotalSize=({total:e},{items:n,estimatedItemSize:r,lastVisitedIndex:g})=>{let y=0;if(g>=e&&(g=e-1),g>=0){const V=n[g];y=V.offset+V.size}const $=(e-g-1)*r;return y+$},DynamicSizeList=createList({name:"ElDynamicSizeList",getItemOffset:(e,n,r)=>getItemFromCache$1(e,n,r).offset,getItemSize:(e,n,{items:r})=>r[n].size,getEstimatedTotalSize,getOffset:(e,n,r,g,y)=>{const{height:k,layout:$,width:V}=e,L=isHorizontal($)?V:k,z=getItemFromCache$1(e,n,y),j=getEstimatedTotalSize(e,y),ae=Math.max(0,Math.min(j-L,z.offset)),oe=Math.max(0,z.offset-L+z.size);switch(r===SMART_ALIGNMENT&&(g>=oe-L&&g<=ae+L?r=AUTO_ALIGNMENT:r=CENTERED_ALIGNMENT),r){case START_ALIGNMENT:return ae;case END_ALIGNMENT:return oe;case CENTERED_ALIGNMENT:return Math.round(oe+(ae-oe)/2);case AUTO_ALIGNMENT:default:return g>=oe&&g<=ae?g:g<oe?oe:ae}},getStartIndexForOffset:(e,n,r)=>findItem$1(e,r,n),getStopIndexForStartIndex:(e,n,r,g)=>{const{height:y,total:k,layout:$,width:V}=e,L=isHorizontal($)?V:y,z=getItemFromCache$1(e,n,g),j=r+L;let ae=z.offset+z.size,oe=n;for(;oe<k-1&&ae<j;)oe++,ae+=getItemFromCache$1(e,oe,g).size;return oe},initCache({estimatedItemSize:e=DEFAULT_DYNAMIC_LIST_ITEM_SIZE},n){const r={items:{},estimatedItemSize:e,lastVisitedIndex:-1};return r.clearCacheAfterIndex=(g,y=!0)=>{var k,$;r.lastVisitedIndex=Math.min(r.lastVisitedIndex,g-1),(k=n.exposed)==null||k.getItemStyleCache(-1),y&&(($=n.proxy)==null||$.$forceUpdate())},r},clearCache:!1,validateProps:({itemSize:e})=>{}}),useGridWheel=({atXEndEdge:e,atXStartEdge:n,atYEndEdge:r,atYStartEdge:g},y)=>{let k=null,$=0,V=0;const L=(j,ae)=>{const oe=j<=0&&n.value||j>=0&&e.value,re=ae<=0&&g.value||ae>=0&&r.value;return oe&&re};return{hasReachedEdge:L,onWheel:j=>{cAF(k);let ae=j.deltaX,oe=j.deltaY;Math.abs(ae)>Math.abs(oe)?oe=0:ae=0,j.shiftKey&&oe!==0&&(ae=oe,oe=0),!(L($,V)&&L($+ae,V+oe))&&($+=ae,V+=oe,j.preventDefault(),k=rAF(()=>{y($,V),$=0,V=0}))}}},createGrid=({name:e,clearCache:n,getColumnPosition:r,getColumnStartIndexForOffset:g,getColumnStopIndexForStartIndex:y,getEstimatedTotalHeight:k,getEstimatedTotalWidth:$,getColumnOffset:V,getRowOffset:L,getRowPosition:z,getRowStartIndexForOffset:j,getRowStopIndexForStartIndex:ae,initCache:oe,injectToInstance:re,validateProps:ue})=>defineComponent({name:e??"ElVirtualList",props:virtualizedGridProps,emits:[ITEM_RENDER_EVT,SCROLL_EVT],setup(le,{emit:de,expose:he,slots:_e}){const xe=useNamespace("vl");ue(le);const Ne=getCurrentInstance(),$e=ref(oe(le,Ne));re?.(Ne,$e);const Ce=ref(),Ie=ref(),ze=ref(),Ue=ref(null),Pt=ref({isScrolling:!1,scrollLeft:isNumber$1(le.initScrollLeft)?le.initScrollLeft:0,scrollTop:isNumber$1(le.initScrollTop)?le.initScrollTop:0,updateRequested:!1,xAxisScrollDir:FORWARD,yAxisScrollDir:FORWARD}),hn=useCache(),Dt=computed(()=>Number.parseInt(`${le.height}`,10)),xn=computed(()=>Number.parseInt(`${le.width}`,10)),jt=computed(()=>{const{totalColumn:kt,totalRow:At,columnCache:Dn}=le,{isScrolling:Qn,xAxisScrollDir:oa,scrollLeft:na}=unref(Pt);if(kt===0||At===0)return[0,0,0,0];const la=g(le,na,unref($e)),ma=y(le,la,na,unref($e)),ca=!Qn||oa===BACKWARD?Math.max(1,Dn):1,pe=!Qn||oa===FORWARD?Math.max(1,Dn):1;return[Math.max(0,la-ca),Math.max(0,Math.min(kt-1,ma+pe)),la,ma]}),Vn=computed(()=>{const{totalColumn:kt,totalRow:At,rowCache:Dn}=le,{isScrolling:Qn,yAxisScrollDir:oa,scrollTop:na}=unref(Pt);if(kt===0||At===0)return[0,0,0,0];const la=j(le,na,unref($e)),ma=ae(le,la,na,unref($e)),ca=!Qn||oa===BACKWARD?Math.max(1,Dn):1,pe=!Qn||oa===FORWARD?Math.max(1,Dn):1;return[Math.max(0,la-ca),Math.max(0,Math.min(At-1,ma+pe)),la,ma]}),Rn=computed(()=>k(le,unref($e))),Tn=computed(()=>$(le,unref($e))),Ln=computed(()=>{var kt;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:le.direction,height:isNumber$1(le.height)?`${le.height}px`:le.height,width:isNumber$1(le.width)?`${le.width}px`:le.width},(kt=le.style)!=null?kt:{}]}),Sn=computed(()=>{const kt=`${unref(Tn)}px`;return{height:`${unref(Rn)}px`,pointerEvents:unref(Pt).isScrolling?"none":void 0,width:kt}}),An=()=>{const{totalColumn:kt,totalRow:At}=le;if(kt>0&&At>0){const[ma,ca,pe,Oe]=unref(jt),[Ve,qe,Et,Lt]=unref(Vn);de(ITEM_RENDER_EVT,{columnCacheStart:ma,columnCacheEnd:ca,rowCacheStart:Ve,rowCacheEnd:qe,columnVisibleStart:pe,columnVisibleEnd:Oe,rowVisibleStart:Et,rowVisibleEnd:Lt})}const{scrollLeft:Dn,scrollTop:Qn,updateRequested:oa,xAxisScrollDir:na,yAxisScrollDir:la}=unref(Pt);de(SCROLL_EVT,{xAxisScrollDir:na,scrollLeft:Dn,yAxisScrollDir:la,scrollTop:Qn,updateRequested:oa})},In=kt=>{const{clientHeight:At,clientWidth:Dn,scrollHeight:Qn,scrollLeft:oa,scrollTop:na,scrollWidth:la}=kt.currentTarget,ma=unref(Pt);if(ma.scrollTop===na&&ma.scrollLeft===oa)return;let ca=oa;if(isRTL(le.direction))switch(getRTLOffsetType()){case RTL_OFFSET_NAG:ca=-oa;break;case RTL_OFFSET_POS_DESC:ca=la-Dn-oa;break}Pt.value={...ma,isScrolling:!0,scrollLeft:ca,scrollTop:Math.max(0,Math.min(na,Qn-At)),updateRequested:!0,xAxisScrollDir:getScrollDir(ma.scrollLeft,ca),yAxisScrollDir:getScrollDir(ma.scrollTop,na)},nextTick(()=>En()),Zn(),An()},Mn=(kt,At)=>{const Dn=unref(Dt),Qn=(Rn.value-Dn)/At*kt;ua({scrollTop:Math.min(Rn.value-Dn,Qn)})},ra=(kt,At)=>{const Dn=unref(xn),Qn=(Tn.value-Dn)/At*kt;ua({scrollLeft:Math.min(Tn.value-Dn,Qn)})},{onWheel:da}=useGridWheel({atXStartEdge:computed(()=>Pt.value.scrollLeft<=0),atXEndEdge:computed(()=>Pt.value.scrollLeft>=Tn.value-unref(xn)),atYStartEdge:computed(()=>Pt.value.scrollTop<=0),atYEndEdge:computed(()=>Pt.value.scrollTop>=Rn.value-unref(Dt))},(kt,At)=>{var Dn,Qn,oa,na;(Qn=(Dn=Ie.value)==null?void 0:Dn.onMouseUp)==null||Qn.call(Dn),(na=(oa=ze.value)==null?void 0:oa.onMouseUp)==null||na.call(oa);const la=unref(xn),ma=unref(Dt);ua({scrollLeft:Math.min(Pt.value.scrollLeft+kt,Tn.value-la),scrollTop:Math.min(Pt.value.scrollTop+At,Rn.value-ma)})}),ua=({scrollLeft:kt=Pt.value.scrollLeft,scrollTop:At=Pt.value.scrollTop})=>{kt=Math.max(kt,0),At=Math.max(At,0);const Dn=unref(Pt);At===Dn.scrollTop&&kt===Dn.scrollLeft||(Pt.value={...Dn,xAxisScrollDir:getScrollDir(Dn.scrollLeft,kt),yAxisScrollDir:getScrollDir(Dn.scrollTop,At),scrollLeft:kt,scrollTop:At,updateRequested:!0},nextTick(()=>En()),Zn(),An())},aa=(kt=0,At=0,Dn=AUTO_ALIGNMENT)=>{const Qn=unref(Pt);At=Math.max(0,Math.min(At,le.totalColumn-1)),kt=Math.max(0,Math.min(kt,le.totalRow-1));const oa=getScrollBarWidth(xe.namespace.value),na=unref($e),la=k(le,na),ma=$(le,na);ua({scrollLeft:V(le,At,Dn,Qn.scrollLeft,na,ma>le.width?oa:0),scrollTop:L(le,kt,Dn,Qn.scrollTop,na,la>le.height?oa:0)})},Nn=(kt,At)=>{const{columnWidth:Dn,direction:Qn,rowHeight:oa}=le,na=hn.value(n&&Dn,n&&oa,n&&Qn),la=`${kt},${At}`;if(hasOwn$1(na,la))return na[la];{const[,ma]=r(le,At,unref($e)),ca=unref($e),pe=isRTL(Qn),[Oe,Ve]=z(le,kt,ca),[qe]=r(le,At,ca);return na[la]={position:"absolute",left:pe?void 0:`${ma}px`,right:pe?`${ma}px`:void 0,top:`${Ve}px`,height:`${Oe}px`,width:`${qe}px`},na[la]}},En=()=>{Pt.value.isScrolling=!1,nextTick(()=>{hn.value(-1,null,null)})};onMounted(()=>{if(!isClient)return;const{initScrollLeft:kt,initScrollTop:At}=le,Dn=unref(Ce);Dn&&(isNumber$1(kt)&&(Dn.scrollLeft=kt),isNumber$1(At)&&(Dn.scrollTop=At)),An()});const Zn=()=>{const{direction:kt}=le,{scrollLeft:At,scrollTop:Dn,updateRequested:Qn}=unref(Pt),oa=unref(Ce);if(Qn&&oa){if(kt===RTL$1)switch(getRTLOffsetType()){case RTL_OFFSET_NAG:{oa.scrollLeft=-At;break}case RTL_OFFSET_POS_ASC:{oa.scrollLeft=At;break}default:{const{clientWidth:na,scrollWidth:la}=oa;oa.scrollLeft=la-na-At;break}}else oa.scrollLeft=Math.max(0,At);oa.scrollTop=Math.max(0,Dn)}},{resetAfterColumnIndex:ha,resetAfterRowIndex:xa,resetAfter:sa}=Ne.proxy;he({windowRef:Ce,innerRef:Ue,getItemStyleCache:hn,scrollTo:ua,scrollToItem:aa,states:Pt,resetAfterColumnIndex:ha,resetAfterRowIndex:xa,resetAfter:sa});const Hn=()=>{const{scrollbarAlwaysOn:kt,scrollbarStartGap:At,scrollbarEndGap:Dn,totalColumn:Qn,totalRow:oa}=le,na=unref(xn),la=unref(Dt),ma=unref(Tn),ca=unref(Rn),{scrollLeft:pe,scrollTop:Oe}=unref(Pt),Ve=h$1(ScrollBar,{ref:Ie,alwaysOn:kt,startGap:At,endGap:Dn,class:xe.e("horizontal"),clientSize:na,layout:"horizontal",onScroll:ra,ratio:na*100/ma,scrollFrom:pe/(ma-na),total:oa,visible:!0}),qe=h$1(ScrollBar,{ref:ze,alwaysOn:kt,startGap:At,endGap:Dn,class:xe.e("vertical"),clientSize:la,layout:"vertical",onScroll:Mn,ratio:la*100/ca,scrollFrom:Oe/(ca-la),total:Qn,visible:!0});return{horizontalScrollbar:Ve,verticalScrollbar:qe}},bn=()=>{var kt;const[At,Dn]=unref(jt),[Qn,oa]=unref(Vn),{data:na,totalColumn:la,totalRow:ma,useIsScrolling:ca,itemKey:pe}=le,Oe=[];if(ma>0&&la>0)for(let Ve=Qn;Ve<=oa;Ve++)for(let qe=At;qe<=Dn;qe++)Oe.push((kt=_e.default)==null?void 0:kt.call(_e,{columnIndex:qe,data:na,key:pe({columnIndex:qe,data:na,rowIndex:Ve}),isScrolling:ca?unref(Pt).isScrolling:void 0,style:Nn(Ve,qe),rowIndex:Ve}));return Oe},Xn=()=>{const kt=resolveDynamicComponent(le.innerElement),At=bn();return[h$1(kt,{style:unref(Sn),ref:Ue},isString$3(kt)?At:{default:()=>At})]};return()=>{const kt=resolveDynamicComponent(le.containerElement),{horizontalScrollbar:At,verticalScrollbar:Dn}=Hn(),Qn=Xn();return h$1("div",{key:0,class:xe.e("wrapper"),role:le.role},[h$1(kt,{class:le.className,style:unref(Ln),onScroll:In,onWheel:da,ref:Ce},isString$3(kt)?Qn:{default:()=>Qn}),At,Dn])}}}),FixedSizeGrid=createGrid({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:e},n)=>[e,n*e],getRowPosition:({rowHeight:e},n)=>[e,n*e],getEstimatedTotalHeight:({totalRow:e,rowHeight:n})=>n*e,getEstimatedTotalWidth:({totalColumn:e,columnWidth:n})=>n*e,getColumnOffset:({totalColumn:e,columnWidth:n,width:r},g,y,k,$,V)=>{r=Number(r);const L=Math.max(0,e*n-r),z=Math.min(L,g*n),j=Math.max(0,g*n-r+V+n);switch(y==="smart"&&(k>=j-r&&k<=z+r?y=AUTO_ALIGNMENT:y=CENTERED_ALIGNMENT),y){case START_ALIGNMENT:return z;case END_ALIGNMENT:return j;case CENTERED_ALIGNMENT:{const ae=Math.round(j+(z-j)/2);return ae<Math.ceil(r/2)?0:ae>L+Math.floor(r/2)?L:ae}case AUTO_ALIGNMENT:default:return k>=j&&k<=z?k:j>z||k<j?j:z}},getRowOffset:({rowHeight:e,height:n,totalRow:r},g,y,k,$,V)=>{n=Number(n);const L=Math.max(0,r*e-n),z=Math.min(L,g*e),j=Math.max(0,g*e-n+V+e);switch(y===SMART_ALIGNMENT&&(k>=j-n&&k<=z+n?y=AUTO_ALIGNMENT:y=CENTERED_ALIGNMENT),y){case START_ALIGNMENT:return z;case END_ALIGNMENT:return j;case CENTERED_ALIGNMENT:{const ae=Math.round(j+(z-j)/2);return ae<Math.ceil(n/2)?0:ae>L+Math.floor(n/2)?L:ae}case AUTO_ALIGNMENT:default:return k>=j&&k<=z?k:j>z||k<j?j:z}},getColumnStartIndexForOffset:({columnWidth:e,totalColumn:n},r)=>Math.max(0,Math.min(n-1,Math.floor(r/e))),getColumnStopIndexForStartIndex:({columnWidth:e,totalColumn:n,width:r},g,y)=>{const k=g*e,$=Math.ceil((r+y-k)/e);return Math.max(0,Math.min(n-1,g+$-1))},getRowStartIndexForOffset:({rowHeight:e,totalRow:n},r)=>Math.max(0,Math.min(n-1,Math.floor(r/e))),getRowStopIndexForStartIndex:({rowHeight:e,totalRow:n,height:r},g,y)=>{const k=g*e,$=Math.ceil((r+y-k)/e);return Math.max(0,Math.min(n-1,g+$-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:e,rowHeight:n})=>{}}),{max,min,floor}=Math,ACCESS_SIZER_KEY_MAP={column:"columnWidth",row:"rowHeight"},ACCESS_LAST_VISITED_KEY_MAP={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},getItemFromCache=(e,n,r,g)=>{const[y,k,$]=[r[g],e[ACCESS_SIZER_KEY_MAP[g]],r[ACCESS_LAST_VISITED_KEY_MAP[g]]];if(n>$){let V=0;if($>=0){const L=y[$];V=L.offset+L.size}for(let L=$+1;L<=n;L++){const z=k(L);y[L]={offset:V,size:z},V+=z}r[ACCESS_LAST_VISITED_KEY_MAP[g]]=n}return y[n]},bs=(e,n,r,g,y,k)=>{for(;r<=g;){const $=r+floor((g-r)/2),V=getItemFromCache(e,$,n,k).offset;if(V===y)return $;V<y?r=$+1:g=$-1}return max(0,r-1)},es=(e,n,r,g,y)=>{const k=y==="column"?e.totalColumn:e.totalRow;let $=1;for(;r<k&&getItemFromCache(e,r,n,y).offset<g;)r+=$,$*=2;return bs(e,n,floor(r/2),min(r,k-1),g,y)},findItem=(e,n,r,g)=>{const[y,k]=[n[g],n[ACCESS_LAST_VISITED_KEY_MAP[g]]];return(k>0?y[k].offset:0)>=r?bs(e,n,0,k,r,g):es(e,n,max(0,k),r,g)},getEstimatedTotalHeight=({totalRow:e},{estimatedRowHeight:n,lastVisitedRowIndex:r,row:g})=>{let y=0;if(r>=e&&(r=e-1),r>=0){const V=g[r];y=V.offset+V.size}const $=(e-r-1)*n;return y+$},getEstimatedTotalWidth=({totalColumn:e},{column:n,estimatedColumnWidth:r,lastVisitedColumnIndex:g})=>{let y=0;if(g>e&&(g=e-1),g>=0){const V=n[g];y=V.offset+V.size}const $=(e-g-1)*r;return y+$},ACCESS_ESTIMATED_SIZE_KEY_MAP={column:getEstimatedTotalWidth,row:getEstimatedTotalHeight},getOffset$2=(e,n,r,g,y,k,$)=>{const[V,L]=[k==="row"?e.height:e.width,ACCESS_ESTIMATED_SIZE_KEY_MAP[k]],z=getItemFromCache(e,n,y,k),j=L(e,y),ae=max(0,min(j-V,z.offset)),oe=max(0,z.offset-V+$+z.size);switch(r===SMART_ALIGNMENT&&(g>=oe-V&&g<=ae+V?r=AUTO_ALIGNMENT:r=CENTERED_ALIGNMENT),r){case START_ALIGNMENT:return ae;case END_ALIGNMENT:return oe;case CENTERED_ALIGNMENT:return Math.round(oe+(ae-oe)/2);case AUTO_ALIGNMENT:default:return g>=oe&&g<=ae?g:oe>ae||g<oe?oe:ae}},DynamicSizeGrid=createGrid({name:"ElDynamicSizeGrid",getColumnPosition:(e,n,r)=>{const g=getItemFromCache(e,n,r,"column");return[g.size,g.offset]},getRowPosition:(e,n,r)=>{const g=getItemFromCache(e,n,r,"row");return[g.size,g.offset]},getColumnOffset:(e,n,r,g,y,k)=>getOffset$2(e,n,r,g,y,"column",k),getRowOffset:(e,n,r,g,y,k)=>getOffset$2(e,n,r,g,y,"row",k),getColumnStartIndexForOffset:(e,n,r)=>findItem(e,r,n,"column"),getColumnStopIndexForStartIndex:(e,n,r,g)=>{const y=getItemFromCache(e,n,g,"column"),k=r+e.width;let $=y.offset+y.size,V=n;for(;V<e.totalColumn-1&&$<k;)V++,$+=getItemFromCache(e,n,g,"column").size;return V},getEstimatedTotalHeight,getEstimatedTotalWidth,getRowStartIndexForOffset:(e,n,r)=>findItem(e,r,n,"row"),getRowStopIndexForStartIndex:(e,n,r,g)=>{const{totalRow:y,height:k}=e,$=getItemFromCache(e,n,g,"row"),V=r+k;let L=$.size+$.offset,z=n;for(;z<y-1&&L<V;)z++,L+=getItemFromCache(e,z,g,"row").size;return z},injectToInstance:(e,n)=>{const r=({columnIndex:k,rowIndex:$},V)=>{var L,z;V=isUndefined(V)?!0:V,isNumber$1(k)&&(n.value.lastVisitedColumnIndex=Math.min(n.value.lastVisitedColumnIndex,k-1)),isNumber$1($)&&(n.value.lastVisitedRowIndex=Math.min(n.value.lastVisitedRowIndex,$-1)),(L=e.exposed)==null||L.getItemStyleCache.value(-1,null,null),V&&((z=e.proxy)==null||z.$forceUpdate())},g=(k,$)=>{r({columnIndex:k},$)},y=(k,$)=>{r({rowIndex:k},$)};Object.assign(e.proxy,{resetAfterColumnIndex:g,resetAfterRowIndex:y,resetAfter:r})},initCache:({estimatedColumnWidth:e=DEFAULT_DYNAMIC_LIST_ITEM_SIZE,estimatedRowHeight:n=DEFAULT_DYNAMIC_LIST_ITEM_SIZE})=>({column:{},estimatedColumnWidth:e,estimatedRowHeight:n,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:e,rowHeight:n})=>{}}),_sfc_main$1U=defineComponent({props:{item:{type:Object,required:!0},style:Object,height:Number},setup(){return{ns:useNamespace("select")}}});function _sfc_render$7(e,n,r,g,y,k){return e.item.isTitle?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(e.ns.be("group","title")),style:normalizeStyle([e.style,{lineHeight:`${e.height}px`}])},toDisplayString$1(e.item.label),7)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(e.ns.be("group","split")),style:normalizeStyle(e.style)},[createBaseVNode("span",{class:normalizeClass(e.ns.be("group","split-dash")),style:normalizeStyle({top:`${e.height/2}px`})},null,6)],6))}var GroupItem=_export_sfc$1(_sfc_main$1U,[["render",_sfc_render$7],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/group-item.vue"]]);function useOption(e,{emit:n}){return{hoverItem:()=>{e.disabled||n("hover",e.index)},selectOptionClick:()=>{e.disabled||n("select",e.item,e.index)}}}const SelectProps={allowCreate:Boolean,autocomplete:{type:String,default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:[String,Object],default:circle_close_default},effect:{type:String,default:"light"},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:170},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,label:String,modelValue:[Array,String,Number,Boolean,Object],multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:Array,required:!0},placeholder:{type:String},teleported:useTooltipContentProps.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,size:{type:String,validator:isValidComponentSize},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:{type:Boolean,default:!1},validateEvent:{type:Boolean,default:!0},placement:{type:definePropType(String),values:Ee,default:"bottom-start"}},OptionProps={data:Array,disabled:Boolean,hovering:Boolean,item:Object,index:Number,style:Object,selected:Boolean,created:Boolean},_sfc_main$1T=defineComponent({props:OptionProps,emits:["select","hover"],setup(e,{emit:n}){const r=useNamespace("select"),{hoverItem:g,selectOptionClick:y}=useOption(e,{emit:n});return{ns:r,hoverItem:g,selectOptionClick:y}}}),_hoisted_1$1x=["aria-selected"];function _sfc_render$6(e,n,r,g,y,k){return openBlock(),createElementBlock("li",{"aria-selected":e.selected,style:normalizeStyle(e.style),class:normalizeClass([e.ns.be("dropdown","option-item"),e.ns.is("selected",e.selected),e.ns.is("disabled",e.disabled),e.ns.is("created",e.created),{hover:e.hovering}]),onMouseenter:n[0]||(n[0]=(...$)=>e.hoverItem&&e.hoverItem(...$)),onClick:n[1]||(n[1]=withModifiers((...$)=>e.selectOptionClick&&e.selectOptionClick(...$),["stop"]))},[renderSlot(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},()=>[createBaseVNode("span",null,toDisplayString$1(e.item.label),1)])],46,_hoisted_1$1x)}var OptionItem=_export_sfc$1(_sfc_main$1T,[["render",_sfc_render$6],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/option-item.vue"]]);const selectV2InjectionKey=Symbol("ElSelectV2Injection");var ElSelectMenu=defineComponent({name:"ElSelectDropdown",props:{data:{type:Array,required:!0},hoveringIndex:Number,width:Number},setup(e,{slots:n,expose:r}){const g=inject(selectV2InjectionKey),y=useNamespace("select"),k=ref([]),$=ref(),V=computed(()=>e.data.length);watch(()=>V.value,()=>{var ze,Ue;(Ue=(ze=g.popper.value).updatePopper)==null||Ue.call(ze)});const L=computed(()=>isUndefined(g.props.estimatedOptionHeight)),z=computed(()=>L.value?{itemSize:g.props.itemHeight}:{estimatedSize:g.props.estimatedOptionHeight,itemSize:ze=>k.value[ze]}),j=(ze=[],Ue)=>{const{props:{valueKey:Pt}}=g;return isObject$3(Ue)?ze&&ze.some(hn=>get(hn,Pt)===get(Ue,Pt)):ze.includes(Ue)},ae=(ze,Ue)=>{if(isObject$3(Ue)){const{valueKey:Pt}=g.props;return get(ze,Pt)===get(Ue,Pt)}else return ze===Ue},oe=(ze,Ue)=>{const{valueKey:Pt}=g.props;return g.props.multiple?j(ze,get(Ue,Pt)):ae(ze,get(Ue,Pt))},re=(ze,Ue)=>{const{disabled:Pt,multiple:hn,multipleLimit:Dt}=g.props;return Pt||!Ue&&(hn?Dt>0&&ze.length>=Dt:!1)},ue=ze=>e.hoveringIndex===ze;r({listRef:$,isSized:L,isItemDisabled:re,isItemHovering:ue,isItemSelected:oe,scrollToItem:ze=>{const Ue=$.value;Ue&&Ue.scrollToItem(ze)},resetScrollTop:()=>{const ze=$.value;ze&&ze.resetScrollTop()}});const he=ze=>{const{index:Ue,data:Pt,style:hn}=ze,Dt=unref(L),{itemSize:xn,estimatedSize:jt}=unref(z),{modelValue:Vn}=g.props,{onSelect:Rn,onHover:Tn}=g,Ln=Pt[Ue];if(Ln.type==="Group")return createVNode(GroupItem,{item:Ln,style:hn,height:Dt?xn:jt},null);const Sn=oe(Vn,Ln),An=re(Vn,Sn),In=ue(Ue);return createVNode(OptionItem,mergeProps(ze,{selected:Sn,disabled:Ln.disabled||An,created:!!Ln.created,hovering:In,item:Ln,onSelect:Rn,onHover:Tn}),{default:Mn=>{var ra;return((ra=n.default)==null?void 0:ra.call(n,Mn))||createVNode("span",null,[Ln.label])}})},{onKeyboardNavigate:_e,onKeyboardSelect:xe}=g,Ne=()=>{_e("forward")},$e=()=>{_e("backward")},Ce=()=>{g.expanded=!1},Ie=ze=>{const{code:Ue}=ze,{tab:Pt,esc:hn,down:Dt,up:xn,enter:jt}=EVENT_CODE;switch(Ue!==Pt&&(ze.preventDefault(),ze.stopPropagation()),Ue){case Pt:case hn:{Ce();break}case Dt:{Ne();break}case xn:{$e();break}case jt:{xe();break}}};return()=>{var ze;const{data:Ue,width:Pt}=e,{height:hn,multiple:Dt,scrollbarAlwaysOn:xn}=g.props;if(Ue.length===0)return createVNode("div",{class:y.b("dropdown"),style:{width:`${Pt}px`}},[(ze=n.empty)==null?void 0:ze.call(n)]);const jt=unref(L)?FixedSizeList:DynamicSizeList;return createVNode("div",{class:[y.b("dropdown"),y.is("multiple",Dt)]},[createVNode(jt,mergeProps({ref:$},unref(z),{className:y.be("dropdown","list"),scrollbarAlwaysOn:xn,data:Ue,height:hn,width:Pt,total:Ue.length,onKeydown:Ie}),{default:Vn=>createVNode(he,Vn,null)})])}}});function useAllowCreate(e,n){const r=ref(0),g=ref(null),y=computed(()=>e.allowCreate&&e.filterable);function k(j){const ae=oe=>oe.value===j;return e.options&&e.options.some(ae)||n.createdOptions.some(ae)}function $(j){y.value&&(e.multiple&&j.created?r.value++:g.value=j)}function V(j){if(y.value)if(j&&j.length>0&&!k(j)){const ae={value:j,label:j,created:!0,disabled:!1};n.createdOptions.length>=r.value?n.createdOptions[r.value]=ae:n.createdOptions.push(ae)}else if(e.multiple)n.createdOptions.length=r.value;else{const ae=g.value;n.createdOptions.length=0,ae&&ae.created&&n.createdOptions.push(ae)}}function L(j){if(!y.value||!j||!j.created||j.created&&e.reserveKeyword&&n.inputValue===j.label)return;const ae=n.createdOptions.findIndex(oe=>oe.value===j.value);~ae&&(n.createdOptions.splice(ae,1),r.value--)}function z(){y.value&&(n.createdOptions.length=0,r.value=0)}return{createNewOption:V,removeNewOption:L,selectNewOption:$,clearAllNewOption:z}}const flattenOptions=e=>{const n=[];return e.forEach(r=>{isArray$3(r.options)?(n.push({label:r.label,isTitle:!0,type:"Group"}),r.options.forEach(g=>{n.push(g)}),n.push({type:"Group"})):n.push(r)}),n};function useInput(e){const n=ref(!1);return{handleCompositionStart:()=>{n.value=!0},handleCompositionUpdate:k=>{const $=k.target.value,V=$[$.length-1]||"";n.value=!isKorean(V)},handleCompositionEnd:k=>{n.value&&(n.value=!1,isFunction$3(e)&&e(k))}}}const DEFAULT_INPUT_PLACEHOLDER="",MINIMUM_INPUT_WIDTH=11,TAG_BASE_WIDTH={larget:51,default:42,small:33},useSelect$1=(e,n)=>{const{t:r}=useLocale(),g=useNamespace("select-v2"),y=useNamespace("input"),{form:k,formItem:$}=useFormItem(),V=reactive({inputValue:DEFAULT_INPUT_PLACEHOLDER,displayInputValue:DEFAULT_INPUT_PLACEHOLDER,calculatedWidth:0,cachedPlaceholder:"",cachedOptions:[],createdOptions:[],createdLabel:"",createdSelected:!1,currentPlaceholder:"",hoveringIndex:-1,comboBoxHovering:!1,isOnComposition:!1,isSilentBlur:!1,isComposing:!1,inputLength:20,selectWidth:200,initialInputHeight:0,previousQuery:null,previousValue:void 0,query:"",selectedLabel:"",softFocus:!1,tagInMultiLine:!1}),L=ref(-1),z=ref(-1),j=ref(null),ae=ref(null),oe=ref(null),re=ref(null),ue=ref(null),le=ref(null),de=ref(null),he=ref(!1),_e=computed(()=>e.disabled||k?.disabled),xe=computed(()=>{const On=Dt.value.length*34;return On>e.height?e.height:On}),Ne=computed(()=>!isNil(e.modelValue)),$e=computed(()=>{const On=e.multiple?Array.isArray(e.modelValue)&&e.modelValue.length>0:Ne.value;return e.clearable&&!_e.value&&V.comboBoxHovering&&On}),Ce=computed(()=>e.remote&&e.filterable?"":arrow_up_default),Ie=computed(()=>Ce.value&&g.is("reverse",he.value)),ze=computed(()=>$?.validateState||""),Ue=computed(()=>ValidateComponentsMap[ze.value]),Pt=computed(()=>e.remote?300:0),hn=computed(()=>{const On=Dt.value;return e.loading?e.loadingText||r("el.select.loading"):e.remote&&V.inputValue===""&&On.length===0?!1:e.filterable&&V.inputValue&&On.length>0?e.noMatchText||r("el.select.noMatch"):On.length===0?e.noDataText||r("el.select.noData"):null}),Dt=computed(()=>{const On=Un=>{const Yn=V.inputValue,ta=new RegExp(escapeStringRegexp(Yn),"i");return Yn?ta.test(Un.label||""):!0};return e.loading?[]:flattenOptions(e.options.concat(V.createdOptions).map(Un=>{if(isArray$3(Un.options)){const Yn=Un.options.filter(On);if(Yn.length>0)return{...Un,options:Yn}}else if(e.remote||On(Un))return Un;return null}).filter(Un=>Un!==null))}),xn=computed(()=>{const On=new Map;return Dt.value.forEach((Un,Yn)=>{On.set(na(Un),{option:Un,index:Yn})}),On}),jt=computed(()=>Dt.value.every(On=>On.disabled)),Vn=useFormSize(),Rn=computed(()=>Vn.value==="small"?"small":"default"),Tn=computed(()=>{const On=le.value,Un=Rn.value||"default",Yn=On?Number.parseInt(getComputedStyle(On).paddingLeft):0,ta=On?Number.parseInt(getComputedStyle(On).paddingRight):0;return V.selectWidth-ta-Yn-TAG_BASE_WIDTH[Un]}),Ln=()=>{var On;z.value=((On=ue.value)==null?void 0:On.offsetWidth)||200},Sn=computed(()=>({width:`${V.calculatedWidth===0?MINIMUM_INPUT_WIDTH:Math.ceil(V.calculatedWidth)+MINIMUM_INPUT_WIDTH}px`})),An=computed(()=>isArray$3(e.modelValue)?e.modelValue.length===0&&!V.displayInputValue:e.filterable?V.displayInputValue.length===0:!0),In=computed(()=>{const On=e.placeholder||r("el.select.placeholder");return e.multiple||isNil(e.modelValue)?On:V.selectedLabel}),Mn=computed(()=>{var On,Un;return(Un=(On=re.value)==null?void 0:On.popperRef)==null?void 0:Un.contentRef}),ra=computed(()=>{if(e.multiple){const On=e.modelValue.length;if(e.modelValue.length>0&&xn.value.has(e.modelValue[On-1])){const{index:Un}=xn.value.get(e.modelValue[On-1]);return Un}}else if(e.modelValue&&xn.value.has(e.modelValue)){const{index:On}=xn.value.get(e.modelValue);return On}return-1}),da=computed({get(){return he.value&&hn.value!==!1},set(On){he.value=On}}),ua=computed(()=>V.cachedOptions.slice(0,e.maxCollapseTags)),aa=computed(()=>V.cachedOptions.slice(e.maxCollapseTags)),{createNewOption:Nn,removeNewOption:En,selectNewOption:Zn,clearAllNewOption:ha}=useAllowCreate(e,V),{handleCompositionStart:xa,handleCompositionUpdate:sa,handleCompositionEnd:Hn}=useInput(On=>Kn(On)),bn=()=>{var On,Un,Yn;(Un=(On=ae.value)==null?void 0:On.focus)==null||Un.call(On),(Yn=re.value)==null||Yn.updatePopper()},Xn=()=>{if(!e.automaticDropdown&&!_e.value)return V.isComposing&&(V.softFocus=!0),nextTick(()=>{var On,Un;he.value=!he.value,(Un=(On=ae.value)==null?void 0:On.focus)==null||Un.call(On)})},$n=()=>(e.filterable&&V.inputValue!==V.selectedLabel&&(V.query=V.selectedLabel),At(V.inputValue),nextTick(()=>{Nn(V.inputValue)})),kt=debounce($n,Pt.value),At=On=>{V.previousQuery!==On&&(V.previousQuery=On,e.filterable&&isFunction$3(e.filterMethod)?e.filterMethod(On):e.filterable&&e.remote&&isFunction$3(e.remoteMethod)&&e.remoteMethod(On))},Dn=On=>{isEqual$1(e.modelValue,On)||n(CHANGE_EVENT,On)},Qn=On=>{n(UPDATE_MODEL_EVENT,On),Dn(On),V.previousValue=On?.toString()},oa=(On=[],Un)=>{if(!isObject$3(Un))return On.indexOf(Un);const Yn=e.valueKey;let ta=-1;return On.some((Jn,pa)=>get(Jn,Yn)===get(Un,Yn)?(ta=pa,!0):!1),ta},na=On=>isObject$3(On)?get(On,e.valueKey):On,la=On=>isObject$3(On)?On.label:On,ma=()=>nextTick(()=>{var On,Un;if(!ae.value)return;const Yn=le.value;ue.value.height=Yn.offsetHeight,he.value&&hn.value!==!1&&((Un=(On=re.value)==null?void 0:On.updatePopper)==null||Un.call(On))}),ca=()=>{var On,Un;if(pe(),Ln(),(Un=(On=re.value)==null?void 0:On.updatePopper)==null||Un.call(On),e.multiple)return ma()},pe=()=>{const On=le.value;On&&(V.selectWidth=On.getBoundingClientRect().width)},Oe=(On,Un,Yn=!0)=>{var ta,Jn;if(e.multiple){let pa=e.modelValue.slice();const ga=oa(pa,na(On));ga>-1?(pa=[...pa.slice(0,ga),...pa.slice(ga+1)],V.cachedOptions.splice(ga,1),En(On)):(e.multipleLimit<=0||pa.length<e.multipleLimit)&&(pa=[...pa,na(On)],V.cachedOptions.push(On),Zn(On),zn(Un)),Qn(pa),On.created&&(V.query="",At(""),V.inputLength=20),e.filterable&&!e.reserveKeyword&&((Jn=(ta=ae.value).focus)==null||Jn.call(ta),wn("")),e.filterable&&(V.calculatedWidth=de.value.getBoundingClientRect().width),ma(),Gn()}else L.value=Un,V.selectedLabel=On.label,Qn(na(On)),he.value=!1,V.isComposing=!1,V.isSilentBlur=Yn,Zn(On),On.created||ha(),zn(Un)},Ve=(On,Un)=>{const{valueKey:Yn}=e,ta=e.modelValue.indexOf(get(Un,Yn));if(ta>-1&&!_e.value){const Jn=[...e.modelValue.slice(0,ta),...e.modelValue.slice(ta+1)];return V.cachedOptions.splice(ta,1),Qn(Jn),n("remove-tag",get(Un,Yn)),V.softFocus=!0,En(Un),nextTick(bn)}On.stopPropagation()},qe=On=>{const Un=V.isComposing;V.isComposing=!0,V.softFocus?V.softFocus=!1:Un||n("focus",On)},Et=On=>(V.softFocus=!1,nextTick(()=>{var Un,Yn;(Yn=(Un=ae.value)==null?void 0:Un.blur)==null||Yn.call(Un),de.value&&(V.calculatedWidth=de.value.getBoundingClientRect().width),V.isSilentBlur?V.isSilentBlur=!1:V.isComposing&&n("blur",On),V.isComposing=!1})),Lt=()=>{V.displayInputValue.length>0?wn(""):he.value=!1},_n=On=>{if(V.displayInputValue.length===0){On.preventDefault();const Un=e.modelValue.slice();Un.pop(),En(V.cachedOptions.pop()),Qn(Un)}},vn=()=>{let On;return isArray$3(e.modelValue)?On=[]:On=void 0,V.softFocus=!0,e.multiple?V.cachedOptions=[]:V.selectedLabel="",he.value=!1,Qn(On),n("clear"),ha(),nextTick(bn)},wn=On=>{V.displayInputValue=On,V.inputValue=On},Cn=(On,Un=void 0)=>{const Yn=Dt.value;if(!["forward","backward"].includes(On)||_e.value||Yn.length<=0||jt.value)return;if(!he.value)return Xn();Un===void 0&&(Un=V.hoveringIndex);let ta=-1;On==="forward"?(ta=Un+1,ta>=Yn.length&&(ta=0)):On==="backward"&&(ta=Un-1,(ta<0||ta>=Yn.length)&&(ta=Yn.length-1));const Jn=Yn[ta];if(Jn.disabled||Jn.type==="Group")return Cn(On,ta);zn(ta),Pn(ta)},Bn=()=>{if(he.value)~V.hoveringIndex&&Dt.value[V.hoveringIndex]&&Oe(Dt.value[V.hoveringIndex],V.hoveringIndex,!1);else return Xn()},zn=On=>{V.hoveringIndex=On},Fn=()=>{V.hoveringIndex=-1},Gn=()=>{var On;const Un=ae.value;Un&&((On=Un.focus)==null||On.call(Un))},Kn=On=>{const Un=On.target.value;if(wn(Un),V.displayInputValue.length>0&&!he.value&&(he.value=!0),V.calculatedWidth=de.value.getBoundingClientRect().width,e.multiple&&ma(),e.remote)kt();else return $n()},Wn=()=>(he.value=!1,Et()),ea=()=>(V.inputValue=V.displayInputValue,nextTick(()=>{~ra.value&&(zn(ra.value),Pn(V.hoveringIndex))})),Pn=On=>{oe.value.scrollToItem(On)},jn=()=>{if(Fn(),e.multiple)if(e.modelValue.length>0){let On=!1;V.cachedOptions.length=0,V.previousValue=e.modelValue.toString();for(const Un of e.modelValue)if(xn.value.has(Un)){const{index:Yn,option:ta}=xn.value.get(Un);V.cachedOptions.push(ta),On||zn(Yn),On=!0}}else V.cachedOptions=[],V.previousValue=void 0;else if(Ne.value){V.previousValue=e.modelValue;const On=Dt.value,Un=On.findIndex(Yn=>na(Yn)===na(e.modelValue));~Un?(V.selectedLabel=On[Un].label,zn(Un)):V.selectedLabel=`${e.modelValue}`}else V.selectedLabel="",V.previousValue=void 0;ha(),Ln()};return watch(he,On=>{var Un,Yn;n("visible-change",On),On?(Yn=(Un=re.value).update)==null||Yn.call(Un):(V.displayInputValue="",V.previousQuery=null,Nn(""))}),watch(()=>e.modelValue,(On,Un)=>{var Yn;(!On||On.toString()!==V.previousValue)&&jn(),!isEqual$1(On,Un)&&e.validateEvent&&((Yn=$?.validate)==null||Yn.call($,"change").catch(ta=>void 0))},{deep:!0}),watch(()=>e.options,()=>{const On=ae.value;(!On||On&&document.activeElement!==On)&&jn()},{deep:!0}),watch(Dt,()=>nextTick(oe.value.resetScrollTop)),watch(()=>da.value,On=>{On||Fn()}),onMounted(()=>{jn()}),useResizeObserver(ue,ca),{collapseTagSize:Rn,currentPlaceholder:In,expanded:he,emptyText:hn,popupHeight:xe,debounce:Pt,filteredOptions:Dt,iconComponent:Ce,iconReverse:Ie,inputWrapperStyle:Sn,popperSize:z,dropdownMenuVisible:da,hasModelValue:Ne,shouldShowPlaceholder:An,selectDisabled:_e,selectSize:Vn,showClearBtn:$e,states:V,tagMaxWidth:Tn,nsSelectV2:g,nsInput:y,calculatorRef:de,controlRef:j,inputRef:ae,menuRef:oe,popper:re,selectRef:ue,selectionRef:le,popperRef:Mn,validateState:ze,validateIcon:Ue,showTagList:ua,collapseTagList:aa,debouncedOnInputChange:kt,deleteTag:Ve,getLabel:la,getValueKey:na,handleBlur:Et,handleClear:vn,handleClickOutside:Wn,handleDel:_n,handleEsc:Lt,handleFocus:qe,handleMenuEnter:ea,handleResize:ca,toggleMenu:Xn,scrollTo:Pn,onInput:Kn,onKeyboardNavigate:Cn,onKeyboardSelect:Bn,onSelect:Oe,onHover:zn,onUpdateInputValue:wn,handleCompositionStart:xa,handleCompositionEnd:Hn,handleCompositionUpdate:sa}},_sfc_main$1S=defineComponent({name:"ElSelectV2",components:{ElSelectMenu,ElTag,ElTooltip,ElIcon},directives:{ClickOutside,ModelText:vModelText},props:SelectProps,emits:[UPDATE_MODEL_EVENT,CHANGE_EVENT,"remove-tag","clear","visible-change","focus","blur"],setup(e,{emit:n}){const r=computed(()=>{const{modelValue:y,multiple:k}=e,$=k?[]:void 0;return isArray$3(y)?k?y:$:k?$:y}),g=useSelect$1(reactive({...toRefs(e),modelValue:r}),n);return provide(selectV2InjectionKey,{props:reactive({...toRefs(e),height:g.popupHeight,modelValue:r}),popper:g.popper,onSelect:g.onSelect,onHover:g.onHover,onKeyboardNavigate:g.onKeyboardNavigate,onKeyboardSelect:g.onKeyboardSelect}),{...g,modelValue:r}}}),_hoisted_1$1w={key:0},_hoisted_2$1o=["id","autocomplete","aria-expanded","aria-labelledby","disabled","readonly","name","unselectable"],_hoisted_3$T=["textContent"],_hoisted_4$L=["id","aria-labelledby","aria-expanded","autocomplete","disabled","name","readonly","unselectable"],_hoisted_5$C=["textContent"];function _sfc_render$5(e,n,r,g,y,k){const $=resolveComponent("el-tag"),V=resolveComponent("el-tooltip"),L=resolveComponent("el-icon"),z=resolveComponent("el-select-menu"),j=resolveDirective("model-text"),ae=resolveDirective("click-outside");return withDirectives((openBlock(),createElementBlock("div",{ref:"selectRef",class:normalizeClass([e.nsSelectV2.b(),e.nsSelectV2.m(e.selectSize)]),onClick:n[24]||(n[24]=withModifiers((...oe)=>e.toggleMenu&&e.toggleMenu(...oe),["stop"])),onMouseenter:n[25]||(n[25]=oe=>e.states.comboBoxHovering=!0),onMouseleave:n[26]||(n[26]=oe=>e.states.comboBoxHovering=!1)},[createVNode(V,{ref:"popper",visible:e.dropdownMenuVisible,teleported:e.teleported,"popper-class":[e.nsSelectV2.e("popper"),e.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":e.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:e.effect,placement:e.placement,pure:"",transition:`${e.nsSelectV2.namespace.value}-zoom-in-top`,trigger:"click",persistent:e.persistent,onBeforeShow:e.handleMenuEnter,onHide:n[23]||(n[23]=oe=>e.states.inputValue=e.states.displayInputValue)},{default:withCtx(()=>[createBaseVNode("div",{ref:"selectionRef",class:normalizeClass([e.nsSelectV2.e("wrapper"),e.nsSelectV2.is("focused",e.states.isComposing||e.expanded),e.nsSelectV2.is("hovering",e.states.comboBoxHovering),e.nsSelectV2.is("filterable",e.filterable),e.nsSelectV2.is("disabled",e.selectDisabled)])},[e.$slots.prefix?(openBlock(),createElementBlock("div",_hoisted_1$1w,[renderSlot(e.$slots,"prefix")])):createCommentVNode("v-if",!0),e.multiple?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(e.nsSelectV2.e("selection"))},[e.collapseTags&&e.modelValue.length>0?(openBlock(),createElementBlock(Fragment,{key:0},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.showTagList,oe=>(openBlock(),createElementBlock("div",{key:e.getValueKey(oe),class:normalizeClass(e.nsSelectV2.e("selected-item"))},[createVNode($,{closable:!e.selectDisabled&&!oe?.disable,size:e.collapseTagSize,type:"info","disable-transitions":"",onClose:re=>e.deleteTag(re,oe)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(e.nsSelectV2.e("tags-text")),style:normalizeStyle({maxWidth:`${e.tagMaxWidth}px`})},toDisplayString$1(oe?.label),7)]),_:2},1032,["closable","size","onClose"])],2))),128)),createBaseVNode("div",{class:normalizeClass(e.nsSelectV2.e("selected-item"))},[e.modelValue.length>e.maxCollapseTags?(openBlock(),createBlock($,{key:0,closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""},{default:withCtx(()=>[e.collapseTagsTooltip?(openBlock(),createBlock(V,{key:0,disabled:e.dropdownMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:!1},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(e.nsSelectV2.e("tags-text")),style:normalizeStyle({maxWidth:`${e.tagMaxWidth}px`})},"+ "+toDisplayString$1(e.modelValue.length-e.maxCollapseTags),7)]),content:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(e.nsSelectV2.e("selection"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.collapseTagList,oe=>(openBlock(),createElementBlock("div",{key:e.getValueKey(oe),class:normalizeClass(e.nsSelectV2.e("selected-item"))},[createVNode($,{closable:!e.selectDisabled&&!oe.disabled,size:e.collapseTagSize,class:"in-tooltip",type:"info","disable-transitions":"",onClose:re=>e.deleteTag(re,oe)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(e.nsSelectV2.e("tags-text")),style:normalizeStyle({maxWidth:`${e.tagMaxWidth}px`})},toDisplayString$1(e.getLabel(oe)),7)]),_:2},1032,["closable","size","onClose"])],2))),128))],2)]),_:1},8,["disabled","effect"])):(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(e.nsSelectV2.e("tags-text")),style:normalizeStyle({maxWidth:`${e.tagMaxWidth}px`})},"+ "+toDisplayString$1(e.modelValue.length-e.maxCollapseTags),7))]),_:1},8,["size"])):createCommentVNode("v-if",!0)],2)],64)):(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(e.states.cachedOptions,oe=>(openBlock(),createElementBlock("div",{key:e.getValueKey(oe),class:normalizeClass(e.nsSelectV2.e("selected-item"))},[createVNode($,{closable:!e.selectDisabled&&!oe.disabled,size:e.collapseTagSize,type:"info","disable-transitions":"",onClose:re=>e.deleteTag(re,oe)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(e.nsSelectV2.e("tags-text")),style:normalizeStyle({maxWidth:`${e.tagMaxWidth}px`})},toDisplayString$1(e.getLabel(oe)),7)]),_:2},1032,["closable","size","onClose"])],2))),128)),createBaseVNode("div",{class:normalizeClass([e.nsSelectV2.e("selected-item"),e.nsSelectV2.e("input-wrapper")]),style:normalizeStyle(e.inputWrapperStyle)},[withDirectives(createBaseVNode("input",{id:e.id,ref:"inputRef",autocomplete:e.autocomplete,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":e.expanded,"aria-labelledby":e.label,class:normalizeClass([e.nsSelectV2.is(e.selectSize),e.nsSelectV2.e("combobox-input")]),disabled:e.disabled,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",name:e.name,unselectable:e.expanded?"on":void 0,"onUpdate:modelValue":n[0]||(n[0]=(...oe)=>e.onUpdateInputValue&&e.onUpdateInputValue(...oe)),onFocus:n[1]||(n[1]=(...oe)=>e.handleFocus&&e.handleFocus(...oe)),onBlur:n[2]||(n[2]=(...oe)=>e.handleBlur&&e.handleBlur(...oe)),onInput:n[3]||(n[3]=(...oe)=>e.onInput&&e.onInput(...oe)),onCompositionstart:n[4]||(n[4]=(...oe)=>e.handleCompositionStart&&e.handleCompositionStart(...oe)),onCompositionupdate:n[5]||(n[5]=(...oe)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...oe)),onCompositionend:n[6]||(n[6]=(...oe)=>e.handleCompositionEnd&&e.handleCompositionEnd(...oe)),onKeydown:[n[7]||(n[7]=withKeys(withModifiers(oe=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),n[8]||(n[8]=withKeys(withModifiers(oe=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),n[9]||(n[9]=withKeys(withModifiers((...oe)=>e.onKeyboardSelect&&e.onKeyboardSelect(...oe),["stop","prevent"]),["enter"])),n[10]||(n[10]=withKeys(withModifiers((...oe)=>e.handleEsc&&e.handleEsc(...oe),["stop","prevent"]),["esc"])),n[11]||(n[11]=withKeys(withModifiers((...oe)=>e.handleDel&&e.handleDel(...oe),["stop"]),["delete"]))]},null,42,_hoisted_2$1o),[[j,e.states.displayInputValue]]),e.filterable?(openBlock(),createElementBlock("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:normalizeClass(e.nsSelectV2.e("input-calculator")),textContent:toDisplayString$1(e.states.displayInputValue)},null,10,_hoisted_3$T)):createCommentVNode("v-if",!0)],6)],2)):(openBlock(),createElementBlock(Fragment,{key:2},[createBaseVNode("div",{class:normalizeClass([e.nsSelectV2.e("selected-item"),e.nsSelectV2.e("input-wrapper")])},[withDirectives(createBaseVNode("input",{id:e.id,ref:"inputRef","aria-autocomplete":"list","aria-haspopup":"listbox","aria-labelledby":e.label,"aria-expanded":e.expanded,autocapitalize:"off",autocomplete:e.autocomplete,class:normalizeClass(e.nsSelectV2.e("combobox-input")),disabled:e.disabled,name:e.name,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",unselectable:e.expanded?"on":void 0,onCompositionstart:n[12]||(n[12]=(...oe)=>e.handleCompositionStart&&e.handleCompositionStart(...oe)),onCompositionupdate:n[13]||(n[13]=(...oe)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...oe)),onCompositionend:n[14]||(n[14]=(...oe)=>e.handleCompositionEnd&&e.handleCompositionEnd(...oe)),onFocus:n[15]||(n[15]=(...oe)=>e.handleFocus&&e.handleFocus(...oe)),onBlur:n[16]||(n[16]=(...oe)=>e.handleBlur&&e.handleBlur(...oe)),onInput:n[17]||(n[17]=(...oe)=>e.onInput&&e.onInput(...oe)),onKeydown:[n[18]||(n[18]=withKeys(withModifiers(oe=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),n[19]||(n[19]=withKeys(withModifiers(oe=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),n[20]||(n[20]=withKeys(withModifiers((...oe)=>e.onKeyboardSelect&&e.onKeyboardSelect(...oe),["stop","prevent"]),["enter"])),n[21]||(n[21]=withKeys(withModifiers((...oe)=>e.handleEsc&&e.handleEsc(...oe),["stop","prevent"]),["esc"]))],"onUpdate:modelValue":n[22]||(n[22]=(...oe)=>e.onUpdateInputValue&&e.onUpdateInputValue(...oe))},null,42,_hoisted_4$L),[[j,e.states.displayInputValue]])],2),e.filterable?(openBlock(),createElementBlock("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:normalizeClass([e.nsSelectV2.e("selected-item"),e.nsSelectV2.e("input-calculator")]),textContent:toDisplayString$1(e.states.displayInputValue)},null,10,_hoisted_5$C)):createCommentVNode("v-if",!0)],64)),e.shouldShowPlaceholder?(openBlock(),createElementBlock("span",{key:3,class:normalizeClass([e.nsSelectV2.e("placeholder"),e.nsSelectV2.is("transparent",e.multiple?e.modelValue.length===0:!e.hasModelValue)])},toDisplayString$1(e.currentPlaceholder),3)):createCommentVNode("v-if",!0),createBaseVNode("span",{class:normalizeClass(e.nsSelectV2.e("suffix"))},[e.iconComponent?withDirectives((openBlock(),createBlock(L,{key:0,class:normalizeClass([e.nsSelectV2.e("caret"),e.nsInput.e("icon"),e.iconReverse])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(e.iconComponent)))]),_:1},8,["class"])),[[vShow,!e.showClearBtn]]):createCommentVNode("v-if",!0),e.showClearBtn&&e.clearIcon?(openBlock(),createBlock(L,{key:1,class:normalizeClass([e.nsSelectV2.e("caret"),e.nsInput.e("icon")]),onClick:withModifiers(e.handleClear,["prevent","stop"])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(e.clearIcon)))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0),e.validateState&&e.validateIcon?(openBlock(),createBlock(L,{key:2,class:normalizeClass([e.nsInput.e("icon"),e.nsInput.e("validateIcon")])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(e.validateIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],2)]),content:withCtx(()=>[createVNode(z,{ref:"menuRef",data:e.filteredOptions,width:e.popperSize,"hovering-index":e.states.hoveringIndex,"scrollbar-always-on":e.scrollbarAlwaysOn},{default:withCtx(oe=>[renderSlot(e.$slots,"default",normalizeProps(guardReactiveProps(oe)))]),empty:withCtx(()=>[renderSlot(e.$slots,"empty",{},()=>[createBaseVNode("p",{class:normalizeClass(e.nsSelectV2.e("empty"))},toDisplayString$1(e.emptyText?e.emptyText:""),3)])]),_:3},8,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","effect","placement","transition","persistent","onBeforeShow"])],34)),[[ae,e.handleClickOutside,e.popperRef]])}var Select=_export_sfc$1(_sfc_main$1S,[["render",_sfc_render$5],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/select.vue"]]);Select.install=e=>{e.component(Select.name,Select)};const _Select=Select,ElSelectV2=_Select,skeletonProps=buildProps({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Number}}),skeletonItemProps=buildProps({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),__default__$t=defineComponent({name:"ElSkeletonItem"}),_sfc_main$1R=defineComponent({...__default__$t,props:skeletonItemProps,setup(e){const n=useNamespace("skeleton");return(r,g)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(n).e("item"),unref(n).e(r.variant)])},[r.variant==="image"?(openBlock(),createBlock(unref(picture_filled_default),{key:0})):createCommentVNode("v-if",!0)],2))}});var SkeletonItem=_export_sfc$1(_sfc_main$1R,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton-item.vue"]]);const __default__$s=defineComponent({name:"ElSkeleton"}),_sfc_main$1Q=defineComponent({...__default__$s,props:skeletonProps,setup(e,{expose:n}){const r=e,g=useNamespace("skeleton"),y=useThrottleRender(toRef(r,"loading"),r.throttle);return n({uiLoading:y}),(k,$)=>unref(y)?(openBlock(),createElementBlock("div",mergeProps({key:0,class:[unref(g).b(),unref(g).is("animated",k.animated)]},k.$attrs),[(openBlock(!0),createElementBlock(Fragment,null,renderList(k.count,V=>(openBlock(),createElementBlock(Fragment,{key:V},[k.loading?renderSlot(k.$slots,"template",{key:V},()=>[createVNode(SkeletonItem,{class:normalizeClass(unref(g).is("first")),variant:"p"},null,8,["class"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(k.rows,L=>(openBlock(),createBlock(SkeletonItem,{key:L,class:normalizeClass([unref(g).e("paragraph"),unref(g).is("last",L===k.rows&&k.rows>1)]),variant:"p"},null,8,["class"]))),128))]):createCommentVNode("v-if",!0)],64))),128))],16)):renderSlot(k.$slots,"default",normalizeProps(mergeProps({key:1},k.$attrs)))}});var Skeleton$1=_export_sfc$1(_sfc_main$1Q,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton.vue"]]);const ElSkeleton=withInstall(Skeleton$1,{SkeletonItem}),ElSkeletonItem=withNoopInstall(SkeletonItem),sliderContextKey=Symbol("sliderContextKey"),sliderProps=buildProps({modelValue:{type:definePropType([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:useSizeProp,inputSize:useSizeProp,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:definePropType(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:definePropType(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Ee,default:"top"},marks:{type:definePropType(Object)},validateEvent:{type:Boolean,default:!0}}),isValidValue$1=e=>isNumber$1(e)||isArray$3(e)&&e.every(isNumber$1),sliderEmits={[UPDATE_MODEL_EVENT]:isValidValue$1,[INPUT_EVENT]:isValidValue$1,[CHANGE_EVENT]:isValidValue$1},useLifecycle=(e,n,r)=>{const g=ref();return onMounted(async()=>{e.range?(Array.isArray(e.modelValue)?(n.firstValue=Math.max(e.min,e.modelValue[0]),n.secondValue=Math.min(e.max,e.modelValue[1])):(n.firstValue=e.min,n.secondValue=e.max),n.oldValue=[n.firstValue,n.secondValue]):(typeof e.modelValue!="number"||Number.isNaN(e.modelValue)?n.firstValue=e.min:n.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),n.oldValue=n.firstValue),useEventListener(window,"resize",r),await nextTick(),r()}),{sliderWrapper:g}},useMarks=e=>computed(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((r,g)=>r-g).filter(r=>r<=e.max&&r>=e.min).map(r=>({point:r,position:(r-e.min)*100/(e.max-e.min),mark:e.marks[r]})):[]),useSlide=(e,n,r)=>{const{form:g,formItem:y}=useFormItem(),k=shallowRef(),$=ref(),V=ref(),L={firstButton:$,secondButton:V},z=computed(()=>e.disabled||g?.disabled||!1),j=computed(()=>Math.min(n.firstValue,n.secondValue)),ae=computed(()=>Math.max(n.firstValue,n.secondValue)),oe=computed(()=>e.range?`${100*(ae.value-j.value)/(e.max-e.min)}%`:`${100*(n.firstValue-e.min)/(e.max-e.min)}%`),re=computed(()=>e.range?`${100*(j.value-e.min)/(e.max-e.min)}%`:"0%"),ue=computed(()=>e.vertical?{height:e.height}:{}),le=computed(()=>e.vertical?{height:oe.value,bottom:re.value}:{width:oe.value,left:re.value}),de=()=>{k.value&&(n.sliderSize=k.value[`client${e.vertical?"Height":"Width"}`])},he=hn=>{const Dt=e.min+hn*(e.max-e.min)/100;if(!e.range)return $;let xn;return Math.abs(j.value-Dt)<Math.abs(ae.value-Dt)?xn=n.firstValue<n.secondValue?"firstButton":"secondButton":xn=n.firstValue>n.secondValue?"firstButton":"secondButton",L[xn]},_e=hn=>{const Dt=he(hn);return Dt.value.setPosition(hn),Dt},xe=hn=>{n.firstValue=hn,$e(e.range?[j.value,ae.value]:hn)},Ne=hn=>{n.secondValue=hn,e.range&&$e([j.value,ae.value])},$e=hn=>{r(UPDATE_MODEL_EVENT,hn),r(INPUT_EVENT,hn)},Ce=async()=>{await nextTick(),r(CHANGE_EVENT,e.range?[j.value,ae.value]:e.modelValue)},Ie=hn=>{var Dt,xn,jt,Vn,Rn,Tn;if(z.value||n.dragging)return;de();let Ln=0;if(e.vertical){const Sn=(jt=(xn=(Dt=hn.touches)==null?void 0:Dt.item(0))==null?void 0:xn.clientY)!=null?jt:hn.clientY;Ln=(k.value.getBoundingClientRect().bottom-Sn)/n.sliderSize*100}else{const Sn=(Tn=(Rn=(Vn=hn.touches)==null?void 0:Vn.item(0))==null?void 0:Rn.clientX)!=null?Tn:hn.clientX,An=k.value.getBoundingClientRect().left;Ln=(Sn-An)/n.sliderSize*100}if(!(Ln<0||Ln>100))return _e(Ln)};return{elFormItem:y,slider:k,firstButton:$,secondButton:V,sliderDisabled:z,minValue:j,maxValue:ae,runwayStyle:ue,barStyle:le,resetSize:de,setPosition:_e,emitChange:Ce,onSliderWrapperPrevent:hn=>{var Dt,xn;((Dt=L.firstButton.value)!=null&&Dt.dragging||(xn=L.secondButton.value)!=null&&xn.dragging)&&hn.preventDefault()},onSliderClick:hn=>{Ie(hn)&&Ce()},onSliderDown:async hn=>{const Dt=Ie(hn);Dt&&(await nextTick(),Dt.value.onButtonDown(hn))},setFirstValue:xe,setSecondValue:Ne}},{left,down,right,up,home,end:end$2,pageUp,pageDown}=EVENT_CODE,useTooltip=(e,n,r)=>{const g=ref(),y=ref(!1),k=computed(()=>n.value instanceof Function),$=computed(()=>k.value&&n.value(e.modelValue)||e.modelValue),V=debounce(()=>{r.value&&(y.value=!0)},50),L=debounce(()=>{r.value&&(y.value=!1)},50);return{tooltip:g,tooltipVisible:y,formatValue:$,displayTooltip:V,hideTooltip:L}},useSliderButton=(e,n,r)=>{const{disabled:g,min:y,max:k,step:$,showTooltip:V,precision:L,sliderSize:z,formatTooltip:j,emitChange:ae,resetSize:oe,updateDragging:re}=inject(sliderContextKey),{tooltip:ue,tooltipVisible:le,formatValue:de,displayTooltip:he,hideTooltip:_e}=useTooltip(e,j,V),xe=ref(),Ne=computed(()=>`${(e.modelValue-y.value)/(k.value-y.value)*100}%`),$e=computed(()=>e.vertical?{bottom:Ne.value}:{left:Ne.value}),Ce=()=>{n.hovering=!0,he()},Ie=()=>{n.hovering=!1,n.dragging||_e()},ze=Mn=>{g.value||(Mn.preventDefault(),Ln(Mn),window.addEventListener("mousemove",Sn),window.addEventListener("touchmove",Sn),window.addEventListener("mouseup",An),window.addEventListener("touchend",An),window.addEventListener("contextmenu",An),xe.value.focus())},Ue=Mn=>{g.value||(n.newPosition=Number.parseFloat(Ne.value)+Mn/(k.value-y.value)*100,In(n.newPosition),ae())},Pt=()=>{Ue(-$.value)},hn=()=>{Ue($.value)},Dt=()=>{Ue(-$.value*4)},xn=()=>{Ue($.value*4)},jt=()=>{g.value||(In(0),ae())},Vn=()=>{g.value||(In(100),ae())},Rn=Mn=>{let ra=!0;[left,down].includes(Mn.key)?Pt():[right,up].includes(Mn.key)?hn():Mn.key===home?jt():Mn.key===end$2?Vn():Mn.key===pageDown?Dt():Mn.key===pageUp?xn():ra=!1,ra&&Mn.preventDefault()},Tn=Mn=>{let ra,da;return Mn.type.startsWith("touch")?(da=Mn.touches[0].clientY,ra=Mn.touches[0].clientX):(da=Mn.clientY,ra=Mn.clientX),{clientX:ra,clientY:da}},Ln=Mn=>{n.dragging=!0,n.isClick=!0;const{clientX:ra,clientY:da}=Tn(Mn);e.vertical?n.startY=da:n.startX=ra,n.startPosition=Number.parseFloat(Ne.value),n.newPosition=n.startPosition},Sn=Mn=>{if(n.dragging){n.isClick=!1,he(),oe();let ra;const{clientX:da,clientY:ua}=Tn(Mn);e.vertical?(n.currentY=ua,ra=(n.startY-n.currentY)/z.value*100):(n.currentX=da,ra=(n.currentX-n.startX)/z.value*100),n.newPosition=n.startPosition+ra,In(n.newPosition)}},An=()=>{n.dragging&&(setTimeout(()=>{n.dragging=!1,n.hovering||_e(),n.isClick||In(n.newPosition),ae()},0),window.removeEventListener("mousemove",Sn),window.removeEventListener("touchmove",Sn),window.removeEventListener("mouseup",An),window.removeEventListener("touchend",An),window.removeEventListener("contextmenu",An))},In=async Mn=>{if(Mn===null||Number.isNaN(+Mn))return;Mn<0?Mn=0:Mn>100&&(Mn=100);const ra=100/((k.value-y.value)/$.value);let ua=Math.round(Mn/ra)*ra*(k.value-y.value)*.01+y.value;ua=Number.parseFloat(ua.toFixed(L.value)),ua!==e.modelValue&&r(UPDATE_MODEL_EVENT,ua),!n.dragging&&e.modelValue!==n.oldValue&&(n.oldValue=e.modelValue),await nextTick(),n.dragging&&he(),ue.value.updatePopper()};return watch(()=>n.dragging,Mn=>{re(Mn)}),{disabled:g,button:xe,tooltip:ue,tooltipVisible:le,showTooltip:V,wrapperStyle:$e,formatValue:de,handleMouseEnter:Ce,handleMouseLeave:Ie,onButtonDown:ze,onKeyDown:Rn,setPosition:In}},useStops=(e,n,r,g)=>({stops:computed(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const $=(e.max-e.min)/e.step,V=100*e.step/(e.max-e.min),L=Array.from({length:$-1}).map((z,j)=>(j+1)*V);return e.range?L.filter(z=>z<100*(r.value-e.min)/(e.max-e.min)||z>100*(g.value-e.min)/(e.max-e.min)):L.filter(z=>z>100*(n.firstValue-e.min)/(e.max-e.min))}),getStopStyle:$=>e.vertical?{bottom:`${$}%`}:{left:`${$}%`}}),useWatch=(e,n,r,g,y,k)=>{const $=z=>{y(UPDATE_MODEL_EVENT,z),y(INPUT_EVENT,z)},V=()=>e.range?![r.value,g.value].every((z,j)=>z===n.oldValue[j]):e.modelValue!==n.oldValue,L=()=>{var z,j;e.min>e.max&&throwError("Slider","min should not be greater than max.");const ae=e.modelValue;e.range&&Array.isArray(ae)?ae[1]<e.min?$([e.min,e.min]):ae[0]>e.max?$([e.max,e.max]):ae[0]<e.min?$([e.min,ae[1]]):ae[1]>e.max?$([ae[0],e.max]):(n.firstValue=ae[0],n.secondValue=ae[1],V()&&(e.validateEvent&&((z=k?.validate)==null||z.call(k,"change").catch(oe=>void 0)),n.oldValue=ae.slice())):!e.range&&typeof ae=="number"&&!Number.isNaN(ae)&&(ae<e.min?$(e.min):ae>e.max?$(e.max):(n.firstValue=ae,V()&&(e.validateEvent&&((j=k?.validate)==null||j.call(k,"change").catch(oe=>void 0)),n.oldValue=ae)))};L(),watch(()=>n.dragging,z=>{z||L()}),watch(()=>e.modelValue,(z,j)=>{n.dragging||Array.isArray(z)&&Array.isArray(j)&&z.every((ae,oe)=>ae===j[oe])&&n.firstValue===z[0]&&n.secondValue===z[1]||L()},{deep:!0}),watch(()=>[e.min,e.max],()=>{L()})},sliderButtonProps=buildProps({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Ee,default:"top"}}),sliderButtonEmits={[UPDATE_MODEL_EVENT]:e=>isNumber$1(e)},_hoisted_1$1v=["tabindex"],__default__$r=defineComponent({name:"ElSliderButton"}),_sfc_main$1P=defineComponent({...__default__$r,props:sliderButtonProps,emits:sliderButtonEmits,setup(e,{expose:n,emit:r}){const g=e,y=useNamespace("slider"),k=reactive({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:g.modelValue}),{disabled:$,button:V,tooltip:L,showTooltip:z,tooltipVisible:j,wrapperStyle:ae,formatValue:oe,handleMouseEnter:re,handleMouseLeave:ue,onButtonDown:le,onKeyDown:de,setPosition:he}=useSliderButton(g,k,r),{hovering:_e,dragging:xe}=toRefs(k);return n({onButtonDown:le,onKeyDown:de,setPosition:he,hovering:_e,dragging:xe}),(Ne,$e)=>(openBlock(),createElementBlock("div",{ref_key:"button",ref:V,class:normalizeClass([unref(y).e("button-wrapper"),{hover:unref(_e),dragging:unref(xe)}]),style:normalizeStyle(unref(ae)),tabindex:unref($)?-1:0,onMouseenter:$e[0]||($e[0]=(...Ce)=>unref(re)&&unref(re)(...Ce)),onMouseleave:$e[1]||($e[1]=(...Ce)=>unref(ue)&&unref(ue)(...Ce)),onMousedown:$e[2]||($e[2]=(...Ce)=>unref(le)&&unref(le)(...Ce)),onTouchstart:$e[3]||($e[3]=(...Ce)=>unref(le)&&unref(le)(...Ce)),onFocus:$e[4]||($e[4]=(...Ce)=>unref(re)&&unref(re)(...Ce)),onBlur:$e[5]||($e[5]=(...Ce)=>unref(ue)&&unref(ue)(...Ce)),onKeydown:$e[6]||($e[6]=(...Ce)=>unref(de)&&unref(de)(...Ce))},[createVNode(unref(ElTooltip),{ref_key:"tooltip",ref:L,visible:unref(j),placement:Ne.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":Ne.tooltipClass,disabled:!unref(z),persistent:""},{content:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(unref(oe)),1)]),default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass([unref(y).e("button"),{hover:unref(_e),dragging:unref(xe)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled"])],46,_hoisted_1$1v))}});var SliderButton=_export_sfc$1(_sfc_main$1P,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/button.vue"]]);const sliderMarkerProps=buildProps({mark:{type:definePropType([String,Object]),default:void 0}});var SliderMarker=defineComponent({name:"ElSliderMarker",props:sliderMarkerProps,setup(e){const n=useNamespace("slider"),r=computed(()=>isString$3(e.mark)?e.mark:e.mark.label),g=computed(()=>isString$3(e.mark)?void 0:e.mark.style);return()=>h$1("div",{class:n.e("marks-text"),style:g.value},r.value)}});const _hoisted_1$1u=["id","role","aria-label","aria-labelledby"],_hoisted_2$1n={key:1},__default__$q=defineComponent({name:"ElSlider"}),_sfc_main$1O=defineComponent({...__default__$q,props:sliderProps,emits:sliderEmits,setup(e,{expose:n,emit:r}){const g=e,y=useNamespace("slider"),{t:k}=useLocale(),$=reactive({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:V,slider:L,firstButton:z,secondButton:j,sliderDisabled:ae,minValue:oe,maxValue:re,runwayStyle:ue,barStyle:le,resetSize:de,emitChange:he,onSliderWrapperPrevent:_e,onSliderClick:xe,onSliderDown:Ne,setFirstValue:$e,setSecondValue:Ce}=useSlide(g,$,r),{stops:Ie,getStopStyle:ze}=useStops(g,$,oe,re),{inputId:Ue,isLabeledByFormItem:Pt}=useFormItemInputId(g,{formItemContext:V}),hn=useFormSize(),Dt=computed(()=>g.inputSize||hn.value),xn=computed(()=>g.label||k("el.slider.defaultLabel",{min:g.min,max:g.max})),jt=computed(()=>g.range?g.rangeStartLabel||k("el.slider.defaultRangeStartLabel"):xn.value),Vn=computed(()=>g.formatValueText?g.formatValueText(Mn.value):`${Mn.value}`),Rn=computed(()=>g.rangeEndLabel||k("el.slider.defaultRangeEndLabel")),Tn=computed(()=>g.formatValueText?g.formatValueText(ra.value):`${ra.value}`),Ln=computed(()=>[y.b(),y.m(hn.value),y.is("vertical",g.vertical),{[y.m("with-input")]:g.showInput}]),Sn=useMarks(g);useWatch(g,$,oe,re,r,V);const An=computed(()=>{const aa=[g.min,g.max,g.step].map(Nn=>{const En=`${Nn}`.split(".")[1];return En?En.length:0});return Math.max.apply(null,aa)}),{sliderWrapper:In}=useLifecycle(g,$,de),{firstValue:Mn,secondValue:ra,sliderSize:da}=toRefs($),ua=aa=>{$.dragging=aa};return provide(sliderContextKey,{...toRefs(g),sliderSize:da,disabled:ae,precision:An,emitChange:he,resetSize:de,updateDragging:ua}),n({onSliderClick:xe}),(aa,Nn)=>{var En,Zn;return openBlock(),createElementBlock("div",{id:aa.range?unref(Ue):void 0,ref_key:"sliderWrapper",ref:In,class:normalizeClass(unref(Ln)),role:aa.range?"group":void 0,"aria-label":aa.range&&!unref(Pt)?unref(xn):void 0,"aria-labelledby":aa.range&&unref(Pt)?(En=unref(V))==null?void 0:En.labelId:void 0,onTouchstart:Nn[2]||(Nn[2]=(...ha)=>unref(_e)&&unref(_e)(...ha)),onTouchmove:Nn[3]||(Nn[3]=(...ha)=>unref(_e)&&unref(_e)(...ha))},[createBaseVNode("div",{ref_key:"slider",ref:L,class:normalizeClass([unref(y).e("runway"),{"show-input":aa.showInput&&!aa.range},unref(y).is("disabled",unref(ae))]),style:normalizeStyle(unref(ue)),onMousedown:Nn[0]||(Nn[0]=(...ha)=>unref(Ne)&&unref(Ne)(...ha)),onTouchstart:Nn[1]||(Nn[1]=(...ha)=>unref(Ne)&&unref(Ne)(...ha))},[createBaseVNode("div",{class:normalizeClass(unref(y).e("bar")),style:normalizeStyle(unref(le))},null,6),createVNode(SliderButton,{id:aa.range?void 0:unref(Ue),ref_key:"firstButton",ref:z,"model-value":unref(Mn),vertical:aa.vertical,"tooltip-class":aa.tooltipClass,placement:aa.placement,role:"slider","aria-label":aa.range||!unref(Pt)?unref(jt):void 0,"aria-labelledby":!aa.range&&unref(Pt)?(Zn=unref(V))==null?void 0:Zn.labelId:void 0,"aria-valuemin":aa.min,"aria-valuemax":aa.range?unref(ra):aa.max,"aria-valuenow":unref(Mn),"aria-valuetext":unref(Vn),"aria-orientation":aa.vertical?"vertical":"horizontal","aria-disabled":unref(ae),"onUpdate:modelValue":unref($e)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),aa.range?(openBlock(),createBlock(SliderButton,{key:0,ref_key:"secondButton",ref:j,"model-value":unref(ra),vertical:aa.vertical,"tooltip-class":aa.tooltipClass,placement:aa.placement,role:"slider","aria-label":unref(Rn),"aria-valuemin":unref(Mn),"aria-valuemax":aa.max,"aria-valuenow":unref(ra),"aria-valuetext":unref(Tn),"aria-orientation":aa.vertical?"vertical":"horizontal","aria-disabled":unref(ae),"onUpdate:modelValue":unref(Ce)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):createCommentVNode("v-if",!0),aa.showStops?(openBlock(),createElementBlock("div",_hoisted_2$1n,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Ie),(ha,xa)=>(openBlock(),createElementBlock("div",{key:xa,class:normalizeClass(unref(y).e("stop")),style:normalizeStyle(unref(ze)(ha))},null,6))),128))])):createCommentVNode("v-if",!0),unref(Sn).length>0?(openBlock(),createElementBlock(Fragment,{key:2},[createBaseVNode("div",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Sn),(ha,xa)=>(openBlock(),createElementBlock("div",{key:xa,style:normalizeStyle(unref(ze)(ha.position)),class:normalizeClass([unref(y).e("stop"),unref(y).e("marks-stop")])},null,6))),128))]),createBaseVNode("div",{class:normalizeClass(unref(y).e("marks"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Sn),(ha,xa)=>(openBlock(),createBlock(unref(SliderMarker),{key:xa,mark:ha.mark,style:normalizeStyle(unref(ze)(ha.position))},null,8,["mark","style"]))),128))],2)],64)):createCommentVNode("v-if",!0)],38),aa.showInput&&!aa.range?(openBlock(),createBlock(unref(ElInputNumber),{key:0,ref:"input","model-value":unref(Mn),class:normalizeClass(unref(y).e("input")),step:aa.step,disabled:unref(ae),controls:aa.showInputControls,min:aa.min,max:aa.max,debounce:aa.debounce,size:unref(Dt),"onUpdate:modelValue":unref($e),onChange:unref(he)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):createCommentVNode("v-if",!0)],42,_hoisted_1$1u)}}});var Slider=_export_sfc$1(_sfc_main$1O,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/slider.vue"]]);const ElSlider=withInstall(Slider),spaceItemProps=buildProps({prefixCls:{type:String}}),SpaceItem=defineComponent({name:"ElSpaceItem",props:spaceItemProps,setup(e,{slots:n}){const r=useNamespace("space"),g=computed(()=>`${e.prefixCls||r.b()}__item`);return()=>h$1("div",{class:g.value},renderSlot(n,"default"))}}),SIZE_MAP={small:8,default:12,large:16};function useSpace(e){const n=useNamespace("space"),r=computed(()=>[n.b(),n.m(e.direction),e.class]),g=ref(0),y=ref(0),k=computed(()=>{const V=e.wrap||e.fill?{flexWrap:"wrap",marginBottom:`-${y.value}px`}:{},L={alignItems:e.alignment};return[V,L,e.style]}),$=computed(()=>{const V={paddingBottom:`${y.value}px`,marginRight:`${g.value}px`},L=e.fill?{flexGrow:1,minWidth:`${e.fillRatio}%`}:{};return[V,L]});return watchEffect(()=>{const{size:V="small",wrap:L,direction:z,fill:j}=e;if(isArray$3(V)){const[ae=0,oe=0]=V;g.value=ae,y.value=oe}else{let ae;isNumber$1(V)?ae=V:ae=SIZE_MAP[V||"small"]||SIZE_MAP.small,(L||j)&&z==="horizontal"?g.value=y.value=ae:z==="horizontal"?(g.value=ae,y.value=0):(y.value=ae,g.value=0)}}),{classes:r,containerStyle:k,itemStyle:$}}const spaceProps=buildProps({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:definePropType([String,Object,Array]),default:""},style:{type:definePropType([String,Array,Object]),default:""},alignment:{type:definePropType(String),default:"center"},prefixCls:{type:String},spacer:{type:definePropType([Object,String,Number,Array]),default:null,validator:e=>isVNode$1(e)||isNumber$1(e)||isString$3(e)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:componentSizes,validator:e=>isNumber$1(e)||isArray$3(e)&&e.length===2&&e.every(isNumber$1)}}),Space=defineComponent({name:"ElSpace",props:spaceProps,setup(e,{slots:n}){const{classes:r,containerStyle:g,itemStyle:y}=useSpace(e);function k($,V="",L=[]){const{prefixCls:z}=e;return $.forEach((j,ae)=>{isFragment(j)?isArray$3(j.children)&&j.children.forEach((oe,re)=>{isFragment(oe)&&isArray$3(oe.children)?k(oe.children,`${V+re}-`,L):L.push(createVNode(SpaceItem,{style:y.value,prefixCls:z,key:`nested-${V+re}`},{default:()=>[oe]},PatchFlags.PROPS|PatchFlags.STYLE,["style","prefixCls"]))}):isValidElementNode(j)&&L.push(createVNode(SpaceItem,{style:y.value,prefixCls:z,key:`LoopKey${V+ae}`},{default:()=>[j]},PatchFlags.PROPS|PatchFlags.STYLE,["style","prefixCls"]))}),L}return()=>{var $;const{spacer:V,direction:L}=e,z=renderSlot(n,"default",{key:0},()=>[]);if((($=z.children)!=null?$:[]).length===0)return null;if(isArray$3(z.children)){let j=k(z.children);if(V){const ae=j.length-1;j=j.reduce((oe,re,ue)=>{const le=[...oe,re];return ue!==ae&&le.push(createVNode("span",{style:[y.value,L==="vertical"?"width: 100%":null],key:ue},[isVNode$1(V)?V:createTextVNode(V,PatchFlags.TEXT)],PatchFlags.STYLE)),le},[])}return createVNode("div",{class:r.value,style:g.value},j,PatchFlags.STYLE|PatchFlags.CLASS)}return z.children}}}),ElSpace=withInstall(Space),statisticProps=buildProps({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:definePropType([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:definePropType([String,Object,Array])}}),__default__$p=defineComponent({name:"ElStatistic"}),_sfc_main$1N=defineComponent({...__default__$p,props:statisticProps,setup(e,{expose:n}){const r=e,g=useNamespace("statistic"),y=computed(()=>{const{value:k,formatter:$,precision:V,decimalSeparator:L,groupSeparator:z}=r;if(isFunction$3($))return $(k);if(!isNumber$1(k))return k;let[j,ae=""]=String(k).split(".");return ae=ae.padEnd(V,"0").slice(0,V>0?V:0),j=j.replace(/\B(?=(\d{3})+(?!\d))/g,z),[j,ae].join(ae?L:"")});return n({displayValue:y}),(k,$)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(g).b())},[k.$slots.title||k.title?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(g).e("head"))},[renderSlot(k.$slots,"title",{},()=>[createTextVNode(toDisplayString$1(k.title),1)])],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(g).e("content"))},[k.$slots.prefix||k.prefix?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(g).e("prefix"))},[renderSlot(k.$slots,"prefix",{},()=>[createBaseVNode("span",null,toDisplayString$1(k.prefix),1)])],2)):createCommentVNode("v-if",!0),createBaseVNode("span",{class:normalizeClass(unref(g).e("number")),style:normalizeStyle(k.valueStyle)},toDisplayString$1(unref(y)),7),k.$slots.suffix||k.suffix?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(g).e("suffix"))},[renderSlot(k.$slots,"suffix",{},()=>[createBaseVNode("span",null,toDisplayString$1(k.suffix),1)])],2)):createCommentVNode("v-if",!0)],2)],2))}});var Statistic=_export_sfc$1(_sfc_main$1N,[["__file","/home/runner/work/element-plus/element-plus/packages/components/statistic/src/statistic.vue"]]);const ElStatistic=withInstall(Statistic),countdownProps=buildProps({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:definePropType([Number,Object]),default:0},valueStyle:{type:definePropType([String,Object,Array])}}),countdownEmits={finish:()=>!0,[CHANGE_EVENT]:e=>isNumber$1(e)},timeUnits=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],getTime=e=>isNumber$1(e)?new Date(e).getTime():e.valueOf(),formatTime$1=(e,n)=>{let r=e;const g=/\[([^\]]*)]/g;return timeUnits.reduce((k,[$,V])=>{const L=new RegExp(`${$}+(?![^\\[\\]]*\\])`,"g");if(L.test(k)){const z=Math.floor(r/V);return r-=z*V,k.replace(L,j=>String(z).padStart(j.length,"0"))}return k},n).replace(g,"$1")},__default__$o=defineComponent({name:"ElCountdown"}),_sfc_main$1M=defineComponent({...__default__$o,props:countdownProps,emits:countdownEmits,setup(e,{expose:n,emit:r}){const g=e;let y;const k=ref(getTime(g.value)-Date.now()),$=computed(()=>formatTime$1(k.value,g.format)),V=j=>formatTime$1(j,g.format),L=()=>{y&&(cAF(y),y=void 0)},z=()=>{const j=getTime(g.value),ae=()=>{let oe=j-Date.now();r("change",oe),oe<=0?(oe=0,L(),r("finish")):y=rAF(ae),k.value=oe};y=rAF(ae)};return watch(()=>[g.value,g.format],()=>{L(),z()},{immediate:!0}),onBeforeUnmount(()=>{L()}),n({displayValue:$}),(j,ae)=>(openBlock(),createBlock(unref(ElStatistic),{value:k.value,title:j.title,prefix:j.prefix,suffix:j.suffix,"value-style":j.valueStyle,formatter:V},createSlots({_:2},[renderList(j.$slots,(oe,re)=>({name:re,fn:withCtx(()=>[renderSlot(j.$slots,re)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var Countdown=_export_sfc$1(_sfc_main$1M,[["__file","/home/runner/work/element-plus/element-plus/packages/components/countdown/src/countdown.vue"]]);const ElCountdown=withInstall(Countdown),stepsProps=buildProps({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),stepsEmits={[CHANGE_EVENT]:(e,n)=>[e,n].every(isNumber$1)},__default__$n=defineComponent({name:"ElSteps"}),_sfc_main$1L=defineComponent({...__default__$n,props:stepsProps,emits:stepsEmits,setup(e,{emit:n}){const r=e,g=useNamespace("steps"),{children:y,addChild:k,removeChild:$}=useOrderedChildren(getCurrentInstance(),"ElStep");return watch(y,()=>{y.value.forEach((V,L)=>{V.setIndex(L)})}),provide("ElSteps",{props:r,steps:y,addStep:k,removeStep:$}),watch(()=>r.active,(V,L)=>{n(CHANGE_EVENT,V,L)}),(V,L)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(g).b(),unref(g).m(V.simple?"simple":V.direction)])},[renderSlot(V.$slots,"default")],2))}});var Steps=_export_sfc$1(_sfc_main$1L,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/steps.vue"]]);const stepProps=buildProps({title:{type:String,default:""},icon:{type:iconPropType},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),__default__$m=defineComponent({name:"ElStep"}),_sfc_main$1K=defineComponent({...__default__$m,props:stepProps,setup(e){const n=e,r=useNamespace("step"),g=ref(-1),y=ref({}),k=ref(""),$=inject("ElSteps"),V=getCurrentInstance();onMounted(()=>{watch([()=>$.props.active,()=>$.props.processStatus,()=>$.props.finishStatus],([Ce])=>{Ne(Ce)},{immediate:!0})}),onBeforeUnmount(()=>{$.removeStep($e.uid)});const L=computed(()=>n.status||k.value),z=computed(()=>{const Ce=$.steps.value[g.value-1];return Ce?Ce.currentStatus:"wait"}),j=computed(()=>$.props.alignCenter),ae=computed(()=>$.props.direction==="vertical"),oe=computed(()=>$.props.simple),re=computed(()=>$.steps.value.length),ue=computed(()=>{var Ce;return((Ce=$.steps.value[re.value-1])==null?void 0:Ce.uid)===V?.uid}),le=computed(()=>oe.value?"":$.props.space),de=computed(()=>[r.b(),r.is(oe.value?"simple":$.props.direction),r.is("flex",ue.value&&!le.value&&!j.value),r.is("center",j.value&&!ae.value&&!oe.value)]),he=computed(()=>{const Ce={flexBasis:isNumber$1(le.value)?`${le.value}px`:le.value?le.value:`${100/(re.value-(j.value?0:1))}%`};return ae.value||ue.value&&(Ce.maxWidth=`${100/re.value}%`),Ce}),_e=Ce=>{g.value=Ce},xe=Ce=>{const Ie=Ce==="wait",ze={transitionDelay:`${Ie?"-":""}${150*g.value}ms`},Ue=Ce===$.props.processStatus||Ie?0:100;ze.borderWidth=Ue&&!oe.value?"1px":0,ze[$.props.direction==="vertical"?"height":"width"]=`${Ue}%`,y.value=ze},Ne=Ce=>{Ce>g.value?k.value=$.props.finishStatus:Ce===g.value&&z.value!=="error"?k.value=$.props.processStatus:k.value="wait";const Ie=$.steps.value[g.value-1];Ie&&Ie.calcProgress(k.value)},$e=reactive({uid:V.uid,currentStatus:L,setIndex:_e,calcProgress:xe});return $.addStep($e),(Ce,Ie)=>(openBlock(),createElementBlock("div",{style:normalizeStyle(unref(he)),class:normalizeClass(unref(de))},[createCommentVNode(" icon & line "),createBaseVNode("div",{class:normalizeClass([unref(r).e("head"),unref(r).is(unref(L))])},[unref(oe)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(r).e("line"))},[createBaseVNode("i",{class:normalizeClass(unref(r).e("line-inner")),style:normalizeStyle(y.value)},null,6)],2)),createBaseVNode("div",{class:normalizeClass([unref(r).e("icon"),unref(r).is(Ce.icon||Ce.$slots.icon?"icon":"text")])},[renderSlot(Ce.$slots,"icon",{},()=>[Ce.icon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(r).e("icon-inner"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(Ce.icon)))]),_:1},8,["class"])):unref(L)==="success"?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(r).e("icon-inner"),unref(r).is("status")])},{default:withCtx(()=>[createVNode(unref(check_default))]),_:1},8,["class"])):unref(L)==="error"?(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass([unref(r).e("icon-inner"),unref(r).is("status")])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class"])):unref(oe)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:3,class:normalizeClass(unref(r).e("icon-inner"))},toDisplayString$1(g.value+1),3))])],2)],2),createCommentVNode(" title & description "),createBaseVNode("div",{class:normalizeClass(unref(r).e("main"))},[createBaseVNode("div",{class:normalizeClass([unref(r).e("title"),unref(r).is(unref(L))])},[renderSlot(Ce.$slots,"title",{},()=>[createTextVNode(toDisplayString$1(Ce.title),1)])],2),unref(oe)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(r).e("arrow"))},null,2)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass([unref(r).e("description"),unref(r).is(unref(L))])},[renderSlot(Ce.$slots,"description",{},()=>[createTextVNode(toDisplayString$1(Ce.description),1)])],2))],2)],6))}});var Step=_export_sfc$1(_sfc_main$1K,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/item.vue"]]);const ElSteps=withInstall(Steps,{Step}),ElStep=withNoopInstall(Step),switchProps=buildProps({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:isValidComponentSize},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:iconPropType},activeActionIcon:{type:iconPropType},activeIcon:{type:iconPropType},inactiveIcon:{type:iconPropType},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:definePropType(Function)},id:String,tabindex:{type:[String,Number]},value:{type:[Boolean,String,Number],default:!1}}),switchEmits={[UPDATE_MODEL_EVENT]:e=>isBoolean$1(e)||isString$3(e)||isNumber$1(e),[CHANGE_EVENT]:e=>isBoolean$1(e)||isString$3(e)||isNumber$1(e),[INPUT_EVENT]:e=>isBoolean$1(e)||isString$3(e)||isNumber$1(e)},_hoisted_1$1t=["onClick"],_hoisted_2$1m=["id","aria-checked","aria-disabled","name","true-value","false-value","disabled","tabindex","onKeydown"],_hoisted_3$S=["aria-hidden"],_hoisted_4$K=["aria-hidden"],_hoisted_5$B=["aria-hidden"],COMPONENT_NAME$8="ElSwitch",__default__$l=defineComponent({name:COMPONENT_NAME$8}),_sfc_main$1J=defineComponent({...__default__$l,props:switchProps,emits:switchEmits,setup(e,{expose:n,emit:r}){const g=e,y=getCurrentInstance(),{formItem:k}=useFormItem(),$=useFormSize(),V=useNamespace("switch");(ze=>{ze.forEach(Ue=>{useDeprecated({from:Ue[0],replacement:Ue[1],scope:COMPONENT_NAME$8,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},computed(()=>{var Pt;return!!((Pt=y.vnode.props)!=null&&Pt[Ue[2]])}))})})([['"value"','"model-value" or "v-model"',"value"],['"active-color"',"CSS var `--el-switch-on-color`","activeColor"],['"inactive-color"',"CSS var `--el-switch-off-color`","inactiveColor"],['"border-color"',"CSS var `--el-switch-border-color`","borderColor"]]);const{inputId:z}=useFormItemInputId(g,{formItemContext:k}),j=useFormDisabled(computed(()=>g.loading)),ae=ref(g.modelValue!==!1),oe=ref(),re=ref(),ue=computed(()=>[V.b(),V.m($.value),V.is("disabled",j.value),V.is("checked",xe.value)]),le=computed(()=>[V.e("label"),V.em("label","left"),V.is("active",!xe.value)]),de=computed(()=>[V.e("label"),V.em("label","right"),V.is("active",xe.value)]),he=computed(()=>({width:addUnit(g.width)}));watch(()=>g.modelValue,()=>{ae.value=!0}),watch(()=>g.value,()=>{ae.value=!1});const _e=computed(()=>ae.value?g.modelValue:g.value),xe=computed(()=>_e.value===g.activeValue);[g.activeValue,g.inactiveValue].includes(_e.value)||(r(UPDATE_MODEL_EVENT,g.inactiveValue),r(CHANGE_EVENT,g.inactiveValue),r(INPUT_EVENT,g.inactiveValue)),watch(xe,ze=>{var Ue;oe.value.checked=ze,g.validateEvent&&((Ue=k?.validate)==null||Ue.call(k,"change").catch(Pt=>void 0))});const Ne=()=>{const ze=xe.value?g.inactiveValue:g.activeValue;r(UPDATE_MODEL_EVENT,ze),r(CHANGE_EVENT,ze),r(INPUT_EVENT,ze),nextTick(()=>{oe.value.checked=xe.value})},$e=()=>{if(j.value)return;const{beforeChange:ze}=g;if(!ze){Ne();return}const Ue=ze();[isPromise(Ue),isBoolean$1(Ue)].includes(!0)||throwError(COMPONENT_NAME$8,"beforeChange must return type `Promise<boolean>` or `boolean`"),isPromise(Ue)?Ue.then(hn=>{hn&&Ne()}).catch(hn=>{}):Ue&&Ne()},Ce=computed(()=>V.cssVarBlock({...g.activeColor?{"on-color":g.activeColor}:null,...g.inactiveColor?{"off-color":g.inactiveColor}:null,...g.borderColor?{"border-color":g.borderColor}:null})),Ie=()=>{var ze,Ue;(Ue=(ze=oe.value)==null?void 0:ze.focus)==null||Ue.call(ze)};return onMounted(()=>{oe.value.checked=xe.value}),n({focus:Ie,checked:xe}),(ze,Ue)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(ue)),style:normalizeStyle(unref(Ce)),onClick:withModifiers($e,["prevent"])},[createBaseVNode("input",{id:unref(z),ref_key:"input",ref:oe,class:normalizeClass(unref(V).e("input")),type:"checkbox",role:"switch","aria-checked":unref(xe),"aria-disabled":unref(j),name:ze.name,"true-value":ze.activeValue,"false-value":ze.inactiveValue,disabled:unref(j),tabindex:ze.tabindex,onChange:Ne,onKeydown:withKeys($e,["enter"])},null,42,_hoisted_2$1m),!ze.inlinePrompt&&(ze.inactiveIcon||ze.inactiveText)?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(le))},[ze.inactiveIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ze.inactiveIcon)))]),_:1})):createCommentVNode("v-if",!0),!ze.inactiveIcon&&ze.inactiveText?(openBlock(),createElementBlock("span",{key:1,"aria-hidden":unref(xe)},toDisplayString$1(ze.inactiveText),9,_hoisted_3$S)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("span",{ref_key:"core",ref:re,class:normalizeClass(unref(V).e("core")),style:normalizeStyle(unref(he))},[ze.inlinePrompt?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(V).e("inner"))},[ze.activeIcon||ze.inactiveIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(V).is("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(xe)?ze.activeIcon:ze.inactiveIcon)))]),_:1},8,["class"])):ze.activeText||ze.inactiveText?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(V).is("text")),"aria-hidden":!unref(xe)},toDisplayString$1(unref(xe)?ze.activeText:ze.inactiveText),11,_hoisted_4$K)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(V).e("action"))},[ze.loading?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(V).is("loading"))},{default:withCtx(()=>[createVNode(unref(loading_default))]),_:1},8,["class"])):ze.activeActionIcon&&unref(xe)?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ze.activeActionIcon)))]),_:1})):ze.inactiveActionIcon&&!unref(xe)?(openBlock(),createBlock(unref(ElIcon),{key:2},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ze.inactiveActionIcon)))]),_:1})):createCommentVNode("v-if",!0)],2)],6),!ze.inlinePrompt&&(ze.activeIcon||ze.activeText)?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(de))},[ze.activeIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ze.activeIcon)))]),_:1})):createCommentVNode("v-if",!0),!ze.activeIcon&&ze.activeText?(openBlock(),createElementBlock("span",{key:1,"aria-hidden":!unref(xe)},toDisplayString$1(ze.activeText),9,_hoisted_5$B)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0)],14,_hoisted_1$1t))}});var Switch=_export_sfc$1(_sfc_main$1J,[["__file","/home/runner/work/element-plus/element-plus/packages/components/switch/src/switch.vue"]]);const ElSwitch=withInstall(Switch);/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var matchHtmlRegExp=/["'&<>]/,escapeHtml_1=escapeHtml$1;function escapeHtml$1(e){var n=""+e,r=matchHtmlRegExp.exec(n);if(!r)return n;var g,y="",k=0,$=0;for(k=r.index;k<n.length;k++){switch(n.charCodeAt(k)){case 34:g="&quot;";break;case 38:g="&amp;";break;case 39:g="&#39;";break;case 60:g="&lt;";break;case 62:g="&gt;";break;default:continue}$!==k&&(y+=n.substring($,k)),$=k+1,y+=g}return $!==k?y+n.substring($,k):y}const escapeHtml$2=getDefaultExportFromCjs(escapeHtml_1),getCell=function(e){var n;return(n=e.target)==null?void 0:n.closest("td")},orderBy=function(e,n,r,g,y){if(!n&&!g&&(!y||Array.isArray(y)&&!y.length))return e;typeof r=="string"?r=r==="descending"?-1:1:r=r&&r<0?-1:1;const k=g?null:function(V,L){return y?(Array.isArray(y)||(y=[y]),y.map(z=>typeof z=="string"?get(V,z):z(V,L,e))):(n!=="$key"&&isObject$3(V)&&"$value"in V&&(V=V.$value),[isObject$3(V)?get(V,n):V])},$=function(V,L){if(g)return g(V.value,L.value);for(let z=0,j=V.key.length;z<j;z++){if(V.key[z]<L.key[z])return-1;if(V.key[z]>L.key[z])return 1}return 0};return e.map((V,L)=>({value:V,index:L,key:k?k(V,L):null})).sort((V,L)=>{let z=$(V,L);return z||(z=V.index-L.index),z*+r}).map(V=>V.value)},getColumnById=function(e,n){let r=null;return e.columns.forEach(g=>{g.id===n&&(r=g)}),r},getColumnByKey=function(e,n){let r=null;for(let g=0;g<e.columns.length;g++){const y=e.columns[g];if(y.columnKey===n){r=y;break}}return r||throwError("ElTable",`No column matching with column-key: ${n}`),r},getColumnByCell=function(e,n,r){const g=(n.className||"").match(new RegExp(`${r}-table_[^\\s]+`,"gm"));return g?getColumnById(e,g[0]):null},getRowIdentity=(e,n)=>{if(!e)throw new Error("Row is required when get row identity");if(typeof n=="string"){if(!n.includes("."))return`${e[n]}`;const r=n.split(".");let g=e;for(const y of r)g=g[y];return`${g}`}else if(typeof n=="function")return n.call(null,e)},getKeysMap=function(e,n){const r={};return(e||[]).forEach((g,y)=>{r[getRowIdentity(g,n)]={row:g,index:y}}),r};function mergeOptions(e,n){const r={};let g;for(g in e)r[g]=e[g];for(g in n)if(hasOwn$1(n,g)){const y=n[g];typeof y<"u"&&(r[g]=y)}return r}function parseWidth(e){return e===""||e!==void 0&&(e=Number.parseInt(e,10),Number.isNaN(e)&&(e="")),e}function parseMinWidth(e){return e===""||e!==void 0&&(e=parseWidth(e),Number.isNaN(e)&&(e=80)),e}function parseHeight(e){return typeof e=="number"?e:typeof e=="string"?/^\d+(?:px)?$/.test(e)?Number.parseInt(e,10):e:null}function compose(...e){return e.length===0?n=>n:e.length===1?e[0]:e.reduce((n,r)=>(...g)=>n(r(...g)))}function toggleRowStatus(e,n,r){let g=!1;const y=e.indexOf(n),k=y!==-1,$=V=>{V==="add"?e.push(n):e.splice(y,1),g=!0,isArray$3(n.children)&&n.children.forEach(L=>{toggleRowStatus(e,L,r??!k)})};return isBoolean$1(r)?r&&!k?$("add"):!r&&k&&$("remove"):$(k?"remove":"add"),g}function walkTreeNode(e,n,r="children",g="hasChildren"){const y=$=>!(Array.isArray($)&&$.length);function k($,V,L){n($,V,L),V.forEach(z=>{if(z[g]){n(z,null,L+1);return}const j=z[r];y(j)||k(z,j,L+1)})}e.forEach($=>{if($[g]){n($,null,0);return}const V=$[r];y(V)||k($,V,0)})}let removePopper;function createTablePopper(e,n,r,g,y){y=merge$1({enterable:!0,showArrow:!0},y);const k=e?.dataset.prefix,$=e?.querySelector(`.${k}-scrollbar__wrap`);function V(){const de=y.effect==="light",he=document.createElement("div");return he.className=[`${k}-popper`,de?"is-light":"is-dark",y.popperClass||""].join(" "),r=escapeHtml$2(r),he.innerHTML=r,he.style.zIndex=String(g()),e?.appendChild(he),he}function L(){const de=document.createElement("div");return de.className=`${k}-popper__arrow`,de}function z(){j&&j.update()}removePopper?.(),removePopper=()=>{try{j&&j.destroy(),re&&e?.removeChild(re),n.removeEventListener("mouseenter",ae),n.removeEventListener("mouseleave",oe),$?.removeEventListener("scroll",removePopper),removePopper=void 0}catch{}};let j=null,ae=z,oe=removePopper;y.enterable&&({onOpen:ae,onClose:oe}=useDelayedToggle({showAfter:y.showAfter,hideAfter:y.hideAfter,open:z,close:removePopper}));const re=V();re.onmouseenter=ae,re.onmouseleave=oe;const ue=[];if(y.offset&&ue.push({name:"offset",options:{offset:[0,y.offset]}}),y.showArrow){const de=re.appendChild(L());ue.push({name:"arrow",options:{element:de,padding:10}})}const le=y.popperOptions||{};return j=yn(n,re,{placement:y.placement||"top",strategy:"fixed",...le,modifiers:le.modifiers?ue.concat(le.modifiers):ue}),n.addEventListener("mouseenter",ae),n.addEventListener("mouseleave",oe),$?.addEventListener("scroll",removePopper),j}function getCurrentColumns(e){return e.children?flatMap(e.children,getCurrentColumns):[e]}function getColSpan(e,n){return e+n.colSpan}const isFixedColumn=(e,n,r,g)=>{let y=0,k=e;const $=r.states.columns.value;if(g){const L=getCurrentColumns(g[e]);y=$.slice(0,$.indexOf(L[0])).reduce(getColSpan,0),k=y+L.reduce(getColSpan,0)-1}else y=e;let V;switch(n){case"left":k<r.states.fixedLeafColumnsLength.value&&(V="left");break;case"right":y>=$.length-r.states.rightFixedLeafColumnsLength.value&&(V="right");break;default:k<r.states.fixedLeafColumnsLength.value?V="left":y>=$.length-r.states.rightFixedLeafColumnsLength.value&&(V="right")}return V?{direction:V,start:y,after:k}:{}},getFixedColumnsClass=(e,n,r,g,y,k=0)=>{const $=[],{direction:V,start:L,after:z}=isFixedColumn(n,r,g,y);if(V){const j=V==="left";$.push(`${e}-fixed-column--${V}`),j&&z+k===g.states.fixedLeafColumnsLength.value-1?$.push("is-last-column"):!j&&L-k===g.states.columns.value.length-g.states.rightFixedLeafColumnsLength.value&&$.push("is-first-column")}return $};function getOffset$1(e,n){return e+(n.realWidth===null||Number.isNaN(n.realWidth)?Number(n.width):n.realWidth)}const getFixedColumnOffset=(e,n,r,g)=>{const{direction:y,start:k=0,after:$=0}=isFixedColumn(e,n,r,g);if(!y)return;const V={},L=y==="left",z=r.states.columns.value;return L?V.left=z.slice(0,k).reduce(getOffset$1,0):V.right=z.slice($+1).reverse().reduce(getOffset$1,0),V},ensurePosition=(e,n)=>{e&&(Number.isNaN(e[n])||(e[n]=`${e[n]}px`))};function useExpand(e){const n=getCurrentInstance(),r=ref(!1),g=ref([]);return{updateExpandRows:()=>{const L=e.data.value||[],z=e.rowKey.value;if(r.value)g.value=L.slice();else if(z){const j=getKeysMap(g.value,z);g.value=L.reduce((ae,oe)=>{const re=getRowIdentity(oe,z);return j[re]&&ae.push(oe),ae},[])}else g.value=[]},toggleRowExpansion:(L,z)=>{toggleRowStatus(g.value,L,z)&&n.emit("expand-change",L,g.value.slice())},setExpandRowKeys:L=>{n.store.assertRowKey();const z=e.data.value||[],j=e.rowKey.value,ae=getKeysMap(z,j);g.value=L.reduce((oe,re)=>{const ue=ae[re];return ue&&oe.push(ue.row),oe},[])},isRowExpanded:L=>{const z=e.rowKey.value;return z?!!getKeysMap(g.value,z)[getRowIdentity(L,z)]:g.value.includes(L)},states:{expandRows:g,defaultExpandAll:r}}}function useCurrent(e){const n=getCurrentInstance(),r=ref(null),g=ref(null),y=z=>{n.store.assertRowKey(),r.value=z,$(z)},k=()=>{r.value=null},$=z=>{const{data:j,rowKey:ae}=e;let oe=null;ae.value&&(oe=(unref(j)||[]).find(re=>getRowIdentity(re,ae.value)===z)),g.value=oe,n.emit("current-change",g.value,null)};return{setCurrentRowKey:y,restoreCurrentRowKey:k,setCurrentRowByKey:$,updateCurrentRow:z=>{const j=g.value;if(z&&z!==j){g.value=z,n.emit("current-change",g.value,j);return}!z&&j&&(g.value=null,n.emit("current-change",null,j))},updateCurrentRowData:()=>{const z=e.rowKey.value,j=e.data.value||[],ae=g.value;if(!j.includes(ae)&&ae){if(z){const oe=getRowIdentity(ae,z);$(oe)}else g.value=null;g.value===null&&n.emit("current-change",null,ae)}else r.value&&($(r.value),k())},states:{_currentRowKey:r,currentRow:g}}}function useTree$2(e){const n=ref([]),r=ref({}),g=ref(16),y=ref(!1),k=ref({}),$=ref("hasChildren"),V=ref("children"),L=getCurrentInstance(),z=computed(()=>{if(!e.rowKey.value)return{};const he=e.data.value||[];return ae(he)}),j=computed(()=>{const he=e.rowKey.value,_e=Object.keys(k.value),xe={};return _e.length&&_e.forEach(Ne=>{if(k.value[Ne].length){const $e={children:[]};k.value[Ne].forEach(Ce=>{const Ie=getRowIdentity(Ce,he);$e.children.push(Ie),Ce[$.value]&&!xe[Ie]&&(xe[Ie]={children:[]})}),xe[Ne]=$e}}),xe}),ae=he=>{const _e=e.rowKey.value,xe={};return walkTreeNode(he,(Ne,$e,Ce)=>{const Ie=getRowIdentity(Ne,_e);Array.isArray($e)?xe[Ie]={children:$e.map(ze=>getRowIdentity(ze,_e)),level:Ce}:y.value&&(xe[Ie]={children:[],lazy:!0,level:Ce})},V.value,$.value),xe},oe=(he=!1,_e=(xe=>(xe=L.store)==null?void 0:xe.states.defaultExpandAll.value)())=>{var xe;const Ne=z.value,$e=j.value,Ce=Object.keys(Ne),Ie={};if(Ce.length){const ze=unref(r),Ue=[],Pt=(Dt,xn)=>{if(he)return n.value?_e||n.value.includes(xn):!!(_e||Dt?.expanded);{const jt=_e||n.value&&n.value.includes(xn);return!!(Dt?.expanded||jt)}};Ce.forEach(Dt=>{const xn=ze[Dt],jt={...Ne[Dt]};if(jt.expanded=Pt(xn,Dt),jt.lazy){const{loaded:Vn=!1,loading:Rn=!1}=xn||{};jt.loaded=!!Vn,jt.loading=!!Rn,Ue.push(Dt)}Ie[Dt]=jt});const hn=Object.keys($e);y.value&&hn.length&&Ue.length&&hn.forEach(Dt=>{const xn=ze[Dt],jt=$e[Dt].children;if(Ue.includes(Dt)){if(Ie[Dt].children.length!==0)throw new Error("[ElTable]children must be an empty array.");Ie[Dt].children=jt}else{const{loaded:Vn=!1,loading:Rn=!1}=xn||{};Ie[Dt]={lazy:!0,loaded:!!Vn,loading:!!Rn,expanded:Pt(xn,Dt),children:jt,level:""}}})}r.value=Ie,(xe=L.store)==null||xe.updateTableScrollY()};watch(()=>n.value,()=>{oe(!0)}),watch(()=>z.value,()=>{oe()}),watch(()=>j.value,()=>{oe()});const re=he=>{n.value=he,oe()},ue=(he,_e)=>{L.store.assertRowKey();const xe=e.rowKey.value,Ne=getRowIdentity(he,xe),$e=Ne&&r.value[Ne];if(Ne&&$e&&"expanded"in $e){const Ce=$e.expanded;_e=typeof _e>"u"?!$e.expanded:_e,r.value[Ne].expanded=_e,Ce!==_e&&L.emit("expand-change",he,_e),L.store.updateTableScrollY()}},le=he=>{L.store.assertRowKey();const _e=e.rowKey.value,xe=getRowIdentity(he,_e),Ne=r.value[xe];y.value&&Ne&&"loaded"in Ne&&!Ne.loaded?de(he,xe,Ne):ue(he,void 0)},de=(he,_e,xe)=>{const{load:Ne}=L.props;Ne&&!r.value[_e].loaded&&(r.value[_e].loading=!0,Ne(he,xe,$e=>{if(!Array.isArray($e))throw new TypeError("[ElTable] data must be an array");r.value[_e].loading=!1,r.value[_e].loaded=!0,r.value[_e].expanded=!0,$e.length&&(k.value[_e]=$e),L.emit("expand-change",he,!0)}))};return{loadData:de,loadOrToggle:le,toggleTreeExpansion:ue,updateTreeExpandKeys:re,updateTreeData:oe,normalize:ae,states:{expandRowKeys:n,treeData:r,indent:g,lazy:y,lazyTreeNodeMap:k,lazyColumnIdentifier:$,childrenColumnName:V}}}const sortData=(e,n)=>{const r=n.sortingColumn;return!r||typeof r.sortable=="string"?e:orderBy(e,n.sortProp,n.sortOrder,r.sortMethod,r.sortBy)},doFlattenColumns=e=>{const n=[];return e.forEach(r=>{r.children&&r.children.length>0?n.push.apply(n,doFlattenColumns(r.children)):n.push(r)}),n};function useWatcher$1(){var e;const n=getCurrentInstance(),{size:r}=toRefs((e=n.proxy)==null?void 0:e.$props),g=ref(null),y=ref([]),k=ref([]),$=ref(!1),V=ref([]),L=ref([]),z=ref([]),j=ref([]),ae=ref([]),oe=ref([]),re=ref([]),ue=ref([]),le=[],de=ref(0),he=ref(0),_e=ref(0),xe=ref(!1),Ne=ref([]),$e=ref(!1),Ce=ref(!1),Ie=ref(null),ze=ref({}),Ue=ref(null),Pt=ref(null),hn=ref(null),Dt=ref(null),xn=ref(null);watch(y,()=>n.state&&Tn(!1),{deep:!0});const jt=()=>{if(!g.value)throw new Error("[ElTable] prop row-key is required")},Vn=Et=>{var Lt;(Lt=Et.children)==null||Lt.forEach(_n=>{_n.fixed=Et.fixed,Vn(_n)})},Rn=()=>{V.value.forEach(wn=>{Vn(wn)}),j.value=V.value.filter(wn=>wn.fixed===!0||wn.fixed==="left"),ae.value=V.value.filter(wn=>wn.fixed==="right"),j.value.length>0&&V.value[0]&&V.value[0].type==="selection"&&!V.value[0].fixed&&(V.value[0].fixed=!0,j.value.unshift(V.value[0]));const Et=V.value.filter(wn=>!wn.fixed);L.value=[].concat(j.value).concat(Et).concat(ae.value);const Lt=doFlattenColumns(Et),_n=doFlattenColumns(j.value),vn=doFlattenColumns(ae.value);de.value=Lt.length,he.value=_n.length,_e.value=vn.length,z.value=[].concat(_n).concat(Lt).concat(vn),$.value=j.value.length>0||ae.value.length>0},Tn=(Et,Lt=!1)=>{Et&&Rn(),Lt?n.state.doLayout():n.state.debouncedUpdateLayout()},Ln=Et=>Ne.value.includes(Et),Sn=()=>{xe.value=!1,Ne.value.length&&(Ne.value=[],n.emit("selection-change",[]))},An=()=>{let Et;if(g.value){Et=[];const Lt=getKeysMap(Ne.value,g.value),_n=getKeysMap(y.value,g.value);for(const vn in Lt)hasOwn$1(Lt,vn)&&!_n[vn]&&Et.push(Lt[vn].row)}else Et=Ne.value.filter(Lt=>!y.value.includes(Lt));if(Et.length){const Lt=Ne.value.filter(_n=>!Et.includes(_n));Ne.value=Lt,n.emit("selection-change",Lt.slice())}},In=()=>(Ne.value||[]).slice(),Mn=(Et,Lt=void 0,_n=!0)=>{if(toggleRowStatus(Ne.value,Et,Lt)){const wn=(Ne.value||[]).slice();_n&&n.emit("select",wn,Et),n.emit("selection-change",wn)}},ra=()=>{var Et,Lt;const _n=Ce.value?!xe.value:!(xe.value||Ne.value.length);xe.value=_n;let vn=!1,wn=0;const Cn=(Lt=(Et=n?.store)==null?void 0:Et.states)==null?void 0:Lt.rowKey.value;y.value.forEach((Bn,zn)=>{const Fn=zn+wn;Ie.value?Ie.value.call(null,Bn,Fn)&&toggleRowStatus(Ne.value,Bn,_n)&&(vn=!0):toggleRowStatus(Ne.value,Bn,_n)&&(vn=!0),wn+=aa(getRowIdentity(Bn,Cn))}),vn&&n.emit("selection-change",Ne.value?Ne.value.slice():[]),n.emit("select-all",Ne.value)},da=()=>{const Et=getKeysMap(Ne.value,g.value);y.value.forEach(Lt=>{const _n=getRowIdentity(Lt,g.value),vn=Et[_n];vn&&(Ne.value[vn.index]=Lt)})},ua=()=>{var Et,Lt,_n;if(((Et=y.value)==null?void 0:Et.length)===0){xe.value=!1;return}let vn;g.value&&(vn=getKeysMap(Ne.value,g.value));const wn=function(Fn){return vn?!!vn[getRowIdentity(Fn,g.value)]:Ne.value.includes(Fn)};let Cn=!0,Bn=0,zn=0;for(let Fn=0,Gn=(y.value||[]).length;Fn<Gn;Fn++){const Kn=(_n=(Lt=n?.store)==null?void 0:Lt.states)==null?void 0:_n.rowKey.value,Wn=Fn+zn,ea=y.value[Fn],Pn=Ie.value&&Ie.value.call(null,ea,Wn);if(wn(ea))Bn++;else if(!Ie.value||Pn){Cn=!1;break}zn+=aa(getRowIdentity(ea,Kn))}Bn===0&&(Cn=!1),xe.value=Cn},aa=Et=>{var Lt;if(!n||!n.store)return 0;const{treeData:_n}=n.store.states;let vn=0;const wn=(Lt=_n.value[Et])==null?void 0:Lt.children;return wn&&(vn+=wn.length,wn.forEach(Cn=>{vn+=aa(Cn)})),vn},Nn=(Et,Lt)=>{Array.isArray(Et)||(Et=[Et]);const _n={};return Et.forEach(vn=>{ze.value[vn.id]=Lt,_n[vn.columnKey||vn.id]=Lt}),_n},En=(Et,Lt,_n)=>{Pt.value&&Pt.value!==Et&&(Pt.value.order=null),Pt.value=Et,hn.value=Lt,Dt.value=_n},Zn=()=>{let Et=unref(k);Object.keys(ze.value).forEach(Lt=>{const _n=ze.value[Lt];if(!_n||_n.length===0)return;const vn=getColumnById({columns:z.value},Lt);vn&&vn.filterMethod&&(Et=Et.filter(wn=>_n.some(Cn=>vn.filterMethod.call(null,Cn,wn,vn))))}),Ue.value=Et},ha=()=>{y.value=sortData(Ue.value,{sortingColumn:Pt.value,sortProp:hn.value,sortOrder:Dt.value})},xa=(Et=void 0)=>{Et&&Et.filter||Zn(),ha()},sa=Et=>{const{tableHeaderRef:Lt}=n.refs;if(!Lt)return;const _n=Object.assign({},Lt.filterPanels),vn=Object.keys(_n);if(vn.length)if(typeof Et=="string"&&(Et=[Et]),Array.isArray(Et)){const wn=Et.map(Cn=>getColumnByKey({columns:z.value},Cn));vn.forEach(Cn=>{const Bn=wn.find(zn=>zn.id===Cn);Bn&&(Bn.filteredValue=[])}),n.store.commit("filterChange",{column:wn,values:[],silent:!0,multi:!0})}else vn.forEach(wn=>{const Cn=z.value.find(Bn=>Bn.id===wn);Cn&&(Cn.filteredValue=[])}),ze.value={},n.store.commit("filterChange",{column:{},values:[],silent:!0})},Hn=()=>{Pt.value&&(En(null,null,null),n.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:bn,toggleRowExpansion:Xn,updateExpandRows:$n,states:kt,isRowExpanded:At}=useExpand({data:y,rowKey:g}),{updateTreeExpandKeys:Dn,toggleTreeExpansion:Qn,updateTreeData:oa,loadOrToggle:na,states:la}=useTree$2({data:y,rowKey:g}),{updateCurrentRowData:ma,updateCurrentRow:ca,setCurrentRowKey:pe,states:Oe}=useCurrent({data:y,rowKey:g});return{assertRowKey:jt,updateColumns:Rn,scheduleLayout:Tn,isSelected:Ln,clearSelection:Sn,cleanSelection:An,getSelectionRows:In,toggleRowSelection:Mn,_toggleAllSelection:ra,toggleAllSelection:null,updateSelectionByRowKey:da,updateAllSelected:ua,updateFilters:Nn,updateCurrentRow:ca,updateSort:En,execFilter:Zn,execSort:ha,execQuery:xa,clearFilter:sa,clearSort:Hn,toggleRowExpansion:Xn,setExpandRowKeysAdapter:Et=>{bn(Et),Dn(Et)},setCurrentRowKey:pe,toggleRowExpansionAdapter:(Et,Lt)=>{z.value.some(({type:vn})=>vn==="expand")?Xn(Et,Lt):Qn(Et,Lt)},isRowExpanded:At,updateExpandRows:$n,updateCurrentRowData:ma,loadOrToggle:na,updateTreeData:oa,states:{tableSize:r,rowKey:g,data:y,_data:k,isComplex:$,_columns:V,originColumns:L,columns:z,fixedColumns:j,rightFixedColumns:ae,leafColumns:oe,fixedLeafColumns:re,rightFixedLeafColumns:ue,updateOrderFns:le,leafColumnsLength:de,fixedLeafColumnsLength:he,rightFixedLeafColumnsLength:_e,isAllSelected:xe,selection:Ne,reserveSelection:$e,selectOnIndeterminate:Ce,selectable:Ie,filters:ze,filteredData:Ue,sortingColumn:Pt,sortProp:hn,sortOrder:Dt,hoverRow:xn,...kt,...la,...Oe}}}function replaceColumn(e,n){return e.map(r=>{var g;return r.id===n.id?n:((g=r.children)!=null&&g.length&&(r.children=replaceColumn(r.children,n)),r)})}function sortColumn(e){e.forEach(n=>{var r,g;n.no=(r=n.getColumnIndex)==null?void 0:r.call(n),(g=n.children)!=null&&g.length&&sortColumn(n.children)}),e.sort((n,r)=>n.no-r.no)}function useStore(){const e=getCurrentInstance(),n=useWatcher$1();return{ns:useNamespace("table"),...n,mutations:{setData($,V){const L=unref($._data)!==V;$.data.value=V,$._data.value=V,e.store.execQuery(),e.store.updateCurrentRowData(),e.store.updateExpandRows(),e.store.updateTreeData(e.store.states.defaultExpandAll.value),unref($.reserveSelection)?(e.store.assertRowKey(),e.store.updateSelectionByRowKey()):L?e.store.clearSelection():e.store.cleanSelection(),e.store.updateAllSelected(),e.$ready&&e.store.scheduleLayout()},insertColumn($,V,L,z){const j=unref($._columns);let ae=[];L?(L&&!L.children&&(L.children=[]),L.children.push(V),ae=replaceColumn(j,L)):(j.push(V),ae=j),sortColumn(ae),$._columns.value=ae,$.updateOrderFns.push(z),V.type==="selection"&&($.selectable.value=V.selectable,$.reserveSelection.value=V.reserveSelection),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},updateColumnOrder($,V){var L;((L=V.getColumnIndex)==null?void 0:L.call(V))!==V.no&&(sortColumn($._columns.value),e.$ready&&e.store.updateColumns())},removeColumn($,V,L,z){const j=unref($._columns)||[];if(L)L.children.splice(L.children.findIndex(oe=>oe.id===V.id),1),nextTick(()=>{var oe;((oe=L.children)==null?void 0:oe.length)===0&&delete L.children}),$._columns.value=replaceColumn(j,L);else{const oe=j.indexOf(V);oe>-1&&(j.splice(oe,1),$._columns.value=j)}const ae=$.updateOrderFns.indexOf(z);ae>-1&&$.updateOrderFns.splice(ae,1),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},sort($,V){const{prop:L,order:z,init:j}=V;if(L){const ae=unref($.columns).find(oe=>oe.property===L);ae&&(ae.order=z,e.store.updateSort(ae,L,z),e.store.commit("changeSortCondition",{init:j}))}},changeSortCondition($,V){const{sortingColumn:L,sortProp:z,sortOrder:j}=$,ae=unref(L),oe=unref(z),re=unref(j);re===null&&($.sortingColumn.value=null,$.sortProp.value=null);const ue={filter:!0};e.store.execQuery(ue),(!V||!(V.silent||V.init))&&e.emit("sort-change",{column:ae,prop:oe,order:re}),e.store.updateTableScrollY()},filterChange($,V){const{column:L,values:z,silent:j}=V,ae=e.store.updateFilters(L,z);e.store.execQuery(),j||e.emit("filter-change",ae),e.store.updateTableScrollY()},toggleAllSelection(){e.store.toggleAllSelection()},rowSelectedChanged($,V){e.store.toggleRowSelection(V),e.store.updateAllSelected()},setHoverRow($,V){$.hoverRow.value=V},setCurrentRow($,V){e.store.updateCurrentRow(V)}},commit:function($,...V){const L=e.store.mutations;if(L[$])L[$].apply(e,[e.store.states].concat(V));else throw new Error(`Action not found: ${$}`)},updateTableScrollY:function(){nextTick(()=>e.layout.updateScrollY.apply(e.layout))}}}const InitialStateMap={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"}};function createStore(e,n){if(!e)throw new Error("Table is required.");const r=useStore();return r.toggleAllSelection=debounce(r._toggleAllSelection,10),Object.keys(InitialStateMap).forEach(g=>{handleValue(getArrKeysValue(n,g),g,r)}),proxyTableProps(r,n),r}function proxyTableProps(e,n){Object.keys(InitialStateMap).forEach(r=>{watch(()=>getArrKeysValue(n,r),g=>{handleValue(g,r,e)})})}function handleValue(e,n,r){let g=e,y=InitialStateMap[n];typeof InitialStateMap[n]=="object"&&(y=y.key,g=g||InitialStateMap[n].default),r.states[y].value=g}function getArrKeysValue(e,n){if(n.includes(".")){const r=n.split(".");let g=e;return r.forEach(y=>{g=g[y]}),g}else return e[n]}class TableLayout{constructor(n){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=ref(null),this.scrollX=ref(!1),this.scrollY=ref(!1),this.bodyWidth=ref(null),this.fixedWidth=ref(null),this.rightFixedWidth=ref(null),this.gutterWidth=0;for(const r in n)hasOwn$1(n,r)&&(isRef(this[r])?this[r].value=n[r]:this[r]=n[r]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const r=this.table.refs.scrollBarRef;if(this.table.vnode.el&&r?.wrapRef){let g=!0;const y=this.scrollY.value;return g=r.wrapRef.scrollHeight>r.wrapRef.clientHeight,this.scrollY.value=g,y!==g}return!1}setHeight(n,r="height"){if(!isClient)return;const g=this.table.vnode.el;if(n=parseHeight(n),this.height.value=Number(n),!g&&(n||n===0))return nextTick(()=>this.setHeight(n,r));typeof n=="number"?(g.style[r]=`${n}px`,this.updateElsHeight()):typeof n=="string"&&(g.style[r]=n,this.updateElsHeight())}setMaxHeight(n){this.setHeight(n,"max-height")}getFlattenColumns(){const n=[];return this.table.store.states.columns.value.forEach(g=>{g.isColumnGroup?n.push.apply(n,g.columns):n.push(g)}),n}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(n){if(!n)return!0;let r=n;for(;r.tagName!=="DIV";){if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1}updateColumnsWidth(){if(!isClient)return;const n=this.fit,r=this.table.vnode.el.clientWidth;let g=0;const y=this.getFlattenColumns(),k=y.filter(L=>typeof L.width!="number");if(y.forEach(L=>{typeof L.width=="number"&&L.realWidth&&(L.realWidth=null)}),k.length>0&&n){if(y.forEach(L=>{g+=Number(L.width||L.minWidth||80)}),g<=r){this.scrollX.value=!1;const L=r-g;if(k.length===1)k[0].realWidth=Number(k[0].minWidth||80)+L;else{const z=k.reduce((oe,re)=>oe+Number(re.minWidth||80),0),j=L/z;let ae=0;k.forEach((oe,re)=>{if(re===0)return;const ue=Math.floor(Number(oe.minWidth||80)*j);ae+=ue,oe.realWidth=Number(oe.minWidth||80)+ue}),k[0].realWidth=Number(k[0].minWidth||80)+L-ae}}else this.scrollX.value=!0,k.forEach(L=>{L.realWidth=Number(L.minWidth)});this.bodyWidth.value=Math.max(g,r),this.table.state.resizeState.value.width=this.bodyWidth.value}else y.forEach(L=>{!L.width&&!L.minWidth?L.realWidth=80:L.realWidth=Number(L.width||L.minWidth),g+=L.realWidth}),this.scrollX.value=g>r,this.bodyWidth.value=g;const $=this.store.states.fixedColumns.value;if($.length>0){let L=0;$.forEach(z=>{L+=Number(z.realWidth||z.width)}),this.fixedWidth.value=L}const V=this.store.states.rightFixedColumns.value;if(V.length>0){let L=0;V.forEach(z=>{L+=Number(z.realWidth||z.width)}),this.rightFixedWidth.value=L}this.notifyObservers("columns")}addObserver(n){this.observers.push(n)}removeObserver(n){const r=this.observers.indexOf(n);r!==-1&&this.observers.splice(r,1)}notifyObservers(n){this.observers.forEach(g=>{var y,k;switch(n){case"columns":(y=g.state)==null||y.onColumnsChange(this);break;case"scrollable":(k=g.state)==null||k.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${n}.`)}})}}const{CheckboxGroup:ElCheckboxGroup}=ElCheckbox,_sfc_main$1I=defineComponent({name:"ElTableFilterPanel",components:{ElCheckbox,ElCheckboxGroup,ElScrollbar,ElTooltip,ElIcon,ArrowDown:arrow_down_default,ArrowUp:arrow_up_default},directives:{ClickOutside},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(e){const n=getCurrentInstance(),{t:r}=useLocale(),g=useNamespace("table-filter"),y=n?.parent;y.filterPanels.value[e.column.id]||(y.filterPanels.value[e.column.id]=n);const k=ref(!1),$=ref(null),V=computed(()=>e.column&&e.column.filters),L=computed({get:()=>{var Ne;return(((Ne=e.column)==null?void 0:Ne.filteredValue)||[])[0]},set:Ne=>{z.value&&(typeof Ne<"u"&&Ne!==null?z.value.splice(0,1,Ne):z.value.splice(0,1))}}),z=computed({get(){return e.column?e.column.filteredValue||[]:[]},set(Ne){e.column&&e.upDataColumn("filteredValue",Ne)}}),j=computed(()=>e.column?e.column.filterMultiple:!0),ae=Ne=>Ne.value===L.value,oe=()=>{k.value=!1},re=Ne=>{Ne.stopPropagation(),k.value=!k.value},ue=()=>{k.value=!1},le=()=>{_e(z.value),oe()},de=()=>{z.value=[],_e(z.value),oe()},he=Ne=>{L.value=Ne,_e(typeof Ne<"u"&&Ne!==null?z.value:[]),oe()},_e=Ne=>{e.store.commit("filterChange",{column:e.column,values:Ne}),e.store.updateAllSelected()};watch(k,Ne=>{e.column&&e.upDataColumn("filterOpened",Ne)},{immediate:!0});const xe=computed(()=>{var Ne,$e;return($e=(Ne=$.value)==null?void 0:Ne.popperRef)==null?void 0:$e.contentRef});return{tooltipVisible:k,multiple:j,filteredValue:z,filterValue:L,filters:V,handleConfirm:le,handleReset:de,handleSelect:he,isActive:ae,t:r,ns:g,showFilterPanel:re,hideFilterPanel:ue,popperPaneRef:xe,tooltip:$}}}),_hoisted_1$1s={key:0},_hoisted_2$1l=["disabled"],_hoisted_3$R=["label","onClick"];function _sfc_render$4(e,n,r,g,y,k){const $=resolveComponent("el-checkbox"),V=resolveComponent("el-checkbox-group"),L=resolveComponent("el-scrollbar"),z=resolveComponent("arrow-up"),j=resolveComponent("arrow-down"),ae=resolveComponent("el-icon"),oe=resolveComponent("el-tooltip"),re=resolveDirective("click-outside");return openBlock(),createBlock(oe,{ref:"tooltip",visible:e.tooltipVisible,offset:0,placement:e.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":e.ns.b(),persistent:""},{content:withCtx(()=>[e.multiple?(openBlock(),createElementBlock("div",_hoisted_1$1s,[createBaseVNode("div",{class:normalizeClass(e.ns.e("content"))},[createVNode(L,{"wrap-class":e.ns.e("wrap")},{default:withCtx(()=>[createVNode(V,{modelValue:e.filteredValue,"onUpdate:modelValue":n[0]||(n[0]=ue=>e.filteredValue=ue),class:normalizeClass(e.ns.e("checkbox-group"))},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.filters,ue=>(openBlock(),createBlock($,{key:ue.value,label:ue.value},{default:withCtx(()=>[createTextVNode(toDisplayString$1(ue.text),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","class"])]),_:1},8,["wrap-class"])],2),createBaseVNode("div",{class:normalizeClass(e.ns.e("bottom"))},[createBaseVNode("button",{class:normalizeClass({[e.ns.is("disabled")]:e.filteredValue.length===0}),disabled:e.filteredValue.length===0,type:"button",onClick:n[1]||(n[1]=(...ue)=>e.handleConfirm&&e.handleConfirm(...ue))},toDisplayString$1(e.t("el.table.confirmFilter")),11,_hoisted_2$1l),createBaseVNode("button",{type:"button",onClick:n[2]||(n[2]=(...ue)=>e.handleReset&&e.handleReset(...ue))},toDisplayString$1(e.t("el.table.resetFilter")),1)],2)])):(openBlock(),createElementBlock("ul",{key:1,class:normalizeClass(e.ns.e("list"))},[createBaseVNode("li",{class:normalizeClass([e.ns.e("list-item"),{[e.ns.is("active")]:e.filterValue===void 0||e.filterValue===null}]),onClick:n[3]||(n[3]=ue=>e.handleSelect(null))},toDisplayString$1(e.t("el.table.clearFilter")),3),(openBlock(!0),createElementBlock(Fragment,null,renderList(e.filters,ue=>(openBlock(),createElementBlock("li",{key:ue.value,class:normalizeClass([e.ns.e("list-item"),e.ns.is("active",e.isActive(ue))]),label:ue.value,onClick:le=>e.handleSelect(ue.value)},toDisplayString$1(ue.text),11,_hoisted_3$R))),128))],2))]),default:withCtx(()=>[withDirectives((openBlock(),createElementBlock("span",{class:normalizeClass([`${e.ns.namespace.value}-table__column-filter-trigger`,`${e.ns.namespace.value}-none-outline`]),onClick:n[4]||(n[4]=(...ue)=>e.showFilterPanel&&e.showFilterPanel(...ue))},[createVNode(ae,null,{default:withCtx(()=>[e.column.filterOpened?(openBlock(),createBlock(z,{key:0})):(openBlock(),createBlock(j,{key:1}))]),_:1})],2)),[[re,e.hideFilterPanel,e.popperPaneRef]])]),_:1},8,["visible","placement","popper-class"])}var FilterPanel=_export_sfc$1(_sfc_main$1I,[["render",_sfc_render$4],["__file","/home/runner/work/element-plus/element-plus/packages/components/table/src/filter-panel.vue"]]);function useLayoutObserver(e){const n=getCurrentInstance();onBeforeMount(()=>{r.value.addObserver(n)}),onMounted(()=>{g(r.value),y(r.value)}),onUpdated(()=>{g(r.value),y(r.value)}),onUnmounted(()=>{r.value.removeObserver(n)});const r=computed(()=>{const k=e.layout;if(!k)throw new Error("Can not find table layout.");return k}),g=k=>{var $;const V=(($=e.vnode.el)==null?void 0:$.querySelectorAll("colgroup > col"))||[];if(!V.length)return;const L=k.getFlattenColumns(),z={};L.forEach(j=>{z[j.id]=j});for(let j=0,ae=V.length;j<ae;j++){const oe=V[j],re=oe.getAttribute("name"),ue=z[re];ue&&oe.setAttribute("width",ue.realWidth||ue.width)}},y=k=>{var $,V;const L=(($=e.vnode.el)==null?void 0:$.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let j=0,ae=L.length;j<ae;j++)L[j].setAttribute("width",k.scrollY.value?k.gutterWidth:"0");const z=((V=e.vnode.el)==null?void 0:V.querySelectorAll("th.gutter"))||[];for(let j=0,ae=z.length;j<ae;j++){const oe=z[j];oe.style.width=k.scrollY.value?`${k.gutterWidth}px`:"0",oe.style.display=k.scrollY.value?"":"none"}};return{tableLayout:r.value,onColumnsChange:g,onScrollableChange:y}}const TABLE_INJECTION_KEY=Symbol("ElTable");function useEvent(e,n){const r=getCurrentInstance(),g=inject(TABLE_INJECTION_KEY),y=le=>{le.stopPropagation()},k=(le,de)=>{!de.filters&&de.sortable?ue(le,de,!1):de.filterable&&!de.sortable&&y(le),g?.emit("header-click",de,le)},$=(le,de)=>{g?.emit("header-contextmenu",de,le)},V=ref(null),L=ref(!1),z=ref({}),j=(le,de)=>{if(isClient&&!(de.children&&de.children.length>0)&&V.value&&e.border){L.value=!0;const he=g;n("set-drag-visible",!0);const xe=(he?.vnode.el).getBoundingClientRect().left,Ne=r.vnode.el.querySelector(`th.${de.id}`),$e=Ne.getBoundingClientRect(),Ce=$e.left-xe+30;addClass(Ne,"noclick"),z.value={startMouseLeft:le.clientX,startLeft:$e.right-xe,startColumnLeft:$e.left-xe,tableLeft:xe};const Ie=he?.refs.resizeProxy;Ie.style.left=`${z.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const ze=Pt=>{const hn=Pt.clientX-z.value.startMouseLeft,Dt=z.value.startLeft+hn;Ie.style.left=`${Math.max(Ce,Dt)}px`},Ue=()=>{if(L.value){const{startColumnLeft:Pt,startLeft:hn}=z.value,xn=Number.parseInt(Ie.style.left,10)-Pt;de.width=de.realWidth=xn,he?.emit("header-dragend",de.width,hn-Pt,de,le),requestAnimationFrame(()=>{e.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",L.value=!1,V.value=null,z.value={},n("set-drag-visible",!1)}document.removeEventListener("mousemove",ze),document.removeEventListener("mouseup",Ue),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{removeClass(Ne,"noclick")},0)};document.addEventListener("mousemove",ze),document.addEventListener("mouseup",Ue)}},ae=(le,de)=>{if(de.children&&de.children.length>0)return;const he=le.target;if(!isElement$1(he))return;const _e=he?.closest("th");if(!(!de||!de.resizable)&&!L.value&&e.border){const xe=_e.getBoundingClientRect(),Ne=document.body.style;xe.width>12&&xe.right-le.pageX<8?(Ne.cursor="col-resize",hasClass(_e,"is-sortable")&&(_e.style.cursor="col-resize"),V.value=de):L.value||(Ne.cursor="",hasClass(_e,"is-sortable")&&(_e.style.cursor="pointer"),V.value=null)}},oe=()=>{isClient&&(document.body.style.cursor="")},re=({order:le,sortOrders:de})=>{if(le==="")return de[0];const he=de.indexOf(le||null);return de[he>de.length-2?0:he+1]},ue=(le,de,he)=>{var _e;le.stopPropagation();const xe=de.order===he?null:he||re(de),Ne=(_e=le.target)==null?void 0:_e.closest("th");if(Ne&&hasClass(Ne,"noclick")){removeClass(Ne,"noclick");return}if(!de.sortable)return;const $e=e.store.states;let Ce=$e.sortProp.value,Ie;const ze=$e.sortingColumn.value;(ze!==de||ze===de&&ze.order===null)&&(ze&&(ze.order=null),$e.sortingColumn.value=de,Ce=de.property),xe?Ie=de.order=xe:Ie=de.order=null,$e.sortProp.value=Ce,$e.sortOrder.value=Ie,g?.store.commit("changeSortCondition")};return{handleHeaderClick:k,handleHeaderContextMenu:$,handleMouseDown:j,handleMouseMove:ae,handleMouseOut:oe,handleSortClick:ue,handleFilterClick:y}}function useStyle$2(e){const n=inject(TABLE_INJECTION_KEY),r=useNamespace("table");return{getHeaderRowStyle:V=>{const L=n?.props.headerRowStyle;return typeof L=="function"?L.call(null,{rowIndex:V}):L},getHeaderRowClass:V=>{const L=[],z=n?.props.headerRowClassName;return typeof z=="string"?L.push(z):typeof z=="function"&&L.push(z.call(null,{rowIndex:V})),L.join(" ")},getHeaderCellStyle:(V,L,z,j)=>{var ae;let oe=(ae=n?.props.headerCellStyle)!=null?ae:{};typeof oe=="function"&&(oe=oe.call(null,{rowIndex:V,columnIndex:L,row:z,column:j}));const re=getFixedColumnOffset(L,j.fixed,e.store,z);return ensurePosition(re,"left"),ensurePosition(re,"right"),Object.assign({},oe,re)},getHeaderCellClass:(V,L,z,j)=>{const ae=getFixedColumnsClass(r.b(),L,j.fixed,e.store,z),oe=[j.id,j.order,j.headerAlign,j.className,j.labelClassName,...ae];j.children||oe.push("is-leaf"),j.sortable&&oe.push("is-sortable");const re=n?.props.headerCellClassName;return typeof re=="string"?oe.push(re):typeof re=="function"&&oe.push(re.call(null,{rowIndex:V,columnIndex:L,row:z,column:j})),oe.push(r.e("cell")),oe.filter(ue=>!!ue).join(" ")}}}const getAllColumns=e=>{const n=[];return e.forEach(r=>{r.children?(n.push(r),n.push.apply(n,getAllColumns(r.children))):n.push(r)}),n},convertToRows=e=>{let n=1;const r=(k,$)=>{if($&&(k.level=$.level+1,n<k.level&&(n=k.level)),k.children){let V=0;k.children.forEach(L=>{r(L,k),V+=L.colSpan}),k.colSpan=V}else k.colSpan=1};e.forEach(k=>{k.level=1,r(k,void 0)});const g=[];for(let k=0;k<n;k++)g.push([]);return getAllColumns(e).forEach(k=>{k.children?(k.rowSpan=1,k.children.forEach($=>$.isSubColumn=!0)):k.rowSpan=n-k.level+1,g[k.level-1].push(k)}),g};function useUtils$1(e){const n=inject(TABLE_INJECTION_KEY),r=computed(()=>convertToRows(e.store.states.originColumns.value));return{isGroup:computed(()=>{const k=r.value.length>1;return k&&n&&(n.state.isGroup.value=!0),k}),toggleAllSelection:k=>{k.stopPropagation(),n?.store.commit("toggleAllSelection")},columnRows:r}}var TableHeader=defineComponent({name:"ElTableHeader",components:{ElCheckbox},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e,{emit:n}){const r=getCurrentInstance(),g=inject(TABLE_INJECTION_KEY),y=useNamespace("table"),k=ref({}),{onColumnsChange:$,onScrollableChange:V}=useLayoutObserver(g);onMounted(async()=>{await nextTick(),await nextTick();const{prop:Ce,order:Ie}=e.defaultSort;g?.store.commit("sort",{prop:Ce,order:Ie,init:!0})});const{handleHeaderClick:L,handleHeaderContextMenu:z,handleMouseDown:j,handleMouseMove:ae,handleMouseOut:oe,handleSortClick:re,handleFilterClick:ue}=useEvent(e,n),{getHeaderRowStyle:le,getHeaderRowClass:de,getHeaderCellStyle:he,getHeaderCellClass:_e}=useStyle$2(e),{isGroup:xe,toggleAllSelection:Ne,columnRows:$e}=useUtils$1(e);return r.state={onColumnsChange:$,onScrollableChange:V},r.filterPanels=k,{ns:y,filterPanels:k,onColumnsChange:$,onScrollableChange:V,columnRows:$e,getHeaderRowClass:de,getHeaderRowStyle:le,getHeaderCellClass:_e,getHeaderCellStyle:he,handleHeaderClick:L,handleHeaderContextMenu:z,handleMouseDown:j,handleMouseMove:ae,handleMouseOut:oe,handleSortClick:re,handleFilterClick:ue,isGroup:xe,toggleAllSelection:Ne}},render(){const{ns:e,isGroup:n,columnRows:r,getHeaderCellStyle:g,getHeaderCellClass:y,getHeaderRowClass:k,getHeaderRowStyle:$,handleHeaderClick:V,handleHeaderContextMenu:L,handleMouseDown:z,handleMouseMove:j,handleSortClick:ae,handleMouseOut:oe,store:re,$parent:ue}=this;let le=1;return h$1("thead",{class:{[e.is("group")]:n}},r.map((de,he)=>h$1("tr",{class:k(he),key:he,style:$(he)},de.map((_e,xe)=>(_e.rowSpan>le&&(le=_e.rowSpan),h$1("th",{class:y(he,xe,de,_e),colspan:_e.colSpan,key:`${_e.id}-thead`,rowspan:_e.rowSpan,style:g(he,xe,de,_e),onClick:Ne=>V(Ne,_e),onContextmenu:Ne=>L(Ne,_e),onMousedown:Ne=>z(Ne,_e),onMousemove:Ne=>j(Ne,_e),onMouseout:oe},[h$1("div",{class:["cell",_e.filteredValue&&_e.filteredValue.length>0?"highlight":""]},[_e.renderHeader?_e.renderHeader({column:_e,$index:xe,store:re,_self:ue}):_e.label,_e.sortable&&h$1("span",{onClick:Ne=>ae(Ne,_e),class:"caret-wrapper"},[h$1("i",{onClick:Ne=>ae(Ne,_e,"ascending"),class:"sort-caret ascending"}),h$1("i",{onClick:Ne=>ae(Ne,_e,"descending"),class:"sort-caret descending"})]),_e.filterable&&h$1(FilterPanel,{store:re,placement:_e.filterPlacement||"bottom-start",column:_e,upDataColumn:(Ne,$e)=>{_e[Ne]=$e}})])]))))))}});function useEvents(e){const n=inject(TABLE_INJECTION_KEY),r=ref(""),g=ref(h$1("div")),{nextZIndex:y}=useZIndex(),k=(ue,le,de)=>{var he;const _e=n,xe=getCell(ue);let Ne;const $e=(he=_e?.vnode.el)==null?void 0:he.dataset.prefix;xe&&(Ne=getColumnByCell({columns:e.store.states.columns.value},xe,$e),Ne&&_e?.emit(`cell-${de}`,le,Ne,xe,ue)),_e?.emit(`row-${de}`,le,Ne,ue)},$=(ue,le)=>{k(ue,le,"dblclick")},V=(ue,le)=>{e.store.commit("setCurrentRow",le),k(ue,le,"click")},L=(ue,le)=>{k(ue,le,"contextmenu")},z=debounce(ue=>{e.store.commit("setHoverRow",ue)},30),j=debounce(()=>{e.store.commit("setHoverRow",null)},30),ae=ue=>{const le=window.getComputedStyle(ue,null),de=Number.parseInt(le.paddingLeft,10)||0,he=Number.parseInt(le.paddingRight,10)||0,_e=Number.parseInt(le.paddingTop,10)||0,xe=Number.parseInt(le.paddingBottom,10)||0;return{left:de,right:he,top:_e,bottom:xe}};return{handleDoubleClick:$,handleClick:V,handleContextMenu:L,handleMouseEnter:z,handleMouseLeave:j,handleCellMouseEnter:(ue,le,de)=>{var he;const _e=n,xe=getCell(ue),Ne=(he=_e?.vnode.el)==null?void 0:he.dataset.prefix;if(xe){const Tn=getColumnByCell({columns:e.store.states.columns.value},xe,Ne),Ln=_e.hoverState={cell:xe,column:Tn,row:le};_e?.emit("cell-mouse-enter",Ln.row,Ln.column,Ln.cell,ue)}if(!de)return;const $e=ue.target.querySelector(".cell");if(!(hasClass($e,`${Ne}-tooltip`)&&$e.childNodes.length))return;const Ce=document.createRange();Ce.setStart($e,0),Ce.setEnd($e,$e.childNodes.length);let Ie=Ce.getBoundingClientRect().width,ze=Ce.getBoundingClientRect().height;Ie-Math.floor(Ie)<.001&&(Ie=Math.floor(Ie)),ze-Math.floor(ze)<.001&&(ze=Math.floor(ze));const{top:hn,left:Dt,right:xn,bottom:jt}=ae($e),Vn=Dt+xn,Rn=hn+jt;(Ie+Vn>$e.offsetWidth||ze+Rn>$e.offsetHeight||$e.scrollWidth>$e.offsetWidth)&&createTablePopper(n?.refs.tableWrapper,xe,xe.innerText||xe.textContent,y,de)},handleCellMouseLeave:ue=>{if(!getCell(ue))return;const de=n?.hoverState;n?.emit("cell-mouse-leave",de?.row,de?.column,de?.cell,ue)},tooltipContent:r,tooltipTrigger:g}}function useStyles$1(e){const n=inject(TABLE_INJECTION_KEY),r=useNamespace("table");return{getRowStyle:(z,j)=>{const ae=n?.props.rowStyle;return typeof ae=="function"?ae.call(null,{row:z,rowIndex:j}):ae||null},getRowClass:(z,j)=>{const ae=[r.e("row")];n?.props.highlightCurrentRow&&z===e.store.states.currentRow.value&&ae.push("current-row"),e.stripe&&j%2===1&&ae.push(r.em("row","striped"));const oe=n?.props.rowClassName;return typeof oe=="string"?ae.push(oe):typeof oe=="function"&&ae.push(oe.call(null,{row:z,rowIndex:j})),ae},getCellStyle:(z,j,ae,oe)=>{const re=n?.props.cellStyle;let ue=re??{};typeof re=="function"&&(ue=re.call(null,{rowIndex:z,columnIndex:j,row:ae,column:oe}));const le=getFixedColumnOffset(j,e?.fixed,e.store);return ensurePosition(le,"left"),ensurePosition(le,"right"),Object.assign({},ue,le)},getCellClass:(z,j,ae,oe,re)=>{const ue=getFixedColumnsClass(r.b(),j,e?.fixed,e.store,void 0,re),le=[oe.id,oe.align,oe.className,...ue],de=n?.props.cellClassName;return typeof de=="string"?le.push(de):typeof de=="function"&&le.push(de.call(null,{rowIndex:z,columnIndex:j,row:ae,column:oe})),le.push(r.e("cell")),le.filter(he=>!!he).join(" ")},getSpan:(z,j,ae,oe)=>{let re=1,ue=1;const le=n?.props.spanMethod;if(typeof le=="function"){const de=le({row:z,column:j,rowIndex:ae,columnIndex:oe});Array.isArray(de)?(re=de[0],ue=de[1]):typeof de=="object"&&(re=de.rowspan,ue=de.colspan)}return{rowspan:re,colspan:ue}},getColspanRealWidth:(z,j,ae)=>{if(j<1)return z[ae].realWidth;const oe=z.map(({realWidth:re,width:ue})=>re||ue).slice(ae,ae+j);return Number(oe.reduce((re,ue)=>Number(re)+Number(ue),-1))}}}function useRender$1(e){const n=inject(TABLE_INJECTION_KEY),r=useNamespace("table"),{handleDoubleClick:g,handleClick:y,handleContextMenu:k,handleMouseEnter:$,handleMouseLeave:V,handleCellMouseEnter:L,handleCellMouseLeave:z,tooltipContent:j,tooltipTrigger:ae}=useEvents(e),{getRowStyle:oe,getRowClass:re,getCellStyle:ue,getCellClass:le,getSpan:de,getColspanRealWidth:he}=useStyles$1(e),_e=computed(()=>e.store.states.columns.value.findIndex(({type:Ie})=>Ie==="default")),xe=(Ie,ze)=>{const Ue=n.props.rowKey;return Ue?getRowIdentity(Ie,Ue):ze},Ne=(Ie,ze,Ue,Pt=!1)=>{const{tooltipEffect:hn,tooltipOptions:Dt,store:xn}=e,{indent:jt,columns:Vn}=xn.states,Rn=re(Ie,ze);let Tn=!0;return Ue&&(Rn.push(r.em("row",`level-${Ue.level}`)),Tn=Ue.display),h$1("tr",{style:[Tn?null:{display:"none"},oe(Ie,ze)],class:Rn,key:xe(Ie,ze),onDblclick:Sn=>g(Sn,Ie),onClick:Sn=>y(Sn,Ie),onContextmenu:Sn=>k(Sn,Ie),onMouseenter:()=>$(ze),onMouseleave:V},Vn.value.map((Sn,An)=>{const{rowspan:In,colspan:Mn}=de(Ie,Sn,ze,An);if(!In||!Mn)return null;const ra=Object.assign({},Sn);ra.realWidth=he(Vn.value,Mn,An);const da={store:e.store,_self:e.context||n,column:ra,row:Ie,$index:ze,cellIndex:An,expanded:Pt};An===_e.value&&Ue&&(da.treeNode={indent:Ue.level*jt.value,level:Ue.level},typeof Ue.expanded=="boolean"&&(da.treeNode.expanded=Ue.expanded,"loading"in Ue&&(da.treeNode.loading=Ue.loading),"noLazyChildren"in Ue&&(da.treeNode.noLazyChildren=Ue.noLazyChildren)));const ua=`${ze},${An}`,aa=ra.columnKey||ra.rawColumnKey||"",Nn=$e(An,Sn,da),En=Sn.showOverflowTooltip&&merge$1({effect:hn},Dt,Sn.showOverflowTooltip);return h$1("td",{style:ue(ze,An,Ie,Sn),class:le(ze,An,Ie,Sn,Mn-1),key:`${aa}${ua}`,rowspan:In,colspan:Mn,onMouseenter:Zn=>L(Zn,Ie,En),onMouseleave:z},[Nn])}))},$e=(Ie,ze,Ue)=>ze.renderCell(Ue);return{wrappedRowRender:(Ie,ze)=>{const Ue=e.store,{isRowExpanded:Pt,assertRowKey:hn}=Ue,{treeData:Dt,lazyTreeNodeMap:xn,childrenColumnName:jt,rowKey:Vn}=Ue.states,Rn=Ue.states.columns.value;if(Rn.some(({type:Ln})=>Ln==="expand")){const Ln=Pt(Ie),Sn=Ne(Ie,ze,void 0,Ln),An=n.renderExpanded;return Ln?An?[[Sn,h$1("tr",{key:`expanded-row__${Sn.key}`},[h$1("td",{colspan:Rn.length,class:`${r.e("cell")} ${r.e("expanded-cell")}`},[An({row:Ie,$index:ze,store:Ue,expanded:Ln})])])]]:(console.error("[Element Error]renderExpanded is required."),Sn):[[Sn]]}else if(Object.keys(Dt.value).length){hn();const Ln=getRowIdentity(Ie,Vn.value);let Sn=Dt.value[Ln],An=null;Sn&&(An={expanded:Sn.expanded,level:Sn.level,display:!0},typeof Sn.lazy=="boolean"&&(typeof Sn.loaded=="boolean"&&Sn.loaded&&(An.noLazyChildren=!(Sn.children&&Sn.children.length)),An.loading=Sn.loading));const In=[Ne(Ie,ze,An)];if(Sn){let Mn=0;const ra=(ua,aa)=>{ua&&ua.length&&aa&&ua.forEach(Nn=>{const En={display:aa.display&&aa.expanded,level:aa.level+1,expanded:!1,noLazyChildren:!1,loading:!1},Zn=getRowIdentity(Nn,Vn.value);if(Zn==null)throw new Error("For nested data item, row-key is required.");if(Sn={...Dt.value[Zn]},Sn&&(En.expanded=Sn.expanded,Sn.level=Sn.level||En.level,Sn.display=!!(Sn.expanded&&En.display),typeof Sn.lazy=="boolean"&&(typeof Sn.loaded=="boolean"&&Sn.loaded&&(En.noLazyChildren=!(Sn.children&&Sn.children.length)),En.loading=Sn.loading)),Mn++,In.push(Ne(Nn,ze+Mn,En)),Sn){const ha=xn.value[Zn]||Nn[jt.value];ra(ha,Sn)}})};Sn.display=!0;const da=xn.value[Ln]||Ie[jt.value];ra(da,Sn)}return In}else return Ne(Ie,ze,void 0)},tooltipContent:j,tooltipTrigger:ae}}const defaultProps$2={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var TableBody=defineComponent({name:"ElTableBody",props:defaultProps$2,setup(e){const n=getCurrentInstance(),r=inject(TABLE_INJECTION_KEY),g=useNamespace("table"),{wrappedRowRender:y,tooltipContent:k,tooltipTrigger:$}=useRender$1(e),{onColumnsChange:V,onScrollableChange:L}=useLayoutObserver(r);return watch(e.store.states.hoverRow,(z,j)=>{!e.store.states.isComplex.value||!isClient||rAF(()=>{const ae=n?.vnode.el,oe=Array.from(ae?.children||[]).filter(le=>le?.classList.contains(`${g.e("row")}`)),re=oe[j],ue=oe[z];re&&removeClass(re,"hover-row"),ue&&addClass(ue,"hover-row")})}),onUnmounted(()=>{var z;(z=removePopper)==null||z()}),{ns:g,onColumnsChange:V,onScrollableChange:L,wrappedRowRender:y,tooltipContent:k,tooltipTrigger:$}},render(){const{wrappedRowRender:e,store:n}=this,r=n.states.data.value||[];return h$1("tbody",{},[r.reduce((g,y)=>g.concat(e(y,g.length)),[])])}});function hColgroup(e){const n=e.tableLayout==="auto";let r=e.columns||[];n&&r.every(y=>y.width===void 0)&&(r=[]);const g=y=>{const k={key:`${e.tableLayout}_${y.id}`,style:{},name:void 0};return n?k.style={width:`${y.width}px`}:k.name=y.id,k};return h$1("colgroup",{},r.map(y=>h$1("col",g(y))))}hColgroup.props=["columns","tableLayout"];function useMapState(){const e=inject(TABLE_INJECTION_KEY),n=e?.store,r=computed(()=>n.states.fixedLeafColumnsLength.value),g=computed(()=>n.states.rightFixedColumns.value.length),y=computed(()=>n.states.columns.value.length),k=computed(()=>n.states.fixedColumns.value.length),$=computed(()=>n.states.rightFixedColumns.value.length);return{leftFixedLeafCount:r,rightFixedLeafCount:g,columnsCount:y,leftFixedCount:k,rightFixedCount:$,columns:n.states.columns}}function useStyle$1(e){const{columns:n}=useMapState(),r=useNamespace("table");return{getCellClasses:(k,$)=>{const V=k[$],L=[r.e("cell"),V.id,V.align,V.labelClassName,...getFixedColumnsClass(r.b(),$,V.fixed,e.store)];return V.className&&L.push(V.className),V.children||L.push(r.is("leaf")),L},getCellStyles:(k,$)=>{const V=getFixedColumnOffset($,k.fixed,e.store);return ensurePosition(V,"left"),ensurePosition(V,"right"),V},columns:n}}var TableFooter=defineComponent({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e){const{getCellClasses:n,getCellStyles:r,columns:g}=useStyle$1(e);return{ns:useNamespace("table"),getCellClasses:n,getCellStyles:r,columns:g}},render(){const{columns:e,getCellStyles:n,getCellClasses:r,summaryMethod:g,sumText:y,ns:k}=this,$=this.store.states.data.value;let V=[];return g?V=g({columns:e,data:$}):e.forEach((L,z)=>{if(z===0){V[z]=y;return}const j=$.map(ue=>Number(ue[L.property])),ae=[];let oe=!0;j.forEach(ue=>{if(!Number.isNaN(+ue)){oe=!1;const le=`${ue}`.split(".")[1];ae.push(le?le.length:0)}});const re=Math.max.apply(null,ae);oe?V[z]="":V[z]=j.reduce((ue,le)=>{const de=Number(le);return Number.isNaN(+de)?ue:Number.parseFloat((ue+le).toFixed(Math.min(re,20)))},0)}),h$1("table",{class:k.e("footer"),cellspacing:"0",cellpadding:"0",border:"0"},[hColgroup({columns:e}),h$1("tbody",[h$1("tr",{},[...e.map((L,z)=>h$1("td",{key:z,colspan:L.colSpan,rowspan:L.rowSpan,class:r(e,z),style:n(L,z)},[h$1("div",{class:["cell",L.labelClassName]},[V[z]])]))])])])}});function useUtils(e){return{setCurrentRow:j=>{e.commit("setCurrentRow",j)},getSelectionRows:()=>e.getSelectionRows(),toggleRowSelection:(j,ae)=>{e.toggleRowSelection(j,ae,!1),e.updateAllSelected()},clearSelection:()=>{e.clearSelection()},clearFilter:j=>{e.clearFilter(j)},toggleAllSelection:()=>{e.commit("toggleAllSelection")},toggleRowExpansion:(j,ae)=>{e.toggleRowExpansionAdapter(j,ae)},clearSort:()=>{e.clearSort()},sort:(j,ae)=>{e.commit("sort",{prop:j,order:ae})}}}function useStyle(e,n,r,g){const y=ref(!1),k=ref(null),$=ref(!1),V=Sn=>{$.value=Sn},L=ref({width:null,height:null,headerHeight:null}),z=ref(!1),j={display:"inline-block",verticalAlign:"middle"},ae=ref(),oe=ref(0),re=ref(0),ue=ref(0),le=ref(0),de=ref(0);watchEffect(()=>{n.setHeight(e.height)}),watchEffect(()=>{n.setMaxHeight(e.maxHeight)}),watch(()=>[e.currentRowKey,r.states.rowKey],([Sn,An])=>{!unref(An)||!unref(Sn)||r.setCurrentRowKey(`${Sn}`)},{immediate:!0}),watch(()=>e.data,Sn=>{g.store.commit("setData",Sn)},{immediate:!0,deep:!0}),watchEffect(()=>{e.expandRowKeys&&r.setExpandRowKeysAdapter(e.expandRowKeys)});const he=()=>{g.store.commit("setHoverRow",null),g.hoverState&&(g.hoverState=null)},_e=(Sn,An)=>{const{pixelX:In,pixelY:Mn}=An;Math.abs(In)>=Math.abs(Mn)&&(g.refs.bodyWrapper.scrollLeft+=An.pixelX/5)},xe=computed(()=>e.height||e.maxHeight||r.states.fixedColumns.value.length>0||r.states.rightFixedColumns.value.length>0),Ne=computed(()=>({width:n.bodyWidth.value?`${n.bodyWidth.value}px`:""})),$e=()=>{xe.value&&n.updateElsHeight(),n.updateColumnsWidth(),requestAnimationFrame(Ue)};onMounted(async()=>{await nextTick(),r.updateColumns(),Pt(),requestAnimationFrame($e);const Sn=g.vnode.el,An=g.refs.headerWrapper;e.flexible&&Sn&&Sn.parentElement&&(Sn.parentElement.style.minWidth="0"),L.value={width:ae.value=Sn.offsetWidth,height:Sn.offsetHeight,headerHeight:e.showHeader&&An?An.offsetHeight:null},r.states.columns.value.forEach(In=>{In.filteredValue&&In.filteredValue.length&&g.store.commit("filterChange",{column:In,values:In.filteredValue,silent:!0})}),g.$ready=!0});const Ce=(Sn,An)=>{if(!Sn)return;const In=Array.from(Sn.classList).filter(Mn=>!Mn.startsWith("is-scrolling-"));In.push(n.scrollX.value?An:"is-scrolling-none"),Sn.className=In.join(" ")},Ie=Sn=>{const{tableWrapper:An}=g.refs;Ce(An,Sn)},ze=Sn=>{const{tableWrapper:An}=g.refs;return!!(An&&An.classList.contains(Sn))},Ue=function(){if(!g.refs.scrollBarRef)return;if(!n.scrollX.value){const aa="is-scrolling-none";ze(aa)||Ie(aa);return}const Sn=g.refs.scrollBarRef.wrapRef;if(!Sn)return;const{scrollLeft:An,offsetWidth:In,scrollWidth:Mn}=Sn,{headerWrapper:ra,footerWrapper:da}=g.refs;ra&&(ra.scrollLeft=An),da&&(da.scrollLeft=An);const ua=Mn-In-1;An>=ua?Ie("is-scrolling-right"):Ie(An===0?"is-scrolling-left":"is-scrolling-middle")},Pt=()=>{g.refs.scrollBarRef&&(g.refs.scrollBarRef.wrapRef&&useEventListener(g.refs.scrollBarRef.wrapRef,"scroll",Ue,{passive:!0}),e.fit?useResizeObserver(g.vnode.el,hn):useEventListener(window,"resize",hn),useResizeObserver(g.refs.bodyWrapper,()=>{var Sn,An;hn(),(An=(Sn=g.refs)==null?void 0:Sn.scrollBarRef)==null||An.update()}))},hn=()=>{var Sn,An,In,Mn;const ra=g.vnode.el;if(!g.$ready||!ra)return;let da=!1;const{width:ua,height:aa,headerHeight:Nn}=L.value,En=ae.value=ra.offsetWidth;ua!==En&&(da=!0);const Zn=ra.offsetHeight;(e.height||xe.value)&&aa!==Zn&&(da=!0);const ha=e.tableLayout==="fixed"?g.refs.headerWrapper:(Sn=g.refs.tableHeaderRef)==null?void 0:Sn.$el;e.showHeader&&ha?.offsetHeight!==Nn&&(da=!0),oe.value=((An=g.refs.tableWrapper)==null?void 0:An.scrollHeight)||0,ue.value=ha?.scrollHeight||0,le.value=((In=g.refs.footerWrapper)==null?void 0:In.offsetHeight)||0,de.value=((Mn=g.refs.appendWrapper)==null?void 0:Mn.offsetHeight)||0,re.value=oe.value-ue.value-le.value-de.value,da&&(L.value={width:En,height:Zn,headerHeight:e.showHeader&&ha?.offsetHeight||0},$e())},Dt=useFormSize(),xn=computed(()=>{const{bodyWidth:Sn,scrollY:An,gutterWidth:In}=n;return Sn.value?`${Sn.value-(An.value?In:0)}px`:""}),jt=computed(()=>e.maxHeight?"fixed":e.tableLayout),Vn=computed(()=>{if(e.data&&e.data.length)return null;let Sn="100%";e.height&&re.value&&(Sn=`${re.value}px`);const An=ae.value;return{width:An?`${An}px`:"",height:Sn}}),Rn=computed(()=>e.height?{height:Number.isNaN(Number(e.height))?e.height:`${e.height}px`}:e.maxHeight?{maxHeight:Number.isNaN(Number(e.maxHeight))?e.maxHeight:`${e.maxHeight}px`}:{}),Tn=computed(()=>e.height?{height:"100%"}:e.maxHeight?Number.isNaN(Number(e.maxHeight))?{maxHeight:`calc(${e.maxHeight} - ${ue.value+le.value}px)`}:{maxHeight:`${e.maxHeight-ue.value-le.value}px`}:{});return{isHidden:y,renderExpanded:k,setDragVisible:V,isGroup:z,handleMouseLeave:he,handleHeaderFooterMousewheel:_e,tableSize:Dt,emptyBlockStyle:Vn,handleFixedMousewheel:(Sn,An)=>{const In=g.refs.bodyWrapper;if(Math.abs(An.spinY)>0){const Mn=In.scrollTop;An.pixelY<0&&Mn!==0&&Sn.preventDefault(),An.pixelY>0&&In.scrollHeight-In.clientHeight>Mn&&Sn.preventDefault(),In.scrollTop+=Math.ceil(An.pixelY/5)}else In.scrollLeft+=Math.ceil(An.pixelX/5)},resizeProxyVisible:$,bodyWidth:xn,resizeState:L,doLayout:$e,tableBodyStyles:Ne,tableLayout:jt,scrollbarViewStyle:j,tableInnerStyle:Rn,scrollbarStyle:Tn}}function useKeyRender(e){const n=ref(),r=()=>{const y=e.vnode.el.querySelector(".hidden-columns"),k={childList:!0,subtree:!0},$=e.store.states.updateOrderFns;n.value=new MutationObserver(()=>{$.forEach(V=>V())}),n.value.observe(y,k)};onMounted(()=>{r()}),onUnmounted(()=>{var g;(g=n.value)==null||g.disconnect()})}var defaultProps$1={data:{type:Array,default:()=>[]},size:useSizeProp,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:{type:Boolean,default:!1},flexible:Boolean,showOverflowTooltip:[Boolean,Object]};const useScrollbar$1=()=>{const e=ref(),n=(k,$)=>{const V=e.value;V&&V.scrollTo(k,$)},r=(k,$)=>{const V=e.value;V&&isNumber$1($)&&["Top","Left"].includes(k)&&V[`setScroll${k}`]($)};return{scrollBarRef:e,scrollTo:n,setScrollTop:k=>r("Top",k),setScrollLeft:k=>r("Left",k)}};let tableIdSeed=1;const _sfc_main$1H=defineComponent({name:"ElTable",directives:{Mousewheel},components:{TableHeader,TableBody,TableFooter,ElScrollbar,hColgroup},props:defaultProps$1,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(e){const{t:n}=useLocale(),r=useNamespace("table"),g=getCurrentInstance();provide(TABLE_INJECTION_KEY,g);const y=createStore(g,e);g.store=y;const k=new TableLayout({store:g.store,table:g,fit:e.fit,showHeader:e.showHeader});g.layout=k;const $=computed(()=>(y.states.data.value||[]).length===0),{setCurrentRow:V,getSelectionRows:L,toggleRowSelection:z,clearSelection:j,clearFilter:ae,toggleAllSelection:oe,toggleRowExpansion:re,clearSort:ue,sort:le}=useUtils(y),{isHidden:de,renderExpanded:he,setDragVisible:_e,isGroup:xe,handleMouseLeave:Ne,handleHeaderFooterMousewheel:$e,tableSize:Ce,emptyBlockStyle:Ie,handleFixedMousewheel:ze,resizeProxyVisible:Ue,bodyWidth:Pt,resizeState:hn,doLayout:Dt,tableBodyStyles:xn,tableLayout:jt,scrollbarViewStyle:Vn,tableInnerStyle:Rn,scrollbarStyle:Tn}=useStyle(e,k,y,g),{scrollBarRef:Ln,scrollTo:Sn,setScrollLeft:An,setScrollTop:In}=useScrollbar$1(),Mn=debounce(Dt,50),ra=`${r.namespace.value}-table_${tableIdSeed++}`;g.tableId=ra,g.state={isGroup:xe,resizeState:hn,doLayout:Dt,debouncedUpdateLayout:Mn};const da=computed(()=>e.sumText||n("el.table.sumText")),ua=computed(()=>e.emptyText||n("el.table.emptyText"));return useKeyRender(g),{ns:r,layout:k,store:y,handleHeaderFooterMousewheel:$e,handleMouseLeave:Ne,tableId:ra,tableSize:Ce,isHidden:de,isEmpty:$,renderExpanded:he,resizeProxyVisible:Ue,resizeState:hn,isGroup:xe,bodyWidth:Pt,tableBodyStyles:xn,emptyBlockStyle:Ie,debouncedUpdateLayout:Mn,handleFixedMousewheel:ze,setCurrentRow:V,getSelectionRows:L,toggleRowSelection:z,clearSelection:j,clearFilter:ae,toggleAllSelection:oe,toggleRowExpansion:re,clearSort:ue,doLayout:Dt,sort:le,t:n,setDragVisible:_e,context:g,computedSumText:da,computedEmptyText:ua,tableLayout:jt,scrollbarViewStyle:Vn,tableInnerStyle:Rn,scrollbarStyle:Tn,scrollBarRef:Ln,scrollTo:Sn,setScrollLeft:An,setScrollTop:In}}}),_hoisted_1$1r=["data-prefix"],_hoisted_2$1k={ref:"hiddenColumns",class:"hidden-columns"};function _sfc_render$3(e,n,r,g,y,k){const $=resolveComponent("hColgroup"),V=resolveComponent("table-header"),L=resolveComponent("table-body"),z=resolveComponent("el-scrollbar"),j=resolveComponent("table-footer"),ae=resolveDirective("mousewheel");return openBlock(),createElementBlock("div",{ref:"tableWrapper",class:normalizeClass([{[e.ns.m("fit")]:e.fit,[e.ns.m("striped")]:e.stripe,[e.ns.m("border")]:e.border||e.isGroup,[e.ns.m("hidden")]:e.isHidden,[e.ns.m("group")]:e.isGroup,[e.ns.m("fluid-height")]:e.maxHeight,[e.ns.m("scrollable-x")]:e.layout.scrollX.value,[e.ns.m("scrollable-y")]:e.layout.scrollY.value,[e.ns.m("enable-row-hover")]:!e.store.states.isComplex.value,[e.ns.m("enable-row-transition")]:(e.store.states.data.value||[]).length!==0&&(e.store.states.data.value||[]).length<100,"has-footer":e.showSummary},e.ns.m(e.tableSize),e.className,e.ns.b(),e.ns.m(`layout-${e.tableLayout}`)]),style:normalizeStyle(e.style),"data-prefix":e.ns.namespace.value,onMouseleave:n[0]||(n[0]=(...oe)=>e.handleMouseLeave&&e.handleMouseLeave(...oe))},[createBaseVNode("div",{class:normalizeClass(e.ns.e("inner-wrapper")),style:normalizeStyle(e.tableInnerStyle)},[createBaseVNode("div",_hoisted_2$1k,[renderSlot(e.$slots,"default")],512),e.showHeader&&e.tableLayout==="fixed"?withDirectives((openBlock(),createElementBlock("div",{key:0,ref:"headerWrapper",class:normalizeClass(e.ns.e("header-wrapper"))},[createBaseVNode("table",{ref:"tableHeader",class:normalizeClass(e.ns.e("header")),style:normalizeStyle(e.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[createVNode($,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),createVNode(V,{ref:"tableHeaderRef",border:e.border,"default-sort":e.defaultSort,store:e.store,onSetDragVisible:e.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])],6)],2)),[[ae,e.handleHeaderFooterMousewheel]]):createCommentVNode("v-if",!0),createBaseVNode("div",{ref:"bodyWrapper",class:normalizeClass(e.ns.e("body-wrapper"))},[createVNode(z,{ref:"scrollBarRef","view-style":e.scrollbarViewStyle,"wrap-style":e.scrollbarStyle,always:e.scrollbarAlwaysOn},{default:withCtx(()=>[createBaseVNode("table",{ref:"tableBody",class:normalizeClass(e.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:normalizeStyle({width:e.bodyWidth,tableLayout:e.tableLayout})},[createVNode($,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),e.showHeader&&e.tableLayout==="auto"?(openBlock(),createBlock(V,{key:0,ref:"tableHeaderRef",border:e.border,"default-sort":e.defaultSort,store:e.store,onSetDragVisible:e.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])):createCommentVNode("v-if",!0),createVNode(L,{context:e.context,highlight:e.highlightCurrentRow,"row-class-name":e.rowClassName,"tooltip-effect":e.tooltipEffect,"tooltip-options":e.tooltipOptions,"row-style":e.rowStyle,store:e.store,stripe:e.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"])],6),e.isEmpty?(openBlock(),createElementBlock("div",{key:0,ref:"emptyBlock",style:normalizeStyle(e.emptyBlockStyle),class:normalizeClass(e.ns.e("empty-block"))},[createBaseVNode("span",{class:normalizeClass(e.ns.e("empty-text"))},[renderSlot(e.$slots,"empty",{},()=>[createTextVNode(toDisplayString$1(e.computedEmptyText),1)])],2)],6)):createCommentVNode("v-if",!0),e.$slots.append?(openBlock(),createElementBlock("div",{key:1,ref:"appendWrapper",class:normalizeClass(e.ns.e("append-wrapper"))},[renderSlot(e.$slots,"append")],2)):createCommentVNode("v-if",!0)]),_:3},8,["view-style","wrap-style","always"])],2),e.showSummary?withDirectives((openBlock(),createElementBlock("div",{key:1,ref:"footerWrapper",class:normalizeClass(e.ns.e("footer-wrapper"))},[createVNode(j,{border:e.border,"default-sort":e.defaultSort,store:e.store,style:normalizeStyle(e.tableBodyStyles),"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["border","default-sort","store","style","sum-text","summary-method"])],2)),[[vShow,!e.isEmpty],[ae,e.handleHeaderFooterMousewheel]]):createCommentVNode("v-if",!0),e.border||e.isGroup?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(e.ns.e("border-left-patch"))},null,2)):createCommentVNode("v-if",!0)],6),withDirectives(createBaseVNode("div",{ref:"resizeProxy",class:normalizeClass(e.ns.e("column-resize-proxy"))},null,2),[[vShow,e.resizeProxyVisible]])],46,_hoisted_1$1r)}var Table=_export_sfc$1(_sfc_main$1H,[["render",_sfc_render$3],["__file","/home/runner/work/element-plus/element-plus/packages/components/table/src/table.vue"]]);const defaultClassNames={selection:"table-column--selection",expand:"table__expand-column"},cellStarts={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},getDefaultClassName=e=>defaultClassNames[e]||"",cellForced={selection:{renderHeader({store:e,column:n}){function r(){return e.states.data.value&&e.states.data.value.length===0}return h$1(ElCheckbox,{disabled:r(),size:e.states.tableSize.value,indeterminate:e.states.selection.value.length>0&&!e.states.isAllSelected.value,"onUpdate:modelValue":e.toggleAllSelection,modelValue:e.states.isAllSelected.value,ariaLabel:n.label})},renderCell({row:e,column:n,store:r,$index:g}){return h$1(ElCheckbox,{disabled:n.selectable?!n.selectable.call(null,e,g):!1,size:r.states.tableSize.value,onChange:()=>{r.commit("rowSelectedChanged",e)},onClick:y=>y.stopPropagation(),modelValue:r.isSelected(e),ariaLabel:n.label})},sortable:!1,resizable:!1},index:{renderHeader({column:e}){return e.label||"#"},renderCell({column:e,$index:n}){let r=n+1;const g=e.index;return typeof g=="number"?r=n+g:typeof g=="function"&&(r=g(n)),h$1("div",{},[r])},sortable:!1},expand:{renderHeader({column:e}){return e.label||""},renderCell({row:e,store:n,expanded:r}){const{ns:g}=n,y=[g.e("expand-icon")];return r&&y.push(g.em("expand-icon","expanded")),h$1("div",{class:y,onClick:function($){$.stopPropagation(),n.toggleRowExpansion(e)}},{default:()=>[h$1(ElIcon,null,{default:()=>[h$1(arrow_right_default)]})]})},sortable:!1,resizable:!1}};function defaultRenderCell({row:e,column:n,$index:r}){var g;const y=n.property,k=y&&getProp(e,y).value;return n&&n.formatter?n.formatter(e,n,k,r):((g=k?.toString)==null?void 0:g.call(k))||""}function treeCellPrefix({row:e,treeNode:n,store:r},g=!1){const{ns:y}=r;if(!n)return g?[h$1("span",{class:y.e("placeholder")})]:null;const k=[],$=function(V){V.stopPropagation(),!n.loading&&r.loadOrToggle(e)};if(n.indent&&k.push(h$1("span",{class:y.e("indent"),style:{"padding-left":`${n.indent}px`}})),typeof n.expanded=="boolean"&&!n.noLazyChildren){const V=[y.e("expand-icon"),n.expanded?y.em("expand-icon","expanded"):""];let L=arrow_right_default;n.loading&&(L=loading_default),k.push(h$1("div",{class:V,onClick:$},{default:()=>[h$1(ElIcon,{class:{[y.is("loading")]:n.loading}},{default:()=>[h$1(L)]})]}))}else k.push(h$1("span",{class:y.e("placeholder")}));return k}function getAllAliases(e,n){return e.reduce((r,g)=>(r[g]=g,r),n)}function useWatcher(e,n){const r=getCurrentInstance();return{registerComplexWatchers:()=>{const k=["fixed"],$={realWidth:"width",realMinWidth:"minWidth"},V=getAllAliases(k,$);Object.keys(V).forEach(L=>{const z=$[L];hasOwn$1(n,z)&&watch(()=>n[z],j=>{let ae=j;z==="width"&&L==="realWidth"&&(ae=parseWidth(j)),z==="minWidth"&&L==="realMinWidth"&&(ae=parseMinWidth(j)),r.columnConfig.value[z]=ae,r.columnConfig.value[L]=ae;const oe=z==="fixed";e.value.store.scheduleLayout(oe)})})},registerNormalWatchers:()=>{const k=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","showOverflowTooltip"],$={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},V=getAllAliases(k,$);Object.keys(V).forEach(L=>{const z=$[L];hasOwn$1(n,z)&&watch(()=>n[z],j=>{r.columnConfig.value[L]=j})})}}}function useRender(e,n,r){const g=getCurrentInstance(),y=ref(""),k=ref(!1),$=ref(),V=ref(),L=useNamespace("table");watchEffect(()=>{$.value=e.align?`is-${e.align}`:null,$.value}),watchEffect(()=>{V.value=e.headerAlign?`is-${e.headerAlign}`:$.value,V.value});const z=computed(()=>{let Ne=g.vnode.vParent||g.parent;for(;Ne&&!Ne.tableId&&!Ne.columnId;)Ne=Ne.vnode.vParent||Ne.parent;return Ne}),j=computed(()=>{const{store:Ne}=g.parent;if(!Ne)return!1;const{treeData:$e}=Ne.states,Ce=$e.value;return Ce&&Object.keys(Ce).length>0}),ae=ref(parseWidth(e.width)),oe=ref(parseMinWidth(e.minWidth)),re=Ne=>(ae.value&&(Ne.width=ae.value),oe.value&&(Ne.minWidth=oe.value),!ae.value&&oe.value&&(Ne.width=void 0),Ne.minWidth||(Ne.minWidth=80),Ne.realWidth=Number(Ne.width===void 0?Ne.minWidth:Ne.width),Ne),ue=Ne=>{const $e=Ne.type,Ce=cellForced[$e]||{};Object.keys(Ce).forEach(ze=>{const Ue=Ce[ze];ze!=="className"&&Ue!==void 0&&(Ne[ze]=Ue)});const Ie=getDefaultClassName($e);if(Ie){const ze=`${unref(L.namespace)}-${Ie}`;Ne.className=Ne.className?`${Ne.className} ${ze}`:ze}return Ne},le=Ne=>{Array.isArray(Ne)?Ne.forEach(Ce=>$e(Ce)):$e(Ne);function $e(Ce){var Ie;((Ie=Ce?.type)==null?void 0:Ie.name)==="ElTableColumn"&&(Ce.vParent=g)}};return{columnId:y,realAlign:$,isSubColumn:k,realHeaderAlign:V,columnOrTableParent:z,setColumnWidth:re,setColumnForcedProps:ue,setColumnRenders:Ne=>{e.renderHeader||Ne.type!=="selection"&&(Ne.renderHeader=Ce=>{g.columnConfig.value.label;const Ie=n.header;return Ie?Ie(Ce):Ne.label});let $e=Ne.renderCell;return Ne.type==="expand"?(Ne.renderCell=Ce=>h$1("div",{class:"cell"},[$e(Ce)]),r.value.renderExpanded=Ce=>n.default?n.default(Ce):n.default):($e=$e||defaultRenderCell,Ne.renderCell=Ce=>{let Ie=null;if(n.default){const xn=n.default(Ce);Ie=xn.some(jt=>jt.type!==Comment)?xn:$e(Ce)}else Ie=$e(Ce);const{columns:ze}=r.value.store.states,Ue=ze.value.findIndex(xn=>xn.type==="default"),Pt=j.value&&Ce.cellIndex===Ue,hn=treeCellPrefix(Ce,Pt),Dt={class:"cell",style:{}};return Ne.showOverflowTooltip&&(Dt.class=`${Dt.class} ${unref(L.namespace)}-tooltip`,Dt.style={width:`${(Ce.column.realWidth||Number(Ce.column.width))-1}px`}),le(Ie),h$1("div",Dt,[hn,Ie])}),Ne},getPropsData:(...Ne)=>Ne.reduce(($e,Ce)=>(Array.isArray(Ce)&&Ce.forEach(Ie=>{$e[Ie]=e[Ie]}),$e),{}),getColumnElIndex:(Ne,$e)=>Array.prototype.indexOf.call(Ne,$e),updateColumnOrder:()=>{r.value.store.commit("updateColumnOrder",g.columnConfig.value)}}}var defaultProps={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:e=>e.every(n=>["ascending","descending",null].includes(n))}};let columnIdSeed=1;var ElTableColumn$1=defineComponent({name:"ElTableColumn",components:{ElCheckbox},props:defaultProps,setup(e,{slots:n}){const r=getCurrentInstance(),g=ref({}),y=computed(()=>{let xe=r.parent;for(;xe&&!xe.tableId;)xe=xe.parent;return xe}),{registerNormalWatchers:k,registerComplexWatchers:$}=useWatcher(y,e),{columnId:V,isSubColumn:L,realHeaderAlign:z,columnOrTableParent:j,setColumnWidth:ae,setColumnForcedProps:oe,setColumnRenders:re,getPropsData:ue,getColumnElIndex:le,realAlign:de,updateColumnOrder:he}=useRender(e,n,y),_e=j.value;V.value=`${_e.tableId||_e.columnId}_column_${columnIdSeed++}`,onBeforeMount(()=>{L.value=y.value!==_e;const xe=e.type||"default",Ne=e.sortable===""?!0:e.sortable,$e=isUndefined(e.showOverflowTooltip)?_e.props.showOverflowTooltip:e.showOverflowTooltip,Ce={...cellStarts[xe],id:V.value,type:xe,property:e.prop||e.property,align:de,headerAlign:z,showOverflowTooltip:$e,filterable:e.filters||e.filterMethod,filteredValue:[],filterPlacement:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:Ne,index:e.index,rawColumnKey:r.vnode.key};let hn=ue(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement"]);hn=mergeOptions(Ce,hn),hn=compose(re,ae,oe)(hn),g.value=hn,k(),$()}),onMounted(()=>{var xe;const Ne=j.value,$e=L.value?Ne.vnode.el.children:(xe=Ne.refs.hiddenColumns)==null?void 0:xe.children,Ce=()=>le($e||[],r.vnode.el);g.value.getColumnIndex=Ce,Ce()>-1&&y.value.store.commit("insertColumn",g.value,L.value?Ne.columnConfig.value:null,he)}),onBeforeUnmount(()=>{y.value.store.commit("removeColumn",g.value,L.value?_e.columnConfig.value:null,he)}),r.columnId=V.value,r.columnConfig=g},render(){var e,n,r;try{const g=(n=(e=this.$slots).default)==null?void 0:n.call(e,{row:{},column:{},$index:-1}),y=[];if(Array.isArray(g))for(const $ of g)((r=$.type)==null?void 0:r.name)==="ElTableColumn"||$.shapeFlag&2?y.push($):$.type===Fragment&&Array.isArray($.children)&&$.children.forEach(V=>{V?.patchFlag!==1024&&!isString$3(V?.children)&&y.push(V)});return h$1("div",y)}catch{return h$1("div",[])}}});const ElTable=withInstall(Table,{TableColumn:ElTableColumn$1}),ElTableColumn=withNoopInstall(ElTableColumn$1);var SortOrder=(e=>(e.ASC="asc",e.DESC="desc",e))(SortOrder||{}),Alignment=(e=>(e.CENTER="center",e.RIGHT="right",e))(Alignment||{}),FixedDir=(e=>(e.LEFT="left",e.RIGHT="right",e))(FixedDir||{});const oppositeOrderMap={asc:"desc",desc:"asc"},placeholderSign=Symbol("placeholder"),calcColumnStyle=(e,n,r)=>{var g;const y={flexGrow:0,flexShrink:0,...r?{}:{flexGrow:e.flexGrow||0,flexShrink:e.flexShrink||1}};r||(y.flexShrink=1);const k={...(g=e.style)!=null?g:{},...y,flexBasis:"auto",width:e.width};return n||(e.maxWidth&&(k.maxWidth=e.maxWidth),e.minWidth&&(k.minWidth=e.minWidth)),k};function useColumns(e,n,r){const g=computed(()=>unref(n).filter(le=>!le.hidden)),y=computed(()=>unref(g).filter(le=>le.fixed==="left"||le.fixed===!0)),k=computed(()=>unref(g).filter(le=>le.fixed==="right")),$=computed(()=>unref(g).filter(le=>!le.fixed)),V=computed(()=>{const le=[];return unref(y).forEach(de=>{le.push({...de,placeholderSign})}),unref($).forEach(de=>{le.push(de)}),unref(k).forEach(de=>{le.push({...de,placeholderSign})}),le}),L=computed(()=>unref(y).length||unref(k).length),z=computed(()=>unref(n).reduce((de,he)=>(de[he.key]=calcColumnStyle(he,unref(r),e.fixed),de),{})),j=computed(()=>unref(g).reduce((le,de)=>le+de.width,0)),ae=le=>unref(n).find(de=>de.key===le),oe=le=>unref(z)[le],re=(le,de)=>{le.width=de};function ue(le){var de;const{key:he}=le.currentTarget.dataset;if(!he)return;const{sortState:_e,sortBy:xe}=e;let Ne=SortOrder.ASC;isObject$3(_e)?Ne=oppositeOrderMap[_e[he]]:Ne=oppositeOrderMap[xe.order],(de=e.onColumnSort)==null||de.call(e,{column:ae(he),key:he,order:Ne})}return{columns:n,columnsStyles:z,columnsTotalWidth:j,fixedColumnsOnLeft:y,fixedColumnsOnRight:k,hasFixedColumns:L,mainColumns:V,normalColumns:$,visibleColumns:g,getColumn:ae,getColumnStyle:oe,updateColumnWidth:re,onColumnSorted:ue}}const useScrollbar=(e,{mainTableRef:n,leftTableRef:r,rightTableRef:g,onMaybeEndReached:y})=>{const k=ref({scrollLeft:0,scrollTop:0});function $(re){var ue,le,de;const{scrollTop:he}=re;(ue=n.value)==null||ue.scrollTo(re),(le=r.value)==null||le.scrollToTop(he),(de=g.value)==null||de.scrollToTop(he)}function V(re){k.value=re,$(re)}function L(re){k.value.scrollTop=re,$(unref(k))}function z(re){var ue,le;k.value.scrollLeft=re,(le=(ue=n.value)==null?void 0:ue.scrollTo)==null||le.call(ue,unref(k))}function j(re){var ue;V(re),(ue=e.onScroll)==null||ue.call(e,re)}function ae({scrollTop:re}){const{scrollTop:ue}=unref(k);re!==ue&&L(re)}function oe(re,ue="auto"){var le;(le=n.value)==null||le.scrollToRow(re,ue)}return watch(()=>unref(k).scrollTop,(re,ue)=>{re>ue&&y()}),{scrollPos:k,scrollTo:V,scrollToLeft:z,scrollToTop:L,scrollToRow:oe,onScroll:j,onVerticalScroll:ae}},useRow=(e,{mainTableRef:n,leftTableRef:r,rightTableRef:g})=>{const y=getCurrentInstance(),{emit:k}=y,$=shallowRef(!1),V=shallowRef(null),L=ref(e.defaultExpandedRowKeys||[]),z=ref(-1),j=shallowRef(null),ae=ref({}),oe=ref({}),re=shallowRef({}),ue=shallowRef({}),le=shallowRef({}),de=computed(()=>isNumber$1(e.estimatedRowHeight));function he(ze){var Ue;(Ue=e.onRowsRendered)==null||Ue.call(e,ze),ze.rowCacheEnd>unref(z)&&(z.value=ze.rowCacheEnd)}function _e({hovered:ze,rowKey:Ue}){V.value=ze?Ue:null}function xe({expanded:ze,rowData:Ue,rowIndex:Pt,rowKey:hn}){var Dt,xn;const jt=[...unref(L)],Vn=jt.indexOf(hn);ze?Vn===-1&&jt.push(hn):Vn>-1&&jt.splice(Vn,1),L.value=jt,k("update:expandedRowKeys",jt),(Dt=e.onRowExpand)==null||Dt.call(e,{expanded:ze,rowData:Ue,rowIndex:Pt,rowKey:hn}),(xn=e.onExpandedRowsChange)==null||xn.call(e,jt)}const Ne=debounce(()=>{var ze,Ue,Pt,hn;$.value=!0,ae.value={...unref(ae),...unref(oe)},$e(unref(j),!1),oe.value={},j.value=null,(ze=n.value)==null||ze.forceUpdate(),(Ue=r.value)==null||Ue.forceUpdate(),(Pt=g.value)==null||Pt.forceUpdate(),(hn=y.proxy)==null||hn.$forceUpdate(),$.value=!1},0);function $e(ze,Ue=!1){unref(de)&&[n,r,g].forEach(Pt=>{const hn=unref(Pt);hn&&hn.resetAfterRowIndex(ze,Ue)})}function Ce(ze,Ue,Pt){const hn=unref(j);(hn===null||hn>Pt)&&(j.value=Pt),oe.value[ze]=Ue}function Ie({rowKey:ze,height:Ue,rowIndex:Pt},hn){hn?hn===FixedDir.RIGHT?le.value[ze]=Ue:re.value[ze]=Ue:ue.value[ze]=Ue;const Dt=Math.max(...[re,le,ue].map(xn=>xn.value[ze]||0));unref(ae)[ze]!==Dt&&(Ce(ze,Dt,Pt),Ne())}return{hoveringRowKey:V,expandedRowKeys:L,lastRenderedRowIndex:z,isDynamic:de,isResetting:$,rowHeights:ae,resetAfterIndex:$e,onRowExpanded:xe,onRowHovered:_e,onRowsRendered:he,onRowHeightChange:Ie}},useData=(e,{expandedRowKeys:n,lastRenderedRowIndex:r,resetAfterIndex:g})=>{const y=ref({}),k=computed(()=>{const V={},{data:L,rowKey:z}=e,j=unref(n);if(!j||!j.length)return L;const ae=[],oe=new Set;j.forEach(ue=>oe.add(ue));let re=L.slice();for(re.forEach(ue=>V[ue[z]]=0);re.length>0;){const ue=re.shift();ae.push(ue),oe.has(ue[z])&&Array.isArray(ue.children)&&ue.children.length>0&&(re=[...ue.children,...re],ue.children.forEach(le=>V[le[z]]=V[ue[z]]+1))}return y.value=V,ae}),$=computed(()=>{const{data:V,expandColumnKey:L}=e;return L?unref(k):V});return watch($,(V,L)=>{V!==L&&(r.value=-1,g(0,!0))}),{data:$,depthMap:y}},sumReducer=(e,n)=>e+n,sum=e=>isArray$3(e)?e.reduce(sumReducer,0):e,tryCall=(e,n,r={})=>isFunction$3(e)?e(n):e??r,enforceUnit=e=>(["width","maxWidth","minWidth","height"].forEach(n=>{e[n]=addUnit(e[n])}),e),componentToSlot=e=>isVNode$1(e)?n=>h$1(e,n):e,useStyles=(e,{columnsTotalWidth:n,data:r,fixedColumnsOnLeft:g,fixedColumnsOnRight:y})=>{const k=computed(()=>{const{fixed:xe,width:Ne,vScrollbarSize:$e}=e,Ce=Ne-$e;return xe?Math.max(Math.round(unref(n)),Ce):Ce}),$=computed(()=>unref(k)+(e.fixed?e.vScrollbarSize:0)),V=computed(()=>{const{height:xe=0,maxHeight:Ne=0,footerHeight:$e,hScrollbarSize:Ce}=e;if(Ne>0){const Ie=unref(ue),ze=unref(L),Pt=unref(re)+Ie+ze+Ce;return Math.min(Pt,Ne-$e)}return xe-$e}),L=computed(()=>{const{rowHeight:xe,estimatedRowHeight:Ne}=e,$e=unref(r);return isNumber$1(Ne)?$e.length*Ne:$e.length*xe}),z=computed(()=>{const{maxHeight:xe}=e,Ne=unref(V);if(isNumber$1(xe)&&xe>0)return Ne;const $e=unref(L)+unref(re)+unref(ue);return Math.min(Ne,$e)}),j=xe=>xe.width,ae=computed(()=>sum(unref(g).map(j))),oe=computed(()=>sum(unref(y).map(j))),re=computed(()=>sum(e.headerHeight)),ue=computed(()=>{var xe;return(((xe=e.fixedData)==null?void 0:xe.length)||0)*e.rowHeight}),le=computed(()=>unref(V)-unref(re)-unref(ue)),de=computed(()=>{const{style:xe={},height:Ne,width:$e}=e;return enforceUnit({...xe,height:Ne,width:$e})}),he=computed(()=>enforceUnit({height:e.footerHeight})),_e=computed(()=>({top:addUnit(unref(re)),bottom:addUnit(e.footerHeight),width:addUnit(e.width)}));return{bodyWidth:k,fixedTableHeight:z,mainTableHeight:V,leftTableWidth:ae,rightTableWidth:oe,headerWidth:$,rowsHeight:L,windowHeight:le,footerHeight:he,emptyStyle:_e,rootStyle:de,headerHeight:re}},useAutoResize=e=>{const n=ref(),r=ref(0),g=ref(0);let y;return onMounted(()=>{y=useResizeObserver(n,([k])=>{const{width:$,height:V}=k.contentRect,{paddingLeft:L,paddingRight:z,paddingTop:j,paddingBottom:ae}=getComputedStyle(k.target),oe=Number.parseInt(L)||0,re=Number.parseInt(z)||0,ue=Number.parseInt(j)||0,le=Number.parseInt(ae)||0;r.value=$-oe-re,g.value=V-ue-le}).stop}),onBeforeUnmount(()=>{y?.()}),watch([r,g],([k,$])=>{var V;(V=e.onResize)==null||V.call(e,{width:k,height:$})}),{sizer:n,width:r,height:g}};function useTable(e){const n=ref(),r=ref(),g=ref(),{columns:y,columnsStyles:k,columnsTotalWidth:$,fixedColumnsOnLeft:V,fixedColumnsOnRight:L,hasFixedColumns:z,mainColumns:j,onColumnSorted:ae}=useColumns(e,toRef(e,"columns"),toRef(e,"fixed")),{scrollTo:oe,scrollToLeft:re,scrollToTop:ue,scrollToRow:le,onScroll:de,onVerticalScroll:he,scrollPos:_e}=useScrollbar(e,{mainTableRef:n,leftTableRef:r,rightTableRef:g,onMaybeEndReached:sa}),{expandedRowKeys:xe,hoveringRowKey:Ne,lastRenderedRowIndex:$e,isDynamic:Ce,isResetting:Ie,rowHeights:ze,resetAfterIndex:Ue,onRowExpanded:Pt,onRowHeightChange:hn,onRowHovered:Dt,onRowsRendered:xn}=useRow(e,{mainTableRef:n,leftTableRef:r,rightTableRef:g}),{data:jt,depthMap:Vn}=useData(e,{expandedRowKeys:xe,lastRenderedRowIndex:$e,resetAfterIndex:Ue}),{bodyWidth:Rn,fixedTableHeight:Tn,mainTableHeight:Ln,leftTableWidth:Sn,rightTableWidth:An,headerWidth:In,rowsHeight:Mn,windowHeight:ra,footerHeight:da,emptyStyle:ua,rootStyle:aa,headerHeight:Nn}=useStyles(e,{columnsTotalWidth:$,data:jt,fixedColumnsOnLeft:V,fixedColumnsOnRight:L}),En=shallowRef(!1),Zn=ref(),ha=computed(()=>{const Hn=unref(jt).length===0;return isArray$3(e.fixedData)?e.fixedData.length===0&&Hn:Hn});function xa(Hn){const{estimatedRowHeight:bn,rowHeight:Xn,rowKey:$n}=e;return bn?unref(ze)[unref(jt)[Hn][$n]]||bn:Xn}function sa(){const{onEndReached:Hn}=e;if(!Hn)return;const{scrollTop:bn}=unref(_e),Xn=unref(Mn),$n=unref(ra),kt=Xn-(bn+$n)+e.hScrollbarSize;unref($e)>=0&&Xn===bn+unref(Ln)-unref(Nn)&&Hn(kt)}return watch(()=>e.expandedRowKeys,Hn=>xe.value=Hn,{deep:!0}),{columns:y,containerRef:Zn,mainTableRef:n,leftTableRef:r,rightTableRef:g,isDynamic:Ce,isResetting:Ie,isScrolling:En,hoveringRowKey:Ne,hasFixedColumns:z,columnsStyles:k,columnsTotalWidth:$,data:jt,expandedRowKeys:xe,depthMap:Vn,fixedColumnsOnLeft:V,fixedColumnsOnRight:L,mainColumns:j,bodyWidth:Rn,emptyStyle:ua,rootStyle:aa,headerWidth:In,footerHeight:da,mainTableHeight:Ln,fixedTableHeight:Tn,leftTableWidth:Sn,rightTableWidth:An,showEmpty:ha,getRowHeight:xa,onColumnSorted:ae,onRowHovered:Dt,onRowExpanded:Pt,onRowsRendered:xn,onRowHeightChange:hn,scrollTo:oe,scrollToLeft:re,scrollToTop:ue,scrollToRow:le,onScroll:de,onVerticalScroll:he}}const TableV2InjectionKey=Symbol("tableV2"),classType=String,columns={type:definePropType(Array),required:!0},fixedDataType={type:definePropType(Array)},dataType={...fixedDataType,required:!0},expandColumnKey=String,expandKeys={type:definePropType(Array),default:()=>mutable([])},requiredNumber={type:Number,required:!0},rowKey={type:definePropType([String,Number,Symbol]),default:"id"},styleType={type:definePropType(Object)},tableV2RowProps=buildProps({class:String,columns,columnsStyles:{type:definePropType(Object),required:!0},depth:Number,expandColumnKey,estimatedRowHeight:{...virtualizedGridProps.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:definePropType(Function)},onRowHover:{type:definePropType(Function)},onRowHeightChange:{type:definePropType(Function)},rowData:{type:definePropType(Object),required:!0},rowEventHandlers:{type:definePropType(Object)},rowIndex:{type:Number,required:!0},rowKey,style:{type:definePropType(Object)}}),requiredNumberType={type:Number,required:!0},tableV2HeaderProps=buildProps({class:String,columns,fixedHeaderData:{type:definePropType(Array)},headerData:{type:definePropType(Array),required:!0},headerHeight:{type:definePropType([Number,Array]),default:50},rowWidth:requiredNumberType,rowHeight:{type:Number,default:50},height:requiredNumberType,width:requiredNumberType}),tableV2GridProps=buildProps({columns,data:dataType,fixedData:fixedDataType,estimatedRowHeight:tableV2RowProps.estimatedRowHeight,width:requiredNumber,height:requiredNumber,headerWidth:requiredNumber,headerHeight:tableV2HeaderProps.headerHeight,bodyWidth:requiredNumber,rowHeight:requiredNumber,cache:virtualizedListProps.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:virtualizedGridProps.scrollbarAlwaysOn,scrollbarStartGap:virtualizedGridProps.scrollbarStartGap,scrollbarEndGap:virtualizedGridProps.scrollbarEndGap,class:classType,style:styleType,containerStyle:styleType,getRowHeight:{type:definePropType(Function),required:!0},rowKey:tableV2RowProps.rowKey,onRowsRendered:{type:definePropType(Function)},onScroll:{type:definePropType(Function)}}),tableV2Props=buildProps({cache:tableV2GridProps.cache,estimatedRowHeight:tableV2RowProps.estimatedRowHeight,rowKey,headerClass:{type:definePropType([String,Function])},headerProps:{type:definePropType([Object,Function])},headerCellProps:{type:definePropType([Object,Function])},headerHeight:tableV2HeaderProps.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:definePropType([String,Function])},rowProps:{type:definePropType([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:definePropType([Object,Function])},columns,data:dataType,dataGetter:{type:definePropType(Function)},fixedData:fixedDataType,expandColumnKey:tableV2RowProps.expandColumnKey,expandedRowKeys:expandKeys,defaultExpandedRowKeys:expandKeys,class:classType,fixed:Boolean,style:{type:definePropType(Object)},width:requiredNumber,height:requiredNumber,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:virtualizedGridProps.hScrollbarSize,vScrollbarSize:virtualizedGridProps.vScrollbarSize,scrollbarAlwaysOn:virtualizedScrollbarProps.alwaysOn,sortBy:{type:definePropType(Object),default:()=>({})},sortState:{type:definePropType(Object),default:void 0},onColumnSort:{type:definePropType(Function)},onExpandedRowsChange:{type:definePropType(Function)},onEndReached:{type:definePropType(Function)},onRowExpand:tableV2RowProps.onRowExpand,onScroll:tableV2GridProps.onScroll,onRowsRendered:tableV2GridProps.onRowsRendered,rowEventHandlers:tableV2RowProps.rowEventHandlers}),TableV2Cell=(e,{slots:n})=>{var r;const{cellData:g,style:y}=e,k=((r=g?.toString)==null?void 0:r.call(g))||"";return createVNode("div",{class:e.class,title:k,style:y},[n.default?n.default(e):k])};TableV2Cell.displayName="ElTableV2Cell";TableV2Cell.inheritAttrs=!1;const HeaderCell=(e,{slots:n})=>{var r,g;return n.default?n.default(e):createVNode("div",{class:e.class,title:(r=e.column)==null?void 0:r.title},[(g=e.column)==null?void 0:g.title])};HeaderCell.displayName="ElTableV2HeaderCell";HeaderCell.inheritAttrs=!1;const tableV2HeaderRowProps=buildProps({class:String,columns,columnsStyles:{type:definePropType(Object),required:!0},headerIndex:Number,style:{type:definePropType(Object)}}),TableV2HeaderRow=defineComponent({name:"ElTableV2HeaderRow",props:tableV2HeaderRowProps,setup(e,{slots:n}){return()=>{const{columns:r,columnsStyles:g,headerIndex:y,style:k}=e;let $=r.map((V,L)=>n.cell({columns:r,column:V,columnIndex:L,headerIndex:y,style:g[V.key]}));return n.header&&($=n.header({cells:$.map(V=>isArray$3(V)&&V.length===1?V[0]:V),columns:r,headerIndex:y})),createVNode("div",{class:e.class,style:k,role:"row"},[$])}}}),COMPONENT_NAME$7="ElTableV2Header",TableV2Header=defineComponent({name:COMPONENT_NAME$7,props:tableV2HeaderProps,setup(e,{slots:n,expose:r}){const g=useNamespace("table-v2"),y=ref(),k=computed(()=>enforceUnit({width:e.width,height:e.height})),$=computed(()=>enforceUnit({width:e.rowWidth,height:e.height})),V=computed(()=>castArray$1(unref(e.headerHeight))),L=ae=>{const oe=unref(y);nextTick(()=>{oe?.scroll&&oe.scroll({left:ae})})},z=()=>{const ae=g.e("fixed-header-row"),{columns:oe,fixedHeaderData:re,rowHeight:ue}=e;return re?.map((le,de)=>{var he;const _e=enforceUnit({height:ue,width:"100%"});return(he=n.fixed)==null?void 0:he.call(n,{class:ae,columns:oe,rowData:le,rowIndex:-(de+1),style:_e})})},j=()=>{const ae=g.e("dynamic-header-row"),{columns:oe}=e;return unref(V).map((re,ue)=>{var le;const de=enforceUnit({width:"100%",height:re});return(le=n.dynamic)==null?void 0:le.call(n,{class:ae,columns:oe,headerIndex:ue,style:de})})};return r({scrollToLeft:L}),()=>{if(!(e.height<=0))return createVNode("div",{ref:y,class:e.class,style:unref(k),role:"rowgroup"},[createVNode("div",{style:unref($),class:g.e("header")},[j(),z()])])}}}),useTableRow=e=>{const{isScrolling:n}=inject(TableV2InjectionKey),r=ref(!1),g=ref(),y=computed(()=>isNumber$1(e.estimatedRowHeight)&&e.rowIndex>=0),k=(L=!1)=>{const z=unref(g);if(!z)return;const{columns:j,onRowHeightChange:ae,rowKey:oe,rowIndex:re,style:ue}=e,{height:le}=z.getBoundingClientRect();r.value=!0,nextTick(()=>{if(L||le!==Number.parseInt(ue.height)){const de=j[0],he=de?.placeholderSign===placeholderSign;ae?.({rowKey:oe,height:le,rowIndex:re},de&&!he&&de.fixed)}})},$=computed(()=>{const{rowData:L,rowIndex:z,rowKey:j,onRowHover:ae}=e,oe=e.rowEventHandlers||{},re={};return Object.entries(oe).forEach(([ue,le])=>{isFunction$3(le)&&(re[ue]=de=>{le({event:de,rowData:L,rowIndex:z,rowKey:j})})}),ae&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:ue,hovered:le})=>{const de=re[ue];re[ue]=he=>{ae({event:he,hovered:le,rowData:L,rowIndex:z,rowKey:j}),de?.(he)}}),re}),V=L=>{const{onRowExpand:z,rowData:j,rowIndex:ae,rowKey:oe}=e;z?.({expanded:L,rowData:j,rowIndex:ae,rowKey:oe})};return onMounted(()=>{unref(y)&&k(!0)}),{isScrolling:n,measurable:y,measured:r,rowRef:g,eventHandlers:$,onExpand:V}},COMPONENT_NAME$6="ElTableV2TableRow",TableV2Row=defineComponent({name:COMPONENT_NAME$6,props:tableV2RowProps,setup(e,{expose:n,slots:r,attrs:g}){const{eventHandlers:y,isScrolling:k,measurable:$,measured:V,rowRef:L,onExpand:z}=useTableRow(e);return n({onExpand:z}),()=>{const{columns:j,columnsStyles:ae,expandColumnKey:oe,depth:re,rowData:ue,rowIndex:le,style:de}=e;let he=j.map((_e,xe)=>{const Ne=isArray$3(ue.children)&&ue.children.length>0&&_e.key===oe;return r.cell({column:_e,columns:j,columnIndex:xe,depth:re,style:ae[_e.key],rowData:ue,rowIndex:le,isScrolling:unref(k),expandIconProps:Ne?{rowData:ue,rowIndex:le,onExpand:z}:void 0})});if(r.row&&(he=r.row({cells:he.map(_e=>isArray$3(_e)&&_e.length===1?_e[0]:_e),style:de,columns:j,depth:re,rowData:ue,rowIndex:le,isScrolling:unref(k)})),unref($)){const{height:_e,...xe}=de||{},Ne=unref(V);return createVNode("div",mergeProps({ref:L,class:e.class,style:Ne?de:xe,role:"row"},g,unref(y)),[he])}return createVNode("div",mergeProps(g,{ref:L,class:e.class,style:de,role:"row"},unref(y)),[he])}}}),SortIcon=e=>{const{sortOrder:n}=e;return createVNode(ElIcon,{size:14,class:e.class},{default:()=>[n===SortOrder.ASC?createVNode(sort_up_default,null,null):createVNode(sort_down_default,null,null)]})},ExpandIcon=e=>{const{expanded:n,expandable:r,onExpand:g,style:y,size:k}=e,$={onClick:r?()=>g(!n):void 0,class:e.class};return createVNode(ElIcon,mergeProps($,{size:k,style:y}),{default:()=>[createVNode(arrow_right_default,null,null)]})},COMPONENT_NAME$5="ElTableV2Grid",useTableGrid=e=>{const n=ref(),r=ref(),g=computed(()=>{const{data:le,rowHeight:de,estimatedRowHeight:he}=e;if(!he)return le.length*de}),y=computed(()=>{const{fixedData:le,rowHeight:de}=e;return(le?.length||0)*de}),k=computed(()=>sum(e.headerHeight)),$=computed(()=>{const{height:le}=e;return Math.max(0,le-unref(k)-unref(y))}),V=computed(()=>unref(k)+unref(y)>0),L=({data:le,rowIndex:de})=>le[de][e.rowKey];function z({rowCacheStart:le,rowCacheEnd:de,rowVisibleStart:he,rowVisibleEnd:_e}){var xe;(xe=e.onRowsRendered)==null||xe.call(e,{rowCacheStart:le,rowCacheEnd:de,rowVisibleStart:he,rowVisibleEnd:_e})}function j(le,de){var he;(he=r.value)==null||he.resetAfterRowIndex(le,de)}function ae(le,de){const he=unref(n),_e=unref(r);!he||!_e||(isObject$3(le)?(he.scrollToLeft(le.scrollLeft),_e.scrollTo(le)):(he.scrollToLeft(le),_e.scrollTo({scrollLeft:le,scrollTop:de})))}function oe(le){var de;(de=unref(r))==null||de.scrollTo({scrollTop:le})}function re(le,de){var he;(he=unref(r))==null||he.scrollToItem(le,1,de)}function ue(){var le,de;(le=unref(r))==null||le.$forceUpdate(),(de=unref(n))==null||de.$forceUpdate()}return{bodyRef:r,forceUpdate:ue,fixedRowHeight:y,gridHeight:$,hasHeader:V,headerHeight:k,headerRef:n,totalHeight:g,itemKey:L,onItemRendered:z,resetAfterRowIndex:j,scrollTo:ae,scrollToTop:oe,scrollToRow:re}},TableGrid=defineComponent({name:COMPONENT_NAME$5,props:tableV2GridProps,setup(e,{slots:n,expose:r}){const{ns:g}=inject(TableV2InjectionKey),{bodyRef:y,fixedRowHeight:k,gridHeight:$,hasHeader:V,headerRef:L,headerHeight:z,totalHeight:j,forceUpdate:ae,itemKey:oe,onItemRendered:re,resetAfterRowIndex:ue,scrollTo:le,scrollToTop:de,scrollToRow:he}=useTableGrid(e);r({forceUpdate:ae,totalHeight:j,scrollTo:le,scrollToTop:de,scrollToRow:he,resetAfterRowIndex:ue});const _e=()=>e.bodyWidth;return()=>{const{cache:xe,columns:Ne,data:$e,fixedData:Ce,useIsScrolling:Ie,scrollbarAlwaysOn:ze,scrollbarEndGap:Ue,scrollbarStartGap:Pt,style:hn,rowHeight:Dt,bodyWidth:xn,estimatedRowHeight:jt,headerWidth:Vn,height:Rn,width:Tn,getRowHeight:Ln,onScroll:Sn}=e,An=isNumber$1(jt),In=An?DynamicSizeGrid:FixedSizeGrid,Mn=unref(z);return createVNode("div",{role:"table",class:[g.e("table"),e.class],style:hn},[createVNode(In,{ref:y,data:$e,useIsScrolling:Ie,itemKey:oe,columnCache:0,columnWidth:An?_e:xn,totalColumn:1,totalRow:$e.length,rowCache:xe,rowHeight:An?Ln:Dt,width:Tn,height:unref($),class:g.e("body"),role:"rowgroup",scrollbarStartGap:Pt,scrollbarEndGap:Ue,scrollbarAlwaysOn:ze,onScroll:Sn,onItemRendered:re,perfMode:!1},{default:ra=>{var da;const ua=$e[ra.rowIndex];return(da=n.row)==null?void 0:da.call(n,{...ra,columns:Ne,rowData:ua})}}),unref(V)&&createVNode(TableV2Header,{ref:L,class:g.e("header-wrapper"),columns:Ne,headerData:$e,headerHeight:e.headerHeight,fixedHeaderData:Ce,rowWidth:Vn,rowHeight:Dt,width:Tn,height:Math.min(Mn+unref(k),Rn)},{dynamic:n.header,fixed:n.row})])}}});function _isSlot$5(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!isVNode$1(e)}const MainTable=(e,{slots:n})=>{const{mainTableRef:r,...g}=e;return createVNode(TableGrid,mergeProps({ref:r},g),_isSlot$5(n)?n:{default:()=>[n]})};function _isSlot$4(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!isVNode$1(e)}const LeftTable$1=(e,{slots:n})=>{if(!e.columns.length)return;const{leftTableRef:r,...g}=e;return createVNode(TableGrid,mergeProps({ref:r},g),_isSlot$4(n)?n:{default:()=>[n]})};function _isSlot$3(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!isVNode$1(e)}const LeftTable=(e,{slots:n})=>{if(!e.columns.length)return;const{rightTableRef:r,...g}=e;return createVNode(TableGrid,mergeProps({ref:r},g),_isSlot$3(n)?n:{default:()=>[n]})};function _isSlot$2(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!isVNode$1(e)}const RowRenderer=(e,{slots:n})=>{const{columns:r,columnsStyles:g,depthMap:y,expandColumnKey:k,expandedRowKeys:$,estimatedRowHeight:V,hasFixedColumns:L,hoveringRowKey:z,rowData:j,rowIndex:ae,style:oe,isScrolling:re,rowProps:ue,rowClass:le,rowKey:de,rowEventHandlers:he,ns:_e,onRowHovered:xe,onRowExpanded:Ne}=e,$e=tryCall(le,{columns:r,rowData:j,rowIndex:ae},""),Ce=tryCall(ue,{columns:r,rowData:j,rowIndex:ae}),Ie=j[de],ze=y[Ie]||0,Ue=!!k,Pt=ae<0,hn=[_e.e("row"),$e,{[_e.e(`row-depth-${ze}`)]:Ue&&ae>=0,[_e.is("expanded")]:Ue&&$.includes(Ie),[_e.is("hovered")]:!re&&Ie===z,[_e.is("fixed")]:!ze&&Pt,[_e.is("customized")]:!!n.row}],Dt=L?xe:void 0,xn={...Ce,columns:r,columnsStyles:g,class:hn,depth:ze,expandColumnKey:k,estimatedRowHeight:Pt?void 0:V,isScrolling:re,rowIndex:ae,rowData:j,rowKey:Ie,rowEventHandlers:he,style:oe};return createVNode(TableV2Row,mergeProps(xn,{onRowHover:Dt,onRowExpand:Ne}),_isSlot$2(n)?n:{default:()=>[n]})},CellRenderer=({columns:e,column:n,columnIndex:r,depth:g,expandIconProps:y,isScrolling:k,rowData:$,rowIndex:V,style:L,expandedRowKeys:z,ns:j,cellProps:ae,expandColumnKey:oe,indentSize:re,iconSize:ue,rowKey:le},{slots:de})=>{const he=enforceUnit(L);if(n.placeholderSign===placeholderSign)return createVNode("div",{class:j.em("row-cell","placeholder"),style:he},null);const{cellRenderer:_e,dataKey:xe,dataGetter:Ne}=n,Ce=componentToSlot(_e)||de.default||(Rn=>createVNode(TableV2Cell,Rn,null)),Ie=isFunction$3(Ne)?Ne({columns:e,column:n,columnIndex:r,rowData:$,rowIndex:V}):get($,xe??""),ze=tryCall(ae,{cellData:Ie,columns:e,column:n,columnIndex:r,rowIndex:V,rowData:$}),Ue={class:j.e("cell-text"),columns:e,column:n,columnIndex:r,cellData:Ie,isScrolling:k,rowData:$,rowIndex:V},Pt=Ce(Ue),hn=[j.e("row-cell"),n.class,n.align===Alignment.CENTER&&j.is("align-center"),n.align===Alignment.RIGHT&&j.is("align-right")],Dt=V>=0&&oe&&n.key===oe,xn=V>=0&&z.includes($[le]);let jt;const Vn=`margin-inline-start: ${g*re}px;`;return Dt&&(isObject$3(y)?jt=createVNode(ExpandIcon,mergeProps(y,{class:[j.e("expand-icon"),j.is("expanded",xn)],size:ue,expanded:xn,style:Vn,expandable:!0}),null):jt=createVNode("div",{style:[Vn,`width: ${ue}px; height: ${ue}px;`].join(" ")},null)),createVNode("div",mergeProps({class:hn,style:he},ze,{role:"cell"}),[jt,Pt])};CellRenderer.inheritAttrs=!1;function _isSlot$1(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!isVNode$1(e)}const HeaderRenderer=({columns:e,columnsStyles:n,headerIndex:r,style:g,headerClass:y,headerProps:k,ns:$},{slots:V})=>{const L={columns:e,headerIndex:r},z=[$.e("header-row"),tryCall(y,L,""),{[$.is("customized")]:!!V.header}],j={...tryCall(k,L),columnsStyles:n,class:z,columns:e,headerIndex:r,style:g};return createVNode(TableV2HeaderRow,j,_isSlot$1(V)?V:{default:()=>[V]})},HeaderCellRenderer=(e,{slots:n})=>{const{column:r,ns:g,style:y,onColumnSorted:k}=e,$=enforceUnit(y);if(r.placeholderSign===placeholderSign)return createVNode("div",{class:g.em("header-row-cell","placeholder"),style:$},null);const{headerCellRenderer:V,headerClass:L,sortable:z}=r,j={...e,class:g.e("header-cell-text")},oe=(componentToSlot(V)||n.default||(Ne=>createVNode(HeaderCell,Ne,null)))(j),{sortBy:re,sortState:ue,headerCellProps:le}=e;let de,he;if(ue){const Ne=ue[r.key];de=!!oppositeOrderMap[Ne],he=de?Ne:SortOrder.ASC}else de=r.key===re.key,he=de?re.order:SortOrder.ASC;const _e=[g.e("header-cell"),tryCall(L,e,""),r.align===Alignment.CENTER&&g.is("align-center"),r.align===Alignment.RIGHT&&g.is("align-right"),z&&g.is("sortable")],xe={...tryCall(le,e),onClick:r.sortable?k:void 0,class:_e,style:$,"data-key":r.key};return createVNode("div",mergeProps(xe,{role:"columnheader"}),[oe,z&&createVNode(SortIcon,{class:[g.e("sort-icon"),de&&g.is("sorting")],sortOrder:he},null)])},Footer$1=(e,{slots:n})=>{var r;return createVNode("div",{class:e.class,style:e.style},[(r=n.default)==null?void 0:r.call(n)])};Footer$1.displayName="ElTableV2Footer";const Footer=(e,{slots:n})=>createVNode("div",{class:e.class,style:e.style},[n.default?n.default():createVNode(ElEmpty,null,null)]);Footer.displayName="ElTableV2Empty";const Overlay=(e,{slots:n})=>{var r;return createVNode("div",{class:e.class,style:e.style},[(r=n.default)==null?void 0:r.call(n)])};Overlay.displayName="ElTableV2Overlay";function _isSlot(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!isVNode$1(e)}const COMPONENT_NAME$4="ElTableV2",TableV2=defineComponent({name:COMPONENT_NAME$4,props:tableV2Props,setup(e,{slots:n,expose:r}){const g=useNamespace("table-v2"),{columnsStyles:y,fixedColumnsOnLeft:k,fixedColumnsOnRight:$,mainColumns:V,mainTableHeight:L,fixedTableHeight:z,leftTableWidth:j,rightTableWidth:ae,data:oe,depthMap:re,expandedRowKeys:ue,hasFixedColumns:le,hoveringRowKey:de,mainTableRef:he,leftTableRef:_e,rightTableRef:xe,isDynamic:Ne,isResetting:$e,isScrolling:Ce,bodyWidth:Ie,emptyStyle:ze,rootStyle:Ue,headerWidth:Pt,footerHeight:hn,showEmpty:Dt,scrollTo:xn,scrollToLeft:jt,scrollToTop:Vn,scrollToRow:Rn,getRowHeight:Tn,onColumnSorted:Ln,onRowHeightChange:Sn,onRowHovered:An,onRowExpanded:In,onRowsRendered:Mn,onScroll:ra,onVerticalScroll:da}=useTable(e);return r({scrollTo:xn,scrollToLeft:jt,scrollToTop:Vn,scrollToRow:Rn}),provide(TableV2InjectionKey,{ns:g,isResetting:$e,hoveringRowKey:de,isScrolling:Ce}),()=>{const{cache:ua,cellProps:aa,estimatedRowHeight:Nn,expandColumnKey:En,fixedData:Zn,headerHeight:ha,headerClass:xa,headerProps:sa,headerCellProps:Hn,sortBy:bn,sortState:Xn,rowHeight:$n,rowClass:kt,rowEventHandlers:At,rowKey:Dn,rowProps:Qn,scrollbarAlwaysOn:oa,indentSize:na,iconSize:la,useIsScrolling:ma,vScrollbarSize:ca,width:pe}=e,Oe=unref(oe),Ve={cache:ua,class:g.e("main"),columns:unref(V),data:Oe,fixedData:Zn,estimatedRowHeight:Nn,bodyWidth:unref(Ie)+ca,headerHeight:ha,headerWidth:unref(Pt),height:unref(L),mainTableRef:he,rowKey:Dn,rowHeight:$n,scrollbarAlwaysOn:oa,scrollbarStartGap:2,scrollbarEndGap:ca,useIsScrolling:ma,width:pe,getRowHeight:Tn,onRowsRendered:Mn,onScroll:ra},qe=unref(j),Et=unref(z),Lt={cache:ua,class:g.e("left"),columns:unref(k),data:Oe,estimatedRowHeight:Nn,leftTableRef:_e,rowHeight:$n,bodyWidth:qe,headerWidth:qe,headerHeight:ha,height:Et,rowKey:Dn,scrollbarAlwaysOn:oa,scrollbarStartGap:2,scrollbarEndGap:ca,useIsScrolling:ma,width:qe,getRowHeight:Tn,onScroll:da},vn=unref(ae)+ca,wn={cache:ua,class:g.e("right"),columns:unref($),data:Oe,estimatedRowHeight:Nn,rightTableRef:xe,rowHeight:$n,bodyWidth:vn,headerWidth:vn,headerHeight:ha,height:Et,rowKey:Dn,scrollbarAlwaysOn:oa,scrollbarStartGap:2,scrollbarEndGap:ca,width:vn,style:`--${unref(g.namespace)}-table-scrollbar-size: ${ca}px`,useIsScrolling:ma,getRowHeight:Tn,onScroll:da},Cn=unref(y),Bn={ns:g,depthMap:unref(re),columnsStyles:Cn,expandColumnKey:En,expandedRowKeys:unref(ue),estimatedRowHeight:Nn,hasFixedColumns:unref(le),hoveringRowKey:unref(de),rowProps:Qn,rowClass:kt,rowKey:Dn,rowEventHandlers:At,onRowHovered:An,onRowExpanded:In,onRowHeightChange:Sn},zn={cellProps:aa,expandColumnKey:En,indentSize:na,iconSize:la,rowKey:Dn,expandedRowKeys:unref(ue),ns:g},Fn={ns:g,headerClass:xa,headerProps:sa,columnsStyles:Cn},Gn={ns:g,sortBy:bn,sortState:Xn,headerCellProps:Hn,onColumnSorted:Ln},Kn={row:Pn=>createVNode(RowRenderer,mergeProps(Pn,Bn),{row:n.row,cell:jn=>{let On;return n.cell?createVNode(CellRenderer,mergeProps(jn,zn,{style:Cn[jn.column.key]}),_isSlot(On=n.cell(jn))?On:{default:()=>[On]}):createVNode(CellRenderer,mergeProps(jn,zn,{style:Cn[jn.column.key]}),null)}}),header:Pn=>createVNode(HeaderRenderer,mergeProps(Pn,Fn),{header:n.header,cell:jn=>{let On;return n["header-cell"]?createVNode(HeaderCellRenderer,mergeProps(jn,Gn,{style:Cn[jn.column.key]}),_isSlot(On=n["header-cell"](jn))?On:{default:()=>[On]}):createVNode(HeaderCellRenderer,mergeProps(jn,Gn,{style:Cn[jn.column.key]}),null)}})},Wn=[e.class,g.b(),g.e("root"),{[g.is("dynamic")]:unref(Ne)}],ea={class:g.e("footer"),style:unref(hn)};return createVNode("div",{class:Wn,style:unref(Ue)},[createVNode(MainTable,Ve,_isSlot(Kn)?Kn:{default:()=>[Kn]}),createVNode(LeftTable$1,Lt,_isSlot(Kn)?Kn:{default:()=>[Kn]}),createVNode(LeftTable,wn,_isSlot(Kn)?Kn:{default:()=>[Kn]}),n.footer&&createVNode(Footer$1,ea,{default:n.footer}),unref(Dt)&&createVNode(Footer,{class:g.e("empty"),style:unref(ze)},{default:n.empty}),n.overlay&&createVNode(Overlay,{class:g.e("overlay")},{default:n.overlay})])}}}),autoResizerProps=buildProps({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:definePropType(Function)}}),AutoResizer=defineComponent({name:"ElAutoResizer",props:autoResizerProps,setup(e,{slots:n}){const r=useNamespace("auto-resizer"),{height:g,width:y,sizer:k}=useAutoResize(e),$={width:"100%",height:"100%"};return()=>{var V;return createVNode("div",{ref:k,class:r.b(),style:$},[(V=n.default)==null?void 0:V.call(n,{height:g.value,width:y.value})])}}}),ElTableV2=withInstall(TableV2),ElAutoResizer=withInstall(AutoResizer),tabsRootContextKey=Symbol("tabsRootContextKey"),tabBarProps=buildProps({tabs:{type:definePropType(Array),default:()=>mutable([])}}),COMPONENT_NAME$3="ElTabBar",__default__$k=defineComponent({name:COMPONENT_NAME$3}),_sfc_main$1G=defineComponent({...__default__$k,props:tabBarProps,setup(e,{expose:n}){const r=e,g=getCurrentInstance(),y=inject(tabsRootContextKey);y||throwError(COMPONENT_NAME$3,"<el-tabs><el-tab-bar /></el-tabs>");const k=useNamespace("tabs"),$=ref(),V=ref(),L=()=>{let j=0,ae=0;const oe=["top","bottom"].includes(y.props.tabPosition)?"width":"height",re=oe==="width"?"x":"y",ue=re==="x"?"left":"top";return r.tabs.every(le=>{var de,he;const _e=(he=(de=g.parent)==null?void 0:de.refs)==null?void 0:he[`tab-${le.uid}`];if(!_e)return!1;if(!le.active)return!0;j=_e[`offset${capitalize$1(ue)}`],ae=_e[`client${capitalize$1(oe)}`];const xe=window.getComputedStyle(_e);return oe==="width"&&(r.tabs.length>1&&(ae-=Number.parseFloat(xe.paddingLeft)+Number.parseFloat(xe.paddingRight)),j+=Number.parseFloat(xe.paddingLeft)),!1}),{[oe]:`${ae}px`,transform:`translate${capitalize$1(re)}(${j}px)`}},z=()=>V.value=L();return watch(()=>r.tabs,async()=>{await nextTick(),z()},{immediate:!0}),useResizeObserver($,()=>z()),n({ref:$,update:z}),(j,ae)=>(openBlock(),createElementBlock("div",{ref_key:"barRef",ref:$,class:normalizeClass([unref(k).e("active-bar"),unref(k).is(unref(y).props.tabPosition)]),style:normalizeStyle(V.value)},null,6))}});var TabBar=_export_sfc$1(_sfc_main$1G,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const tabNavProps=buildProps({panes:{type:definePropType(Array),default:()=>mutable([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),tabNavEmits={tabClick:(e,n,r)=>r instanceof Event,tabRemove:(e,n)=>n instanceof Event},COMPONENT_NAME$2="ElTabNav",TabNav=defineComponent({name:COMPONENT_NAME$2,props:tabNavProps,emits:tabNavEmits,setup(e,{expose:n,emit:r}){const g=getCurrentInstance(),y=inject(tabsRootContextKey);y||throwError(COMPONENT_NAME$2,"<el-tabs><tab-nav /></el-tabs>");const k=useNamespace("tabs"),$=useDocumentVisibility(),V=useWindowFocus(),L=ref(),z=ref(),j=ref(),ae=ref(),oe=ref(!1),re=ref(0),ue=ref(!1),le=ref(!0),de=computed(()=>["top","bottom"].includes(y.props.tabPosition)?"width":"height"),he=computed(()=>({transform:`translate${de.value==="width"?"X":"Y"}(-${re.value}px)`})),_e=()=>{if(!L.value)return;const Ue=L.value[`offset${capitalize$1(de.value)}`],Pt=re.value;if(!Pt)return;const hn=Pt>Ue?Pt-Ue:0;re.value=hn},xe=()=>{if(!L.value||!z.value)return;const Ue=z.value[`offset${capitalize$1(de.value)}`],Pt=L.value[`offset${capitalize$1(de.value)}`],hn=re.value;if(Ue-hn<=Pt)return;const Dt=Ue-hn>Pt*2?hn+Pt:Ue-Pt;re.value=Dt},Ne=async()=>{const Ue=z.value;if(!oe.value||!j.value||!L.value||!Ue)return;await nextTick();const Pt=j.value.querySelector(".is-active");if(!Pt)return;const hn=L.value,Dt=["top","bottom"].includes(y.props.tabPosition),xn=Pt.getBoundingClientRect(),jt=hn.getBoundingClientRect(),Vn=Dt?Ue.offsetWidth-jt.width:Ue.offsetHeight-jt.height,Rn=re.value;let Tn=Rn;Dt?(xn.left<jt.left&&(Tn=Rn-(jt.left-xn.left)),xn.right>jt.right&&(Tn=Rn+xn.right-jt.right)):(xn.top<jt.top&&(Tn=Rn-(jt.top-xn.top)),xn.bottom>jt.bottom&&(Tn=Rn+(xn.bottom-jt.bottom))),Tn=Math.max(Tn,0),re.value=Math.min(Tn,Vn)},$e=()=>{var Ue;if(!z.value||!L.value)return;e.stretch&&((Ue=ae.value)==null||Ue.update());const Pt=z.value[`offset${capitalize$1(de.value)}`],hn=L.value[`offset${capitalize$1(de.value)}`],Dt=re.value;hn<Pt?(oe.value=oe.value||{},oe.value.prev=Dt,oe.value.next=Dt+hn<Pt,Pt-Dt<hn&&(re.value=Pt-hn)):(oe.value=!1,Dt>0&&(re.value=0))},Ce=Ue=>{const Pt=Ue.code,{up:hn,down:Dt,left:xn,right:jt}=EVENT_CODE;if(![hn,Dt,xn,jt].includes(Pt))return;const Vn=Array.from(Ue.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),Rn=Vn.indexOf(Ue.target);let Tn;Pt===xn||Pt===hn?Rn===0?Tn=Vn.length-1:Tn=Rn-1:Rn<Vn.length-1?Tn=Rn+1:Tn=0,Vn[Tn].focus({preventScroll:!0}),Vn[Tn].click(),Ie()},Ie=()=>{le.value&&(ue.value=!0)},ze=()=>ue.value=!1;return watch($,Ue=>{Ue==="hidden"?le.value=!1:Ue==="visible"&&setTimeout(()=>le.value=!0,50)}),watch(V,Ue=>{Ue?setTimeout(()=>le.value=!0,50):le.value=!1}),useResizeObserver(j,$e),onMounted(()=>setTimeout(()=>Ne(),0)),onUpdated(()=>$e()),n({scrollToActiveTab:Ne,removeFocus:ze}),watch(()=>e.panes,()=>g.update(),{flush:"post",deep:!0}),()=>{const Ue=oe.value?[createVNode("span",{class:[k.e("nav-prev"),k.is("disabled",!oe.value.prev)],onClick:_e},[createVNode(ElIcon,null,{default:()=>[createVNode(arrow_left_default,null,null)]})]),createVNode("span",{class:[k.e("nav-next"),k.is("disabled",!oe.value.next)],onClick:xe},[createVNode(ElIcon,null,{default:()=>[createVNode(arrow_right_default,null,null)]})])]:null,Pt=e.panes.map((hn,Dt)=>{var xn,jt,Vn,Rn;const Tn=hn.uid,Ln=hn.props.disabled,Sn=(jt=(xn=hn.props.name)!=null?xn:hn.index)!=null?jt:`${Dt}`,An=!Ln&&(hn.isClosable||e.editable);hn.index=`${Dt}`;const In=An?createVNode(ElIcon,{class:"is-icon-close",onClick:da=>r("tabRemove",hn,da)},{default:()=>[createVNode(close_default,null,null)]}):null,Mn=((Rn=(Vn=hn.slots).label)==null?void 0:Rn.call(Vn))||hn.props.label,ra=!Ln&&hn.active?0:-1;return createVNode("div",{ref:`tab-${Tn}`,class:[k.e("item"),k.is(y.props.tabPosition),k.is("active",hn.active),k.is("disabled",Ln),k.is("closable",An),k.is("focus",ue.value)],id:`tab-${Sn}`,key:`tab-${Tn}`,"aria-controls":`pane-${Sn}`,role:"tab","aria-selected":hn.active,tabindex:ra,onFocus:()=>Ie(),onBlur:()=>ze(),onClick:da=>{ze(),r("tabClick",hn,Sn,da)},onKeydown:da=>{An&&(da.code===EVENT_CODE.delete||da.code===EVENT_CODE.backspace)&&r("tabRemove",hn,da)}},[Mn,In])});return createVNode("div",{ref:j,class:[k.e("nav-wrap"),k.is("scrollable",!!oe.value),k.is(y.props.tabPosition)]},[Ue,createVNode("div",{class:k.e("nav-scroll"),ref:L},[createVNode("div",{class:[k.e("nav"),k.is(y.props.tabPosition),k.is("stretch",e.stretch&&["top","bottom"].includes(y.props.tabPosition))],ref:z,style:he.value,role:"tablist",onKeydown:Ce},[e.type?null:createVNode(TabBar,{ref:ae,tabs:[...e.panes]},null),Pt])])])}}}),tabsProps=buildProps({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:definePropType(Function),default:()=>!0},stretch:Boolean}),isPaneName=e=>isString$3(e)||isNumber$1(e),tabsEmits={[UPDATE_MODEL_EVENT]:e=>isPaneName(e),tabClick:(e,n)=>n instanceof Event,tabChange:e=>isPaneName(e),edit:(e,n)=>["remove","add"].includes(n),tabRemove:e=>isPaneName(e),tabAdd:()=>!0};var Tabs=defineComponent({name:"ElTabs",props:tabsProps,emits:tabsEmits,setup(e,{emit:n,slots:r,expose:g}){var y,k;const $=useNamespace("tabs"),{children:V,addChild:L,removeChild:z}=useOrderedChildren(getCurrentInstance(),"ElTabPane"),j=ref(),ae=ref((k=(y=e.modelValue)!=null?y:e.activeName)!=null?k:"0"),oe=he=>{ae.value=he,n(UPDATE_MODEL_EVENT,he),n("tabChange",he)},re=async he=>{var _e,xe,Ne;if(!(ae.value===he||isUndefined(he)))try{await((_e=e.beforeLeave)==null?void 0:_e.call(e,he,ae.value))!==!1&&(oe(he),(Ne=(xe=j.value)==null?void 0:xe.removeFocus)==null||Ne.call(xe))}catch{}},ue=(he,_e,xe)=>{he.props.disabled||(re(_e),n("tabClick",he,xe))},le=(he,_e)=>{he.props.disabled||isUndefined(he.props.name)||(_e.stopPropagation(),n("edit",he.props.name,"remove"),n("tabRemove",he.props.name))},de=()=>{n("edit",void 0,"add"),n("tabAdd")};return useDeprecated({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},computed(()=>!!e.activeName)),watch(()=>e.activeName,he=>re(he)),watch(()=>e.modelValue,he=>re(he)),watch(ae,async()=>{var he;await nextTick(),(he=j.value)==null||he.scrollToActiveTab()}),provide(tabsRootContextKey,{props:e,currentName:ae,registerPane:L,unregisterPane:z}),g({currentName:ae}),()=>{const he=e.editable||e.addable?createVNode("span",{class:$.e("new-tab"),tabindex:"0",onClick:de,onKeydown:Ne=>{Ne.code===EVENT_CODE.enter&&de()}},[createVNode(ElIcon,{class:$.is("icon-plus")},{default:()=>[createVNode(plus_default,null,null)]})]):null,_e=createVNode("div",{class:[$.e("header"),$.is(e.tabPosition)]},[he,createVNode(TabNav,{ref:j,currentName:ae.value,editable:e.editable,type:e.type,panes:V.value,stretch:e.stretch,onTabClick:ue,onTabRemove:le},null)]),xe=createVNode("div",{class:$.e("content")},[renderSlot(r,"default")]);return createVNode("div",{class:[$.b(),$.m(e.tabPosition),{[$.m("card")]:e.type==="card",[$.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[_e,xe]:[xe,_e]])}}});const tabPaneProps=buildProps({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),_hoisted_1$1q=["id","aria-hidden","aria-labelledby"],COMPONENT_NAME$1="ElTabPane",__default__$j=defineComponent({name:COMPONENT_NAME$1}),_sfc_main$1F=defineComponent({...__default__$j,props:tabPaneProps,setup(e){const n=e,r=getCurrentInstance(),g=useSlots(),y=inject(tabsRootContextKey);y||throwError(COMPONENT_NAME$1,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const k=useNamespace("tab-pane"),$=ref(),V=computed(()=>n.closable||y.props.closable),L=computedEager(()=>{var re;return y.currentName.value===((re=n.name)!=null?re:$.value)}),z=ref(L.value),j=computed(()=>{var re;return(re=n.name)!=null?re:$.value}),ae=computedEager(()=>!n.lazy||z.value||L.value);watch(L,re=>{re&&(z.value=!0)});const oe=reactive({uid:r.uid,slots:g,props:n,paneName:j,active:L,index:$,isClosable:V});return onMounted(()=>{y.registerPane(oe)}),onUnmounted(()=>{y.unregisterPane(oe.uid)}),(re,ue)=>unref(ae)?withDirectives((openBlock(),createElementBlock("div",{key:0,id:`pane-${unref(j)}`,class:normalizeClass(unref(k).b()),role:"tabpanel","aria-hidden":!unref(L),"aria-labelledby":`tab-${unref(j)}`},[renderSlot(re.$slots,"default")],10,_hoisted_1$1q)),[[vShow,unref(L)]]):createCommentVNode("v-if",!0)}});var TabPane=_export_sfc$1(_sfc_main$1F,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const ElTabs=withInstall(Tabs,{TabPane}),ElTabPane=withNoopInstall(TabPane),textProps=buildProps({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:componentSizes,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),__default__$i=defineComponent({name:"ElText"}),_sfc_main$1E=defineComponent({...__default__$i,props:textProps,setup(e){const n=e,r=useFormSize(),g=useNamespace("text"),y=computed(()=>[g.b(),g.m(n.type),g.m(r.value),g.is("truncated",n.truncated)]);return(k,$)=>(openBlock(),createBlock(resolveDynamicComponent(k.tag),{class:normalizeClass(unref(y))},{default:withCtx(()=>[renderSlot(k.$slots,"default")]),_:3},8,["class"]))}});var Text$1=_export_sfc$1(_sfc_main$1E,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const ElText=withInstall(Text$1),timeSelectProps=buildProps({format:{type:String,default:"HH:mm"},modelValue:String,disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:String,default:"light"},clearable:{type:Boolean,default:!0},size:useSizeProp,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:String,maxTime:String,name:String,prefixIcon:{type:definePropType([String,Object]),default:()=>clock_default},clearIcon:{type:definePropType([String,Object]),default:()=>circle_close_default}}),parseTime=e=>{const n=(e||"").split(":");if(n.length>=2){let r=Number.parseInt(n[0],10);const g=Number.parseInt(n[1],10),y=e.toUpperCase();return y.includes("AM")&&r===12?r=0:y.includes("PM")&&r!==12&&(r+=12),{hours:r,minutes:g}}return null},compareTime=(e,n)=>{const r=parseTime(e);if(!r)return-1;const g=parseTime(n);if(!g)return-1;const y=r.minutes+r.hours*60,k=g.minutes+g.hours*60;return y===k?0:y>k?1:-1},padTime=e=>`${e}`.padStart(2,"0"),formatTime=e=>`${padTime(e.hours)}:${padTime(e.minutes)}`,nextTime=(e,n)=>{const r=parseTime(e);if(!r)return"";const g=parseTime(n);if(!g)return"";const y={hours:r.hours,minutes:r.minutes};return y.minutes+=g.minutes,y.hours+=g.hours,y.hours+=Math.floor(y.minutes/60),y.minutes=y.minutes%60,formatTime(y)},__default__$h=defineComponent({name:"ElTimeSelect"}),_sfc_main$1D=defineComponent({...__default__$h,props:timeSelectProps,emits:["change","blur","focus","update:modelValue"],setup(e,{expose:n}){const r=e;dayjs.extend(customParseFormat);const{Option:g}=ElSelect,y=useNamespace("input"),k=ref(),$=useFormDisabled(),V=computed(()=>r.modelValue),L=computed(()=>{const de=parseTime(r.start);return de?formatTime(de):null}),z=computed(()=>{const de=parseTime(r.end);return de?formatTime(de):null}),j=computed(()=>{const de=parseTime(r.step);return de?formatTime(de):null}),ae=computed(()=>{const de=parseTime(r.minTime||"");return de?formatTime(de):null}),oe=computed(()=>{const de=parseTime(r.maxTime||"");return de?formatTime(de):null}),re=computed(()=>{const de=[];if(r.start&&r.end&&r.step){let he=L.value,_e;for(;he&&z.value&&compareTime(he,z.value)<=0;)_e=dayjs(he,"HH:mm").format(r.format),de.push({value:_e,disabled:compareTime(he,ae.value||"-1:-1")<=0||compareTime(he,oe.value||"100:100")>=0}),he=nextTime(he,j.value)}return de});return n({blur:()=>{var de,he;(he=(de=k.value)==null?void 0:de.blur)==null||he.call(de)},focus:()=>{var de,he;(he=(de=k.value)==null?void 0:de.focus)==null||he.call(de)}}),(de,he)=>(openBlock(),createBlock(unref(ElSelect),{ref_key:"select",ref:k,"model-value":unref(V),disabled:unref($),clearable:de.clearable,"clear-icon":de.clearIcon,size:de.size,effect:de.effect,placeholder:de.placeholder,"default-first-option":"",filterable:de.editable,"onUpdate:modelValue":he[0]||(he[0]=_e=>de.$emit("update:modelValue",_e)),onChange:he[1]||(he[1]=_e=>de.$emit("change",_e)),onBlur:he[2]||(he[2]=_e=>de.$emit("blur",_e)),onFocus:he[3]||(he[3]=_e=>de.$emit("focus",_e))},{prefix:withCtx(()=>[de.prefixIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(y).e("prefix-icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(de.prefixIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)]),default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(re),_e=>(openBlock(),createBlock(unref(g),{key:_e.value,label:_e.value,value:_e.value,disabled:_e.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable"]))}});var TimeSelect=_export_sfc$1(_sfc_main$1D,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-select/src/time-select.vue"]]);TimeSelect.install=e=>{e.component(TimeSelect.name,TimeSelect)};const _TimeSelect=TimeSelect,ElTimeSelect=_TimeSelect,Timeline=defineComponent({name:"ElTimeline",setup(e,{slots:n}){const r=useNamespace("timeline");return provide("timeline",n),()=>h$1("ul",{class:[r.b()]},[renderSlot(n,"default")])}}),timelineItemProps=buildProps({timestamp:{type:String,default:""},hideTimestamp:{type:Boolean,default:!1},center:{type:Boolean,default:!1},placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:iconPropType},hollow:{type:Boolean,default:!1}}),__default__$g=defineComponent({name:"ElTimelineItem"}),_sfc_main$1C=defineComponent({...__default__$g,props:timelineItemProps,setup(e){const n=e,r=useNamespace("timeline-item"),g=computed(()=>[r.e("node"),r.em("node",n.size||""),r.em("node",n.type||""),r.is("hollow",n.hollow)]);return(y,k)=>(openBlock(),createElementBlock("li",{class:normalizeClass([unref(r).b(),{[unref(r).e("center")]:y.center}])},[createBaseVNode("div",{class:normalizeClass(unref(r).e("tail"))},null,2),y.$slots.dot?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(g)),style:normalizeStyle({backgroundColor:y.color})},[y.icon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(r).e("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(y.icon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],6)),y.$slots.dot?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(r).e("dot"))},[renderSlot(y.$slots,"dot")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(r).e("wrapper"))},[!y.hideTimestamp&&y.placement==="top"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([unref(r).e("timestamp"),unref(r).is("top")])},toDisplayString$1(y.timestamp),3)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(r).e("content"))},[renderSlot(y.$slots,"default")],2),!y.hideTimestamp&&y.placement==="bottom"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass([unref(r).e("timestamp"),unref(r).is("bottom")])},toDisplayString$1(y.timestamp),3)):createCommentVNode("v-if",!0)],2)],2))}});var TimelineItem=_export_sfc$1(_sfc_main$1C,[["__file","/home/runner/work/element-plus/element-plus/packages/components/timeline/src/timeline-item.vue"]]);const ElTimeline=withInstall(Timeline,{TimelineItem}),ElTimelineItem=withNoopInstall(TimelineItem),tooltipV2CommonProps=buildProps({nowrap:Boolean});var TooltipV2Sides=(e=>(e.top="top",e.bottom="bottom",e.left="left",e.right="right",e))(TooltipV2Sides||{});const tooltipV2Sides=Object.values(TooltipV2Sides),tooltipV2ArrowProps=buildProps({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:definePropType(Object),default:null}}),tooltipV2ArrowSpecialProps=buildProps({side:{type:definePropType(String),values:tooltipV2Sides,required:!0}}),tooltipV2Strategies=["absolute","fixed"],tooltipV2Placements=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],tooltipV2ContentProps=buildProps({ariaLabel:String,arrowPadding:{type:definePropType(Number),default:5},effect:{type:String,default:""},contentClass:String,placement:{type:definePropType(String),values:tooltipV2Placements,default:"bottom"},reference:{type:definePropType(Object),default:null},offset:{type:Number,default:8},strategy:{type:definePropType(String),values:tooltipV2Strategies,default:"absolute"},showArrow:{type:Boolean,default:!1}}),tooltipV2RootProps=buildProps({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:definePropType(Function)},"onUpdate:open":{type:definePropType(Function)}}),EventHandler={type:definePropType(Function)},tooltipV2TriggerProps=buildProps({onBlur:EventHandler,onClick:EventHandler,onFocus:EventHandler,onMouseDown:EventHandler,onMouseEnter:EventHandler,onMouseLeave:EventHandler}),tooltipV2Props=buildProps({...tooltipV2RootProps,...tooltipV2ArrowProps,...tooltipV2TriggerProps,...tooltipV2ContentProps,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:definePropType(Object),default:null},teleported:Boolean,to:{type:definePropType(String),default:"body"}}),tooltipV2RootKey=Symbol("tooltipV2"),tooltipV2ContentKey=Symbol("tooltipV2Content"),TOOLTIP_V2_OPEN="tooltip_v2.open",__default__$f=defineComponent({name:"ElTooltipV2Root"}),_sfc_main$1B=defineComponent({...__default__$f,props:tooltipV2RootProps,setup(e,{expose:n}){const r=e,g=ref(r.defaultOpen),y=ref(null),k=computed({get:()=>isPropAbsent(r.open)?g.value:r.open,set:de=>{var he;g.value=de,(he=r["onUpdate:open"])==null||he.call(r,de)}}),$=computed(()=>isNumber$1(r.delayDuration)&&r.delayDuration>0),{start:V,stop:L}=useTimeoutFn(()=>{k.value=!0},computed(()=>r.delayDuration),{immediate:!1}),z=useNamespace("tooltip-v2"),j=useId(),ae=()=>{L(),k.value=!0},oe=()=>{unref($)?V():ae()},re=ae,ue=()=>{L(),k.value=!1};return watch(k,de=>{var he;de&&(document.dispatchEvent(new CustomEvent(TOOLTIP_V2_OPEN)),re()),(he=r.onOpenChange)==null||he.call(r,de)}),onMounted(()=>{document.addEventListener(TOOLTIP_V2_OPEN,ue)}),onBeforeUnmount(()=>{L(),document.removeEventListener(TOOLTIP_V2_OPEN,ue)}),provide(tooltipV2RootKey,{contentId:j,triggerRef:y,ns:z,onClose:ue,onDelayOpen:oe,onOpen:re}),n({onOpen:re,onClose:ue}),(de,he)=>renderSlot(de.$slots,"default",{open:unref(k)})}});var TooltipV2Root=_export_sfc$1(_sfc_main$1B,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/root.vue"]]);const __default__$e=defineComponent({name:"ElTooltipV2Arrow"}),_sfc_main$1A=defineComponent({...__default__$e,props:{...tooltipV2ArrowProps,...tooltipV2ArrowSpecialProps},setup(e){const n=e,{ns:r}=inject(tooltipV2RootKey),{arrowRef:g}=inject(tooltipV2ContentKey),y=computed(()=>{const{style:k,width:$,height:V}=n,L=r.namespace.value;return{[`--${L}-tooltip-v2-arrow-width`]:`${$}px`,[`--${L}-tooltip-v2-arrow-height`]:`${V}px`,[`--${L}-tooltip-v2-arrow-border-width`]:`${$/2}px`,[`--${L}-tooltip-v2-arrow-cover-width`]:$/2-1,...k||{}}});return(k,$)=>(openBlock(),createElementBlock("span",{ref_key:"arrowRef",ref:g,style:normalizeStyle(unref(y)),class:normalizeClass(unref(r).e("arrow"))},null,6))}});var TooltipV2Arrow=_export_sfc$1(_sfc_main$1A,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/arrow.vue"]]);const visualHiddenProps=buildProps({style:{type:definePropType([String,Object,Array]),default:()=>({})}}),__default__$d=defineComponent({name:"ElVisuallyHidden"}),_sfc_main$1z=defineComponent({...__default__$d,props:visualHiddenProps,setup(e){const n=e,r=computed(()=>[n.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]);return(g,y)=>(openBlock(),createElementBlock("span",mergeProps(g.$attrs,{style:unref(r)}),[renderSlot(g.$slots,"default")],16))}});var ElVisuallyHidden=_export_sfc$1(_sfc_main$1z,[["__file","/home/runner/work/element-plus/element-plus/packages/components/visual-hidden/src/visual-hidden.vue"]]);const _hoisted_1$1p=["data-side"],__default__$c=defineComponent({name:"ElTooltipV2Content"}),_sfc_main$1y=defineComponent({...__default__$c,props:{...tooltipV2ContentProps,...tooltipV2CommonProps},setup(e){const n=e,{triggerRef:r,contentId:g}=inject(tooltipV2RootKey),y=ref(n.placement),k=ref(n.strategy),$=ref(null),{referenceRef:V,contentRef:L,middlewareData:z,x:j,y:ae,update:oe}=useFloating({placement:y,strategy:k,middleware:computed(()=>{const xe=[offset$1(n.offset)];return n.showArrow&&xe.push(arrowMiddleware({arrowRef:$})),xe})}),re=useZIndex().nextZIndex(),ue=useNamespace("tooltip-v2"),le=computed(()=>y.value.split("-")[0]),de=computed(()=>({position:unref(k),top:`${unref(ae)||0}px`,left:`${unref(j)||0}px`,zIndex:re})),he=computed(()=>{if(!n.showArrow)return{};const{arrow:xe}=unref(z);return{[`--${ue.namespace.value}-tooltip-v2-arrow-x`]:`${xe?.x}px`||"",[`--${ue.namespace.value}-tooltip-v2-arrow-y`]:`${xe?.y}px`||""}}),_e=computed(()=>[ue.e("content"),ue.is("dark",n.effect==="dark"),ue.is(unref(k)),n.contentClass]);return watch($,()=>oe()),watch(()=>n.placement,xe=>y.value=xe),onMounted(()=>{watch(()=>n.reference||r.value,xe=>{V.value=xe||void 0},{immediate:!0})}),provide(tooltipV2ContentKey,{arrowRef:$}),(xe,Ne)=>(openBlock(),createElementBlock("div",{ref_key:"contentRef",ref:L,style:normalizeStyle(unref(de)),"data-tooltip-v2-root":""},[xe.nowrap?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:0,"data-side":unref(le),class:normalizeClass(unref(_e))},[renderSlot(xe.$slots,"default",{contentStyle:unref(de),contentClass:unref(_e)}),createVNode(unref(ElVisuallyHidden),{id:unref(g),role:"tooltip"},{default:withCtx(()=>[xe.ariaLabel?(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString$1(xe.ariaLabel),1)],64)):renderSlot(xe.$slots,"default",{key:1})]),_:3},8,["id"]),renderSlot(xe.$slots,"arrow",{style:normalizeStyle(unref(he)),side:unref(le)})],10,_hoisted_1$1p))],4))}});var TooltipV2Content=_export_sfc$1(_sfc_main$1y,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/content.vue"]]);const forwardRefProps=buildProps({setRef:{type:definePropType(Function),required:!0},onlyChild:Boolean});var ForwardRef=defineComponent({props:forwardRefProps,setup(e,{slots:n}){const r=ref(),g=composeRefs(r,y=>{y?e.setRef(y.nextElementSibling):e.setRef(null)});return()=>{var y;const[k]=((y=n.default)==null?void 0:y.call(n))||[],$=e.onlyChild?ensureOnlyChild(k.children):k.children;return createVNode(Fragment,{ref:g},[$])}}});const __default__$b=defineComponent({name:"ElTooltipV2Trigger"}),_sfc_main$1x=defineComponent({...__default__$b,props:{...tooltipV2CommonProps,...tooltipV2TriggerProps},setup(e){const n=e,{onClose:r,onOpen:g,onDelayOpen:y,triggerRef:k,contentId:$}=inject(tooltipV2RootKey);let V=!1;const L=_e=>{k.value=_e},z=()=>{V=!1},j=composeEventHandlers(n.onMouseEnter,y),ae=composeEventHandlers(n.onMouseLeave,r),oe=composeEventHandlers(n.onMouseDown,()=>{r(),V=!0,document.addEventListener("mouseup",z,{once:!0})}),re=composeEventHandlers(n.onFocus,()=>{V||g()}),ue=composeEventHandlers(n.onBlur,r),le=composeEventHandlers(n.onClick,_e=>{_e.detail===0&&r()}),de={blur:ue,click:le,focus:re,mousedown:oe,mouseenter:j,mouseleave:ae},he=(_e,xe,Ne)=>{_e&&Object.entries(xe).forEach(([$e,Ce])=>{_e[Ne]($e,Ce)})};return watch(k,(_e,xe)=>{he(_e,de,"addEventListener"),he(xe,de,"removeEventListener"),_e&&_e.setAttribute("aria-describedby",$.value)}),onBeforeUnmount(()=>{he(k.value,de,"removeEventListener"),document.removeEventListener("mouseup",z)}),(_e,xe)=>_e.nowrap?(openBlock(),createBlock(unref(ForwardRef),{key:0,"set-ref":L,"only-child":""},{default:withCtx(()=>[renderSlot(_e.$slots,"default")]),_:3})):(openBlock(),createElementBlock("button",mergeProps({key:1,ref_key:"triggerRef",ref:k},_e.$attrs),[renderSlot(_e.$slots,"default")],16))}});var TooltipV2Trigger=_export_sfc$1(_sfc_main$1x,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/trigger.vue"]]);const __default__$a=defineComponent({name:"ElTooltipV2"}),_sfc_main$1w=defineComponent({...__default__$a,props:tooltipV2Props,setup(e){const r=toRefs(e),g=reactive(pick(r,Object.keys(tooltipV2ArrowProps))),y=reactive(pick(r,Object.keys(tooltipV2ContentProps))),k=reactive(pick(r,Object.keys(tooltipV2RootProps))),$=reactive(pick(r,Object.keys(tooltipV2TriggerProps)));return(V,L)=>(openBlock(),createBlock(TooltipV2Root,normalizeProps(guardReactiveProps(k)),{default:withCtx(({open:z})=>[createVNode(TooltipV2Trigger,mergeProps($,{nowrap:""}),{default:withCtx(()=>[renderSlot(V.$slots,"trigger")]),_:3},16),(openBlock(),createBlock(Teleport,{to:V.to,disabled:!V.teleported},[V.fullTransition?(openBlock(),createBlock(Transition,normalizeProps(mergeProps({key:0},V.transitionProps)),{default:withCtx(()=>[V.alwaysOn||z?(openBlock(),createBlock(TooltipV2Content,normalizeProps(mergeProps({key:0},y)),{arrow:withCtx(({style:j,side:ae})=>[V.showArrow?(openBlock(),createBlock(TooltipV2Arrow,mergeProps({key:0},g,{style:j,side:ae}),null,16,["style","side"])):createCommentVNode("v-if",!0)]),default:withCtx(()=>[renderSlot(V.$slots,"default")]),_:3},16)):createCommentVNode("v-if",!0)]),_:2},1040)):(openBlock(),createElementBlock(Fragment,{key:1},[V.alwaysOn||z?(openBlock(),createBlock(TooltipV2Content,normalizeProps(mergeProps({key:0},y)),{arrow:withCtx(({style:j,side:ae})=>[V.showArrow?(openBlock(),createBlock(TooltipV2Arrow,mergeProps({key:0},g,{style:j,side:ae}),null,16,["style","side"])):createCommentVNode("v-if",!0)]),default:withCtx(()=>[renderSlot(V.$slots,"default")]),_:3},16)):createCommentVNode("v-if",!0)],64))],8,["to","disabled"]))]),_:3},16))}});var TooltipV2=_export_sfc$1(_sfc_main$1w,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/tooltip.vue"]]);const ElTooltipV2=withInstall(TooltipV2),LEFT_CHECK_CHANGE_EVENT="left-check-change",RIGHT_CHECK_CHANGE_EVENT="right-check-change",transferProps=buildProps({data:{type:definePropType(Array),default:()=>[]},titles:{type:definePropType(Array),default:()=>[]},buttonTexts:{type:definePropType(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:definePropType(Function)},leftDefaultChecked:{type:definePropType(Array),default:()=>[]},rightDefaultChecked:{type:definePropType(Array),default:()=>[]},renderContent:{type:definePropType(Function)},modelValue:{type:definePropType(Array),default:()=>[]},format:{type:definePropType(Object),default:()=>({})},filterable:Boolean,props:{type:definePropType(Object),default:()=>mutable({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),transferCheckedChangeFn=(e,n)=>[e,n].every(isArray$3)||isArray$3(e)&&isNil(n),transferEmits={[CHANGE_EVENT]:(e,n,r)=>[e,r].every(isArray$3)&&["left","right"].includes(n),[UPDATE_MODEL_EVENT]:e=>isArray$3(e),[LEFT_CHECK_CHANGE_EVENT]:transferCheckedChangeFn,[RIGHT_CHECK_CHANGE_EVENT]:transferCheckedChangeFn},CHECKED_CHANGE_EVENT="checked-change",transferPanelProps=buildProps({data:transferProps.data,optionRender:{type:definePropType(Function)},placeholder:String,title:String,filterable:Boolean,format:transferProps.format,filterMethod:transferProps.filterMethod,defaultChecked:transferProps.leftDefaultChecked,props:transferProps.props}),transferPanelEmits={[CHECKED_CHANGE_EVENT]:transferCheckedChangeFn},usePropsAlias=e=>{const n={label:"label",key:"key",disabled:"disabled"};return computed(()=>({...n,...e.props}))},useCheck$1=(e,n,r)=>{const g=usePropsAlias(e),y=computed(()=>e.data.filter(j=>isFunction$3(e.filterMethod)?e.filterMethod(n.query,j):String(j[g.value.label]||j[g.value.key]).toLowerCase().includes(n.query.toLowerCase()))),k=computed(()=>y.value.filter(j=>!j[g.value.disabled])),$=computed(()=>{const j=n.checked.length,ae=e.data.length,{noChecked:oe,hasChecked:re}=e.format;return oe&&re?j>0?re.replace(/\${checked}/g,j.toString()).replace(/\${total}/g,ae.toString()):oe.replace(/\${total}/g,ae.toString()):`${j}/${ae}`}),V=computed(()=>{const j=n.checked.length;return j>0&&j<k.value.length}),L=()=>{const j=k.value.map(ae=>ae[g.value.key]);n.allChecked=j.length>0&&j.every(ae=>n.checked.includes(ae))},z=j=>{n.checked=j?k.value.map(ae=>ae[g.value.key]):[]};return watch(()=>n.checked,(j,ae)=>{if(L(),n.checkChangeByUser){const oe=j.concat(ae).filter(re=>!j.includes(re)||!ae.includes(re));r(CHECKED_CHANGE_EVENT,j,oe)}else r(CHECKED_CHANGE_EVENT,j),n.checkChangeByUser=!0}),watch(k,()=>{L()}),watch(()=>e.data,()=>{const j=[],ae=y.value.map(oe=>oe[g.value.key]);n.checked.forEach(oe=>{ae.includes(oe)&&j.push(oe)}),n.checkChangeByUser=!1,n.checked=j}),watch(()=>e.defaultChecked,(j,ae)=>{if(ae&&j.length===ae.length&&j.every(ue=>ae.includes(ue)))return;const oe=[],re=k.value.map(ue=>ue[g.value.key]);j.forEach(ue=>{re.includes(ue)&&oe.push(ue)}),n.checkChangeByUser=!1,n.checked=oe},{immediate:!0}),{filteredData:y,checkableData:k,checkedSummary:$,isIndeterminate:V,updateAllChecked:L,handleAllCheckedChange:z}},useCheckedChange=(e,n)=>({onSourceCheckedChange:(y,k)=>{e.leftChecked=y,k&&n(LEFT_CHECK_CHANGE_EVENT,y,k)},onTargetCheckedChange:(y,k)=>{e.rightChecked=y,k&&n(RIGHT_CHECK_CHANGE_EVENT,y,k)}}),useComputedData=e=>{const n=usePropsAlias(e),r=computed(()=>e.data.reduce((k,$)=>(k[$[n.value.key]]=$)&&k,{})),g=computed(()=>e.data.filter(k=>!e.modelValue.includes(k[n.value.key]))),y=computed(()=>e.targetOrder==="original"?e.data.filter(k=>e.modelValue.includes(k[n.value.key])):e.modelValue.reduce((k,$)=>{const V=r.value[$];return V&&k.push(V),k},[]));return{sourceData:g,targetData:y}},useMove=(e,n,r)=>{const g=usePropsAlias(e),y=(V,L,z)=>{r(UPDATE_MODEL_EVENT,V),r(CHANGE_EVENT,V,L,z)};return{addToLeft:()=>{const V=e.modelValue.slice();n.rightChecked.forEach(L=>{const z=V.indexOf(L);z>-1&&V.splice(z,1)}),y(V,"left",n.rightChecked)},addToRight:()=>{let V=e.modelValue.slice();const L=e.data.filter(z=>{const j=z[g.value.key];return n.leftChecked.includes(j)&&!e.modelValue.includes(j)}).map(z=>z[g.value.key]);V=e.targetOrder==="unshift"?L.concat(V):V.concat(L),e.targetOrder==="original"&&(V=e.data.filter(z=>V.includes(z[g.value.key])).map(z=>z[g.value.key])),y(V,"right",n.leftChecked)}}},__default__$9=defineComponent({name:"ElTransferPanel"}),_sfc_main$1v=defineComponent({...__default__$9,props:transferPanelProps,emits:transferPanelEmits,setup(e,{expose:n,emit:r}){const g=e,y=useSlots(),k=({option:xe})=>xe,{t:$}=useLocale(),V=useNamespace("transfer"),L=reactive({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),z=usePropsAlias(g),{filteredData:j,checkedSummary:ae,isIndeterminate:oe,handleAllCheckedChange:re}=useCheck$1(g,L,r),ue=computed(()=>!isEmpty(L.query)&&isEmpty(j.value)),le=computed(()=>!isEmpty(y.default()[0].children)),{checked:de,allChecked:he,query:_e}=toRefs(L);return n({query:_e}),(xe,Ne)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(V).b("panel"))},[createBaseVNode("p",{class:normalizeClass(unref(V).be("panel","header"))},[createVNode(unref(ElCheckbox),{modelValue:unref(he),"onUpdate:modelValue":Ne[0]||(Ne[0]=$e=>isRef(he)?he.value=$e:null),indeterminate:unref(oe),"validate-event":!1,onChange:unref(re)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(xe.title)+" ",1),createBaseVNode("span",null,toDisplayString$1(unref(ae)),1)]),_:1},8,["modelValue","indeterminate","onChange"])],2),createBaseVNode("div",{class:normalizeClass([unref(V).be("panel","body"),unref(V).is("with-footer",unref(le))])},[xe.filterable?(openBlock(),createBlock(unref(ElInput),{key:0,modelValue:unref(_e),"onUpdate:modelValue":Ne[1]||(Ne[1]=$e=>isRef(_e)?_e.value=$e:null),class:normalizeClass(unref(V).be("panel","filter")),size:"default",placeholder:xe.placeholder,"prefix-icon":unref(search_default),clearable:"","validate-event":!1},null,8,["modelValue","class","placeholder","prefix-icon"])):createCommentVNode("v-if",!0),withDirectives(createVNode(unref(ElCheckboxGroup$1),{modelValue:unref(de),"onUpdate:modelValue":Ne[2]||(Ne[2]=$e=>isRef(de)?de.value=$e:null),"validate-event":!1,class:normalizeClass([unref(V).is("filterable",xe.filterable),unref(V).be("panel","list")])},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(j),$e=>(openBlock(),createBlock(unref(ElCheckbox),{key:$e[unref(z).key],class:normalizeClass(unref(V).be("panel","item")),label:$e[unref(z).key],disabled:$e[unref(z).disabled],"validate-event":!1},{default:withCtx(()=>{var Ce;return[createVNode(k,{option:(Ce=xe.optionRender)==null?void 0:Ce.call(xe,$e)},null,8,["option"])]}),_:2},1032,["class","label","disabled"]))),128))]),_:1},8,["modelValue","class"]),[[vShow,!unref(ue)&&!unref(isEmpty)(xe.data)]]),withDirectives(createBaseVNode("p",{class:normalizeClass(unref(V).be("panel","empty"))},toDisplayString$1(unref(ue)?unref($)("el.transfer.noMatch"):unref($)("el.transfer.noData")),3),[[vShow,unref(ue)||unref(isEmpty)(xe.data)]])],2),unref(le)?(openBlock(),createElementBlock("p",{key:0,class:normalizeClass(unref(V).be("panel","footer"))},[renderSlot(xe.$slots,"default")],2)):createCommentVNode("v-if",!0)],2))}});var TransferPanel=_export_sfc$1(_sfc_main$1v,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer-panel.vue"]]);const _hoisted_1$1o={key:0},_hoisted_2$1j={key:0},__default__$8=defineComponent({name:"ElTransfer"}),_sfc_main$1u=defineComponent({...__default__$8,props:transferProps,emits:transferEmits,setup(e,{expose:n,emit:r}){const g=e,y=useSlots(),{t:k}=useLocale(),$=useNamespace("transfer"),{formItem:V}=useFormItem(),L=reactive({leftChecked:[],rightChecked:[]}),z=usePropsAlias(g),{sourceData:j,targetData:ae}=useComputedData(g),{onSourceCheckedChange:oe,onTargetCheckedChange:re}=useCheckedChange(L,r),{addToLeft:ue,addToRight:le}=useMove(g,L,r),de=ref(),he=ref(),_e=ze=>{switch(ze){case"left":de.value.query="";break;case"right":he.value.query="";break}},xe=computed(()=>g.buttonTexts.length===2),Ne=computed(()=>g.titles[0]||k("el.transfer.titles.0")),$e=computed(()=>g.titles[1]||k("el.transfer.titles.1")),Ce=computed(()=>g.filterPlaceholder||k("el.transfer.filterPlaceholder"));watch(()=>g.modelValue,()=>{var ze;g.validateEvent&&((ze=V?.validate)==null||ze.call(V,"change").catch(Ue=>void 0))});const Ie=computed(()=>ze=>g.renderContent?g.renderContent(h$1,ze):y.default?y.default({option:ze}):h$1("span",ze[z.value.label]||ze[z.value.key]));return n({clearQuery:_e,leftPanel:de,rightPanel:he}),(ze,Ue)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref($).b())},[createVNode(TransferPanel,{ref_key:"leftPanel",ref:de,data:unref(j),"option-render":unref(Ie),placeholder:unref(Ce),title:unref(Ne),filterable:ze.filterable,format:ze.format,"filter-method":ze.filterMethod,"default-checked":ze.leftDefaultChecked,props:g.props,onCheckedChange:unref(oe)},{default:withCtx(()=>[renderSlot(ze.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),createBaseVNode("div",{class:normalizeClass(unref($).e("buttons"))},[createVNode(unref(ElButton),{type:"primary",class:normalizeClass([unref($).e("button"),unref($).is("with-texts",unref(xe))]),disabled:unref(isEmpty)(L.rightChecked),onClick:unref(ue)},{default:withCtx(()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1}),unref(isUndefined)(ze.buttonTexts[0])?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",_hoisted_1$1o,toDisplayString$1(ze.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),createVNode(unref(ElButton),{type:"primary",class:normalizeClass([unref($).e("button"),unref($).is("with-texts",unref(xe))]),disabled:unref(isEmpty)(L.leftChecked),onClick:unref(le)},{default:withCtx(()=>[unref(isUndefined)(ze.buttonTexts[1])?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",_hoisted_2$1j,toDisplayString$1(ze.buttonTexts[1]),1)),createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),createVNode(TransferPanel,{ref_key:"rightPanel",ref:he,data:unref(ae),"option-render":unref(Ie),placeholder:unref(Ce),filterable:ze.filterable,format:ze.format,"filter-method":ze.filterMethod,title:unref($e),"default-checked":ze.rightDefaultChecked,props:g.props,onCheckedChange:unref(re)},{default:withCtx(()=>[renderSlot(ze.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var Transfer=_export_sfc$1(_sfc_main$1u,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer.vue"]]);const ElTransfer=withInstall(Transfer),NODE_KEY="$treeNodeId",markNodeData=function(e,n){!n||n[NODE_KEY]||Object.defineProperty(n,NODE_KEY,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},getNodeKey=function(e,n){return e?n[e]:n[NODE_KEY]},handleCurrentChange=(e,n,r)=>{const g=e.value.currentNode;r();const y=e.value.currentNode;g!==y&&n("current-change",y?y.data:null,y)},getChildState=e=>{let n=!0,r=!0,g=!0;for(let y=0,k=e.length;y<k;y++){const $=e[y];($.checked!==!0||$.indeterminate)&&(n=!1,$.disabled||(g=!1)),($.checked!==!1||$.indeterminate)&&(r=!1)}return{all:n,none:r,allWithoutDisable:g,half:!n&&!r}},reInitChecked=function(e){if(e.childNodes.length===0||e.loading)return;const{all:n,none:r,half:g}=getChildState(e.childNodes);n?(e.checked=!0,e.indeterminate=!1):g?(e.checked=!1,e.indeterminate=!0):r&&(e.checked=!1,e.indeterminate=!1);const y=e.parent;!y||y.level===0||e.store.checkStrictly||reInitChecked(y)},getPropertyFromData=function(e,n){const r=e.store.props,g=e.data||{},y=r[n];if(typeof y=="function")return y(g,e);if(typeof y=="string")return g[y];if(typeof y>"u"){const k=g[n];return k===void 0?"":k}};let nodeIdSeed=0,Node$1=class _r{constructor(n){this.id=nodeIdSeed++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const r in n)hasOwn$1(n,r)&&(this[r]=n[r]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const n=this.store;if(!n)throw new Error("[Node]store is required!");n.registerNode(this);const r=n.props;if(r&&typeof r.isLeaf<"u"){const k=getPropertyFromData(this,"isLeaf");typeof k=="boolean"&&(this.isLeafByUser=k)}if(n.lazy!==!0&&this.data?(this.setData(this.data),n.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&n.lazy&&n.defaultExpandAll&&this.expand(),Array.isArray(this.data)||markNodeData(this,this.data),!this.data)return;const g=n.defaultExpandedKeys,y=n.key;y&&g&&g.includes(this.key)&&this.expand(null,n.autoExpandParent),y&&n.currentNodeKey!==void 0&&this.key===n.currentNodeKey&&(n.currentNode=this,n.currentNode.isCurrent=!0),n.lazy&&n._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(n){Array.isArray(n)||markNodeData(this,n),this.data=n,this.childNodes=[];let r;this.level===0&&Array.isArray(this.data)?r=this.data:r=getPropertyFromData(this,"children")||[];for(let g=0,y=r.length;g<y;g++)this.insertChild({data:r[g]})}get label(){return getPropertyFromData(this,"label")}get key(){const n=this.store.key;return this.data?this.data[n]:null}get disabled(){return getPropertyFromData(this,"disabled")}get nextSibling(){const n=this.parent;if(n){const r=n.childNodes.indexOf(this);if(r>-1)return n.childNodes[r+1]}return null}get previousSibling(){const n=this.parent;if(n){const r=n.childNodes.indexOf(this);if(r>-1)return r>0?n.childNodes[r-1]:null}return null}contains(n,r=!0){return(this.childNodes||[]).some(g=>g===n||r&&g.contains(n))}remove(){const n=this.parent;n&&n.removeChild(this)}insertChild(n,r,g){if(!n)throw new Error("InsertChild error: child is required.");if(!(n instanceof _r)){if(!g){const y=this.getChildren(!0);y.includes(n.data)||(typeof r>"u"||r<0?y.push(n.data):y.splice(r,0,n.data))}Object.assign(n,{parent:this,store:this.store}),n=reactive(new _r(n)),n instanceof _r&&n.initialize()}n.level=this.level+1,typeof r>"u"||r<0?this.childNodes.push(n):this.childNodes.splice(r,0,n),this.updateLeafState()}insertBefore(n,r){let g;r&&(g=this.childNodes.indexOf(r)),this.insertChild(n,g)}insertAfter(n,r){let g;r&&(g=this.childNodes.indexOf(r),g!==-1&&(g+=1)),this.insertChild(n,g)}removeChild(n){const r=this.getChildren()||[],g=r.indexOf(n.data);g>-1&&r.splice(g,1);const y=this.childNodes.indexOf(n);y>-1&&(this.store&&this.store.deregisterNode(n),n.parent=null,this.childNodes.splice(y,1)),this.updateLeafState()}removeChildByData(n){let r=null;for(let g=0;g<this.childNodes.length;g++)if(this.childNodes[g].data===n){r=this.childNodes[g];break}r&&this.removeChild(r)}expand(n,r){const g=()=>{if(r){let y=this.parent;for(;y.level>0;)y.expanded=!0,y=y.parent}this.expanded=!0,n&&n(),this.childNodes.forEach(y=>{y.canFocus=!0})};this.shouldLoadData()?this.loadData(y=>{Array.isArray(y)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||reInitChecked(this),g())}):g()}doCreateChildren(n,r={}){n.forEach(g=>{this.insertChild(Object.assign({data:g},r),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(n=>{n.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const n=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!n||n.length===0;return}this.isLeaf=!1}setChecked(n,r,g,y){if(this.indeterminate=n==="half",this.checked=n===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:$,allWithoutDisable:V}=getChildState(this.childNodes);!this.isLeaf&&!$&&V&&(this.checked=!1,n=!1);const L=()=>{if(r){const z=this.childNodes;for(let oe=0,re=z.length;oe<re;oe++){const ue=z[oe];y=y||n!==!1;const le=ue.disabled?ue.checked:y;ue.setChecked(le,r,!0,y)}const{half:j,all:ae}=getChildState(z);ae||(this.checked=ae,this.indeterminate=j)}};if(this.shouldLoadData()){this.loadData(()=>{L(),reInitChecked(this)},{checked:n!==!1});return}else L()}const k=this.parent;!k||k.level===0||g||reInitChecked(k)}getChildren(n=!1){if(this.level===0)return this.data;const r=this.data;if(!r)return null;const g=this.store.props;let y="children";return g&&(y=g.children||"children"),r[y]===void 0&&(r[y]=null),n&&!r[y]&&(r[y]=[]),r[y]}updateChildren(){const n=this.getChildren()||[],r=this.childNodes.map(k=>k.data),g={},y=[];n.forEach((k,$)=>{const V=k[NODE_KEY];!!V&&r.findIndex(z=>z[NODE_KEY]===V)>=0?g[V]={index:$,data:k}:y.push({index:$,data:k})}),this.store.lazy||r.forEach(k=>{g[k[NODE_KEY]]||this.removeChildByData(k)}),y.forEach(({index:k,data:$})=>{this.insertChild({data:$},k)}),this.updateLeafState()}loadData(n,r={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(r).length)){this.loading=!0;const g=y=>{this.childNodes=[],this.doCreateChildren(y,r),this.loaded=!0,this.loading=!1,this.updateLeafState(),n&&n.call(this,y)};this.store.load(this,g)}else n&&n.call(this)}};class TreeStore{constructor(n){this.currentNode=null,this.currentNodeKey=null;for(const r in n)hasOwn$1(n,r)&&(this[r]=n[r]);this.nodesMap={}}initialize(){if(this.root=new Node$1({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const n=this.load;n(this.root,r=>{this.root.doCreateChildren(r),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(n){const r=this.filterNodeMethod,g=this.lazy,y=function(k){const $=k.root?k.root.childNodes:k.childNodes;if($.forEach(V=>{V.visible=r.call(V,n,V.data,V),y(V)}),!k.visible&&$.length){let V=!0;V=!$.some(L=>L.visible),k.root?k.root.visible=V===!1:k.visible=V===!1}n&&k.visible&&!k.isLeaf&&!g&&k.expand()};y(this)}setData(n){n!==this.root.data?(this.root.setData(n),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(n){if(n instanceof Node$1)return n;const r=isObject$3(n)?getNodeKey(this.key,n):n;return this.nodesMap[r]||null}insertBefore(n,r){const g=this.getNode(r);g.parent.insertBefore({data:n},g)}insertAfter(n,r){const g=this.getNode(r);g.parent.insertAfter({data:n},g)}remove(n){const r=this.getNode(n);r&&r.parent&&(r===this.currentNode&&(this.currentNode=null),r.parent.removeChild(r))}append(n,r){const g=r?this.getNode(r):this.root;g&&g.insertChild({data:n})}_initDefaultCheckedNodes(){const n=this.defaultCheckedKeys||[],r=this.nodesMap;n.forEach(g=>{const y=r[g];y&&y.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(n){(this.defaultCheckedKeys||[]).includes(n.key)&&n.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(n){n!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=n,this._initDefaultCheckedNodes())}registerNode(n){const r=this.key;!n||!n.data||(r?n.key!==void 0&&(this.nodesMap[n.key]=n):this.nodesMap[n.id]=n)}deregisterNode(n){!this.key||!n||!n.data||(n.childNodes.forEach(g=>{this.deregisterNode(g)}),delete this.nodesMap[n.key])}getCheckedNodes(n=!1,r=!1){const g=[],y=function(k){(k.root?k.root.childNodes:k.childNodes).forEach(V=>{(V.checked||r&&V.indeterminate)&&(!n||n&&V.isLeaf)&&g.push(V.data),y(V)})};return y(this),g}getCheckedKeys(n=!1){return this.getCheckedNodes(n).map(r=>(r||{})[this.key])}getHalfCheckedNodes(){const n=[],r=function(g){(g.root?g.root.childNodes:g.childNodes).forEach(k=>{k.indeterminate&&n.push(k.data),r(k)})};return r(this),n}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(n=>(n||{})[this.key])}_getAllNodes(){const n=[],r=this.nodesMap;for(const g in r)hasOwn$1(r,g)&&n.push(r[g]);return n}updateChildren(n,r){const g=this.nodesMap[n];if(!g)return;const y=g.childNodes;for(let k=y.length-1;k>=0;k--){const $=y[k];this.remove($.data)}for(let k=0,$=r.length;k<$;k++){const V=r[k];this.append(V,g.data)}}_setCheckedKeys(n,r=!1,g){const y=this._getAllNodes().sort((V,L)=>L.level-V.level),k=Object.create(null),$=Object.keys(g);y.forEach(V=>V.setChecked(!1,!1));for(let V=0,L=y.length;V<L;V++){const z=y[V],j=z.data[n].toString();if(!$.includes(j)){z.checked&&!k[j]&&z.setChecked(!1,!1);continue}let oe=z.parent;for(;oe&&oe.level>0;)k[oe.data[n]]=!0,oe=oe.parent;if(z.isLeaf||this.checkStrictly){z.setChecked(!0,!1);continue}if(z.setChecked(!0,!0),r){z.setChecked(!1,!1);const re=function(ue){ue.childNodes.forEach(de=>{de.isLeaf||de.setChecked(!1,!1),re(de)})};re(z)}}}setCheckedNodes(n,r=!1){const g=this.key,y={};n.forEach(k=>{y[(k||{})[g]]=!0}),this._setCheckedKeys(g,r,y)}setCheckedKeys(n,r=!1){this.defaultCheckedKeys=n;const g=this.key,y={};n.forEach(k=>{y[k]=!0}),this._setCheckedKeys(g,r,y)}setDefaultExpandedKeys(n){n=n||[],this.defaultExpandedKeys=n,n.forEach(r=>{const g=this.getNode(r);g&&g.expand(null,this.autoExpandParent)})}setChecked(n,r,g){const y=this.getNode(n);y&&y.setChecked(!!r,g)}getCurrentNode(){return this.currentNode}setCurrentNode(n){const r=this.currentNode;r&&(r.isCurrent=!1),this.currentNode=n,this.currentNode.isCurrent=!0}setUserCurrentNode(n,r=!0){const g=n[this.key],y=this.nodesMap[g];this.setCurrentNode(y),r&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(n,r=!0){if(n==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const g=this.getNode(n);g&&(this.setCurrentNode(g),r&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const _sfc_main$1t=defineComponent({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const n=useNamespace("tree"),r=inject("NodeInstance"),g=inject("RootTree");return()=>{const y=e.node,{data:k,store:$}=y;return e.renderContent?e.renderContent(h$1,{_self:r,node:y,data:k,store:$}):g.ctx.slots.default?g.ctx.slots.default({node:y,data:k}):h$1("span",{class:n.be("node","label")},[y.label])}}});var NodeContent=_export_sfc$1(_sfc_main$1t,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node-content.vue"]]);function useNodeExpandEventBroadcast(e){const n=inject("TreeNodeMap",null),r={treeNodeExpand:g=>{e.node!==g&&e.node.collapse()},children:[]};return n&&n.children.push(r),provide("TreeNodeMap",r),{broadcastExpanded:g=>{if(e.accordion)for(const y of r.children)y.treeNodeExpand(g)}}}const dragEventsKey=Symbol("dragEvents");function useDragNodeHandler({props:e,ctx:n,el$:r,dropIndicator$:g,store:y}){const k=useNamespace("tree"),$=ref({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return provide(dragEventsKey,{treeNodeDragStart:({event:j,treeNode:ae})=>{if(typeof e.allowDrag=="function"&&!e.allowDrag(ae.node))return j.preventDefault(),!1;j.dataTransfer.effectAllowed="move";try{j.dataTransfer.setData("text/plain","")}catch{}$.value.draggingNode=ae,n.emit("node-drag-start",ae.node,j)},treeNodeDragOver:({event:j,treeNode:ae})=>{const oe=ae,re=$.value.dropNode;re&&re.node.id!==oe.node.id&&removeClass(re.$el,k.is("drop-inner"));const ue=$.value.draggingNode;if(!ue||!oe)return;let le=!0,de=!0,he=!0,_e=!0;typeof e.allowDrop=="function"&&(le=e.allowDrop(ue.node,oe.node,"prev"),_e=de=e.allowDrop(ue.node,oe.node,"inner"),he=e.allowDrop(ue.node,oe.node,"next")),j.dataTransfer.dropEffect=de||le||he?"move":"none",(le||de||he)&&re?.node.id!==oe.node.id&&(re&&n.emit("node-drag-leave",ue.node,re.node,j),n.emit("node-drag-enter",ue.node,oe.node,j)),(le||de||he)&&($.value.dropNode=oe),oe.node.nextSibling===ue.node&&(he=!1),oe.node.previousSibling===ue.node&&(le=!1),oe.node.contains(ue.node,!1)&&(de=!1),(ue.node===oe.node||ue.node.contains(oe.node))&&(le=!1,de=!1,he=!1);const xe=oe.$el.querySelector(`.${k.be("node","content")}`).getBoundingClientRect(),Ne=r.value.getBoundingClientRect();let $e;const Ce=le?de?.25:he?.45:1:-1,Ie=he?de?.75:le?.55:0:1;let ze=-9999;const Ue=j.clientY-xe.top;Ue<xe.height*Ce?$e="before":Ue>xe.height*Ie?$e="after":de?$e="inner":$e="none";const Pt=oe.$el.querySelector(`.${k.be("node","expand-icon")}`).getBoundingClientRect(),hn=g.value;$e==="before"?ze=Pt.top-Ne.top:$e==="after"&&(ze=Pt.bottom-Ne.top),hn.style.top=`${ze}px`,hn.style.left=`${Pt.right-Ne.left}px`,$e==="inner"?addClass(oe.$el,k.is("drop-inner")):removeClass(oe.$el,k.is("drop-inner")),$.value.showDropIndicator=$e==="before"||$e==="after",$.value.allowDrop=$.value.showDropIndicator||_e,$.value.dropType=$e,n.emit("node-drag-over",ue.node,oe.node,j)},treeNodeDragEnd:j=>{const{draggingNode:ae,dropType:oe,dropNode:re}=$.value;if(j.preventDefault(),j.dataTransfer.dropEffect="move",ae&&re){const ue={data:ae.node.data};oe!=="none"&&ae.node.remove(),oe==="before"?re.node.parent.insertBefore(ue,re.node):oe==="after"?re.node.parent.insertAfter(ue,re.node):oe==="inner"&&re.node.insertChild(ue),oe!=="none"&&y.value.registerNode(ue),removeClass(re.$el,k.is("drop-inner")),n.emit("node-drag-end",ae.node,re.node,oe,j),oe!=="none"&&n.emit("node-drop",ae.node,re.node,oe,j)}ae&&!re&&n.emit("node-drag-end",ae.node,null,oe,j),$.value.showDropIndicator=!1,$.value.draggingNode=null,$.value.dropNode=null,$.value.allowDrop=!0}}),{dragState:$}}const _sfc_main$1s=defineComponent({name:"ElTreeNode",components:{ElCollapseTransition:_CollapseTransition,ElCheckbox,NodeContent,ElIcon,Loading:loading_default},props:{node:{type:Node$1,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(e,n){const r=useNamespace("tree"),{broadcastExpanded:g}=useNodeExpandEventBroadcast(e),y=inject("RootTree"),k=ref(!1),$=ref(!1),V=ref(null),L=ref(null),z=ref(null),j=inject(dragEventsKey),ae=getCurrentInstance();provide("NodeInstance",ae),e.node.expanded&&(k.value=!0,$.value=!0);const oe=y.props.props.children||"children";watch(()=>{const Ue=e.node.data[oe];return Ue&&[...Ue]},()=>{e.node.updateChildren()}),watch(()=>e.node.indeterminate,Ue=>{le(e.node.checked,Ue)}),watch(()=>e.node.checked,Ue=>{le(Ue,e.node.indeterminate)}),watch(()=>e.node.expanded,Ue=>{nextTick(()=>k.value=Ue),Ue&&($.value=!0)});const re=Ue=>getNodeKey(y.props.nodeKey,Ue.data),ue=Ue=>{const Pt=e.props.class;if(!Pt)return{};let hn;if(isFunction$3(Pt)){const{data:Dt}=Ue;hn=Pt(Dt,Ue)}else hn=Pt;return isString$3(hn)?{[hn]:!0}:hn},le=(Ue,Pt)=>{(V.value!==Ue||L.value!==Pt)&&y.ctx.emit("check-change",e.node.data,Ue,Pt),V.value=Ue,L.value=Pt},de=Ue=>{handleCurrentChange(y.store,y.ctx.emit,()=>y.store.value.setCurrentNode(e.node)),y.currentNode.value=e.node,y.props.expandOnClickNode&&_e(),y.props.checkOnClickNode&&!e.node.disabled&&xe(null,{target:{checked:!e.node.checked}}),y.ctx.emit("node-click",e.node.data,e.node,ae,Ue)},he=Ue=>{y.instance.vnode.props.onNodeContextmenu&&(Ue.stopPropagation(),Ue.preventDefault()),y.ctx.emit("node-contextmenu",Ue,e.node.data,e.node,ae)},_e=()=>{e.node.isLeaf||(k.value?(y.ctx.emit("node-collapse",e.node.data,e.node,ae),e.node.collapse()):(e.node.expand(),n.emit("node-expand",e.node.data,e.node,ae)))},xe=(Ue,Pt)=>{e.node.setChecked(Pt.target.checked,!y.props.checkStrictly),nextTick(()=>{const hn=y.store.value;y.ctx.emit("check",e.node.data,{checkedNodes:hn.getCheckedNodes(),checkedKeys:hn.getCheckedKeys(),halfCheckedNodes:hn.getHalfCheckedNodes(),halfCheckedKeys:hn.getHalfCheckedKeys()})})};return{ns:r,node$:z,tree:y,expanded:k,childNodeRendered:$,oldChecked:V,oldIndeterminate:L,getNodeKey:re,getNodeClass:ue,handleSelectChange:le,handleClick:de,handleContextMenu:he,handleExpandIconClick:_e,handleCheckChange:xe,handleChildNodeExpand:(Ue,Pt,hn)=>{g(Pt),y.ctx.emit("node-expand",Ue,Pt,hn)},handleDragStart:Ue=>{y.props.draggable&&j.treeNodeDragStart({event:Ue,treeNode:e})},handleDragOver:Ue=>{Ue.preventDefault(),y.props.draggable&&j.treeNodeDragOver({event:Ue,treeNode:{$el:z.value,node:e.node}})},handleDrop:Ue=>{Ue.preventDefault()},handleDragEnd:Ue=>{y.props.draggable&&j.treeNodeDragEnd(Ue)},CaretRight:caret_right_default}}}),_hoisted_1$1n=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],_hoisted_2$1i=["aria-expanded"];function _sfc_render$2(e,n,r,g,y,k){const $=resolveComponent("el-icon"),V=resolveComponent("el-checkbox"),L=resolveComponent("loading"),z=resolveComponent("node-content"),j=resolveComponent("el-tree-node"),ae=resolveComponent("el-collapse-transition");return withDirectives((openBlock(),createElementBlock("div",{ref:"node$",class:normalizeClass([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:n[1]||(n[1]=withModifiers((...oe)=>e.handleClick&&e.handleClick(...oe),["stop"])),onContextmenu:n[2]||(n[2]=(...oe)=>e.handleContextMenu&&e.handleContextMenu(...oe)),onDragstart:n[3]||(n[3]=withModifiers((...oe)=>e.handleDragStart&&e.handleDragStart(...oe),["stop"])),onDragover:n[4]||(n[4]=withModifiers((...oe)=>e.handleDragOver&&e.handleDragOver(...oe),["stop"])),onDragend:n[5]||(n[5]=withModifiers((...oe)=>e.handleDragEnd&&e.handleDragEnd(...oe),["stop"])),onDrop:n[6]||(n[6]=withModifiers((...oe)=>e.handleDrop&&e.handleDrop(...oe),["stop"]))},[createBaseVNode("div",{class:normalizeClass(e.ns.be("node","content")),style:normalizeStyle({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(openBlock(),createBlock($,{key:0,class:normalizeClass([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:withModifiers(e.handleExpandIconClick,["stop"])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0),e.showCheckbox?(openBlock(),createBlock(V,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:n[0]||(n[0]=withModifiers(()=>{},["stop"])),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):createCommentVNode("v-if",!0),e.node.loading?(openBlock(),createBlock($,{key:2,class:normalizeClass([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:withCtx(()=>[createVNode(L)]),_:1},8,["class"])):createCommentVNode("v-if",!0),createVNode(z,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),createVNode(ae,null,{default:withCtx(()=>[!e.renderAfterExpand||e.childNodeRendered?withDirectives((openBlock(),createElementBlock("div",{key:0,class:normalizeClass(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.node.childNodes,oe=>(openBlock(),createBlock(j,{key:e.getNodeKey(oe),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:oe,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,_hoisted_2$1i)),[[vShow,e.expanded]]):createCommentVNode("v-if",!0)]),_:1})],42,_hoisted_1$1n)),[[vShow,e.node.visible]])}var ElTreeNode$1=_export_sfc$1(_sfc_main$1s,[["render",_sfc_render$2],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node.vue"]]);function useKeydown({el$:e},n){const r=useNamespace("tree"),g=shallowRef([]),y=shallowRef([]);onMounted(()=>{$()}),onUpdated(()=>{g.value=Array.from(e.value.querySelectorAll("[role=treeitem]")),y.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"))}),watch(y,V=>{V.forEach(L=>{L.setAttribute("tabindex","-1")})}),useEventListener(e,"keydown",V=>{const L=V.target;if(!L.className.includes(r.b("node")))return;const z=V.code;g.value=Array.from(e.value.querySelectorAll(`.${r.is("focusable")}[role=treeitem]`));const j=g.value.indexOf(L);let ae;if([EVENT_CODE.up,EVENT_CODE.down].includes(z)){if(V.preventDefault(),z===EVENT_CODE.up){ae=j===-1?0:j!==0?j-1:g.value.length-1;const re=ae;for(;!n.value.getNode(g.value[ae].dataset.key).canFocus;){if(ae--,ae===re){ae=-1;break}ae<0&&(ae=g.value.length-1)}}else{ae=j===-1?0:j<g.value.length-1?j+1:0;const re=ae;for(;!n.value.getNode(g.value[ae].dataset.key).canFocus;){if(ae++,ae===re){ae=-1;break}ae>=g.value.length&&(ae=0)}}ae!==-1&&g.value[ae].focus()}[EVENT_CODE.left,EVENT_CODE.right].includes(z)&&(V.preventDefault(),L.click());const oe=L.querySelector('[type="checkbox"]');[EVENT_CODE.enter,EVENT_CODE.space].includes(z)&&oe&&(V.preventDefault(),oe.click())});const $=()=>{var V;g.value=Array.from(e.value.querySelectorAll(`.${r.is("focusable")}[role=treeitem]`)),y.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"));const L=e.value.querySelectorAll(`.${r.is("checked")}[role=treeitem]`);if(L.length){L[0].setAttribute("tabindex","0");return}(V=g.value[0])==null||V.setAttribute("tabindex","0")}}const _sfc_main$1r=defineComponent({name:"ElTree",components:{ElTreeNode:ElTreeNode$1},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:iconPropType}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,n){const{t:r}=useLocale(),g=useNamespace("tree"),y=ref(new TreeStore({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));y.value.initialize();const k=ref(y.value.root),$=ref(null),V=ref(null),L=ref(null),{broadcastExpanded:z}=useNodeExpandEventBroadcast(e),{dragState:j}=useDragNodeHandler({props:e,ctx:n,el$:V,dropIndicator$:L,store:y});useKeydown({el$:V},y);const ae=computed(()=>{const{childNodes:Tn}=k.value;return!Tn||Tn.length===0||Tn.every(({visible:Ln})=>!Ln)});watch(()=>e.currentNodeKey,Tn=>{y.value.setCurrentNodeKey(Tn)}),watch(()=>e.defaultCheckedKeys,Tn=>{y.value.setDefaultCheckedKey(Tn)}),watch(()=>e.defaultExpandedKeys,Tn=>{y.value.setDefaultExpandedKeys(Tn)}),watch(()=>e.data,Tn=>{y.value.setData(Tn)},{deep:!0}),watch(()=>e.checkStrictly,Tn=>{y.value.checkStrictly=Tn});const oe=Tn=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");y.value.filter(Tn)},re=Tn=>getNodeKey(e.nodeKey,Tn.data),ue=Tn=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const Ln=y.value.getNode(Tn);if(!Ln)return[];const Sn=[Ln.data];let An=Ln.parent;for(;An&&An!==k.value;)Sn.push(An.data),An=An.parent;return Sn.reverse()},le=(Tn,Ln)=>y.value.getCheckedNodes(Tn,Ln),de=Tn=>y.value.getCheckedKeys(Tn),he=()=>{const Tn=y.value.getCurrentNode();return Tn?Tn.data:null},_e=()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const Tn=he();return Tn?Tn[e.nodeKey]:null},xe=(Tn,Ln)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");y.value.setCheckedNodes(Tn,Ln)},Ne=(Tn,Ln)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");y.value.setCheckedKeys(Tn,Ln)},$e=(Tn,Ln,Sn)=>{y.value.setChecked(Tn,Ln,Sn)},Ce=()=>y.value.getHalfCheckedNodes(),Ie=()=>y.value.getHalfCheckedKeys(),ze=(Tn,Ln=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");handleCurrentChange(y,n.emit,()=>y.value.setUserCurrentNode(Tn,Ln))},Ue=(Tn,Ln=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");handleCurrentChange(y,n.emit,()=>y.value.setCurrentNodeKey(Tn,Ln))},Pt=Tn=>y.value.getNode(Tn),hn=Tn=>{y.value.remove(Tn)},Dt=(Tn,Ln)=>{y.value.append(Tn,Ln)},xn=(Tn,Ln)=>{y.value.insertBefore(Tn,Ln)},jt=(Tn,Ln)=>{y.value.insertAfter(Tn,Ln)},Vn=(Tn,Ln,Sn)=>{z(Ln),n.emit("node-expand",Tn,Ln,Sn)},Rn=(Tn,Ln)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");y.value.updateChildren(Tn,Ln)};return provide("RootTree",{ctx:n,props:e,store:y,root:k,currentNode:$,instance:getCurrentInstance()}),provide(formItemContextKey,void 0),{ns:g,store:y,root:k,currentNode:$,dragState:j,el$:V,dropIndicator$:L,isEmpty:ae,filter:oe,getNodeKey:re,getNodePath:ue,getCheckedNodes:le,getCheckedKeys:de,getCurrentNode:he,getCurrentKey:_e,setCheckedNodes:xe,setCheckedKeys:Ne,setChecked:$e,getHalfCheckedNodes:Ce,getHalfCheckedKeys:Ie,setCurrentNode:ze,setCurrentKey:Ue,t:r,getNode:Pt,remove:hn,append:Dt,insertBefore:xn,insertAfter:jt,handleNodeExpand:Vn,updateKeyChildren:Rn}}});function _sfc_render$1(e,n,r,g,y,k){const $=resolveComponent("el-tree-node");return openBlock(),createElementBlock("div",{ref:"el$",class:normalizeClass([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner",e.dragState.dropType==="inner"),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.root.childNodes,V=>(openBlock(),createBlock($,{key:e.getNodeKey(V),node:V,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),e.isEmpty?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(e.ns.e("empty-block"))},[renderSlot(e.$slots,"empty",{},()=>{var V;return[createBaseVNode("span",{class:normalizeClass(e.ns.e("empty-text"))},toDisplayString$1((V=e.emptyText)!=null?V:e.t("el.tree.emptyText")),3)]})],2)):createCommentVNode("v-if",!0),withDirectives(createBaseVNode("div",{ref:"dropIndicator$",class:normalizeClass(e.ns.e("drop-indicator"))},null,2),[[vShow,e.dragState.showDropIndicator]])],2)}var Tree$1=_export_sfc$1(_sfc_main$1r,[["render",_sfc_render$1],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree.vue"]]);Tree$1.install=e=>{e.component(Tree$1.name,Tree$1)};const _Tree=Tree$1,ElTree=_Tree,useSelect=(e,{attrs:n},{tree:r,key:g})=>{const y=useNamespace("tree-select"),k={...pick(toRefs(e),Object.keys(ElSelect.props)),...n,valueKey:g,popperClass:computed(()=>{const $=[y.e("popper")];return e.popperClass&&$.push(e.popperClass),$.join(" ")}),filterMethod:($="")=>{e.filterMethod&&e.filterMethod($),nextTick(()=>{var V;(V=r.value)==null||V.filter($)})},onVisibleChange:$=>{var V;(V=n.onVisibleChange)==null||V.call(n,$),e.filterable&&$&&k.filterMethod()}};return k},component=defineComponent({extends:ElOption,setup(e,n){const r=ElOption.setup(e,n);delete r.selectOptionClick;const g=getCurrentInstance().proxy;return nextTick(()=>{r.select.cachedOptions.get(g.value)||r.select.onOptionCreate(g)}),r},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function isValidValue(e){return e||e===0}function isValidArray(e){return Array.isArray(e)&&e.length}function toValidArray(e){return Array.isArray(e)?e:isValidValue(e)?[e]:[]}function treeFind(e,n,r,g,y){for(let k=0;k<e.length;k++){const $=e[k];if(n($,k,e,y))return g?g($,k,e,y):$;{const V=r($);if(isValidArray(V)){const L=treeFind(V,n,r,g,$);if(L)return L}}}}function treeEach(e,n,r,g){for(let y=0;y<e.length;y++){const k=e[y];n(k,y,e,g);const $=r(k);isValidArray($)&&treeEach($,n,r,k)}}const useTree$1=(e,{attrs:n,slots:r,emit:g},{select:y,tree:k,key:$})=>{watch(()=>e.modelValue,()=>{e.showCheckbox&&nextTick(()=>{const oe=k.value;oe&&!isEqual$1(oe.getCheckedKeys(),toValidArray(e.modelValue))&&oe.setCheckedKeys(toValidArray(e.modelValue))})},{immediate:!0,deep:!0});const V=computed(()=>({value:$.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...e.props})),L=(oe,re)=>{var ue;const le=V.value[oe];return isFunction$3(le)?le(re,(ue=k.value)==null?void 0:ue.getNode(L("value",re))):re[le]},z=toValidArray(e.modelValue).map(oe=>treeFind(e.data||[],re=>L("value",re)===oe,re=>L("children",re),(re,ue,le,de)=>de&&L("value",de))).filter(oe=>isValidValue(oe)),j=computed(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const oe=[];return treeEach(e.data.concat(e.cacheData),re=>{const ue=L("value",re);oe.push({value:ue,currentLabel:L("label",re),isDisabled:L("disabled",re)})},re=>L("children",re)),oe}),ae=computed(()=>j.value.reduce((oe,re)=>({...oe,[re.value]:re}),{}));return{...pick(toRefs(e),Object.keys(_Tree.props)),...n,nodeKey:$,expandOnClickNode:computed(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:computed(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(z):z),renderContent:(oe,{node:re,data:ue,store:le})=>oe(component,{value:L("value",ue),label:L("label",ue),disabled:L("disabled",ue)},e.renderContent?()=>e.renderContent(oe,{node:re,data:ue,store:le}):r.default?()=>r.default({node:re,data:ue,store:le}):void 0),filterNodeMethod:(oe,re,ue)=>{var le;return e.filterNodeMethod?e.filterNodeMethod(oe,re,ue):oe?(le=L("label",re))==null?void 0:le.includes(oe):!0},onNodeClick:(oe,re,ue)=>{var le,de,he;if((le=n.onNodeClick)==null||le.call(n,oe,re,ue),!(e.showCheckbox&&e.checkOnClickNode))if(!e.showCheckbox&&(e.checkStrictly||re.isLeaf)){if(!L("disabled",oe)){const _e=(de=y.value)==null?void 0:de.options.get(L("value",oe));(he=y.value)==null||he.handleOptionSelect(_e)}}else e.expandOnClickNode&&ue.proxy.handleExpandIconClick()},onCheck:(oe,re)=>{if(!e.showCheckbox)return;const ue=L("value",oe),le=re.checkedKeys,de=e.multiple?toValidArray(e.modelValue).filter(_e=>_e in ae.value&&!k.value.getNode(_e)&&!le.includes(_e)):[],he=le.concat(de);if(e.checkStrictly)g(UPDATE_MODEL_EVENT,e.multiple?he:he.includes(ue)?ue:void 0);else if(e.multiple)g(UPDATE_MODEL_EVENT,k.value.getCheckedKeys(!0));else{const _e=treeFind([oe],$e=>!isValidArray(L("children",$e))&&!L("disabled",$e),$e=>L("children",$e)),xe=_e?L("value",_e):void 0,Ne=isValidValue(e.modelValue)&&!!treeFind([oe],$e=>L("value",$e)===e.modelValue,$e=>L("children",$e));g(UPDATE_MODEL_EVENT,xe===e.modelValue||Ne?void 0:xe)}nextTick(()=>{var _e;const xe=toValidArray(e.modelValue);k.value.setCheckedKeys(xe),(_e=n.onCheck)==null||_e.call(n,oe,{checkedKeys:k.value.getCheckedKeys(),checkedNodes:k.value.getCheckedNodes(),halfCheckedKeys:k.value.getHalfCheckedKeys(),halfCheckedNodes:k.value.getHalfCheckedNodes()})})},cacheOptions:j}};var CacheOptions=defineComponent({props:{data:{type:Array,default:()=>[]}},setup(e){const n=inject(selectKey);return watch(()=>e.data,()=>{var r;e.data.forEach(y=>{n.cachedOptions.has(y.value)||n.cachedOptions.set(y.value,y)});const g=((r=n.selectWrapper)==null?void 0:r.querySelectorAll("input"))||[];Array.from(g).includes(document.activeElement)||n.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const _sfc_main$1q=defineComponent({name:"ElTreeSelect",inheritAttrs:!1,props:{...ElSelect.props,..._Tree.props,cacheData:{type:Array,default:()=>[]}},setup(e,n){const{slots:r,expose:g}=n,y=ref(),k=ref(),$=computed(()=>e.nodeKey||e.valueKey||"value"),V=useSelect(e,n,{select:y,tree:k,key:$}),{cacheOptions:L,...z}=useTree$1(e,n,{select:y,tree:k,key:$}),j=reactive({});return g(j),onMounted(()=>{Object.assign(j,{...pick(k.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...pick(y.value,["focus","blur"])})}),()=>h$1(ElSelect,reactive({...V,ref:ae=>y.value=ae}),{...r,default:()=>[h$1(CacheOptions,{data:L.value}),h$1(_Tree,reactive({...z,ref:ae=>k.value=ae}))]})}});var TreeSelect=_export_sfc$1(_sfc_main$1q,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-select/src/tree-select.vue"]]);TreeSelect.install=e=>{e.component(TreeSelect.name,TreeSelect)};const _TreeSelect=TreeSelect,ElTreeSelect=_TreeSelect,ROOT_TREE_INJECTION_KEY=Symbol(),EMPTY_NODE={key:-1,level:-1,data:{}};var TreeOptionsEnum=(e=>(e.KEY="id",e.LABEL="label",e.CHILDREN="children",e.DISABLED="disabled",e))(TreeOptionsEnum||{}),SetOperationEnum=(e=>(e.ADD="add",e.DELETE="delete",e))(SetOperationEnum||{});const itemSize={type:Number,default:26},treeProps=buildProps({data:{type:definePropType(Array),default:()=>mutable([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:definePropType(Object),default:()=>mutable({children:"children",label:"label",disabled:"disabled",value:"id"})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:definePropType(Array),default:()=>mutable([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:definePropType(Array),default:()=>mutable([])},indent:{type:Number,default:16},itemSize,icon:{type:iconPropType},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:definePropType([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:definePropType(Function)},perfMode:{type:Boolean,default:!0}}),treeNodeProps=buildProps({node:{type:definePropType(Object),default:()=>mutable(EMPTY_NODE)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1},itemSize}),treeNodeContentProps=buildProps({node:{type:definePropType(Object),required:!0}}),NODE_CLICK="node-click",NODE_EXPAND="node-expand",NODE_COLLAPSE="node-collapse",CURRENT_CHANGE="current-change",NODE_CHECK="check",NODE_CHECK_CHANGE="check-change",NODE_CONTEXTMENU="node-contextmenu",treeEmits={[NODE_CLICK]:(e,n,r)=>e&&n&&r,[NODE_EXPAND]:(e,n)=>e&&n,[NODE_COLLAPSE]:(e,n)=>e&&n,[CURRENT_CHANGE]:(e,n)=>e&&n,[NODE_CHECK]:(e,n)=>e&&n,[NODE_CHECK_CHANGE]:(e,n)=>e&&typeof n=="boolean",[NODE_CONTEXTMENU]:(e,n,r)=>e&&n&&r},treeNodeEmits={click:(e,n)=>!!(e&&n),toggle:e=>!!e,check:(e,n)=>e&&typeof n=="boolean"};function useCheck(e,n){const r=ref(new Set),g=ref(new Set),{emit:y}=getCurrentInstance();watch([()=>n.value,()=>e.defaultCheckedKeys],()=>nextTick(()=>{_e(e.defaultCheckedKeys)}),{immediate:!0});const k=()=>{if(!n.value||!e.showCheckbox||e.checkStrictly)return;const{levelTreeNodeMap:xe,maxLevel:Ne}=n.value,$e=r.value,Ce=new Set;for(let Ie=Ne-1;Ie>=1;--Ie){const ze=xe.get(Ie);ze&&ze.forEach(Ue=>{const Pt=Ue.children;if(Pt){let hn=!0,Dt=!1;for(const xn of Pt){const jt=xn.key;if($e.has(jt))Dt=!0;else if(Ce.has(jt)){hn=!1,Dt=!0;break}else hn=!1}hn?$e.add(Ue.key):Dt?(Ce.add(Ue.key),$e.delete(Ue.key)):($e.delete(Ue.key),Ce.delete(Ue.key))}})}g.value=Ce},$=xe=>r.value.has(xe.key),V=xe=>g.value.has(xe.key),L=(xe,Ne,$e=!0)=>{const Ce=r.value,Ie=(ze,Ue)=>{Ce[Ue?SetOperationEnum.ADD:SetOperationEnum.DELETE](ze.key);const Pt=ze.children;!e.checkStrictly&&Pt&&Pt.forEach(hn=>{hn.disabled||Ie(hn,Ue)})};Ie(xe,Ne),k(),$e&&z(xe,Ne)},z=(xe,Ne)=>{const{checkedNodes:$e,checkedKeys:Ce}=ue(),{halfCheckedNodes:Ie,halfCheckedKeys:ze}=le();y(NODE_CHECK,xe.data,{checkedKeys:Ce,checkedNodes:$e,halfCheckedKeys:ze,halfCheckedNodes:Ie}),y(NODE_CHECK_CHANGE,xe.data,Ne)};function j(xe=!1){return ue(xe).checkedKeys}function ae(xe=!1){return ue(xe).checkedNodes}function oe(){return le().halfCheckedKeys}function re(){return le().halfCheckedNodes}function ue(xe=!1){const Ne=[],$e=[];if(n?.value&&e.showCheckbox){const{treeNodeMap:Ce}=n.value;r.value.forEach(Ie=>{const ze=Ce.get(Ie);ze&&(!xe||xe&&ze.isLeaf)&&($e.push(Ie),Ne.push(ze.data))})}return{checkedKeys:$e,checkedNodes:Ne}}function le(){const xe=[],Ne=[];if(n?.value&&e.showCheckbox){const{treeNodeMap:$e}=n.value;g.value.forEach(Ce=>{const Ie=$e.get(Ce);Ie&&(Ne.push(Ce),xe.push(Ie.data))})}return{halfCheckedNodes:xe,halfCheckedKeys:Ne}}function de(xe){r.value.clear(),g.value.clear(),_e(xe)}function he(xe,Ne){if(n?.value&&e.showCheckbox){const $e=n.value.treeNodeMap.get(xe);$e&&L($e,Ne,!1)}}function _e(xe){if(n?.value){const{treeNodeMap:Ne}=n.value;if(e.showCheckbox&&Ne&&xe)for(const $e of xe){const Ce=Ne.get($e);Ce&&!$(Ce)&&L(Ce,!0,!1)}}}return{updateCheckedKeys:k,toggleCheckbox:L,isChecked:$,isIndeterminate:V,getCheckedKeys:j,getCheckedNodes:ae,getHalfCheckedKeys:oe,getHalfCheckedNodes:re,setChecked:he,setCheckedKeys:de}}function useFilter(e,n){const r=ref(new Set([])),g=ref(new Set([])),y=computed(()=>isFunction$3(e.filterMethod));function k(V){var L;if(!y.value)return;const z=new Set,j=g.value,ae=r.value,oe=[],re=((L=n.value)==null?void 0:L.treeNodes)||[],ue=e.filterMethod;ae.clear();function le(de){de.forEach(he=>{oe.push(he),ue?.(V,he.data)?oe.forEach(xe=>{z.add(xe.key)}):he.isLeaf&&ae.add(he.key);const _e=he.children;if(_e&&le(_e),!he.isLeaf){if(!z.has(he.key))ae.add(he.key);else if(_e){let xe=!0;for(const Ne of _e)if(!ae.has(Ne.key)){xe=!1;break}xe?j.add(he.key):j.delete(he.key)}}oe.pop()})}return le(re),z}function $(V){return g.value.has(V.key)}return{hiddenExpandIconKeySet:g,hiddenNodeKeySet:r,doFilter:k,isForceHiddenExpandIcon:$}}function useTree(e,n){const r=ref(new Set(e.defaultExpandedKeys)),g=ref(),y=shallowRef();watch(()=>e.currentNodeKey,En=>{g.value=En},{immediate:!0}),watch(()=>e.data,En=>{aa(En)},{immediate:!0});const{isIndeterminate:k,isChecked:$,toggleCheckbox:V,getCheckedKeys:L,getCheckedNodes:z,getHalfCheckedKeys:j,getHalfCheckedNodes:ae,setChecked:oe,setCheckedKeys:re}=useCheck(e,y),{doFilter:ue,hiddenNodeKeySet:le,isForceHiddenExpandIcon:de}=useFilter(e,y),he=computed(()=>{var En;return((En=e.props)==null?void 0:En.value)||TreeOptionsEnum.KEY}),_e=computed(()=>{var En;return((En=e.props)==null?void 0:En.children)||TreeOptionsEnum.CHILDREN}),xe=computed(()=>{var En;return((En=e.props)==null?void 0:En.disabled)||TreeOptionsEnum.DISABLED}),Ne=computed(()=>{var En;return((En=e.props)==null?void 0:En.label)||TreeOptionsEnum.LABEL}),$e=computed(()=>{const En=r.value,Zn=le.value,ha=[],xa=y.value&&y.value.treeNodes||[];function sa(){const Hn=[];for(let bn=xa.length-1;bn>=0;--bn)Hn.push(xa[bn]);for(;Hn.length;){const bn=Hn.pop();if(bn&&(Zn.has(bn.key)||ha.push(bn),En.has(bn.key))){const Xn=bn.children;if(Xn){const $n=Xn.length;for(let kt=$n-1;kt>=0;--kt)Hn.push(Xn[kt])}}}}return sa(),ha}),Ce=computed(()=>$e.value.length>0);function Ie(En){const Zn=new Map,ha=new Map;let xa=1;function sa(bn,Xn=1,$n=void 0){var kt;const At=[];for(const Dn of bn){const Qn=Pt(Dn),oa={level:Xn,key:Qn,data:Dn};oa.label=Dt(Dn),oa.parent=$n;const na=Ue(Dn);oa.disabled=hn(Dn),oa.isLeaf=!na||na.length===0,na&&na.length&&(oa.children=sa(na,Xn+1,oa)),At.push(oa),Zn.set(Qn,oa),ha.has(Xn)||ha.set(Xn,[]),(kt=ha.get(Xn))==null||kt.push(oa)}return Xn>xa&&(xa=Xn),At}const Hn=sa(En);return{treeNodeMap:Zn,levelTreeNodeMap:ha,maxLevel:xa,treeNodes:Hn}}function ze(En){const Zn=ue(En);Zn&&(r.value=Zn)}function Ue(En){return En[_e.value]}function Pt(En){return En?En[he.value]:""}function hn(En){return En[xe.value]}function Dt(En){return En[Ne.value]}function xn(En){r.value.has(En.key)?Sn(En):Ln(En)}function jt(En){r.value=new Set(En)}function Vn(En,Zn){n(NODE_CLICK,En.data,En,Zn),Rn(En),e.expandOnClickNode&&xn(En),e.showCheckbox&&e.checkOnClickNode&&!En.disabled&&V(En,!$(En),!0)}function Rn(En){Mn(En)||(g.value=En.key,n(CURRENT_CHANGE,En.data,En))}function Tn(En,Zn){V(En,Zn)}function Ln(En){const Zn=r.value;if(y.value&&e.accordion){const{treeNodeMap:ha}=y.value;Zn.forEach(xa=>{const sa=ha.get(xa);En&&En.level===sa?.level&&Zn.delete(xa)})}Zn.add(En.key),n(NODE_EXPAND,En.data,En)}function Sn(En){r.value.delete(En.key),n(NODE_COLLAPSE,En.data,En)}function An(En){return r.value.has(En.key)}function In(En){return!!En.disabled}function Mn(En){const Zn=g.value;return Zn!==void 0&&Zn===En.key}function ra(){var En,Zn;if(g.value)return(Zn=(En=y.value)==null?void 0:En.treeNodeMap.get(g.value))==null?void 0:Zn.data}function da(){return g.value}function ua(En){g.value=En}function aa(En){nextTick(()=>y.value=Ie(En))}function Nn(En){var Zn;const ha=isObject$3(En)?Pt(En):En;return(Zn=y.value)==null?void 0:Zn.treeNodeMap.get(ha)}return{tree:y,flattenTree:$e,isNotEmpty:Ce,getKey:Pt,getChildren:Ue,toggleExpand:xn,toggleCheckbox:V,isExpanded:An,isChecked:$,isIndeterminate:k,isDisabled:In,isCurrent:Mn,isForceHiddenExpandIcon:de,handleNodeClick:Vn,handleNodeCheck:Tn,getCurrentNode:ra,getCurrentKey:da,setCurrentKey:ua,getCheckedKeys:L,getCheckedNodes:z,getHalfCheckedKeys:j,getHalfCheckedNodes:ae,setChecked:oe,setCheckedKeys:re,filter:ze,setData:aa,getNode:Nn,expandNode:Ln,collapseNode:Sn,setExpandedKeys:jt}}var ElNodeContent=defineComponent({name:"ElTreeNodeContent",props:treeNodeContentProps,setup(e){const n=inject(ROOT_TREE_INJECTION_KEY),r=useNamespace("tree");return()=>{const g=e.node,{data:y}=g;return n?.ctx.slots.default?n.ctx.slots.default({node:g,data:y}):h$1("span",{class:r.be("node","label")},[g?.label])}}});const _hoisted_1$1m=["aria-expanded","aria-disabled","aria-checked","data-key","onClick"],__default__$7=defineComponent({name:"ElTreeNode"}),_sfc_main$1p=defineComponent({...__default__$7,props:treeNodeProps,emits:treeNodeEmits,setup(e,{emit:n}){const r=e,g=inject(ROOT_TREE_INJECTION_KEY),y=useNamespace("tree"),k=computed(()=>{var ae;return(ae=g?.props.indent)!=null?ae:16}),$=computed(()=>{var ae;return(ae=g?.props.icon)!=null?ae:caret_right_default}),V=ae=>{n("click",r.node,ae)},L=()=>{n("toggle",r.node)},z=ae=>{n("check",r.node,ae)},j=ae=>{var oe,re,ue,le;(ue=(re=(oe=g?.instance)==null?void 0:oe.vnode)==null?void 0:re.props)!=null&&ue.onNodeContextmenu&&(ae.stopPropagation(),ae.preventDefault()),g?.ctx.emit(NODE_CONTEXTMENU,ae,(le=r.node)==null?void 0:le.data,r.node)};return(ae,oe)=>{var re,ue,le;return openBlock(),createElementBlock("div",{ref:"node$",class:normalizeClass([unref(y).b("node"),unref(y).is("expanded",ae.expanded),unref(y).is("current",ae.current),unref(y).is("focusable",!ae.disabled),unref(y).is("checked",!ae.disabled&&ae.checked)]),role:"treeitem",tabindex:"-1","aria-expanded":ae.expanded,"aria-disabled":ae.disabled,"aria-checked":ae.checked,"data-key":(re=ae.node)==null?void 0:re.key,onClick:withModifiers(V,["stop"]),onContextmenu:j},[createBaseVNode("div",{class:normalizeClass(unref(y).be("node","content")),style:normalizeStyle({paddingLeft:`${(ae.node.level-1)*unref(k)}px`,height:ae.itemSize+"px"})},[unref($)?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass([unref(y).is("leaf",!!((ue=ae.node)!=null&&ue.isLeaf)),unref(y).is("hidden",ae.hiddenExpandIcon),{expanded:!((le=ae.node)!=null&&le.isLeaf)&&ae.expanded},unref(y).be("node","expand-icon")]),onClick:withModifiers(L,["stop"])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref($))))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0),ae.showCheckbox?(openBlock(),createBlock(unref(ElCheckbox),{key:1,"model-value":ae.checked,indeterminate:ae.indeterminate,disabled:ae.disabled,onChange:z,onClick:oe[0]||(oe[0]=withModifiers(()=>{},["stop"]))},null,8,["model-value","indeterminate","disabled"])):createCommentVNode("v-if",!0),createVNode(unref(ElNodeContent),{node:ae.node},null,8,["node"])],6)],42,_hoisted_1$1m)}}});var ElTreeNode=_export_sfc$1(_sfc_main$1p,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-v2/src/tree-node.vue"]]);const __default__$6=defineComponent({name:"ElTreeV2"}),_sfc_main$1o=defineComponent({...__default__$6,props:treeProps,emits:treeEmits,setup(e,{expose:n,emit:r}){const g=e,y=useSlots(),k=computed(()=>g.itemSize);provide(ROOT_TREE_INJECTION_KEY,{ctx:{emit:r,slots:y},props:g,instance:getCurrentInstance()}),provide(formItemContextKey,void 0);const{t:$}=useLocale(),V=useNamespace("tree"),{flattenTree:L,isNotEmpty:z,toggleExpand:j,isExpanded:ae,isIndeterminate:oe,isChecked:re,isDisabled:ue,isCurrent:le,isForceHiddenExpandIcon:de,handleNodeClick:he,handleNodeCheck:_e,toggleCheckbox:xe,getCurrentNode:Ne,getCurrentKey:$e,setCurrentKey:Ce,getCheckedKeys:Ie,getCheckedNodes:ze,getHalfCheckedKeys:Ue,getHalfCheckedNodes:Pt,setChecked:hn,setCheckedKeys:Dt,filter:xn,setData:jt,getNode:Vn,expandNode:Rn,collapseNode:Tn,setExpandedKeys:Ln}=useTree(g,r);return n({toggleCheckbox:xe,getCurrentNode:Ne,getCurrentKey:$e,setCurrentKey:Ce,getCheckedKeys:Ie,getCheckedNodes:ze,getHalfCheckedKeys:Ue,getHalfCheckedNodes:Pt,setChecked:hn,setCheckedKeys:Dt,filter:xn,setData:jt,getNode:Vn,expandNode:Rn,collapseNode:Tn,setExpandedKeys:Ln}),(Sn,An)=>{var In;return openBlock(),createElementBlock("div",{class:normalizeClass([unref(V).b(),{[unref(V).m("highlight-current")]:Sn.highlightCurrent}]),role:"tree"},[unref(z)?(openBlock(),createBlock(unref(FixedSizeList),{key:0,"class-name":unref(V).b("virtual-list"),data:unref(L),total:unref(L).length,height:Sn.height,"item-size":unref(k),"perf-mode":Sn.perfMode},{default:withCtx(({data:Mn,index:ra,style:da})=>[(openBlock(),createBlock(ElTreeNode,{key:Mn[ra].key,style:normalizeStyle(da),node:Mn[ra],expanded:unref(ae)(Mn[ra]),"show-checkbox":Sn.showCheckbox,checked:unref(re)(Mn[ra]),indeterminate:unref(oe)(Mn[ra]),"item-size":unref(k),disabled:unref(ue)(Mn[ra]),current:unref(le)(Mn[ra]),"hidden-expand-icon":unref(de)(Mn[ra]),onClick:unref(he),onToggle:unref(j),onCheck:unref(_e)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(V).e("empty-block"))},[createBaseVNode("span",{class:normalizeClass(unref(V).e("empty-text"))},toDisplayString$1((In=Sn.emptyText)!=null?In:unref($)("el.tree.emptyText")),3)],2))],2)}}});var TreeV2=_export_sfc$1(_sfc_main$1o,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-v2/src/tree.vue"]]);const ElTreeV2=withInstall(TreeV2),uploadContextKey=Symbol("uploadContextKey"),SCOPE$2="ElUpload";class UploadAjaxError extends Error{constructor(n,r,g,y){super(n),this.name="UploadAjaxError",this.status=r,this.method=g,this.url=y}}function getError(e,n,r){let g;return r.response?g=`${r.response.error||r.response}`:r.responseText?g=`${r.responseText}`:g=`fail to ${n.method} ${e} ${r.status}`,new UploadAjaxError(g,r.status,n.method,e)}function getBody(e){const n=e.responseText||e.response;if(!n)return n;try{return JSON.parse(n)}catch{return n}}const ajaxUpload=e=>{typeof XMLHttpRequest>"u"&&throwError(SCOPE$2,"XMLHttpRequest is undefined");const n=new XMLHttpRequest,r=e.action;n.upload&&n.upload.addEventListener("progress",k=>{const $=k;$.percent=k.total>0?k.loaded/k.total*100:0,e.onProgress($)});const g=new FormData;if(e.data)for(const[k,$]of Object.entries(e.data))isArray$3($)&&$.length?g.append(k,...$):g.append(k,$);g.append(e.filename,e.file,e.file.name),n.addEventListener("error",()=>{e.onError(getError(r,e,n))}),n.addEventListener("load",()=>{if(n.status<200||n.status>=300)return e.onError(getError(r,e,n));e.onSuccess(getBody(n))}),n.open(e.method,r,!0),e.withCredentials&&"withCredentials"in n&&(n.withCredentials=!0);const y=e.headers||{};if(y instanceof Headers)y.forEach((k,$)=>n.setRequestHeader($,k));else for(const[k,$]of Object.entries(y))isNil($)||n.setRequestHeader(k,String($));return n.send(g),n},uploadListTypes=["text","picture","picture-card"];let fileId=1;const genFileId=()=>Date.now()+fileId++,uploadBaseProps=buildProps({action:{type:String,default:"#"},headers:{type:definePropType(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>mutable({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:definePropType(Array),default:()=>mutable([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:uploadListTypes,default:"text"},httpRequest:{type:definePropType(Function),default:ajaxUpload},disabled:Boolean,limit:Number}),uploadProps=buildProps({...uploadBaseProps,beforeUpload:{type:definePropType(Function),default:NOOP},beforeRemove:{type:definePropType(Function)},onRemove:{type:definePropType(Function),default:NOOP},onChange:{type:definePropType(Function),default:NOOP},onPreview:{type:definePropType(Function),default:NOOP},onSuccess:{type:definePropType(Function),default:NOOP},onProgress:{type:definePropType(Function),default:NOOP},onError:{type:definePropType(Function),default:NOOP},onExceed:{type:definePropType(Function),default:NOOP}}),uploadListProps=buildProps({files:{type:definePropType(Array),default:()=>mutable([])},disabled:{type:Boolean,default:!1},handlePreview:{type:definePropType(Function),default:NOOP},listType:{type:String,values:uploadListTypes,default:"text"}}),uploadListEmits={remove:e=>!!e},_hoisted_1$1l=["onKeydown"],_hoisted_2$1h=["src"],_hoisted_3$Q=["onClick"],_hoisted_4$J=["title"],_hoisted_5$A=["onClick"],_hoisted_6$x=["onClick"],__default__$5=defineComponent({name:"ElUploadList"}),_sfc_main$1n=defineComponent({...__default__$5,props:uploadListProps,emits:uploadListEmits,setup(e,{emit:n}){const{t:r}=useLocale(),g=useNamespace("upload"),y=useNamespace("icon"),k=useNamespace("list"),$=useFormDisabled(),V=ref(!1),L=z=>{n("remove",z)};return(z,j)=>(openBlock(),createBlock(TransitionGroup,{tag:"ul",class:normalizeClass([unref(g).b("list"),unref(g).bm("list",z.listType),unref(g).is("disabled",unref($))]),name:unref(k).b()},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(z.files,ae=>(openBlock(),createElementBlock("li",{key:ae.uid||ae.name,class:normalizeClass([unref(g).be("list","item"),unref(g).is(ae.status),{focusing:V.value}]),tabindex:"0",onKeydown:withKeys(oe=>!unref($)&&L(ae),["delete"]),onFocus:j[0]||(j[0]=oe=>V.value=!0),onBlur:j[1]||(j[1]=oe=>V.value=!1),onClick:j[2]||(j[2]=oe=>V.value=!1)},[renderSlot(z.$slots,"default",{file:ae},()=>[z.listType==="picture"||ae.status!=="uploading"&&z.listType==="picture-card"?(openBlock(),createElementBlock("img",{key:0,class:normalizeClass(unref(g).be("list","item-thumbnail")),src:ae.url,alt:""},null,10,_hoisted_2$1h)):createCommentVNode("v-if",!0),ae.status==="uploading"||z.listType!=="picture-card"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(g).be("list","item-info"))},[createBaseVNode("a",{class:normalizeClass(unref(g).be("list","item-name")),onClick:withModifiers(oe=>z.handlePreview(ae),["prevent"])},[createVNode(unref(ElIcon),{class:normalizeClass(unref(y).m("document"))},{default:withCtx(()=>[createVNode(unref(document_default))]),_:1},8,["class"]),createBaseVNode("span",{class:normalizeClass(unref(g).be("list","item-file-name")),title:ae.name},toDisplayString$1(ae.name),11,_hoisted_4$J)],10,_hoisted_3$Q),ae.status==="uploading"?(openBlock(),createBlock(unref(ElProgress),{key:0,type:z.listType==="picture-card"?"circle":"line","stroke-width":z.listType==="picture-card"?6:2,percentage:Number(ae.percentage),style:normalizeStyle(z.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("label",{class:normalizeClass(unref(g).be("list","item-status-label"))},[z.listType==="text"?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass([unref(y).m("upload-success"),unref(y).m("circle-check")])},{default:withCtx(()=>[createVNode(unref(circle_check_default))]),_:1},8,["class"])):["picture-card","picture"].includes(z.listType)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(y).m("upload-success"),unref(y).m("check")])},{default:withCtx(()=>[createVNode(unref(check_default))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2),unref($)?createCommentVNode("v-if",!0):(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass(unref(y).m("close")),onClick:oe=>L(ae)},{default:withCtx(()=>[createVNode(unref(close_default))]),_:2},1032,["class","onClick"])),createCommentVNode(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),createCommentVNode(" This is a bug which needs to be fixed "),createCommentVNode(" TODO: Fix the incorrect navigation interaction "),unref($)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("i",{key:3,class:normalizeClass(unref(y).m("close-tip"))},toDisplayString$1(unref(r)("el.upload.deleteTip")),3)),z.listType==="picture-card"?(openBlock(),createElementBlock("span",{key:4,class:normalizeClass(unref(g).be("list","item-actions"))},[createBaseVNode("span",{class:normalizeClass(unref(g).be("list","item-preview")),onClick:oe=>z.handlePreview(ae)},[createVNode(unref(ElIcon),{class:normalizeClass(unref(y).m("zoom-in"))},{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1},8,["class"])],10,_hoisted_5$A),unref($)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(g).be("list","item-delete")),onClick:oe=>L(ae)},[createVNode(unref(ElIcon),{class:normalizeClass(unref(y).m("delete"))},{default:withCtx(()=>[createVNode(unref(delete_default))]),_:1},8,["class"])],10,_hoisted_6$x))],2)):createCommentVNode("v-if",!0)])],42,_hoisted_1$1l))),128)),renderSlot(z.$slots,"append")]),_:3},8,["class","name"]))}});var UploadList=_export_sfc$1(_sfc_main$1n,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const uploadDraggerProps=buildProps({disabled:{type:Boolean,default:!1}}),uploadDraggerEmits={file:e=>isArray$3(e)},_hoisted_1$1k=["onDrop","onDragover"],COMPONENT_NAME="ElUploadDrag",__default__$4=defineComponent({name:COMPONENT_NAME}),_sfc_main$1m=defineComponent({...__default__$4,props:uploadDraggerProps,emits:uploadDraggerEmits,setup(e,{emit:n}){const r=inject(uploadContextKey);r||throwError(COMPONENT_NAME,"usage: <el-upload><el-upload-dragger /></el-upload>");const g=useNamespace("upload"),y=ref(!1),k=useFormDisabled(),$=L=>{if(k.value)return;y.value=!1,L.stopPropagation();const z=Array.from(L.dataTransfer.files),j=r.accept.value;if(!j){n("file",z);return}const ae=z.filter(oe=>{const{type:re,name:ue}=oe,le=ue.includes(".")?`.${ue.split(".").pop()}`:"",de=re.replace(/\/.*$/,"");return j.split(",").map(he=>he.trim()).filter(he=>he).some(he=>he.startsWith(".")?le===he:/\/\*$/.test(he)?de===he.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(he)?re===he:!1)});n("file",ae)},V=()=>{k.value||(y.value=!0)};return(L,z)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(g).b("dragger"),unref(g).is("dragover",y.value)]),onDrop:withModifiers($,["prevent"]),onDragover:withModifiers(V,["prevent"]),onDragleave:z[0]||(z[0]=withModifiers(j=>y.value=!1,["prevent"]))},[renderSlot(L.$slots,"default")],42,_hoisted_1$1k))}});var UploadDragger=_export_sfc$1(_sfc_main$1m,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const uploadContentProps=buildProps({...uploadBaseProps,beforeUpload:{type:definePropType(Function),default:NOOP},onRemove:{type:definePropType(Function),default:NOOP},onStart:{type:definePropType(Function),default:NOOP},onSuccess:{type:definePropType(Function),default:NOOP},onProgress:{type:definePropType(Function),default:NOOP},onError:{type:definePropType(Function),default:NOOP},onExceed:{type:definePropType(Function),default:NOOP}}),_hoisted_1$1j=["onKeydown"],_hoisted_2$1g=["name","multiple","accept"],__default__$3=defineComponent({name:"ElUploadContent",inheritAttrs:!1}),_sfc_main$1l=defineComponent({...__default__$3,props:uploadContentProps,setup(e,{expose:n}){const r=e,g=useNamespace("upload"),y=useFormDisabled(),k=shallowRef({}),$=shallowRef(),V=ue=>{if(ue.length===0)return;const{autoUpload:le,limit:de,fileList:he,multiple:_e,onStart:xe,onExceed:Ne}=r;if(de&&he.length+ue.length>de){Ne(ue,he);return}_e||(ue=ue.slice(0,1));for(const $e of ue){const Ce=$e;Ce.uid=genFileId(),xe(Ce),le&&L(Ce)}},L=async ue=>{if($.value.value="",!r.beforeUpload)return z(ue);let le,de={};try{const _e=r.data,xe=r.beforeUpload(ue);de=isObject$3(r.data)?cloneDeep(r.data):r.data,le=await xe,isObject$3(r.data)&&isEqual$1(_e,de)&&(de=cloneDeep(r.data))}catch{le=!1}if(le===!1){r.onRemove(ue);return}let he=ue;le instanceof Blob&&(le instanceof File?he=le:he=new File([le],ue.name,{type:ue.type})),z(Object.assign(he,{uid:ue.uid}),de)},z=(ue,le)=>{const{headers:de,data:he,method:_e,withCredentials:xe,name:Ne,action:$e,onProgress:Ce,onSuccess:Ie,onError:ze,httpRequest:Ue}=r,{uid:Pt}=ue,hn={headers:de||{},withCredentials:xe,file:ue,data:le??he,method:_e,filename:Ne,action:$e,onProgress:xn=>{Ce(xn,ue)},onSuccess:xn=>{Ie(xn,ue),delete k.value[Pt]},onError:xn=>{ze(xn,ue),delete k.value[Pt]}},Dt=Ue(hn);k.value[Pt]=Dt,Dt instanceof Promise&&Dt.then(hn.onSuccess,hn.onError)},j=ue=>{const le=ue.target.files;le&&V(Array.from(le))},ae=()=>{y.value||($.value.value="",$.value.click())},oe=()=>{ae()};return n({abort:ue=>{entriesOf(k.value).filter(ue?([de])=>String(ue.uid)===de:()=>!0).forEach(([de,he])=>{he instanceof XMLHttpRequest&&he.abort(),delete k.value[de]})},upload:L}),(ue,le)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(g).b(),unref(g).m(ue.listType),unref(g).is("drag",ue.drag)]),tabindex:"0",onClick:ae,onKeydown:withKeys(withModifiers(oe,["self"]),["enter","space"])},[ue.drag?(openBlock(),createBlock(UploadDragger,{key:0,disabled:unref(y),onFile:V},{default:withCtx(()=>[renderSlot(ue.$slots,"default")]),_:3},8,["disabled"])):renderSlot(ue.$slots,"default",{key:1}),createBaseVNode("input",{ref_key:"inputRef",ref:$,class:normalizeClass(unref(g).e("input")),name:ue.name,multiple:ue.multiple,accept:ue.accept,type:"file",onChange:j,onClick:le[0]||(le[0]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$1g)],42,_hoisted_1$1j))}});var UploadContent=_export_sfc$1(_sfc_main$1l,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const SCOPE$1="ElUpload",revokeObjectURL=e=>{var n;(n=e.url)!=null&&n.startsWith("blob:")&&URL.revokeObjectURL(e.url)},useHandlers=(e,n)=>{const r=useVModel(e,"fileList",void 0,{passive:!0}),g=oe=>r.value.find(re=>re.uid===oe.uid);function y(oe){var re;(re=n.value)==null||re.abort(oe)}function k(oe=["ready","uploading","success","fail"]){r.value=r.value.filter(re=>!oe.includes(re.status))}const $=(oe,re)=>{const ue=g(re);ue&&(console.error(oe),ue.status="fail",r.value.splice(r.value.indexOf(ue),1),e.onError(oe,ue,r.value),e.onChange(ue,r.value))},V=(oe,re)=>{const ue=g(re);ue&&(e.onProgress(oe,ue,r.value),ue.status="uploading",ue.percentage=Math.round(oe.percent))},L=(oe,re)=>{const ue=g(re);ue&&(ue.status="success",ue.response=oe,e.onSuccess(oe,ue,r.value),e.onChange(ue,r.value))},z=oe=>{isNil(oe.uid)&&(oe.uid=genFileId());const re={name:oe.name,percentage:0,status:"ready",size:oe.size,raw:oe,uid:oe.uid};if(e.listType==="picture-card"||e.listType==="picture")try{re.url=URL.createObjectURL(oe)}catch(ue){ue.message,e.onError(ue,re,r.value)}r.value=[...r.value,re],e.onChange(re,r.value)},j=async oe=>{const re=oe instanceof File?g(oe):oe;re||throwError(SCOPE$1,"file to be removed not found");const ue=le=>{y(le);const de=r.value;de.splice(de.indexOf(le),1),e.onRemove(le,de),revokeObjectURL(le)};e.beforeRemove?await e.beforeRemove(re,r.value)!==!1&&ue(re):ue(re)};function ae(){r.value.filter(({status:oe})=>oe==="ready").forEach(({raw:oe})=>{var re;return oe&&((re=n.value)==null?void 0:re.upload(oe))})}return watch(()=>e.listType,oe=>{oe!=="picture-card"&&oe!=="picture"||(r.value=r.value.map(re=>{const{raw:ue,url:le}=re;if(!le&&ue)try{re.url=URL.createObjectURL(ue)}catch(de){e.onError(de,re,r.value)}return re}))}),watch(r,oe=>{for(const re of oe)re.uid||(re.uid=genFileId()),re.status||(re.status="success")},{immediate:!0,deep:!0}),{uploadFiles:r,abort:y,clearFiles:k,handleError:$,handleProgress:V,handleStart:z,handleSuccess:L,handleRemove:j,submit:ae}},__default__$2=defineComponent({name:"ElUpload"}),_sfc_main$1k=defineComponent({...__default__$2,props:uploadProps,setup(e,{expose:n}){const r=e,g=useFormDisabled(),y=shallowRef(),{abort:k,submit:$,clearFiles:V,uploadFiles:L,handleStart:z,handleError:j,handleRemove:ae,handleSuccess:oe,handleProgress:re}=useHandlers(r,y),ue=computed(()=>r.listType==="picture-card"),le=computed(()=>({...r,fileList:L.value,onStart:z,onProgress:re,onSuccess:oe,onError:j,onRemove:ae}));return onBeforeUnmount(()=>{L.value.forEach(({url:de})=>{de?.startsWith("blob:")&&URL.revokeObjectURL(de)})}),provide(uploadContextKey,{accept:toRef(r,"accept")}),n({abort:k,submit:$,clearFiles:V,handleStart:z,handleRemove:ae}),(de,he)=>(openBlock(),createElementBlock("div",null,[unref(ue)&&de.showFileList?(openBlock(),createBlock(UploadList,{key:0,disabled:unref(g),"list-type":de.listType,files:unref(L),"handle-preview":de.onPreview,onRemove:unref(ae)},createSlots({append:withCtx(()=>[createVNode(UploadContent,mergeProps({ref_key:"uploadRef",ref:y},unref(le)),{default:withCtx(()=>[de.$slots.trigger?renderSlot(de.$slots,"trigger",{key:0}):createCommentVNode("v-if",!0),!de.$slots.trigger&&de.$slots.default?renderSlot(de.$slots,"default",{key:1}):createCommentVNode("v-if",!0)]),_:3},16)]),_:2},[de.$slots.file?{name:"default",fn:withCtx(({file:_e})=>[renderSlot(de.$slots,"file",{file:_e})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):createCommentVNode("v-if",!0),!unref(ue)||unref(ue)&&!de.showFileList?(openBlock(),createBlock(UploadContent,mergeProps({key:1,ref_key:"uploadRef",ref:y},unref(le)),{default:withCtx(()=>[de.$slots.trigger?renderSlot(de.$slots,"trigger",{key:0}):createCommentVNode("v-if",!0),!de.$slots.trigger&&de.$slots.default?renderSlot(de.$slots,"default",{key:1}):createCommentVNode("v-if",!0)]),_:3},16)):createCommentVNode("v-if",!0),de.$slots.trigger?renderSlot(de.$slots,"default",{key:2}):createCommentVNode("v-if",!0),renderSlot(de.$slots,"tip"),!unref(ue)&&de.showFileList?(openBlock(),createBlock(UploadList,{key:3,disabled:unref(g),"list-type":de.listType,files:unref(L),"handle-preview":de.onPreview,onRemove:unref(ae)},createSlots({_:2},[de.$slots.file?{name:"default",fn:withCtx(({file:_e})=>[renderSlot(de.$slots,"file",{file:_e})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):createCommentVNode("v-if",!0)]))}});var Upload=_export_sfc$1(_sfc_main$1k,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const ElUpload=withInstall(Upload);var Components=[ElAffix,ElAlert,ElAutocomplete,ElAutoResizer,ElAvatar,ElBacktop,ElBadge,ElBreadcrumb,ElBreadcrumbItem,ElButton,ElButtonGroup$1,ElCalendar,ElCard,ElCarousel,ElCarouselItem,ElCascader,ElCascaderPanel,ElCheckTag,ElCheckbox,ElCheckboxButton,ElCheckboxGroup$1,ElCol,ElCollapse,ElCollapseItem,ElCollapseTransition,ElColorPicker,ElConfigProvider,ElContainer,ElAside,ElFooter,ElHeader,ElMain,ElDatePicker,ElDescriptions,ElDescriptionsItem,ElDialog,ElDivider,ElDrawer,ElDropdown,ElDropdownItem,ElDropdownMenu,ElEmpty,ElForm,ElFormItem,ElIcon,ElImage,ElImageViewer,ElInput,ElInputNumber,ElLink,ElMenu,ElMenuItem,ElMenuItemGroup,ElSubMenu,ElPageHeader,ElPagination,ElPopconfirm,ElPopover,ElPopper,ElProgress,ElRadio,ElRadioButton,ElRadioGroup,ElRate,ElResult,ElRow,ElScrollbar,ElSelect,ElOption,ElOptionGroup,ElSelectV2,ElSkeleton,ElSkeletonItem,ElSlider,ElSpace,ElStatistic,ElCountdown,ElSteps,ElStep,ElSwitch,ElTable,ElTableColumn,ElTableV2,ElTabs,ElTabPane,ElTag,ElText,ElTimePicker,ElTimeSelect,ElTimeline,ElTimelineItem,ElTooltip,ElTooltipV2,ElTransfer,ElTree,ElTreeSelect,ElTreeV2,ElUpload];const SCOPE="ElInfiniteScroll",CHECK_INTERVAL=50,DEFAULT_DELAY=200,DEFAULT_DISTANCE=0,attributes={delay:{type:Number,default:DEFAULT_DELAY},distance:{type:Number,default:DEFAULT_DISTANCE},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},getScrollOptions=(e,n)=>Object.entries(attributes).reduce((r,[g,y])=>{var k,$;const{type:V,default:L}=y,z=e.getAttribute(`infinite-scroll-${g}`);let j=($=(k=n[z])!=null?k:z)!=null?$:L;return j=j==="false"?!1:j,j=V(j),r[g]=Number.isNaN(j)?L:j,r},{}),destroyObserver=e=>{const{observer:n}=e[SCOPE];n&&(n.disconnect(),delete e[SCOPE].observer)},handleScroll=(e,n)=>{const{container:r,containerEl:g,instance:y,observer:k,lastScrollTop:$}=e[SCOPE],{disabled:V,distance:L}=getScrollOptions(e,y),{clientHeight:z,scrollHeight:j,scrollTop:ae}=g,oe=ae-$;if(e[SCOPE].lastScrollTop=ae,k||V||oe<0)return;let re=!1;if(r===e)re=j-(z+ae)<=L;else{const{clientTop:ue,scrollHeight:le}=e,de=getOffsetTopDistance(e,g);re=ae+z>=de+ue+le-L}re&&n.call(y)};function checkFull(e,n){const{containerEl:r,instance:g}=e[SCOPE],{disabled:y}=getScrollOptions(e,g);y||r.clientHeight===0||(r.scrollHeight<=r.clientHeight?n.call(g):destroyObserver(e))}const InfiniteScroll={async mounted(e,n){const{instance:r,value:g}=n;isFunction$3(g)||throwError(SCOPE,"'v-infinite-scroll' binding value must be a function"),await nextTick();const{delay:y,immediate:k}=getScrollOptions(e,r),$=getScrollContainer(e,!0),V=$===window?document.documentElement:$,L=throttle$1(handleScroll.bind(null,e,g),y);if($){if(e[SCOPE]={instance:r,container:$,containerEl:V,delay:y,cb:g,onScroll:L,lastScrollTop:V.scrollTop},k){const z=new MutationObserver(throttle$1(checkFull.bind(null,e,g),CHECK_INTERVAL));e[SCOPE].observer=z,z.observe(e,{childList:!0,subtree:!0}),checkFull(e,g)}$.addEventListener("scroll",L)}},unmounted(e){const{container:n,onScroll:r}=e[SCOPE];n?.removeEventListener("scroll",r),destroyObserver(e)},async updated(e){if(!e[SCOPE])await nextTick();else{const{containerEl:n,cb:r,observer:g}=e[SCOPE];n.clientHeight&&g&&checkFull(e,r)}}},_InfiniteScroll=InfiniteScroll;_InfiniteScroll.install=e=>{e.directive("InfiniteScroll",_InfiniteScroll)};const ElInfiniteScroll=_InfiniteScroll;function createLoadingComponent(e){let n;const r=ref(!1),g=reactive({...e,originalPosition:"",originalOverflow:"",visible:!1});function y(oe){g.text=oe}function k(){const oe=g.parent,re=ae.ns;if(!oe.vLoadingAddClassList){let ue=oe.getAttribute("loading-number");ue=Number.parseInt(ue)-1,ue?oe.setAttribute("loading-number",ue.toString()):(removeClass(oe,re.bm("parent","relative")),oe.removeAttribute("loading-number")),removeClass(oe,re.bm("parent","hidden"))}$(),j.unmount()}function $(){var oe,re;(re=(oe=ae.$el)==null?void 0:oe.parentNode)==null||re.removeChild(ae.$el)}function V(){var oe;e.beforeClose&&!e.beforeClose()||(r.value=!0,clearTimeout(n),n=window.setTimeout(L,400),g.visible=!1,(oe=e.closed)==null||oe.call(e))}function L(){if(!r.value)return;const oe=g.parent;r.value=!1,oe.vLoadingAddClassList=void 0,k()}const z=defineComponent({name:"ElLoading",setup(oe,{expose:re}){const{ns:ue,zIndex:le}=useGlobalComponentSettings("loading");return re({ns:ue,zIndex:le}),()=>{const de=g.spinner||g.svg,he=h$1("svg",{class:"circular",viewBox:g.svgViewBox?g.svgViewBox:"0 0 50 50",...de?{innerHTML:de}:{}},[h$1("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),_e=g.text?h$1("p",{class:ue.b("text")},[g.text]):void 0;return h$1(Transition,{name:ue.b("fade"),onAfterLeave:L},{default:withCtx(()=>[withDirectives(createVNode("div",{style:{backgroundColor:g.background||""},class:[ue.b("mask"),g.customClass,g.fullscreen?"is-fullscreen":""]},[h$1("div",{class:ue.b("spinner")},[he,_e])]),[[vShow,g.visible]])])})}}}),j=createApp(z),ae=j.mount(document.createElement("div"));return{...toRefs(g),setText:y,removeElLoadingChild:$,close:V,handleAfterLeave:L,vm:ae,get $el(){return ae.$el}}}let fullscreenInstance;const Loading=function(e={}){if(!isClient)return;const n=resolveOptions(e);if(n.fullscreen&&fullscreenInstance)return fullscreenInstance;const r=createLoadingComponent({...n,closed:()=>{var y;(y=n.closed)==null||y.call(n),n.fullscreen&&(fullscreenInstance=void 0)}});addStyle(n,n.parent,r),addClassList(n,n.parent,r),n.parent.vLoadingAddClassList=()=>addClassList(n,n.parent,r);let g=n.parent.getAttribute("loading-number");return g?g=`${Number.parseInt(g)+1}`:g="1",n.parent.setAttribute("loading-number",g),n.parent.appendChild(r.$el),nextTick(()=>r.visible.value=n.visible),n.fullscreen&&(fullscreenInstance=r),r},resolveOptions=e=>{var n,r,g,y;let k;return isString$3(e.target)?k=(n=document.querySelector(e.target))!=null?n:document.body:k=e.target||document.body,{parent:k===document.body||e.body?document.body:k,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:k===document.body&&((r=e.fullscreen)!=null?r:!0),lock:(g=e.lock)!=null?g:!1,customClass:e.customClass||"",visible:(y=e.visible)!=null?y:!0,target:k}},addStyle=async(e,n,r)=>{const{nextZIndex:g}=r.vm.zIndex||r.vm._.exposed.zIndex,y={};if(e.fullscreen)r.originalPosition.value=getStyle(document.body,"position"),r.originalOverflow.value=getStyle(document.body,"overflow"),y.zIndex=g();else if(e.parent===document.body){r.originalPosition.value=getStyle(document.body,"position"),await nextTick();for(const k of["top","left"]){const $=k==="top"?"scrollTop":"scrollLeft";y[k]=`${e.target.getBoundingClientRect()[k]+document.body[$]+document.documentElement[$]-Number.parseInt(getStyle(document.body,`margin-${k}`),10)}px`}for(const k of["height","width"])y[k]=`${e.target.getBoundingClientRect()[k]}px`}else r.originalPosition.value=getStyle(n,"position");for(const[k,$]of Object.entries(y))r.$el.style[k]=$},addClassList=(e,n,r)=>{const g=r.vm.ns||r.vm._.exposed.ns;["absolute","fixed","sticky"].includes(r.originalPosition.value)?removeClass(n,g.bm("parent","relative")):addClass(n,g.bm("parent","relative")),e.fullscreen&&e.lock?addClass(n,g.bm("parent","hidden")):removeClass(n,g.bm("parent","hidden"))},INSTANCE_KEY=Symbol("ElLoading"),createInstance=(e,n)=>{var r,g,y,k;const $=n.instance,V=oe=>isObject$3(n.value)?n.value[oe]:void 0,L=oe=>{const re=isString$3(oe)&&$?.[oe]||oe;return re&&ref(re)},z=oe=>L(V(oe)||e.getAttribute(`element-loading-${hyphenate(oe)}`)),j=(r=V("fullscreen"))!=null?r:n.modifiers.fullscreen,ae={text:z("text"),svg:z("svg"),svgViewBox:z("svgViewBox"),spinner:z("spinner"),background:z("background"),customClass:z("customClass"),fullscreen:j,target:(g=V("target"))!=null?g:j?void 0:e,body:(y=V("body"))!=null?y:n.modifiers.body,lock:(k=V("lock"))!=null?k:n.modifiers.lock};e[INSTANCE_KEY]={options:ae,instance:Loading(ae)}},updateOptions=(e,n)=>{for(const r of Object.keys(n))isRef(n[r])&&(n[r].value=e[r])},vLoading={mounted(e,n){n.value&&createInstance(e,n)},updated(e,n){const r=e[INSTANCE_KEY];n.oldValue!==n.value&&(n.value&&!n.oldValue?createInstance(e,n):n.value&&n.oldValue?isObject$3(n.value)&&updateOptions(n.value,r.options):r?.instance.close())},unmounted(e){var n;(n=e[INSTANCE_KEY])==null||n.instance.close()}},ElLoading={install(e){e.directive("loading",vLoading),e.config.globalProperties.$loading=Loading},directive:vLoading,service:Loading},messageTypes=["success","info","warning","error"],messageDefaults=mutable({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:isClient?document.body:void 0}),messageProps=buildProps({customClass:{type:String,default:messageDefaults.customClass},center:{type:Boolean,default:messageDefaults.center},dangerouslyUseHTMLString:{type:Boolean,default:messageDefaults.dangerouslyUseHTMLString},duration:{type:Number,default:messageDefaults.duration},icon:{type:iconPropType,default:messageDefaults.icon},id:{type:String,default:messageDefaults.id},message:{type:definePropType([String,Object,Function]),default:messageDefaults.message},onClose:{type:definePropType(Function),required:!1},showClose:{type:Boolean,default:messageDefaults.showClose},type:{type:String,values:messageTypes,default:messageDefaults.type},offset:{type:Number,default:messageDefaults.offset},zIndex:{type:Number,default:messageDefaults.zIndex},grouping:{type:Boolean,default:messageDefaults.grouping},repeatNum:{type:Number,default:messageDefaults.repeatNum}}),messageEmits={destroy:()=>!0},instances=shallowReactive([]),getInstance=e=>{const n=instances.findIndex(y=>y.id===e),r=instances[n];let g;return n>0&&(g=instances[n-1]),{current:r,prev:g}},getLastOffset=e=>{const{prev:n}=getInstance(e);return n?n.vm.exposed.bottom.value:0},getOffsetOrSpace=(e,n)=>instances.findIndex(g=>g.id===e)>0?20:n,_hoisted_1$1i=["id"],_hoisted_2$1f=["innerHTML"],__default__$1=defineComponent({name:"ElMessage"}),_sfc_main$1j=defineComponent({...__default__$1,props:messageProps,emits:messageEmits,setup(e,{expose:n}){const r=e,{Close:g}=TypeComponents,{ns:y,zIndex:k}=useGlobalComponentSettings("message"),{currentZIndex:$,nextZIndex:V}=k,L=ref(),z=ref(!1),j=ref(0);let ae;const oe=computed(()=>r.type?r.type==="error"?"danger":r.type:"info"),re=computed(()=>{const Ie=r.type;return{[y.bm("icon",Ie)]:Ie&&TypeComponentsMap[Ie]}}),ue=computed(()=>r.icon||TypeComponentsMap[r.type]||""),le=computed(()=>getLastOffset(r.id)),de=computed(()=>getOffsetOrSpace(r.id,r.offset)+le.value),he=computed(()=>j.value+de.value),_e=computed(()=>({top:`${de.value}px`,zIndex:$.value}));function xe(){r.duration!==0&&({stop:ae}=useTimeoutFn(()=>{$e()},r.duration))}function Ne(){ae?.()}function $e(){z.value=!1}function Ce({code:Ie}){Ie===EVENT_CODE.esc&&$e()}return onMounted(()=>{xe(),V(),z.value=!0}),watch(()=>r.repeatNum,()=>{Ne(),xe()}),useEventListener(document,"keydown",Ce),useResizeObserver(L,()=>{j.value=L.value.getBoundingClientRect().height}),n({visible:z,bottom:he,close:$e}),(Ie,ze)=>(openBlock(),createBlock(Transition,{name:unref(y).b("fade"),onBeforeLeave:Ie.onClose,onAfterLeave:ze[0]||(ze[0]=Ue=>Ie.$emit("destroy")),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:Ie.id,ref_key:"messageRef",ref:L,class:normalizeClass([unref(y).b(),{[unref(y).m(Ie.type)]:Ie.type&&!Ie.icon},unref(y).is("center",Ie.center),unref(y).is("closable",Ie.showClose),Ie.customClass]),style:normalizeStyle(unref(_e)),role:"alert",onMouseenter:Ne,onMouseleave:xe},[Ie.repeatNum>1?(openBlock(),createBlock(unref(ElBadge),{key:0,value:Ie.repeatNum,type:unref(oe),class:normalizeClass(unref(y).e("badge"))},null,8,["value","type","class"])):createCommentVNode("v-if",!0),unref(ue)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(y).e("icon"),unref(re)])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(ue))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),renderSlot(Ie.$slots,"default",{},()=>[Ie.dangerouslyUseHTMLString?(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" Caution here, message could've been compromised, never use user's input as message "),createBaseVNode("p",{class:normalizeClass(unref(y).e("content")),innerHTML:Ie.message},null,10,_hoisted_2$1f)],2112)):(openBlock(),createElementBlock("p",{key:0,class:normalizeClass(unref(y).e("content"))},toDisplayString$1(Ie.message),3))]),Ie.showClose?(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass(unref(y).e("closeBtn")),onClick:withModifiers($e,["stop"])},{default:withCtx(()=>[createVNode(unref(g))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],46,_hoisted_1$1i),[[vShow,z.value]])]),_:3},8,["name","onBeforeLeave"]))}});var MessageConstructor=_export_sfc$1(_sfc_main$1j,[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let seed$1=1;const normalizeOptions=e=>{const n=!e||isString$3(e)||isVNode$1(e)||isFunction$3(e)?{message:e}:e,r={...messageDefaults,...n};if(!r.appendTo)r.appendTo=document.body;else if(isString$3(r.appendTo)){let g=document.querySelector(r.appendTo);isElement$1(g)||(g=document.body),r.appendTo=g}return r},closeMessage=e=>{const n=instances.indexOf(e);if(n===-1)return;instances.splice(n,1);const{handler:r}=e;r.close()},createMessage=({appendTo:e,...n},r)=>{const g=`message_${seed$1++}`,y=n.onClose,k=document.createElement("div"),$={...n,id:g,onClose:()=>{y?.(),closeMessage(j)},onDestroy:()=>{render$2(null,k)}},V=createVNode(MessageConstructor,$,isFunction$3($.message)||isVNode$1($.message)?{default:isFunction$3($.message)?$.message:()=>$.message}:null);V.appContext=r||message._context,render$2(V,k),e.appendChild(k.firstElementChild);const L=V.component,j={id:g,vnode:V,vm:L,handler:{close:()=>{L.exposed.visible.value=!1}},props:V.component.props};return j},message=(e={},n)=>{if(!isClient)return{close:()=>{}};if(isNumber$1(messageConfig.max)&&instances.length>=messageConfig.max)return{close:()=>{}};const r=normalizeOptions(e);if(r.grouping&&instances.length){const y=instances.find(({vnode:k})=>{var $;return(($=k.props)==null?void 0:$.message)===r.message});if(y)return y.props.repeatNum+=1,y.props.type=r.type,y.handler}const g=createMessage(r,n);return instances.push(g),g.handler};messageTypes.forEach(e=>{message[e]=(n={},r)=>{const g=normalizeOptions(n);return message({...g,type:e},r)}});function closeAll$1(e){for(const n of instances)(!e||e===n.props.type)&&n.handler.close()}message.closeAll=closeAll$1;message._context=null;const ElMessage=withInstallFunction(message,"$message"),_sfc_main$1i=defineComponent({name:"ElMessageBox",directives:{TrapFocus},components:{ElButton,ElFocusTrap,ElInput,ElOverlay,ElIcon,...TypeComponents},inheritAttrs:!1,props:{buttonSize:{type:String,validator:isValidComponentSize},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{locale:r,zIndex:g,ns:y,size:k}=useGlobalComponentSettings("message-box",computed(()=>e.buttonSize)),{t:$}=r,{nextZIndex:V}=g,L=ref(!1),z=reactive({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:V()}),j=computed(()=>{const Vn=z.type;return{[y.bm("icon",Vn)]:Vn&&TypeComponentsMap[Vn]}}),ae=useId(),oe=useId(),re=computed(()=>z.icon||TypeComponentsMap[z.type]||""),ue=computed(()=>!!z.message),le=ref(),de=ref(),he=ref(),_e=ref(),xe=ref(),Ne=computed(()=>z.confirmButtonClass);watch(()=>z.inputValue,async Vn=>{await nextTick(),e.boxType==="prompt"&&Vn!==null&&hn()},{immediate:!0}),watch(()=>L.value,Vn=>{var Rn,Tn;Vn&&(e.boxType!=="prompt"&&(z.autofocus?he.value=(Tn=(Rn=xe.value)==null?void 0:Rn.$el)!=null?Tn:le.value:he.value=le.value),z.zIndex=V()),e.boxType==="prompt"&&(Vn?nextTick().then(()=>{var Ln;_e.value&&_e.value.$el&&(z.autofocus?he.value=(Ln=Dt())!=null?Ln:le.value:he.value=le.value)}):(z.editorErrorMessage="",z.validateError=!1))});const $e=computed(()=>e.draggable);useDraggable(le,de,$e),onMounted(async()=>{await nextTick(),e.closeOnHashChange&&window.addEventListener("hashchange",Ce)}),onBeforeUnmount(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",Ce)});function Ce(){L.value&&(L.value=!1,nextTick(()=>{z.action&&n("action",z.action)}))}const Ie=()=>{e.closeOnClickModal&&Pt(z.distinguishCancelAndClose?"close":"cancel")},ze=useSameTarget(Ie),Ue=Vn=>{if(z.inputType!=="textarea")return Vn.preventDefault(),Pt("confirm")},Pt=Vn=>{var Rn;e.boxType==="prompt"&&Vn==="confirm"&&!hn()||(z.action=Vn,z.beforeClose?(Rn=z.beforeClose)==null||Rn.call(z,Vn,z,Ce):Ce())},hn=()=>{if(e.boxType==="prompt"){const Vn=z.inputPattern;if(Vn&&!Vn.test(z.inputValue||""))return z.editorErrorMessage=z.inputErrorMessage||$("el.messagebox.error"),z.validateError=!0,!1;const Rn=z.inputValidator;if(typeof Rn=="function"){const Tn=Rn(z.inputValue);if(Tn===!1)return z.editorErrorMessage=z.inputErrorMessage||$("el.messagebox.error"),z.validateError=!0,!1;if(typeof Tn=="string")return z.editorErrorMessage=Tn,z.validateError=!0,!1}}return z.editorErrorMessage="",z.validateError=!1,!0},Dt=()=>{const Vn=_e.value.$refs;return Vn.input||Vn.textarea},xn=()=>{Pt("close")},jt=()=>{e.closeOnPressEscape&&xn()};return e.lockScroll&&useLockscreen(L),{...toRefs(z),ns:y,overlayEvent:ze,visible:L,hasMessage:ue,typeClass:j,contentId:ae,inputId:oe,btnSize:k,iconComponent:re,confirmButtonClasses:Ne,rootRef:le,focusStartRef:he,headerRef:de,inputRef:_e,confirmRef:xe,doClose:Ce,handleClose:xn,onCloseRequested:jt,handleWrapperClick:Ie,handleInputEnter:Ue,handleAction:Pt,t:$}}}),_hoisted_1$1h=["aria-label","aria-describedby"],_hoisted_2$1e=["aria-label"],_hoisted_3$P=["id"];function _sfc_render(e,n,r,g,y,k){const $=resolveComponent("el-icon"),V=resolveComponent("close"),L=resolveComponent("el-input"),z=resolveComponent("el-button"),j=resolveComponent("el-focus-trap"),ae=resolveComponent("el-overlay");return openBlock(),createBlock(Transition,{name:"fade-in-linear",onAfterLeave:n[11]||(n[11]=oe=>e.$emit("vanish")),persisted:""},{default:withCtx(()=>[withDirectives(createVNode(ae,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:withCtx(()=>[createBaseVNode("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:normalizeClass(`${e.ns.namespace.value}-overlay-message-box`),onClick:n[8]||(n[8]=(...oe)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...oe)),onMousedown:n[9]||(n[9]=(...oe)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...oe)),onMouseup:n[10]||(n[10]=(...oe)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...oe))},[createVNode(j,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:withCtx(()=>[createBaseVNode("div",{ref:"rootRef",class:normalizeClass([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:normalizeStyle(e.customStyle),tabindex:"-1",onClick:n[7]||(n[7]=withModifiers(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(openBlock(),createElementBlock("div",{key:0,ref:"headerRef",class:normalizeClass(e.ns.e("header"))},[createBaseVNode("div",{class:normalizeClass(e.ns.e("title"))},[e.iconComponent&&e.center?(openBlock(),createBlock($,{key:0,class:normalizeClass([e.ns.e("status"),e.typeClass])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(e.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),createBaseVNode("span",null,toDisplayString$1(e.title),1)],2),e.showClose?(openBlock(),createElementBlock("button",{key:0,type:"button",class:normalizeClass(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:n[0]||(n[0]=oe=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:n[1]||(n[1]=withKeys(withModifiers(oe=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[createVNode($,{class:normalizeClass(e.ns.e("close"))},{default:withCtx(()=>[createVNode(V)]),_:1},8,["class"])],42,_hoisted_2$1e)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{id:e.contentId,class:normalizeClass(e.ns.e("content"))},[createBaseVNode("div",{class:normalizeClass(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(openBlock(),createBlock($,{key:0,class:normalizeClass([e.ns.e("status"),e.typeClass])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(e.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),e.hasMessage?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(e.ns.e("message"))},[renderSlot(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(openBlock(),createBlock(resolveDynamicComponent(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(openBlock(),createBlock(resolveDynamicComponent(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:withCtx(()=>[createTextVNode(toDisplayString$1(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):createCommentVNode("v-if",!0)],2),withDirectives(createBaseVNode("div",{class:normalizeClass(e.ns.e("input"))},[createVNode(L,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":n[2]||(n[2]=oe=>e.inputValue=oe),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:normalizeClass({invalid:e.validateError}),onKeydown:withKeys(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),createBaseVNode("div",{class:normalizeClass(e.ns.e("errormsg")),style:normalizeStyle({visibility:e.editorErrorMessage?"visible":"hidden"})},toDisplayString$1(e.editorErrorMessage),7)],2),[[vShow,e.showInput]])],10,_hoisted_3$P),createBaseVNode("div",{class:normalizeClass(e.ns.e("btns"))},[e.showCancelButton?(openBlock(),createBlock(z,{key:0,loading:e.cancelButtonLoading,class:normalizeClass([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:n[3]||(n[3]=oe=>e.handleAction("cancel")),onKeydown:n[4]||(n[4]=withKeys(withModifiers(oe=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):createCommentVNode("v-if",!0),withDirectives(createVNode(z,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:normalizeClass([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:n[5]||(n[5]=oe=>e.handleAction("confirm")),onKeydown:n[6]||(n[6]=withKeys(withModifiers(oe=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[vShow,e.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,_hoisted_1$1h)]),_:3},8,["z-index","overlay-class","mask"]),[[vShow,e.visible]])]),_:3})}var MessageBoxConstructor=_export_sfc$1(_sfc_main$1i,[["render",_sfc_render],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const messageInstance=new Map,getAppendToElement=e=>{let n=document.body;return e.appendTo&&(isString$3(e.appendTo)&&(n=document.querySelector(e.appendTo)),isElement$1(e.appendTo)&&(n=e.appendTo),isElement$1(n)||(n=document.body)),n},initInstance=(e,n,r=null)=>{const g=createVNode(MessageBoxConstructor,e,isFunction$3(e.message)||isVNode$1(e.message)?{default:isFunction$3(e.message)?e.message:()=>e.message}:null);return g.appContext=r,render$2(g,n),getAppendToElement(e).appendChild(n.firstElementChild),g.component},genContainer=()=>document.createElement("div"),showMessage=(e,n)=>{const r=genContainer();e.onVanish=()=>{render$2(null,r),messageInstance.delete(y)},e.onAction=k=>{const $=messageInstance.get(y);let V;e.showInput?V={value:y.inputValue,action:k}:V=k,e.callback?e.callback(V,g.proxy):k==="cancel"||k==="close"?e.distinguishCancelAndClose&&k!=="cancel"?$.reject("close"):$.reject("cancel"):$.resolve(V)};const g=initInstance(e,r,n),y=g.proxy;for(const k in e)hasOwn$1(e,k)&&!hasOwn$1(y.$props,k)&&(y[k]=e[k]);return y.visible=!0,y};function MessageBox(e,n=null){if(!isClient)return Promise.reject();let r;return isString$3(e)||isVNode$1(e)?e={message:e}:r=e.callback,new Promise((g,y)=>{const k=showMessage(e,n??MessageBox._context);messageInstance.set(k,{options:e,callback:r,resolve:g,reject:y})})}const MESSAGE_BOX_VARIANTS=["alert","confirm","prompt"],MESSAGE_BOX_DEFAULT_OPTS={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};MESSAGE_BOX_VARIANTS.forEach(e=>{MessageBox[e]=messageBoxFactory(e)});function messageBoxFactory(e){return(n,r,g,y)=>{let k="";return isObject$3(r)?(g=r,k=""):isUndefined(r)?k="":k=r,MessageBox(Object.assign({title:k,message:n,type:"",...MESSAGE_BOX_DEFAULT_OPTS[e]},g,{boxType:e}),y)}}MessageBox.close=()=>{messageInstance.forEach((e,n)=>{n.doClose()}),messageInstance.clear()};MessageBox._context=null;const _MessageBox=MessageBox;_MessageBox.install=e=>{_MessageBox._context=e._context,e.config.globalProperties.$msgbox=_MessageBox,e.config.globalProperties.$messageBox=_MessageBox,e.config.globalProperties.$alert=_MessageBox.alert,e.config.globalProperties.$confirm=_MessageBox.confirm,e.config.globalProperties.$prompt=_MessageBox.prompt};const ElMessageBox=_MessageBox,notificationTypes=["success","info","warning","error"],notificationProps=buildProps({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:iconPropType},id:{type:String,default:""},message:{type:definePropType([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:definePropType(Function),default:()=>{}},onClose:{type:definePropType(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...notificationTypes,""],default:""},zIndex:Number}),notificationEmits={destroy:()=>!0},_hoisted_1$1g=["id"],_hoisted_2$1d=["textContent"],_hoisted_3$O={key:0},_hoisted_4$I=["innerHTML"],__default__=defineComponent({name:"ElNotification"}),_sfc_main$1h=defineComponent({...__default__,props:notificationProps,emits:notificationEmits,setup(e,{expose:n}){const r=e,{ns:g,zIndex:y}=useGlobalComponentSettings("notification"),{nextZIndex:k,currentZIndex:$}=y,{Close:V}=CloseComponents,L=ref(!1);let z;const j=computed(()=>{const xe=r.type;return xe&&TypeComponentsMap[r.type]?g.m(xe):""}),ae=computed(()=>r.type&&TypeComponentsMap[r.type]||r.icon),oe=computed(()=>r.position.endsWith("right")?"right":"left"),re=computed(()=>r.position.startsWith("top")?"top":"bottom"),ue=computed(()=>{var xe;return{[re.value]:`${r.offset}px`,zIndex:(xe=r.zIndex)!=null?xe:$.value}});function le(){r.duration>0&&({stop:z}=useTimeoutFn(()=>{L.value&&he()},r.duration))}function de(){z?.()}function he(){L.value=!1}function _e({code:xe}){xe===EVENT_CODE.delete||xe===EVENT_CODE.backspace?de():xe===EVENT_CODE.esc?L.value&&he():le()}return onMounted(()=>{le(),k(),L.value=!0}),useEventListener(document,"keydown",_e),n({visible:L,close:he}),(xe,Ne)=>(openBlock(),createBlock(Transition,{name:unref(g).b("fade"),onBeforeLeave:xe.onClose,onAfterLeave:Ne[1]||(Ne[1]=$e=>xe.$emit("destroy")),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:xe.id,class:normalizeClass([unref(g).b(),xe.customClass,unref(oe)]),style:normalizeStyle(unref(ue)),role:"alert",onMouseenter:de,onMouseleave:le,onClick:Ne[0]||(Ne[0]=(...$e)=>xe.onClick&&xe.onClick(...$e))},[unref(ae)?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass([unref(g).e("icon"),unref(j)])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(ae))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(g).e("group"))},[createBaseVNode("h2",{class:normalizeClass(unref(g).e("title")),textContent:toDisplayString$1(xe.title)},null,10,_hoisted_2$1d),withDirectives(createBaseVNode("div",{class:normalizeClass(unref(g).e("content")),style:normalizeStyle(xe.title?void 0:{margin:0})},[renderSlot(xe.$slots,"default",{},()=>[xe.dangerouslyUseHTMLString?(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" Caution here, message could've been compromised, never use user's input as message "),createBaseVNode("p",{innerHTML:xe.message},null,8,_hoisted_4$I)],2112)):(openBlock(),createElementBlock("p",_hoisted_3$O,toDisplayString$1(xe.message),1))])],6),[[vShow,xe.message]]),xe.showClose?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(g).e("closeBtn")),onClick:withModifiers(he,["stop"])},{default:withCtx(()=>[createVNode(unref(V))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],2)],46,_hoisted_1$1g),[[vShow,L.value]])]),_:3},8,["name","onBeforeLeave"]))}});var NotificationConstructor=_export_sfc$1(_sfc_main$1h,[["__file","/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]);const notifications={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},GAP_SIZE=16;let seed=1;const notify=function(e={},n=null){if(!isClient)return{close:()=>{}};(typeof e=="string"||isVNode$1(e))&&(e={message:e});const r=e.position||"top-right";let g=e.offset||0;notifications[r].forEach(({vm:j})=>{var ae;g+=(((ae=j.el)==null?void 0:ae.offsetHeight)||0)+GAP_SIZE}),g+=GAP_SIZE;const y=`notification_${seed++}`,k=e.onClose,$={...e,offset:g,id:y,onClose:()=>{close(y,r,k)}};let V=document.body;isElement$1(e.appendTo)?V=e.appendTo:isString$3(e.appendTo)&&(V=document.querySelector(e.appendTo)),isElement$1(V)||(V=document.body);const L=document.createElement("div"),z=createVNode(NotificationConstructor,$,isVNode$1($.message)?{default:()=>$.message}:null);return z.appContext=n??notify._context,z.props.onDestroy=()=>{render$2(null,L)},render$2(z,L),notifications[r].push({vm:z}),V.appendChild(L.firstElementChild),{close:()=>{z.component.exposed.visible.value=!1}}};notificationTypes.forEach(e=>{notify[e]=(n={})=>((typeof n=="string"||isVNode$1(n))&&(n={message:n}),notify({...n,type:e}))});function close(e,n,r){const g=notifications[n],y=g.findIndex(({vm:z})=>{var j;return((j=z.component)==null?void 0:j.props.id)===e});if(y===-1)return;const{vm:k}=g[y];if(!k)return;r?.(k);const $=k.el.offsetHeight,V=n.split("-")[0];g.splice(y,1);const L=g.length;if(!(L<1))for(let z=y;z<L;z++){const{el:j,component:ae}=g[z].vm,oe=Number.parseInt(j.style[V],10)-$-GAP_SIZE;ae.props.offset=oe}}function closeAll(){for(const e of Object.values(notifications))e.forEach(({vm:n})=>{n.component.exposed.visible.value=!1})}notify.closeAll=closeAll;notify._context=null;const ElNotification=withInstallFunction(notify,"$notify");var Plugins=[ElInfiniteScroll,ElLoading,ElMessage,ElMessageBox,ElNotification,ElPopoverDirective],installer=makeInstaller([...Components,...Plugins]);function _isPlaceholder(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}function _curry1(e){return function n(r){return arguments.length===0||_isPlaceholder(r)?n:e.apply(this,arguments)}}function _curry2(e){return function n(r,g){switch(arguments.length){case 0:return n;case 1:return _isPlaceholder(r)?n:_curry1(function(y){return e(r,y)});default:return _isPlaceholder(r)&&_isPlaceholder(g)?n:_isPlaceholder(r)?_curry1(function(y){return e(y,g)}):_isPlaceholder(g)?_curry1(function(y){return e(r,y)}):e(r,g)}}}function _arity(e,n){switch(e){case 0:return function(){return n.apply(this,arguments)};case 1:return function(r){return n.apply(this,arguments)};case 2:return function(r,g){return n.apply(this,arguments)};case 3:return function(r,g,y){return n.apply(this,arguments)};case 4:return function(r,g,y,k){return n.apply(this,arguments)};case 5:return function(r,g,y,k,$){return n.apply(this,arguments)};case 6:return function(r,g,y,k,$,V){return n.apply(this,arguments)};case 7:return function(r,g,y,k,$,V,L){return n.apply(this,arguments)};case 8:return function(r,g,y,k,$,V,L,z){return n.apply(this,arguments)};case 9:return function(r,g,y,k,$,V,L,z,j){return n.apply(this,arguments)};case 10:return function(r,g,y,k,$,V,L,z,j,ae){return n.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function _curryN(e,n,r){return function(){for(var g=[],y=0,k=e,$=0;$<n.length||y<arguments.length;){var V;$<n.length&&(!_isPlaceholder(n[$])||y>=arguments.length)?V=n[$]:(V=arguments[y],y+=1),g[$]=V,_isPlaceholder(V)||(k-=1),$+=1}return k<=0?r.apply(this,g):_arity(k,_curryN(e,g,r))}}var curryN=_curry2(function(n,r){return n===1?_curry1(r):_arity(n,_curryN(n,[],r))});function _cloneRegExp(e){return new RegExp(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":""))}var type=_curry1(function(n){return n===null?"Null":n===void 0?"Undefined":Object.prototype.toString.call(n).slice(8,-1)});function _clone(e,n,r,g){var y=function($){for(var V=n.length,L=0;L<V;){if(e===n[L])return r[L];L+=1}n[L]=e,r[L]=$;for(var z in e)e.hasOwnProperty(z)&&($[z]=g?_clone(e[z],n,r,!0):e[z]);return $};switch(type(e)){case"Object":return y(Object.create(Object.getPrototypeOf(e)));case"Array":return y([]);case"Date":return new Date(e.valueOf());case"RegExp":return _cloneRegExp(e);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return e.slice();default:return e}}var clone=_curry1(function(n){return n!=null&&typeof n.clone=="function"?n.clone():_clone(n,[],[],!0)}),curry=_curry1(function(n){return curryN(n.length,n)});function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var localforage={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,n){(function(r){e.exports=r()})(function(){return function r(g,y,k){function $(z,j){if(!y[z]){if(!g[z]){var ae=typeof commonjsRequire=="function"&&commonjsRequire;if(!j&&ae)return ae(z,!0);if(V)return V(z,!0);var oe=new Error("Cannot find module '"+z+"'");throw oe.code="MODULE_NOT_FOUND",oe}var re=y[z]={exports:{}};g[z][0].call(re.exports,function(ue){var le=g[z][1][ue];return $(le||ue)},re,re.exports,r,g,y,k)}return y[z].exports}for(var V=typeof commonjsRequire=="function"&&commonjsRequire,L=0;L<k.length;L++)$(k[L]);return $}({1:[function(r,g,y){(function(k){var $=k.MutationObserver||k.WebKitMutationObserver,V;if($){var L=0,z=new $(ue),j=k.document.createTextNode("");z.observe(j,{characterData:!0}),V=function(){j.data=L=++L%2}}else if(!k.setImmediate&&typeof k.MessageChannel<"u"){var ae=new k.MessageChannel;ae.port1.onmessage=ue,V=function(){ae.port2.postMessage(0)}}else"document"in k&&"onreadystatechange"in k.document.createElement("script")?V=function(){var de=k.document.createElement("script");de.onreadystatechange=function(){ue(),de.onreadystatechange=null,de.parentNode.removeChild(de),de=null},k.document.documentElement.appendChild(de)}:V=function(){setTimeout(ue,0)};var oe,re=[];function ue(){oe=!0;for(var de,he,_e=re.length;_e;){for(he=re,re=[],de=-1;++de<_e;)he[de]();_e=re.length}oe=!1}g.exports=le;function le(de){re.push(de)===1&&!oe&&V()}}).call(this,typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,g,y){var k=r(1);function $(){}var V={},L=["REJECTED"],z=["FULFILLED"],j=["PENDING"];g.exports=ae;function ae($e){if(typeof $e!="function")throw new TypeError("resolver must be a function");this.state=j,this.queue=[],this.outcome=void 0,$e!==$&&le(this,$e)}ae.prototype.catch=function($e){return this.then(null,$e)},ae.prototype.then=function($e,Ce){if(typeof $e!="function"&&this.state===z||typeof Ce!="function"&&this.state===L)return this;var Ie=new this.constructor($);if(this.state!==j){var ze=this.state===z?$e:Ce;re(Ie,ze,this.outcome)}else this.queue.push(new oe(Ie,$e,Ce));return Ie};function oe($e,Ce,Ie){this.promise=$e,typeof Ce=="function"&&(this.onFulfilled=Ce,this.callFulfilled=this.otherCallFulfilled),typeof Ie=="function"&&(this.onRejected=Ie,this.callRejected=this.otherCallRejected)}oe.prototype.callFulfilled=function($e){V.resolve(this.promise,$e)},oe.prototype.otherCallFulfilled=function($e){re(this.promise,this.onFulfilled,$e)},oe.prototype.callRejected=function($e){V.reject(this.promise,$e)},oe.prototype.otherCallRejected=function($e){re(this.promise,this.onRejected,$e)};function re($e,Ce,Ie){k(function(){var ze;try{ze=Ce(Ie)}catch(Ue){return V.reject($e,Ue)}ze===$e?V.reject($e,new TypeError("Cannot resolve promise with itself")):V.resolve($e,ze)})}V.resolve=function($e,Ce){var Ie=de(ue,Ce);if(Ie.status==="error")return V.reject($e,Ie.value);var ze=Ie.value;if(ze)le($e,ze);else{$e.state=z,$e.outcome=Ce;for(var Ue=-1,Pt=$e.queue.length;++Ue<Pt;)$e.queue[Ue].callFulfilled(Ce)}return $e},V.reject=function($e,Ce){$e.state=L,$e.outcome=Ce;for(var Ie=-1,ze=$e.queue.length;++Ie<ze;)$e.queue[Ie].callRejected(Ce);return $e};function ue($e){var Ce=$e&&$e.then;if($e&&(typeof $e=="object"||typeof $e=="function")&&typeof Ce=="function")return function(){Ce.apply($e,arguments)}}function le($e,Ce){var Ie=!1;function ze(Dt){Ie||(Ie=!0,V.reject($e,Dt))}function Ue(Dt){Ie||(Ie=!0,V.resolve($e,Dt))}function Pt(){Ce(Ue,ze)}var hn=de(Pt);hn.status==="error"&&ze(hn.value)}function de($e,Ce){var Ie={};try{Ie.value=$e(Ce),Ie.status="success"}catch(ze){Ie.status="error",Ie.value=ze}return Ie}ae.resolve=he;function he($e){return $e instanceof this?$e:V.resolve(new this($),$e)}ae.reject=_e;function _e($e){var Ce=new this($);return V.reject(Ce,$e)}ae.all=xe;function xe($e){var Ce=this;if(Object.prototype.toString.call($e)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Ie=$e.length,ze=!1;if(!Ie)return this.resolve([]);for(var Ue=new Array(Ie),Pt=0,hn=-1,Dt=new this($);++hn<Ie;)xn($e[hn],hn);return Dt;function xn(jt,Vn){Ce.resolve(jt).then(Rn,function(Tn){ze||(ze=!0,V.reject(Dt,Tn))});function Rn(Tn){Ue[Vn]=Tn,++Pt===Ie&&!ze&&(ze=!0,V.resolve(Dt,Ue))}}}ae.race=Ne;function Ne($e){var Ce=this;if(Object.prototype.toString.call($e)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Ie=$e.length,ze=!1;if(!Ie)return this.resolve([]);for(var Ue=-1,Pt=new this($);++Ue<Ie;)hn($e[Ue]);return Pt;function hn(Dt){Ce.resolve(Dt).then(function(xn){ze||(ze=!0,V.resolve(Pt,xn))},function(xn){ze||(ze=!0,V.reject(Pt,xn))})}}},{1:1}],3:[function(r,g,y){(function(k){typeof k.Promise!="function"&&(k.Promise=r(2))}).call(this,typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,g,y){var k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(fa){return typeof fa}:function(fa){return fa&&typeof Symbol=="function"&&fa.constructor===Symbol&&fa!==Symbol.prototype?"symbol":typeof fa};function $(fa,ka){if(!(fa instanceof ka))throw new TypeError("Cannot call a class as a function")}function V(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var L=V();function z(){try{if(!L||!L.open)return!1;var fa=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),ka=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!fa||ka)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function j(fa,ka){fa=fa||[],ka=ka||{};try{return new Blob(fa,ka)}catch(Ea){if(Ea.name!=="TypeError")throw Ea;for(var ya=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,Ta=new ya,Ia=0;Ia<fa.length;Ia+=1)Ta.append(fa[Ia]);return Ta.getBlob(ka.type)}}typeof Promise>"u"&&r(3);var ae=Promise;function oe(fa,ka){ka&&fa.then(function(ya){ka(null,ya)},function(ya){ka(ya)})}function re(fa,ka,ya){typeof ka=="function"&&fa.then(ka),typeof ya=="function"&&fa.catch(ya)}function ue(fa){return typeof fa!="string"&&(console.warn(fa+" used as a key, but it is not a string."),fa=String(fa)),fa}function le(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var de="local-forage-detect-blob-support",he=void 0,_e={},xe=Object.prototype.toString,Ne="readonly",$e="readwrite";function Ce(fa){for(var ka=fa.length,ya=new ArrayBuffer(ka),Ta=new Uint8Array(ya),Ia=0;Ia<ka;Ia++)Ta[Ia]=fa.charCodeAt(Ia);return ya}function Ie(fa){return new ae(function(ka){var ya=fa.transaction(de,$e),Ta=j([""]);ya.objectStore(de).put(Ta,"key"),ya.onabort=function(Ia){Ia.preventDefault(),Ia.stopPropagation(),ka(!1)},ya.oncomplete=function(){var Ia=navigator.userAgent.match(/Chrome\/(\d+)/),Ea=navigator.userAgent.match(/Edge\//);ka(Ea||!Ia||parseInt(Ia[1],10)>=43)}}).catch(function(){return!1})}function ze(fa){return typeof he=="boolean"?ae.resolve(he):Ie(fa).then(function(ka){return he=ka,he})}function Ue(fa){var ka=_e[fa.name],ya={};ya.promise=new ae(function(Ta,Ia){ya.resolve=Ta,ya.reject=Ia}),ka.deferredOperations.push(ya),ka.dbReady?ka.dbReady=ka.dbReady.then(function(){return ya.promise}):ka.dbReady=ya.promise}function Pt(fa){var ka=_e[fa.name],ya=ka.deferredOperations.pop();if(ya)return ya.resolve(),ya.promise}function hn(fa,ka){var ya=_e[fa.name],Ta=ya.deferredOperations.pop();if(Ta)return Ta.reject(ka),Ta.promise}function Dt(fa,ka){return new ae(function(ya,Ta){if(_e[fa.name]=_e[fa.name]||Mn(),fa.db)if(ka)Ue(fa),fa.db.close();else return ya(fa.db);var Ia=[fa.name];ka&&Ia.push(fa.version);var Ea=L.open.apply(L,Ia);ka&&(Ea.onupgradeneeded=function(La){var Ga=Ea.result;try{Ga.createObjectStore(fa.storeName),La.oldVersion<=1&&Ga.createObjectStore(de)}catch(ja){if(ja.name==="ConstraintError")console.warn('The database "'+fa.name+'" has been upgraded from version '+La.oldVersion+" to version "+La.newVersion+', but the storage "'+fa.storeName+'" already exists.');else throw ja}}),Ea.onerror=function(La){La.preventDefault(),Ta(Ea.error)},Ea.onsuccess=function(){var La=Ea.result;La.onversionchange=function(Ga){Ga.target.close()},ya(La),Pt(fa)}})}function xn(fa){return Dt(fa,!1)}function jt(fa){return Dt(fa,!0)}function Vn(fa,ka){if(!fa.db)return!0;var ya=!fa.db.objectStoreNames.contains(fa.storeName),Ta=fa.version<fa.db.version,Ia=fa.version>fa.db.version;if(Ta&&(fa.version!==ka&&console.warn('The database "'+fa.name+`" can't be downgraded from version `+fa.db.version+" to version "+fa.version+"."),fa.version=fa.db.version),Ia||ya){if(ya){var Ea=fa.db.version+1;Ea>fa.version&&(fa.version=Ea)}return!0}return!1}function Rn(fa){return new ae(function(ka,ya){var Ta=new FileReader;Ta.onerror=ya,Ta.onloadend=function(Ia){var Ea=btoa(Ia.target.result||"");ka({__local_forage_encoded_blob:!0,data:Ea,type:fa.type})},Ta.readAsBinaryString(fa)})}function Tn(fa){var ka=Ce(atob(fa.data));return j([ka],{type:fa.type})}function Ln(fa){return fa&&fa.__local_forage_encoded_blob}function Sn(fa){var ka=this,ya=ka._initReady().then(function(){var Ta=_e[ka._dbInfo.name];if(Ta&&Ta.dbReady)return Ta.dbReady});return re(ya,fa,fa),ya}function An(fa){Ue(fa);for(var ka=_e[fa.name],ya=ka.forages,Ta=0;Ta<ya.length;Ta++){var Ia=ya[Ta];Ia._dbInfo.db&&(Ia._dbInfo.db.close(),Ia._dbInfo.db=null)}return fa.db=null,xn(fa).then(function(Ea){return fa.db=Ea,Vn(fa)?jt(fa):Ea}).then(function(Ea){fa.db=ka.db=Ea;for(var La=0;La<ya.length;La++)ya[La]._dbInfo.db=Ea}).catch(function(Ea){throw hn(fa,Ea),Ea})}function In(fa,ka,ya,Ta){Ta===void 0&&(Ta=1);try{var Ia=fa.db.transaction(fa.storeName,ka);ya(null,Ia)}catch(Ea){if(Ta>0&&(!fa.db||Ea.name==="InvalidStateError"||Ea.name==="NotFoundError"))return ae.resolve().then(function(){if(!fa.db||Ea.name==="NotFoundError"&&!fa.db.objectStoreNames.contains(fa.storeName)&&fa.version<=fa.db.version)return fa.db&&(fa.version=fa.db.version+1),jt(fa)}).then(function(){return An(fa).then(function(){In(fa,ka,ya,Ta-1)})}).catch(ya);ya(Ea)}}function Mn(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ra(fa){var ka=this,ya={db:null};if(fa)for(var Ta in fa)ya[Ta]=fa[Ta];var Ia=_e[ya.name];Ia||(Ia=Mn(),_e[ya.name]=Ia),Ia.forages.push(ka),ka._initReady||(ka._initReady=ka.ready,ka.ready=Sn);var Ea=[];function La(){return ae.resolve()}for(var Ga=0;Ga<Ia.forages.length;Ga++){var ja=Ia.forages[Ga];ja!==ka&&Ea.push(ja._initReady().catch(La))}var Wa=Ia.forages.slice(0);return ae.all(Ea).then(function(){return ya.db=Ia.db,xn(ya)}).then(function(qa){return ya.db=qa,Vn(ya,ka._defaultConfig.version)?jt(ya):qa}).then(function(qa){ya.db=Ia.db=qa,ka._dbInfo=ya;for(var ao=0;ao<Wa.length;ao++){var fo=Wa[ao];fo!==ka&&(fo._dbInfo.db=ya.db,fo._dbInfo.version=ya.version)}})}function da(fa,ka){var ya=this;fa=ue(fa);var Ta=new ae(function(Ia,Ea){ya.ready().then(function(){In(ya._dbInfo,Ne,function(La,Ga){if(La)return Ea(La);try{var ja=Ga.objectStore(ya._dbInfo.storeName),Wa=ja.get(fa);Wa.onsuccess=function(){var qa=Wa.result;qa===void 0&&(qa=null),Ln(qa)&&(qa=Tn(qa)),Ia(qa)},Wa.onerror=function(){Ea(Wa.error)}}catch(qa){Ea(qa)}})}).catch(Ea)});return oe(Ta,ka),Ta}function ua(fa,ka){var ya=this,Ta=new ae(function(Ia,Ea){ya.ready().then(function(){In(ya._dbInfo,Ne,function(La,Ga){if(La)return Ea(La);try{var ja=Ga.objectStore(ya._dbInfo.storeName),Wa=ja.openCursor(),qa=1;Wa.onsuccess=function(){var ao=Wa.result;if(ao){var fo=ao.value;Ln(fo)&&(fo=Tn(fo));var no=fa(fo,ao.key,qa++);no!==void 0?Ia(no):ao.continue()}else Ia()},Wa.onerror=function(){Ea(Wa.error)}}catch(ao){Ea(ao)}})}).catch(Ea)});return oe(Ta,ka),Ta}function aa(fa,ka,ya){var Ta=this;fa=ue(fa);var Ia=new ae(function(Ea,La){var Ga;Ta.ready().then(function(){return Ga=Ta._dbInfo,xe.call(ka)==="[object Blob]"?ze(Ga.db).then(function(ja){return ja?ka:Rn(ka)}):ka}).then(function(ja){In(Ta._dbInfo,$e,function(Wa,qa){if(Wa)return La(Wa);try{var ao=qa.objectStore(Ta._dbInfo.storeName);ja===null&&(ja=void 0);var fo=ao.put(ja,fa);qa.oncomplete=function(){ja===void 0&&(ja=null),Ea(ja)},qa.onabort=qa.onerror=function(){var no=fo.error?fo.error:fo.transaction.error;La(no)}}catch(no){La(no)}})}).catch(La)});return oe(Ia,ya),Ia}function Nn(fa,ka){var ya=this;fa=ue(fa);var Ta=new ae(function(Ia,Ea){ya.ready().then(function(){In(ya._dbInfo,$e,function(La,Ga){if(La)return Ea(La);try{var ja=Ga.objectStore(ya._dbInfo.storeName),Wa=ja.delete(fa);Ga.oncomplete=function(){Ia()},Ga.onerror=function(){Ea(Wa.error)},Ga.onabort=function(){var qa=Wa.error?Wa.error:Wa.transaction.error;Ea(qa)}}catch(qa){Ea(qa)}})}).catch(Ea)});return oe(Ta,ka),Ta}function En(fa){var ka=this,ya=new ae(function(Ta,Ia){ka.ready().then(function(){In(ka._dbInfo,$e,function(Ea,La){if(Ea)return Ia(Ea);try{var Ga=La.objectStore(ka._dbInfo.storeName),ja=Ga.clear();La.oncomplete=function(){Ta()},La.onabort=La.onerror=function(){var Wa=ja.error?ja.error:ja.transaction.error;Ia(Wa)}}catch(Wa){Ia(Wa)}})}).catch(Ia)});return oe(ya,fa),ya}function Zn(fa){var ka=this,ya=new ae(function(Ta,Ia){ka.ready().then(function(){In(ka._dbInfo,Ne,function(Ea,La){if(Ea)return Ia(Ea);try{var Ga=La.objectStore(ka._dbInfo.storeName),ja=Ga.count();ja.onsuccess=function(){Ta(ja.result)},ja.onerror=function(){Ia(ja.error)}}catch(Wa){Ia(Wa)}})}).catch(Ia)});return oe(ya,fa),ya}function ha(fa,ka){var ya=this,Ta=new ae(function(Ia,Ea){if(fa<0){Ia(null);return}ya.ready().then(function(){In(ya._dbInfo,Ne,function(La,Ga){if(La)return Ea(La);try{var ja=Ga.objectStore(ya._dbInfo.storeName),Wa=!1,qa=ja.openKeyCursor();qa.onsuccess=function(){var ao=qa.result;if(!ao){Ia(null);return}fa===0||Wa?Ia(ao.key):(Wa=!0,ao.advance(fa))},qa.onerror=function(){Ea(qa.error)}}catch(ao){Ea(ao)}})}).catch(Ea)});return oe(Ta,ka),Ta}function xa(fa){var ka=this,ya=new ae(function(Ta,Ia){ka.ready().then(function(){In(ka._dbInfo,Ne,function(Ea,La){if(Ea)return Ia(Ea);try{var Ga=La.objectStore(ka._dbInfo.storeName),ja=Ga.openKeyCursor(),Wa=[];ja.onsuccess=function(){var qa=ja.result;if(!qa){Ta(Wa);return}Wa.push(qa.key),qa.continue()},ja.onerror=function(){Ia(ja.error)}}catch(qa){Ia(qa)}})}).catch(Ia)});return oe(ya,fa),ya}function sa(fa,ka){ka=le.apply(this,arguments);var ya=this.config();fa=typeof fa!="function"&&fa||{},fa.name||(fa.name=fa.name||ya.name,fa.storeName=fa.storeName||ya.storeName);var Ta=this,Ia;if(!fa.name)Ia=ae.reject("Invalid arguments");else{var Ea=fa.name===ya.name&&Ta._dbInfo.db,La=Ea?ae.resolve(Ta._dbInfo.db):xn(fa).then(function(Ga){var ja=_e[fa.name],Wa=ja.forages;ja.db=Ga;for(var qa=0;qa<Wa.length;qa++)Wa[qa]._dbInfo.db=Ga;return Ga});fa.storeName?Ia=La.then(function(Ga){if(Ga.objectStoreNames.contains(fa.storeName)){var ja=Ga.version+1;Ue(fa);var Wa=_e[fa.name],qa=Wa.forages;Ga.close();for(var ao=0;ao<qa.length;ao++){var fo=qa[ao];fo._dbInfo.db=null,fo._dbInfo.version=ja}var no=new ae(function(_o,ko){var wo=L.open(fa.name,ja);wo.onerror=function(Do){var Ro=wo.result;Ro.close(),ko(Do)},wo.onupgradeneeded=function(){var Do=wo.result;Do.deleteObjectStore(fa.storeName)},wo.onsuccess=function(){var Do=wo.result;Do.close(),_o(Do)}});return no.then(function(_o){Wa.db=_o;for(var ko=0;ko<qa.length;ko++){var wo=qa[ko];wo._dbInfo.db=_o,Pt(wo._dbInfo)}}).catch(function(_o){throw(hn(fa,_o)||ae.resolve()).catch(function(){}),_o})}}):Ia=La.then(function(Ga){Ue(fa);var ja=_e[fa.name],Wa=ja.forages;Ga.close();for(var qa=0;qa<Wa.length;qa++){var ao=Wa[qa];ao._dbInfo.db=null}var fo=new ae(function(no,_o){var ko=L.deleteDatabase(fa.name);ko.onerror=function(){var wo=ko.result;wo&&wo.close(),_o(ko.error)},ko.onblocked=function(){console.warn('dropInstance blocked for database "'+fa.name+'" until all open connections are closed')},ko.onsuccess=function(){var wo=ko.result;wo&&wo.close(),no(wo)}});return fo.then(function(no){ja.db=no;for(var _o=0;_o<Wa.length;_o++){var ko=Wa[_o];Pt(ko._dbInfo)}}).catch(function(no){throw(hn(fa,no)||ae.resolve()).catch(function(){}),no})})}return oe(Ia,ka),Ia}var Hn={_driver:"asyncStorage",_initStorage:ra,_support:z(),iterate:ua,getItem:da,setItem:aa,removeItem:Nn,clear:En,length:Zn,key:ha,keys:xa,dropInstance:sa};function bn(){return typeof openDatabase=="function"}var Xn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$n="~~local_forage_type~",kt=/^~~local_forage_type~([^~]+)~/,At="__lfsc__:",Dn=At.length,Qn="arbf",oa="blob",na="si08",la="ui08",ma="uic8",ca="si16",pe="si32",Oe="ur16",Ve="ui32",qe="fl32",Et="fl64",Lt=Dn+Qn.length,_n=Object.prototype.toString;function vn(fa){var ka=fa.length*.75,ya=fa.length,Ta,Ia=0,Ea,La,Ga,ja;fa[fa.length-1]==="="&&(ka--,fa[fa.length-2]==="="&&ka--);var Wa=new ArrayBuffer(ka),qa=new Uint8Array(Wa);for(Ta=0;Ta<ya;Ta+=4)Ea=Xn.indexOf(fa[Ta]),La=Xn.indexOf(fa[Ta+1]),Ga=Xn.indexOf(fa[Ta+2]),ja=Xn.indexOf(fa[Ta+3]),qa[Ia++]=Ea<<2|La>>4,qa[Ia++]=(La&15)<<4|Ga>>2,qa[Ia++]=(Ga&3)<<6|ja&63;return Wa}function wn(fa){var ka=new Uint8Array(fa),ya="",Ta;for(Ta=0;Ta<ka.length;Ta+=3)ya+=Xn[ka[Ta]>>2],ya+=Xn[(ka[Ta]&3)<<4|ka[Ta+1]>>4],ya+=Xn[(ka[Ta+1]&15)<<2|ka[Ta+2]>>6],ya+=Xn[ka[Ta+2]&63];return ka.length%3===2?ya=ya.substring(0,ya.length-1)+"=":ka.length%3===1&&(ya=ya.substring(0,ya.length-2)+"=="),ya}function Cn(fa,ka){var ya="";if(fa&&(ya=_n.call(fa)),fa&&(ya==="[object ArrayBuffer]"||fa.buffer&&_n.call(fa.buffer)==="[object ArrayBuffer]")){var Ta,Ia=At;fa instanceof ArrayBuffer?(Ta=fa,Ia+=Qn):(Ta=fa.buffer,ya==="[object Int8Array]"?Ia+=na:ya==="[object Uint8Array]"?Ia+=la:ya==="[object Uint8ClampedArray]"?Ia+=ma:ya==="[object Int16Array]"?Ia+=ca:ya==="[object Uint16Array]"?Ia+=Oe:ya==="[object Int32Array]"?Ia+=pe:ya==="[object Uint32Array]"?Ia+=Ve:ya==="[object Float32Array]"?Ia+=qe:ya==="[object Float64Array]"?Ia+=Et:ka(new Error("Failed to get type for BinaryArray"))),ka(Ia+wn(Ta))}else if(ya==="[object Blob]"){var Ea=new FileReader;Ea.onload=function(){var La=$n+fa.type+"~"+wn(this.result);ka(At+oa+La)},Ea.readAsArrayBuffer(fa)}else try{ka(JSON.stringify(fa))}catch(La){console.error("Couldn't convert value into a JSON string: ",fa),ka(null,La)}}function Bn(fa){if(fa.substring(0,Dn)!==At)return JSON.parse(fa);var ka=fa.substring(Lt),ya=fa.substring(Dn,Lt),Ta;if(ya===oa&&kt.test(ka)){var Ia=ka.match(kt);Ta=Ia[1],ka=ka.substring(Ia[0].length)}var Ea=vn(ka);switch(ya){case Qn:return Ea;case oa:return j([Ea],{type:Ta});case na:return new Int8Array(Ea);case la:return new Uint8Array(Ea);case ma:return new Uint8ClampedArray(Ea);case ca:return new Int16Array(Ea);case Oe:return new Uint16Array(Ea);case pe:return new Int32Array(Ea);case Ve:return new Uint32Array(Ea);case qe:return new Float32Array(Ea);case Et:return new Float64Array(Ea);default:throw new Error("Unkown type: "+ya)}}var zn={serialize:Cn,deserialize:Bn,stringToBuffer:vn,bufferToString:wn};function Fn(fa,ka,ya,Ta){fa.executeSql("CREATE TABLE IF NOT EXISTS "+ka.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ya,Ta)}function Gn(fa){var ka=this,ya={db:null};if(fa)for(var Ta in fa)ya[Ta]=typeof fa[Ta]!="string"?fa[Ta].toString():fa[Ta];var Ia=new ae(function(Ea,La){try{ya.db=openDatabase(ya.name,String(ya.version),ya.description,ya.size)}catch(Ga){return La(Ga)}ya.db.transaction(function(Ga){Fn(Ga,ya,function(){ka._dbInfo=ya,Ea()},function(ja,Wa){La(Wa)})},La)});return ya.serializer=zn,Ia}function Kn(fa,ka,ya,Ta,Ia,Ea){fa.executeSql(ya,Ta,Ia,function(La,Ga){Ga.code===Ga.SYNTAX_ERR?La.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[ka.storeName],function(ja,Wa){Wa.rows.length?Ea(ja,Ga):Fn(ja,ka,function(){ja.executeSql(ya,Ta,Ia,Ea)},Ea)},Ea):Ea(La,Ga)},Ea)}function Wn(fa,ka){var ya=this;fa=ue(fa);var Ta=new ae(function(Ia,Ea){ya.ready().then(function(){var La=ya._dbInfo;La.db.transaction(function(Ga){Kn(Ga,La,"SELECT * FROM "+La.storeName+" WHERE key = ? LIMIT 1",[fa],function(ja,Wa){var qa=Wa.rows.length?Wa.rows.item(0).value:null;qa&&(qa=La.serializer.deserialize(qa)),Ia(qa)},function(ja,Wa){Ea(Wa)})})}).catch(Ea)});return oe(Ta,ka),Ta}function ea(fa,ka){var ya=this,Ta=new ae(function(Ia,Ea){ya.ready().then(function(){var La=ya._dbInfo;La.db.transaction(function(Ga){Kn(Ga,La,"SELECT * FROM "+La.storeName,[],function(ja,Wa){for(var qa=Wa.rows,ao=qa.length,fo=0;fo<ao;fo++){var no=qa.item(fo),_o=no.value;if(_o&&(_o=La.serializer.deserialize(_o)),_o=fa(_o,no.key,fo+1),_o!==void 0){Ia(_o);return}}Ia()},function(ja,Wa){Ea(Wa)})})}).catch(Ea)});return oe(Ta,ka),Ta}function Pn(fa,ka,ya,Ta){var Ia=this;fa=ue(fa);var Ea=new ae(function(La,Ga){Ia.ready().then(function(){ka===void 0&&(ka=null);var ja=ka,Wa=Ia._dbInfo;Wa.serializer.serialize(ka,function(qa,ao){ao?Ga(ao):Wa.db.transaction(function(fo){Kn(fo,Wa,"INSERT OR REPLACE INTO "+Wa.storeName+" (key, value) VALUES (?, ?)",[fa,qa],function(){La(ja)},function(no,_o){Ga(_o)})},function(fo){if(fo.code===fo.QUOTA_ERR){if(Ta>0){La(Pn.apply(Ia,[fa,ja,ya,Ta-1]));return}Ga(fo)}})})}).catch(Ga)});return oe(Ea,ya),Ea}function jn(fa,ka,ya){return Pn.apply(this,[fa,ka,ya,1])}function On(fa,ka){var ya=this;fa=ue(fa);var Ta=new ae(function(Ia,Ea){ya.ready().then(function(){var La=ya._dbInfo;La.db.transaction(function(Ga){Kn(Ga,La,"DELETE FROM "+La.storeName+" WHERE key = ?",[fa],function(){Ia()},function(ja,Wa){Ea(Wa)})})}).catch(Ea)});return oe(Ta,ka),Ta}function Un(fa){var ka=this,ya=new ae(function(Ta,Ia){ka.ready().then(function(){var Ea=ka._dbInfo;Ea.db.transaction(function(La){Kn(La,Ea,"DELETE FROM "+Ea.storeName,[],function(){Ta()},function(Ga,ja){Ia(ja)})})}).catch(Ia)});return oe(ya,fa),ya}function Yn(fa){var ka=this,ya=new ae(function(Ta,Ia){ka.ready().then(function(){var Ea=ka._dbInfo;Ea.db.transaction(function(La){Kn(La,Ea,"SELECT COUNT(key) as c FROM "+Ea.storeName,[],function(Ga,ja){var Wa=ja.rows.item(0).c;Ta(Wa)},function(Ga,ja){Ia(ja)})})}).catch(Ia)});return oe(ya,fa),ya}function ta(fa,ka){var ya=this,Ta=new ae(function(Ia,Ea){ya.ready().then(function(){var La=ya._dbInfo;La.db.transaction(function(Ga){Kn(Ga,La,"SELECT key FROM "+La.storeName+" WHERE id = ? LIMIT 1",[fa+1],function(ja,Wa){var qa=Wa.rows.length?Wa.rows.item(0).key:null;Ia(qa)},function(ja,Wa){Ea(Wa)})})}).catch(Ea)});return oe(Ta,ka),Ta}function Jn(fa){var ka=this,ya=new ae(function(Ta,Ia){ka.ready().then(function(){var Ea=ka._dbInfo;Ea.db.transaction(function(La){Kn(La,Ea,"SELECT key FROM "+Ea.storeName,[],function(Ga,ja){for(var Wa=[],qa=0;qa<ja.rows.length;qa++)Wa.push(ja.rows.item(qa).key);Ta(Wa)},function(Ga,ja){Ia(ja)})})}).catch(Ia)});return oe(ya,fa),ya}function pa(fa){return new ae(function(ka,ya){fa.transaction(function(Ta){Ta.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Ia,Ea){for(var La=[],Ga=0;Ga<Ea.rows.length;Ga++)La.push(Ea.rows.item(Ga).name);ka({db:fa,storeNames:La})},function(Ia,Ea){ya(Ea)})},function(Ta){ya(Ta)})})}function ga(fa,ka){ka=le.apply(this,arguments);var ya=this.config();fa=typeof fa!="function"&&fa||{},fa.name||(fa.name=fa.name||ya.name,fa.storeName=fa.storeName||ya.storeName);var Ta=this,Ia;return fa.name?Ia=new ae(function(Ea){var La;fa.name===ya.name?La=Ta._dbInfo.db:La=openDatabase(fa.name,"","",0),fa.storeName?Ea({db:La,storeNames:[fa.storeName]}):Ea(pa(La))}).then(function(Ea){return new ae(function(La,Ga){Ea.db.transaction(function(ja){function Wa(no){return new ae(function(_o,ko){ja.executeSql("DROP TABLE IF EXISTS "+no,[],function(){_o()},function(wo,Do){ko(Do)})})}for(var qa=[],ao=0,fo=Ea.storeNames.length;ao<fo;ao++)qa.push(Wa(Ea.storeNames[ao]));ae.all(qa).then(function(){La()}).catch(function(no){Ga(no)})},function(ja){Ga(ja)})})}):Ia=ae.reject("Invalid arguments"),oe(Ia,ka),Ia}var ba={_driver:"webSQLStorage",_initStorage:Gn,_support:bn(),iterate:ea,getItem:Wn,setItem:jn,removeItem:On,clear:Un,length:Yn,key:ta,keys:Jn,dropInstance:ga};function Oa(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function va(fa,ka){var ya=fa.name+"/";return fa.storeName!==ka.storeName&&(ya+=fa.storeName+"/"),ya}function Sa(){var fa="_localforage_support_test";try{return localStorage.setItem(fa,!0),localStorage.removeItem(fa),!1}catch{return!0}}function $a(){return!Sa()||localStorage.length>0}function Da(fa){var ka=this,ya={};if(fa)for(var Ta in fa)ya[Ta]=fa[Ta];return ya.keyPrefix=va(fa,ka._defaultConfig),$a()?(ka._dbInfo=ya,ya.serializer=zn,ae.resolve()):ae.reject()}function Na(fa){var ka=this,ya=ka.ready().then(function(){for(var Ta=ka._dbInfo.keyPrefix,Ia=localStorage.length-1;Ia>=0;Ia--){var Ea=localStorage.key(Ia);Ea.indexOf(Ta)===0&&localStorage.removeItem(Ea)}});return oe(ya,fa),ya}function Va(fa,ka){var ya=this;fa=ue(fa);var Ta=ya.ready().then(function(){var Ia=ya._dbInfo,Ea=localStorage.getItem(Ia.keyPrefix+fa);return Ea&&(Ea=Ia.serializer.deserialize(Ea)),Ea});return oe(Ta,ka),Ta}function Ua(fa,ka){var ya=this,Ta=ya.ready().then(function(){for(var Ia=ya._dbInfo,Ea=Ia.keyPrefix,La=Ea.length,Ga=localStorage.length,ja=1,Wa=0;Wa<Ga;Wa++){var qa=localStorage.key(Wa);if(qa.indexOf(Ea)===0){var ao=localStorage.getItem(qa);if(ao&&(ao=Ia.serializer.deserialize(ao)),ao=fa(ao,qa.substring(La),ja++),ao!==void 0)return ao}}});return oe(Ta,ka),Ta}function Ha(fa,ka){var ya=this,Ta=ya.ready().then(function(){var Ia=ya._dbInfo,Ea;try{Ea=localStorage.key(fa)}catch{Ea=null}return Ea&&(Ea=Ea.substring(Ia.keyPrefix.length)),Ea});return oe(Ta,ka),Ta}function Qa(fa){var ka=this,ya=ka.ready().then(function(){for(var Ta=ka._dbInfo,Ia=localStorage.length,Ea=[],La=0;La<Ia;La++){var Ga=localStorage.key(La);Ga.indexOf(Ta.keyPrefix)===0&&Ea.push(Ga.substring(Ta.keyPrefix.length))}return Ea});return oe(ya,fa),ya}function Ja(fa){var ka=this,ya=ka.keys().then(function(Ta){return Ta.length});return oe(ya,fa),ya}function Ra(fa,ka){var ya=this;fa=ue(fa);var Ta=ya.ready().then(function(){var Ia=ya._dbInfo;localStorage.removeItem(Ia.keyPrefix+fa)});return oe(Ta,ka),Ta}function Fa(fa,ka,ya){var Ta=this;fa=ue(fa);var Ia=Ta.ready().then(function(){ka===void 0&&(ka=null);var Ea=ka;return new ae(function(La,Ga){var ja=Ta._dbInfo;ja.serializer.serialize(ka,function(Wa,qa){if(qa)Ga(qa);else try{localStorage.setItem(ja.keyPrefix+fa,Wa),La(Ea)}catch(ao){(ao.name==="QuotaExceededError"||ao.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ga(ao),Ga(ao)}})})});return oe(Ia,ya),Ia}function Xa(fa,ka){if(ka=le.apply(this,arguments),fa=typeof fa!="function"&&fa||{},!fa.name){var ya=this.config();fa.name=fa.name||ya.name,fa.storeName=fa.storeName||ya.storeName}var Ta=this,Ia;return fa.name?Ia=new ae(function(Ea){fa.storeName?Ea(va(fa,Ta._defaultConfig)):Ea(fa.name+"/")}).then(function(Ea){for(var La=localStorage.length-1;La>=0;La--){var Ga=localStorage.key(La);Ga.indexOf(Ea)===0&&localStorage.removeItem(Ga)}}):Ia=ae.reject("Invalid arguments"),oe(Ia,ka),Ia}var to={_driver:"localStorageWrapper",_initStorage:Da,_support:Oa(),iterate:Ua,getItem:Va,setItem:Fa,removeItem:Ra,clear:Na,length:Ja,key:Ha,keys:Qa,dropInstance:Xa},eo=function(ka,ya){return ka===ya||typeof ka=="number"&&typeof ya=="number"&&isNaN(ka)&&isNaN(ya)},ro=function(ka,ya){for(var Ta=ka.length,Ia=0;Ia<Ta;){if(eo(ka[Ia],ya))return!0;Ia++}return!1},oo=Array.isArray||function(fa){return Object.prototype.toString.call(fa)==="[object Array]"},so={},co={},io={INDEXEDDB:Hn,WEBSQL:ba,LOCALSTORAGE:to},Ka=[io.INDEXEDDB._driver,io.WEBSQL._driver,io.LOCALSTORAGE._driver],yo=["dropInstance"],$o=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(yo),Oo={description:"",driver:Ka.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function bo(fa,ka){fa[ka]=function(){var ya=arguments;return fa.ready().then(function(){return fa[ka].apply(fa,ya)})}}function So(){for(var fa=1;fa<arguments.length;fa++){var ka=arguments[fa];if(ka)for(var ya in ka)ka.hasOwnProperty(ya)&&(oo(ka[ya])?arguments[0][ya]=ka[ya].slice():arguments[0][ya]=ka[ya])}return arguments[0]}var Io=function(){function fa(ka){$(this,fa);for(var ya in io)if(io.hasOwnProperty(ya)){var Ta=io[ya],Ia=Ta._driver;this[ya]=Ia,so[Ia]||this.defineDriver(Ta)}this._defaultConfig=So({},Oo),this._config=So({},this._defaultConfig,ka),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return fa.prototype.config=function(ya){if((typeof ya>"u"?"undefined":k(ya))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var Ta in ya){if(Ta==="storeName"&&(ya[Ta]=ya[Ta].replace(/\W/g,"_")),Ta==="version"&&typeof ya[Ta]!="number")return new Error("Database version must be a number.");this._config[Ta]=ya[Ta]}return"driver"in ya&&ya.driver?this.setDriver(this._config.driver):!0}else return typeof ya=="string"?this._config[ya]:this._config},fa.prototype.defineDriver=function(ya,Ta,Ia){var Ea=new ae(function(La,Ga){try{var ja=ya._driver,Wa=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ya._driver){Ga(Wa);return}for(var qa=$o.concat("_initStorage"),ao=0,fo=qa.length;ao<fo;ao++){var no=qa[ao],_o=!ro(yo,no);if((_o||ya[no])&&typeof ya[no]!="function"){Ga(Wa);return}}var ko=function(){for(var Ro=function(qn){return function(){var ia=new Error("Method "+qn+" is not implemented by the current driver"),Ca=ae.reject(ia);return oe(Ca,arguments[arguments.length-1]),Ca}},Fo=0,Lo=yo.length;Fo<Lo;Fo++){var Fe=yo[Fo];ya[Fe]||(ya[Fe]=Ro(Fe))}};ko();var wo=function(Ro){so[ja]&&console.info("Redefining LocalForage driver: "+ja),so[ja]=ya,co[ja]=Ro,La()};"_support"in ya?ya._support&&typeof ya._support=="function"?ya._support().then(wo,Ga):wo(!!ya._support):wo(!0)}catch(Do){Ga(Do)}});return re(Ea,Ta,Ia),Ea},fa.prototype.driver=function(){return this._driver||null},fa.prototype.getDriver=function(ya,Ta,Ia){var Ea=so[ya]?ae.resolve(so[ya]):ae.reject(new Error("Driver not found."));return re(Ea,Ta,Ia),Ea},fa.prototype.getSerializer=function(ya){var Ta=ae.resolve(zn);return re(Ta,ya),Ta},fa.prototype.ready=function(ya){var Ta=this,Ia=Ta._driverSet.then(function(){return Ta._ready===null&&(Ta._ready=Ta._initDriver()),Ta._ready});return re(Ia,ya,ya),Ia},fa.prototype.setDriver=function(ya,Ta,Ia){var Ea=this;oo(ya)||(ya=[ya]);var La=this._getSupportedDrivers(ya);function Ga(){Ea._config.driver=Ea.driver()}function ja(ao){return Ea._extend(ao),Ga(),Ea._ready=Ea._initStorage(Ea._config),Ea._ready}function Wa(ao){return function(){var fo=0;function no(){for(;fo<ao.length;){var _o=ao[fo];return fo++,Ea._dbInfo=null,Ea._ready=null,Ea.getDriver(_o).then(ja).catch(no)}Ga();var ko=new Error("No available storage method found.");return Ea._driverSet=ae.reject(ko),Ea._driverSet}return no()}}var qa=this._driverSet!==null?this._driverSet.catch(function(){return ae.resolve()}):ae.resolve();return this._driverSet=qa.then(function(){var ao=La[0];return Ea._dbInfo=null,Ea._ready=null,Ea.getDriver(ao).then(function(fo){Ea._driver=fo._driver,Ga(),Ea._wrapLibraryMethodsWithReady(),Ea._initDriver=Wa(La)})}).catch(function(){Ga();var ao=new Error("No available storage method found.");return Ea._driverSet=ae.reject(ao),Ea._driverSet}),re(this._driverSet,Ta,Ia),this._driverSet},fa.prototype.supports=function(ya){return!!co[ya]},fa.prototype._extend=function(ya){So(this,ya)},fa.prototype._getSupportedDrivers=function(ya){for(var Ta=[],Ia=0,Ea=ya.length;Ia<Ea;Ia++){var La=ya[Ia];this.supports(La)&&Ta.push(La)}return Ta},fa.prototype._wrapLibraryMethodsWithReady=function(){for(var ya=0,Ta=$o.length;ya<Ta;ya++)bo(this,$o[ya])},fa.prototype.createInstance=function(ya){return new fa(ya)},fa}(),Po=new Io;g.exports=Po},{3:3}]},{},[4])(4)})})(localforage);var localforageExports=localforage.exports;const localForage=getDefaultExportFromCjs(localforageExports),isNearPoint=(e,n,r,g,y)=>distance$h(e,n,r,g)<=y,distance$h=(e,n,r,g)=>Math.sqrt((g-n)*(g-n)+(r-e)*(r-e)),leftTop=(e,n,r,g,y)=>distance$h(e,n,r,g)>4*y||distance$h(e,n,r,g)<2*y?!1:e<r&&n<g,leftBottom=(e,n,r,g,y)=>distance$h(e,n,r,g)>4*y||distance$h(e,n,r,g)<2*y?!1:e<r&&n>g,rightTop=(e,n,r,g,y)=>distance$h(e,n,r,g)>4*y||distance$h(e,n,r,g)<2*y?!1:e>r&&n<g,rightBottom=(e,n,r,g,y)=>distance$h(e,n,r,g)>4*y||distance$h(e,n,r,g)<2*y?!1:e>r&&n>g,angleBetween=(e,n)=>{const r=Math.atan(e.y/e.x),g=Math.atan(n.y/n.x);return Math.round((r-g)*180/Math.PI)},getBound$5=e=>{let n=1/0,r=1/0,g=-1/0,y=-1/0;for(let k=0;k<e.length;k++)e[k].x<n&&(n=e[k].x),e[k].x>g&&(g=e[k].x),e[k].y<r&&(r=e[k].y),e[k].y>y&&(y=e[k].y);return{x:n,y:r,w:g-n,h:y-r}},rotatePoint=(e,n,r)=>{const g=r*Math.PI/180;return{x:n.x+(e.x-n.x)*Math.cos(g)-(e.y-n.y)*Math.sin(g),y:n.y+(e.x-n.x)*Math.sin(g)+(e.y-n.y)*Math.cos(g)}},inComponentBound=(e,n,r=0)=>{const{x:g,y,w:k,h:$,rotation:V}=n,{x:L,y:z}=rotatePoint({x:e.x,y:e.y},{x:n.x+n.w/2,y:n.y+n.h/2},-V);return L>=g-r&&L<=g+k+r&&z>=y-r&&z<=y+$+r},transformPoints=(e,n)=>{const{x:r,y:g,w:y,h:k}=getBound$5(e),{x:$,y:V,w:L,h:z,rotation:j,flipX:ae,flipY:oe}=n;return e.map(ue=>{let le=clone(ue);return ae&&(le.x=$+L/2+($+L/2-le.x)),oe&&(le.y=V+z/2+(V+z/2-le.y)),le=rotatePoint(le,{x:r+y/2,y:g+k/2},j),le={x:le.x+($-r),y:le.y+(V-g)},le={x:$+(y?(le.x-$)*L/y:0),y:V+(k?(le.y-V)*z/k:0)},le})},getEllipsePoints=(e,n,r=1e3,g=0,y=0)=>{const k=[],$=[];for(let V=0;V<r/2;V++){const L=-e+e*2/(r/2)*V,z=Math.sqrt((1-L*L/(e*e))*n*n);k.push({x:g+L,y:y+z}),$.push({x:g+L,y:y-z})}return k.concat($.reverse())},getRectanglePoints=(e,n,r,g)=>[{x:r,y:g},{x:r+e,y:g},{x:r+e,y:g+n},{x:r,y:g+n}];let nanoid=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((n,r)=>(r&=63,r<36?n+=r.toString(36):r<62?n+=(r-26).toString(36).toUpperCase():r>62?n+="-":n+="_",n),""),lightIdCounter=0;const lightIdPrefix=Date.now().toString(36),genLightId=()=>(lightIdCounter++,`${lightIdPrefix}_${lightIdCounter.toString(36)}`),resetLightIdCounter=()=>{lightIdCounter=0},genUUID=()=>nanoid(),toUnicode=e=>e.charCodeAt(0).toString(16).padStart(4,"0"),toIconUnicode=e=>(41e3+e).toString(16);class ConstantsMap{constants;constructor(n){this.constants=n}update(n){this.constants=n}get(n){for(let r=0;r<this.constants.length;r++)if(this.constants[r].name===n)return this.constants[r].value}getByUUID(n){for(let r=0;r<this.constants.length;r++)if(this.constants[r].uuid===n)return this.constants[r].value}}ref(500);ref(500);ref(100);ref(100);reactive({img:null,left:240,right:320,top:155,bottom:290,delta:215,rotation:0});const picZoom=ref(100),step=ref(0),rThreshold=ref(128),gThreshold=ref(128),bThreshold=ref(128),localRThreshold=ref(128),localGThreshold=ref(128),localBThreshold=ref(128),localBrushSize=ref(10),localBrushX=ref(0),localBrushY=ref(0),maxError=ref(2),dropThreshold=ref(10),previewStatus=ref(0),listWidth=ref(0),editPanelDisplay=ref("edit");ref("pic");const editPanelCompFilter=ref("all"),glyphPanelCompFilter=ref("all");ref("all");var Status=(e=>(e[e.CharacterList=0]="CharacterList",e[e.GlyphList=1]="GlyphList",e[e.Edit=2]="Edit",e[e.Pic=3]="Pic",e[e.Glyph=4]="Glyph",e[e.SystemGlyphList=5]="SystemGlyphList",e[e.RadicalGlyphList=6]="RadicalGlyphList",e[e.CompGlyphList=7]="CompGlyphList",e[e.StrokeGlyphList=8]="StrokeGlyphList",e[e.AdvancedEdit=9]="AdvancedEdit",e))(Status||{});const prevStatus=ref(0),editStatus=ref(0),prevEditStatus=ref(2),coordsText=ref("0, 0"),enableLocalBrush=reactive({value:!1}),editCharacterPic=reactive({value:{data:"",img:null,thumbnailCanvas:null,thumbnailPixels:[],processPixels:[],width:0,height:0}}),contoursComponents=reactive({value:[]}),curvesComponents=reactive({value:[]}),bitmap=reactive({value:{data:[],width:0,height:0}}),setEnableLocalBrush=e=>{enableLocalBrush.value=e},setBitMap=e=>{bitmap.value=e},setEditCharacterPic=e=>{editCharacterPic.value=e},setEditPanelCompFilter=e=>{editPanelCompFilter.value=e},setGlyphPanelCompFilter=e=>{glyphPanelCompFilter.value=e},setPicZoom=e=>{picZoom.value=e},setEditStatus=e=>{editStatus.value=e},setPrevStatus=e=>{prevStatus.value=e},setStep=e=>{step.value=e},clearContoursComponent=()=>{contoursComponents.value=[]},clearCurvesComponent=()=>{curvesComponents.value=[]},addContoursComponent=e=>{contoursComponents.value.push(e)},addCurvesComponent=e=>{curvesComponents.value.push(e)},resetEditPic=()=>{editCharacterPic.value={data:"",img:null,thumbnailCanvas:null,thumbnailPixels:[],processPixels:[],width:0,height:0}},ratio=2,default_unitsPerEm=1e3,mapCanvasCoords=e=>({x:ratio*e.x,y:ratio*e.y}),mapCanvasX=e=>ratio*e,mapCanvasY=e=>ratio*e,mapCanvasWidth=e=>ratio*e,mapCanvasHeight=e=>ratio*e,getCoord=e=>editStatus.value===Status.Edit?e/width$3.value*selectedFile.value.width:editStatus.value===Status.Glyph?e/width$3.value*default_unitsPerEm:e,LIMIT16=32768,LIMIT32=2147483648,wmm=typeof WeakMap=="function"&&new WeakMap,encoder={uint8:e=>typeof e=="number"&&e>=0&&e<=255?[e]:!1,int8:e=>typeof e=="number"&&e>=-128&&e<=127?[e]:!1,uint16:e=>typeof e!="number"?!1:[e>>8&255,e&255],int16:e=>{if(typeof e!="number")return!1;let n=e;return n>=LIMIT16&&(n=-(2*LIMIT16-n)),[n>>8&255,n&255]},uint24:e=>typeof e!="number"?!1:[e>>16&255,e>>8&255,e&255],uint32:e=>typeof e!="number"?!1:[e>>24&255,e>>16&255,e>>8&255,e&255],int32:e=>{if(typeof e!="number")return!1;let n=e;return e>=LIMIT32&&(n=-(2*LIMIT32-e)),[n>>24&255,n>>16&255,n>>8&255,n&255]},Fixed:e=>{if(typeof e!="number")return!1;const n=Math.round(e*65536),r=[n>>24&255,n>>16&255,n>>8&255,n&255];return(e>=65536||e===196608||e===20480)&&console.log(`[encoder.Fixed] Version: input=0x${e.toString(16).padStart(8,"0")}, scaled=${n}, bytes=[${r.join(", ")}]`),r},FWORD:e=>typeof e!="number"?!1:encoder.int16(e),UFWORD:e=>typeof e!="number"?!1:encoder.uint16(e),F2DOT14:e=>{},LONGDATETIME:e=>typeof e!="number"?!1:[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,e&255],Tag:e=>e.length===4?[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]:e.tagStr&&e.tagStr.length===4?[e.tagStr.charCodeAt(0),e.tagStr.charCodeAt(1),e.tagStr.charCodeAt(2),e.tagStr.charCodeAt(3)]:!1,Offset16:e=>encoder.uint16(e),Offset24:e=>encoder.uint24(e),Offset32:e=>encoder.uint32(e),Version16Dot16:e=>{if(typeof e!="number")return!1;console.log(`[encoder.Version16Dot16] Input: 0x${e.toString(16).padStart(8,"0")} (${e})`);const n=[e>>24&255,e>>16&255,e>>8&255,e&255];return console.log(`[encoder.Version16Dot16] Output: [${n.join(", ")}]`),n},Card8:e=>encoder.uint8(e),Card16:e=>encoder.uint16(e),OffSize:e=>encoder.uint8(e),SID:e=>encoder.uint16(e),Name:e=>encoder.String(e),String:e=>{typeof e>"u"&&(e="");let n=[];for(let r=0;r<e.length;r+=1)n[r]=e.charCodeAt(r);return n},Operand:(e,n)=>{let r=[];if(Array.isArray(n))for(let g=0;g<n.length;g+=1)r=r.concat(encoder.Operand(e[g],n[g]));else if(n==="SID")r=r.concat(encoder.number(e));else if(n==="offset")r=r.concat(encoder.number32(e));else if(n==="number")r=r.concat(encoder.number(e));else if(n==="real")r=r.concat(encoder.real(e));else if(n==="Fixed")r=r.concat(encoder.Fixed(e));else if(n==="number16")r=r.concat(encoder.number16(e));else if(n==="number32")r=r.concat(encoder.number32(e));else throw new Error("Unknown operand type "+n);return r},number:e=>{let n=e;return n>=-107&&n<=107?[n+139]:n>=108&&n<=1131?(n=n-108,[(n>>8)+247,n&255]):n>=-1131&&n<=-108?(n=-n-108,[(n>>8)+251,n&255]):n>=-32768&&n<=32767?encoder.number16(n):encoder.number32(n)},number16:e=>typeof e!="number"?[]:[28,e>>8&255,e&255],number32:e=>typeof e!="number"?[]:[29,e>>24&255,e>>16&255,e>>8&255,e&255],real:e=>{let n=e.toString();const r=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(n);if(r){const k=parseFloat("1e"+((r[2]?+r[2]:0)+r[1].length));n=(Math.round(e*k)/k).toString()}let g="";for(let k=0,$=n.length;k<$;k+=1){const V=n[k];V==="e"?g+=n[++k]==="-"?"c":"b":V==="."?g+="a":V==="-"?g+="e":g+=V}g+=g.length&1?"f":"ff";const y=[30];for(let k=0,$=g.length;k<$;k+=2)y.push(parseInt(g.substr(k,2),16));return y},CharString:e=>{if(wmm){const g=wmm.get(e);if(g!==void 0)return g}let n=[];const r=e.length;for(let g=0;g<r;g+=1){const y=e[g];n=n.concat(encoder[y.type](y.value))}return wmm&&wmm.set(e,n),n},Operator:e=>typeof e!="number"?[]:e<1200?[e]:[12,e-1200],op:e=>encoder.uint8(e),raw:e=>e,utf16:e=>{const n=[];for(let r=0;r<e.length;r+=1){const g=e.charCodeAt(r);n[n.length]=g>>8&255,n[n.length]=g&255}return n}},setByesAt=(e,n,r)=>{for(let g=0;g<n.length;g++)e[r+g]=n[g];return e};let data,offset;const start=(e,n)=>{data=e,offset=n},end$1=()=>{data=new DataView(new ArrayBuffer(0)),offset=0},getOffset=()=>offset,setOffset=e=>{offset=e},decoder={uint8:()=>{const e=data.getUint8(offset);return offset+=1,e},int8:()=>{const e=data.getInt8(offset);return offset+=1,e},uint16:()=>{const e=data.getUint16(offset);return offset+=2,e},int16:()=>{const e=data.getInt16(offset);return offset+=2,e},uint24:()=>{const e=data.getUint8(offset),n=data.getUint8(offset+1),r=data.getUint8(offset+2),g=e<<16|n<<8|r;return offset+=3,g},uint32:()=>{const e=data.getUint32(offset);return offset+=4,e},int32:()=>{const e=data.getInt32(offset);return offset+=4,e},bigInt:()=>{const e=data.getBigInt64(offset);return offset+=8,e},Fixed:()=>decoder.int32(),FWORD:()=>decoder.int16(),UFWORD:()=>decoder.uint16(),F2DOT14:()=>{const e=data.getInt16(offset)/16384;return offset+=2,e},LONGDATETIME:()=>{const e=Number(data.getBigInt64(offset));return offset+=8,e},Tag:()=>{const e=[];let n="";for(let r=0;r<4;r++)e.push(data.getUint8(offset+r)),n+=String.fromCharCode(e[r]);return offset+=4,{tagArr:e,tagStr:n}},Offset16:()=>decoder.uint16(),Offset32:()=>decoder.uint32(),Version16Dot16:()=>{const e=data.getUint16(offset),n=data.getUint16(offset+2);return offset+=4,e+n/4096/10},Card8:()=>decoder.uint8(),Card16:()=>decoder.uint16(),OffSize:()=>decoder.uint8(),SID:()=>decoder.uint16()},types$a={version:"uint16",xAvgCharWidth:"int16",usWeightClass:"uint16",usWidthClass:"uint16",fsType:"uint16",ySubscriptXSize:"int16",ySubscriptYSize:"int16",ySubscriptXOffset:"int16",ySubscriptYOffset:"int16",ySuperscriptXSize:"int16",ySuperscriptYSize:"int16",ySuperscriptXOffset:"int16",ySuperscriptYOffset:"int16",yStrikeoutSize:"int16",yStrikeoutPosition:"int16",sFamilyClass:"int16",panose:"uint8",ulUnicodeRange1:"uint32",ulUnicodeRange2:"uint32",ulUnicodeRange3:"uint32",ulUnicodeRange4:"uint32",achVendID:"Tag",fsSelection:"uint16",usFirstCharIndex:"uint16",usLastCharIndex:"uint16",sTypoAscender:"int16",sTypoDescender:"int16",sTypoLineGap:"int16",usWinAscent:"uint16",usWinDescent:"uint16",ulCodePageRange1:"uint32",ulCodePageRange2:"uint32",sxHeight:"int16",sCapHeight:"int16",usDefaultChar:"uint16",usBreakChar:"uint16",usMaxContext:"uint16",usLowerOpticalPointSize:"uint16",usUpperOpticalPointSize:"uint16"},baseFieldOrder$1=["version","xAvgCharWidth","usWeightClass","usWidthClass","fsType","ySubscriptXSize","ySubscriptYSize","ySubscriptXOffset","ySubscriptYOffset","ySuperscriptXSize","ySuperscriptYSize","ySuperscriptXOffset","ySuperscriptYOffset","yStrikeoutSize","yStrikeoutPosition","sFamilyClass","panose","ulUnicodeRange1","ulUnicodeRange2","ulUnicodeRange3","ulUnicodeRange4","achVendID","fsSelection","usFirstCharIndex","usLastCharIndex","sTypoAscender","sTypoDescender","sTypoLineGap","usWinAscent","usWinDescent"],versionOneFields=["ulCodePageRange1","ulCodePageRange2"],versionTwoFields=["sxHeight","sCapHeight","usDefaultChar","usBreakChar","usMaxContext"],versionFiveFields=["usLowerOpticalPointSize","usUpperOpticalPointSize"],parse$i=(e,n,r)=>{start(e,n);const g=decoder[types$a.version](),y=decoder[types$a.xAvgCharWidth](),k=decoder[types$a.usWeightClass](),$=decoder[types$a.usWidthClass](),V=decoder[types$a.fsType](),L=decoder[types$a.ySubscriptXSize](),z=decoder[types$a.ySubscriptYSize](),j=decoder[types$a.ySubscriptXOffset](),ae=decoder[types$a.ySubscriptYOffset](),oe=decoder[types$a.ySuperscriptXSize](),re=decoder[types$a.ySuperscriptYSize](),ue=decoder[types$a.ySuperscriptXOffset](),le=decoder[types$a.ySuperscriptYOffset](),de=decoder[types$a.yStrikeoutSize](),he=decoder[types$a.yStrikeoutPosition](),_e=decoder[types$a.sFamilyClass](),xe=[];for(let Ln=0;Ln<10;Ln++)xe[Ln]=decoder[types$a.panose]();const Ne=decoder[types$a.ulUnicodeRange1](),$e=decoder[types$a.ulUnicodeRange2](),Ce=decoder[types$a.ulUnicodeRange3](),Ie=decoder[types$a.ulUnicodeRange4](),ze=decoder[types$a.achVendID](),Ue=decoder[types$a.fsSelection](),Pt=decoder[types$a.usFirstCharIndex](),hn=decoder[types$a.usLastCharIndex](),Dt=decoder[types$a.sTypoAscender](),xn=decoder[types$a.sTypoDescender](),jt=decoder[types$a.sTypoLineGap](),Vn=decoder[types$a.usWinAscent](),Rn=decoder[types$a.usWinDescent](),Tn={version:g,xAvgCharWidth:y,usWeightClass:k,usWidthClass:$,fsType:V,ySubscriptXSize:L,ySubscriptYSize:z,ySubscriptXOffset:j,ySubscriptYOffset:ae,ySuperscriptXSize:oe,ySuperscriptYSize:re,ySuperscriptXOffset:ue,ySuperscriptYOffset:le,yStrikeoutSize:de,yStrikeoutPosition:he,sFamilyClass:_e,panose:xe,ulUnicodeRange1:Ne,ulUnicodeRange2:$e,ulUnicodeRange3:Ce,ulUnicodeRange4:Ie,achVendID:ze,fsSelection:Ue,usFirstCharIndex:Pt,usLastCharIndex:hn,sTypoAscender:Dt,sTypoDescender:xn,sTypoLineGap:jt,usWinAscent:Vn,usWinDescent:Rn};return g>=1&&(Tn.ulCodePageRange1=decoder[types$a.ulCodePageRange1](),Tn.ulCodePageRange2=decoder[types$a.ulCodePageRange2]()),g>=2&&(Tn.sxHeight=decoder[types$a.sxHeight](),Tn.sCapHeight=decoder[types$a.sCapHeight](),Tn.usDefaultChar=decoder[types$a.usDefaultChar](),Tn.usBreakChar=decoder[types$a.usBreakChar](),Tn.usMaxContext=decoder[types$a.usMaxContext]()),g>=5&&(Tn.usLowerOpticalPointSize=decoder[types$a.usLowerOpticalPointSize](),Tn.usUpperOpticalPointSize=decoder[types$a.usUpperOpticalPointSize]()),end$1(),Tn},create$h=e=>{let n=[];for(const r of baseFieldOrder$1){const g=types$a[r];if(r==="panose"){const $=e.panose||new Array(10).fill(0);for(let V=0;V<$.length;V++){const L=encoder[g]($[V]);L&&(n=n.concat(L))}continue}const y=e[r],k=encoder[g](y);k&&(n=n.concat(k))}if(e.version>=1)for(const r of versionOneFields){const g=e[r];if(g===void 0)continue;const y=types$a[r],k=encoder[y](g);k&&(n=n.concat(k))}if(e.version>=2)for(const r of versionTwoFields){const g=e[r];if(g===void 0)continue;const y=types$a[r],k=encoder[y](g);k&&(n=n.concat(k))}if(e.version>=5)for(const r of versionFiveFields){const g=e[r];if(g===void 0)continue;const y=types$a[r],k=encoder[y](g);k&&(n=n.concat(k))}return n},getPanose=e=>{},unicodeRanges=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],getUnicodeRange=e=>{for(let n=0;n<unicodeRanges.length;n+=1){const r=unicodeRanges[n];if(e>=r.begin&&e<r.end)return n}return-1},os2Table=Object.freeze(Object.defineProperty({__proto__:null,create:create$h,getPanose,getUnicodeRange,parse:parse$i},Symbol.toStringTag,{value:"Module"}));var PathType=(e=>(e[e.LINE=0]="LINE",e[e.QUADRATIC_BEZIER=1]="QUADRATIC_BEZIER",e[e.CUBIC_BEZIER=2]="CUBIC_BEZIER",e))(PathType||{});const getMetrics=e=>{const n=[],r=[];for(let y=0;y<e.contours.length;y+=1)for(let k=0;k<e.contours[y].length;k++){const $=e.contours[y][k];n.push($.start.x),r.push($.start.y),n.push($.end.x),r.push($.end.y),$.type===1?(n.push($.control.x),r.push($.control.y)):$.type===2&&(n.push($.control1.x),r.push($.control1.y),n.push($.control2.x),r.push($.control2.y))}const g={xMin:Math.min.apply(null,n),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,n),yMax:Math.max.apply(null,r),leftSideBearing:e.leftSideBearing,rightSideBearing:0};return isFinite(g.xMin)||(g.xMin=0),isFinite(g.xMax)||(g.xMax=e.advanceWidth||0),isFinite(g.yMin)||(g.yMin=0),isFinite(g.yMax)||(g.yMax=0),g.leftSideBearing||(g.leftSideBearing=g.xMin),g.rightSideBearing=(e.advanceWidth||0)-g.leftSideBearing-(g.xMax-g.xMin),g},parseTablesToCharacters=e=>{const n=[],r=e.filter(y=>y.name==="cmap")[0].table,g=e.filter(y=>y.name==="hmtx")[0].table;if(e.filter(y=>y.name==="glyf")[0]){const y=e.filter(k=>k.name==="glyf")[0].table;Object.keys(r.glyphIndexMap).forEach(k=>{const $=r.glyphIndexMap[k],V=y.glyphTables[r.glyphIndexMap[k]],L=[];for(let z=0;z<V.contours.length;z++)L.push(V.contours[z].paths);n.push({unicode:Number(k),contours:L,contourNum:V.contours.length,advanceWidth:g.hMetrics[$].advanceWidth,index:r.glyphIndexMap[k],name:String.fromCharCode(Number(k))})})}else if(e.filter(y=>y.name==="CFF ")[0]){const y=e.filter(k=>k.name==="CFF ")[0].table;Object.keys(r.glyphIndexMap).forEach(k=>{const $=r.glyphIndexMap[k],V=y.glyphTables[$];V&&n.push({unicode:Number(k),contours:V.contours,contourNum:V.contours.length,advanceWidth:V.advanceWidth,index:$,name:y.charsets?.data[$]})})}return n},types$9={majorVersion:"uint16",minorVersion:"uint16",fontRevision:"Fixed",checkSumAdjustment:"uint32",magicNumber:"uint32",flags:"uint16",unitsPerEm:"uint16",created:"LONGDATETIME",modified:"LONGDATETIME",xMin:"int16",yMin:"int16",xMax:"int16",yMax:"int16",macStyle:"uint16",lowestRecPPEM:"uint16",fontDirectionHint:"int16",indexToLocFormat:"int16",glyphDataFormat:"int16"},fieldOrder$2=["majorVersion","minorVersion","fontRevision","checkSumAdjustment","magicNumber","flags","unitsPerEm","created","modified","xMin","yMin","xMax","yMax","macStyle","lowestRecPPEM","fontDirectionHint","indexToLocFormat","glyphDataFormat"],parse$h=(e,n,r)=>{const g={};start(e,n);for(const y of fieldOrder$2)g[y]=decoder[types$9[y]]();return end$1(),r.settings.indexToLocFormat=g.indexToLocFormat,r.settings.unitsPerEm=g.unitsPerEm,g},create$g=e=>{let n=[];for(const r of fieldOrder$2){const g=e[r];if(g===void 0)continue;const y=types$9[r],k=encoder[y](g);k&&(n=n.concat(k))}return n},headTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$g,parse:parse$h},Symbol.toStringTag,{value:"Module"})),types$8={majorVersion:"uint16",minorVersion:"uint16",ascender:"FWORD",descender:"FWORD",lineGap:"FWORD",advanceWidthMax:"UFWORD",minLeftSideBearing:"FWORD",minRightSideBearing:"FWORD",xMaxExtent:"FWORD",caretSlopeRise:"int16",caretSlopeRun:"int16",caretOffset:"int16",reserved0:"int16",reserved1:"int16",reserved2:"int16",reserved3:"int16",metricDataFormat:"int16",numberOfHMetrics:"uint16"},fieldOrder$1=["majorVersion","minorVersion","ascender","descender","lineGap","advanceWidthMax","minLeftSideBearing","minRightSideBearing","xMaxExtent","caretSlopeRise","caretSlopeRun","caretOffset","reserved0","reserved1","reserved2","reserved3","metricDataFormat","numberOfHMetrics"],parse$g=(e,n,r)=>{const g={};start(e,n);for(const y of fieldOrder$1)g[y]=decoder[types$8[y]]();return end$1(),r.settings.numberOfHMetrics=g.numberOfHMetrics,r.settings.ascender=g.ascender,r.settings.descender=g.descender,g},create$f=e=>{let n=[];for(const r of fieldOrder$1){const g=e[r];if(g===void 0)continue;const y=types$8[r],k=encoder[y](g);k&&(n=n.concat(k))}return n},hheaTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$f,parse:parse$g},Symbol.toStringTag,{value:"Module"})),getVersion=(e,n)=>{const r=e.getUint16(n),g=e.getUint16(n+2);return r+g/4096/10},getStorageString=(e,n,r)=>{const g=[];for(let y=0;y<r/2;y++)g[y]=e.getUint16(n+y*2);return String.fromCharCode.apply(null,g)},computeCheckSum=(e,n=!1)=>{let r=e;for(n||(r=Object.assign([],e));r.length%4!==0;)r.push(0);let g=0;for(let y=0;y<r.length;y+=4){const k=(r[y]<<24>>>0)+(r[y+1]<<16>>>0)+(r[y+2]<<8>>>0)+(r[y+3]>>>0);g=g+k>>>0}return g%=4294967296,g},hasChineseChar=e=>{let n=!1;for(let r=0;r<e.length;r++)isChineseChar(e[r])&&(n=!0);return n},isChineseChar=e=>/^[\u4E00-\u9FFF]$/.test(e),types$7={version:"Version16Dot16",numGlyphs:"uint16",maxPoints:"uint16",maxContours:"uint16",maxCompositePoints:"uint16",maxCompositeContours:"uint16",maxZones:"uint16",maxTwilightPoints:"uint16",maxStorage:"uint16",maxFunctionDefs:"uint16",maxInstructionDefs:"uint16",maxStackElements:"uint16",maxSizeOfInstructions:"uint16",maxComponentElements:"uint16",maxComponentDepth:"uint16"},fieldOrder=["version","numGlyphs","maxPoints","maxContours","maxCompositePoints","maxCompositeContours","maxZones","maxTwilightPoints","maxStorage","maxFunctionDefs","maxInstructionDefs","maxStackElements","maxSizeOfInstructions","maxComponentElements","maxComponentDepth"],parse$f=(e,n,r)=>{const g=getVersion(e,n),y={};start(e,n);for(const k of fieldOrder)(g>=1||k==="numGlyphs"||k==="version")&&(y[k]=decoder[types$7[k]]());return end$1(),r.settings.numGlyphs=y.numGlyphs,y},create$e=e=>{let n=[];const r=e.version||20480,g=r===65536;console.log(`
=== Creating maxp table ===`),console.log(`Version: 0x${r.toString(16).padStart(8,"0")} (${g?"TrueType":"CFF"})`);const y=encoder.Version16Dot16(r);y&&(n=n.concat(y));const k=encoder.uint16(e.numGlyphs||0);if(k&&(n=n.concat(k)),g){const $=["maxPoints","maxContours","maxCompositePoints","maxCompositeContours","maxZones","maxTwilightPoints","maxStorage","maxFunctionDefs","maxInstructionDefs","maxStackElements","maxSizeOfInstructions","maxComponentElements","maxComponentDepth"];for(const V of $){const L=e[V]||0,z=encoder.uint16(L);z&&(n=n.concat(z))}console.log(`TrueType maxp: ${n.length} bytes`),console.log(`  numGlyphs: ${e.numGlyphs}`),console.log(`  maxPoints: ${e.maxPoints||0}`),console.log(`  maxContours: ${e.maxContours||0}`)}else console.log(`CFF maxp: ${n.length} bytes`);return console.log(`===========================
`),n},maxpTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$e,parse:parse$f},Symbol.toStringTag,{value:"Module"}));var lib={exports:{}},buffer$1={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code$4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$1=0,len=code$4.length;i$1<len;++i$1)lookup[i$1]=code$4[i$1],revLookup[code$4.charCodeAt(i$1)]=i$1;revLookup[45]=62;revLookup[95]=63;function getLens(e){var n=e.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=n);var g=r===n?0:4-r%4;return[r,g]}function byteLength(e){var n=getLens(e),r=n[0],g=n[1];return(r+g)*3/4-g}function _byteLength(e,n,r){return(n+r)*3/4-r}function toByteArray(e){var n,r=getLens(e),g=r[0],y=r[1],k=new Arr(_byteLength(e,g,y)),$=0,V=y>0?g-4:g,L;for(L=0;L<V;L+=4)n=revLookup[e.charCodeAt(L)]<<18|revLookup[e.charCodeAt(L+1)]<<12|revLookup[e.charCodeAt(L+2)]<<6|revLookup[e.charCodeAt(L+3)],k[$++]=n>>16&255,k[$++]=n>>8&255,k[$++]=n&255;return y===2&&(n=revLookup[e.charCodeAt(L)]<<2|revLookup[e.charCodeAt(L+1)]>>4,k[$++]=n&255),y===1&&(n=revLookup[e.charCodeAt(L)]<<10|revLookup[e.charCodeAt(L+1)]<<4|revLookup[e.charCodeAt(L+2)]>>2,k[$++]=n>>8&255,k[$++]=n&255),k}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[e&63]}function encodeChunk(e,n,r){for(var g,y=[],k=n;k<r;k+=3)g=(e[k]<<16&16711680)+(e[k+1]<<8&65280)+(e[k+2]&255),y.push(tripletToBase64(g));return y.join("")}function fromByteArray(e){for(var n,r=e.length,g=r%3,y=[],k=16383,$=0,V=r-g;$<V;$+=k)y.push(encodeChunk(e,$,$+k>V?V:$+k));return g===1?(n=e[r-1],y.push(lookup[n>>2]+lookup[n<<4&63]+"==")):g===2&&(n=(e[r-2]<<8)+e[r-1],y.push(lookup[n>>10]+lookup[n>>4&63]+lookup[n<<2&63]+"=")),y.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(e,n,r,g,y){var k,$,V=y*8-g-1,L=(1<<V)-1,z=L>>1,j=-7,ae=r?y-1:0,oe=r?-1:1,re=e[n+ae];for(ae+=oe,k=re&(1<<-j)-1,re>>=-j,j+=V;j>0;k=k*256+e[n+ae],ae+=oe,j-=8);for($=k&(1<<-j)-1,k>>=-j,j+=g;j>0;$=$*256+e[n+ae],ae+=oe,j-=8);if(k===0)k=1-z;else{if(k===L)return $?NaN:(re?-1:1)*(1/0);$=$+Math.pow(2,g),k=k-z}return(re?-1:1)*$*Math.pow(2,k-g)};ieee754.write=function(e,n,r,g,y,k){var $,V,L,z=k*8-y-1,j=(1<<z)-1,ae=j>>1,oe=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,re=g?0:k-1,ue=g?1:-1,le=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(V=isNaN(n)?1:0,$=j):($=Math.floor(Math.log(n)/Math.LN2),n*(L=Math.pow(2,-$))<1&&($--,L*=2),$+ae>=1?n+=oe/L:n+=oe*Math.pow(2,1-ae),n*L>=2&&($++,L/=2),$+ae>=j?(V=0,$=j):$+ae>=1?(V=(n*L-1)*Math.pow(2,y),$=$+ae):(V=n*Math.pow(2,ae-1)*Math.pow(2,y),$=0));y>=8;e[r+re]=V&255,re+=ue,V/=256,y-=8);for($=$<<y|V,z+=y;z>0;e[r+re]=$&255,re+=ue,$/=256,z-=8);e[r+re-ue]|=le*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){var n=base64Js,r=ieee754,g=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=V,e.SlowBuffer=_e,e.INSPECT_MAX_BYTES=50;var y=2147483647;e.kMaxLength=y,V.TYPED_ARRAY_SUPPORT=k(),!V.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function k(){try{var $n=new Uint8Array(1),kt={foo:function(){return 42}};return Object.setPrototypeOf(kt,Uint8Array.prototype),Object.setPrototypeOf($n,kt),$n.foo()===42}catch{return!1}}Object.defineProperty(V.prototype,"parent",{enumerable:!0,get:function(){if(V.isBuffer(this))return this.buffer}}),Object.defineProperty(V.prototype,"offset",{enumerable:!0,get:function(){if(V.isBuffer(this))return this.byteOffset}});function $($n){if($n>y)throw new RangeError('The value "'+$n+'" is invalid for option "size"');var kt=new Uint8Array($n);return Object.setPrototypeOf(kt,V.prototype),kt}function V($n,kt,At){if(typeof $n=="number"){if(typeof kt=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ae($n)}return L($n,kt,At)}V.poolSize=8192;function L($n,kt,At){if(typeof $n=="string")return oe($n,kt);if(ArrayBuffer.isView($n))return ue($n);if($n==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $n);if(Hn($n,ArrayBuffer)||$n&&Hn($n.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Hn($n,SharedArrayBuffer)||$n&&Hn($n.buffer,SharedArrayBuffer)))return le($n,kt,At);if(typeof $n=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Dn=$n.valueOf&&$n.valueOf();if(Dn!=null&&Dn!==$n)return V.from(Dn,kt,At);var Qn=de($n);if(Qn)return Qn;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof $n[Symbol.toPrimitive]=="function")return V.from($n[Symbol.toPrimitive]("string"),kt,At);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $n)}V.from=function($n,kt,At){return L($n,kt,At)},Object.setPrototypeOf(V.prototype,Uint8Array.prototype),Object.setPrototypeOf(V,Uint8Array);function z($n){if(typeof $n!="number")throw new TypeError('"size" argument must be of type number');if($n<0)throw new RangeError('The value "'+$n+'" is invalid for option "size"')}function j($n,kt,At){return z($n),$n<=0?$($n):kt!==void 0?typeof At=="string"?$($n).fill(kt,At):$($n).fill(kt):$($n)}V.alloc=function($n,kt,At){return j($n,kt,At)};function ae($n){return z($n),$($n<0?0:he($n)|0)}V.allocUnsafe=function($n){return ae($n)},V.allocUnsafeSlow=function($n){return ae($n)};function oe($n,kt){if((typeof kt!="string"||kt==="")&&(kt="utf8"),!V.isEncoding(kt))throw new TypeError("Unknown encoding: "+kt);var At=xe($n,kt)|0,Dn=$(At),Qn=Dn.write($n,kt);return Qn!==At&&(Dn=Dn.slice(0,Qn)),Dn}function re($n){for(var kt=$n.length<0?0:he($n.length)|0,At=$(kt),Dn=0;Dn<kt;Dn+=1)At[Dn]=$n[Dn]&255;return At}function ue($n){if(Hn($n,Uint8Array)){var kt=new Uint8Array($n);return le(kt.buffer,kt.byteOffset,kt.byteLength)}return re($n)}function le($n,kt,At){if(kt<0||$n.byteLength<kt)throw new RangeError('"offset" is outside of buffer bounds');if($n.byteLength<kt+(At||0))throw new RangeError('"length" is outside of buffer bounds');var Dn;return kt===void 0&&At===void 0?Dn=new Uint8Array($n):At===void 0?Dn=new Uint8Array($n,kt):Dn=new Uint8Array($n,kt,At),Object.setPrototypeOf(Dn,V.prototype),Dn}function de($n){if(V.isBuffer($n)){var kt=he($n.length)|0,At=$(kt);return At.length===0||$n.copy(At,0,0,kt),At}if($n.length!==void 0)return typeof $n.length!="number"||bn($n.length)?$(0):re($n);if($n.type==="Buffer"&&Array.isArray($n.data))return re($n.data)}function he($n){if($n>=y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return $n|0}function _e($n){return+$n!=$n&&($n=0),V.alloc(+$n)}V.isBuffer=function(kt){return kt!=null&&kt._isBuffer===!0&&kt!==V.prototype},V.compare=function(kt,At){if(Hn(kt,Uint8Array)&&(kt=V.from(kt,kt.offset,kt.byteLength)),Hn(At,Uint8Array)&&(At=V.from(At,At.offset,At.byteLength)),!V.isBuffer(kt)||!V.isBuffer(At))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(kt===At)return 0;for(var Dn=kt.length,Qn=At.length,oa=0,na=Math.min(Dn,Qn);oa<na;++oa)if(kt[oa]!==At[oa]){Dn=kt[oa],Qn=At[oa];break}return Dn<Qn?-1:Qn<Dn?1:0},V.isEncoding=function(kt){switch(String(kt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},V.concat=function(kt,At){if(!Array.isArray(kt))throw new TypeError('"list" argument must be an Array of Buffers');if(kt.length===0)return V.alloc(0);var Dn;if(At===void 0)for(At=0,Dn=0;Dn<kt.length;++Dn)At+=kt[Dn].length;var Qn=V.allocUnsafe(At),oa=0;for(Dn=0;Dn<kt.length;++Dn){var na=kt[Dn];if(Hn(na,Uint8Array))oa+na.length>Qn.length?V.from(na).copy(Qn,oa):Uint8Array.prototype.set.call(Qn,na,oa);else if(V.isBuffer(na))na.copy(Qn,oa);else throw new TypeError('"list" argument must be an Array of Buffers');oa+=na.length}return Qn};function xe($n,kt){if(V.isBuffer($n))return $n.length;if(ArrayBuffer.isView($n)||Hn($n,ArrayBuffer))return $n.byteLength;if(typeof $n!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $n);var At=$n.length,Dn=arguments.length>2&&arguments[2]===!0;if(!Dn&&At===0)return 0;for(var Qn=!1;;)switch(kt){case"ascii":case"latin1":case"binary":return At;case"utf8":case"utf-8":return En($n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return At*2;case"hex":return At>>>1;case"base64":return xa($n).length;default:if(Qn)return Dn?-1:En($n).length;kt=(""+kt).toLowerCase(),Qn=!0}}V.byteLength=xe;function Ne($n,kt,At){var Dn=!1;if((kt===void 0||kt<0)&&(kt=0),kt>this.length||((At===void 0||At>this.length)&&(At=this.length),At<=0)||(At>>>=0,kt>>>=0,At<=kt))return"";for($n||($n="utf8");;)switch($n){case"hex":return Sn(this,kt,At);case"utf8":case"utf-8":return jt(this,kt,At);case"ascii":return Tn(this,kt,At);case"latin1":case"binary":return Ln(this,kt,At);case"base64":return xn(this,kt,At);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return An(this,kt,At);default:if(Dn)throw new TypeError("Unknown encoding: "+$n);$n=($n+"").toLowerCase(),Dn=!0}}V.prototype._isBuffer=!0;function $e($n,kt,At){var Dn=$n[kt];$n[kt]=$n[At],$n[At]=Dn}V.prototype.swap16=function(){var kt=this.length;if(kt%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var At=0;At<kt;At+=2)$e(this,At,At+1);return this},V.prototype.swap32=function(){var kt=this.length;if(kt%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var At=0;At<kt;At+=4)$e(this,At,At+3),$e(this,At+1,At+2);return this},V.prototype.swap64=function(){var kt=this.length;if(kt%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var At=0;At<kt;At+=8)$e(this,At,At+7),$e(this,At+1,At+6),$e(this,At+2,At+5),$e(this,At+3,At+4);return this},V.prototype.toString=function(){var kt=this.length;return kt===0?"":arguments.length===0?jt(this,0,kt):Ne.apply(this,arguments)},V.prototype.toLocaleString=V.prototype.toString,V.prototype.equals=function(kt){if(!V.isBuffer(kt))throw new TypeError("Argument must be a Buffer");return this===kt?!0:V.compare(this,kt)===0},V.prototype.inspect=function(){var kt="",At=e.INSPECT_MAX_BYTES;return kt=this.toString("hex",0,At).replace(/(.{2})/g,"$1 ").trim(),this.length>At&&(kt+=" ... "),"<Buffer "+kt+">"},g&&(V.prototype[g]=V.prototype.inspect),V.prototype.compare=function(kt,At,Dn,Qn,oa){if(Hn(kt,Uint8Array)&&(kt=V.from(kt,kt.offset,kt.byteLength)),!V.isBuffer(kt))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof kt);if(At===void 0&&(At=0),Dn===void 0&&(Dn=kt?kt.length:0),Qn===void 0&&(Qn=0),oa===void 0&&(oa=this.length),At<0||Dn>kt.length||Qn<0||oa>this.length)throw new RangeError("out of range index");if(Qn>=oa&&At>=Dn)return 0;if(Qn>=oa)return-1;if(At>=Dn)return 1;if(At>>>=0,Dn>>>=0,Qn>>>=0,oa>>>=0,this===kt)return 0;for(var na=oa-Qn,la=Dn-At,ma=Math.min(na,la),ca=this.slice(Qn,oa),pe=kt.slice(At,Dn),Oe=0;Oe<ma;++Oe)if(ca[Oe]!==pe[Oe]){na=ca[Oe],la=pe[Oe];break}return na<la?-1:la<na?1:0};function Ce($n,kt,At,Dn,Qn){if($n.length===0)return-1;if(typeof At=="string"?(Dn=At,At=0):At>2147483647?At=2147483647:At<-2147483648&&(At=-2147483648),At=+At,bn(At)&&(At=Qn?0:$n.length-1),At<0&&(At=$n.length+At),At>=$n.length){if(Qn)return-1;At=$n.length-1}else if(At<0)if(Qn)At=0;else return-1;if(typeof kt=="string"&&(kt=V.from(kt,Dn)),V.isBuffer(kt))return kt.length===0?-1:Ie($n,kt,At,Dn,Qn);if(typeof kt=="number")return kt=kt&255,typeof Uint8Array.prototype.indexOf=="function"?Qn?Uint8Array.prototype.indexOf.call($n,kt,At):Uint8Array.prototype.lastIndexOf.call($n,kt,At):Ie($n,[kt],At,Dn,Qn);throw new TypeError("val must be string, number or Buffer")}function Ie($n,kt,At,Dn,Qn){var oa=1,na=$n.length,la=kt.length;if(Dn!==void 0&&(Dn=String(Dn).toLowerCase(),Dn==="ucs2"||Dn==="ucs-2"||Dn==="utf16le"||Dn==="utf-16le")){if($n.length<2||kt.length<2)return-1;oa=2,na/=2,la/=2,At/=2}function ma(qe,Et){return oa===1?qe[Et]:qe.readUInt16BE(Et*oa)}var ca;if(Qn){var pe=-1;for(ca=At;ca<na;ca++)if(ma($n,ca)===ma(kt,pe===-1?0:ca-pe)){if(pe===-1&&(pe=ca),ca-pe+1===la)return pe*oa}else pe!==-1&&(ca-=ca-pe),pe=-1}else for(At+la>na&&(At=na-la),ca=At;ca>=0;ca--){for(var Oe=!0,Ve=0;Ve<la;Ve++)if(ma($n,ca+Ve)!==ma(kt,Ve)){Oe=!1;break}if(Oe)return ca}return-1}V.prototype.includes=function(kt,At,Dn){return this.indexOf(kt,At,Dn)!==-1},V.prototype.indexOf=function(kt,At,Dn){return Ce(this,kt,At,Dn,!0)},V.prototype.lastIndexOf=function(kt,At,Dn){return Ce(this,kt,At,Dn,!1)};function ze($n,kt,At,Dn){At=Number(At)||0;var Qn=$n.length-At;Dn?(Dn=Number(Dn),Dn>Qn&&(Dn=Qn)):Dn=Qn;var oa=kt.length;Dn>oa/2&&(Dn=oa/2);for(var na=0;na<Dn;++na){var la=parseInt(kt.substr(na*2,2),16);if(bn(la))return na;$n[At+na]=la}return na}function Ue($n,kt,At,Dn){return sa(En(kt,$n.length-At),$n,At,Dn)}function Pt($n,kt,At,Dn){return sa(Zn(kt),$n,At,Dn)}function hn($n,kt,At,Dn){return sa(xa(kt),$n,At,Dn)}function Dt($n,kt,At,Dn){return sa(ha(kt,$n.length-At),$n,At,Dn)}V.prototype.write=function(kt,At,Dn,Qn){if(At===void 0)Qn="utf8",Dn=this.length,At=0;else if(Dn===void 0&&typeof At=="string")Qn=At,Dn=this.length,At=0;else if(isFinite(At))At=At>>>0,isFinite(Dn)?(Dn=Dn>>>0,Qn===void 0&&(Qn="utf8")):(Qn=Dn,Dn=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var oa=this.length-At;if((Dn===void 0||Dn>oa)&&(Dn=oa),kt.length>0&&(Dn<0||At<0)||At>this.length)throw new RangeError("Attempt to write outside buffer bounds");Qn||(Qn="utf8");for(var na=!1;;)switch(Qn){case"hex":return ze(this,kt,At,Dn);case"utf8":case"utf-8":return Ue(this,kt,At,Dn);case"ascii":case"latin1":case"binary":return Pt(this,kt,At,Dn);case"base64":return hn(this,kt,At,Dn);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Dt(this,kt,At,Dn);default:if(na)throw new TypeError("Unknown encoding: "+Qn);Qn=(""+Qn).toLowerCase(),na=!0}},V.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function xn($n,kt,At){return kt===0&&At===$n.length?n.fromByteArray($n):n.fromByteArray($n.slice(kt,At))}function jt($n,kt,At){At=Math.min($n.length,At);for(var Dn=[],Qn=kt;Qn<At;){var oa=$n[Qn],na=null,la=oa>239?4:oa>223?3:oa>191?2:1;if(Qn+la<=At){var ma,ca,pe,Oe;switch(la){case 1:oa<128&&(na=oa);break;case 2:ma=$n[Qn+1],(ma&192)===128&&(Oe=(oa&31)<<6|ma&63,Oe>127&&(na=Oe));break;case 3:ma=$n[Qn+1],ca=$n[Qn+2],(ma&192)===128&&(ca&192)===128&&(Oe=(oa&15)<<12|(ma&63)<<6|ca&63,Oe>2047&&(Oe<55296||Oe>57343)&&(na=Oe));break;case 4:ma=$n[Qn+1],ca=$n[Qn+2],pe=$n[Qn+3],(ma&192)===128&&(ca&192)===128&&(pe&192)===128&&(Oe=(oa&15)<<18|(ma&63)<<12|(ca&63)<<6|pe&63,Oe>65535&&Oe<1114112&&(na=Oe))}}na===null?(na=65533,la=1):na>65535&&(na-=65536,Dn.push(na>>>10&1023|55296),na=56320|na&1023),Dn.push(na),Qn+=la}return Rn(Dn)}var Vn=4096;function Rn($n){var kt=$n.length;if(kt<=Vn)return String.fromCharCode.apply(String,$n);for(var At="",Dn=0;Dn<kt;)At+=String.fromCharCode.apply(String,$n.slice(Dn,Dn+=Vn));return At}function Tn($n,kt,At){var Dn="";At=Math.min($n.length,At);for(var Qn=kt;Qn<At;++Qn)Dn+=String.fromCharCode($n[Qn]&127);return Dn}function Ln($n,kt,At){var Dn="";At=Math.min($n.length,At);for(var Qn=kt;Qn<At;++Qn)Dn+=String.fromCharCode($n[Qn]);return Dn}function Sn($n,kt,At){var Dn=$n.length;(!kt||kt<0)&&(kt=0),(!At||At<0||At>Dn)&&(At=Dn);for(var Qn="",oa=kt;oa<At;++oa)Qn+=Xn[$n[oa]];return Qn}function An($n,kt,At){for(var Dn=$n.slice(kt,At),Qn="",oa=0;oa<Dn.length-1;oa+=2)Qn+=String.fromCharCode(Dn[oa]+Dn[oa+1]*256);return Qn}V.prototype.slice=function(kt,At){var Dn=this.length;kt=~~kt,At=At===void 0?Dn:~~At,kt<0?(kt+=Dn,kt<0&&(kt=0)):kt>Dn&&(kt=Dn),At<0?(At+=Dn,At<0&&(At=0)):At>Dn&&(At=Dn),At<kt&&(At=kt);var Qn=this.subarray(kt,At);return Object.setPrototypeOf(Qn,V.prototype),Qn};function In($n,kt,At){if($n%1!==0||$n<0)throw new RangeError("offset is not uint");if($n+kt>At)throw new RangeError("Trying to access beyond buffer length")}V.prototype.readUintLE=V.prototype.readUIntLE=function(kt,At,Dn){kt=kt>>>0,At=At>>>0,Dn||In(kt,At,this.length);for(var Qn=this[kt],oa=1,na=0;++na<At&&(oa*=256);)Qn+=this[kt+na]*oa;return Qn},V.prototype.readUintBE=V.prototype.readUIntBE=function(kt,At,Dn){kt=kt>>>0,At=At>>>0,Dn||In(kt,At,this.length);for(var Qn=this[kt+--At],oa=1;At>0&&(oa*=256);)Qn+=this[kt+--At]*oa;return Qn},V.prototype.readUint8=V.prototype.readUInt8=function(kt,At){return kt=kt>>>0,At||In(kt,1,this.length),this[kt]},V.prototype.readUint16LE=V.prototype.readUInt16LE=function(kt,At){return kt=kt>>>0,At||In(kt,2,this.length),this[kt]|this[kt+1]<<8},V.prototype.readUint16BE=V.prototype.readUInt16BE=function(kt,At){return kt=kt>>>0,At||In(kt,2,this.length),this[kt]<<8|this[kt+1]},V.prototype.readUint32LE=V.prototype.readUInt32LE=function(kt,At){return kt=kt>>>0,At||In(kt,4,this.length),(this[kt]|this[kt+1]<<8|this[kt+2]<<16)+this[kt+3]*16777216},V.prototype.readUint32BE=V.prototype.readUInt32BE=function(kt,At){return kt=kt>>>0,At||In(kt,4,this.length),this[kt]*16777216+(this[kt+1]<<16|this[kt+2]<<8|this[kt+3])},V.prototype.readIntLE=function(kt,At,Dn){kt=kt>>>0,At=At>>>0,Dn||In(kt,At,this.length);for(var Qn=this[kt],oa=1,na=0;++na<At&&(oa*=256);)Qn+=this[kt+na]*oa;return oa*=128,Qn>=oa&&(Qn-=Math.pow(2,8*At)),Qn},V.prototype.readIntBE=function(kt,At,Dn){kt=kt>>>0,At=At>>>0,Dn||In(kt,At,this.length);for(var Qn=At,oa=1,na=this[kt+--Qn];Qn>0&&(oa*=256);)na+=this[kt+--Qn]*oa;return oa*=128,na>=oa&&(na-=Math.pow(2,8*At)),na},V.prototype.readInt8=function(kt,At){return kt=kt>>>0,At||In(kt,1,this.length),this[kt]&128?(255-this[kt]+1)*-1:this[kt]},V.prototype.readInt16LE=function(kt,At){kt=kt>>>0,At||In(kt,2,this.length);var Dn=this[kt]|this[kt+1]<<8;return Dn&32768?Dn|4294901760:Dn},V.prototype.readInt16BE=function(kt,At){kt=kt>>>0,At||In(kt,2,this.length);var Dn=this[kt+1]|this[kt]<<8;return Dn&32768?Dn|4294901760:Dn},V.prototype.readInt32LE=function(kt,At){return kt=kt>>>0,At||In(kt,4,this.length),this[kt]|this[kt+1]<<8|this[kt+2]<<16|this[kt+3]<<24},V.prototype.readInt32BE=function(kt,At){return kt=kt>>>0,At||In(kt,4,this.length),this[kt]<<24|this[kt+1]<<16|this[kt+2]<<8|this[kt+3]},V.prototype.readFloatLE=function(kt,At){return kt=kt>>>0,At||In(kt,4,this.length),r.read(this,kt,!0,23,4)},V.prototype.readFloatBE=function(kt,At){return kt=kt>>>0,At||In(kt,4,this.length),r.read(this,kt,!1,23,4)},V.prototype.readDoubleLE=function(kt,At){return kt=kt>>>0,At||In(kt,8,this.length),r.read(this,kt,!0,52,8)},V.prototype.readDoubleBE=function(kt,At){return kt=kt>>>0,At||In(kt,8,this.length),r.read(this,kt,!1,52,8)};function Mn($n,kt,At,Dn,Qn,oa){if(!V.isBuffer($n))throw new TypeError('"buffer" argument must be a Buffer instance');if(kt>Qn||kt<oa)throw new RangeError('"value" argument is out of bounds');if(At+Dn>$n.length)throw new RangeError("Index out of range")}V.prototype.writeUintLE=V.prototype.writeUIntLE=function(kt,At,Dn,Qn){if(kt=+kt,At=At>>>0,Dn=Dn>>>0,!Qn){var oa=Math.pow(2,8*Dn)-1;Mn(this,kt,At,Dn,oa,0)}var na=1,la=0;for(this[At]=kt&255;++la<Dn&&(na*=256);)this[At+la]=kt/na&255;return At+Dn},V.prototype.writeUintBE=V.prototype.writeUIntBE=function(kt,At,Dn,Qn){if(kt=+kt,At=At>>>0,Dn=Dn>>>0,!Qn){var oa=Math.pow(2,8*Dn)-1;Mn(this,kt,At,Dn,oa,0)}var na=Dn-1,la=1;for(this[At+na]=kt&255;--na>=0&&(la*=256);)this[At+na]=kt/la&255;return At+Dn},V.prototype.writeUint8=V.prototype.writeUInt8=function(kt,At,Dn){return kt=+kt,At=At>>>0,Dn||Mn(this,kt,At,1,255,0),this[At]=kt&255,At+1},V.prototype.writeUint16LE=V.prototype.writeUInt16LE=function(kt,At,Dn){return kt=+kt,At=At>>>0,Dn||Mn(this,kt,At,2,65535,0),this[At]=kt&255,this[At+1]=kt>>>8,At+2},V.prototype.writeUint16BE=V.prototype.writeUInt16BE=function(kt,At,Dn){return kt=+kt,At=At>>>0,Dn||Mn(this,kt,At,2,65535,0),this[At]=kt>>>8,this[At+1]=kt&255,At+2},V.prototype.writeUint32LE=V.prototype.writeUInt32LE=function(kt,At,Dn){return kt=+kt,At=At>>>0,Dn||Mn(this,kt,At,4,4294967295,0),this[At+3]=kt>>>24,this[At+2]=kt>>>16,this[At+1]=kt>>>8,this[At]=kt&255,At+4},V.prototype.writeUint32BE=V.prototype.writeUInt32BE=function(kt,At,Dn){return kt=+kt,At=At>>>0,Dn||Mn(this,kt,At,4,4294967295,0),this[At]=kt>>>24,this[At+1]=kt>>>16,this[At+2]=kt>>>8,this[At+3]=kt&255,At+4},V.prototype.writeIntLE=function(kt,At,Dn,Qn){if(kt=+kt,At=At>>>0,!Qn){var oa=Math.pow(2,8*Dn-1);Mn(this,kt,At,Dn,oa-1,-oa)}var na=0,la=1,ma=0;for(this[At]=kt&255;++na<Dn&&(la*=256);)kt<0&&ma===0&&this[At+na-1]!==0&&(ma=1),this[At+na]=(kt/la>>0)-ma&255;return At+Dn},V.prototype.writeIntBE=function(kt,At,Dn,Qn){if(kt=+kt,At=At>>>0,!Qn){var oa=Math.pow(2,8*Dn-1);Mn(this,kt,At,Dn,oa-1,-oa)}var na=Dn-1,la=1,ma=0;for(this[At+na]=kt&255;--na>=0&&(la*=256);)kt<0&&ma===0&&this[At+na+1]!==0&&(ma=1),this[At+na]=(kt/la>>0)-ma&255;return At+Dn},V.prototype.writeInt8=function(kt,At,Dn){return kt=+kt,At=At>>>0,Dn||Mn(this,kt,At,1,127,-128),kt<0&&(kt=255+kt+1),this[At]=kt&255,At+1},V.prototype.writeInt16LE=function(kt,At,Dn){return kt=+kt,At=At>>>0,Dn||Mn(this,kt,At,2,32767,-32768),this[At]=kt&255,this[At+1]=kt>>>8,At+2},V.prototype.writeInt16BE=function(kt,At,Dn){return kt=+kt,At=At>>>0,Dn||Mn(this,kt,At,2,32767,-32768),this[At]=kt>>>8,this[At+1]=kt&255,At+2},V.prototype.writeInt32LE=function(kt,At,Dn){return kt=+kt,At=At>>>0,Dn||Mn(this,kt,At,4,2147483647,-2147483648),this[At]=kt&255,this[At+1]=kt>>>8,this[At+2]=kt>>>16,this[At+3]=kt>>>24,At+4},V.prototype.writeInt32BE=function(kt,At,Dn){return kt=+kt,At=At>>>0,Dn||Mn(this,kt,At,4,2147483647,-2147483648),kt<0&&(kt=4294967295+kt+1),this[At]=kt>>>24,this[At+1]=kt>>>16,this[At+2]=kt>>>8,this[At+3]=kt&255,At+4};function ra($n,kt,At,Dn,Qn,oa){if(At+Dn>$n.length)throw new RangeError("Index out of range");if(At<0)throw new RangeError("Index out of range")}function da($n,kt,At,Dn,Qn){return kt=+kt,At=At>>>0,Qn||ra($n,kt,At,4),r.write($n,kt,At,Dn,23,4),At+4}V.prototype.writeFloatLE=function(kt,At,Dn){return da(this,kt,At,!0,Dn)},V.prototype.writeFloatBE=function(kt,At,Dn){return da(this,kt,At,!1,Dn)};function ua($n,kt,At,Dn,Qn){return kt=+kt,At=At>>>0,Qn||ra($n,kt,At,8),r.write($n,kt,At,Dn,52,8),At+8}V.prototype.writeDoubleLE=function(kt,At,Dn){return ua(this,kt,At,!0,Dn)},V.prototype.writeDoubleBE=function(kt,At,Dn){return ua(this,kt,At,!1,Dn)},V.prototype.copy=function(kt,At,Dn,Qn){if(!V.isBuffer(kt))throw new TypeError("argument should be a Buffer");if(Dn||(Dn=0),!Qn&&Qn!==0&&(Qn=this.length),At>=kt.length&&(At=kt.length),At||(At=0),Qn>0&&Qn<Dn&&(Qn=Dn),Qn===Dn||kt.length===0||this.length===0)return 0;if(At<0)throw new RangeError("targetStart out of bounds");if(Dn<0||Dn>=this.length)throw new RangeError("Index out of range");if(Qn<0)throw new RangeError("sourceEnd out of bounds");Qn>this.length&&(Qn=this.length),kt.length-At<Qn-Dn&&(Qn=kt.length-At+Dn);var oa=Qn-Dn;return this===kt&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(At,Dn,Qn):Uint8Array.prototype.set.call(kt,this.subarray(Dn,Qn),At),oa},V.prototype.fill=function(kt,At,Dn,Qn){if(typeof kt=="string"){if(typeof At=="string"?(Qn=At,At=0,Dn=this.length):typeof Dn=="string"&&(Qn=Dn,Dn=this.length),Qn!==void 0&&typeof Qn!="string")throw new TypeError("encoding must be a string");if(typeof Qn=="string"&&!V.isEncoding(Qn))throw new TypeError("Unknown encoding: "+Qn);if(kt.length===1){var oa=kt.charCodeAt(0);(Qn==="utf8"&&oa<128||Qn==="latin1")&&(kt=oa)}}else typeof kt=="number"?kt=kt&255:typeof kt=="boolean"&&(kt=Number(kt));if(At<0||this.length<At||this.length<Dn)throw new RangeError("Out of range index");if(Dn<=At)return this;At=At>>>0,Dn=Dn===void 0?this.length:Dn>>>0,kt||(kt=0);var na;if(typeof kt=="number")for(na=At;na<Dn;++na)this[na]=kt;else{var la=V.isBuffer(kt)?kt:V.from(kt,Qn),ma=la.length;if(ma===0)throw new TypeError('The value "'+kt+'" is invalid for argument "value"');for(na=0;na<Dn-At;++na)this[na+At]=la[na%ma]}return this};var aa=/[^+/0-9A-Za-z-_]/g;function Nn($n){if($n=$n.split("=")[0],$n=$n.trim().replace(aa,""),$n.length<2)return"";for(;$n.length%4!==0;)$n=$n+"=";return $n}function En($n,kt){kt=kt||1/0;for(var At,Dn=$n.length,Qn=null,oa=[],na=0;na<Dn;++na){if(At=$n.charCodeAt(na),At>55295&&At<57344){if(!Qn){if(At>56319){(kt-=3)>-1&&oa.push(239,191,189);continue}else if(na+1===Dn){(kt-=3)>-1&&oa.push(239,191,189);continue}Qn=At;continue}if(At<56320){(kt-=3)>-1&&oa.push(239,191,189),Qn=At;continue}At=(Qn-55296<<10|At-56320)+65536}else Qn&&(kt-=3)>-1&&oa.push(239,191,189);if(Qn=null,At<128){if((kt-=1)<0)break;oa.push(At)}else if(At<2048){if((kt-=2)<0)break;oa.push(At>>6|192,At&63|128)}else if(At<65536){if((kt-=3)<0)break;oa.push(At>>12|224,At>>6&63|128,At&63|128)}else if(At<1114112){if((kt-=4)<0)break;oa.push(At>>18|240,At>>12&63|128,At>>6&63|128,At&63|128)}else throw new Error("Invalid code point")}return oa}function Zn($n){for(var kt=[],At=0;At<$n.length;++At)kt.push($n.charCodeAt(At)&255);return kt}function ha($n,kt){for(var At,Dn,Qn,oa=[],na=0;na<$n.length&&!((kt-=2)<0);++na)At=$n.charCodeAt(na),Dn=At>>8,Qn=At%256,oa.push(Qn),oa.push(Dn);return oa}function xa($n){return n.toByteArray(Nn($n))}function sa($n,kt,At,Dn){for(var Qn=0;Qn<Dn&&!(Qn+At>=kt.length||Qn>=$n.length);++Qn)kt[Qn+At]=$n[Qn];return Qn}function Hn($n,kt){return $n instanceof kt||$n!=null&&$n.constructor!=null&&$n.constructor.name!=null&&$n.constructor.name===kt.name}function bn($n){return $n!==$n}var Xn=function(){for(var $n="0123456789abcdef",kt=new Array(256),At=0;At<16;++At)for(var Dn=At*16,Qn=0;Qn<16;++Qn)kt[Dn+Qn]=$n[At]+$n[Qn];return kt}()})(buffer$1);var buffer=buffer$1,Buffer$1=buffer.Buffer,safer={},key;for(key in buffer)buffer.hasOwnProperty(key)&&(key==="SlowBuffer"||key==="Buffer"||(safer[key]=buffer[key]));var Safer=safer.Buffer={};for(key in Buffer$1)Buffer$1.hasOwnProperty(key)&&(key==="allocUnsafe"||key==="allocUnsafeSlow"||(Safer[key]=Buffer$1[key]));safer.Buffer.prototype=Buffer$1.prototype;(!Safer.from||Safer.from===Uint8Array.from)&&(Safer.from=function(e,n,r){if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&typeof e.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return Buffer$1(e,n,r)});Safer.alloc||(Safer.alloc=function(e,n,r){if(typeof e!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var g=Buffer$1(e);return!n||n.length===0?g.fill(0):typeof r=="string"?g.fill(n,r):g.fill(n),g});if(!safer.kStringMaxLength)try{safer.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}safer.constants||(safer.constants={MAX_LENGTH:safer.kMaxLength},safer.kStringMaxLength&&(safer.constants.MAX_STRING_LENGTH=safer.kStringMaxLength));var safer_1=safer,bomHandling={},BOMChar="\uFEFF";bomHandling.PrependBOM=PrependBOMWrapper;function PrependBOMWrapper(e,n){this.encoder=e,this.addBOM=!0}PrependBOMWrapper.prototype.write=function(e){return this.addBOM&&(e=BOMChar+e,this.addBOM=!1),this.encoder.write(e)};PrependBOMWrapper.prototype.end=function(){return this.encoder.end()};bomHandling.StripBOM=StripBOMWrapper;function StripBOMWrapper(e,n){this.decoder=e,this.pass=!1,this.options=n||{}}StripBOMWrapper.prototype.write=function(e){var n=this.decoder.write(e);return this.pass||!n||(n[0]===BOMChar&&(n=n.slice(1),typeof this.options.stripBOM=="function"&&this.options.stripBOM()),this.pass=!0),n};StripBOMWrapper.prototype.end=function(){return this.decoder.end()};var encodings={},string_decoder={},safeBuffer={exports:{}},hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(e,n){var r=buffer$1,g=r.Buffer;function y($,V){for(var L in $)V[L]=$[L]}g.from&&g.alloc&&g.allocUnsafe&&g.allocUnsafeSlow?e.exports=r:(y(r,n),n.Buffer=k);function k($,V,L){return g($,V,L)}y(g,k),k.from=function($,V,L){if(typeof $=="number")throw new TypeError("Argument must not be a number");return g($,V,L)},k.alloc=function($,V,L){if(typeof $!="number")throw new TypeError("Argument must be a number");var z=g($);return V!==void 0?typeof L=="string"?z.fill(V,L):z.fill(V):z.fill(0),z},k.allocUnsafe=function($){if(typeof $!="number")throw new TypeError("Argument must be a number");return g($)},k.allocUnsafeSlow=function($){if(typeof $!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer($)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var e=requireSafeBuffer().Buffer,n=e.isEncoding||function(he){switch(he=""+he,he&&he.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(he){if(!he)return"utf8";for(var _e;;)switch(he){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return he;default:if(_e)return;he=(""+he).toLowerCase(),_e=!0}}function g(he){var _e=r(he);if(typeof _e!="string"&&(e.isEncoding===n||!n(he)))throw new Error("Unknown encoding: "+he);return _e||he}string_decoder.StringDecoder=y;function y(he){this.encoding=g(he);var _e;switch(this.encoding){case"utf16le":this.text=ae,this.end=oe,_e=4;break;case"utf8":this.fillLast=L,_e=4;break;case"base64":this.text=re,this.end=ue,_e=3;break;default:this.write=le,this.end=de;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(_e)}y.prototype.write=function(he){if(he.length===0)return"";var _e,xe;if(this.lastNeed){if(_e=this.fillLast(he),_e===void 0)return"";xe=this.lastNeed,this.lastNeed=0}else xe=0;return xe<he.length?_e?_e+this.text(he,xe):this.text(he,xe):_e||""},y.prototype.end=j,y.prototype.text=z,y.prototype.fillLast=function(he){if(this.lastNeed<=he.length)return he.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);he.copy(this.lastChar,this.lastTotal-this.lastNeed,0,he.length),this.lastNeed-=he.length};function k(he){return he<=127?0:he>>5===6?2:he>>4===14?3:he>>3===30?4:he>>6===2?-1:-2}function $(he,_e,xe){var Ne=_e.length-1;if(Ne<xe)return 0;var $e=k(_e[Ne]);return $e>=0?($e>0&&(he.lastNeed=$e-1),$e):--Ne<xe||$e===-2?0:($e=k(_e[Ne]),$e>=0?($e>0&&(he.lastNeed=$e-2),$e):--Ne<xe||$e===-2?0:($e=k(_e[Ne]),$e>=0?($e>0&&($e===2?$e=0:he.lastNeed=$e-3),$e):0))}function V(he,_e,xe){if((_e[0]&192)!==128)return he.lastNeed=0,"";if(he.lastNeed>1&&_e.length>1){if((_e[1]&192)!==128)return he.lastNeed=1,"";if(he.lastNeed>2&&_e.length>2&&(_e[2]&192)!==128)return he.lastNeed=2,""}}function L(he){var _e=this.lastTotal-this.lastNeed,xe=V(this,he);if(xe!==void 0)return xe;if(this.lastNeed<=he.length)return he.copy(this.lastChar,_e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);he.copy(this.lastChar,_e,0,he.length),this.lastNeed-=he.length}function z(he,_e){var xe=$(this,he,_e);if(!this.lastNeed)return he.toString("utf8",_e);this.lastTotal=xe;var Ne=he.length-(xe-this.lastNeed);return he.copy(this.lastChar,0,Ne),he.toString("utf8",_e,Ne)}function j(he){var _e=he&&he.length?this.write(he):"";return this.lastNeed?_e+"":_e}function ae(he,_e){if((he.length-_e)%2===0){var xe=he.toString("utf16le",_e);if(xe){var Ne=xe.charCodeAt(xe.length-1);if(Ne>=55296&&Ne<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=he[he.length-2],this.lastChar[1]=he[he.length-1],xe.slice(0,-1)}return xe}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=he[he.length-1],he.toString("utf16le",_e,he.length-1)}function oe(he){var _e=he&&he.length?this.write(he):"";if(this.lastNeed){var xe=this.lastTotal-this.lastNeed;return _e+this.lastChar.toString("utf16le",0,xe)}return _e}function re(he,_e){var xe=(he.length-_e)%3;return xe===0?he.toString("base64",_e):(this.lastNeed=3-xe,this.lastTotal=3,xe===1?this.lastChar[0]=he[he.length-1]:(this.lastChar[0]=he[he.length-2],this.lastChar[1]=he[he.length-1]),he.toString("base64",_e,he.length-xe))}function ue(he){var _e=he&&he.length?this.write(he):"";return this.lastNeed?_e+this.lastChar.toString("base64",0,3-this.lastNeed):_e}function le(he){return he.toString(this.encoding)}function de(he){return he&&he.length?this.write(he):""}return string_decoder}var internal,hasRequiredInternal;function requireInternal(){if(hasRequiredInternal)return internal;hasRequiredInternal=1;var e=safer_1.Buffer;internal={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:n};function n(L,z){this.enc=L.encodingName,this.bomAware=L.bomAware,this.enc==="base64"?this.encoder=k:this.enc==="cesu8"&&(this.enc="utf8",this.encoder=$,e.from("eda0bdedb2a9","hex").toString()!==""&&(this.decoder=V,this.defaultCharUnicode=z.defaultCharUnicode))}n.prototype.encoder=y,n.prototype.decoder=g;var r=requireString_decoder().StringDecoder;r.prototype.end||(r.prototype.end=function(){});function g(L,z){this.decoder=new r(z.enc)}g.prototype.write=function(L){return e.isBuffer(L)||(L=e.from(L)),this.decoder.write(L)},g.prototype.end=function(){return this.decoder.end()};function y(L,z){this.enc=z.enc}y.prototype.write=function(L){return e.from(L,this.enc)},y.prototype.end=function(){};function k(L,z){this.prevStr=""}k.prototype.write=function(L){L=this.prevStr+L;var z=L.length-L.length%4;return this.prevStr=L.slice(z),L=L.slice(0,z),e.from(L,"base64")},k.prototype.end=function(){return e.from(this.prevStr,"base64")};function $(L,z){}$.prototype.write=function(L){for(var z=e.alloc(L.length*3),j=0,ae=0;ae<L.length;ae++){var oe=L.charCodeAt(ae);oe<128?z[j++]=oe:oe<2048?(z[j++]=192+(oe>>>6),z[j++]=128+(oe&63)):(z[j++]=224+(oe>>>12),z[j++]=128+(oe>>>6&63),z[j++]=128+(oe&63))}return z.slice(0,j)},$.prototype.end=function(){};function V(L,z){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=z.defaultCharUnicode}return V.prototype.write=function(L){for(var z=this.acc,j=this.contBytes,ae=this.accBytes,oe="",re=0;re<L.length;re++){var ue=L[re];(ue&192)!==128?(j>0&&(oe+=this.defaultCharUnicode,j=0),ue<128?oe+=String.fromCharCode(ue):ue<224?(z=ue&31,j=1,ae=1):ue<240?(z=ue&15,j=2,ae=1):oe+=this.defaultCharUnicode):j>0?(z=z<<6|ue&63,j--,ae++,j===0&&(ae===2&&z<128&&z>0?oe+=this.defaultCharUnicode:ae===3&&z<2048?oe+=this.defaultCharUnicode:oe+=String.fromCharCode(z))):oe+=this.defaultCharUnicode}return this.acc=z,this.contBytes=j,this.accBytes=ae,oe},V.prototype.end=function(){var L=0;return this.contBytes>0&&(L+=this.defaultCharUnicode),L},internal}var utf32={},hasRequiredUtf32;function requireUtf32(){if(hasRequiredUtf32)return utf32;hasRequiredUtf32=1;var e=safer_1.Buffer;utf32._utf32=n;function n(z,j){this.iconv=j,this.bomAware=!0,this.isLE=z.isLE}utf32.utf32le={type:"_utf32",isLE:!0},utf32.utf32be={type:"_utf32",isLE:!1},utf32.ucs4le="utf32le",utf32.ucs4be="utf32be",n.prototype.encoder=r,n.prototype.decoder=g;function r(z,j){this.isLE=j.isLE,this.highSurrogate=0}r.prototype.write=function(z){for(var j=e.from(z,"ucs2"),ae=e.alloc(j.length*2),oe=this.isLE?ae.writeUInt32LE:ae.writeUInt32BE,re=0,ue=0;ue<j.length;ue+=2){var le=j.readUInt16LE(ue),de=55296<=le&&le<56320,he=56320<=le&&le<57344;if(this.highSurrogate)if(de||!he)oe.call(ae,this.highSurrogate,re),re+=4;else{var _e=(this.highSurrogate-55296<<10|le-56320)+65536;oe.call(ae,_e,re),re+=4,this.highSurrogate=0;continue}de?this.highSurrogate=le:(oe.call(ae,le,re),re+=4,this.highSurrogate=0)}return re<ae.length&&(ae=ae.slice(0,re)),ae},r.prototype.end=function(){if(this.highSurrogate){var z=e.alloc(4);return this.isLE?z.writeUInt32LE(this.highSurrogate,0):z.writeUInt32BE(this.highSurrogate,0),this.highSurrogate=0,z}};function g(z,j){this.isLE=j.isLE,this.badChar=j.iconv.defaultCharUnicode.charCodeAt(0),this.overflow=[]}g.prototype.write=function(z){if(z.length===0)return"";var j=0,ae=0,oe=e.alloc(z.length+4),re=0,ue=this.isLE,le=this.overflow,de=this.badChar;if(le.length>0){for(;j<z.length&&le.length<4;j++)le.push(z[j]);le.length===4&&(ue?ae=le[j]|le[j+1]<<8|le[j+2]<<16|le[j+3]<<24:ae=le[j+3]|le[j+2]<<8|le[j+1]<<16|le[j]<<24,le.length=0,re=y(oe,re,ae,de))}for(;j<z.length-3;j+=4)ue?ae=z[j]|z[j+1]<<8|z[j+2]<<16|z[j+3]<<24:ae=z[j+3]|z[j+2]<<8|z[j+1]<<16|z[j]<<24,re=y(oe,re,ae,de);for(;j<z.length;j++)le.push(z[j]);return oe.slice(0,re).toString("ucs2")};function y(z,j,ae,oe){if((ae<0||ae>1114111)&&(ae=oe),ae>=65536){ae-=65536;var re=55296|ae>>10;z[j++]=re&255,z[j++]=re>>8;var ae=56320|ae&1023}return z[j++]=ae&255,z[j++]=ae>>8,j}g.prototype.end=function(){this.overflow.length=0},utf32.utf32=k,utf32.ucs4="utf32";function k(z,j){this.iconv=j}k.prototype.encoder=$,k.prototype.decoder=V;function $(z,j){z=z||{},z.addBOM===void 0&&(z.addBOM=!0),this.encoder=j.iconv.getEncoder(z.defaultEncoding||"utf-32le",z)}$.prototype.write=function(z){return this.encoder.write(z)},$.prototype.end=function(){return this.encoder.end()};function V(z,j){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=z||{},this.iconv=j.iconv}V.prototype.write=function(z){if(!this.decoder){if(this.initialBufs.push(z),this.initialBufsLen+=z.length,this.initialBufsLen<32)return"";var j=L(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(j,this.options);for(var ae="",oe=0;oe<this.initialBufs.length;oe++)ae+=this.decoder.write(this.initialBufs[oe]);return this.initialBufs.length=this.initialBufsLen=0,ae}return this.decoder.write(z)},V.prototype.end=function(){if(!this.decoder){var z=L(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(z,this.options);for(var j="",ae=0;ae<this.initialBufs.length;ae++)j+=this.decoder.write(this.initialBufs[ae]);var oe=this.decoder.end();return oe&&(j+=oe),this.initialBufs.length=this.initialBufsLen=0,j}return this.decoder.end()};function L(z,j){var ae=[],oe=0,re=0,ue=0,le=0,de=0;e:for(var he=0;he<z.length;he++)for(var _e=z[he],xe=0;xe<_e.length;xe++)if(ae.push(_e[xe]),ae.length===4){if(oe===0){if(ae[0]===255&&ae[1]===254&&ae[2]===0&&ae[3]===0)return"utf-32le";if(ae[0]===0&&ae[1]===0&&ae[2]===254&&ae[3]===255)return"utf-32be"}if((ae[0]!==0||ae[1]>16)&&ue++,(ae[3]!==0||ae[2]>16)&&re++,ae[0]===0&&ae[1]===0&&(ae[2]!==0||ae[3]!==0)&&de++,(ae[0]!==0||ae[1]!==0)&&ae[2]===0&&ae[3]===0&&le++,ae.length=0,oe++,oe>=100)break e}return de-ue>le-re?"utf-32be":de-ue<le-re?"utf-32le":j||"utf-32le"}return utf32}var utf16={},hasRequiredUtf16;function requireUtf16(){if(hasRequiredUtf16)return utf16;hasRequiredUtf16=1;var e=safer_1.Buffer;utf16.utf16be=n;function n(){}n.prototype.encoder=r,n.prototype.decoder=g,n.prototype.bomAware=!0;function r(){}r.prototype.write=function(L){for(var z=e.from(L,"ucs2"),j=0;j<z.length;j+=2){var ae=z[j];z[j]=z[j+1],z[j+1]=ae}return z},r.prototype.end=function(){};function g(){this.overflowByte=-1}g.prototype.write=function(L){if(L.length==0)return"";var z=e.alloc(L.length+1),j=0,ae=0;for(this.overflowByte!==-1&&(z[0]=L[0],z[1]=this.overflowByte,j=1,ae=2);j<L.length-1;j+=2,ae+=2)z[ae]=L[j+1],z[ae+1]=L[j];return this.overflowByte=j==L.length-1?L[L.length-1]:-1,z.slice(0,ae).toString("ucs2")},g.prototype.end=function(){this.overflowByte=-1},utf16.utf16=y;function y(L,z){this.iconv=z}y.prototype.encoder=k,y.prototype.decoder=$;function k(L,z){L=L||{},L.addBOM===void 0&&(L.addBOM=!0),this.encoder=z.iconv.getEncoder("utf-16le",L)}k.prototype.write=function(L){return this.encoder.write(L)},k.prototype.end=function(){return this.encoder.end()};function $(L,z){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=L||{},this.iconv=z.iconv}$.prototype.write=function(L){if(!this.decoder){if(this.initialBufs.push(L),this.initialBufsLen+=L.length,this.initialBufsLen<16)return"";var z=V(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(z,this.options);for(var j="",ae=0;ae<this.initialBufs.length;ae++)j+=this.decoder.write(this.initialBufs[ae]);return this.initialBufs.length=this.initialBufsLen=0,j}return this.decoder.write(L)},$.prototype.end=function(){if(!this.decoder){var L=V(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(L,this.options);for(var z="",j=0;j<this.initialBufs.length;j++)z+=this.decoder.write(this.initialBufs[j]);var ae=this.decoder.end();return ae&&(z+=ae),this.initialBufs.length=this.initialBufsLen=0,z}return this.decoder.end()};function V(L,z){var j=[],ae=0,oe=0,re=0;e:for(var ue=0;ue<L.length;ue++)for(var le=L[ue],de=0;de<le.length;de++)if(j.push(le[de]),j.length===2){if(ae===0){if(j[0]===255&&j[1]===254)return"utf-16le";if(j[0]===254&&j[1]===255)return"utf-16be"}if(j[0]===0&&j[1]!==0&&re++,j[0]!==0&&j[1]===0&&oe++,j.length=0,ae++,ae>=100)break e}return re>oe?"utf-16be":re<oe?"utf-16le":z||"utf-16le"}return utf16}var utf7={},hasRequiredUtf7;function requireUtf7(){if(hasRequiredUtf7)return utf7;hasRequiredUtf7=1;var e=safer_1.Buffer;utf7.utf7=n,utf7.unicode11utf7="utf7";function n(le,de){this.iconv=de}n.prototype.encoder=g,n.prototype.decoder=y,n.prototype.bomAware=!0;var r=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function g(le,de){this.iconv=de.iconv}g.prototype.write=function(le){return e.from(le.replace(r,function(de){return"+"+(de==="+"?"":this.iconv.encode(de,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},g.prototype.end=function(){};function y(le,de){this.iconv=de.iconv,this.inBase64=!1,this.base64Accum=""}for(var k=/[A-Za-z0-9\/+]/,$=[],V=0;V<256;V++)$[V]=k.test(String.fromCharCode(V));var L=43,z=45,j=38;y.prototype.write=function(le){for(var de="",he=0,_e=this.inBase64,xe=this.base64Accum,Ne=0;Ne<le.length;Ne++)if(!_e)le[Ne]==L&&(de+=this.iconv.decode(le.slice(he,Ne),"ascii"),he=Ne+1,_e=!0);else if(!$[le[Ne]]){if(Ne==he&&le[Ne]==z)de+="+";else{var $e=xe+this.iconv.decode(le.slice(he,Ne),"ascii");de+=this.iconv.decode(e.from($e,"base64"),"utf16-be")}le[Ne]!=z&&Ne--,he=Ne+1,_e=!1,xe=""}if(!_e)de+=this.iconv.decode(le.slice(he),"ascii");else{var $e=xe+this.iconv.decode(le.slice(he),"ascii"),Ce=$e.length-$e.length%8;xe=$e.slice(Ce),$e=$e.slice(0,Ce),de+=this.iconv.decode(e.from($e,"base64"),"utf16-be")}return this.inBase64=_e,this.base64Accum=xe,de},y.prototype.end=function(){var le="";return this.inBase64&&this.base64Accum.length>0&&(le=this.iconv.decode(e.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",le},utf7.utf7imap=ae;function ae(le,de){this.iconv=de}ae.prototype.encoder=oe,ae.prototype.decoder=re,ae.prototype.bomAware=!0;function oe(le,de){this.iconv=de.iconv,this.inBase64=!1,this.base64Accum=e.alloc(6),this.base64AccumIdx=0}oe.prototype.write=function(le){for(var de=this.inBase64,he=this.base64Accum,_e=this.base64AccumIdx,xe=e.alloc(le.length*5+10),Ne=0,$e=0;$e<le.length;$e++){var Ce=le.charCodeAt($e);32<=Ce&&Ce<=126?(de&&(_e>0&&(Ne+=xe.write(he.slice(0,_e).toString("base64").replace(/\//g,",").replace(/=+$/,""),Ne),_e=0),xe[Ne++]=z,de=!1),de||(xe[Ne++]=Ce,Ce===j&&(xe[Ne++]=z))):(de||(xe[Ne++]=j,de=!0),de&&(he[_e++]=Ce>>8,he[_e++]=Ce&255,_e==he.length&&(Ne+=xe.write(he.toString("base64").replace(/\//g,","),Ne),_e=0)))}return this.inBase64=de,this.base64AccumIdx=_e,xe.slice(0,Ne)},oe.prototype.end=function(){var le=e.alloc(10),de=0;return this.inBase64&&(this.base64AccumIdx>0&&(de+=le.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),de),this.base64AccumIdx=0),le[de++]=z,this.inBase64=!1),le.slice(0,de)};function re(le,de){this.iconv=de.iconv,this.inBase64=!1,this.base64Accum=""}var ue=$.slice();return ue[44]=!0,re.prototype.write=function(le){for(var de="",he=0,_e=this.inBase64,xe=this.base64Accum,Ne=0;Ne<le.length;Ne++)if(!_e)le[Ne]==j&&(de+=this.iconv.decode(le.slice(he,Ne),"ascii"),he=Ne+1,_e=!0);else if(!ue[le[Ne]]){if(Ne==he&&le[Ne]==z)de+="&";else{var $e=xe+this.iconv.decode(le.slice(he,Ne),"ascii").replace(/,/g,"/");de+=this.iconv.decode(e.from($e,"base64"),"utf16-be")}le[Ne]!=z&&Ne--,he=Ne+1,_e=!1,xe=""}if(!_e)de+=this.iconv.decode(le.slice(he),"ascii");else{var $e=xe+this.iconv.decode(le.slice(he),"ascii").replace(/,/g,"/"),Ce=$e.length-$e.length%8;xe=$e.slice(Ce),$e=$e.slice(0,Ce),de+=this.iconv.decode(e.from($e,"base64"),"utf16-be")}return this.inBase64=_e,this.base64Accum=xe,de},re.prototype.end=function(){var le="";return this.inBase64&&this.base64Accum.length>0&&(le=this.iconv.decode(e.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",le},utf7}var sbcsCodec={},hasRequiredSbcsCodec;function requireSbcsCodec(){if(hasRequiredSbcsCodec)return sbcsCodec;hasRequiredSbcsCodec=1;var e=safer_1.Buffer;sbcsCodec._sbcs=n;function n(y,k){if(!y)throw new Error("SBCS codec is called without the data.");if(!y.chars||y.chars.length!==128&&y.chars.length!==256)throw new Error("Encoding '"+y.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(y.chars.length===128){for(var $="",V=0;V<128;V++)$+=String.fromCharCode(V);y.chars=$+y.chars}this.decodeBuf=e.from(y.chars,"ucs2");for(var L=e.alloc(65536,k.defaultCharSingleByte.charCodeAt(0)),V=0;V<y.chars.length;V++)L[y.chars.charCodeAt(V)]=V;this.encodeBuf=L}n.prototype.encoder=r,n.prototype.decoder=g;function r(y,k){this.encodeBuf=k.encodeBuf}r.prototype.write=function(y){for(var k=e.alloc(y.length),$=0;$<y.length;$++)k[$]=this.encodeBuf[y.charCodeAt($)];return k},r.prototype.end=function(){};function g(y,k){this.decodeBuf=k.decodeBuf}return g.prototype.write=function(y){for(var k=this.decodeBuf,$=e.alloc(y.length*2),V=0,L=0,z=0;z<y.length;z++)V=y[z]*2,L=z*2,$[L]=k[V],$[L+1]=k[V+1];return $.toString("ucs2")},g.prototype.end=function(){},sbcsCodec}var sbcsData,hasRequiredSbcsData;function requireSbcsData(){return hasRequiredSbcsData||(hasRequiredSbcsData=1,sbcsData={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},mik:{type:"_sbcs",chars:""},cp720:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",1e4:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}),sbcsData}var sbcsDataGenerated,hasRequiredSbcsDataGenerated;function requireSbcsDataGenerated(){return hasRequiredSbcsDataGenerated||(hasRequiredSbcsDataGenerated=1,sbcsDataGenerated={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\uFEFF"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},iso646cn:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}`},iso646jp:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_\`abcdefghijklmnopqrstuvwxyz{|}`},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}),sbcsDataGenerated}var dbcsCodec={},hasRequiredDbcsCodec;function requireDbcsCodec(){if(hasRequiredDbcsCodec)return dbcsCodec;hasRequiredDbcsCodec=1;var e=safer_1.Buffer;dbcsCodec._dbcs=L;for(var n=-1,r=-2,g=-10,y=-1e3,k=new Array(256),$=-1,V=0;V<256;V++)k[V]=n;function L(oe,re){if(this.encodingName=oe.encodingName,!oe)throw new Error("DBCS codec is called without the data.");if(!oe.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var ue=oe.table();this.decodeTables=[],this.decodeTables[0]=k.slice(0),this.decodeTableSeq=[];for(var le=0;le<ue.length;le++)this._addDecodeChunk(ue[le]);if(typeof oe.gb18030=="function"){this.gb18030=oe.gb18030();var de=this.decodeTables.length;this.decodeTables.push(k.slice(0));var he=this.decodeTables.length;this.decodeTables.push(k.slice(0));for(var _e=this.decodeTables[0],le=129;le<=254;le++)for(var xe=this.decodeTables[y-_e[le]],Ne=48;Ne<=57;Ne++){if(xe[Ne]===n)xe[Ne]=y-de;else if(xe[Ne]>y)throw new Error("gb18030 decode tables conflict at byte 2");for(var $e=this.decodeTables[y-xe[Ne]],Ce=129;Ce<=254;Ce++){if($e[Ce]===n)$e[Ce]=y-he;else{if($e[Ce]===y-he)continue;if($e[Ce]>y)throw new Error("gb18030 decode tables conflict at byte 3")}for(var Ie=this.decodeTables[y-$e[Ce]],ze=48;ze<=57;ze++)Ie[ze]===n&&(Ie[ze]=r)}}}this.defaultCharUnicode=re.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var Ue={};if(oe.encodeSkipVals)for(var le=0;le<oe.encodeSkipVals.length;le++){var Pt=oe.encodeSkipVals[le];if(typeof Pt=="number")Ue[Pt]=!0;else for(var Ne=Pt.from;Ne<=Pt.to;Ne++)Ue[Ne]=!0}if(this._fillEncodeTable(0,0,Ue),oe.encodeAdd)for(var hn in oe.encodeAdd)Object.prototype.hasOwnProperty.call(oe.encodeAdd,hn)&&this._setEncodeChar(hn.charCodeAt(0),oe.encodeAdd[hn]);this.defCharSB=this.encodeTable[0][re.defaultCharSingleByte.charCodeAt(0)],this.defCharSB===n&&(this.defCharSB=this.encodeTable[0]["?"]),this.defCharSB===n&&(this.defCharSB=63)}L.prototype.encoder=z,L.prototype.decoder=j,L.prototype._getDecodeTrieNode=function(oe){for(var re=[];oe>0;oe>>>=8)re.push(oe&255);re.length==0&&re.push(0);for(var ue=this.decodeTables[0],le=re.length-1;le>0;le--){var de=ue[re[le]];if(de==n)ue[re[le]]=y-this.decodeTables.length,this.decodeTables.push(ue=k.slice(0));else if(de<=y)ue=this.decodeTables[y-de];else throw new Error("Overwrite byte in "+this.encodingName+", addr: "+oe.toString(16))}return ue},L.prototype._addDecodeChunk=function(oe){var re=parseInt(oe[0],16),ue=this._getDecodeTrieNode(re);re=re&255;for(var le=1;le<oe.length;le++){var de=oe[le];if(typeof de=="string")for(var he=0;he<de.length;){var _e=de.charCodeAt(he++);if(55296<=_e&&_e<56320){var xe=de.charCodeAt(he++);if(56320<=xe&&xe<57344)ue[re++]=65536+(_e-55296)*1024+(xe-56320);else throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+oe[0])}else if(4080<_e&&_e<=4095){for(var Ne=4095-_e+2,$e=[],Ce=0;Ce<Ne;Ce++)$e.push(de.charCodeAt(he++));ue[re++]=g-this.decodeTableSeq.length,this.decodeTableSeq.push($e)}else ue[re++]=_e}else if(typeof de=="number")for(var Ie=ue[re-1]+1,he=0;he<de;he++)ue[re++]=Ie++;else throw new Error("Incorrect type '"+typeof de+"' given in "+this.encodingName+" at chunk "+oe[0])}if(re>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+oe[0]+": too long"+re)},L.prototype._getEncodeBucket=function(oe){var re=oe>>8;return this.encodeTable[re]===void 0&&(this.encodeTable[re]=k.slice(0)),this.encodeTable[re]},L.prototype._setEncodeChar=function(oe,re){var ue=this._getEncodeBucket(oe),le=oe&255;ue[le]<=g?this.encodeTableSeq[g-ue[le]][$]=re:ue[le]==n&&(ue[le]=re)},L.prototype._setEncodeSequence=function(oe,re){var ue=oe[0],le=this._getEncodeBucket(ue),de=ue&255,he;le[de]<=g?he=this.encodeTableSeq[g-le[de]]:(he={},le[de]!==n&&(he[$]=le[de]),le[de]=g-this.encodeTableSeq.length,this.encodeTableSeq.push(he));for(var _e=1;_e<oe.length-1;_e++){var xe=he[ue];typeof xe=="object"?he=xe:(he=he[ue]={},xe!==void 0&&(he[$]=xe))}ue=oe[oe.length-1],he[ue]=re},L.prototype._fillEncodeTable=function(oe,re,ue){for(var le=this.decodeTables[oe],de=!1,he={},_e=0;_e<256;_e++){var xe=le[_e],Ne=re+_e;if(!ue[Ne])if(xe>=0)this._setEncodeChar(xe,Ne),de=!0;else if(xe<=y){var $e=y-xe;if(!he[$e]){var Ce=Ne<<8>>>0;this._fillEncodeTable($e,Ce,ue)?de=!0:he[$e]=!0}}else xe<=g&&(this._setEncodeSequence(this.decodeTableSeq[g-xe],Ne),de=!0)}return de};function z(oe,re){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=re.encodeTable,this.encodeTableSeq=re.encodeTableSeq,this.defaultCharSingleByte=re.defCharSB,this.gb18030=re.gb18030}z.prototype.write=function(oe){for(var re=e.alloc(oe.length*(this.gb18030?4:3)),ue=this.leadSurrogate,le=this.seqObj,de=-1,he=0,_e=0;;){if(de===-1){if(he==oe.length)break;var xe=oe.charCodeAt(he++)}else{var xe=de;de=-1}if(55296<=xe&&xe<57344)if(xe<56320)if(ue===-1){ue=xe;continue}else ue=xe,xe=n;else ue!==-1?(xe=65536+(ue-55296)*1024+(xe-56320),ue=-1):xe=n;else ue!==-1&&(de=xe,xe=n,ue=-1);var Ne=n;if(le!==void 0&&xe!=n){var $e=le[xe];if(typeof $e=="object"){le=$e;continue}else typeof $e=="number"?Ne=$e:$e==null&&($e=le[$],$e!==void 0&&(Ne=$e,de=xe));le=void 0}else if(xe>=0){var Ce=this.encodeTable[xe>>8];if(Ce!==void 0&&(Ne=Ce[xe&255]),Ne<=g){le=this.encodeTableSeq[g-Ne];continue}if(Ne==n&&this.gb18030){var Ie=ae(this.gb18030.uChars,xe);if(Ie!=-1){var Ne=this.gb18030.gbChars[Ie]+(xe-this.gb18030.uChars[Ie]);re[_e++]=129+Math.floor(Ne/12600),Ne=Ne%12600,re[_e++]=48+Math.floor(Ne/1260),Ne=Ne%1260,re[_e++]=129+Math.floor(Ne/10),Ne=Ne%10,re[_e++]=48+Ne;continue}}}Ne===n&&(Ne=this.defaultCharSingleByte),Ne<256?re[_e++]=Ne:Ne<65536?(re[_e++]=Ne>>8,re[_e++]=Ne&255):Ne<16777216?(re[_e++]=Ne>>16,re[_e++]=Ne>>8&255,re[_e++]=Ne&255):(re[_e++]=Ne>>>24,re[_e++]=Ne>>>16&255,re[_e++]=Ne>>>8&255,re[_e++]=Ne&255)}return this.seqObj=le,this.leadSurrogate=ue,re.slice(0,_e)},z.prototype.end=function(){if(!(this.leadSurrogate===-1&&this.seqObj===void 0)){var oe=e.alloc(10),re=0;if(this.seqObj){var ue=this.seqObj[$];ue!==void 0&&(ue<256?oe[re++]=ue:(oe[re++]=ue>>8,oe[re++]=ue&255)),this.seqObj=void 0}return this.leadSurrogate!==-1&&(oe[re++]=this.defaultCharSingleByte,this.leadSurrogate=-1),oe.slice(0,re)}},z.prototype.findIdx=ae;function j(oe,re){this.nodeIdx=0,this.prevBytes=[],this.decodeTables=re.decodeTables,this.decodeTableSeq=re.decodeTableSeq,this.defaultCharUnicode=re.defaultCharUnicode,this.gb18030=re.gb18030}j.prototype.write=function(oe){for(var re=e.alloc(oe.length*2),ue=this.nodeIdx,le=this.prevBytes,de=this.prevBytes.length,he=-this.prevBytes.length,_e,xe=0,Ne=0;xe<oe.length;xe++){var $e=xe>=0?oe[xe]:le[xe+de],_e=this.decodeTables[ue][$e];if(!(_e>=0))if(_e===n)_e=this.defaultCharUnicode.charCodeAt(0),xe=he;else if(_e===r){if(xe>=3)var Ce=(oe[xe-3]-129)*12600+(oe[xe-2]-48)*1260+(oe[xe-1]-129)*10+($e-48);else var Ce=(le[xe-3+de]-129)*12600+((xe-2>=0?oe[xe-2]:le[xe-2+de])-48)*1260+((xe-1>=0?oe[xe-1]:le[xe-1+de])-129)*10+($e-48);var Ie=ae(this.gb18030.gbChars,Ce);_e=this.gb18030.uChars[Ie]+Ce-this.gb18030.gbChars[Ie]}else if(_e<=y){ue=y-_e;continue}else if(_e<=g){for(var ze=this.decodeTableSeq[g-_e],Ue=0;Ue<ze.length-1;Ue++)_e=ze[Ue],re[Ne++]=_e&255,re[Ne++]=_e>>8;_e=ze[ze.length-1]}else throw new Error("iconv-lite internal error: invalid decoding table value "+_e+" at "+ue+"/"+$e);if(_e>=65536){_e-=65536;var Pt=55296|_e>>10;re[Ne++]=Pt&255,re[Ne++]=Pt>>8,_e=56320|_e&1023}re[Ne++]=_e&255,re[Ne++]=_e>>8,ue=0,he=xe+1}return this.nodeIdx=ue,this.prevBytes=he>=0?Array.prototype.slice.call(oe,he):le.slice(he+de).concat(Array.prototype.slice.call(oe)),re.slice(0,Ne).toString("ucs2")},j.prototype.end=function(){for(var oe="";this.prevBytes.length>0;){oe+=this.defaultCharUnicode;var re=this.prevBytes.slice(1);this.prevBytes=[],this.nodeIdx=0,re.length>0&&(oe+=this.write(re))}return this.prevBytes=[],this.nodeIdx=0,oe};function ae(oe,re){if(oe[0]>re)return-1;for(var ue=0,le=oe.length;ue<le-1;){var de=ue+(le-ue+1>>1);oe[de]<=re?ue=de:le=de}return ue}return dbcsCodec}const require$$0=[["0","\0",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]],require$$1=[["0","\0",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]],require$$2$1=[["0","\0",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]],require$$3=[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93],["8135f437",""]],uChars=[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],gbChars=[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189e3],require$$4={uChars,gbChars},require$$5=[["0","\0",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]],require$$6=[["0","\0",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]],require$$7=[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]];var dbcsData,hasRequiredDbcsData;function requireDbcsData(){return hasRequiredDbcsData||(hasRequiredDbcsData=1,dbcsData={shiftjis:{type:"_dbcs",table:function(){return require$$0},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return require$$1},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return require$$2$1}},gbk:{type:"_dbcs",table:function(){return require$$2$1.concat(require$$3)}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return require$$2$1.concat(require$$3)},gb18030:function(){return require$$4},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return require$$5}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return require$$6}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return require$$6.concat(require$$7)},encodeSkipVals:[36457,36463,36478,36523,36532,36557,36560,36695,36713,36718,36811,36862,36973,36986,37060,37084,37105,37311,37551,37552,37553,37554,37585,37959,38090,38361,38652,39285,39798,39800,39803,39878,39902,39916,39926,40002,40019,40034,40040,40043,40055,40124,40125,40144,40279,40282,40388,40431,40443,40617,40687,40701,40800,40907,41079,41180,41183,36812,37576,38468,38637,41636,41637,41639,41638,41676,41678]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}),dbcsData}var hasRequiredEncodings;function requireEncodings(){return hasRequiredEncodings||(hasRequiredEncodings=1,function(e){for(var n=[requireInternal(),requireUtf32(),requireUtf16(),requireUtf7(),requireSbcsCodec(),requireSbcsData(),requireSbcsDataGenerated(),requireDbcsCodec(),requireDbcsData()],r=0;r<n.length;r++){var g=n[r];for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(e[y]=g[y])}}(encodings)),encodings}var streams,hasRequiredStreams;function requireStreams(){if(hasRequiredStreams)return streams;hasRequiredStreams=1;var e=safer_1.Buffer;return streams=function(n){var r=n.Transform;function g(k,$){this.conv=k,$=$||{},$.decodeStrings=!1,r.call(this,$)}g.prototype=Object.create(r.prototype,{constructor:{value:g}}),g.prototype._transform=function(k,$,V){if(typeof k!="string")return V(new Error("Iconv encoding stream needs strings as its input."));try{var L=this.conv.write(k);L&&L.length&&this.push(L),V()}catch(z){V(z)}},g.prototype._flush=function(k){try{var $=this.conv.end();$&&$.length&&this.push($),k()}catch(V){k(V)}},g.prototype.collect=function(k){var $=[];return this.on("error",k),this.on("data",function(V){$.push(V)}),this.on("end",function(){k(null,e.concat($))}),this};function y(k,$){this.conv=k,$=$||{},$.encoding=this.encoding="utf8",r.call(this,$)}return y.prototype=Object.create(r.prototype,{constructor:{value:y}}),y.prototype._transform=function(k,$,V){if(!e.isBuffer(k)&&!(k instanceof Uint8Array))return V(new Error("Iconv decoding stream needs buffers as its input."));try{var L=this.conv.write(k);L&&L.length&&this.push(L,this.encoding),V()}catch(z){V(z)}},y.prototype._flush=function(k){try{var $=this.conv.end();$&&$.length&&this.push($,this.encoding),k()}catch(V){k(V)}},y.prototype.collect=function(k){var $="";return this.on("error",k),this.on("data",function(V){$+=V}),this.on("end",function(){k(null,$)}),this},{IconvLiteEncoderStream:g,IconvLiteDecoderStream:y}},streams}const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(__viteBrowserExternal$1);(function(e){var n=safer_1.Buffer,r=bomHandling,g=e.exports;g.encodings=null,g.defaultCharUnicode="",g.defaultCharSingleByte="?",g.encode=function($,V,L){$=""+($||"");var z=g.getEncoder(V,L),j=z.write($),ae=z.end();return ae&&ae.length>0?n.concat([j,ae]):j},g.decode=function($,V,L){typeof $=="string"&&(g.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),g.skipDecodeWarning=!0),$=n.from(""+($||""),"binary"));var z=g.getDecoder(V,L),j=z.write($),ae=z.end();return ae?j+ae:j},g.encodingExists=function($){try{return g.getCodec($),!0}catch{return!1}},g.toEncoding=g.encode,g.fromEncoding=g.decode,g._codecDataCache={},g.getCodec=function($){g.encodings||(g.encodings=requireEncodings());for(var V=g._canonicalizeEncoding($),L={};;){var z=g._codecDataCache[V];if(z)return z;var j=g.encodings[V];switch(typeof j){case"string":V=j;break;case"object":for(var ae in j)L[ae]=j[ae];L.encodingName||(L.encodingName=V),V=j.type;break;case"function":return L.encodingName||(L.encodingName=V),z=new j(L,g),g._codecDataCache[L.encodingName]=z,z;default:throw new Error("Encoding not recognized: '"+$+"' (searched as: '"+V+"')")}}},g._canonicalizeEncoding=function(k){return(""+k).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},g.getEncoder=function($,V){var L=g.getCodec($),z=new L.encoder(V,L);return L.bomAware&&V&&V.addBOM&&(z=new r.PrependBOM(z,V)),z},g.getDecoder=function($,V){var L=g.getCodec($),z=new L.decoder(V,L);return L.bomAware&&!(V&&V.stripBOM===!1)&&(z=new r.StripBOM(z,V)),z},g.enableStreamingAPI=function($){if(!g.supportsStreams){var V=requireStreams()($);g.IconvLiteEncoderStream=V.IconvLiteEncoderStream,g.IconvLiteDecoderStream=V.IconvLiteDecoderStream,g.encodeStream=function(z,j){return new g.IconvLiteEncoderStream(g.getEncoder(z,j),j)},g.decodeStream=function(z,j){return new g.IconvLiteDecoderStream(g.getDecoder(z,j),j)},g.supportsStreams=!0}};var y;try{y=require$$2}catch{}y&&y.Transform?g.enableStreamingAPI(y):g.encodeStream=g.decodeStream=function(){throw new Error("iconv-lite Streaming API is not enabled. Use iconv.enableStreamingAPI(require('stream')); to enable it.")}})(lib);var libExports=lib.exports;const iconv=getDefaultExportFromCjs(libExports),types$6={version:"uint16",count:"uint16",storageOffset:"Offset16",langTagCount:"uint16",length:"uint16",langTagOffset:"Offset16",platformID:"uint16",encodingID:"uint16",languageID:"uint16",nameID:"uint16",stringOffset:"Offset16",stringPool:"raw"},parse$e=(e,n,r)=>{start(e,n);const g=decoder[types$6.version](),y=decoder[types$6.version](),k=decoder[types$6.storageOffset](),$=[];for(let L=0;L<y;L++){const z=decoder[types$6.platformID](),j=decoder[types$6.encodingID](),ae=decoder[types$6.languageID](),oe=decoder[types$6.nameID](),re=decoder[types$6.length](),ue=decoder[types$6.stringOffset](),le=getStorageString(e,ue,re);$.push({platformID:z,encodingID:j,languageID:ae,nameID:oe,length:re,stringOffset:ue,str:le})}const V={version:g,count:y,storageOffset:k,nameRecord:$};if(g>=1&&(V.langTagCount=decoder[types$6.version](),V.langTagRecord=[],V.langTagCount))for(let L=0;L<V.langTagCount;L++){const z=decoder[types$6.length](),j=decoder[types$6.langTagOffset](),ae=getStorageString(e,j,z);V.langTagRecord.push({length:z,langTagOffset:j,str:ae})}return end$1(),V},nameTableNames=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],macLanguages={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},windowsLanguages={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},reverseDict=e=>{const n={};for(let r in e)n[e[r]]=parseInt(r);return n},findSubArray=(e,n)=>{const r=e.length,g=n.length-r+1;e:for(let y=0;y<g;y++)for(;y<g;y++){for(let k=0;k<r;k++)if(n[y+k]!==e[k])continue e;return y}return-1},addStringToPool=(e,n)=>{let r=findSubArray(e,n);if(r<0){r=n.length;let g=0;const y=e.length;for(;g<y;++g)n.push(e[g])}return r},addAxisNamesToTable=(e,n)=>{if(!e||e.length===0)return n;let r=255;for(const g of n)g.nameID>r&&(r=g.nameID);for(const g of e){const y=g.tag||g.axisTag||"unkn";let k=g.name;(!k||k.trim()==="")&&(k={wght:"Weight",wdth:"Width",slnt:"Slant",ital:"Italic",opsz:"Optical Size"}[y]||y.toUpperCase(),console.warn(` Axis '${y}' has no name, using default: '${k}'`)),r++;const $=r;g.nameID=$,console.log(` Creating axis name: tag='${y}', name='${k}', nameID=${$}`),n.push({nameID:$,nameLabel:`axis_${y}`,platformID:3,encodingID:1,langID:1033,value:k,default:!0}),n.push({nameID:$,nameLabel:`axis_${y}_zh`,platformID:3,encodingID:1,langID:2052,value:k,default:!0})}return n},generatePostScriptName=(e,n)=>{const r=e.replace(/[^\x00-\x7F]/g,"").replace(/[^a-zA-Z0-9\-_]/g,"").replace(/\s/g,"").trim(),g=n.replace(/[^\x00-\x7F]/g,"").replace(/[^a-zA-Z0-9\-_]/g,"").replace(/\s/g,"").trim(),$=`${r||"Untitled"}-${g||"Regular"}`.slice(0,63);return console.log(` Generated PostScript Name: "${e}" + "${n}"  "${$}"`),$},addInstanceNamesToTable=(e,n,r)=>{if(!e||e.length===0)return n;let g=255;for(const k of n)k.nameID>g&&(g=k.nameID);let y=r;if(!y){const k=n.find($=>$.nameID===1);k&&(y=k.value)}for(const k of e){if(!k.subfamilyName)continue;g++;const $=g;k.subfamilyNameID=$,n.push({nameID:$,nameLabel:`instance_subfamily_${$}`,platformID:3,encodingID:1,langID:1033,value:k.subfamilyName,default:!0}),n.push({nameID:$,nameLabel:`instance_subfamily_${$}`,platformID:3,encodingID:1,langID:2052,value:k.subfamilyName,default:!0});let V=k.postScriptName;if(!V&&y&&(V=generatePostScriptName(y,k.subfamilyName),k.postScriptName=V),V){g++;const L=g;k.postScriptNameID=L,n.push({nameID:L,nameLabel:`instance_postscript_${L}`,platformID:3,encodingID:1,langID:1033,value:V,default:!0})}}return n},createTable2=(e,n)=>{const r=[],g=[];let y="",k=!1,$=!1;for(let L=0;L<e.length;L++){const z=e[L];z.nameID===4&&z.langID===1033?y=z.value:z.nameID===3&&z.langID===1033?k=!0:z.nameID===3&&z.langID===2052&&($=!0)}if(!$&&e.push({nameID:3,nameLabel:"uniqueID",platformID:3,encodingID:1,langID:2052,value:y,default:!0}),!k&&e.push({nameID:3,nameLabel:"uniqueID",platformID:3,encodingID:1,langID:1033,value:y,default:!0}),n&&n.axes&&addAxisNamesToTable(n.axes,e),n&&n.instances){let L="";const z=e.find(j=>j.nameID===1&&j.langID===1033);z&&(L=z.value),addInstanceNamesToTable(n.instances,e,L)}for(let L=0;L<e.length;L++){const{value:z,nameID:j,langID:ae,encodingID:oe,platformID:re}=e[L];if(re!=3)continue;let ue=encoder.utf16(z);const le=addStringToPool(ue,g);r.push({platformID:3,encodingID:oe,languageID:ae,nameID:j,length:ue.length,stringOffset:le})}r.sort(function(L,z){return L.platformID-z.platformID||L.encodingID-z.encodingID||L.languageID-z.languageID||L.nameID-z.nameID});const V={version:0,count:r.length,storageOffset:6+r.length*12,nameRecord:r,stringPool:g};return console.log("=== createTable2 Result ==="),console.log(`nameRecord.length: ${r.length}`),console.log(`storageOffset: ${V.storageOffset}`),console.log(`stringPool.length: ${g.length}`),console.log(`Expected table size: ${V.storageOffset+g.length}`),V},createTable$2=(e,n)=>{let r;const g=[],y={},k=reverseDict(nameTableNames);for(let j in e){let ae=k[j];if(ae===void 0&&(ae=j),r=parseInt(ae),isNaN(r))throw new Error('Name table entry "'+j+'" does not exist, see nameTableNames for complete list.');y[r]=e[j],g.push(r)}reverseDict(macLanguages);const $=reverseDict(windowsLanguages),V=[],L=[];for(let j=0;j<g.length;j++){r=g[j];const ae=y[r];for(let oe in ae){const re=ae[oe];encoder.utf16(re),oe==="zh"&&[...iconv.encode(re,"gbk")];let ue=$[oe];if(ue!==void 0){let le=encoder.utf16(re),de=1;const he=addStringToPool(le,L);V.push({platformID:3,encodingID:de,languageID:ue,nameID:r,length:le.length,stringOffset:he})}}}return V.sort(function(j,ae){return j.platformID-ae.platformID||j.encodingID-ae.encodingID||j.languageID-ae.languageID||j.nameID-ae.nameID}),{version:0,count:V.length,storageOffset:6+V.length*12,nameRecord:V,stringPool:L}},create$d=e=>{let n=[];console.log(`
=== Name Table Binary Generation ===`),console.log(`Input: version=${e.version}, count=${e.count}, storageOffset=${e.storageOffset}`),console.log(`nameRecord count: ${e.nameRecord?.length}`),console.log(`stringPool size: ${e.stringPool?.length}`);const r=encoder.uint16(e.version),g=encoder.uint16(e.count),y=encoder.uint16(e.storageOffset);if(r&&(n=n.concat(r)),g&&(n=n.concat(g)),y&&(n=n.concat(y)),e.nameRecord)for(let $=0;$<e.nameRecord.length;$++){const V=e.nameRecord[$],L=encoder.uint16(V.platformID),z=encoder.uint16(V.encodingID),j=encoder.uint16(V.languageID),ae=encoder.uint16(V.nameID),oe=encoder.uint16(V.length),re=encoder.uint16(V.stringOffset);L&&(n=n.concat(L)),z&&(n=n.concat(z)),j&&(n=n.concat(j)),ae&&(n=n.concat(ae)),oe&&(n=n.concat(oe)),re&&(n=n.concat(re))}if(e.version>=1&&e.langTagCount){const $=encoder.uint16(e.langTagCount);if($&&(n=n.concat($)),e.langTagRecord)for(let V=0;V<e.langTagRecord.length;V++){const L=e.langTagRecord[V],z=encoder.uint16(L.length),j=encoder.uint16(L.langTagOffset);z&&(n=n.concat(z)),j&&(n=n.concat(j))}}const k=n.length;return e.stringPool&&e.stringPool.length>0?(n=n.concat(e.stringPool),console.log(`StringPool added: ${n.length-k} bytes`)):console.log("StringPool is empty or undefined"),console.log(`
Final binary size: ${n.length} bytes`),console.log(`Expected: ${6+(e.nameRecord?.length||0)*12+(e.stringPool?.length||0)} bytes`),n.length!==6+(e.nameRecord?.length||0)*12+(e.stringPool?.length||0)?console.error(" Binary size mismatch!"):console.log(" Binary size correct"),console.log(`=====================================
`),n},nameTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$d,createTable:createTable$2,createTable2,nameTableNames,parse:parse$e},Symbol.toStringTag,{value:"Module"})),types$5={version:"Version16Dot16",italicAngle:"Fixed",underlinePosition:"FWORD",underlineThickness:"FWORD",isFixedPitch:"uint32",minMemType42:"uint32",maxMemType42:"uint32",minMemType1:"uint32",maxMemType1:"uint32",numGlyphs:"uint16",glyphNameIndex:"uint16",stringData:"uint8",offset:"int8"},baseFieldOrder=["version","italicAngle","underlinePosition","underlineThickness","isFixedPitch","minMemType42","maxMemType42","minMemType1","maxMemType1"],parse$d=(e,n,r)=>{start(e,n);const g=decoder[types$5.version](),y=decoder[types$5.italicAngle](),k=decoder[types$5.underlinePosition](),$=decoder[types$5.underlineThickness](),V=decoder[types$5.isFixedPitch](),L=decoder[types$5.minMemType42](),z=decoder[types$5.maxMemType42](),j=decoder[types$5.minMemType1](),ae=decoder[types$5.maxMemType1](),oe={version:g,italicAngle:y,underlinePosition:k,underlineThickness:$,isFixedPitch:V,minMemType42:L,maxMemType42:z,minMemType1:j,maxMemType1:ae};if(g===2){const re=decoder[types$5.numGlyphs](),ue=[];for(let le=0;le<re;le++){const de=decoder[types$5.glyphNameIndex](),he={index:de};de>=258&&de<65535&&(he.code=decoder.uint8(),he.name=String.fromCharCode(he.code)),ue.push(he)}oe.glyphNames=ue}if(g===2.5){const re=decoder[types$5.numGlyphs]();for(let ue=0;ue<re;ue++)oe.offsets?.push(decoder.int8())}return end$1(),oe},create$c=e=>{let n=[];console.log(`
=== Creating post table ===`),console.log(`Version: 0x${e.version.toString(16).padStart(8,"0")} (decimal: ${e.version})`);for(const r of baseFieldOrder){const g=e[r],y=types$5[r],k=encoder[y](g);k&&(n=n.concat(k))}if(Array.isArray(e.glyphNames)){const r=e.glyphNames;let g=[];g=g.concat(encoder[types$5.numGlyphs](r.length));for(let y=0;y<r.length;y++)g=g.concat(encoder[types$5.glyphNameIndex](r[y].index));for(let y=0;y<r.length;y++)if(r[y].index>=258&&r[y].index<65535&&typeof r[y].name=="string"){const k=r[y].name,$=encoder.uint8(Math.min(k.length,255)),V=[];for(let L=0;L<k.length&&L<255;L++)V.push(k.charCodeAt(L)&255);g=g.concat($,V)}n=n.concat(g)}if(Array.isArray(e.offsets)){const r=e.offsets;let g=[];g=g.concat(encoder[types$5.numGlyphs](r.length));for(let y=0;y<r.length;y++)g=g.concat(encoder[types$5.offset](r[y]));n=n.concat(g)}return n},postTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$c,parse:parse$d},Symbol.toStringTag,{value:"Module"})),types$4={version:"uint16",numTables:"uint16",platformID:"uint16",encodingID:"uint16",subtableOffset:"Offset32",format:"uint16",length:"uint16",language:"uint16",segCountX2:"uint16",searchRange:"uint16",entrySelector:"uint16",rangeShift:"uint16",endCode:"uint16",reservedPad:"uint16",startCode:"uint16",idDelta:"int16",idRangeOffsets:"uint16",glyphIdArray:"uint16"},tableFieldOrder$1=["version","numTables","encodingRecords"],encodingRecordFieldOrder=["platformID","encodingID","subtableOffset"],format4HeaderOrder=["format","length","language","segCount","searchRange","entrySelector","rangeShift"],format12HeaderOrder=["format","reserved","length","language","groupCount"],format4FieldTypes={format:"uint16",length:"uint16",language:"uint16",segCount:"uint16",searchRange:"uint16",entrySelector:"uint16",rangeShift:"uint16"},format12FieldTypes={format:"uint16",reserved:"uint16",length:"uint32",language:"uint32",groupCount:"uint32"},parse$c=(e,n,r)=>{let g=n;start(e,g);const y=decoder[types$4.version](),k=decoder[types$4.numTables]();g=getOffset(),end$1();const $=[],V={};for(let z=0;z<k;z++){start(e,g);const j=decoder[types$4.platformID](),ae=decoder[types$4.encodingID](),oe=decoder[types$4.subtableOffset]();g=getOffset(),end$1();const re=getSubTable(e,n+oe,V);$.push({platformID:j,encodingID:ae,subtableOffset:oe,subTable:re})}return{version:y,numTables:k,encodingRecords:$,glyphIndexMap:V}},getSubTable=(e,n,r)=>{let g=null;start(e,n);const y=decoder[types$4.format]();switch(y){case 4:{const k=decoder[types$4.length](),$=decoder[types$4.language](),V=decoder[types$4.segCountX2](),L=decoder[types$4.searchRange](),z=decoder[types$4.entrySelector](),j=decoder[types$4.rangeShift](),ae=V/2,oe=[],re=getOffset();end$1();for(let ue=0;ue<ae;ue++){const le=e.getUint16(re+ue*2),de=e.getUint16(re+ae*2+2+ue*2),he=e.getInt16(re+ae*4+2+ue*2),_e=e.getUint16(re+ae*6+2+ue*2);oe.push({endCode:le,startCode:de,idDelta:he,idRangeOffset:_e});for(let xe=de;xe<=le;xe+=1){let Ne;if(_e!==0){const $e=re+ae*6+2+ue*2+(xe-de)*2+_e;Ne=e.getUint16($e),Ne!==0&&(Ne=Ne+he&65535)}else Ne=xe+he&65535;r[xe]=Ne}}g={format:y,length:k,language:$,segCount:ae,searchRange:L,entrySelector:z,rangeShift:j,glyphIndexMap:r,segments:oe};break}case 12:{const k=decoder.uint16(),$=decoder.uint32(),V=decoder.uint32(),L=decoder.uint32(),z=getOffset();end$1();const j=[];for(let ae=0;ae<L;ae++){const oe=e.getUint32(z+ae*12),re=e.getUint32(z+ae*12+4);let ue=e.getUint32(z+ae*12+8);j.push({startCharCode:oe,endCharCode:re,startGlyphId:ue});for(let le=oe;le<=re;le++)r[le]=ue,ue++}return{format:y,reserved:k,length:$,language:V,groupCount:L,glyphIndexMap:r,groups:j}}}return end$1(),g},validateAndFixCharacterMapping=e=>{const n=new Set,r=new Set;for(let y=0;y<e.length;y++){const k=e[y];k.unicode!==void 0&&k.unicode!==null&&(k.unicode>=32&&k.unicode<=126?n.add(k.unicode):k.unicode>=19968&&k.unicode<=40959&&r.add(k.unicode))}const g=[];for(const y of n)r.has(y)&&g.push(y);return g.length>0&&console.warn(`Found Unicode conflicts: ${g.map(y=>`${y} (${String.fromCharCode(y)})`).join(", ")}`),e},ensureCorrectCharacterMapping=e=>{const n=e.findIndex(r=>r.unicode===0);if(n>0){const r=e.splice(n,1)[0];e.unshift(r)}if(e.length>1){const r=e.slice(1).sort((g,y)=>g.unicode===void 0||g.unicode===null?1:y.unicode===void 0||y.unicode===null?-1:g.unicode-y.unicode);e.splice(1,e.length-1,...r)}return e},createTable$1=e=>{const n=validateAndFixCharacterMapping(e),r=ensureCorrectCharacterMapping([...n]);let g=!0,y;for(y=r.length-1;y>0;y-=1)if(r[y].unicode>65535){g=!1;break}const k={version:0,numTables:g?2:3,encodingRecords:[]};k.encodingRecords.push({platformID:0,encodingID:3,subtableOffset:g?20:28}),k.encodingRecords.push({platformID:3,encodingID:1,subtableOffset:g?20:28}),g||k.encodingRecords.push({platformID:3,encodingID:10,subtableOffset:28}),k.encodingRecords[0].subTable={format:4,length:0,language:0,segCount:0,searchRange:0,entrySelector:0,rangeShift:0},k.encodingRecords[1].subTable={format:4,length:0,language:0,segCount:0,searchRange:0,entrySelector:0,rangeShift:0},g||(k.encodingRecords[k.encodingRecords.length-1].subTable={format:12,reserved:0,length:0,language:0,groupCount:0});const $=[],V=[],L={},z={},j=new Map;for(y=0;y<r.length;y++){const le=r[y];le.unicode!==void 0&&le.unicode!==null&&j.set(le.unicode,y)}let ae=[],oe=null;for(let le=0;le<r.length;le++){const de=r[le];de.unicode!==void 0&&de.unicode!==null&&de.unicode<=65535?(oe?de.unicode===oe.endCode+1&&-(de.unicode-le)===oe.idDelta?oe.endCode=de.unicode:(ae.push(oe),oe={startCode:de.unicode,endCode:de.unicode,idDelta:-(de.unicode-le),idRangeOffset:0}):oe={startCode:de.unicode,endCode:de.unicode,idDelta:-(de.unicode-le),idRangeOffset:0},L[de.unicode]=le):de.unicode!==void 0&&de.unicode!==null&&!g&&(V.push({startCharCode:de.unicode,endCharCode:de.unicode,startGlyphId:le}),z[de.unicode]=le)}oe&&ae.push(oe),$.length=0,$.push(...ae),$.push({endCode:65535,startCode:65535,idDelta:1,idRangeOffset:0}),$.sort(function(le,de){return le.startCode-de.startCode});const re=Math.max(...r.map(le=>le.unicode||0));for(let le=0;le<=Math.min(re+1e3,65535);le++)L[le]||(L[le]=0);g||(k.encodingRecords[k.encodingRecords.length-1].subTable.groups=V,k.encodingRecords[k.encodingRecords.length-1].subTable.glyphIndexMap=z),k.encodingRecords[0].subTable.segments=$,k.encodingRecords[1].subTable.segments=clone($),k.encodingRecords[0].subTable.glyphIndexMap=L,k.encodingRecords[1].subTable.glyphIndexMap=clone(L);const ue=$.length;return k.encodingRecords[0].subTable.segCount=ue,k.encodingRecords[1].subTable.segCount=ue,k.encodingRecords[0].subTable.searchRange=Math.pow(2,Math.floor(Math.log(ue)/Math.log(2)))*2,k.encodingRecords[1].subTable.searchRange=Math.pow(2,Math.floor(Math.log(ue)/Math.log(2)))*2,k.encodingRecords[0].subTable.entrySelector=Math.log(k.encodingRecords[0].subTable.searchRange/2)/Math.log(2),k.encodingRecords[1].subTable.entrySelector=Math.log(k.encodingRecords[1].subTable.searchRange/2)/Math.log(2),k.encodingRecords[0].subTable.rangeShift=ue*2-k.encodingRecords[0].subTable.searchRange,k.encodingRecords[1].subTable.rangeShift=ue*2-k.encodingRecords[1].subTable.searchRange,k.encodingRecords[0].subTable.length=16+$.length*8,k.encodingRecords[1].subTable.length=16+$.length*8,k.encodingRecords[1].subtableOffset+=k.encodingRecords[0].subTable.length,g||(k.encodingRecords[k.encodingRecords.length-1].subtableOffset+=k.encodingRecords[0].subTable.length+k.encodingRecords[1].subTable.length,k.encodingRecords[k.encodingRecords.length-1].subTable.length=16+V.length*4,k.encodingRecords[k.encodingRecords.length-1].subTable.groupCount=V.length),k},create$b=e=>{let n=[];for(const r of tableFieldOrder$1)if(r==="encodingRecords"){const g=e.encodingRecords||[],y=[],k=[];for(const $ of g)for(const V of encodingRecordFieldOrder){const L=types$4[V],z=$[V],j=encoder[L](z);j&&y.push(...j)}for(const $ of g){const V=$.subTable;if(V){if(V.format===4){let L=[];for(const ae of format4HeaderOrder)if(ae==="segCount"){const oe=V.segCount||0;L=L.concat(encoder[format4FieldTypes[ae]](oe*2))}else{const oe=format4FieldTypes[ae],re=V[ae];L=L.concat(encoder[oe](re))}const z=V.segments||[],j=L.length;setByesAt(L,encoder.uint16(0),j+z.length*2);for(let ae=0;ae<z.length;ae++){const oe=z[ae];setByesAt(L,encoder[types$4.endCode](oe.endCode),j+ae*2),setByesAt(L,encoder[types$4.startCode](oe.startCode),j+z.length*2+2+ae*2),setByesAt(L,encoder[types$4.idDelta](oe.idDelta),j+z.length*4+2+ae*2),setByesAt(L,encoder[types$4.idRangeOffsets](oe.idRangeOffset),j+z.length*6+2+ae*2);for(let re=oe.startCode;re<=oe.endCode;re+=1){const ue=V.glyphIndexMap[re];if(oe.idRangeOffset!==0){const le=j+z.length*8+2+(re-oe.startCode)*2+oe.idRangeOffset;setByesAt(L,encoder[types$4.glyphIdArray](ue),le)}}}k.push(...L)}else if(V.format===12){let L=[];for(const j of format12HeaderOrder){const ae=format12FieldTypes[j],oe=V[j];L=L.concat(encoder[ae](oe))}const z=V.groups||[];for(let j=0;j<z.length;j++){const ae=z[j];L=L.concat(encoder.uint32(ae.startCharCode)),L=L.concat(encoder.uint32(ae.endCharCode)),L=L.concat(encoder.uint32(ae.startGlyphId))}k.push(...L)}}}n=n.concat(y,k)}else{const g=types$4[r],y=e[r],k=encoder[g](y);k&&(n=n.concat(k))}return n},cmapTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$b,createTable:createTable$1,parse:parse$c},Symbol.toStringTag,{value:"Module"})),types$3={advanceWidth:"uint16",lsb:"int16",leftSideBearings:"int16"},hMetricFieldOrder=["advanceWidth","lsb"],parse$b=(e,n,r)=>{const g=r.settings.numberOfHMetrics,y=r.settings.numGlyphs,k=[],$=[];start(e,n);for(let L=0;L<g;L++){const z=decoder[types$3.advanceWidth](),j=decoder[types$3.lsb]();k.push({advanceWidth:z,lsb:j})}for(let L=0;L<y-g;L++)$.push(decoder[types$3.leftSideBearings]());const V={hMetrics:k,leftSideBearings:$};return end$1(),V},create$a=e=>{let n=[];const r=e.hMetrics;for(let y=0;y<r.length;y++){const k=r[y];for(const $ of hMetricFieldOrder){const V=types$3[$],L=k[$];n=n.concat(encoder[V](L))}}const g=e.leftSideBearings;if(g)for(let y=0;y<g.length;y++)n=n.concat(encoder[types$3.leftSideBearings](g[y]));return n},hmtxTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$a,parse:parse$b},Symbol.toStringTag,{value:"Module"})),sleep=(e=0)=>new Promise(n=>setTimeout(n,e)),ensureLoading=()=>{loading$1.value||(loading$1.value=!0)},reserveProgressBudget=e=>{if(!Number.isFinite(e)||e<=0)return;ensureLoading();const n=total$1.value-loaded$1.value;n<e&&(total$1.value+=e-n)},incrementProgress=(e,n=1)=>{!Number.isFinite(n)||n<=0||(ensureLoading(),e&&(loadingMsg.value=e),loaded$1.value+=n,total$1.value<loaded$1.value&&(total$1.value=loaded$1.value))},setProgressMessage=e=>{ensureLoading(),loadingMsg.value=e},yieldToEventLoop=async(e,n=120,r=0)=>{e<=0||n<=0||e%n===0&&await sleep(r)},FLAGS={ON_CURVE_POINT:1,X_SHORT_VECTOR:2,Y_SHORT_VECTOR:4,REPEAT_FLAG:8,X_IS_SAME_OR_POSITIVE_X_SHORT_VECTOR:16,Y_IS_SAME_OR_POSITIVE_Y_SHORT_VECTOR:32};function calculateDelta(e,n){return Math.round(e-n)}function getFlagForCoordinate(e,n){const r=n?FLAGS.X_SHORT_VECTOR:FLAGS.Y_SHORT_VECTOR,g=n?FLAGS.X_IS_SAME_OR_POSITIVE_X_SHORT_VECTOR:FLAGS.Y_IS_SAME_OR_POSITIVE_Y_SHORT_VECTOR;if(e===0)return{flag:g,bytes:[]};if(e>=-255&&e<=255)return e>0?{flag:r|g,bytes:[e]}:{flag:r,bytes:[-e]};{const y=encoder.int16(e);return{flag:0,bytes:y?Array.from(y):[]}}}function compressFlags(e){const n=[];let r=0;for(;r<e.length;){const g=e[r];let y=0;for(;r+y+1<e.length&&e[r+y+1]===g&&y<255;)y++;y>0?(n.push(g|FLAGS.REPEAT_FLAG),n.push(y),r+=y+1):(n.push(g),r++)}return n}function serializeSimpleGlyph(e){const n=[],r=encoder.int16(e.numberOfContours),g=encoder.int16(e.xMin),y=encoder.int16(e.yMin),k=encoder.int16(e.xMax),$=encoder.int16(e.yMax);r&&n.push(...r),g&&n.push(...g),y&&n.push(...y),k&&n.push(...k),$&&n.push(...$);for(const de of e.endPtsOfContours){const he=encoder.uint16(de);he&&n.push(...he)}const V=e.instructionLength||0,L=encoder.uint16(V);L&&n.push(...L),V>0&&e.instructions&&n.push(...e.instructions);const z=[];for(const de of e.contours)for(const he of de.points)z.push(he);if(z.length===0)return console.warn(" Glyph has contours but no points!"),n;const j=[],ae=[],oe=[];let re=0,ue=0;for(let de=0;de<z.length;de++){const he=z[de],_e=Math.round(he.x||0),xe=Math.round(he.y||0),Ne=calculateDelta(_e,re),$e=calculateDelta(xe,ue),Ce=getFlagForCoordinate(Ne,!0),Ie=getFlagForCoordinate($e,!1);let ze=Ce.flag|Ie.flag;he.onCurve&&(ze|=FLAGS.ON_CURVE_POINT),j.push(ze),ae.push(...Ce.bytes),oe.push(...Ie.bytes),re=_e,ue=xe}const le=compressFlags(j);return n.push(...le),n.push(...ae),n.push(...oe),n}async function serializeGlyfTable(e,n){console.log(`
=== Serializing glyf Table (OpenType compliant) ===`),console.log(`Processing ${e.length} glyphs...`);const r=[],g=[];let y=0;const k=n?.chunkSize??80;reserveProgressBudget(e.length),setProgressMessage(n?.progressLabel||" glyf ");for(let $=0;$<e.length;$++){const V=e[$];if(g.push(y),V.numberOfContours===0){$<3||$>=e.length-1?console.log(`  Glyph ${$}: empty (0 bytes)`):$===3&&console.log("  ..."),incrementProgress(void 0,1),await yieldToEventLoop($+1,k);continue}const L=serializeSimpleGlyph(V);for(;L.length%4!==0;)L.push(0);if(V.contours?.length){const z=V.contours.reduce((j,ae)=>j+ae.points.length,0);$<3||$>=e.length-1?console.log(`  Glyph ${$}: ${L.length} bytes, ${z} points, offset ${y}`):$===3&&console.log("  ...")}r.push(...L),y+=L.length,incrementProgress(void 0,1),await yieldToEventLoop($+1,k)}return g.push(y),console.log(` glyf table serialized: ${r.length} bytes total`),console.log(`   Offsets: ${g.length} entries`),console.log(`   First offsets: [${g.slice(0,5).join(", ")}...]`),console.log(`   Last offsets: [...${g.slice(-5).join(", ")}]`),console.log(`==============================================
`),{data:r,offsets:g}}const transformPoint=(e,n)=>({x:n.xScale*e.x+n.scale01*e.y+n.dx,y:n.scale10*e.x+n.yScale*e.y+n.dy}),parse$a=(e,n,r)=>{const g={glyphTables:[]},y=r.settings.numGlyphs,k=(r.tables?.filter(j=>j.name==="loca")[0].table).offsets;for(let j=0;j<y;j++)g.glyphTables.push(parseGlyph(e,n+k[j]));for(let j=0;j<y;j++){const ae=g.glyphTables[j];if(ae.isComposite){ae.contours=[];for(var $=0;$<ae.components.length;$+=1){const oe=ae.components[$],re=g.glyphTables[oe.glyphIndex];if(re.contours.length){let ue=[];if(oe.matchedPoints===void 0){ue=clone(re.contours);for(let le=0;le<ue.length;le++){const de=ue[le].paths;for(let he=0;he<de.length;he++){const _e=de[he];_e.start=transformPoint(_e.start,oe),_e.end=transformPoint(_e.end,oe),_e.type===PathType.QUADRATIC_BEZIER&&(_e.control=transformPoint(_e.control,oe))}}}else{let le=[];for(let he=0;he<ae.contours.length;he++){const _e=ae.contours[he];le=le.concat(_e.points)}let de=[];for(let he=0;he<re.contours.length;he++){const _e=re.contours[he];de=de.concat(_e.points)}if(oe.matchedPoints[0]>le.length-1||oe.matchedPoints[1]>le.length-1)break;var V=le[oe.matchedPoints[0]],L=de[oe.matchedPoints[1]],z={xScale:oe.xScale,scale01:oe.scale01,scale10:oe.scale10,yScale:oe.yScale,dx:0,dy:0};L=transformPoint(L,z),z.dx=V.x-L.x,z.dy=V.y-L.y,ue=clone(re.contours);for(let he=0;he<ue.length;he++){const _e=ue[he].paths;for(let xe=0;xe<_e.length;xe++){const Ne=_e[xe];Ne.start=transformPoint(Ne.start,z),Ne.end=transformPoint(Ne.start,z),Ne.type===PathType.QUADRATIC_BEZIER&&(Ne.control=transformPoint(Ne.control,z))}}}ae.contours.push(...ue)}}}}return g},parseGlyph=(e,n,r)=>{start(e,n);const g=decoder.int16(),y=decoder.int16(),k=decoder.int16(),$=decoder.int16(),V=decoder.int16(),L=[];let z=[],j=!1;const ae=[],oe=[];let re=0,ue=0;if(g<0){j=!0,z=[];let xe=!0,Ne;for(;xe;){Ne=decoder.uint16();const $e={glyphIndex:decoder.uint16(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0,matchedPoints:void 0};(Ne&1)>0?(Ne&2)>0?($e.dx=decoder.int16(),$e.dy=decoder.int16()):$e.matchedPoints=[decoder.uint16(),decoder.uint16()]:(Ne&2)>0?($e.dx=decoder.int8(),$e.dy=decoder.int8()):$e.matchedPoints=[decoder.uint8(),decoder.uint8()],(Ne&8)>0?$e.xScale=$e.yScale=decoder.F2DOT14():(Ne&64)>0?($e.xScale=decoder.F2DOT14(),$e.yScale=decoder.F2DOT14()):(Ne&128)>0&&($e.xScale=decoder.F2DOT14(),$e.scale01=decoder.F2DOT14(),$e.scale10=decoder.F2DOT14(),$e.yScale=decoder.F2DOT14()),z.push($e),xe=!!(Ne&32)}if(Ne&256){const $e=decoder.uint16();for(let Ce=0;Ce<$e;Ce++)ae.push(decoder.uint8())}}for(let xe=0;xe<g;xe++)L.push(decoder.uint16());const le=decoder.uint16();for(let xe=0;xe<le;xe++)ae.push(decoder.uint8());const de=[],he=L[L.length-1]+1;for(let xe=0;xe<he;xe++){const Ne=decoder.uint8();if(de.push(Ne),(Ne&8)>0){const $e=decoder.uint8();for(let Ce=0;Ce<$e;Ce++)de.push(Ne),xe+=1}}for(let xe=0;xe<g;xe++){const Ne=[],$e=[],Ce=[],Ie=[];oe.push({xCoordinates:Ne,yCoordinates:$e,points:Ce,paths:Ie})}for(let xe=0;xe<g;xe++){const Ne=xe>0?L[xe-1]+1:0,$e=L[xe];for(let Ce=Ne;Ce<=$e;Ce++){const Ie=parseGlyphCoordinate(decoder,de[Ce],re,2,16);oe[xe].xCoordinates.push(Ie),oe[xe].points.push({x:Ie,onCurve:!!(de[Ce]&1)}),re=Ie}}for(let xe=0;xe<g;xe++){const Ne=xe>0?L[xe-1]+1:0,$e=L[xe];for(let Ce=Ne;Ce<=$e;Ce++){const Ie=parseGlyphCoordinate(decoder,de[Ce],ue,4,32);oe[xe].yCoordinates.push(Ie),oe[xe].points[Ce-Ne].y=Ie,ue=Ie}}for(let xe=0;xe<g;xe++){const Ne=oe[xe],$e=Ne.points;let Ce=null,Ie=$e[$e.length-1],ze=$e[0],Ue=null;Ie.onCurve?Ue=Ie:ze.onCurve?Ue=ze:Ue={x:(Ie.x+ze.x)*.5,y:(Ie.y+ze.y)*.5};for(let Pt=0;Pt<$e.length;Pt++)if(Ce=Ie,Ie=ze,ze=$e[(Pt+1)%$e.length],Ie.onCurve){const hn={type:PathType.LINE,start:{x:Ue.x,y:Ue.y},end:{x:Ie.x,y:Ie.y}};Ue=Ie,Ne.paths.push(hn)}else{let hn=ze;Ce.onCurve||((Ie.x+Ce.x)*.5,(Ie.y+Ce.y)*.5),ze.onCurve||(hn={x:(Ie.x+ze.x)*.5,y:(Ie.y+ze.y)*.5});const Dt={type:PathType.QUADRATIC_BEZIER,start:{x:Ue.x,y:Ue.y},end:{x:hn.x,y:hn.y},control:{x:Ie.x,y:Ie.y}};Ue=hn,Ne.paths.push(Dt)}}return end$1(),{numberOfContours:g,xMin:y,yMin:k,xMax:$,yMax:V,endPtsOfContours:L,instructionLength:le,instructions:ae,contours:oe,flags:de,isComposite:j,components:z}},parseGlyphCoordinate=(e,n,r,g,y)=>{let k;return(n&g)>0?(k=e.uint8(),n&y||(k=-k),k=r+k):(n&y)>0?k=r:k=r+e.int16(),k},create$9=async e=>{if(console.log(`
=== glyf.create() called ===`),console.log("table type:",typeof e),console.log("table.glyphTables exists?",!!e.glyphTables),console.log("table.glyphTables is array?",Array.isArray(e.glyphTables)),!e||!e.glyphTables||!Array.isArray(e.glyphTables))return console.error(" ERROR: Invalid IGlyfTable object!"),console.error("   table:",e),[];const n=await serializeGlyfTable(e.glyphTables,{progressLabel:" glyf "});return e._generatedOffsets=n.offsets,console.log(`glyf.create() complete
`),n.data},glyfTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$9,parse:parse$a},Symbol.toStringTag,{value:"Module"})),parse$9=(e,n,r)=>{const g=r.settings.indexToLocFormat,y=r.settings.numGlyphs,k={offsets:[]};if(start(e,n),g===0)for(let $=0;$<y;$++)k.offsets.push(decoder.Offset16()*2);else if(g===1)for(let $=0;$<y;$++)k.offsets.push(decoder.Offset32());return end$1(),k},create$8=(e,n)=>{let r=[];const g=n?.version??1;for(let y=0;y<e.offsets.length;y++)if(g===0){const k=encoder.Offset16(e.offsets[y]);k&&(r=r.concat(k))}else if(g===1){const k=encoder.Offset32(e.offsets[y]);k&&(r=r.concat(k))}return r},locaTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$8,parse:parse$9},Symbol.toStringTag,{value:"Module"})),types$2={major:"Card8",minor:"Card8",hdrSize:"Card8",offSize:"Card8"},headerFieldOrder=["major","minor","hdrSize","offSize"],TOP_DICT_META=[{name:"ros",op:1230,type:["SID","SID","number"]},{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset"},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],FONT_DICT_META=[{name:"ros",op:1230,type:["SID","SID","number"]},{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number"},{name:"italicAngle",op:1202,type:"number"},{name:"underlinePosition",op:1203,type:"number"},{name:"underlineThickness",op:1204,type:"number"},{name:"paintType",op:1205,type:"number"},{name:"charstringType",op:1206,type:"number"},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"]},{name:"strokeWidth",op:1208,type:"number"},{name:"xuid",op:14,type:[]},{name:"charset",op:15,type:"offset"},{name:"encoding",op:16,type:"offset"},{name:"charStrings",op:17,type:"offset"},{name:"fontName",op:1238,type:"SID"},{name:"private",op:18,type:["number","offset"]},{name:"cidFontVersion",op:1231,type:"number"},{name:"cidFontRevision",op:1232,type:"number"},{name:"cidFontType",op:1233,type:"number"},{name:"cidCount",op:1234,type:"number"},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"}],PRIVATE_DICT_META=[{name:"BlueValues",op:6,type:["number","number","number","number"]},{name:"OtherBlues",op:7,type:["number","number"]},{name:"FamilyBlues",op:8,type:"array"},{name:"FamilyOtherBlues",op:9,type:"array"},{name:"BlueScale",op:1209,type:"real"},{name:"BlueShift",op:1210,type:"number"},{name:"BlueFuzz",op:1211,type:"number"},{name:"StdHW",op:10,type:"number"},{name:"StdVW",op:11,type:"number"},{name:"StemSnapH",op:1212,type:"array"},{name:"StemSnapV",op:1213,type:"array"},{name:"ForceBold",op:1214,type:"number"},{name:"LanguageGroup",op:1217,type:"number"},{name:"ExpansionFactor",op:1218,type:"real"},{name:"initialRandomSeed",op:1219,type:"number"},{name:"Subrs",op:19,type:"offset"},{name:"defaultWidthX",op:20,type:"number"},{name:"nominalWidthX",op:21,type:"number"}],cffStandardStrings=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],cffStandardEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],cffExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],parseIndex=(e,n,r)=>{let g=[],y=n;start(e,n);let k=n;const $=decoder.uint16();g.push(e.getUint8(y)),y++,g.push(e.getUint8(y)),y++;const V=decoder.uint8();g.push(e.getUint8(y)),y++;const L=[],z=[],j=[];if($!==0){if(V<1||V>4)return{data:{configRawData:g,index:{count:0,offSize:V,offset:[],data:[]},data:[]},offset:n+3};for(let ae=0;ae<$+1;ae++)switch(V){case 1:{L.push(decoder.uint8()),g.push(e.getUint8(y)),y++;break}case 2:{L.push(decoder.uint16()),g.push(e.getUint8(y)),y++,g.push(e.getUint8(y)),y++;break}case 3:{L.push(decoder.uint24()),g.push(e.getUint8(y)),y++,g.push(e.getUint8(y)),y++,g.push(e.getUint8(y)),y++;break}case 4:{L.push(decoder.uint32()),g.push(e.getUint8(y)),y++,g.push(e.getUint8(y)),y++,g.push(e.getUint8(y)),y++,g.push(e.getUint8(y)),y++;break}}k=getOffset(),end$1();for(let ae=0;ae<L.length-1;ae++){const oe=[];for(let re=L[ae];re<L[ae+1];re++){let ue=0;typeof re!="bigint"?ue=e.getUint8(k-1+re):ue=e.getUint8(Number(BigInt(k-1)+re)),oe.push(ue)}z.push(oe),j.push(r?r(oe):oe)}}return{data:{configRawData:g,index:{count:$,offSize:V,offset:L,data:z},data:j},offset:typeof L[$]=="bigint"?Number(BigInt(k-1)+($===0?BigInt(0):L[$])):k-1+($===0?0:L[$])}},parseType2CharString=(e,n,r,g)=>{if(!e||!Array.isArray(e)||e.length===0)return{contours:[],commands:[],advanceWidth:0};const y=[];let k=[];const $=[];let V=null,L=0,z=0,j=0,ae=[],oe,re,ue,le;if(g.settings.isCIDFont){const _e=r._fdSelect[n],xe=r._fdArray[_e];oe=xe._subrs,re=xe._subrsBias,ue=xe._defaultWidthX,le=xe._nominalWidthX}else oe=r._subrs,re=r._subrsBias,ue=r._defaultWidthX,le=r._nominalWidthX;const de=()=>{ae.length>1&&ae.length%2!==0&&(V=ae.shift())},he=_e=>{if(!_e)return;let xe=0;for(;xe<_e.length;){const Ne=_e[xe];if(typeof Ne!="number"||Ne<0||Ne>255){xe++;continue}switch(xe++,Ne){case 1:{V===null&&de(),L+=ae.length>>1;const $e=[];for(;ae.length;)$e.push(ae.shift());$.push({command:"hstem",data:$e});break}case 3:{V===null&&de(),L+=ae.length>>1;const $e=[];for(;ae.length;)$e.push(ae.shift());$.push({command:"vstem",data:$e});break}case 18:{V===null&&de(),L+=ae.length>>1;const $e=[];for(;ae.length;)$e.push(ae.shift());$.push({command:"hstemhm",data:$e});break}case 23:{V===null&&de(),L+=ae.length>>1;const $e=[];for(;ae.length;)$e.push(ae.shift());$.push({command:"vstemhm",data:$e});break}case 19:{V===null&&de(),L+=ae.length>>1;const $e=[];for(;ae.length;)$e.push(ae.shift());const Ce=[];let Ie=L+7>>3;for(;Ie;)Ce.push(_e[xe+Ie]),Ie--;xe+=L+7>>3,$.push({command:"hintmask",data:$e,mask:Ce});break}case 20:{V===null&&de(),L+=ae.length>>1;const $e=[];for(;ae.length;)$e.push(ae.shift());const Ce=[];let Ie=L+7>>3;for(;Ie;)Ce.push(_e[xe+Ie]),Ie--;xe+=L+7>>3,$.push({command:"cntrmask",data:$e,mask:Ce});break}case 21:{V===null&&de(),k.length&&(y.push(k),k=[]);const $e=ae.pop(),Ce=ae.pop();z+=Ce,j+=$e,isNaN(z)&&(z=0),isNaN(j)&&(j=0),$.push({command:"rmoveto",data:[Ce,$e]});break}case 4:{if(V===null&&de(),k.length&&(y.push(k),k=[]),ae.length===0)j+=0;else{const $e=ae.pop();j+=$e,isNaN(j)&&(j=0),$.push({command:"vmoveto",data:[$e]})}break}case 22:{V===null&&de(),k.length&&(y.push(k),k=[]);const $e=ae.pop();z+=$e,isNaN(z)&&(z=0),$.push({command:"hmoveto",data:[$e]});break}case 5:{const $e=[];for(;ae.length;){const Ce=ae.shift(),Ie=ae.shift();k.push({type:PathType.LINE,start:{x:z,y:j},end:{x:z+Ce,y:j+Ie}}),z+=Ce,j+=Ie,isNaN(z)&&(z=0),isNaN(j)&&(j=0),$e.push(Ce),$e.push(Ie)}$.push({command:"rlineto",data:$e});break}case 6:{const $e=[];for(;ae.length;){const Ce=ae.shift();if($e.push(Ce),k.push({type:PathType.LINE,start:{x:z,y:j},end:{x:z+Ce,y:j}}),z+=Ce,ae.length){const Ie=ae.shift();$e.push(Ie),k.push({type:PathType.LINE,start:{x:z,y:j},end:{x:z,y:j+Ie}}),j+=Ie}}$.push({command:"hlineto",data:$e});break}case 7:{const $e=[];for(;ae.length;){const Ce=ae.shift();if($e.push(Ce),k.push({type:PathType.LINE,start:{x:z,y:j},end:{x:z,y:j+Ce}}),j+=Ce,ae.length){const Ie=ae.shift();$e.push(Ie),k.push({type:PathType.LINE,start:{x:z,y:j},end:{x:z+Ie,y:j}}),z+=Ie}}$.push({command:"vlineto",data:$e});break}case 8:{const $e=[];for(;ae.length;){const Ce=ae.shift(),Ie=ae.shift(),ze=ae.shift(),Ue=ae.shift(),Pt=ae.shift(),hn=ae.shift();k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+Ce,y:j+Ie},control2:{x:z+Ce+ze,y:j+Ie+Ue},end:{x:z+Ce+ze+Pt,y:j+Ie+Ue+hn}}),z+=Ce+ze+Pt,j+=Ie+Ue+hn,$e.push(Ce,Ie,ze,Ue,Pt,hn)}$.push({command:"rrcurveto",data:$e});break}case 27:{const $e=[];let Ce=0;for(ae.length%2!==0&&(Ce=ae.shift(),$e.push(Ce));ae.length;){const Ie=ae.shift(),ze=ae.shift(),Ue=ae.shift(),Pt=ae.shift();k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+Ie,y:j+Ce},control2:{x:z+Ie+ze,y:j+Ce+Ue},end:{x:z+Ie+ze+Pt,y:j+Ce+Ue}}),z+=Ie+ze+Pt,Ce?(j+=Ce+Ue,Ce=0):j+=Ue,$e.push(Ie,ze,Ue,Pt)}$.push({command:"hhcurveto",data:$e});break}case 26:{const $e=[];let Ce=0;for(ae.length%2!==0&&(Ce=ae.shift(),$e.push(Ce));ae.length;){const Ie=ae.shift(),ze=ae.shift(),Ue=ae.shift(),Pt=ae.shift();k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+Ce,y:j+Ie},control2:{x:z+Ce+ze,y:j+Ie+Ue},end:{x:z+Ce+ze,y:j+Ie+Ue+Pt}}),Ce?(z+=Ce+ze,Ce=0):z+=ze,j+=Ie+Ue+Pt,$e.push(Ie,ze,Ue,Pt)}$.push({command:"vvcurveto",data:$e});break}case 31:{const $e=[];for(;ae.length>0;){const Ce=ae.shift(),Ie=ae.shift(),ze=ae.shift(),Ue=ae.shift(),Pt=ae.length===1?ae.shift():null;if(k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+Ce,y:j},control2:{x:z+Ce+Ie,y:j+ze},end:{x:Pt===null?z+Ce+Ie:z+Ce+Ie+Pt,y:j+ze+Ue}}),z+=Pt===null?Ce+Ie:Ce+Ie+Pt,j+=ze+Ue,$e.push(Ce,Ie,ze,Ue),Pt!==null&&$e.push(Pt),ae.length===0)break;const hn=ae.shift(),Dt=ae.shift(),xn=ae.shift(),jt=ae.shift(),Vn=ae.length===1?ae.shift():null;k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z,y:j+hn},control2:{x:z+Dt,y:j+hn+xn},end:{x:z+Dt+jt,y:Vn===null?j+hn+xn:j+hn+xn+Vn}}),z+=Dt+jt,j+=Vn===null?hn+xn:hn+xn+Vn,$e.push(hn,Dt,xn,jt),Vn!==null&&$e.push(Vn)}$.push({command:"hvcurveto",data:$e});break}case 30:{const $e=[];for(;ae.length>0;){const Ce=ae.shift(),Ie=ae.shift(),ze=ae.shift(),Ue=ae.shift(),Pt=ae.length===1?ae.shift():null;if(k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z,y:j+Ce},control2:{x:z+Ie,y:j+Ce+ze},end:{x:z+Ie+Ue,y:Pt===null?j+Ce+ze:j+Ce+ze+Pt}}),z+=Ie+Ue,j+=Pt===null?Ce+ze:Ce+ze+Pt,$e.push(Ce,Ie,ze,Ue),Pt!==null&&$e.push(Pt),ae.length===0)break;const hn=ae.shift(),Dt=ae.shift(),xn=ae.shift(),jt=ae.shift(),Vn=ae.length===1?ae.shift():null;k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+hn,y:j},control2:{x:z+hn+Dt,y:j+xn},end:{x:Vn===null?z+hn+Dt:z+hn+Dt+Vn,y:j+xn+jt}}),z+=Vn===null?hn+Dt:hn+Dt+Vn,j+=xn+jt,$e.push(hn,Dt,xn,jt),Vn!==null&&$e.push(Vn)}$.push({command:"vhcurveto",data:$e});break}case 24:{const $e=[];for(;ae.length>2;){const ze=ae.shift(),Ue=ae.shift(),Pt=ae.shift(),hn=ae.shift(),Dt=ae.shift(),xn=ae.shift();k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+ze,y:j+Ue},control2:{x:z+ze+Pt,y:j+Ue+hn},end:{x:z+ze+Pt+Dt,y:j+Ue+hn+xn}}),z+=ze+Pt+Dt,j+=Ue+hn+xn,$e.push(ze,Ue,Pt,hn,Dt,xn)}const Ce=ae.shift(),Ie=ae.shift();k.push({type:PathType.LINE,start:{x:z,y:j},end:{x:z+Ce,y:j+Ie}}),z+=Ce,j+=Ie,$e.push(Ce,Ie),$.push({command:"rcurveline",data:$e});break}case 25:{const $e=[];for(;ae.length>6;){const Dt=ae.shift(),xn=ae.shift();k.push({type:PathType.LINE,start:{x:z,y:j},end:{x:z+Dt,y:j+xn}}),z+=Dt,j+=xn,$e.push(Dt,xn)}const Ce=ae.shift(),Ie=ae.shift(),ze=ae.shift(),Ue=ae.shift(),Pt=ae.shift(),hn=ae.shift();k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+Ce,y:j+Ie},control2:{x:z+Ce+ze,y:j+Ie+Ue},end:{x:z+Ce+ze+Pt,y:j+Ie+Ue+hn}}),z+=Ce+ze+Pt,j+=Ie+Ue+hn,$e.push(Ce,Ie,ze,Ue,Pt,hn),$.push({command:"rlinecurve",data:$e});break}case 12:{const $e=_e[xe];switch(xe++,$e){case 35:{const Ce=[],Ie=ae.shift(),ze=ae.shift(),Ue=ae.shift(),Pt=ae.shift(),hn=ae.shift(),Dt=ae.shift(),xn=ae.shift(),jt=ae.shift(),Vn=ae.shift(),Rn=ae.shift(),Tn=ae.shift(),Ln=ae.shift(),Sn=ae.shift();k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+Ie,y:j+ze},control2:{x:z+Ie+Ue,y:j+ze+Pt},end:{x:z+Ie+Ue+hn,y:j+ze+Pt+Dt}}),z+=Ie+Ue+hn,j+=ze+Pt+Dt,k.push({type:PathType.CUBIC_BEZIER,start:{x:z+Ie+Ue+hn,y:j+ze+Pt+Dt},control1:{x:z+Ie+Ue+hn+xn,y:j+ze+Pt+Dt+jt},control2:{x:z+Ie+Ue+hn+xn+Vn,y:j+ze+Pt+Dt+jt+Rn},end:{x:z+Ie+Ue+hn+xn+Vn+Tn,y:j+ze+Pt+Dt+jt+Rn+Ln}}),z+=xn+Vn+Tn,j+=jt+Rn+Ln,Ce.push(Ie,ze,Ue,Pt,hn,Dt,xn,jt,Vn,Rn,Tn,Ln,Sn),$.push({command:"flex",data:Ce});break}case 34:{const Ce=[],Ie=ae.shift(),ze=ae.shift(),Ue=ae.shift(),Pt=ae.shift(),hn=ae.shift(),Dt=ae.shift(),xn=ae.shift();k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+Ie,y:j},control2:{x:z+Ie+ze,y:j+Ue},end:{x:z+Ie+ze+Pt,y:j+Ue}}),k.push({type:PathType.CUBIC_BEZIER,start:{x:z+Ie+ze+Pt,y:j+Ue},control1:{x:z+Ie+ze+Pt+hn,y:j+Ue},control2:{x:z+Ie+ze+Pt+hn+Dt,y:j},end:{x:z+Ie+ze+Pt+hn+Dt+xn,y:j}}),z+=Ie+ze+Pt+hn+Dt+xn,Ce.push(Ie,ze,Ue,Pt,hn,Dt,xn),$.push({command:"hflex",data:Ce});break}case 36:{const Ce=[],Ie=ae.shift(),ze=ae.shift(),Ue=ae.shift(),Pt=ae.shift(),hn=ae.shift(),Dt=ae.shift(),xn=ae.shift(),jt=ae.shift(),Vn=ae.shift();k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+Ie,y:j+ze},control2:{x:z+Ie+Ue,y:j+ze+Pt},end:{x:z+Ie+Ue+hn,y:j+ze+Pt}}),k.push({type:PathType.CUBIC_BEZIER,start:{x:z+Ie+Ue+hn,y:j+ze+Pt},control1:{x:z+Ie+Ue+hn+Dt,y:j+ze+Pt},control2:{x:z+Ie+Ue+hn+Dt+xn,y:j+ze+Pt+jt},end:{x:z+Ie+Ue+hn+Dt+xn+Vn,y:j}}),z+=Ie+Ue+hn+Dt+xn+Vn,Ce.push(Ie,ze,Ue,Pt,hn,Dt,xn,jt,Vn),$.push({command:"hflex1",data:Ce});break}case 37:{const Ce=[],Ie=ae.shift(),ze=ae.shift(),Ue=ae.shift(),Pt=ae.shift(),hn=ae.shift(),Dt=ae.shift(),xn=ae.shift(),jt=ae.shift(),Vn=ae.shift(),Rn=ae.shift(),Tn=ae.shift(),Ln=Math.abs(Ie+Ue+hn+xn+Vn)-Math.abs(ze+Pt+Dt+jt+Rn);k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+Ie,y:j+ze},control2:{x:z+Ie+Ue,y:j+ze+Pt},end:{x:z+Ie+Ue+hn,y:j+ze+Pt+Dt}}),z+=Ie+Ue+hn,j+=ze+Pt+Dt,k.push({type:PathType.CUBIC_BEZIER,start:{x:z+Ie+Ue+hn,y:j+ze+Pt+Dt},control1:{x:z+Ie+Ue+hn+xn,y:j+ze+Pt+Dt+jt},control2:{x:z+Ie+Ue+hn+xn+Vn,y:j+ze+Pt+Dt+jt+Rn},end:{x:z+Ie+Ue+hn+xn+Vn+(Ln>0?Tn:0),y:j+ze+Pt+Dt+jt+Rn+(Ln<0?Tn:0)}}),z+=xn+Vn+(Ln>0?Tn:0),j+=jt+Rn+(Ln<0?Tn:0),Ce.push(Ie,ze,Ue,Pt,hn,Dt,xn,jt,Vn,Rn,Tn),$.push({command:"flex1",data:Ce});break}}break}case 10:{const $e=ae.pop()+re,Ce=oe[$e];Ce&&([...k],he(Ce));break}case 29:{const $e=ae.pop()+g.settings.gsubrsBias,Ce=g.settings.gsubrs[$e];Ce&&he(Ce);break}case 11:return;case 14:{V===null&&de(),k.length&&y.push(k);break}default:{if(!(Ne<32))if(Ne<247){const $e=Ne-139;ae.push($e)}else if(Ne<251){const $e=_e[xe];xe+=1;const Ce=(Ne-247)*256+$e+108;ae.push(Ce)}else if(Ne<255){const $e=_e[xe];xe+=1;const Ce=-(Ne-251)*256-$e-108;ae.push(Ce)}else{const $e=_e[xe],Ce=_e[xe+1],Ie=_e[xe+2],ze=_e[xe+3];xe+=4;const Ue=($e<<24|Ce<<16|Ie<<8|ze)/65536;ae.push(Ue)}break}}}};return he(e),V?le!=null&&(V=le+V):V=ue,{contours:y,commands:$,advanceWidth:V}},parseDict=(e,n=0,r)=>{const g=[];let y=[];start(e,n);let k=getOffset();for(;getOffset()-k<r&&!(getOffset()>=e.byteLength);){let $=decoder.uint8();if($<=21)$===12&&($=1200+decoder.uint8()),g.push([$,y]),y=[];else{const{value:V,offset:L}=parseOperand(e,getOffset(),$);y.push(V),setOffset(L)}}return end$1(),entriesToObject(g)},parseOperand=(e,n,r)=>{let g,y,k,$;if(start(e,n),r===28)return g=decoder.uint8(),y=decoder.uint8(),{value:g<<8|y,offset:getOffset()};if(r===29)return g=decoder.uint8(),y=decoder.uint8(),k=decoder.uint8(),$=decoder.uint8(),{value:g<<24|y<<16|k<<8|$,offset:getOffset()};if(r===30)return parseFloatOperand(e,n);if(r>=32&&r<=246)return{value:r-139,offset:n};if(r>=247&&r<=250)return g=decoder.uint8(),{value:(r-247)*256+g+108,offset:getOffset()};if(r>=251&&r<=254)return g=decoder.uint8(),{value:-(r-251)*256-g-108,offset:getOffset()};throw end$1(),new Error("Invalid b0 "+r)},parseFloatOperand=(e,n)=>{let r="";const y=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];for(start(e,n);;){const k=decoder.uint8(),$=k>>4,V=k&15;if($===15||(r+=y[$],V===15))break;r+=y[V]}return{value:parseFloat(r),offset:getOffset()}},interpretDict=(e,n,r)=>{const g={};let y;for(let k=0;k<n.length;k+=1){const $=n[k];if(Array.isArray($.type)){const V=[];V.length=$.type.length;for(let L=0;L<$.type.length;L++)y=e[$.op]!==void 0?e[$.op][L]:void 0,y===void 0&&(y=$.value!==void 0&&$.value[L]!==void 0?$.value[L]:null),$.type[L]==="SID"&&(y=getString(r,y)),V[L]=y;g[$.name]=V}else y=e[$.op],y===void 0&&(y=$.value!==void 0?$.value:null),$.type==="SID"&&(y=getString(r,y)),g[$.name]=y}return g},entriesToObject=e=>{const n={};for(let r=0;r<e.length;r+=1){const g=e[r][0],y=e[r][1];let k;if(y.length===1?k=y[0]:k=y,n.hasOwnProperty(g)&&!isNaN(n[g]))throw new Error("Object "+n+" already has key "+g);n[g]=k}return n},parseTopDict=(e,n)=>{const r=parseDict(e,0,e.byteLength);return interpretDict(r,TOP_DICT_META,n)},parsePrivateDict=(e,n,r,g)=>{const y=parseDict(e,n,r);return interpretDict(y,PRIVATE_DICT_META,g)},calcSubroutineBias=e=>{let n;return e.length<1240?n=107:e.length<33900?n=1131:n=32768,n},gatherTopDicts=(e,n,r,g)=>{const y=[];for(let k=0;k<r.length;k+=1){const $=new DataView(new Uint8Array(r[k]).buffer),V=parseTopDict($,g);V._subrs=[],V._subrsBias=0,V._defaultWidthX=0,V._nominalWidthX=0;const L=V.private[0],z=V.private[1];if(L!==null&&z!==null&&L!==0&&z!==0){const j=parsePrivateDict(e,z+n,L,g);if(V._defaultWidthX=j.defaultWidthX,V._nominalWidthX=j.nominalWidthX,j.Subrs!==0){const ae=z+j.Subrs,oe=parseIndex(e,ae+n);V._subrs=oe.data.data,V._subrsBias=calcSubroutineBias(V._subrs)}V._privateDict=j}y.push(V)}return y},createFDSelect=e=>{const n=[];n.push(0);for(let r=0;r<e.length;r++)n.push(0);return n},parseFDSelect=(e,n,r,g)=>{const y=[];let k;const $=e.getUint8(n);if($===0)for(let V=0;V<r;V++){if(k=e.getUint8(n+1+V),k>=g)throw new Error("CFF table CID Font FDSelect has bad FD index value "+k+" (FD count "+g+")");y.push(k)}else if($===3){const V=e.getUint16(n+1);let L=e.getUint16(n+3);if(L!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+L);let z;for(let j=0;j<V;j++){if(k=e.getUint8(n+5+j*3),z=e.getUint16(n+5+j*3+1),k>=g)throw new Error("CFF table CID Font FDSelect has bad FD index value "+k+" (FD count "+g+")");if(z>r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+z);for(;L<z;L++)y.push(k);L=z}if(z!==r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+z)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+$);return y},parseHeader=(e,n)=>{start(e,n);const r=decoder.uint8(),g=decoder.uint8(),y=decoder.uint8(),k=decoder.uint8(),$={major:r,minor:g,hdrSize:y,offSize:k},V=getOffset();return end$1(),{data:$,offset:V}},parseEncodings=(e,n)=>{start(e,n);const r=decoder.uint8(),g={format:r};if(r&0){g.nCodes=decoder.uint8(),g.code=[];for(let k=0;k<g.nCodes;k+=1)g.code.push(decoder.uint8())}else if(r&1){g.nRanges=decoder.uint8(),g.Range1=[],g.code=[];for(let k=0;k<g.nRanges;k+=1){const $=decoder.uint8(),V=decoder.uint8();g.Range1.push({first:$,nLeft:V});for(let L=$;L<=$+V;L+=1)g.code.push(L)}}if(r!==0&&r!==1){g.nSups=decoder.uint8(),g.supplement=[];for(let k=0;k<g.nSups;k+=1){const $={};$.code=decoder.uint8(),$.glyph=decoder.uint8(),g.supplement.push($)}}const y=getOffset();return end$1(),{data:g,offset:y}},getString=(e,n)=>{let r="";return n<=390?r=cffStandardStrings[n]:r=e[n-391],r},parseCharsets=(e,n,r,g)=>{start(e,n);const y=r.settings.numGlyphs?r.settings.numGlyphs-1:0,k=[".notdef"],$=decoder.uint8();if($===0)for(let V=0;V<y;V+=1){const L=decoder.uint16();k.push(getString(g.data,L))}else if($===1)for(;k.length<=y;){let V=decoder.uint16(),L=decoder.uint8();for(let z=0;z<=L;z+=1)k.push(getString(g.data,V)),V+=1}else if($===2)for(;k.length<=y;){let V=decoder.uint16(),L=decoder.uint8();for(let z=0;z<=L;z+=1)k.push(getString(g.data,V)),V+=1}else throw new Error("Unknown charset format "+$);return end$1(),{format:$,data:k}},parse$8=(e,n,r)=>{const g=parseHeader(e,n),y=parseIndex(e,g.offset),k=parseIndex(e,y.offset),$=parseIndex(e,k.offset,xe=>{let Ne="";for(let $e=0;$e<xe.length;$e+=1)Ne+=String.fromCharCode(xe[$e]);return Ne}),V=parseIndex(e,$.offset);r.settings.gsubrs=V.data.data,r.settings.gsubrsBias=calcSubroutineBias(V.data.data);const z=gatherTopDicts(e,V.offset,k.data.data,$.data.data)[0];if(z._privateDict&&(r.settings.defaultWidthX=z._privateDict.defaultWidthX,r.settings.nominalWidthX=z._privateDict.nominalWidthX),z.ros[0]!==void 0&&z.ros[1]!==void 0&&(r.settings.isCIDFont=!0),r.settings.isCIDFont){let xe=z.fdArray,Ne=z.fdSelect;if(xe===0||Ne===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");xe+=n;const $e=parseIndex(e,xe),Ce=gatherTopDicts(e,n,$e.data.data,$.data.data);z._fdArray=Ce,Ne+=n,z._fdSelect=parseFDSelect(e,Ne,r.settings.numGlyphs,Ce.length)}const j=n+z.private[1],ae=parsePrivateDict(e,j,z.private[0],$.data.data);if(r.settings.defaultWidthX=ae.defaultWidthX,r.settings.nominalWidthX=ae.nominalWidthX,ae.subrs!==0){const xe=j+ae.subrs,Ne=parseIndex(e,xe);r.settings.subrs=Ne.data.data,r.settings.subrsBias=calcSubroutineBias(r.settings.subrs)}else r.settings.subrs=[],r.settings.subrsBias=0;let oe=null;z.encoding===0?oe=cffStandardEncoding:z.encoding===1?oe=cffExpertEncoding:oe=parseEncodings(e,n+z.encoding);const re=parseCharsets(e,n+z.charset,r,$.data),ue=n+z.charStrings,le=parseIndex(e,ue),de=[];le.data.index.count;const he=le.data.data,_e=re.data.length;for(let xe=0;xe<_e;xe++){let Ne;xe<he.length?Ne=he[xe]:Ne=[];try{const $e=parseType2CharString(Ne,xe,z,r);de.push($e)}catch{de.push({contours:[],commands:[],advanceWidth:0})}}return{header:g,nameIndex:y,topDictIndex:k,stringIndex:$,globalSubrIndex:V,encodings:oe,charsets:re,charStringIndex:le,topDict:z,glyphTables:de}},createIndex=async e=>{let n=1;const r=[n];let g=[];for(let V=0;V<e.length;V+=1){incrementProgress(void 0,1),await yieldToEventLoop(V+1,50);const L=e[V].type,z=e[V].value,j=encoder[L](z);g=g.concat(j),n+=j.length,r.push(n)}if(g.length===0)return[0,0];const y=[],k=4,$=[void 0,encoder.uint8,encoder.uint16,encoder.uint24,encoder.uint32][k];for(let V=0;V<r.length;V+=1){const L=$(r[V]);Array.prototype.push.apply(y,L)}return Array.prototype.concat(encoder.Card16(e.length),encoder.OffSize(k),y,g)};function equals(e,n){if(e===n)return!0;if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r+=1)if(!equals(e[r],n[r]))return!1;return!0}else return!1}function encodeString(e,n){let r,g=cffStandardStrings.indexOf(e);g>=0&&(r=g);const y=encodeToASCII(e);return g=n.indexOf(y),g>=0?r=g+cffStandardStrings.length:(r=cffStandardStrings.length+n.length,n.push(y)),r}function encodeToASCII(e){return typeof e=="number"?e:e.split("").map(n=>{const r=n.charCodeAt(0);return r<128?n:`${r.toString(16).padStart(4,"0")}`}).join("")}const createDict=(e,n,r)=>{const g=[];for(let k=0;k<e.length;k+=1){const $=e[k];let V=n[$.name];if(V!==void 0&&!equals(V,$.value)){if($.type==="SID"&&(V=encodeString(V,r)),Array.isArray(V)){V=Object.assign([],V);for(let L=0;L<V.length;L++)$.type[L]==="SID"&&(V[L]=encodeString(V[L],r))}g.push({op:$.op,name:$.name,type:$.type,value:V})}}let y=[];for(let k=0;k<g.length;k+=1){const $=g[k],V=$.op;y=y.concat(encoder.Operand($.value,$.type)),y=y.concat(encoder.Operator(V))}return y},glyphToOps=e=>{const{lsb:n,xMin:r}=e,g=V=>V-r+n,y=[];y.push({name:"width",type:"number",value:e.advanceWidth});let k=0,$=0;for(let V=0;V<e.contours.length;V++){if(!e.contours[V].length)continue;const L=e.contours[V][0],z=Math.round(g(L.start.x)-k),j=Math.round(L.start.y-$);y.push({name:"dx",type:"number",value:z}),y.push({name:"dy",type:"number",value:j}),y.push({name:"rmoveto",type:"op",value:21}),k=Math.round(g(L.start.x)),$=Math.round(L.start.y);for(let ae=0;ae<e.contours[V].length;ae++){const oe=e.contours[V][ae];switch(oe.type){case PathType.LINE:{const re=Math.round(g(oe.end.x)-k),ue=Math.round(oe.end.y-$);y.push({name:"dx",type:"number",value:re}),y.push({name:"dy",type:"number",value:ue}),y.push({name:"rlineto",type:"op",value:5}),k=Math.round(g(oe.end.x)),$=Math.round(oe.end.y);break}case PathType.CUBIC_BEZIER:{const re=Math.round(g(oe.control1.x)-k),ue=Math.round(oe.control1.y-$),le=Math.round(g(oe.control2.x)-g(oe.control1.x)),de=Math.round(oe.control2.y-oe.control1.y),he=Math.round(g(oe.end.x)-g(oe.control2.x)),_e=Math.round(oe.end.y-oe.control2.y);y.push({name:"dx1",type:"number",value:re}),y.push({name:"dy1",type:"number",value:ue}),y.push({name:"dx2",type:"number",value:le}),y.push({name:"dy2",type:"number",value:de}),y.push({name:"dx",type:"number",value:he}),y.push({name:"dy",type:"number",value:_e}),y.push({name:"rrcurveto",type:"op",value:8}),k=Math.round(g(oe.end.x)),$=Math.round(oe.end.y)}}}}return y.push({name:"endchar",type:"op",value:14}),y},createTable=(e,n)=>{const r=1/n.unitsPerEm,g={header:{major:1,minor:0,hdrSize:4,offSize:2},nameIndex:{data:[n.postScriptName]},globalSubrIndex:{data:[]},topDict:{version:n.version,fullName:n.fullName,familyName:n.familyName,weight:n.weightName,fontBBox:n.fontBBox||[0,0,0,0],fontMatrix:[r,0,0,r,0,0],charset:999,charStrings:999,ros:["Adobe","GB1",5],cidFontVersion:1,cidFontRevision:0,cidFontType:0,cidCount:e.length,isFixedPitch:1,fdArray:0,fdSelect:0}},y=[];for(let $=1;$<e.length;$++)y.push(e[$].name);const k=[];return g.charsets={format:0,data:y},g.glyphTables=e.map($=>{const V={numberOfContours:$.contourNum,contours:$.contours,advanceWidth:$.advanceWidth,lsb:$.leftSideBearing,rsb:$.rightSideBearing,xMin:$.xMin,xMax:$.xMax,yMin:$.yMin,yMax:$.yMax};return $.name&&(V.name=$.name),V}),g.stringIndex={data:k},g},create$7=async e=>{const n=e,r=n.header;let g=[];const y=n.glyphTables;for(const Pt of headerFieldOrder){const hn=r[Pt],Dt=types$2[Pt],xn=encoder[Dt](hn);xn&&(g=g.concat(xn))}const k=n.nameIndex;reserveProgressBudget(k.data.length),setProgressMessage(" Name Index");const $=await createIndex(k.data.map(Pt=>({type:"Name",value:Pt}))),V=[],L=[0,0],z=n.charsets.data;let j=[];j=j.concat(encoder.Card8(0)),reserveProgressBudget(z.length+y.length+1),setProgressMessage(" CFF charset");for(let Pt=0;Pt<z.length;Pt+=1){const hn=Pt+1;j=j.concat(encoder.SID(hn)),incrementProgress(void 0,1),await yieldToEventLoop(Pt+1,50)}const ae=[];setProgressMessage(" CFF CharStrings");const oe=120,re=y.length;for(let Pt=0;Pt<re;Pt+=oe){const hn=Math.min(Pt+oe,re);for(let Dt=Pt;Dt<hn;Dt++){const xn=y[Dt],jt=glyphToOps(xn);ae.push({type:"CharString",value:jt}),incrementProgress(void 0,1),await yieldToEventLoop(Dt+1,50)}}reserveProgressBudget(ae.length),setProgressMessage(" Charstring Index");const ue=await createIndex(ae),le={private:[0,0],fontBBox:n.topDict.fontBBox,fontMatrix:n.topDict.fontMatrix,fontName:n.topDict.familyName,weight:n.topDict.weight};let de=createDict(FONT_DICT_META,le,V);reserveProgressBudget(1),setProgressMessage(" fdIndex Index");let he=await createIndex([{type:"raw",value:de}]);const _e=createFDSelect(y);let xe=createDict(TOP_DICT_META,n.topDict,V);reserveProgressBudget(1),setProgressMessage(" topDictIndex Index");let Ne=await createIndex([{type:"raw",value:xe}]),Ce=createDict(PRIVATE_DICT_META,{BlueValues:[-16,16,800,16],OtherBlues:[-216,16],BlueScale:.039625,BlueShift:7,BlueFuzz:1,ForcedBold:0,LanguageGroup:0,ExpansionFactor:.06,initialRandomSeed:0,defaultWidthX:0,nominalWidthX:0,StdHW:50,StdVW:100},V);n.stringIndex,reserveProgressBudget(V.length),setProgressMessage(" String Index");const Ie=await createIndex(V.map(Pt=>({type:"Name",value:Pt}))),ze=g.length+$.length+Ne.length+Ie.length+L.length;return n.topDict.charset=ze,n.topDict.charStrings=n.topDict.charset+j.length+_e.length,n.topDict.fdArray=n.topDict.charStrings+ue.length,n.topDict.fdSelect=n.topDict.charset+j.length,le.private[0]=Ce.length,le.private[1]=n.topDict.charStrings+ue.length+he.length,de=createDict(FONT_DICT_META,le,V),reserveProgressBudget(1),setProgressMessage(" fdIndex Index"),he=await createIndex([{type:"raw",value:de}]),xe=createDict(TOP_DICT_META,n.topDict,V),reserveProgressBudget(1),setProgressMessage(" topDictIndex Index"),Ne=await createIndex([{type:"raw",value:xe}]),[...g,...$,...Ne,...Ie,...L,...j,..._e,...ue,...he,...Ce]},cffTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$7,createTable,parse:parse$8,parseType2CharString},Symbol.toStringTag,{value:"Module"})),tableTypes={majorVersion:"uint16",minorVersion:"uint16",axesArrayOffset:"Offset16",reserved:"uint16",axisCount:"uint16",axisSize:"uint16",instanceCount:"uint16",instanceSize:"uint16"},tableFieldOrder=["majorVersion","minorVersion","axesArrayOffset","reserved","axisCount","axisSize","instanceCount","instanceSize"],axisTypes={axisTag:"Tag",minValue:"Fixed",defaultValue:"Fixed",maxValue:"Fixed",flags:"uint16",axisNameID:"uint16"},axisFieldOrder=["axisTag","minValue","defaultValue","maxValue","flags","axisNameID"],instanceTypes={subfamilyNameID:"uint16",flags:"uint16",coordinates:"Fixed",postScriptNameID:"uint16"},instanceFieldOrder=["subfamilyNameID","flags","coordinates","postScriptNameID"],parse$7=(e,n,r)=>{const g={axes:[],instances:[]};start(e,n);for(const $ of tableFieldOrder)g[$]=decoder[tableTypes[$]]();const y=g.axisCount||0;for(let $=0;$<y;$++){const V={};for(const L of axisFieldOrder)V[L]=decoder[axisTypes[L]]();g.axes?.push(V)}const k=g.instanceCount||0;for(let $=0;$<k;$++){const V={};for(const L of instanceFieldOrder)V[L]=decoder[instanceTypes[L]]();g.instances?.push(V)}return end$1(),g},create$6=e=>{let n=[];const r=encoder.uint16(e.majorVersion||1),g=encoder.uint16(e.minorVersion||0),y=encoder.Offset16(e.axesArrayOffset||16),k=encoder.uint16(e.reserved||2),$=encoder.uint16(e.axisCount||0),V=encoder.uint16(e.axisSize||20),L=encoder.uint16(e.instanceCount||0),z=4+(e.axisCount||0)*4+2,j=encoder.uint16(e.instanceSize||z);if(r&&(n=n.concat(r)),g&&(n=n.concat(g)),y&&(n=n.concat(y)),k&&(n=n.concat(k)),$&&(n=n.concat($)),V&&(n=n.concat(V)),L&&(n=n.concat(L)),j&&(n=n.concat(j)),e.axes)for(let ae=0;ae<e.axes.length;ae++){const oe=e.axes[ae],re=encoder.Tag(oe.axisTag),ue=encoder.Fixed(oe.minValue||0),le=encoder.Fixed(oe.defaultValue||0),de=encoder.Fixed(oe.maxValue||0),he=encoder.uint16(oe.flags||0),_e=encoder.uint16(oe.axisNameID||0);re&&(n=n.concat(re)),ue&&(n=n.concat(ue)),le&&(n=n.concat(le)),de&&(n=n.concat(de)),he&&(n=n.concat(he)),_e&&(n=n.concat(_e))}if(e.instances)for(let ae=0;ae<e.instances.length;ae++){const oe=e.instances[ae],re=encoder.uint16(oe.subfamilyNameID||0),ue=encoder.uint16(oe.flags||0);if(re&&(n=n.concat(re)),ue&&(n=n.concat(ue)),oe.coordinates)if(Array.isArray(oe.coordinates))for(const le of oe.coordinates){const de=encoder.Fixed(le);de&&(n=n.concat(de))}else{const le=encoder.Fixed(oe.coordinates);le&&(n=n.concat(le))}if(oe.postScriptNameID!==void 0){const le=encoder.uint16(oe.postScriptNameID);le&&(n=n.concat(le))}}return n},createFvarTable=e=>{const n={};if(n.majorVersion=1,n.minorVersion=0,n.axisCount=e.axes?e.axes.length:0,e.axes&&(n.axes=e.axes.map(r=>({axisTag:r.tag||r.axisTag,minValue:r.minValue,defaultValue:r.defaultValue,maxValue:r.maxValue,flags:r.flags||0,axisNameID:r.nameID}))),n.instances=[],e.instances&&e.instances.length>0)n.instances=e.instances.map(r=>({subfamilyNameID:r.subfamilyNameID,flags:r.flags||0,coordinates:r.coordinates,postScriptNameID:r.postScriptNameID}));else if(console.warn(" No instances provided. Creating default instance for Adobe app compatibility."),n.axes&&n.axes.length>0){const r=n.axes.map(g=>g.defaultValue||0);n.instances=[{subfamilyNameID:2,flags:0,coordinates:r,postScriptNameID:6}],console.log(` Created default instance: subfamilyNameID=2, coordinates=[${r.join(", ")}], postScriptNameID=6`)}return n.instanceCount=n.instances.length,n},fvarTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$6,createFvarTable,parse:parse$7},Symbol.toStringTag,{value:"Module"})),floatToF2DOT14=e=>Math.round(e*16384),f2DOT14ToFloat=e=>(e&32768&&(e=e-65536),e/16384),extractPointsFromContours=e=>{const n=[];for(const r of e)for(let g=0;g<r.length;g++){const y=r[g];g===0&&n.push({x:y.start.x,y:y.start.y}),y.type===PathType.QUADRATIC_BEZIER?n.push({x:y.control.x,y:y.control.y}):y.type===PathType.CUBIC_BEZIER&&(console.error(" ERROR: Cubic Bezier curve found in gvar table!"),n.push({x:y.control1.x,y:y.control1.y}),n.push({x:y.control2.x,y:y.control2.y})),g<r.length-1&&n.push({x:y.end.x,y:y.end.y})}return n},calculateDeltas=(e,n)=>{const r=extractPointsFromContours(e),g=extractPointsFromContours(n);if(r.length!==g.length)return console.error(` Point count mismatch: default=${r.length}, variant=${g.length}`),console.error("    This glyph's script generates different path counts at different parameter values"),console.error("    Skipping variation data for this glyph (it will not vary in the font)"),new Array(r.length).fill({xDelta:0,yDelta:0});r.length>500&&console.warn(` Large glyph detected: ${r.length} points. This may be slow.`);const y=[];let k=0;for(let $=0;$<r.length;$++){const V=Math.round(g[$].x-r[$].x),L=Math.round(g[$].y-r[$].y);(V!==0||L!==0)&&k++,y.push({xDelta:V,yDelta:L})}return k===0&&r.length>0&&(console.warn(` All deltas are zero! (${r.length} points checked)`),console.warn(`  First default point: (${r[0]?.x.toFixed(2)}, ${r[0]?.y.toFixed(2)})`),console.warn(`  First variant point: (${g[0]?.x.toFixed(2)}, ${g[0]?.y.toFixed(2)})`)),y},encodePackedDeltas=e=>{const n=[];let k=0;for(;k<e.length;){const $=e[k];let V;$===0?V=128:$>=-128&&$<=127?V=0:V=64;let L=1;for(;k+L<e.length&&L<64;){const j=e[k+L];let ae;if(j===0?ae=128:j>=-128&&j<=127?ae=0:ae=64,ae!==V)break;L++}const z=V|L-1;if(n.push(z),V!==128)for(let j=0;j<L;j++){const ae=e[k+j];if(V===0)n.push(ae>=0?ae:256+ae);else{const oe=encoder.int16(ae);oe&&n.push(...oe)}}k+=L}return n},encodeDeltas=e=>{if(e.length===0)return[];const n=e.map($=>Math.round($.xDelta)),r=e.map($=>Math.round($.yDelta));n.push(0,0,0,0),r.push(0,0,0,0);const g=[],y=encodePackedDeltas(n);g.push(...y);const k=encodePackedDeltas(r);return g.push(...k),g},decodeDeltas=(e,n)=>{const r=[];let g=0;for(let y=0;y<n;y++){let k=0,$=0;g<e.length&&(k=e[g++],k&128?(k=k<<8|e[g++],k&32768&&(k-=65536)):k&128&&(k-=256)),g<e.length&&($=e[g++],$&128?($=$<<8|e[g++],$&32768&&($-=65536)):$&128&&($-=256)),r.push({xDelta:k,yDelta:$})}return r},applyDeltas=(e,n)=>{const r=[];let g=0;for(const y of e){const k=[];for(const $ of y)if($.type===PathType.LINE){const V=n[g++],L=n[g++];k.push({type:PathType.LINE,start:{x:$.start.x+V.xDelta,y:$.start.y+V.yDelta},end:{x:$.end.x+L.xDelta,y:$.end.y+L.yDelta},fill:$.fill})}else if($.type===PathType.QUADRATIC_BEZIER){const V=n[g++],L=n[g++],z=n[g++];k.push({type:PathType.QUADRATIC_BEZIER,start:{x:$.start.x+V.xDelta,y:$.start.y+V.yDelta},control:{x:$.control.x+L.xDelta,y:$.control.y+L.yDelta},end:{x:$.end.x+z.xDelta,y:$.end.y+z.yDelta},fill:$.fill})}else if($.type===PathType.CUBIC_BEZIER){const V=n[g++],L=n[g++],z=n[g++],j=n[g++];k.push({type:PathType.CUBIC_BEZIER,start:{x:$.start.x+V.xDelta,y:$.start.y+V.yDelta},control1:{x:$.control1.x+L.xDelta,y:$.control1.y+L.yDelta},control2:{x:$.control2.x+z.xDelta,y:$.control2.y+z.yDelta},end:{x:$.end.x+j.xDelta,y:$.end.y+j.yDelta},fill:$.fill})}r.push(k)}return r},parse$6=(e,n,r)=>{const g={};start(e,n),g.majorVersion=decoder.uint16(),g.minorVersion=decoder.uint16(),g.axisCount=decoder.uint16(),g.sharedTupleCount=decoder.uint16(),g.offsetToSharedTuples=decoder.Offset32(),g.glyphCount=decoder.uint16(),g.flags=decoder.uint16(),g.offsetToGlyphVariationData=decoder.Offset32();const y=g.flags&1?4:2;g.glyphVariationDataArrayOffset=[];for(let k=0;k<=g.glyphCount;k++)y===4?g.glyphVariationDataArrayOffset.push(decoder.Offset32()):g.glyphVariationDataArrayOffset.push(decoder.Offset16()*2);if(g.sharedTupleCount>0){start(e,n+g.offsetToSharedTuples),g.sharedTuples=[];for(let k=0;k<g.sharedTupleCount;k++){const $={peakTuple:[]};for(let V=0;V<g.axisCount;V++){const L=decoder.int16();$.peakTuple.push(f2DOT14ToFloat(L))}g.sharedTuples.push($)}}return g.glyphVariationData=[],end$1(),g},create$5=e=>{const n=e.majorVersion||1,r=e.minorVersion||0,g=e.axisCount||0,y=e.sharedTupleCount||0,k=e.glyphCount||0,$=e.flags||1,V=[];if(e.sharedTuples&&e.sharedTuples.length>0){for(const _e of e.sharedTuples)if(_e.peakTuple)for(const xe of _e.peakTuple){const Ne=floatToF2DOT14(xe),$e=encoder.int16(Ne);$e&&V.push(...$e)}}const L=[];if(e.glyphVariationData)for(let _e=0;_e<k;_e++)_e<e.glyphVariationData.length&&e.glyphVariationData[_e].serializedData?L.push(e.glyphVariationData[_e].serializedData):L.push([]);else for(let _e=0;_e<k;_e++)L.push([]);const z=20,j=$&1?4:2,ae=(k+1)*j,oe=z+ae,re=oe+V.length,ue=[0];let le=0;for(const _e of L)le+=_e.length,ue.push(le);const de=[],he=[...encoder.uint16(n)||[],...encoder.uint16(r)||[],...encoder.uint16(g)||[],...encoder.uint16(y)||[],...encoder.Offset32(oe)||[],...encoder.uint16(k)||[],...encoder.uint16($)||[],...encoder.Offset32(re)||[]];de.push(...he);for(const _e of ue)if(j===4){const xe=encoder.Offset32(_e);xe&&de.push(...xe)}else{const xe=encoder.Offset16(_e/2);xe&&de.push(...xe)}de.push(...V);for(const _e of L)de.push(..._e);return de},createGlyphVariationData=(e,n)=>{if(!e||e.length===0)return{tupleVariationHeaders:[],pointDeltas:[],serializedData:[]};const r={tupleVariationHeaders:[],pointDeltas:[]};for(const ue of n){r.tupleVariationHeaders.push({peakTuple:ue.peakTuple});const le=calculateDeltas(e,ue.contours);r.pointDeltas.push(le)}if(!r.tupleVariationHeaders||r.tupleVariationHeaders.length===0)return r.serializedData=[],r;const g=r.tupleVariationHeaders.length,y=r.tupleVariationHeaders[0].peakTuple?.length||0,k=[];for(let ue=0;ue<r.pointDeltas.length;ue++){const le=r.pointDeltas[ue],de=encodeDeltas(le);k.push(de)}const $=4+g*(4+y*2),V=[],z=g&4095|32768,j=encoder.uint16(z);j&&V.push(...j);const ae=$,oe=encoder.uint16(ae);oe&&V.push(...oe);let re=0;for(let ue=0;ue<g;ue++){const le=r.tupleVariationHeaders[ue],de=k[ue],he=encoder.uint16(de.length);he&&V.push(...he);const xe=encoder.uint16(32768);if(xe&&V.push(...xe),le.peakTuple)for(const Ne of le.peakTuple){const $e=floatToF2DOT14(Ne),Ce=encoder.int16($e);Ce&&V.push(...Ce)}re+=de.length}V.push(0);for(const ue of k)V.push(...ue);return r.serializedData=V,r},createGvarTable=(e,n)=>{const r={};if(r.majorVersion=1,r.minorVersion=0,r.axisCount=e.axes?e.axes.length:0,r.sharedTupleCount=0,r.glyphCount=n.length,r.glyphVariationData=[],console.log(" createGvarTable received:"),console.log(`  _variants: ${!!e}`),console.log(`  _variants.combinations: ${!!e?.combinations}`),console.log(`  _variants.combinations.length: ${e?.combinations?.length||0}`),!e.combinations||e.combinations.length===0)return console.warn(" No variation combinations provided, creating empty gvar table"),r;console.log(` Processing ${n.length} glyphs for gvar table...`);for(let g=0;g<n.length;g++){g%5===0&&console.log(`  Processing glyph ${g}/${n.length}...`);const k=n[g].contours;if(!k||k.length===0||k.every(L=>!L||L.length===0)){console.log(`    Glyph ${g} (${n[g]?.name||"unnamed"}): Empty glyph, skipping variation data`),r.glyphVariationData.push({tupleVariationHeaders:[],pointDeltas:[],serializedData:[]});continue}if(g===2&&(console.log(`   Glyph ${g}: defaultContours has ${k?.length||0} contours`),k&&k.length>0)){const L=k.reduce((z,j)=>z+j.length,0);console.log(`     Total paths: ${L}`)}const V=e.combinations.map(L=>!L.overlapRemovedContours||!L.overlapRemovedContours[g]||!L.overlapRemovedContours[g].contours?(console.error(`Missing contours for character ${g} in combination`,L),null):{peakTuple:L.tuple,contours:L.overlapRemovedContours[g].contours}).filter(L=>L!==null);V.length>0?r.glyphVariationData.push(createGlyphVariationData(k,V)):r.glyphVariationData.push({tupleVariationHeaders:[],pointDeltas:[],serializedData:[]})}return console.log(` Processed all ${n.length} glyphs`),r},gvarTable=Object.freeze(Object.defineProperty({__proto__:null,applyDeltas,calculateDeltas,create:create$5,createGlyphVariationData,createGvarTable,decodeDeltas,encodeDeltas,extractPointsFromContours,f2DOT14ToFloat,floatToF2DOT14,parse:parse$6},Symbol.toStringTag,{value:"Module"}));function createStatTable(e,n={}){const r=[],g=[];return(e.axes??[]).forEach((k,$)=>{const V=typeof k.axisTag=="string"?k.axisTag:k.axisTag?.tagStr||"unkn";r.push({axisTag:V,axisNameID:k.axisNameID??0,axisOrdering:$}),g.push({format:1,axisIndex:$,flags:0,valueNameID:k.axisNameID??0,value:k.defaultValue??k.minValue??0})}),{majorVersion:1,minorVersion:2,designAxisSize:8,designAxisCount:r.length,designAxesOffset:20,axisValueCount:g.length,offsetToAxisValueOffsets:20+r.length*8,elidedFallbackNameID:n.elidedFallbackNameID||2,axes:r,axisValues:g}}function create$4(e,n){const r=[];r.push(...encoder.uint16(e.majorVersion)||[]),r.push(...encoder.uint16(e.minorVersion)||[]),r.push(...encoder.uint16(e.designAxisSize)||[]),r.push(...encoder.uint16(e.designAxisCount)||[]),r.push(...encoder.uint32(e.designAxesOffset)||[]),r.push(...encoder.uint16(e.axisValueCount)||[]),r.push(...encoder.uint32(e.offsetToAxisValueOffsets)||[]),r.push(...encoder.uint16(e.elidedFallbackNameID)||[]);for(const y of e.axes)r.push(...encoder.Tag(y.axisTag)||[]),r.push(...encoder.uint16(y.axisNameID)||[]),r.push(...encoder.uint16(y.axisOrdering)||[]);const g=e.offsetToAxisValueOffsets+e.axisValueCount*2;for(let y=0;y<e.axisValueCount;y++){const k=g+y*12;r.push(...encoder.uint16(k-e.offsetToAxisValueOffsets)||[])}for(const y of e.axisValues)r.push(...encoder.uint16(y.format)||[]),r.push(...encoder.uint16(y.axisIndex)||[]),r.push(...encoder.uint16(y.flags)||[]),r.push(...encoder.uint16(y.valueNameID)||[]),r.push(...encoder.Fixed(y.value)||[]);return console.log(" STAT table created:"),console.log(`   Version: ${e.majorVersion}.${e.minorVersion}`),console.log(`   Design axes: ${e.designAxisCount}`),console.log(`   Axis values: ${e.axisValueCount}`),console.log(`   Table size: ${r.length} bytes`),r}const STAT={create:create$4,createStatTable},STATTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$4,createStatTable,default:STAT},Symbol.toStringTag,{value:"Module"}));function parseRgba(e){if(!e)return{red:0,green:0,blue:0,alpha:255};const n=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);if(n){const r=parseInt(n[1]),g=parseInt(n[2]),y=parseInt(n[3]),k=n[4]?parseFloat(n[4]):1;return{red:r,green:g,blue:y,alpha:Math.round(k*255)}}return{red:0,green:0,blue:0,alpha:255}}function create$3(e){let n=[];const r=encoder.uint16(e.version);r&&(n=n.concat(r));const g=encoder.uint16(e.numPaletteEntries);g&&(n=n.concat(g));const y=encoder.uint16(e.numPalettes);y&&(n=n.concat(y));const k=encoder.uint16(e.numColorRecords);k&&(n=n.concat(k));const $=12+e.numPalettes*2,V=encoder.uint32($);V&&(n=n.concat(V));for(let L=0;L<e.colorRecordIndices.length;L++){const z=encoder.uint16(e.colorRecordIndices[L]);z&&(n=n.concat(z))}for(let L=0;L<e.colorRecords.length;L++){const z=e.colorRecords[L],j=encoder.uint8(z.blue),ae=encoder.uint8(z.green),oe=encoder.uint8(z.red),re=encoder.uint8(z.alpha);j&&(n=n.concat(j)),ae&&(n=n.concat(ae)),oe&&(n=n.concat(oe)),re&&(n=n.concat(re))}return n}function buildColorMap(e){const n=new Map,r=[];for(const g of e)if(!(!g.layers||g.layers.length===0))for(const y of g.layers){const k=y.fillColor||"rgba(0, 0, 0, 1)";if(!n.has(k)){const $=parseRgba(k);n.set(k,r.length),r.push($)}}return r.length===0&&r.push({red:0,green:0,blue:0,alpha:255}),{colorMap:n,colorRecords:r}}function createFromLayers(e){const{colorRecords:n}=buildColorMap(e);return{version:0,numPaletteEntries:n.length,numPalettes:1,numColorRecords:n.length,colorRecords:n,colorRecordIndices:[0]}}const cpalTable=Object.freeze(Object.defineProperty({__proto__:null,buildColorMap,create:create$3,createFromLayers,parseRgba},Symbol.toStringTag,{value:"Module"}));function create$2(e){let n=[];const r=encoder.uint16(e.version);r&&(n=n.concat(r));const g=encoder.uint16(e.numBaseGlyphRecords);g&&(n=n.concat(g));const y=14,k=encoder.uint32(y);k&&(n=n.concat(k));const $=y+e.numBaseGlyphRecords*6,V=encoder.uint32($);V&&(n=n.concat(V));const L=encoder.uint16(e.numLayerRecords);L&&(n=n.concat(L));for(let z=0;z<e.baseGlyphRecords.length;z++){const j=e.baseGlyphRecords[z],ae=encoder.uint16(j.glyphID),oe=encoder.uint16(j.firstLayerIndex),re=encoder.uint16(j.numLayers);ae&&(n=n.concat(ae)),oe&&(n=n.concat(oe)),re&&(n=n.concat(re))}for(let z=0;z<e.layerRecords.length;z++){const j=e.layerRecords[z],ae=encoder.uint16(j.glyphID),oe=encoder.uint16(j.paletteIndex);ae&&(n=n.concat(ae)),oe&&(n=n.concat(oe))}return n}function createFromCharacters(e){const n=[],r=[],g=new Map;let y=0;for(const k of e)if(!(!k.layers||k.layers.length===0))for(const $ of k.layers){const V=$.fillColor||"rgba(0, 0, 0, 1)";g.has(V)||g.set(V,y++)}for(let k=0;k<e.length;k++){const $=e[k];if($.layers&&$.layers.length>0){const V=r.length;for(const L of $.layers){const z=L.fillColor||"rgba(0, 0, 0, 1)",j=g.get(z)||0;r.push({glyphID:k,paletteIndex:j})}n.push({glyphID:k,firstLayerIndex:V,numLayers:$.layers.length})}}return{version:0,numBaseGlyphRecords:n.length,baseGlyphRecords:n,layerRecords:r,numLayerRecords:r.length}}function createFromCharactersV0(e,n){const r=[],g=[],{colorMap:y}=buildColorMap(e);let k=e.length;for(let $=0;$<e.length;$++){const V=e[$];if(V.layers&&V.layers.length>0){const L=g.length;for(const z of V.layers){const j=z.fillColor||"rgba(0, 0, 0, 1)",ae=y.get(j)||0;g.push({glyphID:k++,paletteIndex:ae})}r.push({glyphID:$,firstLayerIndex:L,numLayers:V.layers.length})}}return{version:0,numBaseGlyphRecords:r.length,baseGlyphRecords:r,layerRecords:g,numLayerRecords:g.length}}const colrTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$2,createFromCharacters,createFromCharactersV0},Symbol.toStringTag,{value:"Module"})),tableTool={head:headTable,hhea:hheaTable,"OS/2":os2Table,maxp:maxpTable,name:nameTable,post:postTable,cmap:cmapTable,hmtx:hmtxTable,glyf:glyfTable,loca:locaTable,"CFF ":cffTable,fvar:fvarTable,gvar:gvarTable,STAT:STATTable,COLR:colrTable,CPAL:cpalTable},types$1={sfntVersion:"Tag",numTables:"uint16",searchRange:"uint16",entrySelector:"uint16",rangeShift:"uint16",tag:"Tag",checkSum:"uint32",offset:"uint32",length:"uint32"},recordFieldOrder=["tag","checkSum","offset","length"],log2=e=>Math.log(e)/Math.log(2)|0,createRecord=e=>{let n=[];for(const r of recordFieldOrder){const g=types$1[r],y=e[r],k=encoder[g](y);k&&(n=n.concat(k))}return n},createConfig=e=>{let n=[];const r=e.sfntVersion;let g=!1;typeof r=="number"?g=encoder.uint32(r):typeof r=="string"&&(g=encoder.Tag(r)),g?(n=n.concat(g),console.log(` sfntVersion encoded: ${g.length} bytes [${g.join(", ")}]`)):console.error(" Failed to encode sfntVersion:",r);const y=["numTables","searchRange","entrySelector","rangeShift"];for(const k of y){const $=types$1[k],V=e[k],L=encoder[$](V);L&&(n=n.concat(L))}return console.log(` Config header: ${n.length} bytes total (expected: 12)`),n.length!==12&&console.error(` Config header size mismatch! Got ${n.length}, expected 12`),n},updateCharactersByTables=e=>{e.characters=parseTablesToCharacters(e.tables)},parse$5=(e,n)=>{start(e,0);const r=decoder[types$1.sfntVersion](),g=decoder[types$1.numTables](),y=decoder[types$1.searchRange](),k=decoder[types$1.entrySelector](),$=decoder[types$1.rangeShift](),V={sfntVersion:r,numTables:g,searchRange:y,entrySelector:k,rangeShift:$};n.tableConfig=V;for(let z=0;z<g;z++){const j=decoder[types$1.tag](),ae=decoder[types$1.checkSum](),oe=decoder[types$1.offset](),re=decoder[types$1.length](),ue={name:j.tagStr,table:null,config:{tableTag:j,checkSum:ae,offset:oe,length:re}};n.tables.push(ue)}end$1();const L={head:1,maxp:2,loca:3,hhea:4,name:5,post:6,"OS/2":7,hmtx:8,cmap:9,glyf:10,"CFF ":11};return n.tables=n.tables.filter(z=>L[z.name]).sort((z,j)=>L[z.name]-L[j.name]),n.tables.map(z=>{z.table=tableTool[z.name]?.parse(e,z.config.offset,n)}),updateCharactersByTables(n),n},create$1=async(e,n="")=>{let r=0;const g=[],y={},k=[];for(const _e in e)Object.prototype.hasOwnProperty.call(e,_e)&&k.push(_e);const $=k.length,V=Math.pow(2,log2($)),L=16*V,z=!!e.glyf,j=!!e["CFF "],ae=z?65536:"OTTO";console.log(`
=== Font Format Detection ===`),console.log(`Has glyf table: ${z}`),console.log(`Has CFF table: ${j}`),console.log(`sfntVersion: ${typeof ae=="number"?"0x"+ae.toString(16).padStart(8,"0"):ae} (${z?"TrueType":"CFF"})`),console.log(`==============================
`);const oe=createConfig({sfntVersion:ae,numTables:$,searchRange:L,entrySelector:log2(V),rangeShift:$*16-L});r+=computeCheckSum(oe),r%=4294967296;let re=[],ue=[];k.sort((_e,xe)=>_e>xe?1:-1);let le=oe.length+createRecord({tag:"xxxx",checkSum:0,offset:0,length:0}).length*$,de=0;for(;le%4!==0;)le++,de++;console.log(`
 Processing ${k.length} tables in order: ${k.join(", ")}
`),reserveProgressBudget(k.length+1),setProgressMessage(" SFNT ");for(let _e=0;_e<k.length;_e++){const xe=k[_e];console.log(` [${_e+1}/${k.length}] Creating table: ${xe}...`);const Ne=e[xe];let $e=null;const Ce=Date.now();if(setProgressMessage(` ${xe}  (${_e+1}/${k.length})`),xe==="loca"&&Ne._needsRealOffsets){const hn=Ne._glyfTableRef;if(hn&&hn._generatedOffsets){console.log(`
=== Creating loca table with real offsets ===`);const Dt=hn._generatedOffsets;console.log(`Using real offsets from glyf serialization: ${Dt.length} entries`),console.log(`First offsets: [${Dt.slice(0,5).join(", ")}...]`),console.log(`Last offsets: [...${Dt.slice(-5).join(", ")}]`);const xn={version:Ne.version||1,offsets:Dt};$e=tableTool[xe].create(xn,{version:xn.version}),console.log(` loca table created with real offsets
`)}else console.error(" ERROR: glyf table was not serialized yet or has no offsets!"),$e=tableTool[xe].create(Ne)}else xe==="CFF "?$e=await tableTool[xe].create(Ne):$e=tableTool[xe].create(Ne);$e&&typeof $e.then=="function"&&($e=await $e),console.log(`    Table ${xe} created: ${$e.length} bytes`),console.log(`    Computing checksum for ${xe}...`),y[xe]=$e;let Ie=computeCheckSum($e);if(Ie%=4294967296,console.log(`    Checksum for ${xe}: 0x${Ie.toString(16)}`),xe==="head"&&n==="final"){const hn=clone(Ne);hn.checkSumAdjustment=0;const Dt=tableTool[xe].create(hn);Ie=computeCheckSum(Dt),Ie%=4294967296}const ze=$e.length,Ue=createRecord({tag:xe,checkSum:Ie,offset:le,length:ze});g.push({name:xe,table:Ne,config:{tableTag:{tagStr:xe},checkSum:Ie,offset:le,length:ze}}),xe==="name"&&(console.log("=== NAME TABLE DEBUG ==="),console.log("Total checksum before name:",r),console.log("Name table offset:",le),console.log("Name table length:",ze),console.log("Name record data:",Ue),console.log("Name checksum:",Ie)),re=re.concat(Ue);const Pt=Date.now()-Ce;for(console.log(`    ${xe} table serialized in ${Pt}ms`),r+=computeCheckSum(Ue),r%=4294967296,r+=computeCheckSum($e),r%=4294967296,ue=ue.concat($e),le+=ze;le%4!==0;)le++,ue=ue.concat(encoder.uint8(0));incrementProgress(void 0,1),await yieldToEventLoop(_e+1,1)}for(let _e=0;_e<de;_e++)re=re.concat(encoder.uint8(0));r%=4294967296,console.log(`
=== FINAL DATA ASSEMBLY ===`),console.log("Config data length:",oe.length),console.log("Records data length:",re.length),console.log("Tables data length:",ue.length),console.log("Total:",oe.length+re.length+ue.length);const he=k.indexOf("name");if(he>=0){const _e=oe.length+he*16;console.log(`
=== NAME RECORD VERIFICATION ===`),console.log("Name record index in sorted keys:",he),console.log("Name record should start at:",_e);const xe=[...oe,...re,...ue];console.log("Name record in final data ["+_e+"-"+(_e+15)+"]:"),console.log(xe.slice(_e,_e+16)),console.log("  Tag:",xe.slice(_e,_e+4).map(Ne=>String.fromCharCode(Ne)).join("")),console.log("  CheckSum:",[xe[_e+4],xe[_e+5],xe[_e+6],xe[_e+7]]),console.log("  Offset:",xe[_e+8]<<24|xe[_e+9]<<16|xe[_e+10]<<8|xe[_e+11]),console.log("  Length:",xe[_e+12]<<24|xe[_e+13]<<16|xe[_e+14]<<8|xe[_e+15])}return console.log(`===============================
`),incrementProgress(" SFNT ",1),{data:[...oe,...re,...ue],tables:g,tablesDataMap:y,checksum:r}};var UNIHANS=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],PINYINS=["A","AI","AN","ANG","AO","BA","BAI","BAN","BANG","BAO","BEI","BEN","BENG","BI","BIAN","BIAO","BIE","BIN","BING","BO","BU","CA","CAI","CAN","CANG","CAO","CE","CEN","CENG","CHA","CHAI","CHAN","CHANG","CHAO","CHE","CHEN","CHENG","CHI","CHONG","CHOU","CHU","CHUA","CHUAI","CHUAN","CHUANG","CHUI","CHUN","CHUO","CI","CONG","COU","CU","CUAN","CUI","CUN","CUO","DA","DAI","DAN","DANG","DAO","DE","DEN","DENG","DI","DIAN","DIAO","DIE","DING","DIU","DONG","DOU","DU","DUAN","DUI","DUN","DUO","E","EI","EN","ENG","ER","FA","FAN","FANG","FEI","FEN","FENG","FIAO","FO","FOU","FU","GA","GAI","GAN","GANG","GAO","GE","GEI","GEN","GENG","GONG","GOU","GU","GUA","GUAI","GUAN","GUANG","GUI","GUN","GUO","HA","HAI","HAN","HANG","HAO","HE","HEI","HEN","HENG","HM","HONG","HOU","HU","HUA","HUAI","HUAN","HUANG","HUI","HUN","HUO","JI","JIA","JIAN","JIANG","JIAO","JIE","JIN","JING","JIONG","JIU","JU","JUAN","JUE","JUN","KA","KAI","KAN","KANG","KAO","KE","KEN","KENG","KONG","KOU","KU","KUA","KUAI","KUAN","KUANG","KUI","KUN","KUO","LA","LAI","LAN","LANG","LAO","LE","LEI","LENG","LI","LIA","LIAN","LIANG","LIAO","LIE","LIN","LING","LIU","LO","LONG","LOU","LU","LV","LUAN","LVE","LUN","LUO","M","MA","MAI","MAN","MANG","MAO","ME","MEI","MEN","MENG","MI","MIAN","MIAO","MIE","MIN","MING","MIU","MO","MOU","MU","N","NA","NAI","NAN","NANG","NAO","NE","NEI","NEN","NENG","NI","NIAN","NIANG","NIAO","NIE","NIN","NING","NIU","NONG","NOU","NU","NV","NUAN","NVE","NUN","NUO","O","OU","PA","PAI","PAN","PANG","PAO","PEI","PEN","PENG","PI","PIAN","PIAO","PIE","PIN","PING","PO","POU","PU","QI","QIA","QIAN","QIANG","QIAO","QIE","QIN","QING","QIONG","QIU","QU","QUAN","QUE","QUN","RAN","RANG","RAO","RE","REN","RENG","RI","RONG","ROU","RU","RUA","RUAN","RUI","RUN","RUO","SA","SAI","SAN","SANG","SAO","SE","SEN","SENG","SHA","SHAI","SHAN","SHANG","SHAO","SHE","SHEN","SHENG","SHI","SHOU","SHU","SHUA","SHUAI","SHUAN","SHUANG","SHUI","SHUN","SHUO","SI","SONG","SOU","SU","SUAN","SUI","SUN","SUO","TA","TAI","TAN","TANG","TAO","TE","TENG","TI","TIAN","TIAO","TIE","TING","TONG","TOU","TU","TUAN","TUI","TUN","TUO","WA","WAI","WAN","WANG","WEI","WEN","WENG","WO","WU","XI","XIA","XIAN","XIANG","XIAO","XIE","XIN","XING","XIONG","XIU","XU","XUAN","XUE","XUN","YA","YAN","YANG","YAO","YE","YI","YIN","YING","YO","YONG","YOU","YU","YUAN","YUE","YUN","ZA","ZAI","ZAN","ZANG","ZAO","ZE","ZEI","ZEN","ZENG","ZHA","ZHAI","ZHAN","ZHANG","ZHAO","ZHE","ZHEN","ZHENG","ZHI","ZHONG","ZHOU","ZHU","ZHUA","ZHUAI","ZHUAN","ZHUANG","ZHUI","ZHUN","ZHUO","ZI","ZONG","ZOU","ZU","ZUAN","ZUI","ZUN","ZUO",""],EXCEPTIONS={:"ZENG",:"SHEN",:"DIA",:"ZHOU",:"GUO",:"QUE",:"KE",:"HUA",:"MO",:"MO",:"PAN",:"XI",:"PAN",:"XIAN",:"XIN",:"CHI",:"XING",:"JUN",:"CHANG",:"ZHEN",:"SHI",:"NA",:"XIONG",:"SHUI"},dict={PINYINS,UNIHANS,EXCEPTIONS},_typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DICT=dict,FIRST_PINYIN_UNIHAN="",LAST_PINYIN_UNIHAN="",LATIN=1,PINYIN=2,UNKNOWN=3,supported=null,COLLATOR=void 0;function patchDict(e){e&&(typeof e=="function"&&(e=[e]),e.forEach&&e.forEach(function(n){typeof n=="function"&&n(DICT)}))}function isSupported(e){return!e&&supported!==null||((typeof Intl>"u"?"undefined":_typeof$2(Intl))==="object"&&Intl.Collator?(COLLATOR=new Intl.Collator(["zh-Hans-CN","zh-CN"]),supported=Intl.Collator.supportedLocalesOf(["zh-CN"]).length===1):supported=!1),supported}function genToken(e){var n=DICT.UNIHANS,r=DICT.PINYINS,g=DICT.EXCEPTIONS,y={source:e};if(e in g)return y.type=PINYIN,y.target=g[e],y;var k=-1,$=void 0;if(e.charCodeAt(0)<256)return y.type=LATIN,y.target=e,y;if($=COLLATOR.compare(e,FIRST_PINYIN_UNIHAN),$<0)return y.type=UNKNOWN,y.target=e,y;if($===0)y.type=PINYIN,k=0;else{if($=COLLATOR.compare(e,LAST_PINYIN_UNIHAN),$>0)return y.type=UNKNOWN,y.target=e,y;$===0&&(y.type=PINYIN,k=n.length-1)}if(y.type=PINYIN,k<0)for(var V=0,L=n.length-1;V<=L;){k=~~((V+L)/2);var z=n[k];if($=COLLATOR.compare(e,z),$===0)break;$>0?V=k+1:L=k-1}return $<0&&k--,y.target=r[k],y.target||(y.type=UNKNOWN,y.target=y.source),y}function parse$4(e){if(typeof e!="string")throw new Error("argument should be string.");if(!isSupported())throw new Error("not support Intl or zh-CN language.");return e.split("").map(function(n){return genToken(n)})}var core={isSupported,parse:parse$4,patchDict,genToken,convertToPinyin:function(n,r,g){return parse$4(n).map(function(y){return g&&y.type===PINYIN?y.target.toLowerCase():y.target}).join(r||"")}},_56l={exports:{}};(function(e,n){n=e.exports=function(g){g.EXCEPTIONS={:"DIA",:"ZHOU",:"GUO",:"QUE",:"KE",:"HUA",:"MO",:"XI",:"PAN",:"XIAN",:"CHI",:"XING",:"ZHEN",:"XIONG",:"SHUI",:"KE"},g.UNIHANS[91]="",g.UNIHANS[347]="",g.UNIHANS[393]="",g.UNIHANS[39]="",g.UNIHANS[50]="",g.UNIHANS[369]="",g.UNIHANS[123]="",g.UNIHANS[171]="",g.UNIHANS[102]="",g.UNIHANS[126]="",g.UNIHANS[176]="",g.UNIHANS[178]="",g.UNIHANS[252]="",g.UNIHANS[330]=""},n.shouldPatch=function(g){return typeof g!="function"?!1:g("").target==="FOU"&&g("").target==="XIA"&&g("").target==="ZHONG"&&g("").target==="CHONG"&&g("").target==="CONG"&&g("").target==="YONG"&&g("").target==="HOU"&&g("").target==="LENG"&&g("").target==="GONG"&&g("").target==="HUAI"&&g("").target==="LIAO"&&g("").target==="LIN"&&g("").target==="E"}})(_56l,_56l.exports);var _56lExports=_56l.exports,pinyin=core,patcher56L=_56lExports;pinyin.isSupported()&&patcher56L.shouldPatch(pinyin.genToken)&&pinyin.patchDict(patcher56L);var dist$1=pinyin;function distance$g(e,n){const r=n.x-e.x,g=n.y-e.y;return Math.sqrt(r*r+g*g)}function cubicBezierPoint(e,n,r,g,y){const k=1-e,$=k*k,V=$*k,L=e*e,z=L*e;return{x:V*n.x+3*$*e*r.x+3*k*L*g.x+z*y.x,y:V*n.y+3*$*e*r.y+3*k*L*g.y+z*y.y}}function calculateError(e,n,r,g){let y=0;const k=10;for(let $=0;$<=k;$++){const V=$/k,L=cubicBezierPoint(V,e.start,e.control1,e.control2,e.end),z=1-V,j={x:z*z*n.x+2*z*V*r.x+V*V*g.x,y:z*z*n.y+2*z*V*r.y+V*V*g.y},ae=distance$g(L,j);ae>y&&(y=ae)}return y}function convertCubicToQuadratic(e,n=.5,r=0,g=10){if(r>=g){console.warn(` Max recursion depth (${g}) reached, using approximation`);const _e={x:(3*e.control1.x+3*e.control2.x)/6+(e.start.x+e.end.x)/6,y:(3*e.control1.y+3*e.control2.y)/6+(e.start.y+e.end.y)/6};return[{type:PathType.QUADRATIC_BEZIER,start:e.start,end:e.end,control:_e,fill:e.fill}]}const y={x:(3*e.control1.x+3*e.control2.x)/6+(e.start.x+e.end.x)/6,y:(3*e.control1.y+3*e.control2.y)/6+(e.start.y+e.end.y)/6},k={type:PathType.QUADRATIC_BEZIER,start:e.start,end:e.end,control:y,fill:e.fill},$=calculateError(e,e.start,y,e.end);if(distance$g(e.start,e.end)<1)return[k];if($<=n)return[k];const L=.5,z=1-L,j={x:z*e.start.x+L*e.control1.x,y:z*e.start.y+L*e.control1.y},ae={x:z*e.control1.x+L*e.control2.x,y:z*e.control1.y+L*e.control2.y},oe={x:z*e.control2.x+L*e.end.x,y:z*e.control2.y+L*e.end.y},re={x:z*j.x+L*ae.x,y:z*j.y+L*ae.y},ue={x:z*ae.x+L*oe.x,y:z*ae.y+L*oe.y},le={x:z*re.x+L*ue.x,y:z*re.y+L*ue.y},de={type:PathType.CUBIC_BEZIER,start:e.start,control1:j,control2:re,end:le,fill:e.fill},he={type:PathType.CUBIC_BEZIER,start:le,control1:ue,control2:oe,end:e.end,fill:e.fill};return[...convertCubicToQuadratic(de,n,r+1,g),...convertCubicToQuadratic(he,n,r+1,g)]}function convertContourToQuadratic(e,n=.5){const r=[];for(const g of e)if(g.type===PathType.CUBIC_BEZIER){const y=convertCubicToQuadratic(g,n,0,10);r.push(...y)}else r.push(g);return r}function convertCubicToQuadraticFixed(e,n=.5,r=0,g=2){if(r>=g){console.warn(` Max recursion depth (${g}) reached, using approximation`);const he={x:(3*e.control1.x+3*e.control2.x)/6+(e.start.x+e.end.x)/6,y:(3*e.control1.y+3*e.control2.y)/6+(e.start.y+e.end.y)/6};return[{type:PathType.QUADRATIC_BEZIER,start:e.start,end:e.end,control:he,fill:e.fill}]}const y={x:(3*e.control1.x+3*e.control2.x)/6+(e.start.x+e.end.x)/6,y:(3*e.control1.y+3*e.control2.y)/6+(e.start.y+e.end.y)/6},k={type:PathType.QUADRATIC_BEZIER,start:e.start,end:e.end,control:y,fill:e.fill};if(calculateError(e,e.start,y,e.end),distance$g(e.start,e.end)<1)return[k];if(r>=g)return[k];const V=.5,L=1-V,z={x:L*e.start.x+V*e.control1.x,y:L*e.start.y+V*e.control1.y},j={x:L*e.control1.x+V*e.control2.x,y:L*e.control1.y+V*e.control2.y},ae={x:L*e.control2.x+V*e.end.x,y:L*e.control2.y+V*e.end.y},oe={x:L*z.x+V*j.x,y:L*z.y+V*j.y},re={x:L*j.x+V*ae.x,y:L*j.y+V*ae.y},ue={x:L*oe.x+V*re.x,y:L*oe.y+V*re.y},le={type:PathType.CUBIC_BEZIER,start:e.start,control1:z,control2:oe,end:ue,fill:e.fill},de={type:PathType.CUBIC_BEZIER,start:ue,control1:re,control2:ae,end:e.end,fill:e.fill};return[...convertCubicToQuadraticFixed(le,n,r+1,g),...convertCubicToQuadraticFixed(de,n,r+1,g)]}const convertContourToQuadraticFixed=(e,n=.5)=>{const r=[];for(const g of e)if(g.type===PathType.CUBIC_BEZIER){const y=convertCubicToQuadraticFixed(g,n,0,2);r.push(...y)}else r.push(g);return r};function convertCubicToQuadraticSimple(e){const g={x:.5*e.start.x+.5*e.control1.x,y:.5*e.start.y+.5*e.control1.y},y={x:.5*e.control1.x+.5*e.control2.x,y:.5*e.control1.y+.5*e.control2.y},k={x:.5*e.control2.x+.5*e.end.x,y:.5*e.control2.y+.5*e.end.y},$={x:.5*g.x+.5*y.x,y:.5*g.y+.5*y.y},V={x:.5*y.x+.5*k.x,y:.5*y.y+.5*k.y},L={x:.5*$.x+.5*V.x,y:.5*$.y+.5*V.y},z={x:(3*g.x+3*$.x-e.start.x-L.x)/4,y:(3*g.y+3*$.y-e.start.y-L.y)/4},j={x:(3*V.x+3*k.x-L.x-e.end.x)/4,y:(3*V.y+3*k.y-L.y-e.end.y)/4};return[{type:PathType.QUADRATIC_BEZIER,start:e.start,end:L,control:z,fill:e.fill},{type:PathType.QUADRATIC_BEZIER,start:L,end:e.end,control:j,fill:e.fill}]}function convertContourToQuadraticSimple(e){const n=[];let r=0;for(const g of e)if(g.type===PathType.CUBIC_BEZIER){const y=convertCubicToQuadraticSimple(g);n.push(...y),r++}else n.push(g);return r>20&&console.log(` Contour has ${r} cubic curves, converted to ${r*2} quadratic curves`),n}function convertContoursToQuadratic(e,n=.5,r=!0){return r?e.map(g=>convertContourToQuadraticSimple(g)):e.map(g=>convertContourToQuadratic(g,n))}const cubicToQuadratic=Object.freeze(Object.defineProperty({__proto__:null,convertContourToQuadratic,convertContourToQuadraticFixed,convertContourToQuadraticSimple,convertContoursToQuadratic,convertCubicToQuadratic,convertCubicToQuadraticFixed,convertCubicToQuadraticSimple},Symbol.toStringTag,{value:"Module"}));function calculateBoundingBox(e){let n=1/0,r=1/0,g=-1/0,y=-1/0;if(!e.contours||e.contours.length===0)return{xMin:0,yMin:0,xMax:0,yMax:0};for(const k of e.contours)for(const $ of k)$.start&&(n=Math.min(n,$.start.x),g=Math.max(g,$.start.x),r=Math.min(r,$.start.y),y=Math.max(y,$.start.y)),$.end&&(n=Math.min(n,$.end.x),g=Math.max(g,$.end.x),r=Math.min(r,$.end.y),y=Math.max(y,$.end.y)),$.type===PathType.QUADRATIC_BEZIER&&$.control?(n=Math.min(n,$.control.x),g=Math.max(g,$.control.x),r=Math.min(r,$.control.y),y=Math.max(y,$.control.y)):$.type===PathType.CUBIC_BEZIER&&($.control1&&(n=Math.min(n,$.control1.x),g=Math.max(g,$.control1.x),r=Math.min(r,$.control1.y),y=Math.max(y,$.control1.y)),$.control2&&(n=Math.min(n,$.control2.x),g=Math.max(g,$.control2.x),r=Math.min(r,$.control2.y),y=Math.max(y,$.control2.y)));return isFinite(n)?{xMin:Math.round(n),yMin:Math.round(r),xMax:Math.round(g),yMax:Math.round(y)}:{xMin:0,yMin:0,xMax:0,yMax:0}}function convertContourToGlyfFormat(e){const n=[],r=[],g=[];for(const y of e)n.push({x:Math.round(y.start.x),y:Math.round(y.start.y),onCurve:!0}),r.push(Math.round(y.start.x)),g.push(Math.round(y.start.y)),y.type===PathType.QUADRATIC_BEZIER&&y.control?(n.push({x:Math.round(y.control.x),y:Math.round(y.control.y),onCurve:!1}),r.push(Math.round(y.control.x)),g.push(Math.round(y.control.y))):y.type===PathType.CUBIC_BEZIER&&(console.error(" ERROR: Cubic Bezier curve found in glyf conversion!"),console.error("   All curves should be converted to quadratic first"));return{points:n,xCoordinates:r,yCoordinates:g,paths:e}}async function buildGlyfTable(e){console.log(`
=== Building glyf Table ===`),console.log(`Processing ${e.length} glyphs...`);const n=[];for(let r=0;r<e.length;r++){loaded$1.value++,r%50===0&&await new Promise(L=>requestAnimationFrame(L));const g=e[r],y=calculateBoundingBox(g);if(!g.contours||g.contours.length===0||g.contourNum===0){n.push({numberOfContours:0,xMin:0,yMin:0,xMax:0,yMax:0,endPtsOfContours:[],instructionLength:0,instructions:[],contours:[]});continue}const k=[],$=[];let V=0;for(const L of g.contours){const z=convertContourToGlyfFormat(L);k.push(z),V+=z.points.length,$.push(V-1)}n.push({numberOfContours:g.contourNum,xMin:y.xMin,yMin:y.yMin,xMax:y.xMax,yMax:y.yMax,endPtsOfContours:$,instructionLength:0,instructions:[],contours:k,isComposite:!1}),r===0||r===e.length-1?console.log(`  Glyph ${r} (${g.name||"unnamed"}): ${g.contourNum} contours, ${V} points`):r===1&&console.log("  ...")}return console.log(` Built glyf table with ${n.length} glyphs`),console.log(`===========================
`),{glyphTables:n}}function calculateGlyphDataSize(e){if(e.numberOfContours===0)return 0;let n=0;n+=10,n+=e.endPtsOfContours.length*2,n+=2,n+=e.instructionLength||0;let r=0;for(const g of e.contours)r+=g.points.length;for(n+=r,n+=r*2,n+=r*2;n%4!==0;)n++;return n}function buildLocaTable(e,n=1){console.log(`
=== Building loca Table ===`),console.log(`Version: ${n} (${n===0?"short/Offset16":"long/Offset32"})`);const r=[];let g=0;for(let $=0;$<e.glyphTables.length;$++){r.push(g);const V=e.glyphTables[$],L=calculateGlyphDataSize(V);g+=L}r.push(g),console.log(`Total glyphs: ${e.glyphTables.length}`),console.log(`Total glyf data size: ${g} bytes`),console.log(`Offsets array length: ${r.length}`),console.log(`First offsets: [${r.slice(0,5).join(", ")}...]`),console.log(`Last offsets: [...${r.slice(-5).join(", ")}]`);const y=g,k=y/2<65536;return n===0&&!k&&(console.warn(" WARNING: Version 0 (short) requested but offsets too large!"),console.warn(`   Max offset: ${y}, max for short: ${65536*2}`),console.warn("   Consider using version 1 (long) instead")),console.log(` Built loca table with ${r.length} offsets`),console.log(`===========================
`),{offsets:r}}async function buildGlyfAndLocaTables(e,n=1){const r=await buildGlyfTable(e),g=buildLocaTable(r,n);return{glyfTable:r,locaTable:g}}const parseFont$1=e=>{const n=new DataView(e);return parse$5(n,{characters:[],settings:{},rawData:n,buffer:e,tables:[]})},createFont$2=async(e,n)=>{let r="";for(let $n=0;$n<n.familyName.length;$n++){const kt=n.familyName[$n].charCodeAt(0);kt>=33&&kt<=126?r+=`${n.familyName[$n]}`:r+=`${kt}`}hasChineseChar(n.familyName)&&(r=dist$1.convertToPinyin(n.familyName));const g={fontFamily:{en:n.familyName||" ",zh:n.familyName||" "},fontSubfamily:{en:"Regular",zh:""},fullName:{en:n.fullName||n.familyName+" "+n.styleName,zh:n.fullName||n.familyName+" "},postScriptName:{en:n.postScriptName||(r+"-"+n.styleName).replace(/\s/g,"").slice(0,63),zh:n.postScriptName||(r+"-"+n.styleName).replace(/\s/g,"").slice(0,63)},designer:{en:n.designer||" ",zh:n.designer||" "},designerURL:{en:n.designerURL||" ",zh:n.designerURL||" "},manufacturer:{en:n.manufacturer||" ",zh:n.manufacturer||" "},manufacturerURL:{en:n.manufacturerURL||" ",zh:n.manufacturerURL||" "},license:{en:n.license||" ",zh:n.license||" "},licenseURL:{en:n.licenseURL||" ",zh:n.licenseURL||" "},version:{en:n.version||"Version 1.0",zh:n.version||"Version 1.0"},description:{en:n.description||" ",zh:n.description||" "},copyright:{en:n.copyright||" ",zh:n.copyright||" "},trademark:{en:n.trademark||" ",zh:n.trademark||" "}},y=Object.keys(g);for(let $n=0;$n<y.length;$n++){const kt=g[y[$n]].en;hasChineseChar(kt)&&(g[y[$n]].en=dist$1.convertToPinyin(kt))}const k={characters:e,settings:{unitsPerEm:n.unitsPerEm||1e3,ascender:n.ascender,descender:n.descender}},$=[],V=[],L=[],z=[],j=[],ae=[],oe=[];let re,ue=0,le=0,de=0,he=0,_e=0,xe=0;const Ne=async()=>{if(xe>=e.length)return;loaded$1.value++,loaded$1.value>=total$1.value&&(loading$1.value=!1,loaded$1.value=0,total$1.value=0);const $n=e[xe],kt=$n.unicode|0;(re>kt||re===void 0)&&kt>0&&(re=kt),ue<kt&&(ue=kt);const At=getUnicodeRange(kt);if(At<32)le|=1<<At;else if(At<64)de|=1<<At-32;else if(At<96)he|=1<<At-64;else if(At<123)_e|=1<<At-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");const Dn=getMetrics($n);if($.push(Dn.xMin),V.push(Dn.yMin),L.push(Dn.xMax),z.push(Dn.yMax),ae.push(Dn.leftSideBearing),oe.push(Dn.rightSideBearing),j.push($n.advanceWidth),$n.xMin=Dn.xMin,$n.xMax=Dn.xMax,$n.yMin=Dn.yMin,$n.yMax=Dn.yMax,$n.rightSideBearing=Dn.rightSideBearing,$n.leftSideBearing=Dn.leftSideBearing,xe++,xe<e.length)return xe%100===0&&await new Promise(Qn=>setTimeout(Qn,0)),Ne()};await Ne();const $e={xMin:Math.min.apply(null,$),yMin:Math.min.apply(null,V),xMax:Math.max.apply(null,L),yMax:Math.max.apply(null,z),advanceWidthMax:Math.max.apply(null,j),advanceWidthAvg:j.reduce(($n,kt)=>$n+kt,0)/j.length,minLeftSideBearing:Math.min.apply(null,ae),maxLeftSideBearing:Math.max.apply(null,ae),minRightSideBearing:Math.min.apply(null,oe),ascender:n.ascender,descender:n.descender};le=0,de=0,he=0,_e=0;for(let $n=0;$n<e.length;$n++){const At=e[$n].unicode|0;if(At===0)continue;const Dn=getUnicodeRange(At);Dn<32?le|=1<<Dn:Dn<64?de|=1<<Dn-32:Dn<96?he|=1<<Dn-64:Dn<123&&(_e|=1<<Dn-96)}const Ce=n.tables?n.tables.head:{},Ie=$n=>{let kt=0;for(let At=0;At<$n.length;At++)$n[At]&&(kt+=Math.pow(2,At));return kt},ze=$n=>{let kt=0;for(let At=0;At<$n.length;At++)$n[At]&&(kt+=Math.pow(2,At));return kt},Ue={majorVersion:Ce.majorVersion||1,minorVersion:Ce.minorVersion||0,fontRevision:Ce.fontRevision||65536,checkSumAdjustment:0,magicNumber:1594834165,flags:Ce.flags?Ie(Ce.flags):3,unitsPerEm:n.unitsPerEm,created:Ce.created?.timestamp||Math.floor(n.createdTimestamp||Date.now()/1e3)+2082844800,modified:Ce.modified?.timestamp||Math.floor(Date.now()/1e3)+2082844800,xMin:0,yMin:-200,xMax:1e3,yMax:800,macStyle:Ce.macStyle?ze(Ce.macStyle):0,lowestRecPPEM:Ce.lowestRecPPEM||7,fontDirectionHint:Ce.fontDirectionHint||2,indexToLocFormat:0,glyphDataFormat:0},Pt=n.tables?n.tables.hhea:{},hn={majorVersion:Pt.majorVersion||1,minorVersion:Pt.minorVersion||0,ascender:n.ascender,descender:n.descender,lineGap:Pt.lineGap||0,advanceWidthMax:$e.advanceWidthMax,minLeftSideBearing:$e.minLeftSideBearing,minRightSideBearing:$e.minRightSideBearing,xMaxExtent:$e.maxLeftSideBearing+($e.xMax-$e.xMin),caretSlopeRise:Pt.caretSlopeRise||1,caretSlopeRun:Pt.caretSlopeRun||0,caretOffset:Pt.caretOffset||0,reserved0:0,reserved1:0,reserved2:0,reserved3:0,metricDataFormat:0,numberOfHMetrics:e.length},Dt={version:n.variants||n.contourStorage==="glyf"?65536:20480,numGlyphs:e.length};(n.variants||n.contourStorage==="glyf")&&(Dt.maxPoints=0,Dt.maxContours=0,Dt.maxCompositePoints=0,Dt.maxCompositeContours=0,Dt.maxZones=2,Dt.maxTwilightPoints=0,Dt.maxStorage=0,Dt.maxFunctionDefs=0,Dt.maxInstructionDefs=0,Dt.maxStackElements=0,Dt.maxSizeOfInstructions=0,Dt.maxComponentElements=0,Dt.maxComponentDepth=0);const xn=n.tables?n.tables.os2:{},jt=$n=>{let kt=0;for(let At=0;At<$n.length;At++)$n[At]&&(kt+=Math.pow(2,At));return kt},Vn={version:5,xAvgCharWidth:Math.round($e.advanceWidthAvg),usWeightClass:xn.usWeightClass||400,usWidthClass:xn.usWidthClass||5,fsType:xn.fsType||0,ySubscriptXSize:xn.ySubscriptXSize||650,ySubscriptYSize:xn.ySubscriptYSize||699,ySubscriptXOffset:xn.ySubscriptXOffset||0,ySubscriptYOffset:xn.ySubscriptYOffset||140,ySuperscriptXSize:xn.ySuperscriptXSize||650,ySuperscriptYSize:xn.ySuperscriptYSize||699,ySuperscriptXOffset:xn.ySuperscriptXOffset||0,ySuperscriptYOffset:xn.ySuperscriptYOffset||479,yStrikeoutSize:xn.yStrikeoutSize||49,yStrikeoutPosition:xn.yStrikeoutPosition||258,sFamilyClass:xn.sFamilyClass||0,panose:xn.panose||[0,0,0,0,0,0,0,0,0,0],ulUnicodeRange1:le,ulUnicodeRange2:de,ulUnicodeRange3:he,ulUnicodeRange4:_e,achVendID:xn.achVendID||"UKWN",fsSelection:xn.fsSelection?jt(xn.fsSelection):64,usFirstCharIndex:re,usLastCharIndex:ue,sTypoAscender:$e.ascender,sTypoDescender:$e.descender,sTypoLineGap:Pt.lineGap||0,usWinAscent:n.ascender||800,usWinDescent:-n.descender||200,ulCodePageRange1:1|1<<18|1<<20,ulCodePageRange2:0,sxHeight:metricsForChar(k,"xyvw",{yMax:Math.round($e.ascender/2)}).yMax,sCapHeight:metricsForChar(k,"HIKLEFJMNTZBDPRAGOQSUVWXY",$e).yMax,usDefaultChar:hasChar(k," ")?32:0,usBreakChar:hasChar(k," ")?32:0,usMaxContext:0,usLowerOpticalPointSize:xn.usLowerOpticalPointSize||8,usUpperOpticalPointSize:xn.usUpperOpticalPointSize||72},Rn={hMetrics:[]};for(let $n=0;$n<e.length;$n++){const kt=e[$n],At=kt.advanceWidth||0,Dn=Math.round(kt.leftSideBearing||0);Rn.hMetrics.push({advanceWidth:At,lsb:Dn})}const Tn=createTable$1(e),Ln=$n=>{const kt=g[$n];if(kt)return kt.en},Sn=Ln("fontFamily"),An=Ln("fontSubfamily"),In=Sn+"-"+An;let Mn=Ln("postScriptName");Mn||(Mn=Sn.replace(/\s/g,"")+"-"+An);const ra={};for(let $n in g)ra[$n]=g[$n];ra.uniqueID||(ra.uniqueID={en:In,zh:In}),ra.postScriptName||(ra.postScriptName={en:Mn,zh:Mn});const da=n.tables?createTable2(n.tables.name,n.variants):createTable$2(ra),ua=n.tables?n.tables.post:{},aa={version:196608,italicAngle:ua.italicAngle||0,underlinePosition:ua.underlinePosition||0,underlineThickness:ua.underlineThickness||0,isFixedPitch:ua.isFixedPitch||1,minMemType42:ua.minMemType42||0,maxMemType42:ua.maxMemType42||0,minMemType1:ua.minMemType1||0,maxMemType1:ua.maxMemType1||0},Nn={head:Ue,hhea:hn,maxp:Dt,"OS/2":Vn,name:da,cmap:Tn,post:aa,hmtx:Rn};if(n.contourStorage!=="glyf"){const $n=createTable(e,{version:Ln("version"),fullName:In,familyName:Sn,weightName:An,postScriptName:Mn,unitsPerEm:k.settings.unitsPerEm,fontBBox:[0,$e.yMin,$e.ascender,$e.advanceWidthMax]});Nn["CFF "]=$n}else{const $n=(Ve,qe)=>{let Et=0,Lt=0,_n=0;for(const vn of Ve.contours||[])for(const wn of vn)wn.type===PathType.CUBIC_BEZIER?Et++:wn.type===PathType.QUADRATIC_BEZIER?Lt++:wn.type===PathType.LINE&&_n++;return{cubicCount:Et,quadCount:Lt,lineCount:_n}},kt=e.map((Ve,qe)=>{const Et=$n(Ve),Lt={...Ve,contours:convertContoursToQuadratic(Ve.contours,.5)},_n=$n(Lt);return(qe===7||qe===11||qe===12)&&console.log(`  Glyph ${qe}: cubic=${Et.cubicCount}, quad=${Et.quadCount}, line=${Et.lineCount}  quad=${_n.quadCount}, line=${_n.lineCount}`),Lt});console.log(` Converted ${kt.length} glyphs to quadratic Bezier`),console.log(`
 Step 2: Building glyf and loca tables...`);const{glyfTable:At}=await buildGlyfAndLocaTables(kt,1);Ue.indexToLocFormat=1,Nn.glyf=At,Nn.loca={version:1,offsets:[],_needsRealOffsets:!0,_glyfTableRef:At},console.log(" glyf table created (loca will use real offsets after serialization)");let Dn=1/0,Qn=1/0,oa=-1/0,na=-1/0;for(const Ve of At.glyphTables)Ve.numberOfContours>0&&(Dn=Math.min(Dn,Ve.xMin),Qn=Math.min(Qn,Ve.yMin),oa=Math.max(oa,Ve.xMax),na=Math.max(na,Ve.yMax));isFinite(Dn)&&(Ue.xMin=Dn,Ue.yMin=Qn,Ue.xMax=oa,Ue.yMax=na,console.log(` Updated head table bounding box: (${Dn}, ${Qn}) to (${oa}, ${na})`));let la=1/0,ma=1/0,ca=-1/0;for(let Ve=0;Ve<kt.length;Ve++){const qe=kt[Ve],Et=At.glyphTables[Ve],Lt=qe.leftSideBearing||0,_n=qe.advanceWidth||0;if(Et.numberOfContours>0){const vn=Math.round(_n-Lt-(Et.xMax-Et.xMin)),wn=Math.round(Lt+(Et.xMax-Et.xMin));la=Math.min(la,Math.round(Lt)),ma=Math.min(ma,vn),ca=Math.max(ca,wn)}}isFinite(la)&&(hn.minLeftSideBearing=la,hn.minRightSideBearing=ma,hn.xMaxExtent=ca,console.log(` Updated hhea table metrics: lsb=${la}, rsb=${ma}, extent=${ca}`));let pe=0,Oe=0;for(const Ve of At.glyphTables)if(Ve.numberOfContours>0){let qe=0;for(const Et of Ve.contours)qe+=Et.points.length;pe=Math.max(pe,qe),Oe=Math.max(Oe,Ve.numberOfContours)}Dt.maxPoints=pe,Dt.maxContours=Oe}if(n.variants){console.log(`
 === Creating Variable Font ===`),console.log("Axes:",n.variants.axes?.map(Lt=>`${Lt.tag||Lt.name||"unknown"} (${Lt.minValue}-${Lt.maxValue})`).join(", ")||"none"),console.log("Combinations:",n.variants.combinations?.length||0),n.variants.axes&&n.variants.axes.length>0?console.log("Axes details:",n.variants.axes):console.warn(" WARNING: No axes defined in variants!"),delete Nn["CFF "],console.log(" Removed CFF table (using TrueType format for variable font)"),console.log(`
 Step 1: Converting cubic Bezier to quadratic...`);const $n=(Lt,_n)=>{let vn=0,wn=0,Cn=0;for(const Bn of Lt.contours||[])for(const zn of Bn)zn.type===PathType.CUBIC_BEZIER?vn++:zn.type===PathType.QUADRATIC_BEZIER?wn++:zn.type===PathType.LINE&&Cn++;return{cubicCount:vn,quadCount:wn,lineCount:Cn}},kt=[];for(let Lt=0;Lt<e.length;Lt++){loaded$1.value++,Lt%50===0&&await new Promise(wn=>requestAnimationFrame(wn));const _n=e[Lt];$n(_n);const vn={..._n,contours:convertContoursToQuadratic(_n.contours,.5)};$n(vn),kt.push(vn)}console.log(` Converted ${kt.length} glyphs to quadratic Bezier`),console.log(`
 Step 2: Building glyf and loca tables...`);const{glyfTable:At}=await buildGlyfAndLocaTables(kt,1);Ue.indexToLocFormat=1,Nn.glyf=At,Nn.loca={version:1,offsets:[],_needsRealOffsets:!0,_glyfTableRef:At},console.log(" glyf table created (loca will use real offsets after serialization)");let Dn=1/0,Qn=1/0,oa=-1/0,na=-1/0;for(const Lt of At.glyphTables)Lt.numberOfContours>0&&(Dn=Math.min(Dn,Lt.xMin),Qn=Math.min(Qn,Lt.yMin),oa=Math.max(oa,Lt.xMax),na=Math.max(na,Lt.yMax));isFinite(Dn)&&(Ue.xMin=Dn,Ue.yMin=Qn,Ue.xMax=oa,Ue.yMax=na,console.log(` Updated head table bounding box: (${Dn}, ${Qn}) to (${oa}, ${na})`));let la=1/0,ma=1/0,ca=-1/0;for(let Lt=0;Lt<kt.length;Lt++){const _n=kt[Lt],vn=At.glyphTables[Lt],wn=_n.leftSideBearing||0,Cn=_n.advanceWidth||0;if(vn.numberOfContours>0){const Bn=Math.round(Cn-wn-(vn.xMax-vn.xMin)),zn=Math.round(wn+(vn.xMax-vn.xMin));la=Math.min(la,Math.round(wn)),ma=Math.min(ma,Bn),ca=Math.max(ca,zn)}}isFinite(la)&&(hn.minLeftSideBearing=la,hn.minRightSideBearing=ma,hn.xMaxExtent=ca,console.log(` Updated hhea table metrics: lsb=${la}, rsb=${ma}, extent=${ca}`));let pe=0,Oe=0;for(const Lt of At.glyphTables)if(Lt.numberOfContours>0){let _n=0;for(const vn of Lt.contours)_n+=vn.points.length;pe=Math.max(pe,_n),Oe=Math.max(Oe,Lt.numberOfContours)}Dt.maxPoints=pe,Dt.maxContours=Oe,console.log(` Updated maxp table: maxPoints=${pe}, maxContours=${Oe}`),console.log(`
 Step 3: Creating variation tables...`);const Ve=createFvarTable(n.variants);Nn.fvar=Ve,console.log(" fvar table created"),console.log(" Creating gvar table (this may take a while for complex fonts)..."),console.log(" Checking options.variants:"),console.log(`  options.variants exists: ${!!n.variants}`),console.log(`  options.variants.combinations exists: ${!!n.variants?.combinations}`),console.log(`  options.variants.combinations.length: ${n.variants?.combinations?.length||0}`),console.time("gvar table creation");const qe=createGvarTable(n.variants,kt);console.timeEnd("gvar table creation"),Nn.gvar=qe,console.log(" gvar table created");const Et=createStatTable(Ve,{elidedFallbackNameID:2});Nn.STAT=Et,console.log(" STAT table created (required for macOS/Photoshop)"),console.log(`
 Variable font tables complete!`),console.log(`================================
`)}if(n.isColorFont){console.log(`
 === Creating Color Font ===`);let $n=!1;for(const kt of e)if(kt.layers&&kt.layers.length>0){$n=!0;break}if($n){console.log(" Creating extended glyph array for color layers...");let kt=0;for(const na of e)na.layers&&na.layers.length>0&&(kt+=na.layers.length);console.log(`Original glyphs: ${e.length}`),console.log(`Layer glyphs to add: ${kt}`),console.log(`Total glyphs: ${e.length+kt}`);const At=[];let Dn=0;reserveProgressBudget(kt+5),setProgressMessage("");for(const na of e)if(na.layers&&na.layers.length>0)for(const la of na.layers){const ma=la.contours||[[]],ca=ma.length,pe=getMetrics({unicode:0,contours:ma,contourNum:ca,advanceWidth:na.advanceWidth||n.unitsPerEm,leftSideBearing:void 0});At.push({unicode:0,name:`layer_${At.length}`,contours:ma,contourNum:ca,advanceWidth:na.advanceWidth||n.unitsPerEm,leftSideBearing:pe.xMin,rightSideBearing:pe.rightSideBearing,xMin:pe.xMin,xMax:pe.xMax,yMin:pe.yMin,yMax:pe.yMax}),Dn++,incrementProgress(void 0,1),await yieldToEventLoop(Dn,50)}console.log(" Creating CPAL table...");const Qn=createFromLayers(e);Nn.CPAL=Qn,console.log(` CPAL table created with ${Qn.numColorRecords} colors`),incrementProgress(" CPAL ",1),console.log(" Creating COLR table...");const oa=createFromCharactersV0(e,e.length+At.length);if(Nn.COLR=oa,console.log(` COLR table created with ${oa.numBaseGlyphRecords} base glyphs and ${oa.numLayerRecords} layers`),incrementProgress(" COLR ",1),Nn["CFF "]){console.log(" Updating CFF table with layer glyphs...");const na=[...e,...At];total$1.value+=na.length;const la=createTable(na,{version:Ln("version"),fullName:In,familyName:Sn,weightName:An,postScriptName:Mn,unitsPerEm:k.settings.unitsPerEm,fontBBox:[0,$e.yMin,$e.ascender,$e.advanceWidthMax]});Nn["CFF "]=la,console.log(` CFF table updated with ${na.length} total glyphs`),Dt.numGlyphs=na.length,console.log(` Updated maxp.numGlyphs to ${na.length}`),console.log(" Updating hmtx table with layer glyph metrics...");for(const ma of At)Rn.hMetrics.push({advanceWidth:ma.advanceWidth||0,lsb:Math.round(ma.leftSideBearing||0)});console.log(` Updated hmtx table with ${Rn.hMetrics.length} total metrics`),hn.numberOfHMetrics=Rn.hMetrics.length,console.log(` Updated hhea.numberOfHMetrics to ${hn.numberOfHMetrics}`)}incrementProgress("",1),console.log(`
 Color font tables complete!`),console.log(`================================
`)}else console.log(" No layers found in characters, skipping color font tables")}Ue.checkSumAdjustment=0;let En=await create$1(Nn,"checksum");const Zn=En.checksum;Ue.checkSumAdjustment=2981146554-Zn%4294967296;const ha=encoder.uint32(Ue.checkSumAdjustment);Ue.checkSumAdjustment<0&&(Ue.checkSumAdjustment=(Ue.checkSumAdjustment+4294967296)%4294967296);const{data:xa,tables:sa,tablesDataMap:Hn}=En,bn=sa.find($n=>$n.name==="head");if(bn){const $n=bn.config.offset+8;console.log(`
=== Updating head.checkSumAdjustment ===`),console.log(`head table offset: ${bn.config.offset}`),console.log(`checkSumAdjustment offset in file: ${$n}`),console.log(`checkSumAdjustment value: 0x${Ue.checkSumAdjustment.toString(16).padStart(8,"0")}`),console.log("checkSumAdjustment bytes:",ha),xa[$n]=ha[0],xa[$n+1]=ha[1],xa[$n+2]=ha[2],xa[$n+3]=ha[3],console.log(`Updated bytes at position ${$n}-${$n+3}`),console.log(`=====================================
`)}else console.error(" head table not found in fontTables!");return k.bytes=xa,console.log(`
=== createFont Complete ===`),console.log(`font.bytes.length: ${xa.length}`),Object.keys(Nn).sort(($n,kt)=>$n>kt?1:-1),k.tables=sa,console.log(`Font created with ${sa.length} tables`),console.log(`==============================
`),k},toArrayBuffer=e=>{if(e.bytes){console.log(`
=== toArrayBuffer ===`),console.log(`font.bytes.length: ${e.bytes.length}`);const n=new ArrayBuffer(e.bytes.length),r=new Uint8Array(n);for(let g=0;g<e.bytes.length;g++)r[g]=e.bytes[g];return console.log(`ArrayBuffer created: ${n.byteLength} bytes`),console.log(`===================
`),n}else if(e.rawData)return console.log(`Using rawData.buffer: ${e.rawData.buffer.byteLength} bytes`),e.rawData.buffer},metricsForChar=(e,n,r)=>{for(let g=0;g<n.length;g+=1){const y=getCharacterIndex(e,n[g]);if(y>0){const k=e.characters[y];return getMetrics(k)}}return r},getCharacterIndex=(e,n)=>{const r=n.codePointAt(0),g=e.characters;if(g){for(let y=0;y<g.length;y++)if(g[y].unicode===r)return y}return-1},hasChar=(e,n)=>getCharacterIndex(e,n)!==-1,parse$3=e=>parseFont$1(e),create=(e,n)=>createFont$2(e,n),editing$8=ref(!1),setEditing$6=e=>{editing$8.value=e},points$1=reactive({value:[]}),setPoints$1=e=>{points$1.value=e},mousedown$1=ref(!1),mousemove$1=ref(!1),editing$7=ref(!1),setEditing$5=e=>{editing$7.value=e},points=reactive({value:[]}),setPoints=e=>{points.value=e},mousedown=ref(!1),mousemove=ref(!1),editing$6=ref(!1),setEditing$4=e=>{editing$6.value=e},rectX=ref(-1),setRectX=e=>{rectX.value=e},rectY=ref(-1),setRectY=e=>{rectY.value=e},rectWidth=ref(0),setRectWidth=e=>{rectWidth.value=e},rectHeight=ref(0),setRectHeight=e=>{rectHeight.value=e},editing$5=ref(!1),setEditing$3=e=>{editing$5.value=e},ellipseX=ref(-1),setEllipseX=e=>{ellipseX.value=e},ellipseY=ref(-1),setEllipseY=e=>{ellipseY.value=e},radiusX=ref(0),setRadiusX=e=>{radiusX.value=e},radiusY=ref(0),setRadiusY=e=>{radiusY.value=e},selectControl$2=ref("null"),selectAnchor=ref(""),selectPenPoint=ref(""),hoverPenPoint=ref(""),onPenEditMode=ref(!1),setOnPenEditMode=e=>{onPenEditMode.value=e},redoStack=[],undoStack=[];var StoreType=(e=>(e[e.EditCharacter=0]="EditCharacter",e[e.EditGlyph=1]="EditGlyph",e[e.Tools=2]="Tools",e[e.Pen=3]="Pen",e[e.Polygon=4]="Polygon",e[e.Rectangle=5]="Rectangle",e[e.Ellipse=6]="Ellipse",e[e.GlyphCompnent=7]="GlyphCompnent",e[e.Status=8]="Status",e[e.Grid=9]="Grid",e))(StoreType||{}),OpType=(e=>(e[e.Undo=0]="Undo",e[e.Redo=1]="Redo",e))(OpType||{});const saveState=(e,n,r,g={newRecord:!0,undoTip:"",redoTip:""})=>{let y=[];r===1?y=redoStack:r===0&&(redoStack.length=0,y=undoStack);let k={};for(let $=0;$<n.length;$++)switch(n[$]){case 0:{k.editCharacterFile=clone(g.editCharacterFile||editCharacterFile.value);break}case 7:{k.draggable=g.draggable||draggable$1.value,k.dragOption=clone(g.dragOption||dragOption.value),k.checkRefLines=g.checkRefLines||checkRefLines.value,k.checkJoints=g.checkJoints||checkJoints.value;break}case 1:{k.editGlyph=clone(g.editGlyph||editGlyph.value);break}case 8:{k.editStatus=g.editStatus||editStatus.value;break}case 2:{k.tool=clone(g.tool||tool.value);break}case 3:{k.editingPen=clone(editing$8.value),k.pointsPen=clone(points$1.value),k.selectAnchor=clone(selectAnchor.value),k.selectPenPoint=clone(selectPenPoint.value),k.mousedownPen=mousedown$1.value,k.mousemovePen=mousemove$1.value;break}case 4:{k.editingPolygon=clone(editing$7.value),k.pointsPolygon=clone(points.value),k.mousedownPolygon=mousedown.value,k.mousemovePolygon=mousemove.value;break}case 5:{k.editingRectangle=clone(editing$6.value),k.rectX=clone(rectX.value),k.rectY=clone(rectY.value),k.rectWidth=clone(rectWidth.value),k.rectHeight=clone(rectHeight.value);break}case 6:{k.editingEllipse=clone(editing$5.value),k.ellipseX=clone(ellipseX.value),k.ellipseY=clone(ellipseY.value),k.radiusX=clone(radiusX.value),k.radiusY=clone(radiusY.value);break}case 9:{k.gridSettings=clone(g.gridSettings||gridSettings$1.value),k.gridChanged=clone(g.gridChanged||gridChanged.value);break}}if(g.newRecord||!y.length)y.push({opName:e,opStores:n,states:k,options:g});else{const $=y.pop();$.opName=e,$.opStores=n,$.states=k,$.options=g,y.push($)}},undo$2=()=>{if(!undoStack.length)return;const e=undoStack[undoStack.length-1];e.options.undoTip?ElMessageBox.confirm(e.options.undoTip,`${e.opName}`,{confirmButtonText:"",cancelButtonText:"",type:"warning"}).then(()=>{undoStack.pop(),saveState(e.opName,e.opStores,1,e.options),updateState(e),ElMessage({type:"success",message:`${e.opName}`})}).catch(()=>{}):(undoStack.pop(),saveState(e.opName,e.opStores,1,e.options),updateState(e))},redo$2=()=>{if(!redoStack.length)return;const e=redoStack[redoStack.length-1];e.options.redoTip?ElMessageBox.confirm(e.options.redoTip,`${e.opName}`,{confirmButtonText:"",cancelButtonText:"",type:"warning"}).then(()=>{redoStack.pop(),updateState(e),saveState(e.opName,e.opStores,0,e.options),ElMessage({type:"success",message:`${e.opName}`})}).catch(()=>{}):(redoStack.pop(),updateState(e),saveState(e.opName,e.opStores,0,e.options))},updateState=e=>{for(let n=0;n<e.opStores.length;n++)switch(e.opStores[n]){case 0:{for(let g=0;g<selectedFile.value.characterList.length;g++)editCharacterFileUUID.value===selectedFile.value.characterList[g].uuid&&(selectedFile.value.characterList[g]=e.states.editCharacterFile);break}case 1:{for(let g=0;g<glyphs.value.length;g++)glyphs.value[g].uuid===editGlyphUUID.value&&(glyphs.value[g]=e.states.editGlyph);for(let g=0;g<radical_glyphs.value.length;g++)radical_glyphs.value[g].uuid===editGlyphUUID.value&&(radical_glyphs.value[g]=e.states.editGlyph);for(let g=0;g<stroke_glyphs.value.length;g++)stroke_glyphs.value[g].uuid===editGlyphUUID.value&&(stroke_glyphs.value[g]=e.states.editGlyph);for(let g=0;g<comp_glyphs.value.length;g++)comp_glyphs.value[g].uuid===editGlyphUUID.value&&(comp_glyphs.value[g]=e.states.editGlyph);break}case 2:{tool.value=e.states.tool;break}case 8:{editStatus.value=e.states.editStatus;break}case 3:{points$1.value=e.states.pointsPen,editing$8.value=e.states.editingPen,selectAnchor.value=e.states.selectAnchor,selectPenPoint.value=e.states.selectPenPoint,mousedown$1.value=e.states.mousedownPen,mousemove$1.value=e.states.mousemovePen;break}case 4:{points.value=e.states.pointsPolygon,editing$7.value=e.states.editingPolygon,mousedown.value=e.states.mousedownPolygon,mousemove.value=e.states.mousemovePolygon;break}case 5:{editing$6.value=e.states.editingRectangle,rectX.value=e.states.rectX,rectY.value=e.states.rectY,rectWidth.value=e.states.rectWidth,rectHeight.value=e.states.rectHeight;break}case 6:{editing$5.value=e.states.editingEllipse,ellipseX.value=e.states.ellipseY,ellipseY.value=e.states.ellipseX,radiusX.value=e.states.radiusX,radiusY.value=e.states.radiusY;break}case 9:{gridSettings$1.value=e.gridSettings,gridChanged.value=e.gridChanged;break}}},clearState=()=>{redoStack.length=0,undoStack.length=0},initPen=(e,n=!1)=>{mousedown$1.value=!1,mousemove$1.value=!1;let r=null;const g=5;let y=!1,k,$;const V=re=>{if(points$1.value.length||saveState("",[StoreType.Pen,n?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo),mousedown$1.value=!0,setEditing$6(!0),points$1.value.length)r={uuid:points$1.value[points$1.value.length-2].uuid,index:points$1.value.length-2};else{const ue={uuid:genUUID(),type:"anchor",x:getCoord(re.offsetX),y:getCoord(re.offsetY),origin:null,isShow:!0},le={uuid:genUUID(),type:"control",x:getCoord(re.offsetX),y:getCoord(re.offsetY),origin:ue.uuid,isShow:!0};r={uuid:ue.uuid,index:0},setPoints$1([ue,le]),r={uuid:points$1.value[0].uuid,index:0}}},L=re=>{if(!points$1.value.length||!editing$8)return;const ue=clone(points$1.value);if(mousedown$1.value){if(k&&(ue[$]=k),r.index===0){ue[r.index];let le=ue[r.index+1];le.x=getCoord(re.offsetX),le.y=getCoord(re.offsetY),le.isShow=!0}else{let le=ue[r.index],de=ue[r.index-1],he=ue[r.index+1];he.x=getCoord(re.offsetX),he.y=getCoord(re.offsetY),he.isShow=!0,de.x=le.x-(getCoord(re.offsetX)-le.x),de.y=le.y-(getCoord(re.offsetY)-le.y),de.isShow=!0}mousemove$1.value=!0,setPoints$1(ue)}if(!mousedown$1.value){if(!mousemove$1.value&&ue.length){saveState("",[StoreType.Pen,n?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo),k=Object.assign({},ue[ue.length-1]),$=ue.length-1;const le={uuid:genUUID(),type:"anchor",x:getCoord(re.offsetX),y:getCoord(re.offsetY),origin:null,isShow:!0},de={uuid:genUUID(),type:"control",x:le.x,y:le.y,origin:le.uuid,isShow:!1},he={uuid:genUUID(),type:"control",x:le.x,y:le.y,origin:le.uuid,isShow:!1};ue.push(de,le,he),setPoints$1(ue),mousemove$1.value=!0}else if(ue.length){$=ue.length-4;const le=ue[ue.length-2],de=ue[ue.length-3],he=ue[ue.length-1];le.x=getCoord(re.offsetX),le.y=getCoord(re.offsetY),he.x=getCoord(re.offsetX),he.y=getCoord(re.offsetY),y=!1,isNearPoint(getCoord(re.offsetX),getCoord(re.offsetY),points$1.value[0].x,points$1.value[0].y,g)&&(le.x=points$1.value[0].x,le.y=points$1.value[0].y,he.x=points$1.value[1].x,he.y=points$1.value[1].y,de.x=points$1.value[0].x-(points$1.value[1].x-points$1.value[0].x),de.y=points$1.value[0].y-(points$1.value[1].y-points$1.value[0].y),y=!0),setPoints$1(ue),mousemove$1.value=!0}}},z=re=>{if(!(!points$1.value.length||!editing$8)&&(mousedown$1.value=!1,mousemove$1.value=!1,r=null,y)){setEditing$6(!1);const ue=genPenComponent(clone(points$1).value,!0);setPoints$1([]),n?addComponentForCurrentGlyph(ue):addComponentForCurrentCharacterFile(ue),k=void 0,$=void 0,y=!1,r=null}},j=re=>{if(!points$1.value.length||!editing$8)return;const ue=clone(points$1.value);if(points$1.value.length>=2){const le={uuid:genUUID(),type:"anchor",x:points$1.value[0].x,y:points$1.value[0].y,origin:null,isShow:!0},de={uuid:genUUID(),type:"control",x:points$1.value[0].x,y:points$1.value[0].y,origin:le.uuid,isShow:!1},he={uuid:genUUID(),type:"control",x:points$1.value[0].x,y:points$1.value[0].y,origin:le.uuid,isShow:!1};ue.push(de,le,he),setPoints$1(ue)}setEditing$6(!1),n?addComponentForCurrentGlyph(genPenComponent(clone(points$1).value,!0)):addComponentForCurrentCharacterFile(genPenComponent(clone(points$1).value,!0)),setPoints$1([]),k=void 0,$=void 0,y=!1,r=null},ae=re=>{re.code==="Enter"&&j()};return e.addEventListener("mousedown",V),e.addEventListener("mousemove",L),window.addEventListener("mouseup",z),window.addEventListener("keydown",ae),()=>{e.removeEventListener("mousedown",V),e.removeEventListener("mousemove",L),window.removeEventListener("mouseup",z),window.removeEventListener("keydown",ae),setEditing$6(!1),setPoints$1([]),k=void 0,$=void 0,y=!1,r=null}},renderPenEditor=e=>{const n=e.getContext("2d"),r=points$1.value.map(y=>({isShow:y.isShow,...mapCanvasCoords({x:y.x,y:y.y})}));if(!r.length)return;const g=10;n.strokeStyle="#000",n.lineWidth=getStrokeWidth(),n.fillStyle="#000",n.beginPath(),n.moveTo(r[0].x,r[0].y),r.length>=4&&n.bezierCurveTo(r[1].x,r[1].y,r[2].x,r[2].y,r[3].x,r[3].y);for(let y=3;y<r.length-1&&!(y+3>=r.length);y+=3)n.bezierCurveTo(r[y+1].x,r[y+1].y,r[y+2].x,r[y+2].y,r[y+3].x,r[y+3].y);n.stroke(),n.closePath();for(let y=0;y<r.length-1&&(r[y].isShow&&n.fillRect(r[y].x-g/2,r[y].y-g/2,g,g),r[y+1].isShow&&n.strokeRect(r[y+1].x-g/2,r[y+1].y-g/2,g,g),!(y+2>r.length-1));y+=3)r[y+2].isShow&&n.strokeRect(r[y+2].x-g/2,r[y+2].y-g/2,g,g);n.beginPath(),n.moveTo(r[0].x,r[0].y),n.lineTo(r[1].x,r[1].y),n.stroke(),n.closePath();for(let y=3;y<r.length-1;y+=3)r[y-1].isShow&&(n.beginPath(),n.moveTo(r[y].x,r[y].y),n.lineTo(r[y-1].x,r[y-1].y),n.stroke(),n.closePath()),r[y+1].isShow&&(n.beginPath(),n.moveTo(r[y].x,r[y].y),n.lineTo(r[y+1].x,r[y+1].y),n.stroke(),n.closePath())},genPenComponent=(e,n,r="",g="#000")=>{const{x:y,y:k,w:$,h:V}=getBound$5(e.reduce((_e,xe)=>(_e.push({x:xe.x,y:xe.y}),_e),[])),L=0,z=!1,j=!1;let ae={unitsPerEm:1e3,descender:-200,advanceWidth:1e3};editStatus.value===Status.Edit&&(ae.unitsPerEm=selectedFile.value.fontSettings.unitsPerEm,ae.descender=selectedFile.value.fontSettings.descender,ae.advanceWidth=selectedFile.value.fontSettings.unitsPerEm);let oe=transformPoints(e,{x:y,y:k,w:$,h:V,rotation:L,flipX:z,flipY:j});const re=formatPoints(oe,ae,1),ue=genPenContour(re),le=100/ae.unitsPerEm,de=oe.map(_e=>Object.assign({},_e,{x:_e.x*le,y:_e.y*le})),he=genPenContour(de);return{uuid:genUUID(),type:"pen",name:"pen",lock:!1,visible:!0,value:{points:e,fillColor:r,strokeColor:g,closePath:n,editMode:!1,preview:he,contour:ue},x:y,y:k,w:$,h:V,rotation:0,flipX:!1,flipY:!1,usedInCharacter:!0}},bezierCurve={q:(e,n)=>{const r=e[0],g=e[1],y=e[2],k=e[3],$=r.x*Math.pow(1-n,3)+3*g.x*n*Math.pow(1-n,2)+3*y.x*n*n*(1-n)+k.x*Math.pow(n,3),V=r.y*Math.pow(1-n,3)+3*g.y*n*Math.pow(1-n,2)+3*y.y*n*n*(1-n)+k.y*Math.pow(n,3);return{x:$,y:V}},qprime:(e,n)=>{const r=e[0],g=e[1],y=e[2],k=e[3],$=3*Math.pow(1-n,2)*(g.x-r.x)+6*(1-n)*n*(y.x-g.x)+3*Math.pow(n,2)*(k.x-y.x),V=3*Math.pow(1-n,2)*(g.y-r.y)+6*(1-n)*n*(y.y-g.y)+3*Math.pow(n,2)*(k.y-y.y);return{x:$,y:V}},qprimeprime:(e,n)=>{const r=e[0],g=e[1],y=e[2],k=e[3],$=6*(1-n)*(y.x-2*g.x+r.x)+6*n*(k.x-2*y.x+g.x),V=6*(1-n)*(y.y-2*g.y+r.y)+6*n*(k.y-2*y.y+g.y);return{x:$,y:V}}},_fitCurve=(e,n,r=4)=>useFixedCurves.value?fitCurveFixed2(e,n,r):fitCurve(e,n),fitCurveFixed2=(e,n,r)=>{const g=n,y=normalize$u({x:e[1].x-e[0].x,y:e[1].y-e[0].y}),k=normalize$u({x:e[e.length-2].x-e[e.length-1].x,y:e[e.length-2].y-e[e.length-1].y});return fitCubicFixed2(e,y,k,g,r)},fitCubicFixed2=(e,n,r,g,y)=>{if(e.length===2){const oe=norm({x:e[1].x-e[0].x,y:e[1].y-e[0].y})/3;return[[e[0],{x:e[0].x+n.x*oe,y:e[0].y+n.y*oe},{x:e[1].x+r.x*oe,y:e[1].y+r.y*oe},e[1]]]}let k=chordLengthParamerize(e),$=generateBezier(e,k,n,r),{maxDist:V,splitPoint:L}=computeMaxError(e,$,k);if(y<=1&&V<g)return[$];if(V<Math.pow(g,2))for(let oe=0;oe<20;oe++){const re=reparameterize($,e,k);$=generateBezier(e,re,n,r);const{maxDist:ue,splitPoint:le}=computeMaxError(e,$,k);if(L=le,ue<g&&y<=1)return[$];k=re}const z=[],j=normalize$u({x:e[L-1].x-e[L+1].x,y:e[L-1].y-e[L+1].y}),ae={x:-j.x,y:-j.y};return z.push(...fitCubicFixed2(e.slice(0,L+1),n,j,g,y/2)),z.push(...fitCubicFixed2(e.slice(L),ae,r,g,y/2)),z},fitCurve=(e,n)=>{const r=n,g=normalize$u({x:e[1].x-e[0].x,y:e[1].y-e[0].y}),y=normalize$u({x:e[e.length-2].x-e[e.length-1].x,y:e[e.length-2].y-e[e.length-1].y});return fitCubic(e,g,y,r)},fitCubic=(e,n,r,g)=>{if(e.length===2){const ae=norm({x:e[1].x-e[0].x,y:e[1].y-e[0].y})/3;return[[e[0],{x:e[0].x+n.x*ae,y:e[0].y+n.y*ae},{x:e[1].x+r.x*ae,y:e[1].y+r.y*ae},e[1]]]}let y=chordLengthParamerize(e),k=generateBezier(e,y,n,r),{maxDist:$,splitPoint:V}=computeMaxError(e,k,y);if($<g)return[k];if($<Math.pow(g,2))for(let ae=0;ae<20;ae++){const oe=reparameterize(k,e,y);k=generateBezier(e,oe,n,r);const{maxDist:re,splitPoint:ue}=computeMaxError(e,k,y);if(V=ue,re<g)return[k];y=oe}const L=[],z=normalize$u({x:e[V-1].x-e[V+1].x,y:e[V-1].y-e[V+1].y}),j={x:-z.x,y:-z.y};return L.push(...fitCubic(e.slice(0,V+1),n,z,g)),L.push(...fitCubic(e.slice(V),j,r,g)),L},generateBezier=(e,n,r,g)=>{const y=[e[0],null,null,e[e.length-1]],k=[];for(let le=0;le<n.length;le++){const de=n[le];k[le]=[],k[le].push([r.x*3*Math.pow(1-de,2)*de,r.y*3*Math.pow(1-de,2)*de]),k[le].push([g.x*3*(1-de)*Math.pow(de,2),g.y*3*(1-de)*Math.pow(de,2)])}const $=[[0,0],[0,0]],V=[0,0];for(let le=0;le<e.length;le++){const de=e[le],he=n[le];$[0][0]+=dot$1({x:k[le][0][0],y:k[le][0][1]},{x:k[le][0][0],y:k[le][0][1]}),$[0][1]+=dot$1({x:k[le][0][0],y:k[le][0][1]},{x:k[le][1][0],y:k[le][1][1]}),$[1][0]+=dot$1({x:k[le][0][0],y:k[le][0][1]},{x:k[le][1][0],y:k[le][1][1]}),$[1][1]+=dot$1({x:k[le][1][0],y:k[le][1][1]},{x:k[le][1][0],y:k[le][1][1]});const _e=bezierCurve.q([e[0],e[0],e[e.length-1],e[e.length-1]],he),xe={x:de.x-_e.x,y:de.y-_e.y};V[0]+=dot$1({x:k[le][0][0],y:k[le][0][1]},xe),V[1]+=dot$1({x:k[le][1][0],y:k[le][1][1]},xe)}const L=$[0][0]*$[1][1]-$[1][0]*$[0][1],z=$[0][0]*V[1]-$[1][0]*V[0],j=V[0]*$[1][1]-V[1]*$[0][1],ae=L===0?0:j/L,oe=L===0?0:z/L,re=norm({x:e[0].x-e[e.length-1].x,y:e[0].y-e[e.length-1].y}),ue=1e-6*re;return ae<ue||oe<ue?(y[1]={x:y[0].x+r.x*(re/3),y:y[0].y+r.y*(re/3)},y[2]={x:y[3].x+g.x*(re/3),y:y[3].y+g.y*(re/3)}):(y[1]={x:y[0].x+r.x*ae,y:y[0].y+r.y*ae},y[2]={x:y[3].x+g.x*oe,y:y[3].y+g.y*oe}),y},reparameterize=(e,n,r)=>{const g=[];for(let y=0;y<r.length;y++){const k=r[y],$=n[y];g.push(newtonRaphsonRootFind(e,$,k))}return g},newtonRaphsonRootFind=(e,n,r)=>{const g=bezierCurve.q(e,r),y={x:g.x-n.x,y:g.y-n.y},k=bezierCurve.qprime(e,r),$=bezierCurve.qprimeprime(e,r),V=y.x*k.x+y.y*k.y,L=Math.pow(k.x,2)+y.x*$.x+Math.pow(k.y,2)+y.y*$.y;return L===0?r:r-V/L},chordLengthParamerize=e=>{const n=[0];for(let r=1;r<e.length;r++)n.push(n[r-1]+norm({x:e[r].x-e[r-1].x,y:e[r].y-e[r-1].y}));for(let r=0;r<n.length;r++)n[r]=n[r]/n[n.length-1];return n},computeMaxError=(e,n,r)=>{let g=0,y=e.length/2;for(let k=0;k<e.length;k++){const $=bezierCurve.q(n,r[k]),V=e[k],L=norm({x:$.x-V.x,y:$.y-V.y});L>g&&(g=L,y=k)}return{maxDist:g,splitPoint:y}},normalize$u=e=>e.x===0&&e.y===0?{x:0,y:0}:{x:e.x/norm(e),y:e.y/norm(e)},norm=e=>Math.sqrt(e.x*e.x+e.y*e.y),dot$1=(e,n)=>e.x*n.x+e.y*n.y,mesh=(e,n)=>{const{unitsPerEm:r,descender:g}=selectedFile.value.fontSettings,y=.8*r,k=.6*r,$=16,V=e.width,L=e.height,z=e.getContext("2d");z.fillStyle="#dcdfe6",z.fillRect(0,0,V,L);const j=(V-mapCanvasWidth(y))/2,ae=j+mapCanvasWidth(y),oe=L+mapCanvasHeight(g)-mapCanvasHeight(k),re=[0,8,16],ue=oe+mapCanvasHeight(k);for(let le=0;le<=$;le++){const de=j+mapCanvasWidth(y)/$*le;z.strokeStyle=re.indexOf(le)!==-1?"#811616":"#cda2a2",z.lineWidth=getStrokeWidth(),z.beginPath(),z.moveTo(de,oe),z.lineTo(de,ue),z.closePath(),z.stroke()}for(let le=0;le<=$;le++){const de=oe+mapCanvasHeight(k)/$*le;z.strokeStyle=re.indexOf(le)!==-1?"#811616":"#cda2a2",z.lineWidth=getStrokeWidth(),z.beginPath(),z.moveTo(j,de),z.lineTo(ae,de),z.closePath(),z.stroke()}},transparent=e=>{const n=e.width,r=e.height,g=e.getContext("2d"),y=mapCanvasWidth(grid.precision);for(let k=0;k<n;k+=2*y)for(let $=0;$<r;$+=2*y)g.fillStyle="#FFFFFF",g.fillRect(k,$,y,y),g.fillRect(k+y,$+y,y,y),g.fillStyle="#EFEFEF",g.fillRect(k+y,$,y,y),g.fillRect(k,$+y,y,y)};class PenComponent{points;hasPathBegan=!1;type="glyph-pen";usedInCharacter=!0;contour=[];contour2=[];preview=[];constructor(){}beginPath(){this.hasPathBegan=!0,this.points=[]}closePath(){this.hasPathBegan=!1}moveTo(n,r){this.hasPathBegan&&!this.points.length&&(this.points[0]={uuid:genUUID(),type:"anchor",x:n,y:r,origin:null})}bezierTo(n,r,g,y,k,$){if(this.hasPathBegan&&this.points.length){const V=this.points[this.points.length-1].uuid,L=genUUID();this.points.push({uuid:genUUID(),type:"control",x:n,y:r,origin:V}),this.points.push({uuid:genUUID(),type:"control",x:g,y,origin:L}),this.points.push({uuid:L,type:"anchor",x:k,y:$,origin:null})}}quadraticBezierTo(n,r,g,y){if(this.hasPathBegan&&this.points.length){const k=this.points[this.points.length-1].uuid,$=genUUID();this.points.push({uuid:genUUID(),type:"control",x:this.points[this.points.length-1].x+2/3*(n-this.points[this.points.length-1].x),y:this.points[this.points.length-1].y+2/3*(r-this.points[this.points.length-1].y),origin:k}),this.points.push({uuid:genUUID(),type:"control",x:g+2/3*(n-g),y:y+2/3*(r-y),origin:$}),this.points.push({uuid:$,type:"anchor",x:g,y,origin:null})}}lineTo(n,r){if(this.hasPathBegan&&this.points.length){const g=this.points[this.points.length-1].uuid,y=genUUID();this.points.push({uuid:genUUID(),type:"control",x:this.points[this.points.length-1].x,y:this.points[this.points.length-1].y,origin:g}),this.points.push({uuid:genUUID(),type:"control",x:n,y:r,origin:y}),this.points.push({uuid:y,type:"anchor",x:n,y:r,origin:null})}}render(n,r={offset:{x:0,y:0},scale:1}){const g=r.scale;if(this.points.length>=4){const y=n.getContext("2d");y.strokeStyle=r.fillColor||"#000",y.lineWidth=getStrokeWidth(),y.translate(mapCanvasX(r.offset.x)*g,mapCanvasY(r.offset.y)*g),y.beginPath(),y.moveTo(mapCanvasX(this.points[0].x)*g,mapCanvasY(this.points[0].y)*g);for(let k=1;k<this.points.length;k+=3)y.bezierCurveTo(mapCanvasX(this.points[k].x)*g,mapCanvasY(this.points[k].y)*g,mapCanvasX(this.points[k+1].x)*g,mapCanvasY(this.points[k+1].y)*g,mapCanvasX(this.points[k+2].x)*g,mapCanvasY(this.points[k+2].y)*g);y.stroke(),y.closePath(),fontRenderStyle.value==="black"?(y.fillStyle="#000",y.fill()):fontRenderStyle.value==="color"&&(y.fillStyle=r.fillColor||"#000",y.fill()),y.setTransform(1,0,0,1,0,0)}}render_grid(n,r={offset:{x:0,y:0},scale:1,grid:null}){const g=k=>({x:r.offset.x+k.x,y:r.offset.y+k.y}),y=r.scale;if(this.points.length>=4){const k=n.getContext("2d");k.strokeStyle="#000",k.lineWidth=getStrokeWidth(),k.beginPath();const $=computeCoords(r.grid,g(this.points[0]));k.moveTo(mapCanvasX($.x)*y,mapCanvasY($.y)*y);for(let V=1;V<this.points.length;V+=3){const L=computeCoords(r.grid,g(this.points[V])),z=computeCoords(r.grid,g(this.points[V+1])),j=computeCoords(r.grid,g(this.points[V+2]));k.bezierCurveTo(mapCanvasX(L.x)*y,mapCanvasY(L.y)*y,mapCanvasX(z.x)*y,mapCanvasY(z.y)*y,mapCanvasX(j.x)*y,mapCanvasY(j.y)*y)}k.stroke(),k.closePath(),k.setTransform(1,0,0,1,0,0)}}getData=()=>({points:clone(this.points),type:this.type,hasPathBegan:this.hasPathBegan,usedInCharacter:this.usedInCharacter,contour:clone(this.contour),preview:clone(this.preview)});setData=n=>{this.points=clone(n.points),this.type=n.type,this.hasPathBegan=n.hasPathBegan,this.usedInCharacter=n.usedInCharacter,n.contour&&(this.contour=clone(n.contour)),n.preview&&(this.preview=clone(n.preview))};updateData=(n=!0,r,g)=>{let y=this.points;y=y.map(ae=>{const oe=translate$1(ae,r);return g?computeCoords(g,oe):oe});let k={unitsPerEm:1e3,descender:-200,advanceWidth:1e3};n||(k.unitsPerEm=selectedFile.value?.fontSettings.unitsPerEm||1e3,k.descender=selectedFile.value?.fontSettings.descender||-200,k.advanceWidth=selectedFile.value?.fontSettings.unitsPerEm||1e3);const $=formatPoints(y,k,1),V=genPenContour($),L=100/k.unitsPerEm,z=y.map(ae=>Object.assign({},ae,{x:ae.x*L,y:ae.y*L})),j=genPenContour(z);this.contour=V,this.preview=j};updateData2=()=>{const n=this.points,r=genPenContour(n);this.contour2=r}}class PolygonComponent{points;type="glyph-polygon";hasPathBegan=!1;usedInCharacter=!0;contour=[];contour2=[];preview=[];constructor(){}beginPath(){this.hasPathBegan=!0,this.points=[]}closePath(){this.hasPathBegan=!1}moveTo(n,r){this.hasPathBegan&&!this.points.length&&(this.points[0]={uuid:genUUID(),x:n,y:r})}lineTo(n,r){this.hasPathBegan&&this.points.length&&this.points.push({uuid:genUUID(),x:n,y:r})}render(n,r={offset:{x:0,y:0},scale:1}){const g=r.scale;if(this.points.length>=4){const y=n.getContext("2d");y.strokeStyle=r.fillColor||"#000",y.translate(mapCanvasX(r.offset.x)*g,mapCanvasY(r.offset.y)*g),y.beginPath(),y.moveTo(mapCanvasX(this.points[0].x)*g,mapCanvasY(this.points[0].y)*g);for(let k=1;k<this.points.length;k++)y.lineTo(mapCanvasX(this.points[k].x)*g,mapCanvasY(this.points[k].y)*g);y.stroke(),y.closePath(),fontRenderStyle.value==="black"?(y.fillStyle="#000",y.fill()):fontRenderStyle.value==="color"&&(y.fillStyle=r.fillColor||"#000",y.fill()),y.setTransform(1,0,0,1,0,0)}}render_grid(n,r={offset:{x:0,y:0},scale:1,grid:null}){const g=k=>({x:r.offset.x+k.x,y:r.offset.y+k.y}),y=r.scale;if(this.points.length>=4){const k=n.getContext("2d");k.strokeStyle="#000",k.beginPath();const $=computeCoords(r.grid,g(this.points[0]));k.moveTo(mapCanvasX($.x)*y,mapCanvasY($.y)*y);for(let V=1;V<this.points.length;V++){const{x:L,y:z}=computeCoords(r.grid,g(this.points[V]));k.lineTo(mapCanvasX(L)*y,mapCanvasY(z)*y)}k.stroke(),k.closePath(),k.setTransform(1,0,0,1,0,0)}}getData=()=>({points:clone(this.points),type:this.type,hasPathBegan:this.hasPathBegan,usedInCharacter:this.usedInCharacter,contour:clone(this.contour),preview:clone(this.preview)});setData=n=>{this.points=clone(n.points),this.type=n.type,this.hasPathBegan=n.hasPathBegan,this.usedInCharacter=n.usedInCharacter,n.contour&&(this.contour=clone(n.contour)),n.preview&&(this.preview=clone(n.preview))};updateData=(n=!0,r,g)=>{let y=this.points;y=y.map(ae=>{const oe=translate$1(ae,r);return g?computeCoords(g,oe):oe});let k={unitsPerEm:1e3,descender:-200,advanceWidth:1e3};n||(k.unitsPerEm=selectedFile.value.fontSettings.unitsPerEm,k.descender=selectedFile.value.fontSettings.descender,k.advanceWidth=selectedFile.value.fontSettings.unitsPerEm);const $=formatPoints(y,k,1),V=genPolygonContour($),L=100/k.unitsPerEm,z=y.map(ae=>Object.assign({},ae,{x:ae.x*L,y:ae.y*L})),j=genPolygonContour(z);this.contour=V,this.preview=j};updateData2=()=>{const n=this.points,r=genPolygonContour(n);this.contour2=r}}class RectangleComponent{x;y;width;height;type="glyph-rectangle";usedInCharacter=!0;contour=[];contour2=[];preview=[];constructor(n,r,g,y){this.x=n,this.y=r,this.width=g,this.height=y}render(n,r={offset:{x:0,y:0},scale:1}){const g=r.scale,y=n.getContext("2d");y.strokeStyle=r.fillColor||"#000",y.lineWidth=getStrokeWidth(),y.translate(mapCanvasX(r.offset.x)*g,mapCanvasY(r.offset.y)*g),y.beginPath(),y.rect(mapCanvasX(this.x)*g,mapCanvasY(this.y)*g,mapCanvasX(this.width)*g,mapCanvasY(this.height)*g),y.stroke(),y.closePath(),fontRenderStyle.value==="black"?(y.fillStyle="#000",y.fill()):fontRenderStyle.value==="color"&&(y.fillStyle=r.fillColor||"#000",y.fill()),y.setTransform(1,0,0,1,0,0)}render_grid(n,r={offset:{x:0,y:0},scale:1,grid:null}){const g=L=>({x:r.offset.x+L.x,y:r.offset.y+L.y}),y=getRectanglePoints(this.width,this.height,this.x,this.y),k=r.scale,$=n.getContext("2d");$.strokeStyle="#000",$.lineWidth=getStrokeWidth(),$.beginPath();const V=computeCoords(r.grid,g({x:y[0].x,y:y[0].y}));$.moveTo(mapCanvasX(V.x)*k,mapCanvasY(V.y)*k);for(let L=1;L<y.length;L++){const{x:z,y:j}=computeCoords(r.grid,g({x:y[L].x,y:y[L].y}));$.lineTo(mapCanvasX(z)*k,mapCanvasY(j)*k)}$.lineTo(mapCanvasX(V.x)*k,mapCanvasY(V.y)*k),$.stroke(),$.closePath(),$.setTransform(1,0,0,1,0,0)}getData=()=>({x:this.x,y:this.y,width:this.width,height:this.height,type:this.type,usedInCharacter:this.usedInCharacter,contour:clone(this.contour),preview:clone(this.preview)});setData=n=>{this.x=n.x,this.y=n.y,this.width=n.width,this.height=n.height,this.type=n.type,this.usedInCharacter=n.usedInCharacter,n.contour&&(this.contour=clone(n.contour)),n.preview&&(this.preview=clone(n.preview))};updateData=(n=!0,r,g)=>{let y=getRectanglePoints(this.width,this.height,this.x,this.y);y=y.map(ae=>{const oe=translate$1(ae,r);return g?computeCoords(g,oe):oe}),g&&(y=y.map(ae=>computeCoords(g,ae)));let k={unitsPerEm:1e3,descender:-200,advanceWidth:1e3};n||(k.unitsPerEm=selectedFile.value.fontSettings.unitsPerEm,k.descender=selectedFile.value.fontSettings.descender,k.advanceWidth=selectedFile.value.fontSettings.unitsPerEm);const $=formatPoints(y,k,1),V=genRectangleContour($),L=100/k.unitsPerEm,z=y.map(ae=>Object.assign({},ae,{x:ae.x*L,y:ae.y*L})),j=genRectangleContour(z);this.contour=V,this.preview=j};updateData2=()=>{const n=getRectanglePoints(this.width,this.height,this.x,this.y),r=genRectangleContour(n);this.contour2=r}}class Joint{_x;_y;uuid;name;constructor(n,r){this._x=r.x,this._y=r.y,this.name=n,this.uuid=genUUID()}render(n){const r=getStrokeWidth()*2,g=n.getContext("2d");g.beginPath(),g.fillStyle="blue",g.fillRect(mapCanvasX(this.x)-r,mapCanvasY(this.y)-r,r*2,r*2),g.closePath(),g.setTransform(1,0,0,1,0,0)}getCoords(){return{x:this.x,y:this.y}}getPlainCoords(){return{x:this.x,y:this.y}}get x(){return this._x}get y(){return this._y}getData=()=>({_x:this._x,_y:this._y,uuid:this.uuid,name:this.name});setData=n=>{this._x=n._x,this._y=n._y,this.uuid=n.uuid,this.name=n.name}}const renderJoint=(e,n)=>{const r=getStrokeWidth()*2,g=e.getContext("2d");g.beginPath(),g.fillStyle="blue",g.fillRect(mapCanvasX(n.x)-r,mapCanvasY(n.y)-r,r*2,r*2),g.closePath(),g.setTransform(1,0,0,1,0,0)},renderFisrtJoint=(e,n)=>{const r=getStrokeWidth()*2,g=e.getContext("2d");g.beginPath(),g.fillStyle="green",g.ellipse(mapCanvasX(n.x),mapCanvasY(n.y),r*2,r*2,0,0,Math.PI*2),g.fill(),g.closePath(),g.setTransform(1,0,0,1,0,0)},renderRefLine=(e,n)=>{const r=e.getContext("2d"),g=n.start,y=n.end;r.strokeStyle=n.type==="ref"?"red":"blue",r.lineWidth=getStrokeWidth(),r.beginPath(),r.moveTo(mapCanvasX(g.x),mapCanvasY(g.y)),r.lineTo(mapCanvasX(y.x),mapCanvasY(y.y)),r.stroke()},renderJoints=(e,n)=>{const r=(g,y,k)=>{const $=g.ox+y,V=g.oy+k,L=g.value._o?.getJoints().findIndex(z=>!z.name.includes("_ref"))||0;g.value._o?.getJoints().map((z,j)=>{const{x:ae,y:oe}=z.getCoords();j===L?renderFisrtJoint(n,{x:ae+$,y:oe+V}):renderJoint(n,{x:ae+$,y:oe+V})}),g.type==="glyph"&&g.value.components&&g.value.components.length&&g.value.components.map(z=>{r(z,$,V)})};r(e,0,0)},renderRefLines=(e,n)=>{const r=(g,y,k)=>{const $=g.ox+y,V=g.oy+k;g.value._o?.getRefLines().map(L=>{const z=g.value._o.getJoint(L.start),j=g.value._o.getJoint(L.end),ae={start:{x:z.x+$,y:z.y+V},end:{x:j.x+$,y:j.y+V},type:L.type};renderRefLine(n,ae)}),g.type==="glyph"&&g.value.components&&g.value.components.length&&g.value.components.map(L=>{r(L,$,V)})};r(e,0,0)},getJoints$1=(e,n)=>{let r=[];const g=(y,k,$)=>{const V=y.ox+k,L=y.oy+$;n===y.uuid&&(r=y.value._o?.getJoints().map(z=>{const{x:j,y:ae}=z.getCoords();return{name:z.name,x:j+V,y:ae+L}})),y.type==="glyph"&&y.value.components&&y.value.components.length&&y.value.components.map(z=>{g(z,V,L)})};return g(e,0,0),r};class CustomGlyph{_glyph;_joints=[];_reflines=[];_components=[];onSkeletonDrag=null;onSkeletonDragEnd=null;onSkeletonDragStart=null;getSkeleton=null;getComponentsBySkeleton=null;tempData=null;constructor(n){this._glyph=n,n._o=this}getJoints(){return this._glyph.joints?[...this._glyph.joints,...this._joints]:this._joints}getRefLines(){return this._glyph.reflines?this._glyph.reflines.concat(this._reflines):[].concat(this._reflines)}addJoint(n){this._joints.push(n)}addComponent(n){this._components.push(n)}clear(){this._joints=[],this._components=[],this._reflines=[]}render(n,r=!0,g={x:0,y:0},y=!1,k=1,$="#000"){const V=n.getContext("2d");renderCanvas(orderedListWithItemsForGlyph(this._glyph),n,{offset:g,scale:k,fill:!1,forceUpdate:!1}),this._components.forEach(L=>{L.render(n,{offset:g,scale:k,fillColor:$})}),fontRenderStyle.value==="black"||y?(V.fillStyle="#000",V.fill()):fontRenderStyle.value==="color"&&(V.fillStyle=$||"#000",V.fill())}render_forceUpdate(n,r=!0,g={x:0,y:0},y=!1,k=1,$="#000"){const V=n.getContext("2d");renderCanvas(orderedListWithItemsForGlyph(this._glyph),n,{offset:g,scale:k,fill:!1,forceUpdate:!0}),this._components.forEach(L=>{L.render(n,{offset:g,scale:k,fillColor:$})}),fontRenderStyle.value==="black"||y?(V.fillStyle="#000",V.fill()):fontRenderStyle.value==="color"&&(V.fillStyle=$||"#000",V.fill())}render_grid(n,r=!0,g={x:0,y:0},y=!1,k=1,$,V=!1){const L=n.getContext("2d");if(renderGridCanvas(orderedListWithItemsForGlyph(this._glyph),n,{offset:g,scale:k,fill:!1,forceUpdate:!1,grid:$,useSkeletonGrid:V}),!V)this._components.forEach(z=>{z.render_grid(n,{offset:g,scale:k,grid:$})});else if(this.getSkeleton&&this.getComponentsBySkeleton){const z=this.getSkeleton(),j={},ae=Object.keys(z);for(let re=0;re<ae.length;re++){const ue=ae[re],le=z[ue],de={x:le.x+g.x,y:le.y+g.y};j[ue]=computeCoords($,de)}const oe=this.getComponentsBySkeleton(j);for(let re=0;re<oe.length;re++)oe[re].render(n,{offset:{x:0,y:0},scale:.5})}(fontRenderStyle.value==="color"||y)&&(L.fillStyle="#000",L.fill())}render_grid_forceUpdate(n,r=!0,g={x:0,y:0},y=!1,k=1,$,V=!1){const L=n.getContext("2d");renderCanvas(orderedListWithItemsForGlyph(this._glyph),n,{offset:g,scale:k,fill:!1,forceUpdate:!0,grid:$,useSkeletonGrid:V}),this._components.forEach(z=>{z.render_grid(n,{offset:g,scale:k,grid:$})}),(fontRenderStyle.value==="color"||y)&&(L.fillStyle="#000",L.fill())}renderJoints(n,r={type:"all"}){r.type==="all"?this.getJoints().forEach(g=>{g.render(n)}):r.type==="selected"&&r.joints.length&&this.getJoints().forEach(g=>{r.joints.indexOf(g.name)!==-1&&g.render(n)})}renderRefLines(n,r={type:"all"}){r.type==="all"?this.getRefLines().forEach(g=>{const y=n.getContext("2d"),k=this.getJoint(g.start).getCoords(),$=this.getJoint(g.end).getCoords();y.strokeStyle=g.type==="ref"?"red":"blue",y.lineWidth=getStrokeWidth(),y.beginPath(),y.moveTo(mapCanvasX(k.x),mapCanvasY(k.y)),y.lineTo(mapCanvasX($.x),mapCanvasY($.y)),y.stroke()}):r.type==="selected"&&r.reflines.length&&this.getRefLines().forEach(g=>{if(r.reflines.indexOf(g.name)!==-1){const y=n.getContext("2d"),k=this.getJoint(g.start).getCoords(),$=this.getJoint(g.end).getCoords();y.strokeStyle=g.type==="ref"?"red":"blue",y.lineWidth=getStrokeWidth(),y.beginPath(),y.moveTo(mapCanvasX(k.x),mapCanvasY(k.y)),y.lineTo(mapCanvasX($.x),mapCanvasY($.y)),y.stroke()}})}addRefLine(n){this._reflines.push(n)}getParam(n){return this._glyph.parameters.get(n)}getParamRange(n){return this._glyph.parameters.getRange(n)}setParam(n,r){this._glyph.parameters.set(n,r)}getJoint(n){const r=this.getJoints().filter(g=>g.name===n);return r.length?r[0]:null}get components(){return orderedListWithItemsForGlyph(this._glyph).concat(this._components)}getRatioLayout(n){return getRatioLayout2(this._glyph,n)}getComponent(n){for(let r=0;r<this._glyph.components.length;r++)if(this._glyph.components[r].name===n)return this._glyph.components[r];return null}getGlyph(n){for(let r=0;r<this._glyph.components.length;r++)if(this._glyph.components[r].name===n)return this._glyph.components[r].value._o;return null}getData=()=>({_joints:this._joints.map(n=>n?.getData()),_reflines:this._reflines,_components:this._components.map(n=>n.getData())});setData=n=>{this._joints=n._joints.map(r=>{const g=new Joint(r.name,{x:r._x,y:r._y});return g.setData(r),g}),this._reflines=n._reflines,this._components=n._components.map(r=>{let g=null;switch(r.type){case"glyph-pen":{g=new PenComponent;break}case"glyph-ellipse":{g=new EllipseComponent(r.centerX,r.centerY,r.radiusX,r.radiusY);break}case"glyph-polygon":{g=new PolygonComponent;break}case"glyph-rectangle":{g=new RectangleComponent(r.x,r.y,r.width,r.height);break}}return g.setData(r),g})}}const getRatioCoords=(e,n,r,g,y)=>{const{x1:k,x2:$,y1:V,y2:L,l:z}=y,{x:j,y:ae,w:oe,h:re}=e.rect,ue=g*z/re,le=ae/z*ue+r;let de=0;le<=ue/3?de=Math.round(le/(ue/3)*V):le<=ue/3*2?de=V+Math.round((le-ue/3)/(ue/3)*(L-V)):de=L+Math.round((le-ue/3*2)/(ue/3)*(z-L));const he=g*z/oe,_e=j/z*he+n;let xe=0;return _e<=he/3?xe=Math.round(_e/(he/3)*k):_e<=he/3*2?xe=k+Math.round((_e-he/3)/(he/3)*($-k)):xe=$+Math.round((_e-he/3*2)/(he/3)*(z-$)),{x:xe,y:de}},renderLayout=(layoutTree,rect,level,params,canvas)=>{const ctx=canvas.getContext("2d");ctx.strokeStyle="red",ctx.fillStyle="rgba(255, 0, 0, 0.2)";const{x1,x2,y1,y2,l}=params,mapCanvas=e=>e/l*canvas.width,d=5*level;let dir="H";layoutTree[0].label===""&&(dir="V");for(let i=0;i<layoutTree.length;i++){const node=layoutTree[i];let{x:_x,y:_y,w:_w,h:_h}=rect;if(dir==="H"?(_y=rect.y,_x=eval(node.coords[0]),_w=eval(node.coords[1])-_x,_h=rect.h):dir==="V"&&(_x=rect.x,_y=eval(node.coords[0]),_w=rect.w,_h=eval(node.coords[1])-_y),ctx.fillRect(mapCanvas(_x)+d,mapCanvas(_y)+d,mapCanvas(_w)-2*d,mapCanvas(_h)-2*d),ctx.strokeRect(mapCanvas(_x)+d,mapCanvas(_y)+d,mapCanvas(_w)-2*d,mapCanvas(_h)-2*d),node.children&&node.children.length)renderLayout(node.children,{x:_x,y:_y,w:_w,h:_h},level+1,params,canvas);else if(node.showCoords==="ratio"){ctx.fillStyle="red";const e=5;for(let n=0;n<node.coordsSegment;n++)for(let r=0;r<node.coordsSegment;r++){const g=getRatioCoords(node,n,r,node.coordsSegment,params);ctx.fillRect(mapCanvas(g.x)-e,mapCanvas(g.y)-e,2*e,2*e)}ctx.fillStyle="rgba(255, 0, 0, 0.2)"}}},layoutGrid=e=>{const{dx:n,dy:r,centerSquareSize:g,size:y}=editCharacterFile.value.info.gridSettings,k=editCharacterFile.value.info.layoutTree,$=Math.round((y-g)/2)+n,V=Math.round((y-g)/2+g)+n,L=Math.round((y-g)/2)+r,z=Math.round((y-g)/2+g)+r,j=[mapCanvasWidth(y/2)+mapCanvasWidth(n),mapCanvasHeight(y/2)+mapCanvasHeight(r)],ae=e.getContext("2d");ae.strokeStyle="#811616",ae.lineWidth=getStrokeWidth(),ae.beginPath(),ae.moveTo(0,mapCanvasHeight(L)),ae.lineTo(mapCanvasWidth(y),mapCanvasHeight(L)),ae.stroke(),ae.closePath(),ae.beginPath(),ae.moveTo(0,mapCanvasHeight(z)),ae.lineTo(mapCanvasWidth(y),mapCanvasHeight(z)),ae.stroke(),ae.closePath(),ae.beginPath(),ae.moveTo(mapCanvasWidth($),0),ae.lineTo(mapCanvasWidth($),mapCanvasHeight(y)),ae.stroke(),ae.closePath(),ae.beginPath(),ae.moveTo(mapCanvasWidth(V),0),ae.lineTo(mapCanvasWidth(V),mapCanvasHeight(y)),ae.stroke(),ae.closePath(),ae.beginPath(),ae.strokeStyle="#153063",ae.rect(mapCanvasWidth(y/2-g/4),mapCanvasHeight(y/2-g/4),mapCanvasWidth(g/2),mapCanvasHeight(g/2)),ae.stroke(),ae.closePath(),ae.fillStyle="#153063",ae.lineWidth=0,ae.beginPath(),ae.arc(j[0],j[1],20,0,2*Math.PI),ae.closePath(),ae.fill(),k.length&&renderLayout(k,{x:0,y:0,w:y,h:y},1,{x1:$,x2:V,y1:L,y2:z,l:y},e)},editing$4=ref(!1),setEditing$2=e=>{editing$4.value=e},draggingJoint$2=ref(null),putAtCoord$2=ref(null),movingJoint$2=ref(null),editCharacterFileOnDragging=ref(null);computed(()=>{if(!editCharacterFileOnDragging.value)return null;const e=editCharacterFileOnDragging.value;if(!editCharacterFile.value?.selectedComponentsTree||!editCharacterFile?.selectedComponentsTree.length)return null;let n=null;for(let g=0;g<editCharacterFile.value?.selectedComponentsTree.length-1;g++){const y=editCharacterFile.value?.selectedComponentsTree[g];n?n=selectedItemByUUID(n.value.components,y):n=selectedItemByUUID(e.components,y)}return n.value.components.map(g=>selectedItemByUUID(n.value.components,g.uuid))});const SubComponentsRootOnDragging$1=computed(()=>{if(!editCharacterFileOnDragging.value)return null;const e=editCharacterFileOnDragging.value;if(!editCharacterFile.value?.selectedComponentsTree||!editCharacterFile.value?.selectedComponentsTree.length)return null;let n=null;for(let r=0;r<editCharacterFile.value?.selectedComponentsTree.length-1;r++){const g=editCharacterFile.value?.selectedComponentsTree[r];n?n=selectedItemByUUID(n.value.components,g):n=selectedItemByUUID(e.components,g)}return n}),selectedSubComponentOnDragging$1=computed(()=>{let e=null;if(!editCharacterFileOnDragging.value)e=null;else{const n=editCharacterFileOnDragging.value;if(!editCharacterFile.value?.selectedComponentsTree||!editCharacterFile.value?.selectedComponentsTree.length)e=null;else{let r=null;for(let y=0;y<editCharacterFile.value?.selectedComponentsTree.length-1;y++){const k=editCharacterFile.value?.selectedComponentsTree[y];r?r=selectedItemByUUID(r.value.components,k):r=selectedItemByUUID(n.components,k)}const g=editCharacterFile.value?.selectedComponentsTree[editCharacterFile.value?.selectedComponentsTree.length-1];g!=="null"&&(e=selectedItemByUUID(r.value.components,g))}}return e}),selectedComponentsOnDragging$1=computed(()=>{if(!editCharacterFileOnDragging.value)return null;const e=editCharacterFileOnDragging.value;return editCharacterFile.value?.selectedComponentsUUIDs.map(r=>traverseComponents(e.components,r))}),selectedComponentOnDragging$1=computed(()=>!selectedComponentsOnDragging$1.value||selectedComponentsOnDragging$1.value.length===0?null:selectedComponentsOnDragging$1.value.length===1?selectedComponentsOnDragging$1.value[0]:"multi"),clearCanvas=e=>{const n=e.getContext("2d");n.clearRect(0,0,n.canvas.width,n.canvas.height)},fillBackground=(e,n,r)=>{const g=e.width,y=e.height,k=e.getContext("2d");n.type===BackgroundType.Color&&(k.fillStyle=n.color,k.fillRect(0,0,g,y)),n.type===BackgroundType.Transparent&&transparent(e),r.type===GridType.Mesh?mesh(e,r.precision):r.type===GridType.LayoutGrid&&layoutGrid(e)},renderCanvas=(e,n,r={fill:!1,offset:{x:0,y:0},scale:1,forceUpdate:!1})=>{const g=r.scale,y=n.getContext("2d");let k=!1;e.forEach(($,V)=>{if(!(!$||$.visible===null||$.visible===void 0||!$.visible)){if($.type==="picture"){k&&(y.closePath(),fontRenderStyle.value==="color"?(y.fillStyle=$.fillColor||"#000",y.strokeStyle=$.fillColor||"#000",y.fill("nonzero")):fontRenderStyle.value==="black"||r.fill?(y.fillStyle="#000",y.strokeStyle="#000",y.fill("nonzero")):y.strokeStyle="#000",y.stroke(),k=!1);const{x:L,y:z,w:j,h:ae,rotation:oe}=$,re=mapCanvasX(L)*g,ue=mapCanvasY(z)*g,le=mapCanvasWidth(j)*g,de=mapCanvasHeight(ae)*g,{img:he,pixelMode:_e,pixels:xe}=$.value;if(!_e)$.opacity&&(y.globalAlpha=$.opacity),y.translate(mapCanvasX(r.offset.x),mapCanvasY(r.offset.y)),y.translate(re+le/2,ue+de/2),y.rotate(oe*Math.PI/180),y.translate(-(re+le/2),-(ue+de/2)),y.drawImage(he,re,ue,le,de),y.setTransform(1,0,0,1,0,0),$.opacity&&(y.globalAlpha=1);else{$.opacity&&(y.globalAlpha=$.opacity),y.translate(mapCanvasX(r.offset.x),mapCanvasY(r.offset.y)),y.translate(re+le/2,ue+de/2),y.rotate(oe*Math.PI/180),y.translate(-(re+le/2),-(ue+de/2));for(let Ne=0;Ne<le;Ne++)for(let $e=0;$e<de;$e++){const Ce=he.width,Ie=he.height,ze=Math.floor(Ne*Ce/le),Pt=(Math.floor($e*Ie/de)*Ce+ze)*4;y.fillStyle=`rgba(${xe[Pt]}, ${xe[Pt+1]}, ${xe[Pt+2]}, ${xe[Pt+3]})`,y.fillRect(Ne,$e,1,1)}$.opacity&&(y.globalAlpha=1),y.setTransform(1,0,0,1,0,0)}return}if($.type==="glyph"){k&&(y.closePath(),fontRenderStyle.value==="color"?(y.fillStyle=$.fillColor||"#000",y.strokeStyle=$.fillColor||"#000",y.fill("nonzero")):fontRenderStyle.value==="black"||r.fill?(y.fillStyle="#000",y.strokeStyle="#000",y.fill("nonzero")):y.strokeStyle="#000",y.stroke(),k=!1),(!$.value._o||!$.value._o.components||!$.value._o.components.length||r.forceUpdate)&&executeScript($.value);const L=$.value._o?$.value._o:new CustomGlyph($.value);r.forceUpdate?L.render_forceUpdate(n,!0,{x:r.offset.x+$.ox,y:r.offset.y+$.oy},!1,g,$.value.fillColor||"#000"):L.render(n,!0,{x:r.offset.x+$.ox,y:r.offset.y+$.oy},!1,g,$.value.fillColor||"#000");return}if(($.type==="pen"||$.type==="polygon"||$.type==="ellipse"||$.type==="rectangle")&&!k&&fontRenderStyle.value!=="color"&&(y.beginPath(),k=!0),$.type==="pen"){const{x:L,y:z,w:j,h:ae,rotation:oe,flipX:re,flipY:ue}=$,le=mapCanvasX(L)*g,de=mapCanvasY(z)*g,he=mapCanvasWidth(j)*g,_e=mapCanvasHeight(ae)*g,{strokeColor:xe,fillColor:Ne,points:$e,closePath:Ce}=$.value;y.lineWidth=getStrokeWidth(),fontRenderStyle.value==="color"&&y.beginPath();let Ie=transformPoints($e,{x:L,y:z,w:j,h:ae,rotation:0,flipX:re,flipY:ue});Ie=Ie.map(ze=>mapCanvasCoords({x:ze.x*g,y:ze.y*g})),y.translate(mapCanvasX(r.offset.x),mapCanvasY(r.offset.y)),y.translate(le+he/2,de+_e/2),y.rotate(oe*Math.PI/180),y.translate(-(le+he/2),-(de+_e/2)),y.moveTo(Ie[0].x,Ie[0].y),Ie.length>=4&&y.bezierCurveTo(Ie[1].x,Ie[1].y,Ie[2].x,Ie[2].y,Ie[3].x,Ie[3].y);for(let ze=3;ze<Ie.length-1&&!(ze+3>=Ie.length);ze+=3)y.bezierCurveTo(Ie[ze+1].x,Ie[ze+1].y,Ie[ze+2].x,Ie[ze+2].y,Ie[ze+3].x,Ie[ze+3].y);fontRenderStyle.value==="color"&&(y.fillStyle=Ne||"#000",y.strokeStyle=Ne||"#000",y.fill(),y.stroke()),y.setTransform(1,0,0,1,0,0)}if($.type==="polygon"){const{x:L,y:z,w:j,h:ae,rotation:oe,flipX:re,flipY:ue}=$,le=mapCanvasX(L)*g,de=mapCanvasY(z)*g,he=mapCanvasWidth(j)*g,_e=mapCanvasHeight(ae)*g,{strokeColor:xe,fillColor:Ne,points:$e,closePath:Ce}=$.value;y.strokeStyle=xe||"#000",y.lineWidth=getStrokeWidth(),y.fillStyle=Ne||"rgba(0, 0, 0, 0)";let Ie=transformPoints($e,{x:L,y:z,w:j,h:ae,rotation:0,flipX:re,flipY:ue});Ie=Ie.map(ze=>mapCanvasCoords({x:ze.x*g,y:ze.y*g})),fontRenderStyle.value==="color"&&y.beginPath(),y.translate(mapCanvasX(r.offset.x),mapCanvasY(r.offset.y)),y.translate(le+he/2,de+_e/2),y.rotate(oe*Math.PI/180),y.translate(-(le+he/2),-(de+_e/2)),y.moveTo(Ie[0].x,Ie[0].y);for(let ze=1;ze<Ie.length;ze++)y.lineTo(Ie[ze].x,Ie[ze].y);fontRenderStyle.value==="color"&&(y.fillStyle=Ne||"#000",y.strokeStyle=Ne||"#000",y.fill(),y.stroke()),y.setTransform(1,0,0,1,0,0)}if($.type==="ellipse"){const{x:L,y:z,w:j,h:ae,rotation:oe}=$,re=mapCanvasX(L)*g,ue=mapCanvasY(z)*g,le=mapCanvasWidth(j)*g,de=mapCanvasHeight(ae)*g,{strokeColor:he,fillColor:_e,closePath:xe}=$.value,Ne=le/2,$e=de/2,Ce=re,Ie=ue;y.lineWidth=getStrokeWidth(),fontRenderStyle.value==="color"&&y.beginPath(),y.translate(mapCanvasX(r.offset.x),mapCanvasY(r.offset.y)),y.translate(re+le/2,ue+de/2),y.rotate(oe*Math.PI/180),y.translate(-(re+le/2),-(ue+de/2)),y.moveTo(Ce+2*Ne,Ie+$e),y.ellipse(Ce+Ne,Ie+$e,Ne,$e,0,0,2*Math.PI),fontRenderStyle.value==="color"&&(y.fillStyle=_e||"#000",y.strokeStyle=_e||"#000",y.fill(),y.stroke()),y.setTransform(1,0,0,1,0,0)}if($.type==="rectangle"){const{x:L,y:z,w:j,h:ae,rotation:oe}=$,re=mapCanvasX(L)*g,ue=mapCanvasY(z)*g,le=mapCanvasWidth(j)*g,de=mapCanvasHeight(ae)*g,{strokeColor:he,fillColor:_e,closePath:xe}=$.value,Ne=le,$e=de,Ce=re,Ie=ue;y.lineWidth=getStrokeWidth(),fontRenderStyle.value==="color"&&y.beginPath(),y.translate(mapCanvasX(r.offset.x),mapCanvasY(r.offset.y)),y.translate(re+le/2,ue+de/2),y.rotate(oe*Math.PI/180),y.translate(-(re+le/2),-(ue+de/2)),y.rect(Ce,Ie,Ne,$e),fontRenderStyle.value==="color"&&(y.fillStyle=_e||"#000",y.strokeStyle=_e||"#000",y.fill(),y.stroke()),y.setTransform(1,0,0,1,0,0)}}}),k&&fontRenderStyle.value!=="color"&&(y.closePath(),y.strokeStyle="#000",(fontRenderStyle.value==="black"||r.fill)&&(y.fillStyle="#000",y.fill("nonzero")),y.stroke())},computeCoords=(e,n)=>{let{dx:r,dy:g,size:y,centerSquareSize:k,x1:$,x2:V,y1:L,y2:z}=e;(!$||!V||!L||!z)&&($=Math.round((y-k)/2)+r,V=Math.round((y-k)/2+k)+r,L=Math.round((y-k)/2)+g,z=Math.round((y-k)/2+k)+g);const{x:j,y:ae}=n;let oe=j,re=ae;return j<y/3?oe=j*$/(y/3):j>=y/3&&j<y*2/3?oe=$+(j-y/3)*(V-$)/(y/3):oe=V+(j-y*2/3)*(y-V)/(y/3),ae<y/3?re=ae*L/(y/3):ae>=y/3&&ae<y*2/3?re=L+(ae-y/3)*(z-L)/(y/3):re=z+(ae-y*2/3)*(y-z)/(y/3),{x:oe,y:re}},renderGridCanvas=(e,n,r={fill:!1,offset:{x:0,y:0},scale:1,forceUpdate:!1,grid:null,useSkeletonGrid:!1})=>{if(!r.grid)return;const g=L=>({x:r.offset.x+L.x,y:r.offset.y+L.y}),y=r.grid,k=r.scale,$=r.useSkeletonGrid,V=n.getContext("2d");V.beginPath(),e.map((L,z)=>{if(L.visible){if(L.type==="pen"){if($)return;const{x:j,y:ae,w:oe,h:re,rotation:ue,flipX:le,flipY:de}=L,{strokeColor:he,fillColor:_e,points:xe,closePath:Ne}=L.value;V.strokeStyle=he||"#000",V.fillStyle=_e||"rgba(0, 0, 0, 0)",_e==="none"&&(V.fillStyle="rgba(0, 0, 0, 0)");let $e=transformPoints(xe,{x:j,y:ae,w:oe,h:re,rotation:ue,flipX:le,flipY:de});$e=$e.map(Ce=>{const{x:Ie,y:ze}=computeCoords(y,g(Ce));return mapCanvasCoords({x:Ie*k,y:ze*k})}),V.moveTo($e[0].x,$e[0].y);for(let Ce=1;Ce<$e.length-2;Ce+=3)V.bezierCurveTo($e[Ce].x,$e[Ce].y,$e[Ce+1].x,$e[Ce+1].y,$e[Ce+2].x,$e[Ce+2].y);V.stroke(),V.closePath(),V.setTransform(1,0,0,1,0,0)}if(L.type==="polygon"){if($)return;const{x:j,y:ae,w:oe,h:re,rotation:ue,flipX:le,flipY:de}=L,{strokeColor:he,fillColor:_e,points:xe,closePath:Ne}=L.value;V.strokeStyle=he||"#000",V.fillStyle=_e||"rgba(0, 0, 0, 0)";let $e=transformPoints(xe,{x:j,y:ae,w:oe,h:re,rotation:ue,flipX:le,flipY:de});$e=$e.map(Ce=>{const{x:Ie,y:ze}=computeCoords(y,g(Ce));return mapCanvasCoords({x:Ie*k,y:ze*k})}),V.beginPath(),V.moveTo($e[0].x,$e[0].y);for(let Ce=1;Ce<$e.length;Ce++)V.lineTo($e[Ce].x,$e[Ce].y);V.stroke(),V.closePath(),V.setTransform(1,0,0,1,0,0)}if(L.type==="ellipse"){if($)return;const{x:j,y:ae,w:oe,h:re,rotation:ue}=L,le=oe/2,de=re/2,he=j,_e=ae;let xe=getEllipsePoints(le,de,1e3,he+le,_e+de),Ne=transformPoints(xe,{x:j,y:ae,w:oe,h:re,rotation:ue,flipX:!1,flipY:!1});Ne=Ne.map($e=>{const{x:Ce,y:Ie}=computeCoords(y,g($e));return mapCanvasCoords({x:Ce*k,y:Ie*k})}),L.value,V.beginPath(),V.moveTo(Ne[0].x,Ne[0].y);for(let $e=1;$e<Ne.length;$e++)V.lineTo(Ne[$e].x,Ne[$e].y);V.lineTo(Ne[0].x,Ne[0].y),V.stroke(),V.closePath(),V.setTransform(1,0,0,1,0,0)}if(L.type==="rectangle"){if($)return;const{x:j,y:ae,w:oe,h:re,rotation:ue}=L,le=getRectanglePoints(oe,re,j,ae);let de=transformPoints(le,{x:j,y:ae,w:oe,h:re,rotation:ue,flipX:!1,flipY:!1});de=de.map($e=>{const{x:Ce,y:Ie}=computeCoords(y,g($e));return mapCanvasCoords({x:Ce*he,y:Ie*he})});const he=r.scale,{strokeColor:_e,fillColor:xe,closePath:Ne}=L.value;V.strokeStyle=_e||"#000",V.fillStyle=xe||"rgba(0, 0, 0, 0)",V.translate(mapCanvasX(r.offset.x)*he,mapCanvasY(r.offset.y)*he),V.beginPath(),V.moveTo(de[0].x,de[0].y);for(let $e=1;$e<de.length;$e++)V.lineTo(de[$e].x,de[$e].y);V.lineTo(de[0].x,de[0].y),V.stroke(),V.closePath(),V.setTransform(1,0,0,1,0,0)}if(L.type==="glyph"){(!L.value._o||!L.value._o.components||!L.value._o.components.length||r.forceUpdate)&&executeScript(L.value);const j=L.value._o?L.value._o:new CustomGlyph(L.value);r.forceUpdate?j.render_grid_forceUpdate(n,!0,{x:r.offset.x+L.ox,y:r.offset.y+L.oy},!1,k,y,$):j.render_grid(n,!0,{x:r.offset.x+L.ox,y:r.offset.y+L.oy},!1,k,y,$)}}}),V.closePath(),(fontRenderStyle.value==="color"||r.fill)&&(V.fillStyle="#000",V.fill("nonzero")),V.stroke()},formatGridComponents=(e,n={fill:!1,offset:{x:0,y:0},scale:1,forceUpdate:!1,grid:null,useSkeletonGrid:!1})=>{if(!n.grid)return;const r=k=>({x:n.offset.x+k.x,y:n.offset.y+k.y}),g=n.grid;n.scale;const y=n.useSkeletonGrid;e.map((k,$)=>{if(k.visible){if(k.type==="pen"){if(y)return;const{x:V,y:L,w:z,h:j,rotation:ae,flipX:oe,flipY:re}=k,{strokeColor:ue,fillColor:le,points:de,closePath:he}=k.value;let _e=transformPoints(de,{x:V,y:L,w:z,h:j,rotation:ae,flipX:oe,flipY:re});_e=_e.map(Ne=>{const{x:$e,y:Ce}=computeCoords(g,r(Ne));return Ne.x=$e,Ne.y=Ce,Ne});const xe=getBound$5(_e);k.x=xe.x,k.y=xe.y,k.w=xe.w,k.h=xe.h,k.rotation=0,k.flipX=!1,k.flipY=!1,k.value.points=_e,k.value.contour=null,k.value.preview=null}if(k.type==="polygon"){if(y)return;const{x:V,y:L,w:z,h:j,rotation:ae,flipX:oe,flipY:re}=k,{strokeColor:ue,fillColor:le,points:de,closePath:he}=k.value;let _e=transformPoints(de,{x:V,y:L,w:z,h:j,rotation:ae,flipX:oe,flipY:re});_e=_e.map(Ne=>{const{x:$e,y:Ce}=computeCoords(g,r(Ne));return Ne.x=$e,Ne.y=Ce,Ne});const xe=getBound$5(_e);k.x=xe.x,k.y=xe.y,k.w=xe.w,k.h=xe.h,k.rotation=0,k.flipX=!1,k.flipY=!1,k.value.points=_e,k.value.contour=null,k.value.preview=null}if(k.type==="ellipse"){if(y)return;const{x:V,y:L,w:z,h:j,rotation:ae}=k,oe=z/2,re=j/2,ue=V,le=L,de={x:ue+oe,y:le+re},he={x:ue+oe+oe,y:le+re+re};let xe=transformPoints([de,he],{x:V,y:L,w:z,h:j,rotation:ae,flipX:!1,flipY:!1});xe=xe.map(Ie=>{const{x:ze,y:Ue}=computeCoords(g,r(Ie));return Ie.x=ze,Ie.y=Ue,Ie});const Ne=xe[1].x-xe[0].x,$e=xe[1].y-xe[0].y,Ce={x:xe[0].x-Ne,y:xe[0].y-re,w:2*oe,h:2*re};k.x=Ce.x,k.y=Ce.y,k.w=Ce.w,k.h=Ce.h,k.rotation=0,k.flipX=!1,k.flipY=!1,k.value.radiusX=Ne,k.value.radiusY=$e,k.value.contour=null,k.value.preview=null}if(k.type==="rectangle"){if(y)return;const{x:V,y:L,w:z,h:j,rotation:ae}=k,oe={x:V,y:L},re={x:V+z,y:L+j};let ue=[oe,re];ue=ue.map(he=>{const{x:_e,y:xe}=computeCoords(g,r(he));return{x:_e,y:xe}});const le=ue[1].x-ue[0].x,de=ue[1].y-ue[0].y;k.x=V,k.y=L,k.w=z,k.h=j,k.rotation=0,k.flipX=!1,k.flipY=!1,k.value.width=le,k.value.height=de,k.value.contour=null,k.value.preview=null}}})},render$1=(e,n=!0,r=!1)=>{if(clearCanvas(e),n)fillBackground(e,background$1,grid);else if(background$1.color){const g=e.getContext("2d");g.fillStyle=background$1.color,g.fillRect(0,0,e.width,e.height)}if(editStatus.value===Status.Edit)editCharacterFileOnDragging.value?renderCanvas(orderedListWithItemsForCharacterFile(editCharacterFileOnDragging.value),e,{forceUpdate:r,fill:!1,offset:{x:0,y:0},scale:1}):renderCanvas(orderedListWithItemsForCurrentCharacterFile.value,e,{forceUpdate:r,fill:!1,offset:{x:0,y:0},scale:1});else if(editStatus.value===Status.Glyph){const g=editGlyph.value._o?editGlyph.value._o:new CustomGlyph(editGlyph.value);renderGlyph(g,e,n,!1,!1)}},renderGlyph=(e,n,r=!0,g=!0,y=!0,k=!1)=>{if(clearCanvas(n),r)fillBackground(n,background$1,grid);else if(background$1.color){const $=n.getContext("2d");$.fillStyle=background$1.color,$.fillRect(0,0,n.width,n.height)}e.render_forceUpdate(n),g&&e.renderJoints(n),y&&e.renderJoints(n)},renderPreview2=(e,n,r=[])=>{const g=e.getContext("2d");if(g){g.fillStyle="white",g.fillRect(0,0,e.width,e.height),fontPreviewStyle.value==="black"&&g.beginPath();for(let y=0;y<n.length;y++){const k=n[y];if(!(!k||!k.length)){fontPreviewStyle.value==="color"&&g.beginPath(),g.moveTo(k[0].start.x,k[0].start.y);for(let $=0;$<k.length;$++){const V=k[$];V.type===PathType.LINE?g.lineTo(V.end.x,V.end.y):V.type===PathType.CUBIC_BEZIER&&g.bezierCurveTo(V.control1.x,V.control1.y,V.control2.x,V.control2.y,V.end.x,V.end.y)}fontPreviewStyle.value==="color"&&(g.closePath(),g.fillStyle=r[y]||"#000",g.fill("nonzero"))}}fontPreviewStyle.value==="black"&&(g.closePath(),g.fillStyle="#000",g.fill("nonzero"))}};function mitt(e){return{all:e=e||new Map,on:function(n,r){var g=e.get(n);g?g.push(r):e.set(n,[r])},off:function(n,r){var g=e.get(n);g&&(r?g.splice(g.indexOf(r)>>>0,1):e.set(n,[]))},emit:function(n,r){var g=e.get(n);g&&g.slice().map(function(y){y(r)}),(g=e.get("*"))&&g.slice().map(function(y){y(n,r)})}}}const emitter=mitt();var FileSaver_min={exports:{}};(function(e,n){(function(r,g){g()})(commonjsGlobal$1,function(){function r(z,j){return typeof j>"u"?j={autoBom:!1}:typeof j!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),j={autoBom:!j}),j.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(z.type)?new Blob(["\uFEFF",z],{type:z.type}):z}function g(z,j,ae){var oe=new XMLHttpRequest;oe.open("GET",z),oe.responseType="blob",oe.onload=function(){L(oe.response,j,ae)},oe.onerror=function(){console.error("could not download file")},oe.send()}function y(z){var j=new XMLHttpRequest;j.open("HEAD",z,!1);try{j.send()}catch{}return 200<=j.status&&299>=j.status}function k(z){try{z.dispatchEvent(new MouseEvent("click"))}catch{var j=document.createEvent("MouseEvents");j.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),z.dispatchEvent(j)}}var $=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal$1=="object"&&commonjsGlobal$1.global===commonjsGlobal$1?commonjsGlobal$1:void 0,V=$.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),L=$.saveAs||(typeof window!="object"||window!==$?function(){}:"download"in HTMLAnchorElement.prototype&&!V?function(z,j,ae){var oe=$.URL||$.webkitURL,re=document.createElement("a");j=j||z.name||"download",re.download=j,re.rel="noopener",typeof z=="string"?(re.href=z,re.origin===location.origin?k(re):y(re.href)?g(z,j,ae):k(re,re.target="_blank")):(re.href=oe.createObjectURL(z),setTimeout(function(){oe.revokeObjectURL(re.href)},4e4),setTimeout(function(){k(re)},0))}:"msSaveOrOpenBlob"in navigator?function(z,j,ae){if(j=j||z.name||"download",typeof z!="string")navigator.msSaveOrOpenBlob(r(z,ae),j);else if(y(z))g(z,j,ae);else{var oe=document.createElement("a");oe.href=z,oe.target="_blank",setTimeout(function(){k(oe)})}}:function(z,j,ae,oe){if(oe=oe||open("","_blank"),oe&&(oe.document.title=oe.document.body.innerText="downloading..."),typeof z=="string")return g(z,j,ae);var re=z.type==="application/octet-stream",ue=/constructor/i.test($.HTMLElement)||$.safari,le=/CriOS\/[\d]+/.test(navigator.userAgent);if((le||re&&ue||V)&&typeof FileReader<"u"){var de=new FileReader;de.onloadend=function(){var xe=de.result;xe=le?xe:xe.replace(/^data:[^;]*;/,"data:attachment/file;"),oe?oe.location.href=xe:location=xe,oe=null},de.readAsDataURL(z)}else{var he=$.URL||$.webkitURL,_e=he.createObjectURL(z);oe?oe.location=_e:location.href=_e,oe=null,setTimeout(function(){he.revokeObjectURL(_e)},4e4)}});$.saveAs=L.saveAs=L,e.exports=L})})(FileSaver_min);var FileSaver_minExports=FileSaver_min.exports;const saveAs=getDefaultExportFromCjs(FileSaver_minExports);var jszip_min={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,n){(function(r){e.exports=r()})(function(){return function r(g,y,k){function $(z,j){if(!y[z]){if(!g[z]){var ae=typeof commonjsRequire=="function"&&commonjsRequire;if(!j&&ae)return ae(z,!0);if(V)return V(z,!0);var oe=new Error("Cannot find module '"+z+"'");throw oe.code="MODULE_NOT_FOUND",oe}var re=y[z]={exports:{}};g[z][0].call(re.exports,function(ue){var le=g[z][1][ue];return $(le||ue)},re,re.exports,r,g,y,k)}return y[z].exports}for(var V=typeof commonjsRequire=="function"&&commonjsRequire,L=0;L<k.length;L++)$(k[L]);return $}({1:[function(r,g,y){var k=r("./utils"),$=r("./support"),V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";y.encode=function(L){for(var z,j,ae,oe,re,ue,le,de=[],he=0,_e=L.length,xe=_e,Ne=k.getTypeOf(L)!=="string";he<L.length;)xe=_e-he,ae=Ne?(z=L[he++],j=he<_e?L[he++]:0,he<_e?L[he++]:0):(z=L.charCodeAt(he++),j=he<_e?L.charCodeAt(he++):0,he<_e?L.charCodeAt(he++):0),oe=z>>2,re=(3&z)<<4|j>>4,ue=1<xe?(15&j)<<2|ae>>6:64,le=2<xe?63&ae:64,de.push(V.charAt(oe)+V.charAt(re)+V.charAt(ue)+V.charAt(le));return de.join("")},y.decode=function(L){var z,j,ae,oe,re,ue,le=0,de=0,he="data:";if(L.substr(0,he.length)===he)throw new Error("Invalid base64 input, it looks like a data url.");var _e,xe=3*(L=L.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(L.charAt(L.length-1)===V.charAt(64)&&xe--,L.charAt(L.length-2)===V.charAt(64)&&xe--,xe%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_e=$.uint8array?new Uint8Array(0|xe):new Array(0|xe);le<L.length;)z=V.indexOf(L.charAt(le++))<<2|(oe=V.indexOf(L.charAt(le++)))>>4,j=(15&oe)<<4|(re=V.indexOf(L.charAt(le++)))>>2,ae=(3&re)<<6|(ue=V.indexOf(L.charAt(le++))),_e[de++]=z,re!==64&&(_e[de++]=j),ue!==64&&(_e[de++]=ae);return _e}},{"./support":30,"./utils":32}],2:[function(r,g,y){var k=r("./external"),$=r("./stream/DataWorker"),V=r("./stream/Crc32Probe"),L=r("./stream/DataLengthProbe");function z(j,ae,oe,re,ue){this.compressedSize=j,this.uncompressedSize=ae,this.crc32=oe,this.compression=re,this.compressedContent=ue}z.prototype={getContentWorker:function(){var j=new $(k.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new L("data_length")),ae=this;return j.on("end",function(){if(this.streamInfo.data_length!==ae.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),j},getCompressedWorker:function(){return new $(k.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},z.createWorkerFrom=function(j,ae,oe){return j.pipe(new V).pipe(new L("uncompressedSize")).pipe(ae.compressWorker(oe)).pipe(new L("compressedSize")).withStreamInfo("compression",ae)},g.exports=z},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,g,y){var k=r("./stream/GenericWorker");y.STORE={magic:"\0\0",compressWorker:function(){return new k("STORE compression")},uncompressWorker:function(){return new k("STORE decompression")}},y.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,g,y){var k=r("./utils"),$=function(){for(var V,L=[],z=0;z<256;z++){V=z;for(var j=0;j<8;j++)V=1&V?3988292384^V>>>1:V>>>1;L[z]=V}return L}();g.exports=function(V,L){return V!==void 0&&V.length?k.getTypeOf(V)!=="string"?function(z,j,ae,oe){var re=$,ue=oe+ae;z^=-1;for(var le=oe;le<ue;le++)z=z>>>8^re[255&(z^j[le])];return-1^z}(0|L,V,V.length,0):function(z,j,ae,oe){var re=$,ue=oe+ae;z^=-1;for(var le=oe;le<ue;le++)z=z>>>8^re[255&(z^j.charCodeAt(le))];return-1^z}(0|L,V,V.length,0):0}},{"./utils":32}],5:[function(r,g,y){y.base64=!1,y.binary=!1,y.dir=!1,y.createFolders=!0,y.date=null,y.compression=null,y.compressionOptions=null,y.comment=null,y.unixPermissions=null,y.dosPermissions=null},{}],6:[function(r,g,y){var k=null;k=typeof Promise<"u"?Promise:r("lie"),g.exports={Promise:k}},{lie:37}],7:[function(r,g,y){var k=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",$=r("pako"),V=r("./utils"),L=r("./stream/GenericWorker"),z=k?"uint8array":"array";function j(ae,oe){L.call(this,"FlateWorker/"+ae),this._pako=null,this._pakoAction=ae,this._pakoOptions=oe,this.meta={}}y.magic="\b\0",V.inherits(j,L),j.prototype.processChunk=function(ae){this.meta=ae.meta,this._pako===null&&this._createPako(),this._pako.push(V.transformTo(z,ae.data),!1)},j.prototype.flush=function(){L.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},j.prototype.cleanUp=function(){L.prototype.cleanUp.call(this),this._pako=null},j.prototype._createPako=function(){this._pako=new $[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var ae=this;this._pako.onData=function(oe){ae.push({data:oe,meta:ae.meta})}},y.compressWorker=function(ae){return new j("Deflate",ae)},y.uncompressWorker=function(){return new j("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,g,y){function k(re,ue){var le,de="";for(le=0;le<ue;le++)de+=String.fromCharCode(255&re),re>>>=8;return de}function $(re,ue,le,de,he,_e){var xe,Ne,$e=re.file,Ce=re.compression,Ie=_e!==z.utf8encode,ze=V.transformTo("string",_e($e.name)),Ue=V.transformTo("string",z.utf8encode($e.name)),Pt=$e.comment,hn=V.transformTo("string",_e(Pt)),Dt=V.transformTo("string",z.utf8encode(Pt)),xn=Ue.length!==$e.name.length,jt=Dt.length!==Pt.length,Vn="",Rn="",Tn="",Ln=$e.dir,Sn=$e.date,An={crc32:0,compressedSize:0,uncompressedSize:0};ue&&!le||(An.crc32=re.crc32,An.compressedSize=re.compressedSize,An.uncompressedSize=re.uncompressedSize);var In=0;ue&&(In|=8),Ie||!xn&&!jt||(In|=2048);var Mn=0,ra=0;Ln&&(Mn|=16),he==="UNIX"?(ra=798,Mn|=function(ua,aa){var Nn=ua;return ua||(Nn=aa?16893:33204),(65535&Nn)<<16}($e.unixPermissions,Ln)):(ra=20,Mn|=function(ua){return 63&(ua||0)}($e.dosPermissions)),xe=Sn.getUTCHours(),xe<<=6,xe|=Sn.getUTCMinutes(),xe<<=5,xe|=Sn.getUTCSeconds()/2,Ne=Sn.getUTCFullYear()-1980,Ne<<=4,Ne|=Sn.getUTCMonth()+1,Ne<<=5,Ne|=Sn.getUTCDate(),xn&&(Rn=k(1,1)+k(j(ze),4)+Ue,Vn+="up"+k(Rn.length,2)+Rn),jt&&(Tn=k(1,1)+k(j(hn),4)+Dt,Vn+="uc"+k(Tn.length,2)+Tn);var da="";return da+=`
\0`,da+=k(In,2),da+=Ce.magic,da+=k(xe,2),da+=k(Ne,2),da+=k(An.crc32,4),da+=k(An.compressedSize,4),da+=k(An.uncompressedSize,4),da+=k(ze.length,2),da+=k(Vn.length,2),{fileRecord:ae.LOCAL_FILE_HEADER+da+ze+Vn,dirRecord:ae.CENTRAL_FILE_HEADER+k(ra,2)+da+k(hn.length,2)+"\0\0\0\0"+k(Mn,4)+k(de,4)+ze+Vn+hn}}var V=r("../utils"),L=r("../stream/GenericWorker"),z=r("../utf8"),j=r("../crc32"),ae=r("../signature");function oe(re,ue,le,de){L.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=ue,this.zipPlatform=le,this.encodeFileName=de,this.streamFiles=re,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}V.inherits(oe,L),oe.prototype.push=function(re){var ue=re.meta.percent||0,le=this.entriesCount,de=this._sources.length;this.accumulate?this.contentBuffer.push(re):(this.bytesWritten+=re.data.length,L.prototype.push.call(this,{data:re.data,meta:{currentFile:this.currentFile,percent:le?(ue+100*(le-de-1))/le:100}}))},oe.prototype.openedSource=function(re){this.currentSourceOffset=this.bytesWritten,this.currentFile=re.file.name;var ue=this.streamFiles&&!re.file.dir;if(ue){var le=$(re,ue,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:le.fileRecord,meta:{percent:0}})}else this.accumulate=!0},oe.prototype.closedSource=function(re){this.accumulate=!1;var ue=this.streamFiles&&!re.file.dir,le=$(re,ue,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(le.dirRecord),ue)this.push({data:function(de){return ae.DATA_DESCRIPTOR+k(de.crc32,4)+k(de.compressedSize,4)+k(de.uncompressedSize,4)}(re),meta:{percent:100}});else for(this.push({data:le.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},oe.prototype.flush=function(){for(var re=this.bytesWritten,ue=0;ue<this.dirRecords.length;ue++)this.push({data:this.dirRecords[ue],meta:{percent:100}});var le=this.bytesWritten-re,de=function(he,_e,xe,Ne,$e){var Ce=V.transformTo("string",$e(Ne));return ae.CENTRAL_DIRECTORY_END+"\0\0\0\0"+k(he,2)+k(he,2)+k(_e,4)+k(xe,4)+k(Ce.length,2)+Ce}(this.dirRecords.length,le,re,this.zipComment,this.encodeFileName);this.push({data:de,meta:{percent:100}})},oe.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},oe.prototype.registerPrevious=function(re){this._sources.push(re);var ue=this;return re.on("data",function(le){ue.processChunk(le)}),re.on("end",function(){ue.closedSource(ue.previous.streamInfo),ue._sources.length?ue.prepareNextSource():ue.end()}),re.on("error",function(le){ue.error(le)}),this},oe.prototype.resume=function(){return!!L.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},oe.prototype.error=function(re){var ue=this._sources;if(!L.prototype.error.call(this,re))return!1;for(var le=0;le<ue.length;le++)try{ue[le].error(re)}catch{}return!0},oe.prototype.lock=function(){L.prototype.lock.call(this);for(var re=this._sources,ue=0;ue<re.length;ue++)re[ue].lock()},g.exports=oe},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,g,y){var k=r("../compressions"),$=r("./ZipFileWorker");y.generateWorker=function(V,L,z){var j=new $(L.streamFiles,z,L.platform,L.encodeFileName),ae=0;try{V.forEach(function(oe,re){ae++;var ue=function(_e,xe){var Ne=_e||xe,$e=k[Ne];if(!$e)throw new Error(Ne+" is not a valid compression method !");return $e}(re.options.compression,L.compression),le=re.options.compressionOptions||L.compressionOptions||{},de=re.dir,he=re.date;re._compressWorker(ue,le).withStreamInfo("file",{name:oe,dir:de,date:he,comment:re.comment||"",unixPermissions:re.unixPermissions,dosPermissions:re.dosPermissions}).pipe(j)}),j.entriesCount=ae}catch(oe){j.error(oe)}return j}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,g,y){function k(){if(!(this instanceof k))return new k;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var $=new k;for(var V in this)typeof this[V]!="function"&&($[V]=this[V]);return $}}(k.prototype=r("./object")).loadAsync=r("./load"),k.support=r("./support"),k.defaults=r("./defaults"),k.version="3.10.1",k.loadAsync=function($,V){return new k().loadAsync($,V)},k.external=r("./external"),g.exports=k},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,g,y){var k=r("./utils"),$=r("./external"),V=r("./utf8"),L=r("./zipEntries"),z=r("./stream/Crc32Probe"),j=r("./nodejsUtils");function ae(oe){return new $.Promise(function(re,ue){var le=oe.decompressed.getContentWorker().pipe(new z);le.on("error",function(de){ue(de)}).on("end",function(){le.streamInfo.crc32!==oe.decompressed.crc32?ue(new Error("Corrupted zip : CRC32 mismatch")):re()}).resume()})}g.exports=function(oe,re){var ue=this;return re=k.extend(re||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:V.utf8decode}),j.isNode&&j.isStream(oe)?$.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):k.prepareContent("the loaded zip file",oe,!0,re.optimizedBinaryString,re.base64).then(function(le){var de=new L(re);return de.load(le),de}).then(function(le){var de=[$.Promise.resolve(le)],he=le.files;if(re.checkCRC32)for(var _e=0;_e<he.length;_e++)de.push(ae(he[_e]));return $.Promise.all(de)}).then(function(le){for(var de=le.shift(),he=de.files,_e=0;_e<he.length;_e++){var xe=he[_e],Ne=xe.fileNameStr,$e=k.resolve(xe.fileNameStr);ue.file($e,xe.decompressed,{binary:!0,optimizedBinaryString:!0,date:xe.date,dir:xe.dir,comment:xe.fileCommentStr.length?xe.fileCommentStr:null,unixPermissions:xe.unixPermissions,dosPermissions:xe.dosPermissions,createFolders:re.createFolders}),xe.dir||(ue.file($e).unsafeOriginalName=Ne)}return de.zipComment.length&&(ue.comment=de.zipComment),ue})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,g,y){var k=r("../utils"),$=r("../stream/GenericWorker");function V(L,z){$.call(this,"Nodejs stream input adapter for "+L),this._upstreamEnded=!1,this._bindStream(z)}k.inherits(V,$),V.prototype._bindStream=function(L){var z=this;(this._stream=L).pause(),L.on("data",function(j){z.push({data:j,meta:{percent:0}})}).on("error",function(j){z.isPaused?this.generatedError=j:z.error(j)}).on("end",function(){z.isPaused?z._upstreamEnded=!0:z.end()})},V.prototype.pause=function(){return!!$.prototype.pause.call(this)&&(this._stream.pause(),!0)},V.prototype.resume=function(){return!!$.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},g.exports=V},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,g,y){var k=r("readable-stream").Readable;function $(V,L,z){k.call(this,L),this._helper=V;var j=this;V.on("data",function(ae,oe){j.push(ae)||j._helper.pause(),z&&z(oe)}).on("error",function(ae){j.emit("error",ae)}).on("end",function(){j.push(null)})}r("../utils").inherits($,k),$.prototype._read=function(){this._helper.resume()},g.exports=$},{"../utils":32,"readable-stream":16}],14:[function(r,g,y){g.exports={isNode:typeof Buffer<"u",newBufferFrom:function(k,$){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(k,$);if(typeof k=="number")throw new Error('The "data" argument must not be a number');return new Buffer(k,$)},allocBuffer:function(k){if(Buffer.alloc)return Buffer.alloc(k);var $=new Buffer(k);return $.fill(0),$},isBuffer:function(k){return Buffer.isBuffer(k)},isStream:function(k){return k&&typeof k.on=="function"&&typeof k.pause=="function"&&typeof k.resume=="function"}}},{}],15:[function(r,g,y){function k($e,Ce,Ie){var ze,Ue=V.getTypeOf(Ce),Pt=V.extend(Ie||{},j);Pt.date=Pt.date||new Date,Pt.compression!==null&&(Pt.compression=Pt.compression.toUpperCase()),typeof Pt.unixPermissions=="string"&&(Pt.unixPermissions=parseInt(Pt.unixPermissions,8)),Pt.unixPermissions&&16384&Pt.unixPermissions&&(Pt.dir=!0),Pt.dosPermissions&&16&Pt.dosPermissions&&(Pt.dir=!0),Pt.dir&&($e=he($e)),Pt.createFolders&&(ze=de($e))&&_e.call(this,ze,!0);var hn=Ue==="string"&&Pt.binary===!1&&Pt.base64===!1;Ie&&Ie.binary!==void 0||(Pt.binary=!hn),(Ce instanceof ae&&Ce.uncompressedSize===0||Pt.dir||!Ce||Ce.length===0)&&(Pt.base64=!1,Pt.binary=!0,Ce="",Pt.compression="STORE",Ue="string");var Dt=null;Dt=Ce instanceof ae||Ce instanceof L?Ce:ue.isNode&&ue.isStream(Ce)?new le($e,Ce):V.prepareContent($e,Ce,Pt.binary,Pt.optimizedBinaryString,Pt.base64);var xn=new oe($e,Dt,Pt);this.files[$e]=xn}var $=r("./utf8"),V=r("./utils"),L=r("./stream/GenericWorker"),z=r("./stream/StreamHelper"),j=r("./defaults"),ae=r("./compressedObject"),oe=r("./zipObject"),re=r("./generate"),ue=r("./nodejsUtils"),le=r("./nodejs/NodejsStreamInputAdapter"),de=function($e){$e.slice(-1)==="/"&&($e=$e.substring(0,$e.length-1));var Ce=$e.lastIndexOf("/");return 0<Ce?$e.substring(0,Ce):""},he=function($e){return $e.slice(-1)!=="/"&&($e+="/"),$e},_e=function($e,Ce){return Ce=Ce!==void 0?Ce:j.createFolders,$e=he($e),this.files[$e]||k.call(this,$e,null,{dir:!0,createFolders:Ce}),this.files[$e]};function xe($e){return Object.prototype.toString.call($e)==="[object RegExp]"}var Ne={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function($e){var Ce,Ie,ze;for(Ce in this.files)ze=this.files[Ce],(Ie=Ce.slice(this.root.length,Ce.length))&&Ce.slice(0,this.root.length)===this.root&&$e(Ie,ze)},filter:function($e){var Ce=[];return this.forEach(function(Ie,ze){$e(Ie,ze)&&Ce.push(ze)}),Ce},file:function($e,Ce,Ie){if(arguments.length!==1)return $e=this.root+$e,k.call(this,$e,Ce,Ie),this;if(xe($e)){var ze=$e;return this.filter(function(Pt,hn){return!hn.dir&&ze.test(Pt)})}var Ue=this.files[this.root+$e];return Ue&&!Ue.dir?Ue:null},folder:function($e){if(!$e)return this;if(xe($e))return this.filter(function(Ue,Pt){return Pt.dir&&$e.test(Ue)});var Ce=this.root+$e,Ie=_e.call(this,Ce),ze=this.clone();return ze.root=Ie.name,ze},remove:function($e){$e=this.root+$e;var Ce=this.files[$e];if(Ce||($e.slice(-1)!=="/"&&($e+="/"),Ce=this.files[$e]),Ce&&!Ce.dir)delete this.files[$e];else for(var Ie=this.filter(function(Ue,Pt){return Pt.name.slice(0,$e.length)===$e}),ze=0;ze<Ie.length;ze++)delete this.files[Ie[ze].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function($e){var Ce,Ie={};try{if((Ie=V.extend($e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:$.utf8encode})).type=Ie.type.toLowerCase(),Ie.compression=Ie.compression.toUpperCase(),Ie.type==="binarystring"&&(Ie.type="string"),!Ie.type)throw new Error("No output type specified.");V.checkSupport(Ie.type),Ie.platform!=="darwin"&&Ie.platform!=="freebsd"&&Ie.platform!=="linux"&&Ie.platform!=="sunos"||(Ie.platform="UNIX"),Ie.platform==="win32"&&(Ie.platform="DOS");var ze=Ie.comment||this.comment||"";Ce=re.generateWorker(this,Ie,ze)}catch(Ue){(Ce=new L("error")).error(Ue)}return new z(Ce,Ie.type||"string",Ie.mimeType)},generateAsync:function($e,Ce){return this.generateInternalStream($e).accumulate(Ce)},generateNodeStream:function($e,Ce){return($e=$e||{}).type||($e.type="nodebuffer"),this.generateInternalStream($e).toNodejsStream(Ce)}};g.exports=Ne},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,g,y){g.exports=r("stream")},{stream:void 0}],17:[function(r,g,y){var k=r("./DataReader");function $(V){k.call(this,V);for(var L=0;L<this.data.length;L++)V[L]=255&V[L]}r("../utils").inherits($,k),$.prototype.byteAt=function(V){return this.data[this.zero+V]},$.prototype.lastIndexOfSignature=function(V){for(var L=V.charCodeAt(0),z=V.charCodeAt(1),j=V.charCodeAt(2),ae=V.charCodeAt(3),oe=this.length-4;0<=oe;--oe)if(this.data[oe]===L&&this.data[oe+1]===z&&this.data[oe+2]===j&&this.data[oe+3]===ae)return oe-this.zero;return-1},$.prototype.readAndCheckSignature=function(V){var L=V.charCodeAt(0),z=V.charCodeAt(1),j=V.charCodeAt(2),ae=V.charCodeAt(3),oe=this.readData(4);return L===oe[0]&&z===oe[1]&&j===oe[2]&&ae===oe[3]},$.prototype.readData=function(V){if(this.checkOffset(V),V===0)return[];var L=this.data.slice(this.zero+this.index,this.zero+this.index+V);return this.index+=V,L},g.exports=$},{"../utils":32,"./DataReader":18}],18:[function(r,g,y){var k=r("../utils");function $(V){this.data=V,this.length=V.length,this.index=0,this.zero=0}$.prototype={checkOffset:function(V){this.checkIndex(this.index+V)},checkIndex:function(V){if(this.length<this.zero+V||V<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+V+"). Corrupted zip ?")},setIndex:function(V){this.checkIndex(V),this.index=V},skip:function(V){this.setIndex(this.index+V)},byteAt:function(){},readInt:function(V){var L,z=0;for(this.checkOffset(V),L=this.index+V-1;L>=this.index;L--)z=(z<<8)+this.byteAt(L);return this.index+=V,z},readString:function(V){return k.transformTo("string",this.readData(V))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var V=this.readInt(4);return new Date(Date.UTC(1980+(V>>25&127),(V>>21&15)-1,V>>16&31,V>>11&31,V>>5&63,(31&V)<<1))}},g.exports=$},{"../utils":32}],19:[function(r,g,y){var k=r("./Uint8ArrayReader");function $(V){k.call(this,V)}r("../utils").inherits($,k),$.prototype.readData=function(V){this.checkOffset(V);var L=this.data.slice(this.zero+this.index,this.zero+this.index+V);return this.index+=V,L},g.exports=$},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,g,y){var k=r("./DataReader");function $(V){k.call(this,V)}r("../utils").inherits($,k),$.prototype.byteAt=function(V){return this.data.charCodeAt(this.zero+V)},$.prototype.lastIndexOfSignature=function(V){return this.data.lastIndexOf(V)-this.zero},$.prototype.readAndCheckSignature=function(V){return V===this.readData(4)},$.prototype.readData=function(V){this.checkOffset(V);var L=this.data.slice(this.zero+this.index,this.zero+this.index+V);return this.index+=V,L},g.exports=$},{"../utils":32,"./DataReader":18}],21:[function(r,g,y){var k=r("./ArrayReader");function $(V){k.call(this,V)}r("../utils").inherits($,k),$.prototype.readData=function(V){if(this.checkOffset(V),V===0)return new Uint8Array(0);var L=this.data.subarray(this.zero+this.index,this.zero+this.index+V);return this.index+=V,L},g.exports=$},{"../utils":32,"./ArrayReader":17}],22:[function(r,g,y){var k=r("../utils"),$=r("../support"),V=r("./ArrayReader"),L=r("./StringReader"),z=r("./NodeBufferReader"),j=r("./Uint8ArrayReader");g.exports=function(ae){var oe=k.getTypeOf(ae);return k.checkSupport(oe),oe!=="string"||$.uint8array?oe==="nodebuffer"?new z(ae):$.uint8array?new j(k.transformTo("uint8array",ae)):new V(k.transformTo("array",ae)):new L(ae)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,g,y){y.LOCAL_FILE_HEADER="PK",y.CENTRAL_FILE_HEADER="PK",y.CENTRAL_DIRECTORY_END="PK",y.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",y.ZIP64_CENTRAL_DIRECTORY_END="PK",y.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,g,y){var k=r("./GenericWorker"),$=r("../utils");function V(L){k.call(this,"ConvertWorker to "+L),this.destType=L}$.inherits(V,k),V.prototype.processChunk=function(L){this.push({data:$.transformTo(this.destType,L.data),meta:L.meta})},g.exports=V},{"../utils":32,"./GenericWorker":28}],25:[function(r,g,y){var k=r("./GenericWorker"),$=r("../crc32");function V(){k.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(V,k),V.prototype.processChunk=function(L){this.streamInfo.crc32=$(L.data,this.streamInfo.crc32||0),this.push(L)},g.exports=V},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,g,y){var k=r("../utils"),$=r("./GenericWorker");function V(L){$.call(this,"DataLengthProbe for "+L),this.propName=L,this.withStreamInfo(L,0)}k.inherits(V,$),V.prototype.processChunk=function(L){if(L){var z=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=z+L.data.length}$.prototype.processChunk.call(this,L)},g.exports=V},{"../utils":32,"./GenericWorker":28}],27:[function(r,g,y){var k=r("../utils"),$=r("./GenericWorker");function V(L){$.call(this,"DataWorker");var z=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,L.then(function(j){z.dataIsReady=!0,z.data=j,z.max=j&&j.length||0,z.type=k.getTypeOf(j),z.isPaused||z._tickAndRepeat()},function(j){z.error(j)})}k.inherits(V,$),V.prototype.cleanUp=function(){$.prototype.cleanUp.call(this),this.data=null},V.prototype.resume=function(){return!!$.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,k.delay(this._tickAndRepeat,[],this)),!0)},V.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(k.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},V.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var L=null,z=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":L=this.data.substring(this.index,z);break;case"uint8array":L=this.data.subarray(this.index,z);break;case"array":case"nodebuffer":L=this.data.slice(this.index,z)}return this.index=z,this.push({data:L,meta:{percent:this.max?this.index/this.max*100:0}})},g.exports=V},{"../utils":32,"./GenericWorker":28}],28:[function(r,g,y){function k($){this.name=$||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}k.prototype={push:function($){this.emit("data",$)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch($){this.emit("error",$)}return!0},error:function($){return!this.isFinished&&(this.isPaused?this.generatedError=$:(this.isFinished=!0,this.emit("error",$),this.previous&&this.previous.error($),this.cleanUp()),!0)},on:function($,V){return this._listeners[$].push(V),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function($,V){if(this._listeners[$])for(var L=0;L<this._listeners[$].length;L++)this._listeners[$][L].call(this,V)},pipe:function($){return $.registerPrevious(this)},registerPrevious:function($){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=$.streamInfo,this.mergeStreamInfo(),this.previous=$;var V=this;return $.on("data",function(L){V.processChunk(L)}),$.on("end",function(){V.end()}),$.on("error",function(L){V.error(L)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var $=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),$=!0),this.previous&&this.previous.resume(),!$},flush:function(){},processChunk:function($){this.push($)},withStreamInfo:function($,V){return this.extraStreamInfo[$]=V,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var $ in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,$)&&(this.streamInfo[$]=this.extraStreamInfo[$])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var $="Worker "+this.name;return this.previous?this.previous+" -> "+$:$}},g.exports=k},{}],29:[function(r,g,y){var k=r("../utils"),$=r("./ConvertWorker"),V=r("./GenericWorker"),L=r("../base64"),z=r("../support"),j=r("../external"),ae=null;if(z.nodestream)try{ae=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function oe(ue,le){return new j.Promise(function(de,he){var _e=[],xe=ue._internalType,Ne=ue._outputType,$e=ue._mimeType;ue.on("data",function(Ce,Ie){_e.push(Ce),le&&le(Ie)}).on("error",function(Ce){_e=[],he(Ce)}).on("end",function(){try{var Ce=function(Ie,ze,Ue){switch(Ie){case"blob":return k.newBlob(k.transformTo("arraybuffer",ze),Ue);case"base64":return L.encode(ze);default:return k.transformTo(Ie,ze)}}(Ne,function(Ie,ze){var Ue,Pt=0,hn=null,Dt=0;for(Ue=0;Ue<ze.length;Ue++)Dt+=ze[Ue].length;switch(Ie){case"string":return ze.join("");case"array":return Array.prototype.concat.apply([],ze);case"uint8array":for(hn=new Uint8Array(Dt),Ue=0;Ue<ze.length;Ue++)hn.set(ze[Ue],Pt),Pt+=ze[Ue].length;return hn;case"nodebuffer":return Buffer.concat(ze);default:throw new Error("concat : unsupported type '"+Ie+"'")}}(xe,_e),$e);de(Ce)}catch(Ie){he(Ie)}_e=[]}).resume()})}function re(ue,le,de){var he=le;switch(le){case"blob":case"arraybuffer":he="uint8array";break;case"base64":he="string"}try{this._internalType=he,this._outputType=le,this._mimeType=de,k.checkSupport(he),this._worker=ue.pipe(new $(he)),ue.lock()}catch(_e){this._worker=new V("error"),this._worker.error(_e)}}re.prototype={accumulate:function(ue){return oe(this,ue)},on:function(ue,le){var de=this;return ue==="data"?this._worker.on(ue,function(he){le.call(de,he.data,he.meta)}):this._worker.on(ue,function(){k.delay(le,arguments,de)}),this},resume:function(){return k.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(ue){if(k.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new ae(this,{objectMode:this._outputType!=="nodebuffer"},ue)}},g.exports=re},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,g,y){if(y.base64=!0,y.array=!0,y.string=!0,y.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",y.nodebuffer=typeof Buffer<"u",y.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")y.blob=!1;else{var k=new ArrayBuffer(0);try{y.blob=new Blob([k],{type:"application/zip"}).size===0}catch{try{var $=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);$.append(k),y.blob=$.getBlob("application/zip").size===0}catch{y.blob=!1}}}try{y.nodestream=!!r("readable-stream").Readable}catch{y.nodestream=!1}},{"readable-stream":16}],31:[function(r,g,y){for(var k=r("./utils"),$=r("./support"),V=r("./nodejsUtils"),L=r("./stream/GenericWorker"),z=new Array(256),j=0;j<256;j++)z[j]=252<=j?6:248<=j?5:240<=j?4:224<=j?3:192<=j?2:1;z[254]=z[254]=1;function ae(){L.call(this,"utf-8 decode"),this.leftOver=null}function oe(){L.call(this,"utf-8 encode")}y.utf8encode=function(re){return $.nodebuffer?V.newBufferFrom(re,"utf-8"):function(ue){var le,de,he,_e,xe,Ne=ue.length,$e=0;for(_e=0;_e<Ne;_e++)(64512&(de=ue.charCodeAt(_e)))==55296&&_e+1<Ne&&(64512&(he=ue.charCodeAt(_e+1)))==56320&&(de=65536+(de-55296<<10)+(he-56320),_e++),$e+=de<128?1:de<2048?2:de<65536?3:4;for(le=$.uint8array?new Uint8Array($e):new Array($e),_e=xe=0;xe<$e;_e++)(64512&(de=ue.charCodeAt(_e)))==55296&&_e+1<Ne&&(64512&(he=ue.charCodeAt(_e+1)))==56320&&(de=65536+(de-55296<<10)+(he-56320),_e++),de<128?le[xe++]=de:(de<2048?le[xe++]=192|de>>>6:(de<65536?le[xe++]=224|de>>>12:(le[xe++]=240|de>>>18,le[xe++]=128|de>>>12&63),le[xe++]=128|de>>>6&63),le[xe++]=128|63&de);return le}(re)},y.utf8decode=function(re){return $.nodebuffer?k.transformTo("nodebuffer",re).toString("utf-8"):function(ue){var le,de,he,_e,xe=ue.length,Ne=new Array(2*xe);for(le=de=0;le<xe;)if((he=ue[le++])<128)Ne[de++]=he;else if(4<(_e=z[he]))Ne[de++]=65533,le+=_e-1;else{for(he&=_e===2?31:_e===3?15:7;1<_e&&le<xe;)he=he<<6|63&ue[le++],_e--;1<_e?Ne[de++]=65533:he<65536?Ne[de++]=he:(he-=65536,Ne[de++]=55296|he>>10&1023,Ne[de++]=56320|1023&he)}return Ne.length!==de&&(Ne.subarray?Ne=Ne.subarray(0,de):Ne.length=de),k.applyFromCharCode(Ne)}(re=k.transformTo($.uint8array?"uint8array":"array",re))},k.inherits(ae,L),ae.prototype.processChunk=function(re){var ue=k.transformTo($.uint8array?"uint8array":"array",re.data);if(this.leftOver&&this.leftOver.length){if($.uint8array){var le=ue;(ue=new Uint8Array(le.length+this.leftOver.length)).set(this.leftOver,0),ue.set(le,this.leftOver.length)}else ue=this.leftOver.concat(ue);this.leftOver=null}var de=function(_e,xe){var Ne;for((xe=xe||_e.length)>_e.length&&(xe=_e.length),Ne=xe-1;0<=Ne&&(192&_e[Ne])==128;)Ne--;return Ne<0||Ne===0?xe:Ne+z[_e[Ne]]>xe?Ne:xe}(ue),he=ue;de!==ue.length&&($.uint8array?(he=ue.subarray(0,de),this.leftOver=ue.subarray(de,ue.length)):(he=ue.slice(0,de),this.leftOver=ue.slice(de,ue.length))),this.push({data:y.utf8decode(he),meta:re.meta})},ae.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:y.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},y.Utf8DecodeWorker=ae,k.inherits(oe,L),oe.prototype.processChunk=function(re){this.push({data:y.utf8encode(re.data),meta:re.meta})},y.Utf8EncodeWorker=oe},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,g,y){var k=r("./support"),$=r("./base64"),V=r("./nodejsUtils"),L=r("./external");function z(le){return le}function j(le,de){for(var he=0;he<le.length;++he)de[he]=255&le.charCodeAt(he);return de}r("setimmediate"),y.newBlob=function(le,de){y.checkSupport("blob");try{return new Blob([le],{type:de})}catch{try{var he=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return he.append(le),he.getBlob(de)}catch{throw new Error("Bug : can't construct the Blob.")}}};var ae={stringifyByChunk:function(le,de,he){var _e=[],xe=0,Ne=le.length;if(Ne<=he)return String.fromCharCode.apply(null,le);for(;xe<Ne;)de==="array"||de==="nodebuffer"?_e.push(String.fromCharCode.apply(null,le.slice(xe,Math.min(xe+he,Ne)))):_e.push(String.fromCharCode.apply(null,le.subarray(xe,Math.min(xe+he,Ne)))),xe+=he;return _e.join("")},stringifyByChar:function(le){for(var de="",he=0;he<le.length;he++)de+=String.fromCharCode(le[he]);return de},applyCanBeUsed:{uint8array:function(){try{return k.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return k.nodebuffer&&String.fromCharCode.apply(null,V.allocBuffer(1)).length===1}catch{return!1}}()}};function oe(le){var de=65536,he=y.getTypeOf(le),_e=!0;if(he==="uint8array"?_e=ae.applyCanBeUsed.uint8array:he==="nodebuffer"&&(_e=ae.applyCanBeUsed.nodebuffer),_e)for(;1<de;)try{return ae.stringifyByChunk(le,he,de)}catch{de=Math.floor(de/2)}return ae.stringifyByChar(le)}function re(le,de){for(var he=0;he<le.length;he++)de[he]=le[he];return de}y.applyFromCharCode=oe;var ue={};ue.string={string:z,array:function(le){return j(le,new Array(le.length))},arraybuffer:function(le){return ue.string.uint8array(le).buffer},uint8array:function(le){return j(le,new Uint8Array(le.length))},nodebuffer:function(le){return j(le,V.allocBuffer(le.length))}},ue.array={string:oe,array:z,arraybuffer:function(le){return new Uint8Array(le).buffer},uint8array:function(le){return new Uint8Array(le)},nodebuffer:function(le){return V.newBufferFrom(le)}},ue.arraybuffer={string:function(le){return oe(new Uint8Array(le))},array:function(le){return re(new Uint8Array(le),new Array(le.byteLength))},arraybuffer:z,uint8array:function(le){return new Uint8Array(le)},nodebuffer:function(le){return V.newBufferFrom(new Uint8Array(le))}},ue.uint8array={string:oe,array:function(le){return re(le,new Array(le.length))},arraybuffer:function(le){return le.buffer},uint8array:z,nodebuffer:function(le){return V.newBufferFrom(le)}},ue.nodebuffer={string:oe,array:function(le){return re(le,new Array(le.length))},arraybuffer:function(le){return ue.nodebuffer.uint8array(le).buffer},uint8array:function(le){return re(le,new Uint8Array(le.length))},nodebuffer:z},y.transformTo=function(le,de){if(de=de||"",!le)return de;y.checkSupport(le);var he=y.getTypeOf(de);return ue[he][le](de)},y.resolve=function(le){for(var de=le.split("/"),he=[],_e=0;_e<de.length;_e++){var xe=de[_e];xe==="."||xe===""&&_e!==0&&_e!==de.length-1||(xe===".."?he.pop():he.push(xe))}return he.join("/")},y.getTypeOf=function(le){return typeof le=="string"?"string":Object.prototype.toString.call(le)==="[object Array]"?"array":k.nodebuffer&&V.isBuffer(le)?"nodebuffer":k.uint8array&&le instanceof Uint8Array?"uint8array":k.arraybuffer&&le instanceof ArrayBuffer?"arraybuffer":void 0},y.checkSupport=function(le){if(!k[le.toLowerCase()])throw new Error(le+" is not supported by this platform")},y.MAX_VALUE_16BITS=65535,y.MAX_VALUE_32BITS=-1,y.pretty=function(le){var de,he,_e="";for(he=0;he<(le||"").length;he++)_e+="\\x"+((de=le.charCodeAt(he))<16?"0":"")+de.toString(16).toUpperCase();return _e},y.delay=function(le,de,he){setImmediate(function(){le.apply(he||null,de||[])})},y.inherits=function(le,de){function he(){}he.prototype=de.prototype,le.prototype=new he},y.extend=function(){var le,de,he={};for(le=0;le<arguments.length;le++)for(de in arguments[le])Object.prototype.hasOwnProperty.call(arguments[le],de)&&he[de]===void 0&&(he[de]=arguments[le][de]);return he},y.prepareContent=function(le,de,he,_e,xe){return L.Promise.resolve(de).then(function(Ne){return k.blob&&(Ne instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(Ne))!==-1)&&typeof FileReader<"u"?new L.Promise(function($e,Ce){var Ie=new FileReader;Ie.onload=function(ze){$e(ze.target.result)},Ie.onerror=function(ze){Ce(ze.target.error)},Ie.readAsArrayBuffer(Ne)}):Ne}).then(function(Ne){var $e=y.getTypeOf(Ne);return $e?($e==="arraybuffer"?Ne=y.transformTo("uint8array",Ne):$e==="string"&&(xe?Ne=$.decode(Ne):he&&_e!==!0&&(Ne=function(Ce){return j(Ce,k.uint8array?new Uint8Array(Ce.length):new Array(Ce.length))}(Ne))),Ne):L.Promise.reject(new Error("Can't read the data of '"+le+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,g,y){var k=r("./reader/readerFor"),$=r("./utils"),V=r("./signature"),L=r("./zipEntry"),z=r("./support");function j(ae){this.files=[],this.loadOptions=ae}j.prototype={checkSignature:function(ae){if(!this.reader.readAndCheckSignature(ae)){this.reader.index-=4;var oe=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+$.pretty(oe)+", expected "+$.pretty(ae)+")")}},isSignature:function(ae,oe){var re=this.reader.index;this.reader.setIndex(ae);var ue=this.reader.readString(4)===oe;return this.reader.setIndex(re),ue},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var ae=this.reader.readData(this.zipCommentLength),oe=z.uint8array?"uint8array":"array",re=$.transformTo(oe,ae);this.zipComment=this.loadOptions.decodeFileName(re)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var ae,oe,re,ue=this.zip64EndOfCentralSize-44;0<ue;)ae=this.reader.readInt(2),oe=this.reader.readInt(4),re=this.reader.readData(oe),this.zip64ExtensibleData[ae]={id:ae,length:oe,value:re}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var ae,oe;for(ae=0;ae<this.files.length;ae++)oe=this.files[ae],this.reader.setIndex(oe.localHeaderOffset),this.checkSignature(V.LOCAL_FILE_HEADER),oe.readLocalPart(this.reader),oe.handleUTF8(),oe.processAttributes()},readCentralDir:function(){var ae;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(V.CENTRAL_FILE_HEADER);)(ae=new L({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(ae);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var ae=this.reader.lastIndexOfSignature(V.CENTRAL_DIRECTORY_END);if(ae<0)throw this.isSignature(0,V.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(ae);var oe=ae;if(this.checkSignature(V.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===$.MAX_VALUE_16BITS||this.diskWithCentralDirStart===$.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===$.MAX_VALUE_16BITS||this.centralDirRecords===$.MAX_VALUE_16BITS||this.centralDirSize===$.MAX_VALUE_32BITS||this.centralDirOffset===$.MAX_VALUE_32BITS){if(this.zip64=!0,(ae=this.reader.lastIndexOfSignature(V.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(ae),this.checkSignature(V.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,V.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(V.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(V.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var re=this.centralDirOffset+this.centralDirSize;this.zip64&&(re+=20,re+=12+this.zip64EndOfCentralSize);var ue=oe-re;if(0<ue)this.isSignature(oe,V.CENTRAL_FILE_HEADER)||(this.reader.zero=ue);else if(ue<0)throw new Error("Corrupted zip: missing "+Math.abs(ue)+" bytes.")},prepareReader:function(ae){this.reader=k(ae)},load:function(ae){this.prepareReader(ae),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},g.exports=j},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,g,y){var k=r("./reader/readerFor"),$=r("./utils"),V=r("./compressedObject"),L=r("./crc32"),z=r("./utf8"),j=r("./compressions"),ae=r("./support");function oe(re,ue){this.options=re,this.loadOptions=ue}oe.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(re){var ue,le;if(re.skip(22),this.fileNameLength=re.readInt(2),le=re.readInt(2),this.fileName=re.readData(this.fileNameLength),re.skip(le),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((ue=function(de){for(var he in j)if(Object.prototype.hasOwnProperty.call(j,he)&&j[he].magic===de)return j[he];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+$.pretty(this.compressionMethod)+" unknown (inner file : "+$.transformTo("string",this.fileName)+")");this.decompressed=new V(this.compressedSize,this.uncompressedSize,this.crc32,ue,re.readData(this.compressedSize))},readCentralPart:function(re){this.versionMadeBy=re.readInt(2),re.skip(2),this.bitFlag=re.readInt(2),this.compressionMethod=re.readString(2),this.date=re.readDate(),this.crc32=re.readInt(4),this.compressedSize=re.readInt(4),this.uncompressedSize=re.readInt(4);var ue=re.readInt(2);if(this.extraFieldsLength=re.readInt(2),this.fileCommentLength=re.readInt(2),this.diskNumberStart=re.readInt(2),this.internalFileAttributes=re.readInt(2),this.externalFileAttributes=re.readInt(4),this.localHeaderOffset=re.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");re.skip(ue),this.readExtraFields(re),this.parseZIP64ExtraField(re),this.fileComment=re.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var re=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),re==0&&(this.dosPermissions=63&this.externalFileAttributes),re==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var re=k(this.extraFields[1].value);this.uncompressedSize===$.MAX_VALUE_32BITS&&(this.uncompressedSize=re.readInt(8)),this.compressedSize===$.MAX_VALUE_32BITS&&(this.compressedSize=re.readInt(8)),this.localHeaderOffset===$.MAX_VALUE_32BITS&&(this.localHeaderOffset=re.readInt(8)),this.diskNumberStart===$.MAX_VALUE_32BITS&&(this.diskNumberStart=re.readInt(4))}},readExtraFields:function(re){var ue,le,de,he=re.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});re.index+4<he;)ue=re.readInt(2),le=re.readInt(2),de=re.readData(le),this.extraFields[ue]={id:ue,length:le,value:de};re.setIndex(he)},handleUTF8:function(){var re=ae.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=z.utf8decode(this.fileName),this.fileCommentStr=z.utf8decode(this.fileComment);else{var ue=this.findExtraFieldUnicodePath();if(ue!==null)this.fileNameStr=ue;else{var le=$.transformTo(re,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(le)}var de=this.findExtraFieldUnicodeComment();if(de!==null)this.fileCommentStr=de;else{var he=$.transformTo(re,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(he)}}},findExtraFieldUnicodePath:function(){var re=this.extraFields[28789];if(re){var ue=k(re.value);return ue.readInt(1)!==1||L(this.fileName)!==ue.readInt(4)?null:z.utf8decode(ue.readData(re.length-5))}return null},findExtraFieldUnicodeComment:function(){var re=this.extraFields[25461];if(re){var ue=k(re.value);return ue.readInt(1)!==1||L(this.fileComment)!==ue.readInt(4)?null:z.utf8decode(ue.readData(re.length-5))}return null}},g.exports=oe},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,g,y){function k(ue,le,de){this.name=ue,this.dir=de.dir,this.date=de.date,this.comment=de.comment,this.unixPermissions=de.unixPermissions,this.dosPermissions=de.dosPermissions,this._data=le,this._dataBinary=de.binary,this.options={compression:de.compression,compressionOptions:de.compressionOptions}}var $=r("./stream/StreamHelper"),V=r("./stream/DataWorker"),L=r("./utf8"),z=r("./compressedObject"),j=r("./stream/GenericWorker");k.prototype={internalStream:function(ue){var le=null,de="string";try{if(!ue)throw new Error("No output type specified.");var he=(de=ue.toLowerCase())==="string"||de==="text";de!=="binarystring"&&de!=="text"||(de="string"),le=this._decompressWorker();var _e=!this._dataBinary;_e&&!he&&(le=le.pipe(new L.Utf8EncodeWorker)),!_e&&he&&(le=le.pipe(new L.Utf8DecodeWorker))}catch(xe){(le=new j("error")).error(xe)}return new $(le,de,"")},async:function(ue,le){return this.internalStream(ue).accumulate(le)},nodeStream:function(ue,le){return this.internalStream(ue||"nodebuffer").toNodejsStream(le)},_compressWorker:function(ue,le){if(this._data instanceof z&&this._data.compression.magic===ue.magic)return this._data.getCompressedWorker();var de=this._decompressWorker();return this._dataBinary||(de=de.pipe(new L.Utf8EncodeWorker)),z.createWorkerFrom(de,ue,le)},_decompressWorker:function(){return this._data instanceof z?this._data.getContentWorker():this._data instanceof j?this._data:new V(this._data)}};for(var ae=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],oe=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},re=0;re<ae.length;re++)k.prototype[ae[re]]=oe;g.exports=k},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,g,y){(function(k){var $,V,L=k.MutationObserver||k.WebKitMutationObserver;if(L){var z=0,j=new L(ue),ae=k.document.createTextNode("");j.observe(ae,{characterData:!0}),$=function(){ae.data=z=++z%2}}else if(k.setImmediate||k.MessageChannel===void 0)$="document"in k&&"onreadystatechange"in k.document.createElement("script")?function(){var le=k.document.createElement("script");le.onreadystatechange=function(){ue(),le.onreadystatechange=null,le.parentNode.removeChild(le),le=null},k.document.documentElement.appendChild(le)}:function(){setTimeout(ue,0)};else{var oe=new k.MessageChannel;oe.port1.onmessage=ue,$=function(){oe.port2.postMessage(0)}}var re=[];function ue(){var le,de;V=!0;for(var he=re.length;he;){for(de=re,re=[],le=-1;++le<he;)de[le]();he=re.length}V=!1}g.exports=function(le){re.push(le)!==1||V||$()}}).call(this,typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,g,y){var k=r("immediate");function $(){}var V={},L=["REJECTED"],z=["FULFILLED"],j=["PENDING"];function ae(he){if(typeof he!="function")throw new TypeError("resolver must be a function");this.state=j,this.queue=[],this.outcome=void 0,he!==$&&le(this,he)}function oe(he,_e,xe){this.promise=he,typeof _e=="function"&&(this.onFulfilled=_e,this.callFulfilled=this.otherCallFulfilled),typeof xe=="function"&&(this.onRejected=xe,this.callRejected=this.otherCallRejected)}function re(he,_e,xe){k(function(){var Ne;try{Ne=_e(xe)}catch($e){return V.reject(he,$e)}Ne===he?V.reject(he,new TypeError("Cannot resolve promise with itself")):V.resolve(he,Ne)})}function ue(he){var _e=he&&he.then;if(he&&(typeof he=="object"||typeof he=="function")&&typeof _e=="function")return function(){_e.apply(he,arguments)}}function le(he,_e){var xe=!1;function Ne(Ie){xe||(xe=!0,V.reject(he,Ie))}function $e(Ie){xe||(xe=!0,V.resolve(he,Ie))}var Ce=de(function(){_e($e,Ne)});Ce.status==="error"&&Ne(Ce.value)}function de(he,_e){var xe={};try{xe.value=he(_e),xe.status="success"}catch(Ne){xe.status="error",xe.value=Ne}return xe}(g.exports=ae).prototype.finally=function(he){if(typeof he!="function")return this;var _e=this.constructor;return this.then(function(xe){return _e.resolve(he()).then(function(){return xe})},function(xe){return _e.resolve(he()).then(function(){throw xe})})},ae.prototype.catch=function(he){return this.then(null,he)},ae.prototype.then=function(he,_e){if(typeof he!="function"&&this.state===z||typeof _e!="function"&&this.state===L)return this;var xe=new this.constructor($);return this.state!==j?re(xe,this.state===z?he:_e,this.outcome):this.queue.push(new oe(xe,he,_e)),xe},oe.prototype.callFulfilled=function(he){V.resolve(this.promise,he)},oe.prototype.otherCallFulfilled=function(he){re(this.promise,this.onFulfilled,he)},oe.prototype.callRejected=function(he){V.reject(this.promise,he)},oe.prototype.otherCallRejected=function(he){re(this.promise,this.onRejected,he)},V.resolve=function(he,_e){var xe=de(ue,_e);if(xe.status==="error")return V.reject(he,xe.value);var Ne=xe.value;if(Ne)le(he,Ne);else{he.state=z,he.outcome=_e;for(var $e=-1,Ce=he.queue.length;++$e<Ce;)he.queue[$e].callFulfilled(_e)}return he},V.reject=function(he,_e){he.state=L,he.outcome=_e;for(var xe=-1,Ne=he.queue.length;++xe<Ne;)he.queue[xe].callRejected(_e);return he},ae.resolve=function(he){return he instanceof this?he:V.resolve(new this($),he)},ae.reject=function(he){var _e=new this($);return V.reject(_e,he)},ae.all=function(he){var _e=this;if(Object.prototype.toString.call(he)!=="[object Array]")return this.reject(new TypeError("must be an array"));var xe=he.length,Ne=!1;if(!xe)return this.resolve([]);for(var $e=new Array(xe),Ce=0,Ie=-1,ze=new this($);++Ie<xe;)Ue(he[Ie],Ie);return ze;function Ue(Pt,hn){_e.resolve(Pt).then(function(Dt){$e[hn]=Dt,++Ce!==xe||Ne||(Ne=!0,V.resolve(ze,$e))},function(Dt){Ne||(Ne=!0,V.reject(ze,Dt))})}},ae.race=function(he){var _e=this;if(Object.prototype.toString.call(he)!=="[object Array]")return this.reject(new TypeError("must be an array"));var xe=he.length,Ne=!1;if(!xe)return this.resolve([]);for(var $e=-1,Ce=new this($);++$e<xe;)Ie=he[$e],_e.resolve(Ie).then(function(ze){Ne||(Ne=!0,V.resolve(Ce,ze))},function(ze){Ne||(Ne=!0,V.reject(Ce,ze))});var Ie;return Ce}},{immediate:36}],38:[function(r,g,y){var k={};(0,r("./lib/utils/common").assign)(k,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),g.exports=k},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,g,y){var k=r("./zlib/deflate"),$=r("./utils/common"),V=r("./utils/strings"),L=r("./zlib/messages"),z=r("./zlib/zstream"),j=Object.prototype.toString,ae=0,oe=-1,re=0,ue=8;function le(he){if(!(this instanceof le))return new le(he);this.options=$.assign({level:oe,method:ue,chunkSize:16384,windowBits:15,memLevel:8,strategy:re,to:""},he||{});var _e=this.options;_e.raw&&0<_e.windowBits?_e.windowBits=-_e.windowBits:_e.gzip&&0<_e.windowBits&&_e.windowBits<16&&(_e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new z,this.strm.avail_out=0;var xe=k.deflateInit2(this.strm,_e.level,_e.method,_e.windowBits,_e.memLevel,_e.strategy);if(xe!==ae)throw new Error(L[xe]);if(_e.header&&k.deflateSetHeader(this.strm,_e.header),_e.dictionary){var Ne;if(Ne=typeof _e.dictionary=="string"?V.string2buf(_e.dictionary):j.call(_e.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_e.dictionary):_e.dictionary,(xe=k.deflateSetDictionary(this.strm,Ne))!==ae)throw new Error(L[xe]);this._dict_set=!0}}function de(he,_e){var xe=new le(_e);if(xe.push(he,!0),xe.err)throw xe.msg||L[xe.err];return xe.result}le.prototype.push=function(he,_e){var xe,Ne,$e=this.strm,Ce=this.options.chunkSize;if(this.ended)return!1;Ne=_e===~~_e?_e:_e===!0?4:0,typeof he=="string"?$e.input=V.string2buf(he):j.call(he)==="[object ArrayBuffer]"?$e.input=new Uint8Array(he):$e.input=he,$e.next_in=0,$e.avail_in=$e.input.length;do{if($e.avail_out===0&&($e.output=new $.Buf8(Ce),$e.next_out=0,$e.avail_out=Ce),(xe=k.deflate($e,Ne))!==1&&xe!==ae)return this.onEnd(xe),!(this.ended=!0);$e.avail_out!==0&&($e.avail_in!==0||Ne!==4&&Ne!==2)||(this.options.to==="string"?this.onData(V.buf2binstring($.shrinkBuf($e.output,$e.next_out))):this.onData($.shrinkBuf($e.output,$e.next_out)))}while((0<$e.avail_in||$e.avail_out===0)&&xe!==1);return Ne===4?(xe=k.deflateEnd(this.strm),this.onEnd(xe),this.ended=!0,xe===ae):Ne!==2||(this.onEnd(ae),!($e.avail_out=0))},le.prototype.onData=function(he){this.chunks.push(he)},le.prototype.onEnd=function(he){he===ae&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=$.flattenChunks(this.chunks)),this.chunks=[],this.err=he,this.msg=this.strm.msg},y.Deflate=le,y.deflate=de,y.deflateRaw=function(he,_e){return(_e=_e||{}).raw=!0,de(he,_e)},y.gzip=function(he,_e){return(_e=_e||{}).gzip=!0,de(he,_e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,g,y){var k=r("./zlib/inflate"),$=r("./utils/common"),V=r("./utils/strings"),L=r("./zlib/constants"),z=r("./zlib/messages"),j=r("./zlib/zstream"),ae=r("./zlib/gzheader"),oe=Object.prototype.toString;function re(le){if(!(this instanceof re))return new re(le);this.options=$.assign({chunkSize:16384,windowBits:0,to:""},le||{});var de=this.options;de.raw&&0<=de.windowBits&&de.windowBits<16&&(de.windowBits=-de.windowBits,de.windowBits===0&&(de.windowBits=-15)),!(0<=de.windowBits&&de.windowBits<16)||le&&le.windowBits||(de.windowBits+=32),15<de.windowBits&&de.windowBits<48&&!(15&de.windowBits)&&(de.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new j,this.strm.avail_out=0;var he=k.inflateInit2(this.strm,de.windowBits);if(he!==L.Z_OK)throw new Error(z[he]);this.header=new ae,k.inflateGetHeader(this.strm,this.header)}function ue(le,de){var he=new re(de);if(he.push(le,!0),he.err)throw he.msg||z[he.err];return he.result}re.prototype.push=function(le,de){var he,_e,xe,Ne,$e,Ce,Ie=this.strm,ze=this.options.chunkSize,Ue=this.options.dictionary,Pt=!1;if(this.ended)return!1;_e=de===~~de?de:de===!0?L.Z_FINISH:L.Z_NO_FLUSH,typeof le=="string"?Ie.input=V.binstring2buf(le):oe.call(le)==="[object ArrayBuffer]"?Ie.input=new Uint8Array(le):Ie.input=le,Ie.next_in=0,Ie.avail_in=Ie.input.length;do{if(Ie.avail_out===0&&(Ie.output=new $.Buf8(ze),Ie.next_out=0,Ie.avail_out=ze),(he=k.inflate(Ie,L.Z_NO_FLUSH))===L.Z_NEED_DICT&&Ue&&(Ce=typeof Ue=="string"?V.string2buf(Ue):oe.call(Ue)==="[object ArrayBuffer]"?new Uint8Array(Ue):Ue,he=k.inflateSetDictionary(this.strm,Ce)),he===L.Z_BUF_ERROR&&Pt===!0&&(he=L.Z_OK,Pt=!1),he!==L.Z_STREAM_END&&he!==L.Z_OK)return this.onEnd(he),!(this.ended=!0);Ie.next_out&&(Ie.avail_out!==0&&he!==L.Z_STREAM_END&&(Ie.avail_in!==0||_e!==L.Z_FINISH&&_e!==L.Z_SYNC_FLUSH)||(this.options.to==="string"?(xe=V.utf8border(Ie.output,Ie.next_out),Ne=Ie.next_out-xe,$e=V.buf2string(Ie.output,xe),Ie.next_out=Ne,Ie.avail_out=ze-Ne,Ne&&$.arraySet(Ie.output,Ie.output,xe,Ne,0),this.onData($e)):this.onData($.shrinkBuf(Ie.output,Ie.next_out)))),Ie.avail_in===0&&Ie.avail_out===0&&(Pt=!0)}while((0<Ie.avail_in||Ie.avail_out===0)&&he!==L.Z_STREAM_END);return he===L.Z_STREAM_END&&(_e=L.Z_FINISH),_e===L.Z_FINISH?(he=k.inflateEnd(this.strm),this.onEnd(he),this.ended=!0,he===L.Z_OK):_e!==L.Z_SYNC_FLUSH||(this.onEnd(L.Z_OK),!(Ie.avail_out=0))},re.prototype.onData=function(le){this.chunks.push(le)},re.prototype.onEnd=function(le){le===L.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=$.flattenChunks(this.chunks)),this.chunks=[],this.err=le,this.msg=this.strm.msg},y.Inflate=re,y.inflate=ue,y.inflateRaw=function(le,de){return(de=de||{}).raw=!0,ue(le,de)},y.ungzip=ue},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,g,y){var k=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";y.assign=function(L){for(var z=Array.prototype.slice.call(arguments,1);z.length;){var j=z.shift();if(j){if(typeof j!="object")throw new TypeError(j+"must be non-object");for(var ae in j)j.hasOwnProperty(ae)&&(L[ae]=j[ae])}}return L},y.shrinkBuf=function(L,z){return L.length===z?L:L.subarray?L.subarray(0,z):(L.length=z,L)};var $={arraySet:function(L,z,j,ae,oe){if(z.subarray&&L.subarray)L.set(z.subarray(j,j+ae),oe);else for(var re=0;re<ae;re++)L[oe+re]=z[j+re]},flattenChunks:function(L){var z,j,ae,oe,re,ue;for(z=ae=0,j=L.length;z<j;z++)ae+=L[z].length;for(ue=new Uint8Array(ae),z=oe=0,j=L.length;z<j;z++)re=L[z],ue.set(re,oe),oe+=re.length;return ue}},V={arraySet:function(L,z,j,ae,oe){for(var re=0;re<ae;re++)L[oe+re]=z[j+re]},flattenChunks:function(L){return[].concat.apply([],L)}};y.setTyped=function(L){L?(y.Buf8=Uint8Array,y.Buf16=Uint16Array,y.Buf32=Int32Array,y.assign(y,$)):(y.Buf8=Array,y.Buf16=Array,y.Buf32=Array,y.assign(y,V))},y.setTyped(k)},{}],42:[function(r,g,y){var k=r("./common"),$=!0,V=!0;try{String.fromCharCode.apply(null,[0])}catch{$=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{V=!1}for(var L=new k.Buf8(256),z=0;z<256;z++)L[z]=252<=z?6:248<=z?5:240<=z?4:224<=z?3:192<=z?2:1;function j(ae,oe){if(oe<65537&&(ae.subarray&&V||!ae.subarray&&$))return String.fromCharCode.apply(null,k.shrinkBuf(ae,oe));for(var re="",ue=0;ue<oe;ue++)re+=String.fromCharCode(ae[ue]);return re}L[254]=L[254]=1,y.string2buf=function(ae){var oe,re,ue,le,de,he=ae.length,_e=0;for(le=0;le<he;le++)(64512&(re=ae.charCodeAt(le)))==55296&&le+1<he&&(64512&(ue=ae.charCodeAt(le+1)))==56320&&(re=65536+(re-55296<<10)+(ue-56320),le++),_e+=re<128?1:re<2048?2:re<65536?3:4;for(oe=new k.Buf8(_e),le=de=0;de<_e;le++)(64512&(re=ae.charCodeAt(le)))==55296&&le+1<he&&(64512&(ue=ae.charCodeAt(le+1)))==56320&&(re=65536+(re-55296<<10)+(ue-56320),le++),re<128?oe[de++]=re:(re<2048?oe[de++]=192|re>>>6:(re<65536?oe[de++]=224|re>>>12:(oe[de++]=240|re>>>18,oe[de++]=128|re>>>12&63),oe[de++]=128|re>>>6&63),oe[de++]=128|63&re);return oe},y.buf2binstring=function(ae){return j(ae,ae.length)},y.binstring2buf=function(ae){for(var oe=new k.Buf8(ae.length),re=0,ue=oe.length;re<ue;re++)oe[re]=ae.charCodeAt(re);return oe},y.buf2string=function(ae,oe){var re,ue,le,de,he=oe||ae.length,_e=new Array(2*he);for(re=ue=0;re<he;)if((le=ae[re++])<128)_e[ue++]=le;else if(4<(de=L[le]))_e[ue++]=65533,re+=de-1;else{for(le&=de===2?31:de===3?15:7;1<de&&re<he;)le=le<<6|63&ae[re++],de--;1<de?_e[ue++]=65533:le<65536?_e[ue++]=le:(le-=65536,_e[ue++]=55296|le>>10&1023,_e[ue++]=56320|1023&le)}return j(_e,ue)},y.utf8border=function(ae,oe){var re;for((oe=oe||ae.length)>ae.length&&(oe=ae.length),re=oe-1;0<=re&&(192&ae[re])==128;)re--;return re<0||re===0?oe:re+L[ae[re]]>oe?re:oe}},{"./common":41}],43:[function(r,g,y){g.exports=function(k,$,V,L){for(var z=65535&k|0,j=k>>>16&65535|0,ae=0;V!==0;){for(V-=ae=2e3<V?2e3:V;j=j+(z=z+$[L++]|0)|0,--ae;);z%=65521,j%=65521}return z|j<<16|0}},{}],44:[function(r,g,y){g.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,g,y){var k=function(){for(var $,V=[],L=0;L<256;L++){$=L;for(var z=0;z<8;z++)$=1&$?3988292384^$>>>1:$>>>1;V[L]=$}return V}();g.exports=function($,V,L,z){var j=k,ae=z+L;$^=-1;for(var oe=z;oe<ae;oe++)$=$>>>8^j[255&($^V[oe])];return-1^$}},{}],46:[function(r,g,y){var k,$=r("../utils/common"),V=r("./trees"),L=r("./adler32"),z=r("./crc32"),j=r("./messages"),ae=0,oe=4,re=0,ue=-2,le=-1,de=4,he=2,_e=8,xe=9,Ne=286,$e=30,Ce=19,Ie=2*Ne+1,ze=15,Ue=3,Pt=258,hn=Pt+Ue+1,Dt=42,xn=113,jt=1,Vn=2,Rn=3,Tn=4;function Ln(bn,Xn){return bn.msg=j[Xn],Xn}function Sn(bn){return(bn<<1)-(4<bn?9:0)}function An(bn){for(var Xn=bn.length;0<=--Xn;)bn[Xn]=0}function In(bn){var Xn=bn.state,$n=Xn.pending;$n>bn.avail_out&&($n=bn.avail_out),$n!==0&&($.arraySet(bn.output,Xn.pending_buf,Xn.pending_out,$n,bn.next_out),bn.next_out+=$n,Xn.pending_out+=$n,bn.total_out+=$n,bn.avail_out-=$n,Xn.pending-=$n,Xn.pending===0&&(Xn.pending_out=0))}function Mn(bn,Xn){V._tr_flush_block(bn,0<=bn.block_start?bn.block_start:-1,bn.strstart-bn.block_start,Xn),bn.block_start=bn.strstart,In(bn.strm)}function ra(bn,Xn){bn.pending_buf[bn.pending++]=Xn}function da(bn,Xn){bn.pending_buf[bn.pending++]=Xn>>>8&255,bn.pending_buf[bn.pending++]=255&Xn}function ua(bn,Xn){var $n,kt,At=bn.max_chain_length,Dn=bn.strstart,Qn=bn.prev_length,oa=bn.nice_match,na=bn.strstart>bn.w_size-hn?bn.strstart-(bn.w_size-hn):0,la=bn.window,ma=bn.w_mask,ca=bn.prev,pe=bn.strstart+Pt,Oe=la[Dn+Qn-1],Ve=la[Dn+Qn];bn.prev_length>=bn.good_match&&(At>>=2),oa>bn.lookahead&&(oa=bn.lookahead);do if(la[($n=Xn)+Qn]===Ve&&la[$n+Qn-1]===Oe&&la[$n]===la[Dn]&&la[++$n]===la[Dn+1]){Dn+=2,$n++;do;while(la[++Dn]===la[++$n]&&la[++Dn]===la[++$n]&&la[++Dn]===la[++$n]&&la[++Dn]===la[++$n]&&la[++Dn]===la[++$n]&&la[++Dn]===la[++$n]&&la[++Dn]===la[++$n]&&la[++Dn]===la[++$n]&&Dn<pe);if(kt=Pt-(pe-Dn),Dn=pe-Pt,Qn<kt){if(bn.match_start=Xn,oa<=(Qn=kt))break;Oe=la[Dn+Qn-1],Ve=la[Dn+Qn]}}while((Xn=ca[Xn&ma])>na&&--At!=0);return Qn<=bn.lookahead?Qn:bn.lookahead}function aa(bn){var Xn,$n,kt,At,Dn,Qn,oa,na,la,ma,ca=bn.w_size;do{if(At=bn.window_size-bn.lookahead-bn.strstart,bn.strstart>=ca+(ca-hn)){for($.arraySet(bn.window,bn.window,ca,ca,0),bn.match_start-=ca,bn.strstart-=ca,bn.block_start-=ca,Xn=$n=bn.hash_size;kt=bn.head[--Xn],bn.head[Xn]=ca<=kt?kt-ca:0,--$n;);for(Xn=$n=ca;kt=bn.prev[--Xn],bn.prev[Xn]=ca<=kt?kt-ca:0,--$n;);At+=ca}if(bn.strm.avail_in===0)break;if(Qn=bn.strm,oa=bn.window,na=bn.strstart+bn.lookahead,la=At,ma=void 0,ma=Qn.avail_in,la<ma&&(ma=la),$n=ma===0?0:(Qn.avail_in-=ma,$.arraySet(oa,Qn.input,Qn.next_in,ma,na),Qn.state.wrap===1?Qn.adler=L(Qn.adler,oa,ma,na):Qn.state.wrap===2&&(Qn.adler=z(Qn.adler,oa,ma,na)),Qn.next_in+=ma,Qn.total_in+=ma,ma),bn.lookahead+=$n,bn.lookahead+bn.insert>=Ue)for(Dn=bn.strstart-bn.insert,bn.ins_h=bn.window[Dn],bn.ins_h=(bn.ins_h<<bn.hash_shift^bn.window[Dn+1])&bn.hash_mask;bn.insert&&(bn.ins_h=(bn.ins_h<<bn.hash_shift^bn.window[Dn+Ue-1])&bn.hash_mask,bn.prev[Dn&bn.w_mask]=bn.head[bn.ins_h],bn.head[bn.ins_h]=Dn,Dn++,bn.insert--,!(bn.lookahead+bn.insert<Ue)););}while(bn.lookahead<hn&&bn.strm.avail_in!==0)}function Nn(bn,Xn){for(var $n,kt;;){if(bn.lookahead<hn){if(aa(bn),bn.lookahead<hn&&Xn===ae)return jt;if(bn.lookahead===0)break}if($n=0,bn.lookahead>=Ue&&(bn.ins_h=(bn.ins_h<<bn.hash_shift^bn.window[bn.strstart+Ue-1])&bn.hash_mask,$n=bn.prev[bn.strstart&bn.w_mask]=bn.head[bn.ins_h],bn.head[bn.ins_h]=bn.strstart),$n!==0&&bn.strstart-$n<=bn.w_size-hn&&(bn.match_length=ua(bn,$n)),bn.match_length>=Ue)if(kt=V._tr_tally(bn,bn.strstart-bn.match_start,bn.match_length-Ue),bn.lookahead-=bn.match_length,bn.match_length<=bn.max_lazy_match&&bn.lookahead>=Ue){for(bn.match_length--;bn.strstart++,bn.ins_h=(bn.ins_h<<bn.hash_shift^bn.window[bn.strstart+Ue-1])&bn.hash_mask,$n=bn.prev[bn.strstart&bn.w_mask]=bn.head[bn.ins_h],bn.head[bn.ins_h]=bn.strstart,--bn.match_length!=0;);bn.strstart++}else bn.strstart+=bn.match_length,bn.match_length=0,bn.ins_h=bn.window[bn.strstart],bn.ins_h=(bn.ins_h<<bn.hash_shift^bn.window[bn.strstart+1])&bn.hash_mask;else kt=V._tr_tally(bn,0,bn.window[bn.strstart]),bn.lookahead--,bn.strstart++;if(kt&&(Mn(bn,!1),bn.strm.avail_out===0))return jt}return bn.insert=bn.strstart<Ue-1?bn.strstart:Ue-1,Xn===oe?(Mn(bn,!0),bn.strm.avail_out===0?Rn:Tn):bn.last_lit&&(Mn(bn,!1),bn.strm.avail_out===0)?jt:Vn}function En(bn,Xn){for(var $n,kt,At;;){if(bn.lookahead<hn){if(aa(bn),bn.lookahead<hn&&Xn===ae)return jt;if(bn.lookahead===0)break}if($n=0,bn.lookahead>=Ue&&(bn.ins_h=(bn.ins_h<<bn.hash_shift^bn.window[bn.strstart+Ue-1])&bn.hash_mask,$n=bn.prev[bn.strstart&bn.w_mask]=bn.head[bn.ins_h],bn.head[bn.ins_h]=bn.strstart),bn.prev_length=bn.match_length,bn.prev_match=bn.match_start,bn.match_length=Ue-1,$n!==0&&bn.prev_length<bn.max_lazy_match&&bn.strstart-$n<=bn.w_size-hn&&(bn.match_length=ua(bn,$n),bn.match_length<=5&&(bn.strategy===1||bn.match_length===Ue&&4096<bn.strstart-bn.match_start)&&(bn.match_length=Ue-1)),bn.prev_length>=Ue&&bn.match_length<=bn.prev_length){for(At=bn.strstart+bn.lookahead-Ue,kt=V._tr_tally(bn,bn.strstart-1-bn.prev_match,bn.prev_length-Ue),bn.lookahead-=bn.prev_length-1,bn.prev_length-=2;++bn.strstart<=At&&(bn.ins_h=(bn.ins_h<<bn.hash_shift^bn.window[bn.strstart+Ue-1])&bn.hash_mask,$n=bn.prev[bn.strstart&bn.w_mask]=bn.head[bn.ins_h],bn.head[bn.ins_h]=bn.strstart),--bn.prev_length!=0;);if(bn.match_available=0,bn.match_length=Ue-1,bn.strstart++,kt&&(Mn(bn,!1),bn.strm.avail_out===0))return jt}else if(bn.match_available){if((kt=V._tr_tally(bn,0,bn.window[bn.strstart-1]))&&Mn(bn,!1),bn.strstart++,bn.lookahead--,bn.strm.avail_out===0)return jt}else bn.match_available=1,bn.strstart++,bn.lookahead--}return bn.match_available&&(kt=V._tr_tally(bn,0,bn.window[bn.strstart-1]),bn.match_available=0),bn.insert=bn.strstart<Ue-1?bn.strstart:Ue-1,Xn===oe?(Mn(bn,!0),bn.strm.avail_out===0?Rn:Tn):bn.last_lit&&(Mn(bn,!1),bn.strm.avail_out===0)?jt:Vn}function Zn(bn,Xn,$n,kt,At){this.good_length=bn,this.max_lazy=Xn,this.nice_length=$n,this.max_chain=kt,this.func=At}function ha(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_e,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new $.Buf16(2*Ie),this.dyn_dtree=new $.Buf16(2*(2*$e+1)),this.bl_tree=new $.Buf16(2*(2*Ce+1)),An(this.dyn_ltree),An(this.dyn_dtree),An(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new $.Buf16(ze+1),this.heap=new $.Buf16(2*Ne+1),An(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new $.Buf16(2*Ne+1),An(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function xa(bn){var Xn;return bn&&bn.state?(bn.total_in=bn.total_out=0,bn.data_type=he,(Xn=bn.state).pending=0,Xn.pending_out=0,Xn.wrap<0&&(Xn.wrap=-Xn.wrap),Xn.status=Xn.wrap?Dt:xn,bn.adler=Xn.wrap===2?0:1,Xn.last_flush=ae,V._tr_init(Xn),re):Ln(bn,ue)}function sa(bn){var Xn=xa(bn);return Xn===re&&function($n){$n.window_size=2*$n.w_size,An($n.head),$n.max_lazy_match=k[$n.level].max_lazy,$n.good_match=k[$n.level].good_length,$n.nice_match=k[$n.level].nice_length,$n.max_chain_length=k[$n.level].max_chain,$n.strstart=0,$n.block_start=0,$n.lookahead=0,$n.insert=0,$n.match_length=$n.prev_length=Ue-1,$n.match_available=0,$n.ins_h=0}(bn.state),Xn}function Hn(bn,Xn,$n,kt,At,Dn){if(!bn)return ue;var Qn=1;if(Xn===le&&(Xn=6),kt<0?(Qn=0,kt=-kt):15<kt&&(Qn=2,kt-=16),At<1||xe<At||$n!==_e||kt<8||15<kt||Xn<0||9<Xn||Dn<0||de<Dn)return Ln(bn,ue);kt===8&&(kt=9);var oa=new ha;return(bn.state=oa).strm=bn,oa.wrap=Qn,oa.gzhead=null,oa.w_bits=kt,oa.w_size=1<<oa.w_bits,oa.w_mask=oa.w_size-1,oa.hash_bits=At+7,oa.hash_size=1<<oa.hash_bits,oa.hash_mask=oa.hash_size-1,oa.hash_shift=~~((oa.hash_bits+Ue-1)/Ue),oa.window=new $.Buf8(2*oa.w_size),oa.head=new $.Buf16(oa.hash_size),oa.prev=new $.Buf16(oa.w_size),oa.lit_bufsize=1<<At+6,oa.pending_buf_size=4*oa.lit_bufsize,oa.pending_buf=new $.Buf8(oa.pending_buf_size),oa.d_buf=1*oa.lit_bufsize,oa.l_buf=3*oa.lit_bufsize,oa.level=Xn,oa.strategy=Dn,oa.method=$n,sa(bn)}k=[new Zn(0,0,0,0,function(bn,Xn){var $n=65535;for($n>bn.pending_buf_size-5&&($n=bn.pending_buf_size-5);;){if(bn.lookahead<=1){if(aa(bn),bn.lookahead===0&&Xn===ae)return jt;if(bn.lookahead===0)break}bn.strstart+=bn.lookahead,bn.lookahead=0;var kt=bn.block_start+$n;if((bn.strstart===0||bn.strstart>=kt)&&(bn.lookahead=bn.strstart-kt,bn.strstart=kt,Mn(bn,!1),bn.strm.avail_out===0)||bn.strstart-bn.block_start>=bn.w_size-hn&&(Mn(bn,!1),bn.strm.avail_out===0))return jt}return bn.insert=0,Xn===oe?(Mn(bn,!0),bn.strm.avail_out===0?Rn:Tn):(bn.strstart>bn.block_start&&(Mn(bn,!1),bn.strm.avail_out),jt)}),new Zn(4,4,8,4,Nn),new Zn(4,5,16,8,Nn),new Zn(4,6,32,32,Nn),new Zn(4,4,16,16,En),new Zn(8,16,32,32,En),new Zn(8,16,128,128,En),new Zn(8,32,128,256,En),new Zn(32,128,258,1024,En),new Zn(32,258,258,4096,En)],y.deflateInit=function(bn,Xn){return Hn(bn,Xn,_e,15,8,0)},y.deflateInit2=Hn,y.deflateReset=sa,y.deflateResetKeep=xa,y.deflateSetHeader=function(bn,Xn){return bn&&bn.state?bn.state.wrap!==2?ue:(bn.state.gzhead=Xn,re):ue},y.deflate=function(bn,Xn){var $n,kt,At,Dn;if(!bn||!bn.state||5<Xn||Xn<0)return bn?Ln(bn,ue):ue;if(kt=bn.state,!bn.output||!bn.input&&bn.avail_in!==0||kt.status===666&&Xn!==oe)return Ln(bn,bn.avail_out===0?-5:ue);if(kt.strm=bn,$n=kt.last_flush,kt.last_flush=Xn,kt.status===Dt)if(kt.wrap===2)bn.adler=0,ra(kt,31),ra(kt,139),ra(kt,8),kt.gzhead?(ra(kt,(kt.gzhead.text?1:0)+(kt.gzhead.hcrc?2:0)+(kt.gzhead.extra?4:0)+(kt.gzhead.name?8:0)+(kt.gzhead.comment?16:0)),ra(kt,255&kt.gzhead.time),ra(kt,kt.gzhead.time>>8&255),ra(kt,kt.gzhead.time>>16&255),ra(kt,kt.gzhead.time>>24&255),ra(kt,kt.level===9?2:2<=kt.strategy||kt.level<2?4:0),ra(kt,255&kt.gzhead.os),kt.gzhead.extra&&kt.gzhead.extra.length&&(ra(kt,255&kt.gzhead.extra.length),ra(kt,kt.gzhead.extra.length>>8&255)),kt.gzhead.hcrc&&(bn.adler=z(bn.adler,kt.pending_buf,kt.pending,0)),kt.gzindex=0,kt.status=69):(ra(kt,0),ra(kt,0),ra(kt,0),ra(kt,0),ra(kt,0),ra(kt,kt.level===9?2:2<=kt.strategy||kt.level<2?4:0),ra(kt,3),kt.status=xn);else{var Qn=_e+(kt.w_bits-8<<4)<<8;Qn|=(2<=kt.strategy||kt.level<2?0:kt.level<6?1:kt.level===6?2:3)<<6,kt.strstart!==0&&(Qn|=32),Qn+=31-Qn%31,kt.status=xn,da(kt,Qn),kt.strstart!==0&&(da(kt,bn.adler>>>16),da(kt,65535&bn.adler)),bn.adler=1}if(kt.status===69)if(kt.gzhead.extra){for(At=kt.pending;kt.gzindex<(65535&kt.gzhead.extra.length)&&(kt.pending!==kt.pending_buf_size||(kt.gzhead.hcrc&&kt.pending>At&&(bn.adler=z(bn.adler,kt.pending_buf,kt.pending-At,At)),In(bn),At=kt.pending,kt.pending!==kt.pending_buf_size));)ra(kt,255&kt.gzhead.extra[kt.gzindex]),kt.gzindex++;kt.gzhead.hcrc&&kt.pending>At&&(bn.adler=z(bn.adler,kt.pending_buf,kt.pending-At,At)),kt.gzindex===kt.gzhead.extra.length&&(kt.gzindex=0,kt.status=73)}else kt.status=73;if(kt.status===73)if(kt.gzhead.name){At=kt.pending;do{if(kt.pending===kt.pending_buf_size&&(kt.gzhead.hcrc&&kt.pending>At&&(bn.adler=z(bn.adler,kt.pending_buf,kt.pending-At,At)),In(bn),At=kt.pending,kt.pending===kt.pending_buf_size)){Dn=1;break}Dn=kt.gzindex<kt.gzhead.name.length?255&kt.gzhead.name.charCodeAt(kt.gzindex++):0,ra(kt,Dn)}while(Dn!==0);kt.gzhead.hcrc&&kt.pending>At&&(bn.adler=z(bn.adler,kt.pending_buf,kt.pending-At,At)),Dn===0&&(kt.gzindex=0,kt.status=91)}else kt.status=91;if(kt.status===91)if(kt.gzhead.comment){At=kt.pending;do{if(kt.pending===kt.pending_buf_size&&(kt.gzhead.hcrc&&kt.pending>At&&(bn.adler=z(bn.adler,kt.pending_buf,kt.pending-At,At)),In(bn),At=kt.pending,kt.pending===kt.pending_buf_size)){Dn=1;break}Dn=kt.gzindex<kt.gzhead.comment.length?255&kt.gzhead.comment.charCodeAt(kt.gzindex++):0,ra(kt,Dn)}while(Dn!==0);kt.gzhead.hcrc&&kt.pending>At&&(bn.adler=z(bn.adler,kt.pending_buf,kt.pending-At,At)),Dn===0&&(kt.status=103)}else kt.status=103;if(kt.status===103&&(kt.gzhead.hcrc?(kt.pending+2>kt.pending_buf_size&&In(bn),kt.pending+2<=kt.pending_buf_size&&(ra(kt,255&bn.adler),ra(kt,bn.adler>>8&255),bn.adler=0,kt.status=xn)):kt.status=xn),kt.pending!==0){if(In(bn),bn.avail_out===0)return kt.last_flush=-1,re}else if(bn.avail_in===0&&Sn(Xn)<=Sn($n)&&Xn!==oe)return Ln(bn,-5);if(kt.status===666&&bn.avail_in!==0)return Ln(bn,-5);if(bn.avail_in!==0||kt.lookahead!==0||Xn!==ae&&kt.status!==666){var oa=kt.strategy===2?function(na,la){for(var ma;;){if(na.lookahead===0&&(aa(na),na.lookahead===0)){if(la===ae)return jt;break}if(na.match_length=0,ma=V._tr_tally(na,0,na.window[na.strstart]),na.lookahead--,na.strstart++,ma&&(Mn(na,!1),na.strm.avail_out===0))return jt}return na.insert=0,la===oe?(Mn(na,!0),na.strm.avail_out===0?Rn:Tn):na.last_lit&&(Mn(na,!1),na.strm.avail_out===0)?jt:Vn}(kt,Xn):kt.strategy===3?function(na,la){for(var ma,ca,pe,Oe,Ve=na.window;;){if(na.lookahead<=Pt){if(aa(na),na.lookahead<=Pt&&la===ae)return jt;if(na.lookahead===0)break}if(na.match_length=0,na.lookahead>=Ue&&0<na.strstart&&(ca=Ve[pe=na.strstart-1])===Ve[++pe]&&ca===Ve[++pe]&&ca===Ve[++pe]){Oe=na.strstart+Pt;do;while(ca===Ve[++pe]&&ca===Ve[++pe]&&ca===Ve[++pe]&&ca===Ve[++pe]&&ca===Ve[++pe]&&ca===Ve[++pe]&&ca===Ve[++pe]&&ca===Ve[++pe]&&pe<Oe);na.match_length=Pt-(Oe-pe),na.match_length>na.lookahead&&(na.match_length=na.lookahead)}if(na.match_length>=Ue?(ma=V._tr_tally(na,1,na.match_length-Ue),na.lookahead-=na.match_length,na.strstart+=na.match_length,na.match_length=0):(ma=V._tr_tally(na,0,na.window[na.strstart]),na.lookahead--,na.strstart++),ma&&(Mn(na,!1),na.strm.avail_out===0))return jt}return na.insert=0,la===oe?(Mn(na,!0),na.strm.avail_out===0?Rn:Tn):na.last_lit&&(Mn(na,!1),na.strm.avail_out===0)?jt:Vn}(kt,Xn):k[kt.level].func(kt,Xn);if(oa!==Rn&&oa!==Tn||(kt.status=666),oa===jt||oa===Rn)return bn.avail_out===0&&(kt.last_flush=-1),re;if(oa===Vn&&(Xn===1?V._tr_align(kt):Xn!==5&&(V._tr_stored_block(kt,0,0,!1),Xn===3&&(An(kt.head),kt.lookahead===0&&(kt.strstart=0,kt.block_start=0,kt.insert=0))),In(bn),bn.avail_out===0))return kt.last_flush=-1,re}return Xn!==oe?re:kt.wrap<=0?1:(kt.wrap===2?(ra(kt,255&bn.adler),ra(kt,bn.adler>>8&255),ra(kt,bn.adler>>16&255),ra(kt,bn.adler>>24&255),ra(kt,255&bn.total_in),ra(kt,bn.total_in>>8&255),ra(kt,bn.total_in>>16&255),ra(kt,bn.total_in>>24&255)):(da(kt,bn.adler>>>16),da(kt,65535&bn.adler)),In(bn),0<kt.wrap&&(kt.wrap=-kt.wrap),kt.pending!==0?re:1)},y.deflateEnd=function(bn){var Xn;return bn&&bn.state?(Xn=bn.state.status)!==Dt&&Xn!==69&&Xn!==73&&Xn!==91&&Xn!==103&&Xn!==xn&&Xn!==666?Ln(bn,ue):(bn.state=null,Xn===xn?Ln(bn,-3):re):ue},y.deflateSetDictionary=function(bn,Xn){var $n,kt,At,Dn,Qn,oa,na,la,ma=Xn.length;if(!bn||!bn.state||(Dn=($n=bn.state).wrap)===2||Dn===1&&$n.status!==Dt||$n.lookahead)return ue;for(Dn===1&&(bn.adler=L(bn.adler,Xn,ma,0)),$n.wrap=0,ma>=$n.w_size&&(Dn===0&&(An($n.head),$n.strstart=0,$n.block_start=0,$n.insert=0),la=new $.Buf8($n.w_size),$.arraySet(la,Xn,ma-$n.w_size,$n.w_size,0),Xn=la,ma=$n.w_size),Qn=bn.avail_in,oa=bn.next_in,na=bn.input,bn.avail_in=ma,bn.next_in=0,bn.input=Xn,aa($n);$n.lookahead>=Ue;){for(kt=$n.strstart,At=$n.lookahead-(Ue-1);$n.ins_h=($n.ins_h<<$n.hash_shift^$n.window[kt+Ue-1])&$n.hash_mask,$n.prev[kt&$n.w_mask]=$n.head[$n.ins_h],$n.head[$n.ins_h]=kt,kt++,--At;);$n.strstart=kt,$n.lookahead=Ue-1,aa($n)}return $n.strstart+=$n.lookahead,$n.block_start=$n.strstart,$n.insert=$n.lookahead,$n.lookahead=0,$n.match_length=$n.prev_length=Ue-1,$n.match_available=0,bn.next_in=oa,bn.input=na,bn.avail_in=Qn,$n.wrap=Dn,re},y.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,g,y){g.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,g,y){g.exports=function(k,$){var V,L,z,j,ae,oe,re,ue,le,de,he,_e,xe,Ne,$e,Ce,Ie,ze,Ue,Pt,hn,Dt,xn,jt,Vn;V=k.state,L=k.next_in,jt=k.input,z=L+(k.avail_in-5),j=k.next_out,Vn=k.output,ae=j-($-k.avail_out),oe=j+(k.avail_out-257),re=V.dmax,ue=V.wsize,le=V.whave,de=V.wnext,he=V.window,_e=V.hold,xe=V.bits,Ne=V.lencode,$e=V.distcode,Ce=(1<<V.lenbits)-1,Ie=(1<<V.distbits)-1;e:do{xe<15&&(_e+=jt[L++]<<xe,xe+=8,_e+=jt[L++]<<xe,xe+=8),ze=Ne[_e&Ce];t:for(;;){if(_e>>>=Ue=ze>>>24,xe-=Ue,(Ue=ze>>>16&255)===0)Vn[j++]=65535&ze;else{if(!(16&Ue)){if(!(64&Ue)){ze=Ne[(65535&ze)+(_e&(1<<Ue)-1)];continue t}if(32&Ue){V.mode=12;break e}k.msg="invalid literal/length code",V.mode=30;break e}Pt=65535&ze,(Ue&=15)&&(xe<Ue&&(_e+=jt[L++]<<xe,xe+=8),Pt+=_e&(1<<Ue)-1,_e>>>=Ue,xe-=Ue),xe<15&&(_e+=jt[L++]<<xe,xe+=8,_e+=jt[L++]<<xe,xe+=8),ze=$e[_e&Ie];n:for(;;){if(_e>>>=Ue=ze>>>24,xe-=Ue,!(16&(Ue=ze>>>16&255))){if(!(64&Ue)){ze=$e[(65535&ze)+(_e&(1<<Ue)-1)];continue n}k.msg="invalid distance code",V.mode=30;break e}if(hn=65535&ze,xe<(Ue&=15)&&(_e+=jt[L++]<<xe,(xe+=8)<Ue&&(_e+=jt[L++]<<xe,xe+=8)),re<(hn+=_e&(1<<Ue)-1)){k.msg="invalid distance too far back",V.mode=30;break e}if(_e>>>=Ue,xe-=Ue,(Ue=j-ae)<hn){if(le<(Ue=hn-Ue)&&V.sane){k.msg="invalid distance too far back",V.mode=30;break e}if(xn=he,(Dt=0)===de){if(Dt+=ue-Ue,Ue<Pt){for(Pt-=Ue;Vn[j++]=he[Dt++],--Ue;);Dt=j-hn,xn=Vn}}else if(de<Ue){if(Dt+=ue+de-Ue,(Ue-=de)<Pt){for(Pt-=Ue;Vn[j++]=he[Dt++],--Ue;);if(Dt=0,de<Pt){for(Pt-=Ue=de;Vn[j++]=he[Dt++],--Ue;);Dt=j-hn,xn=Vn}}}else if(Dt+=de-Ue,Ue<Pt){for(Pt-=Ue;Vn[j++]=he[Dt++],--Ue;);Dt=j-hn,xn=Vn}for(;2<Pt;)Vn[j++]=xn[Dt++],Vn[j++]=xn[Dt++],Vn[j++]=xn[Dt++],Pt-=3;Pt&&(Vn[j++]=xn[Dt++],1<Pt&&(Vn[j++]=xn[Dt++]))}else{for(Dt=j-hn;Vn[j++]=Vn[Dt++],Vn[j++]=Vn[Dt++],Vn[j++]=Vn[Dt++],2<(Pt-=3););Pt&&(Vn[j++]=Vn[Dt++],1<Pt&&(Vn[j++]=Vn[Dt++]))}break}}break}}while(L<z&&j<oe);L-=Pt=xe>>3,_e&=(1<<(xe-=Pt<<3))-1,k.next_in=L,k.next_out=j,k.avail_in=L<z?z-L+5:5-(L-z),k.avail_out=j<oe?oe-j+257:257-(j-oe),V.hold=_e,V.bits=xe}},{}],49:[function(r,g,y){var k=r("../utils/common"),$=r("./adler32"),V=r("./crc32"),L=r("./inffast"),z=r("./inftrees"),j=1,ae=2,oe=0,re=-2,ue=1,le=852,de=592;function he(Dt){return(Dt>>>24&255)+(Dt>>>8&65280)+((65280&Dt)<<8)+((255&Dt)<<24)}function _e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new k.Buf16(320),this.work=new k.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function xe(Dt){var xn;return Dt&&Dt.state?(xn=Dt.state,Dt.total_in=Dt.total_out=xn.total=0,Dt.msg="",xn.wrap&&(Dt.adler=1&xn.wrap),xn.mode=ue,xn.last=0,xn.havedict=0,xn.dmax=32768,xn.head=null,xn.hold=0,xn.bits=0,xn.lencode=xn.lendyn=new k.Buf32(le),xn.distcode=xn.distdyn=new k.Buf32(de),xn.sane=1,xn.back=-1,oe):re}function Ne(Dt){var xn;return Dt&&Dt.state?((xn=Dt.state).wsize=0,xn.whave=0,xn.wnext=0,xe(Dt)):re}function $e(Dt,xn){var jt,Vn;return Dt&&Dt.state?(Vn=Dt.state,xn<0?(jt=0,xn=-xn):(jt=1+(xn>>4),xn<48&&(xn&=15)),xn&&(xn<8||15<xn)?re:(Vn.window!==null&&Vn.wbits!==xn&&(Vn.window=null),Vn.wrap=jt,Vn.wbits=xn,Ne(Dt))):re}function Ce(Dt,xn){var jt,Vn;return Dt?(Vn=new _e,(Dt.state=Vn).window=null,(jt=$e(Dt,xn))!==oe&&(Dt.state=null),jt):re}var Ie,ze,Ue=!0;function Pt(Dt){if(Ue){var xn;for(Ie=new k.Buf32(512),ze=new k.Buf32(32),xn=0;xn<144;)Dt.lens[xn++]=8;for(;xn<256;)Dt.lens[xn++]=9;for(;xn<280;)Dt.lens[xn++]=7;for(;xn<288;)Dt.lens[xn++]=8;for(z(j,Dt.lens,0,288,Ie,0,Dt.work,{bits:9}),xn=0;xn<32;)Dt.lens[xn++]=5;z(ae,Dt.lens,0,32,ze,0,Dt.work,{bits:5}),Ue=!1}Dt.lencode=Ie,Dt.lenbits=9,Dt.distcode=ze,Dt.distbits=5}function hn(Dt,xn,jt,Vn){var Rn,Tn=Dt.state;return Tn.window===null&&(Tn.wsize=1<<Tn.wbits,Tn.wnext=0,Tn.whave=0,Tn.window=new k.Buf8(Tn.wsize)),Vn>=Tn.wsize?(k.arraySet(Tn.window,xn,jt-Tn.wsize,Tn.wsize,0),Tn.wnext=0,Tn.whave=Tn.wsize):(Vn<(Rn=Tn.wsize-Tn.wnext)&&(Rn=Vn),k.arraySet(Tn.window,xn,jt-Vn,Rn,Tn.wnext),(Vn-=Rn)?(k.arraySet(Tn.window,xn,jt-Vn,Vn,0),Tn.wnext=Vn,Tn.whave=Tn.wsize):(Tn.wnext+=Rn,Tn.wnext===Tn.wsize&&(Tn.wnext=0),Tn.whave<Tn.wsize&&(Tn.whave+=Rn))),0}y.inflateReset=Ne,y.inflateReset2=$e,y.inflateResetKeep=xe,y.inflateInit=function(Dt){return Ce(Dt,15)},y.inflateInit2=Ce,y.inflate=function(Dt,xn){var jt,Vn,Rn,Tn,Ln,Sn,An,In,Mn,ra,da,ua,aa,Nn,En,Zn,ha,xa,sa,Hn,bn,Xn,$n,kt,At=0,Dn=new k.Buf8(4),Qn=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Dt||!Dt.state||!Dt.output||!Dt.input&&Dt.avail_in!==0)return re;(jt=Dt.state).mode===12&&(jt.mode=13),Ln=Dt.next_out,Rn=Dt.output,An=Dt.avail_out,Tn=Dt.next_in,Vn=Dt.input,Sn=Dt.avail_in,In=jt.hold,Mn=jt.bits,ra=Sn,da=An,Xn=oe;e:for(;;)switch(jt.mode){case ue:if(jt.wrap===0){jt.mode=13;break}for(;Mn<16;){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}if(2&jt.wrap&&In===35615){Dn[jt.check=0]=255&In,Dn[1]=In>>>8&255,jt.check=V(jt.check,Dn,2,0),Mn=In=0,jt.mode=2;break}if(jt.flags=0,jt.head&&(jt.head.done=!1),!(1&jt.wrap)||(((255&In)<<8)+(In>>8))%31){Dt.msg="incorrect header check",jt.mode=30;break}if((15&In)!=8){Dt.msg="unknown compression method",jt.mode=30;break}if(Mn-=4,bn=8+(15&(In>>>=4)),jt.wbits===0)jt.wbits=bn;else if(bn>jt.wbits){Dt.msg="invalid window size",jt.mode=30;break}jt.dmax=1<<bn,Dt.adler=jt.check=1,jt.mode=512&In?10:12,Mn=In=0;break;case 2:for(;Mn<16;){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}if(jt.flags=In,(255&jt.flags)!=8){Dt.msg="unknown compression method",jt.mode=30;break}if(57344&jt.flags){Dt.msg="unknown header flags set",jt.mode=30;break}jt.head&&(jt.head.text=In>>8&1),512&jt.flags&&(Dn[0]=255&In,Dn[1]=In>>>8&255,jt.check=V(jt.check,Dn,2,0)),Mn=In=0,jt.mode=3;case 3:for(;Mn<32;){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}jt.head&&(jt.head.time=In),512&jt.flags&&(Dn[0]=255&In,Dn[1]=In>>>8&255,Dn[2]=In>>>16&255,Dn[3]=In>>>24&255,jt.check=V(jt.check,Dn,4,0)),Mn=In=0,jt.mode=4;case 4:for(;Mn<16;){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}jt.head&&(jt.head.xflags=255&In,jt.head.os=In>>8),512&jt.flags&&(Dn[0]=255&In,Dn[1]=In>>>8&255,jt.check=V(jt.check,Dn,2,0)),Mn=In=0,jt.mode=5;case 5:if(1024&jt.flags){for(;Mn<16;){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}jt.length=In,jt.head&&(jt.head.extra_len=In),512&jt.flags&&(Dn[0]=255&In,Dn[1]=In>>>8&255,jt.check=V(jt.check,Dn,2,0)),Mn=In=0}else jt.head&&(jt.head.extra=null);jt.mode=6;case 6:if(1024&jt.flags&&(Sn<(ua=jt.length)&&(ua=Sn),ua&&(jt.head&&(bn=jt.head.extra_len-jt.length,jt.head.extra||(jt.head.extra=new Array(jt.head.extra_len)),k.arraySet(jt.head.extra,Vn,Tn,ua,bn)),512&jt.flags&&(jt.check=V(jt.check,Vn,ua,Tn)),Sn-=ua,Tn+=ua,jt.length-=ua),jt.length))break e;jt.length=0,jt.mode=7;case 7:if(2048&jt.flags){if(Sn===0)break e;for(ua=0;bn=Vn[Tn+ua++],jt.head&&bn&&jt.length<65536&&(jt.head.name+=String.fromCharCode(bn)),bn&&ua<Sn;);if(512&jt.flags&&(jt.check=V(jt.check,Vn,ua,Tn)),Sn-=ua,Tn+=ua,bn)break e}else jt.head&&(jt.head.name=null);jt.length=0,jt.mode=8;case 8:if(4096&jt.flags){if(Sn===0)break e;for(ua=0;bn=Vn[Tn+ua++],jt.head&&bn&&jt.length<65536&&(jt.head.comment+=String.fromCharCode(bn)),bn&&ua<Sn;);if(512&jt.flags&&(jt.check=V(jt.check,Vn,ua,Tn)),Sn-=ua,Tn+=ua,bn)break e}else jt.head&&(jt.head.comment=null);jt.mode=9;case 9:if(512&jt.flags){for(;Mn<16;){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}if(In!==(65535&jt.check)){Dt.msg="header crc mismatch",jt.mode=30;break}Mn=In=0}jt.head&&(jt.head.hcrc=jt.flags>>9&1,jt.head.done=!0),Dt.adler=jt.check=0,jt.mode=12;break;case 10:for(;Mn<32;){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}Dt.adler=jt.check=he(In),Mn=In=0,jt.mode=11;case 11:if(jt.havedict===0)return Dt.next_out=Ln,Dt.avail_out=An,Dt.next_in=Tn,Dt.avail_in=Sn,jt.hold=In,jt.bits=Mn,2;Dt.adler=jt.check=1,jt.mode=12;case 12:if(xn===5||xn===6)break e;case 13:if(jt.last){In>>>=7&Mn,Mn-=7&Mn,jt.mode=27;break}for(;Mn<3;){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}switch(jt.last=1&In,Mn-=1,3&(In>>>=1)){case 0:jt.mode=14;break;case 1:if(Pt(jt),jt.mode=20,xn!==6)break;In>>>=2,Mn-=2;break e;case 2:jt.mode=17;break;case 3:Dt.msg="invalid block type",jt.mode=30}In>>>=2,Mn-=2;break;case 14:for(In>>>=7&Mn,Mn-=7&Mn;Mn<32;){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}if((65535&In)!=(In>>>16^65535)){Dt.msg="invalid stored block lengths",jt.mode=30;break}if(jt.length=65535&In,Mn=In=0,jt.mode=15,xn===6)break e;case 15:jt.mode=16;case 16:if(ua=jt.length){if(Sn<ua&&(ua=Sn),An<ua&&(ua=An),ua===0)break e;k.arraySet(Rn,Vn,Tn,ua,Ln),Sn-=ua,Tn+=ua,An-=ua,Ln+=ua,jt.length-=ua;break}jt.mode=12;break;case 17:for(;Mn<14;){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}if(jt.nlen=257+(31&In),In>>>=5,Mn-=5,jt.ndist=1+(31&In),In>>>=5,Mn-=5,jt.ncode=4+(15&In),In>>>=4,Mn-=4,286<jt.nlen||30<jt.ndist){Dt.msg="too many length or distance symbols",jt.mode=30;break}jt.have=0,jt.mode=18;case 18:for(;jt.have<jt.ncode;){for(;Mn<3;){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}jt.lens[Qn[jt.have++]]=7&In,In>>>=3,Mn-=3}for(;jt.have<19;)jt.lens[Qn[jt.have++]]=0;if(jt.lencode=jt.lendyn,jt.lenbits=7,$n={bits:jt.lenbits},Xn=z(0,jt.lens,0,19,jt.lencode,0,jt.work,$n),jt.lenbits=$n.bits,Xn){Dt.msg="invalid code lengths set",jt.mode=30;break}jt.have=0,jt.mode=19;case 19:for(;jt.have<jt.nlen+jt.ndist;){for(;Zn=(At=jt.lencode[In&(1<<jt.lenbits)-1])>>>16&255,ha=65535&At,!((En=At>>>24)<=Mn);){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}if(ha<16)In>>>=En,Mn-=En,jt.lens[jt.have++]=ha;else{if(ha===16){for(kt=En+2;Mn<kt;){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}if(In>>>=En,Mn-=En,jt.have===0){Dt.msg="invalid bit length repeat",jt.mode=30;break}bn=jt.lens[jt.have-1],ua=3+(3&In),In>>>=2,Mn-=2}else if(ha===17){for(kt=En+3;Mn<kt;){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}Mn-=En,bn=0,ua=3+(7&(In>>>=En)),In>>>=3,Mn-=3}else{for(kt=En+7;Mn<kt;){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}Mn-=En,bn=0,ua=11+(127&(In>>>=En)),In>>>=7,Mn-=7}if(jt.have+ua>jt.nlen+jt.ndist){Dt.msg="invalid bit length repeat",jt.mode=30;break}for(;ua--;)jt.lens[jt.have++]=bn}}if(jt.mode===30)break;if(jt.lens[256]===0){Dt.msg="invalid code -- missing end-of-block",jt.mode=30;break}if(jt.lenbits=9,$n={bits:jt.lenbits},Xn=z(j,jt.lens,0,jt.nlen,jt.lencode,0,jt.work,$n),jt.lenbits=$n.bits,Xn){Dt.msg="invalid literal/lengths set",jt.mode=30;break}if(jt.distbits=6,jt.distcode=jt.distdyn,$n={bits:jt.distbits},Xn=z(ae,jt.lens,jt.nlen,jt.ndist,jt.distcode,0,jt.work,$n),jt.distbits=$n.bits,Xn){Dt.msg="invalid distances set",jt.mode=30;break}if(jt.mode=20,xn===6)break e;case 20:jt.mode=21;case 21:if(6<=Sn&&258<=An){Dt.next_out=Ln,Dt.avail_out=An,Dt.next_in=Tn,Dt.avail_in=Sn,jt.hold=In,jt.bits=Mn,L(Dt,da),Ln=Dt.next_out,Rn=Dt.output,An=Dt.avail_out,Tn=Dt.next_in,Vn=Dt.input,Sn=Dt.avail_in,In=jt.hold,Mn=jt.bits,jt.mode===12&&(jt.back=-1);break}for(jt.back=0;Zn=(At=jt.lencode[In&(1<<jt.lenbits)-1])>>>16&255,ha=65535&At,!((En=At>>>24)<=Mn);){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}if(Zn&&!(240&Zn)){for(xa=En,sa=Zn,Hn=ha;Zn=(At=jt.lencode[Hn+((In&(1<<xa+sa)-1)>>xa)])>>>16&255,ha=65535&At,!(xa+(En=At>>>24)<=Mn);){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}In>>>=xa,Mn-=xa,jt.back+=xa}if(In>>>=En,Mn-=En,jt.back+=En,jt.length=ha,Zn===0){jt.mode=26;break}if(32&Zn){jt.back=-1,jt.mode=12;break}if(64&Zn){Dt.msg="invalid literal/length code",jt.mode=30;break}jt.extra=15&Zn,jt.mode=22;case 22:if(jt.extra){for(kt=jt.extra;Mn<kt;){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}jt.length+=In&(1<<jt.extra)-1,In>>>=jt.extra,Mn-=jt.extra,jt.back+=jt.extra}jt.was=jt.length,jt.mode=23;case 23:for(;Zn=(At=jt.distcode[In&(1<<jt.distbits)-1])>>>16&255,ha=65535&At,!((En=At>>>24)<=Mn);){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}if(!(240&Zn)){for(xa=En,sa=Zn,Hn=ha;Zn=(At=jt.distcode[Hn+((In&(1<<xa+sa)-1)>>xa)])>>>16&255,ha=65535&At,!(xa+(En=At>>>24)<=Mn);){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}In>>>=xa,Mn-=xa,jt.back+=xa}if(In>>>=En,Mn-=En,jt.back+=En,64&Zn){Dt.msg="invalid distance code",jt.mode=30;break}jt.offset=ha,jt.extra=15&Zn,jt.mode=24;case 24:if(jt.extra){for(kt=jt.extra;Mn<kt;){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}jt.offset+=In&(1<<jt.extra)-1,In>>>=jt.extra,Mn-=jt.extra,jt.back+=jt.extra}if(jt.offset>jt.dmax){Dt.msg="invalid distance too far back",jt.mode=30;break}jt.mode=25;case 25:if(An===0)break e;if(ua=da-An,jt.offset>ua){if((ua=jt.offset-ua)>jt.whave&&jt.sane){Dt.msg="invalid distance too far back",jt.mode=30;break}aa=ua>jt.wnext?(ua-=jt.wnext,jt.wsize-ua):jt.wnext-ua,ua>jt.length&&(ua=jt.length),Nn=jt.window}else Nn=Rn,aa=Ln-jt.offset,ua=jt.length;for(An<ua&&(ua=An),An-=ua,jt.length-=ua;Rn[Ln++]=Nn[aa++],--ua;);jt.length===0&&(jt.mode=21);break;case 26:if(An===0)break e;Rn[Ln++]=jt.length,An--,jt.mode=21;break;case 27:if(jt.wrap){for(;Mn<32;){if(Sn===0)break e;Sn--,In|=Vn[Tn++]<<Mn,Mn+=8}if(da-=An,Dt.total_out+=da,jt.total+=da,da&&(Dt.adler=jt.check=jt.flags?V(jt.check,Rn,da,Ln-da):$(jt.check,Rn,da,Ln-da)),da=An,(jt.flags?In:he(In))!==jt.check){Dt.msg="incorrect data check",jt.mode=30;break}Mn=In=0}jt.mode=28;case 28:if(jt.wrap&&jt.flags){for(;Mn<32;){if(Sn===0)break e;Sn--,In+=Vn[Tn++]<<Mn,Mn+=8}if(In!==(4294967295&jt.total)){Dt.msg="incorrect length check",jt.mode=30;break}Mn=In=0}jt.mode=29;case 29:Xn=1;break e;case 30:Xn=-3;break e;case 31:return-4;case 32:default:return re}return Dt.next_out=Ln,Dt.avail_out=An,Dt.next_in=Tn,Dt.avail_in=Sn,jt.hold=In,jt.bits=Mn,(jt.wsize||da!==Dt.avail_out&&jt.mode<30&&(jt.mode<27||xn!==4))&&hn(Dt,Dt.output,Dt.next_out,da-Dt.avail_out)?(jt.mode=31,-4):(ra-=Dt.avail_in,da-=Dt.avail_out,Dt.total_in+=ra,Dt.total_out+=da,jt.total+=da,jt.wrap&&da&&(Dt.adler=jt.check=jt.flags?V(jt.check,Rn,da,Dt.next_out-da):$(jt.check,Rn,da,Dt.next_out-da)),Dt.data_type=jt.bits+(jt.last?64:0)+(jt.mode===12?128:0)+(jt.mode===20||jt.mode===15?256:0),(ra==0&&da===0||xn===4)&&Xn===oe&&(Xn=-5),Xn)},y.inflateEnd=function(Dt){if(!Dt||!Dt.state)return re;var xn=Dt.state;return xn.window&&(xn.window=null),Dt.state=null,oe},y.inflateGetHeader=function(Dt,xn){var jt;return Dt&&Dt.state&&2&(jt=Dt.state).wrap?((jt.head=xn).done=!1,oe):re},y.inflateSetDictionary=function(Dt,xn){var jt,Vn=xn.length;return Dt&&Dt.state?(jt=Dt.state).wrap!==0&&jt.mode!==11?re:jt.mode===11&&$(1,xn,Vn,0)!==jt.check?-3:hn(Dt,xn,Vn,Vn)?(jt.mode=31,-4):(jt.havedict=1,oe):re},y.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,g,y){var k=r("../utils/common"),$=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],V=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],L=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],z=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];g.exports=function(j,ae,oe,re,ue,le,de,he){var _e,xe,Ne,$e,Ce,Ie,ze,Ue,Pt,hn=he.bits,Dt=0,xn=0,jt=0,Vn=0,Rn=0,Tn=0,Ln=0,Sn=0,An=0,In=0,Mn=null,ra=0,da=new k.Buf16(16),ua=new k.Buf16(16),aa=null,Nn=0;for(Dt=0;Dt<=15;Dt++)da[Dt]=0;for(xn=0;xn<re;xn++)da[ae[oe+xn]]++;for(Rn=hn,Vn=15;1<=Vn&&da[Vn]===0;Vn--);if(Vn<Rn&&(Rn=Vn),Vn===0)return ue[le++]=20971520,ue[le++]=20971520,he.bits=1,0;for(jt=1;jt<Vn&&da[jt]===0;jt++);for(Rn<jt&&(Rn=jt),Dt=Sn=1;Dt<=15;Dt++)if(Sn<<=1,(Sn-=da[Dt])<0)return-1;if(0<Sn&&(j===0||Vn!==1))return-1;for(ua[1]=0,Dt=1;Dt<15;Dt++)ua[Dt+1]=ua[Dt]+da[Dt];for(xn=0;xn<re;xn++)ae[oe+xn]!==0&&(de[ua[ae[oe+xn]]++]=xn);if(Ie=j===0?(Mn=aa=de,19):j===1?(Mn=$,ra-=257,aa=V,Nn-=257,256):(Mn=L,aa=z,-1),Dt=jt,Ce=le,Ln=xn=In=0,Ne=-1,$e=(An=1<<(Tn=Rn))-1,j===1&&852<An||j===2&&592<An)return 1;for(;;){for(ze=Dt-Ln,Pt=de[xn]<Ie?(Ue=0,de[xn]):de[xn]>Ie?(Ue=aa[Nn+de[xn]],Mn[ra+de[xn]]):(Ue=96,0),_e=1<<Dt-Ln,jt=xe=1<<Tn;ue[Ce+(In>>Ln)+(xe-=_e)]=ze<<24|Ue<<16|Pt|0,xe!==0;);for(_e=1<<Dt-1;In&_e;)_e>>=1;if(_e!==0?(In&=_e-1,In+=_e):In=0,xn++,--da[Dt]==0){if(Dt===Vn)break;Dt=ae[oe+de[xn]]}if(Rn<Dt&&(In&$e)!==Ne){for(Ln===0&&(Ln=Rn),Ce+=jt,Sn=1<<(Tn=Dt-Ln);Tn+Ln<Vn&&!((Sn-=da[Tn+Ln])<=0);)Tn++,Sn<<=1;if(An+=1<<Tn,j===1&&852<An||j===2&&592<An)return 1;ue[Ne=In&$e]=Rn<<24|Tn<<16|Ce-le|0}}return In!==0&&(ue[Ce+In]=Dt-Ln<<24|64<<16|0),he.bits=Rn,0}},{"../utils/common":41}],51:[function(r,g,y){g.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,g,y){var k=r("../utils/common"),$=0,V=1;function L(At){for(var Dn=At.length;0<=--Dn;)At[Dn]=0}var z=0,j=29,ae=256,oe=ae+1+j,re=30,ue=19,le=2*oe+1,de=15,he=16,_e=7,xe=256,Ne=16,$e=17,Ce=18,Ie=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ze=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ue=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Pt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],hn=new Array(2*(oe+2));L(hn);var Dt=new Array(2*re);L(Dt);var xn=new Array(512);L(xn);var jt=new Array(256);L(jt);var Vn=new Array(j);L(Vn);var Rn,Tn,Ln,Sn=new Array(re);function An(At,Dn,Qn,oa,na){this.static_tree=At,this.extra_bits=Dn,this.extra_base=Qn,this.elems=oa,this.max_length=na,this.has_stree=At&&At.length}function In(At,Dn){this.dyn_tree=At,this.max_code=0,this.stat_desc=Dn}function Mn(At){return At<256?xn[At]:xn[256+(At>>>7)]}function ra(At,Dn){At.pending_buf[At.pending++]=255&Dn,At.pending_buf[At.pending++]=Dn>>>8&255}function da(At,Dn,Qn){At.bi_valid>he-Qn?(At.bi_buf|=Dn<<At.bi_valid&65535,ra(At,At.bi_buf),At.bi_buf=Dn>>he-At.bi_valid,At.bi_valid+=Qn-he):(At.bi_buf|=Dn<<At.bi_valid&65535,At.bi_valid+=Qn)}function ua(At,Dn,Qn){da(At,Qn[2*Dn],Qn[2*Dn+1])}function aa(At,Dn){for(var Qn=0;Qn|=1&At,At>>>=1,Qn<<=1,0<--Dn;);return Qn>>>1}function Nn(At,Dn,Qn){var oa,na,la=new Array(de+1),ma=0;for(oa=1;oa<=de;oa++)la[oa]=ma=ma+Qn[oa-1]<<1;for(na=0;na<=Dn;na++){var ca=At[2*na+1];ca!==0&&(At[2*na]=aa(la[ca]++,ca))}}function En(At){var Dn;for(Dn=0;Dn<oe;Dn++)At.dyn_ltree[2*Dn]=0;for(Dn=0;Dn<re;Dn++)At.dyn_dtree[2*Dn]=0;for(Dn=0;Dn<ue;Dn++)At.bl_tree[2*Dn]=0;At.dyn_ltree[2*xe]=1,At.opt_len=At.static_len=0,At.last_lit=At.matches=0}function Zn(At){8<At.bi_valid?ra(At,At.bi_buf):0<At.bi_valid&&(At.pending_buf[At.pending++]=At.bi_buf),At.bi_buf=0,At.bi_valid=0}function ha(At,Dn,Qn,oa){var na=2*Dn,la=2*Qn;return At[na]<At[la]||At[na]===At[la]&&oa[Dn]<=oa[Qn]}function xa(At,Dn,Qn){for(var oa=At.heap[Qn],na=Qn<<1;na<=At.heap_len&&(na<At.heap_len&&ha(Dn,At.heap[na+1],At.heap[na],At.depth)&&na++,!ha(Dn,oa,At.heap[na],At.depth));)At.heap[Qn]=At.heap[na],Qn=na,na<<=1;At.heap[Qn]=oa}function sa(At,Dn,Qn){var oa,na,la,ma,ca=0;if(At.last_lit!==0)for(;oa=At.pending_buf[At.d_buf+2*ca]<<8|At.pending_buf[At.d_buf+2*ca+1],na=At.pending_buf[At.l_buf+ca],ca++,oa===0?ua(At,na,Dn):(ua(At,(la=jt[na])+ae+1,Dn),(ma=Ie[la])!==0&&da(At,na-=Vn[la],ma),ua(At,la=Mn(--oa),Qn),(ma=ze[la])!==0&&da(At,oa-=Sn[la],ma)),ca<At.last_lit;);ua(At,xe,Dn)}function Hn(At,Dn){var Qn,oa,na,la=Dn.dyn_tree,ma=Dn.stat_desc.static_tree,ca=Dn.stat_desc.has_stree,pe=Dn.stat_desc.elems,Oe=-1;for(At.heap_len=0,At.heap_max=le,Qn=0;Qn<pe;Qn++)la[2*Qn]!==0?(At.heap[++At.heap_len]=Oe=Qn,At.depth[Qn]=0):la[2*Qn+1]=0;for(;At.heap_len<2;)la[2*(na=At.heap[++At.heap_len]=Oe<2?++Oe:0)]=1,At.depth[na]=0,At.opt_len--,ca&&(At.static_len-=ma[2*na+1]);for(Dn.max_code=Oe,Qn=At.heap_len>>1;1<=Qn;Qn--)xa(At,la,Qn);for(na=pe;Qn=At.heap[1],At.heap[1]=At.heap[At.heap_len--],xa(At,la,1),oa=At.heap[1],At.heap[--At.heap_max]=Qn,At.heap[--At.heap_max]=oa,la[2*na]=la[2*Qn]+la[2*oa],At.depth[na]=(At.depth[Qn]>=At.depth[oa]?At.depth[Qn]:At.depth[oa])+1,la[2*Qn+1]=la[2*oa+1]=na,At.heap[1]=na++,xa(At,la,1),2<=At.heap_len;);At.heap[--At.heap_max]=At.heap[1],function(Ve,qe){var Et,Lt,_n,vn,wn,Cn,Bn=qe.dyn_tree,zn=qe.max_code,Fn=qe.stat_desc.static_tree,Gn=qe.stat_desc.has_stree,Kn=qe.stat_desc.extra_bits,Wn=qe.stat_desc.extra_base,ea=qe.stat_desc.max_length,Pn=0;for(vn=0;vn<=de;vn++)Ve.bl_count[vn]=0;for(Bn[2*Ve.heap[Ve.heap_max]+1]=0,Et=Ve.heap_max+1;Et<le;Et++)ea<(vn=Bn[2*Bn[2*(Lt=Ve.heap[Et])+1]+1]+1)&&(vn=ea,Pn++),Bn[2*Lt+1]=vn,zn<Lt||(Ve.bl_count[vn]++,wn=0,Wn<=Lt&&(wn=Kn[Lt-Wn]),Cn=Bn[2*Lt],Ve.opt_len+=Cn*(vn+wn),Gn&&(Ve.static_len+=Cn*(Fn[2*Lt+1]+wn)));if(Pn!==0){do{for(vn=ea-1;Ve.bl_count[vn]===0;)vn--;Ve.bl_count[vn]--,Ve.bl_count[vn+1]+=2,Ve.bl_count[ea]--,Pn-=2}while(0<Pn);for(vn=ea;vn!==0;vn--)for(Lt=Ve.bl_count[vn];Lt!==0;)zn<(_n=Ve.heap[--Et])||(Bn[2*_n+1]!==vn&&(Ve.opt_len+=(vn-Bn[2*_n+1])*Bn[2*_n],Bn[2*_n+1]=vn),Lt--)}}(At,Dn),Nn(la,Oe,At.bl_count)}function bn(At,Dn,Qn){var oa,na,la=-1,ma=Dn[1],ca=0,pe=7,Oe=4;for(ma===0&&(pe=138,Oe=3),Dn[2*(Qn+1)+1]=65535,oa=0;oa<=Qn;oa++)na=ma,ma=Dn[2*(oa+1)+1],++ca<pe&&na===ma||(ca<Oe?At.bl_tree[2*na]+=ca:na!==0?(na!==la&&At.bl_tree[2*na]++,At.bl_tree[2*Ne]++):ca<=10?At.bl_tree[2*$e]++:At.bl_tree[2*Ce]++,la=na,Oe=(ca=0)===ma?(pe=138,3):na===ma?(pe=6,3):(pe=7,4))}function Xn(At,Dn,Qn){var oa,na,la=-1,ma=Dn[1],ca=0,pe=7,Oe=4;for(ma===0&&(pe=138,Oe=3),oa=0;oa<=Qn;oa++)if(na=ma,ma=Dn[2*(oa+1)+1],!(++ca<pe&&na===ma)){if(ca<Oe)for(;ua(At,na,At.bl_tree),--ca!=0;);else na!==0?(na!==la&&(ua(At,na,At.bl_tree),ca--),ua(At,Ne,At.bl_tree),da(At,ca-3,2)):ca<=10?(ua(At,$e,At.bl_tree),da(At,ca-3,3)):(ua(At,Ce,At.bl_tree),da(At,ca-11,7));la=na,Oe=(ca=0)===ma?(pe=138,3):na===ma?(pe=6,3):(pe=7,4)}}L(Sn);var $n=!1;function kt(At,Dn,Qn,oa){da(At,(z<<1)+(oa?1:0),3),function(na,la,ma,ca){Zn(na),ca&&(ra(na,ma),ra(na,~ma)),k.arraySet(na.pending_buf,na.window,la,ma,na.pending),na.pending+=ma}(At,Dn,Qn,!0)}y._tr_init=function(At){$n||(function(){var Dn,Qn,oa,na,la,ma=new Array(de+1);for(na=oa=0;na<j-1;na++)for(Vn[na]=oa,Dn=0;Dn<1<<Ie[na];Dn++)jt[oa++]=na;for(jt[oa-1]=na,na=la=0;na<16;na++)for(Sn[na]=la,Dn=0;Dn<1<<ze[na];Dn++)xn[la++]=na;for(la>>=7;na<re;na++)for(Sn[na]=la<<7,Dn=0;Dn<1<<ze[na]-7;Dn++)xn[256+la++]=na;for(Qn=0;Qn<=de;Qn++)ma[Qn]=0;for(Dn=0;Dn<=143;)hn[2*Dn+1]=8,Dn++,ma[8]++;for(;Dn<=255;)hn[2*Dn+1]=9,Dn++,ma[9]++;for(;Dn<=279;)hn[2*Dn+1]=7,Dn++,ma[7]++;for(;Dn<=287;)hn[2*Dn+1]=8,Dn++,ma[8]++;for(Nn(hn,oe+1,ma),Dn=0;Dn<re;Dn++)Dt[2*Dn+1]=5,Dt[2*Dn]=aa(Dn,5);Rn=new An(hn,Ie,ae+1,oe,de),Tn=new An(Dt,ze,0,re,de),Ln=new An(new Array(0),Ue,0,ue,_e)}(),$n=!0),At.l_desc=new In(At.dyn_ltree,Rn),At.d_desc=new In(At.dyn_dtree,Tn),At.bl_desc=new In(At.bl_tree,Ln),At.bi_buf=0,At.bi_valid=0,En(At)},y._tr_stored_block=kt,y._tr_flush_block=function(At,Dn,Qn,oa){var na,la,ma=0;0<At.level?(At.strm.data_type===2&&(At.strm.data_type=function(ca){var pe,Oe=4093624447;for(pe=0;pe<=31;pe++,Oe>>>=1)if(1&Oe&&ca.dyn_ltree[2*pe]!==0)return $;if(ca.dyn_ltree[18]!==0||ca.dyn_ltree[20]!==0||ca.dyn_ltree[26]!==0)return V;for(pe=32;pe<ae;pe++)if(ca.dyn_ltree[2*pe]!==0)return V;return $}(At)),Hn(At,At.l_desc),Hn(At,At.d_desc),ma=function(ca){var pe;for(bn(ca,ca.dyn_ltree,ca.l_desc.max_code),bn(ca,ca.dyn_dtree,ca.d_desc.max_code),Hn(ca,ca.bl_desc),pe=ue-1;3<=pe&&ca.bl_tree[2*Pt[pe]+1]===0;pe--);return ca.opt_len+=3*(pe+1)+5+5+4,pe}(At),na=At.opt_len+3+7>>>3,(la=At.static_len+3+7>>>3)<=na&&(na=la)):na=la=Qn+5,Qn+4<=na&&Dn!==-1?kt(At,Dn,Qn,oa):At.strategy===4||la===na?(da(At,2+(oa?1:0),3),sa(At,hn,Dt)):(da(At,4+(oa?1:0),3),function(ca,pe,Oe,Ve){var qe;for(da(ca,pe-257,5),da(ca,Oe-1,5),da(ca,Ve-4,4),qe=0;qe<Ve;qe++)da(ca,ca.bl_tree[2*Pt[qe]+1],3);Xn(ca,ca.dyn_ltree,pe-1),Xn(ca,ca.dyn_dtree,Oe-1)}(At,At.l_desc.max_code+1,At.d_desc.max_code+1,ma+1),sa(At,At.dyn_ltree,At.dyn_dtree)),En(At),oa&&Zn(At)},y._tr_tally=function(At,Dn,Qn){return At.pending_buf[At.d_buf+2*At.last_lit]=Dn>>>8&255,At.pending_buf[At.d_buf+2*At.last_lit+1]=255&Dn,At.pending_buf[At.l_buf+At.last_lit]=255&Qn,At.last_lit++,Dn===0?At.dyn_ltree[2*Qn]++:(At.matches++,Dn--,At.dyn_ltree[2*(jt[Qn]+ae+1)]++,At.dyn_dtree[2*Mn(Dn)]++),At.last_lit===At.lit_bufsize-1},y._tr_align=function(At){da(At,2,3),ua(At,xe,hn),function(Dn){Dn.bi_valid===16?(ra(Dn,Dn.bi_buf),Dn.bi_buf=0,Dn.bi_valid=0):8<=Dn.bi_valid&&(Dn.pending_buf[Dn.pending++]=255&Dn.bi_buf,Dn.bi_buf>>=8,Dn.bi_valid-=8)}(At)}},{"../utils/common":41}],53:[function(r,g,y){g.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,g,y){(function(k){(function($,V){if(!$.setImmediate){var L,z,j,ae,oe=1,re={},ue=!1,le=$.document,de=Object.getPrototypeOf&&Object.getPrototypeOf($);de=de&&de.setTimeout?de:$,L={}.toString.call($.process)==="[object process]"?function(Ne){process.nextTick(function(){_e(Ne)})}:function(){if($.postMessage&&!$.importScripts){var Ne=!0,$e=$.onmessage;return $.onmessage=function(){Ne=!1},$.postMessage("","*"),$.onmessage=$e,Ne}}()?(ae="setImmediate$"+Math.random()+"$",$.addEventListener?$.addEventListener("message",xe,!1):$.attachEvent("onmessage",xe),function(Ne){$.postMessage(ae+Ne,"*")}):$.MessageChannel?((j=new MessageChannel).port1.onmessage=function(Ne){_e(Ne.data)},function(Ne){j.port2.postMessage(Ne)}):le&&"onreadystatechange"in le.createElement("script")?(z=le.documentElement,function(Ne){var $e=le.createElement("script");$e.onreadystatechange=function(){_e(Ne),$e.onreadystatechange=null,z.removeChild($e),$e=null},z.appendChild($e)}):function(Ne){setTimeout(_e,0,Ne)},de.setImmediate=function(Ne){typeof Ne!="function"&&(Ne=new Function(""+Ne));for(var $e=new Array(arguments.length-1),Ce=0;Ce<$e.length;Ce++)$e[Ce]=arguments[Ce+1];var Ie={callback:Ne,args:$e};return re[oe]=Ie,L(oe),oe++},de.clearImmediate=he}function he(Ne){delete re[Ne]}function _e(Ne){if(ue)setTimeout(_e,0,Ne);else{var $e=re[Ne];if($e){ue=!0;try{(function(Ce){var Ie=Ce.callback,ze=Ce.args;switch(ze.length){case 0:Ie();break;case 1:Ie(ze[0]);break;case 2:Ie(ze[0],ze[1]);break;case 3:Ie(ze[0],ze[1],ze[2]);break;default:Ie.apply(V,ze)}})($e)}finally{he(Ne),ue=!1}}}}function xe(Ne){Ne.source===$&&typeof Ne.data=="string"&&Ne.data.indexOf(ae)===0&&_e(+Ne.data.slice(ae.length))}})(typeof self>"u"?k===void 0?this:k:self)}).call(this,typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(jszip_min);var jszip_minExports=jszip_min.exports;const JSZip=getDefaultExportFromCjs(jszip_minExports),kai_strokes=[{name:"",uuid:"KXIDGV2F_Pyd7r0C6_TB1",params:[{name:"",default:500,min:50,max:1e3,originParam:""},{name:"",default:0,min:0,max:200},{name:"",default:50,min:10,max:100}]},{name:"",uuid:"aH2ns8O1EHIIESpjVzSy8",params:[{name:"",default:500,min:50,max:1e3,originParam:""},{name:"",default:0,min:-200,max:200},{name:"",default:50,min:10,max:100}]},{name:"",uuid:"LrdRipEgPadhamoHzTuJ1",params:[{name:"",default:500,min:0,max:1e3},{name:"",default:500,min:0,max:1e3},{name:"",default:.5,min:0,max:1},{name:"",default:150,min:0,max:500},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"HcR12pTrOLu4ZOAuQuriM",params:[{name:"-",default:200,min:0,max:1e3},{name:"-",default:200,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"-ubJbIG2A8mc-nSDlljeb",params:[{name:"",default:500,min:0,max:1e3},{name:"",default:500,min:0,max:1e3},{name:"",default:.5,min:0,max:1},{name:"",default:150,min:0,max:500},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"NhmE6WShXfKTOUOH4V7zk",params:[{name:"",default:500,min:0,max:1e3},{name:"",default:150,min:0,max:1e3},{name:"",default:.2,min:0,max:.5},{name:"",default:150,min:0,max:500},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"QcHLqxGmyKRhv4yyA0HqR",params:[{name:"-",default:100,min:0,max:500},{name:"-",default:150,min:0,max:500},{name:"-",default:500,min:0,max:1e3},{name:"-",default:150,min:0,max:1e3},{name:"-",default:.2,min:0,max:.5},{name:"-",default:150,min:0,max:500},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"ioUJIJq5204Sa43hz5iev",params:[{name:"",default:100,min:0,max:500},{name:"",default:150,min:0,max:500},{name:"",default:.5,min:0,max:1},{name:"",default:30,min:0,max:200},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"krVrPdyfoe9sKIT_wQX-7",params:[{name:"",default:200,min:0,max:500},{name:"",default:200,min:0,max:500},{name:"",default:.5,min:0,max:1},{name:"",default:30,min:0,max:200},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"lbMVwrKP_q4p1oPHu4anJ",params:[{name:"-",default:500,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:200},{name:"-",default:500,min:0,max:1e3},{name:"-",default:500,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"EPBo33qt9wCQ1qYj1u71k",params:[{name:"-",default:220,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:200},{name:"1-",default:150,min:0,max:1e3},{name:"1-",default:200,min:0,max:1e3},{name:"2-",default:150,min:0,max:1e3,originParam:"2-"},{name:"2-",default:0,min:0,max:200},{name:"-",default:300,min:0,max:1e3},{name:"-",default:420,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"fMIzxBo7oSEFUayQx_cCO",params:[{name:"-",default:100,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:50,min:0,max:500},{name:"-",default:100,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:50,min:0,max:500},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"OXQCmaRKaoLjigiNIwicW",params:[{name:"-",default:300,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:50,min:0,max:500},{name:"-",default:500,min:0,max:1e3},{name:"-",default:100,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:50,min:0,max:500},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"aiqF1SoB4nhfEDkhRmB3k",params:[{name:"-",default:500,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:-200,max:200},{name:"-",default:160,min:0,max:1e3},{name:"-",default:120,min:0,max:1e3},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"JYSKwaS9xvilKQMcRZ3E0",params:[{name:"-",default:150,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:200},{name:"-",default:-10,min:-200,max:200},{name:"-",default:500,min:0,max:1e3,originParam:"-"},{name:"-",default:120,min:0,max:1e3},{name:"-",default:120,min:0,max:1e3},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"1Qdp3QzLK64BtwctXszQZ",params:[{name:"-",default:500,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:-200,max:200},{name:"-",default:100,min:0,max:300},{name:"-",default:-15,min:-300,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"YENGMQs6EL4dBiMrf1-nh",params:[{name:"-",default:500,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:200},{name:"-",default:100,min:0,max:300},{name:"-",default:100,min:0,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"equYbH1yyUiKQ6b34jZea",params:[{name:"-",default:500,min:0,max:1e3},{name:"-",default:100,min:0,max:350},{name:"-",default:100,min:0,max:300},{name:"-",default:-30,min:-300,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"hfyoooj2emaeJLcgRctnc",params:[{name:"-",default:300,min:0,max:1e3},{name:"-",default:500,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:200,min:0,max:500},{name:"-",default:100,min:0,max:300},{name:"-",default:100,min:0,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"fr4w85QKX0poi7nSBmjFK",params:[{name:"-",default:500,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:-200,max:200},{name:"-",default:260,min:0,max:1e3},{name:"-",default:25,min:-150,max:150},{name:"-",default:80,min:0,max:200},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"FuEXpS2xyTJA73Z2WcrOz",params:[{name:"-",default:200,min:0,max:1e3,originParam:"-"},{name:"-",default:-10,min:-200,max:200},{name:"1-",default:500,min:0,max:1e3,originParam:"1-"},{name:"1-",default:0,min:0,max:200},{name:"2-",default:100,min:0,max:1e3},{name:"2-",default:300,min:0,max:1e3},{name:"-",default:80,min:0,max:300},{name:"-",default:-60,min:-300,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"c8Pd8VSPjClASnXbxipaV",params:[{name:"-",default:500,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:200},{name:"-",default:100,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:80,min:0,max:300},{name:"-",default:-60,min:-300,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"3RKgyX_a2ZvPsfushHJg2",params:[{name:"-",default:300,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:200},{name:"-",default:100,min:0,max:1e3},{name:"-",default:500,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:100,min:0,max:350},{name:"-",default:60,min:0,max:300},{name:"-",default:60,min:0,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"R6GeGWSWvEc-yqfuzSuKo",params:[{name:"-",default:300,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:200},{name:"-",default:300,min:0,max:1e3},{name:"-",default:380,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:100,min:0,max:300},{name:"-",default:380,min:0,max:1e3},{name:"-",default:60,min:0,max:300},{name:"-",default:60,min:0,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"F6ywDDM5lvSxM5XkMnT35",params:[{name:"-",default:260,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:200},{name:"-",default:120,min:0,max:1e3},{name:"-",default:200,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:150,min:0,max:500},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"vLtc_ON5tYCc27bn2gl9f",params:[{name:"-",default:350,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:200},{name:"1-",default:120,min:0,max:1e3},{name:"1-",default:180,min:0,max:1e3},{name:"2-",default:200,min:0,max:1e3,originParam:"2-"},{name:"2-",default:0,min:0,max:200},{name:"-",default:100,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:80,min:0,max:300},{name:"-",default:-60,min:-300,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"SeF5EncRABMJnvz2sfGC0",params:[{name:"-",default:500,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:200},{name:"-",default:0,min:-200,max:200},{name:"-",default:300,min:0,max:1e3},{name:"",default:50,min:0,max:200}]},{name:"2",uuid:"IInqUl_DAjYg-8Tmw_NHE",params:[{name:"-",default:500,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:200},{name:"-",default:300,min:0,max:1e3,originParam:"-"},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"Di0BaW5M-zifjadwEdyPh",params:[{name:"1-",default:300,min:0,max:1e3,originParam:"1-"},{name:"1-",default:0,min:0,max:200},{name:"1-",default:50,min:0,max:1e3},{name:"1-",default:200,min:0,max:1e3},{name:"2-",default:200,min:0,max:1e3,originParam:"2-"},{name:"2-",default:0,min:0,max:200},{name:"2-",default:50,min:0,max:1e3},{name:"2-",default:200,min:0,max:1e3},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"MqIp7k0ZDGTDWdQIrVHD0",params:[{name:"-",default:0,min:-200,max:200},{name:"-",default:500,min:0,max:1e3},{name:"-",default:500,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:-200,max:1e3},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"oyP7Yql1-auw4uJDNpxxw",params:[{name:"-",default:300,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:-200,max:200},{name:"-",default:200,min:0,max:1e3},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"3ogIJZDcPTAUT67ob1mmH",params:[{name:"-",default:200,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:200},{name:"-",default:0,min:-500,max:500},{name:"-",default:300,min:0,max:1e3},{name:"-",default:200,min:0,max:1e3},{name:"",default:50,min:0,max:200}]}],hei_strokes=[{name:"",uuid:"KXIDGV2F_Pyd7r0C6_TB1",params:[{name:"",default:500,min:50,max:1e3,originParam:""},{name:"",default:0,min:0,max:0},{name:"",default:50,min:10,max:100}]},{name:"",uuid:"aH2ns8O1EHIIESpjVzSy8",params:[{name:"",default:500,min:50,max:1e3,originParam:""},{name:"",default:0,min:0,max:0},{name:"",default:50,min:10,max:100}]},{name:"",uuid:"LrdRipEgPadhamoHzTuJ1",params:[{name:"",default:500,min:0,max:1e3},{name:"",default:500,min:0,max:1e3},{name:"",default:.5,min:0,max:1},{name:"",default:150,min:0,max:500},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"HcR12pTrOLu4ZOAuQuriM",params:[{name:"-",default:200,min:0,max:1e3},{name:"-",default:200,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"-ubJbIG2A8mc-nSDlljeb",params:[{name:"",default:500,min:0,max:1e3},{name:"",default:500,min:0,max:1e3},{name:"",default:.5,min:0,max:1},{name:"",default:150,min:0,max:500},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"NhmE6WShXfKTOUOH4V7zk",params:[{name:"",default:500,min:0,max:1e3},{name:"",default:150,min:0,max:1e3},{name:"",default:.2,min:0,max:.5},{name:"",default:150,min:0,max:500},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"QcHLqxGmyKRhv4yyA0HqR",params:[{name:"-",default:100,min:0,max:500},{name:"-",default:150,min:0,max:500},{name:"-",default:500,min:0,max:1e3},{name:"-",default:150,min:0,max:1e3},{name:"-",default:.2,min:0,max:.5},{name:"-",default:150,min:0,max:500},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"ioUJIJq5204Sa43hz5iev",params:[{name:"",default:100,min:0,max:500},{name:"",default:150,min:0,max:500},{name:"",default:.5,min:0,max:1},{name:"",default:30,min:0,max:200},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"krVrPdyfoe9sKIT_wQX-7",params:[{name:"",default:200,min:0,max:500},{name:"",default:200,min:0,max:500},{name:"",default:.5,min:0,max:1},{name:"",default:30,min:0,max:200},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"lbMVwrKP_q4p1oPHu4anJ",params:[{name:"-",default:500,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:0},{name:"-",default:500,min:0,max:1e3},{name:"-",default:500,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"EPBo33qt9wCQ1qYj1u71k",params:[{name:"-",default:220,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:0},{name:"1-",default:150,min:0,max:1e3},{name:"1-",default:200,min:0,max:1e3},{name:"2-",default:150,min:0,max:1e3,originParam:"2-"},{name:"2-",default:0,min:0,max:200},{name:"-",default:300,min:0,max:1e3},{name:"-",default:420,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"fMIzxBo7oSEFUayQx_cCO",params:[{name:"-",default:100,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:50,min:0,max:500},{name:"-",default:100,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:50,min:0,max:500},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"OXQCmaRKaoLjigiNIwicW",params:[{name:"-",default:300,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:50,min:0,max:500},{name:"-",default:500,min:0,max:1e3},{name:"-",default:100,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:50,min:0,max:500},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"aiqF1SoB4nhfEDkhRmB3k",params:[{name:"-",default:500,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:0},{name:"-",default:160,min:0,max:1e3},{name:"-",default:120,min:0,max:1e3},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"JYSKwaS9xvilKQMcRZ3E0",params:[{name:"-",default:150,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:0},{name:"-",default:-10,min:-200,max:200},{name:"-",default:500,min:0,max:1e3,originParam:"-"},{name:"-",default:120,min:0,max:1e3},{name:"-",default:120,min:0,max:1e3},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"1Qdp3QzLK64BtwctXszQZ",params:[{name:"-",default:500,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:0},{name:"-",default:100,min:0,max:300},{name:"-",default:-15,min:-300,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"YENGMQs6EL4dBiMrf1-nh",params:[{name:"-",default:500,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:0},{name:"-",default:100,min:0,max:300},{name:"-",default:100,min:0,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"equYbH1yyUiKQ6b34jZea",params:[{name:"-",default:500,min:0,max:1e3},{name:"-",default:100,min:0,max:350},{name:"-",default:100,min:0,max:300},{name:"-",default:-30,min:-300,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"hfyoooj2emaeJLcgRctnc",params:[{name:"-",default:300,min:0,max:1e3},{name:"-",default:500,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:200,min:0,max:500},{name:"-",default:100,min:0,max:300},{name:"-",default:100,min:0,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"fr4w85QKX0poi7nSBmjFK",params:[{name:"-",default:500,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:0},{name:"-",default:260,min:0,max:1e3},{name:"-",default:25,min:-150,max:150},{name:"-",default:80,min:0,max:200},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"FuEXpS2xyTJA73Z2WcrOz",params:[{name:"-",default:200,min:0,max:1e3,originParam:"-"},{name:"-",default:-10,min:0,max:0},{name:"1-",default:500,min:0,max:1e3,originParam:"1-"},{name:"1-",default:0,min:0,max:0},{name:"2-",default:100,min:0,max:1e3},{name:"2-",default:300,min:0,max:1e3},{name:"-",default:80,min:0,max:300},{name:"-",default:-60,min:-300,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"c8Pd8VSPjClASnXbxipaV",params:[{name:"-",default:500,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:0},{name:"-",default:100,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:80,min:0,max:300},{name:"-",default:-60,min:-300,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"3RKgyX_a2ZvPsfushHJg2",params:[{name:"-",default:300,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:0},{name:"-",default:100,min:0,max:1e3},{name:"-",default:500,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:100,min:0,max:350},{name:"-",default:60,min:0,max:300},{name:"-",default:60,min:0,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"R6GeGWSWvEc-yqfuzSuKo",params:[{name:"-",default:300,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:0},{name:"-",default:300,min:0,max:1e3},{name:"-",default:380,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:100,min:0,max:300},{name:"-",default:380,min:0,max:1e3},{name:"-",default:60,min:0,max:300},{name:"-",default:60,min:0,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"F6ywDDM5lvSxM5XkMnT35",params:[{name:"-",default:260,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:0},{name:"-",default:120,min:0,max:1e3},{name:"-",default:200,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:150,min:0,max:500},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"vLtc_ON5tYCc27bn2gl9f",params:[{name:"-",default:350,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:0},{name:"1-",default:120,min:0,max:1e3},{name:"1-",default:180,min:0,max:1e3},{name:"2-",default:200,min:0,max:1e3,originParam:"2-"},{name:"2-",default:0,min:0,max:200},{name:"-",default:100,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:80,min:0,max:300},{name:"-",default:-60,min:-300,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"SeF5EncRABMJnvz2sfGC0",params:[{name:"-",default:500,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:0},{name:"-",default:0,min:-200,max:200},{name:"-",default:300,min:0,max:1e3},{name:"",default:50,min:0,max:200}]},{name:"2",uuid:"IInqUl_DAjYg-8Tmw_NHE",params:[{name:"-",default:500,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:0},{name:"-",default:300,min:0,max:1e3,originParam:"-"},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"Di0BaW5M-zifjadwEdyPh",params:[{name:"1-",default:300,min:0,max:1e3,originParam:"1-"},{name:"1-",default:0,min:0,max:0},{name:"1-",default:50,min:0,max:1e3},{name:"1-",default:200,min:0,max:1e3},{name:"2-",default:200,min:0,max:1e3,originParam:"2-"},{name:"2-",default:0,min:0,max:0},{name:"2-",default:50,min:0,max:1e3},{name:"2-",default:200,min:0,max:1e3},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"MqIp7k0ZDGTDWdQIrVHD0",params:[{name:"-",default:0,min:-200,max:200},{name:"-",default:500,min:0,max:1e3},{name:"-",default:500,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:-200,max:1e3},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"oyP7Yql1-auw4uJDNpxxw",params:[{name:"-",default:300,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:0},{name:"-",default:200,min:0,max:1e3},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"3ogIJZDcPTAUT67ob1mmH",params:[{name:"-",default:200,min:0,max:1e3,originParam:"-"},{name:"-",default:0,min:0,max:0},{name:"-",default:0,min:-500,max:500},{name:"-",default:300,min:0,max:1e3},{name:"-",default:200,min:0,max:1e3},{name:"",default:50,min:0,max:200}]}],li_strokes=clone(kai_strokes);li_strokes.push({name:"",uuid:"KXIDGV2F_Pyd7r0C6_TB1",params:[{name:"",default:500,min:50,max:1e3,originParam:""},{name:"",default:0,min:0,max:200},{name:"",default:.5,min:0,max:1},{name:"",default:50,min:10,max:100}]});li_strokes.find(e=>e.name==="").params.push({name:"",default:.5,min:0,max:1});li_strokes.find(e=>e.name==="").params.push({name:"-",default:.5,min:0,max:1});li_strokes.find(e=>e.name==="").params.push({name:"1-",default:.5,min:0,max:1});li_strokes.find(e=>e.name==="").params.push({name:"2-",default:.5,min:0,max:1});li_strokes.find(e=>e.name==="").params.push({name:"-",default:.5,min:0,max:1});li_strokes.find(e=>e.name==="").params.push({name:"-",default:.5,min:0,max:1});li_strokes.find(e=>e.name==="").params.push({name:"-",default:.5,min:0,max:1});li_strokes.find(e=>e.name==="2").params.push({name:"-",default:.5,min:0,max:1});li_strokes.find(e=>e.name==="").params.push({name:"-",default:.5,min:0,max:1});li_strokes.find(e=>e.name==="").params.push({name:"-",default:.5,min:0,max:1});li_strokes.find(e=>e.name==="").params.push({name:"-",default:.5,min:0,max:1});li_strokes.find(e=>e.name==="").params.push({name:"2-",default:.5,min:0,max:1});var paperFull={exports:{}},acorn={exports:{}},hasRequiredAcorn;function requireAcorn(){return hasRequiredAcorn||(hasRequiredAcorn=1,function(e,n){(function(r,g){g(n)})(commonjsGlobal$1,function(r){var g=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],y=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191],k="-----------------------------------------------------------------------------------------------------------------------------------------------------",$="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",V={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},L="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",z={5:L,"5module":L+" export import",6:L+" const class extends export import super"},j=/^in(stanceof)?$/,ae=new RegExp("["+$+"]"),oe=new RegExp("["+$+k+"]");function re(Fe,kn){for(var qn=65536,ia=0;ia<kn.length;ia+=2){if(qn+=kn[ia],qn>Fe)return!1;if(qn+=kn[ia+1],qn>=Fe)return!0}return!1}function ue(Fe,kn){return Fe<65?Fe===36:Fe<91?!0:Fe<97?Fe===95:Fe<123?!0:Fe<=65535?Fe>=170&&ae.test(String.fromCharCode(Fe)):kn===!1?!1:re(Fe,y)}function le(Fe,kn){return Fe<48?Fe===36:Fe<58?!0:Fe<65?!1:Fe<91?!0:Fe<97?Fe===95:Fe<123?!0:Fe<=65535?Fe>=170&&oe.test(String.fromCharCode(Fe)):kn===!1?!1:re(Fe,y)||re(Fe,g)}var de=function(kn,qn){qn===void 0&&(qn={}),this.label=kn,this.keyword=qn.keyword,this.beforeExpr=!!qn.beforeExpr,this.startsExpr=!!qn.startsExpr,this.isLoop=!!qn.isLoop,this.isAssign=!!qn.isAssign,this.prefix=!!qn.prefix,this.postfix=!!qn.postfix,this.binop=qn.binop||null,this.updateContext=null};function he(Fe,kn){return new de(Fe,{beforeExpr:!0,binop:kn})}var _e={beforeExpr:!0},xe={startsExpr:!0},Ne={};function $e(Fe,kn){return kn===void 0&&(kn={}),kn.keyword=Fe,Ne[Fe]=new de(Fe,kn)}var Ce={num:new de("num",xe),regexp:new de("regexp",xe),string:new de("string",xe),name:new de("name",xe),privateId:new de("privateId",xe),eof:new de("eof"),bracketL:new de("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new de("]"),braceL:new de("{",{beforeExpr:!0,startsExpr:!0}),braceR:new de("}"),parenL:new de("(",{beforeExpr:!0,startsExpr:!0}),parenR:new de(")"),comma:new de(",",_e),semi:new de(";",_e),colon:new de(":",_e),dot:new de("."),question:new de("?",_e),questionDot:new de("?."),arrow:new de("=>",_e),template:new de("template"),invalidTemplate:new de("invalidTemplate"),ellipsis:new de("...",_e),backQuote:new de("`",xe),dollarBraceL:new de("${",{beforeExpr:!0,startsExpr:!0}),eq:new de("=",{beforeExpr:!0,isAssign:!0}),assign:new de("_=",{beforeExpr:!0,isAssign:!0}),incDec:new de("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new de("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:he("||",1),logicalAND:he("&&",2),bitwiseOR:he("|",3),bitwiseXOR:he("^",4),bitwiseAND:he("&",5),equality:he("==/!=/===/!==",6),relational:he("</>/<=/>=",7),bitShift:he("<</>>/>>>",8),plusMin:new de("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:he("%",10),star:he("*",10),slash:he("/",10),starstar:new de("**",{beforeExpr:!0}),coalesce:he("??",1),_break:$e("break"),_case:$e("case",_e),_catch:$e("catch"),_continue:$e("continue"),_debugger:$e("debugger"),_default:$e("default",_e),_do:$e("do",{isLoop:!0,beforeExpr:!0}),_else:$e("else",_e),_finally:$e("finally"),_for:$e("for",{isLoop:!0}),_function:$e("function",xe),_if:$e("if"),_return:$e("return",_e),_switch:$e("switch"),_throw:$e("throw",_e),_try:$e("try"),_var:$e("var"),_const:$e("const"),_while:$e("while",{isLoop:!0}),_with:$e("with"),_new:$e("new",{beforeExpr:!0,startsExpr:!0}),_this:$e("this",xe),_super:$e("super",xe),_class:$e("class",xe),_extends:$e("extends",_e),_export:$e("export"),_import:$e("import",xe),_null:$e("null",xe),_true:$e("true",xe),_false:$e("false",xe),_in:$e("in",{beforeExpr:!0,binop:7}),_instanceof:$e("instanceof",{beforeExpr:!0,binop:7}),_typeof:$e("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:$e("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:$e("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Ie=/\r\n?|\n|\u2028|\u2029/,ze=new RegExp(Ie.source,"g");function Ue(Fe){return Fe===10||Fe===13||Fe===8232||Fe===8233}function Pt(Fe,kn,qn){qn===void 0&&(qn=Fe.length);for(var ia=kn;ia<qn;ia++){var Ca=Fe.charCodeAt(ia);if(Ue(Ca))return ia<qn-1&&Ca===13&&Fe.charCodeAt(ia+1)===10?ia+2:ia+1}return-1}var hn=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Dt=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,xn=Object.prototype,jt=xn.hasOwnProperty,Vn=xn.toString,Rn=Object.hasOwn||function(Fe,kn){return jt.call(Fe,kn)},Tn=Array.isArray||function(Fe){return Vn.call(Fe)==="[object Array]"};function Ln(Fe){return new RegExp("^(?:"+Fe.replace(/ /g,"|")+")$")}function Sn(Fe){return Fe<=65535?String.fromCharCode(Fe):(Fe-=65536,String.fromCharCode((Fe>>10)+55296,(Fe&1023)+56320))}var An=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,In=function(kn,qn){this.line=kn,this.column=qn};In.prototype.offset=function(kn){return new In(this.line,this.column+kn)};var Mn=function(kn,qn,ia){this.start=qn,this.end=ia,kn.sourceFile!==null&&(this.source=kn.sourceFile)};function ra(Fe,kn){for(var qn=1,ia=0;;){var Ca=Pt(Fe,ia,kn);if(Ca<0)return new In(qn,kn-ia);++qn,ia=Ca}}var da={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},ua=!1;function aa(Fe){var kn={};for(var qn in da)kn[qn]=Fe&&Rn(Fe,qn)?Fe[qn]:da[qn];if(kn.ecmaVersion==="latest"?kn.ecmaVersion=1e8:kn.ecmaVersion==null?(!ua&&typeof console=="object"&&console.warn&&(ua=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),kn.ecmaVersion=11):kn.ecmaVersion>=2015&&(kn.ecmaVersion-=2009),kn.allowReserved==null&&(kn.allowReserved=kn.ecmaVersion<5),(!Fe||Fe.allowHashBang==null)&&(kn.allowHashBang=kn.ecmaVersion>=14),Tn(kn.onToken)){var ia=kn.onToken;kn.onToken=function(Ca){return ia.push(Ca)}}return Tn(kn.onComment)&&(kn.onComment=Nn(kn,kn.onComment)),kn}function Nn(Fe,kn){return function(qn,ia,Ca,Ba,Ma,Ya){var Za={type:qn?"Block":"Line",value:ia,start:Ca,end:Ba};Fe.locations&&(Za.loc=new Mn(this,Ma,Ya)),Fe.ranges&&(Za.range=[Ca,Ba]),kn.push(Za)}}var En=1,Zn=2,ha=4,xa=8,sa=16,Hn=32,bn=64,Xn=128,$n=256,kt=En|Zn|$n;function At(Fe,kn){return Zn|(Fe?ha:0)|(kn?xa:0)}var Dn=0,Qn=1,oa=2,na=3,la=4,ma=5,ca=function(kn,qn,ia){this.options=kn=aa(kn),this.sourceFile=kn.sourceFile,this.keywords=Ln(z[kn.ecmaVersion>=6?6:kn.sourceType==="module"?"5module":5]);var Ca="";kn.allowReserved!==!0&&(Ca=V[kn.ecmaVersion>=6?6:kn.ecmaVersion===5?5:3],kn.sourceType==="module"&&(Ca+=" await")),this.reservedWords=Ln(Ca);var Ba=(Ca?Ca+" ":"")+V.strict;this.reservedWordsStrict=Ln(Ba),this.reservedWordsStrictBind=Ln(Ba+" "+V.strictBind),this.input=String(qn),this.containsEsc=!1,ia?(this.pos=ia,this.lineStart=this.input.lastIndexOf(`
`,ia-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ie).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=Ce.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=kn.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&kn.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(En),this.regexpState=null,this.privateNameStack=[]},pe={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};ca.prototype.parse=function(){var kn=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(kn)},pe.inFunction.get=function(){return(this.currentVarScope().flags&Zn)>0},pe.inGenerator.get=function(){return(this.currentVarScope().flags&xa)>0&&!this.currentVarScope().inClassFieldInit},pe.inAsync.get=function(){return(this.currentVarScope().flags&ha)>0&&!this.currentVarScope().inClassFieldInit},pe.canAwait.get=function(){for(var Fe=this.scopeStack.length-1;Fe>=0;Fe--){var kn=this.scopeStack[Fe];if(kn.inClassFieldInit||kn.flags&$n)return!1;if(kn.flags&Zn)return(kn.flags&ha)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},pe.allowSuper.get=function(){var Fe=this.currentThisScope(),kn=Fe.flags,qn=Fe.inClassFieldInit;return(kn&bn)>0||qn||this.options.allowSuperOutsideMethod},pe.allowDirectSuper.get=function(){return(this.currentThisScope().flags&Xn)>0},pe.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},pe.allowNewDotTarget.get=function(){var Fe=this.currentThisScope(),kn=Fe.flags,qn=Fe.inClassFieldInit;return(kn&(Zn|$n))>0||qn},pe.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&$n)>0},ca.extend=function(){for(var kn=[],qn=arguments.length;qn--;)kn[qn]=arguments[qn];for(var ia=this,Ca=0;Ca<kn.length;Ca++)ia=kn[Ca](ia);return ia},ca.parse=function(kn,qn){return new this(qn,kn).parse()},ca.parseExpressionAt=function(kn,qn,ia){var Ca=new this(ia,kn,qn);return Ca.nextToken(),Ca.parseExpression()},ca.tokenizer=function(kn,qn){return new this(qn,kn)},Object.defineProperties(ca.prototype,pe);var Oe=ca.prototype,Ve=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Oe.strictDirective=function(Fe){if(this.options.ecmaVersion<5)return!1;for(;;){Dt.lastIndex=Fe,Fe+=Dt.exec(this.input)[0].length;var kn=Ve.exec(this.input.slice(Fe));if(!kn)return!1;if((kn[1]||kn[2])==="use strict"){Dt.lastIndex=Fe+kn[0].length;var qn=Dt.exec(this.input),ia=qn.index+qn[0].length,Ca=this.input.charAt(ia);return Ca===";"||Ca==="}"||Ie.test(qn[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(Ca)||Ca==="!"&&this.input.charAt(ia+1)==="=")}Fe+=kn[0].length,Dt.lastIndex=Fe,Fe+=Dt.exec(this.input)[0].length,this.input[Fe]===";"&&Fe++}},Oe.eat=function(Fe){return this.type===Fe?(this.next(),!0):!1},Oe.isContextual=function(Fe){return this.type===Ce.name&&this.value===Fe&&!this.containsEsc},Oe.eatContextual=function(Fe){return this.isContextual(Fe)?(this.next(),!0):!1},Oe.expectContextual=function(Fe){this.eatContextual(Fe)||this.unexpected()},Oe.canInsertSemicolon=function(){return this.type===Ce.eof||this.type===Ce.braceR||Ie.test(this.input.slice(this.lastTokEnd,this.start))},Oe.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},Oe.semicolon=function(){!this.eat(Ce.semi)&&!this.insertSemicolon()&&this.unexpected()},Oe.afterTrailingComma=function(Fe,kn){if(this.type===Fe)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),kn||this.next(),!0},Oe.expect=function(Fe){this.eat(Fe)||this.unexpected()},Oe.unexpected=function(Fe){this.raise(Fe??this.start,"Unexpected token")};var qe=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Oe.checkPatternErrors=function(Fe,kn){if(Fe){Fe.trailingComma>-1&&this.raiseRecoverable(Fe.trailingComma,"Comma is not permitted after the rest element");var qn=kn?Fe.parenthesizedAssign:Fe.parenthesizedBind;qn>-1&&this.raiseRecoverable(qn,kn?"Assigning to rvalue":"Parenthesized pattern")}},Oe.checkExpressionErrors=function(Fe,kn){if(!Fe)return!1;var qn=Fe.shorthandAssign,ia=Fe.doubleProto;if(!kn)return qn>=0||ia>=0;qn>=0&&this.raise(qn,"Shorthand property assignments are valid only in destructuring patterns"),ia>=0&&this.raiseRecoverable(ia,"Redefinition of __proto__ property")},Oe.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},Oe.isSimpleAssignTarget=function(Fe){return Fe.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(Fe.expression):Fe.type==="Identifier"||Fe.type==="MemberExpression"};var Et=ca.prototype;Et.parseTopLevel=function(Fe){var kn=Object.create(null);for(Fe.body||(Fe.body=[]);this.type!==Ce.eof;){var qn=this.parseStatement(null,!0,kn);Fe.body.push(qn)}if(this.inModule)for(var ia=0,Ca=Object.keys(this.undefinedExports);ia<Ca.length;ia+=1){var Ba=Ca[ia];this.raiseRecoverable(this.undefinedExports[Ba].start,"Export '"+Ba+"' is not defined")}return this.adaptDirectivePrologue(Fe.body),this.next(),Fe.sourceType=this.options.sourceType,this.finishNode(Fe,"Program")};var Lt={kind:"loop"},_n={kind:"switch"};Et.isLet=function(Fe){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Dt.lastIndex=this.pos;var kn=Dt.exec(this.input),qn=this.pos+kn[0].length,ia=this.input.charCodeAt(qn);if(ia===91||ia===92)return!0;if(Fe)return!1;if(ia===123||ia>55295&&ia<56320)return!0;if(ue(ia,!0)){for(var Ca=qn+1;le(ia=this.input.charCodeAt(Ca),!0);)++Ca;if(ia===92||ia>55295&&ia<56320)return!0;var Ba=this.input.slice(qn,Ca);if(!j.test(Ba))return!0}return!1},Et.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Dt.lastIndex=this.pos;var Fe=Dt.exec(this.input),kn=this.pos+Fe[0].length,qn;return!Ie.test(this.input.slice(this.pos,kn))&&this.input.slice(kn,kn+8)==="function"&&(kn+8===this.input.length||!(le(qn=this.input.charCodeAt(kn+8))||qn>55295&&qn<56320))},Et.parseStatement=function(Fe,kn,qn){var ia=this.type,Ca=this.startNode(),Ba;switch(this.isLet(Fe)&&(ia=Ce._var,Ba="let"),ia){case Ce._break:case Ce._continue:return this.parseBreakContinueStatement(Ca,ia.keyword);case Ce._debugger:return this.parseDebuggerStatement(Ca);case Ce._do:return this.parseDoStatement(Ca);case Ce._for:return this.parseForStatement(Ca);case Ce._function:return Fe&&(this.strict||Fe!=="if"&&Fe!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(Ca,!1,!Fe);case Ce._class:return Fe&&this.unexpected(),this.parseClass(Ca,!0);case Ce._if:return this.parseIfStatement(Ca);case Ce._return:return this.parseReturnStatement(Ca);case Ce._switch:return this.parseSwitchStatement(Ca);case Ce._throw:return this.parseThrowStatement(Ca);case Ce._try:return this.parseTryStatement(Ca);case Ce._const:case Ce._var:return Ba=Ba||this.value,Fe&&Ba!=="var"&&this.unexpected(),this.parseVarStatement(Ca,Ba);case Ce._while:return this.parseWhileStatement(Ca);case Ce._with:return this.parseWithStatement(Ca);case Ce.braceL:return this.parseBlock(!0,Ca);case Ce.semi:return this.parseEmptyStatement(Ca);case Ce._export:case Ce._import:if(this.options.ecmaVersion>10&&ia===Ce._import){Dt.lastIndex=this.pos;var Ma=Dt.exec(this.input),Ya=this.pos+Ma[0].length,Za=this.input.charCodeAt(Ya);if(Za===40||Za===46)return this.parseExpressionStatement(Ca,this.parseExpression())}return this.options.allowImportExportEverywhere||(kn||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),ia===Ce._import?this.parseImport(Ca):this.parseExport(Ca,qn);default:if(this.isAsyncFunction())return Fe&&this.unexpected(),this.next(),this.parseFunctionStatement(Ca,!0,!Fe);var ho=this.value,go=this.parseExpression();return ia===Ce.name&&go.type==="Identifier"&&this.eat(Ce.colon)?this.parseLabeledStatement(Ca,ho,go,Fe):this.parseExpressionStatement(Ca,go)}},Et.parseBreakContinueStatement=function(Fe,kn){var qn=kn==="break";this.next(),this.eat(Ce.semi)||this.insertSemicolon()?Fe.label=null:this.type!==Ce.name?this.unexpected():(Fe.label=this.parseIdent(),this.semicolon());for(var ia=0;ia<this.labels.length;++ia){var Ca=this.labels[ia];if((Fe.label==null||Ca.name===Fe.label.name)&&(Ca.kind!=null&&(qn||Ca.kind==="loop")||Fe.label&&qn))break}return ia===this.labels.length&&this.raise(Fe.start,"Unsyntactic "+kn),this.finishNode(Fe,qn?"BreakStatement":"ContinueStatement")},Et.parseDebuggerStatement=function(Fe){return this.next(),this.semicolon(),this.finishNode(Fe,"DebuggerStatement")},Et.parseDoStatement=function(Fe){return this.next(),this.labels.push(Lt),Fe.body=this.parseStatement("do"),this.labels.pop(),this.expect(Ce._while),Fe.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(Ce.semi):this.semicolon(),this.finishNode(Fe,"DoWhileStatement")},Et.parseForStatement=function(Fe){this.next();var kn=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Lt),this.enterScope(0),this.expect(Ce.parenL),this.type===Ce.semi)return kn>-1&&this.unexpected(kn),this.parseFor(Fe,null);var qn=this.isLet();if(this.type===Ce._var||this.type===Ce._const||qn){var ia=this.startNode(),Ca=qn?"let":this.value;return this.next(),this.parseVar(ia,!0,Ca),this.finishNode(ia,"VariableDeclaration"),(this.type===Ce._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&ia.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===Ce._in?kn>-1&&this.unexpected(kn):Fe.await=kn>-1),this.parseForIn(Fe,ia)):(kn>-1&&this.unexpected(kn),this.parseFor(Fe,ia))}var Ba=this.isContextual("let"),Ma=!1,Ya=new qe,Za=this.parseExpression(kn>-1?"await":!0,Ya);return this.type===Ce._in||(Ma=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===Ce._in?kn>-1&&this.unexpected(kn):Fe.await=kn>-1),Ba&&Ma&&this.raise(Za.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(Za,!1,Ya),this.checkLValPattern(Za),this.parseForIn(Fe,Za)):(this.checkExpressionErrors(Ya,!0),kn>-1&&this.unexpected(kn),this.parseFor(Fe,Za))},Et.parseFunctionStatement=function(Fe,kn,qn){return this.next(),this.parseFunction(Fe,wn|(qn?0:Cn),!1,kn)},Et.parseIfStatement=function(Fe){return this.next(),Fe.test=this.parseParenExpression(),Fe.consequent=this.parseStatement("if"),Fe.alternate=this.eat(Ce._else)?this.parseStatement("if"):null,this.finishNode(Fe,"IfStatement")},Et.parseReturnStatement=function(Fe){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(Ce.semi)||this.insertSemicolon()?Fe.argument=null:(Fe.argument=this.parseExpression(),this.semicolon()),this.finishNode(Fe,"ReturnStatement")},Et.parseSwitchStatement=function(Fe){this.next(),Fe.discriminant=this.parseParenExpression(),Fe.cases=[],this.expect(Ce.braceL),this.labels.push(_n),this.enterScope(0);for(var kn,qn=!1;this.type!==Ce.braceR;)if(this.type===Ce._case||this.type===Ce._default){var ia=this.type===Ce._case;kn&&this.finishNode(kn,"SwitchCase"),Fe.cases.push(kn=this.startNode()),kn.consequent=[],this.next(),ia?kn.test=this.parseExpression():(qn&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),qn=!0,kn.test=null),this.expect(Ce.colon)}else kn||this.unexpected(),kn.consequent.push(this.parseStatement(null));return this.exitScope(),kn&&this.finishNode(kn,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(Fe,"SwitchStatement")},Et.parseThrowStatement=function(Fe){return this.next(),Ie.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),Fe.argument=this.parseExpression(),this.semicolon(),this.finishNode(Fe,"ThrowStatement")};var vn=[];Et.parseCatchClauseParam=function(){var Fe=this.parseBindingAtom(),kn=Fe.type==="Identifier";return this.enterScope(kn?Hn:0),this.checkLValPattern(Fe,kn?la:oa),this.expect(Ce.parenR),Fe},Et.parseTryStatement=function(Fe){if(this.next(),Fe.block=this.parseBlock(),Fe.handler=null,this.type===Ce._catch){var kn=this.startNode();this.next(),this.eat(Ce.parenL)?kn.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),kn.param=null,this.enterScope(0)),kn.body=this.parseBlock(!1),this.exitScope(),Fe.handler=this.finishNode(kn,"CatchClause")}return Fe.finalizer=this.eat(Ce._finally)?this.parseBlock():null,!Fe.handler&&!Fe.finalizer&&this.raise(Fe.start,"Missing catch or finally clause"),this.finishNode(Fe,"TryStatement")},Et.parseVarStatement=function(Fe,kn,qn){return this.next(),this.parseVar(Fe,!1,kn,qn),this.semicolon(),this.finishNode(Fe,"VariableDeclaration")},Et.parseWhileStatement=function(Fe){return this.next(),Fe.test=this.parseParenExpression(),this.labels.push(Lt),Fe.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(Fe,"WhileStatement")},Et.parseWithStatement=function(Fe){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),Fe.object=this.parseParenExpression(),Fe.body=this.parseStatement("with"),this.finishNode(Fe,"WithStatement")},Et.parseEmptyStatement=function(Fe){return this.next(),this.finishNode(Fe,"EmptyStatement")},Et.parseLabeledStatement=function(Fe,kn,qn,ia){for(var Ca=0,Ba=this.labels;Ca<Ba.length;Ca+=1){var Ma=Ba[Ca];Ma.name===kn&&this.raise(qn.start,"Label '"+kn+"' is already declared")}for(var Ya=this.type.isLoop?"loop":this.type===Ce._switch?"switch":null,Za=this.labels.length-1;Za>=0;Za--){var ho=this.labels[Za];if(ho.statementStart===Fe.start)ho.statementStart=this.start,ho.kind=Ya;else break}return this.labels.push({name:kn,kind:Ya,statementStart:this.start}),Fe.body=this.parseStatement(ia?ia.indexOf("label")===-1?ia+"label":ia:"label"),this.labels.pop(),Fe.label=qn,this.finishNode(Fe,"LabeledStatement")},Et.parseExpressionStatement=function(Fe,kn){return Fe.expression=kn,this.semicolon(),this.finishNode(Fe,"ExpressionStatement")},Et.parseBlock=function(Fe,kn,qn){for(Fe===void 0&&(Fe=!0),kn===void 0&&(kn=this.startNode()),kn.body=[],this.expect(Ce.braceL),Fe&&this.enterScope(0);this.type!==Ce.braceR;){var ia=this.parseStatement(null);kn.body.push(ia)}return qn&&(this.strict=!1),this.next(),Fe&&this.exitScope(),this.finishNode(kn,"BlockStatement")},Et.parseFor=function(Fe,kn){return Fe.init=kn,this.expect(Ce.semi),Fe.test=this.type===Ce.semi?null:this.parseExpression(),this.expect(Ce.semi),Fe.update=this.type===Ce.parenR?null:this.parseExpression(),this.expect(Ce.parenR),Fe.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(Fe,"ForStatement")},Et.parseForIn=function(Fe,kn){var qn=this.type===Ce._in;return this.next(),kn.type==="VariableDeclaration"&&kn.declarations[0].init!=null&&(!qn||this.options.ecmaVersion<8||this.strict||kn.kind!=="var"||kn.declarations[0].id.type!=="Identifier")&&this.raise(kn.start,(qn?"for-in":"for-of")+" loop variable declaration may not have an initializer"),Fe.left=kn,Fe.right=qn?this.parseExpression():this.parseMaybeAssign(),this.expect(Ce.parenR),Fe.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(Fe,qn?"ForInStatement":"ForOfStatement")},Et.parseVar=function(Fe,kn,qn,ia){for(Fe.declarations=[],Fe.kind=qn;;){var Ca=this.startNode();if(this.parseVarId(Ca,qn),this.eat(Ce.eq)?Ca.init=this.parseMaybeAssign(kn):!ia&&qn==="const"&&!(this.type===Ce._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!ia&&Ca.id.type!=="Identifier"&&!(kn&&(this.type===Ce._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):Ca.init=null,Fe.declarations.push(this.finishNode(Ca,"VariableDeclarator")),!this.eat(Ce.comma))break}return Fe},Et.parseVarId=function(Fe,kn){Fe.id=this.parseBindingAtom(),this.checkLValPattern(Fe.id,kn==="var"?Qn:oa,!1)};var wn=1,Cn=2,Bn=4;Et.parseFunction=function(Fe,kn,qn,ia,Ca){this.initFunction(Fe),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!ia)&&(this.type===Ce.star&&kn&Cn&&this.unexpected(),Fe.generator=this.eat(Ce.star)),this.options.ecmaVersion>=8&&(Fe.async=!!ia),kn&wn&&(Fe.id=kn&Bn&&this.type!==Ce.name?null:this.parseIdent(),Fe.id&&!(kn&Cn)&&this.checkLValSimple(Fe.id,this.strict||Fe.generator||Fe.async?this.treatFunctionsAsVar?Qn:oa:na));var Ba=this.yieldPos,Ma=this.awaitPos,Ya=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(At(Fe.async,Fe.generator)),kn&wn||(Fe.id=this.type===Ce.name?this.parseIdent():null),this.parseFunctionParams(Fe),this.parseFunctionBody(Fe,qn,!1,Ca),this.yieldPos=Ba,this.awaitPos=Ma,this.awaitIdentPos=Ya,this.finishNode(Fe,kn&wn?"FunctionDeclaration":"FunctionExpression")},Et.parseFunctionParams=function(Fe){this.expect(Ce.parenL),Fe.params=this.parseBindingList(Ce.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},Et.parseClass=function(Fe,kn){this.next();var qn=this.strict;this.strict=!0,this.parseClassId(Fe,kn),this.parseClassSuper(Fe);var ia=this.enterClassBody(),Ca=this.startNode(),Ba=!1;for(Ca.body=[],this.expect(Ce.braceL);this.type!==Ce.braceR;){var Ma=this.parseClassElement(Fe.superClass!==null);Ma&&(Ca.body.push(Ma),Ma.type==="MethodDefinition"&&Ma.kind==="constructor"?(Ba&&this.raiseRecoverable(Ma.start,"Duplicate constructor in the same class"),Ba=!0):Ma.key&&Ma.key.type==="PrivateIdentifier"&&zn(ia,Ma)&&this.raiseRecoverable(Ma.key.start,"Identifier '#"+Ma.key.name+"' has already been declared"))}return this.strict=qn,this.next(),Fe.body=this.finishNode(Ca,"ClassBody"),this.exitClassBody(),this.finishNode(Fe,kn?"ClassDeclaration":"ClassExpression")},Et.parseClassElement=function(Fe){if(this.eat(Ce.semi))return null;var kn=this.options.ecmaVersion,qn=this.startNode(),ia="",Ca=!1,Ba=!1,Ma="method",Ya=!1;if(this.eatContextual("static")){if(kn>=13&&this.eat(Ce.braceL))return this.parseClassStaticBlock(qn),qn;this.isClassElementNameStart()||this.type===Ce.star?Ya=!0:ia="static"}if(qn.static=Ya,!ia&&kn>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===Ce.star)&&!this.canInsertSemicolon()?Ba=!0:ia="async"),!ia&&(kn>=9||!Ba)&&this.eat(Ce.star)&&(Ca=!0),!ia&&!Ba&&!Ca){var Za=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?Ma=Za:ia=Za)}if(ia?(qn.computed=!1,qn.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),qn.key.name=ia,this.finishNode(qn.key,"Identifier")):this.parseClassElementName(qn),kn<13||this.type===Ce.parenL||Ma!=="method"||Ca||Ba){var ho=!qn.static&&Fn(qn,"constructor"),go=ho&&Fe;ho&&Ma!=="method"&&this.raise(qn.key.start,"Constructor can't have get/set modifier"),qn.kind=ho?"constructor":Ma,this.parseClassMethod(qn,Ca,Ba,go)}else this.parseClassField(qn);return qn},Et.isClassElementNameStart=function(){return this.type===Ce.name||this.type===Ce.privateId||this.type===Ce.num||this.type===Ce.string||this.type===Ce.bracketL||this.type.keyword},Et.parseClassElementName=function(Fe){this.type===Ce.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),Fe.computed=!1,Fe.key=this.parsePrivateIdent()):this.parsePropertyName(Fe)},Et.parseClassMethod=function(Fe,kn,qn,ia){var Ca=Fe.key;Fe.kind==="constructor"?(kn&&this.raise(Ca.start,"Constructor can't be a generator"),qn&&this.raise(Ca.start,"Constructor can't be an async method")):Fe.static&&Fn(Fe,"prototype")&&this.raise(Ca.start,"Classes may not have a static property named prototype");var Ba=Fe.value=this.parseMethod(kn,qn,ia);return Fe.kind==="get"&&Ba.params.length!==0&&this.raiseRecoverable(Ba.start,"getter should have no params"),Fe.kind==="set"&&Ba.params.length!==1&&this.raiseRecoverable(Ba.start,"setter should have exactly one param"),Fe.kind==="set"&&Ba.params[0].type==="RestElement"&&this.raiseRecoverable(Ba.params[0].start,"Setter cannot use rest params"),this.finishNode(Fe,"MethodDefinition")},Et.parseClassField=function(Fe){if(Fn(Fe,"constructor")?this.raise(Fe.key.start,"Classes can't have a field named 'constructor'"):Fe.static&&Fn(Fe,"prototype")&&this.raise(Fe.key.start,"Classes can't have a static field named 'prototype'"),this.eat(Ce.eq)){var kn=this.currentThisScope(),qn=kn.inClassFieldInit;kn.inClassFieldInit=!0,Fe.value=this.parseMaybeAssign(),kn.inClassFieldInit=qn}else Fe.value=null;return this.semicolon(),this.finishNode(Fe,"PropertyDefinition")},Et.parseClassStaticBlock=function(Fe){Fe.body=[];var kn=this.labels;for(this.labels=[],this.enterScope($n|bn);this.type!==Ce.braceR;){var qn=this.parseStatement(null);Fe.body.push(qn)}return this.next(),this.exitScope(),this.labels=kn,this.finishNode(Fe,"StaticBlock")},Et.parseClassId=function(Fe,kn){this.type===Ce.name?(Fe.id=this.parseIdent(),kn&&this.checkLValSimple(Fe.id,oa,!1)):(kn===!0&&this.unexpected(),Fe.id=null)},Et.parseClassSuper=function(Fe){Fe.superClass=this.eat(Ce._extends)?this.parseExprSubscripts(null,!1):null},Et.enterClassBody=function(){var Fe={declared:Object.create(null),used:[]};return this.privateNameStack.push(Fe),Fe.declared},Et.exitClassBody=function(){var Fe=this.privateNameStack.pop(),kn=Fe.declared,qn=Fe.used;if(this.options.checkPrivateFields)for(var ia=this.privateNameStack.length,Ca=ia===0?null:this.privateNameStack[ia-1],Ba=0;Ba<qn.length;++Ba){var Ma=qn[Ba];Rn(kn,Ma.name)||(Ca?Ca.used.push(Ma):this.raiseRecoverable(Ma.start,"Private field '#"+Ma.name+"' must be declared in an enclosing class"))}};function zn(Fe,kn){var qn=kn.key.name,ia=Fe[qn],Ca="true";return kn.type==="MethodDefinition"&&(kn.kind==="get"||kn.kind==="set")&&(Ca=(kn.static?"s":"i")+kn.kind),ia==="iget"&&Ca==="iset"||ia==="iset"&&Ca==="iget"||ia==="sget"&&Ca==="sset"||ia==="sset"&&Ca==="sget"?(Fe[qn]="true",!1):ia?!0:(Fe[qn]=Ca,!1)}function Fn(Fe,kn){var qn=Fe.computed,ia=Fe.key;return!qn&&(ia.type==="Identifier"&&ia.name===kn||ia.type==="Literal"&&ia.value===kn)}Et.parseExportAllDeclaration=function(Fe,kn){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(Fe.exported=this.parseModuleExportName(),this.checkExport(kn,Fe.exported,this.lastTokStart)):Fe.exported=null),this.expectContextual("from"),this.type!==Ce.string&&this.unexpected(),Fe.source=this.parseExprAtom(),this.semicolon(),this.finishNode(Fe,"ExportAllDeclaration")},Et.parseExport=function(Fe,kn){if(this.next(),this.eat(Ce.star))return this.parseExportAllDeclaration(Fe,kn);if(this.eat(Ce._default))return this.checkExport(kn,"default",this.lastTokStart),Fe.declaration=this.parseExportDefaultDeclaration(),this.finishNode(Fe,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())Fe.declaration=this.parseExportDeclaration(Fe),Fe.declaration.type==="VariableDeclaration"?this.checkVariableExport(kn,Fe.declaration.declarations):this.checkExport(kn,Fe.declaration.id,Fe.declaration.id.start),Fe.specifiers=[],Fe.source=null;else{if(Fe.declaration=null,Fe.specifiers=this.parseExportSpecifiers(kn),this.eatContextual("from"))this.type!==Ce.string&&this.unexpected(),Fe.source=this.parseExprAtom();else{for(var qn=0,ia=Fe.specifiers;qn<ia.length;qn+=1){var Ca=ia[qn];this.checkUnreserved(Ca.local),this.checkLocalExport(Ca.local),Ca.local.type==="Literal"&&this.raise(Ca.local.start,"A string literal cannot be used as an exported binding without `from`.")}Fe.source=null}this.semicolon()}return this.finishNode(Fe,"ExportNamedDeclaration")},Et.parseExportDeclaration=function(Fe){return this.parseStatement(null)},Et.parseExportDefaultDeclaration=function(){var Fe;if(this.type===Ce._function||(Fe=this.isAsyncFunction())){var kn=this.startNode();return this.next(),Fe&&this.next(),this.parseFunction(kn,wn|Bn,!1,Fe)}else if(this.type===Ce._class){var qn=this.startNode();return this.parseClass(qn,"nullableID")}else{var ia=this.parseMaybeAssign();return this.semicolon(),ia}},Et.checkExport=function(Fe,kn,qn){Fe&&(typeof kn!="string"&&(kn=kn.type==="Identifier"?kn.name:kn.value),Rn(Fe,kn)&&this.raiseRecoverable(qn,"Duplicate export '"+kn+"'"),Fe[kn]=!0)},Et.checkPatternExport=function(Fe,kn){var qn=kn.type;if(qn==="Identifier")this.checkExport(Fe,kn,kn.start);else if(qn==="ObjectPattern")for(var ia=0,Ca=kn.properties;ia<Ca.length;ia+=1){var Ba=Ca[ia];this.checkPatternExport(Fe,Ba)}else if(qn==="ArrayPattern")for(var Ma=0,Ya=kn.elements;Ma<Ya.length;Ma+=1){var Za=Ya[Ma];Za&&this.checkPatternExport(Fe,Za)}else qn==="Property"?this.checkPatternExport(Fe,kn.value):qn==="AssignmentPattern"?this.checkPatternExport(Fe,kn.left):qn==="RestElement"?this.checkPatternExport(Fe,kn.argument):qn==="ParenthesizedExpression"&&this.checkPatternExport(Fe,kn.expression)},Et.checkVariableExport=function(Fe,kn){if(Fe)for(var qn=0,ia=kn;qn<ia.length;qn+=1){var Ca=ia[qn];this.checkPatternExport(Fe,Ca.id)}},Et.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},Et.parseExportSpecifier=function(Fe){var kn=this.startNode();return kn.local=this.parseModuleExportName(),kn.exported=this.eatContextual("as")?this.parseModuleExportName():kn.local,this.checkExport(Fe,kn.exported,kn.exported.start),this.finishNode(kn,"ExportSpecifier")},Et.parseExportSpecifiers=function(Fe){var kn=[],qn=!0;for(this.expect(Ce.braceL);!this.eat(Ce.braceR);){if(qn)qn=!1;else if(this.expect(Ce.comma),this.afterTrailingComma(Ce.braceR))break;kn.push(this.parseExportSpecifier(Fe))}return kn},Et.parseImport=function(Fe){return this.next(),this.type===Ce.string?(Fe.specifiers=vn,Fe.source=this.parseExprAtom()):(Fe.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),Fe.source=this.type===Ce.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(Fe,"ImportDeclaration")},Et.parseImportSpecifier=function(){var Fe=this.startNode();return Fe.imported=this.parseModuleExportName(),this.eatContextual("as")?Fe.local=this.parseIdent():(this.checkUnreserved(Fe.imported),Fe.local=Fe.imported),this.checkLValSimple(Fe.local,oa),this.finishNode(Fe,"ImportSpecifier")},Et.parseImportDefaultSpecifier=function(){var Fe=this.startNode();return Fe.local=this.parseIdent(),this.checkLValSimple(Fe.local,oa),this.finishNode(Fe,"ImportDefaultSpecifier")},Et.parseImportNamespaceSpecifier=function(){var Fe=this.startNode();return this.next(),this.expectContextual("as"),Fe.local=this.parseIdent(),this.checkLValSimple(Fe.local,oa),this.finishNode(Fe,"ImportNamespaceSpecifier")},Et.parseImportSpecifiers=function(){var Fe=[],kn=!0;if(this.type===Ce.name&&(Fe.push(this.parseImportDefaultSpecifier()),!this.eat(Ce.comma)))return Fe;if(this.type===Ce.star)return Fe.push(this.parseImportNamespaceSpecifier()),Fe;for(this.expect(Ce.braceL);!this.eat(Ce.braceR);){if(kn)kn=!1;else if(this.expect(Ce.comma),this.afterTrailingComma(Ce.braceR))break;Fe.push(this.parseImportSpecifier())}return Fe},Et.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===Ce.string){var Fe=this.parseLiteral(this.value);return An.test(Fe.value)&&this.raise(Fe.start,"An export name cannot include a lone surrogate."),Fe}return this.parseIdent(!0)},Et.adaptDirectivePrologue=function(Fe){for(var kn=0;kn<Fe.length&&this.isDirectiveCandidate(Fe[kn]);++kn)Fe[kn].directive=Fe[kn].expression.raw.slice(1,-1)},Et.isDirectiveCandidate=function(Fe){return this.options.ecmaVersion>=5&&Fe.type==="ExpressionStatement"&&Fe.expression.type==="Literal"&&typeof Fe.expression.value=="string"&&(this.input[Fe.start]==='"'||this.input[Fe.start]==="'")};var Gn=ca.prototype;Gn.toAssignable=function(Fe,kn,qn){if(this.options.ecmaVersion>=6&&Fe)switch(Fe.type){case"Identifier":this.inAsync&&Fe.name==="await"&&this.raise(Fe.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":Fe.type="ObjectPattern",qn&&this.checkPatternErrors(qn,!0);for(var ia=0,Ca=Fe.properties;ia<Ca.length;ia+=1){var Ba=Ca[ia];this.toAssignable(Ba,kn),Ba.type==="RestElement"&&(Ba.argument.type==="ArrayPattern"||Ba.argument.type==="ObjectPattern")&&this.raise(Ba.argument.start,"Unexpected token")}break;case"Property":Fe.kind!=="init"&&this.raise(Fe.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(Fe.value,kn);break;case"ArrayExpression":Fe.type="ArrayPattern",qn&&this.checkPatternErrors(qn,!0),this.toAssignableList(Fe.elements,kn);break;case"SpreadElement":Fe.type="RestElement",this.toAssignable(Fe.argument,kn),Fe.argument.type==="AssignmentPattern"&&this.raise(Fe.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":Fe.operator!=="="&&this.raise(Fe.left.end,"Only '=' operator can be used for specifying default value."),Fe.type="AssignmentPattern",delete Fe.operator,this.toAssignable(Fe.left,kn);break;case"ParenthesizedExpression":this.toAssignable(Fe.expression,kn,qn);break;case"ChainExpression":this.raiseRecoverable(Fe.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!kn)break;default:this.raise(Fe.start,"Assigning to rvalue")}else qn&&this.checkPatternErrors(qn,!0);return Fe},Gn.toAssignableList=function(Fe,kn){for(var qn=Fe.length,ia=0;ia<qn;ia++){var Ca=Fe[ia];Ca&&this.toAssignable(Ca,kn)}if(qn){var Ba=Fe[qn-1];this.options.ecmaVersion===6&&kn&&Ba&&Ba.type==="RestElement"&&Ba.argument.type!=="Identifier"&&this.unexpected(Ba.argument.start)}return Fe},Gn.parseSpread=function(Fe){var kn=this.startNode();return this.next(),kn.argument=this.parseMaybeAssign(!1,Fe),this.finishNode(kn,"SpreadElement")},Gn.parseRestBinding=function(){var Fe=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==Ce.name&&this.unexpected(),Fe.argument=this.parseBindingAtom(),this.finishNode(Fe,"RestElement")},Gn.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case Ce.bracketL:var Fe=this.startNode();return this.next(),Fe.elements=this.parseBindingList(Ce.bracketR,!0,!0),this.finishNode(Fe,"ArrayPattern");case Ce.braceL:return this.parseObj(!0)}return this.parseIdent()},Gn.parseBindingList=function(Fe,kn,qn,ia){for(var Ca=[],Ba=!0;!this.eat(Fe);)if(Ba?Ba=!1:this.expect(Ce.comma),kn&&this.type===Ce.comma)Ca.push(null);else{if(qn&&this.afterTrailingComma(Fe))break;if(this.type===Ce.ellipsis){var Ma=this.parseRestBinding();this.parseBindingListItem(Ma),Ca.push(Ma),this.type===Ce.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(Fe);break}else Ca.push(this.parseAssignableListItem(ia))}return Ca},Gn.parseAssignableListItem=function(Fe){var kn=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(kn),kn},Gn.parseBindingListItem=function(Fe){return Fe},Gn.parseMaybeDefault=function(Fe,kn,qn){if(qn=qn||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(Ce.eq))return qn;var ia=this.startNodeAt(Fe,kn);return ia.left=qn,ia.right=this.parseMaybeAssign(),this.finishNode(ia,"AssignmentPattern")},Gn.checkLValSimple=function(Fe,kn,qn){kn===void 0&&(kn=Dn);var ia=kn!==Dn;switch(Fe.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(Fe.name)&&this.raiseRecoverable(Fe.start,(ia?"Binding ":"Assigning to ")+Fe.name+" in strict mode"),ia&&(kn===oa&&Fe.name==="let"&&this.raiseRecoverable(Fe.start,"let is disallowed as a lexically bound name"),qn&&(Rn(qn,Fe.name)&&this.raiseRecoverable(Fe.start,"Argument name clash"),qn[Fe.name]=!0),kn!==ma&&this.declareName(Fe.name,kn,Fe.start));break;case"ChainExpression":this.raiseRecoverable(Fe.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":ia&&this.raiseRecoverable(Fe.start,"Binding member expression");break;case"ParenthesizedExpression":return ia&&this.raiseRecoverable(Fe.start,"Binding parenthesized expression"),this.checkLValSimple(Fe.expression,kn,qn);default:this.raise(Fe.start,(ia?"Binding":"Assigning to")+" rvalue")}},Gn.checkLValPattern=function(Fe,kn,qn){switch(kn===void 0&&(kn=Dn),Fe.type){case"ObjectPattern":for(var ia=0,Ca=Fe.properties;ia<Ca.length;ia+=1){var Ba=Ca[ia];this.checkLValInnerPattern(Ba,kn,qn)}break;case"ArrayPattern":for(var Ma=0,Ya=Fe.elements;Ma<Ya.length;Ma+=1){var Za=Ya[Ma];Za&&this.checkLValInnerPattern(Za,kn,qn)}break;default:this.checkLValSimple(Fe,kn,qn)}},Gn.checkLValInnerPattern=function(Fe,kn,qn){switch(kn===void 0&&(kn=Dn),Fe.type){case"Property":this.checkLValInnerPattern(Fe.value,kn,qn);break;case"AssignmentPattern":this.checkLValPattern(Fe.left,kn,qn);break;case"RestElement":this.checkLValPattern(Fe.argument,kn,qn);break;default:this.checkLValPattern(Fe,kn,qn)}};var Kn=function(kn,qn,ia,Ca,Ba){this.token=kn,this.isExpr=!!qn,this.preserveSpace=!!ia,this.override=Ca,this.generator=!!Ba},Wn={b_stat:new Kn("{",!1),b_expr:new Kn("{",!0),b_tmpl:new Kn("${",!1),p_stat:new Kn("(",!1),p_expr:new Kn("(",!0),q_tmpl:new Kn("`",!0,!0,function(Fe){return Fe.tryReadTemplateToken()}),f_stat:new Kn("function",!1),f_expr:new Kn("function",!0),f_expr_gen:new Kn("function",!0,!1,null,!0),f_gen:new Kn("function",!1,!1,null,!0)},ea=ca.prototype;ea.initialContext=function(){return[Wn.b_stat]},ea.curContext=function(){return this.context[this.context.length-1]},ea.braceIsBlock=function(Fe){var kn=this.curContext();return kn===Wn.f_expr||kn===Wn.f_stat?!0:Fe===Ce.colon&&(kn===Wn.b_stat||kn===Wn.b_expr)?!kn.isExpr:Fe===Ce._return||Fe===Ce.name&&this.exprAllowed?Ie.test(this.input.slice(this.lastTokEnd,this.start)):Fe===Ce._else||Fe===Ce.semi||Fe===Ce.eof||Fe===Ce.parenR||Fe===Ce.arrow?!0:Fe===Ce.braceL?kn===Wn.b_stat:Fe===Ce._var||Fe===Ce._const||Fe===Ce.name?!1:!this.exprAllowed},ea.inGeneratorContext=function(){for(var Fe=this.context.length-1;Fe>=1;Fe--){var kn=this.context[Fe];if(kn.token==="function")return kn.generator}return!1},ea.updateContext=function(Fe){var kn,qn=this.type;qn.keyword&&Fe===Ce.dot?this.exprAllowed=!1:(kn=qn.updateContext)?kn.call(this,Fe):this.exprAllowed=qn.beforeExpr},ea.overrideContext=function(Fe){this.curContext()!==Fe&&(this.context[this.context.length-1]=Fe)},Ce.parenR.updateContext=Ce.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var Fe=this.context.pop();Fe===Wn.b_stat&&this.curContext().token==="function"&&(Fe=this.context.pop()),this.exprAllowed=!Fe.isExpr},Ce.braceL.updateContext=function(Fe){this.context.push(this.braceIsBlock(Fe)?Wn.b_stat:Wn.b_expr),this.exprAllowed=!0},Ce.dollarBraceL.updateContext=function(){this.context.push(Wn.b_tmpl),this.exprAllowed=!0},Ce.parenL.updateContext=function(Fe){var kn=Fe===Ce._if||Fe===Ce._for||Fe===Ce._with||Fe===Ce._while;this.context.push(kn?Wn.p_stat:Wn.p_expr),this.exprAllowed=!0},Ce.incDec.updateContext=function(){},Ce._function.updateContext=Ce._class.updateContext=function(Fe){Fe.beforeExpr&&Fe!==Ce._else&&!(Fe===Ce.semi&&this.curContext()!==Wn.p_stat)&&!(Fe===Ce._return&&Ie.test(this.input.slice(this.lastTokEnd,this.start)))&&!((Fe===Ce.colon||Fe===Ce.braceL)&&this.curContext()===Wn.b_stat)?this.context.push(Wn.f_expr):this.context.push(Wn.f_stat),this.exprAllowed=!1},Ce.backQuote.updateContext=function(){this.curContext()===Wn.q_tmpl?this.context.pop():this.context.push(Wn.q_tmpl),this.exprAllowed=!1},Ce.star.updateContext=function(Fe){if(Fe===Ce._function){var kn=this.context.length-1;this.context[kn]===Wn.f_expr?this.context[kn]=Wn.f_expr_gen:this.context[kn]=Wn.f_gen}this.exprAllowed=!0},Ce.name.updateContext=function(Fe){var kn=!1;this.options.ecmaVersion>=6&&Fe!==Ce.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(kn=!0),this.exprAllowed=kn};var Pn=ca.prototype;Pn.checkPropClash=function(Fe,kn,qn){if(!(this.options.ecmaVersion>=9&&Fe.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(Fe.computed||Fe.method||Fe.shorthand))){var ia=Fe.key,Ca;switch(ia.type){case"Identifier":Ca=ia.name;break;case"Literal":Ca=String(ia.value);break;default:return}var Ba=Fe.kind;if(this.options.ecmaVersion>=6){Ca==="__proto__"&&Ba==="init"&&(kn.proto&&(qn?qn.doubleProto<0&&(qn.doubleProto=ia.start):this.raiseRecoverable(ia.start,"Redefinition of __proto__ property")),kn.proto=!0);return}Ca="$"+Ca;var Ma=kn[Ca];if(Ma){var Ya;Ba==="init"?Ya=this.strict&&Ma.init||Ma.get||Ma.set:Ya=Ma.init||Ma[Ba],Ya&&this.raiseRecoverable(ia.start,"Redefinition of property")}else Ma=kn[Ca]={init:!1,get:!1,set:!1};Ma[Ba]=!0}},Pn.parseExpression=function(Fe,kn){var qn=this.start,ia=this.startLoc,Ca=this.parseMaybeAssign(Fe,kn);if(this.type===Ce.comma){var Ba=this.startNodeAt(qn,ia);for(Ba.expressions=[Ca];this.eat(Ce.comma);)Ba.expressions.push(this.parseMaybeAssign(Fe,kn));return this.finishNode(Ba,"SequenceExpression")}return Ca},Pn.parseMaybeAssign=function(Fe,kn,qn){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(Fe);this.exprAllowed=!1}var ia=!1,Ca=-1,Ba=-1,Ma=-1;kn?(Ca=kn.parenthesizedAssign,Ba=kn.trailingComma,Ma=kn.doubleProto,kn.parenthesizedAssign=kn.trailingComma=-1):(kn=new qe,ia=!0);var Ya=this.start,Za=this.startLoc;(this.type===Ce.parenL||this.type===Ce.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=Fe==="await");var ho=this.parseMaybeConditional(Fe,kn);if(qn&&(ho=qn.call(this,ho,Ya,Za)),this.type.isAssign){var go=this.startNodeAt(Ya,Za);return go.operator=this.value,this.type===Ce.eq&&(ho=this.toAssignable(ho,!1,kn)),ia||(kn.parenthesizedAssign=kn.trailingComma=kn.doubleProto=-1),kn.shorthandAssign>=ho.start&&(kn.shorthandAssign=-1),this.type===Ce.eq?this.checkLValPattern(ho):this.checkLValSimple(ho),go.left=ho,this.next(),go.right=this.parseMaybeAssign(Fe),Ma>-1&&(kn.doubleProto=Ma),this.finishNode(go,"AssignmentExpression")}else ia&&this.checkExpressionErrors(kn,!0);return Ca>-1&&(kn.parenthesizedAssign=Ca),Ba>-1&&(kn.trailingComma=Ba),ho},Pn.parseMaybeConditional=function(Fe,kn){var qn=this.start,ia=this.startLoc,Ca=this.parseExprOps(Fe,kn);if(this.checkExpressionErrors(kn))return Ca;if(this.eat(Ce.question)){var Ba=this.startNodeAt(qn,ia);return Ba.test=Ca,Ba.consequent=this.parseMaybeAssign(),this.expect(Ce.colon),Ba.alternate=this.parseMaybeAssign(Fe),this.finishNode(Ba,"ConditionalExpression")}return Ca},Pn.parseExprOps=function(Fe,kn){var qn=this.start,ia=this.startLoc,Ca=this.parseMaybeUnary(kn,!1,!1,Fe);return this.checkExpressionErrors(kn)||Ca.start===qn&&Ca.type==="ArrowFunctionExpression"?Ca:this.parseExprOp(Ca,qn,ia,-1,Fe)},Pn.parseExprOp=function(Fe,kn,qn,ia,Ca){var Ba=this.type.binop;if(Ba!=null&&(!Ca||this.type!==Ce._in)&&Ba>ia){var Ma=this.type===Ce.logicalOR||this.type===Ce.logicalAND,Ya=this.type===Ce.coalesce;Ya&&(Ba=Ce.logicalAND.binop);var Za=this.value;this.next();var ho=this.start,go=this.startLoc,To=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,Ca),ho,go,Ba,Ca),Go=this.buildBinary(kn,qn,Fe,To,Za,Ma||Ya);return(Ma&&this.type===Ce.coalesce||Ya&&(this.type===Ce.logicalOR||this.type===Ce.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(Go,kn,qn,ia,Ca)}return Fe},Pn.buildBinary=function(Fe,kn,qn,ia,Ca,Ba){ia.type==="PrivateIdentifier"&&this.raise(ia.start,"Private identifier can only be left side of binary expression");var Ma=this.startNodeAt(Fe,kn);return Ma.left=qn,Ma.operator=Ca,Ma.right=ia,this.finishNode(Ma,Ba?"LogicalExpression":"BinaryExpression")},Pn.parseMaybeUnary=function(Fe,kn,qn,ia){var Ca=this.start,Ba=this.startLoc,Ma;if(this.isContextual("await")&&this.canAwait)Ma=this.parseAwait(ia),kn=!0;else if(this.type.prefix){var Ya=this.startNode(),Za=this.type===Ce.incDec;Ya.operator=this.value,Ya.prefix=!0,this.next(),Ya.argument=this.parseMaybeUnary(null,!0,Za,ia),this.checkExpressionErrors(Fe,!0),Za?this.checkLValSimple(Ya.argument):this.strict&&Ya.operator==="delete"&&Ya.argument.type==="Identifier"?this.raiseRecoverable(Ya.start,"Deleting local variable in strict mode"):Ya.operator==="delete"&&jn(Ya.argument)?this.raiseRecoverable(Ya.start,"Private fields can not be deleted"):kn=!0,Ma=this.finishNode(Ya,Za?"UpdateExpression":"UnaryExpression")}else if(!kn&&this.type===Ce.privateId)(ia||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),Ma=this.parsePrivateIdent(),this.type!==Ce._in&&this.unexpected();else{if(Ma=this.parseExprSubscripts(Fe,ia),this.checkExpressionErrors(Fe))return Ma;for(;this.type.postfix&&!this.canInsertSemicolon();){var ho=this.startNodeAt(Ca,Ba);ho.operator=this.value,ho.prefix=!1,ho.argument=Ma,this.checkLValSimple(Ma),this.next(),Ma=this.finishNode(ho,"UpdateExpression")}}if(!qn&&this.eat(Ce.starstar))if(kn)this.unexpected(this.lastTokStart);else return this.buildBinary(Ca,Ba,Ma,this.parseMaybeUnary(null,!1,!1,ia),"**",!1);else return Ma};function jn(Fe){return Fe.type==="MemberExpression"&&Fe.property.type==="PrivateIdentifier"||Fe.type==="ChainExpression"&&jn(Fe.expression)}Pn.parseExprSubscripts=function(Fe,kn){var qn=this.start,ia=this.startLoc,Ca=this.parseExprAtom(Fe,kn);if(Ca.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return Ca;var Ba=this.parseSubscripts(Ca,qn,ia,!1,kn);return Fe&&Ba.type==="MemberExpression"&&(Fe.parenthesizedAssign>=Ba.start&&(Fe.parenthesizedAssign=-1),Fe.parenthesizedBind>=Ba.start&&(Fe.parenthesizedBind=-1),Fe.trailingComma>=Ba.start&&(Fe.trailingComma=-1)),Ba},Pn.parseSubscripts=function(Fe,kn,qn,ia,Ca){for(var Ba=this.options.ecmaVersion>=8&&Fe.type==="Identifier"&&Fe.name==="async"&&this.lastTokEnd===Fe.end&&!this.canInsertSemicolon()&&Fe.end-Fe.start===5&&this.potentialArrowAt===Fe.start,Ma=!1;;){var Ya=this.parseSubscript(Fe,kn,qn,ia,Ba,Ma,Ca);if(Ya.optional&&(Ma=!0),Ya===Fe||Ya.type==="ArrowFunctionExpression"){if(Ma){var Za=this.startNodeAt(kn,qn);Za.expression=Ya,Ya=this.finishNode(Za,"ChainExpression")}return Ya}Fe=Ya}},Pn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(Ce.arrow)},Pn.parseSubscriptAsyncArrow=function(Fe,kn,qn,ia){return this.parseArrowExpression(this.startNodeAt(Fe,kn),qn,!0,ia)},Pn.parseSubscript=function(Fe,kn,qn,ia,Ca,Ba,Ma){var Ya=this.options.ecmaVersion>=11,Za=Ya&&this.eat(Ce.questionDot);ia&&Za&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var ho=this.eat(Ce.bracketL);if(ho||Za&&this.type!==Ce.parenL&&this.type!==Ce.backQuote||this.eat(Ce.dot)){var go=this.startNodeAt(kn,qn);go.object=Fe,ho?(go.property=this.parseExpression(),this.expect(Ce.bracketR)):this.type===Ce.privateId&&Fe.type!=="Super"?go.property=this.parsePrivateIdent():go.property=this.parseIdent(this.options.allowReserved!=="never"),go.computed=!!ho,Ya&&(go.optional=Za),Fe=this.finishNode(go,"MemberExpression")}else if(!ia&&this.eat(Ce.parenL)){var To=new qe,Go=this.yieldPos,Xo=this.awaitPos,Ho=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var tr=this.parseExprList(Ce.parenR,this.options.ecmaVersion>=8,!1,To);if(Ca&&!Za&&this.shouldParseAsyncArrow())return this.checkPatternErrors(To,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=Go,this.awaitPos=Xo,this.awaitIdentPos=Ho,this.parseSubscriptAsyncArrow(kn,qn,tr,Ma);this.checkExpressionErrors(To,!0),this.yieldPos=Go||this.yieldPos,this.awaitPos=Xo||this.awaitPos,this.awaitIdentPos=Ho||this.awaitIdentPos;var Wo=this.startNodeAt(kn,qn);Wo.callee=Fe,Wo.arguments=tr,Ya&&(Wo.optional=Za),Fe=this.finishNode(Wo,"CallExpression")}else if(this.type===Ce.backQuote){(Za||Ba)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Qo=this.startNodeAt(kn,qn);Qo.tag=Fe,Qo.quasi=this.parseTemplate({isTagged:!0}),Fe=this.finishNode(Qo,"TaggedTemplateExpression")}return Fe},Pn.parseExprAtom=function(Fe,kn,qn){this.type===Ce.slash&&this.readRegexp();var ia,Ca=this.potentialArrowAt===this.start;switch(this.type){case Ce._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),ia=this.startNode(),this.next(),this.type===Ce.parenL&&!this.allowDirectSuper&&this.raise(ia.start,"super() call outside constructor of a subclass"),this.type!==Ce.dot&&this.type!==Ce.bracketL&&this.type!==Ce.parenL&&this.unexpected(),this.finishNode(ia,"Super");case Ce._this:return ia=this.startNode(),this.next(),this.finishNode(ia,"ThisExpression");case Ce.name:var Ba=this.start,Ma=this.startLoc,Ya=this.containsEsc,Za=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!Ya&&Za.name==="async"&&!this.canInsertSemicolon()&&this.eat(Ce._function))return this.overrideContext(Wn.f_expr),this.parseFunction(this.startNodeAt(Ba,Ma),0,!1,!0,kn);if(Ca&&!this.canInsertSemicolon()){if(this.eat(Ce.arrow))return this.parseArrowExpression(this.startNodeAt(Ba,Ma),[Za],!1,kn);if(this.options.ecmaVersion>=8&&Za.name==="async"&&this.type===Ce.name&&!Ya&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return Za=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(Ce.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(Ba,Ma),[Za],!0,kn)}return Za;case Ce.regexp:var ho=this.value;return ia=this.parseLiteral(ho.value),ia.regex={pattern:ho.pattern,flags:ho.flags},ia;case Ce.num:case Ce.string:return this.parseLiteral(this.value);case Ce._null:case Ce._true:case Ce._false:return ia=this.startNode(),ia.value=this.type===Ce._null?null:this.type===Ce._true,ia.raw=this.type.keyword,this.next(),this.finishNode(ia,"Literal");case Ce.parenL:var go=this.start,To=this.parseParenAndDistinguishExpression(Ca,kn);return Fe&&(Fe.parenthesizedAssign<0&&!this.isSimpleAssignTarget(To)&&(Fe.parenthesizedAssign=go),Fe.parenthesizedBind<0&&(Fe.parenthesizedBind=go)),To;case Ce.bracketL:return ia=this.startNode(),this.next(),ia.elements=this.parseExprList(Ce.bracketR,!0,!0,Fe),this.finishNode(ia,"ArrayExpression");case Ce.braceL:return this.overrideContext(Wn.b_expr),this.parseObj(!1,Fe);case Ce._function:return ia=this.startNode(),this.next(),this.parseFunction(ia,0);case Ce._class:return this.parseClass(this.startNode(),!1);case Ce._new:return this.parseNew();case Ce.backQuote:return this.parseTemplate();case Ce._import:return this.options.ecmaVersion>=11?this.parseExprImport(qn):this.unexpected();default:return this.parseExprAtomDefault()}},Pn.parseExprAtomDefault=function(){this.unexpected()},Pn.parseExprImport=function(Fe){var kn=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var qn=this.parseIdent(!0);if(this.type===Ce.parenL&&!Fe)return this.parseDynamicImport(kn);if(this.type===Ce.dot)return kn.meta=qn,this.parseImportMeta(kn);this.unexpected()},Pn.parseDynamicImport=function(Fe){if(this.next(),Fe.source=this.parseMaybeAssign(),!this.eat(Ce.parenR)){var kn=this.start;this.eat(Ce.comma)&&this.eat(Ce.parenR)?this.raiseRecoverable(kn,"Trailing comma is not allowed in import()"):this.unexpected(kn)}return this.finishNode(Fe,"ImportExpression")},Pn.parseImportMeta=function(Fe){this.next();var kn=this.containsEsc;return Fe.property=this.parseIdent(!0),Fe.property.name!=="meta"&&this.raiseRecoverable(Fe.property.start,"The only valid meta property for import is 'import.meta'"),kn&&this.raiseRecoverable(Fe.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(Fe.start,"Cannot use 'import.meta' outside a module"),this.finishNode(Fe,"MetaProperty")},Pn.parseLiteral=function(Fe){var kn=this.startNode();return kn.value=Fe,kn.raw=this.input.slice(this.start,this.end),kn.raw.charCodeAt(kn.raw.length-1)===110&&(kn.bigint=kn.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(kn,"Literal")},Pn.parseParenExpression=function(){this.expect(Ce.parenL);var Fe=this.parseExpression();return this.expect(Ce.parenR),Fe},Pn.shouldParseArrow=function(Fe){return!this.canInsertSemicolon()},Pn.parseParenAndDistinguishExpression=function(Fe,kn){var qn=this.start,ia=this.startLoc,Ca,Ba=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var Ma=this.start,Ya=this.startLoc,Za=[],ho=!0,go=!1,To=new qe,Go=this.yieldPos,Xo=this.awaitPos,Ho;for(this.yieldPos=0,this.awaitPos=0;this.type!==Ce.parenR;)if(ho?ho=!1:this.expect(Ce.comma),Ba&&this.afterTrailingComma(Ce.parenR,!0)){go=!0;break}else if(this.type===Ce.ellipsis){Ho=this.start,Za.push(this.parseParenItem(this.parseRestBinding())),this.type===Ce.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else Za.push(this.parseMaybeAssign(!1,To,this.parseParenItem));var tr=this.lastTokEnd,Wo=this.lastTokEndLoc;if(this.expect(Ce.parenR),Fe&&this.shouldParseArrow(Za)&&this.eat(Ce.arrow))return this.checkPatternErrors(To,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=Go,this.awaitPos=Xo,this.parseParenArrowList(qn,ia,Za,kn);(!Za.length||go)&&this.unexpected(this.lastTokStart),Ho&&this.unexpected(Ho),this.checkExpressionErrors(To,!0),this.yieldPos=Go||this.yieldPos,this.awaitPos=Xo||this.awaitPos,Za.length>1?(Ca=this.startNodeAt(Ma,Ya),Ca.expressions=Za,this.finishNodeAt(Ca,"SequenceExpression",tr,Wo)):Ca=Za[0]}else Ca=this.parseParenExpression();if(this.options.preserveParens){var Qo=this.startNodeAt(qn,ia);return Qo.expression=Ca,this.finishNode(Qo,"ParenthesizedExpression")}else return Ca},Pn.parseParenItem=function(Fe){return Fe},Pn.parseParenArrowList=function(Fe,kn,qn,ia){return this.parseArrowExpression(this.startNodeAt(Fe,kn),qn,!1,ia)};var On=[];Pn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var Fe=this.startNode(),kn=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(Ce.dot)){Fe.meta=kn;var qn=this.containsEsc;return Fe.property=this.parseIdent(!0),Fe.property.name!=="target"&&this.raiseRecoverable(Fe.property.start,"The only valid meta property for new is 'new.target'"),qn&&this.raiseRecoverable(Fe.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(Fe.start,"'new.target' can only be used in functions and class static block"),this.finishNode(Fe,"MetaProperty")}var ia=this.start,Ca=this.startLoc;return Fe.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),ia,Ca,!0,!1),this.eat(Ce.parenL)?Fe.arguments=this.parseExprList(Ce.parenR,this.options.ecmaVersion>=8,!1):Fe.arguments=On,this.finishNode(Fe,"NewExpression")},Pn.parseTemplateElement=function(Fe){var kn=Fe.isTagged,qn=this.startNode();return this.type===Ce.invalidTemplate?(kn||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),qn.value={raw:this.value,cooked:null}):qn.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),qn.tail=this.type===Ce.backQuote,this.finishNode(qn,"TemplateElement")},Pn.parseTemplate=function(Fe){Fe===void 0&&(Fe={});var kn=Fe.isTagged;kn===void 0&&(kn=!1);var qn=this.startNode();this.next(),qn.expressions=[];var ia=this.parseTemplateElement({isTagged:kn});for(qn.quasis=[ia];!ia.tail;)this.type===Ce.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Ce.dollarBraceL),qn.expressions.push(this.parseExpression()),this.expect(Ce.braceR),qn.quasis.push(ia=this.parseTemplateElement({isTagged:kn}));return this.next(),this.finishNode(qn,"TemplateLiteral")},Pn.isAsyncProp=function(Fe){return!Fe.computed&&Fe.key.type==="Identifier"&&Fe.key.name==="async"&&(this.type===Ce.name||this.type===Ce.num||this.type===Ce.string||this.type===Ce.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===Ce.star)&&!Ie.test(this.input.slice(this.lastTokEnd,this.start))},Pn.parseObj=function(Fe,kn){var qn=this.startNode(),ia=!0,Ca={};for(qn.properties=[],this.next();!this.eat(Ce.braceR);){if(ia)ia=!1;else if(this.expect(Ce.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(Ce.braceR))break;var Ba=this.parseProperty(Fe,kn);Fe||this.checkPropClash(Ba,Ca,kn),qn.properties.push(Ba)}return this.finishNode(qn,Fe?"ObjectPattern":"ObjectExpression")},Pn.parseProperty=function(Fe,kn){var qn=this.startNode(),ia,Ca,Ba,Ma;if(this.options.ecmaVersion>=9&&this.eat(Ce.ellipsis))return Fe?(qn.argument=this.parseIdent(!1),this.type===Ce.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(qn,"RestElement")):(qn.argument=this.parseMaybeAssign(!1,kn),this.type===Ce.comma&&kn&&kn.trailingComma<0&&(kn.trailingComma=this.start),this.finishNode(qn,"SpreadElement"));this.options.ecmaVersion>=6&&(qn.method=!1,qn.shorthand=!1,(Fe||kn)&&(Ba=this.start,Ma=this.startLoc),Fe||(ia=this.eat(Ce.star)));var Ya=this.containsEsc;return this.parsePropertyName(qn),!Fe&&!Ya&&this.options.ecmaVersion>=8&&!ia&&this.isAsyncProp(qn)?(Ca=!0,ia=this.options.ecmaVersion>=9&&this.eat(Ce.star),this.parsePropertyName(qn)):Ca=!1,this.parsePropertyValue(qn,Fe,ia,Ca,Ba,Ma,kn,Ya),this.finishNode(qn,"Property")},Pn.parseGetterSetter=function(Fe){Fe.kind=Fe.key.name,this.parsePropertyName(Fe),Fe.value=this.parseMethod(!1);var kn=Fe.kind==="get"?0:1;if(Fe.value.params.length!==kn){var qn=Fe.value.start;Fe.kind==="get"?this.raiseRecoverable(qn,"getter should have no params"):this.raiseRecoverable(qn,"setter should have exactly one param")}else Fe.kind==="set"&&Fe.value.params[0].type==="RestElement"&&this.raiseRecoverable(Fe.value.params[0].start,"Setter cannot use rest params")},Pn.parsePropertyValue=function(Fe,kn,qn,ia,Ca,Ba,Ma,Ya){(qn||ia)&&this.type===Ce.colon&&this.unexpected(),this.eat(Ce.colon)?(Fe.value=kn?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,Ma),Fe.kind="init"):this.options.ecmaVersion>=6&&this.type===Ce.parenL?(kn&&this.unexpected(),Fe.kind="init",Fe.method=!0,Fe.value=this.parseMethod(qn,ia)):!kn&&!Ya&&this.options.ecmaVersion>=5&&!Fe.computed&&Fe.key.type==="Identifier"&&(Fe.key.name==="get"||Fe.key.name==="set")&&this.type!==Ce.comma&&this.type!==Ce.braceR&&this.type!==Ce.eq?((qn||ia)&&this.unexpected(),this.parseGetterSetter(Fe)):this.options.ecmaVersion>=6&&!Fe.computed&&Fe.key.type==="Identifier"?((qn||ia)&&this.unexpected(),this.checkUnreserved(Fe.key),Fe.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=Ca),Fe.kind="init",kn?Fe.value=this.parseMaybeDefault(Ca,Ba,this.copyNode(Fe.key)):this.type===Ce.eq&&Ma?(Ma.shorthandAssign<0&&(Ma.shorthandAssign=this.start),Fe.value=this.parseMaybeDefault(Ca,Ba,this.copyNode(Fe.key))):Fe.value=this.copyNode(Fe.key),Fe.shorthand=!0):this.unexpected()},Pn.parsePropertyName=function(Fe){if(this.options.ecmaVersion>=6){if(this.eat(Ce.bracketL))return Fe.computed=!0,Fe.key=this.parseMaybeAssign(),this.expect(Ce.bracketR),Fe.key;Fe.computed=!1}return Fe.key=this.type===Ce.num||this.type===Ce.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},Pn.initFunction=function(Fe){Fe.id=null,this.options.ecmaVersion>=6&&(Fe.generator=Fe.expression=!1),this.options.ecmaVersion>=8&&(Fe.async=!1)},Pn.parseMethod=function(Fe,kn,qn){var ia=this.startNode(),Ca=this.yieldPos,Ba=this.awaitPos,Ma=this.awaitIdentPos;return this.initFunction(ia),this.options.ecmaVersion>=6&&(ia.generator=Fe),this.options.ecmaVersion>=8&&(ia.async=!!kn),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(At(kn,ia.generator)|bn|(qn?Xn:0)),this.expect(Ce.parenL),ia.params=this.parseBindingList(Ce.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(ia,!1,!0,!1),this.yieldPos=Ca,this.awaitPos=Ba,this.awaitIdentPos=Ma,this.finishNode(ia,"FunctionExpression")},Pn.parseArrowExpression=function(Fe,kn,qn,ia){var Ca=this.yieldPos,Ba=this.awaitPos,Ma=this.awaitIdentPos;return this.enterScope(At(qn,!1)|sa),this.initFunction(Fe),this.options.ecmaVersion>=8&&(Fe.async=!!qn),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,Fe.params=this.toAssignableList(kn,!0),this.parseFunctionBody(Fe,!0,!1,ia),this.yieldPos=Ca,this.awaitPos=Ba,this.awaitIdentPos=Ma,this.finishNode(Fe,"ArrowFunctionExpression")},Pn.parseFunctionBody=function(Fe,kn,qn,ia){var Ca=kn&&this.type!==Ce.braceL,Ba=this.strict,Ma=!1;if(Ca)Fe.body=this.parseMaybeAssign(ia),Fe.expression=!0,this.checkParams(Fe,!1);else{var Ya=this.options.ecmaVersion>=7&&!this.isSimpleParamList(Fe.params);(!Ba||Ya)&&(Ma=this.strictDirective(this.end),Ma&&Ya&&this.raiseRecoverable(Fe.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var Za=this.labels;this.labels=[],Ma&&(this.strict=!0),this.checkParams(Fe,!Ba&&!Ma&&!kn&&!qn&&this.isSimpleParamList(Fe.params)),this.strict&&Fe.id&&this.checkLValSimple(Fe.id,ma),Fe.body=this.parseBlock(!1,void 0,Ma&&!Ba),Fe.expression=!1,this.adaptDirectivePrologue(Fe.body.body),this.labels=Za}this.exitScope()},Pn.isSimpleParamList=function(Fe){for(var kn=0,qn=Fe;kn<qn.length;kn+=1){var ia=qn[kn];if(ia.type!=="Identifier")return!1}return!0},Pn.checkParams=function(Fe,kn){for(var qn=Object.create(null),ia=0,Ca=Fe.params;ia<Ca.length;ia+=1){var Ba=Ca[ia];this.checkLValInnerPattern(Ba,Qn,kn?null:qn)}},Pn.parseExprList=function(Fe,kn,qn,ia){for(var Ca=[],Ba=!0;!this.eat(Fe);){if(Ba)Ba=!1;else if(this.expect(Ce.comma),kn&&this.afterTrailingComma(Fe))break;var Ma=void 0;qn&&this.type===Ce.comma?Ma=null:this.type===Ce.ellipsis?(Ma=this.parseSpread(ia),ia&&this.type===Ce.comma&&ia.trailingComma<0&&(ia.trailingComma=this.start)):Ma=this.parseMaybeAssign(!1,ia),Ca.push(Ma)}return Ca},Pn.checkUnreserved=function(Fe){var kn=Fe.start,qn=Fe.end,ia=Fe.name;if(this.inGenerator&&ia==="yield"&&this.raiseRecoverable(kn,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&ia==="await"&&this.raiseRecoverable(kn,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&ia==="arguments"&&this.raiseRecoverable(kn,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(ia==="arguments"||ia==="await")&&this.raise(kn,"Cannot use "+ia+" in class static initialization block"),this.keywords.test(ia)&&this.raise(kn,"Unexpected keyword '"+ia+"'"),!(this.options.ecmaVersion<6&&this.input.slice(kn,qn).indexOf("\\")!==-1)){var Ca=this.strict?this.reservedWordsStrict:this.reservedWords;Ca.test(ia)&&(!this.inAsync&&ia==="await"&&this.raiseRecoverable(kn,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(kn,"The keyword '"+ia+"' is reserved"))}},Pn.parseIdent=function(Fe){var kn=this.parseIdentNode();return this.next(!!Fe),this.finishNode(kn,"Identifier"),Fe||(this.checkUnreserved(kn),kn.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=kn.start)),kn},Pn.parseIdentNode=function(){var Fe=this.startNode();return this.type===Ce.name?Fe.name=this.value:this.type.keyword?(Fe.name=this.type.keyword,(Fe.name==="class"||Fe.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),Fe},Pn.parsePrivateIdent=function(){var Fe=this.startNode();return this.type===Ce.privateId?Fe.name=this.value:this.unexpected(),this.next(),this.finishNode(Fe,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(Fe.start,"Private field '#"+Fe.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(Fe)),Fe},Pn.parseYield=function(Fe){this.yieldPos||(this.yieldPos=this.start);var kn=this.startNode();return this.next(),this.type===Ce.semi||this.canInsertSemicolon()||this.type!==Ce.star&&!this.type.startsExpr?(kn.delegate=!1,kn.argument=null):(kn.delegate=this.eat(Ce.star),kn.argument=this.parseMaybeAssign(Fe)),this.finishNode(kn,"YieldExpression")},Pn.parseAwait=function(Fe){this.awaitPos||(this.awaitPos=this.start);var kn=this.startNode();return this.next(),kn.argument=this.parseMaybeUnary(null,!0,!1,Fe),this.finishNode(kn,"AwaitExpression")};var Un=ca.prototype;Un.raise=function(Fe,kn){var qn=ra(this.input,Fe);kn+=" ("+qn.line+":"+qn.column+")";var ia=new SyntaxError(kn);throw ia.pos=Fe,ia.loc=qn,ia.raisedAt=this.pos,ia},Un.raiseRecoverable=Un.raise,Un.curPosition=function(){if(this.options.locations)return new In(this.curLine,this.pos-this.lineStart)};var Yn=ca.prototype,ta=function(kn){this.flags=kn,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Yn.enterScope=function(Fe){this.scopeStack.push(new ta(Fe))},Yn.exitScope=function(){this.scopeStack.pop()},Yn.treatFunctionsAsVarInScope=function(Fe){return Fe.flags&Zn||!this.inModule&&Fe.flags&En},Yn.declareName=function(Fe,kn,qn){var ia=!1;if(kn===oa){var Ca=this.currentScope();ia=Ca.lexical.indexOf(Fe)>-1||Ca.functions.indexOf(Fe)>-1||Ca.var.indexOf(Fe)>-1,Ca.lexical.push(Fe),this.inModule&&Ca.flags&En&&delete this.undefinedExports[Fe]}else if(kn===la){var Ba=this.currentScope();Ba.lexical.push(Fe)}else if(kn===na){var Ma=this.currentScope();this.treatFunctionsAsVar?ia=Ma.lexical.indexOf(Fe)>-1:ia=Ma.lexical.indexOf(Fe)>-1||Ma.var.indexOf(Fe)>-1,Ma.functions.push(Fe)}else for(var Ya=this.scopeStack.length-1;Ya>=0;--Ya){var Za=this.scopeStack[Ya];if(Za.lexical.indexOf(Fe)>-1&&!(Za.flags&Hn&&Za.lexical[0]===Fe)||!this.treatFunctionsAsVarInScope(Za)&&Za.functions.indexOf(Fe)>-1){ia=!0;break}if(Za.var.push(Fe),this.inModule&&Za.flags&En&&delete this.undefinedExports[Fe],Za.flags&kt)break}ia&&this.raiseRecoverable(qn,"Identifier '"+Fe+"' has already been declared")},Yn.checkLocalExport=function(Fe){this.scopeStack[0].lexical.indexOf(Fe.name)===-1&&this.scopeStack[0].var.indexOf(Fe.name)===-1&&(this.undefinedExports[Fe.name]=Fe)},Yn.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Yn.currentVarScope=function(){for(var Fe=this.scopeStack.length-1;;Fe--){var kn=this.scopeStack[Fe];if(kn.flags&kt)return kn}},Yn.currentThisScope=function(){for(var Fe=this.scopeStack.length-1;;Fe--){var kn=this.scopeStack[Fe];if(kn.flags&kt&&!(kn.flags&sa))return kn}};var Jn=function(kn,qn,ia){this.type="",this.start=qn,this.end=0,kn.options.locations&&(this.loc=new Mn(kn,ia)),kn.options.directSourceFile&&(this.sourceFile=kn.options.directSourceFile),kn.options.ranges&&(this.range=[qn,0])},pa=ca.prototype;pa.startNode=function(){return new Jn(this,this.start,this.startLoc)},pa.startNodeAt=function(Fe,kn){return new Jn(this,Fe,kn)};function ga(Fe,kn,qn,ia){return Fe.type=kn,Fe.end=qn,this.options.locations&&(Fe.loc.end=ia),this.options.ranges&&(Fe.range[1]=qn),Fe}pa.finishNode=function(Fe,kn){return ga.call(this,Fe,kn,this.lastTokEnd,this.lastTokEndLoc)},pa.finishNodeAt=function(Fe,kn,qn,ia){return ga.call(this,Fe,kn,qn,ia)},pa.copyNode=function(Fe){var kn=new Jn(this,Fe.start,this.startLoc);for(var qn in Fe)kn[qn]=Fe[qn];return kn};var ba="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Oa=ba+" Extended_Pictographic",va=Oa,Sa=va+" EBase EComp EMod EPres ExtPict",$a=Sa,Da=$a,Na={9:ba,10:Oa,11:va,12:Sa,13:$a,14:Da},Va="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",Ua={9:"",10:"",11:"",12:"",13:"",14:Va},Ha="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Qa="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Ja=Qa+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Ra=Ja+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Fa=Ra+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Xa=Fa+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",to=Xa+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",eo={9:Qa,10:Ja,11:Ra,12:Fa,13:Xa,14:to},ro={};function oo(Fe){var kn=ro[Fe]={binary:Ln(Na[Fe]+" "+Ha),binaryOfStrings:Ln(Ua[Fe]),nonBinary:{General_Category:Ln(Ha),Script:Ln(eo[Fe])}};kn.nonBinary.Script_Extensions=kn.nonBinary.Script,kn.nonBinary.gc=kn.nonBinary.General_Category,kn.nonBinary.sc=kn.nonBinary.Script,kn.nonBinary.scx=kn.nonBinary.Script_Extensions}for(var so=0,co=[9,10,11,12,13,14];so<co.length;so+=1){var io=co[so];oo(io)}var Ka=ca.prototype,yo=function(kn){this.parser=kn,this.validFlags="gim"+(kn.options.ecmaVersion>=6?"uy":"")+(kn.options.ecmaVersion>=9?"s":"")+(kn.options.ecmaVersion>=13?"d":"")+(kn.options.ecmaVersion>=15?"v":""),this.unicodeProperties=ro[kn.options.ecmaVersion>=14?14:kn.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};yo.prototype.reset=function(kn,qn,ia){var Ca=ia.indexOf("v")!==-1,Ba=ia.indexOf("u")!==-1;this.start=kn|0,this.source=qn+"",this.flags=ia,Ca&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=Ba&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=Ba&&this.parser.options.ecmaVersion>=9)},yo.prototype.raise=function(kn){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+kn)},yo.prototype.at=function(kn,qn){qn===void 0&&(qn=!1);var ia=this.source,Ca=ia.length;if(kn>=Ca)return-1;var Ba=ia.charCodeAt(kn);if(!(qn||this.switchU)||Ba<=55295||Ba>=57344||kn+1>=Ca)return Ba;var Ma=ia.charCodeAt(kn+1);return Ma>=56320&&Ma<=57343?(Ba<<10)+Ma-56613888:Ba},yo.prototype.nextIndex=function(kn,qn){qn===void 0&&(qn=!1);var ia=this.source,Ca=ia.length;if(kn>=Ca)return Ca;var Ba=ia.charCodeAt(kn),Ma;return!(qn||this.switchU)||Ba<=55295||Ba>=57344||kn+1>=Ca||(Ma=ia.charCodeAt(kn+1))<56320||Ma>57343?kn+1:kn+2},yo.prototype.current=function(kn){return kn===void 0&&(kn=!1),this.at(this.pos,kn)},yo.prototype.lookahead=function(kn){return kn===void 0&&(kn=!1),this.at(this.nextIndex(this.pos,kn),kn)},yo.prototype.advance=function(kn){kn===void 0&&(kn=!1),this.pos=this.nextIndex(this.pos,kn)},yo.prototype.eat=function(kn,qn){return qn===void 0&&(qn=!1),this.current(qn)===kn?(this.advance(qn),!0):!1},yo.prototype.eatChars=function(kn,qn){qn===void 0&&(qn=!1);for(var ia=this.pos,Ca=0,Ba=kn;Ca<Ba.length;Ca+=1){var Ma=Ba[Ca],Ya=this.at(ia,qn);if(Ya===-1||Ya!==Ma)return!1;ia=this.nextIndex(ia,qn)}return this.pos=ia,!0},Ka.validateRegExpFlags=function(Fe){for(var kn=Fe.validFlags,qn=Fe.flags,ia=!1,Ca=!1,Ba=0;Ba<qn.length;Ba++){var Ma=qn.charAt(Ba);kn.indexOf(Ma)===-1&&this.raise(Fe.start,"Invalid regular expression flag"),qn.indexOf(Ma,Ba+1)>-1&&this.raise(Fe.start,"Duplicate regular expression flag"),Ma==="u"&&(ia=!0),Ma==="v"&&(Ca=!0)}this.options.ecmaVersion>=15&&ia&&Ca&&this.raise(Fe.start,"Invalid regular expression flag")},Ka.validateRegExpPattern=function(Fe){this.regexp_pattern(Fe),!Fe.switchN&&this.options.ecmaVersion>=9&&Fe.groupNames.length>0&&(Fe.switchN=!0,this.regexp_pattern(Fe))},Ka.regexp_pattern=function(Fe){Fe.pos=0,Fe.lastIntValue=0,Fe.lastStringValue="",Fe.lastAssertionIsQuantifiable=!1,Fe.numCapturingParens=0,Fe.maxBackReference=0,Fe.groupNames.length=0,Fe.backReferenceNames.length=0,this.regexp_disjunction(Fe),Fe.pos!==Fe.source.length&&(Fe.eat(41)&&Fe.raise("Unmatched ')'"),(Fe.eat(93)||Fe.eat(125))&&Fe.raise("Lone quantifier brackets")),Fe.maxBackReference>Fe.numCapturingParens&&Fe.raise("Invalid escape");for(var kn=0,qn=Fe.backReferenceNames;kn<qn.length;kn+=1){var ia=qn[kn];Fe.groupNames.indexOf(ia)===-1&&Fe.raise("Invalid named capture referenced")}},Ka.regexp_disjunction=function(Fe){for(this.regexp_alternative(Fe);Fe.eat(124);)this.regexp_alternative(Fe);this.regexp_eatQuantifier(Fe,!0)&&Fe.raise("Nothing to repeat"),Fe.eat(123)&&Fe.raise("Lone quantifier brackets")},Ka.regexp_alternative=function(Fe){for(;Fe.pos<Fe.source.length&&this.regexp_eatTerm(Fe););},Ka.regexp_eatTerm=function(Fe){return this.regexp_eatAssertion(Fe)?(Fe.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(Fe)&&Fe.switchU&&Fe.raise("Invalid quantifier"),!0):(Fe.switchU?this.regexp_eatAtom(Fe):this.regexp_eatExtendedAtom(Fe))?(this.regexp_eatQuantifier(Fe),!0):!1},Ka.regexp_eatAssertion=function(Fe){var kn=Fe.pos;if(Fe.lastAssertionIsQuantifiable=!1,Fe.eat(94)||Fe.eat(36))return!0;if(Fe.eat(92)){if(Fe.eat(66)||Fe.eat(98))return!0;Fe.pos=kn}if(Fe.eat(40)&&Fe.eat(63)){var qn=!1;if(this.options.ecmaVersion>=9&&(qn=Fe.eat(60)),Fe.eat(61)||Fe.eat(33))return this.regexp_disjunction(Fe),Fe.eat(41)||Fe.raise("Unterminated group"),Fe.lastAssertionIsQuantifiable=!qn,!0}return Fe.pos=kn,!1},Ka.regexp_eatQuantifier=function(Fe,kn){return kn===void 0&&(kn=!1),this.regexp_eatQuantifierPrefix(Fe,kn)?(Fe.eat(63),!0):!1},Ka.regexp_eatQuantifierPrefix=function(Fe,kn){return Fe.eat(42)||Fe.eat(43)||Fe.eat(63)||this.regexp_eatBracedQuantifier(Fe,kn)},Ka.regexp_eatBracedQuantifier=function(Fe,kn){var qn=Fe.pos;if(Fe.eat(123)){var ia=0,Ca=-1;if(this.regexp_eatDecimalDigits(Fe)&&(ia=Fe.lastIntValue,Fe.eat(44)&&this.regexp_eatDecimalDigits(Fe)&&(Ca=Fe.lastIntValue),Fe.eat(125)))return Ca!==-1&&Ca<ia&&!kn&&Fe.raise("numbers out of order in {} quantifier"),!0;Fe.switchU&&!kn&&Fe.raise("Incomplete quantifier"),Fe.pos=qn}return!1},Ka.regexp_eatAtom=function(Fe){return this.regexp_eatPatternCharacters(Fe)||Fe.eat(46)||this.regexp_eatReverseSolidusAtomEscape(Fe)||this.regexp_eatCharacterClass(Fe)||this.regexp_eatUncapturingGroup(Fe)||this.regexp_eatCapturingGroup(Fe)},Ka.regexp_eatReverseSolidusAtomEscape=function(Fe){var kn=Fe.pos;if(Fe.eat(92)){if(this.regexp_eatAtomEscape(Fe))return!0;Fe.pos=kn}return!1},Ka.regexp_eatUncapturingGroup=function(Fe){var kn=Fe.pos;if(Fe.eat(40)){if(Fe.eat(63)&&Fe.eat(58)){if(this.regexp_disjunction(Fe),Fe.eat(41))return!0;Fe.raise("Unterminated group")}Fe.pos=kn}return!1},Ka.regexp_eatCapturingGroup=function(Fe){if(Fe.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(Fe):Fe.current()===63&&Fe.raise("Invalid group"),this.regexp_disjunction(Fe),Fe.eat(41))return Fe.numCapturingParens+=1,!0;Fe.raise("Unterminated group")}return!1},Ka.regexp_eatExtendedAtom=function(Fe){return Fe.eat(46)||this.regexp_eatReverseSolidusAtomEscape(Fe)||this.regexp_eatCharacterClass(Fe)||this.regexp_eatUncapturingGroup(Fe)||this.regexp_eatCapturingGroup(Fe)||this.regexp_eatInvalidBracedQuantifier(Fe)||this.regexp_eatExtendedPatternCharacter(Fe)},Ka.regexp_eatInvalidBracedQuantifier=function(Fe){return this.regexp_eatBracedQuantifier(Fe,!0)&&Fe.raise("Nothing to repeat"),!1},Ka.regexp_eatSyntaxCharacter=function(Fe){var kn=Fe.current();return $o(kn)?(Fe.lastIntValue=kn,Fe.advance(),!0):!1};function $o(Fe){return Fe===36||Fe>=40&&Fe<=43||Fe===46||Fe===63||Fe>=91&&Fe<=94||Fe>=123&&Fe<=125}Ka.regexp_eatPatternCharacters=function(Fe){for(var kn=Fe.pos,qn=0;(qn=Fe.current())!==-1&&!$o(qn);)Fe.advance();return Fe.pos!==kn},Ka.regexp_eatExtendedPatternCharacter=function(Fe){var kn=Fe.current();return kn!==-1&&kn!==36&&!(kn>=40&&kn<=43)&&kn!==46&&kn!==63&&kn!==91&&kn!==94&&kn!==124?(Fe.advance(),!0):!1},Ka.regexp_groupSpecifier=function(Fe){if(Fe.eat(63)){if(this.regexp_eatGroupName(Fe)){Fe.groupNames.indexOf(Fe.lastStringValue)!==-1&&Fe.raise("Duplicate capture group name"),Fe.groupNames.push(Fe.lastStringValue);return}Fe.raise("Invalid group")}},Ka.regexp_eatGroupName=function(Fe){if(Fe.lastStringValue="",Fe.eat(60)){if(this.regexp_eatRegExpIdentifierName(Fe)&&Fe.eat(62))return!0;Fe.raise("Invalid capture group name")}return!1},Ka.regexp_eatRegExpIdentifierName=function(Fe){if(Fe.lastStringValue="",this.regexp_eatRegExpIdentifierStart(Fe)){for(Fe.lastStringValue+=Sn(Fe.lastIntValue);this.regexp_eatRegExpIdentifierPart(Fe);)Fe.lastStringValue+=Sn(Fe.lastIntValue);return!0}return!1},Ka.regexp_eatRegExpIdentifierStart=function(Fe){var kn=Fe.pos,qn=this.options.ecmaVersion>=11,ia=Fe.current(qn);return Fe.advance(qn),ia===92&&this.regexp_eatRegExpUnicodeEscapeSequence(Fe,qn)&&(ia=Fe.lastIntValue),Oo(ia)?(Fe.lastIntValue=ia,!0):(Fe.pos=kn,!1)};function Oo(Fe){return ue(Fe,!0)||Fe===36||Fe===95}Ka.regexp_eatRegExpIdentifierPart=function(Fe){var kn=Fe.pos,qn=this.options.ecmaVersion>=11,ia=Fe.current(qn);return Fe.advance(qn),ia===92&&this.regexp_eatRegExpUnicodeEscapeSequence(Fe,qn)&&(ia=Fe.lastIntValue),bo(ia)?(Fe.lastIntValue=ia,!0):(Fe.pos=kn,!1)};function bo(Fe){return le(Fe,!0)||Fe===36||Fe===95||Fe===8204||Fe===8205}Ka.regexp_eatAtomEscape=function(Fe){return this.regexp_eatBackReference(Fe)||this.regexp_eatCharacterClassEscape(Fe)||this.regexp_eatCharacterEscape(Fe)||Fe.switchN&&this.regexp_eatKGroupName(Fe)?!0:(Fe.switchU&&(Fe.current()===99&&Fe.raise("Invalid unicode escape"),Fe.raise("Invalid escape")),!1)},Ka.regexp_eatBackReference=function(Fe){var kn=Fe.pos;if(this.regexp_eatDecimalEscape(Fe)){var qn=Fe.lastIntValue;if(Fe.switchU)return qn>Fe.maxBackReference&&(Fe.maxBackReference=qn),!0;if(qn<=Fe.numCapturingParens)return!0;Fe.pos=kn}return!1},Ka.regexp_eatKGroupName=function(Fe){if(Fe.eat(107)){if(this.regexp_eatGroupName(Fe))return Fe.backReferenceNames.push(Fe.lastStringValue),!0;Fe.raise("Invalid named reference")}return!1},Ka.regexp_eatCharacterEscape=function(Fe){return this.regexp_eatControlEscape(Fe)||this.regexp_eatCControlLetter(Fe)||this.regexp_eatZero(Fe)||this.regexp_eatHexEscapeSequence(Fe)||this.regexp_eatRegExpUnicodeEscapeSequence(Fe,!1)||!Fe.switchU&&this.regexp_eatLegacyOctalEscapeSequence(Fe)||this.regexp_eatIdentityEscape(Fe)},Ka.regexp_eatCControlLetter=function(Fe){var kn=Fe.pos;if(Fe.eat(99)){if(this.regexp_eatControlLetter(Fe))return!0;Fe.pos=kn}return!1},Ka.regexp_eatZero=function(Fe){return Fe.current()===48&&!ja(Fe.lookahead())?(Fe.lastIntValue=0,Fe.advance(),!0):!1},Ka.regexp_eatControlEscape=function(Fe){var kn=Fe.current();return kn===116?(Fe.lastIntValue=9,Fe.advance(),!0):kn===110?(Fe.lastIntValue=10,Fe.advance(),!0):kn===118?(Fe.lastIntValue=11,Fe.advance(),!0):kn===102?(Fe.lastIntValue=12,Fe.advance(),!0):kn===114?(Fe.lastIntValue=13,Fe.advance(),!0):!1},Ka.regexp_eatControlLetter=function(Fe){var kn=Fe.current();return So(kn)?(Fe.lastIntValue=kn%32,Fe.advance(),!0):!1};function So(Fe){return Fe>=65&&Fe<=90||Fe>=97&&Fe<=122}Ka.regexp_eatRegExpUnicodeEscapeSequence=function(Fe,kn){kn===void 0&&(kn=!1);var qn=Fe.pos,ia=kn||Fe.switchU;if(Fe.eat(117)){if(this.regexp_eatFixedHexDigits(Fe,4)){var Ca=Fe.lastIntValue;if(ia&&Ca>=55296&&Ca<=56319){var Ba=Fe.pos;if(Fe.eat(92)&&Fe.eat(117)&&this.regexp_eatFixedHexDigits(Fe,4)){var Ma=Fe.lastIntValue;if(Ma>=56320&&Ma<=57343)return Fe.lastIntValue=(Ca-55296)*1024+(Ma-56320)+65536,!0}Fe.pos=Ba,Fe.lastIntValue=Ca}return!0}if(ia&&Fe.eat(123)&&this.regexp_eatHexDigits(Fe)&&Fe.eat(125)&&Io(Fe.lastIntValue))return!0;ia&&Fe.raise("Invalid unicode escape"),Fe.pos=qn}return!1};function Io(Fe){return Fe>=0&&Fe<=1114111}Ka.regexp_eatIdentityEscape=function(Fe){if(Fe.switchU)return this.regexp_eatSyntaxCharacter(Fe)?!0:Fe.eat(47)?(Fe.lastIntValue=47,!0):!1;var kn=Fe.current();return kn!==99&&(!Fe.switchN||kn!==107)?(Fe.lastIntValue=kn,Fe.advance(),!0):!1},Ka.regexp_eatDecimalEscape=function(Fe){Fe.lastIntValue=0;var kn=Fe.current();if(kn>=49&&kn<=57){do Fe.lastIntValue=10*Fe.lastIntValue+(kn-48),Fe.advance();while((kn=Fe.current())>=48&&kn<=57);return!0}return!1};var Po=0,fa=1,ka=2;Ka.regexp_eatCharacterClassEscape=function(Fe){var kn=Fe.current();if(ya(kn))return Fe.lastIntValue=-1,Fe.advance(),fa;var qn=!1;if(Fe.switchU&&this.options.ecmaVersion>=9&&((qn=kn===80)||kn===112)){Fe.lastIntValue=-1,Fe.advance();var ia;if(Fe.eat(123)&&(ia=this.regexp_eatUnicodePropertyValueExpression(Fe))&&Fe.eat(125))return qn&&ia===ka&&Fe.raise("Invalid property name"),ia;Fe.raise("Invalid property name")}return Po};function ya(Fe){return Fe===100||Fe===68||Fe===115||Fe===83||Fe===119||Fe===87}Ka.regexp_eatUnicodePropertyValueExpression=function(Fe){var kn=Fe.pos;if(this.regexp_eatUnicodePropertyName(Fe)&&Fe.eat(61)){var qn=Fe.lastStringValue;if(this.regexp_eatUnicodePropertyValue(Fe)){var ia=Fe.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(Fe,qn,ia),fa}}if(Fe.pos=kn,this.regexp_eatLoneUnicodePropertyNameOrValue(Fe)){var Ca=Fe.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(Fe,Ca)}return Po},Ka.regexp_validateUnicodePropertyNameAndValue=function(Fe,kn,qn){Rn(Fe.unicodeProperties.nonBinary,kn)||Fe.raise("Invalid property name"),Fe.unicodeProperties.nonBinary[kn].test(qn)||Fe.raise("Invalid property value")},Ka.regexp_validateUnicodePropertyNameOrValue=function(Fe,kn){if(Fe.unicodeProperties.binary.test(kn))return fa;if(Fe.switchV&&Fe.unicodeProperties.binaryOfStrings.test(kn))return ka;Fe.raise("Invalid property name")},Ka.regexp_eatUnicodePropertyName=function(Fe){var kn=0;for(Fe.lastStringValue="";Ta(kn=Fe.current());)Fe.lastStringValue+=Sn(kn),Fe.advance();return Fe.lastStringValue!==""};function Ta(Fe){return So(Fe)||Fe===95}Ka.regexp_eatUnicodePropertyValue=function(Fe){var kn=0;for(Fe.lastStringValue="";Ia(kn=Fe.current());)Fe.lastStringValue+=Sn(kn),Fe.advance();return Fe.lastStringValue!==""};function Ia(Fe){return Ta(Fe)||ja(Fe)}Ka.regexp_eatLoneUnicodePropertyNameOrValue=function(Fe){return this.regexp_eatUnicodePropertyValue(Fe)},Ka.regexp_eatCharacterClass=function(Fe){if(Fe.eat(91)){var kn=Fe.eat(94),qn=this.regexp_classContents(Fe);return Fe.eat(93)||Fe.raise("Unterminated character class"),kn&&qn===ka&&Fe.raise("Negated character class may contain strings"),!0}return!1},Ka.regexp_classContents=function(Fe){return Fe.current()===93?fa:Fe.switchV?this.regexp_classSetExpression(Fe):(this.regexp_nonEmptyClassRanges(Fe),fa)},Ka.regexp_nonEmptyClassRanges=function(Fe){for(;this.regexp_eatClassAtom(Fe);){var kn=Fe.lastIntValue;if(Fe.eat(45)&&this.regexp_eatClassAtom(Fe)){var qn=Fe.lastIntValue;Fe.switchU&&(kn===-1||qn===-1)&&Fe.raise("Invalid character class"),kn!==-1&&qn!==-1&&kn>qn&&Fe.raise("Range out of order in character class")}}},Ka.regexp_eatClassAtom=function(Fe){var kn=Fe.pos;if(Fe.eat(92)){if(this.regexp_eatClassEscape(Fe))return!0;if(Fe.switchU){var qn=Fe.current();(qn===99||ao(qn))&&Fe.raise("Invalid class escape"),Fe.raise("Invalid escape")}Fe.pos=kn}var ia=Fe.current();return ia!==93?(Fe.lastIntValue=ia,Fe.advance(),!0):!1},Ka.regexp_eatClassEscape=function(Fe){var kn=Fe.pos;if(Fe.eat(98))return Fe.lastIntValue=8,!0;if(Fe.switchU&&Fe.eat(45))return Fe.lastIntValue=45,!0;if(!Fe.switchU&&Fe.eat(99)){if(this.regexp_eatClassControlLetter(Fe))return!0;Fe.pos=kn}return this.regexp_eatCharacterClassEscape(Fe)||this.regexp_eatCharacterEscape(Fe)},Ka.regexp_classSetExpression=function(Fe){var kn=fa,qn;if(!this.regexp_eatClassSetRange(Fe))if(qn=this.regexp_eatClassSetOperand(Fe)){qn===ka&&(kn=ka);for(var ia=Fe.pos;Fe.eatChars([38,38]);){if(Fe.current()!==38&&(qn=this.regexp_eatClassSetOperand(Fe))){qn!==ka&&(kn=fa);continue}Fe.raise("Invalid character in character class")}if(ia!==Fe.pos)return kn;for(;Fe.eatChars([45,45]);)this.regexp_eatClassSetOperand(Fe)||Fe.raise("Invalid character in character class");if(ia!==Fe.pos)return kn}else Fe.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(Fe)){if(qn=this.regexp_eatClassSetOperand(Fe),!qn)return kn;qn===ka&&(kn=ka)}},Ka.regexp_eatClassSetRange=function(Fe){var kn=Fe.pos;if(this.regexp_eatClassSetCharacter(Fe)){var qn=Fe.lastIntValue;if(Fe.eat(45)&&this.regexp_eatClassSetCharacter(Fe)){var ia=Fe.lastIntValue;return qn!==-1&&ia!==-1&&qn>ia&&Fe.raise("Range out of order in character class"),!0}Fe.pos=kn}return!1},Ka.regexp_eatClassSetOperand=function(Fe){return this.regexp_eatClassSetCharacter(Fe)?fa:this.regexp_eatClassStringDisjunction(Fe)||this.regexp_eatNestedClass(Fe)},Ka.regexp_eatNestedClass=function(Fe){var kn=Fe.pos;if(Fe.eat(91)){var qn=Fe.eat(94),ia=this.regexp_classContents(Fe);if(Fe.eat(93))return qn&&ia===ka&&Fe.raise("Negated character class may contain strings"),ia;Fe.pos=kn}if(Fe.eat(92)){var Ca=this.regexp_eatCharacterClassEscape(Fe);if(Ca)return Ca;Fe.pos=kn}return null},Ka.regexp_eatClassStringDisjunction=function(Fe){var kn=Fe.pos;if(Fe.eatChars([92,113])){if(Fe.eat(123)){var qn=this.regexp_classStringDisjunctionContents(Fe);if(Fe.eat(125))return qn}else Fe.raise("Invalid escape");Fe.pos=kn}return null},Ka.regexp_classStringDisjunctionContents=function(Fe){for(var kn=this.regexp_classString(Fe);Fe.eat(124);)this.regexp_classString(Fe)===ka&&(kn=ka);return kn},Ka.regexp_classString=function(Fe){for(var kn=0;this.regexp_eatClassSetCharacter(Fe);)kn++;return kn===1?fa:ka},Ka.regexp_eatClassSetCharacter=function(Fe){var kn=Fe.pos;if(Fe.eat(92))return this.regexp_eatCharacterEscape(Fe)||this.regexp_eatClassSetReservedPunctuator(Fe)?!0:Fe.eat(98)?(Fe.lastIntValue=8,!0):(Fe.pos=kn,!1);var qn=Fe.current();return qn<0||qn===Fe.lookahead()&&Ea(qn)||La(qn)?!1:(Fe.advance(),Fe.lastIntValue=qn,!0)};function Ea(Fe){return Fe===33||Fe>=35&&Fe<=38||Fe>=42&&Fe<=44||Fe===46||Fe>=58&&Fe<=64||Fe===94||Fe===96||Fe===126}function La(Fe){return Fe===40||Fe===41||Fe===45||Fe===47||Fe>=91&&Fe<=93||Fe>=123&&Fe<=125}Ka.regexp_eatClassSetReservedPunctuator=function(Fe){var kn=Fe.current();return Ga(kn)?(Fe.lastIntValue=kn,Fe.advance(),!0):!1};function Ga(Fe){return Fe===33||Fe===35||Fe===37||Fe===38||Fe===44||Fe===45||Fe>=58&&Fe<=62||Fe===64||Fe===96||Fe===126}Ka.regexp_eatClassControlLetter=function(Fe){var kn=Fe.current();return ja(kn)||kn===95?(Fe.lastIntValue=kn%32,Fe.advance(),!0):!1},Ka.regexp_eatHexEscapeSequence=function(Fe){var kn=Fe.pos;if(Fe.eat(120)){if(this.regexp_eatFixedHexDigits(Fe,2))return!0;Fe.switchU&&Fe.raise("Invalid escape"),Fe.pos=kn}return!1},Ka.regexp_eatDecimalDigits=function(Fe){var kn=Fe.pos,qn=0;for(Fe.lastIntValue=0;ja(qn=Fe.current());)Fe.lastIntValue=10*Fe.lastIntValue+(qn-48),Fe.advance();return Fe.pos!==kn};function ja(Fe){return Fe>=48&&Fe<=57}Ka.regexp_eatHexDigits=function(Fe){var kn=Fe.pos,qn=0;for(Fe.lastIntValue=0;Wa(qn=Fe.current());)Fe.lastIntValue=16*Fe.lastIntValue+qa(qn),Fe.advance();return Fe.pos!==kn};function Wa(Fe){return Fe>=48&&Fe<=57||Fe>=65&&Fe<=70||Fe>=97&&Fe<=102}function qa(Fe){return Fe>=65&&Fe<=70?10+(Fe-65):Fe>=97&&Fe<=102?10+(Fe-97):Fe-48}Ka.regexp_eatLegacyOctalEscapeSequence=function(Fe){if(this.regexp_eatOctalDigit(Fe)){var kn=Fe.lastIntValue;if(this.regexp_eatOctalDigit(Fe)){var qn=Fe.lastIntValue;kn<=3&&this.regexp_eatOctalDigit(Fe)?Fe.lastIntValue=kn*64+qn*8+Fe.lastIntValue:Fe.lastIntValue=kn*8+qn}else Fe.lastIntValue=kn;return!0}return!1},Ka.regexp_eatOctalDigit=function(Fe){var kn=Fe.current();return ao(kn)?(Fe.lastIntValue=kn-48,Fe.advance(),!0):(Fe.lastIntValue=0,!1)};function ao(Fe){return Fe>=48&&Fe<=55}Ka.regexp_eatFixedHexDigits=function(Fe,kn){var qn=Fe.pos;Fe.lastIntValue=0;for(var ia=0;ia<kn;++ia){var Ca=Fe.current();if(!Wa(Ca))return Fe.pos=qn,!1;Fe.lastIntValue=16*Fe.lastIntValue+qa(Ca),Fe.advance()}return!0};var fo=function(kn){this.type=kn.type,this.value=kn.value,this.start=kn.start,this.end=kn.end,kn.options.locations&&(this.loc=new Mn(kn,kn.startLoc,kn.endLoc)),kn.options.ranges&&(this.range=[kn.start,kn.end])},no=ca.prototype;no.next=function(Fe){!Fe&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new fo(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},no.getToken=function(){return this.next(),new fo(this)},typeof Symbol<"u"&&(no[Symbol.iterator]=function(){var Fe=this;return{next:function(){var kn=Fe.getToken();return{done:kn.type===Ce.eof,value:kn}}}}),no.nextToken=function(){var Fe=this.curContext();if((!Fe||!Fe.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(Ce.eof);if(Fe.override)return Fe.override(this);this.readToken(this.fullCharCodeAtPos())},no.readToken=function(Fe){return ue(Fe,this.options.ecmaVersion>=6)||Fe===92?this.readWord():this.getTokenFromCode(Fe)},no.fullCharCodeAtPos=function(){var Fe=this.input.charCodeAt(this.pos);if(Fe<=55295||Fe>=56320)return Fe;var kn=this.input.charCodeAt(this.pos+1);return kn<=56319||kn>=57344?Fe:(Fe<<10)+kn-56613888},no.skipBlockComment=function(){var Fe=this.options.onComment&&this.curPosition(),kn=this.pos,qn=this.input.indexOf("*/",this.pos+=2);if(qn===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=qn+2,this.options.locations)for(var ia=void 0,Ca=kn;(ia=Pt(this.input,Ca,this.pos))>-1;)++this.curLine,Ca=this.lineStart=ia;this.options.onComment&&this.options.onComment(!0,this.input.slice(kn+2,qn),kn,this.pos,Fe,this.curPosition())},no.skipLineComment=function(Fe){for(var kn=this.pos,qn=this.options.onComment&&this.curPosition(),ia=this.input.charCodeAt(this.pos+=Fe);this.pos<this.input.length&&!Ue(ia);)ia=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(kn+Fe,this.pos),kn,this.pos,qn,this.curPosition())},no.skipSpace=function(){e:for(;this.pos<this.input.length;){var Fe=this.input.charCodeAt(this.pos);switch(Fe){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(Fe>8&&Fe<14||Fe>=5760&&hn.test(String.fromCharCode(Fe)))++this.pos;else break e}}},no.finishToken=function(Fe,kn){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var qn=this.type;this.type=Fe,this.value=kn,this.updateContext(qn)},no.readToken_dot=function(){var Fe=this.input.charCodeAt(this.pos+1);if(Fe>=48&&Fe<=57)return this.readNumber(!0);var kn=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&Fe===46&&kn===46?(this.pos+=3,this.finishToken(Ce.ellipsis)):(++this.pos,this.finishToken(Ce.dot))},no.readToken_slash=function(){var Fe=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):Fe===61?this.finishOp(Ce.assign,2):this.finishOp(Ce.slash,1)},no.readToken_mult_modulo_exp=function(Fe){var kn=this.input.charCodeAt(this.pos+1),qn=1,ia=Fe===42?Ce.star:Ce.modulo;return this.options.ecmaVersion>=7&&Fe===42&&kn===42&&(++qn,ia=Ce.starstar,kn=this.input.charCodeAt(this.pos+2)),kn===61?this.finishOp(Ce.assign,qn+1):this.finishOp(ia,qn)},no.readToken_pipe_amp=function(Fe){var kn=this.input.charCodeAt(this.pos+1);if(kn===Fe){if(this.options.ecmaVersion>=12){var qn=this.input.charCodeAt(this.pos+2);if(qn===61)return this.finishOp(Ce.assign,3)}return this.finishOp(Fe===124?Ce.logicalOR:Ce.logicalAND,2)}return kn===61?this.finishOp(Ce.assign,2):this.finishOp(Fe===124?Ce.bitwiseOR:Ce.bitwiseAND,1)},no.readToken_caret=function(){var Fe=this.input.charCodeAt(this.pos+1);return Fe===61?this.finishOp(Ce.assign,2):this.finishOp(Ce.bitwiseXOR,1)},no.readToken_plus_min=function(Fe){var kn=this.input.charCodeAt(this.pos+1);return kn===Fe?kn===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Ie.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(Ce.incDec,2):kn===61?this.finishOp(Ce.assign,2):this.finishOp(Ce.plusMin,1)},no.readToken_lt_gt=function(Fe){var kn=this.input.charCodeAt(this.pos+1),qn=1;return kn===Fe?(qn=Fe===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+qn)===61?this.finishOp(Ce.assign,qn+1):this.finishOp(Ce.bitShift,qn)):kn===33&&Fe===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(kn===61&&(qn=2),this.finishOp(Ce.relational,qn))},no.readToken_eq_excl=function(Fe){var kn=this.input.charCodeAt(this.pos+1);return kn===61?this.finishOp(Ce.equality,this.input.charCodeAt(this.pos+2)===61?3:2):Fe===61&&kn===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(Ce.arrow)):this.finishOp(Fe===61?Ce.eq:Ce.prefix,1)},no.readToken_question=function(){var Fe=this.options.ecmaVersion;if(Fe>=11){var kn=this.input.charCodeAt(this.pos+1);if(kn===46){var qn=this.input.charCodeAt(this.pos+2);if(qn<48||qn>57)return this.finishOp(Ce.questionDot,2)}if(kn===63){if(Fe>=12){var ia=this.input.charCodeAt(this.pos+2);if(ia===61)return this.finishOp(Ce.assign,3)}return this.finishOp(Ce.coalesce,2)}}return this.finishOp(Ce.question,1)},no.readToken_numberSign=function(){var Fe=this.options.ecmaVersion,kn=35;if(Fe>=13&&(++this.pos,kn=this.fullCharCodeAtPos(),ue(kn,!0)||kn===92))return this.finishToken(Ce.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Sn(kn)+"'")},no.getTokenFromCode=function(Fe){switch(Fe){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Ce.parenL);case 41:return++this.pos,this.finishToken(Ce.parenR);case 59:return++this.pos,this.finishToken(Ce.semi);case 44:return++this.pos,this.finishToken(Ce.comma);case 91:return++this.pos,this.finishToken(Ce.bracketL);case 93:return++this.pos,this.finishToken(Ce.bracketR);case 123:return++this.pos,this.finishToken(Ce.braceL);case 125:return++this.pos,this.finishToken(Ce.braceR);case 58:return++this.pos,this.finishToken(Ce.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(Ce.backQuote);case 48:var kn=this.input.charCodeAt(this.pos+1);if(kn===120||kn===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(kn===111||kn===79)return this.readRadixNumber(8);if(kn===98||kn===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(Fe);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(Fe);case 124:case 38:return this.readToken_pipe_amp(Fe);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(Fe);case 60:case 62:return this.readToken_lt_gt(Fe);case 61:case 33:return this.readToken_eq_excl(Fe);case 63:return this.readToken_question();case 126:return this.finishOp(Ce.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Sn(Fe)+"'")},no.finishOp=function(Fe,kn){var qn=this.input.slice(this.pos,this.pos+kn);return this.pos+=kn,this.finishToken(Fe,qn)},no.readRegexp=function(){for(var Fe,kn,qn=this.pos;;){this.pos>=this.input.length&&this.raise(qn,"Unterminated regular expression");var ia=this.input.charAt(this.pos);if(Ie.test(ia)&&this.raise(qn,"Unterminated regular expression"),Fe)Fe=!1;else{if(ia==="[")kn=!0;else if(ia==="]"&&kn)kn=!1;else if(ia==="/"&&!kn)break;Fe=ia==="\\"}++this.pos}var Ca=this.input.slice(qn,this.pos);++this.pos;var Ba=this.pos,Ma=this.readWord1();this.containsEsc&&this.unexpected(Ba);var Ya=this.regexpState||(this.regexpState=new yo(this));Ya.reset(qn,Ca,Ma),this.validateRegExpFlags(Ya),this.validateRegExpPattern(Ya);var Za=null;try{Za=new RegExp(Ca,Ma)}catch{}return this.finishToken(Ce.regexp,{pattern:Ca,flags:Ma,value:Za})},no.readInt=function(Fe,kn,qn){for(var ia=this.options.ecmaVersion>=12&&kn===void 0,Ca=qn&&this.input.charCodeAt(this.pos)===48,Ba=this.pos,Ma=0,Ya=0,Za=0,ho=kn??1/0;Za<ho;++Za,++this.pos){var go=this.input.charCodeAt(this.pos),To=void 0;if(ia&&go===95){Ca&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),Ya===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),Za===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),Ya=go;continue}if(go>=97?To=go-97+10:go>=65?To=go-65+10:go>=48&&go<=57?To=go-48:To=1/0,To>=Fe)break;Ya=go,Ma=Ma*Fe+To}return ia&&Ya===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===Ba||kn!=null&&this.pos-Ba!==kn?null:Ma};function _o(Fe,kn){return kn?parseInt(Fe,8):parseFloat(Fe.replace(/_/g,""))}function ko(Fe){return typeof BigInt!="function"?null:BigInt(Fe.replace(/_/g,""))}no.readRadixNumber=function(Fe){var kn=this.pos;this.pos+=2;var qn=this.readInt(Fe);return qn==null&&this.raise(this.start+2,"Expected number in radix "+Fe),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(qn=ko(this.input.slice(kn,this.pos)),++this.pos):ue(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Ce.num,qn)},no.readNumber=function(Fe){var kn=this.pos;!Fe&&this.readInt(10,void 0,!0)===null&&this.raise(kn,"Invalid number");var qn=this.pos-kn>=2&&this.input.charCodeAt(kn)===48;qn&&this.strict&&this.raise(kn,"Invalid number");var ia=this.input.charCodeAt(this.pos);if(!qn&&!Fe&&this.options.ecmaVersion>=11&&ia===110){var Ca=ko(this.input.slice(kn,this.pos));return++this.pos,ue(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Ce.num,Ca)}qn&&/[89]/.test(this.input.slice(kn,this.pos))&&(qn=!1),ia===46&&!qn&&(++this.pos,this.readInt(10),ia=this.input.charCodeAt(this.pos)),(ia===69||ia===101)&&!qn&&(ia=this.input.charCodeAt(++this.pos),(ia===43||ia===45)&&++this.pos,this.readInt(10)===null&&this.raise(kn,"Invalid number")),ue(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var Ba=_o(this.input.slice(kn,this.pos),qn);return this.finishToken(Ce.num,Ba)},no.readCodePoint=function(){var Fe=this.input.charCodeAt(this.pos),kn;if(Fe===123){this.options.ecmaVersion<6&&this.unexpected();var qn=++this.pos;kn=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,kn>1114111&&this.invalidStringToken(qn,"Code point out of bounds")}else kn=this.readHexChar(4);return kn},no.readString=function(Fe){for(var kn="",qn=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var ia=this.input.charCodeAt(this.pos);if(ia===Fe)break;ia===92?(kn+=this.input.slice(qn,this.pos),kn+=this.readEscapedChar(!1),qn=this.pos):ia===8232||ia===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Ue(ia)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return kn+=this.input.slice(qn,this.pos++),this.finishToken(Ce.string,kn)};var wo={};no.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(Fe){if(Fe===wo)this.readInvalidTemplateToken();else throw Fe}this.inTemplateElement=!1},no.invalidStringToken=function(Fe,kn){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw wo;this.raise(Fe,kn)},no.readTmplToken=function(){for(var Fe="",kn=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var qn=this.input.charCodeAt(this.pos);if(qn===96||qn===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===Ce.template||this.type===Ce.invalidTemplate)?qn===36?(this.pos+=2,this.finishToken(Ce.dollarBraceL)):(++this.pos,this.finishToken(Ce.backQuote)):(Fe+=this.input.slice(kn,this.pos),this.finishToken(Ce.template,Fe));if(qn===92)Fe+=this.input.slice(kn,this.pos),Fe+=this.readEscapedChar(!0),kn=this.pos;else if(Ue(qn)){switch(Fe+=this.input.slice(kn,this.pos),++this.pos,qn){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:Fe+=`
`;break;default:Fe+=String.fromCharCode(qn);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),kn=this.pos}else++this.pos}},no.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(Ce.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},no.readEscapedChar=function(Fe){var kn=this.input.charCodeAt(++this.pos);switch(++this.pos,kn){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Sn(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),Fe){var qn=this.pos-1;this.invalidStringToken(qn,"Invalid escape sequence in template string")}default:if(kn>=48&&kn<=55){var ia=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],Ca=parseInt(ia,8);return Ca>255&&(ia=ia.slice(0,-1),Ca=parseInt(ia,8)),this.pos+=ia.length-1,kn=this.input.charCodeAt(this.pos),(ia!=="0"||kn===56||kn===57)&&(this.strict||Fe)&&this.invalidStringToken(this.pos-1-ia.length,Fe?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(Ca)}return Ue(kn)?"":String.fromCharCode(kn)}},no.readHexChar=function(Fe){var kn=this.pos,qn=this.readInt(16,Fe);return qn===null&&this.invalidStringToken(kn,"Bad character escape sequence"),qn},no.readWord1=function(){this.containsEsc=!1;for(var Fe="",kn=!0,qn=this.pos,ia=this.options.ecmaVersion>=6;this.pos<this.input.length;){var Ca=this.fullCharCodeAtPos();if(le(Ca,ia))this.pos+=Ca<=65535?1:2;else if(Ca===92){this.containsEsc=!0,Fe+=this.input.slice(qn,this.pos);var Ba=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var Ma=this.readCodePoint();(kn?ue:le)(Ma,ia)||this.invalidStringToken(Ba,"Invalid Unicode escape"),Fe+=Sn(Ma),qn=this.pos}else break;kn=!1}return Fe+this.input.slice(qn,this.pos)},no.readWord=function(){var Fe=this.readWord1(),kn=Ce.name;return this.keywords.test(Fe)&&(kn=Ne[Fe]),this.finishToken(kn,Fe)};var Do="8.10.0";ca.acorn={Parser:ca,version:Do,defaultOptions:da,Position:In,SourceLocation:Mn,getLineInfo:ra,Node:Jn,TokenType:de,tokTypes:Ce,keywordTypes:Ne,TokContext:Kn,tokContexts:Wn,isIdentifierChar:le,isIdentifierStart:ue,Token:fo,isNewLine:Ue,lineBreak:Ie,lineBreakG:ze,nonASCIIwhitespace:hn};function Ro(Fe,kn){return ca.parse(Fe,kn)}function Fo(Fe,kn,qn){return ca.parseExpressionAt(Fe,kn,qn)}function Lo(Fe,kn){return ca.tokenizer(Fe,kn)}r.Node=Jn,r.Parser=ca,r.Position=In,r.SourceLocation=Mn,r.TokContext=Kn,r.Token=fo,r.TokenType=de,r.defaultOptions=da,r.getLineInfo=ra,r.isIdentifierChar=le,r.isIdentifierStart=ue,r.isNewLine=Ue,r.keywordTypes=Ne,r.lineBreak=Ie,r.lineBreakG=ze,r.nonASCIIwhitespace=hn,r.parse=Ro,r.parseExpressionAt=Fo,r.tokContexts=Wn,r.tokTypes=Ce,r.tokenizer=Lo,r.version=Do})}(acorn,acorn.exports)),acorn.exports}/*!
 * Paper.js v0.12.18 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jrg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Jul 17 14:57:24 2024 +0200
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jrg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(e){(function(n,r){n=n||require$$2;var g=n.window,y=n.document,k=new function(){var pe=/^(statics|enumerable|beans|preserve)$/,Oe=[],Ve=Oe.slice,qe=Object.create,Et=Object.getOwnPropertyDescriptor,Lt=Object.defineProperty,_n=Oe.forEach||function(Fn,Gn){for(var Kn=0,Wn=this.length;Kn<Wn;Kn++)Fn.call(Gn,this[Kn],Kn,this)},vn=function(Fn,Gn){for(var Kn in this)this.hasOwnProperty(Kn)&&Fn.call(Gn,this[Kn],Kn,this)},wn=Object.assign||function(Fn){for(var Gn=1,Kn=arguments.length;Gn<Kn;Gn++){var Wn=arguments[Gn];for(var ea in Wn)Wn.hasOwnProperty(ea)&&(Fn[ea]=Wn[ea])}return Fn},Cn=function(Fn,Gn,Kn){if(Fn){var Wn=Et(Fn,"length");(Wn&&typeof Wn.value=="number"?_n:vn).call(Fn,Gn,Kn=Kn||Fn)}return Kn};function Bn(Fn,Gn,Kn,Wn,ea){var Pn={};function jn(Jn,pa){pa=pa||(pa=Et(Gn,Jn))&&(pa.get?pa:pa.value),typeof pa=="string"&&pa[0]==="#"&&(pa=Fn[pa.substring(1)]||pa);var ga=typeof pa=="function",ba=pa,Oa=ea||ga&&!pa.base?pa&&pa.get?Jn in Fn:Fn[Jn]:null,va;(!ea||!Oa)&&(ga&&Oa&&(pa.base=Oa),ga&&Wn!==!1&&(va=Jn.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(Pn[va[3].toLowerCase()+va[4]]=va[2]),(!ba||ga||!ba.get||typeof ba.get!="function"||!zn.isPlainObject(ba))&&(ba={value:ba,writable:!0}),(Et(Fn,Jn)||{configurable:!0}).configurable&&(ba.configurable=!0,ba.enumerable=Kn??!va),Lt(Fn,Jn,ba))}if(Gn){for(var On in Gn)Gn.hasOwnProperty(On)&&!pe.test(On)&&jn(On);for(var On in Pn){var Un=Pn[On],Yn=Fn["set"+Un],ta=Fn["get"+Un]||Yn&&Fn["is"+Un];ta&&(Wn===!0||ta.length===0)&&jn(On,{get:ta,set:Yn})}}return Fn}function zn(){for(var Fn=0,Gn=arguments.length;Fn<Gn;Fn++){var Kn=arguments[Fn];Kn&&wn(this,Kn)}return this}return Bn(zn,{inject:function(Fn){if(Fn){var Gn=Fn.statics===!0?Fn:Fn.statics,Kn=Fn.beans,Wn=Fn.preserve;Gn!==Fn&&Bn(this.prototype,Fn,Fn.enumerable,Kn,Wn),Bn(this,Gn,null,Kn,Wn)}for(var ea=1,Pn=arguments.length;ea<Pn;ea++)this.inject(arguments[ea]);return this},extend:function(){for(var Fn=this,Gn,Kn,Wn=0,ea,Pn=arguments.length;Wn<Pn&&!(Gn&&Kn);Wn++)ea=arguments[Wn],Gn=Gn||ea.initialize,Kn=Kn||ea.prototype;return Gn=Gn||function(){Fn.apply(this,arguments)},Kn=Gn.prototype=Kn||qe(this.prototype),Lt(Kn,"constructor",{value:Gn,writable:!0,configurable:!0}),Bn(Gn,this),arguments.length&&this.inject.apply(Gn,arguments),Gn.base=Fn,Gn}}).inject({enumerable:!1,initialize:zn,set:zn,inject:function(){for(var Fn=0,Gn=arguments.length;Fn<Gn;Fn++){var Kn=arguments[Fn];Kn&&Bn(this,Kn,Kn.enumerable,Kn.beans,Kn.preserve)}return this},extend:function(){var Fn=qe(this);return Fn.inject.apply(Fn,arguments)},each:function(Fn,Gn){return Cn(this,Fn,Gn)},clone:function(){return new this.constructor(this)},statics:{set:wn,each:Cn,create:qe,define:Lt,describe:Et,clone:function(Fn){return wn(new Fn.constructor,Fn)},isPlainObject:function(Fn){var Gn=Fn!=null&&Fn.constructor;return Gn&&(Gn===Object||Gn===zn||Gn.name==="Object")},pick:function(Fn,Gn){return Fn!==r?Fn:Gn},slice:function(Fn,Gn,Kn){return Ve.call(Fn,Gn,Kn)}}})};e.exports=k,k.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+k.each(this,function(pe,Oe){if(!/^_/.test(Oe)){var Ve=typeof pe;this.push(Oe+": "+(Ve==="number"?j.instance.number(pe):Ve==="string"?"'"+pe+"'":pe))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(pe){return k.importJSON(pe,this)},exportJSON:function(pe){return k.exportJSON(this,pe)},toJSON:function(){return k.serialize(this)},set:function(pe,Oe){return pe&&k.filter(this,pe,Oe,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function pe(){var Oe=pe.base.apply(this,arguments),Ve=Oe.prototype._class;return Ve&&!k.exports[Ve]&&(k.exports[Ve]=Oe),Oe},equals:function(pe,Oe){if(pe===Oe)return!0;if(pe&&pe.equals)return pe.equals(Oe);if(Oe&&Oe.equals)return Oe.equals(pe);if(pe&&Oe&&typeof pe=="object"&&typeof Oe=="object"){if(Array.isArray(pe)&&Array.isArray(Oe)){var Ve=pe.length;if(Ve!==Oe.length)return!1;for(;Ve--;)if(!k.equals(pe[Ve],Oe[Ve]))return!1}else{var qe=Object.keys(pe),Ve=qe.length;if(Ve!==Object.keys(Oe).length)return!1;for(;Ve--;){var Et=qe[Ve];if(!(Oe.hasOwnProperty(Et)&&k.equals(pe[Et],Oe[Et])))return!1}}return!0}return!1},read:function(pe,Oe,Ve,qe){if(this===k){var Et=this.peek(pe,Oe);return pe.__index++,Et}var Lt=this.prototype,_n=Lt._readIndex,vn=Oe||_n&&pe.__index||0,wn=pe.length,Cn=pe[vn];if(qe=qe||wn-vn,Cn instanceof this||Ve&&Ve.readNull&&Cn==null&&qe<=1)return _n&&(pe.__index=vn+1),Cn&&Ve&&Ve.clone?Cn.clone():Cn;if(Cn=k.create(Lt),_n&&(Cn.__read=!0),Cn=Cn.initialize.apply(Cn,vn>0||vn+qe<wn?k.slice(pe,vn,vn+qe):pe)||Cn,_n){pe.__index=vn+Cn.__read;var Bn=Cn.__filtered;Bn&&(pe.__filtered=Bn,Cn.__filtered=r),Cn.__read=r}return Cn},peek:function(pe,Oe){return pe[pe.__index=Oe||pe.__index||0]},remain:function(pe){return pe.length-(pe.__index||0)},readList:function(pe,Oe,Ve,qe){for(var Et=[],Lt,_n=Oe||0,vn=qe?_n+qe:pe.length,wn=_n;wn<vn;wn++)Et.push(Array.isArray(Lt=pe[wn])?this.read(Lt,0,Ve):this.read(pe,wn,Ve,1));return Et},readNamed:function(pe,Oe,Ve,qe,Et){var Lt=this.getNamed(pe,Oe),_n=Lt!==r;if(_n){var vn=pe.__filtered;if(!vn){var wn=this.getSource(pe);vn=pe.__filtered=k.create(wn),vn.__unfiltered=wn}vn[Oe]=r}return this.read(_n?[Lt]:pe,Ve,qe,Et)},readSupported:function(pe,Oe){var Ve=this.getSource(pe),qe=this,Et=!1;return Ve&&Object.keys(Ve).forEach(function(Lt){if(Lt in Oe){var _n=qe.readNamed(pe,Lt);_n!==r&&(Oe[Lt]=_n),Et=!0}}),Et},getSource:function(pe){var Oe=pe.__source;if(Oe===r){var Ve=pe.length===1&&pe[0];Oe=pe.__source=Ve&&k.isPlainObject(Ve)?Ve:null}return Oe},getNamed:function(pe,Oe){var Ve=this.getSource(pe);if(Ve)return Oe?Ve[Oe]:pe.__filtered||Ve},hasNamed:function(pe,Oe){return!!this.getNamed(pe,Oe)},filter:function(pe,Oe,Ve,qe){var Et;function Lt(Bn){if(!(Ve&&Bn in Ve)&&!(Et&&Bn in Et)){var zn=Oe[Bn];zn!==r&&(pe[Bn]=zn)}}if(qe){for(var _n={},vn=0,wn,Cn=qe.length;vn<Cn;vn++)(wn=qe[vn])in Oe&&(Lt(wn),_n[wn]=!0);Et=_n}return Object.keys(Oe.__unfiltered||Oe).forEach(Lt),pe},isPlainValue:function(pe,Oe){return k.isPlainObject(pe)||Array.isArray(pe)||Oe&&typeof pe=="string"},serialize:function(pe,Oe,Ve,qe){Oe=Oe||{};var Et=!qe,Lt;if(Et&&(Oe.formatter=new j(Oe.precision),qe={length:0,definitions:{},references:{},add:function(zn,Fn){var Gn="#"+zn._id,Kn=this.references[Gn];if(!Kn){this.length++;var Wn=Fn.call(zn),ea=zn._class;ea&&Wn[0]!==ea&&Wn.unshift(ea),this.definitions[Gn]=Wn,Kn=this.references[Gn]=[Gn]}return Kn}}),pe&&pe._serialize){Lt=pe._serialize(Oe,qe);var _n=pe._class;_n&&!pe._compactSerialize&&(Et||!Ve)&&Lt[0]!==_n&&Lt.unshift(_n)}else if(Array.isArray(pe)){Lt=[];for(var vn=0,wn=pe.length;vn<wn;vn++)Lt[vn]=k.serialize(pe[vn],Oe,Ve,qe)}else if(k.isPlainObject(pe)){Lt={};for(var Cn=Object.keys(pe),vn=0,wn=Cn.length;vn<wn;vn++){var Bn=Cn[vn];Lt[Bn]=k.serialize(pe[Bn],Oe,Ve,qe)}}else typeof pe=="number"?Lt=Oe.formatter.number(pe,Oe.precision):Lt=pe;return Et&&qe.length>0?[["dictionary",qe.definitions],Lt]:Lt},deserialize:function(pe,Oe,Ve,qe,Et){var Lt=pe,_n=!Ve,vn=_n&&pe&&pe.length&&pe[0][0]==="dictionary";if(Ve=Ve||{},Array.isArray(pe)){var wn=pe[0],Cn=wn==="dictionary";if(pe.length==1&&/^#/.test(wn))return Ve.dictionary[wn];wn=k.exports[wn],Lt=[];for(var Bn=wn?1:0,zn=pe.length;Bn<zn;Bn++)Lt.push(k.deserialize(pe[Bn],Oe,Ve,Cn,vn));if(wn){var Fn=Lt;Oe?Lt=Oe(wn,Fn,_n||Et):Lt=new wn(Fn)}}else if(k.isPlainObject(pe)){Lt={},qe&&(Ve.dictionary=Lt);for(var Gn in pe)Lt[Gn]=k.deserialize(pe[Gn],Oe,Ve)}return vn?Lt[1]:Lt},exportJSON:function(pe,Oe){var Ve=k.serialize(pe,Oe);return Oe&&Oe.asString==!1?Ve:JSON.stringify(Ve)},importJSON:function(pe,Oe){return k.deserialize(typeof pe=="string"?JSON.parse(pe):pe,function(Ve,qe,Et){var Lt=Et&&Oe&&Oe.constructor===Ve,_n=Lt?Oe:k.create(Ve.prototype);if(qe.length===1&&_n instanceof Ce&&(Lt||!(_n instanceof ze))){var vn=qe[0];k.isPlainObject(vn)&&(vn.insert=!1,Lt&&(qe=qe.concat([Ce.INSERT])))}return(Lt?_n.set:Ve).apply(_n,qe),Lt&&(Oe=null),_n})},push:function(pe,Oe){var Ve=Oe.length;if(Ve<4096)pe.push.apply(pe,Oe);else{var qe=pe.length;pe.length+=Ve;for(var Et=0;Et<Ve;Et++)pe[qe+Et]=Oe[Et]}return pe},splice:function(pe,Oe,Ve,qe){var Et=Oe&&Oe.length,Lt=Ve===r;Ve=Lt?pe.length:Ve,Ve>pe.length&&(Ve=pe.length);for(var _n=0;_n<Et;_n++)Oe[_n]._index=Ve+_n;if(Lt)return k.push(pe,Oe),[];var vn=[Ve,qe];Oe&&k.push(vn,Oe);for(var wn=pe.splice.apply(pe,vn),_n=0,Cn=wn.length;_n<Cn;_n++)wn[_n]._index=r;for(var _n=Ve+Et,Cn=pe.length;_n<Cn;_n++)pe[_n]._index=_n;return wn},capitalize:function(pe){return pe.replace(/\b[a-z]/g,function(Oe){return Oe.toUpperCase()})},camelize:function(pe){return pe.replace(/-(.)/g,function(Oe,Ve){return Ve.toUpperCase()})},hyphenate:function(pe){return pe.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var $={on:function(pe,Oe){if(typeof pe!="string")k.each(pe,function(Lt,_n){this.on(_n,Lt)},this);else{var Ve=this._eventTypes,qe=Ve&&Ve[pe],Et=this._callbacks=this._callbacks||{};Et=Et[pe]=Et[pe]||[],Et.indexOf(Oe)===-1&&(Et.push(Oe),qe&&qe.install&&Et.length===1&&qe.install.call(this,pe))}return this},off:function(pe,Oe){if(typeof pe!="string"){k.each(pe,function(_n,vn){this.off(vn,_n)},this);return}var Ve=this._eventTypes,qe=Ve&&Ve[pe],Et=this._callbacks&&this._callbacks[pe],Lt;return Et&&(!Oe||(Lt=Et.indexOf(Oe))!==-1&&Et.length===1?(qe&&qe.uninstall&&qe.uninstall.call(this,pe),delete this._callbacks[pe]):Lt!==-1&&Et.splice(Lt,1)),this},once:function(pe,Oe){return this.on(pe,function Ve(){Oe.apply(this,arguments),this.off(pe,Ve)})},emit:function(pe,Oe){var Ve=this._callbacks&&this._callbacks[pe];if(!Ve)return!1;var qe=k.slice(arguments,1),Et=Oe&&Oe.target&&!Oe.currentTarget;Ve=Ve.slice(),Et&&(Oe.currentTarget=this);for(var Lt=0,_n=Ve.length;Lt<_n;Lt++)if(Ve[Lt].apply(this,qe)==!1){Oe&&Oe.stop&&Oe.stop();break}return Et&&delete Oe.currentTarget,!0},responds:function(pe){return!!(this._callbacks&&this._callbacks[pe])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(pe){var Oe=this._eventTypes,Ve=this._callbacks,qe=pe?"install":"uninstall";if(Oe){for(var Et in Ve)if(Ve[Et].length>0){var Lt=Oe[Et],_n=Lt&&Lt[qe];_n&&_n.call(this,Et)}}},statics:{inject:function pe(Oe){var Ve=Oe._events;if(Ve){var qe={};k.each(Ve,function(Et,Lt){var _n=typeof Et=="string",vn=_n?Et:Lt,wn=k.capitalize(vn),Cn=vn.substring(2).toLowerCase();qe[Cn]=_n?{}:Et,vn="_"+vn,Oe["get"+wn]=function(){return this[vn]},Oe["set"+wn]=function(Bn){var zn=this[vn];zn&&this.off(Cn,zn),Bn&&this.on(Cn,Bn),this[vn]=Bn}}),Oe._eventTypes=qe}return pe.base.apply(this,arguments)}}},V=k.extend({_class:"PaperScope",initialize:function pe(){ca=this,this.settings=new k({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=pe._id++,pe._scopes[this._id]=this;var Oe=pe.prototype;if(!this.support){var Ve=oa.getContext(1,1)||{};Oe.support={nativeDash:"setLineDash"in Ve||"mozDash"in Ve,nativeBlendModes:na.nativeModes},oa.release(Ve)}if(!this.agent){var qe=n.navigator.userAgent.toLowerCase(),Et=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(qe)||[])[0],Lt=Et==="darwin"?"mac":Et,_n=Oe.agent=Oe.browser={platform:Lt};Lt&&(_n[Lt]=!0),qe.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(vn,wn,Cn,Bn,zn){if(!_n.chrome){var Fn=wn==="opera"?Bn:/^(node|trident)$/.test(wn)?zn:Cn;_n.version=Fn,_n.versionNumber=parseFloat(Fn),wn={trident:"msie",jsdom:"node"}[wn]||wn,_n.name=wn,_n[wn]=!0}}),_n.chrome&&delete _n.webkit,_n.atom&&delete _n.chrome}},version:"0.12.18",getView:function(){var pe=this.project;return pe&&pe._view},getPaper:function(){return this},execute:function(pe,Oe){var Ve=ca.PaperScript.execute(pe,this,Oe);return xa.updateFocus(),Ve},install:function(pe){var Oe=this;k.each(["project","view","tool"],function(qe){k.define(pe,qe,{configurable:!0,get:function(){return Oe[qe]}})});for(var Ve in this)!/^_/.test(Ve)&&this[Ve]&&(pe[Ve]=this[Ve])},setup:function(pe){return ca=this,this.project=new $e(pe),this},createCanvas:function(pe,Oe){return oa.getCanvas(pe,Oe)},activate:function(){ca=this},clear:function(){for(var pe=this.projects,Oe=this.tools,Ve=pe.length-1;Ve>=0;Ve--)pe[Ve].remove();for(var Ve=Oe.length-1;Ve>=0;Ve--)Oe[Ve].remove()},remove:function(){this.clear(),delete V._scopes[this._id]},statics:new function(){function pe(Oe){return Oe+="Attribute",function(Ve,qe){return Ve[Oe](qe)||Ve[Oe]("data-paper-"+qe)}}return{_scopes:{},_id:0,get:function(Oe){return this._scopes[Oe]||null},getAttribute:pe("get"),hasAttribute:pe("has")}}}),L=k.extend($,{initialize:function(pe){this._scope=ca,this._index=this._scope[this._list].push(this)-1,(pe||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var pe=this._scope[this._reference];return pe&&pe!==this&&pe.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",pe),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(k.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),z={findItemBoundsCollisions:function(pe,Oe,Ve){function qe(_n){for(var vn=new Array(_n.length),wn=0;wn<_n.length;wn++){var Cn=_n[wn].getBounds();vn[wn]=[Cn.left,Cn.top,Cn.right,Cn.bottom]}return vn}var Et=qe(pe),Lt=!Oe||Oe===pe?Et:qe(Oe);return this.findBoundsCollisions(Et,Lt,Ve||0)},findCurveBoundsCollisions:function(pe,Oe,Ve,qe){function Et(Fn){for(var Gn=Math.min,Kn=Math.max,Wn=new Array(Fn.length),ea=0;ea<Fn.length;ea++){var Pn=Fn[ea];Wn[ea]=[Gn(Pn[0],Pn[2],Pn[4],Pn[6]),Gn(Pn[1],Pn[3],Pn[5],Pn[7]),Kn(Pn[0],Pn[2],Pn[4],Pn[6]),Kn(Pn[1],Pn[3],Pn[5],Pn[7])]}return Wn}var Lt=Et(pe),_n=!Oe||Oe===pe?Lt:Et(Oe);if(qe){for(var vn=this.findBoundsCollisions(Lt,_n,Ve||0,!1,!0),wn=this.findBoundsCollisions(Lt,_n,Ve||0,!0,!0),Cn=[],Bn=0,zn=vn.length;Bn<zn;Bn++)Cn[Bn]={hor:vn[Bn],ver:wn[Bn]};return Cn}return this.findBoundsCollisions(Lt,_n,Ve||0)},findBoundsCollisions:function(pe,Oe,Ve,qe,Et){var Lt=!Oe||pe===Oe,_n=Lt?pe:pe.concat(Oe),vn=pe.length,wn=_n.length;function Cn(Ha,Qa,Ja){for(var Ra=0,Fa=Ha.length;Ra<Fa;){var Xa=Fa+Ra>>>1;_n[Ha[Xa]][Qa]<Ja?Ra=Xa+1:Fa=Xa}return Ra-1}for(var Bn=qe?1:0,zn=Bn+2,Fn=qe?0:1,Gn=Fn+2,Kn=new Array(wn),Wn=0;Wn<wn;Wn++)Kn[Wn]=Wn;Kn.sort(function(Ha,Qa){return _n[Ha][Bn]-_n[Qa][Bn]});for(var ea=[],Pn=new Array(vn),Wn=0;Wn<wn;Wn++){var jn=Kn[Wn],On=_n[jn],Un=Lt?jn:jn-vn,Yn=jn<vn,ta=Lt||!Yn,Jn=Yn?[]:null;if(ea.length){var pa=Cn(ea,zn,On[Bn]-Ve)+1;if(ea.splice(0,pa),Lt&&Et){Jn=Jn.concat(ea);for(var ga=0;ga<ea.length;ga++){var ba=ea[ga];Pn[ba].push(Un)}}else for(var Oa=On[Gn],va=On[Fn],ga=0;ga<ea.length;ga++){var ba=ea[ga],Sa=_n[ba],$a=ba<vn,Da=Lt||ba>=vn;(Et||(Yn&&Da||ta&&$a)&&Oa>=Sa[Fn]-Ve&&va<=Sa[Gn]+Ve)&&(Yn&&Da&&Jn.push(Lt?ba:ba-vn),ta&&$a&&Pn[ba].push(Un))}}if(Yn&&(pe===Oe&&Jn.push(jn),Pn[jn]=Jn),ea.length){var Na=On[zn],Va=Cn(ea,zn,Na);ea.splice(Va+1,0,jn)}else ea.push(jn)}for(var Wn=0;Wn<Pn.length;Wn++){var Ua=Pn[Wn];Ua&&Ua.sort(function(Qa,Ja){return Qa-Ja})}return Pn}},j=k.extend({initialize:function(pe){this.precision=k.pick(pe,5),this.multiplier=Math.pow(10,this.precision)},number:function(pe){return this.precision<16?Math.round(pe*this.multiplier)/this.multiplier:pe},pair:function(pe,Oe,Ve){return this.number(pe)+(Ve||",")+this.number(Oe)},point:function(pe,Oe){return this.number(pe.x)+(Oe||",")+this.number(pe.y)},size:function(pe,Oe){return this.number(pe.width)+(Oe||",")+this.number(pe.height)},rectangle:function(pe,Oe){return this.point(pe,Oe)+(Oe||",")+this.size(pe,Oe)}});j.instance=new j;var ae=new function(){var pe=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],Oe=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],Ve=Math.abs,qe=Math.sqrt,Et=Math.pow,Lt=Math.log2||function(zn){return Math.log(zn)*Math.LOG2E},_n=1e-12,vn=112e-18;function wn(zn,Fn,Gn){return zn<Fn?Fn:zn>Gn?Gn:zn}function Cn(zn,Fn,Gn){function Kn(pa){var ga=pa*134217729,ba=pa-ga,Oa=ba+ga,va=pa-Oa;return[Oa,va]}var Wn=Fn*Fn-zn*Gn,ea=Fn*Fn+zn*Gn;if(Ve(Wn)*3<ea){var Pn=Kn(zn),jn=Kn(Fn),On=Kn(Gn),Un=Fn*Fn,Yn=jn[0]*jn[0]-Un+2*jn[0]*jn[1]+jn[1]*jn[1],ta=zn*Gn,Jn=Pn[0]*On[0]-ta+Pn[0]*On[1]+Pn[1]*On[0]+Pn[1]*On[1];Wn=Un-ta+(Yn-Jn)}return Wn}function Bn(){var zn=Math.max.apply(Math,arguments);return zn&&(zn<1e-8||zn>1e8)?Et(2,-Math.round(Lt(zn))):0}return{EPSILON:_n,MACHINE_EPSILON:vn,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(qe(2)-1)/3,isZero:function(zn){return zn>=-_n&&zn<=_n},isMachineZero:function(zn){return zn>=-vn&&zn<=vn},clamp:wn,integrate:function(zn,Fn,Gn,Kn){for(var Wn=pe[Kn-2],ea=Oe[Kn-2],Pn=(Gn-Fn)*.5,jn=Pn+Fn,On=0,Un=Kn+1>>1,Yn=Kn&1?ea[On++]*zn(jn):0;On<Un;){var ta=Pn*Wn[On];Yn+=ea[On++]*(zn(jn+ta)+zn(jn-ta))}return Pn*Yn},findRoot:function(zn,Fn,Gn,Kn,Wn,ea,Pn){for(var jn=0;jn<ea;jn++){var On=zn(Gn),Un=On/Fn(Gn),Yn=Gn-Un;if(Ve(Un)<Pn){Gn=Yn;break}On>0?(Wn=Gn,Gn=Yn<=Kn?(Kn+Wn)*.5:Yn):(Kn=Gn,Gn=Yn>=Wn?(Kn+Wn)*.5:Yn)}return wn(Gn,Kn,Wn)},solveQuadratic:function(zn,Fn,Gn,Kn,Wn,ea){var Pn,jn=1/0;if(Ve(zn)<_n){if(Ve(Fn)<_n)return Ve(Gn)<_n?-1:0;Pn=-Gn/Fn}else{Fn*=-.5;var On=Cn(zn,Fn,Gn);if(On&&Ve(On)<vn){var Un=Bn(Ve(zn),Ve(Fn),Ve(Gn));Un&&(zn*=Un,Fn*=Un,Gn*=Un,On=Cn(zn,Fn,Gn))}if(On>=-vn){var Yn=On<0?0:qe(On),ta=Fn+(Fn<0?-Yn:Yn);ta===0?(Pn=Gn/zn,jn=-Pn):(Pn=ta/zn,jn=Gn/ta)}}var Jn=0,pa=Wn==null,ga=Wn-_n,ba=ea+_n;return isFinite(Pn)&&(pa||Pn>ga&&Pn<ba)&&(Kn[Jn++]=pa?Pn:wn(Pn,Wn,ea)),jn!==Pn&&isFinite(jn)&&(pa||jn>ga&&jn<ba)&&(Kn[Jn++]=pa?jn:wn(jn,Wn,ea)),Jn},solveCubic:function(zn,Fn,Gn,Kn,Wn,ea,Pn){var jn=Bn(Ve(zn),Ve(Fn),Ve(Gn),Ve(Kn)),On,Un,Yn,ta,Jn;jn&&(zn*=jn,Fn*=jn,Gn*=jn,Kn*=jn);function pa(Va){On=Va;var Ua=zn*On;Un=Ua+Fn,Yn=Un*On+Gn,ta=(Ua+Un)*On+Yn,Jn=Yn*On+Kn}if(Ve(zn)<_n)zn=Fn,Un=Gn,Yn=Kn,On=1/0;else if(Ve(Kn)<_n)Un=Fn,Yn=Gn,On=0;else{pa(-(Fn/zn)/3);var ga=Jn/zn,ba=Et(Ve(ga),1/3),Oa=ga<0?-1:1,va=-ta/zn,Sa=va>0?1.324717957244746*Math.max(ba,qe(va)):ba,$a=On-Oa*Sa;if($a!==On){do pa($a),$a=ta===0?On:On-Jn/ta/(1+vn);while(Oa*$a>Oa*On);Ve(zn)*On*On>Ve(Kn/On)&&(Yn=-Kn/On,Un=(Yn-Gn)/On)}}var Da=ae.solveQuadratic(zn,Un,Yn,Wn,ea,Pn),Na=ea==null;return isFinite(On)&&(Da===0||Da>0&&On!==Wn[0]&&On!==Wn[1])&&(Na||On>ea-_n&&On<Pn+_n)&&(Wn[Da++]=Na?On:wn(On,ea,Pn)),Da}}},oe={_id:1,_pools:{},get:function(pe){if(pe){var Oe=this._pools[pe];return Oe||(Oe=this._pools[pe]={_id:1}),Oe._id++}else return this._id++}},re=k.extend({_class:"Point",_readIndex:!0,initialize:function(Oe,Ve){var qe=typeof Oe,Et=this.__read,Lt=0;if(qe==="number"){var _n=typeof Ve=="number";this._set(Oe,_n?Ve:Oe),Et&&(Lt=_n?2:1)}else if(qe==="undefined"||Oe===null)this._set(0,0),Et&&(Lt=Oe===null?1:0);else{var vn=qe==="string"?Oe.split(/[\s,]+/)||[]:Oe;Lt=1,Array.isArray(vn)?this._set(+vn[0],+(vn.length>1?vn[1]:vn[0])):"x"in vn?this._set(vn.x||0,vn.y||0):"width"in vn?this._set(vn.width||0,vn.height||0):"angle"in vn?(this._set(vn.length||0,0),this.setAngle(vn.angle||0)):(this._set(0,0),Lt=0)}return Et&&(this.__read=Lt),this},set:"#initialize",_set:function(pe,Oe){return this.x=pe,this.y=Oe,this},equals:function(pe){return this===pe||pe&&(this.x===pe.x&&this.y===pe.y||Array.isArray(pe)&&this.x===pe[0]&&this.y===pe[1])||!1},clone:function(){return new re(this.x,this.y)},toString:function(){var pe=j.instance;return"{ x: "+pe.number(this.x)+", y: "+pe.number(this.y)+" }"},_serialize:function(pe){var Oe=pe.formatter;return[Oe.number(this.x),Oe.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(pe){if(this.isZero()){var Oe=this._angle||0;this._set(Math.cos(Oe)*pe,Math.sin(Oe)*pe)}else{var Ve=pe/this.getLength();ae.isZero(Ve)&&this.getAngle(),this._set(this.x*Ve,this.y*Ve)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(pe){this.setAngleInRadians.call(this,pe*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var pe=re.read(arguments),Oe=this.getLength()*pe.getLength();if(ae.isZero(Oe))return NaN;var Ve=this.dot(pe)/Oe;return Math.acos(Ve<-1?-1:Ve>1?1:Ve)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(pe){if(this._angle=pe,!this.isZero()){var Oe=this.getLength();this._set(Math.cos(pe)*Oe,Math.sin(pe)*Oe)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var pe=re.read(arguments);return Math.atan2(this.cross(pe),this.dot(pe))*180/Math.PI},getDistance:function(){var pe=arguments,Oe=re.read(pe),Ve=Oe.x-this.x,qe=Oe.y-this.y,Et=Ve*Ve+qe*qe,Lt=k.read(pe);return Lt?Et:Math.sqrt(Et)},normalize:function(pe){pe===r&&(pe=1);var Oe=this.getLength(),Ve=Oe!==0?pe/Oe:0,qe=new re(this.x*Ve,this.y*Ve);return Ve>=0&&(qe._angle=this._angle),qe},rotate:function(pe,Oe){if(pe===0)return this.clone();pe=pe*Math.PI/180;var Ve=Oe?this.subtract(Oe):this,qe=Math.sin(pe),Et=Math.cos(pe);return Ve=new re(Ve.x*Et-Ve.y*qe,Ve.x*qe+Ve.y*Et),Oe?Ve.add(Oe):Ve},transform:function(pe){return pe?pe._transformPoint(this):this},add:function(){var pe=re.read(arguments);return new re(this.x+pe.x,this.y+pe.y)},subtract:function(){var pe=re.read(arguments);return new re(this.x-pe.x,this.y-pe.y)},multiply:function(){var pe=re.read(arguments);return new re(this.x*pe.x,this.y*pe.y)},divide:function(){var pe=re.read(arguments);return new re(this.x/pe.x,this.y/pe.y)},modulo:function(){var pe=re.read(arguments);return new re(this.x%pe.x,this.y%pe.y)},negate:function(){return new re(-this.x,-this.y)},isInside:function(){return he.read(arguments).contains(this)},isClose:function(){var pe=arguments,Oe=re.read(pe),Ve=k.read(pe);return this.getDistance(Oe)<=Ve},isCollinear:function(){var pe=re.read(arguments);return re.isCollinear(this.x,this.y,pe.x,pe.y)},isColinear:"#isCollinear",isOrthogonal:function(){var pe=re.read(arguments);return re.isOrthogonal(this.x,this.y,pe.x,pe.y)},isZero:function(){var pe=ae.isZero;return pe(this.x)&&pe(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(pe){return this.x*(pe>1&&pe<4?-1:1)>=0&&this.y*(pe>2?-1:1)>=0},dot:function(){var pe=re.read(arguments);return this.x*pe.x+this.y*pe.y},cross:function(){var pe=re.read(arguments);return this.x*pe.y-this.y*pe.x},project:function(){var pe=re.read(arguments),Oe=pe.isZero()?0:this.dot(pe)/pe.dot(pe);return new re(pe.x*Oe,pe.y*Oe)},statics:{min:function(){var pe=arguments,Oe=re.read(pe),Ve=re.read(pe);return new re(Math.min(Oe.x,Ve.x),Math.min(Oe.y,Ve.y))},max:function(){var pe=arguments,Oe=re.read(pe),Ve=re.read(pe);return new re(Math.max(Oe.x,Ve.x),Math.max(Oe.y,Ve.y))},random:function(){return new re(Math.random(),Math.random())},isCollinear:function(pe,Oe,Ve,qe){return Math.abs(pe*qe-Oe*Ve)<=Math.sqrt((pe*pe+Oe*Oe)*(Ve*Ve+qe*qe))*1e-8},isOrthogonal:function(pe,Oe,Ve,qe){return Math.abs(pe*Ve+Oe*qe)<=Math.sqrt((pe*pe+Oe*Oe)*(Ve*Ve+qe*qe))*1e-8}}},k.each(["round","ceil","floor","abs"],function(pe){var Oe=Math[pe];this[pe]=function(){return new re(Oe(this.x),Oe(this.y))}},{})),ue=re.extend({initialize:function(Oe,Ve,qe,Et){this._x=Oe,this._y=Ve,this._owner=qe,this._setter=Et},_set:function(pe,Oe,Ve){return this._x=pe,this._y=Oe,Ve||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(pe){this._x=pe,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(pe){this._y=pe,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(pe){this._owner._changeSelection(this._getSelection(),pe)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),le=k.extend({_class:"Size",_readIndex:!0,initialize:function(Oe,Ve){var qe=typeof Oe,Et=this.__read,Lt=0;if(qe==="number"){var _n=typeof Ve=="number";this._set(Oe,_n?Ve:Oe),Et&&(Lt=_n?2:1)}else if(qe==="undefined"||Oe===null)this._set(0,0),Et&&(Lt=Oe===null?1:0);else{var vn=qe==="string"?Oe.split(/[\s,]+/)||[]:Oe;Lt=1,Array.isArray(vn)?this._set(+vn[0],+(vn.length>1?vn[1]:vn[0])):"width"in vn?this._set(vn.width||0,vn.height||0):"x"in vn?this._set(vn.x||0,vn.y||0):(this._set(0,0),Lt=0)}return Et&&(this.__read=Lt),this},set:"#initialize",_set:function(pe,Oe){return this.width=pe,this.height=Oe,this},equals:function(pe){return pe===this||pe&&(this.width===pe.width&&this.height===pe.height||Array.isArray(pe)&&this.width===pe[0]&&this.height===pe[1])||!1},clone:function(){return new le(this.width,this.height)},toString:function(){var pe=j.instance;return"{ width: "+pe.number(this.width)+", height: "+pe.number(this.height)+" }"},_serialize:function(pe){var Oe=pe.formatter;return[Oe.number(this.width),Oe.number(this.height)]},add:function(){var pe=le.read(arguments);return new le(this.width+pe.width,this.height+pe.height)},subtract:function(){var pe=le.read(arguments);return new le(this.width-pe.width,this.height-pe.height)},multiply:function(){var pe=le.read(arguments);return new le(this.width*pe.width,this.height*pe.height)},divide:function(){var pe=le.read(arguments);return new le(this.width/pe.width,this.height/pe.height)},modulo:function(){var pe=le.read(arguments);return new le(this.width%pe.width,this.height%pe.height)},negate:function(){return new le(-this.width,-this.height)},isZero:function(){var pe=ae.isZero;return pe(this.width)&&pe(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(pe,Oe){return new le(Math.min(pe.width,Oe.width),Math.min(pe.height,Oe.height))},max:function(pe,Oe){return new le(Math.max(pe.width,Oe.width),Math.max(pe.height,Oe.height))},random:function(){return new le(Math.random(),Math.random())}}},k.each(["round","ceil","floor","abs"],function(pe){var Oe=Math[pe];this[pe]=function(){return new le(Oe(this.width),Oe(this.height))}},{})),de=le.extend({initialize:function(Oe,Ve,qe,Et){this._width=Oe,this._height=Ve,this._owner=qe,this._setter=Et},_set:function(pe,Oe,Ve){return this._width=pe,this._height=Oe,Ve||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(pe){this._width=pe,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(pe){this._height=pe,this._owner[this._setter](this)}}),he=k.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(Oe,Ve,qe,Et){var Lt=arguments,_n=typeof Oe,vn;if(_n==="number"?(this._set(Oe,Ve,qe,Et),vn=4):_n==="undefined"||Oe===null?(this._set(0,0,0,0),vn=Oe===null?1:0):Lt.length===1&&(Array.isArray(Oe)?(this._set.apply(this,Oe),vn=1):Oe.x!==r||Oe.width!==r?(this._set(Oe.x||0,Oe.y||0,Oe.width||0,Oe.height||0),vn=1):Oe.from===r&&Oe.to===r&&(this._set(0,0,0,0),k.readSupported(Lt,this)&&(vn=1))),vn===r){var wn=re.readNamed(Lt,"from"),Cn=k.peek(Lt),Bn=wn.x,zn=wn.y,Fn,Gn;if(Cn&&Cn.x!==r||k.hasNamed(Lt,"to")){var Kn=re.readNamed(Lt,"to");Fn=Kn.x-Bn,Gn=Kn.y-zn,Fn<0&&(Bn=Kn.x,Fn=-Fn),Gn<0&&(zn=Kn.y,Gn=-Gn)}else{var Wn=le.read(Lt);Fn=Wn.width,Gn=Wn.height}this._set(Bn,zn,Fn,Gn),vn=Lt.__index}var ea=Lt.__filtered;return ea&&(this.__filtered=ea),this.__read&&(this.__read=vn),this},set:"#initialize",_set:function(pe,Oe,Ve,qe){return this.x=pe,this.y=Oe,this.width=Ve,this.height=qe,this},clone:function(){return new he(this.x,this.y,this.width,this.height)},equals:function(pe){var Oe=k.isPlainValue(pe)?he.read(arguments):pe;return Oe===this||Oe&&this.x===Oe.x&&this.y===Oe.y&&this.width===Oe.width&&this.height===Oe.height||!1},toString:function(){var pe=j.instance;return"{ x: "+pe.number(this.x)+", y: "+pe.number(this.y)+", width: "+pe.number(this.width)+", height: "+pe.number(this.height)+" }"},_serialize:function(pe){var Oe=pe.formatter;return[Oe.number(this.x),Oe.number(this.y),Oe.number(this.width),Oe.number(this.height)]},getPoint:function(pe){var Oe=pe?re:ue;return new Oe(this.x,this.y,this,"setPoint")},setPoint:function(){var pe=re.read(arguments);this.x=pe.x,this.y=pe.y},getSize:function(pe){var Oe=pe?le:de;return new Oe(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var pe=le.read(arguments),Oe=this._sx,Ve=this._sy,qe=pe.width,Et=pe.height;Oe&&(this.x+=(this.width-qe)*Oe),Ve&&(this.y+=(this.height-Et)*Ve),this.width=qe,this.height=Et,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(pe){if(!this._fw){var Oe=pe-this.x;this.width-=this._sx===.5?Oe*2:Oe}this.x=pe,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(pe){if(!this._fh){var Oe=pe-this.y;this.height-=this._sy===.5?Oe*2:Oe}this.y=pe,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(pe){if(!this._fw){var Oe=pe-this.x;this.width=this._sx===.5?Oe*2:Oe}this.x=pe-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(pe){if(!this._fh){var Oe=pe-this.y;this.height=this._sy===.5?Oe*2:Oe}this.y=pe-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(pe){this._fw||this._sx===.5?this.x=pe-this.width/2:(this._sx&&(this.x+=(pe-this.x)*2*this._sx),this.width=(pe-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(pe){this._fh||this._sy===.5?this.y=pe-this.height/2:(this._sy&&(this.y+=(pe-this.y)*2*this._sy),this.height=(pe-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(pe){var Oe=pe?re:ue;return new Oe(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var pe=re.read(arguments);return this.setCenterX(pe.x),this.setCenterY(pe.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(pe){return pe&&pe.width!==r||(Array.isArray(pe)?pe:arguments).length===4?this._containsRectangle(he.read(arguments)):this._containsPoint(re.read(arguments))},_containsPoint:function(pe){var Oe=pe.x,Ve=pe.y;return Oe>=this.x&&Ve>=this.y&&Oe<=this.x+this.width&&Ve<=this.y+this.height},_containsRectangle:function(pe){var Oe=pe.x,Ve=pe.y;return Oe>=this.x&&Ve>=this.y&&Oe+pe.width<=this.x+this.width&&Ve+pe.height<=this.y+this.height},intersects:function(){var pe=he.read(arguments),Oe=k.read(arguments)||0;return pe.x+pe.width>this.x-Oe&&pe.y+pe.height>this.y-Oe&&pe.x<this.x+this.width+Oe&&pe.y<this.y+this.height+Oe},intersect:function(){var pe=he.read(arguments),Oe=Math.max(this.x,pe.x),Ve=Math.max(this.y,pe.y),qe=Math.min(this.x+this.width,pe.x+pe.width),Et=Math.min(this.y+this.height,pe.y+pe.height);return new he(Oe,Ve,qe-Oe,Et-Ve)},unite:function(){var pe=he.read(arguments),Oe=Math.min(this.x,pe.x),Ve=Math.min(this.y,pe.y),qe=Math.max(this.x+this.width,pe.x+pe.width),Et=Math.max(this.y+this.height,pe.y+pe.height);return new he(Oe,Ve,qe-Oe,Et-Ve)},include:function(){var pe=re.read(arguments),Oe=Math.min(this.x,pe.x),Ve=Math.min(this.y,pe.y),qe=Math.max(this.x+this.width,pe.x),Et=Math.max(this.y+this.height,pe.y);return new he(Oe,Ve,qe-Oe,Et-Ve)},expand:function(){var pe=le.read(arguments),Oe=pe.width,Ve=pe.height;return new he(this.x-Oe/2,this.y-Ve/2,this.width+Oe,this.height+Ve)},scale:function(pe,Oe){return this.expand(this.width*pe-this.width,this.height*(Oe===r?pe:Oe)-this.height)}},k.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(pe,Oe){var Ve=pe.join(""),qe=/^[RL]/.test(Ve);Oe>=4&&(pe[1]+=qe?"Y":"X");var Et=pe[qe?0:1],Lt=pe[qe?1:0],_n="get"+Et,vn="get"+Lt,wn="set"+Et,Cn="set"+Lt,Bn="get"+Ve,zn="set"+Ve;this[Bn]=function(Fn){var Gn=Fn?re:ue;return new Gn(this[_n](),this[vn](),this,zn)},this[zn]=function(){var Fn=re.read(arguments);this[wn](Fn.x),this[Cn](Fn.y)}},{beans:!0})),_e=he.extend({initialize:function(Oe,Ve,qe,Et,Lt,_n){this._set(Oe,Ve,qe,Et,!0),this._owner=Lt,this._setter=_n},_set:function(pe,Oe,Ve,qe,Et){return this._x=pe,this._y=Oe,this._width=Ve,this._height=qe,Et||this._owner[this._setter](this),this}},new function(){var pe=he.prototype;return k.each(["x","y","width","height"],function(Oe){var Ve=k.capitalize(Oe),qe="_"+Oe;this["get"+Ve]=function(){return this[qe]},this["set"+Ve]=function(Et){this[qe]=Et,this._dontNotify||this._owner[this._setter](this)}},k.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(Oe){var Ve="set"+Oe;this[Ve]=function(){this._dontNotify=!0,pe[Ve].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(Oe){var Ve=this._owner;Ve._changeSelection&&Ve._changeSelection(2,Oe)}}))}),xe=k.extend({_class:"Matrix",initialize:function pe(Oe,Ve){var qe=arguments,Et=qe.length,Lt=!0;if(Et>=6?this._set.apply(this,qe):Et===1||Et===2?Oe instanceof pe?this._set(Oe._a,Oe._b,Oe._c,Oe._d,Oe._tx,Oe._ty,Ve):Array.isArray(Oe)?this._set.apply(this,Ve?Oe.concat([Ve]):Oe):Lt=!1:Et?Lt=!1:this.reset(),!Lt)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(pe,Oe,Ve,qe,Et,Lt,_n){return this._a=pe,this._b=Oe,this._c=Ve,this._d=qe,this._tx=Et,this._ty=Lt,_n||this._changed(),this},_serialize:function(pe,Oe){return k.serialize(this.getValues(),pe,!0,Oe)},_changed:function(){var pe=this._owner;pe&&(pe._applyMatrix?pe.transform(null,!0):pe._changed(25))},clone:function(){return new xe(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(pe){return pe===this||pe&&this._a===pe._a&&this._b===pe._b&&this._c===pe._c&&this._d===pe._d&&this._tx===pe._tx&&this._ty===pe._ty},toString:function(){var pe=j.instance;return"[["+[pe.number(this._a),pe.number(this._c),pe.number(this._tx)].join(", ")+"], ["+[pe.number(this._b),pe.number(this._d),pe.number(this._ty)].join(", ")+"]]"},reset:function(pe){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,pe||this._changed(),this},apply:function(pe,Oe){var Ve=this._owner;return Ve?(Ve.transform(null,k.pick(pe,!0),Oe),this.isIdentity()):!1},translate:function(){var pe=re.read(arguments),Oe=pe.x,Ve=pe.y;return this._tx+=Oe*this._a+Ve*this._c,this._ty+=Oe*this._b+Ve*this._d,this._changed(),this},scale:function(){var pe=arguments,Oe=re.read(pe),Ve=re.read(pe,0,{readNull:!0});return Ve&&this.translate(Ve),this._a*=Oe.x,this._b*=Oe.x,this._c*=Oe.y,this._d*=Oe.y,Ve&&this.translate(Ve.negate()),this._changed(),this},rotate:function(pe){pe*=Math.PI/180;var Oe=re.read(arguments,1),Ve=Oe.x,qe=Oe.y,Et=Math.cos(pe),Lt=Math.sin(pe),_n=Ve-Ve*Et+qe*Lt,vn=qe-Ve*Lt-qe*Et,wn=this._a,Cn=this._b,Bn=this._c,zn=this._d;return this._a=Et*wn+Lt*Bn,this._b=Et*Cn+Lt*zn,this._c=-Lt*wn+Et*Bn,this._d=-Lt*Cn+Et*zn,this._tx+=_n*wn+vn*Bn,this._ty+=_n*Cn+vn*zn,this._changed(),this},shear:function(){var pe=arguments,Oe=re.read(pe),Ve=re.read(pe,0,{readNull:!0});Ve&&this.translate(Ve);var qe=this._a,Et=this._b;return this._a+=Oe.y*this._c,this._b+=Oe.y*this._d,this._c+=Oe.x*qe,this._d+=Oe.x*Et,Ve&&this.translate(Ve.negate()),this._changed(),this},skew:function(){var pe=arguments,Oe=re.read(pe),Ve=re.read(pe,0,{readNull:!0}),qe=Math.PI/180,Et=new re(Math.tan(Oe.x*qe),Math.tan(Oe.y*qe));return this.shear(Et,Ve)},append:function(pe,Oe){if(pe){var Ve=this._a,qe=this._b,Et=this._c,Lt=this._d,_n=pe._a,vn=pe._c,wn=pe._b,Cn=pe._d,Bn=pe._tx,zn=pe._ty;this._a=_n*Ve+wn*Et,this._c=vn*Ve+Cn*Et,this._b=_n*qe+wn*Lt,this._d=vn*qe+Cn*Lt,this._tx+=Bn*Ve+zn*Et,this._ty+=Bn*qe+zn*Lt,Oe||this._changed()}return this},prepend:function(pe,Oe){if(pe){var Ve=this._a,qe=this._b,Et=this._c,Lt=this._d,_n=this._tx,vn=this._ty,wn=pe._a,Cn=pe._c,Bn=pe._b,zn=pe._d,Fn=pe._tx,Gn=pe._ty;this._a=wn*Ve+Cn*qe,this._c=wn*Et+Cn*Lt,this._b=Bn*Ve+zn*qe,this._d=Bn*Et+zn*Lt,this._tx=wn*_n+Cn*vn+Fn,this._ty=Bn*_n+zn*vn+Gn,Oe||this._changed()}return this},appended:function(pe){return this.clone().append(pe)},prepended:function(pe){return this.clone().prepend(pe)},invert:function(){var pe=this._a,Oe=this._b,Ve=this._c,qe=this._d,Et=this._tx,Lt=this._ty,_n=pe*qe-Oe*Ve,vn=null;return _n&&!isNaN(_n)&&isFinite(Et)&&isFinite(Lt)&&(this._a=qe/_n,this._b=-Oe/_n,this._c=-Ve/_n,this._d=pe/_n,this._tx=(Ve*Lt-qe*Et)/_n,this._ty=(Oe*Et-pe*Lt)/_n,vn=this),vn},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new xe(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var pe=this._a*this._d-this._c*this._b;return pe&&!isNaN(pe)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(pe,Oe,Ve){return arguments.length<3?this._transformPoint(re.read(arguments)):this._transformCoordinates(pe,Oe,Ve)},_transformPoint:function(pe,Oe,Ve){var qe=pe.x,Et=pe.y;return Oe||(Oe=new re),Oe._set(qe*this._a+Et*this._c+this._tx,qe*this._b+Et*this._d+this._ty,Ve)},_transformCoordinates:function(pe,Oe,Ve){for(var qe=0,Et=2*Ve;qe<Et;qe+=2){var Lt=pe[qe],_n=pe[qe+1];Oe[qe]=Lt*this._a+_n*this._c+this._tx,Oe[qe+1]=Lt*this._b+_n*this._d+this._ty}return Oe},_transformCorners:function(pe){var Oe=pe.x,Ve=pe.y,qe=Oe+pe.width,Et=Ve+pe.height,Lt=[Oe,Ve,qe,Ve,qe,Et,Oe,Et];return this._transformCoordinates(Lt,Lt,4)},_transformBounds:function(pe,Oe,Ve){for(var qe=this._transformCorners(pe),Et=qe.slice(0,2),Lt=Et.slice(),_n=2;_n<8;_n++){var vn=qe[_n],wn=_n&1;vn<Et[wn]?Et[wn]=vn:vn>Lt[wn]&&(Lt[wn]=vn)}return Oe||(Oe=new he),Oe._set(Et[0],Et[1],Lt[0]-Et[0],Lt[1]-Et[1],Ve)},inverseTransform:function(){return this._inverseTransform(re.read(arguments))},_inverseTransform:function(pe,Oe,Ve){var qe=this._a,Et=this._b,Lt=this._c,_n=this._d,vn=this._tx,wn=this._ty,Cn=qe*_n-Et*Lt,Bn=null;if(Cn&&!isNaN(Cn)&&isFinite(vn)&&isFinite(wn)){var zn=pe.x-this._tx,Fn=pe.y-this._ty;Oe||(Oe=new re),Bn=Oe._set((zn*_n-Fn*Lt)/Cn,(Fn*qe-zn*Et)/Cn,Ve)}return Bn},decompose:function(){var pe=this._a,Oe=this._b,Ve=this._c,qe=this._d,Et=pe*qe-Oe*Ve,Lt=Math.sqrt,_n=Math.atan2,vn=180/Math.PI,wn,Cn,Bn;if(pe!==0||Oe!==0){var zn=Lt(pe*pe+Oe*Oe);wn=Math.acos(pe/zn)*(Oe>0?1:-1),Cn=[zn,Et/zn],Bn=[_n(pe*Ve+Oe*qe,zn*zn),0]}else if(Ve!==0||qe!==0){var Fn=Lt(Ve*Ve+qe*qe);wn=Math.asin(Ve/Fn)*(qe>0?1:-1),Cn=[Et/Fn,Fn],Bn=[0,_n(pe*Ve+Oe*qe,Fn*Fn)]}else wn=0,Bn=Cn=[0,0];return{translation:this.getTranslation(),rotation:wn*vn,scaling:new re(Cn),skewing:new re(Bn[0]*vn,Bn[1]*vn)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new re(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(pe){this.isIdentity()||pe.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},k.each(["a","b","c","d","tx","ty"],function(pe){var Oe=k.capitalize(pe),Ve="_"+pe;this["get"+Oe]=function(){return this[Ve]},this["set"+Oe]=function(qe){this[Ve]=qe,this._changed()}},{})),Ne=k.extend({_class:"Line",initialize:function(Oe,Ve,qe,Et,Lt){var _n=!1;arguments.length>=4?(this._px=Oe,this._py=Ve,this._vx=qe,this._vy=Et,_n=Lt):(this._px=Oe.x,this._py=Oe.y,this._vx=Ve.x,this._vy=Ve.y,_n=qe),_n||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new re(this._px,this._py)},getVector:function(){return new re(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(pe,Oe){return Ne.intersect(this._px,this._py,this._vx,this._vy,pe._px,pe._py,pe._vx,pe._vy,!0,Oe)},getSide:function(pe,Oe){return Ne.getSide(this._px,this._py,this._vx,this._vy,pe.x,pe.y,!0,Oe)},getDistance:function(pe){return Math.abs(this.getSignedDistance(pe))},getSignedDistance:function(pe){return Ne.getSignedDistance(this._px,this._py,this._vx,this._vy,pe.x,pe.y,!0)},isCollinear:function(pe){return re.isCollinear(this._vx,this._vy,pe._vx,pe._vy)},isOrthogonal:function(pe){return re.isOrthogonal(this._vx,this._vy,pe._vx,pe._vy)},statics:{intersect:function(pe,Oe,Ve,qe,Et,Lt,_n,vn,wn,Cn){wn||(Ve-=pe,qe-=Oe,_n-=Et,vn-=Lt);var Bn=Ve*vn-qe*_n;if(!ae.isMachineZero(Bn)){var zn=pe-Et,Fn=Oe-Lt,Gn=(_n*Fn-vn*zn)/Bn,Kn=(Ve*Fn-qe*zn)/Bn,Wn=1e-12,ea=-Wn,Pn=1+Wn;if(Cn||ea<Gn&&Gn<Pn&&ea<Kn&&Kn<Pn)return Cn||(Gn=Gn<=0?0:Gn>=1?1:Gn),new re(pe+Gn*Ve,Oe+Gn*qe)}},getSide:function(pe,Oe,Ve,qe,Et,Lt,_n,vn){_n||(Ve-=pe,qe-=Oe);var wn=Et-pe,Cn=Lt-Oe,Bn=wn*qe-Cn*Ve;return!vn&&ae.isMachineZero(Bn)&&(Bn=(wn*Ve+wn*Ve)/(Ve*Ve+qe*qe),Bn>=0&&Bn<=1&&(Bn=0)),Bn<0?-1:Bn>0?1:0},getSignedDistance:function(pe,Oe,Ve,qe,Et,Lt,_n){return _n||(Ve-=pe,qe-=Oe),Ve===0?qe>0?Et-pe:pe-Et:qe===0?Ve<0?Lt-Oe:Oe-Lt:((Et-pe)*qe-(Lt-Oe)*Ve)/(qe>Ve?qe*Math.sqrt(1+Ve*Ve/(qe*qe)):Ve*Math.sqrt(1+qe*qe/(Ve*Ve)))},getDistance:function(pe,Oe,Ve,qe,Et,Lt,_n){return Math.abs(Ne.getSignedDistance(pe,Oe,Ve,qe,Et,Lt,_n))}}}),$e=L.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(Oe){L.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new En(null,null,this),this._view=xa.create(this,Oe||oa.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(pe,Oe){return k.serialize(this._children,pe,!0,Oe)},_changed:function(pe,Oe){if(pe&1){var Ve=this._view;Ve&&(Ve._needsUpdate=!0,!Ve._requested&&Ve._autoUpdate&&Ve.requestUpdate())}var qe=this._changes;if(qe&&Oe){var Et=this._changesById,Lt=Oe._id,_n=Et[Lt];_n?_n.flags|=pe:qe.push(Et[Lt]={item:Oe,flags:pe})}},clear:function(){for(var pe=this._children,Oe=pe.length-1;Oe>=0;Oe--)pe[Oe].remove()},isEmpty:function(){return!this._children.length},remove:function pe(){return pe.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(pe){this._currentStyle.set(pe)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new ze({project:this,insert:!0})},getSymbolDefinitions:function(){var pe=[],Oe={};return this.getItems({class:hn,match:function(Ve){var qe=Ve._definition,Et=qe._id;return Oe[Et]||(Oe[Et]=!0,pe.push(qe)),!1}}),pe},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var pe=this._selectionItems,Oe=[];for(var Ve in pe){var qe=pe[Ve],Et=qe._selection;Et&1&&qe.isInserted()?Oe.push(qe):Et||this._updateSelection(qe)}return Oe},_updateSelection:function(pe){var Oe=pe._id,Ve=this._selectionItems;pe._selection?Ve[Oe]!==pe&&(this._selectionCount++,Ve[Oe]=pe):Ve[Oe]===pe&&(this._selectionCount--,delete Ve[Oe])},selectAll:function(){for(var pe=this._children,Oe=0,Ve=pe.length;Oe<Ve;Oe++)pe[Oe].setFullySelected(!0)},deselectAll:function(){var pe=this._selectionItems;for(var Oe in pe)pe[Oe].setFullySelected(!1)},addLayer:function(pe){return this.insertLayer(r,pe)},insertLayer:function(pe,Oe){if(Oe instanceof ze){Oe._remove(!1,!0),k.splice(this._children,[Oe],pe,0),Oe._setProject(this,!0);var Ve=Oe._name;Ve&&Oe.setName(Ve),this._changes&&Oe._changed(5),this._activeLayer||(this._activeLayer=Oe)}else Oe=null;return Oe},_insertItem:function(pe,Oe,Ve){return Oe=this.insertLayer(pe,Oe)||(this._activeLayer||this._insertItem(r,new ze(Ce.NO_INSERT),!0)).insertChild(pe,Oe),Ve&&Oe.activate&&Oe.activate(),Oe},getItems:function(pe){return Ce._getItems(this,pe)},getItem:function(pe){return Ce._getItems(this,pe,null,null,!0)[0]||null},importJSON:function(pe){this.activate();var Oe=this._activeLayer;return k.importJSON(pe,Oe&&Oe.isEmpty()&&Oe)},removeOn:function(pe){var Oe=this._removeSets;if(Oe){pe==="mouseup"&&(Oe.mousedrag=null);var Ve=Oe[pe];if(Ve){for(var qe in Ve){var Et=Ve[qe];for(var Lt in Oe){var _n=Oe[Lt];_n&&_n!=Ve&&delete _n[Et._id]}Et.remove()}Oe[pe]=null}}},draw:function(pe,Oe,Ve){this._updateVersion++,pe.save(),Oe.applyToContext(pe);for(var qe=this._children,Et=new k({offset:new re(0,0),pixelRatio:Ve,viewMatrix:Oe.isIdentity()?null:Oe,matrices:[new xe],updateMatrix:!0}),Lt=0,_n=qe.length;Lt<_n;Lt++)qe[Lt].draw(pe,Et);if(pe.restore(),this._selectionCount>0){pe.save(),pe.strokeWidth=1;var vn=this._selectionItems,wn=this._scope.settings.handleSize,Cn=this._updateVersion;for(var Bn in vn)vn[Bn]._drawSelection(pe,Oe,wn,vn,Cn);pe.restore()}}}),Ce=k.extend($,{statics:{extend:function pe(Oe){return Oe._serializeFields&&(Oe._serializeFields=k.set({},this.prototype._serializeFields,Oe._serializeFields)),pe.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new xe,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var pe=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return k.each(pe,function(Oe){this._events[Oe]={install:function(Ve){this.getView()._countItemEvent(Ve,1)},uninstall:function(Ve){this.getView()._countItemEvent(Ve,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:pe}})},{initialize:function(){},_initialize:function(pe,Oe){var Ve=pe&&k.isPlainObject(pe),qe=Ve&&pe.internal===!0,Et=this._matrix=new xe,Lt=Ve&&pe.project||ca.project,_n=ca.settings;return this._id=qe?null:oe.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&_n.applyMatrix,Oe&&Et.translate(Oe),Et._owner=this,this._style=new En(Lt._currentStyle,this,Lt),qe||Ve&&pe.insert==!1||!_n.insertItems&&!(Ve&&pe.insert==!0)?this._setProject(Lt):(Ve&&pe.parent||Lt)._insertItem(r,this,!0),Ve&&pe!==Ce.NO_INSERT&&pe!==Ce.INSERT&&this.set(pe,{internal:!0,insert:!0,project:!0,parent:!0}),Ve},_serialize:function(pe,Oe){var Ve={},qe=this;function Et(Lt){for(var _n in Lt){var vn=qe[_n];k.equals(vn,_n==="leading"?Lt.fontSize*1.2:Lt[_n])||(Ve[_n]=k.serialize(vn,pe,_n!=="data",Oe))}}return Et(this._serializeFields),this instanceof Ie||Et(this._style._defaults),[this._class,Ve]},_changed:function(pe){var Oe=this._symbol,Ve=this._parent||Oe,qe=this._project;pe&8&&(this._bounds=this._position=this._decomposed=r),pe&16&&(this._globalMatrix=r),Ve&&pe&72&&Ce._clearBoundsCache(Ve),pe&2&&Ce._clearBoundsCache(this),qe&&qe._changed(pe,this),Oe&&Oe._changed(pe)},getId:function(){return this._id},getName:function(){return this._name},setName:function(pe){if(this._name&&this._removeNamed(),pe===+pe+"")throw new Error("Names consisting only of numbers are not supported.");var Oe=this._getOwner();if(pe&&Oe){var Ve=Oe._children,qe=Oe._namedChildren;(qe[pe]=qe[pe]||[]).push(this),pe in Ve||(Ve[pe]=this)}this._name=pe||r,this._changed(256)},getStyle:function(){return this._style},setStyle:function(pe){this.getStyle().set(pe)}},k.each(["locked","visible","blendMode","opacity","guide"],function(pe){var Oe=k.capitalize(pe),Ve="_"+pe,qe={locked:256,visible:265};this["get"+Oe]=function(){return this[Ve]},this["set"+Oe]=function(Et){Et!=this[Ve]&&(this[Ve]=Et,this._changed(qe[pe]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(pe){if(pe!==this._selection){this._selection=pe;var Oe=this._project;Oe&&(Oe._updateSelection(this),this._changed(257))}},_changeSelection:function(pe,Oe){var Ve=this._selection;this.setSelection(Oe?Ve|pe:Ve&~pe)},isSelected:function(){if(this._selectChildren){for(var pe=this._children,Oe=0,Ve=pe.length;Oe<Ve;Oe++)if(pe[Oe].isSelected())return!0}return!!(this._selection&1)},setSelected:function(pe){if(this._selectChildren)for(var Oe=this._children,Ve=0,qe=Oe.length;Ve<qe;Ve++)Oe[Ve].setSelected(pe);this._changeSelection(1,pe)},isFullySelected:function(){var pe=this._children,Oe=!!(this._selection&1);if(pe&&Oe){for(var Ve=0,qe=pe.length;Ve<qe;Ve++)if(!pe[Ve].isFullySelected())return!1;return!0}return Oe},setFullySelected:function(pe){var Oe=this._children;if(Oe)for(var Ve=0,qe=Oe.length;Ve<qe;Ve++)Oe[Ve].setFullySelected(pe);this._changeSelection(1,pe)},isClipMask:function(){return this._clipMask},setClipMask:function(pe){this._clipMask!=(pe=!!pe)&&(this._clipMask=pe,pe&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(pe){this._data=pe},getPosition:function(pe){var Oe=pe?re:ue,Ve=this._position||(this._position=this._getPositionFromBounds());return new Oe(Ve.x,Ve.y,this,"setPosition")},setPosition:function(){this.translate(re.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(pe){return this._pivot?this._matrix._transformPoint(this._pivot):(pe||this.getBounds()).getCenter(!0)},getPivot:function(){var pe=this._pivot;return pe?new ue(pe.x,pe.y,this,"setPivot"):null},setPivot:function(){this._pivot=re.read(arguments,0,{clone:!0,readNull:!0}),this._position=r}},k.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(pe,Oe){this[Oe]=function(Ve){return this.getBounds(Ve,pe)}},{beans:!0,getBounds:function(pe,Oe){var Ve=Oe||pe instanceof xe,qe=k.set({},Ve?Oe:pe,this._boundsOptions);(!qe.stroke||this.getStrokeScaling())&&(qe.cacheItem=this);var Et=this._getCachedBounds(Ve&&pe,qe).rect;return arguments.length?Et:new _e(Et.x,Et.y,Et.width,Et.height,this,"setBounds")},setBounds:function(){var pe=he.read(arguments),Oe=this.getBounds(),Ve=this._matrix,qe=new xe,Et=pe.getCenter();qe.translate(Et),(pe.width!=Oe.width||pe.height!=Oe.height)&&(Ve.isInvertible()||(Ve.set(Ve._backup||new xe().translate(Ve.getTranslation())),Oe=this.getBounds()),qe.scale(Oe.width!==0?pe.width/Oe.width:0,Oe.height!==0?pe.height/Oe.height:0)),Et=Oe.getCenter(),qe.translate(-Et.x,-Et.y),this.transform(qe)},_getBounds:function(pe,Oe){var Ve=this._children;return!Ve||!Ve.length?new he:(Ce._updateBoundsCache(this,Oe.cacheItem),Ce._getBounds(Ve,pe,Oe))},_getBoundsCacheKey:function(pe,Oe){return[pe.stroke?1:0,pe.handle?1:0,Oe?1:0].join("")},_getCachedBounds:function(pe,Oe,Ve){pe=pe&&pe._orNullIfIdentity();var qe=Oe.internal&&!Ve,Et=Oe.cacheItem,Lt=qe?null:this._matrix._orNullIfIdentity(),_n=Et&&(!pe||pe.equals(Lt))&&this._getBoundsCacheKey(Oe,qe),vn=this._bounds;if(Ce._updateBoundsCache(this._parent||this._symbol,Et),_n&&vn&&_n in vn){var wn=vn[_n];return{rect:wn.rect.clone(),nonscaling:wn.nonscaling}}var Cn=this._getBounds(pe||Lt,Oe),Bn=Cn.rect||Cn,zn=this._style,Fn=Cn.nonscaling||zn.hasStroke()&&!zn.getStrokeScaling();if(_n){vn||(this._bounds=vn={});var wn=vn[_n]={rect:Bn.clone(),nonscaling:Fn,internal:qe}}return{rect:Bn,nonscaling:Fn}},_getStrokeMatrix:function(pe,Oe){var Ve=this.getStrokeScaling()?null:Oe&&Oe.internal?this:this._parent||this._symbol&&this._symbol._item,qe=Ve?Ve.getViewMatrix().invert():pe;return qe&&qe._shiftless()},statics:{_updateBoundsCache:function(pe,Oe){if(pe&&Oe){var Ve=Oe._id,qe=pe._boundsCache=pe._boundsCache||{ids:{},list:[]};qe.ids[Ve]||(qe.list.push(Oe),qe.ids[Ve]=Oe)}},_clearBoundsCache:function(pe){var Oe=pe._boundsCache;if(Oe){pe._bounds=pe._position=pe._boundsCache=r;for(var Ve=0,qe=Oe.list,Et=qe.length;Ve<Et;Ve++){var Lt=qe[Ve];Lt!==pe&&(Lt._bounds=Lt._position=r,Lt._boundsCache&&Ce._clearBoundsCache(Lt))}}},_getBounds:function(pe,Oe,Ve){var qe=1/0,Et=-qe,Lt=qe,_n=Et,vn=!1;Ve=Ve||{};for(var wn=0,Cn=pe.length;wn<Cn;wn++){var Bn=pe[wn];if(Bn._visible&&!Bn.isEmpty(!0)){var zn=Bn._getCachedBounds(Oe&&Oe.appended(Bn._matrix),Ve,!0),Fn=zn.rect;qe=Math.min(Fn.x,qe),Lt=Math.min(Fn.y,Lt),Et=Math.max(Fn.x+Fn.width,Et),_n=Math.max(Fn.y+Fn.height,_n),zn.nonscaling&&(vn=!0)}}return{rect:isFinite(qe)?new he(qe,Lt,Et-qe,_n-Lt):new he,nonscaling:vn}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var pe=this._decompose();return pe?pe.rotation:0},setRotation:function(pe){var Oe=this.getRotation();if(Oe!=null&&pe!=null){var Ve=this._decomposed;this.rotate(pe-Oe),Ve&&(Ve.rotation=pe,this._decomposed=Ve)}},getScaling:function(){var pe=this._decompose(),Oe=pe&&pe.scaling;return new ue(Oe?Oe.x:1,Oe?Oe.y:1,this,"setScaling")},setScaling:function(){var pe=this.getScaling(),Oe=re.read(arguments,0,{clone:!0,readNull:!0});if(pe&&Oe&&!pe.equals(Oe)){var Ve=this.getRotation(),qe=this._decomposed,Et=new xe,Lt=ae.isZero;if(Lt(pe.x)||Lt(pe.y))Et.translate(qe.translation),Ve&&Et.rotate(Ve),Et.scale(Oe.x,Oe.y),this._matrix.set(Et);else{var _n=this.getPosition(!0);Et.translate(_n),Ve&&Et.rotate(Ve),Et.scale(Oe.x/pe.x,Oe.y/pe.y),Ve&&Et.rotate(-Ve),Et.translate(_n.negate()),this.transform(Et)}qe&&(qe.scaling=Oe,this._decomposed=qe)}},getMatrix:function(){return this._matrix},setMatrix:function(){var pe=this._matrix;pe.set.apply(pe,arguments)},getGlobalMatrix:function(pe){var Oe=this._globalMatrix;if(Oe)for(var Ve=this._parent,qe=[];Ve;){if(!Ve._globalMatrix){Oe=null;for(var Et=0,Lt=qe.length;Et<Lt;Et++)qe[Et]._globalMatrix=null;break}qe.push(Ve),Ve=Ve._parent}if(!Oe){Oe=this._globalMatrix=this._matrix.clone();var Ve=this._parent;Ve&&Oe.prepend(Ve.getGlobalMatrix(!0))}return pe?Oe:Oe.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(pe){(this._applyMatrix=this._canApplyMatrix&&!!pe)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(pe,Oe){if(this._project!==pe){this._project&&this._installEvents(!1),this._project=pe;for(var Ve=this._children,qe=0,Et=Ve&&Ve.length;qe<Et;qe++)Ve[qe]._setProject(pe);Oe=!0}Oe&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function pe(Oe){pe.base.call(this,Oe);for(var Ve=this._children,qe=0,Et=Ve&&Ve.length;qe<Et;qe++)Ve[qe]._installEvents(Oe)},getLayer:function(){for(var pe=this;pe=pe._parent;)if(pe instanceof ze)return pe;return null},getParent:function(){return this._parent},setParent:function(pe){return pe.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(pe){this.removeChildren(),this.addChildren(pe)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var pe=this._getOwner();return pe&&pe._children[this._index+1]||null},getPreviousSibling:function(){var pe=this._getOwner();return pe&&pe._children[this._index-1]||null},getIndex:function(){return this._index},setIndex:function(pe){var Oe=this._parent,Ve=Oe&&Oe._children;Ve&&Oe.insertChildren(pe in Ve?pe:r,[this])},equals:function(pe){return pe===this||pe&&this._class===pe._class&&this._style.equals(pe._style)&&this._matrix.equals(pe._matrix)&&this._locked===pe._locked&&this._visible===pe._visible&&this._blendMode===pe._blendMode&&this._opacity===pe._opacity&&this._clipMask===pe._clipMask&&this._guide===pe._guide&&this._equals(pe)||!1},_equals:function(pe){return k.equals(this._children,pe._children)},clone:function(pe){var Oe=new this.constructor(Ce.NO_INSERT),Ve=this._children,qe=k.pick(pe?pe.insert:r,pe===r||pe===!0),Et=k.pick(pe?pe.deep:r,!0);Ve&&Oe.copyAttributes(this),(!Ve||Et)&&Oe.copyContent(this),Ve||Oe.copyAttributes(this),qe&&Oe.insertAbove(this);var Lt=this._name,_n=this._parent;if(Lt&&_n){for(var Ve=_n._children,vn=Lt,wn=1;Ve[Lt];)Lt=vn+" "+wn++;Lt!==vn&&Oe.setName(Lt)}return Oe},copyContent:function(pe){for(var Oe=pe._children,Ve=0,qe=Oe&&Oe.length;Ve<qe;Ve++)this.addChild(Oe[Ve].clone(!1),!0)},copyAttributes:function(pe,Oe){this.setStyle(pe._style);for(var Ve=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],qe=0,Et=Ve.length;qe<Et;qe++){var Lt=Ve[qe];pe.hasOwnProperty(Lt)&&(this[Lt]=pe[Lt])}Oe||this._matrix.set(pe._matrix,!0),this.setApplyMatrix(pe._applyMatrix),this.setPivot(pe._pivot),this.setSelection(pe._selection);var _n=pe._data,vn=pe._name;this._data=_n?k.clone(_n):null,vn&&this.setName(vn)},rasterize:function(pe,Oe){var Ve,qe,Et;k.isPlainObject(pe)?(Ve=pe.resolution,qe=pe.insert,Et=pe.raster):(Ve=pe,qe=Oe),Et||(Et=new Pt(Ce.NO_INSERT));var Lt=this.getStrokeBounds(),_n=(Ve||this.getView().getResolution())/72,vn=Lt.getTopLeft().floor(),wn=Lt.getBottomRight().ceil(),Cn=new le(wn.subtract(vn)),Bn=Cn.multiply(_n);if(Et.setSize(Bn,!0),!Bn.isZero()){var zn=Et.getContext(!0),Fn=new xe().scale(_n).translate(vn.negate());zn.save(),Fn.applyToContext(zn),this.draw(zn,new k({matrices:[Fn]})),zn.restore()}return Et._matrix.set(new xe().translate(vn.add(Cn.divide(2))).scale(1/_n)),(qe===r||qe)&&Et.insertAbove(this),Et},contains:function(){var pe=this._matrix;return pe.isInvertible()&&!!this._contains(pe._inverseTransform(re.read(arguments)))},_contains:function(pe){var Oe=this._children;if(Oe){for(var Ve=Oe.length-1;Ve>=0;Ve--)if(Oe[Ve].contains(pe))return!0;return!1}return pe.isInside(this.getInternalBounds())},isInside:function(){return he.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Sn.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(pe,Oe){return pe instanceof Ce?this._asPathItem().getIntersections(pe._asPathItem(),null,Oe,!0).length>0:!1}},new function(){function pe(){var qe=arguments;return this._hitTest(re.read(qe),xn.getOptions(qe))}function Oe(){var qe=arguments,Et=re.read(qe),Lt=xn.getOptions(qe),_n=[];return this._hitTest(Et,new k({all:_n},Lt)),_n}function Ve(qe,Et,Lt,_n){var vn=this._children;if(vn)for(var wn=vn.length-1;wn>=0;wn--){var Cn=vn[wn],Bn=Cn!==_n&&Cn._hitTest(qe,Et,Lt);if(Bn&&!Et.all)return Bn}return null}return $e.inject({hitTest:pe,hitTestAll:Oe,_hitTest:Ve}),{hitTest:pe,hitTestAll:Oe,_hitTestChildren:Ve}},{_hitTest:function(pe,Oe,Ve){if(this._locked||!this._visible||this._guide&&!Oe.guides||this.isEmpty())return null;var qe=this._matrix,Et=Ve?Ve.appended(qe):this.getGlobalMatrix().prepend(this.getView()._matrix),Lt=Math.max(Oe.tolerance,1e-12),_n=Oe._tolerancePadding=new le(Sn._getStrokePadding(Lt,qe._shiftless().invert()));if(pe=qe._inverseTransform(pe),!pe||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(_n.multiply(2))._containsPoint(pe))return null;var vn=!(Oe.guides&&!this._guide||Oe.selected&&!this.isSelected()||Oe.type&&Oe.type!==k.hyphenate(this._class)||Oe.class&&!(this instanceof Oe.class)),wn=Oe.match,Cn=this,Bn,zn;function Fn(On){return On&&wn&&!wn(On)&&(On=null),On&&Oe.all&&Oe.all.push(On),On}function Gn(On,Un){var Yn=Un?Bn["get"+Un]():Cn.getPosition();if(pe.subtract(Yn).divide(_n).length<=1)return new xn(On,Cn,{name:Un?k.hyphenate(Un):On,point:Yn})}var Kn=Oe.position,Wn=Oe.center,ea=Oe.bounds;if(vn&&this._parent&&(Kn||Wn||ea)){if((Wn||ea)&&(Bn=this.getInternalBounds()),zn=Kn&&Gn("position")||Wn&&Gn("center","Center"),!zn&&ea)for(var Pn=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],jn=0;jn<8&&!zn;jn++)zn=Gn("bounds",Pn[jn]);zn=Fn(zn)}return zn||(zn=this._hitTestChildren(pe,Oe,Et)||vn&&Fn(this._hitTestSelf(pe,Oe,Et,this.getStrokeScaling()?null:Et._shiftless().invert()))||null),zn&&zn.point&&(zn.point=qe.transform(zn.point)),zn},_hitTestSelf:function(pe,Oe){if(Oe.fill&&this.hasFill()&&this._contains(pe))return new xn("fill",this)},matches:function(pe,Oe){function Ve(_n,vn){for(var wn in _n)if(_n.hasOwnProperty(wn)){var Cn=_n[wn],Bn=vn[wn];if(k.isPlainObject(Cn)&&k.isPlainObject(Bn)){if(!Ve(Cn,Bn))return!1}else if(!k.equals(Cn,Bn))return!1}return!0}var qe=typeof pe;if(qe==="object"){for(var Et in pe)if(pe.hasOwnProperty(Et)&&!this.matches(Et,pe[Et]))return!1;return!0}else{if(qe==="function")return pe(this);if(pe==="match")return Oe(this);var Lt=/^(empty|editable)$/.test(pe)?this["is"+k.capitalize(pe)]():pe==="type"?k.hyphenate(this._class):this[pe];if(pe==="class"){if(typeof Oe=="function")return this instanceof Oe;Lt=this._class}if(typeof Oe=="function")return!!Oe(Lt);if(Oe){if(Oe.test)return Oe.test(Lt);if(k.isPlainObject(Oe))return Ve(Oe,Lt)}return k.equals(Lt,Oe)}},getItems:function(pe){return Ce._getItems(this,pe,this._matrix)},getItem:function(pe){return Ce._getItems(this,pe,this._matrix,null,!0)[0]||null},statics:{_getItems:function pe(Oe,Ve,qe,Et,Lt){if(!Et){var _n=typeof Ve=="object"&&Ve,vn=_n&&_n.overlapping,wn=_n&&_n.inside,Cn=vn||wn,Fn=Cn&&he.read([Cn]);Et={items:[],recursive:_n&&_n.recursive!==!1,inside:!!wn,overlapping:!!vn,rect:Fn,path:vn&&new Sn.Rectangle({rectangle:Fn,insert:!1})},_n&&(Ve=k.filter({},Ve,{recursive:!0,inside:!0,overlapping:!0}))}var Bn=Oe._children,zn=Et.items,Fn=Et.rect;qe=Fn&&(qe||new xe);for(var Gn=0,Kn=Bn&&Bn.length;Gn<Kn;Gn++){var Wn=Bn[Gn],ea=qe&&qe.appended(Wn._matrix),Pn=!0;if(Fn){var Cn=Wn.getBounds(ea);if(!Fn.intersects(Cn))continue;Fn.contains(Cn)||Et.overlapping&&(Cn.contains(Fn)||Et.path.intersects(Wn,ea))||(Pn=!1)}if(Pn&&Wn.matches(Ve)&&(zn.push(Wn),Lt)||(Et.recursive!==!1&&pe(Wn,Ve,ea,Et,Lt),Lt&&zn.length>0))break}return zn}}},{importJSON:function(pe){var Oe=k.importJSON(pe,this);return Oe!==this?this.addChild(Oe):Oe},addChild:function(pe){return this.insertChild(r,pe)},insertChild:function(pe,Oe){var Ve=Oe?this.insertChildren(pe,[Oe]):null;return Ve&&Ve[0]},addChildren:function(pe){return this.insertChildren(this._children.length,pe)},insertChildren:function(pe,Oe){var Ve=this._children;if(Ve&&Oe&&Oe.length>0){Oe=k.slice(Oe);for(var qe={},Et=Oe.length-1;Et>=0;Et--){var Lt=Oe[Et],_n=Lt&&Lt._id;!Lt||qe[_n]?Oe.splice(Et,1):(Lt._remove(!1,!0),qe[_n]=!0)}k.splice(Ve,Oe,pe,0);for(var vn=this._project,wn=vn._changes,Et=0,Cn=Oe.length;Et<Cn;Et++){var Lt=Oe[Et],Bn=Lt._name;Lt._parent=this,Lt._setProject(vn,!0),Bn&&Lt.setName(Bn),wn&&Lt._changed(5)}this._changed(11)}else Oe=null;return Oe},_insertItem:"#insertChild",_insertAt:function(pe,Oe){var Ve=pe&&pe._getOwner(),qe=pe!==this&&Ve?this:null;return qe&&(qe._remove(!1,!0),Ve._insertItem(pe._index+Oe,qe)),qe},insertAbove:function(pe){return this._insertAt(pe,1)},insertBelow:function(pe){return this._insertAt(pe,0)},sendToBack:function(){var pe=this._getOwner();return pe?pe._insertItem(0,this):null},bringToFront:function(){var pe=this._getOwner();return pe?pe._insertItem(r,this):null},appendTop:"#addChild",appendBottom:function(pe){return this.insertChild(0,pe)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(pe){return pe._insertItem(r,this)},copyTo:function(pe){return this.clone(!1).addTo(pe)},reduce:function(pe){var Oe=this._children;if(Oe&&Oe.length===1){var Ve=Oe[0].reduce(pe);return this._parent?(Ve.insertAbove(this),this.remove()):Ve.remove(),Ve}return this},_removeNamed:function(){var pe=this._getOwner();if(pe){var Oe=pe._children,Ve=pe._namedChildren,qe=this._name,Et=Ve[qe],Lt=Et?Et.indexOf(this):-1;Lt!==-1&&(Oe[qe]==this&&delete Oe[qe],Et.splice(Lt,1),Et.length?Oe[qe]=Et[0]:delete Ve[qe])}},_remove:function(pe,Oe){var Ve=this._getOwner(),qe=this._project,Et=this._index;return this._style&&this._style._dispose(),Ve?(this._name&&this._removeNamed(),Et!=null&&(qe._activeLayer===this&&(qe._activeLayer=this.getNextSibling()||this.getPreviousSibling()),k.splice(Ve._children,null,Et,1)),this._installEvents(!1),pe&&qe._changes&&this._changed(5),Oe&&Ve._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(pe){var Oe=pe&&pe.insertBelow(this);return Oe&&this.remove(),Oe},removeChildren:function(pe,Oe){if(!this._children)return null;pe=pe||0,Oe=k.pick(Oe,this._children.length);for(var Ve=k.splice(this._children,null,pe,Oe-pe),qe=Ve.length-1;qe>=0;qe--)Ve[qe]._remove(!0,!1);return Ve.length>0&&this._changed(11),Ve},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var pe=0,Oe=this._children.length;pe<Oe;pe++)this._children[pe]._index=pe;this._changed(11)}},isEmpty:function(pe){var Oe=this._children,Ve=Oe?Oe.length:0;if(pe){for(var qe=0;qe<Ve;qe++)if(!Oe[qe].isEmpty(pe))return!1;return!0}return!Ve},isEditable:function(){for(var pe=this;pe;){if(!pe._visible||pe._locked)return!1;pe=pe._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(pe){function Oe(_n){var vn=[];do vn.unshift(_n);while(_n=_n._parent);return vn}for(var Ve=Oe(this),qe=Oe(pe),Et=0,Lt=Math.min(Ve.length,qe.length);Et<Lt;Et++)if(Ve[Et]!=qe[Et])return Ve[Et]._index<qe[Et]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(pe){return this._getOrder(pe)===-1},isBelow:function(pe){return this._getOrder(pe)===1},isParent:function(pe){return this._parent===pe},isChild:function(pe){return pe&&pe._parent===this},isDescendant:function(pe){for(var Oe=this;Oe=Oe._parent;)if(Oe===pe)return!0;return!1},isAncestor:function(pe){return pe?pe.isDescendant(this):!1},isSibling:function(pe){return this._parent===pe._parent},isGroupedWith:function(pe){for(var Oe=this._parent;Oe;){if(Oe._parent&&/^(Group|Layer|CompoundPath)$/.test(Oe._class)&&pe.isDescendant(Oe))return!0;Oe=Oe._parent}return!1}},k.each(["rotate","scale","shear","skew"],function(pe){var Oe=pe==="rotate";this[pe]=function(){var Ve=arguments,qe=(Oe?k:re).read(Ve),Et=re.read(Ve,0,{readNull:!0});return this.transform(new xe()[pe](qe,Et||this.getPosition(!0)))}},{translate:function(){var pe=new xe;return this.transform(pe.translate.apply(pe,arguments))},transform:function(pe,Oe,Ve){var qe=this._matrix,Et=pe&&!pe.isIdentity(),Lt=Ve&&this._canApplyMatrix||this._applyMatrix&&(Et||!qe.isIdentity()||Oe&&this._children);if(!Et&&!Lt)return this;if(Et){!pe.isInvertible()&&qe.isInvertible()&&(qe._backup=qe.getValues()),qe.prepend(pe,!0);var _n=this._style,vn=_n.getFillColor(!0),wn=_n.getStrokeColor(!0);vn&&vn.transform(pe),wn&&wn.transform(pe)}if(Lt&&(Lt=this._transformContent(qe,Oe,Ve))){var Cn=this._pivot;Cn&&qe._transformPoint(Cn,Cn,!0),qe.reset(!0),Ve&&this._canApplyMatrix&&(this._applyMatrix=!0)}var Bn=this._bounds,zn=this._position;(Et||Lt)&&this._changed(25);var Fn=Et&&Bn&&pe.decompose();if(Fn&&Fn.skewing.isZero()&&Fn.rotation%90===0){for(var Gn in Bn){var Kn=Bn[Gn];if(Kn.nonscaling)delete Bn[Gn];else if(Lt||!Kn.internal){var Wn=Kn.rect;pe._transformBounds(Wn,Wn)}}this._bounds=Bn;var ea=Bn[this._getBoundsCacheKey(this._boundsOptions||{})];ea&&(this._position=this._getPositionFromBounds(ea.rect))}else Et&&zn&&this._pivot&&(this._position=pe._transformPoint(zn,zn));return this},_transformContent:function(pe,Oe,Ve){var qe=this._children;if(qe){for(var Et=0,Lt=qe.length;Et<Lt;Et++)qe[Et].transform(pe,Oe,Ve);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(re.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(re.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(re.read(arguments))},localToParent:function(){return this._matrix._transformPoint(re.read(arguments))},fitBounds:function(pe,Oe){pe=he.read(arguments);var Ve=this.getBounds(),qe=Ve.height/Ve.width,Et=pe.height/pe.width,Lt=(Oe?qe>Et:qe<Et)?pe.width/Ve.width:pe.height/Ve.height,_n=new he(new re,new le(Ve.width*Lt,Ve.height*Lt));_n.setCenter(pe.getCenter()),this.setBounds(_n)}}),{_setStyles:function(pe,Oe,Ve){var qe=this._style,Et=this._matrix;if(qe.hasFill()&&(pe.fillStyle=qe.getFillColor().toCanvasStyle(pe,Et)),qe.hasStroke()){pe.strokeStyle=qe.getStrokeColor().toCanvasStyle(pe,Et),pe.lineWidth=qe.getStrokeWidth();var Lt=qe.getStrokeJoin(),_n=qe.getStrokeCap(),vn=qe.getMiterLimit();if(Lt&&(pe.lineJoin=Lt),_n&&(pe.lineCap=_n),vn&&(pe.miterLimit=vn),ca.support.nativeDash){var wn=qe.getDashArray(),Cn=qe.getDashOffset();wn&&wn.length&&("setLineDash"in pe?(pe.setLineDash(wn),pe.lineDashOffset=Cn):(pe.mozDash=wn,pe.mozDashOffset=Cn))}}if(qe.hasShadow()){var Bn=Oe.pixelRatio||1,zn=Ve._shiftless().prepend(new xe().scale(Bn,Bn)),Fn=zn.transform(new re(qe.getShadowBlur(),0)),Gn=zn.transform(this.getShadowOffset());pe.shadowColor=qe.getShadowColor().toCanvasStyle(pe),pe.shadowBlur=Fn.getLength(),pe.shadowOffsetX=Gn.x,pe.shadowOffsetY=Gn.y}},draw:function(pe,Oe,Ve){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var qe=Oe.matrices,Et=Oe.viewMatrix,Lt=this._matrix,_n=qe[qe.length-1].appended(Lt);if(_n.isInvertible()){Et=Et?Et.appended(_n):_n,qe.push(_n),Oe.updateMatrix&&(this._globalMatrix=_n);var vn=this._blendMode,wn=ae.clamp(this._opacity,0,1),Cn=vn==="normal",Bn=na.nativeModes[vn],zn=Cn&&wn===1||Oe.dontStart||Oe.clip||(Bn||Cn&&wn<1)&&this._canComposite(),Fn=Oe.pixelRatio||1,Gn,Kn,Wn;if(!zn){var ea=this.getStrokeBounds(Et);if(!ea.width||!ea.height){qe.pop();return}Wn=Oe.offset,Kn=Oe.offset=ea.getTopLeft().floor(),Gn=pe,pe=oa.getContext(ea.getSize().ceil().add(1).multiply(Fn)),Fn!==1&&pe.scale(Fn,Fn)}pe.save();var Pn=Ve?Ve.appended(Lt):this._canScaleStroke&&!this.getStrokeScaling(!0)&&Et,jn=!zn&&Oe.clipItem,On=!Pn||jn;if(zn?(pe.globalAlpha=wn,Bn&&(pe.globalCompositeOperation=vn)):On&&pe.translate(-Kn.x,-Kn.y),On&&(zn?Lt:Et).applyToContext(pe),jn&&Oe.clipItem.draw(pe,Oe.extend({clip:!0})),Pn){pe.setTransform(Fn,0,0,Fn,0,0);var Un=Oe.offset;Un&&pe.translate(-Un.x,-Un.y)}this._draw(pe,Oe,Et,Pn),pe.restore(),qe.pop(),Oe.clip&&!Oe.dontFinish&&pe.clip(this.getFillRule()),zn||(na.process(vn,pe,Gn,wn,Kn.subtract(Wn).multiply(Fn)),oa.release(pe),Oe.offset=Wn)}}},_isUpdated:function(pe){var Oe=this._parent;if(Oe instanceof An)return Oe._isUpdated(pe);var Ve=this._updateVersion===pe;return!Ve&&Oe&&Oe._visible&&Oe._isUpdated(pe)&&(this._updateVersion=pe,Ve=!0),Ve},_drawSelection:function(pe,Oe,Ve,qe,Et){var Lt=this._selection,_n=Lt&1,vn=Lt&2||_n&&this._selectBounds,wn=Lt&4;if(this._drawSelected||(_n=!1),(_n||vn||wn)&&this._isUpdated(Et)){var Cn,Bn=this.getSelectedColor(!0)||(Cn=this.getLayer())&&Cn.getSelectedColor(!0),zn=Oe.appended(this.getGlobalMatrix(!0)),Fn=Ve/2;if(pe.strokeStyle=pe.fillStyle=Bn?Bn.toCanvasStyle(pe):"#009dec",_n&&this._drawSelected(pe,zn,qe),wn){var Gn=this.getPosition(!0),Kn=this._parent,Wn=Kn?Kn.localToGlobal(Gn):Gn,ea=Wn.x,Pn=Wn.y;pe.beginPath(),pe.arc(ea,Pn,Fn,0,Math.PI*2,!0),pe.stroke();for(var jn=[[0,-1],[1,0],[0,1],[-1,0]],On=Fn,Un=Ve+1,Yn=0;Yn<4;Yn++){var ta=jn[Yn],Jn=ta[0],pa=ta[1];pe.moveTo(ea+Jn*On,Pn+pa*On),pe.lineTo(ea+Jn*Un,Pn+pa*Un),pe.stroke()}}if(vn){var ga=zn._transformCorners(this.getInternalBounds());pe.beginPath();for(var Yn=0;Yn<8;Yn++)pe[Yn?"lineTo":"moveTo"](ga[Yn],ga[++Yn]);pe.closePath(),pe.stroke();for(var Yn=0;Yn<8;Yn++)pe.fillRect(ga[Yn]-Fn,ga[++Yn]-Fn,Ve,Ve)}}},_canComposite:function(){return!1}},k.each(["down","drag","up","move"],function(pe){this["removeOn"+k.capitalize(pe)]=function(){var Oe={};return Oe[pe]=!0,this.removeOn(Oe)}},{removeOn:function(pe){for(var Oe in pe)if(pe[Oe]){var Ve="mouse"+Oe,qe=this._project,Et=qe._removeSets=qe._removeSets||{};Et[Ve]=Et[Ve]||{},Et[Ve][this._id]=this}return this}}),{tween:function(pe,Oe,Ve){Ve||(Ve=Oe,Oe=pe,pe=null,Ve||(Ve=Oe,Oe=null));var qe=Ve&&Ve.easing,Et=Ve&&Ve.start,Lt=Ve!=null&&(typeof Ve=="number"?Ve:Ve.duration),_n=new Dn(this,pe,Oe,Lt,qe,Et);function vn(wn){_n._handleFrame(wn.time*1e3),_n.running||this.off("frame",vn)}return Lt&&this.on("frame",vn),_n},tweenTo:function(pe,Oe){return this.tween(null,pe,Oe)},tweenFrom:function(pe,Oe){return this.tween(pe,null,Oe)}}),Ie=Ce.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(Oe){this._children=[],this._namedChildren={},this._initialize(Oe)||this.addChildren(Array.isArray(Oe)?Oe:arguments)},_changed:function pe(Oe){pe.base.call(this,Oe),Oe&2050&&(this._clipItem=r)},_getClipItem:function(){var pe=this._clipItem;if(pe===r){pe=null;for(var Oe=this._children,Ve=0,qe=Oe.length;Ve<qe;Ve++)if(Oe[Ve]._clipMask){pe=Oe[Ve];break}this._clipItem=pe}return pe},isClipped:function(){return!!this._getClipItem()},setClipped:function(pe){var Oe=this.getFirstChild();Oe&&Oe.setClipMask(pe)},_getBounds:function pe(Oe,Ve){var qe=this._getClipItem();return qe?qe._getCachedBounds(qe._matrix.prepended(Oe),k.set({},Ve,{stroke:!1})):pe.base.call(this,Oe,Ve)},_hitTestChildren:function pe(Oe,Ve,qe){var Et=this._getClipItem();return(!Et||Et.contains(Oe))&&pe.base.call(this,Oe,Ve,qe,Et)},_draw:function(pe,Oe){var Ve=Oe.clip,qe=!Ve&&this._getClipItem();Oe=Oe.extend({clipItem:qe,clip:!1}),Ve?(pe.beginPath(),Oe.dontStart=Oe.dontFinish=!0):qe&&qe.draw(pe,Oe.extend({clip:!0}));for(var Et=this._children,Lt=0,_n=Et.length;Lt<_n;Lt++){var vn=Et[Lt];vn!==qe&&vn.draw(pe,Oe)}}}),ze=Ie.extend({_class:"Layer",initialize:function(){Ie.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function pe(){return this._parent?pe.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),Ue=Ce.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(Oe,Ve){this._initialize(Oe,Ve)},_equals:function(pe){return this._type===pe._type&&this._size.equals(pe._size)&&k.equals(this._radius,pe._radius)},copyContent:function(pe){this.setType(pe._type),this.setSize(pe._size),this.setRadius(pe._radius)},getType:function(){return this._type},setType:function(pe){this._type=pe},getShape:"#getType",setShape:"#setType",getSize:function(){var pe=this._size;return new de(pe.width,pe.height,this,"setSize")},setSize:function(){var pe=le.read(arguments);if(!this._size)this._size=pe.clone();else if(!this._size.equals(pe)){var Oe=this._type,Ve=pe.width,qe=pe.height;Oe==="rectangle"?this._radius.set(le.min(this._radius,pe.divide(2).abs())):Oe==="circle"?(Ve=qe=(Ve+qe)/2,this._radius=Ve/2):Oe==="ellipse"&&this._radius._set(Ve/2,qe/2),this._size._set(Ve,qe),this._changed(9)}},getRadius:function(){var pe=this._radius;return this._type==="circle"?pe:new de(pe.width,pe.height,this,"setRadius")},setRadius:function(pe){var Oe=this._type;if(Oe==="circle"){if(pe===this._radius)return;var Ve=pe*2;this._radius=pe,this._size._set(Ve,Ve)}else if(pe=le.read(arguments),!this._radius)this._radius=pe.clone();else{if(this._radius.equals(pe))return;if(this._radius.set(pe),Oe==="rectangle"){var Ve=le.max(this._size,pe.multiply(2));this._size.set(Ve)}else Oe==="ellipse"&&this._size._set(pe.width*2,pe.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(pe){var Oe=new Sn[k.capitalize(this._type)]({center:new re,size:this._size,radius:this._radius,insert:!1});return Oe.copyAttributes(this),ca.settings.applyMatrix&&Oe.setApplyMatrix(!0),(pe===r||pe)&&Oe.insertAbove(this),Oe},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(pe,Oe,Ve,qe){var Et=this._style,Lt=Et.hasFill(),_n=Et.hasStroke(),vn=Oe.dontFinish||Oe.clip,wn=!qe;if(Lt||_n||vn){var Cn=this._type,Bn=this._radius,zn=Cn==="circle";if(Oe.dontStart||pe.beginPath(),wn&&zn)pe.arc(0,0,Bn,0,Math.PI*2,!0);else{var Fn=zn?Bn:Bn.width,Gn=zn?Bn:Bn.height,Kn=this._size,Wn=Kn.width,ea=Kn.height;if(wn&&Cn==="rectangle"&&Fn===0&&Gn===0)pe.rect(-Wn/2,-ea/2,Wn,ea);else{var Pn=Wn/2,jn=ea/2,On=1-.5522847498307936,Un=Fn*On,Yn=Gn*On,ta=[-Pn,-jn+Gn,-Pn,-jn+Yn,-Pn+Un,-jn,-Pn+Fn,-jn,Pn-Fn,-jn,Pn-Un,-jn,Pn,-jn+Yn,Pn,-jn+Gn,Pn,jn-Gn,Pn,jn-Yn,Pn-Un,jn,Pn-Fn,jn,-Pn+Fn,jn,-Pn+Un,jn,-Pn,jn-Yn,-Pn,jn-Gn];qe&&qe.transform(ta,ta,32),pe.moveTo(ta[0],ta[1]),pe.bezierCurveTo(ta[2],ta[3],ta[4],ta[5],ta[6],ta[7]),Pn!==Fn&&pe.lineTo(ta[8],ta[9]),pe.bezierCurveTo(ta[10],ta[11],ta[12],ta[13],ta[14],ta[15]),jn!==Gn&&pe.lineTo(ta[16],ta[17]),pe.bezierCurveTo(ta[18],ta[19],ta[20],ta[21],ta[22],ta[23]),Pn!==Fn&&pe.lineTo(ta[24],ta[25]),pe.bezierCurveTo(ta[26],ta[27],ta[28],ta[29],ta[30],ta[31])}}pe.closePath()}!vn&&(Lt||_n)&&(this._setStyles(pe,Oe,Ve),Lt&&(pe.fill(Et.getFillRule()),pe.shadowColor="rgba(0,0,0,0)"),_n&&pe.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(pe,Oe){var Ve=new he(this._size).setCenter(0,0),qe=this._style,Et=Oe.stroke&&qe.hasStroke()&&qe.getStrokeWidth();return pe&&(Ve=pe._transformBounds(Ve)),Et?Ve.expand(Sn._getStrokePadding(Et,this._getStrokeMatrix(pe,Oe))):Ve}},new function(){function pe(Ve,qe,Et){var Lt=Ve._radius;if(!Lt.isZero())for(var _n=Ve._size.divide(2),vn=1;vn<=4;vn++){var wn=new re(vn>1&&vn<4?-1:1,vn>2?-1:1),Cn=wn.multiply(_n),Bn=Cn.subtract(wn.multiply(Lt)),zn=new he(Et?Cn.add(wn.multiply(Et)):Cn,Bn);if(zn.contains(qe))return{point:Bn,quadrant:vn}}}function Oe(Ve,qe,Et,Lt){var _n=Ve.divide(qe);return(!Lt||_n.isInQuadrant(Lt))&&_n.subtract(_n.normalize()).multiply(qe).divide(Et).length<=1}return{_contains:function Ve(qe){if(this._type==="rectangle"){var Et=pe(this,qe);return Et?qe.subtract(Et.point).divide(this._radius).getLength()<=1:Ve.base.call(this,qe)}else return qe.divide(this.size).getLength()<=.5},_hitTestSelf:function Ve(qe,Et,Lt,_n){var vn=!1,wn=this._style,Cn=Et.stroke&&wn.hasStroke(),Bn=Et.fill&&wn.hasFill();if(Cn||Bn){var zn=this._type,Fn=this._radius,Gn=Cn?wn.getStrokeWidth()/2:0,Kn=Et._tolerancePadding.add(Sn._getStrokePadding(Gn,!wn.getStrokeScaling()&&_n));if(zn==="rectangle"){var Wn=Kn.multiply(2),ea=pe(this,qe,Wn);if(ea)vn=Oe(qe.subtract(ea.point),Fn,Kn,ea.quadrant);else{var Pn=new he(this._size).setCenter(0,0),jn=Pn.expand(Wn),On=Pn.expand(Wn.negate());vn=jn._containsPoint(qe)&&!On._containsPoint(qe)}}else vn=Oe(qe,Fn,Kn)}return vn?new xn(Cn?"stroke":"fill",this):Ve.base.apply(this,arguments)}}},{statics:new function(){function pe(Oe,Ve,qe,Et,Lt){var _n=k.create(Ue.prototype);return _n._type=Oe,_n._size=qe,_n._radius=Et,_n._initialize(k.getNamed(Lt),Ve),_n}return{Circle:function(){var Oe=arguments,Ve=re.readNamed(Oe,"center"),qe=k.readNamed(Oe,"radius");return pe("circle",Ve,new le(qe*2),qe,Oe)},Rectangle:function(){var Oe=arguments,Ve=he.readNamed(Oe,"rectangle"),qe=le.min(le.readNamed(Oe,"radius"),Ve.getSize(!0).divide(2));return pe("rectangle",Ve.getCenter(!0),Ve.getSize(!0),qe,Oe)},Ellipse:function(){var Oe=arguments,Ve=Ue._readEllipse(Oe),qe=Ve.radius;return pe("ellipse",Ve.center,qe.multiply(2),qe,Oe)},_readEllipse:function(Oe){var Ve,qe;if(k.hasNamed(Oe,"radius"))Ve=re.readNamed(Oe,"center"),qe=le.readNamed(Oe,"radius");else{var Et=he.readNamed(Oe,"rectangle");Ve=Et.getCenter(!0),qe=Et.getSize(!0).divide(2)}return{center:Ve,radius:qe}}}}}),Pt=Ce.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(Oe,Ve){if(!this._initialize(Oe,Ve!==r&&re.read(arguments))){var qe,Et=typeof Oe,Lt=Et==="string"?y.getElementById(Oe):Et==="object"?Oe:null;if(Lt&&Lt!==Ce.NO_INSERT){if(Lt.getContext||Lt.naturalHeight!=null)qe=Lt;else if(Lt){var _n=le.read(arguments);_n.isZero()||(qe=oa.getCanvas(_n))}}qe?this.setImage(qe):this.setSource(Oe)}this._size||(this._size=new le,this._loaded=!1)},_equals:function(pe){return this.getSource()===pe.getSource()},copyContent:function(pe){var Oe=pe._image,Ve=pe._canvas;if(Oe)this._setImage(Oe);else if(Ve){var qe=oa.getCanvas(pe._size);qe.getContext("2d").drawImage(Ve,0,0),this._setImage(qe)}this._crossOrigin=pe._crossOrigin},getSize:function(){var pe=this._size;return new de(pe?pe.width:0,pe?pe.height:0,this,"setSize")},setSize:function(pe,Oe){var Ve=le.read(arguments);if(Ve.equals(this._size))Oe&&this.clear();else if(Ve.width>0&&Ve.height>0){var qe=!Oe&&this.getElement();this._setImage(oa.getCanvas(Ve)),qe&&this.getContext(!0).drawImage(qe,0,0,Ve.width,Ve.height)}else this._canvas&&oa.release(this._canvas),this._size=Ve.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(pe){this.setSize(pe,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(pe){this.setSize(this.getWidth(),pe)},getLoaded:function(){return this._loaded},isEmpty:function(){var pe=this._size;return!pe||pe.width===0&&pe.height===0},getResolution:function(){var pe=this._matrix,Oe=new re(0,0).transform(pe),Ve=new re(1,0).transform(pe).subtract(Oe),qe=new re(0,1).transform(pe).subtract(Oe);return new le(72/Ve.getLength(),72/qe.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(pe){var Oe=this;function Ve(qe){var Et=Oe.getView(),Lt=qe&&qe.type||"load";Et&&Oe.responds(Lt)&&(ca=Et._scope,Oe.emit(Lt,new Hn(qe)))}this._setImage(pe),this._loaded?setTimeout(Ve,0):pe&&ha.add(pe,{load:function(qe){Oe._setImage(pe),Ve(qe)},error:Ve})},_setImage:function(pe){this._canvas&&oa.release(this._canvas),pe&&pe.getContext?(this._image=null,this._canvas=pe,this._loaded=!0):(this._image=pe,this._canvas=null,this._loaded=!!(pe&&pe.src&&pe.complete)),this._size=new le(pe?pe.naturalWidth||pe.width:0,pe?pe.naturalHeight||pe.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var pe=oa.getContext(this._size);try{this._image&&pe.drawImage(this._image,0,0),this._canvas=pe.canvas}catch{oa.release(pe)}}return this._canvas},setCanvas:"#setImage",getContext:function(pe){return this._context||(this._context=this.getCanvas().getContext("2d")),pe&&(this._image=null,this._changed(1025)),this._context},setContext:function(pe){this._context=pe},getSource:function(){var pe=this._image;return pe&&pe.src||this.toDataURL()},setSource:function(pe){var Oe=new n.Image,Ve=this._crossOrigin;Ve&&(Oe.crossOrigin=Ve),pe&&(Oe.src=pe),this.setImage(Oe)},getCrossOrigin:function(){var pe=this._image;return pe&&pe.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(pe){this._crossOrigin=pe;var Oe=this._image;Oe&&(Oe.crossOrigin=pe)},getSmoothing:function(){return this._smoothing},setSmoothing:function(pe){this._smoothing=typeof pe=="string"?pe:pe?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var pe=he.read(arguments),Oe=oa.getContext(pe.getSize());return Oe.drawImage(this.getCanvas(),pe.x,pe.y,pe.width,pe.height,0,0,pe.width,pe.height),Oe.canvas},getSubRaster:function(){var pe=he.read(arguments),Oe=new Pt(Ce.NO_INSERT);return Oe._setImage(this.getSubCanvas(pe)),Oe.translate(pe.getCenter().subtract(this.getSize().divide(2))),Oe._matrix.prepend(this._matrix),Oe.insertAbove(this),Oe},toDataURL:function(){var pe=this._image,Oe=pe&&pe.src;if(/^data:/.test(Oe))return Oe;var Ve=this.getCanvas();return Ve?Ve.toDataURL.apply(Ve,arguments):null},drawImage:function(pe){var Oe=re.read(arguments,1);this.getContext(!0).drawImage(pe,Oe.x,Oe.y)},getAverageColor:function(pe){var Oe,Ve;if(pe?pe instanceof Ln?(Ve=pe,Oe=pe.getBounds()):typeof pe=="object"&&("width"in pe?Oe=new he(pe):"x"in pe&&(Oe=new he(pe.x-.5,pe.y-.5,1,1))):Oe=this.getBounds(),!Oe)return null;var qe=32,Et=Math.min(Oe.width,qe),Lt=Math.min(Oe.height,qe),_n=Pt._sampleContext;_n?_n.clearRect(0,0,qe+1,qe+1):_n=Pt._sampleContext=oa.getContext(new le(qe)),_n.save();var vn=new xe().scale(Et/Oe.width,Lt/Oe.height).translate(-Oe.x,-Oe.y);vn.applyToContext(_n),Ve&&Ve.draw(_n,new k({clip:!0,matrices:[vn]})),this._matrix.applyToContext(_n);var wn=this.getElement(),Cn=this._size;wn&&_n.drawImage(wn,-Cn.width/2,-Cn.height/2),_n.restore();for(var Bn=_n.getImageData(.5,.5,Math.ceil(Et),Math.ceil(Lt)).data,zn=[0,0,0],Fn=0,Gn=0,Kn=Bn.length;Gn<Kn;Gn+=4){var Wn=Bn[Gn+3];Fn+=Wn,Wn/=255,zn[0]+=Bn[Gn]*Wn,zn[1]+=Bn[Gn+1]*Wn,zn[2]+=Bn[Gn+2]*Wn}for(var Gn=0;Gn<3;Gn++)zn[Gn]/=Fn;return Fn?ua.read(zn):null},getPixel:function(){var pe=re.read(arguments),Oe=this.getContext().getImageData(pe.x,pe.y,1,1).data;return new ua("rgb",[Oe[0]/255,Oe[1]/255,Oe[2]/255],Oe[3]/255)},setPixel:function(){var pe=arguments,Oe=re.read(pe),Ve=ua.read(pe),qe=Ve._convert("rgb"),Et=Ve._alpha,Lt=this.getContext(!0),_n=Lt.createImageData(1,1),vn=_n.data;vn[0]=qe[0]*255,vn[1]=qe[1]*255,vn[2]=qe[2]*255,vn[3]=Et!=null?Et*255:255,Lt.putImageData(_n,Oe.x,Oe.y)},clear:function(){var pe=this._size;this.getContext(!0).clearRect(0,0,pe.width+1,pe.height+1)},createImageData:function(){var pe=le.read(arguments);return this.getContext().createImageData(pe.width,pe.height)},getImageData:function(){var pe=he.read(arguments);return pe.isEmpty()&&(pe=new he(this._size)),this.getContext().getImageData(pe.x,pe.y,pe.width,pe.height)},putImageData:function(pe){var Oe=re.read(arguments,1);this.getContext(!0).putImageData(pe,Oe.x,Oe.y)},setImageData:function(pe){this.setSize(pe),this.getContext(!0).putImageData(pe,0,0)},_getBounds:function(pe,Oe){var Ve=new he(this._size).setCenter(0,0);return pe?pe._transformBounds(Ve):Ve},_hitTestSelf:function(pe){if(this._contains(pe)){var Oe=this;return new xn("pixel",Oe,{offset:pe.add(Oe._size.divide(2)).round(),color:{get:function(){return Oe.getPixel(this.offset)}}})}},_draw:function(pe,Oe,Ve){var qe=this.getElement();if(qe&&qe.width>0&&qe.height>0){pe.globalAlpha=ae.clamp(this._opacity,0,1),this._setStyles(pe,Oe,Ve);var Et=this._smoothing,Lt=Et==="off";Zn.setPrefixed(pe,Lt?"imageSmoothingEnabled":"imageSmoothingQuality",Lt?!1:Et),pe.drawImage(qe,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),hn=Ce.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(Oe,Ve){this._initialize(Oe,Ve!==r&&re.read(arguments,1))||this.setDefinition(Oe instanceof Dt?Oe:new Dt(Oe))},_equals:function(pe){return this._definition===pe._definition},copyContent:function(pe){this.setDefinition(pe._definition)},getDefinition:function(){return this._definition},setDefinition:function(pe){this._definition=pe,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(pe,Oe){var Ve=this._definition._item;return Ve._getCachedBounds(Ve._matrix.prepended(pe),Oe)},_hitTestSelf:function(pe,Oe,Ve){var qe=Oe.extend({all:!1}),Et=this._definition._item._hitTest(pe,qe,Ve);return Et&&(Et.item=this),Et},_draw:function(pe,Oe){this._definition._item.draw(pe,Oe)}}),Dt=k.extend({_class:"SymbolDefinition",initialize:function(Oe,Ve){this._id=oe.get(),this.project=ca.project,Oe&&this.setItem(Oe,Ve)},_serialize:function(pe,Oe){return Oe.add(this,function(){return k.serialize([this._class,this._item],pe,!1,Oe)})},_changed:function(pe){pe&8&&Ce._clearBoundsCache(this),pe&1&&this.project._changed(pe)},getItem:function(){return this._item},setItem:function(pe,Oe){pe._symbol&&(pe=pe.clone()),this._item&&(this._item._symbol=null),this._item=pe,pe.remove(),pe.setSelected(!1),Oe||pe.setPosition(new re),pe._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(pe){return new hn(this,pe)},clone:function(){return new Dt(this._item.clone(!1))},equals:function(pe){return pe===this||pe&&this._item.equals(pe._item)||!1}}),xn=k.extend({_class:"HitResult",initialize:function(Oe,Ve,qe){this.type=Oe,this.item=Ve,qe&&this.inject(qe)},statics:{getOptions:function(pe){var Oe=pe&&k.read(pe);return new k({type:null,tolerance:ca.settings.hitTolerance,fill:!Oe,stroke:!Oe,segments:!Oe,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},Oe)}}}),jt=k.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(Oe,Ve,qe,Et,Lt,_n){var vn=arguments.length,wn,Cn,Bn,zn;vn>0&&(Oe==null||typeof Oe=="object"?vn===1&&Oe&&"point"in Oe?(wn=Oe.point,Cn=Oe.handleIn,Bn=Oe.handleOut,zn=Oe.selection):(wn=Oe,Cn=Ve,Bn=qe,zn=Et):(wn=[Oe,Ve],Cn=qe!==r?[qe,Et]:null,Bn=Lt!==r?[Lt,_n]:null)),new Vn(wn,this,"_point"),new Vn(Cn,this,"_handleIn"),new Vn(Bn,this,"_handleOut"),zn&&this.setSelection(zn)},_serialize:function(pe,Oe){var Ve=this._point,qe=this._selection,Et=qe||this.hasHandles()?[Ve,this._handleIn,this._handleOut]:Ve;return qe&&Et.push(qe),k.serialize(Et,pe,!0,Oe)},_changed:function(pe){var Oe=this._path;if(Oe){var Ve=Oe._curves,qe=this._index,Et;Ve&&((!pe||pe===this._point||pe===this._handleIn)&&(Et=qe>0?Ve[qe-1]:Oe._closed?Ve[Ve.length-1]:null)&&Et._changed(),(!pe||pe===this._point||pe===this._handleOut)&&(Et=Ve[qe])&&Et._changed()),Oe._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(re.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(re.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(re.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var pe=this._handleIn,Oe=this._handleOut;return!pe.isZero()&&!Oe.isZero()&&pe.isCollinear(Oe)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(pe){var Oe=this._selection,Ve=this._path;this._selection=pe=pe||0,Ve&&pe!==Oe&&(Ve._updateSelection(this,Oe,pe),Ve._changed(257))},_changeSelection:function(pe,Oe){var Ve=this._selection;this.setSelection(Oe?Ve|pe:Ve&~pe)},isSelected:function(){return!!(this._selection&7)},setSelected:function(pe){this._changeSelection(7,pe)},getIndex:function(){return this._index!==r?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var pe=this._path,Oe=this._index;return pe?(Oe>0&&!pe._closed&&Oe===pe._segments.length-1&&Oe--,pe.getCurves()[Oe]||null):null},getLocation:function(){var pe=this.getCurve();return pe?new Tn(pe,this===pe._segment1?0:1):null},getNext:function(){var pe=this._path&&this._path._segments;return pe&&(pe[this._index+1]||this._path._closed&&pe[0])||null},smooth:function(pe,Oe,Ve){var qe=pe||{},Et=qe.type,Lt=qe.factor,_n=this.getPrevious(),vn=this.getNext(),wn=(_n||this)._point,Cn=this._point,Bn=(vn||this)._point,zn=wn.getDistance(Cn),Fn=Cn.getDistance(Bn);if(!Et||Et==="catmull-rom"){var Gn=Lt===r?.5:Lt,Kn=Math.pow(zn,Gn),Wn=Kn*Kn,ea=Math.pow(Fn,Gn),Pn=ea*ea;if(!Oe&&_n){var jn=2*Pn+3*ea*Kn+Wn,On=3*ea*(ea+Kn);this.setHandleIn(On!==0?new re((Pn*wn._x+jn*Cn._x-Wn*Bn._x)/On-Cn._x,(Pn*wn._y+jn*Cn._y-Wn*Bn._y)/On-Cn._y):new re)}if(!Ve&&vn){var jn=2*Wn+3*Kn*ea+Pn,On=3*Kn*(Kn+ea);this.setHandleOut(On!==0?new re((Wn*Bn._x+jn*Cn._x-Pn*wn._x)/On-Cn._x,(Wn*Bn._y+jn*Cn._y-Pn*wn._y)/On-Cn._y):new re)}}else if(Et==="geometric"){if(_n&&vn){var Un=wn.subtract(Bn),Yn=Lt===r?.4:Lt,ta=Yn*zn/(zn+Fn);Oe||this.setHandleIn(Un.multiply(ta)),Ve||this.setHandleOut(Un.multiply(ta-Yn))}}else throw new Error("Smoothing method '"+Et+"' not supported.")},getPrevious:function(){var pe=this._path&&this._path._segments;return pe&&(pe[this._index-1]||this._path._closed&&pe[pe.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var pe=this._path;return pe&&this._index===pe._segments.length-1||!1},reverse:function(){var pe=this._handleIn,Oe=this._handleOut,Ve=pe.clone();pe.set(Oe),Oe.set(Ve)},reversed:function(){return new jt(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new jt(this._point,this._handleIn,this._handleOut)},equals:function(pe){return pe===this||pe&&this._class===pe._class&&this._point.equals(pe._point)&&this._handleIn.equals(pe._handleIn)&&this._handleOut.equals(pe._handleOut)||!1},toString:function(){var pe=["point: "+this._point];return this._handleIn.isZero()||pe.push("handleIn: "+this._handleIn),this._handleOut.isZero()||pe.push("handleOut: "+this._handleOut),"{ "+pe.join(", ")+" }"},transform:function(pe){this._transformCoordinates(pe,new Array(6),!0),this._changed()},interpolate:function(pe,Oe,Ve){var qe=1-Ve,Et=Ve,Lt=pe._point,_n=Oe._point,vn=pe._handleIn,wn=Oe._handleIn,Cn=Oe._handleOut,Bn=pe._handleOut;this._point._set(qe*Lt._x+Et*_n._x,qe*Lt._y+Et*_n._y,!0),this._handleIn._set(qe*vn._x+Et*wn._x,qe*vn._y+Et*wn._y,!0),this._handleOut._set(qe*Bn._x+Et*Cn._x,qe*Bn._y+Et*Cn._y,!0),this._changed()},_transformCoordinates:function(pe,Oe,Ve){var qe=this._point,Et=!Ve||!this._handleIn.isZero()?this._handleIn:null,Lt=!Ve||!this._handleOut.isZero()?this._handleOut:null,_n=qe._x,vn=qe._y,wn=2;return Oe[0]=_n,Oe[1]=vn,Et&&(Oe[wn++]=Et._x+_n,Oe[wn++]=Et._y+vn),Lt&&(Oe[wn++]=Lt._x+_n,Oe[wn++]=Lt._y+vn),pe&&(pe._transformCoordinates(Oe,Oe,wn/2),_n=Oe[0],vn=Oe[1],Ve?(qe._x=_n,qe._y=vn,wn=2,Et&&(Et._x=Oe[wn++]-_n,Et._y=Oe[wn++]-vn),Lt&&(Lt._x=Oe[wn++]-_n,Lt._y=Oe[wn++]-vn)):(Et||(Oe[wn++]=_n,Oe[wn++]=vn),Lt||(Oe[wn++]=_n,Oe[wn++]=vn))),Oe}}),Vn=re.extend({initialize:function(Oe,Ve,qe){var Et,Lt,_n;if(!Oe)Et=Lt=0;else if((Et=Oe[0])!==r)Lt=Oe[1];else{var vn=Oe;(Et=vn.x)===r&&(vn=re.read(arguments),Et=vn.x),Lt=vn.y,_n=vn.selected}this._x=Et,this._y=Lt,this._owner=Ve,Ve[qe]=this,_n&&this.setSelected(!0)},_set:function(pe,Oe){return this._x=pe,this._y=Oe,this._owner._changed(this),this},getX:function(){return this._x},setX:function(pe){this._x=pe,this._owner._changed(this)},getY:function(){return this._y},setY:function(pe){this._y=pe,this._owner._changed(this)},isZero:function(){var pe=ae.isZero;return pe(this._x)&&pe(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(pe){this._owner._changeSelection(this._getSelection(),pe)},_getSelection:function(){var pe=this._owner;return this===pe._point?1:this===pe._handleIn?2:this===pe._handleOut?4:0}}),Rn=k.extend({_class:"Curve",beans:!0,initialize:function(Oe,Ve,qe,Et,Lt,_n,vn,wn){var Cn=arguments.length,Bn,zn,Fn,Gn,Kn,Wn;Cn===3?(this._path=Oe,Bn=Ve,zn=qe):Cn?Cn===1?"segment1"in Oe?(Bn=new jt(Oe.segment1),zn=new jt(Oe.segment2)):"point1"in Oe?(Fn=Oe.point1,Kn=Oe.handle1,Wn=Oe.handle2,Gn=Oe.point2):Array.isArray(Oe)&&(Fn=[Oe[0],Oe[1]],Gn=[Oe[6],Oe[7]],Kn=[Oe[2]-Oe[0],Oe[3]-Oe[1]],Wn=[Oe[4]-Oe[6],Oe[5]-Oe[7]]):Cn===2?(Bn=new jt(Oe),zn=new jt(Ve)):Cn===4?(Fn=Oe,Kn=Ve,Wn=qe,Gn=Et):Cn===8&&(Fn=[Oe,Ve],Gn=[vn,wn],Kn=[qe-Oe,Et-Ve],Wn=[Lt-vn,_n-wn]):(Bn=new jt,zn=new jt),this._segment1=Bn||new jt(Fn,null,Kn),this._segment2=zn||new jt(Gn,Wn,null)},_serialize:function(pe,Oe){return k.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],pe,!0,Oe)},_changed:function(){this._length=this._bounds=r},clone:function(){return new Rn(this._segment1,this._segment2)},toString:function(){var pe=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||pe.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||pe.push("handle2: "+this._segment2._handleIn),pe.push("point2: "+this._segment2._point),"{ "+pe.join(", ")+" }"},classify:function(){return Rn.classify(this.getValues())},remove:function(){var pe=!1;if(this._path){var Oe=this._segment2,Ve=Oe._handleOut;pe=Oe.remove(),pe&&this._segment1._handleOut.set(Ve)}return pe},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(re.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(re.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(re.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(re.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var pe=this._path&&this._path._curves;return pe&&(pe[this._segment1._index+1]||this._path._closed&&pe[0])||null},getPrevious:function(){var pe=this._path&&this._path._curves;return pe&&(pe[this._segment1._index-1]||this._path._closed&&pe[pe.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var pe=this._path;return pe&&this._segment1._index===pe._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(pe){this.getPoint1().setSelected(pe),this.getHandle1().setSelected(pe),this.getHandle2().setSelected(pe),this.getPoint2().setSelected(pe)},getValues:function(pe){return Rn.getValues(this._segment1,this._segment2,pe)},getPoints:function(){for(var pe=this.getValues(),Oe=[],Ve=0;Ve<8;Ve+=2)Oe.push(new re(pe[Ve],pe[Ve+1]));return Oe}},{getLength:function(){return this._length==null&&(this._length=Rn.getLength(this.getValues(),0,1)),this._length},getArea:function(){return Rn.getArea(this.getValues())},getLine:function(){return new Ne(this._segment1._point,this._segment2._point)},getPart:function(pe,Oe){return new Rn(Rn.getPart(this.getValues(),pe,Oe))},getPartLength:function(pe,Oe){return Rn.getLength(this.getValues(),pe,Oe)},divideAt:function(pe){return this.divideAtTime(pe&&pe.curve===this?pe.time:this.getTimeAt(pe))},divideAtTime:function(pe,Oe){var Ve=1e-8,qe=1-Ve,Et=null;if(pe>=Ve&&pe<=qe){var Lt=Rn.subdivide(this.getValues(),pe),_n=Lt[0],vn=Lt[1],wn=Oe||this.hasHandles(),Cn=this._segment1,Bn=this._segment2,zn=this._path;wn&&(Cn._handleOut._set(_n[2]-_n[0],_n[3]-_n[1]),Bn._handleIn._set(vn[4]-vn[6],vn[5]-vn[7]));var Fn=_n[6],Gn=_n[7],Kn=new jt(new re(Fn,Gn),wn&&new re(_n[4]-Fn,_n[5]-Gn),wn&&new re(vn[2]-Fn,vn[3]-Gn));zn?(zn.insert(Cn._index+1,Kn),Et=this.getNext()):(this._segment2=Kn,this._changed(),Et=new Rn(Kn,Bn))}return Et},splitAt:function(pe){var Oe=this._path;return Oe?Oe.splitAt(pe):null},splitAtTime:function(pe){return this.splitAt(this.getLocationAtTime(pe))},divide:function(pe,Oe){return this.divideAtTime(pe===r?.5:Oe?pe:this.getTimeAt(pe))},split:function(pe,Oe){return this.splitAtTime(pe===r?.5:Oe?pe:this.getTimeAt(pe))},reversed:function(){return new Rn(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(pe,Oe,Ve,qe){var Et=pe._point,Lt=pe._handleOut,_n=Oe._handleIn,vn=Oe._point,wn=Et.x,Cn=Et.y,Bn=vn.x,zn=vn.y,Fn=qe?[wn,Cn,wn,Cn,Bn,zn,Bn,zn]:[wn,Cn,wn+Lt._x,Cn+Lt._y,Bn+_n._x,zn+_n._y,Bn,zn];return Ve&&Ve._transformCoordinates(Fn,Fn,4),Fn},subdivide:function(pe,Oe){var Ve=pe[0],qe=pe[1],Et=pe[2],Lt=pe[3],_n=pe[4],vn=pe[5],wn=pe[6],Cn=pe[7];Oe===r&&(Oe=.5);var Bn=1-Oe,zn=Bn*Ve+Oe*Et,Fn=Bn*qe+Oe*Lt,Gn=Bn*Et+Oe*_n,Kn=Bn*Lt+Oe*vn,Wn=Bn*_n+Oe*wn,ea=Bn*vn+Oe*Cn,Pn=Bn*zn+Oe*Gn,jn=Bn*Fn+Oe*Kn,On=Bn*Gn+Oe*Wn,Un=Bn*Kn+Oe*ea,Yn=Bn*Pn+Oe*On,ta=Bn*jn+Oe*Un;return[[Ve,qe,zn,Fn,Pn,jn,Yn,ta],[Yn,ta,On,Un,Wn,ea,wn,Cn]]},getMonoCurves:function(pe,Oe){var Ve=[],qe=Oe?0:1,Et=pe[qe+0],Lt=pe[qe+2],_n=pe[qe+4],vn=pe[qe+6];if(Et>=Lt==Lt>=_n&&Lt>=_n==_n>=vn||Rn.isStraight(pe))Ve.push(pe);else{var wn=3*(Lt-_n)-Et+vn,Cn=2*(Et+_n)-4*Lt,Bn=Lt-Et,zn=1e-8,Fn=1-zn,Gn=[],Kn=ae.solveQuadratic(wn,Cn,Bn,Gn,zn,Fn);if(!Kn)Ve.push(pe);else{Gn.sort();var Wn=Gn[0],ea=Rn.subdivide(pe,Wn);Ve.push(ea[0]),Kn>1&&(Wn=(Gn[1]-Wn)/(1-Wn),ea=Rn.subdivide(ea[1],Wn),Ve.push(ea[0])),Ve.push(ea[1])}}return Ve},solveCubic:function(pe,Oe,Ve,qe,Et,Lt){var _n=pe[Oe],vn=pe[Oe+2],wn=pe[Oe+4],Cn=pe[Oe+6],Bn=0;if(!(_n<Ve&&Cn<Ve&&vn<Ve&&wn<Ve||_n>Ve&&Cn>Ve&&vn>Ve&&wn>Ve)){var zn=3*(vn-_n),Fn=3*(wn-vn)-zn,Gn=Cn-_n-zn-Fn;Bn=ae.solveCubic(Gn,Fn,zn,_n-Ve,qe,Et,Lt)}return Bn},getTimeOf:function(pe,Oe){var Ve=new re(pe[0],pe[1]),qe=new re(pe[6],pe[7]),Et=1e-12,Lt=1e-7,_n=Oe.isClose(Ve,Et)?0:Oe.isClose(qe,Et)?1:null;if(_n===null)for(var vn=[Oe.x,Oe.y],wn=[],Cn=0;Cn<2;Cn++)for(var Bn=Rn.solveCubic(pe,Cn,vn[Cn],wn,0,1),zn=0;zn<Bn;zn++){var Fn=wn[zn];if(Oe.isClose(Rn.getPoint(pe,Fn),Lt))return Fn}return Oe.isClose(Ve,Lt)?0:Oe.isClose(qe,Lt)?1:null},getNearestTime:function(pe,Oe){if(Rn.isStraight(pe)){var Ve=pe[0],qe=pe[1],Et=pe[6],Lt=pe[7],_n=Et-Ve,vn=Lt-qe,wn=_n*_n+vn*vn;if(wn===0)return 0;var Cn=((Oe.x-Ve)*_n+(Oe.y-qe)*vn)/wn;return Cn<1e-12?0:Cn>.999999999999?1:Rn.getTimeOf(pe,new re(Ve+Cn*_n,qe+Cn*vn))}var Bn=100,zn=1/0,Fn=0;function Gn(ea){if(ea>=0&&ea<=1){var Pn=Oe.getDistance(Rn.getPoint(pe,ea),!0);if(Pn<zn)return zn=Pn,Fn=ea,!0}}for(var Kn=0;Kn<=Bn;Kn++)Gn(Kn/Bn);for(var Wn=1/(Bn*2);Wn>1e-8;)!Gn(Fn-Wn)&&!Gn(Fn+Wn)&&(Wn/=2);return Fn},getPart:function(pe,Oe,Ve){var qe=Oe>Ve;if(qe){var Et=Oe;Oe=Ve,Ve=Et}return Oe>0&&(pe=Rn.subdivide(pe,Oe)[1]),Ve<1&&(pe=Rn.subdivide(pe,(Ve-Oe)/(1-Oe))[0]),qe?[pe[6],pe[7],pe[4],pe[5],pe[2],pe[3],pe[0],pe[1]]:pe},isFlatEnough:function(pe,Oe){var Ve=pe[0],qe=pe[1],Et=pe[2],Lt=pe[3],_n=pe[4],vn=pe[5],wn=pe[6],Cn=pe[7],Bn=3*Et-2*Ve-wn,zn=3*Lt-2*qe-Cn,Fn=3*_n-2*wn-Ve,Gn=3*vn-2*Cn-qe;return Math.max(Bn*Bn,Fn*Fn)+Math.max(zn*zn,Gn*Gn)<=16*Oe*Oe},getArea:function(pe){var Oe=pe[0],Ve=pe[1],qe=pe[2],Et=pe[3],Lt=pe[4],_n=pe[5],vn=pe[6],wn=pe[7];return 3*((wn-Ve)*(qe+Lt)-(vn-Oe)*(Et+_n)+Et*(Oe-Lt)-qe*(Ve-_n)+wn*(Lt+Oe/3)-vn*(_n+Ve/3))/20},getBounds:function(pe){for(var Oe=pe.slice(0,2),Ve=Oe.slice(),qe=[0,0],Et=0;Et<2;Et++)Rn._addBounds(pe[Et],pe[Et+2],pe[Et+4],pe[Et+6],Et,0,Oe,Ve,qe);return new he(Oe[0],Oe[1],Ve[0]-Oe[0],Ve[1]-Oe[1])},_addBounds:function(pe,Oe,Ve,qe,Et,Lt,_n,vn,wn){function Cn(Yn,ta){var Jn=Yn-ta,pa=Yn+ta;Jn<_n[Et]&&(_n[Et]=Jn),pa>vn[Et]&&(vn[Et]=pa)}Lt/=2;var Bn=_n[Et]+Lt,zn=vn[Et]-Lt;if(pe<Bn||Oe<Bn||Ve<Bn||qe<Bn||pe>zn||Oe>zn||Ve>zn||qe>zn)if(Oe<pe!=Oe<qe&&Ve<pe!=Ve<qe)Cn(pe,0),Cn(qe,0);else{var Fn=3*(Oe-Ve)-pe+qe,Gn=2*(pe+Ve)-4*Oe,Kn=Oe-pe,Wn=ae.solveQuadratic(Fn,Gn,Kn,wn),ea=1e-8,Pn=1-ea;Cn(qe,0);for(var jn=0;jn<Wn;jn++){var On=wn[jn],Un=1-On;ea<=On&&On<=Pn&&Cn(Un*Un*Un*pe+3*Un*Un*On*Oe+3*Un*On*On*Ve+On*On*On*qe,Lt)}}}}},k.each(["getBounds","getStrokeBounds","getHandleBounds"],function(pe){this[pe]=function(){this._bounds||(this._bounds={});var Oe=this._bounds[pe];return Oe||(Oe=this._bounds[pe]=Sn[pe]([this._segment1,this._segment2],!1,this._path)),Oe.clone()}},{}),k.each({isStraight:function(pe,Oe,Ve,qe){if(Oe.isZero()&&Ve.isZero())return!0;var Et=qe.subtract(pe);if(Et.isZero())return!1;if(Et.isCollinear(Oe)&&Et.isCollinear(Ve)){var Lt=new Ne(pe,qe),_n=1e-7;if(Lt.getDistance(pe.add(Oe))<_n&&Lt.getDistance(qe.add(Ve))<_n){var vn=Et.dot(Et),wn=Et.dot(Oe)/vn,Cn=Et.dot(Ve)/vn;return wn>=0&&wn<=1&&Cn<=0&&Cn>=-1}}return!1},isLinear:function(pe,Oe,Ve,qe){var Et=qe.subtract(pe).divide(3);return Oe.equals(Et)&&Ve.negate().equals(Et)}},function(pe,Oe){this[Oe]=function(Ve){var qe=this._segment1,Et=this._segment2;return pe(qe._point,qe._handleOut,Et._handleIn,Et._point,Ve)},this.statics[Oe]=function(Ve,qe){var Et=Ve[0],Lt=Ve[1],_n=Ve[6],vn=Ve[7];return pe(new re(Et,Lt),new re(Ve[2]-Et,Ve[3]-Lt),new re(Ve[4]-_n,Ve[5]-vn),new re(_n,vn),qe)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(pe){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(pe||0)},isCollinear:function(pe){return pe&&this.isStraight()&&pe.isStraight()&&this.getLine().isCollinear(pe.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(pe,Oe){return this.getLocationAtTime(Oe?pe:this.getTimeAt(pe))},getLocationAtTime:function(pe){return pe!=null&&pe>=0&&pe<=1?new Tn(this,pe):null},getTimeAt:function(pe,Oe){return Rn.getTimeAt(this.getValues(),pe,Oe)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var pe=re.read(arguments);return pe.isZero()?[]:Rn.getTimesWithTangent(this.getValues(),pe)},getOffsetAtTime:function(pe){return this.getPartLength(0,pe)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(re.read(arguments)))},getOffsetOf:function(){var pe=this.getLocationOf.apply(this,arguments);return pe?pe.getOffset():null},getTimeOf:function(){return Rn.getTimeOf(this.getValues(),re.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var pe=re.read(arguments),Oe=this.getValues(),Ve=Rn.getNearestTime(Oe,pe),qe=Rn.getPoint(Oe,Ve);return new Tn(this,Ve,qe,null,pe.getDistance(qe))},getNearestPoint:function(){var pe=this.getNearestLocation.apply(this,arguments);return pe&&pe.getPoint()}},new function(){var pe=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return k.each(pe,function(Oe){this[Oe+"At"]=function(Ve,qe){var Et=this.getValues();return Rn[Oe](Et,qe?Ve:Rn.getTimeAt(Et,Ve))},this[Oe+"AtTime"]=function(Ve){return Rn[Oe](this.getValues(),Ve)}},{statics:{_evaluateMethods:pe}})},new function(){function pe(qe){var Et=qe[0],Lt=qe[1],_n=qe[2],vn=qe[3],wn=qe[4],Cn=qe[5],Bn=qe[6],zn=qe[7],Fn=9*(_n-wn)+3*(Bn-Et),Gn=6*(Et+wn)-12*_n,Kn=3*(_n-Et),Wn=9*(vn-Cn)+3*(zn-Lt),ea=6*(Lt+Cn)-12*vn,Pn=3*(vn-Lt);return function(jn){var On=(Fn*jn+Gn)*jn+Kn,Un=(Wn*jn+ea)*jn+Pn;return Math.sqrt(On*On+Un*Un)}}function Oe(qe,Et){return Math.max(2,Math.min(16,Math.ceil(Math.abs(Et-qe)*32)))}function Ve(qe,Et,Lt,_n){if(Et==null||Et<0||Et>1)return null;var vn=qe[0],wn=qe[1],Cn=qe[2],Bn=qe[3],zn=qe[4],Fn=qe[5],Gn=qe[6],Kn=qe[7],Wn=ae.isZero;Wn(Cn-vn)&&Wn(Bn-wn)&&(Cn=vn,Bn=wn),Wn(zn-Gn)&&Wn(Fn-Kn)&&(zn=Gn,Fn=Kn);var ea=3*(Cn-vn),Pn=3*(zn-Cn)-ea,jn=Gn-vn-ea-Pn,On=3*(Bn-wn),Un=3*(Fn-Bn)-On,Yn=Kn-wn-On-Un,ta,Jn;if(Lt===0)ta=Et===0?vn:Et===1?Gn:((jn*Et+Pn)*Et+ea)*Et+vn,Jn=Et===0?wn:Et===1?Kn:((Yn*Et+Un)*Et+On)*Et+wn;else{var pa=1e-8,ga=1-pa;if(Et<pa?(ta=ea,Jn=On):Et>ga?(ta=3*(Gn-zn),Jn=3*(Kn-Fn)):(ta=(3*jn*Et+2*Pn)*Et+ea,Jn=(3*Yn*Et+2*Un)*Et+On),_n){ta===0&&Jn===0&&(Et<pa||Et>ga)&&(ta=zn-Cn,Jn=Fn-Bn);var ba=Math.sqrt(ta*ta+Jn*Jn);ba&&(ta/=ba,Jn/=ba)}if(Lt===3){var zn=6*jn*Et+2*Pn,Fn=6*Yn*Et+2*Un,Oa=Math.pow(ta*ta+Jn*Jn,3/2);ta=Oa!==0?(ta*Fn-Jn*zn)/Oa:0,Jn=0}}return Lt===2?new re(Jn,-ta):new re(ta,Jn)}return{statics:{classify:function(qe){var Et=qe[0],Lt=qe[1],_n=qe[2],vn=qe[3],wn=qe[4],Cn=qe[5],Bn=qe[6],zn=qe[7],Fn=Et*(zn-Cn)+Lt*(wn-Bn)+Bn*Cn-zn*wn,Gn=_n*(Lt-zn)+vn*(Bn-Et)+Et*zn-Lt*Bn,Kn=wn*(vn-Lt)+Cn*(Et-_n)+_n*Lt-vn*Et,Wn=3*Kn,ea=Wn-Gn,Pn=ea-Gn+Fn,jn=Math.sqrt(Pn*Pn+ea*ea+Wn*Wn),On=jn!==0?1/jn:0,Un=ae.isZero,Yn="serpentine";Pn*=On,ea*=On,Wn*=On;function ta(ba,Oa,va){var Sa=Oa!==r,$a=Sa&&Oa>0&&Oa<1,Da=Sa&&va>0&&va<1;return Sa&&(!($a||Da)||ba==="loop"&&!($a&&Da))&&(ba="arch",$a=Da=!1),{type:ba,roots:$a||Da?$a&&Da?Oa<va?[Oa,va]:[va,Oa]:[$a?Oa:va]:null}}if(Un(Pn))return Un(ea)?ta(Un(Wn)?"line":"quadratic"):ta(Yn,Wn/(3*ea));var Jn=3*ea*ea-4*Pn*Wn;if(Un(Jn))return ta("cusp",ea/(2*Pn));var pa=Jn>0?Math.sqrt(Jn/3):Math.sqrt(-Jn),ga=2*Pn;return ta(Jn>0?Yn:"loop",(ea+pa)/ga,(ea-pa)/ga)},getLength:function(qe,Et,Lt,_n){if(Et===r&&(Et=0),Lt===r&&(Lt=1),Rn.isStraight(qe)){var vn=qe;Lt<1&&(vn=Rn.subdivide(vn,Lt)[0],Et/=Lt),Et>0&&(vn=Rn.subdivide(vn,Et)[1]);var wn=vn[6]-vn[0],Cn=vn[7]-vn[1];return Math.sqrt(wn*wn+Cn*Cn)}return ae.integrate(_n||pe(qe),Et,Lt,Oe(Et,Lt))},getTimeAt:function(qe,Et,Lt){if(Lt===r&&(Lt=Et<0?1:0),Et===0)return Lt;var _n=Math.abs,vn=1e-12,wn=Et>0,Cn=wn?Lt:0,Bn=wn?1:Lt,zn=pe(qe),Fn=Rn.getLength(qe,Cn,Bn,zn),Gn=_n(Et)-Fn;if(_n(Gn)<vn)return wn?Bn:Cn;if(Gn>vn)return null;var Kn=Et/Fn,Wn=0;function ea(Pn){return Wn+=ae.integrate(zn,Lt,Pn,Oe(Lt,Pn)),Lt=Pn,Wn-Et}return ae.findRoot(ea,zn,Lt+Kn,Cn,Bn,32,1e-12)},getPoint:function(qe,Et){return Ve(qe,Et,0,!1)},getTangent:function(qe,Et){return Ve(qe,Et,1,!0)},getWeightedTangent:function(qe,Et){return Ve(qe,Et,1,!1)},getNormal:function(qe,Et){return Ve(qe,Et,2,!0)},getWeightedNormal:function(qe,Et){return Ve(qe,Et,2,!1)},getCurvature:function(qe,Et){return Ve(qe,Et,3,!1).x},getPeaks:function(qe){var Et=qe[0],Lt=qe[1],_n=qe[2],vn=qe[3],wn=qe[4],Cn=qe[5],Bn=qe[6],zn=qe[7],Fn=-Et+3*_n-3*wn+Bn,Gn=3*Et-6*_n+3*wn,Kn=-3*Et+3*_n,Wn=-Lt+3*vn-3*Cn+zn,ea=3*Lt-6*vn+3*Cn,Pn=-3*Lt+3*vn,jn=1e-8,On=1-jn,Un=[];return ae.solveCubic(9*(Fn*Fn+Wn*Wn),9*(Fn*Gn+ea*Wn),2*(Gn*Gn+ea*ea)+3*(Kn*Fn+Pn*Wn),Kn*Gn+ea*Pn,Un,jn,On),Un.sort()}}}},new function(){function pe(Gn,Kn,Wn,ea,Pn,jn,On){var Un=!On&&Wn.getPrevious()===Pn,Yn=!On&&Wn!==Pn&&Wn.getNext()===Pn,ta=1e-8,Jn=1-ta;if(ea!==null&&ea>=(Un?ta:0)&&ea<=(Yn?Jn:1)&&jn!==null&&jn>=(Yn?ta:0)&&jn<=(Un?Jn:1)){var pa=new Tn(Wn,ea,null,On),ga=new Tn(Pn,jn,null,On);pa._intersection=ga,ga._intersection=pa,(!Kn||Kn(pa))&&Tn.insert(Gn,pa,!0)}}function Oe(Gn,Kn,Wn,ea,Pn,jn,On,Un,Yn,ta,Jn,pa,ga){if(++Yn>=4096||++Un>=40)return Yn;var ba=1e-9,Oa=Kn[0],va=Kn[1],Sa=Kn[6],$a=Kn[7],Da=Ne.getSignedDistance,Na=Da(Oa,va,Sa,$a,Kn[2],Kn[3]),Va=Da(Oa,va,Sa,$a,Kn[4],Kn[5]),Ua=Na*Va>0?3/4:4/9,Ha=Ua*Math.min(0,Na,Va),Qa=Ua*Math.max(0,Na,Va),Ja=Da(Oa,va,Sa,$a,Gn[0],Gn[1]),Ra=Da(Oa,va,Sa,$a,Gn[2],Gn[3]),Fa=Da(Oa,va,Sa,$a,Gn[4],Gn[5]),Xa=Da(Oa,va,Sa,$a,Gn[6],Gn[7]),to=Ve(Ja,Ra,Fa,Xa),eo=to[0],ro=to[1],oo,so;if(Na===0&&Va===0&&Ja===0&&Ra===0&&Fa===0&&Xa===0||(oo=qe(eo,ro,Ha,Qa))==null||(so=qe(eo.reverse(),ro.reverse(),Ha,Qa))==null)return Yn;var co=ta+(Jn-ta)*oo,io=ta+(Jn-ta)*so;if(Math.max(ga-pa,io-co)<ba){var Ka=(co+io)/2,yo=(pa+ga)/2;pe(Pn,jn,On?ea:Wn,On?yo:Ka,On?Wn:ea,On?Ka:yo)}else{Gn=Rn.getPart(Gn,oo,so);var $o=ga-pa;if(so-oo>.8)if(io-co>$o){var Oo=Rn.subdivide(Gn,.5),Ka=(co+io)/2;Yn=Oe(Kn,Oo[0],ea,Wn,Pn,jn,!On,Un,Yn,pa,ga,co,Ka),Yn=Oe(Kn,Oo[1],ea,Wn,Pn,jn,!On,Un,Yn,pa,ga,Ka,io)}else{var Oo=Rn.subdivide(Kn,.5),yo=(pa+ga)/2;Yn=Oe(Oo[0],Gn,ea,Wn,Pn,jn,!On,Un,Yn,pa,yo,co,io),Yn=Oe(Oo[1],Gn,ea,Wn,Pn,jn,!On,Un,Yn,yo,ga,co,io)}else $o===0||$o>=ba?Yn=Oe(Kn,Gn,ea,Wn,Pn,jn,!On,Un,Yn,pa,ga,co,io):Yn=Oe(Gn,Kn,Wn,ea,Pn,jn,On,Un,Yn,co,io,pa,ga)}return Yn}function Ve(Gn,Kn,Wn,ea){var Pn=[0,Gn],jn=[1/3,Kn],On=[2/3,Wn],Un=[1,ea],Yn=Kn-(2*Gn+ea)/3,ta=Wn-(Gn+2*ea)/3,Jn;if(Yn*ta<0)Jn=[[Pn,jn,Un],[Pn,On,Un]];else{var pa=Yn/ta;Jn=[pa>=2?[Pn,jn,Un]:pa<=.5?[Pn,On,Un]:[Pn,jn,On,Un],[Pn,Un]]}return(Yn||ta)<0?Jn.reverse():Jn}function qe(Gn,Kn,Wn,ea){return Gn[0][1]<Wn?Et(Gn,!0,Wn):Kn[0][1]>ea?Et(Kn,!1,ea):Gn[0][0]}function Et(Gn,Kn,Wn){for(var ea=Gn[0][0],Pn=Gn[0][1],jn=1,On=Gn.length;jn<On;jn++){var Un=Gn[jn][0],Yn=Gn[jn][1];if(Kn?Yn>=Wn:Yn<=Wn)return Yn===Wn?Un:ea+(Wn-Pn)*(Un-ea)/(Yn-Pn);ea=Un,Pn=Yn}return null}function Lt(Gn,Kn,Wn,ea,Pn){var jn=ae.isZero;if(jn(ea)&&jn(Pn)){var On=Rn.getTimeOf(Gn,new re(Kn,Wn));return On===null?[]:[On]}for(var Un=Math.atan2(-Pn,ea),Yn=Math.sin(Un),ta=Math.cos(Un),Jn=[],pa=[],ga=0;ga<8;ga+=2){var ba=Gn[ga]-Kn,Oa=Gn[ga+1]-Wn;Jn.push(ba*ta-Oa*Yn,ba*Yn+Oa*ta)}return Rn.solveCubic(Jn,1,0,pa,0,1),pa}function _n(Gn,Kn,Wn,ea,Pn,jn,On){for(var Un=Kn[0],Yn=Kn[1],ta=Kn[6],Jn=Kn[7],pa=Lt(Gn,Un,Yn,ta-Un,Jn-Yn),ga=0,ba=pa.length;ga<ba;ga++){var Oa=pa[ga],va=Rn.getPoint(Gn,Oa),Sa=Rn.getTimeOf(Kn,va);Sa!==null&&pe(Pn,jn,On?ea:Wn,On?Sa:Oa,On?Wn:ea,On?Oa:Sa)}}function vn(Gn,Kn,Wn,ea,Pn,jn){var On=Ne.intersect(Gn[0],Gn[1],Gn[6],Gn[7],Kn[0],Kn[1],Kn[6],Kn[7]);On&&pe(Pn,jn,Wn,Rn.getTimeOf(Gn,On),ea,Rn.getTimeOf(Kn,On))}function wn(Gn,Kn,Wn,ea,Pn,jn){var On=1e-12,Un=Math.min,Yn=Math.max;if(Yn(Gn[0],Gn[2],Gn[4],Gn[6])+On>Un(Kn[0],Kn[2],Kn[4],Kn[6])&&Un(Gn[0],Gn[2],Gn[4],Gn[6])-On<Yn(Kn[0],Kn[2],Kn[4],Kn[6])&&Yn(Gn[1],Gn[3],Gn[5],Gn[7])+On>Un(Kn[1],Kn[3],Kn[5],Kn[7])&&Un(Gn[1],Gn[3],Gn[5],Gn[7])-On<Yn(Kn[1],Kn[3],Kn[5],Kn[7])){var ta=zn(Gn,Kn);if(ta)for(var Jn=0;Jn<2;Jn++){var pa=ta[Jn];pe(Pn,jn,Wn,pa[0],ea,pa[1],!0)}else{var ga=Rn.isStraight(Gn),ba=Rn.isStraight(Kn),Oa=ga&&ba,va=ga&&!ba,Sa=Pn.length;if((Oa?vn:ga||ba?_n:Oe)(va?Kn:Gn,va?Gn:Kn,va?ea:Wn,va?Wn:ea,Pn,jn,va,0,0,0,1,0,1),!Oa||Pn.length===Sa)for(var Jn=0;Jn<4;Jn++){var $a=Jn>>1,Da=Jn&1,Na=$a*6,Va=Da*6,Ua=new re(Gn[Na],Gn[Na+1]),Ha=new re(Kn[Va],Kn[Va+1]);Ua.isClose(Ha,On)&&pe(Pn,jn,Wn,$a,ea,Da)}}}return Pn}function Cn(Gn,Kn,Wn,ea){var Pn=Rn.classify(Gn);if(Pn.type==="loop"){var jn=Pn.roots;pe(Wn,ea,Kn,jn[0],Kn,jn[1])}return Wn}function Bn(Gn,Kn,Wn,ea,Pn,jn){var On=1e-7,Un=!Kn;Un&&(Kn=Gn);for(var Yn=Gn.length,ta=Kn.length,Jn=new Array(Yn),pa=Un?Jn:new Array(ta),ga=[],ba=0;ba<Yn;ba++)Jn[ba]=Gn[ba].getValues(ea);if(!Un)for(var ba=0;ba<ta;ba++)pa[ba]=Kn[ba].getValues(Pn);for(var Oa=z.findCurveBoundsCollisions(Jn,pa,On),va=0;va<Yn;va++){var Sa=Gn[va],$a=Jn[va];Un&&Cn($a,Sa,ga,Wn);var Da=Oa[va];if(Da)for(var Na=0;Na<Da.length;Na++){if(jn&&ga.length)return ga;var Va=Da[Na];if(!Un||Va>va){var Ua=Kn[Va],Ha=pa[Va];wn($a,Ha,Sa,Ua,ga,Wn)}}}return ga}function zn(Gn,Kn){function Wn(Xa){var to=Xa[6]-Xa[0],eo=Xa[7]-Xa[1];return to*to+eo*eo}var ea=Math.abs,Pn=Ne.getDistance,jn=1e-8,On=1e-7,Un=Rn.isStraight(Gn),Yn=Rn.isStraight(Kn),ta=Un&&Yn,Jn=Wn(Gn)<Wn(Kn),pa=Jn?Kn:Gn,ga=Jn?Gn:Kn,ba=pa[0],Oa=pa[1],va=pa[6]-ba,Sa=pa[7]-Oa;if(Pn(ba,Oa,va,Sa,ga[0],ga[1],!0)<On&&Pn(ba,Oa,va,Sa,ga[6],ga[7],!0)<On)!ta&&Pn(ba,Oa,va,Sa,pa[2],pa[3],!0)<On&&Pn(ba,Oa,va,Sa,pa[4],pa[5],!0)<On&&Pn(ba,Oa,va,Sa,ga[2],ga[3],!0)<On&&Pn(ba,Oa,va,Sa,ga[4],ga[5],!0)<On&&(Un=Yn=ta=!0);else if(ta)return null;if(Un^Yn)return null;for(var $a=[Gn,Kn],Da=[],Na=0;Na<4&&Da.length<2;Na++){var Va=Na&1,Ua=Va^1,Ha=Na>>1,Qa=Rn.getTimeOf($a[Va],new re($a[Ua][Ha?6:0],$a[Ua][Ha?7:1]));if(Qa!=null){var Ja=Va?[Ha,Qa]:[Qa,Ha];(!Da.length||ea(Ja[0]-Da[0][0])>jn&&ea(Ja[1]-Da[0][1])>jn)&&Da.push(Ja)}if(Na>2&&!Da.length)break}if(Da.length!==2)Da=null;else if(!ta){var Ra=Rn.getPart(Gn,Da[0][0],Da[1][0]),Fa=Rn.getPart(Kn,Da[0][1],Da[1][1]);(ea(Fa[2]-Ra[2])>On||ea(Fa[3]-Ra[3])>On||ea(Fa[4]-Ra[4])>On||ea(Fa[5]-Ra[5])>On)&&(Da=null)}return Da}function Fn(Gn,Kn){var Wn=Gn[0],ea=Gn[1],Pn=Gn[2],jn=Gn[3],On=Gn[4],Un=Gn[5],Yn=Gn[6],ta=Gn[7],Jn=Kn.normalize(),pa=Jn.x,ga=Jn.y,ba=3*Yn-9*On+9*Pn-3*Wn,Oa=3*ta-9*Un+9*jn-3*ea,va=6*On-12*Pn+6*Wn,Sa=6*Un-12*jn+6*ea,$a=3*Pn-3*Wn,Da=3*jn-3*ea,Na=2*ba*ga-2*Oa*pa,Va=[];if(Math.abs(Na)<ae.CURVETIME_EPSILON){var Ua=ba*Da-Oa*$a,Na=ba*Sa-Oa*va;if(Na!=0){var Ha=-Ua/Na;Ha>=0&&Ha<=1&&Va.push(Ha)}}else{var Qa=(va*va-4*ba*$a)*ga*ga+(-2*va*Sa+4*Oa*$a+4*ba*Da)*pa*ga+(Sa*Sa-4*Oa*Da)*pa*pa,Ja=va*ga-Sa*pa;if(Qa>=0&&Na!=0){var Ra=Math.sqrt(Qa),Fa=-(Ja+Ra)/Na,Xa=(-Ja+Ra)/Na;Fa>=0&&Fa<=1&&Va.push(Fa),Xa>=0&&Xa<=1&&Va.push(Xa)}}return Va}return{getIntersections:function(Gn){var Kn=this.getValues(),Wn=Gn&&Gn!==this&&Gn.getValues();return Wn?wn(Kn,Wn,this,Gn,[]):Cn(Kn,this,[])},statics:{getOverlaps:zn,getIntersections:Bn,getCurveLineIntersections:Lt,getTimesWithTangent:Fn}}}),Tn=k.extend({_class:"CurveLocation",initialize:function(Oe,Ve,qe,Et,Lt){if(Ve>=.99999999){var _n=Oe.getNext();_n&&(Ve=0,Oe=_n)}this._setCurve(Oe),this._time=Ve,this._point=qe||Oe.getPointAtTime(Ve),this._overlap=Et,this._distance=Lt,this._intersection=this._next=this._previous=null},_setPath:function(pe){this._path=pe,this._version=pe?pe._version:0},_setCurve:function(pe){this._setPath(pe._path),this._curve=pe,this._segment=null,this._segment1=pe._segment1,this._segment2=pe._segment2},_setSegment:function(pe){var Oe=pe.getCurve();Oe?this._setCurve(Oe):(this._setPath(pe._path),this._segment1=pe,this._segment2=null),this._segment=pe,this._time=pe===this._segment1?0:1,this._point=pe._point.clone()},getSegment:function(){var pe=this._segment;if(!pe){var Oe=this.getCurve(),Ve=this.getTime();Ve===0?pe=Oe._segment1:Ve===1?pe=Oe._segment2:Ve!=null&&(pe=Oe.getPartLength(0,Ve)<Oe.getPartLength(Ve,1)?Oe._segment1:Oe._segment2),this._segment=pe}return pe},getCurve:function(){var pe=this._path,Oe=this;pe&&pe._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function Ve(qe){var Et=qe&&qe.getCurve();if(Et&&(Oe._time=Et.getTimeOf(Oe._point))!=null)return Oe._setCurve(Et),Et}return this._curve||Ve(this._segment)||Ve(this._segment1)||Ve(this._segment2.getPrevious())},getPath:function(){var pe=this.getCurve();return pe&&pe._path},getIndex:function(){var pe=this.getCurve();return pe&&pe.getIndex()},getTime:function(){var pe=this.getCurve(),Oe=this._time;return pe&&Oe==null?this._time=pe.getTimeOf(this._point):Oe},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var pe=this._offset;if(pe==null){pe=0;var Oe=this.getPath(),Ve=this.getIndex();if(Oe&&Ve!=null)for(var qe=Oe.getCurves(),Et=0;Et<Ve;Et++)pe+=qe[Et].getLength();this._offset=pe+=this.getCurveOffset()}return pe},getCurveOffset:function(){var pe=this._curveOffset;if(pe==null){var Oe=this.getCurve(),Ve=this.getTime();this._curveOffset=pe=Ve!=null&&Oe&&Oe.getPartLength(0,Ve)}return pe},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var pe=this.getCurve(),Oe=pe&&pe.divideAtTime(this.getTime());return Oe&&this._setSegment(Oe._segment1),Oe},split:function(){var pe=this.getCurve(),Oe=pe._path,Ve=pe&&pe.splitAtTime(this.getTime());return Ve&&this._setSegment(Oe.getLastSegment()),Ve},equals:function(pe,Oe){var Ve=this===pe;if(!Ve&&pe instanceof Tn){var qe=this.getCurve(),Et=pe.getCurve(),Lt=qe._path,_n=Et._path;if(Lt===_n){var vn=Math.abs,wn=1e-7,Cn=vn(this.getOffset()-pe.getOffset()),Bn=!Oe&&this._intersection,zn=!Oe&&pe._intersection;Ve=(Cn<wn||Lt&&vn(Lt.getLength()-Cn)<wn)&&(!Bn&&!zn||Bn&&zn&&Bn.equals(zn,!0))}}return Ve},toString:function(){var pe=[],Oe=this.getPoint(),Ve=j.instance;Oe&&pe.push("point: "+Oe);var qe=this.getIndex();qe!=null&&pe.push("index: "+qe);var Et=this.getTime();return Et!=null&&pe.push("time: "+Ve.number(Et)),this._distance!=null&&pe.push("distance: "+Ve.number(this._distance)),"{ "+pe.join(", ")+" }"},isTouching:function(){var pe=this._intersection;if(pe&&this.getTangent().isCollinear(pe.getTangent())){var Oe=this.getCurve(),Ve=pe.getCurve();return!(Oe.isStraight()&&Ve.isStraight()&&Oe.getLine().intersect(Ve.getLine()))}return!1},isCrossing:function(){var pe=this._intersection;if(!pe)return!1;var Oe=this.getTime(),Ve=pe.getTime(),qe=1e-8,Et=1-qe,Lt=Oe>=qe&&Oe<=Et,_n=Ve>=qe&&Ve<=Et;if(Lt&&_n)return!this.isTouching();var vn=this.getCurve(),wn=vn&&Oe<qe?vn.getPrevious():vn,Cn=pe.getCurve(),Bn=Cn&&Ve<qe?Cn.getPrevious():Cn;if(Oe>Et&&(vn=vn.getNext()),Ve>Et&&(Cn=Cn.getNext()),!wn||!vn||!Bn||!Cn)return!1;var zn=[];function Fn(pa,ga){var ba=pa.getValues(),Oa=Rn.classify(ba).roots||Rn.getPeaks(ba),va=Oa.length,Sa=Rn.getLength(ba,ga&&va?Oa[va-1]:0,!ga&&va?Oa[0]:1);zn.push(va?Sa:Sa/32)}function Gn(pa,ga,ba){return ga<ba?pa>ga&&pa<ba:pa>ga||pa<ba}Lt||(Fn(wn,!0),Fn(vn,!1)),_n||(Fn(Bn,!0),Fn(Cn,!1));var Kn=this.getPoint(),Wn=Math.min.apply(Math,zn),ea=Lt?vn.getTangentAtTime(Oe):vn.getPointAt(Wn).subtract(Kn),Pn=Lt?ea.negate():wn.getPointAt(-Wn).subtract(Kn),jn=_n?Cn.getTangentAtTime(Ve):Cn.getPointAt(Wn).subtract(Kn),On=_n?jn.negate():Bn.getPointAt(-Wn).subtract(Kn),Un=Pn.getAngle(),Yn=ea.getAngle(),ta=On.getAngle(),Jn=jn.getAngle();return!!(Lt?Gn(Un,ta,Jn)^Gn(Yn,ta,Jn)&&Gn(Un,Jn,ta)^Gn(Yn,Jn,ta):Gn(ta,Un,Yn)^Gn(Jn,Un,Yn)&&Gn(ta,Yn,Un)^Gn(Jn,Yn,Un))},hasOverlap:function(){return!!this._overlap}},k.each(Rn._evaluateMethods,function(pe){var Oe=pe+"At";this[pe]=function(){var Ve=this.getCurve(),qe=this.getTime();return qe!=null&&Ve&&Ve[Oe](qe,!0)}},{preserve:!0}),new function(){function pe(Oe,Ve,qe){var Et=Oe.length,Lt=0,_n=Et-1;function vn(Kn,Wn){for(var ea=Kn+Wn;ea>=-1&&ea<=Et;ea+=Wn){var Pn=Oe[(ea%Et+Et)%Et];if(!Ve.getPoint().isClose(Pn.getPoint(),1e-7))break;if(Ve.equals(Pn))return Pn}return null}for(;Lt<=_n;){var wn=Lt+_n>>>1,Cn=Oe[wn],Bn;if(qe&&(Bn=Ve.equals(Cn)?Cn:vn(wn,-1)||vn(wn,1)))return Ve._overlap&&(Bn._overlap=Bn._intersection._overlap=!0),Bn;var zn=Ve.getPath(),Fn=Cn.getPath(),Gn=zn!==Fn?zn._id-Fn._id:Ve.getIndex()+Ve.getTime()-(Cn.getIndex()+Cn.getTime());Gn<0?_n=wn-1:Lt=wn+1}return Oe.splice(Lt,0,Ve),Ve}return{statics:{insert:pe,expand:function(Oe){for(var Ve=Oe.slice(),qe=Oe.length-1;qe>=0;qe--)pe(Ve,Oe[qe]._intersection,!1);return Ve}}}}),Ln=Ce.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(pe){var Oe,Ve,qe;if(k.isPlainObject(pe)?(Ve=pe.segments,Oe=pe.pathData):Array.isArray(pe)?Ve=pe:typeof pe=="string"&&(Oe=pe),Ve){var Et=Ve[0];qe=Et&&Array.isArray(Et[0])}else Oe&&(qe=(Oe.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(Oe));var Lt=qe?An:Sn;return new Lt(pe)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(pe){this.isClockwise()!=(pe=!!pe)&&this.reverse()},setPathData:function(pe){var Oe=pe&&pe.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),Ve,qe=!1,Et,Lt,_n=new re,vn=new re;function wn(On,Un){var Yn=+Ve[On];return qe&&(Yn+=_n[Un]),Yn}function Cn(On){return new re(wn(On,"x"),wn(On+1,"y"))}this.clear();for(var Bn=0,zn=Oe&&Oe.length;Bn<zn;Bn++){var Fn=Oe[Bn],Gn=Fn[0],Kn=Gn.toLowerCase();Ve=Fn.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var Wn=Ve&&Ve.length;switch(qe=Gn===Kn,Et==="z"&&!/[mz]/.test(Kn)&&this.moveTo(_n),Kn){case"m":case"l":for(var ea=Kn==="m",Pn=0;Pn<Wn;Pn+=2)this[ea?"moveTo":"lineTo"](_n=Cn(Pn)),ea&&(vn=_n,ea=!1);Lt=_n;break;case"h":case"v":var jn=Kn==="h"?"x":"y";_n=_n.clone();for(var Pn=0;Pn<Wn;Pn++)_n[jn]=wn(Pn,jn),this.lineTo(_n);Lt=_n;break;case"c":for(var Pn=0;Pn<Wn;Pn+=6)this.cubicCurveTo(Cn(Pn),Lt=Cn(Pn+2),_n=Cn(Pn+4));break;case"s":for(var Pn=0;Pn<Wn;Pn+=4)this.cubicCurveTo(/[cs]/.test(Et)?_n.multiply(2).subtract(Lt):_n,Lt=Cn(Pn),_n=Cn(Pn+2)),Et=Kn;break;case"q":for(var Pn=0;Pn<Wn;Pn+=4)this.quadraticCurveTo(Lt=Cn(Pn),_n=Cn(Pn+2));break;case"t":for(var Pn=0;Pn<Wn;Pn+=2)this.quadraticCurveTo(Lt=/[qt]/.test(Et)?_n.multiply(2).subtract(Lt):_n,_n=Cn(Pn)),Et=Kn;break;case"a":for(var Pn=0;Pn<Wn;Pn+=7)this.arcTo(_n=Cn(Pn+5),new le(+Ve[Pn],+Ve[Pn+1]),+Ve[Pn+2],+Ve[Pn+4],+Ve[Pn+3]);break;case"z":this.closePath(1e-12),_n=vn;break}Et=Kn}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(pe){var Oe=pe.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(pe):{};return Oe.onPath||!!(this.getFillRule()==="evenodd"?Oe.windingL&1||Oe.windingR&1:Oe.winding)},getIntersections:function(pe,Oe,Ve,qe){var Et=this===pe||!pe,Lt=this._matrix._orNullIfIdentity(),_n=Et?Lt:(Ve||pe._matrix)._orNullIfIdentity();return Et||this.getBounds(Lt).intersects(pe.getBounds(_n),1e-12)?Rn.getIntersections(this.getCurves(),!Et&&pe.getCurves(),Oe,Lt,_n,qe):[]},getCrossings:function(pe){return this.getIntersections(pe,function(Oe){return Oe.isCrossing()})},getNearestLocation:function(){for(var pe=re.read(arguments),Oe=this.getCurves(),Ve=1/0,qe=null,Et=0,Lt=Oe.length;Et<Lt;Et++){var _n=Oe[Et].getNearestLocation(pe);_n._distance<Ve&&(Ve=_n._distance,qe=_n)}return qe},getNearestPoint:function(){var pe=this.getNearestLocation.apply(this,arguments);return pe&&pe.getPoint()},interpolate:function(pe,Oe,Ve){var qe=!this._children,Et=qe?"_segments":"_children",Lt=pe[Et],_n=Oe[Et],vn=this[Et];if(!Lt||!_n||Lt.length!==_n.length)throw new Error("Invalid operands in interpolate() call: "+pe+", "+Oe);var wn=vn.length,Cn=_n.length;if(wn<Cn)for(var Bn=qe?jt:Sn,zn=wn;zn<Cn;zn++)this.add(new Bn);else wn>Cn&&this[qe?"removeSegments":"removeChildren"](Cn,wn);for(var zn=0;zn<Cn;zn++)vn[zn].interpolate(Lt[zn],_n[zn],Ve);qe&&(this.setClosed(pe._closed),this._changed(9))},compare:function(pe){var Oe=!1;if(pe){var Ve=this._children||[this],qe=pe._children?pe._children.slice():[pe],Et=Ve.length,Lt=qe.length,_n=[],vn=0;Oe=!0;for(var wn=z.findItemBoundsCollisions(Ve,qe,ae.GEOMETRIC_EPSILON),Cn=Et-1;Cn>=0&&Oe;Cn--){var Bn=Ve[Cn];Oe=!1;var zn=wn[Cn];if(zn)for(var Fn=zn.length-1;Fn>=0&&!Oe;Fn--)Bn.compare(qe[zn[Fn]])&&(_n[zn[Fn]]||(_n[zn[Fn]]=!0,vn++),Oe=!0)}Oe=Oe&&vn===Lt}return Oe}}),Sn=Ln.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(Oe){this._closed=!1,this._segments=[],this._version=0;var Ve=arguments,qe=Array.isArray(Oe)?typeof Oe[0]=="object"?Oe:Ve:Oe&&Oe.size===r&&(Oe.x!==r||Oe.point!==r)?Ve:null;qe&&qe.length>0?this.setSegments(qe):(this._curves=r,this._segmentSelection=0,!qe&&typeof Oe=="string"&&(this.setPathData(Oe),Oe=null)),this._initialize(!qe&&Oe)},_equals:function(pe){return this._closed===pe._closed&&k.equals(this._segments,pe._segments)},copyContent:function(pe){this.setSegments(pe._segments),this._closed=pe._closed},_changed:function pe(Oe){if(pe.base.call(this,Oe),Oe&8){if(this._length=this._area=r,Oe&32)this._version++;else if(this._curves)for(var Ve=0,qe=this._curves.length;Ve<qe;Ve++)this._curves[Ve]._changed()}else Oe&64&&(this._bounds=r)},getStyle:function(){var pe=this._parent;return(pe instanceof An?pe:this)._style},getSegments:function(){return this._segments},setSegments:function(pe){var Oe=this.isFullySelected(),Ve=pe&&pe.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=r,Ve){var qe=pe[Ve-1];typeof qe=="boolean"&&(this.setClosed(qe),Ve--),this._add(jt.readList(pe,0,{},Ve))}Oe&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var pe=this._curves,Oe=this._segments;if(!pe){var Ve=this._countCurves();pe=this._curves=new Array(Ve);for(var qe=0;qe<Ve;qe++)pe[qe]=new Rn(this,Oe[qe],Oe[qe+1]||Oe[0])}return pe},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var pe=this.getCurves();return pe[pe.length-1]},isClosed:function(){return this._closed},setClosed:function(pe){if(this._closed!=(pe=!!pe)){if(this._closed=pe,this._curves){var Oe=this._curves.length=this._countCurves();pe&&(this._curves[Oe-1]=new Rn(this,this._segments[Oe-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(pe,Oe){var Ve=this._segments,qe=Ve.length,Et=new j(Oe),Lt=new Array(6),_n=!0,vn,wn,Cn,Bn,zn,Fn,Gn,Kn,Wn=[];function ea(jn,On){if(jn._transformCoordinates(pe,Lt),vn=Lt[0],wn=Lt[1],_n)Wn.push("M"+Et.pair(vn,wn)),_n=!1;else if(zn=Lt[2],Fn=Lt[3],zn===vn&&Fn===wn&&Gn===Cn&&Kn===Bn){if(!On){var Un=vn-Cn,Yn=wn-Bn;Wn.push(Un===0?"v"+Et.number(Yn):Yn===0?"h"+Et.number(Un):"l"+Et.pair(Un,Yn))}}else Wn.push("c"+Et.pair(Gn-Cn,Kn-Bn)+" "+Et.pair(zn-Cn,Fn-Bn)+" "+Et.pair(vn-Cn,wn-Bn));Cn=vn,Bn=wn,Gn=Lt[4],Kn=Lt[5]}if(!qe)return"";for(var Pn=0;Pn<qe;Pn++)ea(Ve[Pn]);return this._closed&&qe>0&&(ea(Ve[0],!0),Wn.push("z")),Wn.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(pe){for(var Oe=this._segments,Ve=new Array(6),qe=0,Et=Oe.length;qe<Et;qe++)Oe[qe]._transformCoordinates(pe,Ve,!0);return!0},_add:function(pe,_n){for(var Ve=this._segments,qe=this._curves,Et=pe.length,Lt=_n==null,_n=Lt?Ve.length:_n,vn=0;vn<Et;vn++){var wn=pe[vn];wn._path&&(wn=pe[vn]=wn.clone()),wn._path=this,wn._index=_n+vn,wn._selection&&this._updateSelection(wn,0,wn._selection)}if(Lt)k.push(Ve,pe);else{Ve.splice.apply(Ve,[_n,0].concat(pe));for(var vn=_n+Et,Cn=Ve.length;vn<Cn;vn++)Ve[vn]._index=vn}if(qe){var Bn=this._countCurves(),zn=_n>0&&_n+Et-1===Bn?_n-1:_n,Fn=zn,Gn=Math.min(zn+Et,Bn);pe._curves&&(qe.splice.apply(qe,[zn,0].concat(pe._curves)),Fn+=pe._curves.length);for(var vn=Fn;vn<Gn;vn++)qe.splice(vn,0,new Rn(this,null,null));this._adjustCurves(zn,Gn)}return this._changed(41),pe},_adjustCurves:function(pe,Oe){for(var Ve=this._segments,qe=this._curves,Et,Lt=pe;Lt<Oe;Lt++)Et=qe[Lt],Et._path=this,Et._segment1=Ve[Lt],Et._segment2=Ve[Lt+1]||Ve[0],Et._changed();(Et=qe[this._closed&&!pe?Ve.length-1:pe-1])&&(Et._segment2=Ve[pe]||Ve[0],Et._changed()),(Et=qe[Oe])&&(Et._segment1=Ve[Oe],Et._changed())},_countCurves:function(){var pe=this._segments.length;return!this._closed&&pe>0?pe-1:pe},add:function(pe){var Oe=arguments;return Oe.length>1&&typeof pe!="number"?this._add(jt.readList(Oe)):this._add([jt.read(Oe)])[0]},insert:function(pe,Oe){var Ve=arguments;return Ve.length>2&&typeof Oe!="number"?this._add(jt.readList(Ve,1),pe):this._add([jt.read(Ve,1)],pe)[0]},addSegment:function(){return this._add([jt.read(arguments)])[0]},insertSegment:function(pe){return this._add([jt.read(arguments,1)],pe)[0]},addSegments:function(pe){return this._add(jt.readList(pe))},insertSegments:function(pe,Oe){return this._add(jt.readList(Oe),pe)},removeSegment:function(pe){return this.removeSegments(pe,pe+1)[0]||null},removeSegments:function(pe,Oe,Ve){pe=pe||0,Oe=k.pick(Oe,this._segments.length);var qe=this._segments,Et=this._curves,Lt=qe.length,_n=qe.splice(pe,Oe-pe),vn=_n.length;if(!vn)return _n;for(var wn=0;wn<vn;wn++){var Cn=_n[wn];Cn._selection&&this._updateSelection(Cn,Cn._selection,0),Cn._index=Cn._path=null}for(var wn=pe,Bn=qe.length;wn<Bn;wn++)qe[wn]._index=wn;if(Et){for(var zn=pe>0&&Oe===Lt+(this._closed?1:0)?pe-1:pe,Et=Et.splice(zn,vn),wn=Et.length-1;wn>=0;wn--)Et[wn]._path=null;Ve&&(_n._curves=Et.slice(1)),this._adjustCurves(zn,zn)}return this._changed(41),_n},clear:"#removeSegments",hasHandles:function(){for(var pe=this._segments,Oe=0,Ve=pe.length;Oe<Ve;Oe++)if(pe[Oe].hasHandles())return!0;return!1},clearHandles:function(){for(var pe=this._segments,Oe=0,Ve=pe.length;Oe<Ve;Oe++)pe[Oe].clearHandles()},getLength:function(){if(this._length==null){for(var pe=this.getCurves(),Oe=0,Ve=0,qe=pe.length;Ve<qe;Ve++)Oe+=pe[Ve].getLength();this._length=Oe}return this._length},getArea:function(){var pe=this._area;if(pe==null){var Oe=this._segments,Ve=this._closed;pe=0;for(var qe=0,Et=Oe.length;qe<Et;qe++){var Lt=qe+1===Et;pe+=Rn.getArea(Rn.getValues(Oe[qe],Oe[Lt?0:qe+1],null,Lt&&!Ve))}this._area=pe}return pe},isFullySelected:function(){var pe=this._segments.length;return this.isSelected()&&pe>0&&this._segmentSelection===pe*7},setFullySelected:function(pe){pe&&this._selectSegments(!0),this.setSelected(pe)},setSelection:function pe(Oe){Oe&1||this._selectSegments(!1),pe.base.call(this,Oe)},_selectSegments:function(pe){var Oe=this._segments,Ve=Oe.length,qe=pe?7:0;this._segmentSelection=qe*Ve;for(var Et=0;Et<Ve;Et++)Oe[Et]._selection=qe},_updateSelection:function(pe,Oe,Ve){pe._selection=Ve;var qe=this._segmentSelection+=Ve-Oe;qe>0&&this.setSelected(!0)},divideAt:function(pe){var Oe=this.getLocationAt(pe),Ve;return Oe&&(Ve=Oe.getCurve().divideAt(Oe.getCurveOffset()))?Ve._segment1:null},splitAt:function(pe){var Oe=this.getLocationAt(pe),Ve=Oe&&Oe.index,qe=Oe&&Oe.time,Et=1e-8,Lt=1-Et;qe>Lt&&(Ve++,qe=0);var _n=this.getCurves();if(Ve>=0&&Ve<_n.length){qe>=Et&&_n[Ve++].divideAtTime(qe);var vn=this.removeSegments(Ve,this._segments.length,!0),wn;return this._closed?(this.setClosed(!1),wn=this):(wn=new Sn(Ce.NO_INSERT),wn.insertAbove(this),wn.copyAttributes(this)),wn._add(vn,0),this.addSegment(vn[0]),wn}return null},split:function(pe,Oe){var Ve,qe=Oe===r?pe:(Ve=this.getCurves()[pe])&&Ve.getLocationAtTime(Oe);return qe!=null?this.splitAt(qe):null},join:function(pe,Oe){var Ve=Oe||0;if(pe&&pe!==this){var qe=pe._segments,Et=this.getLastSegment(),Lt=pe.getLastSegment();if(!Lt)return this;Et&&Et._point.isClose(Lt._point,Ve)&&pe.reverse();var _n=pe.getFirstSegment();if(Et&&Et._point.isClose(_n._point,Ve))Et.setHandleOut(_n._handleOut),this._add(qe.slice(1));else{var vn=this.getFirstSegment();vn&&vn._point.isClose(_n._point,Ve)&&pe.reverse(),Lt=pe.getLastSegment(),vn&&vn._point.isClose(Lt._point,Ve)?(vn.setHandleIn(Lt._handleIn),this._add(qe.slice(0,qe.length-1),0)):this._add(qe.slice())}pe._closed&&this._add([qe[0]]),pe.remove()}var wn=this.getFirstSegment(),Cn=this.getLastSegment();return wn!==Cn&&wn._point.isClose(Cn._point,Ve)&&(wn.setHandleIn(Cn._handleIn),Cn.remove(),this.setClosed(!0)),this},reduce:function(pe){for(var Oe=this.getCurves(),Ve=pe&&pe.simplify,qe=Ve?1e-7:0,Et=Oe.length-1;Et>=0;Et--){var Lt=Oe[Et];!Lt.hasHandles()&&(!Lt.hasLength(qe)||Ve&&Lt.isCollinear(Lt.getNext()))&&Lt.remove()}return this},reverse:function(){this._segments.reverse();for(var pe=0,Oe=this._segments.length;pe<Oe;pe++){var Ve=this._segments[pe],qe=Ve._handleIn;Ve._handleIn=Ve._handleOut,Ve._handleOut=qe,Ve._index=pe}this._curves=null,this._changed(9)},flatten:function(pe){for(var Oe=new In(this,pe||.25,256,!0),Ve=Oe.parts,qe=Ve.length,Et=[],Lt=0;Lt<qe;Lt++)Et.push(new jt(Ve[Lt].curve.slice(0,2)));!this._closed&&qe>0&&Et.push(new jt(Ve[qe-1].curve.slice(6))),this.setSegments(Et)},simplify:function(pe){var Oe=new Mn(this).fit(pe||2.5);return Oe&&this.setSegments(Oe),!!Oe},smooth:function(pe){var Oe=this,Ve=pe||{},qe=Ve.type||"asymmetric",Et=this._segments,Lt=Et.length,_n=this._closed;function vn(eo,ro){var oo=eo&&eo.index;if(oo!=null){var so=eo.path;if(so&&so!==Oe)throw new Error(eo._class+" "+oo+" of "+so+" is not part of "+Oe);ro&&eo instanceof Rn&&oo++}else oo=typeof eo=="number"?eo:ro;return Math.min(oo<0&&_n?oo%Lt:oo<0?oo+Lt:oo,Lt-1)}var wn=_n&&Ve.from===r&&Ve.to===r,Cn=vn(Ve.from,0),Bn=vn(Ve.to,Lt-1);if(Cn>Bn)if(_n)Cn-=Lt;else{var zn=Cn;Cn=Bn,Bn=zn}if(/^(?:asymmetric|continuous)$/.test(qe)){var Fn=qe==="asymmetric",Gn=Math.min,Kn=Bn-Cn+1,Wn=Kn-1,ea=wn?Gn(Kn,4):1,Pn=ea,jn=ea,On=[];if(_n||(Pn=Gn(1,Cn),jn=Gn(1,Lt-Bn-1)),Wn+=Pn+jn,Wn<=1)return;for(var Un=0,Yn=Cn-Pn;Un<=Wn;Un++,Yn++)On[Un]=Et[(Yn<0?Yn+Lt:Yn)%Lt]._point;for(var ta=On[0]._x+2*On[1]._x,Jn=On[0]._y+2*On[1]._y,pa=2,ga=Wn-1,ba=[ta],Oa=[Jn],va=[pa],Sa=[],$a=[],Un=1;Un<Wn;Un++){var Da=Un<ga,Na=Da||Fn?1:2,Va=Da?4:Fn?2:7,Ua=Da?4:Fn?3:8,Ha=Da?2:Fn?0:1,Qa=Na/pa;pa=va[Un]=Va-Qa,ta=ba[Un]=Ua*On[Un]._x+Ha*On[Un+1]._x-Qa*ta,Jn=Oa[Un]=Ua*On[Un]._y+Ha*On[Un+1]._y-Qa*Jn}Sa[ga]=ba[ga]/va[ga],$a[ga]=Oa[ga]/va[ga];for(var Un=Wn-2;Un>=0;Un--)Sa[Un]=(ba[Un]-Sa[Un+1])/va[Un],$a[Un]=(Oa[Un]-$a[Un+1])/va[Un];Sa[Wn]=(3*On[Wn]._x-Sa[ga])/2,$a[Wn]=(3*On[Wn]._y-$a[ga])/2;for(var Un=Pn,Ja=Wn-jn,Yn=Cn;Un<=Ja;Un++,Yn++){var Ra=Et[Yn<0?Yn+Lt:Yn],Fa=Ra._point,Xa=Sa[Un]-Fa._x,to=$a[Un]-Fa._y;(wn||Un<Ja)&&Ra.setHandleOut(Xa,to),(wn||Un>Pn)&&Ra.setHandleIn(-Xa,-to)}}else for(var Un=Cn;Un<=Bn;Un++)Et[Un<0?Un+Lt:Un].smooth(Ve,!wn&&Un===Cn,!wn&&Un===Bn)},toShape:function(pe){if(!this._closed)return null;var Oe=this._segments,Ve,qe,Et,Lt;function _n(Fn,Gn){var Kn=Oe[Fn],Wn=Kn.getNext(),ea=Oe[Gn],Pn=ea.getNext();return Kn._handleOut.isZero()&&Wn._handleIn.isZero()&&ea._handleOut.isZero()&&Pn._handleIn.isZero()&&Wn._point.subtract(Kn._point).isCollinear(Pn._point.subtract(ea._point))}function vn(Fn){var Gn=Oe[Fn],Kn=Gn.getPrevious(),Wn=Gn.getNext();return Kn._handleOut.isZero()&&Gn._handleIn.isZero()&&Gn._handleOut.isZero()&&Wn._handleIn.isZero()&&Gn._point.subtract(Kn._point).isOrthogonal(Wn._point.subtract(Gn._point))}function wn(Fn){var Gn=Oe[Fn],Kn=Gn.getNext(),Wn=Gn._handleOut,ea=Kn._handleIn,Pn=.5522847498307936;if(Wn.isOrthogonal(ea)){var jn=Gn._point,On=Kn._point,Un=new Ne(jn,Wn,!0).intersect(new Ne(On,ea,!0),!0);return Un&&ae.isZero(Wn.getLength()/Un.subtract(jn).getLength()-Pn)&&ae.isZero(ea.getLength()/Un.subtract(On).getLength()-Pn)}return!1}function Cn(Fn,Gn){return Oe[Fn]._point.getDistance(Oe[Gn]._point)}if(!this.hasHandles()&&Oe.length===4&&_n(0,2)&&_n(1,3)&&vn(1)?(Ve=Ue.Rectangle,qe=new le(Cn(0,3),Cn(0,1)),Lt=Oe[1]._point.add(Oe[2]._point).divide(2)):Oe.length===8&&wn(0)&&wn(2)&&wn(4)&&wn(6)&&_n(1,5)&&_n(3,7)?(Ve=Ue.Rectangle,qe=new le(Cn(1,6),Cn(0,3)),Et=qe.subtract(new le(Cn(0,7),Cn(1,2))).divide(2),Lt=Oe[3]._point.add(Oe[4]._point).divide(2)):Oe.length===4&&wn(0)&&wn(1)&&wn(2)&&wn(3)&&(ae.isZero(Cn(0,2)-Cn(1,3))?(Ve=Ue.Circle,Et=Cn(0,2)/2):(Ve=Ue.Ellipse,Et=new le(Cn(2,0)/2,Cn(3,1)/2)),Lt=Oe[1]._point),Ve){var Bn=this.getPosition(!0),zn=new Ve({center:Bn,size:qe,radius:Et,insert:!1});return zn.copyAttributes(this,!0),zn._matrix.prepend(this._matrix),zn.rotate(Lt.subtract(Bn).getAngle()+90),(pe===r||pe)&&zn.insertAbove(this),zn}return null},toPath:"#clone",compare:function pe(Oe){if(!Oe||Oe instanceof An)return pe.base.call(this,Oe);var Ve=this.getCurves(),qe=Oe.getCurves(),Et=Ve.length,Lt=qe.length;if(!Et||!Lt)return Et==Lt;for(var _n=Ve[0].getValues(),vn=[],wn=0,Cn,Bn=0,zn,Fn=0;Fn<Lt;Fn++){var ea=qe[Fn].getValues();vn.push(ea);var Gn=Rn.getOverlaps(_n,ea);if(Gn){Cn=!Fn&&Gn[0][0]>0?Lt-1:Fn,zn=Gn[0][1];break}}for(var Kn=Math.abs,Wn=1e-8,ea=vn[Cn],Pn;_n&&ea;){var Gn=Rn.getOverlaps(_n,ea);if(Gn){var jn=Gn[0][0];if(Kn(jn-Bn)<Wn){Bn=Gn[1][0],Bn===1&&(_n=++wn<Et?Ve[wn].getValues():null,Bn=0);var On=Gn[0][1];if(Kn(On-zn)<Wn){if(Pn||(Pn=[Cn,On]),zn=Gn[1][1],zn===1&&(++Cn>=Lt&&(Cn=0),ea=vn[Cn]||qe[Cn].getValues(),zn=0),!_n)return Pn[0]===Cn&&Pn[1]===zn;continue}}}break}return!1},_hitTestSelf:function(pe,Oe,Ve,qe){var Et=this,Lt=this.getStyle(),_n=this._segments,vn=_n.length,wn=this._closed,Cn=Oe._tolerancePadding,Bn=Cn,zn,Fn,Gn,Kn,Wn,ea,Pn=Oe.stroke&&Lt.hasStroke(),jn=Oe.fill&&Lt.hasFill(),On=Oe.curves,Un=Pn?Lt.getStrokeWidth()/2:jn&&Oe.tolerance>0||On?0:null;Un!==null&&(Un>0?(zn=Lt.getStrokeJoin(),Fn=Lt.getStrokeCap(),Gn=Lt.getMiterLimit(),Bn=Bn.add(Sn._getStrokePadding(Un,qe))):zn=Fn="round");function Yn(Sa,$a){return pe.subtract(Sa).divide($a).length<=1}function ta(Sa,$a,Da){if(!Oe.selected||$a.isSelected()){var Na=Sa._point;if($a!==Na&&($a=$a.add(Na)),Yn($a,Bn))return new xn(Da,Et,{segment:Sa,point:$a})}}function Jn(Sa,$a){return($a||Oe.segments)&&ta(Sa,Sa._point,"segment")||!$a&&Oe.handles&&(ta(Sa,Sa._handleIn,"handle-in")||ta(Sa,Sa._handleOut,"handle-out"))}function pa(Sa){Kn.add(Sa)}function ga(Sa){var $a=wn||Sa._index>0&&Sa._index<vn-1;if(($a?zn:Fn)==="round")return Yn(Sa._point,Bn);if(Kn=new Sn({internal:!0,closed:!0}),$a?Sa.isSmooth()||Sn._addBevelJoin(Sa,zn,Un,Gn,null,qe,pa,!0):Fn==="square"&&Sn._addSquareCap(Sa,Fn,Un,null,qe,pa,!0),!Kn.isEmpty()){var Da;return Kn.contains(pe)||(Da=Kn.getNearestLocation(pe))&&Yn(Da.getPoint(),Cn)}}if(Oe.ends&&!Oe.segments&&!wn){if(ea=Jn(_n[0],!0)||Jn(_n[vn-1],!0))return ea}else if(Oe.segments||Oe.handles){for(var ba=0;ba<vn;ba++)if(ea=Jn(_n[ba]))return ea}if(Un!==null){if(Wn=this.getNearestLocation(pe),Wn){var Oa=Wn.getTime();Oa===0||Oa===1&&vn>1?ga(Wn.getSegment())||(Wn=null):Yn(Wn.getPoint(),Bn)||(Wn=null)}if(!Wn&&zn==="miter"&&vn>1)for(var ba=0;ba<vn;ba++){var va=_n[ba];if(pe.getDistance(va._point)<=Gn*Un&&ga(va)){Wn=va.getLocation();break}}}return!Wn&&jn&&this._contains(pe)||Wn&&!Pn&&!On?new xn("fill",this):Wn?new xn(Pn?"stroke":"curve",this,{location:Wn,point:Wn.getPoint()}):null}},k.each(Rn._evaluateMethods,function(pe){this[pe+"At"]=function(Oe){var Ve=this.getLocationAt(Oe);return Ve&&Ve[pe]()}},{beans:!1,getLocationOf:function(){for(var pe=re.read(arguments),Oe=this.getCurves(),Ve=0,qe=Oe.length;Ve<qe;Ve++){var Et=Oe[Ve].getLocationOf(pe);if(Et)return Et}return null},getOffsetOf:function(){var pe=this.getLocationOf.apply(this,arguments);return pe?pe.getOffset():null},getLocationAt:function(pe){if(typeof pe=="number"){for(var Oe=this.getCurves(),Ve=0,qe=0,Et=Oe.length;qe<Et;qe++){var Lt=Ve,_n=Oe[qe];if(Ve+=_n.getLength(),Ve>pe)return _n.getLocationAt(pe-Lt)}if(Oe.length>0&&pe<=this.getLength())return new Tn(Oe[Oe.length-1],1)}else if(pe&&pe.getPath&&pe.getPath()===this)return pe;return null},getOffsetsWithTangent:function(){var pe=re.read(arguments);if(pe.isZero())return[];for(var Oe=[],Ve=0,qe=this.getCurves(),Et=0,Lt=qe.length;Et<Lt;Et++){for(var _n=qe[Et],vn=_n.getTimesWithTangent(pe),wn=0,Cn=vn.length;wn<Cn;wn++){var Bn=Ve+_n.getOffsetAtTime(vn[wn]);Oe.indexOf(Bn)<0&&Oe.push(Bn)}Ve+=_n.length}return Oe}}),new function(){function pe(Ve,qe,Et,Lt){if(Lt<=0)return;var _n=Lt/2,vn=Lt-2,wn=_n-1,Cn=new Array(6),Bn,zn;function Fn(jn){var On=Cn[jn],Un=Cn[jn+1];(Bn!=On||zn!=Un)&&(Ve.beginPath(),Ve.moveTo(Bn,zn),Ve.lineTo(On,Un),Ve.stroke(),Ve.beginPath(),Ve.arc(On,Un,_n,0,Math.PI*2,!0),Ve.fill())}for(var Gn=0,Kn=qe.length;Gn<Kn;Gn++){var Wn=qe[Gn],ea=Wn._selection;if(Wn._transformCoordinates(Et,Cn),Bn=Cn[0],zn=Cn[1],ea&2&&Fn(2),ea&4&&Fn(4),Ve.fillRect(Bn-_n,zn-_n,Lt,Lt),vn>0&&!(ea&1)){var Pn=Ve.fillStyle;Ve.fillStyle="#ffffff",Ve.fillRect(Bn-wn,zn-wn,vn,vn),Ve.fillStyle=Pn}}}function Oe(Ve,qe,Et){var Lt=qe._segments,_n=Lt.length,vn=new Array(6),wn=!0,Cn,Bn,zn,Fn,Gn,Kn,Wn,ea;function Pn(On){if(Et)On._transformCoordinates(Et,vn),Cn=vn[0],Bn=vn[1];else{var Un=On._point;Cn=Un._x,Bn=Un._y}if(wn)Ve.moveTo(Cn,Bn),wn=!1;else{if(Et)Gn=vn[2],Kn=vn[3];else{var Yn=On._handleIn;Gn=Cn+Yn._x,Kn=Bn+Yn._y}Gn===Cn&&Kn===Bn&&Wn===zn&&ea===Fn?Ve.lineTo(Cn,Bn):Ve.bezierCurveTo(Wn,ea,Gn,Kn,Cn,Bn)}if(zn=Cn,Fn=Bn,Et)Wn=vn[4],ea=vn[5];else{var Yn=On._handleOut;Wn=zn+Yn._x,ea=Fn+Yn._y}}for(var jn=0;jn<_n;jn++)Pn(Lt[jn]);qe._closed&&_n>0&&Pn(Lt[0])}return{_draw:function(Ve,qe,Et,Lt){var _n=qe.dontStart,vn=qe.dontFinish||qe.clip,wn=this.getStyle(),Cn=wn.hasFill(),Bn=wn.hasStroke(),zn=wn.getDashArray(),Fn=!ca.support.nativeDash&&Bn&&zn&&zn.length;_n||Ve.beginPath(),(Cn||Bn&&!Fn||vn)&&(Oe(Ve,this,Lt),this._closed&&Ve.closePath());function Gn(On){return zn[(On%Fn+Fn)%Fn]}if(!vn&&(Cn||Bn)&&(this._setStyles(Ve,qe,Et),Cn&&(Ve.fill(wn.getFillRule()),Ve.shadowColor="rgba(0,0,0,0)"),Bn)){if(Fn){_n||Ve.beginPath();for(var Kn=new In(this,.25,32,!1,Lt),Wn=Kn.length,ea=-wn.getDashOffset(),Pn,jn=0;ea>0;)ea-=Gn(jn--)+Gn(jn--);for(;ea<Wn;)Pn=ea+Gn(jn++),(ea>0||Pn>0)&&Kn.drawPart(Ve,Math.max(ea,0),Math.max(Pn,0)),ea=Pn+Gn(jn++)}Ve.stroke()}},_drawSelected:function(Ve,qe){Ve.beginPath(),Oe(Ve,this,qe),Ve.stroke(),pe(Ve,this._segments,qe,ca.settings.handleSize)}}},new function(){function pe(Oe){var Ve=Oe._segments;if(!Ve.length)throw new Error("Use a moveTo() command first");return Ve[Ve.length-1]}return{moveTo:function(){var Oe=this._segments;Oe.length===1&&this.removeSegment(0),Oe.length||this._add([new jt(re.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new jt(re.read(arguments))])},cubicCurveTo:function(){var Oe=arguments,Ve=re.read(Oe),qe=re.read(Oe),Et=re.read(Oe),Lt=pe(this);Lt.setHandleOut(Ve.subtract(Lt._point)),this._add([new jt(Et,qe.subtract(Et))])},quadraticCurveTo:function(){var Oe=arguments,Ve=re.read(Oe),qe=re.read(Oe),Et=pe(this)._point;this.cubicCurveTo(Ve.add(Et.subtract(Ve).multiply(1/3)),Ve.add(qe.subtract(Ve).multiply(1/3)),qe)},curveTo:function(){var Oe=arguments,Ve=re.read(Oe),qe=re.read(Oe),Et=k.pick(k.read(Oe),.5),Lt=1-Et,_n=pe(this)._point,vn=Ve.subtract(_n.multiply(Lt*Lt)).subtract(qe.multiply(Et*Et)).divide(2*Et*Lt);if(vn.isNaN())throw new Error("Cannot put a curve through points with parameter = "+Et);this.quadraticCurveTo(vn,qe)},arcTo:function(){var Oe=arguments,Ve=Math.abs,qe=Math.sqrt,Et=pe(this),Lt=Et._point,_n=re.read(Oe),vn,wn=k.peek(Oe),Cn=k.pick(wn,!0),Bn,zn,Fn,Gn;if(typeof Cn=="boolean")var Kn=Lt.add(_n).divide(2),vn=Kn.add(Kn.subtract(Lt).rotate(Cn?-90:90));else if(k.remain(Oe)<=2)vn=_n,_n=re.read(Oe);else if(!Lt.equals(_n)){var Wn=le.read(Oe),ea=ae.isZero;if(ea(Wn.width)||ea(Wn.height))return this.lineTo(_n);var Pn=k.read(Oe),Cn=!!k.read(Oe),jn=!!k.read(Oe),Kn=Lt.add(_n).divide(2),On=Lt.subtract(Kn).rotate(-Pn),Un=On.x,Yn=On.y,ta=Ve(Wn.width),Jn=Ve(Wn.height),pa=ta*ta,ga=Jn*Jn,ba=Un*Un,Oa=Yn*Yn,va=qe(ba/pa+Oa/ga);if(va>1&&(ta*=va,Jn*=va,pa=ta*ta,ga=Jn*Jn),va=(pa*ga-pa*Oa-ga*ba)/(pa*Oa+ga*ba),Ve(va)<1e-12&&(va=0),va<0)throw new Error("Cannot create an arc with the given arguments");Bn=new re(ta*Yn/Jn,-Jn*Un/ta).multiply((jn===Cn?-1:1)*qe(va)).rotate(Pn).add(Kn),Gn=new xe().translate(Bn).rotate(Pn).scale(ta,Jn),Fn=Gn._inverseTransform(Lt),zn=Fn.getDirectedAngle(Gn._inverseTransform(_n)),!Cn&&zn>0?zn-=360:Cn&&zn<0&&(zn+=360)}if(vn){var Sa=new Ne(Lt.add(vn).divide(2),vn.subtract(Lt).rotate(90),!0),$a=new Ne(vn.add(_n).divide(2),_n.subtract(vn).rotate(90),!0),Da=new Ne(Lt,_n),Na=Da.getSide(vn);if(Bn=Sa.intersect($a,!0),!Bn){if(!Na)return this.lineTo(_n);throw new Error("Cannot create an arc with the given arguments")}Fn=Lt.subtract(Bn),zn=Fn.getDirectedAngle(_n.subtract(Bn));var Va=Da.getSide(Bn,!0);Va===0?zn=Na*Ve(zn):Na===Va&&(zn+=zn<0?360:-360)}if(zn){for(var Ua=1e-5,Ha=Ve(zn),Qa=Ha>=360?4:Math.ceil((Ha-Ua)/90),Ja=zn/Qa,Ra=Ja*Math.PI/360,Fa=4/3*Math.sin(Ra)/(1+Math.cos(Ra)),Xa=[],to=0;to<=Qa;to++){var On=_n,eo=null;if(to<Qa&&(eo=Fn.rotate(90).multiply(Fa),Gn?(On=Gn._transformPoint(Fn),eo=Gn._transformPoint(Fn.add(eo)).subtract(On)):On=Bn.add(Fn)),!to)Et.setHandleOut(eo);else{var ro=Fn.rotate(-90).multiply(Fa);Gn&&(ro=Gn._transformPoint(Fn.add(ro)).subtract(On)),Xa.push(new jt(On,ro,eo))}Fn=Fn.rotate(Ja)}this._add(Xa)}},lineBy:function(){var Oe=re.read(arguments),Ve=pe(this)._point;this.lineTo(Ve.add(Oe))},curveBy:function(){var Oe=arguments,Ve=re.read(Oe),qe=re.read(Oe),Et=k.read(Oe),Lt=pe(this)._point;this.curveTo(Lt.add(Ve),Lt.add(qe),Et)},cubicCurveBy:function(){var Oe=arguments,Ve=re.read(Oe),qe=re.read(Oe),Et=re.read(Oe),Lt=pe(this)._point;this.cubicCurveTo(Lt.add(Ve),Lt.add(qe),Lt.add(Et))},quadraticCurveBy:function(){var Oe=arguments,Ve=re.read(Oe),qe=re.read(Oe),Et=pe(this)._point;this.quadraticCurveTo(Et.add(Ve),Et.add(qe))},arcBy:function(){var Oe=arguments,Ve=pe(this)._point,qe=Ve.add(re.read(Oe)),Et=k.pick(k.peek(Oe),!0);typeof Et=="boolean"?this.arcTo(qe,Et):this.arcTo(qe,Ve.add(re.read(Oe)))},closePath:function(Oe){this.setClosed(!0),this.join(this,Oe)}}},{_getBounds:function(pe,Oe){var Ve=Oe.handle?"getHandleBounds":Oe.stroke?"getStrokeBounds":"getBounds";return Sn[Ve](this._segments,this._closed,this,pe,Oe)},statics:{getBounds:function(pe,Oe,Ve,qe,Et,Lt){var _n=pe[0];if(!_n)return new he;var vn=new Array(6),wn=_n._transformCoordinates(qe,new Array(6)),Cn=wn.slice(0,2),Bn=Cn.slice(),zn=new Array(2);function Fn(Wn){Wn._transformCoordinates(qe,vn);for(var ea=0;ea<2;ea++)Rn._addBounds(wn[ea],wn[ea+4],vn[ea+2],vn[ea],ea,Lt?Lt[ea]:0,Cn,Bn,zn);var Pn=wn;wn=vn,vn=Pn}for(var Gn=1,Kn=pe.length;Gn<Kn;Gn++)Fn(pe[Gn]);return Oe&&Fn(_n),new he(Cn[0],Cn[1],Bn[0]-Cn[0],Bn[1]-Cn[1])},getStrokeBounds:function(pe,Oe,Ve,qe,Et){var Lt=Ve.getStyle(),_n=Lt.hasStroke(),vn=Lt.getStrokeWidth(),wn=_n&&Ve._getStrokeMatrix(qe,Et),Cn=_n&&Sn._getStrokePadding(vn,wn),Bn=Sn.getBounds(pe,Oe,Ve,qe,Et,Cn);if(!_n)return Bn;var zn=vn/2,Fn=Lt.getStrokeJoin(),Gn=Lt.getStrokeCap(),Kn=Lt.getMiterLimit(),Wn=new he(new le(Cn));function ea(ta){Bn=Bn.include(ta)}function Pn(ta){Bn=Bn.unite(Wn.setCenter(ta._point.transform(qe)))}function jn(ta,Jn){Jn==="round"||ta.isSmooth()?Pn(ta):Sn._addBevelJoin(ta,Jn,zn,Kn,qe,wn,ea)}function On(ta,Jn){Jn==="round"?Pn(ta):Sn._addSquareCap(ta,Jn,zn,qe,wn,ea)}var Un=pe.length-(Oe?0:1);if(Un>0){for(var Yn=1;Yn<Un;Yn++)jn(pe[Yn],Fn);Oe?jn(pe[0],Fn):(On(pe[0],Gn),On(pe[pe.length-1],Gn))}return Bn},_getStrokePadding:function(pe,Oe){if(!Oe)return[pe,pe];var Ve=new re(pe,0).transform(Oe),qe=new re(0,pe).transform(Oe),Et=Ve.getAngleInRadians(),Lt=Ve.getLength(),_n=qe.getLength(),vn=Math.sin(Et),wn=Math.cos(Et),Cn=Math.tan(Et),Bn=Math.atan2(_n*Cn,Lt),zn=Math.atan2(_n,Cn*Lt);return[Math.abs(Lt*Math.cos(Bn)*wn+_n*Math.sin(Bn)*vn),Math.abs(_n*Math.sin(zn)*wn+Lt*Math.cos(zn)*vn)]},_addBevelJoin:function(pe,Oe,Ve,qe,Et,Lt,_n,vn){var wn=pe.getCurve(),Cn=wn.getPrevious(),Bn=wn.getPoint1().transform(Et),zn=Cn.getNormalAtTime(1).multiply(Ve).transform(Lt),Fn=wn.getNormalAtTime(0).multiply(Ve).transform(Lt),Gn=zn.getDirectedAngle(Fn);if((Gn<0||Gn>=180)&&(zn=zn.negate(),Fn=Fn.negate()),vn&&_n(Bn),_n(Bn.add(zn)),Oe==="miter"){var Kn=new Ne(Bn.add(zn),new re(-zn.y,zn.x),!0).intersect(new Ne(Bn.add(Fn),new re(-Fn.y,Fn.x),!0),!0);Kn&&Bn.getDistance(Kn)<=qe*Ve&&_n(Kn)}_n(Bn.add(Fn))},_addSquareCap:function(pe,Oe,Ve,qe,Et,Lt,_n){var vn=pe._point.transform(qe),wn=pe.getLocation(),Cn=wn.getNormal().multiply(wn.getTime()===0?Ve:-Ve).transform(Et);Oe==="square"&&(_n&&(Lt(vn.subtract(Cn)),Lt(vn.add(Cn))),vn=vn.add(Cn.rotate(-90))),Lt(vn.add(Cn)),Lt(vn.subtract(Cn))},getHandleBounds:function(pe,Oe,Ve,qe,Et){var Lt=Ve.getStyle(),_n=Et.stroke&&Lt.hasStroke(),vn,wn;if(_n){var Cn=Ve._getStrokeMatrix(qe,Et),Bn=Lt.getStrokeWidth()/2,zn=Bn;Lt.getStrokeJoin()==="miter"&&(zn=Bn*Lt.getMiterLimit()),Lt.getStrokeCap()==="square"&&(zn=Math.max(zn,Bn*Math.SQRT2)),vn=Sn._getStrokePadding(Bn,Cn),wn=Sn._getStrokePadding(zn,Cn)}for(var Fn=new Array(6),Gn=1/0,Kn=-Gn,Wn=Gn,ea=Kn,Pn=0,jn=pe.length;Pn<jn;Pn++){var On=pe[Pn];On._transformCoordinates(qe,Fn);for(var Un=0;Un<6;Un+=2){var Yn=Un?vn:wn,ta=Yn?Yn[0]:0,Jn=Yn?Yn[1]:0,pa=Fn[Un],ga=Fn[Un+1],ba=pa-ta,Oa=pa+ta,va=ga-Jn,Sa=ga+Jn;ba<Gn&&(Gn=ba),Oa>Kn&&(Kn=Oa),va<Wn&&(Wn=va),Sa>ea&&(ea=Sa)}}return new he(Gn,Wn,Kn-Gn,ea-Wn)}}});Sn.inject({statics:new function(){var pe=.5522847498307936,Oe=[new jt([-1,0],[0,pe],[0,-pe]),new jt([0,-1],[-pe,0],[pe,0]),new jt([1,0],[0,-pe],[0,pe]),new jt([0,1],[pe,0],[-pe,0])];function Ve(Et,Lt,_n){var vn=k.getNamed(_n),wn=new Sn(vn&&(vn.insert==!0?Ce.INSERT:vn.insert==!1?Ce.NO_INSERT:null));return wn._add(Et),wn._closed=Lt,wn.set(vn,Ce.INSERT)}function qe(Et,Lt,_n){for(var vn=new Array(4),wn=0;wn<4;wn++){var Cn=Oe[wn];vn[wn]=new jt(Cn._point.multiply(Lt).add(Et),Cn._handleIn.multiply(Lt),Cn._handleOut.multiply(Lt))}return Ve(vn,!0,_n)}return{Line:function(){var Et=arguments;return Ve([new jt(re.readNamed(Et,"from")),new jt(re.readNamed(Et,"to"))],!1,Et)},Circle:function(){var Et=arguments,Lt=re.readNamed(Et,"center"),_n=k.readNamed(Et,"radius");return qe(Lt,new le(_n),Et)},Rectangle:function(){var Et=arguments,Lt=he.readNamed(Et,"rectangle"),_n=le.readNamed(Et,"radius",0,{readNull:!0}),vn=Lt.getBottomLeft(!0),wn=Lt.getTopLeft(!0),Cn=Lt.getTopRight(!0),Bn=Lt.getBottomRight(!0),zn;if(!_n||_n.isZero())zn=[new jt(vn),new jt(wn),new jt(Cn),new jt(Bn)];else{_n=le.min(_n,Lt.getSize(!0).divide(2));var Fn=_n.width,Gn=_n.height,Kn=Fn*pe,Wn=Gn*pe;zn=[new jt(vn.add(Fn,0),null,[-Kn,0]),new jt(vn.subtract(0,Gn),[0,Wn]),new jt(wn.add(0,Gn),null,[0,-Wn]),new jt(wn.add(Fn,0),[-Kn,0],null),new jt(Cn.subtract(Fn,0),null,[Kn,0]),new jt(Cn.add(0,Gn),[0,-Wn],null),new jt(Bn.subtract(0,Gn),null,[0,Wn]),new jt(Bn.subtract(Fn,0),[Kn,0])]}return Ve(zn,!0,Et)},RoundRectangle:"#Rectangle",Ellipse:function(){var Et=arguments,Lt=Ue._readEllipse(Et);return qe(Lt.center,Lt.radius,Et)},Oval:"#Ellipse",Arc:function(){var Et=arguments,Lt=re.readNamed(Et,"from"),_n=re.readNamed(Et,"through"),vn=re.readNamed(Et,"to"),wn=k.getNamed(Et),Cn=new Sn(wn&&wn.insert==!1&&Ce.NO_INSERT);return Cn.moveTo(Lt),Cn.arcTo(_n,vn),Cn.set(wn)},RegularPolygon:function(){for(var Et=arguments,Lt=re.readNamed(Et,"center"),_n=k.readNamed(Et,"sides"),vn=k.readNamed(Et,"radius"),wn=360/_n,Cn=_n%3===0,Bn=new re(0,Cn?-vn:vn),zn=Cn?-1:.5,Fn=new Array(_n),Gn=0;Gn<_n;Gn++)Fn[Gn]=new jt(Lt.add(Bn.rotate((Gn+zn)*wn)));return Ve(Fn,!0,Et)},Star:function(){for(var Et=arguments,Lt=re.readNamed(Et,"center"),_n=k.readNamed(Et,"points")*2,vn=k.readNamed(Et,"radius1"),wn=k.readNamed(Et,"radius2"),Cn=360/_n,Bn=new re(0,-1),zn=new Array(_n),Fn=0;Fn<_n;Fn++)zn[Fn]=new jt(Lt.add(Bn.rotate(Cn*Fn).multiply(Fn%2?wn:vn)));return Ve(zn,!0,Et)}}}});var An=Ln.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(Oe){this._children=[],this._namedChildren={},this._initialize(Oe)||(typeof Oe=="string"?this.setPathData(Oe):this.addChildren(Array.isArray(Oe)?Oe:arguments))},insertChildren:function pe(Oe,Ve){var qe=Ve,Et=qe[0];Et&&typeof Et[0]=="number"&&(qe=[qe]);for(var Lt=Ve.length-1;Lt>=0;Lt--){var _n=qe[Lt];qe===Ve&&!(_n instanceof Sn)&&(qe=k.slice(qe)),Array.isArray(_n)?qe[Lt]=new Sn({segments:_n,insert:!1}):_n instanceof An&&(qe.splice.apply(qe,[Lt,1].concat(_n.removeChildren())),_n.remove())}return pe.base.call(this,Oe,qe)},reduce:function pe(Oe){for(var Ve=this._children,qe=Ve.length-1;qe>=0;qe--){var Et=Ve[qe].reduce(Oe);Et.isEmpty()&&Et.remove()}if(!Ve.length){var Et=new Sn(Ce.NO_INSERT);return Et.copyAttributes(this),Et.insertAbove(this),this.remove(),Et}return pe.base.call(this)},isClosed:function(){for(var pe=this._children,Oe=0,Ve=pe.length;Oe<Ve;Oe++)if(!pe[Oe]._closed)return!1;return!0},setClosed:function(pe){for(var Oe=this._children,Ve=0,qe=Oe.length;Ve<qe;Ve++)Oe[Ve].setClosed(pe)},getFirstSegment:function(){var pe=this.getFirstChild();return pe&&pe.getFirstSegment()},getLastSegment:function(){var pe=this.getLastChild();return pe&&pe.getLastSegment()},getCurves:function(){for(var pe=this._children,Oe=[],Ve=0,qe=pe.length;Ve<qe;Ve++)k.push(Oe,pe[Ve].getCurves());return Oe},getFirstCurve:function(){var pe=this.getFirstChild();return pe&&pe.getFirstCurve()},getLastCurve:function(){var pe=this.getLastChild();return pe&&pe.getLastCurve()},getArea:function(){for(var pe=this._children,Oe=0,Ve=0,qe=pe.length;Ve<qe;Ve++)Oe+=pe[Ve].getArea();return Oe},getLength:function(){for(var pe=this._children,Oe=0,Ve=0,qe=pe.length;Ve<qe;Ve++)Oe+=pe[Ve].getLength();return Oe},getPathData:function(pe,Oe){for(var Ve=this._children,qe=[],Et=0,Lt=Ve.length;Et<Lt;Et++){var _n=Ve[Et],vn=_n._matrix;qe.push(_n.getPathData(pe&&!vn.isIdentity()?pe.appended(vn):pe,Oe))}return qe.join("")},_hitTestChildren:function pe(Oe,Ve,qe){return pe.base.call(this,Oe,Ve.class===Sn||Ve.type==="path"?Ve:k.set({},Ve,{fill:!1}),qe)},_draw:function(pe,Oe,Ve,qe){var Et=this._children;if(Et.length){Oe=Oe.extend({dontStart:!0,dontFinish:!0}),pe.beginPath();for(var Lt=0,_n=Et.length;Lt<_n;Lt++)Et[Lt].draw(pe,Oe,qe);if(!Oe.clip){this._setStyles(pe,Oe,Ve);var vn=this._style;vn.hasFill()&&(pe.fill(vn.getFillRule()),pe.shadowColor="rgba(0,0,0,0)"),vn.hasStroke()&&pe.stroke()}}},_drawSelected:function(pe,Oe,Ve){for(var qe=this._children,Et=0,Lt=qe.length;Et<Lt;Et++){var _n=qe[Et],vn=_n._matrix;Ve[_n._id]||_n._drawSelected(pe,vn.isIdentity()?Oe:Oe.appended(vn))}}},new function(){function pe(Oe,Ve){var qe=Oe._children;if(Ve&&!qe.length)throw new Error("Use a moveTo() command first");return qe[qe.length-1]}return k.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(Oe){this[Oe]=function(){var Ve=pe(this,!0);Ve[Oe].apply(Ve,arguments)}},{moveTo:function(){var Oe=pe(this),Ve=Oe&&Oe.isEmpty()?Oe:new Sn(Ce.NO_INSERT);Ve!==Oe&&this.addChild(Ve),Ve.moveTo.apply(Ve,arguments)},moveBy:function(){var Oe=pe(this,!0),Ve=Oe&&Oe.getLastSegment(),qe=re.read(arguments);this.moveTo(Ve?qe.add(Ve._point):qe)},closePath:function(Oe){pe(this,!0).closePath(Oe)}})},k.each(["reverse","flatten","simplify","smooth"],function(pe){this[pe]=function(Oe){for(var Ve=this._children,qe,Et=0,Lt=Ve.length;Et<Lt;Et++)qe=Ve[Et][pe](Oe)||qe;return qe}},{}));Ln.inject(new function(){var pe=Math.min,Oe=Math.max,Ve=Math.abs,qe={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function Et(Pn){return Pn._children||[Pn]}function Lt(Pn,jn){var On=Pn.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(jn){for(var Un=Et(On),Yn=0,ta=Un.length;Yn<ta;Yn++){var Pn=Un[Yn];!Pn._closed&&!Pn.isEmpty()&&(Pn.closePath(1e-12),Pn.getFirstSegment().setHandleIn(0,0),Pn.getLastSegment().setHandleOut(0,0))}On=On.resolveCrossings().reorient(On.getFillRule()==="nonzero",!0)}return On}function _n(Pn,jn,On,Un,Yn){var ta=new An(Ce.NO_INSERT);return ta.addChildren(Pn,!0),ta=ta.reduce({simplify:jn}),Yn&&Yn.insert==!1||ta.insertAbove(Un&&On.isSibling(Un)&&On.getIndex()<Un.getIndex()?Un:On),ta.copyAttributes(On,!0),ta}function vn(Pn){return Pn.hasOverlap()||Pn.isCrossing()}function wn(Pn,jn,On,Un){if(Un&&(Un.trace==!1||Un.stroke)&&/^(subtract|intersect)$/.test(On))return Cn(Pn,jn,On);var Yn=Lt(Pn,!0),ta=jn&&Pn!==jn&&Lt(jn,!0),Jn=qe[On];Jn[On]=!0,ta&&(Jn.subtract||Jn.exclude)^(ta.isClockwise()^Yn.isClockwise())&&ta.reverse();var pa=Gn(Tn.expand(Yn.getIntersections(ta,vn))),ga=Et(Yn),ba=ta&&Et(ta),Oa=[],va=[],Sa;function $a(eo){for(var ro=0,oo=eo.length;ro<oo;ro++){var so=eo[ro];k.push(Oa,so._segments),k.push(va,so.getCurves()),so._overlapsOnly=!0}}function Da(eo){for(var ro=[],oo=0,so=eo&&eo.length;oo<so;oo++)ro.push(va[eo[oo]]);return ro}if(pa.length){$a(ga),ba&&$a(ba);for(var Na=new Array(va.length),Va=0,Ua=va.length;Va<Ua;Va++)Na[Va]=va[Va].getValues();for(var Ha=z.findCurveBoundsCollisions(Na,Na,0,!0),Qa={},Va=0;Va<va.length;Va++){var Ja=va[Va],Ra=Ja._path._id,Fa=Qa[Ra]=Qa[Ra]||{};Fa[Ja.getIndex()]={hor:Da(Ha[Va].hor),ver:Da(Ha[Va].ver)}}for(var Va=0,Ua=pa.length;Va<Ua;Va++)Wn(pa[Va]._segment,Yn,ta,Qa,Jn);for(var Va=0,Ua=Oa.length;Va<Ua;Va++){var Xa=Oa[Va],to=Xa._intersection;Xa._winding||Wn(Xa,Yn,ta,Qa,Jn),to&&to._overlap||(Xa._path._overlapsOnly=!1)}Sa=ea(Oa,Jn)}else Sa=Fn(ba?ga.concat(ba):ga.slice(),function(eo){return!!Jn[eo]});return _n(Sa,!0,Pn,jn,Un)}function Cn(Pn,jn,On){var Un=Lt(Pn),Yn=Lt(jn),ta=Un.getIntersections(Yn,vn),Jn=On==="subtract",pa=On==="divide",ga={},ba=[];function Oa($a){if(!ga[$a._id]&&(pa||Yn.contains($a.getPointAt($a.getLength()/2))^Jn))return ba.unshift($a),ga[$a._id]=!0}for(var va=ta.length-1;va>=0;va--){var Sa=ta[va].split();Sa&&(Oa(Sa)&&Sa.getFirstSegment().setHandleIn(0,0),Un.getLastSegment().setHandleOut(0,0))}return Oa(Un),_n(ba,!1,Pn,jn)}function Bn(Pn,jn){for(var On=Pn;On;){if(On===jn)return;On=On._previous}for(;Pn._next&&Pn._next!==jn;)Pn=Pn._next;if(!Pn._next){for(;jn._previous;)jn=jn._previous;Pn._next=jn,jn._previous=Pn}}function zn(Pn){for(var jn=Pn.length-1;jn>=0;jn--)Pn[jn].clearHandles()}function Fn(Pn,jn,On){var Un=Pn&&Pn.length;if(Un){var Yn=k.each(Pn,function(Ha,Qa){this[Ha._id]={container:null,winding:Ha.isClockwise()?1:-1,index:Qa}},{}),ta=Pn.slice().sort(function(Ha,Qa){return Ve(Qa.getArea())-Ve(Ha.getArea())}),Jn=ta[0],pa=z.findItemBoundsCollisions(ta,null,ae.GEOMETRIC_EPSILON);On==null&&(On=Jn.isClockwise());for(var ga=0;ga<Un;ga++){var ba=ta[ga],Oa=Yn[ba._id],va=0,Sa=pa[ga];if(Sa){for(var $a=null,Da=Sa.length-1;Da>=0;Da--)if(Sa[Da]<ga){$a=$a||ba.getInteriorPoint();var Na=ta[Sa[Da]];if(Na.contains($a)){var Va=Yn[Na._id];va=Va.winding,Oa.winding+=va,Oa.container=Va.exclude?Va.container:Na;break}}}if(jn(Oa.winding)===jn(va))Oa.exclude=!0,Pn[Oa.index]=null;else{var Ua=Oa.container;ba.setClockwise(Ua?!Ua.isClockwise():On)}}}return Pn}function Gn(Pn,jn,On){var Un=jn&&[],Yn=1e-8,ta=1-Yn,Jn=!1,pa=On||[],ga=On&&{},ba,Oa,va;function Sa(ro){return ro._path._id+"."+ro._segment1._index}for(var $a=(On&&On.length)-1;$a>=0;$a--){var Da=On[$a];Da._path&&(ga[Sa(Da)]=!0)}for(var $a=Pn.length-1;$a>=0;$a--){var Na=Pn[$a],Va=Na._time,Ua=Va,Ha=jn&&!jn(Na),Da=Na._curve,Qa;if(Da&&(Da!==Oa?(Jn=!Da.hasHandles()||ga&&ga[Sa(Da)],ba=[],va=null,Oa=Da):va>=Yn&&(Va/=va)),Ha){ba&&ba.push(Na);continue}else jn&&Un.unshift(Na);if(va=Ua,Va<Yn)Qa=Da._segment1;else if(Va>ta)Qa=Da._segment2;else{var Ja=Da.divideAtTime(Va,!0);Jn&&pa.push(Da,Ja),Qa=Ja._segment1;for(var Ra=ba.length-1;Ra>=0;Ra--){var Fa=ba[Ra];Fa._time=(Fa._time-Va)/(1-Va)}}Na._setSegment(Qa);var Xa=Qa._intersection,to=Na._intersection;if(Xa){Bn(Xa,to);for(var eo=Xa;eo;)Bn(eo._intersection,Xa),eo=eo._next}else Qa._intersection=to}return On||zn(pa),Un||Pn}function Kn(Pn,jn,On,Un,Yn){var ta=Array.isArray(jn)?jn:jn[On?"hor":"ver"],Jn=On?1:0,pa=Jn^1,ga=[Pn.x,Pn.y],ba=ga[Jn],Oa=ga[pa],va=1e-9,Sa=1e-6,$a=ba-va,Da=ba+va,Na=0,Va=0,Ua=0,Ha=0,Qa=!1,Ja=!1,Ra=1,Fa=[],Xa,to;function eo(bo){var So=bo[pa+0],Io=bo[pa+6];if(!(Oa<pe(So,Io)||Oa>Oe(So,Io))){var Po=bo[Jn+0],fa=bo[Jn+2],ka=bo[Jn+4],ya=bo[Jn+6];if(So===Io){(Po<Da&&ya>$a||ya<Da&&Po>$a)&&(Qa=!0);return}var Ta=Oa===So?0:Oa===Io||$a>Oe(Po,fa,ka,ya)||Da<pe(Po,fa,ka,ya)?1:Rn.solveCubic(bo,pa,Oa,Fa,0,1)>0?Fa[0]:1,Ia=Ta===0?Po:Ta===1?ya:Rn.getPoint(bo,Ta)[On?"y":"x"],Ea=So>Io?1:-1,La=Xa[pa]>Xa[pa+6]?1:-1,Ga=Xa[Jn+6];return Oa!==So?(Ia<$a?Ua+=Ea:Ia>Da?Ha+=Ea:Qa=!0,Ia>ba-Sa&&Ia<ba+Sa&&(Ra/=2)):(Ea!==La?Po<$a?Ua+=Ea:Po>Da&&(Ha+=Ea):Po!=Ga&&(Ga<Da&&Ia>Da?(Ha+=Ea,Qa=!0):Ga>$a&&Ia<$a&&(Ua+=Ea,Qa=!0)),Ra/=4),Xa=bo,!Yn&&Ia>$a&&Ia<Da&&Rn.getTangent(bo,Ta)[On?"x":"y"]===0&&Kn(Pn,jn,!On,Un,!0)}}function ro(bo){var So=bo[pa+0],Io=bo[pa+2],Po=bo[pa+4],fa=bo[pa+6];if(Oa<=Oe(So,Io,Po,fa)&&Oa>=pe(So,Io,Po,fa)){for(var ka=bo[Jn+0],ya=bo[Jn+2],Ta=bo[Jn+4],Ia=bo[Jn+6],Ea=$a>Oe(ka,ya,Ta,Ia)||Da<pe(ka,ya,Ta,Ia)?[bo]:Rn.getMonoCurves(bo,On),La,Ga=0,ja=Ea.length;Ga<ja;Ga++)if(La=eo(Ea[Ga]))return La}}for(var oo=0,so=ta.length;oo<so;oo++){var co=ta[oo],io=co._path,Ka=co.getValues(),yo;if((!oo||ta[oo-1]._path!==io)&&(Xa=null,io._closed||(to=Rn.getValues(io.getLastCurve().getSegment2(),co.getSegment1(),null,!Un),to[pa]!==to[pa+6]&&(Xa=to)),!Xa)){Xa=Ka;for(var $o=io.getLastCurve();$o&&$o!==co;){var Oo=$o.getValues();if(Oo[pa]!==Oo[pa+6]){Xa=Oo;break}$o=$o.getPrevious()}}if(yo=ro(Ka))return yo;if(oo+1===so||ta[oo+1]._path!==io){if(to&&(yo=ro(to)))return yo;Qa&&!Ua&&!Ha&&(Ua=Ha=io.isClockwise(Un)^On?1:-1),Na+=Ua,Va+=Ha,Ua=Ha=0,Qa&&(Ja=!0,Qa=!1),to=null}}return Na=Ve(Na),Va=Ve(Va),{winding:Oe(Na,Va),windingL:Na,windingR:Va,quality:Ra,onPath:Ja}}function Wn(Pn,jn,On,Un,Yn){var ta=[],Jn=Pn,pa=0,va;do{var ga=Pn.getCurve();if(ga){var ba=ga.getLength();ta.push({segment:Pn,curve:ga,length:ba}),pa+=ba}Pn=Pn.getNext()}while(Pn&&!Pn._intersection&&Pn!==Jn);for(var Oa=[.5,.25,.75],va={winding:0,quality:-1},Sa=.001,$a=1-Sa,Da=0;Da<Oa.length&&va.quality<.5;Da++)for(var ba=pa*Oa[Da],Na=0,Va=ta.length;Na<Va;Na++){var Ua=ta[Na],Ha=Ua.length;if(ba<=Ha){var ga=Ua.curve,Qa=ga._path,Ja=Qa._parent,Ra=Ja instanceof An?Ja:Qa,Fa=ae.clamp(ga.getTimeAt(ba),Sa,$a),Xa=ga.getPointAtTime(Fa),to=Ve(ga.getTangentAtTime(Fa).y)<Math.SQRT1_2,eo=null;if(Yn.subtract&&On){var ro=Ra===jn?On:jn,oo=ro._getWinding(Xa,to,!0);if(Ra===jn&&oo.winding||Ra===On&&!oo.winding){if(oo.quality<1)continue;eo={winding:0,quality:1}}}eo=eo||Kn(Xa,Un[Qa._id][ga.getIndex()],to,!0),eo.quality>va.quality&&(va=eo);break}ba-=Ha}for(var Na=ta.length-1;Na>=0;Na--)ta[Na].segment._winding=va}function ea(Pn,jn){var On=[],Un;function Yn(so){var co;return!!(so&&!so._visited&&(!jn||jn[(co=so._winding||{}).winding]&&!(jn.unite&&co.winding===2&&co.windingL&&co.windingR)))}function ta(so){if(so){for(var co=0,io=Un.length;co<io;co++)if(so===Un[co])return!0}return!1}function Jn(so){for(var co=so._segments,io=0,Ka=co.length;io<Ka;io++)co[io]._visited=!0}function pa(so,co){var io=so._intersection,Ka=io,yo=[];co&&(Un=[so]);function $o(Oo,bo){for(;Oo&&Oo!==bo;){var So=Oo._segment,Io=So&&So._path;if(Io){var Po=So.getNext()||Io.getFirstSegment(),fa=Po._intersection;So!==so&&(ta(So)||ta(Po)||Po&&Yn(So)&&(Yn(Po)||fa&&Yn(fa._segment)))&&yo.push(So),co&&Un.push(So)}Oo=Oo._next}}if(io){for($o(io);io&&io._previous;)io=io._previous;$o(io,Ka)}return yo}Pn.sort(function(so,co){var io=so._intersection,Ka=co._intersection,yo=!!(io&&io._overlap),$o=!!(Ka&&Ka._overlap),Oo=so._path,bo=co._path;return yo^$o?yo?1:-1:!io^!Ka?io?1:-1:Oo!==bo?Oo._id-bo._id:so._index-co._index});for(var ga=0,ba=Pn.length;ga<ba;ga++){var Oa=Pn[ga],va=Yn(Oa),Sa=null,$a=!1,Da=!0,Na=[],Va,Ua,Ha;if(va&&Oa._path._overlapsOnly){var Qa=Oa._path,Ja=Oa._intersection._segment._path;Qa.compare(Ja)&&(Qa.getArea()&&On.push(Qa.clone(!1)),Jn(Qa),Jn(Ja),va=!1)}for(;va;){var Ra=!Sa,Fa=pa(Oa,Ra),Xa=Fa.shift(),$a=!Ra&&(ta(Oa)||ta(Xa)),to=!$a&&Xa;if(Ra&&(Sa=new Sn(Ce.NO_INSERT),Va=null),$a){(Oa.isFirst()||Oa.isLast())&&(Da=Oa._path._closed),Oa._visited=!0;break}if(to&&Va&&(Na.push(Va),Va=null),Va||(to&&Fa.push(Oa),Va={start:Sa._segments.length,crossings:Fa,visited:Ua=[],handleIn:Ha}),to&&(Oa=Xa),!Yn(Oa)){Sa.removeSegments(Va.start);for(var eo=0,ro=Ua.length;eo<ro;eo++)Ua[eo]._visited=!1;Ua.length=0;do Oa=Va&&Va.crossings.shift(),(!Oa||!Oa._path)&&(Oa=null,Va=Na.pop(),Va&&(Ua=Va.visited,Ha=Va.handleIn));while(Va&&!Yn(Oa));if(!Oa)break}var oo=Oa.getNext();Sa.add(new jt(Oa._point,Ha,oo&&Oa._handleOut)),Oa._visited=!0,Ua.push(Oa),Oa=oo||Oa._path.getFirstSegment(),Ha=oo&&oo._handleIn}$a&&(Da&&(Sa.getFirstSegment().setHandleIn(Ha),Sa.setClosed(Da)),Sa.getArea()!==0&&On.push(Sa))}return On}return{_getWinding:function(Pn,jn,On){return Kn(Pn,this.getCurves(),jn,On)},unite:function(Pn,jn){return wn(this,Pn,"unite",jn)},intersect:function(Pn,jn){return wn(this,Pn,"intersect",jn)},subtract:function(Pn,jn){return wn(this,Pn,"subtract",jn)},exclude:function(Pn,jn){return wn(this,Pn,"exclude",jn)},divide:function(Pn,jn){return jn&&(jn.trace==!1||jn.stroke)?Cn(this,Pn,"divide"):_n([this.subtract(Pn,jn),this.intersect(Pn,jn)],!0,this,Pn,jn)},resolveCrossings:function(){var Pn=this._children,jn=Pn||[this];function On(Va,Ua){var Ha=Va&&Va._intersection;return Ha&&Ha._overlap&&Ha._path===Ua}var Un=!1,Yn=!1,ta=this.getIntersections(null,function(Va){return Va.hasOverlap()&&(Un=!0)||Va.isCrossing()&&(Yn=!0)}),Jn=Un&&Yn&&[];if(ta=Tn.expand(ta),Un)for(var pa=Gn(ta,function(Va){return Va.hasOverlap()},Jn),ga=pa.length-1;ga>=0;ga--){var ba=pa[ga],Oa=ba._path,va=ba._segment,Sa=va.getPrevious(),$a=va.getNext();On(Sa,Oa)&&On($a,Oa)&&(va.remove(),Sa._handleOut._set(0,0),$a._handleIn._set(0,0),Sa!==va&&!Sa.getCurve().hasLength()&&($a._handleIn.set(Sa._handleIn),Sa.remove()))}Yn&&(Gn(ta,Un&&function(Va){var Ua=Va.getCurve(),Ha=Va.getSegment(),Qa=Va._intersection,Ja=Qa._curve,Ra=Qa._segment;if(Ua&&Ja&&Ua._path&&Ja._path)return!0;Ha&&(Ha._intersection=null),Ra&&(Ra._intersection=null)},Jn),Jn&&zn(Jn),jn=ea(k.each(jn,function(Va){k.push(this,Va._segments)},[])));var Da=jn.length,Na;return Da>1&&Pn?(jn!==Pn&&this.setChildren(jn),Na=this):Da===1&&!Pn&&(jn[0]!==this&&this.setSegments(jn[0].removeSegments()),Na=this),Na||(Na=new An(Ce.NO_INSERT),Na.addChildren(jn),Na=Na.reduce(),Na.copyAttributes(this),this.replaceWith(Na)),Na},reorient:function(Pn,jn){var On=this._children;return On&&On.length?this.setChildren(Fn(this.removeChildren(),function(Un){return!!(Pn?Un:Un&1)},jn)):jn!==r&&this.setClockwise(jn),this},getInteriorPoint:function(){var Pn=this.getBounds(),jn=Pn.getCenter(!0);if(!this.contains(jn)){for(var On=this.getCurves(),Un=jn.y,Yn=[],ta=[],Jn=0,pa=On.length;Jn<pa;Jn++){var ga=On[Jn].getValues(),ba=ga[1],Oa=ga[3],va=ga[5],Sa=ga[7];if(Un>=pe(ba,Oa,va,Sa)&&Un<=Oe(ba,Oa,va,Sa))for(var $a=Rn.getMonoCurves(ga),Da=0,Na=$a.length;Da<Na;Da++){var Va=$a[Da],Ua=Va[1],Ha=Va[7];if(Ua!==Ha&&(Un>=Ua&&Un<=Ha||Un>=Ha&&Un<=Ua)){var Qa=Un===Ua?Va[0]:Un===Ha?Va[6]:Rn.solveCubic(Va,1,Un,ta,0,1)===1?Rn.getPoint(Va,ta[0]).x:(Va[0]+Va[6])/2;Yn.push(Qa)}}}Yn.length>1&&(Yn.sort(function(Ja,Ra){return Ja-Ra}),jn.x=(Yn[0]+Yn[1])/2)}return jn}}});var In=k.extend({_class:"PathFlattener",initialize:function(pe,Oe,Ve,qe,Et){var Lt=[],_n=[],vn=0,wn=1/(Ve||32),Cn=pe._segments,Bn=Cn[0],zn;function Fn(ea,Pn){var jn=Rn.getValues(ea,Pn,Et);Lt.push(jn),Gn(jn,ea._index,0,1)}function Gn(ea,Pn,jn,On){if(On-jn>wn&&!(qe&&Rn.isStraight(ea))&&!Rn.isFlatEnough(ea,Oe||.25)){var Un=Rn.subdivide(ea,.5),Yn=(jn+On)/2;Gn(Un[0],Pn,jn,Yn),Gn(Un[1],Pn,Yn,On)}else{var ta=ea[6]-ea[0],Jn=ea[7]-ea[1],pa=Math.sqrt(ta*ta+Jn*Jn);pa>0&&(vn+=pa,_n.push({offset:vn,curve:ea,index:Pn,time:On}))}}for(var Kn=1,Wn=Cn.length;Kn<Wn;Kn++)zn=Cn[Kn],Fn(Bn,zn),Bn=zn;pe._closed&&Fn(zn||Bn,Cn[0]),this.curves=Lt,this.parts=_n,this.length=vn,this.index=0},_get:function(pe){for(var Oe=this.parts,Ve=Oe.length,qe,Et=this.index;qe=Et,!(!Et||Oe[--Et].offset<pe););for(;qe<Ve;qe++){var Lt=Oe[qe];if(Lt.offset>=pe){this.index=qe;var _n=Oe[qe-1],vn=_n&&_n.index===Lt.index?_n.time:0,wn=_n?_n.offset:0;return{index:Lt.index,time:vn+(Lt.time-vn)*(pe-wn)/(Lt.offset-wn)}}}return{index:Oe[Ve-1].index,time:1}},drawPart:function(pe,Oe,Ve){for(var qe=this._get(Oe),Et=this._get(Ve),Lt=qe.index,_n=Et.index;Lt<=_n;Lt++){var vn=Rn.getPart(this.curves[Lt],Lt===qe.index?qe.time:0,Lt===Et.index?Et.time:1);Lt===qe.index&&pe.moveTo(vn[0],vn[1]),pe.bezierCurveTo.apply(pe,vn.slice(2))}}},k.each(Rn._evaluateMethods,function(pe){this[pe+"At"]=function(Oe){var Ve=this._get(Oe);return Rn[pe](this.curves[Ve.index],Ve.time)}},{})),Mn=k.extend({initialize:function(pe){for(var Oe=this.points=[],Ve=pe._segments,qe=pe._closed,Et=0,Lt,_n=Ve.length;Et<_n;Et++){var vn=Ve[Et].point;(!Lt||!Lt.equals(vn))&&Oe.push(Lt=vn.clone())}qe&&(Oe.unshift(Oe[Oe.length-1]),Oe.push(Oe[1])),this.closed=qe},fit:function(pe){var Oe=this.points,Ve=Oe.length,qe=null;return Ve>0&&(qe=[new jt(Oe[0])],Ve>1&&(this.fitCubic(qe,pe,0,Ve-1,Oe[1].subtract(Oe[0]),Oe[Ve-2].subtract(Oe[Ve-1])),this.closed&&(qe.shift(),qe.pop()))),qe},fitCubic:function(pe,Oe,Ve,qe,Et,Lt){var _n=this.points;if(qe-Ve===1){var vn=_n[Ve],wn=_n[qe],Cn=vn.getDistance(wn)/3;this.addCurve(pe,[vn,vn.add(Et.normalize(Cn)),wn.add(Lt.normalize(Cn)),wn]);return}for(var Bn=this.chordLengthParameterize(Ve,qe),zn=Math.max(Oe,Oe*Oe),Fn,Gn=!0,Kn=0;Kn<=4;Kn++){var Wn=this.generateBezier(Ve,qe,Bn,Et,Lt),ea=this.findMaxError(Ve,qe,Wn,Bn);if(ea.error<Oe&&Gn){this.addCurve(pe,Wn);return}if(Fn=ea.index,ea.error>=zn)break;Gn=this.reparameterize(Ve,qe,Bn,Wn),zn=ea.error}var Pn=_n[Fn-1].subtract(_n[Fn+1]);this.fitCubic(pe,Oe,Ve,Fn,Et,Pn),this.fitCubic(pe,Oe,Fn,qe,Pn.negate(),Lt)},addCurve:function(pe,Oe){var Ve=pe[pe.length-1];Ve.setHandleOut(Oe[1].subtract(Oe[0])),pe.push(new jt(Oe[3],Oe[2].subtract(Oe[3])))},generateBezier:function(pe,Oe,Ve,qe,Et){for(var Lt=1e-12,_n=Math.abs,vn=this.points,wn=vn[pe],Cn=vn[Oe],Bn=[[0,0],[0,0]],zn=[0,0],Fn=0,Gn=Oe-pe+1;Fn<Gn;Fn++){var Kn=Ve[Fn],Wn=1-Kn,ea=3*Kn*Wn,Pn=Wn*Wn*Wn,jn=ea*Wn,On=ea*Kn,Un=Kn*Kn*Kn,Yn=qe.normalize(jn),ta=Et.normalize(On),Jn=vn[pe+Fn].subtract(wn.multiply(Pn+jn)).subtract(Cn.multiply(On+Un));Bn[0][0]+=Yn.dot(Yn),Bn[0][1]+=Yn.dot(ta),Bn[1][0]=Bn[0][1],Bn[1][1]+=ta.dot(ta),zn[0]+=Yn.dot(Jn),zn[1]+=ta.dot(Jn)}var pa=Bn[0][0]*Bn[1][1]-Bn[1][0]*Bn[0][1],ga,ba;if(_n(pa)>Lt){var Oa=Bn[0][0]*zn[1]-Bn[1][0]*zn[0],va=zn[0]*Bn[1][1]-zn[1]*Bn[0][1];ga=va/pa,ba=Oa/pa}else{var Sa=Bn[0][0]+Bn[0][1],$a=Bn[1][0]+Bn[1][1];ga=ba=_n(Sa)>Lt?zn[0]/Sa:_n($a)>Lt?zn[1]/$a:0}var Da=Cn.getDistance(wn),Na=Lt*Da,Va,Ua;if(ga<Na||ba<Na)ga=ba=Da/3;else{var Ha=Cn.subtract(wn);Va=qe.normalize(ga),Ua=Et.normalize(ba),Va.dot(Ha)-Ua.dot(Ha)>Da*Da&&(ga=ba=Da/3,Va=Ua=null)}return[wn,wn.add(Va||qe.normalize(ga)),Cn.add(Ua||Et.normalize(ba)),Cn]},reparameterize:function(pe,Oe,Ve,qe){for(var Et=pe;Et<=Oe;Et++)Ve[Et-pe]=this.findRoot(qe,this.points[Et],Ve[Et-pe]);for(var Et=1,Lt=Ve.length;Et<Lt;Et++)if(Ve[Et]<=Ve[Et-1])return!1;return!0},findRoot:function(pe,Oe,Ve){for(var qe=[],Et=[],Lt=0;Lt<=2;Lt++)qe[Lt]=pe[Lt+1].subtract(pe[Lt]).multiply(3);for(var Lt=0;Lt<=1;Lt++)Et[Lt]=qe[Lt+1].subtract(qe[Lt]).multiply(2);var _n=this.evaluate(3,pe,Ve),vn=this.evaluate(2,qe,Ve),wn=this.evaluate(1,Et,Ve),Cn=_n.subtract(Oe),Bn=vn.dot(vn)+Cn.dot(wn);return ae.isMachineZero(Bn)?Ve:Ve-Cn.dot(vn)/Bn},evaluate:function(pe,Oe,Ve){for(var qe=Oe.slice(),Et=1;Et<=pe;Et++)for(var Lt=0;Lt<=pe-Et;Lt++)qe[Lt]=qe[Lt].multiply(1-Ve).add(qe[Lt+1].multiply(Ve));return qe[0]},chordLengthParameterize:function(pe,Oe){for(var Ve=[0],qe=pe+1;qe<=Oe;qe++)Ve[qe-pe]=Ve[qe-pe-1]+this.points[qe].getDistance(this.points[qe-1]);for(var qe=1,Et=Oe-pe;qe<=Et;qe++)Ve[qe]/=Ve[Et];return Ve},findMaxError:function(pe,Oe,Ve,qe){for(var Et=Math.floor((Oe-pe+1)/2),Lt=0,_n=pe+1;_n<Oe;_n++){var vn=this.evaluate(3,Ve,qe[_n-pe]),wn=vn.subtract(this.points[_n]),Cn=wn.x*wn.x+wn.y*wn.y;Cn>=Lt&&(Lt=Cn,Et=_n)}return{error:Lt,index:Et}}}),ra=Ce.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(Oe){this._content="",this._lines=[];var Ve=Oe&&k.isPlainObject(Oe)&&Oe.x===r&&Oe.y===r;this._initialize(Ve&&Oe,!Ve&&re.read(arguments))},_equals:function(pe){return this._content===pe._content},copyContent:function(pe){this.setContent(pe._content)},getContent:function(){return this._content},setContent:function(pe){this._content=""+pe,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),da=ra.extend({_class:"PointText",initialize:function(){ra.apply(this,arguments)},getPoint:function(){var pe=this._matrix.getTranslation();return new ue(pe.x,pe.y,this,"setPoint")},setPoint:function(){var pe=re.read(arguments);this.translate(pe.subtract(this._matrix.getTranslation()))},_draw:function(pe,Oe,Ve){if(this._content){this._setStyles(pe,Oe,Ve);var qe=this._lines,Et=this._style,Lt=Et.hasFill(),_n=Et.hasStroke(),vn=Et.getLeading(),wn=pe.shadowColor;pe.font=Et.getFontStyle(),pe.textAlign=Et.getJustification();for(var Cn=0,Bn=qe.length;Cn<Bn;Cn++){pe.shadowColor=wn;var zn=qe[Cn];Lt&&(pe.fillText(zn,0,0),pe.shadowColor="rgba(0,0,0,0)"),_n&&pe.strokeText(zn,0,0),pe.translate(0,vn)}}},_getBounds:function(pe,Oe){var Ve=this._style,qe=this._lines,Et=qe.length,Lt=Ve.getJustification(),_n=Ve.getLeading(),vn=this.getView().getTextWidth(Ve.getFontStyle(),qe),wn=0;Lt!=="left"&&(wn-=vn/(Lt==="center"?2:1));var Cn=new he(wn,Et?-.75*_n:0,vn,Et*_n);return pe?pe._transformBounds(Cn,Cn):Cn}}),ua=k.extend(new function(){var pe={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},Oe={},Ve={transparent:[0,0,0,0]},qe;function Et(vn){var wn=vn.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||vn.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),Cn="rgb",Bn;if(wn){var zn=wn[4]?4:3;Bn=new Array(zn);for(var Fn=0;Fn<zn;Fn++){var Gn=wn[Fn+1];Bn[Fn]=parseInt(Gn.length==1?Gn+Gn:Gn,16)/255}}else if(wn=vn.match(/^(rgb|hsl)a?\((.*)\)$/)){Cn=wn[1],Bn=wn[2].trim().split(/[,\s]+/g);for(var Kn=Cn==="hsl",Fn=0,Wn=Math.min(Bn.length,4);Fn<Wn;Fn++){var ea=Bn[Fn],Gn=parseFloat(ea);if(Kn)if(Fn===0){var Pn=ea.match(/([a-z]*)$/)[1];Gn*={turn:360,rad:180/Math.PI,grad:.9}[Pn]||1}else Fn<3&&(Gn/=100);else Fn<3&&(Gn/=/%$/.test(ea)?100:255);Bn[Fn]=Gn}}else{var jn=Ve[vn];if(!jn)if(g){qe||(qe=oa.getContext(1,1,{willReadFrequently:!0}),qe.globalCompositeOperation="copy"),qe.fillStyle="rgba(0,0,0,0)",qe.fillStyle=vn,qe.fillRect(0,0,1,1);var On=qe.getImageData(0,0,1,1).data;jn=Ve[vn]=[On[0]/255,On[1]/255,On[2]/255]}else jn=[0,0,0];Bn=jn.slice()}return[Cn,Bn]}var Lt=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],_n={"rgb-hsb":function(vn,wn,Cn){var Bn=Math.max(vn,wn,Cn),zn=Math.min(vn,wn,Cn),Fn=Bn-zn,Gn=Fn===0?0:(Bn==vn?(wn-Cn)/Fn+(wn<Cn?6:0):Bn==wn?(Cn-vn)/Fn+2:(vn-wn)/Fn+4)*60;return[Gn,Bn===0?0:Fn/Bn,Bn]},"hsb-rgb":function(vn,wn,Cn){vn=(vn/60%6+6)%6;var zn=Math.floor(vn),Bn=vn-zn,zn=Lt[zn],Fn=[Cn,Cn*(1-wn),Cn*(1-wn*Bn),Cn*(1-wn*(1-Bn))];return[Fn[zn[0]],Fn[zn[1]],Fn[zn[2]]]},"rgb-hsl":function(vn,wn,Cn){var Bn=Math.max(vn,wn,Cn),zn=Math.min(vn,wn,Cn),Fn=Bn-zn,Gn=Fn===0,Kn=Gn?0:(Bn==vn?(wn-Cn)/Fn+(wn<Cn?6:0):Bn==wn?(Cn-vn)/Fn+2:(vn-wn)/Fn+4)*60,Wn=(Bn+zn)/2,ea=Gn?0:Wn<.5?Fn/(Bn+zn):Fn/(2-Bn-zn);return[Kn,ea,Wn]},"hsl-rgb":function(vn,wn,Cn){if(vn=(vn/360%1+1)%1,wn===0)return[Cn,Cn,Cn];for(var Bn=[vn+1/3,vn,vn-1/3],zn=Cn<.5?Cn*(1+wn):Cn+wn-Cn*wn,Fn=2*Cn-zn,Gn=[],Kn=0;Kn<3;Kn++){var Wn=Bn[Kn];Wn<0&&(Wn+=1),Wn>1&&(Wn-=1),Gn[Kn]=6*Wn<1?Fn+(zn-Fn)*6*Wn:2*Wn<1?zn:3*Wn<2?Fn+(zn-Fn)*(2/3-Wn)*6:Fn}return Gn},"rgb-gray":function(vn,wn,Cn){return[vn*.2989+wn*.587+Cn*.114]},"gray-rgb":function(vn){return[vn,vn,vn]},"gray-hsb":function(vn){return[0,0,vn]},"gray-hsl":function(vn){return[0,0,vn]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return k.each(pe,function(vn,wn){Oe[wn]=[],k.each(vn,function(Cn,Bn){var zn=k.capitalize(Cn),Fn=/^(hue|saturation)$/.test(Cn),Gn=Oe[wn][Bn]=wn==="gradient"?Cn==="gradient"?function(Kn){var Wn=this._components[0];return Kn=aa.read(Array.isArray(Kn)?Kn:arguments,0,{readNull:!0}),Wn!==Kn&&(Wn&&Wn._removeOwner(this),Kn&&Kn._addOwner(this)),Kn}:function(){return re.read(arguments,0,{readNull:Cn==="highlight",clone:!0})}:function(Kn){return Kn==null||isNaN(Kn)?0:+Kn};this["get"+zn]=function(){return this._type===wn||Fn&&/^hs[bl]$/.test(this._type)?this._components[Bn]:this._convert(wn)[Bn]},this["set"+zn]=function(Kn){this._type!==wn&&!(Fn&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(wn),this._properties=pe[wn],this._type=wn),this._components[Bn]=Gn.call(this,Kn),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function vn(wn){var Cn=arguments,Bn=this.__read,zn=0,Fn,Gn,Kn,Wn;Array.isArray(wn)&&(Cn=wn,wn=Cn[0]);var ea=wn!=null&&typeof wn;if(ea==="string"&&wn in pe&&(Fn=wn,wn=Cn[1],Array.isArray(wn)?(Gn=wn,Kn=Cn[2]):(Bn&&(zn=1),Cn=k.slice(Cn,1),ea=typeof wn)),!Gn){if(Wn=ea==="number"?Cn:ea==="object"&&wn.length!=null?wn:null,Wn){Fn||(Fn=Wn.length>=3?"rgb":"gray");var Pn=pe[Fn].length;Kn=Wn[Pn],Bn&&(zn+=Wn===arguments?Pn+(Kn!=null?1:0):1),Wn.length>Pn&&(Wn=k.slice(Wn,0,Pn))}else if(ea==="string"){var jn=Et(wn);Fn=jn[0],Gn=jn[1],Gn.length===4&&(Kn=Gn[3],Gn.length--)}else if(ea==="object")if(wn.constructor===vn){if(Fn=wn._type,Gn=wn._components.slice(),Kn=wn._alpha,Fn==="gradient")for(var On=1,Un=Gn.length;On<Un;On++){var Yn=Gn[On];Yn&&(Gn[On]=Yn.clone())}}else if(wn.constructor===aa)Fn="gradient",Wn=Cn;else{Fn="hue"in wn?"lightness"in wn?"hsl":"hsb":"gradient"in wn||"stops"in wn||"radial"in wn?"gradient":"gray"in wn?"gray":"rgb";var ta=pe[Fn],Jn=Oe[Fn];this._components=Gn=[];for(var On=0,Un=ta.length;On<Un;On++){var pa=wn[ta[On]];pa==null&&!On&&Fn==="gradient"&&"stops"in wn&&(pa={stops:wn.stops,radial:wn.radial}),pa=Jn[On].call(this,pa),pa!=null&&(Gn[On]=pa)}Kn=wn.alpha}Bn&&Fn&&(zn=1)}if(this._type=Fn||"rgb",!Gn){this._components=Gn=[];for(var Jn=Oe[this._type],On=0,Un=Jn.length;On<Un;On++){var pa=Jn[On].call(this,Wn&&Wn[On]);pa!=null&&(Gn[On]=pa)}}return this._components=Gn,this._properties=pe[this._type],this._alpha=Kn,Bn&&(this.__read=zn),this},set:"#initialize",_serialize:function(vn,wn){var Cn=this.getComponents();return k.serialize(/^(gray|rgb)$/.test(this._type)?Cn:[this._type].concat(Cn),vn,!0,wn)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(vn){var wn;return this._type===vn?this._components.slice():(wn=_n[this._type+"-"+vn])?wn.apply(this,this._components):_n["rgb-"+vn].apply(this,_n[this._type+"-rgb"].apply(this,this._components))},convert:function(vn){return new ua(vn,this._convert(vn),this._alpha)},getType:function(){return this._type},setType:function(vn){this._components=this._convert(vn),this._properties=pe[vn],this._type=vn},getComponents:function(){var vn=this._components.slice();return this._alpha!=null&&vn.push(this._alpha),vn},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(vn){this._alpha=vn==null?null:Math.min(Math.max(vn,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(vn){var wn=k.isPlainValue(vn,!0)?ua.read(arguments):vn;return wn===this||wn&&this._class===wn._class&&this._type===wn._type&&this.getAlpha()===wn.getAlpha()&&k.equals(this._components,wn._components)||!1},toString:function(){for(var vn=this._properties,wn=[],Cn=this._type==="gradient",Bn=j.instance,zn=0,Fn=vn.length;zn<Fn;zn++){var Gn=this._components[zn];Gn!=null&&wn.push(vn[zn]+": "+(Cn?Gn:Bn.number(Gn)))}return this._alpha!=null&&wn.push("alpha: "+Bn.number(this._alpha)),"{ "+wn.join(", ")+" }"},toCSS:function(vn){var wn=this._convert("rgb"),Cn=vn||this._alpha==null?1:this._alpha;function Bn(zn){return Math.round((zn<0?0:zn>1?1:zn)*255)}return wn=[Bn(wn[0]),Bn(wn[1]),Bn(wn[2])],Cn<1&&wn.push(Cn<0?0:Cn),vn?"#"+((1<<24)+(wn[0]<<16)+(wn[1]<<8)+wn[2]).toString(16).slice(1):(wn.length==4?"rgba(":"rgb(")+wn.join(",")+")"},toCanvasStyle:function(vn,wn){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var Cn=this._components,Bn=Cn[0],zn=Bn._stops,Fn=Cn[1],Gn=Cn[2],Kn=Cn[3],Wn=wn&&wn.inverted(),ea;if(Wn&&(Fn=Wn._transformPoint(Fn),Gn=Wn._transformPoint(Gn),Kn&&(Kn=Wn._transformPoint(Kn))),Bn._radial){var Pn=Gn.getDistance(Fn);if(Kn){var jn=Kn.subtract(Fn);jn.getLength()>Pn&&(Kn=Fn.add(jn.normalize(Pn-.1)))}var On=Kn||Fn;ea=vn.createRadialGradient(On.x,On.y,0,Fn.x,Fn.y,Pn)}else ea=vn.createLinearGradient(Fn.x,Fn.y,Gn.x,Gn.y);for(var Un=0,Yn=zn.length;Un<Yn;Un++){var ta=zn[Un],Jn=ta._offset;ea.addColorStop(Jn??Un/(Yn-1),ta._color.toCanvasStyle())}return this._canvasStyle=ea},transform:function(vn){if(this._type==="gradient"){for(var wn=this._components,Cn=1,Bn=wn.length;Cn<Bn;Cn++){var zn=wn[Cn];vn._transformPoint(zn,zn,!0)}this._changed()}},statics:{_types:pe,random:function(){var vn=Math.random;return new ua(vn(),vn(),vn())},_setOwner:function(vn,wn,Cn){return vn&&(vn._owner&&wn&&vn._owner!==wn&&(vn=vn.clone()),!vn._owner^!wn&&(vn._owner=wn||null,vn._setter=Cn||null)),vn}}})},new function(){var pe={add:function(Oe,Ve){return Oe+Ve},subtract:function(Oe,Ve){return Oe-Ve},multiply:function(Oe,Ve){return Oe*Ve},divide:function(Oe,Ve){return Oe/Ve}};return k.each(pe,function(Oe,Ve){this[Ve]=function(qe){qe=ua.read(arguments);for(var Et=this._type,Lt=this._components,_n=qe._convert(Et),vn=0,wn=Lt.length;vn<wn;vn++)_n[vn]=Oe(Lt[vn],_n[vn]);return new ua(Et,_n,this._alpha!=null?Oe(this._alpha,qe.getAlpha()):null)}},{})}),aa=k.extend({_class:"Gradient",initialize:function(Oe,Ve){this._id=oe.get(),Oe&&k.isPlainObject(Oe)&&(this.set(Oe),Oe=Ve=null),this._stops==null&&this.setStops(Oe||["white","black"]),this._radial==null&&this.setRadial(typeof Ve=="string"&&Ve==="radial"||Ve||!1)},_serialize:function(pe,Oe){return Oe.add(this,function(){return k.serialize([this._stops,this._radial],pe,!0,Oe)})},_changed:function(){for(var pe=0,Oe=this._owners&&this._owners.length;pe<Oe;pe++)this._owners[pe]._changed()},_addOwner:function(pe){this._owners||(this._owners=[]),this._owners.push(pe)},_removeOwner:function(pe){var Oe=this._owners?this._owners.indexOf(pe):-1;Oe!=-1&&(this._owners.splice(Oe,1),this._owners.length||(this._owners=r))},clone:function(){for(var pe=[],Oe=0,Ve=this._stops.length;Oe<Ve;Oe++)pe[Oe]=this._stops[Oe].clone();return new aa(pe,this._radial)},getStops:function(){return this._stops},setStops:function(pe){if(pe.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var Oe=this._stops;if(Oe)for(var Ve=0,qe=Oe.length;Ve<qe;Ve++)Oe[Ve]._owner=r;Oe=this._stops=Nn.readList(pe,0,{clone:!0});for(var Ve=0,qe=Oe.length;Ve<qe;Ve++)Oe[Ve]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(pe){this._radial=pe,this._changed()},equals:function(pe){if(pe===this)return!0;if(pe&&this._class===pe._class){var Oe=this._stops,Ve=pe._stops,qe=Oe.length;if(qe===Ve.length){for(var Et=0;Et<qe;Et++)if(!Oe[Et].equals(Ve[Et]))return!1;return!0}}return!1}}),Nn=k.extend({_class:"GradientStop",initialize:function(Oe,Ve){var qe=Oe,Et=Ve;typeof Oe=="object"&&Ve===r&&(Array.isArray(Oe)&&typeof Oe[0]!="number"?(qe=Oe[0],Et=Oe[1]):("color"in Oe||"offset"in Oe||"rampPoint"in Oe)&&(qe=Oe.color,Et=Oe.offset||Oe.rampPoint||0)),this.setColor(qe),this.setOffset(Et)},clone:function(){return new Nn(this._color.clone(),this._offset)},_serialize:function(pe,Oe){var Ve=this._color,qe=this._offset;return k.serialize(qe==null?[Ve]:[Ve,qe],pe,!0,Oe)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(pe){this._offset=pe,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){ua._setOwner(this._color,null),this._color=ua._setOwner(ua.read(arguments,0),this,"setColor"),this._changed()},equals:function(pe){return pe===this||pe&&this._class===pe._class&&this._color.equals(pe._color)&&this._offset==pe._offset||!1}}),En=k.extend(new function(){var pe={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new re,selectedColor:null},Oe=k.set({},pe,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),Ve=k.set({},Oe,{fillColor:new ua}),qe={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},Et={beans:!0},Lt={_class:"Style",beans:!0,initialize:function(vn,wn,Cn){this._values={},this._owner=wn,this._project=wn&&wn._project||Cn||ca.project,this._defaults=!wn||wn instanceof Ie?Oe:wn instanceof ra?Ve:pe,vn&&this.set(vn)}};return k.each(Oe,function(_n,vn){var wn=/Color$/.test(vn),Cn=vn==="shadowOffset",Bn=k.capitalize(vn),zn=qe[vn],Fn="set"+Bn,Gn="get"+Bn;Lt[Fn]=function(Kn){var Wn=this._owner,ea=Wn&&Wn._children,Pn=ea&&ea.length>0&&!(Wn instanceof An);if(Pn)for(var jn=0,On=ea.length;jn<On;jn++)ea[jn]._style[Fn](Kn);if((vn==="selectedColor"||!Pn)&&vn in this._defaults){var Un=this._values[vn];Un!==Kn&&(wn&&(Un&&(ua._setOwner(Un,null),Un._canvasStyle=null),Kn&&Kn.constructor===ua&&(Kn=ua._setOwner(Kn,Wn,Pn&&Fn))),this._values[vn]=Kn,Wn&&Wn._changed(zn||129))}},Lt[Gn]=function(Kn){var Wn=this._owner,ea=Wn&&Wn._children,Pn=ea&&ea.length>0&&!(Wn instanceof An),jn;if(Pn&&!Kn)for(var On=0,Un=ea.length;On<Un;On++){var Yn=ea[On]._style[Gn]();if(!On)jn=Yn;else if(!k.equals(jn,Yn))return r}else if(vn in this._defaults){var jn=this._values[vn];if(jn===r)jn=this._defaults[vn],jn&&jn.clone&&(jn=jn.clone());else{var ta=wn?ua:Cn?re:null;ta&&!(jn&&jn.constructor===ta)&&(this._values[vn]=jn=ta.read([jn],0,{readNull:!0,clone:!0}))}}return jn&&wn&&(jn=ua._setOwner(jn,Wn,Pn&&Fn)),jn},Et[Gn]=function(Kn){return this._style[Gn](Kn)},Et[Fn]=function(Kn){this._style[Fn](Kn)}}),k.each({Font:"FontFamily",WindingRule:"FillRule"},function(_n,vn){var wn="get"+vn,Cn="set"+vn;Lt[wn]=Et[wn]="#get"+_n,Lt[Cn]=Et[Cn]="#set"+_n}),Ce.inject(Et),Lt},{set:function(pe){var Oe=pe instanceof En,Ve=Oe?pe._values:pe;if(Ve){for(var qe in Ve)if(qe in this._defaults){var Et=Ve[qe];this[qe]=Et&&Oe&&Et.clone?Et.clone():Et}}},equals:function(pe){function Oe(Ve,qe,Et){var Lt=Ve._values,_n=qe._values,vn=qe._defaults;for(var wn in Lt){var Cn=Lt[wn],Bn=_n[wn];if(!(Et&&wn in _n)&&!k.equals(Cn,Bn===r?vn[wn]:Bn))return!1}return!0}return pe===this||pe&&this._class===pe._class&&Oe(this,pe)&&Oe(pe,this,!0)||!1},_dispose:function(){var pe;pe=this.getFillColor(),pe&&(pe._canvasStyle=null),pe=this.getStrokeColor(),pe&&(pe._canvasStyle=null),pe=this.getShadowColor(),pe&&(pe._canvasStyle=null)},hasFill:function(){var pe=this.getFillColor();return!!pe&&pe.alpha>0},hasStroke:function(){var pe=this.getStrokeColor();return!!pe&&pe.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var pe=this.getShadowColor();return!!pe&&pe.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var pe=this.getFontSize();return this.getFontWeight()+" "+pe+(/[a-z]/i.test(pe+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function pe(){var Oe=pe.base.call(this),Ve=this.getFontSize();return/pt|em|%|px/.test(Ve)&&(Ve=this.getView().getPixelSize(Ve)),Oe??Ve*1.2}}),Zn=new function(){function pe(Oe,Ve,qe,Et){for(var Lt=["","webkit","moz","Moz","ms","o"],_n=Ve[0].toUpperCase()+Ve.substring(1),vn=0;vn<6;vn++){var wn=Lt[vn],Cn=wn?wn+_n:Ve;if(Cn in Oe){if(qe)Oe[Cn]=Et;else return Oe[Cn];break}}}return{getStyles:function(Oe){var Ve=Oe&&Oe.nodeType!==9?Oe.ownerDocument:Oe,qe=Ve&&Ve.defaultView;return qe&&qe.getComputedStyle(Oe,"")},getBounds:function(Oe,Ve){var qe=Oe.ownerDocument,Et=qe.body,Lt=qe.documentElement,_n;try{_n=Oe.getBoundingClientRect()}catch{_n={left:0,top:0,width:0,height:0}}var vn=_n.left-(Lt.clientLeft||Et.clientLeft||0),wn=_n.top-(Lt.clientTop||Et.clientTop||0);if(!Ve){var Cn=qe.defaultView;vn+=Cn.pageXOffset||Lt.scrollLeft||Et.scrollLeft,wn+=Cn.pageYOffset||Lt.scrollTop||Et.scrollTop}return new he(vn,wn,_n.width,_n.height)},getViewportBounds:function(Oe){var Ve=Oe.ownerDocument,qe=Ve.defaultView,Et=Ve.documentElement;return new he(0,0,qe.innerWidth||Et.clientWidth,qe.innerHeight||Et.clientHeight)},getOffset:function(Oe,Ve){return Zn.getBounds(Oe,Ve).getPoint()},getSize:function(Oe){return Zn.getBounds(Oe,!0).getSize()},isInvisible:function(Oe){return Zn.getSize(Oe).equals(new le(0,0))},isInView:function(Oe){return!Zn.isInvisible(Oe)&&Zn.getViewportBounds(Oe).intersects(Zn.getBounds(Oe,!0))},isInserted:function(Oe){return y.body.contains(Oe)},getPrefixed:function(Oe,Ve){return Oe&&pe(Oe,Ve)},setPrefixed:function(Oe,Ve,qe){if(typeof Ve=="object")for(var Et in Ve)pe(Oe,Et,!0,Ve[Et]);else pe(Oe,Ve,!0,qe)}}},ha={add:function(pe,Oe){if(pe)for(var Ve in Oe)for(var qe=Oe[Ve],Et=Ve.split(/[\s,]+/g),Lt=0,_n=Et.length;Lt<_n;Lt++){var vn=Et[Lt],wn=pe===y&&(vn==="touchstart"||vn==="touchmove")?{passive:!1}:!1;pe.addEventListener(vn,qe,wn)}},remove:function(pe,Oe){if(pe)for(var Ve in Oe)for(var qe=Oe[Ve],Et=Ve.split(/[\s,]+/g),Lt=0,_n=Et.length;Lt<_n;Lt++)pe.removeEventListener(Et[Lt],qe,!1)},getPoint:function(pe){var Oe=pe.targetTouches?pe.targetTouches.length?pe.targetTouches[0]:pe.changedTouches[0]:pe;return new re(Oe.pageX||Oe.clientX+y.documentElement.scrollLeft,Oe.pageY||Oe.clientY+y.documentElement.scrollTop)},getTarget:function(pe){return pe.target||pe.srcElement},getRelatedTarget:function(pe){return pe.relatedTarget||pe.toElement},getOffset:function(pe,Oe){return ha.getPoint(pe).subtract(Zn.getOffset(Oe||ha.getTarget(pe)))}};ha.requestAnimationFrame=new function(){var pe=Zn.getPrefixed(g,"requestAnimationFrame"),Oe=!1,Ve=[],qe;function Et(){var Lt=Ve;Ve=[];for(var _n=0,vn=Lt.length;_n<vn;_n++)Lt[_n]();Oe=pe&&Ve.length,Oe&&pe(Et)}return function(Lt){Ve.push(Lt),pe?Oe||(pe(Et),Oe=!0):qe||(qe=setInterval(Et,1e3/60))}};var xa=k.extend($,{_class:"View",initialize:function pe(Oe,Ve){function qe(zn){return Ve[zn]||parseInt(Ve.getAttribute(zn),10)}function Et(){var zn=Zn.getSize(Ve);return zn.isNaN()||zn.isZero()?new le(qe("width"),qe("height")):zn}var Lt;if(g&&Ve){this._id=Ve.getAttribute("id"),this._id==null&&Ve.setAttribute("id",this._id="paper-view-"+pe._id++),ha.add(Ve,this._viewEvents);var _n="none";if(Zn.setPrefixed(Ve.style,{userDrag:_n,userSelect:_n,touchCallout:_n,contentZooming:_n,tapHighlightColor:"rgba(0,0,0,0)"}),V.hasAttribute(Ve,"resize")){var vn=this;ha.add(g,this._windowEvents={resize:function(){vn.setViewSize(Et())}})}if(Lt=Et(),V.hasAttribute(Ve,"stats")&&typeof Stats<"u"){this._stats=new Stats;var wn=this._stats.domElement,Cn=wn.style,Bn=Zn.getOffset(Ve);Cn.position="absolute",Cn.left=Bn.x+"px",Cn.top=Bn.y+"px",y.body.appendChild(wn)}}else Lt=new le(Ve),Ve=null;this._project=Oe,this._scope=Oe._scope,this._element=Ve,this._pixelRatio||(this._pixelRatio=g&&g.devicePixelRatio||1),this._setElementSize(Lt.width,Lt.height),this._viewSize=Lt,pe._views.push(this),pe._viewsById[this._id]=this,(this._matrix=new xe)._owner=this,pe._focused||(pe._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!ca.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;xa._focused===this&&(xa._focused=null),xa._views.splice(xa._views.indexOf(this),1),delete xa._viewsById[this._id];var pe=this._project;return pe._view===this&&(pe._view=null),ha.remove(this._element,this._viewEvents),ha.remove(g,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:k.each(Ce._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(pe){this[pe]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(pe){this._autoUpdate=pe,pe&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var pe=this;ha.requestAnimationFrame(function(){if(pe._requested=!1,pe._animate){pe.requestUpdate();var Oe=pe._element;(!Zn.getPrefixed(y,"hidden")||V.getAttribute(Oe,"keepalive")==="true")&&Zn.isInView(Oe)&&pe._handleFrame()}pe._autoUpdate&&pe.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){ca=this._scope;var pe=Date.now()/1e3,Oe=this._last?pe-this._last:0;this._last=pe,this.emit("frame",new k({delta:Oe,time:this._time+=Oe,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(pe,Oe){var Ve=this._frameItems;Oe?(Ve[pe._id]={item:pe,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete Ve[pe._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(pe){for(var Oe in this._frameItems){var Ve=this._frameItems[Oe];Ve.item.emit("frame",new k(pe,{time:Ve.time+=pe.delta,count:Ve.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=r},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var pe=this._viewSize;return new de(pe.width,pe.height,this,"setViewSize")},setViewSize:function(){var pe=le.read(arguments),Oe=pe.subtract(this._viewSize);Oe.isZero()||(this._setElementSize(pe.width,pe.height),this._viewSize.set(pe),this._changed(),this.emit("resize",{size:pe,delta:Oe}),this._autoUpdate&&this.update())},_setElementSize:function(pe,Oe){var Ve=this._element;Ve&&(Ve.width!==pe&&(Ve.width=pe),Ve.height!==Oe&&(Ve.height=Oe))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new he(new re,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Zn.isInView(this._element)},isInserted:function(){return Zn.isInserted(this._element)},getPixelSize:function(pe){var Oe=this._element,Ve;if(Oe){var qe=Oe.parentNode,Et=y.createElement("div");Et.style.fontSize=pe,qe.appendChild(Et),Ve=parseFloat(Zn.getStyles(Et).fontSize),qe.removeChild(Et)}else Ve=parseFloat(Ve);return Ve},getTextWidth:function(pe,Oe){return 0}},k.each(["rotate","scale","shear","skew"],function(pe){var Oe=pe==="rotate";this[pe]=function(){var Ve=arguments,qe=(Oe?k:re).read(Ve),Et=re.read(Ve,0,{readNull:!0});return this.transform(new xe()[pe](qe,Et||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var pe=new xe;return this.transform(pe.translate.apply(pe,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var pe=re.read(arguments);this.translate(this.getCenter().subtract(pe))},getZoom:function(){var pe=this._decompose().scaling;return(pe.x+pe.y)/2},setZoom:function(pe){this.transform(new xe().scale(pe/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(pe){var Oe=this.getRotation();Oe!=null&&pe!=null&&this.rotate(pe-Oe)},getScaling:function(){var pe=this._decompose().scaling;return new ue(pe.x,pe.y,this,"setScaling")},setScaling:function(){var pe=this.getScaling(),Oe=re.read(arguments,0,{clone:!0,readNull:!0});pe&&Oe&&this.scale(Oe.x/pe.x,Oe.y/pe.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var pe=this._matrix;pe.set.apply(pe,arguments)},transform:function(pe){this._matrix.append(pe)},scrollBy:function(){this.translate(re.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(re.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(re.read(arguments))},getEventPoint:function(pe){return this.viewToProject(ha.getOffset(pe,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(pe,Oe){y&&typeof Oe=="string"&&(Oe=y.getElementById(Oe));var Ve=g?sa:xa;return new Ve(pe,Oe)}}},new function(){if(!g)return;var pe,Oe,Ve=!1,qe=!1;function Et(va){var Sa=ha.getTarget(va);return Sa.getAttribute&&xa._viewsById[Sa.getAttribute("id")]}function Lt(){var va=xa._focused;if(!va||!va.isVisible()){for(var Sa=0,$a=xa._views.length;Sa<$a;Sa++)if((va=xa._views[Sa]).isVisible()){xa._focused=Oe=va;break}}}function _n(va,Sa,$a){va._handleMouseEvent("mousemove",Sa,$a)}var vn=g.navigator,wn,Cn,Bn;vn.pointerEnabled||vn.msPointerEnabled?(wn="pointerdown MSPointerDown",Cn="pointermove MSPointerMove",Bn="pointerup pointercancel MSPointerUp MSPointerCancel"):(wn="touchstart",Cn="touchmove",Bn="touchend touchcancel","ontouchstart"in g&&vn.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(wn+=" mousedown",Cn+=" mousemove",Bn+=" mouseup"));var zn={},Fn={mouseout:function(va){var Sa=xa._focused,$a=ha.getRelatedTarget(va);if(Sa&&(!$a||$a.nodeName==="HTML")){var Da=ha.getOffset(va,Sa._element),Na=Da.x,Va=Math.abs,Ua=Va(Na),Ha=1<<25,Qa=Ua-Ha;Da.x=Va(Qa)<Ua?Qa*(Na<0?-1:1):Na,_n(Sa,va,Sa.viewToProject(Da))}},scroll:Lt};zn[wn]=function(va){var Sa=xa._focused=Et(va);Ve||(Ve=!0,Sa._handleMouseEvent("mousedown",va))},Fn[Cn]=function(va){var Sa=xa._focused;if(!qe){var $a=Et(va);$a?Sa!==$a&&(Sa&&_n(Sa,va),pe||(pe=Sa),Sa=xa._focused=Oe=$a):Oe&&Oe===Sa&&(pe&&!pe.isInserted()&&(pe=null),Sa=xa._focused=pe,pe=null,Lt())}Sa&&_n(Sa,va)},Fn[wn]=function(){qe=!0},Fn[Bn]=function(va){var Sa=xa._focused;Sa&&Ve&&Sa._handleMouseEvent("mouseup",va),qe=Ve=!1},ha.add(y,Fn),ha.add(g,{load:Lt});var Gn=!1,Kn=!1,Wn={doubleclick:"click",mousedrag:"mousemove"},ea=!1,Pn,jn,On,Un,Yn,ta,Jn,pa;function ga(va,Sa,$a,Da,Na,Va,Ua){var Ha=!1,Qa;function Ja(Ra,Fa){if(Ra.responds(Fa)){if(Qa||(Qa=new $n(Fa,Da,Na,Sa||Ra,Va?Na.subtract(Va):null)),Ra.emit(Fa,Qa)&&(Gn=!0,Qa.prevented&&(Kn=!0),Qa.stopped))return Ha=!0}else{var Xa=Wn[Fa];if(Xa)return Ja(Ra,Xa)}}for(;va&&va!==Ua&&!Ja(va,$a);)va=va._parent;return Ha}function ba(va,Sa,$a,Da,Na,Va){return va._project.removeOn($a),Kn=Gn=!1,Yn&&ga(Yn,null,$a,Da,Na,Va)||Sa&&Sa!==Yn&&!Sa.isDescendant(Yn)&&ga(Sa,null,$a==="mousedrag"?"mousemove":$a,Da,Na,Va,Yn)||ga(va,Yn||Sa||va,$a,Da,Na,Va)}var Oa={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:zn,_handleMouseEvent:function(va,Sa,$a){var Da=this._itemEvents,Na=Da.native[va],Va=va==="mousemove",Ua=this._scope.tool,Ha=this;function Qa(ro){return Da.virtual[ro]||Ha.responds(ro)||Ua&&Ua.responds(ro)}Va&&Ve&&Qa("mousedrag")&&(va="mousedrag"),$a||($a=this.getEventPoint(Sa));var Ja=this.getBounds().contains($a),Ra=Na&&Ja&&Ha._project.hitTest($a,{tolerance:0,fill:!0,stroke:!0}),Fa=Ra&&Ra.item||null,Xa=!1,to={};if(to[va.substr(5)]=!0,Na&&Fa!==Un&&(Un&&ga(Un,null,"mouseleave",Sa,$a),Fa&&ga(Fa,null,"mouseenter",Sa,$a),Un=Fa),ea^Ja&&(ga(this,null,Ja?"mouseenter":"mouseleave",Sa,$a),Xa=!0),(Ja||to.drag)&&!$a.equals(jn)&&(ba(this,Fa,Va?va:"mousemove",Sa,$a,jn),Xa=!0),ea=Ja,to.down&&Ja||to.up&&Pn){if(ba(this,Fa,va,Sa,$a,Pn),to.down){if(pa=Fa===ta&&Date.now()-Jn<300,On=ta=Fa,!Kn&&Fa){for(var eo=Fa;eo&&!eo.responds("mousedrag");)eo=eo._parent;eo&&(Yn=Fa)}Pn=$a}else to.up&&(!Kn&&Fa===On&&(Jn=Date.now(),ba(this,Fa,pa?"doubleclick":"click",Sa,$a,Pn),pa=!1),On=Yn=null);ea=!1,Xa=!0}jn=$a,Xa&&Ua&&(Gn=Ua._handleMouseEvent(va,Sa,$a,to)||Gn),Sa.cancelable!==!1&&(Gn&&!to.move||to.down&&Qa("mouseup"))&&Sa.preventDefault()},_handleKeyEvent:function(va,Sa,$a,Da){var Na=this._scope,Va=Na.tool,Ua;function Ha(Qa){Qa.responds(va)&&(ca=Na,Qa.emit(va,Ua=Ua||new bn(va,Sa,$a,Da)))}this.isVisible()&&(Ha(this),Va&&Va.responds(va)&&Ha(Va))},_countItemEvent:function(va,Sa){var $a=this._itemEvents,Da=$a.native,Na=$a.virtual;for(var Va in Oa)Da[Va]=(Da[Va]||0)+(Oa[Va][va]||0)*Sa;Na[va]=(Na[va]||0)+Sa},statics:{updateFocus:Lt,_resetState:function(){Ve=qe=Gn=ea=!1,pe=Oe=Pn=jn=On=Un=Yn=ta=Jn=pa=null}}}}),sa=xa.extend({_class:"CanvasView",initialize:function(Oe,Ve){if(!(Ve instanceof g.HTMLCanvasElement)){var qe=le.read(arguments,1);if(qe.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+k.slice(arguments,1));Ve=oa.getCanvas(qe)}var Et=this._context=Ve.getContext("2d");if(Et.save(),this._pixelRatio=1,!/^off|false$/.test(V.getAttribute(Ve,"hidpi"))){var Lt=g.devicePixelRatio||1,_n=Zn.getPrefixed(Et,"backingStorePixelRatio")||1;this._pixelRatio=Lt/_n}xa.call(this,Oe,Ve),this._needsUpdate=!0},remove:function pe(){return this._context.restore(),pe.base.call(this)},_setElementSize:function pe(Oe,Ve){var qe=this._pixelRatio;if(pe.base.call(this,Oe*qe,Ve*qe),qe!==1){var Et=this._element,Lt=this._context;if(!V.hasAttribute(Et,"resize")){var _n=Et.style;_n.width=Oe+"px",_n.height=Ve+"px"}Lt.restore(),Lt.save(),Lt.scale(qe,qe)}},getContext:function(){return this._context},getPixelSize:function pe(Oe){var Ve=ca.agent,qe;if(Ve&&Ve.firefox)qe=pe.base.call(this,Oe);else{var Et=this._context,Lt=Et.font;Et.font=Oe+" serif",qe=parseFloat(Et.font),Et.font=Lt}return qe},getTextWidth:function(pe,Oe){var Ve=this._context,qe=Ve.font,Et=0;Ve.font=pe;for(var Lt=0,_n=Oe.length;Lt<_n;Lt++)Et=Math.max(Et,Ve.measureText(Oe[Lt]).width);return Ve.font=qe,Et},update:function(){if(!this._needsUpdate)return!1;var pe=this._project,Oe=this._context,Ve=this._viewSize;return Oe.clearRect(0,0,Ve.width+1,Ve.height+1),pe&&pe.draw(Oe,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Hn=k.extend({_class:"Event",initialize:function(Oe){this.event=Oe,this.type=Oe&&Oe.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Xn.modifiers}}),bn=Hn.extend({_class:"KeyEvent",initialize:function(Oe,Ve,qe,Et){this.type=Oe,this.event=Ve,this.key=qe,this.character=Et},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Xn=new function(){var pe={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},Oe={tab:"	",space:" ",enter:"\r"},Ve={},qe={},Et,Lt,_n=new k({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var Cn=ca&&ca.agent;return Cn&&Cn.mac?this.meta:this.control}}});function vn(Cn){var Bn=Cn.key||Cn.keyIdentifier;return Bn=/^U\+/.test(Bn)?String.fromCharCode(parseInt(Bn.substr(2),16)):/^Arrow[A-Z]/.test(Bn)?Bn.substr(5):Bn==="Unidentified"||Bn===r?String.fromCharCode(Cn.keyCode):Bn,pe[Bn]||(Bn.length>1?k.hyphenate(Bn):Bn.toLowerCase())}function wn(Cn,Bn,zn,Fn){var Gn=xa._focused,Kn;if(Ve[Bn]=Cn,Cn?qe[Bn]=zn:delete qe[Bn],Bn.length>1&&(Kn=k.camelize(Bn))in _n){_n[Kn]=Cn;var Wn=ca&&ca.agent;if(Kn==="meta"&&Wn&&Wn.mac)if(Cn)Et={};else{for(var ea in Et)ea in qe&&wn(!1,ea,Et[ea],Fn);Et=null}}else Cn&&Et&&(Et[Bn]=zn);Gn&&Gn._handleKeyEvent(Cn?"keydown":"keyup",Fn,Bn,zn)}return ha.add(y,{keydown:function(Cn){var Bn=vn(Cn),zn=ca&&ca.agent;Bn.length>1||zn&&zn.chrome&&(Cn.altKey||zn.mac&&Cn.metaKey||!zn.mac&&Cn.ctrlKey)?wn(!0,Bn,Oe[Bn]||(Bn.length>1?"":Bn),Cn):Lt=Bn},keypress:function(Cn){if(Lt){var Bn=vn(Cn),zn=Cn.charCode,Fn=zn>=32?String.fromCharCode(zn):Bn.length>1?"":Bn;Bn!==Lt&&(Bn=Fn.toLowerCase()),wn(!0,Bn,Fn,Cn),Lt=null}},keyup:function(Cn){var Bn=vn(Cn);Bn in qe&&wn(!1,Bn,qe[Bn],Cn)}}),ha.add(g,{blur:function(Cn){for(var Bn in qe)wn(!1,Bn,qe[Bn],Cn)}}),{modifiers:_n,isDown:function(Cn){return!!Ve[Cn]}}},$n=Hn.extend({_class:"MouseEvent",initialize:function(Oe,Ve,qe,Et,Lt){this.type=Oe,this.event=Ve,this.point=qe,this.target=Et,this.delta=Lt},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),kt=Hn.extend({_class:"ToolEvent",_item:null,initialize:function(Oe,Ve,qe){this.tool=Oe,this.type=Ve,this.event=qe},_choosePoint:function(pe,Oe){return pe||(Oe?Oe.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(pe){this._point=pe},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(pe){this._lastPoint=pe},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(pe){this._downPoint=pe},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(pe){this._middlePoint=pe},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(pe){this._delta=pe},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(pe){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=pe},getItem:function(){if(!this._item){var pe=this.tool._scope.project.hitTest(this.getPoint());if(pe){for(var Oe=pe.item,Ve=Oe._parent;/^(Group|CompoundPath)$/.test(Ve._class);)Oe=Ve,Ve=Ve._parent;this._item=Oe}}return this._item},setItem:function(pe){this._item=pe},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),At=L.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(Oe){L.call(this),this._moveCount=-1,this._downCount=-1,this.set(Oe)},getMinDistance:function(){return this._minDistance},setMinDistance:function(pe){this._minDistance=pe,pe!=null&&this._maxDistance!=null&&pe>this._maxDistance&&(this._maxDistance=pe)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(pe){this._maxDistance=pe,this._minDistance!=null&&pe!=null&&pe<this._minDistance&&(this._minDistance=pe)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(pe){this._minDistance=this._maxDistance=pe},_handleMouseEvent:function(pe,Oe,Ve,qe){ca=this._scope,qe.drag&&!this.responds(pe)&&(pe="mousemove");var Et=qe.move||qe.drag,Lt=this.responds(pe),_n=!1,vn=this;function wn(Bn,zn){var Fn=Ve,Gn=Et?vn._point:vn._downPoint||Fn;if(Et){if(vn._moveCount>=0&&Fn.equals(Gn))return!1;if(Gn&&(Bn!=null||zn!=null)){var Kn=Fn.subtract(Gn),Wn=Kn.getLength();if(Wn<(Bn||0))return!1;zn&&(Fn=Gn.add(Kn.normalize(Math.min(Wn,zn))))}vn._moveCount++}return vn._point=Fn,vn._lastPoint=Gn||Fn,qe.down&&(vn._moveCount=-1,vn._downPoint=Fn,vn._downCount++),!0}function Cn(){Lt&&(_n=vn.emit(pe,new kt(vn,pe,Oe))||_n)}if(qe.down)wn(),Cn();else if(qe.up)wn(null,this._maxDistance),Cn();else if(Lt)for(;wn(this._minDistance,this._maxDistance);)Cn();return _n}}),Dn=k.extend($,{_class:"Tween",statics:{easings:new k({linear:function(pe){return pe},easeInQuad:function(pe){return pe*pe},easeOutQuad:function(pe){return pe*(2-pe)},easeInOutQuad:function(pe){return pe<.5?2*pe*pe:-1+2*(2-pe)*pe},easeInCubic:function(pe){return pe*pe*pe},easeOutCubic:function(pe){return--pe*pe*pe+1},easeInOutCubic:function(pe){return pe<.5?4*pe*pe*pe:(pe-1)*(2*pe-2)*(2*pe-2)+1},easeInQuart:function(pe){return pe*pe*pe*pe},easeOutQuart:function(pe){return 1- --pe*pe*pe*pe},easeInOutQuart:function(pe){return pe<.5?8*pe*pe*pe*pe:1-8*--pe*pe*pe*pe},easeInQuint:function(pe){return pe*pe*pe*pe*pe},easeOutQuint:function(pe){return 1+--pe*pe*pe*pe*pe},easeInOutQuint:function(pe){return pe<.5?16*pe*pe*pe*pe*pe:1+16*--pe*pe*pe*pe*pe}})},initialize:function pe(Oe,Ve,qe,Et,Lt,_n){this.object=Oe;var vn=typeof Lt,wn=vn==="function";this.type=wn?vn:vn==="string"?Lt:"linear",this.easing=wn?Lt:pe.easings[this.type],this.duration=Et,this.running=!1,this._then=null,this._startTime=null;var Cn=Ve||qe;this._keys=Cn?Object.keys(Cn):[],this._parsedKeys=this._parseKeys(this._keys),this._from=Cn&&this._getState(Ve),this._to=Cn&&this._getState(qe),_n!==!1&&this.start()},then:function(pe){return this._then=pe,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(pe){if(this.running){pe>=1&&(pe=1,this.running=!1);for(var Oe=this.easing(pe),Ve=this._keys,qe=function(Bn){return typeof Bn=="function"?Bn(Oe,pe):Bn},Et=0,Lt=Ve&&Ve.length;Et<Lt;Et++){var _n=Ve[Et],vn=qe(this._from[_n]),wn=qe(this._to[_n]),Cn=vn&&wn&&vn.__add&&wn.__add?wn.__subtract(vn).__multiply(Oe).__add(vn):(wn-vn)*Oe+vn;this._setProperty(this._parsedKeys[_n],Cn)}this.responds("update")&&this.emit("update",new k({progress:pe,factor:Oe})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(pe){var Oe=this._startTime,Ve=Oe?(pe-Oe)/this.duration:0;Oe||(this._startTime=pe),this.update(Ve)},_getState:function(pe){for(var Oe=this._keys,Ve={},qe=0,Et=Oe.length;qe<Et;qe++){var Lt=Oe[qe],_n=this._parsedKeys[Lt],vn=this._getProperty(_n),wn;if(pe){var Cn=this._resolveValue(vn,pe[Lt]);this._setProperty(_n,Cn),wn=this._getProperty(_n),wn=wn&&wn.clone?wn.clone():wn,this._setProperty(_n,vn)}else wn=vn&&vn.clone?vn.clone():vn;Ve[Lt]=wn}return Ve},_resolveValue:function(pe,Oe){if(Oe){if(Array.isArray(Oe)&&Oe.length===2){var Ve=Oe[0];return Ve&&Ve.match&&Ve.match(/^[+\-\*\/]=/)?this._calculate(pe,Ve[0],Oe[1]):Oe}else if(typeof Oe=="string"){var qe=Oe.match(/^[+\-*/]=(.*)/);if(qe){var Et=JSON.parse(qe[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(pe,Oe[0],Et)}}}return Oe},_calculate:function(pe,Oe,Ve){return ca.PaperScript.calculateBinary(pe,Oe,Ve)},_parseKeys:function(pe){for(var Oe={},Ve=0,qe=pe.length;Ve<qe;Ve++){var Et=pe[Ve],Lt=Et.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");Oe[Et]=Lt.split("/")}return Oe},_getProperty:function(pe,Oe){for(var Ve=this.object,qe=0,Et=pe.length-(Oe||0);qe<Et&&Ve;qe++)Ve=Ve[pe[qe]];return Ve},_setProperty:function(pe,Oe){var Ve=this._getProperty(pe,1);Ve&&(Ve[pe[pe.length-1]]=Oe)}}),Qn={request:function(pe){var Oe=new n.XMLHttpRequest;return Oe.open((pe.method||"get").toUpperCase(),pe.url,k.pick(pe.async,!0)),pe.mimeType&&Oe.overrideMimeType(pe.mimeType),Oe.onload=function(){var Ve=Oe.status;Ve===0||Ve===200?pe.onLoad&&pe.onLoad.call(Oe,Oe.responseText):Oe.onerror()},Oe.onerror=function(){var Ve=Oe.status,qe='Could not load "'+pe.url+'" (Status: '+Ve+")";if(pe.onError)pe.onError(qe,Ve);else throw new Error(qe)},Oe.send(null)}},oa=k.exports.CanvasProvider={canvases:[],getCanvas:function(pe,Oe,Ve){if(!g)return null;var qe,Et=!0;typeof pe=="object"&&(Oe=pe.height,pe=pe.width),this.canvases.length?qe=this.canvases.pop():(qe=y.createElement("canvas"),Et=!1);var Lt=qe.getContext("2d",Ve||{});if(!Lt)throw new Error("Canvas "+qe+" is unable to provide a 2D context.");return qe.width===pe&&qe.height===Oe?Et&&Lt.clearRect(0,0,pe+1,Oe+1):(qe.width=pe,qe.height=Oe),Lt.save(),qe},getContext:function(pe,Oe,Ve){var qe=this.getCanvas(pe,Oe,Ve);return qe?qe.getContext("2d",Ve||{}):null},release:function(pe){var Oe=pe&&pe.canvas?pe.canvas:pe;Oe&&Oe.getContext&&(Oe.getContext("2d").restore(),this.canvases.push(Oe))}},na=new function(){var pe=Math.min,Oe=Math.max,Ve=Math.abs,qe,Et,Lt,_n,vn,wn,Cn,Bn,zn,Fn,Gn;function Kn(Yn,ta,Jn){return .2989*Yn+.587*ta+.114*Jn}function Wn(Yn,ta,Jn,ba){var ga=ba-Kn(Yn,ta,Jn);zn=Yn+ga,Fn=ta+ga,Gn=Jn+ga;var ba=Kn(zn,Fn,Gn),Oa=pe(zn,Fn,Gn),va=Oe(zn,Fn,Gn);if(Oa<0){var Sa=ba-Oa;zn=ba+(zn-ba)*ba/Sa,Fn=ba+(Fn-ba)*ba/Sa,Gn=ba+(Gn-ba)*ba/Sa}if(va>255){var $a=255-ba,Da=va-ba;zn=ba+(zn-ba)*$a/Da,Fn=ba+(Fn-ba)*$a/Da,Gn=ba+(Gn-ba)*$a/Da}}function ea(Yn,ta,Jn){return Oe(Yn,ta,Jn)-pe(Yn,ta,Jn)}function Pn(Yn,ta,Jn,pa){var ga=[Yn,ta,Jn],ba=Oe(Yn,ta,Jn),Oa=pe(Yn,ta,Jn),va;Oa=Oa===Yn?0:Oa===ta?1:2,ba=ba===Yn?0:ba===ta?1:2,va=pe(Oa,ba)===0?Oe(Oa,ba)===1?2:1:0,ga[ba]>ga[Oa]?(ga[va]=(ga[va]-ga[Oa])*pa/(ga[ba]-ga[Oa]),ga[ba]=pa):ga[va]=ga[ba]=0,ga[Oa]=0,zn=ga[0],Fn=ga[1],Gn=ga[2]}var jn={multiply:function(){zn=vn*qe/255,Fn=wn*Et/255,Gn=Cn*Lt/255},screen:function(){zn=vn+qe-vn*qe/255,Fn=wn+Et-wn*Et/255,Gn=Cn+Lt-Cn*Lt/255},overlay:function(){zn=vn<128?2*vn*qe/255:255-2*(255-vn)*(255-qe)/255,Fn=wn<128?2*wn*Et/255:255-2*(255-wn)*(255-Et)/255,Gn=Cn<128?2*Cn*Lt/255:255-2*(255-Cn)*(255-Lt)/255},"soft-light":function(){var Yn=qe*vn/255;zn=Yn+vn*(255-(255-vn)*(255-qe)/255-Yn)/255,Yn=Et*wn/255,Fn=Yn+wn*(255-(255-wn)*(255-Et)/255-Yn)/255,Yn=Lt*Cn/255,Gn=Yn+Cn*(255-(255-Cn)*(255-Lt)/255-Yn)/255},"hard-light":function(){zn=qe<128?2*qe*vn/255:255-2*(255-qe)*(255-vn)/255,Fn=Et<128?2*Et*wn/255:255-2*(255-Et)*(255-wn)/255,Gn=Lt<128?2*Lt*Cn/255:255-2*(255-Lt)*(255-Cn)/255},"color-dodge":function(){zn=vn===0?0:qe===255?255:pe(255,255*vn/(255-qe)),Fn=wn===0?0:Et===255?255:pe(255,255*wn/(255-Et)),Gn=Cn===0?0:Lt===255?255:pe(255,255*Cn/(255-Lt))},"color-burn":function(){zn=vn===255?255:qe===0?0:Oe(0,255-(255-vn)*255/qe),Fn=wn===255?255:Et===0?0:Oe(0,255-(255-wn)*255/Et),Gn=Cn===255?255:Lt===0?0:Oe(0,255-(255-Cn)*255/Lt)},darken:function(){zn=vn<qe?vn:qe,Fn=wn<Et?wn:Et,Gn=Cn<Lt?Cn:Lt},lighten:function(){zn=vn>qe?vn:qe,Fn=wn>Et?wn:Et,Gn=Cn>Lt?Cn:Lt},difference:function(){zn=vn-qe,zn<0&&(zn=-zn),Fn=wn-Et,Fn<0&&(Fn=-Fn),Gn=Cn-Lt,Gn<0&&(Gn=-Gn)},exclusion:function(){zn=vn+qe*(255-vn-vn)/255,Fn=wn+Et*(255-wn-wn)/255,Gn=Cn+Lt*(255-Cn-Cn)/255},hue:function(){Pn(qe,Et,Lt,ea(vn,wn,Cn)),Wn(zn,Fn,Gn,Kn(vn,wn,Cn))},saturation:function(){Pn(vn,wn,Cn,ea(qe,Et,Lt)),Wn(zn,Fn,Gn,Kn(vn,wn,Cn))},luminosity:function(){Wn(vn,wn,Cn,Kn(qe,Et,Lt))},color:function(){Wn(qe,Et,Lt,Kn(vn,wn,Cn))},add:function(){zn=pe(vn+qe,255),Fn=pe(wn+Et,255),Gn=pe(Cn+Lt,255)},subtract:function(){zn=Oe(vn-qe,0),Fn=Oe(wn-Et,0),Gn=Oe(Cn-Lt,0)},average:function(){zn=(vn+qe)/2,Fn=(wn+Et)/2,Gn=(Cn+Lt)/2},negation:function(){zn=255-Ve(255-qe-vn),Fn=255-Ve(255-Et-wn),Gn=255-Ve(255-Lt-Cn)}},On=this.nativeModes=k.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(Yn){this[Yn]=!0},{}),Un=oa.getContext(1,1,{willReadFrequently:!0});Un&&(k.each(jn,function(Yn,ta){var Jn=ta==="darken",pa=!1;Un.save();try{Un.fillStyle=Jn?"#300":"#a00",Un.fillRect(0,0,1,1),Un.globalCompositeOperation=ta,Un.globalCompositeOperation===ta&&(Un.fillStyle=Jn?"#a00":"#300",Un.fillRect(0,0,1,1),pa=Un.getImageData(0,0,1,1).data[0]!==Jn?170:51)}catch{}Un.restore(),On[ta]=pa}),oa.release(Un)),this.process=function(Yn,ta,Jn,pa,ga){var ba=ta.canvas,Oa=Yn==="normal";if(Oa||On[Yn])Jn.save(),Jn.setTransform(1,0,0,1,0,0),Jn.globalAlpha=pa,Oa||(Jn.globalCompositeOperation=Yn),Jn.drawImage(ba,ga.x,ga.y),Jn.restore();else{var va=jn[Yn];if(!va)return;for(var Sa=Jn.getImageData(ga.x,ga.y,ba.width,ba.height),$a=Sa.data,Da=ta.getImageData(0,0,ba.width,ba.height).data,Na=0,Va=$a.length;Na<Va;Na+=4){qe=Da[Na],vn=$a[Na],Et=Da[Na+1],wn=$a[Na+1],Lt=Da[Na+2],Cn=$a[Na+2],_n=Da[Na+3],Bn=$a[Na+3],va();var Ua=_n*pa/255,Ha=1-Ua;$a[Na]=Ua*zn+Ha*vn,$a[Na+1]=Ua*Fn+Ha*wn,$a[Na+2]=Ua*Gn+Ha*Cn,$a[Na+3]=_n*pa+Ha*Bn}Jn.putImageData(Sa,ga.x,ga.y)}}},la=new function(){var pe="http://www.w3.org/2000/svg",Oe="http://www.w3.org/2000/xmlns",Ve="http://www.w3.org/1999/xlink",qe={href:Ve,xlink:Oe,xmlns:Oe+"/","xmlns:xlink":Oe+"/"};function Et(vn,wn,Cn){return _n(y.createElementNS(pe,vn),wn,Cn)}function Lt(vn,wn){var Cn=qe[wn],Bn=Cn?vn.getAttributeNS(Cn,wn):vn.getAttribute(wn);return Bn==="null"?null:Bn}function _n(vn,wn,Cn){for(var Bn in wn){var zn=wn[Bn],Fn=qe[Bn];typeof zn=="number"&&Cn&&(zn=Cn.number(zn)),Fn?vn.setAttributeNS(Fn,Bn,zn):vn.setAttribute(Bn,zn)}return vn}return{svg:pe,xmlns:Oe,xlink:Ve,create:Et,get:Lt,set:_n}},ma=k.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(pe,Oe){return!Oe&&(pe instanceof Ln||pe instanceof Ue||pe instanceof ra)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(pe,Oe){var Ve=k.capitalize(Oe),qe=pe[2];this[Oe]={type:pe[1],property:Oe,attribute:pe[0],toSVG:qe,fromSVG:qe&&k.each(qe,function(Et,Lt){this[Et]=Lt},{}),exportFilter:pe[3],get:"get"+Ve,set:"set"+Ve}},{});new function(){var pe;function Oe(jn,On,Un){var Yn=new k,ta=jn.getTranslation();if(On){var Jn;jn.isInvertible()?(jn=jn._shiftless(),Jn=jn._inverseTransform(ta),ta=null):Jn=new re,Yn[Un?"cx":"x"]=Jn.x,Yn[Un?"cy":"y"]=Jn.y}if(!jn.isIdentity()){var pa=jn.decompose();if(pa){var ga=[],ba=pa.rotation,Oa=pa.scaling,va=pa.skewing;ta&&!ta.isZero()&&ga.push("translate("+pe.point(ta)+")"),ba&&ga.push("rotate("+pe.number(ba)+")"),(!ae.isZero(Oa.x-1)||!ae.isZero(Oa.y-1))&&ga.push("scale("+pe.point(Oa)+")"),va.x&&ga.push("skewX("+pe.number(va.x)+")"),va.y&&ga.push("skewY("+pe.number(va.y)+")"),Yn.transform=ga.join(" ")}else Yn.transform="matrix("+jn.getValues().join(",")+")"}return Yn}function Ve(jn,On){for(var Un=Oe(jn._matrix),Yn=jn._children,ta=la.create("g",Un,pe),Jn=0,pa=Yn.length;Jn<pa;Jn++){var ga=Yn[Jn],ba=ea(ga,On);if(ba)if(ga.isClipMask()){var Oa=la.create("clipPath");Oa.appendChild(ba),Kn(ga,Oa,"clip"),la.set(ta,{"clip-path":"url(#"+Oa.id+")"})}else ta.appendChild(ba)}return ta}function qe(jn,On){var Un=Oe(jn._matrix,!0),Yn=jn.getSize(),ta=jn.getImage();return Un.x-=Yn.width/2,Un.y-=Yn.height/2,Un.width=Yn.width,Un.height=Yn.height,Un.href=On.embedImages==!1&&ta&&ta.src||jn.toDataURL(),la.create("image",Un,pe)}function Et(jn,On){var Un=On.matchShapes;if(Un){var Yn=jn.toShape(!1);if(Yn)return Lt(Yn)}var ta=jn._segments,Jn=ta.length,pa,ga=Oe(jn._matrix);if(Un&&Jn>=2&&!jn.hasHandles())if(Jn>2){pa=jn._closed?"polygon":"polyline";for(var ba=[],Oa=0;Oa<Jn;Oa++)ba.push(pe.point(ta[Oa]._point));ga.points=ba.join(" ")}else{pa="line";var va=ta[0]._point,Sa=ta[1]._point;ga.set({x1:va.x,y1:va.y,x2:Sa.x,y2:Sa.y})}else pa="path",ga.d=jn.getPathData(null,On.precision);return la.create(pa,ga,pe)}function Lt(jn){var On=jn._type,Un=jn._radius,Yn=Oe(jn._matrix,!0,On!=="rectangle");if(On==="rectangle"){On="rect";var ta=jn._size,Jn=ta.width,pa=ta.height;Yn.x-=Jn/2,Yn.y-=pa/2,Yn.width=Jn,Yn.height=pa,Un.isZero()&&(Un=null)}return Un&&(On==="circle"?Yn.r=Un:(Yn.rx=Un.width,Yn.ry=Un.height)),la.create(On,Yn,pe)}function _n(jn,On){var Un=Oe(jn._matrix),Yn=jn.getPathData(null,On.precision);return Yn&&(Un.d=Yn),la.create("path",Un,pe)}function vn(jn,On){var Un=Oe(jn._matrix,!0),Yn=jn._definition,ta=Gn(Yn,"symbol"),Jn=Yn._item,pa=Jn.getStrokeBounds();return ta||(ta=la.create("symbol",{viewBox:pe.rectangle(pa)}),ta.appendChild(ea(Jn,On)),Kn(Yn,ta,"symbol")),Un.href="#"+ta.id,Un.x+=pa.x,Un.y+=pa.y,Un.width=pa.width,Un.height=pa.height,Un.overflow="visible",la.create("use",Un,pe)}function wn(jn){var On=Gn(jn,"color");if(!On){var Un=jn.getGradient(),Yn=Un._radial,ta=jn.getOrigin(),Jn=jn.getDestination(),pa;if(Yn){pa={cx:ta.x,cy:ta.y,r:ta.getDistance(Jn)};var ga=jn.getHighlight();ga&&(pa.fx=ga.x,pa.fy=ga.y)}else pa={x1:ta.x,y1:ta.y,x2:Jn.x,y2:Jn.y};pa.gradientUnits="userSpaceOnUse",On=la.create((Yn?"radial":"linear")+"Gradient",pa,pe);for(var ba=Un._stops,Oa=0,va=ba.length;Oa<va;Oa++){var Sa=ba[Oa],$a=Sa._color,Da=$a.getAlpha(),Na=Sa._offset;pa={offset:Na??Oa/(va-1)},$a&&(pa["stop-color"]=$a.toCSS(!0)),Da<1&&(pa["stop-opacity"]=Da),On.appendChild(la.create("stop",pa,pe))}Kn(jn,On,"color")}return"url(#"+On.id+")"}function Cn(jn){var On=la.create("text",Oe(jn._matrix,!0),pe);return On.textContent=jn._content,On}var Bn={Group:Ve,Layer:Ve,Raster:qe,Path:Et,Shape:Lt,CompoundPath:_n,SymbolItem:vn,PointText:Cn};function zn(jn,On,Un,Yn){var ta={},Jn=!Yn&&jn.getParent(),pa=[];return jn._name!=null&&(ta.id=jn._name),k.each(ma,function(ga){var ba=ga.get,Oa=ga.type,va=jn[ba]();if(ga.exportFilter?ga.exportFilter(jn,va):Un.reduceAttributes==!1||!Jn||!k.equals(Jn[ba](),va)){if(Oa==="color"&&va!=null){var Sa=va.getAlpha();Sa<1&&(ta[ga.attribute+"-opacity"]=Sa)}Oa==="style"?pa.push(ga.attribute+": "+va):ta[ga.attribute]=va==null?"none":Oa==="color"?va.gradient?wn(va):va.toCSS(!0):Oa==="array"?va.join(","):Oa==="lookup"?ga.toSVG[va]:va}}),pa.length&&(ta.style=pa.join(";")),ta.opacity===1&&delete ta.opacity,jn._visible||(ta.visibility="hidden"),la.set(On,ta,pe)}var Fn;function Gn(jn,On){return Fn||(Fn={ids:{},svgs:{}}),jn&&Fn.svgs[On+"-"+(jn._id||jn.__id||(jn.__id=oe.get("svg")))]}function Kn(jn,On,Un){Fn||Gn();var Yn=Fn.ids[Un]=(Fn.ids[Un]||0)+1;On.id=Un+"-"+Yn,Fn.svgs[Un+"-"+(jn._id||jn.__id)]=On}function Wn(jn,On){var Un=jn,Yn=null;if(Fn){Un=jn.nodeName.toLowerCase()==="svg"&&jn;for(var ta in Fn.svgs)Yn||(Un||(Un=la.create("svg"),Un.appendChild(jn)),Yn=Un.insertBefore(la.create("defs"),Un.firstChild)),Yn.appendChild(Fn.svgs[ta]);Fn=null}return On.asString?new n.XMLSerializer().serializeToString(Un):Un}function ea(jn,On,Un){var Yn=Bn[jn._class],ta=Yn&&Yn(jn,On);if(ta){var Jn=On.onExport;Jn&&(ta=Jn(jn,ta,On)||ta);var pa=JSON.stringify(jn._data);pa&&pa!=="{}"&&pa!=="null"&&ta.setAttribute("data-paper-data",pa)}return ta&&zn(jn,ta,On,Un)}function Pn(jn){return jn||(jn={}),pe=new j(jn.precision),jn}Ce.inject({exportSVG:function(jn){return jn=Pn(jn),Wn(ea(this,jn,!0),jn)}}),$e.inject({exportSVG:function(jn){jn=Pn(jn);var On=this._children,Un=this.getView(),Yn=k.pick(jn.bounds,"view"),ta=jn.matrix||Yn==="view"&&Un._matrix,Jn=ta&&xe.read([ta]),pa=Yn==="view"?new he([0,0],Un.getViewSize()):Yn==="content"?Ce._getBounds(On,Jn,{stroke:!0}).rect:he.read([Yn],0,{readNull:!0}),ga={version:"1.1",xmlns:la.svg,"xmlns:xlink":la.xlink};pa&&(ga.width=pa.width,ga.height=pa.height,(pa.x||pa.x===0||pa.y||pa.y===0)&&(ga.viewBox=pe.rectangle(pa)));var ba=la.create("svg",ga,pe),Oa=ba;Jn&&!Jn.isIdentity()&&(Oa=ba.appendChild(la.create("g",Oe(Jn),pe)));for(var va=0,Sa=On.length;va<Sa;va++)Oa.appendChild(ea(On[va],jn,!0));return Wn(ba,jn)}})},new function(){var pe={},Oe;function Ve(On,Un,Yn,ta,Jn,pa){var ga=la.get(On,Un)||pa,ba=ga==null?ta?null:Yn?"":0:Yn?ga:parseFloat(ga);return/%\s*$/.test(ga)?ba/100*(Jn?1:Oe[/x|^width/.test(Un)?"width":"height"]):ba}function qe(On,Un,Yn,ta,Jn,pa,ga){return Un=Ve(On,Un||"x",!1,ta,Jn,pa),Yn=Ve(On,Yn||"y",!1,ta,Jn,ga),ta&&(Un==null||Yn==null)?null:new re(Un,Yn)}function Et(On,Un,Yn,ta,Jn){return Un=Ve(On,Un||"width",!1,ta,Jn),Yn=Ve(On,Yn||"height",!1,ta,Jn),ta&&(Un==null||Yn==null)?null:new le(Un,Yn)}function Lt(On,Un,Yn){return On==="none"?null:Un==="number"?parseFloat(On):Un==="array"?On?On.split(/[\s,]+/g).map(parseFloat):[]:Un==="color"?ea(On)||On:Un==="lookup"?Yn[On]:On}function _n(On,Un,Yn,ta){var Jn=On.childNodes,pa=Un==="clippath",ga=Un==="defs",ba=new Ie,Oa=ba._project,va=Oa._currentStyle,Sa=[];if(!pa&&!ga&&(ba=Wn(ba,On,ta),Oa._currentStyle=ba._style.clone()),ta)for(var $a=On.querySelectorAll("defs"),Da=0,Na=$a.length;Da<Na;Da++)Pn($a[Da],Yn,!1);for(var Da=0,Na=Jn.length;Da<Na;Da++){var Va=Jn[Da],Ua;Va.nodeType===1&&!/^defs$/i.test(Va.nodeName)&&(Ua=Pn(Va,Yn,!1))&&!(Ua instanceof Dt)&&Sa.push(Ua)}return ba.addChildren(Sa),pa&&(ba=Wn(ba.reduce(),On,ta)),Oa._currentStyle=va,(pa||ga)&&(ba.remove(),ba=null),ba}function vn(On,Un){for(var Yn=On.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),ta=[],Jn=0,pa=Yn.length;Jn<pa;Jn+=2)ta.push(new re(parseFloat(Yn[Jn]),parseFloat(Yn[Jn+1])));var ga=new Sn(ta);return Un==="polygon"&&ga.closePath(),ga}function wn(On){return Ln.create(On.getAttribute("d"))}function Cn(On,Un){var Yn=(Ve(On,"href",!0)||"").substring(1),ta=Un==="radialgradient",Jn;if(Yn)Jn=pe[Yn].getGradient(),Jn._radial^ta&&(Jn=Jn.clone(),Jn._radial=ta);else{for(var pa=On.childNodes,ga=[],ba=0,Oa=pa.length;ba<Oa;ba++){var va=pa[ba];va.nodeType===1&&ga.push(Wn(new Nn,va))}Jn=new aa(ga,ta)}var Sa,$a,Da,Na=Ve(On,"gradientUnits",!0)!=="userSpaceOnUse";ta?(Sa=qe(On,"cx","cy",!1,Na,"50%","50%"),$a=Sa.add(Ve(On,"r",!1,!1,Na,"50%"),0),Da=qe(On,"fx","fy",!0,Na)):(Sa=qe(On,"x1","y1",!1,Na,"0%","0%"),$a=qe(On,"x2","y2",!1,Na,"100%","0%"));var Va=Wn(new ua(Jn,Sa,$a,Da),On);return Va._scaleToBounds=Na,null}var Bn={"#document":function(On,Un,Yn,ta){for(var Jn=On.childNodes,pa=0,ga=Jn.length;pa<ga;pa++){var ba=Jn[pa];if(ba.nodeType===1)return Pn(ba,Yn,ta)}},g:_n,svg:_n,clippath:_n,polygon:vn,polyline:vn,path:wn,lineargradient:Cn,radialgradient:Cn,image:function(On){var Un=new Pt(Ve(On,"href",!0));return Un.on("load",function(){var Yn=Et(On);this.setSize(Yn);var ta=qe(On).add(Yn.divide(2));this._matrix.append(new xe().translate(ta))}),Un},symbol:function(On,Un,Yn,ta){return new Dt(_n(On,Un,Yn,ta),!0)},defs:_n,use:function(On){var Un=(Ve(On,"href",!0)||"").substring(1),Yn=pe[Un],ta=qe(On);return Yn?Yn instanceof Dt?Yn.place(ta):Yn.clone().translate(ta):null},circle:function(On){return new Ue.Circle(qe(On,"cx","cy"),Ve(On,"r"))},ellipse:function(On){return new Ue.Ellipse({center:qe(On,"cx","cy"),radius:Et(On,"rx","ry")})},rect:function(On){return new Ue.Rectangle(new he(qe(On),Et(On)),Et(On,"rx","ry"))},line:function(On){return new Sn.Line(qe(On,"x1","y1"),qe(On,"x2","y2"))},text:function(On){var Un=new da(qe(On).add(qe(On,"dx","dy")));return Un.setContent(On.textContent.trim()||""),Un},switch:_n};function zn(On,Un,Yn,ta){if(On.transform){for(var Jn=(ta.getAttribute(Yn)||"").split(/\)\s*/g),pa=new xe,ga=0,ba=Jn.length;ga<ba;ga++){var Oa=Jn[ga];if(!Oa)break;for(var va=Oa.split(/\(\s*/),Sa=va[0].trim(),$a=va[1].split(/[\s,]+/g),Da=0,Na=$a.length;Da<Na;Da++)$a[Da]=parseFloat($a[Da]);switch(Sa){case"matrix":pa.append(new xe($a[0],$a[1],$a[2],$a[3],$a[4],$a[5]));break;case"rotate":pa.rotate($a[0],$a[1]||0,$a[2]||0);break;case"translate":pa.translate($a[0],$a[1]||0);break;case"scale":pa.scale($a);break;case"skewX":pa.skew($a[0],0);break;case"skewY":pa.skew(0,$a[0]);break}}On.transform(pa)}}function Fn(On,Un,Yn){var ta=Yn==="fill-opacity"?"getFillColor":"getStrokeColor",Jn=On[ta]&&On[ta]();Jn&&Jn.setAlpha(parseFloat(Un))}var Gn=k.set(k.each(ma,function(On){this[On.attribute]=function(Un,Yn){if(Un[On.set]&&(Un[On.set](Lt(Yn,On.type,On.fromSVG)),On.type==="color")){var ta=Un[On.get]();if(ta&&ta._scaleToBounds){var Jn=Un.getBounds();ta.transform(new xe().translate(Jn.getPoint()).scale(Jn.getSize()))}}}},{}),{id:function(On,Un){pe[Un]=On,On.setName&&On.setName(Un)},"clip-path":function(On,Un){var Yn=ea(Un);if(Yn)if(Yn=Yn.clone(),Yn.setClipMask(!0),On instanceof Ie)On.insertChild(0,Yn);else return new Ie(Yn,On)},gradientTransform:zn,transform:zn,"fill-opacity":Fn,"stroke-opacity":Fn,visibility:function(On,Un){On.setVisible&&On.setVisible(Un==="visible")},display:function(On,Un){On.setVisible&&On.setVisible(Un!==null)},"stop-color":function(On,Un){On.setColor&&On.setColor(Un)},"stop-opacity":function(On,Un){On._color&&On._color.setAlpha(parseFloat(Un))},offset:function(On,Un){if(On.setOffset){var Yn=Un.match(/(.*)%$/);On.setOffset(Yn?Yn[1]/100:parseFloat(Un))}},viewBox:function(On,Un,Yn,ta,Jn){var pa=new he(Lt(Un,"array")),ga=Et(ta,null,null,!0),ba,Oa;if(On instanceof Ie){var va=ga?ga.divide(pa.getSize()):1,Oa=new xe().scale(va).translate(pa.getPoint().negate());ba=On}else On instanceof Dt&&(ga&&pa.setSize(ga),ba=On._item);if(ba){if(Kn(ta,"overflow",Jn)!=="visible"){var Sa=new Ue.Rectangle(pa);Sa.setClipMask(!0),ba.addChild(Sa)}Oa&&ba.transform(Oa)}}});function Kn(On,Un,Yn){var ta=On.attributes[Un],Jn=ta&&ta.value;if(!Jn&&On.style){var pa=k.camelize(Un);Jn=On.style[pa],!Jn&&Yn.node[pa]!==Yn.parent[pa]&&(Jn=Yn.node[pa])}return Jn?Jn==="none"?null:Jn:r}function Wn(On,Un,Yn){var ta=Un.parentNode,Jn={node:Zn.getStyles(Un)||{},parent:!Yn&&!/^defs$/i.test(ta.tagName)&&Zn.getStyles(ta)||{}};return k.each(Gn,function(pa,ga){var ba=Kn(Un,ga,Jn);On=ba!==r&&pa(On,ba,ga,Un,Jn)||On}),On}function ea(On){var Un=On&&On.match(/\((?:["'#]*)([^"')]+)/),Yn=Un&&Un[1],ta=Yn&&pe[g?Yn.replace(g.location.href.split("#")[0]+"#",""):Yn];return ta&&ta._scaleToBounds&&(ta=ta.clone(),ta._scaleToBounds=!0),ta}function Pn(On,Un,Yn){var ta=On.nodeName.toLowerCase(),Jn=ta!=="#document",pa=y.body,ga,ba,Oa;Yn&&Jn&&(Oe=ca.getView().getSize(),Oe=Et(On,null,null,!0)||Oe,ga=la.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),ba=On.parentNode,Oa=On.nextSibling,ga.appendChild(On),pa.appendChild(ga));var va=ca.settings,Sa=va.applyMatrix,$a=va.insertItems;va.applyMatrix=!1,va.insertItems=!1;var Da=Bn[ta],Na=Da&&Da(On,ta,Un,Yn)||null;if(va.insertItems=$a,va.applyMatrix=Sa,Na){Jn&&!(Na instanceof Ie)&&(Na=Wn(Na,On,Yn));var Va=Un.onImport,Ua=Jn&&On.getAttribute("data-paper-data");Va&&(Na=Va(On,Na,Un)||Na),Un.expandShapes&&Na instanceof Ue&&(Na.remove(),Na=Na.toPath()),Ua&&(Na._data=JSON.parse(Ua))}return ga&&(pa.removeChild(ga),ba&&(Oa?ba.insertBefore(On,Oa):ba.appendChild(On))),Yn&&(pe={},Na&&k.pick(Un.applyMatrix,Sa)&&Na.matrix.apply(!0,!0)),Na}function jn(On,Un,Yn){if(!On)return null;Un=typeof Un=="function"?{onLoad:Un}:Un||{};var ta=ca,Jn=null;function pa(va){try{var Sa=typeof va=="object"?va:new n.DOMParser().parseFromString(va.trim(),"image/svg+xml");if(!Sa.nodeName)throw Sa=null,new Error("Unsupported SVG source: "+On);ca=ta,Jn=Pn(Sa,Un,!0),(!Un||Un.insert!==!1)&&Yn._insertItem(r,Jn);var $a=Un.onLoad;$a&&$a(Jn,va)}catch(Da){ga(Da)}}function ga(va,Sa){var $a=Un.onError;if($a)$a(va,Sa);else throw new Error(va)}if(typeof On=="string"&&!/^[\s\S]*</.test(On)){var ba=y.getElementById(On);ba?pa(ba):Qn.request({url:On,async:!0,onLoad:pa,onError:ga})}else if(typeof File<"u"&&On instanceof File){var Oa=new FileReader;return Oa.onload=function(){pa(Oa.result)},Oa.onerror=function(){ga(Oa.error)},Oa.readAsText(On)}else pa(On);return Jn}Ce.inject({importSVG:function(On,Un){return jn(On,Un,this)}}),$e.inject({importSVG:function(On,Un){return this.activate(),jn(On,Un,this)}})},k.exports.PaperScript=function(){var pe=this,Oe=pe.acorn;if(!Oe&&typeof commonjsRequire<"u")try{Oe=requireAcorn()}catch{}if(!Oe){var Ve,qe;Oe=Ve=qe={},function(Wn,ea){if(typeof Ve=="object"&&typeof qe=="object")return ea(Ve);if(typeof r=="function"&&r.amd)return r(["exports"],ea);ea(Wn.acorn||(Wn.acorn={}))}(this,function(Wn){Wn.version="0.5.0";var ea,Pn,jn,On;Wn.parse=function(wa,Pa){return Pn=String(wa),jn=Pn.length,Yn(Pa),Ar(),gs(ea.program)};var Un=Wn.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function Yn(wa){ea=wa||{};for(var Pa in Un)Object.prototype.hasOwnProperty.call(ea,Pa)||(ea[Pa]=Un[Pa]);On=ea.sourceFile||null}var ta=Wn.getLineInfo=function(wa,Pa){for(var Aa=1,za=0;;){nr.lastIndex=za;var lo=nr.exec(wa);if(lo&&lo.index<Pa)++Aa,za=lo.index+lo[0].length;else break}return{line:Aa,column:Pa-za}};Wn.tokenize=function(wa,Pa){Pn=String(wa),jn=Pn.length,Yn(Pa),Ar();var Aa={};function za(lo){return Ua=ga,Ko(lo),Aa.start=pa,Aa.end=ga,Aa.startLoc=ba,Aa.endLoc=Oa,Aa.type=va,Aa.value=Sa,Aa}return za.jumpTo=function(lo,uo){if(Jn=lo,ea.locations){Da=1,Na=nr.lastIndex=0;for(var po;(po=nr.exec(Pn))&&po.index<lo;)++Da,Na=po.index+po[0].length}$a=uo,ar()},za};var Jn,pa,ga,ba,Oa,va,Sa,$a,Da,Na,Va,Ua,Ha,Qa,Ja,Ra;function Fa(wa,Pa){var Aa=ta(Pn,wa);Pa+=" ("+Aa.line+":"+Aa.column+")";var za=new SyntaxError(Pa);throw za.pos=wa,za.loc=Aa,za.raisedAt=Jn,za}var Xa=[],to={type:"num"},eo={type:"regexp"},ro={type:"string"},oo={type:"name"},so={type:"eof"},co={keyword:"break"},io={keyword:"case",beforeExpr:!0},Ka={keyword:"catch"},yo={keyword:"continue"},$o={keyword:"debugger"},Oo={keyword:"default"},bo={keyword:"do",isLoop:!0},So={keyword:"else",beforeExpr:!0},Io={keyword:"finally"},Po={keyword:"for",isLoop:!0},fa={keyword:"function"},ka={keyword:"if"},ya={keyword:"return",beforeExpr:!0},Ta={keyword:"switch"},Ia={keyword:"throw",beforeExpr:!0},Ea={keyword:"try"},La={keyword:"var"},Ga={keyword:"while",isLoop:!0},ja={keyword:"with"},Wa={keyword:"new",beforeExpr:!0},qa={keyword:"this"},ao={keyword:"null",atomValue:null},fo={keyword:"true",atomValue:!0},no={keyword:"false",atomValue:!1},_o={keyword:"in",binop:7,beforeExpr:!0},ko={break:co,case:io,catch:Ka,continue:yo,debugger:$o,default:Oo,do:bo,else:So,finally:Io,for:Po,function:fa,if:ka,return:ya,switch:Ta,throw:Ia,try:Ea,var:La,while:Ga,with:ja,null:ao,true:fo,false:no,new:Wa,in:_o,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:qa,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},wo={type:"[",beforeExpr:!0},Do={type:"]"},Ro={type:"{",beforeExpr:!0},Fo={type:"}"},Lo={type:"(",beforeExpr:!0},Fe={type:")"},kn={type:",",beforeExpr:!0},qn={type:";",beforeExpr:!0},ia={type:":",beforeExpr:!0},Ca={type:"."},Ba={type:"?",beforeExpr:!0},Ma={binop:10,beforeExpr:!0},Ya={isAssign:!0,beforeExpr:!0},Za={isAssign:!0,beforeExpr:!0},ho={postfix:!0,prefix:!0,isUpdate:!0},go={prefix:!0,beforeExpr:!0},To={binop:1,beforeExpr:!0},Go={binop:2,beforeExpr:!0},Xo={binop:3,beforeExpr:!0},Ho={binop:4,beforeExpr:!0},tr={binop:5,beforeExpr:!0},Wo={binop:6,beforeExpr:!0},Qo={binop:7,beforeExpr:!0},qr={binop:8,beforeExpr:!0},Yr={binop:9,prefix:!0,beforeExpr:!0},Xr={binop:10,beforeExpr:!0};Wn.tokTypes={bracketL:wo,bracketR:Do,braceL:Ro,braceR:Fo,parenL:Lo,parenR:Fe,comma:kn,semi:qn,colon:ia,dot:Ca,question:Ba,slash:Ma,eq:Ya,name:oo,eof:so,num:to,regexp:eo,string:ro};for(var Nr in ko)Wn.tokTypes["_"+Nr]=ko[Nr];function rr(wa){wa=wa.split(" ");var Pa="",Aa=[];e:for(var za=0;za<wa.length;++za){for(var lo=0;lo<Aa.length;++lo)if(Aa[lo][0].length==wa[za].length){Aa[lo].push(wa[za]);continue e}Aa.push([wa[za]])}function uo(Co){if(Co.length==1)return Pa+="return str === "+JSON.stringify(Co[0])+";";Pa+="switch(str){";for(var Uo=0;Uo<Co.length;++Uo)Pa+="case "+JSON.stringify(Co[Uo])+":";Pa+="return true}return false;"}if(Aa.length>3){Aa.sort(function(Co,Uo){return Uo.length-Co.length}),Pa+="switch(str.length){";for(var za=0;za<Aa.length;++za){var po=Aa[za];Pa+="case "+po[0].length+":",uo(po)}Pa+="}"}else uo(wa);return new Function("str",Pa)}var Zr=rr("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Kr=rr("class enum extends super const export import"),Ir=rr("implements interface let package private protected public static yield"),ur=rr("eval arguments"),Jr=rr("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),ts=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Br="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",ns="------------------------------------------------------------------------------------------------------------------------------------------",Vr=new RegExp("["+Br+"]"),as=new RegExp("["+Br+ns+"]"),dr=/[\n\r\u2028\u2029]/,nr=/\r\n|[\n\r\u2028\u2029]/g,fr=Wn.isIdentifierStart=function(wa){return wa<65?wa===36:wa<91?!0:wa<97?wa===95:wa<123?!0:wa>=170&&Vr.test(String.fromCharCode(wa))},Mr=Wn.isIdentifierChar=function(wa){return wa<48?wa===36:wa<58?!0:wa<65?!1:wa<91?!0:wa<97?wa===95:wa<123?!0:wa>=170&&as.test(String.fromCharCode(wa))};function Zo(){this.line=Da,this.column=Jn-Na}function Ar(){Da=1,Jn=Na=0,$a=!0,ar()}function Bo(wa,Pa){ga=Jn,ea.locations&&(Oa=new Zo),va=wa,ar(),Sa=Pa,$a=wa.beforeExpr}function os(){var wa=ea.onComment&&ea.locations&&new Zo,Pa=Jn,Aa=Pn.indexOf("*/",Jn+=2);if(Aa===-1&&Fa(Jn-2,"Unterminated comment"),Jn=Aa+2,ea.locations){nr.lastIndex=Pa;for(var za;(za=nr.exec(Pn))&&za.index<Jn;)++Da,Na=za.index+za[0].length}ea.onComment&&ea.onComment(!0,Pn.slice(Pa+2,Aa),Pa,Jn,wa,ea.locations&&new Zo)}function yr(){for(var wa=Jn,Pa=ea.onComment&&ea.locations&&new Zo,Aa=Pn.charCodeAt(Jn+=2);Jn<jn&&Aa!==10&&Aa!==13&&Aa!==8232&&Aa!==8233;)++Jn,Aa=Pn.charCodeAt(Jn);ea.onComment&&ea.onComment(!1,Pn.slice(wa+2,Jn),wa,Jn,Pa,ea.locations&&new Zo)}function ar(){for(;Jn<jn;){var wa=Pn.charCodeAt(Jn);if(wa===32)++Jn;else if(wa===13){++Jn;var Pa=Pn.charCodeAt(Jn);Pa===10&&++Jn,ea.locations&&(++Da,Na=Jn)}else if(wa===10||wa===8232||wa===8233)++Jn,ea.locations&&(++Da,Na=Jn);else if(wa>8&&wa<14)++Jn;else if(wa===47){var Pa=Pn.charCodeAt(Jn+1);if(Pa===42)os();else if(Pa===47)yr();else break}else if(wa===160)++Jn;else if(wa>=5760&&ts.test(String.fromCharCode(wa)))++Jn;else break}}function rs(){var wa=Pn.charCodeAt(Jn+1);return wa>=48&&wa<=57?Lr(!0):(++Jn,Bo(Ca))}function ss(){var wa=Pn.charCodeAt(Jn+1);return $a?(++Jn,Rr()):wa===61?Vo(Za,2):Vo(Ma,1)}function is(){var wa=Pn.charCodeAt(Jn+1);return wa===61?Vo(Za,2):Vo(Xr,1)}function ls(wa){var Pa=Pn.charCodeAt(Jn+1);return Pa===wa?Vo(wa===124?To:Go,2):Pa===61?Vo(Za,2):Vo(wa===124?Xo:tr,1)}function cs(){var wa=Pn.charCodeAt(Jn+1);return wa===61?Vo(Za,2):Vo(Ho,1)}function us(wa){var Pa=Pn.charCodeAt(Jn+1);return Pa===wa?Pa==45&&Pn.charCodeAt(Jn+2)==62&&dr.test(Pn.slice(Ua,Jn))?(Jn+=3,yr(),ar(),Ko()):Vo(ho,2):Pa===61?Vo(Za,2):Vo(Yr,1)}function ds(wa){var Pa=Pn.charCodeAt(Jn+1),Aa=1;return Pa===wa?(Aa=wa===62&&Pn.charCodeAt(Jn+2)===62?3:2,Pn.charCodeAt(Jn+Aa)===61?Vo(Za,Aa+1):Vo(qr,Aa)):Pa==33&&wa==60&&Pn.charCodeAt(Jn+2)==45&&Pn.charCodeAt(Jn+3)==45?(Jn+=4,yr(),ar(),Ko()):(Pa===61&&(Aa=Pn.charCodeAt(Jn+2)===61?3:2),Vo(Qo,Aa))}function fs(wa){var Pa=Pn.charCodeAt(Jn+1);return Pa===61?Vo(Wo,Pn.charCodeAt(Jn+2)===61?3:2):Vo(wa===61?Ya:go,1)}function ps(wa){switch(wa){case 46:return rs();case 40:return++Jn,Bo(Lo);case 41:return++Jn,Bo(Fe);case 59:return++Jn,Bo(qn);case 44:return++Jn,Bo(kn);case 91:return++Jn,Bo(wo);case 93:return++Jn,Bo(Do);case 123:return++Jn,Bo(Ro);case 125:return++Jn,Bo(Fo);case 58:return++Jn,Bo(ia);case 63:return++Jn,Bo(Ba);case 48:var Pa=Pn.charCodeAt(Jn+1);if(Pa===120||Pa===88)return hs();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Lr(!1);case 34:case 39:return ms(wa);case 47:return ss();case 37:case 42:return is();case 124:case 38:return ls(wa);case 94:return cs();case 43:case 45:return us(wa);case 60:case 62:return ds(wa);case 61:case 33:return fs(wa);case 126:return Vo(go,1)}return!1}function Ko(wa){if(wa?Jn=pa+1:pa=Jn,ea.locations&&(ba=new Zo),wa)return Rr();if(Jn>=jn)return Bo(so);var Pa=Pn.charCodeAt(Jn);if(fr(Pa)||Pa===92)return zr();var Aa=ps(Pa);if(Aa===!1){var za=String.fromCharCode(Pa);if(za==="\\"||Vr.test(za))return zr();Fa(Jn,"Unexpected character '"+za+"'")}return Aa}function Vo(wa,Pa){var Aa=Pn.slice(Jn,Jn+Pa);Jn+=Pa,Bo(wa,Aa)}function Rr(){for(var lo="",wa,Pa,Aa=Jn;;){Jn>=jn&&Fa(Aa,"Unterminated regular expression");var za=Pn.charAt(Jn);if(dr.test(za)&&Fa(Aa,"Unterminated regular expression"),wa)wa=!1;else{if(za==="[")Pa=!0;else if(za==="]"&&Pa)Pa=!1;else if(za==="/"&&!Pa)break;wa=za==="\\"}++Jn}var lo=Pn.slice(Aa,Jn);++Jn;var uo=Fr();uo&&!/^[gmsiy]*$/.test(uo)&&Fa(Aa,"Invalid regexp flag");try{var po=new RegExp(lo,uo)}catch(Co){Co instanceof SyntaxError&&Fa(Aa,Co.message),Fa(Co)}return Bo(eo,po)}function sr(wa,Pa){for(var Aa=Jn,za=0,lo=0,uo=Pa??1/0;lo<uo;++lo){var po=Pn.charCodeAt(Jn),Co;if(po>=97?Co=po-97+10:po>=65?Co=po-65+10:po>=48&&po<=57?Co=po-48:Co=1/0,Co>=wa)break;++Jn,za=za*wa+Co}return Jn===Aa||Pa!=null&&Jn-Aa!==Pa?null:za}function hs(){Jn+=2;var wa=sr(16);return wa==null&&Fa(pa+2,"Expected hexadecimal number"),fr(Pn.charCodeAt(Jn))&&Fa(Jn,"Identifier directly after number"),Bo(to,wa)}function Lr(wa){var Pa=Jn,Aa=!1,za=Pn.charCodeAt(Jn)===48;!wa&&sr(10)===null&&Fa(Pa,"Invalid number"),Pn.charCodeAt(Jn)===46&&(++Jn,sr(10),Aa=!0);var lo=Pn.charCodeAt(Jn);(lo===69||lo===101)&&(lo=Pn.charCodeAt(++Jn),(lo===43||lo===45)&&++Jn,sr(10)===null&&Fa(Pa,"Invalid number"),Aa=!0),fr(Pn.charCodeAt(Jn))&&Fa(Jn,"Identifier directly after number");var uo=Pn.slice(Pa,Jn),po;return Aa?po=parseFloat(uo):!za||uo.length===1?po=parseInt(uo,10):/[89]/.test(uo)||Ra?Fa(Pa,"Invalid number"):po=parseInt(uo,8),Bo(to,po)}function ms(wa){Jn++;for(var Pa="";;){Jn>=jn&&Fa(pa,"Unterminated string constant");var Aa=Pn.charCodeAt(Jn);if(Aa===wa)return++Jn,Bo(ro,Pa);if(Aa===92){Aa=Pn.charCodeAt(++Jn);var za=/^[0-7]+/.exec(Pn.slice(Jn,Jn+3));for(za&&(za=za[0]);za&&parseInt(za,8)>255;)za=za.slice(0,-1);if(za==="0"&&(za=null),++Jn,za)Ra&&Fa(Jn-2,"Octal literal in strict mode"),Pa+=String.fromCharCode(parseInt(za,8)),Jn+=za.length-1;else switch(Aa){case 110:Pa+=`
`;break;case 114:Pa+="\r";break;case 120:Pa+=String.fromCharCode(pr(2));break;case 117:Pa+=String.fromCharCode(pr(4));break;case 85:Pa+=String.fromCharCode(pr(8));break;case 116:Pa+="	";break;case 98:Pa+="\b";break;case 118:Pa+="\v";break;case 102:Pa+="\f";break;case 48:Pa+="\0";break;case 13:Pn.charCodeAt(Jn)===10&&++Jn;case 10:ea.locations&&(Na=Jn,++Da);break;default:Pa+=String.fromCharCode(Aa);break}}else(Aa===13||Aa===10||Aa===8232||Aa===8233)&&Fa(pa,"Unterminated string constant"),Pa+=String.fromCharCode(Aa),++Jn}}function pr(wa){var Pa=sr(16,wa);return Pa===null&&Fa(pa,"Bad character escape sequence"),Pa}var or;function Fr(){or=!1;for(var wa,Pa=!0,Aa=Jn;;){var za=Pn.charCodeAt(Jn);if(Mr(za))or&&(wa+=Pn.charAt(Jn)),++Jn;else if(za===92){or||(wa=Pn.slice(Aa,Jn)),or=!0,Pn.charCodeAt(++Jn)!=117&&Fa(Jn,"Expecting Unicode escape sequence \\uXXXX"),++Jn;var lo=pr(4),uo=String.fromCharCode(lo);uo||Fa(Jn-1,"Invalid Unicode escape"),(Pa?fr(lo):Mr(lo))||Fa(Jn-4,"Invalid Unicode escape"),wa+=uo}else break;Pa=!1}return or?wa:Pn.slice(Aa,Jn)}function zr(){var wa=Fr(),Pa=oo;return!or&&Jr(wa)&&(Pa=ko[wa]),Bo(Pa,wa)}function xo(){Va=pa,Ua=ga,Ha=Oa,Ko()}function br(wa){if(Ra=wa,Jn=pa,ea.locations)for(;Jn<Na;)Na=Pn.lastIndexOf(`
`,Na-2)+1,--Da;ar(),Ko()}function Ur(){this.type=null,this.start=pa,this.end=null}function Gr(){this.start=ba,this.end=null,On!==null&&(this.source=On)}function Mo(){var wa=new Ur;return ea.locations&&(wa.loc=new Gr),ea.directSourceFile&&(wa.sourceFile=ea.directSourceFile),ea.ranges&&(wa.range=[pa,0]),wa}function qo(wa){var Pa=new Ur;return Pa.start=wa.start,ea.locations&&(Pa.loc=new Gr,Pa.loc.start=wa.loc.start),ea.ranges&&(Pa.range=[wa.range[0],0]),Pa}function vo(wa,Pa){return wa.type=Pa,wa.end=Ua,ea.locations&&(wa.loc.end=Ha),ea.ranges&&(wa.range[1]=Ua),wa}function xr(wa){return ea.ecmaVersion>=5&&wa.type==="ExpressionStatement"&&wa.expression.type==="Literal"&&wa.expression.value==="use strict"}function Eo(wa){if(va===wa)return xo(),!0}function hr(){return!ea.strictSemicolons&&(va===so||va===Fo||dr.test(Pn.slice(Ua,pa)))}function Jo(){!Eo(qn)&&!hr()&&jo()}function No(wa){va===wa?xo():jo()}function jo(){Fa(pa,"Unexpected token")}function mr(wa){wa.type!=="Identifier"&&wa.type!=="MemberExpression"&&Fa(wa.start,"Assigning to rvalue"),Ra&&wa.type==="Identifier"&&ur(wa.name)&&Fa(wa.start,"Assigning to "+wa.name+" in strict mode")}function gs(wa){Va=Ua=Jn,ea.locations&&(Ha=new Zo),Qa=Ra=null,Ja=[],Ko();var Pa=wa||Mo(),Aa=!0;for(wa||(Pa.body=[]);va!==so;){var za=zo();Pa.body.push(za),Aa&&xr(za)&&br(!0),Aa=!1}return vo(Pa,"Program")}var Cr={kind:"loop"},vs={kind:"switch"};function zo(){(va===Ma||va===Za&&Sa=="/=")&&Ko(!0);var wa=va,Pa=Mo();switch(wa){case co:case yo:xo();var Aa=wa===co;Eo(qn)||hr()?Pa.label=null:va!==oo?jo():(Pa.label=Yo(),Jo());for(var za=0;za<Ja.length;++za){var lo=Ja[za];if((Pa.label==null||lo.name===Pa.label.name)&&(lo.kind!=null&&(Aa||lo.kind==="loop")||Pa.label&&Aa))break}return za===Ja.length&&Fa(Pa.start,"Unsyntactic "+wa.keyword),vo(Pa,Aa?"BreakStatement":"ContinueStatement");case $o:return xo(),Jo(),vo(Pa,"DebuggerStatement");case bo:return xo(),Ja.push(Cr),Pa.body=zo(),Ja.pop(),No(Ga),Pa.test=ir(),Jo(),vo(Pa,"DoWhileStatement");case Po:if(xo(),Ja.push(Cr),No(Lo),va===qn)return wr(Pa,null);if(va===La){var uo=Mo();return xo(),Hr(uo,!0),vo(uo,"VariableDeclaration"),uo.declarations.length===1&&Eo(_o)?jr(Pa,uo):wr(Pa,uo)}var uo=Ao(!1,!0);return Eo(_o)?(mr(uo),jr(Pa,uo)):wr(Pa,uo);case fa:return xo(),Pr(Pa,!0);case ka:return xo(),Pa.test=ir(),Pa.consequent=zo(),Pa.alternate=Eo(So)?zo():null,vo(Pa,"IfStatement");case ya:return!Qa&&!ea.allowReturnOutsideFunction&&Fa(pa,"'return' outside of function"),xo(),Eo(qn)||hr()?Pa.argument=null:(Pa.argument=Ao(),Jo()),vo(Pa,"ReturnStatement");case Ta:xo(),Pa.discriminant=ir(),Pa.cases=[],No(Ro),Ja.push(vs);for(var po,Co;va!=Fo;)if(va===io||va===Oo){var Uo=va===io;po&&vo(po,"SwitchCase"),Pa.cases.push(po=Mo()),po.consequent=[],xo(),Uo?po.test=Ao():(Co&&Fa(Va,"Multiple default clauses"),Co=!0,po.test=null),No(ia)}else po||jo(),po.consequent.push(zo());return po&&vo(po,"SwitchCase"),xo(),Ja.pop(),vo(Pa,"SwitchStatement");case Ia:return xo(),dr.test(Pn.slice(Ua,pa))&&Fa(Ua,"Illegal newline after throw"),Pa.argument=Ao(),Jo(),vo(Pa,"ThrowStatement");case Ea:if(xo(),Pa.block=lr(),Pa.handler=null,va===Ka){var er=Mo();xo(),No(Lo),er.param=Yo(),Ra&&ur(er.param.name)&&Fa(er.param.start,"Binding "+er.param.name+" in strict mode"),No(Fe),er.guard=null,er.body=lr(),Pa.handler=vo(er,"CatchClause")}return Pa.guardedHandlers=Xa,Pa.finalizer=Eo(Io)?lr():null,!Pa.handler&&!Pa.finalizer&&Fa(Pa.start,"Missing catch or finally clause"),vo(Pa,"TryStatement");case La:return xo(),Hr(Pa),Jo(),vo(Pa,"VariableDeclaration");case Ga:return xo(),Pa.test=ir(),Ja.push(Cr),Pa.body=zo(),Ja.pop(),vo(Pa,"WhileStatement");case ja:return Ra&&Fa(pa,"'with' in strict mode"),xo(),Pa.object=ir(),Pa.body=zo(),vo(Pa,"WithStatement");case Ro:return lr();case qn:return xo(),vo(Pa,"EmptyStatement");default:var Tr=Sa,gr=Ao();if(wa===oo&&gr.type==="Identifier"&&Eo(ia)){for(var za=0;za<Ja.length;++za)Ja[za].name===Tr&&Fa(gr.start,"Label '"+Tr+"' is already declared");var Ss=va.isLoop?"loop":va===Ta?"switch":null;return Ja.push({name:Tr,kind:Ss}),Pa.body=zo(),Ja.pop(),Pa.label=gr,vo(Pa,"LabeledStatement")}else return Pa.expression=gr,Jo(),vo(Pa,"ExpressionStatement")}}function ir(){No(Lo);var wa=Ao();return No(Fe),wa}function lr(wa){var Pa=Mo(),Aa=!0,za=!1,lo;for(Pa.body=[],No(Ro);!Eo(Fo);){var uo=zo();Pa.body.push(uo),Aa&&wa&&xr(uo)&&(lo=za,br(za=!0)),Aa=!1}return za&&!lo&&br(!1),vo(Pa,"BlockStatement")}function wr(wa,Pa){return wa.init=Pa,No(qn),wa.test=va===qn?null:Ao(),No(qn),wa.update=va===Fe?null:Ao(),No(Fe),wa.body=zo(),Ja.pop(),vo(wa,"ForStatement")}function jr(wa,Pa){return wa.left=Pa,wa.right=Ao(),No(Fe),wa.body=zo(),Ja.pop(),vo(wa,"ForInStatement")}function Hr(wa,Pa){for(wa.declarations=[],wa.kind="var";;){var Aa=Mo();if(Aa.id=Yo(),Ra&&ur(Aa.id.name)&&Fa(Aa.id.start,"Binding "+Aa.id.name+" in strict mode"),Aa.init=Eo(Ya)?Ao(!0,Pa):null,wa.declarations.push(vo(Aa,"VariableDeclarator")),!Eo(kn))break}return wa}function Ao(wa,Pa){var Aa=Sr(Pa);if(!wa&&va===kn){var za=qo(Aa);for(za.expressions=[Aa];Eo(kn);)za.expressions.push(Sr(Pa));return vo(za,"SequenceExpression")}return Aa}function Sr(wa){var Pa=_s(wa);if(va.isAssign){var Aa=qo(Pa);return Aa.operator=Sa,Aa.left=Pa,xo(),Aa.right=Sr(wa),mr(Pa),vo(Aa,"AssignmentExpression")}return Pa}function _s(wa){var Pa=ys(wa);if(Eo(Ba)){var Aa=qo(Pa);return Aa.test=Pa,Aa.consequent=Ao(!0),No(ia),Aa.alternate=Ao(!0,wa),vo(Aa,"ConditionalExpression")}return Pa}function ys(wa){return kr(Or(),-1,wa)}function kr(wa,Pa,Aa){var za=va.binop;if(za!=null&&(!Aa||va!==_o)&&za>Pa){var lo=qo(wa);lo.left=wa,lo.operator=Sa;var uo=va;xo(),lo.right=kr(Or(),za,Aa);var po=vo(lo,uo===To||uo===Go?"LogicalExpression":"BinaryExpression");return kr(po,Pa,Aa)}return wa}function Or(){if(va.prefix){var wa=Mo(),Pa=va.isUpdate;return wa.operator=Sa,wa.prefix=!0,$a=!0,xo(),wa.argument=Or(),Pa?mr(wa.argument):Ra&&wa.operator==="delete"&&wa.argument.type==="Identifier"&&Fa(wa.start,"Deleting local variable in strict mode"),vo(wa,Pa?"UpdateExpression":"UnaryExpression")}for(var Aa=xs();va.postfix&&!hr();){var wa=qo(Aa);wa.operator=Sa,wa.prefix=!1,wa.argument=Aa,mr(Aa),xo(),Aa=vo(wa,"UpdateExpression")}return Aa}function xs(){return cr($r())}function cr(wa,Pa){if(Eo(Ca)){var Aa=qo(wa);return Aa.object=wa,Aa.property=Yo(!0),Aa.computed=!1,cr(vo(Aa,"MemberExpression"),Pa)}else if(Eo(wo)){var Aa=qo(wa);return Aa.object=wa,Aa.property=Ao(),Aa.computed=!0,No(Do),cr(vo(Aa,"MemberExpression"),Pa)}else if(!Pa&&Eo(Lo)){var Aa=qo(wa);return Aa.callee=wa,Aa.arguments=Er(Fe,!1),cr(vo(Aa,"CallExpression"),Pa)}else return wa}function $r(){switch(va){case qa:var za=Mo();return xo(),vo(za,"ThisExpression");case oo:return Yo();case to:case ro:case eo:var za=Mo();return za.value=Sa,za.raw=Pn.slice(pa,ga),xo(),vo(za,"Literal");case ao:case fo:case no:var za=Mo();return za.value=va.atomValue,za.raw=va.keyword,xo(),vo(za,"Literal");case Lo:var wa=ba,Pa=pa;xo();var Aa=Ao();return Aa.start=Pa,Aa.end=ga,ea.locations&&(Aa.loc.start=wa,Aa.loc.end=Oa),ea.ranges&&(Aa.range=[Pa,ga]),No(Fe),Aa;case wo:var za=Mo();return xo(),za.elements=Er(Do,!0,!0),vo(za,"ArrayExpression");case Ro:return ws();case fa:var za=Mo();return xo(),Pr(za,!1);case Wa:return Cs();default:jo()}}function Cs(){var wa=Mo();return xo(),wa.callee=cr($r(),!0),Eo(Lo)?wa.arguments=Er(Fe,!1):wa.arguments=Xa,vo(wa,"NewExpression")}function ws(){var wa=Mo(),Pa=!0,Aa=!1;for(wa.properties=[],xo();!Eo(Fo);){if(Pa)Pa=!1;else if(No(kn),ea.allowTrailingCommas&&Eo(Fo))break;var za={key:Wr()},lo=!1,uo;if(Eo(ia)?(za.value=Ao(!0),uo=za.kind="init"):ea.ecmaVersion>=5&&za.key.type==="Identifier"&&(za.key.name==="get"||za.key.name==="set")?(lo=Aa=!0,uo=za.kind=za.key.name,za.key=Wr(),va!==Lo&&jo(),za.value=Pr(Mo(),!1)):jo(),za.key.type==="Identifier"&&(Ra||Aa))for(var po=0;po<wa.properties.length;++po){var Co=wa.properties[po];if(Co.key.name===za.key.name){var Uo=uo==Co.kind||lo&&Co.kind==="init"||uo==="init"&&(Co.kind==="get"||Co.kind==="set");Uo&&!Ra&&uo==="init"&&Co.kind==="init"&&(Uo=!1),Uo&&Fa(za.key.start,"Redefinition of property")}}wa.properties.push(za)}return vo(wa,"ObjectExpression")}function Wr(){return va===to||va===ro?$r():Yo(!0)}function Pr(wa,Pa){va===oo?wa.id=Yo():Pa?jo():wa.id=null,wa.params=[];var Aa=!0;for(No(Lo);!Eo(Fe);)Aa?Aa=!1:No(kn),wa.params.push(Yo());var za=Qa,lo=Ja;if(Qa=!0,Ja=[],wa.body=lr(!0),Qa=za,Ja=lo,Ra||wa.body.body.length&&xr(wa.body.body[0]))for(var uo=wa.id?-1:0;uo<wa.params.length;++uo){var po=uo<0?wa.id:wa.params[uo];if((Ir(po.name)||ur(po.name))&&Fa(po.start,"Defining '"+po.name+"' in strict mode"),uo>=0)for(var Co=0;Co<uo;++Co)po.name===wa.params[Co].name&&Fa(po.start,"Argument name clash in strict mode")}return vo(wa,Pa?"FunctionDeclaration":"FunctionExpression")}function Er(wa,Pa,Aa){for(var za=[],lo=!0;!Eo(wa);){if(lo)lo=!1;else if(No(kn),Pa&&ea.allowTrailingCommas&&Eo(wa))break;Aa&&va===kn?za.push(null):za.push(Ao(!0))}return za}function Yo(wa){var Pa=Mo();return wa&&ea.forbidReserved=="everywhere"&&(wa=!1),va===oo?(!wa&&(ea.forbidReserved&&(ea.ecmaVersion===3?Zr:Kr)(Sa)||Ra&&Ir(Sa))&&Pn.slice(pa,ga).indexOf("\\")==-1&&Fa(pa,"The keyword '"+Sa+"' is reserved"),Pa.name=Sa):wa&&va.keyword?Pa.name=va.keyword:jo(),$a=!1,xo(),vo(Pa,"Identifier")}}),Oe.version||(Oe=null)}function Et(Wn,ea){return(pe.acorn||Oe).parse(Wn,ea)}var Lt={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},_n={"-":"__negate","+":"__self"},vn=k.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(Wn){this["__"+Wn]="#"+Wn},{__self:function(){return this}});re.inject(vn),le.inject(vn),ua.inject(vn);function wn(Wn,ea,Pn){var jn=Lt[ea];if(Wn&&Wn[jn]){var On=Wn[jn](Pn);return ea==="!="?!On:On}switch(ea){case"+":return Wn+Pn;case"-":return Wn-Pn;case"*":return Wn*Pn;case"/":return Wn/Pn;case"%":return Wn%Pn;case"==":return Wn==Pn;case"!=":return Wn!=Pn}}function Cn(Wn,ea){var Pn=_n[Wn];if(ea&&ea[Pn])return ea[Pn]();switch(Wn){case"+":return+ea;case"-":return-ea}}function Bn(Wn,ea){if(!Wn)return"";ea=ea||{};var Pn=[];function jn(Ra){for(var Fa=0,Xa=Pn.length;Fa<Xa;Fa++){var to=Pn[Fa];if(to[0]>=Ra)break;Ra+=to[1]}return Ra}function On(Ra){return Wn.substring(jn(Ra.range[0]),jn(Ra.range[1]))}function Un(Ra,Fa){return Wn.substring(jn(Ra.range[1]),jn(Fa.range[0]))}function Yn(Ra,Fa){for(var Xa=jn(Ra.range[0]),to=jn(Ra.range[1]),eo=0,ro=Pn.length-1;ro>=0;ro--)if(Xa>Pn[ro][0]){eo=ro+1;break}Pn.splice(eo,0,[Xa,Fa.length-to+Xa]),Wn=Wn.substring(0,Xa)+Fa+Wn.substring(to)}function ta(Ra,Fa){switch(Ra.type){case"UnaryExpression":if(Ra.operator in _n&&Ra.argument.type!=="Literal"){var Xa=On(Ra.argument);Yn(Ra,'$__("'+Ra.operator+'", '+Xa+")")}break;case"BinaryExpression":if(Ra.operator in Lt&&Ra.left.type!=="Literal"){var to=On(Ra.left),eo=On(Ra.right),ro=Un(Ra.left,Ra.right),oo=Ra.operator;Yn(Ra,"__$__("+to+","+ro.replace(new RegExp("\\"+oo),'"'+oo+'"')+", "+eo+")")}break;case"UpdateExpression":case"AssignmentExpression":var so=Fa&&Fa.type;if(!(so==="ForStatement"||so==="BinaryExpression"&&/^[=!<>]/.test(Fa.operator)||so==="MemberExpression"&&Fa.computed)){if(Ra.type==="UpdateExpression"){var Xa=On(Ra.argument),co="__$__("+Xa+', "'+Ra.operator[0]+'", 1)',io=Xa+" = "+co;Ra.prefix?io="("+io+")":(so==="AssignmentExpression"||so==="VariableDeclarator"||so==="BinaryExpression")&&(On(Fa.left||Fa.id)===Xa&&(io=co),io=Xa+"; "+io),Yn(Ra,io)}else if(/^.=$/.test(Ra.operator)&&Ra.left.type!=="Literal"){var to=On(Ra.left),eo=On(Ra.right),co=to+" = __$__("+to+', "'+Ra.operator[0]+'", '+eo+")";Yn(Ra,/^\(.*\)$/.test(On(Ra))?"("+co+")":co)}}break}}function Jn(Ra){switch(Ra.type){case"ExportDefaultDeclaration":Yn({range:[Ra.start,Ra.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var Fa=Ra.declaration,Xa=Ra.specifiers;if(Fa){var to=Fa.declarations;to&&(to.forEach(function(ro){Yn(ro,"module.exports."+On(ro))}),Yn({range:[Ra.start,Fa.start+Fa.kind.length]},""))}else if(Xa){var eo=Xa.map(function(ro){var oo=On(ro);return"module.exports."+oo+" = "+oo+"; "}).join("");eo&&Yn(Ra,eo)}break}}function pa(Ra,Fa,Xa){if(Ra){for(var to in Ra)if(to!=="range"&&to!=="loc"){var eo=Ra[to];if(Array.isArray(eo))for(var ro=0,oo=eo.length;ro<oo;ro++)pa(eo[ro],Ra,Xa);else eo&&typeof eo=="object"&&pa(eo,Ra,Xa)}Xa.operatorOverloading!==!1&&ta(Ra,Fa),Xa.moduleExports!==!1&&Jn(Ra)}}function ga(Ra){var Fa="",Xa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ra=(Math.abs(Ra)<<1)+(Ra<0?1:0);Ra||!Fa;){var to=Ra&31;Ra>>=5,Ra&&(to|=32),Fa+=Xa[to]}return Fa}var ba=ea.url||"",Oa=ea.sourceMaps,va=ea.paperFeatures||{},Sa=ea.source||Wn,$a=ea.offset||0,Da=ca.agent,Na=Da.versionNumber,Va=!1,Ua=/\r\n|\n|\r/mg,Ha;if(Oa&&(Da.chrome&&Na>=30||Da.webkit&&Na>=537.76||Da.firefox&&Na>=23||Da.node)){if(Da.node)$a-=2;else if(g&&ba&&!g.location.href.indexOf(ba)){var Qa=y.getElementsByTagName("html")[0].innerHTML;$a=Qa.substr(0,Qa.indexOf(Wn)+1).match(Ua).length+1}Va=$a>0&&!(Da.chrome&&Na>=36||Da.safari&&Na>=600||Da.firefox&&Na>=40||Da.node);var Ja=["AA"+ga(Va?0:$a)+"A"];Ja.length=(Wn.match(Ua)||[]).length+1+(Va?$a:0),Ha={version:3,file:ba,names:[],mappings:Ja.join(";AACA"),sourceRoot:"",sources:[ba],sourcesContent:[Sa]}}return(va.operatorOverloading!==!1||va.moduleExports!==!1)&&pa(Et(Wn,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,va),Ha&&(Va&&(Wn=new Array($a+1).join(`
`)+Wn),/^(inline|both)$/.test(Oa)&&(Wn+=`
//# sourceMappingURL=data:application/json;base64,`+n.btoa(unescape(encodeURIComponent(JSON.stringify(Ha))))),Wn+=`
//# sourceURL=`+(ba||"paperscript")),{url:ba,source:Sa,code:Wn,map:Ha}}function zn(Wn,ea,Pn){ca=ea;var jn=ea.getView(),On=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(Wn)&&!/\bnew\s+Tool\b/.test(Wn)?new At:null,Un=On?On._events:[],Yn=["onFrame","onResize"].concat(Un),ta=[],Jn=[],pa,ga=typeof Wn=="object"?Wn:Bn(Wn,Pn);Wn=ga.code;function ba(Na,Va){for(var Ua in Na)(Va||!/^_/.test(Ua))&&new RegExp("([\\b\\s\\W]|^)"+Ua.replace(/\$/g,"\\$")+"\\b").test(Wn)&&(ta.push(Ua),Jn.push(Na[Ua]))}ba({__$__:wn,$__:Cn,paper:ea,tool:On},!0),ba(ea),Wn="var module = { exports: {} }; "+Wn;var $a=k.each(Yn,function(Na){new RegExp("\\s+"+Na+"\\b").test(Wn)&&(ta.push(Na),this.push("module.exports."+Na+" = "+Na+";"))},[]).join(`
`);$a&&(Wn+=`
`+$a),Wn+=`
return module.exports;`;var Oa=ca.agent;if(y&&(Oa.chrome||Oa.firefox&&Oa.versionNumber<40)){var va=y.createElement("script"),Sa=y.head||y.getElementsByTagName("head")[0];Oa.firefox&&(Wn=`
`+Wn),va.appendChild(y.createTextNode("document.__paperscript__ = function("+ta+") {"+Wn+`
}`)),Sa.appendChild(va),pa=y.__paperscript__,delete y.__paperscript__,Sa.removeChild(va)}else pa=Function(ta,Wn);var $a=pa&&pa.apply(ea,Jn),Da=$a||{};return k.each(Un,function(Na){var Va=Da[Na];Va&&(On[Na]=Va)}),jn&&(Da.onResize&&jn.setOnResize(Da.onResize),jn.emit("resize",{size:jn.size,delta:new re}),Da.onFrame&&jn.setOnFrame(Da.onFrame),jn.requestUpdate()),$a}function Fn(Wn){if(/^text\/(?:x-|)paperscript$/.test(Wn.type)&&V.getAttribute(Wn,"ignore")!=="true"){var ea=V.getAttribute(Wn,"canvas"),Pn=y.getElementById(ea),jn=Wn.src||Wn.getAttribute("data-src"),On=V.hasAttribute(Wn,"async"),Un="data-paper-scope";if(!Pn)throw new Error('Unable to find canvas with id "'+ea+'"');var Yn=V.get(Pn.getAttribute(Un))||new V().setup(Pn);return Pn.setAttribute(Un,Yn._id),jn?Qn.request({url:jn,async:On,mimeType:"text/plain",onLoad:function(ta){zn(ta,Yn,jn)}}):zn(Wn.innerHTML,Yn,Wn.baseURI),Wn.setAttribute("data-paper-ignore","true"),Yn}}function Gn(){k.each(y&&y.getElementsByTagName("script"),Fn)}function Kn(Wn){return Wn?Fn(Wn):Gn()}return g&&(y.readyState==="complete"?setTimeout(Gn):ha.add(g,{load:Gn})),{compile:Bn,execute:zn,load:Kn,parse:Et,calculateBinary:wn,calculateUnary:Cn}}.call(this);var ca=new(V.inject(k.exports,{Base:k,Numerical:ae,Key:Xn,DomEvent:ha,DomElement:Zn,document:y,window:g,Symbol:Dt,PlacedSymbol:hn}));return ca.agent.node&&require$$2(ca),typeof r=="function"&&r.amd?r("paper",ca):e&&(e.exports=ca),ca}).call(commonjsGlobal$1,typeof self=="object"?self:null)})(paperFull);var paperFullExports=paperFull.exports;const paper=getDefaultExportFromCjs(paperFullExports),activePanel=ref("globalVariables"),constants$2=ref([]),constantsMap$2=new ConstantsMap(constants$2.value),PanelType={GlobalVariables:"globalVariables",ConditionFilter:"conditionFilter",Script:"script",StrokeReplace:"strokeReplace",StyleSwitch:"styleSwitch"},setActivePanel=e=>{activePanel.value=e},sampleCharacters=ref(""),isEditingSample=ref(!1),sampleCharactersList=ref([]),originSampleCharactersList=ref([]),updateSampleCharactersList=()=>{sampleCharactersList.value=[];for(let e=0;e<selectedFile.value.characterList.length;e++){const n=selectedFile.value.characterList[e];if(sampleCharacters.value.indexOf(n.character.text)!==-1){const r=clone(n);for(let g=0;g<r.components.length;g++){const y=r.components[g];if(y.type==="glyph"){const $=y.value.parameters.parameters;for(let V=0;V<$.length;V++){const L=$[V];L.type===ParameterType.Constant&&(L.type=ParameterType.AdvancedEditConstant)}}}sampleCharactersList.value.push(r)}}originSampleCharactersList.value=clone(sampleCharactersList.value)},updateCharactersAndPreview$1=()=>{for(let e=0;e<sampleCharactersList.value.length;e++){const n=sampleCharactersList.value[e],r=document.getElementById(`advanced-edit-preview-canvas-${n.uuid}`);if(!r)return;const g=componentsToContours(orderedListWithItemsForCharacterFile(n),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.advanceWidth,advancedEdit:!0},{x:0,y:0},!1,!0,!0);renderPreview2(r,g)}},updateCharactersList=()=>{total$1.value=selectedFile.value.characterList.length+Math.min(visibleCount.value,selectedFile.value.characterList.length),loaded$1.value=0,loading$1.value=!0,constants.value=clone(constants$2.value),constantsMap.update(constants.value);let e=0;const n=()=>{loaded$1.value++;const r=selectedFile.value.characterList[e];if(componentsToContours(orderedListWithItemsForCharacterFile(r),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.advanceWidth},{x:0,y:0},!1,!0,!0),e++,e<selectedFile.value.characterList.length)e%100===0?requestAnimationFrame(n):n();else{emitter.emit("renderPreviewCanvas");return}};requestAnimationFrame(n)},editChar$1=e=>{},generateCharacterTemplate$2=e=>{const n=document.getElementById("playground-character-template").querySelector(".char-preview").cloneNode(!0);return n.className=`character-preview character-${e.uuid}`,n.querySelector(".playground-preview-canvas").id=`advanced-edit-preview-canvas-${e.uuid}`,n.addEventListener("click",()=>editChar$1(e.uuid)),n},updatePreviewList=()=>{const e=document.getElementById("advanced-edit-characters-list");e.innerHTML="",sampleCharactersList.value.map(n=>{e.appendChild(generateCharacterTemplate$2(n));const r=document.getElementById(`advanced-edit-preview-canvas-${n.uuid}`);if(!r)return;const g=componentsToContours(orderedListWithItemsForCharacterFile(n),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.advanceWidth,advancedEdit:!0},{x:0,y:0},!1,!0,!0);renderPreview2(r,g)})},getScript$2=e=>{if(e.script)return e.script;if(e.script_reference){if(scripts_map[e.script_reference])return scripts_map[e.script_reference];{const n=getGlyphByUUID(e.script_reference);if(n.script)return n.script}}return null},executeScript$2=e=>{try{if(e._o&&e._o.tempData)return;const n=new CustomGlyph(e),r=n._glyph;for(let g=0;g<e.components.length;g++)e.components[g].type==="glyph"&&executeScript$2(e.components[g].value);window.glyph=n,constantsMap$2.update(constants$2.value),window.constantsMap=constantsMap$2;try{const g=getScript$2(e);new Function(`${g}
script_${e.uuid.replaceAll("-","_")} (glyph, constantsMap, FP)`)()}catch(g){console.error(g)}window.glyph=null,window.constantsMap=null}catch(n){console.warn(n)}},selectedStrokeUUID=ref(null),selectedStroke=computed(()=>strokeList.value.find(e=>e.uuid===selectedStrokeUUID.value)),strokeMap=new Map,strokeList=ref([]),onStrokeReplacement=ref(!1),getStrokeList=()=>{for(let e=0;e<selectedFile.value.characterList.length;e++){const n=selectedFile.value.characterList[e].components;for(let r=0;r<n.length;r++){const g=n[r];if(g.type==="glyph"){const y=g.value.uuid;if(!strokeMap.has(y)){const k=getGlyphByUUID(y);k&&(strokeMap.set(y,k),strokeList.value.push({uuid:y,name:g.value.name,style:g.value.style,replaced:!1,replacement:null,currentUUID:y}))}}}}},renderStrokePreview=e=>{if(e){const n=document.querySelectorAll(`.stroke-preview-${e}`);if(!n)return;for(let r=0;r<n.length;r++){const g=n[r];if(!g)return;const y=strokeMap.get(e);y._o||executeScript(y);const k=componentsToContours(y._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(g,k)}}else for(let n=0;n<strokeList.value.length;n++){const r=strokeList.value[n],g=document.querySelectorAll(`.stroke-preview-${r.uuid}`);if(!g)return;for(let y=0;y<g.length;y++){const k=g[y];if(!k)return;const $=strokeMap.get(r.uuid);$._o||executeScript($);const V=componentsToContours($._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(k,V)}}},setReplacementStroke=async e=>{selectedStroke.value.replaced&&(selectedStroke.value.currentUUID=selectedStroke.value.replacement.uuid),selectedStroke.value.replaced=!0;const n=getGlyphByUUID(e);strokeMap.set(e,n),selectedStroke.value.replacement={uuid:e,name:n.name,style:n.style},updateCharactersAndPreview_strokeReplace(),await nextTick(),renderStrokePreview(e)},replaceStrokeForCharacter=(e,n)=>{const r=n.uuid,g=n.replacement.uuid,y=strokeMap.get(g);for(let k=0;k<e.components.length;k++){const $=e.components[k];if($.type==="glyph"&&$.value.uuid===r){const V=clone(y);for(let L=0;L<V.parameters.parameters.length;L++){const z=V.parameters.parameters[L],j=$.value.parameters.parameters.find(ae=>ae.name===z.name);j.type!==ParameterType.Constant&&j.type!==ParameterType.AdvancedEditConstant?z.value=j.value:j.type===ParameterType.AdvancedEditConstant?(z.type=ParameterType.AdvancedEditConstant,z.value=j.value):j.type===ParameterType.Constant&&(z.type=ParameterType.Constant,z.value=j.value)}$.value=V,executeScript(V)}}},replaceStrokesForCharacter=e=>{for(let n=0;n<strokeList.value.length;n++){const r=strokeList.value[n];r.replaced&&replaceStrokeForCharacter(e,r)}},updatePreviewList_strokeReplace=()=>{const e=document.getElementById("advanced-edit-characters-list");e.innerHTML="",sampleCharactersList.value=[],originSampleCharactersList.value.map(n=>{e.appendChild(generateCharacterTemplate$2(n));const r=document.getElementById(`advanced-edit-preview-canvas-${n.uuid}`);if(!r)return;const g=clone(n);replaceStrokesForCharacter(g),sampleCharactersList.value.push(g);const y=componentsToContours(orderedListWithItemsForCharacterFile(g),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.advanceWidth,advancedEdit:!1},{x:0,y:0},!1,!0,!0);renderPreview2(r,y)})},updateCharactersAndPreview_strokeReplace=()=>{sampleCharactersList.value=[];for(let e=0;e<originSampleCharactersList.value.length;e++){const n=clone(originSampleCharactersList.value[e]),r=document.getElementById(`advanced-edit-preview-canvas-${n.uuid}`);if(!r)return;replaceStrokesForCharacter(n),sampleCharactersList.value.push(n);const g=componentsToContours(orderedListWithItemsForCharacterFile(n),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.advanceWidth,advancedEdit:!1},{x:0,y:0},!1,!0,!0);renderPreview2(r,g)}},updateCharactersList_strokeReplace=()=>{total$1.value=selectedFile.value.characterList.length+Math.min(visibleCount.value,selectedFile.value.characterList.length),loaded$1.value=0,loading$1.value=!0,constants.value=clone(constants$2.value),constantsMap.update(constants.value);let e=0;const n=()=>{loaded$1.value++;const r=selectedFile.value.characterList[e];if(replaceStrokesForCharacter(r),componentsToContours(orderedListWithItemsForCharacterFile(r),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.advanceWidth},{x:0,y:0},!1,!0,!0),e++,e<selectedFile.value.characterList.length)e%100===0?requestAnimationFrame(n):n();else{emitter.emit("renderPreviewCanvas");return}};requestAnimationFrame(n)},selectedStyleUUID=ref("default"),selectedStyle=computed(()=>styles$3.value.find(e=>e.uuid===selectedStyleUUID.value)),styles$3=ref([]),getStrokeListByStyle=e=>{const n=[];for(let r=0;r<stroke_glyphs.value.length;r++)stroke_glyphs.value[r].style===e.strokeStyle&&n.push(stroke_glyphs.value[r]);return n},switchStyle_init=e=>{for(let n=0;n<e.constants.length;n++)for(let r=0;r<constants$2.value.length;r++){const g=constants$2.value[r];g.name===e.constants[n].name&&(g.value=e.constants[n].value)}},switchStyle=(e,n)=>{if(!n)return;for(let g=0;g<n.constants.length;g++)for(let y=0;y<constants$2.value.length;y++){const k=constants$2.value[y];k.name===n.constants[g].name&&(k.value=n.constants[g].value)}const r=getStrokeListByStyle(n);for(let g=0;g<r.length;g++){const y=r[g],k=y.name;for(let $=0;$<e.components.length;$++){const V=e.components[$];if(V.type==="glyph"&&V.value.name===k){const L=clone(y);for(let z=0;z<L.parameters.parameters.length;z++){const j=L.parameters.parameters[z],ae=V.value.parameters.parameters.find(oe=>oe.name===j.name);if(ae&&ae.type!==ParameterType.AdvancedEditConstant){let oe=!1;for(let re=0;re<n.parameters.length;re++)j.name===n.parameters[re].name&&(j.value=n.parameters[re].value,oe=!0);oe||(j.value=ae.value)}else ae&&ae.type===ParameterType.AdvancedEditConstant&&(j.type=ParameterType.AdvancedEditConstant,j.value=ae.value)}V.value=L,executeScript(L)}}}},switchStyle2=(e,n)=>{const r=getStrokeListByStyle(n);for(let g=0;g<r.length;g++){const y=r[g],k=y.name;for(let $=0;$<e.components.length;$++){const V=e.components[$];if(V.type==="glyph"&&V.value.name===k){const L=clone(y);for(let z=0;z<L.parameters.parameters.length;z++){const j=L.parameters.parameters[z],ae=V.value.parameters.parameters.find(oe=>oe.name===j.name);if(ae&&ae.type!==ParameterType.Constant){let oe=!1;for(let re=0;re<n.parameters.length;re++)j.name===n.parameters[re].name&&(j.value=n.parameters[re].value,oe=!0);oe||(j.value=ae.value)}else ae&&ae.type===ParameterType.Constant&&(j.type=ParameterType.Constant,j.value=ae.value)}V.value=L,executeScript(L)}}}},updatePreviewList_styleSwitch=()=>{sampleCharactersList.value=[];const e=styles$3.value.find(r=>r.uuid===selectedStyleUUID.value),n=document.getElementById("advanced-edit-characters-list");n.innerHTML="",originSampleCharactersList.value.map(r=>{n.appendChild(generateCharacterTemplate$2(r));const g=document.getElementById(`advanced-edit-preview-canvas-${r.uuid}`);if(!g)return;const y=clone(r);switchStyle(y,e),sampleCharactersList.value.push(y);const k=componentsToContours(orderedListWithItemsForCharacterFile(r),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.advanceWidth,advancedEdit:!1},{x:0,y:0},!1,!0,!0);renderPreview2(g,k)})},updateCharactersAndPreview_styleSwitch=()=>{sampleCharactersList.value=[];const e=styles$3.value.find(n=>n.uuid===selectedStyleUUID.value);e.name===""?process_characters_song():e.name===""?process_characters_fangsong():e.name===""?process_characters_kai():e.name===""&&process_characters_li();for(let n=0;n<originSampleCharactersList.value.length;n++){const r=clone(originSampleCharactersList.value[n]),g=document.getElementById(`advanced-edit-preview-canvas-${r.uuid}`);if(!g)return;e.name===""?process_character_fangsong(r):e.name===""?process_character_kai(r):e.name===""&&process_character_li(r),switchStyle(r,e),e.name===""&&process_character_song(r),sampleCharactersList.value.push(r);let y=orderedListWithItemsForCharacterFile(r);r.final_components&&(y=r.final_components);const k=componentsToContours(y,{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.advanceWidth,advancedEdit:!1},{x:0,y:0},!1,!0,!0);renderPreview2(g,k)}},updateCharactersList_styleSwitch=()=>{const e=styles$3.value.find(g=>g.uuid===selectedStyleUUID.value);switchStyle_init(e),e.name===""?process_characters_song():e.name===""?process_characters_fangsong():e.name===""?process_characters_kai():e.name===""&&process_characters_li(),total$1.value=selectedFile.value.characterList.length+Math.min(visibleCount.value,selectedFile.value.characterList.length),loaded$1.value=0,loading$1.value=!0,constants.value=clone(constants$2.value),constantsMap.update(constants.value);let n=0;const r=()=>{loaded$1.value++;const g=selectedFile.value.characterList[n];if(e.name===""?process_character_fangsong(g):e.name===""?process_character_kai(g):e.name===""&&process_character_li(g),switchStyle2(g,e),e.name===""&&process_character_song(g),orderedListWithItemsForCharacterFile(g),g.final_components&&g.final_components,componentsToContours(orderedListWithItemsForCharacterFile(g),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.advanceWidth},{x:0,y:0},!1,!0,!0),n++,n<selectedFile.value.characterList.length)n%100===0?requestAnimationFrame(r):r();else{emitter.emit("renderPreviewCanvas");return}};requestAnimationFrame(r)},getParam=e=>e.type===ParameterType.Constant?constants.value.find(n=>n.uuid===e.value).value:e.type===ParameterType.AdvancedEditConstant?constants$2.value.find(n=>n.uuid===e.value).value:e.value,addParam=(e,n,r,g)=>{const y=e.parameters.parameters.find($=>$.name===n);if(y){y.value=r;return}const k={uuid:genUUID(),name:n,value:r,type:g};return e.parameters.parameters.push(k),k},process_characters_song=()=>{constants$2.value.find(e=>e.name==="").value=1,constants$2.value.find(e=>e.name==="").value=2,constants$2.value.find(e=>e.name==="").value=1,constants$2.value.find(e=>e.name==="").value=2,constants.value.find(e=>e.name==="").value=1,constants.value.find(e=>e.name==="").value=2,constants.value.find(e=>e.name==="").value=1,constants.value.find(e=>e.name==="").value=2},process_character_song=e=>{for(let n=0;n<e.components.length;n++){const r=e.components[n];if(r.type==="glyph"){const g=r.value;g.parameters.parameters.forEach(y=>{y.name===""&&getParam(y)===0&&addParam(g,"",0,ParameterType.Enum)})}}},process_characters_fangsong=()=>{constants$2.value.find(e=>e.name==="").value=1,constants$2.value.find(e=>e.name==="").value=2,constants$2.value.find(e=>e.name==="").value=1,constants$2.value.find(e=>e.name==="").value=2,constants.value.find(e=>e.name==="").value=1,constants.value.find(e=>e.name==="").value=2,constants.value.find(e=>e.name==="").value=1,constants.value.find(e=>e.name==="").value=2},process_character_fangsong=e=>{for(let n=0;n<e.components.length;n++){const r=e.components[n];if(r.type==="glyph"){const g=r.value;g.parameters.parameters.forEach(y=>{y.name===""&&getParam(y)===0&&addParam(g,"",0,ParameterType.Enum)})}}},process_characters_kai=()=>{constants$2.value.find(e=>e.name==="").value=1,constants$2.value.find(e=>e.name==="").value=2,constants$2.value.find(e=>e.name==="").value=1,constants$2.value.find(e=>e.name==="").value=2,constants.value.find(e=>e.name==="").value=1,constants.value.find(e=>e.name==="").value=2,constants.value.find(e=>e.name==="").value=1,constants.value.find(e=>e.name==="").value=2},process_character_kai=e=>{for(let n=0;n<e.components.length;n++){const r=e.components[n];if(r.type==="glyph"){const g=r.value;g.parameters.parameters.forEach(y=>{y.name===""&&getParam(y)===0&&addParam(g,"",0,ParameterType.Enum)})}}},process_characters_li=()=>{constants$2.value.find(e=>e.name==="").value=1,constants$2.value.find(e=>e.name==="").value=2,constants$2.value.find(e=>e.name==="").value=1,constants$2.value.find(e=>e.name==="").value=2,constants.value.find(e=>e.name==="").value=1,constants.value.find(e=>e.name==="").value=2,constants.value.find(e=>e.name==="").value=1,constants.value.find(e=>e.name==="").value=2},process_character_li=e=>{for(let n=0;n<e.components.length;n++){const r=e.components[n];if(r.type==="glyph"){const g=r.value;g.parameters.parameters.forEach(y=>{y.name===""&&getParam(y)===0&&addParam(g,"",0,ParameterType.Enum)}),g.name===""&&g.parameters.parameters.find(y=>y.name==="").value>=500&&(g.name="")}}};class ParametersMap{parameters;constructor(n){this.parameters=n}get(n){for(let r=0;r<this.parameters.length;r++)if(this.parameters[r].name===n)return this.getValue(this.parameters[r])}getRange(n){for(let r=0;r<this.parameters.length;r++)if(this.parameters[r].name===n)return{min:this.parameters[r].min||0,max:this.parameters[r].max===0?0:this.parameters[r].max||1e3}}set(n,r){for(let g=0;g<this.parameters.length;g++){const y=this.parameters[g];y.name===n&&(r<y.min?y.value=y.min:r>y.max?y.value=y.max:y.value=r,y.type===ParameterType.Constant&&(y.type=ParameterType.Number))}}getByUUID(n){for(let r=0;r<this.parameters.length;r++)if(this.parameters[r].uuid===n)return this.getValue(this.parameters[r])}getValue(n){if(n.type===ParameterType.Number||n.type===ParameterType.RingController)return n.value;if(n.type===ParameterType.Constant)return constantsMap.getByUUID(n.value);if(n.type===ParameterType.PlaygroundConstant)return constantsMap$1.getByUUID(n.value);if(n.type===ParameterType.AdvancedEditConstant)return constantsMap$2.getByUUID(n.value);if(n.type===ParameterType.Enum)return n.value}}const characters=ref([]),glyphs$1=ref([]),constants$1=ref([{uuid:genUUID(),name:"",type:3,value:2,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]},{uuid:genUUID(),name:"",type:0,value:1,min:0,max:2},{uuid:genUUID(),name:"",type:3,value:1,options:[{value:0,label:""},{value:1,label:""}]},{uuid:genUUID(),name:"",type:0,value:1,min:1,max:2},{uuid:genUUID(),name:"",type:0,value:0,min:0,max:2},{uuid:genUUID(),name:"",type:0,value:1,min:0,max:2},{uuid:genUUID(),name:"",type:0,value:50,min:40,max:100}]),editCharacterFile$1=ref(null),loading=ref(!1),gridSettings=ref({dx:0,dy:0,centerSquareSize:1e3/3,size:1e3,default:!0});let scripts_map$1={};const constantsMap$1=new ConstantsMap(constants$1.value),orderedListWithItemsForCurrentCharacterFile$1=computed(()=>editCharacterFile$1.value.orderedList.map(e=>e.type==="group"?selectedItemByUUID(editCharacterFile$1.value.groups,e.uuid):selectedItemByUUID(editCharacterFile$1.value.components,e.uuid))),generateCharacterTemplate$1=e=>{const n=document.getElementById("playground-character-template").querySelector(".char-preview").cloneNode(!0);return n.className=`character-preview character-${e.uuid}`,n.querySelector(".playground-preview-canvas").id=`playground-preview-canvas-${e.uuid}`,n.addEventListener("click",()=>editChar(e.uuid)),n},initPlayground=async()=>{total$1.value=0,loading$1.value=!0,characters.value=[],window.FP=FP;const e=document.getElementById("playground-characters-list");e.innerHTML="";const n=await fetch(base$1+"/templates/playground.json"),r=JSON.parse(await n.text());for(let y=0;y<hei_strokes.length;y++){const k=hei_strokes[y],{name:$,params:V,uuid:L}=k;let j=await(await fetch(base$1+`/templates/templates2/${$}.js`)).text();const ae=[];for(let re=0;re<V.length;re++){const ue=V[re];ae.push({uuid:genUUID(),name:ue.name,type:0,value:ue.default,min:ue.min||0,max:ue.max||1e3})}ae.push({uuid:genUUID(),name:"",type:3,value:0,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]}),ae.push({uuid:genUUID(),name:"",type:3,value:2,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]}),ae.push({uuid:genUUID(),name:"",type:0,value:1,min:0,max:2}),ae.push({uuid:genUUID(),name:"",type:3,value:1,options:[{value:0,label:""},{value:1,label:""}]}),ae.push({uuid:genUUID(),name:"",type:0,value:1,min:1,max:2}),ae.push({uuid:genUUID(),name:"",type:0,value:0,min:0,max:2}),ae.push({uuid:genUUID(),name:"",type:0,value:1,min:0,max:2});const oe={uuid:L,type:"system",name:$,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},parameters:new ParametersMap(ae),joints:[],script:`function script_${L.replaceAll("-","_")} (glyph, constants, FP) {
	${j}
}`};glyphs$1.value.push(oe)}const g=r.file;g.characterList=g.characterList.map(y=>{const k=instanceCharacter(y);e.appendChild(generateCharacterTemplate$1(k)),characters.value.push(k);for(let L=0;L<k.components.length;L++){const z=k.components[L];if(z.type==="glyph"){const ae=z.value.parameters.parameters;for(let oe=0;oe<ae.length;oe++){const re=ae[oe];re.name===""&&re.value!==0?(re.type=4,re.value=constants$1.value[0].uuid):re.name===""?(re.type=4,re.value=constants$1.value[1].uuid):re.name===""?(re.type=4,re.value=constants$1.value[2].uuid):re.name===""?(re.type=4,re.value=constants$1.value[3].uuid):re.name===""?(re.type=4,re.value=constants$1.value[4].uuid):re.name===""?(re.type=4,re.value=constants$1.value[5].uuid):re.name===""&&(re.type=4,re.value=constants$1.value[6].uuid)}}}const $=document.getElementById(`playground-preview-canvas-${y.uuid}`);if(!$)return;const V=componentsToContours(orderedListWithItemsForCharacterFile(k),{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!1,!0);renderPreview2($,V)}),editChar(characters.value[0].uuid),loading$1.value=!1},renderPreview=()=>{characters.value.map(e=>{e.info.gridSettings={dx:gridSettings.value.dx,dy:gridSettings.value.dy,size:gridSettings.value.size,centerSquareSize:gridSettings.value.centerSquareSize,default:!1};const n=document.getElementById(`playground-preview-canvas-${e.uuid}`);if(!n)return;const r=componentsToContours(orderedListWithItemsForCharacterFile(e),{unitsPerEm:1e3,descender:-200,advanceWidth:1e3,grid:gridSettings.value,useSkeletonGrid:!0,playground:!0},{x:0,y:0},!1,!0,!0);renderPreview2(n,r)})},updateCharactersAndPreview=()=>{for(let e=0;e<characters.value.length;e++){const n=characters.value[e],r=document.getElementById(`playground-preview-canvas-${n.uuid}`);if(!r)return;const g=componentsToContours(orderedListWithItemsForCharacterFile(n),{unitsPerEm:1e3,descender:-200,advanceWidth:1e3,grid:n.info.gridSettings,useSkeletonGrid:!0,playground:!0},{x:0,y:0},!1,!0,!0);renderPreview2(r,g)}},editChar=e=>{for(let n=0;n<characters.value.length;n++)characters.value[n].uuid===e&&(editCharacterFile$1.value=characters.value[n],editCharacterFile$1.value.components.map(r=>{if(r.type==="glyph"){const g=r.value;executeScript$1(g)}}),emitter.emit("refreshPlaygroundGridController"))},getScript$1=e=>{if(e.script)return e.script;if(e.script_reference){if(scripts_map$1[e.script_reference])return scripts_map$1[e.script_reference];for(let n=0;n<glyphs$1.value.length;n++){const r=glyphs$1.value[n];if(e.script_reference===r.uuid&&r.script)return r.script}}return null},exportFont$1=async()=>{if(loading.value)return;loading.value=!0,await computeOverlapRemovedContours$1();const e=await createFont$1();if(window.__TAURI_INTERNALS__){const r=toArrayBuffer(e);nativeSaveBinary(r,".otf",["otf"]),loading.value=!1}else{const r=toArrayBuffer(e);console.log(`[playground exportFont] ArrayBuffer size: ${r.byteLength} bytes`);const g=new Blob([r],{type:"font/opentype"});console.log(`[playground exportFont] Blob size: ${g.size} bytes`);var n=new JSZip;n.file(".otf",g),n.generateAsync({type:"blob"}).then(function(y){saveAs(y,".zip"),console.log("[playground exportFont] ZIP saved successfully"),loading.value=!1})}},OVERLAP_REMOVAL_CONFIG$1={PATH_PRECISION:1e-6,TOLERANCE:1e-8,MAX_SUBDIVISIONS:10,CURVE_SUBDIVISION_THRESHOLD:.1,MERGE_TOLERANCE:1e-6},createOptimizedPath$1=e=>{const n=new paper.Path;if(e.length===0)return n;const r=new paper.Point(e[0].start.x,e[0].start.y);n.moveTo(r);for(let g=0;g<e.length;g++){const y=e[g];if(y.type===PathType.LINE){const k=y,$=new paper.Point(k.end.x,k.end.y);n.lineTo($)}else if(y.type===PathType.CUBIC_BEZIER){const k=y,$=new paper.Point(k.control1.x,k.control1.y),V=new paper.Point(k.control2.x,k.control2.y),L=new paper.Point(k.end.x,k.end.y);n.cubicCurveTo($,V,L)}else if(y.type===PathType.QUADRATIC_BEZIER){const k=y,$=new paper.Point(k.control.x,k.control.y),V=new paper.Point(k.end.x,k.end.y),L=r.multiply(1/3).add($.multiply(2/3)),z=V.multiply(1/3).add($.multiply(2/3));n.cubicCurveTo(L,z,V)}r.x=y.end.x,r.y=y.end.y}return n},mergePathsWithPrecision$1=e=>{if(e.length===0)return null;if(e.length===1)return e[0];paper.settings.precision=OVERLAP_REMOVAL_CONFIG$1.PATH_PRECISION;let n=e[0].clone();for(let r=1;r<e.length;r++){const g=e[r],y=n.unite(g);y&&y.area&&Math.abs(y.area)>OVERLAP_REMOVAL_CONFIG$1.MERGE_TOLERANCE&&(n=y)}return n},isAlreadyOptimized$1=e=>{if(e.length<=1)return!0;let n=!1;for(let r=0;r<e.length;r++){for(let g=r+1;g<e.length;g++){const y=e[r],k=e[g];let $=1/0,V=1/0,L=-1/0,z=-1/0,j=1/0,ae=1/0,oe=-1/0,re=-1/0;for(let ue=0;ue<y.length;ue++){const le=y[ue];$=Math.min($,le.start.x,le.end.x),V=Math.min(V,le.start.y,le.end.y),L=Math.max(L,le.start.x,le.end.x),z=Math.max(z,le.start.y,le.end.y)}for(let ue=0;ue<k.length;ue++){const le=k[ue];j=Math.min(j,le.start.x,le.end.x),ae=Math.min(ae,le.start.y,le.end.y),oe=Math.max(oe,le.start.x,le.end.x),re=Math.max(re,le.start.y,le.end.y)}if(L>=j&&oe>=$&&z>=ae&&re>=V){n=!0;break}}if(n)break}return!n},computeOverlapRemovedContours$1=()=>{for(let r=0;r<characters.value.length;r++){let g=characters.value[r],y=componentsToContours(orderedListWithItemsForCharacterFile(g),{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!1,!1,!1);if(isAlreadyOptimized$1(y)){g.overlap_removed_contours=y;continue}let k=[];for(let z=0;z<y.length;z++){const j=y[z];if(j.length===0)continue;const ae=createOptimizedPath$1(j);ae.closed||ae.closePath(),k.push(ae)}let $=mergePathsWithPrecision$1(k);if(!$||!$.curves||$.curves.length===0){g.overlap_removed_contours=y;continue}let V=[];const L=z=>{const j=[];if(z.children&&z.children.length>0){for(let ae=0;ae<z.children.length;ae++){const oe=z.children[ae];if(oe instanceof paper.Path){const re=L(oe);j.push(...re)}}return j}if(z.curves&&z.curves.length>0){const ae=[];for(let oe=0;oe<z.curves.length;oe++){const re=z.curves[oe];if(re.points.length>=4){const ue={type:PathType.CUBIC_BEZIER,start:{x:re.points[0].x,y:re.points[0].y},control1:{x:re.points[1].x,y:re.points[1].y},control2:{x:re.points[2].x,y:re.points[2].y},end:{x:re.points[3].x,y:re.points[3].y}};ae.push(ue)}}ae.length>0&&j.push(ae)}return j};V=L($),V.length===0?g.overlap_removed_contours=y:g.overlap_removed_contours=V}},createFont$1=async()=>{const r=[{unicode:0,name:".notdef",contours:[[]],contourNum:0,advanceWidth:Math.max(1e3,1e3),leftSideBearing:0}];let g=!1;const y=1e3,k=800,$=-200;for(let L=0;L<characters.value.length;L++){const z=characters.value[L];let j=[[]];z.overlap_removed_contours?j=z.overlap_removed_contours:j=componentsToContours(orderedListWithItemsForCharacterFile(z),{unitsPerEm:y,descender:$,advanceWidth:y},{x:0,y:0},!1,!1,!1);const{text:ae,unicode:oe}=z.character;r.push({name:ae,unicode:parseInt(oe,16),advanceWidth:y,leftSideBearing:0,contours:j,contourNum:j.length}),ae===" "&&(g=!0)}return g||r.push({name:" ",unicode:parseInt("0x20",16),advanceWidth:y,leftSideBearing:0,contours:[[]],contourNum:0}),r.sort((L,z)=>L.unicode-z.unicode),await create(r,{familyName:"",styleName:"Regular",unitsPerEm:y,ascender:k,descender:$,tables:null})},executeScript$1=e=>{try{if(e._o&&e._o.tempData)return;const n=new CustomGlyph(e),r=n._glyph;for(let g=0;g<e.components.length;g++)e.components[g].type==="glyph"&&executeScript$1(e.components[g].value);window.glyph=n,constantsMap$1.update(constants$1.value),window.constantsMap=constantsMap$1;try{const g=getScript$1(e);new Function(`${g}
script_${e.uuid.replaceAll("-","_")} (glyph, constantsMap, FP)`)()}catch(g){console.error(g)}window.glyph=null,window.constantsMap=null}catch(n){console.warn(n)}},contoursToComponents=(e,n)=>e.map(g=>{const y=[];for(let k=0;k<g.length;k++){const $=g[k];switch(k===0&&y.push({uuid:genLightId(),x:$.start.x,y:$.start.y,type:"anchor",origin:null,isShow:!0}),$.type){case PathType.LINE:{const V={uuid:genLightId(),x:$.start.x,y:$.start.y,type:"control",origin:y[y.length-1].uuid,isShow:!0},L={uuid:genLightId(),x:$.end.x,y:$.end.y,type:"anchor",origin:null,isShow:!0},z={uuid:genLightId(),x:$.end.x,y:$.end.y,type:"control",origin:L.uuid,isShow:!0};y.push(V,z,L);break}case PathType.QUADRATIC_BEZIER:{const V={uuid:genLightId(),x:$.start.x+.6666666666666666*($.control.x-$.start.x),y:$.start.y+.6666666666666666*($.control.y-$.start.y),type:"control",origin:y[y.length-1].uuid,isShow:!0},L={uuid:genLightId(),x:$.end.x,y:$.end.y,type:"anchor",origin:null,isShow:!0},z={uuid:genLightId(),x:$.end.x+2/3*($.control.x-$.end.x),y:$.end.y+2/3*($.control.y-$.end.y),type:"control",origin:L.uuid,isShow:!0};y.push(V,z,L);break}case PathType.CUBIC_BEZIER:{const V={uuid:genLightId(),x:$.control1.x,y:$.control1.y,type:"control",origin:y[y.length-1].uuid,isShow:!0},L={uuid:genLightId(),x:$.end.x,y:$.end.y,type:"anchor",origin:null,isShow:!0},z={uuid:genLightId(),x:$.control2.x,y:$.control2.y,type:"control",origin:L.uuid,isShow:!0};y.push(V,z,L);break}}}return y.length&&(y[y.length-1].x!==y[0].x||y[y.length-1].x!==y[0].y)&&(y.push({uuid:genLightId(),x:y[y.length-1].x,y:y[y.length-1].y,type:"control",origin:y[y.length-1].uuid,isShow:!0}),y.push({uuid:genLightId(),x:y[0].x,y:y[0].y,type:"control",origin:y[0].uuid,isShow:!0}),y.push({uuid:genLightId(),x:y[0].x,y:y[0].y,type:"anchor",origin:y[0].uuid,isShow:!0})),genPenComponent(formatPoints(y,n,0),!0)}),formatPoints=(e,n,r)=>{const{unitsPerEm:g,descender:y,advanceWidth:k}=n;return r===0?e.map(V=>{let L=V.x+(g-k)/2,z=g-V.y;return z=z+y,L*=1,z*=1,{...V,x:L,y:z}}):r===1?e.map(V=>{let L=V.x*1,z=V.y*1;return L-=(g-k)/2,z=z-y,z=g-z,{...V,x:L,y:z}}):e},translate$1=(e,n)=>({x:e.x+n.x,y:e.y+n.y}),componentsToContours=(e,n,r={x:0,y:0},g=!1,y=!0,k=!1)=>{n&&!n.advanceWidth&&(n.advanceWidth=n.unitsPerEm);const $=n&&n.useSkeletonGrid||!1;let V=[];return e.map(L=>{if(!L?.usedInCharacter)return;let{x:z,y:j,w:ae,h:oe,rotation:re,flipX:ue,flipY:le}=L;switch(L.type){case"pen":{if(!L.value.contour||k){let de=transformPoints(L.value.points,{x:z,y:j,w:ae,h:oe,rotation:re,flipX:ue,flipY:le});de=de.map(Ce=>{const Ie=translate$1(Ce,r);return n.grid&&!$?computeCoords(n.grid,Ie):Ie});const he=formatPoints(de,n,1),_e=genPenContour(he),xe=100/n.unitsPerEm,Ne=de.map(Ce=>Object.assign({},Ce,{x:Ce.x*xe,y:Ce.y*xe})),$e=genPenContour(Ne);L.value.preview=$e,L.value.contour=_e}y?V.push(L.value.preview):V.push(L.value.contour);break}case"polygon":{if(!L.value.contour||k){let de=transformPoints(L.value.points,{x:z,y:j,w:ae,h:oe,rotation:re,flipX:ue,flipY:le});de=de.map(Ce=>{const Ie=translate$1(Ce,r);return n.grid&&!$?computeCoords(n.grid,Ie):Ie});const he=formatPoints(de,n,1),_e=genPolygonContour(he);V.push(_e);const xe=100/n.unitsPerEm,Ne=de.map(Ce=>Object.assign({},Ce,{x:Ce.x*xe,y:Ce.y*xe})),$e=genPolygonContour(Ne);L.value.preview=$e,L.value.contour=_e}y?V.push(L.value.preview):V.push(L.value.contour);break}case"rectangle":{if(!L.value.contour||k){const de=L.value;let he=transformPoints(getRectanglePoints(de.width,de.height,L.x,L.y),{x:z,y:j,w:ae,h:oe,rotation:re,flipX:ue,flipY:le});he=he.map(Ie=>{const ze=translate$1(Ie,r);return n.grid&&!$?computeCoords(n.grid,ze):ze});const _e=formatPoints(he,n,1),xe=genRectangleContour(_e);V.push(xe);const Ne=100/n.unitsPerEm,$e=he.map(Ie=>Object.assign({},Ie,{x:Ie.x*Ne,y:Ie.y*Ne})),Ce=genRectangleContour($e);L.value.preview=Ce,L.value.contour=xe}y?V.push(L.value.preview):V.push(L.value.contour);break}case"ellipse":{if(!L.value.contour||k){const de=L.value;let he=getEllipsePoints(de.radiusX,de.radiusY,1e3,L.x+de.radiusX,L.y+de.radiusY),_e=transformPoints(he,{x:z,y:j,w:ae,h:oe,rotation:re,flipX:ue,flipY:le});_e=_e.map(ze=>{const Ue=translate$1(ze,r);return n.grid&&!$?computeCoords(n.grid,Ue):Ue});const xe=formatPoints(_e,n,1),Ne=genEllipseContour(xe);V.push(Ne);const $e=100/n.unitsPerEm,Ce=_e.map(ze=>Object.assign({},ze,{x:ze.x*$e,y:ze.y*$e})),Ie=genEllipseContour(Ce);L.value.preview=Ie,L.value.contour=Ne}y?V.push(L.value.preview):V.push(L.value.contour);break}case"glyph-pen":{(!L.contour||!L.contour.length||k)&&(!n.grid||$?L.updateData(g,r):L.updateData(g,r,n.grid)),y?V.push(L.preview):V.push(L.contour);break}case"glyph-polygon":{(!L.contour||!L.contour.length||k)&&(!n.grid||$?L.updateData(g,r):L.updateData(g,r,n.grid)),y?V.push(L.preview):V.push(L.contour);break}case"glyph-rectangle":{(!L.contour||!L.contour.length||k)&&(!n.grid||$?L.updateData(g,r):L.updateData(g,r,n.grid)),y?V.push(L.preview):V.push(L.contour);break}case"glyph-ellipse":{(!L.contour||!L.contour.length||k)&&(!n.grid||$?L.updateData(g,r):L.updateData(g,r,n.grid)),y?V.push(L.preview):V.push(L.contour);break}case"glyph":{const{ox:de,oy:he}=L,_e=L.value;if((!_e._o||k)&&(n&&n.playground?executeScript$1(_e):n&&n.advancedEdit?executeScript$2(_e):executeScript(_e)),$&&n.grid&&_e._o?.getSkeleton){const xe=_e._o.getSkeleton(),Ne={},$e=Object.keys(xe);for(let Ue=0;Ue<$e.length;Ue++){const Pt=$e[Ue],hn=xe[Pt],Dt={x:hn.x+r.x+de,y:hn.y+r.y+he};Ne[Pt]=computeCoords(n.grid,Dt)}const Ce=_e._o.getComponentsBySkeleton(Ne),Ie=orderedListWithItemsForGlyph(_e),ze=componentsToContours(Ce.concat(Ie),n,{x:0,y:0},g,y,!0);V=V.concat(ze)}else{const xe=componentsToContours(_e._o.components,n,{x:r.x+de,y:r.y+he},g,y,!0);V=V.concat(xe)}break}default:{const de=[];V.push(de);break}}}),V},componentsToContours2=(e,n={x:0,y:0},r=!1,g=0)=>{let y=[];if(e.map(k=>{if(!k.usedInCharacter)return;let{x:$,y:V,w:L,h:z,rotation:j,flipX:ae,flipY:oe}=k;switch(k.type){case"pen":{let re=transformPoints(k.value.points,{x:$,y:V,w:L,h:z,rotation:j,flipX:ae,flipY:oe});const ue=genPenContour(re);y.push(ue);break}case"polygon":{let re=transformPoints(k.value.points,{x:$,y:V,w:L,h:z,rotation:j,flipX:ae,flipY:oe});const ue=genPolygonContour(re);y.push(ue);break}case"rectangle":{const re=k.value;let ue=transformPoints(getRectanglePoints(re.width,re.height,k.x,k.y),{x:$,y:V,w:L,h:z,rotation:j,flipX:ae,flipY:oe});const le=genRectangleContour(ue);y.push(le);break}case"ellipse":{const re=k.value;let ue=getEllipsePoints(re.radiusX,re.radiusY,1e3,k.x+re.radiusX,k.y+re.radiusY);const le=transformPoints(ue,{x:$,y:V,w:L,h:z,rotation:j,flipX:ae,flipY:oe}),de=genEllipseContour(le);y.push(de);break}case"glyph-pen":{k.updateData2(),y.push(k.contour2);break}case"glyph-polygon":{k.updateData2(),y.push(k.contour2);break}case"glyph-rectangle":{k.updateData2(),y.push(k.contour);break}case"glyph-ellipse":{k.updateData2(),y.push(k.contour);break}case"glyph":{const{ox:re,oy:ue}=k,le=k.value;le._o||executeScript(le);const de=componentsToContours2(le._o.components,{x:re,y:ue},r,g);y=y.concat(de);break}default:{const re=[];y.push(re);break}}}),n.x||n.y){if(g===0)for(let $=0;$<y.length;$++){const V=y[$];for(let L=0;L<V.length;L++){const z=V[L];z.type===PathType.LINE?(z.start.x+=n.x*1,z.start.y-=n.y*1,z.end.x+=n.x*1,z.end.y-=n.y*1):z.type===PathType.QUADRATIC_BEZIER?(z.start.x+=n.x*1,z.start.y-=n.y*1,z.end.x+=n.x*1,z.end.y-=n.y*1,z.control.x+=n.x*1,z.control.y-=n.y*1):z.type===PathType.CUBIC_BEZIER&&(z.start.x+=n.x*1,z.start.y-=n.y*1,z.end.x+=n.x*1,z.end.y-=n.y*1,z.control1.x+=n.x*1,z.control1.y-=n.y*1,z.control2.x+=n.x*1,z.control2.y-=n.y*1)}}else if(g===1)for(let $=0;$<y.length;$++){const V=y[$];for(let L=0;L<V.length;L++){const z=V[L];z.type===PathType.LINE?(z.start.x+=n.x*1,z.start.y+=n.y*1,z.end.x+=n.x*1,z.end.y+=n.y*1):z.type===PathType.QUADRATIC_BEZIER?(z.start.x+=n.x*1,z.start.y+=n.y*1,z.end.x+=n.x*1,z.end.y+=n.y*1,z.control.x+=n.x*1,z.control.y-=n.y*1):z.type===PathType.CUBIC_BEZIER&&(z.start.x+=n.x*1,z.start.y+=n.y*1,z.end.x+=n.x*1,z.end.y+=n.y*1,z.control1.x+=n.x*1,z.control1.y+=n.y*1,z.control2.x+=n.x*1,z.control2.y+=n.y*1)}}}return y},genEllipseContour=e=>{const n=[];let r=fitCurve(e,2);if(r.length)for(let g=0;g<r.length;g++){const y=r[g];n.push({type:PathType.CUBIC_BEZIER,start:{x:y[0].x,y:y[0].y},end:{x:y[3].x,y:y[3].y},control1:{x:y[1].x,y:y[1].y},control2:{x:y[2].x,y:y[2].y}})}return n},genRectangleContour=e=>{const n=[];for(let r=0;r<e.length-1;r++)n.push({type:PathType.LINE,start:{x:e[r].x,y:e[r].y},end:{x:e[r+1].x,y:e[r+1].y}});return n},genPenContour=(e,n=!1)=>{const r=[];for(let g=0;g<e.length-1&&!(g+3>=e.length);g+=3)r.push({type:PathType.CUBIC_BEZIER,start:{x:e[g].x,y:e[g].y},end:{x:e[g+3].x,y:e[g+3].y},control1:{x:e[g+1].x,y:e[g+1].y},control2:{x:e[g+2].x,y:e[g+2].y},fill:n});return r},genPolygonContour=e=>{const n=[];for(let r=0;r<e.length-1;r++)n.push({type:PathType.LINE,start:{x:e[r].x,y:e[r].y},end:{x:e[r+1].x,y:e[r+1].y}});return n};class EllipseComponent{centerX;centerY;radiusX;radiusY;type="glyph-ellipse";usedInCharacter=!0;contour=[];contour2=[];preview=[];constructor(n,r,g,y){this.centerX=n,this.centerY=r,this.radiusX=g,this.radiusY=y}render(n,r={offset:{x:0,y:0},scale:1}){const g=r.scale,y=n.getContext("2d");y.strokeStyle=r.fillColor||"#000",y.lineWidth=getStrokeWidth(),y.translate(mapCanvasX(r.offset.x)*g,mapCanvasY(r.offset.y)*g),y.beginPath(),y.ellipse(mapCanvasX(this.centerX)*g,mapCanvasY(this.centerY)*g,mapCanvasX(this.radiusX)*g,mapCanvasY(this.radiusY)*g,0,0,Math.PI*2),y.stroke(),y.closePath(),fontRenderStyle.value==="black"?(y.fillStyle="#000",y.fill()):fontRenderStyle.value==="color"&&(y.fillStyle=r.fillColor||"#000",y.fill()),y.setTransform(1,0,0,1,0,0)}render_grid(n,r={offset:{x:0,y:0},scale:1,grid:null}){const g=L=>({x:r.offset.x+L.x,y:r.offset.y+L.y});let y=getEllipsePoints(this.radiusX,this.radiusY,1e3,this.centerX+this.radiusX,this.centerY+this.radiusY);const k=r.scale,$=n.getContext("2d");$.strokeStyle="#000",$.lineWidth=getStrokeWidth(),$.beginPath();const V=computeCoords(r.grid,g({x:y[0].x,y:y[0].y}));$.moveTo(mapCanvasX(V.x)*k,mapCanvasY(V.y)*k);for(let L=1;L<y.length;L++){const{x:z,y:j}=computeCoords(r.grid,g({x:y[L].x,y:y[L].y}));$.lineTo(mapCanvasX(z)*k,mapCanvasY(j)*k)}$.lineTo(mapCanvasX(V.x)*k,mapCanvasY(V.y)*k),$.stroke(),$.closePath(),$.setTransform(1,0,0,1,0,0)}getData=()=>({centerX:this.centerX,centerY:this.centerY,radiusX:this.radiusX,radiusY:this.radiusY,usedInCharacter:this.usedInCharacter,contour:clone(this.contour),preview:clone(this.preview)});setData=n=>{this.centerX=n.centerX,this.centerY=n.centerY,this.radiusX=n.radiusX,this.radiusY=n.radiusY,this.type=n.type,this.usedInCharacter=n.usedInCharacter,n.contour&&(this.contour=clone(n.contour)),n.preview&&(this.preview=clone(n.preview))};updateData=(n=!0,r,g)=>{let y=getEllipsePoints(this.radiusX,this.radiusY,1e3,this.centerX,this.centerY);y=y.map(ae=>{const oe=translate$1(ae,r);return g?computeCoords(g,oe):oe}),g&&(y=y.map(ae=>computeCoords(g,ae)));let k={unitsPerEm:1e3,descender:-200,advanceWidth:1e3};n||(k.unitsPerEm=selectedFile.value.fontSettings.unitsPerEm,k.descender=selectedFile.value.fontSettings.descender,k.advanceWidth=selectedFile.value.fontSettings.unitsPerEm);const $=formatPoints(y,k,1),V=genEllipseContour($),L=100/k.unitsPerEm,z=y.map(ae=>Object.assign({},ae,{x:ae.x*L,y:ae.y*L})),j=genEllipseContour(z);this.contour=V,this.preview=j};updateData2=()=>{const n=getEllipsePoints(this.radiusX,this.radiusY,1e3,this.centerX,this.centerY),r=genEllipseContour(n);this.contour2=r}}class Skeleton{skeleton=[];weight;pointer;constructor(n){this.skeleton=[],this.weight=n}moveTo(n,r){this.pointer={x:n,y:r}}lineTo(n,r){if(!this.pointer)return!1;this.skeleton.push({type:"line",start:{x:this.pointer.x,y:this.pointer.y},end:{x:n,y:r}}),this.pointer={x:n,y:r}}quadraticBezierTo(n,r,g,y){if(!this.pointer)return!1;this.skeleton.push({type:"quadratic-bezier",start:{x:this.pointer.x,y:this.pointer.y},control1:{x:n,y:r},end:{x:g,y}}),this.pointer={x:g,y}}cubicBezierTo(n,r,g,y,k,$){if(!this.pointer)return!1;this.skeleton.push({type:"cubic-bezier",start:{x:this.pointer.x,y:this.pointer.y},control1:{x:n,y:r},control2:{x:g,y},end:{x:k,y:$}}),this.pointer={x:k,y:$}}fitCurveTo(n){if(!this.pointer)return!1;fitCurve([this.pointer,...n],2).map(g=>{this.skeleton.push({type:"cubic-bezier",start:g[0],control1:g[1],control2:g[2],end:g[3]}),this.pointer={x:g[3].x,y:g[3].y}})}genComponent(){if(!this.skeleton.length)return null;const n=[],r=[];for(let y=0;y<this.skeleton.length;y++){const k=this.skeleton[y];if(k.type==="line"){let $=1;k.start.x===k.end.x&&(y>0&&y<this.skeleton.length-1?($=this.skeleton[y-1].start.x-this.skeleton[y+1].end.x,$/=Math.abs($)):y>0?($=this.skeleton[y-1].start.x-this.skeleton[y].start.x,$/=Math.abs($)):y<this.skeleton.length-1&&($=this.skeleton[y].start.x-this.skeleton[y+1].end.x,$/=Math.abs($)));const V=-(k.start.y-k.end.y)/(k.start.x-k.end.x)*$,L=Math.atan(V),z={type:"line",start:{x:k.start.x-this.weight/2*Math.sin(L),y:k.start.y-this.weight/2*Math.cos(L)},end:{x:k.end.x-this.weight/2*Math.sin(L),y:k.end.y-this.weight/2*Math.cos(L)},k1:V},j={type:"line",start:{x:k.start.x+this.weight/2*Math.sin(L),y:k.start.y+this.weight/2*Math.cos(L)},end:{x:k.end.x+this.weight/2*Math.sin(L),y:k.end.y+this.weight/2*Math.cos(L)},k1:V};k.start.x===k.end.x?y===0?this.skeleton.length>1&&this.skeleton[y+1].end.x-k.end.x<=0?(n.push(j),r.push(z)):(n.push(z),r.push(j)):this.skeleton[y-1].start.x-k.start.x<=0?(n.push(z),r.push(j)):(n.push(j),r.push(z)):k.start.x-k.end.x<0?(n.push(z),r.push(j)):(n.push(j),r.push(z))}else if(k.type==="quadratic-bezier"){const $=[k.start,k.control1,k.control1,k.end];addContours($,n,r,[{pos:0,weight:this.weight},{pos:1,weight:this.weight}])}else if(k.type==="cubic-bezier"){const $=[k.start,k.control1,k.control2,k.end];addContours($,n,r,[{pos:0,weight:this.weight},{pos:1,weight:this.weight}])}}const g=new PenComponent;g.beginPath(),g.moveTo(n[0].start.x,n[0].start.y);for(let y=0;y<n.length;y++){const k=n[y];if(k.type==="line")if(y<n.length-1){const $=n[y+1],V=intersection(k.k1,k.start.x,getCoordY(k.start.y),$.k1,$.start.x,getCoordY($.start.y));g.lineTo(V.x,getCanvasY(V.y))}else g.lineTo(k.end.x,k.end.y);else if(k.type==="quadratic-bezier")if(y<n.length-1){const $=n[y+1],V=intersection(k.k2,k.end.x,getCoordY(k.end.y),$.k1,$.start.x,getCoordY($.start.y));g.quadraticBezierTo(k.control1.x,k.control1.y,V.x,getCanvasY(V.y))}else g.quadraticBezierTo(k.control1.x,k.control1.y,k.end.x,k.end.y);else if(k.type==="cubic-bezier")if(y<n.length-1){const $=n[y+1],V=intersection(k.k3,k.end.x,getCoordY(k.end.y),$.k1,$.start.x,getCoordY($.start.y));g.bezierTo(k.control1.x,k.control1.y,k.control2.x,k.control2.y,V.x,getCanvasY(V.y))}else g.bezierTo(k.control1.x,k.control1.y,k.control2.x,k.control2.y,k.end.x,k.end.y)}g.lineTo(r[r.length-1].end.x,r[r.length-1].end.y);for(let y=r.length-1;y>=0;y--){const k=r[y];if(k.type==="line")if(y>0){const $=r[y-1],V=$.k3?$.k3:$.k2?$.k2:$.k1,L=intersection(k.k1,k.start.x,getCoordY(k.start.y),V,$.end.x,getCoordY($.end.y));g.lineTo(L.x,getCanvasY(L.y))}else g.lineTo(k.start.x,k.start.y);else if(k.type==="quadratic-bezier")if(y>0){const $=r[y-1],V=$.k3?$.k3:$.k2?$.k2:$.k1,L=intersection(k.k1,k.start.x,getCoordY(k.start.y),V,$.end.x,getCoordY($.end.y));g.quadraticBezierTo(k.control1.x,k.control1.y,L.x,getCanvasY(L.y))}else g.quadraticBezierTo(k.control1.x,k.control1.y,k.start.x,k.start.y);else if(k.type==="cubic-bezier")if(y>0){const $=r[y-1],V=$.k3?$.k3:$.k2?$.k2:$.k1,L=intersection(k.k1,k.start.x,getCoordY(k.start.y),V,$.end.x,getCoordY($.end.y));g.bezierTo(k.control2.x,k.control2.y,k.control1.x,k.control1.y,L.x,getCanvasY(L.y))}else g.bezierTo(k.control2.x,k.control2.y,k.control1.x,k.control1.y,k.start.x,k.start.y)}return g.lineTo(n[0].start.x,n[0].start.y),g.closePath(),g}setweight(n){this.weight=n}getWeight(){return this.weight}static getContours(n,r){const g=[],y=[];return addContours(n,g,y,r),{contour1:g,contour2:y}}}const intersection=(e,n,r,g,y,k)=>{if(e===1/0||e===-1/0){const L=n,z=g*(L-y)+k;return{x:L,y:z}}else if(g===1/0||g===-1/0){const L=y,z=e*(L-n)+r;return{x:L,y:z}}const $=(k-r+(e*n-g*y))/(e-g),V=(-e*k+g*r+(y-n)*e*g)/(g-e);return{x:$,y:V}},getCoordY=e=>-(e-250),getCanvasY=e=>-e+250,addContours=(e,n,r,g)=>{const y=[],k=[];let V=bezierCurve.q(e,0),L=bezierCurve.qprime(e,0),z=Math.atan(-L.y/L.x);const j=g.sort((le,de)=>le.pos-de.pos),ae=[];let oe=0;for(let le=0;le<j.length;le++){const{pos:de,weight:he}=j[le];if(de<1&&le<j.length-1){const{pos:_e,weight:xe}=j[le+1];de===0&&(oe=he);for(let Ne=Math.round(1e3*de);Ne<Math.round(1e3*_e);Ne++)ae[Ne]=oe+(xe-oe)/Math.round(1e3*(_e-de))*(Ne-Math.round(1e3*de));oe=ae[ae.length-1]}else for(let _e=Math.round(1e3*de);_e<1e3;_e++)ae[_e]=he}for(let le=1;le<1e3;le++){const de=ae[le],he=bezierCurve.q(e,le/1e3),_e=bezierCurve.qprime(e,le/1e3),xe=Math.atan(-_e.y/_e.x);z<=0||he.y-V.y<0?(y.push({x:V.x-de/2*Math.sin(z),y:V.y-de/2*Math.cos(z)}),k.push({x:V.x+de/2*Math.sin(z),y:V.y+de/2*Math.cos(z)})):(k.push({x:V.x-de/2*Math.sin(z),y:V.y-de/2*Math.cos(z)}),y.push({x:V.x+de/2*Math.sin(z),y:V.y+de/2*Math.cos(z)})),V=he,L=_e,z=xe}const re=fitCurve(y,2),ue=fitCurve(k,2);re.map(le=>{const de=-(le[0].y-le[1].y)/(le[0].x-le[1].x),he=-(le[2].y-le[3].y)/(le[2].x-le[3].x),_e=-(le[1].y-le[2].y)/(le[1].x-le[2].x),xe={type:"cubic-bezier",start:le[0],control1:le[1],control2:le[2],end:le[3],k1:de,k2:he,k3:_e};n.push(xe)}),ue.map(le=>{const de=-(le[0].y-le[1].y)/(le[0].x-le[1].x),he=-(le[2].y-le[3].y)/(le[2].x-le[3].x),_e=-(le[1].y-le[2].y)/(le[1].x-le[2].x),xe={type:"cubic-bezier",start:le[0],control1:le[1],control2:le[2],end:le[3],k1:de,k2:he,k3:_e};r.push(xe)})};class Character{_character;constructor(n){this._character=n,n._o=this}getComponent(n){for(let r=0;r<this._character.components.length;r++)if(this._character.components[r].name===n)return this._character.components[r];return null}getGlyph(n){for(let r=0;r<this._character.components.length;r++)if(this._character.components[r].name===n)return this._character.components[r].value._o;return null}getLayoutByID(n){if(this._character.info&&this._character.info.layoutTree){const r=this._character.info.layoutTree;return getNodeByID(n,r)}return null}getCoords(n,r,g,y){const k=n.rect,{x:$,y:V,w:L,h:z}=k,j=$+L/y*r,ae=V+z/y*g;return{x:j,y:ae}}getRatioCoords(n,r,g,y){const{dx:k,dy:$,size:V,centerSquareSize:L}=this._character.info.gridSettings,z=Math.round((V-L)/2)+k,j=Math.round((V-L)/2+L)+k,ae=Math.round((V-L)/2)+$,oe=Math.round((V-L)/2+L)+$;return getRatioCoords(n,r,g,y,{x1:z,x2:j,y1:ae,y2:oe,l:V})}getRatioLayout(n){return getCharacterRatioLayout(this._character,n)}}const getNodeByID=(e,n)=>{for(let r=0;r<n.length;r++){const g=n[r];if(g.id===e)return g;if(g.children){const y=getNodeByID(e,g.children);if(y)return y}}return null},getLineContours=(e,n,r,g)=>{let{startWeight:y,endWeight:k}=g||{};y||(y=r),k||(k=r);let $=!1,V="center";g&&g.unticlockwise&&($=g.unticlockwise),g&&g.skeletonPos&&(V=g.skeletonPos);const L=n[`${e}_start`],z=n[`${e}_end`],j=Math.atan2(z.y-L.y,z.x-L.x),ae={};return V==="center"&&!$?(ae[`out_${e}_start`]={x:L.x+y/2*Math.sin(j),y:L.y-y/2*Math.cos(j)},ae[`in_${e}_start`]={x:L.x-y/2*Math.sin(j),y:L.y+y/2*Math.cos(j)},ae[`out_${e}_end`]={x:z.x+k/2*Math.sin(j),y:z.y-k/2*Math.cos(j)},ae[`in_${e}_end`]={x:z.x-k/2*Math.sin(j),y:z.y+k/2*Math.cos(j)}):V==="center"&&$?(ae[`out_${e}_start`]={x:L.x-y/2*Math.sin(j),y:L.y+y/2*Math.cos(j)},ae[`in_${e}_start`]={x:L.x+y/2*Math.sin(j),y:L.y-y/2*Math.cos(j)},ae[`out_${e}_end`]={x:z.x-k/2*Math.sin(j),y:z.y+k/2*Math.cos(j)},ae[`in_${e}_end`]={x:z.x+k/2*Math.sin(j),y:z.y-k/2*Math.cos(j)}):V==="inner"&&!$&&(ae[`out_${e}_start`]={x:L.x+y*Math.sin(j),y:L.y-y*Math.cos(j)},ae[`in_${e}_start`]={x:L.x,y:L.y},ae[`out_${e}_end`]={x:z.x+k*Math.sin(j),y:z.y-k*Math.cos(j)},ae[`in_${e}_end`]={x:z.x,y:z.y}),ae},bezierFn=e=>{const n=[{x:0,y:0},{x:0,y:.75},{x:.25,y:1},{x:1,y:1}];return bezierCurve.q(n,e).y},bezier1Fn=e=>{const n=[{x:0,y:.3},{x:.15,y:1},{x:.85,y:1},{x:1,y:.3}];return bezierCurve.q(n,e).y},getBezierFn=e=>e==="bezier1"?bezier1Fn:bezierFn,getCurveContours=(e,n,r,g)=>{let{startWeight:y,endWeight:k,in_startWeight:$,in_endWeight:V,out_startWeight:L,out_endWeight:z}=g||{};y||(g&&g.weightsVariation?g.weightsVariationDir==="reverse"?y=r:y=0:y=r),k||(g&&g.weightsVariation&&g.weightsVariationDir==="reverse"?k=0:k=r),$||($=y/2),V||(V=k/2),L||(L=y/2),z||(z=k/2);let j=!1,ae="center";g&&g.unticlockwise&&(j=g.unticlockwise),g&&g.skeletonPos&&(ae=g.skeletonPos);const oe=[n[`${e}_start`],{x:n[`${e}_start`].x+2/3*(n[`${e}_bend`].x-n[`${e}_start`].x),y:n[`${e}_start`].y+2/3*(n[`${e}_bend`].y-n[`${e}_start`].y)},{x:n[`${e}_end`].x+2/3*(n[`${e}_bend`].x-n[`${e}_end`].x),y:n[`${e}_end`].y+2/3*(n[`${e}_bend`].y-n[`${e}_end`].y)},n[`${e}_end`]],re=[],ue=[],le=100,de=[],he=[];for(let ze=0;ze<=le&&g;ze++)if(g.weightsVariation==="linear")if(g.weightsVariationDir==="reverse"){const Pt=(le-ze)/le;de.push(V+($-V)*Pt),he.push(z+(L-z)*Pt)}else{const Ue=ze/le;de.push($+(V-$)*Ue),he.push(L+(z-L)*Ue)}else if(g.weightsVariation==="pow")if(g.weightsVariationDir==="reverse"){const Ue=le-ze,Pt=Math.pow(Ue/le,g.weightsVariationPower);de.push(V+($-V)*Pt),he.push(z+(L-z)*Pt)}else{const Ue=Math.pow(ze/le,g.weightsVariationPower);de.push($+(V-$)*Ue),he.push(L+(z-L)*Ue)}else if(g.weightsVariation==="log")if(g.weightsVariationDir==="reverse"){const Ue=le-ze,Pt=Math.pow(Math.log(Ue/le+1)/Math.log(2),g.weightsVariationPower);de.push(V+($-V)*Pt),he.push(z+(L-z)*Pt)}else{const Ue=Math.pow(Math.log(ze/le+1)/Math.log(2),g.weightsVariationPower);de.push($+(V-$)*Ue),he.push(L+(z-L)*Ue)}else if(g.weightsVariation==="bezier"){const Ue=getBezierFn(g.weightsVariationFnType);if(g.weightsVariationDir==="reverse"){const Pt=le-ze,hn=Ue(Pt/le);de.push(V+($-V)*hn),he.push(z+(L-z)*hn)}else{const Pt=Ue(ze/le);de.push($+(V-$)*Pt),he.push(L+(z-L)*Pt)}}let _e=bezierCurve.q(oe,0),xe=bezierCurve.qprime(oe,0),Ne=Math.atan2(xe.y,xe.x);for(let ze=1;ze<=le+1;ze++){let Ue=_e,Pt=xe,hn=Ne;const Dt=de.length?de[ze-1]:$,xn=he.length?he[ze-1]:L;ze<le+1&&(Ue=bezierCurve.q(oe,ze/le),Pt=bezierCurve.qprime(oe,ze/le),hn=Math.atan2(Pt.y,Pt.x)),ae==="center"&&!j?(re.push({x:_e.x+xn*Math.sin(Ne),y:_e.y-xn*Math.cos(Ne)}),ue.push({x:_e.x-Dt*Math.sin(Ne),y:_e.y+Dt*Math.cos(Ne)})):ae==="inner"&&!j?(re.push({x:_e.x+(xn+Dt)*Math.sin(Ne),y:_e.y-(xn+Dt)*Math.cos(Ne)}),ue.push({x:_e.x,y:_e.y})):ae==="center"&&j?(re.push({x:_e.x-xn*Math.sin(Ne),y:_e.y+xn*Math.cos(Ne)}),ue.push({x:_e.x+Dt*Math.sin(Ne),y:_e.y-Dt*Math.cos(Ne)})):ae==="inner"&&j&&(re.push({x:_e.x-(xn+Dt)*Math.sin(Ne),y:_e.y+(xn+Dt)*Math.cos(Ne)}),ue.push({x:_e.x,y:_e.y})),_e=Ue,xe=Pt,Ne=hn}const{curves:$e}=fitCurvesByPoints(re),{curves:Ce}=fitCurvesByPoints(ue),Ie={};return Ie[`out_${e}_points`]=re,Ie[`in_${e}_points`]=ue,Ie[`out_${e}_curves`]=$e,Ie[`in_${e}_curves`]=Ce,Ie},getCurveContours2=(e,n,r,g)=>{let{startWeight:y,endWeight:k,in_startWeight:$,in_endWeight:V,out_startWeight:L,out_endWeight:z}=g||{};y||(g&&g.weightsVariation?g.weightsVariationDir==="reverse"?y=r:y=0:y=r),k||(g&&g.weightsVariation&&g.weightsVariationDir==="reverse"?k=0:k=r),$||($=y/2),V||(V=k/2),L||(L=y/2),z||(z=k/2);let j=!1,ae="center";g&&g.unticlockwise&&(j=g.unticlockwise),g&&g.skeletonPos&&(ae=g.skeletonPos);const oe=[];for(let ze=0;ze<n.length;ze++){const{start:Ue,control1:Pt,control2:hn,end:Dt,bend:xn}=n[ze];if(Pt&&hn)oe.push([Ue,Pt,hn,Dt]);else if(xn)oe.push([Ue,{x:Ue.x+2/3*(xn.x-Ue.x),y:Ue.y+2/3*(xn.y-Ue.y)},{x:Dt.x+2/3*(xn.x-Dt.x),y:Dt.y+2/3*(xn.y-Dt.y)},Dt]);else{const jt=distance$f(Ue,Dt)*.3;oe.push([Ue,getPointOnLine(Ue,Dt,jt),getPointOnLine(Dt,Ue,jt),Dt])}}const re=[],ue=[],le=100,de=[],he=[];for(let ze=0;ze<=le*oe.length&&g;ze++)if(g.weightsVariation==="linear")if(g.weightsVariationDir==="reverse"){const Pt=(le-ze)/le;de.push(V+($-V)*Pt),he.push(z+(L-z)*Pt)}else{const Ue=ze/le;de.push($+(V-$)*Ue),he.push(L+(z-L)*Ue)}else if(g.weightsVariation==="pow")if(g.weightsVariationDir==="reverse"){const Ue=le-ze,Pt=Math.pow(Ue/le,g.weightsVariationPower);de.push(V+($-V)*Pt),he.push(z+(L-z)*Pt)}else{const Ue=Math.pow(ze/le,g.weightsVariationPower);de.push($+(V-$)*Ue),he.push(L+(z-L)*Ue)}else if(g.weightsVariation==="log")if(g.weightsVariationDir==="reverse"){const Ue=le-ze,Pt=Math.pow(Math.log(Ue/le+1)/Math.log(2),g.weightsVariationPower);de.push(V+($-V)*Pt),he.push(z+(L-z)*Pt)}else{const Ue=Math.pow(Math.log(ze/le+1)/Math.log(2),g.weightsVariationPower);de.push($+(V-$)*Ue),he.push(L+(z-L)*Ue)}else if(g.weightsVariation==="bezier"){const Ue=getBezierFn(g.weightsVariationFnType);if(g.weightsVariationDir==="reverse"){const Pt=le-ze,hn=Ue(Pt/le);de.push(V+($-V)*hn),he.push(z+(L-z)*hn)}else{const Pt=Ue(ze/le);de.push($+(V-$)*Pt),he.push(L+(z-L)*Pt)}}let _e=bezierCurve.q(oe[0],0),xe=bezierCurve.qprime(oe[0],0);xe.x===0&&xe.y===0&&(xe={x:0,y:1});let Ne=Math.atan2(xe.y,xe.x);for(let ze=1;ze<=le*oe.length;ze++){let Ue=_e,Pt=xe,hn=Ne,Dt=Math.floor((ze-1)/le);Dt>=oe.length&&(Dt=oe.length-1);const xn=oe[Dt];let jt=ze%le;jt===0&&(jt=le);const Vn=de.length?de[ze-1]:$,Rn=he.length?he[ze-1]:L;jt<le+1&&(Ue=bezierCurve.q(xn,jt/le),Pt=bezierCurve.qprime(xn,jt/le),Pt.x===0&&Pt.y===0&&(Pt={x:0,y:1}),hn=Math.atan2(Pt.y,Pt.x)),ae==="center"&&!j?(re.push({x:_e.x+Rn*Math.sin(Ne),y:_e.y-Rn*Math.cos(Ne)}),ue.push({x:_e.x-Vn*Math.sin(Ne),y:_e.y+Vn*Math.cos(Ne)}),ze===le*oe.length&&(re.push({x:Ue.x+Rn*Math.sin(hn),y:Ue.y-Rn*Math.cos(hn)}),ue.push({x:Ue.x-Vn*Math.sin(hn),y:Ue.y+Vn*Math.cos(hn)}))):ae==="inner"&&!j?(re.push({x:_e.x+(Rn+Vn)*Math.sin(Ne),y:_e.y-(Rn+Vn)*Math.cos(Ne)}),ue.push({x:_e.x,y:_e.y}),ze===le*oe.length&&(re.push({x:Ue.x+(Rn+Vn)*Math.sin(hn),y:Ue.y-(Rn+Vn)*Math.cos(hn)}),ue.push({x:Ue.x,y:Ue.y}))):ae==="center"&&j?(re.push({x:_e.x-Rn*Math.sin(Ne),y:_e.y+Rn*Math.cos(Ne)}),ue.push({x:_e.x+Vn*Math.sin(Ne),y:_e.y-Vn*Math.cos(Ne)}),ze===le*oe.length&&(re.push({x:Ue.x-Rn*Math.sin(hn),y:Ue.y+Rn*Math.cos(hn)}),ue.push({x:Ue.x+Vn*Math.sin(hn),y:Ue.y-Vn*Math.cos(hn)}))):ae==="inner"&&j&&(re.push({x:_e.x-(Rn+Vn)*Math.sin(Ne),y:_e.y+(Rn+Vn)*Math.cos(Ne)}),ue.push({x:_e.x,y:_e.y}),ze===le*oe.length&&(re.push({x:Ue.x-(Rn+Vn)*Math.sin(hn),y:Ue.y+(Rn+Vn)*Math.cos(hn)}),ue.push({x:Ue.x,y:Ue.y}))),_e=Ue,xe=Pt,Ne=hn}const{curves:$e}=fitCurvesByPoints(re),{curves:Ce}=fitCurvesByPoints(ue),Ie={};return Ie[`out_${e}_points`]=re,Ie[`in_${e}_points`]=ue,Ie[`out_${e}_curves`]=$e,Ie[`in_${e}_curves`]=Ce,Ie},getIntersection=(e,n)=>{let r=null,g=null,y=null,k=null;if(e.type==="line"?y=e:e.type==="curve"&&(r=e),n.type==="line"?y?k=n:y=n:n.type==="curve"&&(r?g=n:r=n),g)for(let $=0;$<r.points.length-1;$++){const V=r.points[$],L=r.points[$+1];for(let z=0;z<g.points.length-1;z++){const j=g.points[z],ae=g.points[z+1],oe=calculateIntersection(V,L,j,ae);if(oe)return{corner:oe,corner_index:[$,z]}}}else{if(k)return{corner:calculateLineIntersection(y.start,y.end,k.start,k.end),corner_index:0};if(y&&r){let $=r.points[0];for(let V=1;V<r.points.length;V++){const L=r.points[V],z=calculateIntersection($,L,y.start,y.end);if(z)return{corner:z,corner_index:V}}}}return{corner:null,corner_index:0}},calculateIntersection=(e,n,r,g)=>{const y=(g.y-r.y)*(n.x-e.x)-(g.x-r.x)*(n.y-e.y);if(e.x===n.x&&e.y===n.y||r.x===g.x&&r.y===g.y&&y===0)return null;if(y===0)return n;const k=((g.x-r.x)*(e.y-r.y)-(g.y-r.y)*(e.x-r.x))/y,$=((n.x-e.x)*(e.y-r.y)-(n.y-e.y)*(e.x-r.x))/y;return k>=0&&k<=1&&$>=0&&$<=1?{x:e.x+k*(n.x-e.x),y:e.y+k*(n.y-e.y)}:null},calculateLineIntersection=(e,n,r,g)=>{const y=(g.y-r.y)*(n.x-e.x)-(g.x-r.x)*(n.y-e.y);if(y===0)return n;const k=((g.x-r.x)*(e.y-r.y)-(g.y-r.y)*(e.x-r.x))/y;return((n.x-e.x)*(e.y-r.y)-(n.y-e.y)*(e.x-r.x))/y,{x:e.x+k*(n.x-e.x),y:e.y+k*(n.y-e.y)}},fitCurvesByPoints=e=>{const n=_fitCurve(e,3.5),r=[];for(let g=0;g<n.length;g++){const y=n[g];r.push({start:y[0],control1:y[1],control2:y[2],end:y[3]})}return{curves:r}},distance$f=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getAngle=(e,n,r)=>{const g={x:e.x-n.x,y:e.y-n.y},y={x:r.x-n.x,y:r.y-n.y},k=Math.atan2(g.y,g.x),$=Math.atan2(y.y,y.x);let V=k-$;return V<0&&(V+=2*Math.PI),V>Math.PI&&(V=2*Math.PI-V),V},getRadiusPointsOnCurve=(e,n,r=!1,g=!1)=>{let y=0,k=clone(e);if(r&&k.reverse(),!n){const{curves:j}=fitCurvesByPoints(k);j[0].start,j[0].control1,j[0].control2,j[0].end;const ae=bezierCurve.qprime(getBezierCurve(j[0]),0),oe=Math.atan2(ae.y,ae.x),re={start:k[0],end:{x:k[0].x+Math.cos(oe)*100,y:k[0].y+Math.sin(oe)*100}};return{point:k[0],index:0,tangent:re,final_curves:r&&!g?reverseCurves(j):j}}for(let j=1;j<k.length;j++)if(y+=distance$f(k[j],k[j-1]),y>=n){const ae=k.slice(j),{curves:oe}=fitCurvesByPoints(ae);oe[0].start,oe[0].control1,oe[0].control2,oe[0].end;const re=bezierCurve.qprime(getBezierCurve(oe[0]),0),ue=Math.atan2(re.y,re.x),le={start:k[j],end:{x:k[j].x+Math.cos(ue)*100,y:k[j].y+Math.sin(ue)*100}};return{point:k[j],index:j,tangent:le,final_curves:r&&!g?reverseCurves(oe):oe,final_points:ae}}const{curves:$}=fitCurvesByPoints(k);$[0].start,$[0].control1,$[0].control2,$[0].end;const V=bezierCurve.qprime(getBezierCurve($[0]),0),L=Math.atan2(V.y,V.x),z={start:k[k.length-1],end:{x:k[k.length-1].x+Math.cos(L)*100,y:k[k.length-1].y+Math.sin(L)*100}};return{point:k[k.length-1],index:k.length-1,tangent:z,final_curves:r&&!g?reverseCurves($):$}},reverseCurves=e=>{const n=[];for(let r=e.length-1;r>=0;r--){const g={start:e[r].end,control1:e[r].control2,control2:e[r].control1,end:e[r].start};n.push(g)}return n},getBezierCurve=e=>[e.start,e.control1,e.control2,e.end],getCurvesPoints=e=>{const r=[];for(let g=0;g<e.length;g++){const y=e[g],k=[y.start,y.control1,y.control2,y.end];for(let $=0;$<=100;$++){const V=bezierCurve.q(k,$/100);r.push(V)}}return r},getTurnAngles=(e,n,r)=>{const g=Math.atan2(e.y-n.y,n.x-e.x),y=Math.atan2(r.y-n.y,n.x-r.x),k=y-g,$=g+k/2;return{angle1:g,angle2:y,inner_angle:k,mid_angle:$}},distanceAndFootPoint=(e,n,r)=>{const{x:g,y}=e,{x:k,y:$}=n,{x:V,y:L}=r,z=k-g,j=$-y,ae=Math.sqrt(z**2+j**2);let oe,re,ue;if(g===k){let Ie=L;const ze=Math.min(y,$),Ue=Math.max(y,$),Pt=Ie>=ze&&Ie<=Ue;Pt||(Ie=Ie<ze?ze:Ue),oe={x:g,y:Ie},re=Pt?null:{x:V,y:Ie};const hn=Math.abs(Ie-y);return ue=ae===0?0:hn/Math.abs($-y),ue=Math.min(1,Math.max(0,ue)),{distance:Math.abs(V-g),footPoint:oe,newC:re,percentageFromA:ue}}if(y===$){let Ie=V;const ze=Math.min(g,k),Ue=Math.max(g,k),Pt=Ie>=ze&&Ie<=Ue;Pt||(Ie=Ie<ze?ze:Ue),oe={x:Ie,y},re=Pt?null:{x:Ie,y:L};const hn=Math.abs(Ie-g);return ue=ae===0?0:hn/Math.abs(k-g),ue=Math.min(1,Math.max(0,ue)),{distance:Math.abs(L-y),footPoint:oe,newC:re,percentageFromA:ue}}const le=($-y)/(k-g),de=-1/le,he=(le*g-y+L-de*V)/(le-de),_e=le*(he-g)+y,xe=he>=Math.min(g,k)&&he<=Math.max(g,k)&&_e>=Math.min(y,$)&&_e<=Math.max(y,$);if(xe)oe={x:he,y:_e};else{const Ie=Math.sqrt((he-g)**2+(_e-y)**2),ze=Math.sqrt((he-k)**2+(_e-$)**2);oe=Ie<ze?{x:g,y}:{x:k,y:$}}re=xe?null:{x:V+(oe.x-he),y:L+(oe.y-_e)};const Ne=oe.x-g,$e=oe.y-y,Ce=Math.sqrt(Ne**2+$e**2);return ue=ae===0?0:Ce/ae,ue=Math.min(1,Math.max(0,ue)),{distance:Math.sqrt((he-V)**2+(_e-L)**2),footPoint:oe,newC:re,percentageFromA:ue}},turnLeft=(e,n,r)=>{const g=Math.atan2(e.y-n.y,n.x-e.x);return{x:n.x-r*Math.sin(g),y:n.y-r*Math.cos(g)}},turnRight=(e,n,r)=>{const g=Math.atan2(e.y-n.y,n.x-e.x);return{x:n.x+r*Math.sin(g),y:n.y+r*Math.cos(g)}},goStraight=(e,n,r)=>{const g=Math.atan2(e.y-n.y,n.x-e.x);return{x:n.x+r*Math.cos(g),y:n.y-r*Math.sin(g)}},turnAngle=(e,n,r,g)=>(Math.atan2(e.y-n.y,n.x-e.x),{x:e.x+g*Math.cos(r),y:e.y-g*Math.sin(r)}),turnAngleFromStart=(e,n,r,g)=>{const k=Math.atan2(e.y-n.y,n.x-e.x)+r;return{x:e.x+g*Math.cos(k),y:e.y-g*Math.sin(k)}},turnAngleFromEnd=(e,n,r,g)=>{const k=Math.atan2(e.y-n.y,n.x-e.x)+r;return{x:n.x+g*Math.cos(k),y:n.y-g*Math.sin(k)}},degreeToRadius=e=>Math.PI*e/180,radiusToDegree=e=>e*180/Math.PI,getPointOnLine=(e,n,r)=>{const g=Math.atan2(e.y-n.y,n.x-e.x);return{x:e.x+r*Math.cos(g),y:e.y-r*Math.sin(g)}},getPointOnLineByPercentage=(e,n,r)=>({x:e.x+r*(n.x-e.x),y:e.y+r*(n.y-e.y)}),isPointOnLineSegment=(e,n,r)=>{const{x:g,y}=e,{x:k,y:$}=n,{x:V,y:L}=r,z=Math.sqrt((g-k)**2+(y-$)**2),j=Math.sqrt((g-V)**2+(y-L)**2),ae=Math.sqrt((V-k)**2+(L-$)**2);return Math.abs(z+j-ae)<1e-10},getSquare=(e,n)=>[{x:e.x+n/2,y:e.y-n/2},{x:e.x-n/2,y:e.y-n/2},{x:e.x-n/2,y:e.y+n/2},{x:e.x+n/2,y:e.y+n/2}],getCircle=(e,n,r=0,g=!1)=>{let y=[{start:{x:e.x-n,y:e.y},control1:{x:e.x-n,y:e.y+n/2},control2:{x:e.x-n/2,y:e.y+n},end:{x:e.x,y:e.y+n}},{start:{x:e.x,y:e.y+n},control1:{x:e.x+n/2,y:e.y+n},control2:{x:e.x+n,y:e.y+n/2},end:{x:e.x+n,y:e.y}},{start:{x:e.x+n,y:e.y},control1:{x:e.x+n,y:e.y-n/2},control2:{x:e.x+n/2,y:e.y-n},end:{x:e.x,y:e.y-n}},{start:{x:e.x,y:e.y-n},control1:{x:e.x-n/2,y:e.y-n},control2:{x:e.x-n,y:e.y-n/2},end:{x:e.x-n,y:e.y}}];return r!==0&&(y=y.map(k=>({start:rotateFromPoint(k.start,e,r),control1:rotateFromPoint(k.control1,e,r),control2:rotateFromPoint(k.control2,e,r),end:rotateFromPoint(k.end,e,r)}))),g&&(y=reverseCurves(y)),y},getTangentOnCurves=(e,n)=>{const g=n%(1/e.length)/(1/e.length),y=Math.floor(n/(1/e.length)),k=[];let $=null,V=null,L=0;const z=100;for(let j=0;j<e.length;j++)if(j<y){const ae=[e[j].start,e[j].control1,e[j].control2,e[j].end];for(let oe=0;oe<=z;oe++){const re=bezierCurve.q(ae,oe/z);k.push(re)}}else if(j===y){const ae=[e[j].start,e[j].control1,e[j].control2,e[j].end];for(let oe=0;oe<=z;oe++)if(oe<=g*z){const re=bezierCurve.q(ae,oe/z);k.push(re)}else $||(V=bezierCurve.qprime(ae,oe/z),$=bezierCurve.q(ae,oe/z),L=Math.atan2(V.y,V.x))}return{tangent:{start:$,end:{x:$.x+100*Math.cos(L),y:$.y-100*Math.sin(L)}},point:$,final_curves:n===0?e:fitCurvesByPoints(k).curves}},rotateFromPoint=(e,n,r)=>{const g=e.x-n.x,y=e.y-n.y,k=Math.cos(r),$=Math.sin(r),V=g*k+y*$,L=-g*$+y*k;return{x:V+n.x,y:L+n.y}},FP={EllipseComponent,PenComponent,PolygonComponent,RectangleComponent,Skeleton,Joint,Character,fitCurve:_fitCurve,getLineContours,getCurveContours,getIntersection,fitCurvesByPoints,getRadiusPointsOnCurve,distance:distance$f,getCurvesPoints,getTurnAngles,distanceAndFootPoint,turnLeft,turnRight,goStraight,turnAngle,getPointOnLine,getPointOnLineByPercentage,isPointOnLineSegment,turnAngleFromStart,turnAngleFromEnd,degreeToRadius,getAngle,radiusToDegree,getCurveContours2,getSquare,getCircle,getTangentOnCurves},refline=(e,n,r)=>{const g={name:`${e.name}-${n.name}`,start:e.name,end:n.name};return r&&(g.type=r),g},range=(e,n)=>e<n.min?n.min:e>n.max?n.max:e,skeletonToBones_na=e=>{const n=[],{start:r,bend:g,end:y}=e,k=maxSegment;for(let $=0;$<k;$++){const V=$/k,L=($+1)/k,z=quadraticBezierPoint$e(r,g,y,V),j=quadraticBezierPoint$e(r,g,y,L),ae={id:`segment_${$}`,start:z,end:j,length:Math.sqrt((j.x-z.x)**2+(j.y-z.y)**2),uAxis:normalize$t({x:j.x-z.x,y:j.y-z.y}),vAxis:normalize$t({x:-(j.y-z.y),y:j.x-z.x}),children:[],bindMatrix:createIdentityMatrix$t(),currentMatrix:createIdentityMatrix$t()};$>0&&(ae.parent=`segment_${$-1}`,n[$-1].children.push(ae.id)),n.push(ae)}return n},normalize$t=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$t=()=>[1,0,0,1,0,0],quadraticBezierPoint$e=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_na=e=>{const n=new CustomGlyph(e),r={horizonalSpan:n.getParam(""),verticalSpan:n.getParam(""),bendCursor:n.getParam(""),bendDegree:Number(n.getParam(""))+30*Number(n.getParam("")),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$v(r,n)},bindSkeletonGlyph_na=e=>{e._o||instanceBasicGlyph_na(e),glyphSkeletonBind(e._o)},distance$e=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend$f=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x+r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$-g*Math.sin(L),y:V+g*Math.cos(L)}},updateGlyphByParams$v=(e,n)=>{const{horizonalSpan:r,verticalSpan:g,bendCursor:y,bendDegree:k}=e,{ox:$,oy:V}=n._glyph.skeleton,L=250+$||0,z=250+V||0,j=new FP.Joint("start",{x:L,y:z}),ae=new FP.Joint("end",{x:j.x+r,y:j.y+g});distance$e(j,ae);const oe=j.x+y*r,re=j.y+y*g,ue=Math.atan2(g,r),le=new FP.Joint("bend",{x:oe-k*Math.sin(ue),y:re+k*Math.cos(ue)});n.addJoint(j),n.addJoint(ae),n.addJoint(le);const de={start:j,bend:le,end:ae};n.addRefLine(refline(j,le)),n.addRefLine(refline(le,ae)),n.getSkeleton=()=>de},computeParamsByJoints$v=(e,n)=>{const{start:r,end:g,bend:y}=e,k=n.getParamRange(""),$=n.getParamRange(""),V=n.getParamRange(""),L=n.getParamRange(""),z=range(g.x-r.x,k),j=range(g.y-r.y,$),ae=FP.distanceAndFootPoint(r,g,y),oe=range(ae.percentageFromA,V),re=range(ae.distance,L);return{horizonalSpan:z,verticalSpan:j,bendCursor:oe,bendDegree:re,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_na=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"bend":{$.bend={x:e.tempData.bend.x+y,y:e.tempData.bend.y+k};break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};const V=getBend$f($.start,$.end,e.tempData.bendCursor,e.tempData.bendDegree);$.bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+30*Number(e.getParam("")),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$v(g,e);updateGlyphByParams$v(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$v(g,e);updateGlyphByParams$v(y,e),e.setParam("",y.horizonalSpan),e.setParam("",y.verticalSpan),e.setParam("",y.bendCursor),e.setParam("",y.bendDegree-30*Number(e.getParam(""))),e.tempData=null}},updateSkeletonListener_after_bind_na=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"bend":{$.bend={x:e.tempData.bend.x+y,y:e.tempData.bend.y+k};break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};const V=getBend$f($.start,$.end,e.tempData.bendCursor,e.tempData.bendDegree);$.bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+30*Number(e.getParam("")),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$v(g,e);updateGlyphByParams$v(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$v(g,e);updateGlyphByParams$v(y,e),updateSkeletonTransformation(e),e.setParam("",y.horizonalSpan),e.setParam("",y.verticalSpan),e.setParam("",y.bendCursor),e.setParam("",y.bendDegree-30*Number(e.getParam(""))),e.tempData=null}},skeletonToBones_dian=e=>{const n=[],{start:r,bend:g,end:y}=e,k=maxSegment;for(let $=0;$<k;$++){const V=$/k,L=($+1)/k,z=quadraticBezierPoint$d(r,g,y,V),j=quadraticBezierPoint$d(r,g,y,L),ae={id:`segment_${$}`,start:z,end:j,length:Math.sqrt((j.x-z.x)**2+(j.y-z.y)**2),uAxis:normalize$s({x:j.x-z.x,y:j.y-z.y}),vAxis:normalize$s({x:-(j.y-z.y),y:j.x-z.x}),children:[],bindMatrix:createIdentityMatrix$s(),currentMatrix:createIdentityMatrix$s()};$>0&&(ae.parent=`segment_${$-1}`,n[$-1].children.push(ae.id)),n.push(ae)}return n},normalize$s=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$s=()=>[1,0,0,1,0,0],quadraticBezierPoint$d=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_dian=e=>{const n=new CustomGlyph(e),r={horizonalSpan:n.getParam(""),verticalSpan:n.getParam(""),bendCursor:n.getParam(""),bendDegree:Number(n.getParam(""))+10*Number(n.getParam("")||1),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$u(r,n)},bindSkeletonGlyph_dian=e=>{e._o||instanceBasicGlyph_dian(e),glyphSkeletonBind(e._o)},distance$d=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend$e=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x+r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$+g*Math.sin(L),y:V+g*Math.cos(L)}},updateGlyphByParams$u=(e,n)=>{const{horizonalSpan:r,verticalSpan:g,bendCursor:y,bendDegree:k,skeletonRefPos:$,weight:V}=e,{ox:L,oy:z}=n._glyph.skeleton,j=450+L||0,ae=425+z||0,oe=new FP.Joint("start",{x:j,y:ae}),re=new FP.Joint("end",{x:oe.x+r,y:oe.y+g});distance$d(oe,re);const ue=oe.x+y*r,le=oe.y+y*g,de=Math.atan2(g,r),he=new FP.Joint("bend",{x:ue+k*Math.sin(de),y:le-k*Math.cos(de)}),_e={start:oe,bend:he,end:re};n.addJoint(oe),n.addJoint(re),n.addJoint(he),n.addRefLine(refline(oe,he)),n.addRefLine(refline(he,re)),n.getSkeleton=()=>_e},computeParamsByJoints$u=(e,n)=>{const{start:r,end:g,bend:y}=e,k=n.getParamRange(""),$=n.getParamRange(""),V=n.getParamRange(""),L=n.getParamRange(""),z=range(g.x-r.x,k),j=range(g.y-r.y,$),ae=FP.distanceAndFootPoint(r,g,y),oe=range(ae.percentageFromA,V),re=range(ae.distance,L);return{horizonalSpan:z,verticalSpan:j,bendCursor:oe,bendDegree:re,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_dian=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"bend":{$.bend={x:e.tempData.bend.x+y,y:e.tempData.bend.y+k};break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};const V=getBend$e($.start,$.end,e.tempData.bendCursor,e.tempData.bendDegree);$.bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+10*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$u(g,e);updateGlyphByParams$u(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$u(g,e);updateGlyphByParams$u(y,e),e.setParam("",y.horizonalSpan),e.setParam("",y.verticalSpan),e.setParam("",y.bendCursor),e.setParam("",y.bendDegree-10*Number(e.getParam("")||1)),e.tempData=null}},updateSkeletonListener_after_bind_dian=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"bend":{$.bend={x:e.tempData.bend.x+y,y:e.tempData.bend.y+k};break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};const V=getBend$e($.start,$.end,e.tempData.bendCursor,e.tempData.bendDegree);$.bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+10*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$u(g,e);updateGlyphByParams$u(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$u(g,e);updateGlyphByParams$u(y,e),updateSkeletonTransformation(e),e.setParam("",y.horizonalSpan),e.setParam("",y.verticalSpan),e.setParam("",y.bendCursor),e.setParam("",y.bendDegree-10*Number(e.getParam("")||1)),e.tempData=null}},skeletonToBones_tiao=e=>{const n=[],{start:r,bend:g,end:y}=e,k=maxSegment;for(let $=0;$<k;$++){const V=$/k,L=($+1)/k,z=quadraticBezierPoint$c(r,g,y,V),j=quadraticBezierPoint$c(r,g,y,L),ae={id:`segment_${$}`,start:z,end:j,length:Math.sqrt((j.x-z.x)**2+(j.y-z.y)**2),uAxis:normalize$r({x:j.x-z.x,y:j.y-z.y}),vAxis:normalize$r({x:-(j.y-z.y),y:j.x-z.x}),children:[],bindMatrix:createIdentityMatrix$r(),currentMatrix:createIdentityMatrix$r()};$>0&&(ae.parent=`segment_${$-1}`,n[$-1].children.push(ae.id)),n.push(ae)}return n},normalize$r=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$r=()=>[1,0,0,1,0,0],quadraticBezierPoint$c=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_tiao=e=>{const n=new CustomGlyph(e),r={horizonalSpan:n.getParam(""),verticalSpan:n.getParam(""),bendCursor:n.getParam(""),bendDegree:Number(n.getParam(""))+10*Number(n.getParam("")||1),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$t(r,n)},bindSkeletonGlyph_tiao=e=>{e._o||instanceBasicGlyph_tiao(e),glyphSkeletonBind(e._o)},distance$c=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend$d=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x+r*y,V=e.y-r*k,L=Math.atan2(k,y);return{x:$-g*Math.sin(L),y:V-g*Math.cos(L)}},updateGlyphByParams$t=(e,n)=>{const{horizonalSpan:r,verticalSpan:g,bendCursor:y,bendDegree:k}=e,{ox:$,oy:V}=n._glyph.skeleton,L=400+$||0,z=600+V||0,j=new FP.Joint("start",{x:L,y:z}),ae=new FP.Joint("end",{x:j.x+r,y:j.y-g});distance$c(j,ae);const oe=j.x+y*r,re=j.y-y*g,ue=Math.atan2(g,r),le=new FP.Joint("bend",{x:oe-k*Math.sin(ue),y:re-k*Math.cos(ue)});n.addJoint(j),n.addJoint(ae),n.addJoint(le);const de={start:j,bend:le,end:ae};n.addRefLine(refline(j,le)),n.addRefLine(refline(le,ae)),n.getSkeleton=()=>de},computeParamsByJoints$t=(e,n)=>{const{start:r,end:g,bend:y}=e,k=n.getParamRange(""),$=n.getParamRange(""),V=n.getParamRange(""),L=n.getParamRange(""),z=range(g.x-r.x,k),j=range(r.y-g.y,$),ae=FP.distanceAndFootPoint(r,g,y),oe=range(ae.percentageFromA,V),re=range(ae.distance,L);return{horizonalSpan:z,verticalSpan:j,bendCursor:oe,bendDegree:re,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_tiao=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"bend":{$.bend={x:e.tempData.bend.x+y,y:e.tempData.bend.y+k};break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};const V=getBend$d($.start,$.end,e.tempData.bendCursor,e.tempData.bendDegree);$.bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+10*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$t(g,e);updateGlyphByParams$t(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$t(g,e);updateGlyphByParams$t(y,e),e.setParam("",y.horizonalSpan),e.setParam("",y.verticalSpan),e.setParam("",y.bendCursor),e.setParam("",y.bendDegree-10*Number(e.getParam("")||1)),e.tempData=null}},updateSkeletonListener_after_bind_tiao=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"bend":{$.bend={x:e.tempData.bend.x+y,y:e.tempData.bend.y+k};break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};const V=getBend$d($.start,$.end,e.tempData.bendCursor,e.tempData.bendDegree);$.bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+10*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$t(g,e);updateGlyphByParams$t(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$t(g,e);updateGlyphByParams$t(y,e),updateSkeletonTransformation(e),e.setParam("",y.horizonalSpan),e.setParam("",y.verticalSpan),e.setParam("",y.bendCursor),e.setParam("",y.bendDegree-10*Number(e.getParam("")||1)),e.tempData=null}},skeletonToBones_heng_gou=e=>{const n=[],{heng_start:r,heng_end:g,gou_start:y,gou_end:k}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const $=maxSegment;for(let L=0;L<$;L++){const z=L/$,j=(L+1)/$,ae={x:r.x+(g.x-r.x)*z,y:r.y+(g.y-r.y)*z},oe={x:r.x+(g.x-r.x)*j,y:r.y+(g.y-r.y)*j};n.push({id:`heng_segment_${L}`,start:ae,end:oe,length:Math.sqrt((oe.x-ae.x)**2+(oe.y-ae.y)**2),uAxis:normalize$q({x:oe.x-ae.x,y:oe.y-ae.y}),vAxis:normalize$q({x:-(oe.y-ae.y),y:oe.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$q(),currentMatrix:createIdentityMatrix$q()})}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const V=maxSegment;for(let L=0;L<V;L++){const z=L/V,j=(L+1)/V,ae={x:y.x+(k.x-y.x)*z,y:y.y+(k.y-y.y)*z},oe={x:y.x+(k.x-y.x)*j,y:y.y+(k.y-y.y)*j},re={id:`gou_segment_${L}`,start:ae,end:oe,length:Math.sqrt((oe.x-ae.x)**2+(oe.y-ae.y)**2),uAxis:normalize$q({x:oe.x-ae.x,y:oe.y-ae.y}),vAxis:normalize$q({x:-(oe.y-ae.y),y:oe.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$q(),currentMatrix:createIdentityMatrix$q()};L===0?(re.parent=`heng_segment_${$-1}`,n[$-1].children.push(re.id)):(re.parent=`gou_segment_${L-1}`,n[$+L-1].children.push(re.id)),n.push(re)}return n},normalize$q=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$q=()=>[1,0,0,1,0,0],instanceBasicGlyph_heng_gou=e=>{const n=new CustomGlyph(e),r={heng_horizontalSpan:n.getParam("-"),heng_verticalSpan:n.getParam("-"),gou_horizontalSpan:n.getParam("-"),gou_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$s(r,n)},bindSkeletonGlyph_heng_gou=e=>{e._o||instanceBasicGlyph_heng_gou(e),glyphSkeletonBind(e._o)},updateGlyphByParams$s=(e,n)=>{const{heng_horizontalSpan:r,heng_verticalSpan:g,gou_horizontalSpan:y,gou_verticalSpan:k,skeletonRefPos:$,weight:V}=e,{ox:L,oy:z}=n._glyph.skeleton,j=250+L||0,ae=500+z||0;let oe,re;const ue=new FP.Joint("heng_start_ref",{x:j,y:ae+g/2}),le=new FP.Joint("heng_end_ref",{x:ue.x+r,y:ue.y-g});$===1?(oe=new FP.Joint("heng_start",{x:ue.x,y:ue.y+V/2}),re=new FP.Joint("heng_end",{x:le.x,y:le.y+V/2})):$===2?(oe=new FP.Joint("heng_start",{x:ue.x,y:ue.y-V/2}),re=new FP.Joint("heng_end",{x:le.x,y:le.y-V/2})):(oe=new FP.Joint("heng_start",{x:ue.x,y:ue.y}),re=new FP.Joint("heng_end",{x:le.x,y:le.y})),n.addJoint(ue),n.addJoint(le),n.addRefLine(refline(ue,le,"ref"));const de=new FP.Joint("gou_start",{x:oe.x+r,y:oe.y-g}),he=new FP.Joint("gou_end",{x:de.x-y,y:de.y+k});n.addJoint(oe),n.addJoint(re),n.addJoint(de),n.addJoint(he);const _e={heng_start:oe,heng_end:re,gou_start:de,gou_end:he};n.addRefLine(refline(oe,re)),n.addRefLine(refline(de,he)),n.getSkeleton=()=>_e},computeParamsByJoints$s=(e,n)=>{const{heng_start:r,heng_end:g,gou_start:y,gou_end:k}=e,$=n.getParamRange("-"),V=n.getParamRange("-"),L=n.getParamRange("-"),z=n.getParamRange("-"),j=range(g.x-r.x,$),ae=range(r.y-g.y,V),oe=range(y.x-k.x,L),re=range(k.y-y.y,z);return{heng_horizontalSpan:j,heng_verticalSpan:ae,gou_horizontalSpan:oe,gou_verticalSpan:re,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{e.tempData[z]&&e.tempData[z].x&&e.tempData[z].y&&($[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L})});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$s(g,e);updateGlyphByParams$s(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$s(g,e);updateGlyphByParams$s(y,e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("-",y.gou_horizontalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_heng_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$s(g,e);updateGlyphByParams$s(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$s(g,e);updateGlyphByParams$s(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("-",y.gou_horizontalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},skeletonToBones_ping_na=e=>{const n=[],{start:r,bend:g,end:y}=e,k=maxSegment;for(let $=0;$<k;$++){const V=$/k,L=($+1)/k,z=quadraticBezierPoint$b(r,g,y,V),j=quadraticBezierPoint$b(r,g,y,L),ae={id:`segment_${$}`,start:z,end:j,length:Math.sqrt((j.x-z.x)**2+(j.y-z.y)**2),uAxis:normalize$p({x:j.x-z.x,y:j.y-z.y}),vAxis:normalize$p({x:-(j.y-z.y),y:j.x-z.x}),children:[],bindMatrix:createIdentityMatrix$p(),currentMatrix:createIdentityMatrix$p()};$>0&&(ae.parent=`segment_${$-1}`,n[$-1].children.push(ae.id)),n.push(ae)}return n},normalize$p=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$p=()=>[1,0,0,1,0,0],quadraticBezierPoint$b=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_ping_na=e=>{const n=new CustomGlyph(e),r={horizonalSpan:n.getParam(""),verticalSpan:n.getParam(""),bendCursor:n.getParam(""),bendDegree:Number(n.getParam(""))+30*Number(n.getParam("")||1),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$r(r,n)},bindSkeletonGlyph_ping_na=e=>{e._o||instanceBasicGlyph_ping_na(e),glyphSkeletonBind(e._o)},distance$b=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend$c=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x+r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$+g*Math.sin(L),y:V+g*Math.cos(L)}},updateGlyphByParams$r=(e,n)=>{const{horizonalSpan:r,verticalSpan:g,bendCursor:y,bendDegree:k}=e,{ox:$,oy:V}=n._glyph.skeleton,L=250+$||0,z=425+V||0,j=new FP.Joint("start",{x:L,y:z}),ae=new FP.Joint("end",{x:j.x+r,y:j.y+g});distance$b(j,ae);const oe=j.x+y*r,re=j.y+y*g,ue=Math.atan2(g,r),le=new FP.Joint("bend",{x:oe+k*Math.sin(ue),y:re+k*Math.cos(ue)});n.addJoint(j),n.addJoint(ae),n.addJoint(le);const de={start:j,bend:le,end:ae};n.addRefLine(refline(j,le)),n.addRefLine(refline(le,ae)),n.getSkeleton=()=>de},computeParamsByJoints$r=(e,n)=>{const{start:r,end:g,bend:y}=e,k=n.getParamRange(""),$=n.getParamRange(""),V=n.getParamRange(""),L=n.getParamRange(""),z=range(g.x-r.x,k),j=range(g.y-r.y,$),ae=FP.distanceAndFootPoint(r,g,y),oe=range(ae.percentageFromA,V),re=range(ae.distance,L);return{horizonalSpan:z,verticalSpan:j,bendCursor:oe,bendDegree:re,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_ping_na=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"bend":{$.bend={x:e.tempData.bend.x+y,y:e.tempData.bend.y+k};break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};const V=getBend$c($.start,$.end,e.tempData.bendCursor,e.tempData.bendDegree);$.bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$r(g,e);updateGlyphByParams$r(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$r(g,e);updateGlyphByParams$r(y,e),e.setParam("",y.horizonalSpan),e.setParam("",y.verticalSpan),e.setParam("",y.bendCursor),e.setParam("",y.bendDegree-30*Number(e.getParam("")||1)),e.tempData=null}},updateSkeletonListener_after_bind_ping_na=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"bend":{$.bend={x:e.tempData.bend.x+y,y:e.tempData.bend.y+k};break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};const V=getBend$c($.start,$.end,e.tempData.bendCursor,e.tempData.bendDegree);$.bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$r(g,e);updateGlyphByParams$r(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$r(g,e);updateGlyphByParams$r(y,e),updateSkeletonTransformation(e),e.setParam("",y.horizonalSpan),e.setParam("",y.verticalSpan),e.setParam("",y.bendCursor),e.setParam("",y.bendDegree-30*Number(e.getParam("")||1)),e.tempData=null}},skeletonToBones_tiao_na=e=>{const n=[],{tiao_start:r,tiao_end:g,na_start:y,na_end:k,na_bend:$}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const V=maxSegment;for(let z=0;z<V;z++){const j=z/V,ae=(z+1)/V,oe={x:r.x+(g.x-r.x)*j,y:r.y+(g.y-r.y)*j},re={x:r.x+(g.x-r.x)*ae,y:r.y+(g.y-r.y)*ae},ue={id:`tiao_segment_${z}`,start:oe,end:re,length:Math.sqrt((re.x-oe.x)**2+(re.y-oe.y)**2),uAxis:normalize$o({x:re.x-oe.x,y:re.y-oe.y}),vAxis:normalize$o({x:-(re.y-oe.y),y:re.x-oe.x}),children:[],bindMatrix:createIdentityMatrix$o(),currentMatrix:createIdentityMatrix$o()};z>0&&(ue.parent=`tiao_segment_${z-1}`,n[z-1].children.push(ue.id)),n.push(ue)}const L=maxSegment;for(let z=0;z<L;z++){const j=z/L,ae=(z+1)/L,oe=quadraticBezierPoint$a(y,$,k,j),re=quadraticBezierPoint$a(y,$,k,ae),ue={id:`na_segment_${z}`,start:oe,end:re,length:Math.sqrt((re.x-oe.x)**2+(re.y-oe.y)**2),uAxis:normalize$o({x:re.x-oe.x,y:re.y-oe.y}),vAxis:normalize$o({x:-(re.y-oe.y),y:re.x-oe.x}),children:[],bindMatrix:createIdentityMatrix$o(),currentMatrix:createIdentityMatrix$o()};z===0?(ue.parent=`tiao_segment_${V-1}`,n[V-1].children.push(ue.id)):(ue.parent=`na_segment_${z-1}`,n[V+z-1].children.push(ue.id)),n.push(ue)}return n},normalize$o=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$o=()=>[1,0,0,1,0,0],quadraticBezierPoint$a=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_tiao_na=e=>{const n=new CustomGlyph(e),r={tiao_horizonalSpan:n.getParam("-"),tiao_verticalSpan:n.getParam("-"),na_horizonalSpan:n.getParam("-"),na_verticalSpan:n.getParam("-"),na_bendCursor:n.getParam("-"),na_bendDegree:Number(n.getParam("-"))+30*Number(n.getParam("")||1),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$q(r,n)},bindSkeletonGlyph_tiao_na=e=>{e._o||instanceBasicGlyph_tiao_na(e),glyphSkeletonBind(e._o)},getBend$b=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x+r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$+g*Math.sin(L),y:V+g*Math.cos(L)}},updateGlyphByParams$q=(e,n)=>{const{tiao_horizonalSpan:r,tiao_verticalSpan:g,na_horizonalSpan:y,na_verticalSpan:k,na_bendCursor:$,na_bendDegree:V}=e,{ox:L,oy:z}=n._glyph.skeleton,j=200+L||0,ae=575+z||0,oe=new FP.Joint("tiao_start",{x:j,y:ae}),re=new FP.Joint("tiao_end",{x:oe.x+r,y:oe.y-g}),ue=new FP.Joint("na_start",{x:oe.x+r,y:oe.y-g}),le=new FP.Joint("na_end",{x:ue.x+y,y:ue.y+k}),de=new FP.Joint("na_bend",{x:ue.x+y*$,y:ue.y+V});n.addJoint(oe),n.addJoint(re),n.addJoint(ue),n.addJoint(le),n.addJoint(de);const he={tiao_start:oe,tiao_end:re,na_start:ue,na_bend:de,na_end:le};n.addRefLine(refline(oe,re)),n.addRefLine(refline(ue,de)),n.addRefLine(refline(de,le)),n.getSkeleton=()=>he},computeParamsByJoints$q=(e,n)=>{const{tiao_start:r,tiao_end:g,na_start:y,na_end:k,na_bend:$}=e,V=n.getParamRange("-"),L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=n.getParamRange("-"),oe=n.getParamRange("-"),re=range(g.x-r.x,V),ue=range(r.y-g.y,L),le=range(k.x-y.x,z),de=range(k.y-y.y,j),he=FP.distanceAndFootPoint(y,k,$),_e=range(he.percentageFromA,ae),xe=range(he.distance,oe);return{tiao_horizonalSpan:re,tiao_verticalSpan:ue,na_horizonalSpan:le,na_verticalSpan:de,na_bendCursor:_e,na_bendDegree:xe,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_tiao_na=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"tiao_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"tiao_end":{$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k},$.na_start={x:e.tempData.na_start.x+y,y:e.tempData.na_start.y+k},$.na_bend={x:e.tempData.na_bend.x+y,y:e.tempData.na_bend.y+k},$.na_end={x:e.tempData.na_end.x+y,y:e.tempData.na_end.y+k};break}case"na_start":{$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k},$.na_start={x:e.tempData.na_start.x+y,y:e.tempData.na_start.y+k},$.na_bend={x:e.tempData.na_bend.x+y,y:e.tempData.na_bend.y+k},$.na_end={x:e.tempData.na_end.x+y,y:e.tempData.na_end.y+k};break}case"na_bend":{$.na_bend={x:e.tempData.na_bend.x+y,y:e.tempData.na_bend.y+k};break}case"na_end":{$.na_end={x:e.tempData.na_end.x+y,y:e.tempData.na_end.y+k};const V=getBend$b($.na_start,$.na_end,e.tempData.na_bendCursor,e.tempData.na_bendDegree);$.na_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.na_bendCursor=e.getParam("-"),e.tempData.na_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$q(g,e);updateGlyphByParams$q(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$q(g,e);updateGlyphByParams$q(y,e),e.setParam("-",y.tiao_horizonalSpan),e.setParam("-",y.tiao_verticalSpan),e.setParam("-",y.na_horizonalSpan),e.setParam("-",y.na_verticalSpan),e.setParam("-",y.na_bendCursor),e.setParam("-",y.na_bendDegree-30*Number(e.getParam("")||1)),e.tempData=null}},updateSkeletonListener_after_bind_tiao_na=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"tiao_end":{$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k},$.na_start={x:e.tempData.na_start.x+y,y:e.tempData.na_start.y+k},$.na_bend={x:e.tempData.na_bend.x+y,y:e.tempData.na_bend.y+k},$.na_end={x:e.tempData.na_end.x+y,y:e.tempData.na_end.y+k};break}case"na_start":{$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k},$.na_start={x:e.tempData.na_start.x+y,y:e.tempData.na_start.y+k},$.na_bend={x:e.tempData.na_bend.x+y,y:e.tempData.na_bend.y+k},$.na_end={x:e.tempData.na_end.x+y,y:e.tempData.na_end.y+k};break}case"na_bend":{$.na_bend={x:e.tempData.na_bend.x+y,y:e.tempData.na_bend.y+k};break}case"na_end":{$.na_end={x:e.tempData.na_end.x+y,y:e.tempData.na_end.y+k};const V=getBend$b($.na_start,$.na_end,e.tempData.na_bendCursor,e.tempData.na_bendDegree);$.na_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.na_bendCursor=e.getParam("-"),e.tempData.na_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$q(g,e);updateGlyphByParams$q(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$q(g,e);updateGlyphByParams$q(y,e),updateSkeletonTransformation(e),e.setParam("-",y.tiao_horizonalSpan),e.setParam("-",y.tiao_verticalSpan),e.setParam("-",y.na_horizonalSpan),e.setParam("-",y.na_verticalSpan),e.setParam("-",y.na_bendCursor),e.setParam("-",y.na_bendDegree-30*Number(e.getParam("")||1)),e.tempData=null}},skeletonToBones_pie_dian=e=>{const n=[],{pie_start:r,pie_end:g,pie_bend:y,dian_start:k,dian_end:$,dian_bend:V}=e,L=maxSegment;for(let j=0;j<L;j++){const ae=j/L,oe=(j+1)/L,re=quadraticBezierPoint$9(r,y,g,ae),ue=quadraticBezierPoint$9(r,y,g,oe),le={id:`pie_segment_${j}`,start:re,end:ue,length:Math.sqrt((ue.x-re.x)**2+(ue.y-re.y)**2),uAxis:normalize$n({x:ue.x-re.x,y:ue.y-re.y}),vAxis:normalize$n({x:-(ue.y-re.y),y:ue.x-re.x}),children:[],bindMatrix:createIdentityMatrix$n(),currentMatrix:createIdentityMatrix$n()};j>0&&(le.parent=`pie_segment_${j-1}`,n[j-1].children.push(le.id)),n.push(le)}const z=maxSegment;for(let j=0;j<z;j++){const ae=j/z,oe=(j+1)/z,re=quadraticBezierPoint$9(k,V,$,ae),ue=quadraticBezierPoint$9(k,V,$,oe),le={id:`dian_segment_${j}`,start:re,end:ue,length:Math.sqrt((ue.x-re.x)**2+(ue.y-re.y)**2),uAxis:normalize$n({x:ue.x-re.x,y:ue.y-re.y}),vAxis:normalize$n({x:-(ue.y-re.y),y:ue.x-re.x}),children:[],bindMatrix:createIdentityMatrix$n(),currentMatrix:createIdentityMatrix$n()};j===0?(le.parent=`pie_segment_${L-1}`,n[L-1].children.push(le.id)):(le.parent=`dian_segment_${j-1}`,n[L+j-1].children.push(le.id)),n.push(le)}return n},normalize$n=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$n=()=>[1,0,0,1,0,0],quadraticBezierPoint$9=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},BENDING_DEGREE=0,instanceBasicGlyph_pie_dian=e=>{const n=new CustomGlyph(e),r={pie_horizonalSpan:n.getParam("-"),pie_verticalSpan:n.getParam("-"),pie_bendCursor:n.getParam("-"),pie_bendDegree:Number(n.getParam("-"))+BENDING_DEGREE*Number(n.getParam("")||1),dian_horizonalSpan:n.getParam("-"),dian_verticalSpan:n.getParam("-"),dian_bendCursor:n.getParam("-"),dian_bendDegree:Number(n.getParam("-"))+BENDING_DEGREE*Number(n.getParam("")||1),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$p(r,n)},bindSkeletonGlyph_pie_dian=e=>{e._o||instanceBasicGlyph_pie_dian(e),glyphSkeletonBind(e._o)},distance$a=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend$a=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x+r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$+g*Math.sin(L),y:V+g*Math.cos(L)}},updateGlyphByParams$p=(e,n)=>{const{pie_horizonalSpan:r,pie_verticalSpan:g,pie_bendCursor:y,pie_bendDegree:k,dian_horizonalSpan:$,dian_verticalSpan:V,dian_bendCursor:L,dian_bendDegree:z,skeletonRefPos:j}=e,{ox:ae,oy:oe}=n._glyph.skeleton,re=550+ae||0,ue=200+oe||0,le=new FP.Joint("pie_start",{x:re,y:ue}),de=new FP.Joint("pie_end",{x:le.x-r,y:le.y+g});distance$a(le,de);const he=le.x-y*r,_e=le.y+y*g,xe=Math.atan2(g,r),Ne=new FP.Joint("pie_bend",{x:he+k*Math.sin(xe),y:_e+k*Math.cos(xe)}),$e=new FP.Joint("dian_start",{x:le.x-r,y:le.y+g}),Ce=new FP.Joint("dian_end",{x:$e.x+$,y:$e.y+V});distance$a($e,Ce);const Ie=$e.x+L*$,ze=$e.y+L*V,Ue=Math.atan2(V,$),Pt=new FP.Joint("dian_bend",{x:Ie+z*Math.sin(Ue),y:ze-z*Math.cos(Ue)});n.addJoint(le),n.addJoint(Ne),n.addJoint(de),n.addJoint($e),n.addJoint(Pt),n.addJoint(Ce);const hn={pie_start:le,pie_bend:Ne,pie_end:de,dian_start:$e,dian_bend:Pt,dian_end:Ce};n.addRefLine(refline(le,Ne)),n.addRefLine(refline(Ne,de)),n.addRefLine(refline($e,Pt)),n.addRefLine(refline(Pt,Ce)),n.getSkeleton=()=>hn},computeParamsByJoints$p=(e,n)=>{const{pie_start:r,pie_bend:g,pie_end:y,dian_start:k,dian_bend:$,dian_end:V}=e,L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=n.getParamRange("-"),oe=n.getParamRange("-"),re=n.getParamRange("-"),ue=n.getParamRange("-"),le=n.getParamRange("-"),de=range(r.x-y.x,L),he=range(y.y-r.y,z),_e=FP.distanceAndFootPoint(r,y,g),xe=range(_e.percentageFromA,j),Ne=range(_e.distance,ae),$e=range(V.x-k.x,oe),Ce=range(V.y-k.y,re),Ie=FP.distanceAndFootPoint(k,V,$),ze=range(Ie.percentageFromA,ue),Ue=range(Ie.distance,le);return{pie_horizonalSpan:de,pie_verticalSpan:he,pie_bendCursor:xe,pie_bendDegree:Ne,dian_horizonalSpan:$e,dian_verticalSpan:Ce,dian_bendCursor:ze,dian_bendDegree:Ue,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_pie_dian=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"pie_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"pie_bend":{$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$a($.pie_start,$.pie_end,e.tempData.pie_bendCursor,e.tempData.pie_bendDegree);$.pie_bend={x:V.x,y:V.y},$.dian_start={x:e.tempData.dian_start.x+y,y:e.tempData.dian_start.y+k},$.dian_bend={x:e.tempData.dian_bend.x+y,y:e.tempData.dian_bend.y+k},$.dian_end={x:e.tempData.dian_end.x+y,y:e.tempData.dian_end.y+k};break}case"dian_start":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$a($.pie_start,$.pie_end,e.tempData.pie_bendCursor,e.tempData.pie_bendDegree);$.pie_bend={x:V.x,y:V.y},$.dian_start={x:e.tempData.dian_start.x+y,y:e.tempData.dian_start.y+k},$.dian_bend={x:e.tempData.dian_bend.x+y,y:e.tempData.dian_bend.y+k},$.dian_end={x:e.tempData.dian_end.x+y,y:e.tempData.dian_end.y+k};break}case"dian_bend":{$.dian_bend={x:e.tempData.dian_bend.x+y,y:e.tempData.dian_bend.y+k};break}case"dian_end":{$.dian_end={x:e.tempData.dian_end.x+y,y:e.tempData.dian_end.y+k};const V=getBend$a($.dian_start,$.dian_end,e.tempData.dian_bendCursor,e.tempData.dian_bendDegree);$.dian_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.pie_bendCursor=e.getParam("-"),e.tempData.pie_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.tempData.dian_bendCursor=e.getParam("-"),e.tempData.dian_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.tempData.bendDegree=Number(e.getParam(""))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$p(g,e);updateGlyphByParams$p(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$p(g,e);updateGlyphByParams$p(y,e),e.setParam("-",y.pie_horizonalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.pie_bendCursor),e.setParam("-",y.pie_bendDegree-BENDING_DEGREE*Number(e.getParam("")||1)),e.setParam("-",y.dian_horizonalSpan),e.setParam("-",y.dian_verticalSpan),e.setParam("-",y.dian_bendCursor),e.setParam("-",y.dian_bendDegree-BENDING_DEGREE*Number(e.getParam("")||1)),e.tempData=null}},updateSkeletonListener_after_bind_pie_dian=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"pie_bend":{$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$a($.pie_start,$.pie_end,e.tempData.pie_bendCursor,e.tempData.pie_bendDegree);$.pie_bend={x:V.x,y:V.y},$.dian_start={x:e.tempData.dian_start.x+y,y:e.tempData.dian_start.y+k},$.dian_bend={x:e.tempData.dian_bend.x+y,y:e.tempData.dian_bend.y+k},$.dian_end={x:e.tempData.dian_end.x+y,y:e.tempData.dian_end.y+k};break}case"dian_start":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$a($.pie_start,$.pie_end,e.tempData.pie_bendCursor,e.tempData.pie_bendDegree);$.pie_bend={x:V.x,y:V.y},$.dian_start={x:e.tempData.dian_start.x+y,y:e.tempData.dian_start.y+k},$.dian_bend={x:e.tempData.dian_bend.x+y,y:e.tempData.dian_bend.y+k},$.dian_end={x:e.tempData.dian_end.x+y,y:e.tempData.dian_end.y+k};break}case"dian_bend":{$.dian_bend={x:e.tempData.dian_bend.x+y,y:e.tempData.dian_bend.y+k};break}case"dian_end":{$.dian_end={x:e.tempData.dian_end.x+y,y:e.tempData.dian_end.y+k};const V=getBend$a($.dian_start,$.dian_end,e.tempData.dian_bendCursor,e.tempData.dian_bendDegree);$.dian_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.pie_bendCursor=e.getParam("-"),e.tempData.pie_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.tempData.dian_bendCursor=e.getParam("-"),e.tempData.dian_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.tempData.bendCursor=e.getParam(""),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$p(g,e);updateGlyphByParams$p(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$p(g,e);updateGlyphByParams$p(y,e),updateSkeletonTransformation(e),e.setParam("-",y.pie_horizonalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.pie_bendCursor),e.setParam("-",y.pie_bendDegree-BENDING_DEGREE*Number(e.getParam("")||1)),e.setParam("-",y.dian_horizonalSpan),e.setParam("-",y.dian_verticalSpan),e.setParam("-",y.dian_bendCursor),e.setParam("-",y.dian_bendDegree-BENDING_DEGREE*Number(e.getParam("")||1)),e.tempData=null}},skeletonToBones_pie_tiao=e=>{const n=[],{pie_start:r,pie_end:g,pie_bend:y,tiao_start:k,tiao_end:$,tiao_bend:V}=e,L=maxSegment;for(let j=0;j<L;j++){const ae=j/L,oe=(j+1)/L,re=quadraticBezierPoint$8(r,y,g,ae),ue=quadraticBezierPoint$8(r,y,g,oe),le={id:`pie_segment_${j}`,start:re,end:ue,length:Math.sqrt((ue.x-re.x)**2+(ue.y-re.y)**2),uAxis:normalize$m({x:ue.x-re.x,y:ue.y-re.y}),vAxis:normalize$m({x:-(ue.y-re.y),y:ue.x-re.x}),children:[],bindMatrix:createIdentityMatrix$m(),currentMatrix:createIdentityMatrix$m()};j>0&&(le.parent=`pie_segment_${j-1}`,n[j-1].children.push(le.id)),n.push(le)}const z=maxSegment;for(let j=0;j<z;j++){const ae=j/z,oe=(j+1)/z,re=quadraticBezierPoint$8(k,V,$,ae),ue=quadraticBezierPoint$8(k,V,$,oe),le={id:`tiao_segment_${j}`,start:re,end:ue,length:Math.sqrt((ue.x-re.x)**2+(ue.y-re.y)**2),uAxis:normalize$m({x:ue.x-re.x,y:ue.y-re.y}),vAxis:normalize$m({x:-(ue.y-re.y),y:ue.x-re.x}),children:[],bindMatrix:createIdentityMatrix$m(),currentMatrix:createIdentityMatrix$m()};j===0?(le.parent=`pie_segment_${L-1}`,n[L-1].children.push(le.id)):(le.parent=`tiao_segment_${j-1}`,n[L+j-1].children.push(le.id)),n.push(le)}return n},normalize$m=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$m=()=>[1,0,0,1,0,0],quadraticBezierPoint$8=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_pie_tiao=e=>{const n=new CustomGlyph(e),r={pie_horizonalSpan:n.getParam("-"),pie_verticalSpan:n.getParam("-"),pie_bendCursor:n.getParam("-"),pie_bendDegree:Number(n.getParam("-"))+10*Number(n.getParam("")||1),tiao_horizonalSpan:n.getParam("-"),tiao_verticalSpan:n.getParam("-"),tiao_bendCursor:n.getParam("-"),tiao_bendDegree:Number(n.getParam("-"))+10*Number(n.getParam("")||1),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$o(r,n)},bindSkeletonGlyph_pie_tiao=e=>{e._o||instanceBasicGlyph_pie_tiao(e),glyphSkeletonBind(e._o)},distance$9=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend$9=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x+r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$+g*Math.sin(L),y:V+g*Math.cos(L)}},updateGlyphByParams$o=(e,n)=>{const{pie_horizonalSpan:r,pie_verticalSpan:g,pie_bendCursor:y,pie_bendDegree:k,tiao_horizonalSpan:$,tiao_verticalSpan:V,tiao_bendCursor:L,tiao_bendDegree:z}=e,{ox:j,oy:ae}=n._glyph.skeleton,oe=650+j||0,re=350+ae||0,ue=new FP.Joint("pie_start",{x:oe,y:re}),le=new FP.Joint("pie_end",{x:ue.x-r,y:ue.y+g});distance$9(ue,le);const de=ue.x-y*r,he=ue.y+y*g,_e=Math.atan2(g,r),xe=new FP.Joint("pie_bend",{x:de+k*Math.sin(_e),y:he+k*Math.cos(_e)}),Ne=new FP.Joint("tiao_start",{x:ue.x-r,y:ue.y+g}),$e=new FP.Joint("tiao_end",{x:Ne.x+$,y:Ne.y-V});distance$9(Ne,$e);const Ce=Ne.x+L*$,Ie=Ne.y-L*V,ze=Math.atan2(V,$),Ue=new FP.Joint("tiao_bend",{x:Ce-z*Math.sin(ze),y:Ie-z*Math.cos(ze)});n.addJoint(ue),n.addJoint(xe),n.addJoint(le),n.addJoint(Ne),n.addJoint(Ue),n.addJoint($e);const Pt={pie_start:ue,pie_bend:xe,pie_end:le,tiao_start:Ne,tiao_bend:Ue,tiao_end:$e};n.addRefLine(refline(ue,xe)),n.addRefLine(refline(xe,le)),n.addRefLine(refline(Ne,Ue)),n.addRefLine(refline(Ue,$e)),n.getSkeleton=()=>Pt},computeParamsByJoints$o=(e,n)=>{const{pie_start:r,pie_bend:g,pie_end:y,tiao_start:k,tiao_bend:$,tiao_end:V}=e,L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=n.getParamRange("-"),oe=n.getParamRange("-"),re=n.getParamRange("-"),ue=n.getParamRange("-"),le=n.getParamRange("-"),de=range(r.x-y.x,L),he=range(y.y-r.y,z),_e=FP.distanceAndFootPoint(r,y,g),xe=range(_e.percentageFromA,j),Ne=range(_e.distance,ae),$e=range(V.x-k.x,oe),Ce=range(k.y-V.y,re),Ie=FP.distanceAndFootPoint(k,V,$),ze=range(Ie.percentageFromA,ue),Ue=range(Ie.distance,le);return{pie_horizonalSpan:de,pie_verticalSpan:he,pie_bendCursor:xe,pie_bendDegree:Ne,tiao_horizonalSpan:$e,tiao_verticalSpan:Ce,tiao_bendCursor:ze,tiao_bendDegree:Ue,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_pie_tiao=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"pie_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"pie_bend":{$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$9($.pie_start,$.pie_end,e.tempData.pie_bendCursor,e.tempData.pie_bendDegree);$.pie_bend={x:V.x,y:V.y},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y+k},$.tiao_bend={x:e.tempData.tiao_bend.x+y,y:e.tempData.tiao_bend.y+k},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}case"tiao_start":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$9($.pie_start,$.pie_end,e.tempData.pie_bendCursor,e.tempData.pie_bendDegree);$.pie_bend={x:V.x,y:V.y},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y+k},$.tiao_bend={x:e.tempData.tiao_bend.x+y,y:e.tempData.tiao_bend.y+k},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}case"tiao_bend":{$.tiao_bend={x:e.tempData.tiao_bend.x+y,y:e.tempData.tiao_bend.y+k};break}case"tiao_end":{$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};const V=getBend$9($.tiao_start,$.tiao_end,e.tempData.tiao_bendCursor,e.tempData.tiao_bendDegree);$.tiao_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.pie_bendCursor=e.getParam("-"),e.tempData.pie_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.tempData.tiao_bendCursor=e.getParam("-"),e.tempData.tiao_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$o(g,e);updateGlyphByParams$o(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$o(g,e);updateGlyphByParams$o(y,e),e.setParam("-",y.pie_horizonalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.pie_bendCursor),e.setParam("-",y.pie_bendDegree-10*Number(e.getParam("")||1)),e.setParam("-",y.tiao_horizonalSpan),e.setParam("-",y.tiao_verticalSpan),e.setParam("-",y.tiao_bendCursor),e.setParam("-",y.tiao_bendDegree-10*Number(e.getParam("")||1)),e.tempData=null}},updateSkeletonListener_after_bind_pie_tiao=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"pie_bend":{$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$9($.pie_start,$.pie_end,e.tempData.pie_bendCursor,e.tempData.pie_bendDegree);$.pie_bend={x:V.x,y:V.y},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y+k},$.tiao_bend={x:e.tempData.tiao_bend.x+y,y:e.tempData.tiao_bend.y+k},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}case"tiao_start":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$9($.pie_start,$.pie_end,e.tempData.pie_bendCursor,e.tempData.pie_bendDegree);$.pie_bend={x:V.x,y:V.y},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y+k},$.tiao_bend={x:e.tempData.tiao_bend.x+y,y:e.tempData.tiao_bend.y+k},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}case"tiao_bend":{$.tiao_bend={x:e.tempData.tiao_bend.x+y,y:e.tempData.tiao_bend.y+k};break}case"tiao_end":{$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};const V=getBend$9($.tiao_start,$.tiao_end,e.tempData.tiao_bendCursor,e.tempData.tiao_bendDegree);$.tiao_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.pie_bendCursor=e.getParam("-"),e.tempData.pie_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.tempData.tiao_bendCursor=e.getParam("-"),e.tempData.tiao_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$o(g,e);updateGlyphByParams$o(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$o(g,e);updateGlyphByParams$o(y,e),updateSkeletonTransformation(e),e.setParam("-",y.pie_horizonalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.pie_bendCursor),e.setParam("-",y.pie_bendDegree-10*Number(e.getParam("")||1)),e.setParam("-",y.tiao_horizonalSpan),e.setParam("-",y.tiao_verticalSpan),e.setParam("-",y.tiao_bendCursor),e.setParam("-",y.tiao_bendDegree-10*Number(e.getParam("")||1)),e.tempData=null}},skeletonToBones_heng_pie_wan_gou=e=>{const n=[],{heng_start:r,heng_end:g,pie_start:y,pie_end:k,pie_bend:$,wangou_start:V,wangou_end:L,wangou_bend:z}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const j=maxSegment;for(let ue=0;ue<j;ue++){const le=ue/j,de=(ue+1)/j,he={x:r.x+(g.x-r.x)*le,y:r.y+(g.y-r.y)*le},_e={x:r.x+(g.x-r.x)*de,y:r.y+(g.y-r.y)*de},xe={id:`heng_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$l({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$l({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$l(),currentMatrix:createIdentityMatrix$l()};ue>0&&(xe.parent=`heng_segment_${ue-1}`,n[ue-1].children.push(xe.id)),n.push(xe)}const ae=maxSegment;for(let ue=0;ue<ae;ue++){const le=ue/ae,de=(ue+1)/ae,he={x:y.x+(k.x-y.x)*le,y:y.y+(k.y-y.y)*le},_e={x:y.x+(k.x-y.x)*de,y:y.y+(k.y-y.y)*de},xe={id:`pie_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$l({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$l({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$l(),currentMatrix:createIdentityMatrix$l()};ue===0?(xe.parent=`heng_segment_${j-1}`,n[j-1].children.push(xe.id)):(xe.parent=`pie_segment_${ue-1}`,n[j+ue-1].children.push(xe.id)),n.push(xe)}const oe=maxSegment;for(let ue=0;ue<oe;ue++){const le=ue/oe,de=(ue+1)/oe,he=quadraticBezierPoint$7(V,z,L,le),_e=quadraticBezierPoint$7(V,z,L,de),xe={id:`wangou_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$l({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$l({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$l(),currentMatrix:createIdentityMatrix$l()};ue===0?(xe.parent=`pie_segment_${ae-1}`,n[j+ae-1].children.push(xe.id)):(xe.parent=`wangou_segment_${ue-1}`,n[j+ae+ue-1].children.push(xe.id)),n.push(xe)}Math.sqrt((L.x-V.x)**2+(L.y-V.y)**2);const re=maxSegment;for(let ue=0;ue<re;ue++){const le=ue/re,de=(ue+1)/re,he=quadraticBezierPoint$7(V,z,L,le),_e=quadraticBezierPoint$7(V,z,L,de),xe={id:`gou_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$l({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$l({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$l(),currentMatrix:createIdentityMatrix$l()};ue===0?(xe.parent=`wangou_segment_${oe-1}`,n[j+ae+oe-1].children.push(xe.id)):(xe.parent=`gou_segment_${ue-1}`,n[j+ae+oe+ue-1].children.push(xe.id)),n.push(xe)}return n},normalize$l=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$l=()=>[1,0,0,1,0,0],quadraticBezierPoint$7=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_heng_pie_wan_gou=e=>{const n=new CustomGlyph(e),r={heng_horizontalSpan:n.getParam("-"),heng_verticalSpan:n.getParam("-"),pie_horizontalSpan:n.getParam("-"),pie_verticalSpan:n.getParam("-"),wangou_verticalSpan:n.getParam("-"),wangou_bendCursor:n.getParam("-"),wangou_bendDegree:Number(n.getParam("-"))+30*Number(n.getParam("")||1),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$n(r,n)},bindSkeletonGlyph_heng_pie_wan_gou=e=>{e._o||instanceBasicGlyph_heng_pie_wan_gou(e),glyphSkeletonBind(e._o)},distance$8=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend$8=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x+r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$+g*Math.sin(L),y:V+g*Math.cos(L)}},updateGlyphByParams$n=(e,n)=>{const{heng_horizontalSpan:r,heng_verticalSpan:g,pie_horizontalSpan:y,pie_verticalSpan:k,wangou_verticalSpan:$,wangou_bendCursor:V,wangou_bendDegree:L,skeletonRefPos:z,weight:j}=e,{ox:ae,oy:oe}=n._glyph.skeleton,re=370+ae||0,ue=245+oe||0;let le,de;const he=new FP.Joint("heng_start_ref",{x:re,y:ue+g/2}),_e=new FP.Joint("heng_end_ref",{x:he.x+r,y:he.y-g});z===1?(le=new FP.Joint("heng_start",{x:he.x,y:he.y+j/2}),de=new FP.Joint("heng_end",{x:_e.x,y:_e.y+j/2})):z===2?(le=new FP.Joint("heng_start",{x:he.x,y:he.y-j/2}),de=new FP.Joint("heng_end",{x:_e.x,y:_e.y-j/2})):(le=new FP.Joint("heng_start",{x:he.x,y:he.y}),de=new FP.Joint("heng_end",{x:_e.x,y:_e.y})),n.addJoint(he),n.addJoint(_e),n.addRefLine(refline(he,_e,"ref"));const xe=new FP.Joint("pie_start",{x:de.x,y:de.y}),Ne=new FP.Joint("pie_end",{x:xe.x-y,y:xe.y+k}),$e=new FP.Joint("wangou_start",{x:xe.x-y,y:xe.y+k}),Ce=new FP.Joint("wangou_end",{x:$e.x,y:$e.y+$});distance$8($e,Ce);const Ie=$e.x,ze=$e.y+V*$,Ue=new FP.Joint("wangou_bend",{x:Ie+L,y:ze});n.addJoint(le),n.addJoint(de),n.addJoint(xe),n.addJoint(Ne),n.addJoint($e),n.addJoint(Ue),n.addJoint(Ce);const Pt={heng_start:le,heng_end:de,pie_start:xe,pie_end:Ne,wangou_start:$e,wangou_bend:Ue,wangou_end:Ce};n.addRefLine(refline(le,de)),n.addRefLine(refline(xe,Ne)),n.addRefLine(refline($e,Ue)),n.addRefLine(refline(Ue,Ce)),n.getSkeleton=()=>Pt},computeParamsByJoints$n=(e,n)=>{const{heng_start:r,heng_end:g,pie_start:y,pie_end:k,wangou_start:$,wangou_bend:V,wangou_end:L}=e,z=n.getParamRange("-"),j=n.getParamRange("-"),ae=n.getParamRange("-"),oe=n.getParamRange("-"),re=n.getParamRange("-"),ue=n.getParamRange("-"),le=n.getParamRange("-"),de=range(g.x-r.x,z),he=range(r.y-g.y,j),_e=range(y.x-k.x,ae),xe=range(k.y-y.y,oe),Ne=range(L.y-$.y,re),$e=range((V.y-$.y)/Ne,ue),Ce=range(V.x-$.x,le);return{heng_horizontalSpan:de,heng_verticalSpan:he,pie_horizontalSpan:_e,pie_verticalSpan:xe,wangou_verticalSpan:Ne,wangou_bendCursor:$e,wangou_bendDegree:Ce,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_pie_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{e.tempData[z]&&e.tempData[z].x&&e.tempData[z].y&&($[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L})});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k},$.wangou_start={x:e.tempData.wangou_start.x+y,y:e.tempData.wangou_start.y+k},$.wangou_bend={x:e.tempData.wangou_bend.x+y,y:e.tempData.wangou_bend.y+k},$.wangou_end={x:e.tempData.wangou_end.x+y,y:e.tempData.wangou_end.y+k};break}case"pie_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k},$.wangou_start={x:e.tempData.wangou_start.x+y,y:e.tempData.wangou_start.y+k},$.wangou_bend={x:e.tempData.wangou_bend.x+y,y:e.tempData.wangou_bend.y+k},$.wangou_end={x:e.tempData.wangou_end.x+y,y:e.tempData.wangou_end.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k},$.wangou_start={x:e.tempData.wangou_start.x+y,y:e.tempData.wangou_start.y+k},$.wangou_bend={x:e.tempData.wangou_bend.x+y,y:e.tempData.wangou_bend.y+k},$.wangou_end={x:e.tempData.wangou_end.x+y,y:e.tempData.wangou_end.y+k};break}case"wangou_start":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k},$.wangou_start={x:e.tempData.wangou_start.x+y,y:e.tempData.wangou_start.y+k},$.wangou_bend={x:e.tempData.wangou_bend.x+y,y:e.tempData.wangou_bend.y+k},$.wangou_end={x:e.tempData.wangou_end.x+y,y:e.tempData.wangou_end.y+k};break}case"wangou_bend":{$.wangou_bend={x:e.tempData.wangou_bend.x+y,y:e.tempData.wangou_bend.y+k};break}case"wangou_end":{$.wangou_end={x:e.tempData.wangou_end.x,y:e.tempData.wangou_end.y+k};const V=getBend$8($.wangou_start,$.wangou_end,e.tempData.wangou_bendCursor,e.tempData.wangou_bendDegree);$.wangou_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.wangou_bendCursor=e.getParam("-"),e.tempData.wangou_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$n(g,e);updateGlyphByParams$n(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$n(g,e);updateGlyphByParams$n(y,e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("-",y.pie_horizontalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.wangou_verticalSpan),e.setParam("-",y.wangou_bendCursor),e.setParam("-",y.wangou_bendDegree-30*Number(e.getParam("")||1)),e.tempData=null}},updateSkeletonListener_after_bind_heng_pie_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k},$.wangou_start={x:e.tempData.wangou_start.x+y,y:e.tempData.wangou_start.y+k},$.wangou_bend={x:e.tempData.wangou_bend.x+y,y:e.tempData.wangou_bend.y+k},$.wangou_end={x:e.tempData.wangou_end.x+y,y:e.tempData.wangou_end.y+k};break}case"pie_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k},$.wangou_start={x:e.tempData.wangou_start.x+y,y:e.tempData.wangou_start.y+k},$.wangou_bend={x:e.tempData.wangou_bend.x+y,y:e.tempData.wangou_bend.y+k},$.wangou_end={x:e.tempData.wangou_end.x+y,y:e.tempData.wangou_end.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k},$.wangou_start={x:e.tempData.wangou_start.x+y,y:e.tempData.wangou_start.y+k},$.wangou_bend={x:e.tempData.wangou_bend.x+y,y:e.tempData.wangou_bend.y+k},$.wangou_end={x:e.tempData.wangou_end.x+y,y:e.tempData.wangou_end.y+k};break}case"wangou_start":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k},$.wangou_start={x:e.tempData.wangou_start.x+y,y:e.tempData.wangou_start.y+k},$.wangou_bend={x:e.tempData.wangou_bend.x+y,y:e.tempData.wangou_bend.y+k},$.wangou_end={x:e.tempData.wangou_end.x+y,y:e.tempData.wangou_end.y+k};break}case"wangou_bend":{$.wangou_bend={x:e.tempData.wangou_bend.x+y,y:e.tempData.wangou_bend.y+k};break}case"wangou_end":{$.wangou_end={x:e.tempData.wangou_end.x,y:e.tempData.wangou_end.y+k};const V=getBend$8($.wangou_start,$.wangou_end,e.tempData.wangou_bendCursor,e.tempData.wangou_bendDegree);$.wangou_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.wangou_bendCursor=e.getParam("-"),e.tempData.wangou_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$n(g,e);updateGlyphByParams$n(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$n(g,e);updateGlyphByParams$n(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("-",y.pie_horizontalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.wangou_verticalSpan),e.setParam("-",y.wangou_bendCursor),e.setParam("-",y.wangou_bendDegree-30*Number(e.getParam("")||1)),e.tempData=null}},skeletonToBones_xie_gou=e=>{const n=[],{xie_start:r,xie_end:g,xie_bend:y,gou_start:k,gou_end:$}=e,V=maxSegment;for(let z=0;z<V;z++){const j=z/V,ae=(z+1)/V,oe=quadraticBezierPoint$6(r,y,g,j),re=quadraticBezierPoint$6(r,y,g,ae),ue={id:`xie_segment_${z}`,start:oe,end:re,length:Math.sqrt((re.x-oe.x)**2+(re.y-oe.y)**2),uAxis:normalize$k({x:re.x-oe.x,y:re.y-oe.y}),vAxis:normalize$k({x:-(re.y-oe.y),y:re.x-oe.x}),children:[],bindMatrix:createIdentityMatrix$k(),currentMatrix:createIdentityMatrix$k()};z>0&&(ue.parent=`xie_segment_${z-1}`,n[z-1].children.push(ue.id)),n.push(ue)}Math.sqrt(($.x-k.x)**2+($.y-k.y)**2);const L=maxSegment;for(let z=0;z<L;z++){const j=z/L,ae=(z+1)/L,oe={x:k.x+($.x-k.x)*j,y:k.y+($.y-k.y)*j},re={x:k.x+($.x-k.x)*ae,y:k.y+($.y-k.y)*ae},ue={id:`gou_segment_${z}`,start:oe,end:re,length:Math.sqrt((re.x-oe.x)**2+(re.y-oe.y)**2),uAxis:normalize$k({x:re.x-oe.x,y:re.y-oe.y}),vAxis:normalize$k({x:-(re.y-oe.y),y:re.x-oe.x}),children:[],bindMatrix:createIdentityMatrix$k(),currentMatrix:createIdentityMatrix$k()};z===0?(ue.parent=`xie_segment_${V-1}`,n[V-1].children.push(ue.id)):(ue.parent=`gou_segment_${z-1}`,n[V+z-1].children.push(ue.id)),n.push(ue)}return n},normalize$k=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$k=()=>[1,0,0,1,0,0],quadraticBezierPoint$6=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_xie_gou=e=>{const n=new CustomGlyph(e),r={xie_horizonalSpan:n.getParam("-"),xie_verticalSpan:n.getParam("-"),xie_bendCursor:n.getParam("-"),xie_bendDegree:Number(n.getParam("-"))+30*Number(n.getParam("")||1),gou_horizonalSpan:n.getParam("-"),gou_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$m(r,n)},bindSkeletonGlyph_xie_gou=e=>{e._o||instanceBasicGlyph_xie_gou(e),glyphSkeletonBind(e._o)},distance$7=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend$7=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x+r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$+g*Math.sin(L),y:V+g*Math.cos(L)}},updateGlyphByParams$m=(e,n)=>{const{xie_horizonalSpan:r,xie_verticalSpan:g,xie_bendCursor:y,xie_bendDegree:k,gou_horizonalSpan:$,gou_verticalSpan:V}=e,{ox:L,oy:z}=n._glyph.skeleton,j=350+L||0,ae=250+z||0,oe=new FP.Joint("xie_start",{x:j,y:ae}),re=new FP.Joint("xie_end",{x:oe.x+r,y:oe.y+g});distance$7(oe,re);const ue=oe.x+y*r,le=oe.y+y*g,de=Math.atan2(g,r),he=new FP.Joint("xie_bend",{x:ue-k*Math.sin(de),y:le+k*Math.cos(de)}),_e=new FP.Joint("gou_start",{x:oe.x+r,y:oe.y+g}),xe=new FP.Joint("gou_end",{x:_e.x+$,y:_e.y-V});n.addJoint(oe),n.addJoint(re),n.addJoint(he),n.addJoint(_e),n.addJoint(xe);const Ne={xie_start:oe,xie_bend:he,xie_end:re,gou_start:_e,gou_end:xe};n.addRefLine(refline(oe,he)),n.addRefLine(refline(he,re)),n.addRefLine(refline(_e,xe)),n.getSkeleton=()=>Ne},computeParamsByJoints$m=(e,n)=>{const{xie_start:r,xie_end:g,xie_bend:y,gou_start:k,gou_end:$}=e,V=n.getParamRange("-"),L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=n.getParamRange("-"),oe=n.getParamRange("-"),re=range(g.x-r.x,V),ue=range(g.y-r.y,L),le=FP.distanceAndFootPoint(r,g,y),de=range(le.percentageFromA,z),he=range(le.distance,j),_e=range($.x-k.x,ae),xe=range(k.y-$.y,oe);return{xie_horizonalSpan:re,xie_verticalSpan:ue,xie_bendCursor:de,xie_bendDegree:he,gou_horizonalSpan:_e,gou_verticalSpan:xe,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_xie_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"xie_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"xie_bend":{$.xie_bend={x:e.tempData.xie_bend.x+y,y:e.tempData.xie_bend.y+k};break}case"xie_end":{$.xie_end={x:e.tempData.xie_end.x+y,y:e.tempData.xie_end.y+k};const V=getBend$7($.xie_start,$.xie_end,e.tempData.xie_bendCursor,e.tempData.xie_bendDegree);$.xie_bend={x:V.x,y:V.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.xie_end={x:e.tempData.xie_end.x+y,y:e.tempData.xie_end.y+k};const V=getBend$7($.xie_start,$.xie_end,e.tempData.xie_bendCursor,e.tempData.xie_bendDegree);$.xie_bend={x:V.x,y:V.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.xie_bendCursor=e.getParam("-"),e.tempData.xie_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$m(g,e);updateGlyphByParams$m(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$m(g,e);updateGlyphByParams$m(y,e),e.setParam("-",y.xie_horizonalSpan),e.setParam("-",y.xie_verticalSpan),e.setParam("-",y.xie_bendCursor),e.setParam("-",y.xie_bendDegree-30*Number(e.getParam("")||1)),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_xie_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"xie_bend":{$.xie_bend={x:e.tempData.xie_bend.x+y,y:e.tempData.xie_bend.y+k};break}case"xie_end":{$.xie_end={x:e.tempData.xie_end.x+y,y:e.tempData.xie_end.y+k};const V=getBend$7($.xie_start,$.xie_end,e.tempData.xie_bendCursor,e.tempData.xie_bendDegree);$.xie_bend={x:V.x,y:V.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.xie_end={x:e.tempData.xie_end.x+y,y:e.tempData.xie_end.y+k};const V=getBend$7($.xie_start,$.xie_end,e.tempData.xie_bendCursor,e.tempData.xie_bendDegree);$.xie_bend={x:V.x,y:V.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.xie_bendCursor=e.getParam("-"),e.tempData.xie_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$m(g,e);updateGlyphByParams$m(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$m(g,e);updateGlyphByParams$m(y,e),updateSkeletonTransformation(e),e.setParam("-",y.xie_horizonalSpan),e.setParam("-",y.xie_verticalSpan),e.setParam("-",y.xie_bendCursor),e.setParam("-",y.xie_bendDegree-30*Number(e.getParam("")||1)),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},skeletonToBones_shu_zhe=e=>{const n=[],{shu_start:r,shu_end:g,zhe_start:y,zhe_end:k}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const $=maxSegment;for(let L=0;L<$;L++){const z=L/$,j=(L+1)/$,ae={x:r.x+(g.x-r.x)*z,y:r.y+(g.y-r.y)*z},oe={x:r.x+(g.x-r.x)*j,y:r.y+(g.y-r.y)*j},re={id:`shu_segment_${L}`,start:ae,end:oe,length:Math.sqrt((oe.x-ae.x)**2+(oe.y-ae.y)**2),uAxis:normalize$j({x:oe.x-ae.x,y:oe.y-ae.y}),vAxis:normalize$j({x:-(oe.y-ae.y),y:oe.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$j(),currentMatrix:createIdentityMatrix$j()};L>0&&(re.parent=`shu_segment_${L-1}`,n[L-1].children.push(re.id)),n.push(re)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const V=maxSegment;for(let L=0;L<V;L++){const z=L/V,j=(L+1)/V,ae={x:y.x+(k.x-y.x)*z,y:y.y+(k.y-y.y)*z},oe={x:y.x+(k.x-y.x)*j,y:y.y+(k.y-y.y)*j},re={id:`zhe_segment_${L}`,start:ae,end:oe,length:Math.sqrt((oe.x-ae.x)**2+(oe.y-ae.y)**2),uAxis:normalize$j({x:oe.x-ae.x,y:oe.y-ae.y}),vAxis:normalize$j({x:-(oe.y-ae.y),y:oe.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$j(),currentMatrix:createIdentityMatrix$j()};L===0?(re.parent=`shu_segment_${$-1}`,n[$-1].children.push(re.id)):(re.parent=`zhe_segment_${L-1}`,n[$+L-1].children.push(re.id)),n.push(re)}return n},normalize$j=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$j=()=>[1,0,0,1,0,0],instanceBasicGlyph_shu_zhe=e=>{const n=new CustomGlyph(e),r={shu_horizontalSpan:n.getParam("-"),shu_verticalSpan:n.getParam("-"),zhe_horizontalSpan:n.getParam("-"),zhe_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$l(r,n)},bindSkeletonGlyph_shu_zhe=e=>{e._o||instanceBasicGlyph_shu_zhe(e),glyphSkeletonBind(e._o)},updateGlyphByParams$l=(e,n)=>{const{shu_horizontalSpan:r,shu_verticalSpan:g,zhe_horizontalSpan:y,zhe_verticalSpan:k,skeletonRefPos:$,weight:V}=e,{ox:L,oy:z}=n._glyph.skeleton,j=250+L||0,ae=250+z||0,oe=new FP.Joint("shu_start",{x:j,y:ae}),re=new FP.Joint("shu_end",{x:oe.x+r,y:oe.y+g});let ue,le;const de=new FP.Joint("zhe_start_ref",{x:oe.x+r,y:oe.y+g}),he=new FP.Joint("zhe_end_ref",{x:de.x+y,y:de.y-k});$===1?(ue=new FP.Joint("zhe_start",{x:de.x,y:de.y+V/2}),le=new FP.Joint("zhe_end",{x:he.x,y:he.y+V/2})):$===2?(ue=new FP.Joint("zhe_start",{x:de.x,y:de.y-V/2}),le=new FP.Joint("zhe_end",{x:he.x,y:he.y-V/2})):(ue=new FP.Joint("zhe_start",{x:de.x,y:de.y}),le=new FP.Joint("zhe_end",{x:he.x,y:he.y})),n.addJoint(de),n.addJoint(he),n.addRefLine(refline(de,he,"ref")),n.addJoint(oe),n.addJoint(re),n.addJoint(ue),n.addJoint(le);const _e={shu_start:oe,shu_end:re,zhe_start:ue,zhe_end:le};n.addRefLine(refline(oe,re)),n.addRefLine(refline(ue,le)),n.getSkeleton=()=>_e},computeParamsByJoints$l=(e,n)=>{const{shu_start:r,shu_end:g,zhe_start:y,zhe_end:k}=e,$=n.getParamRange("-"),V=n.getParamRange("-"),L=n.getParamRange("-"),z=n.getParamRange("-"),j=range(g.x-r.x,$),ae=range(g.y-r.y,V),oe=range(k.x-y.x,L),re=range(y.y-k.y,z);return{shu_horizontalSpan:j,shu_verticalSpan:ae,zhe_horizontalSpan:oe,zhe_verticalSpan:re,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_shu_zhe=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{e.tempData[z]&&e.tempData[z].x&&e.tempData[z].y&&($[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L})});break}case"shu_end":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}case"zhe_start":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$l(g,e);updateGlyphByParams$l(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$l(g,e);updateGlyphByParams$l(y,e),e.setParam("-",y.shu_horizontalSpan),e.setParam("-",y.shu_verticalSpan),e.setParam("-",y.zhe_horizontalSpan),e.setParam("-",y.zhe_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_shu_zhe=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_end":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}case"zhe_start":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$l(g,e);updateGlyphByParams$l(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$l(g,e);updateGlyphByParams$l(y,e),updateSkeletonTransformation(e),e.setParam("-",y.shu_horizontalSpan),e.setParam("-",y.shu_verticalSpan),e.setParam("-",y.zhe_horizontalSpan),e.setParam("-",y.zhe_verticalSpan),e.tempData=null}},skeletonToBones_shu_wan_gou=e=>{const n=[],{shu_start:r,shu_end:g,wan_start:y,wan_end:k,gou_start:$,gou_end:V}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const L=maxSegment;for(let ae=0;ae<L;ae++){const oe=ae/L,re=(ae+1)/L,ue={x:r.x+(g.x-r.x)*oe,y:r.y+(g.y-r.y)*oe},le={x:r.x+(g.x-r.x)*re,y:r.y+(g.y-r.y)*re},de={id:`shu_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$i({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$i({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$i(),currentMatrix:createIdentityMatrix$i()};ae>0&&(de.parent=`shu_segment_${ae-1}`,n[ae-1].children.push(de.id)),n.push(de)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const z=maxSegment;for(let ae=0;ae<z;ae++){const oe=ae/z,re=(ae+1)/z,ue={x:y.x+(k.x-y.x)*oe,y:y.y+(k.y-y.y)*oe},le={x:y.x+(k.x-y.x)*re,y:y.y+(k.y-y.y)*re},de={id:`wan_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$i({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$i({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$i(),currentMatrix:createIdentityMatrix$i()};ae===0?(de.parent=`shu_segment_${L-1}`,n[L-1].children.push(de.id)):(de.parent=`wan_segment_${ae-1}`,n[L+ae-1].children.push(de.id)),n.push(de)}Math.sqrt((V.x-$.x)**2+(V.y-$.y)**2);const j=maxSegment;for(let ae=0;ae<j;ae++){const oe=ae/j,re=(ae+1)/j,ue={x:$.x+(V.x-$.x)*oe,y:$.y+(V.y-$.y)*oe},le={x:$.x+(V.x-$.x)*re,y:$.y+(V.y-$.y)*re},de={id:`gou_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$i({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$i({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$i(),currentMatrix:createIdentityMatrix$i()};ae===0?(de.parent=`wan_segment_${z-1}`,n[L+z-1].children.push(de.id)):(de.parent=`gou_segment_${ae-1}`,n[L+z+ae-1].children.push(de.id)),n.push(de)}return n},normalize$i=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$i=()=>[1,0,0,1,0,0],instanceBasicGlyph_shu_wan_gou=e=>{const n=new CustomGlyph(e),r={shu_horizontalSpan:n.getParam("-"),shu_verticalSpan:n.getParam("-"),wan_length:n.getParam("-"),gou_horizontalSpan:n.getParam("-"),gou_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$k(r,n)},bindSkeletonGlyph_shu_wan_gou=e=>{e._o||instanceBasicGlyph_shu_wan_gou(e),glyphSkeletonBind(e._o)},updateGlyphByParams$k=(e,n)=>{const{shu_horizontalSpan:r,shu_verticalSpan:g,wan_length:y,gou_horizontalSpan:k,gou_verticalSpan:$,skeletonRefPos:V,weight:L}=e,{ox:z,oy:j}=n._glyph.skeleton,ae=370+z||0,oe=250+j||0,re=new FP.Joint("shu_start",{x:ae,y:oe}),ue=new FP.Joint("shu_end",{x:re.x+r,y:re.y+g}),le=new FP.Joint("wan_start",{x:ue.x,y:ue.y}),de=new FP.Joint("wan_end",{x:le.x+y,y:le.y}),he=new FP.Joint("gou_start",{x:le.x+y,y:le.y}),_e=new FP.Joint("gou_end",{x:he.x+k,y:he.y-$});n.addJoint(re),n.addJoint(ue),n.addJoint(le),n.addJoint(de),n.addJoint(he),n.addJoint(_e);const xe={shu_start:re,shu_end:ue,wan_start:le,wan_end:de,gou_start:he,gou_end:_e};n.addRefLine(refline(re,ue)),n.addRefLine(refline(le,de)),n.addRefLine(refline(he,_e)),n.getSkeleton=()=>xe},computeParamsByJoints$k=(e,n)=>{const{shu_start:r,shu_end:g,wan_start:y,wan_end:k,gou_start:$,gou_end:V}=e,L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=n.getParamRange("-"),oe=n.getParamRange("-"),re=range(g.x-r.x,L),ue=range(g.y-r.y,z),le=range(k.x-y.x,j),de=range(V.x-$.x,ae),he=range($.y-V.y,oe);return{shu_horizontalSpan:re,shu_verticalSpan:ue,wan_length:le,gou_horizontalSpan:de,gou_verticalSpan:he,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_shu_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{e.tempData[z]&&e.tempData[z].x&&e.tempData[z].y&&($[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L})});break}case"shu_end":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"wan_start":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"gou_start":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$k(g,e);updateGlyphByParams$k(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$k(g,e);updateGlyphByParams$k(y,e),e.setParam("-",y.shu_horizontalSpan),e.setParam("-",y.shu_verticalSpan),e.setParam("-",y.wan_length),e.setParam("-",y.gou_horizontalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_shu_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_end":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"wan_start":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"gou_start":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$k(g,e);updateGlyphByParams$k(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$k(g,e);updateGlyphByParams$k(y,e),updateSkeletonTransformation(e),e.setParam("-",y.shu_horizontalSpan),e.setParam("-",y.shu_verticalSpan),e.setParam("-",y.wan_length),e.setParam("-",y.gou_horizontalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},skeletonToBones_shu_wan=e=>{const n=[],{shu_start:r,shu_end:g,wan_start:y,wan_end:k}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const $=maxSegment;for(let L=0;L<$;L++){const z=L/$,j=(L+1)/$,ae={x:r.x+(g.x-r.x)*z,y:r.y+(g.y-r.y)*z},oe={x:r.x+(g.x-r.x)*j,y:r.y+(g.y-r.y)*j},re={id:`shu_segment_${L}`,start:ae,end:oe,length:Math.sqrt((oe.x-ae.x)**2+(oe.y-ae.y)**2),uAxis:normalize$h({x:oe.x-ae.x,y:oe.y-ae.y}),vAxis:normalize$h({x:-(oe.y-ae.y),y:oe.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$h(),currentMatrix:createIdentityMatrix$h()};L>0&&(re.parent=`shu_segment_${L-1}`,n[L-1].children.push(re.id)),n.push(re)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const V=maxSegment;for(let L=0;L<V;L++){const z=L/V,j=(L+1)/V,ae={x:y.x+(k.x-y.x)*z,y:y.y+(k.y-y.y)*z},oe={x:y.x+(k.x-y.x)*j,y:y.y+(k.y-y.y)*j},re={id:`wan_segment_${L}`,start:ae,end:oe,length:Math.sqrt((oe.x-ae.x)**2+(oe.y-ae.y)**2),uAxis:normalize$h({x:oe.x-ae.x,y:oe.y-ae.y}),vAxis:normalize$h({x:-(oe.y-ae.y),y:oe.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$h(),currentMatrix:createIdentityMatrix$h()};L===0?(re.parent=`shu_segment_${$-1}`,n[$-1].children.push(re.id)):(re.parent=`wan_segment_${L-1}`,n[$+L-1].children.push(re.id)),n.push(re)}return n},normalize$h=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$h=()=>[1,0,0,1,0,0],instanceBasicGlyph_shu_wan=e=>{const n=new CustomGlyph(e),r={shu_horizontalSpan:n.getParam("-"),shu_verticalSpan:n.getParam("-"),wan_length:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$j(r,n)},bindSkeletonGlyph_shu_wan=e=>{e._o||instanceBasicGlyph_shu_wan(e),glyphSkeletonBind(e._o)},updateGlyphByParams$j=(e,n)=>{const{shu_horizontalSpan:r,shu_verticalSpan:g,wan_length:y,skeletonRefPos:k,weight:$}=e,{ox:V,oy:L}=n._glyph.skeleton,z=400+V||0,j=350+L||0;let ae,oe;const re=new FP.Joint("shu_start_ref",{x:z,y:j}),ue=new FP.Joint("shu_end_ref",{x:re.x+r,y:re.y+g});k===1?(ae=new FP.Joint("shu_start",{x:re.x-$/2,y:re.y}),oe=new FP.Joint("shu_end",{x:ue.x-$/2,y:ue.y})):k===2?(ae=new FP.Joint("shu_start",{x:re.x+$/2,y:re.y}),oe=new FP.Joint("shu_end",{x:ue.x+$/2,y:ue.y})):(ae=new FP.Joint("shu_start",{x:re.x,y:re.y}),oe=new FP.Joint("shu_end",{x:ue.x,y:ue.y})),n.addJoint(re),n.addJoint(ue),n.addRefLine(refline(re,ue,"ref"));const le=new FP.Joint("wan_start",{x:oe.x,y:oe.y}),de=new FP.Joint("wan_end",{x:le.x+y,y:le.y});n.addJoint(ae),n.addJoint(oe),n.addJoint(le),n.addJoint(de);const he={shu_start:ae,shu_end:oe,wan_start:le,wan_end:de};n.addRefLine(refline(ae,oe)),n.addRefLine(refline(le,de)),n.getSkeleton=()=>he},computeParamsByJoints$j=(e,n)=>{const{shu_start:r,shu_end:g,wan_start:y,wan_end:k}=e,$=n.getParamRange("-"),V=n.getParamRange("-"),L=n.getParamRange("-"),z=range(g.x-r.x,$),j=range(g.y-r.y,V),ae=range(k.x-y.x,L);return{shu_horizontalSpan:z,shu_verticalSpan:j,wan_length:ae,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_shu_wan=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{e.tempData[z]&&e.tempData[z].x&&e.tempData[z].y&&($[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L})});break}case"shu_end":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};break}case"wan_start":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$j(g,e);updateGlyphByParams$j(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$j(g,e);updateGlyphByParams$j(y,e),e.setParam("-",y.shu_horizontalSpan),e.setParam("-",y.shu_verticalSpan),e.setParam("-",y.wan_length),e.tempData=null}},updateSkeletonListener_after_bind_shu_wan=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_end":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};break}case"wan_start":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$j(g,e);updateGlyphByParams$j(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$j(g,e);updateGlyphByParams$j(y,e),updateSkeletonTransformation(e),e.setParam("-",y.shu_horizontalSpan),e.setParam("-",y.shu_verticalSpan),e.setParam("-",y.wan_length),e.tempData=null}},skeletonToBones_shu_tiao=e=>{const n=[],{shu_start:r,shu_end:g,tiao_start:y,tiao_end:k}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const $=maxSegment;for(let L=0;L<$;L++){const z=L/$,j=(L+1)/$,ae={x:r.x+(g.x-r.x)*z,y:r.y+(g.y-r.y)*z},oe={x:r.x+(g.x-r.x)*j,y:r.y+(g.y-r.y)*j},re={id:`shu_segment_${L}`,start:ae,end:oe,length:Math.sqrt((oe.x-ae.x)**2+(oe.y-ae.y)**2),uAxis:normalize$g({x:oe.x-ae.x,y:oe.y-ae.y}),vAxis:normalize$g({x:-(oe.y-ae.y),y:oe.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$g(),currentMatrix:createIdentityMatrix$g()};L>0&&(re.parent=`shu_segment_${L-1}`,n[L-1].children.push(re.id)),n.push(re)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const V=maxSegment;for(let L=0;L<V;L++){const z=L/V,j=(L+1)/V,ae={x:y.x+(k.x-y.x)*z,y:y.y+(k.y-y.y)*z},oe={x:y.x+(k.x-y.x)*j,y:y.y+(k.y-y.y)*j},re={id:`tiao_segment_${L}`,start:ae,end:oe,length:Math.sqrt((oe.x-ae.x)**2+(oe.y-ae.y)**2),uAxis:normalize$g({x:oe.x-ae.x,y:oe.y-ae.y}),vAxis:normalize$g({x:-(oe.y-ae.y),y:oe.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$g(),currentMatrix:createIdentityMatrix$g()};L===0?(re.parent=`shu_segment_${$-1}`,n[$-1].children.push(re.id)):(re.parent=`tiao_segment_${L-1}`,n[$+L-1].children.push(re.id)),n.push(re)}return n},normalize$g=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$g=()=>[1,0,0,1,0,0],instanceBasicGlyph_shu_tiao=e=>{const n=new CustomGlyph(e),r={shu_horizontalSpan:n.getParam("-"),shu_verticalSpan:n.getParam("-"),tiao_horizontalSpan:n.getParam("-"),tiao_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$i(r,n)},bindSkeletonGlyph_shu_tiao=e=>{e._o||instanceBasicGlyph_shu_tiao(e),glyphSkeletonBind(e._o)},updateGlyphByParams$i=(e,n)=>{const{shu_horizontalSpan:r,shu_verticalSpan:g,tiao_horizontalSpan:y,tiao_verticalSpan:k,skeletonRefPos:$,weight:V}=e,{ox:L,oy:z}=n._glyph.skeleton,j=420+L||0,ae=250+z||0;let oe,re;const ue=new FP.Joint("shu_start_ref",{x:j,y:ae}),le=new FP.Joint("shu_end_ref",{x:ue.x+r,y:ue.y+g});$===1?(oe=new FP.Joint("shu_start",{x:ue.x-V/2,y:ue.y}),re=new FP.Joint("shu_end",{x:le.x-V/2,y:le.y})):$===2?(oe=new FP.Joint("shu_start",{x:ue.x+V/2,y:ue.y}),re=new FP.Joint("shu_end",{x:le.x+V/2,y:le.y})):(oe=new FP.Joint("shu_start",{x:ue.x,y:ue.y}),re=new FP.Joint("shu_end",{x:le.x,y:le.y})),n.addJoint(ue),n.addJoint(le),n.addRefLine(refline(ue,le,"ref"));const de=new FP.Joint("tiao_start",{x:re.x,y:re.y}),he=new FP.Joint("tiao_end",{x:de.x+y,y:de.y-k});n.addJoint(oe),n.addJoint(re),n.addJoint(de),n.addJoint(he);const _e={shu_start:oe,shu_end:re,tiao_start:de,tiao_end:he};n.addRefLine(refline(oe,re)),n.addRefLine(refline(de,he)),n.getSkeleton=()=>_e},computeParamsByJoints$i=(e,n)=>{const{shu_start:r,shu_end:g,tiao_start:y,tiao_end:k}=e,$=n.getParamRange("-"),V=n.getParamRange("-"),L=n.getParamRange("-"),z=n.getParamRange("-"),j=range(g.x-r.x,$),ae=range(g.y-r.y,V),oe=range(k.x-y.x,L),re=range(y.y-k.y,z);return{shu_horizontalSpan:j,shu_verticalSpan:ae,tiao_horizontalSpan:oe,tiao_verticalSpan:re,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_shu_tiao=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{e.tempData[z]&&e.tempData[z].x&&e.tempData[z].y&&($[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L})});break}case"shu_end":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y+k},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}case"tiao_start":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y+k},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}case"tiao_end":{$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$i(g,e);updateGlyphByParams$i(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$i(g,e);updateGlyphByParams$i(y,e),e.setParam("-",y.shu_horizontalSpan),e.setParam("-",y.shu_verticalSpan),e.setParam("-",y.tiao_horizontalSpan),e.setParam("-",y.tiao_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_shu_tiao=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_end":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y+k},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}case"tiao_start":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y+k},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}case"tiao_end":{$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$i(g,e);updateGlyphByParams$i(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$i(g,e);updateGlyphByParams$i(y,e),updateSkeletonTransformation(e),e.setParam("-",y.shu_horizontalSpan),e.setParam("-",y.shu_verticalSpan),e.setParam("-",y.tiao_horizontalSpan),e.setParam("-",y.tiao_verticalSpan),e.tempData=null}},skeletonToBones_shu_pie=e=>{const n=[],{shu_start:r,shu_end:g,pie_start:y,pie_bend:k,pie_end:$}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const V=maxSegment;for(let z=0;z<V;z++){const j=z/V,ae=(z+1)/V,oe={x:r.x+(g.x-r.x)*j,y:r.y+(g.y-r.y)*j},re={x:r.x+(g.x-r.x)*ae,y:r.y+(g.y-r.y)*ae};n.push({id:`shu_segment_${z}`,start:oe,end:re,length:Math.sqrt((re.x-oe.x)**2+(re.y-oe.y)**2),uAxis:normalize$f({x:re.x-oe.x,y:re.y-oe.y}),vAxis:normalize$f({x:-(re.y-oe.y),y:re.x-oe.x}),children:[],bindMatrix:createIdentityMatrix$f(),currentMatrix:createIdentityMatrix$f()})}const L=maxSegment;for(let z=0;z<L;z++){const j=z/L,ae=(z+1)/L,oe=quadraticBezierPoint$5(y,k,$,j),re=quadraticBezierPoint$5(y,k,$,ae),ue={id:`pie_segment_${z}`,start:oe,end:re,length:Math.sqrt((re.x-oe.x)**2+(re.y-oe.y)**2),uAxis:normalize$f({x:re.x-oe.x,y:re.y-oe.y}),vAxis:normalize$f({x:-(re.y-oe.y),y:re.x-oe.x}),children:[],bindMatrix:createIdentityMatrix$f(),currentMatrix:createIdentityMatrix$f()};z===0?(ue.parent=`shu_segment_${V-1}`,n[V-1].children.push(ue.id)):(ue.parent=`pie_segment_${z-1}`,n[V+z-1].children.push(ue.id)),n.push(ue)}return n},normalize$f=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$f=()=>[1,0,0,1,0,0],quadraticBezierPoint$5=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_shu_pie=e=>{const n=new CustomGlyph(e),r={shu_length:n.getParam("-"),pie_horizonalSpan:n.getParam("-"),pie_verticalSpan:n.getParam("-"),pie_bendCursor:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$h(r,n)},bindSkeletonGlyph_shu_pie=e=>{e._o||instanceBasicGlyph_shu_pie(e),glyphSkeletonBind(e._o)},getBend$6=(e,n,r)=>{const g=Math.abs(n.y-e.y);return{x:e.x,y:e.y+r*g}},updateGlyphByParams$h=(e,n)=>{const{shu_length:r,pie_horizonalSpan:g,pie_verticalSpan:y,pie_bendCursor:k,skeletonRefPos:$,weight:V}=e,{ox:L,oy:z}=n._glyph.skeleton,j=600+L||0,ae=250+z||0;let oe,re;const ue=new FP.Joint("shu_start_ref",{x:j,y:ae}),le=new FP.Joint("shu_end_ref",{x:ue.x,y:ue.y+r});$===1?(oe=new FP.Joint("shu_start",{x:ue.x-V/2,y:ue.y}),re=new FP.Joint("shu_end",{x:le.x-V/2,y:le.y})):$===2?(oe=new FP.Joint("shu_start",{x:ue.x+V/2,y:ue.y}),re=new FP.Joint("shu_end",{x:le.x+V/2,y:le.y})):(oe=new FP.Joint("shu_start",{x:ue.x,y:ue.y}),re=new FP.Joint("shu_end",{x:le.x,y:le.y})),n.addJoint(ue),n.addJoint(le),n.addRefLine(refline(ue,le,"ref"));const de=new FP.Joint("pie_start",{x:oe.x,y:oe.y+r}),he=new FP.Joint("pie_bend",{x:de.x,y:de.y+k*y}),_e=new FP.Joint("pie_end",{x:de.x-g,y:de.y+y});n.addJoint(oe),n.addJoint(re),n.addJoint(de),n.addJoint(_e),n.addJoint(he);const xe={shu_start:oe,shu_end:re,pie_start:de,pie_end:_e,pie_bend:he};n.addRefLine(refline(oe,re)),n.addRefLine(refline(de,he)),n.addRefLine(refline(he,_e)),n.getSkeleton=()=>xe},computeParamsByJoints$h=(e,n)=>{const{shu_start:r,shu_end:g,pie_start:y,pie_bend:k,pie_end:$}=e,V=n.getParamRange("-"),L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=range(g.y-r.y,V),oe=range(y.x-$.x,L),re=range($.y-y.y,z),ue=range((k.y-y.y)/re,j);return{shu_length:ae,pie_horizonalSpan:oe,pie_verticalSpan:re,pie_bendCursor:ue,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_shu_pie=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"shu_end":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.pie_start={x:e.tempData.pie_start.x,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x,y:e.tempData.pie_end.y+k};break}case"pie_start":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.pie_start={x:e.tempData.pie_start.x,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x,y:e.tempData.pie_end.y+k};break}case"pie_bend":{$.pie_bend={x:e.tempData.pie_bend.x,y:e.tempData.pie_bend.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$6($.pie_start,$.pie_end,e.tempData.pie_bendCursor);$.pie_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.pie_bendCursor=e.getParam("-"),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$h(g,e);updateGlyphByParams$h(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$h(g,e);updateGlyphByParams$h(y,e),e.setParam("-",y.shu_length),e.setParam("-",y.pie_horizonalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.pie_bendCursor),e.tempData=null}},updateSkeletonListener_after_bind_shu_pie=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_end":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.pie_start={x:e.tempData.pie_start.x,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x,y:e.tempData.pie_end.y+k};break}case"pie_start":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.pie_start={x:e.tempData.pie_start.x,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x,y:e.tempData.pie_end.y+k};break}case"pie_bend":{$.pie_bend={x:e.tempData.pie_bend.x,y:e.tempData.pie_bend.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$6($.pie_start,$.pie_end,e.tempData.pie_bendCursor);$.pie_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.pie_bendCursor=e.getParam("-"),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$h(g,e);updateGlyphByParams$h(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$h(g,e);updateGlyphByParams$h(y,e),updateSkeletonTransformation(e),e.setParam("-",y.shu_length),e.setParam("-",y.pie_horizonalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.pie_bendCursor),e.tempData=null}},skeletonToBones_heng_zhe_tiao=e=>{const n=[],{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k,tiao_start:$,tiao_end:V}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const L=maxSegment;for(let ae=0;ae<L;ae++){const oe=ae/L,re=(ae+1)/L,ue={x:r.x+(g.x-r.x)*oe,y:r.y+(g.y-r.y)*oe},le={x:r.x+(g.x-r.x)*re,y:r.y+(g.y-r.y)*re},de={id:`heng_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$e({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$e({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$e(),currentMatrix:createIdentityMatrix$e()};ae>0&&(de.parent=`heng_segment_${ae-1}`,n[ae-1].children.push(de.id)),n.push(de)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const z=maxSegment;for(let ae=0;ae<z;ae++){const oe=ae/z,re=(ae+1)/z,ue={x:y.x+(k.x-y.x)*oe,y:y.y+(k.y-y.y)*oe},le={x:y.x+(k.x-y.x)*re,y:y.y+(k.y-y.y)*re},de={id:`zhe_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$e({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$e({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$e(),currentMatrix:createIdentityMatrix$e()};ae===0?(de.parent=`heng_segment_${L-1}`,n[L-1].children.push(de.id)):(de.parent=`zhe_segment_${ae-1}`,n[L+ae-1].children.push(de.id)),n.push(de)}Math.sqrt((V.x-$.x)**2+(V.y-$.y)**2);const j=maxSegment;for(let ae=0;ae<j;ae++){const oe=ae/j,re=(ae+1)/j,ue={x:$.x+(V.x-$.x)*oe,y:$.y+(V.y-$.y)*oe},le={x:$.x+(V.x-$.x)*re,y:$.y+(V.y-$.y)*re},de={id:`tiao_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$e({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$e({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$e(),currentMatrix:createIdentityMatrix$e()};ae===0?(de.parent=`zhe_segment_${z-1}`,n[L+z-1].children.push(de.id)):(de.parent=`tiao_segment_${ae-1}`,n[L+z+ae-1].children.push(de.id)),n.push(de)}return n},normalize$e=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$e=()=>[1,0,0,1,0,0],instanceBasicGlyph_heng_zhe_tiao=e=>{const n=new CustomGlyph(e),r={heng_horizontalSpan:n.getParam("-"),heng_verticalSpan:n.getParam("-"),zhe_horizontalSpan:n.getParam("-"),zhe_verticalSpan:n.getParam("-"),tiao_horizontalSpan:n.getParam("-"),tiao_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$g(r,n)},bindSkeletonGlyph_heng_zhe_tiao=e=>{e._o||instanceBasicGlyph_heng_zhe_tiao(e),glyphSkeletonBind(e._o)},updateGlyphByParams$g=(e,n)=>{const{heng_horizontalSpan:r,heng_verticalSpan:g,zhe_horizontalSpan:y,zhe_verticalSpan:k,tiao_horizontalSpan:$,tiao_verticalSpan:V,skeletonRefPos:L,weight:z}=e,{ox:j,oy:ae}=n._glyph.skeleton,oe=425+j||0,re=245+ae||0;let ue,le;const de=new FP.Joint("heng_start_ref",{x:oe,y:re+g/2}),he=new FP.Joint("heng_end_ref",{x:de.x+r,y:de.y-g});L===1?(ue=new FP.Joint("heng_start",{x:de.x,y:de.y+z/2}),le=new FP.Joint("heng_end",{x:he.x,y:he.y+z/2})):L===2?(ue=new FP.Joint("heng_start",{x:de.x,y:de.y-z/2}),le=new FP.Joint("heng_end",{x:he.x,y:he.y-z/2})):(ue=new FP.Joint("heng_start",{x:de.x,y:de.y}),le=new FP.Joint("heng_end",{x:he.x,y:he.y})),n.addJoint(de),n.addJoint(he),n.addRefLine(refline(de,he,"ref"));let _e,xe;const Ne=new FP.Joint("zhe_start_ref",{x:he.x,y:he.y}),$e=new FP.Joint("zhe_end_ref",{x:Ne.x+y,y:Ne.y+k});L===1?(_e=new FP.Joint("zhe_start",{x:Ne.x-z/2,y:Ne.y}),xe=new FP.Joint("zhe_end",{x:$e.x-z/2,y:$e.y})):L===2?(_e=new FP.Joint("zhe_start",{x:Ne.x+z/2,y:Ne.y}),xe=new FP.Joint("zhe_end",{x:$e.x+z/2,y:$e.y})):(_e=new FP.Joint("zhe_start",{x:Ne.x,y:Ne.y}),xe=new FP.Joint("zhe_end",{x:$e.x,y:$e.y})),n.addJoint(Ne),n.addJoint($e),n.addRefLine(refline(Ne,$e,"ref"));const Ce=new FP.Joint("tiao_start",{x:xe.x,y:xe.y}),Ie=new FP.Joint("tiao_end",{x:Ce.x+$,y:Ce.y-V});n.addJoint(ue),n.addJoint(le),n.addJoint(_e),n.addJoint(xe),n.addJoint(Ce),n.addJoint(Ie);const ze={heng_start:ue,heng_end:le,zhe_start:_e,zhe_end:xe,tiao_start:Ce,tiao_end:Ie};n.addRefLine(refline(ue,le)),n.addRefLine(refline(_e,xe)),n.addRefLine(refline(Ce,Ie)),n.getSkeleton=()=>ze},computeParamsByJoints$g=(e,n)=>{const{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k,tiao_start:$,tiao_end:V}=e,L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=n.getParamRange("-"),oe=n.getParamRange("-"),re=n.getParamRange("-"),ue=range(g.x-r.x,L),le=range(r.y-g.y,z),de=range(k.x-y.x,j),he=range(k.y-y.y,ae),_e=range(V.x-$.x,oe),xe=range($.y-V.y,re);return{heng_horizontalSpan:ue,heng_verticalSpan:le,zhe_horizontalSpan:de,zhe_verticalSpan:he,tiao_horizontalSpan:_e,tiao_verticalSpan:xe,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_zhe_tiao=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{e.tempData[z]&&e.tempData[z].x&&e.tempData[z].y&&($[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L})});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y+k},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y+k},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y+k},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}case"tiao_start":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y+k},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}case"tiao_end":{$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$g(g,e);updateGlyphByParams$g(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$g(g,e);updateGlyphByParams$g(y,e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("-",y.zhe_horizontalSpan),e.setParam("-",y.zhe_verticalSpan),e.setParam("-",y.tiao_horizontalSpan),e.setParam("-",y.tiao_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_heng_zhe_tiao=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y+k},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y+k},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y+k},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}case"tiao_start":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y+k},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}case"tiao_end":{$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$g(g,e);updateGlyphByParams$g(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$g(g,e);updateGlyphByParams$g(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("-",y.zhe_horizontalSpan),e.setParam("-",y.zhe_verticalSpan),e.setParam("-",y.tiao_horizontalSpan),e.setParam("-",y.tiao_verticalSpan),e.tempData=null}},skeletonToBones_heng_zhe2=e=>{const n=[],{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const $=maxSegment;for(let L=0;L<$;L++){const z=L/$,j=(L+1)/$,ae={x:r.x+(g.x-r.x)*z,y:r.y+(g.y-r.y)*z},oe={x:r.x+(g.x-r.x)*j,y:r.y+(g.y-r.y)*j},re={id:`heng_segment_${L}`,start:ae,end:oe,length:Math.sqrt((oe.x-ae.x)**2+(oe.y-ae.y)**2),uAxis:normalize$d({x:oe.x-ae.x,y:oe.y-ae.y}),vAxis:normalize$d({x:-(oe.y-ae.y),y:oe.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$d(),currentMatrix:createIdentityMatrix$d()};L>0&&(re.parent=`heng_segment_${L-1}`,n[L-1].children.push(re.id)),n.push(re)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const V=maxSegment;for(let L=0;L<V;L++){const z=L/V,j=(L+1)/V,ae={x:y.x+(k.x-y.x)*z,y:y.y+(k.y-y.y)*z},oe={x:y.x+(k.x-y.x)*j,y:y.y+(k.y-y.y)*j},re={id:`zhe_segment_${L}`,start:ae,end:oe,length:Math.sqrt((oe.x-ae.x)**2+(oe.y-ae.y)**2),uAxis:normalize$d({x:oe.x-ae.x,y:oe.y-ae.y}),vAxis:normalize$d({x:-(oe.y-ae.y),y:oe.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$d(),currentMatrix:createIdentityMatrix$d()};L===0?(re.parent=`heng_segment_${$-1}`,n[$-1].children.push(re.id)):(re.parent=`zhe_segment_${L-1}`,n[$+L-1].children.push(re.id)),n.push(re)}return n},normalize$d=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$d=()=>[1,0,0,1,0,0],instanceBasicGlyph_heng_zhe2=e=>{const n=new CustomGlyph(e),r={heng_horizontalSpan:n.getParam("-"),heng_verticalSpan:n.getParam("-"),zhe_length:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$f(r,n)},bindSkeletonGlyph_heng_zhe2=e=>{e._o||instanceBasicGlyph_heng_zhe2(e),glyphSkeletonBind(e._o)},updateGlyphByParams$f=(e,n)=>{const{heng_horizontalSpan:r,heng_verticalSpan:g,zhe_length:y,skeletonRefPos:k,weight:$}=e,{ox:V,oy:L}=n._glyph.skeleton,z=250+V||0,j=345+L||0;let ae,oe;const re=new FP.Joint("heng_start_ref",{x:z,y:j+g/2}),ue=new FP.Joint("heng_end_ref",{x:re.x+r,y:re.y-g});k===1?(ae=new FP.Joint("heng_start",{x:re.x,y:re.y+$/2}),oe=new FP.Joint("heng_end",{x:ue.x,y:ue.y+$/2})):k===2?(ae=new FP.Joint("heng_start",{x:re.x,y:re.y-$/2}),oe=new FP.Joint("heng_end",{x:ue.x,y:ue.y-$/2})):(ae=new FP.Joint("heng_start",{x:re.x,y:re.y}),oe=new FP.Joint("heng_end",{x:ue.x,y:ue.y})),n.addJoint(re),n.addJoint(ue),n.addRefLine(refline(re,ue,"ref"));let le,de;const he=new FP.Joint("zhe_start_ref",{x:ue.x,y:ue.y}),_e=new FP.Joint("zhe_end_ref",{x:he.x,y:he.y+y});k===1?(le=new FP.Joint("zhe_start",{x:he.x-$/2,y:he.y}),de=new FP.Joint("zhe_end",{x:_e.x-$/2,y:_e.y})):k===2?(le=new FP.Joint("zhe_start",{x:he.x+$/2,y:he.y}),de=new FP.Joint("zhe_end",{x:_e.x+$/2,y:_e.y})):(le=new FP.Joint("zhe_start",{x:he.x,y:he.y}),de=new FP.Joint("zhe_end",{x:_e.x,y:_e.y})),n.addJoint(he),n.addJoint(_e),n.addRefLine(refline(he,_e,"ref")),n.addJoint(ae),n.addJoint(oe),n.addJoint(le),n.addJoint(de);const xe={heng_start:ae,heng_end:oe,zhe_start:le,zhe_end:de};n.addRefLine(refline(ae,oe)),n.addRefLine(refline(le,de)),n.getSkeleton=()=>xe},computeParamsByJoints$f=(e,n)=>{const{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k}=e,$=n.getParamRange("-"),V=n.getParamRange("-"),L=n.getParamRange("-"),z=range(g.x-r.x,$),j=range(r.y-g.y,V),ae=range(k.y-y.y,L);return{heng_horizontalSpan:z,heng_verticalSpan:j,zhe_length:ae,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_zhe2=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{e.tempData[z]&&e.tempData[z].x&&e.tempData[z].y&&($[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L})});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x,y:e.tempData.zhe_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$f(g,e);updateGlyphByParams$f(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$f(g,e);updateGlyphByParams$f(y,e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("-",y.zhe_length),e.tempData=null}},updateSkeletonListener_after_bind_heng_zhe2=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x,y:e.tempData.zhe_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$f(g,e);updateGlyphByParams$f(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$f(g,e);updateGlyphByParams$f(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("-",y.zhe_length),e.tempData=null}},skeletonToBones_heng_zhe_wan=e=>{const n=[],{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k,wan_start:$,wan_end:V}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const L=maxSegment;for(let ae=0;ae<L;ae++){const oe=ae/L,re=(ae+1)/L,ue={x:r.x+(g.x-r.x)*oe,y:r.y+(g.y-r.y)*oe},le={x:r.x+(g.x-r.x)*re,y:r.y+(g.y-r.y)*re},de={id:`heng_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$c({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$c({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$c(),currentMatrix:createIdentityMatrix$c()};ae>0&&(de.parent=`heng_segment_${ae-1}`,n[ae-1].children.push(de.id)),n.push(de)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const z=maxSegment;for(let ae=0;ae<z;ae++){const oe=ae/z,re=(ae+1)/z,ue={x:y.x+(k.x-y.x)*oe,y:y.y+(k.y-y.y)*oe},le={x:y.x+(k.x-y.x)*re,y:y.y+(k.y-y.y)*re},de={id:`zhe_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$c({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$c({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$c(),currentMatrix:createIdentityMatrix$c()};ae===0?(de.parent=`heng_segment_${L-1}`,n[L-1].children.push(de.id)):(de.parent=`zhe_segment_${ae-1}`,n[L+ae-1].children.push(de.id)),n.push(de)}Math.sqrt((V.x-$.x)**2+(V.y-$.y)**2);const j=maxSegment;for(let ae=0;ae<j;ae++){const oe=ae/j,re=(ae+1)/j,ue={x:$.x+(V.x-$.x)*oe,y:$.y+(V.y-$.y)*oe},le={x:$.x+(V.x-$.x)*re,y:$.y+(V.y-$.y)*re},de={id:`wan_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$c({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$c({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$c(),currentMatrix:createIdentityMatrix$c()};ae===0?(de.parent=`zhe_segment_${z-1}`,n[L+z-1].children.push(de.id)):(de.parent=`wan_segment_${ae-1}`,n[L+z+ae-1].children.push(de.id)),n.push(de)}return n},normalize$c=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$c=()=>[1,0,0,1,0,0],instanceBasicGlyph_heng_zhe_wan=e=>{const n=new CustomGlyph(e),r={heng_horizontalSpan:n.getParam("-"),heng_verticalSpan:n.getParam("-"),zhe_horizontalSpan:n.getParam("-"),zhe_verticalSpan:n.getParam("-"),wan_length:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$e(r,n)},bindSkeletonGlyph_heng_zhe_wan=e=>{e._o||instanceBasicGlyph_heng_zhe_wan(e),glyphSkeletonBind(e._o)},updateGlyphByParams$e=(e,n)=>{const{heng_horizontalSpan:r,heng_verticalSpan:g,zhe_horizontalSpan:y,zhe_verticalSpan:k,wan_length:$,skeletonRefPos:V,weight:L}=e,{ox:z,oy:j}=n._glyph.skeleton,ae=300+z||0,oe=345+j||0;let re,ue;const le=new FP.Joint("heng_start_ref",{x:ae,y:oe+g/2}),de=new FP.Joint("heng_end_ref",{x:le.x+r,y:le.y-g});V===1?(re=new FP.Joint("heng_start",{x:le.x,y:le.y+L/2}),ue=new FP.Joint("heng_end",{x:de.x,y:de.y+L/2})):V===2?(re=new FP.Joint("heng_start",{x:le.x,y:le.y-L/2}),ue=new FP.Joint("heng_end",{x:de.x,y:de.y-L/2})):(re=new FP.Joint("heng_start",{x:le.x,y:le.y}),ue=new FP.Joint("heng_end",{x:de.x,y:de.y})),n.addJoint(le),n.addJoint(de),n.addRefLine(refline(le,de,"ref"));const he=new FP.Joint("zhe_start",{x:ue.x,y:ue.y}),_e=new FP.Joint("zhe_end",{x:he.x-y,y:he.y+k}),xe=new FP.Joint("wan_start",{x:he.x-y,y:he.y+k}),Ne=new FP.Joint("wan_end",{x:xe.x+$,y:xe.y});n.addJoint(re),n.addJoint(ue),n.addJoint(he),n.addJoint(_e),n.addJoint(xe),n.addJoint(Ne);const $e={heng_start:re,heng_end:ue,zhe_start:he,zhe_end:_e,wan_start:xe,wan_end:Ne};n.addRefLine(refline(re,ue)),n.addRefLine(refline(he,_e)),n.addRefLine(refline(xe,Ne)),n.getSkeleton=()=>$e},computeParamsByJoints$e=(e,n)=>{const{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k,wan_start:$,wan_end:V}=e,L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=n.getParamRange("-"),oe=n.getParamRange("-"),re=range(g.x-r.x,L),ue=range(r.y-g.y,z),le=range(y.x-k.x,j),de=range(k.y-y.y,ae),he=range(V.x-$.x,oe);return{heng_horizontalSpan:re,heng_verticalSpan:ue,zhe_horizontalSpan:le,zhe_verticalSpan:de,wan_length:he,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_zhe_wan=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{e.tempData[z]&&e.tempData[z].x&&e.tempData[z].y&&($[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L})});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};break}case"wan_start":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$e(g,e);updateGlyphByParams$e(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$e(g,e);updateGlyphByParams$e(y,e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("-",y.zhe_horizontalSpan),e.setParam("-",y.zhe_verticalSpan),e.setParam("-",y.wan_length),e.tempData=null}},updateSkeletonListener_after_bind_heng_zhe_wan=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};break}case"wan_start":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$e(g,e);updateGlyphByParams$e(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$e(g,e);updateGlyphByParams$e(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("-",y.zhe_horizontalSpan),e.setParam("-",y.zhe_verticalSpan),e.setParam("-",y.wan_length),e.tempData=null}},skeletonToBones_er_heng_zhe=e=>{const n=[],{heng1_start:r,heng1_end:g,zhe1_start:y,zhe1_end:k,heng2_start:$,heng2_end:V,zhe2_start:L,zhe2_end:z}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const j=maxSegment;for(let ue=0;ue<j;ue++){const le=ue/j,de=(ue+1)/j,he={x:r.x+(g.x-r.x)*le,y:r.y+(g.y-r.y)*le},_e={x:r.x+(g.x-r.x)*de,y:r.y+(g.y-r.y)*de},xe={id:`heng1_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$b({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$b({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$b(),currentMatrix:createIdentityMatrix$b()};ue>0&&(xe.parent=`heng1_segment_${ue-1}`,n[ue-1].children.push(xe.id)),n.push(xe)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const ae=maxSegment;for(let ue=0;ue<ae;ue++){const le=ue/ae,de=(ue+1)/ae,he={x:y.x+(k.x-y.x)*le,y:y.y+(k.y-y.y)*le},_e={x:y.x+(k.x-y.x)*de,y:y.y+(k.y-y.y)*de},xe={id:`zhe1_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$b({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$b({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$b(),currentMatrix:createIdentityMatrix$b()};ue===0?(xe.parent=`heng1_segment_${j-1}`,n[j-1].children.push(xe.id)):(xe.parent=`zhe1_segment_${ue-1}`,n[j+ue-1].children.push(xe.id)),n.push(xe)}Math.sqrt((V.x-$.x)**2+(V.y-$.y)**2);const oe=maxSegment;for(let ue=0;ue<oe;ue++){const le=ue/oe,de=(ue+1)/oe,he={x:$.x+(V.x-$.x)*le,y:$.y+(V.y-$.y)*le},_e={x:$.x+(V.x-$.x)*de,y:$.y+(V.y-$.y)*de},xe={id:`heng2_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$b({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$b({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$b(),currentMatrix:createIdentityMatrix$b()};ue===0?(xe.parent=`zhe1_segment_${ae-1}`,n[j+ae-1].children.push(xe.id)):(xe.parent=`heng2_segment_${ue-1}`,n[j+ae+ue-1].children.push(xe.id)),n.push(xe)}Math.sqrt((z.x-L.x)**2+(z.y-L.y)**2);const re=maxSegment;for(let ue=0;ue<re;ue++){const le=ue/re,de=(ue+1)/re,he={x:L.x+(z.x-L.x)*le,y:L.y+(z.y-L.y)*le},_e={x:L.x+(z.x-L.x)*de,y:L.y+(z.y-L.y)*de},xe={id:`zhe2_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$b({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$b({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$b(),currentMatrix:createIdentityMatrix$b()};ue===0?(xe.parent=`heng2_segment_${oe-1}`,n[j+ae+oe-1].children.push(xe.id)):(xe.parent=`zhe2_segment_${ue-1}`,n[j+ae+oe+ue-1].children.push(xe.id)),n.push(xe)}return n},normalize$b=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$b=()=>[1,0,0,1,0,0],instanceBasicGlyph_er_heng_zhe=e=>{const n=new CustomGlyph(e),r={heng1_horizontalSpan:n.getParam("1-"),heng1_verticalSpan:n.getParam("1-"),zhe1_horizontalSpan:n.getParam("1-"),zhe1_verticalSpan:n.getParam("1-"),heng2_horizontalSpan:n.getParam("2-"),heng2_verticalSpan:n.getParam("2-"),zhe2_horizontalSpan:n.getParam("2-"),zhe2_verticalSpan:n.getParam("2-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$d(r,n)},bindSkeletonGlyph_er_heng_zhe=e=>{e._o||instanceBasicGlyph_er_heng_zhe(e),glyphSkeletonBind(e._o)},updateGlyphByParams$d=(e,n)=>{const{heng1_horizontalSpan:r,heng1_verticalSpan:g,zhe1_horizontalSpan:y,zhe1_verticalSpan:k,heng2_horizontalSpan:$,heng2_verticalSpan:V,zhe2_horizontalSpan:L,zhe2_verticalSpan:z,skeletonRefPos:j,weight:ae}=e,{ox:oe,oy:re}=n._glyph.skeleton,ue=250+oe||0,le=295+re||0,de=ae*1;let he,_e;const xe=new FP.Joint("heng1_start_ref",{x:ue,y:le+g/2}),Ne=new FP.Joint("heng1_end_ref",{x:xe.x+r,y:xe.y-g});j===1?(he=new FP.Joint("heng1_start",{x:xe.x,y:xe.y+de/2}),_e=new FP.Joint("heng1_end",{x:Ne.x,y:Ne.y+de/2})):j===2?(he=new FP.Joint("heng1_start",{x:xe.x,y:xe.y-de/2}),_e=new FP.Joint("heng1_end",{x:Ne.x,y:Ne.y-de/2})):(he=new FP.Joint("heng1_start",{x:xe.x,y:xe.y}),_e=new FP.Joint("heng1_end",{x:Ne.x,y:Ne.y}));const $e=new FP.Joint("zhe1_start",{x:_e.x,y:_e.y}),Ce=new FP.Joint("zhe1_end",{x:$e.x-y,y:$e.y+k}),Ie=new FP.Joint("heng2_start",{x:$e.x-y,y:$e.y+k}),ze=new FP.Joint("heng2_end",{x:Ie.x+$,y:Ie.y-V}),Ue=new FP.Joint("zhe2_start",{x:ze.x,y:ze.y}),Pt=new FP.Joint("zhe2_end",{x:Ue.x-L,y:Ue.y+z});n.addJoint(he),n.addJoint(_e),n.addJoint($e),n.addJoint(Ce),n.addJoint(Ie),n.addJoint(ze),n.addJoint(Ue),n.addJoint(Pt);const hn={heng1_start:he,heng1_end:_e,zhe1_start:$e,zhe1_end:Ce,heng2_start:Ie,heng2_end:ze,zhe2_start:Ue,zhe2_end:Pt};n.addRefLine(refline(he,_e)),n.addRefLine(refline($e,Ce)),n.addRefLine(refline(Ie,ze)),n.addRefLine(refline(Ue,Pt)),n.getSkeleton=()=>hn},computeParamsByJoints$d=(e,n)=>{const{heng1_start:r,heng1_end:g,zhe1_start:y,zhe1_end:k,heng2_start:$,heng2_end:V,zhe2_start:L,zhe2_end:z}=e,j=n.getParamRange("1-"),ae=n.getParamRange("1-"),oe=n.getParamRange("1-"),re=n.getParamRange("1-"),ue=n.getParamRange("2-"),le=n.getParamRange("2-"),de=n.getParamRange("2-"),he=n.getParamRange("2-"),_e=range(g.x-r.x,j),xe=range(r.y-g.y,ae),Ne=range(y.x-k.x,oe),$e=range(k.y-y.y,re),Ce=range(V.x-$.x,ue),Ie=range($.y-V.y,le),ze=range(L.x-z.x,de),Ue=range(z.y-L.y,he);return{heng1_horizontalSpan:_e,heng1_verticalSpan:xe,zhe1_horizontalSpan:Ne,zhe1_verticalSpan:$e,heng2_horizontalSpan:Ce,heng2_verticalSpan:Ie,zhe2_horizontalSpan:ze,zhe2_verticalSpan:Ue,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_er_heng_zhe=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng1_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{e.tempData[z]&&e.tempData[z].x&&e.tempData[z].y&&($[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L})});break}case"heng1_end":{$.heng1_end={x:e.tempData.heng1_end.x+y,y:e.tempData.heng1_end.y+k},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y+k},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.heng2_start={x:e.tempData.heng2_start.x+y,y:e.tempData.heng2_start.y+k},$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k};break}case"zhe1_start":{$.heng1_end={x:e.tempData.heng1_end.x+y,y:e.tempData.heng1_end.y+k},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y+k},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.heng2_start={x:e.tempData.heng2_start.x+y,y:e.tempData.heng2_start.y+k},$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k};break}case"zhe1_end":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.heng2_start={x:e.tempData.heng2_start.x+y,y:e.tempData.heng2_start.y+k},$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k};break}case"heng2_start":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.heng2_start={x:e.tempData.heng2_start.x+y,y:e.tempData.heng2_start.y+k},$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k};break}case"heng2_end":{$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k};break}case"zhe2_start":{$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k};break}case"zhe2_end":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$d(g,e);updateGlyphByParams$d(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$d(g,e);updateGlyphByParams$d(y,e),e.setParam("1-",y.heng1_horizontalSpan),e.setParam("1-",y.heng1_verticalSpan),e.setParam("1-",y.zhe1_horizontalSpan),e.setParam("1-",y.zhe1_verticalSpan),e.setParam("2-",y.heng2_horizontalSpan),e.setParam("2-",y.heng2_verticalSpan),e.setParam("2-",y.zhe2_horizontalSpan),e.setParam("2-",y.zhe2_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_er_heng_zhe=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng1_end":{$.heng1_end={x:e.tempData.heng1_end.x+y,y:e.tempData.heng1_end.y+k},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y+k},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.heng2_start={x:e.tempData.heng2_start.x+y,y:e.tempData.heng2_start.y+k},$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k};break}case"zhe1_start":{$.heng1_end={x:e.tempData.heng1_end.x+y,y:e.tempData.heng1_end.y+k},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y+k},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.heng2_start={x:e.tempData.heng2_start.x+y,y:e.tempData.heng2_start.y+k},$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k};break}case"zhe1_end":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.heng2_start={x:e.tempData.heng2_start.x+y,y:e.tempData.heng2_start.y+k},$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k};break}case"heng2_start":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.heng2_start={x:e.tempData.heng2_start.x+y,y:e.tempData.heng2_start.y+k},$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k};break}case"heng2_end":{$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k};break}case"zhe2_start":{$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k};break}case"zhe2_end":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$d(g,e);updateGlyphByParams$d(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$d(g,e);updateGlyphByParams$d(y,e),updateSkeletonTransformation(e),e.setParam("1-",y.heng1_horizontalSpan),e.setParam("1-",y.heng1_verticalSpan),e.setParam("1-",y.zhe1_horizontalSpan),e.setParam("1-",y.zhe1_verticalSpan),e.setParam("2-",y.heng2_horizontalSpan),e.setParam("2-",y.heng2_verticalSpan),e.setParam("2-",y.zhe2_horizontalSpan),e.setParam("2-",y.zhe2_verticalSpan),e.tempData=null}},skeletonToBones_heng_zhe=e=>{const n=[],{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const $=maxSegment;for(let L=0;L<$;L++){const z=L/$,j=(L+1)/$,ae={x:r.x+(g.x-r.x)*z,y:r.y+(g.y-r.y)*z},oe={x:r.x+(g.x-r.x)*j,y:r.y+(g.y-r.y)*j},re={id:`heng_segment_${L}`,start:ae,end:oe,length:Math.sqrt((oe.x-ae.x)**2+(oe.y-ae.y)**2),uAxis:normalize$a({x:oe.x-ae.x,y:oe.y-ae.y}),vAxis:normalize$a({x:-(oe.y-ae.y),y:oe.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$a(),currentMatrix:createIdentityMatrix$a()};L>0&&(re.parent=`heng_segment_${L-1}`,n[L-1].children.push(re.id)),n.push(re)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const V=maxSegment;for(let L=0;L<V;L++){const z=L/V,j=(L+1)/V,ae={x:y.x+(k.x-y.x)*z,y:y.y+(k.y-y.y)*z},oe={x:y.x+(k.x-y.x)*j,y:y.y+(k.y-y.y)*j},re={id:`zhe_segment_${L}`,start:ae,end:oe,length:Math.sqrt((oe.x-ae.x)**2+(oe.y-ae.y)**2),uAxis:normalize$a({x:oe.x-ae.x,y:oe.y-ae.y}),vAxis:normalize$a({x:-(oe.y-ae.y),y:oe.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$a(),currentMatrix:createIdentityMatrix$a()};L===0?(re.parent=`heng_segment_${$-1}`,n[$-1].children.push(re.id)):(re.parent=`zhe_segment_${L-1}`,n[$+L-1].children.push(re.id)),n.push(re)}return n},normalize$a=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$a=()=>[1,0,0,1,0,0],instanceBasicGlyph_heng_zhe=e=>{const n=new CustomGlyph(e),r={heng_horizontalSpan:n.getParam("-"),heng_verticalSpan:n.getParam("-"),zhe_horizontalSpan:n.getParam("-"),zhe_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$c(r,n)},bindSkeletonGlyph_heng_zhe=e=>{e._o||instanceBasicGlyph_heng_zhe(e),glyphSkeletonBind(e._o)},updateGlyphByParams$c=(e,n)=>{const{heng_horizontalSpan:r,heng_verticalSpan:g,zhe_horizontalSpan:y,zhe_verticalSpan:k,skeletonRefPos:$,weight:V}=e,{ox:L,oy:z}=n._glyph.skeleton,j=250+L||0,ae=345+z||0;let oe,re;const ue=new FP.Joint("heng_start_ref",{x:j,y:ae+g/2}),le=new FP.Joint("heng_end_ref",{x:ue.x+r,y:ue.y-g});$===1?(oe=new FP.Joint("heng_start",{x:ue.x,y:ue.y+V/2}),re=new FP.Joint("heng_end",{x:le.x,y:le.y+V/2})):$===2?(oe=new FP.Joint("heng_start",{x:ue.x,y:ue.y-V/2}),re=new FP.Joint("heng_end",{x:le.x,y:le.y-V/2})):(oe=new FP.Joint("heng_start",{x:ue.x,y:ue.y}),re=new FP.Joint("heng_end",{x:le.x,y:le.y})),n.addJoint(ue),n.addJoint(le),n.addRefLine(refline(ue,le,"ref"));const de=new FP.Joint("zhe_start",{x:re.x,y:re.y}),he=new FP.Joint("zhe_end",{x:de.x-y,y:de.y+k});n.addJoint(oe),n.addJoint(re),n.addJoint(de),n.addJoint(he);const _e={heng_start:oe,heng_end:re,zhe_start:de,zhe_end:he};n.addRefLine(refline(oe,re)),n.addRefLine(refline(de,he)),n.getSkeleton=()=>_e},computeParamsByJoints$c=(e,n)=>{const{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k}=e,$=n.getParamRange("-"),V=n.getParamRange("-"),L=n.getParamRange("-"),z=n.getParamRange("-"),j=range(g.x-r.x,$),ae=range(r.y-g.y,V),oe=range(y.x-k.x,L),re=range(k.y-y.y,z);return{heng_horizontalSpan:j,heng_verticalSpan:ae,zhe_horizontalSpan:oe,zhe_verticalSpan:re,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_zhe=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{e.tempData[z]&&e.tempData[z].x&&e.tempData[z].y&&($[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L})});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$c(g,e);updateGlyphByParams$c(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$c(g,e);updateGlyphByParams$c(y,e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("-",y.zhe_horizontalSpan),e.setParam("-",y.zhe_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_heng_zhe=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$c(g,e);updateGlyphByParams$c(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$c(g,e);updateGlyphByParams$c(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("-",y.zhe_horizontalSpan),e.setParam("-",y.zhe_verticalSpan),e.tempData=null}},skeletonToBones_heng_zhe_zhe_wan_gou=e=>{const n=[],{heng_start:r,heng_end:g,zhe1_start:y,zhe1_end:k,zhe2_start:$,zhe2_end:V,wan_start:L,wan_end:z,gou_start:j,gou_end:ae}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const oe=maxSegment;for(let he=0;he<oe;he++){const _e=he/oe,xe=(he+1)/oe,Ne={x:r.x+(g.x-r.x)*_e,y:r.y+(g.y-r.y)*_e},$e={x:r.x+(g.x-r.x)*xe,y:r.y+(g.y-r.y)*xe},Ce={id:`heng_segment_${he}`,start:Ne,end:$e,length:Math.sqrt(($e.x-Ne.x)**2+($e.y-Ne.y)**2),uAxis:normalize$9({x:$e.x-Ne.x,y:$e.y-Ne.y}),vAxis:normalize$9({x:-($e.y-Ne.y),y:$e.x-Ne.x}),children:[],bindMatrix:createIdentityMatrix$9(),currentMatrix:createIdentityMatrix$9()};he>0&&(Ce.parent=`heng_segment_${he-1}`,n[he-1].children.push(Ce.id)),n.push(Ce)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const re=maxSegment;for(let he=0;he<re;he++){const _e=he/re,xe=(he+1)/re,Ne={x:y.x+(k.x-y.x)*_e,y:y.y+(k.y-y.y)*_e},$e={x:y.x+(k.x-y.x)*xe,y:y.y+(k.y-y.y)*xe},Ce={id:`zhe1_segment_${he}`,start:Ne,end:$e,length:Math.sqrt(($e.x-Ne.x)**2+($e.y-Ne.y)**2),uAxis:normalize$9({x:$e.x-Ne.x,y:$e.y-Ne.y}),vAxis:normalize$9({x:-($e.y-Ne.y),y:$e.x-Ne.x}),children:[],bindMatrix:createIdentityMatrix$9(),currentMatrix:createIdentityMatrix$9()};he===0?(Ce.parent=`heng_segment_${oe-1}`,n[oe-1].children.push(Ce.id)):(Ce.parent=`zhe1_segment_${he-1}`,n[oe+he-1].children.push(Ce.id)),n.push(Ce)}Math.sqrt((V.x-$.x)**2+(V.y-$.y)**2);const ue=maxSegment;for(let he=0;he<ue;he++){const _e=he/ue,xe=(he+1)/ue,Ne={x:$.x+(V.x-$.x)*_e,y:$.y+(V.y-$.y)*_e},$e={x:$.x+(V.x-$.x)*xe,y:$.y+(V.y-$.y)*xe},Ce={id:`zhe2_segment_${he}`,start:Ne,end:$e,length:Math.sqrt(($e.x-Ne.x)**2+($e.y-Ne.y)**2),uAxis:normalize$9({x:$e.x-Ne.x,y:$e.y-Ne.y}),vAxis:normalize$9({x:-($e.y-Ne.y),y:$e.x-Ne.x}),children:[],bindMatrix:createIdentityMatrix$9(),currentMatrix:createIdentityMatrix$9()};he===0?(Ce.parent=`zhe1_segment_${re-1}`,n[oe+re-1].children.push(Ce.id)):(Ce.parent=`zhe2_segment_${he-1}`,n[oe+re+he-1].children.push(Ce.id)),n.push(Ce)}Math.sqrt((z.x-L.x)**2+(z.y-L.y)**2);const le=maxSegment;for(let he=0;he<le;he++){const _e=he/le,xe=(he+1)/le,Ne={x:L.x+(z.x-L.x)*_e,y:L.y+(z.y-L.y)*_e},$e={x:L.x+(z.x-L.x)*xe,y:L.y+(z.y-L.y)*xe},Ce={id:`wan_segment_${he}`,start:Ne,end:$e,length:Math.sqrt(($e.x-Ne.x)**2+($e.y-Ne.y)**2),uAxis:normalize$9({x:$e.x-Ne.x,y:$e.y-Ne.y}),vAxis:normalize$9({x:-($e.y-Ne.y),y:$e.x-Ne.x}),children:[],bindMatrix:createIdentityMatrix$9(),currentMatrix:createIdentityMatrix$9()};he===0?(Ce.parent=`zhe2_segment_${ue-1}`,n[oe+re+ue-1].children.push(Ce.id)):(Ce.parent=`wan_segment_${he-1}`,n[oe+re+ue+he-1].children.push(Ce.id)),n.push(Ce)}Math.sqrt((ae.x-j.x)**2+(ae.y-j.y)**2);const de=minSegment;for(let he=0;he<de;he++){const _e=he/de,xe=(he+1)/de,Ne={x:j.x+(ae.x-j.x)*_e,y:j.y+(ae.y-j.y)*_e},$e={x:j.x+(ae.x-j.x)*xe,y:j.y+(ae.y-j.y)*xe},Ce={id:`gou_segment_${he}`,start:Ne,end:$e,length:Math.sqrt(($e.x-Ne.x)**2+($e.y-Ne.y)**2),uAxis:normalize$9({x:$e.x-Ne.x,y:$e.y-Ne.y}),vAxis:normalize$9({x:-($e.y-Ne.y),y:$e.x-Ne.x}),children:[],bindMatrix:createIdentityMatrix$9(),currentMatrix:createIdentityMatrix$9()};he===0?(Ce.parent=`wan_segment_${le-1}`,n[oe+re+ue+le-1].children.push(Ce.id)):(Ce.parent=`gou_segment_${he-1}`,n[oe+re+ue+le+he-1].children.push(Ce.id)),n.push(Ce)}return n},normalize$9=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$9=()=>[1,0,0,1,0,0],instanceBasicGlyph_heng_zhe_zhe_wan_gou=e=>{const n=new CustomGlyph(e),r={heng_horizontalSpan:n.getParam("-"),heng_verticalSpan:n.getParam("-"),zhe1_horizontalSpan:n.getParam("1-"),zhe1_verticalSpan:n.getParam("1-"),zhe2_horizontalSpan:n.getParam("2-"),zhe2_verticalSpan:n.getParam("2-"),wan_horizontalSpan:n.getParam("-"),wan_verticalSpan:n.getParam("-"),gou_horizontalSpan:n.getParam("-"),gou_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$b(r,n)},bindSkeletonGlyph_heng_zhe_zhe_wan_gou=e=>{e._o||instanceBasicGlyph_heng_zhe_zhe_wan_gou(e),glyphSkeletonBind(e._o)},updateGlyphByParams$b=(e,n)=>{const{heng_horizontalSpan:r,heng_verticalSpan:g,zhe1_horizontalSpan:y,zhe1_verticalSpan:k,zhe2_horizontalSpan:$,zhe2_verticalSpan:V,wan_horizontalSpan:L,wan_verticalSpan:z,gou_horizontalSpan:j,gou_verticalSpan:ae,skeletonRefPos:oe,weight:re}=e,{ox:ue,oy:le}=n._glyph.skeleton,de=325+ue||0,he=255+le||0;let _e,xe;const Ne=new FP.Joint("heng_start_ref",{x:de,y:he+g/2}),$e=new FP.Joint("heng_end_ref",{x:Ne.x+r,y:Ne.y-g});oe===1?(_e=new FP.Joint("heng_start",{x:Ne.x,y:Ne.y+re/2}),xe=new FP.Joint("heng_end",{x:$e.x,y:$e.y+re/2})):oe===2?(_e=new FP.Joint("heng_start",{x:Ne.x,y:Ne.y-re/2}),xe=new FP.Joint("heng_end",{x:$e.x,y:$e.y-re/2})):(_e=new FP.Joint("heng_start",{x:Ne.x,y:Ne.y}),xe=new FP.Joint("heng_end",{x:$e.x,y:$e.y})),n.addJoint(Ne),n.addJoint($e),n.addRefLine(refline(Ne,$e,"ref"));const Ce=new FP.Joint("zhe1_start",{x:xe.x,y:xe.y}),Ie=new FP.Joint("zhe1_end",{x:Ce.x-y,y:Ce.y+k}),ze=new FP.Joint("zhe2_start",{x:Ce.x-y,y:Ce.y+k}),Ue=new FP.Joint("zhe2_end",{x:ze.x+$,y:ze.y-V}),Pt=new FP.Joint("wan_start",{x:Ue.x,y:Ue.y}),hn=new FP.Joint("wan_end",{x:Pt.x-L,y:Pt.y+z}),Dt=new FP.Joint("gou_start",{x:Pt.x-L,y:Pt.y+z}),xn=new FP.Joint("gou_end",{x:Dt.x-j,y:Dt.y+ae});n.addJoint(_e),n.addJoint(xe),n.addJoint(Ce),n.addJoint(Ie),n.addJoint(ze),n.addJoint(Ue),n.addJoint(Pt),n.addJoint(hn),n.addJoint(Dt),n.addJoint(xn);const jt={heng_start:_e,heng_end:xe,zhe1_start:Ce,zhe1_end:Ie,zhe2_start:ze,zhe2_end:Ue,wan_start:Pt,wan_end:hn,gou_start:Dt,gou_end:xn};n.addRefLine(refline(_e,xe)),n.addRefLine(refline(Ce,Ie)),n.addRefLine(refline(ze,Ue)),n.addRefLine(refline(Pt,hn)),n.addRefLine(refline(Dt,xn)),n.getSkeleton=()=>jt},computeParamsByJoints$b=(e,n)=>{const{heng_start:r,heng_end:g,zhe1_start:y,zhe1_end:k,zhe2_start:$,zhe2_end:V,wan_start:L,wan_end:z,gou_start:j,gou_end:ae}=e,oe=n.getParamRange("-"),re=n.getParamRange("-"),ue=n.getParamRange("1-"),le=n.getParamRange("1-"),de=n.getParamRange("2-"),he=n.getParamRange("2-"),_e=n.getParamRange("-"),xe=n.getParamRange("-"),Ne=n.getParamRange("-"),$e=n.getParamRange("-"),Ce=range(g.x-r.x,oe),Ie=range(r.y-g.y,re),ze=range(y.x-k.x,ue),Ue=range(k.y-y.y,le),Pt=range(V.x-$.x,de),hn=range($.y-V.y,he),Dt=range(L.x-z.x,_e),xn=range(z.y-L.y,xe),jt=range(j.x-ae.x,Ne),Vn=range(ae.y-j.y,$e);return{heng_horizontalSpan:Ce,heng_verticalSpan:Ie,zhe1_horizontalSpan:ze,zhe1_verticalSpan:Ue,zhe2_horizontalSpan:Pt,zhe2_verticalSpan:hn,wan_horizontalSpan:Dt,wan_verticalSpan:xn,gou_horizontalSpan:jt,gou_verticalSpan:Vn,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_zhe_zhe_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y+k},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe1_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y+k},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe1_end":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe2_start":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe2_end":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"wan_start":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$b(g,e);updateGlyphByParams$b(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$b(g,e);updateGlyphByParams$b(y,e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("1-",y.zhe1_horizontalSpan),e.setParam("1-",y.zhe1_verticalSpan),e.setParam("2-",y.zhe2_horizontalSpan),e.setParam("2-",y.zhe2_verticalSpan),e.setParam("-",y.wan_horizontalSpan),e.setParam("-",y.wan_verticalSpan),e.setParam("-",y.gou_horizontalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_heng_zhe_zhe_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y+k},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe1_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y+k},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe1_end":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe2_start":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe2_end":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"wan_start":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$b(g,e);updateGlyphByParams$b(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$b(g,e);updateGlyphByParams$b(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("1-",y.zhe1_horizontalSpan),e.setParam("1-",y.zhe1_verticalSpan),e.setParam("2-",y.zhe2_horizontalSpan),e.setParam("2-",y.zhe2_verticalSpan),e.setParam("-",y.wan_horizontalSpan),e.setParam("-",y.wan_verticalSpan),e.setParam("-",y.gou_horizontalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},skeletonToBones_heng_zhe_wan_gou=e=>{const n=[],{heng_start:r,heng_end:g,zhe_start:y,zhe_bend:k,zhe_end:$,wan_start:V,wan_end:L,gou_start:z,gou_end:j}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const ae=maxSegment;for(let le=0;le<ae;le++){const de=le/ae,he=(le+1)/ae,_e={x:r.x+(g.x-r.x)*de,y:r.y+(g.y-r.y)*de},xe={x:r.x+(g.x-r.x)*he,y:r.y+(g.y-r.y)*he},Ne={id:`heng_segment_${le}`,start:_e,end:xe,length:Math.sqrt((xe.x-_e.x)**2+(xe.y-_e.y)**2),uAxis:normalize$8({x:xe.x-_e.x,y:xe.y-_e.y}),vAxis:normalize$8({x:-(xe.y-_e.y),y:xe.x-_e.x}),children:[],bindMatrix:createIdentityMatrix$8(),currentMatrix:createIdentityMatrix$8()};le>0&&(Ne.parent=`heng_segment_${le-1}`,n[le-1].children.push(Ne.id)),n.push(Ne)}const oe=maxSegment;for(let le=0;le<oe;le++){const de=le/oe,he=(le+1)/oe,_e=quadraticBezierPoint$4(y,k,$,de),xe=quadraticBezierPoint$4(y,k,$,he),Ne={id:`zhe_segment_${le}`,start:_e,end:xe,length:Math.sqrt((xe.x-_e.x)**2+(xe.y-_e.y)**2),uAxis:normalize$8({x:xe.x-_e.x,y:xe.y-_e.y}),vAxis:normalize$8({x:-(xe.y-_e.y),y:xe.x-_e.x}),children:[],bindMatrix:createIdentityMatrix$8(),currentMatrix:createIdentityMatrix$8()};le===0?(Ne.parent=`heng_segment_${ae-1}`,n[ae-1].children.push(Ne.id)):(Ne.parent=`zhe_segment_${le-1}`,n[n.length-1].children.push(Ne.id)),n.push(Ne)}Math.sqrt((L.x-V.x)**2+(L.y-V.y)**2);const re=maxSegment;for(let le=0;le<re;le++){const de=le/re,he=(le+1)/re,_e={x:V.x+(L.x-V.x)*de,y:V.y+(L.y-V.y)*de},xe={x:V.x+(L.x-V.x)*he,y:V.y+(L.y-V.y)*he},Ne={id:`wan_segment_${le}`,start:_e,end:xe,length:Math.sqrt((xe.x-_e.x)**2+(xe.y-_e.y)**2),uAxis:normalize$8({x:xe.x-_e.x,y:xe.y-_e.y}),vAxis:normalize$8({x:-(xe.y-_e.y),y:xe.x-_e.x}),children:[],bindMatrix:createIdentityMatrix$8(),currentMatrix:createIdentityMatrix$8()};le===0?(Ne.parent=`zhe_segment_${oe-1}`,n[n.length-1].children.push(Ne.id)):(Ne.parent=`wan_segment_${le-1}`,n[n.length-1].children.push(Ne.id)),n.push(Ne)}Math.sqrt((j.x-z.x)**2+(j.y-z.y)**2);const ue=maxSegment;for(let le=0;le<ue;le++){const de=le/ue,he=(le+1)/ue,_e={x:z.x+(j.x-z.x)*de,y:z.y+(j.y-z.y)*de},xe={x:z.x+(j.x-z.x)*he,y:z.y+(j.y-z.y)*he},Ne={id:`gou_segment_${le}`,start:_e,end:xe,length:Math.sqrt((xe.x-_e.x)**2+(xe.y-_e.y)**2),uAxis:normalize$8({x:xe.x-_e.x,y:xe.y-_e.y}),vAxis:normalize$8({x:-(xe.y-_e.y),y:xe.x-_e.x}),children:[],bindMatrix:createIdentityMatrix$8(),currentMatrix:createIdentityMatrix$8()};le===0?(Ne.parent=`wan_segment_${re-1}`,n[n.length-1].children.push(Ne.id)):(Ne.parent=`gou_segment_${le-1}`,n[n.length-1].children.push(Ne.id)),n.push(Ne)}return n},normalize$8=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$8=()=>[1,0,0,1,0,0],quadraticBezierPoint$4=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_heng_zhe_wan_gou=e=>{const n=new CustomGlyph(e),r={heng_horizontalSpan:n.getParam("-"),heng_verticalSpan:n.getParam("-"),zhe_horizontalSpan:n.getParam("-"),zhe_verticalSpan:n.getParam("-"),zhe_bendCursor:n.getParam("-"),zhe_bendDegree:Number(n.getParam("-"))+30*Number(n.getParam("")||1),wan_length:n.getParam("-"),gou_horizontalSpan:n.getParam("-"),gou_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$a(r,n)},bindSkeletonGlyph_heng_zhe_wan_gou=e=>{e._o||instanceBasicGlyph_heng_zhe_wan_gou(e),glyphSkeletonBind(e._o)},distance$6=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend$5=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x-r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$-g*Math.sin(L),y:V-g*Math.cos(L)}},updateGlyphByParams$a=(e,n)=>{const{heng_horizontalSpan:r,heng_verticalSpan:g,zhe_horizontalSpan:y,zhe_verticalSpan:k,zhe_bendCursor:$,zhe_bendDegree:V,wan_length:L,gou_horizontalSpan:z,gou_verticalSpan:j}=e,{ox:ae,oy:oe}=n._glyph.skeleton,re=350+ae||0,ue=300+oe||0,le=new FP.Joint("heng_start",{x:re,y:ue+g/2}),de=new FP.Joint("heng_end",{x:le.x+r,y:le.y-g}),he=new FP.Joint("zhe_start",{x:de.x,y:de.y}),_e=new FP.Joint("zhe_end",{x:he.x-y,y:he.y+k});distance$6(he,_e);const xe=he.x-$*y,Ne=he.y+$*k,$e=Math.atan2(k,y),Ce=new FP.Joint("zhe_bend",{x:xe-V*Math.sin($e),y:Ne-V*Math.cos($e)}),Ie=new FP.Joint("wan_start",{x:he.x-y,y:he.y+k}),ze=new FP.Joint("wan_end",{x:Ie.x+L,y:Ie.y}),Ue=new FP.Joint("gou_start",{x:Ie.x+L,y:Ie.y}),Pt=new FP.Joint("gou_end",{x:Ue.x+z,y:Ue.y-j});n.addJoint(le),n.addJoint(de),n.addJoint(he),n.addJoint(Ce),n.addJoint(_e),n.addJoint(Ie),n.addJoint(ze),n.addJoint(Ue),n.addJoint(Pt);const hn={heng_start:le,heng_end:de,zhe_start:he,zhe_bend:Ce,zhe_end:_e,wan_start:Ie,wan_end:ze,gou_start:Ue,gou_end:Pt};n.addRefLine(refline(le,de)),n.addRefLine(refline(he,Ce)),n.addRefLine(refline(Ce,_e)),n.addRefLine(refline(Ie,ze)),n.addRefLine(refline(Ue,Pt)),n.getSkeleton=()=>hn},computeParamsByJoints$a=(e,n)=>{const{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k,zhe_bend:$,wan_start:V,wan_end:L,gou_start:z,gou_end:j}=e,ae=n.getParamRange("-"),oe=n.getParamRange("-"),re=n.getParamRange("-"),ue=n.getParamRange("-"),le=n.getParamRange("-"),de=n.getParamRange("-"),he=n.getParamRange("-"),_e=n.getParamRange("-"),xe=n.getParamRange("-"),Ne=range(g.x-r.x,ae),$e=range(r.y-g.y,oe),Ce=range(y.x-k.x,re),Ie=range(k.y-y.y,ue),ze=FP.distanceAndFootPoint(y,k,$),Ue=range(ze.percentageFromA,le),Pt=range(ze.distance,de),hn=range(L.x-V.x,he),Dt=range(j.x-z.x,_e),xn=range(z.y-j.y,xe);return{heng_horizontalSpan:Ne,heng_verticalSpan:$e,zhe_horizontalSpan:Ce,zhe_verticalSpan:Ie,zhe_bendCursor:Ue,zhe_bendDegree:Pt,wan_length:hn,gou_verticalSpan:xn,gou_horizontalSpan:Dt,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_zhe_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{e.tempData[z]&&e.tempData[z].x&&e.tempData[z].y&&($[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L})});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_bend={x:e.tempData.zhe_bend.x+y,y:e.tempData.zhe_bend.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_bend={x:e.tempData.zhe_bend.x+y,y:e.tempData.zhe_bend.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe_bend":{$.zhe_bend={x:e.tempData.zhe_bend.x+y,y:e.tempData.zhe_bend.y+k};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};const V=getBend$5($.zhe_start,$.zhe_end,e.tempData.zhe_bendCursor,e.tempData.zhe_bendDegree);$.zhe_bend={x:V.x,y:V.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"wan_start":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};const V=getBend$5($.zhe_start,$.zhe_end,e.tempData.zhe_bendCursor,e.tempData.zhe_bendDegree);$.zhe_bend={x:V.x,y:V.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"gou_start":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.zhe_bendCursor=e.getParam("-"),e.tempData.zhe_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$a(g,e);updateGlyphByParams$a(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$a(g,e);updateGlyphByParams$a(y,e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("-",y.zhe_horizontalSpan),e.setParam("-",y.zhe_verticalSpan),e.setParam("-",y.zhe_bendCursor),e.setParam("-",y.zhe_bendDegree-30*Number(e.getParam("")||1)),e.setParam("-",y.wan_length),e.setParam("-",y.gou_horizontalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_heng_zhe_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_bend={x:e.tempData.zhe_bend.x+y,y:e.tempData.zhe_bend.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_bend={x:e.tempData.zhe_bend.x+y,y:e.tempData.zhe_bend.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe_bend":{$.zhe_bend={x:e.tempData.zhe_bend.x+y,y:e.tempData.zhe_bend.y+k};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};const V=getBend$5($.zhe_start,$.zhe_end,e.tempData.zhe_bendCursor,e.tempData.zhe_bendDegree);$.zhe_bend={x:V.x,y:V.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"wan_start":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};const V=getBend$5($.zhe_start,$.zhe_end,e.tempData.zhe_bendCursor,e.tempData.zhe_bendDegree);$.zhe_bend={x:V.x,y:V.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"gou_start":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.zhe_bendCursor=e.getParam("-"),e.tempData.zhe_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$a(g,e);updateGlyphByParams$a(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$a(g,e);updateGlyphByParams$a(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("-",y.zhe_horizontalSpan),e.setParam("-",y.zhe_verticalSpan),e.setParam("-",y.zhe_bendCursor),e.setParam("-",y.zhe_bendDegree-30*Number(e.getParam("")||1)),e.setParam("-",y.wan_length),e.setParam("-",y.gou_horizontalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},skeletonToBones_heng_wan_gou=e=>{const n=[],{heng_start:r,heng_end:g,wan_start:y,wan_bend:k,wan_end:$,gou_start:V,gou_end:L}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const z=maxSegment;for(let oe=0;oe<z;oe++){const re=oe/z,ue=(oe+1)/z,le={x:r.x+(g.x-r.x)*re,y:r.y+(g.y-r.y)*re},de={x:r.x+(g.x-r.x)*ue,y:r.y+(g.y-r.y)*ue};n.push({id:`heng_segment_${oe}`,start:le,end:de,length:Math.sqrt((de.x-le.x)**2+(de.y-le.y)**2),uAxis:normalize$7({x:de.x-le.x,y:de.y-le.y}),vAxis:normalize$7({x:-(de.y-le.y),y:de.x-le.x}),children:[],bindMatrix:createIdentityMatrix$7(),currentMatrix:createIdentityMatrix$7()})}const j=maxSegment;for(let oe=0;oe<j;oe++){const re=oe/j,ue=(oe+1)/j,le=quadraticBezierPoint$3(y,k,$,re),de=quadraticBezierPoint$3(y,k,$,ue),he={id:`wan_segment_${oe}`,start:le,end:de,length:Math.sqrt((de.x-le.x)**2+(de.y-le.y)**2),uAxis:normalize$7({x:de.x-le.x,y:de.y-le.y}),vAxis:normalize$7({x:-(de.y-le.y),y:de.x-le.x}),children:[],bindMatrix:createIdentityMatrix$7(),currentMatrix:createIdentityMatrix$7()};oe===0?(he.parent=`heng_segment_${z-1}`,n[z-1].children.push(he.id)):(he.parent=`wan_segment_${oe-1}`,n[z+oe-1].children.push(he.id)),n.push(he)}Math.sqrt((L.x-V.x)**2+(L.y-V.y)**2);const ae=maxSegment;for(let oe=0;oe<ae;oe++){const re=oe/ae,ue=(oe+1)/ae,le={x:V.x+(L.x-V.x)*re,y:V.y+(L.y-V.y)*re},de={x:V.x+(L.x-V.x)*ue,y:V.y+(L.y-V.y)*ue},he={id:`gou_segment_${oe}`,start:le,end:de,length:Math.sqrt((de.x-le.x)**2+(de.y-le.y)**2),uAxis:normalize$7({x:de.x-le.x,y:de.y-le.y}),vAxis:normalize$7({x:-(de.y-le.y),y:de.x-le.x}),children:[],bindMatrix:createIdentityMatrix$7(),currentMatrix:createIdentityMatrix$7()};oe===0?(he.parent=`wan_segment_${j-1}`,n[z+j-1].children.push(he.id)):(he.parent=`gou_segment_${oe-1}`,n[z+j+oe-1].children.push(he.id)),n.push(he)}return n},normalize$7=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$7=()=>[1,0,0,1,0,0],quadraticBezierPoint$3=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_heng_wan_gou=e=>{const n=new CustomGlyph(e),r={heng_horizontalSpan:n.getParam("-"),heng_verticalSpan:n.getParam("-"),wan_horizontalSpan:n.getParam("-"),wan_verticalSpan:n.getParam("-"),wan_bendCursor:n.getParam("-"),wan_bendDegree:n.getParam("-"),gou_horizontalSpan:n.getParam("-"),gou_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$9(r,n)},bindSkeletonGlyph_heng_wan_gou=e=>{e._o||instanceBasicGlyph_heng_wan_gou(e),glyphSkeletonBind(e._o)},distance$5=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend$4=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x+r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$+g*Math.sin(L),y:V+g*Math.cos(L)}},updateGlyphByParams$9=(e,n)=>{const{heng_horizontalSpan:r,heng_verticalSpan:g,wan_horizontalSpan:y,wan_verticalSpan:k,wan_bendCursor:$,wan_bendDegree:V,gou_horizontalSpan:L,gou_verticalSpan:z,skeletonRefPos:j,weight:ae}=e,{ox:oe,oy:re}=n._glyph.skeleton,ue=300+oe||0,le=250+re||0;let de,he;const _e=new FP.Joint("heng_start_ref",{x:ue,y:le+g/2}),xe=new FP.Joint("heng_end_ref",{x:_e.x+r,y:_e.y-g});j===1?(de=new FP.Joint("heng_start",{x:_e.x,y:_e.y+ae/2}),he=new FP.Joint("heng_end",{x:xe.x,y:xe.y+ae/2})):j===2?(de=new FP.Joint("heng_start",{x:_e.x,y:_e.y-ae/2}),he=new FP.Joint("heng_end",{x:xe.x,y:xe.y-ae/2})):(de=new FP.Joint("heng_start",{x:_e.x,y:_e.y}),he=new FP.Joint("heng_end",{x:xe.x,y:xe.y})),n.addJoint(_e),n.addJoint(xe),n.addRefLine(refline(_e,xe,"ref"));const Ne=new FP.Joint("wan_start",{x:he.x,y:he.y}),$e=new FP.Joint("wan_end",{x:Ne.x+y,y:Ne.y+k});distance$5(Ne,$e);const Ce=Ne.x+$*y,Ie=Ne.y+$*k,ze=Math.atan2(k,y),Ue=new FP.Joint("wan_bend",{x:Ce-V*Math.sin(ze),y:Ie+V*Math.cos(ze)}),Pt=new FP.Joint("gou_start",{x:Ne.x+y,y:Ne.y+k}),hn=new FP.Joint("gou_end",{x:Pt.x+L,y:Pt.y-z});n.addJoint(de),n.addJoint(he),n.addJoint(Ne),n.addJoint(Ue),n.addJoint($e),n.addJoint(Pt),n.addJoint(hn);const Dt={heng_start:de,heng_end:he,wan_start:Ne,wan_bend:Ue,wan_end:$e,gou_start:Pt,gou_end:hn};n.addRefLine(refline(de,he)),n.addRefLine(refline(Ne,Ue)),n.addRefLine(refline(Ue,$e)),n.addRefLine(refline(Pt,hn)),n.getSkeleton=()=>Dt},computeParamsByJoints$9=(e,n)=>{const{heng_start:r,heng_end:g,wan_start:y,wan_end:k,wan_bend:$,gou_start:V,gou_end:L}=e,z=n.getParamRange("-"),j=n.getParamRange("-"),ae=n.getParamRange("-"),oe=n.getParamRange("-"),re=n.getParamRange("-"),ue=n.getParamRange("-"),le=n.getParamRange("-"),de=n.getParamRange("-"),he=range(g.x-r.x,z),_e=range(r.y-g.y,j),xe=range(k.x-y.x,ae),Ne=range(k.y-y.y,oe),$e=FP.distanceAndFootPoint(y,k,$),Ce=range($e.percentageFromA,re),Ie=range($e.distance,ue),ze=range(L.x-V.x,le),Ue=range(V.y-L.y,de);return{heng_horizontalSpan:he,heng_verticalSpan:_e,wan_horizontalSpan:xe,wan_verticalSpan:Ne,wan_bendCursor:Ce,wan_bendDegree:Ie,gou_horizontalSpan:ze,gou_verticalSpan:Ue,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{e.tempData[z]&&e.tempData[z].x&&e.tempData[z].y&&($[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L})});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_bend={x:e.tempData.wan_bend.x+y,y:e.tempData.wan_bend.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"wan_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_bend={x:e.tempData.wan_bend.x+y,y:e.tempData.wan_bend.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"wan_bend":{$.wan_bend={x:e.tempData.wan_bend.x+y,y:e.tempData.wan_bend.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};const V=getBend$4($.wan_start,$.wan_end,e.tempData.wan_bendCursor,e.tempData.wan_bendDegree);$.wan_bend={x:V.x,y:V.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};const V=getBend$4($.wan_start,$.wan_end,e.tempData.wan_bendCursor,e.tempData.wan_bendDegree);$.wan_bend={x:V.x,y:V.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.wan_bendCursor=e.getParam("-"),e.tempData.wan_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$9(g,e);updateGlyphByParams$9(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$9(g,e);updateGlyphByParams$9(y,e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("-",y.wan_horizontalSpan),e.setParam("-",y.wan_verticalSpan),e.setParam("-",y.wan_bendCursor),e.setParam("-",y.wan_bendDegree-30*Number(e.getParam("")||1)),e.setParam("-",y.gou_horizontalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_heng_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_bend={x:e.tempData.wan_bend.x+y,y:e.tempData.wan_bend.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"wan_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_bend={x:e.tempData.wan_bend.x+y,y:e.tempData.wan_bend.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"wan_bend":{$.wan_bend={x:e.tempData.wan_bend.x+y,y:e.tempData.wan_bend.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};const V=getBend$4($.wan_start,$.wan_end,e.tempData.wan_bendCursor,e.tempData.wan_bendDegree);$.wan_bend={x:V.x,y:V.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};const V=getBend$4($.wan_start,$.wan_end,e.tempData.wan_bendCursor,e.tempData.wan_bendDegree);$.wan_bend={x:V.x,y:V.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.wan_bendCursor=e.getParam("-"),e.tempData.wan_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$9(g,e);updateGlyphByParams$9(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$9(g,e);updateGlyphByParams$9(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("-",y.wan_horizontalSpan),e.setParam("-",y.wan_verticalSpan),e.setParam("-",y.wan_bendCursor),e.setParam("-",y.wan_bendDegree-30*Number(e.getParam("")||1)),e.setParam("-",y.gou_horizontalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},skeletonToBones_heng_zhe_gou=e=>{const n=[],{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k,gou_start:$,gou_end:V}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const L=maxSegment;for(let ae=0;ae<L;ae++){const oe=ae/L,re=(ae+1)/L,ue={x:r.x+(g.x-r.x)*oe,y:r.y+(g.y-r.y)*oe},le={x:r.x+(g.x-r.x)*re,y:r.y+(g.y-r.y)*re},de={id:`heng_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$6({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$6({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$6(),currentMatrix:createIdentityMatrix$6()};ae>0&&(de.parent=`heng_segment_${ae-1}`,n[ae-1].children.push(de.id)),n.push(de)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const z=maxSegment;for(let ae=0;ae<z;ae++){const oe=ae/z,re=(ae+1)/z,ue={x:y.x+(k.x-y.x)*oe,y:y.y+(k.y-y.y)*oe},le={x:y.x+(k.x-y.x)*re,y:y.y+(k.y-y.y)*re},de={id:`zhe_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$6({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$6({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$6(),currentMatrix:createIdentityMatrix$6()};ae===0?(de.parent=`heng_segment_${L-1}`,n[L-1].children.push(de.id)):(de.parent=`zhe_segment_${ae-1}`,n[L+ae-1].children.push(de.id)),n.push(de)}Math.sqrt((V.x-$.x)**2+(V.y-$.y)**2);const j=maxSegment;for(let ae=0;ae<j;ae++){const oe=ae/j,re=(ae+1)/j,ue={x:$.x+(V.x-$.x)*oe,y:$.y+(V.y-$.y)*oe},le={x:$.x+(V.x-$.x)*re,y:$.y+(V.y-$.y)*re},de={id:`gou_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$6({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$6({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$6(),currentMatrix:createIdentityMatrix$6()};ae===0?(de.parent=`zhe_segment_${z-1}`,n[L+z-1].children.push(de.id)):(de.parent=`gou_segment_${ae-1}`,n[L+z+ae-1].children.push(de.id)),n.push(de)}return n},normalize$6=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$6=()=>[1,0,0,1,0,0],instanceBasicGlyph_heng_zhe_gou=e=>{const n=new CustomGlyph(e),r={heng_horizontalSpan:n.getParam("-"),heng_verticalSpan:n.getParam("-"),zhe_horizontalSpan:n.getParam("-"),zhe_verticalSpan:n.getParam("-"),gou_horizontalSpan:n.getParam("-"),gou_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$8(r,n)},bindSkeletonGlyph_heng_zhe_gou=e=>{e._o||instanceBasicGlyph_heng_zhe_gou(e),glyphSkeletonBind(e._o)},updateGlyphByParams$8=(e,n)=>{const{heng_horizontalSpan:r,heng_verticalSpan:g,zhe_horizontalSpan:y,zhe_verticalSpan:k,gou_horizontalSpan:$,gou_verticalSpan:V,skeletonRefPos:L,weight:z}=e,{ox:j,oy:ae}=n._glyph.skeleton,oe=250+j||0,re=350+ae||0;let ue,le;const de=new FP.Joint("heng_start_ref",{x:oe,y:re+g/2}),he=new FP.Joint("heng_end_ref",{x:de.x+r,y:de.y-g});L===1?(ue=new FP.Joint("heng_start",{x:de.x,y:de.y+z/2}),le=new FP.Joint("heng_end",{x:he.x,y:he.y+z/2})):L===2?(ue=new FP.Joint("heng_start",{x:de.x,y:de.y-z/2}),le=new FP.Joint("heng_end",{x:he.x,y:he.y-z/2})):(ue=new FP.Joint("heng_start",{x:de.x,y:de.y}),le=new FP.Joint("heng_end",{x:he.x,y:he.y})),n.addJoint(de),n.addJoint(he),n.addRefLine(refline(de,he,"ref"));const _e=new FP.Joint("zhe_start",{x:le.x,y:le.y}),xe=new FP.Joint("zhe_end",{x:_e.x-y,y:_e.y+k}),Ne=new FP.Joint("gou_start",{x:_e.x-y,y:_e.y+k}),$e=new FP.Joint("gou_end",{x:Ne.x-$,y:Ne.y+V});n.addJoint(ue),n.addJoint(le),n.addJoint(_e),n.addJoint(xe),n.addJoint(Ne),n.addJoint($e);const Ce={heng_start:ue,heng_end:le,zhe_start:_e,zhe_end:xe,gou_start:Ne,gou_end:$e};n.addRefLine(refline(ue,le)),n.addRefLine(refline(_e,xe)),n.addRefLine(refline(Ne,$e)),n.getSkeleton=()=>Ce},computeParamsByJoints$8=(e,n)=>{const{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k,gou_start:$,gou_end:V}=e,L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=n.getParamRange("-"),oe=n.getParamRange("-"),re=n.getParamRange("-"),ue=range(g.x-r.x,L),le=range(r.y-g.y,z),de=range(y.x-k.x,j),he=range(k.y-y.y,ae),_e=range($.x-V.x,oe),xe=range(V.y-$.y,re);return{heng_horizontalSpan:ue,heng_verticalSpan:le,zhe_horizontalSpan:de,zhe_verticalSpan:he,gou_horizontalSpan:_e,gou_verticalSpan:xe,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_zhe_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{e.tempData[z]&&e.tempData[z].x&&e.tempData[z].y&&($[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L})});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$8(g,e);updateGlyphByParams$8(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$8(g,e);updateGlyphByParams$8(y,e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("-",y.zhe_horizontalSpan),e.setParam("-",y.zhe_verticalSpan),e.setParam("-",y.gou_horizontalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_heng_zhe_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$8(g,e);updateGlyphByParams$8(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$8(g,e);updateGlyphByParams$8(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("-",y.zhe_horizontalSpan),e.setParam("-",y.zhe_verticalSpan),e.setParam("-",y.gou_horizontalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},skeletonToBones_heng_pie=e=>{const n=[],{heng_start:r,heng_end:g,pie_start:y,pie_end:k,pie_bend:$}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const V=maxSegment;for(let z=0;z<V;z++){const j=z/V,ae=(z+1)/V,oe={x:r.x+(g.x-r.x)*j,y:r.y+(g.y-r.y)*j},re={x:r.x+(g.x-r.x)*ae,y:r.y+(g.y-r.y)*ae},ue={id:`heng_segment_${z}`,start:oe,end:re,length:Math.sqrt((re.x-oe.x)**2+(re.y-oe.y)**2),uAxis:normalize$5({x:re.x-oe.x,y:re.y-oe.y}),vAxis:normalize$5({x:-(re.y-oe.y),y:re.x-oe.x}),children:[],bindMatrix:createIdentityMatrix$5(),currentMatrix:createIdentityMatrix$5()};z>0&&(ue.parent=`heng_segment_${z-1}`,n[z-1].children.push(ue.id)),n.push(ue)}const L=maxSegment;for(let z=0;z<L;z++){const j=z/L,ae=(z+1)/L,oe=quadraticBezierPoint$2(y,$,k,j),re=quadraticBezierPoint$2(y,$,k,ae),ue={id:`pie_segment_${z}`,start:oe,end:re,length:Math.sqrt((re.x-oe.x)**2+(re.y-oe.y)**2),uAxis:normalize$5({x:re.x-oe.x,y:re.y-oe.y}),vAxis:normalize$5({x:-(re.y-oe.y),y:re.x-oe.x}),children:[],bindMatrix:createIdentityMatrix$5(),currentMatrix:createIdentityMatrix$5()};z===0?(ue.parent=`heng_segment_${V-1}`,n[V-1].children.push(ue.id)):(ue.parent=`pie_segment_${z-1}`,n[V+z-1].children.push(ue.id)),n.push(ue)}return n},normalize$5=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$5=()=>[1,0,0,1,0,0],quadraticBezierPoint$2=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_heng_pie=e=>{const n=new CustomGlyph(e),r={heng_horizontalSpan:n.getParam("-"),heng_verticalSpan:n.getParam("-"),pie_horizontalSpan:n.getParam("-"),pie_verticalSpan:n.getParam("-"),pie_bendCursor:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$7(r,n)},bindSkeletonGlyph_heng_pie=e=>{e._o||instanceBasicGlyph_heng_pie(e),glyphSkeletonBind(e._o)},getBend$3=(e,n,r)=>{const g=Math.abs(n.y-e.y);return{x:e.x,y:e.y+r*g}},updateGlyphByParams$7=(e,n)=>{const{heng_horizontalSpan:r,heng_verticalSpan:g,pie_horizontalSpan:y,pie_verticalSpan:k,pie_bendCursor:$,skeletonRefPos:V,weight:L}=e,{ox:z,oy:j}=n._glyph.skeleton,ae=250+z||0,oe=245+j||0;let re,ue;const le=new FP.Joint("heng_start_ref",{x:ae,y:oe+g/2}),de=new FP.Joint("heng_end_ref",{x:le.x+r,y:le.y-g});V===1?(re=new FP.Joint("heng_start",{x:le.x,y:le.y+L/2}),ue=new FP.Joint("heng_end",{x:de.x,y:de.y+L/2})):V===2?(re=new FP.Joint("heng_start",{x:le.x,y:le.y-L/2}),ue=new FP.Joint("heng_end",{x:de.x,y:de.y-L/2})):(re=new FP.Joint("heng_start",{x:le.x,y:le.y}),ue=new FP.Joint("heng_end",{x:de.x,y:de.y})),n.addJoint(le),n.addJoint(de),n.addRefLine(refline(le,de,"ref"));const he=new FP.Joint("pie_start",{x:ue.x,y:ue.y}),_e=new FP.Joint("pie_end",{x:he.x-y,y:he.y+k}),xe=new FP.Joint("pie_bend",{x:he.x,y:he.y+$*k});n.addJoint(re),n.addJoint(ue),n.addJoint(he),n.addJoint(_e),n.addJoint(xe);const Ne={heng_start:re,heng_end:ue,pie_start:he,pie_end:_e,pie_bend:xe};n.addRefLine(refline(re,ue)),n.addRefLine(refline(he,xe)),n.addRefLine(refline(xe,_e)),n.getSkeleton=()=>Ne},computeParamsByJoints$7=(e,n)=>{const{heng_start:r,heng_end:g,pie_start:y,pie_bend:k,pie_end:$}=e,V=n.getParamRange("-"),L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=n.getParamRange("-"),oe=range(g.x-r.x,V),re=range(r.y-g.y,L),ue=range(y.x-$.x,z),le=range($.y-y.y,j),de=range((k.y-y.y)/le,ae);return{heng_horizontalSpan:oe,heng_verticalSpan:re,pie_horizontalSpan:ue,pie_verticalSpan:le,pie_bendCursor:de,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_pie=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{e.tempData[z]&&e.tempData[z].x&&e.tempData[z].y&&($[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L})});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};break}case"pie_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};break}case"pie_bend":{$.pie_bend={x:e.tempData.pie_bend.x,y:e.tempData.pie_bend.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$3($.pie_start,$.pie_end,e.tempData.pie_bendCursor);$.pie_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.pie_bendCursor=e.getParam("-"),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$7(g,e);updateGlyphByParams$7(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$7(g,e);updateGlyphByParams$7(y,e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("-",y.pie_horizontalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.pie_bendCursor),e.tempData=null}},updateSkeletonListener_after_bind_heng_pie=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};break}case"pie_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};break}case"pie_bend":{$.pie_bend={x:e.tempData.pie_bend.x,y:e.tempData.pie_bend.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$3($.pie_start,$.pie_end,e.tempData.pie_bendCursor);$.pie_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.pie_bendCursor=e.getParam("-"),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$7(g,e);updateGlyphByParams$7(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$7(g,e);updateGlyphByParams$7(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("-",y.pie_horizontalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.pie_bendCursor),e.tempData=null}},skeletonToBones_heng_zhe_zhe_pie=e=>{const n=[],{heng_start:r,heng_end:g,zhe1_start:y,zhe1_end:k,zhe2_start:$,zhe2_end:V,pie_start:L,pie_bend:z,pie_end:j}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const ae=maxSegment;for(let de=0;de<ae;de++){const he=de/ae,_e=(de+1)/ae,xe={x:r.x+(g.x-r.x)*he,y:r.y+(g.y-r.y)*he},Ne={x:r.x+(g.x-r.x)*_e,y:r.y+(g.y-r.y)*_e},$e={id:`heng_segment_${de}`,start:xe,end:Ne,length:Math.sqrt((Ne.x-xe.x)**2+(Ne.y-xe.y)**2),uAxis:normalize$4({x:Ne.x-xe.x,y:Ne.y-xe.y}),vAxis:normalize$4({x:-(Ne.y-xe.y),y:Ne.x-xe.x}),children:[],bindMatrix:createIdentityMatrix$4(),currentMatrix:createIdentityMatrix$4()};de>0&&($e.parent=`heng_segment_${de-1}`,n[de-1].children.push($e.id)),n.push($e)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const oe=maxSegment;for(let de=0;de<oe;de++){const he=de/oe,_e=(de+1)/oe,xe={x:y.x+(k.x-y.x)*he,y:y.y+(k.y-y.y)*he},Ne={x:y.x+(k.x-y.x)*_e,y:y.y+(k.y-y.y)*_e},$e={id:`zhe1_segment_${de}`,start:xe,end:Ne,length:Math.sqrt((Ne.x-xe.x)**2+(Ne.y-xe.y)**2),uAxis:normalize$4({x:Ne.x-xe.x,y:Ne.y-xe.y}),vAxis:normalize$4({x:-(Ne.y-xe.y),y:Ne.x-xe.x}),children:[],bindMatrix:createIdentityMatrix$4(),currentMatrix:createIdentityMatrix$4()};de===0?($e.parent=`heng_segment_${ae-1}`,n[ae-1].children.push($e.id)):($e.parent=`zhe1_segment_${de-1}`,n[ae+de-1].children.push($e.id)),n.push($e)}Math.sqrt((V.x-$.x)**2+(V.y-$.y)**2);const re=maxSegment;for(let de=0;de<re;de++){const he=de/re,_e=(de+1)/re,xe={x:$.x+(V.x-$.x)*he,y:$.y+(V.y-$.y)*he},Ne={x:$.x+(V.x-$.x)*_e,y:$.y+(V.y-$.y)*_e},$e={id:`zhe2_segment_${de}`,start:xe,end:Ne,length:Math.sqrt((Ne.x-xe.x)**2+(Ne.y-xe.y)**2),uAxis:normalize$4({x:Ne.x-xe.x,y:Ne.y-xe.y}),vAxis:normalize$4({x:-(Ne.y-xe.y),y:Ne.x-xe.x}),children:[],bindMatrix:createIdentityMatrix$4(),currentMatrix:createIdentityMatrix$4()};de===0?($e.parent=`zhe1_segment_${oe-1}`,n[ae+oe-1].children.push($e.id)):($e.parent=`zhe2_segment_${de-1}`,n[ae+oe+de-1].children.push($e.id)),n.push($e)}Math.sqrt((z.x-L.x)**2+(z.y-L.y)**2);const ue=maxSegment;for(let de=0;de<ue;de++){const he=de/ue,_e=(de+1)/ue,xe={x:L.x+(z.x-L.x)*he,y:L.y+(z.y-L.y)*he},Ne={x:L.x+(z.x-L.x)*_e,y:L.y+(z.y-L.y)*_e},$e={id:`pie1_segment_${de}`,start:xe,end:Ne,length:Math.sqrt((Ne.x-xe.x)**2+(Ne.y-xe.y)**2),uAxis:normalize$4({x:Ne.x-xe.x,y:Ne.y-xe.y}),vAxis:normalize$4({x:-(Ne.y-xe.y),y:Ne.x-xe.x}),children:[],bindMatrix:createIdentityMatrix$4(),currentMatrix:createIdentityMatrix$4()};de===0?($e.parent=`zhe2_segment_${re-1}`,n[ae+oe+re-1].children.push($e.id)):($e.parent=`pie1_segment_${de-1}`,n[ae+oe+re+de-1].children.push($e.id)),n.push($e)}Math.sqrt((j.x-z.x)**2+(j.y-z.y)**2);const le=maxSegment;for(let de=0;de<le;de++){const he=de/le,_e=(de+1)/le,xe={x:z.x+(j.x-z.x)*he,y:z.y+(j.y-z.y)*he},Ne={x:z.x+(j.x-z.x)*_e,y:z.y+(j.y-z.y)*_e},$e={id:`pie2_segment_${de}`,start:xe,end:Ne,length:Math.sqrt((Ne.x-xe.x)**2+(Ne.y-xe.y)**2),uAxis:normalize$4({x:Ne.x-xe.x,y:Ne.y-xe.y}),vAxis:normalize$4({x:-(Ne.y-xe.y),y:Ne.x-xe.x}),children:[],bindMatrix:createIdentityMatrix$4(),currentMatrix:createIdentityMatrix$4()};de===0?($e.parent=`pie1_segment_${ue-1}`,n[ae+oe+re+ue-1].children.push($e.id)):($e.parent=`pie2_segment_${de-1}`,n[ae+oe+re+ue+de-1].children.push($e.id)),n.push($e)}return n},normalize$4=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$4=()=>[1,0,0,1,0,0],instanceBasicGlyph_heng_zhe_zhe_pie=e=>{const n=new CustomGlyph(e),r={heng_horizontalSpan:n.getParam("-"),heng_verticalSpan:n.getParam("-"),zhe1_horizontalSpan:n.getParam("1-"),zhe1_verticalSpan:n.getParam("1-"),zhe2_horizontalSpan:n.getParam("2-"),zhe2_verticalSpan:n.getParam("2-"),pie_horizontalSpan:n.getParam("-"),pie_verticalSpan:n.getParam("-"),pie_bendCursor:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$6(r,n)},bindSkeletonGlyph_heng_zhe_zhe_pie=e=>{e._o||instanceBasicGlyph_heng_zhe_zhe_pie(e),glyphSkeletonBind(e._o)},getBend$2=(e,n,r)=>{const g=Math.abs(n.y-e.y);return{x:e.x,y:e.y+r*g}},updateGlyphByParams$6=(e,n)=>{const{heng_horizontalSpan:r,heng_verticalSpan:g,zhe1_horizontalSpan:y,zhe1_verticalSpan:k,zhe2_horizontalSpan:$,zhe2_verticalSpan:V,pie_horizontalSpan:L,pie_verticalSpan:z,pie_bendCursor:j,skeletonRefPos:ae,weight:oe}=e,{ox:re,oy:ue}=n._glyph.skeleton,le=390+re||0,de=185+ue||0;let he,_e;const xe=new FP.Joint("heng_start_ref",{x:le,y:de+g/2}),Ne=new FP.Joint("heng_end_ref",{x:xe.x+r,y:xe.y-g});ae===1?(he=new FP.Joint("heng_start",{x:xe.x,y:xe.y+oe/2}),_e=new FP.Joint("heng_end",{x:Ne.x,y:Ne.y+oe/2})):ae===2?(he=new FP.Joint("heng_start",{x:xe.x,y:xe.y-oe/2}),_e=new FP.Joint("heng_end",{x:Ne.x,y:Ne.y-oe/2})):(he=new FP.Joint("heng_start",{x:xe.x,y:xe.y}),_e=new FP.Joint("heng_end",{x:Ne.x,y:Ne.y})),n.addJoint(xe),n.addJoint(Ne),n.addRefLine(refline(xe,Ne,"ref"));const $e=new FP.Joint("zhe1_start",{x:_e.x,y:_e.y}),Ce=new FP.Joint("zhe1_end",{x:$e.x-y,y:$e.y+k}),Ie=new FP.Joint("zhe2_start",{x:$e.x-y,y:$e.y+k}),ze=new FP.Joint("zhe2_end",{x:Ie.x+$,y:Ie.y-V}),Ue=new FP.Joint("pie_start",{x:ze.x,y:ze.y}),Pt=new FP.Joint("pie_end",{x:Ue.x-L,y:Ue.y+z}),hn=new FP.Joint("pie_bend",{x:Ue.x,y:Ue.y+j*z});n.addJoint(he),n.addJoint(_e),n.addJoint($e),n.addJoint(Ce),n.addJoint(Ie),n.addJoint(ze),n.addJoint(Ue),n.addJoint(Pt),n.addJoint(hn);const Dt={heng_start:he,heng_end:_e,zhe1_start:$e,zhe1_end:Ce,zhe2_start:Ie,zhe2_end:ze,pie_start:Ue,pie_end:Pt,pie_bend:hn};n.addRefLine(refline(he,_e)),n.addRefLine(refline($e,Ce)),n.addRefLine(refline(Ie,ze)),n.addRefLine(refline(Ue,hn)),n.addRefLine(refline(hn,Pt)),n.getSkeleton=()=>Dt},computeParamsByJoints$6=(e,n)=>{const{heng_start:r,heng_end:g,zhe1_start:y,zhe1_end:k,zhe2_start:$,zhe2_end:V,pie_start:L,pie_bend:z,pie_end:j}=e,ae=n.getParamRange("-"),oe=n.getParamRange("-"),re=n.getParamRange("1-"),ue=n.getParamRange("1-"),le=n.getParamRange("2-"),de=n.getParamRange("2-"),he=n.getParamRange("-"),_e=n.getParamRange("-"),xe=n.getParamRange("-"),Ne=range(g.x-r.x,ae),$e=range(r.y-g.y,oe),Ce=range(y.x-k.x,re),Ie=range(k.y-y.y,ue),ze=range(V.x-$.x,le),Ue=range($.y-V.y,de),Pt=range(L.x-j.x,he),hn=range(j.y-L.y,_e),Dt=range((z.y-L.y)/hn,xe);return{heng_horizontalSpan:Ne,heng_verticalSpan:$e,zhe1_horizontalSpan:Ce,zhe1_verticalSpan:Ie,zhe2_horizontalSpan:ze,zhe2_verticalSpan:Ue,pie_horizontalSpan:Pt,pie_verticalSpan:hn,pie_bendCursor:Dt,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_zhe_zhe_pie=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{e.tempData[z]&&e.tempData[z].x&&e.tempData[z].y&&($[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L})});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y+k},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};break}case"zhe1_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y+k},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};break}case"zhe1_end":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};break}case"zhe2_start":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};break}case"zhe2_end":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};break}case"pie_start":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};break}case"pie_bend":{$.pie_bend={x:e.tempData.pie_bend.x,y:e.tempData.pie_bend.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$2($.pie_start,$.pie_end,e.tempData.pie_bendCursor);$.pie_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.pie_bendCursor=e.getParam("-"),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$6(g,e);updateGlyphByParams$6(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$6(g,e);updateGlyphByParams$6(y,e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("1-",y.zhe1_horizontalSpan),e.setParam("1-",y.zhe1_verticalSpan),e.setParam("2-",y.zhe2_horizontalSpan),e.setParam("2-",y.zhe2_verticalSpan),e.setParam("-",y.pie_horizontalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.pie_bendCursor),e.tempData=null}},updateSkeletonListener_after_bind_heng_zhe_zhe_pie=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y+k},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};break}case"zhe1_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y+k},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y+k},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};break}case"zhe1_end":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};break}case"zhe2_start":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};break}case"zhe2_end":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};break}case"pie_start":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};break}case"pie_bend":{$.pie_bend={x:e.tempData.pie_bend.x,y:e.tempData.pie_bend.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$2($.pie_start,$.pie_end,e.tempData.pie_bendCursor);$.pie_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.pie_bendCursor=e.getParam("-"),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$6(g,e);updateGlyphByParams$6(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$6(g,e);updateGlyphByParams$6(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_horizontalSpan),e.setParam("-",y.heng_verticalSpan),e.setParam("1-",y.zhe1_horizontalSpan),e.setParam("1-",y.zhe1_verticalSpan),e.setParam("2-",y.zhe2_horizontalSpan),e.setParam("2-",y.zhe2_verticalSpan),e.setParam("-",y.pie_horizontalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.pie_bendCursor),e.tempData=null}},skeletonToBones_shu_zhe_zhe_gou=e=>{const n=[],{shu_start:r,shu_end:g,zhe1_start:y,zhe1_end:k,zhe2_start:$,zhe2_end:V,gou_start:L,gou_end:z}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const j=maxSegment;for(let ue=0;ue<j;ue++){const le=ue/j,de=(ue+1)/j,he={x:r.x+(g.x-r.x)*le,y:r.y+(g.y-r.y)*le},_e={x:r.x+(g.x-r.x)*de,y:r.y+(g.y-r.y)*de},xe={id:`shu_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$3({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$3({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$3(),currentMatrix:createIdentityMatrix$3()};ue>0&&(xe.parent=`shu_segment_${ue-1}`,n[ue-1].children.push(xe.id)),n.push(xe)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const ae=maxSegment;for(let ue=0;ue<ae;ue++){const le=ue/ae,de=(ue+1)/ae,he={x:y.x+(k.x-y.x)*le,y:y.y+(k.y-y.y)*le},_e={x:y.x+(k.x-y.x)*de,y:y.y+(k.y-y.y)*de},xe={id:`zhe1_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$3({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$3({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$3(),currentMatrix:createIdentityMatrix$3()};ue===0?(xe.parent=`shu_segment_${j-1}`,n[j-1].children.push(xe.id)):(xe.parent=`zhe1_segment_${ue-1}`,n[j+ue-1].children.push(xe.id)),n.push(xe)}Math.sqrt((V.x-$.x)**2+(V.y-$.y)**2);const oe=maxSegment;for(let ue=0;ue<oe;ue++){const le=ue/oe,de=(ue+1)/oe,he={x:$.x+(V.x-$.x)*le,y:$.y+(V.y-$.y)*le},_e={x:$.x+(V.x-$.x)*de,y:$.y+(V.y-$.y)*de},xe={id:`zhe2_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$3({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$3({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$3(),currentMatrix:createIdentityMatrix$3()};ue===0?(xe.parent=`zhe1_segment_${ae-1}`,n[j+ae-1].children.push(xe.id)):(xe.parent=`zhe2_segment_${ue-1}`,n[j+ae+ue-1].children.push(xe.id)),n.push(xe)}Math.sqrt((z.x-L.x)**2+(z.y-L.y)**2);const re=maxSegment;for(let ue=0;ue<re;ue++){const le=ue/re,de=(ue+1)/re,he={x:L.x+(z.x-L.x)*le,y:L.y+(z.y-L.y)*le},_e={x:L.x+(z.x-L.x)*de,y:L.y+(z.y-L.y)*de},xe={id:`gou_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$3({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$3({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$3(),currentMatrix:createIdentityMatrix$3()};ue===0?(xe.parent=`zhe2_segment_${oe-1}`,n[j+ae+oe-1].children.push(xe.id)):(xe.parent=`gou_segment_${ue-1}`,n[j+ae+oe+ue-1].children.push(xe.id)),n.push(xe)}return n},normalize$3=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$3=()=>[1,0,0,1,0,0],instanceBasicGlyph_shu_zhe_zhe_gou=e=>{const n=new CustomGlyph(e),r={shu_horizontalSpan:n.getParam("-"),shu_verticalSpan:n.getParam("-"),zhe1_horizontalSpan:n.getParam("1-"),zhe1_verticalSpan:n.getParam("1-"),zhe2_horizontalSpan:n.getParam("2-"),zhe2_verticalSpan:n.getParam("2-"),gou_horizontalSpan:n.getParam("-"),gou_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$5(r,n)},bindSkeletonGlyph_shu_zhe_zhe_gou=e=>{e._o||instanceBasicGlyph_shu_zhe_zhe_gou(e),glyphSkeletonBind(e._o)},updateGlyphByParams$5=(e,n)=>{const{shu_horizontalSpan:r,shu_verticalSpan:g,zhe1_horizontalSpan:y,zhe1_verticalSpan:k,zhe2_horizontalSpan:$,zhe2_verticalSpan:V,gou_horizontalSpan:L,gou_verticalSpan:z,skeletonRefPos:j,weight:ae}=e,{ox:oe,oy:re}=n._glyph.skeleton,ue=250+oe||0,le=250+re||0;let de,he;const _e=new FP.Joint("shu_start_ref",{x:ue,y:le}),xe=new FP.Joint("shu_end_ref",{x:_e.x+r,y:_e.y+g});j===1?(de=new FP.Joint("shu_start",{x:_e.x-ae/2,y:_e.y}),he=new FP.Joint("shu_end",{x:xe.x-ae/2,y:xe.y})):j===2?(de=new FP.Joint("shu_start",{x:_e.x+ae/2,y:_e.y}),he=new FP.Joint("shu_end",{x:xe.x+ae/2,y:xe.y})):(de=new FP.Joint("shu_start",{x:_e.x,y:_e.y}),he=new FP.Joint("shu_end",{x:xe.x,y:xe.y})),n.addJoint(_e),n.addJoint(xe),n.addRefLine(refline(_e,xe,"ref"));const Ne=new FP.Joint("zhe1_start",{x:he.x,y:he.y}),$e=new FP.Joint("zhe1_end",{x:Ne.x+y,y:Ne.y-k}),Ce=new FP.Joint("zhe2_start",{x:$e.x,y:$e.y}),Ie=new FP.Joint("zhe2_end",{x:Ce.x-$,y:Ce.y+V}),ze=new FP.Joint("gou_start",{x:Ce.x-$,y:Ce.y+V}),Ue=new FP.Joint("gou_end",{x:ze.x-L,y:ze.y+z});n.addJoint(de),n.addJoint(he),n.addJoint(Ne),n.addJoint($e),n.addJoint(Ce),n.addJoint(Ie),n.addJoint(ze),n.addJoint(Ue);const Pt={shu_start:de,shu_end:he,zhe1_start:Ne,zhe1_end:$e,zhe2_start:Ce,zhe2_end:Ie,gou_start:ze,gou_end:Ue};n.addRefLine(refline(de,he)),n.addRefLine(refline(Ne,$e)),n.addRefLine(refline(Ce,Ie)),n.addRefLine(refline(ze,Ue)),n.getSkeleton=()=>Pt},computeParamsByJoints$5=(e,n)=>{const{shu_start:r,shu_end:g,zhe1_start:y,zhe1_end:k,zhe2_start:$,zhe2_end:V,gou_start:L,gou_end:z}=e,j=n.getParamRange("-"),ae=n.getParamRange("-"),oe=n.getParamRange("1-"),re=n.getParamRange("1-"),ue=n.getParamRange("2-"),le=n.getParamRange("2-"),de=n.getParamRange("-"),he=n.getParamRange("-"),_e=range(g.x-r.x,j),xe=range(g.y-r.y,ae),Ne=range(k.x-y.x,oe),$e=range(y.y-k.y,re),Ce=range($.x-V.x,ue),Ie=range(V.y-$.y,le),ze=range(L.x-z.x,de),Ue=range(z.y-L.y,he);return{shu_horizontalSpan:_e,shu_verticalSpan:xe,zhe1_horizontalSpan:Ne,zhe1_verticalSpan:$e,zhe2_horizontalSpan:Ce,zhe2_verticalSpan:Ie,gou_horizontalSpan:ze,gou_verticalSpan:Ue,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_shu_zhe_zhe_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{e.tempData[z]&&e.tempData[z].x&&e.tempData[z].y&&($[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L})});break}case"shu_end":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y+k},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe1_start":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y+k},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe1_end":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe2_start":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe2_end":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$5(g,e);updateGlyphByParams$5(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$5(g,e);updateGlyphByParams$5(y,e),e.setParam("-",y.shu_horizontalSpan),e.setParam("-",y.shu_verticalSpan),e.setParam("1-",y.zhe1_horizontalSpan),e.setParam("1-",y.zhe1_verticalSpan),e.setParam("2-",y.zhe2_horizontalSpan),e.setParam("2-",y.zhe2_verticalSpan),e.setParam("-",y.gou_horizontalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_shu_zhe_zhe_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_end":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y+k},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe1_start":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y+k},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe1_end":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe2_start":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe2_end":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$5(g,e);updateGlyphByParams$5(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$5(g,e);updateGlyphByParams$5(y,e),updateSkeletonTransformation(e),e.setParam("-",y.shu_horizontalSpan),e.setParam("-",y.shu_verticalSpan),e.setParam("1-",y.zhe1_horizontalSpan),e.setParam("1-",y.zhe1_verticalSpan),e.setParam("2-",y.zhe2_horizontalSpan),e.setParam("2-",y.zhe2_verticalSpan),e.setParam("-",y.gou_horizontalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},skeletonToBones_shu_gou=e=>{const n=[],{shu_start:r,shu_end:g,gou_start:y,gou_end:k}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const $=maxSegment;for(let L=0;L<$;L++){const z=L/$,j=(L+1)/$,ae={x:r.x+(g.x-r.x)*z,y:r.y+(g.y-r.y)*z},oe={x:r.x+(g.x-r.x)*j,y:r.y+(g.y-r.y)*j},re={id:`shu_segment_${L}`,start:ae,end:oe,length:Math.sqrt((oe.x-ae.x)**2+(oe.y-ae.y)**2),uAxis:normalize$2({x:oe.x-ae.x,y:oe.y-ae.y}),vAxis:normalize$2({x:-(oe.y-ae.y),y:oe.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$2(),currentMatrix:createIdentityMatrix$2()};L>0&&(re.parent=`shu_segment_${L-1}`,n[L-1].children.push(re.id)),n.push(re)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const V=maxSegment;for(let L=0;L<V;L++){const z=L/V,j=(L+1)/V,ae={x:y.x+(k.x-y.x)*z,y:y.y+(k.y-y.y)*z},oe={x:y.x+(k.x-y.x)*j,y:y.y+(k.y-y.y)*j},re={id:`gou_segment_${L}`,start:ae,end:oe,length:Math.sqrt((oe.x-ae.x)**2+(oe.y-ae.y)**2),uAxis:normalize$2({x:oe.x-ae.x,y:oe.y-ae.y}),vAxis:normalize$2({x:-(oe.y-ae.y),y:oe.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$2(),currentMatrix:createIdentityMatrix$2()};L===0?(re.parent=`shu_segment_${$-1}`,n[$-1].children.push(re.id)):(re.parent=`gou_segment_${L-1}`,n[$+L-1].children.push(re.id)),n.push(re)}return n},normalize$2=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$2=()=>[1,0,0,1,0,0],instanceBasicGlyph_shu_gou=e=>{const n=new CustomGlyph(e),r={shu_horizontalSpan:n.getParam("-"),shu_verticalSpan:n.getParam("-"),gou_horizontalSpan:n.getParam("-"),gou_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$4(r,n)},bindSkeletonGlyph_shu_gou=e=>{e._o||instanceBasicGlyph_shu_gou(e),glyphSkeletonBind(e._o)},updateGlyphByParams$4=(e,n)=>{const{shu_horizontalSpan:r,shu_verticalSpan:g,gou_horizontalSpan:y,gou_verticalSpan:k,skeletonRefPos:$,weight:V}=e,{ox:L,oy:z}=n._glyph.skeleton,j=500+L||0,ae=250+z||0;let oe,re;const ue=new FP.Joint("shu_start_ref",{x:j,y:ae}),le=new FP.Joint("shu_end_ref",{x:ue.x+r,y:ue.y+g});$===1?(oe=new FP.Joint("shu_start",{x:ue.x-V/2,y:ue.y}),re=new FP.Joint("shu_end",{x:le.x-V/2,y:le.y})):$===2?(oe=new FP.Joint("shu_start",{x:ue.x+V/2,y:ue.y}),re=new FP.Joint("shu_end",{x:le.x+V/2,y:le.y})):(oe=new FP.Joint("shu_start",{x:ue.x,y:ue.y}),re=new FP.Joint("shu_end",{x:le.x,y:le.y})),n.addJoint(ue),n.addJoint(le),n.addRefLine(refline(ue,le,"ref"));const de=new FP.Joint("gou_start",{x:re.x,y:re.y}),he=new FP.Joint("gou_end",{x:de.x-y,y:de.y+k});n.addJoint(oe),n.addJoint(re),n.addJoint(de),n.addJoint(he);const _e={shu_start:oe,shu_end:re,gou_start:de,gou_end:he};n.addRefLine(refline(oe,re)),n.addRefLine(refline(de,he)),n.getSkeleton=()=>_e},computeParamsByJoints$4=(e,n)=>{const{shu_start:r,shu_end:g,gou_start:y,gou_end:k}=e,$=n.getParamRange("-"),V=n.getParamRange("-"),L=n.getParamRange("-"),z=n.getParamRange("-"),j=range(g.x-r.x,$),ae=range(g.y-r.y,V),oe=range(y.x-k.x,L),re=range(k.y-y.y,z);return{shu_horizontalSpan:j,shu_verticalSpan:ae,gou_horizontalSpan:oe,gou_verticalSpan:re,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_shu_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{e.tempData[z]&&e.tempData[z].x&&e.tempData[z].y&&($[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L})});break}case"shu_end":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$4(g,e);updateGlyphByParams$4(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$4(g,e);updateGlyphByParams$4(y,e),e.setParam("-",y.shu_horizontalSpan),e.setParam("-",y.shu_verticalSpan),e.setParam("-",y.gou_horizontalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_shu_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_end":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$4(g,e);updateGlyphByParams$4(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$4(g,e);updateGlyphByParams$4(y,e),updateSkeletonTransformation(e),e.setParam("-",y.shu_horizontalSpan),e.setParam("-",y.shu_verticalSpan),e.setParam("-",y.gou_horizontalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},skeletonToBones_wan_gou=e=>{const n=[],{wan_start:r,wan_bend:g,wan_end:y,gou_start:k,gou_end:$}=e,V=maxSegment;for(let z=0;z<V;z++){const j=z/V,ae=(z+1)/V,oe=quadraticBezierPoint$1(r,g,y,j),re=quadraticBezierPoint$1(r,g,y,ae),ue={id:`wan_segment_${z}`,start:oe,end:re,length:Math.sqrt((re.x-oe.x)**2+(re.y-oe.y)**2),uAxis:normalize$1({x:re.x-oe.x,y:re.y-oe.y}),vAxis:normalize$1({x:-(re.y-oe.y),y:re.x-oe.x}),children:[],bindMatrix:createIdentityMatrix$1(),currentMatrix:createIdentityMatrix$1()};z>0&&(ue.parent=`wan_segment_${z-1}`,n[z-1].children.push(ue.id)),n.push(ue)}Math.sqrt(($.x-k.x)**2+($.y-k.y)**2);const L=maxSegment;for(let z=0;z<L;z++){const j=z/L,ae=(z+1)/L,oe={x:k.x+($.x-k.x)*j,y:k.y+($.y-k.y)*j},re={x:k.x+($.x-k.x)*ae,y:k.y+($.y-k.y)*ae},ue={id:`gou_segment_${z}`,start:oe,end:re,length:Math.sqrt((re.x-oe.x)**2+(re.y-oe.y)**2),uAxis:normalize$1({x:re.x-oe.x,y:re.y-oe.y}),vAxis:normalize$1({x:-(re.y-oe.y),y:re.x-oe.x}),children:[],bindMatrix:createIdentityMatrix$1(),currentMatrix:createIdentityMatrix$1()};z===0?(ue.parent=`wan_segment_${V-1}`,n[V-1].children.push(ue.id)):(ue.parent=`gou_segment_${z-1}`,n[V+z-1].children.push(ue.id)),n.push(ue)}return n},normalize$1=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$1=()=>[1,0,0,1,0,0],quadraticBezierPoint$1=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_wan_gou=e=>{const n=new CustomGlyph(e),r={wan_length:n.getParam("-"),wan_bendDegree:Number(n.getParam("-"))+30*Number(n.getParam("")||1),gou_horizonalSpan:n.getParam("-"),gou_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$3(r,n)},bindSkeletonGlyph_wan_gou=e=>{e._o||instanceBasicGlyph_wan_gou(e),glyphSkeletonBind(e._o)},getBend$1=(e,n,r)=>{const g=Math.abs(n.y-e.y);return{x:e.x+r,y:e.y+g/2}},updateGlyphByParams$3=(e,n)=>{const{wan_length:r,wan_bendDegree:g,gou_horizonalSpan:y,gou_verticalSpan:k,skeletonRefPos:$,weight:V}=e,{ox:L,oy:z}=n._glyph.skeleton,j=500+L||0,ae=250+z||0,oe=new FP.Joint("wan_start",{x:j,y:ae}),re=new FP.Joint("wan_end",{x:oe.x,y:oe.y+r}),ue=new FP.Joint("wan_bend",{x:oe.x+g,y:oe.y+r/2}),le=new FP.Joint("gou_start",{x:oe.x,y:oe.y+r}),de=new FP.Joint("gou_end",{x:le.x-y,y:le.y+k});n.addJoint(oe),n.addJoint(ue),n.addJoint(re),n.addJoint(le),n.addJoint(de);const he={wan_start:oe,wan_bend:ue,wan_end:re,gou_start:le,gou_end:de};n.addRefLine(refline(oe,ue)),n.addRefLine(refline(ue,re)),n.addRefLine(refline(le,de)),n.getSkeleton=()=>he},computeParamsByJoints$3=(e,n)=>{const{wan_start:r,wan_end:g,wan_bend:y,gou_start:k,gou_end:$}=e,V=n.getParamRange("-"),L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=range(g.y-r.y,V),oe=range(y.x-r.x,L),re=range(k.x-$.x,z),ue=range($.y-k.y,j);return{wan_length:ae,wan_bendDegree:oe,gou_horizonalSpan:re,gou_verticalSpan:ue,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"wan_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"wan_bend":{$.wan_bend={x:e.tempData.wan_bend.x+y,y:e.tempData.wan_bend.y};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x,y:e.tempData.gou_end.y+k};const V=getBend$1($.wan_start,$.wan_end,e.tempData.wan_bendDegree);$.wan_bend={x:V.x,y:V.y};break}case"gou_start":{$.wan_end={x:e.tempData.wan_end.x,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x,y:e.tempData.gou_end.y+k};const V=getBend$1($.wan_start,$.wan_end,e.tempData.wan_bendDegree);$.wan_bend={x:V.x,y:V.y};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.wan_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$3(g,e);updateGlyphByParams$3(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$3(g,e);updateGlyphByParams$3(y,e),e.setParam("-",y.wan_length),e.setParam("-",y.wan_bendDegree-30*Number(e.getParam("")||1)),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"wan_bend":{$.wan_bend={x:e.tempData.wan_bend.x+y,y:e.tempData.wan_bend.y};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x,y:e.tempData.gou_end.y+k};const V=getBend$1($.wan_start,$.wan_end,e.tempData.wan_bendDegree);$.wan_bend={x:V.x,y:V.y};break}case"gou_start":{$.wan_end={x:e.tempData.wan_end.x,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x,y:e.tempData.gou_end.y+k};const V=getBend$1($.wan_start,$.wan_end,e.tempData.wan_bendDegree);$.wan_bend={x:V.x,y:V.y};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.wan_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$3(g,e);updateGlyphByParams$3(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$3(g,e);updateGlyphByParams$3(y,e),updateSkeletonTransformation(e),e.setParam("-",y.wan_length),e.setParam("-",y.wan_bendDegree-30*Number(e.getParam("")||1)),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},glyphSkeletonBind=e=>{const n=e.getSkeleton(),g=e.components.filter(L=>L.type==="pen");if(g.length===0){console.warn("No pen components found");return}const y=g[0],k=skeletonToBones(n),$=componentsToPoints(y),V=$.map((L,z)=>calculatePointBones(L,k,z));return e.skeletonBindData={bones:k,pointsBonesMap:V,originalPoints:$.map(L=>({x:L.x,y:L.y})),skeletonType:detectSkeletonType(n)},e._glyph.skeleton&&(e._glyph.skeleton.skeletonBindData={bones:k,pointsBonesMap:V,originalPoints:$.map(L=>({x:L.x,y:L.y})),skeletonType:detectSkeletonType(n)}),{bones:k,pointsBonesMap:V}};function detectSkeletonType(e){const n=Object.keys(e);if(n.includes("start")&&n.includes("end")&&!n.includes("bend")){const r=e.start,g=e.end;return Math.abs(g.x-r.x),Math.abs(g.y-r.y),"line"}else if(n.includes("start")&&n.includes("bend")&&n.includes("end")){const r=e.start,g=e.bend,y=e.end;return g.x-r.x,g.y-r.y,y.x-g.x,y.y-g.y,y.x-r.x,"curve"}else{if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("zhe1_start")&&n.includes("zhe1_end")&&n.includes("zhe2_start")&&n.includes("zhe2_end")&&n.includes("wan_start")&&n.includes("wan_end")&&n.includes("gou_start")&&n.includes("gou_end"))return"heng_zhe_zhe_wan_gou";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("zhe1_start")&&n.includes("zhe1_end")&&n.includes("zhe2_start")&&n.includes("zhe2_end")&&n.includes("pie_start")&&n.includes("pie_end"))return"heng_zhe_zhe_pie";if(n.includes("heng1_start")&&n.includes("heng1_end")&&n.includes("heng2_start")&&n.includes("heng2_end")&&n.includes("zhe1_start")&&n.includes("zhe1_end")&&n.includes("zhe2_start")&&n.includes("zhe2_end"))return"er_heng_zhe";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("zhe_start")&&n.includes("zhe_end")&&n.includes("wan_start")&&n.includes("wan_end")&&n.includes("gou_start")&&n.includes("gou_end"))return"heng_zhe_wan_gou";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("zhe_start")&&n.includes("zhe_end")&&n.includes("wan_start")&&n.includes("wan_end"))return"heng_zhe_wan";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("zhe_start")&&n.includes("zhe_end")&&n.includes("gou_start")&&n.includes("gou_end"))return"heng_zhe_gou";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("zhe_start")&&n.includes("zhe_end")&&n.includes("tiao_start")&&n.includes("tiao_end"))return"heng_zhe_tiao";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("zhe_start")&&n.includes("zhe_end")&&n.includes("pie_start")&&n.includes("pie_end"))return"heng_zhe_pie";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("pie_start")&&n.includes("pie_end")&&n.includes("wangou_start")&&n.includes("wangou_end"))return"heng_pie_wan_gou";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("wan_start")&&n.includes("wan_end")&&n.includes("gou_start")&&n.includes("gou_end"))return"heng_wan_gou";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("pie_start")&&n.includes("pie_bend")&&n.includes("pie_end"))return"heng_pie";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("gou_start")&&n.includes("gou_end"))return"heng_gou";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("zhe_start")&&n.includes("zhe_end"))return"heng_zhe";if(n.includes("shu_start")&&n.includes("shu_end")&&n.includes("zhe1_start")&&n.includes("zhe1_end")&&n.includes("zhe2_start")&&n.includes("zhe2_end")&&n.includes("gou_start")&&n.includes("gou_end"))return"shu_zhe_zhe_gou";if(n.includes("shu_start")&&n.includes("shu_end")&&n.includes("wan_start")&&n.includes("wan_end")&&n.includes("gou_start")&&n.includes("gou_end"))return"shu_wan_gou";if(n.includes("shu_start")&&n.includes("shu_end")&&n.includes("gou_start")&&n.includes("gou_end"))return"shu_gou";if(n.includes("shu_start")&&n.includes("shu_end")&&n.includes("zhe_start")&&n.includes("zhe_end"))return"shu_zhe";if(n.includes("shu_start")&&n.includes("shu_end")&&n.includes("wan_start")&&n.includes("wan_end"))return"shu_wan";if(n.includes("shu_start")&&n.includes("shu_end")&&n.includes("pie_start")&&n.includes("pie_end"))return"shu_pie";if(n.includes("shu_start")&&n.includes("shu_end")&&n.includes("tiao_start")&&n.includes("tiao_end"))return"shu_tiao";if(n.includes("pie_start")&&n.includes("pie_end")&&n.includes("tiao_start")&&n.includes("tiao_end"))return"pie_tiao";if(n.includes("pie_start")&&n.includes("pie_end")&&n.includes("dian_start")&&n.includes("dian_end"))return"pie_dian";if(n.includes("tiao_start")&&n.includes("tiao_end")&&n.includes("na_start")&&n.includes("na_end"))return"tiao_na";if(n.includes("wan_start")&&n.includes("wan_end")&&n.includes("gou_start")&&n.includes("gou_end"))return"wan_gou";if(n.includes("xie_start")&&n.includes("xie_end")&&n.includes("gou_start")&&n.includes("gou_end"))return"xie_gou";if(n.includes("start")&&n.includes("end")&&n.includes("bend"))return"dian";if(n.includes("start")&&n.includes("end")){if(n.includes("heng_start")&&n.includes("heng_end"))return"heng";if(n.includes("shu_start")&&n.includes("shu_end"))return"shu";if(n.includes("pie_start")&&n.includes("pie_end"))return"pie";if(n.includes("na_start")&&n.includes("na_end"))return"na";if(n.includes("tiao_start")&&n.includes("tiao_end"))return"tiao";if(n.includes("ping_na_start")&&n.includes("ping_na_end"))return"ping_na"}}return"line"}function skeletonToBones(e){const n=[],r=detectSkeletonType(e);if(r==="line"){const g=e.start,y=e.end,k=Math.sqrt((y.x-g.x)**2+(y.y-g.y)**2),$=Math.max(20,k/maxSegment),V=Math.max(minSegment,Math.ceil(k/$));for(let L=0;L<V;L++){const z=L/V,j=(L+1)/V,ae={x:g.x+(y.x-g.x)*z,y:g.y+(y.y-g.y)*z},oe={x:g.x+(y.x-g.x)*j,y:g.y+(y.y-g.y)*j},re=Math.sqrt((oe.x-ae.x)**2+(oe.y-ae.y)**2),ue={id:`segment_${L}`,start:ae,end:oe,length:re,bindLength:re,uAxis:normalize({x:oe.x-ae.x,y:oe.y-ae.y}),vAxis:normalize({x:-(oe.y-ae.y),y:oe.x-ae.x}),children:[],bindMatrix:createIdentityMatrix(),currentMatrix:createIdentityMatrix()};L>0&&(ue.parent=`segment_${L-1}`,n[L-1].children.push(ue.id)),n.push(ue)}}else if(r==="curve"){const g=e.start,y=e.bend,k=e.end,$=maxSegment;for(let V=0;V<$;V++){const L=V/$,z=(V+1)/$,j=quadraticBezierPoint(g,y,k,L),ae=quadraticBezierPoint(g,y,k,z),oe=Math.sqrt((ae.x-j.x)**2+(ae.y-j.y)**2),re={id:`segment_${V}`,start:j,end:ae,length:oe,bindLength:oe,uAxis:normalize({x:ae.x-j.x,y:ae.y-j.y}),vAxis:normalize({x:-(ae.y-j.y),y:ae.x-j.x}),children:[],bindMatrix:createIdentityMatrix(),currentMatrix:createIdentityMatrix()};V>0&&(re.parent=`segment_${V-1}`,n[V-1].children.push(re.id)),n.push(re)}}else try{const g=callStrokeSkeletonToBones(r,e);n.push(...g)}catch(g){return console.warn(`Failed to process skeleton type ${r}:`,g),skeletonToBones(e)}return n.forEach(g=>{typeof g.bindLength!="number"&&(g.bindLength=g.length),g.bindMatrix=calculateBoneMatrix(g),g.currentMatrix=[...g.bindMatrix]}),n}function callStrokeSkeletonToBones(e,n){try{switch(e){case"heng_gou":return skeletonToBones_heng_gou(n);case"shu_pie":return skeletonToBones_shu_pie(n);case"heng_pie":return skeletonToBones_heng_pie(n);case"heng_na":return skeletonToBones_na(n);case"shu_gou":return skeletonToBones_shu_gou(n);case"heng_zhe":return skeletonToBones_heng_zhe(n);case"shu_zhe":return skeletonToBones_shu_zhe(n);case"heng_wan_gou":return skeletonToBones_heng_wan_gou(n);case"shu_wan":return skeletonToBones_shu_wan(n);case"tiao_na":return skeletonToBones_tiao_na(n);case"pie_tiao":return skeletonToBones_pie_tiao(n);case"pie_dian":return skeletonToBones_pie_dian(n);case"heng_pie_wan_gou":return skeletonToBones_heng_pie_wan_gou(n);case"heng_zhe_wan_gou":return skeletonToBones_heng_zhe_wan_gou(n);case"heng_zhe_zhe_wan_gou":return skeletonToBones_heng_zhe_zhe_wan_gou(n);case"heng_zhe_zhe_pie":return skeletonToBones_heng_zhe_zhe_pie(n);case"shu_zhe_zhe_gou":return skeletonToBones_shu_zhe_zhe_gou(n);case"heng_zhe_tiao":return skeletonToBones_heng_zhe_tiao(n);case"heng_zhe_wan":return skeletonToBones_heng_zhe_wan(n);case"heng_zhe_gou":return skeletonToBones_heng_zhe_gou(n);case"heng_zhe_pie":return skeletonToBones_heng_pie(n);case"er_heng_zhe":return skeletonToBones_er_heng_zhe(n);case"heng_zhe2":return skeletonToBones_heng_zhe2(n);case"shu_tiao":return skeletonToBones_shu_tiao(n);case"shu_wan_gou":return skeletonToBones_shu_wan_gou(n);case"xie_gou":return skeletonToBones_xie_gou(n);case"wan_gou":return skeletonToBones_wan_gou(n);case"dian":return skeletonToBones_dian(n);case"tiao":return skeletonToBones_tiao(n);case"ping_na":return skeletonToBones_ping_na(n);default:return console.warn(`No specific skeletonToBones function for type: ${e}`),[]}}catch(r){return console.warn(`Failed to call skeletonToBones for type ${e}:`,r),[]}}function quadraticBezierPoint(e,n,r,g){const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}}function componentsToPoints(e){return e.value.points.map(n=>({x:n.x,y:n.y}))}function calculatePointBones(e,n,r){const g={pointIndex:r,bones:[]};if(!e||typeof e.x!="number"||typeof e.y!="number"||isNaN(e.x)||isNaN(e.y))return console.warn("Invalid point in calculatePointBones:",e),g;if(!n||n.length===0)return console.warn("No bones available for binding"),g;const y=[];if(n.forEach((V,L)=>{if(!V||typeof V.length!="number"||isNaN(V.length)||V.length<=0){console.warn("Invalid bone in calculatePointBones:",V);return}const{distance:z,localCoords:j}=pointToBoneDistance(e,V);if(typeof z!="number"||isNaN(z)||z<0){console.warn("Invalid distance calculated:",z,"for point:",e,"bone:",V);return}if(!j||typeof j.u!="number"||typeof j.v!="number"||isNaN(j.u)||isNaN(j.v)){console.warn("Invalid local coordinates:",j,"for point:",e,"bone:",V);return}const ae=V.length*skeletonThreshold;if(z<=ae){const oe=1/(z+.001);if(typeof oe!="number"||isNaN(oe)||oe<0){console.warn("Invalid weight calculated:",oe,"for distance:",z);return}const re=j.u,ue=calculateFalloff(re);if(typeof ue!="number"||isNaN(ue)||ue<0){console.warn("Invalid falloff calculated:",ue,"for u:",re);return}const le=oe*ue;if(typeof le!="number"||isNaN(le)||le<0){console.warn("Invalid final weight:",le,"weight:",oe,"falloff:",ue);return}y.push({boneIndex:L,weight:le,localCoords:j})}}),y.length===0){console.warn(`No valid bone weights found for point ${r}, trying fallback strategy`);let V=1/0,L=-1,z={u:0,v:0};if(n.forEach((j,ae)=>{if(!j||typeof j.length!="number"||isNaN(j.length)||j.length<=0)return;const{distance:oe,localCoords:re}=pointToBoneDistance(e,j);typeof oe=="number"&&!isNaN(oe)&&oe>=0&&typeof re.u=="number"&&!isNaN(re.u)&&typeof re.v=="number"&&!isNaN(re.v)&&oe<V&&(V=oe,L=ae,z=re)}),L>=0){const j=1/(V+.001),ae=calculateFalloff(z.u),oe=j*ae;y.push({boneIndex:L,weight:oe,localCoords:z})}}if(y.length===0)return console.warn(`Still no valid bone weights found for point ${r} after fallback`),g;y.sort((V,L)=>V.weight-L.weight);const k=y.slice(-Math.min(4,y.length)),$=k.reduce((V,L)=>typeof L.weight!="number"||isNaN(L.weight)?(console.warn("Invalid bone weight in normalization:",L.weight),V):V+L.weight,0);return $<=0||isNaN($)?(console.warn("Invalid total weight:",$,"selectedBones:",k),k.forEach(V=>{V.weight=1/k.length})):k.forEach(V=>{V.weight/=$}),g.bones=k,g}function calculateFalloff(e){if(typeof e!="number"||isNaN(e))return console.warn("Invalid u value in calculateFalloff:",e),.5;let n;e<0?n=0:e>1?n=1:n=e;const r=1-2*(n-.5)**2;return typeof r!="number"||isNaN(r)||r<0?(console.warn("Invalid falloff result:",r,"for u:",e,"normalizedU:",n),.5):r}function pointToBoneDistance(e,n){const{x:r,y:g}=e,{start:y,end:k,uAxis:$,vAxis:V}=n;if(!y||!k||!$||!V)return console.warn("Invalid bone data in pointToBoneDistance:",n),{distance:1/0,localCoords:{u:0,v:0}};if(isNaN(r)||isNaN(g)||isNaN(y.x)||isNaN(y.y)||isNaN(k.x)||isNaN(k.y)||isNaN($.x)||isNaN($.y)||isNaN(V.x)||isNaN(V.y))return console.warn("NaN values in pointToBoneDistance:",{x:r,y:g,start:y,end:k,uAxis:$,vAxis:V}),{distance:1/0,localCoords:{u:0,v:0}};const L={x:r-y.x,y:g-y.y},z=L.x*$.x+L.y*$.y,j=L.x*V.x+L.y*V.y;if(isNaN(z)||isNaN(j))return console.warn("NaN in local coordinates calculation:",{u:z,v:j,toPoint:L,uAxis:$,vAxis:V}),{distance:1/0,localCoords:{u:0,v:0}};let ae;return z<0?ae=Math.sqrt((r-y.x)**2+(g-y.y)**2):z>n.length?ae=Math.sqrt((r-k.x)**2+(g-k.y)**2):ae=Math.abs(j),isNaN(ae)||ae<0?(console.warn("Invalid distance calculated:",ae,"for point:",e,"bone:",n),{distance:1/0,localCoords:{u:0,v:0}}):{distance:ae,localCoords:{u:z,v:j}}}function normalize(e){const n=Math.sqrt(e.x**2+e.y**2);return n===0||isNaN(n)?(console.warn("Cannot normalize zero or NaN vector:",e),{x:1,y:0}):{x:e.x/n,y:e.y/n}}function createIdentityMatrix(){return[1,0,0,1,0,0]}function calculateBoneMatrix(e){const{start:n,end:r,uAxis:g,vAxis:y}=e;return[g.x,y.x,g.y,y.y,n.x,n.y]}function calculateBoneTransformationMatrix(e,n){const r=e.bindMatrix,g=calculateBoneMatrix(n),y=typeof e.bindLength=="number"?e.bindLength:e.length,k=typeof n.length=="number"?n.length:y,V=[y&&Math.abs(y)>.001?k/y:1,0,0,1,0,0],L=invertMatrix(r);return multiplyMatrices(multiplyMatrices(g,V),L)}function invertMatrix(e){const[n,r,g,y,k,$]=e,V=n*y-r*g;if(Math.abs(V)<.001)return console.warn("Matrix determinant too small for inversion:",V),[1,0,0,1,0,0];const L=1/V,z=y*L,j=-r*L,ae=-g*L,oe=n*L,re=-(z*k+j*$),ue=-(ae*k+oe*$);return[z,j,ae,oe,re,ue]}function multiplyMatrices(e,n){const[r,g,y,k,$,V]=e,[L,z,j,ae,oe,re]=n;return[r*L+g*j,r*z+g*ae,y*L+k*j,y*z+k*ae,r*oe+g*re+$,y*oe+k*re+V]}function calculateTransformedPoints(e,n,r){const g=e._glyph.skeleton?.skeletonBindData;if(!g)return console.warn("No bind data found"),[];const{bones:y,pointsBonesMap:k,originalPoints:$}=g;let V=r||$;return!y||!k||!V?(console.warn("Invalid bind data:",g),[]):y.length===0?(console.warn("No bones found"),V.map(z=>({x:z.x,y:z.y}))):(updateBoneMatrices(y,n),k.map((z,j)=>!z||!V[j]?(console.warn("Invalid binding or original point at index:",j),{x:0,y:0}):calculatePointTransformation(z,y,V[j])))}function updateBoneMatrices(e,n){if(!n){console.warn("Invalid skeleton:",n);return}e.forEach(g=>{typeof g.bindLength!="number"&&(g.bindLength=g.length)});const r=detectSkeletonType(n);r==="line"?updateLinearBoneMatrices(e,n):r==="curve"?updateCurveBoneMatrices(e,n):updateCompositeBoneMatrices(e,n,r)}function updateLinearBoneMatrices(e,n){const r=n.start,g=n.end;if(!r||!g){console.warn("Invalid start or end point:",r,g);return}Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const y=e.length;if(y===0){console.warn("No bones to update in updateLinearBoneMatrices");return}for(let k=0;k<y;k++){const $={...e[k]},V=e[k],L=k/y,z=(k+1)/y,j={x:r.x+(g.x-r.x)*L,y:r.y+(g.y-r.y)*L},ae={x:r.x+(g.x-r.x)*z,y:r.y+(g.y-r.y)*z};V.start=j,V.end=ae,V.length=Math.sqrt((ae.x-j.x)**2+(ae.y-j.y)**2),(isNaN(V.length)||V.length<.001)&&(console.warn("Invalid bone length:",V.length),V.length=.001),V.uAxis=normalize({x:ae.x-j.x,y:ae.y-j.y}),V.vAxis=normalize({x:-(ae.y-j.y),y:ae.x-j.x}),V.currentMatrix=calculateBoneTransformationMatrix($,V)}}function updateCurveBoneMatrices(e,n){const r=n.start,g=n.bend,y=n.end;if(!r||!g||!y){console.warn("Invalid skeleton points:",r,g,y);return}const k=e.length;if(k===0){console.warn("No bones to update in updateCurveBoneMatrices");return}for(let $=0;$<k;$++){const V=$/k,L=($+1)/k,z=quadraticBezierPoint(r,g,y,V),j=quadraticBezierPoint(r,g,y,L),ae={...e[$]},oe=e[$];oe.start=z,oe.end=j,oe.length=Math.sqrt((j.x-z.x)**2+(j.y-z.y)**2),(isNaN(oe.length)||oe.length<.001)&&(console.warn("Invalid bone length:",oe.length),oe.length=.001),oe.uAxis=normalize({x:j.x-z.x,y:j.y-z.y}),oe.vAxis=normalize({x:-(j.y-z.y),y:j.x-z.x}),oe.currentMatrix=calculateBoneTransformationMatrix(ae,oe)}}function updateCompositeBoneMatrices(e,n,r){try{const g=callStrokeSkeletonToBones(r,n);if(g.length===0){console.warn(`No bones generated for skeleton type: ${r}`);return}if(g.length!==e.length){for(console.warn(`Bone count mismatch: expected ${e.length}, got ${g.length}`);e.length<g.length;)e.push(createDefaultBone(`extra_${e.length}`));for(;e.length>g.length;)e.pop()}for(let y=0;y<e.length&&y<g.length;y++){const k={...e[y]},$=g[y],V=e[y];V.start=$.start,V.end=$.end,V.length=$.length,V.uAxis=$.uAxis,V.vAxis=$.vAxis,V.children=$.children,V.parent=$.parent,(isNaN(V.length)||V.length<.001)&&(console.warn("Invalid bone length:",V.length),V.length=.001),V.currentMatrix=calculateBoneTransformationMatrix(k,V)}}catch(g){console.warn(`Failed to update composite bone matrices for type ${r}:`,g),updateLinearBoneMatrices(e,n)}}function createDefaultBone(e){return{id:e,start:{x:0,y:0},end:{x:1,y:0},length:1,bindLength:1,uAxis:{x:1,y:0},vAxis:{x:0,y:1},children:[],bindMatrix:createIdentityMatrix(),currentMatrix:createIdentityMatrix()}}function calculatePointTransformation(e,n,r){let g=0,y=0;return!r||typeof r.x!="number"||typeof r.y!="number"?(console.warn("Invalid original point:",r),{x:0,y:0}):!e.bones||e.bones.length===0?(console.warn("No bones bound to point:",e),r):(e.bones.forEach(({boneIndex:k,weight:$,localCoords:V},L)=>{const z=n[k];if(!z){console.warn("Bone not found at index:",k);return}if(typeof $!="number"||isNaN($)||$<0){console.warn("Invalid weight:",$);return}if(!z.currentMatrix){console.warn("Invalid bone currentMatrix:",z);return}const j=transformPointToWorld(r,z.currentMatrix);if(isNaN(j.x)||isNaN(j.y)){console.warn("Invalid transformed point:",j,"for bone:",z);return}const ae=$*j.x,oe=$*j.y;g+=ae,y+=oe}),isNaN(g)||isNaN(y)?(console.warn("Final transformation result is NaN, returning original point"),r):{x:g,y})}function transformPointToWorld(e,n){if(!n||n.length!==6)return console.warn("Invalid matrix:",n),e;const[r,g,y,k,$,V]=n;if(isNaN(r)||isNaN(g)||isNaN(y)||isNaN(k)||isNaN($)||isNaN(V))return console.warn("Matrix contains NaN values:",n),e;const L={x:r*e.x+g*e.y+$,y:y*e.x+k*e.y+V};return isNaN(L.x)||isNaN(L.y)?(console.warn("Transform result is NaN:",L,"for point:",e,"matrix:",n),e):L}function applySkeletonTransformation(e,n){const r=e.components.filter(V=>V.type==="pen");if(r.length===0){console.warn("No pen components found in applySkeletonTransformation");return}const g=r[0],{originalPoints:y}=e._glyph.skeleton.skeletonBindData,k=clone(y);if(e._glyph?.skeleton?.dynamicWeight){const V=e.getParam(""),L=e._glyph.skeleton.originWeight;if(V&&V!==L){const z=(V-L)/2,j=y;for(let ae=0;ae<j.length-1;ae+=3){const oe=[j[ae],j[ae+1],j[ae+2],j[ae+3]],re=Math.atan2(oe[1].y-oe[0].y,oe[1].x-oe[0].x),ue=Math.atan2(oe[3].y-oe[2].y,oe[3].x-oe[2].x),le={x:oe[0].x-Math.sin(re)*z,y:oe[0].y+Math.cos(re)*z},de={x:oe[1].x-Math.sin(re)*z,y:oe[1].y+Math.cos(re)*z},he={x:oe[2].x-Math.sin(ue)*z,y:oe[2].y+Math.cos(ue)*z},_e={x:oe[3].x-Math.sin(ue)*z,y:oe[3].y+Math.cos(ue)*z};k[ae].x=le.x,k[ae].y=le.y,k[ae+1].x=de.x,k[ae+1].y=de.y,k[ae+2].x=he.x,k[ae+2].y=he.y,k[ae+3].x=_e.x,k[ae+3].y=_e.y}}}let $=calculateTransformedPoints(e,n,k);if($.length===g.value.points.length){g.value.points.forEach((L,z)=>{const j=$[z];L.x=j.x,L.y=j.y});const V=getBound$5(g.value.points);g.x=V.x,g.y=V.y,g.w=V.w,g.h=V.h}else console.warn("Transformed points length mismatch:",$.length,g.value.points.length)}const instanceBasicGlyph_heng=e=>{const n=new CustomGlyph(e),r={horizontalSpan:n.getParam(""),verticalSpan:n.getParam(""),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$2(r,n)},bindSkeletonGlyph_heng=e=>{e._o||instanceBasicGlyph_heng(e),glyphSkeletonBind(e._o)},updateGlyphByParams$2=(e,n)=>{const{horizontalSpan:r,verticalSpan:g,skeletonRefPos:y,weight:k}=e,{ox:$,oy:V}=n._glyph.skeleton,L=250+$||0,z=500+V||0;let j,ae;const oe=new FP.Joint("start_ref",{x:L,y:z+g/2}),re=new FP.Joint("end_ref",{x:oe.x+r,y:oe.y-g});y===1?(j=new FP.Joint("start",{x:oe.x,y:oe.y+k/2}),ae=new FP.Joint("end",{x:re.x,y:re.y+k/2})):y===2?(j=new FP.Joint("start",{x:oe.x,y:oe.y-k/2}),ae=new FP.Joint("end",{x:re.x,y:re.y-k/2})):(j=new FP.Joint("start",{x:oe.x,y:oe.y}),ae=new FP.Joint("end",{x:re.x,y:re.y})),n.addJoint(j),n.addJoint(ae);const ue={start:j,end:ae};n.addRefLine(refline(j,ae)),n.getSkeleton=()=>ue},computeParamsByJoints$2=(e,n)=>{const{start:r,end:g}=e,y=n.getParamRange(""),k=n.getParamRange(""),$=range(g.x-r.x,y),V=range(r.y-g.y,k);return{horizontalSpan:$,verticalSpan:V,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{e.tempData[z]&&e.tempData[z].x&&e.tempData[z].y&&($[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L})});break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$2(g,e);updateGlyphByParams$2(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$2(g,e);updateGlyphByParams$2(y,e),e.setParam("",y.horizontalSpan),e.setParam("",y.verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_heng=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$2(g,e);updateGlyphByParams$2(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$2(g,e);updateGlyphByParams$2(y,e),updateSkeletonTransformation(e),e.setParam("",y.horizontalSpan),e.setParam("",y.verticalSpan),e.tempData=null}},instanceBasicGlyph_shu=e=>{const n=new CustomGlyph(e),r={horizontalSpan:n.getParam(""),verticalSpan:n.getParam(""),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$1(r,n)},bindSkeletonGlyph_shu=e=>{e._o||instanceBasicGlyph_shu(e),glyphSkeletonBind(e._o)},updateGlyphByParams$1=(e,n)=>{const{horizontalSpan:r,verticalSpan:g,skeletonRefPos:y,weight:k}=e,{ox:$,oy:V}=n._glyph.skeleton,L=500+$||0,z=250+V||0;let j,ae;const oe=new FP.Joint("start_ref",{x:L,y:z}),re=new FP.Joint("end_ref",{x:oe.x+r,y:oe.y+g});y===1?(j=new FP.Joint("start",{x:oe.x-k/2,y:oe.y}),ae=new FP.Joint("end",{x:re.x-k/2,y:re.y})):y===2?(j=new FP.Joint("start",{x:oe.x+k/2,y:oe.y}),ae=new FP.Joint("end",{x:re.x+k/2,y:re.y})):(j=new FP.Joint("start",{x:oe.x,y:oe.y}),ae=new FP.Joint("end",{x:re.x,y:re.y})),n.addJoint(oe),n.addJoint(re),n.addRefLine(refline(oe,re,"ref")),n.addJoint(j),n.addJoint(ae);const ue={start:j,end:ae};n.addRefLine(refline(j,ae)),n.getSkeleton=()=>ue},computeParamsByJoints$1=(e,n)=>{const{start:r,end:g}=e,y=n.getParamRange(""),k=n.getParamRange(""),$=range(g.x-r.x,y),V=range(g.y-r.y,k);return{horizontalSpan:$,verticalSpan:V,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_shu=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{e.tempData[z]&&e.tempData[z].x&&e.tempData[z].y&&($[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L})});break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$1(g,e);updateGlyphByParams$1(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$1(g,e);updateGlyphByParams$1(y,e),e.setParam("",y.horizontalSpan),e.setParam("",y.verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_shu=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$1(g,e);updateGlyphByParams$1(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$1(g,e);updateGlyphByParams$1(y,e),updateSkeletonTransformation(e),e.setParam("",y.horizontalSpan),e.setParam("",y.verticalSpan),e.tempData=null}},instanceBasicGlyph_pie=e=>{const n=new CustomGlyph(e),r={horizonalSpan:n.getParam(""),verticalSpan:n.getParam(""),bendCursor:n.getParam(""),bendDegree:Number(n.getParam(""))+30*Number(n.getParam("")||1),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams(r,n)},bindSkeletonGlyph_pie=e=>{e._o||instanceBasicGlyph_pie(e),glyphSkeletonBind(e._o)},distance$4=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x-r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$+g*Math.sin(L),y:V+g*Math.cos(L)}},updateGlyphByParams=(e,n)=>{const{horizonalSpan:r,verticalSpan:g,bendCursor:y,bendDegree:k}=e,{ox:$,oy:V}=n._glyph.skeleton,L=750+$||0,z=250+V||0,j=new FP.Joint("start",{x:L,y:z}),ae=new FP.Joint("end",{x:j.x-r,y:j.y+g});distance$4(j,ae);const oe=j.x-y*r,re=j.y+y*g,ue=Math.atan2(g,r),le=new FP.Joint("bend",{x:oe+k*Math.sin(ue),y:re+k*Math.cos(ue)});n.addJoint(j),n.addJoint(ae),n.addJoint(le);const de={start:j,end:ae,bend:le};n.addRefLine(refline(j,le)),n.addRefLine(refline(le,ae)),n.getSkeleton=()=>de},computeParamsByJoints=(e,n)=>{const{start:r,end:g,bend:y}=e,k=n.getParamRange(""),$=n.getParamRange(""),V=n.getParamRange(""),L=n.getParamRange(""),z=range(r.x-g.x,k),j=range(g.y-r.y,$),ae=FP.distanceAndFootPoint(r,g,y),oe=range(ae.percentageFromA,V),re=range(ae.distance,L);return{horizonalSpan:z,verticalSpan:j,bendCursor:oe,bendDegree:re,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_pie=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"bend":{$.bend={x:e.tempData.bend.x+y,y:e.tempData.bend.y+k};break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};const V=getBend($.start,$.end,e.tempData.bendCursor,e.tempData.bendDegree);$.bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints(g,e);updateGlyphByParams(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints(g,e);updateGlyphByParams(y,e),e.setParam("",y.horizonalSpan),e.setParam("",y.verticalSpan),e.setParam("",y.bendCursor),e.setParam("",y.bendDegree-30*Number(e.getParam("")||1)),e.tempData=null}},updateSkeletonListener_after_bind_pie=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"bend":{$.bend={x:e.tempData.bend.x+y,y:e.tempData.bend.y+k};break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};const V=getBend($.start,$.end,e.tempData.bendCursor,e.tempData.bendDegree);$.bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints(g,e);updateGlyphByParams(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints(g,e);updateGlyphByParams(y,e),updateSkeletonTransformation(e),e.setParam("",y.horizonalSpan),e.setParam("",y.verticalSpan),e.setParam("",y.bendCursor),e.setParam("",y.bendDegree-30*Number(e.getParam("")||1)),e.tempData=null}},updateSkeletonTransformation=e=>{const n=e.getSkeleton();applySkeletonTransformation(e,n)},strokeFnMap={:{instanceBasicGlyph:instanceBasicGlyph_heng,bindSkeletonGlyph:bindSkeletonGlyph_heng,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_shu,bindSkeletonGlyph:bindSkeletonGlyph_shu,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_shu,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_shu,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_pie,bindSkeletonGlyph:bindSkeletonGlyph_pie,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_pie,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_pie,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_na,bindSkeletonGlyph:bindSkeletonGlyph_na,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_na,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_na,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_dian,bindSkeletonGlyph:bindSkeletonGlyph_dian,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_dian,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_dian,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_tiao,bindSkeletonGlyph:bindSkeletonGlyph_tiao,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_tiao,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_tiao,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_gou,bindSkeletonGlyph:bindSkeletonGlyph_heng_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_wan_gou,bindSkeletonGlyph:bindSkeletonGlyph_wan_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_wan_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_wan_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_shu_gou,bindSkeletonGlyph:bindSkeletonGlyph_shu_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_shu_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_shu_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_shu_zhe_zhe_gou,bindSkeletonGlyph:bindSkeletonGlyph_shu_zhe_zhe_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_shu_zhe_zhe_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_shu_zhe_zhe_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_pie,bindSkeletonGlyph:bindSkeletonGlyph_heng_pie,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_pie,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_pie,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_zhe,bindSkeletonGlyph:bindSkeletonGlyph_heng_zhe,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_zhe,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_zhe,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_shu_pie,bindSkeletonGlyph:bindSkeletonGlyph_shu_pie,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_shu_pie,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_shu_pie,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_zhe_zhe_pie,bindSkeletonGlyph:bindSkeletonGlyph_heng_zhe_zhe_pie,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_zhe_zhe_pie,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_zhe_zhe_pie,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_zhe_gou,bindSkeletonGlyph:bindSkeletonGlyph_heng_zhe_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_zhe_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_zhe_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_zhe_wan_gou,bindSkeletonGlyph:bindSkeletonGlyph_heng_zhe_wan_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_zhe_wan_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_zhe_wan_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_wan_gou,bindSkeletonGlyph:bindSkeletonGlyph_heng_wan_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_wan_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_wan_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_zhe_zhe_wan_gou,bindSkeletonGlyph:bindSkeletonGlyph_heng_zhe_zhe_wan_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_zhe_zhe_wan_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_zhe_zhe_wan_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_er_heng_zhe,bindSkeletonGlyph:bindSkeletonGlyph_er_heng_zhe,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_er_heng_zhe,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_er_heng_zhe,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_zhe_wan,bindSkeletonGlyph:bindSkeletonGlyph_heng_zhe_wan,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_zhe_wan,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_zhe_wan,updateSkeletonTransformation},2:{instanceBasicGlyph:instanceBasicGlyph_heng_zhe2,bindSkeletonGlyph:bindSkeletonGlyph_heng_zhe2,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_zhe2,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_zhe2,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_zhe_tiao,bindSkeletonGlyph:bindSkeletonGlyph_heng_zhe_tiao,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_zhe_tiao,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_zhe_tiao,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_shu_tiao,bindSkeletonGlyph:bindSkeletonGlyph_shu_tiao,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_shu_tiao,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_shu_tiao,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_shu_wan,bindSkeletonGlyph:bindSkeletonGlyph_shu_wan,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_shu_wan,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_shu_wan,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_shu_wan_gou,bindSkeletonGlyph:bindSkeletonGlyph_shu_wan_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_shu_wan_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_shu_wan_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_shu_zhe,bindSkeletonGlyph:bindSkeletonGlyph_shu_zhe,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_shu_zhe,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_shu_zhe,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_xie_gou,bindSkeletonGlyph:bindSkeletonGlyph_xie_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_xie_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_xie_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_pie_wan_gou,bindSkeletonGlyph:bindSkeletonGlyph_heng_pie_wan_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_pie_wan_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_pie_wan_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_pie_tiao,bindSkeletonGlyph:bindSkeletonGlyph_pie_tiao,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_pie_tiao,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_pie_tiao,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_pie_dian,bindSkeletonGlyph:bindSkeletonGlyph_pie_dian,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_pie_dian,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_pie_dian,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_tiao_na,bindSkeletonGlyph:bindSkeletonGlyph_tiao_na,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_tiao_na,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_tiao_na,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_ping_na,bindSkeletonGlyph:bindSkeletonGlyph_ping_na,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_ping_na,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_ping_na,updateSkeletonTransformation}},skeletonOptions=[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"2",value:"2"},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}],getParentInfo=e=>({uuid:e.uuid,type:e.type});var ParameterType=(e=>(e[e.Number=0]="Number",e[e.Constant=1]="Constant",e[e.RingController=2]="RingController",e[e.Enum=3]="Enum",e[e.PlaygroundConstant=4]="PlaygroundConstant",e[e.AdvancedEditConstant=5]="AdvancedEditConstant",e))(ParameterType||{});ref(0);const selectedParam=ref(null),selectedParamType=ref(""),constants=ref([]),constantsMap=new ConstantsMap(constants.value),glyphs=ref([]),radical_glyphs=ref([]),stroke_glyphs=ref([]),comp_glyphs=ref([]);var ConstantType=(e=>(e[e.Component=0]="Component",e[e.Parameter=1]="Parameter",e))(ConstantType||{}),GlyphType=(e=>(e[e.Char=0]="Char",e[e.StrokeGlyph=1]="StrokeGlyph",e[e.RadicalGlyph=2]="RadicalGlyph",e[e.CompGlyph=3]="CompGlyph",e[e.Glyph=4]="Glyph",e))(GlyphType||{});const convertGlyphType=e=>e===Status.GlyphList?4:e===Status.StrokeGlyphList?1:e===Status.RadicalGlyphList?2:e===Status.CompGlyphList?3:e===Status.CharacterList?0:null,constantGlyphMap=new Map,editGlyphUUID=ref(""),initGlyphEnvironment=async()=>{window.FP=FP},getGlyphByUUID=e=>{let n=null;for(let r=0;r<glyphs.value.length;r++)if(glyphs.value[r].uuid===e)return n=glyphs.value[r],n;for(let r=0;r<radical_glyphs.value.length;r++)if(radical_glyphs.value[r].uuid===e)return n=radical_glyphs.value[r],n;for(let r=0;r<stroke_glyphs.value.length;r++)if(stroke_glyphs.value[r].uuid===e)return n=stroke_glyphs.value[r],n;for(let r=0;r<comp_glyphs.value.length;r++)if(comp_glyphs.value[r].uuid===e)return n=comp_glyphs.value[r],n;return n},getGlyphByName=e=>{let n=null;for(let r=0;r<glyphs.value.length;r++)if(glyphs.value[r].name===e)return n=glyphs.value[r],n;for(let r=0;r<radical_glyphs.value.length;r++)if(radical_glyphs.value[r].name===e)return n=radical_glyphs.value[r],n;for(let r=0;r<stroke_glyphs.value.length;r++)if(stroke_glyphs.value[r].name===e)return n=stroke_glyphs.value[r],n;for(let r=0;r<comp_glyphs.value.length;r++)if(comp_glyphs.value[r].name===e)return n=comp_glyphs.value[r],n;return n},getGlyphType=e=>{for(let n=0;n<glyphs.value.length;n++)if(glyphs.value[n].uuid===e)return Status.GlyphList;for(let n=0;n<radical_glyphs.value.length;n++)if(radical_glyphs.value[n].uuid===e)return Status.RadicalGlyphList;for(let n=0;n<stroke_glyphs.value.length;n++)if(stroke_glyphs.value[n].uuid===e)return Status.StrokeGlyphList;for(let n=0;n<comp_glyphs.value.length;n++)if(comp_glyphs.value[n].uuid===e)return Status.CompGlyphList;return Status.Glyph},editGlyph=ref(null),setEditGlyphByUUID=e=>{let n=getGlyphByUUID(editGlyphUUID.value);editGlyph.value=clone(n)},updateGlyphListFromEditFile=()=>{const e=getGlyphType(editGlyph.value.uuid);let n=null;if(e===Status.GlyphList?n=glyphs.value:e===Status.RadicalGlyphList?n=radical_glyphs.value:e===Status.StrokeGlyphList?n=stroke_glyphs.value:e===Status.CompGlyphList&&(n=comp_glyphs.value),!!n){for(let r=0;r<n.length;r++)if(editGlyph.value.uuid===n[r].uuid){n[r]=clone(editGlyph.value),componentsToContours(orderedListWithItemsForGlyph(n[r]),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.unitsPerEm},{x:0,y:0},!1,!1,!0);break}}},selectedComponent$1=computed(()=>!selectedComponents$1.value||selectedComponents$1.value.length===0?null:selectedComponents$1.value.length===1?selectedComponents$1.value[0]:"multi"),selectedComponentUUID$1=computed(()=>!selectedComponents$1.value||selectedComponents$1.value.length===0?"":selectedComponents$1.value.length===1?selectedComponents$1.value[0].uuid:"multi"),usedComponents$1=computed(()=>componentsForCurrentGlyph.value.filter(n=>n.usedInCharacter===!0)),selectedComponents$1=computed(()=>editGlyphUUID.value?editGlyph.value?.selectedComponentsUUIDs.map(n=>traverseComponents$1(editGlyph.value.components,n)):null),traverseComponents$1=(e,n)=>{for(let r=0;r<e.length;r++){const g=e[r];if(g.uuid===n)return g;if(g.value.components&&g.value.components.length){const y=traverseComponents$1(g.value.components,n);if(y)return y}}return null},SubComponents$1=computed(()=>{if(!editGlyphUUID.value||!editGlyph.value?.selectedComponentsTree||!editGlyph.value?.selectedComponentsTree.length)return null;let e=null;for(let r=0;r<editGlyph.value?.selectedComponentsTree.length-1;r++){const g=editGlyph.value?.selectedComponentsTree[r];e?e=selectedItemByUUID(e.value.components,g):e=selectedItemByUUID(editGlyph.value.components,g)}return e.value.components.map(r=>selectedItemByUUID(e.value.components,r.uuid))}),SubComponentsRoot$1=computed(()=>{if(!editGlyphUUID.value||!editGlyph.value?.selectedComponentsTree||!editGlyph.value?.selectedComponentsTree.length)return null;let e=null;for(let n=0;n<editGlyph.value?.selectedComponentsTree.length-1;n++){const r=editGlyph.value?.selectedComponentsTree[n];e?e=selectedItemByUUID(e.value.components,r):e=selectedItemByUUID(editGlyph.value.components,r)}return e}),selectedSubComponent$1=computed(()=>{let e=null;if(!editGlyphUUID.value)e=null;else if(!editGlyph.value?.selectedComponentsTree||!editGlyph.value?.selectedComponentsTree.length)e=null;else{let n=null;for(let g=0;g<editGlyph.value?.selectedComponentsTree.length-1;g++){const y=editGlyph.value?.selectedComponentsTree[g];n?n=selectedItemByUUID(n.value.components,y):n=selectedItemByUUID(editGlyph.value.components,y)}const r=editGlyph.value?.selectedComponentsTree[editGlyph.value?.selectedComponentsTree.length-1];r!=="null"&&(e=selectedItemByUUID(n.value.components,r))}return e}),componentsForCurrentGlyph=computed(()=>editGlyphUUID.value?editGlyph.value.components:[]),orderedListWithItemsForCurrentGlyph=computed(()=>editGlyphUUID.value?editGlyph.value.orderedList.map(e=>e.type==="group"?selectedItemByUUID(editGlyph.value.groups,e.uuid):selectedItemByUUID(editGlyph.value.components,e.uuid)):[]),orderedListWithItemsForGlyph=e=>e.orderedList.map(n=>n.type==="group"?selectedItemByUUID(e.groups,n.uuid):selectedItemByUUID(e.components,n.uuid)),orderedListForCurrentGlyph=computed(()=>editGlyphUUID.value?editGlyph.value.orderedList:[]),selectedComponentsUUIDs$1=computed(()=>editGlyphUUID.value?editGlyph.value.selectedComponentsUUIDs:""),getConstant=e=>{let n=null;return constants.value.forEach(r=>{r.uuid===e&&(n=r)}),n},removeOrderedItemForCurrentGlyph=e=>{const n=(()=>{for(let r=0;r<editGlyph.value.orderedList.length;r++)if(editGlyph.value.orderedList[r].uuid===e)return r;return-1})();n>=0&&editGlyph.value.orderedList.splice(n,1)},removeComponentForCurrentGlyph=e=>{const n=(()=>{for(let r=0;r<editGlyph.value.components.length;r++)if(editGlyph.value.components[r].uuid===e)return r;return-1})();removeOrderedItemForCurrentGlyph(e),editGlyph.value.glyph_script&&editGlyph.value.glyph_script[e]&&delete editGlyph.value.glyph_script[e],editGlyph.value.components.splice(n,1)},insertComponentForCurrentGlyph=(e,n)=>{editGlyph.value.components.push(e),insertOrderedItemForCurrentGlyph({type:"component",uuid:e.uuid},n)},setSelectionForCurrentGlyph=e=>{if(e)if(enableMultiSelect.value){const n=editGlyph.value.selectedComponentsUUIDs.indexOf(e);n===-1?editGlyph.value.selectedComponentsUUIDs.push(e):editGlyph.value.selectedComponentsUUIDs.splice(n,1)}else selectedComponent$1.value?.type==="glyph"&&setGlyphDraggerTool("glyphDragger"),editGlyph.value.selectedComponentsUUIDs=[e];else editGlyph.value.selectedComponentsUUIDs=[]},modifySubComponent$1=e=>{if(!(!editGlyph.value?.selectedComponentsTree||!editGlyph.value?.selectedComponentsTree.length)){let n=null,r=null;const g=clone(editGlyph.value?.components);for(let $=0;$<editGlyph.value?.selectedComponentsTree.length-1;$++){const V=editGlyph.value?.selectedComponentsTree[$];n?n=selectedItemByUUID(n.value.components,V):n=selectedItemByUUID(g,V)}const y=editGlyph.value?.selectedComponentsTree[editGlyph.value?.selectedComponentsTree.length-1];y!=="null"&&(r=selectedItemByUUID(n.value.components,y));const k=Object.keys(e);for(let $=0;$<k.length;$++){const V=k[$];r[V]=e[V]}editGlyph.value.components=g}},modifyGlyph=(e,n)=>{const r=getGlyphByUUID(e);Object.keys(n).map(g=>{g==="view"?Object.keys(n.view).map(y=>{r.view[y]=n.view[y]}):r[g]=n[g]}),emitter.emit("renderGlyphPreviewCanvasByUUID",e)},modifyComponentForCurrentGlyph=(e,n)=>{const r=clone(editGlyph.value.components);r.forEach(g=>{g.uuid===e&&Object.keys(n).map(y=>{switch(y){case"type":g.type=n.type;break;case"name":g.name=n.name;break;case"lock":g.lock=n.lock;break;case"visible":g.visible=n.visible;break;case"x":g.x=n.x;break;case"y":g.y=n.y;break;case"w":g.w=n.w;break;case"h":g.h=n.h;break;case"rotation":g.rotation=n.rotation;break;case"flipX":g.flipX=n.flipX;break;case"flipY":g.flipY=n.flipY;break;case"usedInCharacter":g.usedInCharacter=n.usedInCharacter;break;case"ox":g.ox=n.ox;break;case"oy":g.oy=n.oy;break;case"opacity":g.opacity=n.opacity;break;case"value":Object.keys(n.value).map(k=>{if(g.value[k]=n.value[k],k==="points"){const{x:$,y:V,w:L,h:z}=getBound$5(n.value[k].reduce((j,ae)=>(j.push({x:ae.x,y:ae.y}),j),[]));g.x=$,g.y=V,g.w=L,g.h=z}});break}}),editGlyph.value.components=r}),emitter.emit("renderGlyphPreviewCanvasByUUID",e)},addOrderedItemForGlyph=(e,n)=>{getGlyphByUUID(e).orderedList.push(n)},addOrderedItemForCurrentGlyph=e=>{editGlyph.value.orderedList.push(e)},insertOrderedItemForCurrentGlyph=(e,n)=>{const r=(()=>{for(let g=0;g<editGlyph.value.orderedList.length;g++)if(editGlyph.value.orderedList[g].uuid===n.uuid)return g})();n.pos==="prev"&&editGlyph.value.orderedList.splice(r,0,e),n.pos==="next"&&editGlyph.value.orderedList.splice(r+1,0,e)},setOrderedListForCurrentGlyph=e=>{editGlyph.value.orderedList=e},setEditGlyphUUID=e=>{editGlyphUUID.value=e},addGlyph=(e,n)=>{n===Status.GlyphList?glyphs.value.push(e):n===Status.StrokeGlyphList?stroke_glyphs.value.push(e):n===Status.RadicalGlyphList?radical_glyphs.value.push(e):n===Status.CompGlyphList&&comp_glyphs.value.push(e)},removeGlyph=(e,n)=>{if(n===Status.GlyphList){for(let r=0;r<glyphs.value.length;r++)if(glyphs.value[r].uuid===e){glyphs.value.splice(r,1);return}}else if(n===Status.StrokeGlyphList){for(let r=0;r<stroke_glyphs.value.length;r++)if(stroke_glyphs.value[r].uuid===e){stroke_glyphs.value.splice(r,1);return}}else if(n===Status.RadicalGlyphList){for(let r=0;r<radical_glyphs.value.length;r++)if(radical_glyphs.value[r].uuid===e){radical_glyphs.value.splice(r,1);return}}else if(n===Status.CompGlyphList){for(let r=0;r<comp_glyphs.value.length;r++)if(comp_glyphs.value[r].uuid===e){comp_glyphs.value.splice(r,1);return}}},addComponentsForGlyph=(e,n)=>{getGlyphByUUID(e),n.forEach(r=>{addComponentForGlyph(e,r)})},addComponentsForCurrentGlyph=e=>{e.forEach(n=>{addComponentForCurrentGlyph(n)})},addComponentForGlyph=(e,n)=>{getGlyphByUUID(e).components.push(n),addOrderedItemForGlyph(e,{type:"component",uuid:n.uuid})},addComponentForCurrentGlyph=e=>{editGlyph.value.components.push(e),addOrderedItemForCurrentGlyph({type:"component",uuid:e.uuid}),setSelectionForCurrentGlyph(e.uuid)},scripts_map=ref({}),tempScript=e=>{if(e.type!=="text"&&e.type!=="icon"&&e.script_reference){const n=getGlyphByUUID(e.script_reference);n&&n.script&&(scripts_map.value[e.script_reference]=n.script)}for(let n=0;n<e.components.length;n++){const r=e.components[n];r.type==="glyph"&&tempScript(r.value)}},getScript=e=>{if(e.script)return e.script;if(e.script_reference){if(scripts_map[e.script_reference])return scripts_map[e.script_reference];{const n=getGlyphByUUID(e.script_reference);if(n.script)return n.script}}return null},executeScript=e=>{try{if(e._o&&e._o.tempData)return;if(e.skeleton){const g=strokeFnMap[e.skeleton.type];if(g){g.instanceBasicGlyph(e),e.skeleton.onSkeletonBind?g.updateSkeletonListenerBeforeBind(e._o):g.updateSkeletonListenerAfterBind(e._o),updateSkeletonTransformation(e._o);return}}const n=new CustomGlyph(e),r=n._glyph;for(let g=0;g<e.components.length;g++)e.components[g].type==="glyph"&&executeScript(e.components[g].value);window.glyph=n,constantsMap.update(constants.value),window.constantsMap=constantsMap;try{const g=getScript(e);g&&new Function(`${g}
script_${e.uuid.replaceAll("-","_")} (glyph, constantsMap, FP)`)()}catch(g){console.error(g)}if(e&&e.glyph_script){const g=Object.keys(e.glyph_script);for(let y=0;y<g.length;y++){const k=e.glyph_script[g[y]];new Function(`${k}`)()}}if(e&&e.param_script){const g=Object.keys(e.param_script);for(let y=0;y<g.length;y++){const k=e.param_script[g[y]];new Function(`${k}`)()}}e?.components?.map(g=>{if(window.comp_glyph=new CustomGlyph(g.value),g.value&&g.value.system_script){const y=Object.keys(g.value.system_script);for(let k=0;k<y.length;k++){const $=g.value.system_script[y[k]];window.glyph=n,new Function(`${$}`)()}}window.comp_glyph=null}),window.glyph=null,window.constantsMap=null}catch(n){console.warn(n)}},getRatioOptions=e=>{const n=[{key:0,value:"DEFAULT",label:"DEFAULT",uuid:"",type:""}];return e.layout?e.layout.type==="rect"&&(n.push({key:1,value:"width",label:"width",uuid:e.uuid,type:e.type}),n.push({key:2,value:"height",label:"height",uuid:e.uuid,type:e.type})):e.parent&&e.parent.type==="system"&&e.parent.layout?e.parent.layout.type==="rect"&&(n.push({key:1,value:"width",label:"width",uuid:e.parent.uuid,type:e.parent.type}),n.push({key:2,value:"height",label:"height",uuid:e.parent.uuid,type:e.parent.type})):e.parent&&(e.parent.type==="text"||e.parent.type==="icon")&&e.parent.info&&e.parent.info.layoutTree&&findLeafNodes$1(e.parent.info?.layoutTree).map((g,y)=>{n.push({key:`${y}-1`,value:`${g.id}-w`,label:`${g.id}-w`,uuid:e.parent.uuid,type:e.parent.type}),n.push({key:`${y}-2`,value:`${g.id}-h`,label:`${g.id}-h`,uuid:e.parent.uuid,type:e.parent.type})}),n},getRatioLayout=(e,n)=>{let r=null;if(!e.parent&&e.layout)r=e.layout.params[n];else if(e.parent&&e.parent.type==="system"&&e.parent.layout)r=e.parent.layout.params[n];else if(e.parent&&(e.parent.type==="text"||e.parent.type==="icon")&&e.parent.info&&e.parent.info.layoutTree){const g=n.split("-"),y=g.splice(g.length-1,1)[0],k=g.join("-");findLeafNodes$1(e.parent.info?.layoutTree).map(V=>{V.id===k&&(r=V.rect[y])})}return r},getRatioLayout2=(e,n)=>{let r=null;return e.layout&&(r=e.layout.params[n]),r},findLeafNodes$1=e=>{const n=[],r=g=>{!g.children||g.children.length===0?n.push(g):g.children.forEach(y=>r(y))};return e.forEach(g=>r(g)),n},deleteCharacter$1=(e,n)=>{e.stopPropagation(),removeGlyph(n,getGlyphType(n)),deleteGlyphTemplate(n,editStatus.value)},editGlyphFile=async e=>{loading$1.value=!0,total$1.value=0,await nextTick(),setTimeout(()=>{setEditGlyphUUID(e),setEditGlyphByUUID(editGlyphUUID.value),setPrevStatus(editStatus.value),setEditStatus(Status.Glyph),loading$1.value=!1},500)},renameCharacter$1=(e,n)=>{e.stopPropagation(),editedGlyphUUID.value=n,setEditGlyphDialogVisible(!0)},copyCharacter$1=(e,n)=>{e.stopPropagation(),copiedGlyphUUID.value=n,setCopyGlyphDialogVisible(!0)},generateGlyphTemplate=e=>{const n=document.getElementById("glyph-template").querySelector(".glyph").cloneNode(!0);return n.className=`glyph glyph-${e.uuid}`,n.querySelector(".preview-canvas").id=`preview-canvas-${e.uuid}`,n.querySelector(".name").innerHTML=`${e.name}`,n.querySelector(".edit-icon").addEventListener("click",r=>renameCharacter$1(r,e.uuid)),n.querySelector(".copy-icon").addEventListener("click",r=>copyCharacter$1(r,e.uuid)),n.querySelector(".delete-icon").addEventListener("click",r=>deleteCharacter$1(r,e.uuid)),n.addEventListener("click",()=>editGlyphFile(e.uuid)),n},selected_glyphs=ref([]),multi_glyph_selection=ref(!1),addSelectedGlyph=e=>{if(onStrokeReplacement.value)setReplacementStroke(e.uuid),onStrokeReplacement.value=!1,glyphComponentsDialogVisible2.value=!1;else{const n=clone(e);n.parent_reference=getParentInfo(editStatus.value===Status.Edit?editCharacterFile.value:editGlyph.value),n.script=null,n.script_reference=n.uuid;const r={uuid:genUUID(),type:"glyph",name:e.name+Date.now().toString().slice(9),lock:!1,visible:!0,value:n,ox:selectedFile.value.width/2-1e3/2,oy:selectedFile.value.height/2-1e3/2,usedInCharacter:!0};executeScript(r.value),editStatus.value===Status.Edit?addComponentForCurrentCharacterFile(r):editStatus.value===Status.Glyph&&addComponentForCurrentGlyph(r),tool.value!=="glyphDragger"&&setGlyphDraggerTool("glyphDragger"),glyphComponentsDialogVisible2.value=!1}},selectGlyph=e=>{if(!glyphComponentsDialogVisible2.value)return;const n=getGlyphByUUID(e);multi_glyph_selection.value?selected_glyphs.value.push(n):addSelectedGlyph(n)},generateGlyphSelectionTemplate=e=>{const n=document.getElementById("glyph-template").querySelector(".glyph").cloneNode(!0);return n.className=`glyph glyph-${e.uuid}`,n.querySelector(".preview-canvas").id=`preview-canvas-${e.uuid}`,n.querySelector(".name").innerHTML=`${e.name}`,n.addEventListener("click",()=>selectGlyph(e.uuid)),n},deleteGlyphTemplate=(e,n)=>{let r=document.getElementById("glyph-render-list"),g=document.getElementById("glyph-components-wrapper");n===Status.StrokeGlyphList?(r=document.getElementById("stroke-glyph-render-list"),g=document.getElementById("stroke-glyph-components-wrapper")):n===Status.RadicalGlyphList?(r=document.getElementById("radical-glyph-render-list"),g=document.getElementById("radical-glyph-components-wrapper")):n===Status.CompGlyphList&&(r=document.getElementById("comp-glyph-render-list"),g=document.getElementById("comp-glyph-components-wrapper"));const y=r.querySelector(`.glyph-${e}`);r.removeChild(y);const k=g.querySelector(`.glyph-${e}`);g.removeChild(k)},addGlyphTemplate=(e,n)=>{const r=generateGlyphTemplate(e),g=generateGlyphSelectionTemplate(e);let y=document.getElementById("glyph-components-wrapper"),k=document.getElementById("glyph-render-list");n===Status.StrokeGlyphList?(k=document.getElementById("stroke-glyph-render-list"),y=document.getElementById("stroke-glyph-components-wrapper")):n===Status.RadicalGlyphList?(k=document.getElementById("radical-glyph-render-list"),y=document.getElementById("radical-glyph-components-wrapper")):n===Status.CompGlyphList&&(k=document.getElementById("comp-glyph-render-list"),y=document.getElementById("comp-glyph-components-wrapper"));const $=k.querySelector(".default-glyph");$&&k.insertBefore(r,$),y.appendChild(g)},clearGlyphRenderList=e=>{let n=document.getElementById("glyph-render-list");if(e===Status.StrokeGlyphList?n=document.getElementById("stroke-glyph-render-list"):e===Status.RadicalGlyphList?n=document.getElementById("radical-glyph-render-list"):e===Status.CompGlyphList&&(n=document.getElementById("comp-glyph-render-list")),!n)return;const r=document.getElementById("default-glyph-template").querySelector(".default-glyph").cloneNode(!0);r.addEventListener("click",()=>setAddGlyphDialogVisible(!0)),n.innerHTML="",n.appendChild(r)},clearSelectionGlyphRenderList=e=>{let n=document.getElementById("glyph-components-wrapper");if(e===Status.StrokeGlyphList?n=document.getElementById("stroke-glyph-components-wrapper"):e===Status.RadicalGlyphList?n=document.getElementById("radical-glyph-components-wrapper"):e===Status.CompGlyphList&&(n=document.getElementById("comp-glyph-components-wrapper")),!e){clearSelectionGlyphRenderList(Status.GlyphList),clearSelectionGlyphRenderList(Status.StrokeGlyphList),clearSelectionGlyphRenderList(Status.RadicalGlyphList),clearSelectionGlyphRenderList(Status.CompGlyphList);return}n.innerHTML=""},selectedItemByUUID=(e,n)=>{let r=null;for(let g=0;g<e.length;g++)e[g].uuid===n&&(r=e[g]);return r},files=reactive({value:[]}),selectedFileUUID=ref(""),clipBoard=reactive({value:[]}),editCharacterFileUUID=ref(""),enableMultiSelect=ref(!1),selectedComponent=computed(()=>!selectedComponents.value||selectedComponents.value.length===0?null:selectedComponents.value.length===1?selectedComponents.value[0]:"multi"),selectedComponentUUID=computed(()=>!selectedComponents.value||selectedComponents.value.length===0?"":selectedComponents.value.length===1?selectedComponents.value[0].uuid:"multi"),usedComponents=computed(()=>orderedListWithItemsForCurrentCharacterFile.value.filter(n=>!!n.usedInCharacter)),editCharacterFile=ref(null),setEditCharacterFileByUUID=e=>{let n=null;const r=selectedFile.value.characterList;for(let g=0;g<r.length;g++)if(editCharacterFileUUID.value===r[g].uuid){n=r[g];break}editCharacterFile.value=clone(n)},updateCharacterListFromEditFile=()=>{const e=selectedFile.value.characterList;for(let n=0;n<e.length;n++)if(editCharacterFileUUID.value===e[n].uuid){e[n]=clone(editCharacterFile.value),componentsToContours(orderedListWithItemsForCharacterFile(e[n]),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.unitsPerEm},{x:0,y:0},!1,!1,!0);break}},selectedFile=computed(()=>selectedFileUUID.value?selectedItemByUUID(files.value,selectedFileUUID.value):null),characterList=computed(()=>selectedFileUUID.value?selectedItemByUUID(files.value,selectedFileUUID.value).characterList:null),selectedComponents=computed(()=>{if(!selectedFileUUID.value)return null;const e=editCharacterFile.value;return e?.selectedComponentsUUIDs.map(r=>traverseComponents(e.components,r))}),traverseComponents=(e,n)=>{for(let r=0;r<e.length;r++){const g=e[r];if(g.uuid===n)return g;if(g.value.components&&g.value.components.length){const y=traverseComponents(g.value.components,n);if(y)return y}}return null},SubComponents=computed(()=>{if(!selectedFileUUID.value)return null;const e=editCharacterFile.value;if(!e?.selectedComponentsTree||!e?.selectedComponentsTree.length)return null;let n=null;for(let g=0;g<e?.selectedComponentsTree.length-1;g++){const y=e?.selectedComponentsTree[g];n?n=selectedItemByUUID(n.value.components,y):n=selectedItemByUUID(e.components,y)}return n.value.components.map(g=>selectedItemByUUID(n.value.components,g.uuid))}),SubComponentsRoot=computed(()=>{if(!selectedFileUUID.value)return null;const e=editCharacterFile.value;if(!e?.selectedComponentsTree||!e?.selectedComponentsTree.length)return null;let n=null;for(let r=0;r<e?.selectedComponentsTree.length-1;r++){const g=e?.selectedComponentsTree[r];n?n=selectedItemByUUID(n.value.components,g):n=selectedItemByUUID(e.components,g)}return n}),selectedSubComponent=computed(()=>{let e=null;if(!selectedFileUUID.value)e=null;else{const n=editCharacterFile.value;if(!n?.selectedComponentsTree||!n?.selectedComponentsTree.length)e=null;else{let r=null;for(let y=0;y<n?.selectedComponentsTree.length-1;y++){const k=n?.selectedComponentsTree[y];r?r=selectedItemByUUID(r.value.components,k):r=selectedItemByUUID(n.components,k)}const g=n?.selectedComponentsTree[n?.selectedComponentsTree.length-1];g!=="null"&&(e=selectedItemByUUID(r.value.components,g))}}return e}),componentsForCurrentCharacterFile=computed(()=>selectedFileUUID.value?editCharacterFile.value.components:[]),orderedListWithItemsForCurrentCharacterFile=computed(()=>{if(!selectedFileUUID.value||!editCharacterFileUUID.value)return[];const e=editCharacterFile.value;return e.orderedList.map(n=>n.type==="group"?selectedItemByUUID(e.groups,n.uuid):selectedItemByUUID(e.components,n.uuid))}),orderedListWithItemsForCharacterFile=e=>e.orderedList.map(n=>n.type==="group"?selectedItemByUUID(e.groups,n.uuid):selectedItemByUUID(e.components,n.uuid)),orderedListForCurrentCharacterFile=computed(()=>selectedFileUUID.value?editCharacterFile.value.orderedList:[]),selectedComponentsUUIDs=computed(()=>selectedFileUUID.value?editCharacterFile.value.selectedComponentsUUIDs:""),setSelectedFileUUID=e=>{selectedFileUUID.value=e,e&&(gridSettings$1.value.centerSquareSize=selectedFile.value.width/3,gridSettings$1.value.size=selectedFile.value.width)},addFile=e=>{files.value.push(e)},removeFile=e=>{selectedFileUUID.value===e&&setSelectedFileUUID(""),editCharacterFileUUID.value="";const n=(()=>{for(let r=0;r<files.value.length;r++)if(files.value[r].uuid===e)return r;return-1})();n>=0&&files.value.splice(n,1)},updateFontSettings=e=>{const n=selectedFile.value,{name:r,unitsPerEm:g,ascender:y,descender:k}=e;if(r&&(n.name=r),g!==selectedFile.value.fontSettings.unitsPerEm||y!==selectedFile.value.fontSettings.ascender||k!==selectedFile.value.fontSettings.descender){n.fontSettings={unitsPerEm:g,ascender:y,descender:k},n.width=g,n.height=g,total$1.value=n.characterList.length,loaded$1.value=0,loading$1.value=!0;for(let $=0;$<n.characterList.length;$++){const V=n.characterList[$];V._o||executeCharacterScript(V),componentsToContours(orderedListWithItemsForCharacterFile(V),{unitsPerEm:g,descender:k,advanceWidth:g},{x:0,y:0},!1,!1,!0),loaded$1.value+=1}loading$1.value=!1}},modifyCharacterFile=(e,n)=>{const r=selectedItemByUUID(files.value,selectedFileUUID.value);let g=selectedItemByUUID(r.characterList,e);Object.keys(n).map(y=>{y==="view"?Object.keys(n.view).map(k=>{g.view[k]=n.view[k]}):g[y]=n[y]}),emitter.emit("renderPreviewCanvasByUUID",e)},removeOrderedItemForCurrentCharacterFile=e=>{const n=editCharacterFile.value,r=(()=>{for(let g=0;g<n.orderedList.length;g++)if(n.orderedList[g].uuid===e)return g;return-1})();r>=0&&n.orderedList.splice(r,1)},removeComponentForCurrentCharacterFile=e=>{const n=editCharacterFile.value,r=(()=>{for(let g=0;g<n.components.length;g++)if(n.components[g].uuid===e)return g;return-1})();removeOrderedItemForCurrentCharacterFile(e),n.glyph_script&&n.glyph_script[e]&&delete n.glyph_script[e],n.components.splice(r,1)},insertComponentForCurrentCharacterFile=(e,n)=>{editCharacterFile.value.components.push(e),insertOrderedItemForCurrentCharacterFile({type:"component",uuid:e.uuid},n)},setSelectionForCurrentCharacterFile=e=>{const n=editCharacterFile.value;if(e)if(enableMultiSelect.value){const r=n.selectedComponentsUUIDs.indexOf(e);r===-1?n.selectedComponentsUUIDs.push(e):n.selectedComponentsUUIDs.splice(r,1)}else n.selectedComponentsUUIDs=[e],selectedComponent.value?.type==="glyph"&&setGlyphDraggerTool("glyphDragger");else n.selectedComponentsUUIDs=[]},modifySubComponent=e=>{const n=editCharacterFile.value;if(!(!n?.selectedComponentsTree||!n?.selectedComponentsTree.length)){let r=null,g=null;const y=clone(n.components);for(let V=0;V<n?.selectedComponentsTree.length-1;V++){const L=n?.selectedComponentsTree[V];r?r=selectedItemByUUID(r.value.components,L):r=selectedItemByUUID(y,L)}const k=n?.selectedComponentsTree[n?.selectedComponentsTree.length-1];k!=="null"&&(g=selectedItemByUUID(r.value.components,k));const $=Object.keys(e);for(let V=0;V<$.length;V++){const L=$[V];g[L]=e[L]}n.components=y}},modifyComponentForCurrentCharacterFile=(e,n)=>{const r=editCharacterFile.value,g=clone(r.components);g.forEach(y=>{y.uuid===e&&Object.keys(n).map(k=>{switch(k){case"type":y.type=n.type;break;case"name":y.name=n.name;break;case"lock":y.lock=n.lock;break;case"visible":y.visible=n.visible;break;case"x":y.x=n.x;break;case"y":y.y=n.y;break;case"ox":y.ox=n.ox;break;case"oy":y.oy=n.oy;break;case"w":y.w=n.w;break;case"h":y.h=n.h;break;case"rotation":y.rotation=n.rotation;break;case"flipX":y.flipX=n.flipX;break;case"flipY":y.flipY=n.flipY;break;case"usedInCharacter":y.usedInCharacter=n.usedInCharacter;break;case"opacity":y.opacity=n.opacity;break;case"value":Object.keys(n.value).map($=>{if(y.value[$]=n.value[$],$==="points"){const{x:V,y:L,w:z,h:j}=getBound$5(n.value[$].reduce((ae,oe)=>(ae.push({x:oe.x,y:oe.y}),ae),[]));y.x=V,y.y=L,y.w=z,y.h=j}});break}}),r.components=g}),emitter.emit("renderPreviewCanvasByUUIDOnEditing",editCharacterFileUUID.value)},addOrderedItemForCurrentCharacterFile=e=>{editCharacterFile.value.orderedList.push(e)},insertOrderedItemForCurrentCharacterFile=(e,n)=>{const r=editCharacterFile.value,g=(()=>{for(let y=0;y<r.orderedList.length;y++)if(r.orderedList[y].uuid===n.uuid)return y})();n.pos==="prev"&&r.orderedList.splice(g,0,e),n.pos==="next"&&r.orderedList.splice(g+1,0,e)},setOrderedListForCurrentCharacterFile=e=>{const n=editCharacterFile.value;n.orderedList=e},setClipBoard=e=>{clipBoard.value=e},setEditCharacterFileUUID=e=>{editCharacterFileUUID.value=e},addCharacterForCurrentFile=e=>{selectedFile.value.characterList.push(e)},removeCharacterForCurrentFile=e=>{const n=selectedFile.value.characterList;for(let r=0;r<n.length;r++)if(n[r].uuid===e){n.splice(r,1);return}},addComponentForCurrentCharacterFile=e=>{editCharacterFile.value.components.push(e),addOrderedItemForCurrentCharacterFile({type:"component",uuid:e.uuid}),setSelectionForCurrentCharacterFile(e.uuid)},addComponentsForCurrentCharacterFile=e=>{const n=editCharacterFile.value;e.forEach(r=>{n.components.push(r),addOrderedItemForCurrentCharacterFile({type:"component",uuid:r.uuid})})},executeCharacterScript=e=>{if(window.character=new Character(e),constantsMap.update(constants.value),window.constantsMap=constantsMap,new Function(`${e.script}
script_${e.uuid.replaceAll("-","_")} (character, constantsMap, FP)`)(),window.character._character&&window.character._character.glyph_script){const r=Object.keys(window.character._character.glyph_script);for(let g=0;g<r.length;g++){const y=window.character._character.glyph_script[r[g]];new Function(`${y}`)()}}window.character._character?.components?.map(r=>{if(r.value.system_script){const g=Object.keys(r.value.system_script);for(let y=0;y<g.length;y++){const k=r.value.system_script[g[y]];window.comp_glyph=new CustomGlyph(r.value),new Function(`${k}`)(),window.comp_glyph=null}}})},executeCharactersGlyphsScript=e=>{const n=e.components;for(let r=0;r<n.length;r++){const g=n[r];if(g.type==="glyph"){const y=g.value;executeScript(y)}}},getCharacterRatioLayout=(e,n)=>{let r=null;if((e.type==="text"||e.type==="icon")&&e.info&&e.info.layoutTree){const g=n.split("-"),y=g.splice(g.length-1,1)[0],k=g.join("-");findLeafNodes(e.info?.layoutTree).map(V=>{V.id===k&&(r=V.rect[y])})}return r},findLeafNodes=e=>{const n=[],r=g=>{!g.children||g.children.length===0?n.push(g):g.children.forEach(y=>r(y))};return e.forEach(g=>r(g)),n},editCharacter=async e=>{loading$1.value=!0,total$1.value=0,await nextTick(),setTimeout(()=>{setEditCharacterFileUUID(e),setEditCharacterFileByUUID(editCharacterFileUUID.value),setPrevStatus(editStatus.value),setEditStatus(Status.Edit)},500)},deleteCharacter=(e,n)=>{e.stopPropagation();const r=selectedFile.value.characterList.find(g=>g.uuid===n);if(r&&r.character.text===".notdef"){ElMessage({message:".notdef",type:"warning"});return}removeCharacterForCurrentFile(n),deleteCharacterTemplate(n)},renameCharacter=(e,n)=>{e.stopPropagation();const r=selectedFile.value.characterList.find(g=>g.uuid===n);if(r&&r.character.text===".notdef"){ElMessage({message:".notdef",type:"warning"});return}editedCharacterUUID.value=n,setEditCharacterDialogVisible(!0)},copyCharacter=(e,n)=>{e.stopPropagation(),copiedCharacterUUID.value=n,setCopyCharacterDialogVisible(!0)},generateCharacterTemplate=e=>{const n=document.getElementById("character-template").querySelector(".character").cloneNode(!0);return n.className=`character character-${e.uuid}`,n.querySelector(".preview-canvas").id=`preview-canvas-${e.uuid}`,n.querySelector(".text").innerHTML=`${e.character.text}`,e.type==="text"&&(n.querySelector(".unicode").innerHTML=`0x${e.character.unicode.toString(16)}`),n.querySelector(".edit-icon").addEventListener("click",r=>renameCharacter(r,e.uuid)),n.querySelector(".copy-icon").addEventListener("click",r=>copyCharacter(r,e.uuid)),n.querySelector(".delete-icon").addEventListener("click",r=>deleteCharacter(r,e.uuid)),n.addEventListener("click",()=>editCharacter(e.uuid)),n},deleteCharacterTemplate=e=>{const n=document.getElementById("character-render-list"),r=n.querySelector(`.character-${e}`);n.removeChild(r)},addCharacterTemplate=e=>{const n=document.getElementById("character-render-list"),r=n.querySelector(".default-character");r&&n.insertBefore(e,r)},batchAddCharacterTemplates=e=>{const n=document.getElementById("character-render-list"),r=n.querySelector(".default-character");if(!r)return;const g=document.createDocumentFragment();e.forEach(y=>{g.appendChild(y)}),n.insertBefore(g,r)},clearCharacterRenderList=()=>{const e=document.getElementById("character-render-list"),n=document.getElementById("default-character-template").querySelector(".default-character").cloneNode(!0);n.addEventListener("click",()=>setAddTextDialogVisible(!0)),e.innerHTML="",e.appendChild(n)},visibleStartIndex=ref(0),visibleEndIndex=ref(500),visibleCount=ref(500),itemHeight=122;async function open$2(e={}){return typeof e=="object"&&Object.freeze(e),await invoke("plugin:dialog|open",{options:e})}async function save(e={}){return typeof e=="object"&&Object.freeze(e),await invoke("plugin:dialog|save",{options:e})}var BaseDirectory;(function(e){e[e.Audio=1]="Audio",e[e.Cache=2]="Cache",e[e.Config=3]="Config",e[e.Data=4]="Data",e[e.LocalData=5]="LocalData",e[e.Document=6]="Document",e[e.Download=7]="Download",e[e.Picture=8]="Picture",e[e.Public=9]="Public",e[e.Video=10]="Video",e[e.Resource=11]="Resource",e[e.Temp=12]="Temp",e[e.AppConfig=13]="AppConfig",e[e.AppData=14]="AppData",e[e.AppLocalData=15]="AppLocalData",e[e.AppCache=16]="AppCache",e[e.AppLog=17]="AppLog",e[e.Desktop=18]="Desktop",e[e.Executable=19]="Executable",e[e.Font=20]="Font",e[e.Home=21]="Home",e[e.Runtime=22]="Runtime",e[e.Template=23]="Template"})(BaseDirectory||(BaseDirectory={}));var SeekMode;(function(e){e[e.Start=0]="Start",e[e.Current=1]="Current",e[e.End=2]="End"})(SeekMode||(SeekMode={}));function parseFileInfo(e){return{isFile:e.isFile,isDirectory:e.isDirectory,isSymlink:e.isSymlink,size:e.size,mtime:e.mtime!==null?new Date(e.mtime):null,atime:e.atime!==null?new Date(e.atime):null,birthtime:e.birthtime!==null?new Date(e.birthtime):null,readonly:e.readonly,fileAttributes:e.fileAttributes,dev:e.dev,ino:e.ino,mode:e.mode,nlink:e.nlink,uid:e.uid,gid:e.gid,rdev:e.rdev,blksize:e.blksize,blocks:e.blocks}}function fromBytes(e){const n=new Uint8ClampedArray(e),r=n.byteLength;let g=0;for(let y=0;y<r;y++){const k=n[y];g*=256,g+=k}return g}class FileHandle extends Resource{async read(n){if(n.byteLength===0)return 0;const r=await invoke("plugin:fs|read",{rid:this.rid,len:n.byteLength}),g=fromBytes(r.slice(-8)),y=r instanceof ArrayBuffer?new Uint8Array(r):r;return n.set(y.slice(0,y.length-8)),g===0?null:g}async seek(n,r){return await invoke("plugin:fs|seek",{rid:this.rid,offset:n,whence:r})}async stat(){const n=await invoke("plugin:fs|fstat",{rid:this.rid});return parseFileInfo(n)}async truncate(n){await invoke("plugin:fs|ftruncate",{rid:this.rid,len:n})}async write(n){return await invoke("plugin:fs|write",{rid:this.rid,data:n})}}async function open$1(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");const r=await invoke("plugin:fs|open",{path:e instanceof URL?e.toString():e,options:n});return new FileHandle(r)}async function readFile(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");const r=await invoke("plugin:fs|read_file",{path:e instanceof URL?e.toString():e,options:n});return r instanceof ArrayBuffer?new Uint8Array(r):Uint8Array.from(r)}async function readTextFile(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");const r=await invoke("plugin:fs|read_text_file",{path:e instanceof URL?e.toString():e,options:n}),g=r instanceof ArrayBuffer?r:Uint8Array.from(r);return new TextDecoder().decode(g)}async function writeFile(e,n,r){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");if(n instanceof ReadableStream){const g=await open$1(e,r);for await(const y of n)await g.write(y);await g.close()}else await invoke("plugin:fs|write_file",n,{headers:{path:encodeURIComponent(e instanceof URL?e.toString():e),options:JSON.stringify(r)}})}async function writeTextFile(e,n,r){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");const g=new TextEncoder;await invoke("plugin:fs|write_text_file",g.encode(n),{headers:{path:encodeURIComponent(e instanceof URL?e.toString():e),options:JSON.stringify(r)}})}/*!
  * shared v9.4.1
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const inBrowser=typeof window<"u",makeSymbol=(e,n=!1)=>n?Symbol.for(e):Symbol(e),generateFormatCacheKey=(e,n,r)=>friendlyJSONstringify({l:e,k:n,s:r}),friendlyJSONstringify=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),isNumber=e=>typeof e=="number"&&isFinite(e),isDate=e=>toTypeString(e)==="[object Date]",isRegExp=e=>toTypeString(e)==="[object RegExp]",isEmptyObject=e=>isPlainObject(e)&&Object.keys(e).length===0,assign$1=Object.assign;let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function escapeHtml(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const hasOwnProperty=Object.prototype.hasOwnProperty;function hasOwn(e,n){return hasOwnProperty.call(e,n)}const isArray=Array.isArray,isFunction=e=>typeof e=="function",isString$1=e=>typeof e=="string",isBoolean=e=>typeof e=="boolean",isObject$1=e=>e!==null&&typeof e=="object",objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),isPlainObject=e=>{if(!isObject$1(e))return!1;const n=Object.getPrototypeOf(e);return n===null||n.constructor===Object},toDisplayString=e=>e==null?"":isArray(e)||isPlainObject(e)&&e.toString===objectToString?JSON.stringify(e,null,2):String(e);function join$1(e,n=""){return e.reduce((r,g,y)=>y===0?r+g:r+n+g,"")}function incrementer(e){let n=e;return()=>++n}function warn(e,n){typeof console<"u"&&(console.warn("[intlify] "+e),n&&console.warn(n.stack))}/*!
  * message-compiler v9.4.1
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */function createPosition(e,n,r){return{line:e,column:n,offset:r}}function createLocation(e,n,r){const g={start:e,end:n};return r!=null&&(g.source=r),g}const RE_ARGS=/\{([0-9a-zA-Z]+)\}/g;function format$1(e,...n){return n.length===1&&isObject(n[0])&&(n=n[0]),(!n||!n.hasOwnProperty)&&(n={}),e.replace(RE_ARGS,(r,g)=>n.hasOwnProperty(g)?n[g]:"")}const assign=Object.assign,isString=e=>typeof e=="string",isObject=e=>e!==null&&typeof e=="object";function join(e,n=""){return e.reduce((r,g,y)=>y===0?r+g:r+n+g,"")}const CompileErrorCodes={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},errorMessages={[CompileErrorCodes.EXPECTED_TOKEN]:"Expected token: '{0}'",[CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[CompileErrorCodes.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[CompileErrorCodes.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[CompileErrorCodes.EMPTY_PLACEHOLDER]:"Empty placeholder",[CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[CompileErrorCodes.INVALID_LINKED_FORMAT]:"Invalid linked format",[CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[CompileErrorCodes.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[CompileErrorCodes.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function createCompileError(e,n,r={}){const{domain:g,messages:y,args:k}=r,$=format$1((y||errorMessages)[e]||"",...k||[]),V=new SyntaxError(String($));return V.code=e,n&&(V.location=n),V.domain=g,V}function defaultOnError(e){throw e}const CHAR_SP=" ",CHAR_CR="\r",CHAR_LF=`
`,CHAR_LS="\u2028",CHAR_PS="\u2029";function createScanner(e){const n=e;let r=0,g=1,y=1,k=0;const $=Ie=>n[Ie]===CHAR_CR&&n[Ie+1]===CHAR_LF,V=Ie=>n[Ie]===CHAR_LF,L=Ie=>n[Ie]===CHAR_PS,z=Ie=>n[Ie]===CHAR_LS,j=Ie=>$(Ie)||V(Ie)||L(Ie)||z(Ie),ae=()=>r,oe=()=>g,re=()=>y,ue=()=>k,le=Ie=>$(Ie)||L(Ie)||z(Ie)?CHAR_LF:n[Ie],de=()=>le(r),he=()=>le(r+k);function _e(){return k=0,j(r)&&(g++,y=0),$(r)&&r++,r++,y++,n[r]}function xe(){return $(r+k)&&k++,k++,n[r+k]}function Ne(){r=0,g=1,y=1,k=0}function $e(Ie=0){k=Ie}function Ce(){const Ie=r+k;for(;Ie!==r;)_e();k=0}return{index:ae,line:oe,column:re,peekOffset:ue,charAt:le,currentChar:de,currentPeek:he,next:_e,peek:xe,reset:Ne,resetPeek:$e,skipToPeek:Ce}}const EOF=void 0,DOT=".",LITERAL_DELIMITER="'",ERROR_DOMAIN$3="tokenizer";function createTokenizer(e,n={}){const r=n.location!==!1,g=createScanner(e),y=()=>g.index(),k=()=>createPosition(g.line(),g.column(),g.index()),$=k(),V=y(),L={currentType:14,offset:V,startLoc:$,endLoc:$,lastType:14,lastOffset:V,lastStartLoc:$,lastEndLoc:$,braceNest:0,inLinked:!1,text:""},z=()=>L,{onError:j}=n;function ae(Hn,bn,Xn,...$n){const kt=z();if(bn.column+=Xn,bn.offset+=Xn,j){const At=r?createLocation(kt.startLoc,bn):null,Dn=createCompileError(Hn,At,{domain:ERROR_DOMAIN$3,args:$n});j(Dn)}}function oe(Hn,bn,Xn){Hn.endLoc=k(),Hn.currentType=bn;const $n={type:bn};return r&&($n.loc=createLocation(Hn.startLoc,Hn.endLoc)),Xn!=null&&($n.value=Xn),$n}const re=Hn=>oe(Hn,14);function ue(Hn,bn){return Hn.currentChar()===bn?(Hn.next(),bn):(ae(CompileErrorCodes.EXPECTED_TOKEN,k(),0,bn),"")}function le(Hn){let bn="";for(;Hn.currentPeek()===CHAR_SP||Hn.currentPeek()===CHAR_LF;)bn+=Hn.currentPeek(),Hn.peek();return bn}function de(Hn){const bn=le(Hn);return Hn.skipToPeek(),bn}function he(Hn){if(Hn===EOF)return!1;const bn=Hn.charCodeAt(0);return bn>=97&&bn<=122||bn>=65&&bn<=90||bn===95}function _e(Hn){if(Hn===EOF)return!1;const bn=Hn.charCodeAt(0);return bn>=48&&bn<=57}function xe(Hn,bn){const{currentType:Xn}=bn;if(Xn!==2)return!1;le(Hn);const $n=he(Hn.currentPeek());return Hn.resetPeek(),$n}function Ne(Hn,bn){const{currentType:Xn}=bn;if(Xn!==2)return!1;le(Hn);const $n=Hn.currentPeek()==="-"?Hn.peek():Hn.currentPeek(),kt=_e($n);return Hn.resetPeek(),kt}function $e(Hn,bn){const{currentType:Xn}=bn;if(Xn!==2)return!1;le(Hn);const $n=Hn.currentPeek()===LITERAL_DELIMITER;return Hn.resetPeek(),$n}function Ce(Hn,bn){const{currentType:Xn}=bn;if(Xn!==8)return!1;le(Hn);const $n=Hn.currentPeek()===".";return Hn.resetPeek(),$n}function Ie(Hn,bn){const{currentType:Xn}=bn;if(Xn!==9)return!1;le(Hn);const $n=he(Hn.currentPeek());return Hn.resetPeek(),$n}function ze(Hn,bn){const{currentType:Xn}=bn;if(!(Xn===8||Xn===12))return!1;le(Hn);const $n=Hn.currentPeek()===":";return Hn.resetPeek(),$n}function Ue(Hn,bn){const{currentType:Xn}=bn;if(Xn!==10)return!1;const $n=()=>{const At=Hn.currentPeek();return At==="{"?he(Hn.peek()):At==="@"||At==="%"||At==="|"||At===":"||At==="."||At===CHAR_SP||!At?!1:At===CHAR_LF?(Hn.peek(),$n()):he(At)},kt=$n();return Hn.resetPeek(),kt}function Pt(Hn){le(Hn);const bn=Hn.currentPeek()==="|";return Hn.resetPeek(),bn}function hn(Hn){const bn=le(Hn),Xn=Hn.currentPeek()==="%"&&Hn.peek()==="{";return Hn.resetPeek(),{isModulo:Xn,hasSpace:bn.length>0}}function Dt(Hn,bn=!0){const Xn=(kt=!1,At="",Dn=!1)=>{const Qn=Hn.currentPeek();return Qn==="{"?At==="%"?!1:kt:Qn==="@"||!Qn?At==="%"?!0:kt:Qn==="%"?(Hn.peek(),Xn(kt,"%",!0)):Qn==="|"?At==="%"||Dn?!0:!(At===CHAR_SP||At===CHAR_LF):Qn===CHAR_SP?(Hn.peek(),Xn(!0,CHAR_SP,Dn)):Qn===CHAR_LF?(Hn.peek(),Xn(!0,CHAR_LF,Dn)):!0},$n=Xn();return bn&&Hn.resetPeek(),$n}function xn(Hn,bn){const Xn=Hn.currentChar();return Xn===EOF?EOF:bn(Xn)?(Hn.next(),Xn):null}function jt(Hn){return xn(Hn,Xn=>{const $n=Xn.charCodeAt(0);return $n>=97&&$n<=122||$n>=65&&$n<=90||$n>=48&&$n<=57||$n===95||$n===36})}function Vn(Hn){return xn(Hn,Xn=>{const $n=Xn.charCodeAt(0);return $n>=48&&$n<=57})}function Rn(Hn){return xn(Hn,Xn=>{const $n=Xn.charCodeAt(0);return $n>=48&&$n<=57||$n>=65&&$n<=70||$n>=97&&$n<=102})}function Tn(Hn){let bn="",Xn="";for(;bn=Vn(Hn);)Xn+=bn;return Xn}function Ln(Hn){de(Hn);const bn=Hn.currentChar();return bn!=="%"&&ae(CompileErrorCodes.EXPECTED_TOKEN,k(),0,bn),Hn.next(),"%"}function Sn(Hn){let bn="";for(;;){const Xn=Hn.currentChar();if(Xn==="{"||Xn==="}"||Xn==="@"||Xn==="|"||!Xn)break;if(Xn==="%")if(Dt(Hn))bn+=Xn,Hn.next();else break;else if(Xn===CHAR_SP||Xn===CHAR_LF)if(Dt(Hn))bn+=Xn,Hn.next();else{if(Pt(Hn))break;bn+=Xn,Hn.next()}else bn+=Xn,Hn.next()}return bn}function An(Hn){de(Hn);let bn="",Xn="";for(;bn=jt(Hn);)Xn+=bn;return Hn.currentChar()===EOF&&ae(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,k(),0),Xn}function In(Hn){de(Hn);let bn="";return Hn.currentChar()==="-"?(Hn.next(),bn+=`-${Tn(Hn)}`):bn+=Tn(Hn),Hn.currentChar()===EOF&&ae(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,k(),0),bn}function Mn(Hn){de(Hn),ue(Hn,"'");let bn="",Xn="";const $n=At=>At!==LITERAL_DELIMITER&&At!==CHAR_LF;for(;bn=xn(Hn,$n);)bn==="\\"?Xn+=ra(Hn):Xn+=bn;const kt=Hn.currentChar();return kt===CHAR_LF||kt===EOF?(ae(CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,k(),0),kt===CHAR_LF&&(Hn.next(),ue(Hn,"'")),Xn):(ue(Hn,"'"),Xn)}function ra(Hn){const bn=Hn.currentChar();switch(bn){case"\\":case"'":return Hn.next(),`\\${bn}`;case"u":return da(Hn,bn,4);case"U":return da(Hn,bn,6);default:return ae(CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE,k(),0,bn),""}}function da(Hn,bn,Xn){ue(Hn,bn);let $n="";for(let kt=0;kt<Xn;kt++){const At=Rn(Hn);if(!At){ae(CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE,k(),0,`\\${bn}${$n}${Hn.currentChar()}`);break}$n+=At}return`\\${bn}${$n}`}function ua(Hn){de(Hn);let bn="",Xn="";const $n=kt=>kt!=="{"&&kt!=="}"&&kt!==CHAR_SP&&kt!==CHAR_LF;for(;bn=xn(Hn,$n);)Xn+=bn;return Xn}function aa(Hn){let bn="",Xn="";for(;bn=jt(Hn);)Xn+=bn;return Xn}function Nn(Hn){const bn=(Xn=!1,$n)=>{const kt=Hn.currentChar();return kt==="{"||kt==="%"||kt==="@"||kt==="|"||kt==="("||kt===")"||!kt||kt===CHAR_SP?$n:kt===CHAR_LF||kt===DOT?($n+=kt,Hn.next(),bn(Xn,$n)):($n+=kt,Hn.next(),bn(!0,$n))};return bn(!1,"")}function En(Hn){de(Hn);const bn=ue(Hn,"|");return de(Hn),bn}function Zn(Hn,bn){let Xn=null;switch(Hn.currentChar()){case"{":return bn.braceNest>=1&&ae(CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER,k(),0),Hn.next(),Xn=oe(bn,2,"{"),de(Hn),bn.braceNest++,Xn;case"}":return bn.braceNest>0&&bn.currentType===2&&ae(CompileErrorCodes.EMPTY_PLACEHOLDER,k(),0),Hn.next(),Xn=oe(bn,3,"}"),bn.braceNest--,bn.braceNest>0&&de(Hn),bn.inLinked&&bn.braceNest===0&&(bn.inLinked=!1),Xn;case"@":return bn.braceNest>0&&ae(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,k(),0),Xn=ha(Hn,bn)||re(bn),bn.braceNest=0,Xn;default:let kt=!0,At=!0,Dn=!0;if(Pt(Hn))return bn.braceNest>0&&ae(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,k(),0),Xn=oe(bn,1,En(Hn)),bn.braceNest=0,bn.inLinked=!1,Xn;if(bn.braceNest>0&&(bn.currentType===5||bn.currentType===6||bn.currentType===7))return ae(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,k(),0),bn.braceNest=0,xa(Hn,bn);if(kt=xe(Hn,bn))return Xn=oe(bn,5,An(Hn)),de(Hn),Xn;if(At=Ne(Hn,bn))return Xn=oe(bn,6,In(Hn)),de(Hn),Xn;if(Dn=$e(Hn,bn))return Xn=oe(bn,7,Mn(Hn)),de(Hn),Xn;if(!kt&&!At&&!Dn)return Xn=oe(bn,13,ua(Hn)),ae(CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER,k(),0,Xn.value),de(Hn),Xn;break}return Xn}function ha(Hn,bn){const{currentType:Xn}=bn;let $n=null;const kt=Hn.currentChar();switch((Xn===8||Xn===9||Xn===12||Xn===10)&&(kt===CHAR_LF||kt===CHAR_SP)&&ae(CompileErrorCodes.INVALID_LINKED_FORMAT,k(),0),kt){case"@":return Hn.next(),$n=oe(bn,8,"@"),bn.inLinked=!0,$n;case".":return de(Hn),Hn.next(),oe(bn,9,".");case":":return de(Hn),Hn.next(),oe(bn,10,":");default:return Pt(Hn)?($n=oe(bn,1,En(Hn)),bn.braceNest=0,bn.inLinked=!1,$n):Ce(Hn,bn)||ze(Hn,bn)?(de(Hn),ha(Hn,bn)):Ie(Hn,bn)?(de(Hn),oe(bn,12,aa(Hn))):Ue(Hn,bn)?(de(Hn),kt==="{"?Zn(Hn,bn)||$n:oe(bn,11,Nn(Hn))):(Xn===8&&ae(CompileErrorCodes.INVALID_LINKED_FORMAT,k(),0),bn.braceNest=0,bn.inLinked=!1,xa(Hn,bn))}}function xa(Hn,bn){let Xn={type:14};if(bn.braceNest>0)return Zn(Hn,bn)||re(bn);if(bn.inLinked)return ha(Hn,bn)||re(bn);switch(Hn.currentChar()){case"{":return Zn(Hn,bn)||re(bn);case"}":return ae(CompileErrorCodes.UNBALANCED_CLOSING_BRACE,k(),0),Hn.next(),oe(bn,3,"}");case"@":return ha(Hn,bn)||re(bn);default:if(Pt(Hn))return Xn=oe(bn,1,En(Hn)),bn.braceNest=0,bn.inLinked=!1,Xn;const{isModulo:kt,hasSpace:At}=hn(Hn);if(kt)return At?oe(bn,0,Sn(Hn)):oe(bn,4,Ln(Hn));if(Dt(Hn))return oe(bn,0,Sn(Hn));break}return Xn}function sa(){const{currentType:Hn,offset:bn,startLoc:Xn,endLoc:$n}=L;return L.lastType=Hn,L.lastOffset=bn,L.lastStartLoc=Xn,L.lastEndLoc=$n,L.offset=y(),L.startLoc=k(),g.currentChar()===EOF?oe(L,14):xa(g,L)}return{nextToken:sa,currentOffset:y,currentPosition:k,context:z}}const ERROR_DOMAIN$2="parser",KNOWN_ESCAPES=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function fromEscapeSequence(e,n,r){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const g=parseInt(n||r,16);return g<=55295||g>=57344?String.fromCodePoint(g):""}}}function createParser(e={}){const n=e.location!==!1,{onError:r}=e;function g(he,_e,xe,Ne,...$e){const Ce=he.currentPosition();if(Ce.offset+=Ne,Ce.column+=Ne,r){const Ie=n?createLocation(xe,Ce):null,ze=createCompileError(_e,Ie,{domain:ERROR_DOMAIN$2,args:$e});r(ze)}}function y(he,_e,xe){const Ne={type:he};return n&&(Ne.start=_e,Ne.end=_e,Ne.loc={start:xe,end:xe}),Ne}function k(he,_e,xe,Ne){Ne&&(he.type=Ne),n&&(he.end=_e,he.loc&&(he.loc.end=xe))}function $(he,_e){const xe=he.context(),Ne=y(3,xe.offset,xe.startLoc);return Ne.value=_e,k(Ne,he.currentOffset(),he.currentPosition()),Ne}function V(he,_e){const xe=he.context(),{lastOffset:Ne,lastStartLoc:$e}=xe,Ce=y(5,Ne,$e);return Ce.index=parseInt(_e,10),he.nextToken(),k(Ce,he.currentOffset(),he.currentPosition()),Ce}function L(he,_e){const xe=he.context(),{lastOffset:Ne,lastStartLoc:$e}=xe,Ce=y(4,Ne,$e);return Ce.key=_e,he.nextToken(),k(Ce,he.currentOffset(),he.currentPosition()),Ce}function z(he,_e){const xe=he.context(),{lastOffset:Ne,lastStartLoc:$e}=xe,Ce=y(9,Ne,$e);return Ce.value=_e.replace(KNOWN_ESCAPES,fromEscapeSequence),he.nextToken(),k(Ce,he.currentOffset(),he.currentPosition()),Ce}function j(he){const _e=he.nextToken(),xe=he.context(),{lastOffset:Ne,lastStartLoc:$e}=xe,Ce=y(8,Ne,$e);return _e.type!==12?(g(he,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER,xe.lastStartLoc,0),Ce.value="",k(Ce,Ne,$e),{nextConsumeToken:_e,node:Ce}):(_e.value==null&&g(he,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,xe.lastStartLoc,0,getTokenCaption(_e)),Ce.value=_e.value||"",k(Ce,he.currentOffset(),he.currentPosition()),{node:Ce})}function ae(he,_e){const xe=he.context(),Ne=y(7,xe.offset,xe.startLoc);return Ne.value=_e,k(Ne,he.currentOffset(),he.currentPosition()),Ne}function oe(he){const _e=he.context(),xe=y(6,_e.offset,_e.startLoc);let Ne=he.nextToken();if(Ne.type===9){const $e=j(he);xe.modifier=$e.node,Ne=$e.nextConsumeToken||he.nextToken()}switch(Ne.type!==10&&g(he,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,_e.lastStartLoc,0,getTokenCaption(Ne)),Ne=he.nextToken(),Ne.type===2&&(Ne=he.nextToken()),Ne.type){case 11:Ne.value==null&&g(he,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,_e.lastStartLoc,0,getTokenCaption(Ne)),xe.key=ae(he,Ne.value||"");break;case 5:Ne.value==null&&g(he,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,_e.lastStartLoc,0,getTokenCaption(Ne)),xe.key=L(he,Ne.value||"");break;case 6:Ne.value==null&&g(he,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,_e.lastStartLoc,0,getTokenCaption(Ne)),xe.key=V(he,Ne.value||"");break;case 7:Ne.value==null&&g(he,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,_e.lastStartLoc,0,getTokenCaption(Ne)),xe.key=z(he,Ne.value||"");break;default:g(he,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY,_e.lastStartLoc,0);const $e=he.context(),Ce=y(7,$e.offset,$e.startLoc);return Ce.value="",k(Ce,$e.offset,$e.startLoc),xe.key=Ce,k(xe,$e.offset,$e.startLoc),{nextConsumeToken:Ne,node:xe}}return k(xe,he.currentOffset(),he.currentPosition()),{node:xe}}function re(he){const _e=he.context(),xe=_e.currentType===1?he.currentOffset():_e.offset,Ne=_e.currentType===1?_e.endLoc:_e.startLoc,$e=y(2,xe,Ne);$e.items=[];let Ce=null;do{const Ue=Ce||he.nextToken();switch(Ce=null,Ue.type){case 0:Ue.value==null&&g(he,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,_e.lastStartLoc,0,getTokenCaption(Ue)),$e.items.push($(he,Ue.value||""));break;case 6:Ue.value==null&&g(he,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,_e.lastStartLoc,0,getTokenCaption(Ue)),$e.items.push(V(he,Ue.value||""));break;case 5:Ue.value==null&&g(he,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,_e.lastStartLoc,0,getTokenCaption(Ue)),$e.items.push(L(he,Ue.value||""));break;case 7:Ue.value==null&&g(he,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,_e.lastStartLoc,0,getTokenCaption(Ue)),$e.items.push(z(he,Ue.value||""));break;case 8:const Pt=oe(he);$e.items.push(Pt.node),Ce=Pt.nextConsumeToken||null;break}}while(_e.currentType!==14&&_e.currentType!==1);const Ie=_e.currentType===1?_e.lastOffset:he.currentOffset(),ze=_e.currentType===1?_e.lastEndLoc:he.currentPosition();return k($e,Ie,ze),$e}function ue(he,_e,xe,Ne){const $e=he.context();let Ce=Ne.items.length===0;const Ie=y(1,_e,xe);Ie.cases=[],Ie.cases.push(Ne);do{const ze=re(he);Ce||(Ce=ze.items.length===0),Ie.cases.push(ze)}while($e.currentType!==14);return Ce&&g(he,CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL,xe,0),k(Ie,he.currentOffset(),he.currentPosition()),Ie}function le(he){const _e=he.context(),{offset:xe,startLoc:Ne}=_e,$e=re(he);return _e.currentType===14?$e:ue(he,xe,Ne,$e)}function de(he){const _e=createTokenizer(he,assign({},e)),xe=_e.context(),Ne=y(0,xe.offset,xe.startLoc);return n&&Ne.loc&&(Ne.loc.source=he),Ne.body=le(_e),e.onCacheKey&&(Ne.cacheKey=e.onCacheKey(he)),xe.currentType!==14&&g(_e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,xe.lastStartLoc,0,he[xe.offset]||""),k(Ne,_e.currentOffset(),_e.currentPosition()),Ne}return{parse:de}}function getTokenCaption(e){if(e.type===14)return"EOF";const n=(e.value||"").replace(/\r?\n/gu,"\\n");return n.length>10?n.slice(0,9)+"":n}function createTransformer(e,n={}){const r={ast:e,helpers:new Set};return{context:()=>r,helper:k=>(r.helpers.add(k),k)}}function traverseNodes(e,n){for(let r=0;r<e.length;r++)traverseNode(e[r],n)}function traverseNode(e,n){switch(e.type){case 1:traverseNodes(e.cases,n),n.helper("plural");break;case 2:traverseNodes(e.items,n);break;case 6:traverseNode(e.key,n),n.helper("linked"),n.helper("type");break;case 5:n.helper("interpolate"),n.helper("list");break;case 4:n.helper("interpolate"),n.helper("named");break}}function transform(e,n={}){const r=createTransformer(e);r.helper("normalize"),e.body&&traverseNode(e.body,r);const g=r.context();e.helpers=Array.from(g.helpers)}function optimize(e){const n=e.body;return n.type===2?optimizeMessageNode(n):n.cases.forEach(r=>optimizeMessageNode(r)),e}function optimizeMessageNode(e){if(e.items.length===1){const n=e.items[0];(n.type===3||n.type===9)&&(e.static=n.value,delete n.value)}else{const n=[];for(let r=0;r<e.items.length;r++){const g=e.items[r];if(!(g.type===3||g.type===9)||g.value==null)break;n.push(g.value)}if(n.length===e.items.length){e.static=join(n);for(let r=0;r<e.items.length;r++){const g=e.items[r];(g.type===3||g.type===9)&&delete g.value}}}}const ERROR_DOMAIN$1="minifier";function minify(e){switch(e.t=e.type,e.type){case 0:const n=e;minify(n.body),n.b=n.body,delete n.body;break;case 1:const r=e,g=r.cases;for(let j=0;j<g.length;j++)minify(g[j]);r.c=g,delete r.cases;break;case 2:const y=e,k=y.items;for(let j=0;j<k.length;j++)minify(k[j]);y.i=k,delete y.items,y.static&&(y.s=y.static,delete y.static);break;case 3:case 9:case 8:case 7:const $=e;$.value&&($.v=$.value,delete $.value);break;case 6:const V=e;minify(V.key),V.k=V.key,delete V.key,V.modifier&&(minify(V.modifier),V.m=V.modifier,delete V.modifier);break;case 5:const L=e;L.i=L.index,delete L.index;break;case 4:const z=e;z.k=z.key,delete z.key;break;default:throw createCompileError(CompileErrorCodes.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:ERROR_DOMAIN$1,args:[e.type]})}delete e.type}const ERROR_DOMAIN="parser";function createCodeGenerator(e,n){const{sourceMap:r,filename:g,breakLineCode:y,needIndent:k}=n,$=n.location!==!1,V={filename:g,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:y,needIndent:k,indentLevel:0};$&&e.loc&&(V.source=e.loc.source);const L=()=>V;function z(de,he){V.code+=de}function j(de,he=!0){const _e=he?y:"";z(k?_e+"  ".repeat(de):_e)}function ae(de=!0){const he=++V.indentLevel;de&&j(he)}function oe(de=!0){const he=--V.indentLevel;de&&j(he)}function re(){j(V.indentLevel)}return{context:L,push:z,indent:ae,deindent:oe,newline:re,helper:de=>`_${de}`,needIndent:()=>V.needIndent}}function generateLinkedNode(e,n){const{helper:r}=e;e.push(`${r("linked")}(`),generateNode(e,n.key),n.modifier?(e.push(", "),generateNode(e,n.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function generateMessageNode(e,n){const{helper:r,needIndent:g}=e;e.push(`${r("normalize")}([`),e.indent(g());const y=n.items.length;for(let k=0;k<y&&(generateNode(e,n.items[k]),k!==y-1);k++)e.push(", ");e.deindent(g()),e.push("])")}function generatePluralNode(e,n){const{helper:r,needIndent:g}=e;if(n.cases.length>1){e.push(`${r("plural")}([`),e.indent(g());const y=n.cases.length;for(let k=0;k<y&&(generateNode(e,n.cases[k]),k!==y-1);k++)e.push(", ");e.deindent(g()),e.push("])")}}function generateResource(e,n){n.body?generateNode(e,n.body):e.push("null")}function generateNode(e,n){const{helper:r}=e;switch(n.type){case 0:generateResource(e,n);break;case 1:generatePluralNode(e,n);break;case 2:generateMessageNode(e,n);break;case 6:generateLinkedNode(e,n);break;case 8:e.push(JSON.stringify(n.value),n);break;case 7:e.push(JSON.stringify(n.value),n);break;case 5:e.push(`${r("interpolate")}(${r("list")}(${n.index}))`,n);break;case 4:e.push(`${r("interpolate")}(${r("named")}(${JSON.stringify(n.key)}))`,n);break;case 9:e.push(JSON.stringify(n.value),n);break;case 3:e.push(JSON.stringify(n.value),n);break;default:throw createCompileError(CompileErrorCodes.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:ERROR_DOMAIN,args:[n.type]})}}const generate=(e,n={})=>{const r=isString(n.mode)?n.mode:"normal",g=isString(n.filename)?n.filename:"message.intl",y=!!n.sourceMap,k=n.breakLineCode!=null?n.breakLineCode:r==="arrow"?";":`
`,$=n.needIndent?n.needIndent:r!=="arrow",V=e.helpers||[],L=createCodeGenerator(e,{mode:r,filename:g,sourceMap:y,breakLineCode:k,needIndent:$});L.push(r==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),L.indent($),V.length>0&&(L.push(`const { ${join(V.map(ae=>`${ae}: _${ae}`),", ")} } = ctx`),L.newline()),L.push("return "),generateNode(L,e),L.deindent($),L.push("}"),delete e.helpers;const{code:z,map:j}=L.context();return{ast:e,code:z,map:j?j.toJSON():void 0}};function baseCompile$1(e,n={}){const r=assign({},n),g=!!r.jit,y=!!r.minify,k=r.optimize==null?!0:r.optimize,V=createParser(r).parse(e);return g?(k&&optimize(V),y&&minify(V),{ast:V,code:""}):(transform(V,r),generate(V,r))}/*!
  * core-base v9.4.1
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */function initFeatureFlags$1(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(getGlobalThis().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const pathStateMachine=[];pathStateMachine[0]={w:[0],i:[3,0],"[":[4],o:[7]};pathStateMachine[1]={w:[1],".":[2],"[":[4],o:[7]};pathStateMachine[2]={w:[2],i:[3,0],0:[3,0]};pathStateMachine[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};pathStateMachine[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};pathStateMachine[5]={"'":[4,0],o:8,l:[5,0]};pathStateMachine[6]={'"':[4,0],o:8,l:[6,0]};const literalValueRE=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function isLiteral(e){return literalValueRE.test(e)}function stripQuotes(e){const n=e.charCodeAt(0),r=e.charCodeAt(e.length-1);return n===r&&(n===34||n===39)?e.slice(1,-1):e}function getPathCharType(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function formatSubPath(e){const n=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:isLiteral(n)?stripQuotes(n):"*"+n}function parse$2(e){const n=[];let r=-1,g=0,y=0,k,$,V,L,z,j,ae;const oe=[];oe[0]=()=>{$===void 0?$=V:$+=V},oe[1]=()=>{$!==void 0&&(n.push($),$=void 0)},oe[2]=()=>{oe[0](),y++},oe[3]=()=>{if(y>0)y--,g=4,oe[0]();else{if(y=0,$===void 0||($=formatSubPath($),$===!1))return!1;oe[1]()}};function re(){const ue=e[r+1];if(g===5&&ue==="'"||g===6&&ue==='"')return r++,V="\\"+ue,oe[0](),!0}for(;g!==null;)if(r++,k=e[r],!(k==="\\"&&re())){if(L=getPathCharType(k),ae=pathStateMachine[g],z=ae[L]||ae.l||8,z===8||(g=z[0],z[1]!==void 0&&(j=oe[z[1]],j&&(V=k,j()===!1))))return;if(g===7)return n}}const cache$1=new Map;function resolveWithKeyValue(e,n){return isObject$1(e)?e[n]:null}function resolveValue(e,n){if(!isObject$1(e))return null;let r=cache$1.get(n);if(r||(r=parse$2(n),r&&cache$1.set(n,r)),!r)return null;const g=r.length;let y=e,k=0;for(;k<g;){const $=y[r[k]];if($===void 0)return null;y=$,k++}return y}const DEFAULT_MODIFIER=e=>e,DEFAULT_MESSAGE=e=>"",DEFAULT_MESSAGE_DATA_TYPE="text",DEFAULT_NORMALIZE=e=>e.length===0?"":join$1(e),DEFAULT_INTERPOLATE=toDisplayString;function pluralDefault(e,n){return e=Math.abs(e),n===2?e?e>1?1:0:1:e?Math.min(e,2):0}function getPluralIndex(e){const n=isNumber(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(isNumber(e.named.count)||isNumber(e.named.n))?isNumber(e.named.count)?e.named.count:isNumber(e.named.n)?e.named.n:n:n}function normalizeNamed(e,n){n.count||(n.count=e),n.n||(n.n=e)}function createMessageContext(e={}){const n=e.locale,r=getPluralIndex(e),g=isObject$1(e.pluralRules)&&isString$1(n)&&isFunction(e.pluralRules[n])?e.pluralRules[n]:pluralDefault,y=isObject$1(e.pluralRules)&&isString$1(n)&&isFunction(e.pluralRules[n])?pluralDefault:void 0,k=he=>he[g(r,he.length,y)],$=e.list||[],V=he=>$[he],L=e.named||{};isNumber(e.pluralIndex)&&normalizeNamed(r,L);const z=he=>L[he];function j(he){const _e=isFunction(e.messages)?e.messages(he):isObject$1(e.messages)?e.messages[he]:!1;return _e||(e.parent?e.parent.message(he):DEFAULT_MESSAGE)}const ae=he=>e.modifiers?e.modifiers[he]:DEFAULT_MODIFIER,oe=isPlainObject(e.processor)&&isFunction(e.processor.normalize)?e.processor.normalize:DEFAULT_NORMALIZE,re=isPlainObject(e.processor)&&isFunction(e.processor.interpolate)?e.processor.interpolate:DEFAULT_INTERPOLATE,ue=isPlainObject(e.processor)&&isString$1(e.processor.type)?e.processor.type:DEFAULT_MESSAGE_DATA_TYPE,de={list:V,named:z,plural:k,linked:(he,..._e)=>{const[xe,Ne]=_e;let $e="text",Ce="";_e.length===1?isObject$1(xe)?(Ce=xe.modifier||Ce,$e=xe.type||$e):isString$1(xe)&&(Ce=xe||Ce):_e.length===2&&(isString$1(xe)&&(Ce=xe||Ce),isString$1(Ne)&&($e=Ne||$e));const Ie=j(he)(de),ze=$e==="vnode"&&isArray(Ie)&&Ce?Ie[0]:Ie;return Ce?ae(Ce)(ze,$e):ze},message:j,type:ue,interpolate:re,normalize:oe,values:assign$1({},$,L)};return de}let devtools=null;function setDevToolsHook(e){devtools=e}function initI18nDevTools(e,n,r){devtools&&devtools.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:n,meta:r})}const translateDevTools=createDevToolsHook("function:translate");function createDevToolsHook(e){return n=>devtools&&devtools.emit(e,n)}const CoreWarnCodes={NOT_FOUND_KEY:1,FALLBACK_TO_TRANSLATE:2,CANNOT_FORMAT_NUMBER:3,FALLBACK_TO_NUMBER_FORMAT:4,CANNOT_FORMAT_DATE:5,FALLBACK_TO_DATE_FORMAT:6,EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:7,__EXTEND_POINT__:8};function fallbackWithSimple(e,n,r){return[...new Set([r,...isArray(n)?n:isObject$1(n)?Object.keys(n):isString$1(n)?[n]:[r]])]}function fallbackWithLocaleChain(e,n,r){const g=isString$1(r)?r:DEFAULT_LOCALE,y=e;y.__localeChainCache||(y.__localeChainCache=new Map);let k=y.__localeChainCache.get(g);if(!k){k=[];let $=[r];for(;isArray($);)$=appendBlockToChain(k,$,n);const V=isArray(n)||!isPlainObject(n)?n:n.default?n.default:null;$=isString$1(V)?[V]:V,isArray($)&&appendBlockToChain(k,$,!1),y.__localeChainCache.set(g,k)}return k}function appendBlockToChain(e,n,r){let g=!0;for(let y=0;y<n.length&&isBoolean(g);y++){const k=n[y];isString$1(k)&&(g=appendLocaleToChain(e,n[y],r))}return g}function appendLocaleToChain(e,n,r){let g;const y=n.split("-");do{const k=y.join("-");g=appendItemToChain(e,k,r),y.splice(-1,1)}while(y.length&&g===!0);return g}function appendItemToChain(e,n,r){let g=!1;if(!e.includes(n)&&(g=!0,n)){g=n[n.length-1]!=="!";const y=n.replace(/!/g,"");e.push(y),(isArray(r)||isPlainObject(r))&&r[y]&&(g=r[y])}return g}const VERSION$1="9.4.1",NOT_REOSLVED=-1,DEFAULT_LOCALE="en-US",MISSING_RESOLVE_VALUE="",capitalize=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function getDefaultLinkedModifiers(){return{upper:(e,n)=>n==="text"&&isString$1(e)?e.toUpperCase():n==="vnode"&&isObject$1(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,n)=>n==="text"&&isString$1(e)?e.toLowerCase():n==="vnode"&&isObject$1(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,n)=>n==="text"&&isString$1(e)?capitalize(e):n==="vnode"&&isObject$1(e)&&"__v_isVNode"in e?capitalize(e.children):e}}let _compiler;function registerMessageCompiler(e){_compiler=e}let _resolver;function registerMessageResolver(e){_resolver=e}let _fallbacker;function registerLocaleFallbacker(e){_fallbacker=e}let _additionalMeta=null;const setAdditionalMeta=e=>{_additionalMeta=e},getAdditionalMeta=()=>_additionalMeta;let _fallbackContext=null;const setFallbackContext=e=>{_fallbackContext=e},getFallbackContext=()=>_fallbackContext;let _cid=0;function createCoreContext(e={}){const n=isFunction(e.onWarn)?e.onWarn:warn,r=isString$1(e.version)?e.version:VERSION$1,g=isString$1(e.locale)?e.locale:DEFAULT_LOCALE,y=isArray(e.fallbackLocale)||isPlainObject(e.fallbackLocale)||isString$1(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:g,k=isPlainObject(e.messages)?e.messages:{[g]:{}},$=isPlainObject(e.datetimeFormats)?e.datetimeFormats:{[g]:{}},V=isPlainObject(e.numberFormats)?e.numberFormats:{[g]:{}},L=assign$1({},e.modifiers||{},getDefaultLinkedModifiers()),z=e.pluralRules||{},j=isFunction(e.missing)?e.missing:null,ae=isBoolean(e.missingWarn)||isRegExp(e.missingWarn)?e.missingWarn:!0,oe=isBoolean(e.fallbackWarn)||isRegExp(e.fallbackWarn)?e.fallbackWarn:!0,re=!!e.fallbackFormat,ue=!!e.unresolving,le=isFunction(e.postTranslation)?e.postTranslation:null,de=isPlainObject(e.processor)?e.processor:null,he=isBoolean(e.warnHtmlMessage)?e.warnHtmlMessage:!0,_e=!!e.escapeParameter,xe=isFunction(e.messageCompiler)?e.messageCompiler:_compiler,Ne=isFunction(e.messageResolver)?e.messageResolver:_resolver||resolveWithKeyValue,$e=isFunction(e.localeFallbacker)?e.localeFallbacker:_fallbacker||fallbackWithSimple,Ce=isObject$1(e.fallbackContext)?e.fallbackContext:void 0,Ie=e,ze=isObject$1(Ie.__datetimeFormatters)?Ie.__datetimeFormatters:new Map,Ue=isObject$1(Ie.__numberFormatters)?Ie.__numberFormatters:new Map,Pt=isObject$1(Ie.__meta)?Ie.__meta:{};_cid++;const hn={version:r,cid:_cid,locale:g,fallbackLocale:y,messages:k,modifiers:L,pluralRules:z,missing:j,missingWarn:ae,fallbackWarn:oe,fallbackFormat:re,unresolving:ue,postTranslation:le,processor:de,warnHtmlMessage:he,escapeParameter:_e,messageCompiler:xe,messageResolver:Ne,localeFallbacker:$e,fallbackContext:Ce,onWarn:n,__meta:Pt};return hn.datetimeFormats=$,hn.numberFormats=V,hn.__datetimeFormatters=ze,hn.__numberFormatters=Ue,__INTLIFY_PROD_DEVTOOLS__&&initI18nDevTools(hn,r,Pt),hn}function handleMissing(e,n,r,g,y){const{missing:k,onWarn:$}=e;if(k!==null){const V=k(e,r,n,y);return isString$1(V)?V:n}else return n}function updateFallbackLocale(e,n,r){const g=e;g.__localeChainCache=new Map,e.localeFallbacker(e,r,n)}function format(e){return r=>formatParts(r,e)}function formatParts(e,n){const r=n.b||n.body;if((r.t||r.type)===1){const g=r,y=g.c||g.cases;return e.plural(y.reduce((k,$)=>[...k,formatMessageParts(e,$)],[]))}else return formatMessageParts(e,r)}function formatMessageParts(e,n){const r=n.s||n.static;if(r)return e.type==="text"?r:e.normalize([r]);{const g=(n.i||n.items).reduce((y,k)=>[...y,formatMessagePart(e,k)],[]);return e.normalize(g)}}function formatMessagePart(e,n){const r=n.t||n.type;switch(r){case 3:const g=n;return g.v||g.value;case 9:const y=n;return y.v||y.value;case 4:const k=n;return e.interpolate(e.named(k.k||k.key));case 5:const $=n;return e.interpolate(e.list($.i||$.index));case 6:const V=n,L=V.m||V.modifier;return e.linked(formatMessagePart(e,V.k||V.key),L?formatMessagePart(e,L):void 0,e.type);case 7:const z=n;return z.v||z.value;case 8:const j=n;return j.v||j.value;default:throw new Error(`unhandled node type on format message part: ${r}`)}}const code$3=CompileErrorCodes.__EXTEND_POINT__,inc$2=incrementer(code$3),CoreErrorCodes={INVALID_ARGUMENT:code$3,INVALID_DATE_ARGUMENT:inc$2(),INVALID_ISO_DATE_ARGUMENT:inc$2(),NOT_SUPPORT_NON_STRING_MESSAGE:inc$2(),__EXTEND_POINT__:inc$2()};function createCoreError(e){return createCompileError(e,null,void 0)}const defaultOnCacheKey=e=>e;let compileCache=Object.create(null);const isMessageAST=e=>isObject$1(e)&&(e.t===0||e.type===0)&&("b"in e||"body"in e);function baseCompile(e,n={}){let r=!1;const g=n.onError||defaultOnError;return n.onError=y=>{r=!0,g(y)},{...baseCompile$1(e,n),detectError:r}}const compileToFunction=(e,n)=>{if(!isString$1(e))throw createCoreError(CoreErrorCodes.NOT_SUPPORT_NON_STRING_MESSAGE);{isBoolean(n.warnHtmlMessage)&&n.warnHtmlMessage;const g=(n.onCacheKey||defaultOnCacheKey)(e),y=compileCache[g];if(y)return y;const{code:k,detectError:$}=baseCompile(e,n),V=new Function(`return ${k}`)();return $?V:compileCache[g]=V}};function compile(e,n){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&isString$1(e)){isBoolean(n.warnHtmlMessage)&&n.warnHtmlMessage;const g=(n.onCacheKey||defaultOnCacheKey)(e),y=compileCache[g];if(y)return y;const{ast:k,detectError:$}=baseCompile(e,{...n,location:!1,jit:!0}),V=format(k);return $?V:compileCache[g]=V}else{const r=e.cacheKey;if(r){const g=compileCache[r];return g||(compileCache[r]=format(e))}else return format(e)}}const NOOP_MESSAGE_FUNCTION=()=>"",isMessageFunction=e=>isFunction(e);function translate(e,...n){const{fallbackFormat:r,postTranslation:g,unresolving:y,messageCompiler:k,fallbackLocale:$,messages:V}=e,[L,z]=parseTranslateArgs(...n),j=isBoolean(z.missingWarn)?z.missingWarn:e.missingWarn,ae=isBoolean(z.fallbackWarn)?z.fallbackWarn:e.fallbackWarn,oe=isBoolean(z.escapeParameter)?z.escapeParameter:e.escapeParameter,re=!!z.resolvedMessage,ue=isString$1(z.default)||isBoolean(z.default)?isBoolean(z.default)?k?L:()=>L:z.default:r?k?L:()=>L:"",le=r||ue!=="",de=isString$1(z.locale)?z.locale:e.locale;oe&&escapeParams(z);let[he,_e,xe]=re?[L,de,V[de]||{}]:resolveMessageFormat(e,L,de,$,ae,j),Ne=he,$e=L;if(!re&&!(isString$1(Ne)||isMessageAST(Ne)||isMessageFunction(Ne))&&le&&(Ne=ue,$e=Ne),!re&&(!(isString$1(Ne)||isMessageAST(Ne)||isMessageFunction(Ne))||!isString$1(_e)))return y?NOT_REOSLVED:L;let Ce=!1;const Ie=()=>{Ce=!0},ze=isMessageFunction(Ne)?Ne:compileMessageFormat(e,L,_e,Ne,$e,Ie);if(Ce)return Ne;const Ue=getMessageContextOptions(e,_e,xe,z),Pt=createMessageContext(Ue),hn=evaluateMessage(e,ze,Pt),Dt=g?g(hn,L):hn;if(__INTLIFY_PROD_DEVTOOLS__){const xn={timestamp:Date.now(),key:isString$1(L)?L:isMessageFunction(Ne)?Ne.key:"",locale:_e||(isMessageFunction(Ne)?Ne.locale:""),format:isString$1(Ne)?Ne:isMessageFunction(Ne)?Ne.source:"",message:Dt};xn.meta=assign$1({},e.__meta,getAdditionalMeta()||{}),translateDevTools(xn)}return Dt}function escapeParams(e){isArray(e.list)?e.list=e.list.map(n=>isString$1(n)?escapeHtml(n):n):isObject$1(e.named)&&Object.keys(e.named).forEach(n=>{isString$1(e.named[n])&&(e.named[n]=escapeHtml(e.named[n]))})}function resolveMessageFormat(e,n,r,g,y,k){const{messages:$,onWarn:V,messageResolver:L,localeFallbacker:z}=e,j=z(e,g,r);let ae={},oe,re=null;const ue="translate";for(let le=0;le<j.length&&(oe=j[le],ae=$[oe]||{},(re=L(ae,n))===null&&(re=ae[n]),!(isString$1(re)||isMessageAST(re)||isMessageFunction(re)));le++){const de=handleMissing(e,n,oe,k,ue);de!==n&&(re=de)}return[re,oe,ae]}function compileMessageFormat(e,n,r,g,y,k){const{messageCompiler:$,warnHtmlMessage:V}=e;if(isMessageFunction(g)){const z=g;return z.locale=z.locale||r,z.key=z.key||n,z}if($==null){const z=()=>g;return z.locale=r,z.key=n,z}const L=$(g,getCompileContext(e,r,y,g,V,k));return L.locale=r,L.key=n,L.source=g,L}function evaluateMessage(e,n,r){return n(r)}function parseTranslateArgs(...e){const[n,r,g]=e,y={};if(!isString$1(n)&&!isNumber(n)&&!isMessageFunction(n)&&!isMessageAST(n))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const k=isNumber(n)?String(n):(isMessageFunction(n),n);return isNumber(r)?y.plural=r:isString$1(r)?y.default=r:isPlainObject(r)&&!isEmptyObject(r)?y.named=r:isArray(r)&&(y.list=r),isNumber(g)?y.plural=g:isString$1(g)?y.default=g:isPlainObject(g)&&assign$1(y,g),[k,y]}function getCompileContext(e,n,r,g,y,k){return{locale:n,key:r,warnHtmlMessage:y,onError:$=>{throw k&&k($),$},onCacheKey:$=>generateFormatCacheKey(n,r,$)}}function getMessageContextOptions(e,n,r,g){const{modifiers:y,pluralRules:k,messageResolver:$,fallbackLocale:V,fallbackWarn:L,missingWarn:z,fallbackContext:j}=e,oe={locale:n,modifiers:y,pluralRules:k,messages:re=>{let ue=$(r,re);if(ue==null&&j){const[,,le]=resolveMessageFormat(j,re,n,V,L,z);ue=$(le,re)}if(isString$1(ue)||isMessageAST(ue)){let le=!1;const he=compileMessageFormat(e,re,n,ue,re,()=>{le=!0});return le?NOOP_MESSAGE_FUNCTION:he}else return isMessageFunction(ue)?ue:NOOP_MESSAGE_FUNCTION}};return e.processor&&(oe.processor=e.processor),g.list&&(oe.list=g.list),g.named&&(oe.named=g.named),isNumber(g.plural)&&(oe.pluralIndex=g.plural),oe}function datetime(e,...n){const{datetimeFormats:r,unresolving:g,fallbackLocale:y,onWarn:k,localeFallbacker:$}=e,{__datetimeFormatters:V}=e,[L,z,j,ae]=parseDateTimeArgs(...n),oe=isBoolean(j.missingWarn)?j.missingWarn:e.missingWarn;isBoolean(j.fallbackWarn)?j.fallbackWarn:e.fallbackWarn;const re=!!j.part,ue=isString$1(j.locale)?j.locale:e.locale,le=$(e,y,ue);if(!isString$1(L)||L==="")return new Intl.DateTimeFormat(ue,ae).format(z);let de={},he,_e=null;const xe="datetime format";for(let Ce=0;Ce<le.length&&(he=le[Ce],de=r[he]||{},_e=de[L],!isPlainObject(_e));Ce++)handleMissing(e,L,he,oe,xe);if(!isPlainObject(_e)||!isString$1(he))return g?NOT_REOSLVED:L;let Ne=`${he}__${L}`;isEmptyObject(ae)||(Ne=`${Ne}__${JSON.stringify(ae)}`);let $e=V.get(Ne);return $e||($e=new Intl.DateTimeFormat(he,assign$1({},_e,ae)),V.set(Ne,$e)),re?$e.formatToParts(z):$e.format(z)}const DATETIME_FORMAT_OPTIONS_KEYS=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function parseDateTimeArgs(...e){const[n,r,g,y]=e,k={};let $={},V;if(isString$1(n)){const L=n.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!L)throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT);const z=L[3]?L[3].trim().startsWith("T")?`${L[1].trim()}${L[3].trim()}`:`${L[1].trim()}T${L[3].trim()}`:L[1].trim();V=new Date(z);try{V.toISOString()}catch{throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT)}}else if(isDate(n)){if(isNaN(n.getTime()))throw createCoreError(CoreErrorCodes.INVALID_DATE_ARGUMENT);V=n}else if(isNumber(n))V=n;else throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);return isString$1(r)?k.key=r:isPlainObject(r)&&Object.keys(r).forEach(L=>{DATETIME_FORMAT_OPTIONS_KEYS.includes(L)?$[L]=r[L]:k[L]=r[L]}),isString$1(g)?k.locale=g:isPlainObject(g)&&($=g),isPlainObject(y)&&($=y),[k.key||"",V,k,$]}function clearDateTimeFormat(e,n,r){const g=e;for(const y in r){const k=`${n}__${y}`;g.__datetimeFormatters.has(k)&&g.__datetimeFormatters.delete(k)}}function number$1(e,...n){const{numberFormats:r,unresolving:g,fallbackLocale:y,onWarn:k,localeFallbacker:$}=e,{__numberFormatters:V}=e,[L,z,j,ae]=parseNumberArgs(...n),oe=isBoolean(j.missingWarn)?j.missingWarn:e.missingWarn;isBoolean(j.fallbackWarn)?j.fallbackWarn:e.fallbackWarn;const re=!!j.part,ue=isString$1(j.locale)?j.locale:e.locale,le=$(e,y,ue);if(!isString$1(L)||L==="")return new Intl.NumberFormat(ue,ae).format(z);let de={},he,_e=null;const xe="number format";for(let Ce=0;Ce<le.length&&(he=le[Ce],de=r[he]||{},_e=de[L],!isPlainObject(_e));Ce++)handleMissing(e,L,he,oe,xe);if(!isPlainObject(_e)||!isString$1(he))return g?NOT_REOSLVED:L;let Ne=`${he}__${L}`;isEmptyObject(ae)||(Ne=`${Ne}__${JSON.stringify(ae)}`);let $e=V.get(Ne);return $e||($e=new Intl.NumberFormat(he,assign$1({},_e,ae)),V.set(Ne,$e)),re?$e.formatToParts(z):$e.format(z)}const NUMBER_FORMAT_OPTIONS_KEYS=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function parseNumberArgs(...e){const[n,r,g,y]=e,k={};let $={};if(!isNumber(n))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const V=n;return isString$1(r)?k.key=r:isPlainObject(r)&&Object.keys(r).forEach(L=>{NUMBER_FORMAT_OPTIONS_KEYS.includes(L)?$[L]=r[L]:k[L]=r[L]}),isString$1(g)?k.locale=g:isPlainObject(g)&&($=g),isPlainObject(y)&&($=y),[k.key||"",V,k,$]}function clearNumberFormat(e,n,r){const g=e;for(const y in r){const k=`${n}__${y}`;g.__numberFormatters.has(k)&&g.__numberFormatters.delete(k)}}initFeatureFlags$1();/*!
  * vue-i18n v9.4.1
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const VERSION="9.4.1";function initFeatureFlags(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(getGlobalThis().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(getGlobalThis().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(getGlobalThis().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1)}const code$1=CoreWarnCodes.__EXTEND_POINT__,inc$1=incrementer(code$1);inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1();const code$2=CoreErrorCodes.__EXTEND_POINT__,inc=incrementer(code$2),I18nErrorCodes={UNEXPECTED_RETURN_TYPE:code$2,INVALID_ARGUMENT:inc(),MUST_BE_CALL_SETUP_TOP:inc(),NOT_INSTALLED:inc(),NOT_AVAILABLE_IN_LEGACY_MODE:inc(),REQUIRED_VALUE:inc(),INVALID_VALUE:inc(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:inc(),NOT_INSTALLED_WITH_PROVIDE:inc(),UNEXPECTED_ERROR:inc(),NOT_COMPATIBLE_LEGACY_VUE_I18N:inc(),BRIDGE_SUPPORT_VUE_2_ONLY:inc(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:inc(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:inc(),__EXTEND_POINT__:inc()};function createI18nError(e,...n){return createCompileError(e,null,void 0)}const TranslateVNodeSymbol=makeSymbol("__translateVNode"),DatetimePartsSymbol=makeSymbol("__datetimeParts"),NumberPartsSymbol=makeSymbol("__numberParts"),SetPluralRulesSymbol=makeSymbol("__setPluralRules"),InejctWithOptionSymbol=makeSymbol("__injectWithOption"),DisposeSymbol=makeSymbol("__dispose");function handleFlatJson(e){if(!isObject$1(e))return e;for(const n in e)if(hasOwn(e,n))if(!n.includes("."))isObject$1(e[n])&&handleFlatJson(e[n]);else{const r=n.split("."),g=r.length-1;let y=e,k=!1;for(let $=0;$<g;$++){if(r[$]in y||(y[r[$]]={}),!isObject$1(y[r[$]])){k=!0;break}y=y[r[$]]}k||(y[r[g]]=e[n],delete e[n]),isObject$1(y[r[g]])&&handleFlatJson(y[r[g]])}return e}function getLocaleMessages(e,n){const{messages:r,__i18n:g,messageResolver:y,flatJson:k}=n,$=isPlainObject(r)?r:isArray(g)?{}:{[e]:{}};if(isArray(g)&&g.forEach(V=>{if("locale"in V&&"resource"in V){const{locale:L,resource:z}=V;L?($[L]=$[L]||{},deepCopy(z,$[L])):deepCopy(z,$)}else isString$1(V)&&deepCopy(JSON.parse(V),$)}),y==null&&k)for(const V in $)hasOwn($,V)&&handleFlatJson($[V]);return $}const isNotObjectOrIsArray=e=>!isObject$1(e)||isArray(e);function deepCopy(e,n){if(isNotObjectOrIsArray(e)||isNotObjectOrIsArray(n))throw createI18nError(I18nErrorCodes.INVALID_VALUE);for(const r in e)hasOwn(e,r)&&(isNotObjectOrIsArray(e[r])||isNotObjectOrIsArray(n[r])?n[r]=e[r]:deepCopy(e[r],n[r]))}function getComponentOptions(e){return e.type}function adjustI18nResources(e,n,r){let g=isObject$1(n.messages)?n.messages:{};"__i18nGlobal"in r&&(g=getLocaleMessages(e.locale.value,{messages:g,__i18n:r.__i18nGlobal}));const y=Object.keys(g);y.length&&y.forEach(k=>{e.mergeLocaleMessage(k,g[k])});{if(isObject$1(n.datetimeFormats)){const k=Object.keys(n.datetimeFormats);k.length&&k.forEach($=>{e.mergeDateTimeFormat($,n.datetimeFormats[$])})}if(isObject$1(n.numberFormats)){const k=Object.keys(n.numberFormats);k.length&&k.forEach($=>{e.mergeNumberFormat($,n.numberFormats[$])})}}}function createTextNode(e){return createVNode(Text$2,null,e,0)}const DEVTOOLS_META="__INTLIFY_META__";let composerID=0;function defineCoreMissingHandler(e){return(n,r,g,y)=>e(r,g,getCurrentInstance()||void 0,y)}const getMetaInfo=()=>{const e=getCurrentInstance();let n=null;return e&&(n=getComponentOptions(e)[DEVTOOLS_META])?{[DEVTOOLS_META]:n}:null};function createComposer(e={},n){const{__root:r,__injectWithOption:g}=e,y=r===void 0;let k=isBoolean(e.inheritLocale)?e.inheritLocale:!0;const $=ref(r&&k?r.locale.value:isString$1(e.locale)?e.locale:DEFAULT_LOCALE),V=ref(r&&k?r.fallbackLocale.value:isString$1(e.fallbackLocale)||isArray(e.fallbackLocale)||isPlainObject(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:$.value),L=ref(getLocaleMessages($.value,e)),z=ref(isPlainObject(e.datetimeFormats)?e.datetimeFormats:{[$.value]:{}}),j=ref(isPlainObject(e.numberFormats)?e.numberFormats:{[$.value]:{}});let ae=r?r.missingWarn:isBoolean(e.missingWarn)||isRegExp(e.missingWarn)?e.missingWarn:!0,oe=r?r.fallbackWarn:isBoolean(e.fallbackWarn)||isRegExp(e.fallbackWarn)?e.fallbackWarn:!0,re=r?r.fallbackRoot:isBoolean(e.fallbackRoot)?e.fallbackRoot:!0,ue=!!e.fallbackFormat,le=isFunction(e.missing)?e.missing:null,de=isFunction(e.missing)?defineCoreMissingHandler(e.missing):null,he=isFunction(e.postTranslation)?e.postTranslation:null,_e=r?r.warnHtmlMessage:isBoolean(e.warnHtmlMessage)?e.warnHtmlMessage:!0,xe=!!e.escapeParameter;const Ne=r?r.modifiers:isPlainObject(e.modifiers)?e.modifiers:{};let $e=e.pluralRules||r&&r.pluralRules,Ce;Ce=(()=>{y&&setFallbackContext(null);const la={version:VERSION,locale:$.value,fallbackLocale:V.value,messages:L.value,modifiers:Ne,pluralRules:$e,missing:de===null?void 0:de,missingWarn:ae,fallbackWarn:oe,fallbackFormat:ue,unresolving:!0,postTranslation:he===null?void 0:he,warnHtmlMessage:_e,escapeParameter:xe,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};la.datetimeFormats=z.value,la.numberFormats=j.value,la.__datetimeFormatters=isPlainObject(Ce)?Ce.__datetimeFormatters:void 0,la.__numberFormatters=isPlainObject(Ce)?Ce.__numberFormatters:void 0;const ma=createCoreContext(la);return y&&setFallbackContext(ma),ma})(),updateFallbackLocale(Ce,$.value,V.value);function ze(){return[$.value,V.value,L.value,z.value,j.value]}const Ue=computed({get:()=>$.value,set:la=>{$.value=la,Ce.locale=$.value}}),Pt=computed({get:()=>V.value,set:la=>{V.value=la,Ce.fallbackLocale=V.value,updateFallbackLocale(Ce,$.value,la)}}),hn=computed(()=>L.value),Dt=computed(()=>z.value),xn=computed(()=>j.value);function jt(){return isFunction(he)?he:null}function Vn(la){he=la,Ce.postTranslation=la}function Rn(){return le}function Tn(la){la!==null&&(de=defineCoreMissingHandler(la)),le=la,Ce.missing=de}const Ln=(la,ma,ca,pe,Oe,Ve)=>{ze();let qe;try{__INTLIFY_PROD_DEVTOOLS__&&setAdditionalMeta(getMetaInfo()),y||(Ce.fallbackContext=r?getFallbackContext():void 0),qe=la(Ce)}finally{__INTLIFY_PROD_DEVTOOLS__&&setAdditionalMeta(null),y||(Ce.fallbackContext=void 0)}if(isNumber(qe)&&qe===NOT_REOSLVED){const[Et,Lt]=ma();return r&&re?pe(r):Oe(Et)}else{if(Ve(qe))return qe;throw createI18nError(I18nErrorCodes.UNEXPECTED_RETURN_TYPE)}};function Sn(...la){return Ln(ma=>Reflect.apply(translate,null,[ma,...la]),()=>parseTranslateArgs(...la),"translate",ma=>Reflect.apply(ma.t,ma,[...la]),ma=>ma,ma=>isString$1(ma))}function An(...la){const[ma,ca,pe]=la;if(pe&&!isObject$1(pe))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);return Sn(ma,ca,assign$1({resolvedMessage:!0},pe||{}))}function In(...la){return Ln(ma=>Reflect.apply(datetime,null,[ma,...la]),()=>parseDateTimeArgs(...la),"datetime format",ma=>Reflect.apply(ma.d,ma,[...la]),()=>MISSING_RESOLVE_VALUE,ma=>isString$1(ma))}function Mn(...la){return Ln(ma=>Reflect.apply(number$1,null,[ma,...la]),()=>parseNumberArgs(...la),"number format",ma=>Reflect.apply(ma.n,ma,[...la]),()=>MISSING_RESOLVE_VALUE,ma=>isString$1(ma))}function ra(la){return la.map(ma=>isString$1(ma)||isNumber(ma)||isBoolean(ma)?createTextNode(String(ma)):ma)}const ua={normalize:ra,interpolate:la=>la,type:"vnode"};function aa(...la){return Ln(ma=>{let ca;const pe=ma;try{pe.processor=ua,ca=Reflect.apply(translate,null,[pe,...la])}finally{pe.processor=null}return ca},()=>parseTranslateArgs(...la),"translate",ma=>ma[TranslateVNodeSymbol](...la),ma=>[createTextNode(ma)],ma=>isArray(ma))}function Nn(...la){return Ln(ma=>Reflect.apply(number$1,null,[ma,...la]),()=>parseNumberArgs(...la),"number format",ma=>ma[NumberPartsSymbol](...la),()=>[],ma=>isString$1(ma)||isArray(ma))}function En(...la){return Ln(ma=>Reflect.apply(datetime,null,[ma,...la]),()=>parseDateTimeArgs(...la),"datetime format",ma=>ma[DatetimePartsSymbol](...la),()=>[],ma=>isString$1(ma)||isArray(ma))}function Zn(la){$e=la,Ce.pluralRules=$e}function ha(la,ma){const ca=isString$1(ma)?ma:$.value,pe=Hn(ca);return Ce.messageResolver(pe,la)!==null}function xa(la){let ma=null;const ca=fallbackWithLocaleChain(Ce,V.value,$.value);for(let pe=0;pe<ca.length;pe++){const Oe=L.value[ca[pe]]||{},Ve=Ce.messageResolver(Oe,la);if(Ve!=null){ma=Ve;break}}return ma}function sa(la){const ma=xa(la);return ma??(r?r.tm(la)||{}:{})}function Hn(la){return L.value[la]||{}}function bn(la,ma){L.value[la]=ma,Ce.messages=L.value}function Xn(la,ma){L.value[la]=L.value[la]||{},deepCopy(ma,L.value[la]),Ce.messages=L.value}function $n(la){return z.value[la]||{}}function kt(la,ma){z.value[la]=ma,Ce.datetimeFormats=z.value,clearDateTimeFormat(Ce,la,ma)}function At(la,ma){z.value[la]=assign$1(z.value[la]||{},ma),Ce.datetimeFormats=z.value,clearDateTimeFormat(Ce,la,ma)}function Dn(la){return j.value[la]||{}}function Qn(la,ma){j.value[la]=ma,Ce.numberFormats=j.value,clearNumberFormat(Ce,la,ma)}function oa(la,ma){j.value[la]=assign$1(j.value[la]||{},ma),Ce.numberFormats=j.value,clearNumberFormat(Ce,la,ma)}composerID++,r&&inBrowser&&(watch(r.locale,la=>{k&&($.value=la,Ce.locale=la,updateFallbackLocale(Ce,$.value,V.value))}),watch(r.fallbackLocale,la=>{k&&(V.value=la,Ce.fallbackLocale=la,updateFallbackLocale(Ce,$.value,V.value))}));const na={id:composerID,locale:Ue,fallbackLocale:Pt,get inheritLocale(){return k},set inheritLocale(la){k=la,la&&r&&($.value=r.locale.value,V.value=r.fallbackLocale.value,updateFallbackLocale(Ce,$.value,V.value))},get availableLocales(){return Object.keys(L.value).sort()},messages:hn,get modifiers(){return Ne},get pluralRules(){return $e||{}},get isGlobal(){return y},get missingWarn(){return ae},set missingWarn(la){ae=la,Ce.missingWarn=ae},get fallbackWarn(){return oe},set fallbackWarn(la){oe=la,Ce.fallbackWarn=oe},get fallbackRoot(){return re},set fallbackRoot(la){re=la},get fallbackFormat(){return ue},set fallbackFormat(la){ue=la,Ce.fallbackFormat=ue},get warnHtmlMessage(){return _e},set warnHtmlMessage(la){_e=la,Ce.warnHtmlMessage=la},get escapeParameter(){return xe},set escapeParameter(la){xe=la,Ce.escapeParameter=la},t:Sn,getLocaleMessage:Hn,setLocaleMessage:bn,mergeLocaleMessage:Xn,getPostTranslationHandler:jt,setPostTranslationHandler:Vn,getMissingHandler:Rn,setMissingHandler:Tn,[SetPluralRulesSymbol]:Zn};return na.datetimeFormats=Dt,na.numberFormats=xn,na.rt=An,na.te=ha,na.tm=sa,na.d=In,na.n=Mn,na.getDateTimeFormat=$n,na.setDateTimeFormat=kt,na.mergeDateTimeFormat=At,na.getNumberFormat=Dn,na.setNumberFormat=Qn,na.mergeNumberFormat=oa,na[InejctWithOptionSymbol]=g,na[TranslateVNodeSymbol]=aa,na[DatetimePartsSymbol]=En,na[NumberPartsSymbol]=Nn,na}function convertComposerOptions(e){const n=isString$1(e.locale)?e.locale:DEFAULT_LOCALE,r=isString$1(e.fallbackLocale)||isArray(e.fallbackLocale)||isPlainObject(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:n,g=isFunction(e.missing)?e.missing:void 0,y=isBoolean(e.silentTranslationWarn)||isRegExp(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,k=isBoolean(e.silentFallbackWarn)||isRegExp(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,$=isBoolean(e.fallbackRoot)?e.fallbackRoot:!0,V=!!e.formatFallbackMessages,L=isPlainObject(e.modifiers)?e.modifiers:{},z=e.pluralizationRules,j=isFunction(e.postTranslation)?e.postTranslation:void 0,ae=isString$1(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,oe=!!e.escapeParameterHtml,re=isBoolean(e.sync)?e.sync:!0;let ue=e.messages;if(isPlainObject(e.sharedMessages)){const $e=e.sharedMessages;ue=Object.keys($e).reduce((Ie,ze)=>{const Ue=Ie[ze]||(Ie[ze]={});return assign$1(Ue,$e[ze]),Ie},ue||{})}const{__i18n:le,__root:de,__injectWithOption:he}=e,_e=e.datetimeFormats,xe=e.numberFormats,Ne=e.flatJson;return{locale:n,fallbackLocale:r,messages:ue,flatJson:Ne,datetimeFormats:_e,numberFormats:xe,missing:g,missingWarn:y,fallbackWarn:k,fallbackRoot:$,fallbackFormat:V,modifiers:L,pluralRules:z,postTranslation:j,warnHtmlMessage:ae,escapeParameter:oe,messageResolver:e.messageResolver,inheritLocale:re,__i18n:le,__root:de,__injectWithOption:he}}function createVueI18n(e={},n){{const r=createComposer(convertComposerOptions(e)),{__extender:g}=e,y={id:r.id,get locale(){return r.locale.value},set locale(k){r.locale.value=k},get fallbackLocale(){return r.fallbackLocale.value},set fallbackLocale(k){r.fallbackLocale.value=k},get messages(){return r.messages.value},get datetimeFormats(){return r.datetimeFormats.value},get numberFormats(){return r.numberFormats.value},get availableLocales(){return r.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(k){},get missing(){return r.getMissingHandler()},set missing(k){r.setMissingHandler(k)},get silentTranslationWarn(){return isBoolean(r.missingWarn)?!r.missingWarn:r.missingWarn},set silentTranslationWarn(k){r.missingWarn=isBoolean(k)?!k:k},get silentFallbackWarn(){return isBoolean(r.fallbackWarn)?!r.fallbackWarn:r.fallbackWarn},set silentFallbackWarn(k){r.fallbackWarn=isBoolean(k)?!k:k},get modifiers(){return r.modifiers},get formatFallbackMessages(){return r.fallbackFormat},set formatFallbackMessages(k){r.fallbackFormat=k},get postTranslation(){return r.getPostTranslationHandler()},set postTranslation(k){r.setPostTranslationHandler(k)},get sync(){return r.inheritLocale},set sync(k){r.inheritLocale=k},get warnHtmlInMessage(){return r.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(k){r.warnHtmlMessage=k!=="off"},get escapeParameterHtml(){return r.escapeParameter},set escapeParameterHtml(k){r.escapeParameter=k},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(k){},get pluralizationRules(){return r.pluralRules||{}},__composer:r,t(...k){const[$,V,L]=k,z={};let j=null,ae=null;if(!isString$1($))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const oe=$;return isString$1(V)?z.locale=V:isArray(V)?j=V:isPlainObject(V)&&(ae=V),isArray(L)?j=L:isPlainObject(L)&&(ae=L),Reflect.apply(r.t,r,[oe,j||ae||{},z])},rt(...k){return Reflect.apply(r.rt,r,[...k])},tc(...k){const[$,V,L]=k,z={plural:1};let j=null,ae=null;if(!isString$1($))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const oe=$;return isString$1(V)?z.locale=V:isNumber(V)?z.plural=V:isArray(V)?j=V:isPlainObject(V)&&(ae=V),isString$1(L)?z.locale=L:isArray(L)?j=L:isPlainObject(L)&&(ae=L),Reflect.apply(r.t,r,[oe,j||ae||{},z])},te(k,$){return r.te(k,$)},tm(k){return r.tm(k)},getLocaleMessage(k){return r.getLocaleMessage(k)},setLocaleMessage(k,$){r.setLocaleMessage(k,$)},mergeLocaleMessage(k,$){r.mergeLocaleMessage(k,$)},d(...k){return Reflect.apply(r.d,r,[...k])},getDateTimeFormat(k){return r.getDateTimeFormat(k)},setDateTimeFormat(k,$){r.setDateTimeFormat(k,$)},mergeDateTimeFormat(k,$){r.mergeDateTimeFormat(k,$)},n(...k){return Reflect.apply(r.n,r,[...k])},getNumberFormat(k){return r.getNumberFormat(k)},setNumberFormat(k,$){r.setNumberFormat(k,$)},mergeNumberFormat(k,$){r.mergeNumberFormat(k,$)},getChoiceIndex(k,$){return-1}};return y.__extender=g,y}}const baseFormatProps={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function getInterpolateArg({slots:e},n){return n.length===1&&n[0]==="default"?(e.default?e.default():[]).reduce((g,y)=>[...g,...y.type===Fragment?y.children:[y]],[]):n.reduce((r,g)=>{const y=e[g];return y&&(r[g]=y()),r},{})}function getFragmentableTag(e){return Fragment}const TranslationImpl=defineComponent({name:"i18n-t",props:assign$1({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>isNumber(e)||!isNaN(e)}},baseFormatProps),setup(e,n){const{slots:r,attrs:g}=n,y=e.i18n||useI18n({useScope:e.scope,__useComponent:!0});return()=>{const k=Object.keys(r).filter(ae=>ae!=="_"),$={};e.locale&&($.locale=e.locale),e.plural!==void 0&&($.plural=isString$1(e.plural)?+e.plural:e.plural);const V=getInterpolateArg(n,k),L=y[TranslateVNodeSymbol](e.keypath,V,$),z=assign$1({},g),j=isString$1(e.tag)||isObject$1(e.tag)?e.tag:getFragmentableTag();return h$1(j,z,L)}}}),Translation=TranslationImpl;function isVNode(e){return isArray(e)&&!isString$1(e[0])}function renderFormatter(e,n,r,g){const{slots:y,attrs:k}=n;return()=>{const $={part:!0};let V={};e.locale&&($.locale=e.locale),isString$1(e.format)?$.key=e.format:isObject$1(e.format)&&(isString$1(e.format.key)&&($.key=e.format.key),V=Object.keys(e.format).reduce((oe,re)=>r.includes(re)?assign$1({},oe,{[re]:e.format[re]}):oe,{}));const L=g(e.value,$,V);let z=[$.key];isArray(L)?z=L.map((oe,re)=>{const ue=y[oe.type],le=ue?ue({[oe.type]:oe.value,index:re,parts:L}):[oe.value];return isVNode(le)&&(le[0].key=`${oe.type}-${re}`),le}):isString$1(L)&&(z=[L]);const j=assign$1({},k),ae=isString$1(e.tag)||isObject$1(e.tag)?e.tag:getFragmentableTag();return h$1(ae,j,z)}}const NumberFormatImpl=defineComponent({name:"i18n-n",props:assign$1({value:{type:Number,required:!0},format:{type:[String,Object]}},baseFormatProps),setup(e,n){const r=e.i18n||useI18n({useScope:"parent",__useComponent:!0});return renderFormatter(e,n,NUMBER_FORMAT_OPTIONS_KEYS,(...g)=>r[NumberPartsSymbol](...g))}}),NumberFormat=NumberFormatImpl,DatetimeFormatImpl=defineComponent({name:"i18n-d",props:assign$1({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},baseFormatProps),setup(e,n){const r=e.i18n||useI18n({useScope:"parent",__useComponent:!0});return renderFormatter(e,n,DATETIME_FORMAT_OPTIONS_KEYS,(...g)=>r[DatetimePartsSymbol](...g))}}),DatetimeFormat=DatetimeFormatImpl;function getComposer$2(e,n){const r=e;if(e.mode==="composition")return r.__getInstance(n)||e.global;{const g=r.__getInstance(n);return g!=null?g.__composer:e.global.__composer}}function vTDirective(e){const n=$=>{const{instance:V,modifiers:L,value:z}=$;if(!V||!V.$)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const j=getComposer$2(e,V.$),ae=parseValue(z);return[Reflect.apply(j.t,j,[...makeParams(ae)]),j]};return{created:($,V)=>{const[L,z]=n(V);inBrowser&&e.global===z&&($.__i18nWatcher=watch(z.locale,()=>{V.instance&&V.instance.$forceUpdate()})),$.__composer=z,$.textContent=L},unmounted:$=>{inBrowser&&$.__i18nWatcher&&($.__i18nWatcher(),$.__i18nWatcher=void 0,delete $.__i18nWatcher),$.__composer&&($.__composer=void 0,delete $.__composer)},beforeUpdate:($,{value:V})=>{if($.__composer){const L=$.__composer,z=parseValue(V);$.textContent=Reflect.apply(L.t,L,[...makeParams(z)])}},getSSRProps:$=>{const[V]=n($);return{textContent:V}}}}function parseValue(e){if(isString$1(e))return{path:e};if(isPlainObject(e)){if(!("path"in e))throw createI18nError(I18nErrorCodes.REQUIRED_VALUE,"path");return e}else throw createI18nError(I18nErrorCodes.INVALID_VALUE)}function makeParams(e){const{path:n,locale:r,args:g,choice:y,plural:k}=e,$={},V=g||{};return isString$1(r)&&($.locale=r),isNumber(y)&&($.plural=y),isNumber(k)&&($.plural=k),[n,V,$]}function apply(e,n,...r){const g=isPlainObject(r[0])?r[0]:{},y=!!g.useI18nComponentName;(isBoolean(g.globalInstall)?g.globalInstall:!0)&&([y?"i18n":Translation.name,"I18nT"].forEach($=>e.component($,Translation)),[NumberFormat.name,"I18nN"].forEach($=>e.component($,NumberFormat)),[DatetimeFormat.name,"I18nD"].forEach($=>e.component($,DatetimeFormat))),e.directive("t",vTDirective(n))}function defineMixin(e,n,r){return{beforeCreate(){const g=getCurrentInstance();if(!g)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const y=this.$options;if(y.i18n){const k=y.i18n;if(y.__i18n&&(k.__i18n=y.__i18n),k.__root=n,this===this.$root)this.$i18n=mergeToGlobal(e,k);else{k.__injectWithOption=!0,k.__extender=r.__vueI18nExtend,this.$i18n=createVueI18n(k);const $=this.$i18n;$.__extender&&($.__disposer=$.__extender(this.$i18n))}}else if(y.__i18n)if(this===this.$root)this.$i18n=mergeToGlobal(e,y);else{this.$i18n=createVueI18n({__i18n:y.__i18n,__injectWithOption:!0,__extender:r.__vueI18nExtend,__root:n});const k=this.$i18n;k.__extender&&(k.__disposer=k.__extender(this.$i18n))}else this.$i18n=e;y.__i18nGlobal&&adjustI18nResources(n,y,y),this.$t=(...k)=>this.$i18n.t(...k),this.$rt=(...k)=>this.$i18n.rt(...k),this.$tc=(...k)=>this.$i18n.tc(...k),this.$te=(k,$)=>this.$i18n.te(k,$),this.$d=(...k)=>this.$i18n.d(...k),this.$n=(...k)=>this.$i18n.n(...k),this.$tm=k=>this.$i18n.tm(k),r.__setInstance(g,this.$i18n)},mounted(){},unmounted(){const g=getCurrentInstance();if(!g)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const y=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,y.__disposer&&(y.__disposer(),delete y.__disposer,delete y.__extender),r.__deleteInstance(g),delete this.$i18n}}}function mergeToGlobal(e,n){e.locale=n.locale||e.locale,e.fallbackLocale=n.fallbackLocale||e.fallbackLocale,e.missing=n.missing||e.missing,e.silentTranslationWarn=n.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=n.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=n.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=n.postTranslation||e.postTranslation,e.warnHtmlInMessage=n.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=n.escapeParameterHtml||e.escapeParameterHtml,e.sync=n.sync||e.sync,e.__composer[SetPluralRulesSymbol](n.pluralizationRules||e.pluralizationRules);const r=getLocaleMessages(e.locale,{messages:n.messages,__i18n:n.__i18n});return Object.keys(r).forEach(g=>e.mergeLocaleMessage(g,r[g])),n.datetimeFormats&&Object.keys(n.datetimeFormats).forEach(g=>e.mergeDateTimeFormat(g,n.datetimeFormats[g])),n.numberFormats&&Object.keys(n.numberFormats).forEach(g=>e.mergeNumberFormat(g,n.numberFormats[g])),e}const I18nInjectionKey=makeSymbol("global-vue-i18n");function createI18n(e={},n){const r=__VUE_I18N_LEGACY_API__&&isBoolean(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,g=isBoolean(e.globalInjection)?e.globalInjection:!0,y=__VUE_I18N_LEGACY_API__&&r?!!e.allowComposition:!0,k=new Map,[$,V]=createGlobal(e,r),L=makeSymbol("");function z(oe){return k.get(oe)||null}function j(oe,re){k.set(oe,re)}function ae(oe){k.delete(oe)}{const oe={get mode(){return __VUE_I18N_LEGACY_API__&&r?"legacy":"composition"},get allowComposition(){return y},async install(re,...ue){if(re.__VUE_I18N_SYMBOL__=L,re.provide(re.__VUE_I18N_SYMBOL__,oe),isPlainObject(ue[0])){const he=ue[0];oe.__composerExtend=he.__composerExtend,oe.__vueI18nExtend=he.__vueI18nExtend}let le=null;!r&&g&&(le=injectGlobalFields(re,oe.global)),__VUE_I18N_FULL_INSTALL__&&apply(re,oe,...ue),__VUE_I18N_LEGACY_API__&&r&&re.mixin(defineMixin(V,V.__composer,oe));const de=re.unmount;re.unmount=()=>{le&&le(),oe.dispose(),de()}},get global(){return V},dispose(){$.stop()},__instances:k,__getInstance:z,__setInstance:j,__deleteInstance:ae};return oe}}function useI18n(e={}){const n=getCurrentInstance();if(n==null)throw createI18nError(I18nErrorCodes.MUST_BE_CALL_SETUP_TOP);if(!n.isCE&&n.appContext.app!=null&&!n.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(I18nErrorCodes.NOT_INSTALLED);const r=getI18nInstance(n),g=getGlobalComposer(r),y=getComponentOptions(n),k=getScope$1(e,y);if(__VUE_I18N_LEGACY_API__&&r.mode==="legacy"&&!e.__useComponent){if(!r.allowComposition)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_IN_LEGACY_MODE);return useI18nForLegacy(n,k,g,e)}if(k==="global")return adjustI18nResources(g,e,y),g;if(k==="parent"){let L=getComposer(r,n,e.__useComponent);return L==null&&(L=g),L}const $=r;let V=$.__getInstance(n);if(V==null){const L=assign$1({},e);"__i18n"in y&&(L.__i18n=y.__i18n),g&&(L.__root=g),V=createComposer(L),$.__composerExtend&&(V[DisposeSymbol]=$.__composerExtend(V)),setupLifeCycle($,n,V),$.__setInstance(n,V)}return V}function createGlobal(e,n,r){const g=effectScope();{const y=__VUE_I18N_LEGACY_API__&&n?g.run(()=>createVueI18n(e)):g.run(()=>createComposer(e));if(y==null)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);return[g,y]}}function getI18nInstance(e){{const n=inject(e.isCE?I18nInjectionKey:e.appContext.app.__VUE_I18N_SYMBOL__);if(!n)throw createI18nError(e.isCE?I18nErrorCodes.NOT_INSTALLED_WITH_PROVIDE:I18nErrorCodes.UNEXPECTED_ERROR);return n}}function getScope$1(e,n){return isEmptyObject(e)?"__i18n"in n?"local":"global":e.useScope?e.useScope:"local"}function getGlobalComposer(e){return e.mode==="composition"?e.global:e.global.__composer}function getComposer(e,n,r=!1){let g=null;const y=n.root;let k=getParentComponentInstance(n,r);for(;k!=null;){const $=e;if(e.mode==="composition")g=$.__getInstance(k);else if(__VUE_I18N_LEGACY_API__){const V=$.__getInstance(k);V!=null&&(g=V.__composer,r&&g&&!g[InejctWithOptionSymbol]&&(g=null))}if(g!=null||y===k)break;k=k.parent}return g}function getParentComponentInstance(e,n=!1){return e==null?null:n&&e.vnode.ctx||e.parent}function setupLifeCycle(e,n,r){onMounted(()=>{},n),onUnmounted(()=>{const g=r;e.__deleteInstance(n);const y=g[DisposeSymbol];y&&(y(),delete g[DisposeSymbol])},n)}function useI18nForLegacy(e,n,r,g={}){const y=n==="local",k=shallowRef(null);if(y&&e.proxy&&!(e.proxy.$options.i18n||e.proxy.$options.__i18n))throw createI18nError(I18nErrorCodes.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const $=isBoolean(g.inheritLocale)?g.inheritLocale:!isString$1(g.locale),V=ref(!y||$?r.locale.value:isString$1(g.locale)?g.locale:DEFAULT_LOCALE),L=ref(!y||$?r.fallbackLocale.value:isString$1(g.fallbackLocale)||isArray(g.fallbackLocale)||isPlainObject(g.fallbackLocale)||g.fallbackLocale===!1?g.fallbackLocale:V.value),z=ref(getLocaleMessages(V.value,g)),j=ref(isPlainObject(g.datetimeFormats)?g.datetimeFormats:{[V.value]:{}}),ae=ref(isPlainObject(g.numberFormats)?g.numberFormats:{[V.value]:{}}),oe=y?r.missingWarn:isBoolean(g.missingWarn)||isRegExp(g.missingWarn)?g.missingWarn:!0,re=y?r.fallbackWarn:isBoolean(g.fallbackWarn)||isRegExp(g.fallbackWarn)?g.fallbackWarn:!0,ue=y?r.fallbackRoot:isBoolean(g.fallbackRoot)?g.fallbackRoot:!0,le=!!g.fallbackFormat,de=isFunction(g.missing)?g.missing:null,he=isFunction(g.postTranslation)?g.postTranslation:null,_e=y?r.warnHtmlMessage:isBoolean(g.warnHtmlMessage)?g.warnHtmlMessage:!0,xe=!!g.escapeParameter,Ne=y?r.modifiers:isPlainObject(g.modifiers)?g.modifiers:{},$e=g.pluralRules||y&&r.pluralRules;function Ce(){return[V.value,L.value,z.value,j.value,ae.value]}const Ie=computed({get:()=>k.value?k.value.locale.value:V.value,set:bn=>{k.value&&(k.value.locale.value=bn),V.value=bn}}),ze=computed({get:()=>k.value?k.value.fallbackLocale.value:L.value,set:bn=>{k.value&&(k.value.fallbackLocale.value=bn),L.value=bn}}),Ue=computed(()=>k.value?k.value.messages.value:z.value),Pt=computed(()=>j.value),hn=computed(()=>ae.value);function Dt(){return k.value?k.value.getPostTranslationHandler():he}function xn(bn){k.value&&k.value.setPostTranslationHandler(bn)}function jt(){return k.value?k.value.getMissingHandler():de}function Vn(bn){k.value&&k.value.setMissingHandler(bn)}function Rn(bn){return Ce(),bn()}function Tn(...bn){return k.value?Rn(()=>Reflect.apply(k.value.t,null,[...bn])):Rn(()=>"")}function Ln(...bn){return k.value?Reflect.apply(k.value.rt,null,[...bn]):""}function Sn(...bn){return k.value?Rn(()=>Reflect.apply(k.value.d,null,[...bn])):Rn(()=>"")}function An(...bn){return k.value?Rn(()=>Reflect.apply(k.value.n,null,[...bn])):Rn(()=>"")}function In(bn){return k.value?k.value.tm(bn):{}}function Mn(bn,Xn){return k.value?k.value.te(bn,Xn):!1}function ra(bn){return k.value?k.value.getLocaleMessage(bn):{}}function da(bn,Xn){k.value&&(k.value.setLocaleMessage(bn,Xn),z.value[bn]=Xn)}function ua(bn,Xn){k.value&&k.value.mergeLocaleMessage(bn,Xn)}function aa(bn){return k.value?k.value.getDateTimeFormat(bn):{}}function Nn(bn,Xn){k.value&&(k.value.setDateTimeFormat(bn,Xn),j.value[bn]=Xn)}function En(bn,Xn){k.value&&k.value.mergeDateTimeFormat(bn,Xn)}function Zn(bn){return k.value?k.value.getNumberFormat(bn):{}}function ha(bn,Xn){k.value&&(k.value.setNumberFormat(bn,Xn),ae.value[bn]=Xn)}function xa(bn,Xn){k.value&&k.value.mergeNumberFormat(bn,Xn)}const sa={get id(){return k.value?k.value.id:-1},locale:Ie,fallbackLocale:ze,messages:Ue,datetimeFormats:Pt,numberFormats:hn,get inheritLocale(){return k.value?k.value.inheritLocale:$},set inheritLocale(bn){k.value&&(k.value.inheritLocale=bn)},get availableLocales(){return k.value?k.value.availableLocales:Object.keys(z.value)},get modifiers(){return k.value?k.value.modifiers:Ne},get pluralRules(){return k.value?k.value.pluralRules:$e},get isGlobal(){return k.value?k.value.isGlobal:!1},get missingWarn(){return k.value?k.value.missingWarn:oe},set missingWarn(bn){k.value&&(k.value.missingWarn=bn)},get fallbackWarn(){return k.value?k.value.fallbackWarn:re},set fallbackWarn(bn){k.value&&(k.value.missingWarn=bn)},get fallbackRoot(){return k.value?k.value.fallbackRoot:ue},set fallbackRoot(bn){k.value&&(k.value.fallbackRoot=bn)},get fallbackFormat(){return k.value?k.value.fallbackFormat:le},set fallbackFormat(bn){k.value&&(k.value.fallbackFormat=bn)},get warnHtmlMessage(){return k.value?k.value.warnHtmlMessage:_e},set warnHtmlMessage(bn){k.value&&(k.value.warnHtmlMessage=bn)},get escapeParameter(){return k.value?k.value.escapeParameter:xe},set escapeParameter(bn){k.value&&(k.value.escapeParameter=bn)},t:Tn,getPostTranslationHandler:Dt,setPostTranslationHandler:xn,getMissingHandler:jt,setMissingHandler:Vn,rt:Ln,d:Sn,n:An,tm:In,te:Mn,getLocaleMessage:ra,setLocaleMessage:da,mergeLocaleMessage:ua,getDateTimeFormat:aa,setDateTimeFormat:Nn,mergeDateTimeFormat:En,getNumberFormat:Zn,setNumberFormat:ha,mergeNumberFormat:xa};function Hn(bn){bn.locale.value=V.value,bn.fallbackLocale.value=L.value,Object.keys(z.value).forEach(Xn=>{bn.mergeLocaleMessage(Xn,z.value[Xn])}),Object.keys(j.value).forEach(Xn=>{bn.mergeDateTimeFormat(Xn,j.value[Xn])}),Object.keys(ae.value).forEach(Xn=>{bn.mergeNumberFormat(Xn,ae.value[Xn])}),bn.escapeParameter=xe,bn.fallbackFormat=le,bn.fallbackRoot=ue,bn.fallbackWarn=re,bn.missingWarn=oe,bn.warnHtmlMessage=_e}return onBeforeMount(()=>{if(e.proxy==null||e.proxy.$i18n==null)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const bn=k.value=e.proxy.$i18n.__composer;n==="global"?(V.value=bn.locale.value,L.value=bn.fallbackLocale.value,z.value=bn.messages.value,j.value=bn.datetimeFormats.value,ae.value=bn.numberFormats.value):y&&Hn(bn)}),sa}const globalExportProps=["locale","fallbackLocale","availableLocales"],globalExportMethods=["t","rt","d","n","tm","te"];function injectGlobalFields(e,n){const r=Object.create(null);return globalExportProps.forEach(y=>{const k=Object.getOwnPropertyDescriptor(n,y);if(!k)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const $=isRef(k.value)?{get(){return k.value.value},set(V){k.value.value=V}}:{get(){return k.get&&k.get()}};Object.defineProperty(r,y,$)}),e.config.globalProperties.$i18n=r,globalExportMethods.forEach(y=>{const k=Object.getOwnPropertyDescriptor(n,y);if(!k||!k.value)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${y}`,k)}),()=>{delete e.config.globalProperties.$i18n,globalExportMethods.forEach(y=>{delete e.config.globalProperties[`$${y}`]})}}initFeatureFlags();__INTLIFY_JIT_COMPILATION__?registerMessageCompiler(compile):registerMessageCompiler(compileToFunction);registerMessageResolver(resolveValue);registerLocaleFallbacker(fallbackWithLocaleChain);if(__INTLIFY_PROD_DEVTOOLS__){const e=getGlobalThis();e.__INTLIFY__=!0,setDevToolsHook(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const head_data=ref({majorVersion:1,minorVersion:0,fontRevision:65536,flags:[!0,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],created:{timestamp:Math.floor(Date.now()/1e3)+2082844800,value:Date.now()},modified:{timestamp:Math.floor(Date.now()/1e3)+2082844800,value:Date.now()},macStyle:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],lowestRecPPEM:7,fontDirectionHint:2}),hhea_data=ref({majorVersion:1,minorVersion:0,lineGap:0,caretSlopeRise:1,caretSlopeRun:0,caretOffset:0}),getEnName=e=>{let n=e;return hasChineseChar(e)&&(n=dist$1.convertToPinyin(e)),n},name_data=ref([]),os2_data=ref({version:5,usWeightClass:400,usWidthClass:5,fsType:0,ySubscriptXSize:650,ySubscriptYSize:699,ySubscriptXOffset:0,ySubscriptYOffset:140,ySuperscriptXSize:650,ySuperscriptYSize:699,ySuperscriptXOffset:0,ySuperscriptYOffset:479,yStrikeoutSize:49,yStrikeoutPosition:258,sFamilyClass:0,panose:[0,0,0,0,0,0,0,0,0,0],achVendID:"UKWN",fsSelection:[!1,!1,!1,!1,!1,!1,!0,!1,!1,!1],usMaxContext:0,usLowerOpticalPointSize:8,usUpperOpticalPointSize:72}),post_data=ref({version:196608,italicAngle:0,underlinePosition:0,underlineThickness:0,isFixedPitch:1,minMemType42:0,maxMemType42:0,minMemType1:0,maxMemType1:0}),metrics_data=ref({advanceWidth:1e3,lsb:0,rsb:0,xMin:0,yMin:0,xMax:1e3,yMax:1e3}),_hoisted_1$1f={class:"dialog-footer"},_sfc_main$1g=defineComponent({__name:"CreateFileDialog",setup(e){const{tm:n,t:r}=useI18n(),g=ref("untitled"),y=ref(1e3),k=ref(800),$=ref(-200),V=ref(!0),L=async()=>{name_data.value=[{nameID:1,nameLabel:"fontFamily",platformID:3,encodingID:1,langID:2052,value:g.value,default:!0},{nameID:1,nameLabel:"fontFamily",platformID:3,encodingID:1,langID:1033,value:g.value,default:!0},{nameID:2,nameLabel:"fontSubfamily",platformID:3,encodingID:1,langID:2052,value:"",default:!0},{nameID:2,nameLabel:"fontSubfamily",platformID:3,encodingID:1,langID:1033,value:"Regular",default:!0},{nameID:4,nameLabel:"fullName",platformID:3,encodingID:1,langID:2052,value:g.value+" ",default:!0},{nameID:4,nameLabel:"fullName",platformID:3,encodingID:1,langID:1033,value:g.value+" Regular",default:!0},{nameID:5,nameLabel:"version",platformID:3,encodingID:1,langID:2052,value:"Version 1.0",default:!0},{nameID:5,nameLabel:"version",platformID:3,encodingID:1,langID:1033,value:"Version 1.0",default:!0},{nameID:6,nameLabel:"postScriptName",platformID:3,encodingID:1,langID:2052,value:(getEnName(g.value)+"-Regular").replace(/\s/g,"").slice(0,63),default:!0},{nameID:6,nameLabel:"postScriptName",platformID:3,encodingID:1,langID:1033,value:(getEnName(g.value)+"-Regular").replace(/\s/g,"").slice(0,63),default:!0}];const ue={uuid:genUUID(),width:y.value,height:y.value,name:g.value,saved:!1,characterList:[],iconsCount:0,fontSettings:{unitsPerEm:y.value,ascender:k.value,descender:$.value,tables:{head:head_data.value,hhea:hhea_data.value,os2:os2_data.value,name:name_data.value,post:post_data.value}}},le=genUUID(),de={uuid:le,type:"text",character:{uuid:genUUID(),text:".notdef",unicode:"0",components:[]},components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},info:{gridSettings:{dx:0,dy:0,centerSquareSize:y.value/3,size:y.value,default:!0},useSkeletonGrid:!1,layout:"",layoutTree:[],metrics:{advanceWidth:Math.max(y.value,y.value),lsb:0}},script:`function script_${le.replaceAll("-","_")} (character, constants, FP) {
	//Todo something
}`};ue.characterList.push(de),addFile(ue),setSelectedFileUUID(ue.uuid),setEditStatus(Status.CharacterList),loading$1.value=!0,loaded$1.value=0,total$1.value=V.value?hei_strokes.length+20:0,router.currentRoute.value.name==="welcome"&&router.push("/editor"),setCreateFileDialogVisible(!1),V.value?await j():loading$1.value=!1},z=()=>{constants.value=[{uuid:genUUID(),name:"",type:ParameterType.Enum,value:2,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]},{uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:0,max:2},{uuid:genUUID(),name:"",type:ParameterType.Enum,value:1,options:[{value:0,label:""},{value:1,label:""}]},{uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:1,max:2},{uuid:genUUID(),name:"",type:ParameterType.Number,value:0,min:0,max:2},{uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:0,max:2},{uuid:genUUID(),name:"",type:ParameterType.Number,value:50,min:40,max:100}],constantsMap.update(constants.value)},j=async()=>{z(),await importTemplate2({useDefaultUUID:!0}),setEditStatus(Status.CharacterList);const ue=await fetch(base$1+"/templates/playground.json"),de=JSON.parse(await ue.text()).file;clearCharacterRenderList();const he=selectedFile.value.characterList.find(_e=>_e.character.text===".notdef");selectedFile.value.characterList=[],he&&(selectedFile.value.characterList.push(he),addCharacterTemplate(generateCharacterTemplate(he)));for(let _e=0;_e<de.characterList.length;_e++){loaded$1.value+=1;const xe=de.characterList[_e];if(xe.character.text===".notdef")continue;for(let $e=0;$e<xe.components.length;$e++){const Ce=xe.components[$e];Ce.type==="glyph"&&Ce.value.parameters.forEach(ze=>{const Ue=constants.value.find(Pt=>Pt.name===ze.name);Ue&&(ze.name===""&&ze.value===0||(ze.type=ParameterType.Constant,ze.value=Ue.uuid))})}const Ne=instanceCharacter(xe);addCharacterForCurrentFile(Ne),addCharacterTemplate(generateCharacterTemplate(Ne))}emitter.emit("renderPreviewCanvas"),loading$1.value=!1},ae=()=>{setCreateFileDialogVisible(!1)},oe=()=>{$.value=k.value-y.value},re=()=>{k.value=y.value+$.value};return(ue,le)=>{const de=resolveComponent("el-input"),he=resolveComponent("el-form-item"),_e=resolveComponent("el-input-number"),xe=resolveComponent("el-checkbox"),Ne=resolveComponent("el-form"),$e=resolveComponent("el-button"),Ce=resolveComponent("el-dialog");return openBlock(),createBlock(Ce,{"model-value":unref(createFileDialogVisible),class:"create-file-dialog",title:unref(n)("dialogs.addFileDialog.title"),width:"320px","before-close":ae},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_1$1f,[createVNode($e,{onPointerdown:le[5]||(le[5]=Ie=>unref(setCreateFileDialogVisible)(!1))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.addFileDialog.cancel")),1)]),_:1}),createVNode($e,{type:"primary",onPointerdown:le[6]||(le[6]=()=>L())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.addFileDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createVNode(Ne,{class:"create-file-form","label-width":"80px"},{default:withCtx(()=>[createVNode(he,{label:unref(n)("dialogs.addFileDialog.fontName")},{default:withCtx(()=>[createVNode(de,{modelValue:g.value,"onUpdate:modelValue":le[0]||(le[0]=Ie=>g.value=Ie)},null,8,["modelValue"])]),_:1},8,["label"]),createVNode(he,{label:"unitsPerEm"},{default:withCtx(()=>[createVNode(_e,{modelValue:y.value,"onUpdate:modelValue":le[1]||(le[1]=Ie=>y.value=Ie),precision:0,disabled:"true"},null,8,["modelValue"])]),_:1}),createVNode(he,{label:"ascender"},{default:withCtx(()=>[createVNode(_e,{modelValue:k.value,"onUpdate:modelValue":le[2]||(le[2]=Ie=>k.value=Ie),precision:0,onChange:oe,disabled:"true"},null,8,["modelValue"])]),_:1}),createVNode(he,{label:"descender"},{default:withCtx(()=>[createVNode(_e,{modelValue:$.value,"onUpdate:modelValue":le[3]||(le[3]=Ie=>$.value=Ie),precision:0,onChange:re,disabled:"true"},null,8,["modelValue"])]),_:1}),createVNode(he,{"label-width":0,class:"use-default-template-form-item"},{default:withCtx(()=>[createVNode(xe,{modelValue:V.value,"onUpdate:modelValue":le[4]||(le[4]=Ie=>V.value=Ie)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.addFileDialog.useDefaultTemplate")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value","title"])}}}),_hoisted_1$1e={class:"form-wrapper"},_hoisted_2$1c={class:"dialog-footer"},_sfc_main$1f=defineComponent({__name:"LanguageSettingsDialog",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=ref(g.value),k=()=>{setLanguageSettingsDialogVisible(!1)},$=()=>{g.value=y.value,setLanguageSettingsDialogVisible(!1)},V=[{value:"zh",label:""},{value:"en",label:"English"}];return(L,z)=>{const j=resolveComponent("el-option"),ae=resolveComponent("el-select"),oe=resolveComponent("el-form-item"),re=resolveComponent("el-form"),ue=resolveComponent("el-button"),le=resolveComponent("el-dialog");return openBlock(),createBlock(le,{modelValue:unref(languageSettingsDialogVisible),"onUpdate:modelValue":z[1]||(z[1]=de=>isRef(languageSettingsDialogVisible)?languageSettingsDialogVisible.value=de:null),title:unref(n)("dialogs.languageSettingsDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$1c,[createVNode(ue,{onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.languageSettingsDialog.cancel")),1)]),_:1}),createVNode(ue,{type:"primary",onPointerdown:$},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.languageSettingsDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1e,[createVNode(re,{"label-width":"80px"},{default:withCtx(()=>[createVNode(oe,{label:unref(n)("dialogs.languageSettingsDialog.label")},{default:withCtx(()=>[createVNode(ae,{modelValue:y.value,"onUpdate:modelValue":z[0]||(z[0]=de=>y.value=de),class:"edit-filter-select",placeholder:unref(n)("dialogs.languageSettingsDialog.label")},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(V,de=>createVNode(j,{key:de.value,label:de.label,value:de.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})])]),_:1},8,["modelValue","title"])}}}),_withScopeId$f=e=>(pushScopeId("data-v-95be10b9"),e=e(),popScopeId(),e),_hoisted_1$1d={class:"el-loading-spinner"},_hoisted_2$1b=_withScopeId$f(()=>createBaseVNode("svg",{class:"circular",viewBox:"0 0 50 50"},[createBaseVNode("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})],-1)),_hoisted_3$N={class:"loading-text"},_hoisted_4$H={class:"main-panel"},_hoisted_5$z={class:"items-wrapper"},_hoisted_6$w={class:"item-icon"},_hoisted_7$t={class:"item-name"},_hoisted_8$s={class:"description"},_hoisted_9$s={class:"item-icon"},_hoisted_10$q={class:"item-name"},_hoisted_11$q={class:"description"},_hoisted_12$q={class:"item-icon"},_hoisted_13$o={class:"item-name"},_hoisted_14$n={class:"description"},_hoisted_15$k={class:"item-icon"},_hoisted_16$i={class:"item-name"},_hoisted_17$g={class:"description"},_hoisted_18$e={class:"item-icon playground-icon"},_hoisted_19$e={class:"playground-main"},_hoisted_20$c={class:"playground-text"},_hoisted_21$b={class:"playground-description"},_hoisted_22$9={class:"language-settings"},svg$3=`
    <path class="path" d="" style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>
  `,_sfc_main$1e=defineComponent({__name:"Welcome",setup(e){const{t:n,locale:r}=useI18n();return onMounted(async()=>{await initGlyphEnvironment()}),(g,y)=>{const k=resolveComponent("el-progress"),$=resolveComponent("el-icon"),V=resolveComponent("font-awesome-icon"),L=resolveDirective("loading");return withDirectives((openBlock(),createElementBlock("div",{class:"welcome","element-loading-text":"","element-loading-spinner":svg$3,"element-loading-svg-view-box":"-10, -10, 50, 50","element-loading-background":"rgba(122, 122, 122, 0.8)"},[withDirectives(createBaseVNode("div",_hoisted_1$1d,[_hoisted_2$1b,createBaseVNode("div",null,toDisplayString$1(unref(loadingMsg)||unref(n)("panels.paramsPanel.loadingMsg")),1)],512),[[vShow,unref(loading$1)&&unref(total$1)===0]]),withDirectives(createBaseVNode("div",_hoisted_3$N,[createVNode(k,{"text-inside":!0,"stroke-width":20,percentage:Math.round(unref(loaded$1)/unref(total$1)*100)},null,8,["percentage"]),createBaseVNode("div",null,toDisplayString$1(unref(loadingMsg)?unref(loadingMsg)+`${Math.round(unref(loaded$1)/unref(total$1)*100)}%`:unref(n)("panels.paramsPanel.loadedMsg",{percent:Math.round(unref(loaded$1)/unref(total$1)*100)})),1)],512),[[vShow,unref(loading$1)&&unref(total$1)!=0]]),createBaseVNode("div",_hoisted_4$H,[createBaseVNode("div",_hoisted_5$z,[createBaseVNode("div",{class:"item new-project-item",onPointerdown:y[0]||(y[0]=(...z)=>unref(createFile)&&unref(createFile)(...z))},[createBaseVNode("div",_hoisted_6$w,[createVNode($,null,{default:withCtx(()=>[createVNode(unref(document_add_default))]),_:1})]),createBaseVNode("div",_hoisted_7$t,toDisplayString$1(unref(n)("welcome.new.name")),1),createBaseVNode("div",_hoisted_8$s,toDisplayString$1(unref(n)("welcome.new.description")),1)],32),createBaseVNode("div",{class:"item open-project-item",onPointerdown:y[1]||(y[1]=(...z)=>unref(openFile)&&unref(openFile)(...z))},[createBaseVNode("div",_hoisted_9$s,[createVNode($,null,{default:withCtx(()=>[createVNode(unref(folder_opened_default))]),_:1})]),createBaseVNode("div",_hoisted_10$q,toDisplayString$1(unref(n)("welcome.open.name")),1),createBaseVNode("div",_hoisted_11$q,toDisplayString$1(unref(n)("welcome.open.description")),1)],32),createBaseVNode("div",{class:"item import-font-item",onPointerdown:y[2]||(y[2]=(...z)=>unref(importFont)&&unref(importFont)(...z))},[createBaseVNode("div",_hoisted_12$q,[createVNode($,null,{default:withCtx(()=>[createVNode(unref(files_default))]),_:1})]),createBaseVNode("div",_hoisted_13$o,toDisplayString$1(unref(n)("welcome.import.name")),1),createBaseVNode("div",_hoisted_14$n,toDisplayString$1(unref(n)("welcome.import.description")),1)],32),createBaseVNode("div",{class:"item template-item",onPointerdown:y[3]||(y[3]=(...z)=>unref(importTemplate1)&&unref(importTemplate1)(...z))},[createBaseVNode("div",_hoisted_15$k,[createVNode($,null,{default:withCtx(()=>[createVNode(unref(switch_default))]),_:1})]),createBaseVNode("div",_hoisted_16$i,toDisplayString$1(unref(n)("welcome.template.name")),1),createBaseVNode("div",_hoisted_17$g,toDisplayString$1(unref(n)("welcome.template.description")),1)],32)]),createBaseVNode("div",{class:"playground-btn",onClick:y[4]||(y[4]=(...z)=>unref(openPlayground)&&unref(openPlayground)(...z))},[createBaseVNode("div",_hoisted_18$e,[createVNode($,null,{default:withCtx(()=>[createVNode(V,{icon:"fa-solid fa-gamepad"})]),_:1})]),createBaseVNode("div",_hoisted_19$e,[createBaseVNode("div",_hoisted_20$c,toDisplayString$1(unref(n)("welcome.playground.title")),1),createBaseVNode("div",_hoisted_21$b,toDisplayString$1(unref(n)("welcome.playground.description")),1)])])]),createBaseVNode("div",_hoisted_22$9,[createBaseVNode("div",{class:normalizeClass(["language-choice-item",{selected:unref(r)==="zh"}]),onClick:y[5]||(y[5]=z=>r.value="zh")},"",2),createBaseVNode("div",{class:normalizeClass(["language-choice-item",{selected:unref(r)==="en"}]),onClick:y[6]||(y[6]=z=>r.value="en")},"English",2)]),createVNode(_sfc_main$1g),createVNode(_sfc_main$1f)])),[[L,unref(loading$1)]])}}}),_export_sfc=(e,n)=>{const r=e.__vccOpts||e;for(const[g,y]of n)r[g]=y;return r},Welcome=_export_sfc(_sfc_main$1e,[["__scopeId","data-v-95be10b9"]]),dialogs={zh:{tipsDialog:{title:"",confirm:"",cancel:"",tip1:"",tip2:""},exportDialog:{title:"",confirm:"",cancel:""},exportFontDialog:{title:"",confirm:"",cancel:"",exportMsg:"",contourStorageTitle:"",contourStorageTrueTypeLabel:"TrueType(glyf)",contourStorageTrueTypeTooltip:"glyfotf",contourStorageCffLabel:"PostScript(CFF)",contourStorageCffTooltip:"CFFotf",removeAxis:""},saveDialog:{title:"",confirm:"",cancel:""},saveAsDialog:{title:"",confirm:"",cancel:""},addIconDialog:{title:"",iconName:"",confirm:"",cancel:""},addTextDialog:{title:"",confirm:"",cancel:""},addGlyphDialog:{title:"",glyphName:"",confirm:"",cancel:""},editGlyphDialog:{title:"",glyphName:"",confirm:"",cancel:""},editCharacterDialog:{title:"",glyphName:"",confirm:"",cancel:""},copyGlyphDialog:{title:"",glyphName:"",confirm:"",cancel:""},copyCharacterDialog:{title:"",characterName:"",confirm:"",cancel:""},glyphComponentDialog:{title:"",confirm:"",cancel:"",multiSelection:"",singleSelection:""},addFileDialog:{title:"",fontName:"",cancel:"",confirm:"",useDefaultTemplate:""},fontSettingsDialog:{title:"",fontName:"",cancel:"",confirm:"",nameTableTip:"name",addItem:"",moreSettings:""},preferenceDialog:{title:"",background:{background:"",style:"",color:"",transparent:""},mesh:{mesh:"",style:"",none:"",mi:"",precision:"",layout:""},render:{render:"",style:"",contour:"",color:""},cancel:"",confirm:""},languageSettingsDialog:{title:"",label:"",cancel:"",confirm:""},importTemplatesDialog:{title:"",cancel:"",confirm:""},selectGlobalParamDialog:{title:"",cancel:"",confirm:"",globalParam:""},setAsGlobalParamDialog:{title:"",cancel:"",confirm:"",paramName:""}},en:{tipsDialog:{title:"Tips",confirm:"Confirm",cancel:"Cancel",tip1:"Closing the file will result in the loss of unsaved data. Are you sure you want to close?",tip2:"Saving the project file on the web will store the project in the browser's local cache and not in the cloud. If the user clears the local cache, the project data will be deleted. Are you sure you want to save the project in the cache?"},exportDialog:{title:"Export Project",confirm:"Confirm",cancel:"Cancel",exportMsg:"Please select items included in exported file:"},exportFontDialog:{title:"Export Font",confirm:"Confirm",cancel:"Cancel",contourStorageTitle:"Outline Storage Method",contourStorageTrueTypeLabel:"TrueType outlines (glyf table)",contourStorageTrueTypeTooltip:"Use the glyf table to store outline data and export the font as OTF.",contourStorageCffLabel:"PostScript outlines (CFF table)",contourStorageCffTooltip:"Use the CFF table to store outline data and export the font as OTF.",removeAxis:"Remove Axis"},saveDialog:{title:"Save Project",confirm:"Confirm",cancel:"Cancel"},saveAsDialog:{title:"Save As Project",confirm:"Confirm",cancel:"Cancel"},addIconDialog:{title:"Add Icon",iconName:"Icon Name",confirm:"Confirm",cancel:"Cancel"},addTextDialog:{title:"Add Character",confirm:"Confirm",cancel:"Cancel"},addGlyphDialog:{title:"Add Glyph",glyphName:"Glyph Name",confirm:"Confirm",cancel:"Cancel"},editGlyphDialog:{title:"Edit Glyph Name",glyphName:"Glyph Name",confirm:"Confirm",cancel:"Cancel"},editCharacterDialog:{title:"Edit Character",glyphName:"Character",confirm:"Confirm",cancel:"Cancel"},copyGlyphDialog:{title:"Copy Glyph",glyphName:"Glyph Name",confirm:"Confirm",cancel:"Cancel"},copyCharacterDialog:{title:"Copy Character",characterName:"New Character",confirm:"Confirm",cancel:"Cancel"},glyphComponentDialog:{title:"Add Glyph Component",confirm:"Confirm",cancel:"Cancel",multiSelection:"Multiple-Select",singleSelection:"Single-Select"},addFileDialog:{title:"New Font",fontName:"Font Name",cancel:"Cancel",confirm:"Confirm",useDefaultTemplate:"Import Default Template"},fontSettingsDialog:{title:"Font Settings",fontName:"Font Name",cancel:"Cancel",confirm:"Confirm",nameTableTip:"The name table defines font-related string information for different language environments.",addItem:"Add Item",moreSettings:"More Settings"},preferenceDialog:{title:"Preference",background:{background:"Background",style:"Style",color:"Color",transparent:"Transparent"},mesh:{mesh:"Mesh",style:"Style",none:"None",mi:"Mi",precision:"Pricision",layout:"Layout"},render:{render:"Render",style:"Style",contour:"Contour",color:"Color"},cancel:"Cancel",confirm:"Confirm"},languageSettingsDialog:{title:"Language Settings",label:"Language",cancel:"Cancel",confirm:"Confirm"},importTemplatesDialog:{title:"Import Templates",cancel:"Cancel",confirm:"Confirm"},selectGlobalParamDialog:{title:"Select Global Parameter",cancel:"Cancel",confirm:"Confirm",globalParam:"Global Parameter"},setAsGlobalParamDialog:{title:"Set As Global Parameter",cancel:"Cancel",confirm:"Confirm",paramName:"Parameter Name"}}},panels={zh:{filter:{all:"",font:""},view:"",componentList:{menu:{cut:"",copy:"",paste:"",delete:""}},viewList:{thumbnail:{title:"",description:""},bitmap:{title:"",description:""},contours:{title:"",description:""},curves:{title:"",description:""},preview:{title:"",description:""}},paramsPanel:{componentName:{title:"",label:""},transform:{title:"",x:"X",y:"Y",w:"W",h:"H",rotation:"",flipX:"",flipY:""},opacity:{title:"",opacity:""},editMode:{title:"",label:""},transformToCurve:{title:"",label:""},layout:{title:"",add:"",modify:"",type:"",null:"",rect:""},params:{title:""},joints:{title:""},fillColor:{title:"",label:""},formatComponent:{title:"",button:"",confirmMsg:""},layoutEditing:{title:"",interactive:"",draggable:"",draggableOption:"",dragOption:"",dragOptionNone:"",dragOptionDefault:"",dragOptionLayout:"",globalParam:"",cancelGlobalParam:"",setAsGlobalParam:"",selectGlobalParam:"",updateGlobalParam:"",applyGridTransform:"",resetGridTransform:"",applyMetricsTransform:"",resetMetricsTransform:"",applyGridConfirmMsg:"",loadingMsg:"",loadedMsg:"{percent}%"},interactive:"",draggable:"",draggableOption:"",dragOption:"",dragOptionNone:"",dragOptionDefault:"",dragOptionLayout:"",globalParam:"",cancelGlobalParam:"",setAsGlobalParam:"",selectGlobalParam:"",updateGlobalParam:"",applyGridTransform:"",resetGridTransform:"",applyMetricsTransform:"",resetMetricsTransform:"",applyGridConfirmMsg:"",loadingMsg:"",loadedMsg:"{percent}%"},picEditPanel:{cancel:"",confirm:"",remove:"",reset:"",edit:"",step1:{title:"",tip:"",localBrush:"",brush:""},step2:{title:"",content:""},step3:{title:"",maxError:"",dropThresholding:""},step4:{title:"",content:""}},settingsPanel:{background:{background:"",style:"",color:"",transparent:""},mesh:{mesh:"",style:"",none:"",mi:"",precision:"",layout:""},render:{render:"",style:"",contour:"",black:"",color:"",title:""}},bottomBar:{reset:"",coords:""}},en:{filter:{all:"All Componnents",font:"Font COmponnents"},view:"View",componentList:{menu:{cut:"Cut",copy:"Copy",paste:"Paste",delete:"Delete"}},viewList:{thumbnail:{title:"Picture Thumbnail",description:"Thumbnail of original picture"},bitmap:{title:"Bitmap",description:"Bitmap picture after thresholding processing"},contours:{title:"Contours",description:"Contours extracted from picture"},curves:{title:"Curves",description:"Curves fitted from contours"},preview:{title:"Preview",description:"Components preview"}},paramsPanel:{componentName:{title:"Component Name",label:"Name"},transform:{title:"Transform",x:"X",y:"Y",w:"W",h:"H",rotation:"Rotation",flipX:"flipX",flipY:"flipY"},opacity:{title:"Style",opacity:"Opacity"},editMode:{title:"Edit Mode",label:"Open"},transformToCurve:{title:"Transform To Pen Curve",label:"Confirm to transform"},layout:{title:"Layout",add:"Add Layout",modify:"Modify Layout",type:"Type",null:"Empty Layout",rect:"Rect Layout"},params:{title:"Parameters"},joints:{title:"Key Points"},fillColor:{title:"Fill Color",label:"Color"},formatComponent:{title:"Format Component",button:"Format Glyph Component",confirmMsg:"Formatting the glyph component will convert it to a normal pen component, losing parameterization, and this action cannot be undone. Do you want to proceed with formatting?"},layoutEditing:{title:"Layout Editing",interactive:"Interactive Settings",draggable:"Draggable",draggableOption:"Option",dragOption:"Reference",dragOptionNone:"None",dragOptionDefault:"Default Punctuation",dragOptionLayout:"Layout Proportion",globalParam:"Global Parameter",cancelGlobalParam:"Clear Global Parameter",setAsGlobalParam:"Set as Global Parameter",selectGlobalParam:"Select Global Parameter",updateGlobalParam:"Update Global Parameter",applyGridTransform:"Apply Grid Transform",resetGridTransform:"Reset Grid Transform",applyGridConfirmMsg:"Apply grid tansform needs to format all glyph components, and this action cannot be undone. Do you want to proceed transform?",applyMetricsTransform:"Apply Metrics Transform",resetMetricsTransform:"Reset Metrics Transform",loadingMsg:"Loading, please wait...",loadedMsg:"Loading in progress ({percent}% completed)"},interactive:"Interactive Settings",draggable:"Draggable",draggableOption:"Option",dragOption:"Reference",dragOptionNone:"None",dragOptionDefault:"Default Punctuation",dragOptionLayout:"Layout Proportion",globalParam:"Global Parameter",cancelGlobalParam:"Clear Global Parameter",setAsGlobalParam:"Set as Global Parameter",selectGlobalParam:"Select Global Parameter",updateGlobalParam:"Update Global Parameter",applyGridTransform:"Apply Grid Transform",resetGridTransform:"Reset Grid Transform",applyMetricsTransform:"Apply Metrics Transform",resetMetricsTransform:"Reset Metrics Transform",applyGridConfirmMsg:"Apply grid tansform needs to format all glyph components, and this action cannot be undone. Do you want to proceed transform?",loadingMsg:"Loading, please wait...",loadedMsg:"Loading in progress ({percent}% completed)"},picEditPanel:{cancel:"Cancel",confirm:"Confirm",remove:"Delete",reset:"Reset",edit:"Edit",step1:{title:"Step 1: Bitmap Thresholding",tip:"The effect is poor? Try",localBrush:"Local Brush",brush:"Brush"},step2:{title:"Step 2: Extract Contours",content:"Extract contours accordding to step 1's result"},step3:{title:"Step 3: Fit Curve",maxError:"Smoothing",dropThresholding:"Filter"},step4:{title:"Step 4: Fill Color",content:"Auto-fill with black color"}},settingsPanel:{background:{background:"Background",style:"Style",color:"Color",transparent:"Transparent"},mesh:{mesh:"Mesh",style:"Style",none:"None",mi:"Mi",precision:"Pricision",layout:"Layout"},render:{render:"Render",style:"Style",contour:"Contour",black:"Black",color:"Color",title:"Preview Style"}},bottomBar:{reset:"Reset",coords:"Coords"}}},menus={zh:{app:"",about:"",file:{file:"",new:"",open:"",save:"",saveas:"",clear:"",export:"",sync_data:""},edit:{edit:"",undo:"",redo:"",cut:"",copy:"",paste:"",delete:""},import:{import:"",font:"",glyph:"",picture:"",svg:"SVG"},export:{export:"",font:"",var_font:"",color_font:"",glyph:"",jpeg:"JPEG",png:"PNG",svg:"SVG"},char:{char:"",character:"",icon:""},settings:{settings:"",font:"",preference:"",language:""},templates:{templates:"",test1:"1",test2:"",test3:"",test4:"",test5:"",test6:"",test7:"",test8:"",digits:"",letters:""},tools:{remove_overlap:"",tools:"",format_all_characters:"",format_current_character:""}},en:{app:"FontPlayer",about:"about",file:{file:"File",new:"New File",open:"Open File",save:"Save",saveas:"Save As",clear:"Clear Cache",export:"Export Project",sync_data:"Sync Data"},edit:{edit:"Edit",undo:"Undo",redo:"Redo",cut:"Cut",copy:"Copy",paste:"Paste",delete:"Delete"},import:{import:"Import",font:"Import Font",glyph:"Import Glyph",picture:"Import From Picture",svg:"Import SVG"},export:{export:"Export",font:"Export Font",var_font:"Export Variable Font",color_font:"Export Color Font",glyph:"Export Glyph",jpeg:"Export JPEG",png:"Export PNG",svg:"Export SVG"},char:{char:"Char",character:"Add Character",icon:"Add Icon"},settings:{settings:"Settings",font:"Font Settings",preference:"Preference",language:"Language"},templates:{templates:"Templates",test1:"template 1",test2:"template 2",test3:"template 3",test4:"template 4",test5:"template 5",test6:"template 6",test7:"template 7",test8:"template 8",digits:"Digits Template",letters:"Letters Template"},tools:{remove_overlap:"remove_overlap",tools:"Tools",format_all_characters:"Format All Characters",format_current_character:"Format Current Character"}}},welcome={zh:{new:{name:"",description:"web"},open:{name:"",description:"web"},import:{name:"",description:"web"},sync:{name:"",description:"web"},template:{name:"",description:""},playground:{title:"",description:""}},en:{new:{name:"New Project",description:"Create new font (or web font) project"},open:{name:"Open Project",description:"Open existed font (or web font) project"},import:{name:"Import Font",description:"Import font as project"},sync:{name:"Sync Cache",description:"Sync cache"},template:{name:"Import Template",description:"Import template that FontPlayer provides for testing"},playground:{title:"Playground",description:"Quickly create a mini font library through parameterization"}}},programming={zh:{"global-constants":"","glyph-parameters":"","glyph-layout":"","new-constant":"","new-parameter":"",joint:"",refline:"",constant:"",number:"",ring:"",enum:"",new_enum_option:"",widget:"",controlType:"",type:"",value:"",character:"",glyph:"",radical:"",comp:"",glyph_comp:"",stroke:"",reset:"",execute:"",script:"",charCounts:"",strokeCounts:"",radicalCounts:"",compCounts:"",glyphCompCounts:""},en:{"global-constants":"Global Constants","glyph-parameters":"Glyph Parameters","glyph-layout":"Glyph Layout","new-constant":"New Constant","new-parameter":"New Parameter",joint:"Joint",refline:"Ref Line",constants:"const",number:"number",ring:"RingController",enum:"Enum",new_enum_option:"New Enum Option",widget:"Widget",controlType:"Control Type",type:"Type",value:"value",character:"Character",glyph:"Glyph",radical:"Radical",comp:"Glyph",glyph_comp:"Component",stroke:"Stroke",reset:"Reset",execute:"Execute",script:"Script",charCounts:"Character",strokeCounts:"Stroke",radicalCounts:"Radical",compCounts:"Glyph",glyphCompCounts:"Components"}},messages={zh:{menus:menus.zh,dialogs:dialogs.zh,panels:panels.zh,welcome:welcome.zh,programming:programming.zh},en:{menus:menus.en,dialogs:dialogs.en,panels:panels.en,welcome:welcome.en,programming:programming.en}},i18nOptions={locale:"zh",fallbackLocale:"en",allowComposition:!0,messages},i18n=createI18n(i18nOptions),{tm}=i18n.global,web_menu=[{label:tm("menus.file.file"),key:"file",submenu:[{label:tm("menus.file.new"),key:"create-file",click:e=>{e["create-file"]()}},{label:tm("menus.file.open"),key:"open-file",click:e=>{e["open-file"]()}},{label:tm("menus.file.save"),key:"save-file",click:e=>{e["save-file"]()}},{label:tm("menus.file.clear"),key:"clear-cache",click:e=>{e["clear-cache"]()}},{label:tm("menus.file.sync_data"),key:"sync-data",click:e=>{e["sync-data"]()}},{label:tm("menus.file.export"),key:"save-as-json",click:e=>{e["save-as-json"]()}}]},{label:tm("menus.edit.edit"),key:"edit",submenu:[{label:tm("menus.edit.undo"),key:"undo",click:e=>{e.undo()}},{label:tm("menus.edit.redo"),key:"redo",click:e=>{e.redo()}},{label:tm("menus.edit.cut"),key:"cut",click:e=>{e.cut()}},{label:tm("menus.edit.copy"),key:"copy",click:e=>{e.copy()}},{label:tm("menus.edit.paste"),key:"paste",click:e=>{e.paste()}},{label:tm("menus.edit.delete"),key:"delete",click:e=>{e.delete()}}]},{label:tm("menus.import.import"),key:"import",submenu:[{label:tm("menus.import.font"),key:"import-font-file",click:e=>{e["import-font-file"]()}},{label:tm("menus.import.glyph"),key:"import-glyphs",click:e=>{e["import-glyphs"]()}},{label:tm("menus.import.picture"),key:"import-pic",click:e=>{e["import-pic"]()}},{label:tm("menus.import.svg"),key:"import-svg",click:e=>{e["import-svg"]()}}]},{label:tm("menus.export.export"),key:"export",submenu:[{label:tm("menus.export.font"),key:"export-font-file",click:e=>{e["export-font-file"]()}},{label:tm("menus.export.var_font"),key:"export-var-font-file",click:e=>{e["export-var-font-file"]()}},{label:tm("menus.export.color_font"),key:"export-color-font",click:e=>{e["export-color-font"]()}},{label:tm("menus.export.glyph"),key:"export-glyphs",click:e=>{e["export-glyphs"]()}},{label:tm("menus.export.jpeg"),key:"export-jpeg",click:e=>{e["export-jpeg"]()}},{label:tm("menus.export.png"),key:"export-png",click:e=>{e["export-png"]()}},{label:tm("menus.export.svg"),key:"export-svg",click:e=>{e["export-svg"]()}}]},{label:tm("menus.char.char"),key:"character",submenu:[{label:tm("menus.char.character"),key:"add-character",click:e=>{e["add-character"]()}},{label:tm("menus.char.icon"),key:"add-icon",click:e=>{e["add-icon"]()}}]},{label:tm("menus.settings.settings"),key:"settings",submenu:[{label:tm("menus.settings.font"),key:"font-settings",click:e=>{e["font-settings"]()}},{label:tm("menus.settings.preference"),key:"preference-settings",click:e=>{e["preference-settings"]()}},{label:tm("menus.settings.language"),key:"language-settings",click:e=>{e["language-settings"]()}}]},{label:tm("menus.templates.templates"),key:"templates",submenu:[{label:tm("menus.templates.test2"),key:"template-2",click:e=>{e["template-2"]()}},{label:tm("menus.templates.test3"),key:"template-3",click:e=>{e["template-3"]()}},{label:tm("menus.templates.test5"),key:"template-5",click:e=>{e["template-5"]()}},{label:tm("menus.templates.test6"),key:"template-6",click:e=>{e["template-6"]()}},{label:tm("menus.templates.test7"),key:"template-7",click:e=>{e["template-7"]()}},{label:tm("menus.templates.test8"),key:"template-8",click:e=>{e["template-8"]()}},{label:tm("menus.templates.digits"),key:"template-digits",click:e=>{e["template-digits"]()}},{label:tm("menus.templates.letters"),key:"template-letters",click:e=>{e["template-letters"]()}}]},{label:tm("menus.tools.tools"),key:"tools",submenu:[{label:tm("menus.tools.remove_overlap"),key:"remove_overlap",click:e=>{e.remove_overlap()}},{label:tm("menus.tools.format_all_characters"),key:"format-all-characters",click:e=>{e["format-all-characters"]()}},{label:tm("menus.tools.format_current_character"),key:"format-current-character",click:e=>{e["format-current-character"]()}}]}],traverse_web_menu=(e,n)=>n.map(g=>{const y={};y.label=g.label,y.key=g.key,g.click&&(y.click=()=>{g&&g.click&&g.click(e)});const k=g.submenu?traverse_web_menu(e,g.submenu):null;return g.submenu&&(y.submenu=k),y}),_hoisted_1$1c={key:0,class:"side-bar"},_hoisted_2$1a={class:"menu-icon-item"},_hoisted_3$M={class:"menu-icon-item-label"},_sfc_main$1d=defineComponent({__name:"SideBar",setup(e){const n=()=>!0,r=()=>editStatus.value===Status.Edit||editStatus.value===Status.Glyph,g=()=>editStatus.value===Status.Edit,y=()=>editStatus.value===Status.CharacterList||editStatus.value===Status.GlyphList||editStatus.value===Status.StrokeGlyphList||editStatus.value===Status.RadicalGlyphList||editStatus.value===Status.CompGlyphList,k=()=>editStatus.value!==Status.Edit&&editStatus.value!==Status.Glyph&&editStatus.value!==Status.Pic,$={"create-file":y,"open-file":y,"save-file":n,"clear-cache":n,"sync-data":y,"save-as-json":n,undo:r,redo:r,cut:r,copy:r,paste:r,delete:r,"import-font-file":y,"import-templates-file":y,"import-glyphs":y,"import-pic":r,"import-svg":r,"export-font-file":n,"export-var-font-file":n,"export-color-font":n,"export-glyphs":y,"export-jpeg":r,"export-png":r,"export-svg":r,"add-character":y,"add-icon":y,"font-settings":n,"preference-settings":n,"language-settings":n,"template-1":k,"template-2":k,"template-3":k,"template-4":k,"template-5":k,"template-6":k,"template-7":k,"template-8":k,"template-digits":k,"template-letters":k,remove_overlap:g,"format-all-characters":y,"format-current-character":g},V={file:app.component("Files"),edit:app.component("Edit"),import:app.component("Upload"),export:app.component("Download"),character:app.component("Tickets"),settings:app.component("Setting"),templates:app.component("List"),tools:app.component("Tools")},L=traverse_web_menu(web_handlers,web_menu),z=async j=>{web_handlers[j]&&web_handlers[j]()};return(j,ae)=>{const oe=resolveComponent("el-icon"),re=resolveComponent("el-menu-item"),ue=resolveComponent("el-sub-menu"),le=resolveComponent("el-menu"),de=resolveComponent("el-col");return unref(ENV)==="web"||unref(ENV)==="tauri"?(openBlock(),createElementBlock("div",_hoisted_1$1c,[createVNode(de,{class:"side-bar-row"},{default:withCtx(()=>[createVNode(le,{class:"el-menu side-bar",mode:"vertical",collapse:!0,onSelect:z},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(L),he=>(openBlock(),createBlock(ue,{index:he.key},{title:withCtx(()=>[createBaseVNode("div",_hoisted_2$1a,[createVNode(oe,{class:"menu-icon-item-icon"},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(V[he.key])))]),_:2},1024),createBaseVNode("div",_hoisted_3$M,toDisplayString$1(he.label),1)])]),default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(he.submenu,_e=>(openBlock(),createBlock(re,{index:_e.key,disabled:!$[_e.key]()},{default:withCtx(()=>[createTextVNode(toDisplayString$1(_e.label),1)]),_:2},1032,["index","disabled"]))),256))]),_:2},1032,["index"]))),256))]),_:1})]),_:1})])):createCommentVNode("",!0)}}}),SideBar=_export_sfc(_sfc_main$1d,[["__scopeId","data-v-6054e213"]]),toPixels=e=>{const n=document.createElement("canvas"),r=n.getContext("2d");return n.width=e.width,n.height=e.height,r?.drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height),r?.getImageData(0,0,n.width,n.height).data},reversePixels=(e,n,r)=>{const g=document.createElement("canvas"),y=g.getContext("2d");g.width=n,g.height=r;for(let $=0;$<n;$++)for(let V=0;V<r;V++){const L=(V*n+$)*4;y.fillStyle=`rgba(${255-e[L]}, ${255-e[L+1]}, ${255-e[L+2]}, ${255-e[L+3]})`,y.fillRect($,V,1,1)}return{pixels:y?.getImageData(0,0,g.width,g.height).data,canvas:g}},toBlackWhiteBitMap=(e,n,r)=>{const g=clone(e),{x:y,y:k,width:$,height:V,size:L}=r;let z=L,j=L;L<0&&(z=$,j=V);for(let ae=y;ae<y+z;ae++)for(let oe=k;oe<k+j;oe++){if(ae>$||ae<0||oe>V||oe<0)continue;const{r:re,g:ue,b:le,a:de}={r:e[(oe*$+ae)*4],g:e[(oe*$+ae)*4+1],b:e[(oe*$+ae)*4+2],a:e[(oe*$+ae)*4+3]};re>n.r||ue>n.g||le>n.b?(g[(oe*$+ae)*4]=255,g[(oe*$+ae)*4+1]=255,g[(oe*$+ae)*4+2]=255,g[(oe*$+ae)*4+3]=1):(g[(oe*$+ae)*4]=0,g[(oe*$+ae)*4+1]=0,g[(oe*$+ae)*4+2]=0,g[(oe*$+ae)*4+3]=1)}return g},genPictureComponent=async(e,n,r)=>new Promise((g,y)=>{const k=document.createElement("img");k.onload=()=>{let $=k.width,V=k.height;($>n||V>r)&&(V/r>$/n?(V=r,$=k.width/k.height*V):($=n,V=k.height/k.width*$));const L=document.createElement("canvas");L.width=$,L.height=V,L.getContext("2d").drawImage(k,0,0,k.width,k.height,0,0,$,V);const j=document.createElement("img"),ae=L.toDataURL();j.onload=()=>{const oe=toPixels(j),re={uuid:genUUID(),type:"picture",name:"picture",lock:!1,visible:!0,value:{data:ae,img:j,pixels:oe,originImg:k,pixelMode:!1},x:0,y:0,w:$,h:V,rotation:0,flipX:!1,flipY:!1,opacity:.5,usedInCharacter:!1};g(re)},j.src=ae},k.src=e}),_withScopeId$e=e=>(pushScopeId("data-v-0cad6d35"),e=e(),popScopeId(),e),_hoisted_1$1b={class:"tool-bar"},_hoisted_2$19=_withScopeId$e(()=>createBaseVNode("span",{class:"to-list-label"},"",-1)),_sfc_main$1c=defineComponent({__name:"ToolBar",setup(e){useI18n();const n=async re=>{if(re!=="picture"&&(saveState("",[StoreType.Tools],OpType.Undo),setTool(re)),re==="picture")if(saveState("",[editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo),ENV.value==="tauri"){const ue=await nativeImportFile(["jpg","png","jpeg"]),{name:le,uint8Array:de}=ue;if(!de)return;let he="";de.forEach(Ce=>{he+=String.fromCharCode(Ce)});const _e=btoa(he),Ne=`data:${le.split(".")[1]==="png"?"imge/png":"image/jpeg"};base64,${_e}`,$e=await genPictureComponent(Ne,selectedFile.value.width,selectedFile.value.height);editStatus.value===Status.Edit?addComponentForCurrentCharacterFile($e):editStatus.value===Status.Glyph&&addComponentForCurrentGlyph($e)}else{const ue=document.createElement("input");ue.setAttribute("type","file"),ue.setAttribute("style","display: none"),ue.setAttribute("accept","image/*"),ue.addEventListener("change",async le=>{const he=le.currentTarget.files;for(let _e=0;_e<he.length;_e++){const xe=window.URL.createObjectURL(he[_e]),Ne=await genPictureComponent(xe,selectedFile.value.width,selectedFile.value.height);editStatus.value===Status.Edit?addComponentForCurrentCharacterFile(Ne):editStatus.value===Status.Glyph&&addComponentForCurrentGlyph(Ne)}document.body.removeChild(ue)}),document.body.appendChild(ue),ue.click()}},r=()=>{setEditStatus(prevStatus.value)};let g=!1;const y=async()=>{if(!g){if(ENV.value==="web")editStatus.value===Status.Edit?(window.__constants=constants.value,window.__uuid=editCharacterFile.value.uuid,window.__script=editCharacterFile.value.script,window.__is_web=ENV.value==="web",window.addEventListener("message",oe),window.open(`${location.origin}${base$1}/#/character-programming-editor`,"character",`popup,width=1280,height=800,left=${(screen.width-1280)/2}`)):editStatus.value===Status.Glyph&&(window.__constants=constants.value,window.__parameters=editGlyph.value.parameters.parameters,window.__uuid=editGlyph.value.uuid,window.__script=editGlyph.value.script,window.__is_web=ENV.value==="web",window.addEventListener("message",oe),window.open(`${location.origin}${location.pathname}#/glyph-programming-editor`,"custom-glyph",`popup,width=1280,height=800,left=${(screen.width-1280)/2}`));else if(ENV.value==="tauri"){if(editStatus.value===Status.Edit){const re={url:`${location.origin}${location.pathname}#/character-programming-editor`,width:1280,height:800,x:(screen.width-1280)/2,y:(screen.height-800)/2},ue=new WebviewWindow("character-script",re);ue.once("tauri://created",async()=>{console.log("webview created")}),ue.once("tauri://error",function(le){console.log("error creating webview",le)})}else if(editStatus.value===Status.Glyph){const re={url:`${location.origin}${location.pathname}#/glyph-programming-editor`,width:1280,height:800,x:(screen.width-1280)/2,y:(screen.height-800)/2},ue=new WebviewWindow("glyph-script",re);ue.once("tauri://created",async()=>{console.log("webview created")}),ue.once("tauri://error",function(le){console.log("error creating webview",le)})}}}};let k=null,$=null,V=null,L=null,z=!1;onMounted(()=>{ENV.value==="tauri"&&(k=listen("on-webview-mounted",async re=>{editStatus.value===Status.Edit?await emit("init-data",{__constants:constants.value,__script:editCharacterFile.value.script,__isWeb:ENV.value==="web",__uuid:editCharacterFile.value.uuid}):editStatus.value===Status.Glyph&&await emit("init-data",{__constants:constants.value,__parameters:editGlyph.value.parameters.parameters,__script:editGlyph.value.script,__isWeb:ENV.value==="web",__uuid:editGlyph.value.uuid})}),$=listen("sync-info",async re=>{z||ae(),z=!0;const{__constants:ue,__parameters:le,__script:de}=re.payload;editStatus.value===Status.Glyph?(editGlyph.value.parameters.parameters=le,constants.value=ue,editGlyph.value.script=de):editStatus.value===Status.Edit&&(constants.value=ue,editCharacterFile.value.script=de)}),V=listen("execute-script",async re=>{editStatus.value===Status.Glyph?(executeScript(editGlyph.value),emitter.emit("renderGlyphPreviewCanvasByUUID",editGlyph.value.uuid),emitter.emit("renderGlyph",!0)):editStatus.value===Status.Edit&&(executeCharacterScript(editCharacterFile.value),emitter.emit("renderPreviewCanvasByUUID",editCharacterFile.value.uuid),emitter.emit("renderCharacter",!0))}),L=listen("on-webview-close",()=>{j()}))});const j=()=>{z=!1,g=!1},ae=()=>{saveState("",[editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo,{undoTip:"",redoTip:"",newRecord:!0})};onUnmounted(()=>{k&&k(),$&&$(),V&&V(),L&&L()});const oe=re=>{re.data==="sync-info"?(z||ae(),z=!0,editStatus.value===Status.Glyph?(editGlyph.value.parameters.parameters=JSON.parse(localStorage.getItem("parameters")),constants.value=JSON.parse(localStorage.getItem("constants")),editGlyph.value.script=localStorage.getItem("script")):editStatus.value===Status.Edit&&(constants.value=JSON.parse(localStorage.getItem("constants")),editCharacterFile.value.script=localStorage.getItem("script"))):re.data==="execute-script"?editStatus.value===Status.Glyph?(executeScript(editGlyph.value),emitter.emit("renderGlyphPreviewCanvasByUUID",editGlyph.value.uuid),emitter.emit("renderGlyph",!0)):editStatus.value===Status.Edit&&(executeCharacterScript(editCharacterFile.value),emitter.emit("renderPreviewCanvasByUUID",editCharacterFile.value.uuid),emitter.emit("renderCharacter",!0)):re.data==="close-window"&&j()};return(re,ue)=>{const le=resolveComponent("font-awesome-icon"),de=resolveComponent("el-icon"),he=resolveComponent("el-row");return openBlock(),createElementBlock("div",_hoisted_1$1b,[createVNode(he,{class:"tool-bar-row"},{default:withCtx(()=>[createVNode(de,{class:normalizeClass({"tool-icon":!0,selected:unref(tool)==="select"}),onPointerdown:ue[0]||(ue[0]=_e=>n("select"))},{default:withCtx(()=>[createVNode(le,{icon:"fa-solid fa-arrow-pointer"})]),_:1},8,["class"]),createVNode(de,{class:normalizeClass({"tool-icon":!0,selected:unref(tool)==="pen"}),onPointerdown:ue[1]||(ue[1]=_e=>n("pen"))},{default:withCtx(()=>[createVNode(le,{icon:"fa-solid fa-pen-nib"})]),_:1},8,["class"]),createVNode(de,{class:normalizeClass({"tool-icon":!0,selected:unref(tool)==="ellipse"}),onPointerdown:ue[2]||(ue[2]=_e=>n("ellipse"))},{default:withCtx(()=>[createVNode(le,{icon:"fa-regular fa-circle"})]),_:1},8,["class"]),createVNode(de,{class:normalizeClass({"tool-icon":!0,selected:unref(tool)==="rectangle"}),onPointerdown:ue[3]||(ue[3]=_e=>n("rectangle"))},{default:withCtx(()=>[createVNode(le,{icon:"fa-regular fa-square"})]),_:1},8,["class"]),createVNode(de,{class:normalizeClass({"tool-icon":!0,selected:unref(tool)==="polygon"}),onPointerdown:ue[4]||(ue[4]=_e=>n("polygon"))},{default:withCtx(()=>[createVNode(le,{icon:"fa-solid fa-draw-polygon"})]),_:1},8,["class"]),withDirectives(createVNode(de,{class:normalizeClass({"tool-icon":!0,selected:unref(tool)==="picture"}),onPointerdown:ue[5]||(ue[5]=_e=>n("picture"))},{default:withCtx(()=>[createVNode(le,{icon:"fa-solid fa-image"})]),_:1},8,["class"]),[[vShow,unref(editStatus)===unref(Status).Edit]]),withDirectives(createVNode(de,{class:normalizeClass({"tool-icon":!0,selected:unref(tool)==="glyph"}),onPointerdown:ue[6]||(ue[6]=_e=>glyphComponentsDialogVisible2.value=!0)},{default:withCtx(()=>[createVNode(le,{icon:["fas","font"]})]),_:1},8,["class"]),[[vShow,unref(editStatus)===unref(Status).Edit||unref(editStatus)===unref(Status).Glyph]]),withDirectives(createVNode(de,{class:"code-icon",onPointerdown:y},{default:withCtx(()=>[createVNode(le,{icon:["fas","terminal"]})]),_:1},512),[[vShow,unref(editStatus)===unref(Status).Edit||unref(editStatus)===unref(Status).Glyph]]),withDirectives(createVNode(de,{class:normalizeClass({"tool-icon":!0,selected:unref(tool)==="params"}),onPointerdown:ue[7]||(ue[7]=_e=>n("params"))},{default:withCtx(()=>[createVNode(le,{icon:["fas","sliders"]})]),_:1},8,["class"]),[[vShow,unref(editStatus)===unref(Status).Glyph]]),withDirectives(createVNode(de,{class:normalizeClass({"tool-icon":!0,selected:unref(tool)==="grid"}),onPointerdown:ue[8]||(ue[8]=_e=>n("grid"))},{default:withCtx(()=>[createVNode(le,{icon:["fas","table-cells"]})]),_:1},8,["class"]),[[vShow,unref(editStatus)===unref(Status).Edit]]),withDirectives(createVNode(de,{class:normalizeClass({"tool-icon":!0,selected:unref(tool)==="metrics"}),onPointerdown:ue[9]||(ue[9]=_e=>n("metrics"))},{default:withCtx(()=>[createVNode(le,{icon:["fas","text-width"]})]),_:1},8,["class"]),[[vShow,unref(editStatus)===unref(Status).Edit]]),createBaseVNode("div",{class:"to-list",onPointerdown:r},[createVNode(de,{class:"to-list-icon"},{default:withCtx(()=>[createVNode(unref(grid_default))]),_:1}),_hoisted_2$19],32)]),_:1})])}}}),ToolBar=_export_sfc(_sfc_main$1c,[["__scopeId","data-v-0cad6d35"]]),_hoisted_1$1a={class:"list-wrapper"},_hoisted_2$18={key:0,class:"all-components-list"},_hoisted_3$L={class:"component-item-wrapper"},_hoisted_4$G=["onDragstart","onDragover","onDragend","onDrop","onPointerdown","onContextmenu"],_hoisted_5$y={class:"name"},_hoisted_6$v={class:"tool-wrapper"},_hoisted_7$s={class:"component-menu"},_hoisted_8$r=["onPointerdown"],_hoisted_9$r=["onPointerdown"],_hoisted_10$p=["onPointerdown"],_hoisted_11$p=["onPointerdown"],_hoisted_12$p={key:0,class:"font-components-list"},_hoisted_13$n={class:"component-item-wrapper"},_hoisted_14$m=["onPointerdown"],_hoisted_15$j={class:"name"},_hoisted_16$h={class:"tool-wrapper"},_hoisted_17$f={class:"component-menu"},_hoisted_18$d=["onPointerdown"],_hoisted_19$d=["onPointerdown"],_hoisted_20$b=["onPointerdown"],_hoisted_21$a=["onPointerdown"],_sfc_main$1b=defineComponent({__name:"CharacterComponentList",setup(e){const{t:n}=useI18n(),r=reactive((()=>{const $e={};return orderedListWithItemsForCurrentCharacterFile.value.map(Ce=>{$e[Ce.uuid]=!1}),$e})()),g=ref(!1);let y="",k=-1,$=-1,V=-1;const L=($e,Ce)=>{modifyComponentForCurrentCharacterFile($e,{lock:Ce})},z=($e,Ce)=>{modifyComponentForCurrentCharacterFile($e,{visible:Ce})},j=($e,Ce,Ie)=>{Ie==="pucture"||Ie==="pressPen"||modifyComponentForCurrentCharacterFile($e,{usedInCharacter:Ce})},ae=($e,Ce)=>{let Ie=!0;(!selectedComponent.value||selectedComponent.value&&selectedComponent.value.uuid!==Ce)&&(Ie=!1),selectedComponentsUUIDs.value.indexOf(Ce)!==-1&&(Ie=!0),(selectedComponent.value==="multi"&&enableMultiSelect.value||!Ie)&&setSelectionForCurrentCharacterFile(Ce);const ze=selectedItemByUUID(editCharacterFile.value.components,Ce);if(ze.type==="glyph"&&ze.value.components&&ze.value.components.length){let Ue=!1;for(let Pt=0;Pt<ze.value.components.length;Pt++)if(ze.value.components[Pt].type==="glyph"){Ue=!0;break}Ue&&Ie&&(editCharacterFile.value.selectedComponentsTree||(editCharacterFile.value.selectedComponentsTree=[]),editCharacterFile.value.selectedComponentsTree.push(Ce),editCharacterFile.value.selectedComponentsTree.push("null"))}ze.type==="glyph"&&setGlyphDraggerTool("glyphDragger")},oe=($e,Ce)=>{y=Ce},re=($e,Ce)=>{$e.preventDefault();const Ie=orderedListForCurrentCharacterFile.value;for(let ze=0;ze<Ie.length;ze++)y===Ie[ze].uuid&&(k=ze),Ce===Ie[ze].uuid&&($=ze);$e.offsetY<$e.target.offsetHeight/2?V=$:$e.offsetY>$e.target.offsetHeight/2&&(V=$+1)},ue=($e,Ce)=>{y="",y="",k=-1,$=-1,V=-1},le=($e,Ce)=>{const Ie=clone(orderedListForCurrentCharacterFile.value);k!==$&&(Ie.splice(k,1),k<=V&&(V-=1),Ie.splice(V,0,{type:"component",uuid:y}),setOrderedListForCurrentCharacterFile(Ie))},de=$e=>{if(!selectedComponents.value||!selectedComponents.value.length){const Ce=selectedItemByUUID(editCharacterFile.value.components,$e);setClipBoard(clone(Ce)),removeComponentForCurrentCharacterFile($e)}else{let Ce=!1;if(selectedComponents.value)for(let Ie=0;Ie<selectedComponents.value?.length;Ie++)selectedComponents.value[Ie].uuid===$e&&(Ce=!0);if(Ce)setClipBoard(clone(selectedComponents.value)),selectedComponents.value.map(Ie=>{removeComponentForCurrentCharacterFile(Ie.uuid)});else{const Ie=selectedItemByUUID(editCharacterFile.value.components,$e);setClipBoard(clone(Ie)),removeComponentForCurrentCharacterFile($e)}}setSelectionForCurrentCharacterFile(""),g.value=!1,r[$e]=!1},he=$e=>{if(!selectedComponents.value||!selectedComponents.value.length){const Ce=selectedItemByUUID(editCharacterFile.value.components,$e);setClipBoard(clone(Ce))}else{let Ce=!1;if(selectedComponents.value)for(let Ie=0;Ie<selectedComponents.value?.length;Ie++)selectedComponents.value[Ie].uuid===$e&&(Ce=!0);if(Ce)setClipBoard(clone(selectedComponents.value));else{const Ie=selectedItemByUUID(editCharacterFile.value.components,$e);setClipBoard(clone(Ie))}}g.value=!1,r[$e]=!1},_e=$e=>{const Ce=clipBoard.value;let Ie=null;for(let ze=Ce.length-1;ze>=0;ze--){const Ue=clone(Ce[ze]);Ue.uuid=genUUID(),insertComponentForCurrentCharacterFile(Ue,{uuid:$e,pos:"next"}),Ie=Ue}Ie&&Ie.type==="glyph"?setGlyphDraggerTool("glyphDragger"):setTool("select"),g.value=!1,r[$e]=!1},xe=$e=>{if(!selectedComponents.value||!selectedComponents.value.length)removeComponentForCurrentCharacterFile($e);else{let Ce=!1;if(selectedComponents.value)for(let Ie=0;Ie<selectedComponents.value?.length;Ie++)selectedComponents.value[Ie].uuid===$e&&(Ce=!0);Ce?selectedComponents.value.map(Ie=>{removeComponentForCurrentCharacterFile(Ie.uuid)}):removeComponentForCurrentCharacterFile($e)}setSelectionForCurrentCharacterFile(""),g.value=!1,r[$e]=!1},Ne=($e,Ce)=>{if($e.preventDefault(),g.value)return;g.value=!0,r[Ce]=!0;const Ie=ze=>{ze.target.closest(".component.menu")||(g.value=!1,r[Ce]=!1)};document.addEventListener("mousedown",Ie)};return($e,Ce)=>{const Ie=resolveComponent("el-icon"),ze=resolveComponent("el-popover"),Ue=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("div",_hoisted_1$1a,[unref(editPanelCompFilter)==="all"?(openBlock(),createBlock(Ue,{key:0},{default:withCtx(()=>[unref(editPanelCompFilter)==="all"?(openBlock(),createElementBlock("div",_hoisted_2$18,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(orderedListWithItemsForCurrentCharacterFile),Pt=>(openBlock(),createElementBlock("div",_hoisted_3$L,[createVNode(ze,{placement:"right",width:200,trigger:"manual",visible:r[Pt.uuid]},{reference:withCtx(()=>[createBaseVNode("div",{class:normalizeClass({component:!0,selected:unref(selectedComponentsUUIDs).indexOf(Pt.uuid)!==-1}),draggable:!0,onDragstart:hn=>oe(hn,Pt.uuid),onDragover:hn=>re(hn,Pt.uuid),onDragend:hn=>ue(hn,Pt.uuid),onDrop:hn=>le(hn,Pt.uuid),onPointerdown:hn=>ae(hn,Pt.uuid),onContextmenu:hn=>Ne(hn,Pt.uuid)},[createBaseVNode("span",_hoisted_5$y,toDisplayString$1(Pt.name||Pt.type),1),createBaseVNode("span",_hoisted_6$v,[createVNode(Ie,{class:"tool-icon used-in-character",onPointerdown:hn=>j(Pt.uuid,!Pt.usedInCharacter,Pt.type)},{default:withCtx(()=>[Pt.usedInCharacter?(openBlock(),createBlock(unref(circle_check_default),{key:0})):createCommentVNode("",!0),Pt.usedInCharacter?createCommentVNode("",!0):(openBlock(),createBlock(unref(circle_close_default),{key:1}))]),_:2},1032,["onPointerdown"]),createVNode(Ie,{class:"tool-icon lock",onPointerdown:hn=>L(Pt.uuid,!Pt.lock)},{default:withCtx(()=>[Pt.lock?(openBlock(),createBlock(unref(unlock_default),{key:0})):createCommentVNode("",!0),Pt.lock?createCommentVNode("",!0):(openBlock(),createBlock(unref(lock_default),{key:1}))]),_:2},1032,["onPointerdown"]),createVNode(Ie,{class:"tool-icon visible",onPointerdown:hn=>z(Pt.uuid,!Pt.visible)},{default:withCtx(()=>[Pt.visible?(openBlock(),createBlock(unref(view_default),{key:0})):createCommentVNode("",!0),Pt.visible?createCommentVNode("",!0):(openBlock(),createBlock(unref(hide_default),{key:1}))]),_:2},1032,["onPointerdown"])])],42,_hoisted_4$G)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_7$s,[createBaseVNode("div",{class:"component-menu-item",onPointerdown:hn=>de(Pt.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.cut")),41,_hoisted_8$r),createBaseVNode("div",{class:"component-menu-item",onPointerdown:hn=>he(Pt.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.copy")),41,_hoisted_9$r),createBaseVNode("div",{class:"component-menu-item",onPointerdown:hn=>_e(Pt.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.paste")),41,_hoisted_10$p),createBaseVNode("div",{class:"component-menu-item",onPointerdown:hn=>xe(Pt.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.delete")),41,_hoisted_11$p)])]),_:2},1032,["visible"])]))),256))])):createCommentVNode("",!0)]),_:1})):createCommentVNode("",!0),unref(editPanelCompFilter)==="font"?(openBlock(),createBlock(Ue,{key:1},{default:withCtx(()=>[unref(editPanelCompFilter)==="font"?(openBlock(),createElementBlock("div",_hoisted_12$p,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(usedComponents),Pt=>(openBlock(),createElementBlock("div",_hoisted_13$n,[createVNode(ze,{placement:"right",width:200,trigger:"contextmenu"},{reference:withCtx(()=>[createBaseVNode("div",{class:normalizeClass({component:!0,selected:unref(selectedComponentsUUIDs).indexOf(Pt.uuid)!==-1}),onPointerdown:hn=>ae(hn,Pt.uuid)},[createBaseVNode("span",_hoisted_15$j,toDisplayString$1(Pt.name||Pt.type),1),createBaseVNode("span",_hoisted_16$h,[createVNode(Ie,{class:"tool-icon used-in-character",onPointerdown:hn=>j(Pt.uuid,!Pt.usedInCharacter,Pt.type)},{default:withCtx(()=>[Pt.usedInCharacter?(openBlock(),createBlock(unref(circle_check_default),{key:0})):createCommentVNode("",!0),Pt.usedInCharacter?createCommentVNode("",!0):(openBlock(),createBlock(unref(circle_close_default),{key:1}))]),_:2},1032,["onPointerdown"]),createVNode(Ie,{class:"tool-icon lock",onPointerdown:hn=>L(Pt.uuid,!Pt.lock)},{default:withCtx(()=>[Pt.lock?(openBlock(),createBlock(unref(unlock_default),{key:0})):createCommentVNode("",!0),Pt.lock?createCommentVNode("",!0):(openBlock(),createBlock(unref(lock_default),{key:1}))]),_:2},1032,["onPointerdown"]),createVNode(Ie,{class:"tool-icon visible",onPointerdown:hn=>z(Pt.uuid,!Pt.visible)},{default:withCtx(()=>[Pt.visible?(openBlock(),createBlock(unref(view_default),{key:0})):createCommentVNode("",!0),Pt.visible?createCommentVNode("",!0):(openBlock(),createBlock(unref(hide_default),{key:1}))]),_:2},1032,["onPointerdown"])])],42,_hoisted_14$m)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_17$f,[createBaseVNode("div",{class:"component-menu-item",onPointerdown:hn=>de(Pt.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.cut")),41,_hoisted_18$d),createBaseVNode("div",{class:"component-menu-item",onPointerdown:hn=>he(Pt.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.copy")),41,_hoisted_19$d),createBaseVNode("div",{class:"component-menu-item",onPointerdown:hn=>_e(Pt.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.paste")),41,_hoisted_20$b),createBaseVNode("div",{class:"component-menu-item",onPointerdown:hn=>xe(Pt.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.delete")),41,_hoisted_21$a)])]),_:2},1024)]))),256))])):createCommentVNode("",!0)]),_:1})):createCommentVNode("",!0)])}}}),CharacterComponentList=_export_sfc(_sfc_main$1b,[["__scopeId","data-v-4cbe1abd"]]),_hoisted_1$19={class:"list-wrapper"},_hoisted_2$17={key:0,class:"all-components-list"},_hoisted_3$K={class:"component-item-wrapper"},_hoisted_4$F=["onDragstart","onDragover","onDragend","onDrop","onPointerdown","onContextmenu"],_hoisted_5$x={class:"name"},_hoisted_6$u={class:"tool-wrapper"},_hoisted_7$r={class:"component-menu"},_hoisted_8$q=["onPointerdown"],_hoisted_9$q=["onPointerdown"],_hoisted_10$o=["onPointerdown"],_hoisted_11$o=["onPointerdown"],_hoisted_12$o={key:0,class:"font-components-list"},_hoisted_13$m={class:"component-item-wrapper"},_hoisted_14$l=["onPointerdown"],_hoisted_15$i={class:"name"},_hoisted_16$g={class:"tool-wrapper"},_hoisted_17$e={class:"component-menu"},_hoisted_18$c=["onPointerdown"],_hoisted_19$c=["onPointerdown"],_hoisted_20$a=["onPointerdown"],_hoisted_21$9=["onPointerdown"],_sfc_main$1a=defineComponent({__name:"GlyphComponentList",setup(e){const{t:n}=useI18n(),r=reactive((()=>{const $e={};return orderedListWithItemsForCurrentGlyph.value.map(Ce=>{$e[Ce.uuid]=!1}),$e})()),g=ref(!1);let y="",k=-1,$=-1,V=-1;const L=($e,Ce)=>{modifyComponentForCurrentGlyph($e,{lock:Ce})},z=($e,Ce)=>{modifyComponentForCurrentGlyph($e,{visible:Ce})},j=($e,Ce,Ie)=>{Ie==="pucture"||Ie==="pressPen"||modifyComponentForCurrentGlyph($e,{usedInCharacter:Ce})},ae=($e,Ce)=>{let Ie=!0;(!selectedComponent$1.value||selectedComponent$1.value&&selectedComponent$1.value.uuid!==Ce)&&(Ie=!1),selectedComponentsUUIDs$1.value.indexOf(Ce)!==-1&&(Ie=!0),!Ie&&setSelectionForCurrentGlyph(Ce);const ze=selectedItemByUUID(editGlyph.value.components,Ce);if(ze.type==="glyph"&&ze.value.components&&ze.value.components.length){let Ue=!1;for(let Pt=0;Pt<ze.value.components.length;Pt++)if(ze.value.components[Pt].type==="glyph"){Ue=!0;break}Ue&&Ie&&(editGlyph.value.selectedComponentsTree||(editGlyph.value.selectedComponentsTree=[]),editGlyph.value.selectedComponentsTree.push(Ce),editGlyph.value.selectedComponentsTree.push("null"))}else ze.type==="glyph"&&setGlyphDraggerTool("glyphDragger")},oe=($e,Ce)=>{y=Ce},re=($e,Ce)=>{$e.preventDefault();const Ie=orderedListForCurrentGlyph.value;for(let ze=0;ze<Ie.length;ze++)y===Ie[ze].uuid&&(k=ze),Ce===Ie[ze].uuid&&($=ze);$e.offsetY<$e.target.offsetHeight/2?V=$:$e.offsetY>$e.target.offsetHeight/2&&(V=$+1)},ue=($e,Ce)=>{y="",y="",k=-1,$=-1,V=-1},le=($e,Ce)=>{const Ie=clone(orderedListForCurrentGlyph.value);k!==$&&(Ie.splice(k,1),k<=V&&(V-=1),Ie.splice(V,0,{type:"component",uuid:y}),setOrderedListForCurrentGlyph(Ie))},de=$e=>{if(!selectedComponents$1.value||!selectedComponents$1.value.length){const Ce=selectedItemByUUID(editGlyph.value.components,$e);setClipBoard(clone(Ce)),removeComponentForCurrentGlyph($e)}else{let Ce=!1;if(selectedComponents$1.value)for(let Ie=0;Ie<selectedComponents$1.value?.length;Ie++)selectedComponents$1.value[Ie].uuid===$e&&(Ce=!0);if(Ce)setClipBoard(clone(selectedComponents$1.value)),selectedComponents$1.value.map(Ie=>{removeComponentForCurrentGlyph(Ie.uuid)});else{const Ie=selectedItemByUUID(editGlyph.value.components,$e);setClipBoard(clone(Ie)),removeComponentForCurrentGlyph($e)}}setSelectionForCurrentGlyph(""),g.value=!1,r[$e]=!1},he=$e=>{if(!selectedComponents$1.value||!selectedComponents$1.value.length){const Ce=selectedItemByUUID(editGlyph.value.components,$e);setClipBoard(clone(Ce))}else{let Ce=!1;if(selectedComponents$1.value)for(let Ie=0;Ie<selectedComponents$1.value?.length;Ie++)selectedComponents$1.value[Ie].uuid===$e&&(Ce=!0);if(Ce)setClipBoard(clone(selectedComponents$1.value));else{const Ie=selectedItemByUUID(editGlyph.value.components,$e);setClipBoard(clone(Ie))}}g.value=!1,r[$e]=!1},_e=$e=>{const Ce=clipBoard.value;let Ie=null;for(let ze=Ce.length-1;ze>=0;ze--){const Ue=clone(Ce[ze]);Ue.uuid=genUUID(),insertComponentForCurrentGlyph(Ue,{uuid:$e,pos:"next"}),Ie=Ue}Ie&&Ie.type==="glyph"?setGlyphDraggerTool("glyphDragger"):setTool("select"),g.value=!1,r[$e]=!1},xe=$e=>{if(r[$e]=!1,!selectedComponents$1.value||!selectedComponents$1.value.length)removeComponentForCurrentGlyph($e);else{let Ce=!1;if(selectedComponents$1.value)for(let Ie=0;Ie<selectedComponents$1.value?.length;Ie++)selectedComponents$1.value[Ie].uuid===$e&&(Ce=!0);Ce?selectedComponents$1.value.map(Ie=>{removeComponentForCurrentGlyph(Ie.uuid)}):removeComponentForCurrentGlyph($e)}setSelectionForCurrentGlyph(""),g.value=!1},Ne=($e,Ce)=>{if($e.preventDefault(),g.value)return;g.value=!0,r[Ce]=!0;const Ie=ze=>{ze.target.closest(".component.menu")||(g.value=!1,r[Ce]=!1)};document.addEventListener("mousedown",Ie)};return($e,Ce)=>{const Ie=resolveComponent("el-icon"),ze=resolveComponent("el-popover"),Ue=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("div",_hoisted_1$19,[unref(editPanelCompFilter)==="all"?(openBlock(),createBlock(Ue,{key:0},{default:withCtx(()=>[unref(editPanelCompFilter)==="all"?(openBlock(),createElementBlock("div",_hoisted_2$17,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(orderedListWithItemsForCurrentGlyph),Pt=>(openBlock(),createElementBlock("div",_hoisted_3$K,[createVNode(ze,{placement:"right",width:200,trigger:"manual",inert:"",visible:r[Pt.uuid]},{reference:withCtx(()=>[createBaseVNode("div",{class:normalizeClass({component:!0,selected:unref(selectedComponentsUUIDs$1).indexOf(Pt.uuid)!==-1}),draggable:!0,onDragstart:hn=>oe(hn,Pt.uuid),onDragover:hn=>re(hn,Pt.uuid),onDragend:hn=>ue(hn,Pt.uuid),onDrop:hn=>le(hn,Pt.uuid),onPointerdown:hn=>ae(hn,Pt.uuid),onContextmenu:hn=>Ne(hn,Pt.uuid)},[createBaseVNode("span",_hoisted_5$x,toDisplayString$1(Pt.name||Pt.type),1),createBaseVNode("span",_hoisted_6$u,[createVNode(Ie,{class:"tool-icon used-in-character",onPointerdown:hn=>j(Pt.uuid,!Pt.usedInCharacter,Pt.type)},{default:withCtx(()=>[Pt.usedInCharacter?(openBlock(),createBlock(unref(circle_check_default),{key:0})):createCommentVNode("",!0),Pt.usedInCharacter?createCommentVNode("",!0):(openBlock(),createBlock(unref(circle_close_default),{key:1}))]),_:2},1032,["onPointerdown"]),createVNode(Ie,{class:"tool-icon lock",onPointerdown:hn=>L(Pt.uuid,!Pt.lock)},{default:withCtx(()=>[Pt.lock?(openBlock(),createBlock(unref(unlock_default),{key:0})):createCommentVNode("",!0),Pt.lock?createCommentVNode("",!0):(openBlock(),createBlock(unref(lock_default),{key:1}))]),_:2},1032,["onPointerdown"]),createVNode(Ie,{class:"tool-icon visible",onPointerdown:hn=>z(Pt.uuid,!Pt.visible)},{default:withCtx(()=>[Pt.visible?(openBlock(),createBlock(unref(view_default),{key:0})):createCommentVNode("",!0),Pt.visible?createCommentVNode("",!0):(openBlock(),createBlock(unref(hide_default),{key:1}))]),_:2},1032,["onPointerdown"])])],42,_hoisted_4$F)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_7$r,[createBaseVNode("div",{class:"component-menu-item",onPointerdown:hn=>de(Pt.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.cut")),41,_hoisted_8$q),createBaseVNode("div",{class:"component-menu-item",onPointerdown:hn=>he(Pt.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.copy")),41,_hoisted_9$q),createBaseVNode("div",{class:"component-menu-item",onPointerdown:hn=>_e(Pt.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.paste")),41,_hoisted_10$o),createBaseVNode("div",{class:"component-menu-item",onPointerdown:hn=>xe(Pt.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.delete")),41,_hoisted_11$o)])]),_:2},1032,["visible"])]))),256))])):createCommentVNode("",!0)]),_:1})):createCommentVNode("",!0),unref(editPanelCompFilter)==="font"?(openBlock(),createBlock(Ue,{key:1},{default:withCtx(()=>[unref(editPanelCompFilter)==="font"?(openBlock(),createElementBlock("div",_hoisted_12$o,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(usedComponents$1),Pt=>(openBlock(),createElementBlock("div",_hoisted_13$m,[createVNode(ze,{placement:"right",width:200,trigger:"contextmenu"},{reference:withCtx(()=>[createBaseVNode("div",{class:normalizeClass({component:!0,selected:unref(selectedComponentsUUIDs$1).indexOf(Pt.uuid)!==-1}),onPointerdown:hn=>ae(hn,Pt.uuid)},[createBaseVNode("span",_hoisted_15$i,toDisplayString$1(Pt.name||Pt.type),1),createBaseVNode("span",_hoisted_16$g,[createVNode(Ie,{class:"tool-icon used-in-character",onPointerdown:hn=>j(Pt.uuid,!Pt.usedInCharacter,Pt.type)},{default:withCtx(()=>[Pt.usedInCharacter?(openBlock(),createBlock(unref(circle_check_default),{key:0})):createCommentVNode("",!0),Pt.usedInCharacter?createCommentVNode("",!0):(openBlock(),createBlock(unref(circle_close_default),{key:1}))]),_:2},1032,["onPointerdown"]),createVNode(Ie,{class:"tool-icon lock",onPointerdown:hn=>L(Pt.uuid,!Pt.lock)},{default:withCtx(()=>[Pt.lock?(openBlock(),createBlock(unref(unlock_default),{key:0})):createCommentVNode("",!0),Pt.lock?createCommentVNode("",!0):(openBlock(),createBlock(unref(lock_default),{key:1}))]),_:2},1032,["onPointerdown"]),createVNode(Ie,{class:"tool-icon visible",onPointerdown:hn=>z(Pt.uuid,!Pt.visible)},{default:withCtx(()=>[Pt.visible?(openBlock(),createBlock(unref(view_default),{key:0})):createCommentVNode("",!0),Pt.visible?createCommentVNode("",!0):(openBlock(),createBlock(unref(hide_default),{key:1}))]),_:2},1032,["onPointerdown"])])],42,_hoisted_14$l)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_17$e,[createBaseVNode("div",{class:"component-menu-item",onPointerdown:hn=>de(Pt.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.cut")),41,_hoisted_18$c),createBaseVNode("div",{class:"component-menu-item",onPointerdown:hn=>he(Pt.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.copy")),41,_hoisted_19$c),createBaseVNode("div",{class:"component-menu-item",onPointerdown:hn=>_e(Pt.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.paste")),41,_hoisted_20$a),createBaseVNode("div",{class:"component-menu-item",onPointerdown:hn=>xe(Pt.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.delete")),41,_hoisted_21$9)])]),_:2},1024)]))),256))])):createCommentVNode("",!0)]),_:1})):createCommentVNode("",!0)])}}}),GlyphComponentList=_export_sfc(_sfc_main$1a,[["__scopeId","data-v-0116a680"]]),_hoisted_1$18={class:"view-list-wrapper"},_hoisted_2$16={class:"view-thumbnail"},_hoisted_3$J={class:"view-info"},_hoisted_4$E={class:"view-title"},_hoisted_5$w={class:"view-description"},_hoisted_6$t={class:"view-thumbnail"},_hoisted_7$q={class:"view-info"},_hoisted_8$p={class:"view-title"},_hoisted_9$p={class:"view-description"},_hoisted_10$n={class:"view-thumbnail"},_hoisted_11$n=["width","height"],_hoisted_12$n={class:"view-info"},_hoisted_13$l={class:"view-title"},_hoisted_14$k={class:"view-description"},_hoisted_15$h={class:"view-thumbnail"},_hoisted_16$f=["width","height"],_hoisted_17$d={class:"view-info"},_hoisted_18$b={class:"view-title"},_hoisted_19$b={class:"view-description"},_hoisted_20$9={class:"view-thumbnail"},_hoisted_21$8=["width","height"],_hoisted_22$8={class:"view-info"},_hoisted_23$8={class:"view-title"},_hoisted_24$8={class:"view-description"},_sfc_main$19=defineComponent({__name:"ViewList",setup(e){const{t:n}=useI18n(),r=ref(null),g=ref(null),y=ref(null),k=ref(null),$=ref(null),V=()=>{const ue=editCharacterPic.value.width,le=editCharacterPic.value.height;let de=68,he=de*le/ue;he>68&&(he=68,de=he*ue/le),r.value.width=mapCanvasWidth(ue),r.value.height=mapCanvasHeight(le),r.value.style.width=`${de}px`,r.value.style.height=`${he}px`,r.value.height=mapCanvasHeight(le),g.value.width=mapCanvasWidth(ue),g.value.height=mapCanvasHeight(le),g.value.style.width=`${de}px`,g.value.style.height=`${he}px`},L=()=>{const ue=r.value.getContext("2d"),{img:le,width:de,height:he}=editCharacterPic.value,_e=le;ue.drawImage(_e,0,0,_e.width,_e.height,0,0,mapCanvasWidth(de),mapCanvasWidth(he))},z=()=>{const ue=g.value.getContext("2d"),{data:le,width:de,height:he}=bitmap.value;for(let _e=0;_e<de;_e++)for(let xe=0;xe<he;xe++){const Ne=(xe*de+_e)*4,$e=`rgba(${le[Ne]}, ${le[Ne+1]}, ${le[Ne]+2}, ${le[Ne+3]})`;ue.fillStyle=$e,ue.fillRect(mapCanvasX(_e),mapCanvasY(xe),mapCanvasWidth(1),mapCanvasHeight(1))}},j=()=>{const ue=contoursComponents.value.map(le=>{const de=clone(le);return de.value.fillColor="rgba(1, 1, 1, 0)",de});clearCanvas(y.value),renderCanvas(ue,y.value)},ae=()=>{const ue=curvesComponents.value.map(le=>{const de=clone(le);return de.value.fillColor="rgba(1, 1, 1, 0)",de});clearCanvas(k.value),renderCanvas(ue,k.value)},oe=()=>{clearCanvas($.value),renderCanvas(curvesComponents.value,$.value,{fill:!0,offset:{x:0,y:0},scale:1,forceUpdate:!1})},re=()=>{oe(),L(),z(),j(),ae()};return onMounted(()=>{V(),window.addEventListener("resize",V),re()}),watch([editCharacterPic,bitmap,contoursComponents,curvesComponents],()=>{re()}),onBeforeUnmount(()=>{window.removeEventListener("resize",V)}),(ue,le)=>(openBlock(),createElementBlock("div",_hoisted_1$18,[createBaseVNode("div",{class:"view-item-wrapper",onPointerdown:le[0]||(le[0]=de=>previewStatus.value=0)},[createBaseVNode("span",_hoisted_2$16,[createBaseVNode("canvas",{class:"view-canvas",ref_key:"thumbnailCanvas",ref:r},null,512)]),createBaseVNode("span",_hoisted_3$J,[createBaseVNode("span",_hoisted_4$E,toDisplayString$1(unref(n)("panels.viewList.thumbnail.title")),1),createBaseVNode("span",_hoisted_5$w,toDisplayString$1(unref(n)("panels.viewList.thumbnail.description")),1)])],32),createBaseVNode("div",{class:"view-item-wrapper",onPointerdown:le[1]||(le[1]=de=>previewStatus.value=1)},[createBaseVNode("span",_hoisted_6$t,[createBaseVNode("canvas",{class:"view-canvas",ref_key:"bitmapCanvas",ref:g},null,512)]),createBaseVNode("span",_hoisted_7$q,[createBaseVNode("span",_hoisted_8$p,toDisplayString$1(unref(n)("panels.viewList.bitmap.title")),1),createBaseVNode("span",_hoisted_9$p,toDisplayString$1(unref(n)("panels.viewList.bitmap.description")),1)])],32),createBaseVNode("div",{class:"view-item-wrapper",onPointerdown:le[2]||(le[2]=de=>previewStatus.value=2)},[createBaseVNode("span",_hoisted_10$n,[createBaseVNode("canvas",{class:"view-canvas",ref_key:"contoursCanvas",ref:y,width:unref(mapCanvasWidth)(unref(selectedFile).width),height:unref(mapCanvasHeight)(unref(selectedFile).height)},null,8,_hoisted_11$n)]),createBaseVNode("span",_hoisted_12$n,[createBaseVNode("span",_hoisted_13$l,toDisplayString$1(unref(n)("panels.viewList.contours.title")),1),createBaseVNode("span",_hoisted_14$k,toDisplayString$1(unref(n)("panels.viewList.contours.description")),1)])],32),createBaseVNode("div",{class:"view-item-wrapper",onPointerdown:le[3]||(le[3]=de=>previewStatus.value=3)},[createBaseVNode("span",_hoisted_15$h,[createBaseVNode("canvas",{class:"view-canvas",ref_key:"curvesCanvas",ref:k,width:unref(mapCanvasWidth)(unref(selectedFile).width),height:unref(mapCanvasHeight)(unref(selectedFile).height)},null,8,_hoisted_16$f)]),createBaseVNode("span",_hoisted_17$d,[createBaseVNode("span",_hoisted_18$b,toDisplayString$1(unref(n)("panels.viewList.curves.title")),1),createBaseVNode("span",_hoisted_19$b,toDisplayString$1(unref(n)("panels.viewList.curves.description")),1)])],32),createBaseVNode("div",{class:"view-item-wrapper",onPointerdown:le[4]||(le[4]=de=>previewStatus.value=4)},[createBaseVNode("span",_hoisted_20$9,[createBaseVNode("canvas",{class:"view-canvas",ref_key:"previewCanvas",ref:$,width:unref(mapCanvasWidth)(unref(selectedFile).width),height:unref(mapCanvasHeight)(unref(selectedFile).height)},null,8,_hoisted_21$8)]),createBaseVNode("span",_hoisted_22$8,[createBaseVNode("span",_hoisted_23$8,toDisplayString$1(unref(n)("panels.viewList.preview.title")),1),createBaseVNode("span",_hoisted_24$8,toDisplayString$1(unref(n)("panels.viewList.preview.description")),1)])],32)]))}}),ViewList=_export_sfc(_sfc_main$19,[["__scopeId","data-v-dc474515"]]),_hoisted_1$17={class:"list-wrapper"},_hoisted_2$15={class:"root-sub-component"},_hoisted_3$I={class:"all-components-list"},_hoisted_4$D={class:"component-item-wrapper"},_hoisted_5$v=["onDragstart","onDragover","onDragend","onDrop","onPointerdown","onContextmenu"],_hoisted_6$s={class:"type"},_hoisted_7$p={class:"tool-wrapper"},_hoisted_8$o={class:"component-menu"},_hoisted_9$o=["onPointerdown"],_sfc_main$18=defineComponent({__name:"CharacterSubComponentList",setup(e){const{t:n}=useI18n(),r=reactive((()=>{const xe={};return orderedListWithItemsForCurrentCharacterFile.value.map(Ne=>{xe[Ne.uuid]=!1}),xe})()),g=ref(!1);let y="",k=-1,$=-1,V=-1;const L=(xe,Ne)=>{const $e=selectedItemByUUID(SubComponentsRoot.value.value.components,xe);$e.lock=Ne},z=(xe,Ne)=>{const $e=selectedItemByUUID(SubComponentsRoot.value.value.components,xe);$e.visible=Ne},j=(xe,Ne)=>{if(!editCharacterFile.value.selectedComponentsTree||editCharacterFile.value.selectedComponentsTree.length<2)return;editCharacterFile.value.selectedComponentsTree[editCharacterFile.value.selectedComponentsTree.length-1]=Ne;const $e=selectedItemByUUID(SubComponentsRoot.value.value.components,Ne);if($e.type==="glyph"&&$e.value.components&&$e.value.components.length){let Ce=!1;for(let Ie=0;Ie<$e.value.components.length;Ie++)if($e.value.components[Ie].type==="glyph"){Ce=!0;break}Ce&&editCharacterFile.value.selectedComponentsTree.push("null")}else $e.type==="glyph"&&setGlyphDraggerTool("glyphDragger")},ae=(xe,Ne)=>{y=Ne},oe=(xe,Ne)=>{xe.preventDefault();const $e=SubComponentsRoot.value.value.orderedList;for(let Ce=0;Ce<$e.length;Ce++)y===$e[Ce].uuid&&(k=Ce),Ne===$e[Ce].uuid&&($=Ce);xe.offsetY<xe.target.offsetHeight/2?V=$:xe.offsetY>xe.target.offsetHeight/2&&(V=$+1)},re=(xe,Ne)=>{y="",y="",k=-1,$=-1,V=-1},ue=(xe,Ne)=>{const $e=clone(SubComponentsRoot.value.value.orderedList);k!==$&&($e.splice(k,1),k<=V&&(V-=1),$e.splice(V,0,{type:"component",uuid:y}),SubComponentsRoot.value.value.orderedList=$e)},le=xe=>{const Ne=SubComponentsRoot.value,$e=(()=>{for(let Ie=0;Ie<Ne.value.components.length;Ie++)if(Ne.value.components[Ie].uuid===xe)return Ie;return-1})();Ne.value.components.splice($e,1);const Ce=(()=>{for(let Ie=0;Ie<Ne.value.orderedList.length;Ie++)if(Ne.value.orderedList[Ie].uuid===xe)return Ie;return-1})();if(Ce>=0&&Ne.value.orderedList.splice(Ce,1),selectedSubComponent.value===xe){let Ie=editCharacterFile.value.selectedComponentsTree;Ie[Ie.length-1]!=="null"&&(Ie[Ie.length-1]="null")}SubComponentsRoot.value.value.glyph_script&&SubComponentsRoot.value.value.glyph_script[xe]&&delete SubComponentsRoot.value.value.glyph_script[xe],g.value=!1,r[xe]=!1},de=(xe,Ne)=>{if(xe.preventDefault(),g.value)return;g.value=!0,r[Ne]=!0;const $e=Ce=>{Ce.target.closest(".component.menu")||(g.value=!1,r[Ne]=!1)};document.addEventListener("mousedown",$e)},he=()=>{let xe=editCharacterFile.value.selectedComponentsTree;xe[xe.length-1]!=="null"&&(xe[xe.length-1]="null"),editCharacterFile.value.selectedComponentsTree=xe},_e=xe=>{xe.stopPropagation();let Ne=editCharacterFile.value.selectedComponentsTree;Ne.length<=2?Ne=null:(Ne.splice(Ne.length-2,2),Ne.push("null")),editCharacterFile.value.selectedComponentsTree=Ne};return(xe,Ne)=>{const $e=resolveComponent("el-icon"),Ce=resolveComponent("el-popover"),Ie=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("div",_hoisted_1$17,[createBaseVNode("div",{class:normalizeClass(["list-head",{selected:!unref(selectedSubComponent)}]),onPointerdown:he},[createVNode($e,{class:"back-icon",onPointerdown:_e},{default:withCtx(()=>[createVNode(unref(arrow_left_bold_default))]),_:1}),createBaseVNode("div",_hoisted_2$15,toDisplayString$1(unref(SubComponentsRoot).value.name),1)],34),createVNode(Ie,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_3$I,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(SubComponents),ze=>(openBlock(),createElementBlock("div",_hoisted_4$D,[createVNode(Ce,{placement:"right",width:200,trigger:"manual",visible:r[ze.uuid]},{reference:withCtx(()=>[createBaseVNode("div",{class:normalizeClass({component:!0,selected:unref(selectedSubComponent)&&unref(selectedSubComponent).uuid===ze.uuid}),draggable:!0,onDragstart:Ue=>ae(Ue,ze.uuid),onDragover:Ue=>oe(Ue,ze.uuid),onDragend:Ue=>re(Ue,ze.uuid),onDrop:Ue=>ue(Ue,ze.uuid),onPointerdown:Ue=>j(Ue,ze.uuid),onContextmenu:Ue=>de(Ue,ze.uuid)},[createBaseVNode("span",_hoisted_6$s,toDisplayString$1(ze.name||ze.type),1),createBaseVNode("span",_hoisted_7$p,[createVNode($e,{class:"tool-icon lock",onPointerdown:Ue=>L(ze.uuid,!ze.lock)},{default:withCtx(()=>[ze.lock?(openBlock(),createBlock(unref(unlock_default),{key:0})):createCommentVNode("",!0),ze.lock?createCommentVNode("",!0):(openBlock(),createBlock(unref(lock_default),{key:1}))]),_:2},1032,["onPointerdown"]),createVNode($e,{class:"tool-icon visible",onPointerdown:Ue=>z(ze.uuid,!ze.visible)},{default:withCtx(()=>[ze.visible?(openBlock(),createBlock(unref(view_default),{key:0})):createCommentVNode("",!0),ze.visible?createCommentVNode("",!0):(openBlock(),createBlock(unref(hide_default),{key:1}))]),_:2},1032,["onPointerdown"])])],42,_hoisted_5$v)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_8$o,[createBaseVNode("div",{class:"component-menu-item",onPointerdown:Ue=>le(ze.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.delete")),41,_hoisted_9$o)])]),_:2},1032,["visible"])]))),256))])]),_:1})])}}}),CharacterSubComponentList=_export_sfc(_sfc_main$18,[["__scopeId","data-v-e2af3d03"]]),_hoisted_1$16={class:"list-wrapper"},_hoisted_2$14={class:"root-sub-component"},_hoisted_3$H={class:"all-components-list"},_hoisted_4$C={class:"component-item-wrapper"},_hoisted_5$u=["onDragstart","onDragover","onDragend","onDrop","onPointerdown","onContextmenu"],_hoisted_6$r={class:"type"},_hoisted_7$o={class:"tool-wrapper"},_hoisted_8$n={class:"component-menu"},_hoisted_9$n=["onPointerdown"],_sfc_main$17=defineComponent({__name:"GlyphSubComponentList",setup(e){const{t:n}=useI18n(),r=reactive((()=>{const xe={};return orderedListWithItemsForCurrentGlyph.value.map(Ne=>{xe[Ne.uuid]=!1}),xe})()),g=ref(!1);let y="",k=-1,$=-1,V=-1;const L=(xe,Ne)=>{const $e=selectedItemByUUID(SubComponentsRoot$1.value.value.components,xe);$e.lock=Ne},z=(xe,Ne)=>{const $e=selectedItemByUUID(SubComponentsRoot$1.value.value.components,xe);$e.visible=Ne},j=(xe,Ne)=>{if(!editGlyph.value.selectedComponentsTree||editGlyph.value.selectedComponentsTree.length<2)return;editGlyph.value.selectedComponentsTree[editGlyph.value.selectedComponentsTree.length-1]=Ne;const $e=selectedItemByUUID(SubComponentsRoot$1.value.value.components,Ne);if($e.type==="glyph"&&$e.value.components&&$e.value.components.length){let Ce=!1;for(let Ie=0;Ie<$e.value.components.length;Ie++)if($e.value.components[Ie].type==="glyph"){Ce=!0;break}Ce&&editGlyph.value.selectedComponentsTree.push("null")}else $e.type==="glyph"&&setGlyphDraggerTool("glyphDragger")},ae=(xe,Ne)=>{y=Ne},oe=(xe,Ne)=>{xe.preventDefault();const $e=SubComponentsRoot$1.value.value.orderedList;for(let Ce=0;Ce<$e.length;Ce++)y===$e[Ce].uuid&&(k=Ce),Ne===$e[Ce].uuid&&($=Ce);xe.offsetY<xe.target.offsetHeight/2?V=$:xe.offsetY>xe.target.offsetHeight/2&&(V=$+1)},re=(xe,Ne)=>{y="",y="",k=-1,$=-1,V=-1},ue=(xe,Ne)=>{const $e=clone(SubComponentsRoot$1.value.value.orderedList);k!==$&&($e.splice(k,1),k<=V&&(V-=1),$e.splice(V,0,{type:"component",uuid:y}),SubComponentsRoot$1.value.value.orderedList=$e)},le=xe=>{const Ne=SubComponentsRoot$1.value,$e=(()=>{for(let Ie=0;Ie<Ne.value.components.length;Ie++)if(Ne.value.components[Ie].uuid===xe)return Ie;return-1})();Ne.value.components.splice($e,1);const Ce=(()=>{for(let Ie=0;Ie<Ne.value.orderedList.length;Ie++)if(Ne.value.orderedList[Ie].uuid===xe)return Ie;return-1})();if(Ce>=0&&Ne.value.orderedList.splice(Ce,1),selectedSubComponent$1.value===xe){let Ie=editGlyph.value.selectedComponentsTree;Ie[Ie.length-1]!=="null"&&(Ie[Ie.length-1]="null")}SubComponentsRoot$1.value.value.glyph_script&&SubComponentsRoot$1.value.value.glyph_script[xe]&&delete SubComponentsRoot$1.value.value.glyph_script[xe],g.value=!1,r[xe]=!1},de=(xe,Ne)=>{if(xe.preventDefault(),g.value)return;g.value=!0,r[Ne]=!0;const $e=Ce=>{Ce.target.closest(".component.menu")||(g.value=!1,r[Ne]=!1)};document.addEventListener("mousedown",$e)},he=()=>{let xe=editGlyph.value.selectedComponentsTree;xe[xe.length-1]!=="null"&&(xe[xe.length-1]="null"),editGlyph.value.selectedComponentsTree=xe},_e=xe=>{xe.stopPropagation();let Ne=editGlyph.value.selectedComponentsTree;Ne.length<=2?Ne=null:(Ne.splice(Ne.length-2,2),Ne.push("null")),editGlyph.value.selectedComponentsTree=Ne};return(xe,Ne)=>{const $e=resolveComponent("el-icon"),Ce=resolveComponent("el-popover"),Ie=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("div",_hoisted_1$16,[createBaseVNode("div",{class:normalizeClass(["list-head",{selected:!unref(selectedSubComponent$1)}]),onPointerdown:he},[createVNode($e,{class:"back-icon",onPointerdown:_e},{default:withCtx(()=>[createVNode(unref(arrow_left_bold_default))]),_:1}),createBaseVNode("div",_hoisted_2$14,toDisplayString$1(unref(SubComponentsRoot$1).value.name),1)],34),createVNode(Ie,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_3$H,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(SubComponents$1),ze=>(openBlock(),createElementBlock("div",_hoisted_4$C,[createVNode(Ce,{placement:"right",width:200,trigger:"manual",visible:r[ze.uuid]},{reference:withCtx(()=>[createBaseVNode("div",{class:normalizeClass({component:!0,selected:unref(selectedSubComponent$1)&&unref(selectedSubComponent$1).uuid===ze.uuid}),draggable:!0,onDragstart:Ue=>ae(Ue,ze.uuid),onDragover:Ue=>oe(Ue,ze.uuid),onDragend:Ue=>re(Ue,ze.uuid),onDrop:Ue=>ue(Ue,ze.uuid),onPointerdown:Ue=>j(Ue,ze.uuid),onContextmenu:Ue=>de(Ue,ze.uuid)},[createBaseVNode("span",_hoisted_6$r,toDisplayString$1(ze.name||ze.type),1),createBaseVNode("span",_hoisted_7$o,[createVNode($e,{class:"tool-icon lock",onPointerdown:Ue=>L(ze.uuid,!ze.lock)},{default:withCtx(()=>[ze.lock?(openBlock(),createBlock(unref(unlock_default),{key:0})):createCommentVNode("",!0),ze.lock?createCommentVNode("",!0):(openBlock(),createBlock(unref(lock_default),{key:1}))]),_:2},1032,["onPointerdown"]),createVNode($e,{class:"tool-icon visible",onPointerdown:Ue=>z(ze.uuid,!ze.visible)},{default:withCtx(()=>[ze.visible?(openBlock(),createBlock(unref(view_default),{key:0})):createCommentVNode("",!0),ze.visible?createCommentVNode("",!0):(openBlock(),createBlock(unref(hide_default),{key:1}))]),_:2},1032,["onPointerdown"])])],42,_hoisted_5$u)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_8$n,[createBaseVNode("div",{class:"component-menu-item",onPointerdown:Ue=>le(ze.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.delete")),41,_hoisted_9$n)])]),_:2},1032,["visible"])]))),256))])]),_:1})])}}}),GlyphSubComponentList=_export_sfc(_sfc_main$17,[["__scopeId","data-v-83325062"]]),_hoisted_1$15={class:"left-panel"},_hoisted_2$13={class:"left-panel-header"},_hoisted_3$G={key:2,class:"view"},_hoisted_4$B={class:"left-panel-content"},_sfc_main$16=defineComponent({__name:"LeftPanel",setup(e){const{tm:n,t:r}=useI18n(),g=[{value:"all"},{value:"font"}],y=$=>{setEditPanelCompFilter($)},k=$=>{setGlyphPanelCompFilter($)};return($,V)=>{const L=resolveComponent("el-option"),z=resolveComponent("el-select");return openBlock(),createElementBlock("div",_hoisted_1$15,[withDirectives(createBaseVNode("div",_hoisted_2$13,[unref(editStatus)===unref(Status).Edit?(openBlock(),createBlock(z,{key:0,"model-value":unref(editPanelCompFilter),class:"edit-filter-select",placeholder:"Select",onChange:y},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(g,j=>createVNode(L,{key:j.value,label:unref(n)(`panels.filter.${j.value}`),value:j.value},null,8,["label","value"])),64))]),_:1},8,["model-value"])):unref(editStatus)===unref(Status).Glyph?(openBlock(),createBlock(z,{key:1,"model-value":unref(glyphPanelCompFilter),class:"edit-filter-select",placeholder:"Select",onChange:k},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(g,j=>createVNode(L,{key:j.value,label:unref(n)(`panels.filter.${j.value}`),value:j.value},null,8,["label","value"])),64))]),_:1},8,["model-value"])):createCommentVNode("",!0),unref(editStatus)===unref(Status).Pic?(openBlock(),createElementBlock("div",_hoisted_3$G,toDisplayString$1(unref(r)("panels.view")),1)):createCommentVNode("",!0)],512),[[vShow,unref(editCharacterFile)&&(!unref(editCharacterFile).selectedComponentsTree||!unref(editCharacterFile).selectedComponentsTree.length)||unref(editGlyph)&&(!unref(editGlyph).selectedComponentsTree||!unref(editGlyph).selectedComponentsTree.length)]]),createBaseVNode("div",_hoisted_4$B,[unref(editStatus)===unref(Status).Edit&&unref(editCharacterFile)&&unref(editCharacterFile).selectedComponentsTree&&unref(editCharacterFile).selectedComponentsTree.length?(openBlock(),createBlock(CharacterSubComponentList,{key:0})):unref(editStatus)===unref(Status).Glyph&&unref(editGlyph)&&unref(editGlyph).selectedComponentsTree&&unref(editGlyph).selectedComponentsTree.length?(openBlock(),createBlock(GlyphSubComponentList,{key:1})):unref(editStatus)===unref(Status).Edit?(openBlock(),createBlock(CharacterComponentList,{key:2})):unref(editStatus)===unref(Status).Glyph?(openBlock(),createBlock(GlyphComponentList,{key:3})):unref(editStatus)===unref(Status).Pic?(openBlock(),createBlock(ViewList,{key:4})):createCommentVNode("",!0)])])}}}),LeftPanel=_export_sfc(_sfc_main$16,[["__scopeId","data-v-7c5a0160"]]),_hoisted_1$14={class:"settings-panel"},_hoisted_2$12={class:"background-style-wrap"},_hoisted_3$F={class:"title"},_hoisted_4$A={class:"form-item"},_hoisted_5$t={class:"form-label"},_hoisted_6$q={class:"form-item"},_hoisted_7$n={class:"form-label"},_hoisted_8$m={class:"grid-style-wrap"},_hoisted_9$m={class:"title"},_hoisted_10$m={class:"form-item"},_hoisted_11$m={class:"form-label"},_hoisted_12$m={class:"form-item"},_hoisted_13$k={class:"form-label"},_hoisted_14$j={class:"font-render-style-wrap"},_hoisted_15$g={class:"title"},_hoisted_16$e={class:"form-item"},_hoisted_17$c={class:"form-label"},_sfc_main$15=defineComponent({__name:"SettingsPanel",setup(e){const{t:n}=useI18n(),r=ref("transparent"),g=ref("#FFFFFF"),y=ref("none"),k=ref(20);return watch([r,g,y,k],()=>{switch(y.value){case"none":setGridType(GridType.None);break;case"mesh":setGridType(GridType.Mesh);break;case"mi":setGridType(GridType.Mi);break;case"layout":setGridType(GridType.LayoutGrid);break}switch(r.value){case"color":setBackgroundType(BackgroundType.Color);break;case"transparent":setBackgroundType(BackgroundType.Transparent);break}g.value&&setBackgroundColor(g.value),k.value&&y.value==="mesh"&&setGridPrecision(k.value)}),($,V)=>{const L=resolveComponent("el-radio"),z=resolveComponent("el-radio-group"),j=resolveComponent("el-color-picker"),ae=resolveComponent("el-form"),oe=resolveComponent("el-input-number");return openBlock(),createElementBlock("div",_hoisted_1$14,[createBaseVNode("div",_hoisted_2$12,[createBaseVNode("div",_hoisted_3$F,toDisplayString$1(unref(n)("panels.settingsPanel.background.background")),1),createVNode(ae,{class:"background-form","label-width":"80px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_4$A,[createBaseVNode("div",_hoisted_5$t,toDisplayString$1(unref(n)("panels.settingsPanel.background.style")),1),createVNode(z,{modelValue:r.value,"onUpdate:modelValue":V[0]||(V[0]=re=>r.value=re)},{default:withCtx(()=>[createVNode(L,{label:"color"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.settingsPanel.background.color")),1)]),_:1}),createVNode(L,{label:"transparent"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.settingsPanel.background.transparent")),1)]),_:1})]),_:1},8,["modelValue"])]),withDirectives(createBaseVNode("div",_hoisted_6$q,[createBaseVNode("div",_hoisted_7$n,toDisplayString$1(unref(n)("panels.settingsPanel.background.color")),1),createVNode(j,{modelValue:g.value,"onUpdate:modelValue":V[1]||(V[1]=re=>g.value=re),id:"backgroundColor"},null,8,["modelValue"])],512),[[vShow,r.value==="color"]])]),_:1})]),createBaseVNode("div",_hoisted_8$m,[createBaseVNode("div",_hoisted_9$m,toDisplayString$1(unref(n)("panels.settingsPanel.mesh.mesh")),1),createVNode(ae,{class:"grid-form","label-width":"80px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_10$m,[createBaseVNode("div",_hoisted_11$m,toDisplayString$1(unref(n)("panels.settingsPanel.mesh.style")),1),createVNode(z,{modelValue:y.value,"onUpdate:modelValue":V[2]||(V[2]=re=>y.value=re),id:"gridStyle"},{default:withCtx(()=>[createVNode(L,{label:"none"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.settingsPanel.mesh.none")),1)]),_:1}),createVNode(L,{label:"mesh"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.settingsPanel.mesh.mesh")),1)]),_:1}),createVNode(L,{label:"mi"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.settingsPanel.mesh.mi")),1)]),_:1}),createVNode(L,{label:"layout"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.settingsPanel.mesh.layout")),1)]),_:1})]),_:1},8,["modelValue"])]),withDirectives(createBaseVNode("div",_hoisted_12$m,[createBaseVNode("div",_hoisted_13$k,toDisplayString$1(unref(n)("panels.settingsPanel.mesh.precision")),1),createVNode(oe,{modelValue:k.value,"onUpdate:modelValue":V[3]||(V[3]=re=>k.value=re),min:10,max:50,precision:2},null,8,["modelValue"])],512),[[vShow,y.value==="mesh"]])]),_:1})]),createBaseVNode("div",_hoisted_14$j,[createBaseVNode("div",_hoisted_15$g,toDisplayString$1(unref(n)("panels.settingsPanel.render.render")),1),createVNode(ae,{class:"font-render-form","label-width":"80px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_16$e,[createBaseVNode("div",_hoisted_17$c,toDisplayString$1(unref(n)("panels.settingsPanel.render.title")),1),createVNode(z,{modelValue:unref(fontRenderStyle),"onUpdate:modelValue":V[4]||(V[4]=re=>isRef(fontRenderStyle)?fontRenderStyle.value=re:null),id:"renderStyle"},{default:withCtx(()=>[createVNode(L,{label:"contour"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.settingsPanel.render.contour")),1)]),_:1}),createVNode(L,{label:"black"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.settingsPanel.render.black")),1)]),_:1}),createVNode(L,{label:"color"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.settingsPanel.render.color")),1)]),_:1})]),_:1},8,["modelValue"])])]),_:1})])])}}}),SettingsPanel=_export_sfc(_sfc_main$15,[["__scopeId","data-v-5315bbdc"]]),_hoisted_1$13={class:"pen-edit-panel"},_hoisted_2$11={key:0,class:"character-edit-panel"},_hoisted_3$E={class:"name-wrap"},_hoisted_4$z={class:"title"},_hoisted_5$s={class:"transform-wrap"},_hoisted_6$p={class:"title"},_hoisted_7$m={key:0,class:"edit-mode-wrap"},_hoisted_8$l={class:"title"},_hoisted_9$l={class:"fill-color-wrap"},_hoisted_10$l={class:"title"},_hoisted_11$l={key:1,class:"glyph-edit-panel"},_hoisted_12$l={class:"name-wrap"},_hoisted_13$j={class:"title"},_hoisted_14$i={class:"transform-wrap"},_hoisted_15$f={class:"title"},_hoisted_16$d={class:"edit-mode-wrap"},_hoisted_17$b={class:"title"},_hoisted_18$a={class:"fill-color-wrap"},_hoisted_19$a={class:"title"},_sfc_main$14=defineComponent({__name:"PenEditPanel",setup(e){const{tm:n,t:r}=useI18n(),g=()=>{saveState("",[StoreType.Pen,editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo)},y=oe=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{x:oe}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{x:oe})},k=oe=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{y:oe}):editStatus.value===Status.Glyph&&modifyComponentForCurrentCharacterFile(selectedComponentUUID$1.value,{y:oe})},$=oe=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{w:oe}):editStatus.value===Status.Glyph&&modifyComponentForCurrentCharacterFile(selectedComponentUUID$1.value,{w:oe})},V=oe=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{h:oe}):editStatus.value===Status.Glyph&&modifyComponentForCurrentCharacterFile(selectedComponentUUID$1.value,{h:oe})},L=oe=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{rotation:oe}):editStatus.value===Status.Glyph&&modifyComponentForCurrentCharacterFile(selectedComponentUUID$1.value,{rotation:oe})},z=oe=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{flipX:oe}):modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{flipX:oe})},j=oe=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{flipY:oe}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID.value,{flipY:oe})},ae=oe=>{g(),setOnPenEditMode(oe),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{value:{editMode:oe}}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{value:{editMode:oe}})};return(oe,re)=>{const ue=resolveComponent("el-input"),le=resolveComponent("el-form-item"),de=resolveComponent("el-form"),he=resolveComponent("el-input-number"),_e=resolveComponent("el-switch"),xe=resolveComponent("el-color-picker");return openBlock(),createElementBlock("div",_hoisted_1$13,[unref(editStatus)===unref(Status).Edit?(openBlock(),createElementBlock("div",_hoisted_2$11,[createBaseVNode("div",_hoisted_3$E,[createBaseVNode("div",_hoisted_4$z,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(de,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("panels.paramsPanel.componentName.label")},{default:withCtx(()=>[createVNode(ue,{modelValue:unref(selectedComponent).name,"onUpdate:modelValue":re[0]||(re[0]=Ne=>unref(selectedComponent).name=Ne)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_5$s,[createBaseVNode("div",_hoisted_6$p,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(de,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("panels.paramsPanel.transform.x")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).x,precision:1,onChange:y},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.y")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).y,precision:1,onChange:k},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.w")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).w,precision:1,onChange:$},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.h")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).h,precision:1,onChange:V},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.rotation")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).rotation,precision:1,onChange:L},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.flipX")},{default:withCtx(()=>[createVNode(_e,{"model-value":unref(selectedComponent).flipX,onChange:z},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.flipY")},{default:withCtx(()=>[createVNode(_e,{"model-value":unref(selectedComponent).flipY,onChange:j},null,8,["model-value"])]),_:1},8,["label"])]),_:1})]),unref(selectedComponent).type==="pen"?(openBlock(),createElementBlock("div",_hoisted_7$m,[createBaseVNode("div",_hoisted_8$l,toDisplayString$1(unref(r)("panels.paramsPanel.editMode.title")),1),createVNode(de,{class:"stroke-form","label-width":"80px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("panels.paramsPanel.editMode.label")},{default:withCtx(()=>[createVNode(_e,{"model-value":unref(selectedComponent).value.editMode,onChange:ae},null,8,["model-value"])]),_:1},8,["label"])]),_:1})])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_9$l,[createBaseVNode("div",_hoisted_10$l,toDisplayString$1(unref(r)("panels.paramsPanel.fillColor.title")),1),createVNode(de,{class:"name-form","label-width":"120px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("panels.paramsPanel.fillColor.label")},{default:withCtx(()=>[createVNode(xe,{modelValue:unref(selectedComponent).value.fillColor,"onUpdate:modelValue":re[1]||(re[1]=Ne=>unref(selectedComponent).value.fillColor=Ne),"show-alpha":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})])])):unref(editStatus)===unref(Status).Glyph?(openBlock(),createElementBlock("div",_hoisted_11$l,[createBaseVNode("div",_hoisted_12$l,[createBaseVNode("div",_hoisted_13$j,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(de,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("panels.paramsPanel.componentName.label")},{default:withCtx(()=>[createVNode(ue,{modelValue:unref(selectedComponent$1).name,"onUpdate:modelValue":re[2]||(re[2]=Ne=>unref(selectedComponent$1).name=Ne)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_14$i,[createBaseVNode("div",_hoisted_15$f,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(de,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("panels.paramsPanel.transform.x")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent$1).x,precision:1,onChange:y},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.y")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent$1).y,precision:1,onChange:k},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.w")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent$1).w,precision:1,onChange:$},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.h")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent$1).h,precision:1,onChange:V},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.rotation")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent$1).rotation,precision:1,onChange:L},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.flipX")},{default:withCtx(()=>[createVNode(_e,{"model-value":unref(selectedComponent$1).flipX,onChange:z},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.flipY")},{default:withCtx(()=>[createVNode(_e,{"model-value":unref(selectedComponent$1).flipY,onChange:j},null,8,["model-value"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_16$d,[createBaseVNode("div",_hoisted_17$b,toDisplayString$1(unref(r)("panels.paramsPanel.editMode.title")),1),createVNode(de,{class:"stroke-form","label-width":"80px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("panels.paramsPanel.editMode.label")},{default:withCtx(()=>[createVNode(_e,{"model-value":unref(selectedComponent$1).value.editMode,onChange:ae},null,8,["model-value"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_18$a,[createBaseVNode("div",_hoisted_19$a,toDisplayString$1(unref(r)("panels.paramsPanel.fillColor.title")),1),createVNode(de,{class:"name-form","label-width":"120px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("panels.paramsPanel.fillColor.label")},{default:withCtx(()=>[createVNode(xe,{modelValue:unref(selectedComponent$1).value.fillColor,"onUpdate:modelValue":re[3]||(re[3]=Ne=>unref(selectedComponent$1).value.fillColor=Ne),"show-alpha":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})])])):createCommentVNode("",!0)])}}}),PenEditPanel=_export_sfc(_sfc_main$14,[["__scopeId","data-v-db4e713f"]]),_hoisted_1$12={class:"polygon-edit-panel"},_hoisted_2$10={key:0,class:"character-edit-panel"},_hoisted_3$D={class:"name-wrap"},_hoisted_4$y={class:"title"},_hoisted_5$r={class:"transform-wrap"},_hoisted_6$o={class:"title"},_hoisted_7$l={key:0,class:"transform-to-curve-wrap"},_hoisted_8$k={class:"title"},_hoisted_9$k={class:"fill-color-wrap"},_hoisted_10$k={class:"title"},_hoisted_11$k={key:1,class:"glyph-edit-panel"},_hoisted_12$k={class:"name-wrap"},_hoisted_13$i={class:"title"},_hoisted_14$h={class:"transform-wrap"},_hoisted_15$e={class:"title"},_hoisted_16$c={key:0,class:"transform-to-curve-wrap"},_hoisted_17$a={class:"title"},_hoisted_18$9={class:"fill-color-wrap"},_hoisted_19$9={class:"title"},_sfc_main$13=defineComponent({__name:"PolygonEditPanel",setup(e){const{tm:n,t:r}=useI18n(),g=()=>{saveState("",[editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo)},y=j=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{x:j}):editStatus.value===Status.Glyph&&modifyComponentForCurrentCharacterFile(selectedComponentUUID$1.value,{x:j})},k=j=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{y:j}):editStatus.value===Status.Glyph&&modifyComponentForCurrentCharacterFile(selectedComponentUUID$1.value,{y:j})},$=j=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{w:j}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{w:j})},V=j=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{h:j}):editStatus.value===Status.Glyph&&modifyComponentForCurrentCharacterFile(selectedComponentUUID$1.value,{h:j})},L=j=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{rotation:j}):editStatus.value===Status.Glyph&&modifyComponentForCurrentCharacterFile(selectedComponentUUID$1.value,{rotation:j})},z=()=>{g();const j=selectedComponent.value.value,{x:ae,y:oe,w:re,h:ue,rotation:le,flipX:de,flipY:he}=selectedComponent.value,_e=transformPoints(j.points.map(hn=>({x:hn.x,y:hn.y})),{x:ae,y:oe,w:re,h:ue,rotation:le,flipX:de,flipY:he});let xe=[];const Ne=[];for(let hn=0;hn<_e.length-1;hn++)Ne.push([_e[hn].x,_e[hn].y]);(_e[_e.length-1].x!==_e[0].x||_e[_e.length-1].y!==_e[0].y)&&Ne.push([_e[_e.length-1].x,_e[_e.length-1].y]);let $e=new paper.Path({segments:Ne,closed:!0});$e.smooth();let Ce=genUUID();for(let hn=0;hn<$e.curves.length;hn++){const Dt=$e.curves[hn],xn=genUUID(),jt=genUUID();xe.push({uuid:Ce,x:Dt.points[0].x,y:Dt.points[0].y,type:"anchor",origin:null,isShow:!0}),xe.push({uuid:xn,x:Dt.points[1].x,y:Dt.points[1].y,type:"control",origin:Ce,isShow:!1}),Ce=genUUID(),xe.push({uuid:jt,x:Dt.points[2].x,y:Dt.points[2].y,type:"control",origin:Ce,isShow:!1}),hn>=$e.curves.length-1&&xe.push({uuid:Ce,x:Dt.points[3].x,y:Dt.points[3].y,type:"anchor",origin:null,isShow:!0})}const{x:Ie,y:ze,w:Ue,h:Pt}=getBound$5(xe);editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{value:{points:xe,editMode:!1},type:"pen",x:Ie,y:ze,w:Ue,h:Pt,rotation:0}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{value:{points:xe,editMode:!1},type:"pen",x:Ie,y:ze,w:Ue,h:Pt,rotation:0})};return(j,ae)=>{const oe=resolveComponent("el-input"),re=resolveComponent("el-form-item"),ue=resolveComponent("el-form"),le=resolveComponent("el-input-number"),de=resolveComponent("el-button"),he=resolveComponent("el-color-picker");return openBlock(),createElementBlock("div",_hoisted_1$12,[unref(editStatus)===unref(Status).Edit?(openBlock(),createElementBlock("div",_hoisted_2$10,[createBaseVNode("div",_hoisted_3$D,[createBaseVNode("div",_hoisted_4$y,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(ue,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(re,{label:unref(n)("panels.paramsPanel.componentName.label")},{default:withCtx(()=>[createVNode(oe,{modelValue:unref(selectedComponent).name,"onUpdate:modelValue":ae[0]||(ae[0]=_e=>unref(selectedComponent).name=_e)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_5$r,[createBaseVNode("div",_hoisted_6$o,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(ue,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(re,{label:unref(n)("panels.paramsPanel.transform.x")},{default:withCtx(()=>[createVNode(le,{"model-value":unref(selectedComponent).x,precision:1,onChange:y},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.y")},{default:withCtx(()=>[createVNode(le,{"model-value":unref(selectedComponent).y,precision:1,onChange:k},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.w")},{default:withCtx(()=>[createVNode(le,{"model-value":unref(selectedComponent).w,precision:1,onChange:$},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.h")},{default:withCtx(()=>[createVNode(le,{"model-value":unref(selectedComponent).h,precision:1,onChange:V},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.rotation")},{default:withCtx(()=>[createVNode(le,{"model-value":unref(selectedComponent).rotation,precision:1,onChange:L},null,8,["model-value"])]),_:1},8,["label"])]),_:1})]),unref(selectedComponent).type==="polygon"?(openBlock(),createElementBlock("div",_hoisted_7$l,[createBaseVNode("div",_hoisted_8$k,toDisplayString$1(unref(r)("panels.paramsPanel.transformToCurve.title")),1),createVNode(de,{onPointerdown:z},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.transformToCurve.label")),1)]),_:1})])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_9$k,[createBaseVNode("div",_hoisted_10$k,toDisplayString$1(unref(r)("panels.paramsPanel.fillColor.title")),1),createVNode(ue,{class:"name-form","label-width":"120px"},{default:withCtx(()=>[createVNode(re,{label:unref(n)("panels.paramsPanel.fillColor.label")},{default:withCtx(()=>[createVNode(he,{modelValue:unref(selectedComponent).value.fillColor,"onUpdate:modelValue":ae[1]||(ae[1]=_e=>unref(selectedComponent).value.fillColor=_e),"show-alpha":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})])])):unref(editStatus)===unref(Status).Glyph?(openBlock(),createElementBlock("div",_hoisted_11$k,[createBaseVNode("div",_hoisted_12$k,[createBaseVNode("div",_hoisted_13$i,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(ue,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(re,{label:unref(n)("panels.paramsPanel.componentName.label")},{default:withCtx(()=>[createVNode(oe,{modelValue:unref(selectedComponent$1).name,"onUpdate:modelValue":ae[2]||(ae[2]=_e=>unref(selectedComponent$1).name=_e)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_14$h,[createBaseVNode("div",_hoisted_15$e,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(ue,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(re,{label:unref(n)("panels.paramsPanel.transform.x")},{default:withCtx(()=>[createVNode(le,{"model-value":unref(selectedComponent$1).x,precision:1,onChange:y},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.y")},{default:withCtx(()=>[createVNode(le,{"model-value":unref(selectedComponent$1).y,precision:1,onChange:k},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.w")},{default:withCtx(()=>[createVNode(le,{"model-value":unref(selectedComponent$1).w,precision:1,onChange:$},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.h")},{default:withCtx(()=>[createVNode(le,{"model-value":unref(selectedComponent$1).h,precision:1,onChange:V},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.rotation")},{default:withCtx(()=>[createVNode(le,{"model-value":unref(selectedComponent$1).rotation,precision:1,onChange:L},null,8,["model-value"])]),_:1},8,["label"])]),_:1})]),unref(selectedComponent$1).type==="polygon"?(openBlock(),createElementBlock("div",_hoisted_16$c,[createBaseVNode("div",_hoisted_17$a,toDisplayString$1(unref(r)("panels.paramsPanel.transformToCurve.title")),1),createVNode(de,{onPointerdown:z},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.transformToCurve.label")),1)]),_:1})])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_18$9,[createBaseVNode("div",_hoisted_19$9,toDisplayString$1(unref(r)("panels.paramsPanel.fillColor.title")),1),createVNode(ue,{class:"name-form","label-width":"120px"},{default:withCtx(()=>[createVNode(re,{label:unref(n)("panels.paramsPanel.fillColor.label")},{default:withCtx(()=>[createVNode(he,{modelValue:unref(selectedComponent).value.fillColor,"onUpdate:modelValue":ae[3]||(ae[3]=_e=>unref(selectedComponent).value.fillColor=_e),"show-alpha":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})])])):createCommentVNode("",!0)])}}}),PolygonEditPanel=_export_sfc(_sfc_main$13,[["__scopeId","data-v-e37d5687"]]),_hoisted_1$11={class:"picture-edit-panel"},_hoisted_2$$={class:"name-wrap"},_hoisted_3$C={class:"title"},_hoisted_4$x={class:"transform-wrap"},_hoisted_5$q={class:"title"},_hoisted_6$n={class:"opacity-wrap"},_hoisted_7$k={class:"title"},_sfc_main$12=defineComponent({__name:"PictureEditPanel",setup(e){const{tm:n,t:r}=useI18n(),g=()=>{saveState("",[editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo)},y=oe=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{x:oe}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{x:oe})},k=oe=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{y:oe}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{y:oe})},$=oe=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{w:oe}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{w:oe})},V=oe=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{h:oe}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{h:oe})},L=oe=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{rotation:oe}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{rotation:oe})};let z=null,j=!1;const ae=oe=>{z&&clearTimeout(z),z=setTimeout(()=>{j=!1,clearTimeout(z)},500),j||(g(),j=!0),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{opacity:oe}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{opacity:oe})};return(oe,re)=>{const ue=resolveComponent("el-input"),le=resolveComponent("el-form-item"),de=resolveComponent("el-form"),he=resolveComponent("el-input-number"),_e=resolveComponent("el-slider");return openBlock(),createElementBlock("div",_hoisted_1$11,[createBaseVNode("div",_hoisted_2$$,[createBaseVNode("div",_hoisted_3$C,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(de,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("panels.paramsPanel.componentName.label")},{default:withCtx(()=>[createVNode(ue,{modelValue:unref(selectedComponent).name,"onUpdate:modelValue":re[0]||(re[0]=xe=>unref(selectedComponent).name=xe)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_4$x,[createBaseVNode("div",_hoisted_5$q,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(de,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("panels.paramsPanel.transform.x")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).x,precision:1,onChange:y},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.y")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).y,precision:1,onChange:k},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.w")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).w,precision:1,onChange:$},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.h")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).h,precision:1,onChange:V},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.rotation")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).rotation,precision:1,onChange:L},null,8,["model-value"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_6$n,[createBaseVNode("div",_hoisted_7$k,toDisplayString$1(unref(n)("panels.paramsPanel.opacity.title")),1),createVNode(de,{class:"opacitym-form","label-width":"80px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("panels.paramsPanel.opacity.opacity")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).opacity,min:0,max:1,step:.05,onChange:ae},null,8,["model-value"]),createVNode(_e,{"model-value":unref(selectedComponent).opacity,precision:.01,min:0,max:1,step:.05,onInput:ae},null,8,["model-value"])]),_:1},8,["label"])]),_:1})])])}}}),PictureEditPanel=_export_sfc(_sfc_main$12,[["__scopeId","data-v-7e1bd557"]]),_hoisted_1$10={class:"rectangle-edit-panel"},_hoisted_2$_={key:0,class:"character-edit-panel"},_hoisted_3$B={class:"name-wrap"},_hoisted_4$w={class:"title"},_hoisted_5$p={class:"transform-wrap"},_hoisted_6$m={class:"title"},_hoisted_7$j={class:"fill-color-wrap"},_hoisted_8$j={class:"title"},_hoisted_9$j={key:1,class:"glyph-edit-panel"},_hoisted_10$j={class:"name-wrap"},_hoisted_11$j={class:"title"},_hoisted_12$j={class:"transform-wrap"},_hoisted_13$h={class:"title"},_hoisted_14$g={class:"fill-color-wrap"},_hoisted_15$d={class:"title"},_sfc_main$11=defineComponent({__name:"RectangleEditPanel",setup(e){const{tm:n,t:r}=useI18n(),g=()=>{saveState("",[editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo)},y=z=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{x:z}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{x:z})},k=z=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{y:z}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{y:z})},$=z=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{w:z}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{w:z})},V=z=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{h:z}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{h:z})},L=z=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{rotation:z}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{rotation:z})};return(z,j)=>{const ae=resolveComponent("el-input"),oe=resolveComponent("el-form-item"),re=resolveComponent("el-form"),ue=resolveComponent("el-input-number"),le=resolveComponent("el-color-picker");return openBlock(),createElementBlock("div",_hoisted_1$10,[unref(editStatus)===unref(Status).Edit?(openBlock(),createElementBlock("div",_hoisted_2$_,[createBaseVNode("div",_hoisted_3$B,[createBaseVNode("div",_hoisted_4$w,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(re,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(oe,{label:unref(n)("panels.paramsPanel.componentName.label")},{default:withCtx(()=>[createVNode(ae,{modelValue:unref(selectedComponent).name,"onUpdate:modelValue":j[0]||(j[0]=de=>unref(selectedComponent).name=de)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_5$p,[createBaseVNode("div",_hoisted_6$m,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(re,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.x")},{default:withCtx(()=>[createVNode(ue,{"model-value":unref(selectedComponent).x,precision:1,onChange:y},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.y")},{default:withCtx(()=>[createVNode(ue,{"model-value":unref(selectedComponent).y,precision:1,onChange:k},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.w")},{default:withCtx(()=>[createVNode(ue,{"model-value":unref(selectedComponent).w,precision:1,onChange:$},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.h")},{default:withCtx(()=>[createVNode(ue,{"model-value":unref(selectedComponent).h,precision:1,onChange:V},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.rotation")},{default:withCtx(()=>[createVNode(ue,{"model-value":unref(selectedComponent).rotation,precision:1,onChange:L},null,8,["model-value"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_7$j,[createBaseVNode("div",_hoisted_8$j,toDisplayString$1(unref(r)("panels.paramsPanel.fillColor.title")),1),createVNode(re,{class:"name-form","label-width":"120px"},{default:withCtx(()=>[createVNode(oe,{label:unref(n)("panels.paramsPanel.fillColor.label")},{default:withCtx(()=>[createVNode(le,{modelValue:unref(selectedComponent).value.fillColor,"onUpdate:modelValue":j[1]||(j[1]=de=>unref(selectedComponent).value.fillColor=de),"show-alpha":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})])])):unref(editStatus)===unref(Status).Glyph?(openBlock(),createElementBlock("div",_hoisted_9$j,[createBaseVNode("div",_hoisted_10$j,[createBaseVNode("div",_hoisted_11$j,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(re,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(oe,{label:unref(n)("panels.paramsPanel.componentName.label")},{default:withCtx(()=>[createVNode(ae,{modelValue:unref(selectedComponent$1).name,"onUpdate:modelValue":j[2]||(j[2]=de=>unref(selectedComponent$1).name=de)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_12$j,[createBaseVNode("div",_hoisted_13$h,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(re,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.x")},{default:withCtx(()=>[createVNode(ue,{"model-value":unref(selectedComponent$1).x,precision:1,onChange:y},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.y")},{default:withCtx(()=>[createVNode(ue,{"model-value":unref(selectedComponent$1).y,precision:1,onChange:k},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.w")},{default:withCtx(()=>[createVNode(ue,{"model-value":unref(selectedComponent$1).w,precision:1,onChange:$},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.h")},{default:withCtx(()=>[createVNode(ue,{"model-value":unref(selectedComponent$1).h,precision:1,onChange:V},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.rotation")},{default:withCtx(()=>[createVNode(ue,{"model-value":unref(selectedComponent$1).rotation,precision:1,onChange:L},null,8,["model-value"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_14$g,[createBaseVNode("div",_hoisted_15$d,toDisplayString$1(unref(r)("panels.paramsPanel.fillColor.title")),1),createVNode(re,{class:"name-form","label-width":"120px"},{default:withCtx(()=>[createVNode(oe,{label:unref(n)("panels.paramsPanel.fillColor.label")},{default:withCtx(()=>[createVNode(le,{modelValue:unref(selectedComponent).value.fillColor,"onUpdate:modelValue":j[3]||(j[3]=de=>unref(selectedComponent).value.fillColor=de),"show-alpha":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})])])):createCommentVNode("",!0)])}}}),RectangleEditPanel=_export_sfc(_sfc_main$11,[["__scopeId","data-v-0f65fb4c"]]),_hoisted_1$$={class:"ellipse-edit-panel"},_hoisted_2$Z={key:0,class:"character-edit-panel"},_hoisted_3$A={class:"name-wrap"},_hoisted_4$v={class:"title"},_hoisted_5$o={class:"transform-wrap"},_hoisted_6$l={class:"title"},_hoisted_7$i={class:"fill-color-wrap"},_hoisted_8$i={class:"title"},_hoisted_9$i={key:1,class:"glyph-edit-panel"},_hoisted_10$i={class:"name-wrap"},_hoisted_11$i={class:"title"},_hoisted_12$i={class:"transform-wrap"},_hoisted_13$g={class:"title"},_hoisted_14$f={class:"fill-color-wrap"},_hoisted_15$c={class:"title"},_sfc_main$10=defineComponent({__name:"EllipseEditPanel",setup(e){const{tm:n,t:r}=useI18n(),g=()=>{saveState("",[editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo)},y=z=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{x:z}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{x:z})},k=z=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{y:z}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{y:z})},$=z=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{w:z}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{w:z})},V=z=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{h:z}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{h:z})},L=z=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{rotation:z}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{rotation:z})};return(z,j)=>{const ae=resolveComponent("el-input"),oe=resolveComponent("el-form-item"),re=resolveComponent("el-form"),ue=resolveComponent("el-input-number"),le=resolveComponent("el-color-picker");return openBlock(),createElementBlock("div",_hoisted_1$$,[unref(editStatus)===unref(Status).Edit?(openBlock(),createElementBlock("div",_hoisted_2$Z,[createBaseVNode("div",_hoisted_3$A,[createBaseVNode("div",_hoisted_4$v,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(re,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(oe,{label:unref(n)("panels.paramsPanel.componentName.label"),prop:"name"},{default:withCtx(()=>[createVNode(ae,{id:"name",modelValue:unref(selectedComponent).name,"onUpdate:modelValue":j[0]||(j[0]=de=>unref(selectedComponent).name=de)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_5$o,[createBaseVNode("div",_hoisted_6$l,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(re,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.x"),prop:"x"},{default:withCtx(()=>[createVNode(ue,{id:"x","model-value":unref(selectedComponent).x,precision:1,onChange:y},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.y"),prop:"y"},{default:withCtx(()=>[createVNode(ue,{id:"y","model-value":unref(selectedComponent).y,precision:1,onChange:k},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.w"),prop:"w"},{default:withCtx(()=>[createVNode(ue,{id:"w","model-value":unref(selectedComponent).w,precision:1,onChange:$},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.h"),prop:"h"},{default:withCtx(()=>[createVNode(ue,{id:"h","model-value":unref(selectedComponent).h,precision:1,onChange:V},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.rotation"),prop:"rotation"},{default:withCtx(()=>[createVNode(ue,{id:"rotation","model-value":unref(selectedComponent).rotation,precision:1,onChange:L},null,8,["model-value"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_7$i,[createBaseVNode("div",_hoisted_8$i,toDisplayString$1(unref(r)("panels.paramsPanel.fillColor.title")),1),createVNode(re,{class:"name-form","label-width":"120px"},{default:withCtx(()=>[createVNode(oe,{label:unref(n)("panels.paramsPanel.fillColor.label")},{default:withCtx(()=>[createVNode(le,{modelValue:unref(selectedComponent).value.fillColor,"onUpdate:modelValue":j[1]||(j[1]=de=>unref(selectedComponent).value.fillColor=de),"show-alpha":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})])])):unref(editStatus)===unref(Status).Glyph?(openBlock(),createElementBlock("div",_hoisted_9$i,[createBaseVNode("div",_hoisted_10$i,[createBaseVNode("div",_hoisted_11$i,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(re,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(oe,{label:unref(n)("panels.paramsPanel.componentName.label"),prop:"name"},{default:withCtx(()=>[createVNode(ae,{id:"name",modelValue:unref(selectedComponent$1).name,"onUpdate:modelValue":j[2]||(j[2]=de=>unref(selectedComponent$1).name=de)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_12$i,[createBaseVNode("div",_hoisted_13$g,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(re,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.x"),prop:"x"},{default:withCtx(()=>[createVNode(ue,{id:"x","model-value":unref(selectedComponent$1).x,precision:1,onChange:y},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.y"),prop:"y"},{default:withCtx(()=>[createVNode(ue,{id:"y","model-value":unref(selectedComponent$1).y,precision:1,onChange:k},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.w"),prop:"w"},{default:withCtx(()=>[createVNode(ue,{id:"w","model-value":unref(selectedComponent$1).w,precision:1,onChange:$},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.h"),prop:"h"},{default:withCtx(()=>[createVNode(ue,{id:"h","model-value":unref(selectedComponent$1).h,precision:1,onChange:V},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.rotation"),prop:"rotation"},{default:withCtx(()=>[createVNode(ue,{id:"rotation","model-value":unref(selectedComponent$1).rotation,precision:1,onChange:L},null,8,["model-value"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_14$f,[createBaseVNode("div",_hoisted_15$c,toDisplayString$1(unref(r)("panels.paramsPanel.fillColor.title")),1),createVNode(re,{class:"name-form","label-width":"120px"},{default:withCtx(()=>[createVNode(oe,{label:unref(n)("panels.paramsPanel.fillColor.label")},{default:withCtx(()=>[createVNode(le,{modelValue:unref(selectedComponent).value.fillColor,"onUpdate:modelValue":j[3]||(j[3]=de=>unref(selectedComponent).value.fillColor=de),"show-alpha":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})])])):createCommentVNode("",!0)])}}}),EllipseEditPanel=_export_sfc(_sfc_main$10,[["__scopeId","data-v-3878cbab"]]),_hoisted_1$_={class:"picture-edit-panel"},_hoisted_2$Y={class:"effect-wrapper step-1-wrapper"},_hoisted_3$z={class:"title"},_hoisted_4$u={key:0,class:"global-effect"},_hoisted_5$n={key:0,class:"tip"},_hoisted_6$k={key:1,class:"local-brush"},_hoisted_7$h={class:"effect-wrapper"},_hoisted_8$h={class:"title"},_hoisted_9$h={class:"content"},_hoisted_10$h={class:"effect-wrapper step-3-wrapper"},_hoisted_11$h={class:"title"},_hoisted_12$h={class:"effect-wrapper"},_hoisted_13$f={class:"title"},_hoisted_14$e={class:"content"},_sfc_main$$=defineComponent({__name:"FontPicEditPanel",setup(e){const{tm:n,t:r}=useI18n();let g=rThreshold.value,y=gThreshold.value,k=bThreshold.value,$=maxError.value;const V=Ne=>{setStep(Ne),step.value===1&&(previewStatus.value=1,g=rThreshold.value,y=gThreshold.value,k=bThreshold.value),step.value===3&&(previewStatus.value=3,$=maxError.value)},L=()=>{enableLocalBrush.value?(enableLocalBrush.value=!1,emitter.emit("toggleLocalBrushEdit",!1),_e()):(g=rThreshold.value,y=gThreshold.value,k=bThreshold.value,step.value=0,_e())},z=()=>{_e()},j=()=>{},ae=()=>{},oe=()=>{enableLocalBrush.value?(enableLocalBrush.value=!1,emitter.emit("toggleLocalBrushEdit",!1)):(rThreshold.value=g,gThreshold.value=y,bThreshold.value=k,step.value=0,_e())},re=()=>{$=maxError.value,step.value=0,xe()},ue=()=>{maxError.value=$,step.value=0,xe()},le=()=>{xe()},de=()=>{xe()},he=()=>{const{thumbnailCanvas:Ne,thumbnailPixels:$e}=editCharacterPic.value,Ce=toBlackWhiteBitMap($e,{r:rThreshold.value,g:gThreshold.value,b:bThreshold.value},{x:0,y:0,size:-1,width:Ne.width,height:Ne.height});setBitMap({data:Ce,width:Ne.width,height:Ne.height}),editCharacterPic.value.processPixels=Ce,localRThreshold.value=rThreshold.value,localGThreshold.value=gThreshold.value,localBThreshold.value=bThreshold.value,setEnableLocalBrush(!0),emitter.emit("toggleLocalBrushEdit",!0)},_e=()=>{clearContoursComponent(),clearCurvesComponent();const{thumbnailCanvas:Ne,processPixels:$e}=editCharacterPic.value;let Ce=[];enableLocalBrush.value?Ce=$e:Ce=toBlackWhiteBitMap($e,{r:rThreshold.value,g:gThreshold.value,b:bThreshold.value},{x:0,y:0,size:-1,width:Ne.width,height:Ne.height}),setBitMap({data:Ce,width:Ne.width,height:Ne.height});const{canvas:Ie}=reversePixels(Ce,bitmap.value.width,bitmap.value.height),ze=Ie.getContext("2d"),Ue=Ie.width,Pt=Ie.height,hn=ze.getImageData(0,0,Ue,Pt);let Dt=cv.matFromImageData(hn);cv.cvtColor(Dt,Dt,cv.COLOR_RGBA2GRAY,0),cv.threshold(Dt,Dt,120,200,cv.THRESH_BINARY);let xn=new cv.MatVector,jt=new cv.Mat;cv.findContours(Dt,xn,jt,cv.RETR_CCOMP,cv.CHAIN_APPROX_NONE);const Vn=[];for(let ua=0;ua<xn.size();ua++){const aa=xn.get(ua);for(let Nn=0;Nn<aa.rows;Nn++)Vn.push({x:aa.data32S[Nn*2],y:aa.data32S[Nn*2+1]})}const{x:Rn,y:Tn,w:Ln,h:Sn}=getBound$5(Vn);let An,In;const Mn=500;Ln>Sn?(An=Mn,In=Sn/Ln*An):(In=Mn,An=Ln/Sn*In);const ra=An/Ln,da=In/Sn;for(let ua=0;ua<xn.size();ua++){const aa=[],Nn=xn.get(ua);for(let At=0;At<Nn.rows;At++)aa.push({uuid:genUUID(),x:Nn.data32S[At*2],y:Nn.data32S[At*2+1]});aa.push({uuid:genUUID(),x:Nn.data32S[0],y:Nn.data32S[1]});const{x:En,y:Zn,w:ha,h:xa}=getBound$5(aa),sa=transformPoints(aa,{x:(En-Rn)*ra,y:(Zn-Tn)*da,w:ha*ra,h:xa*da,rotation:0,flipX:!1,flipY:!1}).map(At=>({uuid:genUUID(),...At})),{x:Hn,y:bn,w:Xn,h:$n}=getBound$5(sa.reduce((At,Dn)=>(At.push({x:Dn.x,y:Dn.y}),At),[])),kt={uuid:genUUID(),type:"polygon",name:"polygon",lock:!1,visible:!0,value:{points:sa,fillColor:jt.data32S[ua*4+3]===-1?"#000":"#fff",strokeColor:"#000",closePath:!0},x:Hn,y:bn,w:Xn,h:$n,rotation:0,flipX:!1,flipY:!1,usedInCharacter:!1};addContoursComponent(kt)}contoursComponents.value.map(ua=>{if(ua.type==="polygon"){const aa=ua.value.points,Nn=fitCurve(aa,maxError.value);let En=[];Nn.map((bn,Xn)=>{const $n=genUUID(),kt=genUUID(),At=genUUID(),Dn=genUUID();En.push({uuid:$n,x:bn[0].x,y:bn[0].y,type:"anchor",origin:null,isShow:!0}),En.push({uuid:kt,x:bn[1].x,y:bn[1].y,type:"control",origin:$n,isShow:!1}),En.push({uuid:At,x:bn[2].x,y:bn[2].y,type:"control",origin:Dn,isShow:!1}),Xn>=Nn.length-1&&En.push({uuid:Dn,x:bn[3].x,y:bn[3].y,type:"anchor",origin:null,isShow:!0})});const{x:Zn,y:ha,w:xa,h:sa}=getBound$5(En),Hn=clone(ua);Hn.uuid=genUUID(),Hn.value.points=En,Hn.value.editMode=!1,Hn.type="pen",Hn.name="pic-contour",Hn.x=Zn,Hn.y=ha,Hn.w=xa,Hn.h=sa,Hn.rotation=0,Hn.usedInCharacter=!0,addCurvesComponent(Hn)}})},xe=()=>{clearCurvesComponent(),contoursComponents.value.filter(Ne=>Ne.value.points.length>=dropThreshold.value).map(Ne=>{if(Ne.type==="polygon"){const $e=Ne.value.points,Ce=fitCurve($e,maxError.value);let Ie=[];if(!Ce.length)return;Ie.push({uuid:genUUID(),x:Ce[0][0].x,y:Ce[0][0].y,type:"anchor",origin:null,isShow:!0}),Ce.map((xn,jt)=>{const Vn=genUUID(),Rn=genUUID(),Tn=genUUID();Ie.push({uuid:Vn,x:xn[1].x,y:xn[1].y,type:"control",origin:Ie[Ie.length-1].uuid,isShow:!1}),Ie.push({uuid:Rn,x:xn[2].x,y:xn[2].y,type:"control",origin:Tn,isShow:!1}),Ie.push({uuid:Tn,x:xn[3].x,y:xn[3].y,type:"anchor",origin:null,isShow:!0})});const{x:ze,y:Ue,w:Pt,h:hn}=getBound$5(Ie),Dt=clone(Ne);Dt.uuid=genUUID(),Dt.value.points=Ie,Dt.value.editMode=!1,Dt.type="pen",Dt.name="pic-contour",Dt.x=ze,Dt.y=Ue,Dt.w=Pt,Dt.h=hn,Dt.rotation=0,Dt.usedInCharacter=!0,addCurvesComponent(Dt)}})};return emitter.on("resetEditFontPic",()=>{_e()}),(Ne,$e)=>{const Ce=resolveComponent("el-slider"),Ie=resolveComponent("el-form-item"),ze=resolveComponent("el-button"),Ue=resolveComponent("el-button-group"),Pt=resolveComponent("el-form"),hn=resolveComponent("el-input-number");return openBlock(),createElementBlock("div",_hoisted_1$_,[createBaseVNode("div",_hoisted_2$Y,[createBaseVNode("div",_hoisted_3$z,toDisplayString$1(unref(r)("panels.picEditPanel.step1.title")),1),createVNode(Pt,{class:"bitmap-form form","label-width":"40px"},{default:withCtx(()=>[unref(enableLocalBrush).value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_4$u,[createVNode(Ie,{label:"r"},{default:withCtx(()=>[createVNode(Ce,{modelValue:unref(rThreshold),"onUpdate:modelValue":$e[0]||($e[0]=Dt=>isRef(rThreshold)?rThreshold.value=Dt:null),"show-input":"",size:"small",min:0,max:255,disabled:unref(step)!==1,onChange:z},null,8,["modelValue","disabled"])]),_:1}),createVNode(Ie,{label:"g"},{default:withCtx(()=>[createVNode(Ce,{modelValue:unref(gThreshold),"onUpdate:modelValue":$e[1]||($e[1]=Dt=>isRef(gThreshold)?gThreshold.value=Dt:null),"show-input":"",size:"small",min:0,max:255,disabled:unref(step)!==1,onChange:z},null,8,["modelValue","disabled"])]),_:1}),createVNode(Ie,{label:"b"},{default:withCtx(()=>[createVNode(Ce,{modelValue:unref(bThreshold),"onUpdate:modelValue":$e[2]||($e[2]=Dt=>isRef(bThreshold)?bThreshold.value=Dt:null),"show-input":"",size:"small",min:0,max:255,disabled:unref(step)!==1,onChange:z},null,8,["modelValue","disabled"])]),_:1}),unref(step)===1?(openBlock(),createElementBlock("div",_hoisted_5$n,[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.step1.tip")),1),createVNode(ze,{type:"primary",text:"",onPointerdown:he},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.step1.localBrush")),1)]),_:1})])):createCommentVNode("",!0)])),unref(enableLocalBrush).value&&unref(step)===1?(openBlock(),createElementBlock("div",_hoisted_6$k,[createVNode(Ie,{label:"r"},{default:withCtx(()=>[createVNode(Ce,{modelValue:unref(localRThreshold),"onUpdate:modelValue":$e[3]||($e[3]=Dt=>isRef(localRThreshold)?localRThreshold.value=Dt:null),"show-input":"",size:"small",min:0,max:255,disabled:unref(step)!==1,onChange:ae},null,8,["modelValue","disabled"])]),_:1}),createVNode(Ie,{label:"g"},{default:withCtx(()=>[createVNode(Ce,{modelValue:unref(localGThreshold),"onUpdate:modelValue":$e[4]||($e[4]=Dt=>isRef(localGThreshold)?localGThreshold.value=Dt:null),"show-input":"",size:"small",min:0,max:255,disabled:unref(step)!==1,onChange:ae},null,8,["modelValue","disabled"])]),_:1}),createVNode(Ie,{label:"b"},{default:withCtx(()=>[createVNode(Ce,{modelValue:unref(localBThreshold),"onUpdate:modelValue":$e[5]||($e[5]=Dt=>isRef(localBThreshold)?localBThreshold.value=Dt:null),"show-input":"",size:"small",min:0,max:255,disabled:unref(step)!==1,onChange:ae},null,8,["modelValue","disabled"])]),_:1}),createVNode(Ie,{label:unref(n)("panels.picEditPanel.step1.brush")},{default:withCtx(()=>[createVNode(Ce,{modelValue:unref(localBrushSize),"onUpdate:modelValue":$e[6]||($e[6]=Dt=>isRef(localBrushSize)?localBrushSize.value=Dt:null),"show-input":"",size:"small",min:1,max:50,disabled:unref(step)!==1,onChange:j},null,8,["modelValue","disabled"])]),_:1},8,["label"])])):createCommentVNode("",!0),createVNode(Ue,{class:"step-button-group"},{default:withCtx(()=>[createVNode(ze,{disabled:unref(step)!==1,onPointerdown:L,size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.confirm")),1)]),_:1},8,["disabled"]),createVNode(ze,{disabled:unref(step)!==1,onPointerdown:oe,size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.cancel")),1)]),_:1},8,["disabled"]),createVNode(ze,{type:"primary",disabled:unref(step)===1,onPointerdown:$e[7]||($e[7]=Dt=>V(1)),size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.edit")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),createBaseVNode("div",_hoisted_7$h,[createBaseVNode("div",_hoisted_8$h,toDisplayString$1(unref(r)("panels.picEditPanel.step2.title")),1),createBaseVNode("div",_hoisted_9$h,toDisplayString$1(unref(r)("panels.picEditPanel.step2.content")),1)]),createBaseVNode("div",_hoisted_10$h,[createBaseVNode("div",_hoisted_11$h,toDisplayString$1(unref(r)("panels.picEditPanel.step3.title")),1),createVNode(Pt,{class:"fit-curve-form form","label-width":"50px"},{default:withCtx(()=>[createVNode(Ie,{label:""},{default:withCtx(()=>[createVNode(hn,{modelValue:unref(maxError),"onUpdate:modelValue":$e[8]||($e[8]=Dt=>isRef(maxError)?maxError.value=Dt:null),min:1,max:10,disabled:unref(step)!==3,onInput:le,precision:2},null,8,["modelValue","disabled"])]),_:1}),createVNode(Ie,{label:""},{default:withCtx(()=>[createVNode(hn,{modelValue:unref(dropThreshold),"onUpdate:modelValue":$e[9]||($e[9]=Dt=>isRef(dropThreshold)?dropThreshold.value=Dt:null),min:0,max:100,disabled:unref(step)!==3,onInput:de,precision:2},null,8,["modelValue","disabled"])]),_:1}),createVNode(Ue,{class:"step-button-group"},{default:withCtx(()=>[createVNode(ze,{disabled:unref(step)!==3,onPointerdown:re,size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.confirm")),1)]),_:1},8,["disabled"]),createVNode(ze,{disabled:unref(step)!==3,onPointerdown:ue,size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.cancel")),1)]),_:1},8,["disabled"]),createVNode(ze,{type:"primary",disabled:unref(step)===3,onPointerdown:$e[10]||($e[10]=Dt=>V(3)),size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.edit")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),createBaseVNode("div",_hoisted_12$h,[createBaseVNode("div",_hoisted_13$f,toDisplayString$1(unref(r)("panels.picEditPanel.step4.title")),1),createBaseVNode("div",_hoisted_14$e,toDisplayString$1(unref(r)("panels.picEditPanel.step4.content")),1)])])}}}),FontPicEditPanel=_export_sfc(_sfc_main$$,[["__scopeId","data-v-9033a9ec"]]),deepClone=e=>clone(e),applyOffsetToPoints=(e,n,r)=>e&&e.map(g=>({...g,x:g.x+n,y:g.y+r})),getBoundingBox=e=>{let n=1/0,r=1/0,g=-1/0,y=-1/0;return e.forEach(k=>{k.x<n&&(n=k.x),k.x>g&&(g=k.x),k.y<r&&(r=k.y),k.y>y&&(y=k.y)}),{x:isFinite(n)?n:0,y:isFinite(r)?r:0,w:isFinite(g)&&isFinite(n)?g-n:0,h:isFinite(y)&&isFinite(r)?y-r:0}},convertGeneratedComponent=(e,n)=>{const r=n.ox||0,g=n.oy||0,y=e.getData(),$={"glyph-pen":"pen","glyph-polygon":"polygon","glyph-rectangle":"rectangle","glyph-ellipse":"ellipse"}[y.type]||"pen",V=y.points?applyOffsetToPoints(y.points,r,g):[];let L=getBoundingBox(V);!V.length&&$==="rectangle"&&(L={x:r+(y.x||0),y:g+(y.y||0),w:y.width||0,h:y.height||0}),!V.length&&$==="ellipse"&&(L={x:r+(y.centerX||0)-(y.radiusX||0),y:g+(y.centerY||0)-(y.radiusY||0),w:(y.radiusX||0)*2,h:(y.radiusY||0)*2});const z={uuid:genUUID(),type:$,name:n.name,lock:n.lock,visible:n.visible,usedInCharacter:n.usedInCharacter,opacity:n.opacity,fillColor:n.fillColor,ox:0,oy:0,x:L.x,y:L.y,w:L.w,h:L.h,rotation:0,flipX:!1,flipY:!1};return $==="pen"?{...z,value:{points:V,fillColor:n.value.fillColor||"",strokeColor:"#000",closePath:!0,editMode:!1,preview:y.preview,contour:y.contour}}:$==="polygon"?{...z,value:{points:V,fillColor:n.value.fillColor||"",strokeColor:"#000",closePath:!0,preview:y.preview,contour:y.contour}}:$==="rectangle"?{...z,value:{width:y.width,height:y.height,fillColor:n.value.fillColor||"",strokeColor:"#000",preview:y.preview,contour:y.contour}}:$==="ellipse"?{...z,value:{radiusX:y.radiusX,radiusY:y.radiusY,fillColor:n.value.fillColor||"",strokeColor:"#000",preview:y.preview,contour:y.contour}}:{...z,value:y}},cloneNormalComponent=(e,n)=>{const r=deepClone(e);r.uuid=genUUID();const g=n.ox||0,y=n.oy||0;return typeof r.x=="number"&&(r.x+=g),typeof r.y=="number"&&(r.y+=y),typeof r.ox=="number"&&(r.ox+=g),typeof r.oy=="number"&&(r.oy+=y),r},expandGlyphComponent=e=>{const n=e.value;n._o||executeScript(n);const r=n._o?._components||[],g=(n.orderedList||[]).map(L=>L.type==="component"?n.components.find(z=>z.uuid===L.uuid):null).filter(L=>L&&L.type!=="glyph"),y=r.map(L=>convertGeneratedComponent(L,e)),k=g.map(L=>cloneNormalComponent(L,e)),$=[...y,...k],V=$.map(L=>({type:"component",uuid:L.uuid}));return{components:$,orderedItems:V}},isCharacterFile=e=>"character"in e,formatContainerGlyphComponents=e=>{const n=e.orderedList||[],r=new Map,g=[],y=[],k=new Set;let $=!1;return e.components.forEach(V=>{r.set(V.uuid,V)}),n.forEach(V=>{if(V.type!=="component"){y.push(V);return}const L=r.get(V.uuid);if(L)if(k.add(L.uuid),L.type==="glyph"){const{components:z,orderedItems:j}=expandGlyphComponent(L);z.length?($=!0,z.forEach((ae,oe)=>{g.push(ae),y.push(j[oe])})):$=!0}else{const z=deepClone(L);g.push(z),y.push({type:"component",uuid:z.uuid})}}),e.components.forEach(V=>{if(!k.has(V.uuid))if(V.type==="glyph"){const{components:L,orderedItems:z}=expandGlyphComponent(V);L.length?($=!0,L.forEach((j,ae)=>{g.push(j),y.push(z[ae])})):$=!0}else{const L=deepClone(V);g.push(L),y.push({type:"component",uuid:L.uuid})}}),$&&(e.components=g,e.orderedList=y,"selectedComponentsUUIDs"in e&&e.selectedComponentsUUIDs&&(e.selectedComponentsUUIDs=[]),"selectedComponentsTree"in e&&e.selectedComponentsTree&&(e.selectedComponentsTree=[]),isCharacterFile(e)?executeCharacterScript(e):executeScript(e)),$},formatCharacterGlyphComponents=e=>formatContainerGlyphComponents(e),formatGlyphGlyphComponents=e=>formatContainerGlyphComponents(e),_hoisted_1$Z={class:"widget ringController"},_hoisted_2$X=["width","height"],outerSize=12,_sfc_main$_=defineComponent({__name:"RingController",props:{radius:Object({min:Number,max:Number,value:Number,name:String}),degree:Object({min:Number,max:Number,value:Number,name:String}),params:Array,size:{type:Number,default:50},onChange:Function},setup(e){const n=e,{radius:r,degree:g,params:y,size:k,onChange:$}=toRefs(n),V=ref(null),L=k.value-outerSize*2,z=xe=>Math.PI/180*xe,j=xe=>xe/Math.PI*180;onMounted(()=>{_e(),V.value.addEventListener("mousedown",le)});const ae=(xe,Ne,$e,Ce)=>Math.sqrt((xe-$e)*(xe-$e)+(Ne-Ce)*(Ne-Ce)),oe=computed(()=>L/2/(r.value.max-r.value.min)*(r.value.value-r.value.min)),re=ref("defualt");let ue=-1;const le=xe=>{ae(xe.offsetX,xe.offsetY,k.value/2+oe?.value*Math.cos(z(g?.value.value)),k.value/2-oe?.value*Math.sin(z(g?.value.value)))<=5&&(document.body.addEventListener("mousemove",de),document.body.addEventListener("mouseup",he),xe.offsetX,xe.offsetY,re.value="inner-move");for(let Ne=0;Ne<(y?.value).length;Ne++){const $e=(y?.value)[Ne],Ce=2*Math.PI*Ne/(y?.value).length,Ie=Ce+2*Math.PI/(y?.value).length,ze=k.value/2-outerSize/2,Ue=Ce+(Ie-Ce)/($e.max-$e.min)*($e.value-$e.min);ae(xe.offsetX,xe.offsetY,k.value/2+ze*Math.cos(Ue),k.value/2+ze*Math.sin(Ue))<=5&&(document.body.addEventListener("mousemove",de),document.body.addEventListener("mouseup",he),xe.offsetX,xe.offsetY,ue=Ne,re.value="outer-move")}},de=xe=>{switch(re.value){case"inner-move":{const Ne=ae(xe.offsetX,xe.offsetY,k.value/2,k.value/2),$e=r.value.min+Ne/(L/2)*(r.value.max-r.value.min);if(Ne<=L/2){let Ce=Math.atan2(-(xe.offsetY-k.value/2),xe.offsetX-k.value/2);Ce<0&&g.value.max>180&&(Ce+=Math.PI*2);const Ie=j(Ce);let ze=g.value.value;Ie>=g.value.min&&Ie<=g.value.max&&(ze=Ie),$.value($e,ze,Object.assign([],y.value)),xe.offsetX,xe.offsetY,re.value="inner-move"}break}case"outer-move":{let Ne=Math.atan2(xe.offsetY-k.value/2,xe.offsetX-k.value/2);Ne<0&&(Ne+=Math.PI*2);const $e=y.value[ue],Ce=2*Math.PI*ue/(y?.value).length,Ie=Ce+2*Math.PI/(y?.value).length,ze=j(Ne),Ue=$e.min+(ze-j(Ce))/(j(Ie)-j(Ce))*($e.max-$e.min);if(Ue>=$e.min&&Ue<=$e.max){const Pt=Object.assign([],y.value);Pt[ue].value=Ue,$.value(r.value.value,g.value.value,Pt),xe.offsetX,xe.offsetY,re.value="outer-move"}break}}},he=()=>{re.value="defualt",ue=-1,document.body.removeEventListener("mousemove",de),document.body.removeEventListener("mouseup",he)};watch([r,g,y,k],()=>{_e()},{deep:!0});const _e=()=>{const xe=V.value.getContext("2d");for(let Ne=0;Ne<(y?.value).length;Ne++){const $e=(y?.value)[Ne],Ce=2*Math.PI*Ne/(y?.value).length,Ie=Ce+2*Math.PI/(y?.value).length,ze=k.value/2-outerSize/2,Ue=Ce+(Ie-Ce)/($e.max-$e.min)*($e.value-$e.min);xe.fillStyle="#153063",xe.beginPath(),xe.arc(k.value/2,k.value/2,k.value/2,Ce,Ie),xe.lineTo(k.value/2,k.value/2),xe.closePath(),xe.fill(),xe.fillStyle="white",xe.beginPath(),xe.arc(k.value/2,k.value/2,k.value/2,Ce+z(2),Ie-z(2)),xe.lineTo(k.value/2,k.value/2),xe.closePath(),xe.fill(),xe.fillStyle="#153063",xe.beginPath(),xe.arc(k.value/2+ze*Math.cos(Ue),k.value/2+ze*Math.sin(Ue),5,0,2*Math.PI),xe.closePath(),xe.fill()}xe.fillStyle="#153063",xe.beginPath(),xe.arc(k.value/2,k.value/2,L/2,0,2*Math.PI),xe.closePath(),xe.fill(),xe.fillStyle="white",xe.beginPath(),xe.arc(k.value/2,k.value/2,L/2,-z(g.value.min),-z(g.value.min)-z(g.value.max-g.value.min),!0),xe.lineTo(k.value/2,k.value/2),xe.closePath(),xe.fill(),xe.strokeStyle="#153063",xe.lineWidth=2,xe.beginPath(),xe.arc(k.value/2,k.value/2,L/2,0,2*Math.PI),xe.closePath(),xe.stroke(),g.value.min===0&&g.value.max===360&&(xe.beginPath(),xe.moveTo(k.value/2,k.value/2),xe.lineTo(k.value,k.value/2),xe.closePath(),xe.stroke()),xe.fillStyle="#153063",xe.beginPath(),xe.arc(k.value/2+oe?.value*Math.cos(z(g?.value.value)),k.value/2-oe?.value*Math.sin(z(g?.value.value)),5,0,2*Math.PI),xe.closePath(),xe.fill()};return(xe,Ne)=>(openBlock(),createElementBlock("div",_hoisted_1$Z,[createBaseVNode("canvas",{ref_key:"canvas",ref:V,width:unref(k),height:unref(k)},null,8,_hoisted_2$X)]))}}),editing$3=ref(!1),selectControl$1=ref(""),_hoisted_1$Y={class:"glyph-edit-panel"},_hoisted_2$W={key:0,class:"character-glyph-edit-panel"},_hoisted_3$y={class:"character-edit-panel"},_hoisted_4$t={class:"name-wrap"},_hoisted_5$m={class:"title"},_hoisted_6$j={key:0,class:"layout-wrap"},_hoisted_7$g={class:"title"},_hoisted_8$g={class:"ratio-item"},_hoisted_9$g={class:"transform-wrap"},_hoisted_10$g={class:"title"},_hoisted_11$g={class:"parameters-wrap"},_hoisted_12$g={class:"title"},_hoisted_13$e={class:"param-btn-group"},_hoisted_14$d={key:0},_hoisted_15$b=["onPointerdown"],_hoisted_16$b={class:"down-menu"},_hoisted_17$9={class:"ratio-item"},_hoisted_18$8={key:1},_hoisted_19$8={key:2},_hoisted_20$8={key:0,class:"ring-controller-wrap"},_hoisted_21$7={key:1,class:"number-controller-wrap"},_hoisted_22$7={key:3},_hoisted_23$7={key:0},_hoisted_24$7={key:1},_hoisted_25$6={key:2},_hoisted_26$5={key:0,class:"ring-controller-wrap"},_hoisted_27$5={key:1,class:"number-controller-wrap"},_hoisted_28$5={class:"joints-wrap"},_hoisted_29$5={class:"title"},_hoisted_30$5={class:"fill-color-wrap"},_hoisted_31$4={class:"title"},_hoisted_32$4={key:0,class:"format-component-wrap"},_hoisted_33$4={class:"title"},_sfc_main$Z=defineComponent({__name:"GlyphEditPanel",setup(e){const{tm:n,t:r}=useI18n(),g=ze=>{saveState("",[editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo,ze)},y=computed(()=>{let ze=selectedComponent.value;return editCharacterFile.value.selectedComponentsTree&&editCharacterFile.value.selectedComponentsTree.length&&(selectedSubComponent.value?ze=selectedSubComponent.value:ze=SubComponentsRoot.value),ze});onUnmounted(()=>{draggable$1.value=!0,dragOption.value="default",checkJoints.value=!1,checkRefLines.value=!1});const k=ref(0),$=[{value:0,key:"widget"},{value:1,key:"number"}],V=ref(150);y.value?.value?._o?.getJoints()?.map(ze=>{ze&&(jointsCheckedMap.value[ze.name]=!1)}),watch([y,selectedComponent],()=>{jointsCheckedMap.value={},y.value?.value?._o?.getJoints()?.map(ze=>{ze&&(jointsCheckedMap.value[ze.name]=!1)})});let L=null,z=!1;watch(editCharacterFile,(ze,Ue)=>{L&&clearTimeout(L),L=setTimeout(()=>{z=!1,clearTimeout(L)},500),z||(g({editCharacterFile:Ue,newRecord:!0}),z=!0)});const j=ze=>{editCharacterFile.value.selectedComponentsTree&&editCharacterFile.value.selectedComponentsTree.length?modifySubComponent({ox:ze}):modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{ox:ze})},ae=ze=>{editCharacterFile.value.selectedComponentsTree&&editCharacterFile.value.selectedComponentsTree.length?modifySubComponent({oy:ze}):modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{oy:ze})},oe=(ze,Ue)=>{if(ze.value=Ue,ze.ratioed)if(y.value.value.system_script||(y.value.value.system_script={}),editCharacterFile.value.selectedComponentsTree&&editCharacterFile.value.selectedComponentsTree.length&&selectedSubComponent.value){let Pt=getRatioLayout2(SubComponentsRoot.value.value,ze.ratio);if(Pt){const hn=`window.comp_glyph.setParam('${ze.name}',window.glyph.getRatioLayout('${ze.ratio}') / ${Pt} * ${Ue});`;y.value.value.system_script[ze.name]=hn}}else{let Pt=getCharacterRatioLayout(editCharacterFile.value,ze.ratio);if(Pt){const hn=`window.comp_glyph.setParam('${ze.name}',window.character.getRatioLayout('${ze.ratio}') / ${Pt} * ${Ue});`;y.value.value.system_script[ze.name]=hn}}executeScript(y.value.value),executeCharacterScript(editCharacterFile.value),y.value.value._o.getJoints().map(Pt=>{Pt.component=y.value}),emitter.emit("renderPreviewCanvasByUUIDOnEditing",editCharacterFile.value.uuid),emitter.emit("renderCharacter",!0)},re=(ze,Ue)=>{if(ze.ratioed)if(y.value.value.system_script||(y.value.value.system_script={}),editCharacterFile.value.selectedComponentsTree&&editCharacterFile.value.selectedComponentsTree.length&&selectedSubComponent.value){let Pt=getRatioLayout2(SubComponentsRoot.value.value,ze.ratio);if(Pt){const hn=`window.comp_glyph.setParam('${ze.name}',window.glyph.getRatioLayout('${ze.ratio}') / ${Pt} * ${ze.value});`;y.value.value.system_script[ze.name]=hn}}else{let Pt=getCharacterRatioLayout(editCharacterFile.value,ze.ratio);if(Pt){const hn=`window.comp_glyph.setParam('${ze.name}',window.character.getRatioLayout('${ze.ratio}') / ${Pt} * ${ze.value});`;y.value.value.system_script[ze.name]=hn}}executeScript(y.value.value),executeCharacterScript(editCharacterFile.value),emitter.emit("renderPreviewCanvasByUUIDOnEditing",y.value.value.uuid),emitter.emit("renderCharacter")};watch([checkJoints,checkRefLines],()=>{emitter.emit("renderCharacter")}),watch(jointsCheckedMap,()=>{editStatus.value===Status.Edit?emitter.emit("renderCharacter"):editStatus.value===Status.Glyph&&emitter.emit("renderGlyph"),y.value?.value?._o?.renderJoints(canvas.value,{type:"selected",joints:Object.keys(jointsCheckedMap.value).filter(ze=>!!jointsCheckedMap.value[ze])})},{deep:!0}),watch(dragOption,()=>{dragOption.value==="layout"&&(!editCharacterFile.value.selectedComponentsTree||!editCharacterFile.value.selectedComponentsTree.length)&&(grid.type=GridType.LayoutGrid)});let ue=ref({});onMounted(()=>{editStatus.value===Status.Edit&&y.value.value.parameters?.parameters.map(ze=>{ue.value[ze.uuid]=!1})});const le=(ze,Ue,Pt,hn)=>{ze.radius.value=Ue,ze.degree.value=Pt,ze.params=Object.assign([],hn),executeScript(y.value.value),executeCharacterScript(editCharacterFile.value),emitter.emit("renderPreviewCanvasByUUID",editCharacterFile.value.uuid),emitter.emit("renderCharacter",!0)},de=()=>{executeScript(y.value.value),executeCharacterScript(editCharacterFile.value),emitter.emit("renderCharacter_forceUpdate",!0),emitter.emit("renderPreviewCanvasByUUID",editCharacterFile.value.uuid)},he=ze=>{const Ue=getConstant(ze.value);ze.type=Ue.type,ze.value=Ue.value;const Pt=constantGlyphMap.get(Ue.uuid);for(let hn=0;hn<Pt.length;hn++)if(Pt[hn].parameterUUID===ze.uuid){Pt.splice(hn,1);break}},_e=ze=>{selectedParam.value=ze,selectedParamType.value="character_components",setSetAsGlobalParamDialogVisible(!0)},xe=ze=>{selectedParam.value=ze,selectedParamType.value="character_components",setSelectGlobalParamDialogVisible(!0)},Ne=ze=>{const Ue=constantGlyphMap.get(ze.value);for(let Pt=0;Pt<Ue.length;Pt++){const hn=Ue[Pt];let Dt=null;if(hn.constantType===ConstantType.Parameter)Dt=getGlyphByUUID(Ue[Pt].glyphUUID);else if(hn.constantType===ConstantType.Component){const xn=Ue[Pt].parentUUID;let jt=null;hn.glyphType===GlyphType.Char?jt=selectedItemByUUID(selectedFile.value.characterList,xn):jt=getGlyphByUUID(xn),Dt=jt.value}Dt&&(executeScript(Dt),emitter.emit("renderGlyphPreviewCanvasByUUID",Dt.uuid))}},$e=ze=>{emitter.emit("renderCharacter",!0)},Ce=()=>{tips.value=r("panels.paramsPanel.formatComponent.confirmMsg"),setTipsDialogVisible(!0,()=>{Ie()})},Ie=()=>{if(!y.value||y.value.type!=="glyph"){tips.value="",setTipsDialogVisible(!0);return}if(editCharacterFile.value.selectedComponentsTree&&editCharacterFile.value.selectedComponentsTree.length&&selectedSubComponent.value){tips.value="",setTipsDialogVisible(!0);return}const ze=expandGlyphComponent(y.value);if(!ze.components.length){tips.value="",setTipsDialogVisible(!0);return}const Ue=selectedComponentUUID.value;editCharacterFile.value.selectedComponentsUUIDs=[],editCharacterFile.value.selectedComponentsTree=[];const Pt=editCharacterFile.value.components.findIndex(hn=>hn.uuid===Ue);if(Pt!==-1){const hn=editCharacterFile.value.orderedList.findIndex(jt=>jt&&jt.type==="component"&&jt.uuid===Ue),Dt=[...editCharacterFile.value.components.slice(0,Pt),...ze.components,...editCharacterFile.value.components.slice(Pt+1)];let xn=editCharacterFile.value.orderedList;hn!==-1?xn=[...editCharacterFile.value.orderedList.slice(0,hn),...ze.orderedItems,...editCharacterFile.value.orderedList.slice(hn+1)]:xn=[...editCharacterFile.value.orderedList,...ze.orderedItems],editCharacterFile.value.orderedList=xn,editCharacterFile.value.components=Dt}executeCharacterScript(editCharacterFile.value),emitter.emit("renderCharacter",!0),emitter.emit("renderPreviewCanvasByUUID",editCharacterFile.value.uuid)};return(ze,Ue)=>{const Pt=resolveComponent("el-input"),hn=resolveComponent("el-form-item"),Dt=resolveComponent("el-form"),xn=resolveComponent("el-input-number"),jt=resolveComponent("font-awesome-icon"),Vn=resolveComponent("el-option"),Rn=resolveComponent("el-select"),Tn=resolveComponent("el-switch"),Ln=resolveComponent("el-icon"),Sn=resolveComponent("el-button"),An=resolveComponent("el-popover"),In=resolveComponent("el-slider"),Mn=resolveComponent("el-tab-pane"),ra=resolveComponent("el-collapse-item"),da=resolveComponent("el-collapse"),ua=resolveComponent("el-tabs"),aa=resolveComponent("el-checkbox"),Nn=resolveComponent("el-color-picker");return openBlock(),createElementBlock("div",_hoisted_1$Y,[unref(editStatus)===unref(Status).Edit?(openBlock(),createElementBlock("div",_hoisted_2$W,[createBaseVNode("div",_hoisted_3$y,[createBaseVNode("div",_hoisted_4$t,[createBaseVNode("div",_hoisted_5$m,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(Dt,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(hn,{label:unref(n)("panels.paramsPanel.componentName.label")},{default:withCtx(()=>[createVNode(Pt,{modelValue:y.value.name,"onUpdate:modelValue":Ue[0]||(Ue[0]=En=>y.value.name=En)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),y.value.value.layout?(openBlock(),createElementBlock("div",_hoisted_6$j,[createBaseVNode("div",_hoisted_7$g,toDisplayString$1(unref(r)("panels.paramsPanel.layout.title")),1),createVNode(Dt,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(hn,{label:unref(n)("panels.paramsPanel.layout.type")},{default:withCtx(()=>[createVNode(Pt,{disabled:"",modelValue:y.value.value.layout.type,"onUpdate:modelValue":Ue[1]||(Ue[1]=En=>y.value.value.layout.type=En)},null,8,["modelValue"])]),_:1},8,["label"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(Object.keys(y.value.value.layout.params),En=>(openBlock(),createBlock(hn,{label:En},{default:withCtx(()=>[createVNode(xn,{modelValue:y.value.value.layout.params[En],"onUpdate:modelValue":Zn=>y.value.value.layout.params[En]=Zn,onChange:de,precision:2},null,8,["modelValue","onUpdate:modelValue"]),createBaseVNode("div",_hoisted_8$g,[createVNode(jt,{class:normalizeClass(["ratio-icon",{selected:y.value.value.layout.ratioedMap&&y.value.value.layout.ratioedMap[En].ratioed}]),onPointerdown:()=>{y.value.value.layout.ratioedMap||(y.value.value.layout.ratioedMap=new Map),y.value.value.layout.ratioedMap[En]||y.value.value.layout.ratioedMap.set(En,{ratioed:!0}),y.value.value.layout.ratioedMap[En].ratioed=!y.value.value.layout.ratioedMap[En].ratioed},icon:["fas","percent"]},null,8,["class","onPointerdown"]),createVNode(Rn,{modelValue:y.value.value.layout.ratioedMap[En].ratio,"onUpdate:modelValue":Zn=>y.value.value.layout.ratioedMap[En].ratio=Zn,class:"control-type-select",placeholder:"Ratio",disabled:!y.value.value.layout.ratioedMap||!y.value.value.layout.ratioedMap[En].ratioed},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(getRatioOptions)(y.value.value),Zn=>(openBlock(),createBlock(Vn,{key:Zn.key,label:Zn.label,value:Zn.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])])]),_:2},1032,["label"]))),256)),createVNode(hn,{label:""},{default:withCtx(()=>[createVNode(Tn,{modelValue:unref(editing$3),"onUpdate:modelValue":Ue[2]||(Ue[2]=En=>isRef(editing$3)?editing$3.value=En:null)},null,8,["modelValue"])]),_:1})]),_:1})])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_9$g,[createBaseVNode("div",_hoisted_10$g,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(Dt,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(hn,{label:unref(n)("panels.paramsPanel.transform.x")},{default:withCtx(()=>[createVNode(xn,{"model-value":y.value.ox,precision:1,onChange:j},null,8,["model-value"])]),_:1},8,["label"]),createVNode(hn,{label:unref(n)("panels.paramsPanel.transform.y")},{default:withCtx(()=>[createVNode(xn,{"model-value":y.value.oy,precision:1,onChange:ae},null,8,["model-value"])]),_:1},8,["label"])]),_:1})])]),createBaseVNode("div",_hoisted_11$g,[createBaseVNode("div",_hoisted_12$g,toDisplayString$1(unref(r)("panels.paramsPanel.params.title")),1),createVNode(Dt,{class:"parameters-form","label-width":"80px"},{default:withCtx(()=>[createVNode(hn,{label:unref(n)("programming.joint")},{default:withCtx(()=>[createVNode(Tn,{modelValue:unref(checkJoints),"onUpdate:modelValue":Ue[3]||(Ue[3]=En=>isRef(checkJoints)?checkJoints.value=En:null)},null,8,["modelValue"])]),_:1},8,["label"]),createVNode(hn,{label:unref(n)("programming.refline")},{default:withCtx(()=>[createVNode(Tn,{modelValue:unref(checkRefLines),"onUpdate:modelValue":Ue[4]||(Ue[4]=En=>isRef(checkRefLines)?checkRefLines.value=En:null)},null,8,["modelValue"])]),_:1},8,["label"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(y.value.value.parameters.parameters,En=>(openBlock(),createBlock(hn,{label:En.name},{default:withCtx(()=>[createVNode(An,{placement:"right",width:250,trigger:"click"},{reference:withCtx(()=>[createVNode(Ln,{class:normalizeClass(["more-btn",{ring:En.type===unref(ParameterType).RingController||En.type===unref(ParameterType).Constant&&unref(getConstant)(En.value).type===unref(ParameterType).RingController,show:En.type===unref(ParameterType).Number||En.type===unref(ParameterType).Constant&&unref(getConstant)(En.value).type!==unref(ParameterType).RingController||k.value===0}])},{default:withCtx(()=>[createVNode(unref(more_default))]),_:2},1032,["class"])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_13$e,[withDirectives(createVNode(Sn,{onPointerdown:Zn=>he(En)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.cancelGlobalParam")),1)]),_:2},1032,["onPointerdown"]),[[vShow,En.type===unref(ParameterType).Constant]]),createVNode(Sn,{onPointerdown:Zn=>_e(En)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.setAsGlobalParam")),1)]),_:2},1032,["onPointerdown"]),createVNode(Sn,{onPointerdown:Zn=>xe(En)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.selectGlobalParam")),1)]),_:2},1032,["onPointerdown"]),withDirectives(createVNode(Sn,{type:"primary",onPointerdown:Zn=>Ne(En)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.updateGlobalParam")),1)]),_:2},1032,["onPointerdown"]),[[vShow,En.type===unref(ParameterType).Constant]])])]),_:2},1024),withDirectives(createBaseVNode("div",{class:normalizeClass(["global-param-note",{ring:En.type===unref(ParameterType).Constant&&unref(getConstant)(En.value).type===unref(ParameterType).RingController}])},toDisplayString$1(unref(r)("panels.paramsPanel.globalParam")),3),[[vShow,En.type===unref(ParameterType).Constant]]),En.type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_14$d,[createVNode(xn,{"model-value":En.value,step:En.max<=10?.01:1,min:En.min,max:En.max,precision:En.max<=10?2:0,disabled:En.type===unref(ParameterType).Constant,onChange:Zn=>oe(En,Zn)},null,8,["model-value","step","min","max","precision","disabled","onChange"]),withDirectives(createVNode(In,{step:En.max<=10?.01:1,min:En.min,max:En.max,precision:En.max<=10?2:0,onInput:Zn=>oe(En,Zn),modelValue:En.value,"onUpdate:modelValue":Zn=>En.value=Zn},null,8,["step","min","max","precision","onInput","modelValue","onUpdate:modelValue"]),[[vShow,En.type===unref(ParameterType).Number]]),createBaseVNode("div",{class:"down-menu-icon-wrap",onPointerdown:Zn=>unref(ue)[En.uuid]=!unref(ue)[En.uuid]},[createVNode(jt,{icon:["fas","arrow-down-wide-short"]})],40,_hoisted_15$b),withDirectives(createBaseVNode("div",_hoisted_16$b,[createBaseVNode("div",_hoisted_17$9,[createVNode(jt,{class:normalizeClass(["ratio-icon",{selected:En.ratioed}]),onPointerdown:()=>{En.ratioed=!En.ratioed,!En.ratioed&&y.value.value.system_script&&y.value.value.system_script[En.name]&&delete y.value.value.system_script[En.name]},icon:["fas","percent"]},null,8,["class","onPointerdown"]),createVNode(Rn,{modelValue:En.ratio,"onUpdate:modelValue":Zn=>En.ratio=Zn,class:"control-type-select",placeholder:"Ratio",disabled:!En.ratioed,onChange:Zn=>re(En,Zn)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(getRatioOptions)(y.value.value),Zn=>(openBlock(),createBlock(Vn,{key:Zn.key,label:Zn.label,value:Zn.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])])],512),[[vShow,unref(ue)[En.uuid]]])])):En.type===unref(ParameterType).Enum?(openBlock(),createElementBlock("div",_hoisted_18$8,[createVNode(Rn,{modelValue:En.value,"onUpdate:modelValue":Zn=>En.value=Zn,class:"enum-param-select",placeholder:"Select",onChange:Zn=>oe(En,Zn)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(En.options,Zn=>(openBlock(),createBlock(Vn,{key:Zn.value,label:Zn.label,value:Zn.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):En.type===unref(ParameterType).RingController?(openBlock(),createElementBlock("div",_hoisted_19$8,[createVNode(Rn,{modelValue:k.value,"onUpdate:modelValue":Ue[5]||(Ue[5]=Zn=>k.value=Zn),class:"control-type-select",placeholder:unref(n)("programming.controlType")},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList($,Zn=>createVNode(Vn,{key:Zn.key,label:unref(n)(`programming.${Zn.key}`),value:Zn.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"]),k.value===0?(openBlock(),createElementBlock("div",_hoisted_20$8,[createVNode(_sfc_main$_,{radius:En.value.radius,size:V.value,degree:En.value.degree,params:En.value.params,"on-change":(Zn,ha,xa)=>le(En.value,Zn,ha,xa)},null,8,["radius","size","degree","params","on-change"])])):k.value===1?(openBlock(),createElementBlock("div",_hoisted_21$7,[createVNode(ua,{type:"border-card"},{default:withCtx(()=>[createVNode(Mn,{label:"radius"},{default:withCtx(()=>[createVNode(hn,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Pt,{class:"parameter-value",modelValue:En.value.radius.name,"onUpdate:modelValue":Zn=>En.value.radius.name=Zn,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(hn,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value",modelValue:En.value.radius.value,"onUpdate:modelValue":Zn=>En.value.radius.value=Zn,min:En.value.radius.min,max:En.value.radius.max,precision:En.value.radius.max<=10?2:0,step:En.value.radius.max<=10?.01:1},null,8,["modelValue","onUpdate:modelValue","min","max","precision","step"]),createVNode(In,{onInput:Zn=>oe(En.value.radius,Zn),modelValue:En.value.radius.value,"onUpdate:modelValue":Zn=>En.value.radius.value=Zn,min:En.value.radius.min,max:En.value.radius.max,precision:En.value.radius.max<=10?2:0,step:En.value.radius.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Mn,{label:"degree"},{default:withCtx(()=>[createVNode(hn,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Pt,{class:"parameter-value",modelValue:En.value.degree.name,"onUpdate:modelValue":Zn=>En.value.degree.name=Zn,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(hn,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value",modelValue:En.value.degree.value,"onUpdate:modelValue":Zn=>En.value.degree.value=Zn,min:En.value.degree.min,max:En.value.degree.max,precision:En.max<=10?2:0,step:En.max<=10?.01:1},null,8,["modelValue","onUpdate:modelValue","min","max","precision","step"]),createVNode(In,{onInput:Zn=>oe(En.value.degree,Zn),modelValue:En.value.degree.value,"onUpdate:modelValue":Zn=>En.value.degree.value=Zn,min:En.value.degree.min,max:En.value.degree.max,precision:En.value.degree.max<=10?2:0,step:En.value.degree.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Mn,{label:"params"},{default:withCtx(()=>[createVNode(da,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(En.value.params,Zn=>(openBlock(),createBlock(ra,{title:Zn.name,name:"1"},{default:withCtx(()=>[createVNode(hn,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Pt,{class:"parameter-value",modelValue:Zn.name,"onUpdate:modelValue":ha=>Zn.name=ha,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(hn,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value",modelValue:Zn.value,"onUpdate:modelValue":ha=>Zn.value=ha,min:Zn.min,max:Zn.max,precision:Zn.max<=10?2:0,step:Zn.max<=10?.01:1},null,8,["modelValue","onUpdate:modelValue","min","max","precision","step"]),createVNode(In,{onInput:ha=>oe(Zn,ha),modelValue:Zn.value,"onUpdate:modelValue":ha=>Zn.value=ha,min:Zn.min,max:Zn.max,precision:Zn.max<=10?2:0,step:Zn.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024)])):createCommentVNode("",!0)])):En.type===unref(ParameterType).Constant?(openBlock(),createElementBlock("div",_hoisted_22$7,[unref(getConstant)(En.value).type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_23$7,[createVNode(xn,{"model-value":unref(getConstant)(En.value).value,step:unref(getConstant)(En.value).max<=10?.01:1,min:unref(getConstant)(En.value).min,max:unref(getConstant)(En.value).max,precision:unref(getConstant)(En.value).max<=10?2:0,onChange:Zn=>oe(unref(getConstant)(En.value),Zn)},null,8,["model-value","step","min","max","precision","onChange"]),createVNode(In,{"model-value":unref(getConstant)(En.value).value,step:unref(getConstant)(En.value).max<=10?.01:1,min:unref(getConstant)(En.value).min,max:unref(getConstant)(En.value).max,precision:unref(getConstant)(En.value).max<=10?2:0,onInput:Zn=>oe(unref(getConstant)(En.value),Zn),onChange:Zn=>oe(unref(getConstant)(En.value),Zn)},null,8,["model-value","step","min","max","precision","onInput","onChange"])])):unref(getConstant)(En.value).type===unref(ParameterType).Enum?(openBlock(),createElementBlock("div",_hoisted_24$7,[createVNode(Rn,{"model-value":unref(getConstant)(En.value).value,class:"enum-param-select",placeholder:"Select",onChange:Zn=>oe(unref(getConstant)(En.value),Zn)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(getConstant)(En.value).options,Zn=>(openBlock(),createBlock(Vn,{key:Zn.value,label:Zn.label,value:Zn.value},null,8,["label","value"]))),128))]),_:2},1032,["model-value","onChange"])])):unref(getConstant)(En.value).type===unref(ParameterType).RingController?(openBlock(),createElementBlock("div",_hoisted_25$6,[createVNode(Rn,{modelValue:k.value,"onUpdate:modelValue":Ue[6]||(Ue[6]=Zn=>k.value=Zn),class:"control-type-select",placeholder:unref(n)("programming.controlType")},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList($,Zn=>createVNode(Vn,{key:Zn.key,label:unref(n)(`programming.${Zn.key}`),value:Zn.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"]),k.value===0?(openBlock(),createElementBlock("div",_hoisted_26$5,[createVNode(_sfc_main$_,{radius:unref(getConstant)(En.value).value.radius,size:V.value,degree:unref(getConstant)(En.value).value.degree,params:unref(getConstant)(En.value).value.params,"on-change":(Zn,ha,xa)=>le(unref(getConstant)(En.value).value,Zn,ha,xa)},null,8,["radius","size","degree","params","on-change"])])):k.value===1?(openBlock(),createElementBlock("div",_hoisted_27$5,[createVNode(ua,{type:"border-card"},{default:withCtx(()=>[createVNode(Mn,{label:"radius"},{default:withCtx(()=>[createVNode(hn,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Pt,{class:"parameter-value","model-value":unref(getConstant)(En.value).value.radius.name,disabled:""},null,8,["model-value"])]),_:2},1024),createVNode(hn,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value","model-value":unref(getConstant)(En.value).value.radius.value,min:unref(getConstant)(En.value).value.radius.min,max:unref(getConstant)(En.value).value.radius.max,precision:unref(getConstant)(En.value).value.radius.max<=10?2:0,step:unref(getConstant)(En.value).value.radius.max<=10?.01:1,onChange:Zn=>oe(unref(getConstant)(En.value).value.radius,Zn)},null,8,["model-value","min","max","precision","step","onChange"]),createVNode(In,{onInput:Zn=>oe(unref(getConstant)(En.value).value.radius,Zn),"model-value":unref(getConstant)(En.value).value.radius.value,min:unref(getConstant)(En.value).value.radius.min,max:unref(getConstant)(En.value).value.radius.max,precision:unref(getConstant)(En.value).value.radius.max<=10?2:0,step:unref(getConstant)(En.value).value.radius.max<=10?.01:1},null,8,["onInput","model-value","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Mn,{label:"degree"},{default:withCtx(()=>[createVNode(hn,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Pt,{class:"parameter-value","model-value":unref(getConstant)(En.value).value.degree.name,disabled:""},null,8,["model-value"])]),_:2},1024),createVNode(hn,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value","model-value":unref(getConstant)(En.value).value.degree.value,min:unref(getConstant)(En.value).value.degree.min,max:unref(getConstant)(En.value).value.degree.max,precision:unref(getConstant)(En.value).value.degree.max<=10?2:0,step:unref(getConstant)(En.value).value.degree.max<=10?.01:1,onChange:Zn=>oe(unref(getConstant)(En.value).value.degree,Zn)},null,8,["model-value","min","max","precision","step","onChange"]),createVNode(In,{onInput:Zn=>oe(unref(getConstant)(En.value).value.degree,Zn),"model-value":unref(getConstant)(En.value).value.degree.value,min:unref(getConstant)(En.value).value.degree.min,max:unref(getConstant)(En.value).value.degree.max,precision:unref(getConstant)(En.value).value.degree.max<=10?2:0,step:unref(getConstant)(En.value).value.degree.max<=10?.01:1},null,8,["onInput","model-value","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Mn,{label:"params"},{default:withCtx(()=>[createVNode(da,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(getConstant)(En.value).value.params,Zn=>(openBlock(),createBlock(ra,{title:Zn.name,name:"1"},{default:withCtx(()=>[createVNode(hn,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Pt,{class:"parameter-value","model-value":Zn.name,disabled:""},null,8,["model-value"])]),_:2},1024),createVNode(hn,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value test","model-value":Zn.value,min:Zn.min,max:Zn.max,precision:Zn.max<=10?2:0,step:Zn.max<=10?.01:1,onChange:ha=>oe(Zn,ha)},null,8,["model-value","min","max","precision","step","onChange"]),createVNode(In,{onInput:ha=>oe(Zn,ha),modelValue:Zn.value,"onUpdate:modelValue":ha=>Zn.value=ha,min:Zn.min,max:Zn.max,precision:Zn.max<=10?2:0,step:Zn.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024)])):createCommentVNode("",!0)])):createCommentVNode("",!0)])):createCommentVNode("",!0)]),_:2},1032,["label"]))),256))]),_:1})]),createBaseVNode("div",_hoisted_28$5,[createBaseVNode("div",_hoisted_29$5,toDisplayString$1(unref(r)("panels.paramsPanel.joints.title")),1),createVNode(Dt,{class:"joints-form","label-width":"80px"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(y.value.value._o?y.value.value._o?.getJoints():[],En=>(openBlock(),createBlock(aa,{modelValue:unref(jointsCheckedMap)[En.name],"onUpdate:modelValue":Zn=>unref(jointsCheckedMap)[En.name]=Zn,label:En.name},null,8,["modelValue","onUpdate:modelValue","label"]))),256))]),_:1})]),createBaseVNode("div",_hoisted_30$5,[createBaseVNode("div",_hoisted_31$4,toDisplayString$1(unref(r)("panels.paramsPanel.fillColor.title")),1),createVNode(Dt,{class:"name-form","label-width":"120px"},{default:withCtx(()=>[createVNode(hn,{label:unref(n)("panels.paramsPanel.fillColor.label")},{default:withCtx(()=>[createVNode(Nn,{modelValue:y.value.value.fillColor,"onUpdate:modelValue":Ue[7]||(Ue[7]=En=>y.value.value.fillColor=En),"show-alpha":"",onChange:$e},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),y.value.type==="glyph"?(openBlock(),createElementBlock("div",_hoisted_32$4,[createBaseVNode("div",_hoisted_33$4,toDisplayString$1(unref(r)("panels.paramsPanel.formatComponent.title")),1),createVNode(Sn,{class:"format-button",type:"warning",onPointerdown:Ce},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.formatComponent.button")),1)]),_:1})])):createCommentVNode("",!0)])):createCommentVNode("",!0)])}}}),GlyphEditPanel$1=_export_sfc(_sfc_main$Z,[["__scopeId","data-v-f622b2d1"]]),editing$2=ref(!1),selectControl=ref(""),_hoisted_1$X={class:"glyph-edit-panel"},_hoisted_2$V={key:0,class:"character-glyph-edit-panel"},_hoisted_3$x={class:"character-edit-panel"},_hoisted_4$s={class:"name-wrap"},_hoisted_5$l={class:"title"},_hoisted_6$i={key:0,class:"layout-wrap"},_hoisted_7$f={class:"title"},_hoisted_8$f={class:"ratio-item"},_hoisted_9$f={class:"transform-wrap"},_hoisted_10$f={class:"title"},_hoisted_11$f={class:"parameters-wrap"},_hoisted_12$f={class:"title"},_hoisted_13$d={class:"param-btn-group"},_hoisted_14$c={key:0},_hoisted_15$a=["onPointerdown"],_hoisted_16$a={class:"down-menu"},_hoisted_17$8={class:"ratio-item"},_hoisted_18$7={key:1},_hoisted_19$7={key:2},_hoisted_20$7={key:0,class:"ring-controller-wrap"},_hoisted_21$6={key:1,class:"number-controller-wrap"},_hoisted_22$6={key:3},_hoisted_23$6={key:0},_hoisted_24$6={key:1},_hoisted_25$5={key:0,class:"ring-controller-wrap"},_hoisted_26$4={key:1,class:"number-controller-wrap"},_hoisted_27$4={class:"joints-wrap"},_hoisted_28$4={class:"title"},_hoisted_29$4={key:0,class:"format-component-wrap"},_hoisted_30$4={class:"title"},_sfc_main$Y=defineComponent({__name:"GlyphEditPanel_Glyph",setup(e){const{tm:n,t:r}=useI18n(),g=ze=>{saveState("",[editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo,ze)};let y=null,k=!1;watch(editGlyph,(ze,Ue)=>{y&&clearTimeout(y),y=setTimeout(()=>{k=!1,clearTimeout(y)},500),k||(g({editGlyph:Ue,newRecord:!0}),k=!0)});const $=computed(()=>{let ze=selectedComponent$1.value;return editGlyph.value.selectedComponentsTree&&editGlyph.value.selectedComponentsTree.length&&(selectedSubComponent$1.value?ze=selectedSubComponent$1.value:ze=SubComponentsRoot$1.value),ze});onUnmounted(()=>{draggable$1.value=!0,dragOption.value="default",checkJoints.value=!1,checkRefLines.value=!1});const V=ref(0),L=[{value:0,key:"widget"},{value:1,key:"number"}],z=ref(150),j=ref({});$.value?.value?._o?.getJoints()?.map(ze=>{ze&&(j.value[ze.name]=!1)}),watch($,()=>{j.value={},$.value?.value?._o?.getJoints()?.map(ze=>{ze&&(j.value[ze.name]=!1)})});const ae=ze=>{editGlyph.value.selectedComponentsTree&&editGlyph.value.selectedComponentsTree.length?modifySubComponent$1({ox:ze}):modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{ox:ze})},oe=ze=>{editGlyph.value.selectedComponentsTree&&editGlyph.value.selectedComponentsTree.length?modifySubComponent$1({oy:ze}):modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{oy:ze})},re=(ze,Ue)=>{if(ze.value=Ue,ze.ratioed)if($.value.value.system_script||($.value.value.system_script={}),editGlyph.value.selectedComponentsTree&&editGlyph.value.selectedComponentsTree.length&&selectedSubComponent$1.value){let Pt=getRatioLayout2(SubComponentsRoot$1.value.value,ze.ratio);if(Pt){const hn=`window.comp_glyph.setParam('${ze.name}',window.glyph.getRatioLayout('${ze.ratio}') / ${Pt} * ${Ue});`;$.value.value.system_script[ze.name]=hn}}else{let Pt=getRatioLayout(editGlyph.value,ze.ratio);if(Pt){const hn=`window.comp_glyph.setParam('${ze.name}',window.glyph.getRatioLayout('${ze.ratio}') / ${Pt} * ${Ue});`;$.value.value.system_script[ze.name]=hn}}executeScript(editGlyph.value),$.value?.value?._o?.getJoints()?.map(Pt=>{Pt.component=$.value}),emitter.emit("renderGlyphPreviewCanvasByUUIDOnEditing",editGlyph.value.uuid),emitter.emit("renderGlyph")},ue=(ze,Ue)=>{if(ze.ratioed)if($.value.value.system_script||($.value.value.system_script={}),editGlyph.value.selectedComponentsTree&&editGlyph.value.selectedComponentsTree.length&&selectedSubComponent$1.value){let Pt=getRatioLayout2(SubComponentsRoot$1.value.value,ze.ratio);if(Pt){const hn=`window.comp_glyph.setParam('${ze.name}',window.glyph.getRatioLayout('${ze.ratio}') / ${Pt} * ${ze.value});`;$.value.value.system_script[ze.name]=hn}}else{let Pt=getRatioLayout(editGlyph.value,ze.ratio);if(Pt){const hn=`window.comp_glyph.setParam('${ze.name}',window.glyph.getRatioLayout('${ze.ratio}') / ${Pt} * ${ze.value});`;$.value.value.system_script[ze.name]=hn}}executeScript(editGlyph.value),emitter.emit("renderGlyphPreviewCanvasByUUIDOnEditing",editGlyph.value.uuid),emitter.emit("renderGlyph")};watch(j,()=>{editStatus.value===Status.Edit?emitter.emit("renderCharacter"):editStatus.value===Status.Glyph&&emitter.emit("renderGlyph"),$.value?.value?._o?.renderJoints(canvas.value,{type:"selected",joints:Object.keys(j.value).filter(ze=>!!j.value[ze])})},{deep:!0}),watch([checkJoints,checkRefLines],()=>{emitter.emit("renderGlyph")}),watch(dragOption,()=>{});let le=ref({});onMounted(()=>{editStatus.value===Status.Edit&&$.value.value.parameters?.parameters.map(ze=>{le.value[ze.uuid]=!1})});const de=(ze,Ue,Pt,hn)=>{ze.radius.value=Ue,ze.degree.value=Pt,ze.params=Object.assign([],hn),executeScript(editGlyph.value),emitter.emit("renderGlyphPreviewCanvasByUUID",editGlyph.value.uuid),emitter.emit("renderGlyph",!0)},he=ze=>{const Ue=getConstant(ze.value);ze.type=Ue.type,ze.value=Ue.value;const Pt=constantGlyphMap.get(Ue.uuid);for(let hn=0;hn<Pt.length;hn++)if(Pt[hn].parameterUUID===ze.uuid){Pt.splice(hn,1);break}},_e=ze=>{selectedParam.value=ze,selectedParamType.value="glyph_components",setSetAsGlobalParamDialogVisible(!0)},xe=ze=>{selectedParam.value=ze,selectedParamType.value="glyph_components",setSelectGlobalParamDialogVisible(!0)},Ne=ze=>{const Ue=constantGlyphMap.get(ze.value);for(let Pt=0;Pt<Ue.length;Pt++){const hn=Ue[Pt];let Dt=null;if(hn.constantType===ConstantType.Parameter)Dt=getGlyphByUUID(Ue[Pt].glyphUUID);else if(hn.constantType===ConstantType.Component){const xn=Ue[Pt].parentUUID;let jt=null;hn.glyphType===GlyphType.Char?jt=selectedItemByUUID(selectedFile.value.characterList,xn):jt=getGlyphByUUID(xn),Dt=jt.value}Dt&&(executeScript(Dt),emitter.emit("renderGlyphPreviewCanvasByUUID",Dt.uuid))}},$e=()=>{executeScript($.value.value),executeScript(editGlyph.value),emitter.emit("renderGlyph_forceUpdate",!0),emitter.emit("renderGlyphPreviewCanvasByUUID",editGlyph.value.uuid)},Ce=()=>{tips.value=r("panels.paramsPanel.formatComponent.confirmMsg"),setTipsDialogVisible(!0,()=>{Ie()})},Ie=()=>{if(!$.value||$.value.type!=="glyph"){tips.value="",setTipsDialogVisible(!0);return}if(editGlyph.value.selectedComponentsTree&&editGlyph.value.selectedComponentsTree.length&&selectedSubComponent$1.value){tips.value="",setTipsDialogVisible(!0);return}const ze=expandGlyphComponent($.value);if(!ze.components.length){tips.value="",setTipsDialogVisible(!0);return}const Ue=selectedComponentUUID$1.value;editGlyph.value.selectedComponentsUUIDs=[],editGlyph.value.selectedComponentsTree=[];const Pt=editGlyph.value.components.findIndex(hn=>hn.uuid===Ue);if(Pt!==-1){const hn=editGlyph.value.orderedList.findIndex(jt=>jt&&jt.type==="component"&&jt.uuid===Ue),Dt=[...editGlyph.value.components.slice(0,Pt),...ze.components,...editGlyph.value.components.slice(Pt+1)];let xn=editGlyph.value.orderedList;hn!==-1?xn=[...editGlyph.value.orderedList.slice(0,hn),...ze.orderedItems,...editGlyph.value.orderedList.slice(hn+1)]:xn=[...editGlyph.value.orderedList,...ze.orderedItems],editGlyph.value.orderedList=xn,editGlyph.value.components=Dt}executeScript(editGlyph.value),emitter.emit("renderGlyph",!0),emitter.emit("renderGlyphPreviewCanvasByUUID",editGlyph.value.uuid)};return(ze,Ue)=>{const Pt=resolveComponent("el-input"),hn=resolveComponent("el-form-item"),Dt=resolveComponent("el-form"),xn=resolveComponent("el-input-number"),jt=resolveComponent("font-awesome-icon"),Vn=resolveComponent("el-option"),Rn=resolveComponent("el-select"),Tn=resolveComponent("el-switch"),Ln=resolveComponent("el-icon"),Sn=resolveComponent("el-button"),An=resolveComponent("el-popover"),In=resolveComponent("el-slider"),Mn=resolveComponent("el-tab-pane"),ra=resolveComponent("el-collapse-item"),da=resolveComponent("el-collapse"),ua=resolveComponent("el-tabs"),aa=resolveComponent("el-checkbox");return openBlock(),createElementBlock("div",_hoisted_1$X,[unref(editStatus)===unref(Status).Glyph?(openBlock(),createElementBlock("div",_hoisted_2$V,[createBaseVNode("div",_hoisted_3$x,[createBaseVNode("div",_hoisted_4$s,[createBaseVNode("div",_hoisted_5$l,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(Dt,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(hn,{label:unref(n)("panels.paramsPanel.componentName.label")},{default:withCtx(()=>[createVNode(Pt,{modelValue:$.value.name,"onUpdate:modelValue":Ue[0]||(Ue[0]=Nn=>$.value.name=Nn)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),$.value.value.layout?(openBlock(),createElementBlock("div",_hoisted_6$i,[createBaseVNode("div",_hoisted_7$f,toDisplayString$1(unref(r)("panels.paramsPanel.layout.title")),1),createVNode(Dt,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(hn,{label:unref(n)("panels.paramsPanel.layout.type")},{default:withCtx(()=>[createVNode(Pt,{disabled:"",modelValue:$.value.value.layout.type,"onUpdate:modelValue":Ue[1]||(Ue[1]=Nn=>$.value.value.layout.type=Nn)},null,8,["modelValue"])]),_:1},8,["label"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(Object.keys($.value.value.layout.params),Nn=>(openBlock(),createBlock(hn,{label:Nn},{default:withCtx(()=>[createVNode(xn,{modelValue:$.value.value.layout.params[Nn],"onUpdate:modelValue":En=>$.value.value.layout.params[Nn]=En,onChange:$e,precision:2},null,8,["modelValue","onUpdate:modelValue"]),createBaseVNode("div",_hoisted_8$f,[createVNode(jt,{class:normalizeClass(["ratio-icon",{selected:$.value.value.layout.ratioedMap&&$.value.value.layout.ratioedMap[Nn].ratioed}]),onPointerdown:()=>{$.value.value.layout.ratioedMap||($.value.value.layout.ratioedMap=new Map),$.value.value.layout.ratioedMap[Nn]||$.value.value.layout.ratioedMap.set(Nn,{ratioed:!0}),$.value.value.layout.ratioedMap[Nn].ratioed=!$.value.value.layout.ratioedMap[Nn].ratioed},icon:["fas","percent"]},null,8,["class","onPointerdown"]),createVNode(Rn,{modelValue:$.value.value.layout.ratioedMap[Nn].ratio,"onUpdate:modelValue":En=>$.value.value.layout.ratioedMap[Nn].ratio=En,class:"control-type-select",placeholder:"Ratio",disabled:!$.value.value.layout.ratioedMap||!$.value.value.layout.ratioedMap[Nn].ratioed},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(getRatioOptions)($.value.value),En=>(openBlock(),createBlock(Vn,{key:En.key,label:En.label,value:En.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])])]),_:2},1032,["label"]))),256)),createVNode(hn,{label:unref(n)("panels.paramsPanel.latoutEditing")},{default:withCtx(()=>[createVNode(Tn,{modelValue:unref(editing$2),"onUpdate:modelValue":Ue[2]||(Ue[2]=Nn=>isRef(editing$2)?editing$2.value=Nn:null)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_9$f,[createBaseVNode("div",_hoisted_10$f,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(Dt,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(hn,{label:unref(n)("panels.paramsPanel.transform.x")},{default:withCtx(()=>[createVNode(xn,{"model-value":$.value.ox,precision:1,onChange:ae},null,8,["model-value"])]),_:1},8,["label"]),createVNode(hn,{label:unref(n)("panels.paramsPanel.transform.y")},{default:withCtx(()=>[createVNode(xn,{"model-value":$.value.oy,precision:1,onChange:oe},null,8,["model-value"])]),_:1},8,["label"])]),_:1})])]),createBaseVNode("div",_hoisted_11$f,[createBaseVNode("div",_hoisted_12$f,toDisplayString$1(unref(r)("panels.paramsPanel.params.title")),1),createVNode(Dt,{class:"parameters-form","label-width":"80px"},{default:withCtx(()=>[createVNode(hn,{label:unref(n)("programming.joint")},{default:withCtx(()=>[createVNode(Tn,{modelValue:unref(checkJoints),"onUpdate:modelValue":Ue[3]||(Ue[3]=Nn=>isRef(checkJoints)?checkJoints.value=Nn:null)},null,8,["modelValue"])]),_:1},8,["label"]),createVNode(hn,{label:unref(n)("programming.refline")},{default:withCtx(()=>[createVNode(Tn,{modelValue:unref(checkRefLines),"onUpdate:modelValue":Ue[4]||(Ue[4]=Nn=>isRef(checkRefLines)?checkRefLines.value=Nn:null)},null,8,["modelValue"])]),_:1},8,["label"]),(openBlock(!0),createElementBlock(Fragment,null,renderList($.value.value.parameters.parameters,Nn=>(openBlock(),createBlock(hn,{label:Nn.name},{default:withCtx(()=>[createVNode(An,{placement:"right",width:250,trigger:"click"},{reference:withCtx(()=>[createVNode(Ln,{class:normalizeClass(["more-btn",{ring:Nn.type===unref(ParameterType).RingController||Nn.type===unref(ParameterType).Constant&&unref(getConstant)(Nn.value).type===unref(ParameterType).RingController,show:Nn.type===unref(ParameterType).Number||Nn.type===unref(ParameterType).Constant&&unref(getConstant)(Nn.value).type!==unref(ParameterType).RingController||V.value===0}])},{default:withCtx(()=>[createVNode(unref(more_default))]),_:2},1032,["class"])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_13$d,[withDirectives(createVNode(Sn,{onPointerdown:En=>he(Nn)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.cancelGlobalParam")),1)]),_:2},1032,["onPointerdown"]),[[vShow,Nn.type===unref(ParameterType).Constant]]),createVNode(Sn,{onPointerdown:En=>_e(Nn)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.setAsGlobalParam")),1)]),_:2},1032,["onPointerdown"]),createVNode(Sn,{onPointerdown:En=>xe(Nn)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.selectGlobalParam")),1)]),_:2},1032,["onPointerdown"]),withDirectives(createVNode(Sn,{type:"primary",onPointerdown:En=>Ne(Nn)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.updateGlobalParam")),1)]),_:2},1032,["onPointerdown"]),[[vShow,Nn.type===unref(ParameterType).Constant]])])]),_:2},1024),withDirectives(createBaseVNode("div",{class:normalizeClass(["global-param-note",{ring:Nn.type===unref(ParameterType).Constant&&unref(getConstant)(Nn.value).type===unref(ParameterType).RingController}])},toDisplayString$1(unref(r)("panels.paramsPanel.globalParam")),3),[[vShow,Nn.type===unref(ParameterType).Constant]]),Nn.type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_14$c,[createVNode(xn,{"model-value":Nn.value,step:Nn.max<=10?.01:1,min:Nn.min,max:Nn.max,precision:Nn.max<=10?2:0,onChange:En=>re(Nn,En)},null,8,["model-value","step","min","max","precision","onChange"]),createVNode(In,{step:Nn.max<=10?.01:1,min:Nn.min,max:Nn.max,precision:Nn.max<=10?2:0,onInput:En=>re(Nn,En),modelValue:Nn.value,"onUpdate:modelValue":En=>Nn.value=En},null,8,["step","min","max","precision","onInput","modelValue","onUpdate:modelValue"]),createBaseVNode("div",{class:"down-menu-icon-wrap",onPointerdown:En=>unref(le)[Nn.uuid]=!unref(le)[Nn.uuid]},[createVNode(jt,{icon:["fas","arrow-down-wide-short"]})],40,_hoisted_15$a),withDirectives(createBaseVNode("div",_hoisted_16$a,[createBaseVNode("div",_hoisted_17$8,[createVNode(jt,{class:normalizeClass(["ratio-icon",{selected:Nn.ratioed}]),onPointerdown:()=>{Nn.ratioed=!Nn.ratioed,!Nn.ratioed&&$.value.value.system_script&&$.value.value.system_script[Nn.name]&&delete $.value.value.system_script[Nn.name]},icon:["fas","percent"]},null,8,["class","onPointerdown"]),createVNode(Rn,{modelValue:Nn.ratio,"onUpdate:modelValue":En=>Nn.ratio=En,class:"control-type-select",placeholder:"Ratio",disabled:!Nn.ratioed,onChange:En=>ue(Nn,En)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(getRatioOptions)($.value.value),En=>(openBlock(),createBlock(Vn,{key:En.key,label:En.label,value:En.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])])],512),[[vShow,unref(le)[Nn.uuid]]])])):Nn.type===unref(ParameterType).Enum?(openBlock(),createElementBlock("div",_hoisted_18$7,[createVNode(Rn,{modelValue:Nn.value,"onUpdate:modelValue":En=>Nn.value=En,class:"enum-param-select",placeholder:"Select",onChange:En=>re(Nn,En)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Nn.options,En=>(openBlock(),createBlock(Vn,{key:En.value,label:En.label,value:En.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):Nn.type===unref(ParameterType).RingController?(openBlock(),createElementBlock("div",_hoisted_19$7,[createVNode(Rn,{modelValue:V.value,"onUpdate:modelValue":Ue[5]||(Ue[5]=En=>V.value=En),class:"control-type-select",placeholder:unref(n)("programming.controlType")},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(L,En=>createVNode(Vn,{key:En.key,label:unref(n)(`programming.${En.key}`),value:En.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"]),V.value===0?(openBlock(),createElementBlock("div",_hoisted_20$7,[createVNode(_sfc_main$_,{radius:Nn.value.radius,size:z.value,degree:Nn.value.degree,params:Nn.value.params,"on-change":(En,Zn,ha)=>de(Nn.value,En,Zn,ha)},null,8,["radius","size","degree","params","on-change"])])):V.value===1?(openBlock(),createElementBlock("div",_hoisted_21$6,[createVNode(ua,{type:"border-card"},{default:withCtx(()=>[createVNode(Mn,{label:"radius"},{default:withCtx(()=>[createVNode(hn,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Pt,{class:"parameter-value",modelValue:Nn.value.radius.name,"onUpdate:modelValue":En=>Nn.value.radius.name=En,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(hn,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value",modelValue:Nn.value.radius.value,"onUpdate:modelValue":En=>Nn.value.radius.value=En,min:Nn.value.radius.min,max:Nn.value.radius.max,precision:Nn.value.radius.max<=10?2:0,step:Nn.value.radius.max<=10?.01:1},null,8,["modelValue","onUpdate:modelValue","min","max","precision","step"]),createVNode(In,{onInput:En=>re(Nn.value.radius,En),modelValue:Nn.value.radius.value,"onUpdate:modelValue":En=>Nn.value.radius.value=En,min:Nn.value.radius.min,max:Nn.value.radius.max,precision:Nn.value.radius.max<=10?2:0,step:Nn.value.radius.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Mn,{label:"degree"},{default:withCtx(()=>[createVNode(hn,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Pt,{class:"parameter-value",modelValue:Nn.value.degree.name,"onUpdate:modelValue":En=>Nn.value.degree.name=En,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(hn,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value",modelValue:Nn.value.degree.value,"onUpdate:modelValue":En=>Nn.value.degree.value=En,min:Nn.value.degree.min,max:Nn.value.degree.max,precision:Nn.value.degree.max<=10?2:0,step:Nn.value.degree.max<=10?.01:1},null,8,["modelValue","onUpdate:modelValue","min","max","precision","step"]),createVNode(In,{onInput:En=>re(Nn.value.degree,En),modelValue:Nn.value.degree.value,"onUpdate:modelValue":En=>Nn.value.degree.value=En,min:Nn.value.degree.min,max:Nn.value.degree.max,precision:Nn.value.degree.max<=10?2:0,step:Nn.value.degree.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Mn,{label:"params"},{default:withCtx(()=>[createVNode(da,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Nn.value.params,En=>(openBlock(),createBlock(ra,{title:En.name,name:"1"},{default:withCtx(()=>[createVNode(hn,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Pt,{class:"parameter-value",modelValue:En.name,"onUpdate:modelValue":Zn=>En.name=Zn,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(hn,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value test",modelValue:En.value,"onUpdate:modelValue":Zn=>En.value=Zn,min:En.min,max:En.max,precision:En.max<=10?2:0,step:En.max<=10?.01:1},null,8,["modelValue","onUpdate:modelValue","min","max","precision","step"]),createVNode(In,{onInput:Zn=>re(En,Zn),modelValue:En.value,"onUpdate:modelValue":Zn=>En.value=Zn,min:En.min,max:En.max,precision:En.max<=10?2:0,step:En.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024)])):createCommentVNode("",!0)])):Nn.type===unref(ParameterType).Constant?(openBlock(),createElementBlock("div",_hoisted_22$6,[unref(getConstant)(Nn.value).type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_23$6,[createVNode(xn,{"model-value":unref(getConstant)(Nn.value).value,step:unref(getConstant)(Nn.value).max<=10?.01:1,min:unref(getConstant)(Nn.value).min,max:unref(getConstant)(Nn.value).max,precision:unref(getConstant)(Nn.value).max<=10?2:0,onChange:En=>re(unref(getConstant)(Nn.value),En)},null,8,["model-value","step","min","max","precision","onChange"]),createVNode(In,{"model-value":unref(getConstant)(Nn.value).value,step:unref(getConstant)(Nn.value).max<=10?.01:1,min:unref(getConstant)(Nn.value).min,max:unref(getConstant)(Nn.value).max,precision:unref(getConstant)(Nn.value).max<=10?2:0,onInput:En=>re(unref(getConstant)(Nn.value),En),onChange:En=>re(unref(getConstant)(Nn.value),En)},null,8,["model-value","step","min","max","precision","onInput","onChange"])])):unref(getConstant)(Nn.value).type===unref(ParameterType).RingController?(openBlock(),createElementBlock("div",_hoisted_24$6,[createVNode(Rn,{modelValue:V.value,"onUpdate:modelValue":Ue[6]||(Ue[6]=En=>V.value=En),class:"control-type-select",placeholder:unref(n)("programming.controlType")},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(L,En=>createVNode(Vn,{key:En.key,label:unref(n)(`programming.${En.key}`),value:En.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"]),V.value===0?(openBlock(),createElementBlock("div",_hoisted_25$5,[createVNode(_sfc_main$_,{radius:unref(getConstant)(Nn.value).value.radius,size:z.value,degree:unref(getConstant)(Nn.value).value.degree,params:unref(getConstant)(Nn.value).value.params,"on-change":(En,Zn,ha)=>de(unref(getConstant)(Nn.value).value,En,Zn,ha)},null,8,["radius","size","degree","params","on-change"])])):V.value===1?(openBlock(),createElementBlock("div",_hoisted_26$4,[createVNode(ua,{type:"border-card"},{default:withCtx(()=>[createVNode(Mn,{label:"radius"},{default:withCtx(()=>[createVNode(hn,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Pt,{class:"parameter-value","model-value":unref(getConstant)(Nn.value).value.radius.name,disabled:""},null,8,["model-value"])]),_:2},1024),createVNode(hn,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value","model-value":unref(getConstant)(Nn.value).value.radius.value,min:unref(getConstant)(Nn.value).value.radius.min,max:unref(getConstant)(Nn.value).value.radius.max,precision:unref(getConstant)(Nn.value).value.radius.max<=10?2:0,step:unref(getConstant)(Nn.value).value.radius.max<=10?.01:1,onChange:En=>re(unref(getConstant)(Nn.value).value.radius,En)},null,8,["model-value","min","max","precision","step","onChange"]),createVNode(In,{onInput:En=>re(unref(getConstant)(Nn.value).value.radius,En),"model-value":unref(getConstant)(Nn.value).value.radius.value,min:unref(getConstant)(Nn.value).value.radius.min,max:unref(getConstant)(Nn.value).value.radius.max,precision:unref(getConstant)(Nn.value).value.radius.max<=10?2:0,step:unref(getConstant)(Nn.value).value.radius.max<=10?.01:1},null,8,["onInput","model-value","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Mn,{label:"degree"},{default:withCtx(()=>[createVNode(hn,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Pt,{class:"parameter-value","model-value":unref(getConstant)(Nn.value).value.degree.name,disabled:""},null,8,["model-value"])]),_:2},1024),createVNode(hn,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value","model-value":unref(getConstant)(Nn.value).value.degree.value,min:unref(getConstant)(Nn.value).value.degree.min,max:unref(getConstant)(Nn.value).value.degree.max,precision:unref(getConstant)(Nn.value).value.degree.max<=10?2:0,step:unref(getConstant)(Nn.value).value.degree.max<=10?.01:1,onChange:En=>re(unref(getConstant)(Nn.value).value.degree,En)},null,8,["model-value","min","max","precision","step","onChange"]),createVNode(In,{onInput:En=>re(unref(getConstant)(Nn.value).value.degree,En),"model-value":unref(getConstant)(Nn.value).value.degree.value,min:unref(getConstant)(Nn.value).value.degree.min,max:unref(getConstant)(Nn.value).value.degree.max,precision:unref(getConstant)(Nn.value).value.degree.max<=10?2:0,step:unref(getConstant)(Nn.value).value.degree.max<=10?.01:1},null,8,["onInput","model-value","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Mn,{label:"params"},{default:withCtx(()=>[createVNode(da,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(getConstant)(Nn.value).value.params,En=>(openBlock(),createBlock(ra,{title:En.name,name:"1"},{default:withCtx(()=>[createVNode(hn,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Pt,{class:"parameter-value","model-value":En.name,disabled:""},null,8,["model-value"])]),_:2},1024),createVNode(hn,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value test","model-value":En.value,min:En.min,max:En.max,precision:En.max<=10?2:0,step:En.max<=10?.01:1,onChange:Zn=>re(En,Zn)},null,8,["model-value","min","max","precision","step","onChange"]),createVNode(In,{onInput:Zn=>re(En,Zn),modelValue:En.value,"onUpdate:modelValue":Zn=>En.value=Zn,min:En.min,max:En.max,precision:En.max<=10?2:0,step:En.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024)])):createCommentVNode("",!0)])):createCommentVNode("",!0)])):createCommentVNode("",!0)]),_:2},1032,["label"]))),256))]),_:1})]),createBaseVNode("div",_hoisted_27$4,[createBaseVNode("div",_hoisted_28$4,toDisplayString$1(unref(r)("panels.paramsPanel.joints.title")),1),createVNode(Dt,{class:"joints-form","label-width":"80px"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList($.value.value._o?$.value.value._o?.getJoints():[],Nn=>(openBlock(),createBlock(aa,{modelValue:j.value[Nn.name],"onUpdate:modelValue":En=>j.value[Nn.name]=En,label:Nn.name},null,8,["modelValue","onUpdate:modelValue","label"]))),256))]),_:1})]),$.value.type==="glyph"?(openBlock(),createElementBlock("div",_hoisted_29$4,[createBaseVNode("div",_hoisted_30$4,toDisplayString$1(unref(r)("panels.paramsPanel.formatComponent.title")),1),createVNode(Sn,{class:"format-button",type:"warning",onPointerdown:Ce},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.formatComponent.button")),1)]),_:1})])):createCommentVNode("",!0)])):createCommentVNode("",!0)])}}}),GlyphEditPanelGlyph=_export_sfc(_sfc_main$Y,[["__scopeId","data-v-d07b9f0b"]]),editing$1=ref(!1),setEditing$1=e=>{editing$1.value=e},draggingJoint$1=ref(null),putAtCoord$1=ref(null),movingJoint$1=ref(null),editGlyphOnDragging$1=ref(null),onSkeletonSelect=ref(!1),onSkeletonBind=computed(()=>editGlyph.value?.skeleton?.onSkeletonBind),onSkeletonDragging=ref(!1),onSelectBone=ref(!1),selectedBone=ref(null),onWeightSetting=ref(!1),weightValue=ref(.5),brushSize=ref(100),currentBone=ref(null),initWeightSelector=e=>{const{bones:n}=editGlyph.value?.skeleton?.skeletonBindData;currentBone.value=null;const r=$=>{const V=getCoord($.offsetX),L=getCoord($.offsetY);currentBone.value?(selectedBone.value=currentBone.value,currentBone.value=null):onWeightSetting.value&&brushSize.value>0&&setWeight(V,L),emitter.emit("renderGlyph"),renderBoneAndWeight(e,{mouseX:V,mouseY:L})},g=$=>{const V=getCoord($.offsetX),L=getCoord($.offsetY);currentBone.value=null;for(let z=0;z<n.length;z++){const{distance:j}=pointToBoneDistance({x:V,y:L},n[z]);j<=20&&(currentBone.value=n[z],currentBone.value.index=z)}emitter.emit("renderGlyph"),renderBoneAndWeight(e,{mouseX:V,mouseY:L})},y=$=>{const V=getCoord($.offsetX),L=getCoord($.offsetY);currentBone.value=null,emitter.emit("renderGlyph"),renderBoneAndWeight(e,{mouseX:V,mouseY:L})};return e.addEventListener("mouseup",y),e.addEventListener("mousemove",g),e.addEventListener("mousedown",r),()=>{e.removeEventListener("mouseup",y),e.removeEventListener("mousemove",g),e.removeEventListener("mousedown",r),currentBone.value=null}},renderBoneAndWeight=(e,n)=>{const r=currentBone.value||selectedBone.value;if(!r)return;const{pointsBonesMap:g,originalPoints:y}=editGlyph.value?.skeleton?.skeletonBindData;if(!g)return;const k=[];if(selectedBone.value)for(let z=0;z<g.length;z++){const{pointIndex:j,bones:ae}=g[z];let oe=0,re=0;for(let ue=0;ue<ae.length;ue++){const{boneIndex:le,weight:de,localCoords:he}=ae[ue];le===r.index?oe=de:re+=de}oe>0&&k.push({x:y[j].x,y:y[j].y,weight:oe,otherWeight:re})}const $=e.getContext("2d");for(let z=0;z<k.length;z++){const{x:j,y:ae,weight:oe,otherWeight:re}=k[z];$.fillStyle=getWeightColor(k[z]),$.fillRect(mapCanvasX(j),mapCanvasY(ae),10,10)}const{start:V,end:L}=r;if($.strokeStyle="red",$.lineWidth=10,$.beginPath(),$.moveTo(mapCanvasX(V.x),mapCanvasY(V.y)),$.lineTo(mapCanvasX(L.x),mapCanvasY(L.y)),$.stroke(),$.closePath(),!currentBone.value&&onWeightSetting.value){const{mouseX:z,mouseY:j}=n||{mouseX:0,mouseY:0},ae=mapCanvasX(brushSize.value);$.fillStyle="rgba(255, 0, 0, 0.5)",$.beginPath(),$.ellipse(mapCanvasX(z),mapCanvasY(j),ae/2,ae/2,0,0,2*Math.PI),$.fill(),$.closePath()}},setWeight=(e,n)=>{const{pointsBonesMap:r,originalPoints:g,bones:y}=editGlyph.value?.skeleton?.skeletonBindData;if(r)for(let k=0;k<r.length;k++){const{pointIndex:$,bones:V}=r[k],{x:L,y:z}=g[$];if(Math.sqrt((e-L)**2+(n-z)**2)<=brushSize.value/2){let ae=!1;const oe=V.find(ue=>ue.boneIndex===selectedBone.value.index),re=oe?oe.weight:0;for(let ue=0;ue<V.length;ue++){const{boneIndex:le,weight:de,localCoords:he}=V[ue];le===selectedBone.value.index?(V[ue].weight=weightValue.value,ae=!0):oe?re===1?V[ue].weight=0:V[ue].weight=V[ue].weight/(1-re)*(1-weightValue.value):V[ue].weight=V[ue].weight*(1-weightValue.value)}if(!ae&&weightValue.value>0){const{distance:ue,localCoords:le}=pointToBoneDistance(g[$],y[selectedBone.value.index]);V.push({boneIndex:selectedBone.value.index,weight:weightValue.value,localCoords:le})}}}},getWeightColor=e=>{const{weight:n,otherWeight:r}=e,g=1-r-n,y=Math.round(n*255),k=Math.round(r*255),$=Math.round(g*255);return`rgba(${y}, ${$}, ${k}, 1)`},calculateGlyphWeight=e=>{const{pointsBonesMap:n,originalPoints:r,bones:g}=e.skeleton.skeletonBindData,y=e.components[0].value.points,k=getDiscretePoints(y),$=[];for(let z=0;z<g.length;z++){const{avgWeight:j,boneLength:ae}=calculateWeightAtBone(k,g[z]);$.push({avgWeight:j,boneLength:ae})}const V=$.reduce((z,j)=>z+j.boneLength,0);let L=0;for(let z=0;z<$.length;z++){const{avgWeight:j,boneLength:ae}=$[z];L+=j*ae/V}return L},getDiscretePoints=e=>{const n=[];if(e.length<=4)return e;for(let g=0;g<e.length-3;g+=3){const y=[e[g],e[g+1],e[g+2],e[g+3]];for(let k=0;k<100;k++){const $=k/100,V=bezierCurve.q(y,$);n.push(V)}}return n},calculateWeightAtBone=(e,n)=>{const r=Math.atan2(n.end.y-n.start.y,n.end.x-n.start.x),g=100,y={x:n.start.x+Math.sin(r)*g,y:n.start.y-Math.cos(r)*g},k={x:n.end.x+Math.sin(r)*g,y:n.end.y-Math.cos(r)*g},$={x:n.start.x-Math.sin(r)*g,y:n.end.y+Math.cos(r)*g},V={x:n.end.x-Math.sin(r)*g,y:n.end.y+Math.cos(r)*g},{corner:L,corner_index:z}=FP.getIntersection({type:"line",start:n.start,end:y},{type:"curve",points:e}),{corner:j,corner_index:ae}=FP.getIntersection({type:"line",start:n.end,end:$},{type:"curve",points:e}),{corner:oe,corner_index:re}=FP.getIntersection({type:"line",start:n.start,end:k},{type:"curve",points:e}),{corner:ue,corner_index:le}=FP.getIntersection({type:"line",start:n.end,end:V},{type:"curve",points:e});return{avgWeight:(distance$3(L,j)+distance$3(oe,ue))/2,boneLength:distance$3(n.start,n.end)}},distance$3=(e,n)=>!e||!n?0:Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2),_withScopeId$d=e=>(pushScopeId("data-v-12af0179"),e=e(),popScopeId(),e),_hoisted_1$W={class:"glyph-edit-panel"},_hoisted_2$U=_withScopeId$d(()=>createBaseVNode("div",{class:"title"},"",-1)),_hoisted_3$w={class:"style-tag-wrap"},_hoisted_4$r={class:"title"},_hoisted_5$k={class:"layout-wrap"},_hoisted_6$h={key:0,class:"layout-info"},_hoisted_7$e={key:0,class:"title"},_hoisted_8$e={key:1,class:"skeleton-wrap"},_hoisted_9$e={key:9,class:"weight-setting-wrap"},_hoisted_10$e={class:"parameters-wrap"},_hoisted_11$e={class:"title"},_hoisted_12$e={class:"param-btn-group"},_hoisted_13$c={key:0},_hoisted_14$b=["onPointerdown"],_hoisted_15$9={class:"down-menu"},_hoisted_16$9={class:"ratio-item"},_hoisted_17$7={key:1},_hoisted_18$6={key:2},_hoisted_19$6={key:0,class:"ring-controller-wrap"},_hoisted_20$6={key:1,class:"number-controller-wrap"},_hoisted_21$5={key:3},_hoisted_22$5={key:0},_hoisted_23$5={key:1},_hoisted_24$5={key:0,class:"ring-controller-wrap"},_hoisted_25$4={key:1,class:"number-controller-wrap"},_sfc_main$X=defineComponent({__name:"GlyphParamsPanel",setup(e){const{t:n,tm:r}=useI18n(),g=ref(!1),y=Ln=>{const Sn=Ln,An={type:Sn,ox:0,oy:0};editGlyph.value.skeleton=An;const In=kai_strokes.find(ra=>ra.name===Sn);if(In){const ra=editGlyph.value.parameters.parameters;for(let da=0;da<In.params.length;da++){const ua=In.params[da];ra.push({uuid:genUUID(),name:ua.name,type:ParameterType.Number,value:ua.default,min:ua.min||0,max:ua.max||1e3})}ra.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:0,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]}),ra.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:0,max:2})}const Mn=strokeFnMap[Sn];Mn&&Mn.instanceBasicGlyph(editGlyph.value),Mn&&Mn.updateSkeletonListenerBeforeBind(editGlyph.value._o),onSkeletonSelect.value=!1,editGlyph.value.skeleton.onSkeletonBind=!0,onSkeletonDragging.value=!0,emitter.emit("renderGlyph")},k=()=>{if(!editGlyph.value.components.length){onSkeletonDragging.value=!1;return}const{type:Ln}=editGlyph.value.skeleton,Sn=strokeFnMap[Ln];Sn&&(Sn.bindSkeletonGlyph(editGlyph.value),Sn.updateSkeletonListenerAfterBind(editGlyph.value._o)),onSkeletonDragging.value=!1,editGlyph.value.skeleton.originWeight=calculateGlyphWeight(editGlyph.value),editGlyph.value.parameters.set("",editGlyph.value.skeleton.originWeight),editGlyph.value.skeleton.onSkeletonBind=!1},$=()=>{const{type:Ln}=editGlyph.value.skeleton;editGlyph.value.skeleton=null;const Sn=kai_strokes.find(An=>An.name===Ln);if(Sn){Sn.params.map(Mn=>{const ra=editGlyph.value.parameters.parameters.findIndex(da=>da.name===Mn.name);ra!==-1&&editGlyph.value.parameters.parameters.splice(ra,1)}),editGlyph.value._o.getSkeleton=null,editGlyph.value._o.onSkeletonDragStart=null,editGlyph.value._o.onSkeletonDrag=null,editGlyph.value._o.onSkeletonDragEnd=null,editGlyph.value._o._joints=[],editGlyph.value._o._reflines=[];const An=editGlyph.value.parameters.parameters;for(let Mn=0;Mn<Sn.params.length;Mn++){const ra=Sn.params[Mn],da=An.findIndex(ua=>ua.name===ra.name);da!==-1&&An.splice(da,1)}const In=["",""];for(let Mn=0;Mn<In.length;Mn++){const ra=In[Mn],da=An.findIndex(ua=>ua.name===ra);da!==-1&&An.splice(da,1)}emitter.emit("renderGlyph")}},V=()=>{const{type:Ln}=editGlyph.value.skeleton,Sn=strokeFnMap[Ln];Sn&&Sn.instanceBasicGlyph(editGlyph.value),Sn&&Sn.updateSkeletonListenerBeforeBind(editGlyph.value._o),onSkeletonSelect.value=!1,editGlyph.value.skeleton.onSkeletonBind=!0,onSkeletonDragging.value=!0},L=Ln=>{editGlyph.value.skeleton.ox=Ln},z=Ln=>{editGlyph.value.skeleton.oy=Ln};let j=null;const ae=()=>{onWeightSetting.value=!0,onSelectBone.value=!0,j=initWeightSelector(canvas.value),emitter.emit("renderGlyph"),renderBoneAndWeight(canvas.value)},oe=()=>{onWeightSetting.value=!1,onSelectBone.value=!1,j&&j(),j=null,emitter.emit("renderGlyph")},re=computed({get:()=>selectedBone.value?selectedBone.value.index:null,set:Ln=>{selectedBone.value&&(selectedBone.value.index=Ln)}}),ue=Ln=>{selectedBone.value=editGlyph.value.skeleton.skeletonBindData.bones[Ln],selectedBone.value.index=Ln,emitter.emit("renderGlyph"),renderBoneAndWeight(canvas.value)},le=ref(0),de=[{value:0,key:"widget"},{value:1,key:"number"}],he=ref(0),_e=[{value:0,key:"null"},{value:1,key:"rect"}],xe=ref(!1),Ne=ref(150),$e=Ln=>{saveState("",[editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo,Ln)};let Ce=null,Ie=!1;watch(editGlyph,(Ln,Sn)=>{Ce&&clearTimeout(Ce),Ce=setTimeout(()=>{Ie=!1,clearTimeout(Ce)},500),Ie||($e({editGlyph:Sn,newRecord:!0}),Ie=!0)});const ze=(Ln,Sn)=>{if(Ln.value=Sn,Ln.ratioed){editGlyph.value.param_script||(editGlyph.value.param_script={});const An=getRatioLayout(editGlyph.value,Sn),In=`window.glyph.setParam('${Ln.name}',window.glyph.getRatioLayout('${Sn}') / ${An} * ${Ln.value});`;editGlyph.value.param_script[Ln.name]=In}executeScript(editGlyph.value),emitter.emit("renderGlyphPreviewCanvasByUUIDOnEditing",editGlyph.value.uuid),emitter.emit("renderGlyph")},Ue=(Ln,Sn)=>{if(Ln.ratioed){editGlyph.value.param_script||(editGlyph.value.param_script={});const An=getRatioLayout(editGlyph.value,Sn),In=`window.glyph.setParam('${Ln.name}',window.glyph.getRatioLayout('${Sn}') / ${An} * ${Ln.value});`;editGlyph.value.param_script[Ln.name]=In}executeScript(editGlyph.value),emitter.emit("renderGlyphPreviewCanvasByUUID",editGlyph.value.uuid),emitter.emit("renderGlyph")},Pt=(Ln,Sn,An,In)=>{Ln.radius.value=Sn,Ln.degree.value=An,Ln.params=Object.assign([],In),executeScript(editGlyph.value),emitter.emit("renderGlyphPreviewCanvasByUUID",editGlyph.value.uuid),emitter.emit("renderGlyph")};watch([checkJoints,checkRefLines],()=>{emitter.emit("renderGlyph")}),watch(he,()=>{if(he.value===0)editGlyph.value.layout=null;else if(he.value===1){const Ln={width:{ratioed:!1,ratio:"DEFAULT"},height:{ratioed:!1,ratio:"DEFAULT"}};editGlyph.value.layout={type:"rect",params:{width:1e3,height:1e3},ratioedMap:Ln}}xe.value=!1});let hn=ref({});onMounted(()=>{editGlyph.value.parameters.parameters.map(Ln=>{hn.value[Ln.uuid]=!1})});let Dt=null;const xn=async()=>{emitter.emit("renderGlyphPreviewCanvasByUUID",editGlyph.value.uuid),Dt&&clearTimeout(Dt),Dt=setTimeout(()=>{executeScript(editGlyph.value),emitter.emit("renderGlyph",!0)},1500)},jt=Ln=>{const Sn=getConstant(Ln.value);Ln.type=Sn.type,Ln.value=Sn.value;const An=constantGlyphMap.get(Sn.uuid);for(let In=0;In<An.length;In++)if(An[In].parameterUUID===Ln.uuid){An.splice(In,1);break}},Vn=Ln=>{selectedParam.value=Ln,selectedParamType.value="glyph_components",setSetAsGlobalParamDialogVisible(!0)},Rn=Ln=>{selectedParam.value=Ln,selectedParamType.value="glyph_components",setSelectGlobalParamDialogVisible(!0)},Tn=Ln=>{const Sn=constantGlyphMap.get(Ln.value);for(let An=0;An<Sn.length;An++){const In=Sn[An];let Mn=null;if(In.constantType===ConstantType.Parameter)Mn=getGlyphByUUID(Sn[An].glyphUUID);else if(In.constantType===ConstantType.Component){const ra=Sn[An].parentUUID;let da=null;In.glyphType===GlyphType.Char?da=selectedItemByUUID(selectedFile.value.characterList,ra):da=getGlyphByUUID(ra),Mn=da.value}Mn&&(executeScript(Mn),emitter.emit("renderGlyphPreviewCanvasByUUID",Mn.uuid))}};return(Ln,Sn)=>{const An=resolveComponent("el-icon"),In=resolveComponent("el-input"),Mn=resolveComponent("el-button"),ra=resolveComponent("el-option"),da=resolveComponent("el-select"),ua=resolveComponent("el-form-item"),aa=resolveComponent("el-input-number"),Nn=resolveComponent("el-switch"),En=resolveComponent("el-form"),Zn=resolveComponent("el-checkbox"),ha=resolveComponent("el-popover"),xa=resolveComponent("el-slider"),sa=resolveComponent("font-awesome-icon"),Hn=resolveComponent("el-tab-pane"),bn=resolveComponent("el-collapse-item"),Xn=resolveComponent("el-collapse"),$n=resolveComponent("el-tabs");return openBlock(),createElementBlock("div",_hoisted_1$W,[_hoisted_2$U,createBaseVNode("div",_hoisted_3$w,[createVNode(In,{modelValue:unref(editGlyph).style,"onUpdate:modelValue":Sn[2]||(Sn[2]=kt=>unref(editGlyph).style=kt),disabled:!g.value},{append:withCtx(()=>[g.value?(openBlock(),createBlock(An,{key:1,onPointerdown:Sn[1]||(Sn[1]=kt=>g.value=!1)},{default:withCtx(()=>[createVNode(unref(check_default))]),_:1})):(openBlock(),createBlock(An,{key:0,onPointerdown:Sn[0]||(Sn[0]=kt=>g.value=!0)},{default:withCtx(()=>[createVNode(unref(edit_default))]),_:1}))]),_:1},8,["modelValue","disabled"])]),createBaseVNode("div",_hoisted_4$r,toDisplayString$1(unref(n)("panels.paramsPanel.layout.title")),1),createBaseVNode("div",_hoisted_5$k,[withDirectives(createVNode(Mn,{class:"add-layout-button",onPointerdown:Sn[3]||(Sn[3]=kt=>xe.value=!0)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.paramsPanel.layout.add")),1)]),_:1},512),[[vShow,!unref(editGlyph).layout&&!xe.value]]),withDirectives(createVNode(Mn,{class:"set-layout-button",onPointerdown:Sn[4]||(Sn[4]=kt=>xe.value=!0)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.paramsPanel.layout.modify")),1)]),_:1},512),[[vShow,!!unref(editGlyph).layout&&!xe.value]]),withDirectives(createVNode(da,{modelValue:he.value,"onUpdate:modelValue":Sn[5]||(Sn[5]=kt=>he.value=kt),class:"layout-type-select",placeholder:unref(r)("panels.paramsPanel.layout.title")},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(_e,kt=>createVNode(ra,{key:kt.key,label:unref(r)(`panels.paramsPanel.layout.${kt.key}`),value:kt.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"]),[[vShow,xe.value]]),unref(editGlyph).layout?(openBlock(),createElementBlock("div",_hoisted_6$h,[createVNode(En,{class:"parameters-form","label-width":"80px"},{default:withCtx(()=>[createVNode(ua,{label:unref(r)("panels.paramsPanel.layout.type")},{default:withCtx(()=>[createVNode(In,{disabled:"",modelValue:unref(editGlyph).layout.type,"onUpdate:modelValue":Sn[6]||(Sn[6]=kt=>unref(editGlyph).layout.type=kt)},null,8,["modelValue"])]),_:1},8,["label"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(Object.keys(unref(editGlyph).layout.params),kt=>(openBlock(),createBlock(ua,{label:kt},{default:withCtx(()=>[createVNode(aa,{modelValue:unref(editGlyph).layout.params[kt],"onUpdate:modelValue":At=>unref(editGlyph).layout.params[kt]=At,onChange:xn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]))),256)),createVNode(ua,{label:""},{default:withCtx(()=>[createVNode(Nn,{modelValue:unref(editing$2),"onUpdate:modelValue":Sn[7]||(Sn[7]=kt=>isRef(editing$2)?editing$2.value=kt:null)},null,8,["modelValue"])]),_:1})]),_:1})])):createCommentVNode("",!0)]),!unref(editGlyph).skeleton&&(!unref(editGlyph)._o?.getSkeleton||!unref(editGlyph)._o?.getSkeleton())||unref(editGlyph).skeleton||unref(onSkeletonSelect)||unref(onSkeletonBind)?(openBlock(),createElementBlock("div",_hoisted_7$e,"")):createCommentVNode("",!0),!unref(editGlyph).skeleton&&(!unref(editGlyph)._o?.getSkeleton||!unref(editGlyph)._o?.getSkeleton())||unref(editGlyph).skeleton||unref(onSkeletonSelect)||unref(onSkeletonBind)?(openBlock(),createElementBlock("div",_hoisted_8$e,[!unref(editGlyph).skeleton&&(!unref(editGlyph)._o?.getSkeleton||!unref(editGlyph)._o?.getSkeleton())?(openBlock(),createBlock(Mn,{key:0,onPointerdown:Sn[8]||(Sn[8]=kt=>onSkeletonSelect.value=!0)},{default:withCtx(()=>[createTextVNode("")]),_:1})):createCommentVNode("",!0),unref(onSkeletonSelect)?(openBlock(),createBlock(da,{key:1,"model-value":unref(editGlyph).skeleton?.type,class:"skeleton-type-select",placeholder:"",disabled:!unref(onSkeletonSelect),onChange:Sn[9]||(Sn[9]=kt=>y(kt))},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(skeletonOptions),kt=>(openBlock(),createBlock(ra,{key:kt.value,label:kt.label,value:kt.value},null,8,["label","value"]))),128))]),_:1},8,["model-value","disabled"])):createCommentVNode("",!0),unref(onSkeletonBind)&&!unref(onSkeletonSelect)&&unref(editGlyph).skeleton?(openBlock(),createBlock(ua,{key:2,label:"OX"},{default:withCtx(()=>[createVNode(aa,{"model-value":unref(editGlyph).skeleton.ox,precision:1,onChange:L},null,8,["model-value"])]),_:1})):createCommentVNode("",!0),unref(onSkeletonBind)&&!unref(onSkeletonSelect)&&unref(editGlyph).skeleton?(openBlock(),createBlock(ua,{key:3,label:"OY"},{default:withCtx(()=>[createVNode(aa,{"model-value":unref(editGlyph).skeleton.oy,precision:1,onChange:z},null,8,["model-value"])]),_:1})):createCommentVNode("",!0),unref(onSkeletonBind)&&!unref(onSkeletonSelect)&&unref(editGlyph).skeleton?(openBlock(),createBlock(ua,{key:4,"label-width":0,class:"dynamic-weight-form-item"},{default:withCtx(()=>[createVNode(Zn,{modelValue:unref(editGlyph).skeleton.dynamicWeight,"onUpdate:modelValue":Sn[10]||(Sn[10]=kt=>unref(editGlyph).skeleton.dynamicWeight=kt)},{default:withCtx(()=>[createTextVNode("  ")]),_:1},8,["modelValue"])]),_:1})):createCommentVNode("",!0),unref(onSkeletonBind)&&!unref(onSkeletonSelect)&&unref(editGlyph).skeleton?(openBlock(),createBlock(Mn,{key:5,onPointerdown:k},{default:withCtx(()=>[createTextVNode("")]),_:1})):createCommentVNode("",!0),unref(editGlyph).skeleton&&!unref(onSkeletonBind)?(openBlock(),createBlock(Mn,{key:6,onPointerdown:ae},{default:withCtx(()=>[createTextVNode("")]),_:1})):createCommentVNode("",!0),unref(editGlyph).skeleton&&!unref(onSkeletonBind)&&!unref(onWeightSetting)?(openBlock(),createBlock(Mn,{key:7,onPointerdown:V},{default:withCtx(()=>[createTextVNode("")]),_:1})):createCommentVNode("",!0),unref(editGlyph).skeleton&&!unref(onSkeletonBind)&&!unref(onWeightSetting)?(openBlock(),createBlock(Mn,{key:8,type:"danger",onPointerdown:$},{default:withCtx(()=>[createTextVNode("")]),_:1})):createCommentVNode("",!0),unref(onWeightSetting)?(openBlock(),createElementBlock("div",_hoisted_9$e,[createVNode(ua,{label:"","label-width":80},{default:withCtx(()=>[createVNode(da,{modelValue:re.value,"onUpdate:modelValue":Sn[11]||(Sn[11]=kt=>re.value=kt),placeholder:"",onChange:ue},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(editGlyph).skeleton.skeletonBindData.bones,(kt,At)=>(openBlock(),createBlock(ra,{key:At,label:kt.id,value:At},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),createVNode(ua,{label:"","label-width":80},{default:withCtx(()=>[createVNode(aa,{modelValue:unref(weightValue),"onUpdate:modelValue":Sn[12]||(Sn[12]=kt=>isRef(weightValue)?weightValue.value=kt:null),precision:2,min:0,max:1},null,8,["modelValue"])]),_:1}),createVNode(ua,{label:"","label-width":80},{default:withCtx(()=>[createVNode(aa,{modelValue:unref(brushSize),"onUpdate:modelValue":Sn[13]||(Sn[13]=kt=>isRef(brushSize)?brushSize.value=kt:null),precision:2,min:10,max:100},null,8,["modelValue"])]),_:1}),createVNode(Mn,{onPointerdown:oe},{default:withCtx(()=>[createTextVNode("")]),_:1})])):createCommentVNode("",!0)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_10$e,[createBaseVNode("div",_hoisted_11$e,toDisplayString$1(unref(n)("panels.paramsPanel.params.title")),1),createVNode(En,{class:"parameters-form","label-width":"80px"},{default:withCtx(()=>[createVNode(ua,{label:unref(r)("programming.joint")},{default:withCtx(()=>[createVNode(Nn,{modelValue:unref(checkJoints),"onUpdate:modelValue":Sn[14]||(Sn[14]=kt=>isRef(checkJoints)?checkJoints.value=kt:null)},null,8,["modelValue"])]),_:1},8,["label"]),createVNode(ua,{label:unref(r)("programming.refline")},{default:withCtx(()=>[createVNode(Nn,{modelValue:unref(checkRefLines),"onUpdate:modelValue":Sn[15]||(Sn[15]=kt=>isRef(checkRefLines)?checkRefLines.value=kt:null)},null,8,["modelValue"])]),_:1},8,["label"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(editGlyph).parameters.parameters,kt=>(openBlock(),createBlock(ua,{label:kt.name},{default:withCtx(()=>[createVNode(ha,{placement:"right",width:250,trigger:"click"},{reference:withCtx(()=>[createVNode(An,{class:normalizeClass(["more-btn",{ring:kt.type===unref(ParameterType).RingController||kt.type===unref(ParameterType).Constant&&unref(getConstant)(kt.value).type===unref(ParameterType).RingController,show:kt.type===unref(ParameterType).Number||kt.type===unref(ParameterType).Constant&&unref(getConstant)(kt.value).type!==unref(ParameterType).RingController||le.value===0}])},{default:withCtx(()=>[createVNode(unref(more_default))]),_:2},1032,["class"])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_12$e,[withDirectives(createVNode(Mn,{onPointerdown:At=>jt(kt)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.paramsPanel.cancelGlobalParam")),1)]),_:2},1032,["onPointerdown"]),[[vShow,kt.type===unref(ParameterType).Constant]]),createVNode(Mn,{onPointerdown:At=>Vn(kt)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.paramsPanel.setAsGlobalParam")),1)]),_:2},1032,["onPointerdown"]),createVNode(Mn,{onPointerdown:At=>Rn(kt)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.paramsPanel.selectGlobalParam")),1)]),_:2},1032,["onPointerdown"]),withDirectives(createVNode(Mn,{type:"primary",onPointerdown:At=>Tn(kt)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.paramsPanel.updateGlobalParam")),1)]),_:2},1032,["onPointerdown"]),[[vShow,kt.type===unref(ParameterType).Constant]])])]),_:2},1024),withDirectives(createBaseVNode("div",{class:normalizeClass(["global-param-note",{ring:kt.type===unref(ParameterType).Constant&&unref(getConstant)(kt.value).type===unref(ParameterType).RingController}])},toDisplayString$1(unref(n)("panels.paramsPanel.globalParam")),3),[[vShow,kt.type===unref(ParameterType).Constant]]),kt.type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_13$c,[createVNode(aa,{"model-value":kt.value,step:kt.max<=10?.01:1,min:kt.min,max:kt.max,precision:kt.max<=10?2:0,disabled:kt.type===unref(ParameterType).Constant,onChange:At=>ze(kt,At)},null,8,["model-value","step","min","max","precision","disabled","onChange"]),withDirectives(createVNode(xa,{step:kt.max<=10?.01:1,min:kt.min,max:kt.max,precision:kt.max<=10?2:0,onInput:At=>ze(kt,At),modelValue:kt.value,"onUpdate:modelValue":At=>kt.value=At},null,8,["step","min","max","precision","onInput","modelValue","onUpdate:modelValue"]),[[vShow,kt.type===unref(ParameterType).Number]]),createBaseVNode("div",{class:"down-menu-icon-wrap",onPointerdown:At=>unref(hn)[kt.uuid]=!unref(hn)[kt.uuid]},[createVNode(sa,{icon:["fas","arrow-down-wide-short"]})],40,_hoisted_14$b),withDirectives(createBaseVNode("div",_hoisted_15$9,[createBaseVNode("div",_hoisted_16$9,[createVNode(sa,{class:normalizeClass(["ratio-icon",{selected:kt.ratioed}]),onPointerdown:()=>{kt.ratioed=!kt.ratioed,!kt.ratioed&&unref(editGlyph).system_script&&unref(editGlyph).system_script[kt.name]&&delete unref(editGlyph).system_script[kt.name]},icon:["fas","percent"]},null,8,["class","onPointerdown"]),createVNode(da,{modelValue:kt.ratio,"onUpdate:modelValue":At=>kt.ratio=At,class:"control-type-select",placeholder:"Ratio",disabled:!kt.ratioed,onChange:At=>Ue(kt,At)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(getRatioOptions)(unref(editGlyph)),At=>(openBlock(),createBlock(ra,{key:At.key,label:At.label,value:At.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])])],512),[[vShow,unref(hn)[kt.uuid]]])])):kt.type===unref(ParameterType).Enum?(openBlock(),createElementBlock("div",_hoisted_17$7,[createVNode(da,{modelValue:kt.value,"onUpdate:modelValue":At=>kt.value=At,class:"enum-param-select",placeholder:"Select",onChange:At=>ze(kt,At)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(kt.options,At=>(openBlock(),createBlock(ra,{key:At.value,label:At.label,value:At.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):kt.type===unref(ParameterType).RingController?(openBlock(),createElementBlock("div",_hoisted_18$6,[createVNode(da,{modelValue:le.value,"onUpdate:modelValue":Sn[16]||(Sn[16]=At=>le.value=At),class:"control-type-select",placeholder:unref(r)("programming.controlType")},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(de,At=>createVNode(ra,{key:At.key,label:unref(r)(`programming.${At.key}`),value:At.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"]),le.value===0?(openBlock(),createElementBlock("div",_hoisted_19$6,[createVNode(_sfc_main$_,{radius:kt.value.radius,size:Ne.value,degree:kt.value.degree,params:kt.value.params,"on-change":(At,Dn,Qn)=>Pt(kt.value,At,Dn,Qn)},null,8,["radius","size","degree","params","on-change"])])):le.value===1?(openBlock(),createElementBlock("div",_hoisted_20$6,[createVNode($n,{type:"border-card"},{default:withCtx(()=>[createVNode(Hn,{label:"radius"},{default:withCtx(()=>[createVNode(ua,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(In,{class:"parameter-value",modelValue:kt.value.radius.name,"onUpdate:modelValue":At=>kt.value.radius.name=At,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(ua,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(aa,{class:"parameter-value",modelValue:kt.value.radius.value,"onUpdate:modelValue":At=>kt.value.radius.value=At,min:kt.value.radius.min,max:kt.value.radius.max,precision:kt.value.radius.max<=10?2:0,step:kt.value.radius.max<=10?.01:1},null,8,["modelValue","onUpdate:modelValue","min","max","precision","step"]),createVNode(xa,{onInput:At=>ze(kt.value.radius,At),modelValue:kt.value.radius.value,"onUpdate:modelValue":At=>kt.value.radius.value=At,min:kt.value.radius.min,max:kt.value.radius.max,precision:kt.value.radius.max<=10?2:0,step:kt.value.radius.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Hn,{label:"degree"},{default:withCtx(()=>[createVNode(ua,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(In,{class:"parameter-value",modelValue:kt.value.degree.name,"onUpdate:modelValue":At=>kt.value.degree.name=At,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(ua,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(aa,{class:"parameter-value",modelValue:kt.value.degree.value,"onUpdate:modelValue":At=>kt.value.degree.value=At,min:kt.value.degree.min,max:kt.value.degree.max,precision:kt.value.degree.max<=10?2:0,step:kt.value.degree.max<=10?.01:1},null,8,["modelValue","onUpdate:modelValue","min","max","precision","step"]),createVNode(xa,{onInput:At=>ze(kt.value.degree,At),modelValue:kt.value.degree.value,"onUpdate:modelValue":At=>kt.value.degree.value=At,min:kt.value.degree.min,max:kt.value.degree.max,precision:kt.value.degree.max<=10?2:0,step:kt.value.degree.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Hn,{label:"params"},{default:withCtx(()=>[createVNode(Xn,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(kt.value.params,At=>(openBlock(),createBlock(bn,{title:At.name,name:"1"},{default:withCtx(()=>[createVNode(ua,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(In,{class:"parameter-value",modelValue:At.name,"onUpdate:modelValue":Dn=>At.name=Dn,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(ua,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(aa,{class:"parameter-value",modelValue:At.value,"onUpdate:modelValue":Dn=>At.value=Dn,min:At.min,max:At.max,precision:At.max<=10?2:0,step:At.max<=10?.01:1},null,8,["modelValue","onUpdate:modelValue","min","max","precision","step"]),createVNode(xa,{onInput:Dn=>ze(At,Dn),modelValue:At.value,"onUpdate:modelValue":Dn=>At.value=Dn,min:At.min,max:At.max,precision:At.max<=10?2:0,step:At.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024)])):createCommentVNode("",!0)])):kt.type===unref(ParameterType).Constant?(openBlock(),createElementBlock("div",_hoisted_21$5,[unref(getConstant)(kt.value).type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_22$5,[createVNode(aa,{"model-value":unref(getConstant)(kt.value).value,step:unref(getConstant)(kt.value).max<=10?.01:1,min:unref(getConstant)(kt.value).min,max:unref(getConstant)(kt.value).max,precision:unref(getConstant)(kt.value).max<=10?2:0,onChange:At=>ze(unref(getConstant)(kt.value),At)},null,8,["model-value","step","min","max","precision","onChange"]),createVNode(xa,{"model-value":unref(getConstant)(kt.value).value,step:unref(getConstant)(kt.value).max<=10?.01:1,min:unref(getConstant)(kt.value).min,max:unref(getConstant)(kt.value).max,precision:unref(getConstant)(kt.value).max<=10?2:0,onInput:At=>ze(kt,At),onChange:At=>ze(unref(getConstant)(kt.value),At)},null,8,["model-value","step","min","max","precision","onInput","onChange"])])):unref(getConstant)(kt.value).type===unref(ParameterType).RingController?(openBlock(),createElementBlock("div",_hoisted_23$5,[createVNode(da,{modelValue:le.value,"onUpdate:modelValue":Sn[17]||(Sn[17]=At=>le.value=At),class:"control-type-select",placeholder:unref(r)("programming.controlType")},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(de,At=>createVNode(ra,{key:At.key,label:unref(r)(`programming.${At.key}`),value:At.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"]),le.value===0?(openBlock(),createElementBlock("div",_hoisted_24$5,[createVNode(_sfc_main$_,{radius:unref(getConstant)(kt.value).value.radius,size:Ne.value,degree:unref(getConstant)(kt.value).value.degree,params:unref(getConstant)(kt.value).value.params,"on-change":(At,Dn,Qn)=>Pt(unref(getConstant)(kt.value).value,At,Dn,Qn)},null,8,["radius","size","degree","params","on-change"])])):le.value===1?(openBlock(),createElementBlock("div",_hoisted_25$4,[createVNode($n,{type:"border-card"},{default:withCtx(()=>[createVNode(Hn,{label:"radius"},{default:withCtx(()=>[createVNode(ua,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(In,{class:"parameter-value","model-value":unref(getConstant)(kt.value).value.radius.name,disabled:""},null,8,["model-value"])]),_:2},1024),createVNode(ua,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(aa,{class:"parameter-value","model-value":unref(getConstant)(kt.value).value.radius.value,min:unref(getConstant)(kt.value).value.radius.min,max:unref(getConstant)(kt.value).value.radius.max,precision:unref(getConstant)(kt.value).value.radius.max<=10?2:0,step:unref(getConstant)(kt.value).value.radius.max<=10?.01:1,onChange:At=>ze(unref(getConstant)(kt.value).value.radius,At)},null,8,["model-value","min","max","precision","step","onChange"]),createVNode(xa,{onInput:At=>ze(unref(getConstant)(kt.value).value.radius,At),"model-value":unref(getConstant)(kt.value).value.radius.value,min:unref(getConstant)(kt.value).value.radius.min,max:unref(getConstant)(kt.value).value.radius.max,precision:unref(getConstant)(kt.value).value.radius.max<=10?2:0,step:unref(getConstant)(kt.value).value.radius.max<=10?.01:1},null,8,["onInput","model-value","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Hn,{label:"degree"},{default:withCtx(()=>[createVNode(ua,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(In,{class:"parameter-value","model-value":unref(getConstant)(kt.value).value.degree.name,disabled:""},null,8,["model-value"])]),_:2},1024),createVNode(ua,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(aa,{class:"parameter-value","model-value":unref(getConstant)(kt.value).value.degree.value,min:unref(getConstant)(kt.value).value.degree.min,max:unref(getConstant)(kt.value).value.degree.max,precision:unref(getConstant)(kt.value).value.degree.max<=10?2:0,step:unref(getConstant)(kt.value).value.degree.max<=10?.01:1,onChange:At=>ze(unref(getConstant)(kt.value).value.degree,At)},null,8,["model-value","min","max","precision","step","onChange"]),createVNode(xa,{onInput:At=>ze(unref(getConstant)(kt.value).value.degree,At),"model-value":unref(getConstant)(kt.value).value.degree.value,min:unref(getConstant)(kt.value).value.degree.min,max:unref(getConstant)(kt.value).value.degree.max,precision:unref(getConstant)(kt.value).value.degree.max<=10?2:0,step:unref(getConstant)(kt.value).value.degree.max<=10?.01:1},null,8,["onInput","model-value","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Hn,{label:"params"},{default:withCtx(()=>[createVNode(Xn,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(getConstant)(kt.value).value.params,At=>(openBlock(),createBlock(bn,{title:At.name,name:"1"},{default:withCtx(()=>[createVNode(ua,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(In,{class:"parameter-value","model-value":At.name,disabled:""},null,8,["model-value"])]),_:2},1024),createVNode(ua,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(aa,{class:"parameter-value test","model-value":At.value,min:At.min,max:At.max,precision:At.max<=10?2:0,step:At.max<=10?.01:1,onChange:Dn=>ze(At,Dn)},null,8,["model-value","min","max","precision","step","onChange"]),createVNode(xa,{onInput:Dn=>ze(At,Dn),modelValue:At.value,"onUpdate:modelValue":Dn=>At.value=Dn,min:At.min,max:At.max,precision:At.max<=10?2:0,step:At.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024)])):createCommentVNode("",!0)])):createCommentVNode("",!0)])):createCommentVNode("",!0)]),_:2},1032,["label"]))),256))]),_:1})])])}}}),GlyphParamsPanel=_export_sfc(_sfc_main$X,[["__scopeId","data-v-12af0179"]]),_hoisted_1$V={class:"character-edit-panel"},_hoisted_2$T={class:"grid-settings"},_sfc_main$W=defineComponent({__name:"LayoutEditPanel",setup(e){const{tm:n,t:r,locale:g}=useI18n();ref(!1),ref(null),ref("");const y=()=>{tips.value=r("panels.paramsPanel.layoutEditing.applyGridConfirmMsg"),setTipsDialogVisible(!0,()=>{formatCharacterGlyphComponents(editCharacterFile.value),formatGridComponents(orderedListWithItemsForCharacterFile(editCharacterFile.value),{grid:{dx:gridSettings$1.value.dx,dy:gridSettings$1.value.dy,size:gridSettings$1.value.size,centerSquareSize:gridSettings$1.value.centerSquareSize,default:!1},offset:{x:0,y:0}}),gridChanged.value=!1,emitter.emit("renderPreviewCanvasByUUID",editCharacterFile.value.uuid),ElMessage({type:"success",message:n("panels.paramsPanel.layoutEditing.applyGridTransform")}),editCharacterFile.value.info.gridSettings={dx:0,dy:0,centerSquareSize:selectedFile.value.width/3,size:selectedFile.value.width,default:!0},gridSettings$1.value={dx:0,dy:0,centerSquareSize:selectedFile.value.width/3,size:selectedFile.value.width,default:!0}})},k=()=>{editCharacterFile.value.info.gridSettings={dx:0,dy:0,centerSquareSize:selectedFile.value.width/3,size:selectedFile.value.width,default:!0},gridSettings$1.value={dx:0,dy:0,centerSquareSize:selectedFile.value.width/3,size:selectedFile.value.width,default:!0},emitter.emit("renderPreviewCanvasByUUID",editCharacterFile.value.uuid),ElMessage({type:"success",message:n("panels.paramsPanel.resetGridTransform")})};return($,V)=>{const L=resolveComponent("el-button"),z=resolveComponent("el-switch"),j=resolveComponent("el-form-item");return openBlock(),createElementBlock("div",_hoisted_1$V,[createBaseVNode("div",_hoisted_2$T,[createVNode(L,{class:"grid-confirm-btn",disabled:!unref(gridChanged),onPointerdown:y,type:"primary"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.applyGridTransform")),1)]),_:1},8,["disabled"]),createVNode(L,{class:"grid-reset-btn",onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.resetGridTransform")),1)]),_:1}),createVNode(j,{"label-width":"120px",label:""},{default:withCtx(()=>[createVNode(z,{modelValue:unref(editCharacterFile).info.useSkeletonGrid,"onUpdate:modelValue":V[0]||(V[0]=ae=>unref(editCharacterFile).info.useSkeletonGrid=ae)},null,8,["modelValue"])]),_:1})])])}}}),LayoutEditPanel=_export_sfc(_sfc_main$W,[["__scopeId","data-v-387e5cdc"]]),_hoisted_1$U={class:"character-edit-panel"},_hoisted_2$S={class:"metrics-settings"},_sfc_main$V=defineComponent({__name:"MetricsEditPanel",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=()=>{editCharacterFile.value.info.metrics={lsb:metrics_data.value.lsb,advanceWidth:metrics_data.value.advanceWidth,useDefaultValues:!1},ElMessage({type:"success",message:n("panels.paramsPanel.applyMetricsTransform")})},k=()=>{editCharacterFile.value.info.metrics={advanceWidth:1e3,lsb:0,useDefaultValues:!0};const L=$();metrics_data.value.lsb=L.lsb,metrics_data.value.advanceWidth=L.advanceWidth,metrics_data.value.xMin=L.xMin,metrics_data.value.xMax=L.xMax,metrics_data.value.yMin=L.yMin,metrics_data.value.yMax=L.yMax,selectedFile.value.fontSettings.metrics={lsb:L.lsb,advanceWidth:L.advanceWidth,useDefaultValues:!0},ElMessage({type:"success",message:n("panels.paramsPanel.resetMetricsTransform")})},$=()=>{const{unitsPerEm:L,descender:z}=selectedFile.value.fontSettings,{metrics:j}=editCharacterFile.value.info;let{advanceWidth:ae,lsb:oe,useDefaultValues:re}=j||{advanceWidth:L,lsb:0,useDefaultValues:!0};j||(re=!0,ae=L,oe=0),re&&(ae=L);const ue=componentsToContours(orderedListWithItemsForCharacterFile(editCharacterFile.value),{unitsPerEm:L,descender:z,advanceWidth:L},{x:0,y:0},!1,!1,!0),le=[],de=[];for(let _e=0;_e<ue.length;_e+=1)for(let xe=0;xe<ue[_e].length;xe++){const Ne=ue[_e][xe];le.push(Ne.start.x),de.push(Ne.start.y),le.push(Ne.end.x),de.push(Ne.end.y),Ne.type===PathType.QUADRATIC_BEZIER?(le.push(Ne.control.x),de.push(Ne.control.y)):Ne.type===PathType.CUBIC_BEZIER&&(le.push(Ne.control1.x),de.push(Ne.control1.y),le.push(Ne.control2.x),de.push(Ne.control2.y))}const he={xMin:Math.min.apply(null,le),yMin:Math.min.apply(null,de),xMax:Math.max.apply(null,le),yMax:Math.max.apply(null,de)};return isFinite(he.xMin)||(he.xMin=0),isFinite(he.xMax)||(he.xMax=L||0),isFinite(he.yMin)||(he.yMin=0),isFinite(he.yMax)||(he.yMax=0),he.advanceWidth=ae,he.lsb=re?he.xMin:oe,he.rsb=ae-(he.lsb+he.xMax-he.xMin),he};onMounted(()=>{const L=$();metrics_data.value.lsb=L.lsb,metrics_data.value.advanceWidth=L.advanceWidth,metrics_data.value.rsb=L.rsb,metrics_data.value.xMin=L.xMin,metrics_data.value.xMax=L.xMax,metrics_data.value.yMin=L.yMin,metrics_data.value.yMax=L.yMax});const V=()=>{metrics_data.value.rsb=metrics_data.value.advanceWidth-(metrics_data.value.lsb+metrics_data.value.xMax-metrics_data.value.xMin)};return(L,z)=>{const j=resolveComponent("el-input-number"),ae=resolveComponent("el-form-item"),oe=resolveComponent("el-form"),re=resolveComponent("el-button");return openBlock(),createElementBlock("div",_hoisted_1$U,[createVNode(oe,{class:"transfom-form","label-width":"120px"},{default:withCtx(()=>[createVNode(ae,{label:"advanceWidth"},{default:withCtx(()=>[createVNode(j,{modelValue:unref(metrics_data).advanceWidth,"onUpdate:modelValue":z[0]||(z[0]=ue=>unref(metrics_data).advanceWidth=ue),controls:!1,onChange:V,precision:0},null,8,["modelValue"])]),_:1}),createVNode(ae,{label:"lsb"},{default:withCtx(()=>[createVNode(j,{modelValue:unref(metrics_data).lsb,"onUpdate:modelValue":z[1]||(z[1]=ue=>unref(metrics_data).lsb=ue),controls:!1,onChange:V,precision:0},null,8,["modelValue"])]),_:1}),createVNode(ae,{label:"rsb"},{default:withCtx(()=>[createVNode(j,{modelValue:unref(metrics_data).rsb,"onUpdate:modelValue":z[2]||(z[2]=ue=>unref(metrics_data).rsb=ue),controls:!1,precision:0,disabled:""},null,8,["modelValue"])]),_:1}),createVNode(ae,{label:"xMin"},{default:withCtx(()=>[createVNode(j,{modelValue:unref(metrics_data).xMin,"onUpdate:modelValue":z[3]||(z[3]=ue=>unref(metrics_data).xMin=ue),controls:!1,precision:0,disabled:""},null,8,["modelValue"])]),_:1}),createVNode(ae,{label:"xMax"},{default:withCtx(()=>[createVNode(j,{modelValue:unref(metrics_data).xMax,"onUpdate:modelValue":z[4]||(z[4]=ue=>unref(metrics_data).xMax=ue),controls:!1,precision:0,disabled:""},null,8,["modelValue"])]),_:1}),createVNode(ae,{label:"yMin"},{default:withCtx(()=>[createVNode(j,{modelValue:unref(metrics_data).yMin,"onUpdate:modelValue":z[5]||(z[5]=ue=>unref(metrics_data).yMin=ue),controls:!1,precision:0,disabled:""},null,8,["modelValue"])]),_:1}),createVNode(ae,{label:"yMax"},{default:withCtx(()=>[createVNode(j,{modelValue:unref(metrics_data).yMax,"onUpdate:modelValue":z[6]||(z[6]=ue=>unref(metrics_data).yMax=ue),controls:!1,precision:0,disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),createBaseVNode("div",_hoisted_2$S,[createVNode(re,{class:"metrics-confirm-btn",onPointerdown:y,type:"primary"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.applyMetricsTransform")),1)]),_:1}),createVNode(re,{class:"metrics-reset-btn",onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.resetMetricsTransform")),1)]),_:1})])])}}}),MetricsEditPanel=_export_sfc(_sfc_main$V,[["__scopeId","data-v-2808429c"]]),_hoisted_1$T={key:0,class:"right-panel"},_hoisted_2$R={key:1,class:"right-panel"},_sfc_main$U=defineComponent({__name:"RightPanel",setup(e){return(n,r)=>unref(editStatus)!==unref(Status).Glyph?(openBlock(),createElementBlock("div",_hoisted_1$T,[unref(editStatus)===unref(Status).Edit&&unref(tool)==="grid"?(openBlock(),createBlock(LayoutEditPanel,{key:0})):unref(editStatus)===unref(Status).Edit&&unref(tool)==="metrics"?(openBlock(),createBlock(MetricsEditPanel,{key:1})):!unref(selectedComponentUUID)&&unref(editStatus)===unref(Status).Edit?(openBlock(),createBlock(SettingsPanel,{key:2})):unref(selectedComponentUUID)&&unref(selectedComponent).type==="pen"?(openBlock(),createBlock(PenEditPanel,{key:3})):unref(selectedComponentUUID)&&unref(selectedComponent).type==="ellipse"?(openBlock(),createBlock(EllipseEditPanel,{key:4})):unref(selectedComponentUUID)&&unref(selectedComponent).type==="rectangle"?(openBlock(),createBlock(RectangleEditPanel,{key:5})):unref(selectedComponentUUID)&&unref(selectedComponent).type==="polygon"?(openBlock(),createBlock(PolygonEditPanel,{key:6})):unref(selectedComponentUUID)&&unref(selectedComponent).type==="picture"?(openBlock(),createBlock(PictureEditPanel,{key:7})):unref(tool)!=="grid"&&unref(editStatus)===unref(Status).Edit&&unref(selectedComponentUUID)&&unref(selectedComponent).type==="glyph"?(openBlock(),createBlock(GlyphEditPanel$1,{key:8})):unref(editStatus)===unref(Status).Pic?(openBlock(),createBlock(FontPicEditPanel,{key:9})):createCommentVNode("",!0)])):(openBlock(),createElementBlock("div",_hoisted_2$R,[unref(tool)==="params"?(openBlock(),createBlock(GlyphParamsPanel,{key:0})):unref(selectedComponentUUID$1)&&unref(selectedComponent$1).type==="pen"?(openBlock(),createBlock(PenEditPanel,{key:1})):unref(selectedComponentUUID$1)&&unref(selectedComponent$1).type==="ellipse"?(openBlock(),createBlock(EllipseEditPanel,{key:2})):unref(selectedComponentUUID$1)&&unref(selectedComponent$1).type==="rectangle"?(openBlock(),createBlock(RectangleEditPanel,{key:3})):unref(selectedComponentUUID$1)&&unref(selectedComponent$1).type==="polygon"?(openBlock(),createBlock(PolygonEditPanel,{key:4})):unref(tool)!=="params"&&unref(editStatus)===unref(Status).Glyph&&unref(selectedComponentUUID$1)&&unref(selectedComponent$1).type==="glyph"?(openBlock(),createBlock(GlyphEditPanelGlyph,{key:5})):createCommentVNode("",!0)]))}}),RightPanel=_export_sfc(_sfc_main$U,[["__scopeId","data-v-c8a270d6"]]),_hoisted_1$S=["onPointerdown"],_hoisted_2$Q={class:"file-name"},_hoisted_3$v=["onPointerdown"],_hoisted_4$q={class:"style-selection-wrap",style:{"margin-left":"10px"}},_hoisted_5$j={class:"style-selection-title"},_hoisted_6$g={key:0,class:"right-btns",style:{"margin-left":"auto"}},_hoisted_7$d={class:"info-list"},_hoisted_8$d={class:"info-item"},_hoisted_9$d={class:"info-item-name"},_hoisted_10$d={class:"info-item-content"},_hoisted_11$d={class:"info-item"},_hoisted_12$d={class:"info-item-name"},_hoisted_13$b={class:"info-item-content"},_hoisted_14$a={class:"info-item"},_hoisted_15$8={class:"info-item-name"},_hoisted_16$8={class:"info-item-content"},_hoisted_17$6={class:"info-item"},_hoisted_18$5={class:"info-item-name"},_hoisted_19$5={class:"info-item-content"},_hoisted_20$5={class:"info-item"},_hoisted_21$4={class:"info-item-name"},_hoisted_22$4={class:"info-item-content"},_hoisted_23$4={class:"language-settings"},_hoisted_24$4={class:normalizeClass({"file-tag":!0,selected:!0})},_hoisted_25$3={class:"file-info-wrapper"},_hoisted_26$3={class:"file-name"},_hoisted_27$3={class:"style-selection-wrap"},_hoisted_28$3={class:"style-selection-title"},_hoisted_29$3={class:normalizeClass({"file-tag":!0,selected:!0})},_hoisted_30$3={class:"file-info-wrapper"},_hoisted_31$3={class:"file-name"},_hoisted_32$3={class:"style-selection-wrap"},_hoisted_33$3={class:"style-selection-title"},_sfc_main$T=defineComponent({__name:"FilesBar",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=V=>{setCloseFileTipDialogVisible(!0)},k=V=>{setSelectedFileUUID(V)},$=V=>{emitter.emit("renderPreviewCanvas")};return(V,L)=>{const z=resolveComponent("el-icon"),j=resolveComponent("el-button"),ae=resolveComponent("el-radio-button"),oe=resolveComponent("el-radio-group"),re=resolveComponent("el-popover"),ue=resolveComponent("el-row");return openBlock(),createElementBlock("div",{class:"files-bar",style:normalizeStyle({"border-bottom":unref(editStatus)===unref(Status).CharacterList||unref(editStatus)===unref(Status).GlyphList||unref(editStatus)===unref(Status).StrokeGlyphList||unref(editStatus)===unref(Status).RadicalGlyphList||unref(editStatus)===unref(Status).CompGlyphList?"none":"1px solid var(--dark-4)"})},[unref(editStatus)===unref(Status).CharacterList||unref(editStatus)===unref(Status).GlyphList||unref(editStatus)===unref(Status).StrokeGlyphList||unref(editStatus)===unref(Status).RadicalGlyphList||unref(editStatus)===unref(Status).CompGlyphList?(openBlock(),createBlock(ue,{key:0,class:"files-bar-row row-1"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(files).value,le=>(openBlock(),createElementBlock("span",{class:normalizeClass({"file-tag":!0,selected:le.uuid===unref(selectedFileUUID)})},[createBaseVNode("span",{class:"file-info-wrapper",onPointerdown:()=>k(le.uuid)},[createBaseVNode("span",_hoisted_2$Q,toDisplayString$1(le.name),1)],40,_hoisted_1$S),createBaseVNode("span",{class:"close-btn",onPointerdown:()=>y(le.uuid)},[createVNode(z,null,{default:withCtx(()=>[createVNode(unref(close_default))]),_:1})],40,_hoisted_3$v)],2))),256)),withDirectives(createBaseVNode("span",{class:"advanced-edit-btn",onPointerdown:L[0]||(L[0]=()=>unref(setEditStatus)(unref(Status).AdvancedEdit))},[createVNode(j,{type:"primary",size:"small"},{default:withCtx(()=>[createVNode(z,null,{default:withCtx(()=>[createVNode(unref(tools_default))]),_:1}),createTextVNode("  ")]),_:1})],544),[[vShow,unref(files).value.length>0]]),withDirectives(createBaseVNode("div",_hoisted_4$q,[createBaseVNode("span",_hoisted_5$j,toDisplayString$1(unref(r)("panels.settingsPanel.render.title")),1),createVNode(oe,{modelValue:unref(fontPreviewStyle),"onUpdate:modelValue":L[1]||(L[1]=le=>isRef(fontPreviewStyle)?fontPreviewStyle.value=le:null),id:"renderStyle",size:"small",onChange:$},{default:withCtx(()=>[createVNode(ae,{label:"black"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.render.black")),1)]),_:1}),createVNode(ae,{label:"color"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.render.color")),1)]),_:1})]),_:1},8,["modelValue"])],512),[[vShow,unref(files).value.length>0]]),unref(selectedFile)?(openBlock(),createElementBlock("div",_hoisted_6$g,[createVNode(z,{class:"right-btn"},{default:withCtx(()=>[createVNode(unref(search_default))]),_:1}),createVNode(re,{placement:"bottom-end",width:120,trigger:"hover","popper-class":"info-popover"},{reference:withCtx(()=>[createVNode(z,{class:"right-btn"},{default:withCtx(()=>[createVNode(unref(info_filled_default))]),_:1})]),default:withCtx(()=>[createBaseVNode("div",_hoisted_7$d,[createBaseVNode("div",_hoisted_8$d,[createBaseVNode("span",_hoisted_9$d,toDisplayString$1(unref(r)("programming.charCounts")),1),createBaseVNode("span",_hoisted_10$d,toDisplayString$1(unref(selectedFile).characterList.length),1)]),createBaseVNode("div",_hoisted_11$d,[createBaseVNode("span",_hoisted_12$d,toDisplayString$1(unref(r)("programming.strokeCounts")),1),createBaseVNode("span",_hoisted_13$b,toDisplayString$1(unref(stroke_glyphs).length),1)]),createBaseVNode("div",_hoisted_14$a,[createBaseVNode("span",_hoisted_15$8,toDisplayString$1(unref(r)("programming.radicalCounts")),1),createBaseVNode("span",_hoisted_16$8,toDisplayString$1(unref(radical_glyphs).length),1)]),createBaseVNode("div",_hoisted_17$6,[createBaseVNode("span",_hoisted_18$5,toDisplayString$1(unref(r)("programming.compCounts")),1),createBaseVNode("span",_hoisted_19$5,toDisplayString$1(unref(comp_glyphs).length),1)]),createBaseVNode("div",_hoisted_20$5,[createBaseVNode("span",_hoisted_21$4,toDisplayString$1(unref(r)("programming.glyphCompCounts")),1),createBaseVNode("span",_hoisted_22$4,toDisplayString$1(unref(glyphs).length),1)])])]),_:1}),createVNode(z,{class:"right-btn",onPointerdown:L[2]||(L[2]=le=>unref(setFontSettingsDialogVisible)(!0))},{default:withCtx(()=>[createVNode(unref(tools_default))]),_:1}),createBaseVNode("div",_hoisted_23$4,[createBaseVNode("div",{class:normalizeClass(["language-choice-item",{selected:unref(g)==="zh"}]),onClick:L[3]||(L[3]=le=>g.value="zh")},"",2),createBaseVNode("div",{class:normalizeClass(["language-choice-item",{selected:unref(g)==="en"}]),onClick:L[4]||(L[4]=le=>g.value="en")},"English",2)])])):createCommentVNode("",!0)]),_:1})):unref(editStatus)===unref(Status).Edit?(openBlock(),createBlock(ue,{key:1,class:"files-bar-row"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_24$4,[createBaseVNode("span",_hoisted_25$3,[createBaseVNode("span",_hoisted_26$3,toDisplayString$1(unref(editCharacterFile)?.character.text),1)])]),createBaseVNode("div",_hoisted_27$3,[createBaseVNode("span",_hoisted_28$3,toDisplayString$1(unref(r)("panels.settingsPanel.render.title")),1),createVNode(oe,{modelValue:unref(fontRenderStyle),"onUpdate:modelValue":L[5]||(L[5]=le=>isRef(fontRenderStyle)?fontRenderStyle.value=le:null),id:"renderStyle",size:"small"},{default:withCtx(()=>[createVNode(ae,{label:"contour"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.render.contour")),1)]),_:1}),createVNode(ae,{label:"black"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.render.black")),1)]),_:1}),createVNode(ae,{label:"color"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.render.color")),1)]),_:1})]),_:1},8,["modelValue"])])]),_:1})):unref(editStatus)===unref(Status).Glyph?(openBlock(),createBlock(ue,{key:2,class:"files-bar-row"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_29$3,[createBaseVNode("span",_hoisted_30$3,[createBaseVNode("span",_hoisted_31$3,toDisplayString$1(unref(editGlyph).name),1)])]),createBaseVNode("div",_hoisted_32$3,[createBaseVNode("span",_hoisted_33$3,toDisplayString$1(unref(r)("panels.settingsPanel.render.title")),1),createVNode(oe,{modelValue:unref(fontRenderStyle),"onUpdate:modelValue":L[6]||(L[6]=le=>isRef(fontRenderStyle)?fontRenderStyle.value=le:null),id:"renderStyle",size:"small"},{default:withCtx(()=>[createVNode(ae,{label:"contour"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.render.contour")),1)]),_:1}),createVNode(ae,{label:"black"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.render.black")),1)]),_:1})]),_:1},8,["modelValue"])])]),_:1})):createCommentVNode("",!0)],4)}}}),FilesBar=_export_sfc(_sfc_main$T,[["__scopeId","data-v-68b44d07"]]),_hoisted_1$R={class:"bottom-bar"},_hoisted_2$P={class:"tools-wrapper"},_hoisted_3$u={class:"translate-wrapper"},_hoisted_4$p={class:"coords-wrapper"},_hoisted_5$i={class:"zoom-settings-wrapper"},_hoisted_6$f={class:"zoom-settings-wrapper"},zoomScale$1=10,_sfc_main$S=defineComponent({__name:"BottomBar",setup(e){const{t:n}=useI18n(),r=ref("");watch([editCharacterFile],()=>{editCharacterFile.value&&(r.value=`${editCharacterFile.value.view.translateX},${editCharacterFile.value.view.translateY}`)},{deep:!0});const g=()=>{editCharacterFile.value&&editCharacterFile.value.view&&(editCharacterFile.value.view.translateX=0,editCharacterFile.value.view.translateY=0)},y=()=>{modifyCharacterFile(editCharacterFileUUID.value,{view:{zoom:editCharacterFile.value.view.zoom-zoomScale$1>=0?editCharacterFile.value.view.zoom-zoomScale$1:0}}),emitter.emit("updateCharacterView")},k=()=>{modifyCharacterFile(editCharacterFileUUID.value,{view:{zoom:editCharacterFile.value.view.zoom+zoomScale$1<=200?editCharacterFile.value.view.zoom+zoomScale$1:200}}),emitter.emit("updateCharacterView")},$=re=>{const ue=re<=200?re>=0?re:0:200;modifyCharacterFile(editCharacterFileUUID.value,{view:{zoom:ue}}),emitter.emit("updateCharacterView")},V=()=>{const re=picZoom.value-zoomScale$1>=0?picZoom.value-zoomScale$1:0;setPicZoom(re)},L=()=>{const re=picZoom.value+zoomScale$1<=200?picZoom.value+zoomScale$1:200;setPicZoom(re)},z=()=>{setTool("translateMover")},j=()=>{setTool("select")},ae=()=>{setTool("coordsViewer")},oe=()=>{setTool("select")};return(re,ue)=>{const le=resolveComponent("el-button"),de=resolveComponent("el-input"),he=resolveComponent("font-awesome-icon"),_e=resolveComponent("el-icon"),xe=resolveComponent("el-row");return openBlock(),createElementBlock("div",_hoisted_1$R,[unref(editStatus)===unref(Status).Edit?(openBlock(),createBlock(xe,{key:0,class:"bottom-bar-row"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_2$P,[createBaseVNode("span",_hoisted_3$u,[unref(tool)==="translateMover"?(openBlock(),createBlock(de,{key:0,modelValue:r.value,"onUpdate:modelValue":ue[0]||(ue[0]=Ne=>r.value=Ne),class:"translate-text",disabled:!0},{append:withCtx(()=>[createVNode(le,{onPointerdown:g},{default:withCtx(()=>[createTextVNode("")]),_:1})]),_:1},8,["modelValue"])):createCommentVNode("",!0),unref(tool)!=="translateMover"?(openBlock(),createBlock(he,{key:1,class:"translate-btn",onPointerdown:z,icon:"fa-regular fa-hand"})):createCommentVNode("",!0),unref(tool)==="translateMover"?(openBlock(),createBlock(he,{key:2,class:"translate-edit-btn",onPointerdown:j,icon:"fa-solid fa-hand"})):createCommentVNode("",!0)]),createBaseVNode("span",_hoisted_4$p,[unref(tool)==="coordsViewer"?(openBlock(),createBlock(de,{key:0,modelValue:unref(coordsText),"onUpdate:modelValue":ue[1]||(ue[1]=Ne=>isRef(coordsText)?coordsText.value=Ne:null),class:"coords-text",disabled:!0},{prepend:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.bottomBar.coords")),1)]),_:1},8,["modelValue"])):createCommentVNode("",!0),unref(tool)!=="coordsViewer"?(openBlock(),createBlock(he,{key:1,class:"coords-btn",onPointerdown:ae,icon:"fa-solid fa-arrow-pointer"})):unref(tool)==="coordsViewer"?(openBlock(),createBlock(he,{key:2,class:"coords-edit-btn",onPointerdown:oe,icon:"fa-solid fa-arrow-pointer"})):createCommentVNode("",!0)]),createBaseVNode("span",_hoisted_5$i,[createBaseVNode("span",{class:"zoom-out",onPointerdown:y},[createVNode(_e,null,{default:withCtx(()=>[createVNode(unref(zoom_out_default))]),_:1})],32),createVNode(de,{class:"zoom-value","model-value":unref(editCharacterFile)&&unref(editCharacterFile).view.zoom,onInput:$},{append:withCtx(()=>[createTextVNode("%")]),_:1},8,["model-value"]),createBaseVNode("span",{class:"zoom-in",onPointerdown:k},[createVNode(_e,null,{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1})],32)])])]),_:1})):createCommentVNode("",!0),unref(editStatus)===unref(Status).Pic?(openBlock(),createBlock(xe,{key:1,class:"bottom-bar-row"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_6$f,[createBaseVNode("span",{class:"zoom-out",onPointerdown:V},[createVNode(_e,null,{default:withCtx(()=>[createVNode(unref(zoom_out_default))]),_:1})],32),createVNode(de,{class:"zoom-value","model-value":unref(picZoom)},{append:withCtx(()=>[createTextVNode("%")]),_:1},8,["model-value"]),createBaseVNode("span",{class:"zoom-in",onPointerdown:L},[createVNode(_e,null,{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1})],32)])]),_:1})):createCommentVNode("",!0)])}}}),BottomBar=_export_sfc(_sfc_main$S,[["__scopeId","data-v-67784086"]]),_hoisted_1$Q={class:"bottom-bar"},_hoisted_2$O={class:"tools-wrapper"},_hoisted_3$t={class:"translate-wrapper"},_hoisted_4$o={class:"coords-wrapper"},_hoisted_5$h={class:"zoom-settings-wrapper"},zoomScale=10,_sfc_main$R=defineComponent({__name:"GlyphBottomBar",setup(e){const{t:n}=useI18n(),r=ref("");watch([editGlyph],()=>{editGlyph.value&&(r.value=`${editGlyph.value.view.translateX},${editGlyph.value.view.translateY}`)},{deep:!0});const g=()=>{editGlyph.value&&editGlyph.value.view&&(editGlyph.value.view.translateX=0,editGlyph.value.view.translateY=0)},y=()=>{modifyGlyph(editGlyphUUID.value,{view:{zoom:editGlyph.value.view.zoom-zoomScale>=0?editGlyph.value.view.zoom-zoomScale:0}}),emitter.emit("updateGlyphView")},k=()=>{modifyGlyph(editGlyphUUID.value,{view:{zoom:editGlyph.value.view.zoom+zoomScale<=200?editGlyph.value.view.zoom+zoomScale:200}}),emitter.emit("updateGlyphView")},$=ae=>{const oe=ae<=200?ae>=0?ae:0:200;modifyGlyph(editGlyphUUID.value,{view:{zoom:oe}}),emitter.emit("updateGlyphView")},V=()=>{setTool("translateMover")},L=()=>{setTool("select")},z=()=>{setTool("coordsViewer")},j=()=>{setTool("select")};return(ae,oe)=>{const re=resolveComponent("el-button"),ue=resolveComponent("el-input"),le=resolveComponent("font-awesome-icon"),de=resolveComponent("el-icon"),he=resolveComponent("el-row");return openBlock(),createElementBlock("div",_hoisted_1$Q,[createVNode(he,{class:"bottom-bar-row"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_2$O,[createBaseVNode("span",_hoisted_3$t,[unref(tool)==="translateMover"?(openBlock(),createBlock(ue,{key:0,modelValue:r.value,"onUpdate:modelValue":oe[0]||(oe[0]=_e=>r.value=_e),class:"translate-text",disabled:!0},{append:withCtx(()=>[createVNode(re,{onPointerdown:g},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.bottomBar.reset")),1)]),_:1})]),_:1},8,["modelValue"])):createCommentVNode("",!0),unref(tool)!=="translateMover"?(openBlock(),createBlock(le,{key:1,class:"translate-btn",onPointerdown:V,icon:"fa-regular fa-hand"})):unref(tool)==="translateMover"?(openBlock(),createBlock(le,{key:2,class:"translate-edit-btn",onPointerdown:L,icon:"fa-solid fa-hand"})):createCommentVNode("",!0)]),createBaseVNode("span",_hoisted_4$o,[unref(tool)==="coordsViewer"?(openBlock(),createBlock(ue,{key:0,modelValue:unref(coordsText),"onUpdate:modelValue":oe[1]||(oe[1]=_e=>isRef(coordsText)?coordsText.value=_e:null),class:"coords-text",disabled:!0},{prepend:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.bottomBar.coords")),1)]),_:1},8,["modelValue"])):createCommentVNode("",!0),unref(tool)!=="coordsViewer"?(openBlock(),createBlock(le,{key:1,class:"coords-btn",onPointerdown:z,icon:"fa-solid fa-arrow-pointer"})):unref(tool)==="coordsViewer"?(openBlock(),createBlock(le,{key:2,class:"coords-edit-btn",onPointerdown:j,icon:"fa-solid fa-arrow-pointer"})):createCommentVNode("",!0)]),createBaseVNode("span",_hoisted_5$h,[createBaseVNode("span",{class:"zoom-out",onPointerdown:y},[createVNode(de,null,{default:withCtx(()=>[createVNode(unref(zoom_out_default))]),_:1})],32),createVNode(ue,{class:"zoom-value","model-value":unref(editGlyph)&&unref(editGlyph).view.zoom,onInput:$},{append:withCtx(()=>[createTextVNode("%")]),_:1},8,["model-value"]),createBaseVNode("span",{class:"zoom-in",onPointerdown:k},[createVNode(de,null,{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1})],32)])])]),_:1})])}}}),GlyphBottomBar=_export_sfc(_sfc_main$R,[["__scopeId","data-v-5a1a5f85"]]),_hoisted_1$P={class:"characters-list-wrapper"},_hoisted_2$N=createBaseVNode("main",{class:"list",id:"character-render-list"},null,-1),maxCacheSize=1e3,_sfc_main$Q=defineComponent({__name:"CharacterList",setup(e){const n=new Map,r=ref(),g=new Map,y=[];let k=!1;const $=new Map,V=()=>{if(g.size>maxCacheSize){const Ue=Array.from(g.keys());Ue.slice(0,Ue.length-maxCacheSize).forEach(hn=>g.delete(hn))}},L=Ue=>{if($.has(Ue))return $.get(Ue);const Pt=document.getElementById(`preview-canvas-${Ue}`);return Pt&&$.set(Ue,Pt),Pt},z=()=>{const Ue=new Set,Pt=selectedFile.value?.characterList||[];for(let hn=visibleStartIndex.value;hn<Math.min(visibleEndIndex.value,Pt.length);hn++)Ue.add(Pt[hn].uuid);for(const[hn,Dt]of $.entries())Ue.has(hn)||$.delete(hn)},j=()=>{const Ue=selectedFile.value?selectedFile.value.characterList:[];Ue.length&&("requestIdleCallback"in window?requestIdleCallback(()=>{ae(Ue)},{timeout:1e3}):setTimeout(()=>{ae(Ue)},0))},ae=Ue=>{if(selectedFile.value.fontSettings,le){setTimeout(()=>{ae(Ue)},50);return}if(visibleStartIndex.value>=Ue.length){const Pt=r.value?.closest(".el-scrollbar")?.querySelector(".el-scrollbar__wrap");if(Pt){const hn=Pt.clientHeight,Dt=Pt.clientWidth,xn=96,jt=itemHeight+10,Vn=Math.ceil(Dt/xn),Rn=Math.max(1,Vn-1);if(Rn>0){const Tn=Math.ceil(hn/jt),Ln=Math.max(0,Ue.length-(Tn+5)*Rn);visibleStartIndex.value=Ln,visibleEndIndex.value=Ue.length}}}y.length=0;for(let Pt=visibleStartIndex.value;Pt<Math.min(visibleEndIndex.value,Ue.length);Pt++){const hn=Ue[Pt],Dt=`${hn.uuid}_${hn._o?"rendered":"pending"}`;g.has(Dt)||y.includes(hn.uuid)||y.push(hn.uuid)}y.length>0&&(k?setTimeout(()=>{y.length>0&&!k&&oe()},100):oe())},oe=async()=>{if(!k){if(y.length===0){k=!1;return}k=!0;try{const Ue=selectedFile.value?selectedFile.value.characterList:[],{unitsPerEm:Pt,descender:hn}=selectedFile.value.fontSettings;let Dt=0,xn=0;const jt=10,Vn=Date.now(),Rn=5e3;for(;y.length>0&&xn<jt&&(addLoaded(),!(Date.now()-Vn>Rn));){const Tn=y.shift(),Ln=Ue.find(In=>In.uuid===Tn),Sn=Ue.findIndex(In=>In.uuid===Tn);if(!Ln)continue;const An=L(Tn);if(!An){xn++;continue}try{if(Ln._o||executeCharacterScript(Ln),!Ln.orderedList||!Ln.orderedList.length){g.set(`${Tn}_pending`,!0);continue}const In=componentsToContours(orderedListWithItemsForCharacterFile(Ln),{unitsPerEm:Pt,descender:hn,advanceWidth:Pt},{x:0,y:0},!1,!0),Mn=orderedListWithItemsForCharacterFile(Ln).map(ra=>ra.value.fillColor||"#000");renderPreview2(An,In,Mn),g.set(`${Tn}_rendered`,!0),Dt++,loading$1.value&&(loaded$1.value+=1,loaded$1.value>=total$1.value&&(loading$1.value=!1))}catch(In){console.error(`Error rendering character ${Tn}:`,In),xn++}Dt%5===0&&await new Promise(In=>requestAnimationFrame(In))}V(),z()}catch{}finally{k=!1}}};let re=null,ue=0,le=!1,de=null,he=null;const _e=()=>{const Ue=r.value?.closest(".el-scrollbar")?.querySelector(".el-scrollbar__wrap");if(!Ue)return;const Pt=Ue.scrollTop;Math.abs(Pt-ue)>5&&(ue=Pt,xe(Ue))},xe=Ue=>{const Pt=Ue.scrollTop,hn=Ue.clientHeight,Dt=Ue.clientWidth,xn=96,jt=itemHeight+10,Vn=Math.ceil(Dt/xn),Rn=Math.max(1,Vn-1);if(Rn<=0)return;const Tn=Math.ceil(hn/jt);(()=>{const ha=document.getElementById("character-render-list");if(ha){const xa=ha.querySelector(".character");if(xa){const sa=xa.getBoundingClientRect(),Hn=ha.getBoundingClientRect();sa.top-Hn.top}}})();const Sn=selectedFile.value?.characterList?.length||0;(()=>{const ha=Math.floor(Pt/jt)*Rn;ha<Sn&&selectedFile.value?.characterList[ha]})();const Mn=Math.ceil(Sn/Rn)*jt,da=Pt/(Mn-hn)>=.9,ua=Math.floor(Pt/jt)*Rn,aa=Tn*Rn,Nn=Math.max(visibleCount.value/2,Math.ceil(aa*.5)),En=Math.max(0,ua-Nn),Zn=Math.min(ua+aa+Nn,Sn);if(da){const ha=Math.min(Tn*Rn*3,Sn),xa=Math.max(0,Sn-ha),sa=Math.min(xa,En),Hn=Math.max(Sn,Zn);visibleStartIndex.value=sa,visibleEndIndex.value=Hn}else visibleStartIndex.value=En,visibleEndIndex.value=Zn;Ie()},Ne=()=>{le=!0,de&&clearTimeout(de),re&&clearTimeout(re),re=window.setTimeout(()=>{const Ue=r.value?.closest(".el-scrollbar")?.querySelector(".el-scrollbar__wrap");if(!Ue)return;const Pt=Ue.scrollTop;Math.abs(Pt-ue)<itemHeight/2||(xe(Ue),ue=Pt)},50),de=window.setTimeout(()=>{le=!1;const Ue=r.value?.closest(".el-scrollbar")?.querySelector(".el-scrollbar__wrap");Ue&&xe(Ue),j(),setTimeout(()=>{Ie()},50)},200)},$e=()=>{g.clear(),y.length=0,k=!1,$.clear()},Ce=()=>{$e(),j()},Ie=()=>{const Ue=selectedFile.value?.characterList||[];if(Ue.length){y.length=0,g.size,g.clear();for(let Pt=visibleStartIndex.value;Pt<Math.min(visibleEndIndex.value,Ue.length);Pt++){const hn=Ue[Pt];y.push(hn.uuid)}if(y.length>0)if(!k)oe();else{const Pt=()=>{!k&&y.length>0?oe():k&&requestAnimationFrame(Pt)};requestAnimationFrame(Pt)}}};typeof window<"u"&&(window.forceRefreshVisibleCharacters=Ie,window.checkVisibleCharacters=()=>{const Ue=selectedFile.value?.characterList||[],Pt=document.getElementById("character-render-list");if(Pt){const hn=Pt.querySelector(".character");hn&&hn.getBoundingClientRect()}for(let hn=visibleStartIndex.value;hn<Math.min(visibleEndIndex.value,Ue.length);hn++)Ue[hn]},window.testBottomArea=()=>{const Ue=selectedFile.value?.characterList||[];if(Ue.length>0){const Pt=Math.max(0,Ue.length-200);visibleStartIndex.value=Pt,visibleEndIndex.value=Ue.length,Ie()}},window.checkDOMCharacters=()=>{const Ue=selectedFile.value?.characterList||[];for(let Pt=Math.max(0,Ue.length-10);Pt<Ue.length;Pt++){const hn=Ue[Pt];document.getElementById(`preview-canvas-${hn.uuid}`),document.querySelector(`.character-${hn.uuid}`)}for(let Pt=visibleStartIndex.value;Pt<Math.min(visibleEndIndex.value,Ue.length);Pt++){const hn=Ue[Pt];document.getElementById(`preview-canvas-${hn.uuid}`),document.querySelector(`.character-${hn.uuid}`);const Dt=`${hn.uuid}_rendered`;g.has(Dt)}},window.debugBottomScrollInfo=()=>{const Ue=selectedFile.value?.characterList||[],Pt=r.value?.closest(".el-scrollbar")?.querySelector(".el-scrollbar__wrap");if(Pt){const hn=Pt.scrollTop,Dt=Pt.clientHeight,xn=Pt.clientWidth,jt=96,Vn=itemHeight+10,Rn=Math.ceil(xn/jt),Tn=Math.max(1,Rn-1),Ln=Math.floor(hn/Vn),Sn=Math.ceil(Dt/Vn);Math.min((Ln+Sn+5)*Tn,Ue.length);const In=Math.ceil(Ue.length/Tn)*Vn-Dt;hn>=In-50&&Math.max(0,Ue.length-(Sn+5)*Tn)}},window.forceProcessRenderQueue=()=>{k=!1,y.length>0&&oe()},window.forceResetAndRender=()=>{k=!1,y.length=0,g.clear(),$.clear();const Ue=r.value?.closest(".el-scrollbar")?.querySelector(".el-scrollbar__wrap");Ue&&(xe(Ue),Ie())},window.checkCanvasElements=()=>{const Ue=selectedFile.value?.characterList||[];for(let Pt=visibleStartIndex.value;Pt<Math.min(visibleEndIndex.value,Ue.length);Pt++){const hn=Ue[Pt];document.getElementById(`preview-canvas-${hn.uuid}`),document.querySelector(`.character-${hn.uuid}`)}});const ze=(Ue,Pt=!1)=>{let hn;const{unitsPerEm:Dt,descender:xn}=selectedFile.value.fontSettings,jt=selectedFile.value?selectedFile.value.characterList:[];if(Pt)hn=editCharacterFile.value;else for(let An=0;An<jt.length;An++)if(jt[An].uuid===Ue){hn=jt[An];break}if(!hn)return;executeCharacterScript(hn),hn?.components?.map(An=>{An.type==="glyph"&&executeScript(An.value)});const Rn=document.getElementById("character-render-list").querySelector(`#preview-canvas-${hn.uuid}`);if(!Rn)return;let Tn=!0;hn&&hn.info&&hn.info.gridSettings&&(Tn=hn.info.gridSettings.default);const Ln=componentsToContours(orderedListWithItemsForCharacterFile(hn),{unitsPerEm:Dt,descender:xn,advanceWidth:Dt,grid:Tn?null:hn.info.gridSettings,useSkeletonGrid:hn.info?.useSkeletonGrid||!1},{x:0,y:0},!1,!0,!0),Sn=orderedListWithItemsForCharacterFile(hn).map(An=>An.value.fillColor||"#000");renderPreview2(Rn,Ln,Sn)};return onMounted(async()=>{if(await nextTick(),r.value=document.getElementById("character-render-list"),r.value){const Ue=r.value.closest(".el-scrollbar")?.querySelector(".el-scrollbar__wrap");Ue?Ue.addEventListener("scroll",Ne,{passive:!0}):r.value.addEventListener("scroll",Ne,{passive:!0})}he=window.setInterval(_e,100),emitter.on("renderPreviewCanvas",async()=>{await nextTick(),Ce()}),emitter.on("renderPreviewCanvasByUUID",async Ue=>{n.get(Ue)&&(clearTimeout(n.get(Ue)),n.set(Ue,null));const hn=setTimeout(()=>{ze(Ue)},1e3);n.set(Ue,hn)}),emitter.on("renderPreviewCanvasByUUIDOnEditing",async Ue=>{n.get(Ue)&&(clearTimeout(n.get(Ue)),n.set(Ue,null));const hn=setTimeout(()=>{ze(Ue,!0)},100);n.set(Ue,hn)}),emitter.on("updateCharacterInfoPreviewCanvasByUUID",async Ue=>{let Pt;const hn=selectedFile.value?selectedFile.value.characterList:[];for(let jt=0;jt<hn.length&&(Pt=hn[jt],Pt.uuid!==Ue);jt++);const xn=document.getElementById("character-render-list").querySelector(`.character-${Ue}`);xn.querySelector(".info").querySelector(".text").innerHTML=`${Pt.character.text}`,Pt.type==="text"&&(xn.querySelector(".unicode").innerHTML=`0x${Pt.character.unicode.toString(16)}`)}),clearCharacterRenderList(),characterList.value?.map(Ue=>{addCharacterTemplate(generateCharacterTemplate(Ue))}),await nextTick(),Ce()}),onUnmounted(()=>{if(r.value){const Ue=r.value.closest(".el-scrollbar")?.querySelector(".el-scrollbar__wrap");Ue?Ue.removeEventListener("scroll",Ne):r.value.removeEventListener("scroll",Ne)}re&&clearTimeout(re),de&&clearTimeout(de),he&&clearInterval(he),$e(),emitter.off("updateCharacterInfoPreviewCanvasByUUID"),emitter.off("renderPreviewCanvasByUUID"),emitter.off("renderPreviewCanvas"),emitter.off("renderPreviewCanvasByUUIDOnEditing")}),(Ue,Pt)=>{const hn=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("section",_hoisted_1$P,[createVNode(hn,null,{default:withCtx(()=>[_hoisted_2$N]),_:1})])}}}),_hoisted_1$O={class:"glyph-list-wrapper"},_hoisted_2$M=createBaseVNode("main",{class:"list",id:"glyph-render-list"},null,-1),_sfc_main$P=defineComponent({__name:"GlyphList",setup(e){const n=new Map,r=()=>{let y=0;const k=()=>{if(y>=glyphs.value.length)return;const $=glyphs.value[y];executeScript($);const V=document.getElementById("glyph-render-list");if(!V)return;const L=V.querySelector(`#preview-canvas-${$.uuid}`);if(!L)return;const z=componentsToContours($._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(L,z),loading$1.value&&(loaded$1.value+=1,loaded$1.value>=total$1.value&&(loading$1.value=!1)),y++,y<glyphs.value.length&&requestAnimationFrame(k)};requestAnimationFrame(k)},g=(y,k=!1)=>{let $;if(k)$=editGlyph.value;else for(let j=0;j<glyphs.value.length&&($=glyphs.value[j],$.uuid!==y);j++);if(!$)return;executeScript($),$?.components?.map(j=>{j.type==="glyph"&&executeScript(j.value)});const L=document.getElementById("glyph-render-list").querySelector(`#preview-canvas-${$.uuid}`);if(!L)return;const z=componentsToContours($._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(L,z)};return onMounted(async()=>{emitter.on("renderGlyphPreviewCanvas",async()=>{await nextTick(),r(),emitter.emit("renderGlyphSelection")}),emitter.on("renderGlyphPreviewCanvasByUUID",async y=>{const k=getGlyphType(y);if(k===Status.GlyphList){n.get(y)&&(clearTimeout(n.get(y)),n.set(y,null));const $=setTimeout(async()=>{await nextTick(),g(y),emitter.emit("renderGlyphSelectionByUUID",y)},100);n.set(y,$)}else k===Status.StrokeGlyphList?emitter.emit("renderStrokeGlyphPreviewCanvasByUUID",y):k===Status.RadicalGlyphList?emitter.emit("renderRadicalGlyphPreviewCanvasByUUID",y):k===Status.CompGlyphList&&emitter.emit("renderCompGlyphPreviewCanvasByUUID",y)}),emitter.on("renderGlyphPreviewCanvasByUUIDOnEditing",async y=>{const k=getGlyphType(y);if(k===Status.GlyphList){n.get(y)&&(clearTimeout(n.get(y)),n.set(y,null));const $=setTimeout(async()=>{await nextTick(),g(y,!0)},1e3);n.set(y,$),emitter.emit("renderGlyphSelectionByUUIDOnEditing",y)}else k===Status.StrokeGlyphList?(emitter.emit("renderStrokeGlyphPreviewCanvasByUUIDOnEditing",y),emitter.emit("renderStrokeGlyphSelectionByUUIDOnEditing",y)):k===Status.RadicalGlyphList?(emitter.emit("renderRadicalGlyphPreviewCanvasByUUIDOnEditing",y),emitter.emit("renderRadicalGlyphSelectionByUUIDOnEditing",y)):k===Status.CompGlyphList&&(emitter.emit("renderCompGlyphPreviewCanvasByUUIDOnEditing",y),emitter.emit("renderCompGlyphSelectionByUUIDOnEditing",y))}),emitter.on("updateGlyphInfoPreviewCanvasByUUID",async y=>{const k=getGlyphType(y),$=getGlyphByUUID(y);if(k===Status.GlyphList){const L=document.getElementById("glyph-render-list").querySelector(`.glyph-${y}`);L.querySelector(".name").innerHTML=`${$.name}`;const j=document.getElementById("glyph-components-wrapper").querySelector(`.glyph-${y}`);j.querySelector(".name").innerHTML=`${$.name}`}else if(k===Status.StrokeGlyphList){const L=document.getElementById("stroke-glyph-render-list").querySelector(`.glyph-${y}`);L.querySelector(".name").innerHTML=`${$.name}`;const j=document.getElementById("stroke-glyph-components-wrapper").querySelector(`.glyph-${y}`);j.querySelector(".name").innerHTML=`${$.name}`}else if(k===Status.RadicalGlyphList){const L=document.getElementById("radical-glyph-render-list").querySelector(`.glyph-${y}`);L.querySelector(".name").innerHTML=`${$.name}`;const j=document.getElementById("radical-glyph-components-wrapper").querySelector(`.glyph-${y}`);j.querySelector(".name").innerHTML=`${$.name}`}else if(k===Status.CompGlyphList){const L=document.getElementById("comp-glyph-render-list").querySelector(`.glyph-${y}`);L.querySelector(".name").innerHTML=`${$.name}`;const j=document.getElementById("comp-glyph-components-wrapper").querySelector(`.glyph-${y}`);j.querySelector(".name").innerHTML=`${$.name}`}}),!glyphComponentsDialogVisible.value&&setGlyphComponentsDialogVisible(!0),await nextTick(),clearGlyphRenderList(Status.GlyphList),glyphs.value.map(y=>{addGlyphTemplate(y,Status.GlyphList)}),await nextTick(),r(),emitter.emit("renderGlyphSelection"),emitter.emit("renderStrokeGlyphSelection"),emitter.emit("renderRadicalGlyphSelection"),emitter.emit("renderCompGlyphSelection")}),onUnmounted(()=>{emitter.off("renderGlyphPreviewCanvas"),emitter.off("renderGlyphPreviewCanvasByUUID"),emitter.off("updateGlyphInfoPreviewCanvasByUUID"),emitter.off("renderGlyphPreviewCanvasByUUIDOnEditing")}),(y,k)=>{const $=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("section",_hoisted_1$O,[createVNode($,null,{default:withCtx(()=>[_hoisted_2$M]),_:1})])}}}),_hoisted_1$N={class:"stroke-glyph-list-wrapper"},_hoisted_2$L=createBaseVNode("main",{class:"list",id:"stroke-glyph-render-list"},null,-1),_sfc_main$O=defineComponent({__name:"StrokeGlyphList",setup(e){const n=new Map,r=()=>{let y=0;const k=()=>{if(y>=stroke_glyphs.value.length)return;const $=stroke_glyphs.value[y];$._o||executeScript($);const V=document.getElementById("stroke-glyph-render-list");if(!V)return;const L=V.querySelector(`#preview-canvas-${$.uuid}`);if(!L)return;const z=componentsToContours($._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(L,z),loading$1.value&&(loaded$1.value+=1,loaded$1.value>=total$1.value&&(loading$1.value=!1)),y++,y<stroke_glyphs.value.length&&requestAnimationFrame(k)};requestAnimationFrame(k)},g=(y,k=!1)=>{let $;if(k)$=editGlyph.value;else for(let j=0;j<stroke_glyphs.value.length&&($=stroke_glyphs.value[j],$.uuid!==y);j++);if(!$)return;executeScript($),$?.components?.map(j=>{j.type==="glyph"&&executeScript(j.value)});const V=document.getElementById("stroke-glyph-render-list");if(!V)return;const L=V.querySelector(`#preview-canvas-${$.uuid}`);if(!L)return;const z=componentsToContours($._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(L,z)};return onMounted(async()=>{emitter.on("renderStrokeGlyphPreviewCanvas",async()=>{await nextTick(),r(),emitter.emit("renderStrokeGlyphSelection")}),emitter.on("renderStrokeGlyphPreviewCanvasByUUID",async y=>{n.get(y)&&(clearTimeout(n.get(y)),n.set(y,null));const k=setTimeout(async()=>{await nextTick(),g(y),emitter.emit("renderStrokeGlyphSelectionByUUID",y)},100);n.set(y,k)}),emitter.on("renderStrokeGlyphPreviewCanvasByUUIDOnEditing",async y=>{n.get(y)&&(clearTimeout(n.get(y)),n.set(y,null));const $=setTimeout(()=>{g(y,!0)},100);n.set(y,$)}),!glyphComponentsDialogVisible.value&&setGlyphComponentsDialogVisible(!0),await nextTick(),clearGlyphRenderList(Status.StrokeGlyphList),stroke_glyphs.value.map(y=>{addGlyphTemplate(y,Status.StrokeGlyphList)}),await nextTick(),r()}),onUnmounted(()=>{emitter.off("renderStrokeGlyphPreviewCanvas"),emitter.off("renderStrokeGlyphPreviewCanvasByUUID"),emitter.off("renderStrokeGlyphPreviewCanvasByUUIDOnEditing")}),(y,k)=>{const $=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("section",_hoisted_1$N,[createVNode($,null,{default:withCtx(()=>[_hoisted_2$L]),_:1})])}}}),_hoisted_1$M={class:"radical-glyph-list-wrapper"},_hoisted_2$K=createBaseVNode("main",{class:"list",id:"radical-glyph-render-list"},null,-1),_sfc_main$N=defineComponent({__name:"RadicalGlyphList",setup(e){const n=new Map,r=()=>{console.time("timer2");let y=0;const k=()=>{if(y>=radical_glyphs.value.length)return;const $=radical_glyphs.value[y];$._o||(executeScript($),$?.components?.map(j=>{j.type==="glyph"&&executeScript(j.value)}));const V=document.getElementById("radical-glyph-render-list");if(!V)return;const L=V.querySelector(`#preview-canvas-${$.uuid}`);if(!L)return;const z=componentsToContours($._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(L,z),loading$1.value&&(loaded$1.value+=1,loaded$1.value>=total$1.value&&(loading$1.value=!1)),y++,y<radical_glyphs.value.length&&requestAnimationFrame(k)};requestAnimationFrame(k),console.timeEnd("timer2")},g=(y,k=!1)=>{let $;if(k)$=editGlyph.value;else for(let j=0;j<radical_glyphs.value.length&&($=radical_glyphs.value[j],$.uuid!==y);j++);if(!$)return;executeScript($),$?.components?.map(j=>{j.type==="glyph"&&executeScript(j.value)});const V=document.getElementById("radical-glyph-render-list");if(!V)return;const L=V.querySelector(`#preview-canvas-${$.uuid}`);if(!L)return;const z=componentsToContours($._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(L,z)};return onMounted(async()=>{emitter.on("renderRadicalGlyphPreviewCanvas",async()=>{await nextTick(),r(),emitter.emit("renderRadicalGlyphSelection")}),emitter.on("renderRadicalGlyphPreviewCanvasByUUID",async y=>{n.get(y)&&(clearTimeout(n.get(y)),n.set(y,null));const k=setTimeout(async()=>{await nextTick(),g(y),emitter.emit("renderRadicalGlyphSelectionByUUID",y)},100);n.set(y,k)}),emitter.on("renderRadicalGlyphPreviewCanvasByUUIDOnEditing",async y=>{n.get(y)&&(clearTimeout(n.get(y)),n.set(y,null));const $=setTimeout(()=>{g(y,!0)},100);n.set(y,$)}),!glyphComponentsDialogVisible.value&&setGlyphComponentsDialogVisible(!0),await nextTick(),clearGlyphRenderList(Status.RadicalGlyphList),radical_glyphs.value.map(y=>{addGlyphTemplate(y,Status.RadicalGlyphList)}),await nextTick(),r()}),onUnmounted(()=>{emitter.off("renderRadicalGlyphPreviewCanvas"),emitter.off("renderRadicalGlyphPreviewCanvasByUUID"),emitter.off("renderRadicalGlyphPreviewCanvasByUUIDOnEditing")}),(y,k)=>{const $=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("section",_hoisted_1$M,[createVNode($,null,{default:withCtx(()=>[_hoisted_2$K]),_:1})])}}}),_hoisted_1$L={class:"comp-glyph-list-wrapper"},_hoisted_2$J=createBaseVNode("main",{class:"list",id:"comp-glyph-render-list"},null,-1),_sfc_main$M=defineComponent({__name:"CompGlyphList",setup(e){const n=new Map,r=()=>{let y=0;const k=()=>{if(y>=comp_glyphs.value.length)return;const $=comp_glyphs.value[y];$._o||executeScript($);const V=document.getElementById("comp-glyph-render-list");if(!V)return;const L=V.querySelector(`#preview-canvas-${$.uuid}`);if(!L)return;const z=componentsToContours($._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(L,z),loading$1.value&&(loaded$1.value+=1,loaded$1.value>=total$1.value&&(loading$1.value=!1)),y++,y<comp_glyphs.value.length&&requestAnimationFrame(k)};requestAnimationFrame(k)},g=(y,k=!1)=>{let $;if(k)$=editGlyph.value;else for(let j=0;j<comp_glyphs.value.length&&($=comp_glyphs.value[j],$.uuid!==y);j++);if(!$)return;executeScript($),$?.components?.map(j=>{j.type==="glyph"&&executeScript(j.value)});const L=document.getElementById("comp-glyph-render-list").querySelector(`#preview-canvas-${$.uuid}`);if(!L)return;const z=componentsToContours($._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(L,z)};return onMounted(async()=>{emitter.on("renderCompGlyphPreviewCanvas",async()=>{await nextTick(),r(),emitter.emit("renderCompGlyphSelection")}),emitter.on("renderCompGlyphPreviewCanvasByUUID",async y=>{n.get(y)&&(clearTimeout(n.get(y)),n.set(y,null));const k=setTimeout(async()=>{await nextTick(),g(y),emitter.emit("renderCompGlyphSelectionByUUID",y)},100);n.set(y,k)}),emitter.on("renderCompGlyphPreviewCanvasByUUIDOnEditing",async y=>{n.get(y)&&(clearTimeout(n.get(y)),n.set(y,null));const $=setTimeout(()=>{g(y,!0)},100);n.set(y,$)}),!glyphComponentsDialogVisible.value&&setGlyphComponentsDialogVisible(!0),await nextTick(),clearGlyphRenderList(Status.CompGlyphList),comp_glyphs.value.map(y=>{addGlyphTemplate(y,Status.CompGlyphList)}),await nextTick(),r()}),onUnmounted(()=>{emitter.off("renderCompGlyphPreviewCanvas"),emitter.off("renderCompGlyphPreviewCanvasByUUID"),emitter.off("renderCompGlyphPreviewCanvasByUUIDOnEditing")}),(y,k)=>{const $=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("section",_hoisted_1$L,[createVNode($,null,{default:withCtx(()=>[_hoisted_2$J]),_:1})])}}}),listToMap=(e,n)=>{const r={};return e.map(g=>{r[g[n]]=g}),r};curry((e,n)=>{let r;return(...g)=>{clearTimeout(r),r=setTimeout(()=>n(...g),e)}});const initPenEditMode=(e,n=5,r=!1)=>{let g=!1;const y=ae=>{if(document.addEventListener("mouseup",$),e.addEventListener("keydown",L),r){g=!0;for(let _e=orderedListWithItemsForCurrentGlyph.value.length-1;_e>=0;_e--){const xe=orderedListWithItemsForCurrentGlyph.value[_e],{x:Ne,y:$e}=rotatePoint({x:getCoord(ae.offsetX),y:getCoord(ae.offsetY)},{x:xe.x+xe.w/2,y:xe.y+xe.h/2},-xe.rotation);if(selectedComponentUUID$1.value===xe.uuid&&xe.visible){const Ce=transformPenPoints(selectedComponent$1.value,!1);for(let Ie=0;Ie<Ce.length-1;Ie++){const ze=Ce[Ie];if(distance$h(Ne,$e,ze.x,ze.y)<=n){if(ze.type==="anchor"){selectAnchor.value=ze.uuid,selectPenPoint.value=ze.uuid;return}else if(selectAnchor.value){const Ue=(()=>{for(let Pt=0;Pt<Ce.length;Pt++)if(Ce[Pt].uuid===selectAnchor.value)return Pt;return-1})();(Ie<=Ue+4&&Ie>=Ue-4||Ie===1&&Ue===Ce.length-1)&&(selectPenPoint.value=ze.uuid)}}}return}}if(!selectedComponent.value.visible){g=!1;return}const{x:oe,y:re,w:ue,h:le,rotation:de,uuid:he}=selectedComponent.value;rotatePoint({x:getCoord(ae.offsetX),y:getCoord(ae.offsetY)},{x:oe+ue/2,y:re+le/2},-de),setSelectionForCurrentGlyph("")}else{g=!0;for(let _e=orderedListWithItemsForCurrentCharacterFile.value.length-1;_e>=0;_e--){const xe=orderedListWithItemsForCurrentCharacterFile.value[_e],{x:Ne,y:$e}=rotatePoint({x:getCoord(ae.offsetX),y:getCoord(ae.offsetY)},{x:xe.x+xe.w/2,y:xe.y+xe.h/2},-xe.rotation);if(selectedComponentUUID.value===xe.uuid&&xe.visible){const Ce=transformPenPoints(selectedComponent.value,!1);for(let Ie=0;Ie<Ce.length-1;Ie++){const ze=Ce[Ie];if(distance$h(Ne,$e,ze.x,ze.y)<=n){if(ze.type==="anchor"){selectAnchor.value=ze.uuid,selectPenPoint.value=ze.uuid;return}else if(selectAnchor.value){const Ue=(()=>{for(let Pt=0;Pt<Ce.length;Pt++)if(Ce[Pt].uuid===selectAnchor.value)return Pt;return-1})();(Ie<=Ue+4&&Ie>=Ue-4||Ie===1&&Ue===Ce.length-1)&&(selectPenPoint.value=ze.uuid)}}}return}}if(!selectedComponent.value.visible)return;const{x:oe,y:re,w:ue,h:le,rotation:de,uuid:he}=selectedComponent.value;rotatePoint({x:getCoord(ae.offsetX),y:getCoord(ae.offsetY)},{x:oe+ue/2,y:re+le/2},-de),setSelectionForCurrentCharacterFile("")}},k=ae=>{if(r){if(!selectedComponent$1.value||!selectedComponent$1.value?.visible)return;const{x:oe,y:re,w:ue,h:le,rotation:de,uuid:he}=selectedComponent$1.value,{x:_e,y:xe}=rotatePoint({x:getCoord(ae.offsetX),y:getCoord(ae.offsetY)},{x:oe+ue/2,y:re+le/2},-de),Ne=selectedComponent$1.value.value,{points:$e,closePath:Ce}=Ne;if(g){const Ie=clone($e);Ie.map((ze,Ue)=>{if(selectPenPoint.value===ze.uuid){if(ze.type==="anchor"&&Ce&&(Ue<2||Ue>Ie.length-3)){if(Ue<2)for(let Pt=Ie.length-2;Pt<Ie.length;Pt++)Ie[Pt].type==="anchor"&&Ie[Pt].x===ze.x&&Ie[Pt].y===ze.y&&(Ie[Pt].x=_e,Ie[Pt].y=xe);else if(Ue>Ie.length-3)for(let Pt=0;Pt<2;Pt++)$e[Pt].type==="anchor"&&Ie[Pt].x===ze.x&&Ie[Pt].y===ze.y&&(Ie[Pt].x=_e,Ie[Pt].y=xe)}ze.x=_e,ze.y=xe}return ze}),modifyComponentForCurrentGlyph(he,{value:{points:Ie}})}g||$e.map((Ie,ze)=>{if(distance$h(_e,xe,Ie.x,Ie.y)<=n){if(Ie.type==="control"&&ze===$e.length-1&&$e.length>=2&&Ie.x===$e[1].x&&Ie.y===$e[1].y)return;hoverPenPoint.value=Ie.uuid}})}else{if(!selectedComponent.value||!selectedComponent.value?.visible)return;const{x:oe,y:re,w:ue,h:le,rotation:de,uuid:he}=selectedComponent.value,{x:_e,y:xe}=rotatePoint({x:getCoord(ae.offsetX),y:getCoord(ae.offsetY)},{x:oe+ue/2,y:re+le/2},-de),Ne=selectedComponent.value.value,{points:$e,closePath:Ce}=Ne;if(g){const Ie=clone($e);Ie.map((ze,Ue)=>{if(selectPenPoint.value===ze.uuid){if(ze.type==="anchor"&&Ce&&(Ue<2||Ue>Ie.length-3)){if(Ue<2)for(let Pt=Ie.length-2;Pt<Ie.length;Pt++)Ie[Pt].type==="anchor"&&Ie[Pt].x===ze.x&&Ie[Pt].y===ze.y&&(Ie[Pt].x=_e,Ie[Pt].y=xe);else if(Ue>Ie.length-3)for(let Pt=0;Pt<2;Pt++)$e[Pt].type==="anchor"&&Ie[Pt].x===ze.x&&Ie[Pt].y===ze.y&&(Ie[Pt].x=_e,Ie[Pt].y=xe)}ze.x=_e,ze.y=xe}return ze}),modifyComponentForCurrentCharacterFile(he,{value:{points:Ie}})}g||$e.map((Ie,ze)=>{if(distance$h(_e,xe,Ie.x,Ie.y)<=n){if(Ie.type==="control"&&ze===$e.length-1&&$e.length>=2&&Ie.x===$e[1].x&&Ie.y===$e[1].y)return;hoverPenPoint.value=Ie.uuid}})}},$=ae=>{const oe=r?selectedComponent$1.value:selectedComponent.value;!oe||!oe.visible||(z(),g=!1,selectControl$2.value="null",document.removeEventListener("mouseup",$),e.removeEventListener("keydown",L))},V=ae=>{const oe=r?selectedComponent$1.value:selectedComponent.value;!oe||!oe.visible||(z(),r?setSelectionForCurrentGlyph(""):setSelectionForCurrentCharacterFile(""))},L=ae=>{ae.code==="Enter"&&V()},z=()=>{const ae=r?selectedComponent$1.value:selectedComponent.value;if(!ae||!ae.visible)return;let oe=modifyComponentForCurrentCharacterFile;r&&(oe=modifyComponentForCurrentGlyph);const{x:re,y:ue,w:le,h:de,rotation:he,flipX:_e,flipY:xe,type:Ne,uuid:$e}=ae,Ce=ae.value.points;let Ie={unitsPerEm:1e3,descender:-200,advanceWidth:1e3};editStatus.value===Status.Edit&&(Ie.unitsPerEm=selectedFile.value.fontSettings.unitsPerEm,Ie.descender=selectedFile.value.fontSettings.descender,Ie.advanceWidth=selectedFile.value.fontSettings.unitsPerEm);let ze=transformPoints(Ce,{x:re,y:ue,w:le,h:de,rotation:he,flipX:_e,flipY:xe});const Ue=formatPoints(ze,Ie,1),Pt=genPenContour(Ue),hn=100/Ie.unitsPerEm,Dt=ze.map(jt=>Object.assign({},jt,{x:jt.x*hn,y:jt.y*hn})),xn=genPenContour(Dt);oe($e,{value:{contour:Pt,preview:xn}})};return e?.addEventListener("mousedown",y),document.addEventListener("mousemove",k),()=>{e?.removeEventListener("mousedown",y),document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",$),e.removeEventListener("keydown",L),selectAnchor.value="",selectPenPoint.value="",hoverPenPoint.value=""}},renderSelectPenEditor=(e,n=10,r=!1)=>{if(!r&&!selectedComponentUUID.value||r&&!selectedComponentUUID$1.value)return;const g=r?selectedComponent$1.value:selectedComponent.value;if(!g.visible)return;const{x:y,y:k,w:$,h:V,rotation:L,flipX:z,flipY:j,value:ae}=g,oe=mapCanvasX(y),re=mapCanvasY(k),ue=mapCanvasWidth($),le=mapCanvasHeight(V),de=e?.getContext("2d"),he=transformPenPoints(r?selectedComponent$1.value:selectedComponent.value,!0),_e=listToMap(he,"uuid"),{index:xe,pointType:Ne}=(()=>{for(let $e=0;$e<he.length;$e++)if(he[$e].uuid===selectAnchor.value)return{index:$e,pointType:he[$e].type};return{index:-1,pointType:""}})();if(de.strokeStyle="#153063",de.translate(oe+ue/2,re+le/2),de.rotate(L*Math.PI/180),de.translate(-(oe+ue/2),-(re+le/2)),selectAnchor.value)for(let $e=0;$e<he.length-1;$e++){if(he[$e].type==="anchor"&&(de.beginPath(),de.ellipse(he[$e].x,he[$e].y,n,n,0,0,2*Math.PI),de.stroke(),de.closePath()),he[$e].type==="control"&&$e>=xe-4&&$e<=xe+4){const Ce=he[$e].origin,Ie=_e[Ce];de.strokeRect(he[$e].x-n,he[$e].y-n,2*n,2*n),de.beginPath(),de.moveTo(he[$e].x,he[$e].y),de.lineTo(Ie.x,Ie.y),de.stroke(),de.closePath()}if(xe===he.length-1&&he[$e].type==="control"&&$e===1){const Ce=he[$e].origin,Ie=_e[Ce];de.strokeRect(he[$e].x-n,he[$e].y-n,2*n,2*n),de.beginPath(),de.moveTo(he[$e].x,he[$e].y),de.lineTo(Ie.x,Ie.y),de.stroke(),de.closePath()}}else for(let $e=0;$e<he.length;$e++)he[$e].type==="anchor"&&(de.beginPath(),de.ellipse(he[$e].x,he[$e].y,n,n,0,0,2*Math.PI),de.stroke(),de.closePath());for(let $e=0;$e<he.length;$e++)hoverPenPoint.value===he[$e].uuid&&(de.fillStyle="#79bbff",he[$e].type==="anchor"&&(de.beginPath(),de.ellipse(he[$e].x,he[$e].y,n,n,0,0,2*Math.PI),de.fill(),de.closePath()),he[$e].type==="control"&&$e>=xe-4&&$e<=xe+4&&de.fillRect(he[$e].x-n,he[$e].y-n,2*n,2*n),de.fillStyle="#fff");de.setTransform(1,0,0,1,0,0)},transformPenPoints=(e,n)=>{const{x:r,y:g,w:y,h:k,rotation:$,flipX:V,flipY:L,value:z}=e,{points:j}=z,ae=n?mapCanvasX(r):r,oe=n?mapCanvasY(g):g,re=n?mapCanvasWidth(y):y,ue=n?mapCanvasHeight(k):k;let le=j.map(Ne=>{let $e=clone(Ne);return V&&($e.x=ae+re/2+(ae+re/2-$e.x)),L&&($e.y=oe+ue/2+(oe+ue/2-$e.y)),$e});const{x:de,y:he,w:_e,h:xe}=getBound$5(le.reduce((Ne,$e)=>(Ne.push({x:$e.x,y:$e.y}),Ne),[]));return le=le.map(Ne=>{const $e=clone(Ne),{x:Ce,y:Ie}=$e;return $e.x=r+(Ce-de)*y/_e,$e.y=g+(Ie-he)*k/xe,$e}),n&&(le=le.map(Ne=>({...Ne,...mapCanvasCoords({x:Ne.x,y:Ne.y})}))),le},getBoundingFromPoints=(e,n)=>{if(!e||!e.length)return null;let r=1/0,g=-1/0,y=1/0,k=-1/0;for(let $=0;$<e.length;$++){const V=e[$];if(typeof V?.x!="number"||typeof V?.y!="number")continue;const L=V.x+n.x,z=V.y+n.y;L<r&&(r=L),L>g&&(g=L),z<y&&(y=z),z>k&&(k=z)}return!Number.isFinite(r)||!Number.isFinite(g)||!Number.isFinite(y)||!Number.isFinite(k)?null:{minX:r,minY:y,maxX:g,maxY:k}},isPointInBounding=(e,n,r)=>e.x>=n.minX-r&&e.x<=n.maxX+r&&e.y>=n.minY-r&&e.y<=n.maxY+r,toVerticesWithOffset=(e,n)=>e?e.filter(r=>typeof r?.x=="number"&&typeof r?.y=="number").map(r=>({x:r.x+n.x,y:r.y+n.y})):[],pointInPolygon=(e,n)=>{if(!n.length)return!1;let r=!1;for(let g=0,y=n.length-1;g<n.length;y=g++){const k=n[g].x,$=n[g].y,V=n[y].x,L=n[y].y;$>e.y!=L>e.y&&e.x<(V-k)*(e.y-$)/(L-$||Number.EPSILON)+k&&(r=!r)}return r},normalizeComponentWithOffset=(e,n)=>{const r=Object.assign({},e);return r.x=(typeof r.x=="number"?r.x:0)+n.x,r.y=(typeof r.y=="number"?r.y:0)+n.y,r},glyphValueContainsPoint=(e,n,r,g)=>{if(!n)return!1;const y=n._o?.components||orderedListWithItemsForGlyph(n);for(let k=y.length-1;k>=0;k--){const $=y[k];if($&&$.usedInCharacter!==!1&&$.visible!==!1&&glyphItemContainsPoint(e,$,r,g))return!0}return!1},glyphItemContainsPoint=(e,n,r,g)=>{if(!n)return!1;if(n.type==="glyph"){const y=n,k={x:r.x+(y.ox||0),y:r.y+(y.oy||0)};return glyphComponentContainsPoint(e,y,g,k)}if(typeof n.x=="number"&&typeof n.y=="number"&&typeof n.w=="number"&&typeof n.h=="number"){const y=normalizeComponentWithOffset(n,r);return inComponentBound(e,y,g)}switch(n.type){case"glyph-pen":{const y=Array.isArray(n.points)?n.points.filter($=>$&&$.type==="anchor"):[],k=getBoundingFromPoints(y.length?y:n.points,r);return k?isPointInBounding(e,k,g):!1}case"glyph-polygon":{const y=toVerticesWithOffset(n.points,r);if(!y.length)return!1;const k=getBoundingFromPoints(y,{x:0,y:0});return!k||!isPointInBounding(e,k,g)?!1:pointInPolygon(e,y)}case"glyph-rectangle":{const y=(n.x||0)+r.x,k=(n.y||0)+r.y,$=n.width||0,V=n.height||0;return e.x>=y-g&&e.x<=y+$+g&&e.y>=k-g&&e.y<=k+V+g}case"glyph-ellipse":{const y=(n.centerX||0)+r.x,k=(n.centerY||0)+r.y,$=n.radiusX||0,V=n.radiusY||0;if(!$||!V)return!1;const L=e.x-y,z=e.y-k,j=$+g,ae=V+g;return L*L/(j*j)+z*z/(ae*ae)<=1}default:return!1}},glyphComponentContainsPoint=(e,n,r,g)=>{if(!n||!n.visible)return!1;const y=n.value;if(!y)return!1;const k=g||{x:n.ox||0,y:n.oy||0};return glyphValueContainsPoint(e,y,k,r)},initSelect=(e,n=10,r=!1)=>{if(r){if(selectedComponent$1.value&&selectedComponent$1.value.type==="pen"&&selectedComponent$1.value.value.editMode)return initPenEditMode(e,n,!0)}else if(selectedComponent.value&&selectedComponent.value.type==="pen"&&selectedComponent.value.value.editMode)return initPenEditMode(e,n);let g=-1,y=-1,k=!1,$=!1;const V=ue=>{k=!0,$=!1;const le=r?selectedComponent$1.value:selectedComponent.value;if(!le||!le.visible){k=!1;return}document.addEventListener("mouseup",z),e.addEventListener("keydown",ae)},L=ue=>{if($=!0,!r&&!selectedComponent.value||r&&!selectedComponent$1.value)return;const le=r?selectedComponent$1.value:selectedComponent.value;if(!le||!le.visible)return;const{x:de,y:he,w:_e,h:xe,rotation:Ne,uuid:$e}=le,{x:Ce,y:Ie}=rotatePoint({x:getCoord(ue.offsetX),y:getCoord(ue.offsetY)},{x:de+_e/2,y:he+xe/2},-Ne),ze={x:de,y:he},Ue={x:de,y:he+xe},Pt={x:de+_e,y:he},hn={x:de+_e,y:he+xe};let Dt=modifyComponentForCurrentCharacterFile;if(r&&(Dt=modifyComponentForCurrentGlyph),k)switch(selectControl$2.value){case"scale-left-top":Dt($e,{w:_e+de-Ce,h:xe+he-Ie,x:Ce,y:Ie});break;case"scale-right-top":Dt($e,{w:Ce-de,h:xe+he-Ie,y:Ie});break;case"scale-left-bottom":Dt($e,{w:_e+de-Ce,x:Ce,y:Ie-he});break;case"scale-right-bottom":Dt($e,{w:Ce-de,h:Ie-he});break;case"inner-area":Dt($e,{x:de+Ce-g,y:he+Ie-y});break;case"rotate-left-top":Dt($e,{rotation:Ne+angleBetween({x:Ce-(de+_e/2),y:Ie-(he+xe/2)},{x:ze.x-(de+_e/2),y:ze.y-(he+xe/2)})});break;case"rotate-right-top":Dt($e,{rotation:Ne+angleBetween({x:Ce-(de+_e/2),y:Ie-(he+xe/2)},{x:Pt.x-(de+_e/2),y:Pt.y-(he+xe/2)})});break;case"rotate-left-bottom":Dt($e,{rotation:Ne+angleBetween({x:Ce-(de+_e/2),y:Ie-(he+xe/2)},{x:Ue.x-(de+_e/2),y:Ue.y-(he+xe/2)})});break;case"rotate-right-bottom":Dt($e,{rotation:Ne+angleBetween({x:Ce-(de+_e/2),y:Ie-(he+xe/2)},{x:hn.x-(de+_e/2),y:hn.y-(he+xe/2)})});break}k||(distance$h(Ce,Ie,ze.x,ze.y)<=n?selectControl$2.value="scale-left-top":distance$h(Ce,Ie,Pt.x,Pt.y)<=n?selectControl$2.value="scale-right-top":distance$h(Ce,Ie,Ue.x,Ue.y)<=n?selectControl$2.value="scale-left-bottom":distance$h(Ce,Ie,hn.x,hn.y)<=n?selectControl$2.value="scale-right-bottom":leftTop(Ce,Ie,ze.x,ze.y,n)?selectControl$2.value="rotate-left-top":rightTop(Ce,Ie,Pt.x,Pt.y,n)?selectControl$2.value="rotate-right-top":leftBottom(Ce,Ie,Ue.x,Ue.y,n)?selectControl$2.value="rotate-left-bottom":rightBottom(Ce,Ie,hn.x,hn.y,n)?selectControl$2.value="rotate-right-bottom":inComponentBound({x:Ce,y:Ie},r?selectedComponent$1.value:selectedComponent.value)?selectControl$2.value="inner-area":(r?selectedComponent$1.value:selectedComponent.value,selectControl$2.value="null")),g=Ce,y=Ie},z=ue=>{if(!$){const de={x:getCoord(ue.offsetX),y:getCoord(ue.offsetY)};if(r){for(let he=orderedListWithItemsForCurrentGlyph.value.length-1;he>=0;he--){const _e=orderedListWithItemsForCurrentGlyph.value[he];if(!(!_e||!_e.type||_e.type==="group"||_e.visible===!1)){if(_e.type==="glyph"){const xe=_e;if(!glyphComponentContainsPoint(de,xe,20))continue;if(selectedComponentUUID$1.value===xe.uuid)return;setSelectionForCurrentGlyph(xe.uuid),k=!1,$=!1,selectControl$2.value="null";return}if(selectedComponentUUID$1.value===_e.uuid&&inComponentBound(de,_e,20))return;if(inComponentBound(de,_e,20)){setSelectionForCurrentGlyph(_e.uuid),k=!1,$=!1,selectControl$2.value="null";return}}}setSelectionForCurrentGlyph("")}else{for(let he=orderedListWithItemsForCurrentCharacterFile.value.length-1;he>=0;he--){const _e=orderedListWithItemsForCurrentCharacterFile.value[he];if(!(!_e||!_e.type||_e.type==="group"||_e.visible===!1)){if(_e.type==="glyph"){const xe=_e;if(!glyphComponentContainsPoint(de,xe,20))continue;if(selectedComponentUUID.value===xe.uuid)return;setSelectionForCurrentCharacterFile(xe.uuid),k=!1,$=!1,selectControl$2.value="null";return}if(selectedComponentUUID.value===_e.uuid&&inComponentBound(de,_e,20))return;if(inComponentBound(de,_e,20)){setSelectionForCurrentCharacterFile(_e.uuid),k=!1,$=!1,selectControl$2.value="null";return}}}setSelectionForCurrentCharacterFile("")}document.removeEventListener("mouseup",z),e.removeEventListener("keydown",ae)}const le=r?selectedComponent$1.value:selectedComponent.value;!le||!le.visible||(le.type!=="picture"&&oe(),k=!1,$=!1,selectControl$2.value="null")},j=ue=>{const le=r?selectedComponent$1.value:selectedComponent.value;!le||!le.visible||(le.type!=="picture"&&oe(),r?setSelectionForCurrentGlyph(""):setSelectionForCurrentCharacterFile(""))},ae=ue=>{ue.code==="Space"&&j()},oe=()=>{const ue=r?selectedComponent$1.value:selectedComponent.value;if(!ue)return;let le=modifyComponentForCurrentCharacterFile;r&&(le=modifyComponentForCurrentGlyph);let de=genPenContour;const{x:he,y:_e,w:xe,h:Ne,rotation:$e,flipX:Ce,flipY:Ie,type:ze,uuid:Ue}=ue;let Pt=[];if(ze==="polygon")Pt=ue.value.points,de=genPolygonContour;else if(ze==="ellipse"){const{radiusX:Ln,radiusY:Sn}=ue.value;Pt=getEllipsePoints(Ln,Sn,1e3,he+Ln,_e+Sn),de=genEllipseContour}else if(ze==="rectangle"){const{width:Ln,height:Sn}=ue.value;Pt=getRectanglePoints(Ln,Sn,he,_e),de=genRectangleContour}let hn={unitsPerEm:1e3,descender:-200,advanceWidth:1e3};editStatus.value===Status.Edit&&(hn.unitsPerEm=selectedFile.value.fontSettings.unitsPerEm,hn.descender=selectedFile.value.fontSettings.descender,hn.advanceWidth=selectedFile.value.fontSettings.unitsPerEm);let Dt=transformPoints(Pt,{x:he,y:_e,w:xe,h:Ne,rotation:$e,flipX:Ce,flipY:Ie});const xn=formatPoints(Dt,hn,1),jt=de(xn),Vn=100/hn.unitsPerEm,Rn=Dt.map(Ln=>Object.assign({},Ln,{x:Ln.x*Vn,y:Ln.y*Vn})),Tn=de(Rn);le(Ue,{value:{contour:jt,preview:Tn}})};return e?.addEventListener("mousedown",V),document.addEventListener("mousemove",L),()=>{e?.removeEventListener("mousedown",V),document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",z),e.removeEventListener("keydown",ae)}},renderSelectEditor=(e,n=10,r=!1)=>{if(!r&&!selectedComponent.value||r&&!selectedComponent$1.value)return;if(r){if(selectedComponent$1.value.type==="pen"&&selectedComponent$1.value.value.editMode){renderSelectPenEditor(e,n,!0);return}}else if(selectedComponent.value.type==="pen"&&selectedComponent.value.value.editMode){renderSelectPenEditor(e,n);return}const{x:g,y,w:k,h:$,rotation:V}=r?selectedComponent$1.value:selectedComponent.value,L=mapCanvasX(g),z=mapCanvasY(y),j=mapCanvasWidth(k),ae=mapCanvasHeight($),oe=e?.getContext("2d");oe.strokeStyle="#79bbff",oe.lineWidth=getStrokeWidth(),oe.translate(L+j/2,z+ae/2),oe.rotate(V*Math.PI/180),oe.translate(-(L+j/2),-(z+ae/2)),oe.strokeRect(L,z,j,ae),oe.strokeRect(L-n,z-n,n*2,n*2),oe.strokeRect(L+j-n,z-n,n*2,n*2),oe.strokeRect(L-n,z+ae-n,n*2,n*2),oe.strokeRect(L+j-n,z+ae-n,n*2,n*2),oe.setTransform(1,0,0,1,0,0)},initEllipse=(e,n=!1)=>{let r=!1,g=!1,y=-1,k=-1,$=!1;const V=re=>{saveState("",[StoreType.Ellipse,n?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo),setEditing$3(!0),r=!0,y=getCoord(re.offsetX),k=getCoord(re.offsetY),getCoord(re.offsetX),getCoord(re.offsetY)},L=re=>{if(!r)return;const ue=getCoord(re.offsetX),le=getCoord(re.offsetY);if(g=!0,r)if(!$)setRadiusX(Math.abs(ue-y)/2),setRadiusY(Math.abs(le-k)/2),ue>=y&&le>=k?(setEllipseX(y),setEllipseY(k)):ue<=y&&le<=k?(setEllipseX(ue),setEllipseY(le)):ue>=y&&le<=k?(setEllipseX(y),setEllipseY(le)):(setEllipseX(ue),setEllipseY(k));else{const de=Math.max(Math.abs(ue-y),Math.abs(le-k))/2,he=Math.abs(ue-y)>Math.abs(le-k);setRadiusX(de),setRadiusY(de),ue>=y&&le>=k?(setEllipseX(y),setEllipseY(k)):ue<=y&&le<=k?(setEllipseX(y-2*de),setEllipseY(k-2*de)):ue>=y&&le<=k?he?(setEllipseX(y),setEllipseY(k-2*de)):(setEllipseX(y),setEllipseY(le)):he?(setEllipseX(ue),setEllipseY(k)):(setEllipseX(y-2*de),setEllipseY(k))}},z=re=>{if(setEditing$3(!1),g){const ue=genEllipseComponent(ellipseX.value,ellipseY.value,radiusX.value,radiusY.value);r=!1,g=!1,y=-1,k=-1,$=!1,setEllipseX(-1),setEllipseY(-1),setRadiusX(0),setRadiusY(0),saveState("",[StoreType.Ellipse,n?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo,{newRecord:!1}),n?addComponentForCurrentGlyph(ue):addComponentForCurrentCharacterFile(ue)}else r=!1,g=!1,y=-1,k=-1,$=!1,setEllipseX(-1),setEllipseY(-1),setRadiusX(0),setRadiusY(0)},j=re=>{re.key==="Shift"&&($=!0)},ae=re=>{re.key==="Shift"&&($=!1)};return e.addEventListener("mousedown",V),window.addEventListener("mouseup",z),e.addEventListener("mousemove",L),window.addEventListener("keydown",j),window.addEventListener("keyup",ae),()=>{e.removeEventListener("mousedown",V),e.removeEventListener("mousemove",L),window.removeEventListener("mouseup",z),window.removeEventListener("keydown",j),window.removeEventListener("keyup",ae),setEditing$3(!1)}},renderEllipseEditor=(e,n=5)=>{const r=e.getContext("2d"),{x:g,y,w:k,h:$}=getBound$4(ellipseX.value,ellipseY.value,radiusX.value,radiusY.value),V=mapCanvasX(g),L=mapCanvasY(y),z=mapCanvasWidth(k),j=mapCanvasHeight($),ae=mapCanvasWidth(radiusX.value),oe=mapCanvasWidth(radiusY.value);r.strokeStyle="#000",r.beginPath(),r.ellipse(V+ae,L+oe,ae,oe,0,0,2*Math.PI),r.closePath(),r.stroke(),r.strokeStyle="#79bbff",r.strokeRect(V,L,z,j),r.strokeRect(V-n,L-n,n*2,n*2),r.strokeRect(V+z-n,L-n,n*2,n*2),r.strokeRect(V-n,L+j-n,n*2,n*2),r.strokeRect(V+z-n,L+j-n,n*2,n*2)},getBound$4=(e,n,r,g)=>({x:e,y:n,w:2*r,h:2*g}),genEllipseComponent=(e,n,r,g)=>{let y=getEllipsePoints(r,g,1e3,e+r,n+g);const{x:k,y:$,w:V,h:L}=getBound$4(e,n,r,g),z=0,j=!1,ae=!1;let oe={unitsPerEm:1e3,descender:-200,advanceWidth:1e3};editStatus.value===Status.Edit&&(oe.unitsPerEm=selectedFile.value.fontSettings.unitsPerEm,oe.descender=selectedFile.value.fontSettings.descender,oe.advanceWidth=selectedFile.value.fontSettings.unitsPerEm);let re=transformPoints(y,{x:k,y:$,w:V,h:L,rotation:z,flipX:j,flipY:ae});const ue=formatPoints(re,oe,1),le=genEllipseContour(ue),de=100/oe.unitsPerEm,he=re.map(xe=>Object.assign({},xe,{x:xe.x*de,y:xe.y*de})),_e=genEllipseContour(he);return{uuid:genUUID(),type:"ellipse",name:"ellipse",lock:!1,visible:!0,value:{radiusX:r,radiusY:g,fillColor:"",strokeColor:"#000",preview:_e,contour:le},x:e,y:n,w:2*r,h:2*g,rotation:0,flipX:!1,flipY:!1,usedInCharacter:!0}},initRectangle=(e,n=!1)=>{let r=!1,g=!1,y=-1,k=-1,$=!1;const V=re=>{saveState("",[StoreType.Rectangle,n?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo),setEditing$4(!0),r=!0,y=getCoord(re.offsetX),k=getCoord(re.offsetY),getCoord(re.offsetX),getCoord(re.offsetY)},L=re=>{if(!r)return;const ue=getCoord(re.offsetX),le=getCoord(re.offsetY);if(g=!0,r)if(!$)setRectWidth(Math.abs(ue-y)),setRectHeight(Math.abs(le-k)),ue>=y&&le>=k?(setRectX(y),setRectY(k)):ue<=y&&le<=k?(setRectX(ue),setRectY(le)):ue>=y&&le<=k?(setRectX(y),setRectY(le)):(setRectX(ue),setRectY(k));else{const de=Math.max(Math.abs(ue-y),Math.abs(le-k)),he=Math.abs(ue-y)>Math.abs(le-k);setRectWidth(de),setRectHeight(de),ue>=y&&le>=k?(setRectX(y),setRectY(k)):ue<=y&&le<=k?(setRectX(y-de),setRectY(k-de)):ue>=y&&le<=k?he?(setRectX(y),setRectY(k-de)):(setRectX(y),setRectY(le)):he?(setRectX(ue),setRectY(k)):(setRectX(y-de),setRectY(k))}},z=re=>{if(setEditing$4(!1),g){const ue=genRectComponent(rectX.value,rectY.value,rectWidth.value,rectHeight.value);r=!1,g=!1,$=!1,y=-1,k=-1,setRectX(-1),setRectY(-1),setRectWidth(0),setRectWidth(0),saveState("",[StoreType.Rectangle,n?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo,{newRecord:!1}),n?addComponentForCurrentGlyph(ue):addComponentForCurrentCharacterFile(ue)}else r=!1,g=!1,$=!1,y=-1,k=-1,setRectX(-1),setRectY(-1),setRectWidth(0),setRectWidth(0)},j=re=>{re.key==="Shift"&&($=!0)},ae=re=>{re.key==="Shift"&&($=!1)};return e.addEventListener("mousedown",V),window.addEventListener("mouseup",z),e.addEventListener("mousemove",L),window.addEventListener("keydown",j),window.addEventListener("keyup",ae),()=>{e.removeEventListener("mousedown",V),window.removeEventListener("mouseup",z),e.removeEventListener("mousemove",L),window.removeEventListener("keydown",j),window.removeEventListener("keyup",ae),setEditing$4(!1)}},renderRectangleEditor=(e,n=5)=>{const r=e.getContext("2d"),{x:g,y,w:k,h:$}=getBound$3(rectX.value,rectY.value,rectWidth.value,rectHeight.value),V=mapCanvasX(g),L=mapCanvasY(y),z=mapCanvasWidth(k),j=mapCanvasHeight($);r.strokeStyle="#000",r.strokeRect(V,L,z,j),r.strokeStyle="#79bbff",r.strokeRect(V,L,z,j),r.strokeRect(V-n,L-n,n*2,n*2),r.strokeRect(V+z-n,L-n,n*2,n*2),r.strokeRect(V-n,L+j-n,n*2,n*2),r.strokeRect(V+z-n,L+j-n,n*2,n*2)},getBound$3=(e,n,r,g)=>({x:e,y:n,w:r,h:g}),genRectComponent=(e,n,r,g)=>{const y=getRectanglePoints(r,g,e,n),{x:k,y:$,w:V,h:L}=getBound$3(e,n,r,g),z=0,j=!1,ae=!1;let oe={unitsPerEm:1e3,descender:-200,advanceWidth:1e3};editStatus.value===Status.Edit&&(oe.unitsPerEm=selectedFile.value.fontSettings.unitsPerEm,oe.descender=selectedFile.value.fontSettings.descender,oe.advanceWidth=selectedFile.value.fontSettings.unitsPerEm);let re=transformPoints(y,{x:k,y:$,w:V,h:L,rotation:z,flipX:j,flipY:ae});const ue=formatPoints(re,oe,1),le=genRectangleContour(ue),de=100/oe.unitsPerEm,he=re.map(xe=>Object.assign({},xe,{x:xe.x*de,y:xe.y*de})),_e=genRectangleContour(he);return{uuid:genUUID(),type:"rectangle",name:"rectangle",lock:!1,visible:!0,value:{width:r,height:g,fillColor:"",strokeColor:"#000",preview:_e,contour:le},x:e,y:n,w:r,h:g,rotation:0,flipX:!1,flipY:!1,usedInCharacter:!0}},initPolygon=(e,n=!1)=>{mousedown.value=!1,mousemove.value=!1;const r=5;let g=!1;const y=j=>{if(points.value.length||saveState("",[StoreType.Polygon,n?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo),setEditing$5(!0),mousedown.value=!0,!points.value.length){const ae={uuid:genUUID(),x:getCoord(j.offsetX),y:getCoord(j.offsetY)},oe=clone(points.value);oe.push(ae),setPoints(oe)}},k=j=>{if(!points.value.length||!editing$7)return;const ae=clone(points.value);if(!mousedown.value)if(mousemove.value){const oe=ae[ae.length-1];oe.x=getCoord(j.offsetX),oe.y=getCoord(j.offsetY),g=!1,isNearPoint(getCoord(j.offsetX),getCoord(j.offsetY),points.value[0].x,points.value[0].y,r)&&(oe.x=points.value[0].x,oe.y=points.value[0].y,g=!0),setPoints(ae),mousemove.value=!0}else{saveState("",[StoreType.Polygon,n?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo);const oe={uuid:genUUID(),x:getCoord(j.offsetX),y:getCoord(j.offsetY)};ae.push(oe),setPoints(ae),mousemove.value=!0}},$=j=>{!points.value.length||!editing$7||(mousedown.value=!1,mousemove.value=!1,g&&(setEditing$5(!1),n?addComponentForCurrentGlyph(genPolygonComponent(clone(points.value),!0)):addComponentForCurrentCharacterFile(genPolygonComponent(clone(points.value),!0)),setPoints([]),g=!1))},V=j=>{const ae=clone(points.value);if(points.value.length>=0){const oe={uuid:genUUID(),x:points[0].x,y:points[0].y};ae.push(oe),setPoints(ae)}setEditing$5(!1),n?addComponentForCurrentGlyph(genPolygonComponent(clone(points.value),!0)):addComponentForCurrentCharacterFile(genPolygonComponent(clone(points.value),!0)),setPoints([]),g=!1},L=j=>{j.code==="Enter"&&V()};return e.addEventListener("mousedown",y),window.addEventListener("mousemove",k),window.addEventListener("mouseup",$),window.addEventListener("keydown",L),()=>{e.removeEventListener("mousedown",y),window.removeEventListener("mouseup",$),window.removeEventListener("keydown",L),window.removeEventListener("mousemove",k),setEditing$5(!1),setPoints([]),g=!1}},renderPolygonEditor=(e,n)=>{const r=n.getContext("2d"),g=e.value.map(k=>mapCanvasCoords({x:k.x,y:k.y}));if(!g.length)return;const y=10;r.strokeStyle="#000",r.fillStyle="#000",r.beginPath(),r.moveTo(g[0].x,g[0].y);for(let k=1;k<g.length;k++)r.lineTo(g[k].x,g[k].y);r.stroke(),r.closePath();for(let k=0;k<g.length;k++)r.fillRect(g[k].x-y/2,g[k].y-y/2,y,y)},genPolygonComponent=(e,n)=>{const{x:r,y:g,w:y,h:k}=getBound$5(e.reduce((de,he)=>(de.push({x:he.x,y:he.y}),de),[])),$=0,V=!1,L=!1;let z={unitsPerEm:1e3,descender:-200,advanceWidth:1e3};editStatus.value===Status.Edit&&(z.unitsPerEm=selectedFile.value.fontSettings.unitsPerEm,z.descender=selectedFile.value.fontSettings.descender,z.advanceWidth=selectedFile.value.fontSettings.unitsPerEm);let j=transformPoints(e,{x:r,y:g,w:y,h:k,rotation:$,flipX:V,flipY:L});const ae=formatPoints(j,z,1),oe=genPolygonContour(ae),re=100/z.unitsPerEm,ue=j.map(de=>Object.assign({},de,{x:de.x*re,y:de.y*re})),le=genPolygonContour(ue);return{uuid:genUUID(),type:"polygon",name:"polygon",lock:!1,visible:!0,value:{points:e,fillColor:"",strokeColor:"#000",closePath:n,preview:le,contour:oe},x:r,y:g,w:y,h:k,rotation:0,flipX:!1,flipY:!1,usedInCharacter:!0}};function throttle(e,n,r={}){const{leading:g=!0,trailing:y=!0}=r;let k=null,$=0,V=null;return function(...L){const z=Date.now();!$&&!g&&($=z);const j=n-(z-$);V=L,j<=0||j>n?(k&&(clearTimeout(k),k=null),$=z,e.apply(this,L),V=null):!k&&y&&(k=setTimeout(()=>{$=g?Date.now():0,k=null,V&&(e.apply(this,V),V=null)},j))}}const getBound$2=e=>{let n=1/0,r=1/0,g=-1/0,y=-1/0;return e.map(k=>{const{x:$,y:V}=k;$<n&&(n=$),$>g&&(g=$),V<r&&(r=V),V>y&&(y=V)}),{x:n,y:r,w:g-n,h:y-r}},getLayoutCoords=(e,n)=>{for(let r=0;r<e.length;r++)if(!e[r].children||e[r].children.length===0){const{dx:g,dy:y,size:k,centerSquareSize:$}=editCharacterFile.value.info.gridSettings,V=Math.round((k-$)/2)+g,L=Math.round((k-$)/2+$)+g,z=Math.round((k-$)/2)+y,j=Math.round((k-$)/2+$)+y;for(let ae=0;ae<e[r].coordsSegment;ae++)for(let oe=0;oe<e[r].coordsSegment;oe++){const re=getRatioCoords(e[r],ae,oe,e[r].coordsSegment,{x1:V,x2:L,y1:z,y2:j,l:k});n.push({x:re.x,y:re.y,col:ae,row:oe,id:e[r].id,layout:e[r]})}}else e[r].children&&e[r].children.length&&getLayoutCoords(e[r].children,n)},distance$2=(e,n,r,g)=>Math.sqrt((e-r)*(e-r)+(n-g)*(n-g)),addScript$1=(e,n)=>{selectedSubComponentOnDragging$1.value?selectedSubComponentOnDragging$1.value.value:selectedComponentOnDragging$1?.value?.value;const r=selectedSubComponentOnDragging$1.value?selectedSubComponentOnDragging$1.value:selectedComponentOnDragging$1?.value,g=selectedFile.value.fontSettings?.unitsPerEm;if(editCharacterFileOnDragging.value.glyph_script||(editCharacterFileOnDragging.value.glyph_script={}),dragOption.value==="default"&&!selectedSubComponentOnDragging$1.value){if(editCharacterFileOnDragging.value?.glyph_script&&editCharacterFileOnDragging.value?.glyph_script[r.uuid]){delete editCharacterFileOnDragging.value?.glyph_script[r.uuid];return}}else if(dragOption.value==="default"&&selectedSubComponentOnDragging$1.value){if(SubComponentsRootOnDragging$1.value.value?.glyph_script&&SubComponentsRootOnDragging$1.value.value?.glyph_script[r.uuid]){delete SubComponentsRootOnDragging$1.value.value?.glyph_script[r.uuid];return}}else if(dragOption.value==="layout"&&!selectedSubComponentOnDragging$1.value){if(draggingJoint$2.value&&putAtCoord$2.value){let y=null,k=0,$=0,V=1/0;const{x:L,y:z}=putAtCoord$2.value;for(let oe=0;oe<n.length;oe++){const re=n[oe],ue=distance$2(L,z,re.x,re.y);ue<V&&(V=ue,y=re,k=L-y.x,$=z-y.y)}let ae=`${`const ratio_coord = window.character.getRatioCoords(window.character.getLayoutByID('${y.id}'),${y.col},${y.row},${y.layout.coordsSegment})`};`;ae+=`if (window.character.getComponent('${r.name}')) { window.character.getComponent('${r.name}').ox = ratio_coord.x+${k} - window.character.getGlyph('${r.name}')?.getJoint('${draggingJoint$2.value.name}')?.x; }`,ae+=`if (window.character.getComponent('${r.name}')) { window.character.getComponent('${r.name}').oy = ratio_coord.y+${$} - window.character.getGlyph('${r.name}')?.getJoint('${draggingJoint$2.value.name}')?.y; }`,editCharacterFileOnDragging.value.glyph_script[r.uuid]=ae,executeCharacterScript(editCharacterFileOnDragging.value)}else if(putAtCoord$2.value){let y=null,k=0,$=0,V=1/0;const{x:L,y:z}=putAtCoord$2.value;for(let oe=0;oe<n.length;oe++){const re=n[oe],ue=distance$2(L,z,re.x,re.y);ue<V&&(V=ue,y=re,k=L-y.x,$=z-y.y)}const ae=`${`const ratio_coord = window.character.getRatioCoords(window.character.getLayoutByID('${y.id}'),${y.col},${y.row},${y.layout.coordsSegment})`};window.character.getComponent('${r.name}')?.ox = ratio_coord.x + ${k} - ${g/2};window.character.getComponent('${r.name}')?.oy = ratio_coord.y + ${$} - ${g/2}`;editCharacterFileOnDragging.value.glyph_script[r.uuid]=ae,executeCharacterScript(editCharacterFileOnDragging.value)}}else if(dragOption.value==="layout"&&selectedSubComponentOnDragging$1.value){SubComponentsRootOnDragging$1.value.value.glyph_script||(SubComponentsRootOnDragging$1.value.value.glyph_script={});const{ox:y,oy:k}=getOrigin2$1();if(draggingJoint$2.value&&putAtCoord$2.value){const{x:$,y:V}=putAtCoord$2.value,L=getRatioLayout2(SubComponentsRootOnDragging$1.value.value,"width"),z=getRatioLayout2(SubComponentsRootOnDragging$1.value.value,"height"),j=($-(g-L)/2-y)/L,ae=(V-(g-z)/2-k)/z;selectedSubComponentOnDragging$1.value.value._o.getJoint(`${draggingJoint$2.value.name}`)?.x;let oe=`if (window.glyph.getComponent('${r.name}')) { window.glyph.getComponent('${r.name}').ox = (${g} - window.glyph.getRatioLayout('width')) / 2 + window.glyph.getRatioLayout('width') * ${j} - window.glyph.getGlyph('${r.name}')?.getJoint('${draggingJoint$2.value.name}')?.x; }`;oe+=`if (window.glyph.getComponent('${r.name}')) { window.glyph.getComponent('${r.name}').oy = (${g} - window.glyph.getRatioLayout('height')) / 2 + window.glyph.getRatioLayout('height') * ${ae} - window.glyph.getGlyph('${r.name}')?.getJoint('${draggingJoint$2.value.name}')?.y; }`,SubComponentsRootOnDragging$1.value.value.glyph_script[r.uuid]=oe}else if(putAtCoord$2.value){const{x:$,y:V}=putAtCoord$2.value,L=$-g/2,z=V-g/2,j=getRatioLayout2(SubComponentsRootOnDragging$1.value.value,"width"),ae=getRatioLayout2(SubComponentsRootOnDragging$1.value.value,"height"),oe=(L-(g-j)/2-y)/j,re=(z-(g-ae)/2-k)/ae;let ue=`if (window.glyph.getComponent('${r.name}')) { window.glyph.getComponent('${r.name}').ox = (${g} - window.glyph.getRatioLayout('width')) / 2 + window.glyph.getRatioLayout('width') * ${oe}; }`;ue+=`if (window.glyph.getComponent('${r.name}')) { window.glyph.getComponent('${r.name}').oy = (${g} - window.glyph.getRatioLayout('height')) / 2 + window.glyph.getRatioLayout('height') * ${re}; }`,SubComponentsRootOnDragging$1.value.value.glyph_script[r.uuid]=ue}executeScript(SubComponentsRootOnDragging$1.value.value)}emitter.emit("renderCharacter",!0)},initGlyphDragger$1=(e,n=!1)=>{let r,g,y,k;const $=selectedFile.value.fontSettings?.unitsPerEm;let V=!1,L=!1,z=-1,j=-1,ae=-1,oe=-1,re=[],ue=!1;const le=throttle(($e,Ce,Ie,ze)=>{$e._o.onSkeletonDrag({draggingJoint:Ce,deltaX:Ie,deltaY:ze}),emitter.emit("renderCharacter")},16,{leading:!0,trailing:!0}),de=throttle(($e,Ce)=>{if(selectedSubComponentOnDragging$1.value)addScript$1(),modifySubComponent({ox:y+$e,oy:k+Ce});else{if(!editCharacterFileOnDragging.value)return;for(let Ie=0;Ie<editCharacterFileOnDragging.value.components.length;Ie++)editCharacterFileOnDragging.value.components[Ie].uuid===selectedComponentUUID.value&&(editCharacterFileOnDragging.value.components[Ie].ox=y+$e,editCharacterFileOnDragging.value.components[Ie].oy=k+Ce);emitter.emit("renderCharacter")}},16,{leading:!0,trailing:!0}),he=$e=>{if(!draggable$1.value||!selectedComponent.value&&!selectedSubComponent.value)return;editCharacterFileOnDragging.value=clone(editCharacterFile.value);for(let Pt=0;Pt<editCharacterFileOnDragging.value.components.length;Pt++){const hn=editCharacterFileOnDragging.value.components[Pt];hn.type==="glyph"&&executeScript(hn.value)}let Ce=[],Ie=null;if(selectedSubComponentOnDragging$1.value?(Ce=getJoints$1(selectedComponentOnDragging$1?.value,selectedSubComponentOnDragging$1.value.uuid),Ie=selectedSubComponentOnDragging$1.value.value):selectedComponentOnDragging$1?.value&&(Ce=getJoints$1(selectedComponentOnDragging$1?.value,selectedComponentOnDragging$1?.value.uuid),Ie=selectedComponentOnDragging$1?.value?.value),!Ie||!Ie._o)return;Ce=Ce.filter(Pt=>!Pt.name.includes("_ref")),re=[],getLayoutCoords(editCharacterFileOnDragging.value.info.layoutTree,re),ae=getCoord($e.offsetX),oe=getCoord($e.offsetY);const ze=20;if(checkJoints.value)for(let Pt=0;Pt<Ce.length;Pt++){const{x:hn,y:Dt}=Ce[Pt];distance$2(hn,Dt,ae,oe)<=ze&&(draggingJoint$2.value=Ce[Pt],ue=Pt===0,Pt!==0&&Ie._o.onSkeletonDragStart&&Ie._o.onSkeletonDragStart({draggingJoint:draggingJoint$2.value,deltaX:0,deltaY:0}))}setEditing$2(!0),V=!0,z=getCoord($e.offsetX),j=getCoord($e.offsetY);const Ue=getOrigin$3();r=Ue.ox,g=Ue.oy,y=selectedSubComponentOnDragging$1.value?selectedSubComponentOnDragging$1.value.ox:selectedComponentOnDragging$1.value.ox,k=selectedSubComponentOnDragging$1.value?selectedSubComponentOnDragging$1.value.oy:selectedComponentOnDragging$1.value.oy,window.addEventListener("mouseup",xe)},_e=$e=>{if(!selectedComponent.value&&!selectedSubComponent.value)return;const Ce=getCoord($e.offsetX)-z,Ie=getCoord($e.offsetY)-j;let ze=null;if(editCharacterFileOnDragging.value&&selectedSubComponentOnDragging$1.value?ze=selectedSubComponentOnDragging$1.value.value:editCharacterFileOnDragging.value&&selectedComponentOnDragging$1?.value?ze=selectedComponentOnDragging$1?.value?.value:!editCharacterFileOnDragging.value&&selectedSubComponent.value?ze=selectedSubComponent.value.value:!editCharacterFileOnDragging.value&&selectedComponent?.value&&(ze=selectedComponent?.value?.value),L=!0,V)if(!draggingJoint$2.value||ue)putAtCoord$2.value={x:r+Ce+$/2,y:g+Ie+$/2},de(Ce,Ie);else if(ze._o?.onSkeletonDrag)le(ze,draggingJoint$2.value,Ce,Ie);else if(putAtCoord$2.value={x:r+draggingJoint$2.value.x+Ce,y:g+draggingJoint$2.value.y+Ie},selectedSubComponentOnDragging$1.value){addScript$1();for(let Ue=0;Ue<editCharacterFileOnDragging.value.components.length;Ue++)editCharacterFileOnDragging.value.components[Ue].uuid===selectedComponentUUID.value&&(editCharacterFileOnDragging.value.components[Ue].ox=y+Ce,editCharacterFileOnDragging.value.components[Ue].oy=k+Ie)}else{addScript$1();for(let Ue=0;Ue<editCharacterFileOnDragging.value.components.length;Ue++)editCharacterFileOnDragging.value.components[Ue].uuid===selectedComponentUUID.value&&(editCharacterFileOnDragging.value.components[Ue].ox=y+Ce,editCharacterFileOnDragging.value.components[Ue].oy=k+Ie)}else if(checkJoints.value){let Ue=[];if(selectedSubComponent.value?Ue=getJoints$1(selectedComponent?.value,selectedSubComponent.value.uuid):selectedComponent?.value&&(Ue=getJoints$1(selectedComponent?.value,selectedComponent?.value.uuid)),Ue=Ue.filter(jt=>!jt.name.includes("_ref")),!ze)return;const Pt=10;let hn=!1;const Dt=getCoord($e.offsetX),xn=getCoord($e.offsetY);for(let jt=0;jt<Ue.length;jt++){const{x:Vn,y:Rn}=Ue[jt];distance$2(Vn,Rn,Dt,xn)<=Pt&&(movingJoint$2.value=Ue[jt],hn=!0)}!hn&&(movingJoint$2.value=null)}},xe=$e=>{if(!selectedComponent.value&&!selectedSubComponent.value){V=!1,L=!1,ae=-1,oe=-1,z=0,j=0,putAtCoord$2.value=null,draggingJoint$2.value=null,ue=!1,window.removeEventListener("mouseup",xe);return}let Ce=null;selectedSubComponentOnDragging$1.value?Ce=selectedSubComponentOnDragging$1.value.value:selectedComponentOnDragging$1?.value&&(Ce=selectedComponentOnDragging$1?.value?.value);const Ie=getCoord($e.offsetX)-z,ze=getCoord($e.offsetY)-j;Ce._o?.onSkeletonDragEnd&&V&&!ue&&Ce._o.onSkeletonDragEnd({draggingJoint:draggingJoint$2.value,deltaX:Ie,deltaY:ze}),window.removeEventListener("mouseup",xe),setEditing$2(!1),L&&addScript$1(n,re),V=!1,L=!1,ae=-1,oe=-1,z=0,j=0,putAtCoord$2.value=null,draggingJoint$2.value=null,ue=!1,editCharacterFile.value.glyph_script=clone(editCharacterFileOnDragging.value.glyph_script),editCharacterFile.value.components=clone(editCharacterFileOnDragging.value.components),editCharacterFileOnDragging.value=null,emitter.emit("renderPreviewCanvasByUUIDOnEditing",editCharacterFile.value.uuid)};return e.addEventListener("mousedown",he),e.addEventListener("mousemove",_e),()=>{e.removeEventListener("mousedown",he),e.removeEventListener("mousemove",_e),editCharacterFileOnDragging.value=null,ue=!1,setEditing$2(!1)}},renderGlyphSelector$1=(e,n=!1)=>{let r=null,g=null;if(editCharacterFileOnDragging.value&&selectedSubComponentOnDragging$1.value?(r=selectedSubComponentOnDragging$1.value.value,g=selectedSubComponentOnDragging$1.value):editCharacterFileOnDragging.value&&selectedComponentOnDragging$1?.value?(r=selectedComponentOnDragging$1?.value?.value,g=selectedComponentOnDragging$1.value):!editCharacterFileOnDragging.value&&selectedSubComponent.value?(r=selectedSubComponent.value.value,g=selectedSubComponent.value):!editCharacterFileOnDragging.value&&selectedComponent?.value&&(r=selectedComponent?.value?.value,g=selectedComponent.value),!r)return;getOrigin$3();let y=getJoints$1(g,g.uuid);const k=L=>{for(let z=0;z<y.length;z++)if(y[z].name===L)return y[z];return{x:0,y:0}};getBound$2(y);const $=5,V=e.getContext("2d");if(movingJoint$2.value&&checkJoints.value){const{x:z,y:j}=k(movingJoint$2.value.name),ae=mapCanvasX(z),oe=mapCanvasY(j);V.fillStyle="red",V.fillRect(ae-10,oe-10,2*10,2*10)}if(draggingJoint$2.value&&checkJoints.value){const{x:L,y:z}=k(draggingJoint$2.value.name),j=10,ae=mapCanvasX(L),oe=mapCanvasY(z);V.fillStyle="red",V.fillRect(ae-j,oe-j,2*j,2*j)}if(putAtCoord$2.value&&putAtCoord$2.value.id){const{x:L,y:z}=putAtCoord$2.value,j=mapCanvasX(L),ae=mapCanvasY(z);V.fillStyle="red",V.fillRect(j-$,ae-$,2*$,2*$)}},getOrigin$3=()=>{if(selectedSubComponentOnDragging$1.value){let{ox:e,oy:n}=selectedComponentOnDragging$1.value,r=selectedComponentOnDragging$1.value;for(let g=1;g<editCharacterFileOnDragging.value.selectedComponentsTree.length;g++){const y=editCharacterFileOnDragging.value.selectedComponentsTree[g],k=selectedItemByUUID(r.value.components,y);r=k,e+=k.ox,n+=k.oy}return{ox:e,oy:n}}else if(selectedSubComponent.value){let{ox:e,oy:n}=selectedComponent.value,r=selectedComponent.value;for(let g=1;g<editCharacterFile.value.selectedComponentsTree.length;g++){const y=editCharacterFile.value.selectedComponentsTree[g],k=selectedItemByUUID(r.value.components,y);r=k,e+=k.ox,n+=k.oy}return{ox:e,oy:n}}return{ox:editCharacterFileOnDragging.value?selectedComponentOnDragging$1.value.ox:selectedComponent.value.ox,oy:editCharacterFileOnDragging.value?selectedComponentOnDragging$1.value.oy:selectedComponent.value.oy}},getOrigin2$1=()=>{if(selectedSubComponentOnDragging$1.value){let{ox:e,oy:n}=selectedComponentOnDragging$1.value,r=selectedComponentOnDragging$1.value;for(let g=1;g<editCharacterFileOnDragging.value.selectedComponentsTree.length-1;g++){const y=editCharacterFileOnDragging.value.selectedComponentsTree[g],k=selectedItemByUUID(r.value.components,y);r=k,e+=k.ox,n+=k.oy}return{ox:e,oy:n}}else if(selectedSubComponent.value){let{ox:e,oy:n}=selectedComponent.value,r=selectedComponent.value;for(let g=1;g<editCharacterFile.value.selectedComponentsTree.length-1;g++){const y=editCharacterFile.value.selectedComponentsTree[g],k=selectedItemByUUID(r.value.components,y);r=k,e+=k.ox,n+=k.oy}return{ox:e,oy:n}}return{ox:editCharacterFileOnDragging.value?selectedComponentOnDragging$1.value.ox:selectedComponent.value.ox,oy:editCharacterFileOnDragging.value?selectedComponentOnDragging$1.value.oy:selectedComponent.value.oy}},initTranslateMover=(e,n=!1)=>{const{translateX:r,translateY:g}=n?editGlyph.value.view:editCharacterFile.value.view;let y=-1,k=-1;const $=j=>{y=j.clientX,k=j.clientY,document.addEventListener("mousemove",V),document.addEventListener("mouseup",L)},V=j=>{n?modifyGlyph(editGlyph.value.uuid,{view:{translateX:r+getCoord(j.clientX-y),translateY:g+getCoord(j.clientY-k)}}):modifyCharacterFile(editCharacterFile.value.uuid,{view:{translateX:r+getCoord(j.clientX-y),translateY:g+getCoord(j.clientY-k)}})},L=j=>{document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",L)};return e?.addEventListener("mousedown",$),()=>{e?.removeEventListener("mousedown",$)}},initCoordsViewer=(e,n=!1)=>{const r=y=>{if(n){const $=y.offsetX/width$3.value*1e3,V=y.offsetY/height$1.value*1e3;coordsText.value=`${$}, ${V}`}else{const k=selectedFile.value.fontSettings.unitsPerEm,$=y.offsetX/width$3.value*k,V=y.offsetY/height$1.value*k;coordsText.value=`${$}, ${V}`}};return e?.addEventListener("mousemove",r),()=>{e?.removeEventListener("mousemove",r)}},_hoisted_1$K={class:"widget grid-controller"},_hoisted_2$I=["width","height"],_sfc_main$L=defineComponent({__name:"GridController",props:{dx:{type:Number,default:0},dy:{type:Number,default:0},centerSquareSize:{type:Number,default:500/3},size:{type:Number,default:500},layoutTree:{type:Array,default:[]},onChange:Function},setup(e){const n=e;useI18n();const{dx:r,dy:g,centerSquareSize:y,size:k,onChange:$,layoutTree:V}=toRefs(n),L=computed(()=>[ae(k.value/2)+ae(r.value),ae(k.value/2)+ae(g.value)]),z=ref(null),j=(Ue,Pt,hn,Dt)=>Math.sqrt((Ue-hn)*(Ue-hn)+(Pt-Dt)*(Pt-Dt)),ae=Ue=>Ue/k.value*500,oe=computed(()=>Math.round((k.value-y.value)/2)+r.value),re=computed(()=>Math.round((k.value-y.value)/2+y.value)+r.value),ue=computed(()=>Math.round((k.value-y.value)/2)+g.value),le=computed(()=>Math.round((k.value-y.value)/2+y.value)+g.value);onMounted(()=>{ze(),executeCharacterScript(editCharacterFile.value),executeCharactersGlyphsScript(editCharacterFile.value),renderGridCanvas(orderedListWithItemsForCurrentCharacterFile.value,z.value,{scale:.5,forceUpdate:!1,fill:!1,offset:{x:0,y:0},grid:{dx:r.value,dy:g.value,size:k.value,centerSquareSize:y.value,x1:oe.value,x2:re.value,y1:ue.value,y2:le.value},useSkeletonGrid:editCharacterFile.value.info?.useSkeletonGrid||!1}),z.value.addEventListener("mousedown",_e),z.value.addEventListener("mousemove",xe)}),onBeforeUnmount(()=>{z.value.removeEventListener("mousedown",_e),z.value.removeEventListener("mousemove",xe)});const de=ref("none"),he=ref("default"),_e=Ue=>{j(Ue.offsetX,Ue.offsetY,L.value[0],L.value[1])<=20?(document.body.addEventListener("mouseup",Ne),de.value="inner-move"):j(Ue.offsetX,Ue.offsetY,ae(k.value/2-y.value/4),ae(k.value/2-y.value/4))<=20?(document.body.addEventListener("mouseup",Ne),de.value="left-top",he.value="left-top"):j(Ue.offsetX,Ue.offsetY,ae(k.value/2+y.value/4),ae(k.value/2-y.value/4))<=20?(document.body.addEventListener("mouseup",Ne),de.value="right-top",he.value="right-top"):j(Ue.offsetX,Ue.offsetY,ae(k.value/2-y.value/4),ae(k.value/2+y.value/4))<=20?(document.body.addEventListener("mouseup",Ne),de.value="left-bottom",he.value="left-bottom"):j(Ue.offsetX,Ue.offsetY,ae(k.value/2+y.value/4),ae(k.value/2+y.value/4))<=20&&(document.body.addEventListener("mouseup",Ne),de.value="right-bottom",he.value="right-bottom")},xe=Ue=>{switch(de.value){case"inner-move":{const Pt=Ue.offsetX/500*k.value-k.value/2,hn=Ue.offsetY/500*k.value-k.value/2;Math.abs(Pt)<=k.value/12&&Math.abs(hn)<=k.value/12&&$.value(Pt,hn,y.value);break}case"none":{j(Ue.offsetX,Ue.offsetY,ae(k.value/2-y.value/4),ae(k.value/2-y.value/4))<=20?he.value="left-top":j(Ue.offsetX,Ue.offsetY,ae(k.value/2+y.value/4),ae(k.value/2-y.value/4))<=20?he.value="right-top":j(Ue.offsetX,Ue.offsetY,ae(k.value/2-y.value/4),ae(k.value/2+y.value/4))<=20?he.value="left-bottom":j(Ue.offsetX,Ue.offsetY,ae(k.value/2+y.value/4),ae(k.value/2+y.value/4))<=20?he.value="right-bottom":he.value="default";break}default:{const Pt=Ue.offsetX/500*k.value-k.value/2,hn=Ue.offsetY/500*k.value-k.value/2;let Dt=0;if(de.value==="left-top"?Dt=Math.min(-Pt,-hn):de.value==="right-top"?Dt=Math.min(Pt,-hn):de.value==="left-bottom"?Dt=Math.min(-Pt,hn):de.value==="right-bottom"&&(Dt=Math.min(Pt,hn)),Dt=Math.abs(Dt),Dt<=k.value/6&&Dt>=k.value/24){const xn=Dt*4,jt=r.value/y.value*xn,Vn=g.value/y.value*xn;$.value(jt,Vn,xn)}else if(Dt>=k.value/6){const xn=k.value/3*2,jt=r.value/y.value*xn,Vn=g.value/y.value*xn;$.value(jt,Vn,xn)}else if(Dt<=k.value/24){const xn=k.value/6,jt=r.value/y.value*xn,Vn=g.value/y.value*xn;$.value(jt,Vn,xn)}break}}},Ne=()=>{de.value="none",document.body.removeEventListener("mouseup",Ne)},$e=Ue=>{};let Ce=null,Ie=!1;watch([gridSettings$1,gridChanged],(Ue,Pt)=>{Ce&&clearTimeout(Ce),Ce=setTimeout(()=>{Ie=!1,clearTimeout(Ce)},500),Ie||($e({gridSettings:Pt[0],gridChanged:Pt[1],newRecord:!0}),Ie=!0)},{deep:!0}),watch([r,g,k,y,V],(Ue,Pt)=>{ze(),executeCharacterScript(editCharacterFile.value),renderGridCanvas(orderedListWithItemsForCurrentCharacterFile.value,z.value,{scale:.5,forceUpdate:!1,fill:!1,offset:{x:0,y:0},grid:{dx:r.value,dy:g.value,size:k.value,centerSquareSize:y.value,x1:oe.value,x2:re.value,y1:ue.value,y2:le.value},useSkeletonGrid:editCharacterFile.value.info?.useSkeletonGrid||!1})},{deep:!0}),watch([tool],()=>{tool.value==="grid"&&orderedListWithItemsForCurrentCharacterFile.value.length&&(ze(),executeCharacterScript(editCharacterFile.value),renderGridCanvas(orderedListWithItemsForCurrentCharacterFile.value,z.value,{scale:.5,forceUpdate:!1,fill:!1,offset:{x:0,y:0},grid:{dx:r.value,dy:g.value,size:k.value,centerSquareSize:y.value,x1:oe.value,x2:re.value,y1:ue.value,y2:le.value},useSkeletonGrid:editCharacterFile.value.info?.useSkeletonGrid||!1}))},{deep:!0});const ze=()=>{const Ue=z.value.getContext("2d");Ue.clearRect(0,0,k.value,k.value),Ue.strokeStyle="#811616",Ue.lineWidth=2,Ue.beginPath(),Ue.moveTo(0,ue.value),Ue.lineTo(k.value,ue.value),Ue.stroke(),Ue.closePath(),Ue.beginPath(),Ue.moveTo(0,le.value),Ue.lineTo(k.value,le.value),Ue.stroke(),Ue.closePath(),Ue.beginPath(),Ue.moveTo(oe.value,0),Ue.lineTo(oe.value,k.value),Ue.stroke(),Ue.closePath(),Ue.beginPath(),Ue.moveTo(re.value,0),Ue.lineTo(re.value,k.value),Ue.stroke(),Ue.closePath(),Ue.beginPath(),Ue.strokeStyle="#153063",Ue.rect(k.value/2-y.value/4,k.value/2-y.value/4,y.value/2,y.value/2),Ue.stroke(),Ue.closePath(),Ue.fillStyle="#153063",Ue.lineWidth=0,Ue.beginPath(),Ue.arc(L.value[0]/500*k.value,L.value[1]/500*k.value,20,0,2*Math.PI),Ue.closePath(),Ue.fill(),V.value.length&&renderLayout(V.value,{x:0,y:0,w:k.value,h:k.value},1,{x1:oe.value,x2:re.value,y1:ue.value,y2:le.value,l:k.value},z.value)};return(Ue,Pt)=>(openBlock(),createElementBlock("div",_hoisted_1$K,[createBaseVNode("canvas",{ref_key:"canvas",ref:z,width:unref(k),height:unref(k),style:{width:"500px",height:"500px"},class:normalizeClass({"left-top":he.value==="left-top","right-top":he.value==="right-top","left-bottom":he.value==="left-bottom","right-bottom":he.value==="right-bottom"})},null,10,_hoisted_2$I)]))}}),GridController$1=_export_sfc(_sfc_main$L,[["__scopeId","data-v-f7859fb6"]]),_withScopeId$c=e=>(pushScopeId("data-v-12bb0909"),e=e(),popScopeId(),e),_hoisted_1$J={class:"widget metrics-controller"},_hoisted_2$H={class:"canvas"},_hoisted_3$s=_withScopeId$c(()=>createBaseVNode("div",{class:"label"},"advanceWidth",-1)),_hoisted_4$n=_withScopeId$c(()=>createBaseVNode("div",{class:"label"},"lsb",-1)),_hoisted_5$g=_withScopeId$c(()=>createBaseVNode("div",{class:"label"},"rsb",-1)),_hoisted_6$e=[_hoisted_5$g],_sfc_main$K=defineComponent({__name:"MetricsController",setup(e){let n=0,r=0,g=!1;const y=oe=>{const re=selectedFile.value.fontSettings.unitsPerEm/500;return oe*re},k=oe=>{const re=selectedFile.value.fontSettings.unitsPerEm/500;return oe/re},$=oe=>{g=!0,r=metrics_data.value.advanceWidth,n=oe.clientX,document.addEventListener("mousemove",V),document.addEventListener("mouseup",L)},V=oe=>{g&&(metrics_data.value.advanceWidth=r+y(oe.clientX-n),metrics_data.value.rsb=metrics_data.value.advanceWidth-(metrics_data.value.lsb+metrics_data.value.xMax-metrics_data.value.xMin))},L=oe=>{g=!1,n=0,r=0,document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",L)},z=oe=>{g=!0,n=oe.clientX,r=metrics_data.value.lsb,document.addEventListener("mousemove",j),document.addEventListener("mouseup",ae)},j=oe=>{g&&(metrics_data.value.lsb=r-y(oe.clientX-n),metrics_data.value.rsb=metrics_data.value.advanceWidth-(metrics_data.value.lsb+metrics_data.value.xMax-metrics_data.value.xMin))},ae=oe=>{g=!1,n=0,r=0,document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",ae)};return(oe,re)=>(openBlock(),createElementBlock("div",_hoisted_1$J,[createBaseVNode("div",_hoisted_2$H,[createBaseVNode("div",{class:"advance-width-controller",style:normalizeStyle({width:`${k(unref(metrics_data).advanceWidth)}px`,left:`${k(unref(metrics_data).xMin-unref(metrics_data).lsb)}px`})},[_hoisted_3$s,createBaseVNode("div",{class:"advance-width-mover mover",onMousedown:$},null,32)],4),createBaseVNode("div",{class:"lsb-controller",style:normalizeStyle({width:`${k(unref(metrics_data).lsb)}px`,left:`${k(unref(metrics_data).xMin-unref(metrics_data).lsb)}px`})},[_hoisted_4$n,createBaseVNode("div",{class:"lsb-mover mover",onMousedown:z},null,32)],4),createBaseVNode("div",{class:"rsb-controller",style:normalizeStyle({width:`${k(unref(metrics_data).rsb)}px`,left:`${k(unref(metrics_data).xMax)}px`})},_hoisted_6$e,4)])]))}}),MetricsController=_export_sfc(_sfc_main$K,[["__scopeId","data-v-12bb0909"]]),initLayoutResizer$1=e=>{let r=!1;const g=SubComponentsRoot.value?SubComponentsRoot.value.value:selectedComponent.value.value,{ox:y,oy:k}=getOrigin$2();if(!g.layout||g.layout.type!=="rect")return;const $=j=>{r=!0},V=j=>{if(!g||!g?.layout)return;const{width:ae,height:oe}=g.layout.params,re=e.width/4+y,ue=e.height/4+k,le=mapCanvasX(re-ae/2),de=mapCanvasY(ue-oe/2),he=mapCanvasWidth(ae),_e=mapCanvasHeight(oe),xe=getCoord(j.offsetX),Ne=getCoord(j.offsetY),$e=j.offsetX*4,Ce=j.offsetY*4,Ie={x:le,y:de},ze={x:xe,y:de+_e},Ue={x:le+he,y:de},Pt={x:le+he,y:de+_e};if(r){switch(selectControl$1.value){case"scale-left-top":{const hn=xe<re?(re-xe)*2:ae,Dt=Ne<ue?(ue-Ne)*2:oe;g.layout.params.width=hn,g.layout.params.height=Dt;break}case"scale-right-top":{const hn=xe>re?(xe-re)*2:ae,Dt=Ne<ue?(ue-Ne)*2:oe;g.layout.params.width=hn,g.layout.params.height=Dt;break}case"scale-left-bottom":{const hn=xe<re?(re-xe)*2:ae,Dt=Ne>ue?(Ne-ue)*2:oe;g.layout.params.width=hn,g.layout.params.height=Dt;break}case"scale-right-bottom":{const hn=xe>re?(xe-re)*2:ae,Dt=Ne>ue?(Ne-ue)*2:oe;g.layout.params.width=hn,g.layout.params.height=Dt;break}}executeScript(g),emitter.emit("renderPreviewCanvasByUUID",g.uuid),emitter.emit("renderCharacter",!0),renderLayoutEditor$1(e)}r||(distance$h($e,Ce,Ie.x,Ie.y)<=20?selectControl$1.value="scale-left-top":distance$h($e,Ce,Ue.x,Ue.y)<=20?selectControl$1.value="scale-right-top":distance$h($e,Ce,ze.x,ze.y)<=20?selectControl$1.value="scale-left-bottom":distance$h($e,Ce,Pt.x,Pt.y)<=20?selectControl$1.value="scale-right-bottom":selectControl$1.value="null")},L=j=>{r=!1};return e?.addEventListener("mousedown",$),document.addEventListener("mousemove",V),document.addEventListener("mouseup",L),()=>{e?.removeEventListener("mousedown",$),document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",L)}},renderLayoutEditor$1=e=>{const r=SubComponentsRoot.value?SubComponentsRoot.value.value:selectedComponent.value.value,{ox:g,oy:y}=getOrigin$2();if(r.layout&&r.layout.type==="rect"){const{width:k,height:$}=r.layout.params,V=e.width/4+g-k/2,L=e.height/4+y-$/2,z=mapCanvasX(V),j=mapCanvasY(L),ae=mapCanvasWidth(k),oe=mapCanvasHeight($),re=e?.getContext("2d");re.strokeStyle="#79bbff",re.translate(z+ae/2,j+oe/2),re.translate(-(z+ae/2),-(j+oe/2)),re.strokeRect(z,j,ae,oe),re.strokeRect(z-5,j-5,5*2,5*2),re.strokeRect(z+ae-5,j-5,5*2,5*2),re.strokeRect(z-5,j+oe-5,5*2,5*2),re.strokeRect(z+ae-5,j+oe-5,5*2,5*2),re.setTransform(1,0,0,1,0,0)}},getOrigin$2=()=>{if(SubComponentsRoot.value){let{ox:e,oy:n}=selectedComponent.value,r=selectedComponent.value;for(let g=1;g<editCharacterFile.value.selectedComponentsTree.length-1;g++){const y=editCharacterFile.value.selectedComponentsTree[g],k=selectedItemByUUID(r.value.components,y);r=k,e+=k.ox,n+=k.oy}return{ox:e,oy:n}}return{ox:selectedComponent.value.ox,oy:selectedComponent.value.oy}},_hoisted_1$I={class:"edit-panel-wrapper"},_hoisted_2$G={class:"canvas-wrapper"},_hoisted_3$r={class:"metrics"},_hoisted_4$m={class:"grid"},_hoisted_5$f=["width","height"],_hoisted_6$d=["width","height"],_sfc_main$J=defineComponent({__name:"EditPanel",setup(e){const n=ref(!1);let r=null,g=null,y=null;const k=ref(null),$=ref(null);onMounted(async()=>{document.addEventListener("keydown",V),tempScript(editCharacterFile.value),executeCharacterScript(editCharacterFile.value);const re=k.value;re.style.width=`${width$3.value*editCharacterFile.value.view.zoom/100}px`,re.style.height=`${height$1.value*editCharacterFile.value.view.zoom/100}px`,grid.precision=selectedFile.value.width/width$3.value*10,setCanvas(re),checkJoints.value=!0,checkRefLines.value=!0,n.value=!0,z(),await nextTick(),ae(),emitter.on("renderCharacter",()=>{componentsToContours(orderedListWithItemsForCurrentCharacterFile.value,{unitsPerEm:selectedFile.value.unitsPerEm,descender:selectedFile.value.descender,advanceWidth:selectedFile.value.unitsPerEm},{x:0,y:0},!1,!1,!0),ae(),oe(),tool.value==="select"&&renderSelectEditor(canvas.value),tool.value==="pen"&&renderPenEditor(canvas.value)}),emitter.on("renderCharacter_forceUpdate",()=>{render$1(canvas.value,!0,!0)}),emitter.on("updateCharacterView",()=>{const ue=canvas.value;ue.style.width=`${500*editCharacterFile.value.view.zoom/100}px`,ue.style.height=`${500*editCharacterFile.value.view.zoom/100}px`}),await nextTick(),selectedComponentUUID.value&&selectedComponent.value.type==="glyph"&&setGlyphDraggerTool("glyphDragger"),loading$1.value=!1});const V=re=>{const ue=navigator.userAgent.includes("Mac");(ue&&re.metaKey&&re.key==="z"||!ue&&re.ctrlKey&&re.key==="z")&&(re.shiftKey?redo$2():undo$2(),re.preventDefault())};onUnmounted(()=>{scripts_map.value={},emitter.off("renderCharacter"),emitter.off("renderCharacter_forceUpdate"),emitter.off("updateCharacterView"),document.removeEventListener("keydown",V),clearState(),r&&r(),y&&y(),g&&g(),setGlyphDraggerTool(""),setTool(""),updateCharacterListFromEditFile()});const L=(re,ue,le)=>{gridChanged.value=!0,gridSettings$1.value.dx=re,gridSettings$1.value.dy=ue,gridSettings$1.value.centerSquareSize=le},z=()=>{switch(r&&r(),tool.value){case"pen":r=initPen(canvas.value);break;case"select":r=initSelect(canvas.value);break;case"ellipse":r=initEllipse(canvas.value);break;case"rectangle":r=initRectangle(canvas.value);break;case"polygon":r=initPolygon(canvas.value);break;case"translateMover":r=initTranslateMover(canvas.value);break;case"coordsViewer":r=initCoordsViewer(canvas.value);break}},j=()=>{g&&g(),glyphDraggerTool.value==="glyphDragger"&&(g=initGlyphDragger$1(canvas.value))};watch(tool,(re,ue)=>{if(n){switch(ae(),tool.value){case"select":selectedComponentUUID.value&&renderSelectEditor(canvas.value);break}oe(),z()}}),watch(glyphDraggerTool,()=>{n&&(ae(),glyphDraggerTool.value==="glyphDragger"&&selectedComponentUUID.value&&(g=initGlyphDragger$1(canvas.value),renderGlyphSelector$1(canvas.value)),oe(),j())}),watch([editing$3,()=>editCharacterFile.value.selectedComponentsTree],()=>{selectedSubComponent.value&&y?(y(),editing$3.value=!1):editing$3.value&&(y=initLayoutResizer$1(canvas.value),renderLayoutEditor$1(canvas.value))},{deep:!0}),watch([()=>selectedComponent.value?.value?.layout,()=>SubComponentsRoot.value?.value?.layout],()=>{ae(),editing$3.value&&(selectedComponent.value||SubComponentsRoot.value)&&renderLayoutEditor$1(canvas.value),tool.value==="select"&&renderSelectEditor(canvas.value),tool.value==="pen"&&renderPenEditor(canvas.value),oe(),emitter.emit("renderPreviewCanvasByUUIDOnEditing",editCharacterFile.value.uuid)},{deep:!0}),watch([background$1,grid,fontRenderStyle],()=>{ae()}),watch([editCharacterFile,selectedFile],()=>{if(!editCharacterFile.value||!n)return;const re=canvas.value;re.width=mapCanvasWidth(selectedFile.value.width),re.height=mapCanvasHeight(selectedFile.value.height),re.style.width=`${width$3.value*editCharacterFile.value.view.zoom/100}px`,re.style.height=`${height$1.value*editCharacterFile.value.view.zoom/100}px`,setCanvas(re),ae(),oe(),tool.value==="select"&&renderSelectEditor(canvas.value),tool.value==="pen"&&renderPenEditor(canvas.value),emitter.emit("renderPreviewCanvasByUUIDOnEditing",editCharacterFile.value.uuid)}),watch([points$1,editing$8],()=>{ae(),tool.value==="select"&&renderSelectEditor(canvas.value),tool.value==="pen"&&renderPenEditor(canvas.value),editing$8.value&&renderPenEditor(canvas.value)}),watch([points,editing$7],()=>{ae(),tool.value==="select"&&renderSelectEditor(canvas.value),tool.value==="pen"&&renderPenEditor(canvas.value),editing$7.value&&renderPolygonEditor(points,canvas.value)}),watch([ellipseX,ellipseY,radiusX,radiusY,editing$5],()=>{ae(),tool.value==="select"&&renderSelectEditor(canvas.value),tool.value==="pen"&&renderPenEditor(canvas.value),editing$5.value&&renderEllipseEditor(canvas.value)}),watch([rectX,rectY,rectWidth,rectHeight,editing$6],()=>{ae(),tool.value==="select"&&renderSelectEditor(canvas.value),tool.value==="pen"&&renderPenEditor(canvas.value),editing$6.value&&renderRectangleEditor(canvas.value)}),watch([editing$4,draggingJoint$2,putAtCoord$2,movingJoint$2],()=>{ae(),oe(),renderGlyphSelector$1(canvas.value),editing$4.value}),watch([selectedComponentUUID,componentsForCurrentCharacterFile,selectedComponent],()=>{editing$3.value=!1,ae(),selectedComponentUUID.value&&(tool.value==="select"&&renderSelectEditor(canvas.value),tool.value==="pen"&&renderPenEditor(canvas.value),oe(),emitter.emit("renderPreviewCanvasByUUIDOnEditing",editCharacterFile.value.uuid))}),watch([orderedListWithItemsForCurrentCharacterFile],()=>{ae(),oe(),tool.value==="select"&&renderSelectEditor(canvas.value),tool.value==="pen"&&renderPenEditor(canvas.value),emitter.emit("renderPreviewCanvasByUUIDOnEditing",editCharacterFile.value.uuid)}),watch([onPenEditMode],()=>{r&&r(),onPenEditMode&&tool.value==="select"&&z()}),watch([selectAnchor,selectPenPoint,hoverPenPoint],()=>{tool.value==="select"&&(ae(),renderSelectEditor(canvas.value))});const ae=()=>{render$1(canvas.value)},oe=()=>{editCharacterFileOnDragging.value?(checkJoints.value&&(selectedSubComponentOnDragging$1.value?renderJoints(selectedSubComponentOnDragging$1.value,canvas.value):SubComponentsRootOnDragging$1.value?renderJoints(SubComponentsRootOnDragging$1.value,canvas.value):selectedComponentOnDragging$1.value&&renderJoints(selectedComponentOnDragging$1.value,canvas.value)),checkRefLines.value&&(selectedSubComponentOnDragging$1.value?renderRefLines(selectedSubComponentOnDragging$1.value,canvas.value):SubComponentsRootOnDragging$1.value?renderRefLines(SubComponentsRootOnDragging$1.value,canvas.value):selectedComponentOnDragging$1.value&&renderRefLines(selectedComponentOnDragging$1.value,canvas.value))):(checkJoints.value&&(selectedSubComponent.value?renderJoints(selectedSubComponent.value,canvas.value):SubComponentsRoot.value?renderJoints(SubComponentsRoot.value,canvas.value):selectedComponent.value&&selectedComponent.value!=="multi"&&renderJoints(selectedComponent.value,canvas.value)),checkRefLines.value&&(selectedSubComponent.value?renderRefLines(selectedSubComponent.value,canvas.value):SubComponentsRoot.value?renderRefLines(SubComponentsRoot.value,canvas.value):selectedComponent.value&&selectedComponent.value!=="multi"&&renderRefLines(selectedComponent.value,canvas.value))),draggingJoint$2.value&&renderGlyphSelector$1(canvas.value)};return(re,ue)=>(openBlock(),createElementBlock("section",_hoisted_1$I,[createBaseVNode("main",_hoisted_2$G,[withDirectives(createBaseVNode("div",_hoisted_3$r,[createVNode(MetricsController)],512),[[vShow,unref(tool)==="metrics"]]),withDirectives(createBaseVNode("div",_hoisted_4$m,[createVNode(GridController$1,{size:unref(gridSettings$1).size,dx:unref(gridSettings$1).dx,dy:unref(gridSettings$1).dy,centerSquareSize:unref(gridSettings$1).centerSquareSize,onChange:L},null,8,["size","dx","dy","centerSquareSize"])],512),[[vShow,unref(tool)==="grid"]]),withDirectives(createBaseVNode("div",{class:"edit-canvas-wrapper",style:normalizeStyle({display:unref(editPanelDisplay)==="edit"&&unref(tool)!=="grid"?"flex":"none"})},[withDirectives(createBaseVNode("canvas",{ref_key:"editCanvas",ref:k,class:normalizeClass({"edit-canvas-panel":!0,"pen-on-edit":unref(tool)==="pen","rectangle-on-edit":unref(tool)==="rectangle","ellipse-on-edit":unref(tool)==="ellipse","polygon-on-edit":unref(tool)==="polygon","rotate-left-top":unref(selectControl$2)==="rotate-left-top","rotate-right-top":unref(selectControl$2)==="rotate-right-top","rotate-left-bottom":unref(selectControl$2)==="rotate-left-bottom","rotate-right-bottom":unref(selectControl$2)==="rotate-right-bottom","scale-left-top":unref(selectControl$2)==="scale-left-top"||unref(selectControl$1)==="scale-left-top","scale-right-top":unref(selectControl$2)==="scale-right-top"||unref(selectControl$1)==="scale-right-top","scale-left-bottom":unref(selectControl$2)==="scale-left-bottom"||unref(selectControl$1)==="scale-left-bottom","scale-right-bottom":unref(selectControl$2)==="scale-right-bottom"||unref(selectControl$1)==="scale-right-bottom","on-translate-move":unref(tool)==="translateMover"}),style:normalizeStyle({transform:`translate3d(${unref(editCharacterFile).view.translateX}px, ${unref(editCharacterFile).view.translateY}px, 0px)`}),width:unref(mapCanvasWidth)(unref(selectedFile).width),height:unref(mapCanvasHeight)(unref(selectedFile).height)},null,14,_hoisted_5$f),[[vShow,unref(tool)!=="grid"]])],4),[[vShow,unref(tool)!=="grid"]]),createBaseVNode("div",{class:"preview-canvas-wrapper",style:normalizeStyle({display:unref(editPanelDisplay)==="preview"?"flex":"none"})},[createBaseVNode("canvas",{ref_key:"previewCanvas",ref:$,class:"preview-canvas-panel",width:unref(mapCanvasWidth)(unref(width$3)),height:unref(mapCanvasHeight)(unref(height$1))},null,8,_hoisted_6$d)],4)])]))}}),EditPanel=_export_sfc(_sfc_main$J,[["__scopeId","data-v-41859a91"]]),initLayoutResizer=e=>{let r=!1;const g=SubComponentsRoot$1.value?SubComponentsRoot$1.value.value:editGlyph.value,{ox:y,oy:k}=getOrigin$1();if(!g.layout||g.layout.type!=="rect")return;const $=j=>{r=!0},V=j=>{if(!g||!g?.layout)return;const{width:ae,height:oe}=g.layout.params,re=e.width/4+y,ue=e.height/4+k,le=mapCanvasX(re-ae/2),de=mapCanvasY(ue-oe/2),he=mapCanvasWidth(ae),_e=mapCanvasHeight(oe),xe=getCoord(j.offsetX),Ne=getCoord(j.offsetY),$e=j.offsetX*4,Ce=j.offsetY*4,Ie={x:le,y:de},ze={x:xe,y:de+_e},Ue={x:le+he,y:de},Pt={x:le+he,y:de+_e};if(r){switch(selectControl.value){case"scale-left-top":{const hn=xe<re?(re-xe)*2:ae,Dt=Ne<ue?(ue-Ne)*2:oe;g.layout.params.width=hn,g.layout.params.height=Dt;break}case"scale-right-top":{const hn=xe>re?(xe-re)*2:ae,Dt=Ne<ue?(ue-Ne)*2:oe;g.layout.params.width=hn,g.layout.params.height=Dt;break}case"scale-left-bottom":{const hn=xe<re?(re-xe)*2:ae,Dt=Ne>ue?(Ne-ue)*2:oe;g.layout.params.width=hn,g.layout.params.height=Dt;break}case"scale-right-bottom":{const hn=xe>re?(xe-re)*2:ae,Dt=Ne>ue?(Ne-ue)*2:oe;g.layout.params.width=hn,g.layout.params.height=Dt;break}}executeScript(g),emitter.emit("renderGlyphPreviewCanvasByUUID",g.uuid),emitter.emit("renderGlyph",!0)}r||(distance$h($e,Ce,Ie.x,Ie.y)<=20?selectControl.value="scale-left-top":distance$h($e,Ce,Ue.x,Ue.y)<=20?selectControl.value="scale-right-top":distance$h($e,Ce,ze.x,ze.y)<=20?selectControl.value="scale-left-bottom":distance$h($e,Ce,Pt.x,Pt.y)<=20?selectControl.value="scale-right-bottom":selectControl.value="null")},L=j=>{r=!1};return e?.addEventListener("mousedown",$),document.addEventListener("mousemove",V),document.addEventListener("mouseup",L),()=>{e?.removeEventListener("mousedown",$),document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",L)}},renderLayoutEditor=e=>{const n=SubComponentsRoot$1.value?SubComponentsRoot$1.value.value:editGlyph.value,{ox:r,oy:g}=getOrigin$1(),y=5;if(n.layout&&n.layout.type==="rect"){const{width:k,height:$}=n.layout.params,V=e.width/4+r-k/2,L=e.height/4+g-$/2,z=mapCanvasX(V),j=mapCanvasY(L),ae=mapCanvasWidth(k),oe=mapCanvasHeight($),re=e?.getContext("2d");re.strokeStyle="#79bbff",re.translate(z+ae/2,j+oe/2),re.translate(-(z+ae/2),-(j+oe/2)),re.strokeRect(z,j,ae,oe),re.strokeRect(z-y,j-y,y*2,y*2),re.strokeRect(z+ae-y,j-y,y*2,y*2),re.strokeRect(z-y,j+oe-y,y*2,y*2),re.strokeRect(z+ae-y,j+oe-y,y*2,y*2),re.setTransform(1,0,0,1,0,0)}},getOrigin$1=()=>{if(SubComponentsRoot$1.value){let{ox:e,oy:n}=selectedComponent$1.value,r=selectedComponent$1.value;for(let g=1;g<editGlyph.value.selectedComponentsTree.length-1;g++){const y=editGlyph.value.selectedComponentsTree[g],k=selectedItemByUUID(r.value.components,y);r=k,e+=k.ox,n+=k.oy}return{ox:e,oy:n}}return{ox:0,oy:0}},editing=ref(!1),setEditing=e=>{editing.value=e},draggingJoint=ref(null),putAtCoord=ref(null),movingJoint=ref(null),editGlyphOnDragging=ref(null);computed(()=>{if(!editGlyphOnDragging.value)return null;const e=editGlyphOnDragging.value;if(!editGlyph.value?.selectedComponentsTree||!editGlyph?.selectedComponentsTree.length)return null;let n=null;for(let g=0;g<editGlyph.value?.selectedComponentsTree.length-1;g++){const y=editGlyph.value?.selectedComponentsTree[g];n?n=selectedItemByUUID(n.value.components,y):n=selectedItemByUUID(e.components,y)}return n.value.components.map(g=>selectedItemByUUID(n.value.components,g.uuid))});const SubComponentsRootOnDragging=computed(()=>{if(!editGlyphOnDragging.value)return null;const e=editGlyphOnDragging.value;if(!editGlyph.value?.selectedComponentsTree||!editGlyph.value?.selectedComponentsTree.length)return null;let n=null;for(let r=0;r<editGlyph.value?.selectedComponentsTree.length-1;r++){const g=editGlyph.value?.selectedComponentsTree[r];n?n=selectedItemByUUID(n.value.components,g):n=selectedItemByUUID(e.components,g)}return n}),selectedSubComponentOnDragging=computed(()=>{let e=null;if(!editGlyphOnDragging.value)e=null;else{const n=editGlyphOnDragging.value;if(!editGlyph.value?.selectedComponentsTree||!editGlyph.value?.selectedComponentsTree.length)e=null;else{let r=null;for(let y=0;y<editGlyph.value?.selectedComponentsTree.length-1;y++){const k=editGlyph.value?.selectedComponentsTree[y];r?r=selectedItemByUUID(r.value.components,k):r=selectedItemByUUID(n.components,k)}const g=editGlyph.value?.selectedComponentsTree[editGlyph.value?.selectedComponentsTree.length-1];g!=="null"&&(e=selectedItemByUUID(r.value.components,g))}}return e}),selectedComponentsOnDragging=computed(()=>{if(!editGlyphOnDragging.value)return null;const e=editGlyphOnDragging.value;return editGlyph.value?.selectedComponentsUUIDs.map(r=>traverseComponents(e.components,r))}),selectedComponentOnDragging=computed(()=>!selectedComponentsOnDragging.value||selectedComponentsOnDragging.value.length===0?null:selectedComponentsOnDragging.value.length===1?selectedComponentsOnDragging.value[0]:"multi"),getBound$1=e=>{let n=1/0,r=1/0,g=-1/0,y=-1/0;return e.map(k=>{const{x:$,y:V}=k;$<n&&(n=$),$>g&&(g=$),V<r&&(r=V),V>y&&(y=V)}),{x:n,y:r,w:g-n,h:y-r}},distance$1=(e,n,r,g)=>Math.sqrt((e-r)*(e-r)+(n-g)*(n-g)),addScript=e=>{selectedSubComponentOnDragging.value?selectedSubComponentOnDragging.value.value:selectedComponentOnDragging?.value?.value;const n=selectedSubComponentOnDragging.value?selectedSubComponentOnDragging.value:selectedComponentOnDragging?.value,r=1e3;if(editGlyphOnDragging.value.glyph_script||(editGlyphOnDragging.value.glyph_script={}),dragOption.value==="default"&&!selectedSubComponentOnDragging.value){if(editGlyphOnDragging.value?.glyph_script&&editGlyphOnDragging.value?.glyph_script[n.uuid]){delete editGlyphOnDragging.value?.glyph_script[n.uuid];return}}else if(dragOption.value==="default"&&selectedSubComponentOnDragging.value){if(SubComponentsRootOnDragging.value.value?.glyph_script&&SubComponentsRootOnDragging.value.value?.glyph_script[n.uuid]){delete SubComponentsRootOnDragging.value.value?.glyph_script[n.uuid];return}}else if(dragOption.value==="layout"&&!selectedSubComponentOnDragging.value){if(draggingJoint.value&&putAtCoord.value){let g=null,y=0,k=0,$=1/0;const{x:V,y:L}=putAtCoord.value;for(let ae=0;ae<e.length;ae++){const oe=e[ae],re=distance$1(V,L,oe.x,oe.y);re<$&&($=re,g=oe,y=V-g.x,k=L-g.y)}let j=`${`const ratio_coord = window.character.getRatioCoords(window.character.getLayoutByID('${g.id}'),${g.col},${g.row},${g.layout.coordsSegment})`};`;j+=`if (window.character.getComponent('${n.name}')) { window.character.getComponent('${n.name}').ox = ratio_coord.x+${y} - window.character.getGlyph('${n.name}')?.getJoint('${draggingJoint.value.name}')?.x; }`,j+=`if (window.character.getComponent('${n.name}')) { window.character.getComponent('${n.name}').oy = ratio_coord.y+${k} - window.character.getGlyph('${n.name}')?.getJoint('${draggingJoint.value.name}')?.y; }`,editGlyphOnDragging.value.glyph_script[n.uuid]=j,executeScript(editGlyphOnDragging.value)}else if(putAtCoord.value){let g=null,y=0,k=0,$=1/0;const{x:V,y:L}=putAtCoord.value;for(let ae=0;ae<e.length;ae++){const oe=e[ae],re=distance$1(V,L,oe.x,oe.y);re<$&&($=re,g=oe,y=V-g.x,k=L-g.y)}const j=`${`const ratio_coord = window.character.getRatioCoords(window.character.getLayoutByID('${g.id}'),${g.col},${g.row},${g.layout.coordsSegment})`};window.character.getComponent('${n.name}')?.ox = ratio_coord.x + ${y} - ${r/2};window.character.getComponent('${n.name}')?.oy = ratio_coord.y + ${k} - ${r/2}`;editGlyphOnDragging.value.glyph_script[n.uuid]=j,executeScript(editGlyphOnDragging.value)}}else if(dragOption.value==="layout"&&selectedSubComponentOnDragging.value){SubComponentsRootOnDragging.value.value.glyph_script||(SubComponentsRootOnDragging.value.value.glyph_script={});const{ox:g,oy:y}=getOrigin2();if(draggingJoint.value&&putAtCoord.value){const{x:k,y:$}=putAtCoord.value,V=getRatioLayout2(SubComponentsRootOnDragging.value.value,"width"),L=getRatioLayout2(SubComponentsRootOnDragging.value.value,"height"),z=(k-(r-V)/2-g)/V,j=($-(r-L)/2-y)/L;selectedSubComponentOnDragging.value.value._o.getJoint(`${draggingJoint.value.name}`)?.x;let ae=`if (window.glyph.getComponent('${n.name}')) { window.glyph.getComponent('${n.name}').ox = (${r} - window.glyph.getRatioLayout('width')) / 2 + window.glyph.getRatioLayout('width') * ${z} - window.glyph.getGlyph('${n.name}')?.getJoint('${draggingJoint.value.name}')?.x; }`;ae+=`if (window.glyph.getComponent('${n.name}')) { window.glyph.getComponent('${n.name}').oy = (${r} - window.glyph.getRatioLayout('height')) / 2 + window.glyph.getRatioLayout('height') * ${j} - window.glyph.getGlyph('${n.name}')?.getJoint('${draggingJoint.value.name}')?.y; }`,SubComponentsRootOnDragging.value.value.glyph_script[n.uuid]=ae}else if(putAtCoord.value){const{x:k,y:$}=putAtCoord.value,V=k-r/2,L=$-r/2,z=getRatioLayout2(SubComponentsRootOnDragging.value.value,"width"),j=getRatioLayout2(SubComponentsRootOnDragging.value.value,"height"),ae=(V-(r-z)/2-g)/z,oe=(L-(r-j)/2-y)/j;let re=`if (window.glyph.getComponent('${n.name}')) { window.glyph.getComponent('${n.name}').ox = (${r} - window.glyph.getRatioLayout('width')) / 2 + window.glyph.getRatioLayout('width') * ${ae}; }`;re+=`if (window.glyph.getComponent('${n.name}')) { window.glyph.getComponent('${n.name}').oy = (${r} - window.glyph.getRatioLayout('height')) / 2 + window.glyph.getRatioLayout('height') * ${oe}; }`,SubComponentsRootOnDragging.value.value.glyph_script[n.uuid]=re}executeScript(SubComponentsRootOnDragging.value.value)}emitter.emit("renderGlyph",!0)},initGlyphDragger=e=>{let n,r,g,y,$=!1,V=!1,L=-1,z=-1,j=-1,ae=-1,oe=[],re=!1;const ue=throttle((Ne,$e,Ce,Ie)=>{Ne._o.onSkeletonDrag({draggingJoint:draggingJoint.value,deltaX:Ce,deltaY:Ie}),emitter.emit("renderGlyph")},16,{leading:!0,trailing:!0}),le=throttle((Ne,$e)=>{if(selectedSubComponentOnDragging.value)addScript(),modifySubComponent$1({ox:g+Ne,oy:y+$e});else{if(!editGlyphOnDragging.value)return;for(let Ce=0;Ce<editGlyphOnDragging.value.components.length;Ce++)editGlyphOnDragging.value.components[Ce].uuid===selectedComponentUUID$1.value&&(editGlyphOnDragging.value.components[Ce].ox=g+Ne,editGlyphOnDragging.value.components[Ce].oy=y+$e);emitter.emit("renderGlyph")}},16,{leading:!0,trailing:!0}),de=Ne=>{if(!draggable$1.value)return;editGlyphOnDragging.value=clone(editGlyph.value);for(let Ue=0;Ue<editGlyphOnDragging.value.components.length;Ue++){const Pt=editGlyphOnDragging.value.components[Ue];Pt.type==="glyph"&&executeScript(Pt.value)}let $e=[],Ce=null;if(selectedSubComponentOnDragging.value?($e=getJoints$1(selectedComponentOnDragging?.value,selectedSubComponentOnDragging.value.uuid),Ce=selectedSubComponentOnDragging.value.value):selectedComponentOnDragging?.value&&($e=getJoints$1(selectedComponentOnDragging?.value,selectedComponentOnDragging?.value.uuid),Ce=selectedComponentOnDragging?.value?.value),$e=$e.filter(Ue=>!Ue.name.includes("_ref")),!Ce||!Ce._o)return;oe=[],j=getCoord(Ne.offsetX),ae=getCoord(Ne.offsetY);const Ie=20;if(checkJoints.value)for(let Ue=0;Ue<$e.length;Ue++){const{x:Pt,y:hn}=$e[Ue];distance$1(Pt,hn,j,ae)<=Ie&&(draggingJoint.value=$e[Ue],re=Ue===0,Ue!==0&&Ce._o.onSkeletonDragStart&&Ce._o.onSkeletonDragStart({draggingJoint:draggingJoint.value,deltaX:0,deltaY:0}))}setEditing(!0),$=!0,L=getCoord(Ne.offsetX),z=getCoord(Ne.offsetY);const ze=getOrigin();n=ze.ox,r=ze.oy,g=selectedSubComponentOnDragging.value?selectedSubComponentOnDragging.value.ox:selectedComponentOnDragging.value.ox,y=selectedSubComponentOnDragging.value?selectedSubComponentOnDragging.value.oy:selectedComponentOnDragging.value.oy,window.addEventListener("mouseup",_e)},he=Ne=>{const $e=getCoord(Ne.offsetX)-L,Ce=getCoord(Ne.offsetY)-z;let Ie=null;if(editGlyphOnDragging.value&&selectedSubComponentOnDragging.value?Ie=selectedSubComponentOnDragging.value.value:editGlyphOnDragging.value&&selectedComponentOnDragging?.value?Ie=selectedComponentOnDragging?.value?.value:!editGlyphOnDragging.value&&selectedSubComponent$1.value?Ie=selectedSubComponent$1.value.value:!editGlyphOnDragging.value&&selectedComponent$1?.value&&(Ie=selectedComponent$1?.value?.value),V=!0,$)if(!draggingJoint.value||re)putAtCoord.value={x:n+$e+1e3/2,y:r+Ce+1e3/2},le($e,Ce);else if(Ie._o?.onSkeletonDrag)ue(Ie,draggingJoint.value,$e,Ce);else if(putAtCoord.value={x:n+draggingJoint.value.x+$e,y:r+draggingJoint.value.y+Ce},selectedSubComponentOnDragging.value){addScript();for(let ze=0;ze<editGlyphOnDragging.value.components.length;ze++)editGlyphOnDragging.value.components[ze].uuid===selectedComponentUUID$1.value&&(editGlyphOnDragging.value.components[ze].ox=g+$e,editGlyphOnDragging.value.components[ze].oy=y+Ce)}else{addScript();for(let ze=0;ze<editGlyphOnDragging.value.components.length;ze++)editGlyphOnDragging.value.components[ze].uuid===selectedComponentUUID$1.value&&(editGlyphOnDragging.value.components[ze].ox=g+$e,editGlyphOnDragging.value.components[ze].oy=y+Ce)}else if(checkJoints.value){let ze=[];if(selectedSubComponent$1.value?ze=getJoints$1(selectedComponent$1?.value,selectedSubComponent$1.value.uuid):selectedComponent$1?.value&&(ze=getJoints$1(selectedComponent$1?.value,selectedComponent$1?.value.uuid)),ze=ze.filter(xn=>!xn.name.includes("_ref")),!Ie)return;const Ue=10;let Pt=!1;const hn=getCoord(Ne.offsetX),Dt=getCoord(Ne.offsetY);for(let xn=0;xn<ze.length;xn++){const{x:jt,y:Vn}=ze[xn];distance$1(jt,Vn,hn,Dt)<=Ue&&(movingJoint.value=ze[xn],Pt=!0)}!Pt&&(movingJoint.value=null)}},_e=Ne=>{let $e=null;selectedSubComponentOnDragging.value?$e=selectedSubComponentOnDragging.value.value:selectedComponentOnDragging?.value&&($e=selectedComponentOnDragging?.value?.value);const Ce=getCoord(Ne.offsetX)-L,Ie=getCoord(Ne.offsetY)-z;$e._o?.onSkeletonDragEnd&&$&&!re&&$e._o.onSkeletonDragEnd({draggingJoint:draggingJoint.value,deltaX:Ce,deltaY:Ie}),window.removeEventListener("mouseup",_e),setEditing(!1),V&&addScript(oe),$=!1,V=!1,j=-1,ae=-1,L=0,z=0,putAtCoord.value=null,draggingJoint.value=null,re=!1,editGlyph.value.glyph_script=clone(editGlyphOnDragging.value.glyph_script),editGlyph.value.components=clone(editGlyphOnDragging.value.components),editGlyphOnDragging.value=null,emitter.emit("renderPreviewCanvasByUUIDOnEditing",editGlyph.value.uuid)};return e.addEventListener("mousedown",de),e.addEventListener("mousemove",he),()=>{e.removeEventListener("mousedown",de),e.removeEventListener("mousemove",he),editGlyphOnDragging.value=null,re=!1,setEditing(!1)}},renderGlyphSelector=(e,n=!1)=>{let r=null,g=null;if(editGlyphOnDragging.value&&selectedSubComponentOnDragging.value?(r=selectedSubComponentOnDragging.value.value,g=selectedSubComponentOnDragging.value):editGlyphOnDragging.value&&selectedComponentOnDragging?.value?(r=selectedComponentOnDragging?.value?.value,g=selectedComponentOnDragging.value):!editGlyphOnDragging.value&&selectedSubComponent$1.value?(r=selectedSubComponent$1.value.value,g=selectedSubComponent$1.value):!editGlyphOnDragging.value&&selectedComponent$1?.value&&(r=selectedComponent$1?.value?.value,g=selectedComponent$1.value),!r)return;getOrigin();let y=getJoints$1(g,g.uuid);const k=L=>{for(let z=0;z<y.length;z++)if(y[z].name===L)return y[z];return{x:0,y:0}};getBound$1(y);const $=5,V=e.getContext("2d");if(movingJoint.value&&checkJoints.value){const{x:z,y:j}=k(movingJoint.value.name),ae=mapCanvasX(z),oe=mapCanvasY(j);V.fillStyle="red",V.fillRect(ae-10,oe-10,2*10,2*10)}if(draggingJoint.value&&checkJoints.value){const{x:L,y:z}=k(draggingJoint.value.name),j=10,ae=mapCanvasX(L),oe=mapCanvasY(z);V.fillStyle="red",V.fillRect(ae-j,oe-j,2*j,2*j)}if(putAtCoord.value&&putAtCoord.value.id){const{x:L,y:z}=putAtCoord.value,j=mapCanvasX(L),ae=mapCanvasY(z);V.fillStyle="red",V.fillRect(j-$,ae-$,2*$,2*$)}},getOrigin=()=>{if(selectedSubComponentOnDragging.value){let{ox:e,oy:n}=selectedComponentOnDragging.value,r=selectedComponentOnDragging.value;for(let g=1;g<editGlyphOnDragging.value.selectedComponentsTree.length;g++){const y=editGlyphOnDragging.value.selectedComponentsTree[g],k=selectedItemByUUID(r.value.components,y);r=k,e+=k.ox,n+=k.oy}return{ox:e,oy:n}}else if(selectedSubComponent$1.value){let{ox:e,oy:n}=selectedComponent$1.value,r=selectedComponent$1.value;for(let g=1;g<editGlyph.value.selectedComponentsTree.length;g++){const y=editGlyph.value.selectedComponentsTree[g],k=selectedItemByUUID(r.value.components,y);r=k,e+=k.ox,n+=k.oy}return{ox:e,oy:n}}return{ox:editGlyphOnDragging.value?selectedComponentOnDragging.value.ox:selectedComponent$1.value.ox,oy:editGlyphOnDragging.value?selectedComponentOnDragging.value.oy:selectedComponent$1.value.oy}},getOrigin2=()=>{if(selectedSubComponentOnDragging.value){let{ox:e,oy:n}=selectedComponentOnDragging.value,r=selectedComponentOnDragging.value;for(let g=1;g<editGlyphOnDragging.value.selectedComponentsTree.length-1;g++){const y=editGlyphOnDragging.value.selectedComponentsTree[g],k=selectedItemByUUID(r.value.components,y);r=k,e+=k.ox,n+=k.oy}return{ox:e,oy:n}}else if(selectedSubComponent$1.value){let{ox:e,oy:n}=selectedComponent$1.value,r=selectedComponent$1.value;for(let g=1;g<editGlyph.value.selectedComponentsTree.length-1;g++){const y=editGlyph.value.selectedComponentsTree[g],k=selectedItemByUUID(r.value.components,y);r=k,e+=k.ox,n+=k.oy}return{ox:e,oy:n}}return{ox:editGlyphOnDragging.value?selectedComponentOnDragging.value.ox:selectedComponent$1.value.ox,oy:editGlyphOnDragging.value?selectedComponentOnDragging.value.oy:selectedComponent$1.value.oy}},getBound=e=>{let n=1/0,r=1/0,g=-1/0,y=-1/0;return e.map(k=>{const{x:$,y:V}=k;$<n&&(n=$),$>g&&(g=$),V<r&&(r=V),V>y&&(y=V)}),{x:n,y:r,w:g-n,h:y-r}},distance=(e,n,r,g)=>Math.sqrt((e-r)*(e-r)+(n-g)*(n-g)),getJoints=()=>editGlyphOnDragging$1.value?editGlyphOnDragging$1.value._o?.getJoints().map(n=>{const{x:r,y:g}=n.getCoords();return{name:n.name,x:r,y:g}}):editGlyph.value._o?.getJoints().map(n=>{const{x:r,y:g}=n.getCoords();return{name:n.name,x:r,y:g}}),initSkeletonDragger=e=>{let n=!1,r=-1,g=-1,y=-1,k=-1;const $=j=>{editGlyphOnDragging$1.value=clone(editGlyph.value);let ae=getJoints(),oe=editGlyphOnDragging$1.value;if(!oe||!oe._o)return;y=getCoord(j.offsetX),k=getCoord(j.offsetY);const re=20;for(let ue=0;ue<ae.length;ue++){const{x:le,y:de}=ae[ue];distance(le,de,y,k)<=re&&(draggingJoint$1.value=ae[ue],oe._o.onSkeletonDragStart&&oe._o.onSkeletonDragStart({draggingJoint:draggingJoint$1.value,deltaX:0,deltaY:0}))}setEditing$1(!0),n=!0,r=getCoord(j.offsetX),g=getCoord(j.offsetY),window.addEventListener("mouseup",L)},V=j=>{const ae=getCoord(j.offsetX)-r,oe=getCoord(j.offsetY)-g;let re=editGlyphOnDragging$1.value;if(n)draggingJoint$1.value&&re._o?.onSkeletonDrag&&(re._o.onSkeletonDrag({draggingJoint:draggingJoint$1.value,deltaX:ae,deltaY:oe}),emitter.emit("renderGlyph"));else{let ue=getJoints();const le=10;let de=!1;const he=getCoord(j.offsetX),_e=getCoord(j.offsetY);for(let xe=0;xe<ue.length;xe++){const{x:Ne,y:$e}=ue[xe];distance(Ne,$e,he,_e)<=le&&(movingJoint$1.value=ue[xe],de=!0)}!de&&(movingJoint$1.value=null)}},L=j=>{let ae=editGlyphOnDragging$1.value;const oe=getCoord(j.offsetX)-r,re=getCoord(j.offsetY)-g;ae._o?.onSkeletonDragEnd&&n&&ae._o.onSkeletonDragEnd({draggingJoint:draggingJoint$1.value,deltaX:oe,deltaY:re}),window.removeEventListener("mouseup",L),setEditing$1(!1),n=!1,y=-1,k=-1,r=0,g=0,putAtCoord$1.value=null,draggingJoint$1.value=null,editGlyphOnDragging$1.value=null};return e.addEventListener("mousedown",$),e.addEventListener("mousemove",V),()=>{e.removeEventListener("mousedown",$),e.removeEventListener("mousemove",V),editGlyphOnDragging$1.value=null,setEditing$1(!1)}},renderSkeletonSelector=(e,n=!1)=>{let r=getJoints();const g=$=>{for(let V=0;V<r.length;V++)if(r[V].name===$)return r[V];return{x:0,y:0}};getBound(r);const y=5,k=e.getContext("2d");if(movingJoint$1.value){const{x:V,y:L}=g(movingJoint$1.value.name),z=mapCanvasX(V),j=mapCanvasY(L);k.fillStyle="red",k.fillRect(z-10,j-10,2*10,2*10)}if(draggingJoint$1.value){const{x:$,y:V}=g(draggingJoint$1.value.name),L=10,z=mapCanvasX($),j=mapCanvasY(V);k.fillStyle="red",k.fillRect(z-L,j-L,2*L,2*L)}if(putAtCoord$1.value&&putAtCoord$1.value.id){const{x:$,y:V}=putAtCoord$1.value,L=mapCanvasX($),z=mapCanvasY(V);k.fillStyle="red",k.fillRect(L-y,z-y,2*y,2*y)}},_hoisted_1$H={class:"edit-panel-wrapper"},_hoisted_2$F={class:"canvas-wrapper"},_hoisted_3$q=["width","height"],_hoisted_4$l=["width","height"],width$2=1e3,height=1e3,_sfc_main$I=defineComponent({__name:"GlyphEditPanel",setup(e){const n=ref(!1);let r=null,g=null,y=null;const k=ref(null),$=ref(null);onMounted(async()=>{document.addEventListener("keydown",V),tempScript(editGlyph.value),editStatus.value=Status.Glyph,executeScript(editGlyph.value);const re=k.value;re.style.width=`${500*editGlyph.value.view.zoom/100}px`,re.style.height=`${500*editGlyph.value.view.zoom/100}px`,grid.precision=20,setCanvas(re),checkJoints.value=!0,checkRefLines.value=!0,n.value=!0,z(),oe(),emitter.on("renderGlyph",()=>{componentsToContours(orderedListWithItemsForCurrentGlyph.value,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!1,!1,!0),oe(),L()}),emitter.on("renderGlyph_forceUpdate",()=>{const ue=editGlyph.value._o?editGlyph.value._o:new CustomGlyph(editGlyph.value);renderGlyph(ue,canvas.value,!0,!1,!1,!0)}),emitter.on("updateGlyphView",()=>{const ue=canvas.value;ue.style.width=`${500*editGlyph.value.view.zoom/100}px`,ue.style.height=`${500*editGlyph.value.view.zoom/100}px`}),await nextTick(),selectedComponentUUID$1.value&&selectedComponent$1.value.type==="glyph"&&setGlyphDraggerTool("glyphDragger")});const V=re=>{const ue=navigator.userAgent.includes("Mac");(ue&&re.metaKey&&re.key==="z"||!ue&&re.ctrlKey&&re.key==="z")&&(re.shiftKey?redo$2():undo$2(),re.preventDefault())};onUnmounted(()=>{scripts_map.value={},emitter.off("renderGlyph"),emitter.off("renderGlyph_forceUpdate"),emitter.off("updateGlyphView"),document.removeEventListener("keydown",V),clearState(),editing$2.value=!1,r&&r(),g&&g(),y&&y(),setGlyphDraggerTool(""),setTool(""),updateGlyphListFromEditFile()});const L=()=>{editGlyphOnDragging.value?(checkJoints.value&&(selectedSubComponentOnDragging.value?renderJoints(selectedSubComponentOnDragging.value,canvas.value):SubComponentsRootOnDragging.value?renderJoints(SubComponentsRootOnDragging.value,canvas.value):selectedComponentOnDragging.value&&renderJoints(selectedComponentOnDragging.value,canvas.value)),checkRefLines.value&&(selectedSubComponentOnDragging.value?renderRefLines(selectedSubComponentOnDragging.value,canvas.value):SubComponentsRootOnDragging.value?renderRefLines(SubComponentsRootOnDragging.value,canvas.value):selectedComponentOnDragging.value&&renderRefLines(selectedComponentOnDragging.value,canvas.value))):((checkJoints.value||onSkeletonBind.value)&&(selectedSubComponent$1.value?renderJoints(selectedSubComponent$1.value,canvas.value):SubComponentsRoot$1.value?renderJoints(SubComponentsRoot$1.value,canvas.value):selectedComponent$1.value&&selectedComponent$1.value!=="multi"?renderJoints(selectedComponent$1.value,canvas.value):editGlyph.value._o&&editGlyph.value._o.renderJoints(canvas.value,{type:"all"})),(checkRefLines.value||onSkeletonBind.value)&&(selectedSubComponent$1.value?renderRefLines(selectedSubComponent$1.value,canvas.value):SubComponentsRoot$1.value?renderRefLines(SubComponentsRoot$1.value,canvas.value):selectedComponent$1.value&&selectedComponent$1.value!=="multi"?renderRefLines(selectedComponent$1.value,canvas.value):editGlyph.value._o&&editGlyph.value._o.renderRefLines(canvas.value,{type:"all"}))),draggingJoint.value&&renderGlyphSelector(canvas.value)},z=()=>{switch(r&&r(),tool.value){case"pen":r=initPen(canvas.value,!0);break;case"select":r=initSelect(canvas.value,10,!0);break;case"ellipse":r=initEllipse(canvas.value,!0);break;case"rectangle":r=initRectangle(canvas.value,!0);break;case"polygon":r=initPolygon(canvas.value,!0);break;case"translateMover":r=initTranslateMover(canvas.value,!0);break;case"coordsViewer":r=initCoordsViewer(canvas.value,!0);break}},j=()=>{y&&y(),glyphDraggerTool.value==="glyphDragger"&&(y=initGlyphDragger(canvas.value))};watch(tool,(re,ue)=>{if(n){switch(oe(),tool.value){case"select":selectedComponentUUID$1.value&&renderSelectEditor(canvas.value,10,!0);break;case"params":setSelectionForCurrentGlyph("");break}L(),z()}}),watch(glyphDraggerTool,()=>{n&&(oe(),glyphDraggerTool.value==="glyphDragger"&&selectedComponentUUID$1.value&&(y=initGlyphDragger(canvas.value),renderGlyphSelector(canvas.value)),L(),j())});let ae=null;watch([onSkeletonDragging],()=>{onSkeletonDragging.value?(ae=initSkeletonDragger(canvas.value),renderSkeletonSelector(canvas.value)):ae&&ae()}),watch([editing$2,()=>editGlyph.value.selectedComponentsTree],()=>{selectedSubComponent$1.value&&g?(g(),editing$2.value=!1):editing$2.value&&(g=initLayoutResizer(canvas.value),renderLayoutEditor(canvas.value))},{deep:!0}),watch([()=>selectedComponent$1.value?.value?.layout,()=>SubComponentsRoot$1.value?.value?.layout],()=>{oe(),editing$2.value&&(selectedComponent$1.value||SubComponentsRoot$1.value)&&renderLayoutEditor(canvas.value),tool.value==="select"&&renderSelectEditor(canvas.value,10,!0),tool.value==="pen"&&renderPenEditor(canvas.value),L(),emitter.emit("renderGlyphPreviewCanvasByUUIDOnEditing",editGlyph.value.uuid)},{deep:!0}),watch([background$1,grid,fontRenderStyle],()=>{oe()}),watch([editGlyph],()=>{if(!editGlyph.value||!n)return;const re=canvas.value;re.width=mapCanvasWidth(1e3),re.height=mapCanvasHeight(1e3),re.style.width=`${500*editGlyph.value.view.zoom/100}px`,re.style.height=`${500*editGlyph.value.view.zoom/100}px`,setCanvas(re),oe(),L(),tool.value==="select"&&renderSelectEditor(canvas.value,10,!0),tool.value==="pen"&&renderPenEditor(canvas.value),emitter.emit("renderGlyphPreviewCanvasByUUIDOnEditing",editGlyph.value.uuid)}),watch([points$1,editing$8],()=>{oe(),tool.value==="select"&&renderSelectEditor(canvas.value,10,!0),tool.value==="pen"&&renderPenEditor(canvas.value),editing$8.value&&renderPenEditor(canvas.value)}),watch([points,editing$7],()=>{oe(),tool.value==="select"&&renderSelectEditor(canvas.value,10,!0),tool.value==="pen"&&renderPenEditor(canvas.value),editing$7.value&&renderPolygonEditor(points,canvas.value)}),watch([ellipseX,ellipseY,radiusX,radiusY,editing$5],()=>{oe(),tool.value==="select"&&renderSelectEditor(canvas.value,10,!0),tool.value==="pen"&&renderPenEditor(canvas.value),editing$5.value&&renderEllipseEditor(canvas.value)}),watch([rectX,rectY,rectWidth,rectHeight,editing$6],()=>{oe(),tool.value==="select"&&renderSelectEditor(canvas.value,10,!0),tool.value==="pen"&&renderPenEditor(canvas.value),editing$6.value&&renderRectangleEditor(canvas.value)}),watch([editing,draggingJoint,putAtCoord,movingJoint],()=>{oe(),L(),renderGlyphSelector(canvas.value),editing.value}),watch([editing$1,draggingJoint$1,putAtCoord$1,movingJoint$1],()=>{oe(),L(),renderSkeletonSelector(canvas.value),editing$1.value}),watch([selectedComponentUUID$1,componentsForCurrentGlyph,selectedComponent$1],()=>{editing$2.value=!1,oe(),selectedComponentUUID$1.value&&(tool.value==="select"&&renderSelectEditor(canvas.value,10,!0),tool.value==="pen"&&renderPenEditor(canvas.value),L(),emitter.emit("renderGlyphPreviewCanvasByUUIDOnEditing",editGlyph.value.uuid))}),watch([orderedListWithItemsForCurrentGlyph],()=>{oe(),L(),tool.value==="select"&&renderSelectEditor(canvas.value,10,!0),tool.value==="pen"&&renderPenEditor(canvas.value),emitter.emit("renderGlyphPreviewCanvasByUUIDOnEditing",editGlyph.value.uuid)}),watch([onPenEditMode],()=>{r&&r(),onPenEditMode&&tool.value==="select"&&z()}),watch([selectAnchor,selectPenPoint,hoverPenPoint],()=>{tool.value==="select"&&(oe(),renderSelectEditor(canvas.value,10,!0))});const oe=()=>{if(editGlyphOnDragging.value){const re=editGlyphOnDragging.value._o?editGlyphOnDragging.value._o:new CustomGlyph(editGlyphOnDragging.value);renderGlyph(re,canvas.value,!0,!1,!1)}else{const re=editGlyph.value._o?editGlyph.value._o:new CustomGlyph(editGlyph.value);renderGlyph(re,canvas.value,!0,!1,!1)}};return(re,ue)=>(openBlock(),createElementBlock("section",_hoisted_1$H,[createBaseVNode("main",_hoisted_2$F,[createBaseVNode("div",{class:"edit-canvas-wrapper",style:normalizeStyle({display:unref(editPanelDisplay)==="edit"?"flex":"none"})},[createBaseVNode("canvas",{ref_key:"editCanvas",ref:k,class:normalizeClass({"edit-canvas-panel":!0,"pen-on-edit":unref(tool)==="pen","rectangle-on-edit":unref(tool)==="rectangle","ellipse-on-edit":unref(tool)==="ellipse","polygon-on-edit":unref(tool)==="polygon","rotate-left-top":unref(selectControl$2)==="rotate-left-top","rotate-right-top":unref(selectControl$2)==="rotate-right-top","rotate-left-bottom":unref(selectControl$2)==="rotate-left-bottom","rotate-right-bottom":unref(selectControl$2)==="rotate-right-bottom","scale-left-top":unref(selectControl$2)==="scale-left-top"||unref(selectControl)==="scale-left-top","scale-right-top":unref(selectControl$2)==="scale-right-top"||unref(selectControl)==="scale-right-top","scale-left-bottom":unref(selectControl$2)==="scale-left-bottom"||unref(selectControl)==="scale-left-bottom","scale-right-bottom":unref(selectControl$2)==="scale-right-bottom"||unref(selectControl)==="scale-right-bottom","on-translate-move":unref(tool)==="translateMover"}),style:normalizeStyle({transform:`translate3d(${unref(editGlyph).view.translateX}px, ${unref(editGlyph).view.translateY}px, 0px)`}),width:unref(mapCanvasWidth)(width$2),height:unref(mapCanvasHeight)(height)},null,14,_hoisted_3$q)],4),createBaseVNode("div",{class:"preview-canvas-wrapper",style:normalizeStyle({display:unref(editPanelDisplay)==="preview"?"flex":"none"})},[createBaseVNode("canvas",{ref_key:"previewCanvas",ref:$,class:"preview-canvas-panel",width:unref(mapCanvasWidth)(width$2),height:unref(mapCanvasHeight)(height)},null,8,_hoisted_4$l)],4)])]))}}),GlyphEditPanel=_export_sfc(_sfc_main$I,[["__scopeId","data-v-8c9d283d"]]),_hoisted_1$G={class:"font-edit-pic-wrapper"},_hoisted_2$E={class:"top-bar"},_hoisted_3$p={class:"main"},_hoisted_4$k={class:"canvas-list-outer-wrapper"},_hoisted_5$e={class:"canvas-wrapper"},_hoisted_6$c=["width","height"],_hoisted_7$c={class:"canvas-wrapper"},_hoisted_8$c=["width","height"],_hoisted_9$c={class:"canvas-wrapper"},_hoisted_10$c=["width","height"],_hoisted_11$c={class:"canvas-wrapper"},_hoisted_12$c=["width","height"],_hoisted_13$a={class:"canvas-wrapper"},_hoisted_14$9=["width","height"],_hoisted_15$7={class:"canvas-wrapper"},_hoisted_16$7=["width","height"],_sfc_main$H=defineComponent({__name:"ThumbnailEditPanel",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=ref(null),k=ref(null),$=ref(null),V=ref(null),L=ref(null),z=ref(null),j=["thumbnail","bitmap","contours","curves","preview"],ae=()=>{const Dt=document.querySelector(".canvas-list-outer-wrapper"),xn=Dt.offsetWidth,jt=Dt.offsetHeight;listWidth.value=xn;const Vn=selectedFile.value.width,Rn=selectedFile.value.height;document.querySelectorAll(".canvas-wrapper").forEach(da=>{da.style.width=`${xn/2}px`});const Ln=editCharacterPic.value.width,Sn=editCharacterPic.value.height;let An=xn/2>Vn?Vn:xn/2,In=An*Rn/Vn;In>jt&&(In=jt,An=In*Vn/Rn);let Mn=xn/2>Vn?Vn:xn/2,ra=Mn*Sn/Ln;ra>jt&&(ra=jt,Mn=ra*Ln/Sn),y.value.style.width=`${An}px`,y.value.style.height=`${In}px`,k.value.style.width=`${An}px`,k.value.style.height=`${In}px`,L.value.style.width=`${An}px`,L.value.style.height=`${In}px`,z.value.style.width=`${An}px`,z.value.style.height=`${In}px`,$.value.width=mapCanvasWidth(Ln),$.value.height=mapCanvasHeight(Sn),$.value.style.width=`${Mn}px`,$.value.style.height=`${ra}px`,$.value.height=mapCanvasHeight(Sn),V.value.width=mapCanvasWidth(Ln),V.value.height=mapCanvasHeight(Sn),V.value.style.width=`${Mn}px`,V.value.style.height=`${ra}px`},oe=()=>{if(step.value===1&&enableLocalBrush.value){let Dt="";g.value==="zh"?Dt="":g.value==="en"&&(Dt="In editing, try it later."),ElMessage(Dt);return}previewStatus.value=previewStatus.value<=0?j.length-1:previewStatus.value-1},re=()=>{if(step.value===1&&enableLocalBrush.value){let Dt="";g.value==="zh"?Dt="":g.value==="en"&&(Dt="In editing, try it later."),ElMessage(Dt);return}previewStatus.value=previewStatus.value>=j.length-1?0:previewStatus.value+1},ue=()=>{const Dt=$.value.getContext("2d"),{img:xn,width:jt,height:Vn}=editCharacterPic.value,Rn=xn;Dt.drawImage(Rn,0,0,Rn.width,Rn.height,0,0,mapCanvasWidth(jt),mapCanvasWidth(Vn))},le=()=>{const Dt=V.value.getContext("2d"),{data:xn,width:jt,height:Vn}=bitmap.value;for(let Rn=0;Rn<jt;Rn++)for(let Tn=0;Tn<Vn;Tn++){const Ln=(Tn*jt+Rn)*4,Sn=`rgba(${xn[Ln]}, ${xn[Ln+1]}, ${xn[Ln]+2}, ${xn[Ln+3]})`;Dt.fillStyle=Sn,Dt.fillRect(mapCanvasX(Rn),mapCanvasY(Tn),mapCanvasWidth(1),mapCanvasHeight(1))}},de=()=>{const Dt=contoursComponents.value.map(xn=>{const jt=clone(xn);return jt.value.fillColor="rgba(1, 1, 1, 0)",jt});clearCanvas(L.value),renderCanvas(Dt,L.value)},he=()=>{const Dt=curvesComponents.value.map(xn=>{const jt=clone(xn);return jt.value.fillColor="rgba(1, 1, 1, 0)",jt});clearCanvas(z.value),renderCanvas(Dt,z.value)},_e=()=>{clearCanvas(y.value),renderCanvas(curvesComponents.value,y.value),clearCanvas(k.value),renderCanvas(curvesComponents.value,k.value,{fill:!0,offset:{x:0,y:0},scale:1,forceUpdate:!1})},xe=()=>{_e(),ue(),le(),de(),he()},Ne=()=>{ue();const xn=$.value.getContext("2d");xn.strokeStyle="black",xn.strokeRect(mapCanvasX(localBrushX.value),mapCanvasY(localBrushY.value),mapCanvasWidth(localBrushSize.value),mapCanvasHeight(localBrushSize.value))};onMounted(()=>{emitter.on("toggleLocalBrushEdit",Dt=>{const xn=$.value;Dt?(document.addEventListener("mousemove",$e),xn.addEventListener("mousedown",ze),xe()):(document.removeEventListener("mousemove",$e),xn.removeEventListener("mousedown",ze),xe())}),ae(),window.addEventListener("resize",ae),xe()}),watch([editCharacterPic],()=>{ue()}),watch([bitmap],()=>{le()}),watch([contoursComponents],()=>{de()}),watch([curvesComponents],()=>{he(),_e()});const $e=Dt=>{const xn=$.value,jt=Number(xn.style.width.split("px")[0]),Vn=Number(xn.style.height.split("px")[0]),Rn=editCharacterPic.value.width,Tn=editCharacterPic.value.height;localBrushX.value=Math.round(Dt.offsetX*Rn/jt),localBrushY.value=Math.round(Dt.offsetY*Tn/Vn);const{thumbnailCanvas:Ln,thumbnailPixels:Sn,processPixels:An}=editCharacterPic.value,In=Ln.width,Mn=Ln.height,ra=toBlackWhiteBitMap(Sn,{r:localRThreshold.value,g:localGThreshold.value,b:localBThreshold.value},{x:localBrushX.value,y:localBrushY.value,size:localBrushSize.value,width:In,height:Mn}),da=clone(An);for(let ua=localBrushX.value;ua<localBrushX.value+localBrushSize.value;ua++)for(let aa=localBrushY.value;aa<localBrushY.value+localBrushSize.value;aa++){const Nn=(aa*In+ua)*4;da[Nn]=ra[Nn],da[Nn+1]=ra[Nn+1],da[Nn+2]=ra[Nn+2],da[Nn+3]=ra[Nn+3]}setTimeout(()=>{const ua=V.value.getContext("2d");for(let aa=0;aa<In;aa++)for(let Nn=0;Nn<Mn;Nn++){const En=(Nn*In+aa)*4,Zn=`rgba(${da[En]}, ${da[En+1]}, ${da[En]+2}, ${da[En+3]})`;ua.fillStyle=Zn,ua.fillRect(mapCanvasX(aa),mapCanvasY(Nn),mapCanvasWidth(1),mapCanvasHeight(1))}},10),Ne(),Ie&&ze()},Ce=()=>{Ie=!1,window.removeEventListener("mouseup",Ce)};let Ie=!1;const ze=()=>{Ie=!0;const{thumbnailCanvas:Dt,thumbnailPixels:xn,processPixels:jt}=editCharacterPic.value,Vn=Dt.width,Rn=Dt.height,Tn=toBlackWhiteBitMap(xn,{r:localRThreshold.value,g:localGThreshold.value,b:localBThreshold.value},{x:localBrushX.value,y:localBrushY.value,size:localBrushSize.value,width:Vn,height:Rn});for(let Ln=localBrushX.value;Ln<localBrushX.value+localBrushSize.value;Ln++)for(let Sn=localBrushY.value;Sn<localBrushY.value+localBrushSize.value;Sn++){const An=(Sn*Vn+Ln)*4;jt[An]=Tn[An],jt[An+1]=Tn[An+1],jt[An+2]=Tn[An+2],jt[An+3]=Tn[An+3]}setBitMap({data:jt,width:Vn,height:Rn}),window.addEventListener("mouseup",Ce)};onBeforeUnmount(()=>{window.removeEventListener("resize",ae),emitter.off("toggleLocalBrushEdit");const Dt=$.value;document.removeEventListener("mousemove",$e),Dt.removeEventListener("mousedown",ze)});const Ue=async()=>{const Dt=curvesComponents.value;prevEditStatus.value===Status.Edit?(addComponentsForCurrentCharacterFile(Dt),emitter.emit("renderPreviewCanvasByUUID",editCharacterFileUUID.value),Pt(),setEditStatus(Status.Edit),await nextTick(),resetEditPic()):prevEditStatus.value===Status.Glyph&&(addComponentsForCurrentGlyph(Dt),emitter.emit("renderGlyphPreviewCanvasByUUID",editGlyphUUID.value),Pt(),setEditStatus(Status.Glyph),await nextTick(),resetEditPic())},Pt=()=>{enableLocalBrush.value=!1,rThreshold.value=128,gThreshold.value=128,bThreshold.value=128,emitter.emit("resetEditFontPic",!0)},hn=()=>{resetEditPic(),setEditStatus(Status.Edit)};return(Dt,xn)=>{const jt=resolveComponent("el-button"),Vn=resolveComponent("el-button-group"),Rn=resolveComponent("el-icon");return openBlock(),createElementBlock("div",_hoisted_1$G,[createBaseVNode("header",_hoisted_2$E,[createVNode(Vn,{class:"btn-group"},{default:withCtx(()=>[createVNode(jt,{class:"btn delete-btn",onPointerdown:hn,size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.remove")),1)]),_:1}),createVNode(jt,{class:"btn reset-btn",onPointerdown:Pt,size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.reset")),1)]),_:1}),createVNode(jt,{type:"primary",class:"btn confitm-btn",onPointerdown:Ue,size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.confirm")),1)]),_:1})]),_:1})]),createBaseVNode("main",_hoisted_3$p,[createBaseVNode("div",{class:"left-mover",onPointerdown:oe},[createVNode(Rn,null,{default:withCtx(()=>[createVNode(unref(arrow_left_bold_default))]),_:1})],32),createBaseVNode("div",_hoisted_4$k,[createBaseVNode("div",{class:"canvas-list-wrapper",style:normalizeStyle({left:`${-unref(previewStatus)*unref(listWidth)/2}px`})},[createBaseVNode("div",_hoisted_5$e,[createBaseVNode("canvas",{class:"preview canvas",ref_key:"previewCanvas1",ref:y,width:unref(mapCanvasWidth)(unref(selectedFile).width),height:unref(mapCanvasHeight)(unref(selectedFile).height)},null,8,_hoisted_6$c)]),createBaseVNode("div",_hoisted_7$c,[createBaseVNode("canvas",{class:"thumbnail canvas",ref_key:"thumbnailCanvas",ref:$,width:unref(mapCanvasWidth)(unref(selectedFile).width),height:unref(mapCanvasHeight)(unref(selectedFile).height)},null,8,_hoisted_8$c)]),createBaseVNode("div",_hoisted_9$c,[createBaseVNode("canvas",{class:"bitmap canvas",ref_key:"bitmapCanvas",ref:V,width:unref(mapCanvasWidth)(unref(selectedFile).width),height:unref(mapCanvasHeight)(unref(selectedFile).height)},null,8,_hoisted_10$c)]),createBaseVNode("div",_hoisted_11$c,[createBaseVNode("canvas",{class:"contours canvas",ref_key:"contoursCanvas",ref:L,width:unref(mapCanvasWidth)(unref(selectedFile).width),height:unref(mapCanvasHeight)(unref(selectedFile).height)},null,8,_hoisted_12$c)]),createBaseVNode("div",_hoisted_13$a,[createBaseVNode("canvas",{class:"curves canvas",ref_key:"curvesCanvas",ref:z,width:unref(mapCanvasWidth)(unref(selectedFile).width),height:unref(mapCanvasHeight)(unref(selectedFile).height)},null,8,_hoisted_14$9)]),createBaseVNode("div",_hoisted_15$7,[createBaseVNode("canvas",{class:"preview canvas",ref_key:"previewCanvas2",ref:k,width:unref(mapCanvasWidth)(unref(selectedFile).width),height:unref(mapCanvasHeight)(unref(selectedFile).height)},null,8,_hoisted_16$7)])],4)]),createBaseVNode("div",{class:"right-mover",onPointerdown:re},[createVNode(Rn,null,{default:withCtx(()=>[createVNode(unref(arrow_right_bold_default))]),_:1})],32)])])}}}),ThumbnailEditPanel=_export_sfc(_sfc_main$H,[["__scopeId","data-v-5bfa19b8"]]),_hoisted_1$F={class:"font-panel"},_hoisted_2$D={class:"font-panel-empty"},_hoisted_3$o={class:"float-part"},_hoisted_4$j={class:"list-switch"},_sfc_main$G=defineComponent({__name:"FontMainPanel",setup(e){const{t:n}=useI18n();return(r,g)=>(openBlock(),createElementBlock("main",_hoisted_1$F,[withDirectives(createBaseVNode("div",_hoisted_2$D,null,512),[[vShow,!unref(selectedFile)]]),withDirectives(createVNode(_sfc_main$Q,{class:"character-list"},null,512),[[vShow,unref(selectedFile)]]),withDirectives(createBaseVNode("div",_hoisted_3$o,[withDirectives(createVNode(_sfc_main$O,{class:"stroke-glyph-list"},null,512),[[vShow,unref(selectedFile)&&unref(editStatus)===unref(Status).StrokeGlyphList]]),withDirectives(createVNode(_sfc_main$N,{class:"radical-glyph-list"},null,512),[[vShow,unref(selectedFile)&&unref(editStatus)===unref(Status).RadicalGlyphList]]),withDirectives(createVNode(_sfc_main$M,{class:"comp-glyph-list"},null,512),[[vShow,unref(selectedFile)&&unref(editStatus)===unref(Status).CompGlyphList]]),withDirectives(createVNode(_sfc_main$P,{class:"glyph-list"},null,512),[[vShow,unref(selectedFile)&&unref(editStatus)===unref(Status).GlyphList]]),unref(selectedFile)&&unref(editStatus)===unref(Status).Edit?(openBlock(),createBlock(EditPanel,{key:0})):unref(selectedFile)&&unref(editStatus)===unref(Status).Glyph?(openBlock(),createBlock(GlyphEditPanel,{key:1})):unref(selectedFile)&&unref(editStatus)===unref(Status).Pic?(openBlock(),createBlock(ThumbnailEditPanel,{key:2})):createCommentVNode("",!0)],512),[[vShow,unref(editStatus)!==unref(Status).CharacterList&&unref(selectedFile)]]),withDirectives(createBaseVNode("div",_hoisted_4$j,[createBaseVNode("span",{class:normalizeClass(["character-list",{selected:unref(editStatus)===unref(Status).CharacterList}]),onPointerdown:g[0]||(g[0]=y=>editStatus.value=unref(Status).CharacterList)},toDisplayString$1(unref(n)("programming.character")),35),createBaseVNode("span",{class:normalizeClass(["stroke-glyph-list",{selected:unref(editStatus)===unref(Status).StrokeGlyphList}]),onPointerdown:g[1]||(g[1]=y=>editStatus.value=unref(Status).StrokeGlyphList)},toDisplayString$1(unref(n)("programming.stroke")),35),createBaseVNode("span",{class:normalizeClass(["radical-glyph-list",{selected:unref(editStatus)===unref(Status).RadicalGlyphList}]),onPointerdown:g[2]||(g[2]=y=>editStatus.value=unref(Status).RadicalGlyphList)},toDisplayString$1(unref(n)("programming.radical")),35),createBaseVNode("span",{class:normalizeClass(["comp-glyph-list",{selected:unref(editStatus)===unref(Status).CompGlyphList}]),onPointerdown:g[3]||(g[3]=y=>editStatus.value=unref(Status).CompGlyphList)},toDisplayString$1(unref(n)("programming.comp")),35),createBaseVNode("span",{class:normalizeClass(["glyph-list",{selected:unref(editStatus)===unref(Status).GlyphList}]),onPointerdown:g[4]||(g[4]=y=>editStatus.value=unref(Status).GlyphList)},toDisplayString$1(unref(n)("programming.glyph_comp")),35)],512),[[vShow,unref(editStatus)===unref(Status).StrokeGlyphList||unref(editStatus)===unref(Status).CompGlyphList||unref(editStatus)===unref(Status).RadicalGlyphList||unref(editStatus)===unref(Status).GlyphList||unref(editStatus)===unref(Status).CharacterList]])]))}}),FontPanel=_export_sfc(_sfc_main$G,[["__scopeId","data-v-dc007d71"]]),_hoisted_1$E={class:"form-wrapper"},_hoisted_2$C={class:"dialog-footer"},_sfc_main$F=defineComponent({__name:"AddTextDialog",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=ref(""),k=()=>{setAddTextDialogVisible(!1)},$=()=>{if(!y.value){let z="";g.value==="zh"?z="":g.value==="en"&&(z="Please input character's name."),ElMessage(z);return}if(y.value&&y.value.length>1){let z="";g.value==="zh"?z="":g.value==="en"&&(z="Please input a single character."),ElMessage(z);return}const L=y.value.split("").filter(z=>z!==".notdef");L.length!==y.value.split("").length&&ElMessage({message:".notdef",type:"warning"}),L.map(z=>{const j={uuid:genUUID(),text:z,unicode:toUnicode(z),components:[]},ae=genUUID(),oe={uuid:ae,type:"text",character:j,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},info:{gridSettings:{dx:0,dy:0,centerSquareSize:selectedFile.value.width/3,size:selectedFile.value.width,default:!0},useSkeletonGrid:!1,layout:"",layoutTree:[]},script:`function script_${ae.replaceAll("-","_")} (character, constants, FP) {
	//Todo something
}`};addCharacterForCurrentFile(oe),addCharacterTemplate(generateCharacterTemplate(oe))}),y.value="",setAddTextDialogVisible(!1)},V=L=>{L.preventDefault(),$()};return(L,z)=>{const j=resolveComponent("el-input"),ae=resolveComponent("el-form-item"),oe=resolveComponent("el-button"),re=resolveComponent("el-dialog");return openBlock(),createBlock(re,{modelValue:unref(addTextDialogVisible),"onUpdate:modelValue":z[1]||(z[1]=ue=>isRef(addTextDialogVisible)?addTextDialogVisible.value=ue:null),title:unref(n)("dialogs.addTextDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$C,[createVNode(oe,{onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.addTextDialog.cancel")),1)]),_:1}),createVNode(oe,{type:"primary",onPointerdown:$},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.addTextDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$E,[createVNode(ae,{label:unref(n)("dialogs.addTextDialog.title")},{default:withCtx(()=>[createVNode(j,{modelValue:y.value,"onUpdate:modelValue":z[0]||(z[0]=ue=>y.value=ue),onKeyup:withKeys(V,["enter"])},null,8,["modelValue","onKeyup"])]),_:1},8,["label"])])]),_:1},8,["modelValue","title"])}}}),_hoisted_1$D={class:"form-wrapper"},_hoisted_2$B={class:"dialog-footer"},_sfc_main$E=defineComponent({__name:"editGlyphDialog",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=ref(""),k=()=>{setEditGlyphDialogVisible(!1)},$=()=>{if(!y.value){let L="";g.value==="zh"?L="":g.value==="en"&&(L="Please input glyph's name."),ElMessage(L);return}modifyGlyph(editedGlyphUUID.value,{name:y.value}),emitter.emit("updateGlyphInfoPreviewCanvasByUUID",editedGlyphUUID.value),y.value="",setEditGlyphDialogVisible(!1)},V=L=>{L.preventDefault(),$()};return(L,z)=>{const j=resolveComponent("el-input"),ae=resolveComponent("el-form-item"),oe=resolveComponent("el-button"),re=resolveComponent("el-dialog");return openBlock(),createBlock(re,{modelValue:unref(editGlyphDialogVisible),"onUpdate:modelValue":z[1]||(z[1]=ue=>isRef(editGlyphDialogVisible)?editGlyphDialogVisible.value=ue:null),title:unref(n)("dialogs.editGlyphDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$B,[createVNode(oe,{onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.editGlyphDialog.cancel")),1)]),_:1}),createVNode(oe,{type:"primary",onPointerdown:$},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.copyGlyphDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$D,[createVNode(ae,{label:unref(n)("dialogs.editGlyphDialog.glyphName")},{default:withCtx(()=>[createVNode(j,{modelValue:y.value,"onUpdate:modelValue":z[0]||(z[0]=ue=>y.value=ue),onKeyup:withKeys(V,["enter"])},null,8,["modelValue","onKeyup"])]),_:1},8,["label"])])]),_:1},8,["modelValue","title"])}}}),_hoisted_1$C={class:"form-wrapper"},_hoisted_2$A={class:"dialog-footer"},_sfc_main$D=defineComponent({__name:"copyGlyphDialog",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=ref(""),k=()=>{setCopyGlyphDialogVisible(!1)},$=()=>{if(!y.value){let ae="";g.value==="zh"?ae="":g.value==="en"&&(ae="Please input glyph's name."),ElMessage(ae);return}let L=clone(getGlyphByUUID(copiedGlyphUUID.value));const z=L.uuid,j=genUUID();L.uuid=j,L.name=y,L.script=L.script.replaceAll(z.replaceAll("-","_"),j.replaceAll("-","_")),addGlyph(L,editStatus.value),addGlyphTemplate(L,editStatus.value),emitter.emit("renderPreviewCanvasByUUID",L.uuid),y.value="",setCopyGlyphDialogVisible(!1)},V=L=>{L.preventDefault(),$()};return(L,z)=>{const j=resolveComponent("el-input"),ae=resolveComponent("el-form-item"),oe=resolveComponent("el-button"),re=resolveComponent("el-dialog");return openBlock(),createBlock(re,{modelValue:unref(copyGlyphDialogVisible),"onUpdate:modelValue":z[1]||(z[1]=ue=>isRef(copyGlyphDialogVisible)?copyGlyphDialogVisible.value=ue:null),title:unref(n)("dialogs.copyGlyphDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$A,[createVNode(oe,{onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.copyGlyphDialog.cancel")),1)]),_:1}),createVNode(oe,{type:"primary",onPointerdown:$},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.copyGlyphDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$C,[createVNode(ae,{label:unref(n)("dialogs.copyGlyphDialog.glyphName")},{default:withCtx(()=>[createVNode(j,{modelValue:y.value,"onUpdate:modelValue":z[0]||(z[0]=ue=>y.value=ue),onKeyup:withKeys(V,["enter"])},null,8,["modelValue","onKeyup"])]),_:1},8,["label"])])]),_:1},8,["modelValue","title"])}}}),_hoisted_1$B={class:"form-wrapper"},_hoisted_2$z={class:"dialog-footer"},_sfc_main$C=defineComponent({__name:"editCharacterDialog",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=ref(""),k=()=>{setEditCharacterDialogVisible(!1)},$=()=>{if(!y.value){let z="";g.value==="zh"?z="":g.value==="en"&&(z="Please input character's name."),ElMessage(z);return}if(y.value&&y.value.length>1){let z="";g.value==="zh"?z="":g.value==="en"&&(z="Please input a single character."),ElMessage(z);return}if(y.value===".notdef"){ElMessage({message:".notdef",type:"warning"});return}const L={uuid:genUUID(),text:y.value,unicode:toUnicode(y.value),components:[]};modifyCharacterFile(editedCharacterUUID.value,{character:L}),emitter.emit("updateCharacterInfoPreviewCanvasByUUID",editedCharacterUUID.value),y.value="",setEditCharacterDialogVisible(!1)},V=L=>{L.preventDefault(),$()};return(L,z)=>{const j=resolveComponent("el-input"),ae=resolveComponent("el-form-item"),oe=resolveComponent("el-button"),re=resolveComponent("el-dialog");return openBlock(),createBlock(re,{modelValue:unref(editCharacterDialogVisible),"onUpdate:modelValue":z[1]||(z[1]=ue=>isRef(editCharacterDialogVisible)?editCharacterDialogVisible.value=ue:null),title:unref(n)("dialogs.editCharacterDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$z,[createVNode(oe,{onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.editCharacterDialog.cancel")),1)]),_:1}),createVNode(oe,{type:"primary",onPointerdown:$},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.editCharacterDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$B,[createVNode(ae,{label:unref(n)("dialogs.editCharacterDialog.title")},{default:withCtx(()=>[createVNode(j,{modelValue:y.value,"onUpdate:modelValue":z[0]||(z[0]=ue=>y.value=ue),onKeyup:withKeys(V,["enter"])},null,8,["modelValue","onKeyup"])]),_:1},8,["label"])])]),_:1},8,["modelValue","title"])}}}),_hoisted_1$A={class:"form-wrapper"},_hoisted_2$y={class:"dialog-footer"},_sfc_main$B=defineComponent({__name:"copyCharacterDialog",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=ref(""),k=()=>{setCopyCharacterDialogVisible(!1)},$=()=>{if(!y.value){let z="";g.value==="zh"?z="":g.value==="en"&&(z="Please input character's name."),ElMessage(z);return}if(y.value&&y.value.length>1){let z="";g.value==="zh"?z="":g.value==="en"&&(z="Please input a single character."),ElMessage(z);return}let L=null;for(let z=0;z<selectedFile.value.characterList.length;z++)if(selectedFile.value.characterList[z].uuid===copiedCharacterUUID.value){L=clone(selectedFile.value.characterList[z]);const j=L.uuid,ae=genUUID();L.uuid=ae,L.script=L.script.replaceAll(j.replaceAll("-","_"),ae.replaceAll("-","_"));const oe={uuid:genUUID(),text:y.value,unicode:toUnicode(y.value),components:[]};L.character=oe;break}addCharacterForCurrentFile(L),addCharacterTemplate(generateCharacterTemplate(L)),emitter.emit("renderPreviewCanvasByUUID",L.uuid),y.value="",setCopyCharacterDialogVisible(!1)},V=L=>{L.preventDefault(),$()};return(L,z)=>{const j=resolveComponent("el-input"),ae=resolveComponent("el-form-item"),oe=resolveComponent("el-button"),re=resolveComponent("el-dialog");return openBlock(),createBlock(re,{modelValue:unref(copyCharacterDialogVisible),"onUpdate:modelValue":z[1]||(z[1]=ue=>isRef(copyCharacterDialogVisible)?copyCharacterDialogVisible.value=ue:null),title:unref(n)("dialogs.copyCharacterDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$y,[createVNode(oe,{onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.copyCharacterDialog.cancel")),1)]),_:1}),createVNode(oe,{type:"primary",onPointerdown:$},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.copyCharacterDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$A,[createVNode(ae,{label:unref(n)("dialogs.copyCharacterDialog.title")},{default:withCtx(()=>[createVNode(j,{modelValue:y.value,"onUpdate:modelValue":z[0]||(z[0]=ue=>y.value=ue),onKeyup:withKeys(V,["enter"])},null,8,["modelValue","onKeyup"])]),_:1},8,["label"])])]),_:1},8,["modelValue","title"])}}}),_hoisted_1$z={class:"form-wrapper"},_hoisted_2$x={class:"dialog-footer"},_sfc_main$A=defineComponent({__name:"AddGlyphDialog",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=ref(""),k=()=>{setAddGlyphDialogVisible(!1)},$=()=>{if(!y.value){let j="";g.value==="zh"?j="":g.value==="en"&&(j="Please input glyph's name."),ElMessage(j);return}const L=genUUID(),z={uuid:L,type:"system",name:y.value,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},parameters:new ParametersMap([]),joints:[],script:`function script_${L.replaceAll("-","_")} (glyph, constants, FP) {
	//Todo something
}`};addGlyph(z,editStatus.value),addGlyphTemplate(z,editStatus.value),y.value="",setAddGlyphDialogVisible(!1)},V=L=>{L.preventDefault(),$()};return(L,z)=>{const j=resolveComponent("el-input"),ae=resolveComponent("el-form-item"),oe=resolveComponent("el-button"),re=resolveComponent("el-dialog");return openBlock(),createBlock(re,{modelValue:unref(addGlyphDialogVisible),"onUpdate:modelValue":z[1]||(z[1]=ue=>isRef(addGlyphDialogVisible)?addGlyphDialogVisible.value=ue:null),title:unref(n)("dialogs.addGlyphDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$x,[createVNode(oe,{onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.addGlyphDialog.cancel")),1)]),_:1}),createVNode(oe,{type:"primary",onPointerdown:$},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.addGlyphDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$z,[createVNode(ae,{label:unref(n)("dialogs.addGlyphDialog.glyphName")},{default:withCtx(()=>[createVNode(j,{modelValue:y.value,"onUpdate:modelValue":z[0]||(z[0]=ue=>y.value=ue),onKeyup:withKeys(V,["enter"])},null,8,["modelValue","onKeyup"])]),_:1},8,["label"])])]),_:1},8,["modelValue","title"])}}}),_hoisted_1$y={class:"form-wrapper"},_hoisted_2$w={class:"dialog-footer"},_sfc_main$z=defineComponent({__name:"AddIconDialog",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=ref(""),k=()=>{setAddIconDialogVisible(!1)},$=()=>{if(!y.value){let oe="";g.value==="zh"?oe="":g.value==="en"&&(oe="Please input icon's name."),ElMessage(oe);return}const L=selectedFile.value.iconsCount,z={uuid:genUUID(),text:y.value,unicode:toIconUnicode(L),components:[]},j=genUUID(),ae={uuid:j,type:"icon",character:z,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},info:{gridSettings:{dx:0,dy:0,centerSquareSize:selectedFile.value.width/3,size:selectedFile.value.width,default:!0},useSkeletonGrid:!1,layout:"",layoutTree:[]},script:`function script_${j.replaceAll("-","_")} (character, constants, FP) {
	//Todo something
}`};y.value="",selectedFile.value.iconsCount++,addCharacterForCurrentFile(ae),addCharacterTemplate(generateCharacterTemplate(ae)),setAddIconDialogVisible(!1)},V=L=>{L.preventDefault(),$()};return(L,z)=>{const j=resolveComponent("el-input"),ae=resolveComponent("el-form-item"),oe=resolveComponent("el-button"),re=resolveComponent("el-dialog");return openBlock(),createBlock(re,{modelValue:unref(addIconDialogVisible),"onUpdate:modelValue":z[1]||(z[1]=ue=>isRef(addIconDialogVisible)?addIconDialogVisible.value=ue:null),title:unref(n)("dialogs.addIconDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$w,[createVNode(oe,{onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.addIconDialog.cancel")),1)]),_:1}),createVNode(oe,{type:"primary",onPointerdown:$},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.addIconDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$y,[createVNode(ae,{label:unref(n)("dialogs.addIconDialog.iconName")},{default:withCtx(()=>[createVNode(j,{modelValue:y.value,"onUpdate:modelValue":z[0]||(z[0]=ue=>y.value=ue),onKeyup:withKeys(V,["enter"])},null,8,["modelValue","onKeyup"])]),_:1},8,["label"])])]),_:1},8,["modelValue","title"])}}}),_hoisted_1$x={class:"dialog-content"},_hoisted_2$v={class:"glyph-header"},_hoisted_3$n={class:"list-switch"},_hoisted_4$i={class:"dialog-footer"},_hoisted_5$d={class:"selected-glyphs-wrapper"},_sfc_main$y=defineComponent({__name:"GlyphComponentsDialog",setup(e){const{tm:n,t:r}=useI18n(),g=ref(Status.StrokeGlyphList),y=new Map;onMounted(async()=>{await nextTick()}),emitter.on("renderGlyphSelection",()=>{$(Status.GlyphList)}),emitter.on("renderStrokeGlyphSelection",()=>{$(Status.StrokeGlyphList)}),emitter.on("renderRadicalGlyphSelection",()=>{$(Status.RadicalGlyphList)}),emitter.on("renderCompGlyphSelection",()=>{$(Status.CompGlyphList)}),emitter.on("renderGlyphSelectionByUUID",oe=>{y.get(oe)&&(clearTimeout(y.get(oe)),y.set(oe,null));const re=setTimeout(async()=>{await nextTick(),k(oe,Status.GlyphList)},100);y.set(oe,re)}),emitter.on("renderStrokeGlyphSelectionByUUID",oe=>{y.get(oe)&&(clearTimeout(y.get(oe)),y.set(oe,null));const re=setTimeout(async()=>{await nextTick(),k(oe,Status.StrokeGlyphList)},100);y.set(oe,re)}),emitter.on("renderRadicalGlyphSelectionByUUID",oe=>{y.get(oe)&&(clearTimeout(y.get(oe)),y.set(oe,null));const re=setTimeout(async()=>{await nextTick(),k(oe,Status.RadicalGlyphList)},100);y.set(oe,re)}),emitter.on("renderCompGlyphSelectionByUUID",oe=>{y.get(oe)&&(clearTimeout(y.get(oe)),y.set(oe,null));const re=setTimeout(async()=>{await nextTick(),k(oe,Status.CompGlyphList)},100);y.set(oe,re)}),emitter.on("renderGlyphSelectionByUUIDOnEditing",oe=>{y.get(oe)&&(clearTimeout(y.get(oe)),y.set(oe,null));const re=setTimeout(async()=>{await nextTick(),k(oe,Status.GlyphList,!0)},100);y.set(oe,re)}),emitter.on("renderStrokeGlyphSelectionByUUIDOnEditing",oe=>{y.get(oe)&&(clearTimeout(y.get(oe)),y.set(oe,null));const re=setTimeout(async()=>{await nextTick(),k(oe,Status.StrokeGlyphList,!0)},100);y.set(oe,re)}),emitter.on("renderRadicalGlyphSelectionByUUIDOnEditing",oe=>{y.get(oe)&&(clearTimeout(y.get(oe)),y.set(oe,null));const re=setTimeout(async()=>{await nextTick(),k(oe,Status.RadicalGlyphList,!0)},100);y.set(oe,re)}),emitter.on("renderCompGlyphSelectionByUUIDOnEditing",oe=>{y.get(oe)&&(clearTimeout(y.get(oe)),y.set(oe,null));const re=setTimeout(async()=>{await nextTick(),k(oe,Status.CompGlyphList,!0)},100);y.set(oe,re)});const k=(oe,re,ue=!1)=>{let le=null;ue?le=editGlyph.value:le=getGlyphByUUID(oe),executeScript(le),le?.components?.map(xe=>{xe.type==="glyph"&&executeScript(xe.value)});let de=null;re===Status.GlyphList?de=document.getElementById("glyph-components-wrapper"):re===Status.StrokeGlyphList?de=document.getElementById("stroke-glyph-components-wrapper"):re===Status.RadicalGlyphList?de=document.getElementById("radical-glyph-components-wrapper"):re===Status.CompGlyphList&&(de=document.getElementById("comp-glyph-components-wrapper"));const he=de.querySelector(`#preview-canvas-${le.uuid}`);if(!he)return;const _e=componentsToContours(le._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(he,_e)},$=oe=>{const re=ue=>{ue._o||(executeScript(ue),ue?.components?.map(_e=>{_e.type==="glyph"&&executeScript(_e.value)}));let le=null;oe===Status.GlyphList?le=document.getElementById("glyph-components-wrapper"):oe===Status.StrokeGlyphList?le=document.getElementById("stroke-glyph-components-wrapper"):oe===Status.RadicalGlyphList?le=document.getElementById("radical-glyph-components-wrapper"):oe===Status.CompGlyphList&&(le=document.getElementById("comp-glyph-components-wrapper"));const de=le.querySelector(`#preview-canvas-${ue.uuid}`);if(!de)return;const he=componentsToContours(ue._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(de,he),loading$1.value&&(loaded$1.value+=1,loaded$1.value>=total$1.value&&(loading$1.value=!1))};if(oe===Status.GlyphList&&glyphs.value&&glyphs.value.length){let ue=0;const le=()=>{re(glyphs.value[ue]),ue++,ue<glyphs.value.length&&requestAnimationFrame(le)};requestAnimationFrame(le)}else if(oe===Status.StrokeGlyphList&&stroke_glyphs.value&&stroke_glyphs.value.length){let ue=0;const le=()=>{re(stroke_glyphs.value[ue]),ue++,ue<stroke_glyphs.value.length&&requestAnimationFrame(le)};requestAnimationFrame(le)}else if(oe===Status.RadicalGlyphList&&radical_glyphs.value&&radical_glyphs.value.length){let ue=0;const le=()=>{re(radical_glyphs.value[ue]),ue++,ue<radical_glyphs.value.length&&requestAnimationFrame(le)};requestAnimationFrame(le)}else if(oe===Status.CompGlyphList&&comp_glyphs.value&&comp_glyphs.value.length){let ue=0;const le=()=>{re(comp_glyphs.value[ue]),ue++,ue<comp_glyphs.value.length&&requestAnimationFrame(le)};requestAnimationFrame(le)}},V=()=>{glyphComponentsDialogVisible2.value=!1},L=()=>{setGlyphComponentsDialogVisible(!0)},z=oe=>{const re=selected_glyphs.value.findIndex(ue=>ue.uuid===oe);re!==-1&&selected_glyphs.value.splice(re,1)},j=()=>{onStrokeReplacement.value?(setReplacementStroke(selected_glyphs.value[0].uuid),onStrokeReplacement.value=!1,glyphComponentsDialogVisible2.value=!1):(selected_glyphs.value.map(oe=>{ae(oe)}),selected_glyphs.value=[],glyphComponentsDialogVisible2.value=!1)},ae=oe=>{const re=clone(oe);re.parent_reference=getParentInfo(editStatus.value===Status.Edit?editCharacterFile.value:editGlyph.value),re.script=null,re.script_reference=re.uuid;const ue={uuid:genUUID(),type:"glyph",name:oe.name+Date.now().toString().slice(9),lock:!1,visible:!0,value:re,ox:selectedFile.value.width/2-1e3/2,oy:selectedFile.value.height/2-1e3/2,usedInCharacter:!0};executeScript(ue.value),editStatus.value===Status.Edit?addComponentForCurrentCharacterFile(ue):editStatus.value===Status.Glyph&&addComponentForCurrentGlyph(ue),glyphDraggerTool.value!=="glyphDragger"&&setGlyphDraggerTool("glyphDragger")};return(oe,re)=>{const ue=resolveComponent("el-scrollbar"),le=resolveComponent("el-switch"),de=resolveComponent("el-button"),he=resolveComponent("el-dialog");return openBlock(),createElementBlock("div",{style:normalizeStyle({zIndex:unref(glyphComponentsDialogVisible2)?2e3:-999}),ref:"dialogContainer"},[createVNode(he,{modelValue:unref(glyphComponentsDialogVisible),"onUpdate:modelValue":re[5]||(re[5]=_e=>isRef(glyphComponentsDialogVisible)?glyphComponentsDialogVisible.value=_e:null),title:unref(n)("dialogs.glyphComponentDialog.title"),class:"glyph-components-dialog",onClose:L,width:"800px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_4$i,[createVNode(le,{modelValue:unref(multi_glyph_selection),"onUpdate:modelValue":re[4]||(re[4]=_e=>isRef(multi_glyph_selection)?multi_glyph_selection.value=_e:null),"active-text":unref(n)("dialogs.glyphComponentDialog.multiSelection"),"inactive-text":unref(n)("dialogs.glyphComponentDialog.singleSelection")},null,8,["modelValue","active-text","inactive-text"]),createBaseVNode("div",_hoisted_5$d,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(selected_glyphs),_e=>(openBlock(),createBlock(de,{onPointerdown:xe=>z(_e.uuid)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(_e.name),1)]),_:2},1032,["onPointerdown"]))),256))]),createVNode(de,{disabled:!unref(glyphComponentsDialogVisible2),onPointerdown:V},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.glyphComponentDialog.cancel")),1)]),_:1},8,["disabled"]),createVNode(de,{disabled:!unref(glyphComponentsDialogVisible2),type:"primary",onPointerdown:j},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.glyphComponentDialog.confirm")),1)]),_:1},8,["disabled"])])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$x,[createBaseVNode("div",_hoisted_2$v,[createBaseVNode("div",_hoisted_3$n,[createBaseVNode("span",{class:normalizeClass(["stroke-glyph-list",{selected:g.value===unref(Status).StrokeGlyphList}]),onPointerdown:re[0]||(re[0]=_e=>g.value=unref(Status).StrokeGlyphList)},toDisplayString$1(unref(r)("programming.stroke")),35),createBaseVNode("span",{class:normalizeClass(["radical-glyph-list",{selected:g.value===unref(Status).RadicalGlyphList}]),onPointerdown:re[1]||(re[1]=_e=>g.value=unref(Status).RadicalGlyphList)},toDisplayString$1(unref(r)("programming.radical")),35),createBaseVNode("span",{class:normalizeClass(["comp-glyph-list",{selected:g.value===unref(Status).CompGlyphList}]),onPointerdown:re[2]||(re[2]=_e=>g.value=unref(Status).CompGlyphList)},toDisplayString$1(unref(r)("programming.comp")),35),createBaseVNode("span",{class:normalizeClass(["glyph-list",{selected:g.value===unref(Status).GlyphList}]),onPointerdown:re[3]||(re[3]=_e=>g.value=unref(Status).GlyphList)},toDisplayString$1(unref(r)("programming.glyph_comp")),35)])]),createVNode(ue,{height:"300px"},{default:withCtx(()=>[createBaseVNode("main",{class:"list",id:"glyph-components-wrapper",style:normalizeStyle({zIndex:g.value===unref(Status).GlyphList?2999:-1e3})},null,4),createBaseVNode("main",{class:"list",id:"stroke-glyph-components-wrapper",style:normalizeStyle({zIndex:g.value===unref(Status).StrokeGlyphList?2999:-1e3})},null,4),createBaseVNode("main",{class:"list",id:"radical-glyph-components-wrapper",style:normalizeStyle({zIndex:g.value===unref(Status).RadicalGlyphList?2999:-1e3})},null,4),createBaseVNode("main",{class:"list",id:"comp-glyph-components-wrapper",style:normalizeStyle({zIndex:g.value===unref(Status).CompGlyphList?2999:-1e3})},null,4)]),_:1})])]),_:1},8,["modelValue","title"])],4)}}}),_hoisted_1$w={class:"dialog-footer"},_sfc_main$x=defineComponent({__name:"FontSettingsDialog",setup(e){const{tm:n,t:r}=useI18n(),g=ref("untitled"),y=ref(1e3),k=ref(800),$=ref(-200);onMounted(()=>{selectedFile.value&&(g.value=selectedFile.value.name,y.value=selectedFile.value.fontSettings.unitsPerEm,k.value=selectedFile.value.fontSettings.ascender,$.value=selectedFile.value.fontSettings.descender)}),watch([()=>selectedFile.value?.name,()=>selectedFile.value?.fontSettings],()=>{if(!selectedFile.value)return;g.value=selectedFile.value.name;let oe="",re="Regular";selectedFile.value.fontSettings?.tables?.name&&selectedFile.value.fontSettings?.tables?.name.map(ue=>{ue.nameID===1&&ue.langID===2052?ue.value=g.value:ue.nameID===1&&ue.langID===1033?ue.value=getEnName(g.value):ue.nameID===4&&ue.langID===2052?ue.value=g.value+" "+oe:ue.nameID===4&&ue.langID===1033?ue.value=getEnName(g.value)+" "+re:ue.nameID===6&&ue.langID===2052?ue.value=(getEnName(g.value)+"-"+re).replace(/\s/g,"").slice(0,63):ue.nameID===6&&ue.langID===1033&&(ue.value=(getEnName(g.value)+"-"+re).replace(/\s/g,"").slice(0,63))}),y.value=selectedFile.value.fontSettings.unitsPerEm,k.value=selectedFile.value.fontSettings.ascender,$.value=selectedFile.value.fontSettings.descender},{deep:!0});const V=()=>{let oe="",re="Regular";if(g.value!==selectedFile.value.name)for(let ue=0;ue<name_data.value.length;ue++){const le=name_data.value[ue];le.nameID===1&&le.langID===2052?le.value=g.value:le.nameID===1&&le.langID===1033?le.value=getEnName(g.value):le.nameID===2&&le.langID===2052?oe=le.value:le.nameID===2&&le.langID===1033?re=le.value:le.nameID===4&&le.langID===2052?le.value=g.value+" "+oe:le.nameID===4&&le.langID===1033?le.value=getEnName(g.value)+" "+re:le.nameID===6&&le.langID===2052?le.value=(getEnName(g.value)+"-"+re).replace(/\s/g,"").slice(0,63):le.nameID===6&&le.langID===1033&&(le.value=(getEnName(g.value)+"-"+re).replace(/\s/g,"").slice(0,63))}updateFontSettings({name:g.value,unitsPerEm:y.value,ascender:k.value,descender:$.value}),setFontSettingsDialogVisible(!1)},L=()=>{setFontSettingsDialogVisible(!1)},z=()=>{$.value=k.value-y.value},j=()=>{k.value=y.value+$.value},ae=()=>{setFontSettings2DialogVisible(!0),setFontSettingsDialogVisible(!1)};return(oe,re)=>{const ue=resolveComponent("el-input"),le=resolveComponent("el-form-item"),de=resolveComponent("el-input-number"),he=resolveComponent("el-form"),_e=resolveComponent("el-button"),xe=resolveComponent("el-dialog");return openBlock(),createBlock(xe,{"model-value":unref(fontSettingsDialogVisible),class:"font-settings-dialog",title:unref(n)("dialogs.fontSettingsDialog.title"),width:"320px","before-close":L},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_1$w,[createVNode(_e,{onPointerdown:ae},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.fontSettingsDialog.moreSettings")),1)]),_:1}),createVNode(_e,{onPointerdown:re[4]||(re[4]=Ne=>unref(setFontSettingsDialogVisible)(!1))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.fontSettingsDialog.cancel")),1)]),_:1}),createVNode(_e,{type:"primary",onPointerdown:re[5]||(re[5]=()=>V())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.fontSettingsDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createVNode(he,{class:"create-file-form","label-width":"80px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("dialogs.fontSettingsDialog.fontName")},{default:withCtx(()=>[createVNode(ue,{modelValue:g.value,"onUpdate:modelValue":re[0]||(re[0]=Ne=>g.value=Ne)},null,8,["modelValue"])]),_:1},8,["label"]),createVNode(le,{label:"unitsPerEm"},{default:withCtx(()=>[createVNode(de,{modelValue:y.value,"onUpdate:modelValue":re[1]||(re[1]=Ne=>y.value=Ne),precision:0,disabled:!0},null,8,["modelValue"])]),_:1}),createVNode(le,{label:"ascender"},{default:withCtx(()=>[createVNode(de,{modelValue:k.value,"onUpdate:modelValue":re[2]||(re[2]=Ne=>k.value=Ne),precision:0,onChange:z,disabled:!0},null,8,["modelValue"])]),_:1}),createVNode(le,{label:"descender"},{default:withCtx(()=>[createVNode(de,{modelValue:$.value,"onUpdate:modelValue":re[3]||(re[3]=Ne=>$.value=Ne),precision:0,onChange:j,disabled:!0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value","title"])}}}),validators={uint8:e=>typeof e=="number"&&e>=0&&e<=255,int8:e=>typeof e=="number"&&e>=-128&&e<=127,uint16:e=>typeof e=="number",int16:e=>typeof e=="number",uint24:e=>typeof e=="number",uint32:e=>typeof e=="number",int32:e=>typeof e=="number",Fixed:e=>typeof e=="number",FWORD:e=>typeof e=="number",UFWORD:e=>typeof e=="number",LONGDATETIME:e=>{if(typeof e!="number")return!1;const n=(e-2082844800)*1e3;return new Date(n).getTime()>0},Tag:e=>e.length===4},_withScopeId$b=e=>(pushScopeId("data-v-2384f384"),e=e(),popScopeId(),e),_hoisted_1$v={class:"table-item"},_hoisted_2$u=_withScopeId$b(()=>createBaseVNode("div",{class:"item-name"},"majorVersion",-1)),_hoisted_3$m={class:"item-content"},_hoisted_4$h={class:"tips"},_hoisted_5$c={class:"table-item"},_hoisted_6$b=_withScopeId$b(()=>createBaseVNode("div",{class:"item-name"},"minorVersion",-1)),_hoisted_7$b={class:"item-content"},_hoisted_8$b={class:"tips"},_hoisted_9$b={class:"table-item"},_hoisted_10$b=_withScopeId$b(()=>createBaseVNode("div",{class:"item-name"},"fontRevision",-1)),_hoisted_11$b={class:"item-content"},_hoisted_12$b={class:"tips"},_hoisted_13$9={class:"table-item"},_hoisted_14$8=_withScopeId$b(()=>createBaseVNode("div",{class:"item-name"},"flags",-1)),_hoisted_15$6={class:"item-content",style:{flexDirection:"column"}},_hoisted_16$6={class:"flags-item"},_hoisted_17$5={class:"flags-item-checkbox"},_hoisted_18$4=_withScopeId$b(()=>createBaseVNode("div",{class:"flags-item-name"},"Bit-0",-1)),_hoisted_19$4={class:"flags-item-description"},_hoisted_20$4={class:"flags-item"},_hoisted_21$3={class:"flags-item-checkbox"},_hoisted_22$3=_withScopeId$b(()=>createBaseVNode("div",{class:"flags-item-name"},"Bit-1",-1)),_hoisted_23$3={class:"flags-item-description"},_hoisted_24$3={class:"flags-item"},_hoisted_25$2={class:"flags-item-checkbox"},_hoisted_26$2=_withScopeId$b(()=>createBaseVNode("div",{class:"flags-item-name"},"Bit-2",-1)),_hoisted_27$2={class:"flags-item-description"},_hoisted_28$2={class:"flags-item"},_hoisted_29$2={class:"flags-item-checkbox"},_hoisted_30$2=_withScopeId$b(()=>createBaseVNode("div",{class:"flags-item-name"},"Bit-3",-1)),_hoisted_31$2={class:"flags-item-description"},_hoisted_32$2={class:"flags-item"},_hoisted_33$2={class:"flags-item-checkbox"},_hoisted_34$2=_withScopeId$b(()=>createBaseVNode("div",{class:"flags-item-name"},"Bit-4",-1)),_hoisted_35$2={class:"flags-item-description"},_hoisted_36$1={class:"flags-item"},_hoisted_37$1={class:"flags-item-checkbox"},_hoisted_38$1=_withScopeId$b(()=>createBaseVNode("div",{class:"flags-item-name"},"Bit-11",-1)),_hoisted_39$1={class:"flags-item-description"},_hoisted_40$1={class:"flags-item"},_hoisted_41$1={class:"flags-item-checkbox"},_hoisted_42$1=_withScopeId$b(()=>createBaseVNode("div",{class:"flags-item-name"},"Bit-12",-1)),_hoisted_43$1={class:"flags-item-description"},_hoisted_44$1={class:"flags-item"},_hoisted_45$1={class:"flags-item-checkbox"},_hoisted_46$1=_withScopeId$b(()=>createBaseVNode("div",{class:"flags-item-name"},"Bit-13",-1)),_hoisted_47$1={class:"flags-item-description"},_hoisted_48$1={class:"flags-item"},_hoisted_49$1={class:"flags-item-checkbox"},_hoisted_50$1=_withScopeId$b(()=>createBaseVNode("div",{class:"flags-item-name"},"Bit-14",-1)),_hoisted_51$1={class:"flags-item-description"},_hoisted_52$1={class:"table-item"},_hoisted_53$1=_withScopeId$b(()=>createBaseVNode("div",{class:"item-name"},"created",-1)),_hoisted_54$1={class:"item-content"},_hoisted_55$1={class:"table-item"},_hoisted_56$1=_withScopeId$b(()=>createBaseVNode("div",{class:"item-name"},"modified",-1)),_hoisted_57$1={class:"item-content"},_hoisted_58$1={class:"table-item"},_hoisted_59$1=_withScopeId$b(()=>createBaseVNode("div",{class:"item-name"},"macStyle",-1)),_hoisted_60$1={class:"item-content",style:{flexDirection:"column"}},_hoisted_61$1={class:"mac-style-item"},_hoisted_62$1={class:"mac-style-item-checkbox"},_hoisted_63$1=_withScopeId$b(()=>createBaseVNode("div",{class:"mac-style-item-name"},"Bit-0",-1)),_hoisted_64$1={class:"mac-style-item-description"},_hoisted_65$1={class:"mac-style-item"},_hoisted_66$1={class:"mac-style-item-checkbox"},_hoisted_67$1=_withScopeId$b(()=>createBaseVNode("div",{class:"mac-style-item-name"},"Bit-1",-1)),_hoisted_68$1={class:"mac-style-item-description"},_hoisted_69$1={class:"mac-style-item"},_hoisted_70$1={class:"mac-style-item-checkbox"},_hoisted_71$1=_withScopeId$b(()=>createBaseVNode("div",{class:"mac-style-item-name"},"Bit-2",-1)),_hoisted_72$1={class:"mac-style-item-description"},_hoisted_73$1={class:"mac-style-item"},_hoisted_74$1={class:"mac-style-item-checkbox"},_hoisted_75$1=_withScopeId$b(()=>createBaseVNode("div",{class:"mac-style-item-name"},"Bit-3",-1)),_hoisted_76$1={class:"mac-style-item-description"},_hoisted_77$1={class:"mac-style-item"},_hoisted_78$1={class:"mac-style-item-checkbox"},_hoisted_79$1=_withScopeId$b(()=>createBaseVNode("div",{class:"mac-style-item-name"},"Bit-4",-1)),_hoisted_80$1={class:"mac-style-item-description"},_hoisted_81$1={class:"mac-style-item"},_hoisted_82$1={class:"mac-style-item-checkbox"},_hoisted_83$1=_withScopeId$b(()=>createBaseVNode("div",{class:"mac-style-item-name"},"Bit-5",-1)),_hoisted_84$1={class:"mac-style-item-description"},_hoisted_85$1={class:"mac-style-item"},_hoisted_86$1={class:"mac-style-item-checkbox"},_hoisted_87$1=_withScopeId$b(()=>createBaseVNode("div",{class:"mac-style-item-name"},"Bit-6",-1)),_hoisted_88$1={class:"mac-style-item-description"},_hoisted_89$1={class:"table-item"},_hoisted_90=_withScopeId$b(()=>createBaseVNode("div",{class:"item-name"},"lowestRecPPEM",-1)),_hoisted_91={class:"item-content"},_hoisted_92={class:"tips"},_hoisted_93={class:"table-item"},_hoisted_94=_withScopeId$b(()=>createBaseVNode("div",{class:"item-name"},"fontDirectionHint",-1)),_hoisted_95={class:"item-content"},_hoisted_96={class:"tips"},_sfc_main$w=defineComponent({__name:"head",setup(e){const{locale:n}=useI18n(),r=ref({majorVersion:{valid:!0,tip:""},minorVersion:{valid:!0,tip:""},fontRevision:{valid:!0,tip:""},created:{valid:!0,tip:""},modified:{valid:!0,tip:""},lowestRecPPEM:{valid:!0,tip:""},fontDirectionHint:{valid:!0,tip:""}}),g=(le,de)=>{switch(le){case"majorVersion":{const he=validators.uint16(de);let _e="";he||(n.value==="zh"?_e="uint16":n.value==="en"&&(_e="Invalid format: uint16 required")),r.value.majorVersion.valid=he,r.value.majorVersion.tip=_e;break}case"minorVersion":{const he=validators.uint16(de);let _e="";he||(n.value==="zh"?_e="uint16":n.value==="en"&&(_e="Invalid format: uint16 required")),r.value.minorVersion.valid=he,r.value.minorVersion.tip=_e;break}case"fontRevision":{const he=validators.Fixed(de);let _e="";he||(n.value==="zh"?_e="":n.value==="en"&&(_e="Invalid format")),r.value.fontRevision.valid=he,r.value.fontRevision.tip=_e;break}case"created":{const he=validators.LONGDATETIME(de);let _e="";he||(n.value==="zh"?_e="":n.value==="en"&&(_e="Invalid format")),r.value.created.valid=he,r.value.created.tip=_e;break}case"modified":{const he=validators.LONGDATETIME(de);let _e="";he||(n.value==="zh"?_e="":n.value==="en"&&(_e="Invalid format")),r.value.modified.valid=he,r.value.modified.tip=_e;break}case"lowestRecPPEM":{const he=validators.uint16(de);let _e="";he||(n.value==="zh"?_e="uint16":n.value==="en"&&(_e="Invalid format: uint16 required")),r.value.lowestRecPPEM.valid=he,r.value.lowestRecPPEM.tip=_e;break}case"fontDirectionHint":{const he=validators.int16(de);let _e="";he||(n.value==="zh"?_e="int16":n.value==="en"&&(_e="Invalid format: int16 required")),r.value.fontDirectionHint.valid=he,r.value.fontDirectionHint.tip=_e;break}}},y=le=>{head_data.value.created.timestamp=Math.floor(le.getTime()/1e3)+2082844800},k=le=>{head_data.value.modified.timestamp=Math.floor(le.getTime()/1e3)+2082844800},$={majorVersion:"uint16",minorVersion:"uint16",fontRevision:"Fixed",created:" 1904-01-01  64 ",modified:" 1904-01-01  64 ",lowestRecPPEM:" (Pixels Per Em)",fontDirectionHint:" 0"},V=[" `y=0`"," `x=0` TrueType ","point size"," ppem Em  ppem ** hinting**","advance width"," OpenType  Apple  Apple "," OpenType "," OpenType "," OpenType "," OpenType "," OpenType ","/ ISO/IEC 14496-18MicroType ExpressWOFF 2.0 DSIG ",""," ClearType ","Last Resort font"," 0"],L=["","","","","","","","","","","","","","","",""],z={majorVersion:"Major version number of the table format, must be a uint16",minorVersion:"Minor version number of the table format, must be a uint16",fontRevision:"Font revision number defined by the font developer, format: Fixed",created:"Font creation time represented as seconds since 1904-01-01 00:00:00. Stored as 64-bit integer",modified:"Font modification time represented as seconds since 1904-01-01 00:00:00. Stored as 64-bit integer",lowestRecPPEM:"Recommended minimum pixels per em (PPEM) size for this font",fontDirectionHint:"Font layout direction hint (0 = left-to-right layout)"},j=["Baseline at y=0","Left sidebearing at x=0 (relevant for TrueType rasterizer) - see additional notes for variable fonts","Instructions may depend on point size","Force internal scaler to use integer ppem values. **Strongly recommended for hinted fonts**","Instructions may alter advance width (non-linear scaling)","[Reserved for Apple] If set, may cause vertical layout divergence on some platforms (see Apple specifications)","[Unused in OpenType] Must be 0","[Unused in OpenType] Must be 0","[Unused in OpenType] Must be 0","[Unused in OpenType] Must be 0","[Unused in OpenType] Must be 0","Font contains lossless compressed data (e.g., WOFF 2.0). Note: DSIG table may become invalid","Font contains converted metrics (compatible metrics)","Optimized for ClearType rendering","Last Resort fallback font","Reserved bit (must be 0)"],ae=["Bold","Italic","Underline","Outline","Shadow","Condensed","Extended","Reserved bit","Reserved bit","Reserved bit","Reserved bit","Reserved bit","Reserved bit","Reserved bit","Reserved bit","Reserved bit"],oe=computed(()=>n.value==="zh"?$:n.value==="en"?z:$),re=computed(()=>n.value==="zh"?V:n.value==="en"?j:V),ue=computed(()=>n.value==="zh"?L:n.value==="en"?ae:L);return(le,de)=>{const he=resolveComponent("el-input-number"),_e=resolveComponent("QuestionFilled"),xe=resolveComponent("el-icon"),Ne=resolveComponent("el-tooltip"),$e=resolveComponent("el-checkbox"),Ce=resolveComponent("el-date-picker"),Ie=resolveComponent("el-scrollbar");return openBlock(),createBlock(Ie,{height:"460px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$v,[_hoisted_2$u,createBaseVNode("div",_hoisted_3$m,[createVNode(he,{modelValue:unref(head_data).majorVersion,"onUpdate:modelValue":de[0]||(de[0]=ze=>unref(head_data).majorVersion=ze),onChange:de[1]||(de[1]=ze=>g("majorVersion",ze)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(Ne,{class:"tips",effect:"dark",content:oe.value.majorVersion,placement:"bottom"},{default:withCtx(()=>[createVNode(xe,null,{default:withCtx(()=>[createVNode(_e)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_4$h,toDisplayString$1(r.value.majorVersion.tip),1)])]),createBaseVNode("div",_hoisted_5$c,[_hoisted_6$b,createBaseVNode("div",_hoisted_7$b,[createVNode(he,{modelValue:unref(head_data).minorVersion,"onUpdate:modelValue":de[2]||(de[2]=ze=>unref(head_data).minorVersion=ze),onChange:de[3]||(de[3]=ze=>g("minorVersion",ze)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(Ne,{class:"tips",effect:"dark",content:oe.value.minorVersion,placement:"bottom"},{default:withCtx(()=>[createVNode(xe,null,{default:withCtx(()=>[createVNode(_e)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_8$b,toDisplayString$1(r.value.minorVersion.tip),1)])]),createBaseVNode("div",_hoisted_9$b,[_hoisted_10$b,createBaseVNode("div",_hoisted_11$b,[createVNode(he,{modelValue:unref(head_data).fontRevision,"onUpdate:modelValue":de[4]||(de[4]=ze=>unref(head_data).fontRevision=ze),onChange:de[5]||(de[5]=ze=>g("fontRevision",ze)),controls:!1,precision:3},null,8,["modelValue"]),createVNode(Ne,{class:"tips",effect:"dark",content:oe.value.fontRevision,placement:"bottom"},{default:withCtx(()=>[createVNode(xe,null,{default:withCtx(()=>[createVNode(_e)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_12$b,toDisplayString$1(r.value.fontRevision.tip),1)])]),createBaseVNode("div",_hoisted_13$9,[_hoisted_14$8,createBaseVNode("div",_hoisted_15$6,[createBaseVNode("div",_hoisted_16$6,[createBaseVNode("div",_hoisted_17$5,[createVNode($e,{modelValue:unref(head_data).flags[0],"onUpdate:modelValue":de[6]||(de[6]=ze=>unref(head_data).flags[0]=ze)},null,8,["modelValue"])]),_hoisted_18$4,createBaseVNode("div",_hoisted_19$4,toDisplayString$1(re.value[0]),1)]),createBaseVNode("div",_hoisted_20$4,[createBaseVNode("div",_hoisted_21$3,[createVNode($e,{modelValue:unref(head_data).flags[1],"onUpdate:modelValue":de[7]||(de[7]=ze=>unref(head_data).flags[1]=ze)},null,8,["modelValue"])]),_hoisted_22$3,createBaseVNode("div",_hoisted_23$3,toDisplayString$1(re.value[1]),1)]),createBaseVNode("div",_hoisted_24$3,[createBaseVNode("div",_hoisted_25$2,[createVNode($e,{modelValue:unref(head_data).flags[2],"onUpdate:modelValue":de[8]||(de[8]=ze=>unref(head_data).flags[2]=ze)},null,8,["modelValue"])]),_hoisted_26$2,createBaseVNode("div",_hoisted_27$2,toDisplayString$1(re.value[2]),1)]),createBaseVNode("div",_hoisted_28$2,[createBaseVNode("div",_hoisted_29$2,[createVNode($e,{modelValue:unref(head_data).flags[3],"onUpdate:modelValue":de[9]||(de[9]=ze=>unref(head_data).flags[3]=ze)},null,8,["modelValue"])]),_hoisted_30$2,createBaseVNode("div",_hoisted_31$2,toDisplayString$1(re.value[3]),1)]),createBaseVNode("div",_hoisted_32$2,[createBaseVNode("div",_hoisted_33$2,[createVNode($e,{modelValue:unref(head_data).flags[4],"onUpdate:modelValue":de[10]||(de[10]=ze=>unref(head_data).flags[4]=ze)},null,8,["modelValue"])]),_hoisted_34$2,createBaseVNode("div",_hoisted_35$2,toDisplayString$1(re.value[1]),1)]),createBaseVNode("div",_hoisted_36$1,[createBaseVNode("div",_hoisted_37$1,[createVNode($e,{modelValue:unref(head_data).flags[11],"onUpdate:modelValue":de[11]||(de[11]=ze=>unref(head_data).flags[11]=ze)},null,8,["modelValue"])]),_hoisted_38$1,createBaseVNode("div",_hoisted_39$1,toDisplayString$1(re.value[11]),1)]),createBaseVNode("div",_hoisted_40$1,[createBaseVNode("div",_hoisted_41$1,[createVNode($e,{modelValue:unref(head_data).flags[12],"onUpdate:modelValue":de[12]||(de[12]=ze=>unref(head_data).flags[12]=ze)},null,8,["modelValue"])]),_hoisted_42$1,createBaseVNode("div",_hoisted_43$1,toDisplayString$1(re.value[12]),1)]),createBaseVNode("div",_hoisted_44$1,[createBaseVNode("div",_hoisted_45$1,[createVNode($e,{modelValue:unref(head_data).flags[13],"onUpdate:modelValue":de[13]||(de[13]=ze=>unref(head_data).flags[13]=ze)},null,8,["modelValue"])]),_hoisted_46$1,createBaseVNode("div",_hoisted_47$1,toDisplayString$1(re.value[13]),1)]),createBaseVNode("div",_hoisted_48$1,[createBaseVNode("div",_hoisted_49$1,[createVNode($e,{modelValue:unref(head_data).flags[14],"onUpdate:modelValue":de[14]||(de[14]=ze=>unref(head_data).flags[14]=ze)},null,8,["modelValue"])]),_hoisted_50$1,createBaseVNode("div",_hoisted_51$1,toDisplayString$1(re.value[14]),1)])])]),createBaseVNode("div",_hoisted_52$1,[_hoisted_53$1,createBaseVNode("div",_hoisted_54$1,[createVNode(he,{modelValue:unref(head_data).created.timestamp,"onUpdate:modelValue":de[15]||(de[15]=ze=>unref(head_data).created.timestamp=ze),controls:!1,precision:0,disabled:""},null,8,["modelValue"]),createVNode(Ne,{class:"tips",effect:"dark",content:oe.value.created,placement:"bottom"},{default:withCtx(()=>[createVNode(xe,null,{default:withCtx(()=>[createVNode(_e)]),_:1})]),_:1},8,["content"]),createVNode(Ce,{class:"date-picker",modelValue:unref(head_data).created.value,"onUpdate:modelValue":de[16]||(de[16]=ze=>unref(head_data).created.value=ze),onChange:y,type:"datetime",placeholder:"Select date and time"},null,8,["modelValue"])])]),createBaseVNode("div",_hoisted_55$1,[_hoisted_56$1,createBaseVNode("div",_hoisted_57$1,[createVNode(he,{modelValue:unref(head_data).modified.timestamp,"onUpdate:modelValue":de[17]||(de[17]=ze=>unref(head_data).modified.timestamp=ze),controls:!1,precision:0,disabled:""},null,8,["modelValue"]),createVNode(Ne,{class:"tips",effect:"dark",content:oe.value.modified,placement:"bottom"},{default:withCtx(()=>[createVNode(xe,null,{default:withCtx(()=>[createVNode(_e)]),_:1})]),_:1},8,["content"]),createVNode(Ce,{class:"date-picker",modelValue:unref(head_data).modified.value,"onUpdate:modelValue":de[18]||(de[18]=ze=>unref(head_data).modified.value=ze),onChange:k,type:"datetime",placeholder:"Select date and time"},null,8,["modelValue"])])]),createBaseVNode("div",_hoisted_58$1,[_hoisted_59$1,createBaseVNode("div",_hoisted_60$1,[createBaseVNode("div",_hoisted_61$1,[createBaseVNode("div",_hoisted_62$1,[createVNode($e,{modelValue:unref(head_data).macStyle[0],"onUpdate:modelValue":de[19]||(de[19]=ze=>unref(head_data).macStyle[0]=ze)},null,8,["modelValue"])]),_hoisted_63$1,createBaseVNode("div",_hoisted_64$1,toDisplayString$1(ue.value[0]),1)]),createBaseVNode("div",_hoisted_65$1,[createBaseVNode("div",_hoisted_66$1,[createVNode($e,{modelValue:unref(head_data).macStyle[1],"onUpdate:modelValue":de[20]||(de[20]=ze=>unref(head_data).macStyle[1]=ze)},null,8,["modelValue"])]),_hoisted_67$1,createBaseVNode("div",_hoisted_68$1,toDisplayString$1(ue.value[1]),1)]),createBaseVNode("div",_hoisted_69$1,[createBaseVNode("div",_hoisted_70$1,[createVNode($e,{modelValue:unref(head_data).macStyle[2],"onUpdate:modelValue":de[21]||(de[21]=ze=>unref(head_data).macStyle[2]=ze)},null,8,["modelValue"])]),_hoisted_71$1,createBaseVNode("div",_hoisted_72$1,toDisplayString$1(ue.value[2]),1)]),createBaseVNode("div",_hoisted_73$1,[createBaseVNode("div",_hoisted_74$1,[createVNode($e,{modelValue:unref(head_data).macStyle[3],"onUpdate:modelValue":de[22]||(de[22]=ze=>unref(head_data).macStyle[3]=ze)},null,8,["modelValue"])]),_hoisted_75$1,createBaseVNode("div",_hoisted_76$1,toDisplayString$1(ue.value[3]),1)]),createBaseVNode("div",_hoisted_77$1,[createBaseVNode("div",_hoisted_78$1,[createVNode($e,{modelValue:unref(head_data).macStyle[4],"onUpdate:modelValue":de[23]||(de[23]=ze=>unref(head_data).macStyle[4]=ze)},null,8,["modelValue"])]),_hoisted_79$1,createBaseVNode("div",_hoisted_80$1,toDisplayString$1(ue.value[4]),1)]),createBaseVNode("div",_hoisted_81$1,[createBaseVNode("div",_hoisted_82$1,[createVNode($e,{modelValue:unref(head_data).macStyle[5],"onUpdate:modelValue":de[24]||(de[24]=ze=>unref(head_data).macStyle[5]=ze)},null,8,["modelValue"])]),_hoisted_83$1,createBaseVNode("div",_hoisted_84$1,toDisplayString$1(ue.value[5]),1)]),createBaseVNode("div",_hoisted_85$1,[createBaseVNode("div",_hoisted_86$1,[createVNode($e,{modelValue:unref(head_data).macStyle[6],"onUpdate:modelValue":de[25]||(de[25]=ze=>unref(head_data).macStyle[6]=ze)},null,8,["modelValue"])]),_hoisted_87$1,createBaseVNode("div",_hoisted_88$1,toDisplayString$1(ue.value[6]),1)])])]),createBaseVNode("div",_hoisted_89$1,[_hoisted_90,createBaseVNode("div",_hoisted_91,[createVNode(he,{modelValue:unref(head_data).lowestRecPPEM,"onUpdate:modelValue":de[26]||(de[26]=ze=>unref(head_data).lowestRecPPEM=ze),onChange:de[27]||(de[27]=ze=>g("lowestRecPPEM",ze)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(Ne,{class:"tips",effect:"dark",content:oe.value.lowestRecPPEM,placement:"bottom"},{default:withCtx(()=>[createVNode(xe,null,{default:withCtx(()=>[createVNode(_e)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_92,toDisplayString$1(r.value.lowestRecPPEM.tip),1)])]),createBaseVNode("div",_hoisted_93,[_hoisted_94,createBaseVNode("div",_hoisted_95,[createVNode(he,{modelValue:unref(head_data).fontDirectionHint,"onUpdate:modelValue":de[28]||(de[28]=ze=>unref(head_data).fontDirectionHint=ze),onChange:de[29]||(de[29]=ze=>g("fontDirectionHint",ze)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(Ne,{class:"tips",effect:"dark",content:oe.value.fontDirectionHint,placement:"bottom"},{default:withCtx(()=>[createVNode(xe,null,{default:withCtx(()=>[createVNode(_e)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_96,toDisplayString$1(r.value.fontDirectionHint.tip),1)])])]),_:1})}}}),HeadPanel=_export_sfc(_sfc_main$w,[["__scopeId","data-v-2384f384"]]),_withScopeId$a=e=>(pushScopeId("data-v-3ad2608e"),e=e(),popScopeId(),e),_hoisted_1$u={class:"table-item"},_hoisted_2$t=_withScopeId$a(()=>createBaseVNode("div",{class:"item-name"},"majorVersion",-1)),_hoisted_3$l={class:"item-content"},_hoisted_4$g={class:"tips"},_hoisted_5$b={class:"table-item"},_hoisted_6$a=_withScopeId$a(()=>createBaseVNode("div",{class:"item-name"},"minorVersion",-1)),_hoisted_7$a={class:"item-content"},_hoisted_8$a={class:"tips"},_hoisted_9$a={class:"table-item"},_hoisted_10$a=_withScopeId$a(()=>createBaseVNode("div",{class:"item-name"},"lineGap",-1)),_hoisted_11$a={class:"item-content"},_hoisted_12$a={class:"tips"},_hoisted_13$8={class:"table-item"},_hoisted_14$7=_withScopeId$a(()=>createBaseVNode("div",{class:"item-name"},"caretSlopeRise",-1)),_hoisted_15$5={class:"item-content"},_hoisted_16$5={class:"tips"},_hoisted_17$4={class:"table-item"},_hoisted_18$3=_withScopeId$a(()=>createBaseVNode("div",{class:"item-name"},"caretSlopeRun",-1)),_hoisted_19$3={class:"item-content"},_hoisted_20$3={class:"tips"},_hoisted_21$2={class:"table-item"},_hoisted_22$2=_withScopeId$a(()=>createBaseVNode("div",{class:"item-name"},"caretOffset",-1)),_hoisted_23$2={class:"item-content"},_hoisted_24$2={class:"tips"},_sfc_main$v=defineComponent({__name:"hhea",setup(e){const{locale:n}=useI18n(),r=ref({majorVersion:{valid:!0,tip:""},minorVersion:{valid:!0,tip:""},lineGap:{valid:!0,tip:""},caretSlopeRise:{valid:!0,tip:""},caretSlopeRun:{valid:!0,tip:""},caretOffset:{valid:!0,tip:""}}),g=(V,L)=>{switch(V){case"majorVersion":{const z=validators.uint16(L);let j="";z||(n.value==="zh"?j="uint16":n.value==="en"&&(j="Invalid format: uint16 required")),r.value.majorVersion.valid=z,r.value.majorVersion.tip=j;break}case"minorVersion":{const z=validators.uint16(L);let j="";z||(n.value==="zh"?j="uint16":n.value==="en"&&(j="Invalid format: uint16 required")),r.value.minorVersion.valid=z,r.value.minorVersion.tip=j;break}case"lineGap":{const z=validators.FWORD(L);let j="";z||(n.value==="zh"?j="":n.value==="en"&&(j="Invalid format")),r.value.lineGap.valid=z,r.value.lineGap.tip=j;break}case"caretSlopeRise":{const z=validators.int16(L);let j="";z||(n.value==="zh"?j="uint16":n.value==="en"&&(j="Invalid format: uint16 required")),r.value.caretSlopeRise.valid=z,r.value.caretSlopeRise.tip=j;break}case"caretSlopeRun":{const z=validators.int16(L);let j="";z||(n.value==="zh"?j="int16":n.value==="en"&&(j="Invalid format: int16 required")),r.value.caretSlopeRun.valid=z,r.value.caretSlopeRun.tip=j;break}case"caretOffset":{const z=validators.int16(L);let j="";z||(n.value==="zh"?j="int16":n.value==="en"&&(j="Invalid format: int16 required")),r.value.caretOffset.valid=z,r.value.caretOffset.tip=j;break}}},y={majorVersion:"uint16",minorVersion:"uint16",lineGap:"FWORD",caretSlopeRise:" 1int16",caretSlopeRun:" 0int16",caretOffset:" 0int16"},k={majorVersion:"Major version number of the table format (uint16)",minorVersion:"Minor version number of the table format (uint16)",lineGap:"Additional space between lines (extra spacing between text rows), format: FWORD",caretSlopeRise:"Vertical slope component defining caret angle (typically 1). Format: int16",caretSlopeRun:"Horizontal slope component defining caret angle (typically 0). Format: int16",caretOffset:"Horizontal offset from standard caret position (usually 0). Format: int16"},$=computed(()=>n.value==="zh"?y:n.value==="en"?k:y);return(V,L)=>{const z=resolveComponent("el-input-number"),j=resolveComponent("QuestionFilled"),ae=resolveComponent("el-icon"),oe=resolveComponent("el-tooltip"),re=resolveComponent("el-scrollbar");return openBlock(),createBlock(re,{height:"460px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$u,[_hoisted_2$t,createBaseVNode("div",_hoisted_3$l,[createVNode(z,{modelValue:unref(hhea_data).majorVersion,"onUpdate:modelValue":L[0]||(L[0]=ue=>unref(hhea_data).majorVersion=ue),onChange:L[1]||(L[1]=ue=>g("majorVersion",ue)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(oe,{class:"tips",effect:"dark",content:$.value.majorVersion,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_4$g,toDisplayString$1(r.value.majorVersion.tip),1)])]),createBaseVNode("div",_hoisted_5$b,[_hoisted_6$a,createBaseVNode("div",_hoisted_7$a,[createVNode(z,{modelValue:unref(hhea_data).minorVersion,"onUpdate:modelValue":L[2]||(L[2]=ue=>unref(hhea_data).minorVersion=ue),onChange:L[3]||(L[3]=ue=>g("minorVersion",ue)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(oe,{class:"tips",effect:"dark",content:$.value.minorVersion,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_8$a,toDisplayString$1(r.value.minorVersion.tip),1)])]),createBaseVNode("div",_hoisted_9$a,[_hoisted_10$a,createBaseVNode("div",_hoisted_11$a,[createVNode(z,{modelValue:unref(hhea_data).lineGap,"onUpdate:modelValue":L[4]||(L[4]=ue=>unref(hhea_data).lineGap=ue),onChange:L[5]||(L[5]=ue=>g("lineGap",ue)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(oe,{class:"tips",effect:"dark",content:$.value.lineGap,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_12$a,toDisplayString$1(r.value.lineGap.tip),1)])]),createBaseVNode("div",_hoisted_13$8,[_hoisted_14$7,createBaseVNode("div",_hoisted_15$5,[createVNode(z,{modelValue:unref(hhea_data).caretSlopeRise,"onUpdate:modelValue":L[6]||(L[6]=ue=>unref(hhea_data).caretSlopeRise=ue),onChange:L[7]||(L[7]=ue=>g("caretSlopeRise",ue)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(oe,{class:"tips",effect:"dark",content:$.value.caretSlopeRise,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_16$5,toDisplayString$1(r.value.caretSlopeRise.tip),1)])]),createBaseVNode("div",_hoisted_17$4,[_hoisted_18$3,createBaseVNode("div",_hoisted_19$3,[createVNode(z,{modelValue:unref(hhea_data).caretSlopeRun,"onUpdate:modelValue":L[8]||(L[8]=ue=>unref(hhea_data).caretSlopeRun=ue),onChange:L[9]||(L[9]=ue=>g("caretSlopeRun",ue)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(oe,{class:"tips",effect:"dark",content:$.value.caretSlopeRun,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_20$3,toDisplayString$1(r.value.caretSlopeRun.tip),1)])]),createBaseVNode("div",_hoisted_21$2,[_hoisted_22$2,createBaseVNode("div",_hoisted_23$2,[createVNode(z,{modelValue:unref(hhea_data).caretOffset,"onUpdate:modelValue":L[10]||(L[10]=ue=>unref(hhea_data).caretOffset=ue),onChange:L[11]||(L[11]=ue=>g("caretOffset",ue)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(oe,{class:"tips",effect:"dark",content:$.value.caretOffset,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_24$2,toDisplayString$1(r.value.caretOffset.tip),1)])])]),_:1})}}}),HheaPanel=_export_sfc(_sfc_main$v,[["__scopeId","data-v-3ad2608e"]]),_hoisted_1$t={class:"table-item"},_hoisted_2$s={class:"item-row-1"},_hoisted_3$k={class:"item-row-2"},_hoisted_4$f={class:"add-item-btn"},_sfc_main$u=defineComponent({__name:"name",setup(e){const{t:n,tm:r}=useI18n(),y=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"].map((j,ae)=>({label:j,value:ae})),k=[{label:"Unicode",value:0,disabled:!0},{label:"Macintosh",value:1,disabled:!0},{label:"Windows",value:3,disabled:!1}],$=[{label:"Unicode BMP",value:1}],V=[{label:"zh",value:2052},{label:"zh-HK",value:3076},{label:"zh-MO",value:5124},{label:"zh-SG",value:4100},{label:"zh-TW",value:1028},{label:"en",value:1033}],L=()=>{name_data.value.push({nameID:1,nameLabel:"fontFamily",platformID:3,encodingID:1,langID:2052,value:"",default:!1})},z=j=>{name_data.value[j].default||name_data.value.splice(j,1)};return(j,ae)=>{const oe=resolveComponent("el-option"),re=resolveComponent("el-select"),ue=resolveComponent("el-button"),le=resolveComponent("el-input"),de=resolveComponent("QuestionFilled"),he=resolveComponent("el-icon"),_e=resolveComponent("el-tooltip"),xe=resolveComponent("el-scrollbar");return openBlock(),createBlock(xe,{height:"460px"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(name_data),(Ne,$e)=>(openBlock(),createElementBlock("div",_hoisted_1$t,[createBaseVNode("div",_hoisted_2$s,[createVNode(re,{modelValue:Ne.nameID,"onUpdate:modelValue":Ce=>Ne.nameID=Ce,class:"name-id-select"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(y),Ce=>(openBlock(),createBlock(oe,{key:Ce.value,label:Ce.label,value:Ce.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),createVNode(re,{modelValue:Ne.langID,"onUpdate:modelValue":Ce=>Ne.langID=Ce,class:"lang-id-select"},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(V,Ce=>createVNode(oe,{key:Ce.value,label:Ce.label,value:Ce.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"]),createVNode(re,{modelValue:Ne.platformID,"onUpdate:modelValue":Ce=>Ne.platformID=Ce,class:"lang-id-select"},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(k,Ce=>createVNode(oe,{key:Ce.value,label:Ce.label,value:Ce.value,disabled:Ce.disabled},null,8,["label","value","disabled"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"]),createVNode(re,{modelValue:Ne.encodingID,"onUpdate:modelValue":Ce=>Ne.encodingID=Ce,class:"lang-id-select"},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList($,Ce=>createVNode(oe,{key:Ce.value,label:Ce.label,value:Ce.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"]),withDirectives(createVNode(ue,{onPointerdown:()=>z($e),type:"danger",icon:unref(delete_default),style:normalizeStyle({backgroundColor:"rgb(196, 86.4, 86.4)",color:"var(--light-0)",border:"1px solid var(--light-5)"})},null,8,["onPointerdown","icon","style"]),[[vShow,!Ne.default]])]),createBaseVNode("div",_hoisted_3$k,[createVNode(le,{modelValue:Ne.value,"onUpdate:modelValue":Ce=>Ne.value=Ce},null,8,["modelValue","onUpdate:modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:unref(r)("dialogs.fontSettingsDialog.nameTableTip"),placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"])])]))),256)),createBaseVNode("div",_hoisted_4$f,[createVNode(ue,{onPointerdown:L},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("dialogs.fontSettingsDialog.addItem")),1)]),_:1})])]),_:1})}}}),NamePanel=_export_sfc(_sfc_main$u,[["__scopeId","data-v-f904aa49"]]),_withScopeId$9=e=>(pushScopeId("data-v-b275f007"),e=e(),popScopeId(),e),_hoisted_1$s={class:"table-item"},_hoisted_2$r=_withScopeId$9(()=>createBaseVNode("div",{class:"item-name"},"version",-1)),_hoisted_3$j={class:"item-content"},_hoisted_4$e={class:"table-item"},_hoisted_5$a=_withScopeId$9(()=>createBaseVNode("div",{class:"item-name"},"italicAngle",-1)),_hoisted_6$9={class:"item-content"},_hoisted_7$9={class:"tips"},_hoisted_8$9={class:"table-item"},_hoisted_9$9=_withScopeId$9(()=>createBaseVNode("div",{class:"item-name"},"lineGap",-1)),_hoisted_10$9={class:"item-content"},_hoisted_11$9={class:"tips"},_hoisted_12$9={class:"table-item"},_hoisted_13$7=_withScopeId$9(()=>createBaseVNode("div",{class:"item-name"},"underlineThickness",-1)),_hoisted_14$6={class:"item-content"},_hoisted_15$4={class:"tips"},_hoisted_16$4={class:"table-item"},_hoisted_17$3=_withScopeId$9(()=>createBaseVNode("div",{class:"item-name"},"isFixedPitch",-1)),_hoisted_18$2={class:"item-content"},_hoisted_19$2={class:"tips"},_hoisted_20$2={class:"table-item"},_hoisted_21$1=_withScopeId$9(()=>createBaseVNode("div",{class:"item-name"},"minMemType42",-1)),_hoisted_22$1={class:"item-content"},_hoisted_23$1={class:"tips"},_hoisted_24$1={class:"table-item"},_hoisted_25$1=_withScopeId$9(()=>createBaseVNode("div",{class:"item-name"},"maxMemType42",-1)),_hoisted_26$1={class:"item-content"},_hoisted_27$1={class:"tips"},_hoisted_28$1={class:"table-item"},_hoisted_29$1=_withScopeId$9(()=>createBaseVNode("div",{class:"item-name"},"minMemType1",-1)),_hoisted_30$1={class:"item-content"},_hoisted_31$1={class:"tips"},_hoisted_32$1={class:"table-item"},_hoisted_33$1=_withScopeId$9(()=>createBaseVNode("div",{class:"item-name"},"maxMemType1",-1)),_hoisted_34$1={class:"item-content"},_hoisted_35$1={class:"tips"},_sfc_main$t=defineComponent({__name:"post",setup(e){const{locale:n}=useI18n(),r=ref({italicAngle:{valid:!0,tip:""},underlinePosition:{valid:!0,tip:""},underlineThickness:{valid:!0,tip:""},isFixedPitch:{valid:!0,tip:""},minMemType42:{valid:!0,tip:""},maxMemType42:{valid:!0,tip:""},minMemType1:{valid:!0,tip:""},maxMemType1:{valid:!0,tip:""}}),g=(V,L)=>{switch(V){case"italicAngle":{const z=validators.Fixed(L);let j="";z||(n.value==="zh"?j="Fixed":n.value==="en"&&(j="Invalid format: Fixed required")),r.value.italicAngle.valid=z,r.value.italicAngle.tip=j;break}case"underlinePosition":{const z=validators.FWORD(L);let j="";z||(n.value==="zh"?j="FWORD":n.value==="en"&&(j="Invalid format: FWORD required")),r.value.underlinePosition.valid=z,r.value.underlinePosition.tip=j;break}case"underlineThickness":{const z=validators.FWORD(L);let j="";z||(n.value==="zh"?j="":n.value==="en"&&(j="Invalid format")),r.value.underlineThickness.valid=z,r.value.underlineThickness.tip=j;break}case"isFixedPitch":{const z=validators.uint32(L);let j="";z||(n.value==="zh"?j="uint32":n.value==="en"&&(j="Invalid format: uint32 required")),r.value.isFixedPitch.valid=z,r.value.isFixedPitch.tip=j;break}case"minMemType42":{const z=validators.uint32(L);let j="";z||(n.value==="zh"?j="uint32":n.value==="en"&&(j="Invalid format: uint32 required")),r.value.minMemType42.valid=z,r.value.minMemType42.tip=j;break}case"maxMemType42":{const z=validators.uint32(L);let j="";z||(n.value==="zh"?j="uint32":n.value==="en"&&(j="Invalid format: uint32 required")),r.value.maxMemType42.valid=z,r.value.maxMemType42.tip=j;break}case"minMemType1":{const z=validators.uint32(L);let j="";z||(n.value==="zh"?j="uint32":n.value==="en"&&(j="Invalid format: uint32 required")),r.value.minMemType1.valid=z,r.value.minMemType1.tip=j;break}case"maxMemType1":{const z=validators.uint32(L);let j="";z||(n.value==="zh"?j="uint32":n.value==="en"&&(j="Invalid format: uint32 required")),r.value.maxMemType1.valid=z,r.value.maxMemType1.tip=j;break}}},y={version:"version 3.0",italicAngle:"",underlinePosition:" y ",underlineThickness:"U+005F LOW LINE OS/2 ",isFixedPitch:" 0",minMemType42:" OpenType ",maxMemType42:" OpenType ",minMemType1:" OpenType  Type 1 ",maxMemType1:" OpenType  Type 1 "},k={version:"Version 3.0",italicAngle:"Italic angle in degrees (counter-clockwise from vertical). Positive for left-leaning, negative for right-leaning italic. Upright=0",underlinePosition:"Recommended y-coordinate for top of underline stroke",underlineThickness:"Recommended underline stroke thickness. Should match U+005F LOW LINE glyph and OS/2 table's strikeout thickness",isFixedPitch:"Non-zero value indicates monospace font; 0 indicates proportional font",minMemType42:"Minimum memory usage when downloading as OpenType/CFF font (Type 42)",maxMemType42:"Maximum memory usage when downloading as OpenType/CFF font (Type 42)",minMemType1:"Minimum memory usage when downloaded as Type 1 font",maxMemType1:"Maximum memory usage when downloaded as Type 1 font"},$=computed(()=>n.value==="zh"?y:n.value==="en"?k:y);return(V,L)=>{const z=resolveComponent("el-input"),j=resolveComponent("QuestionFilled"),ae=resolveComponent("el-icon"),oe=resolveComponent("el-tooltip"),re=resolveComponent("el-input-number"),ue=resolveComponent("el-scrollbar");return openBlock(),createBlock(ue,{height:"460px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$s,[_hoisted_2$r,createBaseVNode("div",_hoisted_3$j,[createVNode(z,{"model-value":"version 3.0",controls:!1,disabled:""}),createVNode(oe,{class:"tips",effect:"dark",content:$.value.version,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"])])]),createBaseVNode("div",_hoisted_4$e,[_hoisted_5$a,createBaseVNode("div",_hoisted_6$9,[createVNode(re,{modelValue:unref(post_data).italicAngle,"onUpdate:modelValue":L[0]||(L[0]=le=>unref(post_data).italicAngle=le),onChange:L[1]||(L[1]=le=>g("italicAngle",le)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(oe,{class:"tips",effect:"dark",content:$.value.italicAngle,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_7$9,toDisplayString$1(r.value.italicAngle.tip),1)])]),createBaseVNode("div",_hoisted_8$9,[_hoisted_9$9,createBaseVNode("div",_hoisted_10$9,[createVNode(re,{modelValue:unref(post_data).underlinePosition,"onUpdate:modelValue":L[2]||(L[2]=le=>unref(post_data).underlinePosition=le),onChange:L[3]||(L[3]=le=>g("underlinePosition",le)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(oe,{class:"tips",effect:"dark",content:$.value.underlinePosition,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_11$9,toDisplayString$1(r.value.underlinePosition.tip),1)])]),createBaseVNode("div",_hoisted_12$9,[_hoisted_13$7,createBaseVNode("div",_hoisted_14$6,[createVNode(re,{modelValue:unref(post_data).underlineThickness,"onUpdate:modelValue":L[4]||(L[4]=le=>unref(post_data).underlineThickness=le),onChange:L[5]||(L[5]=le=>g("underlineThickness",le)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(oe,{class:"tips",effect:"dark",content:$.value.underlineThickness,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_15$4,toDisplayString$1(r.value.underlineThickness.tip),1)])]),createBaseVNode("div",_hoisted_16$4,[_hoisted_17$3,createBaseVNode("div",_hoisted_18$2,[createVNode(re,{modelValue:unref(post_data).isFixedPitch,"onUpdate:modelValue":L[6]||(L[6]=le=>unref(post_data).isFixedPitch=le),onChange:L[7]||(L[7]=le=>g("isFixedPitch",le)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(oe,{class:"tips",effect:"dark",content:$.value.isFixedPitch,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_19$2,toDisplayString$1(r.value.isFixedPitch.tip),1)])]),createBaseVNode("div",_hoisted_20$2,[_hoisted_21$1,createBaseVNode("div",_hoisted_22$1,[createVNode(re,{modelValue:unref(post_data).minMemType42,"onUpdate:modelValue":L[8]||(L[8]=le=>unref(post_data).minMemType42=le),onChange:L[9]||(L[9]=le=>g("minMemType42",le)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(oe,{class:"tips",effect:"dark",content:$.value.minMemType42,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_23$1,toDisplayString$1(r.value.minMemType42.tip),1)])]),createBaseVNode("div",_hoisted_24$1,[_hoisted_25$1,createBaseVNode("div",_hoisted_26$1,[createVNode(re,{modelValue:unref(post_data).maxMemType42,"onUpdate:modelValue":L[10]||(L[10]=le=>unref(post_data).maxMemType42=le),onChange:L[11]||(L[11]=le=>g("maxMemType42",le)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(oe,{class:"tips",effect:"dark",content:$.value.maxMemType42,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_27$1,toDisplayString$1(r.value.maxMemType42.tip),1)])]),createBaseVNode("div",_hoisted_28$1,[_hoisted_29$1,createBaseVNode("div",_hoisted_30$1,[createVNode(re,{modelValue:unref(post_data).minMemType1,"onUpdate:modelValue":L[12]||(L[12]=le=>unref(post_data).minMemType1=le),onChange:L[13]||(L[13]=le=>g("minMemType1",le)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(oe,{class:"tips",effect:"dark",content:$.value.minMemType1,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_31$1,toDisplayString$1(r.value.minMemType1.tip),1)])]),createBaseVNode("div",_hoisted_32$1,[_hoisted_33$1,createBaseVNode("div",_hoisted_34$1,[createVNode(re,{modelValue:unref(post_data).maxMemType1,"onUpdate:modelValue":L[14]||(L[14]=le=>unref(post_data).maxMemType1=le),onChange:L[15]||(L[15]=le=>g("maxMemType1",le)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(oe,{class:"tips",effect:"dark",content:$.value.maxMemType1,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_35$1,toDisplayString$1(r.value.maxMemType1.tip),1)])])]),_:1})}}}),PostPanel=_export_sfc(_sfc_main$t,[["__scopeId","data-v-b275f007"]]),_withScopeId$8=e=>(pushScopeId("data-v-fdf651ef"),e=e(),popScopeId(),e),_hoisted_1$r={class:"table-item"},_hoisted_2$q=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"version",-1)),_hoisted_3$i={class:"item-content"},_hoisted_4$d={class:"tips"},_hoisted_5$9={class:"table-item"},_hoisted_6$8=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"usWeightClass",-1)),_hoisted_7$8={class:"item-content"},_hoisted_8$8={class:"tips"},_hoisted_9$8={class:"table-item"},_hoisted_10$8=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"usWidthClass",-1)),_hoisted_11$8={class:"item-content"},_hoisted_12$8={class:"tips"},_hoisted_13$6={class:"table-item"},_hoisted_14$5=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"fsType",-1)),_hoisted_15$3={class:"item-content"},_hoisted_16$3={class:"tips"},_hoisted_17$2={class:"table-item"},_hoisted_18$1=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"ySubscriptXSize",-1)),_hoisted_19$1={class:"item-content"},_hoisted_20$1={class:"tips"},_hoisted_21={class:"table-item"},_hoisted_22=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"ySubscriptYSize",-1)),_hoisted_23={class:"item-content"},_hoisted_24={class:"tips"},_hoisted_25={class:"table-item"},_hoisted_26=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"ySubscriptXOffset",-1)),_hoisted_27={class:"item-content"},_hoisted_28={class:"tips"},_hoisted_29={class:"table-item"},_hoisted_30=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"ySubscriptYOffset",-1)),_hoisted_31={class:"item-content"},_hoisted_32={class:"tips"},_hoisted_33={class:"table-item"},_hoisted_34=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"ySuperscriptXSize",-1)),_hoisted_35={class:"item-content"},_hoisted_36={class:"tips"},_hoisted_37={class:"table-item"},_hoisted_38=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"ySuperscriptYSize",-1)),_hoisted_39={class:"item-content"},_hoisted_40={class:"tips"},_hoisted_41={class:"table-item"},_hoisted_42=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"ySuperscriptXOffset",-1)),_hoisted_43={class:"item-content"},_hoisted_44={class:"tips"},_hoisted_45={class:"table-item"},_hoisted_46=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"ySuperscriptYOffset",-1)),_hoisted_47={class:"item-content"},_hoisted_48={class:"tips"},_hoisted_49={class:"table-item"},_hoisted_50=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"yStrikeoutSize",-1)),_hoisted_51={class:"item-content"},_hoisted_52={class:"tips"},_hoisted_53={class:"table-item"},_hoisted_54=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"yStrikeoutPosition",-1)),_hoisted_55={class:"item-content"},_hoisted_56={class:"tips"},_hoisted_57={class:"table-item"},_hoisted_58=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"sFamilyClass",-1)),_hoisted_59={class:"item-content"},_hoisted_60={class:"tips"},_hoisted_61={class:"table-item"},_hoisted_62=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"panose",-1)),_hoisted_63={class:"item-content",style:{flexDirection:"column"}},_hoisted_64={class:"panose-item"},_hoisted_65={class:"panose-item-input"},_hoisted_66={class:"panose-item-description"},_hoisted_67={class:"table-item"},_hoisted_68=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"achVendID",-1)),_hoisted_69={class:"item-content"},_hoisted_70={class:"tips"},_hoisted_71={class:"table-item"},_hoisted_72=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"fsSelection",-1)),_hoisted_73={class:"item-content",style:{flexDirection:"column"}},_hoisted_74={class:"fs-selection-item"},_hoisted_75={class:"fs-selection-item-checkbox"},_hoisted_76={class:"fs-selection-item-name"},_hoisted_77={class:"fs-selection-item-description"},_hoisted_78={class:"table-item"},_hoisted_79=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"usMaxContext",-1)),_hoisted_80={class:"item-content"},_hoisted_81={class:"tips"},_hoisted_82={class:"table-item"},_hoisted_83=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"usLowerOpticalPointSize",-1)),_hoisted_84={class:"item-content"},_hoisted_85={class:"tips"},_hoisted_86={class:"table-item"},_hoisted_87=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"usUpperOpticalPointSize",-1)),_hoisted_88={class:"item-content"},_hoisted_89={class:"tips"},_sfc_main$s=defineComponent({__name:"os_2",setup(e){const{locale:n}=useI18n(),r=ref({version:{valid:!0,tip:""},usWeightClass:{valid:!0,tip:""},usWidthClass:{valid:!0,tip:""},fsType:{valid:!0,tip:""},ySubscriptXSize:{valid:!0,tip:""},ySubscriptYSize:{valid:!0,tip:""},ySubscriptXOffset:{valid:!0,tip:""},ySubscriptYOffset:{valid:!0,tip:""},ySuperscriptXSize:{valid:!0,tip:""},ySuperscriptYSize:{valid:!0,tip:""},ySuperscriptXOffset:{valid:!0,tip:""},ySuperscriptYOffset:{valid:!0,tip:""},yStrikeoutSize:{valid:!0,tip:""},yStrikeoutPosition:{valid:!0,tip:""},sFamilyClass:{valid:!0,tip:""},achVendID:{valid:!0,tip:""},usMaxContext:{valid:!0,tip:""},usLowerOpticalPointSize:{valid:!0,tip:""},usUpperOpticalPointSize:{valid:!0,tip:""}}),g=(re,ue)=>{switch(re){case"version":{const le=validators.uint16(ue);let de="";le||(n.value==="zh"?de="uint16":n.value==="en"&&(de="Invalid format: uint16 required")),r.value.version.valid=le,r.value.version.tip=de;break}case"usWeightClass":{const le=validators.uint16(ue);let de="";le||(n.value==="zh"?de="uint16":n.value==="en"&&(de="Invalid format: uint16 required")),r.value.usWeightClass.valid=le,r.value.usWeightClass.tip=de;break}case"usWidthClass":{const le=validators.uint16(ue);let de="";le||(n.value==="zh"?de="uint16":n.value==="en"&&(de="Invalid format: uint16 required")),r.value.usWidthClass.valid=le,r.value.usWidthClass.tip=de;break}case"fsType":{const le=validators.uint16(ue);let de="";le||(n.value==="zh"?de="":n.value==="en"&&(de="Invalid format")),r.value.fsType.valid=le,r.value.fsType.tip=de;break}case"ySubscriptXSize":{const le=validators.FWORD(ue);let de="";le||(n.value==="zh"?de="FWORD":n.value==="en"&&(de="Invalid format: FWORD required")),r.value.ySubscriptXSize.valid=le,r.value.ySubscriptXSize.tip=de;break}case"ySubscriptYSize":{const le=validators.FWORD(ue);let de="";le||(n.value==="zh"?de="FWORD":n.value==="en"&&(de="Invalid format: FWORD required")),r.value.ySubscriptYSize.valid=le,r.value.ySubscriptYSize.tip=de;break}case"ySubscriptXOffset":{const le=validators.FWORD(ue);let de="";le||(n.value==="zh"?de="FWORD":n.value==="en"&&(de="Invalid format: FWORD required")),r.value.ySubscriptXOffset.valid=le,r.value.ySubscriptXOffset.tip=de;break}case"ySubscriptYOffset":{const le=validators.FWORD(ue);let de="";le||(n.value==="zh"?de="FWORD":n.value==="en"&&(de="Invalid format: FWORD required")),r.value.ySubscriptYOffset.valid=le,r.value.ySubscriptYOffset.tip=de;break}case"ySuperscriptXSize":{const le=validators.FWORD(ue);let de="";le||(n.value==="zh"?de="FWORD":n.value==="en"&&(de="Invalid format: FWORD required")),r.value.ySuperscriptXSize.valid=le,r.value.ySuperscriptXSize.tip=de;break}case"ySuperscriptYSize":{const le=validators.FWORD(ue);let de="";le||(n.value==="zh"?de="FWORD":n.value==="en"&&(de="Invalid format: FWORD required")),r.value.ySuperscriptYSize.valid=le,r.value.ySuperscriptYSize.tip=de;break}case"ySuperscriptXOffset":{const le=validators.FWORD(ue);let de="";le||(n.value==="zh"?de="FWORD":n.value==="en"&&(de="Invalid format: FWORD required")),r.value.ySuperscriptXOffset.valid=le,r.value.ySuperscriptXOffset.tip=de;break}case"ySuperscriptYOffset":{const le=validators.FWORD(ue);let de="";le||(n.value==="zh"?de="FWORD":n.value==="en"&&(de="Invalid format: FWORD required")),r.value.ySuperscriptXOffset.valid=le,r.value.ySuperscriptYOffset.tip=de;break}case"yStrikeoutSize":{const le=validators.FWORD(ue);let de="";le||(n.value==="zh"?de="FWORD":n.value==="en"&&(de="Invalid format: FWORD required")),r.value.yStrikeoutSize.valid=le,r.value.yStrikeoutSize.tip=de;break}case"yStrikeoutPosition":{const le=validators.FWORD(ue);let de="";le||(n.value==="zh"?de="FWORD":n.value==="en"&&(de="Invalid format: FWORD required")),r.value.yStrikeoutPosition.valid=le,r.value.yStrikeoutPosition.tip=de;break}case"sFamilyClass":{const le=validators.int16(ue);let de="";le||(n.value==="zh"?de="int16":n.value==="en"&&(de="Invalid format: int16 required")),r.value.sFamilyClass.valid=le,r.value.sFamilyClass.tip=de;break}case"achVendID":{const le=validators.Tag(ue);let de="";le||(n.value==="zh"?de="Tag achVendID":n.value==="en"&&(de="Invalid format: Tag achVendID required")),r.value.achVendID.valid=le,r.value.achVendID.tip=de;break}case"usMaxContext":{const le=validators.uint16(ue);let de="";le||(n.value==="zh"?de="uint16":n.value==="en"&&(de="Invalid format: uint16 required")),r.value.usMaxContext.valid=le,r.value.usMaxContext.tip=de;break}case"usLowerOpticalPointSize":{const le=validators.uint16(ue);let de="";le||(n.value==="zh"?de="int16":n.value==="en"&&(de="Invalid format: int16 required")),r.value.usLowerOpticalPointSize.valid=le,r.value.usLowerOpticalPointSize.tip=de;break}case"usUpperOpticalPointSize":{const le=validators.uint16(ue);let de="";le||(n.value==="zh"?de="int16":n.value==="en"&&(de="Invalid format: int16 required")),r.value.usUpperOpticalPointSize.valid=le,r.value.usUpperOpticalPointSize.tip=de;break}}},y={version:"",usWeightClass:"Weight 11000 400Regular700Bold",usWidthClass:" 1Ultra-condensed 9Ultra-expanded",fsType:"",ySubscriptXSize:"",ySubscriptYSize:"",ySubscriptXOffset:" X ",ySubscriptYOffset:" Y ",ySuperscriptXSize:"",ySuperscriptYSize:"",ySuperscriptXOffset:" X ",ySuperscriptYOffset:" Y ",yStrikeoutSize:"",yStrikeoutPosition:"",sFamilyClass:" SerifSans-serif",panose:" PANOSE ",achVendID:" 4 ",fsSelection:" ItalicBoldRegular",usMaxContext:"",usLowerOpticalPointSize:"",usUpperOpticalPointSize:""},k=[{name:"Family Type ( 1)",description:"",range:"0-11"},{name:"Serif Style ( 2)",description:"",range:"0-5"},{name:"Weight ( 3)",description:"",range:"0-9"},{name:"Proportion ( 4)",description:"",range:"0-5"},{name:"Contrast ( 5)",description:"",range:"0-5"},{name:"Stroke Variation ( 6)",description:"",range:"0-3"},{name:"Arm Style ( 7)",description:"",range:"0-3"},{name:"Letterform ( 8)",description:"",range:"0-2"},{name:"Midline ( 9)",description:"",range:"0-2"},{name:"X-height ( 10)",description:' X  "x"X ',range:"0-5 X "}],$=[{name:"Italic",description:""},{name:"Underscore",description:""},{name:"Negative",description:""},{name:"Outlined",description:""},{name:"Strikeout",description:""},{name:"Bold",description:""},{name:"Regular",description:""},{name:"UseTypoMetrics",description:" OS/2  sTypoAscender  sTypoDescender"},{name:"WWS",description:"Weight, Width, Slope"},{name:"Oblique",description:" Italic "}],V={version:"Table version number",usWeightClass:"Font weight (11000 range, e.g. 400=Regular, 700=Bold)",usWidthClass:"Font width classification (1=Ultra-condensed to 9=Ultra-expanded)",fsType:"Font embedding licensing permissions (e.g., print-only embedding restrictions)",ySubscriptXSize:"Recommended horizontal size for subscript characters",ySubscriptYSize:"Recommended vertical size for subscript characters",ySubscriptXOffset:"X-axis offset from baseline for subscript positioning",ySubscriptYOffset:"Y-axis offset from baseline for subscript positioning",ySuperscriptXSize:"Recommended horizontal size for superscript characters",ySuperscriptYSize:"Recommended vertical size for superscript characters",ySuperscriptXOffset:"X-axis offset from baseline for superscript positioning",ySuperscriptYOffset:"Y-axis offset from baseline for superscript positioning",yStrikeoutSize:"Strikeout stroke thickness",yStrikeoutPosition:"Vertical position of strikeout relative to baseline",sFamilyClass:"Font family classification (e.g., Serif/Sans-serif design categories)",panose:"PANOSE classification system for visual font characteristics",achVendID:"4-character font vendor identifier",fsSelection:"Font style flags (bitmask for Italic/Bold/Regular etc.)",usMaxContext:"Maximum context length required for glyph substitution",usLowerOpticalPointSize:"Minimum recommended optical size for this font",usUpperOpticalPointSize:"Maximum recommended optical size for this font"},L=[{name:"Family Type (Byte 1)",description:"Font classification category (e.g., Sans-serif, Serif, Monospace)",range:"Range: 0-11 (No Fit/Text Display/Decorative etc.)"},{name:"Serif Style (Byte 2)",description:"Serif design characteristics (applies to Serif fonts)",range:"Range: 0-5 (No Serif/Square/Thin etc.)"},{name:"Weight (Byte 3)",description:"Stroke thickness progression from light to black",range:"Range: 0-9 (Light/Medium/Bold etc.)"},{name:"Proportion (Byte 4)",description:"Character width characteristics",range:"Range: 0-5 (Monospace/Proportional/Old Style etc.)"},{name:"Contrast (Byte 5)",description:"Stroke thickness variation between vertical/horizontal elements",range:"Range: 0-5 (No Contrast/Low/Medium/High etc.)"},{name:"Stroke Variation (Byte 6)",description:"Transition between thick/thin stroke elements",range:"Range: 0-3 (No Variation/Gradual/Abrupt etc.)"},{name:"Arm Style (Byte 7)",description:"Terminal treatment of non-curved strokes",range:"Range: 0-3 (Straight/Single Serif etc.)"},{name:"Letterform (Byte 8)",description:"Overall letter shape characteristics",range:"Range: 0-2 (Normal/Contact/Weighted etc.)"},{name:"Midline (Byte 9)",description:"Position of character midline",range:"Range: 0-2 (Standard/High/Low)"},{name:"X-height (Byte 10)",description:"Relative height of lowercase letters (without ascenders/descenders)",range:"Range: 0-5 (Constant/Small/Medium etc.)"}],z=[{name:"Italic",description:"Indicates italic style"},{name:"Underscore",description:"Font contains underline metadata (rarely used)"},{name:"Negative",description:"Reverse-video outline effect (white foreground fill)"},{name:"Outlined",description:"Font uses outline effect styling"},{name:"Strikeout",description:"Font contains strikeout metadata"},{name:"Bold",description:"Indicates bold weight style"},{name:"Regular",description:"Base style flag (non-italic/non-bold)"},{name:"UseTypoMetrics",description:"Use OS/2 tables sTypoAscender/sTypoDescender for layout"},{name:"WWS",description:"Font follows Weight-Width-Slope naming scheme"},{name:"Oblique",description:"Mechanical slant style (distinct from italic)"}],j=computed(()=>n.value==="zh"?y:n.value==="en"?V:y),ae=computed(()=>n.value==="zh"?k:n.value==="en"?L:k),oe=computed(()=>n.value==="zh"?$:n.value==="en"?z:$);return(re,ue)=>{const le=resolveComponent("el-input-number"),de=resolveComponent("QuestionFilled"),he=resolveComponent("el-icon"),_e=resolveComponent("el-tooltip"),xe=resolveComponent("el-input"),Ne=resolveComponent("el-checkbox"),$e=resolveComponent("el-scrollbar");return openBlock(),createBlock($e,{height:"460px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$r,[_hoisted_2$q,createBaseVNode("div",_hoisted_3$i,[createVNode(le,{modelValue:unref(os2_data).version,"onUpdate:modelValue":ue[0]||(ue[0]=Ce=>unref(os2_data).version=Ce),onChange:ue[1]||(ue[1]=Ce=>g("version",Ce)),controls:!1,precision:0,disabled:""},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.version,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_4$d,toDisplayString$1(r.value.version.tip),1)])]),createBaseVNode("div",_hoisted_5$9,[_hoisted_6$8,createBaseVNode("div",_hoisted_7$8,[createVNode(le,{modelValue:unref(os2_data).usWeightClass,"onUpdate:modelValue":ue[2]||(ue[2]=Ce=>unref(os2_data).usWeightClass=Ce),onChange:ue[3]||(ue[3]=Ce=>g("usWeightClass",Ce)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.usWeightClass,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_8$8,toDisplayString$1(r.value.usWeightClass.tip),1)])]),createBaseVNode("div",_hoisted_9$8,[_hoisted_10$8,createBaseVNode("div",_hoisted_11$8,[createVNode(le,{modelValue:unref(os2_data).usWidthClass,"onUpdate:modelValue":ue[4]||(ue[4]=Ce=>unref(os2_data).usWidthClass=Ce),onChange:ue[5]||(ue[5]=Ce=>g("usWidthClass",Ce)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.usWidthClass,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_12$8,toDisplayString$1(r.value.usWidthClass.tip),1)])]),createBaseVNode("div",_hoisted_13$6,[_hoisted_14$5,createBaseVNode("div",_hoisted_15$3,[createVNode(le,{modelValue:unref(os2_data).fsType,"onUpdate:modelValue":ue[6]||(ue[6]=Ce=>unref(os2_data).fsType=Ce),onChange:ue[7]||(ue[7]=Ce=>g("fsType",Ce)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.fsType,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_16$3,toDisplayString$1(r.value.fsType.tip),1)])]),createBaseVNode("div",_hoisted_17$2,[_hoisted_18$1,createBaseVNode("div",_hoisted_19$1,[createVNode(le,{modelValue:unref(os2_data).ySubscriptXSize,"onUpdate:modelValue":ue[8]||(ue[8]=Ce=>unref(os2_data).ySubscriptXSize=Ce),onChange:ue[9]||(ue[9]=Ce=>g("ySubscriptXSize",Ce)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.ySubscriptXSize,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_20$1,toDisplayString$1(r.value.ySubscriptXSize.tip),1)])]),createBaseVNode("div",_hoisted_21,[_hoisted_22,createBaseVNode("div",_hoisted_23,[createVNode(le,{modelValue:unref(os2_data).ySubscriptYSize,"onUpdate:modelValue":ue[10]||(ue[10]=Ce=>unref(os2_data).ySubscriptYSize=Ce),onChange:ue[11]||(ue[11]=Ce=>g("ySubscriptYSize",Ce)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.ySubscriptYSize,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_24,toDisplayString$1(r.value.ySubscriptYSize.tip),1)])]),createBaseVNode("div",_hoisted_25,[_hoisted_26,createBaseVNode("div",_hoisted_27,[createVNode(le,{modelValue:unref(os2_data).ySubscriptXOffset,"onUpdate:modelValue":ue[12]||(ue[12]=Ce=>unref(os2_data).ySubscriptXOffset=Ce),onChange:ue[13]||(ue[13]=Ce=>g("ySubscriptXOffset",Ce)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.ySubscriptXOffset,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_28,toDisplayString$1(r.value.ySubscriptXOffset.tip),1)])]),createBaseVNode("div",_hoisted_29,[_hoisted_30,createBaseVNode("div",_hoisted_31,[createVNode(le,{modelValue:unref(os2_data).ySubscriptXOffset,"onUpdate:modelValue":ue[14]||(ue[14]=Ce=>unref(os2_data).ySubscriptXOffset=Ce),onChange:ue[15]||(ue[15]=Ce=>g("ySubscriptYOffset",Ce)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.ySubscriptYOffset,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_32,toDisplayString$1(r.value.ySubscriptYOffset.tip),1)])]),createBaseVNode("div",_hoisted_33,[_hoisted_34,createBaseVNode("div",_hoisted_35,[createVNode(le,{modelValue:unref(os2_data).ySuperscriptXSize,"onUpdate:modelValue":ue[16]||(ue[16]=Ce=>unref(os2_data).ySuperscriptXSize=Ce),onChange:ue[17]||(ue[17]=Ce=>g("ySuperscriptXSize",Ce)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.ySuperscriptXSize,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_36,toDisplayString$1(r.value.ySuperscriptXSize.tip),1)])]),createBaseVNode("div",_hoisted_37,[_hoisted_38,createBaseVNode("div",_hoisted_39,[createVNode(le,{modelValue:unref(os2_data).ySuperscriptYSize,"onUpdate:modelValue":ue[18]||(ue[18]=Ce=>unref(os2_data).ySuperscriptYSize=Ce),onChange:ue[19]||(ue[19]=Ce=>g("ySuperscriptYSize",Ce)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.ySuperscriptYSize,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_40,toDisplayString$1(r.value.ySuperscriptYSize.tip),1)])]),createBaseVNode("div",_hoisted_41,[_hoisted_42,createBaseVNode("div",_hoisted_43,[createVNode(le,{modelValue:unref(os2_data).ySuperscriptXOffset,"onUpdate:modelValue":ue[20]||(ue[20]=Ce=>unref(os2_data).ySuperscriptXOffset=Ce),onChange:ue[21]||(ue[21]=Ce=>g("ySuperscriptXOffset",Ce)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.ySuperscriptXOffset,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_44,toDisplayString$1(r.value.ySuperscriptXOffset.tip),1)])]),createBaseVNode("div",_hoisted_45,[_hoisted_46,createBaseVNode("div",_hoisted_47,[createVNode(le,{modelValue:unref(os2_data).ySuperscriptYOffset,"onUpdate:modelValue":ue[22]||(ue[22]=Ce=>unref(os2_data).ySuperscriptYOffset=Ce),onChange:ue[23]||(ue[23]=Ce=>g("ySuperscriptYOffset",Ce)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.ySuperscriptYOffset,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_48,toDisplayString$1(r.value.ySuperscriptYOffset.tip),1)])]),createBaseVNode("div",_hoisted_49,[_hoisted_50,createBaseVNode("div",_hoisted_51,[createVNode(le,{modelValue:unref(os2_data).yStrikeoutSize,"onUpdate:modelValue":ue[24]||(ue[24]=Ce=>unref(os2_data).yStrikeoutSize=Ce),onChange:ue[25]||(ue[25]=Ce=>g("yStrikeoutSize",Ce)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.yStrikeoutSize,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_52,toDisplayString$1(r.value.yStrikeoutSize.tip),1)])]),createBaseVNode("div",_hoisted_53,[_hoisted_54,createBaseVNode("div",_hoisted_55,[createVNode(le,{modelValue:unref(os2_data).yStrikeoutPosition,"onUpdate:modelValue":ue[26]||(ue[26]=Ce=>unref(os2_data).yStrikeoutPosition=Ce),onChange:ue[27]||(ue[27]=Ce=>g("yStrikeoutPosition",Ce)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.yStrikeoutPosition,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_56,toDisplayString$1(r.value.yStrikeoutPosition.tip),1)])]),createBaseVNode("div",_hoisted_57,[_hoisted_58,createBaseVNode("div",_hoisted_59,[createVNode(le,{modelValue:unref(os2_data).sFamilyClass,"onUpdate:modelValue":ue[28]||(ue[28]=Ce=>unref(os2_data).sFamilyClass=Ce),onChange:ue[29]||(ue[29]=Ce=>g("sFamilyClass",Ce)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.sFamilyClass,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_60,toDisplayString$1(r.value.sFamilyClass.tip),1)])]),createBaseVNode("div",_hoisted_61,[_hoisted_62,createBaseVNode("div",_hoisted_63,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(os2_data).panose,(Ce,Ie)=>(openBlock(),createElementBlock("div",_hoisted_64,[createBaseVNode("div",_hoisted_65,[createVNode(le,{modelValue:unref(os2_data).panose[Ie],"onUpdate:modelValue":ze=>unref(os2_data).panose[Ie]=ze,controls:!1,precision:0,style:{width:"80px"}},null,8,["modelValue","onUpdate:modelValue"])]),createVNode(_e,{class:"tips",effect:"dark",content:ae.value[Ie].range,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:2},1032,["content"]),createBaseVNode("div",_hoisted_66,toDisplayString$1(ae.value[Ie].description),1)]))),256))])]),createBaseVNode("div",_hoisted_67,[_hoisted_68,createBaseVNode("div",_hoisted_69,[createVNode(xe,{modelValue:unref(os2_data).yStrikeoutPosition,"onUpdate:modelValue":ue[30]||(ue[30]=Ce=>unref(os2_data).yStrikeoutPosition=Ce),onChange:ue[31]||(ue[31]=Ce=>g("yStrikeoutPosition",Ce)),controls:!1},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.achVendID,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_70,toDisplayString$1(r.value.achVendID.tip),1)])]),createBaseVNode("div",_hoisted_71,[_hoisted_72,createBaseVNode("div",_hoisted_73,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(os2_data).fsSelection,(Ce,Ie)=>(openBlock(),createElementBlock("div",_hoisted_74,[createBaseVNode("div",_hoisted_75,[createVNode(Ne,{modelValue:unref(os2_data).fsSelection[Ie],"onUpdate:modelValue":ze=>unref(os2_data).fsSelection[Ie]=ze},null,8,["modelValue","onUpdate:modelValue"])]),createBaseVNode("div",_hoisted_76,"Bit-"+toDisplayString$1(Ie),1),createBaseVNode("div",_hoisted_77,toDisplayString$1(oe.value[Ie].description),1)]))),256))])]),createBaseVNode("div",_hoisted_78,[_hoisted_79,createBaseVNode("div",_hoisted_80,[createVNode(le,{modelValue:unref(os2_data).usMaxContext,"onUpdate:modelValue":ue[32]||(ue[32]=Ce=>unref(os2_data).usMaxContext=Ce),onChange:ue[33]||(ue[33]=Ce=>g("usMaxContext",Ce)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.usMaxContext,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_81,toDisplayString$1(r.value.usMaxContext.tip),1)])]),createBaseVNode("div",_hoisted_82,[_hoisted_83,createBaseVNode("div",_hoisted_84,[createVNode(le,{modelValue:unref(os2_data).usLowerOpticalPointSize,"onUpdate:modelValue":ue[34]||(ue[34]=Ce=>unref(os2_data).usLowerOpticalPointSize=Ce),onChange:ue[35]||(ue[35]=Ce=>g("usLowerOpticalPointSize",Ce)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.usLowerOpticalPointSize,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_85,toDisplayString$1(r.value.usLowerOpticalPointSize.tip),1)])]),createBaseVNode("div",_hoisted_86,[_hoisted_87,createBaseVNode("div",_hoisted_88,[createVNode(le,{modelValue:unref(os2_data).usUpperOpticalPointSize,"onUpdate:modelValue":ue[36]||(ue[36]=Ce=>unref(os2_data).usUpperOpticalPointSize=Ce),onChange:ue[37]||(ue[37]=Ce=>g("usUpperOpticalPointSize",Ce)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.usUpperOpticalPointSize,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_89,toDisplayString$1(r.value.usUpperOpticalPointSize.tip),1)])])]),_:1})}}}),Os2Panel=_export_sfc(_sfc_main$s,[["__scopeId","data-v-fdf651ef"]]),_hoisted_1$q={class:"dialog-footer"},_sfc_main$r=defineComponent({__name:"FontSettingsDialog",setup(e){const{tm:n,t:r}=useI18n();onMounted(()=>{});const g=()=>{setFontSettings2DialogVisible(!1)},y=()=>{selectedFile.value.fontSettings&&(selectedFile.value.fontSettings.tables={head:head_data.value,hhea:hhea_data.value,os2:os2_data.value,name:name_data.value,post:post_data.value}),setFontSettings2DialogVisible(!1)};return(k,$)=>{const V=resolveComponent("el-tab-pane"),L=resolveComponent("el-tabs"),z=resolveComponent("el-button"),j=resolveComponent("el-dialog");return openBlock(),createBlock(j,{"model-value":unref(fontSettings2DialogVisible),class:"font-settings-dialog",title:unref(n)("dialogs.fontSettingsDialog.title"),width:"800px",style:{height:"640px"},"before-close":g},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_1$q,[createVNode(z,{onPointerdown:$[0]||($[0]=ae=>unref(setFontSettings2DialogVisible)(!1))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.fontSettingsDialog.cancel")),1)]),_:1}),createVNode(z,{type:"primary",onPointerdown:$[1]||($[1]=()=>y())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.fontSettingsDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createVNode(L,{"tab-position":"left",style:{height:"460px"},class:"table-tabs"},{default:withCtx(()=>[createVNode(V,{label:"head"},{default:withCtx(()=>[createVNode(HeadPanel)]),_:1}),createVNode(V,{label:"hhea"},{default:withCtx(()=>[createVNode(HheaPanel)]),_:1}),createVNode(V,{label:"name"},{default:withCtx(()=>[createVNode(NamePanel)]),_:1}),createVNode(V,{label:"os_2"},{default:withCtx(()=>[createVNode(Os2Panel)]),_:1}),createVNode(V,{label:"post"},{default:withCtx(()=>[createVNode(PostPanel)]),_:1})]),_:1})]),_:1},8,["model-value","title"])}}}),_hoisted_1$p={class:"settings-panel"},_hoisted_2$p={class:"background-style-wrap"},_hoisted_3$h={class:"title"},_hoisted_4$c={class:"form-item"},_hoisted_5$8={class:"form-label"},_hoisted_6$7={class:"grid-style-wrap"},_hoisted_7$7={class:"title"},_hoisted_8$7={class:"form-item"},_hoisted_9$7={class:"form-label"},_hoisted_10$7={class:"form-item"},_hoisted_11$7={class:"form-label"},_hoisted_12$7={class:"font-render-style-wrap"},_hoisted_13$5={class:"title"},_hoisted_14$4={class:"form-item"},_hoisted_15$2={class:"form-label"},_hoisted_16$2={class:"dialog-footer"},_sfc_main$q=defineComponent({__name:"PreferenceSettingsDialog",setup(e){const{tm:n,t:r}=useI18n(),g=()=>{switch(V.value){case"none":setGridType(GridType.None);break;case"mesh":setGridType(GridType.Mesh);break;case"mi":setGridType(GridType.Mi);break;case"layout":setGridType(GridType.LayoutGrid);break}switch(k.value){case"color":setBackgroundType(BackgroundType.Color);break;case"transparent":setBackgroundType(BackgroundType.Transparent);break}$.value&&setBackgroundColor($.value),L.value&&V.value==="mesh"&&setGridPrecision(L.value),setPreferenceSettingsDialogVisible(!1)},y=()=>{setPreferenceSettingsDialogVisible(!1)},k=ref("transparent"),$=ref("#FFFFFF"),V=ref("none"),L=ref(10);return(z,j)=>{const ae=resolveComponent("el-radio"),oe=resolveComponent("el-color-picker"),re=resolveComponent("el-radio-group"),ue=resolveComponent("el-form"),le=resolveComponent("el-input-number"),de=resolveComponent("el-button"),he=resolveComponent("el-dialog");return openBlock(),createBlock(he,{"model-value":unref(preferenceSettingsDialogVisible),class:"preference-settings-dialog",title:unref(n)("dialogs.preferenceDialog.title"),width:"360px","before-close":y},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_16$2,[createVNode(de,{onPointerdown:j[5]||(j[5]=_e=>unref(setPreferenceSettingsDialogVisible)(!1))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.preferenceDialog.cancel")),1)]),_:1}),createVNode(de,{type:"primary",onPointerdown:j[6]||(j[6]=()=>g())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.preferenceDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$p,[createBaseVNode("div",_hoisted_2$p,[createBaseVNode("div",_hoisted_3$h,toDisplayString$1(unref(r)("panels.settingsPanel.background.background")),1),createVNode(ue,{class:"background-form","label-width":"80px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_4$c,[createBaseVNode("div",_hoisted_5$8,toDisplayString$1(unref(r)("panels.settingsPanel.background.style")),1),createVNode(re,{modelValue:k.value,"onUpdate:modelValue":j[1]||(j[1]=_e=>k.value=_e)},{default:withCtx(()=>[createVNode(ae,{label:"color"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.background.color")),1)]),_:1}),k.value==="color"?(openBlock(),createBlock(oe,{key:0,class:"color-picker",style:{marginLeft:"-20px",marginRight:"20px"},modelValue:$.value,"onUpdate:modelValue":j[0]||(j[0]=_e=>$.value=_e),id:"backgroundColor"},null,8,["modelValue"])):createCommentVNode("",!0),createVNode(ae,{label:"transparent"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.background.transparent")),1)]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),createBaseVNode("div",_hoisted_6$7,[createBaseVNode("div",_hoisted_7$7,toDisplayString$1(unref(r)("panels.settingsPanel.mesh.mesh")),1),createVNode(ue,{class:"grid-form","label-width":"80px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_8$7,[createBaseVNode("div",_hoisted_9$7,toDisplayString$1(unref(r)("panels.settingsPanel.mesh.style")),1),createVNode(re,{modelValue:V.value,"onUpdate:modelValue":j[2]||(j[2]=_e=>V.value=_e),id:"gridStyle"},{default:withCtx(()=>[createVNode(ae,{label:"none"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.mesh.none")),1)]),_:1}),createVNode(ae,{label:"mesh"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.mesh.mesh")),1)]),_:1}),createVNode(ae,{label:"mi"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.mesh.mi")),1)]),_:1}),createVNode(ae,{label:"layout"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.mesh.layout")),1)]),_:1})]),_:1},8,["modelValue"])]),withDirectives(createBaseVNode("div",_hoisted_10$7,[createBaseVNode("div",_hoisted_11$7,toDisplayString$1(unref(r)("panels.settingsPanel.mesh.precision")),1),createVNode(le,{modelValue:L.value,"onUpdate:modelValue":j[3]||(j[3]=_e=>L.value=_e),min:10,max:50,precision:2},null,8,["modelValue"])],512),[[vShow,V.value==="mesh"]])]),_:1})]),createBaseVNode("div",_hoisted_12$7,[createBaseVNode("div",_hoisted_13$5,toDisplayString$1(unref(r)("panels.settingsPanel.render.render")),1),createVNode(ue,{class:"font-render-form","label-width":"80px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_14$4,[createBaseVNode("div",_hoisted_15$2,toDisplayString$1(unref(r)("panels.settingsPanel.render.title")),1),createVNode(re,{modelValue:unref(fontRenderStyle),"onUpdate:modelValue":j[4]||(j[4]=_e=>isRef(fontRenderStyle)?fontRenderStyle.value=_e:null),id:"renderStyle"},{default:withCtx(()=>[createVNode(ae,{label:"contour"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.render.contour")),1)]),_:1}),createVNode(ae,{label:"black"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.render.black")),1)]),_:1}),createVNode(ae,{label:"color"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.render.color")),1)]),_:1})]),_:1},8,["modelValue"])])]),_:1})])])]),_:1},8,["model-value","title"])}}}),_hoisted_1$o={class:"form-wrapper"},_hoisted_2$o={class:"dialog-footer"},_sfc_main$p=defineComponent({__name:"SetAsGlobalParamDialog",setup(e){const{tm:n,t:r}=useI18n(),g=ref(""),y=()=>{setSetAsGlobalParamDialogVisible(!1)},k=()=>{if(selectedParam.value){const $=clone(selectedParam.value);if($.uuid=genUUID(),$.ratio="",$.ratioed=!1,$.name=g.value,constants.value.push($),constantsMap.update(constants.value),selectedParamType.value==="glyph_components"){for(let V=0;V<selectedComponent$1.value.value.parameters.parameters.length;V++)if(selectedComponent$1.value.value.parameters.parameters[V].uuid===selectedParam.value.uuid){selectedComponent$1.value.value.parameters.parameters[V].value=$.uuid,selectedComponent$1.value.value.parameters.parameters[V].type=ParameterType.Constant,selectedComponent$1.value.value.system_script&&selectedComponent$1.value.value.system_script[selectedComponent$1.value.value.parameters.parameters[V].name]&&delete selectedComponent$1.value.value.system_script[selectedComponent$1.value.value.parameters.parameters[V].name];const L=getGlyphType(editGlyphUUID.value);constantGlyphMap.get($.uuid)||constantGlyphMap.set($.uuid,[]),constantGlyphMap.get($.uuid).push({constantType:ConstantType.Component,glyphType:convertGlyphType(L),parameterUUID:selectedParam.value.uuid,parentUUID:editGlyphUUID.value,glyphUUID:selectedComponent$1.value.uuid})}}else if(selectedParamType.value==="character_components")for(let V=0;V<selectedComponent.value.value.parameters.parameters.length;V++)selectedComponent.value.value.parameters.parameters[V].uuid===selectedParam.value.uuid&&(selectedComponent.value.value.parameters.parameters[V].value=$.uuid,selectedComponent.value.value.parameters.parameters[V].type=ParameterType.Constant,selectedComponent.value.value.system_script&&selectedComponent.value.value.system_script[selectedComponent.value.value.parameters.parameters[V].name]&&delete selectedComponent.value.value.system_script[selectedComponent.value.value.parameters.parameters[V].name],constantGlyphMap.get($.uuid)||constantGlyphMap.set($.uuid,[]),constantGlyphMap.get($.uuid).push({constantType:ConstantType.Component,glyphType:GlyphType.Char,parameterUUID:selectedParam.value.uuid,parentUUID:editCharacterFileUUID.value,glyphUUID:selectedComponent.value.uuid}));else if(selectedParamType.value==="glyph_params"){for(let V=0;V<editGlyph.value.parameters.parameters.length;V++)if(editGlyph.value.parameters.parameters[V].uuid===selectedParam.value.uuid){editGlyph.value.parameters.parameters[V].value=$.uuid,editGlyph.value.parameters.parameters[V].type=ParameterType.Constant,editGlyph.value.value.system_script&&editGlyph.value.value.system_script[editGlyph.value.value.parameters.parameters[V].name]&&delete editGlyph.value.value.system_script[editGlyph.value.value.parameters.parameters[V].name];const L=getGlyphType(editGlyphUUID.value);constantGlyphMap.get($.uuid)||constantGlyphMap.set($.uuid,[]),constantGlyphMap.get($.uuid).push({constantType:ConstantType.Parameter,glyphType:convertGlyphType(L),parameterUUID:selectedParam.value.uuid,glyphUUID:editGlyphUUID.value})}}}g.value="",selectedParam.value=null,setSetAsGlobalParamDialogVisible(!1)};return($,V)=>{const L=resolveComponent("el-input"),z=resolveComponent("el-form-item"),j=resolveComponent("el-form"),ae=resolveComponent("el-button"),oe=resolveComponent("el-dialog");return openBlock(),createBlock(oe,{modelValue:unref(setAsGlobalParamDialogVisible),"onUpdate:modelValue":V[1]||(V[1]=re=>isRef(setAsGlobalParamDialogVisible)?setAsGlobalParamDialogVisible.value=re:null),title:unref(n)("dialogs.setAsGlobalParamDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$o,[createVNode(ae,{onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.setAsGlobalParamDialog.cancel")),1)]),_:1}),createVNode(ae,{type:"primary",onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.setAsGlobalParamDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$o,[createVNode(j,{"label-width":"80px"},{default:withCtx(()=>[createVNode(z,{label:unref(n)("dialogs.setAsGlobalParamDialog.paramName")},{default:withCtx(()=>[createVNode(L,{modelValue:g.value,"onUpdate:modelValue":V[0]||(V[0]=re=>g.value=re)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})])]),_:1},8,["modelValue","title"])}}}),_hoisted_1$n={class:"form-wrapper"},_hoisted_2$n={class:"dialog-footer"},_sfc_main$o=defineComponent({__name:"SelectGlobalParamDialog",setup(e){const{tm:n,t:r}=useI18n(),g=ref(""),y=()=>{setSelectGlobalParamDialogVisible(!1)},k=()=>{if(g.value&&selectedParam.value){if(selectedParamType.value==="glyph_components")for(let $=0;$<selectedComponent$1.value.value.parameters.parameters.length;$++){if(selectedComponent$1.value.value.parameters.parameters[$].uuid===selectedParam.value.uuid){selectedComponent$1.value.value.parameters.parameters[$].value=g.value,selectedComponent$1.value.value.parameters.parameters[$].type=ParameterType.Constant,selectedComponent$1.value.value.parameters.parameters[$].ratio="",selectedComponent$1.value.value.parameters.parameters[$].ratioed=!1,selectedComponent$1.value.value.system_script&&selectedComponent$1.value.value.system_script[selectedComponent$1.value.value.parameters.parameters[$].name]&&delete selectedComponent$1.value.value.system_script[selectedComponent$1.value.value.parameters.parameters[$].name];const V=getGlyphType(editGlyphUUID.value);constantGlyphMap.get(g.value)||constantGlyphMap.set(g.value,[]),constantGlyphMap.get(g.value).push({constantType:ConstantType.Component,glyphType:convertGlyphType(V),parameterUUID:selectedParam.value.uuid,parentUUID:editGlyphUUID.value,glyphUUID:selectedComponent$1.value.uuid})}executeScript(editGlyph.value),emitter.emit("renderGlyphPreviewCanvasByUUID",editGlyph.value.uuid),emitter.emit("renderGlyph")}else if(selectedParamType.value==="character_components")for(let $=0;$<selectedComponent.value.value.parameters.parameters.length;$++)selectedComponent.value.value.parameters.parameters[$].uuid===selectedParam.value.uuid&&(selectedComponent.value.value.parameters.parameters[$].value=g.value,selectedComponent.value.value.parameters.parameters[$].type=ParameterType.Constant,selectedComponent.value.value.parameters.parameters[$].ratio="",selectedComponent.value.value.parameters.parameters[$].ratioed=!1,selectedComponent.value.value.system_script&&selectedComponent.value.value.system_script[selectedComponent.value.value.parameters.parameters[$].name]&&delete selectedComponent.value.value.system_script[selectedComponent.value.value.parameters.parameters[$].name],constantGlyphMap.get(g.value)||constantGlyphMap.set(g.value,[]),constantGlyphMap.get(g.value).push({constantType:ConstantType.Component,glyphType:GlyphType.Char,parameterUUID:selectedParam.value.uuid,parentUUID:editCharacterFileUUID.value,glyphUUID:selectedComponent.value.uuid}),selectedComponent.value.value.type==="glyph"&&executeScript(selectedComponent.value.value),emitter.emit("renderPreviewCanvasByUUID",editCharacterFile.value.uuid),emitter.emit("renderCharacter"));else if(selectedParamType.value==="glyph_params"){for(let $=0;$<editGlyph.value.parameters.parameters.length;$++)if(editGlyph.value.parameters.parameters[$].uuid===selectedParam.value.uuid){editGlyph.value.parameters.parameters[$].value=g.value,editGlyph.value.parameters.parameters[$].type=ParameterType.Constant,editGlyph.value.parameters.parameters[$].ratio="",editGlyph.value.parameters.parameters[$].ratioed=!1,editGlyph.value.value.system_script&&editGlyph.value.value.system_script[editGlyph.value.value.parameters.parameters[$].name]&&delete editGlyph.value.value.system_script[editGlyph.value.value.parameters.parameters[$].name];const V=getGlyphType(editGlyphUUID.value);constantGlyphMap.get(g.value)||constantGlyphMap.set(g.value,[]),constantGlyphMap.get(g.value).push({constantType:ConstantType.Parameter,glyphType:convertGlyphType(V),parameterUUID:selectedParam.value.uuid,glyphUUID:editGlyphUUID.value}),executeScript(editGlyph.value),emitter.emit("renderGlyphPreviewCanvasByUUID",editGlyph.value.uuid),emitter.emit("renderGlyph")}}}g.value="",setSelectGlobalParamDialogVisible(!1)};return($,V)=>{const L=resolveComponent("el-option"),z=resolveComponent("el-select"),j=resolveComponent("el-form-item"),ae=resolveComponent("el-form"),oe=resolveComponent("el-button"),re=resolveComponent("el-dialog");return openBlock(),createBlock(re,{modelValue:unref(selectGlobalParamDialogVisible),"onUpdate:modelValue":V[1]||(V[1]=ue=>isRef(selectGlobalParamDialogVisible)?selectGlobalParamDialogVisible.value=ue:null),title:unref(n)("dialogs.selectGlobalParamDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$n,[createVNode(oe,{onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.selectGlobalParamDialog.cancel")),1)]),_:1}),createVNode(oe,{type:"primary",onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.selectGlobalParamDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$n,[createVNode(ae,{"label-width":"80px"},{default:withCtx(()=>[createVNode(j,{label:unref(n)("dialogs.selectGlobalParamDialog.globalParam")},{default:withCtx(()=>[createVNode(z,{modelValue:g.value,"onUpdate:modelValue":V[0]||(V[0]=ue=>g.value=ue),class:"parameter-const-select"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(constants),ue=>(openBlock(),createBlock(L,{key:ue.uuid,label:ue.name,value:ue.uuid},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})])]),_:1},8,["modelValue","title"])}}}),_hoisted_1$m={class:"form-wrapper"},_hoisted_2$m={class:"dialog-footer"},_sfc_main$n=defineComponent({__name:"TipsDialog",setup(e){const{tm:n,t:r}=useI18n(),g=()=>{tips.value="",setTipsDialogVisible(!1)},y=()=>{tipsDialogConfirmCallback.value&&tipsDialogConfirmCallback.value(),tips.value="",setTipsDialogVisible(!1)};return(k,$)=>{const V=resolveComponent("el-button"),L=resolveComponent("el-dialog");return openBlock(),createBlock(L,{modelValue:unref(tipsDialogVisible),"onUpdate:modelValue":$[0]||($[0]=z=>isRef(tipsDialogVisible)?tipsDialogVisible.value=z:null),title:unref(n)("dialogs.tipsDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$m,[createVNode(V,{onPointerdown:g},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.tipsDialog.cancel")),1)]),_:1}),createVNode(V,{type:"primary",onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.tipsDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$m,toDisplayString$1(unref(tips)),1)]),_:1},8,["modelValue","title"])}}}),tipsDialog=_export_sfc(_sfc_main$n,[["__scopeId","data-v-34919f97"]]),_hoisted_1$l={class:"form-wrapper"},_hoisted_2$l={class:"dialog-footer"},_sfc_main$m=defineComponent({__name:"CloseFileTipDialog",setup(e){const{tm:n,t:r}=useI18n(),g=()=>{setCloseFileTipDialogVisible(!1)},y=()=>{removeFile(files.value[0].uuid),clearCharacterRenderList(),clearGlyphRenderList(Status.GlyphList),clearGlyphRenderList(Status.StrokeGlyphList),clearGlyphRenderList(Status.RadicalGlyphList),clearGlyphRenderList(Status.CompGlyphList),clearSelectionGlyphRenderList(Status.GlyphList),clearSelectionGlyphRenderList(Status.StrokeGlyphList),clearSelectionGlyphRenderList(Status.RadicalGlyphList),clearSelectionGlyphRenderList(Status.CompGlyphList),glyphs.value=[],stroke_glyphs.value=[],radical_glyphs.value=[],comp_glyphs.value=[],setCloseFileTipDialogVisible(!1)};return(k,$)=>{const V=resolveComponent("el-button"),L=resolveComponent("el-dialog");return openBlock(),createBlock(L,{modelValue:unref(closeFileTipDialogVisible),"onUpdate:modelValue":$[0]||($[0]=z=>isRef(closeFileTipDialogVisible)?closeFileTipDialogVisible.value=z:null),title:unref(n)("dialogs.tipsDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$l,[createVNode(V,{onPointerdown:g},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.tipsDialog.cancel")),1)]),_:1}),createVNode(V,{type:"primary",onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.tipsDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$l,toDisplayString$1(unref(r)("dialogs.tipsDialog.tip1")),1)]),_:1},8,["modelValue","title"])}}}),closeFileTipDialog=_export_sfc(_sfc_main$m,[["__scopeId","data-v-e8a5b58a"]]),_hoisted_1$k={class:"form-wrapper"},_hoisted_2$k={class:"dialog-footer"},_sfc_main$l=defineComponent({__name:"SaveFileTipDialog",setup(e){const{tm:n,t:r}=useI18n(),g=()=>{setSaveFileTipDialogVisible(!1)},y=()=>{saveFile(),setSaveFileTipDialogVisible(!1)};return(k,$)=>{const V=resolveComponent("el-button"),L=resolveComponent("el-dialog");return openBlock(),createBlock(L,{modelValue:unref(saveFileTipDialogVisible),"onUpdate:modelValue":$[0]||($[0]=z=>isRef(saveFileTipDialogVisible)?saveFileTipDialogVisible.value=z:null),title:unref(n)("dialogs.tipsDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$k,[createVNode(V,{onPointerdown:g},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.tipsDialog.cancel")),1)]),_:1}),createVNode(V,{type:"primary",onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.tipsDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$k,toDisplayString$1(unref(r)("dialogs.tipsDialog.tip2")),1)]),_:1},8,["modelValue","title"])}}}),saveFileTipDialog=_export_sfc(_sfc_main$l,[["__scopeId","data-v-00af0120"]]),_hoisted_1$j={class:"form-wrapper"},_hoisted_2$j={class:"text"},_hoisted_3$g={class:"dialog-footer"},_sfc_main$k=defineComponent({__name:"SaveDialog",setup(e){const{tm:n,t:r}=useI18n(),g=ref({characters:!0,stroke_glyphs:!0,radical_glyphs:!0,comp_glyphs:!0,glyphs:!0}),y=()=>{setSaveDialogVisible(!1)},k=async()=>{loaded$1.value=0,loading$1.value=!0,total$1.value=selectedFile.value.characterList.length+(g.value.glyphs?glyphs.value.length:0)+(g.value.stroke_glyphs?stroke_glyphs.value.length:0)+(g.value.radical_glyphs?radical_glyphs.value.length:0)+(g.value.comp_glyphs?comp_glyphs.value.length:0);const $=await plainFile(selectedFile.value);let V=[],L=[],z=[],j=[];const ae=async(ue,le)=>{for(let he=0;he<ue.length;he+=100){const _e=ue.slice(he,he+100);await new Promise(xe=>{requestAnimationFrame(()=>{_e.forEach(Ne=>{addLoaded(),le.push(plainGlyph(Ne))}),xe()})})}};g.value.glyphs&&await ae(glyphs.value,V),g.value.stroke_glyphs&&await ae(stroke_glyphs.value,L),g.value.radical_glyphs&&await ae(radical_glyphs.value,z),g.value.comp_glyphs&&await ae(comp_glyphs.value,j);const oe=JSON.stringify({file:$,constants:constants.value,constantGlyphMap:mapToObject(constantGlyphMap),version:1,glyphs:V,stroke_glyphs:L,radical_glyphs:z,comp_glyphs:j}),re=await save({defaultPath:`${selectedFile.value.name}.json`,filters:[{name:"JSON Filter",extensions:["json"]}]});re&&await writeTextFile(re,oe),loading$1.value=!1,setSaveDialogVisible(!1)};return($,V)=>{const L=resolveComponent("el-checkbox"),z=resolveComponent("el-button"),j=resolveComponent("el-dialog");return openBlock(),createBlock(j,{modelValue:unref(saveDialogVisible),"onUpdate:modelValue":V[5]||(V[5]=ae=>isRef(saveDialogVisible)?saveDialogVisible.value=ae:null),title:unref(n)("dialogs.saveDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_3$g,[createVNode(z,{onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.cancel")),1)]),_:1}),createVNode(z,{type:"primary",onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$j,[createBaseVNode("div",_hoisted_2$j,toDisplayString$1(unref(r)("dialogs.exportDialog.exportMsg")),1),createVNode(L,{modelValue:g.value.characters,"onUpdate:modelValue":V[0]||(V[0]=ae=>g.value.characters=ae),class:"item-check",disabled:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.character")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.stroke_glyphs,"onUpdate:modelValue":V[1]||(V[1]=ae=>g.value.stroke_glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.stroke")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.radical_glyphs,"onUpdate:modelValue":V[2]||(V[2]=ae=>g.value.radical_glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.radical")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.comp_glyphs,"onUpdate:modelValue":V[3]||(V[3]=ae=>g.value.comp_glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.comp")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.glyphs,"onUpdate:modelValue":V[4]||(V[4]=ae=>g.value.glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.glyph_comp")),1)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","title"])}}}),saveDialog=_export_sfc(_sfc_main$k,[["__scopeId","data-v-f58d56a8"]]),_hoisted_1$i={class:"form-wrapper"},_hoisted_2$i={class:"text"},_hoisted_3$f={class:"dialog-footer"},_sfc_main$j=defineComponent({__name:"SaveAsDialog",setup(e){const{tm:n,t:r}=useI18n(),g=ref({characters:!0,stroke_glyphs:!0,radical_glyphs:!0,comp_glyphs:!0,glyphs:!0}),y=()=>{setSaveAsDialogVisible(!1)},k=async()=>{loaded$1.value=0,loading$1.value=!0,total$1.value=selectedFile.value.characterList.length+(g.value.glyphs?glyphs.value.length:0)+(g.value.stroke_glyphs?stroke_glyphs.value.length:0)+(g.value.radical_glyphs?radical_glyphs.value.length:0)+(g.value.comp_glyphs?comp_glyphs.value.length:0);const $=await plainFile(selectedFile.value);let V=[],L=[],z=[],j=[];const ae=async(ue,le)=>{for(let he=0;he<ue.length;he+=100){const _e=ue.slice(he,he+100);await new Promise(xe=>{requestAnimationFrame(()=>{_e.forEach(Ne=>{addLoaded(),le.push(plainGlyph(Ne))}),xe()})})}};g.value.glyphs&&await ae(glyphs.value,V),g.value.stroke_glyphs&&await ae(stroke_glyphs.value,L),g.value.radical_glyphs&&await ae(radical_glyphs.value,z),g.value.comp_glyphs&&await ae(comp_glyphs.value,j);const oe=JSON.stringify({file:$,constants:constants.value,constantGlyphMap:mapToObject(constantGlyphMap),version:1,glyphs:V,stroke_glyphs:L,radical_glyphs:z,comp_glyphs:j}),re=await save({defaultPath:`${selectedFile.value.name}.json`,filters:[{name:"JSON Filter",extensions:["json"]}]});re&&await writeTextFile(re,oe),loading$1.value=!1,setSaveAsDialogVisible(!1)};return($,V)=>{const L=resolveComponent("el-checkbox"),z=resolveComponent("el-button"),j=resolveComponent("el-dialog");return openBlock(),createBlock(j,{modelValue:unref(saveAsDialogVisible),"onUpdate:modelValue":V[5]||(V[5]=ae=>isRef(saveAsDialogVisible)?saveAsDialogVisible.value=ae:null),title:unref(n)("dialogs.saveAsDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_3$f,[createVNode(z,{onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.cancel")),1)]),_:1}),createVNode(z,{type:"primary",onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$i,[createBaseVNode("div",_hoisted_2$i,toDisplayString$1(unref(r)("dialogs.exportDialog.exportMsg")),1),createVNode(L,{modelValue:g.value.characters,"onUpdate:modelValue":V[0]||(V[0]=ae=>g.value.characters=ae),class:"item-check",disabled:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.character")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.stroke_glyphs,"onUpdate:modelValue":V[1]||(V[1]=ae=>g.value.stroke_glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.stroke")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.radical_glyphs,"onUpdate:modelValue":V[2]||(V[2]=ae=>g.value.radical_glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.radical")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.comp_glyphs,"onUpdate:modelValue":V[3]||(V[3]=ae=>g.value.comp_glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.comp")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.glyphs,"onUpdate:modelValue":V[4]||(V[4]=ae=>g.value.glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.glyph_comp")),1)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","title"])}}}),saveAsDialog=_export_sfc(_sfc_main$j,[["__scopeId","data-v-ca1d43f0"]]),_hoisted_1$h={class:"form-wrapper"},_hoisted_2$h={class:"text"},_hoisted_3$e={class:"dialog-footer"},_sfc_main$i=defineComponent({__name:"ExportFileDialog",setup(e){const{tm:n,t:r}=useI18n(),g=ref({characters:!0,stroke_glyphs:!0,radical_glyphs:!0,comp_glyphs:!0,glyphs:!0}),y=()=>{setExportDialogVisible(!1)},k=async()=>{loaded$1.value=0,loading$1.value=!0,total$1.value=selectedFile.value.characterList.length+(g.value.glyphs?glyphs.value.length:0)+(g.value.stroke_glyphs?stroke_glyphs.value.length:0)+(g.value.radical_glyphs?radical_glyphs.value.length:0)+(g.value.comp_glyphs?comp_glyphs.value.length:0);const $=await plainFile(selectedFile.value);let V=[],L=[],z=[],j=[];const ae=async(ue,le)=>{for(let he=0;he<ue.length;he+=100){const _e=ue.slice(he,he+100);await new Promise(xe=>{requestAnimationFrame(()=>{_e.forEach(Ne=>{addLoaded(),le.push(plainGlyph(Ne))}),xe()})})}};g.value.glyphs&&await ae(glyphs.value,V),g.value.stroke_glyphs&&await ae(stroke_glyphs.value,L),g.value.radical_glyphs&&await ae(radical_glyphs.value,z),g.value.comp_glyphs&&await ae(comp_glyphs.value,j);const oe=JSON.stringify({file:$,constants:constants.value,constantGlyphMap:mapToObject(constantGlyphMap),version:1,glyphs:V,stroke_glyphs:L,radical_glyphs:z,comp_glyphs:j}),re=new Blob([oe],{type:"text/plain;charset=utf-8"});saveAs(re,`${selectedFile.value.name}.json`),loading$1.value=!1,setExportDialogVisible(!1)};return($,V)=>{const L=resolveComponent("el-checkbox"),z=resolveComponent("el-button"),j=resolveComponent("el-dialog");return openBlock(),createBlock(j,{modelValue:unref(exportDialogVisible),"onUpdate:modelValue":V[5]||(V[5]=ae=>isRef(exportDialogVisible)?exportDialogVisible.value=ae:null),title:unref(n)("dialogs.exportDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_3$e,[createVNode(z,{onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.cancel")),1)]),_:1}),createVNode(z,{type:"primary",onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$h,[createBaseVNode("div",_hoisted_2$h,toDisplayString$1(unref(r)("dialogs.exportDialog.exportMsg")),1),createVNode(L,{modelValue:g.value.characters,"onUpdate:modelValue":V[0]||(V[0]=ae=>g.value.characters=ae),class:"item-check",disabled:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.character")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.stroke_glyphs,"onUpdate:modelValue":V[1]||(V[1]=ae=>g.value.stroke_glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.stroke")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.radical_glyphs,"onUpdate:modelValue":V[2]||(V[2]=ae=>g.value.radical_glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.radical")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.comp_glyphs,"onUpdate:modelValue":V[3]||(V[3]=ae=>g.value.comp_glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.comp")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.glyphs,"onUpdate:modelValue":V[4]||(V[4]=ae=>g.value.glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.glyph_comp")),1)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","title"])}}}),exportFileDialog=_export_sfc(_sfc_main$i,[["__scopeId","data-v-bfab148f"]]),_hoisted_1$g={class:"form-wrapper"},_hoisted_2$g={class:"contour-group"},_hoisted_3$d={class:"group-title"},_hoisted_4$b={class:"dialog-footer"},_sfc_main$h=defineComponent({__name:"ExportFontDialog",setup(e){const{tm:n,t:r}=useI18n(),g=ref({contour_storage:"cff",remove_overlap:!1}),y=()=>{setExportFontDialogVisible(!1)},k=()=>{g.value.remove_overlap?total$1.value=selectedFile.value.characterList.length*4:total$1.value=selectedFile.value.characterList.length*3,loaded$1.value=0,loading$1.value=!0,loadingMsg.value="...",setTimeout(async()=>{g.value.remove_overlap&&await computeOverlapRemovedContours(),setTimeout(()=>exportFont(g.value),100),setExportFontDialogVisible(!1)},100)};return($,V)=>{const L=resolveComponent("el-icon"),z=resolveComponent("el-tooltip"),j=resolveComponent("el-radio"),ae=resolveComponent("el-radio-group"),oe=resolveComponent("el-checkbox"),re=resolveComponent("el-button"),ue=resolveComponent("el-dialog");return openBlock(),createBlock(ue,{modelValue:unref(exportFontDialogVisible),"onUpdate:modelValue":V[2]||(V[2]=le=>isRef(exportFontDialogVisible)?exportFontDialogVisible.value=le:null),title:unref(n)("dialogs.exportFontDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_4$b,[createVNode(re,{onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.cancel")),1)]),_:1}),createVNode(re,{type:"primary",onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$g,[createBaseVNode("div",_hoisted_2$g,[createBaseVNode("div",_hoisted_3$d,toDisplayString$1(unref(r)("dialogs.exportFontDialog.contourStorageTitle")),1),createVNode(ae,{modelValue:g.value.contour_storage,"onUpdate:modelValue":V[0]||(V[0]=le=>g.value.contour_storage=le)},{default:withCtx(()=>[createVNode(j,{class:"contour-radio",label:"glyf"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(unref(r)("dialogs.exportFontDialog.contourStorageTrueTypeLabel")),1),createVNode(z,{content:unref(r)("dialogs.exportFontDialog.contourStorageTrueTypeTooltip"),placement:"top"},{default:withCtx(()=>[createVNode(L,{class:"help-icon"},{default:withCtx(()=>[createVNode(unref(question_filled_default))]),_:1})]),_:1},8,["content"])]),_:1}),createVNode(j,{class:"contour-radio",label:"cff"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(unref(r)("dialogs.exportFontDialog.contourStorageCffLabel")),1),createVNode(z,{content:unref(r)("dialogs.exportFontDialog.contourStorageCffTooltip"),placement:"top"},{default:withCtx(()=>[createVNode(L,{class:"help-icon"},{default:withCtx(()=>[createVNode(unref(question_filled_default))]),_:1})]),_:1},8,["content"])]),_:1})]),_:1},8,["modelValue"])]),createVNode(oe,{modelValue:g.value.remove_overlap,"onUpdate:modelValue":V[1]||(V[1]=le=>g.value.remove_overlap=le),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("menus.tools.remove_overlap")),1)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","title"])}}}),exportFontDialog=_export_sfc(_sfc_main$h,[["__scopeId","data-v-b32d221c"]]),_hoisted_1$f={class:"form-wrapper"},_hoisted_2$f={class:"contour-group"},_hoisted_3$c={class:"group-title"},_hoisted_4$a={class:"dialog-footer"},_sfc_main$g=defineComponent({__name:"ExportFontDialog_tauri",setup(e){const{tm:n,t:r}=useI18n(),g=ref({contour_storage:"cff",remove_overlap:!1}),y=()=>{setExportFontTauriDialogVisible(!1)},k=async()=>{g.value.remove_overlap?total$1.value=selectedFile.value.characterList.length*4:total$1.value=selectedFile.value.characterList.length*3,loaded$1.value=0,loading$1.value=!0,loadingMsg.value="...",setTimeout(async()=>{g.value.remove_overlap&&await computeOverlapRemovedContours(),setTimeout(()=>exportFont_tauri(g.value),100),setExportFontTauriDialogVisible(!1)},100)};return($,V)=>{const L=resolveComponent("QuestionFilled"),z=resolveComponent("el-icon"),j=resolveComponent("el-tooltip"),ae=resolveComponent("el-radio"),oe=resolveComponent("el-radio-group"),re=resolveComponent("el-checkbox"),ue=resolveComponent("el-button"),le=resolveComponent("el-dialog");return openBlock(),createBlock(le,{modelValue:unref(exportFontTauriDialogVisible),"onUpdate:modelValue":V[2]||(V[2]=de=>isRef(exportFontTauriDialogVisible)?exportFontTauriDialogVisible.value=de:null),title:unref(n)("dialogs.exportFontDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_4$a,[createVNode(ue,{onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.cancel")),1)]),_:1}),createVNode(ue,{type:"primary",onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$f,[createBaseVNode("div",_hoisted_2$f,[createBaseVNode("div",_hoisted_3$c,toDisplayString$1(unref(r)("dialogs.exportFontDialog.contourStorageTitle")),1),createVNode(oe,{modelValue:g.value.contour_storage,"onUpdate:modelValue":V[0]||(V[0]=de=>g.value.contour_storage=de)},{default:withCtx(()=>[createVNode(ae,{class:"contour-radio",label:"glyf"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(unref(r)("dialogs.exportFontDialog.contourStorageTrueTypeLabel")),1),createVNode(j,{content:unref(r)("dialogs.exportFontDialog.contourStorageTrueTypeTooltip"),placement:"top"},{default:withCtx(()=>[createVNode(z,{class:"help-icon"},{default:withCtx(()=>[createVNode(L)]),_:1})]),_:1},8,["content"])]),_:1}),createVNode(ae,{class:"contour-radio",label:"cff"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(unref(r)("dialogs.exportFontDialog.contourStorageCffLabel")),1),createVNode(j,{content:unref(r)("dialogs.exportFontDialog.contourStorageCffTooltip"),placement:"top"},{default:withCtx(()=>[createVNode(z,{class:"help-icon"},{default:withCtx(()=>[createVNode(L)]),_:1})]),_:1},8,["content"])]),_:1})]),_:1},8,["modelValue"])]),createVNode(re,{modelValue:g.value.remove_overlap,"onUpdate:modelValue":V[1]||(V[1]=de=>g.value.remove_overlap=de),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("menus.tools.remove_overlap")),1)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","title"])}}}),exportFontTauriDialog=_export_sfc(_sfc_main$g,[["__scopeId","data-v-a3106cb8"]]),_hoisted_1$e={class:"form-wrapper"},_hoisted_2$e={class:"axis-item"},_hoisted_3$b={class:"dialog-footer"},_sfc_main$f=defineComponent({__name:"ExportVarFontDialog",setup(e){const{tm:n,t:r}=useI18n(),g=ref(!1),y=ref(""),k=ref([]),$=ref({remove_overlap:!1}),V=()=>{setExportVarFontDialogVisible(!1)},L=()=>{$.value.remove_overlap?total$1.value=selectedFile.value.characterList.length*4:total$1.value=selectedFile.value.characterList.length*3,loaded$1.value=0,loading$1.value=!0,loadingMsg.value="...",setTimeout(async()=>{selectedFile.value.variants={axes:k.value,instances:[]},$.value.remove_overlap&&await computeOverlapRemovedContours(),setTimeout(()=>exportVarFont($.value),100),setExportVarFontDialogVisible(!1)},100)},z=()=>{g.value=!0},j=oe=>{y.value=oe;const re=constants.value.find(ue=>ue.uuid===oe);re&&k.value.push({uuid:re.uuid,name:re.name,defaultValue:re.value,minValue:re.min,maxValue:re.max,axisTag:""}),g.value=!1,y.value=""},ae=oe=>{k.value=k.value.filter(re=>re.uuid!==oe.uuid)};return(oe,re)=>{const ue=resolveComponent("el-button"),le=resolveComponent("el-option"),de=resolveComponent("el-select"),he=resolveComponent("el-input"),_e=resolveComponent("el-form-item"),xe=resolveComponent("el-input-number"),Ne=resolveComponent("el-scrollbar"),$e=resolveComponent("el-dialog");return openBlock(),createBlock($e,{modelValue:unref(exportVarFontDialogVisible),"onUpdate:modelValue":re[1]||(re[1]=Ce=>isRef(exportVarFontDialogVisible)?exportVarFontDialogVisible.value=Ce:null),title:"",width:"360px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_3$b,[createVNode(ue,{onPointerdown:V},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.cancel")),1)]),_:1}),createVNode(ue,{type:"primary",onPointerdown:L},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createVNode(Ne,{height:"300px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$e,[g.value?createCommentVNode("",!0):(openBlock(),createBlock(ue,{key:0,class:"add-axis-button",onPointerdown:z},{default:withCtx(()=>[createTextVNode("")]),_:1})),g.value?(openBlock(),createBlock(de,{key:1,class:"constant-select",modelValue:y.value,"onUpdate:modelValue":re[0]||(re[0]=Ce=>y.value=Ce),placeholder:"",onChange:j},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(constants),Ce=>(openBlock(),createBlock(le,{key:Ce.uuid,label:Ce.name,value:Ce.uuid},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(k.value,Ce=>(openBlock(),createElementBlock("div",_hoisted_2$e,[createVNode(_e,{label:"axisTag"},{default:withCtx(()=>[createVNode(he,{modelValue:Ce.axisTag,"onUpdate:modelValue":Ie=>Ce.axisTag=Ie},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(_e,{label:"axisName"},{default:withCtx(()=>[createVNode(he,{modelValue:Ce.name,"onUpdate:modelValue":Ie=>Ce.name=Ie},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(_e,{label:"defaultValue"},{default:withCtx(()=>[createVNode(xe,{modelValue:Ce.defaultValue,"onUpdate:modelValue":Ie=>Ce.defaultValue=Ie},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(_e,{label:"minValue"},{default:withCtx(()=>[createVNode(xe,{modelValue:Ce.minValue,"onUpdate:modelValue":Ie=>Ce.minValue=Ie},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(_e,{label:"maxValue"},{default:withCtx(()=>[createVNode(xe,{modelValue:Ce.maxValue,"onUpdate:modelValue":Ie=>Ce.maxValue=Ie},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(ue,{class:"remove-axis-button",type:"danger",onPointerdown:Ie=>ae(Ce)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportFontDialog.removeAxis")),1)]),_:2},1032,["onPointerdown"])]))),256))])]),_:1})]),_:1},8,["modelValue"])}}}),exportVarFontDialog=_export_sfc(_sfc_main$f,[["__scopeId","data-v-744ce4bf"]]),_hoisted_1$d={class:"form-wrapper"},_hoisted_2$d={class:"axis-item"},_hoisted_3$a={class:"dialog-footer"},_sfc_main$e=defineComponent({__name:"ExportVarFontDialog_tauri",setup(e){const{tm:n,t:r}=useI18n(),g=ref(!1),y=ref(""),k=ref([]),$=ref({remove_overlap:!1}),V=()=>{setExportVarFontTauriDialogVisible(!1)},L=()=>{$.value.remove_overlap?total$1.value=selectedFile.value.characterList.length*4:total$1.value=selectedFile.value.characterList.length*3,loaded$1.value=0,loading$1.value=!0,loadingMsg.value="...",setTimeout(async()=>{selectedFile.value.variants={axes:k.value,instances:[]},$.value.remove_overlap&&await computeOverlapRemovedContours(),setTimeout(()=>exportVarFont_tauri($.value),100),setExportVarFontTauriDialogVisible(!1)},100)},z=()=>{g.value=!0},j=oe=>{y.value=oe;const re=constants.value.find(ue=>ue.uuid===oe);re&&k.value.push({uuid:re.uuid,name:re.name,defaultValue:re.value,minValue:re.min,maxValue:re.max,axisTag:""}),g.value=!1},ae=oe=>{k.value=k.value.filter(re=>re.uuid!==oe.uuid)};return(oe,re)=>{const ue=resolveComponent("el-button"),le=resolveComponent("el-option"),de=resolveComponent("el-select"),he=resolveComponent("el-input"),_e=resolveComponent("el-form-item"),xe=resolveComponent("el-input-number"),Ne=resolveComponent("el-scrollbar"),$e=resolveComponent("el-dialog");return openBlock(),createBlock($e,{modelValue:unref(exportVarFontTauriDialogVisible),"onUpdate:modelValue":re[1]||(re[1]=Ce=>isRef(exportVarFontTauriDialogVisible)?exportVarFontTauriDialogVisible.value=Ce:null),title:"",width:"360px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_3$a,[createVNode(ue,{onPointerdown:V},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.cancel")),1)]),_:1}),createVNode(ue,{type:"primary",onPointerdown:L},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createVNode(Ne,{height:"300px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$d,[g.value?createCommentVNode("",!0):(openBlock(),createBlock(ue,{key:0,class:"add-axis-button",onPointerdown:z},{default:withCtx(()=>[createTextVNode("")]),_:1})),g.value?(openBlock(),createBlock(de,{key:1,class:"constant-select",modelValue:y.value,"onUpdate:modelValue":re[0]||(re[0]=Ce=>y.value=Ce),placeholder:"",onChange:j},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(constants),Ce=>(openBlock(),createBlock(le,{key:Ce.uuid,label:Ce.name,value:Ce.uuid},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(k.value,Ce=>(openBlock(),createElementBlock("div",_hoisted_2$d,[createVNode(_e,{label:"axisTag"},{default:withCtx(()=>[createVNode(he,{modelValue:Ce.axisTag,"onUpdate:modelValue":Ie=>Ce.axisTag=Ie},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(_e,{label:"axisName"},{default:withCtx(()=>[createVNode(he,{modelValue:Ce.name,"onUpdate:modelValue":Ie=>Ce.name=Ie},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(_e,{label:"defaultValue"},{default:withCtx(()=>[createVNode(xe,{modelValue:Ce.defaultValue,"onUpdate:modelValue":Ie=>Ce.defaultValue=Ie},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(_e,{label:"minValue"},{default:withCtx(()=>[createVNode(xe,{modelValue:Ce.minValue,"onUpdate:modelValue":Ie=>Ce.minValue=Ie},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(_e,{label:"maxValue"},{default:withCtx(()=>[createVNode(xe,{modelValue:Ce.maxValue,"onUpdate:modelValue":Ie=>Ce.maxValue=Ie},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(ue,{class:"remove-axis-button",type:"danger",onPointerdown:Ie=>ae(Ce)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportFontDialog.removeAxis")),1)]),_:2},1032,["onPointerdown"])]))),256))])]),_:1})]),_:1},8,["modelValue"])}}}),exportVarFontTauriDialog=_export_sfc(_sfc_main$e,[["__scopeId","data-v-6d57703d"]]),_withScopeId$7=e=>(pushScopeId("data-v-0321892c"),e=e(),popScopeId(),e),_hoisted_1$c=_withScopeId$7(()=>createBaseVNode("div",{class:"form-wrapper"},"  ",-1)),_hoisted_2$c={class:"dialog-footer"},_sfc_main$d=defineComponent({__name:"ExportColorFontDialog",setup(e){const{tm:n,t:r}=useI18n(),g=ref({remove_overlap:!1,is_color_font:!0}),y=()=>{setExportColorFontDialogVisible(!1)},k=()=>{g.value.remove_overlap?total$1.value=selectedFile.value.characterList.length*4:total$1.value=selectedFile.value.characterList.length*3,loaded$1.value=0,loading$1.value=!0,loadingMsg.value="...",setTimeout(async()=>{g.value.remove_overlap&&await computeOverlapRemovedContours(),setTimeout(()=>exportColorFont(g.value),100),setExportColorFontDialogVisible(!1)},100)};return($,V)=>{const L=resolveComponent("el-button"),z=resolveComponent("el-dialog");return openBlock(),createBlock(z,{modelValue:unref(exportColorFontDialogVisible),"onUpdate:modelValue":V[0]||(V[0]=j=>isRef(exportColorFontDialogVisible)?exportColorFontDialogVisible.value=j:null),title:unref(n)("dialogs.exportFontDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$c,[createVNode(L,{onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.cancel")),1)]),_:1}),createVNode(L,{type:"primary",onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[_hoisted_1$c]),_:1},8,["modelValue","title"])}}}),exportColorFontDialog=_export_sfc(_sfc_main$d,[["__scopeId","data-v-0321892c"]]),_withScopeId$6=e=>(pushScopeId("data-v-266d8412"),e=e(),popScopeId(),e),_hoisted_1$b=_withScopeId$6(()=>createBaseVNode("div",{class:"form-wrapper"},"  ",-1)),_hoisted_2$b={class:"dialog-footer"},_sfc_main$c=defineComponent({__name:"ExportColorFontDialog_tauri",setup(e){const{tm:n,t:r}=useI18n(),g=ref({remove_overlap:!1,is_color_font:!0}),y=()=>{setExportColorFontTauriDialogVisible(!1)},k=()=>{g.value.remove_overlap?total$1.value=selectedFile.value.characterList.length*4:total$1.value=selectedFile.value.characterList.length*3,loaded$1.value=0,loading$1.value=!0,loadingMsg.value="...",setTimeout(async()=>{g.value.remove_overlap&&await computeOverlapRemovedContours(),setTimeout(()=>exportColorFont_tauri(g.value),100),setExportColorFontTauriDialogVisible(!1)},100)};return($,V)=>{const L=resolveComponent("el-button"),z=resolveComponent("el-dialog");return openBlock(),createBlock(z,{modelValue:unref(exportColorFontTauriDialogVisible),"onUpdate:modelValue":V[0]||(V[0]=j=>isRef(exportColorFontTauriDialogVisible)?exportColorFontTauriDialogVisible.value=j:null),title:unref(n)("dialogs.exportFontDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$b,[createVNode(L,{onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.cancel")),1)]),_:1}),createVNode(L,{type:"primary",onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[_hoisted_1$b]),_:1},8,["modelValue","title"])}}}),exportColorFontTauriDialog=_export_sfc(_sfc_main$c,[["__scopeId","data-v-266d8412"]]),_hoisted_1$a={class:"wrap"},_hoisted_2$a={class:"global-params-panel"},_hoisted_3$9={class:"left"},_hoisted_4$9={class:"sample-characters-section"},_hoisted_5$7=createBaseVNode("h3",null,"",-1),_hoisted_6$6={class:"update-section"},_hoisted_7$6=createBaseVNode("div",{class:"main"},[createBaseVNode("div",{class:"characters",id:"advanced-edit-characters-list"})],-1),_hoisted_8$6={class:"right"},_hoisted_9$6={class:"parameters-wrap"},_hoisted_10$6=createBaseVNode("div",{class:"title"},"",-1),_hoisted_11$6={key:0,class:"param-wrapper"},_hoisted_12$6={key:1,class:"param-wrapper"},_sfc_main$b=defineComponent({__name:"GlobalParamsPanel",setup(e){onMounted(()=>{constants$2.value=clone(constants.value),updateSampleCharactersList(),updatePreviewList()});const n=()=>{isEditingSample.value=!isEditingSample.value,isEditingSample.value||(updateSampleCharactersList(),updatePreviewList())},r=()=>{updateCharactersList()},g=(y,k,$=!1)=>{$&&(y.value=k)};return watch(constants$2,()=>{updateCharactersAndPreview$1()},{deep:!0}),(y,k)=>{const $=resolveComponent("el-input"),V=resolveComponent("el-form-item"),L=resolveComponent("el-button"),z=resolveComponent("el-input-number"),j=resolveComponent("el-slider"),ae=resolveComponent("el-option"),oe=resolveComponent("el-select"),re=resolveComponent("el-form"),ue=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("div",_hoisted_1$a,[createBaseVNode("div",_hoisted_2$a,[createBaseVNode("div",_hoisted_3$9,[createBaseVNode("div",_hoisted_4$9,[_hoisted_5$7,createVNode(V,null,{default:withCtx(()=>[createVNode($,{modelValue:unref(sampleCharacters),"onUpdate:modelValue":k[0]||(k[0]=le=>isRef(sampleCharacters)?sampleCharacters.value=le:null),type:"textarea",rows:4,disabled:!unref(isEditingSample),placeholder:"20",maxlength:"20","show-word-limit":""},null,8,["modelValue","disabled"])]),_:1}),createVNode(L,{type:unref(isEditingSample)?"success":"primary",onClick:n,style:{width:"100%","margin-bottom":"20px"}},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(isEditingSample)?"":""),1)]),_:1},8,["type"])]),createBaseVNode("div",_hoisted_6$6,[createVNode(L,{type:"danger",size:"large",onClick:r},{default:withCtx(()=>[createTextVNode("  ")]),_:1})])]),_hoisted_7$6,createBaseVNode("div",_hoisted_8$6,[createVNode(ue,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_9$6,[_hoisted_10$6,createVNode(re,{class:"parameters-form","label-width":"80px"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(constants$2),le=>(openBlock(),createBlock(V,{label:le.name},{default:withCtx(()=>[le.type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_11$6,[createVNode(z,{"model-value":le.value,step:le.max<=10?.01:1,min:le.min,max:le.max,precision:le.max<=10?2:0,onChange:de=>g(le,de,!0)},null,8,["model-value","step","min","max","precision","onChange"]),withDirectives(createVNode(j,{step:le.max<=10?.01:1,min:le.min,max:le.max,precision:le.max<=10?2:0,onInput:de=>g(le,de,!1),modelValue:le.value,"onUpdate:modelValue":de=>le.value=de},null,8,["step","min","max","precision","onInput","modelValue","onUpdate:modelValue"]),[[vShow,le.type===unref(ParameterType).Number]])])):le.type===unref(ParameterType).Enum?(openBlock(),createElementBlock("div",_hoisted_12$6,[createVNode(oe,{modelValue:le.value,"onUpdate:modelValue":de=>le.value=de,class:"enum-param-select",placeholder:"Select",onChange:de=>g(le,de,!1)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(le.options,de=>(openBlock(),createBlock(ae,{key:de.value,label:de.label,value:de.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):createCommentVNode("",!0)]),_:2},1032,["label"]))),256))]),_:1})])]),_:1})])])])}}}),_withScopeId$5=e=>(pushScopeId("data-v-2a43b779"),e=e(),popScopeId(),e),_hoisted_1$9={class:"condition-filter-panel"},_hoisted_2$9=_withScopeId$5(()=>createBaseVNode("h2",null,"",-1)),_hoisted_3$8=_withScopeId$5(()=>createBaseVNode("p",null,"...",-1)),_hoisted_4$8=[_hoisted_2$9,_hoisted_3$8],_sfc_main$a=defineComponent({__name:"ConditionFilterPanel",setup(e){return(n,r)=>(openBlock(),createElementBlock("div",_hoisted_1$9,_hoisted_4$8))}}),ConditionFilterPanel=_export_sfc(_sfc_main$a,[["__scopeId","data-v-2a43b779"]]),_withScopeId$4=e=>(pushScopeId("data-v-d802c59d"),e=e(),popScopeId(),e),_hoisted_1$8={class:"scripts-panel"},_hoisted_2$8=_withScopeId$4(()=>createBaseVNode("h2",null,"",-1)),_hoisted_3$7=_withScopeId$4(()=>createBaseVNode("p",null,"...",-1)),_hoisted_4$7=[_hoisted_2$8,_hoisted_3$7],_sfc_main$9=defineComponent({__name:"ScriptsPanel",setup(e){return(n,r)=>(openBlock(),createElementBlock("div",_hoisted_1$8,_hoisted_4$7))}}),ScriptsPanel=_export_sfc(_sfc_main$9,[["__scopeId","data-v-d802c59d"]]),_hoisted_1$7={class:"wrap"},_hoisted_2$7={class:"advanced-edit-params-panel"},_hoisted_3$6={class:"left"},_hoisted_4$6={class:"sample-characters-section"},_hoisted_5$6=createBaseVNode("h3",null,"",-1),_hoisted_6$5={class:"update-section"},_hoisted_7$5=createBaseVNode("div",{class:"main"},[createBaseVNode("div",{class:"characters",id:"advanced-edit-characters-list"})],-1),_hoisted_8$5={class:"right"},_hoisted_9$5=createBaseVNode("div",{class:"title"},"",-1),_hoisted_10$5={class:"stroke-list"},_hoisted_11$5=["onClick"],_hoisted_12$5={class:"stroke-preview"},_hoisted_13$4={class:"stroke-info"},_hoisted_14$3={class:"stroke-name"},_hoisted_15$1={class:"stroke-style"},_hoisted_16$1={key:0,class:"replacement-setting-btn"},_hoisted_17$1={key:1,class:"replacement-setting-btn"},_sfc_main$8=defineComponent({__name:"StrokeReplacePanel",setup(e){onMounted(async()=>{getStrokeList(),updateSampleCharactersList(),updatePreviewList_strokeReplace(),await nextTick();for(let k=0;k<strokeList.value.length;k++){const $=strokeList.value[k];renderStrokePreview($.uuid)}}),onUnmounted(()=>{strokeList.value.length=0,strokeMap.clear()});const n=()=>{isEditingSample.value=!isEditingSample.value,isEditingSample.value||(updateSampleCharactersList(),updatePreviewList_strokeReplace())},r=()=>{updateCharactersList_strokeReplace()},g=async k=>{selectedStrokeUUID.value=k.uuid,await nextTick(),renderStrokePreview(k.uuid)},y=()=>{onStrokeReplacement.value=!0,glyphComponentsDialogVisible2.value=!0};return(k,$)=>{const V=resolveComponent("el-input"),L=resolveComponent("el-form-item"),z=resolveComponent("el-button"),j=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("div",_hoisted_1$7,[createBaseVNode("div",_hoisted_2$7,[createBaseVNode("div",_hoisted_3$6,[createBaseVNode("div",_hoisted_4$6,[_hoisted_5$6,createVNode(L,null,{default:withCtx(()=>[createVNode(V,{modelValue:unref(sampleCharacters),"onUpdate:modelValue":$[0]||($[0]=ae=>isRef(sampleCharacters)?sampleCharacters.value=ae:null),type:"textarea",rows:4,disabled:!unref(isEditingSample),placeholder:"20",maxlength:"20","show-word-limit":""},null,8,["modelValue","disabled"])]),_:1}),createVNode(z,{type:unref(isEditingSample)?"success":"primary",onClick:n,style:{width:"100%","margin-bottom":"20px"}},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(isEditingSample)?"":""),1)]),_:1},8,["type"])]),createBaseVNode("div",_hoisted_6$5,[createVNode(z,{type:"danger",size:"large",onClick:r},{default:withCtx(()=>[createTextVNode("  ")]),_:1})])]),_hoisted_7$5,createBaseVNode("div",_hoisted_8$5,[createVNode(j,null,{default:withCtx(()=>[_hoisted_9$5,createBaseVNode("div",_hoisted_10$5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(strokeList),ae=>(openBlock(),createElementBlock("div",{class:"stroke-item",key:ae.uuid,onClick:oe=>g(ae)},[createBaseVNode("div",_hoisted_12$5,[ae.replaced?(openBlock(),createElementBlock("canvas",{key:1,class:normalizeClass(`stroke-preview-${ae.replacement.uuid}`),width:"100",height:"100"},null,2)):(openBlock(),createElementBlock("canvas",{key:0,class:normalizeClass(`stroke-preview-${ae.uuid}`),width:"100",height:"100"},null,2))]),createBaseVNode("div",_hoisted_13$4,[createBaseVNode("div",_hoisted_14$3,toDisplayString$1(ae.name),1),createBaseVNode("div",_hoisted_15$1,toDisplayString$1(ae.style),1),ae.replaced?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_16$1,[createVNode(z,{onClick:y,size:"small",type:"primary"},{default:withCtx(()=>[createTextVNode("")]),_:1})])),ae.replaced?(openBlock(),createElementBlock("div",_hoisted_17$1,[createVNode(z,{onClick:y,size:"small",type:"primary"},{default:withCtx(()=>[createTextVNode("")]),_:1})])):createCommentVNode("",!0)])],8,_hoisted_11$5))),128))])]),_:1})])])])}}}),_hoisted_1$6={class:"wrap"},_hoisted_2$6={class:"style-switch-panel"},_hoisted_3$5={class:"left"},_hoisted_4$5={class:"sample-characters-section"},_hoisted_5$5=createBaseVNode("h3",null,"",-1),_hoisted_6$4={class:"update-section"},_hoisted_7$4=createBaseVNode("div",{class:"main"},[createBaseVNode("div",{class:"characters",id:"advanced-edit-characters-list"})],-1),_hoisted_8$4={class:"right"},_hoisted_9$4={key:0,class:"stroke-list-section"},_hoisted_10$4=createBaseVNode("div",{class:"title"},"",-1),_hoisted_11$4={key:1,class:"parameters-wrap"},_hoisted_12$4={class:"title"},_hoisted_13$3=createBaseVNode("span",null,"",-1),_hoisted_14$2={key:0,class:"param-wrapper"},_sfc_main$7=defineComponent({__name:"StyleSwitchPanel",setup(e){const n=ref(!1);onMounted(()=>{styles$3.value=[{uuid:"default",name:"",strokeStyle:"",constants:[],parameters:[]},{uuid:genUUID(),name:"",strokeStyle:"",constants:[{name:"",value:2},{name:"",value:1},{name:"",value:1},{name:"",value:1},{name:"",value:0},{name:"",value:1}],parameters:[{name:"",value:50,min:40,max:100,type:ParameterType.Number}]},{uuid:genUUID(),name:"-",strokeStyle:"",constants:[{name:"",value:2},{name:"",value:1},{name:"",value:0},{name:"",value:1},{name:"",value:0},{name:"",value:2}],parameters:[{name:"",value:50,min:40,max:100,type:ParameterType.Number}]},{uuid:genUUID(),name:"",strokeStyle:"",constants:[],parameters:[{name:"",value:50,min:40,max:100,type:ParameterType.Number}]},{uuid:genUUID(),name:"",strokeStyle:"",constants:[],parameters:[{name:"",value:50,min:40,max:100,type:ParameterType.Number}]},{uuid:genUUID(),name:"",strokeStyle:"",constants:[],parameters:[{name:"",value:30,min:40,max:100,type:ParameterType.Number}]},{uuid:genUUID(),name:"",strokeStyle:"",constants:[],parameters:[{name:"",value:50,min:40,max:100,type:ParameterType.Number}]},{uuid:genUUID(),name:"",strokeStyle:"",constants:[],parameters:[{name:"",value:50,min:40,max:100,type:ParameterType.Number}]}],updateSampleCharactersList(),updatePreviewList_styleSwitch()}),onUnmounted(()=>{styles$3.value=[],selectedStyleUUID.value="default"});const r=()=>{isEditingSample.value=!isEditingSample.value,isEditingSample.value||(updateSampleCharactersList(),updatePreviewList_styleSwitch())},g=()=>{updateCharactersList_styleSwitch()},y=$=>{if(selectedStyle.value.uuid===$.uuid&&$.uuid!=="default"){n.value=!0;return}selectedStyleUUID.value=$.uuid,updateCharactersAndPreview_styleSwitch()},k=($,V,L=!1)=>{L&&($.value=V)};return watch(()=>selectedStyle.value?.parameters,()=>{updateCharactersAndPreview_styleSwitch()},{deep:!0}),($,V)=>{const L=resolveComponent("el-input"),z=resolveComponent("el-form-item"),j=resolveComponent("el-button"),ae=resolveComponent("el-scrollbar"),oe=resolveComponent("el-icon"),re=resolveComponent("el-input-number"),ue=resolveComponent("el-slider"),le=resolveComponent("el-form");return openBlock(),createElementBlock("div",_hoisted_1$6,[createBaseVNode("div",_hoisted_2$6,[createBaseVNode("div",_hoisted_3$5,[createBaseVNode("div",_hoisted_4$5,[_hoisted_5$5,createVNode(z,null,{default:withCtx(()=>[createVNode(L,{modelValue:unref(sampleCharacters),"onUpdate:modelValue":V[0]||(V[0]=de=>isRef(sampleCharacters)?sampleCharacters.value=de:null),type:"textarea",rows:4,disabled:!unref(isEditingSample),placeholder:"20",maxlength:"20","show-word-limit":""},null,8,["modelValue","disabled"])]),_:1}),createVNode(j,{type:unref(isEditingSample)?"success":"primary",onClick:r,style:{width:"100%","margin-bottom":"20px"}},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(isEditingSample)?"":""),1)]),_:1},8,["type"])]),createBaseVNode("div",_hoisted_6$4,[createVNode(j,{type:"danger",size:"large",onClick:g},{default:withCtx(()=>[createTextVNode("  ")]),_:1})])]),_hoisted_7$4,createBaseVNode("div",_hoisted_8$4,[n.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_9$4,[_hoisted_10$4,createVNode(ae,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(styles$3),de=>(openBlock(),createBlock(j,{class:normalizeClass(["style-item",{selected:de.uuid===unref(selectedStyle).uuid}]),key:de.uuid,type:de.uuid===unref(selectedStyle).uuid?"primary":"default",onClick:he=>y(de)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(de.name),1)]),_:2},1032,["type","class","onClick"]))),128))]),_:1})])),n.value?(openBlock(),createElementBlock("div",_hoisted_11$4,[createBaseVNode("div",_hoisted_12$4,[createVNode(oe,{class:"arrow-left-icon",onClick:V[1]||(V[1]=de=>n.value=!1)},{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1}),_hoisted_13$3]),createVNode(le,{class:"parameters-form","label-width":"80px"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(selectedStyle).parameters,de=>(openBlock(),createBlock(z,{label:de.name},{default:withCtx(()=>[de.type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_14$2,[createVNode(re,{"model-value":de.value,step:de.max<=10?.01:1,min:de.min,max:de.max,precision:de.max<=10?2:0,onChange:he=>k(de,he,!0)},null,8,["model-value","step","min","max","precision","onChange"]),withDirectives(createVNode(ue,{step:de.max<=10?.01:1,min:de.min,max:de.max,precision:de.max<=10?2:0,onInput:he=>k(de,he,!1),modelValue:de.value,"onUpdate:modelValue":he=>de.value=he},null,8,["step","min","max","precision","onInput","modelValue","onUpdate:modelValue"]),[[vShow,de.type===unref(ParameterType).Number]])])):createCommentVNode("",!0)]),_:2},1032,["label"]))),256))]),_:1})])):createCommentVNode("",!0)])])])}}}),_withScopeId$3=e=>(pushScopeId("data-v-6f3cb4ed"),e=e(),popScopeId(),e),_hoisted_1$5={class:"advanced-edit-panel"},_hoisted_2$5={class:"advanced-edit-panel-header"},_hoisted_3$4={class:"title"},_hoisted_4$4=_withScopeId$3(()=>createBaseVNode("span",{class:"to-list-label"},"",-1)),_hoisted_5$4={class:"advanced-edit-panel-main"},_sfc_main$6=defineComponent({__name:"AdvancedEditPanel",setup(e){const n=()=>{setEditStatus(Status.CharacterList)};return(r,g)=>{const y=resolveComponent("Tools"),k=resolveComponent("el-icon"),$=resolveComponent("el-button");return openBlock(),createElementBlock("div",_hoisted_1$5,[createBaseVNode("header",_hoisted_2$5,[createBaseVNode("div",_hoisted_3$4,[createVNode($,{onPointerdown:g[0]||(g[0]=()=>unref(setActivePanel)(unref(PanelType).GlobalVariables)),type:unref(activePanel)===unref(PanelType).GlobalVariables?"primary":"default"},{default:withCtx(()=>[createVNode(k,null,{default:withCtx(()=>[createVNode(y)]),_:1}),createTextVNode("  ")]),_:1},8,["type"]),createVNode($,{onPointerdown:g[1]||(g[1]=()=>unref(setActivePanel)(unref(PanelType).StrokeReplace)),type:unref(activePanel)===unref(PanelType).StrokeReplace?"primary":"default"},{default:withCtx(()=>[createVNode(k,null,{default:withCtx(()=>[createVNode(y)]),_:1}),createTextVNode("  ")]),_:1},8,["type"]),createVNode($,{onPointerdown:g[2]||(g[2]=()=>unref(setActivePanel)(unref(PanelType).StyleSwitch)),type:unref(activePanel)===unref(PanelType).StyleSwitch?"primary":"default"},{default:withCtx(()=>[createVNode(k,null,{default:withCtx(()=>[createVNode(y)]),_:1}),createTextVNode("  ")]),_:1},8,["type"]),createVNode($,{onPointerdown:g[3]||(g[3]=()=>unref(setActivePanel)(unref(PanelType).ConditionFilter)),type:unref(activePanel)===unref(PanelType).ConditionFilter?"primary":"default"},{default:withCtx(()=>[createVNode(k,null,{default:withCtx(()=>[createVNode(y)]),_:1}),createTextVNode("  ")]),_:1},8,["type"]),createVNode($,{onPointerdown:g[4]||(g[4]=()=>unref(setActivePanel)(unref(PanelType).Script)),type:unref(activePanel)===unref(PanelType).Script?"primary":"default"},{default:withCtx(()=>[createVNode(k,null,{default:withCtx(()=>[createVNode(y)]),_:1}),createTextVNode("  ")]),_:1},8,["type"])]),createBaseVNode("div",{class:"to-list",onPointerdown:n},[createVNode(k,{class:"to-list-icon"},{default:withCtx(()=>[createVNode(unref(grid_default))]),_:1}),_hoisted_4$4],32)]),createBaseVNode("main",_hoisted_5$4,[unref(activePanel)===unref(PanelType).GlobalVariables?(openBlock(),createBlock(_sfc_main$b,{key:0})):createCommentVNode("",!0),unref(activePanel)===unref(PanelType).ConditionFilter?(openBlock(),createBlock(ConditionFilterPanel,{key:1})):createCommentVNode("",!0),unref(activePanel)===unref(PanelType).Script?(openBlock(),createBlock(ScriptsPanel,{key:2})):createCommentVNode("",!0),unref(activePanel)===unref(PanelType).StrokeReplace?(openBlock(),createBlock(_sfc_main$8,{key:3})):createCommentVNode("",!0),unref(activePanel)===unref(PanelType).StyleSwitch?(openBlock(),createBlock(_sfc_main$7,{key:4})):createCommentVNode("",!0)])])}}}),AdvancedEditPanel=_export_sfc(_sfc_main$6,[["__scopeId","data-v-6f3cb4ed"]]),_withScopeId$2=e=>(pushScopeId("data-v-92be93de"),e=e(),popScopeId(),e),_hoisted_1$4={class:"root-wrapper"},_hoisted_2$4={class:"el-loading-spinner"},_hoisted_3$3=_withScopeId$2(()=>createBaseVNode("svg",{class:"circular",viewBox:"0 0 50 50"},[createBaseVNode("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})],-1)),_hoisted_4$3={class:"loading-text"},_hoisted_5$3={class:"main-panel"},_hoisted_6$3={key:0,class:"advanced-edit-panel-wrapper"},_hoisted_7$3={class:"inner-wrapper"},_hoisted_8$3={class:"left-panel-wrapper"},_hoisted_9$3={class:"main-wrapper"},_hoisted_10$3={class:"files-bar-wrapper"},_hoisted_11$3={class:"zoom-bar-wrapper"},_hoisted_12$3={class:"right-panel-wrapper"},svg$2=`
    <path class="path" d="" style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>
  `,_sfc_main$5=defineComponent({__name:"Editor",setup(e){const{tm:n,t:r,locale:g}=useI18n();onBeforeRouteLeave((V,L,z)=>{let j="";g.value==="zh"?j="":g.value==="en"&&(j="Exit without saving? Your changes will be lost."),window.confirm(j)?z():z(!1)});const y=V=>{if(ENV.value==="web"){V.preventDefault();let L="";return g.value==="zh"?L="":g.value==="en"&&(L="Exit without saving? Your changes will be lost."),V.returnValue=L,""}},k=V=>{if(V.key==="Shift"){if(editing$8.value||editing$7.value||editing$5.value||editing$6.value)return;V.preventDefault(),enableMultiSelect.value=!0}},$=V=>{if(V.key==="Shift"){if(editing$8.value||editing$7.value||editing$5.value||editing$6.value)return;V.preventDefault(),enableMultiSelect.value=!1}};return onMounted(async()=>{window.addEventListener("beforeunload",y),document.addEventListener("keydown",k),document.addEventListener("keyup",$),await initGlyphEnvironment()}),onUnmounted(()=>{document.removeEventListener("keydown",k),document.removeEventListener("keyup",$)}),(V,L)=>{const z=resolveComponent("el-progress"),j=resolveDirective("loading");return openBlock(),createElementBlock("div",_hoisted_1$4,[createVNode(saveFileTipDialog),createVNode(closeFileTipDialog),createVNode(tipsDialog),createVNode(_sfc_main$p),createVNode(_sfc_main$o),createVNode(_sfc_main$1g),createVNode(_sfc_main$F),createVNode(_sfc_main$z),createVNode(_sfc_main$A),createVNode(_sfc_main$E),createVNode(_sfc_main$D),createVNode(_sfc_main$C),createVNode(_sfc_main$B),createVNode(_sfc_main$y),createVNode(_sfc_main$x),createVNode(_sfc_main$r),createVNode(_sfc_main$q),createVNode(_sfc_main$1f),createVNode(saveDialog),createVNode(saveAsDialog),createVNode(exportFileDialog),createVNode(exportFontDialog),createVNode(exportFontTauriDialog),createVNode(exportVarFontDialog),createVNode(exportVarFontTauriDialog),createVNode(exportColorFontDialog),createVNode(exportColorFontTauriDialog),withDirectives((openBlock(),createElementBlock("div",{class:"outer-wrapper","element-loading-text":"","element-loading-spinner":svg$2,"element-loading-svg-view-box":"-10, -10, 50, 50","element-loading-background":"rgba(122, 122, 122, 0.8)"},[withDirectives(createBaseVNode("div",_hoisted_2$4,[_hoisted_3$3,createBaseVNode("div",null,toDisplayString$1(unref(loadingMsg)||unref(r)("panels.paramsPanel.loadingMsg")),1)],512),[[vShow,unref(loading$1)&&unref(total$1)===0]]),withDirectives(createBaseVNode("div",_hoisted_4$3,[createVNode(z,{"text-inside":!0,"stroke-width":20,percentage:Math.round(unref(loaded$1)/unref(total$1)*100)>=100?100:Math.round(unref(loaded$1)/unref(total$1)*100)},null,8,["percentage"]),createBaseVNode("div",null,toDisplayString$1(unref(loadingMsg)?unref(loadingMsg)+`${Math.round(unref(loaded$1)/unref(total$1)*100)}%`:unref(r)("panels.paramsPanel.loadedMsg",{percent:Math.round(unref(loaded$1)/unref(total$1)*100)})),1)],512),[[vShow,unref(loading$1)&&unref(total$1)!=0]]),createBaseVNode("div",{class:"side-bar-wrap",style:normalizeStyle({flex:(unref(ENV)==="web","0 0 80px"),borderRight:(unref(ENV)==="web","1px solid var(--light-5)")})},[createVNode(SideBar)],4),createBaseVNode("div",_hoisted_5$3,[createBaseVNode("header",{class:"header-wrapper",style:normalizeStyle({flex:(unref(ENV)==="web",unref(editStatus)===unref(Status).CharacterList||unref(editStatus)===unref(Status).GlyphList||unref(editStatus)===unref(Status).StrokeGlyphList||unref(editStatus)===unref(Status).RadicalGlyphList||unref(editStatus)===unref(Status).CompGlyphList||unref(editStatus)===unref(Status).Pic||unref(editStatus)===unref(Status).AdvancedEdit?"0 0 0px":"0 0 50px")})},[withDirectives(createVNode(ToolBar,null,null,512),[[vShow,unref(editStatus)===unref(Status).Edit||unref(editStatus)===unref(Status).Glyph]])],4),unref(editStatus)===unref(Status).AdvancedEdit?(openBlock(),createElementBlock("main",_hoisted_6$3,[createVNode(AdvancedEditPanel)])):createCommentVNode("",!0),withDirectives(createBaseVNode("main",_hoisted_7$3,[withDirectives(createBaseVNode("aside",_hoisted_8$3,[createVNode(LeftPanel)],512),[[vShow,unref(editStatus)!==unref(Status).CharacterList&&unref(editStatus)!==unref(Status).GlyphList&&unref(editStatus)!==unref(Status).StrokeGlyphList&&unref(editStatus)!==unref(Status).RadicalGlyphList&&unref(editStatus)!==unref(Status).CompGlyphList&&unref(editStatus)!==unref(Status).AdvancedEdit]]),createBaseVNode("main",_hoisted_9$3,[withDirectives(createBaseVNode("header",_hoisted_10$3,[createVNode(FilesBar)],512),[[vShow,unref(editStatus)!==unref(Status).Pic&&unref(editStatus)!==unref(Status).AdvancedEdit]]),withDirectives(createBaseVNode("main",{class:"canvas-panel-wrapper",style:normalizeStyle({height:unref(editStatus)===unref(Status).Edit||unref(editStatus)===unref(Status).Pic?"calc(100% - 72px)":"calc(100% - 36px)"})},[createVNode(FontPanel)],4),[[vShow,unref(editStatus)!==unref(Status).AdvancedEdit]]),withDirectives(createBaseVNode("footer",_hoisted_11$3,[unref(editStatus)===unref(Status).Edit?(openBlock(),createBlock(BottomBar,{key:0})):unref(editStatus)===unref(Status).Glyph?(openBlock(),createBlock(GlyphBottomBar,{key:1})):createCommentVNode("",!0)],512),[[vShow,unref(editStatus)!==unref(Status).CharacterList&&unref(editStatus)!==unref(Status).GlyphList&&unref(editStatus)!==unref(Status).StrokeGlyphList&&unref(editStatus)!==unref(Status).RadicalGlyphList&&unref(editStatus)!==unref(Status).CompGlyphList&&unref(editStatus)!==unref(Status).AdvancedEdit]])]),withDirectives(createBaseVNode("aside",_hoisted_12$3,[createVNode(RightPanel)],512),[[vShow,unref(editStatus)!==unref(Status).CharacterList&&unref(editStatus)!==unref(Status).GlyphList&&unref(editStatus)!==unref(Status).StrokeGlyphList&&unref(editStatus)!==unref(Status).RadicalGlyphList&&unref(editStatus)!==unref(Status).CompGlyphList&&unref(editStatus)!==unref(Status).AdvancedEdit]])],512),[[vShow,unref(editStatus)!==unref(Status).AdvancedEdit]])])])),[[j,unref(loading$1)]])])}}}),Editor=_export_sfc(_sfc_main$5,[["__scopeId","data-v-92be93de"]]);let rangeFrom=[],rangeTo=[];(()=>{let e="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=0,r=0;n<e.length;n++)(n%2?rangeTo:rangeFrom).push(r=r+e[n])})();function isExtendingChar(e){if(e<768)return!1;for(let n=0,r=rangeFrom.length;;){let g=n+r>>1;if(e<rangeFrom[g])r=g;else if(e>=rangeTo[g])n=g+1;else return!0;if(n==r)return!1}}function isRegionalIndicator(e){return e>=127462&&e<=127487}const ZWJ=8205;function findClusterBreak$1(e,n,r=!0,g=!0){return(r?nextClusterBreak:prevClusterBreak)(e,n,g)}function nextClusterBreak(e,n,r){if(n==e.length)return n;n&&surrogateLow$1(e.charCodeAt(n))&&surrogateHigh$1(e.charCodeAt(n-1))&&n--;let g=codePointAt$2(e,n);for(n+=codePointSize$1(g);n<e.length;){let y=codePointAt$2(e,n);if(g==ZWJ||y==ZWJ||r&&isExtendingChar(y))n+=codePointSize$1(y),g=y;else if(isRegionalIndicator(y)){let k=0,$=n-2;for(;$>=0&&isRegionalIndicator(codePointAt$2(e,$));)k++,$-=2;if(k%2==0)break;n+=2}else break}return n}function prevClusterBreak(e,n,r){for(;n>0;){let g=nextClusterBreak(e,n-2,r);if(g<n)return g;n--}return 0}function codePointAt$2(e,n){let r=e.charCodeAt(n);if(!surrogateHigh$1(r)||n+1==e.length)return r;let g=e.charCodeAt(n+1);return surrogateLow$1(g)?(r-55296<<10)+(g-56320)+65536:r}function surrogateLow$1(e){return e>=56320&&e<57344}function surrogateHigh$1(e){return e>=55296&&e<56320}function codePointSize$1(e){return e<65536?1:2}class Text{lineAt(n){if(n<0||n>this.length)throw new RangeError(`Invalid position ${n} in document of length ${this.length}`);return this.lineInner(n,!1,1,0)}line(n){if(n<1||n>this.lines)throw new RangeError(`Invalid line number ${n} in ${this.lines}-line document`);return this.lineInner(n,!0,1,0)}replace(n,r,g){[n,r]=clip(this,n,r);let y=[];return this.decompose(0,n,y,2),g.length&&g.decompose(0,g.length,y,3),this.decompose(r,this.length,y,1),TextNode.from(y,this.length-(r-n)+g.length)}append(n){return this.replace(this.length,this.length,n)}slice(n,r=this.length){[n,r]=clip(this,n,r);let g=[];return this.decompose(n,r,g,0),TextNode.from(g,r-n)}eq(n){if(n==this)return!0;if(n.length!=this.length||n.lines!=this.lines)return!1;let r=this.scanIdentical(n,1),g=this.length-this.scanIdentical(n,-1),y=new RawTextCursor(this),k=new RawTextCursor(n);for(let $=r,V=r;;){if(y.next($),k.next($),$=0,y.lineBreak!=k.lineBreak||y.done!=k.done||y.value!=k.value)return!1;if(V+=y.value.length,y.done||V>=g)return!0}}iter(n=1){return new RawTextCursor(this,n)}iterRange(n,r=this.length){return new PartialTextCursor(this,n,r)}iterLines(n,r){let g;if(n==null)g=this.iter();else{r==null&&(r=this.lines+1);let y=this.line(n).from;g=this.iterRange(y,Math.max(y,r==this.lines+1?this.length:r<=1?0:this.line(r-1).to))}return new LineCursor(g)}toString(){return this.sliceString(0)}toJSON(){let n=[];return this.flatten(n),n}constructor(){}static of(n){if(n.length==0)throw new RangeError("A document must have at least one line");return n.length==1&&!n[0]?Text.empty:n.length<=32?new TextLeaf(n):TextNode.from(TextLeaf.split(n,[]))}}class TextLeaf extends Text{constructor(n,r=textLength(n)){super(),this.text=n,this.length=r}get lines(){return this.text.length}get children(){return null}lineInner(n,r,g,y){for(let k=0;;k++){let $=this.text[k],V=y+$.length;if((r?g:V)>=n)return new Line(y,V,g,$);y=V+1,g++}}decompose(n,r,g,y){let k=n<=0&&r>=this.length?this:new TextLeaf(sliceText(this.text,n,r),Math.min(r,this.length)-Math.max(0,n));if(y&1){let $=g.pop(),V=appendText(k.text,$.text.slice(),0,k.length);if(V.length<=32)g.push(new TextLeaf(V,$.length+k.length));else{let L=V.length>>1;g.push(new TextLeaf(V.slice(0,L)),new TextLeaf(V.slice(L)))}}else g.push(k)}replace(n,r,g){if(!(g instanceof TextLeaf))return super.replace(n,r,g);[n,r]=clip(this,n,r);let y=appendText(this.text,appendText(g.text,sliceText(this.text,0,n)),r),k=this.length+g.length-(r-n);return y.length<=32?new TextLeaf(y,k):TextNode.from(TextLeaf.split(y,[]),k)}sliceString(n,r=this.length,g=`
`){[n,r]=clip(this,n,r);let y="";for(let k=0,$=0;k<=r&&$<this.text.length;$++){let V=this.text[$],L=k+V.length;k>n&&$&&(y+=g),n<L&&r>k&&(y+=V.slice(Math.max(0,n-k),r-k)),k=L+1}return y}flatten(n){for(let r of this.text)n.push(r)}scanIdentical(){return 0}static split(n,r){let g=[],y=-1;for(let k of n)g.push(k),y+=k.length+1,g.length==32&&(r.push(new TextLeaf(g,y)),g=[],y=-1);return y>-1&&r.push(new TextLeaf(g,y)),r}}class TextNode extends Text{constructor(n,r){super(),this.children=n,this.length=r,this.lines=0;for(let g of n)this.lines+=g.lines}lineInner(n,r,g,y){for(let k=0;;k++){let $=this.children[k],V=y+$.length,L=g+$.lines-1;if((r?L:V)>=n)return $.lineInner(n,r,g,y);y=V+1,g=L+1}}decompose(n,r,g,y){for(let k=0,$=0;$<=r&&k<this.children.length;k++){let V=this.children[k],L=$+V.length;if(n<=L&&r>=$){let z=y&(($<=n?1:0)|(L>=r?2:0));$>=n&&L<=r&&!z?g.push(V):V.decompose(n-$,r-$,g,z)}$=L+1}}replace(n,r,g){if([n,r]=clip(this,n,r),g.lines<this.lines)for(let y=0,k=0;y<this.children.length;y++){let $=this.children[y],V=k+$.length;if(n>=k&&r<=V){let L=$.replace(n-k,r-k,g),z=this.lines-$.lines+L.lines;if(L.lines<z>>4&&L.lines>z>>6){let j=this.children.slice();return j[y]=L,new TextNode(j,this.length-(r-n)+g.length)}return super.replace(k,V,L)}k=V+1}return super.replace(n,r,g)}sliceString(n,r=this.length,g=`
`){[n,r]=clip(this,n,r);let y="";for(let k=0,$=0;k<this.children.length&&$<=r;k++){let V=this.children[k],L=$+V.length;$>n&&k&&(y+=g),n<L&&r>$&&(y+=V.sliceString(n-$,r-$,g)),$=L+1}return y}flatten(n){for(let r of this.children)r.flatten(n)}scanIdentical(n,r){if(!(n instanceof TextNode))return 0;let g=0,[y,k,$,V]=r>0?[0,0,this.children.length,n.children.length]:[this.children.length-1,n.children.length-1,-1,-1];for(;;y+=r,k+=r){if(y==$||k==V)return g;let L=this.children[y],z=n.children[k];if(L!=z)return g+L.scanIdentical(z,r);g+=L.length+1}}static from(n,r=n.reduce((g,y)=>g+y.length+1,-1)){let g=0;for(let re of n)g+=re.lines;if(g<32){let re=[];for(let ue of n)ue.flatten(re);return new TextLeaf(re,r)}let y=Math.max(32,g>>5),k=y<<1,$=y>>1,V=[],L=0,z=-1,j=[];function ae(re){let ue;if(re.lines>k&&re instanceof TextNode)for(let le of re.children)ae(le);else re.lines>$&&(L>$||!L)?(oe(),V.push(re)):re instanceof TextLeaf&&L&&(ue=j[j.length-1])instanceof TextLeaf&&re.lines+ue.lines<=32?(L+=re.lines,z+=re.length+1,j[j.length-1]=new TextLeaf(ue.text.concat(re.text),ue.length+1+re.length)):(L+re.lines>y&&oe(),L+=re.lines,z+=re.length+1,j.push(re))}function oe(){L!=0&&(V.push(j.length==1?j[0]:TextNode.from(j,z)),z=-1,L=j.length=0)}for(let re of n)ae(re);return oe(),V.length==1?V[0]:new TextNode(V,r)}}Text.empty=new TextLeaf([""],0);function textLength(e){let n=-1;for(let r of e)n+=r.length+1;return n}function appendText(e,n,r=0,g=1e9){for(let y=0,k=0,$=!0;k<e.length&&y<=g;k++){let V=e[k],L=y+V.length;L>=r&&(L>g&&(V=V.slice(0,g-y)),y<r&&(V=V.slice(r-y)),$?(n[n.length-1]+=V,$=!1):n.push(V)),y=L+1}return n}function sliceText(e,n,r){return appendText(e,[""],n,r)}class RawTextCursor{constructor(n,r=1){this.dir=r,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[n],this.offsets=[r>0?1:(n instanceof TextLeaf?n.text.length:n.children.length)<<1]}nextInner(n,r){for(this.done=this.lineBreak=!1;;){let g=this.nodes.length-1,y=this.nodes[g],k=this.offsets[g],$=k>>1,V=y instanceof TextLeaf?y.text.length:y.children.length;if($==(r>0?V:0)){if(g==0)return this.done=!0,this.value="",this;r>0&&this.offsets[g-1]++,this.nodes.pop(),this.offsets.pop()}else if((k&1)==(r>0?0:1)){if(this.offsets[g]+=r,n==0)return this.lineBreak=!0,this.value=`
`,this;n--}else if(y instanceof TextLeaf){let L=y.text[$+(r<0?-1:0)];if(this.offsets[g]+=r,L.length>Math.max(0,n))return this.value=n==0?L:r>0?L.slice(n):L.slice(0,L.length-n),this;n-=L.length}else{let L=y.children[$+(r<0?-1:0)];n>L.length?(n-=L.length,this.offsets[g]+=r):(r<0&&this.offsets[g]--,this.nodes.push(L),this.offsets.push(r>0?1:(L instanceof TextLeaf?L.text.length:L.children.length)<<1))}}}next(n=0){return n<0&&(this.nextInner(-n,-this.dir),n=this.value.length),this.nextInner(n,this.dir)}}class PartialTextCursor{constructor(n,r,g){this.value="",this.done=!1,this.cursor=new RawTextCursor(n,r>g?-1:1),this.pos=r>g?n.length:0,this.from=Math.min(r,g),this.to=Math.max(r,g)}nextInner(n,r){if(r<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;n+=Math.max(0,r<0?this.pos-this.to:this.from-this.pos);let g=r<0?this.pos-this.from:this.to-this.pos;n>g&&(n=g),g-=n;let{value:y}=this.cursor.next(n);return this.pos+=(y.length+n)*r,this.value=y.length<=g?y:r<0?y.slice(y.length-g):y.slice(0,g),this.done=!this.value,this}next(n=0){return n<0?n=Math.max(n,this.from-this.pos):n>0&&(n=Math.min(n,this.to-this.pos)),this.nextInner(n,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(n){this.inner=n,this.afterBreak=!0,this.value="",this.done=!1}next(n=0){let{done:r,lineBreak:g,value:y}=this.inner.next(n);return r&&this.afterBreak?(this.value="",this.afterBreak=!1):r?(this.done=!0,this.value=""):g?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=y,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(n,r,g,y){this.from=n,this.to=r,this.number=g,this.text=y}get length(){return this.to-this.from}}function clip(e,n,r){return n=Math.max(0,Math.min(e.length,n)),[n,Math.max(n,Math.min(e.length,r))]}function findClusterBreak(e,n,r=!0,g=!0){return findClusterBreak$1(e,n,r,g)}function surrogateLow(e){return e>=56320&&e<57344}function surrogateHigh(e){return e>=55296&&e<56320}function codePointAt$1(e,n){let r=e.charCodeAt(n);if(!surrogateHigh(r)||n+1==e.length)return r;let g=e.charCodeAt(n+1);return surrogateLow(g)?(r-55296<<10)+(g-56320)+65536:r}function fromCodePoint(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}function codePointSize(e){return e<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(MapMode||(MapMode={}));class ChangeDesc{constructor(n){this.sections=n}get length(){let n=0;for(let r=0;r<this.sections.length;r+=2)n+=this.sections[r];return n}get newLength(){let n=0;for(let r=0;r<this.sections.length;r+=2){let g=this.sections[r+1];n+=g<0?this.sections[r]:g}return n}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(n){for(let r=0,g=0,y=0;r<this.sections.length;){let k=this.sections[r++],$=this.sections[r++];$<0?(n(g,y,k),y+=k):y+=$,g+=k}}iterChangedRanges(n,r=!1){iterChanges(this,n,r)}get invertedDesc(){let n=[];for(let r=0;r<this.sections.length;){let g=this.sections[r++],y=this.sections[r++];y<0?n.push(g,y):n.push(y,g)}return new ChangeDesc(n)}composeDesc(n){return this.empty?n:n.empty?this:composeSets(this,n)}mapDesc(n,r=!1){return n.empty?this:mapSet(this,n,r)}mapPos(n,r=-1,g=MapMode.Simple){let y=0,k=0;for(let $=0;$<this.sections.length;){let V=this.sections[$++],L=this.sections[$++],z=y+V;if(L<0){if(z>n)return k+(n-y);k+=V}else{if(g!=MapMode.Simple&&z>=n&&(g==MapMode.TrackDel&&y<n&&z>n||g==MapMode.TrackBefore&&y<n||g==MapMode.TrackAfter&&z>n))return null;if(z>n||z==n&&r<0&&!V)return n==y||r<0?k:k+L;k+=L}y=z}if(n>y)throw new RangeError(`Position ${n} is out of range for changeset of length ${y}`);return k}touchesRange(n,r=n){for(let g=0,y=0;g<this.sections.length&&y<=r;){let k=this.sections[g++],$=this.sections[g++],V=y+k;if($>=0&&y<=r&&V>=n)return y<n&&V>r?"cover":!0;y=V}return!1}toString(){let n="";for(let r=0;r<this.sections.length;){let g=this.sections[r++],y=this.sections[r++];n+=(n?" ":"")+g+(y>=0?":"+y:"")}return n}toJSON(){return this.sections}static fromJSON(n){if(!Array.isArray(n)||n.length%2||n.some(r=>typeof r!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(n)}static create(n){return new ChangeDesc(n)}}class ChangeSet extends ChangeDesc{constructor(n,r){super(n),this.inserted=r}apply(n){if(this.length!=n.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(r,g,y,k,$)=>n=n.replace(y,y+(g-r),$),!1),n}mapDesc(n,r=!1){return mapSet(this,n,r,!0)}invert(n){let r=this.sections.slice(),g=[];for(let y=0,k=0;y<r.length;y+=2){let $=r[y],V=r[y+1];if(V>=0){r[y]=V,r[y+1]=$;let L=y>>1;for(;g.length<L;)g.push(Text.empty);g.push($?n.slice(k,k+$):Text.empty)}k+=$}return new ChangeSet(r,g)}compose(n){return this.empty?n:n.empty?this:composeSets(this,n,!0)}map(n,r=!1){return n.empty?this:mapSet(this,n,r,!0)}iterChanges(n,r=!1){iterChanges(this,n,r)}get desc(){return ChangeDesc.create(this.sections)}filter(n){let r=[],g=[],y=[],k=new SectionIter(this);e:for(let $=0,V=0;;){let L=$==n.length?1e9:n[$++];for(;V<L||V==L&&k.len==0;){if(k.done)break e;let j=Math.min(k.len,L-V);addSection(y,j,-1);let ae=k.ins==-1?-1:k.off==0?k.ins:0;addSection(r,j,ae),ae>0&&addInsert(g,r,k.text),k.forward(j),V+=j}let z=n[$++];for(;V<z;){if(k.done)break e;let j=Math.min(k.len,z-V);addSection(r,j,-1),addSection(y,j,k.ins==-1?-1:k.off==0?k.ins:0),k.forward(j),V+=j}}return{changes:new ChangeSet(r,g),filtered:ChangeDesc.create(y)}}toJSON(){let n=[];for(let r=0;r<this.sections.length;r+=2){let g=this.sections[r],y=this.sections[r+1];y<0?n.push(g):y==0?n.push([g]):n.push([g].concat(this.inserted[r>>1].toJSON()))}return n}static of(n,r,g){let y=[],k=[],$=0,V=null;function L(j=!1){if(!j&&!y.length)return;$<r&&addSection(y,r-$,-1);let ae=new ChangeSet(y,k);V=V?V.compose(ae.map(V)):ae,y=[],k=[],$=0}function z(j){if(Array.isArray(j))for(let ae of j)z(ae);else if(j instanceof ChangeSet){if(j.length!=r)throw new RangeError(`Mismatched change set length (got ${j.length}, expected ${r})`);L(),V=V?V.compose(j.map(V)):j}else{let{from:ae,to:oe=ae,insert:re}=j;if(ae>oe||ae<0||oe>r)throw new RangeError(`Invalid change range ${ae} to ${oe} (in doc of length ${r})`);let ue=re?typeof re=="string"?Text.of(re.split(g||DefaultSplit)):re:Text.empty,le=ue.length;if(ae==oe&&le==0)return;ae<$&&L(),ae>$&&addSection(y,ae-$,-1),addSection(y,oe-ae,le),addInsert(k,y,ue),$=oe}}return z(n),L(!V),V}static empty(n){return new ChangeSet(n?[n,-1]:[],[])}static fromJSON(n){if(!Array.isArray(n))throw new RangeError("Invalid JSON representation of ChangeSet");let r=[],g=[];for(let y=0;y<n.length;y++){let k=n[y];if(typeof k=="number")r.push(k,-1);else{if(!Array.isArray(k)||typeof k[0]!="number"||k.some(($,V)=>V&&typeof $!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(k.length==1)r.push(k[0],0);else{for(;g.length<y;)g.push(Text.empty);g[y]=Text.of(k.slice(1)),r.push(k[0],g[y].length)}}}return new ChangeSet(r,g)}static createSet(n,r){return new ChangeSet(n,r)}}function addSection(e,n,r,g=!1){if(n==0&&r<=0)return;let y=e.length-2;y>=0&&r<=0&&r==e[y+1]?e[y]+=n:y>=0&&n==0&&e[y]==0?e[y+1]+=r:g?(e[y]+=n,e[y+1]+=r):e.push(n,r)}function addInsert(e,n,r){if(r.length==0)return;let g=n.length-2>>1;if(g<e.length)e[e.length-1]=e[e.length-1].append(r);else{for(;e.length<g;)e.push(Text.empty);e.push(r)}}function iterChanges(e,n,r){let g=e.inserted;for(let y=0,k=0,$=0;$<e.sections.length;){let V=e.sections[$++],L=e.sections[$++];if(L<0)y+=V,k+=V;else{let z=y,j=k,ae=Text.empty;for(;z+=V,j+=L,L&&g&&(ae=ae.append(g[$-2>>1])),!(r||$==e.sections.length||e.sections[$+1]<0);)V=e.sections[$++],L=e.sections[$++];n(y,z,k,j,ae),y=z,k=j}}}function mapSet(e,n,r,g=!1){let y=[],k=g?[]:null,$=new SectionIter(e),V=new SectionIter(n);for(let L=-1;;){if($.done&&V.len||V.done&&$.len)throw new Error("Mismatched change set lengths");if($.ins==-1&&V.ins==-1){let z=Math.min($.len,V.len);addSection(y,z,-1),$.forward(z),V.forward(z)}else if(V.ins>=0&&($.ins<0||L==$.i||$.off==0&&(V.len<$.len||V.len==$.len&&!r))){let z=V.len;for(addSection(y,V.ins,-1);z;){let j=Math.min($.len,z);$.ins>=0&&L<$.i&&$.len<=j&&(addSection(y,0,$.ins),k&&addInsert(k,y,$.text),L=$.i),$.forward(j),z-=j}V.next()}else if($.ins>=0){let z=0,j=$.len;for(;j;)if(V.ins==-1){let ae=Math.min(j,V.len);z+=ae,j-=ae,V.forward(ae)}else if(V.ins==0&&V.len<j)j-=V.len,V.next();else break;addSection(y,z,L<$.i?$.ins:0),k&&L<$.i&&addInsert(k,y,$.text),L=$.i,$.forward($.len-j)}else{if($.done&&V.done)return k?ChangeSet.createSet(y,k):ChangeDesc.create(y);throw new Error("Mismatched change set lengths")}}}function composeSets(e,n,r=!1){let g=[],y=r?[]:null,k=new SectionIter(e),$=new SectionIter(n);for(let V=!1;;){if(k.done&&$.done)return y?ChangeSet.createSet(g,y):ChangeDesc.create(g);if(k.ins==0)addSection(g,k.len,0,V),k.next();else if($.len==0&&!$.done)addSection(g,0,$.ins,V),y&&addInsert(y,g,$.text),$.next();else{if(k.done||$.done)throw new Error("Mismatched change set lengths");{let L=Math.min(k.len2,$.len),z=g.length;if(k.ins==-1){let j=$.ins==-1?-1:$.off?0:$.ins;addSection(g,L,j,V),y&&j&&addInsert(y,g,$.text)}else $.ins==-1?(addSection(g,k.off?0:k.len,L,V),y&&addInsert(y,g,k.textBit(L))):(addSection(g,k.off?0:k.len,$.off?0:$.ins,V),y&&!$.off&&addInsert(y,g,$.text));V=(k.ins>L||$.ins>=0&&$.len>L)&&(V||g.length>z),k.forward2(L),$.forward(L)}}}}class SectionIter{constructor(n){this.set=n,this.i=0,this.next()}next(){let{sections:n}=this.set;this.i<n.length?(this.len=n[this.i++],this.ins=n[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length?Text.empty:n[r]}textBit(n){let{inserted:r}=this.set,g=this.i-2>>1;return g>=r.length&&!n?Text.empty:r[g].slice(this.off,n==null?void 0:this.off+n)}forward(n){n==this.len?this.next():(this.len-=n,this.off+=n)}forward2(n){this.ins==-1?this.forward(n):n==this.ins?this.next():(this.ins-=n,this.off+=n)}}class SelectionRange{constructor(n,r,g){this.from=n,this.to=r,this.flags=g}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let n=this.flags&7;return n==7?null:n}get goalColumn(){let n=this.flags>>6;return n==16777215?void 0:n}map(n,r=-1){let g,y;return this.empty?g=y=n.mapPos(this.from,r):(g=n.mapPos(this.from,1),y=n.mapPos(this.to,-1)),g==this.from&&y==this.to?this:new SelectionRange(g,y,this.flags)}extend(n,r=n){if(n<=this.anchor&&r>=this.anchor)return EditorSelection.range(n,r);let g=Math.abs(n-this.anchor)>Math.abs(r-this.anchor)?n:r;return EditorSelection.range(this.anchor,g)}eq(n,r=!1){return this.anchor==n.anchor&&this.head==n.head&&(!r||!this.empty||this.assoc==n.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(n){if(!n||typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(n.anchor,n.head)}static create(n,r,g){return new SelectionRange(n,r,g)}}class EditorSelection{constructor(n,r){this.ranges=n,this.mainIndex=r}map(n,r=-1){return n.empty?this:EditorSelection.create(this.ranges.map(g=>g.map(n,r)),this.mainIndex)}eq(n,r=!1){if(this.ranges.length!=n.ranges.length||this.mainIndex!=n.mainIndex)return!1;for(let g=0;g<this.ranges.length;g++)if(!this.ranges[g].eq(n.ranges[g],r))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(n,r=!0){return EditorSelection.create([n].concat(this.ranges),r?0:this.mainIndex+1)}replaceRange(n,r=this.mainIndex){let g=this.ranges.slice();return g[r]=n,EditorSelection.create(g,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(n=>n.toJSON()),main:this.mainIndex}}static fromJSON(n){if(!n||!Array.isArray(n.ranges)||typeof n.main!="number"||n.main>=n.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(n.ranges.map(r=>SelectionRange.fromJSON(r)),n.main)}static single(n,r=n){return new EditorSelection([EditorSelection.range(n,r)],0)}static create(n,r=0){if(n.length==0)throw new RangeError("A selection needs at least one range");for(let g=0,y=0;y<n.length;y++){let k=n[y];if(k.empty?k.from<=g:k.from<g)return EditorSelection.normalized(n.slice(),r);g=k.to}return new EditorSelection(n,r)}static cursor(n,r=0,g,y){return SelectionRange.create(n,n,(r==0?0:r<0?8:16)|(g==null?7:Math.min(6,g))|(y??16777215)<<6)}static range(n,r,g,y){let k=(g??16777215)<<6|(y==null?7:Math.min(6,y));return r<n?SelectionRange.create(r,n,48|k):SelectionRange.create(n,r,(r>n?8:0)|k)}static normalized(n,r=0){let g=n[r];n.sort((y,k)=>y.from-k.from),r=n.indexOf(g);for(let y=1;y<n.length;y++){let k=n[y],$=n[y-1];if(k.empty?k.from<=$.to:k.from<$.to){let V=$.from,L=Math.max(k.to,$.to);y<=r&&r--,n.splice(--y,2,k.anchor>k.head?EditorSelection.range(L,V):EditorSelection.range(V,L))}}return new EditorSelection(n,r)}}function checkSelection(e,n){for(let r of e.ranges)if(r.to>n)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(n,r,g,y,k){this.combine=n,this.compareInput=r,this.compare=g,this.isStatic=y,this.id=nextID++,this.default=n([]),this.extensions=typeof k=="function"?k(this):k}get reader(){return this}static define(n={}){return new Facet(n.combine||(r=>r),n.compareInput||((r,g)=>r===g),n.compare||(n.combine?(r,g)=>r===g:sameArray$1),!!n.static,n.enables)}of(n){return new FacetProvider([],this,0,n)}compute(n,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(n,this,1,r)}computeN(n,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(n,this,2,r)}from(n,r){return r||(r=g=>g),this.compute([n],g=>r(g.field(n)))}}function sameArray$1(e,n){return e==n||e.length==n.length&&e.every((r,g)=>r===n[g])}class FacetProvider{constructor(n,r,g,y){this.dependencies=n,this.facet=r,this.type=g,this.value=y,this.id=nextID++}dynamicSlot(n){var r;let g=this.value,y=this.facet.compareInput,k=this.id,$=n[k]>>1,V=this.type==2,L=!1,z=!1,j=[];for(let ae of this.dependencies)ae=="doc"?L=!0:ae=="selection"?z=!0:((r=n[ae.id])!==null&&r!==void 0?r:1)&1||j.push(n[ae.id]);return{create(ae){return ae.values[$]=g(ae),1},update(ae,oe){if(L&&oe.docChanged||z&&(oe.docChanged||oe.selection)||ensureAll(ae,j)){let re=g(ae);if(V?!compareArray(re,ae.values[$],y):!y(re,ae.values[$]))return ae.values[$]=re,1}return 0},reconfigure:(ae,oe)=>{let re,ue=oe.config.address[k];if(ue!=null){let le=getAddr(oe,ue);if(this.dependencies.every(de=>de instanceof Facet?oe.facet(de)===ae.facet(de):de instanceof StateField?oe.field(de,!1)==ae.field(de,!1):!0)||(V?compareArray(re=g(ae),le,y):y(re=g(ae),le)))return ae.values[$]=le,0}else re=g(ae);return ae.values[$]=re,1}}}}function compareArray(e,n,r){if(e.length!=n.length)return!1;for(let g=0;g<e.length;g++)if(!r(e[g],n[g]))return!1;return!0}function ensureAll(e,n){let r=!1;for(let g of n)ensureAddr(e,g)&1&&(r=!0);return r}function dynamicFacetSlot(e,n,r){let g=r.map(L=>e[L.id]),y=r.map(L=>L.type),k=g.filter(L=>!(L&1)),$=e[n.id]>>1;function V(L){let z=[];for(let j=0;j<g.length;j++){let ae=getAddr(L,g[j]);if(y[j]==2)for(let oe of ae)z.push(oe);else z.push(ae)}return n.combine(z)}return{create(L){for(let z of g)ensureAddr(L,z);return L.values[$]=V(L),1},update(L,z){if(!ensureAll(L,k))return 0;let j=V(L);return n.compare(j,L.values[$])?0:(L.values[$]=j,1)},reconfigure(L,z){let j=ensureAll(L,g),ae=z.config.facets[n.id],oe=z.facet(n);if(ae&&!j&&sameArray$1(r,ae))return L.values[$]=oe,0;let re=V(L);return n.compare(re,oe)?(L.values[$]=oe,0):(L.values[$]=re,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(n,r,g,y,k){this.id=n,this.createF=r,this.updateF=g,this.compareF=y,this.spec=k,this.provides=void 0}static define(n){let r=new StateField(nextID++,n.create,n.update,n.compare||((g,y)=>g===y),n);return n.provide&&(r.provides=n.provide(r)),r}create(n){let r=n.facet(initField).find(g=>g.field==this);return(r?.create||this.createF)(n)}slot(n){let r=n[this.id]>>1;return{create:g=>(g.values[r]=this.create(g),1),update:(g,y)=>{let k=g.values[r],$=this.updateF(k,y);return this.compareF(k,$)?0:(g.values[r]=$,1)},reconfigure:(g,y)=>y.config.address[this.id]!=null?(g.values[r]=y.field(this),0):(g.values[r]=this.create(g),1)}}init(n){return[this,initField.of({field:this,create:n})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(e){return n=>new PrecExtension(n,e)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(n,r){this.inner=n,this.prec=r}}class Compartment{of(n){return new CompartmentInstance(this,n)}reconfigure(n){return Compartment.reconfigure.of({compartment:this,extension:n})}get(n){return n.config.compartments.get(this)}}class CompartmentInstance{constructor(n,r){this.compartment=n,this.inner=r}}class Configuration{constructor(n,r,g,y,k,$){for(this.base=n,this.compartments=r,this.dynamicSlots=g,this.address=y,this.staticValues=k,this.facets=$,this.statusTemplate=[];this.statusTemplate.length<g.length;)this.statusTemplate.push(0)}staticFacet(n){let r=this.address[n.id];return r==null?n.default:this.staticValues[r>>1]}static resolve(n,r,g){let y=[],k=Object.create(null),$=new Map;for(let oe of flatten(n,r,$))oe instanceof StateField?y.push(oe):(k[oe.facet.id]||(k[oe.facet.id]=[])).push(oe);let V=Object.create(null),L=[],z=[];for(let oe of y)V[oe.id]=z.length<<1,z.push(re=>oe.slot(re));let j=g?.config.facets;for(let oe in k){let re=k[oe],ue=re[0].facet,le=j&&j[oe]||[];if(re.every(de=>de.type==0))if(V[ue.id]=L.length<<1|1,sameArray$1(le,re))L.push(g.facet(ue));else{let de=ue.combine(re.map(he=>he.value));L.push(g&&ue.compare(de,g.facet(ue))?g.facet(ue):de)}else{for(let de of re)de.type==0?(V[de.id]=L.length<<1|1,L.push(de.value)):(V[de.id]=z.length<<1,z.push(he=>de.dynamicSlot(he)));V[ue.id]=z.length<<1,z.push(de=>dynamicFacetSlot(de,ue,re))}}let ae=z.map(oe=>oe(V));return new Configuration(n,$,ae,V,L,k)}}function flatten(e,n,r){let g=[[],[],[],[],[]],y=new Map;function k($,V){let L=y.get($);if(L!=null){if(L<=V)return;let z=g[L].indexOf($);z>-1&&g[L].splice(z,1),$ instanceof CompartmentInstance&&r.delete($.compartment)}if(y.set($,V),Array.isArray($))for(let z of $)k(z,V);else if($ instanceof CompartmentInstance){if(r.has($.compartment))throw new RangeError("Duplicate use of compartment in extensions");let z=n.get($.compartment)||$.inner;r.set($.compartment,z),k(z,V)}else if($ instanceof PrecExtension)k($.inner,$.prec);else if($ instanceof StateField)g[V].push($),$.provides&&k($.provides,V);else if($ instanceof FacetProvider)g[V].push($),$.facet.extensions&&k($.facet.extensions,Prec_.default);else{let z=$.extension;if(!z)throw new Error(`Unrecognized extension value in extension set (${$}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);k(z,V)}}return k(e,Prec_.default),g.reduce(($,V)=>$.concat(V))}function ensureAddr(e,n){if(n&1)return 2;let r=n>>1,g=e.status[r];if(g==4)throw new Error("Cyclic dependency between fields and/or facets");if(g&2)return g;e.status[r]=4;let y=e.computeSlot(e,e.config.dynamicSlots[r]);return e.status[r]=2|y}function getAddr(e,n){return n&1?e.config.staticValues[n>>1]:e.values[n>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:e=>e.some(n=>n),static:!0}),lineSeparator=Facet.define({combine:e=>e.length?e[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:e=>e.length?e[0]:!1});class Annotation{constructor(n,r){this.type=n,this.value=r}static define(){return new AnnotationType}}class AnnotationType{of(n){return new Annotation(this,n)}}class StateEffectType{constructor(n){this.map=n}of(n){return new StateEffect(this,n)}}class StateEffect{constructor(n,r){this.type=n,this.value=r}map(n){let r=this.type.map(this.value,n);return r===void 0?void 0:r==this.value?this:new StateEffect(this.type,r)}is(n){return this.type==n}static define(n={}){return new StateEffectType(n.map||(r=>r))}static mapEffects(n,r){if(!n.length)return n;let g=[];for(let y of n){let k=y.map(r);k&&g.push(k)}return g}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(n,r,g,y,k,$){this.startState=n,this.changes=r,this.selection=g,this.effects=y,this.annotations=k,this.scrollIntoView=$,this._doc=null,this._state=null,g&&checkSelection(g,r.newLength),k.some(V=>V.type==Transaction.time)||(this.annotations=k.concat(Transaction.time.of(Date.now())))}static create(n,r,g,y,k,$){return new Transaction(n,r,g,y,k,$)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(n){for(let r of this.annotations)if(r.type==n)return r.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(n){let r=this.annotation(Transaction.userEvent);return!!(r&&(r==n||r.length>n.length&&r.slice(0,n.length)==n&&r[n.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges(e,n){let r=[];for(let g=0,y=0;;){let k,$;if(g<e.length&&(y==n.length||n[y]>=e[g]))k=e[g++],$=e[g++];else if(y<n.length)k=n[y++],$=n[y++];else return r;!r.length||r[r.length-1]<k?r.push(k,$):r[r.length-1]<$&&(r[r.length-1]=$)}}function mergeTransaction(e,n,r){var g;let y,k,$;return r?(y=n.changes,k=ChangeSet.empty(n.changes.length),$=e.changes.compose(n.changes)):(y=n.changes.map(e.changes),k=e.changes.mapDesc(n.changes,!0),$=e.changes.compose(y)),{changes:$,selection:n.selection?n.selection.map(k):(g=e.selection)===null||g===void 0?void 0:g.map(y),effects:StateEffect.mapEffects(e.effects,y).concat(StateEffect.mapEffects(n.effects,k)),annotations:e.annotations.length?e.annotations.concat(n.annotations):n.annotations,scrollIntoView:e.scrollIntoView||n.scrollIntoView}}function resolveTransactionInner(e,n,r){let g=n.selection,y=asArray$1(n.annotations);return n.userEvent&&(y=y.concat(Transaction.userEvent.of(n.userEvent))),{changes:n.changes instanceof ChangeSet?n.changes:ChangeSet.of(n.changes||[],r,e.facet(lineSeparator)),selection:g&&(g instanceof EditorSelection?g:EditorSelection.single(g.anchor,g.head)),effects:asArray$1(n.effects),annotations:y,scrollIntoView:!!n.scrollIntoView}}function resolveTransaction(e,n,r){let g=resolveTransactionInner(e,n.length?n[0]:{},e.doc.length);n.length&&n[0].filter===!1&&(r=!1);for(let k=1;k<n.length;k++){n[k].filter===!1&&(r=!1);let $=!!n[k].sequential;g=mergeTransaction(g,resolveTransactionInner(e,n[k],$?g.changes.newLength:e.doc.length),$)}let y=Transaction.create(e,g.changes,g.selection,g.effects,g.annotations,g.scrollIntoView);return extendTransaction(r?filterTransaction(y):y)}function filterTransaction(e){let n=e.startState,r=!0;for(let y of n.facet(changeFilter)){let k=y(e);if(k===!1){r=!1;break}Array.isArray(k)&&(r=r===!0?k:joinRanges(r,k))}if(r!==!0){let y,k;if(r===!1)k=e.changes.invertedDesc,y=ChangeSet.empty(n.doc.length);else{let $=e.changes.filter(r);y=$.changes,k=$.filtered.mapDesc($.changes).invertedDesc}e=Transaction.create(n,y,e.selection&&e.selection.map(k),StateEffect.mapEffects(e.effects,k),e.annotations,e.scrollIntoView)}let g=n.facet(transactionFilter);for(let y=g.length-1;y>=0;y--){let k=g[y](e);k instanceof Transaction?e=k:Array.isArray(k)&&k.length==1&&k[0]instanceof Transaction?e=k[0]:e=resolveTransaction(n,asArray$1(k),!1)}return e}function extendTransaction(e){let n=e.startState,r=n.facet(transactionExtender),g=e;for(let y=r.length-1;y>=0;y--){let k=r[y](e);k&&Object.keys(k).length&&(g=mergeTransaction(g,resolveTransactionInner(n,k,e.changes.newLength),!0))}return g==e?e:Transaction.create(n,e.changes,e.selection,g.effects,g.annotations,g.scrollIntoView)}const none$2=[];function asArray$1(e){return e==null?none$2:Array.isArray(e)?e:[e]}var CharCategory=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}function hasWordChar(e){if(wordChar)return wordChar.test(e);for(let n=0;n<e.length;n++){let r=e[n];if(/\w/.test(r)||r>""&&(r.toUpperCase()!=r.toLowerCase()||nonASCIISingleCaseWordChar.test(r)))return!0}return!1}function makeCategorizer(e){return n=>{if(!/\S/.test(n))return CharCategory.Space;if(hasWordChar(n))return CharCategory.Word;for(let r=0;r<e.length;r++)if(n.indexOf(e[r])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(n,r,g,y,k,$){this.config=n,this.doc=r,this.selection=g,this.values=y,this.status=n.statusTemplate.slice(),this.computeSlot=k,$&&($._state=this);for(let V=0;V<this.config.dynamicSlots.length;V++)ensureAddr(this,V<<1);this.computeSlot=null}field(n,r=!0){let g=this.config.address[n.id];if(g==null){if(r)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,g),getAddr(this,g)}update(...n){return resolveTransaction(this,n,!0)}applyTransaction(n){let r=this.config,{base:g,compartments:y}=r;for(let V of n.effects)V.is(Compartment.reconfigure)?(r&&(y=new Map,r.compartments.forEach((L,z)=>y.set(z,L)),r=null),y.set(V.value.compartment,V.value.extension)):V.is(StateEffect.reconfigure)?(r=null,g=V.value):V.is(StateEffect.appendConfig)&&(r=null,g=asArray$1(g).concat(V.value));let k;r?k=n.startState.values.slice():(r=Configuration.resolve(g,y,this),k=new EditorState(r,this.doc,this.selection,r.dynamicSlots.map(()=>null),(L,z)=>z.reconfigure(L,this),null).values);let $=n.startState.facet(allowMultipleSelections)?n.newSelection:n.newSelection.asSingle();new EditorState(r,n.newDoc,$,k,(V,L)=>L.update(V,n),n)}replaceSelection(n){return typeof n=="string"&&(n=this.toText(n)),this.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:n},range:EditorSelection.cursor(r.from+n.length)}))}changeByRange(n){let r=this.selection,g=n(r.ranges[0]),y=this.changes(g.changes),k=[g.range],$=asArray$1(g.effects);for(let V=1;V<r.ranges.length;V++){let L=n(r.ranges[V]),z=this.changes(L.changes),j=z.map(y);for(let oe=0;oe<V;oe++)k[oe]=k[oe].map(j);let ae=y.mapDesc(z,!0);k.push(L.range.map(ae)),y=y.compose(j),$=StateEffect.mapEffects($,j).concat(StateEffect.mapEffects(asArray$1(L.effects),ae))}return{changes:y,selection:EditorSelection.create(k,r.mainIndex),effects:$}}changes(n=[]){return n instanceof ChangeSet?n:ChangeSet.of(n,this.doc.length,this.facet(EditorState.lineSeparator))}toText(n){return Text.of(n.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(n=0,r=this.doc.length){return this.doc.sliceString(n,r,this.lineBreak)}facet(n){let r=this.config.address[n.id];return r==null?n.default:(ensureAddr(this,r),getAddr(this,r))}toJSON(n){let r={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(n)for(let g in n){let y=n[g];y instanceof StateField&&this.config.address[y.id]!=null&&(r[g]=y.spec.toJSON(this.field(n[g]),this))}return r}static fromJSON(n,r={},g){if(!n||typeof n.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let y=[];if(g){for(let k in g)if(Object.prototype.hasOwnProperty.call(n,k)){let $=g[k],V=n[k];y.push($.init(L=>$.spec.fromJSON(V,L)))}}return EditorState.create({doc:n.doc,selection:EditorSelection.fromJSON(n.selection),extensions:r.extensions?y.concat([r.extensions]):y})}static create(n={}){let r=Configuration.resolve(n.extensions||[],new Map),g=n.doc instanceof Text?n.doc:Text.of((n.doc||"").split(r.staticFacet(EditorState.lineSeparator)||DefaultSplit)),y=n.selection?n.selection instanceof EditorSelection?n.selection:EditorSelection.single(n.selection.anchor,n.selection.head):EditorSelection.single(0);return checkSelection(y,g.length),r.staticFacet(allowMultipleSelections)||(y=y.asSingle()),new EditorState(r,g,y,r.dynamicSlots.map(()=>null),(k,$)=>$.create(k),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(n,...r){for(let g of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(g,n)){n=g[n];break}return r.length&&(n=n.replace(/\$(\$|\d*)/g,(g,y)=>{if(y=="$")return"$";let k=+(y||1);return!k||k>r.length?g:r[k-1]})),n}languageDataAt(n,r,g=-1){let y=[];for(let k of this.facet(languageData))for(let $ of k(this,r,g))Object.prototype.hasOwnProperty.call($,n)&&y.push($[n]);return y}charCategorizer(n){return makeCategorizer(this.languageDataAt("wordChars",n).join(""))}wordAt(n){let{text:r,from:g,length:y}=this.doc.lineAt(n),k=this.charCategorizer(n),$=n-g,V=n-g;for(;$>0;){let L=findClusterBreak(r,$,!1);if(k(r.slice(L,$))!=CharCategory.Word)break;$=L}for(;V<y;){let L=findClusterBreak(r,V);if(k(r.slice(V,L))!=CharCategory.Word)break;V=L}return $==V?null:EditorSelection.range($+g,V+g)}}EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:e=>e.length?e[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly;EditorState.phrases=Facet.define({compare(e,n){let r=Object.keys(e),g=Object.keys(n);return r.length==g.length&&r.every(y=>e[y]==n[y])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig(e,n,r={}){let g={};for(let y of e)for(let k of Object.keys(y)){let $=y[k],V=g[k];if(V===void 0)g[k]=$;else if(!(V===$||$===void 0))if(Object.hasOwnProperty.call(r,k))g[k]=r[k](V,$);else throw new Error("Config merge conflict for field "+k)}for(let y in n)g[y]===void 0&&(g[y]=n[y]);return g}class RangeValue{eq(n){return this==n}range(n,r=n){return Range$1.create(n,r,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;let Range$1=class Qr{constructor(n,r,g){this.from=n,this.to=r,this.value=g}static create(n,r,g){return new Qr(n,r,g)}};function cmpRange(e,n){return e.from-n.from||e.value.startSide-n.value.startSide}class Chunk{constructor(n,r,g,y){this.from=n,this.to=r,this.value=g,this.maxPoint=y}get length(){return this.to[this.to.length-1]}findIndex(n,r,g,y=0){let k=g?this.to:this.from;for(let $=y,V=k.length;;){if($==V)return $;let L=$+V>>1,z=k[L]-n||(g?this.value[L].endSide:this.value[L].startSide)-r;if(L==$)return z>=0?$:V;z>=0?V=L:$=L+1}}between(n,r,g,y){for(let k=this.findIndex(r,-1e9,!0),$=this.findIndex(g,1e9,!1,k);k<$;k++)if(y(this.from[k]+n,this.to[k]+n,this.value[k])===!1)return!1}map(n,r){let g=[],y=[],k=[],$=-1,V=-1;for(let L=0;L<this.value.length;L++){let z=this.value[L],j=this.from[L]+n,ae=this.to[L]+n,oe,re;if(j==ae){let ue=r.mapPos(j,z.startSide,z.mapMode);if(ue==null||(oe=re=ue,z.startSide!=z.endSide&&(re=r.mapPos(j,z.endSide),re<oe)))continue}else if(oe=r.mapPos(j,z.startSide),re=r.mapPos(ae,z.endSide),oe>re||oe==re&&z.startSide>0&&z.endSide<=0)continue;(re-oe||z.endSide-z.startSide)<0||($<0&&($=oe),z.point&&(V=Math.max(V,re-oe)),g.push(z),y.push(oe-$),k.push(re-$))}return{mapped:g.length?new Chunk(y,k,g,V):null,pos:$}}}class RangeSet{constructor(n,r,g,y){this.chunkPos=n,this.chunk=r,this.nextLayer=g,this.maxPoint=y}static create(n,r,g,y){return new RangeSet(n,r,g,y)}get length(){let n=this.chunk.length-1;return n<0?0:Math.max(this.chunkEnd(n),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let n=this.nextLayer.size;for(let r of this.chunk)n+=r.value.length;return n}chunkEnd(n){return this.chunkPos[n]+this.chunk[n].length}update(n){let{add:r=[],sort:g=!1,filterFrom:y=0,filterTo:k=this.length}=n,$=n.filter;if(r.length==0&&!$)return this;if(g&&(r=r.slice().sort(cmpRange)),this.isEmpty)return r.length?RangeSet.of(r):this;let V=new LayerCursor(this,null,-1).goto(0),L=0,z=[],j=new RangeSetBuilder;for(;V.value||L<r.length;)if(L<r.length&&(V.from-r[L].from||V.startSide-r[L].value.startSide)>=0){let ae=r[L++];j.addInner(ae.from,ae.to,ae.value)||z.push(ae)}else V.rangeIndex==1&&V.chunkIndex<this.chunk.length&&(L==r.length||this.chunkEnd(V.chunkIndex)<r[L].from)&&(!$||y>this.chunkEnd(V.chunkIndex)||k<this.chunkPos[V.chunkIndex])&&j.addChunk(this.chunkPos[V.chunkIndex],this.chunk[V.chunkIndex])?V.nextChunk():((!$||y>V.to||k<V.from||$(V.from,V.to,V.value))&&(j.addInner(V.from,V.to,V.value)||z.push(Range$1.create(V.from,V.to,V.value))),V.next());return j.finishInner(this.nextLayer.isEmpty&&!z.length?RangeSet.empty:this.nextLayer.update({add:z,filter:$,filterFrom:y,filterTo:k}))}map(n){if(n.empty||this.isEmpty)return this;let r=[],g=[],y=-1;for(let $=0;$<this.chunk.length;$++){let V=this.chunkPos[$],L=this.chunk[$],z=n.touchesRange(V,V+L.length);if(z===!1)y=Math.max(y,L.maxPoint),r.push(L),g.push(n.mapPos(V));else if(z===!0){let{mapped:j,pos:ae}=L.map(V,n);j&&(y=Math.max(y,j.maxPoint),r.push(j),g.push(ae))}}let k=this.nextLayer.map(n);return r.length==0?k:new RangeSet(g,r,k||RangeSet.empty,y)}between(n,r,g){if(!this.isEmpty){for(let y=0;y<this.chunk.length;y++){let k=this.chunkPos[y],$=this.chunk[y];if(r>=k&&n<=k+$.length&&$.between(k,n-k,r-k,g)===!1)return}this.nextLayer.between(n,r,g)}}iter(n=0){return HeapCursor.from([this]).goto(n)}get isEmpty(){return this.nextLayer==this}static iter(n,r=0){return HeapCursor.from(n).goto(r)}static compare(n,r,g,y,k=-1){let $=n.filter(ae=>ae.maxPoint>0||!ae.isEmpty&&ae.maxPoint>=k),V=r.filter(ae=>ae.maxPoint>0||!ae.isEmpty&&ae.maxPoint>=k),L=findSharedChunks($,V,g),z=new SpanCursor($,L,k),j=new SpanCursor(V,L,k);g.iterGaps((ae,oe,re)=>compare(z,ae,j,oe,re,y)),g.empty&&g.length==0&&compare(z,0,j,0,0,y)}static eq(n,r,g=0,y){y==null&&(y=999999999);let k=n.filter(j=>!j.isEmpty&&r.indexOf(j)<0),$=r.filter(j=>!j.isEmpty&&n.indexOf(j)<0);if(k.length!=$.length)return!1;if(!k.length)return!0;let V=findSharedChunks(k,$),L=new SpanCursor(k,V,0).goto(g),z=new SpanCursor($,V,0).goto(g);for(;;){if(L.to!=z.to||!sameValues(L.active,z.active)||L.point&&(!z.point||!L.point.eq(z.point)))return!1;if(L.to>y)return!0;L.next(),z.next()}}static spans(n,r,g,y,k=-1){let $=new SpanCursor(n,null,k).goto(r),V=r,L=$.openStart;for(;;){let z=Math.min($.to,g);if($.point){let j=$.activeForPoint($.to),ae=$.pointFrom<r?j.length+1:$.point.startSide<0?j.length:Math.min(j.length,L);y.point(V,z,$.point,j,ae,$.pointRank),L=Math.min($.openEnd(z),j.length)}else z>V&&(y.span(V,z,$.active,L),L=$.openEnd(z));if($.to>g)return L+($.point&&$.to>g?1:0);V=$.to,$.next()}}static of(n,r=!1){let g=new RangeSetBuilder;for(let y of n instanceof Range$1?[n]:r?lazySort(n):n)g.add(y.from,y.to,y.value);return g.finish()}static join(n){if(!n.length)return RangeSet.empty;let r=n[n.length-1];for(let g=n.length-2;g>=0;g--)for(let y=n[g];y!=RangeSet.empty;y=y.nextLayer)r=new RangeSet(y.chunkPos,y.chunk,r,Math.max(y.maxPoint,r.maxPoint));return r}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(e){if(e.length>1)for(let n=e[0],r=1;r<e.length;r++){let g=e[r];if(cmpRange(n,g)>0)return e.slice().sort(cmpRange);n=g}return e}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(n){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,n&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(n,r,g){this.addInner(n,r,g)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(n,r,g)}addInner(n,r,g){let y=n-this.lastTo||g.startSide-this.last.endSide;if(y<=0&&(n-this.lastFrom||g.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return y<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=n),this.from.push(n-this.chunkStart),this.to.push(r-this.chunkStart),this.last=g,this.lastFrom=n,this.lastTo=r,this.value.push(g),g.point&&(this.maxPoint=Math.max(this.maxPoint,r-n)),!0)}addChunk(n,r){if((n-this.lastTo||r.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,r.maxPoint),this.chunks.push(r),this.chunkPos.push(n);let g=r.value.length-1;return this.last=r.value[g],this.lastFrom=r.from[g]+n,this.lastTo=r.to[g]+n,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(n){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return n;let r=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(n):n,this.setMaxPoint);return this.from=null,r}}function findSharedChunks(e,n,r){let g=new Map;for(let k of e)for(let $=0;$<k.chunk.length;$++)k.chunk[$].maxPoint<=0&&g.set(k.chunk[$],k.chunkPos[$]);let y=new Set;for(let k of n)for(let $=0;$<k.chunk.length;$++){let V=g.get(k.chunk[$]);V!=null&&(r?r.mapPos(V):V)==k.chunkPos[$]&&!r?.touchesRange(V,V+k.chunk[$].length)&&y.add(k.chunk[$])}return y}class LayerCursor{constructor(n,r,g,y=0){this.layer=n,this.skip=r,this.minPoint=g,this.rank=y}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(n,r=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(n,r,!1),this}gotoInner(n,r,g){for(;this.chunkIndex<this.layer.chunk.length;){let y=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(y)||this.layer.chunkEnd(this.chunkIndex)<n||y.maxPoint<this.minPoint))break;this.chunkIndex++,g=!1}if(this.chunkIndex<this.layer.chunk.length){let y=this.layer.chunk[this.chunkIndex].findIndex(n-this.layer.chunkPos[this.chunkIndex],r,!0);(!g||this.rangeIndex<y)&&this.setRangeIndex(y)}this.next()}forward(n,r){(this.to-n||this.endSide-r)<0&&this.gotoInner(n,r,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let n=this.layer.chunkPos[this.chunkIndex],r=this.layer.chunk[this.chunkIndex],g=n+r.from[this.rangeIndex];if(this.from=g,this.to=n+r.to[this.rangeIndex],this.value=r.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(n){if(n==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=n}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(n){return this.from-n.from||this.startSide-n.startSide||this.rank-n.rank||this.to-n.to||this.endSide-n.endSide}}class HeapCursor{constructor(n){this.heap=n}static from(n,r=null,g=-1){let y=[];for(let k=0;k<n.length;k++)for(let $=n[k];!$.isEmpty;$=$.nextLayer)$.maxPoint>=g&&y.push(new LayerCursor($,r,g,k));return y.length==1?y[0]:new HeapCursor(y)}get startSide(){return this.value?this.value.startSide:0}goto(n,r=-1e9){for(let g of this.heap)g.goto(n,r);for(let g=this.heap.length>>1;g>=0;g--)heapBubble(this.heap,g);return this.next(),this}forward(n,r){for(let g of this.heap)g.forward(n,r);for(let g=this.heap.length>>1;g>=0;g--)heapBubble(this.heap,g);(this.to-n||this.value.endSide-r)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let n=this.heap[0];this.from=n.from,this.to=n.to,this.value=n.value,this.rank=n.rank,n.value&&n.next(),heapBubble(this.heap,0)}}}function heapBubble(e,n){for(let r=e[n];;){let g=(n<<1)+1;if(g>=e.length)break;let y=e[g];if(g+1<e.length&&y.compare(e[g+1])>=0&&(y=e[g+1],g++),r.compare(y)<0)break;e[g]=r,e[n]=y,n=g}}class SpanCursor{constructor(n,r,g){this.minPoint=g,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(n,r,g)}goto(n,r=-1e9){return this.cursor.goto(n,r),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=n,this.endSide=r,this.openStart=-1,this.next(),this}forward(n,r){for(;this.minActive>-1&&(this.activeTo[this.minActive]-n||this.active[this.minActive].endSide-r)<0;)this.removeActive(this.minActive);this.cursor.forward(n,r)}removeActive(n){remove(this.active,n),remove(this.activeTo,n),remove(this.activeRank,n),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(n){let r=0,{value:g,to:y,rank:k}=this.cursor;for(;r<this.activeRank.length&&(k-this.activeRank[r]||y-this.activeTo[r])>0;)r++;insert(this.active,r,g),insert(this.activeTo,r,y),insert(this.activeRank,r,k),n&&insert(n,r,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let n=this.to,r=this.point;this.point=null;let g=this.openStart<0?[]:null;for(;;){let y=this.minActive;if(y>-1&&(this.activeTo[y]-this.cursor.from||this.active[y].endSide-this.cursor.startSide)<0){if(this.activeTo[y]>n){this.to=this.activeTo[y],this.endSide=this.active[y].endSide;break}this.removeActive(y),g&&remove(g,y)}else if(this.cursor.value)if(this.cursor.from>n){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let k=this.cursor.value;if(!k.point)this.addActive(g),this.cursor.next();else if(r&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=k,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=k.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(g){this.openStart=0;for(let y=g.length-1;y>=0&&g[y]<n;y--)this.openStart++}}activeForPoint(n){if(!this.active.length)return this.active;let r=[];for(let g=this.active.length-1;g>=0&&!(this.activeRank[g]<this.pointRank);g--)(this.activeTo[g]>n||this.activeTo[g]==n&&this.active[g].endSide>=this.point.endSide)&&r.push(this.active[g]);return r.reverse()}openEnd(n){let r=0;for(let g=this.activeTo.length-1;g>=0&&this.activeTo[g]>n;g--)r++;return r}}function compare(e,n,r,g,y,k){e.goto(n),r.goto(g);let $=g+y,V=g,L=g-n;for(;;){let z=e.to+L-r.to,j=z||e.endSide-r.endSide,ae=j<0?e.to+L:r.to,oe=Math.min(ae,$);if(e.point||r.point?e.point&&r.point&&(e.point==r.point||e.point.eq(r.point))&&sameValues(e.activeForPoint(e.to),r.activeForPoint(r.to))||k.comparePoint(V,oe,e.point,r.point):oe>V&&!sameValues(e.active,r.active)&&k.compareRange(V,oe,e.active,r.active),ae>$)break;(z||e.openEnd!=r.openEnd)&&k.boundChange&&k.boundChange(ae),V=ae,j<=0&&e.next(),j>=0&&r.next()}}function sameValues(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!=n[r]&&!e[r].eq(n[r]))return!1;return!0}function remove(e,n){for(let r=n,g=e.length-1;r<g;r++)e[r]=e[r+1];e.pop()}function insert(e,n,r){for(let g=e.length-1;g>=n;g--)e[g+1]=e[g];e[n]=r}function findMinIndex(e,n){let r=-1,g=1e9;for(let y=0;y<n.length;y++)(n[y]-g||e[y].endSide-e[r].endSide)<0&&(r=y,g=n[y]);return r}function countColumn(e,n,r=e.length){let g=0;for(let y=0;y<r;)e.charCodeAt(y)==9?(g+=n-g%n,y++):(g++,y=findClusterBreak(e,y));return g}function findColumn(e,n,r,g){for(let y=0,k=0;;){if(k>=n)return y;if(y==e.length)break;k+=e.charCodeAt(y)==9?r-k%r:1,y=findClusterBreak(e,y)}return g===!0?-1:e.length}const C="",COUNT=typeof Symbol>"u"?"__"+C:Symbol.for(C),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(n,r){this.rules=[];let{finish:g}=r||{};function y($){return/^@/.test($)?[$]:$.split(/,\s*/)}function k($,V,L,z){let j=[],ae=/^@(\w+)\b/.exec($[0]),oe=ae&&ae[1]=="keyframes";if(ae&&V==null)return L.push($[0]+";");for(let re in V){let ue=V[re];if(/&/.test(re))k(re.split(/,\s*/).map(le=>$.map(de=>le.replace(/&/,de))).reduce((le,de)=>le.concat(de)),ue,L);else if(ue&&typeof ue=="object"){if(!ae)throw new RangeError("The value of a property ("+re+") should be a primitive value.");k(y(re),ue,j,oe)}else ue!=null&&j.push(re.replace(/_.*/,"").replace(/[A-Z]/g,le=>"-"+le.toLowerCase())+": "+ue+";")}(j.length||oe)&&L.push((g&&!ae&&!z?$.map(g):$).join(", ")+" {"+j.join(" ")+"}")}for(let $ in n)k(y($),n[$],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let n=top[COUNT]||1;return top[COUNT]=n+1,C+n.toString(36)}static mount(n,r,g){let y=n[SET],k=g&&g.nonce;y?k&&y.setNonce(k):y=new StyleSet(n,k),y.mount(Array.isArray(r)?r:[r],n)}}let adoptedSet=new Map;class StyleSet{constructor(n,r){let g=n.ownerDocument||n,y=g.defaultView;if(!n.head&&n.adoptedStyleSheets&&y.CSSStyleSheet){let k=adoptedSet.get(g);if(k)return n[SET]=k;this.sheet=new y.CSSStyleSheet,adoptedSet.set(g,this)}else this.styleTag=g.createElement("style"),r&&this.styleTag.setAttribute("nonce",r);this.modules=[],n[SET]=this}mount(n,r){let g=this.sheet,y=0,k=0;for(let $=0;$<n.length;$++){let V=n[$],L=this.modules.indexOf(V);if(L<k&&L>-1&&(this.modules.splice(L,1),k--,L=-1),L==-1){if(this.modules.splice(k++,0,V),g)for(let z=0;z<V.rules.length;z++)g.insertRule(V.rules[z],y++)}else{for(;k<L;)y+=this.modules[k++].rules.length;y+=V.rules.length,k++}}if(g)r.adoptedStyleSheets.indexOf(this.sheet)<0&&(r.adoptedStyleSheets=[this.sheet,...r.adoptedStyleSheets]);else{let $="";for(let L=0;L<this.modules.length;L++)$+=this.modules[L].getRules()+`
`;this.styleTag.textContent=$;let V=r.head||r;this.styleTag.parentNode!=V&&V.insertBefore(this.styleTag,V.firstChild)}}setNonce(n){this.styleTag&&this.styleTag.getAttribute("nonce")!=n&&this.styleTag.setAttribute("nonce",n)}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(e){var n=mac&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||ie$1&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",r=!n&&e.key||(e.shiftKey?shift:base)[e.keyCode]||e.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}function getSelection(e){let n;return e.nodeType==11?n=e.getSelection?e:e.ownerDocument:n=e,n.getSelection()}function contains(e,n){return n?e==n||e.contains(n.nodeType!=1?n.parentNode:n):!1}function hasSelection(e,n){if(!n.anchorNode)return!1;try{return contains(e,n.anchorNode)}catch{return!1}}function clientRectsFor(e){return e.nodeType==3?textRange(e,0,e.nodeValue.length).getClientRects():e.nodeType==1?e.getClientRects():[]}function isEquivalentPosition(e,n,r,g){return r?scanFor(e,n,r,g,-1)||scanFor(e,n,r,g,1):!1}function domIndex(e){for(var n=0;;n++)if(e=e.previousSibling,!e)return n}function isBlockElement(e){return e.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}function scanFor(e,n,r,g,y){for(;;){if(e==r&&n==g)return!0;if(n==(y<0?0:maxOffset(e))){if(e.nodeName=="DIV")return!1;let k=e.parentNode;if(!k||k.nodeType!=1)return!1;n=domIndex(e)+(y<0?0:1),e=k}else if(e.nodeType==1){if(e=e.childNodes[n+(y<0?-1:0)],e.nodeType==1&&e.contentEditable=="false")return!1;n=y<0?maxOffset(e):0}else return!1}}function maxOffset(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function flattenRect(e,n){let r=n?e.left:e.right;return{left:r,right:r,top:e.top,bottom:e.bottom}}function windowRect(e){let n=e.visualViewport;return n?{left:0,right:n.width,top:0,bottom:n.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function getScale(e,n){let r=n.width/e.offsetWidth,g=n.height/e.offsetHeight;return(r>.995&&r<1.005||!isFinite(r)||Math.abs(n.width-e.offsetWidth)<1)&&(r=1),(g>.995&&g<1.005||!isFinite(g)||Math.abs(n.height-e.offsetHeight)<1)&&(g=1),{scaleX:r,scaleY:g}}function scrollRectIntoView(e,n,r,g,y,k,$,V){let L=e.ownerDocument,z=L.defaultView||window;for(let j=e,ae=!1;j&&!ae;)if(j.nodeType==1){let oe,re=j==L.body,ue=1,le=1;if(re)oe=windowRect(z);else{if(/^(fixed|sticky)$/.test(getComputedStyle(j).position)&&(ae=!0),j.scrollHeight<=j.clientHeight&&j.scrollWidth<=j.clientWidth){j=j.assignedSlot||j.parentNode;continue}let _e=j.getBoundingClientRect();({scaleX:ue,scaleY:le}=getScale(j,_e)),oe={left:_e.left,right:_e.left+j.clientWidth*ue,top:_e.top,bottom:_e.top+j.clientHeight*le}}let de=0,he=0;if(y=="nearest")n.top<oe.top?(he=-(oe.top-n.top+$),r>0&&n.bottom>oe.bottom+he&&(he=n.bottom-oe.bottom+he+$)):n.bottom>oe.bottom&&(he=n.bottom-oe.bottom+$,r<0&&n.top-he<oe.top&&(he=-(oe.top+he-n.top+$)));else{let _e=n.bottom-n.top,xe=oe.bottom-oe.top;he=(y=="center"&&_e<=xe?n.top+_e/2-xe/2:y=="start"||y=="center"&&r<0?n.top-$:n.bottom-xe+$)-oe.top}if(g=="nearest"?n.left<oe.left?(de=-(oe.left-n.left+k),r>0&&n.right>oe.right+de&&(de=n.right-oe.right+de+k)):n.right>oe.right&&(de=n.right-oe.right+k,r<0&&n.left<oe.left+de&&(de=-(oe.left+de-n.left+k))):de=(g=="center"?n.left+(n.right-n.left)/2-(oe.right-oe.left)/2:g=="start"==V?n.left-k:n.right-(oe.right-oe.left)+k)-oe.left,de||he)if(re)z.scrollBy(de,he);else{let _e=0,xe=0;if(he){let Ne=j.scrollTop;j.scrollTop+=he/le,xe=(j.scrollTop-Ne)*le}if(de){let Ne=j.scrollLeft;j.scrollLeft+=de/ue,_e=(j.scrollLeft-Ne)*ue}n={left:n.left-_e,top:n.top-xe,right:n.right-_e,bottom:n.bottom-xe},_e&&Math.abs(_e-de)<1&&(g="nearest"),xe&&Math.abs(xe-he)<1&&(y="nearest")}if(re)break;j=j.assignedSlot||j.parentNode}else if(j.nodeType==11)j=j.host;else break}function scrollableParents(e){let n=e.ownerDocument,r,g;for(let y=e.parentNode;y&&!(y==n.body||r&&g);)if(y.nodeType==1)!g&&y.scrollHeight>y.clientHeight&&(g=y),!r&&y.scrollWidth>y.clientWidth&&(r=y),y=y.assignedSlot||y.parentNode;else if(y.nodeType==11)y=y.host;else break;return{x:r,y:g}}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(n){return this.anchorNode==n.anchorNode&&this.anchorOffset==n.anchorOffset&&this.focusNode==n.focusNode&&this.focusOffset==n.focusOffset}setRange(n){let{anchorNode:r,focusNode:g}=n;this.set(r,Math.min(n.anchorOffset,r?maxOffset(r):0),g,Math.min(n.focusOffset,g?maxOffset(g):0))}set(n,r,g,y){this.anchorNode=n,this.anchorOffset=r,this.focusNode=g,this.focusOffset=y}}let preventScrollSupported=null;function focusPreventScroll(e){if(e.setActive)return e.setActive();if(preventScrollSupported)return e.focus(preventScrollSupported);let n=[];for(let r=e;r&&(n.push(r,r.scrollTop,r.scrollLeft),r!=r.ownerDocument);r=r.parentNode);if(e.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let r=0;r<n.length;){let g=n[r++],y=n[r++],k=n[r++];g.scrollTop!=y&&(g.scrollTop=y),g.scrollLeft!=k&&(g.scrollLeft=k)}}}let scratchRange;function textRange(e,n,r=n){let g=scratchRange||(scratchRange=document.createRange());return g.setEnd(e,r),g.setStart(e,n),g}function dispatchKey(e,n,r,g){let y={key:n,code:n,keyCode:r,which:r,cancelable:!0};g&&({altKey:y.altKey,ctrlKey:y.ctrlKey,shiftKey:y.shiftKey,metaKey:y.metaKey}=g);let k=new KeyboardEvent("keydown",y);k.synthetic=!0,e.dispatchEvent(k);let $=new KeyboardEvent("keyup",y);return $.synthetic=!0,e.dispatchEvent($),k.defaultPrevented||$.defaultPrevented}function getRoot(e){for(;e;){if(e&&(e.nodeType==9||e.nodeType==11&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}function clearAttributes(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function atElementStart(e,n){let r=n.focusNode,g=n.focusOffset;if(!r||n.anchorNode!=r||n.anchorOffset!=g)return!1;for(g=Math.min(g,maxOffset(r));;)if(g){if(r.nodeType!=1)return!1;let y=r.childNodes[g-1];y.contentEditable=="false"?g--:(r=y,g=maxOffset(r))}else{if(r==e)return!0;g=domIndex(r),r=r.parentNode}}function isScrolledToBottom(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function textNodeBefore(e,n){for(let r=e,g=n;;){if(r.nodeType==3&&g>0)return{node:r,offset:g};if(r.nodeType==1&&g>0){if(r.contentEditable=="false")return null;r=r.childNodes[g-1],g=maxOffset(r)}else if(r.parentNode&&!isBlockElement(r))g=domIndex(r),r=r.parentNode;else return null}}function textNodeAfter(e,n){for(let r=e,g=n;;){if(r.nodeType==3&&g<r.nodeValue.length)return{node:r,offset:g};if(r.nodeType==1&&g<r.childNodes.length){if(r.contentEditable=="false")return null;r=r.childNodes[g],g=0}else if(r.parentNode&&!isBlockElement(r))g=domIndex(r)+1,r=r.parentNode;else return null}}class DOMPos{constructor(n,r,g=!0){this.node=n,this.offset=r,this.precise=g}static before(n,r){return new DOMPos(n.parentNode,domIndex(n),r)}static after(n,r){return new DOMPos(n.parentNode,domIndex(n)+1,r)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(n){let r=this.posAtStart;for(let g of this.children){if(g==n)return r;r+=g.length+g.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(n){return this.posBefore(n)+n.length}sync(n,r){if(this.flags&2){let g=this.dom,y=null,k;for(let $ of this.children){if($.flags&7){if(!$.dom&&(k=y?y.nextSibling:g.firstChild)){let V=ContentView.get(k);(!V||!V.parent&&V.canReuseDOM($))&&$.reuseDOM(k)}$.sync(n,r),$.flags&=-8}if(k=y?y.nextSibling:g.firstChild,r&&!r.written&&r.node==g&&k!=$.dom&&(r.written=!0),$.dom.parentNode==g)for(;k&&k!=$.dom;)k=rm$1(k);else g.insertBefore($.dom,k);y=$.dom}for(k=y?y.nextSibling:g.firstChild,k&&r&&r.node==g&&(r.written=!0);k;)k=rm$1(k)}else if(this.flags&1)for(let g of this.children)g.flags&7&&(g.sync(n,r),g.flags&=-8)}reuseDOM(n){}localPosFromDOM(n,r){let g;if(n==this.dom)g=this.dom.childNodes[r];else{let y=maxOffset(n)==0?0:r==0?-1:1;for(;;){let k=n.parentNode;if(k==this.dom)break;y==0&&k.firstChild!=k.lastChild&&(n==k.firstChild?y=-1:y=1),n=k}y<0?g=n:g=n.nextSibling}if(g==this.dom.firstChild)return 0;for(;g&&!ContentView.get(g);)g=g.nextSibling;if(!g)return this.length;for(let y=0,k=0;;y++){let $=this.children[y];if($.dom==g)return k;k+=$.length+$.breakAfter}}domBoundsAround(n,r,g=0){let y=-1,k=-1,$=-1,V=-1;for(let L=0,z=g,j=g;L<this.children.length;L++){let ae=this.children[L],oe=z+ae.length;if(z<n&&oe>r)return ae.domBoundsAround(n,r,z);if(oe>=n&&y==-1&&(y=L,k=z),z>r&&ae.dom.parentNode==this.dom){$=L,V=j;break}j=oe,z=oe+ae.breakAfter}return{from:k,to:V<0?g+this.length:V,startDOM:(y?this.children[y-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:$<this.children.length&&$>=0?this.children[$].dom:null}}markDirty(n=!1){this.flags|=2,this.markParentsDirty(n)}markParentsDirty(n){for(let r=this.parent;r;r=r.parent){if(n&&(r.flags|=2),r.flags&1)return;r.flags|=1,n=!1}}setParent(n){this.parent!=n&&(this.parent=n,this.flags&7&&this.markParentsDirty(!0))}setDOM(n){this.dom!=n&&(this.dom&&(this.dom.cmView=null),this.dom=n,n.cmView=this)}get rootView(){for(let n=this;;){let r=n.parent;if(!r)return n;n=r}}replaceChildren(n,r,g=noChildren){this.markDirty();for(let y=n;y<r;y++){let k=this.children[y];k.parent==this&&g.indexOf(k)<0&&k.destroy()}g.length<250?this.children.splice(n,r-n,...g):this.children=[].concat(this.children.slice(0,n),g,this.children.slice(r));for(let y=0;y<g.length;y++)g[y].setParent(this)}ignoreMutation(n){return!1}ignoreEvent(n){return!1}childCursor(n=this.length){return new ChildCursor(this.children,n,this.children.length)}childPos(n,r=1){return this.childCursor().findPos(n,r)}toString(){let n=this.constructor.name.replace("View","");return n+(this.children.length?"("+this.children.join()+")":this.length?"["+(n=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(n){return n.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(n,r,g,y,k,$){return!1}become(n){return!1}canReuseDOM(n){return n.constructor==this.constructor&&!((this.flags|n.flags)&8)}getSide(){return 0}destroy(){for(let n of this.children)n.parent==this&&n.destroy();this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(e){let n=e.nextSibling;return e.parentNode.removeChild(e),n}class ChildCursor{constructor(n,r,g){this.children=n,this.pos=r,this.i=g,this.off=0}findPos(n,r=1){for(;;){if(n>this.pos||n==this.pos&&(r>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=n-this.pos,this;let g=this.children[--this.i];this.pos-=g.length+g.breakAfter}}}function replaceRange(e,n,r,g,y,k,$,V,L){let{children:z}=e,j=z.length?z[n]:null,ae=k.length?k[k.length-1]:null,oe=ae?ae.breakAfter:$;if(!(n==g&&j&&!$&&!oe&&k.length<2&&j.merge(r,y,k.length?ae:null,r==0,V,L))){if(g<z.length){let re=z[g];re&&(y<re.length||re.breakAfter&&ae?.breakAfter)?(n==g&&(re=re.split(y),y=0),!oe&&ae&&re.merge(0,y,ae,!0,0,L)?k[k.length-1]=re:((y||re.children.length&&!re.children[0].length)&&re.merge(0,y,null,!1,0,L),k.push(re))):re?.breakAfter&&(ae?ae.breakAfter=1:$=1),g++}for(j&&(j.breakAfter=$,r>0&&(!$&&k.length&&j.merge(r,j.length,k[0],!1,V,0)?j.breakAfter=k.shift().breakAfter:(r<j.length||j.children.length&&j.children[j.children.length-1].length==0)&&j.merge(r,j.length,null,!1,V,0),n++));n<g&&k.length;)if(z[g-1].become(k[k.length-1]))g--,k.pop(),L=k.length?0:V;else if(z[n].become(k[0]))n++,k.shift(),V=k.length?0:L;else break;!k.length&&n&&g<z.length&&!z[n-1].breakAfter&&z[g].merge(0,0,z[n-1],!1,V,L)&&n--,(n<g||k.length)&&e.replaceChildren(n,g,k)}}function mergeChildrenInto(e,n,r,g,y,k){let $=e.childCursor(),{i:V,off:L}=$.findPos(r,1),{i:z,off:j}=$.findPos(n,-1),ae=n-r;for(let oe of g)ae+=oe.length;e.length+=ae,replaceRange(e,z,j,V,L,g,0,y,k)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor(n){super(),this.text=n}get length(){return this.text.length}createDOM(n){this.setDOM(n||document.createTextNode(this.text))}sync(n,r){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(r&&r.node==this.dom&&(r.written=!0),this.dom.nodeValue=this.text)}reuseDOM(n){n.nodeType==3&&this.createDOM(n)}merge(n,r,g){return this.flags&8||g&&(!(g instanceof TextView)||this.length-(r-n)+g.length>MaxJoinLen||g.flags&8)?!1:(this.text=this.text.slice(0,n)+(g?g.text:"")+this.text.slice(r),this.markDirty(),!0)}split(n){let r=new TextView(this.text.slice(n));return this.text=this.text.slice(0,n),this.markDirty(),r.flags|=this.flags&8,r}localPosFromDOM(n,r){return n==this.dom?r:r?this.text.length:0}domAtPos(n){return new DOMPos(this.dom,n)}domBoundsAround(n,r,g){return{from:g,to:g+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(n,r){return textCoords(this.dom,n,r)}}class MarkView extends ContentView{constructor(n,r=[],g=0){super(),this.mark=n,this.children=r,this.length=g;for(let y of r)y.setParent(this)}setAttrs(n){if(clearAttributes(n),this.mark.class&&(n.className=this.mark.class),this.mark.attrs)for(let r in this.mark.attrs)n.setAttribute(r,this.mark.attrs[r]);return n}canReuseDOM(n){return super.canReuseDOM(n)&&!((this.flags|n.flags)&8)}reuseDOM(n){n.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(n),this.flags|=6)}sync(n,r){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(n,r)}merge(n,r,g,y,k,$){return g&&(!(g instanceof MarkView&&g.mark.eq(this.mark))||n&&k<=0||r<this.length&&$<=0)?!1:(mergeChildrenInto(this,n,r,g?g.children.slice():[],k-1,$-1),this.markDirty(),!0)}split(n){let r=[],g=0,y=-1,k=0;for(let V of this.children){let L=g+V.length;L>n&&r.push(g<n?V.split(n-g):V),y<0&&g>=n&&(y=k),g=L,k++}let $=this.length-n;return this.length=n,y>-1&&(this.children.length=y,this.markDirty()),new MarkView(this.mark,r,$)}domAtPos(n){return inlineDOMAtPos(this,n)}coordsAt(n,r){return coordsInChildren(this,n,r)}}function textCoords(e,n,r){let g=e.nodeValue.length;n>g&&(n=g);let y=n,k=n,$=0;n==0&&r<0||n==g&&r>=0?browser.chrome||browser.gecko||(n?(y--,$=1):k<g&&(k++,$=-1)):r<0?y--:k<g&&k++;let V=textRange(e,y,k).getClientRects();if(!V.length)return null;let L=V[($?$<0:r>=0)?0:V.length-1];return browser.safari&&!$&&L.width==0&&(L=Array.prototype.find.call(V,z=>z.width)||L),$?flattenRect(L,$<0):L||null}class WidgetView extends ContentView{static create(n,r,g){return new WidgetView(n,r,g)}constructor(n,r,g){super(),this.widget=n,this.length=r,this.side=g,this.prevWidget=null}split(n){let r=WidgetView.create(this.widget,this.length-n,this.side);return this.length-=n,r}sync(n){(!this.dom||!this.widget.updateDOM(this.dom,n))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(n)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(n,r,g,y,k,$){return g&&(!(g instanceof WidgetView)||!this.widget.compare(g.widget)||n>0&&k<=0||r<this.length&&$<=0)?!1:(this.length=n+(g?g.length:0)+(this.length-r),!0)}become(n){return n instanceof WidgetView&&n.side==this.side&&this.widget.constructor==n.widget.constructor?(this.widget.compare(n.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=n.widget,this.length=n.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(n){return this.widget.ignoreEvent(n)}get overrideDOMText(){if(this.length==0)return Text.empty;let n=this;for(;n.parent;)n=n.parent;let{view:r}=n,g=r&&r.state.doc,y=this.posAtStart;return g?g.slice(y,y+this.length):Text.empty}domAtPos(n){return(this.length?n==0:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,n==this.length)}domBoundsAround(){return null}coordsAt(n,r){let g=this.widget.coordsAt(this.dom,n,r);if(g)return g;let y=this.dom.getClientRects(),k=null;if(!y.length)return null;let $=this.side?this.side<0:n>0;for(let V=$?y.length-1:0;k=y[V],!(n>0?V==0:V==y.length-1||k.top<k.bottom);V+=$?-1:1);return flattenRect(k,!$)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor(n){super(),this.side=n}get length(){return 0}merge(){return!1}become(n){return n instanceof WidgetBufferView&&n.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let n=document.createElement("img");n.className="cm-widgetBuffer",n.setAttribute("aria-hidden","true"),this.setDOM(n)}}getSide(){return this.side}domAtPos(n){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(n){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text.empty}get isHidden(){return!0}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos(e,n){let r=e.dom,{children:g}=e,y=0;for(let k=0;y<g.length;y++){let $=g[y],V=k+$.length;if(!(V==k&&$.getSide()<=0)){if(n>k&&n<V&&$.dom.parentNode==r)return $.domAtPos(n-k);if(n<=k)break;k=V}}for(let k=y;k>0;k--){let $=g[k-1];if($.dom.parentNode==r)return $.domAtPos($.length)}for(let k=y;k<g.length;k++){let $=g[k];if($.dom.parentNode==r)return $.domAtPos(0)}return new DOMPos(r,0)}function joinInlineInto(e,n,r){let g,{children:y}=e;r>0&&n instanceof MarkView&&y.length&&(g=y[y.length-1])instanceof MarkView&&g.mark.eq(n.mark)?joinInlineInto(g,n.children[0],r-1):(y.push(n),n.setParent(e)),e.length+=n.length}function coordsInChildren(e,n,r){let g=null,y=-1,k=null,$=-1;function V(z,j){for(let ae=0,oe=0;ae<z.children.length&&oe<=j;ae++){let re=z.children[ae],ue=oe+re.length;ue>=j&&(re.children.length?V(re,j-oe):(!k||k.isHidden&&r>0)&&(ue>j||oe==ue&&re.getSide()>0)?(k=re,$=j-oe):(oe<j||oe==ue&&re.getSide()<0&&!re.isHidden)&&(g=re,y=j-oe)),oe=ue}}V(e,n);let L=(r<0?g:k)||g||k;return L?L.coordsAt(Math.max(0,L==g?y:$),r):fallbackRect(e)}function fallbackRect(e){let n=e.dom.lastChild;if(!n)return e.dom.getBoundingClientRect();let r=clientRectsFor(n);return r[r.length-1]||null}function combineAttrs(e,n){for(let r in e)r=="class"&&n.class?n.class+=" "+e.class:r=="style"&&n.style?n.style+=";"+e.style:n[r]=e[r];return n}const noAttrs$1=Object.create(null);function attrsEq(e,n,r){if(e==n)return!0;e||(e=noAttrs$1),n||(n=noAttrs$1);let g=Object.keys(e),y=Object.keys(n);if(g.length-(r&&g.indexOf(r)>-1?1:0)!=y.length-(r&&y.indexOf(r)>-1?1:0))return!1;for(let k of g)if(k!=r&&(y.indexOf(k)==-1||e[k]!==n[k]))return!1;return!0}function updateAttrs(e,n,r){let g=!1;if(n)for(let y in n)r&&y in r||(g=!0,y=="style"?e.style.cssText="":e.removeAttribute(y));if(r)for(let y in r)n&&n[y]==r[y]||(g=!0,y=="style"?e.style.cssText=r[y]:e.setAttribute(y,r[y]));return g}function getAttrs(e){let n=Object.create(null);for(let r=0;r<e.attributes.length;r++){let g=e.attributes[r];n[g.name]=g.value}return n}class WidgetType{eq(n){return!1}updateDOM(n,r){return!1}compare(n){return this==n||this.constructor==n.constructor&&this.eq(n)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(n){return!0}coordsAt(n,r,g){return null}get isHidden(){return!1}get editable(){return!1}destroy(n){}}var BlockType=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(n,r,g,y){super(),this.startSide=n,this.endSide=r,this.widget=g,this.spec=y}get heightRelevant(){return!1}static mark(n){return new MarkDecoration(n)}static widget(n){let r=Math.max(-1e4,Math.min(1e4,n.side||0)),g=!!n.block;return r+=g&&!n.inlineOrder?r>0?3e8:-4e8:r>0?1e8:-1e8,new PointDecoration(n,r,r,g,n.widget||null,!1)}static replace(n){let r=!!n.block,g,y;if(n.isBlockGap)g=-5e8,y=4e8;else{let{start:k,end:$}=getInclusive(n,r);g=(k?r?-3e8:-1:5e8)-1,y=($?r?2e8:1:-6e8)+1}return new PointDecoration(n,g,y,r,n.widget||null,!0)}static line(n){return new LineDecoration(n)}static set(n,r=!1){return RangeSet.of(n,r)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(n){let{start:r,end:g}=getInclusive(n);super(r?-1:5e8,g?1:-6e8,null,n),this.tagName=n.tagName||"span",this.class=n.class||"",this.attrs=n.attributes||null}eq(n){var r,g;return this==n||n instanceof MarkDecoration&&this.tagName==n.tagName&&(this.class||((r=this.attrs)===null||r===void 0?void 0:r.class))==(n.class||((g=n.attrs)===null||g===void 0?void 0:g.class))&&attrsEq(this.attrs,n.attrs,"class")}range(n,r=n){if(n>=r)throw new RangeError("Mark decorations may not be empty");return super.range(n,r)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(n){super(-2e8,-2e8,null,n)}eq(n){return n instanceof LineDecoration&&this.spec.class==n.spec.class&&attrsEq(this.spec.attributes,n.spec.attributes)}range(n,r=n){if(r!=n)throw new RangeError("Line decoration ranges must be zero-length");return super.range(n,r)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(n,r,g,y,k,$){super(r,g,k,n),this.block=y,this.isReplace=$,this.mapMode=y?r<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(n){return n instanceof PointDecoration&&widgetsEq(this.widget,n.widget)&&this.block==n.block&&this.startSide==n.startSide&&this.endSide==n.endSide}range(n,r=n){if(this.isReplace&&(n>r||n==r&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&r!=n)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(n,r)}}PointDecoration.prototype.point=!0;function getInclusive(e,n=!1){let{inclusiveStart:r,inclusiveEnd:g}=e;return r==null&&(r=e.inclusive),g==null&&(g=e.inclusive),{start:r??n,end:g??n}}function widgetsEq(e,n){return e==n||!!(e&&n&&e.compare(n))}function addRange(e,n,r,g=0){let y=r.length-1;y>=0&&r[y]+g>=e?r[y]=Math.max(r[y],n):r.push(e,n)}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(n,r,g,y,k,$){if(g){if(!(g instanceof LineView))return!1;this.dom||g.transferDOM(this)}return y&&this.setDeco(g?g.attrs:null),mergeChildrenInto(this,n,r,g?g.children.slice():[],k,$),!0}split(n){let r=new LineView;if(r.breakAfter=this.breakAfter,this.length==0)return r;let{i:g,off:y}=this.childPos(n);y&&(r.append(this.children[g].split(y),0),this.children[g].merge(y,this.children[g].length,null,!1,0,0),g++);for(let k=g;k<this.children.length;k++)r.append(this.children[k],0);for(;g>0&&this.children[g-1].length==0;)this.children[--g].destroy();return this.children.length=g,this.markDirty(),this.length=n,r}transferDOM(n){this.dom&&(this.markDirty(),n.setDOM(this.dom),n.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(n){attrsEq(this.attrs,n)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=n)}append(n,r){joinInlineInto(this,n,r)}addLineDeco(n){let r=n.spec.attributes,g=n.spec.class;r&&(this.attrs=combineAttrs(r,this.attrs||{})),g&&(this.attrs=combineAttrs({class:g},this.attrs||{}))}domAtPos(n){return inlineDOMAtPos(this,n)}reuseDOM(n){n.nodeName=="DIV"&&(this.setDOM(n),this.flags|=6)}sync(n,r){var g;this.dom?this.flags&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(n,r);let y=this.dom.lastChild;for(;y&&ContentView.get(y)instanceof MarkView;)y=y.lastChild;if(!y||!this.length||y.nodeName!="BR"&&((g=ContentView.get(y))===null||g===void 0?void 0:g.isEditable)==!1&&(!browser.ios||!this.children.some(k=>k instanceof TextView))){let k=document.createElement("BR");k.cmIgnore=!0,this.dom.appendChild(k)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let n=0,r;for(let g of this.children){if(!(g instanceof TextView)||/[^ -~]/.test(g.text))return null;let y=clientRectsFor(g.dom);if(y.length!=1)return null;n+=y[0].width,r=y[0].height}return n?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:n/this.length,textHeight:r}:null}coordsAt(n,r){let g=coordsInChildren(this,n,r);if(!this.children.length&&g&&this.parent){let{heightOracle:y}=this.parent.view.viewState,k=g.bottom-g.top;if(Math.abs(k-y.lineHeight)<2&&y.textHeight<k){let $=(k-y.textHeight)/2;return{top:g.top+$,bottom:g.bottom-$,left:g.left,right:g.left}}}return g}become(n){return n instanceof LineView&&this.children.length==0&&n.children.length==0&&attrsEq(this.attrs,n.attrs)&&this.breakAfter==n.breakAfter}covers(){return!0}static find(n,r){for(let g=0,y=0;g<n.children.length;g++){let k=n.children[g],$=y+k.length;if($>=r){if(k instanceof LineView)return k;if($>r)break}y=$+k.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(n,r,g){super(),this.widget=n,this.length=r,this.deco=g,this.breakAfter=0,this.prevWidget=null}merge(n,r,g,y,k,$){return g&&(!(g instanceof BlockWidgetView)||!this.widget.compare(g.widget)||n>0&&k<=0||r<this.length&&$<=0)?!1:(this.length=n+(g?g.length:0)+(this.length-r),!0)}domAtPos(n){return n==0?DOMPos.before(this.dom):DOMPos.after(this.dom,n==this.length)}split(n){let r=this.length-n;this.length=n;let g=new BlockWidgetView(this.widget,r,this.deco);return g.breakAfter=this.breakAfter,g}get children(){return noChildren}sync(n){(!this.dom||!this.widget.updateDOM(this.dom,n))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(n)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(n){return n instanceof BlockWidgetView&&n.widget.constructor==this.widget.constructor?(n.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=n.widget,this.length=n.length,this.deco=n.deco,this.breakAfter=n.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(n){return this.widget.ignoreEvent(n)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(n,r){let g=this.widget.coordsAt(this.dom,n,r);return g||(this.widget instanceof BlockGapWidget?null:flattenRect(this.dom.getBoundingClientRect(),this.length?n==0:r<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(n){let{startSide:r,endSide:g}=this.deco;return r==g?!1:n<0?r<0:g>0}}class BlockGapWidget extends WidgetType{constructor(n){super(),this.height=n}toDOM(){let n=document.createElement("div");return n.className="cm-gap",this.updateDOM(n),n}eq(n){return n.height==this.height}updateDOM(n){return n.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ContentBuilder{constructor(n,r,g,y){this.doc=n,this.pos=r,this.end=g,this.disallowBlockEffectsFor=y,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=n.iter(),this.skip=r}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let n=this.content[this.content.length-1];return!(n.breakAfter||n instanceof BlockWidgetView&&n.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(n=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),n),n.length),this.pendingBuffer=0)}addBlockWidget(n){this.flushBuffer(),this.curLine=null,this.content.push(n)}finish(n){this.pendingBuffer&&n<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(n&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView)&&this.getLine()}buildText(n,r,g){for(;n>0;){if(this.textOff==this.text.length){let{value:k,lineBreak:$,done:V}=this.cursor.next(this.skip);if(this.skip=0,V)throw new Error("Ran out of text content when drawing inline views");if($){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,n--;continue}else this.text=k,this.textOff=0}let y=Math.min(this.text.length-this.textOff,n,512);this.flushBuffer(r.slice(r.length-g)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+y)),r),g),this.atCursorPos=!0,this.textOff+=y,n-=y,g=0}}span(n,r,g,y){this.buildText(r-n,g,y),this.pos=r,this.openStart<0&&(this.openStart=y)}point(n,r,g,y,k,$){if(this.disallowBlockEffectsFor[$]&&g instanceof PointDecoration){if(g.block)throw new RangeError("Block decorations may not be specified via plugins");if(r>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let V=r-n;if(g instanceof PointDecoration)if(g.block)g.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(g.widget||NullWidget.block,V,g));else{let L=WidgetView.create(g.widget||NullWidget.inline,V,V?0:g.startSide),z=this.atCursorPos&&!L.isEditable&&k<=y.length&&(n<r||g.startSide>0),j=!L.isEditable&&(n<r||k>y.length||g.startSide<=0),ae=this.getLine();this.pendingBuffer==2&&!z&&!L.isEditable&&(this.pendingBuffer=0),this.flushBuffer(y),z&&(ae.append(wrapMarks(new WidgetBufferView(1),y),k),k=y.length+Math.max(0,k-y.length)),ae.append(wrapMarks(L,y),k),this.atCursorPos=j,this.pendingBuffer=j?n<r||k>y.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=y.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(g);V&&(this.textOff+V<=this.text.length?this.textOff+=V:(this.skip+=V-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=r),this.openStart<0&&(this.openStart=k)}static build(n,r,g,y,k){let $=new ContentBuilder(n,r,g,k);return $.openEnd=RangeSet.spans(y,r,g,$),$.openStart<0&&($.openStart=$.openEnd),$.finish($.openEnd),$}}function wrapMarks(e,n){for(let r of n)e=new MarkView(r,[e],e.length);return e}class NullWidget extends WidgetType{constructor(n){super(),this.tag=n}eq(n){return n.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(n){return n.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}NullWidget.inline=new NullWidget("span");NullWidget.block=new NullWidget("div");var Direction=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(e){let n=[];for(let r=0;r<e.length;r++)n.push(1<<+e[r]);return n}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let e of["()","[]","{}"]){let n=e.charCodeAt(0),r=e.charCodeAt(1);Brackets[n]=r,Brackets[r]=-n}function charType(e){return e<=247?LowTypes[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?ArabicTypes[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(n,r,g){this.from=n,this.to=r,this.level=g}side(n,r){return this.dir==r==n?this.to:this.from}forward(n,r){return n==(this.dir==r)}static find(n,r,g,y){let k=-1;for(let $=0;$<n.length;$++){let V=n[$];if(V.from<=r&&V.to>=r){if(V.level==g)return $;(k<0||(y!=0?y<0?V.from<r:V.to>r:n[k].level>V.level))&&(k=$)}}if(k<0)throw new RangeError("Index out of range");return k}}function isolatesEq(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let g=e[r],y=n[r];if(g.from!=y.from||g.to!=y.to||g.direction!=y.direction||!isolatesEq(g.inner,y.inner))return!1}return!0}const types=[];function computeCharTypes(e,n,r,g,y){for(let k=0;k<=g.length;k++){let $=k?g[k-1].to:n,V=k<g.length?g[k].from:r,L=k?256:y;for(let z=$,j=L,ae=L;z<V;z++){let oe=charType(e.charCodeAt(z));oe==512?oe=j:oe==8&&ae==4&&(oe=16),types[z]=oe==4?2:oe,oe&7&&(ae=oe),j=oe}for(let z=$,j=L,ae=L;z<V;z++){let oe=types[z];if(oe==128)z<V-1&&j==types[z+1]&&j&24?oe=types[z]=j:types[z]=256;else if(oe==64){let re=z+1;for(;re<V&&types[re]==64;)re++;let ue=z&&j==8||re<r&&types[re]==8?ae==1?1:8:256;for(let le=z;le<re;le++)types[le]=ue;z=re-1}else oe==8&&ae==1&&(types[z]=1);j=oe,oe&7&&(ae=oe)}}}function processBracketPairs(e,n,r,g,y){let k=y==1?2:1;for(let $=0,V=0,L=0;$<=g.length;$++){let z=$?g[$-1].to:n,j=$<g.length?g[$].from:r;for(let ae=z,oe,re,ue;ae<j;ae++)if(re=Brackets[oe=e.charCodeAt(ae)])if(re<0){for(let le=V-3;le>=0;le-=3)if(BracketStack[le+1]==-re){let de=BracketStack[le+2],he=de&2?y:de&4?de&1?k:y:0;he&&(types[ae]=types[BracketStack[le]]=he),V=le;break}}else{if(BracketStack.length==189)break;BracketStack[V++]=ae,BracketStack[V++]=oe,BracketStack[V++]=L}else if((ue=types[ae])==2||ue==1){let le=ue==y;L=le?0:1;for(let de=V-3;de>=0;de-=3){let he=BracketStack[de+2];if(he&2)break;if(le)BracketStack[de+2]|=2;else{if(he&4)break;BracketStack[de+2]|=4}}}}}function processNeutrals(e,n,r,g){for(let y=0,k=g;y<=r.length;y++){let $=y?r[y-1].to:e,V=y<r.length?r[y].from:n;for(let L=$;L<V;){let z=types[L];if(z==256){let j=L+1;for(;;)if(j==V){if(y==r.length)break;j=r[y++].to,V=y<r.length?r[y].from:n}else if(types[j]==256)j++;else break;let ae=k==1,oe=(j<n?types[j]:g)==1,re=ae==oe?ae?1:2:g;for(let ue=j,le=y,de=le?r[le-1].to:e;ue>L;)ue==de&&(ue=r[--le].from,de=le?r[le-1].to:e),types[--ue]=re;L=j}else k=z,L++}}}function emitSpans(e,n,r,g,y,k,$){let V=g%2?2:1;if(g%2==y%2)for(let L=n,z=0;L<r;){let j=!0,ae=!1;if(z==k.length||L<k[z].from){let le=types[L];le!=V&&(j=!1,ae=le==16)}let oe=!j&&V==1?[]:null,re=j?g:g+1,ue=L;e:for(;;)if(z<k.length&&ue==k[z].from){if(ae)break e;let le=k[z];if(!j)for(let de=le.to,he=z+1;;){if(de==r)break e;if(he<k.length&&k[he].from==de)de=k[he++].to;else{if(types[de]==V)break e;break}}if(z++,oe)oe.push(le);else{le.from>L&&$.push(new BidiSpan(L,le.from,re));let de=le.direction==LTR!=!(re%2);computeSectionOrder(e,de?g+1:g,y,le.inner,le.from,le.to,$),L=le.to}ue=le.to}else{if(ue==r||(j?types[ue]!=V:types[ue]==V))break;ue++}oe?emitSpans(e,L,ue,g+1,y,oe,$):L<ue&&$.push(new BidiSpan(L,ue,re)),L=ue}else for(let L=r,z=k.length;L>n;){let j=!0,ae=!1;if(!z||L>k[z-1].to){let le=types[L-1];le!=V&&(j=!1,ae=le==16)}let oe=!j&&V==1?[]:null,re=j?g:g+1,ue=L;e:for(;;)if(z&&ue==k[z-1].to){if(ae)break e;let le=k[--z];if(!j)for(let de=le.from,he=z;;){if(de==n)break e;if(he&&k[he-1].to==de)de=k[--he].from;else{if(types[de-1]==V)break e;break}}if(oe)oe.push(le);else{le.to<L&&$.push(new BidiSpan(le.to,L,re));let de=le.direction==LTR!=!(re%2);computeSectionOrder(e,de?g+1:g,y,le.inner,le.from,le.to,$),L=le.from}ue=le.from}else{if(ue==n||(j?types[ue-1]!=V:types[ue-1]==V))break;ue--}oe?emitSpans(e,ue,L,g+1,y,oe,$):ue<L&&$.push(new BidiSpan(ue,L,re)),L=ue}}function computeSectionOrder(e,n,r,g,y,k,$){let V=n%2?2:1;computeCharTypes(e,y,k,g,V),processBracketPairs(e,y,k,g,V),processNeutrals(y,k,g,V),emitSpans(e,y,k,n,r,g,$)}function computeOrder(e,n,r){if(!e)return[new BidiSpan(0,0,n==RTL?1:0)];if(n==LTR&&!r.length&&!BidiRE.test(e))return trivialOrder(e.length);if(r.length)for(;e.length>types.length;)types[types.length]=256;let g=[],y=n==LTR?0:1;return computeSectionOrder(e,y,y,r,0,e.length,g),g}function trivialOrder(e){return[new BidiSpan(0,e,0)]}let movedOver="";function moveVisually(e,n,r,g,y){var k;let $=g.head-e.from,V=BidiSpan.find(n,$,(k=g.bidiLevel)!==null&&k!==void 0?k:-1,g.assoc),L=n[V],z=L.side(y,r);if($==z){let oe=V+=y?1:-1;if(oe<0||oe>=n.length)return null;L=n[V=oe],$=L.side(!y,r),z=L.side(y,r)}let j=findClusterBreak(e.text,$,L.forward(y,r));(j<L.from||j>L.to)&&(j=z),movedOver=e.text.slice(Math.min($,j),Math.max($,j));let ae=V==(y?n.length-1:0)?null:n[V+(y?1:-1)];return ae&&j==z&&ae.level+(y?0:1)<L.level?EditorSelection.cursor(ae.side(!y,r)+e.from,ae.forward(y,r)?1:-1,ae.level):EditorSelection.cursor(j+e.from,L.forward(y,r)?-1:1,L.level)}function autoDirection(e,n,r){for(let g=n;g<r;g++){let y=charType(e.charCodeAt(g));if(y==1)return LTR;if(y==2||y==4)return RTL}return LTR}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),clipboardInputFilter=Facet.define(),clipboardOutputFilter=Facet.define(),perLineTextDirection=Facet.define({combine:e=>e.some(n=>n)}),nativeSelectionHidden=Facet.define({combine:e=>e.some(n=>n)}),scrollHandler=Facet.define();class ScrollTarget{constructor(n,r="nearest",g="nearest",y=5,k=5,$=!1){this.range=n,this.y=r,this.x=g,this.yMargin=y,this.xMargin=k,this.isSnapshot=$}map(n){return n.empty?this:new ScrollTarget(this.range.map(n),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(n){return this.range.to<=n.doc.length?this:new ScrollTarget(EditorSelection.cursor(n.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView$1=StateEffect.define({map:(e,n)=>e.map(n)}),setEditContextFormatting=StateEffect.define();function logException(e,n,r){let g=e.facet(exceptionSink);g.length?g[0](n):window.onerror?window.onerror(String(n),r,void 0,void 0,n):r?console.error(r+":",n):console.error(n)}const editable=Facet.define({combine:e=>e.length?e[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor(n,r,g,y,k){this.id=n,this.create=r,this.domEventHandlers=g,this.domEventObservers=y,this.extension=k(this)}static define(n,r){const{eventHandlers:g,eventObservers:y,provide:k,decorations:$}=r||{};return new ViewPlugin(nextPluginID++,n,g,y,V=>{let L=[viewPlugin.of(V)];return $&&L.push(decorations.of(z=>{let j=z.plugin(V);return j?$(j):Decoration.none})),k&&L.push(k(V)),L})}static fromClass(n,r){return ViewPlugin.define(g=>new n(g),r)}}class PluginInstance{constructor(n){this.spec=n,this.mustUpdate=null,this.value=null}update(n){if(this.value){if(this.mustUpdate){let r=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(r)}catch(g){if(logException(r.state,g,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(n)}catch(r){logException(n.state,r,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(n){var r;if(!((r=this.value)===null||r===void 0)&&r.destroy)try{this.value.destroy()}catch(g){logException(n.state,g,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),outerDecorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(e,n){let r=e.state.facet(bidiIsolatedRanges);if(!r.length)return r;let g=r.map(k=>k instanceof Function?k(e):k),y=[];return RangeSet.spans(g,n.from,n.to,{point(){},span(k,$,V,L){let z=k-n.from,j=$-n.from,ae=y;for(let oe=V.length-1;oe>=0;oe--,L--){let re=V[oe].spec.bidiIsolate,ue;if(re==null&&(re=autoDirection(n.text,z,j)),L>0&&ae.length&&(ue=ae[ae.length-1]).to==z&&ue.direction==re)ue.to=j,ae=ue.inner;else{let le={from:z,to:j,direction:re,inner:[]};ae.push(le),ae=le.inner}}}}),y}const scrollMargins=Facet.define();function getScrollMargins(e){let n=0,r=0,g=0,y=0;for(let k of e.state.facet(scrollMargins)){let $=k(e);$&&($.left!=null&&(n=Math.max(n,$.left)),$.right!=null&&(r=Math.max(r,$.right)),$.top!=null&&(g=Math.max(g,$.top)),$.bottom!=null&&(y=Math.max(y,$.bottom)))}return{left:n,right:r,top:g,bottom:y}}const styleModule=Facet.define();class ChangedRange{constructor(n,r,g,y){this.fromA=n,this.toA=r,this.fromB=g,this.toB=y}join(n){return new ChangedRange(Math.min(this.fromA,n.fromA),Math.max(this.toA,n.toA),Math.min(this.fromB,n.fromB),Math.max(this.toB,n.toB))}addToSet(n){let r=n.length,g=this;for(;r>0;r--){let y=n[r-1];if(!(y.fromA>g.toA)){if(y.toA<g.fromA)break;g=g.join(y),n.splice(r-1,1)}}return n.splice(r,0,g),n}static extendWithRanges(n,r){if(r.length==0)return n;let g=[];for(let y=0,k=0,$=0,V=0;;y++){let L=y==n.length?null:n[y],z=$-V,j=L?L.fromB:1e9;for(;k<r.length&&r[k]<j;){let ae=r[k],oe=r[k+1],re=Math.max(V,ae),ue=Math.min(j,oe);if(re<=ue&&new ChangedRange(re+z,ue+z,re,ue).addToSet(g),oe>j)break;k+=2}if(!L)return g;new ChangedRange(L.fromA,L.toA,L.fromB,L.toB).addToSet(g),$=L.toA,V=L.toB}}}class ViewUpdate{constructor(n,r,g){this.view=n,this.state=r,this.transactions=g,this.flags=0,this.startState=n.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let k of g)this.changes=this.changes.compose(k.changes);let y=[];this.changes.iterChangedRanges((k,$,V,L)=>y.push(new ChangedRange(k,$,V,L))),this.changedRanges=y}static create(n,r,g){return new ViewUpdate(n,r,g)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(n=>n.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(n){super(),this.view=n,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Decoration.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(n.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,n.state.doc.length)],0,null)}update(n){var r;let g=n.changedRanges;this.minWidth>0&&g.length&&(g.every(({fromA:z,toA:j})=>j<this.minWidthFrom||z>this.minWidthTo)?(this.minWidthFrom=n.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=n.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(n);let y=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((r=this.domChanged)===null||r===void 0)&&r.newSel?y=this.domChanged.newSel.head:!touchesComposition(n.changes,this.hasComposition)&&!n.selectionSet&&(y=n.state.selection.main.head));let k=y>-1?findCompositionRange(this.view,n.changes,y):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:z,to:j}=this.hasComposition;g=new ChangedRange(z,j,n.changes.mapPos(z,-1),n.changes.mapPos(j,1)).addToSet(g.slice())}this.hasComposition=k?{from:k.range.fromB,to:k.range.toB}:null,(browser.ie||browser.chrome)&&!k&&n&&n.state.doc.lines!=n.startState.doc.lines&&(this.forceSelection=!0);let $=this.decorations,V=this.updateDeco(),L=findChangedDeco($,V,n.changes);return g=ChangedRange.extendWithRanges(g,L),!(this.flags&7)&&g.length==0?!1:(this.updateInner(g,n.startState.doc.length,k),n.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(n,r,g){this.view.viewState.mustMeasureContent=!0,this.updateChildren(n,r,g);let{observer:y}=this.view;y.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let $=browser.chrome||browser.ios?{node:y.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,$),this.flags&=-8,$&&($.written||y.selectionRange.focusNode!=$.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach($=>$.flags&=-9);let k=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let $ of this.children)$ instanceof BlockWidgetView&&$.widget instanceof BlockGapWidget&&k.push($.dom);y.updateGaps(k)}updateChildren(n,r,g){let y=g?g.range.addToSet(n.slice()):n,k=this.childCursor(r);for(let $=y.length-1;;$--){let V=$>=0?y[$]:null;if(!V)break;let{fromA:L,toA:z,fromB:j,toB:ae}=V,oe,re,ue,le;if(g&&g.range.fromB<ae&&g.range.toB>j){let Ne=ContentBuilder.build(this.view.state.doc,j,g.range.fromB,this.decorations,this.dynamicDecorationMap),$e=ContentBuilder.build(this.view.state.doc,g.range.toB,ae,this.decorations,this.dynamicDecorationMap);re=Ne.breakAtStart,ue=Ne.openStart,le=$e.openEnd;let Ce=this.compositionView(g);$e.breakAtStart?Ce.breakAfter=1:$e.content.length&&Ce.merge(Ce.length,Ce.length,$e.content[0],!1,$e.openStart,0)&&(Ce.breakAfter=$e.content[0].breakAfter,$e.content.shift()),Ne.content.length&&Ce.merge(0,0,Ne.content[Ne.content.length-1],!0,0,Ne.openEnd)&&Ne.content.pop(),oe=Ne.content.concat(Ce).concat($e.content)}else({content:oe,breakAtStart:re,openStart:ue,openEnd:le}=ContentBuilder.build(this.view.state.doc,j,ae,this.decorations,this.dynamicDecorationMap));let{i:de,off:he}=k.findPos(z,1),{i:_e,off:xe}=k.findPos(L,-1);replaceRange(this,_e,xe,de,he,oe,re,ue,le)}g&&this.fixCompositionDOM(g)}updateEditContextFormatting(n){this.editContextFormatting=this.editContextFormatting.map(n.changes);for(let r of n.transactions)for(let g of r.effects)g.is(setEditContextFormatting)&&(this.editContextFormatting=g.value)}compositionView(n){let r=new TextView(n.text.nodeValue);r.flags|=8;for(let{deco:y}of n.marks)r=new MarkView(y,[r],r.length);let g=new LineView;return g.append(r,0),g}fixCompositionDOM(n){let r=(k,$)=>{$.flags|=8|($.children.some(L=>L.flags&7)?1:0),this.markedForComposition.add($);let V=ContentView.get(k);V&&V!=$&&(V.dom=null),$.setDOM(k)},g=this.childPos(n.range.fromB,1),y=this.children[g.i];r(n.line,y);for(let k=n.marks.length-1;k>=-1;k--)g=y.childPos(g.off,1),y=y.children[g.i],r(k>=0?n.marks[k].node:n.text,y)}updateSelection(n=!1,r=!1){(n||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let g=this.view.root.activeElement,y=g==this.dom,k=!y&&!(this.view.state.facet(editable)||this.dom.tabIndex>-1)&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(g&&this.dom.contains(g));if(!(y||r||k))return;let $=this.forceSelection;this.forceSelection=!1;let V=this.view.state.selection.main,L=this.moveToLine(this.domAtPos(V.anchor)),z=V.empty?L:this.moveToLine(this.domAtPos(V.head));if(browser.gecko&&V.empty&&!this.hasComposition&&betweenUneditable(L)){let ae=document.createTextNode("");this.view.observer.ignore(()=>L.node.insertBefore(ae,L.node.childNodes[L.offset]||null)),L=z=new DOMPos(ae,0),$=!0}let j=this.view.observer.selectionRange;($||!j.focusNode||(!isEquivalentPosition(L.node,L.offset,j.anchorNode,j.anchorOffset)||!isEquivalentPosition(z.node,z.offset,j.focusNode,j.focusOffset))&&!this.suppressWidgetCursorChange(j,V))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(j.focusNode)&&inUneditable(j.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let ae=getSelection(this.view.root);if(ae)if(V.empty){if(browser.gecko){let oe=nextToUneditable(L.node,L.offset);if(oe&&oe!=3){let re=(oe==1?textNodeBefore:textNodeAfter)(L.node,L.offset);re&&(L=new DOMPos(re.node,re.offset))}}ae.collapse(L.node,L.offset),V.bidiLevel!=null&&ae.caretBidiLevel!==void 0&&(ae.caretBidiLevel=V.bidiLevel)}else if(ae.extend){ae.collapse(L.node,L.offset);try{ae.extend(z.node,z.offset)}catch{}}else{let oe=document.createRange();V.anchor>V.head&&([L,z]=[z,L]),oe.setEnd(z.node,z.offset),oe.setStart(L.node,L.offset),ae.removeAllRanges(),ae.addRange(oe)}k&&this.view.root.activeElement==this.dom&&(this.dom.blur(),g&&g.focus())}),this.view.observer.setSelectionRange(L,z)),this.impreciseAnchor=L.precise?null:new DOMPos(j.anchorNode,j.anchorOffset),this.impreciseHead=z.precise?null:new DOMPos(j.focusNode,j.focusOffset)}suppressWidgetCursorChange(n,r){return this.hasComposition&&r.empty&&isEquivalentPosition(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)&&this.posFromDOM(n.focusNode,n.focusOffset)==r.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:n}=this,r=n.state.selection.main,g=getSelection(n.root),{anchorNode:y,anchorOffset:k}=n.observer.selectionRange;if(!g||!r.empty||!r.assoc||!g.modify)return;let $=LineView.find(this,r.head);if(!$)return;let V=$.posAtStart;if(r.head==V||r.head==V+$.length)return;let L=this.coordsAt(r.head,-1),z=this.coordsAt(r.head,1);if(!L||!z||L.bottom>z.top)return;let j=this.domAtPos(r.head+r.assoc);g.collapse(j.node,j.offset),g.modify("move",r.assoc<0?"forward":"backward","lineboundary"),n.observer.readSelectionRange();let ae=n.observer.selectionRange;n.docView.posFromDOM(ae.anchorNode,ae.anchorOffset)!=r.from&&g.collapse(y,k)}moveToLine(n){let r=this.dom,g;if(n.node!=r)return n;for(let y=n.offset;!g&&y<r.childNodes.length;y++){let k=ContentView.get(r.childNodes[y]);k instanceof LineView&&(g=k.domAtPos(0))}for(let y=n.offset-1;!g&&y>=0;y--){let k=ContentView.get(r.childNodes[y]);k instanceof LineView&&(g=k.domAtPos(k.length))}return g?new DOMPos(g.node,g.offset,!0):n}nearest(n){for(let r=n;r;){let g=ContentView.get(r);if(g&&g.rootView==this)return g;r=r.parentNode}return null}posFromDOM(n,r){let g=this.nearest(n);if(!g)throw new RangeError("Trying to find position for a DOM position outside of the document");return g.localPosFromDOM(n,r)+g.posAtStart}domAtPos(n){let{i:r,off:g}=this.childCursor().findPos(n,-1);for(;r<this.children.length-1;){let y=this.children[r];if(g<y.length||y instanceof LineView)break;r++,g=0}return this.children[r].domAtPos(g)}coordsAt(n,r){let g=null,y=0;for(let k=this.length,$=this.children.length-1;$>=0;$--){let V=this.children[$],L=k-V.breakAfter,z=L-V.length;if(L<n)break;if(z<=n&&(z<n||V.covers(-1))&&(L>n||V.covers(1))&&(!g||V instanceof LineView&&!(g instanceof LineView&&r>=0)))g=V,y=z;else if(g&&z==n&&L==n&&V instanceof BlockWidgetView&&Math.abs(r)<2){if(V.deco.startSide<0)break;$&&(g=null)}k=z}return g?g.coordsAt(n-y,r):null}coordsForChar(n){let{i:r,off:g}=this.childPos(n,1),y=this.children[r];if(!(y instanceof LineView))return null;for(;y.children.length;){let{i:V,off:L}=y.childPos(g,1);for(;;V++){if(V==y.children.length)return null;if((y=y.children[V]).length)break}g=L}if(!(y instanceof TextView))return null;let k=findClusterBreak(y.text,g);if(k==g)return null;let $=textRange(y.dom,g,k).getClientRects();for(let V=0;V<$.length;V++){let L=$[V];if(V==$.length-1||L.top<L.bottom&&L.left<L.right)return L}return null}measureVisibleLineHeights(n){let r=[],{from:g,to:y}=n,k=this.view.contentDOM.clientWidth,$=k>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,V=-1,L=this.view.textDirection==Direction.LTR;for(let z=0,j=0;j<this.children.length;j++){let ae=this.children[j],oe=z+ae.length;if(oe>y)break;if(z>=g){let re=ae.dom.getBoundingClientRect();if(r.push(re.height),$){let ue=ae.dom.lastChild,le=ue?clientRectsFor(ue):[];if(le.length){let de=le[le.length-1],he=L?de.right-re.left:re.right-de.left;he>V&&(V=he,this.minWidth=k,this.minWidthFrom=z,this.minWidthTo=oe)}}}z=oe+ae.breakAfter}return r}textDirectionAt(n){let{i:r}=this.childPos(n,1);return getComputedStyle(this.children[r].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let k of this.children)if(k instanceof LineView){let $=k.measureTextSize();if($)return $}let n=document.createElement("div"),r,g,y;return n.className="cm-line",n.style.width="99999px",n.style.position="absolute",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(n);let k=clientRectsFor(n.firstChild)[0];r=n.getBoundingClientRect().height,g=k?k.width/27:7,y=k?k.height:r,n.remove()}),{lineHeight:r,charWidth:g,textHeight:y}}childCursor(n=this.length){let r=this.children.length;return r&&(n-=this.children[--r].length),new ChildCursor(this.children,n,r)}computeBlockGapDeco(){let n=[],r=this.view.viewState;for(let g=0,y=0;;y++){let k=y==r.viewports.length?null:r.viewports[y],$=k?k.from-1:this.length;if($>g){let V=(r.lineBlockAt($).bottom-r.lineBlockAt(g).top)/this.view.scaleY;n.push(Decoration.replace({widget:new BlockGapWidget(V),block:!0,inclusive:!0,isBlockGap:!0}).range(g,$))}if(!k)break;g=k.to+1}return Decoration.set(n)}updateDeco(){let n=1,r=this.view.state.facet(decorations).map(k=>(this.dynamicDecorationMap[n++]=typeof k=="function")?k(this.view):k),g=!1,y=this.view.state.facet(outerDecorations).map((k,$)=>{let V=typeof k=="function";return V&&(g=!0),V?k(this.view):k});for(y.length&&(this.dynamicDecorationMap[n++]=g,r.push(RangeSet.join(y))),this.decorations=[this.editContextFormatting,...r,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];n<this.decorations.length;)this.dynamicDecorationMap[n++]=!1;return this.decorations}scrollIntoView(n){if(n.isSnapshot){let z=this.view.viewState.lineBlockAt(n.range.head);this.view.scrollDOM.scrollTop=z.top-n.yMargin,this.view.scrollDOM.scrollLeft=n.xMargin;return}for(let z of this.view.state.facet(scrollHandler))try{if(z(this.view,n.range,n))return!0}catch(j){logException(this.view.state,j,"scroll handler")}let{range:r}=n,g=this.coordsAt(r.head,r.empty?r.assoc:r.head>r.anchor?-1:1),y;if(!g)return;!r.empty&&(y=this.coordsAt(r.anchor,r.anchor>r.head?-1:1))&&(g={left:Math.min(g.left,y.left),top:Math.min(g.top,y.top),right:Math.max(g.right,y.right),bottom:Math.max(g.bottom,y.bottom)});let k=getScrollMargins(this.view),$={left:g.left-k.left,top:g.top-k.top,right:g.right+k.right,bottom:g.bottom+k.bottom},{offsetWidth:V,offsetHeight:L}=this.view.scrollDOM;scrollRectIntoView(this.view.scrollDOM,$,r.head<r.anchor?-1:1,n.x,n.y,Math.max(Math.min(n.xMargin,V),-V),Math.max(Math.min(n.yMargin,L),-L),this.view.textDirection==Direction.LTR)}}function betweenUneditable(e){return e.node.nodeType==1&&e.node.firstChild&&(e.offset==0||e.node.childNodes[e.offset-1].contentEditable=="false")&&(e.offset==e.node.childNodes.length||e.node.childNodes[e.offset].contentEditable=="false")}function findCompositionNode(e,n){let r=e.observer.selectionRange;if(!r.focusNode)return null;let g=textNodeBefore(r.focusNode,r.focusOffset),y=textNodeAfter(r.focusNode,r.focusOffset),k=g||y;if(y&&g&&y.node!=g.node){let V=ContentView.get(y.node);if(!V||V instanceof TextView&&V.text!=y.node.nodeValue)k=y;else if(e.docView.lastCompositionAfterCursor){let L=ContentView.get(g.node);!L||L instanceof TextView&&L.text!=g.node.nodeValue||(k=y)}}if(e.docView.lastCompositionAfterCursor=k!=g,!k)return null;let $=n-k.offset;return{from:$,to:$+k.node.nodeValue.length,node:k.node}}function findCompositionRange(e,n,r){let g=findCompositionNode(e,r);if(!g)return null;let{node:y,from:k,to:$}=g,V=y.nodeValue;if(/[\n\r]/.test(V)||e.state.doc.sliceString(g.from,g.to)!=V)return null;let L=n.invertedDesc,z=new ChangedRange(L.mapPos(k),L.mapPos($),k,$),j=[];for(let ae=y.parentNode;;ae=ae.parentNode){let oe=ContentView.get(ae);if(oe instanceof MarkView)j.push({node:ae,deco:oe.mark});else{if(oe instanceof LineView||ae.nodeName=="DIV"&&ae.parentNode==e.contentDOM)return{range:z,text:y,marks:j,line:ae};if(ae!=e.contentDOM)j.push({node:ae,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs(ae),tagName:ae.tagName.toLowerCase()})});else return null}}}function nextToUneditable(e,n){return e.nodeType!=1?0:(n&&e.childNodes[n-1].contentEditable=="false"?1:0)|(n<e.childNodes.length&&e.childNodes[n].contentEditable=="false"?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange(n,r){addRange(n,r,this.changes)}comparePoint(n,r){addRange(n,r,this.changes)}boundChange(n){addRange(n,n,this.changes)}};function findChangedDeco(e,n,r){let g=new DecorationComparator$1;return RangeSet.compare(e,n,r,g),g.changes}function inUneditable(e,n){for(let r=e;r&&r!=n;r=r.assignedSlot||r.parentNode)if(r.nodeType==1&&r.contentEditable=="false")return!0;return!1}function touchesComposition(e,n){let r=!1;return n&&e.iterChangedRanges((g,y)=>{g<n.to&&y>n.from&&(r=!0)}),r}function groupAt(e,n,r=1){let g=e.charCategorizer(n),y=e.doc.lineAt(n),k=n-y.from;if(y.length==0)return EditorSelection.cursor(n);k==0?r=1:k==y.length&&(r=-1);let $=k,V=k;r<0?$=findClusterBreak(y.text,k,!1):V=findClusterBreak(y.text,k);let L=g(y.text.slice($,V));for(;$>0;){let z=findClusterBreak(y.text,$,!1);if(g(y.text.slice(z,$))!=L)break;$=z}for(;V<y.length;){let z=findClusterBreak(y.text,V);if(g(y.text.slice(V,z))!=L)break;V=z}return EditorSelection.range($+y.from,V+y.from)}function getdx(e,n){return n.left>e?n.left-e:Math.max(0,e-n.right)}function getdy(e,n){return n.top>e?n.top-e:Math.max(0,e-n.bottom)}function yOverlap(e,n){return e.top<n.bottom-1&&e.bottom>n.top+1}function upTop(e,n){return n<e.top?{top:n,left:e.left,right:e.right,bottom:e.bottom}:e}function upBot(e,n){return n>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:n}:e}function domPosAtCoords(e,n,r){let g,y,k,$,V=!1,L,z,j,ae;for(let ue=e.firstChild;ue;ue=ue.nextSibling){let le=clientRectsFor(ue);for(let de=0;de<le.length;de++){let he=le[de];y&&yOverlap(y,he)&&(he=upTop(upBot(he,y.bottom),y.top));let _e=getdx(n,he),xe=getdy(r,he);if(_e==0&&xe==0)return ue.nodeType==3?domPosInText(ue,n,r):domPosAtCoords(ue,n,r);if(!g||$>xe||$==xe&&k>_e){g=ue,y=he,k=_e,$=xe;let Ne=xe?r<he.top?-1:1:_e?n<he.left?-1:1:0;V=!Ne||(Ne>0?de<le.length-1:de>0)}_e==0?r>he.bottom&&(!j||j.bottom<he.bottom)?(L=ue,j=he):r<he.top&&(!ae||ae.top>he.top)&&(z=ue,ae=he):j&&yOverlap(j,he)?j=upBot(j,he.bottom):ae&&yOverlap(ae,he)&&(ae=upTop(ae,he.top))}}if(j&&j.bottom>=r?(g=L,y=j):ae&&ae.top<=r&&(g=z,y=ae),!g)return{node:e,offset:0};let oe=Math.max(y.left,Math.min(y.right,n));if(g.nodeType==3)return domPosInText(g,oe,r);if(V&&g.contentEditable!="false")return domPosAtCoords(g,oe,r);let re=Array.prototype.indexOf.call(e.childNodes,g)+(n>=(y.left+y.right)/2?1:0);return{node:e,offset:re}}function domPosInText(e,n,r){let g=e.nodeValue.length,y=-1,k=1e9,$=0;for(let V=0;V<g;V++){let L=textRange(e,V,V+1).getClientRects();for(let z=0;z<L.length;z++){let j=L[z];if(j.top==j.bottom)continue;$||($=n-j.left);let ae=(j.top>r?j.top-r:r-j.bottom)-1;if(j.left-1<=n&&j.right+1>=n&&ae<k){let oe=n>=(j.left+j.right)/2,re=oe;if((browser.chrome||browser.gecko)&&textRange(e,V).getBoundingClientRect().left==j.right&&(re=!oe),ae<=0)return{node:e,offset:V+(re?1:0)};y=V+(re?1:0),k=ae}}}return{node:e,offset:y>-1?y:$>0?e.nodeValue.length:0}}function posAtCoords(e,n,r,g=-1){var y,k;let $=e.contentDOM.getBoundingClientRect(),V=$.top+e.viewState.paddingTop,L,{docHeight:z}=e.viewState,{x:j,y:ae}=n,oe=ae-V;if(oe<0)return 0;if(oe>z)return e.state.doc.length;for(let Ne=e.viewState.heightOracle.textHeight/2,$e=!1;L=e.elementAtHeight(oe),L.type!=BlockType.Text;)for(;oe=g>0?L.bottom+Ne:L.top-Ne,!(oe>=0&&oe<=z);){if($e)return r?null:0;$e=!0,g=-g}ae=V+oe;let re=L.from;if(re<e.viewport.from)return e.viewport.from==0?0:r?null:posAtCoordsImprecise(e,$,L,j,ae);if(re>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:r?null:posAtCoordsImprecise(e,$,L,j,ae);let ue=e.dom.ownerDocument,le=e.root.elementFromPoint?e.root:ue,de=le.elementFromPoint(j,ae);de&&!e.contentDOM.contains(de)&&(de=null),de||(j=Math.max($.left+1,Math.min($.right-1,j)),de=le.elementFromPoint(j,ae),de&&!e.contentDOM.contains(de)&&(de=null));let he,_e=-1;if(de&&((y=e.docView.nearest(de))===null||y===void 0?void 0:y.isEditable)!=!1){if(ue.caretPositionFromPoint){let Ne=ue.caretPositionFromPoint(j,ae);Ne&&({offsetNode:he,offset:_e}=Ne)}else if(ue.caretRangeFromPoint){let Ne=ue.caretRangeFromPoint(j,ae);Ne&&({startContainer:he,startOffset:_e}=Ne,(!e.contentDOM.contains(he)||browser.safari&&isSuspiciousSafariCaretResult(he,_e,j)||browser.chrome&&isSuspiciousChromeCaretResult(he,_e,j))&&(he=void 0))}he&&(_e=Math.min(maxOffset(he),_e))}if(!he||!e.docView.dom.contains(he)){let Ne=LineView.find(e.docView,re);if(!Ne)return oe>L.top+L.height/2?L.to:L.from;({node:he,offset:_e}=domPosAtCoords(Ne.dom,j,ae))}let xe=e.docView.nearest(he);if(!xe)return null;if(xe.isWidget&&((k=xe.dom)===null||k===void 0?void 0:k.nodeType)==1){let Ne=xe.dom.getBoundingClientRect();return n.y<Ne.top||n.y<=Ne.bottom&&n.x<=(Ne.left+Ne.right)/2?xe.posAtStart:xe.posAtEnd}else return xe.localPosFromDOM(he,_e)+xe.posAtStart}function posAtCoordsImprecise(e,n,r,g,y){let k=Math.round((g-n.left)*e.defaultCharacterWidth);if(e.lineWrapping&&r.height>e.defaultLineHeight*1.5){let V=e.viewState.heightOracle.textHeight,L=Math.floor((y-r.top-(e.defaultLineHeight-V)*.5)/V);k+=L*e.viewState.heightOracle.lineLength}let $=e.state.sliceDoc(r.from,r.to);return r.from+findColumn($,k,e.state.tabSize)}function isSuspiciousSafariCaretResult(e,n,r){let g;if(e.nodeType!=3||n!=(g=e.nodeValue.length))return!1;for(let y=e.nextSibling;y;y=y.nextSibling)if(y.nodeType!=1||y.nodeName!="BR")return!1;return textRange(e,g-1,g).getBoundingClientRect().left>r}function isSuspiciousChromeCaretResult(e,n,r){if(n!=0)return!1;for(let y=e;;){let k=y.parentNode;if(!k||k.nodeType!=1||k.firstChild!=y)return!1;if(k.classList.contains("cm-line"))break;y=k}let g=e.nodeType==1?e.getBoundingClientRect():textRange(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect();return r-g.left>5}function blockAt(e,n){let r=e.lineBlockAt(n);if(Array.isArray(r.type)){for(let g of r.type)if(g.to>n||g.to==n&&(g.to==r.to||g.type==BlockType.Text))return g}return r}function moveToLineBoundary(e,n,r,g){let y=blockAt(e,n.head),k=!g||y.type!=BlockType.Text||!(e.lineWrapping||y.widgetLineBreaks)?null:e.coordsAtPos(n.assoc<0&&n.head>y.from?n.head-1:n.head);if(k){let $=e.dom.getBoundingClientRect(),V=e.textDirectionAt(y.from),L=e.posAtCoords({x:r==(V==Direction.LTR)?$.right-1:$.left+1,y:(k.top+k.bottom)/2});if(L!=null)return EditorSelection.cursor(L,r?-1:1)}return EditorSelection.cursor(r?y.to:y.from,r?-1:1)}function moveByChar(e,n,r,g){let y=e.state.doc.lineAt(n.head),k=e.bidiSpans(y),$=e.textDirectionAt(y.from);for(let V=n,L=null;;){let z=moveVisually(y,k,$,V,r),j=movedOver;if(!z){if(y.number==(r?e.state.doc.lines:1))return V;j=`
`,y=e.state.doc.line(y.number+(r?1:-1)),k=e.bidiSpans(y),z=e.visualLineSide(y,!r)}if(L){if(!L(j))return V}else{if(!g)return z;L=g(j)}V=z}}function byGroup(e,n,r){let g=e.state.charCategorizer(n),y=g(r);return k=>{let $=g(k);return y==CharCategory.Space&&(y=$),y==$}}function moveVertically(e,n,r,g){let y=n.head,k=r?1:-1;if(y==(r?e.state.doc.length:0))return EditorSelection.cursor(y,n.assoc);let $=n.goalColumn,V,L=e.contentDOM.getBoundingClientRect(),z=e.coordsAtPos(y,n.assoc||-1),j=e.documentTop;if(z)$==null&&($=z.left-L.left),V=k<0?z.top:z.bottom;else{let re=e.viewState.lineBlockAt(y);$==null&&($=Math.min(L.right-L.left,e.defaultCharacterWidth*(y-re.from))),V=(k<0?re.top:re.bottom)+j}let ae=L.left+$,oe=g??e.viewState.heightOracle.textHeight>>1;for(let re=0;;re+=10){let ue=V+(oe+re)*k,le=posAtCoords(e,{x:ae,y:ue},!1,k);if(ue<L.top||ue>L.bottom||(k<0?le<y:le>y)){let de=e.docView.coordsForChar(le),he=!de||ue<de.top?-1:1;return EditorSelection.cursor(le,he,void 0,$)}}}function skipAtomicRanges(e,n,r){for(;;){let g=0;for(let y of e)y.between(n-1,n+1,(k,$,V)=>{if(n>k&&n<$){let L=g||r||(n-k<$-n?-1:1);n=L<0?k:$,g=L}});if(!g)return n}}function skipAtoms(e,n,r){let g=skipAtomicRanges(e.state.facet(atomicRanges).map(y=>y(e)),r.from,n.head>r.from?-1:1);return g==r.from?r:EditorSelection.cursor(g,g<r.from?1:-1)}const LineBreakPlaceholder="";class DOMReader{constructor(n,r){this.points=n,this.text="",this.lineSeparator=r.facet(EditorState.lineSeparator)}append(n){this.text+=n}lineBreak(){this.text+=LineBreakPlaceholder}readRange(n,r){if(!n)return this;let g=n.parentNode;for(let y=n;;){this.findPointBefore(g,y);let k=this.text.length;this.readNode(y);let $=y.nextSibling;if($==r)break;let V=ContentView.get(y),L=ContentView.get($);(V&&L?V.breakAfter:(V?V.breakAfter:isBlockElement(y))||isBlockElement($)&&(y.nodeName!="BR"||y.cmIgnore)&&this.text.length>k)&&this.lineBreak(),y=$}return this.findPointBefore(g,r),this}readTextNode(n){let r=n.nodeValue;for(let g of this.points)g.node==n&&(g.pos=this.text.length+Math.min(g.offset,r.length));for(let g=0,y=this.lineSeparator?null:/\r\n?|\n/g;;){let k=-1,$=1,V;if(this.lineSeparator?(k=r.indexOf(this.lineSeparator,g),$=this.lineSeparator.length):(V=y.exec(r))&&(k=V.index,$=V[0].length),this.append(r.slice(g,k<0?r.length:k)),k<0)break;if(this.lineBreak(),$>1)for(let L of this.points)L.node==n&&L.pos>this.text.length&&(L.pos-=$-1);g=k+$}}readNode(n){if(n.cmIgnore)return;let r=ContentView.get(n),g=r&&r.overrideDOMText;if(g!=null){this.findPointInside(n,g.length);for(let y=g.iter();!y.next().done;)y.lineBreak?this.lineBreak():this.append(y.value)}else n.nodeType==3?this.readTextNode(n):n.nodeName=="BR"?n.nextSibling&&this.lineBreak():n.nodeType==1&&this.readRange(n.firstChild,null)}findPointBefore(n,r){for(let g of this.points)g.node==n&&n.childNodes[g.offset]==r&&(g.pos=this.text.length)}findPointInside(n,r){for(let g of this.points)(n.nodeType==3?g.node==n:n.contains(g.node))&&(g.pos=this.text.length+(isAtEnd(n,g.node,g.offset)?r:0))}}function isAtEnd(e,n,r){for(;;){if(!n||r<maxOffset(n))return!1;if(n==e)return!0;r=domIndex(n)+1,n=n.parentNode}}class DOMPoint{constructor(n,r){this.node=n,this.offset=r,this.pos=-1}}class DOMChange{constructor(n,r,g,y){this.typeOver=y,this.bounds=null,this.text="",this.domChanged=r>-1;let{impreciseHead:k,impreciseAnchor:$}=n.docView;if(n.state.readOnly&&r>-1)this.newSel=null;else if(r>-1&&(this.bounds=n.docView.domBoundsAround(r,g,0))){let V=k||$?[]:selectionPoints(n),L=new DOMReader(V,n.state);L.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=L.text,this.newSel=selectionFromPoints(V,this.bounds.from)}else{let V=n.observer.selectionRange,L=k&&k.node==V.focusNode&&k.offset==V.focusOffset||!contains(n.contentDOM,V.focusNode)?n.state.selection.main.head:n.docView.posFromDOM(V.focusNode,V.focusOffset),z=$&&$.node==V.anchorNode&&$.offset==V.anchorOffset||!contains(n.contentDOM,V.anchorNode)?n.state.selection.main.anchor:n.docView.posFromDOM(V.anchorNode,V.anchorOffset),j=n.viewport;if((browser.ios||browser.chrome)&&n.state.selection.main.empty&&L!=z&&(j.from>0||j.to<n.state.doc.length)){let ae=Math.min(L,z),oe=Math.max(L,z),re=j.from-ae,ue=j.to-oe;(re==0||re==1||ae==0)&&(ue==0||ue==-1||oe==n.state.doc.length)&&(L=0,z=n.state.doc.length)}this.newSel=EditorSelection.single(z,L)}}}function applyDOMChange(e,n){let r,{newSel:g}=n,y=e.state.selection.main,k=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(n.bounds){let{from:$,to:V}=n.bounds,L=y.from,z=null;(k===8||browser.android&&n.text.length<V-$)&&(L=y.to,z="end");let j=findDiff(e.state.doc.sliceString($,V,LineBreakPlaceholder),n.text,L-$,z);j&&(browser.chrome&&k==13&&j.toB==j.from+2&&n.text.slice(j.from,j.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&j.toB--,r={from:$+j.from,to:$+j.toA,insert:Text.of(n.text.slice(j.from,j.toB).split(LineBreakPlaceholder))})}else g&&(!e.hasFocus&&e.state.facet(editable)||g.main.eq(y))&&(g=null);if(!r&&!g)return!1;if(!r&&n.typeOver&&!y.empty&&g&&g.main.empty?r={from:y.from,to:y.to,insert:e.state.doc.slice(y.from,y.to)}:r&&r.from>=y.from&&r.to<=y.to&&(r.from!=y.from||r.to!=y.to)&&y.to-y.from-(r.to-r.from)<=4?r={from:y.from,to:y.to,insert:e.state.doc.slice(y.from,r.from).append(r.insert).append(e.state.doc.slice(r.to,y.to))}:(browser.mac||browser.android)&&r&&r.from==r.to&&r.from==y.head-1&&/^\. ?$/.test(r.insert.toString())&&e.contentDOM.getAttribute("autocorrect")=="off"?(g&&r.insert.length==2&&(g=EditorSelection.single(g.main.anchor-1,g.main.head-1)),r={from:y.from,to:y.to,insert:Text.of([" "])}):browser.chrome&&r&&r.from==r.to&&r.from==y.head&&r.insert.toString()==`
 `&&e.lineWrapping&&(g&&(g=EditorSelection.single(g.main.anchor-1,g.main.head-1)),r={from:y.from,to:y.to,insert:Text.of([" "])}),r)return applyDOMChangeInner(e,r,g,k);if(g&&!g.main.eq(y)){let $=!1,V="select";return e.inputState.lastSelectionTime>Date.now()-50&&(e.inputState.lastSelectionOrigin=="select"&&($=!0),V=e.inputState.lastSelectionOrigin),e.dispatch({selection:g,scrollIntoView:$,userEvent:V}),!0}else return!1}function applyDOMChangeInner(e,n,r,g=-1){if(browser.ios&&e.inputState.flushIOSKey(n))return!0;let y=e.state.selection.main;if(browser.android&&(n.to==y.to&&(n.from==y.from||n.from==y.from-1&&e.state.sliceDoc(n.from,y.from)==" ")&&n.insert.length==1&&n.insert.lines==2&&dispatchKey(e.contentDOM,"Enter",13)||(n.from==y.from-1&&n.to==y.to&&n.insert.length==0||g==8&&n.insert.length<n.to-n.from&&n.to>y.head)&&dispatchKey(e.contentDOM,"Backspace",8)||n.from==y.from&&n.to==y.to+1&&n.insert.length==0&&dispatchKey(e.contentDOM,"Delete",46)))return!0;let k=n.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let $,V=()=>$||($=applyDefaultInsert(e,n,r));return e.state.facet(inputHandler$1).some(L=>L(e,n.from,n.to,k,V))||e.dispatch(V()),!0}function applyDefaultInsert(e,n,r){let g,y=e.state,k=y.selection.main;if(n.from>=k.from&&n.to<=k.to&&n.to-n.from>=(k.to-k.from)/3&&(!r||r.main.empty&&r.main.from==n.from+n.insert.length)&&e.inputState.composing<0){let V=k.from<n.from?y.sliceDoc(k.from,n.from):"",L=k.to>n.to?y.sliceDoc(n.to,k.to):"";g=y.replaceSelection(e.state.toText(V+n.insert.sliceString(0,void 0,e.state.lineBreak)+L))}else{let V=y.changes(n),L=r&&r.main.to<=V.newLength?r.main:void 0;if(y.selection.ranges.length>1&&e.inputState.composing>=0&&n.to<=k.to&&n.to>=k.to-10){let z=e.state.sliceDoc(n.from,n.to),j,ae=r&&findCompositionNode(e,r.main.head);if(ae){let ue=n.insert.length-(n.to-n.from);j={from:ae.from,to:ae.to-ue}}else j=e.state.doc.lineAt(k.head);let oe=k.to-n.to,re=k.to-k.from;g=y.changeByRange(ue=>{if(ue.from==k.from&&ue.to==k.to)return{changes:V,range:L||ue.map(V)};let le=ue.to-oe,de=le-z.length;if(ue.to-ue.from!=re||e.state.sliceDoc(de,le)!=z||ue.to>=j.from&&ue.from<=j.to)return{range:ue};let he=y.changes({from:de,to:le,insert:n.insert}),_e=ue.to-k.to;return{changes:he,range:L?EditorSelection.range(Math.max(0,L.anchor+_e),Math.max(0,L.head+_e)):ue.map(he)}})}else g={changes:V,selection:L&&y.selection.replaceRange(L)}}let $="input.type";return(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,$+=".compose",e.inputState.compositionFirstChange&&($+=".start",e.inputState.compositionFirstChange=!1)),y.update(g,{userEvent:$,scrollIntoView:!0})}function findDiff(e,n,r,g){let y=Math.min(e.length,n.length),k=0;for(;k<y&&e.charCodeAt(k)==n.charCodeAt(k);)k++;if(k==y&&e.length==n.length)return null;let $=e.length,V=n.length;for(;$>0&&V>0&&e.charCodeAt($-1)==n.charCodeAt(V-1);)$--,V--;if(g=="end"){let L=Math.max(0,k-Math.min($,V));r-=$+L-k}if($<k&&e.length<n.length){let L=r<=k&&r>=$?k-r:0;k-=L,V=k+(V-$),$=k}else if(V<k){let L=r<=k&&r>=V?k-r:0;k-=L,$=k+($-V),V=k}return{from:k,toA:$,toB:V}}function selectionPoints(e){let n=[];if(e.root.activeElement!=e.contentDOM)return n;let{anchorNode:r,anchorOffset:g,focusNode:y,focusOffset:k}=e.observer.selectionRange;return r&&(n.push(new DOMPoint(r,g)),(y!=r||k!=g)&&n.push(new DOMPoint(y,k))),n}function selectionFromPoints(e,n){if(e.length==0)return null;let r=e[0].pos,g=e.length==2?e[1].pos:r;return r>-1&&g>-1?EditorSelection.single(r+n,g+n):null}class InputState{setSelectionOrigin(n){this.lastSelectionOrigin=n,this.lastSelectionTime=Date.now()}constructor(n){this.view=n,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=n.hasFocus,browser.safari&&n.contentDOM.addEventListener("input",()=>null),browser.gecko&&firefoxCopyCutHack(n.contentDOM.ownerDocument)}handleEvent(n){!eventBelongsToEditor(this.view,n)||this.ignoreDuringComposition(n)||n.type=="keydown"&&this.keydown(n)||this.runHandlers(n.type,n)}runHandlers(n,r){let g=this.handlers[n];if(g){for(let y of g.observers)y(this.view,r);for(let y of g.handlers){if(r.defaultPrevented)break;if(y(this.view,r)){r.preventDefault();break}}}}ensureHandlers(n){let r=computeHandlers(n),g=this.handlers,y=this.view.contentDOM;for(let k in r)if(k!="scroll"){let $=!r[k].handlers.length,V=g[k];V&&$!=!V.handlers.length&&(y.removeEventListener(k,this.handleEvent),V=null),V||y.addEventListener(k,this.handleEvent,{passive:$})}for(let k in g)k!="scroll"&&!r[k]&&y.removeEventListener(k,this.handleEvent);this.handlers=r}keydown(n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&n.keyCode!=27&&modifierCodes.indexOf(n.keyCode)<0&&(this.tabFocusMode=-1),browser.android&&browser.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return this.view.observer.delayAndroidKey(n.key,n.keyCode),!0;let r;return browser.ios&&!n.synthetic&&!n.altKey&&!n.metaKey&&((r=PendingKeys.find(g=>g.keyCode==n.keyCode))&&!n.ctrlKey||EmacsyPendingKeys.indexOf(n.key)>-1&&n.ctrlKey&&!n.shiftKey)?(this.pendingIOSKey=r||n,setTimeout(()=>this.flushIOSKey(),250),!0):(n.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(n){let r=this.pendingIOSKey;return!r||r.key=="Enter"&&n&&n.from<n.to&&/^\S+$/.test(n.insert.toString())?!1:(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,r.key,r.keyCode,r instanceof KeyboardEvent?r:void 0))}ignoreDuringComposition(n){return/^key/.test(n.type)?this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(n){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=n}update(n){this.view.observer.update(n),this.mouseSelection&&this.mouseSelection.update(n),this.draggedContent&&n.docChanged&&(this.draggedContent=this.draggedContent.map(n.changes)),n.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(e,n){return(r,g)=>{try{return n.call(e,g,r)}catch(y){logException(r.state,y)}}}function computeHandlers(e){let n=Object.create(null);function r(g){return n[g]||(n[g]={observers:[],handlers:[]})}for(let g of e){let y=g.spec;if(y&&y.domEventHandlers)for(let k in y.domEventHandlers){let $=y.domEventHandlers[k];$&&r(k).handlers.push(bindHandler(g.value,$))}if(y&&y.domEventObservers)for(let k in y.domEventObservers){let $=y.domEventObservers[k];$&&r(k).observers.push(bindHandler(g.value,$))}}for(let g in handlers)r(g).handlers.push(handlers[g]);for(let g in observers)r(g).observers.push(observers[g]);return n}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(e){return Math.max(0,e)*.7+8}function dist(e,n){return Math.max(Math.abs(e.clientX-n.clientX),Math.abs(e.clientY-n.clientY))}class MouseSelection{constructor(n,r,g,y){this.view=n,this.startEvent=r,this.style=g,this.mustSelect=y,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=r,this.scrollParents=scrollableParents(n.contentDOM),this.atoms=n.state.facet(atomicRanges).map($=>$(n));let k=n.contentDOM.ownerDocument;k.addEventListener("mousemove",this.move=this.move.bind(this)),k.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=r.shiftKey,this.multiple=n.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(n,r),this.dragging=isInPrimarySelection(n,r)&&getClickType(r)==1?null:!1}start(n){this.dragging===!1&&this.select(n)}move(n){if(n.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist(this.startEvent,n)<10)return;this.select(this.lastEvent=n);let r=0,g=0,y=0,k=0,$=this.view.win.innerWidth,V=this.view.win.innerHeight;this.scrollParents.x&&({left:y,right:$}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:k,bottom:V}=this.scrollParents.y.getBoundingClientRect());let L=getScrollMargins(this.view);n.clientX-L.left<=y+dragScrollMargin?r=-dragScrollSpeed(y-n.clientX):n.clientX+L.right>=$-dragScrollMargin&&(r=dragScrollSpeed(n.clientX-$)),n.clientY-L.top<=k+dragScrollMargin?g=-dragScrollSpeed(k-n.clientY):n.clientY+L.bottom>=V-dragScrollMargin&&(g=dragScrollSpeed(n.clientY-V)),this.setScrollSpeed(r,g)}up(n){this.dragging==null&&this.select(this.lastEvent),this.dragging||n.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let n=this.view.contentDOM.ownerDocument;n.removeEventListener("mousemove",this.move),n.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(n,r){this.scrollSpeed={x:n,y:r},n||r?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:n,y:r}=this.scrollSpeed;n&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=n,n=0),r&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=r,r=0),(n||r)&&this.view.win.scrollBy(n,r),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(n){let r=null;for(let g=0;g<n.ranges.length;g++){let y=n.ranges[g],k=null;if(y.empty){let $=skipAtomicRanges(this.atoms,y.from,0);$!=y.from&&(k=EditorSelection.cursor($,-1))}else{let $=skipAtomicRanges(this.atoms,y.from,-1),V=skipAtomicRanges(this.atoms,y.to,1);($!=y.from||V!=y.to)&&(k=EditorSelection.range(y.from==y.anchor?$:V,y.from==y.head?$:V))}k&&(r||(r=n.ranges.slice()),r[g]=k)}return r?EditorSelection.create(r,n.mainIndex):n}select(n){let{view:r}=this,g=this.skipAtoms(this.style.get(n,this.extend,this.multiple));(this.mustSelect||!g.eq(r.state.selection,this.dragging===!1))&&this.view.dispatch({selection:g,userEvent:"select.pointer"}),this.mustSelect=!1}update(n){n.transactions.some(r=>r.isUserEvent("input.type"))?this.destroy():this.style.update(n)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(e,n){let r=e.state.facet(clickAddsSelectionRange);return r.length?r[0](n):browser.mac?n.metaKey:n.ctrlKey}function dragMovesSelection(e,n){let r=e.state.facet(dragMovesSelection$1);return r.length?r[0](n):browser.mac?!n.altKey:!n.ctrlKey}function isInPrimarySelection(e,n){let{main:r}=e.state.selection;if(r.empty)return!1;let g=getSelection(e.root);if(!g||g.rangeCount==0)return!0;let y=g.getRangeAt(0).getClientRects();for(let k=0;k<y.length;k++){let $=y[k];if($.left<=n.clientX&&$.right>=n.clientX&&$.top<=n.clientY&&$.bottom>=n.clientY)return!0}return!1}function eventBelongsToEditor(e,n){if(!n.bubbles)return!0;if(n.defaultPrevented)return!1;for(let r=n.target,g;r!=e.contentDOM;r=r.parentNode)if(!r||r.nodeType==11||(g=ContentView.get(r))&&g.ignoreEvent(n))return!1;return!0}const handlers=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(e){let n=e.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{e.focus(),r.remove(),doPaste(e,r.value)},50)}function textFilter(e,n,r){for(let g of e.facet(n))r=g(r,e);return r}function doPaste(e,n){n=textFilter(e.state,clipboardInputFilter,n);let{state:r}=e,g,y=1,k=r.toText(n),$=k.lines==r.selection.ranges.length;if(lastLinewiseCopy!=null&&r.selection.ranges.every(L=>L.empty)&&lastLinewiseCopy==k.toString()){let L=-1;g=r.changeByRange(z=>{let j=r.doc.lineAt(z.from);if(j.from==L)return{range:z};L=j.from;let ae=r.toText(($?k.line(y++).text:n)+r.lineBreak);return{changes:{from:j.from,insert:ae},range:EditorSelection.cursor(z.from+ae.length)}})}else $?g=r.changeByRange(L=>{let z=k.line(y++);return{changes:{from:L.from,to:L.to,insert:z.text},range:EditorSelection.cursor(L.from+z.length)}}):g=r.replaceSelection(k);e.dispatch(g,{userEvent:"input.paste",scrollIntoView:!0})}observers.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft};handlers.keydown=(e,n)=>(e.inputState.setSelectionOrigin("select"),n.keyCode==27&&e.inputState.tabFocusMode!=0&&(e.inputState.tabFocusMode=Date.now()+2e3),!1);observers.touchstart=(e,n)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")};observers.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")};handlers.mousedown=(e,n)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let r=null;for(let g of e.state.facet(mouseSelectionStyle))if(r=g(e,n),r)break;if(!r&&n.button==0&&(r=basicMouseSelection(e,n)),r){let g=!e.hasFocus;e.inputState.startMouseSelection(new MouseSelection(e,n,r,g)),g&&e.observer.ignore(()=>{focusPreventScroll(e.contentDOM);let k=e.root.activeElement;k&&!k.contains(e.contentDOM)&&k.blur()});let y=e.inputState.mouseSelection;if(y)return y.start(n),y.dragging===!1}return!1};function rangeForClick(e,n,r,g){if(g==1)return EditorSelection.cursor(n,r);if(g==2)return groupAt(e.state,n,r);{let y=LineView.find(e.docView,n),k=e.state.doc.lineAt(y?y.posAtEnd:n),$=y?y.posAtStart:k.from,V=y?y.posAtEnd:k.to;return V<e.state.doc.length&&V==k.to&&V++,EditorSelection.range($,V)}}let inside=(e,n,r)=>n>=r.top&&n<=r.bottom&&e>=r.left&&e<=r.right;function findPositionSide(e,n,r,g){let y=LineView.find(e.docView,n);if(!y)return 1;let k=n-y.posAtStart;if(k==0)return 1;if(k==y.length)return-1;let $=y.coordsAt(k,-1);if($&&inside(r,g,$))return-1;let V=y.coordsAt(k,1);return V&&inside(r,g,V)?1:$&&$.bottom>=g?-1:1}function queryPos(e,n){let r=e.posAtCoords({x:n.clientX,y:n.clientY},!1);return{pos:r,bias:findPositionSide(e,r,n.clientX,n.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(e){if(!BadMouseDetail)return e.detail;let n=lastMouseDown,r=lastMouseDownTime;return lastMouseDown=e,lastMouseDownTime=Date.now(),lastMouseDownCount=!n||r>Date.now()-400&&Math.abs(n.clientX-e.clientX)<2&&Math.abs(n.clientY-e.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(e,n){let r=queryPos(e,n),g=getClickType(n),y=e.state.selection;return{update(k){k.docChanged&&(r.pos=k.changes.mapPos(r.pos),y=y.map(k.changes))},get(k,$,V){let L=queryPos(e,k),z,j=rangeForClick(e,L.pos,L.bias,g);if(r.pos!=L.pos&&!$){let ae=rangeForClick(e,r.pos,r.bias,g),oe=Math.min(ae.from,j.from),re=Math.max(ae.to,j.to);j=oe<j.from?EditorSelection.range(oe,re):EditorSelection.range(re,oe)}return $?y.replaceRange(y.main.extend(j.from,j.to)):V&&g==1&&y.ranges.length>1&&(z=removeRangeAround(y,L.pos))?z:V?y.addRange(j):EditorSelection.create([j])}}}function removeRangeAround(e,n){for(let r=0;r<e.ranges.length;r++){let{from:g,to:y}=e.ranges[r];if(g<=n&&y>=n)return EditorSelection.create(e.ranges.slice(0,r).concat(e.ranges.slice(r+1)),e.mainIndex==r?0:e.mainIndex-(e.mainIndex>r?1:0))}return null}handlers.dragstart=(e,n)=>{let{selection:{main:r}}=e.state;if(n.target.draggable){let y=e.docView.nearest(n.target);if(y&&y.isWidget){let k=y.posAtStart,$=k+y.length;(k>=r.to||$<=r.from)&&(r=EditorSelection.range(k,$))}}let{inputState:g}=e;return g.mouseSelection&&(g.mouseSelection.dragging=!0),g.draggedContent=r,n.dataTransfer&&(n.dataTransfer.setData("Text",textFilter(e.state,clipboardOutputFilter,e.state.sliceDoc(r.from,r.to))),n.dataTransfer.effectAllowed="copyMove"),!1};handlers.dragend=e=>(e.inputState.draggedContent=null,!1);function dropText(e,n,r,g){if(r=textFilter(e.state,clipboardInputFilter,r),!r)return;let y=e.posAtCoords({x:n.clientX,y:n.clientY},!1),{draggedContent:k}=e.inputState,$=g&&k&&dragMovesSelection(e,n)?{from:k.from,to:k.to}:null,V={from:y,insert:r},L=e.state.changes($?[$,V]:V);e.focus(),e.dispatch({changes:L,selection:{anchor:L.mapPos(y,-1),head:L.mapPos(y,1)},userEvent:$?"move.drop":"input.drop"}),e.inputState.draggedContent=null}handlers.drop=(e,n)=>{if(!n.dataTransfer)return!1;if(e.state.readOnly)return!0;let r=n.dataTransfer.files;if(r&&r.length){let g=Array(r.length),y=0,k=()=>{++y==r.length&&dropText(e,n,g.filter($=>$!=null).join(e.state.lineBreak),!1)};for(let $=0;$<r.length;$++){let V=new FileReader;V.onerror=k,V.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(V.result)||(g[$]=V.result),k()},V.readAsText(r[$])}return!0}else{let g=n.dataTransfer.getData("Text");if(g)return dropText(e,n,g,!0),!0}return!1};handlers.paste=(e,n)=>{if(e.state.readOnly)return!0;e.observer.flush();let r=brokenClipboardAPI?null:n.clipboardData;return r?(doPaste(e,r.getData("text/plain")||r.getData("text/uri-list")),!0):(capturePaste(e),!1)};function captureCopy(e,n){let r=e.dom.parentNode;if(!r)return;let g=r.appendChild(document.createElement("textarea"));g.style.cssText="position: fixed; left: -10000px; top: 10px",g.value=n,g.focus(),g.selectionEnd=n.length,g.selectionStart=0,setTimeout(()=>{g.remove(),e.focus()},50)}function copiedRange(e){let n=[],r=[],g=!1;for(let y of e.selection.ranges)y.empty||(n.push(e.sliceDoc(y.from,y.to)),r.push(y));if(!n.length){let y=-1;for(let{from:k}of e.selection.ranges){let $=e.doc.lineAt(k);$.number>y&&(n.push($.text),r.push({from:$.from,to:Math.min(e.doc.length,$.to+1)})),y=$.number}g=!0}return{text:textFilter(e,clipboardOutputFilter,n.join(e.lineBreak)),ranges:r,linewise:g}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(e,n)=>{let{text:r,ranges:g,linewise:y}=copiedRange(e.state);if(!r&&!y)return!1;lastLinewiseCopy=y?r:null,n.type=="cut"&&!e.state.readOnly&&e.dispatch({changes:g,scrollIntoView:!0,userEvent:"delete.cut"});let k=brokenClipboardAPI?null:n.clipboardData;return k?(k.clearData(),k.setData("text/plain",r),!0):(captureCopy(e,r),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(e,n){let r=[];for(let g of e.facet(focusChangeEffect)){let y=g(e,n);y&&r.push(y)}return r?e.update({effects:r,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(e){setTimeout(()=>{let n=e.hasFocus;if(n!=e.inputState.notifiedFocused){let r=focusChangeTransaction(e.state,n);r?e.dispatch(r):e.update([])}},10)}observers.focus=e=>{e.inputState.lastFocusTime=Date.now(),!e.scrollDOM.scrollTop&&(e.inputState.lastScrollTop||e.inputState.lastScrollLeft)&&(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),updateForFocusChange(e)};observers.blur=e=>{e.observer.clearSelectionRange(),updateForFocusChange(e)};observers.compositionstart=observers.compositionupdate=e=>{e.observer.editContext||(e.inputState.compositionFirstChange==null&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))};observers.compositionend=e=>{e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,browser.chrome&&browser.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then(()=>e.observer.flush()):setTimeout(()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])},50))};observers.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()};handlers.beforeinput=(e,n)=>{var r,g;if(n.inputType=="insertReplacementText"&&e.observer.editContext){let k=(r=n.dataTransfer)===null||r===void 0?void 0:r.getData("text/plain"),$=n.getTargetRanges();if(k&&$.length){let V=$[0],L=e.posAtDOM(V.startContainer,V.startOffset),z=e.posAtDOM(V.endContainer,V.endOffset);return applyDOMChangeInner(e,{from:L,to:z,insert:e.state.toText(k)},null),!0}}let y;if(browser.chrome&&browser.android&&(y=PendingKeys.find(k=>k.inputType==n.inputType))&&(e.observer.delayAndroidKey(y.key,y.keyCode),y.key=="Backspace"||y.key=="Delete")){let k=((g=window.visualViewport)===null||g===void 0?void 0:g.height)||0;setTimeout(()=>{var $;((($=window.visualViewport)===null||$===void 0?void 0:$.height)||0)>k+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())},100)}return browser.ios&&n.inputType=="deleteContentForward"&&e.observer.flushSoon(),browser.safari&&n.inputType=="insertText"&&e.inputState.composing>=0&&setTimeout(()=>observers.compositionend(e,n),20),!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack(e){appliedFirefoxHack.has(e)||(appliedFirefoxHack.add(e),e.addEventListener("copy",()=>{}),e.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];let heightChangeFlag=!1;function clearHeightChangeFlag(){heightChangeFlag=!1}class HeightOracle{constructor(n){this.lineWrapping=n,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(n,r){let g=this.doc.lineAt(r).number-this.doc.lineAt(n).number+1;return this.lineWrapping&&(g+=Math.max(0,Math.ceil((r-n-g*this.lineLength*.5)/this.lineLength))),this.lineHeight*g}heightForLine(n){return this.lineWrapping?(1+Math.max(0,Math.ceil((n-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(n){return this.doc=n,this}mustRefreshForWrapping(n){return wrappingWhiteSpace.indexOf(n)>-1!=this.lineWrapping}mustRefreshForHeights(n){let r=!1;for(let g=0;g<n.length;g++){let y=n[g];y<0?g++:this.heightSamples[Math.floor(y*10)]||(r=!0,this.heightSamples[Math.floor(y*10)]=!0)}return r}refresh(n,r,g,y,k,$){let V=wrappingWhiteSpace.indexOf(n)>-1,L=Math.round(r)!=Math.round(this.lineHeight)||this.lineWrapping!=V;if(this.lineWrapping=V,this.lineHeight=r,this.charWidth=g,this.textHeight=y,this.lineLength=k,L){this.heightSamples={};for(let z=0;z<$.length;z++){let j=$[z];j<0?z++:this.heightSamples[Math.floor(j*10)]=!0}}return L}}class MeasuredHeights{constructor(n,r){this.from=n,this.heights=r,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(n,r,g,y,k){this.from=n,this.length=r,this.top=g,this.height=y,this._content=k}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(n){let r=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(n._content)?n._content:[n]);return new BlockInfo(this.from,this.length+n.length,this.top,this.height+n.height,r)}}var QueryType$1=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(n,r,g=2){this.length=n,this.height=r,this.flags=g}get outdated(){return(this.flags&2)>0}set outdated(n){this.flags=(n?2:0)|this.flags&-3}setHeight(n){this.height!=n&&(Math.abs(this.height-n)>Epsilon&&(heightChangeFlag=!0),this.height=n)}replace(n,r,g){return HeightMap.of(g)}decomposeLeft(n,r){r.push(this)}decomposeRight(n,r){r.push(this)}applyChanges(n,r,g,y){let k=this,$=g.doc;for(let V=y.length-1;V>=0;V--){let{fromA:L,toA:z,fromB:j,toB:ae}=y[V],oe=k.lineAt(L,QueryType$1.ByPosNoHeight,g.setDoc(r),0,0),re=oe.to>=z?oe:k.lineAt(z,QueryType$1.ByPosNoHeight,g,0,0);for(ae+=re.to-z,z=re.to;V>0&&oe.from<=y[V-1].toA;)L=y[V-1].fromA,j=y[V-1].fromB,V--,L<oe.from&&(oe=k.lineAt(L,QueryType$1.ByPosNoHeight,g,0,0));j+=oe.from-L,L=oe.from;let ue=NodeBuilder.build(g.setDoc($),n,j,ae);k=replace(k,k.replace(L,z,ue))}return k.updateHeight(g,0)}static empty(){return new HeightMapText(0,0)}static of(n){if(n.length==1)return n[0];let r=0,g=n.length,y=0,k=0;for(;;)if(r==g)if(y>k*2){let V=n[r-1];V.break?n.splice(--r,1,V.left,null,V.right):n.splice(--r,1,V.left,V.right),g+=1+V.break,y-=V.size}else if(k>y*2){let V=n[g];V.break?n.splice(g,1,V.left,null,V.right):n.splice(g,1,V.left,V.right),g+=2+V.break,k-=V.size}else break;else if(y<k){let V=n[r++];V&&(y+=V.size)}else{let V=n[--g];V&&(k+=V.size)}let $=0;return n[r-1]==null?($=1,r--):n[r]==null&&($=1,g++),new HeightMapBranch(HeightMap.of(n.slice(0,r)),$,HeightMap.of(n.slice(g)))}}function replace(e,n){return e==n?e:(e.constructor!=n.constructor&&(heightChangeFlag=!0),n)}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(n,r,g){super(n,r),this.deco=g}blockAt(n,r,g,y){return new BlockInfo(y,this.length,g,this.height,this.deco||0)}lineAt(n,r,g,y,k){return this.blockAt(0,g,y,k)}forEachLine(n,r,g,y,k,$){n<=k+this.length&&r>=k&&$(this.blockAt(0,g,y,k))}updateHeight(n,r=0,g=!1,y){return y&&y.from<=r&&y.more&&this.setHeight(y.heights[y.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(n,r){super(n,r,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(n,r,g,y){return new BlockInfo(y,this.length,g,this.height,this.breaks)}replace(n,r,g){let y=g[0];return g.length==1&&(y instanceof HeightMapText||y instanceof HeightMapGap&&y.flags&4)&&Math.abs(this.length-y.length)<10?(y instanceof HeightMapGap?y=new HeightMapText(y.length,this.height):y.height=this.height,this.outdated||(y.outdated=!1),y):HeightMap.of(g)}updateHeight(n,r=0,g=!1,y){return y&&y.from<=r&&y.more?this.setHeight(y.heights[y.index++]):(g||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,n.heightForLine(this.length-this.collapsed))+this.breaks*n.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(n){super(n,0)}heightMetrics(n,r){let g=n.doc.lineAt(r).number,y=n.doc.lineAt(r+this.length).number,k=y-g+1,$,V=0;if(n.lineWrapping){let L=Math.min(this.height,n.lineHeight*k);$=L/k,this.length>k+1&&(V=(this.height-L)/(this.length-k-1))}else $=this.height/k;return{firstLine:g,lastLine:y,perLine:$,perChar:V}}blockAt(n,r,g,y){let{firstLine:k,lastLine:$,perLine:V,perChar:L}=this.heightMetrics(r,y);if(r.lineWrapping){let z=y+(n<r.lineHeight?0:Math.round(Math.max(0,Math.min(1,(n-g)/this.height))*this.length)),j=r.doc.lineAt(z),ae=V+j.length*L,oe=Math.max(g,n-ae/2);return new BlockInfo(j.from,j.length,oe,ae,0)}else{let z=Math.max(0,Math.min($-k,Math.floor((n-g)/V))),{from:j,length:ae}=r.doc.line(k+z);return new BlockInfo(j,ae,g+V*z,V,0)}}lineAt(n,r,g,y,k){if(r==QueryType$1.ByHeight)return this.blockAt(n,g,y,k);if(r==QueryType$1.ByPosNoHeight){let{from:re,to:ue}=g.doc.lineAt(n);return new BlockInfo(re,ue-re,0,0,0)}let{firstLine:$,perLine:V,perChar:L}=this.heightMetrics(g,k),z=g.doc.lineAt(n),j=V+z.length*L,ae=z.number-$,oe=y+V*ae+L*(z.from-k-ae);return new BlockInfo(z.from,z.length,Math.max(y,Math.min(oe,y+this.height-j)),j,0)}forEachLine(n,r,g,y,k,$){n=Math.max(n,k),r=Math.min(r,k+this.length);let{firstLine:V,perLine:L,perChar:z}=this.heightMetrics(g,k);for(let j=n,ae=y;j<=r;){let oe=g.doc.lineAt(j);if(j==n){let ue=oe.number-V;ae+=L*ue+z*(n-k-ue)}let re=L+z*oe.length;$(new BlockInfo(oe.from,oe.length,ae,re,0)),ae+=re,j=oe.to+1}}replace(n,r,g){let y=this.length-r;if(y>0){let k=g[g.length-1];k instanceof HeightMapGap?g[g.length-1]=new HeightMapGap(k.length+y):g.push(null,new HeightMapGap(y-1))}if(n>0){let k=g[0];k instanceof HeightMapGap?g[0]=new HeightMapGap(n+k.length):g.unshift(new HeightMapGap(n-1),null)}return HeightMap.of(g)}decomposeLeft(n,r){r.push(new HeightMapGap(n-1),null)}decomposeRight(n,r){r.push(null,new HeightMapGap(this.length-n-1))}updateHeight(n,r=0,g=!1,y){let k=r+this.length;if(y&&y.from<=r+this.length&&y.more){let $=[],V=Math.max(r,y.from),L=-1;for(y.from>r&&$.push(new HeightMapGap(y.from-r-1).updateHeight(n,r));V<=k&&y.more;){let j=n.doc.lineAt(V).length;$.length&&$.push(null);let ae=y.heights[y.index++];L==-1?L=ae:Math.abs(ae-L)>=Epsilon&&(L=-2);let oe=new HeightMapText(j,ae);oe.outdated=!1,$.push(oe),V+=j+1}V<=k&&$.push(null,new HeightMapGap(k-V).updateHeight(n,V));let z=HeightMap.of($);return(L<0||Math.abs(z.height-this.height)>=Epsilon||Math.abs(L-this.heightMetrics(n,r).perLine)>=Epsilon)&&(heightChangeFlag=!0),replace(this,z)}else(g||this.outdated)&&(this.setHeight(n.heightForGap(r,r+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(n,r,g){super(n.length+r+g.length,n.height+g.height,r|(n.outdated||g.outdated?2:0)),this.left=n,this.right=g,this.size=n.size+g.size}get break(){return this.flags&1}blockAt(n,r,g,y){let k=g+this.left.height;return n<k?this.left.blockAt(n,r,g,y):this.right.blockAt(n,r,k,y+this.left.length+this.break)}lineAt(n,r,g,y,k){let $=y+this.left.height,V=k+this.left.length+this.break,L=r==QueryType$1.ByHeight?n<$:n<V,z=L?this.left.lineAt(n,r,g,y,k):this.right.lineAt(n,r,g,$,V);if(this.break||(L?z.to<V:z.from>V))return z;let j=r==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return L?z.join(this.right.lineAt(V,j,g,$,V)):this.left.lineAt(V,j,g,y,k).join(z)}forEachLine(n,r,g,y,k,$){let V=y+this.left.height,L=k+this.left.length+this.break;if(this.break)n<L&&this.left.forEachLine(n,r,g,y,k,$),r>=L&&this.right.forEachLine(n,r,g,V,L,$);else{let z=this.lineAt(L,QueryType$1.ByPos,g,y,k);n<z.from&&this.left.forEachLine(n,z.from-1,g,y,k,$),z.to>=n&&z.from<=r&&$(z),r>z.to&&this.right.forEachLine(z.to+1,r,g,V,L,$)}}replace(n,r,g){let y=this.left.length+this.break;if(r<y)return this.balanced(this.left.replace(n,r,g),this.right);if(n>this.left.length)return this.balanced(this.left,this.right.replace(n-y,r-y,g));let k=[];n>0&&this.decomposeLeft(n,k);let $=k.length;for(let V of g)k.push(V);if(n>0&&mergeGaps(k,$-1),r<this.length){let V=k.length;this.decomposeRight(r,k),mergeGaps(k,V)}return HeightMap.of(k)}decomposeLeft(n,r){let g=this.left.length;if(n<=g)return this.left.decomposeLeft(n,r);r.push(this.left),this.break&&(g++,n>=g&&r.push(null)),n>g&&this.right.decomposeLeft(n-g,r)}decomposeRight(n,r){let g=this.left.length,y=g+this.break;if(n>=y)return this.right.decomposeRight(n-y,r);n<g&&this.left.decomposeRight(n,r),this.break&&n<y&&r.push(null),r.push(this.right)}balanced(n,r){return n.size>2*r.size||r.size>2*n.size?HeightMap.of(this.break?[n,null,r]:[n,r]):(this.left=replace(this.left,n),this.right=replace(this.right,r),this.setHeight(n.height+r.height),this.outdated=n.outdated||r.outdated,this.size=n.size+r.size,this.length=n.length+this.break+r.length,this)}updateHeight(n,r=0,g=!1,y){let{left:k,right:$}=this,V=r+k.length+this.break,L=null;return y&&y.from<=r+k.length&&y.more?L=k=k.updateHeight(n,r,g,y):k.updateHeight(n,r,g),y&&y.from<=V+$.length&&y.more?L=$=$.updateHeight(n,V,g,y):$.updateHeight(n,V,g),L?this.balanced(k,$):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(e,n){let r,g;e[n]==null&&(r=e[n-1])instanceof HeightMapGap&&(g=e[n+1])instanceof HeightMapGap&&e.splice(n-1,3,new HeightMapGap(r.length+1+g.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(n,r){this.pos=n,this.oracle=r,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=n}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(n,r){if(this.lineStart>-1){let g=Math.min(r,this.lineEnd),y=this.nodes[this.nodes.length-1];y instanceof HeightMapText?y.length+=g-this.pos:(g>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(g-this.pos,-1)),this.writtenTo=g,r>g&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=r}point(n,r,g){if(n<r||g.heightRelevant){let y=g.widget?g.widget.estimatedHeight:0,k=g.widget?g.widget.lineBreaks:0;y<0&&(y=this.oracle.lineHeight);let $=r-n;g.block?this.addBlock(new HeightMapBlock($,y,g)):($||k||y>=relevantWidgetHeight)&&this.addLineDeco(y,k,$)}else r>n&&this.span(n,r);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:n,to:r}=this.oracle.doc.lineAt(this.pos);this.lineStart=n,this.lineEnd=r,this.writtenTo<n&&((this.writtenTo<n-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,n-1)),this.nodes.push(null)),this.pos>n&&this.nodes.push(new HeightMapText(this.pos-n,-1)),this.writtenTo=this.pos}blankContent(n,r){let g=new HeightMapGap(r-n);return this.oracle.doc.lineAt(n).to==r&&(g.flags|=4),g}ensureLine(){this.enterLine();let n=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(n instanceof HeightMapText)return n;let r=new HeightMapText(0,-1);return this.nodes.push(r),r}addBlock(n){this.enterLine();let r=n.deco;r&&r.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(n),this.writtenTo=this.pos=this.pos+n.length,r&&r.endSide>0&&(this.covering=n)}addLineDeco(n,r,g){let y=this.ensureLine();y.length+=g,y.collapsed+=g,y.widgetHeight=Math.max(y.widgetHeight,n),y.breaks+=r,this.writtenTo=this.pos=this.pos+g}finish(n){let r=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(r instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||r==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let g=n;for(let y of this.nodes)y instanceof HeightMapText&&y.updateHeight(this.oracle,g),g+=y?y.length:1;return this.nodes}static build(n,r,g,y){let k=new NodeBuilder(g,n);return RangeSet.spans(r,g,y,k,0),k.finish(g)}}function heightRelevantDecoChanges(e,n,r){let g=new DecorationComparator2;return RangeSet.compare(e,n,r,g,0),g.changes}class DecorationComparator2{constructor(){this.changes=[]}compareRange(){}comparePoint(n,r,g,y){(n<r||g&&g.heightRelevant||y&&y.heightRelevant)&&addRange(n,r,this.changes,5)}}function visiblePixelRange(e,n){let r=e.getBoundingClientRect(),g=e.ownerDocument,y=g.defaultView||window,k=Math.max(0,r.left),$=Math.min(y.innerWidth,r.right),V=Math.max(0,r.top),L=Math.min(y.innerHeight,r.bottom);for(let z=e.parentNode;z&&z!=g.body;)if(z.nodeType==1){let j=z,ae=window.getComputedStyle(j);if((j.scrollHeight>j.clientHeight||j.scrollWidth>j.clientWidth)&&ae.overflow!="visible"){let oe=j.getBoundingClientRect();k=Math.max(k,oe.left),$=Math.min($,oe.right),V=Math.max(V,oe.top),L=Math.min(z==e.parentNode?y.innerHeight:L,oe.bottom)}z=ae.position=="absolute"||ae.position=="fixed"?j.offsetParent:j.parentNode}else if(z.nodeType==11)z=z.host;else break;return{left:k-r.left,right:Math.max(k,$)-r.left,top:V-(r.top+n),bottom:Math.max(V,L)-(r.top+n)}}function fullPixelRange(e,n){let r=e.getBoundingClientRect();return{left:0,right:r.right-r.left,top:n,bottom:r.bottom-(r.top+n)}}class LineGap{constructor(n,r,g,y){this.from=n,this.to=r,this.size=g,this.displaySize=y}static same(n,r){if(n.length!=r.length)return!1;for(let g=0;g<n.length;g++){let y=n[g],k=r[g];if(y.from!=k.from||y.to!=k.to||y.size!=k.size)return!1}return!0}draw(n,r){return Decoration.replace({widget:new LineGapWidget(this.displaySize*(r?n.scaleY:n.scaleX),r)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(n,r){super(),this.size=n,this.vertical=r}eq(n){return n.size==this.size&&n.vertical==this.vertical}toDOM(){let n=document.createElement("div");return this.vertical?n.style.height=this.size+"px":(n.style.width=this.size+"px",n.style.height="2px",n.style.display="inline-block"),n}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(n){this.state=n,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let r=n.facet(contentAttributes).some(g=>typeof g!="function"&&g.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(r),this.stateDeco=n.facet(decorations).filter(g=>typeof g!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(n.doc),[new ChangedRange(0,0,0,n.doc.length)]);for(let g=0;g<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());g++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(g=>g.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let n=[this.viewport],{main:r}=this.state.selection;for(let g=0;g<=1;g++){let y=g?r.head:r.anchor;if(!n.some(({from:k,to:$})=>y>=k&&y<=$)){let{from:k,to:$}=this.lineBlockAt(y);n.push(new Viewport(k,$))}}return this.viewports=n.sort((g,y)=>g.from-y.from),this.updateScaler()}updateScaler(){let n=this.scaler;return this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports),n.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,n=>{this.viewportLines.push(scaleBlock(n,this.scaler))})}update(n,r=null){this.state=n.state;let g=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(j=>typeof j!="function");let y=n.changedRanges,k=ChangedRange.extendWithRanges(y,heightRelevantDecoChanges(g,this.stateDeco,n?n.changes:ChangeSet.empty(this.state.doc.length))),$=this.heightMap.height,V=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);clearHeightChangeFlag(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,n.startState.doc,this.heightOracle.setDoc(this.state.doc),k),(this.heightMap.height!=$||heightChangeFlag)&&(n.flags|=2),V?(this.scrollAnchorPos=n.changes.mapPos(V.from,-1),this.scrollAnchorHeight=V.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let L=k.length?this.mapViewport(this.viewport,n.changes):this.viewport;(r&&(r.range.head<L.from||r.range.head>L.to)||!this.viewportIsAppropriate(L))&&(L=this.getViewport(0,r));let z=L.from!=this.viewport.from||L.to!=this.viewport.to;this.viewport=L,n.flags|=this.updateForViewport(),(z||!n.changes.empty||n.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,n.changes))),n.flags|=this.computeVisibleRanges(n.changes),r&&(this.scrollTarget=r),!this.mustEnforceCursorAssoc&&n.selectionSet&&n.view.lineWrapping&&n.state.selection.main.empty&&n.state.selection.main.assoc&&!n.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(n){let r=n.contentDOM,g=window.getComputedStyle(r),y=this.heightOracle,k=g.whiteSpace;this.defaultTextDirection=g.direction=="rtl"?Direction.RTL:Direction.LTR;let $=this.heightOracle.mustRefreshForWrapping(k),V=r.getBoundingClientRect(),L=$||this.mustMeasureContent||this.contentDOMHeight!=V.height;this.contentDOMHeight=V.height,this.mustMeasureContent=!1;let z=0,j=0;if(V.width&&V.height){let{scaleX:Ne,scaleY:$e}=getScale(r,V);(Ne>.005&&Math.abs(this.scaleX-Ne)>.005||$e>.005&&Math.abs(this.scaleY-$e)>.005)&&(this.scaleX=Ne,this.scaleY=$e,z|=16,$=L=!0)}let ae=(parseInt(g.paddingTop)||0)*this.scaleY,oe=(parseInt(g.paddingBottom)||0)*this.scaleY;(this.paddingTop!=ae||this.paddingBottom!=oe)&&(this.paddingTop=ae,this.paddingBottom=oe,z|=18),this.editorWidth!=n.scrollDOM.clientWidth&&(y.lineWrapping&&(L=!0),this.editorWidth=n.scrollDOM.clientWidth,z|=16);let re=n.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=re&&(this.scrollAnchorHeight=-1,this.scrollTop=re),this.scrolledToBottom=isScrolledToBottom(n.scrollDOM);let ue=(this.printing?fullPixelRange:visiblePixelRange)(r,this.paddingTop),le=ue.top-this.pixelViewport.top,de=ue.bottom-this.pixelViewport.bottom;this.pixelViewport=ue;let he=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(he!=this.inView&&(this.inView=he,he&&(L=!0)),!this.inView&&!this.scrollTarget)return 0;let _e=V.width;if((this.contentDOMWidth!=_e||this.editorHeight!=n.scrollDOM.clientHeight)&&(this.contentDOMWidth=V.width,this.editorHeight=n.scrollDOM.clientHeight,z|=16),L){let Ne=n.docView.measureVisibleLineHeights(this.viewport);if(y.mustRefreshForHeights(Ne)&&($=!0),$||y.lineWrapping&&Math.abs(_e-this.contentDOMWidth)>y.charWidth){let{lineHeight:$e,charWidth:Ce,textHeight:Ie}=n.docView.measureTextSize();$=$e>0&&y.refresh(k,$e,Ce,Ie,_e/Ce,Ne),$&&(n.docView.minWidth=0,z|=16)}le>0&&de>0?j=Math.max(le,de):le<0&&de<0&&(j=Math.min(le,de)),clearHeightChangeFlag();for(let $e of this.viewports){let Ce=$e.from==this.viewport.from?Ne:n.docView.measureVisibleLineHeights($e);this.heightMap=($?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,n.state.doc.length)]):this.heightMap).updateHeight(y,0,$,new MeasuredHeights($e.from,Ce))}heightChangeFlag&&(z|=2)}let xe=!this.viewportIsAppropriate(this.viewport,j)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return xe&&(z&2&&(z|=this.updateScaler()),this.viewport=this.getViewport(j,this.scrollTarget),z|=this.updateForViewport()),(z&2||xe)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps($?[]:this.lineGaps,n)),z|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,n.docView.enforceCursorAssoc()),z}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(n,r){let g=.5-Math.max(-.5,Math.min(.5,n/1e3/2)),y=this.heightMap,k=this.heightOracle,{visibleTop:$,visibleBottom:V}=this,L=new Viewport(y.lineAt($-g*1e3,QueryType$1.ByHeight,k,0,0).from,y.lineAt(V+(1-g)*1e3,QueryType$1.ByHeight,k,0,0).to);if(r){let{head:z}=r.range;if(z<L.from||z>L.to){let j=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),ae=y.lineAt(z,QueryType$1.ByPos,k,0,0),oe;r.y=="center"?oe=(ae.top+ae.bottom)/2-j/2:r.y=="start"||r.y=="nearest"&&z<L.from?oe=ae.top:oe=ae.bottom-j,L=new Viewport(y.lineAt(oe-1e3/2,QueryType$1.ByHeight,k,0,0).from,y.lineAt(oe+j+1e3/2,QueryType$1.ByHeight,k,0,0).to)}}return L}mapViewport(n,r){let g=r.mapPos(n.from,-1),y=r.mapPos(n.to,1);return new Viewport(this.heightMap.lineAt(g,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(y,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:n,to:r},g=0){if(!this.inView)return!0;let{top:y}=this.heightMap.lineAt(n,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:k}=this.heightMap.lineAt(r,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:$,visibleBottom:V}=this;return(n==0||y<=$-Math.max(10,Math.min(-g,250)))&&(r==this.state.doc.length||k>=V+Math.max(10,Math.min(g,250)))&&y>$-2*1e3&&k<V+2*1e3}mapLineGaps(n,r){if(!n.length||r.empty)return n;let g=[];for(let y of n)r.touchesRange(y.from,y.to)||g.push(new LineGap(r.mapPos(y.from),r.mapPos(y.to),y.size,y.displaySize));return g}ensureLineGaps(n,r){let g=this.heightOracle.lineWrapping,y=g?1e4:2e3,k=y>>1,$=y<<1;if(this.defaultTextDirection!=Direction.LTR&&!g)return[];let V=[],L=(j,ae,oe,re)=>{if(ae-j<k)return;let ue=this.state.selection.main,le=[ue.from];ue.empty||le.push(ue.to);for(let he of le)if(he>j&&he<ae){L(j,he-10,oe,re),L(he+10,ae,oe,re);return}let de=find(n,he=>he.from>=oe.from&&he.to<=oe.to&&Math.abs(he.from-j)<k&&Math.abs(he.to-ae)<k&&!le.some(_e=>he.from<_e&&he.to>_e));if(!de){if(ae<oe.to&&r&&g&&r.visibleRanges.some(xe=>xe.from<=ae&&xe.to>=ae)){let xe=r.moveToLineBoundary(EditorSelection.cursor(ae),!1,!0).head;xe>j&&(ae=xe)}let he=this.gapSize(oe,j,ae,re),_e=g||he<2e6?he:2e6;de=new LineGap(j,ae,he,_e)}V.push(de)},z=j=>{if(j.length<$||j.type!=BlockType.Text)return;let ae=lineStructure(j.from,j.to,this.stateDeco);if(ae.total<$)return;let oe=this.scrollTarget?this.scrollTarget.range.head:null,re,ue;if(g){let le=y/this.heightOracle.lineLength*this.heightOracle.lineHeight,de,he;if(oe!=null){let _e=findFraction(ae,oe),xe=((this.visibleBottom-this.visibleTop)/2+le)/j.height;de=_e-xe,he=_e+xe}else de=(this.visibleTop-j.top-le)/j.height,he=(this.visibleBottom-j.top+le)/j.height;re=findPosition(ae,de),ue=findPosition(ae,he)}else{let le=ae.total*this.heightOracle.charWidth,de=y*this.heightOracle.charWidth,he=0;if(le>2e6)for(let Ce of n)Ce.from>=j.from&&Ce.from<j.to&&Ce.size!=Ce.displaySize&&Ce.from*this.heightOracle.charWidth+he<this.pixelViewport.left&&(he=Ce.size-Ce.displaySize);let _e=this.pixelViewport.left+he,xe=this.pixelViewport.right+he,Ne,$e;if(oe!=null){let Ce=findFraction(ae,oe),Ie=((xe-_e)/2+de)/le;Ne=Ce-Ie,$e=Ce+Ie}else Ne=(_e-de)/le,$e=(xe+de)/le;re=findPosition(ae,Ne),ue=findPosition(ae,$e)}re>j.from&&L(j.from,re,j,ae),ue<j.to&&L(ue,j.to,j,ae)};for(let j of this.viewportLines)Array.isArray(j.type)?j.type.forEach(z):z(j);return V}gapSize(n,r,g,y){let k=findFraction(y,g)-findFraction(y,r);return this.heightOracle.lineWrapping?n.height*k:y.total*this.heightOracle.charWidth*k}updateLineGaps(n){LineGap.same(n,this.lineGaps)||(this.lineGaps=n,this.lineGapDeco=Decoration.set(n.map(r=>r.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(n){let r=this.stateDeco;this.lineGaps.length&&(r=r.concat(this.lineGapDeco));let g=[];RangeSet.spans(r,this.viewport.from,this.viewport.to,{span(k,$){g.push({from:k,to:$})},point(){}},20);let y=0;if(g.length!=this.visibleRanges.length)y=12;else for(let k=0;k<g.length&&!(y&8);k++){let $=this.visibleRanges[k],V=g[k];($.from!=V.from||$.to!=V.to)&&(y|=4,n&&n.mapPos($.from,-1)==V.from&&n.mapPos($.to,1)==V.to||(y|=8))}return this.visibleRanges=g,y}lineBlockAt(n){return n>=this.viewport.from&&n<=this.viewport.to&&this.viewportLines.find(r=>r.from<=n&&r.to>=n)||scaleBlock(this.heightMap.lineAt(n,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(n){return n>=this.viewportLines[0].top&&n<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(r=>r.top<=n&&r.bottom>=n)||scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(n),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(n){let r=this.lineBlockAtHeight(n+8);return r.from>=this.viewport.from||this.viewportLines[0].top-n>200?r:this.viewportLines[0]}elementAtHeight(n){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(n),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(n,r){this.from=n,this.to=r}}function lineStructure(e,n,r){let g=[],y=e,k=0;return RangeSet.spans(r,e,n,{span(){},point($,V){$>y&&(g.push({from:y,to:$}),k+=$-y),y=V}},20),y<n&&(g.push({from:y,to:n}),k+=n-y),{total:k,ranges:g}}function findPosition({total:e,ranges:n},r){if(r<=0)return n[0].from;if(r>=1)return n[n.length-1].to;let g=Math.floor(e*r);for(let y=0;;y++){let{from:k,to:$}=n[y],V=$-k;if(g<=V)return k+g;g-=V}}function findFraction(e,n){let r=0;for(let{from:g,to:y}of e.ranges){if(n<=y){r+=n-g;break}r+=y-g}return r/e.total}function find(e,n){for(let r of e)if(n(r))return r}const IdScaler={toDOM(e){return e},fromDOM(e){return e},scale:1,eq(e){return e==this}};class BigScaler{constructor(n,r,g){let y=0,k=0,$=0;this.viewports=g.map(({from:V,to:L})=>{let z=r.lineAt(V,QueryType$1.ByPos,n,0,0).top,j=r.lineAt(L,QueryType$1.ByPos,n,0,0).bottom;return y+=j-z,{from:V,to:L,top:z,bottom:j,domTop:0,domBottom:0}}),this.scale=(7e6-y)/(r.height-y);for(let V of this.viewports)V.domTop=$+(V.top-k)*this.scale,$=V.domBottom=V.domTop+(V.bottom-V.top),k=V.bottom}toDOM(n){for(let r=0,g=0,y=0;;r++){let k=r<this.viewports.length?this.viewports[r]:null;if(!k||n<k.top)return y+(n-g)*this.scale;if(n<=k.bottom)return k.domTop+(n-k.top);g=k.bottom,y=k.domBottom}}fromDOM(n){for(let r=0,g=0,y=0;;r++){let k=r<this.viewports.length?this.viewports[r]:null;if(!k||n<k.domTop)return g+(n-y)/this.scale;if(n<=k.domBottom)return k.top+(n-k.domTop);g=k.bottom,y=k.domBottom}}eq(n){return n instanceof BigScaler?this.scale==n.scale&&this.viewports.length==n.viewports.length&&this.viewports.every((r,g)=>r.from==n.viewports[g].from&&r.to==n.viewports[g].to):!1}}function scaleBlock(e,n){if(n.scale==1)return e;let r=n.toDOM(e.top),g=n.toDOM(e.bottom);return new BlockInfo(e.from,e.length,r,g-r,Array.isArray(e._content)?e._content.map(y=>scaleBlock(y,n)):e._content)}const theme=Facet.define({combine:e=>e.join(" ")}),darkTheme=Facet.define({combine:e=>e.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(e,n,r){return new StyleModule(n,{finish(g){return/&/.test(g)?g.replace(/&\w*/,y=>{if(y=="&")return e;if(!r||!r[y])throw new RangeError(`Unsupported selector: ${y}`);return r[y]}):e+" "+g}})}const baseTheme$1$3=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(n){this.view=n,this.active=!1,this.editContext=null,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=n.contentDOM,this.observer=new MutationObserver(r=>{for(let g of r)this.queue.push(g);(browser.ie&&browser.ie_version<=11||browser.ios&&n.composing)&&r.some(g=>g.type=="childList"&&g.removedNodes.length||g.type=="characterData"&&g.oldValue.length>g.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&n.constructor.EDIT_CONTEXT!==!1&&!(browser.chrome&&browser.chrome_version<126)&&(this.editContext=new EditContextManager(n),n.state.facet(editable)&&(n.contentDOM.editContext=this.editContext.editContext)),useCharData&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var r;((r=this.view.docView)===null||r===void 0?void 0:r.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(n.scrollDOM)),this.addWindowListeners(this.win=n.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(r=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),r.length>0&&r[r.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(r=>{r.length>0&&r[r.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(n){this.view.inputState.runHandlers("scroll",n),this.intersecting&&this.view.measure()}onScroll(n){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(n)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(n){(n.type=="change"||!n.type)&&!n.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(n){if(this.gapIntersection&&(n.length!=this.gaps.length||this.gaps.some((r,g)=>r!=n[g]))){this.gapIntersection.disconnect();for(let r of n)this.gapIntersection.observe(r);this.gaps=n}}onSelectionChange(n){let r=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:g}=this,y=this.selectionRange;if(g.state.facet(editable)?g.root.activeElement!=this.dom:!hasSelection(this.dom,y))return;let k=y.anchorNode&&g.docView.nearest(y.anchorNode);if(k&&k.ignoreEvent(n)){r||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!g.state.selection.main.empty&&y.focusNode&&isEquivalentPosition(y.focusNode,y.focusOffset,y.anchorNode,y.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:n}=this,r=getSelection(n.root);if(!r)return!1;let g=browser.safari&&n.root.nodeType==11&&n.root.activeElement==this.dom&&safariSelectionRangeHack(this.view,r)||r;if(!g||this.selectionRange.eq(g))return!1;let y=hasSelection(this.dom,g);return y&&!this.selectionChanged&&n.inputState.lastFocusTime>Date.now()-200&&n.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,g)?(this.view.inputState.lastFocusTime=0,n.docView.updateSelection(),!1):(this.selectionRange.setRange(g),y&&(this.selectionChanged=!0),!0)}setSelectionRange(n,r){this.selectionRange.set(n.node,n.offset,r.node,r.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let n=0,r=null;for(let g=this.dom;g;)if(g.nodeType==1)!r&&n<this.scrollTargets.length&&this.scrollTargets[n]==g?n++:r||(r=this.scrollTargets.slice(0,n)),r&&r.push(g),g=g.assignedSlot||g.parentNode;else if(g.nodeType==11)g=g.host;else break;if(n<this.scrollTargets.length&&!r&&(r=this.scrollTargets.slice(0,n)),r){for(let g of this.scrollTargets)g.removeEventListener("scroll",this.onScroll);for(let g of this.scrollTargets=r)g.addEventListener("scroll",this.onScroll)}}ignore(n){if(!this.active)return n();try{return this.stop(),n()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(n,r){var g;if(!this.delayedAndroidKey){let y=()=>{let k=this.delayedAndroidKey;k&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=k.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&k.force&&dispatchKey(this.dom,k.key,k.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(y)}(!this.delayedAndroidKey||n=="Enter")&&(this.delayedAndroidKey={key:n,keyCode:r,force:this.lastChange<Date.now()-50||!!(!((g=this.delayedAndroidKey)===null||g===void 0)&&g.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let n of this.observer.takeRecords())this.queue.push(n);return this.queue}processRecords(){let n=this.pendingRecords();n.length&&(this.queue=[]);let r=-1,g=-1,y=!1;for(let k of n){let $=this.readMutation(k);$&&($.typeOver&&(y=!0),r==-1?{from:r,to:g}=$:(r=Math.min($.from,r),g=Math.max($.to,g)))}return{from:r,to:g,typeOver:y}}readChange(){let{from:n,to:r,typeOver:g}=this.processRecords(),y=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(n<0&&!y)return null;n>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let k=new DOMChange(this.view,n,r,g);return this.view.docView.domChanged={newSel:k.newSel?k.newSel.main:null},k}flush(n=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;n&&this.readSelectionRange();let r=this.readChange();if(!r)return this.view.requestMeasure(),!1;let g=this.view.state,y=applyDOMChange(this.view,r);return this.view.state==g&&(r.domChanged||r.newSel&&!r.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),y}readMutation(n){let r=this.view.docView.nearest(n.target);if(!r||r.ignoreMutation(n))return null;if(r.markDirty(n.type=="attributes"),n.type=="attributes"&&(r.flags|=4),n.type=="childList"){let g=findChild(r,n.previousSibling||n.target.previousSibling,-1),y=findChild(r,n.nextSibling||n.target.nextSibling,1);return{from:g?r.posAfter(g):r.posAtStart,to:y?r.posBefore(y):r.posAtEnd,typeOver:!1}}else return n.type=="characterData"?{from:r.posAtStart,to:r.posAtEnd,typeOver:n.target.nodeValue==n.oldValue}:null}setWindow(n){n!=this.win&&(this.removeWindowListeners(this.win),this.win=n,this.addWindowListeners(this.win))}addWindowListeners(n){n.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):n.addEventListener("beforeprint",this.onPrint),n.addEventListener("scroll",this.onScroll),n.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(n){n.removeEventListener("scroll",this.onScroll),n.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):n.removeEventListener("beforeprint",this.onPrint),n.document.removeEventListener("selectionchange",this.onSelectionChange)}update(n){this.editContext&&(this.editContext.update(n),n.startState.facet(editable)!=n.state.facet(editable)&&(n.view.contentDOM.editContext=n.state.facet(editable)?this.editContext.editContext:null))}destroy(){var n,r,g;this.stop(),(n=this.intersection)===null||n===void 0||n.disconnect(),(r=this.gapIntersection)===null||r===void 0||r.disconnect(),(g=this.resizeScroll)===null||g===void 0||g.disconnect();for(let y of this.scrollTargets)y.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function findChild(e,n,r){for(;n;){let g=ContentView.get(n);if(g&&g.parent==e)return g;let y=n.parentNode;n=y!=e.dom?y:r>0?n.nextSibling:n.previousSibling}return null}function buildSelectionRangeFromRange(e,n){let r=n.startContainer,g=n.startOffset,y=n.endContainer,k=n.endOffset,$=e.docView.domAtPos(e.state.selection.main.anchor);return isEquivalentPosition($.node,$.offset,y,k)&&([r,g,y,k]=[y,k,r,g]),{anchorNode:r,anchorOffset:g,focusNode:y,focusOffset:k}}function safariSelectionRangeHack(e,n){if(n.getComposedRanges){let y=n.getComposedRanges(e.root)[0];if(y)return buildSelectionRangeFromRange(e,y)}let r=null;function g(y){y.preventDefault(),y.stopImmediatePropagation(),r=y.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",g,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",g,!0),r?buildSelectionRangeFromRange(e,r):null}class EditContextManager{constructor(n){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(n.state);let r=this.editContext=new window.EditContext({text:n.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,n.state.selection.main.anchor))),selectionEnd:this.toContextPos(n.state.selection.main.head)});this.handlers.textupdate=g=>{let{anchor:y}=n.state.selection.main,k=this.toEditorPos(g.updateRangeStart),$=this.toEditorPos(g.updateRangeEnd);n.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:g.updateRangeStart,editorBase:k,drifted:!1});let V={from:k,to:$,insert:Text.of(g.text.split(`
`))};if(V.from==this.from&&y<this.from?V.from=y:V.to==this.to&&y>this.to&&(V.to=y),!(V.from==V.to&&!V.insert.length)){if(this.pendingContextChange=V,!n.state.readOnly){let L=this.to-this.from+(V.to-V.from+V.insert.length);applyDOMChangeInner(n,V,EditorSelection.single(this.toEditorPos(g.selectionStart,L),this.toEditorPos(g.selectionEnd,L)))}this.pendingContextChange&&(this.revertPending(n.state),this.setSelection(n.state))}},this.handlers.characterboundsupdate=g=>{let y=[],k=null;for(let $=this.toEditorPos(g.rangeStart),V=this.toEditorPos(g.rangeEnd);$<V;$++){let L=n.coordsForChar($);k=L&&new DOMRect(L.left,L.top,L.right-L.left,L.bottom-L.top)||k||new DOMRect,y.push(k)}r.updateCharacterBounds(g.rangeStart,y)},this.handlers.textformatupdate=g=>{let y=[];for(let k of g.getTextFormats()){let $=k.underlineStyle,V=k.underlineThickness;if($!="None"&&V!="None"){let L=this.toEditorPos(k.rangeStart),z=this.toEditorPos(k.rangeEnd);if(L<z){let j=`text-decoration: underline ${$=="Dashed"?"dashed ":$=="Squiggle"?"wavy ":""}${V=="Thin"?1:2}px`;y.push(Decoration.mark({attributes:{style:j}}).range(L,z))}}}n.dispatch({effects:setEditContextFormatting.of(Decoration.set(y))})},this.handlers.compositionstart=()=>{n.inputState.composing<0&&(n.inputState.composing=0,n.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(n.inputState.composing=-1,n.inputState.compositionFirstChange=null,this.composing){let{drifted:g}=this.composing;this.composing=null,g&&this.reset(n.state)}};for(let g in this.handlers)r.addEventListener(g,this.handlers[g]);this.measureReq={read:g=>{this.editContext.updateControlBounds(g.contentDOM.getBoundingClientRect());let y=getSelection(g.root);y&&y.rangeCount&&this.editContext.updateSelectionBounds(y.getRangeAt(0).getBoundingClientRect())}}}applyEdits(n){let r=0,g=!1,y=this.pendingContextChange;return n.changes.iterChanges((k,$,V,L,z)=>{if(g)return;let j=z.length-($-k);if(y&&$>=y.to)if(y.from==k&&y.to==$&&y.insert.eq(z)){y=this.pendingContextChange=null,r+=j,this.to+=j;return}else y=null,this.revertPending(n.state);if(k+=r,$+=r,$<=this.from)this.from+=j,this.to+=j;else if(k<this.to){if(k<this.from||$>this.to||this.to-this.from+z.length>3e4){g=!0;return}this.editContext.updateText(this.toContextPos(k),this.toContextPos($),z.toString()),this.to+=j}r+=j}),y&&!g&&this.revertPending(n.state),!g}update(n){let r=this.pendingContextChange;this.composing&&(this.composing.drifted||n.transactions.some(g=>!g.isUserEvent("input.type")&&g.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=n.changes.mapPos(this.composing.editorBase)):!this.applyEdits(n)||!this.rangeIsValid(n.state)?(this.pendingContextChange=null,this.reset(n.state)):(n.docChanged||n.selectionSet||r)&&this.setSelection(n.state),(n.geometryChanged||n.docChanged||n.selectionSet)&&n.view.requestMeasure(this.measureReq)}resetRange(n){let{head:r}=n.selection.main;this.from=Math.max(0,r-1e4),this.to=Math.min(n.doc.length,r+1e4)}reset(n){this.resetRange(n),this.editContext.updateText(0,this.editContext.text.length,n.doc.sliceString(this.from,this.to)),this.setSelection(n)}revertPending(n){let r=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(r.from),this.toContextPos(r.from+r.insert.length),n.doc.sliceString(r.from,r.to))}setSelection(n){let{main:r}=n.selection,g=this.toContextPos(Math.max(this.from,Math.min(this.to,r.anchor))),y=this.toContextPos(r.head);(this.editContext.selectionStart!=g||this.editContext.selectionEnd!=y)&&this.editContext.updateSelection(g,y)}rangeIsValid(n){let{head:r}=n.selection.main;return!(this.from>0&&r-this.from<500||this.to<n.doc.length&&this.to-r<500||this.to-this.from>1e4*3)}toEditorPos(n,r=this.to-this.from){n=Math.min(n,r);let g=this.composing;return g&&g.drifted?g.editorBase+(n-g.contextBase):n+this.from}toContextPos(n){let r=this.composing;return r&&r.drifted?r.contextBase+(n-r.editorBase):n-this.from}destroy(){for(let n in this.handlers)this.editContext.removeEventListener(n,this.handlers[n])}}class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(n={}){var r;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),n.parent&&n.parent.appendChild(this.dom);let{dispatch:g}=n;this.dispatchTransactions=n.dispatchTransactions||g&&(y=>y.forEach(k=>g(k,this)))||(y=>this.update(y)),this.dispatch=this.dispatch.bind(this),this._root=n.root||getRoot(n.parent)||document,this.viewState=new ViewState(n.state||EditorState.create(n)),n.scrollTo&&n.scrollTo.is(scrollIntoView$1)&&(this.viewState.scrollTarget=n.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(y=>new PluginInstance(y));for(let y of this.plugins)y.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((r=document.fonts)===null||r===void 0)&&r.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...n){let r=n.length==1&&n[0]instanceof Transaction?n:n.length==1&&Array.isArray(n[0])?n[0]:[this.state.update(...n)];this.dispatchTransactions(r,this)}update(n){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let r=!1,g=!1,y,k=this.state;for(let oe of n){if(oe.startState!=k)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");k=oe.state}if(this.destroyed){this.viewState.state=k;return}let $=this.hasFocus,V=0,L=null;n.some(oe=>oe.annotation(isFocusChange))?(this.inputState.notifiedFocused=$,V=1):$!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=$,L=focusChangeTransaction(k,$),L||(V=1));let z=this.observer.delayedAndroidKey,j=null;if(z?(this.observer.clearDelayedAndroidKey(),j=this.observer.readChange(),(j&&!this.state.doc.eq(k.doc)||!this.state.selection.eq(k.selection))&&(j=null)):this.observer.clear(),k.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(k);y=ViewUpdate.create(this,k,n),y.flags|=V;let ae=this.viewState.scrollTarget;try{this.updateState=2;for(let oe of n){if(ae&&(ae=ae.map(oe.changes)),oe.scrollIntoView){let{main:re}=oe.state.selection;ae=new ScrollTarget(re.empty?re:EditorSelection.cursor(re.head,re.head>re.anchor?-1:1))}for(let re of oe.effects)re.is(scrollIntoView$1)&&(ae=re.value.clip(this.state))}this.viewState.update(y,ae),this.bidiCache=CachedOrder.update(this.bidiCache,y.changes),y.empty||(this.updatePlugins(y),this.inputState.update(y)),r=this.docView.update(y),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),g=this.updateAttrs(),this.showAnnouncements(n),this.docView.updateSelection(r,n.some(oe=>oe.isUserEvent("select.pointer")))}finally{this.updateState=0}if(y.startState.facet(theme)!=y.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(r||g||ae||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),r&&this.docViewUpdate(),!y.empty)for(let oe of this.state.facet(updateListener))try{oe(y)}catch(re){logException(this.state,re,"update listener")}(L||j)&&Promise.resolve().then(()=>{L&&this.state==L.startState&&this.dispatch(L),j&&!applyDOMChange(this,j)&&z.force&&dispatchKey(this.contentDOM,z.key,z.keyCode)})}setState(n){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=n;return}this.updateState=2;let r=this.hasFocus;try{for(let g of this.plugins)g.destroy(this);this.viewState=new ViewState(n),this.plugins=n.facet(viewPlugin).map(g=>new PluginInstance(g)),this.pluginMap.clear();for(let g of this.plugins)g.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}r&&this.focus(),this.requestMeasure()}updatePlugins(n){let r=n.startState.facet(viewPlugin),g=n.state.facet(viewPlugin);if(r!=g){let y=[];for(let k of g){let $=r.indexOf(k);if($<0)y.push(new PluginInstance(k));else{let V=this.plugins[$];V.mustUpdate=n,y.push(V)}}for(let k of this.plugins)k.mustUpdate!=n&&k.destroy(this);this.plugins=y,this.pluginMap.clear()}else for(let y of this.plugins)y.mustUpdate=n;for(let y=0;y<this.plugins.length;y++)this.plugins[y].update(this);r!=g&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let n of this.plugins){let r=n.value;if(r&&r.docViewUpdate)try{r.docViewUpdate(this)}catch(g){logException(this.state,g,"doc view update listener")}}}measure(n=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,n&&this.observer.forceFlush();let r=null,g=this.scrollDOM,y=g.scrollTop*this.scaleY,{scrollAnchorPos:k,scrollAnchorHeight:$}=this.viewState;Math.abs(y-this.viewState.scrollTop)>1&&($=-1),this.viewState.scrollAnchorHeight=-1;try{for(let V=0;;V++){if($<0)if(isScrolledToBottom(g))k=-1,$=this.viewState.heightMap.height;else{let re=this.viewState.scrollAnchorAt(y);k=re.from,$=re.top}this.updateState=1;let L=this.viewState.measure(this);if(!L&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(V>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let z=[];L&4||([this.measureRequests,z]=[z,this.measureRequests]);let j=z.map(re=>{try{return re.read(this)}catch(ue){return logException(this.state,ue),BadMeasure}}),ae=ViewUpdate.create(this,this.state,[]),oe=!1;ae.flags|=L,r?r.flags|=L:r=ae,this.updateState=2,ae.empty||(this.updatePlugins(ae),this.inputState.update(ae),this.updateAttrs(),oe=this.docView.update(ae),oe&&this.docViewUpdate());for(let re=0;re<z.length;re++)if(j[re]!=BadMeasure)try{let ue=z[re];ue.write&&ue.write(j[re],this)}catch(ue){logException(this.state,ue)}if(oe&&this.docView.updateSelection(!0),!ae.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,$=-1;continue}else{let ue=(k<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(k).top)-$;if(ue>1||ue<-1){y=y+ue,g.scrollTop=y/this.scaleY,$=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(r&&!r.empty)for(let V of this.state.facet(updateListener))V(r)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let n=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),r={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(r["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,r);let g=this.observer.ignore(()=>{let y=updateAttrs(this.contentDOM,this.contentAttrs,r),k=updateAttrs(this.dom,this.editorAttrs,n);return y||k});return this.editorAttrs=n,this.contentAttrs=r,g}showAnnouncements(n){let r=!0;for(let g of n)for(let y of g.effects)if(y.is(EditorView.announce)){r&&(this.announceDOM.textContent=""),r=!1;let k=this.announceDOM.appendChild(document.createElement("div"));k.textContent=y.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let n=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$3).reverse(),n?{nonce:n}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(n){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),n){if(this.measureRequests.indexOf(n)>-1)return;if(n.key!=null){for(let r=0;r<this.measureRequests.length;r++)if(this.measureRequests[r].key===n.key){this.measureRequests[r]=n;return}}this.measureRequests.push(n)}}plugin(n){let r=this.pluginMap.get(n);return(r===void 0||r&&r.spec!=n)&&this.pluginMap.set(n,r=this.plugins.find(g=>g.spec==n)||null),r&&r.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(n){return this.readMeasured(),this.viewState.elementAtHeight(n)}lineBlockAtHeight(n){return this.readMeasured(),this.viewState.lineBlockAtHeight(n)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(n){return this.viewState.lineBlockAt(n)}get contentHeight(){return this.viewState.contentHeight}moveByChar(n,r,g){return skipAtoms(this,n,moveByChar(this,n,r,g))}moveByGroup(n,r){return skipAtoms(this,n,moveByChar(this,n,r,g=>byGroup(this,n.head,g)))}visualLineSide(n,r){let g=this.bidiSpans(n),y=this.textDirectionAt(n.from),k=g[r?g.length-1:0];return EditorSelection.cursor(k.side(r,y)+n.from,k.forward(!r,y)?1:-1)}moveToLineBoundary(n,r,g=!0){return moveToLineBoundary(this,n,r,g)}moveVertically(n,r,g){return skipAtoms(this,n,moveVertically(this,n,r,g))}domAtPos(n){return this.docView.domAtPos(n)}posAtDOM(n,r=0){return this.docView.posFromDOM(n,r)}posAtCoords(n,r=!0){return this.readMeasured(),posAtCoords(this,n,r)}coordsAtPos(n,r=1){this.readMeasured();let g=this.docView.coordsAt(n,r);if(!g||g.left==g.right)return g;let y=this.state.doc.lineAt(n),k=this.bidiSpans(y),$=k[BidiSpan.find(k,n-y.from,-1,r)];return flattenRect(g,$.dir==Direction.LTR==r>0)}coordsForChar(n){return this.readMeasured(),this.docView.coordsForChar(n)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(n){return!this.state.facet(perLineTextDirection)||n<this.viewport.from||n>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(n))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(n){if(n.length>MaxBidiLine)return trivialOrder(n.length);let r=this.textDirectionAt(n.from),g;for(let k of this.bidiCache)if(k.from==n.from&&k.dir==r&&(k.fresh||isolatesEq(k.isolates,g=getIsolatedRanges(this,n))))return k.order;g||(g=getIsolatedRanges(this,n));let y=computeOrder(n.text,r,g);return this.bidiCache.push(new CachedOrder(n.from,n.to,r,g,!0,y)),y}get hasFocus(){var n;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((n=this.inputState)===null||n===void 0?void 0:n.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(n){this._root!=n&&(this._root=n,this.observer.setWindow((n.nodeType==9?n:n.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let n of this.plugins)n.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(n,r={}){return scrollIntoView$1.of(new ScrollTarget(typeof n=="number"?EditorSelection.cursor(n):n,r.y,r.x,r.yMargin,r.xMargin))}scrollSnapshot(){let{scrollTop:n,scrollLeft:r}=this.scrollDOM,g=this.viewState.scrollAnchorAt(n);return scrollIntoView$1.of(new ScrollTarget(EditorSelection.cursor(g.from),"start","start",g.top-n,r,!0))}setTabFocusMode(n){n==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof n=="boolean"?this.inputState.tabFocusMode=n?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+n)}static domEventHandlers(n){return ViewPlugin.define(()=>({}),{eventHandlers:n})}static domEventObservers(n){return ViewPlugin.define(()=>({}),{eventObservers:n})}static theme(n,r){let g=StyleModule.newName(),y=[theme.of(g),styleModule.of(buildTheme(`.${g}`,n))];return r&&r.dark&&y.push(darkTheme.of(!0)),y}static baseTheme(n){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,n,lightDarkIDs)))}static findFromDOM(n){var r;let g=n.querySelector(".cm-content"),y=g&&ContentView.get(g)||ContentView.get(n);return((r=y?.rootView)===null||r===void 0?void 0:r.view)||null}}EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler$1;EditorView.clipboardInputFilter=clipboardInputFilter;EditorView.clipboardOutputFilter=clipboardOutputFilter;EditorView.scrollHandler=scrollHandler;EditorView.focusChangeEffect=focusChangeEffect;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.outerDecorations=outerDecorations;EditorView.atomicRanges=atomicRanges;EditorView.bidiIsolatedRanges=bidiIsolatedRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.cspNonce=Facet.define({combine:e=>e.length?e[0]:""});EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(n,r,g,y,k,$){this.from=n,this.to=r,this.dir=g,this.isolates=y,this.fresh=k,this.order=$}static update(n,r){if(r.empty&&!n.some(k=>k.fresh))return n;let g=[],y=n.length?n[n.length-1].dir:Direction.LTR;for(let k=Math.max(0,n.length-10);k<n.length;k++){let $=n[k];$.dir==y&&!r.touchesRange($.from,$.to)&&g.push(new CachedOrder(r.mapPos($.from,1),r.mapPos($.to,-1),$.dir,$.isolates,!1,$.order))}return g}}function attrsFromFacet(e,n,r){for(let g=e.state.facet(n),y=g.length-1;y>=0;y--){let k=g[y],$=typeof k=="function"?k(e):k;$&&combineAttrs($,r)}return r}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(e,n){const r=e.split(/-(?!$)/);let g=r[r.length-1];g=="Space"&&(g=" ");let y,k,$,V;for(let L=0;L<r.length-1;++L){const z=r[L];if(/^(cmd|meta|m)$/i.test(z))V=!0;else if(/^a(lt)?$/i.test(z))y=!0;else if(/^(c|ctrl|control)$/i.test(z))k=!0;else if(/^s(hift)?$/i.test(z))$=!0;else if(/^mod$/i.test(z))n=="mac"?V=!0:k=!0;else throw new Error("Unrecognized modifier name: "+z)}return y&&(g="Alt-"+g),k&&(g="Ctrl-"+g),V&&(g="Meta-"+g),$&&(g="Shift-"+g),g}function modifiers(e,n,r){return n.altKey&&(e="Alt-"+e),n.ctrlKey&&(e="Ctrl-"+e),n.metaKey&&(e="Meta-"+e),r!==!1&&n.shiftKey&&(e="Shift-"+e),e}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(e,n){return runHandlers(getKeymap(n.state),e,n,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(e){let n=e.facet(keymap),r=Keymaps.get(n);return r||Keymaps.set(n,r=buildKeymap(n.reduce((g,y)=>g.concat(y),[]))),r}function runScopeHandlers(e,n,r){return runHandlers(getKeymap(e.state),n,e,r)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(e,n=currentPlatform){let r=Object.create(null),g=Object.create(null),y=($,V)=>{let L=g[$];if(L==null)g[$]=V;else if(L!=V)throw new Error("Key binding "+$+" is used both as a regular binding and as a multi-stroke prefix")},k=($,V,L,z,j)=>{var ae,oe;let re=r[$]||(r[$]=Object.create(null)),ue=V.split(/ (?!$)/).map(he=>normalizeKeyName(he,n));for(let he=1;he<ue.length;he++){let _e=ue.slice(0,he).join(" ");y(_e,!0),re[_e]||(re[_e]={preventDefault:!0,stopPropagation:!1,run:[xe=>{let Ne=storedPrefix={view:xe,prefix:_e,scope:$};return setTimeout(()=>{storedPrefix==Ne&&(storedPrefix=null)},PrefixTimeout),!0}]})}let le=ue.join(" ");y(le,!1);let de=re[le]||(re[le]={preventDefault:!1,stopPropagation:!1,run:((oe=(ae=re._any)===null||ae===void 0?void 0:ae.run)===null||oe===void 0?void 0:oe.slice())||[]});L&&de.run.push(L),z&&(de.preventDefault=!0),j&&(de.stopPropagation=!0)};for(let $ of e){let V=$.scope?$.scope.split(" "):["editor"];if($.any)for(let z of V){let j=r[z]||(r[z]=Object.create(null));j._any||(j._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:ae}=$;for(let oe in j)j[oe].run.push(re=>ae(re,currentKeyEvent))}let L=$[n]||$.key;if(L)for(let z of V)k(z,L,$.run,$.preventDefault,$.stopPropagation),$.shift&&k(z,"Shift-"+L,$.shift,$.preventDefault,$.stopPropagation)}return r}let currentKeyEvent=null;function runHandlers(e,n,r,g){currentKeyEvent=n;let y=keyName(n),k=codePointAt$1(y,0),$=codePointSize(k)==y.length&&y!=" ",V="",L=!1,z=!1,j=!1;storedPrefix&&storedPrefix.view==r&&storedPrefix.scope==g&&(V=storedPrefix.prefix+" ",modifierCodes.indexOf(n.keyCode)<0&&(z=!0,storedPrefix=null));let ae=new Set,oe=de=>{if(de){for(let he of de.run)if(!ae.has(he)&&(ae.add(he),he(r)))return de.stopPropagation&&(j=!0),!0;de.preventDefault&&(de.stopPropagation&&(j=!0),z=!0)}return!1},re=e[g],ue,le;return re&&(oe(re[V+modifiers(y,n,!$)])?L=!0:$&&(n.altKey||n.metaKey||n.ctrlKey)&&!(browser.windows&&n.ctrlKey&&n.altKey)&&(ue=base[n.keyCode])&&ue!=y?(oe(re[V+modifiers(ue,n,!0)])||n.shiftKey&&(le=shift[n.keyCode])!=y&&le!=ue&&oe(re[V+modifiers(le,n,!1)]))&&(L=!0):$&&n.shiftKey&&oe(re[V+modifiers(y,n,!0)])&&(L=!0),!L&&oe(re._any)&&(L=!0)),z&&(L=!0),L&&j&&n.stopPropagation(),currentKeyEvent=null,L}class RectangleMarker{constructor(n,r,g,y,k){this.className=n,this.left=r,this.top=g,this.width=y,this.height=k}draw(){let n=document.createElement("div");return n.className=this.className,this.adjust(n),n}update(n,r){return r.className!=this.className?!1:(this.adjust(n),!0)}adjust(n){n.style.left=this.left+"px",n.style.top=this.top+"px",this.width!=null&&(n.style.width=this.width+"px"),n.style.height=this.height+"px"}eq(n){return this.left==n.left&&this.top==n.top&&this.width==n.width&&this.height==n.height&&this.className==n.className}static forRange(n,r,g){if(g.empty){let y=n.coordsAtPos(g.head,g.assoc||1);if(!y)return[];let k=getBase(n);return[new RectangleMarker(r,y.left-k.left,y.top-k.top,null,y.bottom-y.top)]}else return rectanglesForRange(n,r,g)}}function getBase(e){let n=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==Direction.LTR?n.left:n.right-e.scrollDOM.clientWidth*e.scaleX)-e.scrollDOM.scrollLeft*e.scaleX,top:n.top-e.scrollDOM.scrollTop*e.scaleY}}function wrappedLine(e,n,r,g){let y=e.coordsAtPos(n,r*2);if(!y)return g;let k=e.dom.getBoundingClientRect(),$=(y.top+y.bottom)/2,V=e.posAtCoords({x:k.left+1,y:$}),L=e.posAtCoords({x:k.right-1,y:$});return V==null||L==null?g:{from:Math.max(g.from,Math.min(V,L)),to:Math.min(g.to,Math.max(V,L))}}function rectanglesForRange(e,n,r){if(r.to<=e.viewport.from||r.from>=e.viewport.to)return[];let g=Math.max(r.from,e.viewport.from),y=Math.min(r.to,e.viewport.to),k=e.textDirection==Direction.LTR,$=e.contentDOM,V=$.getBoundingClientRect(),L=getBase(e),z=$.querySelector(".cm-line"),j=z&&window.getComputedStyle(z),ae=V.left+(j?parseInt(j.paddingLeft)+Math.min(0,parseInt(j.textIndent)):0),oe=V.right-(j?parseInt(j.paddingRight):0),re=blockAt(e,g),ue=blockAt(e,y),le=re.type==BlockType.Text?re:null,de=ue.type==BlockType.Text?ue:null;if(le&&(e.lineWrapping||re.widgetLineBreaks)&&(le=wrappedLine(e,g,1,le)),de&&(e.lineWrapping||ue.widgetLineBreaks)&&(de=wrappedLine(e,y,-1,de)),le&&de&&le.from==de.from&&le.to==de.to)return _e(xe(r.from,r.to,le));{let $e=le?xe(r.from,null,le):Ne(re,!1),Ce=de?xe(null,r.to,de):Ne(ue,!0),Ie=[];return(le||re).to<(de||ue).from-(le&&de?1:0)||re.widgetLineBreaks>1&&$e.bottom+e.defaultLineHeight/2<Ce.top?Ie.push(he(ae,$e.bottom,oe,Ce.top)):$e.bottom<Ce.top&&e.elementAtHeight(($e.bottom+Ce.top)/2).type==BlockType.Text&&($e.bottom=Ce.top=($e.bottom+Ce.top)/2),_e($e).concat(Ie).concat(_e(Ce))}function he($e,Ce,Ie,ze){return new RectangleMarker(n,$e-L.left,Ce-L.top,Ie-$e,ze-Ce)}function _e({top:$e,bottom:Ce,horizontal:Ie}){let ze=[];for(let Ue=0;Ue<Ie.length;Ue+=2)ze.push(he(Ie[Ue],$e,Ie[Ue+1],Ce));return ze}function xe($e,Ce,Ie){let ze=1e9,Ue=-1e9,Pt=[];function hn(jt,Vn,Rn,Tn,Ln){let Sn=e.coordsAtPos(jt,jt==Ie.to?-2:2),An=e.coordsAtPos(Rn,Rn==Ie.from?2:-2);!Sn||!An||(ze=Math.min(Sn.top,An.top,ze),Ue=Math.max(Sn.bottom,An.bottom,Ue),Ln==Direction.LTR?Pt.push(k&&Vn?ae:Sn.left,k&&Tn?oe:An.right):Pt.push(!k&&Tn?ae:An.left,!k&&Vn?oe:Sn.right))}let Dt=$e??Ie.from,xn=Ce??Ie.to;for(let jt of e.visibleRanges)if(jt.to>Dt&&jt.from<xn)for(let Vn=Math.max(jt.from,Dt),Rn=Math.min(jt.to,xn);;){let Tn=e.state.doc.lineAt(Vn);for(let Ln of e.bidiSpans(Tn)){let Sn=Ln.from+Tn.from,An=Ln.to+Tn.from;if(Sn>=Rn)break;An>Vn&&hn(Math.max(Sn,Vn),$e==null&&Sn<=Dt,Math.min(An,Rn),Ce==null&&An>=xn,Ln.dir)}if(Vn=Tn.to+1,Vn>=Rn)break}return Pt.length==0&&hn(Dt,$e==null,xn,Ce==null,e.textDirection),{top:ze,bottom:Ue,horizontal:Pt}}function Ne($e,Ce){let Ie=V.top+(Ce?$e.top:$e.bottom);return{top:Ie,bottom:Ie,horizontal:[]}}}function sameMarker(e,n){return e.constructor==n.constructor&&e.eq(n)}class LayerView{constructor(n,r){this.view=n,this.layer=r,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=n.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),r.above&&this.dom.classList.add("cm-layer-above"),r.class&&this.dom.classList.add(r.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(n.state),n.requestMeasure(this.measureReq),r.mount&&r.mount(this.dom,n)}update(n){n.startState.facet(layerOrder)!=n.state.facet(layerOrder)&&this.setOrder(n.state),(this.layer.update(n,this.dom)||n.geometryChanged)&&(this.scale(),n.view.requestMeasure(this.measureReq))}docViewUpdate(n){this.layer.updateOnDocViewUpdate!==!1&&n.requestMeasure(this.measureReq)}setOrder(n){let r=0,g=n.facet(layerOrder);for(;r<g.length&&g[r]!=this.layer;)r++;this.dom.style.zIndex=String((this.layer.above?150:-1)-r)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:n,scaleY:r}=this.view;(n!=this.scaleX||r!=this.scaleY)&&(this.scaleX=n,this.scaleY=r,this.dom.style.transform=`scale(${1/n}, ${1/r})`)}draw(n){if(n.length!=this.drawn.length||n.some((r,g)=>!sameMarker(r,this.drawn[g]))){let r=this.dom.firstChild,g=0;for(let y of n)y.update&&r&&y.constructor&&this.drawn[g].constructor&&y.update(r,this.drawn[g])?(r=r.nextSibling,g++):this.dom.insertBefore(y.draw(),r);for(;r;){let y=r.nextSibling;r.remove(),r=y}this.drawn=n}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(e){return[ViewPlugin.define(n=>new LayerView(n,e)),layerOrder.of(e)]}const CanHidePrimary=!(browser.ios&&browser.webkit&&browser.webkit_version<534),selectionConfig=Facet.define({combine(e){return combineConfig(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(n,r)=>Math.min(n,r),drawRangeCursor:(n,r)=>n||r})}});function drawSelection(e={}){return[selectionConfig.of(e),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(e){return e.startState.facet(selectionConfig)!=e.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(e){let{state:n}=e,r=n.facet(selectionConfig),g=[];for(let y of n.selection.ranges){let k=y==n.selection.main;if(y.empty?!k||CanHidePrimary:r.drawRangeCursor){let $=k?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",V=y.empty?y:EditorSelection.cursor(y.head,y.head>y.anchor?-1:1);for(let L of RectangleMarker.forRange(e,$,V))g.push(L)}}return g},update(e,n){e.transactions.some(g=>g.selection)&&(n.style.animationName=n.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let r=configChanged(e);return r&&setBlinkRate(e.state,n),e.docChanged||e.selectionSet||r},mount(e,n){setBlinkRate(n.state,e)},class:"cm-cursorLayer"});function setBlinkRate(e,n){n.style.animationDuration=e.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(e){return e.state.selection.ranges.map(n=>n.empty?[]:RectangleMarker.forRange(e,"cm-selectionBackground",n)).reduce((n,r)=>n.concat(r))},update(e,n){return e.docChanged||e.selectionSet||e.viewportChanged||configChanged(e)},class:"cm-selectionLayer"}),themeSpec={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};CanHidePrimary&&(themeSpec[".cm-line"].caretColor=themeSpec[".cm-content"].caretColor="transparent !important");const hideNativeSelection=Prec.highest(EditorView.theme(themeSpec)),setDropCursorPos=StateEffect.define({map(e,n){return e==null?null:n.mapPos(e)}}),dropCursorPos=StateField.define({create(){return null},update(e,n){return e!=null&&(e=n.changes.mapPos(e)),n.effects.reduce((r,g)=>g.is(setDropCursorPos)?g.value:r,e)}}),drawDropCursor=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var n;let r=e.state.field(dropCursorPos);r==null?this.cursor!=null&&((n=this.cursor)===null||n===void 0||n.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(dropCursorPos)!=r||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:e}=this,n=e.state.field(dropCursorPos),r=n!=null&&e.coordsAtPos(n);if(!r)return null;let g=e.scrollDOM.getBoundingClientRect();return{left:r.left-g.left+e.scrollDOM.scrollLeft*e.scaleX,top:r.top-g.top+e.scrollDOM.scrollTop*e.scaleY,height:r.bottom-r.top}}drawCursor(e){if(this.cursor){let{scaleX:n,scaleY:r}=this.view;e?(this.cursor.style.left=e.left/n+"px",this.cursor.style.top=e.top/r+"px",this.cursor.style.height=e.height/r+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(dropCursorPos)!=e&&this.view.dispatch({effects:setDropCursorPos.of(e)})}},{eventObservers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){(e.target==this.view.contentDOM||!this.view.contentDOM.contains(e.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches(e,n,r,g,y){n.lastIndex=0;for(let k=e.iterRange(r,g),$=r,V;!k.next().done;$+=k.value.length)if(!k.lineBreak)for(;V=n.exec(k.value);)y($+V.index,V)}function matchRanges(e,n){let r=e.visibleRanges;if(r.length==1&&r[0].from==e.viewport.from&&r[0].to==e.viewport.to)return r;let g=[];for(let{from:y,to:k}of r)y=Math.max(e.state.doc.lineAt(y).from,y-n),k=Math.min(e.state.doc.lineAt(k).to,k+n),g.length&&g[g.length-1].to>=y?g[g.length-1].to=k:g.push({from:y,to:k});return g}class MatchDecorator{constructor(n){const{regexp:r,decoration:g,decorate:y,boundary:k,maxLength:$=1e3}=n;if(!r.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=r,y)this.addMatch=(V,L,z,j)=>y(j,z,z+V[0].length,V,L);else if(typeof g=="function")this.addMatch=(V,L,z,j)=>{let ae=g(V,L,z);ae&&j(z,z+V[0].length,ae)};else if(g)this.addMatch=(V,L,z,j)=>j(z,z+V[0].length,g);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=k,this.maxLength=$}createDeco(n){let r=new RangeSetBuilder,g=r.add.bind(r);for(let{from:y,to:k}of matchRanges(n,this.maxLength))iterMatches(n.state.doc,this.regexp,y,k,($,V)=>this.addMatch(V,n,$,g));return r.finish()}updateDeco(n,r){let g=1e9,y=-1;return n.docChanged&&n.changes.iterChanges((k,$,V,L)=>{L>=n.view.viewport.from&&V<=n.view.viewport.to&&(g=Math.min(V,g),y=Math.max(L,y))}),n.viewportMoved||y-g>1e3?this.createDeco(n.view):y>-1?this.updateRange(n.view,r.map(n.changes),g,y):r}updateRange(n,r,g,y){for(let k of n.visibleRanges){let $=Math.max(k.from,g),V=Math.min(k.to,y);if(V>$){let L=n.state.doc.lineAt($),z=L.to<V?n.state.doc.lineAt(V):L,j=Math.max(k.from,L.from),ae=Math.min(k.to,z.to);if(this.boundary){for(;$>L.from;$--)if(this.boundary.test(L.text[$-1-L.from])){j=$;break}for(;V<z.to;V++)if(this.boundary.test(z.text[V-z.from])){ae=V;break}}let oe=[],re,ue=(le,de,he)=>oe.push(he.range(le,de));if(L==z)for(this.regexp.lastIndex=j-L.from;(re=this.regexp.exec(L.text))&&re.index<ae-L.from;)this.addMatch(re,n,re.index+L.from,ue);else iterMatches(n.state.doc,this.regexp,j,ae,(le,de)=>this.addMatch(de,n,le,ue));r=r.update({filterFrom:j,filterTo:ae,filter:(le,de)=>le<j||de>ae,add:oe})}}return r}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var e;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let n=document.body.style;_supportsTabSize=((e=n.tabSize)!==null&&e!==void 0?e:n.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(e){let n=combineConfig(e,{render:null,specialChars:Specials,addSpecialChars:null});return(n.replaceTabs=!supportsTabSize())&&(n.specialChars=new RegExp("	|"+n.specialChars.source,UnicodeRegexpSupport)),n.addSpecialChars&&(n.specialChars=new RegExp(n.specialChars.source+"|"+n.addSpecialChars.source,UnicodeRegexpSupport)),n}});function highlightSpecialChars(e={}){return[specialCharConfig.of(e),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new MatchDecorator({regexp:e.specialChars,decoration:(n,r,g)=>{let{doc:y}=r.state,k=codePointAt$1(n[0],0);if(k==9){let $=y.lineAt(g),V=r.state.tabSize,L=countColumn($.text,V,g-$.from);return Decoration.replace({widget:new TabWidget((V-L%V)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[k]||(this.decorationCache[k]=Decoration.replace({widget:new SpecialCharWidget(e,k)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let n=e.state.facet(specialCharConfig);e.startState.facet(specialCharConfig)!=n?(this.decorator=this.makeDecorator(n),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))}const DefaultPlaceholder="";function placeholder$1(e){return e>=32?DefaultPlaceholder:e==10?"":String.fromCharCode(9216+e)}class SpecialCharWidget extends WidgetType{constructor(n,r){super(),this.options=n,this.code=r}eq(n){return n.code==this.code}toDOM(n){let r=placeholder$1(this.code),g=n.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),y=this.options.render&&this.options.render(this.code,g,r);if(y)return y;let k=document.createElement("span");return k.textContent=r,k.title=g,k.setAttribute("aria-label",g),k.className="cm-specialChar",k}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(n){super(),this.width=n}eq(n){return n.width==this.width}toDOM(){let n=document.createElement("span");return n.textContent="	",n.className="cm-tab",n.style.width=this.width+"px",n}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let n=-1,r=[];for(let g of e.state.selection.ranges){let y=e.lineBlockAt(g.head);y.from>n&&(r.push(lineDeco.range(y.from)),n=y.from)}return Decoration.set(r)}},{decorations:e=>e.decorations}),MaxOff=2e3;function rectangleFor(e,n,r){let g=Math.min(n.line,r.line),y=Math.max(n.line,r.line),k=[];if(n.off>MaxOff||r.off>MaxOff||n.col<0||r.col<0){let $=Math.min(n.off,r.off),V=Math.max(n.off,r.off);for(let L=g;L<=y;L++){let z=e.doc.line(L);z.length<=V&&k.push(EditorSelection.range(z.from+$,z.to+V))}}else{let $=Math.min(n.col,r.col),V=Math.max(n.col,r.col);for(let L=g;L<=y;L++){let z=e.doc.line(L),j=findColumn(z.text,$,e.tabSize,!0);if(j<0)k.push(EditorSelection.cursor(z.to));else{let ae=findColumn(z.text,V,e.tabSize);k.push(EditorSelection.range(z.from+j,z.from+ae))}}}return k}function absoluteColumn(e,n){let r=e.coordsAtPos(e.viewport.from);return r?Math.round(Math.abs((r.left-n)/e.defaultCharacterWidth)):-1}function getPos(e,n){let r=e.posAtCoords({x:n.clientX,y:n.clientY},!1),g=e.state.doc.lineAt(r),y=r-g.from,k=y>MaxOff?-1:y==g.length?absoluteColumn(e,n.clientX):countColumn(g.text,e.state.tabSize,r-g.from);return{line:g.number,col:k,off:y}}function rectangleSelectionStyle(e,n){let r=getPos(e,n),g=e.state.selection;return r?{update(y){if(y.docChanged){let k=y.changes.mapPos(y.startState.doc.line(r.line).from),$=y.state.doc.lineAt(k);r={line:$.number,col:r.col,off:Math.min(r.off,$.length)},g=g.map(y.changes)}},get(y,k,$){let V=getPos(e,y);if(!V)return g;let L=rectangleFor(e.state,r,V);return L.length?$?EditorSelection.create(L.concat(g.ranges)):EditorSelection.create(L):g}}:null}function rectangularSelection(e){let n=e?.eventFilter||(r=>r.altKey&&r.button==0);return EditorView.mouseSelectionStyle.of((r,g)=>n(g)?rectangleSelectionStyle(r,g):null)}const keys={Alt:[18,e=>!!e.altKey],Control:[17,e=>!!e.ctrlKey],Shift:[16,e=>!!e.shiftKey],Meta:[91,e=>!!e.metaKey]},showCrosshair={style:"cursor: crosshair"};function crosshairCursor(e={}){let[n,r]=keys[e.key||"Alt"],g=ViewPlugin.fromClass(class{constructor(y){this.view=y,this.isDown=!1}set(y){this.isDown!=y&&(this.isDown=y,this.view.update([]))}},{eventObservers:{keydown(y){this.set(y.keyCode==n||r(y))},keyup(y){(y.keyCode==n||!r(y))&&this.set(!1)},mousemove(y){this.set(r(y))}}});return[g,EditorView.contentAttributes.of(y=>{var k;return!((k=y.plugin(g))===null||k===void 0)&&k.isDown?showCrosshair:null})]}const Outside="-10000px";class TooltipViewManager{constructor(n,r,g,y){this.facet=r,this.createTooltipView=g,this.removeTooltipView=y,this.input=n.state.facet(r),this.tooltips=this.input.filter($=>$);let k=null;this.tooltipViews=this.tooltips.map($=>k=g($,k))}update(n,r){var g;let y=n.state.facet(this.facet),k=y.filter(L=>L);if(y===this.input){for(let L of this.tooltipViews)L.update&&L.update(n);return!1}let $=[],V=r?[]:null;for(let L=0;L<k.length;L++){let z=k[L],j=-1;if(z){for(let ae=0;ae<this.tooltips.length;ae++){let oe=this.tooltips[ae];oe&&oe.create==z.create&&(j=ae)}if(j<0)$[L]=this.createTooltipView(z,L?$[L-1]:null),V&&(V[L]=!!z.above);else{let ae=$[L]=this.tooltipViews[j];V&&(V[L]=r[j]),ae.update&&ae.update(n)}}}for(let L of this.tooltipViews)$.indexOf(L)<0&&(this.removeTooltipView(L),(g=L.destroy)===null||g===void 0||g.call(L));return r&&(V.forEach((L,z)=>r[z]=L),r.length=V.length),this.input=y,this.tooltips=k,this.tooltipViews=$,!0}}function windowSpace(e){let{win:n}=e;return{top:0,left:0,bottom:n.innerHeight,right:n.innerWidth}}const tooltipConfig=Facet.define({combine:e=>{var n,r,g;return{position:browser.ios?"absolute":((n=e.find(y=>y.position))===null||n===void 0?void 0:n.position)||"fixed",parent:((r=e.find(y=>y.parent))===null||r===void 0?void 0:r.parent)||null,tooltipSpace:((g=e.find(y=>y.tooltipSpace))===null||g===void 0?void 0:g.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let n=e.state.facet(tooltipConfig);this.position=n.position,this.parent=n.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new TooltipViewManager(e,showTooltip,(r,g)=>this.createTooltip(r,g),r=>{this.resizeObserver&&this.resizeObserver.unobserve(r.dom),r.dom.remove()}),this.above=this.manager.tooltips.map(r=>!!r.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(r=>{Date.now()>this.lastTransaction-50&&r.length>0&&r[r.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let n=this.manager.update(e,this.above);n&&this.observeIntersection();let r=n||e.geometryChanged,g=e.state.facet(tooltipConfig);if(g.position!=this.position&&!this.madeAbsolute){this.position=g.position;for(let y of this.manager.tooltipViews)y.dom.style.position=this.position;r=!0}if(g.parent!=this.parent){this.parent&&this.container.remove(),this.parent=g.parent,this.createContainer();for(let y of this.manager.tooltipViews)this.container.appendChild(y.dom);r=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);r&&this.maybeMeasure()}createTooltip(e,n){let r=e.create(this.view),g=n?n.dom:null;if(r.dom.classList.add("cm-tooltip"),e.arrow&&!r.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let y=document.createElement("div");y.className="cm-tooltip-arrow",r.dom.appendChild(y)}return r.dom.style.position=this.position,r.dom.style.top=Outside,r.dom.style.left="0px",this.container.insertBefore(r.dom,g),r.mount&&r.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(r.dom),r}destroy(){var e,n,r;this.view.win.removeEventListener("resize",this.measureSoon);for(let g of this.manager.tooltipViews)g.dom.remove(),(e=g.destroy)===null||e===void 0||e.call(g);this.parent&&this.container.remove(),(n=this.resizeObserver)===null||n===void 0||n.disconnect(),(r=this.intersectionObserver)===null||r===void 0||r.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=1,n=1,r=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:k}=this.manager.tooltipViews[0];if(browser.gecko)r=k.offsetParent!=this.container.ownerDocument.body;else if(k.style.top==Outside&&k.style.left=="0px"){let $=k.getBoundingClientRect();r=Math.abs($.top+1e4)>1||Math.abs($.left)>1}}if(r||this.position=="absolute")if(this.parent){let k=this.parent.getBoundingClientRect();k.width&&k.height&&(e=k.width/this.parent.offsetWidth,n=k.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:n}=this.view.viewState);let g=this.view.scrollDOM.getBoundingClientRect(),y=getScrollMargins(this.view);return{visible:{left:g.left+y.left,top:g.top+y.top,right:g.right-y.right,bottom:g.bottom-y.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((k,$)=>{let V=this.manager.tooltipViews[$];return V.getCoords?V.getCoords(k.pos):this.view.coordsAtPos(k.pos)}),size:this.manager.tooltipViews.map(({dom:k})=>k.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view),scaleX:e,scaleY:n,makeAbsolute:r}}writeMeasure(e){var n;if(e.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let V of this.manager.tooltipViews)V.dom.style.position="absolute"}let{visible:r,space:g,scaleX:y,scaleY:k}=e,$=[];for(let V=0;V<this.manager.tooltips.length;V++){let L=this.manager.tooltips[V],z=this.manager.tooltipViews[V],{dom:j}=z,ae=e.pos[V],oe=e.size[V];if(!ae||L.clip!==!1&&(ae.bottom<=Math.max(r.top,g.top)||ae.top>=Math.min(r.bottom,g.bottom)||ae.right<Math.max(r.left,g.left)-.1||ae.left>Math.min(r.right,g.right)+.1)){j.style.top=Outside;continue}let re=L.arrow?z.dom.querySelector(".cm-tooltip-arrow"):null,ue=re?7:0,le=oe.right-oe.left,de=(n=knownHeight.get(z))!==null&&n!==void 0?n:oe.bottom-oe.top,he=z.offset||noOffset,_e=this.view.textDirection==Direction.LTR,xe=oe.width>g.right-g.left?_e?g.left:g.right-oe.width:_e?Math.max(g.left,Math.min(ae.left-(re?14:0)+he.x,g.right-le)):Math.min(Math.max(g.left,ae.left-le+(re?14:0)-he.x),g.right-le),Ne=this.above[V];!L.strictSide&&(Ne?ae.top-de-ue-he.y<g.top:ae.bottom+de+ue+he.y>g.bottom)&&Ne==g.bottom-ae.bottom>ae.top-g.top&&(Ne=this.above[V]=!Ne);let $e=(Ne?ae.top-g.top:g.bottom-ae.bottom)-ue;if($e<de&&z.resize!==!1){if($e<this.view.defaultLineHeight){j.style.top=Outside;continue}knownHeight.set(z,de),j.style.height=(de=$e)/k+"px"}else j.style.height&&(j.style.height="");let Ce=Ne?ae.top-de-ue-he.y:ae.bottom+ue+he.y,Ie=xe+le;if(z.overlap!==!0)for(let ze of $)ze.left<Ie&&ze.right>xe&&ze.top<Ce+de&&ze.bottom>Ce&&(Ce=Ne?ze.top-de-2-ue:ze.bottom+ue+2);if(this.position=="absolute"?(j.style.top=(Ce-e.parent.top)/k+"px",setLeftStyle(j,(xe-e.parent.left)/y)):(j.style.top=Ce/k+"px",setLeftStyle(j,xe/y)),re){let ze=ae.left+(_e?he.x:-he.x)-(xe+14-7);re.style.left=ze/y+"px"}z.overlap!==!0&&$.push({left:xe,top:Ce,right:Ie,bottom:Ce+de}),j.classList.toggle("cm-tooltip-above",Ne),j.classList.toggle("cm-tooltip-below",!Ne),z.positioned&&z.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=Outside}},{eventObservers:{scroll(){this.maybeMeasure()}}});function setLeftStyle(e,n){let r=parseInt(e.style.left,10);(isNaN(r)||Math.abs(n-r)>1)&&(e.style.left=n+"px")}const baseTheme$4=EditorView.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$4]}),showHoverTooltip=Facet.define({combine:e=>e.reduce((n,r)=>n.concat(r),[])});class HoverTooltipHost{static create(n){return new HoverTooltipHost(n)}constructor(n){this.view=n,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(n,showHoverTooltip,(r,g)=>this.createHostedView(r,g),r=>r.dom.remove())}createHostedView(n,r){let g=n.create(this.view);return g.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(g.dom,r?r.dom.nextSibling:this.dom.firstChild),this.mounted&&g.mount&&g.mount(this.view),g}mount(n){for(let r of this.manager.tooltipViews)r.mount&&r.mount(n);this.mounted=!0}positioned(n){for(let r of this.manager.tooltipViews)r.positioned&&r.positioned(n)}update(n){this.manager.update(n)}destroy(){var n;for(let r of this.manager.tooltipViews)(n=r.destroy)===null||n===void 0||n.call(r)}passProp(n){let r;for(let g of this.manager.tooltipViews){let y=g[n];if(y!==void 0){if(r===void 0)r=y;else if(r!==y)return}}return r}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],e=>{let n=e.facet(showHoverTooltip);return n.length===0?null:{pos:Math.min(...n.map(r=>r.pos)),end:Math.max(...n.map(r=>{var g;return(g=r.end)!==null&&g!==void 0?g:r.pos})),create:HoverTooltipHost.create,above:n[0].above,arrow:n.some(r=>r.arrow)}});class HoverPlugin{constructor(n,r,g,y,k){this.view=n,this.source=r,this.field=g,this.setHover=y,this.hoverTime=k,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:n.dom,time:0},this.checkHover=this.checkHover.bind(this),n.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),n.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let n=Date.now()-this.lastMove.time;n<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-n):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:n,lastMove:r}=this,g=n.docView.nearest(r.target);if(!g)return;let y,k=1;if(g instanceof WidgetView)y=g.posAtStart;else{if(y=n.posAtCoords(r),y==null)return;let V=n.coordsAtPos(y);if(!V||r.y<V.top||r.y>V.bottom||r.x<V.left-n.defaultCharacterWidth||r.x>V.right+n.defaultCharacterWidth)return;let L=n.bidiSpans(n.state.doc.lineAt(y)).find(j=>j.from<=y&&j.to>=y),z=L&&L.dir==Direction.RTL?-1:1;k=r.x<V.left?-z:z}let $=this.source(n,y,k);if($?.then){let V=this.pending={pos:y};$.then(L=>{this.pending==V&&(this.pending=null,L&&!(Array.isArray(L)&&!L.length)&&n.dispatch({effects:this.setHover.of(Array.isArray(L)?L:[L])}))},L=>logException(n.state,L,"hover tooltip"))}else $&&!(Array.isArray($)&&!$.length)&&n.dispatch({effects:this.setHover.of(Array.isArray($)?$:[$])})}get tooltip(){let n=this.view.plugin(tooltipPlugin),r=n?n.manager.tooltips.findIndex(g=>g.create==HoverTooltipHost.create):-1;return r>-1?n.manager.tooltipViews[r]:null}mousemove(n){var r,g;this.lastMove={x:n.clientX,y:n.clientY,target:n.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:y,tooltip:k}=this;if(y.length&&k&&!isInTooltip(k.dom,n)||this.pending){let{pos:$}=y[0]||this.pending,V=(g=(r=y[0])===null||r===void 0?void 0:r.end)!==null&&g!==void 0?g:$;($==V?this.view.posAtCoords(this.lastMove)!=$:!isOverRange(this.view,$,V,n.clientX,n.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(n){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:r}=this;if(r.length){let{tooltip:g}=this;g&&g.dom.contains(n.relatedTarget)?this.watchTooltipLeave(g.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(n){let r=g=>{n.removeEventListener("mouseleave",r),this.active.length&&!this.view.dom.contains(g.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};n.addEventListener("mouseleave",r)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const tooltipMargin=4;function isInTooltip(e,n){let{left:r,right:g,top:y,bottom:k}=e.getBoundingClientRect(),$;if($=e.querySelector(".cm-tooltip-arrow")){let V=$.getBoundingClientRect();y=Math.min(V.top,y),k=Math.max(V.bottom,k)}return n.clientX>=r-tooltipMargin&&n.clientX<=g+tooltipMargin&&n.clientY>=y-tooltipMargin&&n.clientY<=k+tooltipMargin}function isOverRange(e,n,r,g,y,k){let $=e.scrollDOM.getBoundingClientRect(),V=e.documentTop+e.documentPadding.top+e.contentHeight;if($.left>g||$.right<g||$.top>y||Math.min($.bottom,V)<y)return!1;let L=e.posAtCoords({x:g,y},!1);return L>=n&&L<=r}function hoverTooltip(e,n={}){let r=StateEffect.define(),g=StateField.define({create(){return[]},update(y,k){if(y.length&&(n.hideOnChange&&(k.docChanged||k.selection)?y=[]:n.hideOn&&(y=y.filter($=>!n.hideOn(k,$))),k.docChanged)){let $=[];for(let V of y){let L=k.changes.mapPos(V.pos,-1,MapMode.TrackDel);if(L!=null){let z=Object.assign(Object.create(null),V);z.pos=L,z.end!=null&&(z.end=k.changes.mapPos(z.end)),$.push(z)}}y=$}for(let $ of k.effects)$.is(r)&&(y=$.value),$.is(closeHoverTooltipEffect)&&(y=[]);return y},provide:y=>showHoverTooltip.from(y)});return{active:g,extension:[g,ViewPlugin.define(y=>new HoverPlugin(y,e,g,r,n.hoverTime||300)),showHoverTooltipHost]}}function getTooltip(e,n){let r=e.plugin(tooltipPlugin);if(!r)return null;let g=r.manager.tooltips.indexOf(n);return g<0?null:r.manager.tooltipViews[g]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(e){let n,r;for(let g of e)n=n||g.topContainer,r=r||g.bottomContainer;return{topContainer:n,bottomContainer:r}}});function getPanel(e,n){let r=e.plugin(panelPlugin),g=r?r.specs.indexOf(n):-1;return g>-1?r.panels[g]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(e){this.input=e.state.facet(showPanel),this.specs=this.input.filter(r=>r),this.panels=this.specs.map(r=>r(e));let n=e.state.facet(panelConfig);this.top=new PanelGroup(e,!0,n.topContainer),this.bottom=new PanelGroup(e,!1,n.bottomContainer),this.top.sync(this.panels.filter(r=>r.top)),this.bottom.sync(this.panels.filter(r=>!r.top));for(let r of this.panels)r.dom.classList.add("cm-panel"),r.mount&&r.mount()}update(e){let n=e.state.facet(panelConfig);this.top.container!=n.topContainer&&(this.top.sync([]),this.top=new PanelGroup(e.view,!0,n.topContainer)),this.bottom.container!=n.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(e.view,!1,n.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let r=e.state.facet(showPanel);if(r!=this.input){let g=r.filter(L=>L),y=[],k=[],$=[],V=[];for(let L of g){let z=this.specs.indexOf(L),j;z<0?(j=L(e.view),V.push(j)):(j=this.panels[z],j.update&&j.update(e)),y.push(j),(j.top?k:$).push(j)}this.specs=g,this.panels=y,this.top.sync(k),this.bottom.sync($);for(let L of V)L.dom.classList.add("cm-panel"),L.mount&&L.mount()}else for(let g of this.panels)g.update&&g.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>EditorView.scrollMargins.of(n=>{let r=n.plugin(e);return r&&{top:r.top.scrollMargin(),bottom:r.bottom.scrollMargin()}})});class PanelGroup{constructor(n,r,g){this.view=n,this.top=r,this.container=g,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(n){for(let r of this.panels)r.destroy&&n.indexOf(r)<0&&r.destroy();this.panels=n,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let r=this.container||this.view.dom;r.insertBefore(this.dom,this.top?r.firstChild:null)}let n=this.dom.firstChild;for(let r of this.panels)if(r.dom.parentNode==this.dom){for(;n!=r.dom;)n=rm(n);n=n.nextSibling}else this.dom.insertBefore(r.dom,n);for(;n;)n=rm(n)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let n of this.classes.split(" "))n&&this.container.classList.remove(n);for(let n of(this.classes=this.view.themeClasses).split(" "))n&&this.container.classList.add(n)}}}function rm(e){let n=e.nextSibling;return e.remove(),n}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(n){return this==n||this.constructor==n.constructor&&this.eq(n)}eq(n){return!1}destroy(n){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),gutterWidgetClass=Facet.define(),defaults$1={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>RangeSet.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},activeGutters=Facet.define();function gutter(e){return[gutters(),activeGutters.of(Object.assign(Object.assign({},defaults$1),e))]}const unfixGutters=Facet.define({combine:e=>e.some(n=>n)});function gutters(e){let n=[gutterView];return e&&e.fixed===!1&&n.push(unfixGutters.of(!0)),n}const gutterView=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(activeGutters).map(n=>new SingleGutterView(e,n));for(let n of this.gutters)this.dom.appendChild(n.dom);this.fixed=!e.state.facet(unfixGutters),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let n=this.prevViewport,r=e.view.viewport,g=Math.min(n.to,r.to)-Math.max(n.from,r.from);this.syncGutters(g<(r.to-r.from)*.8)}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let n=this.dom.nextSibling;e&&this.dom.remove();let r=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),g=[],y=this.gutters.map(k=>new UpdateContext(k,this.view.viewport,-this.view.documentPadding.top));for(let k of this.view.viewportLineBlocks)if(g.length&&(g=[]),Array.isArray(k.type)){let $=!0;for(let V of k.type)if(V.type==BlockType.Text&&$){advanceCursor(r,g,V.from);for(let L of y)L.line(this.view,V,g);$=!1}else if(V.widget)for(let L of y)L.widget(this.view,V)}else if(k.type==BlockType.Text){advanceCursor(r,g,k.from);for(let $ of y)$.line(this.view,k,g)}else if(k.widget)for(let $ of y)$.widget(this.view,k);for(let k of y)k.finish();e&&this.view.scrollDOM.insertBefore(this.dom,n)}updateGutters(e){let n=e.startState.facet(activeGutters),r=e.state.facet(activeGutters),g=e.docChanged||e.heightChanged||e.viewportChanged||!RangeSet.eq(e.startState.facet(gutterLineClass),e.state.facet(gutterLineClass),e.view.viewport.from,e.view.viewport.to);if(n==r)for(let y of this.gutters)y.update(e)&&(g=!0);else{g=!0;let y=[];for(let k of r){let $=n.indexOf(k);$<0?y.push(new SingleGutterView(this.view,k)):(this.gutters[$].update(e),y.push(this.gutters[$]))}for(let k of this.gutters)k.dom.remove(),y.indexOf(k)<0&&k.destroy();for(let k of y)this.dom.appendChild(k.dom);this.gutters=y}return g}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>EditorView.scrollMargins.of(n=>{let r=n.plugin(e);return!r||r.gutters.length==0||!r.fixed?null:n.textDirection==Direction.LTR?{left:r.dom.offsetWidth*n.scaleX}:{right:r.dom.offsetWidth*n.scaleX}})});function asArray(e){return Array.isArray(e)?e:[e]}function advanceCursor(e,n,r){for(;e.value&&e.from<=r;)e.from==r&&n.push(e.value),e.next()}class UpdateContext{constructor(n,r,g){this.gutter=n,this.height=g,this.i=0,this.cursor=RangeSet.iter(n.markers,r.from)}addElement(n,r,g){let{gutter:y}=this,k=(r.top-this.height)/n.scaleY,$=r.height/n.scaleY;if(this.i==y.elements.length){let V=new GutterElement(n,$,k,g);y.elements.push(V),y.dom.appendChild(V.dom)}else y.elements[this.i].update(n,$,k,g);this.height=r.bottom,this.i++}line(n,r,g){let y=[];advanceCursor(this.cursor,y,r.from),g.length&&(y=y.concat(g));let k=this.gutter.config.lineMarker(n,r,y);k&&y.unshift(k);let $=this.gutter;y.length==0&&!$.config.renderEmptyElements||this.addElement(n,r,y)}widget(n,r){let g=this.gutter.config.widgetMarker(n,r.widget,r),y=g?[g]:null;for(let k of n.state.facet(gutterWidgetClass)){let $=k(n,r.widget,r);$&&(y||(y=[])).push($)}y&&this.addElement(n,r,y)}finish(){let n=this.gutter;for(;n.elements.length>this.i;){let r=n.elements.pop();n.dom.removeChild(r.dom),r.destroy()}}}class SingleGutterView{constructor(n,r){this.view=n,this.config=r,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let g in r.domEventHandlers)this.dom.addEventListener(g,y=>{let k=y.target,$;if(k!=this.dom&&this.dom.contains(k)){for(;k.parentNode!=this.dom;)k=k.parentNode;let L=k.getBoundingClientRect();$=(L.top+L.bottom)/2}else $=y.clientY;let V=n.lineBlockAtHeight($-n.documentTop);r.domEventHandlers[g](n,V,y)&&y.preventDefault()});this.markers=asArray(r.markers(n)),r.initialSpacer&&(this.spacer=new GutterElement(n,0,0,[r.initialSpacer(n)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(n){let r=this.markers;if(this.markers=asArray(this.config.markers(n.view)),this.spacer&&this.config.updateSpacer){let y=this.config.updateSpacer(this.spacer.markers[0],n);y!=this.spacer.markers[0]&&this.spacer.update(n.view,0,0,[y])}let g=n.view.viewport;return!RangeSet.eq(this.markers,r,g.from,g.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(n):!1)}destroy(){for(let n of this.elements)n.destroy()}}class GutterElement{constructor(n,r,g,y){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(n,r,g,y)}update(n,r,g,y){this.height!=r&&(this.height=r,this.dom.style.height=r+"px"),this.above!=g&&(this.dom.style.marginTop=(this.above=g)?g+"px":""),sameMarkers(this.markers,y)||this.setMarkers(n,y)}setMarkers(n,r){let g="cm-gutterElement",y=this.dom.firstChild;for(let k=0,$=0;;){let V=$,L=k<r.length?r[k++]:null,z=!1;if(L){let j=L.elementClass;j&&(g+=" "+j);for(let ae=$;ae<this.markers.length;ae++)if(this.markers[ae].compare(L)){V=ae,z=!0;break}}else V=this.markers.length;for(;$<V;){let j=this.markers[$++];if(j.toDOM){j.destroy(y);let ae=y.nextSibling;y.remove(),y=ae}}if(!L)break;L.toDOM&&(z?y=y.nextSibling:this.dom.insertBefore(L.toDOM(n),y)),z&&$++}this.dom.className=g,this.markers=r}destroy(){this.setMarkers(null,[])}}function sameMarkers(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].compare(n[r]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberWidgetMarker=Facet.define(),lineNumberConfig=Facet.define({combine(e){return combineConfig(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(n,r){let g=Object.assign({},n);for(let y in r){let k=g[y],$=r[y];g[y]=k?(V,L,z)=>k(V,L,z)||$(V,L,z):$}return g}})}});class NumberMarker extends GutterMarker{constructor(n){super(),this.number=n}eq(n){return this.number==n.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(e,n){return e.state.facet(lineNumberConfig).formatNumber(n,e.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(n){return n.state.facet(lineNumberMarkers)},lineMarker(n,r,g){return g.some(y=>y.toDOM)?null:new NumberMarker(formatNumber(n,n.state.doc.lineAt(r.from).number))},widgetMarker:(n,r,g)=>{for(let y of n.state.facet(lineNumberWidgetMarker)){let k=y(n,r,g);if(k)return k}return null},lineMarkerChange:n=>n.startState.facet(lineNumberConfig)!=n.state.facet(lineNumberConfig),initialSpacer(n){return new NumberMarker(formatNumber(n,maxLineNumber(n.state.doc.lines)))},updateSpacer(n,r){let g=formatNumber(r.view,maxLineNumber(r.view.state.doc.lines));return g==n.number?n:new NumberMarker(g)},domEventHandlers:e.facet(lineNumberConfig).domEventHandlers}));function lineNumbers(e={}){return[lineNumberConfig.of(e),gutters(),lineNumberGutter]}function maxLineNumber(e){let n=9;for(;n<e;)n=n*10+9;return n}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],e=>{let n=[],r=-1;for(let g of e.selection.ranges){let y=e.doc.lineAt(g.head).from;y>r&&(r=y,n.push(activeLineGutterMarker.range(y)))}return RangeSet.of(n)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}const DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(n,r){this.from=n,this.to=r}}class NodeProp{constructor(n={}){this.id=nextPropID++,this.perNode=!!n.perNode,this.deserialize=n.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(n){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof n!="function"&&(n=NodeType.match(n)),r=>{let g=n(r);return g===void 0?null:[this,g]}}}NodeProp.closedBy=new NodeProp({deserialize:e=>e.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:e=>e.split(" ")});NodeProp.group=new NodeProp({deserialize:e=>e.split(" ")});NodeProp.isolate=new NodeProp({deserialize:e=>{if(e&&e!="rtl"&&e!="ltr"&&e!="auto")throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor(n,r,g){this.tree=n,this.overlay=r,this.parser=g}static get(n){return n&&n.props&&n.props[NodeProp.mounted.id]}}const noProps=Object.create(null);class NodeType{constructor(n,r,g,y=0){this.name=n,this.props=r,this.id=g,this.flags=y}static define(n){let r=n.props&&n.props.length?Object.create(null):noProps,g=(n.top?1:0)|(n.skipped?2:0)|(n.error?4:0)|(n.name==null?8:0),y=new NodeType(n.name||"",r,n.id,g);if(n.props){for(let k of n.props)if(Array.isArray(k)||(k=k(y)),k){if(k[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");r[k[0].id]=k[1]}}return y}prop(n){return this.props[n.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(n){if(typeof n=="string"){if(this.name==n)return!0;let r=this.prop(NodeProp.group);return r?r.indexOf(n)>-1:!1}return this.id==n}static match(n){let r=Object.create(null);for(let g in n)for(let y of g.split(" "))r[y]=n[g];return g=>{for(let y=g.prop(NodeProp.group),k=-1;k<(y?y.length:0);k++){let $=r[k<0?g.name:y[k]];if($)return $}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(n){this.types=n;for(let r=0;r<n.length;r++)if(n[r].id!=r)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...n){let r=[];for(let g of this.types){let y=null;for(let k of n){let $=k(g);$&&(y||(y=Object.assign({},g.props)),y[$[0].id]=$[1])}r.push(y?new NodeType(g.name,y,g.id,g.flags):g)}return new NodeSet(r)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor(n,r,g,y,k){if(this.type=n,this.children=r,this.positions=g,this.length=y,this.props=null,k&&k.length){this.props=Object.create(null);for(let[$,V]of k)this.props[typeof $=="number"?$:$.id]=V}}toString(){let n=MountedTree.get(this);if(n&&!n.overlay)return n.tree.toString();let r="";for(let g of this.children){let y=g.toString();y&&(r&&(r+=","),r+=y)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(r.length?"("+r+")":""):r}cursor(n=0){return new TreeCursor(this.topNode,n)}cursorAt(n,r=0,g=0){let y=CachedNode.get(this)||this.topNode,k=new TreeCursor(y);return k.moveTo(n,r),CachedNode.set(this,k._tree),k}get topNode(){return new TreeNode(this,0,0,null)}resolve(n,r=0){let g=resolveNode(CachedNode.get(this)||this.topNode,n,r,!1);return CachedNode.set(this,g),g}resolveInner(n,r=0){let g=resolveNode(CachedInnerNode.get(this)||this.topNode,n,r,!0);return CachedInnerNode.set(this,g),g}resolveStack(n,r=0){return stackIterator(this,n,r)}iterate(n){let{enter:r,leave:g,from:y=0,to:k=this.length}=n,$=n.mode||0,V=($&IterMode.IncludeAnonymous)>0;for(let L=this.cursor($|IterMode.IncludeAnonymous);;){let z=!1;if(L.from<=k&&L.to>=y&&(!V&&L.type.isAnonymous||r(L)!==!1)){if(L.firstChild())continue;z=!0}for(;z&&g&&(V||!L.type.isAnonymous)&&g(L),!L.nextSibling();){if(!L.parent())return;z=!0}}}prop(n){return n.perNode?this.props?this.props[n.id]:void 0:this.type.prop(n)}get propValues(){let n=[];if(this.props)for(let r in this.props)n.push([+r,this.props[r]]);return n}balance(n={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(r,g,y)=>new Tree(this.type,r,g,y,this.propValues),n.makeTree||((r,g,y)=>new Tree(NodeType.none,r,g,y)))}static build(n){return buildTree(n)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(n,r){this.buffer=n,this.index=r}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(n,r,g){this.buffer=n,this.length=r,this.set=g}get type(){return NodeType.none}toString(){let n=[];for(let r=0;r<this.buffer.length;)n.push(this.childString(r)),r=this.buffer[r+3];return n.join(",")}childString(n){let r=this.buffer[n],g=this.buffer[n+3],y=this.set.types[r],k=y.name;if(/\W/.test(k)&&!y.isError&&(k=JSON.stringify(k)),n+=4,g==n)return k;let $=[];for(;n<g;)$.push(this.childString(n)),n=this.buffer[n+3];return k+"("+$.join(",")+")"}findChild(n,r,g,y,k){let{buffer:$}=this,V=-1;for(let L=n;L!=r&&!(checkSide(k,y,$[L+1],$[L+2])&&(V=L,g>0));L=$[L+3]);return V}slice(n,r,g){let y=this.buffer,k=new Uint16Array(r-n),$=0;for(let V=n,L=0;V<r;){k[L++]=y[V++],k[L++]=y[V++]-g;let z=k[L++]=y[V++]-g;k[L++]=y[V++]-n,$=Math.max($,z)}return new TreeBuffer(k,$,this.set)}}function checkSide(e,n,r,g){switch(e){case-2:return r<n;case-1:return g>=n&&r<n;case 0:return r<n&&g>n;case 1:return r<=n&&g>n;case 2:return g>n;case 4:return!0}}function resolveNode(e,n,r,g){for(var y;e.from==e.to||(r<1?e.from>=n:e.from>n)||(r>-1?e.to<=n:e.to<n);){let $=!g&&e instanceof TreeNode&&e.index<0?null:e.parent;if(!$)return e;e=$}let k=g?0:IterMode.IgnoreOverlays;if(g)for(let $=e,V=$.parent;V;$=V,V=$.parent)$ instanceof TreeNode&&$.index<0&&((y=V.enter(n,r,k))===null||y===void 0?void 0:y.from)!=$.from&&(e=V);for(;;){let $=e.enter(n,r,k);if(!$)return e;e=$}}class BaseNode{cursor(n=0){return new TreeCursor(this,n)}getChild(n,r=null,g=null){let y=getChildren(this,n,r,g);return y.length?y[0]:null}getChildren(n,r=null,g=null){return getChildren(this,n,r,g)}resolve(n,r=0){return resolveNode(this,n,r,!1)}resolveInner(n,r=0){return resolveNode(this,n,r,!0)}matchContext(n){return matchNodeContext(this.parent,n)}enterUnfinishedNodesBefore(n){let r=this.childBefore(n),g=this;for(;r;){let y=r.lastChild;if(!y||y.to!=r.to)break;y.type.isError&&y.from==y.to?(g=r,r=y.prevSibling):r=y}return g}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(n,r,g,y){super(),this._tree=n,this.from=r,this.index=g,this._parent=y}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(n,r,g,y,k=0){for(let $=this;;){for(let{children:V,positions:L}=$._tree,z=r>0?V.length:-1;n!=z;n+=r){let j=V[n],ae=L[n]+$.from;if(checkSide(y,g,ae,ae+j.length)){if(j instanceof TreeBuffer){if(k&IterMode.ExcludeBuffers)continue;let oe=j.findChild(0,j.buffer.length,r,g-ae,y);if(oe>-1)return new BufferNode(new BufferContext($,j,n,ae),null,oe)}else if(k&IterMode.IncludeAnonymous||!j.type.isAnonymous||hasChild(j)){let oe;if(!(k&IterMode.IgnoreMounts)&&(oe=MountedTree.get(j))&&!oe.overlay)return new TreeNode(oe.tree,ae,n,$);let re=new TreeNode(j,ae,n,$);return k&IterMode.IncludeAnonymous||!re.type.isAnonymous?re:re.nextChild(r<0?j.children.length-1:0,r,g,y)}}}if(k&IterMode.IncludeAnonymous||!$.type.isAnonymous||($.index>=0?n=$.index+r:n=r<0?-1:$._parent._tree.children.length,$=$._parent,!$))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(n){return this.nextChild(0,1,n,2)}childBefore(n){return this.nextChild(this._tree.children.length-1,-1,n,-2)}enter(n,r,g=0){let y;if(!(g&IterMode.IgnoreOverlays)&&(y=MountedTree.get(this._tree))&&y.overlay){let k=n-this.from;for(let{from:$,to:V}of y.overlay)if((r>0?$<=k:$<k)&&(r<0?V>=k:V>k))return new TreeNode(y.tree,y.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,n,r,g)}nextSignificantParent(){let n=this;for(;n.type.isAnonymous&&n._parent;)n=n._parent;return n}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(e,n,r,g){let y=e.cursor(),k=[];if(!y.firstChild())return k;if(r!=null){for(let $=!1;!$;)if($=y.type.is(r),!y.nextSibling())return k}for(;;){if(g!=null&&y.type.is(g))return k;if(y.type.is(n)&&k.push(y.node),!y.nextSibling())return g==null?k:[]}}function matchNodeContext(e,n,r=n.length-1){for(let g=e;r>=0;g=g.parent){if(!g)return!1;if(!g.type.isAnonymous){if(n[r]&&n[r]!=g.name)return!1;r--}}return!0}class BufferContext{constructor(n,r,g,y){this.parent=n,this.buffer=r,this.index=g,this.start=y}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(n,r,g){super(),this.context=n,this._parent=r,this.index=g,this.type=n.buffer.set.types[n.buffer.buffer[g]]}child(n,r,g){let{buffer:y}=this.context,k=y.findChild(this.index+4,y.buffer[this.index+3],n,r-this.context.start,g);return k<0?null:new BufferNode(this.context,this,k)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(n){return this.child(1,n,2)}childBefore(n){return this.child(-1,n,-2)}enter(n,r,g=0){if(g&IterMode.ExcludeBuffers)return null;let{buffer:y}=this.context,k=y.findChild(this.index+4,y.buffer[this.index+3],r>0?1:-1,n-this.context.start,r);return k<0?null:new BufferNode(this.context,this,k)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(n){return this._parent?null:this.context.parent.nextChild(this.context.index+n,n,0,4)}get nextSibling(){let{buffer:n}=this.context,r=n.buffer[this.index+3];return r<(this._parent?n.buffer[this._parent.index+3]:n.buffer.length)?new BufferNode(this.context,this._parent,r):this.externalSibling(1)}get prevSibling(){let{buffer:n}=this.context,r=this._parent?this._parent.index+4:0;return this.index==r?this.externalSibling(-1):new BufferNode(this.context,this._parent,n.findChild(r,this.index,-1,0,4))}get tree(){return null}toTree(){let n=[],r=[],{buffer:g}=this.context,y=this.index+4,k=g.buffer[this.index+3];if(k>y){let $=g.buffer[this.index+1];n.push(g.slice(y,k,$)),r.push(0)}return new Tree(this.type,n,r,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(e){if(!e.length)return null;let n=0,r=e[0];for(let k=1;k<e.length;k++){let $=e[k];($.from>r.from||$.to<r.to)&&(r=$,n=k)}let g=r instanceof TreeNode&&r.index<0?null:r.parent,y=e.slice();return g?y[n]=g:y.splice(n,1),new StackIterator(y,r)}class StackIterator{constructor(n,r){this.heads=n,this.node=r}get next(){return iterStack(this.heads)}}function stackIterator(e,n,r){let g=e.resolveInner(n,r),y=null;for(let k=g instanceof TreeNode?g:g.context.parent;k;k=k.parent)if(k.index<0){let $=k.parent;(y||(y=[g])).push($.resolve(n,r)),k=$}else{let $=MountedTree.get(k.tree);if($&&$.overlay&&$.overlay[0].from<=n&&$.overlay[$.overlay.length-1].to>=n){let V=new TreeNode($.tree,$.overlay[0].from+k.from,-1,k);(y||(y=[g])).push(resolveNode(V,n,r,!1))}}return y?iterStack(y):g}class TreeCursor{get name(){return this.type.name}constructor(n,r=0){if(this.mode=r,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,n instanceof TreeNode)this.yieldNode(n);else{this._tree=n.context.parent,this.buffer=n.context;for(let g=n._parent;g;g=g._parent)this.stack.unshift(g.index);this.bufferNode=n,this.yieldBuf(n.index)}}yieldNode(n){return n?(this._tree=n,this.type=n.type,this.from=n.from,this.to=n.to,!0):!1}yieldBuf(n,r){this.index=n;let{start:g,buffer:y}=this.buffer;return this.type=r||y.set.types[y.buffer[n]],this.from=g+y.buffer[n+1],this.to=g+y.buffer[n+2],!0}yield(n){return n?n instanceof TreeNode?(this.buffer=null,this.yieldNode(n)):(this.buffer=n.context,this.yieldBuf(n.index,n.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(n,r,g){if(!this.buffer)return this.yield(this._tree.nextChild(n<0?this._tree._tree.children.length-1:0,n,r,g,this.mode));let{buffer:y}=this.buffer,k=y.findChild(this.index+4,y.buffer[this.index+3],n,r-this.buffer.start,g);return k<0?!1:(this.stack.push(this.index),this.yieldBuf(k))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(n){return this.enterChild(1,n,2)}childBefore(n){return this.enterChild(-1,n,-2)}enter(n,r,g=this.mode){return this.buffer?g&IterMode.ExcludeBuffers?!1:this.enterChild(1,n,r):this.yield(this._tree.enter(n,r,g))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let n=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(n)}sibling(n){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+n,n,0,4,this.mode)):!1;let{buffer:r}=this.buffer,g=this.stack.length-1;if(n<0){let y=g<0?0:this.stack[g]+4;if(this.index!=y)return this.yieldBuf(r.findChild(y,this.index,-1,0,4))}else{let y=r.buffer[this.index+3];if(y<(g<0?r.buffer.length:r.buffer[this.stack[g]+3]))return this.yieldBuf(y)}return g<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+n,n,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(n){let r,g,{buffer:y}=this;if(y){if(n>0){if(this.index<y.buffer.buffer.length)return!1}else for(let k=0;k<this.index;k++)if(y.buffer.buffer[k+3]<this.index)return!1;({index:r,parent:g}=y)}else({index:r,_parent:g}=this._tree);for(;g;{index:r,_parent:g}=g)if(r>-1)for(let k=r+n,$=n<0?-1:g._tree.children.length;k!=$;k+=n){let V=g._tree.children[k];if(this.mode&IterMode.IncludeAnonymous||V instanceof TreeBuffer||!V.type.isAnonymous||hasChild(V))return!1}return!0}move(n,r){if(r&&this.enterChild(n,0,4))return!0;for(;;){if(this.sibling(n))return!0;if(this.atLastNode(n)||!this.parent())return!1}}next(n=!0){return this.move(1,n)}prev(n=!0){return this.move(-1,n)}moveTo(n,r=0){for(;(this.from==this.to||(r<1?this.from>=n:this.from>n)||(r>-1?this.to<=n:this.to<n))&&this.parent(););for(;this.enterChild(1,n,r););return this}get node(){if(!this.buffer)return this._tree;let n=this.bufferNode,r=null,g=0;if(n&&n.context==this.buffer)e:for(let y=this.index,k=this.stack.length;k>=0;){for(let $=n;$;$=$._parent)if($.index==y){if(y==this.index)return $;r=$,g=k+1;break e}y=this.stack[--k]}for(let y=g;y<this.stack.length;y++)r=new BufferNode(this.buffer,r,this.stack[y]);return this.bufferNode=new BufferNode(this.buffer,r,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(n,r){for(let g=0;;){let y=!1;if(this.type.isAnonymous||n(this)!==!1){if(this.firstChild()){g++;continue}this.type.isAnonymous||(y=!0)}for(;;){if(y&&r&&r(this),y=this.type.isAnonymous,!g)return;if(this.nextSibling())break;this.parent(),g--,y=!0}}}matchContext(n){if(!this.buffer)return matchNodeContext(this.node.parent,n);let{buffer:r}=this.buffer,{types:g}=r.set;for(let y=n.length-1,k=this.stack.length-1;y>=0;k--){if(k<0)return matchNodeContext(this._tree,n,y);let $=g[r.buffer[this.stack[k]]];if(!$.isAnonymous){if(n[y]&&n[y]!=$.name)return!1;y--}}return!0}}function hasChild(e){return e.children.some(n=>n instanceof TreeBuffer||!n.type.isAnonymous||hasChild(n))}function buildTree(e){var n;let{buffer:r,nodeSet:g,maxBufferLength:y=DefaultBufferLength,reused:k=[],minRepeatType:$=g.types.length}=e,V=Array.isArray(r)?new FlatBufferCursor(r,r.length):r,L=g.types,z=0,j=0;function ae($e,Ce,Ie,ze,Ue,Pt){let{id:hn,start:Dt,end:xn,size:jt}=V,Vn=j,Rn=z;for(;jt<0;)if(V.next(),jt==-1){let In=k[hn];Ie.push(In),ze.push(Dt-$e);return}else if(jt==-3){z=hn;return}else if(jt==-4){j=hn;return}else throw new RangeError(`Unrecognized record size: ${jt}`);let Tn=L[hn],Ln,Sn,An=Dt-$e;if(xn-Dt<=y&&(Sn=de(V.pos-Ce,Ue))){let In=new Uint16Array(Sn.size-Sn.skip),Mn=V.pos-Sn.size,ra=In.length;for(;V.pos>Mn;)ra=he(Sn.start,In,ra);Ln=new TreeBuffer(In,xn-Sn.start,g),An=Sn.start-$e}else{let In=V.pos-jt;V.next();let Mn=[],ra=[],da=hn>=$?hn:-1,ua=0,aa=xn;for(;V.pos>In;)da>=0&&V.id==da&&V.size>=0?(V.end<=aa-y&&(ue(Mn,ra,Dt,ua,V.end,aa,da,Vn,Rn),ua=Mn.length,aa=V.end),V.next()):Pt>2500?oe(Dt,In,Mn,ra):ae(Dt,In,Mn,ra,da,Pt+1);if(da>=0&&ua>0&&ua<Mn.length&&ue(Mn,ra,Dt,ua,Dt,aa,da,Vn,Rn),Mn.reverse(),ra.reverse(),da>-1&&ua>0){let Nn=re(Tn,Rn);Ln=balanceRange(Tn,Mn,ra,0,Mn.length,0,xn-Dt,Nn,Nn)}else Ln=le(Tn,Mn,ra,xn-Dt,Vn-xn,Rn)}Ie.push(Ln),ze.push(An)}function oe($e,Ce,Ie,ze){let Ue=[],Pt=0,hn=-1;for(;V.pos>Ce;){let{id:Dt,start:xn,end:jt,size:Vn}=V;if(Vn>4)V.next();else{if(hn>-1&&xn<hn)break;hn<0&&(hn=jt-y),Ue.push(Dt,xn,jt),Pt++,V.next()}}if(Pt){let Dt=new Uint16Array(Pt*4),xn=Ue[Ue.length-2];for(let jt=Ue.length-3,Vn=0;jt>=0;jt-=3)Dt[Vn++]=Ue[jt],Dt[Vn++]=Ue[jt+1]-xn,Dt[Vn++]=Ue[jt+2]-xn,Dt[Vn++]=Vn;Ie.push(new TreeBuffer(Dt,Ue[2]-xn,g)),ze.push(xn-$e)}}function re($e,Ce){return(Ie,ze,Ue)=>{let Pt=0,hn=Ie.length-1,Dt,xn;if(hn>=0&&(Dt=Ie[hn])instanceof Tree){if(!hn&&Dt.type==$e&&Dt.length==Ue)return Dt;(xn=Dt.prop(NodeProp.lookAhead))&&(Pt=ze[hn]+Dt.length+xn)}return le($e,Ie,ze,Ue,Pt,Ce)}}function ue($e,Ce,Ie,ze,Ue,Pt,hn,Dt,xn){let jt=[],Vn=[];for(;$e.length>ze;)jt.push($e.pop()),Vn.push(Ce.pop()+Ie-Ue);$e.push(le(g.types[hn],jt,Vn,Pt-Ue,Dt-Pt,xn)),Ce.push(Ue-Ie)}function le($e,Ce,Ie,ze,Ue,Pt,hn){if(Pt){let Dt=[NodeProp.contextHash,Pt];hn=hn?[Dt].concat(hn):[Dt]}if(Ue>25){let Dt=[NodeProp.lookAhead,Ue];hn=hn?[Dt].concat(hn):[Dt]}return new Tree($e,Ce,Ie,ze,hn)}function de($e,Ce){let Ie=V.fork(),ze=0,Ue=0,Pt=0,hn=Ie.end-y,Dt={size:0,start:0,skip:0};e:for(let xn=Ie.pos-$e;Ie.pos>xn;){let jt=Ie.size;if(Ie.id==Ce&&jt>=0){Dt.size=ze,Dt.start=Ue,Dt.skip=Pt,Pt+=4,ze+=4,Ie.next();continue}let Vn=Ie.pos-jt;if(jt<0||Vn<xn||Ie.start<hn)break;let Rn=Ie.id>=$?4:0,Tn=Ie.start;for(Ie.next();Ie.pos>Vn;){if(Ie.size<0)if(Ie.size==-3)Rn+=4;else break e;else Ie.id>=$&&(Rn+=4);Ie.next()}Ue=Tn,ze+=jt,Pt+=Rn}return(Ce<0||ze==$e)&&(Dt.size=ze,Dt.start=Ue,Dt.skip=Pt),Dt.size>4?Dt:void 0}function he($e,Ce,Ie){let{id:ze,start:Ue,end:Pt,size:hn}=V;if(V.next(),hn>=0&&ze<$){let Dt=Ie;if(hn>4){let xn=V.pos-(hn-4);for(;V.pos>xn;)Ie=he($e,Ce,Ie)}Ce[--Ie]=Dt,Ce[--Ie]=Pt-$e,Ce[--Ie]=Ue-$e,Ce[--Ie]=ze}else hn==-3?z=ze:hn==-4&&(j=ze);return Ie}let _e=[],xe=[];for(;V.pos>0;)ae(e.start||0,e.bufferStart||0,_e,xe,-1,0);let Ne=(n=e.length)!==null&&n!==void 0?n:_e.length?xe[0]+_e[0].length:0;return new Tree(L[e.topID],_e.reverse(),xe.reverse(),Ne)}const nodeSizeCache=new WeakMap;function nodeSize(e,n){if(!e.isAnonymous||n instanceof TreeBuffer||n.type!=e)return 1;let r=nodeSizeCache.get(n);if(r==null){r=1;for(let g of n.children){if(g.type!=e||!(g instanceof Tree)){r=1;break}r+=nodeSize(e,g)}nodeSizeCache.set(n,r)}return r}function balanceRange(e,n,r,g,y,k,$,V,L){let z=0;for(let ue=g;ue<y;ue++)z+=nodeSize(e,n[ue]);let j=Math.ceil(z*1.5/8),ae=[],oe=[];function re(ue,le,de,he,_e){for(let xe=de;xe<he;){let Ne=xe,$e=le[xe],Ce=nodeSize(e,ue[xe]);for(xe++;xe<he;xe++){let Ie=nodeSize(e,ue[xe]);if(Ce+Ie>=j)break;Ce+=Ie}if(xe==Ne+1){if(Ce>j){let Ie=ue[Ne];re(Ie.children,Ie.positions,0,Ie.children.length,le[Ne]+_e);continue}ae.push(ue[Ne])}else{let Ie=le[xe-1]+ue[xe-1].length-$e;ae.push(balanceRange(e,ue,le,Ne,xe,$e,Ie,null,L))}oe.push($e+_e-k)}}return re(n,r,g,y,0),(V||L)(ae,oe,$)}class NodeWeakMap{constructor(){this.map=new WeakMap}setBuffer(n,r,g){let y=this.map.get(n);y||this.map.set(n,y=new Map),y.set(r,g)}getBuffer(n,r){let g=this.map.get(n);return g&&g.get(r)}set(n,r){n instanceof BufferNode?this.setBuffer(n.context.buffer,n.index,r):n instanceof TreeNode&&this.map.set(n.tree,r)}get(n){return n instanceof BufferNode?this.getBuffer(n.context.buffer,n.index):n instanceof TreeNode?this.map.get(n.tree):void 0}cursorSet(n,r){n.buffer?this.setBuffer(n.buffer.buffer,n.index,r):this.map.set(n.tree,r)}cursorGet(n){return n.buffer?this.getBuffer(n.buffer.buffer,n.index):this.map.get(n.tree)}}class TreeFragment{constructor(n,r,g,y,k=!1,$=!1){this.from=n,this.to=r,this.tree=g,this.offset=y,this.open=(k?1:0)|($?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(n,r=[],g=!1){let y=[new TreeFragment(0,n.length,n,0,!1,g)];for(let k of r)k.to>n.length&&y.push(k);return y}static applyChanges(n,r,g=128){if(!r.length)return n;let y=[],k=1,$=n.length?n[0]:null;for(let V=0,L=0,z=0;;V++){let j=V<r.length?r[V]:null,ae=j?j.fromA:1e9;if(ae-L>=g)for(;$&&$.from<ae;){let oe=$;if(L>=oe.from||ae<=oe.to||z){let re=Math.max(oe.from,L)-z,ue=Math.min(oe.to,ae)-z;oe=re>=ue?null:new TreeFragment(re,ue,oe.tree,oe.offset+z,V>0,!!j)}if(oe&&y.push(oe),$.to>ae)break;$=k<n.length?n[k++]:null}if(!j)break;L=j.toA,z=j.toA-j.toB}return y}}class Parser{startParse(n,r,g){return typeof n=="string"&&(n=new StringInput(n)),g=g?g.length?g.map(y=>new Range(y.from,y.to)):[new Range(0,0)]:[new Range(0,n.length)],this.createParse(n,r||[],g)}parse(n,r,g){let y=this.startParse(n,r,g);for(;;){let k=y.advance();if(k)return k}}}class StringInput{constructor(n){this.string=n}get length(){return this.string.length}chunk(n){return this.string.slice(n)}get lineChunks(){return!1}read(n,r){return this.string.slice(n,r)}}new NodeProp({perNode:!0});let nextTagID=0;class Tag{constructor(n,r,g,y){this.name=n,this.set=r,this.base=g,this.modified=y,this.id=nextTagID++}toString(){let{name:n}=this;for(let r of this.modified)r.name&&(n=`${r.name}(${n})`);return n}static define(n,r){let g=typeof n=="string"?n:"?";if(n instanceof Tag&&(r=n),r?.base)throw new Error("Can not derive from a modified tag");let y=new Tag(g,[],null,[]);if(y.set.push(y),r)for(let k of r.set)y.set.push(k);return y}static defineModifier(n){let r=new Modifier(n);return g=>g.modified.indexOf(r)>-1?g:Modifier.get(g.base||g,g.modified.concat(r).sort((y,k)=>y.id-k.id))}}let nextModifierID=0;class Modifier{constructor(n){this.name=n,this.instances=[],this.id=nextModifierID++}static get(n,r){if(!r.length)return n;let g=r[0].instances.find(V=>V.base==n&&sameArray(r,V.modified));if(g)return g;let y=[],k=new Tag(n.name,y,n,r);for(let V of r)V.instances.push(k);let $=powerSet(r);for(let V of n.set)if(!V.modified.length)for(let L of $)y.push(Modifier.get(V,L));return k}}function sameArray(e,n){return e.length==n.length&&e.every((r,g)=>r==n[g])}function powerSet(e){let n=[[]];for(let r=0;r<e.length;r++)for(let g=0,y=n.length;g<y;g++)n.push(n[g].concat(e[r]));return n.sort((r,g)=>g.length-r.length)}function styleTags(e){let n=Object.create(null);for(let r in e){let g=e[r];Array.isArray(g)||(g=[g]);for(let y of r.split(" "))if(y){let k=[],$=2,V=y;for(let ae=0;;){if(V=="..."&&ae>0&&ae+3==y.length){$=1;break}let oe=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(V);if(!oe)throw new RangeError("Invalid path: "+y);if(k.push(oe[0]=="*"?"":oe[0][0]=='"'?JSON.parse(oe[0]):oe[0]),ae+=oe[0].length,ae==y.length)break;let re=y[ae++];if(ae==y.length&&re=="!"){$=0;break}if(re!="/")throw new RangeError("Invalid path: "+y);V=y.slice(ae)}let L=k.length-1,z=k[L];if(!z)throw new RangeError("Invalid path: "+y);let j=new Rule(g,$,L>0?k.slice(0,L):null);n[z]=j.sort(n[z])}}return ruleNodeProp.add(n)}const ruleNodeProp=new NodeProp;class Rule{constructor(n,r,g,y){this.tags=n,this.mode=r,this.context=g,this.next=y}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(n){return!n||n.depth<this.depth?(this.next=n,this):(n.next=this.sort(n.next),n)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(e,n){let r=Object.create(null);for(let k of e)if(!Array.isArray(k.tag))r[k.tag.id]=k.class;else for(let $ of k.tag)r[$.id]=k.class;let{scope:g,all:y=null}=n||{};return{style:k=>{let $=y;for(let V of k)for(let L of V.set){let z=r[L.id];if(z){$=$?$+" "+z:z;break}}return $},scope:g}}function highlightTags(e,n){let r=null;for(let g of e){let y=g.style(n);y&&(r=r?r+" "+y:y)}return r}function highlightTree(e,n,r,g=0,y=e.length){let k=new HighlightBuilder(g,Array.isArray(n)?n:[n],r);k.highlightRange(e.cursor(),g,y,"",k.highlighters),k.flush(y)}class HighlightBuilder{constructor(n,r,g){this.at=n,this.highlighters=r,this.span=g,this.class=""}startSpan(n,r){r!=this.class&&(this.flush(n),n>this.at&&(this.at=n),this.class=r)}flush(n){n>this.at&&this.class&&this.span(this.at,n,this.class)}highlightRange(n,r,g,y,k){let{type:$,from:V,to:L}=n;if(V>=g||L<=r)return;$.isTop&&(k=this.highlighters.filter(re=>!re.scope||re.scope($)));let z=y,j=getStyleTags(n)||Rule.empty,ae=highlightTags(k,j.tags);if(ae&&(z&&(z+=" "),z+=ae,j.mode==1&&(y+=(y?" ":"")+ae)),this.startSpan(Math.max(r,V),z),j.opaque)return;let oe=n.tree&&n.tree.prop(NodeProp.mounted);if(oe&&oe.overlay){let re=n.node.enter(oe.overlay[0].from+V,1),ue=this.highlighters.filter(de=>!de.scope||de.scope(oe.tree.type)),le=n.firstChild();for(let de=0,he=V;;de++){let _e=de<oe.overlay.length?oe.overlay[de]:null,xe=_e?_e.from+V:L,Ne=Math.max(r,he),$e=Math.min(g,xe);if(Ne<$e&&le)for(;n.from<$e&&(this.highlightRange(n,Ne,$e,y,k),this.startSpan(Math.min($e,n.to),z),!(n.to>=xe||!n.nextSibling())););if(!_e||xe>g)break;he=_e.to+V,he>r&&(this.highlightRange(re.cursor(),Math.max(r,_e.from+V),Math.min(g,he),"",ue),this.startSpan(Math.min(g,he),z))}le&&n.parent()}else if(n.firstChild()){oe&&(y="");do if(!(n.to<=r)){if(n.from>=g)break;this.highlightRange(n,r,g,y,k),this.startSpan(Math.min(g,n.to),z)}while(n.nextSibling());n.parent()}}}function getStyleTags(e){let n=e.type.prop(ruleNodeProp);for(;n&&n.context&&!e.matchContext(n.context);)n=n.next;return n||null}const t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier("definition"),constant:Tag.defineModifier("constant"),function:Tag.defineModifier("function"),standard:Tag.defineModifier("standard"),local:Tag.defineModifier("local"),special:Tag.defineModifier("special")};for(let e in tags){let n=tags[e];n instanceof Tag&&(n.name=e)}tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);var _a;const languageDataProp=new NodeProp;function defineLanguageFacet(e){return Facet.define({combine:e?n=>n.concat(e):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(n,r,g=[],y=""){this.data=n,this.name=y,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=r,this.extension=[language.of(this),EditorState.languageData.of((k,$,V)=>{let L=topNodeAt(k,$,V),z=L.type.prop(languageDataProp);if(!z)return[];let j=k.facet(z),ae=L.type.prop(sublanguageProp);if(ae){let oe=L.resolve($-L.from,V);for(let re of ae)if(re.test(oe,k)){let ue=k.facet(re.facet);return re.type=="replace"?ue:ue.concat(j)}}return j})].concat(g)}isActiveAt(n,r,g=-1){return topNodeAt(n,r,g).type.prop(languageDataProp)==this.data}findRegions(n){let r=n.facet(language);if(r?.data==this.data)return[{from:0,to:n.doc.length}];if(!r||!r.allowsNesting)return[];let g=[],y=(k,$)=>{if(k.prop(languageDataProp)==this.data){g.push({from:$,to:$+k.length});return}let V=k.prop(NodeProp.mounted);if(V){if(V.tree.prop(languageDataProp)==this.data){if(V.overlay)for(let L of V.overlay)g.push({from:L.from+$,to:L.to+$});else g.push({from:$,to:$+k.length});return}else if(V.overlay){let L=g.length;if(y(V.tree,V.overlay[0].from+$),g.length>L)return}}for(let L=0;L<k.children.length;L++){let z=k.children[L];z instanceof Tree&&y(z,k.positions[L]+$)}};return y(syntaxTree(n),0),g}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(e,n,r){let g=e.facet(language),y=syntaxTree(e).topNode;if(!g||g.allowsNesting)for(let k=y;k;k=k.enter(n,r,IterMode.ExcludeBuffers))k.type.isTop&&(y=k);return y}class LRLanguage extends Language{constructor(n,r,g){super(n,r,[],g),this.parser=r}static define(n){let r=defineLanguageFacet(n.languageData);return new LRLanguage(r,n.parser.configure({props:[languageDataProp.add(g=>g.isTop?r:void 0)]}),n.name)}configure(n,r){return new LRLanguage(this.data,this.parser.configure(n),r||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(e){let n=e.field(Language.state,!1);return n?n.tree:Tree.empty}class DocInput{constructor(n){this.doc=n,this.cursorPos=0,this.string="",this.cursor=n.iter()}get length(){return this.doc.length}syncTo(n){return this.string=this.cursor.next(n-this.cursorPos).value,this.cursorPos=n+this.string.length,this.cursorPos-this.string.length}chunk(n){return this.syncTo(n),this.string}get lineChunks(){return!0}read(n,r){let g=this.cursorPos-this.string.length;return n<g||r>=this.cursorPos?this.doc.sliceString(n,r):this.string.slice(n-g,r-g)}}let currentContext=null;class ParseContext{constructor(n,r,g=[],y,k,$,V,L){this.parser=n,this.state=r,this.fragments=g,this.tree=y,this.treeLen=k,this.viewport=$,this.skipped=V,this.scheduleOn=L,this.parse=null,this.tempSkipped=[]}static create(n,r,g){return new ParseContext(n,r,[],Tree.empty,0,g,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(n,r){return r!=null&&r>=this.state.doc.length&&(r=void 0),this.tree!=Tree.empty&&this.isDone(r??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var g;if(typeof n=="number"){let y=Date.now()+n;n=()=>Date.now()>y}for(this.parse||(this.parse=this.startParse()),r!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>r)&&r<this.state.doc.length&&this.parse.stopAt(r);;){let y=this.parse.advance();if(y)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(y,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(g=this.parse.stoppedAt)!==null&&g!==void 0?g:this.state.doc.length,this.tree=y,this.parse=null,this.treeLen<(r??this.state.doc.length))this.parse=this.startParse();else return!0;if(n())return!1}})}takeTree(){let n,r;this.parse&&(n=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&this.parse.stopAt(n),this.withContext(()=>{for(;!(r=this.parse.advance()););}),this.treeLen=n,this.tree=r,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(n){let r=currentContext;currentContext=this;try{return n()}finally{currentContext=r}}withoutTempSkipped(n){for(let r;r=this.tempSkipped.pop();)n=cutFragments(n,r.from,r.to);return n}changes(n,r){let{fragments:g,tree:y,treeLen:k,viewport:$,skipped:V}=this;if(this.takeTree(),!n.empty){let L=[];if(n.iterChangedRanges((z,j,ae,oe)=>L.push({fromA:z,toA:j,fromB:ae,toB:oe})),g=TreeFragment.applyChanges(g,L),y=Tree.empty,k=0,$={from:n.mapPos($.from,-1),to:n.mapPos($.to,1)},this.skipped.length){V=[];for(let z of this.skipped){let j=n.mapPos(z.from,1),ae=n.mapPos(z.to,-1);j<ae&&V.push({from:j,to:ae})}}}return new ParseContext(this.parser,r,g,y,k,$,V,this.scheduleOn)}updateViewport(n){if(this.viewport.from==n.from&&this.viewport.to==n.to)return!1;this.viewport=n;let r=this.skipped.length;for(let g=0;g<this.skipped.length;g++){let{from:y,to:k}=this.skipped[g];y<n.to&&k>n.from&&(this.fragments=cutFragments(this.fragments,y,k),this.skipped.splice(g--,1))}return this.skipped.length>=r?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(n,r){this.skipped.push({from:n,to:r})}static getSkippingParser(n){return new class extends Parser{createParse(r,g,y){let k=y[0].from,$=y[y.length-1].to;return{parsedPos:k,advance(){let L=currentContext;if(L){for(let z of y)L.tempSkipped.push(z);n&&(L.scheduleOn=L.scheduleOn?Promise.all([L.scheduleOn,n]):n)}return this.parsedPos=$,new Tree(NodeType.none,[],[],$-k)},stoppedAt:null,stopAt(){}}}}}isDone(n){n=Math.min(n,this.state.doc.length);let r=this.fragments;return this.treeLen>=n&&r.length&&r[0].from==0&&r[0].to>=n}static get(){return currentContext}}function cutFragments(e,n,r){return TreeFragment.applyChanges(e,[{fromA:n,toA:r,fromB:n,toB:r}])}class LanguageState{constructor(n){this.context=n,this.tree=n.tree}apply(n){if(!n.docChanged&&this.tree==this.context.tree)return this;let r=this.context.changes(n.changes,n.state),g=this.context.treeLen==n.startState.doc.length?void 0:Math.max(n.changes.mapPos(this.context.treeLen),r.viewport.to);return r.work(20,g)||r.takeTree(),new LanguageState(r)}static init(n){let r=Math.min(3e3,n.doc.length),g=ParseContext.create(n.facet(language).parser,n,{from:0,to:r});return g.work(20,r)||g.takeTree(),new LanguageState(g)}}Language.state=StateField.define({create:LanguageState.init,update(e,n){for(let r of n.effects)if(r.is(Language.setState))return r.value;return n.startState.facet(language)!=n.state.facet(language)?LanguageState.init(n.state):e.apply(n)}});let requestIdle=e=>{let n=setTimeout(()=>e(),500);return()=>clearTimeout(n)};typeof requestIdleCallback<"u"&&(requestIdle=e=>{let n=-1,r=setTimeout(()=>{n=requestIdleCallback(e,{timeout:400})},100);return()=>n<0?clearTimeout(r):cancelIdleCallback(n)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(n){this.view=n,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(n){let r=this.view.state.field(Language.state).context;(r.updateViewport(n.view.viewport)||this.view.viewport.to>r.treeLen)&&this.scheduleWork(),(n.docChanged||n.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(r)}scheduleWork(){if(this.working)return;let{state:n}=this.view,r=n.field(Language.state);(r.tree!=r.context.tree||!r.context.isDone(n.doc.length))&&(this.working=requestIdle(this.work))}work(n){this.working=null;let r=Date.now();if(this.chunkEnd<r&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=r+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:g,viewport:{to:y}}=this.view,k=g.field(Language.state);if(k.tree==k.context.tree&&k.context.isDone(y+1e5))return;let $=Date.now()+Math.min(this.chunkBudget,100,n&&!isInputPending?Math.max(25,n.timeRemaining()-5):1e9),V=k.context.treeLen<y&&g.doc.length>y+1e3,L=k.context.work(()=>isInputPending&&isInputPending()||Date.now()>$,y+(V?0:1e5));this.chunkBudget-=Date.now()-r,(L||this.chunkBudget<=0)&&(k.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(k.context))})),this.chunkBudget>0&&!(L&&!V)&&this.scheduleWork(),this.checkAsyncSchedule(k.context)}checkAsyncSchedule(n){n.scheduleOn&&(this.workScheduled++,n.scheduleOn.then(()=>this.scheduleWork()).catch(r=>logException(this.view.state,r)).then(()=>this.workScheduled--),n.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(e){return e.length?e[0]:null},enables:e=>[Language.state,parseWorker,EditorView.contentAttributes.compute([e],n=>{let r=n.facet(e);return r&&r.name?{"data-language":r.name}:{}})]});class LanguageSupport{constructor(n,r=[]){this.language=n,this.support=r,this.extension=[n,r]}}const indentService=Facet.define(),indentUnit=Facet.define({combine:e=>{if(!e.length)return"  ";let n=e[0];if(!n||/\S/.test(n)||Array.from(n).some(r=>r!=n[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return n}});function getIndentUnit(e){let n=e.facet(indentUnit);return n.charCodeAt(0)==9?e.tabSize*n.length:n.length}function indentString(e,n){let r="",g=e.tabSize,y=e.facet(indentUnit)[0];if(y=="	"){for(;n>=g;)r+="	",n-=g;y=" "}for(let k=0;k<n;k++)r+=y;return r}function getIndentation(e,n){e instanceof EditorState&&(e=new IndentContext(e));for(let g of e.state.facet(indentService)){let y=g(e,n);if(y!==void 0)return y}let r=syntaxTree(e.state);return r.length>=n?syntaxIndentation(e,r,n):null}class IndentContext{constructor(n,r={}){this.state=n,this.options=r,this.unit=getIndentUnit(n)}lineAt(n,r=1){let g=this.state.doc.lineAt(n),{simulateBreak:y,simulateDoubleBreak:k}=this.options;return y!=null&&y>=g.from&&y<=g.to?k&&y==n?{text:"",from:n}:(r<0?y<n:y<=n)?{text:g.text.slice(y-g.from),from:y}:{text:g.text.slice(0,y-g.from),from:g.from}:g}textAfterPos(n,r=1){if(this.options.simulateDoubleBreak&&n==this.options.simulateBreak)return"";let{text:g,from:y}=this.lineAt(n,r);return g.slice(n-y,Math.min(g.length,n+100-y))}column(n,r=1){let{text:g,from:y}=this.lineAt(n,r),k=this.countColumn(g,n-y),$=this.options.overrideIndentation?this.options.overrideIndentation(y):-1;return $>-1&&(k+=$-this.countColumn(g,g.search(/\S|$/))),k}countColumn(n,r=n.length){return countColumn(n,this.state.tabSize,r)}lineIndent(n,r=1){let{text:g,from:y}=this.lineAt(n,r),k=this.options.overrideIndentation;if(k){let $=k(y);if($>-1)return $}return this.countColumn(g,g.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(e,n,r){let g=n.resolveStack(r),y=n.resolveInner(r,-1).resolve(r,0).enterUnfinishedNodesBefore(r);if(y!=g.node){let k=[];for(let $=y;$&&!($.from==g.node.from&&$.type==g.node.type);$=$.parent)k.push($);for(let $=k.length-1;$>=0;$--)g={node:k[$],next:g}}return indentFor(g,e,r)}function indentFor(e,n,r){for(let g=e;g;g=g.next){let y=indentStrategy(g.node);if(y)return y(TreeIndentContext.create(n,r,g))}return 0}function ignoreClosed(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}function indentStrategy(e){let n=e.type.prop(indentNodeProp);if(n)return n;let r=e.firstChild,g;if(r&&(g=r.type.prop(NodeProp.closedBy))){let y=e.lastChild,k=y&&g.indexOf(y.name)>-1;return $=>delimitedStrategy($,!0,1,void 0,k&&!ignoreClosed($)?y.from:void 0)}return e.parent==null?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(n,r,g){super(n.state,n.options),this.base=n,this.pos=r,this.context=g}get node(){return this.context.node}static create(n,r,g){return new TreeIndentContext(n,r,g)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(n){let r=this.state.doc.lineAt(n.from);for(;;){let g=n.resolve(r.from);for(;g.parent&&g.parent.from==g.from;)g=g.parent;if(isParent(g,n))break;r=this.state.doc.lineAt(g.from)}return this.lineIndent(r.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(e,n){for(let r=n;r;r=r.parent)if(e==r)return!0;return!1}function bracketedAligned(e){let n=e.node,r=n.childAfter(n.from),g=n.lastChild;if(!r)return null;let y=e.options.simulateBreak,k=e.state.doc.lineAt(r.from),$=y==null||y<=k.from?k.to:Math.min(k.to,y);for(let V=r.to;;){let L=n.childAfter(V);if(!L||L==g)return null;if(!L.type.isSkipped){if(L.from>=$)return null;let z=/^ */.exec(k.text.slice(r.to-k.from))[0].length;return{from:r.from,to:r.to+z}}V=L.to}}function delimitedIndent({closing:e,align:n=!0,units:r=1}){return g=>delimitedStrategy(g,n,r,e)}function delimitedStrategy(e,n,r,g,y){let k=e.textAfter,$=k.match(/^\s*/)[0].length,V=g&&k.slice($,$+g.length)==g||y==e.pos+$,L=n?bracketedAligned(e):null;return L?V?e.column(L.from):e.column(L.to):e.baseIndent+(V?0:e.unit*r)}const flatIndent=e=>e.baseIndent;function continuedIndent({except:e,units:n=1}={}){return r=>{let g=e&&e.test(r.textAfter);return r.baseIndent+(g?0:n*r.unit)}}const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let n=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!n.length)return e;let r=e.newDoc,{head:g}=e.newSelection.main,y=r.lineAt(g);if(g>y.from+DontIndentBeyond)return e;let k=r.sliceString(y.from,g);if(!n.some(z=>z.test(k)))return e;let{state:$}=e,V=-1,L=[];for(let{head:z}of $.selection.ranges){let j=$.doc.lineAt(z);if(j.from==V)continue;V=j.from;let ae=getIndentation($,j.from);if(ae==null)continue;let oe=/^\s*/.exec(j.text)[0],re=indentString($,ae);oe!=re&&L.push({from:j.from,to:j.from+oe.length,insert:re})}return L.length?[e,{changes:L,sequential:!0}]:e})}const foldService=Facet.define(),foldNodeProp=new NodeProp;function foldInside(e){let n=e.firstChild,r=e.lastChild;return n&&n.to<r.from?{from:n.to,to:r.type.isError?e.to:r.from}:null}function syntaxFolding(e,n,r){let g=syntaxTree(e);if(g.length<r)return null;let y=g.resolveStack(r,1),k=null;for(let $=y;$;$=$.next){let V=$.node;if(V.to<=r||V.from>r)continue;if(k&&V.from<n)break;let L=V.type.prop(foldNodeProp);if(L&&(V.to<g.length-50||g.length==e.doc.length||!isUnfinished(V))){let z=L(V,e);z&&z.from<=r&&z.from>=n&&z.to>r&&(k=z)}}return k}function isUnfinished(e){let n=e.lastChild;return n&&n.to==e.to&&n.type.isError}function foldable(e,n,r){for(let g of e.facet(foldService)){let y=g(e,n,r);if(y)return y}return syntaxFolding(e,n,r)}function mapRange(e,n){let r=n.mapPos(e.from,1),g=n.mapPos(e.to,-1);return r>=g?void 0:{from:r,to:g}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(e){let n=[];for(let{head:r}of e.state.selection.ranges)n.some(g=>g.from<=r&&g.to>=r)||n.push(e.lineBlockAt(r));return n}const foldState=StateField.define({create(){return Decoration.none},update(e,n){e=e.map(n.changes);for(let r of n.effects)if(r.is(foldEffect)&&!foldExists(e,r.value.from,r.value.to)){let{preparePlaceholder:g}=n.state.facet(foldConfig),y=g?Decoration.replace({widget:new PreparedFoldWidget(g(n.state,r.value))}):foldWidget;e=e.update({add:[y.range(r.value.from,r.value.to)]})}else r.is(unfoldEffect)&&(e=e.update({filter:(g,y)=>r.value.from!=g||r.value.to!=y,filterFrom:r.value.from,filterTo:r.value.to}));if(n.selection){let r=!1,{head:g}=n.selection.main;e.between(g,g,(y,k)=>{y<g&&k>g&&(r=!0)}),r&&(e=e.update({filterFrom:g,filterTo:g,filter:(y,k)=>k<=g||y>=g}))}return e},provide:e=>EditorView.decorations.from(e),toJSON(e,n){let r=[];return e.between(0,n.doc.length,(g,y)=>{r.push(g,y)}),r},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let n=[];for(let r=0;r<e.length;){let g=e[r++],y=e[r++];if(typeof g!="number"||typeof y!="number")throw new RangeError("Invalid JSON for fold state");n.push(foldWidget.range(g,y))}return Decoration.set(n,!0)}});function findFold(e,n,r){var g;let y=null;return(g=e.field(foldState,!1))===null||g===void 0||g.between(n,r,(k,$)=>{(!y||y.from>k)&&(y={from:k,to:$})}),y}function foldExists(e,n,r){let g=!1;return e.between(n,n,(y,k)=>{y==n&&k==r&&(g=!0)}),g}function maybeEnable(e,n){return e.field(foldState,!1)?n:n.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=e=>{for(let n of selectedLines(e)){let r=foldable(e.state,n.from,n.to);if(r)return e.dispatch({effects:maybeEnable(e.state,[foldEffect.of(r),announceFold(e,r)])}),!0}return!1},unfoldCode=e=>{if(!e.state.field(foldState,!1))return!1;let n=[];for(let r of selectedLines(e)){let g=findFold(e.state,r.from,r.to);g&&n.push(unfoldEffect.of(g),announceFold(e,g,!1))}return n.length&&e.dispatch({effects:n}),n.length>0};function announceFold(e,n,r=!0){let g=e.state.doc.lineAt(n.from).number,y=e.state.doc.lineAt(n.to).number;return EditorView.announce.of(`${e.state.phrase(r?"Folded lines":"Unfolded lines")} ${g} ${e.state.phrase("to")} ${y}.`)}const foldAll=e=>{let{state:n}=e,r=[];for(let g=0;g<n.doc.length;){let y=e.lineBlockAt(g),k=foldable(n,y.from,y.to);k&&r.push(foldEffect.of(k)),g=(k?e.lineBlockAt(k.to):y).to+1}return r.length&&e.dispatch({effects:maybeEnable(e.state,r)}),!!r.length},unfoldAll=e=>{let n=e.state.field(foldState,!1);if(!n||!n.size)return!1;let r=[];return n.between(0,e.state.doc.length,(g,y)=>{r.push(unfoldEffect.of({from:g,to:y}))}),e.dispatch({effects:r}),!0},foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Ctrl-Alt-[",run:foldAll},{key:"Ctrl-Alt-]",run:unfoldAll}],defaultConfig={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},foldConfig=Facet.define({combine(e){return combineConfig(e,defaultConfig)}});function codeFolding(e){let n=[foldState,baseTheme$1$2];return e&&n.push(foldConfig.of(e)),n}function widgetToDOM(e,n){let{state:r}=e,g=r.facet(foldConfig),y=$=>{let V=e.lineBlockAt(e.posAtDOM($.target)),L=findFold(e.state,V.from,V.to);L&&e.dispatch({effects:unfoldEffect.of(L)}),$.preventDefault()};if(g.placeholderDOM)return g.placeholderDOM(e,y,n);let k=document.createElement("span");return k.textContent=g.placeholderText,k.setAttribute("aria-label",r.phrase("folded code")),k.title=r.phrase("unfold"),k.className="cm-foldPlaceholder",k.onclick=y,k}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(e){return widgetToDOM(e,null)}}});class PreparedFoldWidget extends WidgetType{constructor(n){super(),this.value=n}eq(n){return this.value==n.value}toDOM(n){return widgetToDOM(n,this.value)}}const foldGutterDefaults={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class FoldMarker extends GutterMarker{constructor(n,r){super(),this.config=n,this.open=r}eq(n){return this.config==n.config&&this.open==n.open}toDOM(n){if(this.config.markerDOM)return this.config.markerDOM(this.open);let r=document.createElement("span");return r.textContent=this.open?this.config.openText:this.config.closedText,r.title=n.state.phrase(this.open?"Fold line":"Unfold line"),r}}function foldGutter(e={}){let n=Object.assign(Object.assign({},foldGutterDefaults),e),r=new FoldMarker(n,!0),g=new FoldMarker(n,!1),y=ViewPlugin.fromClass(class{constructor($){this.from=$.viewport.from,this.markers=this.buildMarkers($)}update($){($.docChanged||$.viewportChanged||$.startState.facet(language)!=$.state.facet(language)||$.startState.field(foldState,!1)!=$.state.field(foldState,!1)||syntaxTree($.startState)!=syntaxTree($.state)||n.foldingChanged($))&&(this.markers=this.buildMarkers($.view))}buildMarkers($){let V=new RangeSetBuilder;for(let L of $.viewportLineBlocks){let z=findFold($.state,L.from,L.to)?g:foldable($.state,L.from,L.to)?r:null;z&&V.add(L.from,L.from,z)}return V.finish()}}),{domEventHandlers:k}=n;return[y,gutter({class:"cm-foldGutter",markers($){var V;return((V=$.plugin(y))===null||V===void 0?void 0:V.markers)||RangeSet.empty},initialSpacer(){return new FoldMarker(n,!1)},domEventHandlers:Object.assign(Object.assign({},k),{click:($,V,L)=>{if(k.click&&k.click($,V,L))return!0;let z=findFold($.state,V.from,V.to);if(z)return $.dispatch({effects:unfoldEffect.of(z)}),!0;let j=foldable($.state,V.from,V.to);return j?($.dispatch({effects:foldEffect.of(j)}),!0):!1}})}),codeFolding()]}const baseTheme$1$2=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(n,r){this.specs=n;let g;function y(V){let L=StyleModule.newName();return(g||(g=Object.create(null)))["."+L]=V,L}const k=typeof r.all=="string"?r.all:r.all?y(r.all):void 0,$=r.scope;this.scope=$ instanceof Language?V=>V.prop(languageDataProp)==$.data:$?V=>V==$:void 0,this.style=tagHighlighter(n.map(V=>({tag:V.tag,class:V.class||y(Object.assign({},V,{tag:null}))})),{all:k}).style,this.module=g?new StyleModule(g):null,this.themeType=r.themeType}static define(n,r){return new HighlightStyle(n,r||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(e){return e.length?[e[0]]:null}});function getHighlighters(e){let n=e.facet(highlighterFacet);return n.length?n:e.facet(fallbackHighlighter)}function syntaxHighlighting(e,n){let r=[treeHighlighter],g;return e instanceof HighlightStyle&&(e.module&&r.push(EditorView.styleModule.of(e.module)),g=e.themeType),n?.fallback?r.push(fallbackHighlighter.of(e)):g?r.push(highlighterFacet.computeN([EditorView.darkTheme],y=>y.facet(EditorView.darkTheme)==(g=="dark")?[e]:[])):r.push(highlighterFacet.of(e)),r}class TreeHighlighter{constructor(n){this.markCache=Object.create(null),this.tree=syntaxTree(n.state),this.decorations=this.buildDeco(n,getHighlighters(n.state)),this.decoratedTo=n.viewport.to}update(n){let r=syntaxTree(n.state),g=getHighlighters(n.state),y=g!=getHighlighters(n.startState),{viewport:k}=n.view,$=n.changes.mapPos(this.decoratedTo,1);r.length<k.to&&!y&&r.type==this.tree.type&&$>=k.to?(this.decorations=this.decorations.map(n.changes),this.decoratedTo=$):(r!=this.tree||n.viewportChanged||y)&&(this.tree=r,this.decorations=this.buildDeco(n.view,g),this.decoratedTo=k.to)}buildDeco(n,r){if(!r||!this.tree.length)return Decoration.none;let g=new RangeSetBuilder;for(let{from:y,to:k}of n.visibleRanges)highlightTree(this.tree,r,($,V,L)=>{g.add($,V,this.markCache[L]||(this.markCache[L]=Decoration.mark({class:L})))},y,k);return g.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:e=>e.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$3=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(e){return combineConfig(e,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(e){let n=[],r=e.matched?matchingMark:nonmatchingMark;return n.push(r.range(e.start.from,e.start.to)),e.end&&n.push(r.range(e.end.from,e.end.to)),n}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(e,n){if(!n.docChanged&&!n.selection)return e;let r=[],g=n.state.facet(bracketMatchingConfig);for(let y of n.state.selection.ranges){if(!y.empty)continue;let k=matchBrackets(n.state,y.head,-1,g)||y.head>0&&matchBrackets(n.state,y.head-1,1,g)||g.afterCursor&&(matchBrackets(n.state,y.head,1,g)||y.head<n.state.doc.length&&matchBrackets(n.state,y.head+1,-1,g));k&&(r=r.concat(g.renderMatch(k,n.state)))}return Decoration.set(r,!0)},provide:e=>EditorView.decorations.from(e)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$3];function bracketMatching(e={}){return[bracketMatchingConfig.of(e),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes(e,n,r){let g=e.prop(n<0?NodeProp.openedBy:NodeProp.closedBy);if(g)return g;if(e.name.length==1){let y=r.indexOf(e.name);if(y>-1&&y%2==(n<0?1:0))return[r[y+n]]}return null}function findHandle(e){let n=e.type.prop(bracketMatchingHandle);return n?n(e.node):e}function matchBrackets(e,n,r,g={}){let y=g.maxScanDistance||DefaultScanDist,k=g.brackets||DefaultBrackets,$=syntaxTree(e),V=$.resolveInner(n,r);for(let L=V;L;L=L.parent){let z=matchingNodes(L.type,r,k);if(z&&L.from<L.to){let j=findHandle(L);if(j&&(r>0?n>=j.from&&n<j.to:n>j.from&&n<=j.to))return matchMarkedBrackets(e,n,r,L,j,z,k)}}return matchPlainBrackets(e,n,r,$,V.type,y,k)}function matchMarkedBrackets(e,n,r,g,y,k,$){let V=g.parent,L={from:y.from,to:y.to},z=0,j=V?.cursor();if(j&&(r<0?j.childBefore(g.from):j.childAfter(g.to)))do if(r<0?j.to<=g.from:j.from>=g.to){if(z==0&&k.indexOf(j.type.name)>-1&&j.from<j.to){let ae=findHandle(j);return{start:L,end:ae?{from:ae.from,to:ae.to}:void 0,matched:!0}}else if(matchingNodes(j.type,r,$))z++;else if(matchingNodes(j.type,-r,$)){if(z==0){let ae=findHandle(j);return{start:L,end:ae&&ae.from<ae.to?{from:ae.from,to:ae.to}:void 0,matched:!1}}z--}}while(r<0?j.prevSibling():j.nextSibling());return{start:L,matched:!1}}function matchPlainBrackets(e,n,r,g,y,k,$){let V=r<0?e.sliceDoc(n-1,n):e.sliceDoc(n,n+1),L=$.indexOf(V);if(L<0||L%2==0!=r>0)return null;let z={from:r<0?n-1:n,to:r>0?n+1:n},j=e.doc.iterRange(n,r>0?e.doc.length:0),ae=0;for(let oe=0;!j.next().done&&oe<=k;){let re=j.value;r<0&&(oe+=re.length);let ue=n+oe*r;for(let le=r>0?0:re.length-1,de=r>0?re.length:-1;le!=de;le+=r){let he=$.indexOf(re[le]);if(!(he<0||g.resolveInner(ue+le,1).type!=y))if(he%2==0==r>0)ae++;else{if(ae==1)return{start:z,end:{from:ue+le,to:ue+le+1},matched:he>>1==L>>1};ae--}}r>0&&(oe+=re.length)}return j.done?{start:z,matched:!1}:null}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[e,n]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[e]=createTokenType(noTokens,n);function warnForPart(e,n){warned.indexOf(e)>-1||(warned.push(e),console.warn(n))}function createTokenType(e,n){let r=[];for(let V of n.split(" ")){let L=[];for(let z of V.split(".")){let j=e[z]||tags[z];j?typeof j=="function"?L.length?L=L.map(j):warnForPart(z,`Modifier ${z} used at start of tag`):L.length?warnForPart(z,`Tag ${z} used as modifier`):L=Array.isArray(j)?j:[j]:warnForPart(z,`Unknown highlighting tag ${z}`)}for(let z of L)r.push(z)}if(!r.length)return 0;let g=n.replace(/ /g,"_"),y=g+" "+r.map(V=>V.id),k=byTag[y];if(k)return k.id;let $=byTag[y]=NodeType.define({id:typeArray.length,name:g,props:[styleTags({[g]:r})]});return typeArray.push($),$.id}Direction.RTL,Direction.LTR;const toggleComment=e=>{let{state:n}=e,r=n.doc.lineAt(n.selection.main.from),g=getConfig(e.state,r.from);return g.line?toggleLineComment(e):g.block?toggleBlockCommentByLine(e):!1};function command(e,n){return({state:r,dispatch:g})=>{if(r.readOnly)return!1;let y=e(n,r);return y?(g(r.update(y)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((e,n)=>changeBlockComment(e,n,selectedLineRanges(n)),0);function getConfig(e,n){let r=e.languageDataAt("commentTokens",n);return r.length?r[0]:{}}const SearchMargin=50;function findBlockComment(e,{open:n,close:r},g,y){let k=e.sliceDoc(g-SearchMargin,g),$=e.sliceDoc(y,y+SearchMargin),V=/\s*$/.exec(k)[0].length,L=/^\s*/.exec($)[0].length,z=k.length-V;if(k.slice(z-n.length,z)==n&&$.slice(L,L+r.length)==r)return{open:{pos:g-V,margin:V&&1},close:{pos:y+L,margin:L&&1}};let j,ae;y-g<=2*SearchMargin?j=ae=e.sliceDoc(g,y):(j=e.sliceDoc(g,g+SearchMargin),ae=e.sliceDoc(y-SearchMargin,y));let oe=/^\s*/.exec(j)[0].length,re=/\s*$/.exec(ae)[0].length,ue=ae.length-re-r.length;return j.slice(oe,oe+n.length)==n&&ae.slice(ue,ue+r.length)==r?{open:{pos:g+oe+n.length,margin:/\s/.test(j.charAt(oe+n.length))?1:0},close:{pos:y-re-r.length,margin:/\s/.test(ae.charAt(ue-1))?1:0}}:null}function selectedLineRanges(e){let n=[];for(let r of e.selection.ranges){let g=e.doc.lineAt(r.from),y=r.to<=g.to?g:e.doc.lineAt(r.to);y.from>g.from&&y.from==r.to&&(y=r.to==g.to+1?g:e.doc.lineAt(r.to-1));let k=n.length-1;k>=0&&n[k].to>g.from?n[k].to=y.to:n.push({from:g.from+/^\s*/.exec(g.text)[0].length,to:y.to})}return n}function changeBlockComment(e,n,r=n.selection.ranges){let g=r.map(k=>getConfig(n,k.from).block);if(!g.every(k=>k))return null;let y=r.map((k,$)=>findBlockComment(n,g[$],k.from,k.to));if(e!=2&&!y.every(k=>k))return{changes:n.changes(r.map((k,$)=>y[$]?[]:[{from:k.from,insert:g[$].open+" "},{from:k.to,insert:" "+g[$].close}]))};if(e!=1&&y.some(k=>k)){let k=[];for(let $=0,V;$<y.length;$++)if(V=y[$]){let L=g[$],{open:z,close:j}=V;k.push({from:z.pos-L.open.length,to:z.pos+z.margin},{from:j.pos-j.margin,to:j.pos+L.close.length})}return{changes:k}}return null}function changeLineComment(e,n,r=n.selection.ranges){let g=[],y=-1;for(let{from:k,to:$}of r){let V=g.length,L=1e9,z=getConfig(n,k).line;if(z){for(let j=k;j<=$;){let ae=n.doc.lineAt(j);if(ae.from>y&&(k==$||$>ae.from)){y=ae.from;let oe=/^\s*/.exec(ae.text)[0].length,re=oe==ae.length,ue=ae.text.slice(oe,oe+z.length)==z?oe:-1;oe<ae.text.length&&oe<L&&(L=oe),g.push({line:ae,comment:ue,token:z,indent:oe,empty:re,single:!1})}j=ae.to+1}if(L<1e9)for(let j=V;j<g.length;j++)g[j].indent<g[j].line.text.length&&(g[j].indent=L);g.length==V+1&&(g[V].single=!0)}}if(e!=2&&g.some(k=>k.comment<0&&(!k.empty||k.single))){let k=[];for(let{line:V,token:L,indent:z,empty:j,single:ae}of g)(ae||!j)&&k.push({from:V.from+z,insert:L+" "});let $=n.changes(k);return{changes:$,selection:n.selection.map($,1)}}else if(e!=1&&g.some(k=>k.comment>=0)){let k=[];for(let{line:$,comment:V,token:L}of g)if(V>=0){let z=$.from+V,j=z+L.length;$.text[j-$.from]==" "&&j++,k.push({from:z,to:j})}return{changes:k}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(e){return combineConfig(e,{minDepth:100,newGroupDelay:500,joinToEvent:(n,r)=>r},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(n,r)=>(g,y)=>n(g,y)||r(g,y)})}}),historyField_=StateField.define({create(){return HistoryState.empty},update(e,n){let r=n.state.facet(historyConfig),g=n.annotation(fromHistory);if(g){let L=HistEvent.fromTransaction(n,g.selection),z=g.side,j=z==0?e.undone:e.done;return L?j=updateBranch(j,j.length,r.minDepth,L):j=addSelection(j,n.startState.selection),new HistoryState(z==0?g.rest:j,z==0?j:g.rest)}let y=n.annotation(isolateHistory);if((y=="full"||y=="before")&&(e=e.isolate()),n.annotation(Transaction.addToHistory)===!1)return n.changes.empty?e:e.addMapping(n.changes.desc);let k=HistEvent.fromTransaction(n),$=n.annotation(Transaction.time),V=n.annotation(Transaction.userEvent);return k?e=e.addChanges(k,$,V,r,n):n.selection&&(e=e.addSelection(n.startState.selection,$,V,r.newGroupDelay)),(y=="full"||y=="after")&&(e=e.isolate()),e},toJSON(e){return{done:e.done.map(n=>n.toJSON()),undone:e.undone.map(n=>n.toJSON())}},fromJSON(e){return new HistoryState(e.done.map(HistEvent.fromJSON),e.undone.map(HistEvent.fromJSON))}});function history$1(e={}){return[historyField_,historyConfig.of(e),EditorView.domEventHandlers({beforeinput(n,r){let g=n.inputType=="historyUndo"?undo$1:n.inputType=="historyRedo"?redo$1:null;return g?(n.preventDefault(),g(r)):!1}})]}function cmd(e,n){return function({state:r,dispatch:g}){if(!n&&r.readOnly)return!1;let y=r.field(historyField_,!1);if(!y)return!1;let k=y.pop(e,r,n);return k?(g(k),!0):!1}}const undo$1=cmd(0,!1),redo$1=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(n,r,g,y,k){this.changes=n,this.effects=r,this.mapped=g,this.startSelection=y,this.selectionsAfter=k}setSelAfter(n){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,n)}toJSON(){var n,r,g;return{changes:(n=this.changes)===null||n===void 0?void 0:n.toJSON(),mapped:(r=this.mapped)===null||r===void 0?void 0:r.toJSON(),startSelection:(g=this.startSelection)===null||g===void 0?void 0:g.toJSON(),selectionsAfter:this.selectionsAfter.map(y=>y.toJSON())}}static fromJSON(n){return new HistEvent(n.changes&&ChangeSet.fromJSON(n.changes),[],n.mapped&&ChangeDesc.fromJSON(n.mapped),n.startSelection&&EditorSelection.fromJSON(n.startSelection),n.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(n,r){let g=none$1;for(let y of n.startState.facet(invertedEffects)){let k=y(n);k.length&&(g=g.concat(k))}return!g.length&&n.changes.empty?null:new HistEvent(n.changes.invert(n.startState.doc),g,void 0,r||n.startState.selection,none$1)}static selection(n){return new HistEvent(void 0,none$1,void 0,void 0,n)}}function updateBranch(e,n,r,g){let y=n+1>r+20?n-r-1:0,k=e.slice(y,n);return k.push(g),k}function isAdjacent(e,n){let r=[],g=!1;return e.iterChangedRanges((y,k)=>r.push(y,k)),n.iterChangedRanges((y,k,$,V)=>{for(let L=0;L<r.length;){let z=r[L++],j=r[L++];V>=z&&$<=j&&(g=!0)}}),g}function eqSelectionShape(e,n){return e.ranges.length==n.ranges.length&&e.ranges.filter((r,g)=>r.empty!=n.ranges[g].empty).length===0}function conc(e,n){return e.length?n.length?e.concat(n):e:n}const none$1=[],MaxSelectionsPerEvent=200;function addSelection(e,n){if(e.length){let r=e[e.length-1],g=r.selectionsAfter.slice(Math.max(0,r.selectionsAfter.length-MaxSelectionsPerEvent));return g.length&&g[g.length-1].eq(n)?e:(g.push(n),updateBranch(e,e.length-1,1e9,r.setSelAfter(g)))}else return[HistEvent.selection([n])]}function popSelection(e){let n=e[e.length-1],r=e.slice();return r[e.length-1]=n.setSelAfter(n.selectionsAfter.slice(0,n.selectionsAfter.length-1)),r}function addMappingToBranch(e,n){if(!e.length)return e;let r=e.length,g=none$1;for(;r;){let y=mapEvent(e[r-1],n,g);if(y.changes&&!y.changes.empty||y.effects.length){let k=e.slice(0,r);return k[r-1]=y,k}else n=y.mapped,r--,g=y.selectionsAfter}return g.length?[HistEvent.selection(g)]:none$1}function mapEvent(e,n,r){let g=conc(e.selectionsAfter.length?e.selectionsAfter.map(V=>V.map(n)):none$1,r);if(!e.changes)return HistEvent.selection(g);let y=e.changes.map(n),k=n.mapDesc(e.changes,!0),$=e.mapped?e.mapped.composeDesc(k):k;return new HistEvent(y,StateEffect.mapEffects(e.effects,n),$,e.startSelection.map(k),g)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(n,r,g=0,y=void 0){this.done=n,this.undone=r,this.prevTime=g,this.prevUserEvent=y}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(n,r,g,y,k){let $=this.done,V=$[$.length-1];return V&&V.changes&&!V.changes.empty&&n.changes&&(!g||joinableUserEvent.test(g))&&(!V.selectionsAfter.length&&r-this.prevTime<y.newGroupDelay&&y.joinToEvent(k,isAdjacent(V.changes,n.changes))||g=="input.type.compose")?$=updateBranch($,$.length-1,y.minDepth,new HistEvent(n.changes.compose(V.changes),conc(StateEffect.mapEffects(n.effects,V.changes),V.effects),V.mapped,V.startSelection,none$1)):$=updateBranch($,$.length,y.minDepth,n),new HistoryState($,none$1,r,g)}addSelection(n,r,g,y){let k=this.done.length?this.done[this.done.length-1].selectionsAfter:none$1;return k.length>0&&r-this.prevTime<y&&g==this.prevUserEvent&&g&&/^select($|\.)/.test(g)&&eqSelectionShape(k[k.length-1],n)?this:new HistoryState(addSelection(this.done,n),this.undone,r,g)}addMapping(n){return new HistoryState(addMappingToBranch(this.done,n),addMappingToBranch(this.undone,n),this.prevTime,this.prevUserEvent)}pop(n,r,g){let y=n==0?this.done:this.undone;if(y.length==0)return null;let k=y[y.length-1],$=k.selectionsAfter[0]||r.selection;if(g&&k.selectionsAfter.length)return r.update({selection:k.selectionsAfter[k.selectionsAfter.length-1],annotations:fromHistory.of({side:n,rest:popSelection(y),selection:$}),userEvent:n==0?"select.undo":"select.redo",scrollIntoView:!0});if(k.changes){let V=y.length==1?none$1:y.slice(0,y.length-1);return k.mapped&&(V=addMappingToBranch(V,k.mapped)),r.update({changes:k.changes,selection:k.startSelection,effects:k.effects,annotations:fromHistory.of({side:n,rest:V,selection:$}),filter:!1,userEvent:n==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none$1,none$1);const historyKeymap=[{key:"Mod-z",run:undo$1,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo$1,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo$1,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(e,n){return EditorSelection.create(e.ranges.map(n),e.mainIndex)}function setSel(e,n){return e.update({selection:n,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:e,dispatch:n},r){let g=updateSel(e.selection,r);return g.eq(e.selection,!0)?!1:(n(setSel(e,g)),!0)}function rangeEnd(e,n){return EditorSelection.cursor(n?e.to:e.from)}function cursorByChar(e,n){return moveSel(e,r=>r.empty?e.moveByChar(r,n):rangeEnd(r,n))}function ltrAtCursor(e){return e.textDirectionAt(e.state.selection.main.head)==Direction.LTR}const cursorCharLeft=e=>cursorByChar(e,!ltrAtCursor(e)),cursorCharRight=e=>cursorByChar(e,ltrAtCursor(e));function cursorByGroup(e,n){return moveSel(e,r=>r.empty?e.moveByGroup(r,n):rangeEnd(r,n))}const cursorGroupLeft=e=>cursorByGroup(e,!ltrAtCursor(e)),cursorGroupRight=e=>cursorByGroup(e,ltrAtCursor(e));function interestingNode(e,n,r){if(n.type.prop(r))return!0;let g=n.to-n.from;return g&&(g>2||/[^\s,.;:]/.test(e.sliceDoc(n.from,n.to)))||n.firstChild}function moveBySyntax(e,n,r){let g=syntaxTree(e).resolveInner(n.head),y=r?NodeProp.closedBy:NodeProp.openedBy;for(let L=n.head;;){let z=r?g.childAfter(L):g.childBefore(L);if(!z)break;interestingNode(e,z,y)?g=z:L=r?z.to:z.from}let k=g.type.prop(y),$,V;return k&&($=r?matchBrackets(e,g.from,1):matchBrackets(e,g.to,-1))&&$.matched?V=r?$.end.to:$.end.from:V=r?g.to:g.from,EditorSelection.cursor(V,r?-1:1)}const cursorSyntaxLeft=e=>moveSel(e,n=>moveBySyntax(e.state,n,!ltrAtCursor(e))),cursorSyntaxRight=e=>moveSel(e,n=>moveBySyntax(e.state,n,ltrAtCursor(e)));function cursorByLine(e,n){return moveSel(e,r=>{if(!r.empty)return rangeEnd(r,n);let g=e.moveVertically(r,n);return g.head!=r.head?g:e.moveToLineBoundary(r,n)})}const cursorLineUp=e=>cursorByLine(e,!1),cursorLineDown=e=>cursorByLine(e,!0);function pageInfo(e){let n=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,r=0,g=0,y;if(n){for(let k of e.state.facet(EditorView.scrollMargins)){let $=k(e);$?.top&&(r=Math.max($?.top,r)),$?.bottom&&(g=Math.max($?.bottom,g))}y=e.scrollDOM.clientHeight-r-g}else y=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:g,selfScroll:n,height:Math.max(e.defaultLineHeight,y-5)}}function cursorByPage(e,n){let r=pageInfo(e),{state:g}=e,y=updateSel(g.selection,$=>$.empty?e.moveVertically($,n,r.height):rangeEnd($,n));if(y.eq(g.selection))return!1;let k;if(r.selfScroll){let $=e.coordsAtPos(g.selection.main.head),V=e.scrollDOM.getBoundingClientRect(),L=V.top+r.marginTop,z=V.bottom-r.marginBottom;$&&$.top>L&&$.bottom<z&&(k=EditorView.scrollIntoView(y.main.head,{y:"start",yMargin:$.top-L}))}return e.dispatch(setSel(g,y),{effects:k}),!0}const cursorPageUp=e=>cursorByPage(e,!1),cursorPageDown=e=>cursorByPage(e,!0);function moveByLineBoundary(e,n,r){let g=e.lineBlockAt(n.head),y=e.moveToLineBoundary(n,r);if(y.head==n.head&&y.head!=(r?g.to:g.from)&&(y=e.moveToLineBoundary(n,r,!1)),!r&&y.head==g.from&&g.length){let k=/^\s*/.exec(e.state.sliceDoc(g.from,Math.min(g.from+100,g.to)))[0].length;k&&n.head!=g.from+k&&(y=EditorSelection.cursor(g.from+k))}return y}const cursorLineBoundaryForward=e=>moveSel(e,n=>moveByLineBoundary(e,n,!0)),cursorLineBoundaryBackward=e=>moveSel(e,n=>moveByLineBoundary(e,n,!1)),cursorLineBoundaryLeft=e=>moveSel(e,n=>moveByLineBoundary(e,n,!ltrAtCursor(e))),cursorLineBoundaryRight=e=>moveSel(e,n=>moveByLineBoundary(e,n,ltrAtCursor(e))),cursorLineStart=e=>moveSel(e,n=>EditorSelection.cursor(e.lineBlockAt(n.head).from,1)),cursorLineEnd=e=>moveSel(e,n=>EditorSelection.cursor(e.lineBlockAt(n.head).to,-1));function toMatchingBracket(e,n,r){let g=!1,y=updateSel(e.selection,k=>{let $=matchBrackets(e,k.head,-1)||matchBrackets(e,k.head,1)||k.head>0&&matchBrackets(e,k.head-1,1)||k.head<e.doc.length&&matchBrackets(e,k.head+1,-1);if(!$||!$.end)return k;g=!0;let V=$.start.from==k.head?$.end.to:$.end.from;return r?EditorSelection.range(k.anchor,V):EditorSelection.cursor(V)});return g?(n(setSel(e,y)),!0):!1}const cursorMatchingBracket=({state:e,dispatch:n})=>toMatchingBracket(e,n,!1);function extendSel(e,n){let r=updateSel(e.state.selection,g=>{let y=n(g);return EditorSelection.range(g.anchor,y.head,y.goalColumn,y.bidiLevel||void 0)});return r.eq(e.state.selection)?!1:(e.dispatch(setSel(e.state,r)),!0)}function selectByChar(e,n){return extendSel(e,r=>e.moveByChar(r,n))}const selectCharLeft=e=>selectByChar(e,!ltrAtCursor(e)),selectCharRight=e=>selectByChar(e,ltrAtCursor(e));function selectByGroup(e,n){return extendSel(e,r=>e.moveByGroup(r,n))}const selectGroupLeft=e=>selectByGroup(e,!ltrAtCursor(e)),selectGroupRight=e=>selectByGroup(e,ltrAtCursor(e)),selectSyntaxLeft=e=>extendSel(e,n=>moveBySyntax(e.state,n,!ltrAtCursor(e))),selectSyntaxRight=e=>extendSel(e,n=>moveBySyntax(e.state,n,ltrAtCursor(e)));function selectByLine(e,n){return extendSel(e,r=>e.moveVertically(r,n))}const selectLineUp=e=>selectByLine(e,!1),selectLineDown=e=>selectByLine(e,!0);function selectByPage(e,n){return extendSel(e,r=>e.moveVertically(r,n,pageInfo(e).height))}const selectPageUp=e=>selectByPage(e,!1),selectPageDown=e=>selectByPage(e,!0),selectLineBoundaryForward=e=>extendSel(e,n=>moveByLineBoundary(e,n,!0)),selectLineBoundaryBackward=e=>extendSel(e,n=>moveByLineBoundary(e,n,!1)),selectLineBoundaryLeft=e=>extendSel(e,n=>moveByLineBoundary(e,n,!ltrAtCursor(e))),selectLineBoundaryRight=e=>extendSel(e,n=>moveByLineBoundary(e,n,ltrAtCursor(e))),selectLineStart=e=>extendSel(e,n=>EditorSelection.cursor(e.lineBlockAt(n.head).from)),selectLineEnd=e=>extendSel(e,n=>EditorSelection.cursor(e.lineBlockAt(n.head).to)),cursorDocStart=({state:e,dispatch:n})=>(n(setSel(e,{anchor:0})),!0),cursorDocEnd=({state:e,dispatch:n})=>(n(setSel(e,{anchor:e.doc.length})),!0),selectDocStart=({state:e,dispatch:n})=>(n(setSel(e,{anchor:e.selection.main.anchor,head:0})),!0),selectDocEnd=({state:e,dispatch:n})=>(n(setSel(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0),selectAll=({state:e,dispatch:n})=>(n(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0),selectLine=({state:e,dispatch:n})=>{let r=selectedLineBlocks(e).map(({from:g,to:y})=>EditorSelection.range(g,Math.min(y+1,e.doc.length)));return n(e.update({selection:EditorSelection.create(r),userEvent:"select"})),!0},selectParentSyntax=({state:e,dispatch:n})=>{let r=updateSel(e.selection,g=>{let y=syntaxTree(e),k=y.resolveStack(g.from,1);if(g.empty){let $=y.resolveStack(g.from,-1);$.node.from>=k.node.from&&$.node.to<=k.node.to&&(k=$)}for(let $=k;$;$=$.next){let{node:V}=$;if((V.from<g.from&&V.to>=g.to||V.to>g.to&&V.from<=g.from)&&$.next)return EditorSelection.range(V.to,V.from)}return g});return r.eq(e.selection)?!1:(n(setSel(e,r)),!0)},simplifySelection=({state:e,dispatch:n})=>{let r=e.selection,g=null;return r.ranges.length>1?g=EditorSelection.create([r.main]):r.main.empty||(g=EditorSelection.create([EditorSelection.cursor(r.main.head)])),g?(n(setSel(e,g)),!0):!1};function deleteBy(e,n){if(e.state.readOnly)return!1;let r="delete.selection",{state:g}=e,y=g.changeByRange(k=>{let{from:$,to:V}=k;if($==V){let L=n(k);L<$?(r="delete.backward",L=skipAtomic(e,L,!1)):L>$&&(r="delete.forward",L=skipAtomic(e,L,!0)),$=Math.min($,L),V=Math.max(V,L)}else $=skipAtomic(e,$,!1),V=skipAtomic(e,V,!0);return $==V?{range:k}:{changes:{from:$,to:V},range:EditorSelection.cursor($,$<k.head?-1:1)}});return y.changes.empty?!1:(e.dispatch(g.update(y,{scrollIntoView:!0,userEvent:r,effects:r=="delete.selection"?EditorView.announce.of(g.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(e,n,r){if(e instanceof EditorView)for(let g of e.state.facet(EditorView.atomicRanges).map(y=>y(e)))g.between(n,n,(y,k)=>{y<n&&k>n&&(n=r?k:y)});return n}const deleteByChar=(e,n,r)=>deleteBy(e,g=>{let y=g.from,{state:k}=e,$=k.doc.lineAt(y),V,L;if(r&&!n&&y>$.from&&y<$.from+200&&!/[^ \t]/.test(V=$.text.slice(0,y-$.from))){if(V[V.length-1]=="	")return y-1;let z=countColumn(V,k.tabSize),j=z%getIndentUnit(k)||getIndentUnit(k);for(let ae=0;ae<j&&V[V.length-1-ae]==" ";ae++)y--;L=y}else L=findClusterBreak($.text,y-$.from,n,n)+$.from,L==y&&$.number!=(n?k.doc.lines:1)?L+=n?1:-1:!n&&/[\ufe00-\ufe0f]/.test($.text.slice(L-$.from,y-$.from))&&(L=findClusterBreak($.text,L-$.from,!1,!1)+$.from);return L}),deleteCharBackward=e=>deleteByChar(e,!1,!0),deleteCharForward=e=>deleteByChar(e,!0,!1),deleteByGroup=(e,n)=>deleteBy(e,r=>{let g=r.head,{state:y}=e,k=y.doc.lineAt(g),$=y.charCategorizer(g);for(let V=null;;){if(g==(n?k.to:k.from)){g==r.head&&k.number!=(n?y.doc.lines:1)&&(g+=n?1:-1);break}let L=findClusterBreak(k.text,g-k.from,n)+k.from,z=k.text.slice(Math.min(g,L)-k.from,Math.max(g,L)-k.from),j=$(z);if(V!=null&&j!=V)break;(z!=" "||g!=r.head)&&(V=j),g=L}return g}),deleteGroupBackward=e=>deleteByGroup(e,!1),deleteGroupForward=e=>deleteByGroup(e,!0),deleteToLineEnd=e=>deleteBy(e,n=>{let r=e.lineBlockAt(n.head).to;return n.head<r?r:Math.min(e.state.doc.length,n.head+1)}),deleteLineBoundaryBackward=e=>deleteBy(e,n=>{let r=e.moveToLineBoundary(n,!1).head;return n.head>r?r:Math.max(0,n.head-1)}),deleteLineBoundaryForward=e=>deleteBy(e,n=>{let r=e.moveToLineBoundary(n,!0).head;return n.head<r?r:Math.min(e.state.doc.length,n.head+1)}),splitLine=({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(g=>({changes:{from:g.from,to:g.to,insert:Text.of(["",""])},range:EditorSelection.cursor(g.from)}));return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(g=>{if(!g.empty||g.from==0||g.from==e.doc.length)return{range:g};let y=g.from,k=e.doc.lineAt(y),$=y==k.from?y-1:findClusterBreak(k.text,y-k.from,!1)+k.from,V=y==k.to?y+1:findClusterBreak(k.text,y-k.from,!0)+k.from;return{changes:{from:$,to:V,insert:e.doc.slice(y,V).append(e.doc.slice($,y))},range:EditorSelection.cursor(V)}});return r.changes.empty?!1:(n(e.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(e){let n=[],r=-1;for(let g of e.selection.ranges){let y=e.doc.lineAt(g.from),k=e.doc.lineAt(g.to);if(!g.empty&&g.to==k.from&&(k=e.doc.lineAt(g.to-1)),r>=y.number){let $=n[n.length-1];$.to=k.to,$.ranges.push(g)}else n.push({from:y.from,to:k.to,ranges:[g]});r=k.number+1}return n}function moveLine(e,n,r){if(e.readOnly)return!1;let g=[],y=[];for(let k of selectedLineBlocks(e)){if(r?k.to==e.doc.length:k.from==0)continue;let $=e.doc.lineAt(r?k.to+1:k.from-1),V=$.length+1;if(r){g.push({from:k.to,to:$.to},{from:k.from,insert:$.text+e.lineBreak});for(let L of k.ranges)y.push(EditorSelection.range(Math.min(e.doc.length,L.anchor+V),Math.min(e.doc.length,L.head+V)))}else{g.push({from:$.from,to:k.from},{from:k.to,insert:e.lineBreak+$.text});for(let L of k.ranges)y.push(EditorSelection.range(L.anchor-V,L.head-V))}}return g.length?(n(e.update({changes:g,scrollIntoView:!0,selection:EditorSelection.create(y,e.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:e,dispatch:n})=>moveLine(e,n,!1),moveLineDown=({state:e,dispatch:n})=>moveLine(e,n,!0);function copyLine(e,n,r){if(e.readOnly)return!1;let g=[];for(let y of selectedLineBlocks(e))r?g.push({from:y.from,insert:e.doc.slice(y.from,y.to)+e.lineBreak}):g.push({from:y.to,insert:e.lineBreak+e.doc.slice(y.from,y.to)});return n(e.update({changes:g,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:e,dispatch:n})=>copyLine(e,n,!1),copyLineDown=({state:e,dispatch:n})=>copyLine(e,n,!0),deleteLine=e=>{if(e.state.readOnly)return!1;let{state:n}=e,r=n.changes(selectedLineBlocks(n).map(({from:y,to:k})=>(y>0?y--:k<n.doc.length&&k++,{from:y,to:k}))),g=updateSel(n.selection,y=>{let k;if(e.lineWrapping){let $=e.lineBlockAt(y.head),V=e.coordsAtPos(y.head,y.assoc||1);V&&(k=$.bottom+e.documentTop-V.bottom+e.defaultLineHeight/2)}return e.moveVertically(y,!0,k)}).map(r);return e.dispatch({changes:r,selection:g,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(e,n){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(n-1,n+1)))return{from:n,to:n};let r=syntaxTree(e).resolveInner(n),g=r.childBefore(n),y=r.childAfter(n),k;return g&&y&&g.to<=n&&y.from>=n&&(k=g.type.prop(NodeProp.closedBy))&&k.indexOf(y.name)>-1&&e.doc.lineAt(g.to).from==e.doc.lineAt(y.from).from&&!/\S/.test(e.sliceDoc(g.to,y.from))?{from:g.to,to:y.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let g=n.changeByRange(y=>{let{from:k,to:$}=y,V=n.doc.lineAt(k),L=!e&&k==$&&isBetweenBrackets(n,k);e&&(k=$=($<=V.to?V:n.doc.lineAt($)).to);let z=new IndentContext(n,{simulateBreak:k,simulateDoubleBreak:!!L}),j=getIndentation(z,k);for(j==null&&(j=countColumn(/^\s*/.exec(n.doc.lineAt(k).text)[0],n.tabSize));$<V.to&&/\s/.test(V.text[$-V.from]);)$++;L?{from:k,to:$}=L:k>V.from&&k<V.from+100&&!/\S/.test(V.text.slice(0,k))&&(k=V.from);let ae=["",indentString(n,j)];return L&&ae.push(indentString(n,z.lineIndent(V.from,-1))),{changes:{from:k,to:$,insert:Text.of(ae)},range:EditorSelection.cursor(k+1+ae[1].length)}});return r(n.update(g,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(e,n){let r=-1;return e.changeByRange(g=>{let y=[];for(let $=g.from;$<=g.to;){let V=e.doc.lineAt($);V.number>r&&(g.empty||g.to>V.from)&&(n(V,y,g),r=V.number),$=V.to+1}let k=e.changes(y);return{changes:y,range:EditorSelection.range(k.mapPos(g.anchor,1),k.mapPos(g.head,1))}})}const indentSelection=({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=Object.create(null),g=new IndentContext(e,{overrideIndentation:k=>{let $=r[k];return $??-1}}),y=changeBySelectedLine(e,(k,$,V)=>{let L=getIndentation(g,k.from);if(L==null)return;/\S/.test(k.text)||(L=0);let z=/^\s*/.exec(k.text)[0],j=indentString(e,L);(z!=j||V.from<k.from+z.length)&&(r[k.from]=L,$.push({from:k.from,to:k.from+z.length,insert:j}))});return y.changes.empty||n(e.update(y,{userEvent:"indent"})),!0},indentMore=({state:e,dispatch:n})=>e.readOnly?!1:(n(e.update(changeBySelectedLine(e,(r,g)=>{g.push({from:r.from,insert:e.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:e,dispatch:n})=>e.readOnly?!1:(n(e.update(changeBySelectedLine(e,(r,g)=>{let y=/^\s*/.exec(r.text)[0];if(!y)return;let k=countColumn(y,e.tabSize),$=0,V=indentString(e,Math.max(0,k-getIndentUnit(e)));for(;$<y.length&&$<V.length&&y.charCodeAt($)==V.charCodeAt($);)$++;g.push({from:r.from+$,to:r.from+y.length,insert:V.slice($)})}),{userEvent:"delete.dedent"})),!0),toggleTabFocusMode=e=>(e.setTabFocusMode(),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent,shift:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward},{mac:"Mod-Delete",run:deleteLineBoundaryForward}].concat(emacsStyleKeymap.map(e=>({mac:e.key,run:e.run,shift:e.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment},{key:"Ctrl-m",mac:"Shift-Alt-m",run:toggleTabFocusMode}].concat(standardKeymap);function crelt(){var e=arguments[0];typeof e=="string"&&(e=document.createElement(e));var n=1,r=arguments[1];if(r&&typeof r=="object"&&r.nodeType==null&&!Array.isArray(r)){for(var g in r)if(Object.prototype.hasOwnProperty.call(r,g)){var y=r[g];typeof y=="string"?e.setAttribute(g,y):y!=null&&(e[g]=y)}n++}for(;n<arguments.length;n++)add(e,arguments[n]);return e}function add(e,n){if(typeof n=="string")e.appendChild(document.createTextNode(n));else if(n!=null)if(n.nodeType!=null)e.appendChild(n);else if(Array.isArray(n))for(var r=0;r<n.length;r++)add(e,n[r]);else throw new RangeError("Unsupported child node: "+n)}const basicNormalize=typeof String.prototype.normalize=="function"?e=>e.normalize("NFKD"):e=>e;class SearchCursor{constructor(n,r,g=0,y=n.length,k,$){this.test=$,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=n.iterRange(g,y),this.bufferStart=g,this.normalize=k?V=>k(basicNormalize(V)):basicNormalize,this.query=this.normalize(r)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt$1(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let n=this.peek();if(n<0)return this.done=!0,this;let r=fromCodePoint(n),g=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(n);let y=this.normalize(r);if(y.length)for(let k=0,$=g;;k++){let V=y.charCodeAt(k),L=this.match(V,$,this.bufferPos+this.bufferStart);if(k==y.length-1){if(L)return this.value=L,this;break}$==g&&k<r.length&&r.charCodeAt(k)==V&&$++}}}match(n,r,g){let y=null;for(let k=0;k<this.matches.length;k+=2){let $=this.matches[k],V=!1;this.query.charCodeAt($)==n&&($==this.query.length-1?y={from:this.matches[k+1],to:g}:(this.matches[k]++,V=!0)),V||(this.matches.splice(k,2),k-=2)}return this.query.charCodeAt(0)==n&&(this.query.length==1?y={from:r,to:g}:this.matches.push(1,r)),y&&this.test&&!this.test(y.from,y.to,this.buffer,this.bufferStart)&&(y=null),y}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(n,r,g,y=0,k=n.length){if(this.text=n,this.to=k,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(r))return new MultilineRegExpCursor(n,r,g,y,k);this.re=new RegExp(r,baseFlags+(g?.ignoreCase?"i":"")),this.test=g?.test,this.iter=n.iter();let $=n.lineAt(y);this.curLineStart=$.from,this.matchPos=toCharEnd(n,y),this.getLine(this.curLineStart)}getLine(n){this.iter.next(n),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let n=this.matchPos-this.curLineStart;;){this.re.lastIndex=n;let r=this.matchPos<=this.to&&this.re.exec(this.curLine);if(r){let g=this.curLineStart+r.index,y=g+r[0].length;if(this.matchPos=toCharEnd(this.text,y+(g==y?1:0)),g==this.curLineStart+this.curLine.length&&this.nextLine(),(g<y||g>this.value.to)&&(!this.test||this.test(g,y,r)))return this.value={from:g,to:y,match:r},this;n=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),n=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(n,r){this.from=n,this.text=r}get to(){return this.from+this.text.length}static get(n,r,g){let y=flattened.get(n);if(!y||y.from>=g||y.to<=r){let V=new FlattenedDoc(r,n.sliceString(r,g));return flattened.set(n,V),V}if(y.from==r&&y.to==g)return y;let{text:k,from:$}=y;return $>r&&(k=n.sliceString(r,$)+k,$=r),y.to<g&&(k+=n.sliceString(y.to,g)),flattened.set(n,new FlattenedDoc($,k)),new FlattenedDoc(r,k.slice(r-$,g-$))}}class MultilineRegExpCursor{constructor(n,r,g,y,k){this.text=n,this.to=k,this.done=!1,this.value=empty,this.matchPos=toCharEnd(n,y),this.re=new RegExp(r,baseFlags+(g?.ignoreCase?"i":"")),this.test=g?.test,this.flat=FlattenedDoc.get(n,y,this.chunkEnd(y+5e3))}chunkEnd(n){return n>=this.to?this.to:this.text.lineAt(n).to}next(){for(;;){let n=this.re.lastIndex=this.matchPos-this.flat.from,r=this.re.exec(this.flat.text);if(r&&!r[0]&&r.index==n&&(this.re.lastIndex=n+1,r=this.re.exec(this.flat.text)),r){let g=this.flat.from+r.index,y=g+r[0].length;if((this.flat.to>=this.to||r.index+r[0].length<=this.flat.text.length-10)&&(!this.test||this.test(g,y,r)))return this.value={from:g,to:y,match:r},this.matchPos=toCharEnd(this.text,y+(g==y?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(e){try{return new RegExp(e,baseFlags),!0}catch{return!1}}function toCharEnd(e,n){if(n>=e.length)return n;let r=e.lineAt(n),g;for(;n<r.to&&(g=r.text.charCodeAt(n-r.from))>=56320&&g<57344;)n++;return n}function createLineDialog(e){let n=String(e.state.doc.lineAt(e.state.selection.main.head).number),r=crelt("input",{class:"cm-textfield",name:"line",value:n}),g=crelt("form",{class:"cm-gotoLine",onkeydown:k=>{k.keyCode==27?(k.preventDefault(),e.dispatch({effects:dialogEffect.of(!1)}),e.focus()):k.keyCode==13&&(k.preventDefault(),y())},onsubmit:k=>{k.preventDefault(),y()}},crelt("label",e.state.phrase("Go to line"),": ",r)," ",crelt("button",{class:"cm-button",type:"submit"},e.state.phrase("go")));function y(){let k=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(r.value);if(!k)return;let{state:$}=e,V=$.doc.lineAt($.selection.main.head),[,L,z,j,ae]=k,oe=j?+j.slice(1):0,re=z?+z:V.number;if(z&&ae){let de=re/100;L&&(de=de*(L=="-"?-1:1)+V.number/$.doc.lines),re=Math.round($.doc.lines*de)}else z&&L&&(re=re*(L=="-"?-1:1)+V.number);let ue=$.doc.line(Math.max(1,Math.min($.doc.lines,re))),le=EditorSelection.cursor(ue.from+Math.max(0,Math.min(oe,ue.length)));e.dispatch({effects:[dialogEffect.of(!1),EditorView.scrollIntoView(le.from,{y:"center"})],selection:le}),e.focus()}return{dom:g}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(e,n){for(let r of n.effects)r.is(dialogEffect)&&(e=r.value);return e},provide:e=>showPanel.from(e,n=>n?createLineDialog:null)}),gotoLine=e=>{let n=getPanel(e,createLineDialog);if(!n){let r=[dialogEffect.of(!0)];e.state.field(dialogField,!1)==null&&r.push(StateEffect.appendConfig.of([dialogField,baseTheme$1$1])),e.dispatch({effects:r}),n=getPanel(e,createLineDialog)}return n&&n.dom.querySelector("input").select(),!0},baseTheme$1$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),defaultHighlightOptions={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},highlightConfig=Facet.define({combine(e){return combineConfig(e,defaultHighlightOptions,{highlightWordAroundCursor:(n,r)=>n||r,minSelectionLength:Math.min,maxMatches:Math.min})}});function highlightSelectionMatches(e){let n=[defaultTheme,matchHighlighter];return e&&n.push(highlightConfig.of(e)),n}const matchDeco=Decoration.mark({class:"cm-selectionMatch"}),mainMatchDeco=Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries(e,n,r,g){return(r==0||e(n.sliceDoc(r-1,r))!=CharCategory.Word)&&(g==n.doc.length||e(n.sliceDoc(g,g+1))!=CharCategory.Word)}function insideWord(e,n,r,g){return e(n.sliceDoc(r,r+1))==CharCategory.Word&&e(n.sliceDoc(g-1,g))==CharCategory.Word}const matchHighlighter=ViewPlugin.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let n=e.state.facet(highlightConfig),{state:r}=e,g=r.selection;if(g.ranges.length>1)return Decoration.none;let y=g.main,k,$=null;if(y.empty){if(!n.highlightWordAroundCursor)return Decoration.none;let L=r.wordAt(y.head);if(!L)return Decoration.none;$=r.charCategorizer(y.head),k=r.sliceDoc(L.from,L.to)}else{let L=y.to-y.from;if(L<n.minSelectionLength||L>200)return Decoration.none;if(n.wholeWords){if(k=r.sliceDoc(y.from,y.to),$=r.charCategorizer(y.head),!(insideWordBoundaries($,r,y.from,y.to)&&insideWord($,r,y.from,y.to)))return Decoration.none}else if(k=r.sliceDoc(y.from,y.to),!k)return Decoration.none}let V=[];for(let L of e.visibleRanges){let z=new SearchCursor(r.doc,k,L.from,L.to);for(;!z.next().done;){let{from:j,to:ae}=z.value;if((!$||insideWordBoundaries($,r,j,ae))&&(y.empty&&j<=y.from&&ae>=y.to?V.push(mainMatchDeco.range(j,ae)):(j>=y.to||ae<=y.from)&&V.push(matchDeco.range(j,ae)),V.length>n.maxMatches))return Decoration.none}}return Decoration.set(V)}},{decorations:e=>e.decorations}),defaultTheme=EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),selectWord=({state:e,dispatch:n})=>{let{selection:r}=e,g=EditorSelection.create(r.ranges.map(y=>e.wordAt(y.head)||EditorSelection.cursor(y.head)),r.mainIndex);return g.eq(r)?!1:(n(e.update({selection:g})),!0)};function findNextOccurrence(e,n){let{main:r,ranges:g}=e.selection,y=e.wordAt(r.head),k=y&&y.from==r.from&&y.to==r.to;for(let $=!1,V=new SearchCursor(e.doc,n,g[g.length-1].to);;)if(V.next(),V.done){if($)return null;V=new SearchCursor(e.doc,n,0,Math.max(0,g[g.length-1].from-1)),$=!0}else{if($&&g.some(L=>L.from==V.value.from))continue;if(k){let L=e.wordAt(V.value.from);if(!L||L.from!=V.value.from||L.to!=V.value.to)continue}return V.value}}const selectNextOccurrence=({state:e,dispatch:n})=>{let{ranges:r}=e.selection;if(r.some(k=>k.from===k.to))return selectWord({state:e,dispatch:n});let g=e.sliceDoc(r[0].from,r[0].to);if(e.selection.ranges.some(k=>e.sliceDoc(k.from,k.to)!=g))return!1;let y=findNextOccurrence(e,g);return y?(n(e.update({selection:e.selection.addRange(EditorSelection.range(y.from,y.to),!1),effects:EditorView.scrollIntoView(y.to)})),!0):!1},searchConfigFacet=Facet.define({combine(e){return combineConfig(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:n=>new SearchPanel(n),scrollToMatch:n=>EditorView.scrollIntoView(n)})}});class SearchQuery{constructor(n){this.search=n.search,this.caseSensitive=!!n.caseSensitive,this.literal=!!n.literal,this.regexp=!!n.regexp,this.replace=n.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!n.wholeWord}unquote(n){return this.literal?n:n.replace(/\\([nrt\\])/g,(r,g)=>g=="n"?`
`:g=="r"?"\r":g=="t"?"	":"\\")}eq(n){return this.search==n.search&&this.replace==n.replace&&this.caseSensitive==n.caseSensitive&&this.regexp==n.regexp&&this.wholeWord==n.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(n,r=0,g){let y=n.doc?n:EditorState.create({doc:n});return g==null&&(g=y.doc.length),this.regexp?regexpCursor(this,y,r,g):stringCursor(this,y,r,g)}}class QueryType{constructor(n){this.spec=n}}function stringCursor(e,n,r,g){return new SearchCursor(n.doc,e.unquoted,r,g,e.caseSensitive?void 0:y=>y.toLowerCase(),e.wholeWord?stringWordTest(n.doc,n.charCategorizer(n.selection.main.head)):void 0)}function stringWordTest(e,n){return(r,g,y,k)=>((k>r||k+y.length<g)&&(k=Math.max(0,r-2),y=e.sliceString(k,Math.min(e.length,g+2))),(n(charBefore(y,r-k))!=CharCategory.Word||n(charAfter(y,r-k))!=CharCategory.Word)&&(n(charAfter(y,g-k))!=CharCategory.Word||n(charBefore(y,g-k))!=CharCategory.Word))}class StringQuery extends QueryType{constructor(n){super(n)}nextMatch(n,r,g){let y=stringCursor(this.spec,n,g,n.doc.length).nextOverlapping();if(y.done){let k=Math.min(n.doc.length,r+this.spec.unquoted.length);y=stringCursor(this.spec,n,0,k).nextOverlapping()}return y.done||y.value.from==r&&y.value.to==g?null:y.value}prevMatchInRange(n,r,g){for(let y=g;;){let k=Math.max(r,y-1e4-this.spec.unquoted.length),$=stringCursor(this.spec,n,k,y),V=null;for(;!$.nextOverlapping().done;)V=$.value;if(V)return V;if(k==r)return null;y-=1e4}}prevMatch(n,r,g){let y=this.prevMatchInRange(n,0,r);return y||(y=this.prevMatchInRange(n,Math.max(0,g-this.spec.unquoted.length),n.doc.length)),y&&(y.from!=r||y.to!=g)?y:null}getReplacement(n){return this.spec.unquote(this.spec.replace)}matchAll(n,r){let g=stringCursor(this.spec,n,0,n.doc.length),y=[];for(;!g.next().done;){if(y.length>=r)return null;y.push(g.value)}return y}highlight(n,r,g,y){let k=stringCursor(this.spec,n,Math.max(0,r-this.spec.unquoted.length),Math.min(g+this.spec.unquoted.length,n.doc.length));for(;!k.next().done;)y(k.value.from,k.value.to)}}function regexpCursor(e,n,r,g){return new RegExpCursor(n.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?regexpWordTest(n.charCategorizer(n.selection.main.head)):void 0},r,g)}function charBefore(e,n){return e.slice(findClusterBreak(e,n,!1),n)}function charAfter(e,n){return e.slice(n,findClusterBreak(e,n))}function regexpWordTest(e){return(n,r,g)=>!g[0].length||(e(charBefore(g.input,g.index))!=CharCategory.Word||e(charAfter(g.input,g.index))!=CharCategory.Word)&&(e(charAfter(g.input,g.index+g[0].length))!=CharCategory.Word||e(charBefore(g.input,g.index+g[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(n,r,g){let y=regexpCursor(this.spec,n,g,n.doc.length).next();return y.done&&(y=regexpCursor(this.spec,n,0,r).next()),y.done?null:y.value}prevMatchInRange(n,r,g){for(let y=1;;y++){let k=Math.max(r,g-y*1e4),$=regexpCursor(this.spec,n,k,g),V=null;for(;!$.next().done;)V=$.value;if(V&&(k==r||V.from>k+10))return V;if(k==r)return null}}prevMatch(n,r,g){return this.prevMatchInRange(n,0,r)||this.prevMatchInRange(n,g,n.doc.length)}getReplacement(n){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(r,g)=>g=="$"?"$":g=="&"?n.match[0]:g!="0"&&+g<n.match.length?n.match[g]:r)}matchAll(n,r){let g=regexpCursor(this.spec,n,0,n.doc.length),y=[];for(;!g.next().done;){if(y.length>=r)return null;y.push(g.value)}return y}highlight(n,r,g,y){let k=regexpCursor(this.spec,n,Math.max(0,r-250),Math.min(g+250,n.doc.length));for(;!k.next().done;)y(k.value.from,k.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(e){return new SearchState(defaultQuery(e).create(),null)},update(e,n){for(let r of n.effects)r.is(setSearchQuery)?e=new SearchState(r.value.create(),e.panel):r.is(togglePanel$1)&&(e=new SearchState(e.query,r.value?createSearchPanel:null));return e},provide:e=>showPanel.from(e,n=>n.panel)});class SearchState{constructor(n,r){this.query=n,this.panel=r}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(searchState))}update(e){let n=e.state.field(searchState);(n!=e.startState.field(searchState)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(n))}highlight({query:e,panel:n}){if(!n||!e.spec.valid)return Decoration.none;let{view:r}=this,g=new RangeSetBuilder;for(let y=0,k=r.visibleRanges,$=k.length;y<$;y++){let{from:V,to:L}=k[y];for(;y<$-1&&L>k[y+1].from-2*250;)L=k[++y].to;e.highlight(r.state,V,L,(z,j)=>{let ae=r.state.selection.ranges.some(oe=>oe.from==z&&oe.to==j);g.add(z,j,ae?selectedMatchMark:matchMark)})}return g.finish()}},{decorations:e=>e.decorations});function searchCommand(e){return n=>{let r=n.state.field(searchState,!1);return r&&r.query.spec.valid?e(n,r):openSearchPanel(n)}}const findNext=searchCommand((e,{query:n})=>{let{to:r}=e.state.selection.main,g=n.nextMatch(e.state,r,r);if(!g)return!1;let y=EditorSelection.single(g.from,g.to),k=e.state.facet(searchConfigFacet);return e.dispatch({selection:y,effects:[announceMatch(e,g),k.scrollToMatch(y.main,e)],userEvent:"select.search"}),selectSearchInput(e),!0}),findPrevious=searchCommand((e,{query:n})=>{let{state:r}=e,{from:g}=r.selection.main,y=n.prevMatch(r,g,g);if(!y)return!1;let k=EditorSelection.single(y.from,y.to),$=e.state.facet(searchConfigFacet);return e.dispatch({selection:k,effects:[announceMatch(e,y),$.scrollToMatch(k.main,e)],userEvent:"select.search"}),selectSearchInput(e),!0}),selectMatches=searchCommand((e,{query:n})=>{let r=n.matchAll(e.state,1e3);return!r||!r.length?!1:(e.dispatch({selection:EditorSelection.create(r.map(g=>EditorSelection.range(g.from,g.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:e,dispatch:n})=>{let r=e.selection;if(r.ranges.length>1||r.main.empty)return!1;let{from:g,to:y}=r.main,k=[],$=0;for(let V=new SearchCursor(e.doc,e.sliceDoc(g,y));!V.next().done;){if(k.length>1e3)return!1;V.value.from==g&&($=k.length),k.push(EditorSelection.range(V.value.from,V.value.to))}return n(e.update({selection:EditorSelection.create(k,$),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((e,{query:n})=>{let{state:r}=e,{from:g,to:y}=r.selection.main;if(r.readOnly)return!1;let k=n.nextMatch(r,g,g);if(!k)return!1;let $=k,V=[],L,z,j=[];if($.from==g&&$.to==y&&(z=r.toText(n.getReplacement($)),V.push({from:$.from,to:$.to,insert:z}),$=n.nextMatch(r,$.from,$.to),j.push(EditorView.announce.of(r.phrase("replaced match on line $",r.doc.lineAt(g).number)+"."))),$){let ae=V.length==0||V[0].from>=k.to?0:k.to-k.from-z.length;L=EditorSelection.single($.from-ae,$.to-ae),j.push(announceMatch(e,$)),j.push(r.facet(searchConfigFacet).scrollToMatch(L.main,e))}return e.dispatch({changes:V,selection:L,effects:j,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((e,{query:n})=>{if(e.state.readOnly)return!1;let r=n.matchAll(e.state,1e9).map(y=>{let{from:k,to:$}=y;return{from:k,to:$,insert:n.getReplacement(y)}});if(!r.length)return!1;let g=e.state.phrase("replaced $ matches",r.length)+".";return e.dispatch({changes:r,effects:EditorView.announce.of(g),userEvent:"input.replace.all"}),!0});function createSearchPanel(e){return e.state.facet(searchConfigFacet).createPanel(e)}function defaultQuery(e,n){var r,g,y,k,$;let V=e.selection.main,L=V.empty||V.to>V.from+100?"":e.sliceDoc(V.from,V.to);if(n&&!L)return n;let z=e.facet(searchConfigFacet);return new SearchQuery({search:((r=n?.literal)!==null&&r!==void 0?r:z.literal)?L:L.replace(/\n/g,"\\n"),caseSensitive:(g=n?.caseSensitive)!==null&&g!==void 0?g:z.caseSensitive,literal:(y=n?.literal)!==null&&y!==void 0?y:z.literal,regexp:(k=n?.regexp)!==null&&k!==void 0?k:z.regexp,wholeWord:($=n?.wholeWord)!==null&&$!==void 0?$:z.wholeWord})}function getSearchInput(e){let n=getPanel(e,createSearchPanel);return n&&n.dom.querySelector("[main-field]")}function selectSearchInput(e){let n=getSearchInput(e);n&&n==e.root.activeElement&&n.select()}const openSearchPanel=e=>{let n=e.state.field(searchState,!1);if(n&&n.panel){let r=getSearchInput(e);if(r&&r!=e.root.activeElement){let g=defaultQuery(e.state,n.query.spec);g.valid&&e.dispatch({effects:setSearchQuery.of(g)}),r.focus(),r.select()}}else e.dispatch({effects:[togglePanel$1.of(!0),n?setSearchQuery.of(defaultQuery(e.state,n.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=e=>{let n=e.state.field(searchState,!1);if(!n||!n.panel)return!1;let r=getPanel(e,createSearchPanel);return r&&r.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:togglePanel$1.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Mod-Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor(n){this.view=n;let r=this.query=n.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:r.search,placeholder:phrase(n,"Find"),"aria-label":phrase(n,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:r.replace,placeholder:phrase(n,"Replace"),"aria-label":phrase(n,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:r.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:r.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:r.wholeWord,onchange:this.commit});function g(y,k,$){return crelt("button",{class:"cm-button",name:y,onclick:k,type:"button"},$)}this.dom=crelt("div",{onkeydown:y=>this.keydown(y),class:"cm-search"},[this.searchField,g("next",()=>findNext(n),[phrase(n,"next")]),g("prev",()=>findPrevious(n),[phrase(n,"previous")]),g("select",()=>selectMatches(n),[phrase(n,"all")]),crelt("label",null,[this.caseField,phrase(n,"match case")]),crelt("label",null,[this.reField,phrase(n,"regexp")]),crelt("label",null,[this.wordField,phrase(n,"by word")]),...n.state.readOnly?[]:[crelt("br"),this.replaceField,g("replace",()=>replaceNext(n),[phrase(n,"replace")]),g("replaceAll",()=>replaceAll(n),[phrase(n,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(n),"aria-label":phrase(n,"close"),type:"button"},[""])])}commit(){let n=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});n.eq(this.query)||(this.query=n,this.view.dispatch({effects:setSearchQuery.of(n)}))}keydown(n){runScopeHandlers(this.view,n,"search-panel")?n.preventDefault():n.keyCode==13&&n.target==this.searchField?(n.preventDefault(),(n.shiftKey?findPrevious:findNext)(this.view)):n.keyCode==13&&n.target==this.replaceField&&(n.preventDefault(),replaceNext(this.view))}update(n){for(let r of n.transactions)for(let g of r.effects)g.is(setSearchQuery)&&!g.value.eq(this.query)&&this.setQuery(g.value)}setQuery(n){this.query=n,this.searchField.value=n.search,this.replaceField.value=n.replace,this.caseField.checked=n.caseSensitive,this.reField.checked=n.regexp,this.wordField.checked=n.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(e,n){return e.state.phrase(n)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(e,{from:n,to:r}){let g=e.state.doc.lineAt(n),y=e.state.doc.lineAt(r).to,k=Math.max(g.from,n-AnnounceMargin),$=Math.min(y,r+AnnounceMargin),V=e.state.sliceDoc(k,$);if(k!=g.from){for(let L=0;L<AnnounceMargin;L++)if(!Break.test(V[L+1])&&Break.test(V[L])){V=V.slice(L);break}}if($!=y){for(let L=V.length-1;L>V.length-AnnounceMargin;L--)if(!Break.test(V[L-1])&&Break.test(V[L])){V=V.slice(0,L);break}}return EditorView.announce.of(`${e.state.phrase("current match")}. ${V} ${e.state.phrase("on line")} ${g.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.low(searchHighlighter),baseTheme$2];class CompletionContext{constructor(n,r,g,y){this.state=n,this.pos=r,this.explicit=g,this.view=y,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(n){let r=syntaxTree(this.state).resolveInner(this.pos,-1);for(;r&&n.indexOf(r.name)<0;)r=r.parent;return r?{from:r.from,to:this.pos,text:this.state.sliceDoc(r.from,this.pos),type:r.type}:null}matchBefore(n){let r=this.state.doc.lineAt(this.pos),g=Math.max(r.from,this.pos-250),y=r.text.slice(g-r.from,this.pos-r.from),k=y.search(ensureAnchor(n,!1));return k<0?null:{from:g+k,to:this.pos,text:y.slice(k)}}get aborted(){return this.abortListeners==null}addEventListener(n,r,g){n=="abort"&&this.abortListeners&&(this.abortListeners.push(r),g&&g.onDocChange&&(this.abortOnDocChange=!0))}}function toSet(e){let n=Object.keys(e).join(""),r=/\w/.test(n);return r&&(n=n.replace(/\w/g,"")),`[${r?"\\w":""}${n.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(e){let n=Object.create(null),r=Object.create(null);for(let{label:y}of e){n[y[0]]=!0;for(let k=1;k<y.length;k++)r[y[k]]=!0}let g=toSet(n)+toSet(r)+"*$";return[new RegExp("^"+g),new RegExp(g)]}function completeFromList(e){let n=e.map(y=>typeof y=="string"?{label:y}:y),[r,g]=n.every(y=>/^\w+$/.test(y.label))?[/\w*$/,/\w+$/]:prefixMatch(n);return y=>{let k=y.matchBefore(g);return k||y.explicit?{from:k?k.from:y.pos,options:n,validFor:r}:null}}function ifNotIn(e,n){return r=>{for(let g=syntaxTree(r.state).resolveInner(r.pos,-1);g;g=g.parent){if(e.indexOf(g.name)>-1)return null;if(g.type.isTop)break}return n(r)}}class Option{constructor(n,r,g,y){this.completion=n,this.source=r,this.match=g,this.score=y}}function cur(e){return e.selection.main.from}function ensureAnchor(e,n){var r;let{source:g}=e,y=n&&g[0]!="^",k=g[g.length-1]!="$";return!y&&!k?e:new RegExp(`${y?"^":""}(?:${g})${k?"$":""}`,(r=e.flags)!==null&&r!==void 0?r:e.ignoreCase?"i":"")}const pickedCompletion=Annotation.define();function insertCompletionText(e,n,r,g){let{main:y}=e.selection,k=r-y.from,$=g-y.from;return Object.assign(Object.assign({},e.changeByRange(V=>{if(V!=y&&r!=g&&e.sliceDoc(V.from+k,V.from+$)!=e.sliceDoc(r,g))return{range:V};let L=e.toText(n);return{changes:{from:V.from+k,to:g==y.from?V.to:V.from+$,insert:L},range:EditorSelection.cursor(V.from+k+L.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const SourceCache=new WeakMap;function asSource(e){if(!Array.isArray(e))return e;let n=SourceCache.get(e);return n||SourceCache.set(e,n=completeFromList(e)),n}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define();class FuzzyMatcher{constructor(n){this.pattern=n,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let r=0;r<n.length;){let g=codePointAt$1(n,r),y=codePointSize(g);this.chars.push(g);let k=n.slice(r,r+y),$=k.toUpperCase();this.folded.push(codePointAt$1($==k?k.toLowerCase():$,0)),r+=y}this.astral=n.length!=this.chars.length}ret(n,r){return this.score=n,this.matched=r,this}match(n){if(this.pattern.length==0)return this.ret(-100,[]);if(n.length<this.pattern.length)return null;let{chars:r,folded:g,any:y,precise:k,byWord:$}=this;if(r.length==1){let _e=codePointAt$1(n,0),xe=codePointSize(_e),Ne=xe==n.length?0:-100;if(_e!=r[0])if(_e==g[0])Ne+=-200;else return null;return this.ret(Ne,[0,xe])}let V=n.indexOf(this.pattern);if(V==0)return this.ret(n.length==this.pattern.length?0:-100,[0,this.pattern.length]);let L=r.length,z=0;if(V<0){for(let _e=0,xe=Math.min(n.length,200);_e<xe&&z<L;){let Ne=codePointAt$1(n,_e);(Ne==r[z]||Ne==g[z])&&(y[z++]=_e),_e+=codePointSize(Ne)}if(z<L)return null}let j=0,ae=0,oe=!1,re=0,ue=-1,le=-1,de=/[a-z]/.test(n),he=!0;for(let _e=0,xe=Math.min(n.length,200),Ne=0;_e<xe&&ae<L;){let $e=codePointAt$1(n,_e);V<0&&(j<L&&$e==r[j]&&(k[j++]=_e),re<L&&($e==r[re]||$e==g[re]?(re==0&&(ue=_e),le=_e+1,re++):re=0));let Ce,Ie=$e<255?$e>=48&&$e<=57||$e>=97&&$e<=122?2:$e>=65&&$e<=90?1:0:(Ce=fromCodePoint($e))!=Ce.toLowerCase()?1:Ce!=Ce.toUpperCase()?2:0;(!_e||Ie==1&&de||Ne==0&&Ie!=0)&&(r[ae]==$e||g[ae]==$e&&(oe=!0)?$[ae++]=_e:$.length&&(he=!1)),Ne=Ie,_e+=codePointSize($e)}return ae==L&&$[0]==0&&he?this.result(-100+(oe?-200:0),$,n):re==L&&ue==0?this.ret(-200-n.length+(le==n.length?0:-100),[0,le]):V>-1?this.ret(-700-n.length,[V,V+this.pattern.length]):re==L?this.ret(-900-n.length,[ue,le]):ae==L?this.result(-100+(oe?-200:0)+-700+(he?0:-1100),$,n):r.length==2?null:this.result((y[0]?-700:0)+-200+-1100,y,n)}result(n,r,g){let y=[],k=0;for(let $ of r){let V=$+(this.astral?codePointSize(codePointAt$1(g,$)):1);k&&y[k-1]==$?y[k-1]=V:(y[k++]=$,y[k++]=V)}return this.ret(n-g.length,y)}}class StrictMatcher{constructor(n){this.pattern=n,this.matched=[],this.score=0,this.folded=n.toLowerCase()}match(n){if(n.length<this.pattern.length)return null;let r=n.slice(0,this.pattern.length),g=r==this.pattern?0:r.toLowerCase()==this.folded?-200:null;return g==null?null:(this.matched=[0,r.length],this.score=g+(n.length==this.pattern.length?0:-100),this)}}const completionConfig=Facet.define({combine(e){return combineConfig(e,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,filterStrict:!1,compareCompletions:(n,r)=>n.label.localeCompare(r.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(n,r)=>n&&r,closeOnBlur:(n,r)=>n&&r,icons:(n,r)=>n&&r,tooltipClass:(n,r)=>g=>joinClass(n(g),r(g)),optionClass:(n,r)=>g=>joinClass(n(g),r(g)),addToOptions:(n,r)=>n.concat(r),filterStrict:(n,r)=>n||r})}});function joinClass(e,n){return e?n?e+" "+n:e:n}function defaultPositionInfo(e,n,r,g,y,k){let $=e.textDirection==Direction.RTL,V=$,L=!1,z="top",j,ae,oe=n.left-y.left,re=y.right-n.right,ue=g.right-g.left,le=g.bottom-g.top;if(V&&oe<Math.min(ue,re)?V=!1:!V&&re<Math.min(ue,oe)&&(V=!0),ue<=(V?oe:re))j=Math.max(y.top,Math.min(r.top,y.bottom-le))-n.top,ae=Math.min(400,V?oe:re);else{L=!0,ae=Math.min(400,($?n.right:y.right-n.left)-30);let _e=y.bottom-n.bottom;_e>=le||_e>n.top?j=r.bottom-n.top:(z="bottom",j=n.bottom-r.top)}let de=(n.bottom-n.top)/k.offsetHeight,he=(n.right-n.left)/k.offsetWidth;return{style:`${z}: ${j/de}px; max-width: ${ae/he}px`,class:"cm-completionInfo-"+(L?$?"left-narrow":"right-narrow":V?"left":"right")}}function optionContent(e){let n=e.addToOptions.slice();return e.icons&&n.push({render(r){let g=document.createElement("div");return g.classList.add("cm-completionIcon"),r.type&&g.classList.add(...r.type.split(/\s+/g).map(y=>"cm-completionIcon-"+y)),g.setAttribute("aria-hidden","true"),g},position:20}),n.push({render(r,g,y,k){let $=document.createElement("span");$.className="cm-completionLabel";let V=r.displayLabel||r.label,L=0;for(let z=0;z<k.length;){let j=k[z++],ae=k[z++];j>L&&$.appendChild(document.createTextNode(V.slice(L,j)));let oe=$.appendChild(document.createElement("span"));oe.appendChild(document.createTextNode(V.slice(j,ae))),oe.className="cm-completionMatchedText",L=ae}return L<V.length&&$.appendChild(document.createTextNode(V.slice(L))),$},position:50},{render(r){if(!r.detail)return null;let g=document.createElement("span");return g.className="cm-completionDetail",g.textContent=r.detail,g},position:80}),n.sort((r,g)=>r.position-g.position).map(r=>r.render)}function rangeAroundSelected(e,n,r){if(e<=r)return{from:0,to:e};if(n<0&&(n=0),n<=e>>1){let y=Math.floor(n/r);return{from:y*r,to:(y+1)*r}}let g=Math.floor((e-n)/r);return{from:e-(g+1)*r,to:e-g*r}}class CompletionTooltip{constructor(n,r,g){this.view=n,this.stateField=r,this.applyCompletion=g,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:L=>this.placeInfo(L),key:this},this.space=null,this.currentClass="";let y=n.state.field(r),{options:k,selected:$}=y.open,V=n.state.facet(completionConfig);this.optionContent=optionContent(V),this.optionClass=V.optionClass,this.tooltipClass=V.tooltipClass,this.range=rangeAroundSelected(k.length,$,V.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(n.state),this.dom.addEventListener("mousedown",L=>{let{options:z}=n.state.field(r).open;for(let j=L.target,ae;j&&j!=this.dom;j=j.parentNode)if(j.nodeName=="LI"&&(ae=/-(\d+)$/.exec(j.id))&&+ae[1]<z.length){this.applyCompletion(n,z[+ae[1]]),L.preventDefault();return}}),this.dom.addEventListener("focusout",L=>{let z=n.state.field(this.stateField,!1);z&&z.tooltip&&n.state.facet(completionConfig).closeOnBlur&&L.relatedTarget!=n.contentDOM&&n.dispatch({effects:closeCompletionEffect.of(null)})}),this.showOptions(k,y.id)}mount(){this.updateSel()}showOptions(n,r){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n,r,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(n){var r;let g=n.state.field(this.stateField),y=n.startState.field(this.stateField);if(this.updateTooltipClass(n.state),g!=y){let{options:k,selected:$,disabled:V}=g.open;(!y.open||y.open.options!=k)&&(this.range=rangeAroundSelected(k.length,$,n.state.facet(completionConfig).maxRenderedOptions),this.showOptions(k,g.id)),this.updateSel(),V!=((r=y.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!V)}}updateTooltipClass(n){let r=this.tooltipClass(n);if(r!=this.currentClass){for(let g of this.currentClass.split(" "))g&&this.dom.classList.remove(g);for(let g of r.split(" "))g&&this.dom.classList.add(g);this.currentClass=r}}positioned(n){this.space=n,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let n=this.view.state.field(this.stateField),r=n.open;if((r.selected>-1&&r.selected<this.range.from||r.selected>=this.range.to)&&(this.range=rangeAroundSelected(r.options.length,r.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.showOptions(r.options,n.id)),this.updateSelectedOption(r.selected)){this.destroyInfo();let{completion:g}=r.options[r.selected],{info:y}=g;if(!y)return;let k=typeof y=="string"?document.createTextNode(y):y(g);if(!k)return;"then"in k?k.then($=>{$&&this.view.state.field(this.stateField,!1)==n&&this.addInfoPane($,g)}).catch($=>logException(this.view.state,$,"completion info")):this.addInfoPane(k,g)}}addInfoPane(n,r){this.destroyInfo();let g=this.info=document.createElement("div");if(g.className="cm-tooltip cm-completionInfo",n.nodeType!=null)g.appendChild(n),this.infoDestroy=null;else{let{dom:y,destroy:k}=n;g.appendChild(y),this.infoDestroy=k||null}this.dom.appendChild(g),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(n){let r=null;for(let g=this.list.firstChild,y=this.range.from;g;g=g.nextSibling,y++)g.nodeName!="LI"||!g.id?y--:y==n?g.hasAttribute("aria-selected")||(g.setAttribute("aria-selected","true"),r=g):g.hasAttribute("aria-selected")&&g.removeAttribute("aria-selected");return r&&scrollIntoView(this.list,r),r}measureInfo(){let n=this.dom.querySelector("[aria-selected]");if(!n||!this.info)return null;let r=this.dom.getBoundingClientRect(),g=this.info.getBoundingClientRect(),y=n.getBoundingClientRect(),k=this.space;if(!k){let $=this.dom.ownerDocument.defaultView||window;k={left:0,top:0,right:$.innerWidth,bottom:$.innerHeight}}return y.top>Math.min(k.bottom,r.bottom)-10||y.bottom<Math.max(k.top,r.top)+10?null:this.view.state.facet(completionConfig).positionInfo(this.view,r,y,g,k,this.dom)}placeInfo(n){this.info&&(n?(n.style&&(this.info.style.cssText=n.style),this.info.className="cm-tooltip cm-completionInfo "+(n.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(n,r,g){const y=document.createElement("ul");y.id=r,y.setAttribute("role","listbox"),y.setAttribute("aria-expanded","true"),y.setAttribute("aria-label",this.view.state.phrase("Completions"));let k=null;for(let $=g.from;$<g.to;$++){let{completion:V,match:L}=n[$],{section:z}=V;if(z){let oe=typeof z=="string"?z:z.name;if(oe!=k&&($>g.from||g.from==0))if(k=oe,typeof z!="string"&&z.header)y.appendChild(z.header(z));else{let re=y.appendChild(document.createElement("completion-section"));re.textContent=oe}}const j=y.appendChild(document.createElement("li"));j.id=r+"-"+$,j.setAttribute("role","option");let ae=this.optionClass(V);ae&&(j.className=ae);for(let oe of this.optionContent){let re=oe(V,this.view.state,this.view,L);re&&j.appendChild(re)}}return g.from&&y.classList.add("cm-completionListIncompleteTop"),g.to<n.length&&y.classList.add("cm-completionListIncompleteBottom"),y}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function completionTooltip(e,n){return r=>new CompletionTooltip(r,e,n)}function scrollIntoView(e,n){let r=e.getBoundingClientRect(),g=n.getBoundingClientRect(),y=r.height/e.offsetHeight;g.top<r.top?e.scrollTop-=(r.top-g.top)/y:g.bottom>r.bottom&&(e.scrollTop+=(g.bottom-r.bottom)/y)}function score(e){return(e.boost||0)*100+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}function sortOptions(e,n){let r=[],g=null,y=z=>{r.push(z);let{section:j}=z.completion;if(j){g||(g=[]);let ae=typeof j=="string"?j:j.name;g.some(oe=>oe.name==ae)||g.push(typeof j=="string"?{name:ae}:j)}},k=n.facet(completionConfig);for(let z of e)if(z.hasResult()){let j=z.result.getMatch;if(z.result.filter===!1)for(let ae of z.result.options)y(new Option(ae,z.source,j?j(ae):[],1e9-r.length));else{let ae=n.sliceDoc(z.from,z.to),oe,re=k.filterStrict?new StrictMatcher(ae):new FuzzyMatcher(ae);for(let ue of z.result.options)if(oe=re.match(ue.label)){let le=ue.displayLabel?j?j(ue,oe.matched):[]:oe.matched;y(new Option(ue,z.source,le,oe.score+(ue.boost||0)))}}}if(g){let z=Object.create(null),j=0,ae=(oe,re)=>{var ue,le;return((ue=oe.rank)!==null&&ue!==void 0?ue:1e9)-((le=re.rank)!==null&&le!==void 0?le:1e9)||(oe.name<re.name?-1:1)};for(let oe of g.sort(ae))j-=1e5,z[oe.name]=j;for(let oe of r){let{section:re}=oe.completion;re&&(oe.score+=z[typeof re=="string"?re:re.name])}}let $=[],V=null,L=k.compareCompletions;for(let z of r.sort((j,ae)=>ae.score-j.score||L(j.completion,ae.completion))){let j=z.completion;!V||V.label!=j.label||V.detail!=j.detail||V.type!=null&&j.type!=null&&V.type!=j.type||V.apply!=j.apply||V.boost!=j.boost?$.push(z):score(z.completion)>score(V)&&($[$.length-1]=z),V=z.completion}return $}class CompletionDialog{constructor(n,r,g,y,k,$){this.options=n,this.attrs=r,this.tooltip=g,this.timestamp=y,this.selected=k,this.disabled=$}setSelected(n,r){return n==this.selected||n>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(r,n),this.tooltip,this.timestamp,n,this.disabled)}static build(n,r,g,y,k,$){if(y&&!$&&n.some(z=>z.isPending))return y.setDisabled();let V=sortOptions(n,r);if(!V.length)return y&&n.some(z=>z.isPending)?y.setDisabled():null;let L=r.facet(completionConfig).selectOnOpen?0:-1;if(y&&y.selected!=L&&y.selected!=-1){let z=y.options[y.selected].completion;for(let j=0;j<V.length;j++)if(V[j].completion==z){L=j;break}}return new CompletionDialog(V,makeAttrs(g,L),{pos:n.reduce((z,j)=>j.hasResult()?Math.min(z,j.from):z,1e8),create:createTooltip,above:k.aboveCursor},y?y.timestamp:Date.now(),L,!1)}map(n){return new CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:n.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new CompletionDialog(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class CompletionState{constructor(n,r,g){this.active=n,this.id=r,this.open=g}static start(){return new CompletionState(none,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(n){let{state:r}=n,g=r.facet(completionConfig),k=(g.override||r.languageDataAt("autocomplete",cur(r)).map(asSource)).map(L=>(this.active.find(j=>j.source==L)||new ActiveSource(L,this.active.some(j=>j.state!=0)?1:0)).update(n,g));k.length==this.active.length&&k.every((L,z)=>L==this.active[z])&&(k=this.active);let $=this.open,V=n.effects.some(L=>L.is(setActiveEffect));$&&n.docChanged&&($=$.map(n.changes)),n.selection||k.some(L=>L.hasResult()&&n.changes.touchesRange(L.from,L.to))||!sameResults(k,this.active)||V?$=CompletionDialog.build(k,r,this.id,$,g,V):$&&$.disabled&&!k.some(L=>L.isPending)&&($=null),!$&&k.every(L=>!L.isPending)&&k.some(L=>L.hasResult())&&(k=k.map(L=>L.hasResult()?new ActiveSource(L.source,0):L));for(let L of n.effects)L.is(setSelectedEffect)&&($=$&&$.setSelected(L.value,this.id));return k==this.active&&$==this.open?this:new CompletionState(k,this.id,$)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?baseAttrs:noAttrs}}function sameResults(e,n){if(e==n)return!0;for(let r=0,g=0;;){for(;r<e.length&&!e[r].hasResult();)r++;for(;g<n.length&&!n[g].hasResult();)g++;let y=r==e.length,k=g==n.length;if(y||k)return y==k;if(e[r++].result!=n[g++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"},noAttrs={};function makeAttrs(e,n){let r={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return n>-1&&(r["aria-activedescendant"]=e+"-"+n),r}const none=[];function getUpdateType(e,n){if(e.isUserEvent("input.complete")){let g=e.annotation(pickedCompletion);if(g&&n.activateOnCompletion(g))return 12}let r=e.isUserEvent("input.type");return r&&n.activateOnTyping?5:r?1:e.isUserEvent("delete.backward")?2:e.selection?8:e.docChanged?16:0}class ActiveSource{constructor(n,r,g=!1){this.source=n,this.state=r,this.explicit=g}hasResult(){return!1}get isPending(){return this.state==1}update(n,r){let g=getUpdateType(n,r),y=this;(g&8||g&16&&this.touches(n))&&(y=new ActiveSource(y.source,0)),g&4&&y.state==0&&(y=new ActiveSource(this.source,1)),y=y.updateFor(n,g);for(let k of n.effects)if(k.is(startCompletionEffect))y=new ActiveSource(y.source,1,k.value);else if(k.is(closeCompletionEffect))y=new ActiveSource(y.source,0);else if(k.is(setActiveEffect))for(let $ of k.value)$.source==y.source&&(y=$);return y}updateFor(n,r){return this.map(n.changes)}map(n){return this}touches(n){return n.changes.touchesRange(cur(n.state))}}class ActiveResult extends ActiveSource{constructor(n,r,g,y,k,$){super(n,3,r),this.limit=g,this.result=y,this.from=k,this.to=$}hasResult(){return!0}updateFor(n,r){var g;if(!(r&3))return this.map(n.changes);let y=this.result;y.map&&!n.changes.empty&&(y=y.map(y,n.changes));let k=n.changes.mapPos(this.from),$=n.changes.mapPos(this.to,1),V=cur(n.state);if(V>$||!y||r&2&&(cur(n.startState)==this.from||V<this.limit))return new ActiveSource(this.source,r&4?1:0);let L=n.changes.mapPos(this.limit);return checkValid(y.validFor,n.state,k,$)?new ActiveResult(this.source,this.explicit,L,y,k,$):y.update&&(y=y.update(y,k,$,new CompletionContext(n.state,V,!1)))?new ActiveResult(this.source,this.explicit,L,y,y.from,(g=y.to)!==null&&g!==void 0?g:cur(n.state)):new ActiveSource(this.source,1,this.explicit)}map(n){return n.empty?this:(this.result.map?this.result.map(this.result,n):this.result)?new ActiveResult(this.source,this.explicit,n.mapPos(this.limit),this.result,n.mapPos(this.from),n.mapPos(this.to,1)):new ActiveSource(this.source,0)}touches(n){return n.changes.touchesRange(this.from,this.to)}}function checkValid(e,n,r,g){if(!e)return!1;let y=n.sliceDoc(r,g);return typeof e=="function"?e(y,r,g,n):ensureAnchor(e,!0).test(y)}const setActiveEffect=StateEffect.define({map(e,n){return e.map(r=>r.map(n))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(e,n){return e.update(n)},provide:e=>[showTooltip.from(e,n=>n.tooltip),EditorView.contentAttributes.from(e,n=>n.attrs)]});function applyCompletion(e,n){const r=n.completion.apply||n.completion.label;let g=e.state.field(completionState).active.find(y=>y.source==n.source);return g instanceof ActiveResult?(typeof r=="string"?e.dispatch(Object.assign(Object.assign({},insertCompletionText(e.state,r,g.from,g.to)),{annotations:pickedCompletion.of(n.completion)})):r(e,n.completion,g.from,g.to),!0):!1}const createTooltip=completionTooltip(completionState,applyCompletion);function moveCompletionSelection(e,n="option"){return r=>{let g=r.state.field(completionState,!1);if(!g||!g.open||g.open.disabled||Date.now()-g.open.timestamp<r.state.facet(completionConfig).interactionDelay)return!1;let y=1,k;n=="page"&&(k=getTooltip(r,g.open.tooltip))&&(y=Math.max(2,Math.floor(k.dom.offsetHeight/k.dom.querySelector("li").offsetHeight)-1));let{length:$}=g.open.options,V=g.open.selected>-1?g.open.selected+y*(e?1:-1):e?0:$-1;return V<0?V=n=="page"?0:$-1:V>=$&&(V=n=="page"?$-1:0),r.dispatch({effects:setSelectedEffect.of(V)}),!0}}const acceptCompletion=e=>{let n=e.state.field(completionState,!1);return e.state.readOnly||!n||!n.open||n.open.selected<0||n.open.disabled||Date.now()-n.open.timestamp<e.state.facet(completionConfig).interactionDelay?!1:applyCompletion(e,n.open.options[n.open.selected])},startCompletion=e=>e.state.field(completionState,!1)?(e.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=e=>{let n=e.state.field(completionState,!1);return!n||!n.active.some(r=>r.state!=0)?!1:(e.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(n,r){this.active=n,this.context=r,this.time=Date.now(),this.updates=[],this.done=void 0}}const MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let n of e.state.field(completionState).active)n.isPending&&this.startQuery(n)}update(e){let n=e.state.field(completionState),r=e.state.facet(completionConfig);if(!e.selectionSet&&!e.docChanged&&e.startState.field(completionState)==n)return;let g=e.transactions.some(k=>{let $=getUpdateType(k,r);return $&8||(k.selection||k.docChanged)&&!($&3)});for(let k=0;k<this.running.length;k++){let $=this.running[k];if(g||$.context.abortOnDocChange&&e.docChanged||$.updates.length+e.transactions.length>MaxUpdateCount&&Date.now()-$.time>MinAbortTime){for(let V of $.context.abortListeners)try{V()}catch(L){logException(this.view.state,L)}$.context.abortListeners=null,this.running.splice(k--,1)}else $.updates.push(...e.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),e.transactions.some(k=>k.effects.some($=>$.is(startCompletionEffect)))&&(this.pendingStart=!0);let y=this.pendingStart?50:r.activateOnTypingDelay;if(this.debounceUpdate=n.active.some(k=>k.isPending&&!this.running.some($=>$.active.source==k.source))?setTimeout(()=>this.startUpdate(),y):-1,this.composing!=0)for(let k of e.transactions)k.isUserEvent("input.type")?this.composing=2:this.composing==2&&k.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:e}=this.view,n=e.field(completionState);for(let r of n.active)r.isPending&&!this.running.some(g=>g.active.source==r.source)&&this.startQuery(r);this.running.length&&n.open&&n.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}startQuery(e){let{state:n}=this.view,r=cur(n),g=new CompletionContext(n,r,e.explicit,this.view),y=new RunningQuery(e,g);this.running.push(y),Promise.resolve(e.source(g)).then(k=>{y.context.aborted||(y.done=k||null,this.scheduleAccept())},k=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,k)})}scheduleAccept(){this.running.every(e=>e.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let n=[],r=this.view.state.facet(completionConfig),g=this.view.state.field(completionState);for(let y=0;y<this.running.length;y++){let k=this.running[y];if(k.done===void 0)continue;if(this.running.splice(y--,1),k.done){let V=cur(k.updates.length?k.updates[0].startState:this.view.state),L=Math.min(V,k.done.from+(k.active.explicit?0:1)),z=new ActiveResult(k.active.source,k.active.explicit,L,k.done,k.done.from,(e=k.done.to)!==null&&e!==void 0?e:V);for(let j of k.updates)z=z.update(j,r);if(z.hasResult()){n.push(z);continue}}let $=g.active.find(V=>V.source==k.active.source);if($&&$.isPending)if(k.done==null){let V=new ActiveSource(k.active.source,0);for(let L of k.updates)V=V.update(L,r);V.isPending||n.push(V)}else this.startQuery($)}(n.length||g.open&&g.open.disabled)&&this.view.dispatch({effects:setActiveEffect.of(n)})}},{eventHandlers:{blur(e){let n=this.view.state.field(completionState,!1);if(n&&n.tooltip&&this.view.state.facet(completionConfig).closeOnBlur){let r=n.open&&getTooltip(this.view,n.open.tooltip);(!r||!r.dom.contains(e.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:closeCompletionEffect.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),windows=typeof navigator=="object"&&/Win/.test(navigator.platform),commitCharacters=Prec.highest(EditorView.domEventHandlers({keydown(e,n){let r=n.state.field(completionState,!1);if(!r||!r.open||r.open.disabled||r.open.selected<0||e.key.length>1||e.ctrlKey&&!(windows&&e.altKey)||e.metaKey)return!1;let g=r.open.options[r.open.selected],y=r.active.find($=>$.source==g.source),k=g.completion.commitCharacters||y.result.commitCharacters;return k&&k.indexOf(e.key)>-1&&applyCompletion(n,g),!1}})),baseTheme$1=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(n,r,g,y){this.field=n,this.line=r,this.from=g,this.to=y}}class FieldRange{constructor(n,r,g){this.field=n,this.from=r,this.to=g}map(n){let r=n.mapPos(this.from,-1,MapMode.TrackDel),g=n.mapPos(this.to,1,MapMode.TrackDel);return r==null||g==null?null:new FieldRange(this.field,r,g)}}class Snippet{constructor(n,r){this.lines=n,this.fieldPositions=r}instantiate(n,r){let g=[],y=[r],k=n.doc.lineAt(r),$=/^\s*/.exec(k.text)[0];for(let L of this.lines){if(g.length){let z=$,j=/^\t*/.exec(L)[0].length;for(let ae=0;ae<j;ae++)z+=n.facet(indentUnit);y.push(r+z.length-j),L=z+L.slice(j)}g.push(L),r+=L.length+1}let V=this.fieldPositions.map(L=>new FieldRange(L.field,y[L.line]+L.from,y[L.line]+L.to));return{text:g,ranges:V}}static parse(n){let r=[],g=[],y=[],k;for(let $ of n.split(/\r\n?|\n/)){for(;k=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec($);){let V=k[1]?+k[1]:null,L=k[2]||k[3]||"",z=-1,j=L.replace(/\\[{}]/g,ae=>ae[1]);for(let ae=0;ae<r.length;ae++)(V!=null?r[ae].seq==V:j&&r[ae].name==j)&&(z=ae);if(z<0){let ae=0;for(;ae<r.length&&(V==null||r[ae].seq!=null&&r[ae].seq<V);)ae++;r.splice(ae,0,{seq:V,name:j}),z=ae;for(let oe of y)oe.field>=z&&oe.field++}y.push(new FieldPos(z,g.length,k.index,k.index+j.length)),$=$.slice(0,k.index)+L+$.slice(k.index+k[0].length)}$=$.replace(/\\([{}])/g,(V,L,z)=>{for(let j of y)j.line==g.length&&j.from>z&&(j.from--,j.to--);return L}),g.push($)}return new Snippet(g,y)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(n,r){this.ranges=n,this.active=r,this.deco=Decoration.set(n.map(g=>(g.from==g.to?fieldMarker:fieldRange).range(g.from,g.to)))}map(n){let r=[];for(let g of this.ranges){let y=g.map(n);if(!y)return null;r.push(y)}return new ActiveSnippet(r,this.active)}selectionInsideField(n){return n.ranges.every(r=>this.ranges.some(g=>g.field==this.active&&g.from<=r.from&&g.to>=r.to))}}const setActive=StateEffect.define({map(e,n){return e&&e.map(n)}}),moveToField=StateEffect.define(),snippetState=StateField.define({create(){return null},update(e,n){for(let r of n.effects){if(r.is(setActive))return r.value;if(r.is(moveToField)&&e)return new ActiveSnippet(e.ranges,r.value)}return e&&n.docChanged&&(e=e.map(n.changes)),e&&n.selection&&!e.selectionInsideField(n.selection)&&(e=null),e},provide:e=>EditorView.decorations.from(e,n=>n?n.deco:Decoration.none)});function fieldSelection(e,n){return EditorSelection.create(e.filter(r=>r.field==n).map(r=>EditorSelection.range(r.from,r.to)))}function snippet(e){let n=Snippet.parse(e);return(r,g,y,k)=>{let{text:$,ranges:V}=n.instantiate(r.state,y),{main:L}=r.state.selection,z={changes:{from:y,to:k==L.from?L.to:k,insert:Text.of($)},scrollIntoView:!0,annotations:g?[pickedCompletion.of(g),Transaction.userEvent.of("input.complete")]:void 0};if(V.length&&(z.selection=fieldSelection(V,0)),V.some(j=>j.field>0)){let j=new ActiveSnippet(V,0),ae=z.effects=[setActive.of(j)];r.state.field(snippetState,!1)===void 0&&ae.push(StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme$1]))}r.dispatch(r.state.update(z))}}function moveField(e){return({state:n,dispatch:r})=>{let g=n.field(snippetState,!1);if(!g||e<0&&g.active==0)return!1;let y=g.active+e,k=e>0&&!g.ranges.some($=>$.field==y+e);return r(n.update({selection:fieldSelection(g.ranges,y),effects:setActive.of(k?null:new ActiveSnippet(g.ranges,y)),scrollIntoView:!0})),!0}}const clearSnippet=({state:e,dispatch:n})=>e.field(snippetState,!1)?(n(e.update({effects:setActive.of(null)})),!0):!1,nextSnippetField=moveField(1),prevSnippetField=moveField(-1),defaultSnippetKeymap=[{key:"Tab",run:nextSnippetField,shift:prevSnippetField},{key:"Escape",run:clearSnippet}],snippetKeymap=Facet.define({combine(e){return e.length?e[0]:defaultSnippetKeymap}}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],e=>e.facet(snippetKeymap)));function snippetCompletion(e,n){return Object.assign(Object.assign({},n),{apply:snippet(e)})}const snippetPointerHandler=EditorView.domEventHandlers({mousedown(e,n){let r=n.state.field(snippetState,!1),g;if(!r||(g=n.posAtCoords({x:e.clientX,y:e.clientY}))==null)return!1;let y=r.ranges.find(k=>k.from<=g&&k.to>=g);return!y||y.field==r.active?!1:(n.dispatch({selection:fieldSelection(r.ranges,y.field),effects:setActive.of(r.ranges.some(k=>k.field>y.field)?new ActiveSnippet(r.ranges,y.field):null),scrollIntoView:!0}),!0)}}),defaults={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(e,n){let r=n.mapPos(e,-1,MapMode.TrackAfter);return r??void 0}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(e,n){if(e=e.map(n.changes),n.selection){let r=n.state.doc.lineAt(n.selection.main.head);e=e.update({filter:g=>g>=r.from&&g<=r.to})}for(let r of n.effects)r.is(closeBracketEffect)&&(e=e.update({add:[closedBracket.range(r.value,r.value+1)]}));return e}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(e){for(let n=0;n<definedClosing.length;n+=2)if(definedClosing.charCodeAt(n)==e)return definedClosing.charAt(n+1);return fromCodePoint(e<128?e:e+1)}function config$1(e,n){return e.languageDataAt("closeBrackets",n)[0]||defaults}const android$1=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((e,n,r,g)=>{if((android$1?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let y=e.state.selection.main;if(g.length>2||g.length==2&&codePointSize(codePointAt$1(g,0))==1||n!=y.from||r!=y.to)return!1;let k=insertBracket(e.state,g);return k?(e.dispatch(k),!0):!1}),deleteBracketPair=({state:e,dispatch:n})=>{if(e.readOnly)return!1;let g=config$1(e,e.selection.main.head).brackets||defaults.brackets,y=null,k=e.changeByRange($=>{if($.empty){let V=prevChar(e.doc,$.head);for(let L of g)if(L==V&&nextChar(e.doc,$.head)==closing(codePointAt$1(L,0)))return{changes:{from:$.head-L.length,to:$.head+L.length},range:EditorSelection.cursor($.head-L.length)}}return{range:y=$}});return y||n(e.update(k,{scrollIntoView:!0,userEvent:"delete.backward"})),!y},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket(e,n){let r=config$1(e,e.selection.main.head),g=r.brackets||defaults.brackets;for(let y of g){let k=closing(codePointAt$1(y,0));if(n==y)return k==y?handleSame(e,y,g.indexOf(y+y+y)>-1,r):handleOpen(e,y,k,r.before||defaults.before);if(n==k&&closedBracketAt(e,e.selection.main.from))return handleClose(e,y,k)}return null}function closedBracketAt(e,n){let r=!1;return e.field(bracketState).between(0,e.doc.length,g=>{g==n&&(r=!0)}),r}function nextChar(e,n){let r=e.sliceString(n,n+2);return r.slice(0,codePointSize(codePointAt$1(r,0)))}function prevChar(e,n){let r=e.sliceString(n-2,n);return codePointSize(codePointAt$1(r,0))==r.length?r:r.slice(1)}function handleOpen(e,n,r,g){let y=null,k=e.changeByRange($=>{if(!$.empty)return{changes:[{insert:n,from:$.from},{insert:r,from:$.to}],effects:closeBracketEffect.of($.to+n.length),range:EditorSelection.range($.anchor+n.length,$.head+n.length)};let V=nextChar(e.doc,$.head);return!V||/\s/.test(V)||g.indexOf(V)>-1?{changes:{insert:n+r,from:$.head},effects:closeBracketEffect.of($.head+n.length),range:EditorSelection.cursor($.head+n.length)}:{range:y=$}});return y?null:e.update(k,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(e,n,r){let g=null,y=e.changeByRange(k=>k.empty&&nextChar(e.doc,k.head)==r?{changes:{from:k.head,to:k.head+r.length,insert:r},range:EditorSelection.cursor(k.head+r.length)}:g={range:k});return g?null:e.update(y,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(e,n,r,g){let y=g.stringPrefixes||defaults.stringPrefixes,k=null,$=e.changeByRange(V=>{if(!V.empty)return{changes:[{insert:n,from:V.from},{insert:n,from:V.to}],effects:closeBracketEffect.of(V.to+n.length),range:EditorSelection.range(V.anchor+n.length,V.head+n.length)};let L=V.head,z=nextChar(e.doc,L),j;if(z==n){if(nodeStart(e,L))return{changes:{insert:n+n,from:L},effects:closeBracketEffect.of(L+n.length),range:EditorSelection.cursor(L+n.length)};if(closedBracketAt(e,L)){let oe=r&&e.sliceDoc(L,L+n.length*3)==n+n+n?n+n+n:n;return{changes:{from:L,to:L+oe.length,insert:oe},range:EditorSelection.cursor(L+oe.length)}}}else{if(r&&e.sliceDoc(L-2*n.length,L)==n+n&&(j=canStartStringAt(e,L-2*n.length,y))>-1&&nodeStart(e,j))return{changes:{insert:n+n+n+n,from:L},effects:closeBracketEffect.of(L+n.length),range:EditorSelection.cursor(L+n.length)};if(e.charCategorizer(L)(z)!=CharCategory.Word&&canStartStringAt(e,L,y)>-1&&!probablyInString(e,L,n,y))return{changes:{insert:n+n,from:L},effects:closeBracketEffect.of(L+n.length),range:EditorSelection.cursor(L+n.length)}}return{range:k=V}});return k?null:e.update($,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(e,n){let r=syntaxTree(e).resolveInner(n+1);return r.parent&&r.from==n}function probablyInString(e,n,r,g){let y=syntaxTree(e).resolveInner(n,-1),k=g.reduce(($,V)=>Math.max($,V.length),0);for(let $=0;$<5;$++){let V=e.sliceDoc(y.from,Math.min(y.to,y.from+r.length+k)),L=V.indexOf(r);if(!L||L>-1&&g.indexOf(V.slice(0,L))>-1){let j=y.firstChild;for(;j&&j.from==y.from&&j.to-j.from>r.length+L;){if(e.sliceDoc(j.to-r.length,j.to)==r)return!1;j=j.firstChild}return!0}let z=y.to==n&&y.parent;if(!z)break;y=z}return!1}function canStartStringAt(e,n,r){let g=e.charCategorizer(n);if(g(e.sliceDoc(n-1,n))!=CharCategory.Word)return n;for(let y of r){let k=n-y.length;if(e.sliceDoc(k,n)==y&&g(e.sliceDoc(k-1,k))!=CharCategory.Word)return k}return-1}function autocompletion(e={}){return[commitCharacters,completionState,completionConfig.of(e),completionPlugin,completionKeymapExt,baseTheme$1]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{mac:"Alt-`",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],e=>e.facet(completionConfig).defaultKeymap?[completionKeymap]:[]));class SelectedDiagnostic{constructor(n,r,g){this.from=n,this.to=r,this.diagnostic=g}}class LintState{constructor(n,r,g){this.diagnostics=n,this.panel=r,this.selected=g}static init(n,r,g){let y=n,k=g.facet(lintConfig).markerFilter;k&&(y=k(y,g));let $=n.slice().sort((ae,oe)=>ae.from-oe.from||ae.to-oe.to),V=new RangeSetBuilder,L=[],z=0;for(let ae=0;;){let oe=ae==$.length?null:$[ae];if(!oe&&!L.length)break;let re,ue;for(L.length?(re=z,ue=L.reduce((de,he)=>Math.min(de,he.to),oe&&oe.from>re?oe.from:1e8)):(re=oe.from,ue=oe.to,L.push(oe),ae++);ae<$.length;){let de=$[ae];if(de.from==re&&(de.to>de.from||de.to==re))L.push(de),ae++,ue=Math.min(de.to,ue);else{ue=Math.min(de.from,ue);break}}let le=maxSeverity(L);if(L.some(de=>de.from==de.to||de.from==de.to-1&&g.doc.lineAt(de.from).to==de.from))V.add(re,re,Decoration.widget({widget:new DiagnosticWidget(le),diagnostics:L.slice()}));else{let de=L.reduce((he,_e)=>_e.markClass?he+" "+_e.markClass:he,"");V.add(re,ue,Decoration.mark({class:"cm-lintRange cm-lintRange-"+le+de,diagnostics:L.slice(),inclusiveEnd:L.some(he=>he.to>ue)}))}z=ue;for(let de=0;de<L.length;de++)L[de].to<=z&&L.splice(de--,1)}let j=V.finish();return new LintState(j,r,findDiagnostic(j))}}function findDiagnostic(e,n=null,r=0){let g=null;return e.between(r,1e9,(y,k,{spec:$})=>{if(!(n&&$.diagnostics.indexOf(n)<0))if(!g)g=new SelectedDiagnostic(y,k,n||$.diagnostics[0]);else{if($.diagnostics.indexOf(g.diagnostic)<0)return!1;g=new SelectedDiagnostic(g.from,k,g.diagnostic)}}),g}function hideTooltip(e,n){let r=n.pos,g=n.end||r,y=e.state.facet(lintConfig).hideOn(e,r,g);if(y!=null)return y;let k=e.startState.doc.lineAt(n.pos);return!!(e.effects.some($=>$.is(setDiagnosticsEffect))||e.changes.touchesRange(k.from,Math.max(k.to,g)))}function maybeEnableLint(e,n){return e.field(lintState,!1)?n:n.concat(StateEffect.appendConfig.of(lintExtensions))}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(e,n){if(n.docChanged&&e.diagnostics.size){let r=e.diagnostics.map(n.changes),g=null,y=e.panel;if(e.selected){let k=n.changes.mapPos(e.selected.from,1);g=findDiagnostic(r,e.selected.diagnostic,k)||findDiagnostic(r,null,k)}!r.size&&y&&n.state.facet(lintConfig).autoPanel&&(y=null),e=new LintState(r,y,g)}for(let r of n.effects)if(r.is(setDiagnosticsEffect)){let g=n.state.facet(lintConfig).autoPanel?r.value.length?LintPanel.open:null:e.panel;e=LintState.init(r.value,g,n.state)}else r.is(togglePanel)?e=new LintState(e.diagnostics,r.value?LintPanel.open:null,e.selected):r.is(movePanelSelection)&&(e=new LintState(e.diagnostics,e.panel,r.value));return e},provide:e=>[showPanel.from(e,n=>n.panel),EditorView.decorations.from(e,n=>n.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(e,n,r){let{diagnostics:g}=e.state.field(lintState),y,k=-1,$=-1;g.between(n-(r<0?1:0),n+(r>0?1:0),(L,z,{spec:j})=>{if(n>=L&&n<=z&&(L==z||(n>L||r>0)&&(n<z||r<0)))return y=j.diagnostics,k=L,$=z,!1});let V=e.state.facet(lintConfig).tooltipFilter;return y&&V&&(y=V(y,e.state)),y?{pos:k,end:$,above:e.state.doc.lineAt(k).to<$,create(){return{dom:diagnosticsTooltip(e,y)}}}:null}function diagnosticsTooltip(e,n){return crelt("ul",{class:"cm-tooltip-lint"},n.map(r=>renderDiagnostic(e,r,!1)))}const openLintPanel=e=>{let n=e.state.field(lintState,!1);(!n||!n.panel)&&e.dispatch({effects:maybeEnableLint(e.state,[togglePanel.of(!0)])});let r=getPanel(e,LintPanel.open);return r&&r.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=e=>{let n=e.state.field(lintState,!1);return!n||!n.panel?!1:(e.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=e=>{let n=e.state.field(lintState,!1);if(!n)return!1;let r=e.state.selection.main,g=n.diagnostics.iter(r.to+1);return!g.value&&(g=n.diagnostics.iter(0),!g.value||g.from==r.from&&g.to==r.to)?!1:(e.dispatch({selection:{anchor:g.from,head:g.to},scrollIntoView:!0}),!0)},lintKeymap=[{key:"Mod-Shift-m",run:openLintPanel,preventDefault:!0},{key:"F8",run:nextDiagnostic}],lintConfig=Facet.define({combine(e){return Object.assign({sources:e.map(n=>n.source).filter(n=>n!=null)},combineConfig(e.map(n=>n.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(n,r)=>n?r?g=>n(g)||r(g):n:r}))}});function assignKeys(e){let n=[];if(e)e:for(let{name:r}of e){for(let g=0;g<r.length;g++){let y=r[g];if(/[a-zA-Z]/.test(y)&&!n.some(k=>k.toLowerCase()==y.toLowerCase())){n.push(y);continue e}}n.push("")}return n}function renderDiagnostic(e,n,r){var g;let y=r?assignKeys(n.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+n.severity},crelt("span",{class:"cm-diagnosticText"},n.renderMessage?n.renderMessage(e):n.message),(g=n.actions)===null||g===void 0?void 0:g.map((k,$)=>{let V=!1,L=oe=>{if(oe.preventDefault(),V)return;V=!0;let re=findDiagnostic(e.state.field(lintState).diagnostics,n);re&&k.apply(e,re.from,re.to)},{name:z}=k,j=y[$]?z.indexOf(y[$]):-1,ae=j<0?z:[z.slice(0,j),crelt("u",z.slice(j,j+1)),z.slice(j+1)];return crelt("button",{type:"button",class:"cm-diagnosticAction",onclick:L,onmousedown:L,"aria-label":` Action: ${z}${j<0?"":` (access key "${y[$]})"`}.`},ae)}),n.source&&crelt("div",{class:"cm-diagnosticSource"},n.source))}class DiagnosticWidget extends WidgetType{constructor(n){super(),this.sev=n}eq(n){return n.sev==this.sev}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class PanelItem{constructor(n,r){this.diagnostic=r,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic(n,r,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(n){this.view=n,this.items=[];let r=y=>{if(y.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(y.keyCode==38||y.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(y.keyCode==40||y.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(y.keyCode==36)this.moveSelection(0);else if(y.keyCode==35)this.moveSelection(this.items.length-1);else if(y.keyCode==13)this.view.focus();else if(y.keyCode>=65&&y.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:k}=this.items[this.selectedIndex],$=assignKeys(k.actions);for(let V=0;V<$.length;V++)if($[V].toUpperCase().charCodeAt(0)==y.keyCode){let L=findDiagnostic(this.view.state.field(lintState).diagnostics,k);L&&k.actions[V].apply(n,L.from,L.to)}}else return;y.preventDefault()},g=y=>{for(let k=0;k<this.items.length;k++)this.items[k].dom.contains(y.target)&&this.moveSelection(k)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:r,onclick:g}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"")),this.update()}get selectedIndex(){let n=this.view.state.field(lintState).selected;if(!n)return-1;for(let r=0;r<this.items.length;r++)if(this.items[r].diagnostic==n.diagnostic)return r;return-1}update(){let{diagnostics:n,selected:r}=this.view.state.field(lintState),g=0,y=!1,k=null,$=new Set;for(n.between(0,this.view.state.doc.length,(V,L,{spec:z})=>{for(let j of z.diagnostics){if($.has(j))continue;$.add(j);let ae=-1,oe;for(let re=g;re<this.items.length;re++)if(this.items[re].diagnostic==j){ae=re;break}ae<0?(oe=new PanelItem(this.view,j),this.items.splice(g,0,oe),y=!0):(oe=this.items[ae],ae>g&&(this.items.splice(g,ae-g),y=!0)),r&&oe.diagnostic==r.diagnostic?oe.dom.hasAttribute("aria-selected")||(oe.dom.setAttribute("aria-selected","true"),k=oe):oe.dom.hasAttribute("aria-selected")&&oe.dom.removeAttribute("aria-selected"),g++}});g<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)y=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),y=!0),k?(this.list.setAttribute("aria-activedescendant",k.id),this.view.requestMeasure({key:this,read:()=>({sel:k.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:V,panel:L})=>{let z=L.height/this.list.offsetHeight;V.top<L.top?this.list.scrollTop-=(L.top-V.top)/z:V.bottom>L.bottom&&(this.list.scrollTop+=(V.bottom-L.bottom)/z)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),y&&this.sync()}sync(){let n=this.list.firstChild;function r(){let g=n;n=g.nextSibling,g.remove()}for(let g of this.items)if(g.dom.parentNode==this.list){for(;n!=g.dom;)r();n=g.dom.nextSibling}else this.list.insertBefore(g.dom,n);for(;n;)r()}moveSelection(n){if(this.selectedIndex<0)return;let r=this.view.state.field(lintState),g=findDiagnostic(r.diagnostics,this.items[n].diagnostic);g&&this.view.dispatch({selection:{anchor:g.from,head:g.to},scrollIntoView:!0,effects:movePanelSelection.of(g)})}static open(n){return new LintPanel(n)}}function svg$1(e,n='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${n}>${encodeURIComponent(e)}</svg>')`}function underline(e){return svg$1(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-hint":{backgroundImage:underline("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function severityWeight(e){return e=="error"?4:e=="warning"?3:e=="info"?2:1}function maxSeverity(e){let n="hint",r=1;for(let g of e){let y=severityWeight(g.severity);y>r&&(r=y,n=g.severity)}return n}const lintExtensions=[lintState,EditorView.decorations.compute([lintState],e=>{let{selected:n,panel:r}=e.field(lintState);return!n||!r||n.from==n.to?Decoration.none:Decoration.set([activeMark.range(n.from,n.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme],basicSetup=[lineNumbers(),highlightActiveLineGutter(),highlightSpecialChars(),history$1(),foldGutter(),drawSelection(),dropCursor(),EditorState.allowMultipleSelections.of(!0),indentOnInput(),syntaxHighlighting(defaultHighlightStyle,{fallback:!0}),bracketMatching(),closeBrackets(),autocompletion(),rectangularSelection(),crosshairCursor(),highlightActiveLine(),highlightSelectionMatches(),keymap.of([...closeBracketsKeymap,...defaultKeymap,...searchKeymap,...historyKeymap,...foldKeymap,...completionKeymap,...lintKeymap])];var define_process_env_default={};class Stack{constructor(n,r,g,y,k,$,V,L,z,j=0,ae){this.p=n,this.stack=r,this.state=g,this.reducePos=y,this.pos=k,this.score=$,this.buffer=V,this.bufferBase=L,this.curContext=z,this.lookAhead=j,this.parent=ae}toString(){return`[${this.stack.filter((n,r)=>r%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(n,r,g=0){let y=n.parser.context;return new Stack(n,[],r,g,g,0,[],0,y?new StackContext(y,y.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(n,r){this.stack.push(this.state,r,this.bufferBase+this.buffer.length),this.state=n}reduce(n){var r;let g=n>>19,y=n&65535,{parser:k}=this.p,$=this.reducePos<this.pos-25;$&&this.setLookAhead(this.pos);let V=k.dynamicPrecedence(y);if(V&&(this.score+=V),g==0){this.pushState(k.getGoto(this.state,y,!0),this.reducePos),y<k.minRepeatTerm&&this.storeNode(y,this.reducePos,this.reducePos,$?8:4,!0),this.reduceContext(y,this.reducePos);return}let L=this.stack.length-(g-1)*3-(n&262144?6:0),z=L?this.stack[L-2]:this.p.ranges[0].from,j=this.reducePos-z;j>=2e3&&!(!((r=this.p.parser.nodeSet.types[y])===null||r===void 0)&&r.isAnonymous)&&(z==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=j):this.p.lastBigReductionSize<j&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=z,this.p.lastBigReductionSize=j));let ae=L?this.stack[L-1]:0,oe=this.bufferBase+this.buffer.length-ae;if(y<k.minRepeatTerm||n&131072){let re=k.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(y,z,re,oe+4,!0)}if(n&262144)this.state=this.stack[L];else{let re=this.stack[L-3];this.state=k.getGoto(re,y,!0)}for(;this.stack.length>L;)this.stack.pop();this.reduceContext(y,z)}storeNode(n,r,g,y=4,k=!1){if(n==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let $=this,V=this.buffer.length;if(V==0&&$.parent&&(V=$.bufferBase-$.parent.bufferBase,$=$.parent),V>0&&$.buffer[V-4]==0&&$.buffer[V-1]>-1){if(r==g)return;if($.buffer[V-2]>=r){$.buffer[V-2]=g;return}}}if(!k||this.pos==g)this.buffer.push(n,r,g,y);else{let $=this.buffer.length;if($>0&&this.buffer[$-4]!=0){let V=!1;for(let L=$;L>0&&this.buffer[L-2]>g;L-=4)if(this.buffer[L-1]>=0){V=!0;break}if(V)for(;$>0&&this.buffer[$-2]>g;)this.buffer[$]=this.buffer[$-4],this.buffer[$+1]=this.buffer[$-3],this.buffer[$+2]=this.buffer[$-2],this.buffer[$+3]=this.buffer[$-1],$-=4,y>4&&(y-=4)}this.buffer[$]=n,this.buffer[$+1]=r,this.buffer[$+2]=g,this.buffer[$+3]=y}}shift(n,r,g,y){if(n&131072)this.pushState(n&65535,this.pos);else if(n&262144)this.pos=y,this.shiftContext(r,g),r<=this.p.parser.maxNode&&this.buffer.push(r,g,y,4);else{let k=n,{parser:$}=this.p;(y>this.pos||r<=$.maxNode)&&(this.pos=y,$.stateFlag(k,1)||(this.reducePos=y)),this.pushState(k,g),this.shiftContext(r,g),r<=$.maxNode&&this.buffer.push(r,g,y,4)}}apply(n,r,g,y){n&65536?this.reduce(n):this.shift(n,r,g,y)}useNode(n,r){let g=this.p.reused.length-1;(g<0||this.p.reused[g]!=n)&&(this.p.reused.push(n),g++);let y=this.pos;this.reducePos=this.pos=y+n.length,this.pushState(r,y),this.buffer.push(g,y,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,n,this,this.p.stream.reset(this.pos-n.length)))}split(){let n=this,r=n.buffer.length;for(;r>0&&n.buffer[r-2]>n.reducePos;)r-=4;let g=n.buffer.slice(r),y=n.bufferBase+r;for(;n&&y==n.bufferBase;)n=n.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,g,y,this.curContext,this.lookAhead,n)}recoverByDelete(n,r){let g=n<=this.p.parser.maxNode;g&&this.storeNode(n,this.pos,r,4),this.storeNode(0,this.pos,r,g?8:4),this.pos=this.reducePos=r,this.score-=190}canShift(n){for(let r=new SimulatedStack(this);;){let g=this.p.parser.stateSlot(r.state,4)||this.p.parser.hasAction(r.state,n);if(g==0)return!1;if(!(g&65536))return!0;r.reduce(g)}}recoverByInsert(n){if(this.stack.length>=300)return[];let r=this.p.parser.nextStates(this.state);if(r.length>8||this.stack.length>=120){let y=[];for(let k=0,$;k<r.length;k+=2)($=r[k+1])!=this.state&&this.p.parser.hasAction($,n)&&y.push(r[k],$);if(this.stack.length<120)for(let k=0;y.length<8&&k<r.length;k+=2){let $=r[k+1];y.some((V,L)=>L&1&&V==$)||y.push(r[k],$)}r=y}let g=[];for(let y=0;y<r.length&&g.length<4;y+=2){let k=r[y+1];if(k==this.state)continue;let $=this.split();$.pushState(k,this.pos),$.storeNode(0,$.pos,$.pos,4,!0),$.shiftContext(r[y],this.pos),$.reducePos=this.pos,$.score-=200,g.push($)}return g}forceReduce(){let{parser:n}=this.p,r=n.stateSlot(this.state,5);if(!(r&65536))return!1;if(!n.validAction(this.state,r)){let g=r>>19,y=r&65535,k=this.stack.length-g*3;if(k<0||n.getGoto(this.stack[k],y,!1)<0){let $=this.findForcedReduction();if($==null)return!1;r=$}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(r),!0}findForcedReduction(){let{parser:n}=this.p,r=[],g=(y,k)=>{if(!r.includes(y))return r.push(y),n.allActions(y,$=>{if(!($&393216))if($&65536){let V=($>>19)-k;if(V>1){let L=$&65535,z=this.stack.length-V*3;if(z>=0&&n.getGoto(this.stack[z],L,!1)>=0)return V<<19|65536|L}}else{let V=g($,k+1);if(V!=null)return V}})};return g(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:n}=this.p;return n.data[n.stateSlot(this.state,1)]==65535&&!n.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(n){if(this.state!=n.state||this.stack.length!=n.stack.length)return!1;for(let r=0;r<this.stack.length;r+=3)if(this.stack[r]!=n.stack[r])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(n){return this.p.parser.dialect.flags[n]}shiftContext(n,r){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,n,this,this.p.stream.reset(r)))}reduceContext(n,r){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,n,this,this.p.stream.reset(r)))}emitContext(){let n=this.buffer.length-1;(n<0||this.buffer[n]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let n=this.buffer.length-1;(n<0||this.buffer[n]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(n){if(n!=this.curContext.context){let r=new StackContext(this.curContext.tracker,n);r.hash!=this.curContext.hash&&this.emitContext(),this.curContext=r}}setLookAhead(n){n>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=n)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor(n,r){this.tracker=n,this.context=r,this.hash=n.strict?n.hash(r):0}}class SimulatedStack{constructor(n){this.start=n,this.state=n.state,this.stack=n.stack,this.base=this.stack.length}reduce(n){let r=n&65535,g=n>>19;g==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(g-1)*3;let y=this.start.p.parser.getGoto(this.stack[this.base-3],r,!0);this.state=y}}class StackBufferCursor{constructor(n,r,g){this.stack=n,this.pos=r,this.index=g,this.buffer=n.buffer,this.index==0&&this.maybeNext()}static create(n,r=n.bufferBase+n.buffer.length){return new StackBufferCursor(n,r,r-n.bufferBase)}maybeNext(){let n=this.stack.parent;n!=null&&(this.index=this.stack.bufferBase-n.bufferBase,this.stack=n,this.buffer=n.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(e,n=Uint16Array){if(typeof e!="string")return e;let r=null;for(let g=0,y=0;g<e.length;){let k=0;for(;;){let $=e.charCodeAt(g++),V=!1;if($==126){k=65535;break}$>=92&&$--,$>=34&&$--;let L=$-32;if(L>=46&&(L-=46,V=!0),k+=L,V)break;k*=46}r?r[y++]=k:r=new n(k)}return r}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(n,r){this.input=n,this.ranges=r,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=r[0].from,this.range=r[0],this.end=r[r.length-1].to,this.readNext()}resolveOffset(n,r){let g=this.range,y=this.rangeIndex,k=this.pos+n;for(;k<g.from;){if(!y)return null;let $=this.ranges[--y];k-=g.from-$.to,g=$}for(;r<0?k>g.to:k>=g.to;){if(y==this.ranges.length-1)return null;let $=this.ranges[++y];k+=$.from-g.to,g=$}return k}clipPos(n){if(n>=this.range.from&&n<this.range.to)return n;for(let r of this.ranges)if(r.to>n)return Math.max(n,r.from);return this.end}peek(n){let r=this.chunkOff+n,g,y;if(r>=0&&r<this.chunk.length)g=this.pos+n,y=this.chunk.charCodeAt(r);else{let k=this.resolveOffset(n,1);if(k==null)return-1;if(g=k,g>=this.chunk2Pos&&g<this.chunk2Pos+this.chunk2.length)y=this.chunk2.charCodeAt(g-this.chunk2Pos);else{let $=this.rangeIndex,V=this.range;for(;V.to<=g;)V=this.ranges[++$];this.chunk2=this.input.chunk(this.chunk2Pos=g),g+this.chunk2.length>V.to&&(this.chunk2=this.chunk2.slice(0,V.to-g)),y=this.chunk2.charCodeAt(0)}}return g>=this.token.lookAhead&&(this.token.lookAhead=g+1),y}acceptToken(n,r=0){let g=r?this.resolveOffset(r,-1):this.pos;if(g==null||g<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=n,this.token.end=g}acceptTokenTo(n,r){this.token.value=n,this.token.end=r}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:n,chunkPos:r}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=n,this.chunk2Pos=r,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let n=this.input.chunk(this.pos),r=this.pos+n.length;this.chunk=r>this.range.to?n.slice(0,this.range.to-this.pos):n,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(n=1){for(this.chunkOff+=n;this.pos+n>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();n-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=n,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(n,r){if(r?(this.token=r,r.start=n,r.lookAhead=n+1,r.value=r.extended=-1):this.token=nullToken,this.pos!=n){if(this.pos=n,n==this.end)return this.setDone(),this;for(;n<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;n>=this.range.to;)this.range=this.ranges[++this.rangeIndex];n>=this.chunkPos&&n<this.chunkPos+this.chunk.length?this.chunkOff=n-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(n,r){if(n>=this.chunkPos&&r<=this.chunkPos+this.chunk.length)return this.chunk.slice(n-this.chunkPos,r-this.chunkPos);if(n>=this.chunk2Pos&&r<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(n-this.chunk2Pos,r-this.chunk2Pos);if(n>=this.range.from&&r<=this.range.to)return this.input.read(n,r);let g="";for(let y of this.ranges){if(y.from>=r)break;y.to>n&&(g+=this.input.read(Math.max(y.from,n),Math.min(y.to,r)))}return g}}class TokenGroup{constructor(n,r){this.data=n,this.id=r}token(n,r){let{parser:g}=r.p;readToken(this.data,n,r,this.id,g.data,g.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class LocalTokenGroup{constructor(n,r,g){this.precTable=r,this.elseToken=g,this.data=typeof n=="string"?decodeArray(n):n}token(n,r){let g=n.pos,y=0;for(;;){let k=n.next<0,$=n.resolveOffset(1,1);if(readToken(this.data,n,r,0,this.data,this.precTable),n.token.value>-1)break;if(this.elseToken==null)return;if(k||y++,$==null)break;n.reset($,n.token)}y&&(n.reset(g,n.token),n.acceptToken(this.elseToken,y))}}LocalTokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class ExternalTokenizer{constructor(n,r={}){this.token=n,this.contextual=!!r.contextual,this.fallback=!!r.fallback,this.extend=!!r.extend}}function readToken(e,n,r,g,y,k){let $=0,V=1<<g,{dialect:L}=r.p.parser;e:for(;V&e[$];){let z=e[$+1];for(let re=$+3;re<z;re+=2)if((e[re+1]&V)>0){let ue=e[re];if(L.allows(ue)&&(n.token.value==-1||n.token.value==ue||overrides(ue,n.token.value,y,k))){n.acceptToken(ue);break}}let j=n.next,ae=0,oe=e[$+2];if(n.next<0&&oe>ae&&e[z+oe*3-3]==65535){$=e[z+oe*3-1];continue e}for(;ae<oe;){let re=ae+oe>>1,ue=z+re+(re<<1),le=e[ue],de=e[ue+1]||65536;if(j<le)oe=re;else if(j>=de)ae=re+1;else{$=e[ue+2],n.advance();continue e}}break}}function findOffset(e,n,r){for(let g=n,y;(y=e[g])!=65535;g++)if(y==r)return g-n;return-1}function overrides(e,n,r,g){let y=findOffset(r,g,n);return y<0||findOffset(r,g,e)<y}const verbose=typeof process<"u"&&define_process_env_default&&/\bparse\b/.test(define_process_env_default.LOG);let stackIDs=null;function cutAt(e,n,r){let g=e.cursor(IterMode.IncludeAnonymous);for(g.moveTo(n);;)if(!(r<0?g.childBefore(n):g.childAfter(n)))for(;;){if((r<0?g.to<n:g.from>n)&&!g.type.isError)return r<0?Math.max(0,Math.min(g.to-1,n-25)):Math.min(e.length,Math.max(g.from+1,n+25));if(r<0?g.prevSibling():g.nextSibling())break;if(!g.parent())return r<0?0:e.length}}class FragmentCursor{constructor(n,r){this.fragments=n,this.nodeSet=r,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let n=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(n){for(this.safeFrom=n.openStart?cutAt(n.tree,n.from+n.offset,1)-n.offset:n.from,this.safeTo=n.openEnd?cutAt(n.tree,n.to+n.offset,-1)-n.offset:n.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(n.tree),this.start.push(-n.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(n){if(n<this.nextStart)return null;for(;this.fragment&&this.safeTo<=n;)this.nextFragment();if(!this.fragment)return null;for(;;){let r=this.trees.length-1;if(r<0)return this.nextFragment(),null;let g=this.trees[r],y=this.index[r];if(y==g.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let k=g.children[y],$=this.start[r]+g.positions[y];if($>n)return this.nextStart=$,null;if(k instanceof Tree){if($==n){if($<this.safeFrom)return null;let V=$+k.length;if(V<=this.safeTo){let L=k.prop(NodeProp.lookAhead);if(!L||V+L<this.fragment.to)return k}}this.index[r]++,$+k.length>=Math.max(this.safeFrom,n)&&(this.trees.push(k),this.start.push($),this.index.push(0))}else this.index[r]++,this.nextStart=$+k.length}}}class TokenCache{constructor(n,r){this.stream=r,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=n.tokenizers.map(g=>new CachedToken)}getActions(n){let r=0,g=null,{parser:y}=n.p,{tokenizers:k}=y,$=y.stateSlot(n.state,3),V=n.curContext?n.curContext.hash:0,L=0;for(let z=0;z<k.length;z++){if(!(1<<z&$))continue;let j=k[z],ae=this.tokens[z];if(!(g&&!j.fallback)&&((j.contextual||ae.start!=n.pos||ae.mask!=$||ae.context!=V)&&(this.updateCachedToken(ae,j,n),ae.mask=$,ae.context=V),ae.lookAhead>ae.end+25&&(L=Math.max(ae.lookAhead,L)),ae.value!=0)){let oe=r;if(ae.extended>-1&&(r=this.addActions(n,ae.extended,ae.end,r)),r=this.addActions(n,ae.value,ae.end,r),!j.extend&&(g=ae,r>oe))break}}for(;this.actions.length>r;)this.actions.pop();return L&&n.setLookAhead(L),!g&&n.pos==this.stream.end&&(g=new CachedToken,g.value=n.p.parser.eofTerm,g.start=g.end=n.pos,r=this.addActions(n,g.value,g.end,r)),this.mainToken=g,this.actions}getMainToken(n){if(this.mainToken)return this.mainToken;let r=new CachedToken,{pos:g,p:y}=n;return r.start=g,r.end=Math.min(g+1,y.stream.end),r.value=g==y.stream.end?y.parser.eofTerm:0,r}updateCachedToken(n,r,g){let y=this.stream.clipPos(g.pos);if(r.token(this.stream.reset(y,n),g),n.value>-1){let{parser:k}=g.p;for(let $=0;$<k.specialized.length;$++)if(k.specialized[$]==n.value){let V=k.specializers[$](this.stream.read(n.start,n.end),g);if(V>=0&&g.p.parser.dialect.allows(V>>1)){V&1?n.extended=V>>1:n.value=V>>1;break}}}else n.value=0,n.end=this.stream.clipPos(y+1)}putAction(n,r,g,y){for(let k=0;k<y;k+=3)if(this.actions[k]==n)return y;return this.actions[y++]=n,this.actions[y++]=r,this.actions[y++]=g,y}addActions(n,r,g,y){let{state:k}=n,{parser:$}=n.p,{data:V}=$;for(let L=0;L<2;L++)for(let z=$.stateSlot(k,L?2:1);;z+=3){if(V[z]==65535)if(V[z+1]==1)z=pair(V,z+2);else{y==0&&V[z+1]==2&&(y=this.putAction(pair(V,z+2),r,g,y));break}V[z]==r&&(y=this.putAction(pair(V,z+1),r,g,y))}return y}}class Parse{constructor(n,r,g,y){this.parser=n,this.input=r,this.ranges=y,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(r,y),this.tokens=new TokenCache(n,this.stream),this.topTerm=n.top[1];let{from:k}=y[0];this.stacks=[Stack.start(this,n.top[0],k)],this.fragments=g.length&&this.stream.end-k>n.bufferLength*4?new FragmentCursor(g,n.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let n=this.stacks,r=this.minStackPos,g=this.stacks=[],y,k;if(this.bigReductionCount>300&&n.length==1){let[$]=n;for(;$.forceReduce()&&$.stack.length&&$.stack[$.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let $=0;$<n.length;$++){let V=n[$];for(;;){if(this.tokens.mainToken=null,V.pos>r)g.push(V);else{if(this.advanceStack(V,g,n))continue;{y||(y=[],k=[]),y.push(V);let L=this.tokens.getMainToken(V);k.push(L.value,L.end)}}break}}if(!g.length){let $=y&&findFinished(y);if($)return verbose&&console.log("Finish with "+this.stackID($)),this.stackToTree($);if(this.parser.strict)throw verbose&&y&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&y){let $=this.stoppedAt!=null&&y[0].pos>this.stoppedAt?y[0]:this.runRecovery(y,k,g);if($)return verbose&&console.log("Force-finish "+this.stackID($)),this.stackToTree($.forceAll())}if(this.recovering){let $=this.recovering==1?1:this.recovering*3;if(g.length>$)for(g.sort((V,L)=>L.score-V.score);g.length>$;)g.pop();g.some(V=>V.reducePos>r)&&this.recovering--}else if(g.length>1){e:for(let $=0;$<g.length-1;$++){let V=g[$];for(let L=$+1;L<g.length;L++){let z=g[L];if(V.sameState(z)||V.buffer.length>500&&z.buffer.length>500)if((V.score-z.score||V.buffer.length-z.buffer.length)>0)g.splice(L--,1);else{g.splice($--,1);continue e}}}g.length>12&&g.splice(12,g.length-12)}this.minStackPos=g[0].pos;for(let $=1;$<g.length;$++)g[$].pos<this.minStackPos&&(this.minStackPos=g[$].pos);return null}stopAt(n){if(this.stoppedAt!=null&&this.stoppedAt<n)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=n}advanceStack(n,r,g){let y=n.pos,{parser:k}=this,$=verbose?this.stackID(n)+" -> ":"";if(this.stoppedAt!=null&&y>this.stoppedAt)return n.forceReduce()?n:null;if(this.fragments){let z=n.curContext&&n.curContext.tracker.strict,j=z?n.curContext.hash:0;for(let ae=this.fragments.nodeAt(y);ae;){let oe=this.parser.nodeSet.types[ae.type.id]==ae.type?k.getGoto(n.state,ae.type.id):-1;if(oe>-1&&ae.length&&(!z||(ae.prop(NodeProp.contextHash)||0)==j))return n.useNode(ae,oe),verbose&&console.log($+this.stackID(n)+` (via reuse of ${k.getName(ae.type.id)})`),!0;if(!(ae instanceof Tree)||ae.children.length==0||ae.positions[0]>0)break;let re=ae.children[0];if(re instanceof Tree&&ae.positions[0]==0)ae=re;else break}}let V=k.stateSlot(n.state,4);if(V>0)return n.reduce(V),verbose&&console.log($+this.stackID(n)+` (via always-reduce ${k.getName(V&65535)})`),!0;if(n.stack.length>=8400)for(;n.stack.length>6e3&&n.forceReduce(););let L=this.tokens.getActions(n);for(let z=0;z<L.length;){let j=L[z++],ae=L[z++],oe=L[z++],re=z==L.length||!g,ue=re?n:n.split(),le=this.tokens.mainToken;if(ue.apply(j,ae,le?le.start:ue.pos,oe),verbose&&console.log($+this.stackID(ue)+` (via ${j&65536?`reduce of ${k.getName(j&65535)}`:"shift"} for ${k.getName(ae)} @ ${y}${ue==n?"":", split"})`),re)return!0;ue.pos>y?r.push(ue):g.push(ue)}return!1}advanceFully(n,r){let g=n.pos;for(;;){if(!this.advanceStack(n,null,null))return!1;if(n.pos>g)return pushStackDedup(n,r),!0}}runRecovery(n,r,g){let y=null,k=!1;for(let $=0;$<n.length;$++){let V=n[$],L=r[$<<1],z=r[($<<1)+1],j=verbose?this.stackID(V)+" -> ":"";if(V.deadEnd&&(k||(k=!0,V.restart(),verbose&&console.log(j+this.stackID(V)+" (restarted)"),this.advanceFully(V,g))))continue;let ae=V.split(),oe=j;for(let re=0;ae.forceReduce()&&re<10&&(verbose&&console.log(oe+this.stackID(ae)+" (via force-reduce)"),!this.advanceFully(ae,g));re++)verbose&&(oe=this.stackID(ae)+" -> ");for(let re of V.recoverByInsert(L))verbose&&console.log(j+this.stackID(re)+" (via recover-insert)"),this.advanceFully(re,g);this.stream.end>V.pos?(z==V.pos&&(z++,L=0),V.recoverByDelete(L,z),verbose&&console.log(j+this.stackID(V)+` (via recover-delete ${this.parser.getName(L)})`),pushStackDedup(V,g)):(!y||y.score<V.score)&&(y=V)}return y}stackToTree(n){return n.close(),Tree.build({buffer:StackBufferCursor.create(n),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:n.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(n){let r=(stackIDs||(stackIDs=new WeakMap)).get(n);return r||stackIDs.set(n,r=String.fromCodePoint(this.nextStackID++)),r+n}}function pushStackDedup(e,n){for(let r=0;r<n.length;r++){let g=n[r];if(g.pos==e.pos&&g.sameState(e)){n[r].score<e.score&&(n[r]=e);return}}n.push(e)}class Dialect{constructor(n,r,g){this.source=n,this.flags=r,this.disabled=g}allows(n){return!this.disabled||this.disabled[n]==0}}const id=e=>e;class ContextTracker{constructor(n){this.start=n.start,this.shift=n.shift||id,this.reduce=n.reduce||id,this.reuse=n.reuse||id,this.hash=n.hash||(()=>0),this.strict=n.strict!==!1}}class LRParser extends Parser{constructor(n){if(super(),this.wrappers=[],n.version!=14)throw new RangeError(`Parser version (${n.version}) doesn't match runtime version (14)`);let r=n.nodeNames.split(" ");this.minRepeatTerm=r.length;for(let V=0;V<n.repeatNodeCount;V++)r.push("");let g=Object.keys(n.topRules).map(V=>n.topRules[V][1]),y=[];for(let V=0;V<r.length;V++)y.push([]);function k(V,L,z){y[V].push([L,L.deserialize(String(z))])}if(n.nodeProps)for(let V of n.nodeProps){let L=V[0];typeof L=="string"&&(L=NodeProp[L]);for(let z=1;z<V.length;){let j=V[z++];if(j>=0)k(j,L,V[z++]);else{let ae=V[z+-j];for(let oe=-j;oe>0;oe--)k(V[z++],L,ae);z++}}}this.nodeSet=new NodeSet(r.map((V,L)=>NodeType.define({name:L>=this.minRepeatTerm?void 0:V,id:L,props:y[L],top:g.indexOf(L)>-1,error:L==0,skipped:n.skippedNodes&&n.skippedNodes.indexOf(L)>-1}))),n.propSources&&(this.nodeSet=this.nodeSet.extend(...n.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let $=decodeArray(n.tokenData);this.context=n.context,this.specializerSpecs=n.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let V=0;V<this.specializerSpecs.length;V++)this.specialized[V]=this.specializerSpecs[V].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(n.states,Uint32Array),this.data=decodeArray(n.stateData),this.goto=decodeArray(n.goto),this.maxTerm=n.maxTerm,this.tokenizers=n.tokenizers.map(V=>typeof V=="number"?new TokenGroup($,V):V),this.topRules=n.topRules,this.dialects=n.dialects||{},this.dynamicPrecedences=n.dynamicPrecedences||null,this.tokenPrecTable=n.tokenPrec,this.termNames=n.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(n,r,g){let y=new Parse(this,n,r,g);for(let k of this.wrappers)y=k(y,n,r,g);return y}getGoto(n,r,g=!1){let y=this.goto;if(r>=y[0])return-1;for(let k=y[r+1];;){let $=y[k++],V=$&1,L=y[k++];if(V&&g)return L;for(let z=k+($>>1);k<z;k++)if(y[k]==n)return L;if(V)return-1}}hasAction(n,r){let g=this.data;for(let y=0;y<2;y++)for(let k=this.stateSlot(n,y?2:1),$;;k+=3){if(($=g[k])==65535)if(g[k+1]==1)$=g[k=pair(g,k+2)];else{if(g[k+1]==2)return pair(g,k+2);break}if($==r||$==0)return pair(g,k+1)}return 0}stateSlot(n,r){return this.states[n*6+r]}stateFlag(n,r){return(this.stateSlot(n,0)&r)>0}validAction(n,r){return!!this.allActions(n,g=>g==r?!0:null)}allActions(n,r){let g=this.stateSlot(n,4),y=g?r(g):void 0;for(let k=this.stateSlot(n,1);y==null;k+=3){if(this.data[k]==65535)if(this.data[k+1]==1)k=pair(this.data,k+2);else break;y=r(pair(this.data,k+1))}return y}nextStates(n){let r=[];for(let g=this.stateSlot(n,1);;g+=3){if(this.data[g]==65535)if(this.data[g+1]==1)g=pair(this.data,g+2);else break;if(!(this.data[g+2]&1)){let y=this.data[g+1];r.some((k,$)=>$&1&&k==y)||r.push(this.data[g],y)}}return r}configure(n){let r=Object.assign(Object.create(LRParser.prototype),this);if(n.props&&(r.nodeSet=this.nodeSet.extend(...n.props)),n.top){let g=this.topRules[n.top];if(!g)throw new RangeError(`Invalid top rule name ${n.top}`);r.top=g}return n.tokenizers&&(r.tokenizers=this.tokenizers.map(g=>{let y=n.tokenizers.find(k=>k.from==g);return y?y.to:g})),n.specializers&&(r.specializers=this.specializers.slice(),r.specializerSpecs=this.specializerSpecs.map((g,y)=>{let k=n.specializers.find(V=>V.from==g.external);if(!k)return g;let $=Object.assign(Object.assign({},g),{external:k.to});return r.specializers[y]=getSpecializer($),$})),n.contextTracker&&(r.context=n.contextTracker),n.dialect&&(r.dialect=this.parseDialect(n.dialect)),n.strict!=null&&(r.strict=n.strict),n.wrap&&(r.wrappers=r.wrappers.concat(n.wrap)),n.bufferLength!=null&&(r.bufferLength=n.bufferLength),r}hasWrappers(){return this.wrappers.length>0}getName(n){return this.termNames?this.termNames[n]:String(n<=this.maxNode&&this.nodeSet.types[n].name||n)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(n){let r=this.dynamicPrecedences;return r==null?0:r[n]||0}parseDialect(n){let r=Object.keys(this.dialects),g=r.map(()=>!1);if(n)for(let k of n.split(" ")){let $=r.indexOf(k);$>=0&&(g[$]=!0)}let y=null;for(let k=0;k<r.length;k++)if(!g[k])for(let $=this.dialects[r[k]],V;(V=this.data[$++])!=65535;)(y||(y=new Uint8Array(this.maxTerm+1)))[V]=1;return new Dialect(n,g,y)}static deserialize(n){return new LRParser(n)}}function pair(e,n){return e[n]|e[n+1]<<16}function findFinished(e){let n=null;for(let r of e){let g=r.p.stoppedAt;(r.pos==r.p.stream.end||g!=null&&r.pos>g)&&r.p.parser.stateFlag(r.state,2)&&(!n||n.score<r.score)&&(n=r)}return n}function getSpecializer(e){if(e.external){let n=e.extend?1:0;return(r,g)=>e.external(r,g)<<1|n}return e.get}const noSemi=314,noSemiType=315,incdec=1,incdecPrefix=2,questionDot=3,JSXStartTag=4,insertSemi=316,spaces=318,newline=319,LineComment=5,BlockComment=6,Dialect_jsx=0,space=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],braceR=125,semicolon=59,slash=47,star=42,plus=43,minus=45,lt=60,comma=44,question=63,dot=46,bracketL=91,trackNewline=new ContextTracker({start:!1,shift(e,n){return n==LineComment||n==BlockComment||n==spaces?e:n==newline},strict:!1}),insertSemicolon=new ExternalTokenizer((e,n)=>{let{next:r}=e;(r==braceR||r==-1||n.context)&&e.acceptToken(insertSemi)},{contextual:!0,fallback:!0}),noSemicolon=new ExternalTokenizer((e,n)=>{let{next:r}=e,g;space.indexOf(r)>-1||r==slash&&((g=e.peek(1))==slash||g==star)||r!=braceR&&r!=semicolon&&r!=-1&&!n.context&&e.acceptToken(noSemi)},{contextual:!0}),noSemicolonType=new ExternalTokenizer((e,n)=>{e.next==bracketL&&!n.context&&e.acceptToken(noSemiType)},{contextual:!0}),operatorToken=new ExternalTokenizer((e,n)=>{let{next:r}=e;if(r==plus||r==minus){if(e.advance(),r==e.next){e.advance();let g=!n.context&&n.canShift(incdec);e.acceptToken(g?incdec:incdecPrefix)}}else r==question&&e.peek(1)==dot&&(e.advance(),e.advance(),(e.next<48||e.next>57)&&e.acceptToken(questionDot))},{contextual:!0});function identifierChar(e,n){return e>=65&&e<=90||e>=97&&e<=122||e==95||e>=192||!n&&e>=48&&e<=57}const jsx=new ExternalTokenizer((e,n)=>{if(e.next!=lt||!n.dialectEnabled(Dialect_jsx)||(e.advance(),e.next==slash))return;let r=0;for(;space.indexOf(e.next)>-1;)e.advance(),r++;if(identifierChar(e.next,!0)){for(e.advance(),r++;identifierChar(e.next,!1);)e.advance(),r++;for(;space.indexOf(e.next)>-1;)e.advance(),r++;if(e.next==comma)return;for(let g=0;;g++){if(g==7){if(!identifierChar(e.next,!0))return;break}if(e.next!="extends".charCodeAt(g))break;e.advance(),r++}}e.acceptToken(JSXStartTag,-r)}),jsHighlight=styleTags({"get set async static":tags.modifier,"for while do if else switch try catch finally return throw break continue default case":tags.controlKeyword,"in of await yield void typeof delete instanceof":tags.operatorKeyword,"let var const using function class extends":tags.definitionKeyword,"import export from":tags.moduleKeyword,"with debugger as new":tags.keyword,TemplateString:tags.special(tags.string),super:tags.atom,BooleanLiteral:tags.bool,this:tags.self,null:tags.null,Star:tags.modifier,VariableName:tags.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":tags.function(tags.variableName),VariableDefinition:tags.definition(tags.variableName),Label:tags.labelName,PropertyName:tags.propertyName,PrivatePropertyName:tags.special(tags.propertyName),"CallExpression/MemberExpression/PropertyName":tags.function(tags.propertyName),"FunctionDeclaration/VariableDefinition":tags.function(tags.definition(tags.variableName)),"ClassDeclaration/VariableDefinition":tags.definition(tags.className),"NewExpression/VariableName":tags.className,PropertyDefinition:tags.definition(tags.propertyName),PrivatePropertyDefinition:tags.definition(tags.special(tags.propertyName)),UpdateOp:tags.updateOperator,"LineComment Hashbang":tags.lineComment,BlockComment:tags.blockComment,Number:tags.number,String:tags.string,Escape:tags.escape,ArithOp:tags.arithmeticOperator,LogicOp:tags.logicOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,RegExp:tags.regexp,Equals:tags.definitionOperator,Arrow:tags.function(tags.punctuation),": Spread":tags.punctuation,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,"InterpolationStart InterpolationEnd":tags.special(tags.brace),".":tags.derefOperator,", ;":tags.separator,"@":tags.meta,TypeName:tags.typeName,TypeDefinition:tags.definition(tags.typeName),"type enum interface implements namespace module declare":tags.definitionKeyword,"abstract global Privacy readonly override":tags.modifier,"is keyof unique infer asserts":tags.operatorKeyword,JSXAttributeValue:tags.attributeValue,JSXText:tags.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":tags.angleBracket,"JSXIdentifier JSXNameSpacedName":tags.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":tags.attributeName,"JSXBuiltin/JSXIdentifier":tags.standard(tags.tagName)}),spec_identifier={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,const:52,extends:56,this:60,true:68,false:68,null:80,void:84,typeof:88,super:104,new:138,delete:150,yield:159,await:163,class:168,public:231,private:231,protected:231,readonly:233,instanceof:252,satisfies:255,in:256,import:290,keyof:347,unique:351,infer:357,asserts:393,is:395,abstract:415,implements:417,type:419,let:422,var:424,using:427,interface:433,enum:437,namespace:443,module:445,declare:449,global:453,for:472,of:481,while:484,with:488,do:492,if:496,else:498,switch:502,case:508,try:514,catch:518,finally:522,return:526,throw:530,break:534,continue:538,debugger:542},spec_word={__proto__:null,async:125,get:127,set:129,declare:191,public:193,private:193,protected:193,static:195,abstract:197,override:199,readonly:205,accessor:207,new:399},spec_LessThan={__proto__:null,"<":189},parser=LRParser.deserialize({version:14,states:"$EOQ%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#D_O.QQlO'#DeO.bQlO'#DpO%[QlO'#DxO0fQlO'#EQOOQ!0Lf'#EY'#EYO1PQ`O'#EVOOQO'#En'#EnOOQO'#Ij'#IjO1XQ`O'#GrO1dQ`O'#EmO1iQ`O'#EmO3hQ!0MxO'#JpO6[Q!0MxO'#JqO6uQ`O'#F[O6zQ,UO'#FsOOQ!0Lf'#Fe'#FeO7VO7dO'#FeO7eQMhO'#F{O9UQ`O'#FzOOQ!0Lf'#Jq'#JqOOQ!0Lb'#Jp'#JpO9ZQ`O'#GvOOQ['#K]'#K]O9fQ`O'#IWO9kQ!0LrO'#IXOOQ['#J^'#J^OOQ['#I]'#I]Q`QlOOQ`QlOOO9sQ!L^O'#DtO9zQlO'#D|O:RQlO'#EOO9aQ`O'#GrO:YQMhO'#CoO:hQ`O'#ElO:sQ`O'#EwO:xQMhO'#FdO;gQ`O'#GrOOQO'#K^'#K^O;lQ`O'#K^O;zQ`O'#GzO;zQ`O'#G{O;zQ`O'#G}O9aQ`O'#HQO<qQ`O'#HTO>YQ`O'#CeO>jQ`O'#HaO>rQ`O'#HgO>rQ`O'#HiO`QlO'#HkO>rQ`O'#HmO>rQ`O'#HpO>wQ`O'#HvO>|Q!0LsO'#H|O%[QlO'#IOO?XQ!0LsO'#IQO?dQ!0LsO'#ISO9kQ!0LrO'#IUO?oQ!0MxO'#CiO@qQpO'#DjQOQ`OOO%[QlO'#EOOAXQ`O'#ERO:YQMhO'#ElOAdQ`O'#ElOAoQ!bO'#FdOOQ['#Cg'#CgOOQ!0Lb'#Do'#DoOOQ!0Lb'#Jt'#JtO%[QlO'#JtOOQO'#Jw'#JwOOQO'#If'#IfOBoQpO'#EeOOQ!0Lb'#Ed'#EdOOQ!0Lb'#J{'#J{OCkQ!0MSO'#EeOCuQpO'#EUOOQO'#Jv'#JvODZQpO'#JwOEhQpO'#EUOCuQpO'#EePEuO&2DjO'#CbPOOO)CD{)CD{OOOO'#I^'#I^OFQO#tO,59UOOQ!0Lh,59U,59UOOOO'#I_'#I_OF`O&jO,59UOFnQ!L^O'#DaOOOO'#Ia'#IaOFuO#@ItO,59yOOQ!0Lf,59y,59yOGTQlO'#IbOGhQ`O'#JrOIgQ!fO'#JrO+}QlO'#JrOInQ`O,5:POJUQ`O'#EnOJcQ`O'#KROJnQ`O'#KQOJnQ`O'#KQOJvQ`O,5;[OJ{Q`O'#KPOOQ!0Ln,5:[,5:[OKSQlO,5:[OMQQ!0MxO,5:dOMqQ`O,5:lON[Q!0LrO'#KOONcQ`O'#J}O9ZQ`O'#J}ONwQ`O'#J}O! PQ`O,5;ZO! UQ`O'#J}O!#ZQ!fO'#JqOOQ!0Lh'#Ci'#CiO%[QlO'#EQO!#yQ!fO,5:qOOQS'#Jx'#JxOOQO-E<h-E<hO9aQ`O,5=^O!$aQ`O,5=^O!$fQlO,5;XO!&iQMhO'#EiO!(SQ`O,5;XO!(XQlO'#DwO!(cQpO,5;bO!(kQpO,5;bO%[QlO,5;bOOQ['#FS'#FSOOQ['#FU'#FUO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cOOQ['#FY'#FYO!(yQlO,5;sOOQ!0Lf,5;x,5;xOOQ!0Lf,5;y,5;yOOQ!0Lf,5;{,5;{O%[QlO'#InO!*|Q!0LrO,5<hO%[QlO,5;cO!&iQMhO,5;cO!+kQMhO,5;cO!-]QMhO'#E[O%[QlO,5;vOOQ!0Lf,5;z,5;zO!-dQ,UO'#FiO!.aQ,UO'#KVO!-{Q,UO'#KVO!.hQ,UO'#KVOOQO'#KV'#KVO!.|Q,UO,5<ROOOW,5<_,5<_O!/_QlO'#FuOOOW'#Im'#ImO7VO7dO,5<PO!/fQ,UO'#FwOOQ!0Lf,5<P,5<PO!0VQ$IUO'#CwOOQ!0Lh'#C{'#C{O!0jO#@ItO'#DPO!1WQMjO,5<dO!1_Q`O,5<gO!2zQ(CWO'#GWO!3XQ`O'#GXO!3^Q`O'#GXO!4|Q(CWO'#G]O!6RQpO'#GaOOQO'#Gm'#GmO!+rQMhO'#GlOOQO'#Go'#GoO!+rQMhO'#GnO!6tQ$IUO'#JjOOQ!0Lh'#Jj'#JjO!7OQ`O'#JiO!7^Q`O'#JhO!7fQ`O'#CuOOQ!0Lh'#Cy'#CyO!7qQ`O'#C{OOQ!0Lh'#DT'#DTOOQ!0Lh'#DV'#DVO1SQ`O'#DXO!+rQMhO'#GOO!+rQMhO'#GQO!7vQ`O'#GSO!7{Q`O'#GTO!3^Q`O'#GZO!+rQMhO'#G`O;zQ`O'#JiO!8QQ`O'#EoO!8oQ`O,5<fOOQ!0Lb'#Cr'#CrO!8wQ`O'#EpO!9qQpO'#EqOOQ!0Lb'#KP'#KPO!9xQ!0LrO'#K_O9kQ!0LrO,5=bO`QlO,5>rOOQ['#Jf'#JfOOQ[,5>s,5>sOOQ[-E<Z-E<ZO!;wQ!0MxO,5:`O!9lQpO,5:^O!>bQ!0MxO,5:hO%[QlO,5:hO!@xQ!0MxO,5:jOOQO,5@x,5@xO!AiQMhO,5=^O!AwQ!0LrO'#JgO9UQ`O'#JgO!BYQ!0LrO,59ZO!BeQpO,59ZO!BmQMhO,59ZO:YQMhO,59ZO!BxQ`O,5;XO!CQQ`O'#H`O!CfQ`O'#KbO%[QlO,5;|O!9lQpO,5<OO!CnQ`O,5=yO!CsQ`O,5=yO!CxQ`O,5=yO9kQ!0LrO,5=yO;zQ`O,5=iOOQO'#Cw'#CwO!DWQpO,5=fO!D`QMhO,5=gO!DkQ`O,5=iO!DpQ!bO,5=lO!DxQ`O'#K^O>wQ`O'#HVO9aQ`O'#HXO!D}Q`O'#HXO:YQMhO'#HZO!ESQ`O'#HZOOQ[,5=o,5=oO!EXQ`O'#H[O!EjQ`O'#CoO!EoQ`O,59PO!EyQ`O,59PO!HOQlO,59POOQ[,59P,59PO!H`Q!0LrO,59PO%[QlO,59PO!JkQlO'#HcOOQ['#Hd'#HdOOQ['#He'#HeO`QlO,5={O!KRQ`O,5={O`QlO,5>RO`QlO,5>TO!KWQ`O,5>VO`QlO,5>XO!K]Q`O,5>[O!KbQlO,5>bOOQ[,5>h,5>hO%[QlO,5>hO9kQ!0LrO,5>jOOQ[,5>l,5>lO# lQ`O,5>lOOQ[,5>n,5>nO# lQ`O,5>nOOQ[,5>p,5>pO#!YQpO'#D]O%[QlO'#JtO#!{QpO'#JtO##VQpO'#DkO##hQpO'#DkO#%yQlO'#DkO#&QQ`O'#JsO#&YQ`O,5:UO#&_Q`O'#ErO#&mQ`O'#KSO#&uQ`O,5;]O#&zQpO'#DkO#'XQpO'#ETOOQ!0Lf,5:m,5:mO%[QlO,5:mO#'`Q`O,5:mO>wQ`O,5;WO!BeQpO,5;WO!BmQMhO,5;WO:YQMhO,5;WO#'hQ`O,5@`O#'mQ07dO,5:qOOQO-E<d-E<dO#(sQ!0MSO,5;POCuQpO,5:pO#(}QpO,5:pOCuQpO,5;PO!BYQ!0LrO,5:pOOQ!0Lb'#Eh'#EhOOQO,5;P,5;PO%[QlO,5;PO#)[Q!0LrO,5;PO#)gQ!0LrO,5;PO!BeQpO,5:pOOQO,5;V,5;VO#)uQ!0LrO,5;PPOOO'#I['#I[P#*ZO&2DjO,58|POOO,58|,58|OOOO-E<[-E<[OOQ!0Lh1G.p1G.pOOOO-E<]-E<]OOOO,59{,59{O#*fQ!bO,59{OOOO-E<_-E<_OOQ!0Lf1G/e1G/eO#*kQ!fO,5>|O+}QlO,5>|OOQO,5?S,5?SO#*uQlO'#IbOOQO-E<`-E<`O#+SQ`O,5@^O#+[Q!fO,5@^O#+cQ`O,5@lOOQ!0Lf1G/k1G/kO%[QlO,5@mO#+kQ`O'#IhOOQO-E<f-E<fO#+cQ`O,5@lOOQ!0Lb1G0v1G0vOOQ!0Ln1G/v1G/vOOQ!0Ln1G0W1G0WO%[QlO,5@jO#,PQ!0LrO,5@jO#,bQ!0LrO,5@jO#,iQ`O,5@iO9ZQ`O,5@iO#,qQ`O,5@iO#-PQ`O'#IkO#,iQ`O,5@iOOQ!0Lb1G0u1G0uO!(cQpO,5:sO!(nQpO,5:sOOQS,5:u,5:uO#-qQdO,5:uO#-yQMhO1G2xO9aQ`O1G2xOOQ!0Lf1G0s1G0sO#.XQ!0MxO1G0sO#/^Q!0MvO,5;TOOQ!0Lh'#GV'#GVO#/zQ!0MzO'#JjO!$fQlO1G0sO#2VQ!fO'#JuO%[QlO'#JuO#2aQ`O,5:cOOQ!0Lh'#D]'#D]OOQ!0Lf1G0|1G0|O%[QlO1G0|OOQ!0Lf1G1e1G1eO#2fQ`O1G0|O#4zQ!0MxO1G0}O#5RQ!0MxO1G0}O#7iQ!0MxO1G0}O#7pQ!0MxO1G0}O#:WQ!0MxO1G0}O#<nQ!0MxO1G0}O#<uQ!0MxO1G0}O#<|Q!0MxO1G0}O#?dQ!0MxO1G0}O#?kQ!0MxO1G0}O#AxQ?MtO'#CiO#CsQ?MtO1G1_O#CzQ?MtO'#JqO#D_Q!0MxO,5?YOOQ!0Lb-E<l-E<lO#FlQ!0MxO1G0}O#GiQ!0MzO1G0}OOQ!0Lf1G0}1G0}O#HlQMjO'#JzO#HvQ`O,5:vO#H{Q!0MxO1G1bO#IoQ,UO,5<VO#IwQ,UO,5<WO#JPQ,UO'#FnO#JhQ`O'#FmOOQO'#KW'#KWOOQO'#Il'#IlO#JmQ,UO1G1mOOQ!0Lf1G1m1G1mOOOW1G1x1G1xO#KOQ?MtO'#JpO#KYQ`O,5<aO!(yQlO,5<aOOOW-E<k-E<kOOQ!0Lf1G1k1G1kO#K_QpO'#KVOOQ!0Lf,5<c,5<cO#KgQpO,5<cO#KlQMhO'#DROOOO'#I`'#I`O#KsO#@ItO,59kOOQ!0Lh,59k,59kO%[QlO1G2OO!7{Q`O'#IpO#LOQ`O,5<yOOQ!0Lh,5<v,5<vO!+rQMhO'#IsO#LlQMjO,5=WO!+rQMhO'#IuO#M_QMjO,5=YO!&iQMhO,5=[OOQO1G2R1G2RO#MiQ!dO'#CrO#M|Q(CWO'#EpO$ RQpO'#GaO$ iQ!dO,5<rO$ pQ`O'#KYO9ZQ`O'#KYO$!OQ`O,5<tO!+rQMhO,5<sO$!TQ`O'#GYO$!fQ`O,5<sO$!kQ!dO'#GVO$!xQ!dO'#KZO$#SQ`O'#KZO!&iQMhO'#KZO$#XQ`O,5<wO$#^QlO'#JtO$#hQpO'#GbO##hQpO'#GbO$#yQ`O'#GfO!3^Q`O'#GjO$$OQ!0LrO'#IrO$$ZQpO,5<{OOQ!0Lp,5<{,5<{O$$bQpO'#GbO$$oQpO'#GcO$%QQpO'#GcO$%VQMjO,5=WO$%gQMjO,5=YOOQ!0Lh,5=],5=]O!+rQMhO,5@TO!+rQMhO,5@TO$%wQ`O'#IwO$&VQ`O,5@SO$&_Q`O,59aOOQ!0Lh,59g,59gO$'UQ$IYO,59sOOQ!0Lh'#Jn'#JnO$'wQMjO,5<jO$(jQMjO,5<lO@iQ`O,5<nOOQ!0Lh,5<o,5<oO$(tQ`O,5<uO$(yQMjO,5<zO$)ZQ`O,5@TO$)iQ`O'#J}O!$fQlO1G2QO$)nQ`O1G2QO9ZQ`O'#KQO9ZQ`O'#ErO%[QlO'#ErO9ZQ`O'#IyO$)sQ!0LrO,5@yOOQ[1G2|1G2|OOQ[1G4^1G4^OOQ!0Lf1G/z1G/zOOQ!0Lf1G/x1G/xO$+uQ!0MxO1G0SOOQ[1G2x1G2xO!&iQMhO1G2xO%[QlO1G2xO#-|Q`O1G2xO$-yQMhO'#EiOOQ!0Lb,5@R,5@RO$.WQ!0LrO,5@ROOQ[1G.u1G.uO!BYQ!0LrO1G.uO!BeQpO1G.uO!BmQMhO1G.uO$.iQ`O1G0sO$.nQ`O'#CiO$.yQ`O'#KcO$/RQ`O,5=zO$/WQ`O'#KcO$/]Q`O'#KcO$/kQ`O'#JPO$/yQ`O,5@|O$0RQ!fO1G1hOOQ!0Lf1G1j1G1jO9aQ`O1G3eO@iQ`O1G3eO$0YQ`O1G3eO$0_Q`O1G3eOOQ[1G3e1G3eO!DkQ`O1G3TO!&iQMhO1G3QO$0dQ`O1G3QOOQ[1G3R1G3RO!&iQMhO1G3RO$0iQ`O1G3RO$0qQpO'#HPOOQ[1G3T1G3TO!5|QpO'#I{O!DpQ!bO1G3WOOQ[1G3W1G3WOOQ[,5=q,5=qO$0yQMhO,5=sO9aQ`O,5=sO$#yQ`O,5=uO9UQ`O,5=uO!BeQpO,5=uO!BmQMhO,5=uO:YQMhO,5=uO$1XQ`O'#KaO$1dQ`O,5=vOOQ[1G.k1G.kO$1iQ!0LrO1G.kO@iQ`O1G.kO$1tQ`O1G.kO9kQ!0LrO1G.kO$3|Q!fO,5AOO$4ZQ`O,5AOO9ZQ`O,5AOO$4fQlO,5=}O$4mQ`O,5=}OOQ[1G3g1G3gO`QlO1G3gOOQ[1G3m1G3mOOQ[1G3o1G3oO>rQ`O1G3qO$4rQlO1G3sO$8vQlO'#HrOOQ[1G3v1G3vO$9TQ`O'#HxO>wQ`O'#HzOOQ[1G3|1G3|O$9]QlO1G3|O9kQ!0LrO1G4SOOQ[1G4U1G4UOOQ!0Lb'#G^'#G^O9kQ!0LrO1G4WO9kQ!0LrO1G4YO$=dQ`O,5@`O!(yQlO,5;^O9ZQ`O,5;^O>wQ`O,5:VO!(yQlO,5:VO!BeQpO,5:VO$=iQ?MtO,5:VOOQO,5;^,5;^O$=sQpO'#IcO$>ZQ`O,5@_OOQ!0Lf1G/p1G/pO$>cQpO'#IiO$>mQ`O,5@nOOQ!0Lb1G0w1G0wO##hQpO,5:VOOQO'#Ie'#IeO$>uQpO,5:oOOQ!0Ln,5:o,5:oO#'cQ`O1G0XOOQ!0Lf1G0X1G0XO%[QlO1G0XOOQ!0Lf1G0r1G0rO>wQ`O1G0rO!BeQpO1G0rO!BmQMhO1G0rOOQ!0Lb1G5z1G5zO!BYQ!0LrO1G0[OOQO1G0k1G0kO%[QlO1G0kO$>|Q!0LrO1G0kO$?XQ!0LrO1G0kO!BeQpO1G0[OCuQpO1G0[O$?gQ!0LrO1G0kOOQO1G0[1G0[O$?{Q!0MxO1G0kPOOO-E<Y-E<YPOOO1G.h1G.hOOOO1G/g1G/gO$@VQ!bO,5<hO$@_Q!fO1G4hOOQO1G4n1G4nO%[QlO,5>|O$@iQ`O1G5xO$@qQ`O1G6WO$@yQ!fO1G6XO9ZQ`O,5?SO$ATQ!0MxO1G6UO%[QlO1G6UO$AeQ!0LrO1G6UO$AvQ`O1G6TO$AvQ`O1G6TO9ZQ`O1G6TO$BOQ`O,5?VO9ZQ`O,5?VOOQO,5?V,5?VO$BdQ`O,5?VO$)iQ`O,5?VOOQO-E<i-E<iOOQS1G0_1G0_OOQS1G0a1G0aO#-tQ`O1G0aOOQ[7+(d7+(dO!&iQMhO7+(dO%[QlO7+(dO$BrQ`O7+(dO$B}QMhO7+(dO$C]Q!0MzO,5=WO$EhQ!0MzO,5=YO$GsQ!0MzO,5=WO$JUQ!0MzO,5=YO$LgQ!0MzO,59sO$NlQ!0MzO,5<jO%!wQ!0MzO,5<lO%%SQ!0MzO,5<zOOQ!0Lf7+&_7+&_O%'eQ!0MxO7+&_O%(XQlO'#IdO%(fQ`O,5@aO%(nQ!fO,5@aOOQ!0Lf1G/}1G/}O%(xQ`O7+&hOOQ!0Lf7+&h7+&hO%(}Q?MtO,5:dO%[QlO7+&yO%)XQ?MtO,5:`O%)fQ?MtO,5:hO%)pQ?MtO,5:jO%)zQMhO'#IgO%*UQ`O,5@fOOQ!0Lh1G0b1G0bOOQO1G1q1G1qOOQO1G1r1G1rO%*^Q!jO,5<YO!(yQlO,5<XOOQO-E<j-E<jOOQ!0Lf7+'X7+'XOOOW7+'d7+'dOOOW1G1{1G1{O%*iQ`O1G1{OOQ!0Lf1G1}1G1}OOOO,59m,59mO%*nQ!dO,59mOOOO-E<^-E<^OOQ!0Lh1G/V1G/VO%*uQ!0MxO7+'jOOQ!0Lh,5?[,5?[O%+iQMhO1G2eP%+pQ`O'#IpPOQ!0Lh-E<n-E<nO%,^QMjO,5?_OOQ!0Lh-E<q-E<qO%-PQMjO,5?aOOQ!0Lh-E<s-E<sO%-ZQ!dO1G2vO%-bQ!dO'#CrO%-xQMhO'#KQO$#^QlO'#JtOOQ!0Lh1G2^1G2^O%.PQ`O'#IoO%.eQ`O,5@tO%.eQ`O,5@tO%.mQ`O,5@tO%.xQ`O,5@tOOQO1G2`1G2`O%/WQMjO1G2_O!+rQMhO1G2_O%/hQ(CWO'#IqO%/uQ`O,5@uO!&iQMhO,5@uO%/}Q!dO,5@uOOQ!0Lh1G2c1G2cO%2_Q!fO'#CiO%2iQ`O,5=OOOQ!0Lb,5<|,5<|O%2qQpO,5<|OOQ!0Lb,5<},5<}OCfQ`O,5<|O%2|QpO,5<|OOQ!0Lb,5=Q,5=QO$)iQ`O,5=UOOQO,5?^,5?^OOQO-E<p-E<pOOQ!0Lp1G2g1G2gO##hQpO,5<|O$#^QlO,5=OO%3[Q`O,5<}O%3gQpO,5<}O!+rQMhO'#IsO%4aQMjO1G2rO!+rQMhO'#IuO%5SQMjO1G2tO%5^QMjO1G5oO%5hQMjO1G5oOOQO,5?c,5?cOOQO-E<u-E<uOOQO1G.{1G.{O!9lQpO,59uO%[QlO,59uOOQ!0Lh,5<i,5<iO%5uQ`O1G2YO!+rQMhO1G2aO!+rQMhO1G5oO!+rQMhO1G5oO%5zQ!0MxO7+'lOOQ!0Lf7+'l7+'lO!$fQlO7+'lO%6nQ`O,5;^OOQ!0Lb,5?e,5?eOOQ!0Lb-E<w-E<wO%6sQ!dO'#K[O#'cQ`O7+(dO4UQ!fO7+(dO$BuQ`O7+(dO%6}Q!0MvO'#CiO%7nQ!0LrO,5=RO%8PQ!0MvO,5=RO%8dQ`O,5=ROOQ!0Lb1G5m1G5mOOQ[7+$a7+$aO!BYQ!0LrO7+$aO!BeQpO7+$aO!$fQlO7+&_O%8lQ`O'#JOO%9TQ`O,5@}OOQO1G3f1G3fO9aQ`O,5@}O%9TQ`O,5@}O%9]Q`O,5@}OOQO,5?k,5?kOOQO-E<}-E<}OOQ!0Lf7+'S7+'SO%9bQ`O7+)PO9kQ!0LrO7+)PO9aQ`O7+)PO@iQ`O7+)POOQ[7+(o7+(oO%9gQ!0MvO7+(lO!&iQMhO7+(lO!DfQ`O7+(mOOQ[7+(m7+(mO!&iQMhO7+(mO%9qQ`O'#K`O%9|Q`O,5=kOOQO,5?g,5?gOOQO-E<y-E<yOOQ[7+(r7+(rO%;`QpO'#HYOOQ[1G3_1G3_O!&iQMhO1G3_O%[QlO1G3_O%;gQ`O1G3_O%;rQMhO1G3_O9kQ!0LrO1G3aO$#yQ`O1G3aO9UQ`O1G3aO!BeQpO1G3aO!BmQMhO1G3aO%<QQ`O'#I}O%<fQ`O,5@{O%<nQpO,5@{OOQ!0Lb1G3b1G3bOOQ[7+$V7+$VO@iQ`O7+$VO9kQ!0LrO7+$VO%<yQ`O7+$VO%[QlO1G6jO%[QlO1G6kO%=OQ!0LrO1G6jO%=YQlO1G3iO%=aQ`O1G3iO%=fQlO1G3iOOQ[7+)R7+)RO9kQ!0LrO7+)]O`QlO7+)_OOQ['#Kf'#KfOOQ['#JQ'#JQO%=mQlO,5>^OOQ[,5>^,5>^O%[QlO'#HsO%=zQ`O'#HuOOQ[,5>d,5>dO9ZQ`O,5>dOOQ[,5>f,5>fOOQ[7+)h7+)hOOQ[7+)n7+)nOOQ[7+)r7+)rOOQ[7+)t7+)tO%>PQpO1G5zO%>kQ?MtO1G0xO%>uQ`O1G0xOOQO1G/q1G/qO%?QQ?MtO1G/qO>wQ`O1G/qO!(yQlO'#DkOOQO,5>},5>}OOQO-E<a-E<aOOQO,5?T,5?TOOQO-E<g-E<gO!BeQpO1G/qOOQO-E<c-E<cOOQ!0Ln1G0Z1G0ZOOQ!0Lf7+%s7+%sO#'cQ`O7+%sOOQ!0Lf7+&^7+&^O>wQ`O7+&^O!BeQpO7+&^OOQO7+%v7+%vO$?{Q!0MxO7+&VOOQO7+&V7+&VO%[QlO7+&VO%?[Q!0LrO7+&VO!BYQ!0LrO7+%vO!BeQpO7+%vO%?gQ!0LrO7+&VO%?uQ!0MxO7++pO%[QlO7++pO%@VQ`O7++oO%@VQ`O7++oOOQO1G4q1G4qO9ZQ`O1G4qO%@_Q`O1G4qOOQS7+%{7+%{O#'cQ`O<<LOO4UQ!fO<<LOO%@mQ`O<<LOOOQ[<<LO<<LOO!&iQMhO<<LOO%[QlO<<LOO%@uQ`O<<LOO%AQQ!0MzO,5?_O%C]Q!0MzO,5?aO%EhQ!0MzO1G2_O%GyQ!0MzO1G2rO%JUQ!0MzO1G2tO%LaQ!fO,5?OO%[QlO,5?OOOQO-E<b-E<bO%LkQ`O1G5{OOQ!0Lf<<JS<<JSO%LsQ?MtO1G0sO%NzQ?MtO1G0}O& RQ?MtO1G0}O&#SQ?MtO1G0}O&#ZQ?MtO1G0}O&%[Q?MtO1G0}O&']Q?MtO1G0}O&'dQ?MtO1G0}O&'kQ?MtO1G0}O&)lQ?MtO1G0}O&)sQ?MtO1G0}O&)zQ!0MxO<<JeO&+rQ?MtO1G0}O&,oQ?MvO1G0}O&-rQ?MvO'#JjO&/xQ?MtO1G1bO&0VQ?MtO1G0SO&0aQMjO,5?ROOQO-E<e-E<eO!(yQlO'#FpOOQO'#KX'#KXOOQO1G1t1G1tO&0kQ`O1G1sO&0pQ?MtO,5?YOOOW7+'g7+'gOOOO1G/X1G/XO&0zQ!dO1G4vOOQ!0Lh7+(P7+(PP!&iQMhO,5?[O!+rQMhO7+(bO&1RQ`O,5?ZO9ZQ`O,5?ZOOQO-E<m-E<mO&1aQ`O1G6`O&1aQ`O1G6`O&1iQ`O1G6`O&1tQMjO7+'yO&2UQ!dO,5?]O&2`Q`O,5?]O!&iQMhO,5?]OOQO-E<o-E<oO&2eQ!dO1G6aO&2oQ`O1G6aO&2wQ`O1G2jO!&iQMhO1G2jOOQ!0Lb1G2h1G2hOOQ!0Lb1G2i1G2iO%2qQpO1G2hO!BeQpO1G2hOCfQ`O1G2hOOQ!0Lb1G2p1G2pO&2|QpO1G2hO&3[Q`O1G2jO$)iQ`O1G2iOCfQ`O1G2iO$#^QlO1G2jO&3dQ`O1G2iO&4WQMjO,5?_OOQ!0Lh-E<r-E<rO&4yQMjO,5?aOOQ!0Lh-E<t-E<tO!+rQMhO7++ZOOQ!0Lh1G/a1G/aO&5TQ`O1G/aOOQ!0Lh7+'t7+'tO&5YQMjO7+'{O&5jQMjO7++ZO&5tQMjO7++ZO&6RQ!0MxO<<KWOOQ!0Lf<<KW<<KWO&6uQ`O1G0xO!&iQMhO'#IxO&6zQ`O,5@vO&8|Q!fO<<LOO!&iQMhO1G2mO&9TQ!0LrO1G2mOOQ[<<G{<<G{O!BYQ!0LrO<<G{O&9fQ!0MxO<<IyOOQ!0Lf<<Iy<<IyOOQO,5?j,5?jO&:YQ`O,5?jO&:_Q`O,5?jOOQO-E<|-E<|O&:mQ`O1G6iO&:mQ`O1G6iO9aQ`O1G6iO@iQ`O<<LkOOQ[<<Lk<<LkO&:uQ`O<<LkO9kQ!0LrO<<LkOOQ[<<LW<<LWO%9gQ!0MvO<<LWOOQ[<<LX<<LXO!DfQ`O<<LXO&:zQpO'#IzO&;VQ`O,5@zO!(yQlO,5@zOOQ[1G3V1G3VOOQO'#I|'#I|O9kQ!0LrO'#I|O&;_QpO,5=tOOQ[,5=t,5=tO&;fQpO'#EeO&;mQpO'#GdO&;rQ`O7+(yO&;wQ`O7+(yOOQ[7+(y7+(yO!&iQMhO7+(yO%[QlO7+(yO&<PQ`O7+(yOOQ[7+({7+({O9kQ!0LrO7+({O$#yQ`O7+({O9UQ`O7+({O!BeQpO7+({O&<[Q`O,5?iOOQO-E<{-E<{OOQO'#H]'#H]O&<gQ`O1G6gO9kQ!0LrO<<GqOOQ[<<Gq<<GqO@iQ`O<<GqO&<oQ`O7+,UO&<tQ`O7+,VO%[QlO7+,UO%[QlO7+,VOOQ[7+)T7+)TO&<yQ`O7+)TO&=OQlO7+)TO&=VQ`O7+)TOOQ[<<Lw<<LwOOQ[<<Ly<<LyOOQ[-E=O-E=OOOQ[1G3x1G3xO&=[Q`O,5>_OOQ[,5>a,5>aO&=aQ`O1G4OO9ZQ`O7+&dO!(yQlO7+&dOOQO7+%]7+%]O&=fQ?MtO1G6XO>wQ`O7+%]OOQ!0Lf<<I_<<I_OOQ!0Lf<<Ix<<IxO>wQ`O<<IxOOQO<<Iq<<IqO$?{Q!0MxO<<IqO%[QlO<<IqOOQO<<Ib<<IbO!BYQ!0LrO<<IbO&=pQ!0LrO<<IqO&={Q!0MxO<= [O&>]Q`O<= ZOOQO7+*]7+*]O9ZQ`O7+*]OOQ[ANAjANAjO&>eQ!fOANAjO!&iQMhOANAjO#'cQ`OANAjO4UQ!fOANAjO&>lQ`OANAjO%[QlOANAjO&>tQ!0MzO7+'yO&AVQ!0MzO,5?_O&CbQ!0MzO,5?aO&EmQ!0MzO7+'{O&HOQ!fO1G4jO&HYQ?MtO7+&_O&J^Q?MvO,5=WO&LeQ?MvO,5=YO&LuQ?MvO,5=WO&MVQ?MvO,5=YO&MgQ?MvO,59sO' mQ?MvO,5<jO'#pQ?MvO,5<lO'&UQ?MvO,5<zO''zQ?MtO7+'jO'(XQ?MtO7+'lO'(fQ`O,5<[OOQO7+'_7+'_OOQ!0Lh7+*b7+*bO'(kQMjO<<K|OOQO1G4u1G4uO'(rQ`O1G4uO'(}Q`O1G4uO')]Q`O7++zO')]Q`O7++zO!&iQMhO1G4wO')eQ!dO1G4wO')oQ`O7++{O')wQ`O7+(UO'*SQ!dO7+(UOOQ!0Lb7+(S7+(SOOQ!0Lb7+(T7+(TO!BeQpO7+(SOCfQ`O7+(SO'*^Q`O7+(UO!&iQMhO7+(UO$)iQ`O7+(TO'*cQ`O7+(UOCfQ`O7+(TO'*kQMjO<<NuOOQ!0Lh7+${7+${O!+rQMhO<<NuO'*uQ!dO,5?dOOQO-E<v-E<vO'+PQ!0MvO7+(XO!&iQMhO7+(XOOQ[AN=gAN=gO9aQ`O1G5UOOQO1G5U1G5UO'+aQ`O1G5UO'+fQ`O7+,TO'+fQ`O7+,TO9kQ!0LrOANBVO@iQ`OANBVOOQ[ANBVANBVOOQ[ANArANArOOQ[ANAsANAsO'+nQ`O,5?fOOQO-E<x-E<xO'+yQ?MtO1G6fOOQO,5?h,5?hOOQO-E<z-E<zOOQ[1G3`1G3`O',TQ`O,5=OOOQ[<<Le<<LeO!&iQMhO<<LeO&;rQ`O<<LeO',YQ`O<<LeO%[QlO<<LeOOQ[<<Lg<<LgO9kQ!0LrO<<LgO$#yQ`O<<LgO9UQ`O<<LgO',bQpO1G5TO',mQ`O7+,ROOQ[AN=]AN=]O9kQ!0LrOAN=]OOQ[<= p<= pOOQ[<= q<= qO',uQ`O<= pO',zQ`O<= qOOQ[<<Lo<<LoO'-PQ`O<<LoO'-UQlO<<LoOOQ[1G3y1G3yO>wQ`O7+)jO'-]Q`O<<JOO'-hQ?MtO<<JOOOQO<<Hw<<HwOOQ!0LfAN?dAN?dOOQOAN?]AN?]O$?{Q!0MxOAN?]OOQOAN>|AN>|O%[QlOAN?]OOQO<<Mw<<MwOOQ[G27UG27UO!&iQMhOG27UO#'cQ`OG27UO'-rQ!fOG27UO4UQ!fOG27UO'-yQ`OG27UO'.RQ?MtO<<JeO'.`Q?MvO1G2_O'0UQ?MvO,5?_O'2XQ?MvO,5?aO'4[Q?MvO1G2rO'6_Q?MvO1G2tO'8bQ?MtO<<KWO'8oQ?MtO<<IyOOQO1G1v1G1vO!+rQMhOANAhOOQO7+*a7+*aO'8|Q`O7+*aO'9XQ`O<= fO'9aQ!dO7+*cOOQ!0Lb<<Kp<<KpO$)iQ`O<<KpOCfQ`O<<KpO'9kQ`O<<KpO!&iQMhO<<KpOOQ!0Lb<<Kn<<KnO!BeQpO<<KnO'9vQ!dO<<KpOOQ!0Lb<<Ko<<KoO':QQ`O<<KpO!&iQMhO<<KpO$)iQ`O<<KoO':VQMjOANDaO':aQ!0MvO<<KsOOQO7+*p7+*pO9aQ`O7+*pO':qQ`O<= oOOQ[G27qG27qO9kQ!0LrOG27qO!(yQlO1G5QO':yQ`O7+,QO';RQ`O1G2jO&;rQ`OANBPOOQ[ANBPANBPO!&iQMhOANBPO';WQ`OANBPOOQ[ANBRANBRO9kQ!0LrOANBRO$#yQ`OANBROOQO'#H^'#H^OOQO7+*o7+*oOOQ[G22wG22wOOQ[ANE[ANE[OOQ[ANE]ANE]OOQ[ANBZANBZO';`Q`OANBZOOQ[<<MU<<MUO!(yQlOAN?jOOQOG24wG24wO$?{Q!0MxOG24wO#'cQ`OLD,pOOQ[LD,pLD,pO!&iQMhOLD,pO';eQ!fOLD,pO';lQ?MvO7+'yO'=bQ?MvO,5?_O'?eQ?MvO,5?aO'AhQ?MvO7+'{O'C^QMjOG27SOOQO<<M{<<M{OOQ!0LbANA[ANA[O$)iQ`OANA[OCfQ`OANA[O'CnQ!dOANA[OOQ!0LbANAYANAYO'CuQ`OANA[O!&iQMhOANA[O'DQQ!dOANA[OOQ!0LbANAZANAZOOQO<<N[<<N[OOQ[LD-]LD-]O'D[Q?MtO7+*lOOQO'#Ge'#GeOOQ[G27kG27kO&;rQ`OG27kO!&iQMhOG27kOOQ[G27mG27mO9kQ!0LrOG27mOOQ[G27uG27uO'DfQ?MtOG25UOOQOLD*cLD*cOOQ[!$(![!$(![O#'cQ`O!$(![O!&iQMhO!$(![O'DpQ!0MzOG27SOOQ!0LbG26vG26vO$)iQ`OG26vO'GRQ`OG26vOCfQ`OG26vO'G^Q!dOG26vO!&iQMhOG26vOOQ[LD-VLD-VO&;rQ`OLD-VOOQ[LD-XLD-XOOQ[!)9Ev!)9EvO#'cQ`O!)9EvOOQ!0LbLD,bLD,bO$)iQ`OLD,bOCfQ`OLD,bO'GeQ`OLD,bO'GpQ!dOLD,bOOQ[!$(!q!$(!qOOQ[!.K;b!.K;bO'GwQ?MvOG27SOOQ!0Lb!$( |!$( |O$)iQ`O!$( |OCfQ`O!$( |O'ImQ`O!$( |OOQ!0Lb!)9Eh!)9EhO$)iQ`O!)9EhOCfQ`O!)9EhOOQ!0Lb!.K;S!.K;SO$)iQ`O!.K;SOOQ!0Lb!4/0n!4/0nO!(yQlO'#DxO1PQ`O'#EVO'IxQ!fO'#JpO'JPQ!L^O'#DtO'JWQlO'#D|O'J_Q!fO'#CiO'LuQ!fO'#CiO!(yQlO'#EOO'MVQlO,5;XO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO'#InO( YQ`O,5<hO!(yQlO,5;cO( bQMhO,5;cO(!{QMhO,5;cO!(yQlO,5;vO!&iQMhO'#GlO( bQMhO'#GlO!&iQMhO'#GnO( bQMhO'#GnO1SQ`O'#DXO1SQ`O'#DXO!&iQMhO'#GOO( bQMhO'#GOO!&iQMhO'#GQO( bQMhO'#GQO!&iQMhO'#G`O( bQMhO'#G`O!(yQlO,5:hO(#SQpO'#D]O(#^QpO'#JtO!(yQlO,5@mO'MVQlO1G0sO(#hQ?MtO'#CiO!(yQlO1G2OO!&iQMhO'#IsO( bQMhO'#IsO!&iQMhO'#IuO( bQMhO'#IuO(#rQ!dO'#CrO!&iQMhO,5<sO( bQMhO,5<sO'MVQlO1G2QO!(yQlO7+&yO!&iQMhO1G2_O( bQMhO1G2_O!&iQMhO'#IsO( bQMhO'#IsO!&iQMhO'#IuO( bQMhO'#IuO!&iQMhO1G2aO( bQMhO1G2aO'MVQlO7+'lO'MVQlO7+&_O!&iQMhOANAhO( bQMhOANAhO($VQ`O'#EmO($[Q`O'#EmO($dQ`O'#F[O($iQ`O'#EwO($nQ`O'#KRO($yQ`O'#KPO(%UQ`O,5;XO(%ZQMjO,5<dO(%bQ`O'#GXO(%gQ`O'#GXO(%lQ`O,5<fO(%tQ`O,5;XO(%|Q?MtO1G1_O(&TQ`O,5<sO(&YQ`O,5<sO(&_Q`O,5<uO(&dQ`O,5<uO(&iQ`O1G2QO(&nQ`O1G0sO(&sQMjO<<K|O(&zQMjO<<K|O7eQMhO'#F{O9UQ`O'#FzOAdQ`O'#ElO!(yQlO,5;sO!3^Q`O'#GXO!3^Q`O'#GXO!3^Q`O'#GZO!3^Q`O'#GZO!+rQMhO7+(bO!+rQMhO7+(bO%-ZQ!dO1G2vO%-ZQ!dO1G2vO!&iQMhO,5=[O!&iQMhO,5=[",stateData:"((P~O'zOS'{OSTOS'|RQ~OPYOQYOSfOY!VOaqOdzOeyOj!POnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]XO!guO!jZO!mYO!nYO!oYO!qvO!swO!vxO!z]O$V|O$miO%g}O%i!QO%k!OO%l!OO%m!OO%p!RO%r!SO%u!TO%v!TO%x!UO&U!WO&[!XO&^!YO&`!ZO&b![O&e!]O&k!^O&q!_O&s!`O&u!aO&w!bO&y!cO(RSO(TTO(WUO(_VO(m[O~OWtO~P`OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(R!dO(TTO(WUO(_VO(m[O~Oa!wOq!nO!Q!oO!`!yO!a!vO!b!vO!z;wO#R!pO#S!pO#T!xO#U!pO#V!pO#Y!zO#Z!zO(S!lO(TTO(WUO(c!mO(m!sO~O'|!{O~OP]XR]X[]Xa]Xp]X!O]X!Q]X!Z]X!j]X!n]X#P]X#Q]X#^]X#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X'x]X(_]X(p]X(w]X(x]X~O!e%QX~P(qO_!}O(T#PO(U!}O(V#PO~O_#QO(V#PO(W#PO(X#QO~Ov#SO!S#TO(`#TO(a#VO~OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(R;{O(TTO(WUO(_VO(m[O~O!Y#ZO!Z#WO!W(fP!W(tP~P+}O![#cO~P`OPYOQYOSfOd!jOe!iOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(TTO(WUO(_VO(m[O~On#mO!Y#iO!z]O#g#lO#h#iO(R;|O!i(qP~P.iO!j#oO(R#nO~O!v#sO!z]O%g#tO~O#i#uO~O!e#vO#i#uO~OP$[OR#zO[$cOp$aO!O#yO!Q#{O!Z$_O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO#y$WO#z$XO(_VO(p$YO(w#|O(x#}O~Oa(dX'x(dX'u(dX!i(dX!W(dX!](dX%h(dX!e(dX~P1qO#Q$dO#^$eO$P$eOP(eXR(eX[(eXp(eX!O(eX!Q(eX!Z(eX!j(eX!n(eX#P(eX#l(eX#m(eX#n(eX#o(eX#p(eX#q(eX#r(eX#s(eX#t(eX#u(eX#w(eX#y(eX#z(eX(_(eX(p(eX(w(eX(x(eX!](eX%h(eX~Oa(eX'x(eX'u(eX!W(eX!i(eXt(eX!e(eX~P4UO#^$eO~O$[$hO$^$gO$e$mO~OSfO!]$nO$h$oO$j$qO~Oh%VOj%cOn%WOp%XOq$tOr$tOx%YOz%ZO|%[O!Q${O!]$|O!g%aO!j$xO#h%bO$V%_O$s%]O$u%^O$x%`O(R$sO(TTO(WUO(_$uO(w$}O(x%POg([P~O!j%dO~O!Q%gO!]%hO(R%fO~O!e%lO~Oa%mO'x%mO~O!O%qO~P%[O(S!lO~P%[O%m%uO~P%[Oh%VO!j%dO(R%fO(S!lO~Oe%|O!j%dO(R%fO~O#t$RO~O!O&RO!]&OO!j&QO%i&UO(R%fO(S!lO(TTO(WUO`)UP~O!v#sO~O%r&WO!Q)QX!])QX(R)QX~O(R&XO~Oj!PO!s&^O%i!QO%k!OO%l!OO%m!OO%p!RO%r!SO%u!TO%v!TO~Od&cOe&bO!v&`O%g&aO%z&_O~P<POd&fOeyOj!PO!]&eO!s&^O!vxO!z]O%g}O%k!OO%l!OO%m!OO%p!RO%r!SO%u!TO%v!TO%x!UO~Ob&iO#^&lO%i&gO(S!lO~P=UO!j&mO!s&qO~O!j#oO~O!]XO~Oa%mO'v&yO'x%mO~Oa%mO'v&|O'x%mO~Oa%mO'v'OO'x%mO~O'u]X!W]Xt]X!i]X&Y]X!]]X%h]X!e]X~P(qO!`']O!a'UO!b'UO(S!lO(TTO(WUO~Oq'SO!Q'RO!Y'VO(c'QO![(gP![(vP~P@]Ol'`O!]'^O(R%fO~Oe'eO!j%dO(R%fO~O!O&RO!j&QO~Oq!nO!Q!oO!z;wO#R!pO#S!pO#U!pO#V!pO(S!lO(TTO(WUO(c!mO(m!sO~O!`'kO!a'jO!b'jO#T!pO#Y'lO#Z'lO~PAwOa%mOh%VO!e#vO!j%dO'x%mO(p'nO~O!n'rO#^'pO~PCVOq!nO!Q!oO(TTO(WUO(c!mO(m!sO~O!]XOq(kX!Q(kX!`(kX!a(kX!b(kX!z(kX#R(kX#S(kX#T(kX#U(kX#V(kX#Y(kX#Z(kX(S(kX(T(kX(W(kX(c(kX(m(kX~O!a'jO!b'jO(S!lO~PCuO'}'vO(O'vO(P'xO~O_!}O(T'zO(U!}O(V'zO~O_#QO(V'zO(W'zO(X#QO~Ot'|O~P%[Ov#SO!S#TO(`#TO(a(PO~O!Y(RO!W'UX!W'[X!Z'UX!Z'[X~P+}O!Z(TO!W(fX~OP$[OR#zO[$cOp$aO!O#yO!Q#{O!Z(TO!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO#y$WO#z$XO(_VO(p$YO(w#|O(x#}O~O!W(fX~PGpO!W(YO~O!W(sX!Z(sX!e(sX!i(sX(p(sX~O#^(sX#i#bX![(sX~PIsO#^(ZO!W(uX!Z(uX~O!Z([O!W(tX~O!W(_O~O#^$eO~PIsO![(`O~P`OR#zO!O#yO!Q#{O!j#xO(_VOP!la[!lap!la!Z!la!n!la#P!la#l!la#m!la#n!la#o!la#p!la#q!la#r!la#s!la#t!la#u!la#w!la#y!la#z!la(p!la(w!la(x!la~Oa!la'x!la'u!la!W!la!i!lat!la!]!la%h!la!e!la~PKZO!i(aO~O!e#vO#^(bO(p'nO!Z(rXa(rX'x(rX~O!i(rX~PMvO!Q%gO!]%hO!z]O#g(gO#h(fO(R%fO~O!Z(hO!i(qX~O!i(jO~O!Q%gO!]%hO#h(fO(R%fO~OP(eXR(eX[(eXp(eX!O(eX!Q(eX!Z(eX!j(eX!n(eX#P(eX#l(eX#m(eX#n(eX#o(eX#p(eX#q(eX#r(eX#s(eX#t(eX#u(eX#w(eX#y(eX#z(eX(_(eX(p(eX(w(eX(x(eX~O!e#vO!i(eX~P! dOR(lO!O(kO!j#xO#Q$dO!z!ya!Q!ya~O!v!ya%g!ya!]!ya#g!ya#h!ya(R!ya~P!#eO!v(pO~OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]XO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(R!dO(TTO(WUO(_VO(m[O~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<eO!Q${O!]$|O!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(R(tO(TTO(WUO(_$uO(w$}O(x%PO~O#i(vO~O!Y(xO!i(iP~P%[O(c(zO(m[O~O!Q(|O!j#xO(c(zO(m[O~OP;vOQ;vOSfOd=rOe!iOnkOp;vOqkOrkOxkOz;vO|;vO!QWO!UkO!VkO!]!eO!g;yO!jZO!m;vO!n;vO!o;vO!q;zO!s;}O!v!hO$V!kO$m=pO(R)ZO(TTO(WUO(_VO(m[O~O!Z$_Oa$pa'x$pa'u$pa!i$pa!W$pa!]$pa%h$pa!e$pa~Oj)bO~P!&iOh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|%[O!Q${O!]$|O!g%aO!j$xO#h%bO$V%_O$s%]O$u%^O$x%`O(R(tO(TTO(WUO(_$uO(w$}O(x%PO~Og(nP~P!+rO!O)gO!e)fO!]$]X$Y$]X$[$]X$^$]X$e$]X~O!e)fO!](yX$Y(yX$[(yX$^(yX$e(yX~O!O)gO~P!-{O!O)gO!](yX$Y(yX$[(yX$^(yX$e(yX~O!])iO$Y)mO$[)hO$^)hO$e)nO~O!Y)qO~P!(yO$[$hO$^$gO$e)uO~Ol$yX!O$yX#Q$yX'w$yX(w$yX(x$yX~OgkXg$yXlkX!ZkX#^kX~P!/qOv)wO(`)xO(a)zO~Ol*TO!O)|O'w)}O(w$}O(x%PO~Og){O~P!0uOg*UO~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<eO!Q*WO!]*XO!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(TTO(WUO(_$uO(w$}O(x%PO~O!Y*[O(R*VO!i(|P~P!1dO#i*^O~O!j*_O~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<eO!Q${O!]$|O!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(R*aO(TTO(WUO(_$uO(w$}O(x%PO~O!Y*dO!W(}P~P!3cOp*pOq!nO!Q*fO!`*nO!a*hO!b*hO!j*_O#Y*oO%_*jO(S!lO(TTO(WUO(c!mO~O![*mO~P!5WO#Q$dOl(^X!O(^X'w(^X(w(^X(x(^X!Z(^X#^(^X~Og(^X#}(^X~P!6YOl*uO#^*tOg(]X!Z(]X~O!Z*vOg([X~Oj%cO(R&XOg([P~Oq*yO~O!j+OO~O(R(tO~On+TO!Q%gO!Y#iO!]%hO!z]O#g#lO#h#iO(R%fO!i(qP~O!e#vO#i+UO~O!Q%gO!Y+WO!Z([O!]%hO(R%fO!W(tP~Oq'YO!Q+YO!Y+XO(TTO(WUO(c(zO~O![(vP~P!9]O!Z+ZOa)RX'x)RX~OP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO#y$WO#z$XO(_VO(p$YO(w#|O(x#}O~Oa!ha!Z!ha'x!ha'u!ha!W!ha!i!hat!ha!]!ha%h!ha!e!ha~P!:TOR#zO!O#yO!Q#{O!j#xO(_VOP!pa[!pap!pa!Z!pa!n!pa#P!pa#l!pa#m!pa#n!pa#o!pa#p!pa#q!pa#r!pa#s!pa#t!pa#u!pa#w!pa#y!pa#z!pa(p!pa(w!pa(x!pa~Oa!pa'x!pa'u!pa!W!pa!i!pat!pa!]!pa%h!pa!e!pa~P!<kOR#zO!O#yO!Q#{O!j#xO(_VOP!ra[!rap!ra!Z!ra!n!ra#P!ra#l!ra#m!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#w!ra#y!ra#z!ra(p!ra(w!ra(x!ra~Oa!ra'x!ra'u!ra!W!ra!i!rat!ra!]!ra%h!ra!e!ra~P!?ROh%VOl+dO!]'^O%h+cO~O!e+fOa(ZX!](ZX'x(ZX!Z(ZX~Oa%mO!]XO'x%mO~Oh%VO!j%dO~Oh%VO!j%dO(R%fO~O!e#vO#i(vO~Ob+qO%i+rO(R+nO(TTO(WUO![)VP~O!Z+sO`)UX~O[+wO~O`+xO~O!]&OO(R%fO(S!lO`)UP~Oh%VO#^+}O~Oh%VOl,QO!]$|O~O!],SO~O!O,UO!]XO~O%m%uO~O!v,ZO~Oe,`O~Ob,aO(R#nO(TTO(WUO![)TP~Oe%|O~O%i!QO(R&XO~P=UO[,fO`,eO~OPYOQYOSfOdzOeyOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!guO!jZO!mYO!nYO!oYO!qvO!vxO!z]O$miO%g}O(TTO(WUO(_VO(m[O~O!]!eO!s!gO$V!kO(R!dO~P!FRO`,eOa%mO'x%mO~OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!v!hO$V!kO$miO(R!dO(TTO(WUO(_VO(m[O~Oa,kOj!OO!swO%k!OO%l!OO%m!OO~P!HkO!j&mO~O&[,qO~O!],sO~O&m,uO&o,vOP&jaQ&jaS&jaY&jaa&jad&jae&jaj&jan&jap&jaq&jar&jax&jaz&ja|&ja!Q&ja!U&ja!V&ja!]&ja!g&ja!j&ja!m&ja!n&ja!o&ja!q&ja!s&ja!v&ja!z&ja$V&ja$m&ja%g&ja%i&ja%k&ja%l&ja%m&ja%p&ja%r&ja%u&ja%v&ja%x&ja&U&ja&[&ja&^&ja&`&ja&b&ja&e&ja&k&ja&q&ja&s&ja&u&ja&w&ja&y&ja'u&ja(R&ja(T&ja(W&ja(_&ja(m&ja![&ja&c&jab&ja&h&ja~O(R,{O~Oh!cX!Z!PX![!PX!e!PX!e!cX!j!cX#^!PX~O!Z!cX![!cX~P# qO!e-QO#^-POh(hX!Z#fX![#fX!e(hX!j(hX~O!Z(hX![(hX~P#!dOh%VO!e-SO!j%dO!Z!_X![!_X~Oq!nO!Q!oO(TTO(WUO(c!mO~OP;vOQ;vOSfOd=rOe!iOnkOp;vOqkOrkOxkOz;vO|;vO!QWO!UkO!VkO!]!eO!g;yO!jZO!m;vO!n;vO!o;vO!q;zO!s;}O!v!hO$V!kO$m=pO(TTO(WUO(_VO(m[O~O(R<rO~P##yO!Z-WO![(gX~O![-YO~O!e-QO#^-PO!Z#fX![#fX~O!Z-ZO![(vX~O![-]O~O!a-^O!b-^O(S!lO~P##hO![-aO~P'_Ol-dO!]'^O~O!W-iO~Oq!ya!`!ya!a!ya!b!ya#R!ya#S!ya#T!ya#U!ya#V!ya#Y!ya#Z!ya(S!ya(T!ya(W!ya(c!ya(m!ya~P!#eO!n-nO#^-lO~PCVO!a-pO!b-pO(S!lO~PCuOa%mO#^-lO'x%mO~Oa%mO!e#vO#^-lO'x%mO~Oa%mO!e#vO!n-nO#^-lO'x%mO(p'nO~O'}'vO(O'vO(P-uO~Ot-vO~O!W'Ua!Z'Ua~P!:TO!Y-zO!W'UX!Z'UX~P%[O!Z(TO!W(fa~O!W(fa~PGpO!Z([O!W(ta~O!Q%gO!Y.OO!]%hO(R%fO!W'[X!Z'[X~O#^.QO!Z(ra!i(raa(ra'x(ra~O!e#vO~P#,PO!Z(hO!i(qa~O!Q%gO!]%hO#h.UO(R%fO~On.ZO!Q%gO!Y.WO!]%hO!z]O#g.YO#h.WO(R%fO!Z'_X!i'_X~OR._O!j#xO~Oh%VOl.bO!]'^O%h.aO~Oa#ai!Z#ai'x#ai'u#ai!W#ai!i#ait#ai!]#ai%h#ai!e#ai~P!:TOl=|O!O)|O'w)}O(w$}O(x%PO~O#i#]aa#]a#^#]a'x#]a!Z#]a!i#]a!]#]a!W#]a~P#.{O#i(^XP(^XR(^X[(^Xa(^Xp(^X!Q(^X!j(^X!n(^X#P(^X#l(^X#m(^X#n(^X#o(^X#p(^X#q(^X#r(^X#s(^X#t(^X#u(^X#w(^X#y(^X#z(^X'x(^X(_(^X(p(^X!i(^X!W(^X'u(^Xt(^X!](^X%h(^X!e(^X~P!6YO!Z.oO!i(iX~P!:TO!i.rO~O!W.tO~OP$[OR#zO!O#yO!Q#{O!j#xO!n$[O(_VO[#kia#kip#ki!Z#ki#P#ki#m#ki#n#ki#o#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki'x#ki(p#ki(w#ki(x#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#l#ki~P#2kO#l$OO~P#2kOP$[OR#zOp$aO!O#yO!Q#{O!j#xO!n$[O#l$OO#m$PO#n$PO#o$PO(_VO[#kia#ki!Z#ki#P#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki'x#ki(p#ki(w#ki(x#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#p#ki~P#5YO#p$QO~P#5YOP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO(_VOa#ki!Z#ki#w#ki#y#ki#z#ki'x#ki(p#ki(w#ki(x#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#u#ki~P#7wOP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO(_VO(x#}Oa#ki!Z#ki#y#ki#z#ki'x#ki(p#ki(w#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#w$UO~P#:_O#w#ki~P#:_O#u$SO~P#7wOP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO(_VO(w#|O(x#}Oa#ki!Z#ki#z#ki'x#ki(p#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#y#ki~P#=TO#y$WO~P#=TOP]XR]X[]Xp]X!O]X!Q]X!j]X!n]X#P]X#Q]X#^]X#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X(_]X(p]X(w]X(x]X!Z]X![]X~O#}]X~P#?rOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO#u<TO#w<VO#y<XO#z<YO(_VO(p$YO(w#|O(x#}O~O#}.vO~P#BPO#Q$dO#^<`O$P<`O#}(eX![(eX~P! dOa'ba!Z'ba'x'ba'u'ba!i'ba!W'bat'ba!]'ba%h'ba!e'ba~P!:TO[#kia#kip#ki!Z#ki#P#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki'x#ki(p#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~OP$[OR#zO!O#yO!Q#{O!j#xO!n$[O#l$OO#m$PO#n$PO#o$PO(_VO(w#ki(x#ki~P#EROl=|O!O)|O'w)}O(w$}O(x%POP#kiR#ki!Q#ki!j#ki!n#ki#l#ki#m#ki#n#ki#o#ki(_#ki~P#ERO!Z.zOg(nX~P!0uOg.|O~Oa$Oi!Z$Oi'x$Oi'u$Oi!W$Oi!i$Oit$Oi!]$Oi%h$Oi!e$Oi~P!:TO$[.}O$^.}O~O$[/OO$^/OO~O!e)fO#^/PO!]$bX$Y$bX$[$bX$^$bX$e$bX~O!Y/QO~O!])iO$Y/SO$[)hO$^)hO$e/TO~O!Z<ZO![(dX~P#BPO![/UO~O!e)fO$e(yX~O$e/WO~Ot/XO~P!&iOv)wO(`)xO(a/[O~O!Q/_O~O(w$}Ol%`a!O%`a'w%`a(x%`a!Z%`a#^%`a~Og%`a#}%`a~P#LTO(x%POl%ba!O%ba'w%ba(w%ba!Z%ba#^%ba~Og%ba#}%ba~P#LvO!ZfX!efX!ifX!i$yX(pfX~P!/qO!Y/hO!Z([O(R/gO!W(tP!W(}P~P!1dOp*pO!`*nO!a*hO!b*hO!j*_O#Y*oO%_*jO(S!lO(TTO(WUO~Oq<oO!Q/iO!Y+XO![*mO(c<nO![(vP~P#NaO!i/jO~P#.{O!Z/kO!e#vO(p'nO!i(|X~O!i/pO~O!Q%gO!Y*[O!]%hO(R%fO!i(|P~O#i/rO~O!W$yX!Z$yX!e%QX~P!/qO!Z/sO!W(}X~P#.{O!e/uO~O!W/wO~OnkO(R/xO~P.iOh%VOp/}O!e#vO!j%dO(p'nO~O!e+fO~Oa%mO!Z0RO'x%mO~O![0TO~P!5WO!a0UO!b0UO(S!lO~P##hOq!nO!Q0VO(TTO(WUO(c!mO~O#Y0XO~Og%`a!Z%`a#^%`a#}%`a~P!0uOg%ba!Z%ba#^%ba#}%ba~P!0uOj%cO(R&XOg'kX!Z'kX~O!Z*vOg([a~Og0bO~OR0cO!O0cO!Q0dO#Q$dOl{a'w{a(w{a(x{a!Z{a#^{a~Og{a#}{a~P$&dO!O)|O'w)}Ol$ra(w$ra(x$ra!Z$ra#^$ra~Og$ra#}$ra~P$'`O!O)|O'w)}Ol$ta(w$ta(x$ta!Z$ta#^$ta~Og$ta#}$ta~P$(RO#i0gO~Og%Sa!Z%Sa#^%Sa#}%Sa~P!0uOl0iO#^0hOg(]a!Z(]a~O!e#vO~O#i0lO~O!Z+ZOa)Ra'x)Ra~OR#zO!O#yO!Q#{O!j#xO(_VOP!pi[!pip!pi!Z!pi!n!pi#P!pi#l!pi#m!pi#n!pi#o!pi#p!pi#q!pi#r!pi#s!pi#t!pi#u!pi#w!pi#y!pi#z!pi(p!pi(w!pi(x!pi~Oa!pi'x!pi'u!pi!W!pi!i!pit!pi!]!pi%h!pi!e!pi~P$*OOh%VOp%XOq$tOr$tOx%YOz%ZO|<eO!Q${O!]$|O!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(TTO(WUO(_$uO(w$}O(x%PO~On0vO%[0wO(R0tO~P$,fO!e+fOa(Za!](Za'x(Za!Z(Za~O#i0|O~O[]X!ZfX![fX~O!Z0}O![)VX~O![1PO~O[1QO~Ob1SO(R+nO(TTO(WUO~O!]&OO(R%fO`'sX!Z'sX~O!Z+sO`)Ua~O!i1VO~P!:TO[1YO~O`1ZO~O#^1^O~Ol1aO!]$|O~O(c(zO![)SP~Oh%VOl1jO!]1gO%h1iO~O[1tO!Z1rO![)TX~O![1uO~O`1wOa%mO'x%mO~O(R#nO(TTO(WUO~O#Q$dO#^$eO$P$eOP(eXR(eX[(eXp(eX!O(eX!Q(eX!Z(eX!j(eX!n(eX#P(eX#l(eX#m(eX#n(eX#o(eX#p(eX#q(eX#r(eX#s(eX#u(eX#w(eX#y(eX#z(eX(_(eX(p(eX(w(eX(x(eX~O#t1zO&Y1{Oa(eX~P$2PO#^$eO#t1zO&Y1{O~Oa1}O~P%[Oa2PO~O&c2SOP&aiQ&aiS&aiY&aia&aid&aie&aij&ain&aip&aiq&air&aix&aiz&ai|&ai!Q&ai!U&ai!V&ai!]&ai!g&ai!j&ai!m&ai!n&ai!o&ai!q&ai!s&ai!v&ai!z&ai$V&ai$m&ai%g&ai%i&ai%k&ai%l&ai%m&ai%p&ai%r&ai%u&ai%v&ai%x&ai&U&ai&[&ai&^&ai&`&ai&b&ai&e&ai&k&ai&q&ai&s&ai&u&ai&w&ai&y&ai'u&ai(R&ai(T&ai(W&ai(_&ai(m&ai![&aib&ai&h&ai~Ob2YO![2WO&h2XO~P`O!]XO!j2[O~O&o,vOP&jiQ&jiS&jiY&jia&jid&jie&jij&jin&jip&jiq&jir&jix&jiz&ji|&ji!Q&ji!U&ji!V&ji!]&ji!g&ji!j&ji!m&ji!n&ji!o&ji!q&ji!s&ji!v&ji!z&ji$V&ji$m&ji%g&ji%i&ji%k&ji%l&ji%m&ji%p&ji%r&ji%u&ji%v&ji%x&ji&U&ji&[&ji&^&ji&`&ji&b&ji&e&ji&k&ji&q&ji&s&ji&u&ji&w&ji&y&ji'u&ji(R&ji(T&ji(W&ji(_&ji(m&ji![&ji&c&jib&ji&h&ji~O!W2bO~O!Z!_a![!_a~P#BPOq!nO!Q!oO!Y2hO(c!mO!Z'VX!['VX~P@]O!Z-WO![(ga~O!Z']X![']X~P!9]O!Z-ZO![(va~O![2oO~P'_Oa%mO#^2xO'x%mO~Oa%mO!e#vO#^2xO'x%mO~Oa%mO!e#vO!n2|O#^2xO'x%mO(p'nO~Oa%mO'x%mO~P!:TO!Z$_Ot$pa~O!W'Ui!Z'Ui~P!:TO!Z(TO!W(fi~O!Z([O!W(ti~O!W(ui!Z(ui~P!:TO!Z(ri!i(ria(ri'x(ri~P!:TO#^3OO!Z(ri!i(ria(ri'x(ri~O!Z(hO!i(qi~O!Q%gO!]%hO!z]O#g3TO#h3SO(R%fO~O!Q%gO!]%hO#h3SO(R%fO~Ol3[O!]'^O%h3ZO~Oh%VOl3[O!]'^O%h3ZO~O#i%`aP%`aR%`a[%`aa%`ap%`a!Q%`a!j%`a!n%`a#P%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#t%`a#u%`a#w%`a#y%`a#z%`a'x%`a(_%`a(p%`a!i%`a!W%`a'u%`at%`a!]%`a%h%`a!e%`a~P#LTO#i%baP%baR%ba[%baa%bap%ba!Q%ba!j%ba!n%ba#P%ba#l%ba#m%ba#n%ba#o%ba#p%ba#q%ba#r%ba#s%ba#t%ba#u%ba#w%ba#y%ba#z%ba'x%ba(_%ba(p%ba!i%ba!W%ba'u%bat%ba!]%ba%h%ba!e%ba~P#LvO#i%`aP%`aR%`a[%`aa%`ap%`a!Q%`a!Z%`a!j%`a!n%`a#P%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#t%`a#u%`a#w%`a#y%`a#z%`a'x%`a(_%`a(p%`a!i%`a!W%`a'u%`a#^%`at%`a!]%`a%h%`a!e%`a~P#.{O#i%baP%baR%ba[%baa%bap%ba!Q%ba!Z%ba!j%ba!n%ba#P%ba#l%ba#m%ba#n%ba#o%ba#p%ba#q%ba#r%ba#s%ba#t%ba#u%ba#w%ba#y%ba#z%ba'x%ba(_%ba(p%ba!i%ba!W%ba'u%ba#^%bat%ba!]%ba%h%ba!e%ba~P#.{O#i{aP{a[{aa{ap{a!j{a!n{a#P{a#l{a#m{a#n{a#o{a#p{a#q{a#r{a#s{a#t{a#u{a#w{a#y{a#z{a'x{a(_{a(p{a!i{a!W{a'u{at{a!]{a%h{a!e{a~P$&dO#i$raP$raR$ra[$raa$rap$ra!Q$ra!j$ra!n$ra#P$ra#l$ra#m$ra#n$ra#o$ra#p$ra#q$ra#r$ra#s$ra#t$ra#u$ra#w$ra#y$ra#z$ra'x$ra(_$ra(p$ra!i$ra!W$ra'u$rat$ra!]$ra%h$ra!e$ra~P$'`O#i$taP$taR$ta[$taa$tap$ta!Q$ta!j$ta!n$ta#P$ta#l$ta#m$ta#n$ta#o$ta#p$ta#q$ta#r$ta#s$ta#t$ta#u$ta#w$ta#y$ta#z$ta'x$ta(_$ta(p$ta!i$ta!W$ta'u$tat$ta!]$ta%h$ta!e$ta~P$(RO#i%SaP%SaR%Sa[%Saa%Sap%Sa!Q%Sa!Z%Sa!j%Sa!n%Sa#P%Sa#l%Sa#m%Sa#n%Sa#o%Sa#p%Sa#q%Sa#r%Sa#s%Sa#t%Sa#u%Sa#w%Sa#y%Sa#z%Sa'x%Sa(_%Sa(p%Sa!i%Sa!W%Sa'u%Sa#^%Sat%Sa!]%Sa%h%Sa!e%Sa~P#.{Oa#aq!Z#aq'x#aq'u#aq!W#aq!i#aqt#aq!]#aq%h#aq!e#aq~P!:TO!Y3dO!Z'WX!i'WX~P%[O!Z.oO!i(ia~O!Z.oO!i(ia~P!:TO!W3gO~O#}!la![!la~PKZO#}!ha!Z!ha![!ha~P#BPO#}!pa![!pa~P!<kO#}!ra![!ra~P!?ROg'ZX!Z'ZX~P!+rO!Z.zOg(na~OSfO!]3{O$c3|O~O![4QO~Ot4RO~P#.{Oa$lq!Z$lq'x$lq'u$lq!W$lq!i$lqt$lq!]$lq%h$lq!e$lq~P!:TO!W4TO~P!&iO!Q4UO~O!O)|O'w)}O(x%POl'ga(w'ga!Z'ga#^'ga~Og'ga#}'ga~P%+uO!O)|O'w)}Ol'ia(w'ia(x'ia!Z'ia#^'ia~Og'ia#}'ia~P%,hO(p$YO~P#.{O!WfX!W$yX!ZfX!Z$yX!e%QX#^fX~P!/qO(R<xO~P!1dO!Q%gO!Y4XO!]%hO(R%fO!Z'cX!i'cX~O!Z/kO!i(|a~O!Z/kO!e#vO!i(|a~O!Z/kO!e#vO(p'nO!i(|a~Og${i!Z${i#^${i#}${i~P!0uO!Y4aO!W'eX!Z'eX~P!3cO!Z/sO!W(}a~O!Z/sO!W(}a~P#.{OP]XR]X[]Xp]X!O]X!Q]X!W]X!Z]X!j]X!n]X#P]X#Q]X#^]X#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X(_]X(p]X(w]X(x]X~O!e%XX#t%XX~P%0XO!e#vO#t4fO~Oh%VO!e#vO!j%dO~Oh%VOp4kO!j%dO(p'nO~Op4pO!e#vO(p'nO~Oq!nO!Q4qO(TTO(WUO(c!mO~O(w$}Ol%`i!O%`i'w%`i(x%`i!Z%`i#^%`i~Og%`i#}%`i~P%3xO(x%POl%bi!O%bi'w%bi(w%bi!Z%bi#^%bi~Og%bi#}%bi~P%4kOg(]i!Z(]i~P!0uO#^4wOg(]i!Z(]i~P!0uO!i4zO~Oa$nq!Z$nq'x$nq'u$nq!W$nq!i$nqt$nq!]$nq%h$nq!e$nq~P!:TO!W5QO~O!Z5RO!])OX~P#.{Oa]Xa$yX!]]X!]$yX%]]X'x]X'x$yX!Z]X!Z$yX~P!/qO%]5UOa%Za!]%Za'x%Za!Z%Za~OlmX!OmX'wmX(wmX(xmX~P%7nOn5VO(R#nO~Ob5]O%i5^O(R+nO(TTO(WUO!Z'rX!['rX~O!Z0}O![)Va~O[5bO~O`5cO~Oa%mO'x%mO~P#.{O!Z5kO#^5mO![)SX~O![5nO~Op5tOq!nO!Q*fO!`!yO!a!vO!b!vO!z;wO#R!pO#S!pO#T!pO#U!pO#V!pO#Y5sO#Z!zO(S!lO(TTO(WUO(c!mO(m!sO~O![5rO~P%:ROl5yO!]1gO%h5xO~Oh%VOl5yO!]1gO%h5xO~Ob6QO(R#nO(TTO(WUO!Z'qX!['qX~O!Z1rO![)Ta~O(TTO(WUO(c6SO~O`6WO~O#t6ZO&Y6[O~PMvO!i6]O~P%[Oa6_O~Oa6_O~P%[Ob2YO![6dO&h2XO~P`O!e6fO~O!e6hOh(hi!Z(hi![(hi!e(hi!j(hip(hi(p(hi~O!Z#fi![#fi~P#BPO#^6iO!Z#fi![#fi~O!Z!_i![!_i~P#BPOa%mO#^6rO'x%mO~Oa%mO!e#vO#^6rO'x%mO~O!Z(rq!i(rqa(rq'x(rq~P!:TO!Z(hO!i(qq~O!Q%gO!]%hO#h6yO(R%fO~O!]'^O%h6|O~Ol7QO!]'^O%h6|O~O#i'gaP'gaR'ga['gaa'gap'ga!Q'ga!j'ga!n'ga#P'ga#l'ga#m'ga#n'ga#o'ga#p'ga#q'ga#r'ga#s'ga#t'ga#u'ga#w'ga#y'ga#z'ga'x'ga(_'ga(p'ga!i'ga!W'ga'u'gat'ga!]'ga%h'ga!e'ga~P%+uO#i'iaP'iaR'ia['iaa'iap'ia!Q'ia!j'ia!n'ia#P'ia#l'ia#m'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#w'ia#y'ia#z'ia'x'ia(_'ia(p'ia!i'ia!W'ia'u'iat'ia!]'ia%h'ia!e'ia~P%,hO#i${iP${iR${i[${ia${ip${i!Q${i!Z${i!j${i!n${i#P${i#l${i#m${i#n${i#o${i#p${i#q${i#r${i#s${i#t${i#u${i#w${i#y${i#z${i'x${i(_${i(p${i!i${i!W${i'u${i#^${it${i!]${i%h${i!e${i~P#.{O#i%`iP%`iR%`i[%`ia%`ip%`i!Q%`i!j%`i!n%`i#P%`i#l%`i#m%`i#n%`i#o%`i#p%`i#q%`i#r%`i#s%`i#t%`i#u%`i#w%`i#y%`i#z%`i'x%`i(_%`i(p%`i!i%`i!W%`i'u%`it%`i!]%`i%h%`i!e%`i~P%3xO#i%biP%biR%bi[%bia%bip%bi!Q%bi!j%bi!n%bi#P%bi#l%bi#m%bi#n%bi#o%bi#p%bi#q%bi#r%bi#s%bi#t%bi#u%bi#w%bi#y%bi#z%bi'x%bi(_%bi(p%bi!i%bi!W%bi'u%bit%bi!]%bi%h%bi!e%bi~P%4kO!Z'Wa!i'Wa~P!:TO!Z.oO!i(ii~O#}#ai!Z#ai![#ai~P#BPOP$[OR#zO!O#yO!Q#{O!j#xO!n$[O(_VO[#kip#ki#P#ki#m#ki#n#ki#o#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki#}#ki(p#ki(w#ki(x#ki!Z#ki![#ki~O#l#ki~P%MQO#l<PO~P%MQOP$[OR#zOp<]O!O#yO!Q#{O!j#xO!n$[O#l<PO#m<QO#n<QO#o<QO(_VO[#ki#P#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki#}#ki(p#ki(w#ki(x#ki!Z#ki![#ki~O#p#ki~P& YO#p<RO~P& YOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO(_VO#w#ki#y#ki#z#ki#}#ki(p#ki(w#ki(x#ki!Z#ki![#ki~O#u#ki~P&#bOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO#u<TO(_VO(x#}O#y#ki#z#ki#}#ki(p#ki(w#ki!Z#ki![#ki~O#w<VO~P&%cO#w#ki~P&%cO#u<TO~P&#bOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO#u<TO#w<VO(_VO(w#|O(x#}O#z#ki#}#ki(p#ki!Z#ki![#ki~O#y#ki~P&'rO#y<XO~P&'rOa#{y!Z#{y'x#{y'u#{y!W#{y!i#{yt#{y!]#{y%h#{y!e#{y~P!:TO[#kip#ki#P#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki#}#ki(p#ki!Z#ki![#ki~OP$[OR#zO!O#yO!Q#{O!j#xO!n$[O#l<PO#m<QO#n<QO#o<QO(_VO(w#ki(x#ki~P&*nOl=}O!O)|O'w)}O(w$}O(x%POP#kiR#ki!Q#ki!j#ki!n#ki#l#ki#m#ki#n#ki#o#ki(_#ki~P&*nO#Q$dOP(^XR(^X[(^Xl(^Xp(^X!O(^X!Q(^X!j(^X!n(^X#P(^X#l(^X#m(^X#n(^X#o(^X#p(^X#q(^X#r(^X#s(^X#t(^X#u(^X#w(^X#y(^X#z(^X#}(^X'w(^X(_(^X(p(^X(w(^X(x(^X!Z(^X![(^X~O#}$Oi!Z$Oi![$Oi~P#BPO#}!pi![!pi~P$*OOg'Za!Z'Za~P!0uO![7dO~O!Z'ba!['ba~P#BPO!W7eO~P#.{O!e#vO(p'nO!Z'ca!i'ca~O!Z/kO!i(|i~O!Z/kO!e#vO!i(|i~Og${q!Z${q#^${q#}${q~P!0uO!W'ea!Z'ea~P#.{O!e7lO~O!Z/sO!W(}i~P#.{O!Z/sO!W(}i~O!W7oO~Oh%VOp7tO!j%dO(p'nO~O!e#vO#t7vO~Op7yO!e#vO(p'nO~O!O)|O'w)}O(x%POl'ha(w'ha!Z'ha#^'ha~Og'ha#}'ha~P&3oO!O)|O'w)}Ol'ja(w'ja(x'ja!Z'ja#^'ja~Og'ja#}'ja~P&4bO!W7{O~Og$}q!Z$}q#^$}q#}$}q~P!0uOg(]q!Z(]q~P!0uO#^7|Og(]q!Z(]q~P!0uOa$ny!Z$ny'x$ny'u$ny!W$ny!i$nyt$ny!]$ny%h$ny!e$ny~P!:TO!e6hO~O!Z5RO!])Oa~O!]'^OP$SaR$Sa[$Sap$Sa!O$Sa!Q$Sa!Z$Sa!j$Sa!n$Sa#P$Sa#l$Sa#m$Sa#n$Sa#o$Sa#p$Sa#q$Sa#r$Sa#s$Sa#t$Sa#u$Sa#w$Sa#y$Sa#z$Sa(_$Sa(p$Sa(w$Sa(x$Sa~O%h6|O~P&7SO%]8QOa%Zi!]%Zi'x%Zi!Z%Zi~Oa#ay!Z#ay'x#ay'u#ay!W#ay!i#ayt#ay!]#ay%h#ay!e#ay~P!:TO[8SO~Ob8UO(R+nO(TTO(WUO~O!Z0}O![)Vi~O`8YO~O(c(zO!Z'nX!['nX~O!Z5kO![)Sa~O![8cO~P%:RO(m!sO~P$$oO#Y8dO~O!]1gO~O!]1gO%h8fO~Ol8iO!]1gO%h8fO~O[8nO!Z'qa!['qa~O!Z1rO![)Ti~O!i8rO~O!i8sO~O!i8vO~O!i8vO~P%[Oa8xO~O!e8yO~O!i8zO~O!Z(ui![(ui~P#BPOa%mO#^9SO'x%mO~O!Z(ry!i(rya(ry'x(ry~P!:TO!Z(hO!i(qy~O%h9VO~P&7SO!]'^O%h9VO~O#i${qP${qR${q[${qa${qp${q!Q${q!Z${q!j${q!n${q#P${q#l${q#m${q#n${q#o${q#p${q#q${q#r${q#s${q#t${q#u${q#w${q#y${q#z${q'x${q(_${q(p${q!i${q!W${q'u${q#^${qt${q!]${q%h${q!e${q~P#.{O#i'haP'haR'ha['haa'hap'ha!Q'ha!j'ha!n'ha#P'ha#l'ha#m'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#w'ha#y'ha#z'ha'x'ha(_'ha(p'ha!i'ha!W'ha'u'hat'ha!]'ha%h'ha!e'ha~P&3oO#i'jaP'jaR'ja['jaa'jap'ja!Q'ja!j'ja!n'ja#P'ja#l'ja#m'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#w'ja#y'ja#z'ja'x'ja(_'ja(p'ja!i'ja!W'ja'u'jat'ja!]'ja%h'ja!e'ja~P&4bO#i$}qP$}qR$}q[$}qa$}qp$}q!Q$}q!Z$}q!j$}q!n$}q#P$}q#l$}q#m$}q#n$}q#o$}q#p$}q#q$}q#r$}q#s$}q#t$}q#u$}q#w$}q#y$}q#z$}q'x$}q(_$}q(p$}q!i$}q!W$}q'u$}q#^$}qt$}q!]$}q%h$}q!e$}q~P#.{O!Z'Wi!i'Wi~P!:TO#}#aq!Z#aq![#aq~P#BPO(w$}OP%`aR%`a[%`ap%`a!Q%`a!j%`a!n%`a#P%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#t%`a#u%`a#w%`a#y%`a#z%`a#}%`a(_%`a(p%`a!Z%`a![%`a~Ol%`a!O%`a'w%`a(x%`a~P&HgO(x%POP%baR%ba[%bap%ba!Q%ba!j%ba!n%ba#P%ba#l%ba#m%ba#n%ba#o%ba#p%ba#q%ba#r%ba#s%ba#t%ba#u%ba#w%ba#y%ba#z%ba#}%ba(_%ba(p%ba!Z%ba![%ba~Ol%ba!O%ba'w%ba(w%ba~P&JnOl=}O!O)|O'w)}O(x%PO~P&HgOl=}O!O)|O'w)}O(w$}O~P&JnOR0cO!O0cO!Q0dO#Q$dOP{a[{al{ap{a!j{a!n{a#P{a#l{a#m{a#n{a#o{a#p{a#q{a#r{a#s{a#t{a#u{a#w{a#y{a#z{a#}{a'w{a(_{a(p{a(w{a(x{a!Z{a![{a~O!O)|O'w)}OP$raR$ra[$ral$rap$ra!Q$ra!j$ra!n$ra#P$ra#l$ra#m$ra#n$ra#o$ra#p$ra#q$ra#r$ra#s$ra#t$ra#u$ra#w$ra#y$ra#z$ra#}$ra(_$ra(p$ra(w$ra(x$ra!Z$ra![$ra~O!O)|O'w)}OP$taR$ta[$tal$tap$ta!Q$ta!j$ta!n$ta#P$ta#l$ta#m$ta#n$ta#o$ta#p$ta#q$ta#r$ta#s$ta#t$ta#u$ta#w$ta#y$ta#z$ta#}$ta(_$ta(p$ta(w$ta(x$ta!Z$ta![$ta~Ol=}O!O)|O'w)}O(w$}O(x%PO~OP%SaR%Sa[%Sap%Sa!Q%Sa!j%Sa!n%Sa#P%Sa#l%Sa#m%Sa#n%Sa#o%Sa#p%Sa#q%Sa#r%Sa#s%Sa#t%Sa#u%Sa#w%Sa#y%Sa#z%Sa#}%Sa(_%Sa(p%Sa!Z%Sa![%Sa~P'%sO#}$lq!Z$lq![$lq~P#BPO#}$nq!Z$nq![$nq~P#BPO![9dO~O#}9eO~P!0uO!e#vO!Z'ci!i'ci~O!e#vO(p'nO!Z'ci!i'ci~O!Z/kO!i(|q~O!W'ei!Z'ei~P#.{O!Z/sO!W(}q~Op9lO!e#vO(p'nO~O[9nO!W9mO~P#.{O!W9mO~O!e#vO#t9tO~Og(]y!Z(]y~P!0uO!Z'la!]'la~P#.{Oa%Zq!]%Zq'x%Zq!Z%Zq~P#.{O[9yO~O!Z0}O![)Vq~O#^9}O!Z'na!['na~O!Z5kO![)Si~P#BPO!Q:PO~O!]1gO%h:SO~O(TTO(WUO(c:XO~O!Z1rO![)Tq~O!i:[O~O!i:]O~O!i:^O~O!i:^O~P%[O#^:aO!Z#fy![#fy~O!Z#fy![#fy~P#BPO%h:fO~P&7SO!]'^O%h:fO~O#}#{y!Z#{y![#{y~P#BPOP${iR${i[${ip${i!Q${i!j${i!n${i#P${i#l${i#m${i#n${i#o${i#p${i#q${i#r${i#s${i#t${i#u${i#w${i#y${i#z${i#}${i(_${i(p${i!Z${i![${i~P'%sO!O)|O'w)}O(x%POP'gaR'ga['gal'gap'ga!Q'ga!j'ga!n'ga#P'ga#l'ga#m'ga#n'ga#o'ga#p'ga#q'ga#r'ga#s'ga#t'ga#u'ga#w'ga#y'ga#z'ga#}'ga(_'ga(p'ga(w'ga!Z'ga!['ga~O!O)|O'w)}OP'iaR'ia['ial'iap'ia!Q'ia!j'ia!n'ia#P'ia#l'ia#m'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#w'ia#y'ia#z'ia#}'ia(_'ia(p'ia(w'ia(x'ia!Z'ia!['ia~O(w$}OP%`iR%`i[%`il%`ip%`i!O%`i!Q%`i!j%`i!n%`i#P%`i#l%`i#m%`i#n%`i#o%`i#p%`i#q%`i#r%`i#s%`i#t%`i#u%`i#w%`i#y%`i#z%`i#}%`i'w%`i(_%`i(p%`i(x%`i!Z%`i![%`i~O(x%POP%biR%bi[%bil%bip%bi!O%bi!Q%bi!j%bi!n%bi#P%bi#l%bi#m%bi#n%bi#o%bi#p%bi#q%bi#r%bi#s%bi#t%bi#u%bi#w%bi#y%bi#z%bi#}%bi'w%bi(_%bi(p%bi(w%bi!Z%bi![%bi~O#}$ny!Z$ny![$ny~P#BPO#}#ay!Z#ay![#ay~P#BPO!e#vO!Z'cq!i'cq~O!Z/kO!i(|y~O!W'eq!Z'eq~P#.{Op:pO!e#vO(p'nO~O[:tO!W:sO~P#.{O!W:sO~Og(]!R!Z(]!R~P!0uOa%Zy!]%Zy'x%Zy!Z%Zy~P#.{O!Z0}O![)Vy~O!Z5kO![)Sq~O(R:zO~O!]1gO%h:}O~O!i;QO~O%h;VO~P&7SOP${qR${q[${qp${q!Q${q!j${q!n${q#P${q#l${q#m${q#n${q#o${q#p${q#q${q#r${q#s${q#t${q#u${q#w${q#y${q#z${q#}${q(_${q(p${q!Z${q![${q~P'%sO!O)|O'w)}O(x%POP'haR'ha['hal'hap'ha!Q'ha!j'ha!n'ha#P'ha#l'ha#m'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#w'ha#y'ha#z'ha#}'ha(_'ha(p'ha(w'ha!Z'ha!['ha~O!O)|O'w)}OP'jaR'ja['jal'jap'ja!Q'ja!j'ja!n'ja#P'ja#l'ja#m'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#w'ja#y'ja#z'ja#}'ja(_'ja(p'ja(w'ja(x'ja!Z'ja!['ja~OP$}qR$}q[$}qp$}q!Q$}q!j$}q!n$}q#P$}q#l$}q#m$}q#n$}q#o$}q#p$}q#q$}q#r$}q#s$}q#t$}q#u$}q#w$}q#y$}q#z$}q#}$}q(_$}q(p$}q!Z$}q![$}q~P'%sOg%d!Z!Z%d!Z#^%d!Z#}%d!Z~P!0uO!W;ZO~P#.{Op;[O!e#vO(p'nO~O[;^O!W;ZO~P#.{O!Z'nq!['nq~P#BPO!Z#f!Z![#f!Z~P#BPO#i%d!ZP%d!ZR%d!Z[%d!Za%d!Zp%d!Z!Q%d!Z!Z%d!Z!j%d!Z!n%d!Z#P%d!Z#l%d!Z#m%d!Z#n%d!Z#o%d!Z#p%d!Z#q%d!Z#r%d!Z#s%d!Z#t%d!Z#u%d!Z#w%d!Z#y%d!Z#z%d!Z'x%d!Z(_%d!Z(p%d!Z!i%d!Z!W%d!Z'u%d!Z#^%d!Zt%d!Z!]%d!Z%h%d!Z!e%d!Z~P#.{Op;fO!e#vO(p'nO~O!W;gO~P#.{Op;nO!e#vO(p'nO~O!W;oO~P#.{OP%d!ZR%d!Z[%d!Zp%d!Z!Q%d!Z!j%d!Z!n%d!Z#P%d!Z#l%d!Z#m%d!Z#n%d!Z#o%d!Z#p%d!Z#q%d!Z#r%d!Z#s%d!Z#t%d!Z#u%d!Z#w%d!Z#y%d!Z#z%d!Z#}%d!Z(_%d!Z(p%d!Z!Z%d!Z![%d!Z~P'%sOp;rO!e#vO(p'nO~Ot(dX~P1qO!O%qO~P!(yO(S!lO~P!(yO!WfX!ZfX#^fX~P%0XOP]XR]X[]Xp]X!O]X!Q]X!Z]X!ZfX!j]X!n]X#P]X#Q]X#^]X#^fX#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X(_]X(p]X(w]X(x]X~O!efX!i]X!ifX(pfX~P'JlOP;vOQ;vOSfOd=rOe!iOnkOp;vOqkOrkOxkOz;vO|;vO!QWO!UkO!VkO!]XO!g;yO!jZO!m;vO!n;vO!o;vO!q;zO!s;}O!v!hO$V!kO$m=pO(R)ZO(TTO(WUO(_VO(m[O~O!Z<ZO![$pa~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<fO!Q${O!]$|O!g=wO!j$xO#h<lO$V%_O$s<hO$u<jO$x%`O(R(tO(TTO(WUO(_$uO(w$}O(x%PO~Oj)bO~P( bOp!cX(p!cX~P# qOp(hX(p(hX~P#!dO![]X![fX~P'JlO!WfX!W$yX!ZfX!Z$yX#^fX~P!/qO#i<OO~O!e#vO#i<OO~O#^<`O~O#t<SO~O#^<pO!Z(uX![(uX~O#^<`O!Z(sX![(sX~O#i<qO~Og<sO~P!0uO#i<yO~O#i<zO~O!e#vO#i<{O~O!e#vO#i<qO~O#}<|O~P#BPO#i<}O~O#i=OO~O#i=TO~O#i=UO~O#i=VO~O#i=WO~O#}=XO~P!0uO#}=YO~P!0uO#Q#R#S#U#V#Y#g#h#s$m$s$u$x%[%]%g%h%i%p%r%u%v%x%z~'|T#m!V'z(S#nq#l#op!O'{$['{(R$^(c~",goto:"$8f)ZPPPPPP)[PP)_P)pP+Q/VPPPP6aPP6wPP<oP@cP@yP@yPPP@yPCRP@yP@yP@yPCVPC[PCyPHsPPPHwPPPPHwKzPPPLQLrPHwPHwPP! QHwPPPHwPHwP!#XHwP!&o!'t!'}P!(q!(u!(q!,SPPPPPPP!,s!'tPP!-T!.uP!2RHwHw!2W!5d!:Q!:Q!>PPPP!>XHwPPPPPPPPPP!AhP!BuPPHw!DWPHwPHwHwHwHwHwPHw!EjP!HtP!KzP!LO!LY!L^!L^P!HqP!Lb!LbP# hP# lHwPHw# r#$wCV@yP@yP@y@yP#&U@y@y#(h@y#+`@y#-l@y@y#.[#0p#0p#0u#1O#0p#1ZPP#0pP@y#1s@y#5r@y@y6aPPP#9wPPP#:b#:bP#:bP#:x#:bPP#;OP#:uP#:u#;c#:u#;}#<T#<W)_#<Z)_P#<b#<b#<bP)_P)_P)_P)_PP)_P#<h#<kP#<k)_P#<oP#<rP)_P)_P)_P)_P)_P)_)_PP#<x#=O#=Z#=a#=g#=m#=s#>R#>X#>c#>i#>s#>y#?Z#?a#@R#@e#@k#@q#AP#Af#CZ#Ci#Cp#E[#Ej#G[#Gj#Gp#Gv#G|#HW#H^#Hd#Hn#IQ#IWPPPPPPPPPPP#I^PPPPPPP#JR#MY#Nr#Ny$ RPPP$&mP$&v$)o$0Y$0]$0`$1_$1b$1i$1qP$1w$1zP$2h$2l$3d$4r$4w$5_PP$5d$5j$5n$5q$5u$5y$6u$7^$7u$7y$7|$8P$8V$8Y$8^$8bR!|RoqOXst!Z#d%l&p&r&s&u,n,s2S2VY!vQ'^-`1g5qQ%svQ%{yQ&S|Q&h!VS'U!e-WQ'd!iS'j!r!yU*h$|*X*lQ+l%|Q+y&UQ,_&bQ-^']Q-h'eQ-p'kQ0U*nQ1q,`R<m;z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9SS#q];w!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU*{%[<e<fQ+q&OQ,a&eQ,h&mQ0r+dQ0u+fQ1S+rQ1y,fQ3W.bQ5V0wQ5]0}Q6Q1rQ7O3[Q8U5^R9Y7Q'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s!S!nQ!r!v!y!z$|'U']'^'j'k'l*h*l*n*o-W-^-`-p0U0X1g5q5s%[$ti#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q&V|Q'S!eS'Y%h-ZQ+q&OQ,a&eQ0f+OQ1S+rQ1X+xQ1x,eQ1y,fQ5]0}Q5f1ZQ6Q1rQ6T1tQ6U1wQ8U5^Q8X5cQ8q6WQ9|8YQ:Y8nR<o*XrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR,c&i&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=r=s[#]WZ#W#Z'V(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ%vxQ%zyS&P|&UQ&]!TQ'a!hQ'c!iQ(o#sS+k%{%|Q+o&OQ,Y&`Q,^&bS-g'd'eQ.d(pQ0{+lQ1R+rQ1T+sQ1W+wQ1l,ZS1p,_,`Q2t-hQ5[0}Q5`1QQ5e1YQ6P1qQ8T5^Q8W5bQ9x8SR:w9y!U$zi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y!^%xy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pQ+e%vQ,O&YQ,R&ZQ,]&bQ.c(oQ1k,YU1o,^,_,`Q3].dQ5z1lS6O1p1qQ8m6P#f=t#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o=u<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YW%Ti%V*v=pS&Y!Q&gQ&Z!RQ&[!SQ+S%cR+|&W%]%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}T)x$u)yV*{%[<e<fW'Y!e%h*X-ZS({#y#zQ+`%qQ+v&RS.](k(lQ1b,SQ4x0cR8^5k'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s$i$^c#Y#e%p%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.w.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ'W!eR2i-W!W!nQ!e!r!v!y!z$|'U']'^'j'k'l*X*h*l*n*o-W-^-`-p0U0X1g5q5sR1d,UnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&w!^Q't!xS(q#u<OQ+i%yQ,W&]Q,X&_Q-e'bQ-r'mS.m(v<qS0k+U<{Q0y+jQ1f,VQ2Z,uQ2],vQ2e-RQ2r-fQ2u-jS5P0l=VQ5W0zS5Z0|=WQ6j2gQ6n2sQ6s2zQ8R5XQ8}6lQ9O6oQ9R6tR:`8z$d$]c#Y#e%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gS(m#p'gQ(}#zS+_%p.wS.^(l(nR3U._'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS#q];wQ&r!XQ&s!YQ&u![Q&v!]R2R,qQ'_!hQ+b%vQ-c'aS.`(o+eQ2p-bW3Y.c.d0q0sQ6m2qW6z3V3X3]5TU9U6{6}7PU:e9W9X9ZS;T:d:gQ;b;UR;j;cU!wQ'^-`T5o1g5q!Q_OXZ`st!V!Z#d#h%d%l&g&i&p&r&s&u(h,n,s.V2S2V]!pQ!r'^-`1g5qT#q];w%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS({#y#zS.](k(l!s=^$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU$fd)],hS(n#p'gU*s%R(u3vU0e*z.i7]Q5T0rQ6{3WQ9X7OR:g9Ym!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sQ'r!uS(d#g1|S-n'i'uQ/n*ZQ/{*gQ2|-qQ4]/oQ4i/}Q4j0OQ4o0WQ7h4WS7s4k4mS7w4p4rQ9g7iQ9k7oQ9p7tQ9u7yS:o9l9mS;Y:p:sS;e;Z;[S;m;f;gS;q;n;oR;t;rQ#wbQ'q!uS(c#g1|S(e#m+TQ+V%eQ+g%wQ+m%}U-m'i'r'uQ.R(dQ/m*ZQ/|*gQ0P*iQ0x+hQ1m,[S2y-n-qQ3R.ZS4[/n/oQ4e/yS4h/{0WQ4l0QQ5|1nQ6u2|Q7g4WQ7k4]U7r4i4o4rQ7u4nQ8k5}S9f7h7iQ9j7oQ9r7wQ9s7xQ:V8lQ:m9gS:n9k9mQ:v9uQ;P:WS;X:o:sS;d;Y;ZS;l;e;gS;p;m;oQ;s;qQ;u;tQ=a=[Q=l=eR=m=fV!wQ'^-`%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS#wz!j!r=Z$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=a=r%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SQ%ej!^%wy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pS%}z!jQ+h%xQ,[&bW1n,],^,_,`U5}1o1p1qS8l6O6PQ:W8m!r=[$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ=e=qR=f=r%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SY#bWZ#W#Z(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ,i&m!p=]$Z$n)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=`'VU'Z!e%h*XR2k-Z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9S!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ,h&mQ0r+dQ3W.bQ7O3[R9Y7Q!b$Tc#Y%p(Q(W(r(w)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!P<U)[)o-U.w2c2f3h3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!f$Vc#Y%p(Q(W(r(w)U)V)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!T<W)[)o-U.w2c2f3h3n3o3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!^$Zc#Y%p(Q(W(r(w)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;xQ4V/fz=s)[)o-U.w2c2f3h3w4P6k7W7a7b8`8|9[9b9c:y;R=gQ=x=zR=y={'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS$oh$pR3|/P'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$kf$qQ$ifS)h$l)lR)t$qT$jf$qT)j$l)l'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$oh$pQ$rhR)s$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9S!s=q$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s#glOPXZst!Z!`!o#S#d#o#{$n%l&i&l&m&p&r&s&u&y'R'`(|)q*f+Y+d,k,n,s-d.b/Q/i0V0d1j1z1{1}2P2S2V2X3[3{4q5y6Z6[6_7Q8i8x!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}Q+P%`Q/^)|o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!U$yi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yQ*`$zU*i$|*X*lQ+Q%aQ0Q*j#f=c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n=d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YQ=h=tQ=i=uQ=j=vR=k=w!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YnoOXst!Z#d%l&p&r&s&u,n,s2S2VS*c${*WQ,|&|Q,}'OR4`/s%[%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q,P&ZQ1`,RQ5i1_R8]5jV*k$|*X*lU*k$|*X*lT5p1g5qS/y*f/iQ4n0VT7x4q:PQ+g%wQ0P*iQ0x+hQ1m,[Q5|1nQ8k5}Q:V8lR;P:W!U%Oi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yx*P$v)c*Q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=oS0Y*q0Z#f<a#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<b<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!d<t(s)a*Y*b.e.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={`<u3u7X7[7`9]:h:k;kS=P.g3aT=Q7Z9`!U%Qi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y|*R$v)c*S*q+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=oS0[*r0]#f<c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!h<v(s)a*Y*b.f.g.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={d<w3u7Y7Z7`9]9^:h:i:k;kS=R.h3bT=S7[9arnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ&d!UR,k&mrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR&d!UQ,T&[R1[+|snOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ1h,YS5w1k1lU8e5u5v5zS:R8g8hS:{:Q:TQ;_:|R;i;`Q&k!VR,d&gR6T1tR:Y8nS&P|&UR1T+sQ&p!WR,n&qR,t&vT2T,s2VR,x&wQ,w&wR2^,xQ'w!{R-t'wSsOtQ#dXT%os#dQ#OTR'y#OQ#RUR'{#RQ)y$uR/Z)yQ#UVR(O#UQ#XWU(U#X(V-{Q(V#YR-{(WQ-X'WR2j-XQ.p(wS3e.p3fR3f.qQ-`'^R2n-`Y!rQ'^-`1g5qR'h!rQ.{)cR3z.{U#_W%g*WU(]#_(^-|Q(^#`R-|(XQ-['ZR2l-[t`OXst!V!Z#d%l&g&i&p&r&s&u,n,s2S2VS#hZ%dU#r`#h.VR.V(hQ(i#jQ.S(eW.[(i.S3P6wQ3P.TR6w3QQ)l$lR/R)lQ$phR)r$pQ$`cU)_$`-w<[Q-w;xR<[)oQ/l*ZW4Y/l4Z7j9hU4Z/m/n/oS7j4[4]R9h7k$e*O$v(s)a)c*Y*b*q*r*|*}+R.g.h.j.k.l/Y/b/d/f/q/v0^0_0p1]3^3_3`3u3y4S4^4_4c4s4u4{4|4}5h7R7S7T7U7Z7[7^7_7`7f7m7p7z7}8P9]9^9_9i9q9v9w:h:i:j:k:l:q:u;W;];h;k=b=n=o=z={Q/t*bU4b/t4d7nQ4d/vR7n4cS*l$|*XR0S*lx*Q$v)c*q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=o!d.e(s)a*Y*b.g.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/c*Q.e7Xa7X3u7Z7[7`9]:h:k;kQ0Z*qQ3a.gU4t0Z3a9`R9`7Z|*S$v)c*q*r+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=o!h.f(s)a*Y*b.g.h.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/e*S.f7Ye7Y3u7Z7[7`9]9^:h:i:k;kQ0]*rQ3b.hU4v0]3b9aR9a7[Q*w%UR0a*wQ5S0pR8O5SQ+[%jR0o+[Q5l1bS8_5l:OR:O8`Q,V&]R1e,VQ5q1gR8b5qQ1s,aS6R1s8oR8o6TQ1O+oW5_1O5a8V9zQ5a1RQ8V5`R9z8WQ+t&PR1U+tQ2V,sR6c2VYrOXst#dQ&t!ZQ+^%lQ,m&pQ,o&rQ,p&sQ,r&uQ2Q,nS2T,s2VR6b2SQ%npQ&x!_Q&{!aQ&}!bQ'P!cQ'o!uQ+]%kQ+i%yQ+{&VQ,c&kQ,z&zW-k'i'q'r'uQ-r'mQ0R*kQ0y+jS1v,d,gQ2_,yQ2`,|Q2a,}Q2u-jW2w-m-n-q-sQ5W0zQ5d1XQ5g1]Q5{1mQ6V1xQ6a2RU6p2v2y2|Q6s2zQ8R5XQ8Z5fQ8[5hQ8a5pQ8j5|Q8p6US9P6q6uQ9R6tQ9{8XQ:U8kQ:Z8qQ:b9QQ:x9|Q;O:VQ;S:cR;a;PQ%yyQ'b!iQ'm!uU+j%z%{%|Q-R'TU-f'c'd'eS-j'i'sQ/z*gS0z+k+lQ2g-TS2s-g-hQ2z-oS4g/{0OQ5X0{Q6l2mQ6o2tQ6t2{U7q4i4j4mQ9o7sR:r9pS$wi=pR*x%VU%Ui%V=pR0`*vQ$viS(s#v+fS)a$b$cQ)c$dQ*Y$xS*b${*WQ*q%OQ*r%QQ*|%]Q*}%^Q+R%bQ.g<aQ.h<cQ.j<gQ.k<iQ.l<kQ/Y)wQ/b*PQ/d*RQ/f*TQ/q*^S/v*d/hQ0^*tQ0_*ul0p+c,Q.a1a1i3Z5x6|8f9V:S:f:};VQ1]+}Q3^<tQ3_<vQ3`<yS3u<^<_Q3y.zS4S/_4UQ4^/rQ4_/sQ4c/uQ4s0YQ4u0[Q4{0gQ4|0hQ4}0iQ5h1^Q7R<}Q7S=PQ7T=RQ7U=TQ7Z<bQ7[<dQ7^<hQ7_<jQ7`<lQ7f4VQ7m4aQ7p4fQ7z4wQ7}5RQ8P5UQ9]<zQ9^<uQ9_<wQ9i7lQ9q7vQ9v7|Q9w8QQ:h=OQ:i=QQ:j=SQ:k=UQ:l9eQ:q9nQ:u9tQ;W=XQ;]:tQ;h;^Q;k=YQ=b=pQ=n=xQ=o=yQ=z=|R={=}Q*z%[Q.i<eR7]<fnpOXst!Z#d%l&p&r&s&u,n,s2S2VQ!fPS#fZ#oQ&z!`W'f!o*f0V4qQ'}#SQ)O#{Q)p$nS,g&i&lQ,l&mQ,y&yS-O'R/iQ-b'`Q.s(|Q/V)qQ0m+YQ0s+dQ2O,kQ2q-dQ3X.bQ4O/QQ4y0dQ5v1jQ6X1zQ6Y1{Q6^1}Q6`2PQ6e2XQ7P3[Q7c3{Q8h5yQ8t6ZQ8u6[Q8w6_Q9Z7QQ:T8iR:_8x#[cOPXZst!Z!`!o#d#o#{%l&i&l&m&p&r&s&u&y'R'`(|*f+Y+d,k,n,s-d.b/i0V0d1j1z1{1}2P2S2V2X3[4q5y6Z6[6_7Q8i8xQ#YWQ#eYQ%puQ%rvS%tw!gS(Q#W(TQ(W#ZQ(r#uQ(w#xQ)P$OQ)Q$PQ)R$QQ)S$RQ)T$SQ)U$TQ)V$UQ)W$VQ)X$WQ)Y$XQ)[$ZQ)^$_Q)`$aQ)e$eW)o$n)q/Q3{Q+a%sQ+u&QS-U'V2hQ-s'pS-x(R-zQ-}(ZQ.P(bQ.n(vQ.q(xQ.u;vQ.w;yQ.x;zQ.y;}Q/]){Q0j+UQ2c-PQ2f-SQ2v-lQ2}.QQ3c.oQ3h<OQ3i<PQ3j<QQ3k<RQ3l<SQ3m<TQ3n<UQ3o<VQ3p<WQ3q<XQ3r<YQ3s.vQ3t<]Q3w<`Q3x<mQ4P<ZQ5O0lQ5Y0|Q6k<pQ6q2xQ6v3OQ7V3dQ7W<qQ7a<sQ7b<{Q8`5mQ8|6iQ9Q6rQ9[<|Q9b=VQ9c=WQ:c9SQ:y9}Q;R:aQ;x#SR=g=sR#[WR'X!el!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sS'T!e-WU*g$|*X*lS-T'U']S0O*h*nQ0W*oQ2m-^Q4m0UR4r0XR(y#xQ!fQT-_'^-`]!qQ!r'^-`1g5qQ#p]R'g;wR)d$dY!uQ'^-`1g5qQ'i!rS's!v!yS'u!z5sS-o'j'kQ-q'lR2{-pT#kZ%dS#jZ%dS%jm,jU(e#h#i#lS.T(f(gQ.X(hQ0n+ZQ3Q.UU3R.V.W.YS6x3S3TR9T6yd#^W#W#Z%g(R([*W+W.O/hr#gZm#h#i#l%d(f(g(h+Z.U.V.W.Y3S3T6yS*Z$x*_Q/o*[Q1|,jQ2d-QQ4W/kQ6g2[Q7i4XQ8{6hT=_'V+XV#aW%g*WU#`W%g*WS(S#W([U(X#Z+W/hS-V'V+XT-y(R.OV'[!e%h*XQ$lfR)v$qT)k$l)lR3}/PT*]$x*_T*e${*WQ0q+cQ1_,QQ3V.aQ5j1aQ5u1iQ6}3ZQ8g5xQ9W6|Q:Q8fQ:d9VQ:|:SQ;U:fQ;`:}R;c;VnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&j!VR,c&gtmOXst!U!V!Z#d%l&g&p&r&s&u,n,s2S2VR,j&mT%km,jR1c,SR,b&eQ&T|R+z&UR+p&OT&n!W&qT&o!W&qT2U,s2V",nodeNames:" ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:378,context:trackNewline,nodeProps:[["isolate",-8,5,6,14,35,37,49,51,53,""],["group",-26,9,17,19,66,206,210,214,215,217,220,223,233,235,241,243,245,247,250,256,262,264,266,268,270,272,273,"Statement",-34,13,14,30,33,34,40,49,52,53,55,60,68,70,74,78,80,82,83,108,109,118,119,135,138,140,141,142,143,144,146,147,166,168,170,"Expression",-23,29,31,35,39,41,43,172,174,176,177,179,180,181,183,184,185,187,188,189,200,202,204,205,"Type",-3,86,101,107,"ClassItem"],["openedBy",23,"<",36,"InterpolationStart",54,"[",58,"{",71,"(",159,"JSXStartCloseTag"],["closedBy",-2,24,167,">",38,"InterpolationEnd",48,"]",59,"}",72,")",164,"JSXEndTag"]],propSources:[jsHighlight],skippedNodes:[0,5,6,276],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$h&j(X!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(X!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$h&j(UpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(UpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$h&j(Up(X!b'z0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(V#S$h&j'{0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$h&j(Up(X!b'{0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$h&j!n),Q(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#u(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#u(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(T':f$h&j(X!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$h&j(X!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$h&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$c`$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$c``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$c`$h&j(X!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(X!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$c`(X!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$h&j(Up(X!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$h&j(Up(X!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$h&j(X!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$h&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(X!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$h&j(UpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(UpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Up(X!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$h&j(m%1l(Up(X!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$h&j(Up(X!b$[#t(R,2j(c$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$h&j(Up(X!b$[#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$h&j(Up(X!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$h&j$P(Ch(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(x+JY$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$h&j#y(Ch(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(W';W$h&j(UpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$h&j(UpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$h&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$c`$h&j(UpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(UpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$c`(UpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!j/.^$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!i!Lf$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$h&j(Up(X!b(S%&f#o(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$h&j(Up(X!b#l(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$h&j(Up(X!bp+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!Z+Jf$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$h&j(Up(X!b!O.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_!Y!L^$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$h&j(Up(X!b#m(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$h&j(Up(X!b!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$h&j(X!b!V7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$h&j!V7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$h&j!V7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!V7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!V7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$h&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$h&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$h&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$h&j(X!b!V7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(X!b!V7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(X!b!V7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(X!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$h&j(X!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$h&j(Up!V7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$h&j(Up!V7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Up!V7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Up!V7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(UpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$h&j(UpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$h&j(Up(X!b!V7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Up(X!b!V7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Up(X!b!V7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Up(X!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$h&j(Up(X!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$h&j(Up(X!b'|0/l!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$h&j(Up(X!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$h&j(X!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$h&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(X!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$h&j(UpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(UpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Up(X!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$h&j$P(Ch(Up(X!b!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Y#t$h&j(Up(X!b!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!e$b$h&j#})Lv(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#P-<U(Up(X!b$m7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$j&j(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#p(Ch(Up(X!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$P(Ch(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#q(Ch(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#^*!Y$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#i(Cl$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#q(Ch$e#|$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#q(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#p(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#p(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(p(Ct$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$h&j#z(Ch(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!z$Ip$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!Q0,v$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$h&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$h&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$h&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$h&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$h&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!W#)l$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#w(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$h&j(Up(X!b(_+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$h&j(Up(X!b(R,2j$^#t(c$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$h&j(Up(X!b$^#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!]#Hb(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(w+JY$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_![(CdtBr$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!o7`$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$h&j(Up(X!b'z0/l$[#t(R,2j(c$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$h&j(Up(X!b'{0/l$[#t(R,2j(c$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[noSemicolon,noSemicolonType,operatorToken,jsx,2,3,4,5,6,7,8,9,10,11,12,13,14,insertSemicolon,new LocalTokenGroup("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOv~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!S~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(a~~",141,338),new LocalTokenGroup("j~RQYZXz{^~^O(O~~aP!P!Qd~iO(P~~",25,321)],topRules:{Script:[0,7],SingleExpression:[1,274],SingleClassItem:[2,275]},dialects:{jsx:0,ts:15091},dynamicPrecedences:{78:1,80:1,92:1,168:1,198:1},specialized:[{term:325,get:e=>spec_identifier[e]||-1},{term:341,get:e=>spec_word[e]||-1},{term:93,get:e=>spec_LessThan[e]||-1}],tokenPrec:15116}),snippets=[snippetCompletion("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),snippetCompletion("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),snippetCompletion("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),snippetCompletion("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),snippetCompletion(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),snippetCompletion('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),snippetCompletion('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],typescriptSnippets=snippets.concat([snippetCompletion("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),snippetCompletion("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),snippetCompletion("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),cache=new NodeWeakMap,ScopeNodes=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function defID(e){return(n,r)=>{let g=n.node.getChild("VariableDefinition");return g&&r(g,e),!0}}const functionContext=["FunctionDeclaration"],gatherCompletions={FunctionDeclaration:defID("function"),ClassDeclaration:defID("class"),ClassExpression:()=>!0,EnumDeclaration:defID("constant"),TypeAliasDeclaration:defID("type"),NamespaceDeclaration:defID("namespace"),VariableDefinition(e,n){e.matchContext(functionContext)||n(e,"variable")},TypeDefinition(e,n){n(e,"type")},__proto__:null};function getScope(e,n){let r=cache.get(n);if(r)return r;let g=[],y=!0;function k($,V){let L=e.sliceString($.from,$.to);g.push({label:L,type:V})}return n.cursor(IterMode.IncludeAnonymous).iterate($=>{if(y)y=!1;else if($.name){let V=gatherCompletions[$.name];if(V&&V($,k)||ScopeNodes.has($.name))return!1}else if($.to-$.from>8192){for(let V of getScope(e,$.node))g.push(V);return!1}}),cache.set(n,g),g}const Identifier=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,dontComplete=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName",".","?."];function localCompletionSource(e){let n=syntaxTree(e.state).resolveInner(e.pos,-1);if(dontComplete.indexOf(n.name)>-1)return null;let r=n.name=="VariableName"||n.to-n.from<20&&Identifier.test(e.state.sliceDoc(n.from,n.to));if(!r&&!e.explicit)return null;let g=[];for(let y=n;y;y=y.parent)ScopeNodes.has(y.name)&&(g=g.concat(getScope(e.state.doc,y)));return{options:g,from:r?n.from:e.pos,validFor:Identifier}}const javascriptLanguage=LRLanguage.define({name:"javascript",parser:parser.configure({props:[indentNodeProp.add({IfStatement:continuedIndent({except:/^\s*({|else\b)/}),TryStatement:continuedIndent({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:flatIndent,SwitchBody:e=>{let n=e.textAfter,r=/^\s*\}/.test(n),g=/^\s*(case|default)\b/.test(n);return e.baseIndent+(r?0:g?1:2)*e.unit},Block:delimitedIndent({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":continuedIndent({except:/^{/}),JSXElement(e){let n=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(n?0:e.unit)},JSXEscape(e){let n=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(n?0:e.unit)},"JSXOpenTag JSXSelfClosingTag"(e){return e.column(e.node.from)+e.unit}}),foldNodeProp.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":foldInside,BlockComment(e){return{from:e.from+2,to:e.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),jsxSublanguage={test:e=>/^JSX/.test(e.name),facet:defineLanguageFacet({commentTokens:{block:{open:"{/*",close:"*/}"}}})},typescriptLanguage=javascriptLanguage.configure({dialect:"ts"},"typescript"),jsxLanguage=javascriptLanguage.configure({dialect:"jsx",props:[sublanguageProp.add(e=>e.isTop?[jsxSublanguage]:void 0)]}),tsxLanguage=javascriptLanguage.configure({dialect:"jsx ts",props:[sublanguageProp.add(e=>e.isTop?[jsxSublanguage]:void 0)]},"typescript");let kwCompletion=e=>({label:e,type:"keyword"});const keywords="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(kwCompletion),typescriptKeywords=keywords.concat(["declare","implements","private","protected","public"].map(kwCompletion));function javascript(e={}){let n=e.jsx?e.typescript?tsxLanguage:jsxLanguage:e.typescript?typescriptLanguage:javascriptLanguage,r=e.typescript?typescriptSnippets.concat(typescriptKeywords):snippets.concat(keywords);return new LanguageSupport(n,[javascriptLanguage.data.of({autocomplete:ifNotIn(dontComplete,completeFromList(r))}),javascriptLanguage.data.of({autocomplete:localCompletionSource}),e.jsx?autoCloseTags:[]])}function findOpenTag(e){for(;;){if(e.name=="JSXOpenTag"||e.name=="JSXSelfClosingTag"||e.name=="JSXFragmentTag")return e;if(e.name=="JSXEscape"||!e.parent)return null;e=e.parent}}function elementName(e,n,r=e.length){for(let g=n?.firstChild;g;g=g.nextSibling)if(g.name=="JSXIdentifier"||g.name=="JSXBuiltin"||g.name=="JSXNamespacedName"||g.name=="JSXMemberExpression")return e.sliceString(g.from,Math.min(g.to,r));return""}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),autoCloseTags=EditorView.inputHandler.of((e,n,r,g,y)=>{if((android?e.composing:e.compositionStarted)||e.state.readOnly||n!=r||g!=">"&&g!="/"||!javascriptLanguage.isActiveAt(e.state,n,-1))return!1;let k=y(),{state:$}=k,V=$.changeByRange(L=>{var z;let{head:j}=L,ae=syntaxTree($).resolveInner(j-1,-1),oe;if(ae.name=="JSXStartTag"&&(ae=ae.parent),!($.doc.sliceString(j-1,j)!=g||ae.name=="JSXAttributeValue"&&ae.to>j)){if(g==">"&&ae.name=="JSXFragmentTag")return{range:L,changes:{from:j,insert:"</>"}};if(g=="/"&&ae.name=="JSXStartCloseTag"){let re=ae.parent,ue=re.parent;if(ue&&re.from==j-2&&((oe=elementName($.doc,ue.firstChild,j))||((z=ue.firstChild)===null||z===void 0?void 0:z.name)=="JSXFragmentTag")){let le=`${oe}>`;return{range:EditorSelection.cursor(j+le.length,-1),changes:{from:j,insert:le}}}}else if(g==">"){let re=findOpenTag(ae);if(re&&re.name=="JSXOpenTag"&&!/^\/?>|^<\//.test($.doc.sliceString(j,j+2))&&(oe=elementName($.doc,re,j)))return{range:L,changes:{from:j,insert:`</${oe}>`}}}}return{range:L}});return V.changes.empty?!1:(e.dispatch([k,$.update(V,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),chalky="#e5c07b",coral="#e06c75",cyan="#56b6c2",invalid="#ffffff",ivory="#abb2bf",stone="#7d8799",malibu="#61afef",sage="#98c379",whiskey="#d19a66",violet="#c678dd",darkBackground="#21252b",highlightBackground="#2c313a",background="#282c34",tooltipBackground="#353a42",selection="#3E4451",cursor="#528bff",oneDarkTheme=EditorView.theme({"&":{color:ivory,backgroundColor:background},".cm-content":{caretColor:cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:cursor},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:selection},".cm-panels":{backgroundColor:darkBackground,color:ivory},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:background,color:stone,border:"none"},".cm-activeLineGutter":{backgroundColor:highlightBackground},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tooltipBackground,borderBottomColor:tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:highlightBackground,color:ivory}}},{dark:!0}),oneDarkHighlightStyle=HighlightStyle.define([{tag:tags.keyword,color:violet},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:coral},{tag:[tags.function(tags.variableName),tags.labelName],color:malibu},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:whiskey},{tag:[tags.definition(tags.name),tags.separator],color:ivory},{tag:[tags.typeName,tags.className,tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:chalky},{tag:[tags.operator,tags.operatorKeyword,tags.url,tags.escape,tags.regexp,tags.link,tags.special(tags.string)],color:cyan},{tag:[tags.meta,tags.comment],color:stone},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.link,color:stone,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:coral},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:whiskey},{tag:[tags.processingInstruction,tags.string,tags.inserted],color:sage},{tag:tags.invalid,color:invalid}]),oneDark=[oneDarkTheme,syntaxHighlighting(oneDarkHighlightStyle)];async function writeText(e,n){await invoke("plugin:clipboard-manager|write_text",{label:n?.label,text:e})}async function readText(){return await invoke("plugin:clipboard-manager|read_text")}const _withScopeId$1=e=>(pushScopeId("data-v-f689a785"),e=e(),popScopeId(),e),_hoisted_1$3={class:"glyph-programming-editor"},_hoisted_2$3={class:"left-panel"},_hoisted_3$2={class:"constant-item"},_hoisted_4$2={class:"parameter-name"},_hoisted_5$2={key:0},_hoisted_6$2={key:1,class:"enum-wrap"},_hoisted_7$2={class:"options-wrap"},_hoisted_8$2={class:"option-item"},_hoisted_9$2={key:3},_hoisted_10$2={class:"right-panel"},_hoisted_11$2={class:"codes-header"},_hoisted_12$2={class:"codes-title"},_hoisted_13$2=_withScopeId$1(()=>createBaseVNode("div",{id:"codes-container"},null,-1)),_sfc_main$4=defineComponent({__name:"CharacterProgrammingEditor",setup(e){const{t:n,tm:r}=useI18n(),g=ref([]),y=ref(""),k=ref({}),$=ref("global-constants");let V,L=null;onMounted(async()=>{if(window.__TAURI_INTERNALS__){const Ce=await getCurrentWindow().onCloseRequested(async Ie=>{try{V&&(V.toTextArea(),V=null,document.getElementById("codes-container").innerHTML=""),await emit("on-webview-close"),L&&L(),Ce&&Ce()}catch(ze){console.error(ze)}});L=await listen("init-data",Ie=>{const{__constants:ze,__script:Ue,__isWeb:Pt,__uuid:hn}=Ie.payload;window.__constants=ze,window.__script=Ue,window.__is_web=Pt,window.__uuid=hn,g.value=ze,y.value=Ue,g.value?.map(xn=>{k.value[xn.uuid]=!1}),V=new EditorView({doc:y.value,extensions:[basicSetup,javascript(),oneDark,EditorView.updateListener.of(xn=>{y.value=xn.state.doc.toString()})],parent:document.getElementById("codes-container")});const Dt=navigator.userAgent.includes("Mac");V.dom.addEventListener("keydown",async xn=>{if((Dt?xn.metaKey:xn.ctrlKey)&&xn.key==="c"){const{from:jt,to:Vn}=V.state.selection.main,Rn=V.state.doc.slice(jt,Vn).toString();Rn&&await writeText(Rn),xn.preventDefault()}if((Dt?xn.metaKey:xn.ctrlKey)&&xn.key==="v"){const jt=await readText();if(jt){const{from:Vn}=V.state.selection.main,Rn=V.state.update({changes:{from:Vn,insert:jt}});V.dispatch(Rn)}xn.preventDefault()}})}),await emit("on-webview-mounted")}else{const Ce=Ie=>{window.opener.postMessage("close-window",location.origin),window.removeEventListener("beforeunload",Ce)};window.addEventListener("beforeunload",Ce),g.value=window.opener.__constants,y.value=window.opener.__script,window.opener.__is_web,window.__uuid=window.opener.__uuid,g.value.map(Ie=>{k.value[Ie.uuid]=!1}),V=new EditorView({doc:y.value,extensions:[basicSetup,javascript(),oneDark,EditorView.updateListener.of(Ie=>{y.value=Ie.state.doc.toString()})],parent:document.getElementById("codes-container")})}}),onUnmounted(()=>{const Ce=V.getWrapperElement();Ce.parentNode.removeChild(Ce),V=null});const z=(Ce,Ie)=>{k.value[Ce]=Ie},j=()=>{const Ce=genUUID();g.value.push({uuid:Ce,name:Ce.slice(0,5),value:0,type:ParameterType.Number,min:0,max:1e3})},ae=Ce=>{g.value.map((Ie,ze)=>{Ie.uuid===Ce&&g.value.splice(ze,1)})};watch([g,y],()=>{re()},{deep:!0}),ParameterType.Constant,ParameterType.Number,ParameterType.RingController;const oe=[{value:ParameterType.Number,key:"number"},{value:ParameterType.RingController,key:"ring"},{value:ParameterType.Enum,key:"enum"}],re=async()=>{window.__TAURI_INTERNALS__?await emit("sync-info",{__constants:g.value,__script:y.value}):(localStorage.setItem("constants",JSON.stringify(g.value)),localStorage.setItem("script",y.value),window.opener.postMessage("sync-info",location.origin))},ue=async()=>{window.__TAURI_INTERNALS__?await emit("execute-script"):window.opener.postMessage("execute-script",location.origin)},le=Ce=>{Ce.params.push({name:"",min:0,max:1e3,value:500})},de=Ce=>{let Ie=!1;g.value.map((ze,Ue)=>{if(ze.uuid===Ce&&Ue!==g.value.length-1&&!Ie){const Pt=g.value.splice(Ue,1);g.value.splice(Ue+1,0,Pt[0]),Ie=!0}})},he=Ce=>{let Ie=!1;g.value.map((ze,Ue)=>{if(ze.uuid===Ce&&Ue!==0&&!Ie){const Pt=g.value.splice(Ue,1);g.value.splice(Ue-1,0,Pt[0]),Ie=!0}})},_e=Ce=>{Ce.type===ParameterType.Number?Ce.value=0:Ce.type===ParameterType.Constant?Ce.value="":Ce.type===ParameterType.RingController&&(Ce.value={radius:{name:"",min:0,max:1e3,value:500},degree:{name:"",min:0,max:360,value:60},params:[]})},xe=Ce=>{Ce.options.push({label:"",value:0})},Ne=(Ce,Ie)=>{const ze=Ce.options.findIndex(Ue=>Ue.value===Ie.value);ze!==-1&&Ce.options.splice(ze,1)},$e=()=>{ElMessageBox.confirm("","",{confirmButtonText:"",cancelButtonText:"",type:"warning"}).then(()=>{y.value=`function script_${window.__uuid.replaceAll("-","_")} (character, constants, FP) {
	//Todo something
}`,V&&V.dispatch({changes:{from:0,to:V.state.doc.length,insert:y.value}})}).catch(()=>{})};return(Ce,Ie)=>{const ze=resolveComponent("el-button"),Ue=resolveComponent("el-input"),Pt=resolveComponent("el-icon"),hn=resolveComponent("el-option"),Dt=resolveComponent("el-select"),xn=resolveComponent("el-input-number"),jt=resolveComponent("el-form-item"),Vn=resolveComponent("el-tab-pane"),Rn=resolveComponent("el-collapse-item"),Tn=resolveComponent("el-collapse"),Ln=resolveComponent("el-tabs"),Sn=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$3,[createVNode(Ln,{modelValue:$.value,"onUpdate:modelValue":Ie[0]||(Ie[0]=An=>$.value=An),class:"tabs"},{default:withCtx(()=>[createVNode(Vn,{label:unref(r)("programming.global-constants"),name:"global-constants"},{default:withCtx(()=>[createVNode(Sn,null,{default:withCtx(()=>[createVNode(ze,{class:"add-constant-button",onPointerdown:j},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.new-constant")),1)]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value,An=>(openBlock(),createElementBlock("div",_hoisted_3$2,[createBaseVNode("div",_hoisted_4$2,[withDirectives(createBaseVNode("span",{class:"parameter-name-label"},toDisplayString$1(An.name),513),[[vShow,!k.value[An.uuid]]]),withDirectives(createVNode(Ue,{class:"parameter-name-input",modelValue:An.name,"onUpdate:modelValue":In=>An.name=In,onKeyup:withKeys(In=>z(An.uuid,!1),["enter","native"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"]),[[vShow,k.value[An.uuid]]]),withDirectives(createVNode(Pt,{class:"edit-icon",onPointerdown:In=>z(An.uuid,!0)},{default:withCtx(()=>[createVNode(unref(edit_default))]),_:2},1032,["onPointerdown"]),[[vShow,!k.value[An.uuid]]])]),createVNode(Dt,{modelValue:An.type,"onUpdate:modelValue":In=>An.type=In,class:"parameter-type-select",placeholder:unref(r)("programming.type"),onChange:In=>_e(An)},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(oe,In=>createVNode(hn,{key:In.key,label:unref(r)(`programming.${In.key}`),value:In.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"]),An.type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_5$2,[createVNode(xn,{class:"parameter-value",modelValue:An.value,"onUpdate:modelValue":In=>An.value=In,precision:2},null,8,["modelValue","onUpdate:modelValue"]),createVNode(jt,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value",modelValue:An.min,"onUpdate:modelValue":In=>An.min=In,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(jt,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value",modelValue:An.max,"onUpdate:modelValue":In=>An.max=In,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])):An.type===unref(ParameterType).Enum?(openBlock(),createElementBlock("div",_hoisted_6$2,[createVNode(Dt,{modelValue:An.value,"onUpdate:modelValue":In=>An.value=In,class:"parameter-const-select",placeholder:unref(r)("programming.value")},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(An.options,In=>(openBlock(),createBlock(hn,{key:In.value,label:In.label,value:In.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),createBaseVNode("div",_hoisted_7$2,[createVNode(ze,{class:"add-option-button",onPointerdown:In=>xe(An)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.new_enum_option")),1)]),_:2},1032,["onPointerdown"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(An.options,In=>(openBlock(),createElementBlock("div",_hoisted_8$2,[createVNode(jt,{label:"label","label-width":"80px"},{default:withCtx(()=>[createVNode(Ue,{class:"option-name",modelValue:In.label,"onUpdate:modelValue":Mn=>In.label=Mn},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(jt,{label:"value","label-width":"80px"},{default:withCtx(()=>[createVNode(xn,{class:"option-value",modelValue:In.value,"onUpdate:modelValue":Mn=>In.value=Mn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Pt,{class:"option-remove-btn",onPointerdown:Mn=>Ne(An,In)},{default:withCtx(()=>[createVNode(unref(delete_default))]),_:2},1032,["onPointerdown"])]))),256))])])):An.type===unref(ParameterType).Constant?(openBlock(),createBlock(Dt,{key:2,modelValue:An.value,"onUpdate:modelValue":In=>An.value=In,class:"parameter-const-select",placeholder:unref(r)("programming.value")},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value,In=>(openBlock(),createBlock(hn,{key:In.uuid,label:In.name,value:In.uuid},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):An.type===unref(ParameterType).RingController?(openBlock(),createElementBlock("div",_hoisted_9$2,[createVNode(Ln,{type:"border-card"},{default:withCtx(()=>[createVNode(Vn,{label:"radius"},{default:withCtx(()=>[createVNode(jt,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Ue,{class:"parameter-value",modelValue:An.value.radius.name,"onUpdate:modelValue":In=>An.value.radius.name=In},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(jt,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value",modelValue:An.value.radius.value,"onUpdate:modelValue":In=>An.value.radius.value=In,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(jt,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value",modelValue:An.value.radius.min,"onUpdate:modelValue":In=>An.value.radius.min=In,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(jt,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value",modelValue:An.value.radius.max,"onUpdate:modelValue":In=>An.value.radius.max=In,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),createVNode(Vn,{label:"degree"},{default:withCtx(()=>[createVNode(jt,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Ue,{class:"parameter-value",modelValue:An.value.degree.name,"onUpdate:modelValue":In=>An.value.degree.name=In},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(jt,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value",modelValue:An.value.degree.value,"onUpdate:modelValue":In=>An.value.degree.value=In,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(jt,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value",modelValue:An.value.degree.min,"onUpdate:modelValue":In=>An.value.degree.min=In,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(jt,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value",modelValue:An.value.degree.max,"onUpdate:modelValue":In=>An.value.degree.max=In,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),createVNode(Vn,{label:"params"},{default:withCtx(()=>[createVNode(ze,{class:"add-parameter-button",onPointerdown:In=>le(An.value)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.new-parameter")),1)]),_:2},1032,["onPointerdown"]),createVNode(Tn,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(An.value.params,In=>(openBlock(),createBlock(Rn,{title:In.name,name:"1"},{default:withCtx(()=>[createVNode(jt,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Ue,{class:"parameter-value",modelValue:In.name,"onUpdate:modelValue":Mn=>In.name=Mn},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(jt,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value",modelValue:In.value,"onUpdate:modelValue":Mn=>In.value=Mn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(jt,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value",modelValue:In.min,"onUpdate:modelValue":Mn=>In.min=Mn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(jt,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(xn,{class:"parameter-value",modelValue:In.max,"onUpdate:modelValue":Mn=>In.max=Mn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024)])):createCommentVNode("",!0),createVNode(Pt,{class:"sort-down-btn",onPointerdown:In=>de(An.uuid)},{default:withCtx(()=>[createVNode(unref(sort_down_default))]),_:2},1032,["onPointerdown"]),createVNode(Pt,{class:"sort-up-btn",onPointerdown:In=>he(An.uuid)},{default:withCtx(()=>[createVNode(unref(sort_up_default))]),_:2},1032,["onPointerdown"]),createVNode(Pt,{class:"remove-btn",onPointerdown:In=>ae(An.uuid)},{default:withCtx(()=>[createVNode(unref(close_default))]),_:2},1032,["onPointerdown"])]))),256))]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])]),createBaseVNode("div",_hoisted_10$2,[createBaseVNode("div",_hoisted_11$2,[createBaseVNode("div",_hoisted_12$2,toDisplayString$1(unref(n)("programming.script")),1),createVNode(ze,{type:"danger",class:"reset-btn",onPointerdown:Ie[1]||(Ie[1]=An=>$e())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.reset")),1)]),_:1}),createVNode(ze,{class:"execute-btn",type:"primary",onPointerdown:Ie[2]||(Ie[2]=An=>ue())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.execute")),1)]),_:1})]),_hoisted_13$2])])}}}),CharacterProgrammingEditor=_export_sfc(_sfc_main$4,[["__scopeId","data-v-f689a785"]]),_withScopeId=e=>(pushScopeId("data-v-c3fda64a"),e=e(),popScopeId(),e),_hoisted_1$2={class:"glyph-programming-editor"},_hoisted_2$2={class:"left-panel"},_hoisted_3$1={class:"constant-item"},_hoisted_4$1={class:"parameter-name"},_hoisted_5$1={key:0},_hoisted_6$1={key:1,class:"enum-wrap"},_hoisted_7$1={class:"options-wrap"},_hoisted_8$1={class:"option-item"},_hoisted_9$1={key:3},_hoisted_10$1={class:"parameter-item"},_hoisted_11$1={class:"parameter-name"},_hoisted_12$1={key:0},_hoisted_13$1={key:1,class:"enum-wrap"},_hoisted_14$1={class:"options-wrap"},_hoisted_15={class:"option-item"},_hoisted_16={key:3},_hoisted_17={class:"right-panel"},_hoisted_18={class:"codes-header"},_hoisted_19={class:"codes-title"},_hoisted_20=_withScopeId(()=>createBaseVNode("div",{id:"codes-container"},null,-1)),_sfc_main$3=defineComponent({__name:"GlyphProgrammingEditor",setup(e){const{t:n,tm:r}=useI18n(),g=ref([]),y=ref([]),k=ref(""),$=ref({}),V=ref("global-constants");let L=null;const z=[{value:ParameterType.Constant,key:"constant"},{value:ParameterType.Number,key:"number"},{value:ParameterType.RingController,key:"ring"},{value:ParameterType.Enum,key:"enum"}],j=[{value:ParameterType.Number,key:"number"},{value:ParameterType.RingController,key:"ring"},{value:ParameterType.Enum,key:"enum"}];let ae=null;onMounted(async()=>{if(window.__TAURI_INTERNALS__){const Dt=await getCurrentWindow().onCloseRequested(async xn=>{try{L&&(L.toTextArea(),L=null,document.getElementById("codes-container").innerHTML=""),await emit("on-webview-close"),ae&&ae(),Dt&&Dt()}catch(jt){console.error(jt)}});ae=await listen("init-data",xn=>{const{__constants:jt,__parameters:Vn,__script:Rn,__isWeb:Tn,__uuid:Ln}=xn.payload;window.__uuid=Ln,window.__constants=jt,window.__parameters=Vn,window.__script=Rn,window.__is_web=Tn,g.value=jt,y.value=Vn,k.value=Rn,g.value?.map(An=>{$.value[An.uuid]=!1}),y.value?.map(An=>{$.value[An.uuid]=!1}),L=new EditorView({doc:k.value,extensions:[basicSetup,javascript(),oneDark,EditorView.updateListener.of(An=>{k.value=An.state.doc.toString()})],parent:document.getElementById("codes-container")});const Sn=navigator.userAgent.includes("Mac");L.dom.addEventListener("keydown",async An=>{if((Sn?An.metaKey:An.ctrlKey)&&An.key==="c"){const{from:In,to:Mn}=L.state.selection.main,ra=L.state.doc.slice(In,Mn).toString();ra&&await writeText(ra),An.preventDefault()}if((Sn?An.metaKey:An.ctrlKey)&&An.key==="v"){const In=await readText();if(In){const{from:Mn}=L.state.selection.main,ra=L.state.update({changes:{from:Mn,insert:In}});L.dispatch(ra)}An.preventDefault()}})}),await emit("on-webview-mounted")}else{const Dt=xn=>{window.opener.postMessage("close-window",location.origin),window.removeEventListener("beforeunload",Dt)};window.addEventListener("beforeunload",Dt),g.value=window.opener.__constants,y.value=window.opener.__parameters,k.value=window.opener.__script,window.__uuid=window.opener.__uuid,window.opener.__is_web,g.value.map(xn=>{$.value[xn.uuid]=!1}),y.value.map(xn=>{$.value[xn.uuid]=!1}),L=new EditorView({doc:k.value,extensions:[basicSetup,javascript(),oneDark,EditorView.updateListener.of(xn=>{k.value=xn.state.doc.toString()})],parent:document.getElementById("codes-container")})}}),onUnmounted(()=>{const Dt=L.getWrapperElement();Dt.parentNode.removeChild(Dt),L=null});const oe=(Dt,xn)=>{$.value[Dt]=xn},re=()=>{const Dt=genUUID();g.value.push({uuid:Dt,name:Dt.slice(0,5),value:0,type:ParameterType.Number,min:0,max:1e3})},ue=()=>{const Dt=genUUID();y.value.push({uuid:Dt,name:Dt.slice(0,5).replaceAll("-","_"),type:ParameterType.Number,value:0,min:0,max:1e3})},le=Dt=>{g.value.map((xn,jt)=>{xn.uuid===Dt&&g.value.splice(jt,1)})},de=Dt=>{y.value.map((xn,jt)=>{xn.uuid===Dt&&y.value.splice(jt,1)})},he=Dt=>{let xn=!1;y.value.map((jt,Vn)=>{if(jt.uuid===Dt&&Vn!==y.value.length-1&&!xn){const Rn=y.value.splice(Vn,1);y.value.splice(Vn+1,0,Rn[0]),xn=!0}})},_e=Dt=>{let xn=!1;y.value.map((jt,Vn)=>{if(jt.uuid===Dt&&Vn!==0&&!xn){const Rn=y.value.splice(Vn,1);y.value.splice(Vn-1,0,Rn[0]),xn=!0}})},xe=Dt=>{let xn=!1;g.value.map((jt,Vn)=>{if(jt.uuid===Dt&&Vn!==g.value.length-1&&!xn){const Rn=g.value.splice(Vn,1);g.value.splice(Vn+1,0,Rn[0]),xn=!0}})},Ne=Dt=>{let xn=!1;g.value.map((jt,Vn)=>{if(jt.uuid===Dt&&Vn!==0&&!xn){const Rn=g.value.splice(Vn,1);g.value.splice(Vn-1,0,Rn[0]),xn=!0}})};watch([g,y,k],()=>{$e()},{deep:!0});const $e=async()=>{window.__TAURI_INTERNALS__?await emit("sync-info",{__constants:g.value,__parameters:y.value,__script:k.value}):(localStorage.setItem("constants",JSON.stringify(g.value)),localStorage.setItem("parameters",JSON.stringify(y.value)),localStorage.setItem("script",k.value),window.opener.postMessage("sync-info",location.origin))},Ce=async()=>{window.__TAURI_INTERNALS__?await emit("execute-script"):window.opener.postMessage("execute-script",location.origin)},Ie=Dt=>{Dt.params.push({name:"",min:0,max:1e3,value:500})},ze=Dt=>{Dt.type===ParameterType.Number?Dt.value=0:Dt.type===ParameterType.Constant?Dt.value="":Dt.type===ParameterType.RingController&&(Dt.value={radius:{name:"",min:0,max:1e3,value:500},degree:{name:"",min:0,max:360,value:60},params:[]})},Ue=Dt=>{Dt.options.push({label:"",value:0})},Pt=(Dt,xn)=>{const jt=Dt.options.findIndex(Vn=>Vn.value===xn.value);jt!==-1&&Dt.options.splice(jt,1)},hn=()=>{ElMessageBox.confirm("","",{confirmButtonText:"",cancelButtonText:"",type:"warning"}).then(()=>{k.value=`function script_${window.__uuid.replaceAll("-","_")} (glyph, constants, FP) {
	//Todo something
}`,L&&L.dispatch({changes:{from:0,to:L.state.doc.length,insert:k.value}})}).catch(()=>{})};return(Dt,xn)=>{const jt=resolveComponent("el-button"),Vn=resolveComponent("el-input"),Rn=resolveComponent("el-icon"),Tn=resolveComponent("el-option"),Ln=resolveComponent("el-select"),Sn=resolveComponent("el-input-number"),An=resolveComponent("el-form-item"),In=resolveComponent("el-tab-pane"),Mn=resolveComponent("el-collapse-item"),ra=resolveComponent("el-collapse"),da=resolveComponent("el-tabs"),ua=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$2,[createVNode(da,{modelValue:V.value,"onUpdate:modelValue":xn[0]||(xn[0]=aa=>V.value=aa),class:"tabs"},{default:withCtx(()=>[createVNode(In,{label:unref(r)("programming.global-constants"),name:"global-constants"},{default:withCtx(()=>[createVNode(ua,null,{default:withCtx(()=>[createVNode(jt,{class:"add-constant-button",onPointerdown:re},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.new-constant")),1)]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value,aa=>(openBlock(),createElementBlock("div",_hoisted_3$1,[createBaseVNode("div",_hoisted_4$1,[withDirectives(createBaseVNode("span",{class:"parameter-name-label"},toDisplayString$1(aa.name),513),[[vShow,!$.value[aa.uuid]]]),withDirectives(createVNode(Vn,{class:"parameter-name-input",modelValue:aa.name,"onUpdate:modelValue":Nn=>aa.name=Nn,onKeyup:withKeys(Nn=>oe(aa.uuid,!1),["enter","native"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"]),[[vShow,$.value[aa.uuid]]]),withDirectives(createVNode(Rn,{class:"edit-icon",onPointerdown:Nn=>oe(aa.uuid,!0)},{default:withCtx(()=>[createVNode(unref(edit_default))]),_:2},1032,["onPointerdown"]),[[vShow,!$.value[aa.uuid]]])]),createVNode(Ln,{modelValue:aa.type,"onUpdate:modelValue":Nn=>aa.type=Nn,class:"parameter-type-select",placeholder:unref(r)("programming.type"),onChange:Nn=>ze(aa)},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(j,Nn=>createVNode(Tn,{key:Nn.key,label:unref(r)(`programming.${Nn.key}`),value:Nn.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"]),aa.type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_5$1,[createVNode(Sn,{class:"parameter-value",modelValue:aa.value,"onUpdate:modelValue":Nn=>aa.value=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"]),createVNode(An,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:aa.min,"onUpdate:modelValue":Nn=>aa.min=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:aa.max,"onUpdate:modelValue":Nn=>aa.max=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])):aa.type===unref(ParameterType).Enum?(openBlock(),createElementBlock("div",_hoisted_6$1,[createVNode(Ln,{modelValue:aa.value,"onUpdate:modelValue":Nn=>aa.value=Nn,class:"parameter-const-select",placeholder:unref(r)("programming.value")},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(aa.options,Nn=>(openBlock(),createBlock(Tn,{key:Nn.value,label:Nn.label,value:Nn.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),createBaseVNode("div",_hoisted_7$1,[createVNode(jt,{class:"add-option-button",onPointerdown:Nn=>Ue(aa)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.new_enum_option")),1)]),_:2},1032,["onPointerdown"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(aa.options,Nn=>(openBlock(),createElementBlock("div",_hoisted_8$1,[createVNode(An,{label:"label","label-width":"80px"},{default:withCtx(()=>[createVNode(Vn,{class:"option-name",modelValue:Nn.label,"onUpdate:modelValue":En=>Nn.label=En},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"value","label-width":"80px"},{default:withCtx(()=>[createVNode(Sn,{class:"option-value",modelValue:Nn.value,"onUpdate:modelValue":En=>Nn.value=En,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Rn,{class:"option-remove-btn",onPointerdown:En=>Pt(aa,Nn)},{default:withCtx(()=>[createVNode(unref(delete_default))]),_:2},1032,["onPointerdown"])]))),256))])])):aa.type===unref(ParameterType).Constant?(openBlock(),createBlock(Ln,{key:2,modelValue:aa.value,"onUpdate:modelValue":Nn=>aa.value=Nn,class:"parameter-const-select",placeholder:unref(r)("programming.value")},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value,Nn=>(openBlock(),createBlock(Tn,{key:Nn.uuid,label:Nn.name,value:Nn.uuid},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):aa.type===unref(ParameterType).RingController?(openBlock(),createElementBlock("div",_hoisted_9$1,[createVNode(da,{type:"border-card"},{default:withCtx(()=>[createVNode(In,{label:"radius"},{default:withCtx(()=>[createVNode(An,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:aa.value.radius.name,"onUpdate:modelValue":Nn=>aa.value.radius.name=Nn},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:aa.value.radius.value,"onUpdate:modelValue":Nn=>aa.value.radius.value=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:aa.value.radius.min,"onUpdate:modelValue":Nn=>aa.value.radius.min=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:aa.value.radius.max,"onUpdate:modelValue":Nn=>aa.value.radius.max=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),createVNode(In,{label:"degree"},{default:withCtx(()=>[createVNode(An,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:aa.value.degree.name,"onUpdate:modelValue":Nn=>aa.value.degree.name=Nn},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:aa.value.degree.value,"onUpdate:modelValue":Nn=>aa.value.degree.value=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:aa.value.degree.min,"onUpdate:modelValue":Nn=>aa.value.degree.min=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:aa.value.degree.max,"onUpdate:modelValue":Nn=>aa.value.degree.max=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),createVNode(In,{label:"params"},{default:withCtx(()=>[createVNode(jt,{class:"add-parameter-button",onPointerdown:Nn=>Ie(aa.value)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.new-parameter")),1)]),_:2},1032,["onPointerdown"]),createVNode(ra,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(aa.value.params,Nn=>(openBlock(),createBlock(Mn,{title:Nn.name,name:"1"},{default:withCtx(()=>[createVNode(An,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Nn.name,"onUpdate:modelValue":En=>Nn.name=En},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:Nn.value,"onUpdate:modelValue":En=>Nn.value=En,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:Nn.min,"onUpdate:modelValue":En=>Nn.min=En,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:Nn.max,"onUpdate:modelValue":En=>Nn.max=En,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024)])):createCommentVNode("",!0),createVNode(Rn,{class:"sort-down-btn",onPointerdown:Nn=>xe(aa.uuid)},{default:withCtx(()=>[createVNode(unref(sort_down_default))]),_:2},1032,["onPointerdown"]),createVNode(Rn,{class:"sort-up-btn",onPointerdown:Nn=>Ne(aa.uuid)},{default:withCtx(()=>[createVNode(unref(sort_up_default))]),_:2},1032,["onPointerdown"]),createVNode(Rn,{class:"remove-btn",onPointerdown:Nn=>le(aa.uuid)},{default:withCtx(()=>[createVNode(unref(close_default))]),_:2},1032,["onPointerdown"])]))),256))]),_:1})]),_:1},8,["label"]),createVNode(In,{label:unref(r)("programming.glyph-parameters"),name:"glyph-parameters"},{default:withCtx(()=>[createVNode(ua,null,{default:withCtx(()=>[createVNode(jt,{class:"add-parameter-button",onPointerdown:ue},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.new-parameter")),1)]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(y.value,aa=>(openBlock(),createElementBlock("div",_hoisted_10$1,[createBaseVNode("div",_hoisted_11$1,[withDirectives(createBaseVNode("span",{class:"parameter-name-label"},toDisplayString$1(aa.name),513),[[vShow,!$.value[aa.uuid]]]),withDirectives(createVNode(Vn,{class:"parameter-name-input",modelValue:aa.name,"onUpdate:modelValue":Nn=>aa.name=Nn,onKeyup:withKeys(Nn=>oe(aa.uuid,!1),["enter","native"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"]),[[vShow,$.value[aa.uuid]]]),withDirectives(createVNode(Rn,{class:"edit-icon",onPointerdown:Nn=>oe(aa.uuid,!0)},{default:withCtx(()=>[createVNode(unref(edit_default))]),_:2},1032,["onPointerdown"]),[[vShow,!$.value[aa.uuid]]])]),createVNode(Ln,{modelValue:aa.type,"onUpdate:modelValue":Nn=>aa.type=Nn,class:"parameter-type-select",placeholder:unref(r)("programming.type"),onChange:Nn=>ze(aa)},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(z,Nn=>createVNode(Tn,{key:Nn.key,label:unref(r)(`programming.${Nn.key}`),value:Nn.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"]),aa.type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_12$1,[createVNode(Sn,{class:"parameter-value",modelValue:aa.value,"onUpdate:modelValue":Nn=>aa.value=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"]),createVNode(An,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:aa.min,"onUpdate:modelValue":Nn=>aa.min=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:aa.max,"onUpdate:modelValue":Nn=>aa.max=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])):aa.type===unref(ParameterType).Enum?(openBlock(),createElementBlock("div",_hoisted_13$1,[createVNode(Ln,{modelValue:aa.value,"onUpdate:modelValue":Nn=>aa.value=Nn,class:"parameter-const-select",placeholder:unref(r)("programming.value")},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(aa.options,Nn=>(openBlock(),createBlock(Tn,{key:Nn.value,label:Nn.label,value:Nn.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),createBaseVNode("div",_hoisted_14$1,[createVNode(jt,{class:"add-option-button",onPointerdown:Nn=>Ue(aa)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.new_enum_option")),1)]),_:2},1032,["onPointerdown"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(aa.options,Nn=>(openBlock(),createElementBlock("div",_hoisted_15,[createVNode(An,{label:"label","label-width":"80px"},{default:withCtx(()=>[createVNode(Vn,{class:"option-name",modelValue:Nn.label,"onUpdate:modelValue":En=>Nn.label=En},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"value","label-width":"80px"},{default:withCtx(()=>[createVNode(Sn,{class:"option-value",modelValue:Nn.value,"onUpdate:modelValue":En=>Nn.value=En,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Rn,{class:"option-remove-btn",onPointerdown:En=>Pt(aa,Nn)},{default:withCtx(()=>[createVNode(unref(delete_default))]),_:2},1032,["onPointerdown"])]))),256))])])):aa.type===unref(ParameterType).Constant?(openBlock(),createBlock(Ln,{key:2,modelValue:aa.value,"onUpdate:modelValue":Nn=>aa.value=Nn,class:"parameter-const-select",placeholder:unref(r)("programming.value")},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value,Nn=>(openBlock(),createBlock(Tn,{key:Nn.uuid,label:Nn.name,value:Nn.uuid},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):aa.type===unref(ParameterType).RingController?(openBlock(),createElementBlock("div",_hoisted_16,[createVNode(da,{type:"border-card"},{default:withCtx(()=>[createVNode(In,{label:"radius"},{default:withCtx(()=>[createVNode(An,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:aa.value.radius.name,"onUpdate:modelValue":Nn=>aa.value.radius.name=Nn},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:aa.value.radius.value,"onUpdate:modelValue":Nn=>aa.value.radius.value=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:aa.value.radius.min,"onUpdate:modelValue":Nn=>aa.value.radius.min=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:aa.value.radius.max,"onUpdate:modelValue":Nn=>aa.value.radius.max=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),createVNode(In,{label:"degree"},{default:withCtx(()=>[createVNode(An,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:aa.value.degree.name,"onUpdate:modelValue":Nn=>aa.value.degree.name=Nn},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:aa.value.degree.value,"onUpdate:modelValue":Nn=>aa.value.degree.value=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:aa.value.degree.min,"onUpdate:modelValue":Nn=>aa.value.degree.min=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:aa.value.degree.max,"onUpdate:modelValue":Nn=>aa.value.degree.max=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),createVNode(In,{label:"params"},{default:withCtx(()=>[createVNode(jt,{class:"add-parameter-button",onPointerdown:Nn=>Ie(aa.value)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.new-parameter")),1)]),_:2},1032,["onPointerdown"]),createVNode(ra,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(aa.value.params,Nn=>(openBlock(),createBlock(Mn,{title:Nn.name,name:"1"},{default:withCtx(()=>[createVNode(An,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Nn.name,"onUpdate:modelValue":En=>Nn.name=En},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:Nn.value,"onUpdate:modelValue":En=>Nn.value=En,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:Nn.min,"onUpdate:modelValue":En=>Nn.min=En,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(An,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(Sn,{class:"parameter-value",modelValue:Nn.max,"onUpdate:modelValue":En=>Nn.max=En,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024)])):createCommentVNode("",!0),createVNode(Rn,{class:"sort-down-btn",onPointerdown:Nn=>he(aa.uuid)},{default:withCtx(()=>[createVNode(unref(sort_down_default))]),_:2},1032,["onPointerdown"]),createVNode(Rn,{class:"sort-up-btn",onPointerdown:Nn=>_e(aa.uuid)},{default:withCtx(()=>[createVNode(unref(sort_up_default))]),_:2},1032,["onPointerdown"]),createVNode(Rn,{class:"remove-btn",onPointerdown:Nn=>de(aa.uuid)},{default:withCtx(()=>[createVNode(unref(close_default))]),_:2},1032,["onPointerdown"])]))),256))]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])]),createBaseVNode("div",_hoisted_17,[createBaseVNode("div",_hoisted_18,[createBaseVNode("div",_hoisted_19,toDisplayString$1(unref(n)("programming.script")),1),createVNode(jt,{type:"danger",class:"reset-btn",onPointerdown:xn[1]||(xn[1]=aa=>hn())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.reset")),1)]),_:1}),createVNode(jt,{class:"execute-btn",type:"primary",onPointerdown:xn[2]||(xn[2]=aa=>Ce())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.execute")),1)]),_:1})]),_hoisted_20])])}}}),GlyphProgrammingEditor=_export_sfc(_sfc_main$3,[["__scopeId","data-v-c3fda64a"]]),_hoisted_1$1={class:"widget grid-controller"},_hoisted_2$1=["width","height"],_sfc_main$2=defineComponent({__name:"GridController_playground",props:{dx:{type:Number,default:0},dy:{type:Number,default:0},centerSquareSize:{type:Number,default:500/3},size:{type:Number,default:500},onChange:Function},setup(e){const n=e,{dx:r,dy:g,centerSquareSize:y,size:k,onChange:$}=toRefs(n),V=computed(()=>[j(k.value/2)+j(r.value),j(k.value/2)+j(g.value)]),L=ref(null),z=($e,Ce,Ie,ze)=>Math.sqrt(($e-Ie)*($e-Ie)+(Ce-ze)*(Ce-ze)),j=$e=>$e/k.value*500,ae=computed(()=>Math.round((k.value-y.value)/2)+r.value),oe=computed(()=>Math.round((k.value-y.value)/2+y.value)+r.value),re=computed(()=>Math.round((k.value-y.value)/2)+g.value),ue=computed(()=>Math.round((k.value-y.value)/2+y.value)+g.value);onMounted(()=>{L.value.addEventListener("mousedown",he),L.value.addEventListener("mousemove",_e)}),onBeforeUnmount(()=>{L.value.removeEventListener("mousedown",he),L.value.removeEventListener("mousemove",_e)});const le=ref("none"),de=ref("default"),he=$e=>{z($e.offsetX,$e.offsetY,V.value[0],V.value[1])<=20?(document.body.addEventListener("mouseup",xe),le.value="inner-move"):z($e.offsetX,$e.offsetY,j(k.value/2-y.value/4),j(k.value/2-y.value/4))<=20?(document.body.addEventListener("mouseup",xe),le.value="left-top",de.value="left-top"):z($e.offsetX,$e.offsetY,j(k.value/2+y.value/4),j(k.value/2-y.value/4))<=20?(document.body.addEventListener("mouseup",xe),le.value="right-top",de.value="right-top"):z($e.offsetX,$e.offsetY,j(k.value/2-y.value/4),j(k.value/2+y.value/4))<=20?(document.body.addEventListener("mouseup",xe),le.value="left-bottom",de.value="left-bottom"):z($e.offsetX,$e.offsetY,j(k.value/2+y.value/4),j(k.value/2+y.value/4))<=20&&(document.body.addEventListener("mouseup",xe),le.value="right-bottom",de.value="right-bottom")},_e=$e=>{switch(le.value){case"inner-move":{const Ce=$e.offsetX/500*k.value-k.value/2,Ie=$e.offsetY/500*k.value-k.value/2;Math.abs(Ce)<=k.value/12&&Math.abs(Ie)<=k.value/12&&$.value(Ce,Ie,y.value);break}case"none":{z($e.offsetX,$e.offsetY,j(k.value/2-y.value/4),j(k.value/2-y.value/4))<=20?de.value="left-top":z($e.offsetX,$e.offsetY,j(k.value/2+y.value/4),j(k.value/2-y.value/4))<=20?de.value="right-top":z($e.offsetX,$e.offsetY,j(k.value/2-y.value/4),j(k.value/2+y.value/4))<=20?de.value="left-bottom":z($e.offsetX,$e.offsetY,j(k.value/2+y.value/4),j(k.value/2+y.value/4))<=20?de.value="right-bottom":de.value="default";break}default:{const Ce=$e.offsetX/500*k.value-k.value/2,Ie=$e.offsetY/500*k.value-k.value/2;let ze=0;if(le.value==="left-top"?ze=Math.min(-Ce,-Ie):le.value==="right-top"?ze=Math.min(Ce,-Ie):le.value==="left-bottom"?ze=Math.min(-Ce,Ie):le.value==="right-bottom"&&(ze=Math.min(Ce,Ie)),ze=Math.abs(ze),ze<=k.value/6&&ze>=k.value/24){const Ue=ze*4,Pt=r.value/y.value*Ue,hn=g.value/y.value*Ue;$.value(Pt,hn,Ue)}else if(ze>=k.value/6){const Ue=k.value/3*2,Pt=r.value/y.value*Ue,hn=g.value/y.value*Ue;$.value(Pt,hn,Ue)}else if(ze<=k.value/24){const Ue=k.value/6,Pt=r.value/y.value*Ue,hn=g.value/y.value*Ue;$.value(Pt,hn,Ue)}break}}},xe=()=>{le.value="none",document.body.removeEventListener("mouseup",xe)};emitter.on("refreshPlaygroundGridController",()=>{Ne(),renderGridCanvas(orderedListWithItemsForCurrentCharacterFile$1.value,L.value,{scale:.5,forceUpdate:!1,fill:!1,offset:{x:0,y:0},grid:{dx:r.value,dy:g.value,size:k.value,centerSquareSize:y.value,x1:ae.value,x2:oe.value,y1:re.value,y2:ue.value},useSkeletonGrid:!1})}),watch([r,g,k,y],($e,Ce)=>{Ne(),renderGridCanvas(orderedListWithItemsForCurrentCharacterFile$1.value,L.value,{scale:.5,forceUpdate:!1,fill:!1,offset:{x:0,y:0},grid:{dx:r.value,dy:g.value,size:k.value,centerSquareSize:y.value,x1:ae.value,x2:oe.value,y1:re.value,y2:ue.value},useSkeletonGrid:!0})},{deep:!0});const Ne=()=>{const $e=L.value.getContext("2d");$e.clearRect(0,0,k.value,k.value),$e.strokeStyle="#811616",$e.lineWidth=2,$e.beginPath(),$e.moveTo(0,re.value),$e.lineTo(k.value,re.value),$e.stroke(),$e.closePath(),$e.beginPath(),$e.moveTo(0,ue.value),$e.lineTo(k.value,ue.value),$e.stroke(),$e.closePath(),$e.beginPath(),$e.moveTo(ae.value,0),$e.lineTo(ae.value,k.value),$e.stroke(),$e.closePath(),$e.beginPath(),$e.moveTo(oe.value,0),$e.lineTo(oe.value,k.value),$e.stroke(),$e.closePath(),$e.beginPath(),$e.strokeStyle="#153063",$e.rect(k.value/2-y.value/4,k.value/2-y.value/4,y.value/2,y.value/2),$e.stroke(),$e.closePath(),$e.fillStyle="#153063",$e.lineWidth=0,$e.beginPath(),$e.arc(V.value[0]/500*k.value,V.value[1]/500*k.value,20,0,2*Math.PI),$e.closePath(),$e.fill()};return($e,Ce)=>(openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("canvas",{ref_key:"canvas",ref:L,width:unref(k),height:unref(k),style:{width:"500px",height:"500px"},class:normalizeClass({"left-top":de.value==="left-top","right-top":de.value==="right-top","left-bottom":de.value==="left-bottom","right-bottom":de.value==="right-bottom"})},null,10,_hoisted_2$1)]))}}),GridController=_export_sfc(_sfc_main$2,[["__scopeId","data-v-a0ec22ff"]]),_hoisted_1={class:"playground"},_hoisted_2={class:"el-loading-spinner"},_hoisted_3=createBaseVNode("svg",{class:"circular",viewBox:"0 0 50 50"},[createBaseVNode("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})],-1),_hoisted_4={class:"loading-text"},_hoisted_5={class:"left"},_hoisted_6={class:"characters",id:"playground-characters-list"},_hoisted_7={class:"character-preview"},_hoisted_8={class:"params-panel"},_hoisted_9={class:"column column-1"},_hoisted_10={class:"column"},_hoisted_11={class:"right"},_hoisted_12={class:"edit-panel"},_hoisted_13=createBaseVNode("div",{class:"tips"},null,-1),_hoisted_14={class:"control-panel"},svg=`
  <path class="path" d="" style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>
`,_sfc_main$1=defineComponent({__name:"Playground",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=ref([]);onMounted(()=>{initPlayground()});const k=(L,z,j)=>{gridSettings.value.dx=L,gridSettings.value.dy=z,gridSettings.value.centerSquareSize=j,renderPreview()};watch(constants$1,()=>{updateCharactersAndPreview(),emitter.emit("refreshPlaygroundGridController")},{deep:!0});const $=()=>{let L=constants$1.value[0].value;L+=1,L>=constants$1.value[0].options.length&&(L=0),constants$1.value[0].value=L},V=()=>{let L=constants$1.value[2].value;L+=1,L>=constants$1.value[2].options.length&&(L=0),constants$1.value[2].value=L};return(L,z)=>{const j=resolveComponent("el-progress"),ae=resolveComponent("el-button"),oe=resolveComponent("el-slider"),re=resolveComponent("el-form-item"),ue=resolveDirective("loading");return withDirectives((openBlock(),createElementBlock("div",{class:"wrap","element-loading-text":"","element-loading-spinner":svg,"element-loading-svg-view-box":"-10, -10, 50, 50","element-loading-background":"rgba(122, 122, 122, 0.8)"},[createBaseVNode("div",_hoisted_1,[withDirectives(createBaseVNode("div",_hoisted_2,[_hoisted_3,createBaseVNode("div",null,toDisplayString$1(unref(r)("panels.paramsPanel.loadingMsg")),1)],512),[[vShow,unref(loading$1)&&unref(total$1)===0]]),withDirectives(createBaseVNode("div",_hoisted_4,[createVNode(j,{"text-inside":!0,"stroke-width":20,percentage:Math.round(unref(loaded$1)/unref(total$1)*100)},null,8,["percentage"]),createBaseVNode("div",null,toDisplayString$1(unref(r)("panels.paramsPanel.loadedMsg",{percent:Math.round(unref(loaded$1)/unref(total$1)*100)})),1)],512),[[vShow,unref(loading$1)&&unref(total$1)!=0]]),createBaseVNode("div",_hoisted_5,[createBaseVNode("div",_hoisted_6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(y.value,le=>(openBlock(),createElementBlock("div",_hoisted_7,toDisplayString$1(le),1))),256))]),createBaseVNode("div",_hoisted_8,[createBaseVNode("div",_hoisted_9,[createVNode(re,{"label-width":"80px",label:""},{default:withCtx(()=>[createVNode(ae,{size:"small",onPointerdown:$},{default:withCtx(()=>[createTextVNode("")]),_:1}),createVNode(oe,{size:"small",step:.05,modelValue:unref(constants$1)[1].value,"onUpdate:modelValue":z[0]||(z[0]=le=>unref(constants$1)[1].value=le),min:unref(constants$1)[1].min,max:unref(constants$1)[1].max},null,8,["modelValue","min","max"])]),_:1}),createVNode(re,{"label-width":"80px",label:""},{default:withCtx(()=>[createVNode(ae,{size:"small",onPointerdown:V},{default:withCtx(()=>[createTextVNode("")]),_:1}),createVNode(oe,{size:"small",step:.05,modelValue:unref(constants$1)[3].value,"onUpdate:modelValue":z[1]||(z[1]=le=>unref(constants$1)[3].value=le),min:unref(constants$1)[3].min,max:unref(constants$1)[3].max},null,8,["modelValue","min","max"])]),_:1})]),createBaseVNode("div",_hoisted_10,[createVNode(re,{"label-width":"80px",label:""},{default:withCtx(()=>[createVNode(oe,{size:"small",modelValue:unref(constants$1)[6].value,"onUpdate:modelValue":z[2]||(z[2]=le=>unref(constants$1)[6].value=le),min:unref(constants$1)[6].min,max:unref(constants$1)[6].max},null,8,["modelValue","min","max"])]),_:1}),createVNode(re,{"label-width":"80px",label:""},{default:withCtx(()=>[createVNode(oe,{size:"small",step:.05,modelValue:unref(constants$1)[5].value,"onUpdate:modelValue":z[3]||(z[3]=le=>unref(constants$1)[5].value=le),min:unref(constants$1)[5].min,max:unref(constants$1)[5].max},null,8,["modelValue","min","max"])]),_:1}),createVNode(re,{"label-width":"80px",label:""},{default:withCtx(()=>[createVNode(oe,{size:"small",step:.05,modelValue:unref(constants$1)[4].value,"onUpdate:modelValue":z[4]||(z[4]=le=>unref(constants$1)[4].value=le),min:unref(constants$1)[4].min,max:unref(constants$1)[4].max},null,8,["modelValue","min","max"])]),_:1})])])]),createBaseVNode("div",_hoisted_11,[createBaseVNode("div",_hoisted_12,[createVNode(GridController,{size:unref(gridSettings).size,dx:unref(gridSettings).dx,dy:unref(gridSettings).dy,centerSquareSize:unref(gridSettings).centerSquareSize,onChange:k},null,8,["size","dx","dy","centerSquareSize"])]),_hoisted_13,createBaseVNode("div",_hoisted_14,[createVNode(ae,{type:"primary",onClick:unref(exportFont$1)},{default:withCtx(()=>[createTextVNode("")]),_:1},8,["onClick"])])])])])),[[ue,unref(loading$1)]])}}}),router=createRouter({history:createWebHashHistory(),routes:[{path:"/",name:"welcome",component:Welcome},{path:"/editor",name:"editor",component:Editor},{path:"/character-programming-editor",name:"character-programming-editor",component:CharacterProgrammingEditor},{path:"/glyph-programming-editor",name:"glyph-programming-editor",component:GlyphProgrammingEditor},{path:"/playground",name:"playground",component:_sfc_main$1}]});router.beforeEach((e,n,r)=>{r()});const plainCompnent=e=>(e._o&&delete e._o,e),plainGlyph=(e,n={clearScript:!1})=>{const{clearScript:r}=n,g={uuid:e.uuid,type:e.type,name:e.name,components:e.components.map(y=>{const k=Object.assign({},y);return k.value.contour&&(k.value.contour=null),k.value.preview&&(k.value.preview=null),y.type==="glyph"?k.value=plainGlyph(y.value,{clearScript:!0}):k.value=plainCompnent(y.value),k}),groups:clone(e.groups),orderedList:clone(e.orderedList),selectedComponentsUUIDs:clone(e.selectedComponentsUUIDs),view:clone(e.view),parameters:e.parameters.parameters,joints:e.joints.map(y=>({name:y.name,uuid:y.uuid,x:y.x,y:y.y})),reflines:e.reflines?clone(e.reflines):[],script:r?null:e.script,skeleton:e.skeleton?clone(e.skeleton):null,style:e.style};return r&&(g.script_reference=e.uuid),e.layout&&(g.layout=clone(e.layout)),e.glyph_script&&(g.glyph_script=clone(e.glyph_script)),e.system_script&&(g.system_script=clone(e.system_script)),e._o&&(g.objData=e._o.getData(),g.objData._components.map(y=>{y.contour&&(y.contour=null),y.preview&&(y.preview=null)})),g},plainCharacter=e=>{addLoaded();const n={uuid:e.uuid,type:e.type,character:clone(e.character),components:e.components.map(r=>{const g=Object.assign({},r);return g.value.contour&&(g.value.contour=null),g.value.preview&&(g.value.preview=null),r.type==="glyph"?g.value=plainGlyph(r.value,{clearScript:!0}):g.value=plainCompnent(r.value),g}),groups:clone(e.groups),orderedList:clone(e.orderedList),selectedComponentsUUIDs:clone(e.selectedComponentsUUIDs),script:e.script||`function script_${e.uuid.replaceAll("-","_")} (character, constants, FP) {
	//Todo something
}`,view:clone(e.view)};return e.glyph_script&&(n.glyph_script=clone(e.glyph_script)),e.info&&(n.info=clone(e.info)),n},plainFile=async e=>{const n=[];return await(async g=>{for(let k=0;k<g.length;k+=100){const $=g.slice(k,k+100);await new Promise(V=>{requestAnimationFrame(()=>{$.forEach(L=>{n.push(plainCharacter(L))}),V()})})}})(e.characterList),{uuid:e.uuid,characterList:n,name:e.name,width:e.width,height:e.height,saved:e.saved,iconsCount:e.iconsCount,fontSettings:clone(e.fontSettings)}},mapToObject=e=>{let n={};return e.forEach((r,g)=>{n[g]=r}),n},instanceGlyph=(e,n)=>{e.parameters=new ParametersMap(e.parameters),e.joints=e.joints.map(g=>new Joint(g.name,{x:g.x,y:g.y})),e.components=e.components.length?e.components.map(g=>(g.type==="glyph"&&(g.value=instanceGlyph(g.value,!1),g.value.parent_reference={uuid:e.uuid,type:e.type}),g)):[];const r=new CustomGlyph(e);return e.objData&&r.setData(e.objData),n&&n?.updateContoursAndPreview&&componentsToContours(orderedListWithItemsForCharacterFile(e),{unitsPerEm:n.unitsPerEm,descender:n.descender,advanceWidth:n.advanceWidth},{x:0,y:0},!1,!1,!0),e},instanceCharacter=(e,n)=>(e.script||(e.script=`function script_${e.uuid.replaceAll("-","_")} (character, constants, FP) {
	//Todo something
}`),e.components=e.components.length?e.components.map(r=>(r.type==="glyph"&&(r.value=instanceGlyph(r.value,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3,updateContoursAndPreview:n?.updateContoursAndPreview}),r.value.parent_reference={uuid:e.uuid,type:e.type}),r)):[],new Character(e),n&&n?.updateContoursAndPreview&&componentsToContours(orderedListWithItemsForCharacterFile(e),{unitsPerEm:n.unitsPerEm,descender:n.descender,advanceWidth:n.advanceWidth},{x:0,y:0},!1,!1,!1),e),saveFile_tauri=async()=>{setSaveDialogVisible(!0)},saveAs_tauri=async()=>{setSaveDialogVisible(!0)},base64ToArrayBuffer=e=>{const n=e.replace(/^data:.+;base64,/,""),r=atob(n),g=new ArrayBuffer(r.length),y=new Uint8Array(g);for(let k=0;k<r.length;k++)y[k]=r.charCodeAt(k);return g},nativeSaveText=async(e,n,r)=>{const g=await save({defaultPath:n,filters:[{name:"Filter",extensions:r}]});g&&await writeTextFile(g,e)},nativeSaveBinary=async(e,n,r)=>{const g=await save({defaultPath:n,filters:[{name:"Filter",extensions:r}]});g&&await writeFile(g,e)},addLoaded=()=>{loading$1.value&&(loaded$1.value+=1,loaded$1.value>=total$1.value&&(loading$1.value=!1))},nativeImportFile=async e=>{const n=await open$2({filters:[{name:"Filter",extensions:e}]});let r=null,g="untitled";return n&&(r=await readFile(n),g=n.split("/").pop().split(".")[0]),{uint8Array:r,name:g}},nativeImportTextFile=async e=>{const n=await open$2({filters:[{name:"Filter",extensions:e}]});let r=null,g="untitled";return n&&(r=await readTextFile(n),g=n.split("/").pop().split(".")[0]),{data:r,name:g}},createFile=()=>{files.value&&files.value.length?(tips.value="",tipsDialogVisible.value=!0):setCreateFileDialogVisible(!0)},openFile_tauri=async()=>{if(files.value&&files.value.length)tips.value="",tipsDialogVisible.value=!0;else{const{data:e}=await nativeImportTextFile(["json"]);if(!e)return;const n=JSON.parse(e);await __openFile(n)}},__openFile=async e=>{total$1.value=e.file.characterList.length*1+Math.min(visibleCount.value,e.file.characterList.length)+(e.glyphs.length+e.stroke_glyphs.length+e.radical_glyphs.length+e.comp_glyphs.length)*3,loaded$1.value=0,loading$1.value=!0;const n=async(k,$)=>new Promise(V=>{const L=k.map(ae=>instanceGlyph(ae,{updateContoursAndPreview:!0,unitsPerEm:1e3,descender:-200,advanceWidth:1e3}));let z=0;const j=()=>{if(z>=L.length){V();return}const ae=L[z];addGlyph(ae,$),addGlyphTemplate(ae,$),addLoaded(),z++,z%100===0?requestAnimationFrame(j):j()};j()}),r=async k=>new Promise($=>{let V=0;const L=()=>{if(V>=k.characterList.length){$();return}const z=k.characterList[V];addLoaded();const j=instanceCharacter(z,{updateContoursAndPreview:!0,unitsPerEm:k.fontSettings.unitsPerEm,descender:k.fontSettings.descender,advanceWidth:k.fontSettings.advanceWidth});k.characterList[V]=j,V++,V%100===0?requestAnimationFrame(L):L()};L()});await n(e.glyphs,Status.GlyphList),await n(e.stroke_glyphs,Status.StrokeGlyphList),await n(e.radical_glyphs,Status.RadicalGlyphList),await n(e.comp_glyphs,Status.CompGlyphList);const g=e.file;if(e.constants)for(let k=0;k<e.constants.length;k++)constantsMap.getByUUID(e.constants[k].uuid)||constants.value.push(e.constants[k]);if(e.constantGlyphMap){const k=Object.keys(e.constantGlyphMap);for(let $=0;$<k.length;$++)constantGlyphMap.set(k[$],e.constantGlyphMap[k[$]])}await r(g);let y=!0;for(let k=0;k<files.value.length;k++)files.value[k].uuid===g.uuid&&(y=!1,ElNotification({title:"",message:h$1("i",`${g.name}`),type:"error"}));y&&(emitter.emit("renderGlyphPreviewCanvas"),emitter.emit("renderStrokeGlyphPreviewCanvas"),emitter.emit("renderRadicalGlyphPreviewCanvas"),emitter.emit("renderCompGlyphPreviewCanvas"),addFile(g),setSelectedFileUUID(g.uuid),setEditStatus(Status.CharacterList),router.currentRoute.value.name==="welcome"?router.push("/editor"):(clearCharacterRenderList(),characterList.value.map(k=>{addCharacterTemplate(generateCharacterTemplate(k))}),emitter.emit("renderPreviewCanvas")))},openFile=async()=>{if(ENV.value==="tauri"){router.currentRoute.value.name==="welcome"&&(router.push("/editor"),await nextTick(),await new Promise(e=>setTimeout(e,100))),await openFile_tauri();return}files.value&&files.value.length?(tips.value="",tipsDialogVisible.value=!0):(router.currentRoute.value.name==="welcome"&&(router.push("/editor"),await nextTick(),await new Promise(e=>setTimeout(e,100))),await _openFile())},_openFile=async()=>{const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("style","display: none"),e.setAttribute("accept",".json"),e.addEventListener("change",async n=>{const g=n.currentTarget.files;for(let y=0;y<g.length;y++){const k=new FileReader;k.readAsText(g[y]),k.onload=async()=>{const $=JSON.parse(k.result);await __openFile($)}}document.body.removeChild(e)}),document.body.appendChild(e),e.click()},saveFile_web=()=>{setSaveFileTipDialogVisible(!0)},saveFile=async()=>{loading$1.value=!0,loaded$1.value=0,total$1.value=selectedFile.value.characterList.length+glyphs.value.length+stroke_glyphs.value.length+radical_glyphs.value.length+comp_glyphs.value.length;const e=JSON.stringify(constants.value);await localForage.setItem("constants",e);const n=JSON.stringify(mapToObject(constantGlyphMap));await localForage.setItem("constantGlyphMap",n);const r=await plainFile(selectedFile.value),g=JSON.stringify(r);await localForage.setItem("file",g);const y=glyphs.value.map(oe=>(loaded$1.value+=1,plainGlyph(oe))),k=JSON.stringify(y);await localForage.setItem("glyphs",k);const $=stroke_glyphs.value.map(oe=>(loaded$1.value+=1,plainGlyph(oe))),V=JSON.stringify($);await localForage.setItem("stroke_glyphs",V);const L=radical_glyphs.value.map(oe=>(loaded$1.value+=1,plainGlyph(oe))),z=JSON.stringify(L);await localForage.setItem("radical_glyphs",z);const j=comp_glyphs.value.map(oe=>(loaded$1.value+=1,plainGlyph(oe))),ae=JSON.stringify(j);await localForage.setItem("comp_glyphs",ae),await localForage.setItem("version",1),loading$1.value=!1,ElNotification({title:"",message:h$1("i",{style:"color: teal"},`${r.name}`)})},clearCache=async()=>{localForage.clear(),ElNotification({title:"",message:h$1("i",{style:"color: teal"},"")})},syncData=async()=>{files.value&&files.value.length?(tips.value="",tipsDialogVisible.value=!0):await _syncData()},_syncData=async()=>{clearGlyphRenderList(Status.GlyphList),clearGlyphRenderList(Status.StrokeGlyphList),clearGlyphRenderList(Status.RadicalGlyphList),clearGlyphRenderList(Status.CompGlyphList);const e=JSON.parse(await localForage.getItem("constants"));if(e)for(let ue=0;ue<e.length;ue++)constantsMap.getByUUID(e[ue].uuid)||constants.value.push(e[ue]);const n=JSON.parse(await localForage.getItem("constantGlyphMap"));if(n){const ue=Object.keys(n);for(let le=0;le<ue.length;le++)constantGlyphMap.set(ue[le],n[ue[le]])}const r=await localForage.getItem("glyphs");let g=[];r&&(g=JSON.parse(r));const y=await localForage.getItem("stroke_glyphs");let k=[];y&&(k=JSON.parse(y));const $=await localForage.getItem("radical_glyphs");let V=[];$&&(V=JSON.parse($));const L=await localForage.getItem("comp_glyphs");let z=[];L&&(z=JSON.parse(L));const j=await localForage.getItem("file");let ae=null;if(j&&(ae=JSON.parse(j)),loaded$1.value=0,total$1.value=(ae?ae.characterList.length*1+Math.min(visibleCount.value,ae.characterList.length):0)+(g.length+k.length+V.length+z.length)*3,total$1.value===0){const{locale:ue}=i18n.global;ue==="zh"?ElNotification({title:"",message:h$1("i","")}):ue==="en"&&ElNotification({title:"Note",message:h$1("i","No cached data available")});return}loading$1.value=!0;const oe=async(ue,le)=>new Promise(de=>{if(ue.length===0){de();return}const he=ue.map(Ne=>instanceGlyph(Ne,{updateContoursAndPreview:!0,unitsPerEm:1e3,descender:-200,advanceWidth:1e3}));let _e=0;const xe=()=>{if(_e>=he.length){de();return}const Ne=he[_e];addGlyph(Ne,le),addGlyphTemplate(Ne,le),addLoaded(),_e++,_e%100===0?requestAnimationFrame(xe):xe()};xe()}),re=async ue=>new Promise(le=>{if(!ue||!ue.characterList||ue.characterList.length===0){le();return}let de=0;const he=()=>{if(de>=ue.characterList.length){le();return}const _e=ue.characterList[de];addLoaded();const xe=instanceCharacter(_e,{updateContoursAndPreview:!0,unitsPerEm:ue.fontSettings.unitsPerEm,descender:ue.fontSettings.descender,advanceWidth:ue.fontSettings.advanceWidth});ue.characterList[de]=xe,de++,de%100===0?requestAnimationFrame(he):he()};he()});if(r&&(glyphs.value=[],await oe(g,Status.GlyphList)),y&&(stroke_glyphs.value=[],await oe(k,Status.StrokeGlyphList)),$&&(radical_glyphs.value=[],await oe(V,Status.RadicalGlyphList)),L&&(comp_glyphs.value=[],await oe(z,Status.CompGlyphList)),j){await re(ae);let ue=!0;for(let le=0;le<files.value.length;le++)files.value[le].uuid===ae.uuid&&(ue=!1,ElNotification({title:"",message:h$1("i",`${ae.name}`),type:"error"}));ue&&(emitter.emit("renderGlyphPreviewCanvas"),emitter.emit("renderStrokeGlyphPreviewCanvas"),emitter.emit("renderRadicalGlyphPreviewCanvas"),emitter.emit("renderCompGlyphPreviewCanvas"),addFile(ae),setEditStatus(Status.CharacterList),router.currentRoute.value.name==="welcome"?router.push("/editor"):(clearCharacterRenderList(),characterList.value.map(le=>{addCharacterTemplate(generateCharacterTemplate(le))}),emitter.emit("renderPreviewCanvas")))}},exportJSON=()=>{ENV.value==="tauri"?saveAs_tauri():setExportDialogVisible(!0)},undo=()=>{undo$2()},redo=()=>{redo$2()},copy=()=>{selectedComponent.value&&setClipBoard(clone(selectedComponents.value))},paste=()=>{const e=clipBoard.value;let n=null;e.map(r=>{const g=clone(r);g.uuid=genUUID(),addComponentForCurrentCharacterFile(g),n=g}),n&&n.type==="glyph"?setGlyphDraggerTool("glyphDragger"):setTool("select")},cut=()=>{selectedComponent.value&&(setClipBoard(clone(selectedComponents.value)),selectedComponents.value.map(e=>{removeComponentForCurrentCharacterFile(e.uuid)}),setSelectionForCurrentCharacterFile(""))},del=()=>{selectedComponents.value.map(e=>{removeComponentForCurrentCharacterFile(e.uuid)}),setSelectionForCurrentCharacterFile("")},addCharacter=()=>{setAddTextDialogVisible(!0)},addIcon=()=>{setAddIconDialogVisible(!0)},fontSettings=()=>{setFontSettingsDialogVisible(!0)},preferenceSettings=()=>{setPreferenceSettingsDialogVisible(!0)},languageSettings=()=>{setLanguageSettingsDialogVisible(!0)},parseSvgPath=e=>{var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function g($){var V=[];return $.replace(r,(L,z,j)=>{var ae=z.toLowerCase();for(j=k(j),ae=="m"&&j.length>2&&(V.push([z].concat(j.splice(0,2))),ae="l",z=z=="m"?"l":"L");;){if(j.length==n[ae])return j.unshift(z),V.push(j);if(j.length<n[ae])throw new Error("malformed path data");V.push([z].concat(j.splice(0,n[ae])))}}),V}var y=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function k($){var V=$.match(y);return V?V.map(Number):[]}return g(e)},parseStrToSvg=e=>new DOMParser().parseFromString(e,"image/svg+xml"),parseSvgToComponents=e=>{const n=e.childNodes.length;let r=[];for(let g=0;g<n;g++){const y=e.childNodes[g],k=y.tagName;if(k==="path"){const $=parseSvgPath(y.getAttribute("d")),V=parsePathCommandsToComponents($);r=r.concat(V)}if(k==="g"&&r.push(...parseSvgToComponents(y)),k==="ellipse"){const $=Number(y.getAttribute("cx")),V=Number(y.getAttribute("cy")),L=Number(y.getAttribute("rx")),z=Number(y.getAttribute("ry")),j=genEllipseComponent($,V,L,z);j.value.fillColor=y.getAttribute("fill")||"#000",j.value.strokeColor=y.getAttribute("stroke")||"#000",r.push(j)}if(k==="rect"){const $=Number(y.getAttribute("x"))|0,V=Number(y.getAttribute("y"))|0,L=Number(y.getAttribute("width")),z=Number(y.getAttribute("height")),j=genRectComponent($,V,L,z);j.value.fillColor=y.getAttribute("fill")||"#000",j.value.strokeColor=y.getAttribute("stroke")||"#000",r.push(j)}if(k==="line"){const $=Number(y.getAttribute("x1")),V=Number(y.getAttribute("y1")),L=Number(y.getAttribute("x2")),z=Number(y.getAttribute("y2")),j=[{x:$,y:V,uuid:genUUID()},{x:L,y:z,uuid:genUUID()}],ae=genPolygonComponent(j,!1);ae.value.strokeColor=y.getAttribute("stroke")||"#000",r.push(ae)}if(k==="polygon"){const $=y.getAttribute("points").split(" ").map(L=>{const z=L.split(",");return{uuid:genUUID(),x:Number(z[0]),y:Number(z[1])}});$.push(clone($[0]));const V=genPolygonComponent($,!0);V.value.fillColor=y.getAttribute("fill")||"#000",V.value.strokeColor=y.getAttribute("stroke")||"#000",r.push(V)}if(k==="polyline"){const $=y.getAttribute("points").split(" ").map(z=>{const j=z.split(",");return{uuid:genUUID(),x:Number(j[0]),y:Number(j[1])}}),V=y.getAttribute("fill")!=="none";V&&$.push({uuid:genUUID(),x:$[0].x,y:$[0].y});const L=genPolygonComponent($,V);L.value.strokeColor=y.getAttribute("stroke")||"#000",L.value.fillColor=y.getAttribute("fill")||"#000",r.push(L)}if(k==="circle"){const $=Number(y.getAttribute("cx")),V=Number(y.getAttribute("cy")),L=Number(y.getAttribute("r")),j=genEllipseComponent($,V,L,L);j.value.fillColor=y.getAttribute("fill")||"#000",j.value.strokeColor=y.getAttribute("stroke")||"#000",r.push(j)}}return r},parsePathCommandsToComponents=e=>{const n=[[]],r=[];if(!e.length||e[0][0]!=="M")return null;const g={x:e[0][1],y:e[0][2]},y={x:e[0][1],y:e[0][2]};n[0].push({uuid:genUUID(),x:g.x,y:g.y,type:"anchor",origin:null,isShow:!0});let k=!1,$=e.length,V=0;for(let L=1;L<$;L++){const z=e[L],j=z[0];if(j==="M"||j==="m"){if(k){y.x=n[V][0].x,y.y=n[V][0].y;const ae={uuid:genUUID(),x:g.x,y:g.y,type:"control",origin:n[V][n[V].length-1].uuid,isShow:!0},oe={uuid:genUUID(),x:y.x,y:y.y,type:"anchor",origin:null,isShow:!0},re={uuid:genUUID(),x:y.x,y:y.y,type:"control",origin:oe.uuid,isShow:!0};n[V].push(ae,re,oe)}r.push(genPenComponent(n[V],k)),k=!1,y.x=j==="m"?g.x+z[1]:z[1],y.y=j==="m"?g.y+z[2]:z[2],V+=1,n[V]=[{uuid:genUUID(),x:y.x,y:y.y,type:"anchor",origin:null,isShow:!0}]}else if(j==="Z"||j==="z")k=!0;else if(j==="L"||j==="l"){y.x=j==="l"?g.x+z[1]:z[1],y.y=j==="l"?g.y+z[2]:z[2];const ae={uuid:genUUID(),x:g.x,y:g.y,type:"control",origin:n[V][n[V].length-1].uuid,isShow:!0},oe={uuid:genUUID(),x:y.x,y:y.y,type:"anchor",origin:null,isShow:!0},re={uuid:genUUID(),x:y.x,y:y.y,type:"control",origin:oe.uuid,isShow:!0};n[V].push(ae,re,oe)}if(j==="H"||j==="h"){y.x=j==="h"?g.x+z[1]:z[1],y.y=j===g.y;const ae={uuid:genUUID(),x:g.x,y:g.y,type:"control",origin:n[V][n[V].length-1].uuid,isShow:!0},oe={uuid:genUUID(),x:y.x,y:y.y,type:"anchor",origin:null,isShow:!0},re={uuid:genUUID(),x:y.x,y:y.y,type:"control",origin:oe.uuid,isShow:!0};n[V].push(ae,re,oe)}if(j==="V"||j==="v"){y.x=j===g.x,y.y=j==="v"?g.y+z[1]:z[1];const ae={uuid:genUUID(),x:g.x,y:g.y,type:"control",origin:n[V][n[V].length-1].uuid,isShow:!0},oe={uuid:genUUID(),x:y.x,y:y.y,type:"anchor",origin:null,isShow:!0},re={uuid:genUUID(),x:y.x,y:y.y,type:"control",origin:oe.uuid,isShow:!0};n[V].push(ae,re,oe)}if(j==="C"||j==="c"){y.x=j==="c"?g.x+z[5]:z[5],y.y=j==="c"?g.y+z[6]:z[6];const ae={uuid:genUUID(),x:j==="c"?g.x+z[1]:z[1],y:j==="c"?g.y+z[2]:z[2],type:"control",origin:n[V][n[V].length-1].uuid,isShow:!0},oe={uuid:genUUID(),x:y.x,y:y.y,type:"anchor",origin:null,isShow:!0},re={uuid:genUUID(),x:j==="c"?g.x+z[3]:z[3],y:j==="c"?g.y+z[4]:z[4],type:"control",origin:oe.uuid,isShow:!0};n[V].push(ae,re,oe)}if(j==="S"||j==="s"){y.x=j==="s"?g.x+z[3]:z[3],y.y=j==="s"?g.y+z[4]:z[4];const ae=e[L-1][0],oe={x:g.x,y:g.y};if(ae.match(/[CcSsQqTt]/g)){const de=n[V][n[V].length-2];oe.x=g.x+g.x-de.x,oe.y=g.y+g.y-de.y}const re={uuid:genUUID(),x:oe.x,y:oe.y,type:"control",origin:n[V][n[V].length-1].uuid,isShow:!0},ue={uuid:genUUID(),x:y.x,y:y.y,type:"anchor",origin:null,isShow:!0},le={uuid:genUUID(),x:j==="s"?g.x+z[1]:z[1],y:j==="s"?g.y+z[2]:z[2],type:"control",origin:ue.uuid,isShow:!0};n[V].push(re,le,ue)}if(j==="Q"||j==="q"){y.x=j==="q"?g.x+z[3]:z[3],y.y=j==="q"?g.y+z[4]:z[4];const ae={uuid:genUUID(),x:j==="q"?g.x+z[1]:z[1],y:j==="q"?g.y+z[2]:z[2],type:"control",origin:n[V][n[V].length-1].uuid,isShow:!0},oe={uuid:genUUID(),x:y.x,y:y.y,type:"anchor",origin:null,isShow:!0},re={uuid:genUUID(),x:j==="q"?g.x+z[1]:z[1],y:j==="q"?g.y+z[2]:z[2],type:"control",origin:oe.uuid,isShow:!0};n[V].push(ae,re,oe)}if(j==="T"||j==="t"){y.x=j==="t"?g.x+z[1]:z[1],y.y=j==="t"?g.y+z[2]:z[2];const ae=e[L-1][0],oe={x:g.x,y:g.y};if(ae.match(/[CcSsQqTt]/g)){const de=n[V][n[V].length-2];oe.x=g.x+g.x-de.x,oe.y=g.y+g.y-de.y}const re={uuid:genUUID(),x:oe.x,y:oe.y,type:"control",origin:n[V][n[V].length-1].uuid,isShow:!0},ue={uuid:genUUID(),x:y.x,y:y.y,type:"anchor",origin:null,isShow:!0},le={uuid:genUUID(),x:oe.x,y:oe.y,type:"control",origin:ue.uuid,isShow:!0};n[V].push(re,le,ue)}if(j==="A"||j==="a"){const ae=z[1],oe=z[2],re=z[3]*Math.PI/180,ue=z[4],le=z[5];y.x=j==="a"?g.x+z[6]:z[6],y.y=j==="a"?g.y+z[7]:z[7],convertEllipsePathToBeziers(ae,oe,re,ue,le,g.x,g.y,y.x,y.y).forEach(he=>{const _e={uuid:genUUID(),x:he.cpx1,y:he.cpy1,type:"control",origin:n[V][n[V].length-1].uuid,isShow:!0},xe={uuid:genUUID(),x:he.en2.x,y:he.en2.y,type:"anchor",origin:null,isShow:!0},Ne={uuid:genUUID(),x:he.cpx2,y:he.cpy2,type:"control",origin:xe.uuid,isShow:!0};n[V].push(_e,Ne,xe)})}g.x=y.x,g.y=y.y}if(k){y.x=n[V][0].x,y.y=n[V][0].y;const L={uuid:genUUID(),x:g.x,y:g.y,type:"control",origin:n[V][n[V].length-1].uuid,isShow:!0},z={uuid:genUUID(),x:y.x,y:y.y,type:"anchor",origin:null,isShow:!0},j={uuid:genUUID(),x:y.x,y:y.y,type:"control",origin:z.uuid,isShow:!0};n[V].push(L,j,z)}return r.push(genPenComponent(n[V],k)),r},componentsToSvg=(e,n,r,g="default",y={isSub:!1,ox:0,oy:0})=>{const{isSub:k,ox:$,oy:V}=y;let L=k?"":`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${n} ${r}">`,z=g==="contour"?"":"#000000";for(let j=0;j<e.length;j++){const ae=e[j],{x:oe,y:re,w:ue,h:le,rotation:de}=ae;if(ae.type==="pen"){const{points:he,strokeColor:_e,closePath:xe}=ae.value;g==="default"&&(z=ae.value.fillColor||"#000");const{x:Ne,y:$e,w:Ce,h:Ie}=getBound$5(he),ze=oe-Ne,Ue=re-$e,Pt=ue/Ce,hn=le/Ie,Dt=oe+ue/2,xn=re+le/2;if(!he.length)continue;L+=`<path fill="${z}" stroke="${_e}" d="M ${he[0].x},${he[0].y} `;for(let jt=1;jt<he.length;jt+=3)L+=`C ${he[jt].x},${he[jt].y},${he[jt+1].x},${he[jt+1].y},${he[jt+2].x},${he[jt+2].y} `;xe&&(L+="z"),L+='" ',L+=`transform="translate(${ze}, ${Ue}) `,L+=`scale(${Pt}, ${hn}) `,L+=`rotate(${de}, ${Dt}, ${xn})"`,L+=" />"}else if(ae.type==="polygon"){const{points:he,strokeColor:_e,closePath:xe}=ae.value;g==="default"&&(z=ae.value.fillColor||"#000");const{x:Ne,y:$e,w:Ce,h:Ie}=getBound$5(he),ze=oe-Ne,Ue=re-$e,Pt=ue/Ce,hn=le/Ie,Dt=oe+ue/2,xn=re+le/2;if(!he.length)continue;L+=`<path fill="${z}" stroke="${_e}" d="M ${he[0].x},${he[0].y} `;for(let jt=1;jt<he.length;jt++)L+=`L ${he[jt].x},${he[jt].y} `;xe&&(L+="z"),L+='" ',L+=`transform="translate(${ze}, ${Ue}) `,L+=`scale(${Pt}, ${hn}) `,L+=`rotate(${de}, ${Dt}, ${xn})"`,L+=" />"}else if(ae.type==="ellipse"){const{radiusX:he,radiusY:_e,strokeColor:xe}=ae.value;g==="default"&&(z=ae.value.fillColor||"#000");const Ne=he,$e=_e,Ce=ue/(he*2),Ie=le/(_e*2),ze=oe+ue/2,Ue=re+le/2;L+=`<ellipse fill="${z}" stroke="${xe}" `,L+=`cx="${oe}" cy="${re}" rx="${he}" ry="${_e}" `,L+=`transform="translate(${Ne}, ${$e}) `,L+=`scale(${Ce}, ${Ie}) `,L+=`rotate(${de}, ${ze}, ${Ue})"`,L+=" />"}else if(ae.type==="rectangle"){const{width:he,height:_e,strokeColor:xe}=ae.value;g==="default"&&(z=ae.value.fillColor||"#000");const Ne=ue/he,$e=le/_e,Ce=oe+ue/2,Ie=re+le/2;L+=`<rect fill="${z}" stroke="${xe}" `,L+=`x="${oe}" y="${re}" width="${he}" height="${_e}" `,L+='transform="translate(0, 0) ',L+=`scale(${Ne}, ${$e}) `,L+=`rotate(${de}, ${Ce}, ${Ie})"`,L+=" />"}else if(ae.type==="glyph-pen"){const{points:he}=ae,_e="#000";if(g==="default"&&(z="#000"),!he.length)continue;L+=`<path fill="${z}" stroke="${_e}" d="M ${he[0].x+$},${he[0].y+V} `;for(let xe=1;xe<he.length;xe+=3)L+=`C ${he[xe].x+$},${he[xe].y+V},${he[xe+1].x+$},${he[xe+1].y+V},${he[xe+2].x+$},${he[xe+2].y+V} `;L+="z",L+='"',L+=" />"}else if(ae.type==="glyph-polygon"){const{points:he}=ae,_e="#000";if(g==="default"&&(z="#000"),!he.length)continue;L+=`<path fill="${z}" stroke="${_e}" d="M ${he[0].x+$},${he[0].y+V} `;for(let xe=1;xe<he.length;xe++)L+=`L ${he[xe].x+$},${he[xe].y+V} `;L+="z",L+='"',L+=" />"}else if(ae.type==="glyph-ellipse"){const{centerX:he,centerY:_e,radiusX:xe,radiusY:Ne}=ae,$e="#000";g==="default"&&(z="#000"),L+=`<ellipse fill="${z}" stroke="${$e}" `,L+=`cx="${he+$}" cy="${_e+V}" rx="${xe}" ry="${Ne}"`,L+=" />"}else if(ae.type==="glyph-rectangle"){const{x:he,y:_e,width:xe,height:Ne}=ae,$e="#000";g==="default"&&(z="#000"),L+=`<rect fill="${z}" stroke="${$e}" `,L+=`x="${he+$}" y="${_e+V}" width="${xe}" height="${Ne}" `,L+="/>"}else if(ae.type==="glyph"){const he=ae.value;he._o||executeScript(he);const _e=componentsToSvg(he._o.components,n,r,g,{isSub:!0,ox:$+ae.ox,oy:V+ae.oy});L+=_e}}return!k&&(L+="</svg>"),L},convertEllipsePathToBeziers=(e,n,r,g,y,k,$,V,L)=>{const z=(oe,re,ue)=>Math.min(Math.max(oe,re),ue),j=(oe,re,ue,le)=>{var de=oe*ue+re*le,he=Math.sqrt(oe*oe+re*re)*Math.sqrt(ue*ue+le*le),_e=Math.acos(z(de/he,-1,1));return oe*le-re*ue<0&&(_e=-_e),_e};return((oe,re,ue,le,de,he,_e,xe,Ne)=>{var $e=Math.abs(oe),Ce=Math.abs(re),Ie=(he-xe)/2,ze=(_e-Ne)/2,Ue=Math.cos(ue)*Ie+Math.sin(ue)*ze,Pt=-Math.sin(ue)*Ie+Math.cos(ue)*ze,hn=$e*$e,Dt=Ce*Ce,xn=Ue*Ue,jt=Pt*Pt,Vn=xn/hn+jt/Dt;if(Vn>1){var Rn=Math.sqrt(Vn);$e=Rn*$e,Ce=Rn*Ce,hn=$e*$e,Dt=Ce*Ce}var Tn=hn*jt+Dt*xn,Ln=(hn*Dt-Tn)/Tn,Sn=Math.sqrt(Math.max(0,Ln));le===de&&(Sn=-Sn);for(var An=Sn*$e*Pt/Ce,In=-Sn*Ce*Ue/$e,Mn=Math.cos(ue)*An-Math.sin(ue)*In+(he+xe)/2,ra=Math.sin(ue)*An+Math.cos(ue)*In+(_e+Ne)/2,da=j(1,0,(Ue-An)/$e,(Pt-In)/Ce),ua=j((Ue-An)/$e,(Pt-In)/Ce,(-Ue-An)/$e,(-Pt-In)/Ce);ua>Math.PI*2;)ua-=Math.PI*2;for(;ua<0;)ua+=Math.PI*2;de||(ua-=2*Math.PI);var aa=da,Nn=da+ua;const En=Xn=>{var $n=Mn+oe*Math.cos(ue)*Math.cos(Xn)-re*Math.sin(ue)*Math.sin(Xn),kt=ra+oe*Math.sin(ue)*Math.cos(Xn)+re*Math.cos(ue)*Math.sin(Xn);return{x:$n,y:kt}},Zn=Xn=>{var $n=-1*oe*Math.cos(ue)*Math.sin(Xn)-re*Math.sin(ue)*Math.cos(Xn),kt=-1*oe*Math.sin(ue)*Math.sin(Xn)+re*Math.cos(ue)*Math.cos(Xn);return{x:$n,y:kt}};var ha=[];ha.push(aa);for(var xa=Math.PI/4;ha[ha.length-1]+xa<Nn;)ha.push(ha[ha.length-1]+xa);if(Nn>aa)for(;ha[ha.length-1]+xa<Nn;)ha.push(ha[ha.length-1]+xa);else for(;ha[ha.length-1]-xa>Nn;)ha.push(ha[ha.length-1]-xa);ha.push(Nn);const sa=(Xn,$n)=>{var kt=En(Xn),At=En($n),Dn=Zn(Xn),Qn=Zn($n),oa=Math.sin($n-Xn)*(Math.sqrt(4+3*Math.pow(Math.tan(($n-Xn)/2),2))-1)/3;return{cpx1:kt.x+oa*Dn.x,cpy1:kt.y+oa*Dn.y,cpx2:At.x-oa*Qn.x,cpy2:At.y-oa*Qn.y,en1:kt,en2:At}};for(var Hn=[],bn=0;bn<ha.length-1;bn++)Hn.push(sa(ha[bn],ha[bn+1]));return Hn})(e,n,r,g,y,k,$,V,L)},initWorker=()=>{let e=null;return window.Worker&&(e=new Worker(new URL("/fontplayer_demo/assets/worker-bn2URQOs.js",import.meta.url))),e};var WorkerEventType=(e=>(e[e.ParseFont=0]="ParseFont",e))(WorkerEventType||{});const importFont_tauri=async()=>{if(files.value&&files.value.length)tips.value="",tipsDialogVisible.value=!0;else{const e=await nativeImportFile(["otf","ttf"]);await _importFont_tauri(e)}},_importFont_tauri=e=>{const{uint8Array:n,name:r}=e;if(!n)return;const g=n.buffer,y=parse$3(g),k={uuid:genUUID(),width:y.settings.unitsPerEm,height:y.settings.unitsPerEm,name:r,saved:!1,characterList:[],iconsCount:0,fontSettings:{unitsPerEm:y.settings.unitsPerEm,ascender:y.settings.ascender,descender:y.settings.descender}};addFile(k),setSelectedFileUUID(k.uuid),setEditStatus(Status.CharacterList),loaded$1.value=0,total$1.value=0,loading$1.value=!0,worker.onmessage=$=>{const V=$.data;selectedFile.value.characterList=V,clearCharacterRenderList(),characterList.value.map(L=>{addCharacterTemplate(generateCharacterTemplate(L))}),loading$1.value=!1,emitter.emit("renderPreviewCanvas",!0)},worker.postMessage([WorkerEventType.ParseFont,y,selectedFile.value.width])},importFont=()=>{const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("style","display: none"),e.setAttribute("accept",".otf, .ttf"),e.addEventListener("blur",async()=>{loading$1.value=!1}),e.addEventListener("change",async n=>{await nextTick();const y=n.currentTarget.files[0],k=y.name,$=k.substring(0,k.lastIndexOf(".")),V=y.arrayBuffer(),L=parse$3(await V);loaded$1.value=0,total$1.value=L.characters.length*2+Math.min(visibleCount.value,L.characters.length),loading$1.value=!0,await new Promise(re=>{requestAnimationFrame(()=>{re()})});const z={uuid:genUUID(),width:L.settings.unitsPerEm,height:L.settings.unitsPerEm,name:$,saved:!1,characterList:[],iconsCount:0,fontSettings:{unitsPerEm:L.settings.unitsPerEm,ascender:L.settings.ascender,descender:L.settings.descender}};addFile(z),setSelectedFileUUID(z.uuid),setEditStatus(Status.CharacterList),router.currentRoute.value.name==="welcome"&&router.push("/editor");const j=await parseFont(L);selectedFile.value.characterList=j,clearCharacterRenderList();const ae=500,oe=[];for(let re=0;re<j.length;re++)oe.push(generateCharacterTemplate(j[re])),addLoaded(),(oe.length>=ae||re===j.length-1)&&(batchAddCharacterTemplates(oe),oe.length=0,await new Promise(ue=>{requestAnimationFrame(()=>{ue()})}));emitter.emit("renderPreviewCanvas",!0),document.body.removeChild(e)}),document.body.appendChild(e),e.click()},parseFont=async e=>{resetLightIdCounter();const n=e.settings.unitsPerEm,r=e.settings.descender,g=selectedFile.value.width,y=[];for(let k=0;k<e.characters.length;k++){addLoaded();const $=e.characters[k];if(!$.unicode&&!$.name)continue;const V={uuid:genLightId(),text:$.unicode?String.fromCharCode($.unicode):$.name,unicode:$.unicode?$.unicode.toString(16).padStart(4,"0"):""},L=genLightId(),z={uuid:L,type:"text",character:V,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},info:{gridSettings:{dx:0,dy:0,centerSquareSize:g/3,size:g,default:!0},useSkeletonGrid:!1,layout:"",layoutTree:[]},script:`function script_${L.replaceAll("-","_")} (character, constants, FP) {
	//Todo something
}`};contoursToComponents($.contours,{unitsPerEm:n,descender:r,advanceWidth:$.advanceWidth}).forEach(ae=>{z.components.push(ae),z.orderedList.push({type:"component",uuid:ae.uuid})}),y.push(z),k%100===0&&await new Promise(ae=>{requestAnimationFrame(()=>{ae()})})}return y},importGlyphs_tauri=async()=>{let e=!1;const{data:n}=await nativeImportTextFile(["json"]);if(!n)return;const r=JSON.parse(n),g=r.glyphs;if(loading$1.value=!0,loaded$1.value=0,total$1.value=g.length,r.constants)for(let $=0;$<r.constants.length;$++)constantsMap.getByUUID(r.constants[$].uuid)||constants.value.push(r.constants[$]);if(r.constantGlyphMap){const $=Object.keys(r.constantGlyphMap);for(let V=0;V<$.length;V++)constantGlyphMap.set($[V],r.constantGlyphMap[$[V]])}const y=[];if(await(async $=>{for(let L=0;L<$.length;L+=100){const z=$.slice(L,L+100);await new Promise(j=>{requestAnimationFrame(()=>{z.forEach(ae=>{const oe=instanceGlyph(ae,{updateContoursAndPreview:!0,unitsPerEm:1e3,descender:-200,advanceWidth:1e3});y.push(oe),loaded$1.value++}),j()})})}})(g),y.forEach($=>{getGlyphByUUID($.uuid)?e=!0:(addGlyph($,editStatus.value),addGlyphTemplate($,editStatus.value))}),editStatus.value===Status.GlyphList?emitter.emit("renderGlyphPreviewCanvas"):editStatus.value===Status.StrokeGlyphList?emitter.emit("renderStrokeGlyphPreviewCanvas"):editStatus.value===Status.RadicalGlyphList?emitter.emit("renderRadicalGlyphPreviewCanvas"):editStatus.value===Status.CompGlyphList&&emitter.emit("renderCompGlyphPreviewCanvas"),e){const{locale:$}=i18n.global;$==="zh"?ElMessageBox.alert("uuid","Note",{confirmButtonText:""}):$==="en"&&ElMessageBox.alert("Duplicate glyphs with the same UUID as existing ones were detected during import and have been automatically ignored.","Note",{confirmButtonText:"Confirm"})}loading$1.value=!1,loaded$1.value=0,total$1.value=0},importGlyphs=()=>{let e=!1;const n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("style","display: none"),n.setAttribute("accept",".json"),n.addEventListener("change",async r=>{const y=r.currentTarget.files;for(let k=0;k<y.length;k++){const $=new FileReader;$.readAsText(y[k]),$.onload=async()=>{const V=JSON.parse($.result),L=V.glyphs;if(loading$1.value=!0,loaded$1.value=0,total$1.value=L.length,V.constants)for(let ae=0;ae<V.constants.length;ae++)constantsMap.getByUUID(V.constants[ae].uuid)||constants.value.push(V.constants[ae]);if(V.constantGlyphMap){const ae=Object.keys(V.constantGlyphMap);for(let oe=0;oe<ae.length;oe++)constantGlyphMap.set(ae[oe],V.constantGlyphMap[ae[oe]])}const z=[];if(await(async ae=>{for(let re=0;re<ae.length;re+=100){const ue=ae.slice(re,re+100);await new Promise(le=>{requestAnimationFrame(()=>{ue.forEach(de=>{const he=instanceGlyph(de,{updateContoursAndPreview:!0,unitsPerEm:1e3,descender:-200,advanceWidth:1e3});z.push(he),loaded$1.value++}),le()})})}})(L),z.forEach(ae=>{getGlyphByUUID(ae.uuid)?e=!0:(addGlyph(ae,editStatus.value),addGlyphTemplate(ae,editStatus.value))}),editStatus.value===Status.GlyphList?emitter.emit("renderGlyphPreviewCanvas"):editStatus.value===Status.StrokeGlyphList?emitter.emit("renderStrokeGlyphPreviewCanvas"):editStatus.value===Status.RadicalGlyphList?emitter.emit("renderRadicalGlyphPreviewCanvas"):editStatus.value===Status.CompGlyphList&&emitter.emit("renderCompGlyphPreviewCanvas"),e){const{locale:ae}=i18n.global;ae==="zh"?ElMessageBox.alert("uuid","",{confirmButtonText:""}):ae==="en"&&ElMessageBox.alert("Duplicate glyphs with the same UUID as existing entries were detected during import and have been automatically ignored.","Note",{confirmButtonText:"Confirm"})}loading$1.value=!1,loaded$1.value=0,total$1.value=0}}document.body.removeChild(n)}),document.body.appendChild(n),n.click()},importSVG_tauri=async()=>{const{data:e}=await nativeImportTextFile(["svg"]);if(!e)return;const n=parseStrToSvg(e).childNodes[0];parseSvgToComponents(n).forEach(g=>{addComponentForCurrentCharacterFile(g)})},importSVG=()=>{if(ENV.value==="tauri"){importSVG_tauri();return}const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("style","display: none"),e.setAttribute("accept",".svg"),e.addEventListener("change",async n=>{const g=n.currentTarget.files;for(let y=0;y<g.length;y++){const k=new FileReader;k.readAsText(g[y]),k.onload=()=>{const $=parseStrToSvg(k.result).childNodes[0];parseSvgToComponents($).forEach(L=>{addComponentForCurrentCharacterFile(L)})}}document.body.removeChild(e)}),document.body.appendChild(e),e.click()},importPic=()=>{if(ENV.value==="tauri"){importPic_tauri();return}getFromPic()},importPic_tauri=async()=>{const e=await nativeImportFile(["jpg","png","jpeg"]),{name:n,uint8Array:r}=e;if(!r)return;saveState("",[StoreType.Status,editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo,{undoTip:"",redoTip:""});let g="";r.forEach(L=>{g+=String.fromCharCode(L)});const y=btoa(g),$=`data:${n.split(".")[1]==="png"?"image/png":"image/jpeg"};base64,${y}`;total$1.value=0,loaded$1.value=0,loading$1.value=!0;const V=document.createElement("img");V.onload=()=>{setTimeout(()=>{prevEditStatus.value=editStatus.value,thumbnail($,V,1e3),setEditStatus(Status.Pic),loading$1.value=!1},100)},V.src=$},getFromFontPic=()=>{const n=editCharacterFile.value.fontPic.toDataURL(),r=document.createElement("img");r.onload=()=>{prevEditStatus.value=editStatus.value,thumbnail(n,r,r.width),setEditStatus(Status.Pic)},r.src=n},getFromPic=()=>{if(editStatus.value===Status.Edit&&editCharacterFile.value.fontPic){getFromFontPic();return}const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("style","display: none"),e.setAttribute("accept","image/*"),e.addEventListener("change",async n=>{const g=n.currentTarget.files;for(let y=0;y<g.length;y++){total$1.value=0,loaded$1.value=0,loading$1.value=!0;const k=window.URL.createObjectURL(g[y]),$=document.createElement("img");$.onload=()=>{saveState("",[StoreType.Status,editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo,{undoTip:"",redoTip:""}),prevEditStatus.value=editStatus.value,thumbnail(k,$,1e3),setEditStatus(Status.Pic),loading$1.value=!1},$.src=k}document.body.removeChild(e)}),document.body.appendChild(e),e.click()},thumbnail=(e,n,r)=>{const g=document.createElement("canvas");n.width>r||n.height>r?(g.width=r,g.height=r*n.height/n.width):(g.width=n.width,g.height=n.height);const y=g.getContext("2d");y.drawImage(n,0,0,n.width,n.height,0,0,g.width,g.height);const k=y.getImageData(0,0,g.width,g.height).data;setEditCharacterPic({data:e,img:n,thumbnailCanvas:g,thumbnailPixels:k,processPixels:k,width:g.width,height:g.height});const $=toBlackWhiteBitMap(k,{r:rThreshold.value,g:gThreshold.value,b:bThreshold.value},{x:0,y:0,size:-1,width:g.width,height:g.height});setBitMap({data:$,width:g.width,height:g.height}),clearContoursComponent();const{canvas:V}=reversePixels($,bitmap.value.width,bitmap.value.height),L=V.getContext("2d",{willReadFrequently:!0}),z=V.width,j=V.height,ae=L.getImageData(0,0,z,j);let oe=cv.matFromImageData(ae);cv.cvtColor(oe,oe,cv.COLOR_RGBA2GRAY,0),cv.threshold(oe,oe,120,200,cv.THRESH_BINARY);let re=new cv.MatVector,ue=new cv.Mat;cv.findContours(oe,re,ue,cv.RETR_CCOMP,cv.CHAIN_APPROX_NONE);const le=[];for(let de=0;de<re.size();de++){const he=re.get(de);for(let _e=0;_e<he.rows;_e++)le.push({x:he.data32S[_e*2],y:he.data32S[_e*2+1]})}getBound$5(le),selectedFile.value?.fontSettings?.unitsPerEm;for(let de=0;de<re.size();de++){const he=[],_e=re.get(de);for(let Ue=0;Ue<_e.rows;Ue++)he.push({uuid:genUUID(),x:_e.data32S[Ue*2],y:_e.data32S[Ue*2+1]});he.push({uuid:genUUID(),x:_e.data32S[0],y:_e.data32S[1]}),getBound$5(he);const xe=he.map(Ue=>({uuid:genUUID(),...Ue})),{x:Ne,y:$e,w:Ce,h:Ie}=getBound$5(xe.reduce((Ue,Pt)=>(Ue.push({x:Pt.x,y:Pt.y}),Ue),[])),ze={uuid:genUUID(),type:"polygon",name:"polygon",lock:!1,visible:!0,value:{points:xe,fillColor:ue.data32S[de*4+3]===-1?"#000":"#fff",strokeColor:"#000",closePath:!0},x:Ne,y:$e,w:Ce,h:Ie,rotation:0,flipX:!1,flipY:!1,usedInCharacter:!1};addContoursComponent(ze)}clearCurvesComponent(),contoursComponents.value.map(de=>{if(de.type==="polygon"){const he=de.value.points,_e=fitCurve(he,maxError.value);let xe=[];if(!_e.length)return;xe.push({uuid:genUUID(),x:_e[0][0].x,y:_e[0][0].y,type:"anchor",origin:null,isShow:!0}),_e.map(Ue=>{const Pt=genUUID(),hn=genUUID(),Dt=genUUID();xe.push({uuid:Pt,x:Ue[1].x,y:Ue[1].y,type:"control",origin:xe[xe.length-1].uuid,isShow:!1}),xe.push({uuid:hn,x:Ue[2].x,y:Ue[2].y,type:"control",origin:Dt,isShow:!1}),xe.push({uuid:Dt,x:Ue[3].x,y:Ue[3].y,type:"anchor",origin:null,isShow:!0})});const{x:Ne,y:$e,w:Ce,h:Ie}=getBound$5(xe),ze=clone(de);ze.uuid=genUUID(),ze.value.points=xe,ze.value.editMode=!1,ze.type="pen",ze.name="pic-contour",ze.x=Ne,ze.y=$e,ze.w=Ce,ze.h=Ie,ze.rotation=0,ze.usedInCharacter=!0,addCurvesComponent(ze)}})},scriptRel="modulepreload",assetsURL=function(e){return"/fontplayer_demo/"+e},seen={},__vitePreload=function e(n,r,g){let y=Promise.resolve();if(r&&r.length>0){const k=document.getElementsByTagName("link"),$=document.querySelector("meta[property=csp-nonce]"),V=$?.nonce||$?.getAttribute("nonce");y=Promise.all(r.map(L=>{if(L=assetsURL(L),L in seen)return;seen[L]=!0;const z=L.endsWith(".css"),j=z?'[rel="stylesheet"]':"";if(!!g)for(let re=k.length-1;re>=0;re--){const ue=k[re];if(ue.href===L&&(!z||ue.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${L}"]${j}`))return;const oe=document.createElement("link");if(oe.rel=z?"stylesheet":scriptRel,z||(oe.as="script",oe.crossOrigin=""),oe.href=L,V&&oe.setAttribute("nonce",V),document.head.appendChild(oe),z)return new Promise((re,ue)=>{oe.addEventListener("load",re),oe.addEventListener("error",()=>ue(new Error(`Unable to preload CSS for ${L}`)))})}))}return y.then(()=>n()).catch(k=>{const $=new Event("vite:preloadError",{cancelable:!0});if($.payload=k,window.dispatchEvent($),!$.defaultPrevented)throw k})},OVERLAP_REMOVAL_CONFIG={PATH_PRECISION:1e-6,TOLERANCE:1e-8,MAX_SUBDIVISIONS:10,CURVE_SUBDIVISION_THRESHOLD:.1,MERGE_TOLERANCE:1e-6},createOptimizedPath=e=>{const n=new paper.Path;if(e.length===0)return n;const r=new paper.Point(e[0].start.x,e[0].start.y);n.moveTo(r);for(let g=0;g<e.length;g++){const y=e[g];if(y.type===PathType.LINE){const k=y,$=new paper.Point(k.end.x,k.end.y);n.lineTo($)}else if(y.type===PathType.CUBIC_BEZIER){const k=y,$=new paper.Point(k.control1.x,k.control1.y),V=new paper.Point(k.control2.x,k.control2.y),L=new paper.Point(k.end.x,k.end.y);n.cubicCurveTo($,V,L)}else if(y.type===PathType.QUADRATIC_BEZIER){const k=y,$=new paper.Point(k.control.x,k.control.y),V=new paper.Point(k.end.x,k.end.y),L=r.multiply(1/3).add($.multiply(2/3)),z=V.multiply(1/3).add($.multiply(2/3));n.cubicCurveTo(L,z,V)}r.x=y.end.x,r.y=y.end.y}return n.closePath(),n},mergePathsWithPrecision=e=>{if(e.length===0)return null;if(e.length===1)return e[0];paper.settings.precision=OVERLAP_REMOVAL_CONFIG.PATH_PRECISION;let n=e[0].clone();for(let r=1;r<e.length;r++){const g=e[r];n=n.unite(g)}return n},isAlreadyOptimized=e=>{if(e.length<=1)return!0;let n=!1;for(let r=0;r<e.length;r++){for(let g=r+1;g<e.length;g++){const y=e[r],k=e[g];let $=1/0,V=1/0,L=-1/0,z=-1/0,j=1/0,ae=1/0,oe=-1/0,re=-1/0;for(let ue=0;ue<y.length;ue++){const le=y[ue];$=Math.min($,le.start.x,le.end.x),V=Math.min(V,le.start.y,le.end.y),L=Math.max(L,le.start.x,le.end.x),z=Math.max(z,le.start.y,le.end.y)}for(let ue=0;ue<k.length;ue++){const le=k[ue];j=Math.min(j,le.start.x,le.end.x),ae=Math.min(ae,le.start.y,le.end.y),oe=Math.max(oe,le.start.x,le.end.x),re=Math.max(re,le.start.y,le.end.y)}if(L>=j&&oe>=$&&z>=ae&&re>=V){n=!0;break}}if(n)break}return!n},exportGlyphs_tauri=async()=>{loaded$1.value=0;let e=null,n="",r=[];editStatus.value===Status.GlyphList?(e=glyphs.value,n="glyphs.json"):editStatus.value===Status.StrokeGlyphList?(e=stroke_glyphs.value,n="stroke_glyphs.json"):editStatus.value===Status.RadicalGlyphList?(e=radical_glyphs.value,n="radical_glyphs.json"):editStatus.value===Status.CompGlyphList?(e=comp_glyphs.value,n="comp_glyphs.json"):(e=glyphs.value,n="glyphs.json"),total$1.value=e.length,loading$1.value=!0,setTimeout(async()=>{requestAnimationFrame(()=>g(0));const g=async y=>{if(r.push(plainGlyph(e[y])),loaded$1.value+=1,loaded$1.value>=total$1.value){loading$1.value=!1;const k=JSON.stringify({glyphs:r,constants:constants.value,constantGlyphMap:mapToObject(constantGlyphMap),version:1});await nativeSaveText(k,n,["json"])}else y%100===0?requestAnimationFrame(()=>g(y+1)):g(y+1)}},50)},exportJPEG_tauri=async()=>{const n=canvas.value.toDataURL("image/jpeg"),r=base64ToArrayBuffer(n);let g="untitled.jpg";editStatus.value===Status.Edit?g=`${editCharacterFile.value.character.text}.jpg`:g=`${editGlyph.value.name}.jpg`,nativeSaveBinary(r,g,["jpg","jpeg"])},exportPNG_tauri=async()=>{const e=canvas.value;render$1(e,!1);const n=e.toDataURL("image/png"),r=base64ToArrayBuffer(n);let g="untitled.png";editStatus.value===Status.Edit?g=`${editCharacterFile.value.character.text}.png`:g=`${editGlyph.value.name}.png`,nativeSaveBinary(r,g,["png"]),render$1(e,!0)},exportSVG_tauri=async()=>{if(editStatus.value!==Status.Edit&&editStatus.value!==Status.Glyph)return;const e=editStatus.value===Status.Edit?orderedListWithItemsForCurrentCharacterFile.value:editGlyph.value._o.components,n=componentsToSvg(e,selectedFile.value.width,selectedFile.value.height);let r="untitled.svg";editStatus.value===Status.Edit?r=`${editCharacterFile.value.character.text}.svg`:r=`${editGlyph.value.name}.svg`,nativeSaveText(n,r,["svg"])},exportFont_tauri=async e=>{const n=await createFont(e);loadingMsg.value="...";const r=toArrayBuffer(n),g=`${selectedFile.value.name}.otf`;nativeSaveBinary(r,g,["otf"]),loading$1.value=!1,loaded$1.value=0,total$1.value=0,loadingMsg.value=""},showExportFontDialog_tauri=()=>{setExportFontTauriDialogVisible(!0)},showExportFontDialog=()=>{ENV.value==="tauri"?showExportFontDialog_tauri():setExportFontDialogVisible(!0)},showExportColorFontDialog_tauri=()=>{setExportColorFontTauriDialogVisible(!0)},showExportColorFontDialog=()=>{ENV.value==="tauri"?showExportColorFontDialog_tauri():setExportColorFontDialogVisible(!0)},showExportVarFontDialog_tauri=()=>{setExportVarFontTauriDialogVisible(!0)},showExportVarFontDialog=()=>{ENV.value==="tauri"?showExportVarFontDialog_tauri():setExportVarFontDialogVisible(!0)},exportGlyphs=()=>{if(editStatus.value===Status.CharacterList){const{locale:e}=i18n.global;e==="zh"?ElMessageBox.alert("","",{confirmButtonText:""}):e==="en"&&ElMessageBox.alert("The character list cannot be exported. Only Stroke, Radical, Glyph, and Component lists support exporting their corresponding glyph types.","Note",{confirmButtonText:"Confirm"});return}if(ENV.value==="tauri")exportGlyphs_tauri();else{loaded$1.value=0;let e=null,n="",r=[];editStatus.value===Status.GlyphList?(e=glyphs.value,n="glyphs.json"):editStatus.value===Status.StrokeGlyphList?(e=stroke_glyphs.value,n="stroke_glyphs.json"):editStatus.value===Status.RadicalGlyphList?(e=radical_glyphs.value,n="radical_glyphs.json"):editStatus.value===Status.CompGlyphList?(e=comp_glyphs.value,n="comp_glyphs.json"):(e=glyphs.value,n="glyphs.json"),total$1.value=e.length,loading$1.value=!0,setTimeout(()=>{requestAnimationFrame(()=>g(0));const g=y=>{if(r.push(plainGlyph(e[y])),loaded$1.value+=1,loaded$1.value>=total$1.value){loading$1.value=!1;const k=JSON.stringify({glyphs:r,constants:constants.value,constantGlyphMap:mapToObject(constantGlyphMap),version:1}),$=new Blob([k],{type:"text/plain;charset=utf-8"});FileSaver_minExports.saveAs($,n)}else y%100===0?requestAnimationFrame(()=>g(y+1)):g(y+1)}},50)}},exportJPEG=()=>{if(ENV.value==="tauri")exportJPEG_tauri();else{const n=canvas.value.toDataURL("image/jpeg"),r=document.createElement("a");let g="untitled";editStatus.value===Status.Edit?g=`${editCharacterFile.value.character.text}`:g=`${editGlyph.value.name}`,r.download=g,r.href=n,document.body.appendChild(r),r.click(),document.body.removeChild(r)}},exportPNG=()=>{if(ENV.value==="tauri")exportPNG_tauri();else{const e=canvas.value;render$1(e,!1);const n=e.toDataURL("image/png"),r=document.createElement("a");let g="untitled";editStatus.value===Status.Edit?g=`${editCharacterFile.value.character.text}`:g=`${editGlyph.value.name}`,r.download=g,r.href=n,document.body.appendChild(r),r.click(),document.body.removeChild(r),render$1(e,!0)}},exportSVG=()=>{if(ENV.value==="tauri")exportSVG_tauri();else{if(editStatus.value!==Status.Edit&&editStatus.value!==Status.Glyph)return;editStatus.value===Status.Glyph&&!editGlyph.value._o&&executeScript(editGlyph.value);const e=editStatus.value===Status.Edit?orderedListWithItemsForCurrentCharacterFile.value:editGlyph.value._o.components,n=componentsToSvg(e,selectedFile.value.width,selectedFile.value.height,fontRenderStyle.value),r=new Blob([n],{type:"image/svg+xml"});let g="untitled.svg";editStatus.value===Status.Edit?g=`${editCharacterFile.value.character.text}.svg`:g=`${editGlyph.value.name}.svg`,FileSaver_minExports.saveAs(r,g)}},generateLayers=e=>{const n=[],r=orderedListWithItemsForCharacterFile(e);for(let g=0;g<r.length;g++){const y=r[g],k=componentsToContours([y],{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.unitsPerEm},{x:0,y:0},!1,!1,!1),V=y.fillColor||y.value?.fillColor||"rgba(0, 0, 0, 1)";n.push({fillColor:V,contours:k,contourNum:k.length})}return n},createColorFont=async e=>{total$1.value=selectedFile.value.characterList.length*3,loaded$1.value=0,loading$1.value=!0;const n=selectedFile.value.width,r=selectedFile.value.height;let g=null;for(let j=0;j<selectedFile.value.characterList.length;j++){const ae=selectedFile.value.characterList[j];if(ae.character.text===".notdef"){g=ae;break}}const y=[];if(g){let j=[[]];e&&e.remove_overlap&&g.overlap_removed_contours?.length?j=g.overlap_removed_contours:j=componentsToContours(orderedListWithItemsForCharacterFile(g),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.unitsPerEm},{x:0,y:0},!1,!1,!1);const ae=generateLayers(g);y.push({unicode:0,name:".notdef",contours:j,contourNum:j.length,advanceWidth:g.info?.metrics?.advanceWidth||Math.max(n,r),leftSideBearing:g.info?.metrics?.lsb||0,layers:ae})}else y.push({unicode:0,name:".notdef",contours:[[]],contourNum:0,advanceWidth:Math.max(n,r),leftSideBearing:0,layers:[]});let k=!1;const{unitsPerEm:$,ascender:V,descender:L}=selectedFile.value.fontSettings;for(let j=0;j<selectedFile.value.characterList.length;j++){loaded$1.value++,loaded$1.value>=total$1.value&&(loading$1.value=!1,loaded$1.value=0,total$1.value=0),j%50===0&&await new Promise(de=>requestAnimationFrame(de));const ae=selectedFile.value.characterList[j];if(ae.character.text===".notdef")continue;let oe=[[]];e&&e.remove_overlap&&ae.overlap_removed_contours?.length?oe=ae.overlap_removed_contours:oe=componentsToContours(orderedListWithItemsForCharacterFile(ae),{unitsPerEm:$,descender:L,advanceWidth:$},{x:0,y:0},!1,!1,!1);let re=[];ae.components.find(de=>de.value?.fillColor)&&(re=generateLayers(ae));const{text:ue,unicode:le}=ae.character;y.push({name:ue,unicode:parseInt(le,16),advanceWidth:ae.info?.metrics?.advanceWidth||$,leftSideBearing:ae.info?.metrics?.lsb||void 0,contours:oe,contourNum:oe.length,layers:re}),ue===" "&&(k=!0)}return k||y.push({name:" ",unicode:parseInt("0x20",16),advanceWidth:$,leftSideBearing:0,contours:[[]],contourNum:0,layers:[]}),y.sort((j,ae)=>j.unicode-ae.unicode),await create(y,{familyName:selectedFile.value.name,styleName:"Regular",unitsPerEm:$,ascender:V,descender:L,tables:selectedFile.value.fontSettings.tables||null,isColorFont:!0})},createFont=async e=>{const n=selectedFile.value.width,r=selectedFile.value.height;let g=null;for(let j=0;j<selectedFile.value.characterList.length;j++){const ae=selectedFile.value.characterList[j];if(ae.character.text===".notdef"){g=ae;break}}const y=[];if(g){let j=[[]];e&&e.remove_overlap&&g.overlap_removed_contours?.length?j=g.overlap_removed_contours:j=componentsToContours(orderedListWithItemsForCharacterFile(g),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.unitsPerEm},{x:0,y:0},!1,!1,!1),y.push({unicode:0,name:".notdef",contours:j,contourNum:j.length,advanceWidth:g.info?.metrics?.advanceWidth||Math.max(n,r),leftSideBearing:g.info?.metrics?.lsb||0})}else y.push({unicode:0,name:".notdef",contours:[[]],contourNum:0,advanceWidth:Math.max(n,r),leftSideBearing:0});let k=!1;const{unitsPerEm:$,ascender:V,descender:L}=selectedFile.value.fontSettings;for(let j=0;j<selectedFile.value.characterList.length;j++){loaded$1.value++,loaded$1.value>=total$1.value&&(loading$1.value=!1,loaded$1.value=0,total$1.value=0);const ae=selectedFile.value.characterList[j];if(ae.character.text===".notdef")continue;let oe=[[]];e&&e.remove_overlap&&ae.overlap_removed_contours?.length?oe=ae.overlap_removed_contours:oe=componentsToContours(orderedListWithItemsForCharacterFile(ae),{unitsPerEm:$,descender:L,advanceWidth:$},{x:0,y:0},!1,!1,!1);const{text:re,unicode:ue}=ae.character;y.push({name:re,unicode:parseInt(ue,16),advanceWidth:ae.info?.metrics?.advanceWidth||$,leftSideBearing:ae.info?.metrics?.lsb||void 0,contours:oe,contourNum:oe.length}),re===" "&&(k=!0)}return k||y.push({name:" ",unicode:parseInt("0x20",16),advanceWidth:$,leftSideBearing:0,contours:[[]],contourNum:0}),y.sort((j,ae)=>j.unicode-ae.unicode),await create(y,{familyName:selectedFile.value.name,styleName:"Regular",unitsPerEm:$,ascender:V,descender:L,tables:selectedFile.value.fontSettings.tables||null,contourStorage:e?.contour_storage||"cff"})},createVarFont=async e=>{const n=generateAllAxisCombinations(selectedFile.value.variants?.axes?.length||0);total$1.value=selectedFile.value.characterList.length*3+n.length*selectedFile.value.characterList.length,loaded$1.value=0,loading$1.value=!0;const r=selectedFile.value.width,g=selectedFile.value.height,y=clone(constants.value);useFixedCurves.value=!0;let k=null;for(let oe=0;oe<selectedFile.value.characterList.length;oe++){const re=selectedFile.value.characterList[oe];if(re.character.text===".notdef"){k=re;break}}const $=[];if(k){let oe=[[]];e&&e.remove_overlap&&k.overlap_removed_contours?.length?oe=k.overlap_removed_contours:oe=componentsToContours(orderedListWithItemsForCharacterFile(k),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.unitsPerEm},{x:0,y:0},!1,!1,!0),$.push({unicode:0,name:".notdef",contours:oe,contourNum:oe.length,advanceWidth:k.info?.metrics?.advanceWidth||Math.max(r,g),leftSideBearing:k.info?.metrics?.lsb||0})}else $.push({unicode:0,name:".notdef",contours:[[]],contourNum:0,advanceWidth:Math.max(r,g),leftSideBearing:0});let V=!1;const{unitsPerEm:L,ascender:z,descender:j}=selectedFile.value.fontSettings;for(let oe=0;oe<selectedFile.value.characterList.length;oe++){loaded$1.value++,loaded$1.value>=total$1.value&&(loading$1.value=!1,loaded$1.value=0,total$1.value=0);const re=selectedFile.value.characterList[oe];if(re.character.text===".notdef")continue;let ue=[[]];e&&e.remove_overlap&&re.overlap_removed_contours?.length?ue=re.overlap_removed_contours:ue=componentsToContours(orderedListWithItemsForCharacterFile(re),{unitsPerEm:L,descender:j,advanceWidth:L},{x:0,y:0},!1,!1,!0);const{text:le,unicode:de}=re.character;$.push({name:le,unicode:parseInt(de,16),advanceWidth:re.info?.metrics?.advanceWidth||L,leftSideBearing:re.info?.metrics?.lsb||void 0,contours:ue,contourNum:ue.length}),le===" "&&(V=!0),oe%50===0&&await new Promise(he=>requestAnimationFrame(he))}if(V||$.push({name:" ",unicode:parseInt("0x20",16),advanceWidth:L,leftSideBearing:0,contours:[[]],contourNum:0}),$.sort((oe,re)=>oe.unicode-re.unicode),selectedFile.value.variants?.axes){for(const re of selectedFile.value.variants.axes){const ue=constants.value.find(le=>le.uuid===re.uuid);ue&&(console.log(` Resetting ${re.name} to defaultValue: ${ue.value}  ${re.defaultValue}`),ue.value=re.defaultValue)}constantsMap.update(constants.value),console.log(" Regenerating default glyphs with defaultValue...");const oe=await getVarFontContours({containSpace:V,forceUpdate:!0});for(let re=0;re<oe.length;re++){const ue=oe[re],le=$.findIndex(de=>de.unicode===ue.unicode);le!==-1&&$[le].unicode!==0&&$[le].unicode!==32&&($[le].contours=ue.contours)}console.log(` Default glyphs regenerated with defaultValue
`)}console.log(`
 Generating variation combinations...`),console.log(`Total combinations: ${n.length}`);for(let oe=0;oe<n.length;oe++){const re=n[oe],ue=re.tuple;for(let xe=0;xe<ue.length;xe++){const Ne=selectedFile.value.variants?.axes[xe],$e=ue[xe];let Ce;$e>=0?Ce=Ne.defaultValue+(Ne.maxValue-Ne.defaultValue)*$e:Ce=Ne.defaultValue+(Ne.defaultValue-Ne.minValue)*$e;const Ie=constants.value.find(ze=>ze.uuid===Ne.uuid);Ie?(console.log(`   Setting ${Ne.name} (${Ne.axisTag}): ${Ie.value}  ${Ce}`),Ie.value=Ce):console.error(`   Constant not found for axis.uuid: ${Ne.uuid}`)}constantsMap.update(constants.value);const le=constants.value.find(xe=>xe.uuid===selectedFile.value.variants?.axes[0].uuid);console.log(`   Before generating contours: constant value = ${le?.value}`);const de=await getVarFontContours({containSpace:V,forceUpdate:!0});if(de.length>2&&de[2].contours.length>0){const xe=de[2].contours[0][0];console.log(`   Generated contour first point: (${xe.start.x.toFixed(2)}, ${xe.start.y.toFixed(2)})`)}const{convertContoursToQuadratic:he}=await __vitePreload(()=>Promise.resolve().then(()=>cubicToQuadratic),void 0),_e=xe=>{let Ne=0,$e=0,Ce=0;for(const Ie of xe||[])for(const ze of Ie)ze.type===PathType.CUBIC_BEZIER?Ne++:ze.type===PathType.QUADRATIC_BEZIER?$e++:ze.type===PathType.LINE&&Ce++;return{cubic:Ne,quad:$e,line:Ce}};re.overlapRemovedContours=de.map((xe,Ne)=>{const $e=_e(xe.contours),Ce=he(xe.contours,.5),Ie=_e(Ce);return(Ne===7||Ne===11||Ne===12)&&console.log(`    Combination ${oe}, Variant char ${Ne}: cubic=${$e.cubic}, quad=${$e.quad}, line=${$e.line}  quad=${Ie.quad}, line=${Ie.line}`),{...xe,contours:Ce}}),oe===0||oe===n.length-1?console.log(`   Combination ${oe}: tuple [${ue.join(", ")}] - ${de.length} glyphs converted`):oe===1&&console.log("  ...")}console.log(` All combinations converted to quadratic Bezier
`),console.log(" Checking combinations before passing to createFont:"),console.log(`  combinations.length: ${n.length}`),n.length>0&&(console.log(`  combinations[0].tuple: [${n[0].tuple.join(", ")}]`),console.log(`  combinations[0].overlapRemovedContours exists: ${!!n[0].overlapRemovedContours}`),n[0].overlapRemovedContours&&console.log(`  combinations[0].overlapRemovedContours.length: ${n[0].overlapRemovedContours.length}`)),constants.value=y,constantsMap.update(constants.value),useFixedCurves.value=!1;for(let oe=0;oe<selectedFile.value.characterList.length;oe++){loaded$1.value++,loaded$1.value>=total$1.value&&(loading$1.value=!1,loaded$1.value=0,total$1.value=0);const re=selectedFile.value.characterList[oe];componentsToContours(orderedListWithItemsForCharacterFile(re),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.unitsPerEm},{x:0,y:0},!1,!1,!0),oe%50===0&&await new Promise(ue=>requestAnimationFrame(ue))}return await create($,{familyName:selectedFile.value.name,styleName:"Regular",unitsPerEm:L,ascender:z,descender:j,variants:{axes:selectedFile.value.variants?.axes,instances:selectedFile.value.variants?.instances,combinations:n},tables:selectedFile.value.fontSettings.tables||null})},getVarFontContours=async e=>{const{containSpace:n}=e,r=[];n||r.push({unicode:parseInt("0x20",16),contours:[[]]});for(let g=0;g<selectedFile.value.characterList.length;g++){loaded$1.value++,loaded$1.value>=total$1.value&&(loading$1.value=!1,loaded$1.value=0,total$1.value=0);const y=selectedFile.value.characterList[g];let k=componentsToContours(orderedListWithItemsForCharacterFile(y),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.unitsPerEm},{x:0,y:0},!1,!1,e.forceUpdate);r.push({unicode:parseInt(y.character.unicode,16),contours:k}),g%50===0&&await new Promise($=>requestAnimationFrame($))}return r.sort((g,y)=>g.unicode-y.unicode),r},generateAllAxisCombinations=e=>{if(e===0)return[];const n=[];if(e===1)return n.push({tuple:[-1],overlapRemovedContours:null}),n.push({tuple:[1],overlapRemovedContours:null}),console.log(" Single axis: generating 2 extreme points (min=-1.0, max=1.0)"),n;const r=Math.pow(3,e);for(let g=1;g<r;g++){const y=[];let k=g;for(let $=0;$<e;$++){const V=k%3;k=Math.floor(k/3),y.push(V===0?-1:V===1?0:1)}y.every($=>$===0)||n.push({tuple:y,overlapRemovedContours:null})}return console.log(` Multi-axis (${e}): generating ${n.length} corner points`),n},exportFont=async e=>{const n=await createFont(e);loadingMsg.value="...";const r=toArrayBuffer(n);console.log(`[exportFont] ArrayBuffer size: ${r.byteLength} bytes`);const g=new Blob([r],{type:"font/opentype"});console.log(`[exportFont] Blob size: ${g.size} bytes`);var y=new JSZip;y.file(`${selectedFile.value.name}.otf`,g),y.generateAsync({type:"blob"}).then(function(k){FileSaver_minExports.saveAs(k,`${selectedFile.value.name}.zip`),console.log("[exportFont] ZIP saved successfully"),loading$1.value=!1,loaded$1.value=0,total$1.value=0,loadingMsg.value=""})},exportColorFont=async e=>{const n=await createColorFont(e);loadingMsg.value="...",loading$1.value=!0;const r=toArrayBuffer(n);console.log(`[exportColorFont] ArrayBuffer size: ${r.byteLength} bytes`);const g=new Blob([r],{type:"font/opentype"});console.log(`[exportColorFont] Blob size: ${g.size} bytes`);var y=new JSZip;y.file(`${selectedFile.value.name}.otf`,g),y.generateAsync({type:"blob"}).then(function(k){FileSaver_minExports.saveAs(k,`${selectedFile.value.name}.zip`),console.log("[exportColorFont] ZIP saved successfully"),loading$1.value=!1,loaded$1.value=0,total$1.value=0,loadingMsg.value=""})},exportColorFont_tauri=async e=>{const n=await createColorFont(e);loadingMsg.value="...";const r=toArrayBuffer(n),g=`${selectedFile.value.name}.otf`;nativeSaveBinary(r,g,["otf"]),loading$1.value=!1,loaded$1.value=0,total$1.value=0,loadingMsg.value=""},exportVarFont=async e=>{const n=await createVarFont(e);loadingMsg.value="...",loading$1.value=!0;const r=toArrayBuffer(n);console.log(`[exportVarFont] ArrayBuffer size: ${r.byteLength} bytes`);const g=new Blob([r],{type:"font/opentype"});console.log(`[exportVarFont] Blob size: ${g.size} bytes`);var y=new JSZip;y.file(`${selectedFile.value.name}.otf`,g),y.generateAsync({type:"blob"}).then(function(k){FileSaver_minExports.saveAs(k,`${selectedFile.value.name}.zip`),console.log("[exportVarFont] ZIP saved successfully"),loading$1.value=!1,loaded$1.value=0,total$1.value=0,loadingMsg.value=""})},exportVarFont_tauri=async e=>{const n=await createVarFont(e);loadingMsg.value="...";const r=toArrayBuffer(n),g=`${selectedFile.value.name}.otf`;nativeSaveBinary(r,g,["otf"]),loading$1.value=!1,loaded$1.value=0,total$1.value=0,loadingMsg.value=""},computeOverlapRemovedContours=async e=>{const{unitsPerEm:n,descender:r}=selectedFile.value.fontSettings;let g=!1;e&&(g=e.forceUpdate||!1);let y=0;const k=async()=>{if(y>=selectedFile.value.characterList.length)return;let $=selectedFile.value.characterList[y],V=componentsToContours(orderedListWithItemsForCharacterFile($),{unitsPerEm:n,descender:r,advanceWidth:n},{x:0,y:0},!1,!1,g);if(isAlreadyOptimized(V)){if($.overlap_removed_contours=V,y++,loaded$1.value++,loaded$1.value>=total$1.value){loading$1.value=!1,loaded$1.value=0,total$1.value=0;return}return await new Promise(ue=>setTimeout(ue,0)),k()}let L=[];for(let ue=0;ue<V.length;ue++){const le=V[ue];if(le.length===0)continue;const de=createOptimizedPath(le);de.closed||de.closePath(),L.push(de)}let z=null,j=!1,ae=!1;for(let ue=0;ue<L.length;ue++){const le=L[ue];if(!le.area)continue;const de=le.area;Math.abs(de)>1e-6&&(de>0?ae=!0:j=!0)}if(j&&ae){const ue=[],le=[];for(let de=0;de<L.length;de++){const he=L[de];he.area&&(he.area>0?ue.push(he):le.push(he))}if(ue.length===0)z=mergePathsWithPrecision(L);else{z=ue[0].clone();for(let de=1;de<ue.length;de++){const he=z.unite(ue[de]);he&&he.area&&Math.abs(he.area)>1e-6&&(z=he)}for(let de=0;de<le.length;de++){const he=z.exclude(le[de]);he&&he.area&&Math.abs(he.area)>1e-6&&(z=he)}(!z||!z.area||Math.abs(z.area)<1e-6)&&(z=mergePathsWithPrecision(L))}}else z=mergePathsWithPrecision(L);if(!z){if(y++,loaded$1.value++,loaded$1.value>=total$1.value){loading$1.value=!1,loaded$1.value=0,total$1.value=0;return}return await new Promise(ue=>setTimeout(ue,0)),k()}let oe=[];const re=ue=>{const le=[];if(ue.children&&ue.children.length>0){for(let de=0;de<ue.children.length;de++){const he=ue.children[de];if(he instanceof paper.Path){const _e=re(he);le.push(..._e)}}return le}if(ue.curves&&ue.curves.length>0){const de=[];for(let he=0;he<ue.curves.length;he++){const _e=ue.curves[he];if(_e.points.length>=4){const xe={type:PathType.CUBIC_BEZIER,start:{x:_e.points[0].x,y:_e.points[0].y},control1:{x:_e.points[1].x,y:_e.points[1].y},control2:{x:_e.points[2].x,y:_e.points[2].y},end:{x:_e.points[3].x,y:_e.points[3].y}};de.push(xe)}}de.length>0&&le.push(de)}return le};if(oe=re(z),$.overlap_removed_contours=oe,y++,loaded$1.value++,loaded$1.value>=total$1.value){loading$1.value=!1,loaded$1.value=0,total$1.value=0;return}if(y<selectedFile.value.characterList.length)return y%100===0&&await new Promise(ue=>setTimeout(ue,0)),k()};await k()},generateCharFile=e=>{const n={uuid:genUUID(),text:e.name,unicode:toUnicode(e.name),components:[]},r=genUUID(),g={uuid:r,type:"text",character:n,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},info:{gridSettings:{dx:0,dy:0,centerSquareSize:selectedFile.value.width/3,size:selectedFile.value.width,default:!0},useSkeletonGrid:!1,layout:"",layoutTree:[]},script:`function script_${r.replaceAll("-","_")} (character, constants, FP) {
	//Todo something
}`},y=generateComponent(e.left),k=generateComponent(e.right);return g.components.push(y),g.components.push(k),g.orderedList.push({type:"component",uuid:y.uuid}),g.orderedList.push({type:"component",uuid:k.uuid}),g},generateComponent=e=>{const n=getGlyphByName(e.glyph_name),r=clone(n);r.layout.params.width=e.w,r.layout.params.height=e.h;const g={uuid:genUUID(),type:"glyph",name:n.name+Date.now().toString().slice(9),lock:!1,visible:!0,value:r,ox:e.x-(1e3-e.w)/2,oy:e.y-(1e3-e.h)/2,usedInCharacter:!0};return executeScript(g.value),g},runFormatAllCharacters=()=>{if(!selectedFile.value)return;const e=selectedFile.value.characterList||[];let n=0;if(e.forEach(r=>{if(!r)return;formatCharacterGlyphComponents(r)&&(n+=1,emitter.emit("renderPreviewCanvasByUUID",r.uuid))}),n>0){if(editCharacterFile.value){const r=e.findIndex(g=>g.uuid===editCharacterFile.value.uuid);r!==-1&&(editCharacterFile.value=clone(e[r]),executeCharacterScript(editCharacterFile.value)),emitter.emit("renderCharacter",!0)}tips.value=` ${n} `}else tips.value=""},formatAllCharacters=()=>{tips.value="",setTipsDialogVisible(!0,()=>{runFormatAllCharacters()})},runFormatCurrentCharacter=()=>{if(editStatus.value===Status.Edit){const e=editCharacterFile.value;if(!e)return;if(formatCharacterGlyphComponents(e)){const r=selectedFile.value;if(r){const g=r.characterList.findIndex(y=>y.uuid===e.uuid);g!==-1&&(r.characterList[g]=clone(e),emitter.emit("renderPreviewCanvasByUUID",e.uuid))}emitter.emit("renderCharacter",!0),tips.value=` ${e.character?.text??e.uuid} `}else tips.value=""}else if(editStatus.value===Status.Glyph){const e=editGlyph.value;if(!e)return;formatGlyphGlyphComponents(e)?(emitter.emit("renderGlyph",!0),emitter.emit("renderGlyphPreviewCanvasByUUID",e.uuid),tips.value=` ${e.name} `):tips.value=""}},formatCurrentCharacter=()=>{tips.value="",setTipsDialogVisible(!0,()=>{runFormatCurrentCharacter()})},removeOverlap=async()=>{let e=editCharacterFile.value;editStatus.value===Status.Glyph&&(e=editGlyph.value),selectedFile.value.fontSettings;let n=componentsToContours2(orderedListWithItemsForCharacterFile(e),{x:0,y:0},!1,1);if(editStatus.value==Status.Glyph&&(n=componentsToContours2(e._o.components,{x:0,y:0},!0,1)),isAlreadyOptimized(n))return;let r=[];for(let V=0;V<n.length;V++){const L=n[V];if(L.length===0)continue;const z=createOptimizedPath(L);z.closed||z.closePath(),r.push(z)}let g=null,y=!1,k=!1;for(let V=0;V<r.length;V++){const L=r[V];if(!L.area)continue;const z=L.area;Math.abs(z)>1e-6&&(z>0?k=!0:y=!0)}if(y&&k){const V=[],L=[];for(let z=0;z<r.length;z++){const j=r[z];j.area&&(j.area>0?V.push(j):L.push(j))}if(V.length===0)g=mergePathsWithPrecision(r);else{g=V[0].clone();for(let z=1;z<V.length;z++){const j=g.unite(V[z]);j&&j.area&&Math.abs(j.area)>1e-6&&(g=j)}for(let z=0;z<L.length;z++){const j=g.exclude(L[z]);j&&j.area&&Math.abs(j.area)>1e-6&&(g=j)}(!g||!g.area||Math.abs(g.area)<1e-6)&&(g=mergePathsWithPrecision(r))}}else g=mergePathsWithPrecision(r);let $=[];if(g){const V=L=>{const z=[];if(L.children&&L.children.length>0){for(let j=0;j<L.children.length;j++){const ae=L.children[j];if(ae instanceof paper.Path){const oe=V(ae);z.push(...oe)}}return z}if(L.curves&&L.curves.length>0){let j=[];j.push({uuid:genUUID(),type:"anchor",x:L.curves[0].points[0].x,y:L.curves[0].points[0].y,origin:null,isShow:!0});for(let ae=0;ae<L.curves.length;ae++){const oe=L.curves[ae];if(oe.points.length>=4){const re={uuid:genUUID(),type:"control",x:oe.points[1].x,y:oe.points[1].y,origin:j[j.length-1].uuid,isShow:!0},ue=genUUID(),le={uuid:genUUID(),type:"control",x:oe.points[2].x,y:oe.points[2].y,origin:ue,isShow:!0},de={uuid:ue,type:"anchor",x:oe.points[3].x,y:oe.points[3].y,origin:null,isShow:!0};j.push(re,le,de)}}j.length>=3&&z.push(genPenComponent(j,!0))}return z};$=V(g)}if(editStatus.value===Status.Edit){editCharacterFile.value.script=`function script_${editCharacterFile.value.uuid.replaceAll("-","_")} (character, constants, FP) {
	//Todo something
}`,editCharacterFile.value.glyph_script=null,editCharacterFile.value.system_script=null,editCharacterFile.value.orderedList=[],editCharacterFile.value.components=[];for(let V=0;V<$.length;V++)addComponentForCurrentCharacterFile($[V]);emitter.emit("renderCharacter")}else if(editStatus.value===Status.Glyph){editGlyph.value.script=`function script_${editGlyph.value.uuid.replaceAll("-","_")} (glyph, constants, FP) {
	//Todo something
}`,editGlyph.value.glyph_script=null,editGlyph.value.system_script=null;for(let V=0;V<$.length;V++)addComponentForCurrentGlyph($[V]);emitter.emit("renderGlyph")}},xHeight=500,capitalHeight$2=750,width$1=360,descender=-200;let lowercaseLetters=[{name:"a",params:[{name:"h1",value:xHeight,min:0,max:1e3,step:1,default:xHeight},{name:"h2",value:100,min:0,max:1e3,step:1,default:100},{name:"h3",value:xHeight*282/500,min:0,max:1e3,step:1,default:xHeight*282/500},{name:"h4",value:85,min:0,max:1e3,step:1,default:85},{name:"h5",value:118,min:0,max:1e3,step:1,default:118},{name:"w1",value:width$1,min:0,max:1e3,step:1,default:width$1},{name:"w2",value:25,min:0,max:1e3,step:1,default:25}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"b",params:[{name:"h1",value:capitalHeight$2,min:0,max:1e3,step:1,default:capitalHeight$2},{name:"h2",value:capitalHeight$2*290/750,min:0,max:1e3,step:1,default:capitalHeight$2*290/750},{name:"h3",value:98,min:0,max:1e3,step:1,default:98},{name:"w1",value:width$1,min:0,max:1e3,step:1,default:width$1},{name:"w2",value:82,min:0,max:1e3,step:1,default:82}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"c",params:[{name:"h1",value:xHeight,min:0,max:1e3,step:1,default:xHeight},{name:"h2",value:125,min:0,max:1e3,step:1,default:125},{name:"w1",value:width$1,min:0,max:1e3,step:1,default:width$1}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"d",params:[{name:"h1",value:capitalHeight$2,min:0,max:1e3,step:1,default:capitalHeight$2},{name:"h2",value:capitalHeight$2*290/750,min:0,max:1e3,step:1,default:capitalHeight$2*290/750},{name:"h3",value:98,min:0,max:1e3,step:1,default:98},{name:"w1",value:width$1,min:0,max:1e3,step:1,default:width$1},{name:"w2",value:82,min:0,max:1e3,step:1,default:82}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"e",params:[{name:"h1",value:xHeight,min:0,max:1e3,step:1,default:xHeight},{name:"h2",value:135,min:0,max:1e3,step:1,default:135},{name:"w1",value:width$1,min:0,max:1e3,step:1,default:width$1}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"f",params:[{name:"h1",value:capitalHeight$2,min:0,max:1e3,step:1,default:capitalHeight$2},{name:"h2",value:capitalHeight$2*250/750,min:0,max:1e3,step:1,default:capitalHeight$2*250/750},{name:"h3",value:100,min:0,max:1e3,step:1,default:100},{name:"w1",value:width$1,min:0,max:1e3,step:1,default:width$1}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"g",params:[{name:"h1",value:xHeight-descender,min:0,max:1e3,step:1,default:xHeight-descender},{name:"h2",value:(xHeight-descender)*395/700,min:0,max:1e3,step:1,default:(xHeight-descender)*395/700},{name:"h3",value:135,min:0,max:1e3,step:1,default:135},{name:"h4",value:(xHeight-descender)*.2,min:0,max:1e3,step:1,default:(xHeight-descender)*.2},{name:"h5",value:(xHeight-descender)*.2,min:0,max:1e3,step:1,default:(xHeight-descender)*.2},{name:"w1",value:width$1,min:0,max:1e3,step:1,default:width$1}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"h",params:[{name:"h1",value:capitalHeight$2,min:0,max:1e3,step:1,default:capitalHeight$2},{name:"h2",value:175,min:0,max:1e3,step:1,default:175},{name:"h3",value:capitalHeight$2*480/750,min:0,max:1e3,step:1,default:capitalHeight$2*480/750},{name:"w1",value:width$1,min:0,max:1e3,step:1,default:width$1}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"i",params:[{name:"h1",value:capitalHeight$2,min:0,max:1e3,step:1,default:capitalHeight$2},{name:"h2",value:130,min:0,max:1e3,step:1,default:150}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"j",params:[{name:"h1",value:capitalHeight$2-descender,min:0,max:1e3,step:1,default:capitalHeight$2-descender},{name:"h2",value:150,min:0,max:1e3,step:1,default:150},{name:"h3",value:80,min:0,max:1e3,step:1,default:80},{name:"h4",value:(capitalHeight$2-descender)*.75,min:0,max:1e3,step:1,default:(capitalHeight$2-descender)*.75},{name:"w1",value:width$1/2,min:0,max:1e3,step:1,default:width$1/2}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"k",params:[{name:"h1",value:capitalHeight$2,min:0,max:1e3,step:1,default:capitalHeight$2},{name:"h2",value:185,min:0,max:1e3,step:1,default:185},{name:"h3",value:capitalHeight$2*460/750,min:0,max:1e3,step:1,default:capitalHeight$2*460/750},{name:"h4",value:capitalHeight$2*383/750,min:0,max:1e3,step:1,default:capitalHeight$2*383/750},{name:"w1",value:width$1,min:0,max:1e3,step:1,default:width$1},{name:"w2",value:120,min:0,max:1e3,step:1,default:120}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"l",params:[{name:"h1",value:capitalHeight$2,min:0,max:1e3,step:1,default:capitalHeight$2}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"m",params:[{name:"h1",value:xHeight,min:0,max:1e3,step:1,default:xHeight},{name:"h2",value:150,min:0,max:1e3,step:1,default:165},{name:"w1",value:width$1*2,min:0,max:1e3,step:1,default:width$1*2}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"n",params:[{name:"h1",value:xHeight,min:0,max:1e3,step:1,default:xHeight},{name:"h2",value:165,min:0,max:1e3,step:1,default:150},{name:"w1",value:width$1,min:0,max:1e3,step:1,default:width$1}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"o",params:[{name:"h1",value:xHeight,min:0,max:1e3,step:1,default:xHeight},{name:"w1",value:width$1,min:0,max:1e3,step:1,default:width$1}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"p",params:[{name:"h1",value:xHeight-descender,min:0,max:1e3,step:1,default:xHeight-descender},{name:"h2",value:115,min:0,max:1e3,step:1,default:115},{name:"h3",value:(xHeight-descender)*300/700,min:0,max:1e3,step:1,default:(xHeight-descender)*300/700},{name:"w1",value:width$1,min:0,max:1e3,step:1,default:width$1},{name:"w2",value:45,min:0,max:1e3,step:1,default:45}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"q",params:[{name:"h1",value:xHeight-descender,min:0,max:1e3,step:1,default:xHeight-descender},{name:"h2",value:115,min:0,max:1e3,step:1,default:115},{name:"h3",value:(xHeight-descender)*300/700,min:0,max:1e3,step:1,default:(xHeight-descender)*300/700},{name:"w1",value:width$1,min:0,max:1e3,step:1,default:width$1},{name:"w2",value:45,min:0,max:1e3,step:1,default:45}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"r",params:[{name:"h1",value:xHeight,min:0,max:1e3,step:1,default:xHeight},{name:"h2",value:xHeight*275/500,min:0,max:1e3,step:1,default:xHeight*275/500},{name:"w1",value:width$1*.7,min:0,max:1e3,step:1,default:width$1*.7}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"s",params:[{name:"h1",value:xHeight,min:0,max:1e3,step:1,default:xHeight},{name:"h2",value:80,min:0,max:1e3,step:1,default:80},{name:"w1",value:width$1,min:0,max:1e3,step:1,default:width$1}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"t",params:[{name:"h1",value:capitalHeight$2,min:0,max:1e3,step:1,default:capitalHeight$2},{name:"h2",value:capitalHeight$2*250/750,min:0,max:1e3,step:1,default:capitalHeight$2*250/750},{name:"h3",value:100,min:0,max:1e3,step:1,default:100},{name:"h4",value:100,min:0,max:1e3,step:1,default:100},{name:"w1",value:width$1,min:0,max:1e3,step:1,default:width$1}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"u",params:[{name:"h1",value:xHeight,min:0,max:1e3,step:1,default:xHeight},{name:"h2",value:185,min:0,max:1e3,step:1,default:185},{name:"w1",value:width$1,min:0,max:1e3,step:1,default:width$1}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"v",params:[{name:"h1",value:xHeight,min:0,max:1e3,step:1,default:xHeight},{name:"w1",value:width$1,min:0,max:1e3,step:1,default:width$1}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"w",params:[{name:"h1",value:xHeight,min:0,max:1e3,step:1,default:xHeight},{name:"w1",value:width$1*2,min:0,max:1e3,step:1,default:width$1*2}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"x",params:[{name:"h1",value:xHeight,min:0,max:1e3,step:1,default:xHeight},{name:"w1",value:width$1,min:0,max:1e3,step:1,default:width$1}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"y",params:[{name:"h1",value:xHeight-descender,min:0,max:1e3,step:1,default:xHeight-descender},{name:"h2",value:(xHeight-descender)*445/700,min:0,max:1e3,step:1,default:(xHeight-descender)*445/700},{name:"w1",value:width$1,min:0,max:1e3,step:1,default:width$1},{name:"w2",value:135,min:0,max:1e3,step:1,default:135},{name:"w3",value:width$1*320/360,min:0,max:1e3,step:1,default:width$1*320/360}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"z",params:[{name:"h1",value:xHeight,min:0,max:1e3,step:1,default:xHeight},{name:"w1",value:width$1,min:0,max:1e3,step:1,default:width$1}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]}];lowercaseLetters=lowercaseLetters.map(e=>(e.globalParams.push({name:"",type:ParameterType.Enum,value:1,default:1,options:[{value:0,label:""},{value:1,label:"1"}]}),e.globalParams.push({name:"",type:ParameterType.Number,value:2,min:1,max:3,step:.1,default:2}),e));const capitalHeight$1=750,capitalWidth=500;let capitalLetters=[{name:"a",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"h2",value:capitalHeight$1*485/750,min:0,max:1e3,step:1,default:capitalHeight$1*485/750},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"b",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth},{name:"w2",value:capitalWidth*330/500,min:0,max:1e3,step:1,default:capitalWidth*330/500}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"c",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"h2",value:190,min:0,max:1e3,step:1,default:190},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"d",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"e",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"f",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"h2",value:capitalHeight$1*300/750,min:0,max:1e3,step:1,default:capitalHeight$1*300/750},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"g",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"h2",value:200,min:0,max:1e3,step:1,default:200},{name:"h3",value:100,min:0,max:1e3,step:1,default:100},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth},{name:"w2",value:200,min:0,max:1e3,step:1,default:200}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"h",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"i",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"j",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"h2",value:80,min:0,max:1e3,step:1,default:80},{name:"h3",value:150,min:0,max:1e3,step:1,default:150},{name:"w1",value:capitalWidth/2,min:0,max:1e3,step:1,default:capitalWidth/2}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"k",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"h2",value:40,min:0,max:1e3,step:1,default:40},{name:"h3",value:capitalHeight$1*.5,min:0,max:1e3,step:1,default:capitalHeight$1*.5},{name:"h4",value:capitalHeight$1*.65,min:0,max:1e3,step:1,default:capitalHeight$1*.65},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth},{name:"w2",value:150,min:0,max:1e3,step:1,default:150}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"l",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"m",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"h2",value:capitalHeight$1*600/750,min:0,max:1e3,step:1,default:capitalHeight$1*600/750},{name:"w1",value:capitalWidth*1.5,min:0,max:1e3,step:1,default:capitalWidth*1.5}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"n",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"o",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"p",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"h2",value:capitalHeight$1*400/750,min:0,max:1e3,step:1,default:capitalHeight$1*400/750},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth},{name:"w2",value:capitalWidth*.5,min:0,max:1e3,step:1,default:capitalWidth*.5}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"q",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"h2",value:150,min:0,max:1e3,step:1,default:150},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"r",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"h2",value:capitalHeight$1*.5,min:0,max:1e3,step:1,default:capitalHeight$1*.5},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth},{name:"w2",value:capitalWidth*.7,min:0,max:1e3,step:1,default:capitalWidth*.7},{name:"w3",value:capitalWidth*.5,min:0,max:1e3,step:1,default:capitalWidth*.5}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"s",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"h2",value:80,min:0,max:1e3,step:1,default:80},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"t",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"u",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"h2",value:290,min:0,max:1e3,step:1,default:290},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"v",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"w",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"w1",value:capitalWidth*1.5,min:0,max:1e3,step:1,default:capitalWidth*1.5}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"x",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"y",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"h2",value:capitalHeight$1*.4,min:0,max:1e3,step:1,default:capitalHeight$1*.4},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]},{name:"z",params:[{name:"h1",value:capitalHeight$1,min:0,max:1e3,step:1,default:capitalHeight$1},{name:"w1",value:capitalWidth,min:0,max:1e3,step:1,default:capitalWidth}],globalParams:[{name:"",value:40,min:0,max:100,step:1,default:40}]}];capitalLetters=capitalLetters.map(e=>(e.globalParams.push({name:"",type:ParameterType.Enum,value:1,default:1,options:[{value:0,label:""},{value:1,label:"1"}]}),e.globalParams.push({name:"",type:ParameterType.Number,value:2,min:1,max:3,step:.1,default:2}),e));const capitalHeight=750,width=360;let digits=[{name:"0",params:[{name:"h1",value:capitalHeight,min:0,max:1e3,step:1,default:capitalHeight},{name:"w1",value:width,min:0,max:1e3,step:1,default:width}],globalParams:[{name:"",value:40,min:0,max:1e3,step:1,default:40}]},{name:"1",params:[{name:"h1",value:capitalHeight,min:0,max:1e3,step:1,default:capitalHeight},{name:"h2",value:capitalHeight*.2,min:0,max:1e3,step:1,default:capitalHeight*.2},{name:"w1",value:width/2,min:0,max:1e3,step:1,default:width/2}],globalParams:[{name:"",value:40,min:0,max:1e3,step:1,default:40}]},{name:"2",params:[{name:"h1",value:capitalHeight,min:0,max:1e3,step:1,default:capitalHeight},{name:"h2",value:150,min:0,max:1e3,step:1,default:150},{name:"h3",value:capitalHeight*.5,min:0,max:1e3,step:1,default:capitalHeight*.5},{name:"w1",value:width,min:0,max:1e3,step:1,default:width}],globalParams:[{name:"",value:40,min:0,max:1e3,step:1,default:40}]},{name:"3",params:[{name:"h1",value:capitalHeight,min:0,max:1e3,step:1,default:capitalHeight},{name:"h2",value:150,min:0,max:1e3,step:1,default:150},{name:"w1",value:width,min:0,max:1e3,step:1,default:width},{name:"w2",value:width*.6,min:0,max:1e3,step:1,default:width*.6}],globalParams:[{name:"",value:40,min:0,max:1e3,step:1,default:40}]},{name:"4",params:[{name:"h1",value:capitalHeight,min:0,max:1e3,step:1,default:capitalHeight},{name:"h2",value:capitalHeight*.75,min:0,max:1e3,step:1,default:capitalHeight*.75},{name:"h3",value:0,min:0,max:1e3,step:1,default:0},{name:"w1",value:width,min:0,max:1e3,step:1,default:width},{name:"w2",value:width*.75,min:0,max:1e3,step:1,default:width*.75}],globalParams:[{name:"",value:40,min:0,max:1e3,step:1,default:40}]},{name:"5",params:[{name:"h1",value:capitalHeight,min:0,max:1e3,step:1,default:capitalHeight},{name:"h2",value:capitalHeight*.45,min:0,max:1e3,step:1,default:capitalHeight*.45},{name:"h3",value:120,min:0,max:1e3,step:1,default:120},{name:"h4",value:150,min:0,max:1e3,step:1,default:150},{name:"w1",value:width,min:0,max:1e3,step:1,default:width}],globalParams:[{name:"",value:40,min:0,max:1e3,step:1,default:40}]},{name:"6",params:[{name:"h1",value:capitalHeight,min:0,max:1e3,step:1,default:capitalHeight},{name:"h2",value:capitalHeight*.5,min:0,max:1e3,step:1,default:capitalHeight*.5},{name:"h3",value:80,min:0,max:1e3,step:1,default:80},{name:"w1",value:width,min:0,max:1e3,step:1,default:width},{name:"w2",value:width*.65,min:0,max:1e3,step:1,default:width*.65}],globalParams:[{name:"",value:40,min:0,max:1e3,step:1,default:40}]},{name:"7",params:[{name:"h1",value:capitalHeight,min:0,max:1e3,step:1,default:capitalHeight},{name:"w1",value:width,min:0,max:1e3,step:1,default:width},{name:"w2",value:width*.65,min:0,max:1e3,step:1,default:width*.65}],globalParams:[{name:"",value:40,min:0,max:1e3,step:1,default:40}]},{name:"8",params:[{name:"h1",value:capitalHeight,min:0,max:1e3,step:1,default:capitalHeight},{name:"w1",value:width,min:0,max:1e3,step:1,default:width}],globalParams:[{name:"",value:40,min:0,max:1e3,step:1,default:40}]},{name:"9",params:[{name:"h1",value:capitalHeight,min:0,max:1e3,step:1,default:capitalHeight},{name:"h2",value:capitalHeight*.5,min:0,max:1e3,step:1,default:capitalHeight*.5},{name:"h3",value:80,min:0,max:1e3,step:1,default:80},{name:"w1",value:width,min:0,max:1e3,step:1,default:width},{name:"w2",value:width*.65,min:0,max:1e3,step:1,default:width*.65}],globalParams:[{name:"",value:40,min:0,max:1e3,step:1,default:40}]}];digits=digits.map(e=>(e.globalParams.push({name:"",type:ParameterType.Enum,value:1,default:1,options:[{value:0,label:""},{value:1,label:"1"}]}),e.globalParams.push({name:"",type:ParameterType.Number,value:2,min:1,max:3,step:.1,default:2}),e));const importTemplates=()=>{setImportTemplatesDialogVisible(!0)},importTemplate2=async e=>{for(let n=0;n<hei_strokes.length;n++){loaded$1.value+=1;const r=hei_strokes[n];let{name:g,params:y,uuid:k}=r;e.useDefaultUUID||(k=genUUID());const $=[];for(let j=0;j<y.length;j++){const ae=y[j];$.push({uuid:genUUID(),name:ae.name,type:ParameterType.Number,value:ae.default,min:ae.min||0,max:ae.max===0?0:ae.max||1e3})}$.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:0,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]}),$.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:2,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]}),$.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:0,max:2}),$.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:1,options:[{value:0,label:""},{value:1,label:""}]}),$.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:1,max:2}),$.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:0,min:0,max:2}),$.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:0,max:2});let L=await(await fetch(base$1+`/templates/templates2/${g}.js`)).text();const z={uuid:k,type:"system",name:g,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},parameters:new ParametersMap($),joints:[],style:"",script:`function script_${k.replaceAll("-","_")} (glyph, constants, FP) {
	${L}
}`};addGlyph(z,Status.StrokeGlyphList),addGlyphTemplate(z,Status.StrokeGlyphList)}emitter.emit("renderStrokeGlyphPreviewCanvas"),setEditStatus(Status.StrokeGlyphList)},importTemplate4=async()=>{for(let e=0;e<hei_strokes.length;e++){loaded$1.value+=1;const n=hei_strokes[e],{name:r,params:g}=n,y=genUUID(),k=[];for(let z=0;z<g.length;z++){const j=g[z];k.push({uuid:genUUID(),name:j.name,type:ParameterType.Number,value:j.default,min:j.min||0,max:j.max===0?0:j.max||1e3})}k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:0,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:2,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:0,max:2}),k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:1,options:[{value:0,label:""},{value:1,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:1,max:2}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:0,min:0,max:2}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:0,max:2});let V=await(await fetch(base$1+`/templates/stroke_template_1/${r}.js`)).text();const L={uuid:y,type:"system",name:r,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},parameters:new ParametersMap(k),joints:[],style:"",script:`function script_${y.replaceAll("-","_")} (glyph, constants, FP) {
	${V}
}`};addGlyph(L,Status.StrokeGlyphList),addGlyphTemplate(L,Status.StrokeGlyphList)}emitter.emit("renderStrokeGlyphPreviewCanvas"),setEditStatus(Status.StrokeGlyphList)},importTemplate5=async()=>{for(let e=0;e<hei_strokes.length;e++){loaded$1.value+=1;const n=hei_strokes[e],{name:r,params:g}=n,y=genUUID(),k=[];for(let z=0;z<g.length;z++){const j=g[z];k.push({uuid:genUUID(),name:j.name,type:ParameterType.Number,value:j.default,min:j.min||0,max:j.max===0?0:j.max||1e3})}k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:3,min:1,max:5}),k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:0,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:1,options:[{value:0,label:""},{value:1,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:2,min:1,max:3}),k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:1,options:[{value:0,label:""},{value:1,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:2,min:1,max:3}),k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:1,options:[{value:0,label:""},{value:1,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:2,min:1,max:3}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:0,min:0,max:2}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:0,max:2});let V=await(await fetch(base$1+`/templates/stroke_template_song/${r}.js`)).text();const L={uuid:y,type:"system",name:r,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},parameters:new ParametersMap(k),joints:[],style:"",script:`function script_${y.replaceAll("-","_")} (glyph, constants, FP) {
	${V}
}`};addGlyph(L,Status.StrokeGlyphList),addGlyphTemplate(L,Status.StrokeGlyphList)}emitter.emit("renderStrokeGlyphPreviewCanvas"),setEditStatus(Status.StrokeGlyphList)},importTemplate6=async()=>{for(let e=0;e<kai_strokes.length;e++){loaded$1.value+=1;const n=kai_strokes[e],{name:r,params:g}=n,y=genUUID(),k=[];for(let z=0;z<g.length;z++){const j=g[z];k.push({uuid:genUUID(),name:j.name,type:ParameterType.Number,value:j.name===""?35:j.default,min:j.min||0,max:j.max||1e3})}k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:0,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:1,options:[{value:0,label:""},{value:1,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:1,max:3}),k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:1,options:[{value:0,label:""},{value:1,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:1,max:3}),k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:1,options:[{value:0,label:""},{value:1,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:1,max:3}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:0,min:0,max:2}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:0,max:2});let V=await(await fetch(base$1+`/templates/stroke_template_fangsong/${r}.js`)).text();const L={uuid:y,type:"system",name:r,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},parameters:new ParametersMap(k),joints:[],style:"",script:`function script_${y.replaceAll("-","_")} (glyph, constants, FP) {
	${V}
}`};addGlyph(L,Status.StrokeGlyphList),addGlyphTemplate(L,Status.StrokeGlyphList)}emitter.emit("renderStrokeGlyphPreviewCanvas"),setEditStatus(Status.StrokeGlyphList)},importTemplate7=async()=>{for(let e=0;e<kai_strokes.length;e++){loaded$1.value+=1;const n=kai_strokes[e],{name:r,params:g}=n,y=genUUID(),k=[];for(let z=0;z<g.length;z++){const j=g[z];k.push({uuid:genUUID(),name:j.name,type:ParameterType.Number,value:j.name===""?60:j.default,min:j.min||0,max:j.max||1e3})}k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:0,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:1,options:[{value:0,label:""},{value:1,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:1,max:3}),k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:1,options:[{value:0,label:""},{value:1,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:1,max:3}),k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:1,options:[{value:0,label:""},{value:1,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:1,max:3}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:0,min:0,max:2}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:0,max:2});let V=await(await fetch(base$1+`/templates/stroke_template_kai/${r}.js`)).text();const L={uuid:y,type:"system",name:r,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},parameters:new ParametersMap(k),joints:[],style:"",script:`function script_${y.replaceAll("-","_")} (glyph, constants, FP) {
	${V}
}`};addGlyph(L,Status.StrokeGlyphList),addGlyphTemplate(L,Status.StrokeGlyphList)}emitter.emit("renderStrokeGlyphPreviewCanvas"),setEditStatus(Status.StrokeGlyphList)},importTemplate8=async()=>{for(let e=0;e<li_strokes.length;e++){loaded$1.value+=1;const n=li_strokes[e],{name:r,params:g}=n,y=genUUID(),k=[];for(let z=0;z<g.length;z++){const j=g[z];k.push({uuid:genUUID(),name:j.name,type:ParameterType.Number,value:j.name===""?35:j.default,min:j.min||0,max:j.max||1e3})}k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:0,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:1,options:[{value:0,label:""},{value:1,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:1,max:3}),k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:1,options:[{value:0,label:""},{value:1,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:1,max:3}),k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:1,options:[{value:0,label:""},{value:1,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:1,max:3}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:0,min:0,max:2}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:0,max:2});let V=await(await fetch(base$1+`/templates/stroke_template_li/${r}.js`)).text();const L={uuid:y,type:"system",name:r,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},parameters:new ParametersMap(k),joints:[],style:"",script:`function script_${y.replaceAll("-","_")} (glyph, constants, FP) {
	${V}
}`};addGlyph(L,Status.StrokeGlyphList),addGlyphTemplate(L,Status.StrokeGlyphList)}emitter.emit("renderStrokeGlyphPreviewCanvas"),setEditStatus(Status.StrokeGlyphList)},importTemplateDigits=async()=>{for(let e=0;e<digits.length;e++){loaded$1.value+=1;const n=digits[e],{name:r,params:g,globalParams:y}=n,k=genUUID(),$=[];for(let j=0;j<g.length;j++){const ae=g[j];$.push({uuid:genUUID(),name:ae.name,type:ParameterType.Number,value:ae.default,min:ae.min||0,max:ae.max||1e3})}for(let j=0;j<y.length;j++){const ae=y[j];ae.type===ParameterType.Enum?$.push({uuid:genUUID(),name:ae.name,type:ParameterType.Enum,value:ae.default,options:ae.options}):$.push({uuid:genUUID(),name:ae.name,type:ae.type||ParameterType.Number,value:ae.default,min:ae.min||0,max:ae.max||1e3})}let L=await(await fetch(base$1+`/templates/digits/${r}.js`)).text();const z={uuid:k,type:"system",name:r,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},parameters:new ParametersMap($),joints:[],style:"",script:`function script_${k.replaceAll("-","_")} (glyph, constants, FP) {
	${L}
}`};addGlyph(z,Status.GlyphList),addGlyphTemplate(z,Status.GlyphList)}await nextTick(),emitter.emit("renderGlyphPreviewCanvas"),setEditStatus(Status.GlyphList)},importTemplateLetters=async()=>{for(let e=0;e<lowercaseLetters.length;e++){loaded$1.value+=1;const n=lowercaseLetters[e],{name:r,params:g,globalParams:y}=n,k=genUUID(),$=[];for(let j=0;j<g.length;j++){const ae=g[j];$.push({uuid:genUUID(),name:ae.name,type:ParameterType.Number,value:ae.default,min:ae.min||0,max:ae.max||1e3})}for(let j=0;j<y.length;j++){const ae=y[j];ae.type===ParameterType.Enum?$.push({uuid:genUUID(),name:ae.name,type:ParameterType.Enum,value:ae.default,options:ae.options}):$.push({uuid:genUUID(),name:ae.name,type:ae.type||ParameterType.Number,value:ae.default,min:ae.min||0,max:ae.max||1e3})}let L=await(await fetch(base$1+`/templates/lowercase_letters/${r}.js`)).text();const z={uuid:k,type:"system",name:r,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},parameters:new ParametersMap($),joints:[],style:"",script:`function script_${k.replaceAll("-","_")} (glyph, constants, FP) {
	${L}
}`};addGlyph(z,Status.GlyphList),addGlyphTemplate(z,Status.GlyphList)}for(let e=0;e<capitalLetters.length;e++){loaded$1.value+=1;const n=capitalLetters[e],{name:r,params:g,globalParams:y}=n,k=genUUID(),$=[];for(let j=0;j<g.length;j++){const ae=g[j];$.push({uuid:genUUID(),name:ae.name,type:ParameterType.Number,value:ae.default,min:ae.min||0,max:ae.max||1e3})}for(let j=0;j<y.length;j++){const ae=y[j];ae.type===ParameterType.Enum?$.push({uuid:genUUID(),name:ae.name,type:ParameterType.Enum,value:ae.default,options:ae.options}):$.push({uuid:genUUID(),name:ae.name,type:ae.type||ParameterType.Number,value:ae.default,min:ae.min||0,max:ae.max||1e3})}let L=await(await fetch(base$1+`/templates/capital_letters/${r}.js`)).text();const z={uuid:k,type:"system",name:r,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},parameters:new ParametersMap($),joints:[],style:"",script:`function script_${k.replaceAll("-","_")} (glyph, constants, FP) {
	${L}
}`};addGlyph(z,Status.GlyphList),addGlyphTemplate(z,Status.GlyphList)}await nextTick(),emitter.emit("renderGlyphPreviewCanvas"),setEditStatus(Status.GlyphList)},importTemplate1=async()=>{if(files.value&&files.value.length)tips.value="",tipsDialogVisible.value=!0;else{router.currentRoute.value.name==="welcome"&&router.push("/editor");const e="",n={uuid:genUUID(),width:1e3,height:1e3,name:"",saved:!1,characterList:[],iconsCount:0,fontSettings:{unitsPerEm:1e3,ascender:800,descender:-200}};name_data.value=[{nameID:1,nameLabel:"fontFamily",platformID:3,encodingID:1,langID:2052,value:e,default:!0},{nameID:1,nameLabel:"fontFamily",platformID:3,encodingID:1,langID:1033,value:getEnName(e),default:!0},{nameID:2,nameLabel:"fontSubfamily",platformID:3,encodingID:1,langID:2052,value:"",default:!0},{nameID:2,nameLabel:"fontSubfamily",platformID:3,encodingID:1,langID:1033,value:"Regular",default:!0},{nameID:4,nameLabel:"fullName",platformID:3,encodingID:1,langID:2052,value:e+" ",default:!0},{nameID:4,nameLabel:"fullName",platformID:3,encodingID:1,langID:1033,value:getEnName(e)+" Regular",default:!0},{nameID:5,nameLabel:"version",platformID:3,encodingID:1,langID:2052,value:" 1.0",default:!0},{nameID:5,nameLabel:"version",platformID:3,encodingID:1,langID:1033,value:"Version 1.0",default:!0},{nameID:6,nameLabel:"postScriptName",platformID:3,encodingID:1,langID:2052,value:(getEnName(e)+"-Regular").replace(/\s/g,"").slice(0,63),default:!0},{nameID:6,nameLabel:"postScriptName",platformID:3,encodingID:1,langID:1033,value:(getEnName(e)+"-Regular").replace(/\s/g,"").slice(0,63),default:!0}],addFile(n),setSelectedFileUUID(n.uuid),setEditStatus(Status.CharacterList),total$1.value=0,loading$1.value=!0;let g=await(await fetch(base$1+"/templates/template1.json")).text();console.time("timer1");let y=await fetch(base$1+"/glyphs/stroke_glyphs_data_v7_v4.json"),k=await y.text();if(k){const L=JSON.parse(k);for(let ae=0;ae<L.constants.length;ae++)constantsMap.getByUUID(L.constants[ae].uuid)||constants.value.push(L.constants[ae]);L.glyphs.map(ae=>instanceGlyph(ae,{updateContoursAndPreview:!0,unitsPerEm:1e3,descender:-200,advanceWidth:1e3})).map(ae=>{addGlyph(ae,Status.StrokeGlyphList)})}if(y=await fetch(base$1+"/glyphs/radical_glyphs_data_v7_v5.json"),k=await y.text(),k){const L=JSON.parse(k);for(let ae=0;ae<L.constants.length;ae++)constantsMap.getByUUID(L.constants[ae].uuid)||constants.value.push(L.constants[ae]);L.glyphs.map(ae=>instanceGlyph(ae,{updateContoursAndPreview:!0,unitsPerEm:1e3,descender:-200,advanceWidth:1e3})).map(ae=>{addGlyph(ae,Status.RadicalGlyphList)})}if(y=await fetch(base$1+"/glyphs/comp_glyphs_data_v7_v4.json"),k=await y.text(),k){const L=JSON.parse(k);for(let ae=0;ae<L.constants.length;ae++)constantsMap.getByUUID(L.constants[ae].uuid)||constants.value.push(L.constants[ae]);L.glyphs.map(ae=>instanceGlyph(ae,{updateContoursAndPreview:!0,unitsPerEm:1e3,descender:-200,advanceWidth:1e3})).map(ae=>{addGlyph(ae,Status.CompGlyphList)})}console.timeEnd("timer1");let $=null;g&&($=JSON.parse(g));const V=$?$.template.length:0;if(total$1.value=V+(glyphs.value.length+stroke_glyphs.value.length+radical_glyphs.value.length+comp_glyphs.value.length)*2,loaded$1.value=0,$)for(let L=0;L<$.template.length;L++){loaded$1.value+=1;const z=$.template[L],j=parseLayout(z),ae=generateCharFile(j);addCharacterForCurrentFile(ae),addCharacterTemplate(generateCharacterTemplate(ae)),emitter.emit("renderPreviewCanvasByUUID",ae.uuid)}stroke_glyphs.value.map(L=>{addGlyphTemplate(L,Status.StrokeGlyphList)}),radical_glyphs.value.map(L=>{addGlyphTemplate(L,Status.RadicalGlyphList)}),comp_glyphs.value.map(L=>{addGlyphTemplate(L,Status.CompGlyphList)}),glyphs.value.map(L=>{addGlyphTemplate(L,Status.GlyphList)}),emitter.emit("renderPreviewCanvas"),emitter.emit("renderGlyphPreviewCanvas"),emitter.emit("renderStrokeGlyphPreviewCanvas"),emitter.emit("renderRadicalGlyphPreviewCanvas"),emitter.emit("renderCompGlyphPreviewCanvas")}},importTemplate3=async()=>{loaded$1.value=0,total$1.value=hei_strokes.length,loading$1.value=!0;const e=[];for(let n=0;n<hei_strokes.length;n++){const r=hei_strokes[n],{name:g}=r,y=genUUID(),k={uuid:y,type:"system",name:g,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},parameters:new ParametersMap([]),joints:[],style:"",script:""};e.push({uuid:y,name:g}),addGlyph(k,Status.StrokeGlyphList),addGlyphTemplate(k,Status.StrokeGlyphList)}for(let n=0;n<e.length;n++){const{uuid:r,name:g}=e[n];try{const k=await(await fetch(`/strokes/${g}.png`)).blob();await new Promise(($,V)=>{const L=new Image,z=URL.createObjectURL(k);L.onload=()=>{maxError.value=5,thumbnail(z,L,1e3);const j=[];for(let ae=0;ae<curvesComponents.value.length;ae++){const oe=curvesComponents.value[ae],re=oe.value.points;let ue=0,le=re[0];for(let de=1;de<re.length;de++){const he=re[de];ue+=Math.sqrt(Math.pow(he.x-le.x,2)+Math.pow(he.y-le.y,2)),le=he}ue>200&&j.push(oe)}addComponentsForGlyph(r,j),maxError.value=2,$(L)},L.onerror=V,L.src=z})}catch(y){throw console.error("Failed to fetch font image:",y),y}loaded$1.value++,loaded$1.value>=total$1.value&&(loading$1.value=!1,loaded$1.value=0,total$1.value=0)}for(let n=0;n<e.length;n++){const{uuid:r,name:g}=e[n],y=getGlyphByUUID(r),k=g,$={type:k,ox:0,oy:0,dynamicWeight:!1};y.skeleton=$;const V=hei_strokes.find(z=>z.name===k);if(V){const z=y.parameters.parameters;for(let j=0;j<V.params.length;j++){const ae=V.params[j];z.push({uuid:genUUID(),name:ae.name,type:ParameterType.Number,value:ae.default,min:ae.min||0,max:ae.max||1e3})}z.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:0,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]}),z.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:0,max:2})}const L=strokeFnMap[k];L&&L.instanceBasicGlyph(y),L.bindSkeletonGlyph(y),L.updateSkeletonListenerAfterBind(y._o),emitter.emit("renderStrokeGlyphPreviewCanvasByUUID",r)}loading$1.value=!1,setEditStatus(Status.StrokeGlyphList)},parseLayout=e=>{const{char:n,layout:r,data:g}=e;if(r===""){const y=g.indexOf(""),k=g.slice(2,y-1),$=g.slice(y+2,g.length-1);return{name:n,layout:r,left:parseData(k),right:parseData($)}}return{name:n,layout:r}},parseData=e=>{const n=e.split(","),r=n[0],g=Number(n[1]),y=Number(n[2]),k=Number(n[3]),$=Number(n[4]);return{glyph_name:r,x:g,y,w:k,h:$}},openPlayground=()=>{if(window.__TAURI_INTERNALS__){const e={url:`${location.origin}${location.pathname}#/playground`,width:1280,height:800,x:(screen.width-1280)/2,y:(screen.height-800)/2},n=new WebviewWindow("glyph-script",e);n.once("tauri://created",async()=>{console.log("webview created")}),n.once("tauri://error",function(r){console.log("error creating webview",r)})}else window.open(`${location.origin}${location.pathname}#/playground`,"playground",`popup,width=1280,height=800,left=${(screen.width-1280)/2}`)},tauri_handlers={"create-file":createFile,"open-file":openFile_tauri,"save-file":saveFile_tauri,"save-as":saveAs_tauri,undo,redo,cut,copy,paste,delete:del,"import-font-file":importFont_tauri,"import-templates-file":importTemplates,"import-glyphs":importGlyphs_tauri,"import-pic":importPic_tauri,"import-svg":importSVG_tauri,"export-font-file":showExportFontDialog_tauri,"export-var-font-file":showExportVarFontDialog_tauri,"export-color-font":showExportColorFontDialog_tauri,"export-glyphs":exportGlyphs_tauri,"export-jpeg":exportJPEG_tauri,"export-png":exportPNG_tauri,"export-svg":exportSVG_tauri,"add-character":addCharacter,"add-icon":addIcon,"font-settings":fontSettings,"preference-settings":preferenceSettings,"language-settings":languageSettings,"template-1":importTemplate1,"template-2":importTemplate2,"template-3":importTemplate3,"template-4":importTemplate4,"template-5":importTemplate5,"template-6":importTemplate6,"template-7":importTemplate7,"template-8":importTemplate8,"template-digits":importTemplateDigits,"template-letters":importTemplateLetters,remove_overlap:removeOverlap,"format-all-characters":formatAllCharacters,"format-current-character":formatCurrentCharacter},web_handlers={"create-file":createFile,"open-file":openFile,"save-file":saveFile_web,"clear-cache":clearCache,"sync-data":syncData,"save-as-json":exportJSON,undo,redo,cut,copy,paste,delete:del,"import-font-file":importFont,"import-templates-file":importTemplates,"import-glyphs":importGlyphs,"import-pic":importPic,"import-svg":importSVG,"export-font-file":showExportFontDialog,"export-var-font-file":showExportVarFontDialog,"export-color-font":showExportColorFontDialog,"export-glyphs":exportGlyphs,"export-jpeg":exportJPEG,"export-png":exportPNG,"export-svg":exportSVG,"add-character":addCharacter,"add-icon":addIcon,"font-settings":fontSettings,"preference-settings":preferenceSettings,"language-settings":languageSettings,"template-1":importTemplate1,"template-2":importTemplate2,"template-3":importTemplate3,"template-4":importTemplate4,"template-5":importTemplate5,"template-6":importTemplate6,"template-7":importTemplate7,"template-8":importTemplate8,"template-digits":importTemplateDigits,"template-letters":importTemplateLetters,remove_overlap:removeOverlap,"format-all-characters":formatAllCharacters,"format-current-character":formatCurrentCharacter},editStatusToString=e=>editStatus.value===Status.Edit?"edit":editStatus.value===Status.Glyph?"glyph":editStatus.value===Status.Pic?"pic":"list";watch(editStatus,()=>{ENV.value==="tauri"&&invoke("toggle_menu_disabled",{editStatus:editStatusToString(editStatus.value)})});const initTauri=()=>{if(window.__TAURI_INTERNALS__){ENV.value="tauri",invoke("toggle_menu_disabled",{editStatus:editStatusToString(editStatus.value)});const e=Object.keys(tauri_handlers);for(let n=0;n<e.length;n++){const r=e[n];listen(r,g=>{tauri_handlers[r]()})}}},_sfc_main=defineComponent({__name:"App",setup(e){initTauri();let n=document.createElement("canvas");return paper.setup(n),(r,g)=>(openBlock(),createBlock(unref(RouterView)))}});function ownKeys$1(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);n&&(g=g.filter(function(y){return Object.getOwnPropertyDescriptor(e,y).enumerable})),r.push.apply(r,g)}return r}function _objectSpread2$1(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$1(Object(r),!0).forEach(function(g){_defineProperty$1(e,g,r[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach(function(g){Object.defineProperty(e,g,Object.getOwnPropertyDescriptor(r,g))})}return e}function _typeof$1(e){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$1(e)}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var r=0;r<n.length;r++){var g=n[r];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(e,g.key,g)}}function _createClass(e,n,r){return n&&_defineProperties(e.prototype,n),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty$1(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function _slicedToArray(e,n){return _arrayWithHoles(e)||_iterableToArrayLimit(e,n)||_unsupportedIterableToArray(e,n)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _iterableToArrayLimit(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var g=[],y=!0,k=!1,$,V;try{for(r=r.call(e);!(y=($=r.next()).done)&&(g.push($.value),!(n&&g.length===n));y=!0);}catch(L){k=!0,V=L}finally{try{!y&&r.return!=null&&r.return()}finally{if(k)throw V}}return g}}function _unsupportedIterableToArray(e,n){if(e){if(typeof e=="string")return _arrayLikeToArray(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,n)}}function _arrayLikeToArray(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,g=new Array(n);r<n;r++)g[r]=e[r];return g}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var noop=function e(){},_WINDOW={},_DOCUMENT={},_MUTATION_OBSERVER=null,_PERFORMANCE={mark:noop,measure:noop};try{typeof window<"u"&&(_WINDOW=window),typeof document<"u"&&(_DOCUMENT=document),typeof MutationObserver<"u"&&(_MUTATION_OBSERVER=MutationObserver),typeof performance<"u"&&(_PERFORMANCE=performance)}catch(e){}var _ref=_WINDOW.navigator||{},_ref$userAgent=_ref.userAgent,userAgent=_ref$userAgent===void 0?"":_ref$userAgent,WINDOW=_WINDOW,DOCUMENT=_DOCUMENT,MUTATION_OBSERVER=_MUTATION_OBSERVER,PERFORMANCE=_PERFORMANCE;WINDOW.document;var IS_DOM=!!DOCUMENT.documentElement&&!!DOCUMENT.head&&typeof DOCUMENT.addEventListener=="function"&&typeof DOCUMENT.createElement=="function",IS_IE=~userAgent.indexOf("MSIE")||~userAgent.indexOf("Trident/"),_familyProxy,_familyProxy2,_familyProxy3,_familyProxy4,_familyProxy5,NAMESPACE_IDENTIFIER="___FONT_AWESOME___",UNITS_IN_GRID=16,DEFAULT_CSS_PREFIX="fa",DEFAULT_REPLACEMENT_CLASS="svg-inline--fa",DATA_FA_I2SVG="data-fa-i2svg",DATA_FA_PSEUDO_ELEMENT="data-fa-pseudo-element",DATA_FA_PSEUDO_ELEMENT_PENDING="data-fa-pseudo-element-pending",DATA_PREFIX="data-prefix",DATA_ICON="data-icon",HTML_CLASS_I2SVG_BASE_CLASS="fontawesome-i2svg",MUTATION_APPROACH_ASYNC="async",TAGNAMES_TO_SKIP_FOR_PSEUDOELEMENTS=["HTML","HEAD","STYLE","SCRIPT"],PRODUCTION$1=function(){try{return!0}catch{return!1}}(),FAMILY_CLASSIC="classic",FAMILY_SHARP="sharp",FAMILIES=[FAMILY_CLASSIC,FAMILY_SHARP];function familyProxy(e){return new Proxy(e,{get:function(r,g){return g in r?r[g]:r[FAMILY_CLASSIC]}})}var PREFIX_TO_STYLE=familyProxy((_familyProxy={},_defineProperty$1(_familyProxy,FAMILY_CLASSIC,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),_defineProperty$1(_familyProxy,FAMILY_SHARP,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light"}),_familyProxy)),STYLE_TO_PREFIX=familyProxy((_familyProxy2={},_defineProperty$1(_familyProxy2,FAMILY_CLASSIC,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),_defineProperty$1(_familyProxy2,FAMILY_SHARP,{solid:"fass",regular:"fasr",light:"fasl"}),_familyProxy2)),PREFIX_TO_LONG_STYLE=familyProxy((_familyProxy3={},_defineProperty$1(_familyProxy3,FAMILY_CLASSIC,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),_defineProperty$1(_familyProxy3,FAMILY_SHARP,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light"}),_familyProxy3)),LONG_STYLE_TO_PREFIX=familyProxy((_familyProxy4={},_defineProperty$1(_familyProxy4,FAMILY_CLASSIC,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),_defineProperty$1(_familyProxy4,FAMILY_SHARP,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl"}),_familyProxy4)),ICON_SELECTION_SYNTAX_PATTERN=/fa(s|r|l|t|d|b|k|ss|sr|sl)?[\-\ ]/,LAYERS_TEXT_CLASSNAME="fa-layers-text",FONT_FAMILY_PATTERN=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,FONT_WEIGHT_TO_PREFIX=familyProxy((_familyProxy5={},_defineProperty$1(_familyProxy5,FAMILY_CLASSIC,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),_defineProperty$1(_familyProxy5,FAMILY_SHARP,{900:"fass",400:"fasr",300:"fasl"}),_familyProxy5)),oneToTen=[1,2,3,4,5,6,7,8,9,10],oneToTwenty=oneToTen.concat([11,12,13,14,15,16,17,18,19,20]),ATTRIBUTES_WATCHED_FOR_MUTATION=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],DUOTONE_CLASSES={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},prefixes=new Set;Object.keys(STYLE_TO_PREFIX[FAMILY_CLASSIC]).map(prefixes.add.bind(prefixes));Object.keys(STYLE_TO_PREFIX[FAMILY_SHARP]).map(prefixes.add.bind(prefixes));var RESERVED_CLASSES=[].concat(FAMILIES,_toConsumableArray(prefixes),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",DUOTONE_CLASSES.GROUP,DUOTONE_CLASSES.SWAP_OPACITY,DUOTONE_CLASSES.PRIMARY,DUOTONE_CLASSES.SECONDARY]).concat(oneToTen.map(function(e){return"".concat(e,"x")})).concat(oneToTwenty.map(function(e){return"w-".concat(e)})),initial=WINDOW.FontAwesomeConfig||{};function getAttrConfig(e){var n=DOCUMENT.querySelector("script["+e+"]");if(n)return n.getAttribute(e)}function coerce(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(DOCUMENT&&typeof DOCUMENT.querySelector=="function"){var attrs=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];attrs.forEach(function(e){var n=_slicedToArray(e,2),r=n[0],g=n[1],y=coerce(getAttrConfig(r));y!=null&&(initial[g]=y)})}var _default={styleDefault:"solid",familyDefault:"classic",cssPrefix:DEFAULT_CSS_PREFIX,replacementClass:DEFAULT_REPLACEMENT_CLASS,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};initial.familyPrefix&&(initial.cssPrefix=initial.familyPrefix);var _config=_objectSpread2$1(_objectSpread2$1({},_default),initial);_config.autoReplaceSvg||(_config.observeMutations=!1);var config={};Object.keys(_default).forEach(function(e){Object.defineProperty(config,e,{enumerable:!0,set:function(r){_config[e]=r,_onChangeCb.forEach(function(g){return g(config)})},get:function(){return _config[e]}})});Object.defineProperty(config,"familyPrefix",{enumerable:!0,set:function e(n){_config.cssPrefix=n,_onChangeCb.forEach(function(r){return r(config)})},get:function e(){return _config.cssPrefix}});WINDOW.FontAwesomeConfig=config;var _onChangeCb=[];function onChange(e){return _onChangeCb.push(e),function(){_onChangeCb.splice(_onChangeCb.indexOf(e),1)}}var d=UNITS_IN_GRID,meaninglessTransform={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function insertCss(e){if(!(!e||!IS_DOM)){var n=DOCUMENT.createElement("style");n.setAttribute("type","text/css"),n.innerHTML=e;for(var r=DOCUMENT.head.childNodes,g=null,y=r.length-1;y>-1;y--){var k=r[y],$=(k.tagName||"").toUpperCase();["STYLE","LINK"].indexOf($)>-1&&(g=k)}return DOCUMENT.head.insertBefore(n,g),e}}var idPool="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function nextUniqueId(){for(var e=12,n="";e-- >0;)n+=idPool[Math.random()*62|0];return n}function toArray(e){for(var n=[],r=(e||[]).length>>>0;r--;)n[r]=e[r];return n}function classArray(e){return e.classList?toArray(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(n){return n})}function htmlEscape(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function joinAttributes(e){return Object.keys(e||{}).reduce(function(n,r){return n+"".concat(r,'="').concat(htmlEscape(e[r]),'" ')},"").trim()}function joinStyles(e){return Object.keys(e||{}).reduce(function(n,r){return n+"".concat(r,": ").concat(e[r].trim(),";")},"")}function transformIsMeaningful(e){return e.size!==meaninglessTransform.size||e.x!==meaninglessTransform.x||e.y!==meaninglessTransform.y||e.rotate!==meaninglessTransform.rotate||e.flipX||e.flipY}function transformForSvg(e){var n=e.transform,r=e.containerWidth,g=e.iconWidth,y={transform:"translate(".concat(r/2," 256)")},k="translate(".concat(n.x*32,", ").concat(n.y*32,") "),$="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),V="rotate(".concat(n.rotate," 0 0)"),L={transform:"".concat(k," ").concat($," ").concat(V)},z={transform:"translate(".concat(g/2*-1," -256)")};return{outer:y,inner:L,path:z}}function transformForCss(e){var n=e.transform,r=e.width,g=r===void 0?UNITS_IN_GRID:r,y=e.height,k=y===void 0?UNITS_IN_GRID:y,$=e.startCentered,V=$===void 0?!1:$,L="";return V&&IS_IE?L+="translate(".concat(n.x/d-g/2,"em, ").concat(n.y/d-k/2,"em) "):V?L+="translate(calc(-50% + ".concat(n.x/d,"em), calc(-50% + ").concat(n.y/d,"em)) "):L+="translate(".concat(n.x/d,"em, ").concat(n.y/d,"em) "),L+="scale(".concat(n.size/d*(n.flipX?-1:1),", ").concat(n.size/d*(n.flipY?-1:1),") "),L+="rotate(".concat(n.rotate,"deg) "),L}var baseStyles=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function css(){var e=DEFAULT_CSS_PREFIX,n=DEFAULT_REPLACEMENT_CLASS,r=config.cssPrefix,g=config.replacementClass,y=baseStyles;if(r!==e||g!==n){var k=new RegExp("\\.".concat(e,"\\-"),"g"),$=new RegExp("\\--".concat(e,"\\-"),"g"),V=new RegExp("\\.".concat(n),"g");y=y.replace(k,".".concat(r,"-")).replace($,"--".concat(r,"-")).replace(V,".".concat(g))}return y}var _cssInserted=!1;function ensureCss(){config.autoAddCss&&!_cssInserted&&(insertCss(css()),_cssInserted=!0)}var InjectCSS={mixout:function e(){return{dom:{css,insertCss:ensureCss}}},hooks:function e(){return{beforeDOMElementCreation:function(){ensureCss()},beforeI2svg:function(){ensureCss()}}}},w=WINDOW||{};w[NAMESPACE_IDENTIFIER]||(w[NAMESPACE_IDENTIFIER]={});w[NAMESPACE_IDENTIFIER].styles||(w[NAMESPACE_IDENTIFIER].styles={});w[NAMESPACE_IDENTIFIER].hooks||(w[NAMESPACE_IDENTIFIER].hooks={});w[NAMESPACE_IDENTIFIER].shims||(w[NAMESPACE_IDENTIFIER].shims=[]);var namespace=w[NAMESPACE_IDENTIFIER],functions=[],listener=function e(){DOCUMENT.removeEventListener("DOMContentLoaded",e),loaded=1,functions.map(function(n){return n()})},loaded=!1;IS_DOM&&(loaded=(DOCUMENT.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(DOCUMENT.readyState),loaded||DOCUMENT.addEventListener("DOMContentLoaded",listener));function domready(e){IS_DOM&&(loaded?setTimeout(e,0):functions.push(e))}function toHtml(e){var n=e.tag,r=e.attributes,g=r===void 0?{}:r,y=e.children,k=y===void 0?[]:y;return typeof e=="string"?htmlEscape(e):"<".concat(n," ").concat(joinAttributes(g),">").concat(k.map(toHtml).join(""),"</").concat(n,">")}function iconFromMapping(e,n,r){if(e&&e[n]&&e[n][r])return{prefix:n,iconName:r,icon:e[n][r]}}var bindInternal4=function e(n,r){return function(g,y,k,$){return n.call(r,g,y,k,$)}},reduce=function e(n,r,g,y){var k=Object.keys(n),$=k.length,V=y!==void 0?bindInternal4(r,y):r,L,z,j;for(g===void 0?(L=1,j=n[k[0]]):(L=0,j=g);L<$;L++)z=k[L],j=V(j,n[z],z,n);return j};function ucs2decode(e){for(var n=[],r=0,g=e.length;r<g;){var y=e.charCodeAt(r++);if(y>=55296&&y<=56319&&r<g){var k=e.charCodeAt(r++);(k&64512)==56320?n.push(((y&1023)<<10)+(k&1023)+65536):(n.push(y),r--)}else n.push(y)}return n}function toHex(e){var n=ucs2decode(e);return n.length===1?n[0].toString(16):null}function codePointAt(e,n){var r=e.length,g=e.charCodeAt(n),y;return g>=55296&&g<=56319&&r>n+1&&(y=e.charCodeAt(n+1),y>=56320&&y<=57343)?(g-55296)*1024+y-56320+65536:g}function normalizeIcons(e){return Object.keys(e).reduce(function(n,r){var g=e[r],y=!!g.icon;return y?n[g.iconName]=g.icon:n[r]=g,n},{})}function defineIcons(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},g=r.skipHooks,y=g===void 0?!1:g,k=normalizeIcons(n);typeof namespace.hooks.addPack=="function"&&!y?namespace.hooks.addPack(e,normalizeIcons(n)):namespace.styles[e]=_objectSpread2$1(_objectSpread2$1({},namespace.styles[e]||{}),k),e==="fas"&&defineIcons("fa",n)}var _LONG_STYLE,_PREFIXES,_PREFIXES_FOR_FAMILY,styles=namespace.styles,shims=namespace.shims,LONG_STYLE=(_LONG_STYLE={},_defineProperty$1(_LONG_STYLE,FAMILY_CLASSIC,Object.values(PREFIX_TO_LONG_STYLE[FAMILY_CLASSIC])),_defineProperty$1(_LONG_STYLE,FAMILY_SHARP,Object.values(PREFIX_TO_LONG_STYLE[FAMILY_SHARP])),_LONG_STYLE),_defaultUsablePrefix=null,_byUnicode={},_byLigature={},_byOldName={},_byOldUnicode={},_byAlias={},PREFIXES=(_PREFIXES={},_defineProperty$1(_PREFIXES,FAMILY_CLASSIC,Object.keys(PREFIX_TO_STYLE[FAMILY_CLASSIC])),_defineProperty$1(_PREFIXES,FAMILY_SHARP,Object.keys(PREFIX_TO_STYLE[FAMILY_SHARP])),_PREFIXES);function isReserved(e){return~RESERVED_CLASSES.indexOf(e)}function getIconName(e,n){var r=n.split("-"),g=r[0],y=r.slice(1).join("-");return g===e&&y!==""&&!isReserved(y)?y:null}var build=function e(){var n=function(k){return reduce(styles,function($,V,L){return $[L]=reduce(V,k,{}),$},{})};_byUnicode=n(function(y,k,$){if(k[3]&&(y[k[3]]=$),k[2]){var V=k[2].filter(function(L){return typeof L=="number"});V.forEach(function(L){y[L.toString(16)]=$})}return y}),_byLigature=n(function(y,k,$){if(y[$]=$,k[2]){var V=k[2].filter(function(L){return typeof L=="string"});V.forEach(function(L){y[L]=$})}return y}),_byAlias=n(function(y,k,$){var V=k[2];return y[$]=$,V.forEach(function(L){y[L]=$}),y});var r="far"in styles||config.autoFetchSvg,g=reduce(shims,function(y,k){var $=k[0],V=k[1],L=k[2];return V==="far"&&!r&&(V="fas"),typeof $=="string"&&(y.names[$]={prefix:V,iconName:L}),typeof $=="number"&&(y.unicodes[$.toString(16)]={prefix:V,iconName:L}),y},{names:{},unicodes:{}});_byOldName=g.names,_byOldUnicode=g.unicodes,_defaultUsablePrefix=getCanonicalPrefix(config.styleDefault,{family:config.familyDefault})};onChange(function(e){_defaultUsablePrefix=getCanonicalPrefix(e.styleDefault,{family:config.familyDefault})});build();function byUnicode(e,n){return(_byUnicode[e]||{})[n]}function byLigature(e,n){return(_byLigature[e]||{})[n]}function byAlias(e,n){return(_byAlias[e]||{})[n]}function byOldName(e){return _byOldName[e]||{prefix:null,iconName:null}}function byOldUnicode(e){var n=_byOldUnicode[e],r=byUnicode("fas",e);return n||(r?{prefix:"fas",iconName:r}:null)||{prefix:null,iconName:null}}function getDefaultUsablePrefix(){return _defaultUsablePrefix}var emptyCanonicalIcon=function e(){return{prefix:null,iconName:null,rest:[]}};function getCanonicalPrefix(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.family,g=r===void 0?FAMILY_CLASSIC:r,y=PREFIX_TO_STYLE[g][e],k=STYLE_TO_PREFIX[g][e]||STYLE_TO_PREFIX[g][y],$=e in namespace.styles?e:null;return k||$||null}var PREFIXES_FOR_FAMILY=(_PREFIXES_FOR_FAMILY={},_defineProperty$1(_PREFIXES_FOR_FAMILY,FAMILY_CLASSIC,Object.keys(PREFIX_TO_LONG_STYLE[FAMILY_CLASSIC])),_defineProperty$1(_PREFIXES_FOR_FAMILY,FAMILY_SHARP,Object.keys(PREFIX_TO_LONG_STYLE[FAMILY_SHARP])),_PREFIXES_FOR_FAMILY);function getCanonicalIcon(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=r.skipLookups,y=g===void 0?!1:g,k=(n={},_defineProperty$1(n,FAMILY_CLASSIC,"".concat(config.cssPrefix,"-").concat(FAMILY_CLASSIC)),_defineProperty$1(n,FAMILY_SHARP,"".concat(config.cssPrefix,"-").concat(FAMILY_SHARP)),n),$=null,V=FAMILY_CLASSIC;(e.includes(k[FAMILY_CLASSIC])||e.some(function(z){return PREFIXES_FOR_FAMILY[FAMILY_CLASSIC].includes(z)}))&&(V=FAMILY_CLASSIC),(e.includes(k[FAMILY_SHARP])||e.some(function(z){return PREFIXES_FOR_FAMILY[FAMILY_SHARP].includes(z)}))&&(V=FAMILY_SHARP);var L=e.reduce(function(z,j){var ae=getIconName(config.cssPrefix,j);if(styles[j]?(j=LONG_STYLE[V].includes(j)?LONG_STYLE_TO_PREFIX[V][j]:j,$=j,z.prefix=j):PREFIXES[V].indexOf(j)>-1?($=j,z.prefix=getCanonicalPrefix(j,{family:V})):ae?z.iconName=ae:j!==config.replacementClass&&j!==k[FAMILY_CLASSIC]&&j!==k[FAMILY_SHARP]&&z.rest.push(j),!y&&z.prefix&&z.iconName){var oe=$==="fa"?byOldName(z.iconName):{},re=byAlias(z.prefix,z.iconName);oe.prefix&&($=null),z.iconName=oe.iconName||re||z.iconName,z.prefix=oe.prefix||z.prefix,z.prefix==="far"&&!styles.far&&styles.fas&&!config.autoFetchSvg&&(z.prefix="fas")}return z},emptyCanonicalIcon());return(e.includes("fa-brands")||e.includes("fab"))&&(L.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(L.prefix="fad"),!L.prefix&&V===FAMILY_SHARP&&(styles.fass||config.autoFetchSvg)&&(L.prefix="fass",L.iconName=byAlias(L.prefix,L.iconName)||L.iconName),(L.prefix==="fa"||$==="fa")&&(L.prefix=getDefaultUsablePrefix()||"fas"),L}var Library=function(){function e(){_classCallCheck(this,e),this.definitions={}}return _createClass(e,[{key:"add",value:function(){for(var r=this,g=arguments.length,y=new Array(g),k=0;k<g;k++)y[k]=arguments[k];var $=y.reduce(this._pullDefinitions,{});Object.keys($).forEach(function(V){r.definitions[V]=_objectSpread2$1(_objectSpread2$1({},r.definitions[V]||{}),$[V]),defineIcons(V,$[V]);var L=PREFIX_TO_LONG_STYLE[FAMILY_CLASSIC][V];L&&defineIcons(L,$[V]),build()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(r,g){var y=g.prefix&&g.iconName&&g.icon?{0:g}:g;return Object.keys(y).map(function(k){var $=y[k],V=$.prefix,L=$.iconName,z=$.icon,j=z[2];r[V]||(r[V]={}),j.length>0&&j.forEach(function(ae){typeof ae=="string"&&(r[V][ae]=z)}),r[V][L]=z}),r}}]),e}(),_plugins=[],_hooks={},providers={},defaultProviderKeys=Object.keys(providers);function registerPlugins(e,n){var r=n.mixoutsTo;return _plugins=e,_hooks={},Object.keys(providers).forEach(function(g){defaultProviderKeys.indexOf(g)===-1&&delete providers[g]}),_plugins.forEach(function(g){var y=g.mixout?g.mixout():{};if(Object.keys(y).forEach(function($){typeof y[$]=="function"&&(r[$]=y[$]),_typeof$1(y[$])==="object"&&Object.keys(y[$]).forEach(function(V){r[$]||(r[$]={}),r[$][V]=y[$][V]})}),g.hooks){var k=g.hooks();Object.keys(k).forEach(function($){_hooks[$]||(_hooks[$]=[]),_hooks[$].push(k[$])})}g.provides&&g.provides(providers)}),r}function chainHooks(e,n){for(var r=arguments.length,g=new Array(r>2?r-2:0),y=2;y<r;y++)g[y-2]=arguments[y];var k=_hooks[e]||[];return k.forEach(function($){n=$.apply(null,[n].concat(g))}),n}function callHooks(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),g=1;g<n;g++)r[g-1]=arguments[g];var y=_hooks[e]||[];y.forEach(function(k){k.apply(null,r)})}function callProvided(){var e=arguments[0],n=Array.prototype.slice.call(arguments,1);return providers[e]?providers[e].apply(null,n):void 0}function findIconDefinition(e){e.prefix==="fa"&&(e.prefix="fas");var n=e.iconName,r=e.prefix||getDefaultUsablePrefix();if(n)return n=byAlias(r,n)||n,iconFromMapping(library.definitions,r,n)||iconFromMapping(namespace.styles,r,n)}var library=new Library,noAuto=function e(){config.autoReplaceSvg=!1,config.observeMutations=!1,callHooks("noAuto")},dom={i2svg:function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return IS_DOM?(callHooks("beforeI2svg",n),callProvided("pseudoElements2svg",n),callProvided("i2svg",n)):Promise.reject("Operation requires a DOM of some kind.")},watch:function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.autoReplaceSvgRoot;config.autoReplaceSvg===!1&&(config.autoReplaceSvg=!0),config.observeMutations=!0,domready(function(){autoReplace({autoReplaceSvgRoot:r}),callHooks("watch",n)})}},parse={icon:function e(n){if(n===null)return null;if(_typeof$1(n)==="object"&&n.prefix&&n.iconName)return{prefix:n.prefix,iconName:byAlias(n.prefix,n.iconName)||n.iconName};if(Array.isArray(n)&&n.length===2){var r=n[1].indexOf("fa-")===0?n[1].slice(3):n[1],g=getCanonicalPrefix(n[0]);return{prefix:g,iconName:byAlias(g,r)||r}}if(typeof n=="string"&&(n.indexOf("".concat(config.cssPrefix,"-"))>-1||n.match(ICON_SELECTION_SYNTAX_PATTERN))){var y=getCanonicalIcon(n.split(" "),{skipLookups:!0});return{prefix:y.prefix||getDefaultUsablePrefix(),iconName:byAlias(y.prefix,y.iconName)||y.iconName}}if(typeof n=="string"){var k=getDefaultUsablePrefix();return{prefix:k,iconName:byAlias(k,n)||n}}}},api={noAuto,config,dom,parse,library,findIconDefinition,toHtml},autoReplace=function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.autoReplaceSvgRoot,g=r===void 0?DOCUMENT:r;(Object.keys(namespace.styles).length>0||config.autoFetchSvg)&&IS_DOM&&config.autoReplaceSvg&&api.dom.i2svg({node:g})};function domVariants(e,n){return Object.defineProperty(e,"abstract",{get:n}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(g){return toHtml(g)})}}),Object.defineProperty(e,"node",{get:function(){if(IS_DOM){var g=DOCUMENT.createElement("div");return g.innerHTML=e.html,g.children}}}),e}function asIcon(e){var n=e.children,r=e.main,g=e.mask,y=e.attributes,k=e.styles,$=e.transform;if(transformIsMeaningful($)&&r.found&&!g.found){var V=r.width,L=r.height,z={x:V/L/2,y:.5};y.style=joinStyles(_objectSpread2$1(_objectSpread2$1({},k),{},{"transform-origin":"".concat(z.x+$.x/16,"em ").concat(z.y+$.y/16,"em")}))}return[{tag:"svg",attributes:y,children:n}]}function asSymbol(e){var n=e.prefix,r=e.iconName,g=e.children,y=e.attributes,k=e.symbol,$=k===!0?"".concat(n,"-").concat(config.cssPrefix,"-").concat(r):k;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:_objectSpread2$1(_objectSpread2$1({},y),{},{id:$}),children:g}]}]}function makeInlineSvgAbstract(e){var n=e.icons,r=n.main,g=n.mask,y=e.prefix,k=e.iconName,$=e.transform,V=e.symbol,L=e.title,z=e.maskId,j=e.titleId,ae=e.extra,oe=e.watchable,re=oe===void 0?!1:oe,ue=g.found?g:r,le=ue.width,de=ue.height,he=y==="fak",_e=[config.replacementClass,k?"".concat(config.cssPrefix,"-").concat(k):""].filter(function(Ue){return ae.classes.indexOf(Ue)===-1}).filter(function(Ue){return Ue!==""||!!Ue}).concat(ae.classes).join(" "),xe={children:[],attributes:_objectSpread2$1(_objectSpread2$1({},ae.attributes),{},{"data-prefix":y,"data-icon":k,class:_e,role:ae.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(le," ").concat(de)})},Ne=he&&!~ae.classes.indexOf("fa-fw")?{width:"".concat(le/de*16*.0625,"em")}:{};re&&(xe.attributes[DATA_FA_I2SVG]=""),L&&(xe.children.push({tag:"title",attributes:{id:xe.attributes["aria-labelledby"]||"title-".concat(j||nextUniqueId())},children:[L]}),delete xe.attributes.title);var $e=_objectSpread2$1(_objectSpread2$1({},xe),{},{prefix:y,iconName:k,main:r,mask:g,maskId:z,transform:$,symbol:V,styles:_objectSpread2$1(_objectSpread2$1({},Ne),ae.styles)}),Ce=g.found&&r.found?callProvided("generateAbstractMask",$e)||{children:[],attributes:{}}:callProvided("generateAbstractIcon",$e)||{children:[],attributes:{}},Ie=Ce.children,ze=Ce.attributes;return $e.children=Ie,$e.attributes=ze,V?asSymbol($e):asIcon($e)}function makeLayersTextAbstract(e){var n=e.content,r=e.width,g=e.height,y=e.transform,k=e.title,$=e.extra,V=e.watchable,L=V===void 0?!1:V,z=_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},$.attributes),k?{title:k}:{}),{},{class:$.classes.join(" ")});L&&(z[DATA_FA_I2SVG]="");var j=_objectSpread2$1({},$.styles);transformIsMeaningful(y)&&(j.transform=transformForCss({transform:y,startCentered:!0,width:r,height:g}),j["-webkit-transform"]=j.transform);var ae=joinStyles(j);ae.length>0&&(z.style=ae);var oe=[];return oe.push({tag:"span",attributes:z,children:[n]}),k&&oe.push({tag:"span",attributes:{class:"sr-only"},children:[k]}),oe}function makeLayersCounterAbstract(e){var n=e.content,r=e.title,g=e.extra,y=_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},g.attributes),r?{title:r}:{}),{},{class:g.classes.join(" ")}),k=joinStyles(g.styles);k.length>0&&(y.style=k);var $=[];return $.push({tag:"span",attributes:y,children:[n]}),r&&$.push({tag:"span",attributes:{class:"sr-only"},children:[r]}),$}var styles$1=namespace.styles;function asFoundIcon(e){var n=e[0],r=e[1],g=e.slice(4),y=_slicedToArray(g,1),k=y[0],$=null;return Array.isArray(k)?$={tag:"g",attributes:{class:"".concat(config.cssPrefix,"-").concat(DUOTONE_CLASSES.GROUP)},children:[{tag:"path",attributes:{class:"".concat(config.cssPrefix,"-").concat(DUOTONE_CLASSES.SECONDARY),fill:"currentColor",d:k[0]}},{tag:"path",attributes:{class:"".concat(config.cssPrefix,"-").concat(DUOTONE_CLASSES.PRIMARY),fill:"currentColor",d:k[1]}}]}:$={tag:"path",attributes:{fill:"currentColor",d:k}},{found:!0,width:n,height:r,icon:$}}var missingIconResolutionMixin={found:!1,width:512,height:512};function maybeNotifyMissing(e,n){!PRODUCTION$1&&!config.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(n,'" is missing.'))}function findIcon(e,n){var r=n;return n==="fa"&&config.styleDefault!==null&&(n=getDefaultUsablePrefix()),new Promise(function(g,y){if(callProvided("missingIconAbstract"),r==="fa"){var k=byOldName(e)||{};e=k.iconName||e,n=k.prefix||n}if(e&&n&&styles$1[n]&&styles$1[n][e]){var $=styles$1[n][e];return g(asFoundIcon($))}maybeNotifyMissing(e,n),g(_objectSpread2$1(_objectSpread2$1({},missingIconResolutionMixin),{},{icon:config.showMissingIcons&&e?callProvided("missingIconAbstract")||{}:{}}))})}var noop$1=function e(){},p=config.measurePerformance&&PERFORMANCE&&PERFORMANCE.mark&&PERFORMANCE.measure?PERFORMANCE:{mark:noop$1,measure:noop$1},preamble='FA "6.4.2"',begin=function e(n){return p.mark("".concat(preamble," ").concat(n," begins")),function(){return end(n)}},end=function e(n){p.mark("".concat(preamble," ").concat(n," ends")),p.measure("".concat(preamble," ").concat(n),"".concat(preamble," ").concat(n," begins"),"".concat(preamble," ").concat(n," ends"))},perf={begin,end},noop$2=function e(){};function isWatched(e){var n=e.getAttribute?e.getAttribute(DATA_FA_I2SVG):null;return typeof n=="string"}function hasPrefixAndIcon(e){var n=e.getAttribute?e.getAttribute(DATA_PREFIX):null,r=e.getAttribute?e.getAttribute(DATA_ICON):null;return n&&r}function hasBeenReplaced(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(config.replacementClass)}function getMutator(){if(config.autoReplaceSvg===!0)return mutators.replace;var e=mutators[config.autoReplaceSvg];return e||mutators.replace}function createElementNS(e){return DOCUMENT.createElementNS("http://www.w3.org/2000/svg",e)}function createElement(e){return DOCUMENT.createElement(e)}function convertSVG(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.ceFn,g=r===void 0?e.tag==="svg"?createElementNS:createElement:r;if(typeof e=="string")return DOCUMENT.createTextNode(e);var y=g(e.tag);Object.keys(e.attributes||[]).forEach(function($){y.setAttribute($,e.attributes[$])});var k=e.children||[];return k.forEach(function($){y.appendChild(convertSVG($,{ceFn:g}))}),y}function nodeAsComment(e){var n=" ".concat(e.outerHTML," ");return n="".concat(n,"Font Awesome fontawesome.com "),n}var mutators={replace:function e(n){var r=n[0];if(r.parentNode)if(n[1].forEach(function(y){r.parentNode.insertBefore(convertSVG(y),r)}),r.getAttribute(DATA_FA_I2SVG)===null&&config.keepOriginalSource){var g=DOCUMENT.createComment(nodeAsComment(r));r.parentNode.replaceChild(g,r)}else r.remove()},nest:function e(n){var r=n[0],g=n[1];if(~classArray(r).indexOf(config.replacementClass))return mutators.replace(n);var y=new RegExp("".concat(config.cssPrefix,"-.*"));if(delete g[0].attributes.id,g[0].attributes.class){var k=g[0].attributes.class.split(" ").reduce(function(V,L){return L===config.replacementClass||L.match(y)?V.toSvg.push(L):V.toNode.push(L),V},{toNode:[],toSvg:[]});g[0].attributes.class=k.toSvg.join(" "),k.toNode.length===0?r.removeAttribute("class"):r.setAttribute("class",k.toNode.join(" "))}var $=g.map(function(V){return toHtml(V)}).join(`
`);r.setAttribute(DATA_FA_I2SVG,""),r.innerHTML=$}};function performOperationSync(e){e()}function perform(e,n){var r=typeof n=="function"?n:noop$2;if(e.length===0)r();else{var g=performOperationSync;config.mutateApproach===MUTATION_APPROACH_ASYNC&&(g=WINDOW.requestAnimationFrame||performOperationSync),g(function(){var y=getMutator(),k=perf.begin("mutate");e.map(y),k(),r()})}}var disabled=!1;function disableObservation(){disabled=!0}function enableObservation(){disabled=!1}var mo=null;function observe(e){if(MUTATION_OBSERVER&&config.observeMutations){var n=e.treeCallback,r=n===void 0?noop$2:n,g=e.nodeCallback,y=g===void 0?noop$2:g,k=e.pseudoElementsCallback,$=k===void 0?noop$2:k,V=e.observeMutationsRoot,L=V===void 0?DOCUMENT:V;mo=new MUTATION_OBSERVER(function(z){if(!disabled){var j=getDefaultUsablePrefix();toArray(z).forEach(function(ae){if(ae.type==="childList"&&ae.addedNodes.length>0&&!isWatched(ae.addedNodes[0])&&(config.searchPseudoElements&&$(ae.target),r(ae.target)),ae.type==="attributes"&&ae.target.parentNode&&config.searchPseudoElements&&$(ae.target.parentNode),ae.type==="attributes"&&isWatched(ae.target)&&~ATTRIBUTES_WATCHED_FOR_MUTATION.indexOf(ae.attributeName))if(ae.attributeName==="class"&&hasPrefixAndIcon(ae.target)){var oe=getCanonicalIcon(classArray(ae.target)),re=oe.prefix,ue=oe.iconName;ae.target.setAttribute(DATA_PREFIX,re||j),ue&&ae.target.setAttribute(DATA_ICON,ue)}else hasBeenReplaced(ae.target)&&y(ae.target)})}}),IS_DOM&&mo.observe(L,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function disconnect(){mo&&mo.disconnect()}function styleParser(e){var n=e.getAttribute("style"),r=[];return n&&(r=n.split(";").reduce(function(g,y){var k=y.split(":"),$=k[0],V=k.slice(1);return $&&V.length>0&&(g[$]=V.join(":").trim()),g},{})),r}function classParser(e){var n=e.getAttribute("data-prefix"),r=e.getAttribute("data-icon"),g=e.innerText!==void 0?e.innerText.trim():"",y=getCanonicalIcon(classArray(e));return y.prefix||(y.prefix=getDefaultUsablePrefix()),n&&r&&(y.prefix=n,y.iconName=r),y.iconName&&y.prefix||(y.prefix&&g.length>0&&(y.iconName=byLigature(y.prefix,e.innerText)||byUnicode(y.prefix,toHex(e.innerText))),!y.iconName&&config.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(y.iconName=e.firstChild.data)),y}function attributesParser(e){var n=toArray(e.attributes).reduce(function(y,k){return y.name!=="class"&&y.name!=="style"&&(y[k.name]=k.value),y},{}),r=e.getAttribute("title"),g=e.getAttribute("data-fa-title-id");return config.autoA11y&&(r?n["aria-labelledby"]="".concat(config.replacementClass,"-title-").concat(g||nextUniqueId()):(n["aria-hidden"]="true",n.focusable="false")),n}function blankMeta(){return{iconName:null,title:null,titleId:null,prefix:null,transform:meaninglessTransform,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function parseMeta(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},r=classParser(e),g=r.iconName,y=r.prefix,k=r.rest,$=attributesParser(e),V=chainHooks("parseNodeAttributes",{},e),L=n.styleParser?styleParser(e):[];return _objectSpread2$1({iconName:g,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:y,transform:meaninglessTransform,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:k,styles:L,attributes:$}},V)}var styles$2=namespace.styles;function generateMutation(e){var n=config.autoReplaceSvg==="nest"?parseMeta(e,{styleParser:!1}):parseMeta(e);return~n.extra.classes.indexOf(LAYERS_TEXT_CLASSNAME)?callProvided("generateLayersText",e,n):callProvided("generateSvgReplacementMutation",e,n)}var knownPrefixes=new Set;FAMILIES.map(function(e){knownPrefixes.add("fa-".concat(e))});Object.keys(PREFIX_TO_STYLE[FAMILY_CLASSIC]).map(knownPrefixes.add.bind(knownPrefixes));Object.keys(PREFIX_TO_STYLE[FAMILY_SHARP]).map(knownPrefixes.add.bind(knownPrefixes));knownPrefixes=_toConsumableArray(knownPrefixes);function onTree(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!IS_DOM)return Promise.resolve();var r=DOCUMENT.documentElement.classList,g=function(ae){return r.add("".concat(HTML_CLASS_I2SVG_BASE_CLASS,"-").concat(ae))},y=function(ae){return r.remove("".concat(HTML_CLASS_I2SVG_BASE_CLASS,"-").concat(ae))},k=config.autoFetchSvg?knownPrefixes:FAMILIES.map(function(j){return"fa-".concat(j)}).concat(Object.keys(styles$2));k.includes("fa")||k.push("fa");var $=[".".concat(LAYERS_TEXT_CLASSNAME,":not([").concat(DATA_FA_I2SVG,"])")].concat(k.map(function(j){return".".concat(j,":not([").concat(DATA_FA_I2SVG,"])")})).join(", ");if($.length===0)return Promise.resolve();var V=[];try{V=toArray(e.querySelectorAll($))}catch{}if(V.length>0)g("pending"),y("complete");else return Promise.resolve();var L=perf.begin("onTree"),z=V.reduce(function(j,ae){try{var oe=generateMutation(ae);oe&&j.push(oe)}catch(re){PRODUCTION$1||re.name==="MissingIcon"&&console.error(re)}return j},[]);return new Promise(function(j,ae){Promise.all(z).then(function(oe){perform(oe,function(){g("active"),g("complete"),y("pending"),typeof n=="function"&&n(),L(),j()})}).catch(function(oe){L(),ae(oe)})})}function onNode(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;generateMutation(e).then(function(r){r&&perform([r],n)})}function resolveIcons(e){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=(n||{}).icon?n:findIconDefinition(n||{}),y=r.mask;return y&&(y=(y||{}).icon?y:findIconDefinition(y||{})),e(g,_objectSpread2$1(_objectSpread2$1({},r),{},{mask:y}))}}var render=function e(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=r.transform,y=g===void 0?meaninglessTransform:g,k=r.symbol,$=k===void 0?!1:k,V=r.mask,L=V===void 0?null:V,z=r.maskId,j=z===void 0?null:z,ae=r.title,oe=ae===void 0?null:ae,re=r.titleId,ue=re===void 0?null:re,le=r.classes,de=le===void 0?[]:le,he=r.attributes,_e=he===void 0?{}:he,xe=r.styles,Ne=xe===void 0?{}:xe;if(n){var $e=n.prefix,Ce=n.iconName,Ie=n.icon;return domVariants(_objectSpread2$1({type:"icon"},n),function(){return callHooks("beforeDOMElementCreation",{iconDefinition:n,params:r}),config.autoA11y&&(oe?_e["aria-labelledby"]="".concat(config.replacementClass,"-title-").concat(ue||nextUniqueId()):(_e["aria-hidden"]="true",_e.focusable="false")),makeInlineSvgAbstract({icons:{main:asFoundIcon(Ie),mask:L?asFoundIcon(L.icon):{found:!1,width:null,height:null,icon:{}}},prefix:$e,iconName:Ce,transform:_objectSpread2$1(_objectSpread2$1({},meaninglessTransform),y),symbol:$,title:oe,maskId:j,titleId:ue,extra:{attributes:_e,styles:Ne,classes:de}})})}},ReplaceElements={mixout:function e(){return{icon:resolveIcons(render)}},hooks:function e(){return{mutationObserverCallbacks:function(r){return r.treeCallback=onTree,r.nodeCallback=onNode,r}}},provides:function e(n){n.i2svg=function(r){var g=r.node,y=g===void 0?DOCUMENT:g,k=r.callback,$=k===void 0?function(){}:k;return onTree(y,$)},n.generateSvgReplacementMutation=function(r,g){var y=g.iconName,k=g.title,$=g.titleId,V=g.prefix,L=g.transform,z=g.symbol,j=g.mask,ae=g.maskId,oe=g.extra;return new Promise(function(re,ue){Promise.all([findIcon(y,V),j.iconName?findIcon(j.iconName,j.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(le){var de=_slicedToArray(le,2),he=de[0],_e=de[1];re([r,makeInlineSvgAbstract({icons:{main:he,mask:_e},prefix:V,iconName:y,transform:L,symbol:z,maskId:ae,title:k,titleId:$,extra:oe,watchable:!0})])}).catch(ue)})},n.generateAbstractIcon=function(r){var g=r.children,y=r.attributes,k=r.main,$=r.transform,V=r.styles,L=joinStyles(V);L.length>0&&(y.style=L);var z;return transformIsMeaningful($)&&(z=callProvided("generateAbstractTransformGrouping",{main:k,transform:$,containerWidth:k.width,iconWidth:k.width})),g.push(z||k.icon),{children:g,attributes:y}}}},Layers={mixout:function e(){return{layer:function(r){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=g.classes,k=y===void 0?[]:y;return domVariants({type:"layer"},function(){callHooks("beforeDOMElementCreation",{assembler:r,params:g});var $=[];return r(function(V){Array.isArray(V)?V.map(function(L){$=$.concat(L.abstract)}):$=$.concat(V.abstract)}),[{tag:"span",attributes:{class:["".concat(config.cssPrefix,"-layers")].concat(_toConsumableArray(k)).join(" ")},children:$}]})}}}},LayersCounter={mixout:function e(){return{counter:function(r){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=g.title,k=y===void 0?null:y,$=g.classes,V=$===void 0?[]:$,L=g.attributes,z=L===void 0?{}:L,j=g.styles,ae=j===void 0?{}:j;return domVariants({type:"counter",content:r},function(){return callHooks("beforeDOMElementCreation",{content:r,params:g}),makeLayersCounterAbstract({content:r.toString(),title:k,extra:{attributes:z,styles:ae,classes:["".concat(config.cssPrefix,"-layers-counter")].concat(_toConsumableArray(V))}})})}}}},LayersText={mixout:function e(){return{text:function(r){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=g.transform,k=y===void 0?meaninglessTransform:y,$=g.title,V=$===void 0?null:$,L=g.classes,z=L===void 0?[]:L,j=g.attributes,ae=j===void 0?{}:j,oe=g.styles,re=oe===void 0?{}:oe;return domVariants({type:"text",content:r},function(){return callHooks("beforeDOMElementCreation",{content:r,params:g}),makeLayersTextAbstract({content:r,transform:_objectSpread2$1(_objectSpread2$1({},meaninglessTransform),k),title:V,extra:{attributes:ae,styles:re,classes:["".concat(config.cssPrefix,"-layers-text")].concat(_toConsumableArray(z))}})})}}},provides:function e(n){n.generateLayersText=function(r,g){var y=g.title,k=g.transform,$=g.extra,V=null,L=null;if(IS_IE){var z=parseInt(getComputedStyle(r).fontSize,10),j=r.getBoundingClientRect();V=j.width/z,L=j.height/z}return config.autoA11y&&!y&&($.attributes["aria-hidden"]="true"),Promise.resolve([r,makeLayersTextAbstract({content:r.innerHTML,width:V,height:L,transform:k,title:y,extra:$,watchable:!0})])}}},CLEAN_CONTENT_PATTERN=new RegExp('"',"ug"),SECONDARY_UNICODE_RANGE=[1105920,1112319];function hexValueFromContent(e){var n=e.replace(CLEAN_CONTENT_PATTERN,""),r=codePointAt(n,0),g=r>=SECONDARY_UNICODE_RANGE[0]&&r<=SECONDARY_UNICODE_RANGE[1],y=n.length===2?n[0]===n[1]:!1;return{value:toHex(y?n[0]:n),isSecondary:g||y}}function replaceForPosition(e,n){var r="".concat(DATA_FA_PSEUDO_ELEMENT_PENDING).concat(n.replace(":","-"));return new Promise(function(g,y){if(e.getAttribute(r)!==null)return g();var k=toArray(e.children),$=k.filter(function(Ie){return Ie.getAttribute(DATA_FA_PSEUDO_ELEMENT)===n})[0],V=WINDOW.getComputedStyle(e,n),L=V.getPropertyValue("font-family").match(FONT_FAMILY_PATTERN),z=V.getPropertyValue("font-weight"),j=V.getPropertyValue("content");if($&&!L)return e.removeChild($),g();if(L&&j!=="none"&&j!==""){var ae=V.getPropertyValue("content"),oe=~["Sharp"].indexOf(L[2])?FAMILY_SHARP:FAMILY_CLASSIC,re=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(L[2])?STYLE_TO_PREFIX[oe][L[2].toLowerCase()]:FONT_WEIGHT_TO_PREFIX[oe][z],ue=hexValueFromContent(ae),le=ue.value,de=ue.isSecondary,he=L[0].startsWith("FontAwesome"),_e=byUnicode(re,le),xe=_e;if(he){var Ne=byOldUnicode(le);Ne.iconName&&Ne.prefix&&(_e=Ne.iconName,re=Ne.prefix)}if(_e&&!de&&(!$||$.getAttribute(DATA_PREFIX)!==re||$.getAttribute(DATA_ICON)!==xe)){e.setAttribute(r,xe),$&&e.removeChild($);var $e=blankMeta(),Ce=$e.extra;Ce.attributes[DATA_FA_PSEUDO_ELEMENT]=n,findIcon(_e,re).then(function(Ie){var ze=makeInlineSvgAbstract(_objectSpread2$1(_objectSpread2$1({},$e),{},{icons:{main:Ie,mask:emptyCanonicalIcon()},prefix:re,iconName:xe,extra:Ce,watchable:!0})),Ue=DOCUMENT.createElementNS("http://www.w3.org/2000/svg","svg");n==="::before"?e.insertBefore(Ue,e.firstChild):e.appendChild(Ue),Ue.outerHTML=ze.map(function(Pt){return toHtml(Pt)}).join(`
`),e.removeAttribute(r),g()}).catch(y)}else g()}else g()})}function replace2(e){return Promise.all([replaceForPosition(e,"::before"),replaceForPosition(e,"::after")])}function processable(e){return e.parentNode!==document.head&&!~TAGNAMES_TO_SKIP_FOR_PSEUDOELEMENTS.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(DATA_FA_PSEUDO_ELEMENT)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function searchPseudoElements(e){if(IS_DOM)return new Promise(function(n,r){var g=toArray(e.querySelectorAll("*")).filter(processable).map(replace2),y=perf.begin("searchPseudoElements");disableObservation(),Promise.all(g).then(function(){y(),enableObservation(),n()}).catch(function(){y(),enableObservation(),r()})})}var PseudoElements={hooks:function e(){return{mutationObserverCallbacks:function(r){return r.pseudoElementsCallback=searchPseudoElements,r}}},provides:function e(n){n.pseudoElements2svg=function(r){var g=r.node,y=g===void 0?DOCUMENT:g;config.searchPseudoElements&&searchPseudoElements(y)}}},_unwatched=!1,MutationObserver$1={mixout:function e(){return{dom:{unwatch:function(){disableObservation(),_unwatched=!0}}}},hooks:function e(){return{bootstrap:function(){observe(chainHooks("mutationObserverCallbacks",{}))},noAuto:function(){disconnect()},watch:function(r){var g=r.observeMutationsRoot;_unwatched?enableObservation():observe(chainHooks("mutationObserverCallbacks",{observeMutationsRoot:g}))}}}},parseTransformString=function e(n){var r={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return n.toLowerCase().split(" ").reduce(function(g,y){var k=y.toLowerCase().split("-"),$=k[0],V=k.slice(1).join("-");if($&&V==="h")return g.flipX=!0,g;if($&&V==="v")return g.flipY=!0,g;if(V=parseFloat(V),isNaN(V))return g;switch($){case"grow":g.size=g.size+V;break;case"shrink":g.size=g.size-V;break;case"left":g.x=g.x-V;break;case"right":g.x=g.x+V;break;case"up":g.y=g.y-V;break;case"down":g.y=g.y+V;break;case"rotate":g.rotate=g.rotate+V;break}return g},r)},PowerTransforms={mixout:function e(){return{parse:{transform:function(r){return parseTransformString(r)}}}},hooks:function e(){return{parseNodeAttributes:function(r,g){var y=g.getAttribute("data-fa-transform");return y&&(r.transform=parseTransformString(y)),r}}},provides:function e(n){n.generateAbstractTransformGrouping=function(r){var g=r.main,y=r.transform,k=r.containerWidth,$=r.iconWidth,V={transform:"translate(".concat(k/2," 256)")},L="translate(".concat(y.x*32,", ").concat(y.y*32,") "),z="scale(".concat(y.size/16*(y.flipX?-1:1),", ").concat(y.size/16*(y.flipY?-1:1),") "),j="rotate(".concat(y.rotate," 0 0)"),ae={transform:"".concat(L," ").concat(z," ").concat(j)},oe={transform:"translate(".concat($/2*-1," -256)")},re={outer:V,inner:ae,path:oe};return{tag:"g",attributes:_objectSpread2$1({},re.outer),children:[{tag:"g",attributes:_objectSpread2$1({},re.inner),children:[{tag:g.icon.tag,children:g.icon.children,attributes:_objectSpread2$1(_objectSpread2$1({},g.icon.attributes),re.path)}]}]}}}},ALL_SPACE={x:0,y:0,width:"100%",height:"100%"};function fillBlack(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||n)&&(e.attributes.fill="black"),e}function deGroup(e){return e.tag==="g"?e.children:[e]}var Masks={hooks:function e(){return{parseNodeAttributes:function(r,g){var y=g.getAttribute("data-fa-mask"),k=y?getCanonicalIcon(y.split(" ").map(function($){return $.trim()})):emptyCanonicalIcon();return k.prefix||(k.prefix=getDefaultUsablePrefix()),r.mask=k,r.maskId=g.getAttribute("data-fa-mask-id"),r}}},provides:function e(n){n.generateAbstractMask=function(r){var g=r.children,y=r.attributes,k=r.main,$=r.mask,V=r.maskId,L=r.transform,z=k.width,j=k.icon,ae=$.width,oe=$.icon,re=transformForSvg({transform:L,containerWidth:ae,iconWidth:z}),ue={tag:"rect",attributes:_objectSpread2$1(_objectSpread2$1({},ALL_SPACE),{},{fill:"white"})},le=j.children?{children:j.children.map(fillBlack)}:{},de={tag:"g",attributes:_objectSpread2$1({},re.inner),children:[fillBlack(_objectSpread2$1({tag:j.tag,attributes:_objectSpread2$1(_objectSpread2$1({},j.attributes),re.path)},le))]},he={tag:"g",attributes:_objectSpread2$1({},re.outer),children:[de]},_e="mask-".concat(V||nextUniqueId()),xe="clip-".concat(V||nextUniqueId()),Ne={tag:"mask",attributes:_objectSpread2$1(_objectSpread2$1({},ALL_SPACE),{},{id:_e,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[ue,he]},$e={tag:"defs",children:[{tag:"clipPath",attributes:{id:xe},children:deGroup(oe)},Ne]};return g.push($e,{tag:"rect",attributes:_objectSpread2$1({fill:"currentColor","clip-path":"url(#".concat(xe,")"),mask:"url(#".concat(_e,")")},ALL_SPACE)}),{children:g,attributes:y}}}},MissingIconIndicator={provides:function e(n){var r=!1;WINDOW.matchMedia&&(r=WINDOW.matchMedia("(prefers-reduced-motion: reduce)").matches),n.missingIconAbstract=function(){var g=[],y={fill:"currentColor"},k={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};g.push({tag:"path",attributes:_objectSpread2$1(_objectSpread2$1({},y),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var $=_objectSpread2$1(_objectSpread2$1({},k),{},{attributeName:"opacity"}),V={tag:"circle",attributes:_objectSpread2$1(_objectSpread2$1({},y),{},{cx:"256",cy:"364",r:"28"}),children:[]};return r||V.children.push({tag:"animate",attributes:_objectSpread2$1(_objectSpread2$1({},k),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:_objectSpread2$1(_objectSpread2$1({},$),{},{values:"1;0;1;1;0;1;"})}),g.push(V),g.push({tag:"path",attributes:_objectSpread2$1(_objectSpread2$1({},y),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:r?[]:[{tag:"animate",attributes:_objectSpread2$1(_objectSpread2$1({},$),{},{values:"1;0;0;0;0;1;"})}]}),r||g.push({tag:"path",attributes:_objectSpread2$1(_objectSpread2$1({},y),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:_objectSpread2$1(_objectSpread2$1({},$),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:g}}}},SvgSymbols={hooks:function e(){return{parseNodeAttributes:function(r,g){var y=g.getAttribute("data-fa-symbol"),k=y===null?!1:y===""?!0:y;return r.symbol=k,r}}}},plugins=[InjectCSS,ReplaceElements,Layers,LayersCounter,LayersText,PseudoElements,MutationObserver$1,PowerTransforms,Masks,MissingIconIndicator,SvgSymbols];registerPlugins(plugins,{mixoutsTo:api});api.noAuto;api.config;var library$1=api.library;api.dom;var parse$1=api.parse;api.findIconDefinition;api.toHtml;var icon2=api.icon;api.layer;api.text;api.counter;function ownKeys(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);n&&(g=g.filter(function(y){return Object.getOwnPropertyDescriptor(e,y).enumerable})),r.push.apply(r,g)}return r}function _objectSpread2(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ownKeys(Object(r),!0).forEach(function(g){_defineProperty(e,g,r[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(g){Object.defineProperty(e,g,Object.getOwnPropertyDescriptor(r,g))})}return e}function _typeof(e){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(e)}function _defineProperty(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function _objectWithoutPropertiesLoose(e,n){if(e==null)return{};var r={},g=Object.keys(e),y,k;for(k=0;k<g.length;k++)y=g[k],!(n.indexOf(y)>=0)&&(r[y]=e[y]);return r}function _objectWithoutProperties(e,n){if(e==null)return{};var r=_objectWithoutPropertiesLoose(e,n),g,y;if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(e);for(y=0;y<k.length;y++)g=k[y],!(n.indexOf(g)>=0)&&Object.prototype.propertyIsEnumerable.call(e,g)&&(r[g]=e[g])}return r}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},humps$1={exports:{}};(function(e){(function(n){var r=function(he,_e,xe){if(!z(_e)||ae(_e)||oe(_e)||re(_e)||L(_e))return _e;var Ne,$e=0,Ce=0;if(j(_e))for(Ne=[],Ce=_e.length;$e<Ce;$e++)Ne.push(r(he,_e[$e],xe));else{Ne={};for(var Ie in _e)Object.prototype.hasOwnProperty.call(_e,Ie)&&(Ne[he(Ie,xe)]=r(he,_e[Ie],xe))}return Ne},g=function(he,_e){_e=_e||{};var xe=_e.separator||"_",Ne=_e.split||/(?=[A-Z])/;return he.split(Ne).join(xe)},y=function(he){return ue(he)?he:(he=he.replace(/[\-_\s]+(.)?/g,function(_e,xe){return xe?xe.toUpperCase():""}),he.substr(0,1).toLowerCase()+he.substr(1))},k=function(he){var _e=y(he);return _e.substr(0,1).toUpperCase()+_e.substr(1)},$=function(he,_e){return g(he,_e).toLowerCase()},V=Object.prototype.toString,L=function(he){return typeof he=="function"},z=function(he){return he===Object(he)},j=function(he){return V.call(he)=="[object Array]"},ae=function(he){return V.call(he)=="[object Date]"},oe=function(he){return V.call(he)=="[object RegExp]"},re=function(he){return V.call(he)=="[object Boolean]"},ue=function(he){return he=he-0,he===he},le=function(he,_e){var xe=_e&&"process"in _e?_e.process:_e;return typeof xe!="function"?he:function(Ne,$e){return xe(Ne,he,$e)}},de={camelize:y,decamelize:$,pascalize:k,depascalize:$,camelizeKeys:function(he,_e){return r(le(y,_e),he)},decamelizeKeys:function(he,_e){return r(le($,_e),he,_e)},pascalizeKeys:function(he,_e){return r(le(k,_e),he)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};e.exports?e.exports=de:n.humps=de})(commonjsGlobal)})(humps$1);var humps=humps$1.exports,_excluded=["class","style"];function styleToObject(e){return e.split(";").map(function(n){return n.trim()}).filter(function(n){return n}).reduce(function(n,r){var g=r.indexOf(":"),y=humps.camelize(r.slice(0,g)),k=r.slice(g+1).trim();return n[y]=k,n},{})}function classToObject(e){return e.split(/\s+/).reduce(function(n,r){return n[r]=!0,n},{})}function convert(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var g=(e.children||[]).map(function(L){return convert(L)}),y=Object.keys(e.attributes||{}).reduce(function(L,z){var j=e.attributes[z];switch(z){case"class":L.class=classToObject(j);break;case"style":L.style=styleToObject(j);break;default:L.attrs[z]=j}return L},{attrs:{},class:{},style:{}});r.class;var k=r.style,$=k===void 0?{}:k,V=_objectWithoutProperties(r,_excluded);return h$1(e.tag,_objectSpread2(_objectSpread2(_objectSpread2({},n),{},{class:y.class,style:_objectSpread2(_objectSpread2({},y.style),$)},y.attrs),V),g)}var PRODUCTION=!1;try{PRODUCTION=!0}catch(e){}function log(){if(!PRODUCTION&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function objectWithKey(e,n){return Array.isArray(n)&&n.length>0||!Array.isArray(n)&&n?_defineProperty({},e,n):{}}function classList(e){var n,r=(n={"fa-spin":e.spin,"fa-pulse":e.pulse,"fa-fw":e.fixedWidth,"fa-border":e.border,"fa-li":e.listItem,"fa-inverse":e.inverse,"fa-flip":e.flip===!0,"fa-flip-horizontal":e.flip==="horizontal"||e.flip==="both","fa-flip-vertical":e.flip==="vertical"||e.flip==="both"},_defineProperty(n,"fa-".concat(e.size),e.size!==null),_defineProperty(n,"fa-rotate-".concat(e.rotation),e.rotation!==null),_defineProperty(n,"fa-pull-".concat(e.pull),e.pull!==null),_defineProperty(n,"fa-swap-opacity",e.swapOpacity),_defineProperty(n,"fa-bounce",e.bounce),_defineProperty(n,"fa-shake",e.shake),_defineProperty(n,"fa-beat",e.beat),_defineProperty(n,"fa-fade",e.fade),_defineProperty(n,"fa-beat-fade",e.beatFade),_defineProperty(n,"fa-flash",e.flash),_defineProperty(n,"fa-spin-pulse",e.spinPulse),_defineProperty(n,"fa-spin-reverse",e.spinReverse),n);return Object.keys(r).map(function(g){return r[g]?g:null}).filter(function(g){return g})}function normalizeIconArgs(e){if(e&&_typeof(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(parse$1.icon)return parse$1.icon(e);if(e===null)return null;if(_typeof(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}var FontAwesomeIcon=defineComponent({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function e(n){return[!0,!1,"horizontal","vertical","both"].indexOf(n)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function e(n){return["right","left"].indexOf(n)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function e(n){return[90,180,270].indexOf(Number.parseInt(n,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function e(n){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(n)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup:function e(n,r){var g=r.attrs,y=computed(function(){return normalizeIconArgs(n.icon)}),k=computed(function(){return objectWithKey("classes",classList(n))}),$=computed(function(){return objectWithKey("transform",typeof n.transform=="string"?parse$1.transform(n.transform):n.transform)}),V=computed(function(){return objectWithKey("mask",normalizeIconArgs(n.mask))}),L=computed(function(){return icon2(y.value,_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({},k.value),$.value),V.value),{},{symbol:n.symbol,title:n.title}))});watch(L,function(j){if(!j)return log("Could not find one or more icon(s)",y.value,V.value)},{immediate:!0});var z=computed(function(){return L.value?convert(L.value.abstract[0],{},g):null});return function(){return z.value}}}),faGamepad={prefix:"fas",iconName:"gamepad",icon:[640,512,[],"f11b","M192 64C86 64 0 150 0 256S86 448 192 448H448c106 0 192-86 192-192s-86-192-192-192H192zM496 168a40 40 0 1 1 0 80 40 40 0 1 1 0-80zM392 304a40 40 0 1 1 80 0 40 40 0 1 1 -80 0zM168 200c0-13.3 10.7-24 24-24s24 10.7 24 24v32h32c13.3 0 24 10.7 24 24s-10.7 24-24 24H216v32c0 13.3-10.7 24-24 24s-24-10.7-24-24V280H136c-13.3 0-24-10.7-24-24s10.7-24 24-24h32V200z"]},faHand$1={prefix:"fas",iconName:"hand",icon:[512,512,[129306,9995,"hand-paper"],"f256","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V240c0 8.8-7.2 16-16 16s-16-7.2-16-16V64c0-17.7-14.3-32-32-32s-32 14.3-32 32V336c0 1.5 0 3.1 .1 4.6L67.6 283c-16-15.2-41.3-14.6-56.6 1.4s-14.6 41.3 1.4 56.6L124.8 448c43.1 41.1 100.4 64 160 64H304c97.2 0 176-78.8 176-176V128c0-17.7-14.3-32-32-32s-32 14.3-32 32V240c0 8.8-7.2 16-16 16s-16-7.2-16-16V64c0-17.7-14.3-32-32-32s-32 14.3-32 32V240c0 8.8-7.2 16-16 16s-16-7.2-16-16V32z"]},faArrowPointer={prefix:"fas",iconName:"arrow-pointer",icon:[320,512,["mouse-pointer"],"f245","M0 55.2V426c0 12.2 9.9 22 22 22c6.3 0 12.4-2.7 16.6-7.5L121.2 346l58.1 116.3c7.9 15.8 27.1 22.2 42.9 14.3s22.2-27.1 14.3-42.9L179.8 320H297.9c12.2 0 22.1-9.9 22.1-22.1c0-6.3-2.7-12.3-7.4-16.5L38.6 37.9C34.3 34.1 28.9 32 23.2 32C10.4 32 0 42.4 0 55.2z"]},faImage={prefix:"fas",iconName:"image",icon:[512,512,[],"f03e","M0 96C0 60.7 28.7 32 64 32H448c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96zM323.8 202.5c-4.5-6.6-11.9-10.5-19.8-10.5s-15.4 3.9-19.8 10.5l-87 127.6L170.7 297c-4.6-5.7-11.5-9-18.7-9s-14.2 3.3-18.7 9l-64 80c-5.8 7.2-6.9 17.1-2.9 25.4s12.4 13.6 21.6 13.6h96 32H424c8.9 0 17.1-4.9 21.2-12.8s3.6-17.4-1.4-24.7l-120-176zM112 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"]},faArrowDownWideShort={prefix:"fas",iconName:"arrow-down-wide-short",icon:[576,512,["sort-amount-asc","sort-amount-down"],"f160","M151.6 469.6C145.5 476.2 137 480 128 480s-17.5-3.8-23.6-10.4l-88-96c-11.9-13-11.1-33.3 2-45.2s33.3-11.1 45.2 2L96 365.7V64c0-17.7 14.3-32 32-32s32 14.3 32 32V365.7l32.4-35.4c11.9-13 32.2-13.9 45.2-2s13.9 32.2 2 45.2l-88 96zM320 480c-17.7 0-32-14.3-32-32s14.3-32 32-32h32c17.7 0 32 14.3 32 32s-14.3 32-32 32H320zm0-128c-17.7 0-32-14.3-32-32s14.3-32 32-32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H320zm0-128c-17.7 0-32-14.3-32-32s14.3-32 32-32H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H320zm0-128c-17.7 0-32-14.3-32-32s14.3-32 32-32H544c17.7 0 32 14.3 32 32s-14.3 32-32 32H320z"]},faSquare$1={prefix:"fas",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M0 96C0 60.7 28.7 32 64 32H384c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96z"]},faCircle$1={prefix:"fas",iconName:"circle",icon:[512,512,[128308,128309,128992,128993,128994,128995,128996,9679,9898,9899,11044,61708,61915],"f111","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"]},faTerminal={prefix:"fas",iconName:"terminal",icon:[576,512,[],"f120","M9.4 86.6C-3.1 74.1-3.1 53.9 9.4 41.4s32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256 9.4 86.6zM256 416H544c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},faTextWidth={prefix:"fas",iconName:"text-width",icon:[448,512,[],"f035","M64 128V96H192l0 128H176c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H256l0-128H384v32c0 17.7 14.3 32 32 32s32-14.3 32-32V80c0-26.5-21.5-48-48-48H224 48C21.5 32 0 53.5 0 80v48c0 17.7 14.3 32 32 32s32-14.3 32-32zM9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3l64 64c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6V416H320v32c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l64-64c12.5-12.5 12.5-32.8 0-45.3l-64-64c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6v32H128V320c0-12.9-7.8-24.6-19.8-29.6s-25.7-2.2-34.9 6.9l-64 64z"]},faTableCells={prefix:"fas",iconName:"table-cells",icon:[512,512,["th"],"f00a","M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm88 64v64H64V96h88zm56 0h88v64H208V96zm240 0v64H360V96h88zM64 224h88v64H64V224zm232 0v64H208V224h88zm64 0h88v64H360V224zM152 352v64H64V352h88zm56 0h88v64H208V352zm240 0v64H360V352h88z"]},faSliders={prefix:"fas",iconName:"sliders",icon:[512,512,["sliders-h"],"f1de","M0 416c0 17.7 14.3 32 32 32l54.7 0c12.3 28.3 40.5 48 73.3 48s61-19.7 73.3-48L480 448c17.7 0 32-14.3 32-32s-14.3-32-32-32l-246.7 0c-12.3-28.3-40.5-48-73.3-48s-61 19.7-73.3 48L32 384c-17.7 0-32 14.3-32 32zm128 0a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zM320 256a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm32-80c-32.8 0-61 19.7-73.3 48L32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l246.7 0c12.3 28.3 40.5 48 73.3 48s61-19.7 73.3-48l54.7 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-54.7 0c-12.3-28.3-40.5-48-73.3-48zM192 128a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm73.3-64C253 35.7 224.8 16 192 16s-61 19.7-73.3 48L32 64C14.3 64 0 78.3 0 96s14.3 32 32 32l86.7 0c12.3 28.3 40.5 48 73.3 48s61-19.7 73.3-48L480 128c17.7 0 32-14.3 32-32s-14.3-32-32-32L265.3 64z"]},faFont={prefix:"fas",iconName:"font",icon:[448,512,[],"f031","M254 52.8C249.3 40.3 237.3 32 224 32s-25.3 8.3-30 20.8L57.8 416H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32h-1.8l18-48H303.8l18 48H320c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H390.2L254 52.8zM279.8 304H168.2L224 155.1 279.8 304z"]},faPercent={prefix:"fas",iconName:"percent",icon:[384,512,[62101,62785,"percentage"],"25","M374.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-320 320c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l320-320zM128 128A64 64 0 1 0 0 128a64 64 0 1 0 128 0zM384 384a64 64 0 1 0 -128 0 64 64 0 1 0 128 0z"]},faPenNib={prefix:"fas",iconName:"pen-nib",icon:[512,512,[10001],"f5ad","M368.4 18.3L312.7 74.1 437.9 199.3l55.7-55.7c21.9-21.9 21.9-57.3 0-79.2L447.6 18.3c-21.9-21.9-57.3-21.9-79.2 0zM288 94.6l-9.2 2.8L134.7 140.6c-19.9 6-35.7 21.2-42.3 41L3.8 445.8c-3.8 11.3-1 23.9 7.3 32.4L164.7 324.7c-3-6.3-4.7-13.3-4.7-20.7c0-26.5 21.5-48 48-48s48 21.5 48 48s-21.5 48-48 48c-7.4 0-14.4-1.7-20.7-4.7L33.7 500.9c8.6 8.3 21.1 11.2 32.4 7.3l264.3-88.6c19.7-6.6 35-22.4 41-42.3l43.2-144.1 2.8-9.2L288 94.6z"]},faDrawPolygon={prefix:"fas",iconName:"draw-polygon",icon:[448,512,[],"f5ee","M96 151.4V360.6c9.7 5.6 17.8 13.7 23.4 23.4H328.6c0-.1 .1-.2 .1-.3l-4.5-7.9-32-56 0 0c-1.4 .1-2.8 .1-4.2 .1c-35.3 0-64-28.7-64-64s28.7-64 64-64c1.4 0 2.8 0 4.2 .1l0 0 32-56 4.5-7.9-.1-.3H119.4c-5.6 9.7-13.7 17.8-23.4 23.4zM384.3 352c35.2 .2 63.7 28.7 63.7 64c0 35.3-28.7 64-64 64c-23.7 0-44.4-12.9-55.4-32H119.4c-11.1 19.1-31.7 32-55.4 32c-35.3 0-64-28.7-64-64c0-23.7 12.9-44.4 32-55.4V151.4C12.9 140.4 0 119.7 0 96C0 60.7 28.7 32 64 32c23.7 0 44.4 12.9 55.4 32H328.6c11.1-19.1 31.7-32 55.4-32c35.3 0 64 28.7 64 64c0 35.3-28.5 63.8-63.7 64l-4.5 7.9-32 56-2.3 4c4.2 8.5 6.5 18 6.5 28.1s-2.3 19.6-6.5 28.1l2.3 4 32 56 4.5 7.9z"]},faHand={prefix:"far",iconName:"hand",icon:[512,512,[129306,9995,"hand-paper"],"f256","M256 0c-25.3 0-47.2 14.7-57.6 36c-7-2.6-14.5-4-22.4-4c-35.3 0-64 28.7-64 64V261.5l-2.7-2.7c-25-25-65.5-25-90.5 0s-25 65.5 0 90.5L106.5 437c48 48 113.1 75 181 75H296h8c1.5 0 3-.1 4.5-.4c91.7-6.2 165-79.4 171.1-171.1c.3-1.5 .4-3 .4-4.5V160c0-35.3-28.7-64-64-64c-5.5 0-10.9 .7-16 2V96c0-35.3-28.7-64-64-64c-7.9 0-15.4 1.4-22.4 4C303.2 14.7 281.3 0 256 0zM240 96.1c0 0 0-.1 0-.1V64c0-8.8 7.2-16 16-16s16 7.2 16 16V95.9c0 0 0 .1 0 .1V232c0 13.3 10.7 24 24 24s24-10.7 24-24V96c0 0 0 0 0-.1c0-8.8 7.2-16 16-16s16 7.2 16 16v55.9c0 0 0 .1 0 .1v80c0 13.3 10.7 24 24 24s24-10.7 24-24V160.1c0 0 0-.1 0-.1c0-8.8 7.2-16 16-16s16 7.2 16 16V332.9c-.1 .6-.1 1.3-.2 1.9c-3.4 69.7-59.3 125.6-129 129c-.6 0-1.3 .1-1.9 .2H296h-8.5c-55.2 0-108.1-21.9-147.1-60.9L52.7 315.3c-6.2-6.2-6.2-16.4 0-22.6s16.4-6.2 22.6 0L119 336.4c6.9 6.9 17.2 8.9 26.2 5.2s14.8-12.5 14.8-22.2V96c0-8.8 7.2-16 16-16c8.8 0 16 7.1 16 15.9V232c0 13.3 10.7 24 24 24s24-10.7 24-24V96.1z"]},faSquare={prefix:"far",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M384 80c8.8 0 16 7.2 16 16V416c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V96c0-8.8 7.2-16 16-16H384zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z"]},faCircle={prefix:"far",iconName:"circle",icon:[512,512,[128308,128309,128992,128993,128994,128995,128996,9679,9898,9899,11044,61708,61915],"f111","M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z"]};localForage.config({driver:localForage.INDEXEDDB,name:"myDatabase",version:1,size:4980736,storeName:"keyvaluepairs",description:"my database"});library$1.add(faArrowPointer,faCircle$1,faPercent,faArrowDownWideShort,faPenNib,faSquare$1,faDrawPolygon,faImage,faFont,faTerminal,faSliders,faTableCells,faHand,faSquare,faCircle,faHand$1,faTextWidth,faGamepad);const app=createApp(_sfc_main);app.config.errorHandler=(e,n,r)=>{console.error(":",e)};app.component("font-awesome-icon",FontAwesomeIcon);app.use(installer);app.component("Files",files_default);app.component("Edit",edit_default);app.component("Upload",upload_default);app.component("Download",download_default);app.component("Tickets",tickets_default);app.component("Setting",setting_default);app.component("List",list_default);app.component("Tools",tools_default);app.component("QuestionFilled",question_filled_default);app.use(router);app.use(i18n);app.mount("#app");const worker=initWorker();
