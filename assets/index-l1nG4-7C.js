(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))g(y);new MutationObserver(y=>{for(const k of y)if(k.type==="childList")for(const $ of k.addedNodes)$.tagName==="LINK"&&$.rel==="modulepreload"&&g($)}).observe(document,{childList:!0,subtree:!0});function r(y){const k={};return y.integrity&&(k.integrity=y.integrity),y.referrerPolicy&&(k.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?k.credentials="include":y.crossOrigin==="anonymous"?k.credentials="omit":k.credentials="same-origin",k}function g(y){if(y.ep)return;y.ep=!0;const k=r(y);fetch(y.href,k)}})();function makeMap(e,n){const r=Object.create(null),g=e.split(",");for(let y=0;y<g.length;y++)r[g[y]]=!0;return n?y=>!!r[y.toLowerCase()]:y=>!!r[y]}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=e=>onRE.test(e),isModelListener=e=>e.startsWith("onUpdate:"),extend=Object.assign,remove$1=(e,n)=>{const r=e.indexOf(n);r>-1&&e.splice(r,1)},hasOwnProperty$f=Object.prototype.hasOwnProperty,hasOwn$1=(e,n)=>hasOwnProperty$f.call(e,n),isArray$3=Array.isArray,isMap$1=e=>toTypeString$1(e)==="[object Map]",isSet$1=e=>toTypeString$1(e)==="[object Set]",isDate$1=e=>toTypeString$1(e)==="[object Date]",isFunction$3=e=>typeof e=="function",isString$3=e=>typeof e=="string",isSymbol$1=e=>typeof e=="symbol",isObject$3=e=>e!==null&&typeof e=="object",isPromise=e=>isObject$3(e)&&isFunction$3(e.then)&&isFunction$3(e.catch),objectToString$2=Object.prototype.toString,toTypeString$1=e=>objectToString$2.call(e),toRawType=e=>toTypeString$1(e).slice(8,-1),isPlainObject$2=e=>toTypeString$1(e)==="[object Object]",isIntegerKey=e=>isString$3(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const n=Object.create(null);return r=>n[r]||(n[r]=e(r))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(n,r)=>r?r.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$2=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize$2(e)}`:""),hasChanged=(e,n)=>!Object.is(e,n),invokeArrayFns=(e,n)=>{for(let r=0;r<e.length;r++)e[r](n)},def=(e,n,r)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value:r})},looseToNumber=e=>{const n=parseFloat(e);return isNaN(n)?e:n},toNumber$1=e=>{const n=isString$3(e)?Number(e):NaN;return isNaN(n)?e:n};let _globalThis$1;const getGlobalThis$1=()=>_globalThis$1||(_globalThis$1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(e){if(isArray$3(e)){const n={};for(let r=0;r<e.length;r++){const g=e[r],y=isString$3(g)?parseStringStyle(g):normalizeStyle(g);if(y)for(const k in y)n[k]=y[k]}return n}else{if(isString$3(e))return e;if(isObject$3(e))return e}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(e){const n={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach(r=>{if(r){const g=r.split(propertyDelimiterRE);g.length>1&&(n[g[0].trim()]=g[1].trim())}}),n}function normalizeClass(e){let n="";if(isString$3(e))n=e;else if(isArray$3(e))for(let r=0;r<e.length;r++){const g=normalizeClass(e[r]);g&&(n+=g+" ")}else if(isObject$3(e))for(const r in e)e[r]&&(n+=r+" ");return n.trim()}function normalizeProps(e){if(!e)return null;let{class:n,style:r}=e;return n&&!isString$3(n)&&(e.class=normalizeClass(n)),r&&(e.style=normalizeStyle(r)),e}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}function looseCompareArrays(e,n){if(e.length!==n.length)return!1;let r=!0;for(let g=0;r&&g<e.length;g++)r=looseEqual(e[g],n[g]);return r}function looseEqual(e,n){if(e===n)return!0;let r=isDate$1(e),g=isDate$1(n);if(r||g)return r&&g?e.getTime()===n.getTime():!1;if(r=isSymbol$1(e),g=isSymbol$1(n),r||g)return e===n;if(r=isArray$3(e),g=isArray$3(n),r||g)return r&&g?looseCompareArrays(e,n):!1;if(r=isObject$3(e),g=isObject$3(n),r||g){if(!r||!g)return!1;const y=Object.keys(e).length,k=Object.keys(n).length;if(y!==k)return!1;for(const $ in e){const V=e.hasOwnProperty($),L=n.hasOwnProperty($);if(V&&!L||!V&&L||!looseEqual(e[$],n[$]))return!1}}return String(e)===String(n)}function looseIndexOf(e,n){return e.findIndex(r=>looseEqual(r,n))}const toDisplayString$1=e=>isString$3(e)?e:e==null?"":isArray$3(e)||isObject$3(e)&&(e.toString===objectToString$2||!isFunction$3(e.toString))?JSON.stringify(e,replacer,2):String(e),replacer=(e,n)=>n&&n.__v_isRef?replacer(e,n.value):isMap$1(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((r,[g,y])=>(r[`${g} =>`]=y,r),{})}:isSet$1(n)?{[`Set(${n.size})`]:[...n.values()]}:isObject$3(n)&&!isArray$3(n)&&!isPlainObject$2(n)?String(n):n;let activeEffectScope;class EffectScope{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!n&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(n){if(this._active){const r=activeEffectScope;try{return activeEffectScope=this,n()}finally{activeEffectScope=r}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(n){if(this._active){let r,g;for(r=0,g=this.effects.length;r<g;r++)this.effects[r].stop();for(r=0,g=this.cleanups.length;r<g;r++)this.cleanups[r]();if(this.scopes)for(r=0,g=this.scopes.length;r<g;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!n){const y=this.parent.scopes.pop();y&&y!==this&&(this.parent.scopes[this.index]=y,y.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(e){return new EffectScope(e)}function recordEffectScope(e,n=activeEffectScope){n&&n.active&&n.effects.push(e)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(e){activeEffectScope&&activeEffectScope.cleanups.push(e)}const createDep=e=>{const n=new Set(e);return n.w=0,n.n=0,n},wasTracked=e=>(e.w&trackOpBit)>0,newTracked=e=>(e.n&trackOpBit)>0,initDepMarkers=({deps:e})=>{if(e.length)for(let n=0;n<e.length;n++)e[n].w|=trackOpBit},finalizeDepMarkers=e=>{const{deps:n}=e;if(n.length){let r=0;for(let g=0;g<n.length;g++){const y=n[g];wasTracked(y)&&!newTracked(y)?y.delete(e):n[r++]=y,y.w&=~trackOpBit,y.n&=~trackOpBit}n.length=r}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(n,r=null,g){this.fn=n,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,g)}run(){if(!this.active)return this.fn();let n=activeEffect,r=shouldTrack;for(;n;){if(n===this)return;n=n.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(e){const{deps:n}=e;if(n.length){for(let r=0;r<n.length;r++)n[r].delete(e);n.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function track(e,n,r){if(shouldTrack&&activeEffect){let g=targetMap.get(e);g||targetMap.set(e,g=new Map);let y=g.get(r);y||g.set(r,y=createDep()),trackEffects(y)}}function trackEffects(e,n){let r=!1;effectTrackDepth<=maxMarkerBits?newTracked(e)||(e.n|=trackOpBit,r=!wasTracked(e)):r=!e.has(activeEffect),r&&(e.add(activeEffect),activeEffect.deps.push(e))}function trigger(e,n,r,g,y,k){const $=targetMap.get(e);if(!$)return;let V=[];if(n==="clear")V=[...$.values()];else if(r==="length"&&isArray$3(e)){const L=Number(g);$.forEach((z,j)=>{(j==="length"||j>=L)&&V.push(z)})}else switch(r!==void 0&&V.push($.get(r)),n){case"add":isArray$3(e)?isIntegerKey(r)&&V.push($.get("length")):(V.push($.get(ITERATE_KEY)),isMap$1(e)&&V.push($.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$3(e)||(V.push($.get(ITERATE_KEY)),isMap$1(e)&&V.push($.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$1(e)&&V.push($.get(ITERATE_KEY));break}if(V.length===1)V[0]&&triggerEffects(V[0]);else{const L=[];for(const z of V)z&&L.push(...z);triggerEffects(createDep(L))}}function triggerEffects(e,n){const r=isArray$3(e)?e:[...e];for(const g of r)g.computed&&triggerEffect(g);for(const g of r)g.computed||triggerEffect(g)}function triggerEffect(e,n){(e!==activeEffect||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function getDepFromReactive(e,n){var r;return(r=targetMap.get(e))==null?void 0:r.get(n)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol$1)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach(n=>{e[n]=function(...r){const g=toRaw(this);for(let k=0,$=this.length;k<$;k++)track(g,"get",k+"");const y=g[n](...r);return y===-1||y===!1?g[n](...r.map(toRaw)):y}}),["push","pop","shift","unshift","splice"].forEach(n=>{e[n]=function(...r){pauseTracking();const g=toRaw(this)[n].apply(this,r);return resetTracking(),g}}),e}function hasOwnProperty$e(e){const n=toRaw(this);return track(n,"has",e),n.hasOwnProperty(e)}function createGetter(e=!1,n=!1){return function(g,y,k){if(y==="__v_isReactive")return!e;if(y==="__v_isReadonly")return e;if(y==="__v_isShallow")return n;if(y==="__v_raw"&&k===(e?n?shallowReadonlyMap:readonlyMap:n?shallowReactiveMap:reactiveMap).get(g))return g;const $=isArray$3(g);if(!e){if($&&hasOwn$1(arrayInstrumentations,y))return Reflect.get(arrayInstrumentations,y,k);if(y==="hasOwnProperty")return hasOwnProperty$e}const V=Reflect.get(g,y,k);return(isSymbol$1(y)?builtInSymbols.has(y):isNonTrackableKeys(y))||(e||track(g,"get",y),n)?V:isRef(V)?$&&isIntegerKey(y)?V:V.value:isObject$3(V)?e?readonly(V):reactive(V):V}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(e=!1){return function(r,g,y,k){let $=r[g];if(isReadonly($)&&isRef($)&&!isRef(y))return!1;if(!e&&(!isShallow(y)&&!isReadonly(y)&&($=toRaw($),y=toRaw(y)),!isArray$3(r)&&isRef($)&&!isRef(y)))return $.value=y,!0;const V=isArray$3(r)&&isIntegerKey(g)?Number(g)<r.length:hasOwn$1(r,g),L=Reflect.set(r,g,y,k);return r===toRaw(k)&&(V?hasChanged(y,$)&&trigger(r,"set",g,y):trigger(r,"add",g,y)),L}}function deleteProperty(e,n){const r=hasOwn$1(e,n);e[n];const g=Reflect.deleteProperty(e,n);return g&&r&&trigger(e,"delete",n,void 0),g}function has$1(e,n){const r=Reflect.has(e,n);return(!isSymbol$1(n)||!builtInSymbols.has(n))&&track(e,"has",n),r}function ownKeys$2(e){return track(e,"iterate",isArray$3(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$1,ownKeys:ownKeys$2},readonlyHandlers={get:readonlyGet,set(e,n){return!0},deleteProperty(e,n){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function get$2(e,n,r=!1,g=!1){e=e.__v_raw;const y=toRaw(e),k=toRaw(n);r||(n!==k&&track(y,"get",n),track(y,"get",k));const{has:$}=getProto(y),V=g?toShallow:r?toReadonly:toReactive;if($.call(y,n))return V(e.get(n));if($.call(y,k))return V(e.get(k));e!==y&&e.get(n)}function has(e,n=!1){const r=this.__v_raw,g=toRaw(r),y=toRaw(e);return n||(e!==y&&track(g,"has",e),track(g,"has",y)),e===y?r.has(e):r.has(e)||r.has(y)}function size(e,n=!1){return e=e.__v_raw,!n&&track(toRaw(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add$1(e){e=toRaw(e);const n=toRaw(this);return getProto(n).has.call(n,e)||(n.add(e),trigger(n,"add",e,e)),this}function set$2(e,n){n=toRaw(n);const r=toRaw(this),{has:g,get:y}=getProto(r);let k=g.call(r,e);k||(e=toRaw(e),k=g.call(r,e));const $=y.call(r,e);return r.set(e,n),k?hasChanged(n,$)&&trigger(r,"set",e,n):trigger(r,"add",e,n),this}function deleteEntry(e){const n=toRaw(this),{has:r,get:g}=getProto(n);let y=r.call(n,e);y||(e=toRaw(e),y=r.call(n,e)),g&&g.call(n,e);const k=n.delete(e);return y&&trigger(n,"delete",e,void 0),k}function clear(){const e=toRaw(this),n=e.size!==0,r=e.clear();return n&&trigger(e,"clear",void 0,void 0),r}function createForEach(e,n){return function(g,y){const k=this,$=k.__v_raw,V=toRaw($),L=n?toShallow:e?toReadonly:toReactive;return!e&&track(V,"iterate",ITERATE_KEY),$.forEach((z,j)=>g.call(y,L(z),L(j),k))}}function createIterableMethod(e,n,r){return function(...g){const y=this.__v_raw,k=toRaw(y),$=isMap$1(k),V=e==="entries"||e===Symbol.iterator&&$,L=e==="keys"&&$,z=y[e](...g),j=r?toShallow:n?toReadonly:toReactive;return!n&&track(k,"iterate",L?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:ae,done:re}=z.next();return re?{value:ae,done:re}:{value:V?[j(ae[0]),j(ae[1])]:j(ae),done:re}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...n){return e==="delete"?!1:this}}function createInstrumentations(){const e={get(k){return get$2(this,k)},get size(){return size(this)},has,add:add$1,set:set$2,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},n={get(k){return get$2(this,k,!1,!0)},get size(){return size(this)},has,add:add$1,set:set$2,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},r={get(k){return get$2(this,k,!0)},get size(){return size(this,!0)},has(k){return has.call(this,k,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},g={get(k){return get$2(this,k,!0,!0)},get size(){return size(this,!0)},has(k){return has.call(this,k,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(k=>{e[k]=createIterableMethod(k,!1,!1),r[k]=createIterableMethod(k,!0,!1),n[k]=createIterableMethod(k,!1,!0),g[k]=createIterableMethod(k,!0,!0)}),[e,r,n,g]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,n){const r=n?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(g,y,k)=>y==="__v_isReactive"?!e:y==="__v_isReadonly"?e:y==="__v_raw"?g:Reflect.get(hasOwn$1(r,y)&&y in g?r:g,y,k)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(e,n,r,g,y){if(!isObject$3(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const k=y.get(e);if(k)return k;const $=getTargetType(e);if($===0)return e;const V=new Proxy(e,$===2?g:r);return y.set(e,V),V}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw(e){const n=e&&e.__v_raw;return n?toRaw(n):e}function markRaw(e){return def(e,"__v_skip",!0),e}const toReactive=e=>isObject$3(e)?reactive(e):e,toReadonly=e=>isObject$3(e)?readonly(e):e;function trackRefValue(e){shouldTrack&&activeEffect&&(e=toRaw(e),trackEffects(e.dep||(e.dep=createDep())))}function triggerRefValue(e,n){e=toRaw(e);const r=e.dep;r&&triggerEffects(r)}function isRef(e){return!!(e&&e.__v_isRef===!0)}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,n){return isRef(e)?e:new RefImpl(e,n)}class RefImpl{constructor(n,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?n:toRaw(n),this._value=r?n:toReactive(n)}get value(){return trackRefValue(this),this._value}set value(n){const r=this.__v_isShallow||isShallow(n)||isReadonly(n);n=r?n:toRaw(n),hasChanged(n,this._rawValue)&&(this._rawValue=n,this._value=r?n:toReactive(n),triggerRefValue(this))}}function triggerRef(e){triggerRefValue(e)}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,n,r)=>unref(Reflect.get(e,n,r)),set:(e,n,r,g)=>{const y=e[n];return isRef(y)&&!isRef(r)?(y.value=r,!0):Reflect.set(e,n,r,g)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}function toRefs(e){const n=isArray$3(e)?new Array(e.length):{};for(const r in e)n[r]=propertyToRef(e,r);return n}class ObjectRefImpl{constructor(n,r,g){this._object=n,this._key=r,this._defaultValue=g,this.__v_isRef=!0}get value(){const n=this._object[this._key];return n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(n){this._getter=n,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function toRef(e,n,r){return isRef(e)?e:isFunction$3(e)?new GetterRefImpl(e):isObject$3(e)&&arguments.length>1?propertyToRef(e,n,r):ref(e)}function propertyToRef(e,n,r){const g=e[n];return isRef(g)?g:new ObjectRefImpl(e,n,r)}class ComputedRefImpl{constructor(n,r,g,y){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(n,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!y,this.__v_isReadonly=g}get value(){const n=toRaw(this);return trackRefValue(n),(n._dirty||!n._cacheable)&&(n._dirty=!1,n._value=n.effect.run()),n._value}set value(n){this._setter(n)}}function computed$1(e,n,r=!1){let g,y;const k=isFunction$3(e);return k?(g=e,y=NOOP):(g=e.get,y=e.set),new ComputedRefImpl(g,y,k||!y,r)}function warn$1(e,...n){}function callWithErrorHandling(e,n,r,g){let y;try{y=g?e(...g):e()}catch(k){handleError(k,n,r)}return y}function callWithAsyncErrorHandling(e,n,r,g){if(isFunction$3(e)){const k=callWithErrorHandling(e,n,r,g);return k&&isPromise(k)&&k.catch($=>{handleError($,n,r)}),k}const y=[];for(let k=0;k<e.length;k++)y.push(callWithAsyncErrorHandling(e[k],n,r,g));return y}function handleError(e,n,r,g=!0){const y=n?n.vnode:null;if(n){let k=n.parent;const $=n.proxy,V=r;for(;k;){const z=k.ec;if(z){for(let j=0;j<z.length;j++)if(z[j](e,$,V)===!1)return}k=k.parent}const L=n.appContext.config.errorHandler;if(L){callWithErrorHandling(L,null,10,[e,$,V]);return}}logError(e,r,y,g)}function logError(e,n,r,g=!0){console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const n=currentFlushPromise||resolvedPromise;return e?n.then(this?e.bind(this):e):n}function findInsertionIndex(e){let n=flushIndex+1,r=queue.length;for(;n<r;){const g=n+r>>>1;getId(queue[g])<e?n=g+1:r=g}return n}function queueJob(e){(!queue.length||!queue.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex))&&(e.id==null?queue.push(e):queue.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const n=queue.indexOf(e);n>flushIndex&&queue.splice(n,1)}function queuePostFlushCb(e){isArray$3(e)?pendingPostFlushCbs.push(...e):(!activePostFlushCbs||!activePostFlushCbs.includes(e,e.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(e),queueFlush()}function flushPreFlushCbs(e,n=isFlushing?flushIndex+1:0){for(;n<queue.length;n++){const r=queue[n];r&&r.pre&&(queue.splice(n,1),n--,r())}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const n=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...n);return}for(activePostFlushCbs=n,activePostFlushCbs.sort((r,g)=>getId(r)-getId(g)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?1/0:e.id,comparator=(e,n)=>{const r=getId(e)-getId(n);if(r===0){if(e.pre&&!n.pre)return-1;if(n.pre&&!e.pre)return 1}return r};function flushJobs(e){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const n=queue[flushIndex];n&&n.active!==!1&&callWithErrorHandling(n,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit$1(e,n,...r){if(e.isUnmounted)return;const g=e.vnode.props||EMPTY_OBJ;let y=r;const k=n.startsWith("update:"),$=k&&n.slice(7);if($&&$ in g){const j=`${$==="modelValue"?"model":$}Modifiers`,{number:ae,trim:re}=g[j]||EMPTY_OBJ;re&&(y=r.map(oe=>isString$3(oe)?oe.trim():oe)),ae&&(y=r.map(looseToNumber))}let V,L=g[V=toHandlerKey(n)]||g[V=toHandlerKey(camelize(n))];!L&&k&&(L=g[V=toHandlerKey(hyphenate(n))]),L&&callWithAsyncErrorHandling(L,e,6,y);const z=g[V+"Once"];if(z){if(!e.emitted)e.emitted={};else if(e.emitted[V])return;e.emitted[V]=!0,callWithAsyncErrorHandling(z,e,6,y)}}function normalizeEmitsOptions(e,n,r=!1){const g=n.emitsCache,y=g.get(e);if(y!==void 0)return y;const k=e.emits;let $={},V=!1;if(!isFunction$3(e)){const L=z=>{const j=normalizeEmitsOptions(z,n,!0);j&&(V=!0,extend($,j))};!r&&n.mixins.length&&n.mixins.forEach(L),e.extends&&L(e.extends),e.mixins&&e.mixins.forEach(L)}return!k&&!V?(isObject$3(e)&&g.set(e,null),null):(isArray$3(k)?k.forEach(L=>$[L]=null):extend($,k),isObject$3(e)&&g.set(e,$),$)}function isEmitListener(e,n){return!e||!isOn(n)?!1:(n=n.slice(2).replace(/Once$/,""),hasOwn$1(e,n[0].toLowerCase()+n.slice(1))||hasOwn$1(e,hyphenate(n))||hasOwn$1(e,n))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const n=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,n}function pushScopeId(e){currentScopeId=e}function popScopeId(){currentScopeId=null}function withCtx(e,n=currentRenderingInstance,r){if(!n||e._n)return e;const g=(...y)=>{g._d&&setBlockTracking(-1);const k=setCurrentRenderingInstance(n);let $;try{$=e(...y)}finally{setCurrentRenderingInstance(k),g._d&&setBlockTracking(1)}return $};return g._n=!0,g._c=!0,g._d=!0,g}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:n,vnode:r,proxy:g,withProxy:y,props:k,propsOptions:[$],slots:V,attrs:L,emit:z,render:j,renderCache:ae,data:re,setupState:oe,ctx:ue,inheritAttrs:le}=e;let de,he;const _e=setCurrentRenderingInstance(e);try{if(r.shapeFlag&4){const Ne=y||g;de=normalizeVNode(j.call(Ne,Ne,ae,k,oe,re,ue)),he=L}else{const Ne=n;de=normalizeVNode(Ne.length>1?Ne(k,{attrs:L,slots:V,emit:z}):Ne(k,null)),he=n.props?L:getFunctionalFallthrough(L)}}catch(Ne){blockStack.length=0,handleError(Ne,e,1),de=createVNode(Comment)}let Ce=de;if(he&&le!==!1){const Ne=Object.keys(he),{shapeFlag:$e}=Ce;Ne.length&&$e&7&&($&&Ne.some(isModelListener)&&(he=filterModelListeners(he,$)),Ce=cloneVNode(Ce,he))}return r.dirs&&(Ce=cloneVNode(Ce),Ce.dirs=Ce.dirs?Ce.dirs.concat(r.dirs):r.dirs),r.transition&&(Ce.transition=r.transition),de=Ce,setCurrentRenderingInstance(_e),de}const getFunctionalFallthrough=e=>{let n;for(const r in e)(r==="class"||r==="style"||isOn(r))&&((n||(n={}))[r]=e[r]);return n},filterModelListeners=(e,n)=>{const r={};for(const g in e)(!isModelListener(g)||!(g.slice(9)in n))&&(r[g]=e[g]);return r};function shouldUpdateComponent(e,n,r){const{props:g,children:y,component:k}=e,{props:$,children:V,patchFlag:L}=n,z=k.emitsOptions;if(n.dirs||n.transition)return!0;if(r&&L>=0){if(L&1024)return!0;if(L&16)return g?hasPropsChanged(g,$,z):!!$;if(L&8){const j=n.dynamicProps;for(let ae=0;ae<j.length;ae++){const re=j[ae];if($[re]!==g[re]&&!isEmitListener(z,re))return!0}}}else return(y||V)&&(!V||!V.$stable)?!0:g===$?!1:g?$?hasPropsChanged(g,$,z):!0:!!$;return!1}function hasPropsChanged(e,n,r){const g=Object.keys(n);if(g.length!==Object.keys(e).length)return!0;for(let y=0;y<g.length;y++){const k=g[y];if(n[k]!==e[k]&&!isEmitListener(r,k))return!0}return!1}function updateHOCHostEl({vnode:e,parent:n},r){for(;n&&n.subTree===e;)(e=n.vnode).el=r,n=n.parent}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,n){n&&n.pendingBranch?isArray$3(e)?n.effects.push(...e):n.effects.push(e):queuePostFlushCb(e)}function watchEffect(e,n){return doWatch(e,null,n)}const INITIAL_WATCHER_VALUE={};function watch(e,n,r){return doWatch(e,n,r)}function doWatch(e,n,{immediate:r,deep:g,flush:y,onTrack:k,onTrigger:$}=EMPTY_OBJ){var V;const L=getCurrentScope()===((V=currentInstance)==null?void 0:V.scope)?currentInstance:null;let z,j=!1,ae=!1;if(isRef(e)?(z=()=>e.value,j=isShallow(e)):isReactive(e)?(z=()=>e,g=!0):isArray$3(e)?(ae=!0,j=e.some(Ne=>isReactive(Ne)||isShallow(Ne)),z=()=>e.map(Ne=>{if(isRef(Ne))return Ne.value;if(isReactive(Ne))return traverse(Ne);if(isFunction$3(Ne))return callWithErrorHandling(Ne,L,2)})):isFunction$3(e)?n?z=()=>callWithErrorHandling(e,L,2):z=()=>{if(!(L&&L.isUnmounted))return re&&re(),callWithAsyncErrorHandling(e,L,3,[oe])}:z=NOOP,n&&g){const Ne=z;z=()=>traverse(Ne())}let re,oe=Ne=>{re=_e.onStop=()=>{callWithErrorHandling(Ne,L,4)}},ue;if(isInSSRComponentSetup)if(oe=NOOP,n?r&&callWithAsyncErrorHandling(n,L,3,[z(),ae?[]:void 0,oe]):z(),y==="sync"){const Ne=useSSRContext();ue=Ne.__watcherHandles||(Ne.__watcherHandles=[])}else return NOOP;let le=ae?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const de=()=>{if(_e.active)if(n){const Ne=_e.run();(g||j||(ae?Ne.some(($e,xe)=>hasChanged($e,le[xe])):hasChanged(Ne,le)))&&(re&&re(),callWithAsyncErrorHandling(n,L,3,[Ne,le===INITIAL_WATCHER_VALUE?void 0:ae&&le[0]===INITIAL_WATCHER_VALUE?[]:le,oe]),le=Ne)}else _e.run()};de.allowRecurse=!!n;let he;y==="sync"?he=de:y==="post"?he=()=>queuePostRenderEffect(de,L&&L.suspense):(de.pre=!0,L&&(de.id=L.uid),he=()=>queueJob(de));const _e=new ReactiveEffect(z,he);n?r?de():le=_e.run():y==="post"?queuePostRenderEffect(_e.run.bind(_e),L&&L.suspense):_e.run();const Ce=()=>{_e.stop(),L&&L.scope&&remove$1(L.scope.effects,_e)};return ue&&ue.push(Ce),Ce}function instanceWatch(e,n,r){const g=this.proxy,y=isString$3(e)?e.includes(".")?createPathGetter(g,e):()=>g[e]:e.bind(g,g);let k;isFunction$3(n)?k=n:(k=n.handler,r=n);const $=currentInstance;setCurrentInstance(this);const V=doWatch(y,k.bind(g),r);return $?setCurrentInstance($):unsetCurrentInstance(),V}function createPathGetter(e,n){const r=n.split(".");return()=>{let g=e;for(let y=0;y<r.length&&g;y++)g=g[r[y]];return g}}function traverse(e,n){if(!isObject$3(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),isRef(e))traverse(e.value,n);else if(isArray$3(e))for(let r=0;r<e.length;r++)traverse(e[r],n);else if(isSet$1(e)||isMap$1(e))e.forEach(r=>{traverse(r,n)});else if(isPlainObject$2(e))for(const r in e)traverse(e[r],n);return e}function withDirectives(e,n){const r=currentRenderingInstance;if(r===null)return e;const g=getExposeProxy(r)||r.proxy,y=e.dirs||(e.dirs=[]);for(let k=0;k<n.length;k++){let[$,V,L,z=EMPTY_OBJ]=n[k];$&&(isFunction$3($)&&($={mounted:$,updated:$}),$.deep&&traverse(V),y.push({dir:$,instance:g,value:V,oldValue:void 0,arg:L,modifiers:z}))}return e}function invokeDirectiveHook(e,n,r,g){const y=e.dirs,k=n&&n.dirs;for(let $=0;$<y.length;$++){const V=y[$];k&&(V.oldValue=k[$].value);let L=V.dir[g];L&&(pauseTracking(),callWithAsyncErrorHandling(L,r,8,[e.el,V,e,n]),resetTracking())}}function useTransitionState(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{e.isMounted=!0}),onBeforeUnmount(()=>{e.isUnmounting=!0}),e}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(e,{slots:n}){const r=getCurrentInstance(),g=useTransitionState();let y;return()=>{const k=n.default&&getTransitionRawChildren(n.default(),!0);if(!k||!k.length)return;let $=k[0];if(k.length>1){for(const le of k)if(le.type!==Comment){$=le;break}}const V=toRaw(e),{mode:L}=V;if(g.isLeaving)return emptyPlaceholder($);const z=getKeepAliveChild($);if(!z)return emptyPlaceholder($);const j=resolveTransitionHooks(z,V,g,r);setTransitionHooks(z,j);const ae=r.subTree,re=ae&&getKeepAliveChild(ae);let oe=!1;const{getTransitionKey:ue}=z.type;if(ue){const le=ue();y===void 0?y=le:le!==y&&(y=le,oe=!0)}if(re&&re.type!==Comment&&(!isSameVNodeType(z,re)||oe)){const le=resolveTransitionHooks(re,V,g,r);if(setTransitionHooks(re,le),L==="out-in")return g.isLeaving=!0,le.afterLeave=()=>{g.isLeaving=!1,r.update.active!==!1&&r.update()},emptyPlaceholder($);L==="in-out"&&z.type!==Comment&&(le.delayLeave=(de,he,_e)=>{const Ce=getLeavingNodesForType(g,re);Ce[String(re.key)]=re,de._leaveCb=()=>{he(),de._leaveCb=void 0,delete j.delayedLeave},j.delayedLeave=_e})}return $}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(e,n){const{leavingVNodes:r}=e;let g=r.get(n.type);return g||(g=Object.create(null),r.set(n.type,g)),g}function resolveTransitionHooks(e,n,r,g){const{appear:y,mode:k,persisted:$=!1,onBeforeEnter:V,onEnter:L,onAfterEnter:z,onEnterCancelled:j,onBeforeLeave:ae,onLeave:re,onAfterLeave:oe,onLeaveCancelled:ue,onBeforeAppear:le,onAppear:de,onAfterAppear:he,onAppearCancelled:_e}=n,Ce=String(e.key),Ne=getLeavingNodesForType(r,e),$e=(ze,qe)=>{ze&&callWithAsyncErrorHandling(ze,g,9,qe)},xe=(ze,qe)=>{const Et=qe[1];$e(ze,qe),isArray$3(ze)?ze.every(_n=>_n.length<=1)&&Et():ze.length<=1&&Et()},Ie={mode:k,persisted:$,beforeEnter(ze){let qe=V;if(!r.isMounted)if(y)qe=le||V;else return;ze._leaveCb&&ze._leaveCb(!0);const Et=Ne[Ce];Et&&isSameVNodeType(e,Et)&&Et.el._leaveCb&&Et.el._leaveCb(),$e(qe,[ze])},enter(ze){let qe=L,Et=z,_n=j;if(!r.isMounted)if(y)qe=de||L,Et=he||z,_n=_e||j;else return;let Dt=!1;const Sn=ze._enterCb=hn=>{Dt||(Dt=!0,hn?$e(_n,[ze]):$e(Et,[ze]),Ie.delayedLeave&&Ie.delayedLeave(),ze._enterCb=void 0)};qe?xe(qe,[ze,Sn]):Sn()},leave(ze,qe){const Et=String(e.key);if(ze._enterCb&&ze._enterCb(!0),r.isUnmounting)return qe();$e(ae,[ze]);let _n=!1;const Dt=ze._leaveCb=Sn=>{_n||(_n=!0,qe(),Sn?$e(ue,[ze]):$e(oe,[ze]),ze._leaveCb=void 0,Ne[Et]===e&&delete Ne[Et])};Ne[Et]=e,re?xe(re,[ze,Dt]):Dt()},clone(ze){return resolveTransitionHooks(ze,n,r,g)}};return Ie}function emptyPlaceholder(e){if(isKeepAlive(e))return e=cloneVNode(e),e.children=null,e}function getKeepAliveChild(e){return isKeepAlive(e)?e.children?e.children[0]:void 0:e}function setTransitionHooks(e,n){e.shapeFlag&6&&e.component?setTransitionHooks(e.component.subTree,n):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function getTransitionRawChildren(e,n=!1,r){let g=[],y=0;for(let k=0;k<e.length;k++){let $=e[k];const V=r==null?$.key:String(r)+String($.key!=null?$.key:k);$.type===Fragment?($.patchFlag&128&&y++,g=g.concat(getTransitionRawChildren($.children,n,V))):(n||$.type!==Comment)&&g.push(V!=null?cloneVNode($,{key:V}):$)}if(y>1)for(let k=0;k<g.length;k++)g[k].patchFlag=-2;return g}function defineComponent(e,n){return isFunction$3(e)?extend({name:e.name},n,{setup:e}):e}const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,n){registerKeepAliveHook(e,"a",n)}function onDeactivated(e,n){registerKeepAliveHook(e,"da",n)}function registerKeepAliveHook(e,n,r=currentInstance){const g=e.__wdc||(e.__wdc=()=>{let y=r;for(;y;){if(y.isDeactivated)return;y=y.parent}return e()});if(injectHook(n,g,r),r){let y=r.parent;for(;y&&y.parent;)isKeepAlive(y.parent.vnode)&&injectToKeepAliveRoot(g,n,r,y),y=y.parent}}function injectToKeepAliveRoot(e,n,r,g){const y=injectHook(n,e,g,!0);onUnmounted(()=>{remove$1(g[n],y)},r)}function injectHook(e,n,r=currentInstance,g=!1){if(r){const y=r[e]||(r[e]=[]),k=n.__weh||(n.__weh=(...$)=>{if(r.isUnmounted)return;pauseTracking(),setCurrentInstance(r);const V=callWithAsyncErrorHandling(n,r,e,$);return unsetCurrentInstance(),resetTracking(),V});return g?y.unshift(k):y.push(k),k}}const createHook=e=>(n,r=currentInstance)=>(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...g)=>n(...g),r),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,n=currentInstance){injectHook("ec",e,n)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(e,n){return resolveAsset(COMPONENTS,e,!0,n)||e}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(e){return isString$3(e)?resolveAsset(COMPONENTS,e,!1)||e:e||NULL_DYNAMIC_COMPONENT}function resolveDirective(e){return resolveAsset(DIRECTIVES,e)}function resolveAsset(e,n,r=!0,g=!1){const y=currentRenderingInstance||currentInstance;if(y){const k=y.type;if(e===COMPONENTS){const V=getComponentName(k,!1);if(V&&(V===n||V===camelize(n)||V===capitalize$2(camelize(n))))return k}const $=resolve(y[e]||k[e],n)||resolve(y.appContext[e],n);return!$&&g?k:$}}function resolve(e,n){return e&&(e[n]||e[camelize(n)]||e[capitalize$2(camelize(n))])}function renderList(e,n,r,g){let y;const k=r&&r[g];if(isArray$3(e)||isString$3(e)){y=new Array(e.length);for(let $=0,V=e.length;$<V;$++)y[$]=n(e[$],$,void 0,k&&k[$])}else if(typeof e=="number"){y=new Array(e);for(let $=0;$<e;$++)y[$]=n($+1,$,void 0,k&&k[$])}else if(isObject$3(e))if(e[Symbol.iterator])y=Array.from(e,($,V)=>n($,V,void 0,k&&k[V]));else{const $=Object.keys(e);y=new Array($.length);for(let V=0,L=$.length;V<L;V++){const z=$[V];y[V]=n(e[z],z,V,k&&k[V])}}else y=[];return r&&(r[g]=y),y}function createSlots(e,n){for(let r=0;r<n.length;r++){const g=n[r];if(isArray$3(g))for(let y=0;y<g.length;y++)e[g[y].name]=g[y].fn;else g&&(e[g.name]=g.key?(...y)=>{const k=g.fn(...y);return k&&(k.key=g.key),k}:g.fn)}return e}function renderSlot(e,n,r={},g,y){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return n!=="default"&&(r.name=n),createVNode("slot",r,g&&g());let k=e[n];k&&k._c&&(k._d=!1),openBlock();const $=k&&ensureValidVNode(k(r)),V=createBlock(Fragment,{key:r.key||$&&$.key||`_${n}`},$||(g?g():[]),$&&e._===1?64:-2);return!y&&V.scopeId&&(V.slotScopeIds=[V.scopeId+"-s"]),k&&k._c&&(k._d=!0),V}function ensureValidVNode(e){return e.some(n=>isVNode$1(n)?!(n.type===Comment||n.type===Fragment&&!ensureValidVNode(n.children)):!0)?e:null}function toHandlers(e,n){const r={};for(const g in e)r[n&&/[A-Z]/.test(g)?`on:${g}`:toHandlerKey(g)]=e[g];return r}const getPublicInstance=e=>e?isStatefulComponent(e)?getExposeProxy(e)||e.proxy:getPublicInstance(e.parent):null,publicPropertiesMap=extend(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>queueJob(e.update)),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,n)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn$1(e,n),PublicInstanceProxyHandlers={get({_:e},n){const{ctx:r,setupState:g,data:y,props:k,accessCache:$,type:V,appContext:L}=e;let z;if(n[0]!=="$"){const oe=$[n];if(oe!==void 0)switch(oe){case 1:return g[n];case 2:return y[n];case 4:return r[n];case 3:return k[n]}else{if(hasSetupBinding(g,n))return $[n]=1,g[n];if(y!==EMPTY_OBJ&&hasOwn$1(y,n))return $[n]=2,y[n];if((z=e.propsOptions[0])&&hasOwn$1(z,n))return $[n]=3,k[n];if(r!==EMPTY_OBJ&&hasOwn$1(r,n))return $[n]=4,r[n];shouldCacheAccess&&($[n]=0)}}const j=publicPropertiesMap[n];let ae,re;if(j)return n==="$attrs"&&track(e,"get",n),j(e);if((ae=V.__cssModules)&&(ae=ae[n]))return ae;if(r!==EMPTY_OBJ&&hasOwn$1(r,n))return $[n]=4,r[n];if(re=L.config.globalProperties,hasOwn$1(re,n))return re[n]},set({_:e},n,r){const{data:g,setupState:y,ctx:k}=e;return hasSetupBinding(y,n)?(y[n]=r,!0):g!==EMPTY_OBJ&&hasOwn$1(g,n)?(g[n]=r,!0):hasOwn$1(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(k[n]=r,!0)},has({_:{data:e,setupState:n,accessCache:r,ctx:g,appContext:y,propsOptions:k}},$){let V;return!!r[$]||e!==EMPTY_OBJ&&hasOwn$1(e,$)||hasSetupBinding(n,$)||(V=k[0])&&hasOwn$1(V,$)||hasOwn$1(g,$)||hasOwn$1(publicPropertiesMap,$)||hasOwn$1(y.config.globalProperties,$)},defineProperty(e,n,r){return r.get!=null?e._.accessCache[n]=0:hasOwn$1(r,"value")&&this.set(e,n,r.value,null),Reflect.defineProperty(e,n,r)}};function useSlots(){return getContext().slots}function useAttrs$1(){return getContext().attrs}function getContext(){const e=getCurrentInstance();return e.setupContext||(e.setupContext=createSetupContext(e))}function normalizePropsOrEmits(e){return isArray$3(e)?e.reduce((n,r)=>(n[r]=null,n),{}):e}let shouldCacheAccess=!0;function applyOptions(e){const n=resolveMergedOptions(e),r=e.proxy,g=e.ctx;shouldCacheAccess=!1,n.beforeCreate&&callHook$1(n.beforeCreate,e,"bc");const{data:y,computed:k,methods:$,watch:V,provide:L,inject:z,created:j,beforeMount:ae,mounted:re,beforeUpdate:oe,updated:ue,activated:le,deactivated:de,beforeDestroy:he,beforeUnmount:_e,destroyed:Ce,unmounted:Ne,render:$e,renderTracked:xe,renderTriggered:Ie,errorCaptured:ze,serverPrefetch:qe,expose:Et,inheritAttrs:_n,components:Dt,directives:Sn,filters:hn}=n;if(z&&resolveInjections(z,g,null),$)for(const $n in $){const Nn=$[$n];isFunction$3(Nn)&&(g[$n]=Nn.bind(r))}if(y){const $n=y.call(r,r);isObject$3($n)&&(e.data=reactive($n))}if(shouldCacheAccess=!0,k)for(const $n in k){const Nn=k[$n],kn=isFunction$3(Nn)?Nn.bind(r,r):isFunction$3(Nn.get)?Nn.get.bind(r,r):NOOP,jn=!isFunction$3(Nn)&&isFunction$3(Nn.set)?Nn.set.bind(r):NOOP,Fn=computed({get:kn,set:jn});Object.defineProperty(g,$n,{enumerable:!0,configurable:!0,get:()=>Fn.value,set:Tn=>Fn.value=Tn})}if(V)for(const $n in V)createWatcher(V[$n],g,r,$n);if(L){const $n=isFunction$3(L)?L.call(r):L;Reflect.ownKeys($n).forEach(Nn=>{provide(Nn,$n[Nn])})}j&&callHook$1(j,e,"c");function Mn($n,Nn){isArray$3(Nn)?Nn.forEach(kn=>$n(kn.bind(r))):Nn&&$n(Nn.bind(r))}if(Mn(onBeforeMount,ae),Mn(onMounted,re),Mn(onBeforeUpdate,oe),Mn(onUpdated,ue),Mn(onActivated,le),Mn(onDeactivated,de),Mn(onErrorCaptured,ze),Mn(onRenderTracked,xe),Mn(onRenderTriggered,Ie),Mn(onBeforeUnmount,_e),Mn(onUnmounted,Ne),Mn(onServerPrefetch,qe),isArray$3(Et))if(Et.length){const $n=e.exposed||(e.exposed={});Et.forEach(Nn=>{Object.defineProperty($n,Nn,{get:()=>r[Nn],set:kn=>r[Nn]=kn})})}else e.exposed||(e.exposed={});$e&&e.render===NOOP&&(e.render=$e),_n!=null&&(e.inheritAttrs=_n),Dt&&(e.components=Dt),Sn&&(e.directives=Sn)}function resolveInjections(e,n,r=NOOP){isArray$3(e)&&(e=normalizeInject(e));for(const g in e){const y=e[g];let k;isObject$3(y)?"default"in y?k=inject(y.from||g,y.default,!0):k=inject(y.from||g):k=inject(y),isRef(k)?Object.defineProperty(n,g,{enumerable:!0,configurable:!0,get:()=>k.value,set:$=>k.value=$}):n[g]=k}}function callHook$1(e,n,r){callWithAsyncErrorHandling(isArray$3(e)?e.map(g=>g.bind(n.proxy)):e.bind(n.proxy),n,r)}function createWatcher(e,n,r,g){const y=g.includes(".")?createPathGetter(r,g):()=>r[g];if(isString$3(e)){const k=n[e];isFunction$3(k)&&watch(y,k)}else if(isFunction$3(e))watch(y,e.bind(r));else if(isObject$3(e))if(isArray$3(e))e.forEach(k=>createWatcher(k,n,r,g));else{const k=isFunction$3(e.handler)?e.handler.bind(r):n[e.handler];isFunction$3(k)&&watch(y,k,e)}}function resolveMergedOptions(e){const n=e.type,{mixins:r,extends:g}=n,{mixins:y,optionsCache:k,config:{optionMergeStrategies:$}}=e.appContext,V=k.get(n);let L;return V?L=V:!y.length&&!r&&!g?L=n:(L={},y.length&&y.forEach(z=>mergeOptions$2(L,z,$,!0)),mergeOptions$2(L,n,$)),isObject$3(n)&&k.set(n,L),L}function mergeOptions$2(e,n,r,g=!1){const{mixins:y,extends:k}=n;k&&mergeOptions$2(e,k,r,!0),y&&y.forEach($=>mergeOptions$2(e,$,r,!0));for(const $ in n)if(!(g&&$==="expose")){const V=internalOptionMergeStrats[$]||r&&r[$];e[$]=V?V(e[$],n[$]):n[$]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,n){return n?e?function(){return extend(isFunction$3(e)?e.call(this,this):e,isFunction$3(n)?n.call(this,this):n)}:n:e}function mergeInject(e,n){return mergeObjectOptions(normalizeInject(e),normalizeInject(n))}function normalizeInject(e){if(isArray$3(e)){const n={};for(let r=0;r<e.length;r++)n[e[r]]=e[r];return n}return e}function mergeAsArray(e,n){return e?[...new Set([].concat(e,n))]:n}function mergeObjectOptions(e,n){return e?extend(Object.create(null),e,n):n}function mergeEmitsOrPropsOptions(e,n){return e?isArray$3(e)&&isArray$3(n)?[...new Set([...e,...n])]:extend(Object.create(null),normalizePropsOrEmits(e),normalizePropsOrEmits(n??{})):n}function mergeWatchOptions(e,n){if(!e)return n;if(!n)return e;const r=extend(Object.create(null),e);for(const g in n)r[g]=mergeAsArray(e[g],n[g]);return r}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,n){return function(g,y=null){isFunction$3(g)||(g=extend({},g)),y!=null&&!isObject$3(y)&&(y=null);const k=createAppContext(),$=new Set;let V=!1;const L=k.app={_uid:uid$1++,_component:g,_props:y,_container:null,_context:k,_instance:null,version:version$1,get config(){return k.config},set config(z){},use(z,...j){return $.has(z)||(z&&isFunction$3(z.install)?($.add(z),z.install(L,...j)):isFunction$3(z)&&($.add(z),z(L,...j))),L},mixin(z){return k.mixins.includes(z)||k.mixins.push(z),L},component(z,j){return j?(k.components[z]=j,L):k.components[z]},directive(z,j){return j?(k.directives[z]=j,L):k.directives[z]},mount(z,j,ae){if(!V){const re=createVNode(g,y);return re.appContext=k,j&&n?n(re,z):e(re,z,ae),V=!0,L._container=z,z.__vue_app__=L,getExposeProxy(re.component)||re.component.proxy}},unmount(){V&&(e(null,L._container),delete L._container.__vue_app__)},provide(z,j){return k.provides[z]=j,L},runWithContext(z){currentApp=L;try{return z()}finally{currentApp=null}}};return L}}let currentApp=null;function provide(e,n){if(currentInstance){let r=currentInstance.provides;const g=currentInstance.parent&&currentInstance.parent.provides;g===r&&(r=currentInstance.provides=Object.create(g)),r[e]=n}}function inject(e,n,r=!1){const g=currentInstance||currentRenderingInstance;if(g||currentApp){const y=g?g.parent==null?g.vnode.appContext&&g.vnode.appContext.provides:g.parent.provides:currentApp._context.provides;if(y&&e in y)return y[e];if(arguments.length>1)return r&&isFunction$3(n)?n.call(g&&g.proxy):n}}function initProps(e,n,r,g=!1){const y={},k={};def(k,InternalObjectKey,1),e.propsDefaults=Object.create(null),setFullProps(e,n,y,k);for(const $ in e.propsOptions[0])$ in y||(y[$]=void 0);r?e.props=g?y:shallowReactive(y):e.type.props?e.props=y:e.props=k,e.attrs=k}function updateProps(e,n,r,g){const{props:y,attrs:k,vnode:{patchFlag:$}}=e,V=toRaw(y),[L]=e.propsOptions;let z=!1;if((g||$>0)&&!($&16)){if($&8){const j=e.vnode.dynamicProps;for(let ae=0;ae<j.length;ae++){let re=j[ae];if(isEmitListener(e.emitsOptions,re))continue;const oe=n[re];if(L)if(hasOwn$1(k,re))oe!==k[re]&&(k[re]=oe,z=!0);else{const ue=camelize(re);y[ue]=resolvePropValue(L,V,ue,oe,e,!1)}else oe!==k[re]&&(k[re]=oe,z=!0)}}}else{setFullProps(e,n,y,k)&&(z=!0);let j;for(const ae in V)(!n||!hasOwn$1(n,ae)&&((j=hyphenate(ae))===ae||!hasOwn$1(n,j)))&&(L?r&&(r[ae]!==void 0||r[j]!==void 0)&&(y[ae]=resolvePropValue(L,V,ae,void 0,e,!0)):delete y[ae]);if(k!==V)for(const ae in k)(!n||!hasOwn$1(n,ae))&&(delete k[ae],z=!0)}z&&trigger(e,"set","$attrs")}function setFullProps(e,n,r,g){const[y,k]=e.propsOptions;let $=!1,V;if(n)for(let L in n){if(isReservedProp(L))continue;const z=n[L];let j;y&&hasOwn$1(y,j=camelize(L))?!k||!k.includes(j)?r[j]=z:(V||(V={}))[j]=z:isEmitListener(e.emitsOptions,L)||(!(L in g)||z!==g[L])&&(g[L]=z,$=!0)}if(k){const L=toRaw(r),z=V||EMPTY_OBJ;for(let j=0;j<k.length;j++){const ae=k[j];r[ae]=resolvePropValue(y,L,ae,z[ae],e,!hasOwn$1(z,ae))}}return $}function resolvePropValue(e,n,r,g,y,k){const $=e[r];if($!=null){const V=hasOwn$1($,"default");if(V&&g===void 0){const L=$.default;if($.type!==Function&&!$.skipFactory&&isFunction$3(L)){const{propsDefaults:z}=y;r in z?g=z[r]:(setCurrentInstance(y),g=z[r]=L.call(null,n),unsetCurrentInstance())}else g=L}$[0]&&(k&&!V?g=!1:$[1]&&(g===""||g===hyphenate(r))&&(g=!0))}return g}function normalizePropsOptions(e,n,r=!1){const g=n.propsCache,y=g.get(e);if(y)return y;const k=e.props,$={},V=[];let L=!1;if(!isFunction$3(e)){const j=ae=>{L=!0;const[re,oe]=normalizePropsOptions(ae,n,!0);extend($,re),oe&&V.push(...oe)};!r&&n.mixins.length&&n.mixins.forEach(j),e.extends&&j(e.extends),e.mixins&&e.mixins.forEach(j)}if(!k&&!L)return isObject$3(e)&&g.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$3(k))for(let j=0;j<k.length;j++){const ae=camelize(k[j]);validatePropName(ae)&&($[ae]=EMPTY_OBJ)}else if(k)for(const j in k){const ae=camelize(j);if(validatePropName(ae)){const re=k[j],oe=$[ae]=isArray$3(re)||isFunction$3(re)?{type:re}:extend({},re);if(oe){const ue=getTypeIndex(Boolean,oe.type),le=getTypeIndex(String,oe.type);oe[0]=ue>-1,oe[1]=le<0||ue<le,(ue>-1||hasOwn$1(oe,"default"))&&V.push(ae)}}}const z=[$,V];return isObject$3(e)&&g.set(e,z),z}function validatePropName(e){return e[0]!=="$"}function getType(e){const n=e&&e.toString().match(/^\s*(function|class) (\w+)/);return n?n[2]:e===null?"null":""}function isSameType(e,n){return getType(e)===getType(n)}function getTypeIndex(e,n){return isArray$3(n)?n.findIndex(r=>isSameType(r,e)):isFunction$3(n)&&isSameType(n,e)?0:-1}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray$3(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot$1=(e,n,r)=>{if(n._n)return n;const g=withCtx((...y)=>normalizeSlotValue(n(...y)),r);return g._c=!1,g},normalizeObjectSlots=(e,n,r)=>{const g=e._ctx;for(const y in e){if(isInternalKey(y))continue;const k=e[y];if(isFunction$3(k))n[y]=normalizeSlot$1(y,k,g);else if(k!=null){const $=normalizeSlotValue(k);n[y]=()=>$}}},normalizeVNodeSlots=(e,n)=>{const r=normalizeSlotValue(n);e.slots.default=()=>r},initSlots=(e,n)=>{if(e.vnode.shapeFlag&32){const r=n._;r?(e.slots=toRaw(n),def(n,"_",r)):normalizeObjectSlots(n,e.slots={})}else e.slots={},n&&normalizeVNodeSlots(e,n);def(e.slots,InternalObjectKey,1)},updateSlots=(e,n,r)=>{const{vnode:g,slots:y}=e;let k=!0,$=EMPTY_OBJ;if(g.shapeFlag&32){const V=n._;V?r&&V===1?k=!1:(extend(y,n),!r&&V===1&&delete y._):(k=!n.$stable,normalizeObjectSlots(n,y)),$=n}else n&&(normalizeVNodeSlots(e,n),$={default:1});if(k)for(const V in y)!isInternalKey(V)&&!(V in $)&&delete y[V]};function setRef(e,n,r,g,y=!1){if(isArray$3(e)){e.forEach((re,oe)=>setRef(re,n&&(isArray$3(n)?n[oe]:n),r,g,y));return}if(isAsyncWrapper(g)&&!y)return;const k=g.shapeFlag&4?getExposeProxy(g.component)||g.component.proxy:g.el,$=y?null:k,{i:V,r:L}=e,z=n&&n.r,j=V.refs===EMPTY_OBJ?V.refs={}:V.refs,ae=V.setupState;if(z!=null&&z!==L&&(isString$3(z)?(j[z]=null,hasOwn$1(ae,z)&&(ae[z]=null)):isRef(z)&&(z.value=null)),isFunction$3(L))callWithErrorHandling(L,V,12,[$,j]);else{const re=isString$3(L),oe=isRef(L);if(re||oe){const ue=()=>{if(e.f){const le=re?hasOwn$1(ae,L)?ae[L]:j[L]:L.value;y?isArray$3(le)&&remove$1(le,k):isArray$3(le)?le.includes(k)||le.push(k):re?(j[L]=[k],hasOwn$1(ae,L)&&(ae[L]=j[L])):(L.value=[k],e.k&&(j[e.k]=L.value))}else re?(j[L]=$,hasOwn$1(ae,L)&&(ae[L]=$)):oe&&(L.value=$,e.k&&(j[e.k]=$))};$?(ue.id=-1,queuePostRenderEffect(ue,r)):ue()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,n){const r=getGlobalThis$1();r.__VUE__=!0;const{insert:g,remove:y,patchProp:k,createElement:$,createText:V,createComment:L,setText:z,setElementText:j,parentNode:ae,nextSibling:re,setScopeId:oe=NOOP,insertStaticContent:ue}=e,le=(ra,Gn,vn,Kn=null,En=null,kt=null,At=!1,Dn=null,Xn=!!Gn.dynamicChildren)=>{if(ra===Gn)return;ra&&!isSameVNodeType(ra,Gn)&&(Kn=Bn(ra),Tn(ra,En,kt,!0),ra=null),Gn.patchFlag===-2&&(Xn=!1,Gn.dynamicChildren=null);const{type:aa,ref:sa,shapeFlag:ia}=Gn;switch(aa){case Text$2:de(ra,Gn,vn,Kn);break;case Comment:he(ra,Gn,vn,Kn);break;case Static:ra==null&&_e(Gn,vn,Kn,At);break;case Fragment:Dt(ra,Gn,vn,Kn,En,kt,At,Dn,Xn);break;default:ia&1?$e(ra,Gn,vn,Kn,En,kt,At,Dn,Xn):ia&6?Sn(ra,Gn,vn,Kn,En,kt,At,Dn,Xn):(ia&64||ia&128)&&aa.process(ra,Gn,vn,Kn,En,kt,At,Dn,Xn,da)}sa!=null&&En&&setRef(sa,ra&&ra.ref,kt,Gn||ra,!Gn)},de=(ra,Gn,vn,Kn)=>{if(ra==null)g(Gn.el=V(Gn.children),vn,Kn);else{const En=Gn.el=ra.el;Gn.children!==ra.children&&z(En,Gn.children)}},he=(ra,Gn,vn,Kn)=>{ra==null?g(Gn.el=L(Gn.children||""),vn,Kn):Gn.el=ra.el},_e=(ra,Gn,vn,Kn)=>{[ra.el,ra.anchor]=ue(ra.children,Gn,vn,Kn,ra.el,ra.anchor)},Ce=({el:ra,anchor:Gn},vn,Kn)=>{let En;for(;ra&&ra!==Gn;)En=re(ra),g(ra,vn,Kn),ra=En;g(Gn,vn,Kn)},Ne=({el:ra,anchor:Gn})=>{let vn;for(;ra&&ra!==Gn;)vn=re(ra),y(ra),ra=vn;y(Gn)},$e=(ra,Gn,vn,Kn,En,kt,At,Dn,Xn)=>{At=At||Gn.type==="svg",ra==null?xe(Gn,vn,Kn,En,kt,At,Dn,Xn):qe(ra,Gn,En,kt,At,Dn,Xn)},xe=(ra,Gn,vn,Kn,En,kt,At,Dn)=>{let Xn,aa;const{type:sa,props:ia,shapeFlag:ma,transition:ua,dirs:pe}=ra;if(Xn=ra.el=$(ra.type,kt,ia&&ia.is,ia),ma&8?j(Xn,ra.children):ma&16&&ze(ra.children,Xn,null,Kn,En,kt&&sa!=="foreignObject",At,Dn),pe&&invokeDirectiveHook(ra,null,Kn,"created"),Ie(Xn,ra,ra.scopeId,At,Kn),ia){for(const Ve in ia)Ve!=="value"&&!isReservedProp(Ve)&&k(Xn,Ve,null,ia[Ve],kt,ra.children,Kn,En,Zn);"value"in ia&&k(Xn,"value",null,ia.value),(aa=ia.onVnodeBeforeMount)&&invokeVNodeHook(aa,Kn,ra)}pe&&invokeDirectiveHook(ra,null,Kn,"beforeMount");const Oe=(!En||En&&!En.pendingBranch)&&ua&&!ua.persisted;Oe&&ua.beforeEnter(Xn),g(Xn,Gn,vn),((aa=ia&&ia.onVnodeMounted)||Oe||pe)&&queuePostRenderEffect(()=>{aa&&invokeVNodeHook(aa,Kn,ra),Oe&&ua.enter(Xn),pe&&invokeDirectiveHook(ra,null,Kn,"mounted")},En)},Ie=(ra,Gn,vn,Kn,En)=>{if(vn&&oe(ra,vn),Kn)for(let kt=0;kt<Kn.length;kt++)oe(ra,Kn[kt]);if(En){let kt=En.subTree;if(Gn===kt){const At=En.vnode;Ie(ra,At,At.scopeId,At.slotScopeIds,En.parent)}}},ze=(ra,Gn,vn,Kn,En,kt,At,Dn,Xn=0)=>{for(let aa=Xn;aa<ra.length;aa++){const sa=ra[aa]=Dn?cloneIfMounted(ra[aa]):normalizeVNode(ra[aa]);le(null,sa,Gn,vn,Kn,En,kt,At,Dn)}},qe=(ra,Gn,vn,Kn,En,kt,At)=>{const Dn=Gn.el=ra.el;let{patchFlag:Xn,dynamicChildren:aa,dirs:sa}=Gn;Xn|=ra.patchFlag&16;const ia=ra.props||EMPTY_OBJ,ma=Gn.props||EMPTY_OBJ;let ua;vn&&toggleRecurse(vn,!1),(ua=ma.onVnodeBeforeUpdate)&&invokeVNodeHook(ua,vn,Gn,ra),sa&&invokeDirectiveHook(Gn,ra,vn,"beforeUpdate"),vn&&toggleRecurse(vn,!0);const pe=En&&Gn.type!=="foreignObject";if(aa?Et(ra.dynamicChildren,aa,Dn,vn,Kn,pe,kt):At||Nn(ra,Gn,Dn,null,vn,Kn,pe,kt,!1),Xn>0){if(Xn&16)_n(Dn,Gn,ia,ma,vn,Kn,En);else if(Xn&2&&ia.class!==ma.class&&k(Dn,"class",null,ma.class,En),Xn&4&&k(Dn,"style",ia.style,ma.style,En),Xn&8){const Oe=Gn.dynamicProps;for(let Ve=0;Ve<Oe.length;Ve++){const Ue=Oe[Ve],Pt=ia[Ue],Lt=ma[Ue];(Lt!==Pt||Ue==="value")&&k(Dn,Ue,Pt,Lt,En,ra.children,vn,Kn,Zn)}}Xn&1&&ra.children!==Gn.children&&j(Dn,Gn.children)}else!At&&aa==null&&_n(Dn,Gn,ia,ma,vn,Kn,En);((ua=ma.onVnodeUpdated)||sa)&&queuePostRenderEffect(()=>{ua&&invokeVNodeHook(ua,vn,Gn,ra),sa&&invokeDirectiveHook(Gn,ra,vn,"updated")},Kn)},Et=(ra,Gn,vn,Kn,En,kt,At)=>{for(let Dn=0;Dn<Gn.length;Dn++){const Xn=ra[Dn],aa=Gn[Dn],sa=Xn.el&&(Xn.type===Fragment||!isSameVNodeType(Xn,aa)||Xn.shapeFlag&70)?ae(Xn.el):vn;le(Xn,aa,sa,null,Kn,En,kt,At,!0)}},_n=(ra,Gn,vn,Kn,En,kt,At)=>{if(vn!==Kn){if(vn!==EMPTY_OBJ)for(const Dn in vn)!isReservedProp(Dn)&&!(Dn in Kn)&&k(ra,Dn,vn[Dn],null,At,Gn.children,En,kt,Zn);for(const Dn in Kn){if(isReservedProp(Dn))continue;const Xn=Kn[Dn],aa=vn[Dn];Xn!==aa&&Dn!=="value"&&k(ra,Dn,aa,Xn,At,Gn.children,En,kt,Zn)}"value"in Kn&&k(ra,"value",vn.value,Kn.value)}},Dt=(ra,Gn,vn,Kn,En,kt,At,Dn,Xn)=>{const aa=Gn.el=ra?ra.el:V(""),sa=Gn.anchor=ra?ra.anchor:V("");let{patchFlag:ia,dynamicChildren:ma,slotScopeIds:ua}=Gn;ua&&(Dn=Dn?Dn.concat(ua):ua),ra==null?(g(aa,vn,Kn),g(sa,vn,Kn),ze(Gn.children,vn,sa,En,kt,At,Dn,Xn)):ia>0&&ia&64&&ma&&ra.dynamicChildren?(Et(ra.dynamicChildren,ma,vn,En,kt,At,Dn),(Gn.key!=null||En&&Gn===En.subTree)&&traverseStaticChildren(ra,Gn,!0)):Nn(ra,Gn,vn,sa,En,kt,At,Dn,Xn)},Sn=(ra,Gn,vn,Kn,En,kt,At,Dn,Xn)=>{Gn.slotScopeIds=Dn,ra==null?Gn.shapeFlag&512?En.ctx.activate(Gn,vn,Kn,At,Xn):hn(Gn,vn,Kn,En,kt,At,Xn):Vn(ra,Gn,Xn)},hn=(ra,Gn,vn,Kn,En,kt,At)=>{const Dn=ra.component=createComponentInstance(ra,Kn,En);if(isKeepAlive(ra)&&(Dn.ctx.renderer=da),setupComponent(Dn),Dn.asyncDep){if(En&&En.registerDep(Dn,Mn),!ra.el){const Xn=Dn.subTree=createVNode(Comment);he(null,Xn,Gn,vn)}return}Mn(Dn,ra,Gn,vn,En,kt,At)},Vn=(ra,Gn,vn)=>{const Kn=Gn.component=ra.component;if(shouldUpdateComponent(ra,Gn,vn))if(Kn.asyncDep&&!Kn.asyncResolved){$n(Kn,Gn,vn);return}else Kn.next=Gn,invalidateJob(Kn.update),Kn.update();else Gn.el=ra.el,Kn.vnode=Gn},Mn=(ra,Gn,vn,Kn,En,kt,At)=>{const Dn=()=>{if(ra.isMounted){let{next:sa,bu:ia,u:ma,parent:ua,vnode:pe}=ra,Oe=sa,Ve;toggleRecurse(ra,!1),sa?(sa.el=pe.el,$n(ra,sa,At)):sa=pe,ia&&invokeArrayFns(ia),(Ve=sa.props&&sa.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Ve,ua,sa,pe),toggleRecurse(ra,!0);const Ue=renderComponentRoot(ra),Pt=ra.subTree;ra.subTree=Ue,le(Pt,Ue,ae(Pt.el),Bn(Pt),ra,En,kt),sa.el=Ue.el,Oe===null&&updateHOCHostEl(ra,Ue.el),ma&&queuePostRenderEffect(ma,En),(Ve=sa.props&&sa.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Ve,ua,sa,pe),En)}else{let sa;const{el:ia,props:ma}=Gn,{bm:ua,m:pe,parent:Oe}=ra,Ve=isAsyncWrapper(Gn);if(toggleRecurse(ra,!1),ua&&invokeArrayFns(ua),!Ve&&(sa=ma&&ma.onVnodeBeforeMount)&&invokeVNodeHook(sa,Oe,Gn),toggleRecurse(ra,!0),ia&&Ca){const Ue=()=>{ra.subTree=renderComponentRoot(ra),Ca(ia,ra.subTree,ra,En,null)};Ve?Gn.type.__asyncLoader().then(()=>!ra.isUnmounted&&Ue()):Ue()}else{const Ue=ra.subTree=renderComponentRoot(ra);le(null,Ue,vn,Kn,ra,En,kt),Gn.el=Ue.el}if(pe&&queuePostRenderEffect(pe,En),!Ve&&(sa=ma&&ma.onVnodeMounted)){const Ue=Gn;queuePostRenderEffect(()=>invokeVNodeHook(sa,Oe,Ue),En)}(Gn.shapeFlag&256||Oe&&isAsyncWrapper(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&ra.a&&queuePostRenderEffect(ra.a,En),ra.isMounted=!0,Gn=vn=Kn=null}},Xn=ra.effect=new ReactiveEffect(Dn,()=>queueJob(aa),ra.scope),aa=ra.update=()=>Xn.run();aa.id=ra.uid,toggleRecurse(ra,!0),aa()},$n=(ra,Gn,vn)=>{Gn.component=ra;const Kn=ra.vnode.props;ra.vnode=Gn,ra.next=null,updateProps(ra,Gn.props,Kn,vn),updateSlots(ra,Gn.children,vn),pauseTracking(),flushPreFlushCbs(),resetTracking()},Nn=(ra,Gn,vn,Kn,En,kt,At,Dn,Xn=!1)=>{const aa=ra&&ra.children,sa=ra?ra.shapeFlag:0,ia=Gn.children,{patchFlag:ma,shapeFlag:ua}=Gn;if(ma>0){if(ma&128){jn(aa,ia,vn,Kn,En,kt,At,Dn,Xn);return}else if(ma&256){kn(aa,ia,vn,Kn,En,kt,At,Dn,Xn);return}}ua&8?(sa&16&&Zn(aa,En,kt),ia!==aa&&j(vn,ia)):sa&16?ua&16?jn(aa,ia,vn,Kn,En,kt,At,Dn,Xn):Zn(aa,En,kt,!0):(sa&8&&j(vn,""),ua&16&&ze(ia,vn,Kn,En,kt,At,Dn,Xn))},kn=(ra,Gn,vn,Kn,En,kt,At,Dn,Xn)=>{ra=ra||EMPTY_ARR,Gn=Gn||EMPTY_ARR;const aa=ra.length,sa=Gn.length,ia=Math.min(aa,sa);let ma;for(ma=0;ma<ia;ma++){const ua=Gn[ma]=Xn?cloneIfMounted(Gn[ma]):normalizeVNode(Gn[ma]);le(ra[ma],ua,vn,null,En,kt,At,Dn,Xn)}aa>sa?Zn(ra,En,kt,!0,!1,ia):ze(Gn,vn,Kn,En,kt,At,Dn,Xn,ia)},jn=(ra,Gn,vn,Kn,En,kt,At,Dn,Xn)=>{let aa=0;const sa=Gn.length;let ia=ra.length-1,ma=sa-1;for(;aa<=ia&&aa<=ma;){const ua=ra[aa],pe=Gn[aa]=Xn?cloneIfMounted(Gn[aa]):normalizeVNode(Gn[aa]);if(isSameVNodeType(ua,pe))le(ua,pe,vn,null,En,kt,At,Dn,Xn);else break;aa++}for(;aa<=ia&&aa<=ma;){const ua=ra[ia],pe=Gn[ma]=Xn?cloneIfMounted(Gn[ma]):normalizeVNode(Gn[ma]);if(isSameVNodeType(ua,pe))le(ua,pe,vn,null,En,kt,At,Dn,Xn);else break;ia--,ma--}if(aa>ia){if(aa<=ma){const ua=ma+1,pe=ua<sa?Gn[ua].el:Kn;for(;aa<=ma;)le(null,Gn[aa]=Xn?cloneIfMounted(Gn[aa]):normalizeVNode(Gn[aa]),vn,pe,En,kt,At,Dn,Xn),aa++}}else if(aa>ma)for(;aa<=ia;)Tn(ra[aa],En,kt,!0),aa++;else{const ua=aa,pe=aa,Oe=new Map;for(aa=pe;aa<=ma;aa++){const xn=Gn[aa]=Xn?cloneIfMounted(Gn[aa]):normalizeVNode(Gn[aa]);xn.key!=null&&Oe.set(xn.key,aa)}let Ve,Ue=0;const Pt=ma-pe+1;let Lt=!1,bn=0;const jt=new Array(Pt);for(aa=0;aa<Pt;aa++)jt[aa]=0;for(aa=ua;aa<=ia;aa++){const xn=ra[aa];if(Ue>=Pt){Tn(xn,En,kt,!0);continue}let In;if(xn.key!=null)In=Oe.get(xn.key);else for(Ve=pe;Ve<=ma;Ve++)if(jt[Ve-pe]===0&&isSameVNodeType(xn,Gn[Ve])){In=Ve;break}In===void 0?Tn(xn,En,kt,!0):(jt[In-pe]=aa+1,In>=bn?bn=In:Lt=!0,le(xn,Gn[In],vn,null,En,kt,At,Dn,Xn),Ue++)}const Cn=Lt?getSequence(jt):EMPTY_ARR;for(Ve=Cn.length-1,aa=Pt-1;aa>=0;aa--){const xn=pe+aa,In=Gn[xn],Ln=xn+1<sa?Gn[xn+1].el:Kn;jt[aa]===0?le(null,In,vn,Ln,En,kt,At,Dn,Xn):Lt&&(Ve<0||aa!==Cn[Ve]?Fn(In,vn,Ln,2):Ve--)}}},Fn=(ra,Gn,vn,Kn,En=null)=>{const{el:kt,type:At,transition:Dn,children:Xn,shapeFlag:aa}=ra;if(aa&6){Fn(ra.component.subTree,Gn,vn,Kn);return}if(aa&128){ra.suspense.move(Gn,vn,Kn);return}if(aa&64){At.move(ra,Gn,vn,da);return}if(At===Fragment){g(kt,Gn,vn);for(let ia=0;ia<Xn.length;ia++)Fn(Xn[ia],Gn,vn,Kn);g(ra.anchor,Gn,vn);return}if(At===Static){Ce(ra,Gn,vn);return}if(Kn!==2&&aa&1&&Dn)if(Kn===0)Dn.beforeEnter(kt),g(kt,Gn,vn),queuePostRenderEffect(()=>Dn.enter(kt),En);else{const{leave:ia,delayLeave:ma,afterLeave:ua}=Dn,pe=()=>g(kt,Gn,vn),Oe=()=>{ia(kt,()=>{pe(),ua&&ua()})};ma?ma(kt,pe,Oe):Oe()}else g(kt,Gn,vn)},Tn=(ra,Gn,vn,Kn=!1,En=!1)=>{const{type:kt,props:At,ref:Dn,children:Xn,dynamicChildren:aa,shapeFlag:sa,patchFlag:ia,dirs:ma}=ra;if(Dn!=null&&setRef(Dn,null,vn,ra,!0),sa&256){Gn.ctx.deactivate(ra);return}const ua=sa&1&&ma,pe=!isAsyncWrapper(ra);let Oe;if(pe&&(Oe=At&&At.onVnodeBeforeUnmount)&&invokeVNodeHook(Oe,Gn,ra),sa&6)ca(ra.component,vn,Kn);else{if(sa&128){ra.suspense.unmount(vn,Kn);return}ua&&invokeDirectiveHook(ra,null,Gn,"beforeUnmount"),sa&64?ra.type.remove(ra,Gn,vn,En,da,Kn):aa&&(kt!==Fragment||ia>0&&ia&64)?Zn(aa,Gn,vn,!1,!0):(kt===Fragment&&ia&384||!En&&sa&16)&&Zn(Xn,Gn,vn),Kn&&Hn(ra)}(pe&&(Oe=At&&At.onVnodeUnmounted)||ua)&&queuePostRenderEffect(()=>{Oe&&invokeVNodeHook(Oe,Gn,ra),ua&&invokeDirectiveHook(ra,null,Gn,"unmounted")},vn)},Hn=ra=>{const{type:Gn,el:vn,anchor:Kn,transition:En}=ra;if(Gn===Fragment){la(vn,Kn);return}if(Gn===Static){Ne(ra);return}const kt=()=>{y(vn),En&&!En.persisted&&En.afterLeave&&En.afterLeave()};if(ra.shapeFlag&1&&En&&!En.persisted){const{leave:At,delayLeave:Dn}=En,Xn=()=>At(vn,kt);Dn?Dn(ra.el,kt,Xn):Xn()}else kt()},la=(ra,Gn)=>{let vn;for(;ra!==Gn;)vn=re(ra),y(ra),ra=vn;y(Gn)},ca=(ra,Gn,vn)=>{const{bum:Kn,scope:En,update:kt,subTree:At,um:Dn}=ra;Kn&&invokeArrayFns(Kn),En.stop(),kt&&(kt.active=!1,Tn(At,ra,Gn,vn)),Dn&&queuePostRenderEffect(Dn,Gn),queuePostRenderEffect(()=>{ra.isUnmounted=!0},Gn),Gn&&Gn.pendingBranch&&!Gn.isUnmounted&&ra.asyncDep&&!ra.asyncResolved&&ra.suspenseId===Gn.pendingId&&(Gn.deps--,Gn.deps===0&&Gn.resolve())},Zn=(ra,Gn,vn,Kn=!1,En=!1,kt=0)=>{for(let At=kt;At<ra.length;At++)Tn(ra[At],Gn,vn,Kn,En)},Bn=ra=>ra.shapeFlag&6?Bn(ra.component.subTree):ra.shapeFlag&128?ra.suspense.next():re(ra.anchor||ra.el),Wn=(ra,Gn,vn)=>{ra==null?Gn._vnode&&Tn(Gn._vnode,null,null,!0):le(Gn._vnode||null,ra,Gn,null,null,null,vn),flushPreFlushCbs(),flushPostFlushCbs(),Gn._vnode=ra},da={p:le,um:Tn,m:Fn,r:Hn,mt:hn,mc:ze,pc:Nn,pbc:Et,n:Bn,o:e};let ga,Ca;return n&&([ga,Ca]=n(da)),{render:Wn,hydrate:ga,createApp:createAppAPI(Wn,ga)}}function toggleRecurse({effect:e,update:n},r){e.allowRecurse=n.allowRecurse=r}function traverseStaticChildren(e,n,r=!1){const g=e.children,y=n.children;if(isArray$3(g)&&isArray$3(y))for(let k=0;k<g.length;k++){const $=g[k];let V=y[k];V.shapeFlag&1&&!V.dynamicChildren&&((V.patchFlag<=0||V.patchFlag===32)&&(V=y[k]=cloneIfMounted(y[k]),V.el=$.el),r||traverseStaticChildren($,V)),V.type===Text$2&&(V.el=$.el)}}function getSequence(e){const n=e.slice(),r=[0];let g,y,k,$,V;const L=e.length;for(g=0;g<L;g++){const z=e[g];if(z!==0){if(y=r[r.length-1],e[y]<z){n[g]=y,r.push(g);continue}for(k=0,$=r.length-1;k<$;)V=k+$>>1,e[r[V]]<z?k=V+1:$=V;z<e[r[k]]&&(k>0&&(n[g]=r[k-1]),r[k]=g)}}for(k=r.length,$=r[k-1];k-- >0;)r[k]=$,$=n[$];return r}const isTeleport=e=>e.__isTeleport,isTeleportDisabled=e=>e&&(e.disabled||e.disabled===""),isTargetSVG=e=>typeof SVGElement<"u"&&e instanceof SVGElement,resolveTarget=(e,n)=>{const r=e&&e.to;return isString$3(r)?n?n(r):null:r},TeleportImpl={__isTeleport:!0,process(e,n,r,g,y,k,$,V,L,z){const{mc:j,pc:ae,pbc:re,o:{insert:oe,querySelector:ue,createText:le,createComment:de}}=z,he=isTeleportDisabled(n.props);let{shapeFlag:_e,children:Ce,dynamicChildren:Ne}=n;if(e==null){const $e=n.el=le(""),xe=n.anchor=le("");oe($e,r,g),oe(xe,r,g);const Ie=n.target=resolveTarget(n.props,ue),ze=n.targetAnchor=le("");Ie&&(oe(ze,Ie),$=$||isTargetSVG(Ie));const qe=(Et,_n)=>{_e&16&&j(Ce,Et,_n,y,k,$,V,L)};he?qe(r,xe):Ie&&qe(Ie,ze)}else{n.el=e.el;const $e=n.anchor=e.anchor,xe=n.target=e.target,Ie=n.targetAnchor=e.targetAnchor,ze=isTeleportDisabled(e.props),qe=ze?r:xe,Et=ze?$e:Ie;if($=$||isTargetSVG(xe),Ne?(re(e.dynamicChildren,Ne,qe,y,k,$,V),traverseStaticChildren(e,n,!0)):L||ae(e,n,qe,Et,y,k,$,V,!1),he)ze||moveTeleport(n,r,$e,z,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const _n=n.target=resolveTarget(n.props,ue);_n&&moveTeleport(n,_n,null,z,0)}else ze&&moveTeleport(n,xe,Ie,z,1)}updateCssVars(n)},remove(e,n,r,g,{um:y,o:{remove:k}},$){const{shapeFlag:V,children:L,anchor:z,targetAnchor:j,target:ae,props:re}=e;if(ae&&k(j),($||!isTeleportDisabled(re))&&(k(z),V&16))for(let oe=0;oe<L.length;oe++){const ue=L[oe];y(ue,n,r,!0,!!ue.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(e,n,r,{o:{insert:g},m:y},k=2){k===0&&g(e.targetAnchor,n,r);const{el:$,anchor:V,shapeFlag:L,children:z,props:j}=e,ae=k===2;if(ae&&g($,n,r),(!ae||isTeleportDisabled(j))&&L&16)for(let re=0;re<z.length;re++)y(z[re],n,r,2);ae&&g(V,n,r)}function hydrateTeleport(e,n,r,g,y,k,{o:{nextSibling:$,parentNode:V,querySelector:L}},z){const j=n.target=resolveTarget(n.props,L);if(j){const ae=j._lpa||j.firstChild;if(n.shapeFlag&16)if(isTeleportDisabled(n.props))n.anchor=z($(e),n,V(e),r,g,y,k),n.targetAnchor=ae;else{n.anchor=$(e);let re=ae;for(;re;)if(re=$(re),re&&re.nodeType===8&&re.data==="teleport anchor"){n.targetAnchor=re,j._lpa=n.targetAnchor&&$(n.targetAnchor);break}z(ae,n,j,r,g,y,k)}updateCssVars(n)}return n.anchor&&$(n.anchor)}const Teleport=TeleportImpl;function updateCssVars(e){const n=e.ctx;if(n&&n.ut){let r=e.children[0].el;for(;r!==e.targetAnchor;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}const Fragment=Symbol.for("v-fgt"),Text$2=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,n,r,g,y,k){return setupBlock(createBaseVNode(e,n,r,g,y,k,!0))}function createBlock(e,n,r,g,y){return setupBlock(createVNode(e,n,r,g,y,!0))}function isVNode$1(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,n){return e.type===n.type&&e.key===n.key}const InternalObjectKey="__vInternal",normalizeKey=({key:e})=>e??null,normalizeRef=({ref:e,ref_key:n,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?isString$3(e)||isRef(e)||isFunction$3(e)?{i:currentRenderingInstance,r:e,k:n,f:!!r}:e:null);function createBaseVNode(e,n=null,r=null,g=0,y=null,k=e===Fragment?0:1,$=!1,V=!1){const L={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&normalizeKey(n),ref:n&&normalizeRef(n),scopeId:currentScopeId,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:k,patchFlag:g,dynamicProps:y,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return V?(normalizeChildren(L,r),k&128&&e.normalize(L)):r&&(L.shapeFlag|=isString$3(r)?8:16),isBlockTreeEnabled>0&&!$&&currentBlock&&(L.patchFlag>0||k&6)&&L.patchFlag!==32&&currentBlock.push(L),L}const createVNode=_createVNode;function _createVNode(e,n=null,r=null,g=0,y=null,k=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode$1(e)){const V=cloneVNode(e,n,!0);return r&&normalizeChildren(V,r),isBlockTreeEnabled>0&&!k&&currentBlock&&(V.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=V:currentBlock.push(V)),V.patchFlag|=-2,V}if(isClassComponent(e)&&(e=e.__vccOpts),n){n=guardReactiveProps(n);let{class:V,style:L}=n;V&&!isString$3(V)&&(n.class=normalizeClass(V)),isObject$3(L)&&(isProxy(L)&&!isArray$3(L)&&(L=extend({},L)),n.style=normalizeStyle(L))}const $=isString$3(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject$3(e)?4:isFunction$3(e)?2:0;return createBaseVNode(e,n,r,g,y,$,k,!0)}function guardReactiveProps(e){return e?isProxy(e)||InternalObjectKey in e?extend({},e):e:null}function cloneVNode(e,n,r=!1){const{props:g,ref:y,patchFlag:k,children:$}=e,V=n?mergeProps(g||{},n):g;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:V,key:V&&normalizeKey(V),ref:n&&n.ref?r&&y?isArray$3(y)?y.concat(normalizeRef(n)):[y,normalizeRef(n)]:normalizeRef(n):y,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:$,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==Fragment?k===-1?16:k|16:k,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function createTextVNode(e=" ",n=0){return createVNode(Text$2,null,e,n)}function createCommentVNode(e="",n=!1){return n?(openBlock(),createBlock(Comment,null,e)):createVNode(Comment,null,e)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray$3(e)?createVNode(Fragment,null,e.slice()):typeof e=="object"?cloneIfMounted(e):createVNode(Text$2,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,n){let r=0;const{shapeFlag:g}=e;if(n==null)n=null;else if(isArray$3(n))r=16;else if(typeof n=="object")if(g&65){const y=n.default;y&&(y._c&&(y._d=!1),normalizeChildren(e,y()),y._c&&(y._d=!0));return}else{r=32;const y=n._;!y&&!(InternalObjectKey in n)?n._ctx=currentRenderingInstance:y===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else isFunction$3(n)?(n={default:n,_ctx:currentRenderingInstance},r=32):(n=String(n),g&64?(r=16,n=[createTextVNode(n)]):r=8);e.children=n,e.shapeFlag|=r}function mergeProps(...e){const n={};for(let r=0;r<e.length;r++){const g=e[r];for(const y in g)if(y==="class")n.class!==g.class&&(n.class=normalizeClass([n.class,g.class]));else if(y==="style")n.style=normalizeStyle([n.style,g.style]);else if(isOn(y)){const k=n[y],$=g[y];$&&k!==$&&!(isArray$3(k)&&k.includes($))&&(n[y]=k?[].concat(k,$):$)}else y!==""&&(n[y]=g[y])}return n}function invokeVNodeHook(e,n,r,g=null){callWithAsyncErrorHandling(e,n,7,[r,g])}const emptyAppContext=createAppContext();let uid$2=0;function createComponentInstance(e,n,r){const g=e.type,y=(n?n.appContext:e.appContext)||emptyAppContext,k={uid:uid$2++,vnode:e,type:g,parent:n,appContext:y,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(y.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(g,y),emitsOptions:normalizeEmitsOptions(g,y),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:g.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return k.ctx={_:k},k.root=n?n.root:k,k.emit=emit$1.bind(null,k),e.ce&&e.ce(k),k}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis$1()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis$1()[settersKey]=[]),globalCurrentInstanceSetters.push(e=>currentInstance=e),internalSetCurrentInstance=e=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(n=>n(e)):globalCurrentInstanceSetters[0](e)};const setCurrentInstance=e=>{internalSetCurrentInstance(e),e.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,n=!1){isInSSRComponentSetup=n;const{props:r,children:g}=e.vnode,y=isStatefulComponent(e);initProps(e,r,y,n),initSlots(e,g);const k=y?setupStatefulComponent(e,n):void 0;return isInSSRComponentSetup=!1,k}function setupStatefulComponent(e,n){const r=e.type;e.accessCache=Object.create(null),e.proxy=markRaw(new Proxy(e.ctx,PublicInstanceProxyHandlers));const{setup:g}=r;if(g){const y=e.setupContext=g.length>1?createSetupContext(e):null;setCurrentInstance(e),pauseTracking();const k=callWithErrorHandling(g,e,0,[e.props,y]);if(resetTracking(),unsetCurrentInstance(),isPromise(k)){if(k.then(unsetCurrentInstance,unsetCurrentInstance),n)return k.then($=>{handleSetupResult(e,$,n)}).catch($=>{handleError($,e,0)});e.asyncDep=k}else handleSetupResult(e,k,n)}else finishComponentSetup(e,n)}function handleSetupResult(e,n,r){isFunction$3(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:isObject$3(n)&&(e.setupState=proxyRefs(n)),finishComponentSetup(e,r)}let compile$1;function finishComponentSetup(e,n,r){const g=e.type;if(!e.render){if(!n&&compile$1&&!g.render){const y=g.template||resolveMergedOptions(e).template;if(y){const{isCustomElement:k,compilerOptions:$}=e.appContext.config,{delimiters:V,compilerOptions:L}=g,z=extend(extend({isCustomElement:k,delimiters:V},$),L);g.render=compile$1(y,z)}}e.render=g.render||NOOP}setCurrentInstance(e),pauseTracking(),applyOptions(e),resetTracking(),unsetCurrentInstance()}function getAttrsProxy(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(n,r){return track(e,"get","$attrs"),n[r]}}))}function createSetupContext(e){const n=r=>{e.exposed=r||{}};return{get attrs(){return getAttrsProxy(e)},slots:e.slots,emit:e.emit,expose:n}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(n,r){if(r in n)return n[r];if(r in publicPropertiesMap)return publicPropertiesMap[r](e)},has(n,r){return r in n||r in publicPropertiesMap}}))}function getComponentName(e,n=!0){return isFunction$3(e)?e.displayName||e.name:e.name||n&&e.__name}function isClassComponent(e){return isFunction$3(e)&&"__vccOpts"in e}const computed=(e,n)=>computed$1(e,n,isInSSRComponentSetup);function h$1(e,n,r){const g=arguments.length;return g===2?isObject$3(n)&&!isArray$3(n)?isVNode$1(n)?createVNode(e,null,[n]):createVNode(e,n):createVNode(e,null,n):(g>3?r=Array.prototype.slice.call(arguments,2):g===3&&isVNode$1(r)&&(r=[r]),createVNode(e,n,r))}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),version$1="3.3.4",svgNS="http://www.w3.org/2000/svg",doc$1=typeof document<"u"?document:null,templateContainer=doc$1&&doc$1.createElement("template"),nodeOps={insert:(e,n,r)=>{n.insertBefore(e,r||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,r,g)=>{const y=n?doc$1.createElementNS(svgNS,e):doc$1.createElement(e,r?{is:r}:void 0);return e==="select"&&g&&g.multiple!=null&&y.setAttribute("multiple",g.multiple),y},createText:e=>doc$1.createTextNode(e),createComment:e=>doc$1.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc$1.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,r,g,y,k){const $=r?r.previousSibling:n.lastChild;if(y&&(y===k||y.nextSibling))for(;n.insertBefore(y.cloneNode(!0),r),!(y===k||!(y=y.nextSibling)););else{templateContainer.innerHTML=g?`<svg>${e}</svg>`:e;const V=templateContainer.content;if(g){const L=V.firstChild;for(;L.firstChild;)V.appendChild(L.firstChild);V.removeChild(L)}n.insertBefore(V,r)}return[$?$.nextSibling:n.firstChild,r?r.previousSibling:n.lastChild]}};function patchClass(e,n,r){const g=e._vtc;g&&(n=(n?[n,...g]:[...g]).join(" ")),n==null?e.removeAttribute("class"):r?e.setAttribute("class",n):e.className=n}function patchStyle(e,n,r){const g=e.style,y=isString$3(r);if(r&&!y){if(n&&!isString$3(n))for(const k in n)r[k]==null&&setStyle(g,k,"");for(const k in r)setStyle(g,k,r[k])}else{const k=g.display;y?n!==r&&(g.cssText=r):n&&e.removeAttribute("style"),"_vod"in e&&(g.display=k)}}const importantRE=/\s*!important$/;function setStyle(e,n,r){if(isArray$3(r))r.forEach(g=>setStyle(e,n,g));else if(r==null&&(r=""),n.startsWith("--"))e.setProperty(n,r);else{const g=autoPrefix(e,n);importantRE.test(r)?e.setProperty(hyphenate(g),r.replace(importantRE,""),"important"):e[g]=r}}const prefixes$1=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,n){const r=prefixCache[n];if(r)return r;let g=camelize(n);if(g!=="filter"&&g in e)return prefixCache[n]=g;g=capitalize$2(g);for(let y=0;y<prefixes$1.length;y++){const k=prefixes$1[y]+g;if(k in e)return prefixCache[n]=k}return n}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,n,r,g,y){if(g&&n.startsWith("xlink:"))r==null?e.removeAttributeNS(xlinkNS,n.slice(6,n.length)):e.setAttributeNS(xlinkNS,n,r);else{const k=isSpecialBooleanAttr(n);r==null||k&&!includeBooleanAttr(r)?e.removeAttribute(n):e.setAttribute(n,k?"":r)}}function patchDOMProp(e,n,r,g,y,k,$){if(n==="innerHTML"||n==="textContent"){g&&$(g,y,k),e[n]=r??"";return}const V=e.tagName;if(n==="value"&&V!=="PROGRESS"&&!V.includes("-")){e._value=r;const z=V==="OPTION"?e.getAttribute("value"):e.value,j=r??"";z!==j&&(e.value=j),r==null&&e.removeAttribute(n);return}let L=!1;if(r===""||r==null){const z=typeof e[n];z==="boolean"?r=includeBooleanAttr(r):r==null&&z==="string"?(r="",L=!0):z==="number"&&(r=0,L=!0)}try{e[n]=r}catch{}L&&e.removeAttribute(n)}function addEventListener(e,n,r,g){e.addEventListener(n,r,g)}function removeEventListener(e,n,r,g){e.removeEventListener(n,r,g)}function patchEvent(e,n,r,g,y=null){const k=e._vei||(e._vei={}),$=k[n];if(g&&$)$.value=g;else{const[V,L]=parseName(n);if(g){const z=k[n]=createInvoker(g,y);addEventListener(e,V,z,L)}else $&&(removeEventListener(e,V,$,L),k[n]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let n;if(optionsModifierRE.test(e)){n={};let g;for(;g=e.match(optionsModifierRE);)e=e.slice(0,e.length-g[0].length),n[g[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),n]}let cachedNow=0;const p$2=Promise.resolve(),getNow=()=>cachedNow||(p$2.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,n){const r=g=>{if(!g._vts)g._vts=Date.now();else if(g._vts<=r.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(g,r.value),n,5,[g])};return r.value=e,r.attached=getNow(),r}function patchStopImmediatePropagation(e,n){if(isArray$3(n)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},n.map(g=>y=>!y._stopped&&g&&g(y))}else return n}const nativeOnRE=/^on[a-z]/,patchProp=(e,n,r,g,y=!1,k,$,V,L)=>{n==="class"?patchClass(e,g,y):n==="style"?patchStyle(e,r,g):isOn(n)?isModelListener(n)||patchEvent(e,n,r,g,$):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):shouldSetAsProp(e,n,g,y))?patchDOMProp(e,n,g,k,$,V,L):(n==="true-value"?e._trueValue=g:n==="false-value"&&(e._falseValue=g),patchAttr(e,n,g,y))};function shouldSetAsProp(e,n,r,g){return g?!!(n==="innerHTML"||n==="textContent"||n in e&&nativeOnRE.test(n)&&isFunction$3(r)):n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA"||nativeOnRE.test(n)&&isString$3(r)?!1:n in e}const TRANSITION="transition",ANIMATION="animation",Transition=(e,{slots:n})=>h$1(BaseTransition,resolveTransitionProps(e),n);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),callHook=(e,n=[])=>{isArray$3(e)?e.forEach(r=>r(...n)):e&&e(...n)},hasExplicitCallback=e=>e?isArray$3(e)?e.some(n=>n.length>1):e.length>1:!1;function resolveTransitionProps(e){const n={};for(const Dt in e)Dt in DOMTransitionPropsValidators||(n[Dt]=e[Dt]);if(e.css===!1)return n;const{name:r="v",type:g,duration:y,enterFromClass:k=`${r}-enter-from`,enterActiveClass:$=`${r}-enter-active`,enterToClass:V=`${r}-enter-to`,appearFromClass:L=k,appearActiveClass:z=$,appearToClass:j=V,leaveFromClass:ae=`${r}-leave-from`,leaveActiveClass:re=`${r}-leave-active`,leaveToClass:oe=`${r}-leave-to`}=e,ue=normalizeDuration(y),le=ue&&ue[0],de=ue&&ue[1],{onBeforeEnter:he,onEnter:_e,onEnterCancelled:Ce,onLeave:Ne,onLeaveCancelled:$e,onBeforeAppear:xe=he,onAppear:Ie=_e,onAppearCancelled:ze=Ce}=n,qe=(Dt,Sn,hn)=>{removeTransitionClass(Dt,Sn?j:V),removeTransitionClass(Dt,Sn?z:$),hn&&hn()},Et=(Dt,Sn)=>{Dt._isLeaving=!1,removeTransitionClass(Dt,ae),removeTransitionClass(Dt,oe),removeTransitionClass(Dt,re),Sn&&Sn()},_n=Dt=>(Sn,hn)=>{const Vn=Dt?Ie:_e,Mn=()=>qe(Sn,Dt,hn);callHook(Vn,[Sn,Mn]),nextFrame(()=>{removeTransitionClass(Sn,Dt?L:k),addTransitionClass(Sn,Dt?j:V),hasExplicitCallback(Vn)||whenTransitionEnds(Sn,g,le,Mn)})};return extend(n,{onBeforeEnter(Dt){callHook(he,[Dt]),addTransitionClass(Dt,k),addTransitionClass(Dt,$)},onBeforeAppear(Dt){callHook(xe,[Dt]),addTransitionClass(Dt,L),addTransitionClass(Dt,z)},onEnter:_n(!1),onAppear:_n(!0),onLeave(Dt,Sn){Dt._isLeaving=!0;const hn=()=>Et(Dt,Sn);addTransitionClass(Dt,ae),forceReflow(),addTransitionClass(Dt,re),nextFrame(()=>{Dt._isLeaving&&(removeTransitionClass(Dt,ae),addTransitionClass(Dt,oe),hasExplicitCallback(Ne)||whenTransitionEnds(Dt,g,de,hn))}),callHook(Ne,[Dt,hn])},onEnterCancelled(Dt){qe(Dt,!1),callHook(Ce,[Dt])},onAppearCancelled(Dt){qe(Dt,!0),callHook(ze,[Dt])},onLeaveCancelled(Dt){Et(Dt),callHook($e,[Dt])}})}function normalizeDuration(e){if(e==null)return null;if(isObject$3(e))return[NumberOf(e.enter),NumberOf(e.leave)];{const n=NumberOf(e);return[n,n]}}function NumberOf(e){return toNumber$1(e)}function addTransitionClass(e,n){n.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e._vtc||(e._vtc=new Set)).add(n)}function removeTransitionClass(e,n){n.split(/\s+/).forEach(g=>g&&e.classList.remove(g));const{_vtc:r}=e;r&&(r.delete(n),r.size||(e._vtc=void 0))}function nextFrame(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let endId=0;function whenTransitionEnds(e,n,r,g){const y=e._endId=++endId,k=()=>{y===e._endId&&g()};if(r)return setTimeout(k,r);const{type:$,timeout:V,propCount:L}=getTransitionInfo(e,n);if(!$)return g();const z=$+"end";let j=0;const ae=()=>{e.removeEventListener(z,re),k()},re=oe=>{oe.target===e&&++j>=L&&ae()};setTimeout(()=>{j<L&&ae()},V+1),e.addEventListener(z,re)}function getTransitionInfo(e,n){const r=window.getComputedStyle(e),g=ue=>(r[ue]||"").split(", "),y=g(`${TRANSITION}Delay`),k=g(`${TRANSITION}Duration`),$=getTimeout(y,k),V=g(`${ANIMATION}Delay`),L=g(`${ANIMATION}Duration`),z=getTimeout(V,L);let j=null,ae=0,re=0;n===TRANSITION?$>0&&(j=TRANSITION,ae=$,re=k.length):n===ANIMATION?z>0&&(j=ANIMATION,ae=z,re=L.length):(ae=Math.max($,z),j=ae>0?$>z?TRANSITION:ANIMATION:null,re=j?j===TRANSITION?k.length:L.length:0);const oe=j===TRANSITION&&/\b(transform|all)(,|$)/.test(g(`${TRANSITION}Property`).toString());return{type:j,timeout:ae,propCount:re,hasTransform:oe}}function getTimeout(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max(...n.map((r,g)=>toMs(r)+toMs(e[g])))}function toMs(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const positionMap=new WeakMap,newPositionMap=new WeakMap,TransitionGroupImpl={name:"TransitionGroup",props:extend({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(e,{slots:n}){const r=getCurrentInstance(),g=useTransitionState();let y,k;return onUpdated(()=>{if(!y.length)return;const $=e.moveClass||`${e.name||"v"}-move`;if(!hasCSSTransform(y[0].el,r.vnode.el,$))return;y.forEach(callPendingCbs),y.forEach(recordPosition);const V=y.filter(applyTranslation);forceReflow(),V.forEach(L=>{const z=L.el,j=z.style;addTransitionClass(z,$),j.transform=j.webkitTransform=j.transitionDuration="";const ae=z._moveCb=re=>{re&&re.target!==z||(!re||/transform$/.test(re.propertyName))&&(z.removeEventListener("transitionend",ae),z._moveCb=null,removeTransitionClass(z,$))};z.addEventListener("transitionend",ae)})}),()=>{const $=toRaw(e),V=resolveTransitionProps($);let L=$.tag||Fragment;y=k,k=n.default?getTransitionRawChildren(n.default()):[];for(let z=0;z<k.length;z++){const j=k[z];j.key!=null&&setTransitionHooks(j,resolveTransitionHooks(j,V,g,r))}if(y)for(let z=0;z<y.length;z++){const j=y[z];setTransitionHooks(j,resolveTransitionHooks(j,V,g,r)),positionMap.set(j,j.el.getBoundingClientRect())}return createVNode(L,null,k)}}},removeMode=e=>delete e.mode;TransitionGroupImpl.props;const TransitionGroup=TransitionGroupImpl;function callPendingCbs(e){const n=e.el;n._moveCb&&n._moveCb(),n._enterCb&&n._enterCb()}function recordPosition(e){newPositionMap.set(e,e.el.getBoundingClientRect())}function applyTranslation(e){const n=positionMap.get(e),r=newPositionMap.get(e),g=n.left-r.left,y=n.top-r.top;if(g||y){const k=e.el.style;return k.transform=k.webkitTransform=`translate(${g}px,${y}px)`,k.transitionDuration="0s",e}}function hasCSSTransform(e,n,r){const g=e.cloneNode();e._vtc&&e._vtc.forEach($=>{$.split(/\s+/).forEach(V=>V&&g.classList.remove(V))}),r.split(/\s+/).forEach($=>$&&g.classList.add($)),g.style.display="none";const y=n.nodeType===1?n:n.parentNode;y.appendChild(g);const{hasTransform:k}=getTransitionInfo(g);return y.removeChild(g),k}const getModelAssigner=e=>{const n=e.props["onUpdate:modelValue"]||!1;return isArray$3(n)?r=>invokeArrayFns(n,r):n};function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const vModelText={created(e,{modifiers:{lazy:n,trim:r,number:g}},y){e._assign=getModelAssigner(y);const k=g||y.props&&y.props.type==="number";addEventListener(e,n?"change":"input",$=>{if($.target.composing)return;let V=e.value;r&&(V=V.trim()),k&&(V=looseToNumber(V)),e._assign(V)}),r&&addEventListener(e,"change",()=>{e.value=e.value.trim()}),n||(addEventListener(e,"compositionstart",onCompositionStart),addEventListener(e,"compositionend",onCompositionEnd),addEventListener(e,"change",onCompositionEnd))},mounted(e,{value:n}){e.value=n??""},beforeUpdate(e,{value:n,modifiers:{lazy:r,trim:g,number:y}},k){if(e._assign=getModelAssigner(k),e.composing||document.activeElement===e&&e.type!=="range"&&(r||g&&e.value.trim()===n||(y||e.type==="number")&&looseToNumber(e.value)===n))return;const $=n??"";e.value!==$&&(e.value=$)}},vModelCheckbox={deep:!0,created(e,n,r){e._assign=getModelAssigner(r),addEventListener(e,"change",()=>{const g=e._modelValue,y=getValue$2(e),k=e.checked,$=e._assign;if(isArray$3(g)){const V=looseIndexOf(g,y),L=V!==-1;if(k&&!L)$(g.concat(y));else if(!k&&L){const z=[...g];z.splice(V,1),$(z)}}else if(isSet$1(g)){const V=new Set(g);k?V.add(y):V.delete(y),$(V)}else $(getCheckboxValue(e,k))})},mounted:setChecked,beforeUpdate(e,n,r){e._assign=getModelAssigner(r),setChecked(e,n,r)}};function setChecked(e,{value:n,oldValue:r},g){e._modelValue=n,isArray$3(n)?e.checked=looseIndexOf(n,g.props.value)>-1:isSet$1(n)?e.checked=n.has(g.props.value):n!==r&&(e.checked=looseEqual(n,getCheckboxValue(e,!0)))}const vModelRadio={created(e,{value:n},r){e.checked=looseEqual(n,r.props.value),e._assign=getModelAssigner(r),addEventListener(e,"change",()=>{e._assign(getValue$2(e))})},beforeUpdate(e,{value:n,oldValue:r},g){e._assign=getModelAssigner(g),n!==r&&(e.checked=looseEqual(n,g.props.value))}};function getValue$2(e){return"_value"in e?e._value:e.value}function getCheckboxValue(e,n){const r=n?"_trueValue":"_falseValue";return r in e?e[r]:n}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>systemModifiers.some(r=>e[`${r}Key`]&&!n.includes(r))},withModifiers=(e,n)=>(r,...g)=>{for(let y=0;y<n.length;y++){const k=modifierGuards[n[y]];if(k&&k(r,n))return}return e(r,...g)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(e,n)=>r=>{if(!("key"in r))return;const g=hyphenate(r.key);if(n.some(y=>y===g||keyNames[y]===g))return e(r)},vShow={beforeMount(e,{value:n},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&n?r.beforeEnter(e):setDisplay(e,n)},mounted(e,{value:n},{transition:r}){r&&n&&r.enter(e)},updated(e,{value:n,oldValue:r},{transition:g}){!n!=!r&&(g?n?(g.beforeEnter(e),setDisplay(e,!0),g.enter(e)):g.leave(e,()=>{setDisplay(e,!1)}):setDisplay(e,n))},beforeUnmount(e,{value:n}){setDisplay(e,n)}};function setDisplay(e,n){e.style.display=n?e._vod:"none"}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const render$2=(...e)=>{ensureRenderer().render(...e)},createApp=(...e)=>{const n=ensureRenderer().createApp(...e),{mount:r}=n;return n.mount=g=>{const y=normalizeContainer(g);if(!y)return;const k=n._component;!isFunction$3(k)&&!k.render&&!k.template&&(k.template=y.innerHTML),y.innerHTML="";const $=r(y,!1,y instanceof SVGElement);return y instanceof Element&&(y.removeAttribute("v-cloak"),y.setAttribute("data-v-app","")),$},n};function normalizeContainer(e){return isString$3(e)?document.querySelector(e):e}/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const assign$2=Object.assign;function applyToParams(e,n){const r={};for(const g in n){const y=n[g];r[g]=isArray$2(y)?y.map(e):e(y)}return r}const noop$5=()=>{},isArray$2=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=e=>e.replace(TRAILING_SLASH_RE,"");function parseURL(e,n,r="/"){let g,y={},k="",$="";const V=n.indexOf("#");let L=n.indexOf("?");return V<L&&V>=0&&(L=-1),L>-1&&(g=n.slice(0,L),k=n.slice(L+1,V>-1?V:n.length),y=e(k)),V>-1&&(g=g||n.slice(0,V),$=n.slice(V,n.length)),g=resolveRelativePath(g??n,r),{fullPath:g+(k&&"?")+k+$,path:g,query:y,hash:$}}function stringifyURL(e,n){const r=n.query?e(n.query):"";return n.path+(r&&"?")+r+(n.hash||"")}function stripBase(e,n){return!n||!e.toLowerCase().startsWith(n.toLowerCase())?e:e.slice(n.length)||"/"}function isSameRouteLocation(e,n,r){const g=n.matched.length-1,y=r.matched.length-1;return g>-1&&g===y&&isSameRouteRecord(n.matched[g],r.matched[y])&&isSameRouteLocationParams(n.params,r.params)&&e(n.query)===e(r.query)&&n.hash===r.hash}function isSameRouteRecord(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function isSameRouteLocationParams(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(!isSameRouteLocationParamsValue(e[r],n[r]))return!1;return!0}function isSameRouteLocationParamsValue(e,n){return isArray$2(e)?isEquivalentArray(e,n):isArray$2(n)?isEquivalentArray(n,e):e===n}function isEquivalentArray(e,n){return isArray$2(n)?e.length===n.length&&e.every((r,g)=>r===n[g]):e.length===1&&e[0]===n}function resolveRelativePath(e,n){if(e.startsWith("/"))return e;if(!e)return n;const r=n.split("/"),g=e.split("/"),y=g[g.length-1];(y===".."||y===".")&&g.push("");let k=r.length-1,$,V;for($=0;$<g.length;$++)if(V=g[$],V!==".")if(V==="..")k>1&&k--;else break;return r.slice(0,k).join("/")+"/"+g.slice($-($===g.length?1:0)).join("/")}var NavigationType;(function(e){e.pop="pop",e.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(e){e.back="back",e.forward="forward",e.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(e){if(!e)if(isBrowser){const n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),removeTrailingSlash(e)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(e,n){return e.replace(BEFORE_HASH_RE,"#")+n}function getElementPosition(e,n){const r=document.documentElement.getBoundingClientRect(),g=e.getBoundingClientRect();return{behavior:n.behavior,left:g.left-r.left-(n.left||0),top:g.top-r.top-(n.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(e){let n;if("el"in e){const r=e.el,g=typeof r=="string"&&r.startsWith("#"),y=typeof r=="string"?g?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!y)return;n=getElementPosition(y,e)}else n=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.pageXOffset,n.top!=null?n.top:window.pageYOffset)}function getScrollKey(e,n){return(history.state?history.state.position-n:-1)+e}const scrollPositions=new Map;function saveScrollPosition(e,n){scrollPositions.set(e,n)}function getSavedScrollPosition(e){const n=scrollPositions.get(e);return scrollPositions.delete(e),n}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(e,n){const{pathname:r,search:g,hash:y}=n,k=e.indexOf("#");if(k>-1){let V=y.includes(e.slice(k))?e.slice(k).length:1,L=y.slice(V);return L[0]!=="/"&&(L="/"+L),stripBase(L,"")}return stripBase(r,e)+g+y}function useHistoryListeners(e,n,r,g){let y=[],k=[],$=null;const V=({state:re})=>{const oe=createCurrentLocation(e,location),ue=r.value,le=n.value;let de=0;if(re){if(r.value=oe,n.value=re,$&&$===ue){$=null;return}de=le?re.position-le.position:0}else g(oe);y.forEach(he=>{he(r.value,ue,{delta:de,type:NavigationType.pop,direction:de?de>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function L(){$=r.value}function z(re){y.push(re);const oe=()=>{const ue=y.indexOf(re);ue>-1&&y.splice(ue,1)};return k.push(oe),oe}function j(){const{history:re}=window;re.state&&re.replaceState(assign$2({},re.state,{scroll:computeScrollPosition()}),"")}function ae(){for(const re of k)re();k=[],window.removeEventListener("popstate",V),window.removeEventListener("beforeunload",j)}return window.addEventListener("popstate",V),window.addEventListener("beforeunload",j,{passive:!0}),{pauseListeners:L,listen:z,destroy:ae}}function buildState(e,n,r,g=!1,y=!1){return{back:e,current:n,forward:r,replaced:g,position:window.history.length,scroll:y?computeScrollPosition():null}}function useHistoryStateNavigation(e){const{history:n,location:r}=window,g={value:createCurrentLocation(e,r)},y={value:n.state};y.value||k(g.value,{back:null,current:g.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function k(L,z,j){const ae=e.indexOf("#"),re=ae>-1?(r.host&&document.querySelector("base")?e:e.slice(ae))+L:createBaseLocation()+e+L;try{n[j?"replaceState":"pushState"](z,"",re),y.value=z}catch(oe){console.error(oe),r[j?"replace":"assign"](re)}}function $(L,z){const j=assign$2({},n.state,buildState(y.value.back,L,y.value.forward,!0),z,{position:y.value.position});k(L,j,!0),g.value=L}function V(L,z){const j=assign$2({},y.value,n.state,{forward:L,scroll:computeScrollPosition()});k(j.current,j,!0);const ae=assign$2({},buildState(g.value,L,null),{position:j.position+1},z);k(L,ae,!1),g.value=L}return{location:g,state:y,push:V,replace:$}}function createWebHistory(e){e=normalizeBase(e);const n=useHistoryStateNavigation(e),r=useHistoryListeners(e,n.state,n.location,n.replace);function g(k,$=!0){$||r.pauseListeners(),history.go(k)}const y=assign$2({location:"",base:e,go:g,createHref:createHref.bind(null,e)},n,r);return Object.defineProperty(y,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(y,"state",{enumerable:!0,get:()=>n.state.value}),y}function createWebHashHistory(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),createWebHistory(e)}function isRouteLocation(e){return typeof e=="string"||e&&typeof e=="object"}function isRouteName(e){return typeof e=="string"||typeof e=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(e,n){return assign$2(new Error,{type:e,[NavigationFailureSymbol]:!0},n)}function isNavigationFailure(e,n){return e instanceof Error&&NavigationFailureSymbol in e&&(n==null||!!(e.type&n))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(e,n){const r=assign$2({},BASE_PATH_PARSER_OPTIONS,n),g=[];let y=r.start?"^":"";const k=[];for(const z of e){const j=z.length?[]:[90];r.strict&&!z.length&&(y+="/");for(let ae=0;ae<z.length;ae++){const re=z[ae];let oe=40+(r.sensitive?.25:0);if(re.type===0)ae||(y+="/"),y+=re.value.replace(REGEX_CHARS_RE,"\\$&"),oe+=40;else if(re.type===1){const{value:ue,repeatable:le,optional:de,regexp:he}=re;k.push({name:ue,repeatable:le,optional:de});const _e=he||BASE_PARAM_PATTERN;if(_e!==BASE_PARAM_PATTERN){oe+=10;try{new RegExp(`(${_e})`)}catch(Ne){throw new Error(`Invalid custom RegExp for param "${ue}" (${_e}): `+Ne.message)}}let Ce=le?`((?:${_e})(?:/(?:${_e}))*)`:`(${_e})`;ae||(Ce=de&&z.length<2?`(?:/${Ce})`:"/"+Ce),de&&(Ce+="?"),y+=Ce,oe+=20,de&&(oe+=-8),le&&(oe+=-20),_e===".*"&&(oe+=-50)}j.push(oe)}g.push(j)}if(r.strict&&r.end){const z=g.length-1;g[z][g[z].length-1]+=.7000000000000001}r.strict||(y+="/?"),r.end?y+="$":r.strict&&(y+="(?:/|$)");const $=new RegExp(y,r.sensitive?"":"i");function V(z){const j=z.match($),ae={};if(!j)return null;for(let re=1;re<j.length;re++){const oe=j[re]||"",ue=k[re-1];ae[ue.name]=oe&&ue.repeatable?oe.split("/"):oe}return ae}function L(z){let j="",ae=!1;for(const re of e){(!ae||!j.endsWith("/"))&&(j+="/"),ae=!1;for(const oe of re)if(oe.type===0)j+=oe.value;else if(oe.type===1){const{value:ue,repeatable:le,optional:de}=oe,he=ue in z?z[ue]:"";if(isArray$2(he)&&!le)throw new Error(`Provided param "${ue}" is an array but it is not repeatable (* or + modifiers)`);const _e=isArray$2(he)?he.join("/"):he;if(!_e)if(de)re.length<2&&(j.endsWith("/")?j=j.slice(0,-1):ae=!0);else throw new Error(`Missing required param "${ue}"`);j+=_e}}return j||"/"}return{re:$,score:g,keys:k,parse:V,stringify:L}}function compareScoreArray(e,n){let r=0;for(;r<e.length&&r<n.length;){const g=n[r]-e[r];if(g)return g;r++}return e.length<n.length?e.length===1&&e[0]===80?-1:1:e.length>n.length?n.length===1&&n[0]===80?1:-1:0}function comparePathParserScore(e,n){let r=0;const g=e.score,y=n.score;for(;r<g.length&&r<y.length;){const k=compareScoreArray(g[r],y[r]);if(k)return k;r++}if(Math.abs(y.length-g.length)===1){if(isLastScoreNegative(g))return 1;if(isLastScoreNegative(y))return-1}return y.length-g.length}function isLastScoreNegative(e){const n=e[e.length-1];return e.length>0&&n[n.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(e){if(!e)return[[]];if(e==="/")return[[ROOT_TOKEN]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function n(oe){throw new Error(`ERR (${r})/"${z}": ${oe}`)}let r=0,g=r;const y=[];let k;function $(){k&&y.push(k),k=[]}let V=0,L,z="",j="";function ae(){z&&(r===0?k.push({type:0,value:z}):r===1||r===2||r===3?(k.length>1&&(L==="*"||L==="+")&&n(`A repeatable param (${z}) must be alone in its segment. eg: '/:ids+.`),k.push({type:1,value:z,regexp:j,repeatable:L==="*"||L==="+",optional:L==="*"||L==="?"})):n("Invalid state to consume buffer"),z="")}function re(){z+=L}for(;V<e.length;){if(L=e[V++],L==="\\"&&r!==2){g=r,r=4;continue}switch(r){case 0:L==="/"?(z&&ae(),$()):L===":"?(ae(),r=1):re();break;case 4:re(),r=g;break;case 1:L==="("?r=2:VALID_PARAM_RE.test(L)?re():(ae(),r=0,L!=="*"&&L!=="?"&&L!=="+"&&V--);break;case 2:L===")"?j[j.length-1]=="\\"?j=j.slice(0,-1)+L:r=3:j+=L;break;case 3:ae(),r=0,L!=="*"&&L!=="?"&&L!=="+"&&V--,j="";break;default:n("Unknown state");break}}return r===2&&n(`Unfinished custom RegExp for param "${z}"`),ae(),$(),y}function createRouteRecordMatcher(e,n,r){const g=tokensToParser(tokenizePath(e.path),r),y=assign$2(g,{record:e,parent:n,children:[],alias:[]});return n&&!y.record.aliasOf==!n.record.aliasOf&&n.children.push(y),y}function createRouterMatcher(e,n){const r=[],g=new Map;n=mergeOptions$1({strict:!1,end:!0,sensitive:!1},n);function y(j){return g.get(j)}function k(j,ae,re){const oe=!re,ue=normalizeRouteRecord(j);ue.aliasOf=re&&re.record;const le=mergeOptions$1(n,j),de=[ue];if("alias"in j){const Ce=typeof j.alias=="string"?[j.alias]:j.alias;for(const Ne of Ce)de.push(assign$2({},ue,{components:re?re.record.components:ue.components,path:Ne,aliasOf:re?re.record:ue}))}let he,_e;for(const Ce of de){const{path:Ne}=Ce;if(ae&&Ne[0]!=="/"){const $e=ae.record.path,xe=$e[$e.length-1]==="/"?"":"/";Ce.path=ae.record.path+(Ne&&xe+Ne)}if(he=createRouteRecordMatcher(Ce,ae,le),re?re.alias.push(he):(_e=_e||he,_e!==he&&_e.alias.push(he),oe&&j.name&&!isAliasRecord(he)&&$(j.name)),ue.children){const $e=ue.children;for(let xe=0;xe<$e.length;xe++)k($e[xe],he,re&&re.children[xe])}re=re||he,(he.record.components&&Object.keys(he.record.components).length||he.record.name||he.record.redirect)&&L(he)}return _e?()=>{$(_e)}:noop$5}function $(j){if(isRouteName(j)){const ae=g.get(j);ae&&(g.delete(j),r.splice(r.indexOf(ae),1),ae.children.forEach($),ae.alias.forEach($))}else{const ae=r.indexOf(j);ae>-1&&(r.splice(ae,1),j.record.name&&g.delete(j.record.name),j.children.forEach($),j.alias.forEach($))}}function V(){return r}function L(j){let ae=0;for(;ae<r.length&&comparePathParserScore(j,r[ae])>=0&&(j.record.path!==r[ae].record.path||!isRecordChildOf(j,r[ae]));)ae++;r.splice(ae,0,j),j.record.name&&!isAliasRecord(j)&&g.set(j.record.name,j)}function z(j,ae){let re,oe={},ue,le;if("name"in j&&j.name){if(re=g.get(j.name),!re)throw createRouterError(1,{location:j});le=re.record.name,oe=assign$2(paramsFromLocation(ae.params,re.keys.filter(_e=>!_e.optional).map(_e=>_e.name)),j.params&&paramsFromLocation(j.params,re.keys.map(_e=>_e.name))),ue=re.stringify(oe)}else if("path"in j)ue=j.path,re=r.find(_e=>_e.re.test(ue)),re&&(oe=re.parse(ue),le=re.record.name);else{if(re=ae.name?g.get(ae.name):r.find(_e=>_e.re.test(ae.path)),!re)throw createRouterError(1,{location:j,currentLocation:ae});le=re.record.name,oe=assign$2({},ae.params,j.params),ue=re.stringify(oe)}const de=[];let he=re;for(;he;)de.unshift(he.record),he=he.parent;return{name:le,path:ue,params:oe,matched:de,meta:mergeMetaFields(de)}}return e.forEach(j=>k(j)),{addRoute:k,resolve:z,removeRoute:$,getRoutes:V,getRecordMatcher:y}}function paramsFromLocation(e,n){const r={};for(const g of n)g in e&&(r[g]=e[g]);return r}function normalizeRouteRecord(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:normalizeRecordProps(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function normalizeRecordProps(e){const n={},r=e.props||!1;if("component"in e)n.default=r;else for(const g in e.components)n[g]=typeof r=="object"?r[g]:r;return n}function isAliasRecord(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function mergeMetaFields(e){return e.reduce((n,r)=>assign$2(n,r.meta),{})}function mergeOptions$1(e,n){const r={};for(const g in e)r[g]=g in n?n[g]:e[g];return r}function isRecordChildOf(e,n){return n.children.some(r=>r===e||isRecordChildOf(e,r))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(e){return encodeURI(""+e).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(e){return commonEncode(e).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(e){return commonEncode(e).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(e){return encodeQueryValue(e).replace(EQUAL_RE,"%3D")}function encodePath(e){return commonEncode(e).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(e){return e==null?"":encodePath(e).replace(SLASH_RE,"%2F")}function decode(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function parseQuery(e){const n={};if(e===""||e==="?")return n;const g=(e[0]==="?"?e.slice(1):e).split("&");for(let y=0;y<g.length;++y){const k=g[y].replace(PLUS_RE," "),$=k.indexOf("="),V=decode($<0?k:k.slice(0,$)),L=$<0?null:decode(k.slice($+1));if(V in n){let z=n[V];isArray$2(z)||(z=n[V]=[z]),z.push(L)}else n[V]=L}return n}function stringifyQuery(e){let n="";for(let r in e){const g=e[r];if(r=encodeQueryKey(r),g==null){g!==void 0&&(n+=(n.length?"&":"")+r);continue}(isArray$2(g)?g.map(k=>k&&encodeQueryValue(k)):[g&&encodeQueryValue(g)]).forEach(k=>{k!==void 0&&(n+=(n.length?"&":"")+r,k!=null&&(n+="="+k))})}return n}function normalizeQuery(e){const n={};for(const r in e){const g=e[r];g!==void 0&&(n[r]=isArray$2(g)?g.map(y=>y==null?null:""+y):g==null?g:""+g)}return n}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let e=[];function n(g){return e.push(g),()=>{const y=e.indexOf(g);y>-1&&e.splice(y,1)}}function r(){e=[]}return{add:n,list:()=>e.slice(),reset:r}}function registerGuard(e,n,r){const g=()=>{e[n].delete(r)};onUnmounted(g),onDeactivated(g),onActivated(()=>{e[n].add(r)}),e[n].add(r)}function onBeforeRouteLeave(e){const n=inject(matchedRouteKey,{}).value;n&&registerGuard(n,"leaveGuards",e)}function guardToPromiseFn(e,n,r,g,y){const k=g&&(g.enterCallbacks[y]=g.enterCallbacks[y]||[]);return()=>new Promise(($,V)=>{const L=ae=>{ae===!1?V(createRouterError(4,{from:r,to:n})):ae instanceof Error?V(ae):isRouteLocation(ae)?V(createRouterError(2,{from:n,to:ae})):(k&&g.enterCallbacks[y]===k&&typeof ae=="function"&&k.push(ae),$())},z=e.call(g&&g.instances[y],n,r,L);let j=Promise.resolve(z);e.length<3&&(j=j.then(L)),j.catch(ae=>V(ae))})}function extractComponentsGuards(e,n,r,g){const y=[];for(const k of e)for(const $ in k.components){let V=k.components[$];if(!(n!=="beforeRouteEnter"&&!k.instances[$]))if(isRouteComponent(V)){const z=(V.__vccOpts||V)[n];z&&y.push(guardToPromiseFn(z,r,g,k,$))}else{let L=V();y.push(()=>L.then(z=>{if(!z)return Promise.reject(new Error(`Couldn't resolve component "${$}" at "${k.path}"`));const j=isESModule(z)?z.default:z;k.components[$]=j;const re=(j.__vccOpts||j)[n];return re&&guardToPromiseFn(re,r,g,k,$)()}))}}return y}function isRouteComponent(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function useLink(e){const n=inject(routerKey),r=inject(routeLocationKey),g=computed(()=>n.resolve(unref(e.to))),y=computed(()=>{const{matched:L}=g.value,{length:z}=L,j=L[z-1],ae=r.matched;if(!j||!ae.length)return-1;const re=ae.findIndex(isSameRouteRecord.bind(null,j));if(re>-1)return re;const oe=getOriginalPath(L[z-2]);return z>1&&getOriginalPath(j)===oe&&ae[ae.length-1].path!==oe?ae.findIndex(isSameRouteRecord.bind(null,L[z-2])):re}),k=computed(()=>y.value>-1&&includesParams(r.params,g.value.params)),$=computed(()=>y.value>-1&&y.value===r.matched.length-1&&isSameRouteLocationParams(r.params,g.value.params));function V(L={}){return guardEvent(L)?n[unref(e.replace)?"replace":"push"](unref(e.to)).catch(noop$5):Promise.resolve()}return{route:g,href:computed(()=>g.value.href),isActive:k,isExactActive:$,navigate:V}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(e,{slots:n}){const r=reactive(useLink(e)),{options:g}=inject(routerKey),y=computed(()=>({[getLinkClass(e.activeClass,g.linkActiveClass,"router-link-active")]:r.isActive,[getLinkClass(e.exactActiveClass,g.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const k=n.default&&n.default(r);return e.custom?k:h$1("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:y.value},k)}}}),RouterLink=RouterLinkImpl;function guardEvent(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function includesParams(e,n){for(const r in n){const g=n[r],y=e[r];if(typeof g=="string"){if(g!==y)return!1}else if(!isArray$2(y)||y.length!==g.length||g.some((k,$)=>k!==y[$]))return!1}return!0}function getOriginalPath(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const getLinkClass=(e,n,r)=>e??n??r,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:n,slots:r}){const g=inject(routerViewLocationKey),y=computed(()=>e.route||g.value),k=inject(viewDepthKey,0),$=computed(()=>{let z=unref(k);const{matched:j}=y.value;let ae;for(;(ae=j[z])&&!ae.components;)z++;return z}),V=computed(()=>y.value.matched[$.value]);provide(viewDepthKey,computed(()=>$.value+1)),provide(matchedRouteKey,V),provide(routerViewLocationKey,y);const L=ref();return watch(()=>[L.value,V.value,e.name],([z,j,ae],[re,oe,ue])=>{j&&(j.instances[ae]=z,oe&&oe!==j&&z&&z===re&&(j.leaveGuards.size||(j.leaveGuards=oe.leaveGuards),j.updateGuards.size||(j.updateGuards=oe.updateGuards))),z&&j&&(!oe||!isSameRouteRecord(j,oe)||!re)&&(j.enterCallbacks[ae]||[]).forEach(le=>le(z))},{flush:"post"}),()=>{const z=y.value,j=e.name,ae=V.value,re=ae&&ae.components[j];if(!re)return normalizeSlot(r.default,{Component:re,route:z});const oe=ae.props[j],ue=oe?oe===!0?z.params:typeof oe=="function"?oe(z):oe:null,de=h$1(re,assign$2({},ue,n,{onVnodeUnmounted:he=>{he.component.isUnmounted&&(ae.instances[j]=null)},ref:L}));return normalizeSlot(r.default,{Component:de,route:z})||de}}});function normalizeSlot(e,n){if(!e)return null;const r=e(n);return r.length===1?r[0]:r}const RouterView=RouterViewImpl;function createRouter(e){const n=createRouterMatcher(e.routes,e),r=e.parseQuery||parseQuery,g=e.stringifyQuery||stringifyQuery,y=e.history,k=useCallbacks(),$=useCallbacks(),V=useCallbacks(),L=shallowRef(START_LOCATION_NORMALIZED);let z=START_LOCATION_NORMALIZED;isBrowser&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const j=applyToParams.bind(null,Bn=>""+Bn),ae=applyToParams.bind(null,encodeParam),re=applyToParams.bind(null,decode);function oe(Bn,Wn){let da,ga;return isRouteName(Bn)?(da=n.getRecordMatcher(Bn),ga=Wn):ga=Bn,n.addRoute(ga,da)}function ue(Bn){const Wn=n.getRecordMatcher(Bn);Wn&&n.removeRoute(Wn)}function le(){return n.getRoutes().map(Bn=>Bn.record)}function de(Bn){return!!n.getRecordMatcher(Bn)}function he(Bn,Wn){if(Wn=assign$2({},Wn||L.value),typeof Bn=="string"){const vn=parseURL(r,Bn,Wn.path),Kn=n.resolve({path:vn.path},Wn),En=y.createHref(vn.fullPath);return assign$2(vn,Kn,{params:re(Kn.params),hash:decode(vn.hash),redirectedFrom:void 0,href:En})}let da;if("path"in Bn)da=assign$2({},Bn,{path:parseURL(r,Bn.path,Wn.path).path});else{const vn=assign$2({},Bn.params);for(const Kn in vn)vn[Kn]==null&&delete vn[Kn];da=assign$2({},Bn,{params:ae(vn)}),Wn.params=ae(Wn.params)}const ga=n.resolve(da,Wn),Ca=Bn.hash||"";ga.params=j(re(ga.params));const ra=stringifyURL(g,assign$2({},Bn,{hash:encodeHash(Ca),path:ga.path})),Gn=y.createHref(ra);return assign$2({fullPath:ra,hash:Ca,query:g===stringifyQuery?normalizeQuery(Bn.query):Bn.query||{}},ga,{redirectedFrom:void 0,href:Gn})}function _e(Bn){return typeof Bn=="string"?parseURL(r,Bn,L.value.path):assign$2({},Bn)}function Ce(Bn,Wn){if(z!==Bn)return createRouterError(8,{from:Wn,to:Bn})}function Ne(Bn){return Ie(Bn)}function $e(Bn){return Ne(assign$2(_e(Bn),{replace:!0}))}function xe(Bn){const Wn=Bn.matched[Bn.matched.length-1];if(Wn&&Wn.redirect){const{redirect:da}=Wn;let ga=typeof da=="function"?da(Bn):da;return typeof ga=="string"&&(ga=ga.includes("?")||ga.includes("#")?ga=_e(ga):{path:ga},ga.params={}),assign$2({query:Bn.query,hash:Bn.hash,params:"path"in ga?{}:Bn.params},ga)}}function Ie(Bn,Wn){const da=z=he(Bn),ga=L.value,Ca=Bn.state,ra=Bn.force,Gn=Bn.replace===!0,vn=xe(da);if(vn)return Ie(assign$2(_e(vn),{state:typeof vn=="object"?assign$2({},Ca,vn.state):Ca,force:ra,replace:Gn}),Wn||da);const Kn=da;Kn.redirectedFrom=Wn;let En;return!ra&&isSameRouteLocation(g,ga,da)&&(En=createRouterError(16,{to:Kn,from:ga}),Fn(ga,ga,!0,!1)),(En?Promise.resolve(En):Et(Kn,ga)).catch(kt=>isNavigationFailure(kt)?isNavigationFailure(kt,2)?kt:jn(kt):Nn(kt,Kn,ga)).then(kt=>{if(kt){if(isNavigationFailure(kt,2))return Ie(assign$2({replace:Gn},_e(kt.to),{state:typeof kt.to=="object"?assign$2({},Ca,kt.to.state):Ca,force:ra}),Wn||Kn)}else kt=Dt(Kn,ga,!0,Gn,Ca);return _n(Kn,ga,kt),kt})}function ze(Bn,Wn){const da=Ce(Bn,Wn);return da?Promise.reject(da):Promise.resolve()}function qe(Bn){const Wn=la.values().next().value;return Wn&&typeof Wn.runWithContext=="function"?Wn.runWithContext(Bn):Bn()}function Et(Bn,Wn){let da;const[ga,Ca,ra]=extractChangingRecords(Bn,Wn);da=extractComponentsGuards(ga.reverse(),"beforeRouteLeave",Bn,Wn);for(const vn of ga)vn.leaveGuards.forEach(Kn=>{da.push(guardToPromiseFn(Kn,Bn,Wn))});const Gn=ze.bind(null,Bn,Wn);return da.push(Gn),Zn(da).then(()=>{da=[];for(const vn of k.list())da.push(guardToPromiseFn(vn,Bn,Wn));return da.push(Gn),Zn(da)}).then(()=>{da=extractComponentsGuards(Ca,"beforeRouteUpdate",Bn,Wn);for(const vn of Ca)vn.updateGuards.forEach(Kn=>{da.push(guardToPromiseFn(Kn,Bn,Wn))});return da.push(Gn),Zn(da)}).then(()=>{da=[];for(const vn of ra)if(vn.beforeEnter)if(isArray$2(vn.beforeEnter))for(const Kn of vn.beforeEnter)da.push(guardToPromiseFn(Kn,Bn,Wn));else da.push(guardToPromiseFn(vn.beforeEnter,Bn,Wn));return da.push(Gn),Zn(da)}).then(()=>(Bn.matched.forEach(vn=>vn.enterCallbacks={}),da=extractComponentsGuards(ra,"beforeRouteEnter",Bn,Wn),da.push(Gn),Zn(da))).then(()=>{da=[];for(const vn of $.list())da.push(guardToPromiseFn(vn,Bn,Wn));return da.push(Gn),Zn(da)}).catch(vn=>isNavigationFailure(vn,8)?vn:Promise.reject(vn))}function _n(Bn,Wn,da){V.list().forEach(ga=>qe(()=>ga(Bn,Wn,da)))}function Dt(Bn,Wn,da,ga,Ca){const ra=Ce(Bn,Wn);if(ra)return ra;const Gn=Wn===START_LOCATION_NORMALIZED,vn=isBrowser?history.state:{};da&&(ga||Gn?y.replace(Bn.fullPath,assign$2({scroll:Gn&&vn&&vn.scroll},Ca)):y.push(Bn.fullPath,Ca)),L.value=Bn,Fn(Bn,Wn,da,Gn),jn()}let Sn;function hn(){Sn||(Sn=y.listen((Bn,Wn,da)=>{if(!ca.listening)return;const ga=he(Bn),Ca=xe(ga);if(Ca){Ie(assign$2(Ca,{replace:!0}),ga).catch(noop$5);return}z=ga;const ra=L.value;isBrowser&&saveScrollPosition(getScrollKey(ra.fullPath,da.delta),computeScrollPosition()),Et(ga,ra).catch(Gn=>isNavigationFailure(Gn,12)?Gn:isNavigationFailure(Gn,2)?(Ie(Gn.to,ga).then(vn=>{isNavigationFailure(vn,20)&&!da.delta&&da.type===NavigationType.pop&&y.go(-1,!1)}).catch(noop$5),Promise.reject()):(da.delta&&y.go(-da.delta,!1),Nn(Gn,ga,ra))).then(Gn=>{Gn=Gn||Dt(ga,ra,!1),Gn&&(da.delta&&!isNavigationFailure(Gn,8)?y.go(-da.delta,!1):da.type===NavigationType.pop&&isNavigationFailure(Gn,20)&&y.go(-1,!1)),_n(ga,ra,Gn)}).catch(noop$5)}))}let Vn=useCallbacks(),Mn=useCallbacks(),$n;function Nn(Bn,Wn,da){jn(Bn);const ga=Mn.list();return ga.length?ga.forEach(Ca=>Ca(Bn,Wn,da)):console.error(Bn),Promise.reject(Bn)}function kn(){return $n&&L.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((Bn,Wn)=>{Vn.add([Bn,Wn])})}function jn(Bn){return $n||($n=!Bn,hn(),Vn.list().forEach(([Wn,da])=>Bn?da(Bn):Wn()),Vn.reset()),Bn}function Fn(Bn,Wn,da,ga){const{scrollBehavior:Ca}=e;if(!isBrowser||!Ca)return Promise.resolve();const ra=!da&&getSavedScrollPosition(getScrollKey(Bn.fullPath,0))||(ga||!da)&&history.state&&history.state.scroll||null;return nextTick().then(()=>Ca(Bn,Wn,ra)).then(Gn=>Gn&&scrollToPosition(Gn)).catch(Gn=>Nn(Gn,Bn,Wn))}const Tn=Bn=>y.go(Bn);let Hn;const la=new Set,ca={currentRoute:L,listening:!0,addRoute:oe,removeRoute:ue,hasRoute:de,getRoutes:le,resolve:he,options:e,push:Ne,replace:$e,go:Tn,back:()=>Tn(-1),forward:()=>Tn(1),beforeEach:k.add,beforeResolve:$.add,afterEach:V.add,onError:Mn.add,isReady:kn,install(Bn){const Wn=this;Bn.component("RouterLink",RouterLink),Bn.component("RouterView",RouterView),Bn.config.globalProperties.$router=Wn,Object.defineProperty(Bn.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(L)}),isBrowser&&!Hn&&L.value===START_LOCATION_NORMALIZED&&(Hn=!0,Ne(y.location).catch(Ca=>{}));const da={};for(const Ca in START_LOCATION_NORMALIZED)Object.defineProperty(da,Ca,{get:()=>L.value[Ca],enumerable:!0});Bn.provide(routerKey,Wn),Bn.provide(routeLocationKey,shallowReactive(da)),Bn.provide(routerViewLocationKey,L);const ga=Bn.unmount;la.add(Bn),Bn.unmount=function(){la.delete(Bn),la.size<1&&(z=START_LOCATION_NORMALIZED,Sn&&Sn(),Sn=null,L.value=START_LOCATION_NORMALIZED,Hn=!1,$n=!1),ga()}}};function Zn(Bn){return Bn.reduce((Wn,da)=>Wn.then(()=>qe(da)),Promise.resolve())}return ca}function extractChangingRecords(e,n){const r=[],g=[],y=[],k=Math.max(n.matched.length,e.matched.length);for(let $=0;$<k;$++){const V=n.matched[$];V&&(e.matched.find(z=>isSameRouteRecord(z,V))?g.push(V):r.push(V));const L=e.matched[$];L&&(n.matched.find(z=>isSameRouteRecord(z,L))||y.push(L))}return[r,g,y]}const ENV=ref("web");ref(!0);const createFileDialogVisible=ref(!1),setCreateFileDialogVisible=e=>{createFileDialogVisible.value=e},fontSettingsDialogVisible=ref(!1),setFontSettingsDialogVisible=e=>{fontSettingsDialogVisible.value=e},fontSettings2DialogVisible=ref(!1),setFontSettings2DialogVisible=e=>{fontSettings2DialogVisible.value=e},preferenceSettingsDialogVisible=ref(!1),setPreferenceSettingsDialogVisible=e=>{preferenceSettingsDialogVisible.value=e},addTextDialogVisible=ref(!1),setAddTextDialogVisible=e=>{addTextDialogVisible.value=e},addGlyphDialogVisible=ref(!1),setAddGlyphDialogVisible=e=>{addGlyphDialogVisible.value=e},copyGlyphDialogVisible=ref(!1),setCopyGlyphDialogVisible=e=>{copyGlyphDialogVisible.value=e},editGlyphDialogVisible=ref(!1),setEditGlyphDialogVisible=e=>{editGlyphDialogVisible.value=e},copyCharacterDialogVisible=ref(!1),setCopyCharacterDialogVisible=e=>{copyCharacterDialogVisible.value=e},editCharacterDialogVisible=ref(!1),setEditCharacterDialogVisible=e=>{editCharacterDialogVisible.value=e},glyphComponentsDialogVisible=ref(!1),setGlyphComponentsDialogVisible=e=>{glyphComponentsDialogVisible.value=e},addIconDialogVisible=ref(!1),setAddIconDialogVisible=e=>{addIconDialogVisible.value=e},languageSettingsDialogVisible=ref(!1),setLanguageSettingsDialogVisible=e=>{languageSettingsDialogVisible.value=e},importTemplatesDialogVisible=ref(!1),setImportTemplatesDialogVisible=e=>{importTemplatesDialogVisible.value=e},setAsGlobalParamDialogVisible=ref(!1),setSetAsGlobalParamDialogVisible=e=>{setAsGlobalParamDialogVisible.value=e},selectGlobalParamDialogVisible=ref(!1),setSelectGlobalParamDialogVisible=e=>{selectGlobalParamDialogVisible.value=e},tipsDialogVisible=ref(!1),setTipsDialogVisible=e=>{tipsDialogVisible.value=e},closeFileTipDialogVisible=ref(!1),setCloseFileTipDialogVisible=e=>{closeFileTipDialogVisible.value=e},saveFileTipDialogVisible=ref(!1),setSaveFileTipDialogVisible=e=>{saveFileTipDialogVisible.value=e},exportDialogVisible=ref(!1),setExportDialogVisible=e=>{exportDialogVisible.value=e},saveDialogVisible=ref(!1),setSaveDialogVisible=e=>{saveDialogVisible.value=e},saveAsDialogVisible=ref(!1),setSaveAsDialogVisible=e=>{saveAsDialogVisible.value=e},exportFontDialogVisible=ref(!1),setExportFontDialogVisible=e=>{exportFontDialogVisible.value=e},exportFontTauriDialogVisible=ref(!1),setExportFontTauriDialogVisible=e=>{exportFontTauriDialogVisible.value=e},copiedGlyphUUID=ref(""),copiedCharacterUUID=ref(""),editedGlyphUUID=ref(""),editedCharacterUUID=ref(""),glyphComponentsDialogVisible2=ref(!1);var GridType=(e=>(e[e.None=0]="None",e[e.Mesh=1]="Mesh",e[e.Mi=2]="Mi",e[e.LayoutGrid=3]="LayoutGrid",e))(GridType||{}),BackgroundType=(e=>(e[e.Transparent=0]="Transparent",e[e.Color=1]="Color",e))(BackgroundType||{});const base$1="/fontplayer_demo";ref(!1);const jointsCheckedMap=ref({}),draggable$1=ref(!0),dragOption=ref("default"),checkJoints=ref(!1),checkRefLines=ref(!1),fontRenderStyle=ref("contour"),tips=ref(""),tool=ref(""),width$1=ref(500),height$1=ref(500),canvas=ref(null);let grid=reactive({type:0,precision:20}),background$1=reactive({type:0,color:""});const gridSettings$1=ref({dx:0,dy:0,centerSquareSize:1e3/3,size:1e3,default:!0});ref([{value:"",label:"",layout:"<0,x1+0.5*(x2-x1)><x1+0.5*(x2-x1),l>",subLayout:"<x,x+0.5*w><x+0.5*w,x+w>"},{value:"",label:"",layout:"<0,l/3)><l/3,2*l/3><2*l/3,l>",subLayout:"<x,x+0.33*w><x+0.33*w,x+0.66w><x+0.66w,x+w>"},{value:"",label:"",layout:"<0,x1+0.5*(y2-y1)><x1+0.5*(y2-y1),l>",subLayout:"<y,y+0.5*h><y+0.5*h,y+h>"},{value:"",label:"",layout:"<0,l/3)><l/3,2*l/3><2*l/3,l>",subLayout:"<y,x+0.33*h><y+0.33*h,y+0.66h><y+0.66h,y+h>"},{value:"",label:"",layout:"",subLayout:""}]);const strokeWidthRatio=2,strokeWidth=2,getStrokeWidth=()=>strokeWidthRatio*strokeWidth/(window.devicePixelRatio||1),setTool=e=>{tool.value=e},setBackgroundType=e=>{background$1.type=e},setBackgroundColor=e=>{background$1.color=e},setGridType=e=>{grid.type=e},setGridPrecision=e=>{grid.precision=e},setCanvas=e=>{canvas.value=e},loading$1=ref(!1),loaded$1=ref(0),total$1=ref(100),loadingMsg=ref(""),gridChanged=ref(!1),maxSegment=5,minSegment=3,skeletonThreshold=1,FOCUSABLE_ELEMENT_SELECTORS='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',isVisible=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,obtainAllFocusableElements$1=e=>Array.from(e.querySelectorAll(FOCUSABLE_ELEMENT_SELECTORS)).filter(n=>isFocusable(n)&&isVisible(n)),isFocusable=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},triggerEvent=function(e,n,...r){let g;n.includes("mouse")||n.includes("click")?g="MouseEvents":n.includes("key")?g="KeyboardEvent":g="HTMLEvents";const y=document.createEvent(g);return y.initEvent(n,...r),e.dispatchEvent(y),e},isLeaf=e=>!e.getAttribute("aria-owns"),getSibling=(e,n,r)=>{const{parentNode:g}=e;if(!g)return null;const y=g.querySelectorAll(r),k=Array.prototype.indexOf.call(y,e);return y[k+n]||null},focusNode=e=>{e&&(e.focus(),!isLeaf(e)&&e.click())},composeEventHandlers=(e,n,{checkForDefaultPrevented:r=!0}={})=>y=>{const k=e?.(y);if(r===!1||!k)return n?.(y)},whenMouse=e=>n=>n.pointerType==="mouse"?e(n):void 0;var __defProp$9=Object.defineProperty,__defProps$6=Object.defineProperties,__getOwnPropDescs$6=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$b=Object.getOwnPropertySymbols,__hasOwnProp$b=Object.prototype.hasOwnProperty,__propIsEnum$b=Object.prototype.propertyIsEnumerable,__defNormalProp$9=(e,n,r)=>n in e?__defProp$9(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,__spreadValues$9=(e,n)=>{for(var r in n||(n={}))__hasOwnProp$b.call(n,r)&&__defNormalProp$9(e,r,n[r]);if(__getOwnPropSymbols$b)for(var r of __getOwnPropSymbols$b(n))__propIsEnum$b.call(n,r)&&__defNormalProp$9(e,r,n[r]);return e},__spreadProps$6=(e,n)=>__defProps$6(e,__getOwnPropDescs$6(n));function computedEager(e,n){var r;const g=shallowRef();return watchEffect(()=>{g.value=e()},__spreadProps$6(__spreadValues$9({},n),{flush:(r=n?.flush)!=null?r:"sync"})),readonly(g)}var _a$1;const isClient=typeof window<"u",isDef=e=>typeof e<"u",isFunction$2=e=>typeof e=="function",isString$2=e=>typeof e=="string",noop$4=()=>{},isIOS=isClient&&((_a$1=window?.navigator)==null?void 0:_a$1.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function resolveUnref(e){return typeof e=="function"?e():unref(e)}function createFilterWrapper(e,n){function r(...g){return new Promise((y,k)=>{Promise.resolve(e(()=>n.apply(this,g),{fn:n,thisArg:this,args:g})).then(y).catch(k)})}return r}function debounceFilter(e,n={}){let r,g,y=noop$4;const k=V=>{clearTimeout(V),y(),y=noop$4};return V=>{const L=resolveUnref(e),z=resolveUnref(n.maxWait);return r&&k(r),L<=0||z!==void 0&&z<=0?(g&&(k(g),g=null),Promise.resolve(V())):new Promise((j,ae)=>{y=n.rejectOnCancel?ae:j,z&&!g&&(g=setTimeout(()=>{r&&k(r),g=null,j(V())},z)),r=setTimeout(()=>{g&&k(g),g=null,j(V())},L)})}}function throttleFilter(e,n=!0,r=!0,g=!1){let y=0,k,$=!0,V=noop$4,L;const z=()=>{k&&(clearTimeout(k),k=void 0,V(),V=noop$4)};return ae=>{const re=resolveUnref(e),oe=Date.now()-y,ue=()=>L=ae();return z(),re<=0?(y=Date.now(),ue()):(oe>re&&(r||!$)?(y=Date.now(),ue()):n&&(L=new Promise((le,de)=>{V=g?de:le,k=setTimeout(()=>{y=Date.now(),$=!0,le(ue()),z()},Math.max(0,re-oe))})),!r&&!k&&(k=setTimeout(()=>$=!0,re)),$=!1,L)}}function identity$1(e){return e}function tryOnScopeDispose(e){return getCurrentScope()?(onScopeDispose(e),!0):!1}function useDebounceFn(e,n=200,r={}){return createFilterWrapper(debounceFilter(n,r),e)}function refDebounced(e,n=200,r={}){const g=ref(e.value),y=useDebounceFn(()=>{g.value=e.value},n,r);return watch(e,()=>y()),g}function useThrottleFn(e,n=200,r=!1,g=!0,y=!1){return createFilterWrapper(throttleFilter(n,r,g,y),e)}function tryOnMounted(e,n=!0){getCurrentInstance()?onMounted(e):n?e():nextTick(e)}function useTimeoutFn(e,n,r={}){const{immediate:g=!0}=r,y=ref(!1);let k=null;function $(){k&&(clearTimeout(k),k=null)}function V(){y.value=!1,$()}function L(...z){$(),y.value=!0,k=setTimeout(()=>{y.value=!1,k=null,e(...z)},resolveUnref(n))}return g&&(y.value=!0,isClient&&L()),tryOnScopeDispose(V),{isPending:readonly(y),start:L,stop:V}}function unrefElement(e){var n;const r=resolveUnref(e);return(n=r?.$el)!=null?n:r}const defaultWindow=isClient?window:void 0,defaultDocument=isClient?window.document:void 0;function useEventListener(...e){let n,r,g,y;if(isString$2(e[0])||Array.isArray(e[0])?([r,g,y]=e,n=defaultWindow):[n,r,g,y]=e,!n)return noop$4;Array.isArray(r)||(r=[r]),Array.isArray(g)||(g=[g]);const k=[],$=()=>{k.forEach(j=>j()),k.length=0},V=(j,ae,re,oe)=>(j.addEventListener(ae,re,oe),()=>j.removeEventListener(ae,re,oe)),L=watch(()=>[unrefElement(n),resolveUnref(y)],([j,ae])=>{$(),j&&k.push(...r.flatMap(re=>g.map(oe=>V(j,re,oe,ae))))},{immediate:!0,flush:"post"}),z=()=>{L(),$()};return tryOnScopeDispose(z),z}let _iOSWorkaround=!1;function onClickOutside(e,n,r={}){const{window:g=defaultWindow,ignore:y=[],capture:k=!0,detectIframe:$=!1}=r;if(!g)return;isIOS&&!_iOSWorkaround&&(_iOSWorkaround=!0,Array.from(g.document.body.children).forEach(re=>re.addEventListener("click",noop$4)));let V=!0;const L=re=>y.some(oe=>{if(typeof oe=="string")return Array.from(g.document.querySelectorAll(oe)).some(ue=>ue===re.target||re.composedPath().includes(ue));{const ue=unrefElement(oe);return ue&&(re.target===ue||re.composedPath().includes(ue))}}),j=[useEventListener(g,"click",re=>{const oe=unrefElement(e);if(!(!oe||oe===re.target||re.composedPath().includes(oe))){if(re.detail===0&&(V=!L(re)),!V){V=!0;return}n(re)}},{passive:!0,capture:k}),useEventListener(g,"pointerdown",re=>{const oe=unrefElement(e);oe&&(V=!re.composedPath().includes(oe)&&!L(re))},{passive:!0}),$&&useEventListener(g,"blur",re=>{var oe;const ue=unrefElement(e);((oe=g.document.activeElement)==null?void 0:oe.tagName)==="IFRAME"&&!ue?.contains(g.document.activeElement)&&n(re)})].filter(Boolean);return()=>j.forEach(re=>re())}function useSupported(e,n=!1){const r=ref(),g=()=>r.value=!!e();return g(),tryOnMounted(g,n),r}function cloneFnJSON(e){return JSON.parse(JSON.stringify(e))}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__";_global[globalKey]=_global[globalKey]||{};function useCssVar(e,n,{window:r=defaultWindow,initialValue:g=""}={}){const y=ref(g),k=computed(()=>{var $;return unrefElement(n)||(($=r?.document)==null?void 0:$.documentElement)});return watch([k,()=>resolveUnref(e)],([$,V])=>{var L;if($&&r){const z=(L=r.getComputedStyle($).getPropertyValue(V))==null?void 0:L.trim();y.value=z||g}},{immediate:!0}),watch(y,$=>{var V;(V=k.value)!=null&&V.style&&k.value.style.setProperty(resolveUnref(e),$)}),y}function useDocumentVisibility({document:e=defaultDocument}={}){if(!e)return ref("visible");const n=ref(e.visibilityState);return useEventListener(e,"visibilitychange",()=>{n.value=e.visibilityState}),n}var __getOwnPropSymbols$g=Object.getOwnPropertySymbols,__hasOwnProp$g=Object.prototype.hasOwnProperty,__propIsEnum$g=Object.prototype.propertyIsEnumerable,__objRest$2=(e,n)=>{var r={};for(var g in e)__hasOwnProp$g.call(e,g)&&n.indexOf(g)<0&&(r[g]=e[g]);if(e!=null&&__getOwnPropSymbols$g)for(var g of __getOwnPropSymbols$g(e))n.indexOf(g)<0&&__propIsEnum$g.call(e,g)&&(r[g]=e[g]);return r};function useResizeObserver(e,n,r={}){const g=r,{window:y=defaultWindow}=g,k=__objRest$2(g,["window"]);let $;const V=useSupported(()=>y&&"ResizeObserver"in y),L=()=>{$&&($.disconnect(),$=void 0)},z=watch(()=>unrefElement(e),ae=>{L(),V.value&&y&&ae&&($=new ResizeObserver(n),$.observe(ae,k))},{immediate:!0,flush:"post"}),j=()=>{L(),z()};return tryOnScopeDispose(j),{isSupported:V,stop:j}}function useElementBounding(e,n={}){const{reset:r=!0,windowResize:g=!0,windowScroll:y=!0,immediate:k=!0}=n,$=ref(0),V=ref(0),L=ref(0),z=ref(0),j=ref(0),ae=ref(0),re=ref(0),oe=ref(0);function ue(){const le=unrefElement(e);if(!le){r&&($.value=0,V.value=0,L.value=0,z.value=0,j.value=0,ae.value=0,re.value=0,oe.value=0);return}const de=le.getBoundingClientRect();$.value=de.height,V.value=de.bottom,L.value=de.left,z.value=de.right,j.value=de.top,ae.value=de.width,re.value=de.x,oe.value=de.y}return useResizeObserver(e,ue),watch(()=>unrefElement(e),le=>!le&&ue()),y&&useEventListener("scroll",ue,{capture:!0,passive:!0}),g&&useEventListener("resize",ue,{passive:!0}),tryOnMounted(()=>{k&&ue()}),{height:$,bottom:V,left:L,right:z,top:j,width:ae,x:re,y:oe,update:ue}}var SwipeDirection;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(SwipeDirection||(SwipeDirection={}));var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,n,r)=>n in e?__defProp(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,__spreadValues=(e,n)=>{for(var r in n||(n={}))__hasOwnProp.call(n,r)&&__defNormalProp(e,r,n[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(n))__propIsEnum.call(n,r)&&__defNormalProp(e,r,n[r]);return e};const _TransitionPresets={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};__spreadValues({linear:identity$1},_TransitionPresets);function useVModel(e,n,r,g={}){var y,k,$;const{clone:V=!1,passive:L=!1,eventName:z,deep:j=!1,defaultValue:ae}=g,re=getCurrentInstance(),oe=r||re?.emit||((y=re?.$emit)==null?void 0:y.bind(re))||(($=(k=re?.proxy)==null?void 0:k.$emit)==null?void 0:$.bind(re?.proxy));let ue=z;n||(n="modelValue"),ue=z||ue||`update:${n.toString()}`;const le=he=>V?isFunction$2(V)?V(he):cloneFnJSON(he):he,de=()=>isDef(e[n])?le(e[n]):ae;if(L){const he=de(),_e=ref(he);return watch(()=>e[n],Ce=>_e.value=le(Ce)),watch(_e,Ce=>{(Ce!==e[n]||j)&&oe(ue,Ce)},{deep:j}),_e}else return computed({get(){return de()},set(he){oe(ue,he)}})}function useWindowFocus({window:e=defaultWindow}={}){if(!e)return ref(!1);const n=ref(e.document.hasFocus());return useEventListener(e,"blur",()=>{n.value=!1}),useEventListener(e,"focus",()=>{n.value=!0}),n}function useWindowSize(e={}){const{window:n=defaultWindow,initialWidth:r=1/0,initialHeight:g=1/0,listenOrientation:y=!0,includeScrollbar:k=!0}=e,$=ref(r),V=ref(g),L=()=>{n&&(k?($.value=n.innerWidth,V.value=n.innerHeight):($.value=n.document.documentElement.clientWidth,V.value=n.document.documentElement.clientHeight))};return L(),tryOnMounted(L),useEventListener("resize",L,{passive:!0}),y&&useEventListener("orientationchange",L,{passive:!0}),{width:$,height:V}}const isFirefox=()=>isClient&&/firefox/i.test(window.navigator.userAgent),isInContainer=(e,n)=>{if(!isClient||!e||!n)return!1;const r=e.getBoundingClientRect();let g;return n instanceof Element?g=n.getBoundingClientRect():g={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},r.top<g.bottom&&r.bottom>g.top&&r.right>g.left&&r.left<g.right},getOffsetTop=e=>{let n=0,r=e;for(;r;)n+=r.offsetTop,r=r.offsetParent;return n},getOffsetTopDistance=(e,n)=>Math.abs(getOffsetTop(e)-getOffsetTop(n)),getClientXY=e=>{let n,r;return e.type==="touchend"?(r=e.changedTouches[0].clientY,n=e.changedTouches[0].clientX):e.type.startsWith("touch")?(r=e.touches[0].clientY,n=e.touches[0].clientX):(r=e.clientY,n=e.clientX),{clientX:n,clientY:r}};var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$f=Object.prototype,hasOwnProperty$d=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(e){var n=hasOwnProperty$d.call(e,symToStringTag$1),r=e[symToStringTag$1];try{e[symToStringTag$1]=void 0;var g=!0}catch{}var y=nativeObjectToString$1.call(e);return g&&(n?e[symToStringTag$1]=r:delete e[symToStringTag$1]),y}var objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString$1(e){return nativeObjectToString.call(e)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(e){return e==null?e===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString$1(e)}function isObjectLike(e){return e!=null&&typeof e=="object"}var symbolTag$3="[object Symbol]";function isSymbol(e){return typeof e=="symbol"||isObjectLike(e)&&baseGetTag(e)==symbolTag$3}function arrayMap(e,n){for(var r=-1,g=e==null?0:e.length,y=Array(g);++r<g;)y[r]=n(e[r],r,e);return y}var isArray$1=Array.isArray,INFINITY$4=1/0,symbolProto$2=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(e){if(typeof e=="string")return e;if(isArray$1(e))return arrayMap(e,baseToString)+"";if(isSymbol(e))return symbolToString?symbolToString.call(e):"";var n=e+"";return n=="0"&&1/e==-INFINITY$4?"-0":n}var reWhitespace=/\s/;function trimmedEndIndex(e){for(var n=e.length;n--&&reWhitespace.test(e.charAt(n)););return n}var reTrimStart=/^\s+/;function baseTrim(e){return e&&e.slice(0,trimmedEndIndex(e)+1).replace(reTrimStart,"")}function isObject$2(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(e){if(typeof e=="number")return e;if(isSymbol(e))return NAN;if(isObject$2(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=isObject$2(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=baseTrim(e);var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}var INFINITY$3=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(e){if(!e)return e===0?e:0;if(e=toNumber(e),e===INFINITY$3||e===-INFINITY$3){var n=e<0?-1:1;return n*MAX_INTEGER}return e===e?e:0}function toInteger(e){var n=toFinite(e),r=n%1;return n===n?r?n-r:n:0}function identity(e){return e}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(e){if(!isObject$2(e))return!1;var n=baseGetTag(e);return n==funcTag$2||n==genTag$1||n==asyncTag||n==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(e){if(e!=null){try{return funcToString$2.call(e)}catch{}try{return e+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$d=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$c=objectProto$d.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$c).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){if(!isObject$2(e)||isMasked(e))return!1;var n=isFunction$1(e)?reIsNative:reIsHostCtor;return n.test(toSource(e))}function getValue$1(e,n){return e?.[n]}function getNative(e,n){var r=getValue$1(e,n);return baseIsNative(r)?r:void 0}var WeakMap$1=getNative(root,"WeakMap"),objectCreate=Object.create,baseCreate=function(){function e(){}return function(n){if(!isObject$2(n))return{};if(objectCreate)return objectCreate(n);e.prototype=n;var r=new e;return e.prototype=void 0,r}}();function apply$1(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}function noop$3(){}function copyArray(e,n){var r=-1,g=e.length;for(n||(n=Array(g));++r<g;)n[r]=e[r];return n}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(e){var n=0,r=0;return function(){var g=nativeNow(),y=HOT_SPAN-(g-r);if(r=g,y>0){if(++n>=HOT_COUNT)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}function constant(e){return function(){return e}}var defineProperty=function(){try{var e=getNative(Object,"defineProperty");return e({},"",{}),e}catch{}}(),baseSetToString=defineProperty?function(e,n){return defineProperty(e,"toString",{configurable:!0,enumerable:!1,value:constant(n),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);function arrayEach(e,n){for(var r=-1,g=e==null?0:e.length;++r<g&&n(e[r],r,e)!==!1;);return e}function baseFindIndex(e,n,r,g){for(var y=e.length,k=r+(g?1:-1);g?k--:++k<y;)if(n(e[k],k,e))return k;return-1}function baseIsNaN(e){return e!==e}function strictIndexOf(e,n,r){for(var g=r-1,y=e.length;++g<y;)if(e[g]===n)return g;return-1}function baseIndexOf(e,n,r){return n===n?strictIndexOf(e,n,r):baseFindIndex(e,baseIsNaN,r)}function arrayIncludes(e,n){var r=e==null?0:e.length;return!!r&&baseIndexOf(e,n,0)>-1}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(e,n){var r=typeof e;return n=n??MAX_SAFE_INTEGER$1,!!n&&(r=="number"||r!="symbol"&&reIsUint.test(e))&&e>-1&&e%1==0&&e<n}function baseAssignValue(e,n,r){n=="__proto__"&&defineProperty?defineProperty(e,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[n]=r}function eq(e,n){return e===n||e!==e&&n!==n}var objectProto$c=Object.prototype,hasOwnProperty$b=objectProto$c.hasOwnProperty;function assignValue(e,n,r){var g=e[n];(!(hasOwnProperty$b.call(e,n)&&eq(g,r))||r===void 0&&!(n in e))&&baseAssignValue(e,n,r)}function copyObject(e,n,r,g){var y=!r;r||(r={});for(var k=-1,$=n.length;++k<$;){var V=n[k],L=g?g(r[V],e[V],V,r,e):void 0;L===void 0&&(L=e[V]),y?baseAssignValue(r,V,L):assignValue(r,V,L)}return r}var nativeMax$2=Math.max;function overRest(e,n,r){return n=nativeMax$2(n===void 0?e.length-1:n,0),function(){for(var g=arguments,y=-1,k=nativeMax$2(g.length-n,0),$=Array(k);++y<k;)$[y]=g[n+y];y=-1;for(var V=Array(n+1);++y<n;)V[y]=g[y];return V[n]=r($),apply$1(e,this,V)}}function baseRest(e,n){return setToString(overRest(e,n,identity),e+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isArrayLike(e){return e!=null&&isLength(e.length)&&!isFunction$1(e)}function isIterateeCall(e,n,r){if(!isObject$2(r))return!1;var g=typeof n;return(g=="number"?isArrayLike(r)&&isIndex(n,r.length):g=="string"&&n in r)?eq(r[n],e):!1}function createAssigner(e){return baseRest(function(n,r){var g=-1,y=r.length,k=y>1?r[y-1]:void 0,$=y>2?r[2]:void 0;for(k=e.length>3&&typeof k=="function"?(y--,k):void 0,$&&isIterateeCall(r[0],r[1],$)&&(k=y<3?void 0:k,y=1),n=Object(n);++g<y;){var V=r[g];V&&e(n,V,g,k)}return n})}var objectProto$b=Object.prototype;function isPrototype(e){var n=e&&e.constructor,r=typeof n=="function"&&n.prototype||objectProto$b;return e===r}function baseTimes(e,n){for(var r=-1,g=Array(e);++r<e;)g[r]=n(r);return g}var argsTag$3="[object Arguments]";function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==argsTag$3}var objectProto$a=Object.prototype,hasOwnProperty$a=objectProto$a.hasOwnProperty,propertyIsEnumerable$1=objectProto$a.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&hasOwnProperty$a.call(e,"callee")&&!propertyIsEnumerable$1.call(e,"callee")};function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$3=moduleExports$2?root.Buffer:void 0,nativeIsBuffer=Buffer$3?Buffer$3.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!typedArrayTags[baseGetTag(e)]}function baseUnary(e){return function(n){return e(n)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=function(){try{var e=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return e||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$9=Object.prototype,hasOwnProperty$9=objectProto$9.hasOwnProperty;function arrayLikeKeys(e,n){var r=isArray$1(e),g=!r&&isArguments(e),y=!r&&!g&&isBuffer(e),k=!r&&!g&&!y&&isTypedArray(e),$=r||g||y||k,V=$?baseTimes(e.length,String):[],L=V.length;for(var z in e)(n||hasOwnProperty$9.call(e,z))&&!($&&(z=="length"||y&&(z=="offset"||z=="parent")||k&&(z=="buffer"||z=="byteLength"||z=="byteOffset")||isIndex(z,L)))&&V.push(z);return V}function overArg(e,n){return function(r){return e(n(r))}}var nativeKeys=overArg(Object.keys,Object),objectProto$8=Object.prototype,hasOwnProperty$8=objectProto$8.hasOwnProperty;function baseKeys(e){if(!isPrototype(e))return nativeKeys(e);var n=[];for(var r in Object(e))hasOwnProperty$8.call(e,r)&&r!="constructor"&&n.push(r);return n}function keys$1(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function nativeKeysIn(e){var n=[];if(e!=null)for(var r in Object(e))n.push(r);return n}var objectProto$7=Object.prototype,hasOwnProperty$7=objectProto$7.hasOwnProperty;function baseKeysIn(e){if(!isObject$2(e))return nativeKeysIn(e);var n=isPrototype(e),r=[];for(var g in e)g=="constructor"&&(n||!hasOwnProperty$7.call(e,g))||r.push(g);return r}function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(e,n){if(isArray$1(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||isSymbol(e)?!0:reIsPlainProp.test(e)||!reIsDeepProp.test(e)||n!=null&&e in Object(n)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty;function hashGet(e){var n=this.__data__;if(nativeCreate){var r=n[e];return r===HASH_UNDEFINED$2?void 0:r}return hasOwnProperty$6.call(n,e)?n[e]:void 0}var objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function hashHas(e){var n=this.__data__;return nativeCreate?n[e]!==void 0:hasOwnProperty$5.call(n,e)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,n){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=nativeCreate&&n===void 0?HASH_UNDEFINED$1:n,this}function Hash(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var g=e[n];this.set(g[0],g[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(e,n){for(var r=e.length;r--;)if(eq(e[r][0],n))return r;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(e){var n=this.__data__,r=assocIndexOf(n,e);if(r<0)return!1;var g=n.length-1;return r==g?n.pop():splice.call(n,r,1),--this.size,!0}function listCacheGet(e){var n=this.__data__,r=assocIndexOf(n,e);return r<0?void 0:n[r][1]}function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,n){var r=this.__data__,g=assocIndexOf(r,e);return g<0?(++this.size,r.push([e,n])):r[g][1]=n,this}function ListCache(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var g=e[n];this.set(g[0],g[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function getMapData(e,n){var r=e.__data__;return isKeyable(n)?r[typeof n=="string"?"string":"hash"]:r.map}function mapCacheDelete(e){var n=getMapData(this,e).delete(e);return this.size-=n?1:0,n}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,n){var r=getMapData(this,e),g=r.size;return r.set(e,n),this.size+=r.size==g?0:1,this}function MapCache(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var g=e[n];this.set(g[0],g[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$2="Expected a function";function memoize(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new TypeError(FUNC_ERROR_TEXT$2);var r=function(){var g=arguments,y=n?n.apply(this,g):g[0],k=r.cache;if(k.has(y))return k.get(y);var $=e.apply(this,g);return r.cache=k.set(y,$)||k,$};return r.cache=new(memoize.Cache||MapCache),r}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var n=memoize(e,function(g){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),g}),r=n.cache;return n}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(rePropName,function(r,g,y,k){n.push(y?k.replace(reEscapeChar,"$1"):g||r)}),n});function toString(e){return e==null?"":baseToString(e)}function castPath(e,n){return isArray$1(e)?e:isKey(e,n)?[e]:stringToPath(toString(e))}var INFINITY$2=1/0;function toKey(e){if(typeof e=="string"||isSymbol(e))return e;var n=e+"";return n=="0"&&1/e==-INFINITY$2?"-0":n}function baseGet(e,n){n=castPath(n,e);for(var r=0,g=n.length;e!=null&&r<g;)e=e[toKey(n[r++])];return r&&r==g?e:void 0}function get(e,n,r){var g=e==null?void 0:baseGet(e,n);return g===void 0?r:g}function arrayPush(e,n){for(var r=-1,g=n.length,y=e.length;++r<g;)e[y+r]=n[r];return e}var spreadableSymbol=Symbol$1?Symbol$1.isConcatSpreadable:void 0;function isFlattenable(e){return isArray$1(e)||isArguments(e)||!!(spreadableSymbol&&e&&e[spreadableSymbol])}function baseFlatten(e,n,r,g,y){var k=-1,$=e.length;for(r||(r=isFlattenable),y||(y=[]);++k<$;){var V=e[k];n>0&&r(V)?n>1?baseFlatten(V,n-1,r,g,y):arrayPush(y,V):g||(y[y.length]=V)}return y}function flatten$1(e){var n=e==null?0:e.length;return n?baseFlatten(e,1):[]}function flatRest(e){return setToString(overRest(e,void 0,flatten$1),e+"")}var getPrototype=overArg(Object.getPrototypeOf,Object);const getPrototype$1=getPrototype;var objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$4=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$4=objectProto$4.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$1(e){if(!isObjectLike(e)||baseGetTag(e)!=objectTag$3)return!1;var n=getPrototype$1(e);if(n===null)return!0;var r=hasOwnProperty$4.call(n,"constructor")&&n.constructor;return typeof r=="function"&&r instanceof r&&funcToString.call(r)==objectCtorString}function castArray$1(){if(!arguments.length)return[];var e=arguments[0];return isArray$1(e)?e:[e]}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}function stackGet(e){return this.__data__.get(e)}function stackHas(e){return this.__data__.has(e)}var LARGE_ARRAY_SIZE$1=200;function stackSet(e,n){var r=this.__data__;if(r instanceof ListCache){var g=r.__data__;if(!Map$1||g.length<LARGE_ARRAY_SIZE$1-1)return g.push([e,n]),this.size=++r.size,this;r=this.__data__=new MapCache(g)}return r.set(e,n),this.size=r.size,this}function Stack$1(e){var n=this.__data__=new ListCache(e);this.size=n.size}Stack$1.prototype.clear=stackClear;Stack$1.prototype.delete=stackDelete;Stack$1.prototype.get=stackGet;Stack$1.prototype.has=stackHas;Stack$1.prototype.set=stackSet;function baseAssign(e,n){return e&&copyObject(n,keys$1(n),e)}function baseAssignIn(e,n){return e&&copyObject(n,keysIn(n),e)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$2=moduleExports?root.Buffer:void 0,allocUnsafe=Buffer$2?Buffer$2.allocUnsafe:void 0;function cloneBuffer(e,n){if(n)return e.slice();var r=e.length,g=allocUnsafe?allocUnsafe(r):new e.constructor(r);return e.copy(g),g}function arrayFilter(e,n){for(var r=-1,g=e==null?0:e.length,y=0,k=[];++r<g;){var $=e[r];n($,r,e)&&(k[y++]=$)}return k}function stubArray(){return[]}var objectProto$3=Object.prototype,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(e){return e==null?[]:(e=Object(e),arrayFilter(nativeGetSymbols$1(e),function(n){return propertyIsEnumerable.call(e,n)}))}:stubArray;function copySymbols(e,n){return copyObject(e,getSymbols(e),n)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(e){for(var n=[];e;)arrayPush(n,getSymbols(e)),e=getPrototype$1(e);return n}:stubArray;function copySymbolsIn(e,n){return copyObject(e,getSymbolsIn(e),n)}function baseGetAllKeys(e,n,r){var g=n(e);return isArray$1(e)?g:arrayPush(g,r(e))}function getAllKeys(e){return baseGetAllKeys(e,keys$1,getSymbols)}function getAllKeysIn(e){return baseGetAllKeys(e,keysIn,getSymbolsIn)}var DataView$1=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set$1=getNative(root,"Set"),mapTag$4="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$3||Map$1&&getTag(new Map$1)!=mapTag$4||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set$1&&getTag(new Set$1)!=setTag$4||WeakMap$1&&getTag(new WeakMap$1)!=weakMapTag$1)&&(getTag=function(e){var n=baseGetTag(e),r=n==objectTag$2?e.constructor:void 0,g=r?toSource(r):"";if(g)switch(g){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return n});const getTag$1=getTag;var objectProto$2=Object.prototype,hasOwnProperty$3=objectProto$2.hasOwnProperty;function initCloneArray(e){var n=e.length,r=new e.constructor(n);return n&&typeof e[0]=="string"&&hasOwnProperty$3.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var Uint8Array$1=root.Uint8Array;function cloneArrayBuffer(e){var n=new e.constructor(e.byteLength);return new Uint8Array$1(n).set(new Uint8Array$1(e)),n}function cloneDataView(e,n){var r=n?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var reFlags=/\w*$/;function cloneRegExp(e){var n=new e.constructor(e.source,reFlags.exec(e));return n.lastIndex=e.lastIndex,n}var symbolProto$1=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(e){return symbolValueOf$1?Object(symbolValueOf$1.call(e)):{}}function cloneTypedArray(e,n){var r=n?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(e,n,r){var g=e.constructor;switch(n){case arrayBufferTag$2:return cloneArrayBuffer(e);case boolTag$2:case dateTag$2:return new g(+e);case dataViewTag$2:return cloneDataView(e,r);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(e,r);case mapTag$3:return new g;case numberTag$2:case stringTag$2:return new g(e);case regexpTag$2:return cloneRegExp(e);case setTag$3:return new g;case symbolTag$2:return cloneSymbol(e)}}function initCloneObject(e){return typeof e.constructor=="function"&&!isPrototype(e)?baseCreate(getPrototype$1(e)):{}}var mapTag$2="[object Map]";function baseIsMap(e){return isObjectLike(e)&&getTag$1(e)==mapTag$2}var nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,setTag$2="[object Set]";function baseIsSet(e){return isObjectLike(e)&&getTag$1(e)==setTag$2}var nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$2=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(e,n,r,g,y,k){var $,V=n&CLONE_DEEP_FLAG$1,L=n&CLONE_FLAT_FLAG,z=n&CLONE_SYMBOLS_FLAG$2;if(r&&($=y?r(e,g,y,k):r(e)),$!==void 0)return $;if(!isObject$2(e))return e;var j=isArray$1(e);if(j){if($=initCloneArray(e),!V)return copyArray(e,$)}else{var ae=getTag$1(e),re=ae==funcTag||ae==genTag;if(isBuffer(e))return cloneBuffer(e,V);if(ae==objectTag$1||ae==argsTag$1||re&&!y){if($=L||re?{}:initCloneObject(e),!V)return L?copySymbolsIn(e,baseAssignIn($,e)):copySymbols(e,baseAssign($,e))}else{if(!cloneableTags[ae])return y?e:{};$=initCloneByTag(e,ae,V)}}k||(k=new Stack$1);var oe=k.get(e);if(oe)return oe;k.set(e,$),isSet(e)?e.forEach(function(de){$.add(baseClone(de,n,r,de,e,k))}):isMap(e)&&e.forEach(function(de,he){$.set(he,baseClone(de,n,r,he,e,k))});var ue=z?L?getAllKeysIn:getAllKeys:L?keysIn:keys$1,le=j?void 0:ue(e);return arrayEach(le||e,function(de,he){le&&(he=de,de=e[he]),assignValue($,he,baseClone(de,n,r,he,e,k))}),$}var CLONE_SYMBOLS_FLAG$1=4;function clone$1(e){return baseClone(e,CLONE_SYMBOLS_FLAG$1)}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(e){return baseClone(e,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED),this}function setCacheHas(e){return this.__data__.has(e)}function SetCache(e){var n=-1,r=e==null?0:e.length;for(this.__data__=new MapCache;++n<r;)this.add(e[n])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(e,n){for(var r=-1,g=e==null?0:e.length;++r<g;)if(n(e[r],r,e))return!0;return!1}function cacheHas(e,n){return e.has(n)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(e,n,r,g,y,k){var $=r&COMPARE_PARTIAL_FLAG$5,V=e.length,L=n.length;if(V!=L&&!($&&L>V))return!1;var z=k.get(e),j=k.get(n);if(z&&j)return z==n&&j==e;var ae=-1,re=!0,oe=r&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(k.set(e,n),k.set(n,e);++ae<V;){var ue=e[ae],le=n[ae];if(g)var de=$?g(le,ue,ae,n,e,k):g(ue,le,ae,e,n,k);if(de!==void 0){if(de)continue;re=!1;break}if(oe){if(!arraySome(n,function(he,_e){if(!cacheHas(oe,_e)&&(ue===he||y(ue,he,r,g,k)))return oe.push(_e)})){re=!1;break}}else if(!(ue===le||y(ue,le,r,g,k))){re=!1;break}}return k.delete(e),k.delete(n),re}function mapToArray(e){var n=-1,r=Array(e.size);return e.forEach(function(g,y){r[++n]=[y,g]}),r}function setToArray(e){var n=-1,r=Array(e.size);return e.forEach(function(g){r[++n]=g}),r}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(e,n,r,g,y,k,$){switch(r){case dataViewTag:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case arrayBufferTag:return!(e.byteLength!=n.byteLength||!k(new Uint8Array$1(e),new Uint8Array$1(n)));case boolTag:case dateTag:case numberTag:return eq(+e,+n);case errorTag:return e.name==n.name&&e.message==n.message;case regexpTag:case stringTag:return e==n+"";case mapTag:var V=mapToArray;case setTag:var L=g&COMPARE_PARTIAL_FLAG$4;if(V||(V=setToArray),e.size!=n.size&&!L)return!1;var z=$.get(e);if(z)return z==n;g|=COMPARE_UNORDERED_FLAG$2,$.set(e,n);var j=equalArrays(V(e),V(n),g,y,k,$);return $.delete(e),j;case symbolTag:if(symbolValueOf)return symbolValueOf.call(e)==symbolValueOf.call(n)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$2=objectProto$1.hasOwnProperty;function equalObjects(e,n,r,g,y,k){var $=r&COMPARE_PARTIAL_FLAG$3,V=getAllKeys(e),L=V.length,z=getAllKeys(n),j=z.length;if(L!=j&&!$)return!1;for(var ae=L;ae--;){var re=V[ae];if(!($?re in n:hasOwnProperty$2.call(n,re)))return!1}var oe=k.get(e),ue=k.get(n);if(oe&&ue)return oe==n&&ue==e;var le=!0;k.set(e,n),k.set(n,e);for(var de=$;++ae<L;){re=V[ae];var he=e[re],_e=n[re];if(g)var Ce=$?g(_e,he,re,n,e,k):g(he,_e,re,e,n,k);if(!(Ce===void 0?he===_e||y(he,_e,r,g,k):Ce)){le=!1;break}de||(de=re=="constructor")}if(le&&!de){var Ne=e.constructor,$e=n.constructor;Ne!=$e&&"constructor"in e&&"constructor"in n&&!(typeof Ne=="function"&&Ne instanceof Ne&&typeof $e=="function"&&$e instanceof $e)&&(le=!1)}return k.delete(e),k.delete(n),le}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty$1=objectProto.hasOwnProperty;function baseIsEqualDeep(e,n,r,g,y,k){var $=isArray$1(e),V=isArray$1(n),L=$?arrayTag:getTag$1(e),z=V?arrayTag:getTag$1(n);L=L==argsTag?objectTag:L,z=z==argsTag?objectTag:z;var j=L==objectTag,ae=z==objectTag,re=L==z;if(re&&isBuffer(e)){if(!isBuffer(n))return!1;$=!0,j=!1}if(re&&!j)return k||(k=new Stack$1),$||isTypedArray(e)?equalArrays(e,n,r,g,y,k):equalByTag(e,n,L,r,g,y,k);if(!(r&COMPARE_PARTIAL_FLAG$2)){var oe=j&&hasOwnProperty$1.call(e,"__wrapped__"),ue=ae&&hasOwnProperty$1.call(n,"__wrapped__");if(oe||ue){var le=oe?e.value():e,de=ue?n.value():n;return k||(k=new Stack$1),y(le,de,r,g,k)}}return re?(k||(k=new Stack$1),equalObjects(e,n,r,g,y,k)):!1}function baseIsEqual(e,n,r,g,y){return e===n?!0:e==null||n==null||!isObjectLike(e)&&!isObjectLike(n)?e!==e&&n!==n:baseIsEqualDeep(e,n,r,g,baseIsEqual,y)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(e,n,r,g){var y=r.length,k=y,$=!g;if(e==null)return!k;for(e=Object(e);y--;){var V=r[y];if($&&V[2]?V[1]!==e[V[0]]:!(V[0]in e))return!1}for(;++y<k;){V=r[y];var L=V[0],z=e[L],j=V[1];if($&&V[2]){if(z===void 0&&!(L in e))return!1}else{var ae=new Stack$1;if(g)var re=g(z,j,L,e,n,ae);if(!(re===void 0?baseIsEqual(j,z,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,g,ae):re))return!1}}return!0}function isStrictComparable(e){return e===e&&!isObject$2(e)}function getMatchData(e){for(var n=keys$1(e),r=n.length;r--;){var g=n[r],y=e[g];n[r]=[g,y,isStrictComparable(y)]}return n}function matchesStrictComparable(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}function baseMatches(e){var n=getMatchData(e);return n.length==1&&n[0][2]?matchesStrictComparable(n[0][0],n[0][1]):function(r){return r===e||baseIsMatch(r,e,n)}}function baseHasIn(e,n){return e!=null&&n in Object(e)}function hasPath(e,n,r){n=castPath(n,e);for(var g=-1,y=n.length,k=!1;++g<y;){var $=toKey(n[g]);if(!(k=e!=null&&r(e,$)))break;e=e[$]}return k||++g!=y?k:(y=e==null?0:e.length,!!y&&isLength(y)&&isIndex($,y)&&(isArray$1(e)||isArguments(e)))}function hasIn(e,n){return e!=null&&hasPath(e,n,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(e,n){return isKey(e)&&isStrictComparable(n)?matchesStrictComparable(toKey(e),n):function(r){var g=get(r,e);return g===void 0&&g===n?hasIn(r,e):baseIsEqual(n,g,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(e){return function(n){return n?.[e]}}function basePropertyDeep(e){return function(n){return baseGet(n,e)}}function property(e){return isKey(e)?baseProperty(toKey(e)):basePropertyDeep(e)}function baseIteratee(e){return typeof e=="function"?e:e==null?identity:typeof e=="object"?isArray$1(e)?baseMatchesProperty(e[0],e[1]):baseMatches(e):property(e)}function createBaseFor(e){return function(n,r,g){for(var y=-1,k=Object(n),$=g(n),V=$.length;V--;){var L=$[e?V:++y];if(r(k[L],L,k)===!1)break}return n}}var baseFor=createBaseFor();function baseForOwn(e,n){return e&&baseFor(e,n,keys$1)}function createBaseEach(e,n){return function(r,g){if(r==null)return r;if(!isArrayLike(r))return e(r,g);for(var y=r.length,k=n?y:-1,$=Object(r);(n?k--:++k<y)&&g($[k],k,$)!==!1;);return r}}var baseEach=createBaseEach(baseForOwn),now=function(){return root.Date.now()},FUNC_ERROR_TEXT$1="Expected a function",nativeMax$1=Math.max,nativeMin$1=Math.min;function debounce(e,n,r){var g,y,k,$,V,L,z=0,j=!1,ae=!1,re=!0;if(typeof e!="function")throw new TypeError(FUNC_ERROR_TEXT$1);n=toNumber(n)||0,isObject$2(r)&&(j=!!r.leading,ae="maxWait"in r,k=ae?nativeMax$1(toNumber(r.maxWait)||0,n):k,re="trailing"in r?!!r.trailing:re);function oe(xe){var Ie=g,ze=y;return g=y=void 0,z=xe,$=e.apply(ze,Ie),$}function ue(xe){return z=xe,V=setTimeout(he,n),j?oe(xe):$}function le(xe){var Ie=xe-L,ze=xe-z,qe=n-Ie;return ae?nativeMin$1(qe,k-ze):qe}function de(xe){var Ie=xe-L,ze=xe-z;return L===void 0||Ie>=n||Ie<0||ae&&ze>=k}function he(){var xe=now();if(de(xe))return _e(xe);V=setTimeout(he,le(xe))}function _e(xe){return V=void 0,re&&g?oe(xe):(g=y=void 0,$)}function Ce(){V!==void 0&&clearTimeout(V),z=0,g=L=y=V=void 0}function Ne(){return V===void 0?$:_e(now())}function $e(){var xe=now(),Ie=de(xe);if(g=arguments,y=this,L=xe,Ie){if(V===void 0)return ue(L);if(ae)return clearTimeout(V),V=setTimeout(he,n),oe(L)}return V===void 0&&(V=setTimeout(he,n)),$}return $e.cancel=Ce,$e.flush=Ne,$e}function assignMergeValue(e,n,r){(r!==void 0&&!eq(e[n],r)||r===void 0&&!(n in e))&&baseAssignValue(e,n,r)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function safeGet(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}function toPlainObject(e){return copyObject(e,keysIn(e))}function baseMergeDeep(e,n,r,g,y,k,$){var V=safeGet(e,r),L=safeGet(n,r),z=$.get(L);if(z){assignMergeValue(e,r,z);return}var j=k?k(V,L,r+"",e,n,$):void 0,ae=j===void 0;if(ae){var re=isArray$1(L),oe=!re&&isBuffer(L),ue=!re&&!oe&&isTypedArray(L);j=L,re||oe||ue?isArray$1(V)?j=V:isArrayLikeObject(V)?j=copyArray(V):oe?(ae=!1,j=cloneBuffer(L,!0)):ue?(ae=!1,j=cloneTypedArray(L,!0)):j=[]:isPlainObject$1(L)||isArguments(L)?(j=V,isArguments(V)?j=toPlainObject(V):(!isObject$2(V)||isFunction$1(V))&&(j=initCloneObject(L))):ae=!1}ae&&($.set(L,j),y(j,L,g,k,$),$.delete(L)),assignMergeValue(e,r,j)}function baseMerge(e,n,r,g,y){e!==n&&baseFor(n,function(k,$){if(y||(y=new Stack$1),isObject$2(k))baseMergeDeep(e,n,$,r,baseMerge,g,y);else{var V=g?g(safeGet(e,$),k,$+"",e,n,y):void 0;V===void 0&&(V=k),assignMergeValue(e,$,V)}},keysIn)}function arrayIncludesWith(e,n,r){for(var g=-1,y=e==null?0:e.length;++g<y;)if(r(n,e[g]))return!0;return!1}var nativeMax=Math.max,nativeMin=Math.min;function findLastIndex(e,n,r){var g=e==null?0:e.length;if(!g)return-1;var y=g-1;return r!==void 0&&(y=toInteger(r),y=r<0?nativeMax(g+y,0):nativeMin(y,g-1)),baseFindIndex(e,baseIteratee(n),y,!0)}function baseMap(e,n){var r=-1,g=isArrayLike(e)?Array(e.length):[];return baseEach(e,function(y,k,$){g[++r]=n(y,k,$)}),g}function map(e,n){var r=isArray$1(e)?arrayMap:baseMap;return r(e,baseIteratee(n))}function flatMap(e,n){return baseFlatten(map(e,n),1)}var INFINITY$1=1/0;function flattenDeep(e){var n=e==null?0:e.length;return n?baseFlatten(e,INFINITY$1):[]}function fromPairs(e){for(var n=-1,r=e==null?0:e.length,g={};++n<r;){var y=e[n];g[y[0]]=y[1]}return g}function isEqual$1(e,n){return baseIsEqual(e,n)}function isNil(e){return e==null}function isUndefined$1(e){return e===void 0}var merge=createAssigner(function(e,n,r){baseMerge(e,n,r)});const merge$1=merge;function baseSet(e,n,r,g){if(!isObject$2(e))return e;n=castPath(n,e);for(var y=-1,k=n.length,$=k-1,V=e;V!=null&&++y<k;){var L=toKey(n[y]),z=r;if(L==="__proto__"||L==="constructor"||L==="prototype")return e;if(y!=$){var j=V[L];z=g?g(j,L,V):void 0,z===void 0&&(z=isObject$2(j)?j:isIndex(n[y+1])?[]:{})}assignValue(V,L,z),V=V[L]}return e}function basePickBy(e,n,r){for(var g=-1,y=n.length,k={};++g<y;){var $=n[g],V=baseGet(e,$);r(V,$)&&baseSet(k,castPath($,e),V)}return k}function basePick(e,n){return basePickBy(e,n,function(r,g){return hasIn(e,g)})}var pick=flatRest(function(e,n){return e==null?{}:basePick(e,n)});function set(e,n,r){return e==null?e:baseSet(e,n,r)}var FUNC_ERROR_TEXT="Expected a function";function throttle(e,n,r){var g=!0,y=!0;if(typeof e!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$2(r)&&(g="leading"in r?!!r.leading:g,y="trailing"in r?!!r.trailing:y),debounce(e,n,{leading:g,maxWait:n,trailing:y})}var INFINITY=1/0,createSet=Set$1&&1/setToArray(new Set$1([,-0]))[1]==INFINITY?function(e){return new Set$1(e)}:noop$3,LARGE_ARRAY_SIZE=200;function baseUniq(e,n,r){var g=-1,y=arrayIncludes,k=e.length,$=!0,V=[],L=V;if(r)$=!1,y=arrayIncludesWith;else if(k>=LARGE_ARRAY_SIZE){var z=n?null:createSet(e);if(z)return setToArray(z);$=!1,y=cacheHas,L=new SetCache}else L=n?[]:V;e:for(;++g<k;){var j=e[g],ae=n?n(j):j;if(j=r||j!==0?j:0,$&&ae===ae){for(var re=L.length;re--;)if(L[re]===ae)continue e;n&&L.push(ae),V.push(j)}else y(L,ae,r)||(L!==V&&L.push(ae),V.push(j))}return V}var union=baseRest(function(e){return baseUniq(baseFlatten(e,1,isArrayLikeObject,!0))});const isUndefined=e=>e===void 0,isBoolean$1=e=>typeof e=="boolean",isNumber$1=e=>typeof e=="number",isEmpty=e=>!e&&e!==0||isArray$3(e)&&e.length===0||isObject$3(e)&&!Object.keys(e).length,isElement$1=e=>typeof Element>"u"?!1:e instanceof Element,isPropAbsent=e=>isNil(e),isStringNumber=e=>isString$3(e)?!Number.isNaN(Number(e)):!1,escapeStringRegexp=(e="")=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),capitalize$1=e=>capitalize$2(e),keysOf=e=>Object.keys(e),entriesOf=e=>Object.entries(e),getProp=(e,n,r)=>({get value(){return get(e,n,r)},set value(g){set(e,n,g)}});class ElementPlusError extends Error{constructor(n){super(n),this.name="ElementPlusError"}}function throwError(e,n){throw new ElementPlusError(`[${e}] ${n}`)}function debugWarn(e,n){}const classNameToArray=(e="")=>e.split(" ").filter(n=>!!n.trim()),hasClass=(e,n)=>{if(!e||!n)return!1;if(n.includes(" "))throw new Error("className should not contain space.");return e.classList.contains(n)},addClass=(e,n)=>{!e||!n.trim()||e.classList.add(...classNameToArray(n))},removeClass=(e,n)=>{!e||!n.trim()||e.classList.remove(...classNameToArray(n))},getStyle=(e,n)=>{var r;if(!isClient||!e||!n)return"";let g=camelize(n);g==="float"&&(g="cssFloat");try{const y=e.style[g];if(y)return y;const k=(r=document.defaultView)==null?void 0:r.getComputedStyle(e,"");return k?k[g]:""}catch{return e.style[g]}};function addUnit(e,n="px"){if(!e)return"";if(isNumber$1(e)||isStringNumber(e))return`${e}${n}`;if(isString$3(e))return e}const isScroll=(e,n)=>{if(!isClient)return!1;const r={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(n)],g=getStyle(e,r);return["scroll","auto","overlay"].some(y=>g.includes(y))},getScrollContainer=(e,n)=>{if(!isClient)return;let r=e;for(;r;){if([window,document,document.documentElement].includes(r))return window;if(isScroll(r,n))return r;r=r.parentNode}return r};let scrollBarWidth;const getScrollBarWidth=e=>{var n;if(!isClient)return 0;if(scrollBarWidth!==void 0)return scrollBarWidth;const r=document.createElement("div");r.className=`${e}-scrollbar__wrap`,r.style.visibility="hidden",r.style.width="100px",r.style.position="absolute",r.style.top="-9999px",document.body.appendChild(r);const g=r.offsetWidth;r.style.overflow="scroll";const y=document.createElement("div");y.style.width="100%",r.appendChild(y);const k=y.offsetWidth;return(n=r.parentNode)==null||n.removeChild(r),scrollBarWidth=g-k,scrollBarWidth};function scrollIntoView$2(e,n){if(!isClient)return;if(!n){e.scrollTop=0;return}const r=[];let g=n.offsetParent;for(;g!==null&&e!==g&&e.contains(g);)r.push(g),g=g.offsetParent;const y=n.offsetTop+r.reduce((L,z)=>L+z.offsetTop,0),k=y+n.offsetHeight,$=e.scrollTop,V=$+e.clientHeight;y<$?e.scrollTop=y:k>V&&(e.scrollTop=k-e.clientHeight)}/*! Element Plus Icons Vue v2.1.0 */var export_helper_default=(e,n)=>{let r=e.__vccOpts||e;for(let[g,y]of n)r[g]=y;return r},arrow_down_vue_vue_type_script_lang_default={name:"ArrowDown"},_hoisted_16$h={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_26$6=createBaseVNode("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"},null,-1),_hoisted_36$2=[_hoisted_26$6];function _sfc_render6(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_16$h,_hoisted_36$2)}var arrow_down_default=export_helper_default(arrow_down_vue_vue_type_script_lang_default,[["render",_sfc_render6],["__file","arrow-down.vue"]]),arrow_left_bold_vue_vue_type_script_lang_default={name:"ArrowLeftBold"},_hoisted_17$f={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_27$6=createBaseVNode("path",{fill:"currentColor",d:"M685.248 104.704a64 64 0 0 1 0 90.496L368.448 512l316.8 316.8a64 64 0 0 1-90.496 90.496L232.704 557.248a64 64 0 0 1 0-90.496l362.048-362.048a64 64 0 0 1 90.496 0z"},null,-1),_hoisted_37$2=[_hoisted_27$6];function _sfc_render7(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_17$f,_hoisted_37$2)}var arrow_left_bold_default=export_helper_default(arrow_left_bold_vue_vue_type_script_lang_default,[["render",_sfc_render7],["__file","arrow-left-bold.vue"]]),arrow_left_vue_vue_type_script_lang_default={name:"ArrowLeft"},_hoisted_18$d={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_28$5=createBaseVNode("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"},null,-1),_hoisted_38$2=[_hoisted_28$5];function _sfc_render8(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_18$d,_hoisted_38$2)}var arrow_left_default=export_helper_default(arrow_left_vue_vue_type_script_lang_default,[["render",_sfc_render8],["__file","arrow-left.vue"]]),arrow_right_bold_vue_vue_type_script_lang_default={name:"ArrowRightBold"},_hoisted_19$d={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_29$5=createBaseVNode("path",{fill:"currentColor",d:"M338.752 104.704a64 64 0 0 0 0 90.496l316.8 316.8-316.8 316.8a64 64 0 0 0 90.496 90.496l362.048-362.048a64 64 0 0 0 0-90.496L429.248 104.704a64 64 0 0 0-90.496 0z"},null,-1),_hoisted_39$2=[_hoisted_29$5];function _sfc_render9(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_19$d,_hoisted_39$2)}var arrow_right_bold_default=export_helper_default(arrow_right_bold_vue_vue_type_script_lang_default,[["render",_sfc_render9],["__file","arrow-right-bold.vue"]]),arrow_right_vue_vue_type_script_lang_default={name:"ArrowRight"},_hoisted_110={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_210=createBaseVNode("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"},null,-1),_hoisted_310=[_hoisted_210];function _sfc_render10(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_110,_hoisted_310)}var arrow_right_default=export_helper_default(arrow_right_vue_vue_type_script_lang_default,[["render",_sfc_render10],["__file","arrow-right.vue"]]),arrow_up_vue_vue_type_script_lang_default={name:"ArrowUp"},_hoisted_112={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_212=createBaseVNode("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z"},null,-1),_hoisted_312=[_hoisted_212];function _sfc_render12(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_112,_hoisted_312)}var arrow_up_default=export_helper_default(arrow_up_vue_vue_type_script_lang_default,[["render",_sfc_render12],["__file","arrow-up.vue"]]),back_vue_vue_type_script_lang_default={name:"Back"},_hoisted_114={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_214=createBaseVNode("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z"},null,-1),_hoisted_314=createBaseVNode("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312L237.248 512z"},null,-1),_hoisted_44$2=[_hoisted_214,_hoisted_314];function _sfc_render14(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_114,_hoisted_44$2)}var back_default=export_helper_default(back_vue_vue_type_script_lang_default,[["render",_sfc_render14],["__file","back.vue"]]),calendar_vue_vue_type_script_lang_default={name:"Calendar"},_hoisted_129={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_229=createBaseVNode("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64H128zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0v32zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64z"},null,-1),_hoisted_328=[_hoisted_229];function _sfc_render29(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_129,_hoisted_328)}var calendar_default=export_helper_default(calendar_vue_vue_type_script_lang_default,[["render",_sfc_render29],["__file","calendar.vue"]]),caret_right_vue_vue_type_script_lang_default={name:"CaretRight"},_hoisted_134={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_234=createBaseVNode("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"},null,-1),_hoisted_333=[_hoisted_234];function _sfc_render34(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_134,_hoisted_333)}var caret_right_default=export_helper_default(caret_right_vue_vue_type_script_lang_default,[["render",_sfc_render34],["__file","caret-right.vue"]]),caret_top_vue_vue_type_script_lang_default={name:"CaretTop"},_hoisted_135={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_235=createBaseVNode("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"},null,-1),_hoisted_334=[_hoisted_235];function _sfc_render35(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_135,_hoisted_334)}var caret_top_default=export_helper_default(caret_top_vue_vue_type_script_lang_default,[["render",_sfc_render35],["__file","caret-top.vue"]]),check_vue_vue_type_script_lang_default={name:"Check"},_hoisted_143={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_243=createBaseVNode("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"},null,-1),_hoisted_342=[_hoisted_243];function _sfc_render43(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_143,_hoisted_342)}var check_default=export_helper_default(check_vue_vue_type_script_lang_default,[["render",_sfc_render43],["__file","check.vue"]]),circle_check_filled_vue_vue_type_script_lang_default={name:"CircleCheckFilled"},_hoisted_148={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_248=createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"},null,-1),_hoisted_347=[_hoisted_248];function _sfc_render48(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_148,_hoisted_347)}var circle_check_filled_default=export_helper_default(circle_check_filled_vue_vue_type_script_lang_default,[["render",_sfc_render48],["__file","circle-check-filled.vue"]]),circle_check_vue_vue_type_script_lang_default={name:"CircleCheck"},_hoisted_149={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_249=createBaseVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),_hoisted_348=createBaseVNode("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"},null,-1),_hoisted_415=[_hoisted_249,_hoisted_348];function _sfc_render49(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_149,_hoisted_415)}var circle_check_default=export_helper_default(circle_check_vue_vue_type_script_lang_default,[["render",_sfc_render49],["__file","circle-check.vue"]]),circle_close_filled_vue_vue_type_script_lang_default={name:"CircleCloseFilled"},_hoisted_150={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_250=createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336L512 457.664z"},null,-1),_hoisted_349=[_hoisted_250];function _sfc_render50(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_150,_hoisted_349)}var circle_close_filled_default=export_helper_default(circle_close_filled_vue_vue_type_script_lang_default,[["render",_sfc_render50],["__file","circle-close-filled.vue"]]),circle_close_vue_vue_type_script_lang_default={name:"CircleClose"},_hoisted_151={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_251=createBaseVNode("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248L466.752 512z"},null,-1),_hoisted_350=createBaseVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),_hoisted_416=[_hoisted_251,_hoisted_350];function _sfc_render51(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_151,_hoisted_416)}var circle_close_default=export_helper_default(circle_close_vue_vue_type_script_lang_default,[["render",_sfc_render51],["__file","circle-close.vue"]]),clock_vue_vue_type_script_lang_default={name:"Clock"},_hoisted_154={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_254=createBaseVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),_hoisted_353=createBaseVNode("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32z"},null,-1),_hoisted_418=createBaseVNode("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32z"},null,-1),_hoisted_56$2=[_hoisted_254,_hoisted_353,_hoisted_418];function _sfc_render54(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_154,_hoisted_56$2)}var clock_default=export_helper_default(clock_vue_vue_type_script_lang_default,[["render",_sfc_render54],["__file","clock.vue"]]),close_vue_vue_type_script_lang_default={name:"Close"},_hoisted_156={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_256=createBaseVNode("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),_hoisted_355=[_hoisted_256];function _sfc_render56(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_156,_hoisted_355)}var close_default=export_helper_default(close_vue_vue_type_script_lang_default,[["render",_sfc_render56],["__file","close.vue"]]),d_arrow_left_vue_vue_type_script_lang_default={name:"DArrowLeft"},_hoisted_172={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_272=createBaseVNode("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"},null,-1),_hoisted_371=[_hoisted_272];function _sfc_render72(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_172,_hoisted_371)}var d_arrow_left_default=export_helper_default(d_arrow_left_vue_vue_type_script_lang_default,[["render",_sfc_render72],["__file","d-arrow-left.vue"]]),d_arrow_right_vue_vue_type_script_lang_default={name:"DArrowRight"},_hoisted_173={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_273=createBaseVNode("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688zm-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"},null,-1),_hoisted_372=[_hoisted_273];function _sfc_render73(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_173,_hoisted_372)}var d_arrow_right_default=export_helper_default(d_arrow_right_vue_vue_type_script_lang_default,[["render",_sfc_render73],["__file","d-arrow-right.vue"]]),delete_vue_vue_type_script_lang_default={name:"Delete"},_hoisted_180={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_280=createBaseVNode("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z"},null,-1),_hoisted_379=[_hoisted_280];function _sfc_render80(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_180,_hoisted_379)}var delete_default=export_helper_default(delete_vue_vue_type_script_lang_default,[["render",_sfc_render80],["__file","delete.vue"]]),document_add_vue_vue_type_script_lang_default={name:"DocumentAdd"},_hoisted_185={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_285=createBaseVNode("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640V384zm-26.496-64L640 154.496V320h165.504zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32zm320 512V448h64v128h128v64H544v128h-64V640H352v-64h128z"},null,-1),_hoisted_384=[_hoisted_285];function _sfc_render85(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_185,_hoisted_384)}var document_add_default=export_helper_default(document_add_vue_vue_type_script_lang_default,[["render",_sfc_render85],["__file","document-add.vue"]]),document_vue_vue_type_script_lang_default={name:"Document"},_hoisted_190={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_290=createBaseVNode("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640V384zm-26.496-64L640 154.496V320h165.504zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32zm160 448h384v64H320v-64zm0-192h160v64H320v-64zm0 384h384v64H320v-64z"},null,-1),_hoisted_389=[_hoisted_290];function _sfc_render90(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_190,_hoisted_389)}var document_default=export_helper_default(document_vue_vue_type_script_lang_default,[["render",_sfc_render90],["__file","document.vue"]]),download_vue_vue_type_script_lang_default={name:"Download"},_hoisted_191={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_291=createBaseVNode("path",{fill:"currentColor",d:"M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64zm384-253.696 236.288-236.352 45.248 45.248L508.8 704 192 387.2l45.248-45.248L480 584.704V128h64v450.304z"},null,-1),_hoisted_390=[_hoisted_291];function _sfc_render91(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_191,_hoisted_390)}var download_default=export_helper_default(download_vue_vue_type_script_lang_default,[["render",_sfc_render91],["__file","download.vue"]]),edit_vue_vue_type_script_lang_default={name:"Edit"},_hoisted_194={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_294=createBaseVNode("path",{fill:"currentColor",d:"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640V512z"},null,-1),_hoisted_393=createBaseVNode("path",{fill:"currentColor",d:"m469.952 554.24 52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"},null,-1),_hoisted_431=[_hoisted_294,_hoisted_393];function _sfc_render94(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_194,_hoisted_431)}var edit_default=export_helper_default(edit_vue_vue_type_script_lang_default,[["render",_sfc_render94],["__file","edit.vue"]]),files_vue_vue_type_script_lang_default={name:"Files"},_hoisted_1101={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2101=createBaseVNode("path",{fill:"currentColor",d:"M128 384v448h768V384H128zm-32-64h832a32 32 0 0 1 32 32v512a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V352a32 32 0 0 1 32-32zm64-128h704v64H160zm96-128h512v64H256z"},null,-1),_hoisted_3100=[_hoisted_2101];function _sfc_render101(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1101,_hoisted_3100)}var files_default=export_helper_default(files_vue_vue_type_script_lang_default,[["render",_sfc_render101],["__file","files.vue"]]),folder_opened_vue_vue_type_script_lang_default={name:"FolderOpened"},_hoisted_1111={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2111=createBaseVNode("path",{fill:"currentColor",d:"M878.08 448H241.92l-96 384h636.16l96-384zM832 384v-64H485.76L357.504 192H128v448l57.92-231.744A32 32 0 0 1 216.96 384H832zm-24.96 512H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h287.872l128.384 128H864a32 32 0 0 1 32 32v96h23.04a32 32 0 0 1 31.04 39.744l-112 448A32 32 0 0 1 807.04 896z"},null,-1),_hoisted_3110=[_hoisted_2111];function _sfc_render111(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1111,_hoisted_3110)}var folder_opened_default=export_helper_default(folder_opened_vue_vue_type_script_lang_default,[["render",_sfc_render111],["__file","folder-opened.vue"]]),full_screen_vue_vue_type_script_lang_default={name:"FullScreen"},_hoisted_1118={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2118=createBaseVNode("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64l-192 .192zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64v-.064z"},null,-1),_hoisted_3117=[_hoisted_2118];function _sfc_render118(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1118,_hoisted_3117)}var full_screen_default=export_helper_default(full_screen_vue_vue_type_script_lang_default,[["render",_sfc_render118],["__file","full-screen.vue"]]),grid_vue_vue_type_script_lang_default={name:"Grid"},_hoisted_1127={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2127=createBaseVNode("path",{fill:"currentColor",d:"M640 384v256H384V384h256zm64 0h192v256H704V384zm-64 512H384V704h256v192zm64 0V704h192v192H704zm-64-768v192H384V128h256zm64 0h192v192H704V128zM320 384v256H128V384h192zm0 512H128V704h192v192zm0-768v192H128V128h192z"},null,-1),_hoisted_3126=[_hoisted_2127];function _sfc_render127(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1127,_hoisted_3126)}var grid_default=export_helper_default(grid_vue_vue_type_script_lang_default,[["render",_sfc_render127],["__file","grid.vue"]]),hide_vue_vue_type_script_lang_default={name:"Hide"},_hoisted_1133={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2133=createBaseVNode("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2L371.2 588.8ZM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"},null,-1),_hoisted_3132=createBaseVNode("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"},null,-1),_hoisted_438=[_hoisted_2133,_hoisted_3132];function _sfc_render133(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1133,_hoisted_438)}var hide_default=export_helper_default(hide_vue_vue_type_script_lang_default,[["render",_sfc_render133],["__file","hide.vue"]]),info_filled_vue_vue_type_script_lang_default={name:"InfoFilled"},_hoisted_1143={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2143=createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"},null,-1),_hoisted_3142=[_hoisted_2143];function _sfc_render143(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1143,_hoisted_3142)}var info_filled_default=export_helper_default(info_filled_vue_vue_type_script_lang_default,[["render",_sfc_render143],["__file","info-filled.vue"]]),list_vue_vue_type_script_lang_default={name:"List"},_hoisted_1149={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2149=createBaseVNode("path",{fill:"currentColor",d:"M704 192h160v736H160V192h160v64h384v-64zM288 512h448v-64H288v64zm0 256h448v-64H288v64zm96-576V96h256v96H384z"},null,-1),_hoisted_3148=[_hoisted_2149];function _sfc_render149(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1149,_hoisted_3148)}var list_default=export_helper_default(list_vue_vue_type_script_lang_default,[["render",_sfc_render149],["__file","list.vue"]]),loading_vue_vue_type_script_lang_default={name:"Loading"},_hoisted_1150={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2150=createBaseVNode("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"},null,-1),_hoisted_3149=[_hoisted_2150];function _sfc_render150(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1150,_hoisted_3149)}var loading_default=export_helper_default(loading_vue_vue_type_script_lang_default,[["render",_sfc_render150],["__file","loading.vue"]]),lock_vue_vue_type_script_lang_default={name:"Lock"},_hoisted_1154={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2154=createBaseVNode("path",{fill:"currentColor",d:"M224 448a32 32 0 0 0-32 32v384a32 32 0 0 0 32 32h576a32 32 0 0 0 32-32V480a32 32 0 0 0-32-32H224zm0-64h576a96 96 0 0 1 96 96v384a96 96 0 0 1-96 96H224a96 96 0 0 1-96-96V480a96 96 0 0 1 96-96z"},null,-1),_hoisted_3153=createBaseVNode("path",{fill:"currentColor",d:"M512 544a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V576a32 32 0 0 1 32-32zm192-160v-64a192 192 0 1 0-384 0v64h384zM512 64a256 256 0 0 1 256 256v128H256V320A256 256 0 0 1 512 64z"},null,-1),_hoisted_442=[_hoisted_2154,_hoisted_3153];function _sfc_render154(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1154,_hoisted_442)}var lock_default=export_helper_default(lock_vue_vue_type_script_lang_default,[["render",_sfc_render154],["__file","lock.vue"]]),minus_vue_vue_type_script_lang_default={name:"Minus"},_hoisted_1169={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2169=createBaseVNode("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64z"},null,-1),_hoisted_3168=[_hoisted_2169];function _sfc_render169(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1169,_hoisted_3168)}var minus_default=export_helper_default(minus_vue_vue_type_script_lang_default,[["render",_sfc_render169],["__file","minus.vue"]]),more_filled_vue_vue_type_script_lang_default={name:"MoreFilled"},_hoisted_1174={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2174=createBaseVNode("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224z"},null,-1),_hoisted_3173=[_hoisted_2174];function _sfc_render174(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1174,_hoisted_3173)}var more_filled_default=export_helper_default(more_filled_vue_vue_type_script_lang_default,[["render",_sfc_render174],["__file","more-filled.vue"]]),more_vue_vue_type_script_lang_default={name:"More"},_hoisted_1175={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2175=createBaseVNode("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96zm336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96zm336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96z"},null,-1),_hoisted_3174=[_hoisted_2175];function _sfc_render175(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1175,_hoisted_3174)}var more_default=export_helper_default(more_vue_vue_type_script_lang_default,[["render",_sfc_render175],["__file","more.vue"]]),picture_filled_vue_vue_type_script_lang_default={name:"PictureFilled"},_hoisted_1195={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2195=createBaseVNode("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32H96zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112zM256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384z"},null,-1),_hoisted_3194=[_hoisted_2195];function _sfc_render195(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1195,_hoisted_3194)}var picture_filled_default=export_helper_default(picture_filled_vue_vue_type_script_lang_default,[["render",_sfc_render195],["__file","picture-filled.vue"]]),plus_vue_vue_type_script_lang_default={name:"Plus"},_hoisted_1201={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2201=createBaseVNode("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1),_hoisted_3200=[_hoisted_2201];function _sfc_render201(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1201,_hoisted_3200)}var plus_default=export_helper_default(plus_vue_vue_type_script_lang_default,[["render",_sfc_render201],["__file","plus.vue"]]),question_filled_vue_vue_type_script_lang_default={name:"QuestionFilled"},_hoisted_1211={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2211=createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"},null,-1),_hoisted_3210=[_hoisted_2211];function _sfc_render211(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1211,_hoisted_3210)}var question_filled_default=export_helper_default(question_filled_vue_vue_type_script_lang_default,[["render",_sfc_render211],["__file","question-filled.vue"]]),refresh_left_vue_vue_type_script_lang_default={name:"RefreshLeft"},_hoisted_1215={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2215=createBaseVNode("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"},null,-1),_hoisted_3214=[_hoisted_2215];function _sfc_render215(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1215,_hoisted_3214)}var refresh_left_default=export_helper_default(refresh_left_vue_vue_type_script_lang_default,[["render",_sfc_render215],["__file","refresh-left.vue"]]),refresh_right_vue_vue_type_script_lang_default={name:"RefreshRight"},_hoisted_1216={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2216=createBaseVNode("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"},null,-1),_hoisted_3215=[_hoisted_2216];function _sfc_render216(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1216,_hoisted_3215)}var refresh_right_default=export_helper_default(refresh_right_vue_vue_type_script_lang_default,[["render",_sfc_render216],["__file","refresh-right.vue"]]),scale_to_original_vue_vue_type_script_lang_default={name:"ScaleToOriginal"},_hoisted_1222={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2222=createBaseVNode("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zM512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412zM512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512z"},null,-1),_hoisted_3221=[_hoisted_2222];function _sfc_render222(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1222,_hoisted_3221)}var scale_to_original_default=export_helper_default(scale_to_original_vue_vue_type_script_lang_default,[["render",_sfc_render222],["__file","scale-to-original.vue"]]),search_vue_vue_type_script_lang_default={name:"Search"},_hoisted_1225={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2225=createBaseVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1),_hoisted_3224=[_hoisted_2225];function _sfc_render225(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1225,_hoisted_3224)}var search_default=export_helper_default(search_vue_vue_type_script_lang_default,[["render",_sfc_render225],["__file","search.vue"]]),setting_vue_vue_type_script_lang_default={name:"Setting"},_hoisted_1231={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2231=createBaseVNode("path",{fill:"currentColor",d:"M600.704 64a32 32 0 0 1 30.464 22.208l35.2 109.376c14.784 7.232 28.928 15.36 42.432 24.512l112.384-24.192a32 32 0 0 1 34.432 15.36L944.32 364.8a32 32 0 0 1-4.032 37.504l-77.12 85.12a357.12 357.12 0 0 1 0 49.024l77.12 85.248a32 32 0 0 1 4.032 37.504l-88.704 153.6a32 32 0 0 1-34.432 15.296L708.8 803.904c-13.44 9.088-27.648 17.28-42.368 24.512l-35.264 109.376A32 32 0 0 1 600.704 960H423.296a32 32 0 0 1-30.464-22.208L357.696 828.48a351.616 351.616 0 0 1-42.56-24.64l-112.32 24.256a32 32 0 0 1-34.432-15.36L79.68 659.2a32 32 0 0 1 4.032-37.504l77.12-85.248a357.12 357.12 0 0 1 0-48.896l-77.12-85.248A32 32 0 0 1 79.68 364.8l88.704-153.6a32 32 0 0 1 34.432-15.296l112.32 24.256c13.568-9.152 27.776-17.408 42.56-24.64l35.2-109.312A32 32 0 0 1 423.232 64H600.64zm-23.424 64H446.72l-36.352 113.088-24.512 11.968a294.113 294.113 0 0 0-34.816 20.096l-22.656 15.36-116.224-25.088-65.28 113.152 79.68 88.192-1.92 27.136a293.12 293.12 0 0 0 0 40.192l1.92 27.136-79.808 88.192 65.344 113.152 116.224-25.024 22.656 15.296a294.113 294.113 0 0 0 34.816 20.096l24.512 11.968L446.72 896h130.688l36.48-113.152 24.448-11.904a288.282 288.282 0 0 0 34.752-20.096l22.592-15.296 116.288 25.024 65.28-113.152-79.744-88.192 1.92-27.136a293.12 293.12 0 0 0 0-40.256l-1.92-27.136 79.808-88.128-65.344-113.152-116.288 24.96-22.592-15.232a287.616 287.616 0 0 0-34.752-20.096l-24.448-11.904L577.344 128zM512 320a192 192 0 1 1 0 384 192 192 0 0 1 0-384zm0 64a128 128 0 1 0 0 256 128 128 0 0 0 0-256z"},null,-1),_hoisted_3230=[_hoisted_2231];function _sfc_render231(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1231,_hoisted_3230)}var setting_default=export_helper_default(setting_vue_vue_type_script_lang_default,[["render",_sfc_render231],["__file","setting.vue"]]),sort_down_vue_vue_type_script_lang_default={name:"SortDown"},_hoisted_1242={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2242=createBaseVNode("path",{fill:"currentColor",d:"M576 96v709.568L333.312 562.816A32 32 0 1 0 288 608l297.408 297.344A32 32 0 0 0 640 882.688V96a32 32 0 0 0-64 0z"},null,-1),_hoisted_3241=[_hoisted_2242];function _sfc_render242(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1242,_hoisted_3241)}var sort_down_default=export_helper_default(sort_down_vue_vue_type_script_lang_default,[["render",_sfc_render242],["__file","sort-down.vue"]]),sort_up_vue_vue_type_script_lang_default={name:"SortUp"},_hoisted_1243={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2243=createBaseVNode("path",{fill:"currentColor",d:"M384 141.248V928a32 32 0 1 0 64 0V218.56l242.688 242.688A32 32 0 1 0 736 416L438.592 118.656A32 32 0 0 0 384 141.248z"},null,-1),_hoisted_3242=[_hoisted_2243];function _sfc_render243(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1243,_hoisted_3242)}var sort_up_default=export_helper_default(sort_up_vue_vue_type_script_lang_default,[["render",_sfc_render243],["__file","sort-up.vue"]]),star_filled_vue_vue_type_script_lang_default={name:"StarFilled"},_hoisted_1246={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2246=createBaseVNode("path",{fill:"currentColor",d:"M283.84 867.84 512 747.776l228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72z"},null,-1),_hoisted_3245=[_hoisted_2246];function _sfc_render246(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1246,_hoisted_3245)}var star_filled_default=export_helper_default(star_filled_vue_vue_type_script_lang_default,[["render",_sfc_render246],["__file","star-filled.vue"]]),star_vue_vue_type_script_lang_default={name:"Star"},_hoisted_1247={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2247=createBaseVNode("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72L512 747.84zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"},null,-1),_hoisted_3246=[_hoisted_2247];function _sfc_render247(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1247,_hoisted_3246)}var star_default=export_helper_default(star_vue_vue_type_script_lang_default,[["render",_sfc_render247],["__file","star.vue"]]),success_filled_vue_vue_type_script_lang_default={name:"SuccessFilled"},_hoisted_1249={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2249=createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"},null,-1),_hoisted_3248=[_hoisted_2249];function _sfc_render249(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1249,_hoisted_3248)}var success_filled_default=export_helper_default(success_filled_vue_vue_type_script_lang_default,[["render",_sfc_render249],["__file","success-filled.vue"]]),switch_vue_vue_type_script_lang_default={name:"Switch"},_hoisted_1258={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2258=createBaseVNode("path",{fill:"currentColor",d:"M118.656 438.656a32 32 0 0 1 0-45.248L416 96l4.48-3.776A32 32 0 0 1 461.248 96l3.712 4.48a32.064 32.064 0 0 1-3.712 40.832L218.56 384H928a32 32 0 1 1 0 64H141.248a32 32 0 0 1-22.592-9.344zM64 608a32 32 0 0 1 32-32h786.752a32 32 0 0 1 22.656 54.592L608 928l-4.48 3.776a32.064 32.064 0 0 1-40.832-49.024L805.632 640H96a32 32 0 0 1-32-32z"},null,-1),_hoisted_3257=[_hoisted_2258];function _sfc_render258(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1258,_hoisted_3257)}var switch_default=export_helper_default(switch_vue_vue_type_script_lang_default,[["render",_sfc_render258],["__file","switch.vue"]]),tickets_vue_vue_type_script_lang_default={name:"Tickets"},_hoisted_1261={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2261=createBaseVNode("path",{fill:"currentColor",d:"M192 128v768h640V128H192zm-32-64h704a32 32 0 0 1 32 32v832a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32zm160 448h384v64H320v-64zm0-192h192v64H320v-64zm0 384h384v64H320v-64z"},null,-1),_hoisted_3260=[_hoisted_2261];function _sfc_render261(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1261,_hoisted_3260)}var tickets_default=export_helper_default(tickets_vue_vue_type_script_lang_default,[["render",_sfc_render261],["__file","tickets.vue"]]),tools_vue_vue_type_script_lang_default={name:"Tools"},_hoisted_1264={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2264=createBaseVNode("path",{fill:"currentColor",d:"M764.416 254.72a351.68 351.68 0 0 1 86.336 149.184H960v192.064H850.752a351.68 351.68 0 0 1-86.336 149.312l54.72 94.72-166.272 96-54.592-94.72a352.64 352.64 0 0 1-172.48 0L371.136 936l-166.272-96 54.72-94.72a351.68 351.68 0 0 1-86.336-149.312H64v-192h109.248a351.68 351.68 0 0 1 86.336-149.312L204.8 160l166.208-96h.192l54.656 94.592a352.64 352.64 0 0 1 172.48 0L652.8 64h.128L819.2 160l-54.72 94.72zM704 499.968a192 192 0 1 0-384 0 192 192 0 0 0 384 0z"},null,-1),_hoisted_3263=[_hoisted_2264];function _sfc_render264(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1264,_hoisted_3263)}var tools_default=export_helper_default(tools_vue_vue_type_script_lang_default,[["render",_sfc_render264],["__file","tools.vue"]]),unlock_vue_vue_type_script_lang_default={name:"Unlock"},_hoisted_1273={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2273=createBaseVNode("path",{fill:"currentColor",d:"M224 448a32 32 0 0 0-32 32v384a32 32 0 0 0 32 32h576a32 32 0 0 0 32-32V480a32 32 0 0 0-32-32H224zm0-64h576a96 96 0 0 1 96 96v384a96 96 0 0 1-96 96H224a96 96 0 0 1-96-96V480a96 96 0 0 1 96-96z"},null,-1),_hoisted_3272=createBaseVNode("path",{fill:"currentColor",d:"M512 544a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V576a32 32 0 0 1 32-32zm178.304-295.296A192.064 192.064 0 0 0 320 320v64h352l96 38.4V448H256V320a256 256 0 0 1 493.76-95.104l-59.456 23.808z"},null,-1),_hoisted_484=[_hoisted_2273,_hoisted_3272];function _sfc_render273(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1273,_hoisted_484)}var unlock_default=export_helper_default(unlock_vue_vue_type_script_lang_default,[["render",_sfc_render273],["__file","unlock.vue"]]),upload_vue_vue_type_script_lang_default={name:"Upload"},_hoisted_1275={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2275=createBaseVNode("path",{fill:"currentColor",d:"M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64zm384-578.304V704h-64V247.296L237.248 490.048 192 444.8 508.8 128l316.8 316.8-45.312 45.248L544 253.696z"},null,-1),_hoisted_3274=[_hoisted_2275];function _sfc_render275(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1275,_hoisted_3274)}var upload_default=export_helper_default(upload_vue_vue_type_script_lang_default,[["render",_sfc_render275],["__file","upload.vue"]]),view_vue_vue_type_script_lang_default={name:"View"},_hoisted_1283={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2283=createBaseVNode("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352zm0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448zm0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160z"},null,-1),_hoisted_3282=[_hoisted_2283];function _sfc_render283(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1283,_hoisted_3282)}var view_default=export_helper_default(view_vue_vue_type_script_lang_default,[["render",_sfc_render283],["__file","view.vue"]]),warning_filled_vue_vue_type_script_lang_default={name:"WarningFilled"},_hoisted_1287={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2287=createBaseVNode("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256zm0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4z"},null,-1),_hoisted_3286=[_hoisted_2287];function _sfc_render287(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1287,_hoisted_3286)}var warning_filled_default=export_helper_default(warning_filled_vue_vue_type_script_lang_default,[["render",_sfc_render287],["__file","warning-filled.vue"]]),zoom_in_vue_vue_type_script_lang_default={name:"ZoomIn"},_hoisted_1292={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2292=createBaseVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zm-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64h96z"},null,-1),_hoisted_3291=[_hoisted_2292];function _sfc_render292(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1292,_hoisted_3291)}var zoom_in_default=export_helper_default(zoom_in_vue_vue_type_script_lang_default,[["render",_sfc_render292],["__file","zoom-in.vue"]]),zoom_out_vue_vue_type_script_lang_default={name:"ZoomOut"},_hoisted_1293={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_hoisted_2293=createBaseVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zM352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64z"},null,-1),_hoisted_3292=[_hoisted_2293];function _sfc_render293(e,n,r,g,y,k){return openBlock(),createElementBlock("svg",_hoisted_1293,_hoisted_3292)}var zoom_out_default=export_helper_default(zoom_out_vue_vue_type_script_lang_default,[["render",_sfc_render293],["__file","zoom-out.vue"]]);const epPropKey="__epPropKey",definePropType=e=>e,isEpProp=e=>isObject$3(e)&&!!e[epPropKey],buildProp=(e,n)=>{if(!isObject$3(e)||isEpProp(e))return e;const{values:r,required:g,default:y,type:k,validator:$}=e,L={type:k,required:!!g,validator:r||$?z=>{let j=!1,ae=[];if(r&&(ae=Array.from(r),hasOwn$1(e,"default")&&ae.push(y),j||(j=ae.includes(z))),$&&(j||(j=$(z))),!j&&ae.length>0){const re=[...new Set(ae)].map(oe=>JSON.stringify(oe)).join(", ");warn$1(`Invalid prop: validation failed${n?` for prop "${n}"`:""}. Expected one of [${re}], got value ${JSON.stringify(z)}.`)}return j}:void 0,[epPropKey]:!0};return hasOwn$1(e,"default")&&(L.default=y),L},buildProps=e=>fromPairs(Object.entries(e).map(([n,r])=>[n,buildProp(r,n)])),iconPropType=definePropType([String,Object,Function]),CloseComponents={Close:close_default},TypeComponents={Close:close_default,SuccessFilled:success_filled_default,InfoFilled:info_filled_default,WarningFilled:warning_filled_default,CircleCloseFilled:circle_close_filled_default},TypeComponentsMap={success:success_filled_default,warning:warning_filled_default,error:circle_close_filled_default,info:info_filled_default},ValidateComponentsMap={validating:loading_default,success:circle_check_default,error:circle_close_default},withInstall=(e,n)=>{if(e.install=r=>{for(const g of[e,...Object.values(n??{})])r.component(g.name,g)},n)for(const[r,g]of Object.entries(n))e[r]=g;return e},withInstallFunction=(e,n)=>(e.install=r=>{e._context=r._context,r.config.globalProperties[n]=e},e),withInstallDirective=(e,n)=>(e.install=r=>{r.directive(n,e)},e),withNoopInstall=e=>(e.install=NOOP,e),composeRefs=(...e)=>n=>{e.forEach(r=>{isFunction$3(r)?r(n):r.value=n})},EVENT_CODE={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},datePickTypes=["year","month","date","dates","week","datetime","datetimerange","daterange","monthrange"],WEEK_DAYS=["sun","mon","tue","wed","thu","fri","sat"],UPDATE_MODEL_EVENT="update:modelValue",CHANGE_EVENT="change",INPUT_EVENT="input",INSTALLED_KEY=Symbol("INSTALLED_KEY"),componentSizes=["","default","small","large"],componentSizeMap={large:40,default:32,small:24},getComponentSize=e=>componentSizeMap[e||"default"],isValidComponentSize=e=>["",...componentSizes].includes(e);var PatchFlags=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(PatchFlags||{});function isFragment(e){return isVNode$1(e)&&e.type===Fragment}function isComment(e){return isVNode$1(e)&&e.type===Comment}function isValidElementNode(e){return isVNode$1(e)&&!isFragment(e)&&!isComment(e)}const getNormalizedProps=e=>{if(!isVNode$1(e))return{};const n=e.props||{},r=(isVNode$1(e.type)?e.type.props:void 0)||{},g={};return Object.keys(r).forEach(y=>{hasOwn$1(r[y],"default")&&(g[y]=r[y].default)}),Object.keys(n).forEach(y=>{g[camelize(y)]=n[y]}),g},ensureOnlyChild=e=>{if(!isArray$3(e)||e.length>1)throw new Error("expect to receive a single Vue element child");return e[0]},flattedChildren=e=>{const n=isArray$3(e)?e:[e],r=[];return n.forEach(g=>{var y;isArray$3(g)?r.push(...flattedChildren(g)):isVNode$1(g)&&isArray$3(g.children)?r.push(...flattedChildren(g.children)):(r.push(g),isVNode$1(g)&&((y=g.component)!=null&&y.subTree)&&r.push(...flattedChildren(g.component.subTree)))}),r},unique=e=>[...new Set(e)],castArray=e=>!e&&e!==0?[]:Array.isArray(e)?e:[e],isKorean=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e),rAF=e=>isClient?window.requestAnimationFrame(e):setTimeout(e,16),cAF=e=>isClient?window.cancelAnimationFrame(e):clearTimeout(e),generateId=()=>Math.floor(Math.random()*1e4),mutable=e=>e,DEFAULT_EXCLUDE_KEYS=["class","style"],LISTENER_PREFIX=/^on[A-Z]/,useAttrs=(e={})=>{const{excludeListeners:n=!1,excludeKeys:r}=e,g=computed(()=>(r?.value||[]).concat(DEFAULT_EXCLUDE_KEYS)),y=getCurrentInstance();return computed(y?()=>{var k;return fromPairs(Object.entries((k=y.proxy)==null?void 0:k.$attrs).filter(([$])=>!g.value.includes($)&&!(n&&LISTENER_PREFIX.test($))))}:()=>({}))},useDeprecated=({from:e,replacement:n,scope:r,version:g,ref:y,type:k="API"},$)=>{watch(()=>unref($),V=>{},{immediate:!0})},useDraggable=(e,n,r)=>{let g={offsetX:0,offsetY:0};const y=V=>{const L=V.clientX,z=V.clientY,{offsetX:j,offsetY:ae}=g,re=e.value.getBoundingClientRect(),oe=re.left,ue=re.top,le=re.width,de=re.height,he=document.documentElement.clientWidth,_e=document.documentElement.clientHeight,Ce=-oe+j,Ne=-ue+ae,$e=he-oe-le+j,xe=_e-ue-de+ae,Ie=qe=>{const Et=Math.min(Math.max(j+qe.clientX-L,Ce),$e),_n=Math.min(Math.max(ae+qe.clientY-z,Ne),xe);g={offsetX:Et,offsetY:_n},e.value.style.transform=`translate(${addUnit(Et)}, ${addUnit(_n)})`},ze=()=>{document.removeEventListener("mousemove",Ie),document.removeEventListener("mouseup",ze)};document.addEventListener("mousemove",Ie),document.addEventListener("mouseup",ze)},k=()=>{n.value&&e.value&&n.value.addEventListener("mousedown",y)},$=()=>{n.value&&e.value&&n.value.removeEventListener("mousedown",y)};onMounted(()=>{watchEffect(()=>{r.value?k():$()})}),onBeforeUnmount(()=>{$()})};var English={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const buildTranslator=e=>(n,r)=>translate$2(n,r,unref(e)),translate$2=(e,n,r)=>get(r,e,e).replace(/\{(\w+)\}/g,(g,y)=>{var k;return`${(k=n?.[y])!=null?k:`{${y}}`}`}),buildLocaleContext=e=>{const n=computed(()=>unref(e).name),r=isRef(e)?e:ref(e);return{lang:n,locale:r,t:buildTranslator(e)}},localeContextKey=Symbol("localeContextKey"),useLocale=e=>{const n=e||inject(localeContextKey,ref());return buildLocaleContext(computed(()=>n.value||English))},defaultNamespace="el",statePrefix="is-",_bem=(e,n,r,g,y)=>{let k=`${e}-${n}`;return r&&(k+=`-${r}`),g&&(k+=`__${g}`),y&&(k+=`--${y}`),k},namespaceContextKey=Symbol("namespaceContextKey"),useGetDerivedNamespace=e=>{const n=e||(getCurrentInstance()?inject(namespaceContextKey,ref(defaultNamespace)):ref(defaultNamespace));return computed(()=>unref(n)||defaultNamespace)},useNamespace=(e,n)=>{const r=useGetDerivedNamespace(n);return{namespace:r,b:(le="")=>_bem(r.value,e,le,"",""),e:le=>le?_bem(r.value,e,"",le,""):"",m:le=>le?_bem(r.value,e,"","",le):"",be:(le,de)=>le&&de?_bem(r.value,e,le,de,""):"",em:(le,de)=>le&&de?_bem(r.value,e,"",le,de):"",bm:(le,de)=>le&&de?_bem(r.value,e,le,"",de):"",bem:(le,de,he)=>le&&de&&he?_bem(r.value,e,le,de,he):"",is:(le,...de)=>{const he=de.length>=1?de[0]:!0;return le&&he?`${statePrefix}${le}`:""},cssVar:le=>{const de={};for(const he in le)le[he]&&(de[`--${r.value}-${he}`]=le[he]);return de},cssVarName:le=>`--${r.value}-${le}`,cssVarBlock:le=>{const de={};for(const he in le)le[he]&&(de[`--${r.value}-${e}-${he}`]=le[he]);return de},cssVarBlockName:le=>`--${r.value}-${e}-${le}`}},useLockscreen=(e,n={})=>{isRef(e)||throwError("[useLockscreen]","You need to pass a ref param to this function");const r=n.ns||useNamespace("popup"),g=computed$1(()=>r.bm("parent","hidden"));if(!isClient||hasClass(document.body,g.value))return;let y=0,k=!1,$="0";const V=()=>{setTimeout(()=>{removeClass(document?.body,g.value),k&&document&&(document.body.style.width=$)},200)};watch(e,L=>{if(!L){V();return}k=!hasClass(document.body,g.value),k&&($=document.body.style.width),y=getScrollBarWidth(r.namespace.value);const z=document.documentElement.clientHeight<document.body.scrollHeight,j=getStyle(document.body,"overflowY");y>0&&(z||j==="scroll")&&k&&(document.body.style.width=`calc(100% - ${y}px)`),addClass(document.body,g.value)}),onScopeDispose(()=>V())},_prop=buildProp({type:definePropType(Boolean),default:null}),_event=buildProp({type:definePropType(Function)}),createModelToggleComposable=e=>{const n=`update:${e}`,r=`onUpdate:${e}`,g=[n],y={[e]:_prop,[r]:_event};return{useModelToggle:({indicator:$,toggleReason:V,shouldHideWhenRouteChanges:L,shouldProceed:z,onShow:j,onHide:ae})=>{const re=getCurrentInstance(),{emit:oe}=re,ue=re.props,le=computed(()=>isFunction$3(ue[r])),de=computed(()=>ue[e]===null),he=Ie=>{$.value!==!0&&($.value=!0,V&&(V.value=Ie),isFunction$3(j)&&j(Ie))},_e=Ie=>{$.value!==!1&&($.value=!1,V&&(V.value=Ie),isFunction$3(ae)&&ae(Ie))},Ce=Ie=>{if(ue.disabled===!0||isFunction$3(z)&&!z())return;const ze=le.value&&isClient;ze&&oe(n,!0),(de.value||!ze)&&he(Ie)},Ne=Ie=>{if(ue.disabled===!0||!isClient)return;const ze=le.value&&isClient;ze&&oe(n,!1),(de.value||!ze)&&_e(Ie)},$e=Ie=>{isBoolean$1(Ie)&&(ue.disabled&&Ie?le.value&&oe(n,!1):$.value!==Ie&&(Ie?he():_e()))},xe=()=>{$.value?Ne():Ce()};return watch(()=>ue[e],$e),L&&re.appContext.config.globalProperties.$route!==void 0&&watch(()=>({...re.proxy.$route}),()=>{L.value&&$.value&&Ne()}),onMounted(()=>{$e(ue[e])}),{hide:Ne,show:Ce,toggle:xe,hasUpdateHandler:le}},useModelToggleProps:y,useModelToggleEmits:g}};createModelToggleComposable("modelValue");const useProp=e=>{const n=getCurrentInstance();return computed(()=>{var r,g;return(g=(r=n?.proxy)==null?void 0:r.$props)==null?void 0:g[e]})};var E$1="top",R="bottom",W="right",P$1="left",me="auto",G=[E$1,R,W,P$1],U$1="start",J="end",Xe="clippingParents",je="viewport",K="popper",Ye="reference",De=G.reduce(function(e,n){return e.concat([n+"-"+U$1,n+"-"+J])},[]),Ee=[].concat(G,[me]).reduce(function(e,n){return e.concat([n,n+"-"+U$1,n+"-"+J])},[]),Ge="beforeRead",Je="read",Ke="afterRead",Qe="beforeMain",Ze="main",et="afterMain",tt="beforeWrite",nt="write",rt="afterWrite",ot=[Ge,Je,Ke,Qe,Ze,et,tt,nt,rt];function C$1(e){return e?(e.nodeName||"").toLowerCase():null}function H(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var n=e.ownerDocument;return n&&n.defaultView||window}return e}function Q(e){var n=H(e).Element;return e instanceof n||e instanceof Element}function B(e){var n=H(e).HTMLElement;return e instanceof n||e instanceof HTMLElement}function Pe(e){if(typeof ShadowRoot>"u")return!1;var n=H(e).ShadowRoot;return e instanceof n||e instanceof ShadowRoot}function Mt(e){var n=e.state;Object.keys(n.elements).forEach(function(r){var g=n.styles[r]||{},y=n.attributes[r]||{},k=n.elements[r];!B(k)||!C$1(k)||(Object.assign(k.style,g),Object.keys(y).forEach(function($){var V=y[$];V===!1?k.removeAttribute($):k.setAttribute($,V===!0?"":V)}))})}function Rt(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow),function(){Object.keys(n.elements).forEach(function(g){var y=n.elements[g],k=n.attributes[g]||{},$=Object.keys(n.styles.hasOwnProperty(g)?n.styles[g]:r[g]),V=$.reduce(function(L,z){return L[z]="",L},{});!B(y)||!C$1(y)||(Object.assign(y.style,V),Object.keys(k).forEach(function(L){y.removeAttribute(L)}))})}}var Ae={name:"applyStyles",enabled:!0,phase:"write",fn:Mt,effect:Rt,requires:["computeStyles"]};function q(e){return e.split("-")[0]}var X$1=Math.max,ve=Math.min,Z=Math.round;function ee(e,n){n===void 0&&(n=!1);var r=e.getBoundingClientRect(),g=1,y=1;if(B(e)&&n){var k=e.offsetHeight,$=e.offsetWidth;$>0&&(g=Z(r.width)/$||1),k>0&&(y=Z(r.height)/k||1)}return{width:r.width/g,height:r.height/y,top:r.top/y,right:r.right/g,bottom:r.bottom/y,left:r.left/g,x:r.left/g,y:r.top/y}}function ke(e){var n=ee(e),r=e.offsetWidth,g=e.offsetHeight;return Math.abs(n.width-r)<=1&&(r=n.width),Math.abs(n.height-g)<=1&&(g=n.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:g}}function it(e,n){var r=n.getRootNode&&n.getRootNode();if(e.contains(n))return!0;if(r&&Pe(r)){var g=n;do{if(g&&e.isSameNode(g))return!0;g=g.parentNode||g.host}while(g)}return!1}function N$1(e){return H(e).getComputedStyle(e)}function Wt(e){return["table","td","th"].indexOf(C$1(e))>=0}function I$1(e){return((Q(e)?e.ownerDocument:e.document)||window.document).documentElement}function ge(e){return C$1(e)==="html"?e:e.assignedSlot||e.parentNode||(Pe(e)?e.host:null)||I$1(e)}function at(e){return!B(e)||N$1(e).position==="fixed"?null:e.offsetParent}function Bt(e){var n=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,r=navigator.userAgent.indexOf("Trident")!==-1;if(r&&B(e)){var g=N$1(e);if(g.position==="fixed")return null}var y=ge(e);for(Pe(y)&&(y=y.host);B(y)&&["html","body"].indexOf(C$1(y))<0;){var k=N$1(y);if(k.transform!=="none"||k.perspective!=="none"||k.contain==="paint"||["transform","perspective"].indexOf(k.willChange)!==-1||n&&k.willChange==="filter"||n&&k.filter&&k.filter!=="none")return y;y=y.parentNode}return null}function se(e){for(var n=H(e),r=at(e);r&&Wt(r)&&N$1(r).position==="static";)r=at(r);return r&&(C$1(r)==="html"||C$1(r)==="body"&&N$1(r).position==="static")?n:r||Bt(e)||n}function Le(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function fe(e,n,r){return X$1(e,ve(n,r))}function St(e,n,r){var g=fe(e,n,r);return g>r?r:g}function st(){return{top:0,right:0,bottom:0,left:0}}function ft(e){return Object.assign({},st(),e)}function ct(e,n){return n.reduce(function(r,g){return r[g]=e,r},{})}var Tt=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,ft(typeof e!="number"?e:ct(e,G))};function Ht(e){var n,r=e.state,g=e.name,y=e.options,k=r.elements.arrow,$=r.modifiersData.popperOffsets,V=q(r.placement),L=Le(V),z=[P$1,W].indexOf(V)>=0,j=z?"height":"width";if(!(!k||!$)){var ae=Tt(y.padding,r),re=ke(k),oe=L==="y"?E$1:P$1,ue=L==="y"?R:W,le=r.rects.reference[j]+r.rects.reference[L]-$[L]-r.rects.popper[j],de=$[L]-r.rects.reference[L],he=se(k),_e=he?L==="y"?he.clientHeight||0:he.clientWidth||0:0,Ce=le/2-de/2,Ne=ae[oe],$e=_e-re[j]-ae[ue],xe=_e/2-re[j]/2+Ce,Ie=fe(Ne,xe,$e),ze=L;r.modifiersData[g]=(n={},n[ze]=Ie,n.centerOffset=Ie-xe,n)}}function Ct(e){var n=e.state,r=e.options,g=r.element,y=g===void 0?"[data-popper-arrow]":g;y!=null&&(typeof y=="string"&&(y=n.elements.popper.querySelector(y),!y)||!it(n.elements.popper,y)||(n.elements.arrow=y))}var pt={name:"arrow",enabled:!0,phase:"main",fn:Ht,effect:Ct,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function te(e){return e.split("-")[1]}var qt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Vt(e){var n=e.x,r=e.y,g=window,y=g.devicePixelRatio||1;return{x:Z(n*y)/y||0,y:Z(r*y)/y||0}}function ut(e){var n,r=e.popper,g=e.popperRect,y=e.placement,k=e.variation,$=e.offsets,V=e.position,L=e.gpuAcceleration,z=e.adaptive,j=e.roundOffsets,ae=e.isFixed,re=$.x,oe=re===void 0?0:re,ue=$.y,le=ue===void 0?0:ue,de=typeof j=="function"?j({x:oe,y:le}):{x:oe,y:le};oe=de.x,le=de.y;var he=$.hasOwnProperty("x"),_e=$.hasOwnProperty("y"),Ce=P$1,Ne=E$1,$e=window;if(z){var xe=se(r),Ie="clientHeight",ze="clientWidth";if(xe===H(r)&&(xe=I$1(r),N$1(xe).position!=="static"&&V==="absolute"&&(Ie="scrollHeight",ze="scrollWidth")),xe=xe,y===E$1||(y===P$1||y===W)&&k===J){Ne=R;var qe=ae&&xe===$e&&$e.visualViewport?$e.visualViewport.height:xe[Ie];le-=qe-g.height,le*=L?1:-1}if(y===P$1||(y===E$1||y===R)&&k===J){Ce=W;var Et=ae&&xe===$e&&$e.visualViewport?$e.visualViewport.width:xe[ze];oe-=Et-g.width,oe*=L?1:-1}}var _n=Object.assign({position:V},z&&qt),Dt=j===!0?Vt({x:oe,y:le}):{x:oe,y:le};if(oe=Dt.x,le=Dt.y,L){var Sn;return Object.assign({},_n,(Sn={},Sn[Ne]=_e?"0":"",Sn[Ce]=he?"0":"",Sn.transform=($e.devicePixelRatio||1)<=1?"translate("+oe+"px, "+le+"px)":"translate3d("+oe+"px, "+le+"px, 0)",Sn))}return Object.assign({},_n,(n={},n[Ne]=_e?le+"px":"",n[Ce]=he?oe+"px":"",n.transform="",n))}function Nt(e){var n=e.state,r=e.options,g=r.gpuAcceleration,y=g===void 0?!0:g,k=r.adaptive,$=k===void 0?!0:k,V=r.roundOffsets,L=V===void 0?!0:V,z={placement:q(n.placement),variation:te(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:y,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,ut(Object.assign({},z,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:$,roundOffsets:L})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,ut(Object.assign({},z,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:L})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}var Me={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Nt,data:{}},ye={passive:!0};function It(e){var n=e.state,r=e.instance,g=e.options,y=g.scroll,k=y===void 0?!0:y,$=g.resize,V=$===void 0?!0:$,L=H(n.elements.popper),z=[].concat(n.scrollParents.reference,n.scrollParents.popper);return k&&z.forEach(function(j){j.addEventListener("scroll",r.update,ye)}),V&&L.addEventListener("resize",r.update,ye),function(){k&&z.forEach(function(j){j.removeEventListener("scroll",r.update,ye)}),V&&L.removeEventListener("resize",r.update,ye)}}var Re={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:It,data:{}},_t={left:"right",right:"left",bottom:"top",top:"bottom"};function be(e){return e.replace(/left|right|bottom|top/g,function(n){return _t[n]})}var zt={start:"end",end:"start"};function lt$1(e){return e.replace(/start|end/g,function(n){return zt[n]})}function We(e){var n=H(e),r=n.pageXOffset,g=n.pageYOffset;return{scrollLeft:r,scrollTop:g}}function Be(e){return ee(I$1(e)).left+We(e).scrollLeft}function Ft(e){var n=H(e),r=I$1(e),g=n.visualViewport,y=r.clientWidth,k=r.clientHeight,$=0,V=0;return g&&(y=g.width,k=g.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||($=g.offsetLeft,V=g.offsetTop)),{width:y,height:k,x:$+Be(e),y:V}}function Ut(e){var n,r=I$1(e),g=We(e),y=(n=e.ownerDocument)==null?void 0:n.body,k=X$1(r.scrollWidth,r.clientWidth,y?y.scrollWidth:0,y?y.clientWidth:0),$=X$1(r.scrollHeight,r.clientHeight,y?y.scrollHeight:0,y?y.clientHeight:0),V=-g.scrollLeft+Be(e),L=-g.scrollTop;return N$1(y||r).direction==="rtl"&&(V+=X$1(r.clientWidth,y?y.clientWidth:0)-k),{width:k,height:$,x:V,y:L}}function Se(e){var n=N$1(e),r=n.overflow,g=n.overflowX,y=n.overflowY;return/auto|scroll|overlay|hidden/.test(r+y+g)}function dt(e){return["html","body","#document"].indexOf(C$1(e))>=0?e.ownerDocument.body:B(e)&&Se(e)?e:dt(ge(e))}function ce(e,n){var r;n===void 0&&(n=[]);var g=dt(e),y=g===((r=e.ownerDocument)==null?void 0:r.body),k=H(g),$=y?[k].concat(k.visualViewport||[],Se(g)?g:[]):g,V=n.concat($);return y?V:V.concat(ce(ge($)))}function Te(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Xt(e){var n=ee(e);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function ht(e,n){return n===je?Te(Ft(e)):Q(n)?Xt(n):Te(Ut(I$1(e)))}function Yt(e){var n=ce(ge(e)),r=["absolute","fixed"].indexOf(N$1(e).position)>=0,g=r&&B(e)?se(e):e;return Q(g)?n.filter(function(y){return Q(y)&&it(y,g)&&C$1(y)!=="body"}):[]}function Gt(e,n,r){var g=n==="clippingParents"?Yt(e):[].concat(n),y=[].concat(g,[r]),k=y[0],$=y.reduce(function(V,L){var z=ht(e,L);return V.top=X$1(z.top,V.top),V.right=ve(z.right,V.right),V.bottom=ve(z.bottom,V.bottom),V.left=X$1(z.left,V.left),V},ht(e,k));return $.width=$.right-$.left,$.height=$.bottom-$.top,$.x=$.left,$.y=$.top,$}function mt(e){var n=e.reference,r=e.element,g=e.placement,y=g?q(g):null,k=g?te(g):null,$=n.x+n.width/2-r.width/2,V=n.y+n.height/2-r.height/2,L;switch(y){case E$1:L={x:$,y:n.y-r.height};break;case R:L={x:$,y:n.y+n.height};break;case W:L={x:n.x+n.width,y:V};break;case P$1:L={x:n.x-r.width,y:V};break;default:L={x:n.x,y:n.y}}var z=y?Le(y):null;if(z!=null){var j=z==="y"?"height":"width";switch(k){case U$1:L[z]=L[z]-(n[j]/2-r[j]/2);break;case J:L[z]=L[z]+(n[j]/2-r[j]/2);break}}return L}function ne(e,n){n===void 0&&(n={});var r=n,g=r.placement,y=g===void 0?e.placement:g,k=r.boundary,$=k===void 0?Xe:k,V=r.rootBoundary,L=V===void 0?je:V,z=r.elementContext,j=z===void 0?K:z,ae=r.altBoundary,re=ae===void 0?!1:ae,oe=r.padding,ue=oe===void 0?0:oe,le=ft(typeof ue!="number"?ue:ct(ue,G)),de=j===K?Ye:K,he=e.rects.popper,_e=e.elements[re?de:j],Ce=Gt(Q(_e)?_e:_e.contextElement||I$1(e.elements.popper),$,L),Ne=ee(e.elements.reference),$e=mt({reference:Ne,element:he,strategy:"absolute",placement:y}),xe=Te(Object.assign({},he,$e)),Ie=j===K?xe:Ne,ze={top:Ce.top-Ie.top+le.top,bottom:Ie.bottom-Ce.bottom+le.bottom,left:Ce.left-Ie.left+le.left,right:Ie.right-Ce.right+le.right},qe=e.modifiersData.offset;if(j===K&&qe){var Et=qe[y];Object.keys(ze).forEach(function(_n){var Dt=[W,R].indexOf(_n)>=0?1:-1,Sn=[E$1,R].indexOf(_n)>=0?"y":"x";ze[_n]+=Et[Sn]*Dt})}return ze}function Jt(e,n){n===void 0&&(n={});var r=n,g=r.placement,y=r.boundary,k=r.rootBoundary,$=r.padding,V=r.flipVariations,L=r.allowedAutoPlacements,z=L===void 0?Ee:L,j=te(g),ae=j?V?De:De.filter(function(ue){return te(ue)===j}):G,re=ae.filter(function(ue){return z.indexOf(ue)>=0});re.length===0&&(re=ae);var oe=re.reduce(function(ue,le){return ue[le]=ne(e,{placement:le,boundary:y,rootBoundary:k,padding:$})[q(le)],ue},{});return Object.keys(oe).sort(function(ue,le){return oe[ue]-oe[le]})}function Kt(e){if(q(e)===me)return[];var n=be(e);return[lt$1(e),n,lt$1(n)]}function Qt(e){var n=e.state,r=e.options,g=e.name;if(!n.modifiersData[g]._skip){for(var y=r.mainAxis,k=y===void 0?!0:y,$=r.altAxis,V=$===void 0?!0:$,L=r.fallbackPlacements,z=r.padding,j=r.boundary,ae=r.rootBoundary,re=r.altBoundary,oe=r.flipVariations,ue=oe===void 0?!0:oe,le=r.allowedAutoPlacements,de=n.options.placement,he=q(de),_e=he===de,Ce=L||(_e||!ue?[be(de)]:Kt(de)),Ne=[de].concat(Ce).reduce(function(la,ca){return la.concat(q(ca)===me?Jt(n,{placement:ca,boundary:j,rootBoundary:ae,padding:z,flipVariations:ue,allowedAutoPlacements:le}):ca)},[]),$e=n.rects.reference,xe=n.rects.popper,Ie=new Map,ze=!0,qe=Ne[0],Et=0;Et<Ne.length;Et++){var _n=Ne[Et],Dt=q(_n),Sn=te(_n)===U$1,hn=[E$1,R].indexOf(Dt)>=0,Vn=hn?"width":"height",Mn=ne(n,{placement:_n,boundary:j,rootBoundary:ae,altBoundary:re,padding:z}),$n=hn?Sn?W:P$1:Sn?R:E$1;$e[Vn]>xe[Vn]&&($n=be($n));var Nn=be($n),kn=[];if(k&&kn.push(Mn[Dt]<=0),V&&kn.push(Mn[$n]<=0,Mn[Nn]<=0),kn.every(function(la){return la})){qe=_n,ze=!1;break}Ie.set(_n,kn)}if(ze)for(var jn=ue?3:1,Fn=function(la){var ca=Ne.find(function(Zn){var Bn=Ie.get(Zn);if(Bn)return Bn.slice(0,la).every(function(Wn){return Wn})});if(ca)return qe=ca,"break"},Tn=jn;Tn>0;Tn--){var Hn=Fn(Tn);if(Hn==="break")break}n.placement!==qe&&(n.modifiersData[g]._skip=!0,n.placement=qe,n.reset=!0)}}var vt={name:"flip",enabled:!0,phase:"main",fn:Qt,requiresIfExists:["offset"],data:{_skip:!1}};function gt(e,n,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-n.height-r.y,right:e.right-n.width+r.x,bottom:e.bottom-n.height+r.y,left:e.left-n.width-r.x}}function yt(e){return[E$1,W,R,P$1].some(function(n){return e[n]>=0})}function Zt(e){var n=e.state,r=e.name,g=n.rects.reference,y=n.rects.popper,k=n.modifiersData.preventOverflow,$=ne(n,{elementContext:"reference"}),V=ne(n,{altBoundary:!0}),L=gt($,g),z=gt(V,y,k),j=yt(L),ae=yt(z);n.modifiersData[r]={referenceClippingOffsets:L,popperEscapeOffsets:z,isReferenceHidden:j,hasPopperEscaped:ae},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":j,"data-popper-escaped":ae})}var bt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Zt};function en(e,n,r){var g=q(e),y=[P$1,E$1].indexOf(g)>=0?-1:1,k=typeof r=="function"?r(Object.assign({},n,{placement:e})):r,$=k[0],V=k[1];return $=$||0,V=(V||0)*y,[P$1,W].indexOf(g)>=0?{x:V,y:$}:{x:$,y:V}}function tn(e){var n=e.state,r=e.options,g=e.name,y=r.offset,k=y===void 0?[0,0]:y,$=Ee.reduce(function(j,ae){return j[ae]=en(ae,n.rects,k),j},{}),V=$[n.placement],L=V.x,z=V.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=L,n.modifiersData.popperOffsets.y+=z),n.modifiersData[g]=$}var wt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:tn};function nn(e){var n=e.state,r=e.name;n.modifiersData[r]=mt({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})}var He={name:"popperOffsets",enabled:!0,phase:"read",fn:nn,data:{}};function rn(e){return e==="x"?"y":"x"}function on(e){var n=e.state,r=e.options,g=e.name,y=r.mainAxis,k=y===void 0?!0:y,$=r.altAxis,V=$===void 0?!1:$,L=r.boundary,z=r.rootBoundary,j=r.altBoundary,ae=r.padding,re=r.tether,oe=re===void 0?!0:re,ue=r.tetherOffset,le=ue===void 0?0:ue,de=ne(n,{boundary:L,rootBoundary:z,padding:ae,altBoundary:j}),he=q(n.placement),_e=te(n.placement),Ce=!_e,Ne=Le(he),$e=rn(Ne),xe=n.modifiersData.popperOffsets,Ie=n.rects.reference,ze=n.rects.popper,qe=typeof le=="function"?le(Object.assign({},n.rects,{placement:n.placement})):le,Et=typeof qe=="number"?{mainAxis:qe,altAxis:qe}:Object.assign({mainAxis:0,altAxis:0},qe),_n=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,Dt={x:0,y:0};if(xe){if(k){var Sn,hn=Ne==="y"?E$1:P$1,Vn=Ne==="y"?R:W,Mn=Ne==="y"?"height":"width",$n=xe[Ne],Nn=$n+de[hn],kn=$n-de[Vn],jn=oe?-ze[Mn]/2:0,Fn=_e===U$1?Ie[Mn]:ze[Mn],Tn=_e===U$1?-ze[Mn]:-Ie[Mn],Hn=n.elements.arrow,la=oe&&Hn?ke(Hn):{width:0,height:0},ca=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:st(),Zn=ca[hn],Bn=ca[Vn],Wn=fe(0,Ie[Mn],la[Mn]),da=Ce?Ie[Mn]/2-jn-Wn-Zn-Et.mainAxis:Fn-Wn-Zn-Et.mainAxis,ga=Ce?-Ie[Mn]/2+jn+Wn+Bn+Et.mainAxis:Tn+Wn+Bn+Et.mainAxis,Ca=n.elements.arrow&&se(n.elements.arrow),ra=Ca?Ne==="y"?Ca.clientTop||0:Ca.clientLeft||0:0,Gn=(Sn=_n?.[Ne])!=null?Sn:0,vn=$n+da-Gn-ra,Kn=$n+ga-Gn,En=fe(oe?ve(Nn,vn):Nn,$n,oe?X$1(kn,Kn):kn);xe[Ne]=En,Dt[Ne]=En-$n}if(V){var kt,At=Ne==="x"?E$1:P$1,Dn=Ne==="x"?R:W,Xn=xe[$e],aa=$e==="y"?"height":"width",sa=Xn+de[At],ia=Xn-de[Dn],ma=[E$1,P$1].indexOf(he)!==-1,ua=(kt=_n?.[$e])!=null?kt:0,pe=ma?sa:Xn-Ie[aa]-ze[aa]-ua+Et.altAxis,Oe=ma?Xn+Ie[aa]+ze[aa]-ua-Et.altAxis:ia,Ve=oe&&ma?St(pe,Xn,Oe):fe(oe?pe:sa,Xn,oe?Oe:ia);xe[$e]=Ve,Dt[$e]=Ve-Xn}n.modifiersData[g]=Dt}}var xt={name:"preventOverflow",enabled:!0,phase:"main",fn:on,requiresIfExists:["offset"]};function an(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function sn(e){return e===H(e)||!B(e)?We(e):an(e)}function fn(e){var n=e.getBoundingClientRect(),r=Z(n.width)/e.offsetWidth||1,g=Z(n.height)/e.offsetHeight||1;return r!==1||g!==1}function cn(e,n,r){r===void 0&&(r=!1);var g=B(n),y=B(n)&&fn(n),k=I$1(n),$=ee(e,y),V={scrollLeft:0,scrollTop:0},L={x:0,y:0};return(g||!g&&!r)&&((C$1(n)!=="body"||Se(k))&&(V=sn(n)),B(n)?(L=ee(n,!0),L.x+=n.clientLeft,L.y+=n.clientTop):k&&(L.x=Be(k))),{x:$.left+V.scrollLeft-L.x,y:$.top+V.scrollTop-L.y,width:$.width,height:$.height}}function pn(e){var n=new Map,r=new Set,g=[];e.forEach(function(k){n.set(k.name,k)});function y(k){r.add(k.name);var $=[].concat(k.requires||[],k.requiresIfExists||[]);$.forEach(function(V){if(!r.has(V)){var L=n.get(V);L&&y(L)}}),g.push(k)}return e.forEach(function(k){r.has(k.name)||y(k)}),g}function un(e){var n=pn(e);return ot.reduce(function(r,g){return r.concat(n.filter(function(y){return y.phase===g}))},[])}function ln(e){var n;return function(){return n||(n=new Promise(function(r){Promise.resolve().then(function(){n=void 0,r(e())})})),n}}function dn(e){var n=e.reduce(function(r,g){var y=r[g.name];return r[g.name]=y?Object.assign({},y,g,{options:Object.assign({},y.options,g.options),data:Object.assign({},y.data,g.data)}):g,r},{});return Object.keys(n).map(function(r){return n[r]})}var Ot={placement:"bottom",modifiers:[],strategy:"absolute"};function $t(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return!n.some(function(g){return!(g&&typeof g.getBoundingClientRect=="function")})}function we(e){e===void 0&&(e={});var n=e,r=n.defaultModifiers,g=r===void 0?[]:r,y=n.defaultOptions,k=y===void 0?Ot:y;return function($,V,L){L===void 0&&(L=k);var z={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ot,k),modifiersData:{},elements:{reference:$,popper:V},attributes:{},styles:{}},j=[],ae=!1,re={state:z,setOptions:function(le){var de=typeof le=="function"?le(z.options):le;ue(),z.options=Object.assign({},k,z.options,de),z.scrollParents={reference:Q($)?ce($):$.contextElement?ce($.contextElement):[],popper:ce(V)};var he=un(dn([].concat(g,z.options.modifiers)));return z.orderedModifiers=he.filter(function(_e){return _e.enabled}),oe(),re.update()},forceUpdate:function(){if(!ae){var le=z.elements,de=le.reference,he=le.popper;if($t(de,he)){z.rects={reference:cn(de,se(he),z.options.strategy==="fixed"),popper:ke(he)},z.reset=!1,z.placement=z.options.placement,z.orderedModifiers.forEach(function(ze){return z.modifiersData[ze.name]=Object.assign({},ze.data)});for(var _e=0;_e<z.orderedModifiers.length;_e++){if(z.reset===!0){z.reset=!1,_e=-1;continue}var Ce=z.orderedModifiers[_e],Ne=Ce.fn,$e=Ce.options,xe=$e===void 0?{}:$e,Ie=Ce.name;typeof Ne=="function"&&(z=Ne({state:z,options:xe,name:Ie,instance:re})||z)}}}},update:ln(function(){return new Promise(function(le){re.forceUpdate(),le(z)})}),destroy:function(){ue(),ae=!0}};if(!$t($,V))return re;re.setOptions(L).then(function(le){!ae&&L.onFirstUpdate&&L.onFirstUpdate(le)});function oe(){z.orderedModifiers.forEach(function(le){var de=le.name,he=le.options,_e=he===void 0?{}:he,Ce=le.effect;if(typeof Ce=="function"){var Ne=Ce({state:z,name:de,instance:re,options:_e}),$e=function(){};j.push(Ne||$e)}})}function ue(){j.forEach(function(le){return le()}),j=[]}return re}}we();var mn=[Re,He,Me,Ae];we({defaultModifiers:mn});var gn=[Re,He,Me,Ae,wt,vt,xt,pt,bt],yn=we({defaultModifiers:gn});const usePopper=(e,n,r={})=>{const g={name:"updateState",enabled:!0,phase:"write",fn:({state:L})=>{const z=deriveState(L);Object.assign($.value,z)},requires:["computeStyles"]},y=computed(()=>{const{onFirstUpdate:L,placement:z,strategy:j,modifiers:ae}=unref(r);return{onFirstUpdate:L,placement:z||"bottom",strategy:j||"absolute",modifiers:[...ae||[],g,{name:"applyStyles",enabled:!1}]}}),k=shallowRef(),$=ref({styles:{popper:{position:unref(y).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),V=()=>{k.value&&(k.value.destroy(),k.value=void 0)};return watch(y,L=>{const z=unref(k);z&&z.setOptions(L)},{deep:!0}),watch([e,n],([L,z])=>{V(),!(!L||!z)&&(k.value=yn(L,z,unref(y)))}),onBeforeUnmount(()=>{V()}),{state:computed(()=>{var L;return{...((L=unref(k))==null?void 0:L.state)||{}}}),styles:computed(()=>unref($).styles),attributes:computed(()=>unref($).attributes),update:()=>{var L;return(L=unref(k))==null?void 0:L.update()},forceUpdate:()=>{var L;return(L=unref(k))==null?void 0:L.forceUpdate()},instanceRef:computed(()=>unref(k))}};function deriveState(e){const n=Object.keys(e.elements),r=fromPairs(n.map(y=>[y,e.styles[y]||{}])),g=fromPairs(n.map(y=>[y,e.attributes[y]]));return{styles:r,attributes:g}}const useSameTarget=e=>{if(!e)return{onClick:NOOP,onMousedown:NOOP,onMouseup:NOOP};let n=!1,r=!1;return{onClick:$=>{n&&r&&e($),n=r=!1},onMousedown:$=>{n=$.target===$.currentTarget},onMouseup:$=>{r=$.target===$.currentTarget}}},useThrottleRender=(e,n=0)=>{if(n===0)return e;const r=ref(!1);let g=0;const y=()=>{g&&clearTimeout(g),g=window.setTimeout(()=>{r.value=e.value},n)};return onMounted(y),watch(()=>e.value,k=>{k?y():r.value=k}),r};function useTimeout(){let e;const n=(g,y)=>{r(),e=window.setTimeout(g,y)},r=()=>window.clearTimeout(e);return tryOnScopeDispose(()=>r()),{registerTimeout:n,cancelTimeout:r}}const defaultIdInjection={prefix:Math.floor(Math.random()*1e4),current:0},ID_INJECTION_KEY=Symbol("elIdInjection"),useIdInjection=()=>getCurrentInstance()?inject(ID_INJECTION_KEY,defaultIdInjection):defaultIdInjection,useId=e=>{const n=useIdInjection(),r=useGetDerivedNamespace();return computed(()=>unref(e)||`${r.value}-id-${n.prefix}-${n.current++}`)};let registeredEscapeHandlers=[];const cachedHandler=e=>{const n=e;n.key===EVENT_CODE.esc&&registeredEscapeHandlers.forEach(r=>r(n))},useEscapeKeydown=e=>{onMounted(()=>{registeredEscapeHandlers.length===0&&document.addEventListener("keydown",cachedHandler),isClient&&registeredEscapeHandlers.push(e)}),onBeforeUnmount(()=>{registeredEscapeHandlers=registeredEscapeHandlers.filter(n=>n!==e),registeredEscapeHandlers.length===0&&isClient&&document.removeEventListener("keydown",cachedHandler)})};let cachedContainer;const usePopperContainerId=()=>{const e=useGetDerivedNamespace(),n=useIdInjection(),r=computed(()=>`${e.value}-popper-container-${n.prefix}`),g=computed(()=>`#${r.value}`);return{id:r,selector:g}},createContainer=e=>{const n=document.createElement("div");return n.id=e,document.body.appendChild(n),n},usePopperContainer=()=>{const{id:e,selector:n}=usePopperContainerId();return onBeforeMount(()=>{isClient&&!cachedContainer&&!document.body.querySelector(n.value)&&(cachedContainer=createContainer(e.value))}),{id:e,selector:n}},useDelayedToggleProps=buildProps({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),useDelayedToggle=({showAfter:e,hideAfter:n,autoClose:r,open:g,close:y})=>{const{registerTimeout:k}=useTimeout(),{registerTimeout:$,cancelTimeout:V}=useTimeout();return{onOpen:j=>{k(()=>{g(j);const ae=unref(r);isNumber$1(ae)&&ae>0&&$(()=>{y(j)},ae)},unref(e))},onClose:j=>{V(),k(()=>{y(j)},unref(n))}}},FORWARD_REF_INJECTION_KEY=Symbol("elForwardRef"),useForwardRef=e=>{provide(FORWARD_REF_INJECTION_KEY,{setForwardRef:r=>{e.value=r}})},useForwardRefDirective=e=>({mounted(n){e(n)},updated(n){e(n)},unmounted(){e(null)}}),zIndex=ref(0),defaultInitialZIndex=2e3,zIndexContextKey=Symbol("zIndexContextKey"),useZIndex=e=>{const n=e||(getCurrentInstance()?inject(zIndexContextKey,void 0):void 0),r=computed(()=>{const k=unref(n);return isNumber$1(k)?k:defaultInitialZIndex}),g=computed(()=>r.value+zIndex.value);return{initialZIndex:r,currentZIndex:g,nextZIndex:()=>(zIndex.value++,g.value)}},min$1=Math.min,max$1=Math.max,round=Math.round,createCoords=e=>({x:e,y:e});function clamp(e,n,r){return max$1(e,min$1(n,r))}function evaluate(e,n){return typeof e=="function"?e(n):e}function getSide(e){return e.split("-")[0]}function getAlignment(e){return e.split("-")[1]}function getOppositeAxis(e){return e==="x"?"y":"x"}function getAxisLength(e){return e==="y"?"height":"width"}function getSideAxis(e){return["top","bottom"].includes(getSide(e))?"y":"x"}function getAlignmentAxis(e){return getOppositeAxis(getSideAxis(e))}function expandPaddingObject(e){return{top:0,right:0,bottom:0,left:0,...e}}function getPaddingObject(e){return typeof e!="number"?expandPaddingObject(e):{top:e,right:e,bottom:e,left:e}}function rectToClientRect(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function computeCoordsFromPlacement(e,n,r){let{reference:g,floating:y}=e;const k=getSideAxis(n),$=getAlignmentAxis(n),V=getAxisLength($),L=getSide(n),z=k==="y",j=g.x+g.width/2-y.width/2,ae=g.y+g.height/2-y.height/2,re=g[V]/2-y[V]/2;let oe;switch(L){case"top":oe={x:j,y:g.y-y.height};break;case"bottom":oe={x:j,y:g.y+g.height};break;case"right":oe={x:g.x+g.width,y:ae};break;case"left":oe={x:g.x-y.width,y:ae};break;default:oe={x:g.x,y:g.y}}switch(getAlignment(n)){case"start":oe[$]-=re*(r&&z?-1:1);break;case"end":oe[$]+=re*(r&&z?-1:1);break}return oe}const computePosition$1=async(e,n,r)=>{const{placement:g="bottom",strategy:y="absolute",middleware:k=[],platform:$}=r,V=k.filter(Boolean),L=await($.isRTL==null?void 0:$.isRTL(n));let z=await $.getElementRects({reference:e,floating:n,strategy:y}),{x:j,y:ae}=computeCoordsFromPlacement(z,g,L),re=g,oe={},ue=0;for(let le=0;le<V.length;le++){const{name:de,fn:he}=V[le],{x:_e,y:Ce,data:Ne,reset:$e}=await he({x:j,y:ae,initialPlacement:g,placement:re,strategy:y,middlewareData:oe,rects:z,platform:$,elements:{reference:e,floating:n}});if(j=_e??j,ae=Ce??ae,oe={...oe,[de]:{...oe[de],...Ne}},$e&&ue<=50){ue++,typeof $e=="object"&&($e.placement&&(re=$e.placement),$e.rects&&(z=$e.rects===!0?await $.getElementRects({reference:e,floating:n,strategy:y}):$e.rects),{x:j,y:ae}=computeCoordsFromPlacement(z,re,L)),le=-1;continue}}return{x:j,y:ae,placement:re,strategy:y,middlewareData:oe}},arrow=e=>({name:"arrow",options:e,async fn(n){const{x:r,y:g,placement:y,rects:k,platform:$,elements:V}=n,{element:L,padding:z=0}=evaluate(e,n)||{};if(L==null)return{};const j=getPaddingObject(z),ae={x:r,y:g},re=getAlignmentAxis(y),oe=getAxisLength(re),ue=await $.getDimensions(L),le=re==="y",de=le?"top":"left",he=le?"bottom":"right",_e=le?"clientHeight":"clientWidth",Ce=k.reference[oe]+k.reference[re]-ae[re]-k.floating[oe],Ne=ae[re]-k.reference[re],$e=await($.getOffsetParent==null?void 0:$.getOffsetParent(L));let xe=$e?$e[_e]:0;(!xe||!await($.isElement==null?void 0:$.isElement($e)))&&(xe=V.floating[_e]||k.floating[oe]);const Ie=Ce/2-Ne/2,ze=xe/2-ue[oe]/2-1,qe=min$1(j[de],ze),Et=min$1(j[he],ze),_n=qe,Dt=xe-ue[oe]-Et,Sn=xe/2-ue[oe]/2+Ie,hn=clamp(_n,Sn,Dt),Mn=getAlignment(y)!=null&&Sn!=hn&&k.reference[oe]/2-(Sn<_n?qe:Et)-ue[oe]/2<0?Sn<_n?_n-Sn:Dt-Sn:0;return{[re]:ae[re]-Mn,data:{[re]:hn,centerOffset:Sn-hn+Mn}}}});async function convertValueToCoords(e,n){const{placement:r,platform:g,elements:y}=e,k=await(g.isRTL==null?void 0:g.isRTL(y.floating)),$=getSide(r),V=getAlignment(r),L=getSideAxis(r)==="y",z=["left","top"].includes($)?-1:1,j=k&&L?-1:1,ae=evaluate(n,e);let{mainAxis:re,crossAxis:oe,alignmentAxis:ue}=typeof ae=="number"?{mainAxis:ae,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...ae};return V&&typeof ue=="number"&&(oe=V==="end"?ue*-1:ue),L?{x:oe*j,y:re*z}:{x:re*z,y:oe*j}}const offset$1=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){const{x:r,y:g}=n,y=await convertValueToCoords(n,e);return{x:r+y.x,y:g+y.y,data:y}}}};function getNodeName(e){return isNode(e)?(e.nodeName||"").toLowerCase():"#document"}function getWindow(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function getDocumentElement(e){var n;return(n=(isNode(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function isNode(e){return e instanceof Node||e instanceof getWindow(e).Node}function isElement(e){return e instanceof Element||e instanceof getWindow(e).Element}function isHTMLElement(e){return e instanceof HTMLElement||e instanceof getWindow(e).HTMLElement}function isShadowRoot(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof getWindow(e).ShadowRoot}function isOverflowElement(e){const{overflow:n,overflowX:r,overflowY:g,display:y}=getComputedStyle$1(e);return/auto|scroll|overlay|hidden|clip/.test(n+g+r)&&!["inline","contents"].includes(y)}function isTableElement(e){return["table","td","th"].includes(getNodeName(e))}function isContainingBlock(e){const n=isWebKit(),r=getComputedStyle$1(e);return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!n&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!n&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(g=>(r.willChange||"").includes(g))||["paint","layout","strict","content"].some(g=>(r.contain||"").includes(g))}function getContainingBlock(e){let n=getParentNode(e);for(;isHTMLElement(n)&&!isLastTraversableNode(n);){if(isContainingBlock(n))return n;n=getParentNode(n)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(e){return["html","body","#document"].includes(getNodeName(e))}function getComputedStyle$1(e){return getWindow(e).getComputedStyle(e)}function getNodeScroll(e){return isElement(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function getParentNode(e){if(getNodeName(e)==="html")return e;const n=e.assignedSlot||e.parentNode||isShadowRoot(e)&&e.host||getDocumentElement(e);return isShadowRoot(n)?n.host:n}function getNearestOverflowAncestor(e){const n=getParentNode(e);return isLastTraversableNode(n)?e.ownerDocument?e.ownerDocument.body:e.body:isHTMLElement(n)&&isOverflowElement(n)?n:getNearestOverflowAncestor(n)}function getOverflowAncestors(e,n){var r;n===void 0&&(n=[]);const g=getNearestOverflowAncestor(e),y=g===((r=e.ownerDocument)==null?void 0:r.body),k=getWindow(g);return y?n.concat(k,k.visualViewport||[],isOverflowElement(g)?g:[],k.frameElement?getOverflowAncestors(k.frameElement):[]):n.concat(g,getOverflowAncestors(g))}function getCssDimensions(e){const n=getComputedStyle$1(e);let r=parseFloat(n.width)||0,g=parseFloat(n.height)||0;const y=isHTMLElement(e),k=y?e.offsetWidth:r,$=y?e.offsetHeight:g,V=round(r)!==k||round(g)!==$;return V&&(r=k,g=$),{width:r,height:g,$:V}}function unwrapElement(e){return isElement(e)?e:e.contextElement}function getScale$1(e){const n=unwrapElement(e);if(!isHTMLElement(n))return createCoords(1);const r=n.getBoundingClientRect(),{width:g,height:y,$:k}=getCssDimensions(n);let $=(k?round(r.width):r.width)/g,V=(k?round(r.height):r.height)/y;return(!$||!Number.isFinite($))&&($=1),(!V||!Number.isFinite(V))&&(V=1),{x:$,y:V}}const noOffsets=createCoords(0);function getVisualOffsets(e){const n=getWindow(e);return!isWebKit()||!n.visualViewport?noOffsets:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function shouldAddVisualOffsets(e,n,r){return n===void 0&&(n=!1),!r||n&&r!==getWindow(e)?!1:n}function getBoundingClientRect(e,n,r,g){n===void 0&&(n=!1),r===void 0&&(r=!1);const y=e.getBoundingClientRect(),k=unwrapElement(e);let $=createCoords(1);n&&(g?isElement(g)&&($=getScale$1(g)):$=getScale$1(e));const V=shouldAddVisualOffsets(k,r,g)?getVisualOffsets(k):createCoords(0);let L=(y.left+V.x)/$.x,z=(y.top+V.y)/$.y,j=y.width/$.x,ae=y.height/$.y;if(k){const re=getWindow(k),oe=g&&isElement(g)?getWindow(g):g;let ue=re.frameElement;for(;ue&&g&&oe!==re;){const le=getScale$1(ue),de=ue.getBoundingClientRect(),he=getComputedStyle$1(ue),_e=de.left+(ue.clientLeft+parseFloat(he.paddingLeft))*le.x,Ce=de.top+(ue.clientTop+parseFloat(he.paddingTop))*le.y;L*=le.x,z*=le.y,j*=le.x,ae*=le.y,L+=_e,z+=Ce,ue=getWindow(ue).frameElement}}return rectToClientRect({width:j,height:ae,x:L,y:z})}function convertOffsetParentRelativeRectToViewportRelativeRect(e){let{rect:n,offsetParent:r,strategy:g}=e;const y=isHTMLElement(r),k=getDocumentElement(r);if(r===k)return n;let $={scrollLeft:0,scrollTop:0},V=createCoords(1);const L=createCoords(0);if((y||!y&&g!=="fixed")&&((getNodeName(r)!=="body"||isOverflowElement(k))&&($=getNodeScroll(r)),isHTMLElement(r))){const z=getBoundingClientRect(r);V=getScale$1(r),L.x=z.x+r.clientLeft,L.y=z.y+r.clientTop}return{width:n.width*V.x,height:n.height*V.y,x:n.x*V.x-$.scrollLeft*V.x+L.x,y:n.y*V.y-$.scrollTop*V.y+L.y}}function getClientRects(e){return Array.from(e.getClientRects())}function getWindowScrollBarX(e){return getBoundingClientRect(getDocumentElement(e)).left+getNodeScroll(e).scrollLeft}function getDocumentRect(e){const n=getDocumentElement(e),r=getNodeScroll(e),g=e.ownerDocument.body,y=max$1(n.scrollWidth,n.clientWidth,g.scrollWidth,g.clientWidth),k=max$1(n.scrollHeight,n.clientHeight,g.scrollHeight,g.clientHeight);let $=-r.scrollLeft+getWindowScrollBarX(e);const V=-r.scrollTop;return getComputedStyle$1(g).direction==="rtl"&&($+=max$1(n.clientWidth,g.clientWidth)-y),{width:y,height:k,x:$,y:V}}function getViewportRect(e,n){const r=getWindow(e),g=getDocumentElement(e),y=r.visualViewport;let k=g.clientWidth,$=g.clientHeight,V=0,L=0;if(y){k=y.width,$=y.height;const z=isWebKit();(!z||z&&n==="fixed")&&(V=y.offsetLeft,L=y.offsetTop)}return{width:k,height:$,x:V,y:L}}function getInnerBoundingClientRect(e,n){const r=getBoundingClientRect(e,!0,n==="fixed"),g=r.top+e.clientTop,y=r.left+e.clientLeft,k=isHTMLElement(e)?getScale$1(e):createCoords(1),$=e.clientWidth*k.x,V=e.clientHeight*k.y,L=y*k.x,z=g*k.y;return{width:$,height:V,x:L,y:z}}function getClientRectFromClippingAncestor(e,n,r){let g;if(n==="viewport")g=getViewportRect(e,r);else if(n==="document")g=getDocumentRect(getDocumentElement(e));else if(isElement(n))g=getInnerBoundingClientRect(n,r);else{const y=getVisualOffsets(e);g={...n,x:n.x-y.x,y:n.y-y.y}}return rectToClientRect(g)}function hasFixedPositionAncestor(e,n){const r=getParentNode(e);return r===n||!isElement(r)||isLastTraversableNode(r)?!1:getComputedStyle$1(r).position==="fixed"||hasFixedPositionAncestor(r,n)}function getClippingElementAncestors(e,n){const r=n.get(e);if(r)return r;let g=getOverflowAncestors(e).filter(V=>isElement(V)&&getNodeName(V)!=="body"),y=null;const k=getComputedStyle$1(e).position==="fixed";let $=k?getParentNode(e):e;for(;isElement($)&&!isLastTraversableNode($);){const V=getComputedStyle$1($),L=isContainingBlock($);!L&&V.position==="fixed"&&(y=null),(k?!L&&!y:!L&&V.position==="static"&&!!y&&["absolute","fixed"].includes(y.position)||isOverflowElement($)&&!L&&hasFixedPositionAncestor(e,$))?g=g.filter(j=>j!==$):y=V,$=getParentNode($)}return n.set(e,g),g}function getClippingRect(e){let{element:n,boundary:r,rootBoundary:g,strategy:y}=e;const $=[...r==="clippingAncestors"?getClippingElementAncestors(n,this._c):[].concat(r),g],V=$[0],L=$.reduce((z,j)=>{const ae=getClientRectFromClippingAncestor(n,j,y);return z.top=max$1(ae.top,z.top),z.right=min$1(ae.right,z.right),z.bottom=min$1(ae.bottom,z.bottom),z.left=max$1(ae.left,z.left),z},getClientRectFromClippingAncestor(n,V,y));return{width:L.right-L.left,height:L.bottom-L.top,x:L.left,y:L.top}}function getDimensions(e){return getCssDimensions(e)}function getRectRelativeToOffsetParent(e,n,r){const g=isHTMLElement(n),y=getDocumentElement(n),k=r==="fixed",$=getBoundingClientRect(e,!0,k,n);let V={scrollLeft:0,scrollTop:0};const L=createCoords(0);if(g||!g&&!k)if((getNodeName(n)!=="body"||isOverflowElement(y))&&(V=getNodeScroll(n)),g){const z=getBoundingClientRect(n,!0,k,n);L.x=z.x+n.clientLeft,L.y=z.y+n.clientTop}else y&&(L.x=getWindowScrollBarX(y));return{x:$.left+V.scrollLeft-L.x,y:$.top+V.scrollTop-L.y,width:$.width,height:$.height}}function getTrueOffsetParent(e,n){return!isHTMLElement(e)||getComputedStyle$1(e).position==="fixed"?null:n?n(e):e.offsetParent}function getOffsetParent(e,n){const r=getWindow(e);if(!isHTMLElement(e))return r;let g=getTrueOffsetParent(e,n);for(;g&&isTableElement(g)&&getComputedStyle$1(g).position==="static";)g=getTrueOffsetParent(g,n);return g&&(getNodeName(g)==="html"||getNodeName(g)==="body"&&getComputedStyle$1(g).position==="static"&&!isContainingBlock(g))?r:g||getContainingBlock(e)||r}const getElementRects=async function(e){let{reference:n,floating:r,strategy:g}=e;const y=this.getOffsetParent||getOffsetParent,k=this.getDimensions;return{reference:getRectRelativeToOffsetParent(n,await y(r),g),floating:{x:0,y:0,...await k(r)}}};function isRTL$1(e){return getComputedStyle$1(e).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale:getScale$1,isElement,isRTL:isRTL$1},computePosition=(e,n,r)=>{const g=new Map,y={platform,...r},k={...y.platform,_c:g};return computePosition$1(e,n,{...y,platform:k})};buildProps({});const unrefReference=e=>{if(!isClient)return;if(!e)return e;const n=unrefElement(e);return n||(isRef(e)?n:e)},useFloating=({middleware:e,placement:n,strategy:r})=>{const g=ref(),y=ref(),k=ref(),$=ref(),V=ref({}),L={x:k,y:$,placement:n,strategy:r,middlewareData:V},z=async()=>{if(!isClient)return;const j=unrefReference(g),ae=unrefElement(y);if(!j||!ae)return;const re=await computePosition(j,ae,{placement:unref(n),strategy:unref(r),middleware:unref(e)});keysOf(L).forEach(oe=>{L[oe].value=re[oe]})};return onMounted(()=>{watchEffect(()=>{z()})}),{...L,update:z,referenceRef:g,contentRef:y}},arrowMiddleware=({arrowRef:e,padding:n})=>({name:"arrow",options:{element:e,padding:n},fn(r){const g=unref(e);return g?arrow({element:g,padding:n}).fn(r):{}}});function useCursor(e){const n=ref();function r(){if(e.value==null)return;const{selectionStart:y,selectionEnd:k,value:$}=e.value;if(y==null||k==null)return;const V=$.slice(0,Math.max(0,y)),L=$.slice(Math.max(0,k));n.value={selectionStart:y,selectionEnd:k,value:$,beforeTxt:V,afterTxt:L}}function g(){if(e.value==null||n.value==null)return;const{value:y}=e.value,{beforeTxt:k,afterTxt:$,selectionStart:V}=n.value;if(k==null||$==null||V==null)return;let L=y.length;if(y.endsWith($))L=y.length-$.length;else if(y.startsWith(k))L=k.length;else{const z=k[V-1],j=y.indexOf(z,V-1);j!==-1&&(L=j+1)}e.value.setSelectionRange(L,L)}return[r,g]}const getOrderedChildren=(e,n,r)=>flattedChildren(e.subTree).filter(k=>{var $;return isVNode$1(k)&&(($=k.type)==null?void 0:$.name)===n&&!!k.component}).map(k=>k.component.uid).map(k=>r[k]).filter(k=>!!k),useOrderedChildren=(e,n)=>{const r={},g=shallowRef([]);return{children:g,addChild:$=>{r[$.uid]=$,g.value=getOrderedChildren(e,n,r)},removeChild:$=>{delete r[$],g.value=g.value.filter(V=>V.uid!==$)}}},useSizeProp=buildProp({type:String,values:componentSizes,required:!1}),SIZE_INJECTION_KEY=Symbol("size"),useGlobalSize=()=>{const e=inject(SIZE_INJECTION_KEY,{});return computed(()=>unref(e.size)||"")};function useFocusController(e,{afterFocus:n,afterBlur:r}={}){const g=getCurrentInstance(),{emit:y}=g,k=shallowRef(),$=ref(!1),V=j=>{$.value||($.value=!0,y("focus",j),n?.())},L=j=>{var ae;j.relatedTarget&&((ae=k.value)!=null&&ae.contains(j.relatedTarget))||($.value=!1,y("blur",j),r?.())},z=()=>{var j;(j=e.value)==null||j.focus()};return watch(k,j=>{j&&j.setAttribute("tabindex","-1")}),useEventListener(k,"click",z),{wrapperRef:k,isFocused:$,handleFocus:V,handleBlur:L}}const configProviderContextKey=Symbol(),globalConfig=ref();function useGlobalConfig(e,n=void 0){const r=getCurrentInstance()?inject(configProviderContextKey,globalConfig):globalConfig;return e?computed(()=>{var g,y;return(y=(g=r.value)==null?void 0:g[e])!=null?y:n}):r}function useGlobalComponentSettings(e,n){const r=useGlobalConfig(),g=useNamespace(e,computed(()=>{var V;return((V=r.value)==null?void 0:V.namespace)||defaultNamespace})),y=useLocale(computed(()=>{var V;return(V=r.value)==null?void 0:V.locale})),k=useZIndex(computed(()=>{var V;return((V=r.value)==null?void 0:V.zIndex)||defaultInitialZIndex})),$=computed(()=>{var V;return unref(n)||((V=r.value)==null?void 0:V.size)||""});return provideGlobalConfig(computed(()=>unref(r)||{})),{ns:g,locale:y,zIndex:k,size:$}}const provideGlobalConfig=(e,n,r=!1)=>{var g;const y=!!getCurrentInstance(),k=y?useGlobalConfig():void 0,$=(g=n?.provide)!=null?g:y?provide:void 0;if(!$)return;const V=computed(()=>{const L=unref(e);return k?.value?mergeConfig(k.value,L):L});return $(configProviderContextKey,V),$(localeContextKey,computed(()=>V.value.locale)),$(namespaceContextKey,computed(()=>V.value.namespace)),$(zIndexContextKey,computed(()=>V.value.zIndex)),$(SIZE_INJECTION_KEY,{size:computed(()=>V.value.size||"")}),(r||!globalConfig.value)&&(globalConfig.value=V.value),V},mergeConfig=(e,n)=>{var r;const g=[...new Set([...keysOf(e),...keysOf(n)])],y={};for(const k of g)y[k]=(r=n[k])!=null?r:e[k];return y},configProviderProps=buildProps({a11y:{type:Boolean,default:!0},locale:{type:definePropType(Object)},size:useSizeProp,button:{type:definePropType(Object)},experimentalFeatures:{type:definePropType(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:definePropType(Object)},zIndex:Number,namespace:{type:String,default:"el"}}),messageConfig={},ConfigProvider=defineComponent({name:"ElConfigProvider",props:configProviderProps,setup(e,{slots:n}){watch(()=>e.message,g=>{Object.assign(messageConfig,g??{})},{immediate:!0,deep:!0});const r=provideGlobalConfig(e);return()=>renderSlot(n,"default",{config:r?.value})}}),ElConfigProvider=withInstall(ConfigProvider),version="2.3.12",makeInstaller=(e=[])=>({version,install:(r,g)=>{r[INSTALLED_KEY]||(r[INSTALLED_KEY]=!0,e.forEach(y=>r.use(y)),g&&provideGlobalConfig(g,r,!0))}}),affixProps=buildProps({zIndex:{type:definePropType([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),affixEmits={scroll:({scrollTop:e,fixed:n})=>isNumber$1(e)&&isBoolean$1(n),[CHANGE_EVENT]:e=>isBoolean$1(e)};var _export_sfc$1=(e,n)=>{const r=e.__vccOpts||e;for(const[g,y]of n)r[g]=y;return r};const COMPONENT_NAME$n="ElAffix",__default__$1C=defineComponent({name:COMPONENT_NAME$n}),_sfc_main$3v=defineComponent({...__default__$1C,props:affixProps,emits:affixEmits,setup(e,{expose:n,emit:r}){const g=e,y=useNamespace("affix"),k=shallowRef(),$=shallowRef(),V=shallowRef(),{height:L}=useWindowSize(),{height:z,width:j,top:ae,bottom:re,update:oe}=useElementBounding($,{windowScroll:!1}),ue=useElementBounding(k),le=ref(!1),de=ref(0),he=ref(0),_e=computed(()=>({height:le.value?`${z.value}px`:"",width:le.value?`${j.value}px`:""})),Ce=computed(()=>{if(!le.value)return{};const xe=g.offset?addUnit(g.offset):0;return{height:`${z.value}px`,width:`${j.value}px`,top:g.position==="top"?xe:"",bottom:g.position==="bottom"?xe:"",transform:he.value?`translateY(${he.value}px)`:"",zIndex:g.zIndex}}),Ne=()=>{if(V.value)if(de.value=V.value instanceof Window?document.documentElement.scrollTop:V.value.scrollTop||0,g.position==="top")if(g.target){const xe=ue.bottom.value-g.offset-z.value;le.value=g.offset>ae.value&&ue.bottom.value>0,he.value=xe<0?xe:0}else le.value=g.offset>ae.value;else if(g.target){const xe=L.value-ue.top.value-g.offset-z.value;le.value=L.value-g.offset<re.value&&L.value>ue.top.value,he.value=xe<0?-xe:0}else le.value=L.value-g.offset<re.value},$e=()=>{oe(),r("scroll",{scrollTop:de.value,fixed:le.value})};return watch(le,xe=>r("change",xe)),onMounted(()=>{var xe;g.target?(k.value=(xe=document.querySelector(g.target))!=null?xe:void 0,k.value||throwError(COMPONENT_NAME$n,`Target is not existed: ${g.target}`)):k.value=document.documentElement,V.value=getScrollContainer($.value,!0),oe()}),useEventListener(V,"scroll",$e),watchEffect(Ne),n({update:Ne,updateRoot:oe}),(xe,Ie)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:$,class:normalizeClass(unref(y).b()),style:normalizeStyle(unref(_e))},[createBaseVNode("div",{class:normalizeClass({[unref(y).m("fixed")]:le.value}),style:normalizeStyle(unref(Ce))},[renderSlot(xe.$slots,"default")],6)],6))}});var Affix=_export_sfc$1(_sfc_main$3v,[["__file","/home/runner/work/element-plus/element-plus/packages/components/affix/src/affix.vue"]]);const ElAffix=withInstall(Affix),iconProps=buildProps({size:{type:definePropType([Number,String])},color:{type:String}}),__default__$1B=defineComponent({name:"ElIcon",inheritAttrs:!1}),_sfc_main$3u=defineComponent({...__default__$1B,props:iconProps,setup(e){const n=e,r=useNamespace("icon"),g=computed(()=>{const{size:y,color:k}=n;return!y&&!k?{}:{fontSize:isUndefined(y)?void 0:addUnit(y),"--color":k}});return(y,k)=>(openBlock(),createElementBlock("i",mergeProps({class:unref(r).b(),style:unref(g)},y.$attrs),[renderSlot(y.$slots,"default")],16))}});var Icon=_export_sfc$1(_sfc_main$3u,[["__file","/home/runner/work/element-plus/element-plus/packages/components/icon/src/icon.vue"]]);const ElIcon=withInstall(Icon),alertEffects=["light","dark"],alertProps=buildProps({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:keysOf(TypeComponentsMap),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:alertEffects,default:"light"}}),alertEmits={close:e=>e instanceof MouseEvent},__default__$1A=defineComponent({name:"ElAlert"}),_sfc_main$3t=defineComponent({...__default__$1A,props:alertProps,emits:alertEmits,setup(e,{emit:n}){const r=e,{Close:g}=TypeComponents,y=useSlots(),k=useNamespace("alert"),$=ref(!0),V=computed(()=>TypeComponentsMap[r.type]),L=computed(()=>[k.e("icon"),{[k.is("big")]:!!r.description||!!y.default}]),z=computed(()=>({[k.is("bold")]:r.description||y.default})),j=ae=>{$.value=!1,n("close",ae)};return(ae,re)=>(openBlock(),createBlock(Transition,{name:unref(k).b("fade"),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{class:normalizeClass([unref(k).b(),unref(k).m(ae.type),unref(k).is("center",ae.center),unref(k).is(ae.effect)]),role:"alert"},[ae.showIcon&&unref(V)?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(L))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(V))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(k).e("content"))},[ae.title||ae.$slots.title?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass([unref(k).e("title"),unref(z)])},[renderSlot(ae.$slots,"title",{},()=>[createTextVNode(toDisplayString$1(ae.title),1)])],2)):createCommentVNode("v-if",!0),ae.$slots.default||ae.description?(openBlock(),createElementBlock("p",{key:1,class:normalizeClass(unref(k).e("description"))},[renderSlot(ae.$slots,"default",{},()=>[createTextVNode(toDisplayString$1(ae.description),1)])],2)):createCommentVNode("v-if",!0),ae.closable?(openBlock(),createElementBlock(Fragment,{key:2},[ae.closeText?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([unref(k).e("close-btn"),unref(k).is("customed")]),onClick:j},toDisplayString$1(ae.closeText),3)):(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass(unref(k).e("close-btn")),onClick:j},{default:withCtx(()=>[createVNode(unref(g))]),_:1},8,["class"]))],64)):createCommentVNode("v-if",!0)],2)],2),[[vShow,$.value]])]),_:3},8,["name"]))}});var Alert=_export_sfc$1(_sfc_main$3t,[["__file","/home/runner/work/element-plus/element-plus/packages/components/alert/src/alert.vue"]]);const ElAlert=withInstall(Alert),formContextKey=Symbol("formContextKey"),formItemContextKey=Symbol("formItemContextKey"),useFormSize=(e,n={})=>{const r=ref(void 0),g=n.prop?r:useProp("size"),y=n.global?r:useGlobalSize(),k=n.form?{size:void 0}:inject(formContextKey,void 0),$=n.formItem?{size:void 0}:inject(formItemContextKey,void 0);return computed(()=>g.value||unref(e)||$?.size||k?.size||y.value||"")},useFormDisabled=e=>{const n=useProp("disabled"),r=inject(formContextKey,void 0);return computed(()=>n.value||unref(e)||r?.disabled||!1)},useFormItem=()=>{const e=inject(formContextKey,void 0),n=inject(formItemContextKey,void 0);return{form:e,formItem:n}},useFormItemInputId=(e,{formItemContext:n,disableIdGeneration:r,disableIdManagement:g})=>{r||(r=ref(!1)),g||(g=ref(!1));const y=ref();let k;const $=computed(()=>{var V;return!!(!e.label&&n&&n.inputIds&&((V=n.inputIds)==null?void 0:V.length)<=1)});return onMounted(()=>{k=watch([toRef(e,"id"),r],([V,L])=>{const z=V??(L?void 0:useId().value);z!==y.value&&(n?.removeInputId&&(y.value&&n.removeInputId(y.value),!g?.value&&!L&&z&&n.addInputId(z)),y.value=z)},{immediate:!0})}),onUnmounted(()=>{k&&k(),n?.removeInputId&&y.value&&n.removeInputId(y.value)}),{isLabeledByFormItem:$,inputId:y}},formMetaProps=buildProps({size:{type:String,values:componentSizes},disabled:Boolean}),formProps=buildProps({...formMetaProps,model:Object,rules:{type:definePropType(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),formEmits={validate:(e,n,r)=>(isArray$3(e)||isString$3(e))&&isBoolean$1(n)&&isString$3(r)};function useFormLabelWidth(){const e=ref([]),n=computed(()=>{if(!e.value.length)return"0";const k=Math.max(...e.value);return k?`${k}px`:""});function r(k){const $=e.value.indexOf(k);return $===-1&&n.value,$}function g(k,$){if(k&&$){const V=r($);e.value.splice(V,1,k)}else k&&e.value.push(k)}function y(k){const $=r(k);$>-1&&e.value.splice($,1)}return{autoLabelWidth:n,registerLabelWidth:g,deregisterLabelWidth:y}}const filterFields=(e,n)=>{const r=castArray$1(n);return r.length>0?e.filter(g=>g.prop&&r.includes(g.prop)):e},COMPONENT_NAME$m="ElForm",__default__$1z=defineComponent({name:COMPONENT_NAME$m}),_sfc_main$3s=defineComponent({...__default__$1z,props:formProps,emits:formEmits,setup(e,{expose:n,emit:r}){const g=e,y=[],k=useFormSize(),$=useNamespace("form"),V=computed(()=>{const{labelPosition:_e,inline:Ce}=g;return[$.b(),$.m(k.value||"default"),{[$.m(`label-${_e}`)]:_e,[$.m("inline")]:Ce}]}),L=_e=>{y.push(_e)},z=_e=>{_e.prop&&y.splice(y.indexOf(_e),1)},j=(_e=[])=>{g.model&&filterFields(y,_e).forEach(Ce=>Ce.resetField())},ae=(_e=[])=>{filterFields(y,_e).forEach(Ce=>Ce.clearValidate())},re=computed(()=>!!g.model),oe=_e=>{if(y.length===0)return[];const Ce=filterFields(y,_e);return Ce.length?Ce:[]},ue=async _e=>de(void 0,_e),le=async(_e=[])=>{if(!re.value)return!1;const Ce=oe(_e);if(Ce.length===0)return!0;let Ne={};for(const $e of Ce)try{await $e.validate("")}catch(xe){Ne={...Ne,...xe}}return Object.keys(Ne).length===0?!0:Promise.reject(Ne)},de=async(_e=[],Ce)=>{const Ne=!isFunction$3(Ce);try{const $e=await le(_e);return $e===!0&&Ce?.($e),$e}catch($e){if($e instanceof Error)throw $e;const xe=$e;return g.scrollToError&&he(Object.keys(xe)[0]),Ce?.(!1,xe),Ne&&Promise.reject(xe)}},he=_e=>{var Ce;const Ne=filterFields(y,_e)[0];Ne&&((Ce=Ne.$el)==null||Ce.scrollIntoView(g.scrollIntoViewOptions))};return watch(()=>g.rules,()=>{g.validateOnRuleChange&&ue().catch(_e=>void 0)},{deep:!0}),provide(formContextKey,reactive({...toRefs(g),emit:r,resetFields:j,clearValidate:ae,validateField:de,addField:L,removeField:z,...useFormLabelWidth()})),n({validate:ue,validateField:de,resetFields:j,clearValidate:ae,scrollToField:he}),(_e,Ce)=>(openBlock(),createElementBlock("form",{class:normalizeClass(unref(V))},[renderSlot(_e.$slots,"default")],2))}});var Form=_export_sfc$1(_sfc_main$3s,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form.vue"]]),define_process_env_default$1={};function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var g in r)Object.prototype.hasOwnProperty.call(r,g)&&(e[g]=r[g])}return e},_extends.apply(this,arguments)}function _inheritsLoose(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,_setPrototypeOf(e,n)}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_getPrototypeOf(e)}function _setPrototypeOf(e,n){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,y){return g.__proto__=y,g},_setPrototypeOf(e,n)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _construct(e,n,r){return _isNativeReflectConstruct()?_construct=Reflect.construct.bind():_construct=function(y,k,$){var V=[null];V.push.apply(V,k);var L=Function.bind.apply(y,V),z=new L;return $&&_setPrototypeOf(z,$.prototype),z},_construct.apply(null,arguments)}function _isNativeFunction(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function _wrapNativeSuper(e){var n=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(g){if(g===null||!_isNativeFunction(g))return g;if(typeof g!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(g))return n.get(g);n.set(g,y)}function y(){return _construct(g,arguments,_getPrototypeOf(this).constructor)}return y.prototype=Object.create(g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(y,g)},_wrapNativeSuper(e)}var formatRegExp=/%[sdj%]/g,warning=function(){};typeof process<"u";function convertFieldsError(e){if(!e||!e.length)return null;var n={};return e.forEach(function(r){var g=r.field;n[g]=n[g]||[],n[g].push(r)}),n}function format$2(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),g=1;g<n;g++)r[g-1]=arguments[g];var y=0,k=r.length;if(typeof e=="function")return e.apply(null,r);if(typeof e=="string"){var $=e.replace(formatRegExp,function(V){if(V==="%%")return"%";if(y>=k)return V;switch(V){case"%s":return String(r[y++]);case"%d":return Number(r[y++]);case"%j":try{return JSON.stringify(r[y++])}catch{return"[Circular]"}break;default:return V}});return $}return e}function isNativeStringType(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function isEmptyValue(e,n){return!!(e==null||n==="array"&&Array.isArray(e)&&!e.length||isNativeStringType(n)&&typeof e=="string"&&!e)}function asyncParallelArray(e,n,r){var g=[],y=0,k=e.length;function $(V){g.push.apply(g,V||[]),y++,y===k&&r(g)}e.forEach(function(V){n(V,$)})}function asyncSerialArray(e,n,r){var g=0,y=e.length;function k($){if($&&$.length){r($);return}var V=g;g=g+1,V<y?n(e[V],k):r([])}k([])}function flattenObjArr(e){var n=[];return Object.keys(e).forEach(function(r){n.push.apply(n,e[r]||[])}),n}var AsyncValidationError=function(e){_inheritsLoose(n,e);function n(r,g){var y;return y=e.call(this,"Async Validation Error")||this,y.errors=r,y.fields=g,y}return n}(_wrapNativeSuper(Error));function asyncMap(e,n,r,g,y){if(n.first){var k=new Promise(function(re,oe){var ue=function(he){return g(he),he.length?oe(new AsyncValidationError(he,convertFieldsError(he))):re(y)},le=flattenObjArr(e);asyncSerialArray(le,r,ue)});return k.catch(function(re){return re}),k}var $=n.firstFields===!0?Object.keys(e):n.firstFields||[],V=Object.keys(e),L=V.length,z=0,j=[],ae=new Promise(function(re,oe){var ue=function(de){if(j.push.apply(j,de),z++,z===L)return g(j),j.length?oe(new AsyncValidationError(j,convertFieldsError(j))):re(y)};V.length||(g(j),re(y)),V.forEach(function(le){var de=e[le];$.indexOf(le)!==-1?asyncSerialArray(de,r,ue):asyncParallelArray(de,r,ue)})});return ae.catch(function(re){return re}),ae}function isErrorObj(e){return!!(e&&e.message!==void 0)}function getValue(e,n){for(var r=e,g=0;g<n.length;g++){if(r==null)return r;r=r[n[g]]}return r}function complementError(e,n){return function(r){var g;return e.fullFields?g=getValue(n,e.fullFields):g=n[r.field||e.fullField],isErrorObj(r)?(r.field=r.field||e.fullField,r.fieldValue=g,r):{message:typeof r=="function"?r():r,fieldValue:g,field:r.field||e.fullField}}}function deepMerge(e,n){if(n){for(var r in n)if(n.hasOwnProperty(r)){var g=n[r];typeof g=="object"&&typeof e[r]=="object"?e[r]=_extends({},e[r],g):e[r]=g}}return e}var required$1=function(n,r,g,y,k,$){n.required&&(!g.hasOwnProperty(n.field)||isEmptyValue(r,$||n.type))&&y.push(format$2(k.messages.required,n.fullField))},whitespace=function(n,r,g,y,k){(/^\s+$/.test(r)||r==="")&&y.push(format$2(k.messages.whitespace,n.fullField))},urlReg,getUrlRegex=function(){if(urlReg)return urlReg;var e="[a-fA-F\\d:]",n=function(Ne){return Ne&&Ne.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",g="[a-fA-F\\d]{1,4}",y=(`
(?:
(?:`+g+":){7}(?:"+g+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+g+":){6}(?:"+r+"|:"+g+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+g+":){5}(?::"+r+"|(?::"+g+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+g+":){4}(?:(?::"+g+"){0,1}:"+r+"|(?::"+g+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+g+":){3}(?:(?::"+g+"){0,2}:"+r+"|(?::"+g+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+g+":){2}(?:(?::"+g+"){0,3}:"+r+"|(?::"+g+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+g+":){1}(?:(?::"+g+"){0,4}:"+r+"|(?::"+g+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+g+"){0,5}:"+r+"|(?::"+g+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),k=new RegExp("(?:^"+r+"$)|(?:^"+y+"$)"),$=new RegExp("^"+r+"$"),V=new RegExp("^"+y+"$"),L=function(Ne){return Ne&&Ne.exact?k:new RegExp("(?:"+n(Ne)+r+n(Ne)+")|(?:"+n(Ne)+y+n(Ne)+")","g")};L.v4=function(Ce){return Ce&&Ce.exact?$:new RegExp(""+n(Ce)+r+n(Ce),"g")},L.v6=function(Ce){return Ce&&Ce.exact?V:new RegExp(""+n(Ce)+y+n(Ce),"g")};var z="(?:(?:[a-z]+:)?//)",j="(?:\\S+(?::\\S*)?@)?",ae=L.v4().source,re=L.v6().source,oe="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",ue="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",le="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",de="(?::\\d{2,5})?",he='(?:[/?#][^\\s"]*)?',_e="(?:"+z+"|www\\.)"+j+"(?:localhost|"+ae+"|"+re+"|"+oe+ue+le+")"+de+he;return urlReg=new RegExp("(?:^"+_e+"$)","i"),urlReg},pattern$2={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},types$b={integer:function(n){return types$b.number(n)&&parseInt(n,10)===n},float:function(n){return types$b.number(n)&&!types$b.integer(n)},array:function(n){return Array.isArray(n)},regexp:function(n){if(n instanceof RegExp)return!0;try{return!!new RegExp(n)}catch{return!1}},date:function(n){return typeof n.getTime=="function"&&typeof n.getMonth=="function"&&typeof n.getYear=="function"&&!isNaN(n.getTime())},number:function(n){return isNaN(n)?!1:typeof n=="number"},object:function(n){return typeof n=="object"&&!types$b.array(n)},method:function(n){return typeof n=="function"},email:function(n){return typeof n=="string"&&n.length<=320&&!!n.match(pattern$2.email)},url:function(n){return typeof n=="string"&&n.length<=2048&&!!n.match(getUrlRegex())},hex:function(n){return typeof n=="string"&&!!n.match(pattern$2.hex)}},type$1=function(n,r,g,y,k){if(n.required&&r===void 0){required$1(n,r,g,y,k);return}var $=["integer","float","array","regexp","object","method","email","number","date","url","hex"],V=n.type;$.indexOf(V)>-1?types$b[V](r)||y.push(format$2(k.messages.types[V],n.fullField,n.type)):V&&typeof r!==n.type&&y.push(format$2(k.messages.types[V],n.fullField,n.type))},range$1=function(n,r,g,y,k){var $=typeof n.len=="number",V=typeof n.min=="number",L=typeof n.max=="number",z=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,j=r,ae=null,re=typeof r=="number",oe=typeof r=="string",ue=Array.isArray(r);if(re?ae="number":oe?ae="string":ue&&(ae="array"),!ae)return!1;ue&&(j=r.length),oe&&(j=r.replace(z,"_").length),$?j!==n.len&&y.push(format$2(k.messages[ae].len,n.fullField,n.len)):V&&!L&&j<n.min?y.push(format$2(k.messages[ae].min,n.fullField,n.min)):L&&!V&&j>n.max?y.push(format$2(k.messages[ae].max,n.fullField,n.max)):V&&L&&(j<n.min||j>n.max)&&y.push(format$2(k.messages[ae].range,n.fullField,n.min,n.max))},ENUM$1="enum",enumerable$1=function(n,r,g,y,k){n[ENUM$1]=Array.isArray(n[ENUM$1])?n[ENUM$1]:[],n[ENUM$1].indexOf(r)===-1&&y.push(format$2(k.messages[ENUM$1],n.fullField,n[ENUM$1].join(", ")))},pattern$1=function(n,r,g,y,k){if(n.pattern){if(n.pattern instanceof RegExp)n.pattern.lastIndex=0,n.pattern.test(r)||y.push(format$2(k.messages.pattern.mismatch,n.fullField,r,n.pattern));else if(typeof n.pattern=="string"){var $=new RegExp(n.pattern);$.test(r)||y.push(format$2(k.messages.pattern.mismatch,n.fullField,r,n.pattern))}}},rules={required:required$1,whitespace,type:type$1,range:range$1,enum:enumerable$1,pattern:pattern$1},string$1=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r,"string")&&!n.required)return g();rules.required(n,r,y,$,k,"string"),isEmptyValue(r,"string")||(rules.type(n,r,y,$,k),rules.range(n,r,y,$,k),rules.pattern(n,r,y,$,k),n.whitespace===!0&&rules.whitespace(n,r,y,$,k))}g($)},method2=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r)&&!n.required)return g();rules.required(n,r,y,$,k),r!==void 0&&rules.type(n,r,y,$,k)}g($)},number2=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(r===""&&(r=void 0),isEmptyValue(r)&&!n.required)return g();rules.required(n,r,y,$,k),r!==void 0&&(rules.type(n,r,y,$,k),rules.range(n,r,y,$,k))}g($)},_boolean=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r)&&!n.required)return g();rules.required(n,r,y,$,k),r!==void 0&&rules.type(n,r,y,$,k)}g($)},regexp2=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r)&&!n.required)return g();rules.required(n,r,y,$,k),isEmptyValue(r)||rules.type(n,r,y,$,k)}g($)},integer2=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r)&&!n.required)return g();rules.required(n,r,y,$,k),r!==void 0&&(rules.type(n,r,y,$,k),rules.range(n,r,y,$,k))}g($)},floatFn=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r)&&!n.required)return g();rules.required(n,r,y,$,k),r!==void 0&&(rules.type(n,r,y,$,k),rules.range(n,r,y,$,k))}g($)},array2=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(r==null&&!n.required)return g();rules.required(n,r,y,$,k,"array"),r!=null&&(rules.type(n,r,y,$,k),rules.range(n,r,y,$,k))}g($)},object2=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r)&&!n.required)return g();rules.required(n,r,y,$,k),r!==void 0&&rules.type(n,r,y,$,k)}g($)},ENUM="enum",enumerable2=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r)&&!n.required)return g();rules.required(n,r,y,$,k),r!==void 0&&rules[ENUM](n,r,y,$,k)}g($)},pattern2=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r,"string")&&!n.required)return g();rules.required(n,r,y,$,k),isEmptyValue(r,"string")||rules.pattern(n,r,y,$,k)}g($)},date2=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r,"date")&&!n.required)return g();if(rules.required(n,r,y,$,k),!isEmptyValue(r,"date")){var L;r instanceof Date?L=r:L=new Date(r),rules.type(n,L,y,$,k),L&&rules.range(n,L.getTime(),y,$,k)}}g($)},required2=function(n,r,g,y,k){var $=[],V=Array.isArray(r)?"array":typeof r;rules.required(n,r,y,$,k,V),g($)},type2=function(n,r,g,y,k){var $=n.type,V=[],L=n.required||!n.required&&y.hasOwnProperty(n.field);if(L){if(isEmptyValue(r,$)&&!n.required)return g();rules.required(n,r,y,V,k,$),isEmptyValue(r,$)||rules.type(n,r,y,V,k)}g(V)},any=function(n,r,g,y,k){var $=[],V=n.required||!n.required&&y.hasOwnProperty(n.field);if(V){if(isEmptyValue(r)&&!n.required)return g();rules.required(n,r,y,$,k)}g($)},validators$1={string:string$1,method:method2,number:number2,boolean:_boolean,regexp:regexp2,integer:integer2,float:floatFn,array:array2,object:object2,enum:enumerable2,pattern:pattern2,date:date2,url:type2,hex:type2,email:type2,required:required2,any};function newMessages(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var n=JSON.parse(JSON.stringify(this));return n.clone=this.clone,n}}}var messages$1=newMessages(),Schema=function(){function e(r){this.rules=null,this._messages=messages$1,this.define(r)}var n=e.prototype;return n.define=function(g){var y=this;if(!g)throw new Error("Cannot configure a schema with no rules");if(typeof g!="object"||Array.isArray(g))throw new Error("Rules must be an object");this.rules={},Object.keys(g).forEach(function(k){var $=g[k];y.rules[k]=Array.isArray($)?$:[$]})},n.messages=function(g){return g&&(this._messages=deepMerge(newMessages(),g)),this._messages},n.validate=function(g,y,k){var $=this;y===void 0&&(y={}),k===void 0&&(k=function(){});var V=g,L=y,z=k;if(typeof L=="function"&&(z=L,L={}),!this.rules||Object.keys(this.rules).length===0)return z&&z(null,V),Promise.resolve(V);function j(le){var de=[],he={};function _e(Ne){if(Array.isArray(Ne)){var $e;de=($e=de).concat.apply($e,Ne)}else de.push(Ne)}for(var Ce=0;Ce<le.length;Ce++)_e(le[Ce]);de.length?(he=convertFieldsError(de),z(de,he)):z(null,V)}if(L.messages){var ae=this.messages();ae===messages$1&&(ae=newMessages()),deepMerge(ae,L.messages),L.messages=ae}else L.messages=this.messages();var re={},oe=L.keys||Object.keys(this.rules);oe.forEach(function(le){var de=$.rules[le],he=V[le];de.forEach(function(_e){var Ce=_e;typeof Ce.transform=="function"&&(V===g&&(V=_extends({},V)),he=V[le]=Ce.transform(he)),typeof Ce=="function"?Ce={validator:Ce}:Ce=_extends({},Ce),Ce.validator=$.getValidationMethod(Ce),Ce.validator&&(Ce.field=le,Ce.fullField=Ce.fullField||le,Ce.type=$.getType(Ce),re[le]=re[le]||[],re[le].push({rule:Ce,value:he,source:V,field:le}))})});var ue={};return asyncMap(re,L,function(le,de){var he=le.rule,_e=(he.type==="object"||he.type==="array")&&(typeof he.fields=="object"||typeof he.defaultField=="object");_e=_e&&(he.required||!he.required&&le.value),he.field=le.field;function Ce(xe,Ie){return _extends({},Ie,{fullField:he.fullField+"."+xe,fullFields:he.fullFields?[].concat(he.fullFields,[xe]):[xe]})}function Ne(xe){xe===void 0&&(xe=[]);var Ie=Array.isArray(xe)?xe:[xe];!L.suppressWarning&&Ie.length&&e.warning("async-validator:",Ie),Ie.length&&he.message!==void 0&&(Ie=[].concat(he.message));var ze=Ie.map(complementError(he,V));if(L.first&&ze.length)return ue[he.field]=1,de(ze);if(!_e)de(ze);else{if(he.required&&!le.value)return he.message!==void 0?ze=[].concat(he.message).map(complementError(he,V)):L.error&&(ze=[L.error(he,format$2(L.messages.required,he.field))]),de(ze);var qe={};he.defaultField&&Object.keys(le.value).map(function(Dt){qe[Dt]=he.defaultField}),qe=_extends({},qe,le.rule.fields);var Et={};Object.keys(qe).forEach(function(Dt){var Sn=qe[Dt],hn=Array.isArray(Sn)?Sn:[Sn];Et[Dt]=hn.map(Ce.bind(null,Dt))});var _n=new e(Et);_n.messages(L.messages),le.rule.options&&(le.rule.options.messages=L.messages,le.rule.options.error=L.error),_n.validate(le.value,le.rule.options||L,function(Dt){var Sn=[];ze&&ze.length&&Sn.push.apply(Sn,ze),Dt&&Dt.length&&Sn.push.apply(Sn,Dt),de(Sn.length?Sn:null)})}}var $e;if(he.asyncValidator)$e=he.asyncValidator(he,le.value,Ne,le.source,L);else if(he.validator){try{$e=he.validator(he,le.value,Ne,le.source,L)}catch(xe){console.error?.(xe),L.suppressValidatorError||setTimeout(function(){throw xe},0),Ne(xe.message)}$e===!0?Ne():$e===!1?Ne(typeof he.message=="function"?he.message(he.fullField||he.field):he.message||(he.fullField||he.field)+" fails"):$e instanceof Array?Ne($e):$e instanceof Error&&Ne($e.message)}$e&&$e.then&&$e.then(function(){return Ne()},function(xe){return Ne(xe)})},function(le){j(le)},V)},n.getType=function(g){if(g.type===void 0&&g.pattern instanceof RegExp&&(g.type="pattern"),typeof g.validator!="function"&&g.type&&!validators$1.hasOwnProperty(g.type))throw new Error(format$2("Unknown rule type %s",g.type));return g.type||"string"},n.getValidationMethod=function(g){if(typeof g.validator=="function")return g.validator;var y=Object.keys(g),k=y.indexOf("message");return k!==-1&&y.splice(k,1),y.length===1&&y[0]==="required"?validators$1.required:validators$1[this.getType(g)]||void 0},e}();Schema.register=function(n,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");validators$1[n]=r};Schema.warning=warning;Schema.messages=messages$1;Schema.validators=validators$1;const formItemValidateStates=["","error","validating","success"],formItemProps=buildProps({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:definePropType([String,Array])},required:{type:Boolean,default:void 0},rules:{type:definePropType([Object,Array])},error:String,validateStatus:{type:String,values:formItemValidateStates},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:componentSizes}}),COMPONENT_NAME$l="ElLabelWrap";var FormLabelWrap=defineComponent({name:COMPONENT_NAME$l,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(e,{slots:n}){const r=inject(formContextKey,void 0),g=inject(formItemContextKey);g||throwError(COMPONENT_NAME$l,"usage: <el-form-item><label-wrap /></el-form-item>");const y=useNamespace("form"),k=ref(),$=ref(0),V=()=>{var j;if((j=k.value)!=null&&j.firstElementChild){const ae=window.getComputedStyle(k.value.firstElementChild).width;return Math.ceil(Number.parseFloat(ae))}else return 0},L=(j="update")=>{nextTick(()=>{n.default&&e.isAutoWidth&&(j==="update"?$.value=V():j==="remove"&&r?.deregisterLabelWidth($.value))})},z=()=>L("update");return onMounted(()=>{z()}),onBeforeUnmount(()=>{L("remove")}),onUpdated(()=>z()),watch($,(j,ae)=>{e.updateAll&&r?.registerLabelWidth(j,ae)}),useResizeObserver(computed(()=>{var j,ae;return(ae=(j=k.value)==null?void 0:j.firstElementChild)!=null?ae:null}),z),()=>{var j,ae;if(!n)return null;const{isAutoWidth:re}=e;if(re){const oe=r?.autoLabelWidth,ue=g?.hasLabel,le={};if(ue&&oe&&oe!=="auto"){const de=Math.max(0,Number.parseInt(oe,10)-$.value),he=r.labelPosition==="left"?"marginRight":"marginLeft";de&&(le[he]=`${de}px`)}return createVNode("div",{ref:k,class:[y.be("item","label-wrap")],style:le},[(j=n.default)==null?void 0:j.call(n)])}else return createVNode(Fragment,{ref:k},[(ae=n.default)==null?void 0:ae.call(n)])}}});const _hoisted_1$2e=["role","aria-labelledby"],__default__$1y=defineComponent({name:"ElFormItem"}),_sfc_main$3r=defineComponent({...__default__$1y,props:formItemProps,setup(e,{expose:n}){const r=e,g=useSlots(),y=inject(formContextKey,void 0),k=inject(formItemContextKey,void 0),$=useFormSize(void 0,{formItem:!1}),V=useNamespace("form-item"),L=useId().value,z=ref([]),j=ref(""),ae=refDebounced(j,100),re=ref(""),oe=ref();let ue,le=!1;const de=computed(()=>{if(y?.labelPosition==="top")return{};const Bn=addUnit(r.labelWidth||y?.labelWidth||"");return Bn?{width:Bn}:{}}),he=computed(()=>{if(y?.labelPosition==="top"||y?.inline)return{};if(!r.label&&!r.labelWidth&&qe)return{};const Bn=addUnit(r.labelWidth||y?.labelWidth||"");return!r.label&&!g.label?{marginLeft:Bn}:{}}),_e=computed(()=>[V.b(),V.m($.value),V.is("error",j.value==="error"),V.is("validating",j.value==="validating"),V.is("success",j.value==="success"),V.is("required",hn.value||r.required),V.is("no-asterisk",y?.hideRequiredAsterisk),y?.requireAsteriskPosition==="right"?"asterisk-right":"asterisk-left",{[V.m("feedback")]:y?.statusIcon}]),Ce=computed(()=>isBoolean$1(r.inlineMessage)?r.inlineMessage:y?.inlineMessage||!1),Ne=computed(()=>[V.e("error"),{[V.em("error","inline")]:Ce.value}]),$e=computed(()=>r.prop?isString$3(r.prop)?r.prop:r.prop.join("."):""),xe=computed(()=>!!(r.label||g.label)),Ie=computed(()=>r.for||z.value.length===1?z.value[0]:void 0),ze=computed(()=>!Ie.value&&xe.value),qe=!!k,Et=computed(()=>{const Bn=y?.model;if(!(!Bn||!r.prop))return getProp(Bn,r.prop).value}),_n=computed(()=>{const{required:Bn}=r,Wn=[];r.rules&&Wn.push(...castArray$1(r.rules));const da=y?.rules;if(da&&r.prop){const ga=getProp(da,r.prop).value;ga&&Wn.push(...castArray$1(ga))}if(Bn!==void 0){const ga=Wn.map((Ca,ra)=>[Ca,ra]).filter(([Ca])=>Object.keys(Ca).includes("required"));if(ga.length>0)for(const[Ca,ra]of ga)Ca.required!==Bn&&(Wn[ra]={...Ca,required:Bn});else Wn.push({required:Bn})}return Wn}),Dt=computed(()=>_n.value.length>0),Sn=Bn=>_n.value.filter(da=>!da.trigger||!Bn?!0:Array.isArray(da.trigger)?da.trigger.includes(Bn):da.trigger===Bn).map(({trigger:da,...ga})=>ga),hn=computed(()=>_n.value.some(Bn=>Bn.required)),Vn=computed(()=>{var Bn;return ae.value==="error"&&r.showMessage&&((Bn=y?.showMessage)!=null?Bn:!0)}),Mn=computed(()=>`${r.label||""}${y?.labelSuffix||""}`),$n=Bn=>{j.value=Bn},Nn=Bn=>{var Wn,da;const{errors:ga,fields:Ca}=Bn;(!ga||!Ca)&&console.error(Bn),$n("error"),re.value=ga?(da=(Wn=ga?.[0])==null?void 0:Wn.message)!=null?da:`${r.prop} is required`:"",y?.emit("validate",r.prop,!1,re.value)},kn=()=>{$n("success"),y?.emit("validate",r.prop,!0,"")},jn=async Bn=>{const Wn=$e.value;return new Schema({[Wn]:Bn}).validate({[Wn]:Et.value},{firstFields:!0}).then(()=>(kn(),!0)).catch(ga=>(Nn(ga),Promise.reject(ga)))},Fn=async(Bn,Wn)=>{if(le||!r.prop)return!1;const da=isFunction$3(Wn);if(!Dt.value)return Wn?.(!1),!1;const ga=Sn(Bn);return ga.length===0?(Wn?.(!0),!0):($n("validating"),jn(ga).then(()=>(Wn?.(!0),!0)).catch(Ca=>{const{fields:ra}=Ca;return Wn?.(!1,ra),da?!1:Promise.reject(ra)}))},Tn=()=>{$n(""),re.value="",le=!1},Hn=async()=>{const Bn=y?.model;if(!Bn||!r.prop)return;const Wn=getProp(Bn,r.prop);le=!0,Wn.value=clone$1(ue),await nextTick(),Tn(),le=!1},la=Bn=>{z.value.includes(Bn)||z.value.push(Bn)},ca=Bn=>{z.value=z.value.filter(Wn=>Wn!==Bn)};watch(()=>r.error,Bn=>{re.value=Bn||"",$n(Bn?"error":"")},{immediate:!0}),watch(()=>r.validateStatus,Bn=>$n(Bn||""));const Zn=reactive({...toRefs(r),$el:oe,size:$,validateState:j,labelId:L,inputIds:z,isGroup:ze,hasLabel:xe,addInputId:la,removeInputId:ca,resetField:Hn,clearValidate:Tn,validate:Fn});return provide(formItemContextKey,Zn),onMounted(()=>{r.prop&&(y?.addField(Zn),ue=clone$1(Et.value))}),onBeforeUnmount(()=>{y?.removeField(Zn)}),n({size:$,validateMessage:re,validateState:j,validate:Fn,clearValidate:Tn,resetField:Hn}),(Bn,Wn)=>{var da;return openBlock(),createElementBlock("div",{ref_key:"formItemRef",ref:oe,class:normalizeClass(unref(_e)),role:unref(ze)?"group":void 0,"aria-labelledby":unref(ze)?unref(L):void 0},[createVNode(unref(FormLabelWrap),{"is-auto-width":unref(de).width==="auto","update-all":((da=unref(y))==null?void 0:da.labelWidth)==="auto"},{default:withCtx(()=>[unref(xe)?(openBlock(),createBlock(resolveDynamicComponent(unref(Ie)?"label":"div"),{key:0,id:unref(L),for:unref(Ie),class:normalizeClass(unref(V).e("label")),style:normalizeStyle(unref(de))},{default:withCtx(()=>[renderSlot(Bn.$slots,"label",{label:unref(Mn)},()=>[createTextVNode(toDisplayString$1(unref(Mn)),1)])]),_:3},8,["id","for","class","style"])):createCommentVNode("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),createBaseVNode("div",{class:normalizeClass(unref(V).e("content")),style:normalizeStyle(unref(he))},[renderSlot(Bn.$slots,"default"),createVNode(TransitionGroup,{name:`${unref(V).namespace.value}-zoom-in-top`},{default:withCtx(()=>[unref(Vn)?renderSlot(Bn.$slots,"error",{key:0,error:re.value},()=>[createBaseVNode("div",{class:normalizeClass(unref(Ne))},toDisplayString$1(re.value),3)]):createCommentVNode("v-if",!0)]),_:3},8,["name"])],6)],10,_hoisted_1$2e)}}});var FormItem=_export_sfc$1(_sfc_main$3r,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form-item.vue"]]);const ElForm=withInstall(Form,{FormItem}),ElFormItem=withNoopInstall(FormItem);let hiddenTextarea;const HIDDEN_STYLE=`
  height:0 !important;
  visibility:hidden !important;
  ${isFirefox()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,CONTEXT_STYLE=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function calculateNodeStyling(e){const n=window.getComputedStyle(e),r=n.getPropertyValue("box-sizing"),g=Number.parseFloat(n.getPropertyValue("padding-bottom"))+Number.parseFloat(n.getPropertyValue("padding-top")),y=Number.parseFloat(n.getPropertyValue("border-bottom-width"))+Number.parseFloat(n.getPropertyValue("border-top-width"));return{contextStyle:CONTEXT_STYLE.map($=>`${$}:${n.getPropertyValue($)}`).join(";"),paddingSize:g,borderSize:y,boxSizing:r}}function calcTextareaHeight(e,n=1,r){var g;hiddenTextarea||(hiddenTextarea=document.createElement("textarea"),document.body.appendChild(hiddenTextarea));const{paddingSize:y,borderSize:k,boxSizing:$,contextStyle:V}=calculateNodeStyling(e);hiddenTextarea.setAttribute("style",`${V};${HIDDEN_STYLE}`),hiddenTextarea.value=e.value||e.placeholder||"";let L=hiddenTextarea.scrollHeight;const z={};$==="border-box"?L=L+k:$==="content-box"&&(L=L-y),hiddenTextarea.value="";const j=hiddenTextarea.scrollHeight-y;if(isNumber$1(n)){let ae=j*n;$==="border-box"&&(ae=ae+y+k),L=Math.max(ae,L),z.minHeight=`${ae}px`}if(isNumber$1(r)){let ae=j*r;$==="border-box"&&(ae=ae+y+k),L=Math.min(ae,L)}return z.height=`${L}px`,(g=hiddenTextarea.parentNode)==null||g.removeChild(hiddenTextarea),hiddenTextarea=void 0,z}const inputProps=buildProps({id:{type:String,default:void 0},size:useSizeProp,disabled:Boolean,modelValue:{type:definePropType([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:definePropType([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:iconPropType},prefixIcon:{type:iconPropType},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:definePropType([Object,Array,String]),default:()=>mutable({})}}),inputEmits={[UPDATE_MODEL_EVENT]:e=>isString$3(e),input:e=>isString$3(e),change:e=>isString$3(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},_hoisted_1$2d=["role"],_hoisted_2$1O=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],_hoisted_3$13=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],__default__$1x=defineComponent({name:"ElInput",inheritAttrs:!1}),_sfc_main$3q=defineComponent({...__default__$1x,props:inputProps,emits:inputEmits,setup(e,{expose:n,emit:r}){const g=e,y=useAttrs$1(),k=useSlots(),$=computed(()=>{const ua={};return g.containerRole==="combobox"&&(ua["aria-haspopup"]=y["aria-haspopup"],ua["aria-owns"]=y["aria-owns"],ua["aria-expanded"]=y["aria-expanded"]),ua}),V=computed(()=>[g.type==="textarea"?de.b():le.b(),le.m(oe.value),le.is("disabled",ue.value),le.is("exceed",la.value),{[le.b("group")]:k.prepend||k.append,[le.bm("group","append")]:k.append,[le.bm("group","prepend")]:k.prepend,[le.m("prefix")]:k.prefix||g.prefixIcon,[le.m("suffix")]:k.suffix||g.suffixIcon||g.clearable||g.showPassword,[le.bm("suffix","password-clear")]:jn.value&&Fn.value},y.class]),L=computed(()=>[le.e("wrapper"),le.is("focus",Et.value)]),z=useAttrs({excludeKeys:computed(()=>Object.keys($.value))}),{form:j,formItem:ae}=useFormItem(),{inputId:re}=useFormItemInputId(g,{formItemContext:ae}),oe=useFormSize(),ue=useFormDisabled(),le=useNamespace("input"),de=useNamespace("textarea"),he=shallowRef(),_e=shallowRef(),Ce=ref(!1),Ne=ref(!1),$e=ref(!1),xe=ref(),Ie=shallowRef(g.inputStyle),ze=computed(()=>he.value||_e.value),{wrapperRef:qe,isFocused:Et,handleFocus:_n,handleBlur:Dt}=useFocusController(ze,{afterBlur(){var ua;g.validateEvent&&((ua=ae?.validate)==null||ua.call(ae,"blur").catch(pe=>void 0))}}),Sn=computed(()=>{var ua;return(ua=j?.statusIcon)!=null?ua:!1}),hn=computed(()=>ae?.validateState||""),Vn=computed(()=>hn.value&&ValidateComponentsMap[hn.value]),Mn=computed(()=>$e.value?view_default:hide_default),$n=computed(()=>[y.style,g.inputStyle]),Nn=computed(()=>[g.inputStyle,Ie.value,{resize:g.resize}]),kn=computed(()=>isNil(g.modelValue)?"":String(g.modelValue)),jn=computed(()=>g.clearable&&!ue.value&&!g.readonly&&!!kn.value&&(Et.value||Ce.value)),Fn=computed(()=>g.showPassword&&!ue.value&&!g.readonly&&!!kn.value&&(!!kn.value||Et.value)),Tn=computed(()=>g.showWordLimit&&!!z.value.maxlength&&(g.type==="text"||g.type==="textarea")&&!ue.value&&!g.readonly&&!g.showPassword),Hn=computed(()=>kn.value.length),la=computed(()=>!!Tn.value&&Hn.value>Number(z.value.maxlength)),ca=computed(()=>!!k.suffix||!!g.suffixIcon||jn.value||g.showPassword||Tn.value||!!hn.value&&Sn.value),[Zn,Bn]=useCursor(he);useResizeObserver(_e,ua=>{if(ga(),!Tn.value||g.resize!=="both")return;const pe=ua[0],{width:Oe}=pe.contentRect;xe.value={right:`calc(100% - ${Oe+15+6}px)`}});const Wn=()=>{const{type:ua,autosize:pe}=g;if(!(!isClient||ua!=="textarea"||!_e.value))if(pe){const Oe=isObject$3(pe)?pe.minRows:void 0,Ve=isObject$3(pe)?pe.maxRows:void 0,Ue=calcTextareaHeight(_e.value,Oe,Ve);Ie.value={overflowY:"hidden",...Ue},nextTick(()=>{_e.value.offsetHeight,Ie.value=Ue})}else Ie.value={minHeight:calcTextareaHeight(_e.value).minHeight}},ga=(ua=>{let pe=!1;return()=>{var Oe;if(pe||!g.autosize)return;((Oe=_e.value)==null?void 0:Oe.offsetParent)===null||(ua(),pe=!0)}})(Wn),Ca=()=>{const ua=ze.value,pe=g.formatter?g.formatter(kn.value):kn.value;!ua||ua.value===pe||(ua.value=pe)},ra=async ua=>{Zn();let{value:pe}=ua.target;if(g.formatter&&(pe=g.parser?g.parser(pe):pe),!Ne.value){if(pe===kn.value){Ca();return}r(UPDATE_MODEL_EVENT,pe),r("input",pe),await nextTick(),Ca(),Bn()}},Gn=ua=>{r("change",ua.target.value)},vn=ua=>{r("compositionstart",ua),Ne.value=!0},Kn=ua=>{var pe;r("compositionupdate",ua);const Oe=(pe=ua.target)==null?void 0:pe.value,Ve=Oe[Oe.length-1]||"";Ne.value=!isKorean(Ve)},En=ua=>{r("compositionend",ua),Ne.value&&(Ne.value=!1,ra(ua))},kt=()=>{$e.value=!$e.value,At()},At=async()=>{var ua;await nextTick(),(ua=ze.value)==null||ua.focus()},Dn=()=>{var ua;return(ua=ze.value)==null?void 0:ua.blur()},Xn=ua=>{Ce.value=!1,r("mouseleave",ua)},aa=ua=>{Ce.value=!0,r("mouseenter",ua)},sa=ua=>{r("keydown",ua)},ia=()=>{var ua;(ua=ze.value)==null||ua.select()},ma=()=>{r(UPDATE_MODEL_EVENT,""),r("change",""),r("clear"),r("input","")};return watch(()=>g.modelValue,()=>{var ua;nextTick(()=>Wn()),g.validateEvent&&((ua=ae?.validate)==null||ua.call(ae,"change").catch(pe=>void 0))}),watch(kn,()=>Ca()),watch(()=>g.type,async()=>{await nextTick(),Ca(),Wn()}),onMounted(()=>{!g.formatter&&g.parser,Ca(),nextTick(Wn)}),n({input:he,textarea:_e,ref:ze,textareaStyle:Nn,autosize:toRef(g,"autosize"),focus:At,blur:Dn,select:ia,clear:ma,resizeTextarea:Wn}),(ua,pe)=>withDirectives((openBlock(),createElementBlock("div",mergeProps(unref($),{class:unref(V),style:unref($n),role:ua.containerRole,onMouseenter:aa,onMouseleave:Xn}),[createCommentVNode(" input "),ua.type!=="textarea"?(openBlock(),createElementBlock(Fragment,{key:0},[createCommentVNode(" prepend slot "),ua.$slots.prepend?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(le).be("group","prepend"))},[renderSlot(ua.$slots,"prepend")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{ref_key:"wrapperRef",ref:qe,class:normalizeClass(unref(L))},[createCommentVNode(" prefix slot "),ua.$slots.prefix||ua.prefixIcon?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(le).e("prefix"))},[createBaseVNode("span",{class:normalizeClass(unref(le).e("prefix-inner"))},[renderSlot(ua.$slots,"prefix"),ua.prefixIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(le).e("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ua.prefixIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],2)):createCommentVNode("v-if",!0),createBaseVNode("input",mergeProps({id:unref(re),ref_key:"input",ref:he,class:unref(le).e("inner")},unref(z),{type:ua.showPassword?$e.value?"text":"password":ua.type,disabled:unref(ue),formatter:ua.formatter,parser:ua.parser,readonly:ua.readonly,autocomplete:ua.autocomplete,tabindex:ua.tabindex,"aria-label":ua.label,placeholder:ua.placeholder,style:ua.inputStyle,form:g.form,onCompositionstart:vn,onCompositionupdate:Kn,onCompositionend:En,onInput:ra,onFocus:pe[0]||(pe[0]=(...Oe)=>unref(_n)&&unref(_n)(...Oe)),onBlur:pe[1]||(pe[1]=(...Oe)=>unref(Dt)&&unref(Dt)(...Oe)),onChange:Gn,onKeydown:sa}),null,16,_hoisted_2$1O),createCommentVNode(" suffix slot "),unref(ca)?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(le).e("suffix"))},[createBaseVNode("span",{class:normalizeClass(unref(le).e("suffix-inner"))},[!unref(jn)||!unref(Fn)||!unref(Tn)?(openBlock(),createElementBlock(Fragment,{key:0},[renderSlot(ua.$slots,"suffix"),ua.suffixIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(le).e("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ua.suffixIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],64)):createCommentVNode("v-if",!0),unref(jn)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(le).e("icon"),unref(le).e("clear")]),onMousedown:withModifiers(unref(NOOP),["prevent"]),onClick:ma},{default:withCtx(()=>[createVNode(unref(circle_close_default))]),_:1},8,["class","onMousedown"])):createCommentVNode("v-if",!0),unref(Fn)?(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass([unref(le).e("icon"),unref(le).e("password")]),onClick:kt},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(Mn))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),unref(Tn)?(openBlock(),createElementBlock("span",{key:3,class:normalizeClass(unref(le).e("count"))},[createBaseVNode("span",{class:normalizeClass(unref(le).e("count-inner"))},toDisplayString$1(unref(Hn))+" / "+toDisplayString$1(unref(z).maxlength),3)],2)):createCommentVNode("v-if",!0),unref(hn)&&unref(Vn)&&unref(Sn)?(openBlock(),createBlock(unref(ElIcon),{key:4,class:normalizeClass([unref(le).e("icon"),unref(le).e("validateIcon"),unref(le).is("loading",unref(hn)==="validating")])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(Vn))))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],2)):createCommentVNode("v-if",!0)],2),createCommentVNode(" append slot "),ua.$slots.append?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(le).be("group","append"))},[renderSlot(ua.$slots,"append")],2)):createCommentVNode("v-if",!0)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" textarea "),createBaseVNode("textarea",mergeProps({id:unref(re),ref_key:"textarea",ref:_e,class:unref(de).e("inner")},unref(z),{tabindex:ua.tabindex,disabled:unref(ue),readonly:ua.readonly,autocomplete:ua.autocomplete,style:unref(Nn),"aria-label":ua.label,placeholder:ua.placeholder,form:g.form,onCompositionstart:vn,onCompositionupdate:Kn,onCompositionend:En,onInput:ra,onFocus:pe[2]||(pe[2]=(...Oe)=>unref(_n)&&unref(_n)(...Oe)),onBlur:pe[3]||(pe[3]=(...Oe)=>unref(Dt)&&unref(Dt)(...Oe)),onChange:Gn,onKeydown:sa}),null,16,_hoisted_3$13),unref(Tn)?(openBlock(),createElementBlock("span",{key:0,style:normalizeStyle(xe.value),class:normalizeClass(unref(le).e("count"))},toDisplayString$1(unref(Hn))+" / "+toDisplayString$1(unref(z).maxlength),7)):createCommentVNode("v-if",!0)],64))],16,_hoisted_1$2d)),[[vShow,ua.type!=="hidden"]])}});var Input=_export_sfc$1(_sfc_main$3q,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const ElInput=withInstall(Input),GAP=4,BAR_MAP={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},renderThumbStyle$1=({move:e,size:n,bar:r})=>({[r.size]:n,transform:`translate${r.axis}(${e}%)`}),scrollbarContextKey=Symbol("scrollbarContextKey"),thumbProps=buildProps({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),COMPONENT_NAME$k="Thumb",_sfc_main$3p=defineComponent({__name:"thumb",props:thumbProps,setup(e){const n=e,r=inject(scrollbarContextKey),g=useNamespace("scrollbar");r||throwError(COMPONENT_NAME$k,"can not inject scrollbar context");const y=ref(),k=ref(),$=ref({}),V=ref(!1);let L=!1,z=!1,j=isClient?document.onselectstart:null;const ae=computed(()=>BAR_MAP[n.vertical?"vertical":"horizontal"]),re=computed(()=>renderThumbStyle$1({size:n.size,move:n.move,bar:ae.value})),oe=computed(()=>y.value[ae.value.offset]**2/r.wrapElement[ae.value.scrollSize]/n.ratio/k.value[ae.value.offset]),ue=xe=>{var Ie;if(xe.stopPropagation(),xe.ctrlKey||[1,2].includes(xe.button))return;(Ie=window.getSelection())==null||Ie.removeAllRanges(),de(xe);const ze=xe.currentTarget;ze&&($.value[ae.value.axis]=ze[ae.value.offset]-(xe[ae.value.client]-ze.getBoundingClientRect()[ae.value.direction]))},le=xe=>{if(!k.value||!y.value||!r.wrapElement)return;const Ie=Math.abs(xe.target.getBoundingClientRect()[ae.value.direction]-xe[ae.value.client]),ze=k.value[ae.value.offset]/2,qe=(Ie-ze)*100*oe.value/y.value[ae.value.offset];r.wrapElement[ae.value.scroll]=qe*r.wrapElement[ae.value.scrollSize]/100},de=xe=>{xe.stopImmediatePropagation(),L=!0,document.addEventListener("mousemove",he),document.addEventListener("mouseup",_e),j=document.onselectstart,document.onselectstart=()=>!1},he=xe=>{if(!y.value||!k.value||L===!1)return;const Ie=$.value[ae.value.axis];if(!Ie)return;const ze=(y.value.getBoundingClientRect()[ae.value.direction]-xe[ae.value.client])*-1,qe=k.value[ae.value.offset]-Ie,Et=(ze-qe)*100*oe.value/y.value[ae.value.offset];r.wrapElement[ae.value.scroll]=Et*r.wrapElement[ae.value.scrollSize]/100},_e=()=>{L=!1,$.value[ae.value.axis]=0,document.removeEventListener("mousemove",he),document.removeEventListener("mouseup",_e),$e(),z&&(V.value=!1)},Ce=()=>{z=!1,V.value=!!n.size},Ne=()=>{z=!0,V.value=L};onBeforeUnmount(()=>{$e(),document.removeEventListener("mouseup",_e)});const $e=()=>{document.onselectstart!==j&&(document.onselectstart=j)};return useEventListener(toRef(r,"scrollbarElement"),"mousemove",Ce),useEventListener(toRef(r,"scrollbarElement"),"mouseleave",Ne),(xe,Ie)=>(openBlock(),createBlock(Transition,{name:unref(g).b("fade"),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{ref_key:"instance",ref:y,class:normalizeClass([unref(g).e("bar"),unref(g).is(unref(ae).key)]),onMousedown:le},[createBaseVNode("div",{ref_key:"thumb",ref:k,class:normalizeClass(unref(g).e("thumb")),style:normalizeStyle(unref(re)),onMousedown:ue},null,38)],34),[[vShow,xe.always||V.value]])]),_:1},8,["name"]))}});var Thumb=_export_sfc$1(_sfc_main$3p,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const barProps=buildProps({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),_sfc_main$3o=defineComponent({__name:"bar",props:barProps,setup(e,{expose:n}){const r=e,g=ref(0),y=ref(0);return n({handleScroll:$=>{if($){const V=$.offsetHeight-GAP,L=$.offsetWidth-GAP;y.value=$.scrollTop*100/V*r.ratioY,g.value=$.scrollLeft*100/L*r.ratioX}}}),($,V)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(Thumb,{move:g.value,ratio:$.ratioX,size:$.width,always:$.always},null,8,["move","ratio","size","always"]),createVNode(Thumb,{move:y.value,ratio:$.ratioY,size:$.height,vertical:"",always:$.always},null,8,["move","ratio","size","always"])],64))}});var Bar=_export_sfc$1(_sfc_main$3o,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const scrollbarProps=buildProps({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:definePropType([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),scrollbarEmits={scroll:({scrollTop:e,scrollLeft:n})=>[e,n].every(isNumber$1)},COMPONENT_NAME$j="ElScrollbar",__default__$1w=defineComponent({name:COMPONENT_NAME$j}),_sfc_main$3n=defineComponent({...__default__$1w,props:scrollbarProps,emits:scrollbarEmits,setup(e,{expose:n,emit:r}){const g=e,y=useNamespace("scrollbar");let k,$;const V=ref(),L=ref(),z=ref(),j=ref("0"),ae=ref("0"),re=ref(),oe=ref(1),ue=ref(1),le=computed(()=>{const Ie={};return g.height&&(Ie.height=addUnit(g.height)),g.maxHeight&&(Ie.maxHeight=addUnit(g.maxHeight)),[g.wrapStyle,Ie]}),de=computed(()=>[g.wrapClass,y.e("wrap"),{[y.em("wrap","hidden-default")]:!g.native}]),he=computed(()=>[y.e("view"),g.viewClass]),_e=()=>{var Ie;L.value&&((Ie=re.value)==null||Ie.handleScroll(L.value),r("scroll",{scrollTop:L.value.scrollTop,scrollLeft:L.value.scrollLeft}))};function Ce(Ie,ze){isObject$3(Ie)?L.value.scrollTo(Ie):isNumber$1(Ie)&&isNumber$1(ze)&&L.value.scrollTo(Ie,ze)}const Ne=Ie=>{isNumber$1(Ie)&&(L.value.scrollTop=Ie)},$e=Ie=>{isNumber$1(Ie)&&(L.value.scrollLeft=Ie)},xe=()=>{if(!L.value)return;const Ie=L.value.offsetHeight-GAP,ze=L.value.offsetWidth-GAP,qe=Ie**2/L.value.scrollHeight,Et=ze**2/L.value.scrollWidth,_n=Math.max(qe,g.minSize),Dt=Math.max(Et,g.minSize);oe.value=qe/(Ie-qe)/(_n/(Ie-_n)),ue.value=Et/(ze-Et)/(Dt/(ze-Dt)),ae.value=_n+GAP<Ie?`${_n}px`:"",j.value=Dt+GAP<ze?`${Dt}px`:""};return watch(()=>g.noresize,Ie=>{Ie?(k?.(),$?.()):({stop:k}=useResizeObserver(z,xe),$=useEventListener("resize",xe))},{immediate:!0}),watch(()=>[g.maxHeight,g.height],()=>{g.native||nextTick(()=>{var Ie;xe(),L.value&&((Ie=re.value)==null||Ie.handleScroll(L.value))})}),provide(scrollbarContextKey,reactive({scrollbarElement:V,wrapElement:L})),onMounted(()=>{g.native||nextTick(()=>{xe()})}),onUpdated(()=>xe()),n({wrapRef:L,update:xe,scrollTo:Ce,setScrollTop:Ne,setScrollLeft:$e,handleScroll:_e}),(Ie,ze)=>(openBlock(),createElementBlock("div",{ref_key:"scrollbarRef",ref:V,class:normalizeClass(unref(y).b())},[createBaseVNode("div",{ref_key:"wrapRef",ref:L,class:normalizeClass(unref(de)),style:normalizeStyle(unref(le)),onScroll:_e},[(openBlock(),createBlock(resolveDynamicComponent(Ie.tag),{ref_key:"resizeRef",ref:z,class:normalizeClass(unref(he)),style:normalizeStyle(Ie.viewStyle)},{default:withCtx(()=>[renderSlot(Ie.$slots,"default")]),_:3},8,["class","style"]))],38),Ie.native?createCommentVNode("v-if",!0):(openBlock(),createBlock(Bar,{key:0,ref_key:"barRef",ref:re,height:ae.value,width:j.value,always:Ie.always,"ratio-x":ue.value,"ratio-y":oe.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Scrollbar=_export_sfc$1(_sfc_main$3n,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const ElScrollbar=withInstall(Scrollbar),POPPER_INJECTION_KEY=Symbol("popper"),POPPER_CONTENT_INJECTION_KEY=Symbol("popperContent"),roleTypes=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],popperProps=buildProps({role:{type:String,values:roleTypes,default:"tooltip"}}),__default__$1v=defineComponent({name:"ElPopper",inheritAttrs:!1}),_sfc_main$3m=defineComponent({...__default__$1v,props:popperProps,setup(e,{expose:n}){const r=e,g=ref(),y=ref(),k=ref(),$=ref(),V=computed(()=>r.role),L={triggerRef:g,popperInstanceRef:y,contentRef:k,referenceRef:$,role:V};return n(L),provide(POPPER_INJECTION_KEY,L),(z,j)=>renderSlot(z.$slots,"default")}});var Popper=_export_sfc$1(_sfc_main$3m,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/popper.vue"]]);const popperArrowProps=buildProps({arrowOffset:{type:Number,default:5}}),__default__$1u=defineComponent({name:"ElPopperArrow",inheritAttrs:!1}),_sfc_main$3l=defineComponent({...__default__$1u,props:popperArrowProps,setup(e,{expose:n}){const r=e,g=useNamespace("popper"),{arrowOffset:y,arrowRef:k,arrowStyle:$}=inject(POPPER_CONTENT_INJECTION_KEY,void 0);return watch(()=>r.arrowOffset,V=>{y.value=V}),onBeforeUnmount(()=>{k.value=void 0}),n({arrowRef:k}),(V,L)=>(openBlock(),createElementBlock("span",{ref_key:"arrowRef",ref:k,class:normalizeClass(unref(g).e("arrow")),style:normalizeStyle(unref($)),"data-popper-arrow":""},null,6))}});var ElPopperArrow=_export_sfc$1(_sfc_main$3l,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/arrow.vue"]]);const NAME="ElOnlyChild",OnlyChild=defineComponent({name:NAME,setup(e,{slots:n,attrs:r}){var g;const y=inject(FORWARD_REF_INJECTION_KEY),k=useForwardRefDirective((g=y?.setForwardRef)!=null?g:NOOP);return()=>{var $;const V=($=n.default)==null?void 0:$.call(n,r);if(!V||V.length>1)return null;const L=findFirstLegitChild(V);return L?withDirectives(cloneVNode(L,r),[[k]]):null}}});function findFirstLegitChild(e){if(!e)return null;const n=e;for(const r of n){if(isObject$3(r))switch(r.type){case Comment:continue;case Text$2:case"svg":return wrapTextContent(r);case Fragment:return findFirstLegitChild(r.children);default:return r}return wrapTextContent(r)}return null}function wrapTextContent(e){const n=useNamespace("only-child");return createVNode("span",{class:n.e("content")},[e])}const popperTriggerProps=buildProps({virtualRef:{type:definePropType(Object)},virtualTriggering:Boolean,onMouseenter:{type:definePropType(Function)},onMouseleave:{type:definePropType(Function)},onClick:{type:definePropType(Function)},onKeydown:{type:definePropType(Function)},onFocus:{type:definePropType(Function)},onBlur:{type:definePropType(Function)},onContextmenu:{type:definePropType(Function)},id:String,open:Boolean}),__default__$1t=defineComponent({name:"ElPopperTrigger",inheritAttrs:!1}),_sfc_main$3k=defineComponent({...__default__$1t,props:popperTriggerProps,setup(e,{expose:n}){const r=e,{role:g,triggerRef:y}=inject(POPPER_INJECTION_KEY,void 0);useForwardRef(y);const k=computed(()=>V.value?r.id:void 0),$=computed(()=>{if(g&&g.value==="tooltip")return r.open&&r.id?r.id:void 0}),V=computed(()=>{if(g&&g.value!=="tooltip")return g.value}),L=computed(()=>V.value?`${r.open}`:void 0);let z;return onMounted(()=>{watch(()=>r.virtualRef,j=>{j&&(y.value=unrefElement(j))},{immediate:!0}),watch(y,(j,ae)=>{z?.(),z=void 0,isElement$1(j)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(re=>{var oe;const ue=r[re];ue&&(j.addEventListener(re.slice(2).toLowerCase(),ue),(oe=ae?.removeEventListener)==null||oe.call(ae,re.slice(2).toLowerCase(),ue))}),z=watch([k,$,V,L],re=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((oe,ue)=>{isNil(re[ue])?j.removeAttribute(oe):j.setAttribute(oe,re[ue])})},{immediate:!0})),isElement$1(ae)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(re=>ae.removeAttribute(re))},{immediate:!0})}),onBeforeUnmount(()=>{z?.(),z=void 0}),n({triggerRef:y}),(j,ae)=>j.virtualTriggering?createCommentVNode("v-if",!0):(openBlock(),createBlock(unref(OnlyChild),mergeProps({key:0},j.$attrs,{"aria-controls":unref(k),"aria-describedby":unref($),"aria-expanded":unref(L),"aria-haspopup":unref(V)}),{default:withCtx(()=>[renderSlot(j.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var ElPopperTrigger=_export_sfc$1(_sfc_main$3k,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/trigger.vue"]]);const FOCUS_AFTER_TRAPPED="focus-trap.focus-after-trapped",FOCUS_AFTER_RELEASED="focus-trap.focus-after-released",FOCUSOUT_PREVENTED="focus-trap.focusout-prevented",FOCUS_AFTER_TRAPPED_OPTS={cancelable:!0,bubbles:!1},FOCUSOUT_PREVENTED_OPTS={cancelable:!0,bubbles:!1},ON_TRAP_FOCUS_EVT="focusAfterTrapped",ON_RELEASE_FOCUS_EVT="focusAfterReleased",FOCUS_TRAP_INJECTION_KEY=Symbol("elFocusTrap"),focusReason=ref(),lastUserFocusTimestamp=ref(0),lastAutomatedFocusTimestamp=ref(0);let focusReasonUserCount=0;const obtainAllFocusableElements=e=>{const n=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:g=>{const y=g.tagName==="INPUT"&&g.type==="hidden";return g.disabled||g.hidden||y?NodeFilter.FILTER_SKIP:g.tabIndex>=0||g===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)n.push(r.currentNode);return n},getVisibleElement=(e,n)=>{for(const r of e)if(!isHidden(r,n))return r},isHidden=(e,n)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},getEdges=e=>{const n=obtainAllFocusableElements(e),r=getVisibleElement(n,e),g=getVisibleElement(n.reverse(),e);return[r,g]},isSelectable=e=>e instanceof HTMLInputElement&&"select"in e,tryFocus=(e,n)=>{if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),lastAutomatedFocusTimestamp.value=window.performance.now(),e!==r&&isSelectable(e)&&n&&e.select()}};function removeFromStack(e,n){const r=[...e],g=e.indexOf(n);return g!==-1&&r.splice(g,1),r}const createFocusableStack=()=>{let e=[];return{push:g=>{const y=e[0];y&&g!==y&&y.pause(),e=removeFromStack(e,g),e.unshift(g)},remove:g=>{var y,k;e=removeFromStack(e,g),(k=(y=e[0])==null?void 0:y.resume)==null||k.call(y)}}},focusFirstDescendant=(e,n=!1)=>{const r=document.activeElement;for(const g of e)if(tryFocus(g,n),document.activeElement!==r)return},focusableStack=createFocusableStack(),isFocusCausedByUserEvent=()=>lastUserFocusTimestamp.value>lastAutomatedFocusTimestamp.value,notifyFocusReasonPointer=()=>{focusReason.value="pointer",lastUserFocusTimestamp.value=window.performance.now()},notifyFocusReasonKeydown=()=>{focusReason.value="keyboard",lastUserFocusTimestamp.value=window.performance.now()},useFocusReason=()=>(onMounted(()=>{focusReasonUserCount===0&&(document.addEventListener("mousedown",notifyFocusReasonPointer),document.addEventListener("touchstart",notifyFocusReasonPointer),document.addEventListener("keydown",notifyFocusReasonKeydown)),focusReasonUserCount++}),onBeforeUnmount(()=>{focusReasonUserCount--,focusReasonUserCount<=0&&(document.removeEventListener("mousedown",notifyFocusReasonPointer),document.removeEventListener("touchstart",notifyFocusReasonPointer),document.removeEventListener("keydown",notifyFocusReasonKeydown))}),{focusReason,lastUserFocusTimestamp,lastAutomatedFocusTimestamp}),createFocusOutPreventedEvent=e=>new CustomEvent(FOCUSOUT_PREVENTED,{...FOCUSOUT_PREVENTED_OPTS,detail:e}),_sfc_main$3j=defineComponent({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[ON_TRAP_FOCUS_EVT,ON_RELEASE_FOCUS_EVT,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:n}){const r=ref();let g,y;const{focusReason:k}=useFocusReason();useEscapeKeydown(ue=>{e.trapped&&!$.paused&&n("release-requested",ue)});const $={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},V=ue=>{if(!e.loop&&!e.trapped||$.paused)return;const{key:le,altKey:de,ctrlKey:he,metaKey:_e,currentTarget:Ce,shiftKey:Ne}=ue,{loop:$e}=e,xe=le===EVENT_CODE.tab&&!de&&!he&&!_e,Ie=document.activeElement;if(xe&&Ie){const ze=Ce,[qe,Et]=getEdges(ze);if(qe&&Et){if(!Ne&&Ie===Et){const Dt=createFocusOutPreventedEvent({focusReason:k.value});n("focusout-prevented",Dt),Dt.defaultPrevented||(ue.preventDefault(),$e&&tryFocus(qe,!0))}else if(Ne&&[qe,ze].includes(Ie)){const Dt=createFocusOutPreventedEvent({focusReason:k.value});n("focusout-prevented",Dt),Dt.defaultPrevented||(ue.preventDefault(),$e&&tryFocus(Et,!0))}}else if(Ie===ze){const Dt=createFocusOutPreventedEvent({focusReason:k.value});n("focusout-prevented",Dt),Dt.defaultPrevented||ue.preventDefault()}}};provide(FOCUS_TRAP_INJECTION_KEY,{focusTrapRef:r,onKeydown:V}),watch(()=>e.focusTrapEl,ue=>{ue&&(r.value=ue)},{immediate:!0}),watch([r],([ue],[le])=>{ue&&(ue.addEventListener("keydown",V),ue.addEventListener("focusin",j),ue.addEventListener("focusout",ae)),le&&(le.removeEventListener("keydown",V),le.removeEventListener("focusin",j),le.removeEventListener("focusout",ae))});const L=ue=>{n(ON_TRAP_FOCUS_EVT,ue)},z=ue=>n(ON_RELEASE_FOCUS_EVT,ue),j=ue=>{const le=unref(r);if(!le)return;const de=ue.target,he=ue.relatedTarget,_e=de&&le.contains(de);e.trapped||he&&le.contains(he)||(g=he),_e&&n("focusin",ue),!$.paused&&e.trapped&&(_e?y=de:tryFocus(y,!0))},ae=ue=>{const le=unref(r);if(!($.paused||!le))if(e.trapped){const de=ue.relatedTarget;!isNil(de)&&!le.contains(de)&&setTimeout(()=>{if(!$.paused&&e.trapped){const he=createFocusOutPreventedEvent({focusReason:k.value});n("focusout-prevented",he),he.defaultPrevented||tryFocus(y,!0)}},0)}else{const de=ue.target;de&&le.contains(de)||n("focusout",ue)}};async function re(){await nextTick();const ue=unref(r);if(ue){focusableStack.push($);const le=ue.contains(document.activeElement)?g:document.activeElement;if(g=le,!ue.contains(le)){const he=new Event(FOCUS_AFTER_TRAPPED,FOCUS_AFTER_TRAPPED_OPTS);ue.addEventListener(FOCUS_AFTER_TRAPPED,L),ue.dispatchEvent(he),he.defaultPrevented||nextTick(()=>{let _e=e.focusStartEl;isString$3(_e)||(tryFocus(_e),document.activeElement!==_e&&(_e="first")),_e==="first"&&focusFirstDescendant(obtainAllFocusableElements(ue),!0),(document.activeElement===le||_e==="container")&&tryFocus(ue)})}}}function oe(){const ue=unref(r);if(ue){ue.removeEventListener(FOCUS_AFTER_TRAPPED,L);const le=new CustomEvent(FOCUS_AFTER_RELEASED,{...FOCUS_AFTER_TRAPPED_OPTS,detail:{focusReason:k.value}});ue.addEventListener(FOCUS_AFTER_RELEASED,z),ue.dispatchEvent(le),!le.defaultPrevented&&(k.value=="keyboard"||!isFocusCausedByUserEvent()||ue.contains(document.activeElement))&&tryFocus(g??document.body),ue.removeEventListener(FOCUS_AFTER_RELEASED,z),focusableStack.remove($)}}return onMounted(()=>{e.trapped&&re(),watch(()=>e.trapped,ue=>{ue?re():oe()})}),onBeforeUnmount(()=>{e.trapped&&oe()}),{onKeydown:V}}});function _sfc_render$v(e,n,r,g,y,k){return renderSlot(e.$slots,"default",{handleKeydown:e.onKeydown})}var ElFocusTrap=_export_sfc$1(_sfc_main$3j,[["render",_sfc_render$v],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);const POSITIONING_STRATEGIES=["fixed","absolute"],popperCoreConfigProps=buildProps({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:definePropType(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:Ee,default:"bottom"},popperOptions:{type:definePropType(Object),default:()=>({})},strategy:{type:String,values:POSITIONING_STRATEGIES,default:"absolute"}}),popperContentProps=buildProps({...popperCoreConfigProps,id:String,style:{type:definePropType([String,Array,Object])},className:{type:definePropType([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:definePropType([String,Array,Object])},popperStyle:{type:definePropType([String,Array,Object])},referenceEl:{type:definePropType(Object)},triggerTargetEl:{type:definePropType(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},ariaLabel:{type:String,default:void 0},virtualTriggering:Boolean,zIndex:Number}),popperContentEmits={mouseenter:e=>e instanceof MouseEvent,mouseleave:e=>e instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},buildPopperOptions=(e,n=[])=>{const{placement:r,strategy:g,popperOptions:y}=e,k={placement:r,strategy:g,...y,modifiers:[...genModifiers(e),...n]};return deriveExtraModifiers(k,y?.modifiers),k},unwrapMeasurableEl=e=>{if(isClient)return unrefElement(e)};function genModifiers(e){const{offset:n,gpuAcceleration:r,fallbackPlacements:g}=e;return[{name:"offset",options:{offset:[0,n??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:g}},{name:"computeStyles",options:{gpuAcceleration:r}}]}function deriveExtraModifiers(e,n){n&&(e.modifiers=[...e.modifiers,...n??[]])}const DEFAULT_ARROW_OFFSET=0,usePopperContent=e=>{const{popperInstanceRef:n,contentRef:r,triggerRef:g,role:y}=inject(POPPER_INJECTION_KEY,void 0),k=ref(),$=ref(),V=computed(()=>({name:"eventListeners",enabled:!!e.visible})),L=computed(()=>{var he;const _e=unref(k),Ce=(he=unref($))!=null?he:DEFAULT_ARROW_OFFSET;return{name:"arrow",enabled:!isUndefined$1(_e),options:{element:_e,padding:Ce}}}),z=computed(()=>({onFirstUpdate:()=>{ue()},...buildPopperOptions(e,[unref(L),unref(V)])})),j=computed(()=>unwrapMeasurableEl(e.referenceEl)||unref(g)),{attributes:ae,state:re,styles:oe,update:ue,forceUpdate:le,instanceRef:de}=usePopper(j,r,z);return watch(de,he=>n.value=he),onMounted(()=>{watch(()=>{var he;return(he=unref(j))==null?void 0:he.getBoundingClientRect()},()=>{ue()})}),{attributes:ae,arrowRef:k,contentRef:r,instanceRef:de,state:re,styles:oe,role:y,forceUpdate:le,update:ue}},usePopperContentDOM=(e,{attributes:n,styles:r,role:g})=>{const{nextZIndex:y}=useZIndex(),k=useNamespace("popper"),$=computed(()=>unref(n).popper),V=ref(e.zIndex||y()),L=computed(()=>[k.b(),k.is("pure",e.pure),k.is(e.effect),e.popperClass]),z=computed(()=>[{zIndex:unref(V)},unref(r).popper,e.popperStyle||{}]),j=computed(()=>g.value==="dialog"?"false":void 0),ae=computed(()=>unref(r).arrow||{});return{ariaModal:j,arrowStyle:ae,contentAttrs:$,contentClass:L,contentStyle:z,contentZIndex:V,updateZIndex:()=>{V.value=e.zIndex||y()}}},usePopperContentFocusTrap=(e,n)=>{const r=ref(!1),g=ref();return{focusStartRef:g,trapped:r,onFocusAfterReleased:z=>{var j;((j=z.detail)==null?void 0:j.focusReason)!=="pointer"&&(g.value="first",n("blur"))},onFocusAfterTrapped:()=>{n("focus")},onFocusInTrap:z=>{e.visible&&!r.value&&(z.target&&(g.value=z.target),r.value=!0)},onFocusoutPrevented:z=>{e.trapping||(z.detail.focusReason==="pointer"&&z.preventDefault(),r.value=!1)},onReleaseRequested:()=>{r.value=!1,n("close")}}},__default__$1s=defineComponent({name:"ElPopperContent"}),_sfc_main$3i=defineComponent({...__default__$1s,props:popperContentProps,emits:popperContentEmits,setup(e,{expose:n,emit:r}){const g=e,{focusStartRef:y,trapped:k,onFocusAfterReleased:$,onFocusAfterTrapped:V,onFocusInTrap:L,onFocusoutPrevented:z,onReleaseRequested:j}=usePopperContentFocusTrap(g,r),{attributes:ae,arrowRef:re,contentRef:oe,styles:ue,instanceRef:le,role:de,update:he}=usePopperContent(g),{ariaModal:_e,arrowStyle:Ce,contentAttrs:Ne,contentClass:$e,contentStyle:xe,updateZIndex:Ie}=usePopperContentDOM(g,{styles:ue,attributes:ae,role:de}),ze=inject(formItemContextKey,void 0),qe=ref();provide(POPPER_CONTENT_INJECTION_KEY,{arrowStyle:Ce,arrowRef:re,arrowOffset:qe}),ze&&(ze.addInputId||ze.removeInputId)&&provide(formItemContextKey,{...ze,addInputId:NOOP,removeInputId:NOOP});let Et;const _n=(Sn=!0)=>{he(),Sn&&Ie()},Dt=()=>{_n(!1),g.visible&&g.focusOnShow?k.value=!0:g.visible===!1&&(k.value=!1)};return onMounted(()=>{watch(()=>g.triggerTargetEl,(Sn,hn)=>{Et?.(),Et=void 0;const Vn=unref(Sn||oe.value),Mn=unref(hn||oe.value);isElement$1(Vn)&&(Et=watch([de,()=>g.ariaLabel,_e,()=>g.id],$n=>{["role","aria-label","aria-modal","id"].forEach((Nn,kn)=>{isNil($n[kn])?Vn.removeAttribute(Nn):Vn.setAttribute(Nn,$n[kn])})},{immediate:!0})),Mn!==Vn&&isElement$1(Mn)&&["role","aria-label","aria-modal","id"].forEach($n=>{Mn.removeAttribute($n)})},{immediate:!0}),watch(()=>g.visible,Dt,{immediate:!0})}),onBeforeUnmount(()=>{Et?.(),Et=void 0}),n({popperContentRef:oe,popperInstanceRef:le,updatePopper:_n,contentStyle:xe}),(Sn,hn)=>(openBlock(),createElementBlock("div",mergeProps({ref_key:"contentRef",ref:oe},unref(Ne),{style:unref(xe),class:unref($e),tabindex:"-1",onMouseenter:hn[0]||(hn[0]=Vn=>Sn.$emit("mouseenter",Vn)),onMouseleave:hn[1]||(hn[1]=Vn=>Sn.$emit("mouseleave",Vn))}),[createVNode(unref(ElFocusTrap),{trapped:unref(k),"trap-on-focus-in":!0,"focus-trap-el":unref(oe),"focus-start-el":unref(y),onFocusAfterTrapped:unref(V),onFocusAfterReleased:unref($),onFocusin:unref(L),onFocusoutPrevented:unref(z),onReleaseRequested:unref(j)},{default:withCtx(()=>[renderSlot(Sn.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16))}});var ElPopperContent=_export_sfc$1(_sfc_main$3i,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/content.vue"]]);const ElPopper=withInstall(Popper),TOOLTIP_INJECTION_KEY=Symbol("elTooltip"),useTooltipContentProps=buildProps({...useDelayedToggleProps,...popperContentProps,appendTo:{type:definePropType([String,Object])},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:definePropType(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean}),useTooltipTriggerProps=buildProps({...popperTriggerProps,disabled:Boolean,trigger:{type:definePropType([String,Array]),default:"hover"},triggerKeys:{type:definePropType(Array),default:()=>[EVENT_CODE.enter,EVENT_CODE.space]}}),{useModelToggleProps:useTooltipModelToggleProps,useModelToggleEmits:useTooltipModelToggleEmits,useModelToggle:useTooltipModelToggle}=createModelToggleComposable("visible"),useTooltipProps=buildProps({...popperProps,...useTooltipModelToggleProps,...useTooltipContentProps,...useTooltipTriggerProps,...popperArrowProps,showArrow:{type:Boolean,default:!0}}),tooltipEmits=[...useTooltipModelToggleEmits,"before-show","before-hide","show","hide","open","close"],isTriggerType=(e,n)=>isArray$3(e)?e.includes(n):e===n,whenTrigger=(e,n,r)=>g=>{isTriggerType(unref(e),n)&&r(g)},__default__$1r=defineComponent({name:"ElTooltipTrigger"}),_sfc_main$3h=defineComponent({...__default__$1r,props:useTooltipTriggerProps,setup(e,{expose:n}){const r=e,g=useNamespace("tooltip"),{controlled:y,id:k,open:$,onOpen:V,onClose:L,onToggle:z}=inject(TOOLTIP_INJECTION_KEY,void 0),j=ref(null),ae=()=>{if(unref(y)||r.disabled)return!0},re=toRef(r,"trigger"),oe=composeEventHandlers(ae,whenTrigger(re,"hover",V)),ue=composeEventHandlers(ae,whenTrigger(re,"hover",L)),le=composeEventHandlers(ae,whenTrigger(re,"click",Ne=>{Ne.button===0&&z(Ne)})),de=composeEventHandlers(ae,whenTrigger(re,"focus",V)),he=composeEventHandlers(ae,whenTrigger(re,"focus",L)),_e=composeEventHandlers(ae,whenTrigger(re,"contextmenu",Ne=>{Ne.preventDefault(),z(Ne)})),Ce=composeEventHandlers(ae,Ne=>{const{code:$e}=Ne;r.triggerKeys.includes($e)&&(Ne.preventDefault(),z(Ne))});return n({triggerRef:j}),(Ne,$e)=>(openBlock(),createBlock(unref(ElPopperTrigger),{id:unref(k),"virtual-ref":Ne.virtualRef,open:unref($),"virtual-triggering":Ne.virtualTriggering,class:normalizeClass(unref(g).e("trigger")),onBlur:unref(he),onClick:unref(le),onContextmenu:unref(_e),onFocus:unref(de),onMouseenter:unref(oe),onMouseleave:unref(ue),onKeydown:unref(Ce)},{default:withCtx(()=>[renderSlot(Ne.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var ElTooltipTrigger=_export_sfc$1(_sfc_main$3h,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/trigger.vue"]]);const __default__$1q=defineComponent({name:"ElTooltipContent",inheritAttrs:!1}),_sfc_main$3g=defineComponent({...__default__$1q,props:useTooltipContentProps,setup(e,{expose:n}){const r=e,{selector:g}=usePopperContainerId(),y=useNamespace("tooltip"),k=ref(null),$=ref(!1),{controlled:V,id:L,open:z,trigger:j,onClose:ae,onOpen:re,onShow:oe,onHide:ue,onBeforeShow:le,onBeforeHide:de}=inject(TOOLTIP_INJECTION_KEY,void 0),he=computed(()=>r.transition||`${y.namespace.value}-fade-in-linear`),_e=computed(()=>r.persistent);onBeforeUnmount(()=>{$.value=!0});const Ce=computed(()=>unref(_e)?!0:unref(z)),Ne=computed(()=>r.disabled?!1:unref(z)),$e=computed(()=>r.appendTo||g.value),xe=computed(()=>{var $n;return($n=r.style)!=null?$n:{}}),Ie=computed(()=>!unref(z)),ze=()=>{ue()},qe=()=>{if(unref(V))return!0},Et=composeEventHandlers(qe,()=>{r.enterable&&unref(j)==="hover"&&re()}),_n=composeEventHandlers(qe,()=>{unref(j)==="hover"&&ae()}),Dt=()=>{var $n,Nn;(Nn=($n=k.value)==null?void 0:$n.updatePopper)==null||Nn.call($n),le?.()},Sn=()=>{de?.()},hn=()=>{oe(),Mn=onClickOutside(computed(()=>{var $n;return($n=k.value)==null?void 0:$n.popperContentRef}),()=>{if(unref(V))return;unref(j)!=="hover"&&ae()})},Vn=()=>{r.virtualTriggering||ae()};let Mn;return watch(()=>unref(z),$n=>{$n||Mn?.()},{flush:"post"}),watch(()=>r.content,()=>{var $n,Nn;(Nn=($n=k.value)==null?void 0:$n.updatePopper)==null||Nn.call($n)}),n({contentRef:k}),($n,Nn)=>(openBlock(),createBlock(Teleport,{disabled:!$n.teleported,to:unref($e)},[createVNode(Transition,{name:unref(he),onAfterLeave:ze,onBeforeEnter:Dt,onAfterEnter:hn,onBeforeLeave:Sn},{default:withCtx(()=>[unref(Ce)?withDirectives((openBlock(),createBlock(unref(ElPopperContent),mergeProps({key:0,id:unref(L),ref_key:"contentRef",ref:k},$n.$attrs,{"aria-label":$n.ariaLabel,"aria-hidden":unref(Ie),"boundaries-padding":$n.boundariesPadding,"fallback-placements":$n.fallbackPlacements,"gpu-acceleration":$n.gpuAcceleration,offset:$n.offset,placement:$n.placement,"popper-options":$n.popperOptions,strategy:$n.strategy,effect:$n.effect,enterable:$n.enterable,pure:$n.pure,"popper-class":$n.popperClass,"popper-style":[$n.popperStyle,unref(xe)],"reference-el":$n.referenceEl,"trigger-target-el":$n.triggerTargetEl,visible:unref(Ne),"z-index":$n.zIndex,onMouseenter:unref(Et),onMouseleave:unref(_n),onBlur:Vn,onClose:unref(ae)}),{default:withCtx(()=>[$.value?createCommentVNode("v-if",!0):renderSlot($n.$slots,"default",{key:0})]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[vShow,unref(Ne)]]):createCommentVNode("v-if",!0)]),_:3},8,["name"])],8,["disabled","to"]))}});var ElTooltipContent=_export_sfc$1(_sfc_main$3g,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/content.vue"]]);const _hoisted_1$2c=["innerHTML"],_hoisted_2$1N={key:1},__default__$1p=defineComponent({name:"ElTooltip"}),_sfc_main$3f=defineComponent({...__default__$1p,props:useTooltipProps,emits:tooltipEmits,setup(e,{expose:n,emit:r}){const g=e;usePopperContainer();const y=useId(),k=ref(),$=ref(),V=()=>{var he;const _e=unref(k);_e&&((he=_e.popperInstanceRef)==null||he.update())},L=ref(!1),z=ref(),{show:j,hide:ae,hasUpdateHandler:re}=useTooltipModelToggle({indicator:L,toggleReason:z}),{onOpen:oe,onClose:ue}=useDelayedToggle({showAfter:toRef(g,"showAfter"),hideAfter:toRef(g,"hideAfter"),autoClose:toRef(g,"autoClose"),open:j,close:ae}),le=computed(()=>isBoolean$1(g.visible)&&!re.value);provide(TOOLTIP_INJECTION_KEY,{controlled:le,id:y,open:readonly(L),trigger:toRef(g,"trigger"),onOpen:he=>{oe(he)},onClose:he=>{ue(he)},onToggle:he=>{unref(L)?ue(he):oe(he)},onShow:()=>{r("show",z.value)},onHide:()=>{r("hide",z.value)},onBeforeShow:()=>{r("before-show",z.value)},onBeforeHide:()=>{r("before-hide",z.value)},updatePopper:V}),watch(()=>g.disabled,he=>{he&&L.value&&(L.value=!1)});const de=he=>{var _e,Ce;const Ne=(Ce=(_e=$.value)==null?void 0:_e.contentRef)==null?void 0:Ce.popperContentRef,$e=he?.relatedTarget||document.activeElement;return Ne&&Ne.contains($e)};return onDeactivated(()=>L.value&&ae()),n({popperRef:k,contentRef:$,isFocusInsideContent:de,updatePopper:V,onOpen:oe,onClose:ue,hide:ae}),(he,_e)=>(openBlock(),createBlock(unref(ElPopper),{ref_key:"popperRef",ref:k,role:he.role},{default:withCtx(()=>[createVNode(ElTooltipTrigger,{disabled:he.disabled,trigger:he.trigger,"trigger-keys":he.triggerKeys,"virtual-ref":he.virtualRef,"virtual-triggering":he.virtualTriggering},{default:withCtx(()=>[he.$slots.default?renderSlot(he.$slots,"default",{key:0}):createCommentVNode("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),createVNode(ElTooltipContent,{ref_key:"contentRef",ref:$,"aria-label":he.ariaLabel,"boundaries-padding":he.boundariesPadding,content:he.content,disabled:he.disabled,effect:he.effect,enterable:he.enterable,"fallback-placements":he.fallbackPlacements,"hide-after":he.hideAfter,"gpu-acceleration":he.gpuAcceleration,offset:he.offset,persistent:he.persistent,"popper-class":he.popperClass,"popper-style":he.popperStyle,placement:he.placement,"popper-options":he.popperOptions,pure:he.pure,"raw-content":he.rawContent,"reference-el":he.referenceEl,"trigger-target-el":he.triggerTargetEl,"show-after":he.showAfter,strategy:he.strategy,teleported:he.teleported,transition:he.transition,"virtual-triggering":he.virtualTriggering,"z-index":he.zIndex,"append-to":he.appendTo},{default:withCtx(()=>[renderSlot(he.$slots,"content",{},()=>[he.rawContent?(openBlock(),createElementBlock("span",{key:0,innerHTML:he.content},null,8,_hoisted_1$2c)):(openBlock(),createElementBlock("span",_hoisted_2$1N,toDisplayString$1(he.content),1))]),he.showArrow?(openBlock(),createBlock(unref(ElPopperArrow),{key:0,"arrow-offset":he.arrowOffset},null,8,["arrow-offset"])):createCommentVNode("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Tooltip=_export_sfc$1(_sfc_main$3f,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/tooltip.vue"]]);const ElTooltip=withInstall(Tooltip),autocompleteProps=buildProps({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:definePropType(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:definePropType([Function,Array]),default:NOOP},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:useTooltipContentProps.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:String}),autocompleteEmits={[UPDATE_MODEL_EVENT]:e=>isString$3(e),[INPUT_EVENT]:e=>isString$3(e),[CHANGE_EVENT]:e=>isString$3(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>isObject$3(e)},_hoisted_1$2b=["aria-expanded","aria-owns"],_hoisted_2$1M={key:0},_hoisted_3$12=["id","aria-selected","onClick"],COMPONENT_NAME$i="ElAutocomplete",__default__$1o=defineComponent({name:COMPONENT_NAME$i,inheritAttrs:!1}),_sfc_main$3e=defineComponent({...__default__$1o,props:autocompleteProps,emits:autocompleteEmits,setup(e,{expose:n,emit:r}){const g=e,y=useAttrs(),k=useAttrs$1(),$=useFormDisabled(),V=useNamespace("autocomplete"),L=ref(),z=ref(),j=ref(),ae=ref();let re=!1,oe=!1;const ue=ref([]),le=ref(-1),de=ref(""),he=ref(!1),_e=ref(!1),Ce=ref(!1),Ne=computed(()=>V.b(String(generateId()))),$e=computed(()=>k.style),xe=computed(()=>(ue.value.length>0||Ce.value)&&he.value),Ie=computed(()=>!g.hideLoading&&Ce.value),ze=computed(()=>L.value?Array.from(L.value.$el.querySelectorAll("input")):[]),qe=()=>{xe.value&&(de.value=`${L.value.$el.offsetWidth}px`)},Et=()=>{le.value=-1},Dt=debounce(async Zn=>{if(_e.value)return;const Bn=Wn=>{Ce.value=!1,!_e.value&&(isArray$3(Wn)?(ue.value=Wn,le.value=g.highlightFirstItem?0:-1):throwError(COMPONENT_NAME$i,"autocomplete suggestions must be an array"))};if(Ce.value=!0,isArray$3(g.fetchSuggestions))Bn(g.fetchSuggestions);else{const Wn=await g.fetchSuggestions(Zn,Bn);isArray$3(Wn)&&Bn(Wn)}},g.debounce),Sn=Zn=>{const Bn=!!Zn;if(r(INPUT_EVENT,Zn),r(UPDATE_MODEL_EVENT,Zn),_e.value=!1,he.value||(he.value=Bn),!g.triggerOnFocus&&!Zn){_e.value=!0,ue.value=[];return}Dt(Zn)},hn=Zn=>{var Bn;$.value||(((Bn=Zn.target)==null?void 0:Bn.tagName)!=="INPUT"||ze.value.includes(document.activeElement))&&(he.value=!0)},Vn=Zn=>{r(CHANGE_EVENT,Zn)},Mn=Zn=>{oe?oe=!1:(he.value=!0,r("focus",Zn),g.triggerOnFocus&&!re&&Dt(String(g.modelValue)))},$n=Zn=>{setTimeout(()=>{var Bn;if((Bn=j.value)!=null&&Bn.isFocusInsideContent()){oe=!0;return}he.value&&Fn(),r("blur",Zn)})},Nn=()=>{he.value=!1,r(UPDATE_MODEL_EVENT,""),r("clear")},kn=async()=>{xe.value&&le.value>=0&&le.value<ue.value.length?la(ue.value[le.value]):g.selectWhenUnmatched&&(r("select",{value:g.modelValue}),ue.value=[],le.value=-1)},jn=Zn=>{xe.value&&(Zn.preventDefault(),Zn.stopPropagation(),Fn())},Fn=()=>{he.value=!1},Tn=()=>{var Zn;(Zn=L.value)==null||Zn.focus()},Hn=()=>{var Zn;(Zn=L.value)==null||Zn.blur()},la=async Zn=>{r(INPUT_EVENT,Zn[g.valueKey]),r(UPDATE_MODEL_EVENT,Zn[g.valueKey]),r("select",Zn),ue.value=[],le.value=-1},ca=Zn=>{if(!xe.value||Ce.value)return;if(Zn<0){le.value=-1;return}Zn>=ue.value.length&&(Zn=ue.value.length-1);const Bn=z.value.querySelector(`.${V.be("suggestion","wrap")}`),da=Bn.querySelectorAll(`.${V.be("suggestion","list")} li`)[Zn],ga=Bn.scrollTop,{offsetTop:Ca,scrollHeight:ra}=da;Ca+ra>ga+Bn.clientHeight&&(Bn.scrollTop+=ra),Ca<ga&&(Bn.scrollTop-=ra),le.value=Zn,L.value.ref.setAttribute("aria-activedescendant",`${Ne.value}-item-${le.value}`)};return onClickOutside(ae,()=>{xe.value&&Fn()}),onMounted(()=>{L.value.ref.setAttribute("role","textbox"),L.value.ref.setAttribute("aria-autocomplete","list"),L.value.ref.setAttribute("aria-controls","id"),L.value.ref.setAttribute("aria-activedescendant",`${Ne.value}-item-${le.value}`),re=L.value.ref.hasAttribute("readonly")}),n({highlightedIndex:le,activated:he,loading:Ce,inputRef:L,popperRef:j,suggestions:ue,handleSelect:la,handleKeyEnter:kn,focus:Tn,blur:Hn,close:Fn,highlight:ca}),(Zn,Bn)=>(openBlock(),createBlock(unref(ElTooltip),{ref_key:"popperRef",ref:j,visible:unref(xe),placement:Zn.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[unref(V).e("popper"),Zn.popperClass],teleported:Zn.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${unref(V).namespace.value}-zoom-in-top`,persistent:"",role:"listbox",onBeforeShow:qe,onHide:Et},{content:withCtx(()=>[createBaseVNode("div",{ref_key:"regionRef",ref:z,class:normalizeClass([unref(V).b("suggestion"),unref(V).is("loading",unref(Ie))]),style:normalizeStyle({[Zn.fitInputWidth?"width":"minWidth"]:de.value,outline:"none"}),role:"region"},[createVNode(unref(ElScrollbar),{id:unref(Ne),tag:"ul","wrap-class":unref(V).be("suggestion","wrap"),"view-class":unref(V).be("suggestion","list"),role:"listbox"},{default:withCtx(()=>[unref(Ie)?(openBlock(),createElementBlock("li",_hoisted_2$1M,[createVNode(unref(ElIcon),{class:normalizeClass(unref(V).is("loading"))},{default:withCtx(()=>[createVNode(unref(loading_default))]),_:1},8,["class"])])):(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(ue.value,(Wn,da)=>(openBlock(),createElementBlock("li",{id:`${unref(Ne)}-item-${da}`,key:da,class:normalizeClass({highlighted:le.value===da}),role:"option","aria-selected":le.value===da,onClick:ga=>la(Wn)},[renderSlot(Zn.$slots,"default",{item:Wn},()=>[createTextVNode(toDisplayString$1(Wn[Zn.valueKey]),1)])],10,_hoisted_3$12))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:withCtx(()=>[createBaseVNode("div",{ref_key:"listboxRef",ref:ae,class:normalizeClass([unref(V).b(),Zn.$attrs.class]),style:normalizeStyle(unref($e)),role:"combobox","aria-haspopup":"listbox","aria-expanded":unref(xe),"aria-owns":unref(Ne)},[createVNode(unref(ElInput),mergeProps({ref_key:"inputRef",ref:L},unref(y),{clearable:Zn.clearable,disabled:unref($),name:Zn.name,"model-value":Zn.modelValue,onInput:Sn,onChange:Vn,onFocus:Mn,onBlur:$n,onClear:Nn,onKeydown:[Bn[0]||(Bn[0]=withKeys(withModifiers(Wn=>ca(le.value-1),["prevent"]),["up"])),Bn[1]||(Bn[1]=withKeys(withModifiers(Wn=>ca(le.value+1),["prevent"]),["down"])),withKeys(kn,["enter"]),withKeys(Fn,["tab"]),withKeys(jn,["esc"])],onMousedown:hn}),createSlots({_:2},[Zn.$slots.prepend?{name:"prepend",fn:withCtx(()=>[renderSlot(Zn.$slots,"prepend")])}:void 0,Zn.$slots.append?{name:"append",fn:withCtx(()=>[renderSlot(Zn.$slots,"append")])}:void 0,Zn.$slots.prefix?{name:"prefix",fn:withCtx(()=>[renderSlot(Zn.$slots,"prefix")])}:void 0,Zn.$slots.suffix?{name:"suffix",fn:withCtx(()=>[renderSlot(Zn.$slots,"suffix")])}:void 0]),1040,["clearable","disabled","name","model-value","onKeydown"])],14,_hoisted_1$2b)]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var Autocomplete=_export_sfc$1(_sfc_main$3e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]);const ElAutocomplete=withInstall(Autocomplete),avatarProps=buildProps({size:{type:[Number,String],values:componentSizes,default:"",validator:e=>isNumber$1(e)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:iconPropType},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:definePropType(String),default:"cover"}}),avatarEmits={error:e=>e instanceof Event},_hoisted_1$2a=["src","alt","srcset"],__default__$1n=defineComponent({name:"ElAvatar"}),_sfc_main$3d=defineComponent({...__default__$1n,props:avatarProps,emits:avatarEmits,setup(e,{emit:n}){const r=e,g=useNamespace("avatar"),y=ref(!1),k=computed(()=>{const{size:z,icon:j,shape:ae}=r,re=[g.b()];return isString$3(z)&&re.push(g.m(z)),j&&re.push(g.m("icon")),ae&&re.push(g.m(ae)),re}),$=computed(()=>{const{size:z}=r;return isNumber$1(z)?g.cssVarBlock({size:addUnit(z)||""}):void 0}),V=computed(()=>({objectFit:r.fit}));watch(()=>r.src,()=>y.value=!1);function L(z){y.value=!0,n("error",z)}return(z,j)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(k)),style:normalizeStyle(unref($))},[(z.src||z.srcSet)&&!y.value?(openBlock(),createElementBlock("img",{key:0,src:z.src,alt:z.alt,srcset:z.srcSet,style:normalizeStyle(unref(V)),onError:L},null,44,_hoisted_1$2a)):z.icon?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(z.icon)))]),_:1})):renderSlot(z.$slots,"default",{key:2})],6))}});var Avatar=_export_sfc$1(_sfc_main$3d,[["__file","/home/runner/work/element-plus/element-plus/packages/components/avatar/src/avatar.vue"]]);const ElAvatar=withInstall(Avatar),backtopProps={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},backtopEmits={click:e=>e instanceof MouseEvent},useBackTop=(e,n,r)=>{const g=shallowRef(),y=shallowRef(),k=ref(!1),$=()=>{g.value&&(k.value=g.value.scrollTop>=e.visibilityHeight)},V=z=>{var j;(j=g.value)==null||j.scrollTo({top:0,behavior:"smooth"}),n("click",z)},L=useThrottleFn($,300,!0);return useEventListener(y,"scroll",L),onMounted(()=>{var z;y.value=document,g.value=document.documentElement,e.target&&(g.value=(z=document.querySelector(e.target))!=null?z:void 0,g.value||throwError(r,`target does not exist: ${e.target}`),y.value=g.value),$()}),{visible:k,handleClick:V}},COMPONENT_NAME$h="ElBacktop",__default__$1m=defineComponent({name:COMPONENT_NAME$h}),_sfc_main$3c=defineComponent({...__default__$1m,props:backtopProps,emits:backtopEmits,setup(e,{emit:n}){const r=e,g=useNamespace("backtop"),{handleClick:y,visible:k}=useBackTop(r,n,COMPONENT_NAME$h),$=computed(()=>({right:`${r.right}px`,bottom:`${r.bottom}px`}));return(V,L)=>(openBlock(),createBlock(Transition,{name:`${unref(g).namespace.value}-fade-in`},{default:withCtx(()=>[unref(k)?(openBlock(),createElementBlock("div",{key:0,style:normalizeStyle(unref($)),class:normalizeClass(unref(g).b()),onClick:L[0]||(L[0]=withModifiers((...z)=>unref(y)&&unref(y)(...z),["stop"]))},[renderSlot(V.$slots,"default",{},()=>[createVNode(unref(ElIcon),{class:normalizeClass(unref(g).e("icon"))},{default:withCtx(()=>[createVNode(unref(caret_top_default))]),_:1},8,["class"])])],6)):createCommentVNode("v-if",!0)]),_:3},8,["name"]))}});var Backtop=_export_sfc$1(_sfc_main$3c,[["__file","/home/runner/work/element-plus/element-plus/packages/components/backtop/src/backtop.vue"]]);const ElBacktop=withInstall(Backtop),badgeProps=buildProps({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),_hoisted_1$29=["textContent"],__default__$1l=defineComponent({name:"ElBadge"}),_sfc_main$3b=defineComponent({...__default__$1l,props:badgeProps,setup(e,{expose:n}){const r=e,g=useNamespace("badge"),y=computed(()=>r.isDot?"":isNumber$1(r.value)&&isNumber$1(r.max)?r.max<r.value?`${r.max}+`:`${r.value}`:`${r.value}`);return n({content:y}),(k,$)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(g).b())},[renderSlot(k.$slots,"default"),createVNode(Transition,{name:`${unref(g).namespace.value}-zoom-in-center`,persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("sup",{class:normalizeClass([unref(g).e("content"),unref(g).em("content",k.type),unref(g).is("fixed",!!k.$slots.default),unref(g).is("dot",k.isDot)]),textContent:toDisplayString$1(unref(y))},null,10,_hoisted_1$29),[[vShow,!k.hidden&&(unref(y)||k.isDot)]])]),_:1},8,["name"])],2))}});var Badge=_export_sfc$1(_sfc_main$3b,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const ElBadge=withInstall(Badge),breadcrumbKey=Symbol("breadcrumbKey"),breadcrumbProps=buildProps({separator:{type:String,default:"/"},separatorIcon:{type:iconPropType}}),__default__$1k=defineComponent({name:"ElBreadcrumb"}),_sfc_main$3a=defineComponent({...__default__$1k,props:breadcrumbProps,setup(e){const n=e,r=useNamespace("breadcrumb"),g=ref();return provide(breadcrumbKey,n),onMounted(()=>{const y=g.value.querySelectorAll(`.${r.e("item")}`);y.length&&y[y.length-1].setAttribute("aria-current","page")}),(y,k)=>(openBlock(),createElementBlock("div",{ref_key:"breadcrumb",ref:g,class:normalizeClass(unref(r).b()),"aria-label":"Breadcrumb",role:"navigation"},[renderSlot(y.$slots,"default")],2))}});var Breadcrumb=_export_sfc$1(_sfc_main$3a,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb.vue"]]);const breadcrumbItemProps=buildProps({to:{type:definePropType([String,Object]),default:""},replace:{type:Boolean,default:!1}}),__default__$1j=defineComponent({name:"ElBreadcrumbItem"}),_sfc_main$39=defineComponent({...__default__$1j,props:breadcrumbItemProps,setup(e){const n=e,r=getCurrentInstance(),g=inject(breadcrumbKey,void 0),y=useNamespace("breadcrumb"),k=r.appContext.config.globalProperties.$router,$=ref(),V=()=>{!n.to||!k||(n.replace?k.replace(n.to):k.push(n.to))};return(L,z)=>{var j,ae;return openBlock(),createElementBlock("span",{class:normalizeClass(unref(y).e("item"))},[createBaseVNode("span",{ref_key:"link",ref:$,class:normalizeClass([unref(y).e("inner"),unref(y).is("link",!!L.to)]),role:"link",onClick:V},[renderSlot(L.$slots,"default")],2),(j=unref(g))!=null&&j.separatorIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(y).e("separator"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(g).separatorIcon)))]),_:1},8,["class"])):(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(y).e("separator")),role:"presentation"},toDisplayString$1((ae=unref(g))==null?void 0:ae.separator),3))],2)}}});var BreadcrumbItem=_export_sfc$1(_sfc_main$39,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb-item.vue"]]);const ElBreadcrumb=withInstall(Breadcrumb,{BreadcrumbItem}),ElBreadcrumbItem=withNoopInstall(BreadcrumbItem),buttonGroupContextKey=Symbol("buttonGroupContextKey"),useButton=(e,n)=>{useDeprecated({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},computed(()=>e.type==="text"));const r=inject(buttonGroupContextKey,void 0),g=useGlobalConfig("button"),{form:y}=useFormItem(),k=useFormSize(computed(()=>r?.size)),$=useFormDisabled(),V=ref(),L=useSlots(),z=computed(()=>e.type||r?.type||""),j=computed(()=>{var ue,le,de;return(de=(le=e.autoInsertSpace)!=null?le:(ue=g.value)==null?void 0:ue.autoInsertSpace)!=null?de:!1}),ae=computed(()=>e.tag==="button"?{ariaDisabled:$.value||e.loading,disabled:$.value||e.loading,autofocus:e.autofocus,type:e.nativeType}:{}),re=computed(()=>{var ue;const le=(ue=L.default)==null?void 0:ue.call(L);if(j.value&&le?.length===1){const de=le[0];if(de?.type===Text$2){const he=de.children;return/^\p{Unified_Ideograph}{2}$/u.test(he.trim())}}return!1});return{_disabled:$,_size:k,_type:z,_ref:V,_props:ae,shouldAddSpace:re,handleClick:ue=>{e.nativeType==="reset"&&y?.resetFields(),n("click",ue)}}},buttonTypes=["default","primary","success","warning","info","danger","text",""],buttonNativeTypes=["button","submit","reset"],buttonProps=buildProps({size:useSizeProp,disabled:Boolean,type:{type:String,values:buttonTypes,default:""},icon:{type:iconPropType},nativeType:{type:String,values:buttonNativeTypes,default:"button"},loading:Boolean,loadingIcon:{type:iconPropType,default:()=>loading_default},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:definePropType([String,Object]),default:"button"}}),buttonEmits={click:e=>e instanceof MouseEvent};function bound01$1(e,n){isOnePointZero$1(e)&&(e="100%");var r=isPercentage$1(e);return e=n===360?e:Math.min(n,Math.max(0,parseFloat(e))),r&&(e=parseInt(String(e*n),10)/100),Math.abs(e-n)<1e-6?1:(n===360?e=(e<0?e%n+n:e%n)/parseFloat(String(n)):e=e%n/parseFloat(String(n)),e)}function clamp01(e){return Math.min(1,Math.max(0,e))}function isOnePointZero$1(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function isPercentage$1(e){return typeof e=="string"&&e.indexOf("%")!==-1}function boundAlpha(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function convertToPercentage(e){return e<=1?"".concat(Number(e)*100,"%"):e}function pad2(e){return e.length===1?"0"+e:String(e)}function rgbToRgb(e,n,r){return{r:bound01$1(e,255)*255,g:bound01$1(n,255)*255,b:bound01$1(r,255)*255}}function rgbToHsl(e,n,r){e=bound01$1(e,255),n=bound01$1(n,255),r=bound01$1(r,255);var g=Math.max(e,n,r),y=Math.min(e,n,r),k=0,$=0,V=(g+y)/2;if(g===y)$=0,k=0;else{var L=g-y;switch($=V>.5?L/(2-g-y):L/(g+y),g){case e:k=(n-r)/L+(n<r?6:0);break;case n:k=(r-e)/L+2;break;case r:k=(e-n)/L+4;break}k/=6}return{h:k,s:$,l:V}}function hue2rgb(e,n,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(n-e)*(6*r):r<1/2?n:r<2/3?e+(n-e)*(2/3-r)*6:e}function hslToRgb(e,n,r){var g,y,k;if(e=bound01$1(e,360),n=bound01$1(n,100),r=bound01$1(r,100),n===0)y=r,k=r,g=r;else{var $=r<.5?r*(1+n):r+n-r*n,V=2*r-$;g=hue2rgb(V,$,e+1/3),y=hue2rgb(V,$,e),k=hue2rgb(V,$,e-1/3)}return{r:g*255,g:y*255,b:k*255}}function rgbToHsv(e,n,r){e=bound01$1(e,255),n=bound01$1(n,255),r=bound01$1(r,255);var g=Math.max(e,n,r),y=Math.min(e,n,r),k=0,$=g,V=g-y,L=g===0?0:V/g;if(g===y)k=0;else{switch(g){case e:k=(n-r)/V+(n<r?6:0);break;case n:k=(r-e)/V+2;break;case r:k=(e-n)/V+4;break}k/=6}return{h:k,s:L,v:$}}function hsvToRgb(e,n,r){e=bound01$1(e,360)*6,n=bound01$1(n,100),r=bound01$1(r,100);var g=Math.floor(e),y=e-g,k=r*(1-n),$=r*(1-y*n),V=r*(1-(1-y)*n),L=g%6,z=[r,$,k,k,V,r][L],j=[V,r,r,$,k,k][L],ae=[k,k,V,r,r,$][L];return{r:z*255,g:j*255,b:ae*255}}function rgbToHex(e,n,r,g){var y=[pad2(Math.round(e).toString(16)),pad2(Math.round(n).toString(16)),pad2(Math.round(r).toString(16))];return g&&y[0].startsWith(y[0].charAt(1))&&y[1].startsWith(y[1].charAt(1))&&y[2].startsWith(y[2].charAt(1))?y[0].charAt(0)+y[1].charAt(0)+y[2].charAt(0):y.join("")}function rgbaToHex(e,n,r,g,y){var k=[pad2(Math.round(e).toString(16)),pad2(Math.round(n).toString(16)),pad2(Math.round(r).toString(16)),pad2(convertDecimalToHex(g))];return y&&k[0].startsWith(k[0].charAt(1))&&k[1].startsWith(k[1].charAt(1))&&k[2].startsWith(k[2].charAt(1))&&k[3].startsWith(k[3].charAt(1))?k[0].charAt(0)+k[1].charAt(0)+k[2].charAt(0)+k[3].charAt(0):k.join("")}function convertDecimalToHex(e){return Math.round(parseFloat(e)*255).toString(16)}function convertHexToDecimal(e){return parseIntFromHex(e)/255}function parseIntFromHex(e){return parseInt(e,16)}function numberInputToObject(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function inputToRGB(e){var n={r:0,g:0,b:0},r=1,g=null,y=null,k=null,$=!1,V=!1;return typeof e=="string"&&(e=stringInputToObject(e)),typeof e=="object"&&(isValidCSSUnit(e.r)&&isValidCSSUnit(e.g)&&isValidCSSUnit(e.b)?(n=rgbToRgb(e.r,e.g,e.b),$=!0,V=String(e.r).substr(-1)==="%"?"prgb":"rgb"):isValidCSSUnit(e.h)&&isValidCSSUnit(e.s)&&isValidCSSUnit(e.v)?(g=convertToPercentage(e.s),y=convertToPercentage(e.v),n=hsvToRgb(e.h,g,y),$=!0,V="hsv"):isValidCSSUnit(e.h)&&isValidCSSUnit(e.s)&&isValidCSSUnit(e.l)&&(g=convertToPercentage(e.s),k=convertToPercentage(e.l),n=hslToRgb(e.h,g,k),$=!0,V="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(r=e.a)),r=boundAlpha(r),{ok:$,format:e.format||V,r:Math.min(255,Math.max(n.r,0)),g:Math.min(255,Math.max(n.g,0)),b:Math.min(255,Math.max(n.b,0)),a:r}}var CSS_INTEGER="[-\\+]?\\d+%?",CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?",CSS_UNIT="(?:".concat(CSS_NUMBER,")|(?:").concat(CSS_INTEGER,")"),PERMISSIVE_MATCH3="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),PERMISSIVE_MATCH4="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),matchers={CSS_UNIT:new RegExp(CSS_UNIT),rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function stringInputToObject(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var n=!1;if(names[e])e=names[e],n=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r=matchers.rgb.exec(e);return r?{r:r[1],g:r[2],b:r[3]}:(r=matchers.rgba.exec(e),r?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=matchers.hsl.exec(e),r?{h:r[1],s:r[2],l:r[3]}:(r=matchers.hsla.exec(e),r?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=matchers.hsv.exec(e),r?{h:r[1],s:r[2],v:r[3]}:(r=matchers.hsva.exec(e),r?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=matchers.hex8.exec(e),r?{r:parseIntFromHex(r[1]),g:parseIntFromHex(r[2]),b:parseIntFromHex(r[3]),a:convertHexToDecimal(r[4]),format:n?"name":"hex8"}:(r=matchers.hex6.exec(e),r?{r:parseIntFromHex(r[1]),g:parseIntFromHex(r[2]),b:parseIntFromHex(r[3]),format:n?"name":"hex"}:(r=matchers.hex4.exec(e),r?{r:parseIntFromHex(r[1]+r[1]),g:parseIntFromHex(r[2]+r[2]),b:parseIntFromHex(r[3]+r[3]),a:convertHexToDecimal(r[4]+r[4]),format:n?"name":"hex8"}:(r=matchers.hex3.exec(e),r?{r:parseIntFromHex(r[1]+r[1]),g:parseIntFromHex(r[2]+r[2]),b:parseIntFromHex(r[3]+r[3]),format:n?"name":"hex"}:!1)))))))))}function isValidCSSUnit(e){return!!matchers.CSS_UNIT.exec(String(e))}var TinyColor=function(){function e(n,r){n===void 0&&(n=""),r===void 0&&(r={});var g;if(n instanceof e)return n;typeof n=="number"&&(n=numberInputToObject(n)),this.originalInput=n;var y=inputToRGB(n);this.originalInput=n,this.r=y.r,this.g=y.g,this.b=y.b,this.a=y.a,this.roundA=Math.round(100*this.a)/100,this.format=(g=r.format)!==null&&g!==void 0?g:y.format,this.gradientType=r.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=y.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var n=this.toRgb();return(n.r*299+n.g*587+n.b*114)/1e3},e.prototype.getLuminance=function(){var n=this.toRgb(),r,g,y,k=n.r/255,$=n.g/255,V=n.b/255;return k<=.03928?r=k/12.92:r=Math.pow((k+.055)/1.055,2.4),$<=.03928?g=$/12.92:g=Math.pow(($+.055)/1.055,2.4),V<=.03928?y=V/12.92:y=Math.pow((V+.055)/1.055,2.4),.2126*r+.7152*g+.0722*y},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(n){return this.a=boundAlpha(n),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var n=this.toHsl().s;return n===0},e.prototype.toHsv=function(){var n=rgbToHsv(this.r,this.g,this.b);return{h:n.h*360,s:n.s,v:n.v,a:this.a}},e.prototype.toHsvString=function(){var n=rgbToHsv(this.r,this.g,this.b),r=Math.round(n.h*360),g=Math.round(n.s*100),y=Math.round(n.v*100);return this.a===1?"hsv(".concat(r,", ").concat(g,"%, ").concat(y,"%)"):"hsva(".concat(r,", ").concat(g,"%, ").concat(y,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var n=rgbToHsl(this.r,this.g,this.b);return{h:n.h*360,s:n.s,l:n.l,a:this.a}},e.prototype.toHslString=function(){var n=rgbToHsl(this.r,this.g,this.b),r=Math.round(n.h*360),g=Math.round(n.s*100),y=Math.round(n.l*100);return this.a===1?"hsl(".concat(r,", ").concat(g,"%, ").concat(y,"%)"):"hsla(".concat(r,", ").concat(g,"%, ").concat(y,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(n){return n===void 0&&(n=!1),rgbToHex(this.r,this.g,this.b,n)},e.prototype.toHexString=function(n){return n===void 0&&(n=!1),"#"+this.toHex(n)},e.prototype.toHex8=function(n){return n===void 0&&(n=!1),rgbaToHex(this.r,this.g,this.b,this.a,n)},e.prototype.toHex8String=function(n){return n===void 0&&(n=!1),"#"+this.toHex8(n)},e.prototype.toHexShortString=function(n){return n===void 0&&(n=!1),this.a===1?this.toHexString(n):this.toHex8String(n)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var n=Math.round(this.r),r=Math.round(this.g),g=Math.round(this.b);return this.a===1?"rgb(".concat(n,", ").concat(r,", ").concat(g,")"):"rgba(".concat(n,", ").concat(r,", ").concat(g,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var n=function(r){return"".concat(Math.round(bound01$1(r,255)*100),"%")};return{r:n(this.r),g:n(this.g),b:n(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var n=function(r){return Math.round(bound01$1(r,255)*100)};return this.a===1?"rgb(".concat(n(this.r),"%, ").concat(n(this.g),"%, ").concat(n(this.b),"%)"):"rgba(".concat(n(this.r),"%, ").concat(n(this.g),"%, ").concat(n(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var n="#"+rgbToHex(this.r,this.g,this.b,!1),r=0,g=Object.entries(names);r<g.length;r++){var y=g[r],k=y[0],$=y[1];if(n===$)return k}return!1},e.prototype.toString=function(n){var r=!!n;n=n??this.format;var g=!1,y=this.a<1&&this.a>=0,k=!r&&y&&(n.startsWith("hex")||n==="name");return k?n==="name"&&this.a===0?this.toName():this.toRgbString():(n==="rgb"&&(g=this.toRgbString()),n==="prgb"&&(g=this.toPercentageRgbString()),(n==="hex"||n==="hex6")&&(g=this.toHexString()),n==="hex3"&&(g=this.toHexString(!0)),n==="hex4"&&(g=this.toHex8String(!0)),n==="hex8"&&(g=this.toHex8String()),n==="name"&&(g=this.toName()),n==="hsl"&&(g=this.toHslString()),n==="hsv"&&(g=this.toHsvString()),g||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(n){n===void 0&&(n=10);var r=this.toHsl();return r.l+=n/100,r.l=clamp01(r.l),new e(r)},e.prototype.brighten=function(n){n===void 0&&(n=10);var r=this.toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(n/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(n/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(n/100)))),new e(r)},e.prototype.darken=function(n){n===void 0&&(n=10);var r=this.toHsl();return r.l-=n/100,r.l=clamp01(r.l),new e(r)},e.prototype.tint=function(n){return n===void 0&&(n=10),this.mix("white",n)},e.prototype.shade=function(n){return n===void 0&&(n=10),this.mix("black",n)},e.prototype.desaturate=function(n){n===void 0&&(n=10);var r=this.toHsl();return r.s-=n/100,r.s=clamp01(r.s),new e(r)},e.prototype.saturate=function(n){n===void 0&&(n=10);var r=this.toHsl();return r.s+=n/100,r.s=clamp01(r.s),new e(r)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(n){var r=this.toHsl(),g=(r.h+n)%360;return r.h=g<0?360+g:g,new e(r)},e.prototype.mix=function(n,r){r===void 0&&(r=50);var g=this.toRgb(),y=new e(n).toRgb(),k=r/100,$={r:(y.r-g.r)*k+g.r,g:(y.g-g.g)*k+g.g,b:(y.b-g.b)*k+g.b,a:(y.a-g.a)*k+g.a};return new e($)},e.prototype.analogous=function(n,r){n===void 0&&(n=6),r===void 0&&(r=30);var g=this.toHsl(),y=360/r,k=[this];for(g.h=(g.h-(y*n>>1)+720)%360;--n;)g.h=(g.h+y)%360,k.push(new e(g));return k},e.prototype.complement=function(){var n=this.toHsl();return n.h=(n.h+180)%360,new e(n)},e.prototype.monochromatic=function(n){n===void 0&&(n=6);for(var r=this.toHsv(),g=r.h,y=r.s,k=r.v,$=[],V=1/n;n--;)$.push(new e({h:g,s:y,v:k})),k=(k+V)%1;return $},e.prototype.splitcomplement=function(){var n=this.toHsl(),r=n.h;return[this,new e({h:(r+72)%360,s:n.s,l:n.l}),new e({h:(r+216)%360,s:n.s,l:n.l})]},e.prototype.onBackground=function(n){var r=this.toRgb(),g=new e(n).toRgb(),y=r.a+g.a*(1-r.a);return new e({r:(r.r*r.a+g.r*g.a*(1-r.a))/y,g:(r.g*r.a+g.g*g.a*(1-r.a))/y,b:(r.b*r.a+g.b*g.a*(1-r.a))/y,a:y})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(n){for(var r=this.toHsl(),g=r.h,y=[this],k=360/n,$=1;$<n;$++)y.push(new e({h:(g+$*k)%360,s:r.s,l:r.l}));return y},e.prototype.equals=function(n){return this.toRgbString()===new e(n).toRgbString()},e}();function darken(e,n=20){return e.mix("#141414",n).toString()}function useButtonCustomStyle(e){const n=useFormDisabled(),r=useNamespace("button");return computed(()=>{let g={};const y=e.color;if(y){const k=new TinyColor(y),$=e.dark?k.tint(20).toString():darken(k,20);if(e.plain)g=r.cssVarBlock({"bg-color":e.dark?darken(k,90):k.tint(90).toString(),"text-color":y,"border-color":e.dark?darken(k,50):k.tint(50).toString(),"hover-text-color":`var(${r.cssVarName("color-white")})`,"hover-bg-color":y,"hover-border-color":y,"active-bg-color":$,"active-text-color":`var(${r.cssVarName("color-white")})`,"active-border-color":$}),n.value&&(g[r.cssVarBlockName("disabled-bg-color")]=e.dark?darken(k,90):k.tint(90).toString(),g[r.cssVarBlockName("disabled-text-color")]=e.dark?darken(k,50):k.tint(50).toString(),g[r.cssVarBlockName("disabled-border-color")]=e.dark?darken(k,80):k.tint(80).toString());else{const V=e.dark?darken(k,30):k.tint(30).toString(),L=k.isDark()?`var(${r.cssVarName("color-white")})`:`var(${r.cssVarName("color-black")})`;if(g=r.cssVarBlock({"bg-color":y,"text-color":L,"border-color":y,"hover-bg-color":V,"hover-text-color":L,"hover-border-color":V,"active-bg-color":$,"active-border-color":$}),n.value){const z=e.dark?darken(k,50):k.tint(50).toString();g[r.cssVarBlockName("disabled-bg-color")]=z,g[r.cssVarBlockName("disabled-text-color")]=e.dark?"rgba(255, 255, 255, 0.5)":`var(${r.cssVarName("color-white")})`,g[r.cssVarBlockName("disabled-border-color")]=z}}}return g})}const __default__$1i=defineComponent({name:"ElButton"}),_sfc_main$38=defineComponent({...__default__$1i,props:buttonProps,emits:buttonEmits,setup(e,{expose:n,emit:r}){const g=e,y=useButtonCustomStyle(g),k=useNamespace("button"),{_ref:$,_size:V,_type:L,_disabled:z,_props:j,shouldAddSpace:ae,handleClick:re}=useButton(g,r);return n({ref:$,size:V,type:L,disabled:z,shouldAddSpace:ae}),(oe,ue)=>(openBlock(),createBlock(resolveDynamicComponent(oe.tag),mergeProps({ref_key:"_ref",ref:$},unref(j),{class:[unref(k).b(),unref(k).m(unref(L)),unref(k).m(unref(V)),unref(k).is("disabled",unref(z)),unref(k).is("loading",oe.loading),unref(k).is("plain",oe.plain),unref(k).is("round",oe.round),unref(k).is("circle",oe.circle),unref(k).is("text",oe.text),unref(k).is("link",oe.link),unref(k).is("has-bg",oe.bg)],style:unref(y),onClick:unref(re)}),{default:withCtx(()=>[oe.loading?(openBlock(),createElementBlock(Fragment,{key:0},[oe.$slots.loading?renderSlot(oe.$slots,"loading",{key:0}):(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass(unref(k).is("loading"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(oe.loadingIcon)))]),_:1},8,["class"]))],64)):oe.icon||oe.$slots.icon?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[oe.icon?(openBlock(),createBlock(resolveDynamicComponent(oe.icon),{key:0})):renderSlot(oe.$slots,"icon",{key:1})]),_:3})):createCommentVNode("v-if",!0),oe.$slots.default?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass({[unref(k).em("text","expand")]:unref(ae)})},[renderSlot(oe.$slots,"default")],2)):createCommentVNode("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var Button=_export_sfc$1(_sfc_main$38,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button.vue"]]);const buttonGroupProps={size:buttonProps.size,type:buttonProps.type},__default__$1h=defineComponent({name:"ElButtonGroup"}),_sfc_main$37=defineComponent({...__default__$1h,props:buttonGroupProps,setup(e){const n=e;provide(buttonGroupContextKey,reactive({size:toRef(n,"size"),type:toRef(n,"type")}));const r=useNamespace("button");return(g,y)=>(openBlock(),createElementBlock("div",{class:normalizeClass(`${unref(r).b("group")}`)},[renderSlot(g.$slots,"default")],2))}});var ButtonGroup=_export_sfc$1(_sfc_main$37,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button-group.vue"]]);const ElButton=withInstall(Button,{ButtonGroup}),ElButtonGroup$1=withNoopInstall(ButtonGroup);var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var r=function g(){return this instanceof g?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(g){var y=Object.getOwnPropertyDescriptor(e,g);Object.defineProperty(r,g,y.get?y:{enumerable:!0,get:function(){return e[g]}})}),r}var dayjs_min={exports:{}};(function(e,n){(function(r,g){e.exports=g()})(commonjsGlobal$1,function(){var r=1e3,g=6e4,y=36e5,k="millisecond",$="second",V="minute",L="hour",z="day",j="week",ae="month",re="quarter",oe="year",ue="date",le="Invalid Date",de=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,he=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_e={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Sn){var hn=["th","st","nd","rd"],Vn=Sn%100;return"["+Sn+(hn[(Vn-20)%10]||hn[Vn]||hn[0])+"]"}},Ce=function(Sn,hn,Vn){var Mn=String(Sn);return!Mn||Mn.length>=hn?Sn:""+Array(hn+1-Mn.length).join(Vn)+Sn},Ne={s:Ce,z:function(Sn){var hn=-Sn.utcOffset(),Vn=Math.abs(hn),Mn=Math.floor(Vn/60),$n=Vn%60;return(hn<=0?"+":"-")+Ce(Mn,2,"0")+":"+Ce($n,2,"0")},m:function Sn(hn,Vn){if(hn.date()<Vn.date())return-Sn(Vn,hn);var Mn=12*(Vn.year()-hn.year())+(Vn.month()-hn.month()),$n=hn.clone().add(Mn,ae),Nn=Vn-$n<0,kn=hn.clone().add(Mn+(Nn?-1:1),ae);return+(-(Mn+(Vn-$n)/(Nn?$n-kn:kn-$n))||0)},a:function(Sn){return Sn<0?Math.ceil(Sn)||0:Math.floor(Sn)},p:function(Sn){return{M:ae,y:oe,w:j,d:z,D:ue,h:L,m:V,s:$,ms:k,Q:re}[Sn]||String(Sn||"").toLowerCase().replace(/s$/,"")},u:function(Sn){return Sn===void 0}},$e="en",xe={};xe[$e]=_e;var Ie=function(Sn){return Sn instanceof _n},ze=function Sn(hn,Vn,Mn){var $n;if(!hn)return $e;if(typeof hn=="string"){var Nn=hn.toLowerCase();xe[Nn]&&($n=Nn),Vn&&(xe[Nn]=Vn,$n=Nn);var kn=hn.split("-");if(!$n&&kn.length>1)return Sn(kn[0])}else{var jn=hn.name;xe[jn]=hn,$n=jn}return!Mn&&$n&&($e=$n),$n||!Mn&&$e},qe=function(Sn,hn){if(Ie(Sn))return Sn.clone();var Vn=typeof hn=="object"?hn:{};return Vn.date=Sn,Vn.args=arguments,new _n(Vn)},Et=Ne;Et.l=ze,Et.i=Ie,Et.w=function(Sn,hn){return qe(Sn,{locale:hn.$L,utc:hn.$u,x:hn.$x,$offset:hn.$offset})};var _n=function(){function Sn(Vn){this.$L=ze(Vn.locale,null,!0),this.parse(Vn)}var hn=Sn.prototype;return hn.parse=function(Vn){this.$d=function(Mn){var $n=Mn.date,Nn=Mn.utc;if($n===null)return new Date(NaN);if(Et.u($n))return new Date;if($n instanceof Date)return new Date($n);if(typeof $n=="string"&&!/Z$/i.test($n)){var kn=$n.match(de);if(kn){var jn=kn[2]-1||0,Fn=(kn[7]||"0").substring(0,3);return Nn?new Date(Date.UTC(kn[1],jn,kn[3]||1,kn[4]||0,kn[5]||0,kn[6]||0,Fn)):new Date(kn[1],jn,kn[3]||1,kn[4]||0,kn[5]||0,kn[6]||0,Fn)}}return new Date($n)}(Vn),this.$x=Vn.x||{},this.init()},hn.init=function(){var Vn=this.$d;this.$y=Vn.getFullYear(),this.$M=Vn.getMonth(),this.$D=Vn.getDate(),this.$W=Vn.getDay(),this.$H=Vn.getHours(),this.$m=Vn.getMinutes(),this.$s=Vn.getSeconds(),this.$ms=Vn.getMilliseconds()},hn.$utils=function(){return Et},hn.isValid=function(){return this.$d.toString()!==le},hn.isSame=function(Vn,Mn){var $n=qe(Vn);return this.startOf(Mn)<=$n&&$n<=this.endOf(Mn)},hn.isAfter=function(Vn,Mn){return qe(Vn)<this.startOf(Mn)},hn.isBefore=function(Vn,Mn){return this.endOf(Mn)<qe(Vn)},hn.$g=function(Vn,Mn,$n){return Et.u(Vn)?this[Mn]:this.set($n,Vn)},hn.unix=function(){return Math.floor(this.valueOf()/1e3)},hn.valueOf=function(){return this.$d.getTime()},hn.startOf=function(Vn,Mn){var $n=this,Nn=!!Et.u(Mn)||Mn,kn=Et.p(Vn),jn=function(Wn,da){var ga=Et.w($n.$u?Date.UTC($n.$y,da,Wn):new Date($n.$y,da,Wn),$n);return Nn?ga:ga.endOf(z)},Fn=function(Wn,da){return Et.w($n.toDate()[Wn].apply($n.toDate("s"),(Nn?[0,0,0,0]:[23,59,59,999]).slice(da)),$n)},Tn=this.$W,Hn=this.$M,la=this.$D,ca="set"+(this.$u?"UTC":"");switch(kn){case oe:return Nn?jn(1,0):jn(31,11);case ae:return Nn?jn(1,Hn):jn(0,Hn+1);case j:var Zn=this.$locale().weekStart||0,Bn=(Tn<Zn?Tn+7:Tn)-Zn;return jn(Nn?la-Bn:la+(6-Bn),Hn);case z:case ue:return Fn(ca+"Hours",0);case L:return Fn(ca+"Minutes",1);case V:return Fn(ca+"Seconds",2);case $:return Fn(ca+"Milliseconds",3);default:return this.clone()}},hn.endOf=function(Vn){return this.startOf(Vn,!1)},hn.$set=function(Vn,Mn){var $n,Nn=Et.p(Vn),kn="set"+(this.$u?"UTC":""),jn=($n={},$n[z]=kn+"Date",$n[ue]=kn+"Date",$n[ae]=kn+"Month",$n[oe]=kn+"FullYear",$n[L]=kn+"Hours",$n[V]=kn+"Minutes",$n[$]=kn+"Seconds",$n[k]=kn+"Milliseconds",$n)[Nn],Fn=Nn===z?this.$D+(Mn-this.$W):Mn;if(Nn===ae||Nn===oe){var Tn=this.clone().set(ue,1);Tn.$d[jn](Fn),Tn.init(),this.$d=Tn.set(ue,Math.min(this.$D,Tn.daysInMonth())).$d}else jn&&this.$d[jn](Fn);return this.init(),this},hn.set=function(Vn,Mn){return this.clone().$set(Vn,Mn)},hn.get=function(Vn){return this[Et.p(Vn)]()},hn.add=function(Vn,Mn){var $n,Nn=this;Vn=Number(Vn);var kn=Et.p(Mn),jn=function(Hn){var la=qe(Nn);return Et.w(la.date(la.date()+Math.round(Hn*Vn)),Nn)};if(kn===ae)return this.set(ae,this.$M+Vn);if(kn===oe)return this.set(oe,this.$y+Vn);if(kn===z)return jn(1);if(kn===j)return jn(7);var Fn=($n={},$n[V]=g,$n[L]=y,$n[$]=r,$n)[kn]||1,Tn=this.$d.getTime()+Vn*Fn;return Et.w(Tn,this)},hn.subtract=function(Vn,Mn){return this.add(-1*Vn,Mn)},hn.format=function(Vn){var Mn=this,$n=this.$locale();if(!this.isValid())return $n.invalidDate||le;var Nn=Vn||"YYYY-MM-DDTHH:mm:ssZ",kn=Et.z(this),jn=this.$H,Fn=this.$m,Tn=this.$M,Hn=$n.weekdays,la=$n.months,ca=$n.meridiem,Zn=function(da,ga,Ca,ra){return da&&(da[ga]||da(Mn,Nn))||Ca[ga].slice(0,ra)},Bn=function(da){return Et.s(jn%12||12,da,"0")},Wn=ca||function(da,ga,Ca){var ra=da<12?"AM":"PM";return Ca?ra.toLowerCase():ra};return Nn.replace(he,function(da,ga){return ga||function(Ca){switch(Ca){case"YY":return String(Mn.$y).slice(-2);case"YYYY":return Et.s(Mn.$y,4,"0");case"M":return Tn+1;case"MM":return Et.s(Tn+1,2,"0");case"MMM":return Zn($n.monthsShort,Tn,la,3);case"MMMM":return Zn(la,Tn);case"D":return Mn.$D;case"DD":return Et.s(Mn.$D,2,"0");case"d":return String(Mn.$W);case"dd":return Zn($n.weekdaysMin,Mn.$W,Hn,2);case"ddd":return Zn($n.weekdaysShort,Mn.$W,Hn,3);case"dddd":return Hn[Mn.$W];case"H":return String(jn);case"HH":return Et.s(jn,2,"0");case"h":return Bn(1);case"hh":return Bn(2);case"a":return Wn(jn,Fn,!0);case"A":return Wn(jn,Fn,!1);case"m":return String(Fn);case"mm":return Et.s(Fn,2,"0");case"s":return String(Mn.$s);case"ss":return Et.s(Mn.$s,2,"0");case"SSS":return Et.s(Mn.$ms,3,"0");case"Z":return kn}return null}(da)||kn.replace(":","")})},hn.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},hn.diff=function(Vn,Mn,$n){var Nn,kn=this,jn=Et.p(Mn),Fn=qe(Vn),Tn=(Fn.utcOffset()-this.utcOffset())*g,Hn=this-Fn,la=function(){return Et.m(kn,Fn)};switch(jn){case oe:Nn=la()/12;break;case ae:Nn=la();break;case re:Nn=la()/3;break;case j:Nn=(Hn-Tn)/6048e5;break;case z:Nn=(Hn-Tn)/864e5;break;case L:Nn=Hn/y;break;case V:Nn=Hn/g;break;case $:Nn=Hn/r;break;default:Nn=Hn}return $n?Nn:Et.a(Nn)},hn.daysInMonth=function(){return this.endOf(ae).$D},hn.$locale=function(){return xe[this.$L]},hn.locale=function(Vn,Mn){if(!Vn)return this.$L;var $n=this.clone(),Nn=ze(Vn,Mn,!0);return Nn&&($n.$L=Nn),$n},hn.clone=function(){return Et.w(this.$d,this)},hn.toDate=function(){return new Date(this.valueOf())},hn.toJSON=function(){return this.isValid()?this.toISOString():null},hn.toISOString=function(){return this.$d.toISOString()},hn.toString=function(){return this.$d.toUTCString()},Sn}(),Dt=_n.prototype;return qe.prototype=Dt,[["$ms",k],["$s",$],["$m",V],["$H",L],["$W",z],["$M",ae],["$y",oe],["$D",ue]].forEach(function(Sn){Dt[Sn[1]]=function(hn){return this.$g(hn,Sn[0],Sn[1])}}),qe.extend=function(Sn,hn){return Sn.$i||(Sn(hn,_n,qe),Sn.$i=!0),qe},qe.locale=ze,qe.isDayjs=Ie,qe.unix=function(Sn){return qe(1e3*Sn)},qe.en=xe[$e],qe.Ls=xe,qe.p={},qe})})(dayjs_min);var dayjs_minExports=dayjs_min.exports;const dayjs=getDefaultExportFromCjs(dayjs_minExports);var customParseFormat$1={exports:{}};(function(e,n){(function(r,g){e.exports=g()})(commonjsGlobal$1,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},g=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,y=/\d\d/,k=/\d\d?/,$=/\d*[^-_:/,()\s\d]+/,V={},L=function(le){return(le=+le)+(le>68?1900:2e3)},z=function(le){return function(de){this[le]=+de}},j=[/[+-]\d\d:?(\d\d)?|Z/,function(le){(this.zone||(this.zone={})).offset=function(de){if(!de||de==="Z")return 0;var he=de.match(/([+-]|\d\d)/g),_e=60*he[1]+(+he[2]||0);return _e===0?0:he[0]==="+"?-_e:_e}(le)}],ae=function(le){var de=V[le];return de&&(de.indexOf?de:de.s.concat(de.f))},re=function(le,de){var he,_e=V.meridiem;if(_e){for(var Ce=1;Ce<=24;Ce+=1)if(le.indexOf(_e(Ce,0,de))>-1){he=Ce>12;break}}else he=le===(de?"pm":"PM");return he},oe={A:[$,function(le){this.afternoon=re(le,!1)}],a:[$,function(le){this.afternoon=re(le,!0)}],S:[/\d/,function(le){this.milliseconds=100*+le}],SS:[y,function(le){this.milliseconds=10*+le}],SSS:[/\d{3}/,function(le){this.milliseconds=+le}],s:[k,z("seconds")],ss:[k,z("seconds")],m:[k,z("minutes")],mm:[k,z("minutes")],H:[k,z("hours")],h:[k,z("hours")],HH:[k,z("hours")],hh:[k,z("hours")],D:[k,z("day")],DD:[y,z("day")],Do:[$,function(le){var de=V.ordinal,he=le.match(/\d+/);if(this.day=he[0],de)for(var _e=1;_e<=31;_e+=1)de(_e).replace(/\[|\]/g,"")===le&&(this.day=_e)}],M:[k,z("month")],MM:[y,z("month")],MMM:[$,function(le){var de=ae("months"),he=(ae("monthsShort")||de.map(function(_e){return _e.slice(0,3)})).indexOf(le)+1;if(he<1)throw new Error;this.month=he%12||he}],MMMM:[$,function(le){var de=ae("months").indexOf(le)+1;if(de<1)throw new Error;this.month=de%12||de}],Y:[/[+-]?\d+/,z("year")],YY:[y,function(le){this.year=L(le)}],YYYY:[/\d{4}/,z("year")],Z:j,ZZ:j};function ue(le){var de,he;de=le,he=V&&V.formats;for(var _e=(le=de.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(qe,Et,_n){var Dt=_n&&_n.toUpperCase();return Et||he[_n]||r[_n]||he[Dt].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Sn,hn,Vn){return hn||Vn.slice(1)})})).match(g),Ce=_e.length,Ne=0;Ne<Ce;Ne+=1){var $e=_e[Ne],xe=oe[$e],Ie=xe&&xe[0],ze=xe&&xe[1];_e[Ne]=ze?{regex:Ie,parser:ze}:$e.replace(/^\[|\]$/g,"")}return function(qe){for(var Et={},_n=0,Dt=0;_n<Ce;_n+=1){var Sn=_e[_n];if(typeof Sn=="string")Dt+=Sn.length;else{var hn=Sn.regex,Vn=Sn.parser,Mn=qe.slice(Dt),$n=hn.exec(Mn)[0];Vn.call(Et,$n),qe=qe.replace($n,"")}}return function(Nn){var kn=Nn.afternoon;if(kn!==void 0){var jn=Nn.hours;kn?jn<12&&(Nn.hours+=12):jn===12&&(Nn.hours=0),delete Nn.afternoon}}(Et),Et}}return function(le,de,he){he.p.customParseFormat=!0,le&&le.parseTwoDigitYear&&(L=le.parseTwoDigitYear);var _e=de.prototype,Ce=_e.parse;_e.parse=function(Ne){var $e=Ne.date,xe=Ne.utc,Ie=Ne.args;this.$u=xe;var ze=Ie[1];if(typeof ze=="string"){var qe=Ie[2]===!0,Et=Ie[3]===!0,_n=qe||Et,Dt=Ie[2];Et&&(Dt=Ie[2]),V=this.$locale(),!qe&&Dt&&(V=he.Ls[Dt]),this.$d=function(Mn,$n,Nn){try{if(["x","X"].indexOf($n)>-1)return new Date(($n==="X"?1e3:1)*Mn);var kn=ue($n)(Mn),jn=kn.year,Fn=kn.month,Tn=kn.day,Hn=kn.hours,la=kn.minutes,ca=kn.seconds,Zn=kn.milliseconds,Bn=kn.zone,Wn=new Date,da=Tn||(jn||Fn?1:Wn.getDate()),ga=jn||Wn.getFullYear(),Ca=0;jn&&!Fn||(Ca=Fn>0?Fn-1:Wn.getMonth());var ra=Hn||0,Gn=la||0,vn=ca||0,Kn=Zn||0;return Bn?new Date(Date.UTC(ga,Ca,da,ra,Gn,vn,Kn+60*Bn.offset*1e3)):Nn?new Date(Date.UTC(ga,Ca,da,ra,Gn,vn,Kn)):new Date(ga,Ca,da,ra,Gn,vn,Kn)}catch{return new Date("")}}($e,ze,xe),this.init(),Dt&&Dt!==!0&&(this.$L=this.locale(Dt).$L),_n&&$e!=this.format(ze)&&(this.$d=new Date("")),V={}}else if(ze instanceof Array)for(var Sn=ze.length,hn=1;hn<=Sn;hn+=1){Ie[1]=ze[hn-1];var Vn=he.apply(this,Ie);if(Vn.isValid()){this.$d=Vn.$d,this.$L=Vn.$L,this.init();break}hn===Sn&&(this.$d=new Date(""))}else Ce.call(this,Ne)}}})})(customParseFormat$1);var customParseFormatExports=customParseFormat$1.exports;const customParseFormat=getDefaultExportFromCjs(customParseFormatExports),timeUnits$1=["hours","minutes","seconds"],DEFAULT_FORMATS_TIME="HH:mm:ss",DEFAULT_FORMATS_DATE="YYYY-MM-DD",DEFAULT_FORMATS_DATEPICKER={date:DEFAULT_FORMATS_DATE,dates:DEFAULT_FORMATS_DATE,week:"gggg[w]ww",year:"YYYY",month:"YYYY-MM",datetime:`${DEFAULT_FORMATS_DATE} ${DEFAULT_FORMATS_TIME}`,monthrange:"YYYY-MM",daterange:DEFAULT_FORMATS_DATE,datetimerange:`${DEFAULT_FORMATS_DATE} ${DEFAULT_FORMATS_TIME}`},buildTimeList=(e,n)=>[e>0?e-1:void 0,e,e<n?e+1:void 0],rangeArr=e=>Array.from(Array.from({length:e}).keys()),extractDateFormat=e=>e.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),extractTimeFormat=e=>e.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),dateEquals=function(e,n){const r=isDate$1(e),g=isDate$1(n);return r&&g?e.getTime()===n.getTime():!r&&!g?e===n:!1},valueEquals=function(e,n){const r=isArray$3(e),g=isArray$3(n);return r&&g?e.length!==n.length?!1:e.every((y,k)=>dateEquals(y,n[k])):!r&&!g?dateEquals(e,n):!1},parseDate=function(e,n,r){const g=isEmpty(n)||n==="x"?dayjs(e).locale(r):dayjs(e,n).locale(r);return g.isValid()?g:void 0},formatter=function(e,n,r){return isEmpty(n)?e:n==="x"?+e:dayjs(e).locale(r).format(n)},makeList=(e,n)=>{var r;const g=[],y=n?.();for(let k=0;k<e;k++)g.push((r=y?.includes(k))!=null?r:!1);return g},disabledTimeListsProps=buildProps({disabledHours:{type:definePropType(Function)},disabledMinutes:{type:definePropType(Function)},disabledSeconds:{type:definePropType(Function)}}),timePanelSharedProps=buildProps({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),timePickerDefaultProps=buildProps({id:{type:definePropType([Array,String])},name:{type:definePropType([Array,String]),default:""},popperClass:{type:String,default:""},format:String,valueFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:definePropType([String,Object]),default:circle_close_default},editable:{type:Boolean,default:!0},prefixIcon:{type:definePropType([String,Object]),default:""},size:useSizeProp,readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""},popperOptions:{type:definePropType(Object),default:()=>({})},modelValue:{type:definePropType([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:definePropType([Date,Array])},defaultTime:{type:definePropType([Date,Array])},isRange:{type:Boolean,default:!1},...disabledTimeListsProps,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:{type:Boolean,default:!1},label:{type:String,default:void 0},tabindex:{type:definePropType([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean}),_hoisted_1$28=["id","name","placeholder","value","disabled","readonly"],_hoisted_2$1L=["id","name","placeholder","value","disabled","readonly"],__default__$1g=defineComponent({name:"Picker"}),_sfc_main$36=defineComponent({...__default__$1g,props:timePickerDefaultProps,emits:["update:modelValue","change","focus","blur","calendar-change","panel-change","visible-change","keydown"],setup(e,{expose:n,emit:r}){const g=e,y=useAttrs$1(),{lang:k}=useLocale(),$=useNamespace("date"),V=useNamespace("input"),L=useNamespace("range"),{form:z,formItem:j}=useFormItem(),ae=inject("ElPopperOptions",{}),re=ref(),oe=ref(),ue=ref(!1),le=ref(!1),de=ref(null);let he=!1,_e=!1;const Ce=computed(()=>[$.b("editor"),$.bm("editor",g.type),V.e("wrapper"),$.is("disabled",Tn.value),$.is("active",ue.value),L.b("editor"),kt?L.bm("editor",kt.value):"",y.class]),Ne=computed(()=>[V.e("icon"),L.e("close-icon"),da.value?"":L.e("close-icon--hidden")]);watch(ue,xn=>{xn?nextTick(()=>{xn&&(de.value=g.modelValue)}):(Xn.value=null,nextTick(()=>{$e(g.modelValue)}))});const $e=(xn,In)=>{(In||!valueEquals(xn,de.value))&&(r("change",xn),g.validateEvent&&j?.validate("change").catch(Ln=>void 0))},xe=xn=>{if(!valueEquals(g.modelValue,xn)){let In;isArray$3(xn)?In=xn.map(Ln=>formatter(Ln,g.valueFormat,k.value)):xn&&(In=formatter(xn,g.valueFormat,k.value)),r("update:modelValue",xn&&In,k.value)}},Ie=xn=>{r("keydown",xn)},ze=computed(()=>{if(oe.value){const xn=En.value?oe.value:oe.value.$el;return Array.from(xn.querySelectorAll("input"))}return[]}),qe=(xn,In,Ln)=>{const An=ze.value;An.length&&(!Ln||Ln==="min"?(An[0].setSelectionRange(xn,In),An[0].focus()):Ln==="max"&&(An[1].setSelectionRange(xn,In),An[1].focus()))},Et=()=>{Nn(!0,!0),nextTick(()=>{_e=!1})},_n=(xn="",In=!1)=>{In||(_e=!0),ue.value=In;let Ln;isArray$3(xn)?Ln=xn.map(An=>An.toDate()):Ln=xn&&xn.toDate(),Xn.value=null,xe(Ln)},Dt=()=>{le.value=!0},Sn=()=>{r("visible-change",!0)},hn=xn=>{xn?.key===EVENT_CODE.esc&&Nn(!0,!0)},Vn=()=>{le.value=!1,ue.value=!1,_e=!1,r("visible-change",!1)},Mn=()=>{ue.value=!0},$n=()=>{ue.value=!1},Nn=(xn=!0,In=!1)=>{_e=In;const[Ln,An]=unref(ze);let zn=Ln;!xn&&En.value&&(zn=An),zn&&zn.focus()},kn=xn=>{g.readonly||Tn.value||ue.value||_e||(ue.value=!0,r("focus",xn))};let jn;const Fn=xn=>{const In=async()=>{setTimeout(()=>{var Ln;jn===In&&(!((Ln=re.value)!=null&&Ln.isFocusInsideContent()&&!he)&&ze.value.filter(An=>An.contains(document.activeElement)).length===0&&(aa(),ue.value=!1,r("blur",xn),g.validateEvent&&j?.validate("blur").catch(An=>void 0)),he=!1)},0)};jn=In,In()},Tn=computed(()=>g.disabled||z?.disabled),Hn=computed(()=>{let xn;if(Ca.value?Lt.value.getDefaultValue&&(xn=Lt.value.getDefaultValue()):isArray$3(g.modelValue)?xn=g.modelValue.map(In=>parseDate(In,g.valueFormat,k.value)):xn=parseDate(g.modelValue,g.valueFormat,k.value),Lt.value.getRangeAvailableTime){const In=Lt.value.getRangeAvailableTime(xn);isEqual$1(In,xn)||(xn=In,xe(isArray$3(xn)?xn.map(Ln=>Ln.toDate()):xn.toDate()))}return isArray$3(xn)&&xn.some(In=>!In)&&(xn=[]),xn}),la=computed(()=>{if(!Lt.value.panelReady)return"";const xn=ia(Hn.value);return isArray$3(Xn.value)?[Xn.value[0]||xn&&xn[0]||"",Xn.value[1]||xn&&xn[1]||""]:Xn.value!==null?Xn.value:!Zn.value&&Ca.value||!ue.value&&Ca.value?"":xn?Bn.value?xn.join(", "):xn:""}),ca=computed(()=>g.type.includes("time")),Zn=computed(()=>g.type.startsWith("time")),Bn=computed(()=>g.type==="dates"),Wn=computed(()=>g.prefixIcon||(ca.value?clock_default:calendar_default)),da=ref(!1),ga=xn=>{g.readonly||Tn.value||da.value&&(xn.stopPropagation(),Et(),xe(null),$e(null,!0),da.value=!1,ue.value=!1,Lt.value.handleClear&&Lt.value.handleClear())},Ca=computed(()=>{const{modelValue:xn}=g;return!xn||isArray$3(xn)&&!xn.filter(Boolean).length}),ra=async xn=>{var In;g.readonly||Tn.value||(((In=xn.target)==null?void 0:In.tagName)!=="INPUT"||ze.value.includes(document.activeElement))&&(ue.value=!0)},Gn=()=>{g.readonly||Tn.value||!Ca.value&&g.clearable&&(da.value=!0)},vn=()=>{da.value=!1},Kn=xn=>{var In;g.readonly||Tn.value||(((In=xn.touches[0].target)==null?void 0:In.tagName)!=="INPUT"||ze.value.includes(document.activeElement))&&(ue.value=!0)},En=computed(()=>g.type.includes("range")),kt=useFormSize(),At=computed(()=>{var xn,In;return(In=(xn=unref(re))==null?void 0:xn.popperRef)==null?void 0:In.contentRef}),Dn=computed(()=>{var xn;return unref(En)?unref(oe):(xn=unref(oe))==null?void 0:xn.$el});onClickOutside(Dn,xn=>{const In=unref(At),Ln=unref(Dn);In&&(xn.target===In||xn.composedPath().includes(In))||xn.target===Ln||xn.composedPath().includes(Ln)||(ue.value=!1)});const Xn=ref(null),aa=()=>{if(Xn.value){const xn=sa(la.value);xn&&ma(xn)&&(xe(isArray$3(xn)?xn.map(In=>In.toDate()):xn.toDate()),Xn.value=null)}Xn.value===""&&(xe(null),$e(null),Xn.value=null)},sa=xn=>xn?Lt.value.parseUserInput(xn):null,ia=xn=>xn?Lt.value.formatToString(xn):null,ma=xn=>Lt.value.isValidValue(xn),ua=async xn=>{if(g.readonly||Tn.value)return;const{code:In}=xn;if(Ie(xn),In===EVENT_CODE.esc){ue.value===!0&&(ue.value=!1,xn.preventDefault(),xn.stopPropagation());return}if(In===EVENT_CODE.down&&(Lt.value.handleFocusPicker&&(xn.preventDefault(),xn.stopPropagation()),ue.value===!1&&(ue.value=!0,await nextTick()),Lt.value.handleFocusPicker)){Lt.value.handleFocusPicker();return}if(In===EVENT_CODE.tab){he=!0;return}if(In===EVENT_CODE.enter||In===EVENT_CODE.numpadEnter){(Xn.value===null||Xn.value===""||ma(sa(la.value)))&&(aa(),ue.value=!1),xn.stopPropagation();return}if(Xn.value){xn.stopPropagation();return}Lt.value.handleKeydownInput&&Lt.value.handleKeydownInput(xn)},pe=xn=>{Xn.value=xn,ue.value||(ue.value=!0)},Oe=xn=>{const In=xn.target;Xn.value?Xn.value=[In.value,Xn.value[1]]:Xn.value=[In.value,null]},Ve=xn=>{const In=xn.target;Xn.value?Xn.value=[Xn.value[0],In.value]:Xn.value=[null,In.value]},Ue=()=>{var xn;const In=Xn.value,Ln=sa(In&&In[0]),An=unref(Hn);if(Ln&&Ln.isValid()){Xn.value=[ia(Ln),((xn=la.value)==null?void 0:xn[1])||null];const zn=[Ln,An&&(An[1]||null)];ma(zn)&&(xe(zn),Xn.value=null)}},Pt=()=>{var xn;const In=unref(Xn),Ln=sa(In&&In[1]),An=unref(Hn);if(Ln&&Ln.isValid()){Xn.value=[((xn=unref(la))==null?void 0:xn[0])||null,ia(Ln)];const zn=[An&&An[0],Ln];ma(zn)&&(xe(zn),Xn.value=null)}},Lt=ref({}),bn=xn=>{Lt.value[xn[0]]=xn[1],Lt.value.panelReady=!0},jt=xn=>{r("calendar-change",xn)},Cn=(xn,In,Ln)=>{r("panel-change",xn,In,Ln)};return provide("EP_PICKER_BASE",{props:g}),n({focus:Nn,handleFocusInput:kn,handleBlurInput:Fn,handleOpen:Mn,handleClose:$n,onPick:_n}),(xn,In)=>(openBlock(),createBlock(unref(ElTooltip),mergeProps({ref_key:"refPopper",ref:re,visible:ue.value,effect:"light",pure:"",trigger:"click"},xn.$attrs,{role:"dialog",teleported:"",transition:`${unref($).namespace.value}-zoom-in-top`,"popper-class":[`${unref($).namespace.value}-picker__popper`,xn.popperClass],"popper-options":unref(ae),"fallback-placements":["bottom","top","right","left"],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:Dt,onShow:Sn,onHide:Vn}),{default:withCtx(()=>[unref(En)?(openBlock(),createElementBlock("div",{key:1,ref_key:"inputRef",ref:oe,class:normalizeClass(unref(Ce)),style:normalizeStyle(xn.$attrs.style),onClick:kn,onMouseenter:Gn,onMouseleave:vn,onTouchstart:Kn,onKeydown:ua},[unref(Wn)?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass([unref(V).e("icon"),unref(L).e("icon")]),onMousedown:withModifiers(ra,["prevent"]),onTouchstart:Kn},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(Wn))))]),_:1},8,["class","onMousedown"])):createCommentVNode("v-if",!0),createBaseVNode("input",{id:xn.id&&xn.id[0],autocomplete:"off",name:xn.name&&xn.name[0],placeholder:xn.startPlaceholder,value:unref(la)&&unref(la)[0],disabled:unref(Tn),readonly:!xn.editable||xn.readonly,class:normalizeClass(unref(L).b("input")),onMousedown:ra,onInput:Oe,onChange:Ue,onFocus:kn,onBlur:Fn},null,42,_hoisted_1$28),renderSlot(xn.$slots,"range-separator",{},()=>[createBaseVNode("span",{class:normalizeClass(unref(L).b("separator"))},toDisplayString$1(xn.rangeSeparator),3)]),createBaseVNode("input",{id:xn.id&&xn.id[1],autocomplete:"off",name:xn.name&&xn.name[1],placeholder:xn.endPlaceholder,value:unref(la)&&unref(la)[1],disabled:unref(Tn),readonly:!xn.editable||xn.readonly,class:normalizeClass(unref(L).b("input")),onMousedown:ra,onFocus:kn,onBlur:Fn,onInput:Ve,onChange:Pt},null,42,_hoisted_2$1L),xn.clearIcon?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass(unref(Ne)),onClick:ga},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(xn.clearIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],38)):(openBlock(),createBlock(unref(ElInput),{key:0,id:xn.id,ref_key:"inputRef",ref:oe,"container-role":"combobox","model-value":unref(la),name:xn.name,size:unref(kt),disabled:unref(Tn),placeholder:xn.placeholder,class:normalizeClass([unref($).b("editor"),unref($).bm("editor",xn.type),xn.$attrs.class]),style:normalizeStyle(xn.$attrs.style),readonly:!xn.editable||xn.readonly||unref(Bn)||xn.type==="week",label:xn.label,tabindex:xn.tabindex,"validate-event":!1,onInput:pe,onFocus:kn,onBlur:Fn,onKeydown:ua,onChange:aa,onMousedown:ra,onMouseenter:Gn,onMouseleave:vn,onTouchstart:Kn,onClick:In[0]||(In[0]=withModifiers(()=>{},["stop"]))},{prefix:withCtx(()=>[unref(Wn)?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(V).e("icon")),onMousedown:withModifiers(ra,["prevent"]),onTouchstart:Kn},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(Wn))))]),_:1},8,["class","onMousedown"])):createCommentVNode("v-if",!0)]),suffix:withCtx(()=>[da.value&&xn.clearIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(`${unref(V).e("icon")} clear-icon`),onClick:withModifiers(ga,["stop"])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(xn.clearIcon)))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","label","tabindex","onKeydown"]))]),content:withCtx(()=>[renderSlot(xn.$slots,"default",{visible:ue.value,actualVisible:le.value,parsedValue:unref(Hn),format:xn.format,unlinkPanels:xn.unlinkPanels,type:xn.type,defaultValue:xn.defaultValue,onPick:_n,onSelectRange:qe,onSetPickerOption:bn,onCalendarChange:jt,onPanelChange:Cn,onKeydown:hn,onMousedown:In[1]||(In[1]=withModifiers(()=>{},["stop"]))})]),_:3},16,["visible","transition","popper-class","popper-options"]))}});var CommonPicker=_export_sfc$1(_sfc_main$36,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/common/picker.vue"]]);const panelTimePickerProps=buildProps({...timePanelSharedProps,datetimeRole:String,parsedValue:{type:definePropType(Object)}}),useTimePanel=({getAvailableHours:e,getAvailableMinutes:n,getAvailableSeconds:r})=>{const g=($,V,L,z)=>{const j={hour:e,minute:n,second:r};let ae=$;return["hour","minute","second"].forEach(re=>{if(j[re]){let oe;const ue=j[re];switch(re){case"minute":{oe=ue(ae.hour(),V,z);break}case"second":{oe=ue(ae.hour(),ae.minute(),V,z);break}default:{oe=ue(V,z);break}}if(oe?.length&&!oe.includes(ae[re]())){const le=L?0:oe.length-1;ae=ae[re](oe[le])}}}),ae},y={};return{timePickerOptions:y,getAvailableTime:g,onSetOption:([$,V])=>{y[$]=V}}},makeAvailableArr=e=>{const n=(g,y)=>g||y,r=g=>g!==!0;return e.map(n).filter(r)},getTimeLists=(e,n,r)=>({getHoursList:($,V)=>makeList(24,e&&(()=>e?.($,V))),getMinutesList:($,V,L)=>makeList(60,n&&(()=>n?.($,V,L))),getSecondsList:($,V,L,z)=>makeList(60,r&&(()=>r?.($,V,L,z)))}),buildAvailableTimeSlotGetter=(e,n,r)=>{const{getHoursList:g,getMinutesList:y,getSecondsList:k}=getTimeLists(e,n,r);return{getAvailableHours:(z,j)=>makeAvailableArr(g(z,j)),getAvailableMinutes:(z,j,ae)=>makeAvailableArr(y(z,j,ae)),getAvailableSeconds:(z,j,ae,re)=>makeAvailableArr(k(z,j,ae,re))}},useOldValue=e=>{const n=ref(e.parsedValue);return watch(()=>e.visible,r=>{r||(n.value=e.parsedValue)}),n},nodeList=new Map;let startClick;isClient&&(document.addEventListener("mousedown",e=>startClick=e),document.addEventListener("mouseup",e=>{for(const n of nodeList.values())for(const{documentHandler:r}of n)r(e,startClick)}));function createDocumentHandler(e,n){let r=[];return Array.isArray(n.arg)?r=n.arg:isElement$1(n.arg)&&r.push(n.arg),function(g,y){const k=n.instance.popperRef,$=g.target,V=y?.target,L=!n||!n.instance,z=!$||!V,j=e.contains($)||e.contains(V),ae=e===$,re=r.length&&r.some(ue=>ue?.contains($))||r.length&&r.includes(V),oe=k&&(k.contains($)||k.contains(V));L||z||j||ae||re||oe||n.value(g,y)}}const ClickOutside={beforeMount(e,n){nodeList.has(e)||nodeList.set(e,[]),nodeList.get(e).push({documentHandler:createDocumentHandler(e,n),bindingFn:n.value})},updated(e,n){nodeList.has(e)||nodeList.set(e,[]);const r=nodeList.get(e),g=r.findIndex(k=>k.bindingFn===n.oldValue),y={documentHandler:createDocumentHandler(e,n),bindingFn:n.value};g>=0?r.splice(g,1,y):r.push(y)},unmounted(e){nodeList.delete(e)}},REPEAT_INTERVAL=100,REPEAT_DELAY=600,vRepeatClick={beforeMount(e,n){const r=n.value,{interval:g=REPEAT_INTERVAL,delay:y=REPEAT_DELAY}=isFunction$3(r)?{}:r;let k,$;const V=()=>isFunction$3(r)?r():r.handler(),L=()=>{$&&(clearTimeout($),$=void 0),k&&(clearInterval(k),k=void 0)};e.addEventListener("mousedown",z=>{z.button===0&&(L(),V(),document.addEventListener("mouseup",()=>L(),{once:!0}),$=setTimeout(()=>{k=setInterval(()=>{V()},g)},y))})}},FOCUSABLE_CHILDREN="_trap-focus-children",FOCUS_STACK=[],FOCUS_HANDLER=e=>{if(FOCUS_STACK.length===0)return;const n=FOCUS_STACK[FOCUS_STACK.length-1][FOCUSABLE_CHILDREN];if(n.length>0&&e.code===EVENT_CODE.tab){if(n.length===1){e.preventDefault(),document.activeElement!==n[0]&&n[0].focus();return}const r=e.shiftKey,g=e.target===n[0],y=e.target===n[n.length-1];g&&r&&(e.preventDefault(),n[n.length-1].focus()),y&&!r&&(e.preventDefault(),n[0].focus())}},TrapFocus={beforeMount(e){e[FOCUSABLE_CHILDREN]=obtainAllFocusableElements$1(e),FOCUS_STACK.push(e),FOCUS_STACK.length<=1&&document.addEventListener("keydown",FOCUS_HANDLER)},updated(e){nextTick(()=>{e[FOCUSABLE_CHILDREN]=obtainAllFocusableElements$1(e)})},unmounted(){FOCUS_STACK.shift(),FOCUS_STACK.length===0&&document.removeEventListener("keydown",FOCUS_HANDLER)}};var v=!1,o,f,s,u,d$1,N,l,p$1,m,w$1,D,x,E,M,F;function a(){if(!v){v=!0;var e=navigator.userAgent,n=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),r=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(x=/\b(iPhone|iP[ao]d)/.exec(e),E=/\b(iP[ao]d)/.exec(e),w$1=/Android/i.exec(e),M=/FBAN\/\w+;/i.exec(e),F=/Mobile/i.exec(e),D=!!/Win64/.exec(e),n){o=n[1]?parseFloat(n[1]):n[5]?parseFloat(n[5]):NaN,o&&document&&document.documentMode&&(o=document.documentMode);var g=/(?:Trident\/(\d+.\d+))/.exec(e);N=g?parseFloat(g[1])+4:o,f=n[2]?parseFloat(n[2]):NaN,s=n[3]?parseFloat(n[3]):NaN,u=n[4]?parseFloat(n[4]):NaN,u?(n=/(?:Chrome\/(\d+\.\d+))/.exec(e),d$1=n&&n[1]?parseFloat(n[1]):NaN):d$1=NaN}else o=f=s=d$1=u=NaN;if(r){if(r[1]){var y=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);l=y?parseFloat(y[1].replace("_",".")):!0}else l=!1;p$1=!!r[2],m=!!r[3]}else l=p$1=m=!1}}var _={ie:function(){return a()||o},ieCompatibilityMode:function(){return a()||N>o},ie64:function(){return _.ie()&&D},firefox:function(){return a()||f},opera:function(){return a()||s},webkit:function(){return a()||u},safari:function(){return _.webkit()},chrome:function(){return a()||d$1},windows:function(){return a()||p$1},osx:function(){return a()||l},linux:function(){return a()||m},iphone:function(){return a()||x},mobile:function(){return a()||x||E||w$1||F},nativeApp:function(){return a()||M},android:function(){return a()||w$1},ipad:function(){return a()||E}},A=_,c=!!(typeof window<"u"&&window.document&&window.document.createElement),U={canUseDOM:c,canUseWorkers:typeof Worker<"u",canUseEventListeners:c&&!!(window.addEventListener||window.attachEvent),canUseViewport:c&&!!window.screen,isInWorker:!c},h=U,X;h.canUseDOM&&(X=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function S(e,n){if(!h.canUseDOM||n&&!("addEventListener"in document))return!1;var r="on"+e,g=r in document;if(!g){var y=document.createElement("div");y.setAttribute(r,"return;"),g=typeof y[r]=="function"}return!g&&X&&e==="wheel"&&(g=document.implementation.hasFeature("Events.wheel","3.0")),g}var b=S,O=10,I=40,P=800;function T(e){var n=0,r=0,g=0,y=0;return"detail"in e&&(r=e.detail),"wheelDelta"in e&&(r=-e.wheelDelta/120),"wheelDeltaY"in e&&(r=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(n=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(n=r,r=0),g=n*O,y=r*O,"deltaY"in e&&(y=e.deltaY),"deltaX"in e&&(g=e.deltaX),(g||y)&&e.deltaMode&&(e.deltaMode==1?(g*=I,y*=I):(g*=P,y*=P)),g&&!n&&(n=g<1?-1:1),y&&!r&&(r=y<1?-1:1),{spinX:n,spinY:r,pixelX:g,pixelY:y}}T.getEventType=function(){return A.firefox()?"DOMMouseScroll":b("wheel")?"wheel":"mousewheel"};var Y=T;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const mousewheel=function(e,n){if(e&&e.addEventListener){const r=function(g){const y=Y(g);n&&Reflect.apply(n,this,[g,y])};e.addEventListener("wheel",r,{passive:!0})}},Mousewheel={beforeMount(e,n){mousewheel(e,n.value)}},basicTimeSpinnerProps=buildProps({role:{type:String,required:!0},spinnerDate:{type:definePropType(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:definePropType(String),default:""},...disabledTimeListsProps}),_hoisted_1$27=["onClick"],_hoisted_2$1K=["onMouseenter"],_sfc_main$35=defineComponent({__name:"basic-time-spinner",props:basicTimeSpinnerProps,emits:["change","select-range","set-option"],setup(e,{emit:n}){const r=e,g=useNamespace("time"),{getHoursList:y,getMinutesList:k,getSecondsList:$}=getTimeLists(r.disabledHours,r.disabledMinutes,r.disabledSeconds);let V=!1;const L=ref(),z=ref(),j=ref(),ae=ref(),re={hours:z,minutes:j,seconds:ae},oe=computed(()=>r.showSeconds?timeUnits$1:timeUnits$1.slice(0,2)),ue=computed(()=>{const{spinnerDate:kn}=r,jn=kn.hour(),Fn=kn.minute(),Tn=kn.second();return{hours:jn,minutes:Fn,seconds:Tn}}),le=computed(()=>{const{hours:kn,minutes:jn}=unref(ue);return{hours:y(r.role),minutes:k(kn,r.role),seconds:$(kn,jn,r.role)}}),de=computed(()=>{const{hours:kn,minutes:jn,seconds:Fn}=unref(ue);return{hours:buildTimeList(kn,23),minutes:buildTimeList(jn,59),seconds:buildTimeList(Fn,59)}}),he=debounce(kn=>{V=!1,Ne(kn)},200),_e=kn=>{if(!!!r.amPmMode)return"";const Fn=r.amPmMode==="A";let Tn=kn<12?" am":" pm";return Fn&&(Tn=Tn.toUpperCase()),Tn},Ce=kn=>{let jn;switch(kn){case"hours":jn=[0,2];break;case"minutes":jn=[3,5];break;case"seconds":jn=[6,8];break}const[Fn,Tn]=jn;n("select-range",Fn,Tn),L.value=kn},Ne=kn=>{Ie(kn,unref(ue)[kn])},$e=()=>{Ne("hours"),Ne("minutes"),Ne("seconds")},xe=kn=>kn.querySelector(`.${g.namespace.value}-scrollbar__wrap`),Ie=(kn,jn)=>{if(r.arrowControl)return;const Fn=unref(re[kn]);Fn&&Fn.$el&&(xe(Fn.$el).scrollTop=Math.max(0,jn*ze(kn)))},ze=kn=>{const jn=unref(re[kn]),Fn=jn?.$el.querySelector("li");return Fn&&Number.parseFloat(getStyle(Fn,"height"))||0},qe=()=>{_n(1)},Et=()=>{_n(-1)},_n=kn=>{L.value||Ce("hours");const jn=L.value,Fn=unref(ue)[jn],Tn=L.value==="hours"?24:60,Hn=Dt(jn,Fn,kn,Tn);Sn(jn,Hn),Ie(jn,Hn),nextTick(()=>Ce(jn))},Dt=(kn,jn,Fn,Tn)=>{let Hn=(jn+Fn+Tn)%Tn;const la=unref(le)[kn];for(;la[Hn]&&Hn!==jn;)Hn=(Hn+Fn+Tn)%Tn;return Hn},Sn=(kn,jn)=>{if(unref(le)[kn][jn])return;const{hours:Hn,minutes:la,seconds:ca}=unref(ue);let Zn;switch(kn){case"hours":Zn=r.spinnerDate.hour(jn).minute(la).second(ca);break;case"minutes":Zn=r.spinnerDate.hour(Hn).minute(jn).second(ca);break;case"seconds":Zn=r.spinnerDate.hour(Hn).minute(la).second(jn);break}n("change",Zn)},hn=(kn,{value:jn,disabled:Fn})=>{Fn||(Sn(kn,jn),Ce(kn),Ie(kn,jn))},Vn=kn=>{V=!0,he(kn);const jn=Math.min(Math.round((xe(unref(re[kn]).$el).scrollTop-(Mn(kn)*.5-10)/ze(kn)+3)/ze(kn)),kn==="hours"?23:59);Sn(kn,jn)},Mn=kn=>unref(re[kn]).$el.offsetHeight,$n=()=>{const kn=jn=>{const Fn=unref(re[jn]);Fn&&Fn.$el&&(xe(Fn.$el).onscroll=()=>{Vn(jn)})};kn("hours"),kn("minutes"),kn("seconds")};onMounted(()=>{nextTick(()=>{!r.arrowControl&&$n(),$e(),r.role==="start"&&Ce("hours")})});const Nn=(kn,jn)=>{re[jn].value=kn};return n("set-option",[`${r.role}_scrollDown`,_n]),n("set-option",[`${r.role}_emitSelectRange`,Ce]),watch(()=>r.spinnerDate,()=>{V||$e()}),(kn,jn)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(g).b("spinner"),{"has-seconds":kn.showSeconds}])},[kn.arrowControl?createCommentVNode("v-if",!0):(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(unref(oe),Fn=>(openBlock(),createBlock(unref(ElScrollbar),{key:Fn,ref_for:!0,ref:Tn=>Nn(Tn,Fn),class:normalizeClass(unref(g).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":unref(g).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:Tn=>Ce(Fn),onMousemove:Tn=>Ne(Fn)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(le)[Fn],(Tn,Hn)=>(openBlock(),createElementBlock("li",{key:Hn,class:normalizeClass([unref(g).be("spinner","item"),unref(g).is("active",Hn===unref(ue)[Fn]),unref(g).is("disabled",Tn)]),onClick:la=>hn(Fn,{value:Hn,disabled:Tn})},[Fn==="hours"?(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString$1(("0"+(kn.amPmMode?Hn%12||12:Hn)).slice(-2))+toDisplayString$1(_e(Hn)),1)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString$1(("0"+Hn).slice(-2)),1)],64))],10,_hoisted_1$27))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),kn.arrowControl?(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(unref(oe),Fn=>(openBlock(),createElementBlock("div",{key:Fn,class:normalizeClass([unref(g).be("spinner","wrapper"),unref(g).is("arrow")]),onMouseenter:Tn=>Ce(Fn)},[withDirectives((openBlock(),createBlock(unref(ElIcon),{class:normalizeClass(["arrow-up",unref(g).be("spinner","arrow")])},{default:withCtx(()=>[createVNode(unref(arrow_up_default))]),_:1},8,["class"])),[[unref(vRepeatClick),Et]]),withDirectives((openBlock(),createBlock(unref(ElIcon),{class:normalizeClass(["arrow-down",unref(g).be("spinner","arrow")])},{default:withCtx(()=>[createVNode(unref(arrow_down_default))]),_:1},8,["class"])),[[unref(vRepeatClick),qe]]),createBaseVNode("ul",{class:normalizeClass(unref(g).be("spinner","list"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(de)[Fn],(Tn,Hn)=>(openBlock(),createElementBlock("li",{key:Hn,class:normalizeClass([unref(g).be("spinner","item"),unref(g).is("active",Tn===unref(ue)[Fn]),unref(g).is("disabled",unref(le)[Fn][Tn])])},[typeof Tn=="number"?(openBlock(),createElementBlock(Fragment,{key:0},[Fn==="hours"?(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString$1(("0"+(kn.amPmMode?Tn%12||12:Tn)).slice(-2))+toDisplayString$1(_e(Tn)),1)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString$1(("0"+Tn).slice(-2)),1)],64))],64)):createCommentVNode("v-if",!0)],2))),128))],2)],42,_hoisted_2$1K))),128)):createCommentVNode("v-if",!0)],2))}});var TimeSpinner=_export_sfc$1(_sfc_main$35,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/basic-time-spinner.vue"]]);const _sfc_main$34=defineComponent({__name:"panel-time-pick",props:panelTimePickerProps,emits:["pick","select-range","set-picker-option"],setup(e,{emit:n}){const r=e,g=inject("EP_PICKER_BASE"),{arrowControl:y,disabledHours:k,disabledMinutes:$,disabledSeconds:V,defaultValue:L}=g.props,{getAvailableHours:z,getAvailableMinutes:j,getAvailableSeconds:ae}=buildAvailableTimeSlotGetter(k,$,V),re=useNamespace("time"),{t:oe,lang:ue}=useLocale(),le=ref([0,2]),de=useOldValue(r),he=computed(()=>isUndefined(r.actualVisible)?`${re.namespace.value}-zoom-in-top`:""),_e=computed(()=>r.format.includes("ss")),Ce=computed(()=>r.format.includes("A")?"A":r.format.includes("a")?"a":""),Ne=Nn=>{const kn=dayjs(Nn).locale(ue.value),jn=hn(kn);return kn.isSame(jn)},$e=()=>{n("pick",de.value,!1)},xe=(Nn=!1,kn=!1)=>{kn||n("pick",r.parsedValue,Nn)},Ie=Nn=>{if(!r.visible)return;const kn=hn(Nn).millisecond(0);n("pick",kn,!0)},ze=(Nn,kn)=>{n("select-range",Nn,kn),le.value=[Nn,kn]},qe=Nn=>{const kn=[0,3].concat(_e.value?[6]:[]),jn=["hours","minutes"].concat(_e.value?["seconds"]:[]),Tn=(kn.indexOf(le.value[0])+Nn+kn.length)%kn.length;_n.start_emitSelectRange(jn[Tn])},Et=Nn=>{const kn=Nn.code,{left:jn,right:Fn,up:Tn,down:Hn}=EVENT_CODE;if([jn,Fn].includes(kn)){qe(kn===jn?-1:1),Nn.preventDefault();return}if([Tn,Hn].includes(kn)){const la=kn===Tn?-1:1;_n.start_scrollDown(la),Nn.preventDefault();return}},{timePickerOptions:_n,onSetOption:Dt,getAvailableTime:Sn}=useTimePanel({getAvailableHours:z,getAvailableMinutes:j,getAvailableSeconds:ae}),hn=Nn=>Sn(Nn,r.datetimeRole||"",!0),Vn=Nn=>Nn?dayjs(Nn,r.format).locale(ue.value):null,Mn=Nn=>Nn?Nn.format(r.format):null,$n=()=>dayjs(L).locale(ue.value);return n("set-picker-option",["isValidValue",Ne]),n("set-picker-option",["formatToString",Mn]),n("set-picker-option",["parseUserInput",Vn]),n("set-picker-option",["handleKeydownInput",Et]),n("set-picker-option",["getRangeAvailableTime",hn]),n("set-picker-option",["getDefaultValue",$n]),(Nn,kn)=>(openBlock(),createBlock(Transition,{name:unref(he)},{default:withCtx(()=>[Nn.actualVisible||Nn.visible?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(re).b("panel"))},[createBaseVNode("div",{class:normalizeClass([unref(re).be("panel","content"),{"has-seconds":unref(_e)}])},[createVNode(TimeSpinner,{ref:"spinner",role:Nn.datetimeRole||"start","arrow-control":unref(y),"show-seconds":unref(_e),"am-pm-mode":unref(Ce),"spinner-date":Nn.parsedValue,"disabled-hours":unref(k),"disabled-minutes":unref($),"disabled-seconds":unref(V),onChange:Ie,onSetOption:unref(Dt),onSelectRange:ze},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),createBaseVNode("div",{class:normalizeClass(unref(re).be("panel","footer"))},[createBaseVNode("button",{type:"button",class:normalizeClass([unref(re).be("panel","btn"),"cancel"]),onClick:$e},toDisplayString$1(unref(oe)("el.datepicker.cancel")),3),createBaseVNode("button",{type:"button",class:normalizeClass([unref(re).be("panel","btn"),"confirm"]),onClick:kn[0]||(kn[0]=jn=>xe())},toDisplayString$1(unref(oe)("el.datepicker.confirm")),3)],2)],2)):createCommentVNode("v-if",!0)]),_:1},8,["name"]))}});var TimePickPanel=_export_sfc$1(_sfc_main$34,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-pick.vue"]]);const panelTimeRangeProps=buildProps({...timePanelSharedProps,parsedValue:{type:definePropType(Array)}}),_hoisted_1$26=["disabled"],_sfc_main$33=defineComponent({__name:"panel-time-range",props:panelTimeRangeProps,emits:["pick","select-range","set-picker-option"],setup(e,{emit:n}){const r=e,g=(Ca,ra)=>{const Gn=[];for(let vn=Ca;vn<=ra;vn++)Gn.push(vn);return Gn},{t:y,lang:k}=useLocale(),$=useNamespace("time"),V=useNamespace("picker"),L=inject("EP_PICKER_BASE"),{arrowControl:z,disabledHours:j,disabledMinutes:ae,disabledSeconds:re,defaultValue:oe}=L.props,ue=computed(()=>[$.be("range-picker","body"),$.be("panel","content"),$.is("arrow",z),Ne.value?"has-seconds":""]),le=computed(()=>[$.be("range-picker","body"),$.be("panel","content"),$.is("arrow",z),Ne.value?"has-seconds":""]),de=computed(()=>r.parsedValue[0]),he=computed(()=>r.parsedValue[1]),_e=useOldValue(r),Ce=()=>{n("pick",_e.value,!1)},Ne=computed(()=>r.format.includes("ss")),$e=computed(()=>r.format.includes("A")?"A":r.format.includes("a")?"a":""),xe=(Ca=!1)=>{n("pick",[de.value,he.value],Ca)},Ie=Ca=>{Et(Ca.millisecond(0),he.value)},ze=Ca=>{Et(de.value,Ca.millisecond(0))},qe=Ca=>{const ra=Ca.map(vn=>dayjs(vn).locale(k.value)),Gn=Fn(ra);return ra[0].isSame(Gn[0])&&ra[1].isSame(Gn[1])},Et=(Ca,ra)=>{n("pick",[Ca,ra],!0)},_n=computed(()=>de.value>he.value),Dt=ref([0,2]),Sn=(Ca,ra)=>{n("select-range",Ca,ra,"min"),Dt.value=[Ca,ra]},hn=computed(()=>Ne.value?11:8),Vn=(Ca,ra)=>{n("select-range",Ca,ra,"max");const Gn=unref(hn);Dt.value=[Ca+Gn,ra+Gn]},Mn=Ca=>{const ra=Ne.value?[0,3,6,11,14,17]:[0,3,8,11],Gn=["hours","minutes"].concat(Ne.value?["seconds"]:[]),Kn=(ra.indexOf(Dt.value[0])+Ca+ra.length)%ra.length,En=ra.length/2;Kn<En?ca.start_emitSelectRange(Gn[Kn]):ca.end_emitSelectRange(Gn[Kn-En])},$n=Ca=>{const ra=Ca.code,{left:Gn,right:vn,up:Kn,down:En}=EVENT_CODE;if([Gn,vn].includes(ra)){Mn(ra===Gn?-1:1),Ca.preventDefault();return}if([Kn,En].includes(ra)){const kt=ra===Kn?-1:1,At=Dt.value[0]<hn.value?"start":"end";ca[`${At}_scrollDown`](kt),Ca.preventDefault();return}},Nn=(Ca,ra)=>{const Gn=j?j(Ca):[],vn=Ca==="start",En=(ra||(vn?he.value:de.value)).hour(),kt=vn?g(En+1,23):g(0,En-1);return union(Gn,kt)},kn=(Ca,ra,Gn)=>{const vn=ae?ae(Ca,ra):[],Kn=ra==="start",En=Gn||(Kn?he.value:de.value),kt=En.hour();if(Ca!==kt)return vn;const At=En.minute(),Dn=Kn?g(At+1,59):g(0,At-1);return union(vn,Dn)},jn=(Ca,ra,Gn,vn)=>{const Kn=re?re(Ca,ra,Gn):[],En=Gn==="start",kt=vn||(En?he.value:de.value),At=kt.hour(),Dn=kt.minute();if(Ca!==At||ra!==Dn)return Kn;const Xn=kt.second(),aa=En?g(Xn+1,59):g(0,Xn-1);return union(Kn,aa)},Fn=([Ca,ra])=>[Zn(Ca,"start",!0,ra),Zn(ra,"end",!1,Ca)],{getAvailableHours:Tn,getAvailableMinutes:Hn,getAvailableSeconds:la}=buildAvailableTimeSlotGetter(Nn,kn,jn),{timePickerOptions:ca,getAvailableTime:Zn,onSetOption:Bn}=useTimePanel({getAvailableHours:Tn,getAvailableMinutes:Hn,getAvailableSeconds:la}),Wn=Ca=>Ca?isArray$3(Ca)?Ca.map(ra=>dayjs(ra,r.format).locale(k.value)):dayjs(Ca,r.format).locale(k.value):null,da=Ca=>Ca?isArray$3(Ca)?Ca.map(ra=>ra.format(r.format)):Ca.format(r.format):null,ga=()=>{if(isArray$3(oe))return oe.map(ra=>dayjs(ra).locale(k.value));const Ca=dayjs(oe).locale(k.value);return[Ca,Ca.add(60,"m")]};return n("set-picker-option",["formatToString",da]),n("set-picker-option",["parseUserInput",Wn]),n("set-picker-option",["isValidValue",qe]),n("set-picker-option",["handleKeydownInput",$n]),n("set-picker-option",["getDefaultValue",ga]),n("set-picker-option",["getRangeAvailableTime",Fn]),(Ca,ra)=>Ca.actualVisible?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([unref($).b("range-picker"),unref(V).b("panel")])},[createBaseVNode("div",{class:normalizeClass(unref($).be("range-picker","content"))},[createBaseVNode("div",{class:normalizeClass(unref($).be("range-picker","cell"))},[createBaseVNode("div",{class:normalizeClass(unref($).be("range-picker","header"))},toDisplayString$1(unref(y)("el.datepicker.startTime")),3),createBaseVNode("div",{class:normalizeClass(unref(ue))},[createVNode(TimeSpinner,{ref:"minSpinner",role:"start","show-seconds":unref(Ne),"am-pm-mode":unref($e),"arrow-control":unref(z),"spinner-date":unref(de),"disabled-hours":Nn,"disabled-minutes":kn,"disabled-seconds":jn,onChange:Ie,onSetOption:unref(Bn),onSelectRange:Sn},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),createBaseVNode("div",{class:normalizeClass(unref($).be("range-picker","cell"))},[createBaseVNode("div",{class:normalizeClass(unref($).be("range-picker","header"))},toDisplayString$1(unref(y)("el.datepicker.endTime")),3),createBaseVNode("div",{class:normalizeClass(unref(le))},[createVNode(TimeSpinner,{ref:"maxSpinner",role:"end","show-seconds":unref(Ne),"am-pm-mode":unref($e),"arrow-control":unref(z),"spinner-date":unref(he),"disabled-hours":Nn,"disabled-minutes":kn,"disabled-seconds":jn,onChange:ze,onSetOption:unref(Bn),onSelectRange:Vn},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),createBaseVNode("div",{class:normalizeClass(unref($).be("panel","footer"))},[createBaseVNode("button",{type:"button",class:normalizeClass([unref($).be("panel","btn"),"cancel"]),onClick:ra[0]||(ra[0]=Gn=>Ce())},toDisplayString$1(unref(y)("el.datepicker.cancel")),3),createBaseVNode("button",{type:"button",class:normalizeClass([unref($).be("panel","btn"),"confirm"]),disabled:unref(_n),onClick:ra[1]||(ra[1]=Gn=>xe())},toDisplayString$1(unref(y)("el.datepicker.confirm")),11,_hoisted_1$26)],2)],2)):createCommentVNode("v-if",!0)}});var TimeRangePanel=_export_sfc$1(_sfc_main$33,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);dayjs.extend(customParseFormat);var TimePicker=defineComponent({name:"ElTimePicker",install:null,props:{...timePickerDefaultProps,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,n){const r=ref(),[g,y]=e.isRange?["timerange",TimeRangePanel]:["time",TimePickPanel],k=$=>n.emit("update:modelValue",$);return provide("ElPopperOptions",e.popperOptions),n.expose({focus:$=>{var V;(V=r.value)==null||V.handleFocusInput($)},blur:$=>{var V;(V=r.value)==null||V.handleBlurInput($)},handleOpen:()=>{var $;($=r.value)==null||$.handleOpen()},handleClose:()=>{var $;($=r.value)==null||$.handleClose()}}),()=>{var $;const V=($=e.format)!=null?$:DEFAULT_FORMATS_TIME;return createVNode(CommonPicker,mergeProps(e,{ref:r,type:g,format:V,"onUpdate:modelValue":k}),{default:L=>createVNode(y,L,null)})}}});const _TimePicker=TimePicker;_TimePicker.install=e=>{e.component(_TimePicker.name,_TimePicker)};const ElTimePicker=_TimePicker,getPrevMonthLastDays=(e,n)=>{const r=e.subtract(1,"month").endOf("month").date();return rangeArr(n).map((g,y)=>r-(n-y-1))},getMonthDays=e=>{const n=e.daysInMonth();return rangeArr(n).map((r,g)=>g+1)},toNestedArr=e=>rangeArr(e.length/7).map(n=>{const r=n*7;return e.slice(r,r+7)}),dateTableProps=buildProps({selectedDay:{type:definePropType(Object)},range:{type:definePropType(Array)},date:{type:definePropType(Object),required:!0},hideHeader:{type:Boolean}}),dateTableEmits={pick:e=>isObject$3(e)};var localeData$1={exports:{}};(function(e,n){(function(r,g){e.exports=g()})(commonjsGlobal$1,function(){return function(r,g,y){var k=g.prototype,$=function(ae){return ae&&(ae.indexOf?ae:ae.s)},V=function(ae,re,oe,ue,le){var de=ae.name?ae:ae.$locale(),he=$(de[re]),_e=$(de[oe]),Ce=he||_e.map(function($e){return $e.slice(0,ue)});if(!le)return Ce;var Ne=de.weekStart;return Ce.map(function($e,xe){return Ce[(xe+(Ne||0))%7]})},L=function(){return y.Ls[y.locale()]},z=function(ae,re){return ae.formats[re]||function(oe){return oe.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(ue,le,de){return le||de.slice(1)})}(ae.formats[re.toUpperCase()])},j=function(){var ae=this;return{months:function(re){return re?re.format("MMMM"):V(ae,"months")},monthsShort:function(re){return re?re.format("MMM"):V(ae,"monthsShort","months",3)},firstDayOfWeek:function(){return ae.$locale().weekStart||0},weekdays:function(re){return re?re.format("dddd"):V(ae,"weekdays")},weekdaysMin:function(re){return re?re.format("dd"):V(ae,"weekdaysMin","weekdays",2)},weekdaysShort:function(re){return re?re.format("ddd"):V(ae,"weekdaysShort","weekdays",3)},longDateFormat:function(re){return z(ae.$locale(),re)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};k.localeData=function(){return j.bind(this)()},y.localeData=function(){var ae=L();return{firstDayOfWeek:function(){return ae.weekStart||0},weekdays:function(){return y.weekdays()},weekdaysShort:function(){return y.weekdaysShort()},weekdaysMin:function(){return y.weekdaysMin()},months:function(){return y.months()},monthsShort:function(){return y.monthsShort()},longDateFormat:function(re){return z(ae,re)},meridiem:ae.meridiem,ordinal:ae.ordinal}},y.months=function(){return V(L(),"months")},y.monthsShort=function(){return V(L(),"monthsShort","months",3)},y.weekdays=function(ae){return V(L(),"weekdays",null,null,ae)},y.weekdaysShort=function(ae){return V(L(),"weekdaysShort","weekdays",3,ae)},y.weekdaysMin=function(ae){return V(L(),"weekdaysMin","weekdays",2,ae)}}})})(localeData$1);var localeDataExports=localeData$1.exports;const localeData=getDefaultExportFromCjs(localeDataExports),useDateTable=(e,n)=>{dayjs.extend(localeData);const r=dayjs.localeData().firstDayOfWeek(),{t:g,lang:y}=useLocale(),k=dayjs().locale(y.value),$=computed(()=>!!e.range&&!!e.range.length),V=computed(()=>{let re=[];if($.value){const[oe,ue]=e.range,le=rangeArr(ue.date()-oe.date()+1).map(_e=>({text:oe.date()+_e,type:"current"}));let de=le.length%7;de=de===0?0:7-de;const he=rangeArr(de).map((_e,Ce)=>({text:Ce+1,type:"next"}));re=le.concat(he)}else{const oe=e.date.startOf("month").day(),ue=getPrevMonthLastDays(e.date,(oe-r+7)%7).map(_e=>({text:_e,type:"prev"})),le=getMonthDays(e.date).map(_e=>({text:_e,type:"current"}));re=[...ue,...le];const de=7-(re.length%7||7),he=rangeArr(de).map((_e,Ce)=>({text:Ce+1,type:"next"}));re=re.concat(he)}return toNestedArr(re)}),L=computed(()=>{const re=r;return re===0?WEEK_DAYS.map(oe=>g(`el.datepicker.weeks.${oe}`)):WEEK_DAYS.slice(re).concat(WEEK_DAYS.slice(0,re)).map(oe=>g(`el.datepicker.weeks.${oe}`))}),z=(re,oe)=>{switch(oe){case"prev":return e.date.startOf("month").subtract(1,"month").date(re);case"next":return e.date.startOf("month").add(1,"month").date(re);case"current":return e.date.date(re)}};return{now:k,isInRange:$,rows:V,weekDays:L,getFormattedDate:z,handlePickDay:({text:re,type:oe})=>{const ue=z(re,oe);n("pick",ue)},getSlotData:({text:re,type:oe})=>{const ue=z(re,oe);return{isSelected:ue.isSame(e.selectedDay),type:`${oe}-month`,day:ue.format("YYYY-MM-DD"),date:ue.toDate()}}}},_hoisted_1$25={key:0},_hoisted_2$1J=["onClick"],__default__$1f=defineComponent({name:"DateTable"}),_sfc_main$32=defineComponent({...__default__$1f,props:dateTableProps,emits:dateTableEmits,setup(e,{expose:n,emit:r}){const g=e,{isInRange:y,now:k,rows:$,weekDays:V,getFormattedDate:L,handlePickDay:z,getSlotData:j}=useDateTable(g,r),ae=useNamespace("calendar-table"),re=useNamespace("calendar-day"),oe=({text:ue,type:le})=>{const de=[le];if(le==="current"){const he=L(ue,le);he.isSame(g.selectedDay,"day")&&de.push(re.is("selected")),he.isSame(k,"day")&&de.push(re.is("today"))}return de};return n({getFormattedDate:L}),(ue,le)=>(openBlock(),createElementBlock("table",{class:normalizeClass([unref(ae).b(),unref(ae).is("range",unref(y))]),cellspacing:"0",cellpadding:"0"},[ue.hideHeader?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("thead",_hoisted_1$25,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(V),de=>(openBlock(),createElementBlock("th",{key:de},toDisplayString$1(de),1))),128))])),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref($),(de,he)=>(openBlock(),createElementBlock("tr",{key:he,class:normalizeClass({[unref(ae).e("row")]:!0,[unref(ae).em("row","hide-border")]:he===0&&ue.hideHeader})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(de,(_e,Ce)=>(openBlock(),createElementBlock("td",{key:Ce,class:normalizeClass(oe(_e)),onClick:Ne=>unref(z)(_e)},[createBaseVNode("div",{class:normalizeClass(unref(re).b())},[renderSlot(ue.$slots,"date-cell",{data:unref(j)(_e)},()=>[createBaseVNode("span",null,toDisplayString$1(_e.text),1)])],2)],10,_hoisted_2$1J))),128))],2))),128))])],2))}});var DateTable$1=_export_sfc$1(_sfc_main$32,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/date-table.vue"]]);const adjacentMonth=(e,n)=>{const r=e.endOf("month"),g=n.startOf("month"),k=r.isSame(g,"week")?g.add(1,"week"):g;return[[e,r],[k.startOf("week"),n]]},threeConsecutiveMonth=(e,n)=>{const r=e.endOf("month"),g=e.add(1,"month").startOf("month"),y=r.isSame(g,"week")?g.add(1,"week"):g,k=y.endOf("month"),$=n.startOf("month"),V=k.isSame($,"week")?$.add(1,"week"):$;return[[e,r],[y.startOf("week"),k],[V.startOf("week"),n]]},useCalendar=(e,n,r)=>{const g=useSlots(),{lang:y}=useLocale(),k=ref(),$=dayjs().locale(y.value),V=computed({get(){return e.modelValue?z.value:k.value},set(he){if(!he)return;k.value=he;const _e=he.toDate();n(INPUT_EVENT,_e),n(UPDATE_MODEL_EVENT,_e)}}),L=computed(()=>{if(!e.range)return[];const he=e.range.map(Ne=>dayjs(Ne).locale(y.value)),[_e,Ce]=he;return _e.isAfter(Ce)?[]:_e.isSame(Ce,"month")?ue(_e,Ce):_e.add(1,"month").month()!==Ce.month()?[]:ue(_e,Ce)}),z=computed(()=>e.modelValue?dayjs(e.modelValue).locale(y.value):V.value||(L.value.length?L.value[0][0]:$)),j=computed(()=>z.value.subtract(1,"month").date(1)),ae=computed(()=>z.value.add(1,"month").date(1)),re=computed(()=>z.value.subtract(1,"year").date(1)),oe=computed(()=>z.value.add(1,"year").date(1)),ue=(he,_e)=>{const Ce=he.startOf("week"),Ne=_e.endOf("week"),$e=Ce.get("month"),xe=Ne.get("month");return $e===xe?[[Ce,Ne]]:($e+1)%12===xe?adjacentMonth(Ce,Ne):$e+2===xe||($e+1)%11===xe?threeConsecutiveMonth(Ce,Ne):[]},le=he=>{V.value=he},de=he=>{const Ce={"prev-month":j.value,"next-month":ae.value,"prev-year":re.value,"next-year":oe.value,today:$}[he];Ce.isSame(z.value,"day")||le(Ce)};return useDeprecated({from:'"dateCell"',replacement:'"date-cell"',scope:"ElCalendar",version:"2.3.0",ref:"https://element-plus.org/en-US/component/calendar.html#slots",type:"Slot"},computed(()=>!!g.dateCell)),{calculateValidatedDateRange:ue,date:z,realSelectedDay:V,pickDay:le,selectDate:de,validatedRange:L}},isValidRange$1=e=>isArray$3(e)&&e.length===2&&e.every(n=>isDate$1(n)),calendarProps=buildProps({modelValue:{type:Date},range:{type:definePropType(Array),validator:isValidRange$1}}),calendarEmits={[UPDATE_MODEL_EVENT]:e=>isDate$1(e),[INPUT_EVENT]:e=>isDate$1(e)},COMPONENT_NAME$g="ElCalendar",__default__$1e=defineComponent({name:COMPONENT_NAME$g}),_sfc_main$31=defineComponent({...__default__$1e,props:calendarProps,emits:calendarEmits,setup(e,{expose:n,emit:r}){const g=e,y=useNamespace("calendar"),{calculateValidatedDateRange:k,date:$,pickDay:V,realSelectedDay:L,selectDate:z,validatedRange:j}=useCalendar(g,r),{t:ae}=useLocale(),re=computed(()=>{const oe=`el.datepicker.month${$.value.format("M")}`;return`${$.value.year()} ${ae("el.datepicker.year")} ${ae(oe)}`});return n({selectedDay:L,pickDay:V,selectDate:z,calculateValidatedDateRange:k}),(oe,ue)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(y).b())},[createBaseVNode("div",{class:normalizeClass(unref(y).e("header"))},[renderSlot(oe.$slots,"header",{date:unref(re)},()=>[createBaseVNode("div",{class:normalizeClass(unref(y).e("title"))},toDisplayString$1(unref(re)),3),unref(j).length===0?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(y).e("button-group"))},[createVNode(unref(ElButtonGroup$1),null,{default:withCtx(()=>[createVNode(unref(ElButton),{size:"small",onClick:ue[0]||(ue[0]=le=>unref(z)("prev-month"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(ae)("el.datepicker.prevMonth")),1)]),_:1}),createVNode(unref(ElButton),{size:"small",onClick:ue[1]||(ue[1]=le=>unref(z)("today"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(ae)("el.datepicker.today")),1)]),_:1}),createVNode(unref(ElButton),{size:"small",onClick:ue[2]||(ue[2]=le=>unref(z)("next-month"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(ae)("el.datepicker.nextMonth")),1)]),_:1})]),_:1})],2)):createCommentVNode("v-if",!0)])],2),unref(j).length===0?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(y).e("body"))},[createVNode(DateTable$1,{date:unref($),"selected-day":unref(L),onPick:unref(V)},createSlots({_:2},[oe.$slots["date-cell"]||oe.$slots.dateCell?{name:"date-cell",fn:withCtx(le=>[oe.$slots["date-cell"]?renderSlot(oe.$slots,"date-cell",normalizeProps(mergeProps({key:0},le))):renderSlot(oe.$slots,"dateCell",normalizeProps(mergeProps({key:1},le)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(y).e("body"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(j),(le,de)=>(openBlock(),createBlock(DateTable$1,{key:de,date:le[0],"selected-day":unref(L),range:le,"hide-header":de!==0,onPick:unref(V)},createSlots({_:2},[oe.$slots["date-cell"]||oe.$slots.dateCell?{name:"date-cell",fn:withCtx(he=>[oe.$slots["date-cell"]?renderSlot(oe.$slots,"date-cell",normalizeProps(mergeProps({key:0},he))):renderSlot(oe.$slots,"dateCell",normalizeProps(mergeProps({key:1},he)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var Calendar=_export_sfc$1(_sfc_main$31,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/calendar.vue"]]);const ElCalendar=withInstall(Calendar),cardProps=buildProps({header:{type:String,default:""},bodyStyle:{type:definePropType([String,Object,Array]),default:""},bodyClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),__default__$1d=defineComponent({name:"ElCard"}),_sfc_main$30=defineComponent({...__default__$1d,props:cardProps,setup(e){const n=useNamespace("card");return(r,g)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(n).b(),unref(n).is(`${r.shadow}-shadow`)])},[r.$slots.header||r.header?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(n).e("header"))},[renderSlot(r.$slots,"header",{},()=>[createTextVNode(toDisplayString$1(r.header),1)])],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass([unref(n).e("body"),r.bodyClass]),style:normalizeStyle(r.bodyStyle)},[renderSlot(r.$slots,"default")],6)],2))}});var Card=_export_sfc$1(_sfc_main$30,[["__file","/home/runner/work/element-plus/element-plus/packages/components/card/src/card.vue"]]);const ElCard=withInstall(Card),carouselProps=buildProps({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),carouselEmits={change:(e,n)=>[e,n].every(isNumber$1)},carouselContextKey=Symbol("carouselContextKey"),THROTTLE_TIME=300,useCarousel=(e,n,r)=>{const{children:g,addChild:y,removeChild:k}=useOrderedChildren(getCurrentInstance(),"ElCarouselItem"),$=ref(-1),V=ref(null),L=ref(!1),z=ref(),j=ref(0),ae=computed(()=>e.arrow!=="never"&&!unref(ue)),re=computed(()=>g.value.some(kn=>kn.props.label.toString().length>0)),oe=computed(()=>e.type==="card"),ue=computed(()=>e.direction==="vertical"),le=computed(()=>e.height!=="auto"?{height:e.height}:{height:`${j.value}px`,overflow:"hidden"}),de=throttle(kn=>{$e(kn)},THROTTLE_TIME,{trailing:!0}),he=throttle(kn=>{Sn(kn)},THROTTLE_TIME);function _e(){V.value&&(clearInterval(V.value),V.value=null)}function Ce(){e.interval<=0||!e.autoplay||V.value||(V.value=setInterval(()=>Ne(),e.interval))}const Ne=()=>{$.value<g.value.length-1?$.value=$.value+1:e.loop&&($.value=0)};function $e(kn){if(isString$3(kn)){const Tn=g.value.filter(Hn=>Hn.props.name===kn);Tn.length>0&&(kn=g.value.indexOf(Tn[0]))}if(kn=Number(kn),Number.isNaN(kn)||kn!==Math.floor(kn))return;const jn=g.value.length,Fn=$.value;kn<0?$.value=e.loop?jn-1:0:kn>=jn?$.value=e.loop?0:jn-1:$.value=kn,Fn===$.value&&xe(Fn),Mn()}function xe(kn){g.value.forEach((jn,Fn)=>{jn.translateItem(Fn,$.value,kn)})}function Ie(kn,jn){var Fn,Tn,Hn,la;const ca=unref(g),Zn=ca.length;if(Zn===0||!kn.states.inStage)return!1;const Bn=jn+1,Wn=jn-1,da=Zn-1,ga=ca[da].states.active,Ca=ca[0].states.active,ra=(Tn=(Fn=ca[Bn])==null?void 0:Fn.states)==null?void 0:Tn.active,Gn=(la=(Hn=ca[Wn])==null?void 0:Hn.states)==null?void 0:la.active;return jn===da&&Ca||ra?"left":jn===0&&ga||Gn?"right":!1}function ze(){L.value=!0,e.pauseOnHover&&_e()}function qe(){L.value=!1,Ce()}function Et(kn){unref(ue)||g.value.forEach((jn,Fn)=>{kn===Ie(jn,Fn)&&(jn.states.hover=!0)})}function _n(){unref(ue)||g.value.forEach(kn=>{kn.states.hover=!1})}function Dt(kn){$.value=kn}function Sn(kn){e.trigger==="hover"&&kn!==$.value&&($.value=kn)}function hn(){$e($.value-1)}function Vn(){$e($.value+1)}function Mn(){_e(),Ce()}function $n(kn){e.height==="auto"&&(j.value=kn)}watch(()=>$.value,(kn,jn)=>{xe(jn),jn>-1&&n("change",kn,jn)}),watch(()=>e.autoplay,kn=>{kn?Ce():_e()}),watch(()=>e.loop,()=>{$e($.value)}),watch(()=>e.interval,()=>{Mn()}),watch(()=>g.value,()=>{g.value.length>0&&$e(e.initialIndex)});const Nn=shallowRef();return onMounted(()=>{Nn.value=useResizeObserver(z.value,()=>{xe()}),Ce()}),onBeforeUnmount(()=>{_e(),z.value&&Nn.value&&Nn.value.stop()}),provide(carouselContextKey,{root:z,isCardType:oe,isVertical:ue,items:g,loop:e.loop,addItem:y,removeItem:k,setActiveItem:$e,setContainerHeight:$n}),{root:z,activeIndex:$,arrowDisplay:ae,hasLabel:re,hover:L,isCardType:oe,items:g,isVertical:ue,containerStyle:le,handleButtonEnter:Et,handleButtonLeave:_n,handleIndicatorClick:Dt,handleMouseEnter:ze,handleMouseLeave:qe,setActiveItem:$e,prev:hn,next:Vn,throttledArrowClick:de,throttledIndicatorHover:he}},_hoisted_1$24=["onMouseenter","onClick"],_hoisted_2$1I={key:0},COMPONENT_NAME$f="ElCarousel",__default__$1c=defineComponent({name:COMPONENT_NAME$f}),_sfc_main$2$=defineComponent({...__default__$1c,props:carouselProps,emits:carouselEmits,setup(e,{expose:n,emit:r}){const g=e,{root:y,activeIndex:k,arrowDisplay:$,hasLabel:V,hover:L,isCardType:z,items:j,isVertical:ae,containerStyle:re,handleButtonEnter:oe,handleButtonLeave:ue,handleIndicatorClick:le,handleMouseEnter:de,handleMouseLeave:he,setActiveItem:_e,prev:Ce,next:Ne,throttledArrowClick:$e,throttledIndicatorHover:xe}=useCarousel(g,r),Ie=useNamespace("carousel"),ze=computed(()=>{const Et=[Ie.b(),Ie.m(g.direction)];return unref(z)&&Et.push(Ie.m("card")),Et}),qe=computed(()=>{const Et=[Ie.e("indicators"),Ie.em("indicators",g.direction)];return unref(V)&&Et.push(Ie.em("indicators","labels")),g.indicatorPosition==="outside"&&Et.push(Ie.em("indicators","outside")),unref(ae)&&Et.push(Ie.em("indicators","right")),Et});return n({setActiveItem:_e,prev:Ce,next:Ne}),(Et,_n)=>(openBlock(),createElementBlock("div",{ref_key:"root",ref:y,class:normalizeClass(unref(ze)),onMouseenter:_n[6]||(_n[6]=withModifiers((...Dt)=>unref(de)&&unref(de)(...Dt),["stop"])),onMouseleave:_n[7]||(_n[7]=withModifiers((...Dt)=>unref(he)&&unref(he)(...Dt),["stop"]))},[createBaseVNode("div",{class:normalizeClass(unref(Ie).e("container")),style:normalizeStyle(unref(re))},[unref($)?(openBlock(),createBlock(Transition,{key:0,name:"carousel-arrow-left",persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("button",{type:"button",class:normalizeClass([unref(Ie).e("arrow"),unref(Ie).em("arrow","left")]),onMouseenter:_n[0]||(_n[0]=Dt=>unref(oe)("left")),onMouseleave:_n[1]||(_n[1]=(...Dt)=>unref(ue)&&unref(ue)(...Dt)),onClick:_n[2]||(_n[2]=withModifiers(Dt=>unref($e)(unref(k)-1),["stop"]))},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1})],34),[[vShow,(Et.arrow==="always"||unref(L))&&(g.loop||unref(k)>0)]])]),_:1})):createCommentVNode("v-if",!0),unref($)?(openBlock(),createBlock(Transition,{key:1,name:"carousel-arrow-right",persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("button",{type:"button",class:normalizeClass([unref(Ie).e("arrow"),unref(Ie).em("arrow","right")]),onMouseenter:_n[3]||(_n[3]=Dt=>unref(oe)("right")),onMouseleave:_n[4]||(_n[4]=(...Dt)=>unref(ue)&&unref(ue)(...Dt)),onClick:_n[5]||(_n[5]=withModifiers(Dt=>unref($e)(unref(k)+1),["stop"]))},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})],34),[[vShow,(Et.arrow==="always"||unref(L))&&(g.loop||unref(k)<unref(j).length-1)]])]),_:1})):createCommentVNode("v-if",!0),renderSlot(Et.$slots,"default")],6),Et.indicatorPosition!=="none"?(openBlock(),createElementBlock("ul",{key:0,class:normalizeClass(unref(qe))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(j),(Dt,Sn)=>(openBlock(),createElementBlock("li",{key:Sn,class:normalizeClass([unref(Ie).e("indicator"),unref(Ie).em("indicator",Et.direction),unref(Ie).is("active",Sn===unref(k))]),onMouseenter:hn=>unref(xe)(Sn),onClick:withModifiers(hn=>unref(le)(Sn),["stop"])},[createBaseVNode("button",{class:normalizeClass(unref(Ie).e("button"))},[unref(V)?(openBlock(),createElementBlock("span",_hoisted_2$1I,toDisplayString$1(Dt.props.label),1)):createCommentVNode("v-if",!0)],2)],42,_hoisted_1$24))),128))],2)):createCommentVNode("v-if",!0)],34))}});var Carousel=_export_sfc$1(_sfc_main$2$,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const carouselItemProps=buildProps({name:{type:String,default:""},label:{type:[String,Number],default:""}}),useCarouselItem=(e,n)=>{const r=inject(carouselContextKey),g=getCurrentInstance(),y=.83,k=ref(),$=ref(!1),V=ref(0),L=ref(1),z=ref(!1),j=ref(!1),ae=ref(!1),re=ref(!1),{isCardType:oe,isVertical:ue}=r;function le(Ne,$e,xe){const Ie=xe-1,ze=$e-1,qe=$e+1,Et=xe/2;return $e===0&&Ne===Ie?-1:$e===Ie&&Ne===0?xe:Ne<ze&&$e-Ne>=Et?xe+1:Ne>qe&&Ne-$e>=Et?-2:Ne}function de(Ne,$e){var xe,Ie;const ze=unref(ue)?((xe=r.root.value)==null?void 0:xe.offsetHeight)||0:((Ie=r.root.value)==null?void 0:Ie.offsetWidth)||0;return ae.value?ze*((2-y)*(Ne-$e)+1)/4:Ne<$e?-(1+y)*ze/4:(3+y)*ze/4}function he(Ne,$e,xe){const Ie=r.root.value;return Ie?((xe?Ie.offsetHeight:Ie.offsetWidth)||0)*(Ne-$e):0}const _e=(Ne,$e,xe)=>{var Ie;const ze=unref(oe),qe=(Ie=r.items.value.length)!=null?Ie:Number.NaN,Et=Ne===$e;!ze&&!isUndefined(xe)&&(re.value=Et||Ne===xe),!Et&&qe>2&&r.loop&&(Ne=le(Ne,$e,qe));const _n=unref(ue);z.value=Et,ze?(ae.value=Math.round(Math.abs(Ne-$e))<=1,V.value=de(Ne,$e),L.value=unref(z)?1:y):V.value=he(Ne,$e,_n),j.value=!0,Et&&k.value&&r.setContainerHeight(k.value.offsetHeight)};function Ce(){if(r&&unref(oe)){const Ne=r.items.value.findIndex(({uid:$e})=>$e===g.uid);r.setActiveItem(Ne)}}return onMounted(()=>{r.addItem({props:e,states:reactive({hover:$,translate:V,scale:L,active:z,ready:j,inStage:ae,animating:re}),uid:g.uid,translateItem:_e})}),onUnmounted(()=>{r.removeItem(g.uid)}),{carouselItemRef:k,active:z,animating:re,hover:$,inStage:ae,isVertical:ue,translate:V,isCardType:oe,scale:L,ready:j,handleItemClick:Ce}},__default__$1b=defineComponent({name:"ElCarouselItem"}),_sfc_main$2_=defineComponent({...__default__$1b,props:carouselItemProps,setup(e){const n=e,r=useNamespace("carousel"),{carouselItemRef:g,active:y,animating:k,hover:$,inStage:V,isVertical:L,translate:z,isCardType:j,scale:ae,ready:re,handleItemClick:oe}=useCarouselItem(n),ue=computed(()=>{const de=`${`translate${unref(L)?"Y":"X"}`}(${unref(z)}px)`,he=`scale(${unref(ae)})`;return{transform:[de,he].join(" ")}});return(le,de)=>withDirectives((openBlock(),createElementBlock("div",{ref_key:"carouselItemRef",ref:g,class:normalizeClass([unref(r).e("item"),unref(r).is("active",unref(y)),unref(r).is("in-stage",unref(V)),unref(r).is("hover",unref($)),unref(r).is("animating",unref(k)),{[unref(r).em("item","card")]:unref(j),[unref(r).em("item","card-vertical")]:unref(j)&&unref(L)}]),style:normalizeStyle(unref(ue)),onClick:de[0]||(de[0]=(...he)=>unref(oe)&&unref(oe)(...he))},[unref(j)?withDirectives((openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(r).e("mask"))},null,2)),[[vShow,!unref(y)]]):createCommentVNode("v-if",!0),renderSlot(le.$slots,"default")],6)),[[vShow,unref(re)]])}});var CarouselItem=_export_sfc$1(_sfc_main$2_,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const ElCarousel=withInstall(Carousel,{CarouselItem}),ElCarouselItem=withNoopInstall(CarouselItem),checkboxProps={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object]},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:useSizeProp,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0}},checkboxEmits={[UPDATE_MODEL_EVENT]:e=>isString$3(e)||isNumber$1(e)||isBoolean$1(e),change:e=>isString$3(e)||isNumber$1(e)||isBoolean$1(e)},checkboxGroupContextKey=Symbol("checkboxGroupContextKey"),useCheckboxDisabled=({model:e,isChecked:n})=>{const r=inject(checkboxGroupContextKey,void 0),g=computed(()=>{var k,$;const V=(k=r?.max)==null?void 0:k.value,L=($=r?.min)==null?void 0:$.value;return!isUndefined(V)&&e.value.length>=V&&!n.value||!isUndefined(L)&&e.value.length<=L&&n.value});return{isDisabled:useFormDisabled(computed(()=>r?.disabled.value||g.value)),isLimitDisabled:g}},useCheckboxEvent=(e,{model:n,isLimitExceeded:r,hasOwnLabel:g,isDisabled:y,isLabeledByFormItem:k})=>{const $=inject(checkboxGroupContextKey,void 0),{formItem:V}=useFormItem(),{emit:L}=getCurrentInstance();function z(ue){var le,de;return ue===e.trueLabel||ue===!0?(le=e.trueLabel)!=null?le:!0:(de=e.falseLabel)!=null?de:!1}function j(ue,le){L("change",z(ue),le)}function ae(ue){if(r.value)return;const le=ue.target;L("change",z(le.checked),ue)}async function re(ue){r.value||!g.value&&!y.value&&k.value&&(ue.composedPath().some(he=>he.tagName==="LABEL")||(n.value=z([!1,e.falseLabel].includes(n.value)),await nextTick(),j(n.value,ue)))}const oe=computed(()=>$?.validateEvent||e.validateEvent);return watch(()=>e.modelValue,()=>{oe.value&&V?.validate("change").catch(ue=>void 0)}),{handleChange:ae,onClickRoot:re}},useCheckboxModel=e=>{const n=ref(!1),{emit:r}=getCurrentInstance(),g=inject(checkboxGroupContextKey,void 0),y=computed(()=>isUndefined(g)===!1),k=ref(!1);return{model:computed({get(){var V,L;return y.value?(V=g?.modelValue)==null?void 0:V.value:(L=e.modelValue)!=null?L:n.value},set(V){var L,z;y.value&&isArray$3(V)?(k.value=((L=g?.max)==null?void 0:L.value)!==void 0&&V.length>g?.max.value,k.value===!1&&((z=g?.changeEvent)==null||z.call(g,V))):(r(UPDATE_MODEL_EVENT,V),n.value=V)}}),isGroup:y,isLimitExceeded:k}},useCheckboxStatus=(e,n,{model:r})=>{const g=inject(checkboxGroupContextKey,void 0),y=ref(!1),k=computed(()=>{const z=r.value;return isBoolean$1(z)?z:isArray$3(z)?isObject$3(e.label)?z.map(toRaw).some(j=>isEqual$1(j,e.label)):z.map(toRaw).includes(e.label):z!=null?z===e.trueLabel:!!z}),$=useFormSize(computed(()=>{var z;return(z=g?.size)==null?void 0:z.value}),{prop:!0}),V=useFormSize(computed(()=>{var z;return(z=g?.size)==null?void 0:z.value})),L=computed(()=>!!(n.default||e.label));return{checkboxButtonSize:$,isChecked:k,isFocused:y,checkboxSize:V,hasOwnLabel:L}},setStoreValue=(e,{model:n})=>{function r(){isArray$3(n.value)&&!n.value.includes(e.label)?n.value.push(e.label):n.value=e.trueLabel||!0}e.checked&&r()},useCheckbox=(e,n)=>{const{formItem:r}=useFormItem(),{model:g,isGroup:y,isLimitExceeded:k}=useCheckboxModel(e),{isFocused:$,isChecked:V,checkboxButtonSize:L,checkboxSize:z,hasOwnLabel:j}=useCheckboxStatus(e,n,{model:g}),{isDisabled:ae}=useCheckboxDisabled({model:g,isChecked:V}),{inputId:re,isLabeledByFormItem:oe}=useFormItemInputId(e,{formItemContext:r,disableIdGeneration:j,disableIdManagement:y}),{handleChange:ue,onClickRoot:le}=useCheckboxEvent(e,{model:g,isLimitExceeded:k,hasOwnLabel:j,isDisabled:ae,isLabeledByFormItem:oe});return setStoreValue(e,{model:g}),{inputId:re,isLabeledByFormItem:oe,isChecked:V,isDisabled:ae,isFocused:$,checkboxButtonSize:L,checkboxSize:z,hasOwnLabel:j,model:g,handleChange:ue,onClickRoot:le}},_hoisted_1$23=["tabindex","role","aria-checked"],_hoisted_2$1H=["id","aria-hidden","name","tabindex","disabled","true-value","false-value"],_hoisted_3$11=["id","aria-hidden","disabled","value","name","tabindex"],__default__$1a=defineComponent({name:"ElCheckbox"}),_sfc_main$2Z=defineComponent({...__default__$1a,props:checkboxProps,emits:checkboxEmits,setup(e){const n=e,r=useSlots(),{inputId:g,isLabeledByFormItem:y,isChecked:k,isDisabled:$,isFocused:V,checkboxSize:L,hasOwnLabel:z,model:j,handleChange:ae,onClickRoot:re}=useCheckbox(n,r),oe=useNamespace("checkbox"),ue=computed(()=>[oe.b(),oe.m(L.value),oe.is("disabled",$.value),oe.is("bordered",n.border),oe.is("checked",k.value)]),le=computed(()=>[oe.e("input"),oe.is("disabled",$.value),oe.is("checked",k.value),oe.is("indeterminate",n.indeterminate),oe.is("focus",V.value)]);return(de,he)=>(openBlock(),createBlock(resolveDynamicComponent(!unref(z)&&unref(y)?"span":"label"),{class:normalizeClass(unref(ue)),"aria-controls":de.indeterminate?de.controls:null,onClick:unref(re)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(unref(le)),tabindex:de.indeterminate?0:void 0,role:de.indeterminate?"checkbox":void 0,"aria-checked":de.indeterminate?"mixed":void 0},[de.trueLabel||de.falseLabel?withDirectives((openBlock(),createElementBlock("input",{key:0,id:unref(g),"onUpdate:modelValue":he[0]||(he[0]=_e=>isRef(j)?j.value=_e:null),class:normalizeClass(unref(oe).e("original")),type:"checkbox","aria-hidden":de.indeterminate?"true":"false",name:de.name,tabindex:de.tabindex,disabled:unref($),"true-value":de.trueLabel,"false-value":de.falseLabel,onChange:he[1]||(he[1]=(..._e)=>unref(ae)&&unref(ae)(..._e)),onFocus:he[2]||(he[2]=_e=>V.value=!0),onBlur:he[3]||(he[3]=_e=>V.value=!1),onClick:he[4]||(he[4]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$1H)),[[vModelCheckbox,unref(j)]]):withDirectives((openBlock(),createElementBlock("input",{key:1,id:unref(g),"onUpdate:modelValue":he[5]||(he[5]=_e=>isRef(j)?j.value=_e:null),class:normalizeClass(unref(oe).e("original")),type:"checkbox","aria-hidden":de.indeterminate?"true":"false",disabled:unref($),value:de.label,name:de.name,tabindex:de.tabindex,onChange:he[6]||(he[6]=(..._e)=>unref(ae)&&unref(ae)(..._e)),onFocus:he[7]||(he[7]=_e=>V.value=!0),onBlur:he[8]||(he[8]=_e=>V.value=!1),onClick:he[9]||(he[9]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_3$11)),[[vModelCheckbox,unref(j)]]),createBaseVNode("span",{class:normalizeClass(unref(oe).e("inner"))},null,2)],10,_hoisted_1$23),unref(z)?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(oe).e("label"))},[renderSlot(de.$slots,"default"),de.$slots.default?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString$1(de.label),1)],64))],2)):createCommentVNode("v-if",!0)]),_:3},8,["class","aria-controls","onClick"]))}});var Checkbox=_export_sfc$1(_sfc_main$2Z,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox.vue"]]);const _hoisted_1$22=["name","tabindex","disabled","true-value","false-value"],_hoisted_2$1G=["name","tabindex","disabled","value"],__default__$19=defineComponent({name:"ElCheckboxButton"}),_sfc_main$2Y=defineComponent({...__default__$19,props:checkboxProps,emits:checkboxEmits,setup(e){const n=e,r=useSlots(),{isFocused:g,isChecked:y,isDisabled:k,checkboxButtonSize:$,model:V,handleChange:L}=useCheckbox(n,r),z=inject(checkboxGroupContextKey,void 0),j=useNamespace("checkbox"),ae=computed(()=>{var oe,ue,le,de;const he=(ue=(oe=z?.fill)==null?void 0:oe.value)!=null?ue:"";return{backgroundColor:he,borderColor:he,color:(de=(le=z?.textColor)==null?void 0:le.value)!=null?de:"",boxShadow:he?`-1px 0 0 0 ${he}`:void 0}}),re=computed(()=>[j.b("button"),j.bm("button",$.value),j.is("disabled",k.value),j.is("checked",y.value),j.is("focus",g.value)]);return(oe,ue)=>(openBlock(),createElementBlock("label",{class:normalizeClass(unref(re))},[oe.trueLabel||oe.falseLabel?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":ue[0]||(ue[0]=le=>isRef(V)?V.value=le:null),class:normalizeClass(unref(j).be("button","original")),type:"checkbox",name:oe.name,tabindex:oe.tabindex,disabled:unref(k),"true-value":oe.trueLabel,"false-value":oe.falseLabel,onChange:ue[1]||(ue[1]=(...le)=>unref(L)&&unref(L)(...le)),onFocus:ue[2]||(ue[2]=le=>g.value=!0),onBlur:ue[3]||(ue[3]=le=>g.value=!1),onClick:ue[4]||(ue[4]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$22)),[[vModelCheckbox,unref(V)]]):withDirectives((openBlock(),createElementBlock("input",{key:1,"onUpdate:modelValue":ue[5]||(ue[5]=le=>isRef(V)?V.value=le:null),class:normalizeClass(unref(j).be("button","original")),type:"checkbox",name:oe.name,tabindex:oe.tabindex,disabled:unref(k),value:oe.label,onChange:ue[6]||(ue[6]=(...le)=>unref(L)&&unref(L)(...le)),onFocus:ue[7]||(ue[7]=le=>g.value=!0),onBlur:ue[8]||(ue[8]=le=>g.value=!1),onClick:ue[9]||(ue[9]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$1G)),[[vModelCheckbox,unref(V)]]),oe.$slots.default||oe.label?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass(unref(j).be("button","inner")),style:normalizeStyle(unref(y)?unref(ae):void 0)},[renderSlot(oe.$slots,"default",{},()=>[createTextVNode(toDisplayString$1(oe.label),1)])],6)):createCommentVNode("v-if",!0)],2))}});var CheckboxButton=_export_sfc$1(_sfc_main$2Y,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-button.vue"]]);const checkboxGroupProps=buildProps({modelValue:{type:definePropType(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:useSizeProp,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0}}),checkboxGroupEmits={[UPDATE_MODEL_EVENT]:e=>isArray$3(e),change:e=>isArray$3(e)},__default__$18=defineComponent({name:"ElCheckboxGroup"}),_sfc_main$2X=defineComponent({...__default__$18,props:checkboxGroupProps,emits:checkboxGroupEmits,setup(e,{emit:n}){const r=e,g=useNamespace("checkbox"),{formItem:y}=useFormItem(),{inputId:k,isLabeledByFormItem:$}=useFormItemInputId(r,{formItemContext:y}),V=async z=>{n(UPDATE_MODEL_EVENT,z),await nextTick(),n("change",z)},L=computed({get(){return r.modelValue},set(z){V(z)}});return provide(checkboxGroupContextKey,{...pick(toRefs(r),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:L,changeEvent:V}),watch(()=>r.modelValue,()=>{r.validateEvent&&y?.validate("change").catch(z=>void 0)}),(z,j)=>{var ae;return openBlock(),createBlock(resolveDynamicComponent(z.tag),{id:unref(k),class:normalizeClass(unref(g).b("group")),role:"group","aria-label":unref($)?void 0:z.label||"checkbox-group","aria-labelledby":unref($)?(ae=unref(y))==null?void 0:ae.labelId:void 0},{default:withCtx(()=>[renderSlot(z.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var CheckboxGroup=_export_sfc$1(_sfc_main$2X,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-group.vue"]]);const ElCheckbox=withInstall(Checkbox,{CheckboxButton,CheckboxGroup}),ElCheckboxButton=withNoopInstall(CheckboxButton),ElCheckboxGroup$1=withNoopInstall(CheckboxGroup),radioPropsBase=buildProps({size:useSizeProp,disabled:Boolean,label:{type:[String,Number,Boolean],default:""}}),radioProps=buildProps({...radioPropsBase,modelValue:{type:[String,Number,Boolean],default:""},name:{type:String,default:""},border:Boolean}),radioEmits={[UPDATE_MODEL_EVENT]:e=>isString$3(e)||isNumber$1(e)||isBoolean$1(e),[CHANGE_EVENT]:e=>isString$3(e)||isNumber$1(e)||isBoolean$1(e)},radioGroupKey=Symbol("radioGroupKey"),useRadio=(e,n)=>{const r=ref(),g=inject(radioGroupKey,void 0),y=computed(()=>!!g),k=computed({get(){return y.value?g.modelValue:e.modelValue},set(j){y.value?g.changeEvent(j):n&&n(UPDATE_MODEL_EVENT,j),r.value.checked=e.modelValue===e.label}}),$=useFormSize(computed(()=>g?.size)),V=useFormDisabled(computed(()=>g?.disabled)),L=ref(!1),z=computed(()=>V.value||y.value&&k.value!==e.label?-1:0);return{radioRef:r,isGroup:y,radioGroup:g,focus:L,size:$,disabled:V,tabIndex:z,modelValue:k}},_hoisted_1$21=["value","name","disabled"],__default__$17=defineComponent({name:"ElRadio"}),_sfc_main$2W=defineComponent({...__default__$17,props:radioProps,emits:radioEmits,setup(e,{emit:n}){const r=e,g=useNamespace("radio"),{radioRef:y,radioGroup:k,focus:$,size:V,disabled:L,modelValue:z}=useRadio(r,n);function j(){nextTick(()=>n("change",z.value))}return(ae,re)=>{var oe;return openBlock(),createElementBlock("label",{class:normalizeClass([unref(g).b(),unref(g).is("disabled",unref(L)),unref(g).is("focus",unref($)),unref(g).is("bordered",ae.border),unref(g).is("checked",unref(z)===ae.label),unref(g).m(unref(V))])},[createBaseVNode("span",{class:normalizeClass([unref(g).e("input"),unref(g).is("disabled",unref(L)),unref(g).is("checked",unref(z)===ae.label)])},[withDirectives(createBaseVNode("input",{ref_key:"radioRef",ref:y,"onUpdate:modelValue":re[0]||(re[0]=ue=>isRef(z)?z.value=ue:null),class:normalizeClass(unref(g).e("original")),value:ae.label,name:ae.name||((oe=unref(k))==null?void 0:oe.name),disabled:unref(L),type:"radio",onFocus:re[1]||(re[1]=ue=>$.value=!0),onBlur:re[2]||(re[2]=ue=>$.value=!1),onChange:j,onClick:re[3]||(re[3]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$21),[[vModelRadio,unref(z)]]),createBaseVNode("span",{class:normalizeClass(unref(g).e("inner"))},null,2)],2),createBaseVNode("span",{class:normalizeClass(unref(g).e("label")),onKeydown:re[4]||(re[4]=withModifiers(()=>{},["stop"]))},[renderSlot(ae.$slots,"default",{},()=>[createTextVNode(toDisplayString$1(ae.label),1)])],34)],2)}}});var Radio=_export_sfc$1(_sfc_main$2W,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio.vue"]]);const radioButtonProps=buildProps({...radioPropsBase,name:{type:String,default:""}}),_hoisted_1$20=["value","name","disabled"],__default__$16=defineComponent({name:"ElRadioButton"}),_sfc_main$2V=defineComponent({...__default__$16,props:radioButtonProps,setup(e){const n=e,r=useNamespace("radio"),{radioRef:g,focus:y,size:k,disabled:$,modelValue:V,radioGroup:L}=useRadio(n),z=computed(()=>({backgroundColor:L?.fill||"",borderColor:L?.fill||"",boxShadow:L?.fill?`-1px 0 0 0 ${L.fill}`:"",color:L?.textColor||""}));return(j,ae)=>{var re;return openBlock(),createElementBlock("label",{class:normalizeClass([unref(r).b("button"),unref(r).is("active",unref(V)===j.label),unref(r).is("disabled",unref($)),unref(r).is("focus",unref(y)),unref(r).bm("button",unref(k))])},[withDirectives(createBaseVNode("input",{ref_key:"radioRef",ref:g,"onUpdate:modelValue":ae[0]||(ae[0]=oe=>isRef(V)?V.value=oe:null),class:normalizeClass(unref(r).be("button","original-radio")),value:j.label,type:"radio",name:j.name||((re=unref(L))==null?void 0:re.name),disabled:unref($),onFocus:ae[1]||(ae[1]=oe=>y.value=!0),onBlur:ae[2]||(ae[2]=oe=>y.value=!1),onClick:ae[3]||(ae[3]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$20),[[vModelRadio,unref(V)]]),createBaseVNode("span",{class:normalizeClass(unref(r).be("button","inner")),style:normalizeStyle(unref(V)===j.label?unref(z):{}),onKeydown:ae[4]||(ae[4]=withModifiers(()=>{},["stop"]))},[renderSlot(j.$slots,"default",{},()=>[createTextVNode(toDisplayString$1(j.label),1)])],38)],2)}}});var RadioButton=_export_sfc$1(_sfc_main$2V,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-button.vue"]]);const radioGroupProps=buildProps({id:{type:String,default:void 0},size:useSizeProp,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:""},fill:{type:String,default:""},label:{type:String,default:void 0},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0}}),radioGroupEmits=radioEmits,_hoisted_1$1$=["id","aria-label","aria-labelledby"],__default__$15=defineComponent({name:"ElRadioGroup"}),_sfc_main$2U=defineComponent({...__default__$15,props:radioGroupProps,emits:radioGroupEmits,setup(e,{emit:n}){const r=e,g=useNamespace("radio"),y=useId(),k=ref(),{formItem:$}=useFormItem(),{inputId:V,isLabeledByFormItem:L}=useFormItemInputId(r,{formItemContext:$}),z=ae=>{n(UPDATE_MODEL_EVENT,ae),nextTick(()=>n("change",ae))};onMounted(()=>{const ae=k.value.querySelectorAll("[type=radio]"),re=ae[0];!Array.from(ae).some(oe=>oe.checked)&&re&&(re.tabIndex=0)});const j=computed(()=>r.name||y.value);return provide(radioGroupKey,reactive({...toRefs(r),changeEvent:z,name:j})),watch(()=>r.modelValue,()=>{r.validateEvent&&$?.validate("change").catch(ae=>void 0)}),(ae,re)=>(openBlock(),createElementBlock("div",{id:unref(V),ref_key:"radioGroupRef",ref:k,class:normalizeClass(unref(g).b("group")),role:"radiogroup","aria-label":unref(L)?void 0:ae.label||"radio-group","aria-labelledby":unref(L)?unref($).labelId:void 0},[renderSlot(ae.$slots,"default")],10,_hoisted_1$1$))}});var RadioGroup=_export_sfc$1(_sfc_main$2U,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-group.vue"]]);const ElRadio=withInstall(Radio,{RadioButton,RadioGroup}),ElRadioGroup=withNoopInstall(RadioGroup),ElRadioButton=withNoopInstall(RadioButton);var NodeContent$1=defineComponent({name:"NodeContent",setup(){return{ns:useNamespace("cascader-node")}},render(){const{ns:e}=this,{node:n,panel:r}=this.$parent,{data:g,label:y}=n,{renderLabelFn:k}=r;return h$1("span",{class:e.e("label")},k?k({node:n,data:g}):y)}});const CASCADER_PANEL_INJECTION_KEY=Symbol(),_sfc_main$2T=defineComponent({name:"ElCascaderNode",components:{ElCheckbox,ElRadio,NodeContent:NodeContent$1,ElIcon,Check:check_default,Loading:loading_default,ArrowRight:arrow_right_default},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:n}){const r=inject(CASCADER_PANEL_INJECTION_KEY),g=useNamespace("cascader-node"),y=computed(()=>r.isHoverMenu),k=computed(()=>r.config.multiple),$=computed(()=>r.config.checkStrictly),V=computed(()=>{var xe;return(xe=r.checkedNodes[0])==null?void 0:xe.uid}),L=computed(()=>e.node.isDisabled),z=computed(()=>e.node.isLeaf),j=computed(()=>$.value&&!z.value||!L.value),ae=computed(()=>oe(r.expandingNode)),re=computed(()=>$.value&&r.checkedNodes.some(oe)),oe=xe=>{var Ie;const{level:ze,uid:qe}=e.node;return((Ie=xe?.pathNodes[ze-1])==null?void 0:Ie.uid)===qe},ue=()=>{ae.value||r.expandNode(e.node)},le=xe=>{const{node:Ie}=e;xe!==Ie.checked&&r.handleCheckChange(Ie,xe)},de=()=>{r.lazyLoad(e.node,()=>{z.value||ue()})},he=xe=>{y.value&&(_e(),!z.value&&n("expand",xe))},_e=()=>{const{node:xe}=e;!j.value||xe.loading||(xe.loaded?ue():de())},Ce=()=>{y.value&&!z.value||(z.value&&!L.value&&!$.value&&!k.value?$e(!0):_e())},Ne=xe=>{$.value?(le(xe),e.node.loaded&&ue()):$e(xe)},$e=xe=>{e.node.loaded?(le(xe),!$.value&&ue()):de()};return{panel:r,isHoverMenu:y,multiple:k,checkStrictly:$,checkedNodeId:V,isDisabled:L,isLeaf:z,expandable:j,inExpandingPath:ae,inCheckedPath:re,ns:g,handleHoverExpand:he,handleExpand:_e,handleClick:Ce,handleCheck:$e,handleSelectCheck:Ne}}}),_hoisted_1$1_=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],_hoisted_2$1F=createBaseVNode("span",null,null,-1);function _sfc_render$u(e,n,r,g,y,k){const $=resolveComponent("el-checkbox"),V=resolveComponent("el-radio"),L=resolveComponent("check"),z=resolveComponent("el-icon"),j=resolveComponent("node-content"),ae=resolveComponent("loading"),re=resolveComponent("arrow-right");return openBlock(),createElementBlock("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:normalizeClass([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:n[2]||(n[2]=(...oe)=>e.handleHoverExpand&&e.handleHoverExpand(...oe)),onFocus:n[3]||(n[3]=(...oe)=>e.handleHoverExpand&&e.handleHoverExpand(...oe)),onClick:n[4]||(n[4]=(...oe)=>e.handleClick&&e.handleClick(...oe))},[createCommentVNode(" prefix "),e.multiple?(openBlock(),createBlock($,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:n[0]||(n[0]=withModifiers(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(openBlock(),createBlock(V,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:n[1]||(n[1]=withModifiers(()=>{},["stop"]))},{default:withCtx(()=>[createCommentVNode(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),_hoisted_2$1F]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(openBlock(),createBlock(z,{key:2,class:normalizeClass(e.ns.e("prefix"))},{default:withCtx(()=>[createVNode(L)]),_:1},8,["class"])):createCommentVNode("v-if",!0),createCommentVNode(" content "),createVNode(j),createCommentVNode(" postfix "),e.isLeaf?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:3},[e.node.loading?(openBlock(),createBlock(z,{key:0,class:normalizeClass([e.ns.is("loading"),e.ns.e("postfix")])},{default:withCtx(()=>[createVNode(ae)]),_:1},8,["class"])):(openBlock(),createBlock(z,{key:1,class:normalizeClass(["arrow-right",e.ns.e("postfix")])},{default:withCtx(()=>[createVNode(re)]),_:1},8,["class"]))],64))],42,_hoisted_1$1_)}var ElCascaderNode=_export_sfc$1(_sfc_main$2T,[["render",_sfc_render$u],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const _sfc_main$2S=defineComponent({name:"ElCascaderMenu",components:{Loading:loading_default,ElIcon,ElScrollbar,ElCascaderNode},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const n=getCurrentInstance(),r=useNamespace("cascader-menu"),{t:g}=useLocale(),y=generateId();let k=null,$=null;const V=inject(CASCADER_PANEL_INJECTION_KEY),L=ref(null),z=computed(()=>!e.nodes.length),j=computed(()=>!V.initialLoaded),ae=computed(()=>`cascader-menu-${y}-${e.index}`),re=de=>{k=de.target},oe=de=>{if(!(!V.isHoverMenu||!k||!L.value))if(k.contains(de.target)){ue();const he=n.vnode.el,{left:_e}=he.getBoundingClientRect(),{offsetWidth:Ce,offsetHeight:Ne}=he,$e=de.clientX-_e,xe=k.offsetTop,Ie=xe+k.offsetHeight;L.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${$e} ${xe} L${Ce} 0 V${xe} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${$e} ${Ie} L${Ce} ${Ne} V${Ie} Z" />
        `}else $||($=window.setTimeout(le,V.config.hoverThreshold))},ue=()=>{$&&(clearTimeout($),$=null)},le=()=>{L.value&&(L.value.innerHTML="",ue())};return{ns:r,panel:V,hoverZone:L,isEmpty:z,isLoading:j,menuId:ae,t:g,handleExpand:re,handleMouseMove:oe,clearHoverZone:le}}});function _sfc_render$t(e,n,r,g,y,k){const $=resolveComponent("el-cascader-node"),V=resolveComponent("loading"),L=resolveComponent("el-icon"),z=resolveComponent("el-scrollbar");return openBlock(),createBlock(z,{key:e.menuId,tag:"ul",role:"menu",class:normalizeClass(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:withCtx(()=>{var j;return[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.nodes,ae=>(openBlock(),createBlock($,{key:ae.uid,node:ae,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(e.ns.e("empty-text"))},[createVNode(L,{size:"14",class:normalizeClass(e.ns.is("loading"))},{default:withCtx(()=>[createVNode(V)]),_:1},8,["class"]),createTextVNode(" "+toDisplayString$1(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(e.ns.e("empty-text"))},toDisplayString$1(e.t("el.cascader.noData")),3)):(j=e.panel)!=null&&j.isHoverMenu?(openBlock(),createElementBlock("svg",{key:2,ref:"hoverZone",class:normalizeClass(e.ns.e("hover-zone"))},null,2)):createCommentVNode("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var ElCascaderMenu=_export_sfc$1(_sfc_main$2S,[["render",_sfc_render$t],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]);let uid=0;const calculatePathNodes=e=>{const n=[e];let{parent:r}=e;for(;r;)n.unshift(r),r=r.parent;return n};let Node$2=class Do{constructor(n,r,g,y=!1){this.data=n,this.config=r,this.parent=g,this.root=y,this.uid=uid++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:k,label:$,children:V}=r,L=n[V],z=calculatePathNodes(this);this.level=y?0:g?g.level+1:1,this.value=n[k],this.label=n[$],this.pathNodes=z,this.pathValues=z.map(j=>j.value),this.pathLabels=z.map(j=>j.label),this.childrenData=L,this.children=(L||[]).map(j=>new Do(j,r,this)),this.loaded=!r.lazy||this.isLeaf||!isEmpty(L)}get isDisabled(){const{data:n,parent:r,config:g}=this,{disabled:y,checkStrictly:k}=g;return(isFunction$3(y)?y(n,this):!!n[y])||!k&&r?.isDisabled}get isLeaf(){const{data:n,config:r,childrenData:g,loaded:y}=this,{lazy:k,leaf:$}=r,V=isFunction$3($)?$(n,this):n[$];return isUndefined(V)?k&&!y?!1:!(Array.isArray(g)&&g.length):!!V}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(n){const{childrenData:r,children:g}=this,y=new Do(n,this.config,this);return Array.isArray(r)?r.push(n):this.childrenData=[n],g.push(y),y}calcText(n,r){const g=n?this.pathLabels.join(r):this.label;return this.text=g,g}broadcast(n,...r){const g=`onParent${capitalize$1(n)}`;this.children.forEach(y=>{y&&(y.broadcast(n,...r),y[g]&&y[g](...r))})}emit(n,...r){const{parent:g}=this,y=`onChild${capitalize$1(n)}`;g&&(g[y]&&g[y](...r),g.emit(n,...r))}onParentCheck(n){this.isDisabled||this.setCheckState(n)}onChildCheck(){const{children:n}=this,r=n.filter(y=>!y.isDisabled),g=r.length?r.every(y=>y.checked):!1;this.setCheckState(g)}setCheckState(n){const r=this.children.length,g=this.children.reduce((y,k)=>{const $=k.checked?1:k.indeterminate?.5:0;return y+$},0);this.checked=this.loaded&&this.children.filter(y=>!y.isDisabled).every(y=>y.loaded&&y.checked)&&n,this.indeterminate=this.loaded&&g!==r&&g>0}doCheck(n){if(this.checked===n)return;const{checkStrictly:r,multiple:g}=this.config;r||!g?this.checked=n:(this.broadcast("check",n),this.setCheckState(n),this.emit("check"))}};const flatNodes=(e,n)=>e.reduce((r,g)=>(g.isLeaf?r.push(g):(!n&&r.push(g),r=r.concat(flatNodes(g.children,n))),r),[]);class Store{constructor(n,r){this.config=r;const g=(n||[]).map(y=>new Node$2(y,this.config));this.nodes=g,this.allNodes=flatNodes(g,!1),this.leafNodes=flatNodes(g,!0)}getNodes(){return this.nodes}getFlattedNodes(n){return n?this.leafNodes:this.allNodes}appendNode(n,r){const g=r?r.appendChild(n):new Node$2(n,this.config);r||this.nodes.push(g),this.allNodes.push(g),g.isLeaf&&this.leafNodes.push(g)}appendNodes(n,r){n.forEach(g=>this.appendNode(g,r))}getNodeByValue(n,r=!1){return!n&&n!==0?null:this.getFlattedNodes(r).find(y=>isEqual$1(y.value,n)||isEqual$1(y.pathValues,n))||null}getSameNode(n){return n&&this.getFlattedNodes(!1).find(({value:g,level:y})=>isEqual$1(n.value,g)&&n.level===y)||null}}const CommonProps=buildProps({modelValue:{type:definePropType([Number,String,Array])},options:{type:definePropType(Array),default:()=>[]},props:{type:definePropType(Object),default:()=>({})}}),DefaultProps={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:NOOP,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},useCascaderConfig=e=>computed(()=>({...DefaultProps,...e.props})),getMenuIndex=e=>{if(!e)return 0;const n=e.id.split("-");return Number(n[n.length-2])},checkNode=e=>{if(!e)return;const n=e.querySelector("input");n?n.click():isLeaf(e)&&e.click()},sortByOriginalOrder=(e,n)=>{const r=n.slice(0),g=r.map(k=>k.uid),y=e.reduce((k,$)=>{const V=g.indexOf($.uid);return V>-1&&(k.push($),r.splice(V,1),g.splice(V,1)),k},[]);return y.push(...r),y},_sfc_main$2R=defineComponent({name:"ElCascaderPanel",components:{ElCascaderMenu},props:{...CommonProps,border:{type:Boolean,default:!0},renderLabel:Function},emits:[UPDATE_MODEL_EVENT,CHANGE_EVENT,"close","expand-change"],setup(e,{emit:n,slots:r}){let g=!1;const y=useNamespace("cascader"),k=useCascaderConfig(e);let $=null;const V=ref(!0),L=ref([]),z=ref(null),j=ref([]),ae=ref(null),re=ref([]),oe=computed(()=>k.value.expandTrigger==="hover"),ue=computed(()=>e.renderLabel||r.default),le=()=>{const{options:Dt}=e,Sn=k.value;g=!1,$=new Store(Dt,Sn),j.value=[$.getNodes()],Sn.lazy&&isEmpty(e.options)?(V.value=!1,de(void 0,hn=>{hn&&($=new Store(hn,Sn),j.value=[$.getNodes()]),V.value=!0,ze(!1,!0)})):ze(!1,!0)},de=(Dt,Sn)=>{const hn=k.value;Dt=Dt||new Node$2({},hn,void 0,!0),Dt.loading=!0;const Vn=Mn=>{const $n=Dt,Nn=$n.root?null:$n;Mn&&$?.appendNodes(Mn,Nn),$n.loading=!1,$n.loaded=!0,$n.childrenData=$n.childrenData||[],Sn&&Sn(Mn)};hn.lazyLoad(Dt,Vn)},he=(Dt,Sn)=>{var hn;const{level:Vn}=Dt,Mn=j.value.slice(0,Vn);let $n;Dt.isLeaf?$n=Dt.pathNodes[Vn-2]:($n=Dt,Mn.push(Dt.children)),((hn=ae.value)==null?void 0:hn.uid)!==$n?.uid&&(ae.value=Dt,j.value=Mn,!Sn&&n("expand-change",Dt?.pathValues||[]))},_e=(Dt,Sn,hn=!0)=>{const{checkStrictly:Vn,multiple:Mn}=k.value,$n=re.value[0];g=!0,!Mn&&$n?.doCheck(!1),Dt.doCheck(Sn),Ie(),hn&&!Mn&&!Vn&&n("close"),!hn&&!Mn&&!Vn&&Ce(Dt)},Ce=Dt=>{Dt&&(Dt=Dt.parent,Ce(Dt),Dt&&he(Dt))},Ne=Dt=>$?.getFlattedNodes(Dt),$e=Dt=>{var Sn;return(Sn=Ne(Dt))==null?void 0:Sn.filter(hn=>hn.checked!==!1)},xe=()=>{re.value.forEach(Dt=>Dt.doCheck(!1)),Ie(),j.value=j.value.slice(0,1),ae.value=null,n("expand-change",[])},Ie=()=>{var Dt;const{checkStrictly:Sn,multiple:hn}=k.value,Vn=re.value,Mn=$e(!Sn),$n=sortByOriginalOrder(Vn,Mn),Nn=$n.map(kn=>kn.valueByOption);re.value=$n,z.value=hn?Nn:(Dt=Nn[0])!=null?Dt:null},ze=(Dt=!1,Sn=!1)=>{const{modelValue:hn}=e,{lazy:Vn,multiple:Mn,checkStrictly:$n}=k.value,Nn=!$n;if(!(!V.value||g||!Sn&&isEqual$1(hn,z.value)))if(Vn&&!Dt){const jn=unique(flattenDeep(castArray(hn))).map(Fn=>$?.getNodeByValue(Fn)).filter(Fn=>!!Fn&&!Fn.loaded&&!Fn.loading);jn.length?jn.forEach(Fn=>{de(Fn,()=>ze(!1,Sn))}):ze(!0,Sn)}else{const kn=Mn?castArray(hn):[hn],jn=unique(kn.map(Fn=>$?.getNodeByValue(Fn,Nn)));qe(jn,Sn),z.value=cloneDeep(hn)}},qe=(Dt,Sn=!0)=>{const{checkStrictly:hn}=k.value,Vn=re.value,Mn=Dt.filter(kn=>!!kn&&(hn||kn.isLeaf)),$n=$?.getSameNode(ae.value),Nn=Sn&&$n||Mn[0];Nn?Nn.pathNodes.forEach(kn=>he(kn,!0)):ae.value=null,Vn.forEach(kn=>kn.doCheck(!1)),e.props.multiple?reactive(Mn).forEach(kn=>kn.doCheck(!0)):Mn.forEach(kn=>kn.doCheck(!0)),re.value=Mn,nextTick(Et)},Et=()=>{isClient&&L.value.forEach(Dt=>{const Sn=Dt?.$el;if(Sn){const hn=Sn.querySelector(`.${y.namespace.value}-scrollbar__wrap`),Vn=Sn.querySelector(`.${y.b("node")}.${y.is("active")}`)||Sn.querySelector(`.${y.b("node")}.in-active-path`);scrollIntoView$2(hn,Vn)}})},_n=Dt=>{const Sn=Dt.target,{code:hn}=Dt;switch(hn){case EVENT_CODE.up:case EVENT_CODE.down:{Dt.preventDefault();const Vn=hn===EVENT_CODE.up?-1:1;focusNode(getSibling(Sn,Vn,`.${y.b("node")}[tabindex="-1"]`));break}case EVENT_CODE.left:{Dt.preventDefault();const Vn=L.value[getMenuIndex(Sn)-1],Mn=Vn?.$el.querySelector(`.${y.b("node")}[aria-expanded="true"]`);focusNode(Mn);break}case EVENT_CODE.right:{Dt.preventDefault();const Vn=L.value[getMenuIndex(Sn)+1],Mn=Vn?.$el.querySelector(`.${y.b("node")}[tabindex="-1"]`);focusNode(Mn);break}case EVENT_CODE.enter:checkNode(Sn);break}};return provide(CASCADER_PANEL_INJECTION_KEY,reactive({config:k,expandingNode:ae,checkedNodes:re,isHoverMenu:oe,initialLoaded:V,renderLabelFn:ue,lazyLoad:de,expandNode:he,handleCheckChange:_e})),watch([k,()=>e.options],le,{deep:!0,immediate:!0}),watch(()=>e.modelValue,()=>{g=!1,ze()},{deep:!0}),watch(()=>z.value,Dt=>{isEqual$1(Dt,e.modelValue)||(n(UPDATE_MODEL_EVENT,Dt),n(CHANGE_EVENT,Dt))}),onBeforeUpdate(()=>L.value=[]),onMounted(()=>!isEmpty(e.modelValue)&&ze()),{ns:y,menuList:L,menus:j,checkedNodes:re,handleKeyDown:_n,handleCheckChange:_e,getFlattedNodes:Ne,getCheckedNodes:$e,clearCheckedNodes:xe,calculateCheckedValue:Ie,scrollToExpandingNode:Et}}});function _sfc_render$s(e,n,r,g,y,k){const $=resolveComponent("el-cascader-menu");return openBlock(),createElementBlock("div",{class:normalizeClass([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:n[0]||(n[0]=(...V)=>e.handleKeyDown&&e.handleKeyDown(...V))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.menus,(V,L)=>(openBlock(),createBlock($,{key:L,ref_for:!0,ref:z=>e.menuList[L]=z,index:L,nodes:[...V]},null,8,["index","nodes"]))),128))],34)}var CascaderPanel=_export_sfc$1(_sfc_main$2R,[["render",_sfc_render$s],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);CascaderPanel.install=e=>{e.component(CascaderPanel.name,CascaderPanel)};const _CascaderPanel=CascaderPanel,ElCascaderPanel=_CascaderPanel,tagProps=buildProps({type:{type:String,values:["success","info","warning","danger",""],default:""},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:{type:String,default:""},size:{type:String,values:componentSizes,default:""},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),tagEmits={close:e=>e instanceof MouseEvent,click:e=>e instanceof MouseEvent},__default__$14=defineComponent({name:"ElTag"}),_sfc_main$2Q=defineComponent({...__default__$14,props:tagProps,emits:tagEmits,setup(e,{emit:n}){const r=e,g=useFormSize(),y=useNamespace("tag"),k=computed(()=>{const{type:L,hit:z,effect:j,closable:ae,round:re}=r;return[y.b(),y.is("closable",ae),y.m(L),y.m(g.value),y.m(j),y.is("hit",z),y.is("round",re)]}),$=L=>{n("close",L)},V=L=>{n("click",L)};return(L,z)=>L.disableTransitions?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(k)),style:normalizeStyle({backgroundColor:L.color}),onClick:V},[createBaseVNode("span",{class:normalizeClass(unref(y).e("content"))},[renderSlot(L.$slots,"default")],2),L.closable?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(y).e("close")),onClick:withModifiers($,["stop"])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],6)):(openBlock(),createBlock(Transition,{key:1,name:`${unref(y).namespace.value}-zoom-in-center`,appear:""},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(unref(k)),style:normalizeStyle({backgroundColor:L.color}),onClick:V},[createBaseVNode("span",{class:normalizeClass(unref(y).e("content"))},[renderSlot(L.$slots,"default")],2),L.closable?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(y).e("close")),onClick:withModifiers($,["stop"])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],6)]),_:3},8,["name"]))}});var Tag$1=_export_sfc$1(_sfc_main$2Q,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tag/src/tag.vue"]]);const ElTag=withInstall(Tag$1),cascaderProps=buildProps({...CommonProps,size:useSizeProp,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:definePropType(Function),default:(e,n)=>e.text.includes(n)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:definePropType(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:useTooltipContentProps.teleported,tagType:{...tagProps.type,default:"info"},validateEvent:{type:Boolean,default:!0}}),cascaderEmits={[UPDATE_MODEL_EVENT]:e=>!!e||e===null,[CHANGE_EVENT]:e=>!!e||e===null,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,visibleChange:e=>isBoolean$1(e),expandChange:e=>!!e,removeTag:e=>!!e},_hoisted_1$1Z={key:0},_hoisted_2$1E=["placeholder","onKeydown"],_hoisted_3$10=["onClick"],COMPONENT_NAME$e="ElCascader",__default__$13=defineComponent({name:COMPONENT_NAME$e}),_sfc_main$2P=defineComponent({...__default__$13,props:cascaderProps,emits:cascaderEmits,setup(e,{expose:n,emit:r}){const g=e,y={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:bn})=>{const{modifiersData:jt,placement:Cn}=bn;["right","left","bottom","top"].includes(Cn)||(jt.arrow.x=35)},requires:["arrow"]}]},k=useAttrs$1();let $=0,V=0;const L=useNamespace("cascader"),z=useNamespace("input"),{t:j}=useLocale(),{form:ae,formItem:re}=useFormItem(),oe=ref(null),ue=ref(null),le=ref(null),de=ref(null),he=ref(null),_e=ref(!1),Ce=ref(!1),Ne=ref(!1),$e=ref(!1),xe=ref(""),Ie=ref(""),ze=ref([]),qe=ref([]),Et=ref([]),_n=ref(!1),Dt=computed(()=>k.style),Sn=computed(()=>g.disabled||ae?.disabled),hn=computed(()=>g.placeholder||j("el.cascader.placeholder")),Vn=computed(()=>Ie.value||ze.value.length>0||_n.value?"":hn.value),Mn=useFormSize(),$n=computed(()=>["small"].includes(Mn.value)?"small":"default"),Nn=computed(()=>!!g.props.multiple),kn=computed(()=>!g.filterable||Nn.value),jn=computed(()=>Nn.value?Ie.value:xe.value),Fn=computed(()=>{var bn;return((bn=de.value)==null?void 0:bn.checkedNodes)||[]}),Tn=computed(()=>!g.clearable||Sn.value||Ne.value||!Ce.value?!1:!!Fn.value.length),Hn=computed(()=>{const{showAllLevels:bn,separator:jt}=g,Cn=Fn.value;return Cn.length?Nn.value?"":Cn[0].calcText(bn,jt):""}),la=computed({get(){return cloneDeep(g.modelValue)},set(bn){r(UPDATE_MODEL_EVENT,bn),r(CHANGE_EVENT,bn),g.validateEvent&&re?.validate("change").catch(jt=>void 0)}}),ca=computed(()=>[L.b(),L.m(Mn.value),L.is("disabled",Sn.value),k.class]),Zn=computed(()=>[z.e("icon"),"icon-arrow-down",L.is("reverse",_e.value)]),Bn=computed(()=>L.is("focus",_e.value||$e.value)),Wn=computed(()=>{var bn,jt;return(jt=(bn=oe.value)==null?void 0:bn.popperRef)==null?void 0:jt.contentRef}),da=bn=>{var jt,Cn,xn;Sn.value||(bn=bn??!_e.value,bn!==_e.value&&(_e.value=bn,(Cn=(jt=ue.value)==null?void 0:jt.input)==null||Cn.setAttribute("aria-expanded",`${bn}`),bn?(ga(),nextTick((xn=de.value)==null?void 0:xn.scrollToExpandingNode)):g.filterable&&ia(),r("visibleChange",bn)))},ga=()=>{nextTick(()=>{var bn;(bn=oe.value)==null||bn.updatePopper()})},Ca=()=>{Ne.value=!1},ra=bn=>{const{showAllLevels:jt,separator:Cn}=g;return{node:bn,key:bn.uid,text:bn.calcText(jt,Cn),hitState:!1,closable:!Sn.value&&!bn.isDisabled,isCollapseTag:!1}},Gn=bn=>{var jt;const Cn=bn.node;Cn.doCheck(!1),(jt=de.value)==null||jt.calculateCheckedValue(),r("removeTag",Cn.valueByOption)},vn=()=>{if(!Nn.value)return;const bn=Fn.value,jt=[],Cn=[];if(bn.forEach(xn=>Cn.push(ra(xn))),qe.value=Cn,bn.length){bn.slice(0,g.maxCollapseTags).forEach(Ln=>jt.push(ra(Ln)));const xn=bn.slice(g.maxCollapseTags),In=xn.length;In&&(g.collapseTags?jt.push({key:-1,text:`+ ${In}`,closable:!1,isCollapseTag:!0}):xn.forEach(Ln=>jt.push(ra(Ln))))}ze.value=jt},Kn=()=>{var bn,jt;const{filterMethod:Cn,showAllLevels:xn,separator:In}=g,Ln=(jt=(bn=de.value)==null?void 0:bn.getFlattedNodes(!g.props.checkStrictly))==null?void 0:jt.filter(An=>An.isDisabled?!1:(An.calcText(xn,In),Cn(An,jn.value)));Nn.value&&(ze.value.forEach(An=>{An.hitState=!1}),qe.value.forEach(An=>{An.hitState=!1})),Ne.value=!0,Et.value=Ln,ga()},En=()=>{var bn;let jt;Ne.value&&he.value?jt=he.value.$el.querySelector(`.${L.e("suggestion-item")}`):jt=(bn=de.value)==null?void 0:bn.$el.querySelector(`.${L.b("node")}[tabindex="-1"]`),jt&&(jt.focus(),!Ne.value&&jt.click())},kt=()=>{var bn,jt;const Cn=(bn=ue.value)==null?void 0:bn.input,xn=le.value,In=(jt=he.value)==null?void 0:jt.$el;if(!(!isClient||!Cn)){if(In){const Ln=In.querySelector(`.${L.e("suggestion-list")}`);Ln.style.minWidth=`${Cn.offsetWidth}px`}if(xn){const{offsetHeight:Ln}=xn,An=ze.value.length>0?`${Math.max(Ln+6,$)}px`:`${$}px`;Cn.style.height=An,ga()}}},At=bn=>{var jt;return(jt=de.value)==null?void 0:jt.getCheckedNodes(bn)},Dn=bn=>{ga(),r("expandChange",bn)},Xn=bn=>{var jt;const Cn=(jt=bn.target)==null?void 0:jt.value;if(bn.type==="compositionend")_n.value=!1,nextTick(()=>Pt(Cn));else{const xn=Cn[Cn.length-1]||"";_n.value=!isKorean(xn)}},aa=bn=>{if(!_n.value)switch(bn.code){case EVENT_CODE.enter:da();break;case EVENT_CODE.down:da(!0),nextTick(En),bn.preventDefault();break;case EVENT_CODE.esc:_e.value===!0&&(bn.preventDefault(),bn.stopPropagation(),da(!1));break;case EVENT_CODE.tab:da(!1);break}},sa=()=>{var bn;(bn=de.value)==null||bn.clearCheckedNodes(),!_e.value&&g.filterable&&ia(),da(!1)},ia=()=>{const{value:bn}=Hn;xe.value=bn,Ie.value=bn},ma=bn=>{var jt,Cn;const{checked:xn}=bn;Nn.value?(jt=de.value)==null||jt.handleCheckChange(bn,!xn,!1):(!xn&&((Cn=de.value)==null||Cn.handleCheckChange(bn,!0,!1)),da(!1))},ua=bn=>{const jt=bn.target,{code:Cn}=bn;switch(Cn){case EVENT_CODE.up:case EVENT_CODE.down:{const xn=Cn===EVENT_CODE.up?-1:1;focusNode(getSibling(jt,xn,`.${L.e("suggestion-item")}[tabindex="-1"]`));break}case EVENT_CODE.enter:jt.click();break}},pe=()=>{const bn=ze.value,jt=bn[bn.length-1];V=Ie.value?0:V+1,!(!jt||!V||g.collapseTags&&bn.length>1)&&(jt.hitState?Gn(jt):jt.hitState=!0)},Oe=bn=>{const jt=bn.target,Cn=L.e("search-input");jt.className===Cn&&($e.value=!0),r("focus",bn)},Ve=bn=>{$e.value=!1,r("blur",bn)},Ue=debounce(()=>{const{value:bn}=jn;if(!bn)return;const jt=g.beforeFilter(bn);isPromise(jt)?jt.then(Kn).catch(()=>{}):jt!==!1?Kn():Ca()},g.debounce),Pt=(bn,jt)=>{!_e.value&&da(!0),!jt?.isComposing&&(bn?Ue():Ca())},Lt=bn=>Number.parseFloat(useCssVar(z.cssVarName("input-height"),bn).value)-2;return watch(Ne,ga),watch([Fn,Sn],vn),watch(ze,()=>{nextTick(()=>kt())}),watch(Mn,async()=>{await nextTick();const bn=ue.value.input;$=Lt(bn)||$,kt()}),watch(Hn,ia,{immediate:!0}),onMounted(()=>{const bn=ue.value.input,jt=Lt(bn);$=bn.offsetHeight||jt,useResizeObserver(bn,kt)}),n({getCheckedNodes:At,cascaderPanelRef:de,togglePopperVisible:da,contentRef:Wn}),(bn,jt)=>(openBlock(),createBlock(unref(ElTooltip),{ref_key:"tooltipRef",ref:oe,visible:_e.value,teleported:bn.teleported,"popper-class":[unref(L).e("dropdown"),bn.popperClass],"popper-options":y,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${unref(L).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:Ca},{default:withCtx(()=>[withDirectives((openBlock(),createElementBlock("div",{class:normalizeClass(unref(ca)),style:normalizeStyle(unref(Dt)),onClick:jt[5]||(jt[5]=()=>da(unref(kn)?void 0:!0)),onKeydown:aa,onMouseenter:jt[6]||(jt[6]=Cn=>Ce.value=!0),onMouseleave:jt[7]||(jt[7]=Cn=>Ce.value=!1)},[createVNode(unref(ElInput),{ref_key:"input",ref:ue,modelValue:xe.value,"onUpdate:modelValue":jt[1]||(jt[1]=Cn=>xe.value=Cn),placeholder:unref(Vn),readonly:unref(kn),disabled:unref(Sn),"validate-event":!1,size:unref(Mn),class:normalizeClass(unref(Bn)),tabindex:unref(Nn)&&bn.filterable&&!unref(Sn)?-1:void 0,onCompositionstart:Xn,onCompositionupdate:Xn,onCompositionend:Xn,onFocus:Oe,onBlur:Ve,onInput:Pt},{suffix:withCtx(()=>[unref(Tn)?(openBlock(),createBlock(unref(ElIcon),{key:"clear",class:normalizeClass([unref(z).e("icon"),"icon-circle-close"]),onClick:withModifiers(sa,["stop"])},{default:withCtx(()=>[createVNode(unref(circle_close_default))]),_:1},8,["class","onClick"])):(openBlock(),createBlock(unref(ElIcon),{key:"arrow-down",class:normalizeClass(unref(Zn)),onClick:jt[0]||(jt[0]=withModifiers(Cn=>da(),["stop"]))},{default:withCtx(()=>[createVNode(unref(arrow_down_default))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),unref(Nn)?(openBlock(),createElementBlock("div",{key:0,ref_key:"tagWrapper",ref:le,class:normalizeClass(unref(L).e("tags"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(ze.value,Cn=>(openBlock(),createBlock(unref(ElTag),{key:Cn.key,type:bn.tagType,size:unref($n),hit:Cn.hitState,closable:Cn.closable,"disable-transitions":"",onClose:xn=>Gn(Cn)},{default:withCtx(()=>[Cn.isCollapseTag===!1?(openBlock(),createElementBlock("span",_hoisted_1$1Z,toDisplayString$1(Cn.text),1)):(openBlock(),createBlock(unref(ElTooltip),{key:1,disabled:_e.value||!bn.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(Cn.text),1)]),content:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(unref(L).e("collapse-tags"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(qe.value.slice(bn.maxCollapseTags),(xn,In)=>(openBlock(),createElementBlock("div",{key:In,class:normalizeClass(unref(L).e("collapse-tag"))},[(openBlock(),createBlock(unref(ElTag),{key:xn.key,class:"in-tooltip",type:bn.tagType,size:unref($n),hit:xn.hitState,closable:xn.closable,"disable-transitions":"",onClose:Ln=>Gn(xn)},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(xn.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),bn.filterable&&!unref(Sn)?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":jt[2]||(jt[2]=Cn=>Ie.value=Cn),type:"text",class:normalizeClass(unref(L).e("search-input")),placeholder:unref(Hn)?"":unref(hn),onInput:jt[3]||(jt[3]=Cn=>Pt(Ie.value,Cn)),onClick:jt[4]||(jt[4]=withModifiers(Cn=>da(!0),["stop"])),onKeydown:withKeys(pe,["delete"]),onCompositionstart:Xn,onCompositionupdate:Xn,onCompositionend:Xn,onFocus:Oe,onBlur:Ve},null,42,_hoisted_2$1E)),[[vModelText,Ie.value]]):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0)],38)),[[unref(ClickOutside),()=>da(!1),unref(Wn)]])]),content:withCtx(()=>[withDirectives(createVNode(unref(_CascaderPanel),{ref_key:"cascaderPanelRef",ref:de,modelValue:unref(la),"onUpdate:modelValue":jt[8]||(jt[8]=Cn=>isRef(la)?la.value=Cn:null),options:bn.options,props:g.props,border:!1,"render-label":bn.$slots.default,onExpandChange:Dn,onClose:jt[9]||(jt[9]=Cn=>bn.$nextTick(()=>da(!1)))},null,8,["modelValue","options","props","render-label"]),[[vShow,!Ne.value]]),bn.filterable?withDirectives((openBlock(),createBlock(unref(ElScrollbar),{key:0,ref_key:"suggestionPanel",ref:he,tag:"ul",class:normalizeClass(unref(L).e("suggestion-panel")),"view-class":unref(L).e("suggestion-list"),onKeydown:ua},{default:withCtx(()=>[Et.value.length?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(Et.value,Cn=>(openBlock(),createElementBlock("li",{key:Cn.uid,class:normalizeClass([unref(L).e("suggestion-item"),unref(L).is("checked",Cn.checked)]),tabindex:-1,onClick:xn=>ma(Cn)},[createBaseVNode("span",null,toDisplayString$1(Cn.text),1),Cn.checked?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[createVNode(unref(check_default))]),_:1})):createCommentVNode("v-if",!0)],10,_hoisted_3$10))),128)):renderSlot(bn.$slots,"empty",{key:1},()=>[createBaseVNode("li",{class:normalizeClass(unref(L).e("empty-text"))},toDisplayString$1(unref(j)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[vShow,Ne.value]]):createCommentVNode("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var Cascader=_export_sfc$1(_sfc_main$2P,[["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/cascader.vue"]]);Cascader.install=e=>{e.component(Cascader.name,Cascader)};const _Cascader=Cascader,ElCascader=_Cascader,checkTagProps=buildProps({checked:{type:Boolean,default:!1}}),checkTagEmits={"update:checked":e=>isBoolean$1(e),[CHANGE_EVENT]:e=>isBoolean$1(e)},__default__$12=defineComponent({name:"ElCheckTag"}),_sfc_main$2O=defineComponent({...__default__$12,props:checkTagProps,emits:checkTagEmits,setup(e,{emit:n}){const r=e,g=useNamespace("check-tag"),y=computed(()=>[g.b(),g.is("checked",r.checked)]),k=()=>{const $=!r.checked;n(CHANGE_EVENT,$),n("update:checked",$)};return($,V)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(y)),onClick:k},[renderSlot($.$slots,"default")],2))}});var CheckTag=_export_sfc$1(_sfc_main$2O,[["__file","/home/runner/work/element-plus/element-plus/packages/components/check-tag/src/check-tag.vue"]]);const ElCheckTag=withInstall(CheckTag),rowContextKey=Symbol("rowContextKey"),RowJustify=["start","center","end","space-around","space-between","space-evenly"],RowAlign=["top","middle","bottom"],rowProps=buildProps({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:RowJustify,default:"start"},align:{type:String,values:RowAlign}}),__default__$11=defineComponent({name:"ElRow"}),_sfc_main$2N=defineComponent({...__default__$11,props:rowProps,setup(e){const n=e,r=useNamespace("row"),g=computed(()=>n.gutter);provide(rowContextKey,{gutter:g});const y=computed(()=>{const $={};return n.gutter&&($.marginRight=$.marginLeft=`-${n.gutter/2}px`),$}),k=computed(()=>[r.b(),r.is(`justify-${n.justify}`,n.justify!=="start"),r.is(`align-${n.align}`,!!n.align)]);return($,V)=>(openBlock(),createBlock(resolveDynamicComponent($.tag),{class:normalizeClass(unref(k)),style:normalizeStyle(unref(y))},{default:withCtx(()=>[renderSlot($.$slots,"default")]),_:3},8,["class","style"]))}});var Row=_export_sfc$1(_sfc_main$2N,[["__file","/home/runner/work/element-plus/element-plus/packages/components/row/src/row.vue"]]);const ElRow=withInstall(Row),colProps=buildProps({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:definePropType([Number,Object]),default:()=>mutable({})},sm:{type:definePropType([Number,Object]),default:()=>mutable({})},md:{type:definePropType([Number,Object]),default:()=>mutable({})},lg:{type:definePropType([Number,Object]),default:()=>mutable({})},xl:{type:definePropType([Number,Object]),default:()=>mutable({})}}),__default__$10=defineComponent({name:"ElCol"}),_sfc_main$2M=defineComponent({...__default__$10,props:colProps,setup(e){const n=e,{gutter:r}=inject(rowContextKey,{gutter:computed(()=>0)}),g=useNamespace("col"),y=computed(()=>{const $={};return r.value&&($.paddingLeft=$.paddingRight=`${r.value/2}px`),$}),k=computed(()=>{const $=[];return["span","offset","pull","push"].forEach(z=>{const j=n[z];isNumber$1(j)&&(z==="span"?$.push(g.b(`${n[z]}`)):j>0&&$.push(g.b(`${z}-${n[z]}`)))}),["xs","sm","md","lg","xl"].forEach(z=>{isNumber$1(n[z])?$.push(g.b(`${z}-${n[z]}`)):isObject$3(n[z])&&Object.entries(n[z]).forEach(([j,ae])=>{$.push(j!=="span"?g.b(`${z}-${j}-${ae}`):g.b(`${z}-${ae}`))})}),r.value&&$.push(g.is("guttered")),[g.b(),$]});return($,V)=>(openBlock(),createBlock(resolveDynamicComponent($.tag),{class:normalizeClass(unref(k)),style:normalizeStyle(unref(y))},{default:withCtx(()=>[renderSlot($.$slots,"default")]),_:3},8,["class","style"]))}});var Col=_export_sfc$1(_sfc_main$2M,[["__file","/home/runner/work/element-plus/element-plus/packages/components/col/src/col.vue"]]);const ElCol=withInstall(Col),emitChangeFn=e=>typeof isNumber$1(e),collapseProps=buildProps({accordion:Boolean,modelValue:{type:definePropType([Array,String,Number]),default:()=>mutable([])}}),collapseEmits={[UPDATE_MODEL_EVENT]:emitChangeFn,[CHANGE_EVENT]:emitChangeFn},collapseContextKey=Symbol("collapseContextKey"),useCollapse=(e,n)=>{const r=ref(castArray$1(e.modelValue)),g=k=>{r.value=k;const $=e.accordion?r.value[0]:r.value;n(UPDATE_MODEL_EVENT,$),n(CHANGE_EVENT,$)},y=k=>{if(e.accordion)g([r.value[0]===k?"":k]);else{const $=[...r.value],V=$.indexOf(k);V>-1?$.splice(V,1):$.push(k),g($)}};return watch(()=>e.modelValue,()=>r.value=castArray$1(e.modelValue),{deep:!0}),provide(collapseContextKey,{activeNames:r,handleItemClick:y}),{activeNames:r,setActiveNames:g}},useCollapseDOM=()=>{const e=useNamespace("collapse");return{rootKls:computed(()=>e.b())}},__default__$$=defineComponent({name:"ElCollapse"}),_sfc_main$2L=defineComponent({...__default__$$,props:collapseProps,emits:collapseEmits,setup(e,{expose:n,emit:r}){const g=e,{activeNames:y,setActiveNames:k}=useCollapse(g,r),{rootKls:$}=useCollapseDOM();return n({activeNames:y,setActiveNames:k}),(V,L)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref($)),role:"tablist","aria-multiselectable":"true"},[renderSlot(V.$slots,"default")],2))}});var Collapse=_export_sfc$1(_sfc_main$2L,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse.vue"]]);const __default__$_=defineComponent({name:"ElCollapseTransition"}),_sfc_main$2K=defineComponent({...__default__$_,setup(e){const n=useNamespace("collapse-transition"),r=y=>{y.style.maxHeight="",y.style.overflow=y.dataset.oldOverflow,y.style.paddingTop=y.dataset.oldPaddingTop,y.style.paddingBottom=y.dataset.oldPaddingBottom},g={beforeEnter(y){y.dataset||(y.dataset={}),y.dataset.oldPaddingTop=y.style.paddingTop,y.dataset.oldPaddingBottom=y.style.paddingBottom,y.style.maxHeight=0,y.style.paddingTop=0,y.style.paddingBottom=0},enter(y){y.dataset.oldOverflow=y.style.overflow,y.scrollHeight!==0?y.style.maxHeight=`${y.scrollHeight}px`:y.style.maxHeight=0,y.style.paddingTop=y.dataset.oldPaddingTop,y.style.paddingBottom=y.dataset.oldPaddingBottom,y.style.overflow="hidden"},afterEnter(y){y.style.maxHeight="",y.style.overflow=y.dataset.oldOverflow},enterCancelled(y){r(y)},beforeLeave(y){y.dataset||(y.dataset={}),y.dataset.oldPaddingTop=y.style.paddingTop,y.dataset.oldPaddingBottom=y.style.paddingBottom,y.dataset.oldOverflow=y.style.overflow,y.style.maxHeight=`${y.scrollHeight}px`,y.style.overflow="hidden"},leave(y){y.scrollHeight!==0&&(y.style.maxHeight=0,y.style.paddingTop=0,y.style.paddingBottom=0)},afterLeave(y){r(y)},leaveCancelled(y){r(y)}};return(y,k)=>(openBlock(),createBlock(Transition,mergeProps({name:unref(n).b()},toHandlers(g)),{default:withCtx(()=>[renderSlot(y.$slots,"default")]),_:3},16,["name"]))}});var CollapseTransition=_export_sfc$1(_sfc_main$2K,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse-transition/src/collapse-transition.vue"]]);CollapseTransition.install=e=>{e.component(CollapseTransition.name,CollapseTransition)};const _CollapseTransition=CollapseTransition,ElCollapseTransition=_CollapseTransition,collapseItemProps=buildProps({title:{type:String,default:""},name:{type:definePropType([String,Number]),default:()=>generateId()},disabled:Boolean}),useCollapseItem=e=>{const n=inject(collapseContextKey),r=ref(!1),g=ref(!1),y=ref(generateId()),k=computed(()=>n?.activeNames.value.includes(e.name));return{focusing:r,id:y,isActive:k,handleFocus:()=>{setTimeout(()=>{g.value?g.value=!1:r.value=!0},50)},handleHeaderClick:()=>{e.disabled||(n?.handleItemClick(e.name),r.value=!1,g.value=!0)},handleEnterClick:()=>{n?.handleItemClick(e.name)}}},useCollapseItemDOM=(e,{focusing:n,isActive:r,id:g})=>{const y=useNamespace("collapse"),k=computed(()=>[y.b("item"),y.is("active",unref(r)),y.is("disabled",e.disabled)]),$=computed(()=>[y.be("item","header"),y.is("active",unref(r)),{focusing:unref(n)&&!e.disabled}]),V=computed(()=>[y.be("item","arrow"),y.is("active",unref(r))]),L=computed(()=>y.be("item","wrap")),z=computed(()=>y.be("item","content")),j=computed(()=>y.b(`content-${unref(g)}`)),ae=computed(()=>y.b(`head-${unref(g)}`));return{arrowKls:V,headKls:$,rootKls:k,itemWrapperKls:L,itemContentKls:z,scopedContentId:j,scopedHeadId:ae}},_hoisted_1$1Y=["aria-expanded","aria-controls","aria-describedby"],_hoisted_2$1D=["id","tabindex"],_hoisted_3$$=["id","aria-hidden","aria-labelledby"],__default__$Z=defineComponent({name:"ElCollapseItem"}),_sfc_main$2J=defineComponent({...__default__$Z,props:collapseItemProps,setup(e,{expose:n}){const r=e,{focusing:g,id:y,isActive:k,handleFocus:$,handleHeaderClick:V,handleEnterClick:L}=useCollapseItem(r),{arrowKls:z,headKls:j,rootKls:ae,itemWrapperKls:re,itemContentKls:oe,scopedContentId:ue,scopedHeadId:le}=useCollapseItemDOM(r,{focusing:g,isActive:k,id:y});return n({isActive:k}),(de,he)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(ae))},[createBaseVNode("div",{role:"tab","aria-expanded":unref(k),"aria-controls":unref(ue),"aria-describedby":unref(ue)},[createBaseVNode("div",{id:unref(le),class:normalizeClass(unref(j)),role:"button",tabindex:de.disabled?-1:0,onClick:he[0]||(he[0]=(..._e)=>unref(V)&&unref(V)(..._e)),onKeypress:he[1]||(he[1]=withKeys(withModifiers((..._e)=>unref(L)&&unref(L)(..._e),["stop","prevent"]),["space","enter"])),onFocus:he[2]||(he[2]=(..._e)=>unref($)&&unref($)(..._e)),onBlur:he[3]||(he[3]=_e=>g.value=!1)},[renderSlot(de.$slots,"title",{},()=>[createTextVNode(toDisplayString$1(de.title),1)]),createVNode(unref(ElIcon),{class:normalizeClass(unref(z))},{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1},8,["class"])],42,_hoisted_2$1D)],8,_hoisted_1$1Y),createVNode(unref(_CollapseTransition),null,{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:unref(ue),class:normalizeClass(unref(re)),role:"tabpanel","aria-hidden":!unref(k),"aria-labelledby":unref(le)},[createBaseVNode("div",{class:normalizeClass(unref(oe))},[renderSlot(de.$slots,"default")],2)],10,_hoisted_3$$),[[vShow,unref(k)]])]),_:3})],2))}});var CollapseItem=_export_sfc$1(_sfc_main$2J,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse-item.vue"]]);const ElCollapse=withInstall(Collapse,{CollapseItem}),ElCollapseItem=withNoopInstall(CollapseItem),alphaSliderProps=buildProps({color:{type:definePropType(Object),required:!0},vertical:{type:Boolean,default:!1}});let isDragging=!1;function draggable(e,n){if(!isClient)return;const r=function(k){var $;($=n.drag)==null||$.call(n,k)},g=function(k){var $;document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",g),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",g),document.onselectstart=null,document.ondragstart=null,isDragging=!1,($=n.end)==null||$.call(n,k)},y=function(k){var $;isDragging||(k.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",r),document.addEventListener("mouseup",g),document.addEventListener("touchmove",r),document.addEventListener("touchend",g),isDragging=!0,($=n.start)==null||$.call(n,k))};e.addEventListener("mousedown",y),e.addEventListener("touchstart",y)}const useAlphaSlider=e=>{const n=getCurrentInstance(),r=shallowRef(),g=shallowRef();function y($){$.target!==r.value&&k($)}function k($){if(!g.value||!r.value)return;const L=n.vnode.el.getBoundingClientRect(),{clientX:z,clientY:j}=getClientXY($);if(e.vertical){let ae=j-L.top;ae=Math.max(r.value.offsetHeight/2,ae),ae=Math.min(ae,L.height-r.value.offsetHeight/2),e.color.set("alpha",Math.round((ae-r.value.offsetHeight/2)/(L.height-r.value.offsetHeight)*100))}else{let ae=z-L.left;ae=Math.max(r.value.offsetWidth/2,ae),ae=Math.min(ae,L.width-r.value.offsetWidth/2),e.color.set("alpha",Math.round((ae-r.value.offsetWidth/2)/(L.width-r.value.offsetWidth)*100))}}return{thumb:r,bar:g,handleDrag:k,handleClick:y}},useAlphaSliderDOM=(e,{bar:n,thumb:r,handleDrag:g})=>{const y=getCurrentInstance(),k=useNamespace("color-alpha-slider"),$=ref(0),V=ref(0),L=ref();function z(){if(!r.value||e.vertical)return 0;const _e=y.vnode.el,Ce=e.color.get("alpha");return _e?Math.round(Ce*(_e.offsetWidth-r.value.offsetWidth/2)/100):0}function j(){if(!r.value)return 0;const _e=y.vnode.el;if(!e.vertical)return 0;const Ce=e.color.get("alpha");return _e?Math.round(Ce*(_e.offsetHeight-r.value.offsetHeight/2)/100):0}function ae(){if(e.color&&e.color.value){const{r:_e,g:Ce,b:Ne}=e.color.toRgb();return`linear-gradient(to right, rgba(${_e}, ${Ce}, ${Ne}, 0) 0%, rgba(${_e}, ${Ce}, ${Ne}, 1) 100%)`}return""}function re(){$.value=z(),V.value=j(),L.value=ae()}onMounted(()=>{if(!n.value||!r.value)return;const _e={drag:Ce=>{g(Ce)},end:Ce=>{g(Ce)}};draggable(n.value,_e),draggable(r.value,_e),re()}),watch(()=>e.color.get("alpha"),()=>re()),watch(()=>e.color.value,()=>re());const oe=computed(()=>[k.b(),k.is("vertical",e.vertical)]),ue=computed(()=>k.e("bar")),le=computed(()=>k.e("thumb")),de=computed(()=>({background:L.value})),he=computed(()=>({left:addUnit($.value),top:addUnit(V.value)}));return{rootKls:oe,barKls:ue,barStyle:de,thumbKls:le,thumbStyle:he,update:re}},COMPONENT_NAME$d="ElColorAlphaSlider",__default__$Y=defineComponent({name:COMPONENT_NAME$d}),_sfc_main$2I=defineComponent({...__default__$Y,props:alphaSliderProps,setup(e,{expose:n}){const r=e,{bar:g,thumb:y,handleDrag:k,handleClick:$}=useAlphaSlider(r),{rootKls:V,barKls:L,barStyle:z,thumbKls:j,thumbStyle:ae,update:re}=useAlphaSliderDOM(r,{bar:g,thumb:y,handleDrag:k});return n({update:re,bar:g,thumb:y}),(oe,ue)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(V))},[createBaseVNode("div",{ref_key:"bar",ref:g,class:normalizeClass(unref(L)),style:normalizeStyle(unref(z)),onClick:ue[0]||(ue[0]=(...le)=>unref($)&&unref($)(...le))},null,6),createBaseVNode("div",{ref_key:"thumb",ref:y,class:normalizeClass(unref(j)),style:normalizeStyle(unref(ae))},null,6)],2))}});var AlphaSlider=_export_sfc$1(_sfc_main$2I,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/alpha-slider.vue"]]);const _sfc_main$2H=defineComponent({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const n=useNamespace("color-hue-slider"),r=getCurrentInstance(),g=ref(),y=ref(),k=ref(0),$=ref(0),V=computed(()=>e.color.get("hue"));watch(()=>V.value,()=>{re()});function L(oe){oe.target!==g.value&&z(oe)}function z(oe){if(!y.value||!g.value)return;const le=r.vnode.el.getBoundingClientRect(),{clientX:de,clientY:he}=getClientXY(oe);let _e;if(e.vertical){let Ce=he-le.top;Ce=Math.min(Ce,le.height-g.value.offsetHeight/2),Ce=Math.max(g.value.offsetHeight/2,Ce),_e=Math.round((Ce-g.value.offsetHeight/2)/(le.height-g.value.offsetHeight)*360)}else{let Ce=de-le.left;Ce=Math.min(Ce,le.width-g.value.offsetWidth/2),Ce=Math.max(g.value.offsetWidth/2,Ce),_e=Math.round((Ce-g.value.offsetWidth/2)/(le.width-g.value.offsetWidth)*360)}e.color.set("hue",_e)}function j(){if(!g.value)return 0;const oe=r.vnode.el;if(e.vertical)return 0;const ue=e.color.get("hue");return oe?Math.round(ue*(oe.offsetWidth-g.value.offsetWidth/2)/360):0}function ae(){if(!g.value)return 0;const oe=r.vnode.el;if(!e.vertical)return 0;const ue=e.color.get("hue");return oe?Math.round(ue*(oe.offsetHeight-g.value.offsetHeight/2)/360):0}function re(){k.value=j(),$.value=ae()}return onMounted(()=>{if(!y.value||!g.value)return;const oe={drag:ue=>{z(ue)},end:ue=>{z(ue)}};draggable(y.value,oe),draggable(g.value,oe),re()}),{bar:y,thumb:g,thumbLeft:k,thumbTop:$,hueValue:V,handleClick:L,update:re,ns:n}}});function _sfc_render$r(e,n,r,g,y,k){return openBlock(),createElementBlock("div",{class:normalizeClass([e.ns.b(),e.ns.is("vertical",e.vertical)])},[createBaseVNode("div",{ref:"bar",class:normalizeClass(e.ns.e("bar")),onClick:n[0]||(n[0]=(...$)=>e.handleClick&&e.handleClick(...$))},null,2),createBaseVNode("div",{ref:"thumb",class:normalizeClass(e.ns.e("thumb")),style:normalizeStyle({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}var HueSlider=_export_sfc$1(_sfc_main$2H,[["render",_sfc_render$r],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/hue-slider.vue"]]);const colorPickerProps=buildProps({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:useSizeProp,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},predefine:{type:definePropType(Array)},validateEvent:{type:Boolean,default:!0}}),colorPickerEmits={[UPDATE_MODEL_EVENT]:e=>isString$3(e)||isNil(e),[CHANGE_EVENT]:e=>isString$3(e)||isNil(e),activeChange:e=>isString$3(e)||isNil(e)},colorPickerContextKey=Symbol("colorPickerContextKey"),hsv2hsl=function(e,n,r){return[e,n*r/((e=(2-n)*r)<1?e:2-e)||0,e/2]},isOnePointZero=function(e){return typeof e=="string"&&e.includes(".")&&Number.parseFloat(e)===1},isPercentage=function(e){return typeof e=="string"&&e.includes("%")},bound01=function(e,n){isOnePointZero(e)&&(e="100%");const r=isPercentage(e);return e=Math.min(n,Math.max(0,Number.parseFloat(`${e}`))),r&&(e=Number.parseInt(`${e*n}`,10)/100),Math.abs(e-n)<1e-6?1:e%n/Number.parseFloat(n)},INT_HEX_MAP={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},hexOne=e=>{e=Math.min(Math.round(e),255);const n=Math.floor(e/16),r=e%16;return`${INT_HEX_MAP[n]||n}${INT_HEX_MAP[r]||r}`},toHex$1=function({r:e,g:n,b:r}){return Number.isNaN(+e)||Number.isNaN(+n)||Number.isNaN(+r)?"":`#${hexOne(e)}${hexOne(n)}${hexOne(r)}`},HEX_INT_MAP={A:10,B:11,C:12,D:13,E:14,F:15},parseHexChannel=function(e){return e.length===2?(HEX_INT_MAP[e[0].toUpperCase()]||+e[0])*16+(HEX_INT_MAP[e[1].toUpperCase()]||+e[1]):HEX_INT_MAP[e[1].toUpperCase()]||+e[1]},hsl2hsv=function(e,n,r){n=n/100,r=r/100;let g=n;const y=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,g*=y<=1?y:2-y;const k=(r+n)/2,$=r===0?2*g/(y+g):2*n/(r+n);return{h:e,s:$*100,v:k*100}},rgb2hsv=(e,n,r)=>{e=bound01(e,255),n=bound01(n,255),r=bound01(r,255);const g=Math.max(e,n,r),y=Math.min(e,n,r);let k;const $=g,V=g-y,L=g===0?0:V/g;if(g===y)k=0;else{switch(g){case e:{k=(n-r)/V+(n<r?6:0);break}case n:{k=(r-e)/V+2;break}case r:{k=(e-n)/V+4;break}}k/=6}return{h:k*360,s:L*100,v:$*100}},hsv2rgb=function(e,n,r){e=bound01(e,360)*6,n=bound01(n,100),r=bound01(r,100);const g=Math.floor(e),y=e-g,k=r*(1-n),$=r*(1-y*n),V=r*(1-(1-y)*n),L=g%6,z=[r,$,k,k,V,r][L],j=[V,r,r,$,k,k][L],ae=[k,k,V,r,r,$][L];return{r:Math.round(z*255),g:Math.round(j*255),b:Math.round(ae*255)}};class Color{constructor(n={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const r in n)hasOwn$1(n,r)&&(this[r]=n[r]);n.value?this.fromString(n.value):this.doOnChange()}set(n,r){if(arguments.length===1&&typeof n=="object"){for(const g in n)hasOwn$1(n,g)&&this.set(g,n[g]);return}this[`_${n}`]=r,this.doOnChange()}get(n){return n==="alpha"?Math.floor(this[`_${n}`]):this[`_${n}`]}toRgb(){return hsv2rgb(this._hue,this._saturation,this._value)}fromString(n){if(!n){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const r=(g,y,k)=>{this._hue=Math.max(0,Math.min(360,g)),this._saturation=Math.max(0,Math.min(100,y)),this._value=Math.max(0,Math.min(100,k)),this.doOnChange()};if(n.includes("hsl")){const g=n.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(y=>y!=="").map((y,k)=>k>2?Number.parseFloat(y):Number.parseInt(y,10));if(g.length===4?this._alpha=Number.parseFloat(g[3])*100:g.length===3&&(this._alpha=100),g.length>=3){const{h:y,s:k,v:$}=hsl2hsv(g[0],g[1],g[2]);r(y,k,$)}}else if(n.includes("hsv")){const g=n.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(y=>y!=="").map((y,k)=>k>2?Number.parseFloat(y):Number.parseInt(y,10));g.length===4?this._alpha=Number.parseFloat(g[3])*100:g.length===3&&(this._alpha=100),g.length>=3&&r(g[0],g[1],g[2])}else if(n.includes("rgb")){const g=n.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(y=>y!=="").map((y,k)=>k>2?Number.parseFloat(y):Number.parseInt(y,10));if(g.length===4?this._alpha=Number.parseFloat(g[3])*100:g.length===3&&(this._alpha=100),g.length>=3){const{h:y,s:k,v:$}=rgb2hsv(g[0],g[1],g[2]);r(y,k,$)}}else if(n.includes("#")){const g=n.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(g))return;let y,k,$;g.length===3?(y=parseHexChannel(g[0]+g[0]),k=parseHexChannel(g[1]+g[1]),$=parseHexChannel(g[2]+g[2])):(g.length===6||g.length===8)&&(y=parseHexChannel(g.slice(0,2)),k=parseHexChannel(g.slice(2,4)),$=parseHexChannel(g.slice(4,6))),g.length===8?this._alpha=parseHexChannel(g.slice(6))/255*100:(g.length===3||g.length===6)&&(this._alpha=100);const{h:V,s:L,v:z}=rgb2hsv(y,k,$);r(V,L,z)}}compare(n){return Math.abs(n._hue-this._hue)<2&&Math.abs(n._saturation-this._saturation)<1&&Math.abs(n._value-this._value)<1&&Math.abs(n._alpha-this._alpha)<1}doOnChange(){const{_hue:n,_saturation:r,_value:g,_alpha:y,format:k}=this;if(this.enableAlpha)switch(k){case"hsl":{const $=hsv2hsl(n,r/100,g/100);this.value=`hsla(${n}, ${Math.round($[1]*100)}%, ${Math.round($[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${n}, ${Math.round(r)}%, ${Math.round(g)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${toHex$1(hsv2rgb(n,r,g))}${hexOne(y*255/100)}`;break}default:{const{r:$,g:V,b:L}=hsv2rgb(n,r,g);this.value=`rgba(${$}, ${V}, ${L}, ${this.get("alpha")/100})`}}else switch(k){case"hsl":{const $=hsv2hsl(n,r/100,g/100);this.value=`hsl(${n}, ${Math.round($[1]*100)}%, ${Math.round($[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${n}, ${Math.round(r)}%, ${Math.round(g)}%)`;break}case"rgb":{const{r:$,g:V,b:L}=hsv2rgb(n,r,g);this.value=`rgb(${$}, ${V}, ${L})`;break}default:this.value=toHex$1(hsv2rgb(n,r,g))}}}const _sfc_main$2G=defineComponent({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(e){const n=useNamespace("color-predefine"),{currentColor:r}=inject(colorPickerContextKey),g=ref(k(e.colors,e.color));watch(()=>r.value,$=>{const V=new Color;V.fromString($),g.value.forEach(L=>{L.selected=V.compare(L)})}),watchEffect(()=>{g.value=k(e.colors,e.color)});function y($){e.color.fromString(e.colors[$])}function k($,V){return $.map(L=>{const z=new Color;return z.enableAlpha=!0,z.format="rgba",z.fromString(L),z.selected=z.value===V.value,z})}return{rgbaColors:g,handleSelect:y,ns:n}}}),_hoisted_1$1X=["onClick"];function _sfc_render$q(e,n,r,g,y,k){return openBlock(),createElementBlock("div",{class:normalizeClass(e.ns.b())},[createBaseVNode("div",{class:normalizeClass(e.ns.e("colors"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.rgbaColors,($,V)=>(openBlock(),createElementBlock("div",{key:e.colors[V],class:normalizeClass([e.ns.e("color-selector"),e.ns.is("alpha",$._alpha<100),{selected:$.selected}]),onClick:L=>e.handleSelect(V)},[createBaseVNode("div",{style:normalizeStyle({backgroundColor:$.value})},null,4)],10,_hoisted_1$1X))),128))],2)],2)}var Predefine=_export_sfc$1(_sfc_main$2G,[["render",_sfc_render$q],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/predefine.vue"]]);const _sfc_main$2F=defineComponent({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const n=useNamespace("color-svpanel"),r=getCurrentInstance(),g=ref(0),y=ref(0),k=ref("hsl(0, 100%, 50%)"),$=computed(()=>{const z=e.color.get("hue"),j=e.color.get("value");return{hue:z,value:j}});function V(){const z=e.color.get("saturation"),j=e.color.get("value"),ae=r.vnode.el,{clientWidth:re,clientHeight:oe}=ae;y.value=z*re/100,g.value=(100-j)*oe/100,k.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function L(z){const ae=r.vnode.el.getBoundingClientRect(),{clientX:re,clientY:oe}=getClientXY(z);let ue=re-ae.left,le=oe-ae.top;ue=Math.max(0,ue),ue=Math.min(ue,ae.width),le=Math.max(0,le),le=Math.min(le,ae.height),y.value=ue,g.value=le,e.color.set({saturation:ue/ae.width*100,value:100-le/ae.height*100})}return watch(()=>$.value,()=>{V()}),onMounted(()=>{draggable(r.vnode.el,{drag:z=>{L(z)},end:z=>{L(z)}}),V()}),{cursorTop:g,cursorLeft:y,background:k,colorValue:$,handleDrag:L,update:V,ns:n}}}),_hoisted_1$1W=createBaseVNode("div",null,null,-1),_hoisted_2$1C=[_hoisted_1$1W];function _sfc_render$p(e,n,r,g,y,k){return openBlock(),createElementBlock("div",{class:normalizeClass(e.ns.b()),style:normalizeStyle({backgroundColor:e.background})},[createBaseVNode("div",{class:normalizeClass(e.ns.e("white"))},null,2),createBaseVNode("div",{class:normalizeClass(e.ns.e("black"))},null,2),createBaseVNode("div",{class:normalizeClass(e.ns.e("cursor")),style:normalizeStyle({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},_hoisted_2$1C,6)],6)}var SvPanel=_export_sfc$1(_sfc_main$2F,[["render",_sfc_render$p],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/sv-panel.vue"]]);const _hoisted_1$1V=["id","aria-label","aria-labelledby","aria-description","tabindex","onKeydown"],__default__$X=defineComponent({name:"ElColorPicker"}),_sfc_main$2E=defineComponent({...__default__$X,props:colorPickerProps,emits:colorPickerEmits,setup(e,{expose:n,emit:r}){const g=e,{t:y}=useLocale(),k=useNamespace("color"),{formItem:$}=useFormItem(),V=useFormSize(),L=useFormDisabled(),{inputId:z,isLabeledByFormItem:j}=useFormItemInputId(g,{formItemContext:$}),ae=ref(),re=ref(),oe=ref(),ue=ref();let le=!0;const de=reactive(new Color({enableAlpha:g.showAlpha,format:g.colorFormat||"",value:g.modelValue})),he=ref(!1),_e=ref(!1),Ce=ref(""),Ne=computed(()=>!g.modelValue&&!_e.value?"transparent":qe(de,g.showAlpha)),$e=computed(()=>!g.modelValue&&!_e.value?"":de.value),xe=computed(()=>j.value?void 0:g.label||y("el.colorpicker.defaultLabel")),Ie=computed(()=>j.value?$?.labelId:void 0),ze=computed(()=>[k.b("picker"),k.is("disabled",L.value),k.bm("picker",V.value)]);function qe(kn,jn){if(!(kn instanceof Color))throw new TypeError("color should be instance of _color Class");const{r:Fn,g:Tn,b:Hn}=kn.toRgb();return jn?`rgba(${Fn}, ${Tn}, ${Hn}, ${kn.get("alpha")/100})`:`rgb(${Fn}, ${Tn}, ${Hn})`}function Et(kn){he.value=kn}const _n=debounce(Et,100);function Dt(){L.value||Et(!0)}function Sn(){_n(!1),hn()}function hn(){nextTick(()=>{g.modelValue?de.fromString(g.modelValue):(de.value="",nextTick(()=>{_e.value=!1}))})}function Vn(){L.value||_n(!he.value)}function Mn(){de.fromString(Ce.value)}function $n(){const kn=de.value;r(UPDATE_MODEL_EVENT,kn),r("change",kn),g.validateEvent&&$?.validate("change").catch(jn=>void 0),_n(!1),nextTick(()=>{const jn=new Color({enableAlpha:g.showAlpha,format:g.colorFormat||"",value:g.modelValue});de.compare(jn)||hn()})}function Nn(){_n(!1),r(UPDATE_MODEL_EVENT,null),r("change",null),g.modelValue!==null&&g.validateEvent&&$?.validate("change").catch(kn=>void 0),hn()}return onMounted(()=>{g.modelValue&&(Ce.value=$e.value)}),watch(()=>g.modelValue,kn=>{kn?kn&&kn!==de.value&&(le=!1,de.fromString(kn)):_e.value=!1}),watch(()=>$e.value,kn=>{Ce.value=kn,le&&r("activeChange",kn),le=!0}),watch(()=>de.value,()=>{!g.modelValue&&!_e.value&&(_e.value=!0)}),watch(()=>he.value,()=>{nextTick(()=>{var kn,jn,Fn;(kn=ae.value)==null||kn.update(),(jn=re.value)==null||jn.update(),(Fn=oe.value)==null||Fn.update()})}),provide(colorPickerContextKey,{currentColor:$e}),n({color:de,show:Dt,hide:Sn}),(kn,jn)=>(openBlock(),createBlock(unref(ElTooltip),{ref_key:"popper",ref:ue,visible:he.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[unref(k).be("picker","panel"),unref(k).b("dropdown"),kn.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",transition:`${unref(k).namespace.value}-zoom-in-top`,persistent:""},{content:withCtx(()=>[withDirectives((openBlock(),createElementBlock("div",null,[createBaseVNode("div",{class:normalizeClass(unref(k).be("dropdown","main-wrapper"))},[createVNode(HueSlider,{ref_key:"hue",ref:ae,class:"hue-slider",color:unref(de),vertical:""},null,8,["color"]),createVNode(SvPanel,{ref_key:"sv",ref:re,color:unref(de)},null,8,["color"])],2),kn.showAlpha?(openBlock(),createBlock(AlphaSlider,{key:0,ref_key:"alpha",ref:oe,color:unref(de)},null,8,["color"])):createCommentVNode("v-if",!0),kn.predefine?(openBlock(),createBlock(Predefine,{key:1,ref:"predefine",color:unref(de),colors:kn.predefine},null,8,["color","colors"])):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(k).be("dropdown","btns"))},[createBaseVNode("span",{class:normalizeClass(unref(k).be("dropdown","value"))},[createVNode(unref(ElInput),{modelValue:Ce.value,"onUpdate:modelValue":jn[0]||(jn[0]=Fn=>Ce.value=Fn),"validate-event":!1,size:"small",onKeyup:withKeys(Mn,["enter"]),onBlur:Mn},null,8,["modelValue","onKeyup"])],2),createVNode(unref(ElButton),{class:normalizeClass(unref(k).be("dropdown","link-btn")),text:"",size:"small",onClick:Nn},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(y)("el.colorpicker.clear")),1)]),_:1},8,["class"]),createVNode(unref(ElButton),{plain:"",size:"small",class:normalizeClass(unref(k).be("dropdown","btn")),onClick:$n},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(y)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)])),[[unref(ClickOutside),Sn]])]),default:withCtx(()=>[createBaseVNode("div",{id:unref(z),class:normalizeClass(unref(ze)),role:"button","aria-label":unref(xe),"aria-labelledby":unref(Ie),"aria-description":unref(y)("el.colorpicker.description",{color:kn.modelValue||""}),tabindex:kn.tabindex,onKeydown:withKeys(Vn,["enter"])},[unref(L)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(k).be("picker","mask"))},null,2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(k).be("picker","trigger")),onClick:Vn},[createBaseVNode("span",{class:normalizeClass([unref(k).be("picker","color"),unref(k).is("alpha",kn.showAlpha)])},[createBaseVNode("span",{class:normalizeClass(unref(k).be("picker","color-inner")),style:normalizeStyle({backgroundColor:unref(Ne)})},[withDirectives(createVNode(unref(ElIcon),{class:normalizeClass([unref(k).be("picker","icon"),unref(k).is("icon-arrow-down")])},{default:withCtx(()=>[createVNode(unref(arrow_down_default))]),_:1},8,["class"]),[[vShow,kn.modelValue||_e.value]]),!kn.modelValue&&!_e.value?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass([unref(k).be("picker","empty"),unref(k).is("icon-close")])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],6)],2)],2)],42,_hoisted_1$1V)]),_:1},8,["visible","popper-class","transition"]))}});var ColorPicker=_export_sfc$1(_sfc_main$2E,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/color-picker.vue"]]);const ElColorPicker=withInstall(ColorPicker),__default__$W=defineComponent({name:"ElContainer"}),_sfc_main$2D=defineComponent({...__default__$W,props:{direction:{type:String}},setup(e){const n=e,r=useSlots(),g=useNamespace("container"),y=computed(()=>n.direction==="vertical"?!0:n.direction==="horizontal"?!1:r&&r.default?r.default().some($=>{const V=$.type.name;return V==="ElHeader"||V==="ElFooter"}):!1);return(k,$)=>(openBlock(),createElementBlock("section",{class:normalizeClass([unref(g).b(),unref(g).is("vertical",unref(y))])},[renderSlot(k.$slots,"default")],2))}});var Container=_export_sfc$1(_sfc_main$2D,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/container.vue"]]);const __default__$V=defineComponent({name:"ElAside"}),_sfc_main$2C=defineComponent({...__default__$V,props:{width:{type:String,default:null}},setup(e){const n=e,r=useNamespace("aside"),g=computed(()=>n.width?r.cssVarBlock({width:n.width}):{});return(y,k)=>(openBlock(),createElementBlock("aside",{class:normalizeClass(unref(r).b()),style:normalizeStyle(unref(g))},[renderSlot(y.$slots,"default")],6))}});var Aside=_export_sfc$1(_sfc_main$2C,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/aside.vue"]]);const __default__$U=defineComponent({name:"ElFooter"}),_sfc_main$2B=defineComponent({...__default__$U,props:{height:{type:String,default:null}},setup(e){const n=e,r=useNamespace("footer"),g=computed(()=>n.height?r.cssVarBlock({height:n.height}):{});return(y,k)=>(openBlock(),createElementBlock("footer",{class:normalizeClass(unref(r).b()),style:normalizeStyle(unref(g))},[renderSlot(y.$slots,"default")],6))}});var Footer$2=_export_sfc$1(_sfc_main$2B,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/footer.vue"]]);const __default__$T=defineComponent({name:"ElHeader"}),_sfc_main$2A=defineComponent({...__default__$T,props:{height:{type:String,default:null}},setup(e){const n=e,r=useNamespace("header"),g=computed(()=>n.height?r.cssVarBlock({height:n.height}):{});return(y,k)=>(openBlock(),createElementBlock("header",{class:normalizeClass(unref(r).b()),style:normalizeStyle(unref(g))},[renderSlot(y.$slots,"default")],6))}});var Header=_export_sfc$1(_sfc_main$2A,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/header.vue"]]);const __default__$S=defineComponent({name:"ElMain"}),_sfc_main$2z=defineComponent({...__default__$S,setup(e){const n=useNamespace("main");return(r,g)=>(openBlock(),createElementBlock("main",{class:normalizeClass(unref(n).b())},[renderSlot(r.$slots,"default")],2))}});var Main=_export_sfc$1(_sfc_main$2z,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/main.vue"]]);const ElContainer=withInstall(Container,{Aside,Footer:Footer$2,Header,Main}),ElAside=withNoopInstall(Aside),ElFooter=withNoopInstall(Footer$2),ElHeader=withNoopInstall(Header),ElMain=withNoopInstall(Main);var advancedFormat$1={exports:{}};(function(e,n){(function(r,g){e.exports=g()})(commonjsGlobal$1,function(){return function(r,g){var y=g.prototype,k=y.format;y.format=function($){var V=this,L=this.$locale();if(!this.isValid())return k.bind(this)($);var z=this.$utils(),j=($||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(ae){switch(ae){case"Q":return Math.ceil((V.$M+1)/3);case"Do":return L.ordinal(V.$D);case"gggg":return V.weekYear();case"GGGG":return V.isoWeekYear();case"wo":return L.ordinal(V.week(),"W");case"w":case"ww":return z.s(V.week(),ae==="w"?1:2,"0");case"W":case"WW":return z.s(V.isoWeek(),ae==="W"?1:2,"0");case"k":case"kk":return z.s(String(V.$H===0?24:V.$H),ae==="k"?1:2,"0");case"X":return Math.floor(V.$d.getTime()/1e3);case"x":return V.$d.getTime();case"z":return"["+V.offsetName()+"]";case"zzz":return"["+V.offsetName("long")+"]";default:return ae}});return k.bind(this)(j)}}})})(advancedFormat$1);var advancedFormatExports=advancedFormat$1.exports;const advancedFormat=getDefaultExportFromCjs(advancedFormatExports);var weekOfYear$1={exports:{}};(function(e,n){(function(r,g){e.exports=g()})(commonjsGlobal$1,function(){var r="week",g="year";return function(y,k,$){var V=k.prototype;V.week=function(L){if(L===void 0&&(L=null),L!==null)return this.add(7*(L-this.week()),"day");var z=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var j=$(this).startOf(g).add(1,g).date(z),ae=$(this).endOf(r);if(j.isBefore(ae))return 1}var re=$(this).startOf(g).date(z).startOf(r).subtract(1,"millisecond"),oe=this.diff(re,r,!0);return oe<0?$(this).startOf("week").week():Math.ceil(oe)},V.weeks=function(L){return L===void 0&&(L=null),this.week(L)}}})})(weekOfYear$1);var weekOfYearExports=weekOfYear$1.exports;const weekOfYear=getDefaultExportFromCjs(weekOfYearExports);var weekYear$1={exports:{}};(function(e,n){(function(r,g){e.exports=g()})(commonjsGlobal$1,function(){return function(r,g){g.prototype.weekYear=function(){var y=this.month(),k=this.week(),$=this.year();return k===1&&y===11?$+1:y===0&&k>=52?$-1:$}}})})(weekYear$1);var weekYearExports=weekYear$1.exports;const weekYear=getDefaultExportFromCjs(weekYearExports);var dayOfYear$1={exports:{}};(function(e,n){(function(r,g){e.exports=g()})(commonjsGlobal$1,function(){return function(r,g,y){g.prototype.dayOfYear=function(k){var $=Math.round((y(this).startOf("day")-y(this).startOf("year"))/864e5)+1;return k==null?$:this.add(k-$,"day")}}})})(dayOfYear$1);var dayOfYearExports=dayOfYear$1.exports;const dayOfYear=getDefaultExportFromCjs(dayOfYearExports);var isSameOrAfter$1={exports:{}};(function(e,n){(function(r,g){e.exports=g()})(commonjsGlobal$1,function(){return function(r,g){g.prototype.isSameOrAfter=function(y,k){return this.isSame(y,k)||this.isAfter(y,k)}}})})(isSameOrAfter$1);var isSameOrAfterExports=isSameOrAfter$1.exports;const isSameOrAfter=getDefaultExportFromCjs(isSameOrAfterExports);var isSameOrBefore$1={exports:{}};(function(e,n){(function(r,g){e.exports=g()})(commonjsGlobal$1,function(){return function(r,g){g.prototype.isSameOrBefore=function(y,k){return this.isSame(y,k)||this.isBefore(y,k)}}})})(isSameOrBefore$1);var isSameOrBeforeExports=isSameOrBefore$1.exports;const isSameOrBefore=getDefaultExportFromCjs(isSameOrBeforeExports),ROOT_PICKER_INJECTION_KEY=Symbol(),datePickerProps=buildProps({...timePickerDefaultProps,type:{type:definePropType(String),default:"date"}}),selectionModes=["date","dates","year","month","week","range"],datePickerSharedProps=buildProps({disabledDate:{type:definePropType(Function)},date:{type:definePropType(Object),required:!0},minDate:{type:definePropType(Object)},maxDate:{type:definePropType(Object)},parsedValue:{type:definePropType([Object,Array])},rangeState:{type:definePropType(Object),default:()=>({endDate:null,selecting:!1})}}),panelSharedProps=buildProps({type:{type:definePropType(String),required:!0,values:datePickTypes}}),panelRangeSharedProps=buildProps({unlinkPanels:Boolean,parsedValue:{type:definePropType(Array)}}),selectionModeWithDefault=e=>({type:String,values:selectionModes,default:e}),panelDatePickProps=buildProps({...panelSharedProps,parsedValue:{type:definePropType([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),basicDateTableProps=buildProps({...datePickerSharedProps,cellClassName:{type:definePropType(Function)},showWeekNumber:Boolean,selectionMode:selectionModeWithDefault("date")}),isValidRange=e=>{if(!isArray$3(e))return!1;const[n,r]=e;return dayjs.isDayjs(n)&&dayjs.isDayjs(r)&&n.isSameOrBefore(r)},getDefaultValue=(e,{lang:n,unit:r,unlinkPanels:g})=>{let y;if(isArray$3(e)){let[k,$]=e.map(V=>dayjs(V).locale(n));return g||($=k.add(1,r)),[k,$]}else e?y=dayjs(e):y=dayjs();return y=y.locale(n),[y,y.add(1,r)]},buildPickerTable=(e,n,{columnIndexOffset:r,startDate:g,nextEndDate:y,now:k,unit:$,relativeDateGetter:V,setCellMetadata:L,setRowMetadata:z})=>{for(let j=0;j<e.row;j++){const ae=n[j];for(let re=0;re<e.column;re++){let oe=ae[re+r];oe||(oe={row:j,column:re,type:"normal",inRange:!1,start:!1,end:!1});const ue=j*e.column+re,le=V(ue);oe.dayjs=le,oe.date=le.toDate(),oe.timestamp=le.valueOf(),oe.type="normal",oe.inRange=!!(g&&le.isSameOrAfter(g,$)&&y&&le.isSameOrBefore(y,$))||!!(g&&le.isSameOrBefore(g,$)&&y&&le.isSameOrAfter(y,$)),g?.isSameOrAfter(y)?(oe.start=!!y&&le.isSame(y,$),oe.end=g&&le.isSame(g,$)):(oe.start=!!g&&le.isSame(g,$),oe.end=!!y&&le.isSame(y,$)),le.isSame(k,$)&&(oe.type="today"),L?.(oe,{rowIndex:j,columnIndex:re}),ae[re+r]=oe}z?.(ae)}},basicCellProps=buildProps({cell:{type:definePropType(Object)}});var ElDatePickerCell=defineComponent({name:"ElDatePickerCell",props:basicCellProps,setup(e){const n=useNamespace("date-table-cell"),{slots:r}=inject(ROOT_PICKER_INJECTION_KEY);return()=>{const{cell:g}=e;if(r.default){const y=r.default(g).filter(k=>k.patchFlag!==-2&&k.type.toString()!=="Symbol(Comment)");if(y.length)return y}return createVNode("div",{class:n.b()},[createVNode("span",{class:n.e("text")},[g?.text])])}}});const _hoisted_1$1U=["aria-label","onMousedown"],_hoisted_2$1B={key:0,scope:"col"},_hoisted_3$_=["aria-label"],_hoisted_4$R=["aria-current","aria-selected","tabindex"],_sfc_main$2y=defineComponent({__name:"basic-date-table",props:basicDateTableProps,emits:["changerange","pick","select"],setup(e,{expose:n,emit:r}){const g=e,y=useNamespace("date-table"),{t:k,lang:$}=useLocale(),V=ref(),L=ref(),z=ref(),j=ref(),ae=ref([[],[],[],[],[],[]]);let re=!1;const oe=g.date.$locale().weekStart||7,ue=g.date.locale("en").localeData().weekdaysShort().map(Tn=>Tn.toLowerCase()),le=computed(()=>oe>3?7-oe:-oe),de=computed(()=>{const Tn=g.date.startOf("month");return Tn.subtract(Tn.day()||7,"day")}),he=computed(()=>ue.concat(ue).slice(oe,oe+7)),_e=computed(()=>flatten$1(ze.value).some(Tn=>Tn.isCurrent)),Ce=computed(()=>{const Tn=g.date.startOf("month"),Hn=Tn.day()||7,la=Tn.daysInMonth(),ca=Tn.subtract(1,"month").daysInMonth();return{startOfMonthDay:Hn,dateCountOfMonth:la,dateCountOfLastMonth:ca}}),Ne=computed(()=>g.selectionMode==="dates"?castArray(g.parsedValue):[]),$e=(Tn,{count:Hn,rowIndex:la,columnIndex:ca})=>{const{startOfMonthDay:Zn,dateCountOfMonth:Bn,dateCountOfLastMonth:Wn}=unref(Ce),da=unref(le);if(la>=0&&la<=1){const ga=Zn+da<0?7+Zn+da:Zn+da;if(ca+la*7>=ga)return Tn.text=Hn,!0;Tn.text=Wn-(ga-ca%7)+1+la*7,Tn.type="prev-month"}else return Hn<=Bn?Tn.text=Hn:(Tn.text=Hn-Bn,Tn.type="next-month"),!0;return!1},xe=(Tn,{columnIndex:Hn,rowIndex:la},ca)=>{const{disabledDate:Zn,cellClassName:Bn}=g,Wn=unref(Ne),da=$e(Tn,{count:ca,rowIndex:la,columnIndex:Hn}),ga=Tn.dayjs.toDate();return Tn.selected=Wn.find(Ca=>Ca.valueOf()===Tn.dayjs.valueOf()),Tn.isSelected=!!Tn.selected,Tn.isCurrent=_n(Tn),Tn.disabled=Zn?.(ga),Tn.customClass=Bn?.(ga),da},Ie=Tn=>{if(g.selectionMode==="week"){const[Hn,la]=g.showWeekNumber?[1,7]:[0,6],ca=Fn(Tn[Hn+1]);Tn[Hn].inRange=ca,Tn[Hn].start=ca,Tn[la].inRange=ca,Tn[la].end=ca}},ze=computed(()=>{const{minDate:Tn,maxDate:Hn,rangeState:la,showWeekNumber:ca}=g,Zn=le.value,Bn=ae.value,Wn="day";let da=1;if(ca)for(let ga=0;ga<6;ga++)Bn[ga][0]||(Bn[ga][0]={type:"week",text:de.value.add(ga*7+1,Wn).week()});return buildPickerTable({row:6,column:7},Bn,{startDate:Tn,columnIndexOffset:ca?1:0,nextEndDate:la.endDate||Hn||la.selecting&&Tn||null,now:dayjs().locale(unref($)).startOf(Wn),unit:Wn,relativeDateGetter:ga=>de.value.add(ga-Zn,Wn),setCellMetadata:(...ga)=>{xe(...ga,da)&&(da+=1)},setRowMetadata:Ie}),Bn});watch(()=>g.date,async()=>{var Tn,Hn;(Tn=V.value)!=null&&Tn.contains(document.activeElement)&&(await nextTick(),(Hn=L.value)==null||Hn.focus())});const qe=async()=>{var Tn;(Tn=L.value)==null||Tn.focus()},Et=(Tn="")=>["normal","today"].includes(Tn),_n=Tn=>g.selectionMode==="date"&&Et(Tn.type)&&Dt(Tn,g.parsedValue),Dt=(Tn,Hn)=>Hn?dayjs(Hn).locale($.value).isSame(g.date.date(Number(Tn.text)),"day"):!1,Sn=Tn=>{const Hn=[];return Et(Tn.type)&&!Tn.disabled?(Hn.push("available"),Tn.type==="today"&&Hn.push("today")):Hn.push(Tn.type),_n(Tn)&&Hn.push("current"),Tn.inRange&&(Et(Tn.type)||g.selectionMode==="week")&&(Hn.push("in-range"),Tn.start&&Hn.push("start-date"),Tn.end&&Hn.push("end-date")),Tn.disabled&&Hn.push("disabled"),Tn.selected&&Hn.push("selected"),Tn.customClass&&Hn.push(Tn.customClass),Hn.join(" ")},hn=(Tn,Hn)=>{const la=Tn*7+(Hn-(g.showWeekNumber?1:0))-le.value;return de.value.add(la,"day")},Vn=Tn=>{var Hn;if(!g.rangeState.selecting)return;let la=Tn.target;if(la.tagName==="SPAN"&&(la=(Hn=la.parentNode)==null?void 0:Hn.parentNode),la.tagName==="DIV"&&(la=la.parentNode),la.tagName!=="TD")return;const ca=la.parentNode.rowIndex-1,Zn=la.cellIndex;ze.value[ca][Zn].disabled||(ca!==z.value||Zn!==j.value)&&(z.value=ca,j.value=Zn,r("changerange",{selecting:!0,endDate:hn(ca,Zn)}))},Mn=Tn=>!_e.value&&Tn?.text===1&&Tn.type==="normal"||Tn.isCurrent,$n=Tn=>{re||_e.value||g.selectionMode!=="date"||jn(Tn,!0)},Nn=Tn=>{Tn.target.closest("td")&&(re=!0)},kn=Tn=>{Tn.target.closest("td")&&(re=!1)},jn=(Tn,Hn=!1)=>{const la=Tn.target.closest("td");if(!la)return;const ca=la.parentNode.rowIndex-1,Zn=la.cellIndex,Bn=ze.value[ca][Zn];if(Bn.disabled||Bn.type==="week")return;const Wn=hn(ca,Zn);if(g.selectionMode==="range")!g.rangeState.selecting||!g.minDate?(r("pick",{minDate:Wn,maxDate:null}),r("select",!0)):(Wn>=g.minDate?r("pick",{minDate:g.minDate,maxDate:Wn}):r("pick",{minDate:Wn,maxDate:g.minDate}),r("select",!1));else if(g.selectionMode==="date")r("pick",Wn,Hn);else if(g.selectionMode==="week"){const da=Wn.week(),ga=`${Wn.year()}w${da}`;r("pick",{year:Wn.year(),week:da,value:ga,date:Wn.startOf("week")})}else if(g.selectionMode==="dates"){const da=Bn.selected?castArray(g.parsedValue).filter(ga=>ga?.valueOf()!==Wn.valueOf()):castArray(g.parsedValue).concat([Wn]);r("pick",da)}},Fn=Tn=>{if(g.selectionMode!=="week")return!1;let Hn=g.date.startOf("day");if(Tn.type==="prev-month"&&(Hn=Hn.subtract(1,"month")),Tn.type==="next-month"&&(Hn=Hn.add(1,"month")),Hn=Hn.date(Number.parseInt(Tn.text,10)),g.parsedValue&&!Array.isArray(g.parsedValue)){const la=(g.parsedValue.day()-oe+7)%7-1;return g.parsedValue.subtract(la,"day").isSame(Hn,"day")}return!1};return n({focus:qe}),(Tn,Hn)=>(openBlock(),createElementBlock("table",{role:"grid","aria-label":unref(k)("el.datepicker.dateTablePrompt"),cellspacing:"0",cellpadding:"0",class:normalizeClass([unref(y).b(),{"is-week-mode":Tn.selectionMode==="week"}]),onClick:jn,onMousemove:Vn,onMousedown:withModifiers(Nn,["prevent"]),onMouseup:kn},[createBaseVNode("tbody",{ref_key:"tbodyRef",ref:V},[createBaseVNode("tr",null,[Tn.showWeekNumber?(openBlock(),createElementBlock("th",_hoisted_2$1B,toDisplayString$1(unref(k)("el.datepicker.week")),1)):createCommentVNode("v-if",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(he),(la,ca)=>(openBlock(),createElementBlock("th",{key:ca,scope:"col","aria-label":unref(k)("el.datepicker.weeksFull."+la)},toDisplayString$1(unref(k)("el.datepicker.weeks."+la)),9,_hoisted_3$_))),128))]),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(ze),(la,ca)=>(openBlock(),createElementBlock("tr",{key:ca,class:normalizeClass([unref(y).e("row"),{current:Fn(la[1])}])},[(openBlock(!0),createElementBlock(Fragment,null,renderList(la,(Zn,Bn)=>(openBlock(),createElementBlock("td",{key:`${ca}.${Bn}`,ref_for:!0,ref:Wn=>Mn(Zn)&&(L.value=Wn),class:normalizeClass(Sn(Zn)),"aria-current":Zn.isCurrent?"date":void 0,"aria-selected":Zn.isCurrent,tabindex:Mn(Zn)?0:-1,onFocus:$n},[createVNode(unref(ElDatePickerCell),{cell:Zn},null,8,["cell"])],42,_hoisted_4$R))),128))],2))),128))],512)],42,_hoisted_1$1U))}});var DateTable=_export_sfc$1(_sfc_main$2y,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-date-table.vue"]]);const basicMonthTableProps=buildProps({...datePickerSharedProps,selectionMode:selectionModeWithDefault("month")}),_hoisted_1$1T=["aria-label"],_hoisted_2$1A=["aria-selected","aria-label","tabindex","onKeydown"],_hoisted_3$Z={class:"cell"},_sfc_main$2x=defineComponent({__name:"basic-month-table",props:basicMonthTableProps,emits:["changerange","pick","select"],setup(e,{expose:n,emit:r}){const g=e,y=(Ne,$e,xe)=>{const Ie=dayjs().locale(xe).startOf("month").month($e).year(Ne),ze=Ie.daysInMonth();return rangeArr(ze).map(qe=>Ie.add(qe,"day").toDate())},k=useNamespace("month-table"),{t:$,lang:V}=useLocale(),L=ref(),z=ref(),j=ref(g.date.locale("en").localeData().monthsShort().map(Ne=>Ne.toLowerCase())),ae=ref([[],[],[]]),re=ref(),oe=ref(),ue=computed(()=>{var Ne,$e;const xe=ae.value,Ie=dayjs().locale(V.value).startOf("month");for(let ze=0;ze<3;ze++){const qe=xe[ze];for(let Et=0;Et<4;Et++){const _n=qe[Et]||(qe[Et]={row:ze,column:Et,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});_n.type="normal";const Dt=ze*4+Et,Sn=g.date.startOf("year").month(Dt),hn=g.rangeState.endDate||g.maxDate||g.rangeState.selecting&&g.minDate||null;_n.inRange=!!(g.minDate&&Sn.isSameOrAfter(g.minDate,"month")&&hn&&Sn.isSameOrBefore(hn,"month"))||!!(g.minDate&&Sn.isSameOrBefore(g.minDate,"month")&&hn&&Sn.isSameOrAfter(hn,"month")),(Ne=g.minDate)!=null&&Ne.isSameOrAfter(hn)?(_n.start=!!(hn&&Sn.isSame(hn,"month")),_n.end=g.minDate&&Sn.isSame(g.minDate,"month")):(_n.start=!!(g.minDate&&Sn.isSame(g.minDate,"month")),_n.end=!!(hn&&Sn.isSame(hn,"month"))),Ie.isSame(Sn)&&(_n.type="today"),_n.text=Dt,_n.disabled=(($e=g.disabledDate)==null?void 0:$e.call(g,Sn.toDate()))||!1}}return xe}),le=()=>{var Ne;(Ne=z.value)==null||Ne.focus()},de=Ne=>{const $e={},xe=g.date.year(),Ie=new Date,ze=Ne.text;return $e.disabled=g.disabledDate?y(xe,ze,V.value).every(g.disabledDate):!1,$e.current=castArray(g.parsedValue).findIndex(qe=>dayjs.isDayjs(qe)&&qe.year()===xe&&qe.month()===ze)>=0,$e.today=Ie.getFullYear()===xe&&Ie.getMonth()===ze,Ne.inRange&&($e["in-range"]=!0,Ne.start&&($e["start-date"]=!0),Ne.end&&($e["end-date"]=!0)),$e},he=Ne=>{const $e=g.date.year(),xe=Ne.text;return castArray(g.date).findIndex(Ie=>Ie.year()===$e&&Ie.month()===xe)>=0},_e=Ne=>{var $e;if(!g.rangeState.selecting)return;let xe=Ne.target;if(xe.tagName==="A"&&(xe=($e=xe.parentNode)==null?void 0:$e.parentNode),xe.tagName==="DIV"&&(xe=xe.parentNode),xe.tagName!=="TD")return;const Ie=xe.parentNode.rowIndex,ze=xe.cellIndex;ue.value[Ie][ze].disabled||(Ie!==re.value||ze!==oe.value)&&(re.value=Ie,oe.value=ze,r("changerange",{selecting:!0,endDate:g.date.startOf("year").month(Ie*4+ze)}))},Ce=Ne=>{var $e;const xe=($e=Ne.target)==null?void 0:$e.closest("td");if(xe?.tagName!=="TD"||hasClass(xe,"disabled"))return;const Ie=xe.cellIndex,qe=xe.parentNode.rowIndex*4+Ie,Et=g.date.startOf("year").month(qe);g.selectionMode==="range"?g.rangeState.selecting?(g.minDate&&Et>=g.minDate?r("pick",{minDate:g.minDate,maxDate:Et}):r("pick",{minDate:Et,maxDate:g.minDate}),r("select",!1)):(r("pick",{minDate:Et,maxDate:null}),r("select",!0)):r("pick",qe)};return watch(()=>g.date,async()=>{var Ne,$e;(Ne=L.value)!=null&&Ne.contains(document.activeElement)&&(await nextTick(),($e=z.value)==null||$e.focus())}),n({focus:le}),(Ne,$e)=>(openBlock(),createElementBlock("table",{role:"grid","aria-label":unref($)("el.datepicker.monthTablePrompt"),class:normalizeClass(unref(k).b()),onClick:Ce,onMousemove:_e},[createBaseVNode("tbody",{ref_key:"tbodyRef",ref:L},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(ue),(xe,Ie)=>(openBlock(),createElementBlock("tr",{key:Ie},[(openBlock(!0),createElementBlock(Fragment,null,renderList(xe,(ze,qe)=>(openBlock(),createElementBlock("td",{key:qe,ref_for:!0,ref:Et=>he(ze)&&(z.value=Et),class:normalizeClass(de(ze)),"aria-selected":`${he(ze)}`,"aria-label":unref($)(`el.datepicker.month${+ze.text+1}`),tabindex:he(ze)?0:-1,onKeydown:[withKeys(withModifiers(Ce,["prevent","stop"]),["space"]),withKeys(withModifiers(Ce,["prevent","stop"]),["enter"])]},[createBaseVNode("div",null,[createBaseVNode("span",_hoisted_3$Z,toDisplayString$1(unref($)("el.datepicker.months."+j.value[ze.text])),1)])],42,_hoisted_2$1A))),128))]))),128))],512)],42,_hoisted_1$1T))}});var MonthTable=_export_sfc$1(_sfc_main$2x,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-month-table.vue"]]);const{date,disabledDate,parsedValue}=datePickerSharedProps,basicYearTableProps=buildProps({date,disabledDate,parsedValue}),_hoisted_1$1S=["aria-label"],_hoisted_2$1z=["aria-selected","tabindex","onKeydown"],_hoisted_3$Y={class:"cell"},_hoisted_4$Q={key:1},_sfc_main$2w=defineComponent({__name:"basic-year-table",props:basicYearTableProps,emits:["pick"],setup(e,{expose:n,emit:r}){const g=e,y=(le,de)=>{const he=dayjs(String(le)).locale(de).startOf("year"),Ce=he.endOf("year").dayOfYear();return rangeArr(Ce).map(Ne=>he.add(Ne,"day").toDate())},k=useNamespace("year-table"),{t:$,lang:V}=useLocale(),L=ref(),z=ref(),j=computed(()=>Math.floor(g.date.year()/10)*10),ae=()=>{var le;(le=z.value)==null||le.focus()},re=le=>{const de={},he=dayjs().locale(V.value);return de.disabled=g.disabledDate?y(le,V.value).every(g.disabledDate):!1,de.current=castArray(g.parsedValue).findIndex(_e=>_e.year()===le)>=0,de.today=he.year()===le,de},oe=le=>le===j.value&&g.date.year()<j.value&&g.date.year()>j.value+9||castArray(g.date).findIndex(de=>de.year()===le)>=0,ue=le=>{const he=le.target.closest("td");if(he&&he.textContent){if(hasClass(he,"disabled"))return;const _e=he.textContent||he.innerText;r("pick",Number(_e))}};return watch(()=>g.date,async()=>{var le,de;(le=L.value)!=null&&le.contains(document.activeElement)&&(await nextTick(),(de=z.value)==null||de.focus())}),n({focus:ae}),(le,de)=>(openBlock(),createElementBlock("table",{role:"grid","aria-label":unref($)("el.datepicker.yearTablePrompt"),class:normalizeClass(unref(k).b()),onClick:ue},[createBaseVNode("tbody",{ref_key:"tbodyRef",ref:L},[(openBlock(),createElementBlock(Fragment,null,renderList(3,(he,_e)=>createBaseVNode("tr",{key:_e},[(openBlock(),createElementBlock(Fragment,null,renderList(4,(Ce,Ne)=>(openBlock(),createElementBlock(Fragment,{key:_e+"_"+Ne},[_e*4+Ne<10?(openBlock(),createElementBlock("td",{key:0,ref_for:!0,ref:$e=>oe(unref(j)+_e*4+Ne)&&(z.value=$e),class:normalizeClass(["available",re(unref(j)+_e*4+Ne)]),"aria-selected":`${oe(unref(j)+_e*4+Ne)}`,tabindex:oe(unref(j)+_e*4+Ne)?0:-1,onKeydown:[withKeys(withModifiers(ue,["prevent","stop"]),["space"]),withKeys(withModifiers(ue,["prevent","stop"]),["enter"])]},[createBaseVNode("span",_hoisted_3$Y,toDisplayString$1(unref(j)+_e*4+Ne),1)],42,_hoisted_2$1z)):(openBlock(),createElementBlock("td",_hoisted_4$Q))],64))),64))])),64))],512)],10,_hoisted_1$1S))}});var YearTable=_export_sfc$1(_sfc_main$2w,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-year-table.vue"]]);const _hoisted_1$1R=["onClick"],_hoisted_2$1y=["aria-label"],_hoisted_3$X=["aria-label"],_hoisted_4$P=["aria-label"],_hoisted_5$H=["aria-label"],_sfc_main$2v=defineComponent({__name:"panel-date-pick",props:panelDatePickProps,emits:["pick","set-picker-option","panel-change"],setup(e,{emit:n}){const r=e,g=(Lt,bn,jt)=>!0,y=useNamespace("picker-panel"),k=useNamespace("date-picker"),$=useAttrs$1(),V=useSlots(),{t:L,lang:z}=useLocale(),j=inject("EP_PICKER_BASE"),ae=inject(TOOLTIP_INJECTION_KEY),{shortcuts:re,disabledDate:oe,cellClassName:ue,defaultTime:le}=j.props,de=toRef(j.props,"defaultValue"),he=ref(),_e=ref(dayjs().locale(z.value)),Ce=ref(!1);let Ne=!1;const $e=computed(()=>dayjs(le).locale(z.value)),xe=computed(()=>_e.value.month()),Ie=computed(()=>_e.value.year()),ze=ref([]),qe=ref(null),Et=ref(null),_n=Lt=>ze.value.length>0?g(Lt,ze.value,r.format||"HH:mm:ss"):!0,Dt=Lt=>le&&!vn.value&&!Ce.value&&!Ne?$e.value.year(Lt.year()).month(Lt.month()).date(Lt.date()):Zn.value?Lt.millisecond(0):Lt.startOf("day"),Sn=(Lt,...bn)=>{if(!Lt)n("pick",Lt,...bn);else if(isArray$3(Lt)){const jt=Lt.map(Dt);n("pick",jt,...bn)}else n("pick",Dt(Lt),...bn);qe.value=null,Et.value=null,Ce.value=!1,Ne=!1},hn=(Lt,bn)=>{if(jn.value==="date"){Lt=Lt;let jt=r.parsedValue?r.parsedValue.year(Lt.year()).month(Lt.month()).date(Lt.date()):Lt;_n(jt)||(jt=ze.value[0][0].year(Lt.year()).month(Lt.month()).date(Lt.date())),_e.value=jt,Sn(jt,Zn.value||bn)}else jn.value==="week"?Sn(Lt.date):jn.value==="dates"&&Sn(Lt,!0)},Vn=Lt=>{const bn=Lt?"add":"subtract";_e.value=_e.value[bn](1,"month"),Pt("month")},Mn=Lt=>{const bn=_e.value,jt=Lt?"add":"subtract";_e.value=$n.value==="year"?bn[jt](10,"year"):bn[jt](1,"year"),Pt("year")},$n=ref("date"),Nn=computed(()=>{const Lt=L("el.datepicker.year");if($n.value==="year"){const bn=Math.floor(Ie.value/10)*10;return Lt?`${bn} ${Lt} - ${bn+9} ${Lt}`:`${bn} - ${bn+9}`}return`${Ie.value} ${Lt}`}),kn=Lt=>{const bn=isFunction$3(Lt.value)?Lt.value():Lt.value;if(bn){Ne=!0,Sn(dayjs(bn).locale(z.value));return}Lt.onClick&&Lt.onClick({attrs:$,slots:V,emit:n})},jn=computed(()=>{const{type:Lt}=r;return["week","month","year","dates"].includes(Lt)?Lt:"date"}),Fn=computed(()=>jn.value==="date"?$n.value:jn.value),Tn=computed(()=>!!re.length),Hn=async Lt=>{_e.value=_e.value.startOf("month").month(Lt),jn.value==="month"?Sn(_e.value,!1):($n.value="date",["month","year","date","week"].includes(jn.value)&&(Sn(_e.value,!0),await nextTick(),Oe())),Pt("month")},la=async Lt=>{jn.value==="year"?(_e.value=_e.value.startOf("year").year(Lt),Sn(_e.value,!1)):(_e.value=_e.value.year(Lt),$n.value="month",["month","year","date","week"].includes(jn.value)&&(Sn(_e.value,!0),await nextTick(),Oe())),Pt("year")},ca=async Lt=>{$n.value=Lt,await nextTick(),Oe()},Zn=computed(()=>r.type==="datetime"||r.type==="datetimerange"),Bn=computed(()=>Zn.value||jn.value==="dates"),Wn=computed(()=>oe?r.parsedValue?isArray$3(r.parsedValue)?oe(r.parsedValue[0].toDate()):oe(r.parsedValue.toDate()):!0:!1),da=()=>{if(jn.value==="dates")Sn(r.parsedValue);else{let Lt=r.parsedValue;if(!Lt){const bn=dayjs(le).locale(z.value),jt=pe();Lt=bn.year(jt.year()).month(jt.month()).date(jt.date())}_e.value=Lt,Sn(Lt)}},ga=computed(()=>oe?oe(dayjs().locale(z.value).toDate()):!1),Ca=()=>{const bn=dayjs().locale(z.value).toDate();Ce.value=!0,(!oe||!oe(bn))&&_n(bn)&&(_e.value=dayjs().locale(z.value),Sn(_e.value))},ra=computed(()=>extractTimeFormat(r.format)),Gn=computed(()=>extractDateFormat(r.format)),vn=computed(()=>{if(Et.value)return Et.value;if(!(!r.parsedValue&&!de.value))return(r.parsedValue||_e.value).format(ra.value)}),Kn=computed(()=>{if(qe.value)return qe.value;if(!(!r.parsedValue&&!de.value))return(r.parsedValue||_e.value).format(Gn.value)}),En=ref(!1),kt=()=>{En.value=!0},At=()=>{En.value=!1},Dn=Lt=>({hour:Lt.hour(),minute:Lt.minute(),second:Lt.second(),year:Lt.year(),month:Lt.month(),date:Lt.date()}),Xn=(Lt,bn,jt)=>{const{hour:Cn,minute:xn,second:In}=Dn(Lt),Ln=r.parsedValue?r.parsedValue.hour(Cn).minute(xn).second(In):Lt;_e.value=Ln,Sn(_e.value,!0),jt||(En.value=bn)},aa=Lt=>{const bn=dayjs(Lt,ra.value).locale(z.value);if(bn.isValid()&&_n(bn)){const{year:jt,month:Cn,date:xn}=Dn(_e.value);_e.value=bn.year(jt).month(Cn).date(xn),Et.value=null,En.value=!1,Sn(_e.value,!0)}},sa=Lt=>{const bn=dayjs(Lt,Gn.value).locale(z.value);if(bn.isValid()){if(oe&&oe(bn.toDate()))return;const{hour:jt,minute:Cn,second:xn}=Dn(_e.value);_e.value=bn.hour(jt).minute(Cn).second(xn),qe.value=null,Sn(_e.value,!0)}},ia=Lt=>dayjs.isDayjs(Lt)&&Lt.isValid()&&(oe?!oe(Lt.toDate()):!0),ma=Lt=>jn.value==="dates"?Lt.map(bn=>bn.format(r.format)):Lt.format(r.format),ua=Lt=>dayjs(Lt,r.format).locale(z.value),pe=()=>{const Lt=dayjs(de.value).locale(z.value);if(!de.value){const bn=$e.value;return dayjs().hour(bn.hour()).minute(bn.minute()).second(bn.second()).locale(z.value)}return Lt},Oe=async()=>{var Lt;["week","month","year","date"].includes(jn.value)&&((Lt=he.value)==null||Lt.focus(),jn.value==="week"&&Ue(EVENT_CODE.down))},Ve=Lt=>{const{code:bn}=Lt;[EVENT_CODE.up,EVENT_CODE.down,EVENT_CODE.left,EVENT_CODE.right,EVENT_CODE.home,EVENT_CODE.end,EVENT_CODE.pageUp,EVENT_CODE.pageDown].includes(bn)&&(Ue(bn),Lt.stopPropagation(),Lt.preventDefault()),[EVENT_CODE.enter,EVENT_CODE.space,EVENT_CODE.numpadEnter].includes(bn)&&qe.value===null&&Et.value===null&&(Lt.preventDefault(),Sn(_e.value,!1))},Ue=Lt=>{var bn;const{up:jt,down:Cn,left:xn,right:In,home:Ln,end:An,pageUp:zn,pageDown:Jn}=EVENT_CODE,Qn={year:{[jt]:-4,[Cn]:4,[xn]:-1,[In]:1,offset:(Pn,Un)=>Pn.setFullYear(Pn.getFullYear()+Un)},month:{[jt]:-4,[Cn]:4,[xn]:-1,[In]:1,offset:(Pn,Un)=>Pn.setMonth(Pn.getMonth()+Un)},week:{[jt]:-1,[Cn]:1,[xn]:-1,[In]:1,offset:(Pn,Un)=>Pn.setDate(Pn.getDate()+Un*7)},date:{[jt]:-7,[Cn]:7,[xn]:-1,[In]:1,[Ln]:Pn=>-Pn.getDay(),[An]:Pn=>-Pn.getDay()+6,[zn]:Pn=>-new Date(Pn.getFullYear(),Pn.getMonth(),0).getDate(),[Jn]:Pn=>new Date(Pn.getFullYear(),Pn.getMonth()+1,0).getDate(),offset:(Pn,Un)=>Pn.setDate(Pn.getDate()+Un)}},ta=_e.value.toDate();for(;Math.abs(_e.value.diff(ta,"year",!0))<1;){const Pn=Qn[Fn.value];if(!Pn)return;if(Pn.offset(ta,isFunction$3(Pn[Lt])?Pn[Lt](ta):(bn=Pn[Lt])!=null?bn:0),oe&&oe(ta))break;const Un=dayjs(ta).locale(z.value);_e.value=Un,n("pick",Un,!0);break}},Pt=Lt=>{n("panel-change",_e.value.toDate(),Lt,$n.value)};return watch(()=>jn.value,Lt=>{if(["month","year"].includes(Lt)){$n.value=Lt;return}$n.value="date"},{immediate:!0}),watch(()=>$n.value,()=>{ae?.updatePopper()}),watch(()=>de.value,Lt=>{Lt&&(_e.value=pe())},{immediate:!0}),watch(()=>r.parsedValue,Lt=>{if(Lt){if(jn.value==="dates"||Array.isArray(Lt))return;_e.value=Lt}else _e.value=pe()},{immediate:!0}),n("set-picker-option",["isValidValue",ia]),n("set-picker-option",["formatToString",ma]),n("set-picker-option",["parseUserInput",ua]),n("set-picker-option",["handleFocusPicker",Oe]),(Lt,bn)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(y).b(),unref(k).b(),{"has-sidebar":Lt.$slots.sidebar||unref(Tn),"has-time":unref(Zn)}])},[createBaseVNode("div",{class:normalizeClass(unref(y).e("body-wrapper"))},[renderSlot(Lt.$slots,"sidebar",{class:normalizeClass(unref(y).e("sidebar"))}),unref(Tn)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(y).e("sidebar"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(re),(jt,Cn)=>(openBlock(),createElementBlock("button",{key:Cn,type:"button",class:normalizeClass(unref(y).e("shortcut")),onClick:xn=>kn(jt)},toDisplayString$1(jt.text),11,_hoisted_1$1R))),128))],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(y).e("body"))},[unref(Zn)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(k).e("time-header"))},[createBaseVNode("span",{class:normalizeClass(unref(k).e("editor-wrap"))},[createVNode(unref(ElInput),{placeholder:unref(L)("el.datepicker.selectDate"),"model-value":unref(Kn),size:"small","validate-event":!1,onInput:bn[0]||(bn[0]=jt=>qe.value=jt),onChange:sa},null,8,["placeholder","model-value"])],2),withDirectives((openBlock(),createElementBlock("span",{class:normalizeClass(unref(k).e("editor-wrap"))},[createVNode(unref(ElInput),{placeholder:unref(L)("el.datepicker.selectTime"),"model-value":unref(vn),size:"small","validate-event":!1,onFocus:kt,onInput:bn[1]||(bn[1]=jt=>Et.value=jt),onChange:aa},null,8,["placeholder","model-value"]),createVNode(unref(TimePickPanel),{visible:En.value,format:unref(ra),"parsed-value":_e.value,onPick:Xn},null,8,["visible","format","parsed-value"])],2)),[[unref(ClickOutside),At]])],2)):createCommentVNode("v-if",!0),withDirectives(createBaseVNode("div",{class:normalizeClass([unref(k).e("header"),($n.value==="year"||$n.value==="month")&&unref(k).e("header--bordered")])},[createBaseVNode("span",{class:normalizeClass(unref(k).e("prev-btn"))},[createBaseVNode("button",{type:"button","aria-label":unref(L)("el.datepicker.prevYear"),class:normalizeClass(["d-arrow-left",unref(y).e("icon-btn")]),onClick:bn[2]||(bn[2]=jt=>Mn(!1))},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_left_default))]),_:1})],10,_hoisted_2$1y),withDirectives(createBaseVNode("button",{type:"button","aria-label":unref(L)("el.datepicker.prevMonth"),class:normalizeClass([unref(y).e("icon-btn"),"arrow-left"]),onClick:bn[3]||(bn[3]=jt=>Vn(!1))},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1})],10,_hoisted_3$X),[[vShow,$n.value==="date"]])],2),createBaseVNode("span",{role:"button",class:normalizeClass(unref(k).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:bn[4]||(bn[4]=withKeys(jt=>ca("year"),["enter"])),onClick:bn[5]||(bn[5]=jt=>ca("year"))},toDisplayString$1(unref(Nn)),35),withDirectives(createBaseVNode("span",{role:"button","aria-live":"polite",tabindex:"0",class:normalizeClass([unref(k).e("header-label"),{active:$n.value==="month"}]),onKeydown:bn[6]||(bn[6]=withKeys(jt=>ca("month"),["enter"])),onClick:bn[7]||(bn[7]=jt=>ca("month"))},toDisplayString$1(unref(L)(`el.datepicker.month${unref(xe)+1}`)),35),[[vShow,$n.value==="date"]]),createBaseVNode("span",{class:normalizeClass(unref(k).e("next-btn"))},[withDirectives(createBaseVNode("button",{type:"button","aria-label":unref(L)("el.datepicker.nextMonth"),class:normalizeClass([unref(y).e("icon-btn"),"arrow-right"]),onClick:bn[8]||(bn[8]=jt=>Vn(!0))},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})],10,_hoisted_4$P),[[vShow,$n.value==="date"]]),createBaseVNode("button",{type:"button","aria-label":unref(L)("el.datepicker.nextYear"),class:normalizeClass([unref(y).e("icon-btn"),"d-arrow-right"]),onClick:bn[9]||(bn[9]=jt=>Mn(!0))},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_right_default))]),_:1})],10,_hoisted_5$H)],2)],2),[[vShow,$n.value!=="time"]]),createBaseVNode("div",{class:normalizeClass(unref(y).e("content")),onKeydown:Ve},[$n.value==="date"?(openBlock(),createBlock(DateTable,{key:0,ref_key:"currentViewRef",ref:he,"selection-mode":unref(jn),date:_e.value,"parsed-value":Lt.parsedValue,"disabled-date":unref(oe),"cell-class-name":unref(ue),onPick:hn},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):createCommentVNode("v-if",!0),$n.value==="year"?(openBlock(),createBlock(YearTable,{key:1,ref_key:"currentViewRef",ref:he,date:_e.value,"disabled-date":unref(oe),"parsed-value":Lt.parsedValue,onPick:la},null,8,["date","disabled-date","parsed-value"])):createCommentVNode("v-if",!0),$n.value==="month"?(openBlock(),createBlock(MonthTable,{key:2,ref_key:"currentViewRef",ref:he,date:_e.value,"parsed-value":Lt.parsedValue,"disabled-date":unref(oe),onPick:Hn},null,8,["date","parsed-value","disabled-date"])):createCommentVNode("v-if",!0)],34)],2)],2),withDirectives(createBaseVNode("div",{class:normalizeClass(unref(y).e("footer"))},[withDirectives(createVNode(unref(ElButton),{text:"",size:"small",class:normalizeClass(unref(y).e("link-btn")),disabled:unref(ga),onClick:Ca},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(L)("el.datepicker.now")),1)]),_:1},8,["class","disabled"]),[[vShow,unref(jn)!=="dates"]]),createVNode(unref(ElButton),{plain:"",size:"small",class:normalizeClass(unref(y).e("link-btn")),disabled:unref(Wn),onClick:da},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(L)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2),[[vShow,unref(Bn)&&$n.value==="date"]])],2))}});var DatePickPanel=_export_sfc$1(_sfc_main$2v,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-pick.vue"]]);const panelDateRangeProps=buildProps({...panelSharedProps,...panelRangeSharedProps}),useShortcut=e=>{const{emit:n}=getCurrentInstance(),r=useAttrs$1(),g=useSlots();return k=>{const $=isFunction$3(k.value)?k.value():k.value;if($){n("pick",[dayjs($[0]).locale(e.value),dayjs($[1]).locale(e.value)]);return}k.onClick&&k.onClick({attrs:r,slots:g,emit:n})}},useRangePicker=(e,{defaultValue:n,leftDate:r,rightDate:g,unit:y,onParsedValueChanged:k})=>{const{emit:$}=getCurrentInstance(),{pickerNs:V}=inject(ROOT_PICKER_INJECTION_KEY),L=useNamespace("date-range-picker"),{t:z,lang:j}=useLocale(),ae=useShortcut(j),re=ref(),oe=ref(),ue=ref({endDate:null,selecting:!1}),le=Ce=>{ue.value=Ce},de=(Ce=!1)=>{const Ne=unref(re),$e=unref(oe);isValidRange([Ne,$e])&&$("pick",[Ne,$e],Ce)},he=Ce=>{ue.value.selecting=Ce,Ce||(ue.value.endDate=null)},_e=()=>{const[Ce,Ne]=getDefaultValue(unref(n),{lang:unref(j),unit:y,unlinkPanels:e.unlinkPanels});re.value=void 0,oe.value=void 0,r.value=Ce,g.value=Ne};return watch(n,Ce=>{Ce&&_e()},{immediate:!0}),watch(()=>e.parsedValue,Ce=>{if(isArray$3(Ce)&&Ce.length===2){const[Ne,$e]=Ce;re.value=Ne,r.value=Ne,oe.value=$e,k(unref(re),unref(oe))}else _e()},{immediate:!0}),{minDate:re,maxDate:oe,rangeState:ue,lang:j,ppNs:V,drpNs:L,handleChangeRange:le,handleRangeConfirm:de,handleShortcutClick:ae,onSelect:he,t:z}},_hoisted_1$1Q=["onClick"],_hoisted_2$1x=["disabled"],_hoisted_3$W=["disabled"],_hoisted_4$O=["disabled"],_hoisted_5$G=["disabled"],unit$1="month",_sfc_main$2u=defineComponent({__name:"panel-date-range",props:panelDateRangeProps,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(e,{emit:n}){const r=e,g=inject("EP_PICKER_BASE"),{disabledDate:y,cellClassName:k,format:$,defaultTime:V,clearable:L}=g.props,z=toRef(g.props,"shortcuts"),j=toRef(g.props,"defaultValue"),{lang:ae}=useLocale(),re=ref(dayjs().locale(ae.value)),oe=ref(dayjs().locale(ae.value).add(1,unit$1)),{minDate:ue,maxDate:le,rangeState:de,ppNs:he,drpNs:_e,handleChangeRange:Ce,handleRangeConfirm:Ne,handleShortcutClick:$e,onSelect:xe,t:Ie}=useRangePicker(r,{defaultValue:j,leftDate:re,rightDate:oe,unit:unit$1,onParsedValueChanged:bn}),ze=ref({min:null,max:null}),qe=ref({min:null,max:null}),Et=computed(()=>`${re.value.year()} ${Ie("el.datepicker.year")} ${Ie(`el.datepicker.month${re.value.month()+1}`)}`),_n=computed(()=>`${oe.value.year()} ${Ie("el.datepicker.year")} ${Ie(`el.datepicker.month${oe.value.month()+1}`)}`),Dt=computed(()=>re.value.year()),Sn=computed(()=>re.value.month()),hn=computed(()=>oe.value.year()),Vn=computed(()=>oe.value.month()),Mn=computed(()=>!!z.value.length),$n=computed(()=>ze.value.min!==null?ze.value.min:ue.value?ue.value.format(Tn.value):""),Nn=computed(()=>ze.value.max!==null?ze.value.max:le.value||ue.value?(le.value||ue.value).format(Tn.value):""),kn=computed(()=>qe.value.min!==null?qe.value.min:ue.value?ue.value.format(Fn.value):""),jn=computed(()=>qe.value.max!==null?qe.value.max:le.value||ue.value?(le.value||ue.value).format(Fn.value):""),Fn=computed(()=>extractTimeFormat($)),Tn=computed(()=>extractDateFormat($)),Hn=jt=>isValidRange(jt)&&(y?!y(jt[0].toDate())&&!y(jt[1].toDate()):!0),la=()=>{re.value=re.value.subtract(1,"year"),r.unlinkPanels||(oe.value=re.value.add(1,"month")),ra("year")},ca=()=>{re.value=re.value.subtract(1,"month"),r.unlinkPanels||(oe.value=re.value.add(1,"month")),ra("month")},Zn=()=>{r.unlinkPanels?oe.value=oe.value.add(1,"year"):(re.value=re.value.add(1,"year"),oe.value=re.value.add(1,"month")),ra("year")},Bn=()=>{r.unlinkPanels?oe.value=oe.value.add(1,"month"):(re.value=re.value.add(1,"month"),oe.value=re.value.add(1,"month")),ra("month")},Wn=()=>{re.value=re.value.add(1,"year"),ra("year")},da=()=>{re.value=re.value.add(1,"month"),ra("month")},ga=()=>{oe.value=oe.value.subtract(1,"year"),ra("year")},Ca=()=>{oe.value=oe.value.subtract(1,"month"),ra("month")},ra=jt=>{n("panel-change",[re.value.toDate(),oe.value.toDate()],jt)},Gn=computed(()=>{const jt=(Sn.value+1)%12,Cn=Sn.value+1>=12?1:0;return r.unlinkPanels&&new Date(Dt.value+Cn,jt)<new Date(hn.value,Vn.value)}),vn=computed(()=>r.unlinkPanels&&hn.value*12+Vn.value-(Dt.value*12+Sn.value+1)>=12),Kn=computed(()=>!(ue.value&&le.value&&!de.value.selecting&&isValidRange([ue.value,le.value]))),En=computed(()=>r.type==="datetime"||r.type==="datetimerange"),kt=(jt,Cn)=>{if(jt)return V?dayjs(V[Cn]||V).locale(ae.value).year(jt.year()).month(jt.month()).date(jt.date()):jt},At=(jt,Cn=!0)=>{const xn=jt.minDate,In=jt.maxDate,Ln=kt(xn,0),An=kt(In,1);le.value===An&&ue.value===Ln||(n("calendar-change",[xn.toDate(),In&&In.toDate()]),le.value=An,ue.value=Ln,!(!Cn||En.value)&&Ne())},Dn=ref(!1),Xn=ref(!1),aa=()=>{Dn.value=!1},sa=()=>{Xn.value=!1},ia=(jt,Cn)=>{ze.value[Cn]=jt;const xn=dayjs(jt,Tn.value).locale(ae.value);if(xn.isValid()){if(y&&y(xn.toDate()))return;Cn==="min"?(re.value=xn,ue.value=(ue.value||re.value).year(xn.year()).month(xn.month()).date(xn.date()),!r.unlinkPanels&&(!le.value||le.value.isBefore(ue.value))&&(oe.value=xn.add(1,"month"),le.value=ue.value.add(1,"month"))):(oe.value=xn,le.value=(le.value||oe.value).year(xn.year()).month(xn.month()).date(xn.date()),!r.unlinkPanels&&(!ue.value||ue.value.isAfter(le.value))&&(re.value=xn.subtract(1,"month"),ue.value=le.value.subtract(1,"month")))}},ma=(jt,Cn)=>{ze.value[Cn]=null},ua=(jt,Cn)=>{qe.value[Cn]=jt;const xn=dayjs(jt,Fn.value).locale(ae.value);xn.isValid()&&(Cn==="min"?(Dn.value=!0,ue.value=(ue.value||re.value).hour(xn.hour()).minute(xn.minute()).second(xn.second()),(!le.value||le.value.isBefore(ue.value))&&(le.value=ue.value)):(Xn.value=!0,le.value=(le.value||oe.value).hour(xn.hour()).minute(xn.minute()).second(xn.second()),oe.value=le.value,le.value&&le.value.isBefore(ue.value)&&(ue.value=le.value)))},pe=(jt,Cn)=>{qe.value[Cn]=null,Cn==="min"?(re.value=ue.value,Dn.value=!1):(oe.value=le.value,Xn.value=!1)},Oe=(jt,Cn,xn)=>{qe.value.min||(jt&&(re.value=jt,ue.value=(ue.value||re.value).hour(jt.hour()).minute(jt.minute()).second(jt.second())),xn||(Dn.value=Cn),(!le.value||le.value.isBefore(ue.value))&&(le.value=ue.value,oe.value=jt))},Ve=(jt,Cn,xn)=>{qe.value.max||(jt&&(oe.value=jt,le.value=(le.value||oe.value).hour(jt.hour()).minute(jt.minute()).second(jt.second())),xn||(Xn.value=Cn),le.value&&le.value.isBefore(ue.value)&&(ue.value=le.value))},Ue=()=>{re.value=getDefaultValue(unref(j),{lang:unref(ae),unit:"month",unlinkPanels:r.unlinkPanels})[0],oe.value=re.value.add(1,"month"),n("pick",null)},Pt=jt=>isArray$3(jt)?jt.map(Cn=>Cn.format($)):jt.format($),Lt=jt=>isArray$3(jt)?jt.map(Cn=>dayjs(Cn,$).locale(ae.value)):dayjs(jt,$).locale(ae.value);function bn(jt,Cn){if(r.unlinkPanels&&Cn){const xn=jt?.year()||0,In=jt?.month()||0,Ln=Cn.year(),An=Cn.month();oe.value=xn===Ln&&In===An?Cn.add(1,unit$1):Cn}else oe.value=re.value.add(1,unit$1),Cn&&(oe.value=oe.value.hour(Cn.hour()).minute(Cn.minute()).second(Cn.second()))}return n("set-picker-option",["isValidValue",Hn]),n("set-picker-option",["parseUserInput",Lt]),n("set-picker-option",["formatToString",Pt]),n("set-picker-option",["handleClear",Ue]),(jt,Cn)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(he).b(),unref(_e).b(),{"has-sidebar":jt.$slots.sidebar||unref(Mn),"has-time":unref(En)}])},[createBaseVNode("div",{class:normalizeClass(unref(he).e("body-wrapper"))},[renderSlot(jt.$slots,"sidebar",{class:normalizeClass(unref(he).e("sidebar"))}),unref(Mn)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(he).e("sidebar"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(z),(xn,In)=>(openBlock(),createElementBlock("button",{key:In,type:"button",class:normalizeClass(unref(he).e("shortcut")),onClick:Ln=>unref($e)(xn)},toDisplayString$1(xn.text),11,_hoisted_1$1Q))),128))],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(he).e("body"))},[unref(En)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(_e).e("time-header"))},[createBaseVNode("span",{class:normalizeClass(unref(_e).e("editors-wrap"))},[createBaseVNode("span",{class:normalizeClass(unref(_e).e("time-picker-wrap"))},[createVNode(unref(ElInput),{size:"small",disabled:unref(de).selecting,placeholder:unref(Ie)("el.datepicker.startDate"),class:normalizeClass(unref(_e).e("editor")),"model-value":unref($n),"validate-event":!1,onInput:Cn[0]||(Cn[0]=xn=>ia(xn,"min")),onChange:Cn[1]||(Cn[1]=xn=>ma(xn,"min"))},null,8,["disabled","placeholder","class","model-value"])],2),withDirectives((openBlock(),createElementBlock("span",{class:normalizeClass(unref(_e).e("time-picker-wrap"))},[createVNode(unref(ElInput),{size:"small",class:normalizeClass(unref(_e).e("editor")),disabled:unref(de).selecting,placeholder:unref(Ie)("el.datepicker.startTime"),"model-value":unref(kn),"validate-event":!1,onFocus:Cn[2]||(Cn[2]=xn=>Dn.value=!0),onInput:Cn[3]||(Cn[3]=xn=>ua(xn,"min")),onChange:Cn[4]||(Cn[4]=xn=>pe(xn,"min"))},null,8,["class","disabled","placeholder","model-value"]),createVNode(unref(TimePickPanel),{visible:Dn.value,format:unref(Fn),"datetime-role":"start","parsed-value":re.value,onPick:Oe},null,8,["visible","format","parsed-value"])],2)),[[unref(ClickOutside),aa]])],2),createBaseVNode("span",null,[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})]),createBaseVNode("span",{class:normalizeClass([unref(_e).e("editors-wrap"),"is-right"])},[createBaseVNode("span",{class:normalizeClass(unref(_e).e("time-picker-wrap"))},[createVNode(unref(ElInput),{size:"small",class:normalizeClass(unref(_e).e("editor")),disabled:unref(de).selecting,placeholder:unref(Ie)("el.datepicker.endDate"),"model-value":unref(Nn),readonly:!unref(ue),"validate-event":!1,onInput:Cn[5]||(Cn[5]=xn=>ia(xn,"max")),onChange:Cn[6]||(Cn[6]=xn=>ma(xn,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"])],2),withDirectives((openBlock(),createElementBlock("span",{class:normalizeClass(unref(_e).e("time-picker-wrap"))},[createVNode(unref(ElInput),{size:"small",class:normalizeClass(unref(_e).e("editor")),disabled:unref(de).selecting,placeholder:unref(Ie)("el.datepicker.endTime"),"model-value":unref(jn),readonly:!unref(ue),"validate-event":!1,onFocus:Cn[7]||(Cn[7]=xn=>unref(ue)&&(Xn.value=!0)),onInput:Cn[8]||(Cn[8]=xn=>ua(xn,"max")),onChange:Cn[9]||(Cn[9]=xn=>pe(xn,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"]),createVNode(unref(TimePickPanel),{"datetime-role":"end",visible:Xn.value,format:unref(Fn),"parsed-value":oe.value,onPick:Ve},null,8,["visible","format","parsed-value"])],2)),[[unref(ClickOutside),sa]])],2)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass([[unref(he).e("content"),unref(_e).e("content")],"is-left"])},[createBaseVNode("div",{class:normalizeClass(unref(_e).e("header"))},[createBaseVNode("button",{type:"button",class:normalizeClass([unref(he).e("icon-btn"),"d-arrow-left"]),onClick:la},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_left_default))]),_:1})],2),createBaseVNode("button",{type:"button",class:normalizeClass([unref(he).e("icon-btn"),"arrow-left"]),onClick:ca},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1})],2),jt.unlinkPanels?(openBlock(),createElementBlock("button",{key:0,type:"button",disabled:!unref(vn),class:normalizeClass([[unref(he).e("icon-btn"),{"is-disabled":!unref(vn)}],"d-arrow-right"]),onClick:Wn},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_right_default))]),_:1})],10,_hoisted_2$1x)):createCommentVNode("v-if",!0),jt.unlinkPanels?(openBlock(),createElementBlock("button",{key:1,type:"button",disabled:!unref(Gn),class:normalizeClass([[unref(he).e("icon-btn"),{"is-disabled":!unref(Gn)}],"arrow-right"]),onClick:da},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})],10,_hoisted_3$W)):createCommentVNode("v-if",!0),createBaseVNode("div",null,toDisplayString$1(unref(Et)),1)],2),createVNode(DateTable,{"selection-mode":"range",date:re.value,"min-date":unref(ue),"max-date":unref(le),"range-state":unref(de),"disabled-date":unref(y),"cell-class-name":unref(k),onChangerange:unref(Ce),onPick:At,onSelect:unref(xe)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2),createBaseVNode("div",{class:normalizeClass([[unref(he).e("content"),unref(_e).e("content")],"is-right"])},[createBaseVNode("div",{class:normalizeClass(unref(_e).e("header"))},[jt.unlinkPanels?(openBlock(),createElementBlock("button",{key:0,type:"button",disabled:!unref(vn),class:normalizeClass([[unref(he).e("icon-btn"),{"is-disabled":!unref(vn)}],"d-arrow-left"]),onClick:ga},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_left_default))]),_:1})],10,_hoisted_4$O)):createCommentVNode("v-if",!0),jt.unlinkPanels?(openBlock(),createElementBlock("button",{key:1,type:"button",disabled:!unref(Gn),class:normalizeClass([[unref(he).e("icon-btn"),{"is-disabled":!unref(Gn)}],"arrow-left"]),onClick:Ca},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1})],10,_hoisted_5$G)):createCommentVNode("v-if",!0),createBaseVNode("button",{type:"button",class:normalizeClass([unref(he).e("icon-btn"),"d-arrow-right"]),onClick:Zn},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_right_default))]),_:1})],2),createBaseVNode("button",{type:"button",class:normalizeClass([unref(he).e("icon-btn"),"arrow-right"]),onClick:Bn},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})],2),createBaseVNode("div",null,toDisplayString$1(unref(_n)),1)],2),createVNode(DateTable,{"selection-mode":"range",date:oe.value,"min-date":unref(ue),"max-date":unref(le),"range-state":unref(de),"disabled-date":unref(y),"cell-class-name":unref(k),onChangerange:unref(Ce),onPick:At,onSelect:unref(xe)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2)],2)],2),unref(En)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(he).e("footer"))},[unref(L)?(openBlock(),createBlock(unref(ElButton),{key:0,text:"",size:"small",class:normalizeClass(unref(he).e("link-btn")),onClick:Ue},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(Ie)("el.datepicker.clear")),1)]),_:1},8,["class"])):createCommentVNode("v-if",!0),createVNode(unref(ElButton),{plain:"",size:"small",class:normalizeClass(unref(he).e("link-btn")),disabled:unref(Kn),onClick:Cn[10]||(Cn[10]=xn=>unref(Ne)(!1))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(Ie)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2)):createCommentVNode("v-if",!0)],2))}});var DateRangePickPanel=_export_sfc$1(_sfc_main$2u,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-range.vue"]]);const panelMonthRangeProps=buildProps({...panelRangeSharedProps}),panelMonthRangeEmits=["pick","set-picker-option"],useMonthRangeHeader=({unlinkPanels:e,leftDate:n,rightDate:r})=>{const{t:g}=useLocale(),y=()=>{n.value=n.value.subtract(1,"year"),e.value||(r.value=r.value.subtract(1,"year"))},k=()=>{e.value||(n.value=n.value.add(1,"year")),r.value=r.value.add(1,"year")},$=()=>{n.value=n.value.add(1,"year")},V=()=>{r.value=r.value.subtract(1,"year")},L=computed(()=>`${n.value.year()} ${g("el.datepicker.year")}`),z=computed(()=>`${r.value.year()} ${g("el.datepicker.year")}`),j=computed(()=>n.value.year()),ae=computed(()=>r.value.year()===n.value.year()?n.value.year()+1:r.value.year());return{leftPrevYear:y,rightNextYear:k,leftNextYear:$,rightPrevYear:V,leftLabel:L,rightLabel:z,leftYear:j,rightYear:ae}},_hoisted_1$1P=["onClick"],_hoisted_2$1w=["disabled"],_hoisted_3$V=["disabled"],unit="year",__default__$R=defineComponent({name:"DatePickerMonthRange"}),_sfc_main$2t=defineComponent({...__default__$R,props:panelMonthRangeProps,emits:panelMonthRangeEmits,setup(e,{emit:n}){const r=e,{lang:g}=useLocale(),y=inject("EP_PICKER_BASE"),{shortcuts:k,disabledDate:$,format:V}=y.props,L=toRef(y.props,"defaultValue"),z=ref(dayjs().locale(g.value)),j=ref(dayjs().locale(g.value).add(1,unit)),{minDate:ae,maxDate:re,rangeState:oe,ppNs:ue,drpNs:le,handleChangeRange:de,handleRangeConfirm:he,handleShortcutClick:_e,onSelect:Ce}=useRangePicker(r,{defaultValue:L,leftDate:z,rightDate:j,unit,onParsedValueChanged:Mn}),Ne=computed(()=>!!k.length),{leftPrevYear:$e,rightNextYear:xe,leftNextYear:Ie,rightPrevYear:ze,leftLabel:qe,rightLabel:Et,leftYear:_n,rightYear:Dt}=useMonthRangeHeader({unlinkPanels:toRef(r,"unlinkPanels"),leftDate:z,rightDate:j}),Sn=computed(()=>r.unlinkPanels&&Dt.value>_n.value+1),hn=($n,Nn=!0)=>{const kn=$n.minDate,jn=$n.maxDate;re.value===jn&&ae.value===kn||(re.value=jn,ae.value=kn,Nn&&he())},Vn=$n=>$n.map(Nn=>Nn.format(V));function Mn($n,Nn){if(r.unlinkPanels&&Nn){const kn=$n?.year()||0,jn=Nn.year();j.value=kn===jn?Nn.add(1,unit):Nn}else j.value=z.value.add(1,unit)}return n("set-picker-option",["formatToString",Vn]),($n,Nn)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(ue).b(),unref(le).b(),{"has-sidebar":!!$n.$slots.sidebar||unref(Ne)}])},[createBaseVNode("div",{class:normalizeClass(unref(ue).e("body-wrapper"))},[renderSlot($n.$slots,"sidebar",{class:normalizeClass(unref(ue).e("sidebar"))}),unref(Ne)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(ue).e("sidebar"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(k),(kn,jn)=>(openBlock(),createElementBlock("button",{key:jn,type:"button",class:normalizeClass(unref(ue).e("shortcut")),onClick:Fn=>unref(_e)(kn)},toDisplayString$1(kn.text),11,_hoisted_1$1P))),128))],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(ue).e("body"))},[createBaseVNode("div",{class:normalizeClass([[unref(ue).e("content"),unref(le).e("content")],"is-left"])},[createBaseVNode("div",{class:normalizeClass(unref(le).e("header"))},[createBaseVNode("button",{type:"button",class:normalizeClass([unref(ue).e("icon-btn"),"d-arrow-left"]),onClick:Nn[0]||(Nn[0]=(...kn)=>unref($e)&&unref($e)(...kn))},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_left_default))]),_:1})],2),$n.unlinkPanels?(openBlock(),createElementBlock("button",{key:0,type:"button",disabled:!unref(Sn),class:normalizeClass([[unref(ue).e("icon-btn"),{[unref(ue).is("disabled")]:!unref(Sn)}],"d-arrow-right"]),onClick:Nn[1]||(Nn[1]=(...kn)=>unref(Ie)&&unref(Ie)(...kn))},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_right_default))]),_:1})],10,_hoisted_2$1w)):createCommentVNode("v-if",!0),createBaseVNode("div",null,toDisplayString$1(unref(qe)),1)],2),createVNode(MonthTable,{"selection-mode":"range",date:z.value,"min-date":unref(ae),"max-date":unref(re),"range-state":unref(oe),"disabled-date":unref($),onChangerange:unref(de),onPick:hn,onSelect:unref(Ce)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),createBaseVNode("div",{class:normalizeClass([[unref(ue).e("content"),unref(le).e("content")],"is-right"])},[createBaseVNode("div",{class:normalizeClass(unref(le).e("header"))},[$n.unlinkPanels?(openBlock(),createElementBlock("button",{key:0,type:"button",disabled:!unref(Sn),class:normalizeClass([[unref(ue).e("icon-btn"),{"is-disabled":!unref(Sn)}],"d-arrow-left"]),onClick:Nn[2]||(Nn[2]=(...kn)=>unref(ze)&&unref(ze)(...kn))},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_left_default))]),_:1})],10,_hoisted_3$V)):createCommentVNode("v-if",!0),createBaseVNode("button",{type:"button",class:normalizeClass([unref(ue).e("icon-btn"),"d-arrow-right"]),onClick:Nn[3]||(Nn[3]=(...kn)=>unref(xe)&&unref(xe)(...kn))},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(d_arrow_right_default))]),_:1})],2),createBaseVNode("div",null,toDisplayString$1(unref(Et)),1)],2),createVNode(MonthTable,{"selection-mode":"range",date:j.value,"min-date":unref(ae),"max-date":unref(re),"range-state":unref(oe),"disabled-date":unref($),onChangerange:unref(de),onPick:hn,onSelect:unref(Ce)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var MonthRangePickPanel=_export_sfc$1(_sfc_main$2t,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-month-range.vue"]]);const getPanel$1=function(e){switch(e){case"daterange":case"datetimerange":return DateRangePickPanel;case"monthrange":return MonthRangePickPanel;default:return DatePickPanel}};dayjs.extend(localeData);dayjs.extend(advancedFormat);dayjs.extend(customParseFormat);dayjs.extend(weekOfYear);dayjs.extend(weekYear);dayjs.extend(dayOfYear);dayjs.extend(isSameOrAfter);dayjs.extend(isSameOrBefore);var DatePicker=defineComponent({name:"ElDatePicker",install:null,props:datePickerProps,emits:["update:modelValue"],setup(e,{expose:n,emit:r,slots:g}){const y=useNamespace("picker-panel");provide("ElPopperOptions",reactive(toRef(e,"popperOptions"))),provide(ROOT_PICKER_INJECTION_KEY,{slots:g,pickerNs:y});const k=ref();n({focus:(L=!0)=>{var z;(z=k.value)==null||z.focus(L)},handleOpen:()=>{var L;(L=k.value)==null||L.handleOpen()},handleClose:()=>{var L;(L=k.value)==null||L.handleClose()}});const V=L=>{r("update:modelValue",L)};return()=>{var L;const z=(L=e.format)!=null?L:DEFAULT_FORMATS_DATEPICKER[e.type]||DEFAULT_FORMATS_DATE,j=getPanel$1(e.type);return createVNode(CommonPicker,mergeProps(e,{format:z,type:e.type,ref:k,"onUpdate:modelValue":V}),{default:ae=>createVNode(j,ae,null),"range-separator":g["range-separator"]})}}});const _DatePicker=DatePicker;_DatePicker.install=e=>{e.component(_DatePicker.name,_DatePicker)};const ElDatePicker=_DatePicker,descriptionsKey=Symbol("elDescriptions");var ElDescriptionsCell=defineComponent({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String},type:{type:String}},setup(){return{descriptions:inject(descriptionsKey,{})}},render(){var e,n,r,g,y,k;const $=getNormalizedProps(this.cell),{border:V,direction:L}=this.descriptions,z=L==="vertical",j=((r=(n=(e=this.cell)==null?void 0:e.children)==null?void 0:n.label)==null?void 0:r.call(n))||$.label,ae=(k=(y=(g=this.cell)==null?void 0:g.children)==null?void 0:y.default)==null?void 0:k.call(y),re=$.span,oe=$.align?`is-${$.align}`:"",ue=$.labelAlign?`is-${$.labelAlign}`:oe,le=$.className,de=$.labelClassName,he={width:addUnit($.width),minWidth:addUnit($.minWidth)},_e=useNamespace("descriptions");switch(this.type){case"label":return h$1(this.tag,{style:he,class:[_e.e("cell"),_e.e("label"),_e.is("bordered-label",V),_e.is("vertical-label",z),ue,de],colSpan:z?re:1},j);case"content":return h$1(this.tag,{style:he,class:[_e.e("cell"),_e.e("content"),_e.is("bordered-content",V),_e.is("vertical-content",z),oe,le],colSpan:z?re:re*2-1},ae);default:return h$1("td",{style:he,class:[_e.e("cell"),oe],colSpan:re},[isNil(j)?void 0:h$1("span",{class:[_e.e("label"),de]},j),h$1("span",{class:[_e.e("content"),le]},ae)])}}});const descriptionsRowProps=buildProps({row:{type:Array,default:()=>[]}}),_hoisted_1$1O={key:1},__default__$Q=defineComponent({name:"ElDescriptionsRow"}),_sfc_main$2s=defineComponent({...__default__$Q,props:descriptionsRowProps,setup(e){const n=inject(descriptionsKey,{});return(r,g)=>unref(n).direction==="vertical"?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("tr",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.row,(y,k)=>(openBlock(),createBlock(unref(ElDescriptionsCell),{key:`tr1-${k}`,cell:y,tag:"th",type:"label"},null,8,["cell"]))),128))]),createBaseVNode("tr",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.row,(y,k)=>(openBlock(),createBlock(unref(ElDescriptionsCell),{key:`tr2-${k}`,cell:y,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(openBlock(),createElementBlock("tr",_hoisted_1$1O,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.row,(y,k)=>(openBlock(),createElementBlock(Fragment,{key:`tr3-${k}`},[unref(n).border?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode(unref(ElDescriptionsCell),{cell:y,tag:"td",type:"label"},null,8,["cell"]),createVNode(unref(ElDescriptionsCell),{cell:y,tag:"td",type:"content"},null,8,["cell"])],64)):(openBlock(),createBlock(unref(ElDescriptionsCell),{key:1,cell:y,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var ElDescriptionsRow=_export_sfc$1(_sfc_main$2s,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/descriptions-row.vue"]]);const descriptionProps=buildProps({border:{type:Boolean,default:!1},column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:useSizeProp,title:{type:String,default:""},extra:{type:String,default:""}}),__default__$P=defineComponent({name:"ElDescriptions"}),_sfc_main$2r=defineComponent({...__default__$P,props:descriptionProps,setup(e){const n=e,r=useNamespace("descriptions"),g=useFormSize(),y=useSlots();provide(descriptionsKey,n);const k=computed(()=>[r.b(),r.m(g.value)]),$=(L,z,j,ae=!1)=>(L.props||(L.props={}),z>j&&(L.props.span=j),ae&&(L.props.span=z),L),V=()=>{var L;const z=flattedChildren((L=y.default)==null?void 0:L.call(y)).filter(ue=>{var le;return((le=ue?.type)==null?void 0:le.name)==="ElDescriptionsItem"}),j=[];let ae=[],re=n.column,oe=0;return z.forEach((ue,le)=>{var de;const he=((de=ue.props)==null?void 0:de.span)||1;if(le<z.length-1&&(oe+=he>re?re:he),le===z.length-1){const _e=n.column-oe%n.column;ae.push($(ue,_e,re,!0)),j.push(ae);return}he<re?(re-=he,ae.push(ue)):(ae.push($(ue,he,re)),j.push(ae),re=n.column,ae=[])}),j};return(L,z)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(k))},[L.title||L.extra||L.$slots.title||L.$slots.extra?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(r).e("header"))},[createBaseVNode("div",{class:normalizeClass(unref(r).e("title"))},[renderSlot(L.$slots,"title",{},()=>[createTextVNode(toDisplayString$1(L.title),1)])],2),createBaseVNode("div",{class:normalizeClass(unref(r).e("extra"))},[renderSlot(L.$slots,"extra",{},()=>[createTextVNode(toDisplayString$1(L.extra),1)])],2)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(r).e("body"))},[createBaseVNode("table",{class:normalizeClass([unref(r).e("table"),unref(r).is("bordered",L.border)])},[createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(V(),(j,ae)=>(openBlock(),createBlock(ElDescriptionsRow,{key:ae,row:j},null,8,["row"]))),128))])],2)],2)],2))}});var Descriptions=_export_sfc$1(_sfc_main$2r,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/description.vue"]]),DescriptionsItem=defineComponent({name:"ElDescriptionsItem",props:{label:{type:String,default:""},span:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}});const ElDescriptions=withInstall(Descriptions,{DescriptionsItem}),ElDescriptionsItem=withNoopInstall(DescriptionsItem),overlayProps=buildProps({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:definePropType([String,Array,Object])},zIndex:{type:definePropType([String,Number])}}),overlayEmits={click:e=>e instanceof MouseEvent},BLOCK="overlay";var Overlay$1=defineComponent({name:"ElOverlay",props:overlayProps,emits:overlayEmits,setup(e,{slots:n,emit:r}){const g=useNamespace(BLOCK),y=L=>{r("click",L)},{onClick:k,onMousedown:$,onMouseup:V}=useSameTarget(e.customMaskEvent?void 0:y);return()=>e.mask?createVNode("div",{class:[g.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:k,onMousedown:$,onMouseup:V},[renderSlot(n,"default")],PatchFlags.STYLE|PatchFlags.CLASS|PatchFlags.PROPS,["onClick","onMouseup","onMousedown"]):h$1("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[renderSlot(n,"default")])}});const ElOverlay=Overlay$1,dialogInjectionKey=Symbol("dialogInjectionKey"),dialogContentProps=buildProps({center:Boolean,alignCenter:Boolean,closeIcon:{type:iconPropType},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),dialogContentEmits={close:()=>!0},_hoisted_1$1N=["aria-level"],_hoisted_2$1v=["aria-label"],_hoisted_3$U=["id"],__default__$O=defineComponent({name:"ElDialogContent"}),_sfc_main$2q=defineComponent({...__default__$O,props:dialogContentProps,emits:dialogContentEmits,setup(e){const n=e,{t:r}=useLocale(),{Close:g}=CloseComponents,{dialogRef:y,headerRef:k,bodyId:$,ns:V,style:L}=inject(dialogInjectionKey),{focusTrapRef:z}=inject(FOCUS_TRAP_INJECTION_KEY),j=computed(()=>[V.b(),V.is("fullscreen",n.fullscreen),V.is("draggable",n.draggable),V.is("align-center",n.alignCenter),{[V.m("center")]:n.center},n.customClass]),ae=composeRefs(z,y),re=computed(()=>n.draggable);return useDraggable(y,k,re),(oe,ue)=>(openBlock(),createElementBlock("div",{ref:unref(ae),class:normalizeClass(unref(j)),style:normalizeStyle(unref(L)),tabindex:"-1"},[createBaseVNode("header",{ref_key:"headerRef",ref:k,class:normalizeClass(unref(V).e("header"))},[renderSlot(oe.$slots,"header",{},()=>[createBaseVNode("span",{role:"heading","aria-level":oe.ariaLevel,class:normalizeClass(unref(V).e("title"))},toDisplayString$1(oe.title),11,_hoisted_1$1N)]),oe.showClose?(openBlock(),createElementBlock("button",{key:0,"aria-label":unref(r)("el.dialog.close"),class:normalizeClass(unref(V).e("headerbtn")),type:"button",onClick:ue[0]||(ue[0]=le=>oe.$emit("close"))},[createVNode(unref(ElIcon),{class:normalizeClass(unref(V).e("close"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(oe.closeIcon||unref(g))))]),_:1},8,["class"])],10,_hoisted_2$1v)):createCommentVNode("v-if",!0)],2),createBaseVNode("div",{id:unref($),class:normalizeClass(unref(V).e("body"))},[renderSlot(oe.$slots,"default")],10,_hoisted_3$U),oe.$slots.footer?(openBlock(),createElementBlock("footer",{key:0,class:normalizeClass(unref(V).e("footer"))},[renderSlot(oe.$slots,"footer")],2)):createCommentVNode("v-if",!0)],6))}});var ElDialogContent=_export_sfc$1(_sfc_main$2q,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const dialogProps=buildProps({...dialogContentProps,appendToBody:Boolean,beforeClose:{type:definePropType(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),dialogEmits={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[UPDATE_MODEL_EVENT]:e=>isBoolean$1(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},useDialog=(e,n)=>{const g=getCurrentInstance().emit,{nextZIndex:y}=useZIndex();let k="";const $=useId(),V=useId(),L=ref(!1),z=ref(!1),j=ref(!1),ae=ref(e.zIndex||y());let re,oe;const ue=useGlobalConfig("namespace",defaultNamespace),le=computed(()=>{const hn={},Vn=`--${ue.value}-dialog`;return e.fullscreen||(e.top&&(hn[`${Vn}-margin-top`]=e.top),e.width&&(hn[`${Vn}-width`]=addUnit(e.width))),hn}),de=computed(()=>e.alignCenter?{display:"flex"}:{});function he(){g("opened")}function _e(){g("closed"),g(UPDATE_MODEL_EVENT,!1),e.destroyOnClose&&(j.value=!1)}function Ce(){g("close")}function Ne(){oe?.(),re?.(),e.openDelay&&e.openDelay>0?{stop:re}=useTimeoutFn(()=>ze(),e.openDelay):ze()}function $e(){re?.(),oe?.(),e.closeDelay&&e.closeDelay>0?{stop:oe}=useTimeoutFn(()=>qe(),e.closeDelay):qe()}function xe(){function hn(Vn){Vn||(z.value=!0,L.value=!1)}e.beforeClose?e.beforeClose(hn):$e()}function Ie(){e.closeOnClickModal&&xe()}function ze(){isClient&&(L.value=!0)}function qe(){L.value=!1}function Et(){g("openAutoFocus")}function _n(){g("closeAutoFocus")}function Dt(hn){var Vn;((Vn=hn.detail)==null?void 0:Vn.focusReason)==="pointer"&&hn.preventDefault()}e.lockScroll&&useLockscreen(L);function Sn(){e.closeOnPressEscape&&xe()}return watch(()=>e.modelValue,hn=>{hn?(z.value=!1,Ne(),j.value=!0,ae.value=e.zIndex?ae.value++:y(),nextTick(()=>{g("open"),n.value&&(n.value.scrollTop=0)})):L.value&&$e()}),watch(()=>e.fullscreen,hn=>{n.value&&(hn?(k=n.value.style.transform,n.value.style.transform=""):n.value.style.transform=k)}),onMounted(()=>{e.modelValue&&(L.value=!0,j.value=!0,Ne())}),{afterEnter:he,afterLeave:_e,beforeLeave:Ce,handleClose:xe,onModalClick:Ie,close:$e,doClose:qe,onOpenAutoFocus:Et,onCloseAutoFocus:_n,onCloseRequested:Sn,onFocusoutPrevented:Dt,titleId:$,bodyId:V,closed:z,style:le,overlayDialogStyle:de,rendered:j,visible:L,zIndex:ae}},_hoisted_1$1M=["aria-label","aria-labelledby","aria-describedby"],__default__$N=defineComponent({name:"ElDialog",inheritAttrs:!1}),_sfc_main$2p=defineComponent({...__default__$N,props:dialogProps,emits:dialogEmits,setup(e,{expose:n}){const r=e,g=useSlots();useDeprecated({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},computed(()=>!!g.title)),useDeprecated({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},computed(()=>!!r.customClass));const y=useNamespace("dialog"),k=ref(),$=ref(),V=ref(),{visible:L,titleId:z,bodyId:j,style:ae,overlayDialogStyle:re,rendered:oe,zIndex:ue,afterEnter:le,afterLeave:de,beforeLeave:he,handleClose:_e,onModalClick:Ce,onOpenAutoFocus:Ne,onCloseAutoFocus:$e,onCloseRequested:xe,onFocusoutPrevented:Ie}=useDialog(r,k);provide(dialogInjectionKey,{dialogRef:k,headerRef:$,bodyId:j,ns:y,rendered:oe,style:ae});const ze=useSameTarget(Ce),qe=computed(()=>r.draggable&&!r.fullscreen);return n({visible:L,dialogContentRef:V}),(Et,_n)=>(openBlock(),createBlock(Teleport,{to:"body",disabled:!Et.appendToBody},[createVNode(Transition,{name:"dialog-fade",onAfterEnter:unref(le),onAfterLeave:unref(de),onBeforeLeave:unref(he),persisted:""},{default:withCtx(()=>[withDirectives(createVNode(unref(ElOverlay),{"custom-mask-event":"",mask:Et.modal,"overlay-class":Et.modalClass,"z-index":unref(ue)},{default:withCtx(()=>[createBaseVNode("div",{role:"dialog","aria-modal":"true","aria-label":Et.title||void 0,"aria-labelledby":Et.title?void 0:unref(z),"aria-describedby":unref(j),class:normalizeClass(`${unref(y).namespace.value}-overlay-dialog`),style:normalizeStyle(unref(re)),onClick:_n[0]||(_n[0]=(...Dt)=>unref(ze).onClick&&unref(ze).onClick(...Dt)),onMousedown:_n[1]||(_n[1]=(...Dt)=>unref(ze).onMousedown&&unref(ze).onMousedown(...Dt)),onMouseup:_n[2]||(_n[2]=(...Dt)=>unref(ze).onMouseup&&unref(ze).onMouseup(...Dt))},[createVNode(unref(ElFocusTrap),{loop:"",trapped:unref(L),"focus-start-el":"container",onFocusAfterTrapped:unref(Ne),onFocusAfterReleased:unref($e),onFocusoutPrevented:unref(Ie),onReleaseRequested:unref(xe)},{default:withCtx(()=>[unref(oe)?(openBlock(),createBlock(ElDialogContent,mergeProps({key:0,ref_key:"dialogContentRef",ref:V},Et.$attrs,{"custom-class":Et.customClass,center:Et.center,"align-center":Et.alignCenter,"close-icon":Et.closeIcon,draggable:unref(qe),fullscreen:Et.fullscreen,"show-close":Et.showClose,title:Et.title,"aria-level":Et.headerAriaLevel,onClose:unref(_e)}),createSlots({header:withCtx(()=>[Et.$slots.title?renderSlot(Et.$slots,"title",{key:1}):renderSlot(Et.$slots,"header",{key:0,close:unref(_e),titleId:unref(z),titleClass:unref(y).e("title")})]),default:withCtx(()=>[renderSlot(Et.$slots,"default")]),_:2},[Et.$slots.footer?{name:"footer",fn:withCtx(()=>[renderSlot(Et.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):createCommentVNode("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,_hoisted_1$1M)]),_:3},8,["mask","overlay-class","z-index"]),[[vShow,unref(L)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var Dialog=_export_sfc$1(_sfc_main$2p,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const ElDialog=withInstall(Dialog),dividerProps=buildProps({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:definePropType(String),default:"solid"}}),__default__$M=defineComponent({name:"ElDivider"}),_sfc_main$2o=defineComponent({...__default__$M,props:dividerProps,setup(e){const n=e,r=useNamespace("divider"),g=computed(()=>r.cssVar({"border-style":n.borderStyle}));return(y,k)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(r).b(),unref(r).m(y.direction)]),style:normalizeStyle(unref(g)),role:"separator"},[y.$slots.default&&y.direction!=="vertical"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([unref(r).e("text"),unref(r).is(y.contentPosition)])},[renderSlot(y.$slots,"default")],2)):createCommentVNode("v-if",!0)],6))}});var Divider=_export_sfc$1(_sfc_main$2o,[["__file","/home/runner/work/element-plus/element-plus/packages/components/divider/src/divider.vue"]]);const ElDivider=withInstall(Divider),drawerProps=buildProps({...dialogProps,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),drawerEmits=dialogEmits,_sfc_main$2n=defineComponent({name:"ElDrawer",components:{ElOverlay,ElFocusTrap,ElIcon,Close:close_default},inheritAttrs:!1,props:drawerProps,emits:drawerEmits,setup(e,{slots:n}){useDeprecated({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},computed(()=>!!n.title)),useDeprecated({scope:"el-drawer",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/drawer.html#attributes",type:"Attribute"},computed(()=>!!e.customClass));const r=ref(),g=ref(),y=useNamespace("drawer"),{t:k}=useLocale(),$=computed(()=>e.direction==="rtl"||e.direction==="ltr"),V=computed(()=>addUnit(e.size));return{...useDialog(e,r),drawerRef:r,focusStartRef:g,isHorizontal:$,drawerSize:V,ns:y,t:k}}}),_hoisted_1$1L=["aria-label","aria-labelledby","aria-describedby"],_hoisted_2$1u=["id","aria-level"],_hoisted_3$T=["aria-label"],_hoisted_4$N=["id"];function _sfc_render$o(e,n,r,g,y,k){const $=resolveComponent("close"),V=resolveComponent("el-icon"),L=resolveComponent("el-focus-trap"),z=resolveComponent("el-overlay");return openBlock(),createBlock(Teleport,{to:"body",disabled:!e.appendToBody},[createVNode(Transition,{name:e.ns.b("fade"),onAfterEnter:e.afterEnter,onAfterLeave:e.afterLeave,onBeforeLeave:e.beforeLeave,persisted:""},{default:withCtx(()=>[withDirectives(createVNode(z,{mask:e.modal,"overlay-class":e.modalClass,"z-index":e.zIndex,onClick:e.onModalClick},{default:withCtx(()=>[createVNode(L,{loop:"",trapped:e.visible,"focus-trap-el":e.drawerRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:withCtx(()=>[createBaseVNode("div",mergeProps({ref:"drawerRef","aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:e.titleId,"aria-describedby":e.bodyId},e.$attrs,{class:[e.ns.b(),e.direction,e.visible&&"open",e.customClass],style:e.isHorizontal?"width: "+e.drawerSize:"height: "+e.drawerSize,role:"dialog",onClick:n[1]||(n[1]=withModifiers(()=>{},["stop"]))}),[createBaseVNode("span",{ref:"focusStartRef",class:normalizeClass(e.ns.e("sr-focus")),tabindex:"-1"},null,2),e.withHeader?(openBlock(),createElementBlock("header",{key:0,class:normalizeClass(e.ns.e("header"))},[e.$slots.title?renderSlot(e.$slots,"title",{key:1},()=>[createCommentVNode(" DEPRECATED SLOT ")]):renderSlot(e.$slots,"header",{key:0,close:e.handleClose,titleId:e.titleId,titleClass:e.ns.e("title")},()=>[e.$slots.title?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",{key:0,id:e.titleId,role:"heading","aria-level":e.headerAriaLevel,class:normalizeClass(e.ns.e("title"))},toDisplayString$1(e.title),11,_hoisted_2$1u))]),e.showClose?(openBlock(),createElementBlock("button",{key:2,"aria-label":e.t("el.drawer.close"),class:normalizeClass(e.ns.e("close-btn")),type:"button",onClick:n[0]||(n[0]=(...j)=>e.handleClose&&e.handleClose(...j))},[createVNode(V,{class:normalizeClass(e.ns.e("close"))},{default:withCtx(()=>[createVNode($)]),_:1},8,["class"])],10,_hoisted_3$T)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),e.rendered?(openBlock(),createElementBlock("div",{key:1,id:e.bodyId,class:normalizeClass(e.ns.e("body"))},[renderSlot(e.$slots,"default")],10,_hoisted_4$N)):createCommentVNode("v-if",!0),e.$slots.footer?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(e.ns.e("footer"))},[renderSlot(e.$slots,"footer")],2)):createCommentVNode("v-if",!0)],16,_hoisted_1$1L)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[vShow,e.visible]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var Drawer=_export_sfc$1(_sfc_main$2n,[["render",_sfc_render$o],["__file","/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]);const ElDrawer=withInstall(Drawer),_sfc_main$2m=defineComponent({inheritAttrs:!1});function _sfc_render$n(e,n,r,g,y,k){return renderSlot(e.$slots,"default")}var Collection=_export_sfc$1(_sfc_main$2m,[["render",_sfc_render$n],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const _sfc_main$2l=defineComponent({name:"ElCollectionItem",inheritAttrs:!1});function _sfc_render$m(e,n,r,g,y,k){return renderSlot(e.$slots,"default")}var CollectionItem=_export_sfc$1(_sfc_main$2l,[["render",_sfc_render$m],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const COLLECTION_ITEM_SIGN="data-el-collection-item",createCollectionWithScope=e=>{const n=`El${e}Collection`,r=`${n}Item`,g=Symbol(n),y=Symbol(r),k={...Collection,name:n,setup(){const V=ref(null),L=new Map;provide(g,{itemMap:L,getItems:()=>{const j=unref(V);if(!j)return[];const ae=Array.from(j.querySelectorAll(`[${COLLECTION_ITEM_SIGN}]`));return[...L.values()].sort((oe,ue)=>ae.indexOf(oe.ref)-ae.indexOf(ue.ref))},collectionRef:V})}},$={...CollectionItem,name:r,setup(V,{attrs:L}){const z=ref(null),j=inject(g,void 0);provide(y,{collectionItemRef:z}),onMounted(()=>{const ae=unref(z);ae&&j.itemMap.set(ae,{ref:ae,...L})}),onBeforeUnmount(()=>{const ae=unref(z);j.itemMap.delete(ae)})}};return{COLLECTION_INJECTION_KEY:g,COLLECTION_ITEM_INJECTION_KEY:y,ElCollection:k,ElCollectionItem:$}},rovingFocusGroupProps=buildProps({style:{type:definePropType([String,Array,Object])},currentTabId:{type:definePropType(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:definePropType(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:ElCollection$1,ElCollectionItem:ElCollectionItem$1,COLLECTION_INJECTION_KEY:COLLECTION_INJECTION_KEY$1,COLLECTION_ITEM_INJECTION_KEY:COLLECTION_ITEM_INJECTION_KEY$1}=createCollectionWithScope("RovingFocusGroup"),ROVING_FOCUS_GROUP_INJECTION_KEY=Symbol("elRovingFocusGroup"),ROVING_FOCUS_GROUP_ITEM_INJECTION_KEY=Symbol("elRovingFocusGroupItem"),MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},getDirectionAwareKey=(e,n)=>{if(n!=="rtl")return e;switch(e){case EVENT_CODE.right:return EVENT_CODE.left;case EVENT_CODE.left:return EVENT_CODE.right;default:return e}},getFocusIntent=(e,n,r)=>{const g=getDirectionAwareKey(e.key,r);if(!(n==="vertical"&&[EVENT_CODE.left,EVENT_CODE.right].includes(g))&&!(n==="horizontal"&&[EVENT_CODE.up,EVENT_CODE.down].includes(g)))return MAP_KEY_TO_FOCUS_INTENT[g]},reorderArray=(e,n)=>e.map((r,g)=>e[(g+n)%e.length]),focusFirst=e=>{const{activeElement:n}=document;for(const r of e)if(r===n||(r.focus(),n!==document.activeElement))return},CURRENT_TAB_ID_CHANGE_EVT="currentTabIdChange",ENTRY_FOCUS_EVT="rovingFocusGroup.entryFocus",EVT_OPTS={bubbles:!1,cancelable:!0},_sfc_main$2k=defineComponent({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:rovingFocusGroupProps,emits:[CURRENT_TAB_ID_CHANGE_EVT,"entryFocus"],setup(e,{emit:n}){var r;const g=ref((r=e.currentTabId||e.defaultCurrentTabId)!=null?r:null),y=ref(!1),k=ref(!1),$=ref(null),{getItems:V}=inject(COLLECTION_INJECTION_KEY$1,void 0),L=computed(()=>[{outline:"none"},e.style]),z=le=>{n(CURRENT_TAB_ID_CHANGE_EVT,le)},j=()=>{y.value=!0},ae=composeEventHandlers(le=>{var de;(de=e.onMousedown)==null||de.call(e,le)},()=>{k.value=!0}),re=composeEventHandlers(le=>{var de;(de=e.onFocus)==null||de.call(e,le)},le=>{const de=!unref(k),{target:he,currentTarget:_e}=le;if(he===_e&&de&&!unref(y)){const Ce=new Event(ENTRY_FOCUS_EVT,EVT_OPTS);if(_e?.dispatchEvent(Ce),!Ce.defaultPrevented){const Ne=V().filter(qe=>qe.focusable),$e=Ne.find(qe=>qe.active),xe=Ne.find(qe=>qe.id===unref(g)),ze=[$e,xe,...Ne].filter(Boolean).map(qe=>qe.ref);focusFirst(ze)}}k.value=!1}),oe=composeEventHandlers(le=>{var de;(de=e.onBlur)==null||de.call(e,le)},()=>{y.value=!1}),ue=(...le)=>{n("entryFocus",...le)};provide(ROVING_FOCUS_GROUP_INJECTION_KEY,{currentTabbedId:readonly(g),loop:toRef(e,"loop"),tabIndex:computed(()=>unref(y)?-1:0),rovingFocusGroupRef:$,rovingFocusGroupRootStyle:L,orientation:toRef(e,"orientation"),dir:toRef(e,"dir"),onItemFocus:z,onItemShiftTab:j,onBlur:oe,onFocus:re,onMousedown:ae}),watch(()=>e.currentTabId,le=>{g.value=le??null}),useEventListener($,ENTRY_FOCUS_EVT,ue)}});function _sfc_render$l(e,n,r,g,y,k){return renderSlot(e.$slots,"default")}var ElRovingFocusGroupImpl=_export_sfc$1(_sfc_main$2k,[["render",_sfc_render$l],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]]);const _sfc_main$2j=defineComponent({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:ElCollection$1,ElRovingFocusGroupImpl}});function _sfc_render$k(e,n,r,g,y,k){const $=resolveComponent("el-roving-focus-group-impl"),V=resolveComponent("el-focus-group-collection");return openBlock(),createBlock(V,null,{default:withCtx(()=>[createVNode($,normalizeProps(guardReactiveProps(e.$attrs)),{default:withCtx(()=>[renderSlot(e.$slots,"default")]),_:3},16)]),_:3})}var ElRovingFocusGroup=_export_sfc$1(_sfc_main$2j,[["render",_sfc_render$k],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const _sfc_main$2i=defineComponent({components:{ElRovingFocusCollectionItem:ElCollectionItem$1},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:n}){const{currentTabbedId:r,loop:g,onItemFocus:y,onItemShiftTab:k}=inject(ROVING_FOCUS_GROUP_INJECTION_KEY,void 0),{getItems:$}=inject(COLLECTION_INJECTION_KEY$1,void 0),V=useId(),L=ref(null),z=composeEventHandlers(oe=>{n("mousedown",oe)},oe=>{e.focusable?y(unref(V)):oe.preventDefault()}),j=composeEventHandlers(oe=>{n("focus",oe)},()=>{y(unref(V))}),ae=composeEventHandlers(oe=>{n("keydown",oe)},oe=>{const{key:ue,shiftKey:le,target:de,currentTarget:he}=oe;if(ue===EVENT_CODE.tab&&le){k();return}if(de!==he)return;const _e=getFocusIntent(oe);if(_e){oe.preventDefault();let Ne=$().filter($e=>$e.focusable).map($e=>$e.ref);switch(_e){case"last":{Ne.reverse();break}case"prev":case"next":{_e==="prev"&&Ne.reverse();const $e=Ne.indexOf(he);Ne=g.value?reorderArray(Ne,$e+1):Ne.slice($e+1);break}}nextTick(()=>{focusFirst(Ne)})}}),re=computed(()=>r.value===unref(V));return provide(ROVING_FOCUS_GROUP_ITEM_INJECTION_KEY,{rovingFocusGroupItemRef:L,tabIndex:computed(()=>unref(re)?0:-1),handleMousedown:z,handleFocus:j,handleKeydown:ae}),{id:V,handleKeydown:ae,handleFocus:j,handleMousedown:z}}});function _sfc_render$j(e,n,r,g,y,k){const $=resolveComponent("el-roving-focus-collection-item");return openBlock(),createBlock($,{id:e.id,focusable:e.focusable,active:e.active},{default:withCtx(()=>[renderSlot(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var ElRovingFocusItem=_export_sfc$1(_sfc_main$2i,[["render",_sfc_render$j],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const dropdownProps=buildProps({trigger:useTooltipTriggerProps.trigger,effect:{...useTooltipContentProps.effect,default:"light"},type:{type:definePropType(String)},placement:{type:definePropType(String),default:"bottom"},popperOptions:{type:definePropType(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:definePropType([Number,String]),default:0},maxHeight:{type:definePropType([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:definePropType(Object)},teleported:useTooltipContentProps.teleported}),dropdownItemProps=buildProps({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:iconPropType}}),dropdownMenuProps=buildProps({onKeydown:{type:definePropType(Function)}}),FIRST_KEYS=[EVENT_CODE.down,EVENT_CODE.pageDown,EVENT_CODE.home],LAST_KEYS=[EVENT_CODE.up,EVENT_CODE.pageUp,EVENT_CODE.end],FIRST_LAST_KEYS=[...FIRST_KEYS,...LAST_KEYS],{ElCollection,ElCollectionItem,COLLECTION_INJECTION_KEY,COLLECTION_ITEM_INJECTION_KEY}=createCollectionWithScope("Dropdown"),DROPDOWN_INJECTION_KEY=Symbol("elDropdown"),{ButtonGroup:ElButtonGroup}=ElButton,_sfc_main$2h=defineComponent({name:"ElDropdown",components:{ElButton,ElButtonGroup,ElScrollbar,ElDropdownCollection:ElCollection,ElTooltip,ElRovingFocusGroup,ElOnlyChild:OnlyChild,ElIcon,ArrowDown:arrow_down_default},props:dropdownProps,emits:["visible-change","click","command"],setup(e,{emit:n}){const r=getCurrentInstance(),g=useNamespace("dropdown"),{t:y}=useLocale(),k=ref(),$=ref(),V=ref(null),L=ref(null),z=ref(null),j=ref(null),ae=ref(!1),re=[EVENT_CODE.enter,EVENT_CODE.space,EVENT_CODE.down],oe=computed(()=>({maxHeight:addUnit(e.maxHeight)})),ue=computed(()=>[g.m($e.value)]),le=computed(()=>castArray$1(e.trigger)),de=useId().value,he=computed(()=>e.id||de);watch([k,le],([$n,Nn],[kn])=>{var jn,Fn,Tn;(jn=kn?.$el)!=null&&jn.removeEventListener&&kn.$el.removeEventListener("pointerenter",Ie),(Fn=$n?.$el)!=null&&Fn.removeEventListener&&$n.$el.removeEventListener("pointerenter",Ie),(Tn=$n?.$el)!=null&&Tn.addEventListener&&Nn.includes("hover")&&$n.$el.addEventListener("pointerenter",Ie)},{immediate:!0}),onBeforeUnmount(()=>{var $n,Nn;(Nn=($n=k.value)==null?void 0:$n.$el)!=null&&Nn.removeEventListener&&k.value.$el.removeEventListener("pointerenter",Ie)});function _e(){Ce()}function Ce(){var $n;($n=V.value)==null||$n.onClose()}function Ne(){var $n;($n=V.value)==null||$n.onOpen()}const $e=useFormSize();function xe(...$n){n("command",...$n)}function Ie(){var $n,Nn;(Nn=($n=k.value)==null?void 0:$n.$el)==null||Nn.focus()}function ze(){}function qe(){const $n=unref(L);le.value.includes("hover")&&$n?.focus(),j.value=null}function Et($n){j.value=$n}function _n($n){ae.value||($n.preventDefault(),$n.stopImmediatePropagation())}function Dt(){n("visible-change",!0)}function Sn($n){$n?.type==="keydown"&&L.value.focus()}function hn(){n("visible-change",!1)}return provide(DROPDOWN_INJECTION_KEY,{contentRef:L,role:computed(()=>e.role),triggerId:he,isUsingKeyboard:ae,onItemEnter:ze,onItemLeave:qe}),provide("elDropdown",{instance:r,dropdownSize:$e,handleClick:_e,commandHandler:xe,trigger:toRef(e,"trigger"),hideOnClick:toRef(e,"hideOnClick")}),{t:y,ns:g,scrollbar:z,wrapStyle:oe,dropdownTriggerKls:ue,dropdownSize:$e,triggerId:he,triggerKeys:re,currentTabId:j,handleCurrentTabIdChange:Et,handlerMainButtonClick:$n=>{n("click",$n)},handleEntryFocus:_n,handleClose:Ce,handleOpen:Ne,handleBeforeShowTooltip:Dt,handleShowTooltip:Sn,handleBeforeHideTooltip:hn,onFocusAfterTrapped:$n=>{var Nn,kn;$n.preventDefault(),(kn=(Nn=L.value)==null?void 0:Nn.focus)==null||kn.call(Nn,{preventScroll:!0})},popperRef:V,contentRef:L,triggeringElementRef:k,referenceElementRef:$}}});function _sfc_render$i(e,n,r,g,y,k){var $;const V=resolveComponent("el-dropdown-collection"),L=resolveComponent("el-roving-focus-group"),z=resolveComponent("el-scrollbar"),j=resolveComponent("el-only-child"),ae=resolveComponent("el-tooltip"),re=resolveComponent("el-button"),oe=resolveComponent("arrow-down"),ue=resolveComponent("el-icon"),le=resolveComponent("el-button-group");return openBlock(),createElementBlock("div",{class:normalizeClass([e.ns.b(),e.ns.is("disabled",e.disabled)])},[createVNode(ae,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":($=e.referenceElementRef)==null?void 0:$.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:"",onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},createSlots({content:withCtx(()=>[createVNode(z,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:withCtx(()=>[createVNode(L,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:withCtx(()=>[createVNode(V,null,{default:withCtx(()=>[renderSlot(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:withCtx(()=>[createVNode(j,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:withCtx(()=>[renderSlot(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(openBlock(),createBlock(le,{key:0},{default:withCtx(()=>[createVNode(re,mergeProps({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:withCtx(()=>[renderSlot(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),createVNode(re,mergeProps({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:withCtx(()=>[createVNode(ue,{class:normalizeClass(e.ns.e("icon"))},{default:withCtx(()=>[createVNode(oe)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):createCommentVNode("v-if",!0)],2)}var Dropdown=_export_sfc$1(_sfc_main$2h,[["render",_sfc_render$i],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);const _sfc_main$2g=defineComponent({name:"DropdownItemImpl",components:{ElIcon},props:dropdownItemProps,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:n}){const r=useNamespace("dropdown"),{role:g}=inject(DROPDOWN_INJECTION_KEY,void 0),{collectionItemRef:y}=inject(COLLECTION_ITEM_INJECTION_KEY,void 0),{collectionItemRef:k}=inject(COLLECTION_ITEM_INJECTION_KEY$1,void 0),{rovingFocusGroupItemRef:$,tabIndex:V,handleFocus:L,handleKeydown:z,handleMousedown:j}=inject(ROVING_FOCUS_GROUP_ITEM_INJECTION_KEY,void 0),ae=composeRefs(y,k,$),re=computed(()=>g.value==="menu"?"menuitem":g.value==="navigation"?"link":"button"),oe=composeEventHandlers(ue=>{const{code:le}=ue;if(le===EVENT_CODE.enter||le===EVENT_CODE.space)return ue.preventDefault(),ue.stopImmediatePropagation(),n("clickimpl",ue),!0},z);return{ns:r,itemRef:ae,dataset:{[COLLECTION_ITEM_SIGN]:""},role:re,tabIndex:V,handleFocus:L,handleKeydown:oe,handleMousedown:j}}}),_hoisted_1$1K=["aria-disabled","tabindex","role"];function _sfc_render$h(e,n,r,g,y,k){const $=resolveComponent("el-icon");return openBlock(),createElementBlock(Fragment,null,[e.divided?(openBlock(),createElementBlock("li",mergeProps({key:0,role:"separator",class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):createCommentVNode("v-if",!0),createBaseVNode("li",mergeProps({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:n[0]||(n[0]=V=>e.$emit("clickimpl",V)),onFocus:n[1]||(n[1]=(...V)=>e.handleFocus&&e.handleFocus(...V)),onKeydown:n[2]||(n[2]=withModifiers((...V)=>e.handleKeydown&&e.handleKeydown(...V),["self"])),onMousedown:n[3]||(n[3]=(...V)=>e.handleMousedown&&e.handleMousedown(...V)),onPointermove:n[4]||(n[4]=V=>e.$emit("pointermove",V)),onPointerleave:n[5]||(n[5]=V=>e.$emit("pointerleave",V))}),[e.icon?(openBlock(),createBlock($,{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(e.icon)))]),_:1})):createCommentVNode("v-if",!0),renderSlot(e.$slots,"default")],16,_hoisted_1$1K)],64)}var ElDropdownItemImpl=_export_sfc$1(_sfc_main$2g,[["render",_sfc_render$h],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]]);const useDropdown=()=>{const e=inject("elDropdown",{}),n=computed(()=>e?.dropdownSize);return{elDropdown:e,_elDropdownSize:n}},_sfc_main$2f=defineComponent({name:"ElDropdownItem",components:{ElDropdownCollectionItem:ElCollectionItem,ElRovingFocusItem,ElDropdownItemImpl},inheritAttrs:!1,props:dropdownItemProps,emits:["pointermove","pointerleave","click"],setup(e,{emit:n,attrs:r}){const{elDropdown:g}=useDropdown(),y=getCurrentInstance(),k=ref(null),$=computed(()=>{var oe,ue;return(ue=(oe=unref(k))==null?void 0:oe.textContent)!=null?ue:""}),{onItemEnter:V,onItemLeave:L}=inject(DROPDOWN_INJECTION_KEY,void 0),z=composeEventHandlers(oe=>(n("pointermove",oe),oe.defaultPrevented),whenMouse(oe=>{if(e.disabled){L(oe);return}const ue=oe.currentTarget;ue===document.activeElement||ue.contains(document.activeElement)||(V(oe),oe.defaultPrevented||ue?.focus())})),j=composeEventHandlers(oe=>(n("pointerleave",oe),oe.defaultPrevented),whenMouse(oe=>{L(oe)})),ae=composeEventHandlers(oe=>{if(!e.disabled)return n("click",oe),oe.type!=="keydown"&&oe.defaultPrevented},oe=>{var ue,le,de;if(e.disabled){oe.stopImmediatePropagation();return}(ue=g?.hideOnClick)!=null&&ue.value&&((le=g.handleClick)==null||le.call(g)),(de=g.commandHandler)==null||de.call(g,e.command,y,oe)}),re=computed(()=>({...e,...r}));return{handleClick:ae,handlePointerMove:z,handlePointerLeave:j,textContent:$,propsAndAttrs:re}}});function _sfc_render$g(e,n,r,g,y,k){var $;const V=resolveComponent("el-dropdown-item-impl"),L=resolveComponent("el-roving-focus-item"),z=resolveComponent("el-dropdown-collection-item");return openBlock(),createBlock(z,{disabled:e.disabled,"text-value":($=e.textValue)!=null?$:e.textContent},{default:withCtx(()=>[createVNode(L,{focusable:!e.disabled},{default:withCtx(()=>[createVNode(V,mergeProps(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:withCtx(()=>[renderSlot(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var DropdownItem=_export_sfc$1(_sfc_main$2f,[["render",_sfc_render$g],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const _sfc_main$2e=defineComponent({name:"ElDropdownMenu",props:dropdownMenuProps,setup(e){const n=useNamespace("dropdown"),{_elDropdownSize:r}=useDropdown(),g=r.value,{focusTrapRef:y,onKeydown:k}=inject(FOCUS_TRAP_INJECTION_KEY,void 0),{contentRef:$,role:V,triggerId:L}=inject(DROPDOWN_INJECTION_KEY,void 0),{collectionRef:z,getItems:j}=inject(COLLECTION_INJECTION_KEY,void 0),{rovingFocusGroupRef:ae,rovingFocusGroupRootStyle:re,tabIndex:oe,onBlur:ue,onFocus:le,onMousedown:de}=inject(ROVING_FOCUS_GROUP_INJECTION_KEY,void 0),{collectionRef:he}=inject(COLLECTION_INJECTION_KEY$1,void 0),_e=computed(()=>[n.b("menu"),n.bm("menu",g?.value)]),Ce=composeRefs($,z,y,ae,he),Ne=composeEventHandlers(xe=>{var Ie;(Ie=e.onKeydown)==null||Ie.call(e,xe)},xe=>{const{currentTarget:Ie,code:ze,target:qe}=xe;if(Ie.contains(qe),EVENT_CODE.tab===ze&&xe.stopImmediatePropagation(),xe.preventDefault(),qe!==unref($)||!FIRST_LAST_KEYS.includes(ze))return;const _n=j().filter(Dt=>!Dt.disabled).map(Dt=>Dt.ref);LAST_KEYS.includes(ze)&&_n.reverse(),focusFirst(_n)});return{size:g,rovingFocusGroupRootStyle:re,tabIndex:oe,dropdownKls:_e,role:V,triggerId:L,dropdownListWrapperRef:Ce,handleKeydown:xe=>{Ne(xe),k(xe)},onBlur:ue,onFocus:le,onMousedown:de}}}),_hoisted_1$1J=["role","aria-labelledby"];function _sfc_render$f(e,n,r,g,y,k){return openBlock(),createElementBlock("ul",{ref:e.dropdownListWrapperRef,class:normalizeClass(e.dropdownKls),style:normalizeStyle(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:n[0]||(n[0]=(...$)=>e.onBlur&&e.onBlur(...$)),onFocus:n[1]||(n[1]=(...$)=>e.onFocus&&e.onFocus(...$)),onKeydown:n[2]||(n[2]=withModifiers((...$)=>e.handleKeydown&&e.handleKeydown(...$),["self"])),onMousedown:n[3]||(n[3]=withModifiers((...$)=>e.onMousedown&&e.onMousedown(...$),["self"]))},[renderSlot(e.$slots,"default")],46,_hoisted_1$1J)}var DropdownMenu=_export_sfc$1(_sfc_main$2e,[["render",_sfc_render$f],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const ElDropdown=withInstall(Dropdown,{DropdownItem,DropdownMenu}),ElDropdownItem=withNoopInstall(DropdownItem),ElDropdownMenu=withNoopInstall(DropdownMenu),_hoisted_1$1I={viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},_hoisted_2$1t=["id"],_hoisted_3$S=["stop-color"],_hoisted_4$M=["stop-color"],_hoisted_5$F=["id"],_hoisted_6$z=["stop-color"],_hoisted_7$u=["stop-color"],_hoisted_8$t=["id"],_hoisted_9$t={id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},_hoisted_10$r={id:"B-type",transform:"translate(-1268.000000, -535.000000)"},_hoisted_11$q={id:"Group-2",transform:"translate(1268.000000, 535.000000)"},_hoisted_12$o=["fill"],_hoisted_13$m=["fill"],_hoisted_14$m={id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},_hoisted_15$i=["fill"],_hoisted_16$g=["fill"],_hoisted_17$e=["fill"],_hoisted_18$c=["fill"],_hoisted_19$c=["fill"],_hoisted_20$c={id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},_hoisted_21$c=["fill","xlink:href"],_hoisted_22$a=["fill","mask"],_hoisted_23$9=["fill"],__default__$L=defineComponent({name:"ImgEmpty"}),_sfc_main$2d=defineComponent({...__default__$L,setup(e){const n=useNamespace("empty"),r=useId();return(g,y)=>(openBlock(),createElementBlock("svg",_hoisted_1$1I,[createBaseVNode("defs",null,[createBaseVNode("linearGradient",{id:`linearGradient-1-${unref(r)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[createBaseVNode("stop",{"stop-color":`var(${unref(n).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,_hoisted_3$S),createBaseVNode("stop",{"stop-color":`var(${unref(n).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,_hoisted_4$M)],8,_hoisted_2$1t),createBaseVNode("linearGradient",{id:`linearGradient-2-${unref(r)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[createBaseVNode("stop",{"stop-color":`var(${unref(n).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,_hoisted_6$z),createBaseVNode("stop",{"stop-color":`var(${unref(n).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,_hoisted_7$u)],8,_hoisted_5$F),createBaseVNode("rect",{id:`path-3-${unref(r)}`,x:"0",y:"0",width:"17",height:"36"},null,8,_hoisted_8$t)]),createBaseVNode("g",_hoisted_9$t,[createBaseVNode("g",_hoisted_10$r,[createBaseVNode("g",_hoisted_11$q,[createBaseVNode("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${unref(n).cssVarBlockName("fill-color-3")})`},null,8,_hoisted_12$o),createBaseVNode("polygon",{id:"Rectangle-Copy-14",fill:`var(${unref(n).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,_hoisted_13$m),createBaseVNode("g",_hoisted_14$m,[createBaseVNode("polygon",{id:"Rectangle-Copy-10",fill:`var(${unref(n).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,_hoisted_15$i),createBaseVNode("polygon",{id:"Rectangle-Copy-11",fill:`var(${unref(n).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,_hoisted_16$g),createBaseVNode("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${unref(r)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,_hoisted_17$e),createBaseVNode("polygon",{id:"Rectangle-Copy-13",fill:`var(${unref(n).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,_hoisted_18$c)]),createBaseVNode("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${unref(r)})`,x:"13",y:"45",width:"40",height:"36"},null,8,_hoisted_19$c),createBaseVNode("g",_hoisted_20$c,[createBaseVNode("use",{id:"Mask",fill:`var(${unref(n).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${unref(r)}`},null,8,_hoisted_21$c),createBaseVNode("polygon",{id:"Rectangle-Copy",fill:`var(${unref(n).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${unref(r)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,_hoisted_22$a)]),createBaseVNode("polygon",{id:"Rectangle-Copy-18",fill:`var(${unref(n).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,_hoisted_23$9)])])])]))}});var ImgEmpty=_export_sfc$1(_sfc_main$2d,[["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/img-empty.vue"]]);const emptyProps=buildProps({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),_hoisted_1$1H=["src"],_hoisted_2$1s={key:1},__default__$K=defineComponent({name:"ElEmpty"}),_sfc_main$2c=defineComponent({...__default__$K,props:emptyProps,setup(e){const n=e,{t:r}=useLocale(),g=useNamespace("empty"),y=computed(()=>n.description||r("el.table.emptyText")),k=computed(()=>({width:addUnit(n.imageSize)}));return($,V)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(g).b())},[createBaseVNode("div",{class:normalizeClass(unref(g).e("image")),style:normalizeStyle(unref(k))},[$.image?(openBlock(),createElementBlock("img",{key:0,src:$.image,ondragstart:"return false"},null,8,_hoisted_1$1H)):renderSlot($.$slots,"image",{key:1},()=>[createVNode(ImgEmpty)])],6),createBaseVNode("div",{class:normalizeClass(unref(g).e("description"))},[$.$slots.description?renderSlot($.$slots,"description",{key:0}):(openBlock(),createElementBlock("p",_hoisted_2$1s,toDisplayString$1(unref(y)),1))],2),$.$slots.default?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(g).e("bottom"))},[renderSlot($.$slots,"default")],2)):createCommentVNode("v-if",!0)],2))}});var Empty=_export_sfc$1(_sfc_main$2c,[["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/empty.vue"]]);const ElEmpty=withInstall(Empty),imageViewerProps=buildProps({urlList:{type:definePropType(Array),default:()=>mutable([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),imageViewerEmits={close:()=>!0,switch:e=>isNumber$1(e)},_hoisted_1$1G=["src"],__default__$J=defineComponent({name:"ElImageViewer"}),_sfc_main$2b=defineComponent({...__default__$J,props:imageViewerProps,emits:imageViewerEmits,setup(e,{expose:n,emit:r}){const g=e,y={CONTAIN:{name:"contain",icon:markRaw(full_screen_default)},ORIGINAL:{name:"original",icon:markRaw(scale_to_original_default)}},{t:k}=useLocale(),$=useNamespace("image-viewer"),{nextZIndex:V}=useZIndex(),L=ref(),z=ref([]),j=effectScope(),ae=ref(!0),re=ref(g.initialIndex),oe=shallowRef(y.CONTAIN),ue=ref({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),le=computed(()=>{const{urlList:kn}=g;return kn.length<=1}),de=computed(()=>re.value===0),he=computed(()=>re.value===g.urlList.length-1),_e=computed(()=>g.urlList[re.value]),Ce=computed(()=>[$.e("btn"),$.e("prev"),$.is("disabled",!g.infinite&&de.value)]),Ne=computed(()=>[$.e("btn"),$.e("next"),$.is("disabled",!g.infinite&&he.value)]),$e=computed(()=>{const{scale:kn,deg:jn,offsetX:Fn,offsetY:Tn,enableTransition:Hn}=ue.value;let la=Fn/kn,ca=Tn/kn;switch(jn%360){case 90:case-270:[la,ca]=[ca,-la];break;case 180:case-180:[la,ca]=[-la,-ca];break;case 270:case-90:[la,ca]=[-ca,la];break}const Zn={transform:`scale(${kn}) rotate(${jn}deg) translate(${la}px, ${ca}px)`,transition:Hn?"transform .3s":""};return oe.value.name===y.CONTAIN.name&&(Zn.maxWidth=Zn.maxHeight="100%"),Zn}),xe=computed(()=>isNumber$1(g.zIndex)?g.zIndex:V());function Ie(){qe(),r("close")}function ze(){const kn=throttle(Fn=>{switch(Fn.code){case EVENT_CODE.esc:g.closeOnPressEscape&&Ie();break;case EVENT_CODE.space:hn();break;case EVENT_CODE.left:Mn();break;case EVENT_CODE.up:Nn("zoomIn");break;case EVENT_CODE.right:$n();break;case EVENT_CODE.down:Nn("zoomOut");break}}),jn=throttle(Fn=>{const Tn=Fn.deltaY||Fn.deltaX;Nn(Tn<0?"zoomIn":"zoomOut",{zoomRate:g.zoomRate,enableTransition:!1})});j.run(()=>{useEventListener(document,"keydown",kn),useEventListener(document,"wheel",jn)})}function qe(){j.stop()}function Et(){ae.value=!1}function _n(kn){ae.value=!1,kn.target.alt=k("el.image.error")}function Dt(kn){if(ae.value||kn.button!==0||!L.value)return;ue.value.enableTransition=!1;const{offsetX:jn,offsetY:Fn}=ue.value,Tn=kn.pageX,Hn=kn.pageY,la=throttle(Zn=>{ue.value={...ue.value,offsetX:jn+Zn.pageX-Tn,offsetY:Fn+Zn.pageY-Hn}}),ca=useEventListener(document,"mousemove",la);useEventListener(document,"mouseup",()=>{ca()}),kn.preventDefault()}function Sn(){ue.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function hn(){if(ae.value)return;const kn=keysOf(y),jn=Object.values(y),Fn=oe.value.name,Hn=(jn.findIndex(la=>la.name===Fn)+1)%kn.length;oe.value=y[kn[Hn]],Sn()}function Vn(kn){const jn=g.urlList.length;re.value=(kn+jn)%jn}function Mn(){de.value&&!g.infinite||Vn(re.value-1)}function $n(){he.value&&!g.infinite||Vn(re.value+1)}function Nn(kn,jn={}){if(ae.value)return;const{zoomRate:Fn,rotateDeg:Tn,enableTransition:Hn}={zoomRate:g.zoomRate,rotateDeg:90,enableTransition:!0,...jn};switch(kn){case"zoomOut":ue.value.scale>.2&&(ue.value.scale=Number.parseFloat((ue.value.scale/Fn).toFixed(3)));break;case"zoomIn":ue.value.scale<7&&(ue.value.scale=Number.parseFloat((ue.value.scale*Fn).toFixed(3)));break;case"clockwise":ue.value.deg+=Tn;break;case"anticlockwise":ue.value.deg-=Tn;break}ue.value.enableTransition=Hn}return watch(_e,()=>{nextTick(()=>{const kn=z.value[0];kn?.complete||(ae.value=!0)})}),watch(re,kn=>{Sn(),r("switch",kn)}),onMounted(()=>{var kn,jn;ze(),(jn=(kn=L.value)==null?void 0:kn.focus)==null||jn.call(kn)}),n({setActiveItem:Vn}),(kn,jn)=>(openBlock(),createBlock(Teleport,{to:"body",disabled:!kn.teleported},[createVNode(Transition,{name:"viewer-fade",appear:""},{default:withCtx(()=>[createBaseVNode("div",{ref_key:"wrapper",ref:L,tabindex:-1,class:normalizeClass(unref($).e("wrapper")),style:normalizeStyle({zIndex:unref(xe)})},[createBaseVNode("div",{class:normalizeClass(unref($).e("mask")),onClick:jn[0]||(jn[0]=withModifiers(Fn=>kn.hideOnClickModal&&Ie(),["self"]))},null,2),createCommentVNode(" CLOSE "),createBaseVNode("span",{class:normalizeClass([unref($).e("btn"),unref($).e("close")]),onClick:Ie},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(close_default))]),_:1})],2),createCommentVNode(" ARROW "),unref(le)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",{class:normalizeClass(unref(Ce)),onClick:Mn},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1})],2),createBaseVNode("span",{class:normalizeClass(unref(Ne)),onClick:$n},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})],2)],64)),createCommentVNode(" ACTIONS "),createBaseVNode("div",{class:normalizeClass([unref($).e("btn"),unref($).e("actions")])},[createBaseVNode("div",{class:normalizeClass(unref($).e("actions__inner"))},[createVNode(unref(ElIcon),{onClick:jn[1]||(jn[1]=Fn=>Nn("zoomOut"))},{default:withCtx(()=>[createVNode(unref(zoom_out_default))]),_:1}),createVNode(unref(ElIcon),{onClick:jn[2]||(jn[2]=Fn=>Nn("zoomIn"))},{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1}),createBaseVNode("i",{class:normalizeClass(unref($).e("actions__divider"))},null,2),createVNode(unref(ElIcon),{onClick:hn},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(oe).icon)))]),_:1}),createBaseVNode("i",{class:normalizeClass(unref($).e("actions__divider"))},null,2),createVNode(unref(ElIcon),{onClick:jn[3]||(jn[3]=Fn=>Nn("anticlockwise"))},{default:withCtx(()=>[createVNode(unref(refresh_left_default))]),_:1}),createVNode(unref(ElIcon),{onClick:jn[4]||(jn[4]=Fn=>Nn("clockwise"))},{default:withCtx(()=>[createVNode(unref(refresh_right_default))]),_:1})],2)],2),createCommentVNode(" CANVAS "),createBaseVNode("div",{class:normalizeClass(unref($).e("canvas"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(kn.urlList,(Fn,Tn)=>withDirectives((openBlock(),createElementBlock("img",{ref_for:!0,ref:Hn=>z.value[Tn]=Hn,key:Fn,src:Fn,style:normalizeStyle(unref($e)),class:normalizeClass(unref($).e("img")),onLoad:Et,onError:_n,onMousedown:Dt},null,46,_hoisted_1$1G)),[[vShow,Tn===re.value]])),128))],2),renderSlot(kn.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var ImageViewer=_export_sfc$1(_sfc_main$2b,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const ElImageViewer=withInstall(ImageViewer),imageProps=buildProps({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:definePropType([String,Object])},previewSrcList:{type:definePropType(Array),default:()=>mutable([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),imageEmits={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>isNumber$1(e),close:()=>!0,show:()=>!0},_hoisted_1$1F=["src","loading"],_hoisted_2$1r={key:0},__default__$I=defineComponent({name:"ElImage",inheritAttrs:!1}),_sfc_main$2a=defineComponent({...__default__$I,props:imageProps,emits:imageEmits,setup(e,{emit:n}){const r=e;let g="";const{t:y}=useLocale(),k=useNamespace("image"),$=useAttrs$1(),V=useAttrs(),L=ref(),z=ref(!1),j=ref(!0),ae=ref(!1),re=ref(),oe=ref(),ue=isClient&&"loading"in HTMLImageElement.prototype;let le,de;const he=computed(()=>[k.e("inner"),Ne.value&&k.e("preview"),j.value&&k.is("loading")]),_e=computed(()=>$.style),Ce=computed(()=>{const{fit:Nn}=r;return isClient&&Nn?{objectFit:Nn}:{}}),Ne=computed(()=>{const{previewSrcList:Nn}=r;return Array.isArray(Nn)&&Nn.length>0}),$e=computed(()=>{const{previewSrcList:Nn,initialIndex:kn}=r;let jn=kn;return kn>Nn.length-1&&(jn=0),jn}),xe=computed(()=>r.loading==="eager"?!1:!ue&&r.loading==="lazy"||r.lazy),Ie=()=>{isClient&&(j.value=!0,z.value=!1,L.value=r.src)};function ze(Nn){j.value=!1,z.value=!1,n("load",Nn)}function qe(Nn){j.value=!1,z.value=!0,n("error",Nn)}function Et(){isInContainer(re.value,oe.value)&&(Ie(),Sn())}const _n=useThrottleFn(Et,200,!0);async function Dt(){var Nn;if(!isClient)return;await nextTick();const{scrollContainer:kn}=r;isElement$1(kn)?oe.value=kn:isString$3(kn)&&kn!==""?oe.value=(Nn=document.querySelector(kn))!=null?Nn:void 0:re.value&&(oe.value=getScrollContainer(re.value)),oe.value&&(le=useEventListener(oe,"scroll",_n),setTimeout(()=>Et(),100))}function Sn(){!isClient||!oe.value||!_n||(le?.(),oe.value=void 0)}function hn(Nn){if(Nn.ctrlKey){if(Nn.deltaY<0)return Nn.preventDefault(),!1;if(Nn.deltaY>0)return Nn.preventDefault(),!1}}function Vn(){Ne.value&&(de=useEventListener("wheel",hn,{passive:!1}),g=document.body.style.overflow,document.body.style.overflow="hidden",ae.value=!0,n("show"))}function Mn(){de?.(),document.body.style.overflow=g,ae.value=!1,n("close")}function $n(Nn){n("switch",Nn)}return watch(()=>r.src,()=>{xe.value?(j.value=!0,z.value=!1,Sn(),Dt()):Ie()}),onMounted(()=>{xe.value?Dt():Ie()}),(Nn,kn)=>(openBlock(),createElementBlock("div",{ref_key:"container",ref:re,class:normalizeClass([unref(k).b(),Nn.$attrs.class]),style:normalizeStyle(unref(_e))},[z.value?renderSlot(Nn.$slots,"error",{key:0},()=>[createBaseVNode("div",{class:normalizeClass(unref(k).e("error"))},toDisplayString$1(unref(y)("el.image.error")),3)]):(openBlock(),createElementBlock(Fragment,{key:1},[L.value!==void 0?(openBlock(),createElementBlock("img",mergeProps({key:0},unref(V),{src:L.value,loading:Nn.loading,style:unref(Ce),class:unref(he),onClick:Vn,onLoad:ze,onError:qe}),null,16,_hoisted_1$1F)):createCommentVNode("v-if",!0),j.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(k).e("wrapper"))},[renderSlot(Nn.$slots,"placeholder",{},()=>[createBaseVNode("div",{class:normalizeClass(unref(k).e("placeholder"))},null,2)])],2)):createCommentVNode("v-if",!0)],64)),unref(Ne)?(openBlock(),createElementBlock(Fragment,{key:2},[ae.value?(openBlock(),createBlock(unref(ElImageViewer),{key:0,"z-index":Nn.zIndex,"initial-index":unref($e),infinite:Nn.infinite,"zoom-rate":Nn.zoomRate,"url-list":Nn.previewSrcList,"hide-on-click-modal":Nn.hideOnClickModal,teleported:Nn.previewTeleported,"close-on-press-escape":Nn.closeOnPressEscape,onClose:Mn,onSwitch:$n},{default:withCtx(()=>[Nn.$slots.viewer?(openBlock(),createElementBlock("div",_hoisted_2$1r,[renderSlot(Nn.$slots,"viewer")])):createCommentVNode("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):createCommentVNode("v-if",!0)],64)):createCommentVNode("v-if",!0)],6))}});var Image$2=_export_sfc$1(_sfc_main$2a,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const ElImage=withInstall(Image$2),inputNumberProps=buildProps({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:useSizeProp,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>e===null||isNumber$1(e)||["min","max"].includes(e),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0}}),inputNumberEmits={[CHANGE_EVENT]:(e,n)=>n!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[INPUT_EVENT]:e=>isNumber$1(e)||isNil(e),[UPDATE_MODEL_EVENT]:e=>isNumber$1(e)||isNil(e)},_hoisted_1$1E=["aria-label","onKeydown"],_hoisted_2$1q=["aria-label","onKeydown"],__default__$H=defineComponent({name:"ElInputNumber"}),_sfc_main$29=defineComponent({...__default__$H,props:inputNumberProps,emits:inputNumberEmits,setup(e,{expose:n,emit:r}){const g=e,{t:y}=useLocale(),k=useNamespace("input-number"),$=ref(),V=reactive({currentValue:g.modelValue,userInput:null}),{formItem:L}=useFormItem(),z=computed(()=>isNumber$1(g.modelValue)&&g.modelValue<=g.min),j=computed(()=>isNumber$1(g.modelValue)&&g.modelValue>=g.max),ae=computed(()=>{const Sn=he(g.step);return isUndefined(g.precision)?Math.max(he(g.modelValue),Sn):(Sn>g.precision,g.precision)}),re=computed(()=>g.controls&&g.controlsPosition==="right"),oe=useFormSize(),ue=useFormDisabled(),le=computed(()=>{if(V.userInput!==null)return V.userInput;let Sn=V.currentValue;if(isNil(Sn))return"";if(isNumber$1(Sn)){if(Number.isNaN(Sn))return"";isUndefined(g.precision)||(Sn=Sn.toFixed(g.precision))}return Sn}),de=(Sn,hn)=>{if(isUndefined(hn)&&(hn=ae.value),hn===0)return Math.round(Sn);let Vn=String(Sn);const Mn=Vn.indexOf(".");if(Mn===-1||!Vn.replace(".","").split("")[Mn+hn])return Sn;const kn=Vn.length;return Vn.charAt(kn-1)==="5"&&(Vn=`${Vn.slice(0,Math.max(0,kn-1))}6`),Number.parseFloat(Number(Vn).toFixed(hn))},he=Sn=>{if(isNil(Sn))return 0;const hn=Sn.toString(),Vn=hn.indexOf(".");let Mn=0;return Vn!==-1&&(Mn=hn.length-Vn-1),Mn},_e=(Sn,hn=1)=>isNumber$1(Sn)?de(Sn+g.step*hn):V.currentValue,Ce=()=>{if(g.readonly||ue.value||j.value)return;const Sn=Number(le.value)||0,hn=_e(Sn);xe(hn),r(INPUT_EVENT,V.currentValue)},Ne=()=>{if(g.readonly||ue.value||z.value)return;const Sn=Number(le.value)||0,hn=_e(Sn,-1);xe(hn),r(INPUT_EVENT,V.currentValue)},$e=(Sn,hn)=>{const{max:Vn,min:Mn,step:$n,precision:Nn,stepStrictly:kn,valueOnClear:jn}=g;Vn<Mn&&throwError("InputNumber","min should not be greater than max.");let Fn=Number(Sn);if(isNil(Sn)||Number.isNaN(Fn))return null;if(Sn===""){if(jn===null)return null;Fn=isString$3(jn)?{min:Mn,max:Vn}[jn]:jn}return kn&&(Fn=de(Math.round(Fn/$n)*$n,Nn)),isUndefined(Nn)||(Fn=de(Fn,Nn)),(Fn>Vn||Fn<Mn)&&(Fn=Fn>Vn?Vn:Mn,hn&&r(UPDATE_MODEL_EVENT,Fn)),Fn},xe=(Sn,hn=!0)=>{var Vn;const Mn=V.currentValue,$n=$e(Sn);if(!hn){r(UPDATE_MODEL_EVENT,$n);return}Mn!==$n&&(V.userInput=null,r(UPDATE_MODEL_EVENT,$n),r(CHANGE_EVENT,$n,Mn),g.validateEvent&&((Vn=L?.validate)==null||Vn.call(L,"change").catch(Nn=>void 0)),V.currentValue=$n)},Ie=Sn=>{V.userInput=Sn;const hn=Sn===""?null:Number(Sn);r(INPUT_EVENT,hn),xe(hn,!1)},ze=Sn=>{const hn=Sn!==""?Number(Sn):"";(isNumber$1(hn)&&!Number.isNaN(hn)||Sn==="")&&xe(hn),V.userInput=null},qe=()=>{var Sn,hn;(hn=(Sn=$.value)==null?void 0:Sn.focus)==null||hn.call(Sn)},Et=()=>{var Sn,hn;(hn=(Sn=$.value)==null?void 0:Sn.blur)==null||hn.call(Sn)},_n=Sn=>{r("focus",Sn)},Dt=Sn=>{var hn;r("blur",Sn),g.validateEvent&&((hn=L?.validate)==null||hn.call(L,"blur").catch(Vn=>void 0))};return watch(()=>g.modelValue,Sn=>{const hn=$e(V.userInput),Vn=$e(Sn,!0);!isNumber$1(hn)&&(!hn||hn!==Vn)&&(V.currentValue=Vn,V.userInput=null)},{immediate:!0}),onMounted(()=>{var Sn;const{min:hn,max:Vn,modelValue:Mn}=g,$n=(Sn=$.value)==null?void 0:Sn.input;if($n.setAttribute("role","spinbutton"),Number.isFinite(Vn)?$n.setAttribute("aria-valuemax",String(Vn)):$n.removeAttribute("aria-valuemax"),Number.isFinite(hn)?$n.setAttribute("aria-valuemin",String(hn)):$n.removeAttribute("aria-valuemin"),$n.setAttribute("aria-valuenow",V.currentValue||V.currentValue===0?String(V.currentValue):""),$n.setAttribute("aria-disabled",String(ue.value)),!isNumber$1(Mn)&&Mn!=null){let Nn=Number(Mn);Number.isNaN(Nn)&&(Nn=null),r(UPDATE_MODEL_EVENT,Nn)}}),onUpdated(()=>{var Sn,hn;const Vn=(Sn=$.value)==null?void 0:Sn.input;Vn?.setAttribute("aria-valuenow",`${(hn=V.currentValue)!=null?hn:""}`)}),n({focus:qe,blur:Et}),(Sn,hn)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(k).b(),unref(k).m(unref(oe)),unref(k).is("disabled",unref(ue)),unref(k).is("without-controls",!Sn.controls),unref(k).is("controls-right",unref(re))]),onDragstart:hn[1]||(hn[1]=withModifiers(()=>{},["prevent"]))},[Sn.controls?withDirectives((openBlock(),createElementBlock("span",{key:0,role:"button","aria-label":unref(y)("el.inputNumber.decrease"),class:normalizeClass([unref(k).e("decrease"),unref(k).is("disabled",unref(z))]),onKeydown:withKeys(Ne,["enter"])},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[unref(re)?(openBlock(),createBlock(unref(arrow_down_default),{key:0})):(openBlock(),createBlock(unref(minus_default),{key:1}))]),_:1})],42,_hoisted_1$1E)),[[unref(vRepeatClick),Ne]]):createCommentVNode("v-if",!0),Sn.controls?withDirectives((openBlock(),createElementBlock("span",{key:1,role:"button","aria-label":unref(y)("el.inputNumber.increase"),class:normalizeClass([unref(k).e("increase"),unref(k).is("disabled",unref(j))]),onKeydown:withKeys(Ce,["enter"])},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[unref(re)?(openBlock(),createBlock(unref(arrow_up_default),{key:0})):(openBlock(),createBlock(unref(plus_default),{key:1}))]),_:1})],42,_hoisted_2$1q)),[[unref(vRepeatClick),Ce]]):createCommentVNode("v-if",!0),createVNode(unref(ElInput),{id:Sn.id,ref_key:"input",ref:$,type:"number",step:Sn.step,"model-value":unref(le),placeholder:Sn.placeholder,readonly:Sn.readonly,disabled:unref(ue),size:unref(oe),max:Sn.max,min:Sn.min,name:Sn.name,label:Sn.label,"validate-event":!1,onWheel:hn[0]||(hn[0]=withModifiers(()=>{},["prevent"])),onKeydown:[withKeys(withModifiers(Ce,["prevent"]),["up"]),withKeys(withModifiers(Ne,["prevent"]),["down"])],onBlur:Dt,onFocus:_n,onInput:Ie,onChange:ze},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var InputNumber=_export_sfc$1(_sfc_main$29,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const ElInputNumber=withInstall(InputNumber),linkProps=buildProps({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:iconPropType}}),linkEmits={click:e=>e instanceof MouseEvent},_hoisted_1$1D=["href"],__default__$G=defineComponent({name:"ElLink"}),_sfc_main$28=defineComponent({...__default__$G,props:linkProps,emits:linkEmits,setup(e,{emit:n}){const r=e,g=useNamespace("link"),y=computed(()=>[g.b(),g.m(r.type),g.is("disabled",r.disabled),g.is("underline",r.underline&&!r.disabled)]);function k($){r.disabled||n("click",$)}return($,V)=>(openBlock(),createElementBlock("a",{class:normalizeClass(unref(y)),href:$.disabled||!$.href?void 0:$.href,onClick:k},[$.icon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent($.icon)))]),_:1})):createCommentVNode("v-if",!0),$.$slots.default?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(g).e("inner"))},[renderSlot($.$slots,"default")],2)):createCommentVNode("v-if",!0),$.$slots.icon?renderSlot($.$slots,"icon",{key:2}):createCommentVNode("v-if",!0)],10,_hoisted_1$1D))}});var Link=_export_sfc$1(_sfc_main$28,[["__file","/home/runner/work/element-plus/element-plus/packages/components/link/src/link.vue"]]);const ElLink=withInstall(Link);let SubMenu$1=class{constructor(n,r){this.parent=n,this.domNode=r,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(n){n===this.subMenuItems.length?n=0:n<0&&(n=this.subMenuItems.length-1),this.subMenuItems[n].focus(),this.subIndex=n}addListeners(){const n=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,r=>{r.addEventListener("keydown",g=>{let y=!1;switch(g.code){case EVENT_CODE.down:{this.gotoSubIndex(this.subIndex+1),y=!0;break}case EVENT_CODE.up:{this.gotoSubIndex(this.subIndex-1),y=!0;break}case EVENT_CODE.tab:{triggerEvent(n,"mouseleave");break}case EVENT_CODE.enter:case EVENT_CODE.space:{y=!0,g.currentTarget.click();break}}return y&&(g.preventDefault(),g.stopPropagation()),!1})})}},MenuItem$1=class{constructor(n,r){this.domNode=n,this.submenu=null,this.submenu=null,this.init(r)}init(n){this.domNode.setAttribute("tabindex","0");const r=this.domNode.querySelector(`.${n}-menu`);r&&(this.submenu=new SubMenu$1(this,r)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",n=>{let r=!1;switch(n.code){case EVENT_CODE.down:{triggerEvent(n.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),r=!0;break}case EVENT_CODE.up:{triggerEvent(n.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),r=!0;break}case EVENT_CODE.tab:{triggerEvent(n.currentTarget,"mouseleave");break}case EVENT_CODE.enter:case EVENT_CODE.space:{r=!0,n.currentTarget.click();break}}r&&n.preventDefault()})}},Menu$1=class{constructor(n,r){this.domNode=n,this.init(r)}init(n){const r=this.domNode.childNodes;Array.from(r).forEach(g=>{g.nodeType===1&&new MenuItem$1(g,n)})}};const _sfc_main$27=defineComponent({name:"ElMenuCollapseTransition",setup(){const e=useNamespace("menu");return{listeners:{onBeforeEnter:r=>r.style.opacity="0.2",onEnter(r,g){addClass(r,`${e.namespace.value}-opacity-transition`),r.style.opacity="1",g()},onAfterEnter(r){removeClass(r,`${e.namespace.value}-opacity-transition`),r.style.opacity=""},onBeforeLeave(r){r.dataset||(r.dataset={}),hasClass(r,e.m("collapse"))?(removeClass(r,e.m("collapse")),r.dataset.oldOverflow=r.style.overflow,r.dataset.scrollWidth=r.clientWidth.toString(),addClass(r,e.m("collapse"))):(addClass(r,e.m("collapse")),r.dataset.oldOverflow=r.style.overflow,r.dataset.scrollWidth=r.clientWidth.toString(),removeClass(r,e.m("collapse"))),r.style.width=`${r.scrollWidth}px`,r.style.overflow="hidden"},onLeave(r){addClass(r,"horizontal-collapse-transition"),r.style.width=`${r.dataset.scrollWidth}px`}}}}});function _sfc_render$e(e,n,r,g,y,k){return openBlock(),createBlock(Transition,mergeProps({mode:"out-in"},e.listeners),{default:withCtx(()=>[renderSlot(e.$slots,"default")]),_:3},16)}var ElMenuCollapseTransition=_export_sfc$1(_sfc_main$27,[["render",_sfc_render$e],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-collapse-transition.vue"]]);function useMenu(e,n){const r=computed(()=>{let y=e.parent;const k=[n.value];for(;y.type.name!=="ElMenu";)y.props.index&&k.unshift(y.props.index),y=y.parent;return k});return{parentMenu:computed(()=>{let y=e.parent;for(;y&&!["ElMenu","ElSubMenu"].includes(y.type.name);)y=y.parent;return y}),indexPath:r}}function useMenuColor(e){return computed(()=>{const r=e.backgroundColor;return r?new TinyColor(r).shade(20).toString():""})}const useMenuCssVar=(e,n)=>{const r=useNamespace("menu");return computed(()=>r.cssVarBlock({"text-color":e.textColor||"","hover-text-color":e.textColor||"","bg-color":e.backgroundColor||"","hover-bg-color":useMenuColor(e).value||"","active-color":e.activeTextColor||"",level:`${n}`}))},subMenuProps=buildProps({index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0},teleported:{type:Boolean,default:void 0},popperOffset:{type:Number,default:6},expandCloseIcon:{type:iconPropType},expandOpenIcon:{type:iconPropType},collapseCloseIcon:{type:iconPropType},collapseOpenIcon:{type:iconPropType}}),COMPONENT_NAME$c="ElSubMenu";var SubMenu=defineComponent({name:COMPONENT_NAME$c,props:subMenuProps,setup(e,{slots:n,expose:r}){useDeprecated({from:"popper-append-to-body",replacement:"teleported",scope:COMPONENT_NAME$c,version:"2.3.0",ref:"https://element-plus.org/en-US/component/menu.html#submenu-attributes"},computed(()=>e.popperAppendToBody!==void 0));const g=getCurrentInstance(),{indexPath:y,parentMenu:k}=useMenu(g,computed(()=>e.index)),$=useNamespace("menu"),V=useNamespace("sub-menu"),L=inject("rootMenu");L||throwError(COMPONENT_NAME$c,"can not inject root menu");const z=inject(`subMenu:${k.value.uid}`);z||throwError(COMPONENT_NAME$c,"can not inject sub menu");const j=ref({}),ae=ref({});let re;const oe=ref(!1),ue=ref(),le=ref(null),de=computed(()=>_n.value==="horizontal"&&_e.value?"bottom-start":"right-start"),he=computed(()=>_n.value==="horizontal"&&_e.value||_n.value==="vertical"&&!L.props.collapse?e.expandCloseIcon&&e.expandOpenIcon?xe.value?e.expandOpenIcon:e.expandCloseIcon:arrow_down_default:e.collapseCloseIcon&&e.collapseOpenIcon?xe.value?e.collapseOpenIcon:e.collapseCloseIcon:arrow_right_default),_e=computed(()=>z.level===0),Ce=computed(()=>{var jn;const Fn=(jn=e.teleported)!=null?jn:e.popperAppendToBody;return Fn===void 0?_e.value:Fn}),Ne=computed(()=>L.props.collapse?`${$.namespace.value}-zoom-in-left`:`${$.namespace.value}-zoom-in-top`),$e=computed(()=>_n.value==="horizontal"&&_e.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),xe=computed(()=>L.openedMenus.includes(e.index)),Ie=computed(()=>{let jn=!1;return Object.values(j.value).forEach(Fn=>{Fn.active&&(jn=!0)}),Object.values(ae.value).forEach(Fn=>{Fn.active&&(jn=!0)}),jn}),ze=computed(()=>L.props.backgroundColor||""),qe=computed(()=>L.props.activeTextColor||""),Et=computed(()=>L.props.textColor||""),_n=computed(()=>L.props.mode),Dt=reactive({index:e.index,indexPath:y,active:Ie}),Sn=useMenuCssVar(L.props,z.level+1),hn=computed(()=>_n.value!=="horizontal"?{color:Et.value}:{borderBottomColor:Ie.value?L.props.activeTextColor?qe.value:"":"transparent",color:Ie.value?qe.value:Et.value}),Vn=()=>{var jn,Fn,Tn;return(Tn=(Fn=(jn=le.value)==null?void 0:jn.popperRef)==null?void 0:Fn.popperInstanceRef)==null?void 0:Tn.destroy()},Mn=jn=>{jn||Vn()},$n=()=>{L.props.menuTrigger==="hover"&&L.props.mode==="horizontal"||L.props.collapse&&L.props.mode==="vertical"||e.disabled||L.handleSubMenuClick({index:e.index,indexPath:y.value,active:Ie.value})},Nn=(jn,Fn=e.showTimeout)=>{var Tn;jn.type!=="focus"&&(L.props.menuTrigger==="click"&&L.props.mode==="horizontal"||!L.props.collapse&&L.props.mode==="vertical"||e.disabled||(z.mouseInChild.value=!0,re?.(),{stop:re}=useTimeoutFn(()=>{L.openMenu(e.index,y.value)},Fn),Ce.value&&((Tn=k.value.vnode.el)==null||Tn.dispatchEvent(new MouseEvent("mouseenter")))))},kn=(jn=!1)=>{var Fn,Tn;L.props.menuTrigger==="click"&&L.props.mode==="horizontal"||!L.props.collapse&&L.props.mode==="vertical"||(re?.(),z.mouseInChild.value=!1,{stop:re}=useTimeoutFn(()=>!oe.value&&L.closeMenu(e.index,y.value),e.hideTimeout),Ce.value&&jn&&((Fn=g.parent)==null?void 0:Fn.type.name)==="ElSubMenu"&&((Tn=z.handleMouseleave)==null||Tn.call(z,!0)))};watch(()=>L.props.collapse,jn=>Mn(!!jn));{const jn=Tn=>{ae.value[Tn.index]=Tn},Fn=Tn=>{delete ae.value[Tn.index]};provide(`subMenu:${g.uid}`,{addSubMenu:jn,removeSubMenu:Fn,handleMouseleave:kn,mouseInChild:oe,level:z.level+1})}return r({opened:xe}),onMounted(()=>{L.addSubMenu(Dt),z.addSubMenu(Dt)}),onBeforeUnmount(()=>{z.removeSubMenu(Dt),L.removeSubMenu(Dt)}),()=>{var jn;const Fn=[(jn=n.title)==null?void 0:jn.call(n),h$1(ElIcon,{class:V.e("icon-arrow"),style:{transform:xe.value?e.expandCloseIcon&&e.expandOpenIcon||e.collapseCloseIcon&&e.collapseOpenIcon&&L.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>isString$3(he.value)?h$1(g.appContext.components[he.value]):h$1(he.value)})],Tn=L.isMenuPopup?h$1(ElTooltip,{ref:le,visible:xe.value,effect:"light",pure:!0,offset:e.popperOffset,showArrow:!1,persistent:!0,popperClass:e.popperClass,placement:de.value,teleported:Ce.value,fallbackPlacements:$e.value,transition:Ne.value,gpuAcceleration:!1},{content:()=>{var Hn;return h$1("div",{class:[$.m(_n.value),$.m("popup-container"),e.popperClass],onMouseenter:la=>Nn(la,100),onMouseleave:()=>kn(!0),onFocus:la=>Nn(la,100)},[h$1("ul",{class:[$.b(),$.m("popup"),$.m(`popup-${de.value}`)],style:Sn.value},[(Hn=n.default)==null?void 0:Hn.call(n)])])},default:()=>h$1("div",{class:V.e("title"),style:[hn.value,{backgroundColor:ze.value}],onClick:$n},Fn)}):h$1(Fragment,{},[h$1("div",{class:V.e("title"),style:[hn.value,{backgroundColor:ze.value}],ref:ue,onClick:$n},Fn),h$1(_CollapseTransition,{},{default:()=>{var Hn;return withDirectives(h$1("ul",{role:"menu",class:[$.b(),$.m("inline")],style:Sn.value},[(Hn=n.default)==null?void 0:Hn.call(n)]),[[vShow,xe.value]])}})]);return h$1("li",{class:[V.b(),V.is("active",Ie.value),V.is("opened",xe.value),V.is("disabled",e.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:xe.value,onMouseenter:Nn,onMouseleave:()=>kn(!0),onFocus:Nn},[Tn])}}});const menuProps=buildProps({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:definePropType(Array),default:()=>mutable([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperEffect:{type:String,values:["dark","light"],default:"dark"}}),checkIndexPath=e=>Array.isArray(e)&&e.every(n=>isString$3(n)),menuEmits={close:(e,n)=>isString$3(e)&&checkIndexPath(n),open:(e,n)=>isString$3(e)&&checkIndexPath(n),select:(e,n,r,g)=>isString$3(e)&&checkIndexPath(n)&&isObject$3(r)&&(g===void 0||g instanceof Promise)};var Menu=defineComponent({name:"ElMenu",props:menuProps,emits:menuEmits,setup(e,{emit:n,slots:r,expose:g}){const y=getCurrentInstance(),k=y.appContext.config.globalProperties.$router,$=ref(),V=useNamespace("menu"),L=useNamespace("sub-menu"),z=ref(-1),j=ref(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),ae=ref(e.defaultActive),re=ref({}),oe=ref({}),ue=computed(()=>e.mode==="horizontal"||e.mode==="vertical"&&e.collapse),le=()=>{const _n=ae.value&&re.value[ae.value];if(!_n||e.mode==="horizontal"||e.collapse)return;_n.indexPath.forEach(Sn=>{const hn=oe.value[Sn];hn&&de(Sn,hn.indexPath)})},de=(_n,Dt)=>{j.value.includes(_n)||(e.uniqueOpened&&(j.value=j.value.filter(Sn=>Dt.includes(Sn))),j.value.push(_n),n("open",_n,Dt))},he=_n=>{const Dt=j.value.indexOf(_n);Dt!==-1&&j.value.splice(Dt,1)},_e=(_n,Dt)=>{he(_n),n("close",_n,Dt)},Ce=({index:_n,indexPath:Dt})=>{j.value.includes(_n)?_e(_n,Dt):de(_n,Dt)},Ne=_n=>{(e.mode==="horizontal"||e.collapse)&&(j.value=[]);const{index:Dt,indexPath:Sn}=_n;if(!(isNil(Dt)||isNil(Sn)))if(e.router&&k){const hn=_n.route||Dt,Vn=k.push(hn).then(Mn=>(Mn||(ae.value=Dt),Mn));n("select",Dt,Sn,{index:Dt,indexPath:Sn,route:hn},Vn)}else ae.value=Dt,n("select",Dt,Sn,{index:Dt,indexPath:Sn})},$e=_n=>{const Dt=re.value,Sn=Dt[_n]||ae.value&&Dt[ae.value]||Dt[e.defaultActive];Sn?ae.value=Sn.index:ae.value=_n},xe=()=>{var _n,Dt;if(!$.value)return-1;const Sn=Array.from((Dt=(_n=$.value)==null?void 0:_n.childNodes)!=null?Dt:[]).filter(jn=>jn.nodeName!=="#comment"&&(jn.nodeName!=="#text"||jn.nodeValue)),hn=64,Vn=Number.parseInt(getComputedStyle($.value).paddingLeft,10),Mn=Number.parseInt(getComputedStyle($.value).paddingRight,10),$n=$.value.clientWidth-Vn-Mn;let Nn=0,kn=0;return Sn.forEach((jn,Fn)=>{Nn+=jn.offsetWidth||0,Nn<=$n-hn&&(kn=Fn+1)}),kn===Sn.length?-1:kn},Ie=(_n,Dt=33.34)=>{let Sn;return()=>{Sn&&clearTimeout(Sn),Sn=setTimeout(()=>{_n()},Dt)}};let ze=!0;const qe=()=>{const _n=()=>{z.value=-1,nextTick(()=>{z.value=xe()})};ze?_n():Ie(_n)(),ze=!1};watch(()=>e.defaultActive,_n=>{re.value[_n]||(ae.value=""),$e(_n)}),watch(()=>e.collapse,_n=>{_n&&(j.value=[])}),watch(re.value,le);let Et;watchEffect(()=>{e.mode==="horizontal"&&e.ellipsis?Et=useResizeObserver($,qe).stop:Et?.()});{const _n=Vn=>{oe.value[Vn.index]=Vn},Dt=Vn=>{delete oe.value[Vn.index]};provide("rootMenu",reactive({props:e,openedMenus:j,items:re,subMenus:oe,activeIndex:ae,isMenuPopup:ue,addMenuItem:Vn=>{re.value[Vn.index]=Vn},removeMenuItem:Vn=>{delete re.value[Vn.index]},addSubMenu:_n,removeSubMenu:Dt,openMenu:de,closeMenu:_e,handleMenuItemClick:Ne,handleSubMenuClick:Ce})),provide(`subMenu:${y.uid}`,{addSubMenu:_n,removeSubMenu:Dt,mouseInChild:ref(!1),level:0})}return onMounted(()=>{e.mode==="horizontal"&&new Menu$1(y.vnode.el,V.namespace.value)}),g({open:Dt=>{const{indexPath:Sn}=oe.value[Dt];Sn.forEach(hn=>de(hn,Sn))},close:he,handleResize:qe}),()=>{var _n,Dt;let Sn=(Dt=(_n=r.default)==null?void 0:_n.call(r))!=null?Dt:[];const hn=[];if(e.mode==="horizontal"&&$.value){const $n=flattedChildren(Sn),Nn=z.value===-1?$n:$n.slice(0,z.value),kn=z.value===-1?[]:$n.slice(z.value);kn?.length&&e.ellipsis&&(Sn=Nn,hn.push(h$1(SubMenu,{index:"sub-menu-more",class:L.e("hide-arrow")},{title:()=>h$1(ElIcon,{class:L.e("icon-more")},{default:()=>h$1(more_default)}),default:()=>kn})))}const Vn=useMenuCssVar(e,0),Mn=h$1("ul",{key:String(e.collapse),role:"menubar",ref:$,style:Vn.value,class:{[V.b()]:!0,[V.m(e.mode)]:!0,[V.m("collapse")]:e.collapse}},[...Sn,...hn]);return e.collapseTransition&&e.mode==="vertical"?h$1(ElMenuCollapseTransition,()=>Mn):Mn}}});const menuItemProps=buildProps({index:{type:definePropType([String,null]),default:null},route:{type:definePropType([String,Object])},disabled:Boolean}),menuItemEmits={click:e=>isString$3(e.index)&&Array.isArray(e.indexPath)},COMPONENT_NAME$b="ElMenuItem",_sfc_main$26=defineComponent({name:COMPONENT_NAME$b,components:{ElTooltip},props:menuItemProps,emits:menuItemEmits,setup(e,{emit:n}){const r=getCurrentInstance(),g=inject("rootMenu"),y=useNamespace("menu"),k=useNamespace("menu-item");g||throwError(COMPONENT_NAME$b,"can not inject root menu");const{parentMenu:$,indexPath:V}=useMenu(r,toRef(e,"index")),L=inject(`subMenu:${$.value.uid}`);L||throwError(COMPONENT_NAME$b,"can not inject sub menu");const z=computed(()=>e.index===g.activeIndex),j=reactive({index:e.index,indexPath:V,active:z}),ae=()=>{e.disabled||(g.handleMenuItemClick({index:e.index,indexPath:V.value,route:e.route}),n("click",j))};return onMounted(()=>{L.addSubMenu(j),g.addMenuItem(j)}),onBeforeUnmount(()=>{L.removeSubMenu(j),g.removeMenuItem(j)}),{parentMenu:$,rootMenu:g,active:z,nsMenu:y,nsMenuItem:k,handleClick:ae}}});function _sfc_render$d(e,n,r,g,y,k){const $=resolveComponent("el-tooltip");return openBlock(),createElementBlock("li",{class:normalizeClass([e.nsMenuItem.b(),e.nsMenuItem.is("active",e.active),e.nsMenuItem.is("disabled",e.disabled)]),role:"menuitem",tabindex:"-1",onClick:n[0]||(n[0]=(...V)=>e.handleClick&&e.handleClick(...V))},[e.parentMenu.type.name==="ElMenu"&&e.rootMenu.props.collapse&&e.$slots.title?(openBlock(),createBlock($,{key:0,effect:e.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:withCtx(()=>[renderSlot(e.$slots,"title")]),default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(e.nsMenu.be("tooltip","trigger"))},[renderSlot(e.$slots,"default")],2)]),_:3},8,["effect"])):(openBlock(),createElementBlock(Fragment,{key:1},[renderSlot(e.$slots,"default"),renderSlot(e.$slots,"title")],64))],2)}var MenuItem=_export_sfc$1(_sfc_main$26,[["render",_sfc_render$d],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item.vue"]]);const menuItemGroupProps={title:String},COMPONENT_NAME$a="ElMenuItemGroup",_sfc_main$25=defineComponent({name:COMPONENT_NAME$a,props:menuItemGroupProps,setup(){return{ns:useNamespace("menu-item-group")}}});function _sfc_render$c(e,n,r,g,y,k){return openBlock(),createElementBlock("li",{class:normalizeClass(e.ns.b())},[createBaseVNode("div",{class:normalizeClass(e.ns.e("title"))},[e.$slots.title?renderSlot(e.$slots,"title",{key:1}):(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString$1(e.title),1)],64))],2),createBaseVNode("ul",null,[renderSlot(e.$slots,"default")])],2)}var MenuItemGroup=_export_sfc$1(_sfc_main$25,[["render",_sfc_render$c],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item-group.vue"]]);const ElMenu=withInstall(Menu,{MenuItem,MenuItemGroup,SubMenu}),ElMenuItem=withNoopInstall(MenuItem),ElMenuItemGroup=withNoopInstall(MenuItemGroup),ElSubMenu=withNoopInstall(SubMenu),pageHeaderProps=buildProps({icon:{type:iconPropType,default:()=>back_default},title:String,content:{type:String,default:""}}),pageHeaderEmits={back:()=>!0},_hoisted_1$1C=["aria-label"],__default__$F=defineComponent({name:"ElPageHeader"}),_sfc_main$24=defineComponent({...__default__$F,props:pageHeaderProps,emits:pageHeaderEmits,setup(e,{emit:n}){const r=useSlots(),{t:g}=useLocale(),y=useNamespace("page-header"),k=computed(()=>[y.b(),{[y.m("has-breadcrumb")]:!!r.breadcrumb,[y.m("has-extra")]:!!r.extra,[y.is("contentful")]:!!r.default}]);function $(){n("back")}return(V,L)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(k))},[V.$slots.breadcrumb?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(y).e("breadcrumb"))},[renderSlot(V.$slots,"breadcrumb")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(y).e("header"))},[createBaseVNode("div",{class:normalizeClass(unref(y).e("left"))},[createBaseVNode("div",{class:normalizeClass(unref(y).e("back")),role:"button",tabindex:"0",onClick:$},[V.icon||V.$slots.icon?(openBlock(),createElementBlock("div",{key:0,"aria-label":V.title||unref(g)("el.pageHeader.title"),class:normalizeClass(unref(y).e("icon"))},[renderSlot(V.$slots,"icon",{},()=>[V.icon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(V.icon)))]),_:1})):createCommentVNode("v-if",!0)])],10,_hoisted_1$1C)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(y).e("title"))},[renderSlot(V.$slots,"title",{},()=>[createTextVNode(toDisplayString$1(V.title||unref(g)("el.pageHeader.title")),1)])],2)],2),createVNode(unref(ElDivider),{direction:"vertical"}),createBaseVNode("div",{class:normalizeClass(unref(y).e("content"))},[renderSlot(V.$slots,"content",{},()=>[createTextVNode(toDisplayString$1(V.content),1)])],2)],2),V.$slots.extra?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(y).e("extra"))},[renderSlot(V.$slots,"extra")],2)):createCommentVNode("v-if",!0)],2),V.$slots.default?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(y).e("main"))},[renderSlot(V.$slots,"default")],2)):createCommentVNode("v-if",!0)],2))}});var PageHeader=_export_sfc$1(_sfc_main$24,[["__file","/home/runner/work/element-plus/element-plus/packages/components/page-header/src/page-header.vue"]]);const ElPageHeader=withInstall(PageHeader),elPaginationKey=Symbol("elPaginationKey"),paginationPrevProps=buildProps({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:iconPropType}}),paginationPrevEmits={click:e=>e instanceof MouseEvent},_hoisted_1$1B=["disabled","aria-label","aria-disabled"],_hoisted_2$1p={key:0},__default__$E=defineComponent({name:"ElPaginationPrev"}),_sfc_main$23=defineComponent({...__default__$E,props:paginationPrevProps,emits:paginationPrevEmits,setup(e){const n=e,{t:r}=useLocale(),g=computed(()=>n.disabled||n.currentPage<=1);return(y,k)=>(openBlock(),createElementBlock("button",{type:"button",class:"btn-prev",disabled:unref(g),"aria-label":y.prevText||unref(r)("el.pagination.prev"),"aria-disabled":unref(g),onClick:k[0]||(k[0]=$=>y.$emit("click",$))},[y.prevText?(openBlock(),createElementBlock("span",_hoisted_2$1p,toDisplayString$1(y.prevText),1)):(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(y.prevIcon)))]),_:1}))],8,_hoisted_1$1B))}});var Prev=_export_sfc$1(_sfc_main$23,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/prev.vue"]]);const paginationNextProps=buildProps({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:iconPropType}}),_hoisted_1$1A=["disabled","aria-label","aria-disabled"],_hoisted_2$1o={key:0},__default__$D=defineComponent({name:"ElPaginationNext"}),_sfc_main$22=defineComponent({...__default__$D,props:paginationNextProps,emits:["click"],setup(e){const n=e,{t:r}=useLocale(),g=computed(()=>n.disabled||n.currentPage===n.pageCount||n.pageCount===0);return(y,k)=>(openBlock(),createElementBlock("button",{type:"button",class:"btn-next",disabled:unref(g),"aria-label":y.nextText||unref(r)("el.pagination.next"),"aria-disabled":unref(g),onClick:k[0]||(k[0]=$=>y.$emit("click",$))},[y.nextText?(openBlock(),createElementBlock("span",_hoisted_2$1o,toDisplayString$1(y.nextText),1)):(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(y.nextIcon)))]),_:1}))],8,_hoisted_1$1A))}});var Next=_export_sfc$1(_sfc_main$22,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/next.vue"]]);const selectGroupKey=Symbol("ElSelectGroup"),selectKey=Symbol("ElSelect");function useOption$1(e,n){const r=inject(selectKey),g=inject(selectGroupKey,{disabled:!1}),y=computed(()=>Object.prototype.toString.call(e.value).toLowerCase()==="[object object]"),k=computed(()=>r.props.multiple?ae(r.props.modelValue,e.value):re(e.value,r.props.modelValue)),$=computed(()=>{if(r.props.multiple){const le=r.props.modelValue||[];return!k.value&&le.length>=r.props.multipleLimit&&r.props.multipleLimit>0}else return!1}),V=computed(()=>e.label||(y.value?"":e.value)),L=computed(()=>e.value||e.label||""),z=computed(()=>e.disabled||n.groupDisabled||$.value),j=getCurrentInstance(),ae=(le=[],de)=>{if(y.value){const he=r.props.valueKey;return le&&le.some(_e=>toRaw(get(_e,he))===get(de,he))}else return le&&le.includes(de)},re=(le,de)=>{if(y.value){const{valueKey:he}=r.props;return get(le,he)===get(de,he)}else return le===de},oe=()=>{!e.disabled&&!g.disabled&&(r.hoverIndex=r.optionsArray.indexOf(j.proxy))};watch(()=>V.value,()=>{!e.created&&!r.props.remote&&r.setSelected()}),watch(()=>e.value,(le,de)=>{const{remote:he,valueKey:_e}=r.props;if(Object.is(le,de)||(r.onOptionDestroy(de,j.proxy),r.onOptionCreate(j.proxy)),!e.created&&!he){if(_e&&typeof le=="object"&&typeof de=="object"&&le[_e]===de[_e])return;r.setSelected()}}),watch(()=>g.disabled,()=>{n.groupDisabled=g.disabled},{immediate:!0});const{queryChange:ue}=toRaw(r);return watch(ue,le=>{const{query:de}=unref(le),he=new RegExp(escapeStringRegexp(de),"i");n.visible=he.test(V.value)||e.created,n.visible||r.filteredOptionsCount--},{immediate:!0}),{select:r,currentLabel:V,currentValue:L,itemSelected:k,isDisabled:z,hoverItem:oe}}const _sfc_main$21=defineComponent({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(e){const n=useNamespace("select"),r=computed(()=>[n.be("dropdown","item"),n.is("disabled",unref($)),{selected:unref(k),hover:unref(j)}]),g=reactive({index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}),{currentLabel:y,itemSelected:k,isDisabled:$,select:V,hoverItem:L}=useOption$1(e,g),{visible:z,hover:j}=toRefs(g),ae=getCurrentInstance().proxy;V.onOptionCreate(ae),onBeforeUnmount(()=>{const oe=ae.value,{selected:ue}=V,de=(V.props.multiple?ue:[ue]).some(he=>he.value===ae.value);nextTick(()=>{V.cachedOptions.get(oe)===ae&&!de&&V.cachedOptions.delete(oe)}),V.onOptionDestroy(oe,ae)});function re(){e.disabled!==!0&&g.groupDisabled!==!0&&V.handleOptionSelect(ae)}return{ns:n,containerKls:r,currentLabel:y,itemSelected:k,isDisabled:$,select:V,hoverItem:L,visible:z,hover:j,selectOptionClick:re,states:g}}});function _sfc_render$b(e,n,r,g,y,k){return withDirectives((openBlock(),createElementBlock("li",{class:normalizeClass(e.containerKls),onMouseenter:n[0]||(n[0]=(...$)=>e.hoverItem&&e.hoverItem(...$)),onClick:n[1]||(n[1]=withModifiers((...$)=>e.selectOptionClick&&e.selectOptionClick(...$),["stop"]))},[renderSlot(e.$slots,"default",{},()=>[createBaseVNode("span",null,toDisplayString$1(e.currentLabel),1)])],34)),[[vShow,e.visible]])}var Option$1=_export_sfc$1(_sfc_main$21,[["render",_sfc_render$b],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option.vue"]]);const _sfc_main$20=defineComponent({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const e=inject(selectKey),n=useNamespace("select"),r=computed(()=>e.props.popperClass),g=computed(()=>e.props.multiple),y=computed(()=>e.props.fitInputWidth),k=ref("");function $(){var V;k.value=`${(V=e.selectWrapper)==null?void 0:V.offsetWidth}px`}return onMounted(()=>{$(),useResizeObserver(e.selectWrapper,$)}),{ns:n,minWidth:k,popperClass:r,isMultiple:g,isFitInputWidth:y}}});function _sfc_render$a(e,n,r,g,y,k){return openBlock(),createElementBlock("div",{class:normalizeClass([e.ns.b("dropdown"),e.ns.is("multiple",e.isMultiple),e.popperClass]),style:normalizeStyle({[e.isFitInputWidth?"width":"minWidth"]:e.minWidth})},[renderSlot(e.$slots,"default")],6)}var ElSelectMenu$1=_export_sfc$1(_sfc_main$20,[["render",_sfc_render$a],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select-dropdown.vue"]]);function useSelectStates(e){const{t:n}=useLocale();return reactive({options:new Map,cachedOptions:new Map,disabledOptions:new Map,createdLabel:null,createdSelected:!1,selected:e.multiple?[]:{},inputLength:20,inputWidth:0,optionsCount:0,filteredOptionsCount:0,visible:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,cachedPlaceHolder:"",currentPlaceholder:n("el.select.placeholder"),menuVisibleOnFocus:!1,isOnComposition:!1,prefixWidth:11,mouseEnter:!1,focused:!1})}const useSelect$2=(e,n,r)=>{const{t:g}=useLocale(),y=useNamespace("select");useDeprecated({from:"suffixTransition",replacement:"override style scheme",version:"2.3.0",scope:"props",ref:"https://element-plus.org/en-US/component/select.html#select-attributes"},computed(()=>e.suffixTransition===!1));const k=ref(null),$=ref(null),V=ref(null),L=ref(null),z=ref(null),j=ref(null),ae=ref(null),re=ref(null),oe=ref(-1),ue=shallowRef({query:""}),le=shallowRef(""),de=ref([]);let he=0;const{form:_e,formItem:Ce}=useFormItem(),Ne=computed(()=>!e.filterable||e.multiple||!n.visible),$e=computed(()=>e.disabled||_e?.disabled),xe=computed(()=>{const Pn=e.multiple?Array.isArray(e.modelValue)&&e.modelValue.length>0:e.modelValue!==void 0&&e.modelValue!==null&&e.modelValue!=="";return e.clearable&&!$e.value&&n.inputHovering&&Pn}),Ie=computed(()=>e.remote&&e.filterable&&!e.remoteShowSuffix?"":e.suffixIcon),ze=computed(()=>y.is("reverse",Ie.value&&n.visible&&e.suffixTransition)),qe=computed(()=>_e?.statusIcon&&Ce?.validateState&&ValidateComponentsMap[Ce?.validateState]),Et=computed(()=>e.remote?300:0),_n=computed(()=>e.loading?e.loadingText||g("el.select.loading"):e.remote&&n.query===""&&n.options.size===0?!1:e.filterable&&n.query&&n.options.size>0&&n.filteredOptionsCount===0?e.noMatchText||g("el.select.noMatch"):n.options.size===0?e.noDataText||g("el.select.noData"):null),Dt=computed(()=>{const Pn=Array.from(n.options.values()),Un=[];return de.value.forEach(On=>{const Rn=Pn.findIndex(Yn=>Yn.currentLabel===On);Rn>-1&&Un.push(Pn[Rn])}),Un.length?Un:Pn}),Sn=computed(()=>Array.from(n.cachedOptions.values())),hn=computed(()=>{const Pn=Dt.value.filter(Un=>!Un.created).some(Un=>Un.currentLabel===n.query);return e.filterable&&e.allowCreate&&n.query!==""&&!Pn}),Vn=useFormSize(),Mn=computed(()=>["small"].includes(Vn.value)?"small":"default"),$n=computed({get(){return n.visible&&_n.value!==!1},set(Pn){n.visible=Pn}});watch([()=>$e.value,()=>Vn.value,()=>_e?.size],()=>{nextTick(()=>{Nn()})}),watch(()=>e.placeholder,Pn=>{n.cachedPlaceHolder=n.currentPlaceholder=Pn,e.multiple&&Array.isArray(e.modelValue)&&e.modelValue.length>0&&(n.currentPlaceholder="")}),watch(()=>e.modelValue,(Pn,Un)=>{e.multiple&&(Nn(),Pn&&Pn.length>0||$.value&&n.query!==""?n.currentPlaceholder="":n.currentPlaceholder=n.cachedPlaceHolder,e.filterable&&!e.reserveKeyword&&(n.query="",kn(n.query))),Tn(),e.filterable&&!e.multiple&&(n.inputLength=20),!isEqual$1(Pn,Un)&&e.validateEvent&&Ce?.validate("change").catch(On=>void 0)},{flush:"post",deep:!0}),watch(()=>n.visible,Pn=>{var Un,On,Rn,Yn,na;Pn?((On=(Un=L.value)==null?void 0:Un.updatePopper)==null||On.call(Un),e.filterable&&(n.filteredOptionsCount=n.optionsCount,n.query=e.remote?"":n.selectedLabel,(Yn=(Rn=V.value)==null?void 0:Rn.focus)==null||Yn.call(Rn),e.multiple?(na=$.value)==null||na.focus():n.selectedLabel&&(n.currentPlaceholder=`${n.selectedLabel}`,n.selectedLabel=""),kn(n.query),!e.multiple&&!e.remote&&(ue.value.query="",triggerRef(ue),triggerRef(le)))):(e.filterable&&(isFunction$3(e.filterMethod)&&e.filterMethod(""),isFunction$3(e.remoteMethod)&&e.remoteMethod("")),n.query="",n.previousQuery=null,n.selectedLabel="",n.inputLength=20,n.menuVisibleOnFocus=!1,la(),nextTick(()=>{$.value&&$.value.value===""&&n.selected.length===0&&(n.currentPlaceholder=n.cachedPlaceHolder)}),e.multiple||(n.selected&&(e.filterable&&e.allowCreate&&n.createdSelected&&n.createdLabel?n.selectedLabel=n.createdLabel:n.selectedLabel=n.selected.currentLabel,e.filterable&&(n.query=n.selectedLabel)),e.filterable&&(n.currentPlaceholder=n.cachedPlaceHolder))),r.emit("visible-change",Pn)}),watch(()=>n.options.entries(),()=>{var Pn,Un,On;if(!isClient)return;(Un=(Pn=L.value)==null?void 0:Pn.updatePopper)==null||Un.call(Pn),e.multiple&&Nn();const Rn=((On=ae.value)==null?void 0:On.querySelectorAll("input"))||[];(!e.filterable&&!e.defaultFirstOption&&!isUndefined(e.modelValue)||!Array.from(Rn).includes(document.activeElement))&&Tn(),e.defaultFirstOption&&(e.filterable||e.remote)&&n.filteredOptionsCount&&Fn()},{flush:"post"}),watch(()=>n.hoverIndex,Pn=>{isNumber$1(Pn)&&Pn>-1?oe.value=Dt.value[Pn]||{}:oe.value={},Dt.value.forEach(Un=>{Un.hover=oe.value===Un})});const Nn=()=>{nextTick(()=>{var Pn,Un;if(!k.value)return;const On=k.value.$el.querySelector("input");he=he||(On.clientHeight>0?On.clientHeight+2:0);const Rn=j.value,Yn=getComponentSize(Vn.value||_e?.size),na=Vn.value||Yn===he||he<=0?Yn:he;!(On.offsetParent===null)&&(On.style.height=`${(n.selected.length===0?na:Math.max(Rn?Rn.clientHeight+(Rn.clientHeight>na?6:0):0,na))-2}px`),n.visible&&_n.value!==!1&&((Un=(Pn=L.value)==null?void 0:Pn.updatePopper)==null||Un.call(Pn))})},kn=async Pn=>{if(!(n.previousQuery===Pn||n.isOnComposition)){if(n.previousQuery===null&&(isFunction$3(e.filterMethod)||isFunction$3(e.remoteMethod))){n.previousQuery=Pn;return}n.previousQuery=Pn,nextTick(()=>{var Un,On;n.visible&&((On=(Un=L.value)==null?void 0:Un.updatePopper)==null||On.call(Un))}),n.hoverIndex=-1,e.multiple&&e.filterable&&nextTick(()=>{if(!$e.value){const Un=$.value.value.length*15+20;n.inputLength=e.collapseTags?Math.min(50,Un):Un,jn()}Nn()}),e.remote&&isFunction$3(e.remoteMethod)?(n.hoverIndex=-1,e.remoteMethod(Pn)):isFunction$3(e.filterMethod)?(e.filterMethod(Pn),triggerRef(le)):(n.filteredOptionsCount=n.optionsCount,ue.value.query=Pn,triggerRef(ue),triggerRef(le)),e.defaultFirstOption&&(e.filterable||e.remote)&&n.filteredOptionsCount&&(await nextTick(),Fn())}},jn=()=>{n.currentPlaceholder!==""&&(n.currentPlaceholder=$.value.value?"":n.cachedPlaceHolder)},Fn=()=>{const Pn=Dt.value.filter(Rn=>Rn.visible&&!Rn.disabled&&!Rn.states.groupDisabled),Un=Pn.find(Rn=>Rn.created),On=Pn[0];n.hoverIndex=En(Dt.value,Un||On)},Tn=()=>{var Pn;if(e.multiple)n.selectedLabel="";else{const On=Hn(e.modelValue);(Pn=On.props)!=null&&Pn.created?(n.createdLabel=On.props.value,n.createdSelected=!0):n.createdSelected=!1,n.selectedLabel=On.currentLabel,n.selected=On,e.filterable&&(n.query=n.selectedLabel);return}const Un=[];Array.isArray(e.modelValue)&&e.modelValue.forEach(On=>{Un.push(Hn(On))}),n.selected=Un,nextTick(()=>{Nn()})},Hn=Pn=>{let Un;const On=toRawType(Pn).toLowerCase()==="object",Rn=toRawType(Pn).toLowerCase()==="null",Yn=toRawType(Pn).toLowerCase()==="undefined";for(let pa=n.cachedOptions.size-1;pa>=0;pa--){const ha=Sn.value[pa];if(On?get(ha.value,e.valueKey)===get(Pn,e.valueKey):ha.value===Pn){Un={value:Pn,currentLabel:ha.currentLabel,isDisabled:ha.isDisabled};break}}if(Un)return Un;const na=On?Pn.label:!Rn&&!Yn?Pn:"",ea={value:Pn,currentLabel:na};return e.multiple&&(ea.hitState=!1),ea},la=()=>{setTimeout(()=>{const Pn=e.valueKey;e.multiple?n.selected.length>0?n.hoverIndex=Math.min.apply(null,n.selected.map(Un=>Dt.value.findIndex(On=>get(On,Pn)===get(Un,Pn)))):n.hoverIndex=-1:n.hoverIndex=Dt.value.findIndex(Un=>Cn(Un)===Cn(n.selected))},300)},ca=()=>{var Pn,Un;Zn(),(Un=(Pn=L.value)==null?void 0:Pn.updatePopper)==null||Un.call(Pn),e.multiple&&Nn()},Zn=()=>{var Pn;n.inputWidth=(Pn=k.value)==null?void 0:Pn.$el.offsetWidth},Bn=()=>{e.filterable&&n.query!==n.selectedLabel&&(n.query=n.selectedLabel,kn(n.query))},Wn=debounce(()=>{Bn()},Et.value),da=debounce(Pn=>{kn(Pn.target.value)},Et.value),ga=Pn=>{isEqual$1(e.modelValue,Pn)||r.emit(CHANGE_EVENT,Pn)},Ca=Pn=>findLastIndex(Pn,Un=>!n.disabledOptions.has(Un)),ra=Pn=>{if(Pn.code!==EVENT_CODE.delete){if(Pn.target.value.length<=0&&!sa()){const Un=e.modelValue.slice(),On=Ca(Un);if(On<0)return;Un.splice(On,1),r.emit(UPDATE_MODEL_EVENT,Un),ga(Un)}Pn.target.value.length===1&&e.modelValue.length===0&&(n.currentPlaceholder=n.cachedPlaceHolder)}},Gn=(Pn,Un)=>{const On=n.selected.indexOf(Un);if(On>-1&&!$e.value){const Rn=e.modelValue.slice();Rn.splice(On,1),r.emit(UPDATE_MODEL_EVENT,Rn),ga(Rn),r.emit("remove-tag",Un.value)}Pn.stopPropagation(),pe()},vn=Pn=>{Pn.stopPropagation();const Un=e.multiple?[]:"";if(!isString$3(Un))for(const On of n.selected)On.isDisabled&&Un.push(On.value);r.emit(UPDATE_MODEL_EVENT,Un),ga(Un),n.hoverIndex=-1,n.visible=!1,r.emit("clear"),pe()},Kn=Pn=>{var Un;if(e.multiple){const On=(e.modelValue||[]).slice(),Rn=En(On,Pn.value);Rn>-1?On.splice(Rn,1):(e.multipleLimit<=0||On.length<e.multipleLimit)&&On.push(Pn.value),r.emit(UPDATE_MODEL_EVENT,On),ga(On),Pn.created&&(n.query="",kn(""),n.inputLength=20),e.filterable&&((Un=$.value)==null||Un.focus())}else r.emit(UPDATE_MODEL_EVENT,Pn.value),ga(Pn.value),n.visible=!1;kt(),!n.visible&&nextTick(()=>{At(Pn)})},En=(Pn=[],Un)=>{if(!isObject$3(Un))return Pn.indexOf(Un);const On=e.valueKey;let Rn=-1;return Pn.some((Yn,na)=>toRaw(get(Yn,On))===get(Un,On)?(Rn=na,!0):!1),Rn},kt=()=>{const Pn=$.value||k.value;Pn&&Pn?.focus()},At=Pn=>{var Un,On,Rn,Yn,na;const ea=Array.isArray(Pn)?Pn[0]:Pn;let pa=null;if(ea?.value){const ha=Dt.value.filter(ba=>ba.value===ea.value);ha.length>0&&(pa=ha[0].$el)}if(L.value&&pa){const ha=(Yn=(Rn=(On=(Un=L.value)==null?void 0:Un.popperRef)==null?void 0:On.contentRef)==null?void 0:Rn.querySelector)==null?void 0:Yn.call(Rn,`.${y.be("dropdown","wrap")}`);ha&&scrollIntoView$2(ha,pa)}(na=re.value)==null||na.handleScroll()},Dn=Pn=>{n.optionsCount++,n.filteredOptionsCount++,n.options.set(Pn.value,Pn),n.cachedOptions.set(Pn.value,Pn),Pn.disabled&&n.disabledOptions.set(Pn.value,Pn)},Xn=(Pn,Un)=>{n.options.get(Pn)===Un&&(n.optionsCount--,n.filteredOptionsCount--,n.options.delete(Pn))},aa=Pn=>{Pn.code!==EVENT_CODE.backspace&&sa(!1),n.inputLength=$.value.value.length*15+20,Nn()},sa=Pn=>{if(!Array.isArray(n.selected))return;const Un=Ca(n.selected.map(Rn=>Rn.value)),On=n.selected[Un];if(On)return Pn===!0||Pn===!1?(On.hitState=Pn,Pn):(On.hitState=!On.hitState,On.hitState)},ia=Pn=>{const Un=Pn.target.value;if(Pn.type==="compositionend")n.isOnComposition=!1,nextTick(()=>kn(Un));else{const On=Un[Un.length-1]||"";n.isOnComposition=!isKorean(On)}},ma=()=>{nextTick(()=>At(n.selected))},ua=Pn=>{n.focused||((e.automaticDropdown||e.filterable)&&(e.filterable&&!n.visible&&(n.menuVisibleOnFocus=!0),n.visible=!0),n.focused=!0,r.emit("focus",Pn))},pe=()=>{var Pn,Un;n.visible?(Pn=$.value||k.value)==null||Pn.focus():(Un=k.value)==null||Un.focus()},Oe=()=>{var Pn,Un,On;n.visible=!1,(Pn=k.value)==null||Pn.blur(),(On=(Un=V.value)==null?void 0:Un.blur)==null||On.call(Un)},Ve=Pn=>{var Un,On,Rn;(Un=L.value)!=null&&Un.isFocusInsideContent(Pn)||(On=z.value)!=null&&On.isFocusInsideContent(Pn)||(Rn=ae.value)!=null&&Rn.contains(Pn.relatedTarget)||(n.visible&&Pt(),n.focused=!1,r.emit("blur",Pn))},Ue=Pn=>{vn(Pn)},Pt=()=>{n.visible=!1},Lt=Pn=>{n.visible&&(Pn.preventDefault(),Pn.stopPropagation(),n.visible=!1)},bn=Pn=>{Pn&&!n.mouseEnter||$e.value||(n.menuVisibleOnFocus?n.menuVisibleOnFocus=!1:(!L.value||!L.value.isFocusInsideContent())&&(n.visible=!n.visible),pe())},jt=()=>{n.visible?Dt.value[n.hoverIndex]&&Kn(Dt.value[n.hoverIndex]):bn()},Cn=Pn=>isObject$3(Pn.value)?get(Pn.value,e.valueKey):Pn.value,xn=computed(()=>Dt.value.filter(Pn=>Pn.visible).every(Pn=>Pn.disabled)),In=computed(()=>n.selected.slice(0,e.maxCollapseTags)),Ln=computed(()=>n.selected.slice(e.maxCollapseTags)),An=Pn=>{if(!n.visible){n.visible=!0;return}if(!(n.options.size===0||n.filteredOptionsCount===0)&&!n.isOnComposition&&!xn.value){Pn==="next"?(n.hoverIndex++,n.hoverIndex===n.options.size&&(n.hoverIndex=0)):Pn==="prev"&&(n.hoverIndex--,n.hoverIndex<0&&(n.hoverIndex=n.options.size-1));const Un=Dt.value[n.hoverIndex];(Un.disabled===!0||Un.states.groupDisabled===!0||!Un.visible)&&An(Pn),nextTick(()=>At(oe.value))}},zn=()=>{n.mouseEnter=!0},Jn=()=>{n.mouseEnter=!1},Qn=(Pn,Un)=>{var On,Rn;Gn(Pn,Un),(Rn=(On=z.value)==null?void 0:On.updatePopper)==null||Rn.call(On)},ta=computed(()=>({maxWidth:`${unref(n.inputWidth)-32-(qe.value?22:0)}px`,width:"100%"}));return{optionList:de,optionsArray:Dt,selectSize:Vn,handleResize:ca,debouncedOnInputChange:Wn,debouncedQueryChange:da,deletePrevTag:ra,deleteTag:Gn,deleteSelected:vn,handleOptionSelect:Kn,scrollToOption:At,readonly:Ne,resetInputHeight:Nn,showClose:xe,iconComponent:Ie,iconReverse:ze,showNewOption:hn,collapseTagSize:Mn,setSelected:Tn,managePlaceholder:jn,selectDisabled:$e,emptyText:_n,toggleLastOptionHitState:sa,resetInputState:aa,handleComposition:ia,onOptionCreate:Dn,onOptionDestroy:Xn,handleMenuEnter:ma,handleFocus:ua,focus:pe,blur:Oe,handleBlur:Ve,handleClearClick:Ue,handleClose:Pt,handleKeydownEscape:Lt,toggleMenu:bn,selectOption:jt,getValueKey:Cn,navigateOptions:An,handleDeleteTooltipTag:Qn,dropMenuVisible:$n,queryChange:ue,groupQueryChange:le,showTagList:In,collapseTagList:Ln,selectTagsStyle:ta,reference:k,input:$,iOSInput:V,tooltipRef:L,tagTooltipRef:z,tags:j,selectWrapper:ae,scrollbar:re,handleMouseEnter:zn,handleMouseLeave:Jn}};var ElOptions=defineComponent({name:"ElOptions",emits:["update-options"],setup(e,{slots:n,emit:r}){let g=[];function y(k,$){if(k.length!==$.length)return!1;for(const[V]of k.entries())if(k[V]!=$[V])return!1;return!0}return()=>{var k,$;const V=(k=n.default)==null?void 0:k.call(n),L=[];function z(j){Array.isArray(j)&&j.forEach(ae=>{var re,oe,ue,le;const de=(re=ae?.type||{})==null?void 0:re.name;de==="ElOptionGroup"?z(!isString$3(ae.children)&&!Array.isArray(ae.children)&&isFunction$3((oe=ae.children)==null?void 0:oe.default)?(ue=ae.children)==null?void 0:ue.default():ae.children):de==="ElOption"?L.push((le=ae.props)==null?void 0:le.label):Array.isArray(ae.children)&&z(ae.children)})}return V.length&&z(($=V[0])==null?void 0:$.children),y(L,g)||(g=L,r("update-options",L)),V}}});const COMPONENT_NAME$9="ElSelect",_sfc_main$1$=defineComponent({name:COMPONENT_NAME$9,componentName:COMPONENT_NAME$9,components:{ElInput,ElSelectMenu:ElSelectMenu$1,ElOption:Option$1,ElOptions,ElTag,ElScrollbar,ElTooltip,ElIcon},directives:{ClickOutside},props:{name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:{type:String,validator:isValidComponentSize},effect:{type:String,default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:useTooltipContentProps.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:iconPropType,default:circle_close_default},fitInputWidth:Boolean,suffixIcon:{type:iconPropType,default:arrow_down_default},tagType:{...tagProps.type,default:"info"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,suffixTransition:{type:Boolean,default:!0},placement:{type:String,values:Ee,default:"bottom-start"},ariaLabel:{type:String,default:void 0}},emits:[UPDATE_MODEL_EVENT,CHANGE_EVENT,"remove-tag","clear","visible-change","focus","blur"],setup(e,n){const r=useNamespace("select"),g=useNamespace("input"),{t:y}=useLocale(),k=useSelectStates(e),{optionList:$,optionsArray:V,selectSize:L,readonly:z,handleResize:j,collapseTagSize:ae,debouncedOnInputChange:re,debouncedQueryChange:oe,deletePrevTag:ue,deleteTag:le,deleteSelected:de,handleOptionSelect:he,scrollToOption:_e,setSelected:Ce,resetInputHeight:Ne,managePlaceholder:$e,showClose:xe,selectDisabled:Ie,iconComponent:ze,iconReverse:qe,showNewOption:Et,emptyText:_n,toggleLastOptionHitState:Dt,resetInputState:Sn,handleComposition:hn,onOptionCreate:Vn,onOptionDestroy:Mn,handleMenuEnter:$n,handleFocus:Nn,focus:kn,blur:jn,handleBlur:Fn,handleClearClick:Tn,handleClose:Hn,handleKeydownEscape:la,toggleMenu:ca,selectOption:Zn,getValueKey:Bn,navigateOptions:Wn,handleDeleteTooltipTag:da,dropMenuVisible:ga,reference:Ca,input:ra,iOSInput:Gn,tooltipRef:vn,tagTooltipRef:Kn,tags:En,selectWrapper:kt,scrollbar:At,queryChange:Dn,groupQueryChange:Xn,handleMouseEnter:aa,handleMouseLeave:sa,showTagList:ia,collapseTagList:ma,selectTagsStyle:ua}=useSelect$2(e,k,n),{inputWidth:pe,selected:Oe,inputLength:Ve,filteredOptionsCount:Ue,visible:Pt,selectedLabel:Lt,hoverIndex:bn,query:jt,inputHovering:Cn,currentPlaceholder:xn,menuVisibleOnFocus:In,isOnComposition:Ln,options:An,cachedOptions:zn,optionsCount:Jn,prefixWidth:Qn}=toRefs(k),ta=computed(()=>{const ba=[r.b()],Oa=unref(L);return Oa&&ba.push(r.m(Oa)),e.disabled&&ba.push(r.m("disabled")),ba}),Pn=computed(()=>[r.e("tags"),r.is("disabled",unref(Ie))]),Un=computed(()=>[r.b("tags-wrapper"),{"has-prefix":unref(Qn)&&unref(Oe).length}]),On=computed(()=>[r.e("input"),r.is(unref(L)),r.is("disabled",unref(Ie))]),Rn=computed(()=>[r.e("input"),r.is(unref(L)),r.em("input","iOS")]),Yn=computed(()=>[r.is("empty",!e.allowCreate&&!!unref(jt)&&unref(Ue)===0)]),na=computed(()=>({maxWidth:`${unref(pe)>123?unref(pe)-123:unref(pe)-75}px`})),ea=computed(()=>({marginLeft:`${unref(Qn)}px`,flexGrow:1,width:`${unref(Ve)/(unref(pe)-32)}%`,maxWidth:`${unref(pe)-42}px`}));provide(selectKey,reactive({props:e,options:An,optionsArray:V,cachedOptions:zn,optionsCount:Jn,filteredOptionsCount:Ue,hoverIndex:bn,handleOptionSelect:he,onOptionCreate:Vn,onOptionDestroy:Mn,selectWrapper:kt,selected:Oe,setSelected:Ce,queryChange:Dn,groupQueryChange:Xn})),onMounted(()=>{k.cachedPlaceHolder=xn.value=e.placeholder||(()=>y("el.select.placeholder")),e.multiple&&Array.isArray(e.modelValue)&&e.modelValue.length>0&&(xn.value=""),useResizeObserver(kt,j),e.remote&&e.multiple&&Ne(),nextTick(()=>{const ba=Ca.value&&Ca.value.$el;if(ba&&(pe.value=ba.getBoundingClientRect().width,n.slots.prefix)){const Oa=ba.querySelector(`.${g.e("prefix")}`);Qn.value=Math.max(Oa.getBoundingClientRect().width+11,30)}}),Ce()}),e.multiple&&!Array.isArray(e.modelValue)&&n.emit(UPDATE_MODEL_EVENT,[]),!e.multiple&&Array.isArray(e.modelValue)&&n.emit(UPDATE_MODEL_EVENT,"");const pa=computed(()=>{var ba,Oa;return(Oa=(ba=vn.value)==null?void 0:ba.popperRef)==null?void 0:Oa.contentRef});return{isIOS,onOptionsRendered:ba=>{$.value=ba},prefixWidth:Qn,selectSize:L,readonly:z,handleResize:j,collapseTagSize:ae,debouncedOnInputChange:re,debouncedQueryChange:oe,deletePrevTag:ue,deleteTag:le,handleDeleteTooltipTag:da,deleteSelected:de,handleOptionSelect:he,scrollToOption:_e,inputWidth:pe,selected:Oe,inputLength:Ve,filteredOptionsCount:Ue,visible:Pt,selectedLabel:Lt,hoverIndex:bn,query:jt,inputHovering:Cn,currentPlaceholder:xn,menuVisibleOnFocus:In,isOnComposition:Ln,options:An,resetInputHeight:Ne,managePlaceholder:$e,showClose:xe,selectDisabled:Ie,iconComponent:ze,iconReverse:qe,showNewOption:Et,emptyText:_n,toggleLastOptionHitState:Dt,resetInputState:Sn,handleComposition:hn,handleMenuEnter:$n,handleFocus:Nn,focus:kn,blur:jn,handleBlur:Fn,handleClearClick:Tn,handleClose:Hn,handleKeydownEscape:la,toggleMenu:ca,selectOption:Zn,getValueKey:Bn,navigateOptions:Wn,dropMenuVisible:ga,reference:Ca,input:ra,iOSInput:Gn,tooltipRef:vn,popperPaneRef:pa,tags:En,selectWrapper:kt,scrollbar:At,wrapperKls:ta,tagsKls:Pn,tagWrapperKls:Un,inputKls:On,iOSInputKls:Rn,scrollbarKls:Yn,selectTagsStyle:ua,nsSelect:r,tagTextStyle:na,inputStyle:ea,handleMouseEnter:aa,handleMouseLeave:sa,showTagList:ia,collapseTagList:ma,tagTooltipRef:Kn}}}),_hoisted_1$1z=["disabled","autocomplete","aria-label"],_hoisted_2$1n=["disabled"],_hoisted_3$R={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}};function _sfc_render$9(e,n,r,g,y,k){const $=resolveComponent("el-tag"),V=resolveComponent("el-tooltip"),L=resolveComponent("el-icon"),z=resolveComponent("el-input"),j=resolveComponent("el-option"),ae=resolveComponent("el-options"),re=resolveComponent("el-scrollbar"),oe=resolveComponent("el-select-menu"),ue=resolveDirective("click-outside");return withDirectives((openBlock(),createElementBlock("div",{ref:"selectWrapper",class:normalizeClass(e.wrapperKls),onMouseenter:n[22]||(n[22]=(...le)=>e.handleMouseEnter&&e.handleMouseEnter(...le)),onMouseleave:n[23]||(n[23]=(...le)=>e.handleMouseLeave&&e.handleMouseLeave(...le)),onClick:n[24]||(n[24]=withModifiers((...le)=>e.toggleMenu&&e.toggleMenu(...le),["stop"]))},[createVNode(V,{ref:"tooltipRef",visible:e.dropMenuVisible,placement:e.placement,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:e.effect,pure:"",trigger:"click",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:e.persistent,onShow:e.handleMenuEnter},{default:withCtx(()=>[createBaseVNode("div",{class:"select-trigger",onMouseenter:n[20]||(n[20]=le=>e.inputHovering=!0),onMouseleave:n[21]||(n[21]=le=>e.inputHovering=!1)},[e.multiple?(openBlock(),createElementBlock("div",{key:0,ref:"tags",tabindex:"-1",class:normalizeClass(e.tagsKls),style:normalizeStyle(e.selectTagsStyle),onClick:n[15]||(n[15]=(...le)=>e.focus&&e.focus(...le))},[e.collapseTags&&e.selected.length?(openBlock(),createBlock(Transition,{key:0,onAfterLeave:e.resetInputHeight},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(e.tagWrapperKls)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.showTagList,le=>(openBlock(),createBlock($,{key:e.getValueKey(le),closable:!e.selectDisabled&&!le.isDisabled,size:e.collapseTagSize,hit:le.hitState,type:e.tagType,"disable-transitions":"",onClose:de=>e.deleteTag(de,le)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(e.nsSelect.e("tags-text")),style:normalizeStyle(e.tagTextStyle)},toDisplayString$1(le.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128)),e.selected.length>e.maxCollapseTags?(openBlock(),createBlock($,{key:0,closable:!1,size:e.collapseTagSize,type:e.tagType,"disable-transitions":""},{default:withCtx(()=>[e.collapseTagsTooltip?(openBlock(),createBlock(V,{key:0,ref:"tagTooltipRef",disabled:e.dropMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(e.nsSelect.e("tags-text"))},"+ "+toDisplayString$1(e.selected.length-e.maxCollapseTags),3)]),content:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(e.nsSelect.e("collapse-tags"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.collapseTagList,le=>(openBlock(),createElementBlock("div",{key:e.getValueKey(le),class:normalizeClass(e.nsSelect.e("collapse-tag"))},[createVNode($,{class:"in-tooltip",closable:!e.selectDisabled&&!le.isDisabled,size:e.collapseTagSize,hit:le.hitState,type:e.tagType,"disable-transitions":"",style:{margin:"2px"},onClose:de=>e.handleDeleteTooltipTag(de,le)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(e.nsSelect.e("tags-text")),style:normalizeStyle({maxWidth:e.inputWidth-75+"px"})},toDisplayString$1(le.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"])],2))),128))],2)]),_:1},8,["disabled","effect","teleported"])):(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(e.nsSelect.e("tags-text"))},"+ "+toDisplayString$1(e.selected.length-e.maxCollapseTags),3))]),_:1},8,["size","type"])):createCommentVNode("v-if",!0)],2)]),_:1},8,["onAfterLeave"])):createCommentVNode("v-if",!0),e.collapseTags?createCommentVNode("v-if",!0):(openBlock(),createBlock(Transition,{key:1,onAfterLeave:e.resetInputHeight},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(e.tagWrapperKls),style:normalizeStyle(e.prefixWidth&&e.selected.length?{marginLeft:`${e.prefixWidth}px`}:"")},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.selected,le=>(openBlock(),createBlock($,{key:e.getValueKey(le),closable:!e.selectDisabled&&!le.isDisabled,size:e.collapseTagSize,hit:le.hitState,type:e.tagType,"disable-transitions":"",onClose:de=>e.deleteTag(de,le)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(e.nsSelect.e("tags-text")),style:normalizeStyle({maxWidth:e.inputWidth-75+"px"})},toDisplayString$1(le.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128))],6)]),_:1},8,["onAfterLeave"])),e.filterable&&!e.selectDisabled?withDirectives((openBlock(),createElementBlock("input",{key:2,ref:"input","onUpdate:modelValue":n[0]||(n[0]=le=>e.query=le),type:"text",class:normalizeClass(e.inputKls),disabled:e.selectDisabled,autocomplete:e.autocomplete,style:normalizeStyle(e.inputStyle),"aria-label":e.ariaLabel,onFocus:n[1]||(n[1]=(...le)=>e.handleFocus&&e.handleFocus(...le)),onBlur:n[2]||(n[2]=(...le)=>e.handleBlur&&e.handleBlur(...le)),onKeyup:n[3]||(n[3]=(...le)=>e.managePlaceholder&&e.managePlaceholder(...le)),onKeydown:[n[4]||(n[4]=(...le)=>e.resetInputState&&e.resetInputState(...le)),n[5]||(n[5]=withKeys(withModifiers(le=>e.navigateOptions("next"),["prevent"]),["down"])),n[6]||(n[6]=withKeys(withModifiers(le=>e.navigateOptions("prev"),["prevent"]),["up"])),n[7]||(n[7]=withKeys((...le)=>e.handleKeydownEscape&&e.handleKeydownEscape(...le),["esc"])),n[8]||(n[8]=withKeys(withModifiers((...le)=>e.selectOption&&e.selectOption(...le),["stop","prevent"]),["enter"])),n[9]||(n[9]=withKeys((...le)=>e.deletePrevTag&&e.deletePrevTag(...le),["delete"])),n[10]||(n[10]=withKeys(le=>e.visible=!1,["tab"]))],onCompositionstart:n[11]||(n[11]=(...le)=>e.handleComposition&&e.handleComposition(...le)),onCompositionupdate:n[12]||(n[12]=(...le)=>e.handleComposition&&e.handleComposition(...le)),onCompositionend:n[13]||(n[13]=(...le)=>e.handleComposition&&e.handleComposition(...le)),onInput:n[14]||(n[14]=(...le)=>e.debouncedQueryChange&&e.debouncedQueryChange(...le))},null,46,_hoisted_1$1z)),[[vModelText,e.query]]):createCommentVNode("v-if",!0)],6)):createCommentVNode("v-if",!0),createCommentVNode(" fix: https://github.com/element-plus/element-plus/issues/11415 "),e.isIOS&&!e.multiple&&e.filterable&&e.readonly?(openBlock(),createElementBlock("input",{key:1,ref:"iOSInput",class:normalizeClass(e.iOSInputKls),disabled:e.selectDisabled,type:"text"},null,10,_hoisted_2$1n)):createCommentVNode("v-if",!0),createVNode(z,{id:e.id,ref:"reference",modelValue:e.selectedLabel,"onUpdate:modelValue":n[16]||(n[16]=le=>e.selectedLabel=le),type:"text",placeholder:typeof e.currentPlaceholder=="function"?e.currentPlaceholder():e.currentPlaceholder,name:e.name,autocomplete:e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,class:normalizeClass([e.nsSelect.is("focus",e.visible)]),tabindex:e.multiple&&e.filterable?-1:void 0,label:e.ariaLabel,onFocus:e.handleFocus,onBlur:e.handleBlur,onInput:e.debouncedOnInputChange,onPaste:e.debouncedOnInputChange,onCompositionstart:e.handleComposition,onCompositionupdate:e.handleComposition,onCompositionend:e.handleComposition,onKeydown:[n[17]||(n[17]=withKeys(withModifiers(le=>e.navigateOptions("next"),["stop","prevent"]),["down"])),n[18]||(n[18]=withKeys(withModifiers(le=>e.navigateOptions("prev"),["stop","prevent"]),["up"])),withKeys(withModifiers(e.selectOption,["stop","prevent"]),["enter"]),withKeys(e.handleKeydownEscape,["esc"]),n[19]||(n[19]=withKeys(le=>e.visible=!1,["tab"]))]},createSlots({suffix:withCtx(()=>[e.iconComponent&&!e.showClose?(openBlock(),createBlock(L,{key:0,class:normalizeClass([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.iconReverse])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(e.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),e.showClose&&e.clearIcon?(openBlock(),createBlock(L,{key:1,class:normalizeClass([e.nsSelect.e("caret"),e.nsSelect.e("icon")]),onClick:e.handleClearClick},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(e.clearIcon)))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)]),_:2},[e.$slots.prefix?{name:"prefix",fn:withCtx(()=>[createBaseVNode("div",_hoisted_3$R,[renderSlot(e.$slots,"prefix")])])}:void 0]),1032,["id","modelValue","placeholder","name","autocomplete","size","disabled","readonly","class","tabindex","label","onFocus","onBlur","onInput","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown"])],32)]),content:withCtx(()=>[createVNode(oe,null,{default:withCtx(()=>[withDirectives(createVNode(re,{ref:"scrollbar",tag:"ul","wrap-class":e.nsSelect.be("dropdown","wrap"),"view-class":e.nsSelect.be("dropdown","list"),class:normalizeClass(e.scrollbarKls)},{default:withCtx(()=>[e.showNewOption?(openBlock(),createBlock(j,{key:0,value:e.query,created:!0},null,8,["value"])):createCommentVNode("v-if",!0),createVNode(ae,{onUpdateOptions:e.onOptionsRendered},{default:withCtx(()=>[renderSlot(e.$slots,"default")]),_:3},8,["onUpdateOptions"])]),_:3},8,["wrap-class","view-class","class"]),[[vShow,e.options.size>0&&!e.loading]]),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&e.options.size===0)?(openBlock(),createElementBlock(Fragment,{key:0},[e.$slots.empty?renderSlot(e.$slots,"empty",{key:0}):(openBlock(),createElementBlock("p",{key:1,class:normalizeClass(e.nsSelect.be("dropdown","empty"))},toDisplayString$1(e.emptyText),3))],64)):createCommentVNode("v-if",!0)]),_:3})]),_:3},8,["visible","placement","teleported","popper-class","popper-options","effect","transition","persistent","onShow"])],34)),[[ue,e.handleClose,e.popperPaneRef]])}var Select$1=_export_sfc$1(_sfc_main$1$,[["render",_sfc_render$9],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select.vue"]]);const _sfc_main$1_=defineComponent({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(e){const n=useNamespace("select"),r=ref(!0),g=getCurrentInstance(),y=ref([]);provide(selectGroupKey,reactive({...toRefs(e)}));const k=inject(selectKey);onMounted(()=>{y.value=$(g.subTree)});const $=L=>{const z=[];return Array.isArray(L.children)&&L.children.forEach(j=>{var ae;j.type&&j.type.name==="ElOption"&&j.component&&j.component.proxy?z.push(j.component.proxy):(ae=j.children)!=null&&ae.length&&z.push(...$(j))}),z},{groupQueryChange:V}=toRaw(k);return watch(V,()=>{r.value=y.value.some(L=>L.visible===!0)},{flush:"post"}),{visible:r,ns:n}}});function _sfc_render$8(e,n,r,g,y,k){return withDirectives((openBlock(),createElementBlock("ul",{class:normalizeClass(e.ns.be("group","wrap"))},[createBaseVNode("li",{class:normalizeClass(e.ns.be("group","title"))},toDisplayString$1(e.label),3),createBaseVNode("li",null,[createBaseVNode("ul",{class:normalizeClass(e.ns.b("group"))},[renderSlot(e.$slots,"default")],2)])],2)),[[vShow,e.visible]])}var OptionGroup=_export_sfc$1(_sfc_main$1_,[["render",_sfc_render$8],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option-group.vue"]]);const ElSelect=withInstall(Select$1,{Option:Option$1,OptionGroup}),ElOption=withNoopInstall(Option$1),ElOptionGroup=withNoopInstall(OptionGroup),usePagination=()=>inject(elPaginationKey,{}),paginationSizesProps=buildProps({pageSize:{type:Number,required:!0},pageSizes:{type:definePropType(Array),default:()=>mutable([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,size:{type:String,values:componentSizes}}),__default__$C=defineComponent({name:"ElPaginationSizes"}),_sfc_main$1Z=defineComponent({...__default__$C,props:paginationSizesProps,emits:["page-size-change"],setup(e,{emit:n}){const r=e,{t:g}=useLocale(),y=useNamespace("pagination"),k=usePagination(),$=ref(r.pageSize);watch(()=>r.pageSizes,(z,j)=>{if(!isEqual$1(z,j)&&Array.isArray(z)){const ae=z.includes(r.pageSize)?r.pageSize:r.pageSizes[0];n("page-size-change",ae)}}),watch(()=>r.pageSize,z=>{$.value=z});const V=computed(()=>r.pageSizes);function L(z){var j;z!==$.value&&($.value=z,(j=k.handleSizeChange)==null||j.call(k,Number(z)))}return(z,j)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(y).e("sizes"))},[createVNode(unref(ElSelect),{"model-value":$.value,disabled:z.disabled,"popper-class":z.popperClass,size:z.size,"validate-event":!1,onChange:L},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(V),ae=>(openBlock(),createBlock(unref(ElOption),{key:ae,value:ae,label:ae+unref(g)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size"])],2))}});var Sizes=_export_sfc$1(_sfc_main$1Z,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/sizes.vue"]]);const paginationJumperProps=buildProps({size:{type:String,values:componentSizes}}),_hoisted_1$1y=["disabled"],__default__$B=defineComponent({name:"ElPaginationJumper"}),_sfc_main$1Y=defineComponent({...__default__$B,props:paginationJumperProps,setup(e){const{t:n}=useLocale(),r=useNamespace("pagination"),{pageCount:g,disabled:y,currentPage:k,changeEvent:$}=usePagination(),V=ref(),L=computed(()=>{var ae;return(ae=V.value)!=null?ae:k?.value});function z(ae){V.value=ae?+ae:""}function j(ae){ae=Math.trunc(+ae),$?.(ae),V.value=void 0}return(ae,re)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(r).e("jump")),disabled:unref(y)},[createBaseVNode("span",{class:normalizeClass([unref(r).e("goto")])},toDisplayString$1(unref(n)("el.pagination.goto")),3),createVNode(unref(ElInput),{size:ae.size,class:normalizeClass([unref(r).e("editor"),unref(r).is("in-pagination")]),min:1,max:unref(g),disabled:unref(y),"model-value":unref(L),"validate-event":!1,label:unref(n)("el.pagination.page"),type:"number","onUpdate:modelValue":z,onChange:j},null,8,["size","class","max","disabled","model-value","label"]),createBaseVNode("span",{class:normalizeClass([unref(r).e("classifier")])},toDisplayString$1(unref(n)("el.pagination.pageClassifier")),3)],10,_hoisted_1$1y))}});var Jumper=_export_sfc$1(_sfc_main$1Y,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/jumper.vue"]]);const paginationTotalProps=buildProps({total:{type:Number,default:1e3}}),_hoisted_1$1x=["disabled"],__default__$A=defineComponent({name:"ElPaginationTotal"}),_sfc_main$1X=defineComponent({...__default__$A,props:paginationTotalProps,setup(e){const{t:n}=useLocale(),r=useNamespace("pagination"),{disabled:g}=usePagination();return(y,k)=>(openBlock(),createElementBlock("span",{class:normalizeClass(unref(r).e("total")),disabled:unref(g)},toDisplayString$1(unref(n)("el.pagination.total",{total:y.total})),11,_hoisted_1$1x))}});var Total=_export_sfc$1(_sfc_main$1X,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/total.vue"]]);const paginationPagerProps=buildProps({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),_hoisted_1$1w=["onKeyup"],_hoisted_2$1m=["aria-current","aria-label","tabindex"],_hoisted_3$Q=["tabindex","aria-label"],_hoisted_4$L=["aria-current","aria-label","tabindex"],_hoisted_5$E=["tabindex","aria-label"],_hoisted_6$y=["aria-current","aria-label","tabindex"],__default__$z=defineComponent({name:"ElPaginationPager"}),_sfc_main$1W=defineComponent({...__default__$z,props:paginationPagerProps,emits:["change"],setup(e,{emit:n}){const r=e,g=useNamespace("pager"),y=useNamespace("icon"),{t:k}=useLocale(),$=ref(!1),V=ref(!1),L=ref(!1),z=ref(!1),j=ref(!1),ae=ref(!1),re=computed(()=>{const Ne=r.pagerCount,$e=(Ne-1)/2,xe=Number(r.currentPage),Ie=Number(r.pageCount);let ze=!1,qe=!1;Ie>Ne&&(xe>Ne-$e&&(ze=!0),xe<Ie-$e&&(qe=!0));const Et=[];if(ze&&!qe){const _n=Ie-(Ne-2);for(let Dt=_n;Dt<Ie;Dt++)Et.push(Dt)}else if(!ze&&qe)for(let _n=2;_n<Ne;_n++)Et.push(_n);else if(ze&&qe){const _n=Math.floor(Ne/2)-1;for(let Dt=xe-_n;Dt<=xe+_n;Dt++)Et.push(Dt)}else for(let _n=2;_n<Ie;_n++)Et.push(_n);return Et}),oe=computed(()=>["more","btn-quickprev",y.b(),g.is("disabled",r.disabled)]),ue=computed(()=>["more","btn-quicknext",y.b(),g.is("disabled",r.disabled)]),le=computed(()=>r.disabled?-1:0);watchEffect(()=>{const Ne=(r.pagerCount-1)/2;$.value=!1,V.value=!1,r.pageCount>r.pagerCount&&(r.currentPage>r.pagerCount-Ne&&($.value=!0),r.currentPage<r.pageCount-Ne&&(V.value=!0))});function de(Ne=!1){r.disabled||(Ne?L.value=!0:z.value=!0)}function he(Ne=!1){Ne?j.value=!0:ae.value=!0}function _e(Ne){const $e=Ne.target;if($e.tagName.toLowerCase()==="li"&&Array.from($e.classList).includes("number")){const xe=Number($e.textContent);xe!==r.currentPage&&n("change",xe)}else $e.tagName.toLowerCase()==="li"&&Array.from($e.classList).includes("more")&&Ce(Ne)}function Ce(Ne){const $e=Ne.target;if($e.tagName.toLowerCase()==="ul"||r.disabled)return;let xe=Number($e.textContent);const Ie=r.pageCount,ze=r.currentPage,qe=r.pagerCount-2;$e.className.includes("more")&&($e.className.includes("quickprev")?xe=ze-qe:$e.className.includes("quicknext")&&(xe=ze+qe)),Number.isNaN(+xe)||(xe<1&&(xe=1),xe>Ie&&(xe=Ie)),xe!==ze&&n("change",xe)}return(Ne,$e)=>(openBlock(),createElementBlock("ul",{class:normalizeClass(unref(g).b()),onClick:Ce,onKeyup:withKeys(_e,["enter"])},[Ne.pageCount>0?(openBlock(),createElementBlock("li",{key:0,class:normalizeClass([[unref(g).is("active",Ne.currentPage===1),unref(g).is("disabled",Ne.disabled)],"number"]),"aria-current":Ne.currentPage===1,"aria-label":unref(k)("el.pagination.currentPage",{pager:1}),tabindex:unref(le)}," 1 ",10,_hoisted_2$1m)):createCommentVNode("v-if",!0),$.value?(openBlock(),createElementBlock("li",{key:1,class:normalizeClass(unref(oe)),tabindex:unref(le),"aria-label":unref(k)("el.pagination.prevPages",{pager:Ne.pagerCount-2}),onMouseenter:$e[0]||($e[0]=xe=>de(!0)),onMouseleave:$e[1]||($e[1]=xe=>L.value=!1),onFocus:$e[2]||($e[2]=xe=>he(!0)),onBlur:$e[3]||($e[3]=xe=>j.value=!1)},[(L.value||j.value)&&!Ne.disabled?(openBlock(),createBlock(unref(d_arrow_left_default),{key:0})):(openBlock(),createBlock(unref(more_filled_default),{key:1}))],42,_hoisted_3$Q)):createCommentVNode("v-if",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(re),xe=>(openBlock(),createElementBlock("li",{key:xe,class:normalizeClass([[unref(g).is("active",Ne.currentPage===xe),unref(g).is("disabled",Ne.disabled)],"number"]),"aria-current":Ne.currentPage===xe,"aria-label":unref(k)("el.pagination.currentPage",{pager:xe}),tabindex:unref(le)},toDisplayString$1(xe),11,_hoisted_4$L))),128)),V.value?(openBlock(),createElementBlock("li",{key:2,class:normalizeClass(unref(ue)),tabindex:unref(le),"aria-label":unref(k)("el.pagination.nextPages",{pager:Ne.pagerCount-2}),onMouseenter:$e[4]||($e[4]=xe=>de()),onMouseleave:$e[5]||($e[5]=xe=>z.value=!1),onFocus:$e[6]||($e[6]=xe=>he()),onBlur:$e[7]||($e[7]=xe=>ae.value=!1)},[(z.value||ae.value)&&!Ne.disabled?(openBlock(),createBlock(unref(d_arrow_right_default),{key:0})):(openBlock(),createBlock(unref(more_filled_default),{key:1}))],42,_hoisted_5$E)):createCommentVNode("v-if",!0),Ne.pageCount>1?(openBlock(),createElementBlock("li",{key:3,class:normalizeClass([[unref(g).is("active",Ne.currentPage===Ne.pageCount),unref(g).is("disabled",Ne.disabled)],"number"]),"aria-current":Ne.currentPage===Ne.pageCount,"aria-label":unref(k)("el.pagination.currentPage",{pager:Ne.pageCount}),tabindex:unref(le)},toDisplayString$1(Ne.pageCount),11,_hoisted_6$y)):createCommentVNode("v-if",!0)],42,_hoisted_1$1w))}});var Pager=_export_sfc$1(_sfc_main$1W,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/pager.vue"]]);const isAbsent=e=>typeof e!="number",paginationProps=buildProps({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:e=>isNumber$1(e)&&Math.trunc(e)===e&&e>4&&e<22&&e%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:definePropType(Array),default:()=>mutable([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:iconPropType,default:()=>arrow_left_default},nextText:{type:String,default:""},nextIcon:{type:iconPropType,default:()=>arrow_right_default},small:Boolean,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean}),paginationEmits={"update:current-page":e=>isNumber$1(e),"update:page-size":e=>isNumber$1(e),"size-change":e=>isNumber$1(e),"current-change":e=>isNumber$1(e),"prev-click":e=>isNumber$1(e),"next-click":e=>isNumber$1(e)},componentName="ElPagination";var Pagination=defineComponent({name:componentName,props:paginationProps,emits:paginationEmits,setup(e,{emit:n,slots:r}){const{t:g}=useLocale(),y=useNamespace("pagination"),k=getCurrentInstance().vnode.props||{},$="onUpdate:currentPage"in k||"onUpdate:current-page"in k||"onCurrentChange"in k,V="onUpdate:pageSize"in k||"onUpdate:page-size"in k||"onSizeChange"in k,L=computed(()=>{if(isAbsent(e.total)&&isAbsent(e.pageCount)||!isAbsent(e.currentPage)&&!$)return!1;if(e.layout.includes("sizes")){if(isAbsent(e.pageCount)){if(!isAbsent(e.total)&&!isAbsent(e.pageSize)&&!V)return!1}else if(!V)return!1}return!0}),z=ref(isAbsent(e.defaultPageSize)?10:e.defaultPageSize),j=ref(isAbsent(e.defaultCurrentPage)?1:e.defaultCurrentPage),ae=computed({get(){return isAbsent(e.pageSize)?z.value:e.pageSize},set(Ce){isAbsent(e.pageSize)&&(z.value=Ce),V&&(n("update:page-size",Ce),n("size-change",Ce))}}),re=computed(()=>{let Ce=0;return isAbsent(e.pageCount)?isAbsent(e.total)||(Ce=Math.max(1,Math.ceil(e.total/ae.value))):Ce=e.pageCount,Ce}),oe=computed({get(){return isAbsent(e.currentPage)?j.value:e.currentPage},set(Ce){let Ne=Ce;Ce<1?Ne=1:Ce>re.value&&(Ne=re.value),isAbsent(e.currentPage)&&(j.value=Ne),$&&(n("update:current-page",Ne),n("current-change",Ne))}});watch(re,Ce=>{oe.value>Ce&&(oe.value=Ce)});function ue(Ce){oe.value=Ce}function le(Ce){ae.value=Ce;const Ne=re.value;oe.value>Ne&&(oe.value=Ne)}function de(){e.disabled||(oe.value-=1,n("prev-click",oe.value))}function he(){e.disabled||(oe.value+=1,n("next-click",oe.value))}function _e(Ce,Ne){Ce&&(Ce.props||(Ce.props={}),Ce.props.class=[Ce.props.class,Ne].join(" "))}return provide(elPaginationKey,{pageCount:re,disabled:computed(()=>e.disabled),currentPage:oe,changeEvent:ue,handleSizeChange:le}),()=>{var Ce,Ne;if(!L.value)return g("el.pagination.deprecationWarning"),null;if(!e.layout||e.hideOnSinglePage&&re.value<=1)return null;const $e=[],xe=[],Ie=h$1("div",{class:y.e("rightwrapper")},xe),ze={prev:h$1(Prev,{disabled:e.disabled,currentPage:oe.value,prevText:e.prevText,prevIcon:e.prevIcon,onClick:de}),jumper:h$1(Jumper,{size:e.small?"small":"default"}),pager:h$1(Pager,{currentPage:oe.value,pageCount:re.value,pagerCount:e.pagerCount,onChange:ue,disabled:e.disabled}),next:h$1(Next,{disabled:e.disabled,currentPage:oe.value,pageCount:re.value,nextText:e.nextText,nextIcon:e.nextIcon,onClick:he}),sizes:h$1(Sizes,{pageSize:ae.value,pageSizes:e.pageSizes,popperClass:e.popperClass,disabled:e.disabled,size:e.small?"small":"default"}),slot:(Ne=(Ce=r?.default)==null?void 0:Ce.call(r))!=null?Ne:null,total:h$1(Total,{total:isAbsent(e.total)?0:e.total})},qe=e.layout.split(",").map(_n=>_n.trim());let Et=!1;return qe.forEach(_n=>{if(_n==="->"){Et=!0;return}Et?xe.push(ze[_n]):$e.push(ze[_n])}),_e($e[0],y.is("first")),_e($e[$e.length-1],y.is("last")),Et&&xe.length>0&&(_e(xe[0],y.is("first")),_e(xe[xe.length-1],y.is("last")),$e.push(Ie)),h$1("div",{class:[y.b(),y.is("background",e.background),{[y.m("small")]:e.small}]},$e)}}});const ElPagination=withInstall(Pagination),popconfirmProps=buildProps({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:buttonTypes,default:"primary"},cancelButtonType:{type:String,values:buttonTypes,default:"text"},icon:{type:iconPropType,default:()=>question_filled_default},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:useTooltipContentProps.teleported,persistent:useTooltipContentProps.persistent,width:{type:[String,Number],default:150}}),popconfirmEmits={confirm:e=>e instanceof MouseEvent,cancel:e=>e instanceof MouseEvent},__default__$y=defineComponent({name:"ElPopconfirm"}),_sfc_main$1V=defineComponent({...__default__$y,props:popconfirmProps,emits:popconfirmEmits,setup(e,{emit:n}){const r=e,{t:g}=useLocale(),y=useNamespace("popconfirm"),k=ref(),$=()=>{var re,oe;(oe=(re=k.value)==null?void 0:re.onClose)==null||oe.call(re)},V=computed(()=>({width:addUnit(r.width)})),L=re=>{n("confirm",re),$()},z=re=>{n("cancel",re),$()},j=computed(()=>r.confirmButtonText||g("el.popconfirm.confirmButtonText")),ae=computed(()=>r.cancelButtonText||g("el.popconfirm.cancelButtonText"));return(re,oe)=>(openBlock(),createBlock(unref(ElTooltip),mergeProps({ref_key:"tooltipRef",ref:k,trigger:"click",effect:"light"},re.$attrs,{"popper-class":`${unref(y).namespace.value}-popover`,"popper-style":unref(V),teleported:re.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":re.hideAfter,persistent:re.persistent}),{content:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(unref(y).b())},[createBaseVNode("div",{class:normalizeClass(unref(y).e("main"))},[!re.hideIcon&&re.icon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(y).e("icon")),style:normalizeStyle({color:re.iconColor})},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(re.icon)))]),_:1},8,["class","style"])):createCommentVNode("v-if",!0),createTextVNode(" "+toDisplayString$1(re.title),1)],2),createBaseVNode("div",{class:normalizeClass(unref(y).e("action"))},[createVNode(unref(ElButton),{size:"small",type:re.cancelButtonType==="text"?"":re.cancelButtonType,text:re.cancelButtonType==="text",onClick:z},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(ae)),1)]),_:1},8,["type","text"]),createVNode(unref(ElButton),{size:"small",type:re.confirmButtonType==="text"?"":re.confirmButtonType,text:re.confirmButtonType==="text",onClick:L},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(j)),1)]),_:1},8,["type","text"])],2)],2)]),default:withCtx(()=>[re.$slots.reference?renderSlot(re.$slots,"reference",{key:0}):createCommentVNode("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var Popconfirm=_export_sfc$1(_sfc_main$1V,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popconfirm/src/popconfirm.vue"]]);const ElPopconfirm=withInstall(Popconfirm),popoverProps=buildProps({trigger:useTooltipTriggerProps.trigger,placement:dropdownProps.placement,disabled:useTooltipTriggerProps.disabled,visible:useTooltipContentProps.visible,transition:useTooltipContentProps.transition,popperOptions:dropdownProps.popperOptions,tabindex:dropdownProps.tabindex,content:useTooltipContentProps.content,popperStyle:useTooltipContentProps.popperStyle,popperClass:useTooltipContentProps.popperClass,enterable:{...useTooltipContentProps.enterable,default:!0},effect:{...useTooltipContentProps.effect,default:"light"},teleported:useTooltipContentProps.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),popoverEmits={"update:visible":e=>isBoolean$1(e),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},updateEventKeyRaw="onUpdate:visible",__default__$x=defineComponent({name:"ElPopover"}),_sfc_main$1U=defineComponent({...__default__$x,props:popoverProps,emits:popoverEmits,setup(e,{expose:n,emit:r}){const g=e,y=computed(()=>g[updateEventKeyRaw]),k=useNamespace("popover"),$=ref(),V=computed(()=>{var de;return(de=unref($))==null?void 0:de.popperRef}),L=computed(()=>[{width:addUnit(g.width)},g.popperStyle]),z=computed(()=>[k.b(),g.popperClass,{[k.m("plain")]:!!g.content}]),j=computed(()=>g.transition===`${k.namespace.value}-fade-in-linear`),ae=()=>{var de;(de=$.value)==null||de.hide()},re=()=>{r("before-enter")},oe=()=>{r("before-leave")},ue=()=>{r("after-enter")},le=()=>{r("update:visible",!1),r("after-leave")};return n({popperRef:V,hide:ae}),(de,he)=>(openBlock(),createBlock(unref(ElTooltip),mergeProps({ref_key:"tooltipRef",ref:$},de.$attrs,{trigger:de.trigger,placement:de.placement,disabled:de.disabled,visible:de.visible,transition:de.transition,"popper-options":de.popperOptions,tabindex:de.tabindex,content:de.content,offset:de.offset,"show-after":de.showAfter,"hide-after":de.hideAfter,"auto-close":de.autoClose,"show-arrow":de.showArrow,"aria-label":de.title,effect:de.effect,enterable:de.enterable,"popper-class":unref(z),"popper-style":unref(L),teleported:de.teleported,persistent:de.persistent,"gpu-acceleration":unref(j),"onUpdate:visible":unref(y),onBeforeShow:re,onBeforeHide:oe,onShow:ue,onHide:le}),{content:withCtx(()=>[de.title?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(k).e("title")),role:"title"},toDisplayString$1(de.title),3)):createCommentVNode("v-if",!0),renderSlot(de.$slots,"default",{},()=>[createTextVNode(toDisplayString$1(de.content),1)])]),default:withCtx(()=>[de.$slots.reference?renderSlot(de.$slots,"reference",{key:0}):createCommentVNode("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var Popover=_export_sfc$1(_sfc_main$1U,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popover/src/popover.vue"]]);const attachEvents=(e,n)=>{const r=n.arg||n.value,g=r?.popperRef;g&&(g.triggerRef=e)};var PopoverDirective={mounted(e,n){attachEvents(e,n)},updated(e,n){attachEvents(e,n)}};const VPopover="popover",ElPopoverDirective=withInstallDirective(PopoverDirective,VPopover),ElPopover=withInstall(Popover,{directive:ElPopoverDirective}),progressProps=buildProps({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:definePropType(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:definePropType([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:definePropType(Function),default:e=>`${e}%`}}),_hoisted_1$1v=["aria-valuenow"],_hoisted_2$1l={viewBox:"0 0 100 100"},_hoisted_3$P=["d","stroke","stroke-linecap","stroke-width"],_hoisted_4$K=["d","stroke","opacity","stroke-linecap","stroke-width"],_hoisted_5$D={key:0},__default__$w=defineComponent({name:"ElProgress"}),_sfc_main$1T=defineComponent({...__default__$w,props:progressProps,setup(e){const n=e,r={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},g=useNamespace("progress"),y=computed(()=>({width:`${n.percentage}%`,animationDuration:`${n.duration}s`,backgroundColor:_e(n.percentage)})),k=computed(()=>(n.strokeWidth/n.width*100).toFixed(1)),$=computed(()=>["circle","dashboard"].includes(n.type)?Number.parseInt(`${50-Number.parseFloat(k.value)/2}`,10):0),V=computed(()=>{const Ce=$.value,Ne=n.type==="dashboard";return`
          M 50 50
          m 0 ${Ne?"":"-"}${Ce}
          a ${Ce} ${Ce} 0 1 1 0 ${Ne?"-":""}${Ce*2}
          a ${Ce} ${Ce} 0 1 1 0 ${Ne?"":"-"}${Ce*2}
          `}),L=computed(()=>2*Math.PI*$.value),z=computed(()=>n.type==="dashboard"?.75:1),j=computed(()=>`${-1*L.value*(1-z.value)/2}px`),ae=computed(()=>({strokeDasharray:`${L.value*z.value}px, ${L.value}px`,strokeDashoffset:j.value})),re=computed(()=>({strokeDasharray:`${L.value*z.value*(n.percentage/100)}px, ${L.value}px`,strokeDashoffset:j.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),oe=computed(()=>{let Ce;return n.color?Ce=_e(n.percentage):Ce=r[n.status]||r.default,Ce}),ue=computed(()=>n.status==="warning"?warning_filled_default:n.type==="line"?n.status==="success"?circle_check_default:circle_close_default:n.status==="success"?check_default:close_default),le=computed(()=>n.type==="line"?12+n.strokeWidth*.4:n.width*.111111+2),de=computed(()=>n.format(n.percentage));function he(Ce){const Ne=100/Ce.length;return Ce.map((xe,Ie)=>isString$3(xe)?{color:xe,percentage:(Ie+1)*Ne}:xe).sort((xe,Ie)=>xe.percentage-Ie.percentage)}const _e=Ce=>{var Ne;const{color:$e}=n;if(isFunction$3($e))return $e(Ce);if(isString$3($e))return $e;{const xe=he($e);for(const Ie of xe)if(Ie.percentage>Ce)return Ie.color;return(Ne=xe[xe.length-1])==null?void 0:Ne.color}};return(Ce,Ne)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(g).b(),unref(g).m(Ce.type),unref(g).is(Ce.status),{[unref(g).m("without-text")]:!Ce.showText,[unref(g).m("text-inside")]:Ce.textInside}]),role:"progressbar","aria-valuenow":Ce.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[Ce.type==="line"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(g).b("bar"))},[createBaseVNode("div",{class:normalizeClass(unref(g).be("bar","outer")),style:normalizeStyle({height:`${Ce.strokeWidth}px`})},[createBaseVNode("div",{class:normalizeClass([unref(g).be("bar","inner"),{[unref(g).bem("bar","inner","indeterminate")]:Ce.indeterminate},{[unref(g).bem("bar","inner","striped")]:Ce.striped},{[unref(g).bem("bar","inner","striped-flow")]:Ce.stripedFlow}]),style:normalizeStyle(unref(y))},[(Ce.showText||Ce.$slots.default)&&Ce.textInside?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(g).be("bar","innerText"))},[renderSlot(Ce.$slots,"default",{percentage:Ce.percentage},()=>[createBaseVNode("span",null,toDisplayString$1(unref(de)),1)])],2)):createCommentVNode("v-if",!0)],6)],6)],2)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(g).b("circle")),style:normalizeStyle({height:`${Ce.width}px`,width:`${Ce.width}px`})},[(openBlock(),createElementBlock("svg",_hoisted_2$1l,[createBaseVNode("path",{class:normalizeClass(unref(g).be("circle","track")),d:unref(V),stroke:`var(${unref(g).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":Ce.strokeLinecap,"stroke-width":unref(k),fill:"none",style:normalizeStyle(unref(ae))},null,14,_hoisted_3$P),createBaseVNode("path",{class:normalizeClass(unref(g).be("circle","path")),d:unref(V),stroke:unref(oe),fill:"none",opacity:Ce.percentage?1:0,"stroke-linecap":Ce.strokeLinecap,"stroke-width":unref(k),style:normalizeStyle(unref(re))},null,14,_hoisted_4$K)]))],6)),(Ce.showText||Ce.$slots.default)&&!Ce.textInside?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(unref(g).e("text")),style:normalizeStyle({fontSize:`${unref(le)}px`})},[renderSlot(Ce.$slots,"default",{percentage:Ce.percentage},()=>[Ce.status?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(ue))))]),_:1})):(openBlock(),createElementBlock("span",_hoisted_5$D,toDisplayString$1(unref(de)),1))])],6)):createCommentVNode("v-if",!0)],10,_hoisted_1$1v))}});var Progress=_export_sfc$1(_sfc_main$1T,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const ElProgress=withInstall(Progress),rateProps=buildProps({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:definePropType([Array,Object]),default:()=>mutable(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:definePropType([Array,Object]),default:()=>[star_filled_default,star_filled_default,star_filled_default]},voidIcon:{type:iconPropType,default:()=>star_default},disabledVoidIcon:{type:iconPropType,default:()=>star_filled_default},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:definePropType(Array),default:()=>mutable(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:useSizeProp,label:{type:String,default:void 0},clearable:{type:Boolean,default:!1}}),rateEmits={[CHANGE_EVENT]:e=>isNumber$1(e),[UPDATE_MODEL_EVENT]:e=>isNumber$1(e)},_hoisted_1$1u=["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"],_hoisted_2$1k=["onMousemove","onClick"],__default__$v=defineComponent({name:"ElRate"}),_sfc_main$1S=defineComponent({...__default__$v,props:rateProps,emits:rateEmits,setup(e,{expose:n,emit:r}){const g=e;function y(Mn,$n){const Nn=Fn=>isObject$3(Fn),kn=Object.keys($n).map(Fn=>+Fn).filter(Fn=>{const Tn=$n[Fn];return(Nn(Tn)?Tn.excluded:!1)?Mn<Fn:Mn<=Fn}).sort((Fn,Tn)=>Fn-Tn),jn=$n[kn[0]];return Nn(jn)&&jn.value||jn}const k=inject(formContextKey,void 0),$=inject(formItemContextKey,void 0),V=useFormSize(),L=useNamespace("rate"),{inputId:z,isLabeledByFormItem:j}=useFormItemInputId(g,{formItemContext:$}),ae=ref(g.modelValue),re=ref(-1),oe=ref(!0),ue=computed(()=>[L.b(),L.m(V.value)]),le=computed(()=>g.disabled||k?.disabled),de=computed(()=>L.cssVarBlock({"void-color":g.voidColor,"disabled-void-color":g.disabledVoidColor,"fill-color":Ne.value})),he=computed(()=>{let Mn="";return g.showScore?Mn=g.scoreTemplate.replace(/\{\s*value\s*\}/,le.value?`${g.modelValue}`:`${ae.value}`):g.showText&&(Mn=g.texts[Math.ceil(ae.value)-1]),Mn}),_e=computed(()=>g.modelValue*100-Math.floor(g.modelValue)*100),Ce=computed(()=>isArray$3(g.colors)?{[g.lowThreshold]:g.colors[0],[g.highThreshold]:{value:g.colors[1],excluded:!0},[g.max]:g.colors[2]}:g.colors),Ne=computed(()=>{const Mn=y(ae.value,Ce.value);return isObject$3(Mn)?"":Mn}),$e=computed(()=>{let Mn="";return le.value?Mn=`${_e.value}%`:g.allowHalf&&(Mn="50%"),{color:Ne.value,width:Mn}}),xe=computed(()=>{let Mn=isArray$3(g.icons)?[...g.icons]:{...g.icons};return Mn=markRaw(Mn),isArray$3(Mn)?{[g.lowThreshold]:Mn[0],[g.highThreshold]:{value:Mn[1],excluded:!0},[g.max]:Mn[2]}:Mn}),Ie=computed(()=>y(g.modelValue,xe.value)),ze=computed(()=>le.value?isString$3(g.disabledVoidIcon)?g.disabledVoidIcon:markRaw(g.disabledVoidIcon):isString$3(g.voidIcon)?g.voidIcon:markRaw(g.voidIcon)),qe=computed(()=>y(ae.value,xe.value));function Et(Mn){const $n=le.value&&_e.value>0&&Mn-1<g.modelValue&&Mn>g.modelValue,Nn=g.allowHalf&&oe.value&&Mn-.5<=ae.value&&Mn>ae.value;return $n||Nn}function _n(Mn){g.clearable&&Mn===g.modelValue&&(Mn=0),r(UPDATE_MODEL_EVENT,Mn),g.modelValue!==Mn&&r("change",Mn)}function Dt(Mn){le.value||(g.allowHalf&&oe.value?_n(ae.value):_n(Mn))}function Sn(Mn){if(le.value)return;let $n=ae.value;const Nn=Mn.code;return Nn===EVENT_CODE.up||Nn===EVENT_CODE.right?(g.allowHalf?$n+=.5:$n+=1,Mn.stopPropagation(),Mn.preventDefault()):(Nn===EVENT_CODE.left||Nn===EVENT_CODE.down)&&(g.allowHalf?$n-=.5:$n-=1,Mn.stopPropagation(),Mn.preventDefault()),$n=$n<0?0:$n,$n=$n>g.max?g.max:$n,r(UPDATE_MODEL_EVENT,$n),r("change",$n),$n}function hn(Mn,$n){if(!le.value){if(g.allowHalf&&$n){let Nn=$n.target;hasClass(Nn,L.e("item"))&&(Nn=Nn.querySelector(`.${L.e("icon")}`)),(Nn.clientWidth===0||hasClass(Nn,L.e("decimal")))&&(Nn=Nn.parentNode),oe.value=$n.offsetX*2<=Nn.clientWidth,ae.value=oe.value?Mn-.5:Mn}else ae.value=Mn;re.value=Mn}}function Vn(){le.value||(g.allowHalf&&(oe.value=g.modelValue!==Math.floor(g.modelValue)),ae.value=g.modelValue,re.value=-1)}return watch(()=>g.modelValue,Mn=>{ae.value=Mn,oe.value=g.modelValue!==Math.floor(g.modelValue)}),g.modelValue||r(UPDATE_MODEL_EVENT,0),n({setCurrentValue:hn,resetCurrentValue:Vn}),(Mn,$n)=>{var Nn;return openBlock(),createElementBlock("div",{id:unref(z),class:normalizeClass([unref(ue),unref(L).is("disabled",unref(le))]),role:"slider","aria-label":unref(j)?void 0:Mn.label||"rating","aria-labelledby":unref(j)?(Nn=unref($))==null?void 0:Nn.labelId:void 0,"aria-valuenow":ae.value,"aria-valuetext":unref(he)||void 0,"aria-valuemin":"0","aria-valuemax":Mn.max,tabindex:"0",style:normalizeStyle(unref(de)),onKeydown:Sn},[(openBlock(!0),createElementBlock(Fragment,null,renderList(Mn.max,(kn,jn)=>(openBlock(),createElementBlock("span",{key:jn,class:normalizeClass(unref(L).e("item")),onMousemove:Fn=>hn(kn,Fn),onMouseleave:Vn,onClick:Fn=>Dt(kn)},[createVNode(unref(ElIcon),{class:normalizeClass([unref(L).e("icon"),{hover:re.value===kn},unref(L).is("active",kn<=ae.value)])},{default:withCtx(()=>[Et(kn)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:0},[withDirectives((openBlock(),createBlock(resolveDynamicComponent(unref(qe)),null,null,512)),[[vShow,kn<=ae.value]]),withDirectives((openBlock(),createBlock(resolveDynamicComponent(unref(ze)),null,null,512)),[[vShow,!(kn<=ae.value)]])],64)),Et(kn)?(openBlock(),createBlock(unref(ElIcon),{key:1,style:normalizeStyle(unref($e)),class:normalizeClass([unref(L).e("icon"),unref(L).e("decimal")])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(Ie))))]),_:1},8,["style","class"])):createCommentVNode("v-if",!0)]),_:2},1032,["class"])],42,_hoisted_2$1k))),128)),Mn.showText||Mn.showScore?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(L).e("text"))},toDisplayString$1(unref(he)),3)):createCommentVNode("v-if",!0)],46,_hoisted_1$1u)}}});var Rate=_export_sfc$1(_sfc_main$1S,[["__file","/home/runner/work/element-plus/element-plus/packages/components/rate/src/rate.vue"]]);const ElRate=withInstall(Rate),IconMap={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},IconComponentMap={[IconMap.success]:circle_check_filled_default,[IconMap.warning]:warning_filled_default,[IconMap.error]:circle_close_filled_default,[IconMap.info]:info_filled_default},resultProps=buildProps({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["success","warning","info","error"],default:"info"}}),__default__$u=defineComponent({name:"ElResult"}),_sfc_main$1R=defineComponent({...__default__$u,props:resultProps,setup(e){const n=e,r=useNamespace("result"),g=computed(()=>{const y=n.icon,k=y&&IconMap[y]?IconMap[y]:"icon-info",$=IconComponentMap[k]||IconComponentMap["icon-info"];return{class:k,component:$}});return(y,k)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(r).b())},[createBaseVNode("div",{class:normalizeClass(unref(r).e("icon"))},[renderSlot(y.$slots,"icon",{},()=>[unref(g).component?(openBlock(),createBlock(resolveDynamicComponent(unref(g).component),{key:0,class:normalizeClass(unref(g).class)},null,8,["class"])):createCommentVNode("v-if",!0)])],2),y.title||y.$slots.title?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(r).e("title"))},[renderSlot(y.$slots,"title",{},()=>[createBaseVNode("p",null,toDisplayString$1(y.title),1)])],2)):createCommentVNode("v-if",!0),y.subTitle||y.$slots["sub-title"]?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(r).e("subtitle"))},[renderSlot(y.$slots,"sub-title",{},()=>[createBaseVNode("p",null,toDisplayString$1(y.subTitle),1)])],2)):createCommentVNode("v-if",!0),y.$slots.extra?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(unref(r).e("extra"))},[renderSlot(y.$slots,"extra")],2)):createCommentVNode("v-if",!0)],2))}});var Result=_export_sfc$1(_sfc_main$1R,[["__file","/home/runner/work/element-plus/element-plus/packages/components/result/src/result.vue"]]);const ElResult=withInstall(Result);var safeIsNaN=Number.isNaN||function(n){return typeof n=="number"&&n!==n};function isEqual(e,n){return!!(e===n||safeIsNaN(e)&&safeIsNaN(n))}function areInputsEqual(e,n){if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(!isEqual(e[r],n[r]))return!1;return!0}function memoizeOne(e,n){n===void 0&&(n=areInputsEqual);var r=null;function g(){for(var y=[],k=0;k<arguments.length;k++)y[k]=arguments[k];if(r&&r.lastThis===this&&n(y,r.lastArgs))return r.lastResult;var $=e.apply(this,y);return r={lastResult:$,lastArgs:y,lastThis:this},$}return g.clear=function(){r=null},g}const useCache=()=>{const n=getCurrentInstance().proxy.$props;return computed(()=>{const r=(g,y,k)=>({});return n.perfMode?memoize(r):memoizeOne(r)})},DEFAULT_DYNAMIC_LIST_ITEM_SIZE=50,ITEM_RENDER_EVT="itemRendered",SCROLL_EVT="scroll",FORWARD="forward",BACKWARD="backward",AUTO_ALIGNMENT="auto",SMART_ALIGNMENT="smart",START_ALIGNMENT="start",CENTERED_ALIGNMENT="center",END_ALIGNMENT="end",HORIZONTAL="horizontal",VERTICAL="vertical",LTR$1="ltr",RTL$1="rtl",RTL_OFFSET_NAG="negative",RTL_OFFSET_POS_ASC="positive-ascending",RTL_OFFSET_POS_DESC="positive-descending",ScrollbarDirKey={[HORIZONTAL]:"left",[VERTICAL]:"top"},SCROLLBAR_MIN_SIZE=20,LayoutKeys={[HORIZONTAL]:"deltaX",[VERTICAL]:"deltaY"},useWheel=({atEndEdge:e,atStartEdge:n,layout:r},g)=>{let y,k=0;const $=L=>L<0&&n.value||L>0&&e.value;return{hasReachedEdge:$,onWheel:L=>{cAF(y);const z=L[LayoutKeys[r.value]];$(k)&&$(k+z)||(k+=z,isFirefox()||L.preventDefault(),y=rAF(()=>{g(k),k=0}))}}},itemSize$1=buildProp({type:definePropType([Number,Function]),required:!0}),estimatedItemSize=buildProp({type:Number}),cache$2=buildProp({type:Number,default:2}),direction=buildProp({type:String,values:["ltr","rtl"],default:"ltr"}),initScrollOffset=buildProp({type:Number,default:0}),total=buildProp({type:Number,required:!0}),layout=buildProp({type:String,values:["horizontal","vertical"],default:VERTICAL}),virtualizedProps=buildProps({className:{type:String,default:""},containerElement:{type:definePropType([String,Object]),default:"div"},data:{type:definePropType(Array),default:()=>mutable([])},direction,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:definePropType([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),virtualizedListProps=buildProps({cache:cache$2,estimatedItemSize,layout,initScrollOffset,total,itemSize:itemSize$1,...virtualizedProps}),scrollbarSize={type:Number,default:6},startGap={type:Number,default:0},endGap={type:Number,default:2},virtualizedGridProps=buildProps({columnCache:cache$2,columnWidth:itemSize$1,estimatedColumnWidth:estimatedItemSize,estimatedRowHeight:estimatedItemSize,initScrollLeft:initScrollOffset,initScrollTop:initScrollOffset,itemKey:{type:definePropType(Function),default:({columnIndex:e,rowIndex:n})=>`${n}:${e}`},rowCache:cache$2,rowHeight:itemSize$1,totalColumn:total,totalRow:total,hScrollbarSize:scrollbarSize,vScrollbarSize:scrollbarSize,scrollbarStartGap:startGap,scrollbarEndGap:endGap,role:String,...virtualizedProps}),virtualizedScrollbarProps=buildProps({alwaysOn:Boolean,class:String,layout,total,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize,startGap,endGap,visible:Boolean}),getScrollDir=(e,n)=>e<n?FORWARD:BACKWARD,isHorizontal=e=>e===LTR$1||e===RTL$1||e===HORIZONTAL,isRTL=e=>e===RTL$1;let cachedRTLResult=null;function getRTLOffsetType(e=!1){if(cachedRTLResult===null||e){const n=document.createElement("div"),r=n.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";const g=document.createElement("div"),y=g.style;return y.width="100px",y.height="100px",n.appendChild(g),document.body.appendChild(n),n.scrollLeft>0?cachedRTLResult=RTL_OFFSET_POS_DESC:(n.scrollLeft=1,n.scrollLeft===0?cachedRTLResult=RTL_OFFSET_NAG:cachedRTLResult=RTL_OFFSET_POS_ASC),document.body.removeChild(n),cachedRTLResult}return cachedRTLResult}function renderThumbStyle({move:e,size:n,bar:r},g){const y={},k=`translate${r.axis}(${e}px)`;return y[r.size]=n,y.transform=k,y.msTransform=k,y.webkitTransform=k,g==="horizontal"?y.height="100%":y.width="100%",y}const ScrollBar=defineComponent({name:"ElVirtualScrollBar",props:virtualizedScrollbarProps,emits:["scroll","start-move","stop-move"],setup(e,{emit:n}){const r=computed(()=>e.startGap+e.endGap),g=useNamespace("virtual-scrollbar"),y=useNamespace("scrollbar"),k=ref(),$=ref();let V=null,L=null;const z=reactive({isDragging:!1,traveled:0}),j=computed(()=>BAR_MAP[e.layout]),ae=computed(()=>e.clientSize-unref(r)),re=computed(()=>({position:"absolute",width:`${HORIZONTAL===e.layout?ae.value:e.scrollbarSize}px`,height:`${HORIZONTAL===e.layout?e.scrollbarSize:ae.value}px`,[ScrollbarDirKey[e.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),oe=computed(()=>{const xe=e.ratio,Ie=e.clientSize;if(xe>=100)return Number.POSITIVE_INFINITY;if(xe>=50)return xe*Ie/100;const ze=Ie/3;return Math.floor(Math.min(Math.max(xe*Ie,SCROLLBAR_MIN_SIZE),ze))}),ue=computed(()=>{if(!Number.isFinite(oe.value))return{display:"none"};const xe=`${oe.value}px`;return renderThumbStyle({bar:j.value,size:xe,move:z.traveled},e.layout)}),le=computed(()=>Math.floor(e.clientSize-oe.value-unref(r))),de=()=>{window.addEventListener("mousemove",Ne),window.addEventListener("mouseup",Ce);const xe=unref($);xe&&(L=document.onselectstart,document.onselectstart=()=>!1,xe.addEventListener("touchmove",Ne),xe.addEventListener("touchend",Ce))},he=()=>{window.removeEventListener("mousemove",Ne),window.removeEventListener("mouseup",Ce),document.onselectstart=L,L=null;const xe=unref($);xe&&(xe.removeEventListener("touchmove",Ne),xe.removeEventListener("touchend",Ce))},_e=xe=>{xe.stopImmediatePropagation(),!(xe.ctrlKey||[1,2].includes(xe.button))&&(z.isDragging=!0,z[j.value.axis]=xe.currentTarget[j.value.offset]-(xe[j.value.client]-xe.currentTarget.getBoundingClientRect()[j.value.direction]),n("start-move"),de())},Ce=()=>{z.isDragging=!1,z[j.value.axis]=0,n("stop-move"),he()},Ne=xe=>{const{isDragging:Ie}=z;if(!Ie||!$.value||!k.value)return;const ze=z[j.value.axis];if(!ze)return;cAF(V);const qe=(k.value.getBoundingClientRect()[j.value.direction]-xe[j.value.client])*-1,Et=$.value[j.value.offset]-ze,_n=qe-Et;V=rAF(()=>{z.traveled=Math.max(e.startGap,Math.min(_n,le.value)),n("scroll",_n,le.value)})},$e=xe=>{const Ie=Math.abs(xe.target.getBoundingClientRect()[j.value.direction]-xe[j.value.client]),ze=$.value[j.value.offset]/2,qe=Ie-ze;z.traveled=Math.max(0,Math.min(qe,le.value)),n("scroll",qe,le.value)};return watch(()=>e.scrollFrom,xe=>{z.isDragging||(z.traveled=Math.ceil(xe*le.value))}),onBeforeUnmount(()=>{he()}),()=>h$1("div",{role:"presentation",ref:k,class:[g.b(),e.class,(e.alwaysOn||z.isDragging)&&"always-on"],style:re.value,onMousedown:withModifiers($e,["stop","prevent"]),onTouchstartPrevent:_e},h$1("div",{ref:$,class:y.e("thumb"),style:ue.value,onMousedown:_e},[]))}}),createList=({name:e,getOffset:n,getItemSize:r,getItemOffset:g,getEstimatedTotalSize:y,getStartIndexForOffset:k,getStopIndexForStartIndex:$,initCache:V,clearCache:L,validateProps:z})=>defineComponent({name:e??"ElVirtualList",props:virtualizedListProps,emits:[ITEM_RENDER_EVT,SCROLL_EVT],setup(j,{emit:ae,expose:re}){z(j);const oe=getCurrentInstance(),ue=useNamespace("vl"),le=ref(V(j,oe)),de=useCache(),he=ref(),_e=ref(),Ce=ref(),Ne=ref({isScrolling:!1,scrollDir:"forward",scrollOffset:isNumber$1(j.initScrollOffset)?j.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:j.scrollbarAlwaysOn}),$e=computed(()=>{const{total:Hn,cache:la}=j,{isScrolling:ca,scrollDir:Zn,scrollOffset:Bn}=unref(Ne);if(Hn===0)return[0,0,0,0];const Wn=k(j,Bn,unref(le)),da=$(j,Wn,Bn,unref(le)),ga=!ca||Zn===BACKWARD?Math.max(1,la):1,Ca=!ca||Zn===FORWARD?Math.max(1,la):1;return[Math.max(0,Wn-ga),Math.max(0,Math.min(Hn-1,da+Ca)),Wn,da]}),xe=computed(()=>y(j,unref(le))),Ie=computed(()=>isHorizontal(j.layout)),ze=computed(()=>[{position:"relative",[`overflow-${Ie.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:j.direction,height:isNumber$1(j.height)?`${j.height}px`:j.height,width:isNumber$1(j.width)?`${j.width}px`:j.width},j.style]),qe=computed(()=>{const Hn=unref(xe),la=unref(Ie);return{height:la?"100%":`${Hn}px`,pointerEvents:unref(Ne).isScrolling?"none":void 0,width:la?`${Hn}px`:"100%"}}),Et=computed(()=>Ie.value?j.width:j.height),{onWheel:_n}=useWheel({atStartEdge:computed(()=>Ne.value.scrollOffset<=0),atEndEdge:computed(()=>Ne.value.scrollOffset>=xe.value),layout:computed(()=>j.layout)},Hn=>{var la,ca;(ca=(la=Ce.value).onMouseUp)==null||ca.call(la),$n(Math.min(Ne.value.scrollOffset+Hn,xe.value-Et.value))}),Dt=()=>{const{total:Hn}=j;if(Hn>0){const[Bn,Wn,da,ga]=unref($e);ae(ITEM_RENDER_EVT,Bn,Wn,da,ga)}const{scrollDir:la,scrollOffset:ca,updateRequested:Zn}=unref(Ne);ae(SCROLL_EVT,la,ca,Zn)},Sn=Hn=>{const{clientHeight:la,scrollHeight:ca,scrollTop:Zn}=Hn.currentTarget,Bn=unref(Ne);if(Bn.scrollOffset===Zn)return;const Wn=Math.max(0,Math.min(Zn,ca-la));Ne.value={...Bn,isScrolling:!0,scrollDir:getScrollDir(Bn.scrollOffset,Wn),scrollOffset:Wn,updateRequested:!1},nextTick(jn)},hn=Hn=>{const{clientWidth:la,scrollLeft:ca,scrollWidth:Zn}=Hn.currentTarget,Bn=unref(Ne);if(Bn.scrollOffset===ca)return;const{direction:Wn}=j;let da=ca;if(Wn===RTL$1)switch(getRTLOffsetType()){case RTL_OFFSET_NAG:{da=-ca;break}case RTL_OFFSET_POS_DESC:{da=Zn-la-ca;break}}da=Math.max(0,Math.min(da,Zn-la)),Ne.value={...Bn,isScrolling:!0,scrollDir:getScrollDir(Bn.scrollOffset,da),scrollOffset:da,updateRequested:!1},nextTick(jn)},Vn=Hn=>{unref(Ie)?hn(Hn):Sn(Hn),Dt()},Mn=(Hn,la)=>{const ca=(xe.value-Et.value)/la*Hn;$n(Math.min(xe.value-Et.value,ca))},$n=Hn=>{Hn=Math.max(Hn,0),Hn!==unref(Ne).scrollOffset&&(Ne.value={...unref(Ne),scrollOffset:Hn,scrollDir:getScrollDir(unref(Ne).scrollOffset,Hn),updateRequested:!0},nextTick(jn))},Nn=(Hn,la=AUTO_ALIGNMENT)=>{const{scrollOffset:ca}=unref(Ne);Hn=Math.max(0,Math.min(Hn,j.total-1)),$n(n(j,Hn,la,ca,unref(le)))},kn=Hn=>{const{direction:la,itemSize:ca,layout:Zn}=j,Bn=de.value(L&&ca,L&&Zn,L&&la);let Wn;if(hasOwn$1(Bn,String(Hn)))Wn=Bn[Hn];else{const da=g(j,Hn,unref(le)),ga=r(j,Hn,unref(le)),Ca=unref(Ie),ra=la===RTL$1,Gn=Ca?da:0;Bn[Hn]=Wn={position:"absolute",left:ra?void 0:`${Gn}px`,right:ra?`${Gn}px`:void 0,top:Ca?0:`${da}px`,height:Ca?"100%":`${ga}px`,width:Ca?`${ga}px`:"100%"}}return Wn},jn=()=>{Ne.value.isScrolling=!1,nextTick(()=>{de.value(-1,null,null)})},Fn=()=>{const Hn=he.value;Hn&&(Hn.scrollTop=0)};onMounted(()=>{if(!isClient)return;const{initScrollOffset:Hn}=j,la=unref(he);isNumber$1(Hn)&&la&&(unref(Ie)?la.scrollLeft=Hn:la.scrollTop=Hn),Dt()}),onUpdated(()=>{const{direction:Hn,layout:la}=j,{scrollOffset:ca,updateRequested:Zn}=unref(Ne),Bn=unref(he);if(Zn&&Bn)if(la===HORIZONTAL)if(Hn===RTL$1)switch(getRTLOffsetType()){case RTL_OFFSET_NAG:{Bn.scrollLeft=-ca;break}case RTL_OFFSET_POS_ASC:{Bn.scrollLeft=ca;break}default:{const{clientWidth:Wn,scrollWidth:da}=Bn;Bn.scrollLeft=da-Wn-ca;break}}else Bn.scrollLeft=ca;else Bn.scrollTop=ca});const Tn={ns:ue,clientSize:Et,estimatedTotalSize:xe,windowStyle:ze,windowRef:he,innerRef:_e,innerStyle:qe,itemsToRender:$e,scrollbarRef:Ce,states:Ne,getItemStyle:kn,onScroll:Vn,onScrollbarScroll:Mn,onWheel:_n,scrollTo:$n,scrollToItem:Nn,resetScrollTop:Fn};return re({windowRef:he,innerRef:_e,getItemStyleCache:de,scrollTo:$n,scrollToItem:Nn,resetScrollTop:Fn,states:Ne}),Tn},render(j){var ae;const{$slots:re,className:oe,clientSize:ue,containerElement:le,data:de,getItemStyle:he,innerElement:_e,itemsToRender:Ce,innerStyle:Ne,layout:$e,total:xe,onScroll:Ie,onScrollbarScroll:ze,onWheel:qe,states:Et,useIsScrolling:_n,windowStyle:Dt,ns:Sn}=j,[hn,Vn]=Ce,Mn=resolveDynamicComponent(le),$n=resolveDynamicComponent(_e),Nn=[];if(xe>0)for(let Tn=hn;Tn<=Vn;Tn++)Nn.push((ae=re.default)==null?void 0:ae.call(re,{data:de,key:Tn,index:Tn,isScrolling:_n?Et.isScrolling:void 0,style:he(Tn)}));const kn=[h$1($n,{style:Ne,ref:"innerRef"},isString$3($n)?Nn:{default:()=>Nn})],jn=h$1(ScrollBar,{ref:"scrollbarRef",clientSize:ue,layout:$e,onScroll:ze,ratio:ue*100/this.estimatedTotalSize,scrollFrom:Et.scrollOffset/(this.estimatedTotalSize-ue),total:xe}),Fn=h$1(Mn,{class:[Sn.e("window"),oe],style:Dt,onScroll:Ie,onWheel:qe,ref:"windowRef",key:0},isString$3(Mn)?[kn]:{default:()=>[kn]});return h$1("div",{key:0,class:[Sn.e("wrapper"),Et.scrollbarAlwaysOn?"always-on":""]},[Fn,jn])}}),FixedSizeList=createList({name:"ElFixedSizeList",getItemOffset:({itemSize:e},n)=>n*e,getItemSize:({itemSize:e})=>e,getEstimatedTotalSize:({total:e,itemSize:n})=>n*e,getOffset:({height:e,total:n,itemSize:r,layout:g,width:y},k,$,V)=>{const L=isHorizontal(g)?y:e,z=Math.max(0,n*r-L),j=Math.min(z,k*r),ae=Math.max(0,(k+1)*r-L);switch($===SMART_ALIGNMENT&&(V>=ae-L&&V<=j+L?$=AUTO_ALIGNMENT:$=CENTERED_ALIGNMENT),$){case START_ALIGNMENT:return j;case END_ALIGNMENT:return ae;case CENTERED_ALIGNMENT:{const re=Math.round(ae+(j-ae)/2);return re<Math.ceil(L/2)?0:re>z+Math.floor(L/2)?z:re}case AUTO_ALIGNMENT:default:return V>=ae&&V<=j?V:V<ae?ae:j}},getStartIndexForOffset:({total:e,itemSize:n},r)=>Math.max(0,Math.min(e-1,Math.floor(r/n))),getStopIndexForStartIndex:({height:e,total:n,itemSize:r,layout:g,width:y},k,$)=>{const V=k*r,L=isHorizontal(g)?y:e,z=Math.ceil((L+$-V)/r);return Math.max(0,Math.min(n-1,k+z-1))},initCache(){},clearCache:!0,validateProps(){}}),getItemFromCache$1=(e,n,r)=>{const{itemSize:g}=e,{items:y,lastVisitedIndex:k}=r;if(n>k){let $=0;if(k>=0){const V=y[k];$=V.offset+V.size}for(let V=k+1;V<=n;V++){const L=g(V);y[V]={offset:$,size:L},$+=L}r.lastVisitedIndex=n}return y[n]},findItem$1=(e,n,r)=>{const{items:g,lastVisitedIndex:y}=n;return(y>0?g[y].offset:0)>=r?bs$1(e,n,0,y,r):es$1(e,n,Math.max(0,y),r)},bs$1=(e,n,r,g,y)=>{for(;r<=g;){const k=r+Math.floor((g-r)/2),$=getItemFromCache$1(e,k,n).offset;if($===y)return k;$<y?r=k+1:$>y&&(g=k-1)}return Math.max(0,r-1)},es$1=(e,n,r,g)=>{const{total:y}=e;let k=1;for(;r<y&&getItemFromCache$1(e,r,n).offset<g;)r+=k,k*=2;return bs$1(e,n,Math.floor(r/2),Math.min(r,y-1),g)},getEstimatedTotalSize=({total:e},{items:n,estimatedItemSize:r,lastVisitedIndex:g})=>{let y=0;if(g>=e&&(g=e-1),g>=0){const V=n[g];y=V.offset+V.size}const $=(e-g-1)*r;return y+$},DynamicSizeList=createList({name:"ElDynamicSizeList",getItemOffset:(e,n,r)=>getItemFromCache$1(e,n,r).offset,getItemSize:(e,n,{items:r})=>r[n].size,getEstimatedTotalSize,getOffset:(e,n,r,g,y)=>{const{height:k,layout:$,width:V}=e,L=isHorizontal($)?V:k,z=getItemFromCache$1(e,n,y),j=getEstimatedTotalSize(e,y),ae=Math.max(0,Math.min(j-L,z.offset)),re=Math.max(0,z.offset-L+z.size);switch(r===SMART_ALIGNMENT&&(g>=re-L&&g<=ae+L?r=AUTO_ALIGNMENT:r=CENTERED_ALIGNMENT),r){case START_ALIGNMENT:return ae;case END_ALIGNMENT:return re;case CENTERED_ALIGNMENT:return Math.round(re+(ae-re)/2);case AUTO_ALIGNMENT:default:return g>=re&&g<=ae?g:g<re?re:ae}},getStartIndexForOffset:(e,n,r)=>findItem$1(e,r,n),getStopIndexForStartIndex:(e,n,r,g)=>{const{height:y,total:k,layout:$,width:V}=e,L=isHorizontal($)?V:y,z=getItemFromCache$1(e,n,g),j=r+L;let ae=z.offset+z.size,re=n;for(;re<k-1&&ae<j;)re++,ae+=getItemFromCache$1(e,re,g).size;return re},initCache({estimatedItemSize:e=DEFAULT_DYNAMIC_LIST_ITEM_SIZE},n){const r={items:{},estimatedItemSize:e,lastVisitedIndex:-1};return r.clearCacheAfterIndex=(g,y=!0)=>{var k,$;r.lastVisitedIndex=Math.min(r.lastVisitedIndex,g-1),(k=n.exposed)==null||k.getItemStyleCache(-1),y&&(($=n.proxy)==null||$.$forceUpdate())},r},clearCache:!1,validateProps:({itemSize:e})=>{}}),useGridWheel=({atXEndEdge:e,atXStartEdge:n,atYEndEdge:r,atYStartEdge:g},y)=>{let k=null,$=0,V=0;const L=(j,ae)=>{const re=j<=0&&n.value||j>=0&&e.value,oe=ae<=0&&g.value||ae>=0&&r.value;return re&&oe};return{hasReachedEdge:L,onWheel:j=>{cAF(k);let ae=j.deltaX,re=j.deltaY;Math.abs(ae)>Math.abs(re)?re=0:ae=0,j.shiftKey&&re!==0&&(ae=re,re=0),!(L($,V)&&L($+ae,V+re))&&($+=ae,V+=re,j.preventDefault(),k=rAF(()=>{y($,V),$=0,V=0}))}}},createGrid=({name:e,clearCache:n,getColumnPosition:r,getColumnStartIndexForOffset:g,getColumnStopIndexForStartIndex:y,getEstimatedTotalHeight:k,getEstimatedTotalWidth:$,getColumnOffset:V,getRowOffset:L,getRowPosition:z,getRowStartIndexForOffset:j,getRowStopIndexForStartIndex:ae,initCache:re,injectToInstance:oe,validateProps:ue})=>defineComponent({name:e??"ElVirtualList",props:virtualizedGridProps,emits:[ITEM_RENDER_EVT,SCROLL_EVT],setup(le,{emit:de,expose:he,slots:_e}){const Ce=useNamespace("vl");ue(le);const Ne=getCurrentInstance(),$e=ref(re(le,Ne));oe?.(Ne,$e);const xe=ref(),Ie=ref(),ze=ref(),qe=ref(null),Et=ref({isScrolling:!1,scrollLeft:isNumber$1(le.initScrollLeft)?le.initScrollLeft:0,scrollTop:isNumber$1(le.initScrollTop)?le.initScrollTop:0,updateRequested:!1,xAxisScrollDir:FORWARD,yAxisScrollDir:FORWARD}),_n=useCache(),Dt=computed(()=>Number.parseInt(`${le.height}`,10)),Sn=computed(()=>Number.parseInt(`${le.width}`,10)),hn=computed(()=>{const{totalColumn:kt,totalRow:At,columnCache:Dn}=le,{isScrolling:Xn,xAxisScrollDir:aa,scrollLeft:sa}=unref(Et);if(kt===0||At===0)return[0,0,0,0];const ia=g(le,sa,unref($e)),ma=y(le,ia,sa,unref($e)),ua=!Xn||aa===BACKWARD?Math.max(1,Dn):1,pe=!Xn||aa===FORWARD?Math.max(1,Dn):1;return[Math.max(0,ia-ua),Math.max(0,Math.min(kt-1,ma+pe)),ia,ma]}),Vn=computed(()=>{const{totalColumn:kt,totalRow:At,rowCache:Dn}=le,{isScrolling:Xn,yAxisScrollDir:aa,scrollTop:sa}=unref(Et);if(kt===0||At===0)return[0,0,0,0];const ia=j(le,sa,unref($e)),ma=ae(le,ia,sa,unref($e)),ua=!Xn||aa===BACKWARD?Math.max(1,Dn):1,pe=!Xn||aa===FORWARD?Math.max(1,Dn):1;return[Math.max(0,ia-ua),Math.max(0,Math.min(At-1,ma+pe)),ia,ma]}),Mn=computed(()=>k(le,unref($e))),$n=computed(()=>$(le,unref($e))),Nn=computed(()=>{var kt;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:le.direction,height:isNumber$1(le.height)?`${le.height}px`:le.height,width:isNumber$1(le.width)?`${le.width}px`:le.width},(kt=le.style)!=null?kt:{}]}),kn=computed(()=>{const kt=`${unref($n)}px`;return{height:`${unref(Mn)}px`,pointerEvents:unref(Et).isScrolling?"none":void 0,width:kt}}),jn=()=>{const{totalColumn:kt,totalRow:At}=le;if(kt>0&&At>0){const[ma,ua,pe,Oe]=unref(hn),[Ve,Ue,Pt,Lt]=unref(Vn);de(ITEM_RENDER_EVT,{columnCacheStart:ma,columnCacheEnd:ua,rowCacheStart:Ve,rowCacheEnd:Ue,columnVisibleStart:pe,columnVisibleEnd:Oe,rowVisibleStart:Pt,rowVisibleEnd:Lt})}const{scrollLeft:Dn,scrollTop:Xn,updateRequested:aa,xAxisScrollDir:sa,yAxisScrollDir:ia}=unref(Et);de(SCROLL_EVT,{xAxisScrollDir:sa,scrollLeft:Dn,yAxisScrollDir:ia,scrollTop:Xn,updateRequested:aa})},Fn=kt=>{const{clientHeight:At,clientWidth:Dn,scrollHeight:Xn,scrollLeft:aa,scrollTop:sa,scrollWidth:ia}=kt.currentTarget,ma=unref(Et);if(ma.scrollTop===sa&&ma.scrollLeft===aa)return;let ua=aa;if(isRTL(le.direction))switch(getRTLOffsetType()){case RTL_OFFSET_NAG:ua=-aa;break;case RTL_OFFSET_POS_DESC:ua=ia-Dn-aa;break}Et.value={...ma,isScrolling:!0,scrollLeft:ua,scrollTop:Math.max(0,Math.min(sa,Xn-At)),updateRequested:!0,xAxisScrollDir:getScrollDir(ma.scrollLeft,ua),yAxisScrollDir:getScrollDir(ma.scrollTop,sa)},nextTick(()=>Wn()),da(),jn()},Tn=(kt,At)=>{const Dn=unref(Dt),Xn=(Mn.value-Dn)/At*kt;ca({scrollTop:Math.min(Mn.value-Dn,Xn)})},Hn=(kt,At)=>{const Dn=unref(Sn),Xn=($n.value-Dn)/At*kt;ca({scrollLeft:Math.min($n.value-Dn,Xn)})},{onWheel:la}=useGridWheel({atXStartEdge:computed(()=>Et.value.scrollLeft<=0),atXEndEdge:computed(()=>Et.value.scrollLeft>=$n.value-unref(Sn)),atYStartEdge:computed(()=>Et.value.scrollTop<=0),atYEndEdge:computed(()=>Et.value.scrollTop>=Mn.value-unref(Dt))},(kt,At)=>{var Dn,Xn,aa,sa;(Xn=(Dn=Ie.value)==null?void 0:Dn.onMouseUp)==null||Xn.call(Dn),(sa=(aa=ze.value)==null?void 0:aa.onMouseUp)==null||sa.call(aa);const ia=unref(Sn),ma=unref(Dt);ca({scrollLeft:Math.min(Et.value.scrollLeft+kt,$n.value-ia),scrollTop:Math.min(Et.value.scrollTop+At,Mn.value-ma)})}),ca=({scrollLeft:kt=Et.value.scrollLeft,scrollTop:At=Et.value.scrollTop})=>{kt=Math.max(kt,0),At=Math.max(At,0);const Dn=unref(Et);At===Dn.scrollTop&&kt===Dn.scrollLeft||(Et.value={...Dn,xAxisScrollDir:getScrollDir(Dn.scrollLeft,kt),yAxisScrollDir:getScrollDir(Dn.scrollTop,At),scrollLeft:kt,scrollTop:At,updateRequested:!0},nextTick(()=>Wn()),da(),jn())},Zn=(kt=0,At=0,Dn=AUTO_ALIGNMENT)=>{const Xn=unref(Et);At=Math.max(0,Math.min(At,le.totalColumn-1)),kt=Math.max(0,Math.min(kt,le.totalRow-1));const aa=getScrollBarWidth(Ce.namespace.value),sa=unref($e),ia=k(le,sa),ma=$(le,sa);ca({scrollLeft:V(le,At,Dn,Xn.scrollLeft,sa,ma>le.width?aa:0),scrollTop:L(le,kt,Dn,Xn.scrollTop,sa,ia>le.height?aa:0)})},Bn=(kt,At)=>{const{columnWidth:Dn,direction:Xn,rowHeight:aa}=le,sa=_n.value(n&&Dn,n&&aa,n&&Xn),ia=`${kt},${At}`;if(hasOwn$1(sa,ia))return sa[ia];{const[,ma]=r(le,At,unref($e)),ua=unref($e),pe=isRTL(Xn),[Oe,Ve]=z(le,kt,ua),[Ue]=r(le,At,ua);return sa[ia]={position:"absolute",left:pe?void 0:`${ma}px`,right:pe?`${ma}px`:void 0,top:`${Ve}px`,height:`${Oe}px`,width:`${Ue}px`},sa[ia]}},Wn=()=>{Et.value.isScrolling=!1,nextTick(()=>{_n.value(-1,null,null)})};onMounted(()=>{if(!isClient)return;const{initScrollLeft:kt,initScrollTop:At}=le,Dn=unref(xe);Dn&&(isNumber$1(kt)&&(Dn.scrollLeft=kt),isNumber$1(At)&&(Dn.scrollTop=At)),jn()});const da=()=>{const{direction:kt}=le,{scrollLeft:At,scrollTop:Dn,updateRequested:Xn}=unref(Et),aa=unref(xe);if(Xn&&aa){if(kt===RTL$1)switch(getRTLOffsetType()){case RTL_OFFSET_NAG:{aa.scrollLeft=-At;break}case RTL_OFFSET_POS_ASC:{aa.scrollLeft=At;break}default:{const{clientWidth:sa,scrollWidth:ia}=aa;aa.scrollLeft=ia-sa-At;break}}else aa.scrollLeft=Math.max(0,At);aa.scrollTop=Math.max(0,Dn)}},{resetAfterColumnIndex:ga,resetAfterRowIndex:Ca,resetAfter:ra}=Ne.proxy;he({windowRef:xe,innerRef:qe,getItemStyleCache:_n,scrollTo:ca,scrollToItem:Zn,states:Et,resetAfterColumnIndex:ga,resetAfterRowIndex:Ca,resetAfter:ra});const Gn=()=>{const{scrollbarAlwaysOn:kt,scrollbarStartGap:At,scrollbarEndGap:Dn,totalColumn:Xn,totalRow:aa}=le,sa=unref(Sn),ia=unref(Dt),ma=unref($n),ua=unref(Mn),{scrollLeft:pe,scrollTop:Oe}=unref(Et),Ve=h$1(ScrollBar,{ref:Ie,alwaysOn:kt,startGap:At,endGap:Dn,class:Ce.e("horizontal"),clientSize:sa,layout:"horizontal",onScroll:Hn,ratio:sa*100/ma,scrollFrom:pe/(ma-sa),total:aa,visible:!0}),Ue=h$1(ScrollBar,{ref:ze,alwaysOn:kt,startGap:At,endGap:Dn,class:Ce.e("vertical"),clientSize:ia,layout:"vertical",onScroll:Tn,ratio:ia*100/ua,scrollFrom:Oe/(ua-ia),total:Xn,visible:!0});return{horizontalScrollbar:Ve,verticalScrollbar:Ue}},vn=()=>{var kt;const[At,Dn]=unref(hn),[Xn,aa]=unref(Vn),{data:sa,totalColumn:ia,totalRow:ma,useIsScrolling:ua,itemKey:pe}=le,Oe=[];if(ma>0&&ia>0)for(let Ve=Xn;Ve<=aa;Ve++)for(let Ue=At;Ue<=Dn;Ue++)Oe.push((kt=_e.default)==null?void 0:kt.call(_e,{columnIndex:Ue,data:sa,key:pe({columnIndex:Ue,data:sa,rowIndex:Ve}),isScrolling:ua?unref(Et).isScrolling:void 0,style:Bn(Ve,Ue),rowIndex:Ve}));return Oe},Kn=()=>{const kt=resolveDynamicComponent(le.innerElement),At=vn();return[h$1(kt,{style:unref(kn),ref:qe},isString$3(kt)?At:{default:()=>At})]};return()=>{const kt=resolveDynamicComponent(le.containerElement),{horizontalScrollbar:At,verticalScrollbar:Dn}=Gn(),Xn=Kn();return h$1("div",{key:0,class:Ce.e("wrapper"),role:le.role},[h$1(kt,{class:le.className,style:unref(Nn),onScroll:Fn,onWheel:la,ref:xe},isString$3(kt)?Xn:{default:()=>Xn}),At,Dn])}}}),FixedSizeGrid=createGrid({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:e},n)=>[e,n*e],getRowPosition:({rowHeight:e},n)=>[e,n*e],getEstimatedTotalHeight:({totalRow:e,rowHeight:n})=>n*e,getEstimatedTotalWidth:({totalColumn:e,columnWidth:n})=>n*e,getColumnOffset:({totalColumn:e,columnWidth:n,width:r},g,y,k,$,V)=>{r=Number(r);const L=Math.max(0,e*n-r),z=Math.min(L,g*n),j=Math.max(0,g*n-r+V+n);switch(y==="smart"&&(k>=j-r&&k<=z+r?y=AUTO_ALIGNMENT:y=CENTERED_ALIGNMENT),y){case START_ALIGNMENT:return z;case END_ALIGNMENT:return j;case CENTERED_ALIGNMENT:{const ae=Math.round(j+(z-j)/2);return ae<Math.ceil(r/2)?0:ae>L+Math.floor(r/2)?L:ae}case AUTO_ALIGNMENT:default:return k>=j&&k<=z?k:j>z||k<j?j:z}},getRowOffset:({rowHeight:e,height:n,totalRow:r},g,y,k,$,V)=>{n=Number(n);const L=Math.max(0,r*e-n),z=Math.min(L,g*e),j=Math.max(0,g*e-n+V+e);switch(y===SMART_ALIGNMENT&&(k>=j-n&&k<=z+n?y=AUTO_ALIGNMENT:y=CENTERED_ALIGNMENT),y){case START_ALIGNMENT:return z;case END_ALIGNMENT:return j;case CENTERED_ALIGNMENT:{const ae=Math.round(j+(z-j)/2);return ae<Math.ceil(n/2)?0:ae>L+Math.floor(n/2)?L:ae}case AUTO_ALIGNMENT:default:return k>=j&&k<=z?k:j>z||k<j?j:z}},getColumnStartIndexForOffset:({columnWidth:e,totalColumn:n},r)=>Math.max(0,Math.min(n-1,Math.floor(r/e))),getColumnStopIndexForStartIndex:({columnWidth:e,totalColumn:n,width:r},g,y)=>{const k=g*e,$=Math.ceil((r+y-k)/e);return Math.max(0,Math.min(n-1,g+$-1))},getRowStartIndexForOffset:({rowHeight:e,totalRow:n},r)=>Math.max(0,Math.min(n-1,Math.floor(r/e))),getRowStopIndexForStartIndex:({rowHeight:e,totalRow:n,height:r},g,y)=>{const k=g*e,$=Math.ceil((r+y-k)/e);return Math.max(0,Math.min(n-1,g+$-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:e,rowHeight:n})=>{}}),{max,min,floor}=Math,ACCESS_SIZER_KEY_MAP={column:"columnWidth",row:"rowHeight"},ACCESS_LAST_VISITED_KEY_MAP={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},getItemFromCache=(e,n,r,g)=>{const[y,k,$]=[r[g],e[ACCESS_SIZER_KEY_MAP[g]],r[ACCESS_LAST_VISITED_KEY_MAP[g]]];if(n>$){let V=0;if($>=0){const L=y[$];V=L.offset+L.size}for(let L=$+1;L<=n;L++){const z=k(L);y[L]={offset:V,size:z},V+=z}r[ACCESS_LAST_VISITED_KEY_MAP[g]]=n}return y[n]},bs=(e,n,r,g,y,k)=>{for(;r<=g;){const $=r+floor((g-r)/2),V=getItemFromCache(e,$,n,k).offset;if(V===y)return $;V<y?r=$+1:g=$-1}return max(0,r-1)},es=(e,n,r,g,y)=>{const k=y==="column"?e.totalColumn:e.totalRow;let $=1;for(;r<k&&getItemFromCache(e,r,n,y).offset<g;)r+=$,$*=2;return bs(e,n,floor(r/2),min(r,k-1),g,y)},findItem=(e,n,r,g)=>{const[y,k]=[n[g],n[ACCESS_LAST_VISITED_KEY_MAP[g]]];return(k>0?y[k].offset:0)>=r?bs(e,n,0,k,r,g):es(e,n,max(0,k),r,g)},getEstimatedTotalHeight=({totalRow:e},{estimatedRowHeight:n,lastVisitedRowIndex:r,row:g})=>{let y=0;if(r>=e&&(r=e-1),r>=0){const V=g[r];y=V.offset+V.size}const $=(e-r-1)*n;return y+$},getEstimatedTotalWidth=({totalColumn:e},{column:n,estimatedColumnWidth:r,lastVisitedColumnIndex:g})=>{let y=0;if(g>e&&(g=e-1),g>=0){const V=n[g];y=V.offset+V.size}const $=(e-g-1)*r;return y+$},ACCESS_ESTIMATED_SIZE_KEY_MAP={column:getEstimatedTotalWidth,row:getEstimatedTotalHeight},getOffset$2=(e,n,r,g,y,k,$)=>{const[V,L]=[k==="row"?e.height:e.width,ACCESS_ESTIMATED_SIZE_KEY_MAP[k]],z=getItemFromCache(e,n,y,k),j=L(e,y),ae=max(0,min(j-V,z.offset)),re=max(0,z.offset-V+$+z.size);switch(r===SMART_ALIGNMENT&&(g>=re-V&&g<=ae+V?r=AUTO_ALIGNMENT:r=CENTERED_ALIGNMENT),r){case START_ALIGNMENT:return ae;case END_ALIGNMENT:return re;case CENTERED_ALIGNMENT:return Math.round(re+(ae-re)/2);case AUTO_ALIGNMENT:default:return g>=re&&g<=ae?g:re>ae||g<re?re:ae}},DynamicSizeGrid=createGrid({name:"ElDynamicSizeGrid",getColumnPosition:(e,n,r)=>{const g=getItemFromCache(e,n,r,"column");return[g.size,g.offset]},getRowPosition:(e,n,r)=>{const g=getItemFromCache(e,n,r,"row");return[g.size,g.offset]},getColumnOffset:(e,n,r,g,y,k)=>getOffset$2(e,n,r,g,y,"column",k),getRowOffset:(e,n,r,g,y,k)=>getOffset$2(e,n,r,g,y,"row",k),getColumnStartIndexForOffset:(e,n,r)=>findItem(e,r,n,"column"),getColumnStopIndexForStartIndex:(e,n,r,g)=>{const y=getItemFromCache(e,n,g,"column"),k=r+e.width;let $=y.offset+y.size,V=n;for(;V<e.totalColumn-1&&$<k;)V++,$+=getItemFromCache(e,n,g,"column").size;return V},getEstimatedTotalHeight,getEstimatedTotalWidth,getRowStartIndexForOffset:(e,n,r)=>findItem(e,r,n,"row"),getRowStopIndexForStartIndex:(e,n,r,g)=>{const{totalRow:y,height:k}=e,$=getItemFromCache(e,n,g,"row"),V=r+k;let L=$.size+$.offset,z=n;for(;z<y-1&&L<V;)z++,L+=getItemFromCache(e,z,g,"row").size;return z},injectToInstance:(e,n)=>{const r=({columnIndex:k,rowIndex:$},V)=>{var L,z;V=isUndefined(V)?!0:V,isNumber$1(k)&&(n.value.lastVisitedColumnIndex=Math.min(n.value.lastVisitedColumnIndex,k-1)),isNumber$1($)&&(n.value.lastVisitedRowIndex=Math.min(n.value.lastVisitedRowIndex,$-1)),(L=e.exposed)==null||L.getItemStyleCache.value(-1,null,null),V&&((z=e.proxy)==null||z.$forceUpdate())},g=(k,$)=>{r({columnIndex:k},$)},y=(k,$)=>{r({rowIndex:k},$)};Object.assign(e.proxy,{resetAfterColumnIndex:g,resetAfterRowIndex:y,resetAfter:r})},initCache:({estimatedColumnWidth:e=DEFAULT_DYNAMIC_LIST_ITEM_SIZE,estimatedRowHeight:n=DEFAULT_DYNAMIC_LIST_ITEM_SIZE})=>({column:{},estimatedColumnWidth:e,estimatedRowHeight:n,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:e,rowHeight:n})=>{}}),_sfc_main$1Q=defineComponent({props:{item:{type:Object,required:!0},style:Object,height:Number},setup(){return{ns:useNamespace("select")}}});function _sfc_render$7(e,n,r,g,y,k){return e.item.isTitle?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(e.ns.be("group","title")),style:normalizeStyle([e.style,{lineHeight:`${e.height}px`}])},toDisplayString$1(e.item.label),7)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(e.ns.be("group","split")),style:normalizeStyle(e.style)},[createBaseVNode("span",{class:normalizeClass(e.ns.be("group","split-dash")),style:normalizeStyle({top:`${e.height/2}px`})},null,6)],6))}var GroupItem=_export_sfc$1(_sfc_main$1Q,[["render",_sfc_render$7],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/group-item.vue"]]);function useOption(e,{emit:n}){return{hoverItem:()=>{e.disabled||n("hover",e.index)},selectOptionClick:()=>{e.disabled||n("select",e.item,e.index)}}}const SelectProps={allowCreate:Boolean,autocomplete:{type:String,default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:[String,Object],default:circle_close_default},effect:{type:String,default:"light"},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:170},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,label:String,modelValue:[Array,String,Number,Boolean,Object],multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:Array,required:!0},placeholder:{type:String},teleported:useTooltipContentProps.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,size:{type:String,validator:isValidComponentSize},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:{type:Boolean,default:!1},validateEvent:{type:Boolean,default:!0},placement:{type:definePropType(String),values:Ee,default:"bottom-start"}},OptionProps={data:Array,disabled:Boolean,hovering:Boolean,item:Object,index:Number,style:Object,selected:Boolean,created:Boolean},_sfc_main$1P=defineComponent({props:OptionProps,emits:["select","hover"],setup(e,{emit:n}){const r=useNamespace("select"),{hoverItem:g,selectOptionClick:y}=useOption(e,{emit:n});return{ns:r,hoverItem:g,selectOptionClick:y}}}),_hoisted_1$1t=["aria-selected"];function _sfc_render$6(e,n,r,g,y,k){return openBlock(),createElementBlock("li",{"aria-selected":e.selected,style:normalizeStyle(e.style),class:normalizeClass([e.ns.be("dropdown","option-item"),e.ns.is("selected",e.selected),e.ns.is("disabled",e.disabled),e.ns.is("created",e.created),{hover:e.hovering}]),onMouseenter:n[0]||(n[0]=(...$)=>e.hoverItem&&e.hoverItem(...$)),onClick:n[1]||(n[1]=withModifiers((...$)=>e.selectOptionClick&&e.selectOptionClick(...$),["stop"]))},[renderSlot(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},()=>[createBaseVNode("span",null,toDisplayString$1(e.item.label),1)])],46,_hoisted_1$1t)}var OptionItem=_export_sfc$1(_sfc_main$1P,[["render",_sfc_render$6],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/option-item.vue"]]);const selectV2InjectionKey=Symbol("ElSelectV2Injection");var ElSelectMenu=defineComponent({name:"ElSelectDropdown",props:{data:{type:Array,required:!0},hoveringIndex:Number,width:Number},setup(e,{slots:n,expose:r}){const g=inject(selectV2InjectionKey),y=useNamespace("select"),k=ref([]),$=ref(),V=computed(()=>e.data.length);watch(()=>V.value,()=>{var ze,qe;(qe=(ze=g.popper.value).updatePopper)==null||qe.call(ze)});const L=computed(()=>isUndefined(g.props.estimatedOptionHeight)),z=computed(()=>L.value?{itemSize:g.props.itemHeight}:{estimatedSize:g.props.estimatedOptionHeight,itemSize:ze=>k.value[ze]}),j=(ze=[],qe)=>{const{props:{valueKey:Et}}=g;return isObject$3(qe)?ze&&ze.some(_n=>get(_n,Et)===get(qe,Et)):ze.includes(qe)},ae=(ze,qe)=>{if(isObject$3(qe)){const{valueKey:Et}=g.props;return get(ze,Et)===get(qe,Et)}else return ze===qe},re=(ze,qe)=>{const{valueKey:Et}=g.props;return g.props.multiple?j(ze,get(qe,Et)):ae(ze,get(qe,Et))},oe=(ze,qe)=>{const{disabled:Et,multiple:_n,multipleLimit:Dt}=g.props;return Et||!qe&&(_n?Dt>0&&ze.length>=Dt:!1)},ue=ze=>e.hoveringIndex===ze;r({listRef:$,isSized:L,isItemDisabled:oe,isItemHovering:ue,isItemSelected:re,scrollToItem:ze=>{const qe=$.value;qe&&qe.scrollToItem(ze)},resetScrollTop:()=>{const ze=$.value;ze&&ze.resetScrollTop()}});const he=ze=>{const{index:qe,data:Et,style:_n}=ze,Dt=unref(L),{itemSize:Sn,estimatedSize:hn}=unref(z),{modelValue:Vn}=g.props,{onSelect:Mn,onHover:$n}=g,Nn=Et[qe];if(Nn.type==="Group")return createVNode(GroupItem,{item:Nn,style:_n,height:Dt?Sn:hn},null);const kn=re(Vn,Nn),jn=oe(Vn,kn),Fn=ue(qe);return createVNode(OptionItem,mergeProps(ze,{selected:kn,disabled:Nn.disabled||jn,created:!!Nn.created,hovering:Fn,item:Nn,onSelect:Mn,onHover:$n}),{default:Tn=>{var Hn;return((Hn=n.default)==null?void 0:Hn.call(n,Tn))||createVNode("span",null,[Nn.label])}})},{onKeyboardNavigate:_e,onKeyboardSelect:Ce}=g,Ne=()=>{_e("forward")},$e=()=>{_e("backward")},xe=()=>{g.expanded=!1},Ie=ze=>{const{code:qe}=ze,{tab:Et,esc:_n,down:Dt,up:Sn,enter:hn}=EVENT_CODE;switch(qe!==Et&&(ze.preventDefault(),ze.stopPropagation()),qe){case Et:case _n:{xe();break}case Dt:{Ne();break}case Sn:{$e();break}case hn:{Ce();break}}};return()=>{var ze;const{data:qe,width:Et}=e,{height:_n,multiple:Dt,scrollbarAlwaysOn:Sn}=g.props;if(qe.length===0)return createVNode("div",{class:y.b("dropdown"),style:{width:`${Et}px`}},[(ze=n.empty)==null?void 0:ze.call(n)]);const hn=unref(L)?FixedSizeList:DynamicSizeList;return createVNode("div",{class:[y.b("dropdown"),y.is("multiple",Dt)]},[createVNode(hn,mergeProps({ref:$},unref(z),{className:y.be("dropdown","list"),scrollbarAlwaysOn:Sn,data:qe,height:_n,width:Et,total:qe.length,onKeydown:Ie}),{default:Vn=>createVNode(he,Vn,null)})])}}});function useAllowCreate(e,n){const r=ref(0),g=ref(null),y=computed(()=>e.allowCreate&&e.filterable);function k(j){const ae=re=>re.value===j;return e.options&&e.options.some(ae)||n.createdOptions.some(ae)}function $(j){y.value&&(e.multiple&&j.created?r.value++:g.value=j)}function V(j){if(y.value)if(j&&j.length>0&&!k(j)){const ae={value:j,label:j,created:!0,disabled:!1};n.createdOptions.length>=r.value?n.createdOptions[r.value]=ae:n.createdOptions.push(ae)}else if(e.multiple)n.createdOptions.length=r.value;else{const ae=g.value;n.createdOptions.length=0,ae&&ae.created&&n.createdOptions.push(ae)}}function L(j){if(!y.value||!j||!j.created||j.created&&e.reserveKeyword&&n.inputValue===j.label)return;const ae=n.createdOptions.findIndex(re=>re.value===j.value);~ae&&(n.createdOptions.splice(ae,1),r.value--)}function z(){y.value&&(n.createdOptions.length=0,r.value=0)}return{createNewOption:V,removeNewOption:L,selectNewOption:$,clearAllNewOption:z}}const flattenOptions=e=>{const n=[];return e.forEach(r=>{isArray$3(r.options)?(n.push({label:r.label,isTitle:!0,type:"Group"}),r.options.forEach(g=>{n.push(g)}),n.push({type:"Group"})):n.push(r)}),n};function useInput(e){const n=ref(!1);return{handleCompositionStart:()=>{n.value=!0},handleCompositionUpdate:k=>{const $=k.target.value,V=$[$.length-1]||"";n.value=!isKorean(V)},handleCompositionEnd:k=>{n.value&&(n.value=!1,isFunction$3(e)&&e(k))}}}const DEFAULT_INPUT_PLACEHOLDER="",MINIMUM_INPUT_WIDTH=11,TAG_BASE_WIDTH={larget:51,default:42,small:33},useSelect$1=(e,n)=>{const{t:r}=useLocale(),g=useNamespace("select-v2"),y=useNamespace("input"),{form:k,formItem:$}=useFormItem(),V=reactive({inputValue:DEFAULT_INPUT_PLACEHOLDER,displayInputValue:DEFAULT_INPUT_PLACEHOLDER,calculatedWidth:0,cachedPlaceholder:"",cachedOptions:[],createdOptions:[],createdLabel:"",createdSelected:!1,currentPlaceholder:"",hoveringIndex:-1,comboBoxHovering:!1,isOnComposition:!1,isSilentBlur:!1,isComposing:!1,inputLength:20,selectWidth:200,initialInputHeight:0,previousQuery:null,previousValue:void 0,query:"",selectedLabel:"",softFocus:!1,tagInMultiLine:!1}),L=ref(-1),z=ref(-1),j=ref(null),ae=ref(null),re=ref(null),oe=ref(null),ue=ref(null),le=ref(null),de=ref(null),he=ref(!1),_e=computed(()=>e.disabled||k?.disabled),Ce=computed(()=>{const On=Dt.value.length*34;return On>e.height?e.height:On}),Ne=computed(()=>!isNil(e.modelValue)),$e=computed(()=>{const On=e.multiple?Array.isArray(e.modelValue)&&e.modelValue.length>0:Ne.value;return e.clearable&&!_e.value&&V.comboBoxHovering&&On}),xe=computed(()=>e.remote&&e.filterable?"":arrow_up_default),Ie=computed(()=>xe.value&&g.is("reverse",he.value)),ze=computed(()=>$?.validateState||""),qe=computed(()=>ValidateComponentsMap[ze.value]),Et=computed(()=>e.remote?300:0),_n=computed(()=>{const On=Dt.value;return e.loading?e.loadingText||r("el.select.loading"):e.remote&&V.inputValue===""&&On.length===0?!1:e.filterable&&V.inputValue&&On.length>0?e.noMatchText||r("el.select.noMatch"):On.length===0?e.noDataText||r("el.select.noData"):null}),Dt=computed(()=>{const On=Rn=>{const Yn=V.inputValue,na=new RegExp(escapeStringRegexp(Yn),"i");return Yn?na.test(Rn.label||""):!0};return e.loading?[]:flattenOptions(e.options.concat(V.createdOptions).map(Rn=>{if(isArray$3(Rn.options)){const Yn=Rn.options.filter(On);if(Yn.length>0)return{...Rn,options:Yn}}else if(e.remote||On(Rn))return Rn;return null}).filter(Rn=>Rn!==null))}),Sn=computed(()=>{const On=new Map;return Dt.value.forEach((Rn,Yn)=>{On.set(sa(Rn),{option:Rn,index:Yn})}),On}),hn=computed(()=>Dt.value.every(On=>On.disabled)),Vn=useFormSize(),Mn=computed(()=>Vn.value==="small"?"small":"default"),$n=computed(()=>{const On=le.value,Rn=Mn.value||"default",Yn=On?Number.parseInt(getComputedStyle(On).paddingLeft):0,na=On?Number.parseInt(getComputedStyle(On).paddingRight):0;return V.selectWidth-na-Yn-TAG_BASE_WIDTH[Rn]}),Nn=()=>{var On;z.value=((On=ue.value)==null?void 0:On.offsetWidth)||200},kn=computed(()=>({width:`${V.calculatedWidth===0?MINIMUM_INPUT_WIDTH:Math.ceil(V.calculatedWidth)+MINIMUM_INPUT_WIDTH}px`})),jn=computed(()=>isArray$3(e.modelValue)?e.modelValue.length===0&&!V.displayInputValue:e.filterable?V.displayInputValue.length===0:!0),Fn=computed(()=>{const On=e.placeholder||r("el.select.placeholder");return e.multiple||isNil(e.modelValue)?On:V.selectedLabel}),Tn=computed(()=>{var On,Rn;return(Rn=(On=oe.value)==null?void 0:On.popperRef)==null?void 0:Rn.contentRef}),Hn=computed(()=>{if(e.multiple){const On=e.modelValue.length;if(e.modelValue.length>0&&Sn.value.has(e.modelValue[On-1])){const{index:Rn}=Sn.value.get(e.modelValue[On-1]);return Rn}}else if(e.modelValue&&Sn.value.has(e.modelValue)){const{index:On}=Sn.value.get(e.modelValue);return On}return-1}),la=computed({get(){return he.value&&_n.value!==!1},set(On){he.value=On}}),ca=computed(()=>V.cachedOptions.slice(0,e.maxCollapseTags)),Zn=computed(()=>V.cachedOptions.slice(e.maxCollapseTags)),{createNewOption:Bn,removeNewOption:Wn,selectNewOption:da,clearAllNewOption:ga}=useAllowCreate(e,V),{handleCompositionStart:Ca,handleCompositionUpdate:ra,handleCompositionEnd:Gn}=useInput(On=>Jn(On)),vn=()=>{var On,Rn,Yn;(Rn=(On=ae.value)==null?void 0:On.focus)==null||Rn.call(On),(Yn=oe.value)==null||Yn.updatePopper()},Kn=()=>{if(!e.automaticDropdown&&!_e.value)return V.isComposing&&(V.softFocus=!0),nextTick(()=>{var On,Rn;he.value=!he.value,(Rn=(On=ae.value)==null?void 0:On.focus)==null||Rn.call(On)})},En=()=>(e.filterable&&V.inputValue!==V.selectedLabel&&(V.query=V.selectedLabel),At(V.inputValue),nextTick(()=>{Bn(V.inputValue)})),kt=debounce(En,Et.value),At=On=>{V.previousQuery!==On&&(V.previousQuery=On,e.filterable&&isFunction$3(e.filterMethod)?e.filterMethod(On):e.filterable&&e.remote&&isFunction$3(e.remoteMethod)&&e.remoteMethod(On))},Dn=On=>{isEqual$1(e.modelValue,On)||n(CHANGE_EVENT,On)},Xn=On=>{n(UPDATE_MODEL_EVENT,On),Dn(On),V.previousValue=On?.toString()},aa=(On=[],Rn)=>{if(!isObject$3(Rn))return On.indexOf(Rn);const Yn=e.valueKey;let na=-1;return On.some((ea,pa)=>get(ea,Yn)===get(Rn,Yn)?(na=pa,!0):!1),na},sa=On=>isObject$3(On)?get(On,e.valueKey):On,ia=On=>isObject$3(On)?On.label:On,ma=()=>nextTick(()=>{var On,Rn;if(!ae.value)return;const Yn=le.value;ue.value.height=Yn.offsetHeight,he.value&&_n.value!==!1&&((Rn=(On=oe.value)==null?void 0:On.updatePopper)==null||Rn.call(On))}),ua=()=>{var On,Rn;if(pe(),Nn(),(Rn=(On=oe.value)==null?void 0:On.updatePopper)==null||Rn.call(On),e.multiple)return ma()},pe=()=>{const On=le.value;On&&(V.selectWidth=On.getBoundingClientRect().width)},Oe=(On,Rn,Yn=!0)=>{var na,ea;if(e.multiple){let pa=e.modelValue.slice();const ha=aa(pa,sa(On));ha>-1?(pa=[...pa.slice(0,ha),...pa.slice(ha+1)],V.cachedOptions.splice(ha,1),Wn(On)):(e.multipleLimit<=0||pa.length<e.multipleLimit)&&(pa=[...pa,sa(On)],V.cachedOptions.push(On),da(On),Ln(Rn)),Xn(pa),On.created&&(V.query="",At(""),V.inputLength=20),e.filterable&&!e.reserveKeyword&&((ea=(na=ae.value).focus)==null||ea.call(na),Cn("")),e.filterable&&(V.calculatedWidth=de.value.getBoundingClientRect().width),ma(),zn()}else L.value=Rn,V.selectedLabel=On.label,Xn(sa(On)),he.value=!1,V.isComposing=!1,V.isSilentBlur=Yn,da(On),On.created||ga(),Ln(Rn)},Ve=(On,Rn)=>{const{valueKey:Yn}=e,na=e.modelValue.indexOf(get(Rn,Yn));if(na>-1&&!_e.value){const ea=[...e.modelValue.slice(0,na),...e.modelValue.slice(na+1)];return V.cachedOptions.splice(na,1),Xn(ea),n("remove-tag",get(Rn,Yn)),V.softFocus=!0,Wn(Rn),nextTick(vn)}On.stopPropagation()},Ue=On=>{const Rn=V.isComposing;V.isComposing=!0,V.softFocus?V.softFocus=!1:Rn||n("focus",On)},Pt=On=>(V.softFocus=!1,nextTick(()=>{var Rn,Yn;(Yn=(Rn=ae.value)==null?void 0:Rn.blur)==null||Yn.call(Rn),de.value&&(V.calculatedWidth=de.value.getBoundingClientRect().width),V.isSilentBlur?V.isSilentBlur=!1:V.isComposing&&n("blur",On),V.isComposing=!1})),Lt=()=>{V.displayInputValue.length>0?Cn(""):he.value=!1},bn=On=>{if(V.displayInputValue.length===0){On.preventDefault();const Rn=e.modelValue.slice();Rn.pop(),Wn(V.cachedOptions.pop()),Xn(Rn)}},jt=()=>{let On;return isArray$3(e.modelValue)?On=[]:On=void 0,V.softFocus=!0,e.multiple?V.cachedOptions=[]:V.selectedLabel="",he.value=!1,Xn(On),n("clear"),ga(),nextTick(vn)},Cn=On=>{V.displayInputValue=On,V.inputValue=On},xn=(On,Rn=void 0)=>{const Yn=Dt.value;if(!["forward","backward"].includes(On)||_e.value||Yn.length<=0||hn.value)return;if(!he.value)return Kn();Rn===void 0&&(Rn=V.hoveringIndex);let na=-1;On==="forward"?(na=Rn+1,na>=Yn.length&&(na=0)):On==="backward"&&(na=Rn-1,(na<0||na>=Yn.length)&&(na=Yn.length-1));const ea=Yn[na];if(ea.disabled||ea.type==="Group")return xn(On,na);Ln(na),Pn(na)},In=()=>{if(he.value)~V.hoveringIndex&&Dt.value[V.hoveringIndex]&&Oe(Dt.value[V.hoveringIndex],V.hoveringIndex,!1);else return Kn()},Ln=On=>{V.hoveringIndex=On},An=()=>{V.hoveringIndex=-1},zn=()=>{var On;const Rn=ae.value;Rn&&((On=Rn.focus)==null||On.call(Rn))},Jn=On=>{const Rn=On.target.value;if(Cn(Rn),V.displayInputValue.length>0&&!he.value&&(he.value=!0),V.calculatedWidth=de.value.getBoundingClientRect().width,e.multiple&&ma(),e.remote)kt();else return En()},Qn=()=>(he.value=!1,Pt()),ta=()=>(V.inputValue=V.displayInputValue,nextTick(()=>{~Hn.value&&(Ln(Hn.value),Pn(V.hoveringIndex))})),Pn=On=>{re.value.scrollToItem(On)},Un=()=>{if(An(),e.multiple)if(e.modelValue.length>0){let On=!1;V.cachedOptions.length=0,V.previousValue=e.modelValue.toString();for(const Rn of e.modelValue)if(Sn.value.has(Rn)){const{index:Yn,option:na}=Sn.value.get(Rn);V.cachedOptions.push(na),On||Ln(Yn),On=!0}}else V.cachedOptions=[],V.previousValue=void 0;else if(Ne.value){V.previousValue=e.modelValue;const On=Dt.value,Rn=On.findIndex(Yn=>sa(Yn)===sa(e.modelValue));~Rn?(V.selectedLabel=On[Rn].label,Ln(Rn)):V.selectedLabel=`${e.modelValue}`}else V.selectedLabel="",V.previousValue=void 0;ga(),Nn()};return watch(he,On=>{var Rn,Yn;n("visible-change",On),On?(Yn=(Rn=oe.value).update)==null||Yn.call(Rn):(V.displayInputValue="",V.previousQuery=null,Bn(""))}),watch(()=>e.modelValue,(On,Rn)=>{var Yn;(!On||On.toString()!==V.previousValue)&&Un(),!isEqual$1(On,Rn)&&e.validateEvent&&((Yn=$?.validate)==null||Yn.call($,"change").catch(na=>void 0))},{deep:!0}),watch(()=>e.options,()=>{const On=ae.value;(!On||On&&document.activeElement!==On)&&Un()},{deep:!0}),watch(Dt,()=>nextTick(re.value.resetScrollTop)),watch(()=>la.value,On=>{On||An()}),onMounted(()=>{Un()}),useResizeObserver(ue,ua),{collapseTagSize:Mn,currentPlaceholder:Fn,expanded:he,emptyText:_n,popupHeight:Ce,debounce:Et,filteredOptions:Dt,iconComponent:xe,iconReverse:Ie,inputWrapperStyle:kn,popperSize:z,dropdownMenuVisible:la,hasModelValue:Ne,shouldShowPlaceholder:jn,selectDisabled:_e,selectSize:Vn,showClearBtn:$e,states:V,tagMaxWidth:$n,nsSelectV2:g,nsInput:y,calculatorRef:de,controlRef:j,inputRef:ae,menuRef:re,popper:oe,selectRef:ue,selectionRef:le,popperRef:Tn,validateState:ze,validateIcon:qe,showTagList:ca,collapseTagList:Zn,debouncedOnInputChange:kt,deleteTag:Ve,getLabel:ia,getValueKey:sa,handleBlur:Pt,handleClear:jt,handleClickOutside:Qn,handleDel:bn,handleEsc:Lt,handleFocus:Ue,handleMenuEnter:ta,handleResize:ua,toggleMenu:Kn,scrollTo:Pn,onInput:Jn,onKeyboardNavigate:xn,onKeyboardSelect:In,onSelect:Oe,onHover:Ln,onUpdateInputValue:Cn,handleCompositionStart:Ca,handleCompositionEnd:Gn,handleCompositionUpdate:ra}},_sfc_main$1O=defineComponent({name:"ElSelectV2",components:{ElSelectMenu,ElTag,ElTooltip,ElIcon},directives:{ClickOutside,ModelText:vModelText},props:SelectProps,emits:[UPDATE_MODEL_EVENT,CHANGE_EVENT,"remove-tag","clear","visible-change","focus","blur"],setup(e,{emit:n}){const r=computed(()=>{const{modelValue:y,multiple:k}=e,$=k?[]:void 0;return isArray$3(y)?k?y:$:k?$:y}),g=useSelect$1(reactive({...toRefs(e),modelValue:r}),n);return provide(selectV2InjectionKey,{props:reactive({...toRefs(e),height:g.popupHeight,modelValue:r}),popper:g.popper,onSelect:g.onSelect,onHover:g.onHover,onKeyboardNavigate:g.onKeyboardNavigate,onKeyboardSelect:g.onKeyboardSelect}),{...g,modelValue:r}}}),_hoisted_1$1s={key:0},_hoisted_2$1j=["id","autocomplete","aria-expanded","aria-labelledby","disabled","readonly","name","unselectable"],_hoisted_3$O=["textContent"],_hoisted_4$J=["id","aria-labelledby","aria-expanded","autocomplete","disabled","name","readonly","unselectable"],_hoisted_5$C=["textContent"];function _sfc_render$5(e,n,r,g,y,k){const $=resolveComponent("el-tag"),V=resolveComponent("el-tooltip"),L=resolveComponent("el-icon"),z=resolveComponent("el-select-menu"),j=resolveDirective("model-text"),ae=resolveDirective("click-outside");return withDirectives((openBlock(),createElementBlock("div",{ref:"selectRef",class:normalizeClass([e.nsSelectV2.b(),e.nsSelectV2.m(e.selectSize)]),onClick:n[24]||(n[24]=withModifiers((...re)=>e.toggleMenu&&e.toggleMenu(...re),["stop"])),onMouseenter:n[25]||(n[25]=re=>e.states.comboBoxHovering=!0),onMouseleave:n[26]||(n[26]=re=>e.states.comboBoxHovering=!1)},[createVNode(V,{ref:"popper",visible:e.dropdownMenuVisible,teleported:e.teleported,"popper-class":[e.nsSelectV2.e("popper"),e.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":e.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:e.effect,placement:e.placement,pure:"",transition:`${e.nsSelectV2.namespace.value}-zoom-in-top`,trigger:"click",persistent:e.persistent,onBeforeShow:e.handleMenuEnter,onHide:n[23]||(n[23]=re=>e.states.inputValue=e.states.displayInputValue)},{default:withCtx(()=>[createBaseVNode("div",{ref:"selectionRef",class:normalizeClass([e.nsSelectV2.e("wrapper"),e.nsSelectV2.is("focused",e.states.isComposing||e.expanded),e.nsSelectV2.is("hovering",e.states.comboBoxHovering),e.nsSelectV2.is("filterable",e.filterable),e.nsSelectV2.is("disabled",e.selectDisabled)])},[e.$slots.prefix?(openBlock(),createElementBlock("div",_hoisted_1$1s,[renderSlot(e.$slots,"prefix")])):createCommentVNode("v-if",!0),e.multiple?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(e.nsSelectV2.e("selection"))},[e.collapseTags&&e.modelValue.length>0?(openBlock(),createElementBlock(Fragment,{key:0},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.showTagList,re=>(openBlock(),createElementBlock("div",{key:e.getValueKey(re),class:normalizeClass(e.nsSelectV2.e("selected-item"))},[createVNode($,{closable:!e.selectDisabled&&!re?.disable,size:e.collapseTagSize,type:"info","disable-transitions":"",onClose:oe=>e.deleteTag(oe,re)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(e.nsSelectV2.e("tags-text")),style:normalizeStyle({maxWidth:`${e.tagMaxWidth}px`})},toDisplayString$1(re?.label),7)]),_:2},1032,["closable","size","onClose"])],2))),128)),createBaseVNode("div",{class:normalizeClass(e.nsSelectV2.e("selected-item"))},[e.modelValue.length>e.maxCollapseTags?(openBlock(),createBlock($,{key:0,closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""},{default:withCtx(()=>[e.collapseTagsTooltip?(openBlock(),createBlock(V,{key:0,disabled:e.dropdownMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:!1},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(e.nsSelectV2.e("tags-text")),style:normalizeStyle({maxWidth:`${e.tagMaxWidth}px`})},"+ "+toDisplayString$1(e.modelValue.length-e.maxCollapseTags),7)]),content:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(e.nsSelectV2.e("selection"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.collapseTagList,re=>(openBlock(),createElementBlock("div",{key:e.getValueKey(re),class:normalizeClass(e.nsSelectV2.e("selected-item"))},[createVNode($,{closable:!e.selectDisabled&&!re.disabled,size:e.collapseTagSize,class:"in-tooltip",type:"info","disable-transitions":"",onClose:oe=>e.deleteTag(oe,re)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(e.nsSelectV2.e("tags-text")),style:normalizeStyle({maxWidth:`${e.tagMaxWidth}px`})},toDisplayString$1(e.getLabel(re)),7)]),_:2},1032,["closable","size","onClose"])],2))),128))],2)]),_:1},8,["disabled","effect"])):(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(e.nsSelectV2.e("tags-text")),style:normalizeStyle({maxWidth:`${e.tagMaxWidth}px`})},"+ "+toDisplayString$1(e.modelValue.length-e.maxCollapseTags),7))]),_:1},8,["size"])):createCommentVNode("v-if",!0)],2)],64)):(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(e.states.cachedOptions,re=>(openBlock(),createElementBlock("div",{key:e.getValueKey(re),class:normalizeClass(e.nsSelectV2.e("selected-item"))},[createVNode($,{closable:!e.selectDisabled&&!re.disabled,size:e.collapseTagSize,type:"info","disable-transitions":"",onClose:oe=>e.deleteTag(oe,re)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(e.nsSelectV2.e("tags-text")),style:normalizeStyle({maxWidth:`${e.tagMaxWidth}px`})},toDisplayString$1(e.getLabel(re)),7)]),_:2},1032,["closable","size","onClose"])],2))),128)),createBaseVNode("div",{class:normalizeClass([e.nsSelectV2.e("selected-item"),e.nsSelectV2.e("input-wrapper")]),style:normalizeStyle(e.inputWrapperStyle)},[withDirectives(createBaseVNode("input",{id:e.id,ref:"inputRef",autocomplete:e.autocomplete,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":e.expanded,"aria-labelledby":e.label,class:normalizeClass([e.nsSelectV2.is(e.selectSize),e.nsSelectV2.e("combobox-input")]),disabled:e.disabled,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",name:e.name,unselectable:e.expanded?"on":void 0,"onUpdate:modelValue":n[0]||(n[0]=(...re)=>e.onUpdateInputValue&&e.onUpdateInputValue(...re)),onFocus:n[1]||(n[1]=(...re)=>e.handleFocus&&e.handleFocus(...re)),onBlur:n[2]||(n[2]=(...re)=>e.handleBlur&&e.handleBlur(...re)),onInput:n[3]||(n[3]=(...re)=>e.onInput&&e.onInput(...re)),onCompositionstart:n[4]||(n[4]=(...re)=>e.handleCompositionStart&&e.handleCompositionStart(...re)),onCompositionupdate:n[5]||(n[5]=(...re)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...re)),onCompositionend:n[6]||(n[6]=(...re)=>e.handleCompositionEnd&&e.handleCompositionEnd(...re)),onKeydown:[n[7]||(n[7]=withKeys(withModifiers(re=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),n[8]||(n[8]=withKeys(withModifiers(re=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),n[9]||(n[9]=withKeys(withModifiers((...re)=>e.onKeyboardSelect&&e.onKeyboardSelect(...re),["stop","prevent"]),["enter"])),n[10]||(n[10]=withKeys(withModifiers((...re)=>e.handleEsc&&e.handleEsc(...re),["stop","prevent"]),["esc"])),n[11]||(n[11]=withKeys(withModifiers((...re)=>e.handleDel&&e.handleDel(...re),["stop"]),["delete"]))]},null,42,_hoisted_2$1j),[[j,e.states.displayInputValue]]),e.filterable?(openBlock(),createElementBlock("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:normalizeClass(e.nsSelectV2.e("input-calculator")),textContent:toDisplayString$1(e.states.displayInputValue)},null,10,_hoisted_3$O)):createCommentVNode("v-if",!0)],6)],2)):(openBlock(),createElementBlock(Fragment,{key:2},[createBaseVNode("div",{class:normalizeClass([e.nsSelectV2.e("selected-item"),e.nsSelectV2.e("input-wrapper")])},[withDirectives(createBaseVNode("input",{id:e.id,ref:"inputRef","aria-autocomplete":"list","aria-haspopup":"listbox","aria-labelledby":e.label,"aria-expanded":e.expanded,autocapitalize:"off",autocomplete:e.autocomplete,class:normalizeClass(e.nsSelectV2.e("combobox-input")),disabled:e.disabled,name:e.name,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",unselectable:e.expanded?"on":void 0,onCompositionstart:n[12]||(n[12]=(...re)=>e.handleCompositionStart&&e.handleCompositionStart(...re)),onCompositionupdate:n[13]||(n[13]=(...re)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...re)),onCompositionend:n[14]||(n[14]=(...re)=>e.handleCompositionEnd&&e.handleCompositionEnd(...re)),onFocus:n[15]||(n[15]=(...re)=>e.handleFocus&&e.handleFocus(...re)),onBlur:n[16]||(n[16]=(...re)=>e.handleBlur&&e.handleBlur(...re)),onInput:n[17]||(n[17]=(...re)=>e.onInput&&e.onInput(...re)),onKeydown:[n[18]||(n[18]=withKeys(withModifiers(re=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),n[19]||(n[19]=withKeys(withModifiers(re=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),n[20]||(n[20]=withKeys(withModifiers((...re)=>e.onKeyboardSelect&&e.onKeyboardSelect(...re),["stop","prevent"]),["enter"])),n[21]||(n[21]=withKeys(withModifiers((...re)=>e.handleEsc&&e.handleEsc(...re),["stop","prevent"]),["esc"]))],"onUpdate:modelValue":n[22]||(n[22]=(...re)=>e.onUpdateInputValue&&e.onUpdateInputValue(...re))},null,42,_hoisted_4$J),[[j,e.states.displayInputValue]])],2),e.filterable?(openBlock(),createElementBlock("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:normalizeClass([e.nsSelectV2.e("selected-item"),e.nsSelectV2.e("input-calculator")]),textContent:toDisplayString$1(e.states.displayInputValue)},null,10,_hoisted_5$C)):createCommentVNode("v-if",!0)],64)),e.shouldShowPlaceholder?(openBlock(),createElementBlock("span",{key:3,class:normalizeClass([e.nsSelectV2.e("placeholder"),e.nsSelectV2.is("transparent",e.multiple?e.modelValue.length===0:!e.hasModelValue)])},toDisplayString$1(e.currentPlaceholder),3)):createCommentVNode("v-if",!0),createBaseVNode("span",{class:normalizeClass(e.nsSelectV2.e("suffix"))},[e.iconComponent?withDirectives((openBlock(),createBlock(L,{key:0,class:normalizeClass([e.nsSelectV2.e("caret"),e.nsInput.e("icon"),e.iconReverse])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(e.iconComponent)))]),_:1},8,["class"])),[[vShow,!e.showClearBtn]]):createCommentVNode("v-if",!0),e.showClearBtn&&e.clearIcon?(openBlock(),createBlock(L,{key:1,class:normalizeClass([e.nsSelectV2.e("caret"),e.nsInput.e("icon")]),onClick:withModifiers(e.handleClear,["prevent","stop"])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(e.clearIcon)))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0),e.validateState&&e.validateIcon?(openBlock(),createBlock(L,{key:2,class:normalizeClass([e.nsInput.e("icon"),e.nsInput.e("validateIcon")])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(e.validateIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2)],2)]),content:withCtx(()=>[createVNode(z,{ref:"menuRef",data:e.filteredOptions,width:e.popperSize,"hovering-index":e.states.hoveringIndex,"scrollbar-always-on":e.scrollbarAlwaysOn},{default:withCtx(re=>[renderSlot(e.$slots,"default",normalizeProps(guardReactiveProps(re)))]),empty:withCtx(()=>[renderSlot(e.$slots,"empty",{},()=>[createBaseVNode("p",{class:normalizeClass(e.nsSelectV2.e("empty"))},toDisplayString$1(e.emptyText?e.emptyText:""),3)])]),_:3},8,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","effect","placement","transition","persistent","onBeforeShow"])],34)),[[ae,e.handleClickOutside,e.popperRef]])}var Select=_export_sfc$1(_sfc_main$1O,[["render",_sfc_render$5],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/select.vue"]]);Select.install=e=>{e.component(Select.name,Select)};const _Select=Select,ElSelectV2=_Select,skeletonProps=buildProps({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Number}}),skeletonItemProps=buildProps({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),__default__$t=defineComponent({name:"ElSkeletonItem"}),_sfc_main$1N=defineComponent({...__default__$t,props:skeletonItemProps,setup(e){const n=useNamespace("skeleton");return(r,g)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(n).e("item"),unref(n).e(r.variant)])},[r.variant==="image"?(openBlock(),createBlock(unref(picture_filled_default),{key:0})):createCommentVNode("v-if",!0)],2))}});var SkeletonItem=_export_sfc$1(_sfc_main$1N,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton-item.vue"]]);const __default__$s=defineComponent({name:"ElSkeleton"}),_sfc_main$1M=defineComponent({...__default__$s,props:skeletonProps,setup(e,{expose:n}){const r=e,g=useNamespace("skeleton"),y=useThrottleRender(toRef(r,"loading"),r.throttle);return n({uiLoading:y}),(k,$)=>unref(y)?(openBlock(),createElementBlock("div",mergeProps({key:0,class:[unref(g).b(),unref(g).is("animated",k.animated)]},k.$attrs),[(openBlock(!0),createElementBlock(Fragment,null,renderList(k.count,V=>(openBlock(),createElementBlock(Fragment,{key:V},[k.loading?renderSlot(k.$slots,"template",{key:V},()=>[createVNode(SkeletonItem,{class:normalizeClass(unref(g).is("first")),variant:"p"},null,8,["class"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(k.rows,L=>(openBlock(),createBlock(SkeletonItem,{key:L,class:normalizeClass([unref(g).e("paragraph"),unref(g).is("last",L===k.rows&&k.rows>1)]),variant:"p"},null,8,["class"]))),128))]):createCommentVNode("v-if",!0)],64))),128))],16)):renderSlot(k.$slots,"default",normalizeProps(mergeProps({key:1},k.$attrs)))}});var Skeleton$1=_export_sfc$1(_sfc_main$1M,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton.vue"]]);const ElSkeleton=withInstall(Skeleton$1,{SkeletonItem}),ElSkeletonItem=withNoopInstall(SkeletonItem),sliderContextKey=Symbol("sliderContextKey"),sliderProps=buildProps({modelValue:{type:definePropType([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:useSizeProp,inputSize:useSizeProp,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:definePropType(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:definePropType(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Ee,default:"top"},marks:{type:definePropType(Object)},validateEvent:{type:Boolean,default:!0}}),isValidValue$1=e=>isNumber$1(e)||isArray$3(e)&&e.every(isNumber$1),sliderEmits={[UPDATE_MODEL_EVENT]:isValidValue$1,[INPUT_EVENT]:isValidValue$1,[CHANGE_EVENT]:isValidValue$1},useLifecycle=(e,n,r)=>{const g=ref();return onMounted(async()=>{e.range?(Array.isArray(e.modelValue)?(n.firstValue=Math.max(e.min,e.modelValue[0]),n.secondValue=Math.min(e.max,e.modelValue[1])):(n.firstValue=e.min,n.secondValue=e.max),n.oldValue=[n.firstValue,n.secondValue]):(typeof e.modelValue!="number"||Number.isNaN(e.modelValue)?n.firstValue=e.min:n.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),n.oldValue=n.firstValue),useEventListener(window,"resize",r),await nextTick(),r()}),{sliderWrapper:g}},useMarks=e=>computed(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((r,g)=>r-g).filter(r=>r<=e.max&&r>=e.min).map(r=>({point:r,position:(r-e.min)*100/(e.max-e.min),mark:e.marks[r]})):[]),useSlide=(e,n,r)=>{const{form:g,formItem:y}=useFormItem(),k=shallowRef(),$=ref(),V=ref(),L={firstButton:$,secondButton:V},z=computed(()=>e.disabled||g?.disabled||!1),j=computed(()=>Math.min(n.firstValue,n.secondValue)),ae=computed(()=>Math.max(n.firstValue,n.secondValue)),re=computed(()=>e.range?`${100*(ae.value-j.value)/(e.max-e.min)}%`:`${100*(n.firstValue-e.min)/(e.max-e.min)}%`),oe=computed(()=>e.range?`${100*(j.value-e.min)/(e.max-e.min)}%`:"0%"),ue=computed(()=>e.vertical?{height:e.height}:{}),le=computed(()=>e.vertical?{height:re.value,bottom:oe.value}:{width:re.value,left:oe.value}),de=()=>{k.value&&(n.sliderSize=k.value[`client${e.vertical?"Height":"Width"}`])},he=_n=>{const Dt=e.min+_n*(e.max-e.min)/100;if(!e.range)return $;let Sn;return Math.abs(j.value-Dt)<Math.abs(ae.value-Dt)?Sn=n.firstValue<n.secondValue?"firstButton":"secondButton":Sn=n.firstValue>n.secondValue?"firstButton":"secondButton",L[Sn]},_e=_n=>{const Dt=he(_n);return Dt.value.setPosition(_n),Dt},Ce=_n=>{n.firstValue=_n,$e(e.range?[j.value,ae.value]:_n)},Ne=_n=>{n.secondValue=_n,e.range&&$e([j.value,ae.value])},$e=_n=>{r(UPDATE_MODEL_EVENT,_n),r(INPUT_EVENT,_n)},xe=async()=>{await nextTick(),r(CHANGE_EVENT,e.range?[j.value,ae.value]:e.modelValue)},Ie=_n=>{var Dt,Sn,hn,Vn,Mn,$n;if(z.value||n.dragging)return;de();let Nn=0;if(e.vertical){const kn=(hn=(Sn=(Dt=_n.touches)==null?void 0:Dt.item(0))==null?void 0:Sn.clientY)!=null?hn:_n.clientY;Nn=(k.value.getBoundingClientRect().bottom-kn)/n.sliderSize*100}else{const kn=($n=(Mn=(Vn=_n.touches)==null?void 0:Vn.item(0))==null?void 0:Mn.clientX)!=null?$n:_n.clientX,jn=k.value.getBoundingClientRect().left;Nn=(kn-jn)/n.sliderSize*100}if(!(Nn<0||Nn>100))return _e(Nn)};return{elFormItem:y,slider:k,firstButton:$,secondButton:V,sliderDisabled:z,minValue:j,maxValue:ae,runwayStyle:ue,barStyle:le,resetSize:de,setPosition:_e,emitChange:xe,onSliderWrapperPrevent:_n=>{var Dt,Sn;((Dt=L.firstButton.value)!=null&&Dt.dragging||(Sn=L.secondButton.value)!=null&&Sn.dragging)&&_n.preventDefault()},onSliderClick:_n=>{Ie(_n)&&xe()},onSliderDown:async _n=>{const Dt=Ie(_n);Dt&&(await nextTick(),Dt.value.onButtonDown(_n))},setFirstValue:Ce,setSecondValue:Ne}},{left,down,right,up,home,end:end$2,pageUp,pageDown}=EVENT_CODE,useTooltip=(e,n,r)=>{const g=ref(),y=ref(!1),k=computed(()=>n.value instanceof Function),$=computed(()=>k.value&&n.value(e.modelValue)||e.modelValue),V=debounce(()=>{r.value&&(y.value=!0)},50),L=debounce(()=>{r.value&&(y.value=!1)},50);return{tooltip:g,tooltipVisible:y,formatValue:$,displayTooltip:V,hideTooltip:L}},useSliderButton=(e,n,r)=>{const{disabled:g,min:y,max:k,step:$,showTooltip:V,precision:L,sliderSize:z,formatTooltip:j,emitChange:ae,resetSize:re,updateDragging:oe}=inject(sliderContextKey),{tooltip:ue,tooltipVisible:le,formatValue:de,displayTooltip:he,hideTooltip:_e}=useTooltip(e,j,V),Ce=ref(),Ne=computed(()=>`${(e.modelValue-y.value)/(k.value-y.value)*100}%`),$e=computed(()=>e.vertical?{bottom:Ne.value}:{left:Ne.value}),xe=()=>{n.hovering=!0,he()},Ie=()=>{n.hovering=!1,n.dragging||_e()},ze=Tn=>{g.value||(Tn.preventDefault(),Nn(Tn),window.addEventListener("mousemove",kn),window.addEventListener("touchmove",kn),window.addEventListener("mouseup",jn),window.addEventListener("touchend",jn),window.addEventListener("contextmenu",jn),Ce.value.focus())},qe=Tn=>{g.value||(n.newPosition=Number.parseFloat(Ne.value)+Tn/(k.value-y.value)*100,Fn(n.newPosition),ae())},Et=()=>{qe(-$.value)},_n=()=>{qe($.value)},Dt=()=>{qe(-$.value*4)},Sn=()=>{qe($.value*4)},hn=()=>{g.value||(Fn(0),ae())},Vn=()=>{g.value||(Fn(100),ae())},Mn=Tn=>{let Hn=!0;[left,down].includes(Tn.key)?Et():[right,up].includes(Tn.key)?_n():Tn.key===home?hn():Tn.key===end$2?Vn():Tn.key===pageDown?Dt():Tn.key===pageUp?Sn():Hn=!1,Hn&&Tn.preventDefault()},$n=Tn=>{let Hn,la;return Tn.type.startsWith("touch")?(la=Tn.touches[0].clientY,Hn=Tn.touches[0].clientX):(la=Tn.clientY,Hn=Tn.clientX),{clientX:Hn,clientY:la}},Nn=Tn=>{n.dragging=!0,n.isClick=!0;const{clientX:Hn,clientY:la}=$n(Tn);e.vertical?n.startY=la:n.startX=Hn,n.startPosition=Number.parseFloat(Ne.value),n.newPosition=n.startPosition},kn=Tn=>{if(n.dragging){n.isClick=!1,he(),re();let Hn;const{clientX:la,clientY:ca}=$n(Tn);e.vertical?(n.currentY=ca,Hn=(n.startY-n.currentY)/z.value*100):(n.currentX=la,Hn=(n.currentX-n.startX)/z.value*100),n.newPosition=n.startPosition+Hn,Fn(n.newPosition)}},jn=()=>{n.dragging&&(setTimeout(()=>{n.dragging=!1,n.hovering||_e(),n.isClick||Fn(n.newPosition),ae()},0),window.removeEventListener("mousemove",kn),window.removeEventListener("touchmove",kn),window.removeEventListener("mouseup",jn),window.removeEventListener("touchend",jn),window.removeEventListener("contextmenu",jn))},Fn=async Tn=>{if(Tn===null||Number.isNaN(+Tn))return;Tn<0?Tn=0:Tn>100&&(Tn=100);const Hn=100/((k.value-y.value)/$.value);let ca=Math.round(Tn/Hn)*Hn*(k.value-y.value)*.01+y.value;ca=Number.parseFloat(ca.toFixed(L.value)),ca!==e.modelValue&&r(UPDATE_MODEL_EVENT,ca),!n.dragging&&e.modelValue!==n.oldValue&&(n.oldValue=e.modelValue),await nextTick(),n.dragging&&he(),ue.value.updatePopper()};return watch(()=>n.dragging,Tn=>{oe(Tn)}),{disabled:g,button:Ce,tooltip:ue,tooltipVisible:le,showTooltip:V,wrapperStyle:$e,formatValue:de,handleMouseEnter:xe,handleMouseLeave:Ie,onButtonDown:ze,onKeyDown:Mn,setPosition:Fn}},useStops=(e,n,r,g)=>({stops:computed(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const $=(e.max-e.min)/e.step,V=100*e.step/(e.max-e.min),L=Array.from({length:$-1}).map((z,j)=>(j+1)*V);return e.range?L.filter(z=>z<100*(r.value-e.min)/(e.max-e.min)||z>100*(g.value-e.min)/(e.max-e.min)):L.filter(z=>z>100*(n.firstValue-e.min)/(e.max-e.min))}),getStopStyle:$=>e.vertical?{bottom:`${$}%`}:{left:`${$}%`}}),useWatch=(e,n,r,g,y,k)=>{const $=z=>{y(UPDATE_MODEL_EVENT,z),y(INPUT_EVENT,z)},V=()=>e.range?![r.value,g.value].every((z,j)=>z===n.oldValue[j]):e.modelValue!==n.oldValue,L=()=>{var z,j;e.min>e.max&&throwError("Slider","min should not be greater than max.");const ae=e.modelValue;e.range&&Array.isArray(ae)?ae[1]<e.min?$([e.min,e.min]):ae[0]>e.max?$([e.max,e.max]):ae[0]<e.min?$([e.min,ae[1]]):ae[1]>e.max?$([ae[0],e.max]):(n.firstValue=ae[0],n.secondValue=ae[1],V()&&(e.validateEvent&&((z=k?.validate)==null||z.call(k,"change").catch(re=>void 0)),n.oldValue=ae.slice())):!e.range&&typeof ae=="number"&&!Number.isNaN(ae)&&(ae<e.min?$(e.min):ae>e.max?$(e.max):(n.firstValue=ae,V()&&(e.validateEvent&&((j=k?.validate)==null||j.call(k,"change").catch(re=>void 0)),n.oldValue=ae)))};L(),watch(()=>n.dragging,z=>{z||L()}),watch(()=>e.modelValue,(z,j)=>{n.dragging||Array.isArray(z)&&Array.isArray(j)&&z.every((ae,re)=>ae===j[re])&&n.firstValue===z[0]&&n.secondValue===z[1]||L()},{deep:!0}),watch(()=>[e.min,e.max],()=>{L()})},sliderButtonProps=buildProps({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Ee,default:"top"}}),sliderButtonEmits={[UPDATE_MODEL_EVENT]:e=>isNumber$1(e)},_hoisted_1$1r=["tabindex"],__default__$r=defineComponent({name:"ElSliderButton"}),_sfc_main$1L=defineComponent({...__default__$r,props:sliderButtonProps,emits:sliderButtonEmits,setup(e,{expose:n,emit:r}){const g=e,y=useNamespace("slider"),k=reactive({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:g.modelValue}),{disabled:$,button:V,tooltip:L,showTooltip:z,tooltipVisible:j,wrapperStyle:ae,formatValue:re,handleMouseEnter:oe,handleMouseLeave:ue,onButtonDown:le,onKeyDown:de,setPosition:he}=useSliderButton(g,k,r),{hovering:_e,dragging:Ce}=toRefs(k);return n({onButtonDown:le,onKeyDown:de,setPosition:he,hovering:_e,dragging:Ce}),(Ne,$e)=>(openBlock(),createElementBlock("div",{ref_key:"button",ref:V,class:normalizeClass([unref(y).e("button-wrapper"),{hover:unref(_e),dragging:unref(Ce)}]),style:normalizeStyle(unref(ae)),tabindex:unref($)?-1:0,onMouseenter:$e[0]||($e[0]=(...xe)=>unref(oe)&&unref(oe)(...xe)),onMouseleave:$e[1]||($e[1]=(...xe)=>unref(ue)&&unref(ue)(...xe)),onMousedown:$e[2]||($e[2]=(...xe)=>unref(le)&&unref(le)(...xe)),onTouchstart:$e[3]||($e[3]=(...xe)=>unref(le)&&unref(le)(...xe)),onFocus:$e[4]||($e[4]=(...xe)=>unref(oe)&&unref(oe)(...xe)),onBlur:$e[5]||($e[5]=(...xe)=>unref(ue)&&unref(ue)(...xe)),onKeydown:$e[6]||($e[6]=(...xe)=>unref(de)&&unref(de)(...xe))},[createVNode(unref(ElTooltip),{ref_key:"tooltip",ref:L,visible:unref(j),placement:Ne.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":Ne.tooltipClass,disabled:!unref(z),persistent:""},{content:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(unref(re)),1)]),default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass([unref(y).e("button"),{hover:unref(_e),dragging:unref(Ce)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled"])],46,_hoisted_1$1r))}});var SliderButton=_export_sfc$1(_sfc_main$1L,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/button.vue"]]);const sliderMarkerProps=buildProps({mark:{type:definePropType([String,Object]),default:void 0}});var SliderMarker=defineComponent({name:"ElSliderMarker",props:sliderMarkerProps,setup(e){const n=useNamespace("slider"),r=computed(()=>isString$3(e.mark)?e.mark:e.mark.label),g=computed(()=>isString$3(e.mark)?void 0:e.mark.style);return()=>h$1("div",{class:n.e("marks-text"),style:g.value},r.value)}});const _hoisted_1$1q=["id","role","aria-label","aria-labelledby"],_hoisted_2$1i={key:1},__default__$q=defineComponent({name:"ElSlider"}),_sfc_main$1K=defineComponent({...__default__$q,props:sliderProps,emits:sliderEmits,setup(e,{expose:n,emit:r}){const g=e,y=useNamespace("slider"),{t:k}=useLocale(),$=reactive({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:V,slider:L,firstButton:z,secondButton:j,sliderDisabled:ae,minValue:re,maxValue:oe,runwayStyle:ue,barStyle:le,resetSize:de,emitChange:he,onSliderWrapperPrevent:_e,onSliderClick:Ce,onSliderDown:Ne,setFirstValue:$e,setSecondValue:xe}=useSlide(g,$,r),{stops:Ie,getStopStyle:ze}=useStops(g,$,re,oe),{inputId:qe,isLabeledByFormItem:Et}=useFormItemInputId(g,{formItemContext:V}),_n=useFormSize(),Dt=computed(()=>g.inputSize||_n.value),Sn=computed(()=>g.label||k("el.slider.defaultLabel",{min:g.min,max:g.max})),hn=computed(()=>g.range?g.rangeStartLabel||k("el.slider.defaultRangeStartLabel"):Sn.value),Vn=computed(()=>g.formatValueText?g.formatValueText(Tn.value):`${Tn.value}`),Mn=computed(()=>g.rangeEndLabel||k("el.slider.defaultRangeEndLabel")),$n=computed(()=>g.formatValueText?g.formatValueText(Hn.value):`${Hn.value}`),Nn=computed(()=>[y.b(),y.m(_n.value),y.is("vertical",g.vertical),{[y.m("with-input")]:g.showInput}]),kn=useMarks(g);useWatch(g,$,re,oe,r,V);const jn=computed(()=>{const Zn=[g.min,g.max,g.step].map(Bn=>{const Wn=`${Bn}`.split(".")[1];return Wn?Wn.length:0});return Math.max.apply(null,Zn)}),{sliderWrapper:Fn}=useLifecycle(g,$,de),{firstValue:Tn,secondValue:Hn,sliderSize:la}=toRefs($),ca=Zn=>{$.dragging=Zn};return provide(sliderContextKey,{...toRefs(g),sliderSize:la,disabled:ae,precision:jn,emitChange:he,resetSize:de,updateDragging:ca}),n({onSliderClick:Ce}),(Zn,Bn)=>{var Wn,da;return openBlock(),createElementBlock("div",{id:Zn.range?unref(qe):void 0,ref_key:"sliderWrapper",ref:Fn,class:normalizeClass(unref(Nn)),role:Zn.range?"group":void 0,"aria-label":Zn.range&&!unref(Et)?unref(Sn):void 0,"aria-labelledby":Zn.range&&unref(Et)?(Wn=unref(V))==null?void 0:Wn.labelId:void 0,onTouchstart:Bn[2]||(Bn[2]=(...ga)=>unref(_e)&&unref(_e)(...ga)),onTouchmove:Bn[3]||(Bn[3]=(...ga)=>unref(_e)&&unref(_e)(...ga))},[createBaseVNode("div",{ref_key:"slider",ref:L,class:normalizeClass([unref(y).e("runway"),{"show-input":Zn.showInput&&!Zn.range},unref(y).is("disabled",unref(ae))]),style:normalizeStyle(unref(ue)),onMousedown:Bn[0]||(Bn[0]=(...ga)=>unref(Ne)&&unref(Ne)(...ga)),onTouchstart:Bn[1]||(Bn[1]=(...ga)=>unref(Ne)&&unref(Ne)(...ga))},[createBaseVNode("div",{class:normalizeClass(unref(y).e("bar")),style:normalizeStyle(unref(le))},null,6),createVNode(SliderButton,{id:Zn.range?void 0:unref(qe),ref_key:"firstButton",ref:z,"model-value":unref(Tn),vertical:Zn.vertical,"tooltip-class":Zn.tooltipClass,placement:Zn.placement,role:"slider","aria-label":Zn.range||!unref(Et)?unref(hn):void 0,"aria-labelledby":!Zn.range&&unref(Et)?(da=unref(V))==null?void 0:da.labelId:void 0,"aria-valuemin":Zn.min,"aria-valuemax":Zn.range?unref(Hn):Zn.max,"aria-valuenow":unref(Tn),"aria-valuetext":unref(Vn),"aria-orientation":Zn.vertical?"vertical":"horizontal","aria-disabled":unref(ae),"onUpdate:modelValue":unref($e)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),Zn.range?(openBlock(),createBlock(SliderButton,{key:0,ref_key:"secondButton",ref:j,"model-value":unref(Hn),vertical:Zn.vertical,"tooltip-class":Zn.tooltipClass,placement:Zn.placement,role:"slider","aria-label":unref(Mn),"aria-valuemin":unref(Tn),"aria-valuemax":Zn.max,"aria-valuenow":unref(Hn),"aria-valuetext":unref($n),"aria-orientation":Zn.vertical?"vertical":"horizontal","aria-disabled":unref(ae),"onUpdate:modelValue":unref(xe)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):createCommentVNode("v-if",!0),Zn.showStops?(openBlock(),createElementBlock("div",_hoisted_2$1i,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Ie),(ga,Ca)=>(openBlock(),createElementBlock("div",{key:Ca,class:normalizeClass(unref(y).e("stop")),style:normalizeStyle(unref(ze)(ga))},null,6))),128))])):createCommentVNode("v-if",!0),unref(kn).length>0?(openBlock(),createElementBlock(Fragment,{key:2},[createBaseVNode("div",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(kn),(ga,Ca)=>(openBlock(),createElementBlock("div",{key:Ca,style:normalizeStyle(unref(ze)(ga.position)),class:normalizeClass([unref(y).e("stop"),unref(y).e("marks-stop")])},null,6))),128))]),createBaseVNode("div",{class:normalizeClass(unref(y).e("marks"))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(kn),(ga,Ca)=>(openBlock(),createBlock(unref(SliderMarker),{key:Ca,mark:ga.mark,style:normalizeStyle(unref(ze)(ga.position))},null,8,["mark","style"]))),128))],2)],64)):createCommentVNode("v-if",!0)],38),Zn.showInput&&!Zn.range?(openBlock(),createBlock(unref(ElInputNumber),{key:0,ref:"input","model-value":unref(Tn),class:normalizeClass(unref(y).e("input")),step:Zn.step,disabled:unref(ae),controls:Zn.showInputControls,min:Zn.min,max:Zn.max,debounce:Zn.debounce,size:unref(Dt),"onUpdate:modelValue":unref($e),onChange:unref(he)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):createCommentVNode("v-if",!0)],42,_hoisted_1$1q)}}});var Slider=_export_sfc$1(_sfc_main$1K,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/slider.vue"]]);const ElSlider=withInstall(Slider),spaceItemProps=buildProps({prefixCls:{type:String}}),SpaceItem=defineComponent({name:"ElSpaceItem",props:spaceItemProps,setup(e,{slots:n}){const r=useNamespace("space"),g=computed(()=>`${e.prefixCls||r.b()}__item`);return()=>h$1("div",{class:g.value},renderSlot(n,"default"))}}),SIZE_MAP={small:8,default:12,large:16};function useSpace(e){const n=useNamespace("space"),r=computed(()=>[n.b(),n.m(e.direction),e.class]),g=ref(0),y=ref(0),k=computed(()=>{const V=e.wrap||e.fill?{flexWrap:"wrap",marginBottom:`-${y.value}px`}:{},L={alignItems:e.alignment};return[V,L,e.style]}),$=computed(()=>{const V={paddingBottom:`${y.value}px`,marginRight:`${g.value}px`},L=e.fill?{flexGrow:1,minWidth:`${e.fillRatio}%`}:{};return[V,L]});return watchEffect(()=>{const{size:V="small",wrap:L,direction:z,fill:j}=e;if(isArray$3(V)){const[ae=0,re=0]=V;g.value=ae,y.value=re}else{let ae;isNumber$1(V)?ae=V:ae=SIZE_MAP[V||"small"]||SIZE_MAP.small,(L||j)&&z==="horizontal"?g.value=y.value=ae:z==="horizontal"?(g.value=ae,y.value=0):(y.value=ae,g.value=0)}}),{classes:r,containerStyle:k,itemStyle:$}}const spaceProps=buildProps({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:definePropType([String,Object,Array]),default:""},style:{type:definePropType([String,Array,Object]),default:""},alignment:{type:definePropType(String),default:"center"},prefixCls:{type:String},spacer:{type:definePropType([Object,String,Number,Array]),default:null,validator:e=>isVNode$1(e)||isNumber$1(e)||isString$3(e)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:componentSizes,validator:e=>isNumber$1(e)||isArray$3(e)&&e.length===2&&e.every(isNumber$1)}}),Space=defineComponent({name:"ElSpace",props:spaceProps,setup(e,{slots:n}){const{classes:r,containerStyle:g,itemStyle:y}=useSpace(e);function k($,V="",L=[]){const{prefixCls:z}=e;return $.forEach((j,ae)=>{isFragment(j)?isArray$3(j.children)&&j.children.forEach((re,oe)=>{isFragment(re)&&isArray$3(re.children)?k(re.children,`${V+oe}-`,L):L.push(createVNode(SpaceItem,{style:y.value,prefixCls:z,key:`nested-${V+oe}`},{default:()=>[re]},PatchFlags.PROPS|PatchFlags.STYLE,["style","prefixCls"]))}):isValidElementNode(j)&&L.push(createVNode(SpaceItem,{style:y.value,prefixCls:z,key:`LoopKey${V+ae}`},{default:()=>[j]},PatchFlags.PROPS|PatchFlags.STYLE,["style","prefixCls"]))}),L}return()=>{var $;const{spacer:V,direction:L}=e,z=renderSlot(n,"default",{key:0},()=>[]);if((($=z.children)!=null?$:[]).length===0)return null;if(isArray$3(z.children)){let j=k(z.children);if(V){const ae=j.length-1;j=j.reduce((re,oe,ue)=>{const le=[...re,oe];return ue!==ae&&le.push(createVNode("span",{style:[y.value,L==="vertical"?"width: 100%":null],key:ue},[isVNode$1(V)?V:createTextVNode(V,PatchFlags.TEXT)],PatchFlags.STYLE)),le},[])}return createVNode("div",{class:r.value,style:g.value},j,PatchFlags.STYLE|PatchFlags.CLASS)}return z.children}}}),ElSpace=withInstall(Space),statisticProps=buildProps({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:definePropType([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:definePropType([String,Object,Array])}}),__default__$p=defineComponent({name:"ElStatistic"}),_sfc_main$1J=defineComponent({...__default__$p,props:statisticProps,setup(e,{expose:n}){const r=e,g=useNamespace("statistic"),y=computed(()=>{const{value:k,formatter:$,precision:V,decimalSeparator:L,groupSeparator:z}=r;if(isFunction$3($))return $(k);if(!isNumber$1(k))return k;let[j,ae=""]=String(k).split(".");return ae=ae.padEnd(V,"0").slice(0,V>0?V:0),j=j.replace(/\B(?=(\d{3})+(?!\d))/g,z),[j,ae].join(ae?L:"")});return n({displayValue:y}),(k,$)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(g).b())},[k.$slots.title||k.title?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(g).e("head"))},[renderSlot(k.$slots,"title",{},()=>[createTextVNode(toDisplayString$1(k.title),1)])],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(g).e("content"))},[k.$slots.prefix||k.prefix?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(g).e("prefix"))},[renderSlot(k.$slots,"prefix",{},()=>[createBaseVNode("span",null,toDisplayString$1(k.prefix),1)])],2)):createCommentVNode("v-if",!0),createBaseVNode("span",{class:normalizeClass(unref(g).e("number")),style:normalizeStyle(k.valueStyle)},toDisplayString$1(unref(y)),7),k.$slots.suffix||k.suffix?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(g).e("suffix"))},[renderSlot(k.$slots,"suffix",{},()=>[createBaseVNode("span",null,toDisplayString$1(k.suffix),1)])],2)):createCommentVNode("v-if",!0)],2)],2))}});var Statistic=_export_sfc$1(_sfc_main$1J,[["__file","/home/runner/work/element-plus/element-plus/packages/components/statistic/src/statistic.vue"]]);const ElStatistic=withInstall(Statistic),countdownProps=buildProps({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:definePropType([Number,Object]),default:0},valueStyle:{type:definePropType([String,Object,Array])}}),countdownEmits={finish:()=>!0,[CHANGE_EVENT]:e=>isNumber$1(e)},timeUnits=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],getTime=e=>isNumber$1(e)?new Date(e).getTime():e.valueOf(),formatTime$1=(e,n)=>{let r=e;const g=/\[([^\]]*)]/g;return timeUnits.reduce((k,[$,V])=>{const L=new RegExp(`${$}+(?![^\\[\\]]*\\])`,"g");if(L.test(k)){const z=Math.floor(r/V);return r-=z*V,k.replace(L,j=>String(z).padStart(j.length,"0"))}return k},n).replace(g,"$1")},__default__$o=defineComponent({name:"ElCountdown"}),_sfc_main$1I=defineComponent({...__default__$o,props:countdownProps,emits:countdownEmits,setup(e,{expose:n,emit:r}){const g=e;let y;const k=ref(getTime(g.value)-Date.now()),$=computed(()=>formatTime$1(k.value,g.format)),V=j=>formatTime$1(j,g.format),L=()=>{y&&(cAF(y),y=void 0)},z=()=>{const j=getTime(g.value),ae=()=>{let re=j-Date.now();r("change",re),re<=0?(re=0,L(),r("finish")):y=rAF(ae),k.value=re};y=rAF(ae)};return watch(()=>[g.value,g.format],()=>{L(),z()},{immediate:!0}),onBeforeUnmount(()=>{L()}),n({displayValue:$}),(j,ae)=>(openBlock(),createBlock(unref(ElStatistic),{value:k.value,title:j.title,prefix:j.prefix,suffix:j.suffix,"value-style":j.valueStyle,formatter:V},createSlots({_:2},[renderList(j.$slots,(re,oe)=>({name:oe,fn:withCtx(()=>[renderSlot(j.$slots,oe)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var Countdown=_export_sfc$1(_sfc_main$1I,[["__file","/home/runner/work/element-plus/element-plus/packages/components/countdown/src/countdown.vue"]]);const ElCountdown=withInstall(Countdown),stepsProps=buildProps({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),stepsEmits={[CHANGE_EVENT]:(e,n)=>[e,n].every(isNumber$1)},__default__$n=defineComponent({name:"ElSteps"}),_sfc_main$1H=defineComponent({...__default__$n,props:stepsProps,emits:stepsEmits,setup(e,{emit:n}){const r=e,g=useNamespace("steps"),{children:y,addChild:k,removeChild:$}=useOrderedChildren(getCurrentInstance(),"ElStep");return watch(y,()=>{y.value.forEach((V,L)=>{V.setIndex(L)})}),provide("ElSteps",{props:r,steps:y,addStep:k,removeStep:$}),watch(()=>r.active,(V,L)=>{n(CHANGE_EVENT,V,L)}),(V,L)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(g).b(),unref(g).m(V.simple?"simple":V.direction)])},[renderSlot(V.$slots,"default")],2))}});var Steps=_export_sfc$1(_sfc_main$1H,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/steps.vue"]]);const stepProps=buildProps({title:{type:String,default:""},icon:{type:iconPropType},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),__default__$m=defineComponent({name:"ElStep"}),_sfc_main$1G=defineComponent({...__default__$m,props:stepProps,setup(e){const n=e,r=useNamespace("step"),g=ref(-1),y=ref({}),k=ref(""),$=inject("ElSteps"),V=getCurrentInstance();onMounted(()=>{watch([()=>$.props.active,()=>$.props.processStatus,()=>$.props.finishStatus],([xe])=>{Ne(xe)},{immediate:!0})}),onBeforeUnmount(()=>{$.removeStep($e.uid)});const L=computed(()=>n.status||k.value),z=computed(()=>{const xe=$.steps.value[g.value-1];return xe?xe.currentStatus:"wait"}),j=computed(()=>$.props.alignCenter),ae=computed(()=>$.props.direction==="vertical"),re=computed(()=>$.props.simple),oe=computed(()=>$.steps.value.length),ue=computed(()=>{var xe;return((xe=$.steps.value[oe.value-1])==null?void 0:xe.uid)===V?.uid}),le=computed(()=>re.value?"":$.props.space),de=computed(()=>[r.b(),r.is(re.value?"simple":$.props.direction),r.is("flex",ue.value&&!le.value&&!j.value),r.is("center",j.value&&!ae.value&&!re.value)]),he=computed(()=>{const xe={flexBasis:isNumber$1(le.value)?`${le.value}px`:le.value?le.value:`${100/(oe.value-(j.value?0:1))}%`};return ae.value||ue.value&&(xe.maxWidth=`${100/oe.value}%`),xe}),_e=xe=>{g.value=xe},Ce=xe=>{const Ie=xe==="wait",ze={transitionDelay:`${Ie?"-":""}${150*g.value}ms`},qe=xe===$.props.processStatus||Ie?0:100;ze.borderWidth=qe&&!re.value?"1px":0,ze[$.props.direction==="vertical"?"height":"width"]=`${qe}%`,y.value=ze},Ne=xe=>{xe>g.value?k.value=$.props.finishStatus:xe===g.value&&z.value!=="error"?k.value=$.props.processStatus:k.value="wait";const Ie=$.steps.value[g.value-1];Ie&&Ie.calcProgress(k.value)},$e=reactive({uid:V.uid,currentStatus:L,setIndex:_e,calcProgress:Ce});return $.addStep($e),(xe,Ie)=>(openBlock(),createElementBlock("div",{style:normalizeStyle(unref(he)),class:normalizeClass(unref(de))},[createCommentVNode(" icon & line "),createBaseVNode("div",{class:normalizeClass([unref(r).e("head"),unref(r).is(unref(L))])},[unref(re)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(r).e("line"))},[createBaseVNode("i",{class:normalizeClass(unref(r).e("line-inner")),style:normalizeStyle(y.value)},null,6)],2)),createBaseVNode("div",{class:normalizeClass([unref(r).e("icon"),unref(r).is(xe.icon||xe.$slots.icon?"icon":"text")])},[renderSlot(xe.$slots,"icon",{},()=>[xe.icon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(r).e("icon-inner"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(xe.icon)))]),_:1},8,["class"])):unref(L)==="success"?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(r).e("icon-inner"),unref(r).is("status")])},{default:withCtx(()=>[createVNode(unref(check_default))]),_:1},8,["class"])):unref(L)==="error"?(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass([unref(r).e("icon-inner"),unref(r).is("status")])},{default:withCtx(()=>[createVNode(unref(close_default))]),_:1},8,["class"])):unref(re)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:3,class:normalizeClass(unref(r).e("icon-inner"))},toDisplayString$1(g.value+1),3))])],2)],2),createCommentVNode(" title & description "),createBaseVNode("div",{class:normalizeClass(unref(r).e("main"))},[createBaseVNode("div",{class:normalizeClass([unref(r).e("title"),unref(r).is(unref(L))])},[renderSlot(xe.$slots,"title",{},()=>[createTextVNode(toDisplayString$1(xe.title),1)])],2),unref(re)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(r).e("arrow"))},null,2)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass([unref(r).e("description"),unref(r).is(unref(L))])},[renderSlot(xe.$slots,"description",{},()=>[createTextVNode(toDisplayString$1(xe.description),1)])],2))],2)],6))}});var Step=_export_sfc$1(_sfc_main$1G,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/item.vue"]]);const ElSteps=withInstall(Steps,{Step}),ElStep=withNoopInstall(Step),switchProps=buildProps({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:isValidComponentSize},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:iconPropType},activeActionIcon:{type:iconPropType},activeIcon:{type:iconPropType},inactiveIcon:{type:iconPropType},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:definePropType(Function)},id:String,tabindex:{type:[String,Number]},value:{type:[Boolean,String,Number],default:!1}}),switchEmits={[UPDATE_MODEL_EVENT]:e=>isBoolean$1(e)||isString$3(e)||isNumber$1(e),[CHANGE_EVENT]:e=>isBoolean$1(e)||isString$3(e)||isNumber$1(e),[INPUT_EVENT]:e=>isBoolean$1(e)||isString$3(e)||isNumber$1(e)},_hoisted_1$1p=["onClick"],_hoisted_2$1h=["id","aria-checked","aria-disabled","name","true-value","false-value","disabled","tabindex","onKeydown"],_hoisted_3$N=["aria-hidden"],_hoisted_4$I=["aria-hidden"],_hoisted_5$B=["aria-hidden"],COMPONENT_NAME$8="ElSwitch",__default__$l=defineComponent({name:COMPONENT_NAME$8}),_sfc_main$1F=defineComponent({...__default__$l,props:switchProps,emits:switchEmits,setup(e,{expose:n,emit:r}){const g=e,y=getCurrentInstance(),{formItem:k}=useFormItem(),$=useFormSize(),V=useNamespace("switch");(ze=>{ze.forEach(qe=>{useDeprecated({from:qe[0],replacement:qe[1],scope:COMPONENT_NAME$8,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},computed(()=>{var Et;return!!((Et=y.vnode.props)!=null&&Et[qe[2]])}))})})([['"value"','"model-value" or "v-model"',"value"],['"active-color"',"CSS var `--el-switch-on-color`","activeColor"],['"inactive-color"',"CSS var `--el-switch-off-color`","inactiveColor"],['"border-color"',"CSS var `--el-switch-border-color`","borderColor"]]);const{inputId:z}=useFormItemInputId(g,{formItemContext:k}),j=useFormDisabled(computed(()=>g.loading)),ae=ref(g.modelValue!==!1),re=ref(),oe=ref(),ue=computed(()=>[V.b(),V.m($.value),V.is("disabled",j.value),V.is("checked",Ce.value)]),le=computed(()=>[V.e("label"),V.em("label","left"),V.is("active",!Ce.value)]),de=computed(()=>[V.e("label"),V.em("label","right"),V.is("active",Ce.value)]),he=computed(()=>({width:addUnit(g.width)}));watch(()=>g.modelValue,()=>{ae.value=!0}),watch(()=>g.value,()=>{ae.value=!1});const _e=computed(()=>ae.value?g.modelValue:g.value),Ce=computed(()=>_e.value===g.activeValue);[g.activeValue,g.inactiveValue].includes(_e.value)||(r(UPDATE_MODEL_EVENT,g.inactiveValue),r(CHANGE_EVENT,g.inactiveValue),r(INPUT_EVENT,g.inactiveValue)),watch(Ce,ze=>{var qe;re.value.checked=ze,g.validateEvent&&((qe=k?.validate)==null||qe.call(k,"change").catch(Et=>void 0))});const Ne=()=>{const ze=Ce.value?g.inactiveValue:g.activeValue;r(UPDATE_MODEL_EVENT,ze),r(CHANGE_EVENT,ze),r(INPUT_EVENT,ze),nextTick(()=>{re.value.checked=Ce.value})},$e=()=>{if(j.value)return;const{beforeChange:ze}=g;if(!ze){Ne();return}const qe=ze();[isPromise(qe),isBoolean$1(qe)].includes(!0)||throwError(COMPONENT_NAME$8,"beforeChange must return type `Promise<boolean>` or `boolean`"),isPromise(qe)?qe.then(_n=>{_n&&Ne()}).catch(_n=>{}):qe&&Ne()},xe=computed(()=>V.cssVarBlock({...g.activeColor?{"on-color":g.activeColor}:null,...g.inactiveColor?{"off-color":g.inactiveColor}:null,...g.borderColor?{"border-color":g.borderColor}:null})),Ie=()=>{var ze,qe;(qe=(ze=re.value)==null?void 0:ze.focus)==null||qe.call(ze)};return onMounted(()=>{re.value.checked=Ce.value}),n({focus:Ie,checked:Ce}),(ze,qe)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(ue)),style:normalizeStyle(unref(xe)),onClick:withModifiers($e,["prevent"])},[createBaseVNode("input",{id:unref(z),ref_key:"input",ref:re,class:normalizeClass(unref(V).e("input")),type:"checkbox",role:"switch","aria-checked":unref(Ce),"aria-disabled":unref(j),name:ze.name,"true-value":ze.activeValue,"false-value":ze.inactiveValue,disabled:unref(j),tabindex:ze.tabindex,onChange:Ne,onKeydown:withKeys($e,["enter"])},null,42,_hoisted_2$1h),!ze.inlinePrompt&&(ze.inactiveIcon||ze.inactiveText)?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(le))},[ze.inactiveIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ze.inactiveIcon)))]),_:1})):createCommentVNode("v-if",!0),!ze.inactiveIcon&&ze.inactiveText?(openBlock(),createElementBlock("span",{key:1,"aria-hidden":unref(Ce)},toDisplayString$1(ze.inactiveText),9,_hoisted_3$N)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("span",{ref_key:"core",ref:oe,class:normalizeClass(unref(V).e("core")),style:normalizeStyle(unref(he))},[ze.inlinePrompt?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(V).e("inner"))},[ze.activeIcon||ze.inactiveIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(V).is("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(Ce)?ze.activeIcon:ze.inactiveIcon)))]),_:1},8,["class"])):ze.activeText||ze.inactiveText?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(V).is("text")),"aria-hidden":!unref(Ce)},toDisplayString$1(unref(Ce)?ze.activeText:ze.inactiveText),11,_hoisted_4$I)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(V).e("action"))},[ze.loading?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(V).is("loading"))},{default:withCtx(()=>[createVNode(unref(loading_default))]),_:1},8,["class"])):ze.activeActionIcon&&unref(Ce)?(openBlock(),createBlock(unref(ElIcon),{key:1},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ze.activeActionIcon)))]),_:1})):ze.inactiveActionIcon&&!unref(Ce)?(openBlock(),createBlock(unref(ElIcon),{key:2},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ze.inactiveActionIcon)))]),_:1})):createCommentVNode("v-if",!0)],2)],6),!ze.inlinePrompt&&(ze.activeIcon||ze.activeText)?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(unref(de))},[ze.activeIcon?(openBlock(),createBlock(unref(ElIcon),{key:0},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(ze.activeIcon)))]),_:1})):createCommentVNode("v-if",!0),!ze.activeIcon&&ze.activeText?(openBlock(),createElementBlock("span",{key:1,"aria-hidden":!unref(Ce)},toDisplayString$1(ze.activeText),9,_hoisted_5$B)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0)],14,_hoisted_1$1p))}});var Switch=_export_sfc$1(_sfc_main$1F,[["__file","/home/runner/work/element-plus/element-plus/packages/components/switch/src/switch.vue"]]);const ElSwitch=withInstall(Switch);/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var matchHtmlRegExp=/["'&<>]/,escapeHtml_1=escapeHtml$1;function escapeHtml$1(e){var n=""+e,r=matchHtmlRegExp.exec(n);if(!r)return n;var g,y="",k=0,$=0;for(k=r.index;k<n.length;k++){switch(n.charCodeAt(k)){case 34:g="&quot;";break;case 38:g="&amp;";break;case 39:g="&#39;";break;case 60:g="&lt;";break;case 62:g="&gt;";break;default:continue}$!==k&&(y+=n.substring($,k)),$=k+1,y+=g}return $!==k?y+n.substring($,k):y}const escapeHtml$2=getDefaultExportFromCjs(escapeHtml_1),getCell=function(e){var n;return(n=e.target)==null?void 0:n.closest("td")},orderBy=function(e,n,r,g,y){if(!n&&!g&&(!y||Array.isArray(y)&&!y.length))return e;typeof r=="string"?r=r==="descending"?-1:1:r=r&&r<0?-1:1;const k=g?null:function(V,L){return y?(Array.isArray(y)||(y=[y]),y.map(z=>typeof z=="string"?get(V,z):z(V,L,e))):(n!=="$key"&&isObject$3(V)&&"$value"in V&&(V=V.$value),[isObject$3(V)?get(V,n):V])},$=function(V,L){if(g)return g(V.value,L.value);for(let z=0,j=V.key.length;z<j;z++){if(V.key[z]<L.key[z])return-1;if(V.key[z]>L.key[z])return 1}return 0};return e.map((V,L)=>({value:V,index:L,key:k?k(V,L):null})).sort((V,L)=>{let z=$(V,L);return z||(z=V.index-L.index),z*+r}).map(V=>V.value)},getColumnById=function(e,n){let r=null;return e.columns.forEach(g=>{g.id===n&&(r=g)}),r},getColumnByKey=function(e,n){let r=null;for(let g=0;g<e.columns.length;g++){const y=e.columns[g];if(y.columnKey===n){r=y;break}}return r||throwError("ElTable",`No column matching with column-key: ${n}`),r},getColumnByCell=function(e,n,r){const g=(n.className||"").match(new RegExp(`${r}-table_[^\\s]+`,"gm"));return g?getColumnById(e,g[0]):null},getRowIdentity=(e,n)=>{if(!e)throw new Error("Row is required when get row identity");if(typeof n=="string"){if(!n.includes("."))return`${e[n]}`;const r=n.split(".");let g=e;for(const y of r)g=g[y];return`${g}`}else if(typeof n=="function")return n.call(null,e)},getKeysMap=function(e,n){const r={};return(e||[]).forEach((g,y)=>{r[getRowIdentity(g,n)]={row:g,index:y}}),r};function mergeOptions(e,n){const r={};let g;for(g in e)r[g]=e[g];for(g in n)if(hasOwn$1(n,g)){const y=n[g];typeof y<"u"&&(r[g]=y)}return r}function parseWidth(e){return e===""||e!==void 0&&(e=Number.parseInt(e,10),Number.isNaN(e)&&(e="")),e}function parseMinWidth(e){return e===""||e!==void 0&&(e=parseWidth(e),Number.isNaN(e)&&(e=80)),e}function parseHeight(e){return typeof e=="number"?e:typeof e=="string"?/^\d+(?:px)?$/.test(e)?Number.parseInt(e,10):e:null}function compose(...e){return e.length===0?n=>n:e.length===1?e[0]:e.reduce((n,r)=>(...g)=>n(r(...g)))}function toggleRowStatus(e,n,r){let g=!1;const y=e.indexOf(n),k=y!==-1,$=V=>{V==="add"?e.push(n):e.splice(y,1),g=!0,isArray$3(n.children)&&n.children.forEach(L=>{toggleRowStatus(e,L,r??!k)})};return isBoolean$1(r)?r&&!k?$("add"):!r&&k&&$("remove"):$(k?"remove":"add"),g}function walkTreeNode(e,n,r="children",g="hasChildren"){const y=$=>!(Array.isArray($)&&$.length);function k($,V,L){n($,V,L),V.forEach(z=>{if(z[g]){n(z,null,L+1);return}const j=z[r];y(j)||k(z,j,L+1)})}e.forEach($=>{if($[g]){n($,null,0);return}const V=$[r];y(V)||k($,V,0)})}let removePopper;function createTablePopper(e,n,r,g,y){y=merge$1({enterable:!0,showArrow:!0},y);const k=e?.dataset.prefix,$=e?.querySelector(`.${k}-scrollbar__wrap`);function V(){const de=y.effect==="light",he=document.createElement("div");return he.className=[`${k}-popper`,de?"is-light":"is-dark",y.popperClass||""].join(" "),r=escapeHtml$2(r),he.innerHTML=r,he.style.zIndex=String(g()),e?.appendChild(he),he}function L(){const de=document.createElement("div");return de.className=`${k}-popper__arrow`,de}function z(){j&&j.update()}removePopper?.(),removePopper=()=>{try{j&&j.destroy(),oe&&e?.removeChild(oe),n.removeEventListener("mouseenter",ae),n.removeEventListener("mouseleave",re),$?.removeEventListener("scroll",removePopper),removePopper=void 0}catch{}};let j=null,ae=z,re=removePopper;y.enterable&&({onOpen:ae,onClose:re}=useDelayedToggle({showAfter:y.showAfter,hideAfter:y.hideAfter,open:z,close:removePopper}));const oe=V();oe.onmouseenter=ae,oe.onmouseleave=re;const ue=[];if(y.offset&&ue.push({name:"offset",options:{offset:[0,y.offset]}}),y.showArrow){const de=oe.appendChild(L());ue.push({name:"arrow",options:{element:de,padding:10}})}const le=y.popperOptions||{};return j=yn(n,oe,{placement:y.placement||"top",strategy:"fixed",...le,modifiers:le.modifiers?ue.concat(le.modifiers):ue}),n.addEventListener("mouseenter",ae),n.addEventListener("mouseleave",re),$?.addEventListener("scroll",removePopper),j}function getCurrentColumns(e){return e.children?flatMap(e.children,getCurrentColumns):[e]}function getColSpan(e,n){return e+n.colSpan}const isFixedColumn=(e,n,r,g)=>{let y=0,k=e;const $=r.states.columns.value;if(g){const L=getCurrentColumns(g[e]);y=$.slice(0,$.indexOf(L[0])).reduce(getColSpan,0),k=y+L.reduce(getColSpan,0)-1}else y=e;let V;switch(n){case"left":k<r.states.fixedLeafColumnsLength.value&&(V="left");break;case"right":y>=$.length-r.states.rightFixedLeafColumnsLength.value&&(V="right");break;default:k<r.states.fixedLeafColumnsLength.value?V="left":y>=$.length-r.states.rightFixedLeafColumnsLength.value&&(V="right")}return V?{direction:V,start:y,after:k}:{}},getFixedColumnsClass=(e,n,r,g,y,k=0)=>{const $=[],{direction:V,start:L,after:z}=isFixedColumn(n,r,g,y);if(V){const j=V==="left";$.push(`${e}-fixed-column--${V}`),j&&z+k===g.states.fixedLeafColumnsLength.value-1?$.push("is-last-column"):!j&&L-k===g.states.columns.value.length-g.states.rightFixedLeafColumnsLength.value&&$.push("is-first-column")}return $};function getOffset$1(e,n){return e+(n.realWidth===null||Number.isNaN(n.realWidth)?Number(n.width):n.realWidth)}const getFixedColumnOffset=(e,n,r,g)=>{const{direction:y,start:k=0,after:$=0}=isFixedColumn(e,n,r,g);if(!y)return;const V={},L=y==="left",z=r.states.columns.value;return L?V.left=z.slice(0,k).reduce(getOffset$1,0):V.right=z.slice($+1).reverse().reduce(getOffset$1,0),V},ensurePosition=(e,n)=>{e&&(Number.isNaN(e[n])||(e[n]=`${e[n]}px`))};function useExpand(e){const n=getCurrentInstance(),r=ref(!1),g=ref([]);return{updateExpandRows:()=>{const L=e.data.value||[],z=e.rowKey.value;if(r.value)g.value=L.slice();else if(z){const j=getKeysMap(g.value,z);g.value=L.reduce((ae,re)=>{const oe=getRowIdentity(re,z);return j[oe]&&ae.push(re),ae},[])}else g.value=[]},toggleRowExpansion:(L,z)=>{toggleRowStatus(g.value,L,z)&&n.emit("expand-change",L,g.value.slice())},setExpandRowKeys:L=>{n.store.assertRowKey();const z=e.data.value||[],j=e.rowKey.value,ae=getKeysMap(z,j);g.value=L.reduce((re,oe)=>{const ue=ae[oe];return ue&&re.push(ue.row),re},[])},isRowExpanded:L=>{const z=e.rowKey.value;return z?!!getKeysMap(g.value,z)[getRowIdentity(L,z)]:g.value.includes(L)},states:{expandRows:g,defaultExpandAll:r}}}function useCurrent(e){const n=getCurrentInstance(),r=ref(null),g=ref(null),y=z=>{n.store.assertRowKey(),r.value=z,$(z)},k=()=>{r.value=null},$=z=>{const{data:j,rowKey:ae}=e;let re=null;ae.value&&(re=(unref(j)||[]).find(oe=>getRowIdentity(oe,ae.value)===z)),g.value=re,n.emit("current-change",g.value,null)};return{setCurrentRowKey:y,restoreCurrentRowKey:k,setCurrentRowByKey:$,updateCurrentRow:z=>{const j=g.value;if(z&&z!==j){g.value=z,n.emit("current-change",g.value,j);return}!z&&j&&(g.value=null,n.emit("current-change",null,j))},updateCurrentRowData:()=>{const z=e.rowKey.value,j=e.data.value||[],ae=g.value;if(!j.includes(ae)&&ae){if(z){const re=getRowIdentity(ae,z);$(re)}else g.value=null;g.value===null&&n.emit("current-change",null,ae)}else r.value&&($(r.value),k())},states:{_currentRowKey:r,currentRow:g}}}function useTree$2(e){const n=ref([]),r=ref({}),g=ref(16),y=ref(!1),k=ref({}),$=ref("hasChildren"),V=ref("children"),L=getCurrentInstance(),z=computed(()=>{if(!e.rowKey.value)return{};const he=e.data.value||[];return ae(he)}),j=computed(()=>{const he=e.rowKey.value,_e=Object.keys(k.value),Ce={};return _e.length&&_e.forEach(Ne=>{if(k.value[Ne].length){const $e={children:[]};k.value[Ne].forEach(xe=>{const Ie=getRowIdentity(xe,he);$e.children.push(Ie),xe[$.value]&&!Ce[Ie]&&(Ce[Ie]={children:[]})}),Ce[Ne]=$e}}),Ce}),ae=he=>{const _e=e.rowKey.value,Ce={};return walkTreeNode(he,(Ne,$e,xe)=>{const Ie=getRowIdentity(Ne,_e);Array.isArray($e)?Ce[Ie]={children:$e.map(ze=>getRowIdentity(ze,_e)),level:xe}:y.value&&(Ce[Ie]={children:[],lazy:!0,level:xe})},V.value,$.value),Ce},re=(he=!1,_e=(Ce=>(Ce=L.store)==null?void 0:Ce.states.defaultExpandAll.value)())=>{var Ce;const Ne=z.value,$e=j.value,xe=Object.keys(Ne),Ie={};if(xe.length){const ze=unref(r),qe=[],Et=(Dt,Sn)=>{if(he)return n.value?_e||n.value.includes(Sn):!!(_e||Dt?.expanded);{const hn=_e||n.value&&n.value.includes(Sn);return!!(Dt?.expanded||hn)}};xe.forEach(Dt=>{const Sn=ze[Dt],hn={...Ne[Dt]};if(hn.expanded=Et(Sn,Dt),hn.lazy){const{loaded:Vn=!1,loading:Mn=!1}=Sn||{};hn.loaded=!!Vn,hn.loading=!!Mn,qe.push(Dt)}Ie[Dt]=hn});const _n=Object.keys($e);y.value&&_n.length&&qe.length&&_n.forEach(Dt=>{const Sn=ze[Dt],hn=$e[Dt].children;if(qe.includes(Dt)){if(Ie[Dt].children.length!==0)throw new Error("[ElTable]children must be an empty array.");Ie[Dt].children=hn}else{const{loaded:Vn=!1,loading:Mn=!1}=Sn||{};Ie[Dt]={lazy:!0,loaded:!!Vn,loading:!!Mn,expanded:Et(Sn,Dt),children:hn,level:""}}})}r.value=Ie,(Ce=L.store)==null||Ce.updateTableScrollY()};watch(()=>n.value,()=>{re(!0)}),watch(()=>z.value,()=>{re()}),watch(()=>j.value,()=>{re()});const oe=he=>{n.value=he,re()},ue=(he,_e)=>{L.store.assertRowKey();const Ce=e.rowKey.value,Ne=getRowIdentity(he,Ce),$e=Ne&&r.value[Ne];if(Ne&&$e&&"expanded"in $e){const xe=$e.expanded;_e=typeof _e>"u"?!$e.expanded:_e,r.value[Ne].expanded=_e,xe!==_e&&L.emit("expand-change",he,_e),L.store.updateTableScrollY()}},le=he=>{L.store.assertRowKey();const _e=e.rowKey.value,Ce=getRowIdentity(he,_e),Ne=r.value[Ce];y.value&&Ne&&"loaded"in Ne&&!Ne.loaded?de(he,Ce,Ne):ue(he,void 0)},de=(he,_e,Ce)=>{const{load:Ne}=L.props;Ne&&!r.value[_e].loaded&&(r.value[_e].loading=!0,Ne(he,Ce,$e=>{if(!Array.isArray($e))throw new TypeError("[ElTable] data must be an array");r.value[_e].loading=!1,r.value[_e].loaded=!0,r.value[_e].expanded=!0,$e.length&&(k.value[_e]=$e),L.emit("expand-change",he,!0)}))};return{loadData:de,loadOrToggle:le,toggleTreeExpansion:ue,updateTreeExpandKeys:oe,updateTreeData:re,normalize:ae,states:{expandRowKeys:n,treeData:r,indent:g,lazy:y,lazyTreeNodeMap:k,lazyColumnIdentifier:$,childrenColumnName:V}}}const sortData=(e,n)=>{const r=n.sortingColumn;return!r||typeof r.sortable=="string"?e:orderBy(e,n.sortProp,n.sortOrder,r.sortMethod,r.sortBy)},doFlattenColumns=e=>{const n=[];return e.forEach(r=>{r.children&&r.children.length>0?n.push.apply(n,doFlattenColumns(r.children)):n.push(r)}),n};function useWatcher$1(){var e;const n=getCurrentInstance(),{size:r}=toRefs((e=n.proxy)==null?void 0:e.$props),g=ref(null),y=ref([]),k=ref([]),$=ref(!1),V=ref([]),L=ref([]),z=ref([]),j=ref([]),ae=ref([]),re=ref([]),oe=ref([]),ue=ref([]),le=[],de=ref(0),he=ref(0),_e=ref(0),Ce=ref(!1),Ne=ref([]),$e=ref(!1),xe=ref(!1),Ie=ref(null),ze=ref({}),qe=ref(null),Et=ref(null),_n=ref(null),Dt=ref(null),Sn=ref(null);watch(y,()=>n.state&&$n(!1),{deep:!0});const hn=()=>{if(!g.value)throw new Error("[ElTable] prop row-key is required")},Vn=Pt=>{var Lt;(Lt=Pt.children)==null||Lt.forEach(bn=>{bn.fixed=Pt.fixed,Vn(bn)})},Mn=()=>{V.value.forEach(Cn=>{Vn(Cn)}),j.value=V.value.filter(Cn=>Cn.fixed===!0||Cn.fixed==="left"),ae.value=V.value.filter(Cn=>Cn.fixed==="right"),j.value.length>0&&V.value[0]&&V.value[0].type==="selection"&&!V.value[0].fixed&&(V.value[0].fixed=!0,j.value.unshift(V.value[0]));const Pt=V.value.filter(Cn=>!Cn.fixed);L.value=[].concat(j.value).concat(Pt).concat(ae.value);const Lt=doFlattenColumns(Pt),bn=doFlattenColumns(j.value),jt=doFlattenColumns(ae.value);de.value=Lt.length,he.value=bn.length,_e.value=jt.length,z.value=[].concat(bn).concat(Lt).concat(jt),$.value=j.value.length>0||ae.value.length>0},$n=(Pt,Lt=!1)=>{Pt&&Mn(),Lt?n.state.doLayout():n.state.debouncedUpdateLayout()},Nn=Pt=>Ne.value.includes(Pt),kn=()=>{Ce.value=!1,Ne.value.length&&(Ne.value=[],n.emit("selection-change",[]))},jn=()=>{let Pt;if(g.value){Pt=[];const Lt=getKeysMap(Ne.value,g.value),bn=getKeysMap(y.value,g.value);for(const jt in Lt)hasOwn$1(Lt,jt)&&!bn[jt]&&Pt.push(Lt[jt].row)}else Pt=Ne.value.filter(Lt=>!y.value.includes(Lt));if(Pt.length){const Lt=Ne.value.filter(bn=>!Pt.includes(bn));Ne.value=Lt,n.emit("selection-change",Lt.slice())}},Fn=()=>(Ne.value||[]).slice(),Tn=(Pt,Lt=void 0,bn=!0)=>{if(toggleRowStatus(Ne.value,Pt,Lt)){const Cn=(Ne.value||[]).slice();bn&&n.emit("select",Cn,Pt),n.emit("selection-change",Cn)}},Hn=()=>{var Pt,Lt;const bn=xe.value?!Ce.value:!(Ce.value||Ne.value.length);Ce.value=bn;let jt=!1,Cn=0;const xn=(Lt=(Pt=n?.store)==null?void 0:Pt.states)==null?void 0:Lt.rowKey.value;y.value.forEach((In,Ln)=>{const An=Ln+Cn;Ie.value?Ie.value.call(null,In,An)&&toggleRowStatus(Ne.value,In,bn)&&(jt=!0):toggleRowStatus(Ne.value,In,bn)&&(jt=!0),Cn+=Zn(getRowIdentity(In,xn))}),jt&&n.emit("selection-change",Ne.value?Ne.value.slice():[]),n.emit("select-all",Ne.value)},la=()=>{const Pt=getKeysMap(Ne.value,g.value);y.value.forEach(Lt=>{const bn=getRowIdentity(Lt,g.value),jt=Pt[bn];jt&&(Ne.value[jt.index]=Lt)})},ca=()=>{var Pt,Lt,bn;if(((Pt=y.value)==null?void 0:Pt.length)===0){Ce.value=!1;return}let jt;g.value&&(jt=getKeysMap(Ne.value,g.value));const Cn=function(An){return jt?!!jt[getRowIdentity(An,g.value)]:Ne.value.includes(An)};let xn=!0,In=0,Ln=0;for(let An=0,zn=(y.value||[]).length;An<zn;An++){const Jn=(bn=(Lt=n?.store)==null?void 0:Lt.states)==null?void 0:bn.rowKey.value,Qn=An+Ln,ta=y.value[An],Pn=Ie.value&&Ie.value.call(null,ta,Qn);if(Cn(ta))In++;else if(!Ie.value||Pn){xn=!1;break}Ln+=Zn(getRowIdentity(ta,Jn))}In===0&&(xn=!1),Ce.value=xn},Zn=Pt=>{var Lt;if(!n||!n.store)return 0;const{treeData:bn}=n.store.states;let jt=0;const Cn=(Lt=bn.value[Pt])==null?void 0:Lt.children;return Cn&&(jt+=Cn.length,Cn.forEach(xn=>{jt+=Zn(xn)})),jt},Bn=(Pt,Lt)=>{Array.isArray(Pt)||(Pt=[Pt]);const bn={};return Pt.forEach(jt=>{ze.value[jt.id]=Lt,bn[jt.columnKey||jt.id]=Lt}),bn},Wn=(Pt,Lt,bn)=>{Et.value&&Et.value!==Pt&&(Et.value.order=null),Et.value=Pt,_n.value=Lt,Dt.value=bn},da=()=>{let Pt=unref(k);Object.keys(ze.value).forEach(Lt=>{const bn=ze.value[Lt];if(!bn||bn.length===0)return;const jt=getColumnById({columns:z.value},Lt);jt&&jt.filterMethod&&(Pt=Pt.filter(Cn=>bn.some(xn=>jt.filterMethod.call(null,xn,Cn,jt))))}),qe.value=Pt},ga=()=>{y.value=sortData(qe.value,{sortingColumn:Et.value,sortProp:_n.value,sortOrder:Dt.value})},Ca=(Pt=void 0)=>{Pt&&Pt.filter||da(),ga()},ra=Pt=>{const{tableHeaderRef:Lt}=n.refs;if(!Lt)return;const bn=Object.assign({},Lt.filterPanels),jt=Object.keys(bn);if(jt.length)if(typeof Pt=="string"&&(Pt=[Pt]),Array.isArray(Pt)){const Cn=Pt.map(xn=>getColumnByKey({columns:z.value},xn));jt.forEach(xn=>{const In=Cn.find(Ln=>Ln.id===xn);In&&(In.filteredValue=[])}),n.store.commit("filterChange",{column:Cn,values:[],silent:!0,multi:!0})}else jt.forEach(Cn=>{const xn=z.value.find(In=>In.id===Cn);xn&&(xn.filteredValue=[])}),ze.value={},n.store.commit("filterChange",{column:{},values:[],silent:!0})},Gn=()=>{Et.value&&(Wn(null,null,null),n.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:vn,toggleRowExpansion:Kn,updateExpandRows:En,states:kt,isRowExpanded:At}=useExpand({data:y,rowKey:g}),{updateTreeExpandKeys:Dn,toggleTreeExpansion:Xn,updateTreeData:aa,loadOrToggle:sa,states:ia}=useTree$2({data:y,rowKey:g}),{updateCurrentRowData:ma,updateCurrentRow:ua,setCurrentRowKey:pe,states:Oe}=useCurrent({data:y,rowKey:g});return{assertRowKey:hn,updateColumns:Mn,scheduleLayout:$n,isSelected:Nn,clearSelection:kn,cleanSelection:jn,getSelectionRows:Fn,toggleRowSelection:Tn,_toggleAllSelection:Hn,toggleAllSelection:null,updateSelectionByRowKey:la,updateAllSelected:ca,updateFilters:Bn,updateCurrentRow:ua,updateSort:Wn,execFilter:da,execSort:ga,execQuery:Ca,clearFilter:ra,clearSort:Gn,toggleRowExpansion:Kn,setExpandRowKeysAdapter:Pt=>{vn(Pt),Dn(Pt)},setCurrentRowKey:pe,toggleRowExpansionAdapter:(Pt,Lt)=>{z.value.some(({type:jt})=>jt==="expand")?Kn(Pt,Lt):Xn(Pt,Lt)},isRowExpanded:At,updateExpandRows:En,updateCurrentRowData:ma,loadOrToggle:sa,updateTreeData:aa,states:{tableSize:r,rowKey:g,data:y,_data:k,isComplex:$,_columns:V,originColumns:L,columns:z,fixedColumns:j,rightFixedColumns:ae,leafColumns:re,fixedLeafColumns:oe,rightFixedLeafColumns:ue,updateOrderFns:le,leafColumnsLength:de,fixedLeafColumnsLength:he,rightFixedLeafColumnsLength:_e,isAllSelected:Ce,selection:Ne,reserveSelection:$e,selectOnIndeterminate:xe,selectable:Ie,filters:ze,filteredData:qe,sortingColumn:Et,sortProp:_n,sortOrder:Dt,hoverRow:Sn,...kt,...ia,...Oe}}}function replaceColumn(e,n){return e.map(r=>{var g;return r.id===n.id?n:((g=r.children)!=null&&g.length&&(r.children=replaceColumn(r.children,n)),r)})}function sortColumn(e){e.forEach(n=>{var r,g;n.no=(r=n.getColumnIndex)==null?void 0:r.call(n),(g=n.children)!=null&&g.length&&sortColumn(n.children)}),e.sort((n,r)=>n.no-r.no)}function useStore(){const e=getCurrentInstance(),n=useWatcher$1();return{ns:useNamespace("table"),...n,mutations:{setData($,V){const L=unref($._data)!==V;$.data.value=V,$._data.value=V,e.store.execQuery(),e.store.updateCurrentRowData(),e.store.updateExpandRows(),e.store.updateTreeData(e.store.states.defaultExpandAll.value),unref($.reserveSelection)?(e.store.assertRowKey(),e.store.updateSelectionByRowKey()):L?e.store.clearSelection():e.store.cleanSelection(),e.store.updateAllSelected(),e.$ready&&e.store.scheduleLayout()},insertColumn($,V,L,z){const j=unref($._columns);let ae=[];L?(L&&!L.children&&(L.children=[]),L.children.push(V),ae=replaceColumn(j,L)):(j.push(V),ae=j),sortColumn(ae),$._columns.value=ae,$.updateOrderFns.push(z),V.type==="selection"&&($.selectable.value=V.selectable,$.reserveSelection.value=V.reserveSelection),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},updateColumnOrder($,V){var L;((L=V.getColumnIndex)==null?void 0:L.call(V))!==V.no&&(sortColumn($._columns.value),e.$ready&&e.store.updateColumns())},removeColumn($,V,L,z){const j=unref($._columns)||[];if(L)L.children.splice(L.children.findIndex(re=>re.id===V.id),1),nextTick(()=>{var re;((re=L.children)==null?void 0:re.length)===0&&delete L.children}),$._columns.value=replaceColumn(j,L);else{const re=j.indexOf(V);re>-1&&(j.splice(re,1),$._columns.value=j)}const ae=$.updateOrderFns.indexOf(z);ae>-1&&$.updateOrderFns.splice(ae,1),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},sort($,V){const{prop:L,order:z,init:j}=V;if(L){const ae=unref($.columns).find(re=>re.property===L);ae&&(ae.order=z,e.store.updateSort(ae,L,z),e.store.commit("changeSortCondition",{init:j}))}},changeSortCondition($,V){const{sortingColumn:L,sortProp:z,sortOrder:j}=$,ae=unref(L),re=unref(z),oe=unref(j);oe===null&&($.sortingColumn.value=null,$.sortProp.value=null);const ue={filter:!0};e.store.execQuery(ue),(!V||!(V.silent||V.init))&&e.emit("sort-change",{column:ae,prop:re,order:oe}),e.store.updateTableScrollY()},filterChange($,V){const{column:L,values:z,silent:j}=V,ae=e.store.updateFilters(L,z);e.store.execQuery(),j||e.emit("filter-change",ae),e.store.updateTableScrollY()},toggleAllSelection(){e.store.toggleAllSelection()},rowSelectedChanged($,V){e.store.toggleRowSelection(V),e.store.updateAllSelected()},setHoverRow($,V){$.hoverRow.value=V},setCurrentRow($,V){e.store.updateCurrentRow(V)}},commit:function($,...V){const L=e.store.mutations;if(L[$])L[$].apply(e,[e.store.states].concat(V));else throw new Error(`Action not found: ${$}`)},updateTableScrollY:function(){nextTick(()=>e.layout.updateScrollY.apply(e.layout))}}}const InitialStateMap={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"}};function createStore(e,n){if(!e)throw new Error("Table is required.");const r=useStore();return r.toggleAllSelection=debounce(r._toggleAllSelection,10),Object.keys(InitialStateMap).forEach(g=>{handleValue(getArrKeysValue(n,g),g,r)}),proxyTableProps(r,n),r}function proxyTableProps(e,n){Object.keys(InitialStateMap).forEach(r=>{watch(()=>getArrKeysValue(n,r),g=>{handleValue(g,r,e)})})}function handleValue(e,n,r){let g=e,y=InitialStateMap[n];typeof InitialStateMap[n]=="object"&&(y=y.key,g=g||InitialStateMap[n].default),r.states[y].value=g}function getArrKeysValue(e,n){if(n.includes(".")){const r=n.split(".");let g=e;return r.forEach(y=>{g=g[y]}),g}else return e[n]}class TableLayout{constructor(n){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=ref(null),this.scrollX=ref(!1),this.scrollY=ref(!1),this.bodyWidth=ref(null),this.fixedWidth=ref(null),this.rightFixedWidth=ref(null),this.gutterWidth=0;for(const r in n)hasOwn$1(n,r)&&(isRef(this[r])?this[r].value=n[r]:this[r]=n[r]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const r=this.table.refs.scrollBarRef;if(this.table.vnode.el&&r?.wrapRef){let g=!0;const y=this.scrollY.value;return g=r.wrapRef.scrollHeight>r.wrapRef.clientHeight,this.scrollY.value=g,y!==g}return!1}setHeight(n,r="height"){if(!isClient)return;const g=this.table.vnode.el;if(n=parseHeight(n),this.height.value=Number(n),!g&&(n||n===0))return nextTick(()=>this.setHeight(n,r));typeof n=="number"?(g.style[r]=`${n}px`,this.updateElsHeight()):typeof n=="string"&&(g.style[r]=n,this.updateElsHeight())}setMaxHeight(n){this.setHeight(n,"max-height")}getFlattenColumns(){const n=[];return this.table.store.states.columns.value.forEach(g=>{g.isColumnGroup?n.push.apply(n,g.columns):n.push(g)}),n}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(n){if(!n)return!0;let r=n;for(;r.tagName!=="DIV";){if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1}updateColumnsWidth(){if(!isClient)return;const n=this.fit,r=this.table.vnode.el.clientWidth;let g=0;const y=this.getFlattenColumns(),k=y.filter(L=>typeof L.width!="number");if(y.forEach(L=>{typeof L.width=="number"&&L.realWidth&&(L.realWidth=null)}),k.length>0&&n){if(y.forEach(L=>{g+=Number(L.width||L.minWidth||80)}),g<=r){this.scrollX.value=!1;const L=r-g;if(k.length===1)k[0].realWidth=Number(k[0].minWidth||80)+L;else{const z=k.reduce((re,oe)=>re+Number(oe.minWidth||80),0),j=L/z;let ae=0;k.forEach((re,oe)=>{if(oe===0)return;const ue=Math.floor(Number(re.minWidth||80)*j);ae+=ue,re.realWidth=Number(re.minWidth||80)+ue}),k[0].realWidth=Number(k[0].minWidth||80)+L-ae}}else this.scrollX.value=!0,k.forEach(L=>{L.realWidth=Number(L.minWidth)});this.bodyWidth.value=Math.max(g,r),this.table.state.resizeState.value.width=this.bodyWidth.value}else y.forEach(L=>{!L.width&&!L.minWidth?L.realWidth=80:L.realWidth=Number(L.width||L.minWidth),g+=L.realWidth}),this.scrollX.value=g>r,this.bodyWidth.value=g;const $=this.store.states.fixedColumns.value;if($.length>0){let L=0;$.forEach(z=>{L+=Number(z.realWidth||z.width)}),this.fixedWidth.value=L}const V=this.store.states.rightFixedColumns.value;if(V.length>0){let L=0;V.forEach(z=>{L+=Number(z.realWidth||z.width)}),this.rightFixedWidth.value=L}this.notifyObservers("columns")}addObserver(n){this.observers.push(n)}removeObserver(n){const r=this.observers.indexOf(n);r!==-1&&this.observers.splice(r,1)}notifyObservers(n){this.observers.forEach(g=>{var y,k;switch(n){case"columns":(y=g.state)==null||y.onColumnsChange(this);break;case"scrollable":(k=g.state)==null||k.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${n}.`)}})}}const{CheckboxGroup:ElCheckboxGroup}=ElCheckbox,_sfc_main$1E=defineComponent({name:"ElTableFilterPanel",components:{ElCheckbox,ElCheckboxGroup,ElScrollbar,ElTooltip,ElIcon,ArrowDown:arrow_down_default,ArrowUp:arrow_up_default},directives:{ClickOutside},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(e){const n=getCurrentInstance(),{t:r}=useLocale(),g=useNamespace("table-filter"),y=n?.parent;y.filterPanels.value[e.column.id]||(y.filterPanels.value[e.column.id]=n);const k=ref(!1),$=ref(null),V=computed(()=>e.column&&e.column.filters),L=computed({get:()=>{var Ne;return(((Ne=e.column)==null?void 0:Ne.filteredValue)||[])[0]},set:Ne=>{z.value&&(typeof Ne<"u"&&Ne!==null?z.value.splice(0,1,Ne):z.value.splice(0,1))}}),z=computed({get(){return e.column?e.column.filteredValue||[]:[]},set(Ne){e.column&&e.upDataColumn("filteredValue",Ne)}}),j=computed(()=>e.column?e.column.filterMultiple:!0),ae=Ne=>Ne.value===L.value,re=()=>{k.value=!1},oe=Ne=>{Ne.stopPropagation(),k.value=!k.value},ue=()=>{k.value=!1},le=()=>{_e(z.value),re()},de=()=>{z.value=[],_e(z.value),re()},he=Ne=>{L.value=Ne,_e(typeof Ne<"u"&&Ne!==null?z.value:[]),re()},_e=Ne=>{e.store.commit("filterChange",{column:e.column,values:Ne}),e.store.updateAllSelected()};watch(k,Ne=>{e.column&&e.upDataColumn("filterOpened",Ne)},{immediate:!0});const Ce=computed(()=>{var Ne,$e;return($e=(Ne=$.value)==null?void 0:Ne.popperRef)==null?void 0:$e.contentRef});return{tooltipVisible:k,multiple:j,filteredValue:z,filterValue:L,filters:V,handleConfirm:le,handleReset:de,handleSelect:he,isActive:ae,t:r,ns:g,showFilterPanel:oe,hideFilterPanel:ue,popperPaneRef:Ce,tooltip:$}}}),_hoisted_1$1o={key:0},_hoisted_2$1g=["disabled"],_hoisted_3$M=["label","onClick"];function _sfc_render$4(e,n,r,g,y,k){const $=resolveComponent("el-checkbox"),V=resolveComponent("el-checkbox-group"),L=resolveComponent("el-scrollbar"),z=resolveComponent("arrow-up"),j=resolveComponent("arrow-down"),ae=resolveComponent("el-icon"),re=resolveComponent("el-tooltip"),oe=resolveDirective("click-outside");return openBlock(),createBlock(re,{ref:"tooltip",visible:e.tooltipVisible,offset:0,placement:e.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":e.ns.b(),persistent:""},{content:withCtx(()=>[e.multiple?(openBlock(),createElementBlock("div",_hoisted_1$1o,[createBaseVNode("div",{class:normalizeClass(e.ns.e("content"))},[createVNode(L,{"wrap-class":e.ns.e("wrap")},{default:withCtx(()=>[createVNode(V,{modelValue:e.filteredValue,"onUpdate:modelValue":n[0]||(n[0]=ue=>e.filteredValue=ue),class:normalizeClass(e.ns.e("checkbox-group"))},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.filters,ue=>(openBlock(),createBlock($,{key:ue.value,label:ue.value},{default:withCtx(()=>[createTextVNode(toDisplayString$1(ue.text),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","class"])]),_:1},8,["wrap-class"])],2),createBaseVNode("div",{class:normalizeClass(e.ns.e("bottom"))},[createBaseVNode("button",{class:normalizeClass({[e.ns.is("disabled")]:e.filteredValue.length===0}),disabled:e.filteredValue.length===0,type:"button",onClick:n[1]||(n[1]=(...ue)=>e.handleConfirm&&e.handleConfirm(...ue))},toDisplayString$1(e.t("el.table.confirmFilter")),11,_hoisted_2$1g),createBaseVNode("button",{type:"button",onClick:n[2]||(n[2]=(...ue)=>e.handleReset&&e.handleReset(...ue))},toDisplayString$1(e.t("el.table.resetFilter")),1)],2)])):(openBlock(),createElementBlock("ul",{key:1,class:normalizeClass(e.ns.e("list"))},[createBaseVNode("li",{class:normalizeClass([e.ns.e("list-item"),{[e.ns.is("active")]:e.filterValue===void 0||e.filterValue===null}]),onClick:n[3]||(n[3]=ue=>e.handleSelect(null))},toDisplayString$1(e.t("el.table.clearFilter")),3),(openBlock(!0),createElementBlock(Fragment,null,renderList(e.filters,ue=>(openBlock(),createElementBlock("li",{key:ue.value,class:normalizeClass([e.ns.e("list-item"),e.ns.is("active",e.isActive(ue))]),label:ue.value,onClick:le=>e.handleSelect(ue.value)},toDisplayString$1(ue.text),11,_hoisted_3$M))),128))],2))]),default:withCtx(()=>[withDirectives((openBlock(),createElementBlock("span",{class:normalizeClass([`${e.ns.namespace.value}-table__column-filter-trigger`,`${e.ns.namespace.value}-none-outline`]),onClick:n[4]||(n[4]=(...ue)=>e.showFilterPanel&&e.showFilterPanel(...ue))},[createVNode(ae,null,{default:withCtx(()=>[e.column.filterOpened?(openBlock(),createBlock(z,{key:0})):(openBlock(),createBlock(j,{key:1}))]),_:1})],2)),[[oe,e.hideFilterPanel,e.popperPaneRef]])]),_:1},8,["visible","placement","popper-class"])}var FilterPanel=_export_sfc$1(_sfc_main$1E,[["render",_sfc_render$4],["__file","/home/runner/work/element-plus/element-plus/packages/components/table/src/filter-panel.vue"]]);function useLayoutObserver(e){const n=getCurrentInstance();onBeforeMount(()=>{r.value.addObserver(n)}),onMounted(()=>{g(r.value),y(r.value)}),onUpdated(()=>{g(r.value),y(r.value)}),onUnmounted(()=>{r.value.removeObserver(n)});const r=computed(()=>{const k=e.layout;if(!k)throw new Error("Can not find table layout.");return k}),g=k=>{var $;const V=(($=e.vnode.el)==null?void 0:$.querySelectorAll("colgroup > col"))||[];if(!V.length)return;const L=k.getFlattenColumns(),z={};L.forEach(j=>{z[j.id]=j});for(let j=0,ae=V.length;j<ae;j++){const re=V[j],oe=re.getAttribute("name"),ue=z[oe];ue&&re.setAttribute("width",ue.realWidth||ue.width)}},y=k=>{var $,V;const L=(($=e.vnode.el)==null?void 0:$.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let j=0,ae=L.length;j<ae;j++)L[j].setAttribute("width",k.scrollY.value?k.gutterWidth:"0");const z=((V=e.vnode.el)==null?void 0:V.querySelectorAll("th.gutter"))||[];for(let j=0,ae=z.length;j<ae;j++){const re=z[j];re.style.width=k.scrollY.value?`${k.gutterWidth}px`:"0",re.style.display=k.scrollY.value?"":"none"}};return{tableLayout:r.value,onColumnsChange:g,onScrollableChange:y}}const TABLE_INJECTION_KEY=Symbol("ElTable");function useEvent(e,n){const r=getCurrentInstance(),g=inject(TABLE_INJECTION_KEY),y=le=>{le.stopPropagation()},k=(le,de)=>{!de.filters&&de.sortable?ue(le,de,!1):de.filterable&&!de.sortable&&y(le),g?.emit("header-click",de,le)},$=(le,de)=>{g?.emit("header-contextmenu",de,le)},V=ref(null),L=ref(!1),z=ref({}),j=(le,de)=>{if(isClient&&!(de.children&&de.children.length>0)&&V.value&&e.border){L.value=!0;const he=g;n("set-drag-visible",!0);const Ce=(he?.vnode.el).getBoundingClientRect().left,Ne=r.vnode.el.querySelector(`th.${de.id}`),$e=Ne.getBoundingClientRect(),xe=$e.left-Ce+30;addClass(Ne,"noclick"),z.value={startMouseLeft:le.clientX,startLeft:$e.right-Ce,startColumnLeft:$e.left-Ce,tableLeft:Ce};const Ie=he?.refs.resizeProxy;Ie.style.left=`${z.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const ze=Et=>{const _n=Et.clientX-z.value.startMouseLeft,Dt=z.value.startLeft+_n;Ie.style.left=`${Math.max(xe,Dt)}px`},qe=()=>{if(L.value){const{startColumnLeft:Et,startLeft:_n}=z.value,Sn=Number.parseInt(Ie.style.left,10)-Et;de.width=de.realWidth=Sn,he?.emit("header-dragend",de.width,_n-Et,de,le),requestAnimationFrame(()=>{e.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",L.value=!1,V.value=null,z.value={},n("set-drag-visible",!1)}document.removeEventListener("mousemove",ze),document.removeEventListener("mouseup",qe),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{removeClass(Ne,"noclick")},0)};document.addEventListener("mousemove",ze),document.addEventListener("mouseup",qe)}},ae=(le,de)=>{if(de.children&&de.children.length>0)return;const he=le.target;if(!isElement$1(he))return;const _e=he?.closest("th");if(!(!de||!de.resizable)&&!L.value&&e.border){const Ce=_e.getBoundingClientRect(),Ne=document.body.style;Ce.width>12&&Ce.right-le.pageX<8?(Ne.cursor="col-resize",hasClass(_e,"is-sortable")&&(_e.style.cursor="col-resize"),V.value=de):L.value||(Ne.cursor="",hasClass(_e,"is-sortable")&&(_e.style.cursor="pointer"),V.value=null)}},re=()=>{isClient&&(document.body.style.cursor="")},oe=({order:le,sortOrders:de})=>{if(le==="")return de[0];const he=de.indexOf(le||null);return de[he>de.length-2?0:he+1]},ue=(le,de,he)=>{var _e;le.stopPropagation();const Ce=de.order===he?null:he||oe(de),Ne=(_e=le.target)==null?void 0:_e.closest("th");if(Ne&&hasClass(Ne,"noclick")){removeClass(Ne,"noclick");return}if(!de.sortable)return;const $e=e.store.states;let xe=$e.sortProp.value,Ie;const ze=$e.sortingColumn.value;(ze!==de||ze===de&&ze.order===null)&&(ze&&(ze.order=null),$e.sortingColumn.value=de,xe=de.property),Ce?Ie=de.order=Ce:Ie=de.order=null,$e.sortProp.value=xe,$e.sortOrder.value=Ie,g?.store.commit("changeSortCondition")};return{handleHeaderClick:k,handleHeaderContextMenu:$,handleMouseDown:j,handleMouseMove:ae,handleMouseOut:re,handleSortClick:ue,handleFilterClick:y}}function useStyle$2(e){const n=inject(TABLE_INJECTION_KEY),r=useNamespace("table");return{getHeaderRowStyle:V=>{const L=n?.props.headerRowStyle;return typeof L=="function"?L.call(null,{rowIndex:V}):L},getHeaderRowClass:V=>{const L=[],z=n?.props.headerRowClassName;return typeof z=="string"?L.push(z):typeof z=="function"&&L.push(z.call(null,{rowIndex:V})),L.join(" ")},getHeaderCellStyle:(V,L,z,j)=>{var ae;let re=(ae=n?.props.headerCellStyle)!=null?ae:{};typeof re=="function"&&(re=re.call(null,{rowIndex:V,columnIndex:L,row:z,column:j}));const oe=getFixedColumnOffset(L,j.fixed,e.store,z);return ensurePosition(oe,"left"),ensurePosition(oe,"right"),Object.assign({},re,oe)},getHeaderCellClass:(V,L,z,j)=>{const ae=getFixedColumnsClass(r.b(),L,j.fixed,e.store,z),re=[j.id,j.order,j.headerAlign,j.className,j.labelClassName,...ae];j.children||re.push("is-leaf"),j.sortable&&re.push("is-sortable");const oe=n?.props.headerCellClassName;return typeof oe=="string"?re.push(oe):typeof oe=="function"&&re.push(oe.call(null,{rowIndex:V,columnIndex:L,row:z,column:j})),re.push(r.e("cell")),re.filter(ue=>!!ue).join(" ")}}}const getAllColumns=e=>{const n=[];return e.forEach(r=>{r.children?(n.push(r),n.push.apply(n,getAllColumns(r.children))):n.push(r)}),n},convertToRows=e=>{let n=1;const r=(k,$)=>{if($&&(k.level=$.level+1,n<k.level&&(n=k.level)),k.children){let V=0;k.children.forEach(L=>{r(L,k),V+=L.colSpan}),k.colSpan=V}else k.colSpan=1};e.forEach(k=>{k.level=1,r(k,void 0)});const g=[];for(let k=0;k<n;k++)g.push([]);return getAllColumns(e).forEach(k=>{k.children?(k.rowSpan=1,k.children.forEach($=>$.isSubColumn=!0)):k.rowSpan=n-k.level+1,g[k.level-1].push(k)}),g};function useUtils$1(e){const n=inject(TABLE_INJECTION_KEY),r=computed(()=>convertToRows(e.store.states.originColumns.value));return{isGroup:computed(()=>{const k=r.value.length>1;return k&&n&&(n.state.isGroup.value=!0),k}),toggleAllSelection:k=>{k.stopPropagation(),n?.store.commit("toggleAllSelection")},columnRows:r}}var TableHeader=defineComponent({name:"ElTableHeader",components:{ElCheckbox},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e,{emit:n}){const r=getCurrentInstance(),g=inject(TABLE_INJECTION_KEY),y=useNamespace("table"),k=ref({}),{onColumnsChange:$,onScrollableChange:V}=useLayoutObserver(g);onMounted(async()=>{await nextTick(),await nextTick();const{prop:xe,order:Ie}=e.defaultSort;g?.store.commit("sort",{prop:xe,order:Ie,init:!0})});const{handleHeaderClick:L,handleHeaderContextMenu:z,handleMouseDown:j,handleMouseMove:ae,handleMouseOut:re,handleSortClick:oe,handleFilterClick:ue}=useEvent(e,n),{getHeaderRowStyle:le,getHeaderRowClass:de,getHeaderCellStyle:he,getHeaderCellClass:_e}=useStyle$2(e),{isGroup:Ce,toggleAllSelection:Ne,columnRows:$e}=useUtils$1(e);return r.state={onColumnsChange:$,onScrollableChange:V},r.filterPanels=k,{ns:y,filterPanels:k,onColumnsChange:$,onScrollableChange:V,columnRows:$e,getHeaderRowClass:de,getHeaderRowStyle:le,getHeaderCellClass:_e,getHeaderCellStyle:he,handleHeaderClick:L,handleHeaderContextMenu:z,handleMouseDown:j,handleMouseMove:ae,handleMouseOut:re,handleSortClick:oe,handleFilterClick:ue,isGroup:Ce,toggleAllSelection:Ne}},render(){const{ns:e,isGroup:n,columnRows:r,getHeaderCellStyle:g,getHeaderCellClass:y,getHeaderRowClass:k,getHeaderRowStyle:$,handleHeaderClick:V,handleHeaderContextMenu:L,handleMouseDown:z,handleMouseMove:j,handleSortClick:ae,handleMouseOut:re,store:oe,$parent:ue}=this;let le=1;return h$1("thead",{class:{[e.is("group")]:n}},r.map((de,he)=>h$1("tr",{class:k(he),key:he,style:$(he)},de.map((_e,Ce)=>(_e.rowSpan>le&&(le=_e.rowSpan),h$1("th",{class:y(he,Ce,de,_e),colspan:_e.colSpan,key:`${_e.id}-thead`,rowspan:_e.rowSpan,style:g(he,Ce,de,_e),onClick:Ne=>V(Ne,_e),onContextmenu:Ne=>L(Ne,_e),onMousedown:Ne=>z(Ne,_e),onMousemove:Ne=>j(Ne,_e),onMouseout:re},[h$1("div",{class:["cell",_e.filteredValue&&_e.filteredValue.length>0?"highlight":""]},[_e.renderHeader?_e.renderHeader({column:_e,$index:Ce,store:oe,_self:ue}):_e.label,_e.sortable&&h$1("span",{onClick:Ne=>ae(Ne,_e),class:"caret-wrapper"},[h$1("i",{onClick:Ne=>ae(Ne,_e,"ascending"),class:"sort-caret ascending"}),h$1("i",{onClick:Ne=>ae(Ne,_e,"descending"),class:"sort-caret descending"})]),_e.filterable&&h$1(FilterPanel,{store:oe,placement:_e.filterPlacement||"bottom-start",column:_e,upDataColumn:(Ne,$e)=>{_e[Ne]=$e}})])]))))))}});function useEvents(e){const n=inject(TABLE_INJECTION_KEY),r=ref(""),g=ref(h$1("div")),{nextZIndex:y}=useZIndex(),k=(ue,le,de)=>{var he;const _e=n,Ce=getCell(ue);let Ne;const $e=(he=_e?.vnode.el)==null?void 0:he.dataset.prefix;Ce&&(Ne=getColumnByCell({columns:e.store.states.columns.value},Ce,$e),Ne&&_e?.emit(`cell-${de}`,le,Ne,Ce,ue)),_e?.emit(`row-${de}`,le,Ne,ue)},$=(ue,le)=>{k(ue,le,"dblclick")},V=(ue,le)=>{e.store.commit("setCurrentRow",le),k(ue,le,"click")},L=(ue,le)=>{k(ue,le,"contextmenu")},z=debounce(ue=>{e.store.commit("setHoverRow",ue)},30),j=debounce(()=>{e.store.commit("setHoverRow",null)},30),ae=ue=>{const le=window.getComputedStyle(ue,null),de=Number.parseInt(le.paddingLeft,10)||0,he=Number.parseInt(le.paddingRight,10)||0,_e=Number.parseInt(le.paddingTop,10)||0,Ce=Number.parseInt(le.paddingBottom,10)||0;return{left:de,right:he,top:_e,bottom:Ce}};return{handleDoubleClick:$,handleClick:V,handleContextMenu:L,handleMouseEnter:z,handleMouseLeave:j,handleCellMouseEnter:(ue,le,de)=>{var he;const _e=n,Ce=getCell(ue),Ne=(he=_e?.vnode.el)==null?void 0:he.dataset.prefix;if(Ce){const $n=getColumnByCell({columns:e.store.states.columns.value},Ce,Ne),Nn=_e.hoverState={cell:Ce,column:$n,row:le};_e?.emit("cell-mouse-enter",Nn.row,Nn.column,Nn.cell,ue)}if(!de)return;const $e=ue.target.querySelector(".cell");if(!(hasClass($e,`${Ne}-tooltip`)&&$e.childNodes.length))return;const xe=document.createRange();xe.setStart($e,0),xe.setEnd($e,$e.childNodes.length);let Ie=xe.getBoundingClientRect().width,ze=xe.getBoundingClientRect().height;Ie-Math.floor(Ie)<.001&&(Ie=Math.floor(Ie)),ze-Math.floor(ze)<.001&&(ze=Math.floor(ze));const{top:_n,left:Dt,right:Sn,bottom:hn}=ae($e),Vn=Dt+Sn,Mn=_n+hn;(Ie+Vn>$e.offsetWidth||ze+Mn>$e.offsetHeight||$e.scrollWidth>$e.offsetWidth)&&createTablePopper(n?.refs.tableWrapper,Ce,Ce.innerText||Ce.textContent,y,de)},handleCellMouseLeave:ue=>{if(!getCell(ue))return;const de=n?.hoverState;n?.emit("cell-mouse-leave",de?.row,de?.column,de?.cell,ue)},tooltipContent:r,tooltipTrigger:g}}function useStyles$1(e){const n=inject(TABLE_INJECTION_KEY),r=useNamespace("table");return{getRowStyle:(z,j)=>{const ae=n?.props.rowStyle;return typeof ae=="function"?ae.call(null,{row:z,rowIndex:j}):ae||null},getRowClass:(z,j)=>{const ae=[r.e("row")];n?.props.highlightCurrentRow&&z===e.store.states.currentRow.value&&ae.push("current-row"),e.stripe&&j%2===1&&ae.push(r.em("row","striped"));const re=n?.props.rowClassName;return typeof re=="string"?ae.push(re):typeof re=="function"&&ae.push(re.call(null,{row:z,rowIndex:j})),ae},getCellStyle:(z,j,ae,re)=>{const oe=n?.props.cellStyle;let ue=oe??{};typeof oe=="function"&&(ue=oe.call(null,{rowIndex:z,columnIndex:j,row:ae,column:re}));const le=getFixedColumnOffset(j,e?.fixed,e.store);return ensurePosition(le,"left"),ensurePosition(le,"right"),Object.assign({},ue,le)},getCellClass:(z,j,ae,re,oe)=>{const ue=getFixedColumnsClass(r.b(),j,e?.fixed,e.store,void 0,oe),le=[re.id,re.align,re.className,...ue],de=n?.props.cellClassName;return typeof de=="string"?le.push(de):typeof de=="function"&&le.push(de.call(null,{rowIndex:z,columnIndex:j,row:ae,column:re})),le.push(r.e("cell")),le.filter(he=>!!he).join(" ")},getSpan:(z,j,ae,re)=>{let oe=1,ue=1;const le=n?.props.spanMethod;if(typeof le=="function"){const de=le({row:z,column:j,rowIndex:ae,columnIndex:re});Array.isArray(de)?(oe=de[0],ue=de[1]):typeof de=="object"&&(oe=de.rowspan,ue=de.colspan)}return{rowspan:oe,colspan:ue}},getColspanRealWidth:(z,j,ae)=>{if(j<1)return z[ae].realWidth;const re=z.map(({realWidth:oe,width:ue})=>oe||ue).slice(ae,ae+j);return Number(re.reduce((oe,ue)=>Number(oe)+Number(ue),-1))}}}function useRender$1(e){const n=inject(TABLE_INJECTION_KEY),r=useNamespace("table"),{handleDoubleClick:g,handleClick:y,handleContextMenu:k,handleMouseEnter:$,handleMouseLeave:V,handleCellMouseEnter:L,handleCellMouseLeave:z,tooltipContent:j,tooltipTrigger:ae}=useEvents(e),{getRowStyle:re,getRowClass:oe,getCellStyle:ue,getCellClass:le,getSpan:de,getColspanRealWidth:he}=useStyles$1(e),_e=computed(()=>e.store.states.columns.value.findIndex(({type:Ie})=>Ie==="default")),Ce=(Ie,ze)=>{const qe=n.props.rowKey;return qe?getRowIdentity(Ie,qe):ze},Ne=(Ie,ze,qe,Et=!1)=>{const{tooltipEffect:_n,tooltipOptions:Dt,store:Sn}=e,{indent:hn,columns:Vn}=Sn.states,Mn=oe(Ie,ze);let $n=!0;return qe&&(Mn.push(r.em("row",`level-${qe.level}`)),$n=qe.display),h$1("tr",{style:[$n?null:{display:"none"},re(Ie,ze)],class:Mn,key:Ce(Ie,ze),onDblclick:kn=>g(kn,Ie),onClick:kn=>y(kn,Ie),onContextmenu:kn=>k(kn,Ie),onMouseenter:()=>$(ze),onMouseleave:V},Vn.value.map((kn,jn)=>{const{rowspan:Fn,colspan:Tn}=de(Ie,kn,ze,jn);if(!Fn||!Tn)return null;const Hn=Object.assign({},kn);Hn.realWidth=he(Vn.value,Tn,jn);const la={store:e.store,_self:e.context||n,column:Hn,row:Ie,$index:ze,cellIndex:jn,expanded:Et};jn===_e.value&&qe&&(la.treeNode={indent:qe.level*hn.value,level:qe.level},typeof qe.expanded=="boolean"&&(la.treeNode.expanded=qe.expanded,"loading"in qe&&(la.treeNode.loading=qe.loading),"noLazyChildren"in qe&&(la.treeNode.noLazyChildren=qe.noLazyChildren)));const ca=`${ze},${jn}`,Zn=Hn.columnKey||Hn.rawColumnKey||"",Bn=$e(jn,kn,la),Wn=kn.showOverflowTooltip&&merge$1({effect:_n},Dt,kn.showOverflowTooltip);return h$1("td",{style:ue(ze,jn,Ie,kn),class:le(ze,jn,Ie,kn,Tn-1),key:`${Zn}${ca}`,rowspan:Fn,colspan:Tn,onMouseenter:da=>L(da,Ie,Wn),onMouseleave:z},[Bn])}))},$e=(Ie,ze,qe)=>ze.renderCell(qe);return{wrappedRowRender:(Ie,ze)=>{const qe=e.store,{isRowExpanded:Et,assertRowKey:_n}=qe,{treeData:Dt,lazyTreeNodeMap:Sn,childrenColumnName:hn,rowKey:Vn}=qe.states,Mn=qe.states.columns.value;if(Mn.some(({type:Nn})=>Nn==="expand")){const Nn=Et(Ie),kn=Ne(Ie,ze,void 0,Nn),jn=n.renderExpanded;return Nn?jn?[[kn,h$1("tr",{key:`expanded-row__${kn.key}`},[h$1("td",{colspan:Mn.length,class:`${r.e("cell")} ${r.e("expanded-cell")}`},[jn({row:Ie,$index:ze,store:qe,expanded:Nn})])])]]:(console.error("[Element Error]renderExpanded is required."),kn):[[kn]]}else if(Object.keys(Dt.value).length){_n();const Nn=getRowIdentity(Ie,Vn.value);let kn=Dt.value[Nn],jn=null;kn&&(jn={expanded:kn.expanded,level:kn.level,display:!0},typeof kn.lazy=="boolean"&&(typeof kn.loaded=="boolean"&&kn.loaded&&(jn.noLazyChildren=!(kn.children&&kn.children.length)),jn.loading=kn.loading));const Fn=[Ne(Ie,ze,jn)];if(kn){let Tn=0;const Hn=(ca,Zn)=>{ca&&ca.length&&Zn&&ca.forEach(Bn=>{const Wn={display:Zn.display&&Zn.expanded,level:Zn.level+1,expanded:!1,noLazyChildren:!1,loading:!1},da=getRowIdentity(Bn,Vn.value);if(da==null)throw new Error("For nested data item, row-key is required.");if(kn={...Dt.value[da]},kn&&(Wn.expanded=kn.expanded,kn.level=kn.level||Wn.level,kn.display=!!(kn.expanded&&Wn.display),typeof kn.lazy=="boolean"&&(typeof kn.loaded=="boolean"&&kn.loaded&&(Wn.noLazyChildren=!(kn.children&&kn.children.length)),Wn.loading=kn.loading)),Tn++,Fn.push(Ne(Bn,ze+Tn,Wn)),kn){const ga=Sn.value[da]||Bn[hn.value];Hn(ga,kn)}})};kn.display=!0;const la=Sn.value[Nn]||Ie[hn.value];Hn(la,kn)}return Fn}else return Ne(Ie,ze,void 0)},tooltipContent:j,tooltipTrigger:ae}}const defaultProps$2={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var TableBody=defineComponent({name:"ElTableBody",props:defaultProps$2,setup(e){const n=getCurrentInstance(),r=inject(TABLE_INJECTION_KEY),g=useNamespace("table"),{wrappedRowRender:y,tooltipContent:k,tooltipTrigger:$}=useRender$1(e),{onColumnsChange:V,onScrollableChange:L}=useLayoutObserver(r);return watch(e.store.states.hoverRow,(z,j)=>{!e.store.states.isComplex.value||!isClient||rAF(()=>{const ae=n?.vnode.el,re=Array.from(ae?.children||[]).filter(le=>le?.classList.contains(`${g.e("row")}`)),oe=re[j],ue=re[z];oe&&removeClass(oe,"hover-row"),ue&&addClass(ue,"hover-row")})}),onUnmounted(()=>{var z;(z=removePopper)==null||z()}),{ns:g,onColumnsChange:V,onScrollableChange:L,wrappedRowRender:y,tooltipContent:k,tooltipTrigger:$}},render(){const{wrappedRowRender:e,store:n}=this,r=n.states.data.value||[];return h$1("tbody",{},[r.reduce((g,y)=>g.concat(e(y,g.length)),[])])}});function hColgroup(e){const n=e.tableLayout==="auto";let r=e.columns||[];n&&r.every(y=>y.width===void 0)&&(r=[]);const g=y=>{const k={key:`${e.tableLayout}_${y.id}`,style:{},name:void 0};return n?k.style={width:`${y.width}px`}:k.name=y.id,k};return h$1("colgroup",{},r.map(y=>h$1("col",g(y))))}hColgroup.props=["columns","tableLayout"];function useMapState(){const e=inject(TABLE_INJECTION_KEY),n=e?.store,r=computed(()=>n.states.fixedLeafColumnsLength.value),g=computed(()=>n.states.rightFixedColumns.value.length),y=computed(()=>n.states.columns.value.length),k=computed(()=>n.states.fixedColumns.value.length),$=computed(()=>n.states.rightFixedColumns.value.length);return{leftFixedLeafCount:r,rightFixedLeafCount:g,columnsCount:y,leftFixedCount:k,rightFixedCount:$,columns:n.states.columns}}function useStyle$1(e){const{columns:n}=useMapState(),r=useNamespace("table");return{getCellClasses:(k,$)=>{const V=k[$],L=[r.e("cell"),V.id,V.align,V.labelClassName,...getFixedColumnsClass(r.b(),$,V.fixed,e.store)];return V.className&&L.push(V.className),V.children||L.push(r.is("leaf")),L},getCellStyles:(k,$)=>{const V=getFixedColumnOffset($,k.fixed,e.store);return ensurePosition(V,"left"),ensurePosition(V,"right"),V},columns:n}}var TableFooter=defineComponent({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e){const{getCellClasses:n,getCellStyles:r,columns:g}=useStyle$1(e);return{ns:useNamespace("table"),getCellClasses:n,getCellStyles:r,columns:g}},render(){const{columns:e,getCellStyles:n,getCellClasses:r,summaryMethod:g,sumText:y,ns:k}=this,$=this.store.states.data.value;let V=[];return g?V=g({columns:e,data:$}):e.forEach((L,z)=>{if(z===0){V[z]=y;return}const j=$.map(ue=>Number(ue[L.property])),ae=[];let re=!0;j.forEach(ue=>{if(!Number.isNaN(+ue)){re=!1;const le=`${ue}`.split(".")[1];ae.push(le?le.length:0)}});const oe=Math.max.apply(null,ae);re?V[z]="":V[z]=j.reduce((ue,le)=>{const de=Number(le);return Number.isNaN(+de)?ue:Number.parseFloat((ue+le).toFixed(Math.min(oe,20)))},0)}),h$1("table",{class:k.e("footer"),cellspacing:"0",cellpadding:"0",border:"0"},[hColgroup({columns:e}),h$1("tbody",[h$1("tr",{},[...e.map((L,z)=>h$1("td",{key:z,colspan:L.colSpan,rowspan:L.rowSpan,class:r(e,z),style:n(L,z)},[h$1("div",{class:["cell",L.labelClassName]},[V[z]])]))])])])}});function useUtils(e){return{setCurrentRow:j=>{e.commit("setCurrentRow",j)},getSelectionRows:()=>e.getSelectionRows(),toggleRowSelection:(j,ae)=>{e.toggleRowSelection(j,ae,!1),e.updateAllSelected()},clearSelection:()=>{e.clearSelection()},clearFilter:j=>{e.clearFilter(j)},toggleAllSelection:()=>{e.commit("toggleAllSelection")},toggleRowExpansion:(j,ae)=>{e.toggleRowExpansionAdapter(j,ae)},clearSort:()=>{e.clearSort()},sort:(j,ae)=>{e.commit("sort",{prop:j,order:ae})}}}function useStyle(e,n,r,g){const y=ref(!1),k=ref(null),$=ref(!1),V=kn=>{$.value=kn},L=ref({width:null,height:null,headerHeight:null}),z=ref(!1),j={display:"inline-block",verticalAlign:"middle"},ae=ref(),re=ref(0),oe=ref(0),ue=ref(0),le=ref(0),de=ref(0);watchEffect(()=>{n.setHeight(e.height)}),watchEffect(()=>{n.setMaxHeight(e.maxHeight)}),watch(()=>[e.currentRowKey,r.states.rowKey],([kn,jn])=>{!unref(jn)||!unref(kn)||r.setCurrentRowKey(`${kn}`)},{immediate:!0}),watch(()=>e.data,kn=>{g.store.commit("setData",kn)},{immediate:!0,deep:!0}),watchEffect(()=>{e.expandRowKeys&&r.setExpandRowKeysAdapter(e.expandRowKeys)});const he=()=>{g.store.commit("setHoverRow",null),g.hoverState&&(g.hoverState=null)},_e=(kn,jn)=>{const{pixelX:Fn,pixelY:Tn}=jn;Math.abs(Fn)>=Math.abs(Tn)&&(g.refs.bodyWrapper.scrollLeft+=jn.pixelX/5)},Ce=computed(()=>e.height||e.maxHeight||r.states.fixedColumns.value.length>0||r.states.rightFixedColumns.value.length>0),Ne=computed(()=>({width:n.bodyWidth.value?`${n.bodyWidth.value}px`:""})),$e=()=>{Ce.value&&n.updateElsHeight(),n.updateColumnsWidth(),requestAnimationFrame(qe)};onMounted(async()=>{await nextTick(),r.updateColumns(),Et(),requestAnimationFrame($e);const kn=g.vnode.el,jn=g.refs.headerWrapper;e.flexible&&kn&&kn.parentElement&&(kn.parentElement.style.minWidth="0"),L.value={width:ae.value=kn.offsetWidth,height:kn.offsetHeight,headerHeight:e.showHeader&&jn?jn.offsetHeight:null},r.states.columns.value.forEach(Fn=>{Fn.filteredValue&&Fn.filteredValue.length&&g.store.commit("filterChange",{column:Fn,values:Fn.filteredValue,silent:!0})}),g.$ready=!0});const xe=(kn,jn)=>{if(!kn)return;const Fn=Array.from(kn.classList).filter(Tn=>!Tn.startsWith("is-scrolling-"));Fn.push(n.scrollX.value?jn:"is-scrolling-none"),kn.className=Fn.join(" ")},Ie=kn=>{const{tableWrapper:jn}=g.refs;xe(jn,kn)},ze=kn=>{const{tableWrapper:jn}=g.refs;return!!(jn&&jn.classList.contains(kn))},qe=function(){if(!g.refs.scrollBarRef)return;if(!n.scrollX.value){const Zn="is-scrolling-none";ze(Zn)||Ie(Zn);return}const kn=g.refs.scrollBarRef.wrapRef;if(!kn)return;const{scrollLeft:jn,offsetWidth:Fn,scrollWidth:Tn}=kn,{headerWrapper:Hn,footerWrapper:la}=g.refs;Hn&&(Hn.scrollLeft=jn),la&&(la.scrollLeft=jn);const ca=Tn-Fn-1;jn>=ca?Ie("is-scrolling-right"):Ie(jn===0?"is-scrolling-left":"is-scrolling-middle")},Et=()=>{g.refs.scrollBarRef&&(g.refs.scrollBarRef.wrapRef&&useEventListener(g.refs.scrollBarRef.wrapRef,"scroll",qe,{passive:!0}),e.fit?useResizeObserver(g.vnode.el,_n):useEventListener(window,"resize",_n),useResizeObserver(g.refs.bodyWrapper,()=>{var kn,jn;_n(),(jn=(kn=g.refs)==null?void 0:kn.scrollBarRef)==null||jn.update()}))},_n=()=>{var kn,jn,Fn,Tn;const Hn=g.vnode.el;if(!g.$ready||!Hn)return;let la=!1;const{width:ca,height:Zn,headerHeight:Bn}=L.value,Wn=ae.value=Hn.offsetWidth;ca!==Wn&&(la=!0);const da=Hn.offsetHeight;(e.height||Ce.value)&&Zn!==da&&(la=!0);const ga=e.tableLayout==="fixed"?g.refs.headerWrapper:(kn=g.refs.tableHeaderRef)==null?void 0:kn.$el;e.showHeader&&ga?.offsetHeight!==Bn&&(la=!0),re.value=((jn=g.refs.tableWrapper)==null?void 0:jn.scrollHeight)||0,ue.value=ga?.scrollHeight||0,le.value=((Fn=g.refs.footerWrapper)==null?void 0:Fn.offsetHeight)||0,de.value=((Tn=g.refs.appendWrapper)==null?void 0:Tn.offsetHeight)||0,oe.value=re.value-ue.value-le.value-de.value,la&&(L.value={width:Wn,height:da,headerHeight:e.showHeader&&ga?.offsetHeight||0},$e())},Dt=useFormSize(),Sn=computed(()=>{const{bodyWidth:kn,scrollY:jn,gutterWidth:Fn}=n;return kn.value?`${kn.value-(jn.value?Fn:0)}px`:""}),hn=computed(()=>e.maxHeight?"fixed":e.tableLayout),Vn=computed(()=>{if(e.data&&e.data.length)return null;let kn="100%";e.height&&oe.value&&(kn=`${oe.value}px`);const jn=ae.value;return{width:jn?`${jn}px`:"",height:kn}}),Mn=computed(()=>e.height?{height:Number.isNaN(Number(e.height))?e.height:`${e.height}px`}:e.maxHeight?{maxHeight:Number.isNaN(Number(e.maxHeight))?e.maxHeight:`${e.maxHeight}px`}:{}),$n=computed(()=>e.height?{height:"100%"}:e.maxHeight?Number.isNaN(Number(e.maxHeight))?{maxHeight:`calc(${e.maxHeight} - ${ue.value+le.value}px)`}:{maxHeight:`${e.maxHeight-ue.value-le.value}px`}:{});return{isHidden:y,renderExpanded:k,setDragVisible:V,isGroup:z,handleMouseLeave:he,handleHeaderFooterMousewheel:_e,tableSize:Dt,emptyBlockStyle:Vn,handleFixedMousewheel:(kn,jn)=>{const Fn=g.refs.bodyWrapper;if(Math.abs(jn.spinY)>0){const Tn=Fn.scrollTop;jn.pixelY<0&&Tn!==0&&kn.preventDefault(),jn.pixelY>0&&Fn.scrollHeight-Fn.clientHeight>Tn&&kn.preventDefault(),Fn.scrollTop+=Math.ceil(jn.pixelY/5)}else Fn.scrollLeft+=Math.ceil(jn.pixelX/5)},resizeProxyVisible:$,bodyWidth:Sn,resizeState:L,doLayout:$e,tableBodyStyles:Ne,tableLayout:hn,scrollbarViewStyle:j,tableInnerStyle:Mn,scrollbarStyle:$n}}function useKeyRender(e){const n=ref(),r=()=>{const y=e.vnode.el.querySelector(".hidden-columns"),k={childList:!0,subtree:!0},$=e.store.states.updateOrderFns;n.value=new MutationObserver(()=>{$.forEach(V=>V())}),n.value.observe(y,k)};onMounted(()=>{r()}),onUnmounted(()=>{var g;(g=n.value)==null||g.disconnect()})}var defaultProps$1={data:{type:Array,default:()=>[]},size:useSizeProp,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:{type:Boolean,default:!1},flexible:Boolean,showOverflowTooltip:[Boolean,Object]};const useScrollbar$1=()=>{const e=ref(),n=(k,$)=>{const V=e.value;V&&V.scrollTo(k,$)},r=(k,$)=>{const V=e.value;V&&isNumber$1($)&&["Top","Left"].includes(k)&&V[`setScroll${k}`]($)};return{scrollBarRef:e,scrollTo:n,setScrollTop:k=>r("Top",k),setScrollLeft:k=>r("Left",k)}};let tableIdSeed=1;const _sfc_main$1D=defineComponent({name:"ElTable",directives:{Mousewheel},components:{TableHeader,TableBody,TableFooter,ElScrollbar,hColgroup},props:defaultProps$1,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(e){const{t:n}=useLocale(),r=useNamespace("table"),g=getCurrentInstance();provide(TABLE_INJECTION_KEY,g);const y=createStore(g,e);g.store=y;const k=new TableLayout({store:g.store,table:g,fit:e.fit,showHeader:e.showHeader});g.layout=k;const $=computed(()=>(y.states.data.value||[]).length===0),{setCurrentRow:V,getSelectionRows:L,toggleRowSelection:z,clearSelection:j,clearFilter:ae,toggleAllSelection:re,toggleRowExpansion:oe,clearSort:ue,sort:le}=useUtils(y),{isHidden:de,renderExpanded:he,setDragVisible:_e,isGroup:Ce,handleMouseLeave:Ne,handleHeaderFooterMousewheel:$e,tableSize:xe,emptyBlockStyle:Ie,handleFixedMousewheel:ze,resizeProxyVisible:qe,bodyWidth:Et,resizeState:_n,doLayout:Dt,tableBodyStyles:Sn,tableLayout:hn,scrollbarViewStyle:Vn,tableInnerStyle:Mn,scrollbarStyle:$n}=useStyle(e,k,y,g),{scrollBarRef:Nn,scrollTo:kn,setScrollLeft:jn,setScrollTop:Fn}=useScrollbar$1(),Tn=debounce(Dt,50),Hn=`${r.namespace.value}-table_${tableIdSeed++}`;g.tableId=Hn,g.state={isGroup:Ce,resizeState:_n,doLayout:Dt,debouncedUpdateLayout:Tn};const la=computed(()=>e.sumText||n("el.table.sumText")),ca=computed(()=>e.emptyText||n("el.table.emptyText"));return useKeyRender(g),{ns:r,layout:k,store:y,handleHeaderFooterMousewheel:$e,handleMouseLeave:Ne,tableId:Hn,tableSize:xe,isHidden:de,isEmpty:$,renderExpanded:he,resizeProxyVisible:qe,resizeState:_n,isGroup:Ce,bodyWidth:Et,tableBodyStyles:Sn,emptyBlockStyle:Ie,debouncedUpdateLayout:Tn,handleFixedMousewheel:ze,setCurrentRow:V,getSelectionRows:L,toggleRowSelection:z,clearSelection:j,clearFilter:ae,toggleAllSelection:re,toggleRowExpansion:oe,clearSort:ue,doLayout:Dt,sort:le,t:n,setDragVisible:_e,context:g,computedSumText:la,computedEmptyText:ca,tableLayout:hn,scrollbarViewStyle:Vn,tableInnerStyle:Mn,scrollbarStyle:$n,scrollBarRef:Nn,scrollTo:kn,setScrollLeft:jn,setScrollTop:Fn}}}),_hoisted_1$1n=["data-prefix"],_hoisted_2$1f={ref:"hiddenColumns",class:"hidden-columns"};function _sfc_render$3(e,n,r,g,y,k){const $=resolveComponent("hColgroup"),V=resolveComponent("table-header"),L=resolveComponent("table-body"),z=resolveComponent("el-scrollbar"),j=resolveComponent("table-footer"),ae=resolveDirective("mousewheel");return openBlock(),createElementBlock("div",{ref:"tableWrapper",class:normalizeClass([{[e.ns.m("fit")]:e.fit,[e.ns.m("striped")]:e.stripe,[e.ns.m("border")]:e.border||e.isGroup,[e.ns.m("hidden")]:e.isHidden,[e.ns.m("group")]:e.isGroup,[e.ns.m("fluid-height")]:e.maxHeight,[e.ns.m("scrollable-x")]:e.layout.scrollX.value,[e.ns.m("scrollable-y")]:e.layout.scrollY.value,[e.ns.m("enable-row-hover")]:!e.store.states.isComplex.value,[e.ns.m("enable-row-transition")]:(e.store.states.data.value||[]).length!==0&&(e.store.states.data.value||[]).length<100,"has-footer":e.showSummary},e.ns.m(e.tableSize),e.className,e.ns.b(),e.ns.m(`layout-${e.tableLayout}`)]),style:normalizeStyle(e.style),"data-prefix":e.ns.namespace.value,onMouseleave:n[0]||(n[0]=(...re)=>e.handleMouseLeave&&e.handleMouseLeave(...re))},[createBaseVNode("div",{class:normalizeClass(e.ns.e("inner-wrapper")),style:normalizeStyle(e.tableInnerStyle)},[createBaseVNode("div",_hoisted_2$1f,[renderSlot(e.$slots,"default")],512),e.showHeader&&e.tableLayout==="fixed"?withDirectives((openBlock(),createElementBlock("div",{key:0,ref:"headerWrapper",class:normalizeClass(e.ns.e("header-wrapper"))},[createBaseVNode("table",{ref:"tableHeader",class:normalizeClass(e.ns.e("header")),style:normalizeStyle(e.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[createVNode($,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),createVNode(V,{ref:"tableHeaderRef",border:e.border,"default-sort":e.defaultSort,store:e.store,onSetDragVisible:e.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])],6)],2)),[[ae,e.handleHeaderFooterMousewheel]]):createCommentVNode("v-if",!0),createBaseVNode("div",{ref:"bodyWrapper",class:normalizeClass(e.ns.e("body-wrapper"))},[createVNode(z,{ref:"scrollBarRef","view-style":e.scrollbarViewStyle,"wrap-style":e.scrollbarStyle,always:e.scrollbarAlwaysOn},{default:withCtx(()=>[createBaseVNode("table",{ref:"tableBody",class:normalizeClass(e.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:normalizeStyle({width:e.bodyWidth,tableLayout:e.tableLayout})},[createVNode($,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),e.showHeader&&e.tableLayout==="auto"?(openBlock(),createBlock(V,{key:0,ref:"tableHeaderRef",border:e.border,"default-sort":e.defaultSort,store:e.store,onSetDragVisible:e.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])):createCommentVNode("v-if",!0),createVNode(L,{context:e.context,highlight:e.highlightCurrentRow,"row-class-name":e.rowClassName,"tooltip-effect":e.tooltipEffect,"tooltip-options":e.tooltipOptions,"row-style":e.rowStyle,store:e.store,stripe:e.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"])],6),e.isEmpty?(openBlock(),createElementBlock("div",{key:0,ref:"emptyBlock",style:normalizeStyle(e.emptyBlockStyle),class:normalizeClass(e.ns.e("empty-block"))},[createBaseVNode("span",{class:normalizeClass(e.ns.e("empty-text"))},[renderSlot(e.$slots,"empty",{},()=>[createTextVNode(toDisplayString$1(e.computedEmptyText),1)])],2)],6)):createCommentVNode("v-if",!0),e.$slots.append?(openBlock(),createElementBlock("div",{key:1,ref:"appendWrapper",class:normalizeClass(e.ns.e("append-wrapper"))},[renderSlot(e.$slots,"append")],2)):createCommentVNode("v-if",!0)]),_:3},8,["view-style","wrap-style","always"])],2),e.showSummary?withDirectives((openBlock(),createElementBlock("div",{key:1,ref:"footerWrapper",class:normalizeClass(e.ns.e("footer-wrapper"))},[createVNode(j,{border:e.border,"default-sort":e.defaultSort,store:e.store,style:normalizeStyle(e.tableBodyStyles),"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["border","default-sort","store","style","sum-text","summary-method"])],2)),[[vShow,!e.isEmpty],[ae,e.handleHeaderFooterMousewheel]]):createCommentVNode("v-if",!0),e.border||e.isGroup?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(e.ns.e("border-left-patch"))},null,2)):createCommentVNode("v-if",!0)],6),withDirectives(createBaseVNode("div",{ref:"resizeProxy",class:normalizeClass(e.ns.e("column-resize-proxy"))},null,2),[[vShow,e.resizeProxyVisible]])],46,_hoisted_1$1n)}var Table=_export_sfc$1(_sfc_main$1D,[["render",_sfc_render$3],["__file","/home/runner/work/element-plus/element-plus/packages/components/table/src/table.vue"]]);const defaultClassNames={selection:"table-column--selection",expand:"table__expand-column"},cellStarts={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},getDefaultClassName=e=>defaultClassNames[e]||"",cellForced={selection:{renderHeader({store:e,column:n}){function r(){return e.states.data.value&&e.states.data.value.length===0}return h$1(ElCheckbox,{disabled:r(),size:e.states.tableSize.value,indeterminate:e.states.selection.value.length>0&&!e.states.isAllSelected.value,"onUpdate:modelValue":e.toggleAllSelection,modelValue:e.states.isAllSelected.value,ariaLabel:n.label})},renderCell({row:e,column:n,store:r,$index:g}){return h$1(ElCheckbox,{disabled:n.selectable?!n.selectable.call(null,e,g):!1,size:r.states.tableSize.value,onChange:()=>{r.commit("rowSelectedChanged",e)},onClick:y=>y.stopPropagation(),modelValue:r.isSelected(e),ariaLabel:n.label})},sortable:!1,resizable:!1},index:{renderHeader({column:e}){return e.label||"#"},renderCell({column:e,$index:n}){let r=n+1;const g=e.index;return typeof g=="number"?r=n+g:typeof g=="function"&&(r=g(n)),h$1("div",{},[r])},sortable:!1},expand:{renderHeader({column:e}){return e.label||""},renderCell({row:e,store:n,expanded:r}){const{ns:g}=n,y=[g.e("expand-icon")];return r&&y.push(g.em("expand-icon","expanded")),h$1("div",{class:y,onClick:function($){$.stopPropagation(),n.toggleRowExpansion(e)}},{default:()=>[h$1(ElIcon,null,{default:()=>[h$1(arrow_right_default)]})]})},sortable:!1,resizable:!1}};function defaultRenderCell({row:e,column:n,$index:r}){var g;const y=n.property,k=y&&getProp(e,y).value;return n&&n.formatter?n.formatter(e,n,k,r):((g=k?.toString)==null?void 0:g.call(k))||""}function treeCellPrefix({row:e,treeNode:n,store:r},g=!1){const{ns:y}=r;if(!n)return g?[h$1("span",{class:y.e("placeholder")})]:null;const k=[],$=function(V){V.stopPropagation(),!n.loading&&r.loadOrToggle(e)};if(n.indent&&k.push(h$1("span",{class:y.e("indent"),style:{"padding-left":`${n.indent}px`}})),typeof n.expanded=="boolean"&&!n.noLazyChildren){const V=[y.e("expand-icon"),n.expanded?y.em("expand-icon","expanded"):""];let L=arrow_right_default;n.loading&&(L=loading_default),k.push(h$1("div",{class:V,onClick:$},{default:()=>[h$1(ElIcon,{class:{[y.is("loading")]:n.loading}},{default:()=>[h$1(L)]})]}))}else k.push(h$1("span",{class:y.e("placeholder")}));return k}function getAllAliases(e,n){return e.reduce((r,g)=>(r[g]=g,r),n)}function useWatcher(e,n){const r=getCurrentInstance();return{registerComplexWatchers:()=>{const k=["fixed"],$={realWidth:"width",realMinWidth:"minWidth"},V=getAllAliases(k,$);Object.keys(V).forEach(L=>{const z=$[L];hasOwn$1(n,z)&&watch(()=>n[z],j=>{let ae=j;z==="width"&&L==="realWidth"&&(ae=parseWidth(j)),z==="minWidth"&&L==="realMinWidth"&&(ae=parseMinWidth(j)),r.columnConfig.value[z]=ae,r.columnConfig.value[L]=ae;const re=z==="fixed";e.value.store.scheduleLayout(re)})})},registerNormalWatchers:()=>{const k=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","showOverflowTooltip"],$={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},V=getAllAliases(k,$);Object.keys(V).forEach(L=>{const z=$[L];hasOwn$1(n,z)&&watch(()=>n[z],j=>{r.columnConfig.value[L]=j})})}}}function useRender(e,n,r){const g=getCurrentInstance(),y=ref(""),k=ref(!1),$=ref(),V=ref(),L=useNamespace("table");watchEffect(()=>{$.value=e.align?`is-${e.align}`:null,$.value}),watchEffect(()=>{V.value=e.headerAlign?`is-${e.headerAlign}`:$.value,V.value});const z=computed(()=>{let Ne=g.vnode.vParent||g.parent;for(;Ne&&!Ne.tableId&&!Ne.columnId;)Ne=Ne.vnode.vParent||Ne.parent;return Ne}),j=computed(()=>{const{store:Ne}=g.parent;if(!Ne)return!1;const{treeData:$e}=Ne.states,xe=$e.value;return xe&&Object.keys(xe).length>0}),ae=ref(parseWidth(e.width)),re=ref(parseMinWidth(e.minWidth)),oe=Ne=>(ae.value&&(Ne.width=ae.value),re.value&&(Ne.minWidth=re.value),!ae.value&&re.value&&(Ne.width=void 0),Ne.minWidth||(Ne.minWidth=80),Ne.realWidth=Number(Ne.width===void 0?Ne.minWidth:Ne.width),Ne),ue=Ne=>{const $e=Ne.type,xe=cellForced[$e]||{};Object.keys(xe).forEach(ze=>{const qe=xe[ze];ze!=="className"&&qe!==void 0&&(Ne[ze]=qe)});const Ie=getDefaultClassName($e);if(Ie){const ze=`${unref(L.namespace)}-${Ie}`;Ne.className=Ne.className?`${Ne.className} ${ze}`:ze}return Ne},le=Ne=>{Array.isArray(Ne)?Ne.forEach(xe=>$e(xe)):$e(Ne);function $e(xe){var Ie;((Ie=xe?.type)==null?void 0:Ie.name)==="ElTableColumn"&&(xe.vParent=g)}};return{columnId:y,realAlign:$,isSubColumn:k,realHeaderAlign:V,columnOrTableParent:z,setColumnWidth:oe,setColumnForcedProps:ue,setColumnRenders:Ne=>{e.renderHeader||Ne.type!=="selection"&&(Ne.renderHeader=xe=>{g.columnConfig.value.label;const Ie=n.header;return Ie?Ie(xe):Ne.label});let $e=Ne.renderCell;return Ne.type==="expand"?(Ne.renderCell=xe=>h$1("div",{class:"cell"},[$e(xe)]),r.value.renderExpanded=xe=>n.default?n.default(xe):n.default):($e=$e||defaultRenderCell,Ne.renderCell=xe=>{let Ie=null;if(n.default){const Sn=n.default(xe);Ie=Sn.some(hn=>hn.type!==Comment)?Sn:$e(xe)}else Ie=$e(xe);const{columns:ze}=r.value.store.states,qe=ze.value.findIndex(Sn=>Sn.type==="default"),Et=j.value&&xe.cellIndex===qe,_n=treeCellPrefix(xe,Et),Dt={class:"cell",style:{}};return Ne.showOverflowTooltip&&(Dt.class=`${Dt.class} ${unref(L.namespace)}-tooltip`,Dt.style={width:`${(xe.column.realWidth||Number(xe.column.width))-1}px`}),le(Ie),h$1("div",Dt,[_n,Ie])}),Ne},getPropsData:(...Ne)=>Ne.reduce(($e,xe)=>(Array.isArray(xe)&&xe.forEach(Ie=>{$e[Ie]=e[Ie]}),$e),{}),getColumnElIndex:(Ne,$e)=>Array.prototype.indexOf.call(Ne,$e),updateColumnOrder:()=>{r.value.store.commit("updateColumnOrder",g.columnConfig.value)}}}var defaultProps={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:e=>e.every(n=>["ascending","descending",null].includes(n))}};let columnIdSeed=1;var ElTableColumn$1=defineComponent({name:"ElTableColumn",components:{ElCheckbox},props:defaultProps,setup(e,{slots:n}){const r=getCurrentInstance(),g=ref({}),y=computed(()=>{let Ce=r.parent;for(;Ce&&!Ce.tableId;)Ce=Ce.parent;return Ce}),{registerNormalWatchers:k,registerComplexWatchers:$}=useWatcher(y,e),{columnId:V,isSubColumn:L,realHeaderAlign:z,columnOrTableParent:j,setColumnWidth:ae,setColumnForcedProps:re,setColumnRenders:oe,getPropsData:ue,getColumnElIndex:le,realAlign:de,updateColumnOrder:he}=useRender(e,n,y),_e=j.value;V.value=`${_e.tableId||_e.columnId}_column_${columnIdSeed++}`,onBeforeMount(()=>{L.value=y.value!==_e;const Ce=e.type||"default",Ne=e.sortable===""?!0:e.sortable,$e=isUndefined(e.showOverflowTooltip)?_e.props.showOverflowTooltip:e.showOverflowTooltip,xe={...cellStarts[Ce],id:V.value,type:Ce,property:e.prop||e.property,align:de,headerAlign:z,showOverflowTooltip:$e,filterable:e.filters||e.filterMethod,filteredValue:[],filterPlacement:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:Ne,index:e.index,rawColumnKey:r.vnode.key};let _n=ue(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement"]);_n=mergeOptions(xe,_n),_n=compose(oe,ae,re)(_n),g.value=_n,k(),$()}),onMounted(()=>{var Ce;const Ne=j.value,$e=L.value?Ne.vnode.el.children:(Ce=Ne.refs.hiddenColumns)==null?void 0:Ce.children,xe=()=>le($e||[],r.vnode.el);g.value.getColumnIndex=xe,xe()>-1&&y.value.store.commit("insertColumn",g.value,L.value?Ne.columnConfig.value:null,he)}),onBeforeUnmount(()=>{y.value.store.commit("removeColumn",g.value,L.value?_e.columnConfig.value:null,he)}),r.columnId=V.value,r.columnConfig=g},render(){var e,n,r;try{const g=(n=(e=this.$slots).default)==null?void 0:n.call(e,{row:{},column:{},$index:-1}),y=[];if(Array.isArray(g))for(const $ of g)((r=$.type)==null?void 0:r.name)==="ElTableColumn"||$.shapeFlag&2?y.push($):$.type===Fragment&&Array.isArray($.children)&&$.children.forEach(V=>{V?.patchFlag!==1024&&!isString$3(V?.children)&&y.push(V)});return h$1("div",y)}catch{return h$1("div",[])}}});const ElTable=withInstall(Table,{TableColumn:ElTableColumn$1}),ElTableColumn=withNoopInstall(ElTableColumn$1);var SortOrder=(e=>(e.ASC="asc",e.DESC="desc",e))(SortOrder||{}),Alignment=(e=>(e.CENTER="center",e.RIGHT="right",e))(Alignment||{}),FixedDir=(e=>(e.LEFT="left",e.RIGHT="right",e))(FixedDir||{});const oppositeOrderMap={asc:"desc",desc:"asc"},placeholderSign=Symbol("placeholder"),calcColumnStyle=(e,n,r)=>{var g;const y={flexGrow:0,flexShrink:0,...r?{}:{flexGrow:e.flexGrow||0,flexShrink:e.flexShrink||1}};r||(y.flexShrink=1);const k={...(g=e.style)!=null?g:{},...y,flexBasis:"auto",width:e.width};return n||(e.maxWidth&&(k.maxWidth=e.maxWidth),e.minWidth&&(k.minWidth=e.minWidth)),k};function useColumns(e,n,r){const g=computed(()=>unref(n).filter(le=>!le.hidden)),y=computed(()=>unref(g).filter(le=>le.fixed==="left"||le.fixed===!0)),k=computed(()=>unref(g).filter(le=>le.fixed==="right")),$=computed(()=>unref(g).filter(le=>!le.fixed)),V=computed(()=>{const le=[];return unref(y).forEach(de=>{le.push({...de,placeholderSign})}),unref($).forEach(de=>{le.push(de)}),unref(k).forEach(de=>{le.push({...de,placeholderSign})}),le}),L=computed(()=>unref(y).length||unref(k).length),z=computed(()=>unref(n).reduce((de,he)=>(de[he.key]=calcColumnStyle(he,unref(r),e.fixed),de),{})),j=computed(()=>unref(g).reduce((le,de)=>le+de.width,0)),ae=le=>unref(n).find(de=>de.key===le),re=le=>unref(z)[le],oe=(le,de)=>{le.width=de};function ue(le){var de;const{key:he}=le.currentTarget.dataset;if(!he)return;const{sortState:_e,sortBy:Ce}=e;let Ne=SortOrder.ASC;isObject$3(_e)?Ne=oppositeOrderMap[_e[he]]:Ne=oppositeOrderMap[Ce.order],(de=e.onColumnSort)==null||de.call(e,{column:ae(he),key:he,order:Ne})}return{columns:n,columnsStyles:z,columnsTotalWidth:j,fixedColumnsOnLeft:y,fixedColumnsOnRight:k,hasFixedColumns:L,mainColumns:V,normalColumns:$,visibleColumns:g,getColumn:ae,getColumnStyle:re,updateColumnWidth:oe,onColumnSorted:ue}}const useScrollbar=(e,{mainTableRef:n,leftTableRef:r,rightTableRef:g,onMaybeEndReached:y})=>{const k=ref({scrollLeft:0,scrollTop:0});function $(oe){var ue,le,de;const{scrollTop:he}=oe;(ue=n.value)==null||ue.scrollTo(oe),(le=r.value)==null||le.scrollToTop(he),(de=g.value)==null||de.scrollToTop(he)}function V(oe){k.value=oe,$(oe)}function L(oe){k.value.scrollTop=oe,$(unref(k))}function z(oe){var ue,le;k.value.scrollLeft=oe,(le=(ue=n.value)==null?void 0:ue.scrollTo)==null||le.call(ue,unref(k))}function j(oe){var ue;V(oe),(ue=e.onScroll)==null||ue.call(e,oe)}function ae({scrollTop:oe}){const{scrollTop:ue}=unref(k);oe!==ue&&L(oe)}function re(oe,ue="auto"){var le;(le=n.value)==null||le.scrollToRow(oe,ue)}return watch(()=>unref(k).scrollTop,(oe,ue)=>{oe>ue&&y()}),{scrollPos:k,scrollTo:V,scrollToLeft:z,scrollToTop:L,scrollToRow:re,onScroll:j,onVerticalScroll:ae}},useRow=(e,{mainTableRef:n,leftTableRef:r,rightTableRef:g})=>{const y=getCurrentInstance(),{emit:k}=y,$=shallowRef(!1),V=shallowRef(null),L=ref(e.defaultExpandedRowKeys||[]),z=ref(-1),j=shallowRef(null),ae=ref({}),re=ref({}),oe=shallowRef({}),ue=shallowRef({}),le=shallowRef({}),de=computed(()=>isNumber$1(e.estimatedRowHeight));function he(ze){var qe;(qe=e.onRowsRendered)==null||qe.call(e,ze),ze.rowCacheEnd>unref(z)&&(z.value=ze.rowCacheEnd)}function _e({hovered:ze,rowKey:qe}){V.value=ze?qe:null}function Ce({expanded:ze,rowData:qe,rowIndex:Et,rowKey:_n}){var Dt,Sn;const hn=[...unref(L)],Vn=hn.indexOf(_n);ze?Vn===-1&&hn.push(_n):Vn>-1&&hn.splice(Vn,1),L.value=hn,k("update:expandedRowKeys",hn),(Dt=e.onRowExpand)==null||Dt.call(e,{expanded:ze,rowData:qe,rowIndex:Et,rowKey:_n}),(Sn=e.onExpandedRowsChange)==null||Sn.call(e,hn)}const Ne=debounce(()=>{var ze,qe,Et,_n;$.value=!0,ae.value={...unref(ae),...unref(re)},$e(unref(j),!1),re.value={},j.value=null,(ze=n.value)==null||ze.forceUpdate(),(qe=r.value)==null||qe.forceUpdate(),(Et=g.value)==null||Et.forceUpdate(),(_n=y.proxy)==null||_n.$forceUpdate(),$.value=!1},0);function $e(ze,qe=!1){unref(de)&&[n,r,g].forEach(Et=>{const _n=unref(Et);_n&&_n.resetAfterRowIndex(ze,qe)})}function xe(ze,qe,Et){const _n=unref(j);(_n===null||_n>Et)&&(j.value=Et),re.value[ze]=qe}function Ie({rowKey:ze,height:qe,rowIndex:Et},_n){_n?_n===FixedDir.RIGHT?le.value[ze]=qe:oe.value[ze]=qe:ue.value[ze]=qe;const Dt=Math.max(...[oe,le,ue].map(Sn=>Sn.value[ze]||0));unref(ae)[ze]!==Dt&&(xe(ze,Dt,Et),Ne())}return{hoveringRowKey:V,expandedRowKeys:L,lastRenderedRowIndex:z,isDynamic:de,isResetting:$,rowHeights:ae,resetAfterIndex:$e,onRowExpanded:Ce,onRowHovered:_e,onRowsRendered:he,onRowHeightChange:Ie}},useData=(e,{expandedRowKeys:n,lastRenderedRowIndex:r,resetAfterIndex:g})=>{const y=ref({}),k=computed(()=>{const V={},{data:L,rowKey:z}=e,j=unref(n);if(!j||!j.length)return L;const ae=[],re=new Set;j.forEach(ue=>re.add(ue));let oe=L.slice();for(oe.forEach(ue=>V[ue[z]]=0);oe.length>0;){const ue=oe.shift();ae.push(ue),re.has(ue[z])&&Array.isArray(ue.children)&&ue.children.length>0&&(oe=[...ue.children,...oe],ue.children.forEach(le=>V[le[z]]=V[ue[z]]+1))}return y.value=V,ae}),$=computed(()=>{const{data:V,expandColumnKey:L}=e;return L?unref(k):V});return watch($,(V,L)=>{V!==L&&(r.value=-1,g(0,!0))}),{data:$,depthMap:y}},sumReducer=(e,n)=>e+n,sum=e=>isArray$3(e)?e.reduce(sumReducer,0):e,tryCall=(e,n,r={})=>isFunction$3(e)?e(n):e??r,enforceUnit=e=>(["width","maxWidth","minWidth","height"].forEach(n=>{e[n]=addUnit(e[n])}),e),componentToSlot=e=>isVNode$1(e)?n=>h$1(e,n):e,useStyles=(e,{columnsTotalWidth:n,data:r,fixedColumnsOnLeft:g,fixedColumnsOnRight:y})=>{const k=computed(()=>{const{fixed:Ce,width:Ne,vScrollbarSize:$e}=e,xe=Ne-$e;return Ce?Math.max(Math.round(unref(n)),xe):xe}),$=computed(()=>unref(k)+(e.fixed?e.vScrollbarSize:0)),V=computed(()=>{const{height:Ce=0,maxHeight:Ne=0,footerHeight:$e,hScrollbarSize:xe}=e;if(Ne>0){const Ie=unref(ue),ze=unref(L),Et=unref(oe)+Ie+ze+xe;return Math.min(Et,Ne-$e)}return Ce-$e}),L=computed(()=>{const{rowHeight:Ce,estimatedRowHeight:Ne}=e,$e=unref(r);return isNumber$1(Ne)?$e.length*Ne:$e.length*Ce}),z=computed(()=>{const{maxHeight:Ce}=e,Ne=unref(V);if(isNumber$1(Ce)&&Ce>0)return Ne;const $e=unref(L)+unref(oe)+unref(ue);return Math.min(Ne,$e)}),j=Ce=>Ce.width,ae=computed(()=>sum(unref(g).map(j))),re=computed(()=>sum(unref(y).map(j))),oe=computed(()=>sum(e.headerHeight)),ue=computed(()=>{var Ce;return(((Ce=e.fixedData)==null?void 0:Ce.length)||0)*e.rowHeight}),le=computed(()=>unref(V)-unref(oe)-unref(ue)),de=computed(()=>{const{style:Ce={},height:Ne,width:$e}=e;return enforceUnit({...Ce,height:Ne,width:$e})}),he=computed(()=>enforceUnit({height:e.footerHeight})),_e=computed(()=>({top:addUnit(unref(oe)),bottom:addUnit(e.footerHeight),width:addUnit(e.width)}));return{bodyWidth:k,fixedTableHeight:z,mainTableHeight:V,leftTableWidth:ae,rightTableWidth:re,headerWidth:$,rowsHeight:L,windowHeight:le,footerHeight:he,emptyStyle:_e,rootStyle:de,headerHeight:oe}},useAutoResize=e=>{const n=ref(),r=ref(0),g=ref(0);let y;return onMounted(()=>{y=useResizeObserver(n,([k])=>{const{width:$,height:V}=k.contentRect,{paddingLeft:L,paddingRight:z,paddingTop:j,paddingBottom:ae}=getComputedStyle(k.target),re=Number.parseInt(L)||0,oe=Number.parseInt(z)||0,ue=Number.parseInt(j)||0,le=Number.parseInt(ae)||0;r.value=$-re-oe,g.value=V-ue-le}).stop}),onBeforeUnmount(()=>{y?.()}),watch([r,g],([k,$])=>{var V;(V=e.onResize)==null||V.call(e,{width:k,height:$})}),{sizer:n,width:r,height:g}};function useTable(e){const n=ref(),r=ref(),g=ref(),{columns:y,columnsStyles:k,columnsTotalWidth:$,fixedColumnsOnLeft:V,fixedColumnsOnRight:L,hasFixedColumns:z,mainColumns:j,onColumnSorted:ae}=useColumns(e,toRef(e,"columns"),toRef(e,"fixed")),{scrollTo:re,scrollToLeft:oe,scrollToTop:ue,scrollToRow:le,onScroll:de,onVerticalScroll:he,scrollPos:_e}=useScrollbar(e,{mainTableRef:n,leftTableRef:r,rightTableRef:g,onMaybeEndReached:ra}),{expandedRowKeys:Ce,hoveringRowKey:Ne,lastRenderedRowIndex:$e,isDynamic:xe,isResetting:Ie,rowHeights:ze,resetAfterIndex:qe,onRowExpanded:Et,onRowHeightChange:_n,onRowHovered:Dt,onRowsRendered:Sn}=useRow(e,{mainTableRef:n,leftTableRef:r,rightTableRef:g}),{data:hn,depthMap:Vn}=useData(e,{expandedRowKeys:Ce,lastRenderedRowIndex:$e,resetAfterIndex:qe}),{bodyWidth:Mn,fixedTableHeight:$n,mainTableHeight:Nn,leftTableWidth:kn,rightTableWidth:jn,headerWidth:Fn,rowsHeight:Tn,windowHeight:Hn,footerHeight:la,emptyStyle:ca,rootStyle:Zn,headerHeight:Bn}=useStyles(e,{columnsTotalWidth:$,data:hn,fixedColumnsOnLeft:V,fixedColumnsOnRight:L}),Wn=shallowRef(!1),da=ref(),ga=computed(()=>{const Gn=unref(hn).length===0;return isArray$3(e.fixedData)?e.fixedData.length===0&&Gn:Gn});function Ca(Gn){const{estimatedRowHeight:vn,rowHeight:Kn,rowKey:En}=e;return vn?unref(ze)[unref(hn)[Gn][En]]||vn:Kn}function ra(){const{onEndReached:Gn}=e;if(!Gn)return;const{scrollTop:vn}=unref(_e),Kn=unref(Tn),En=unref(Hn),kt=Kn-(vn+En)+e.hScrollbarSize;unref($e)>=0&&Kn===vn+unref(Nn)-unref(Bn)&&Gn(kt)}return watch(()=>e.expandedRowKeys,Gn=>Ce.value=Gn,{deep:!0}),{columns:y,containerRef:da,mainTableRef:n,leftTableRef:r,rightTableRef:g,isDynamic:xe,isResetting:Ie,isScrolling:Wn,hoveringRowKey:Ne,hasFixedColumns:z,columnsStyles:k,columnsTotalWidth:$,data:hn,expandedRowKeys:Ce,depthMap:Vn,fixedColumnsOnLeft:V,fixedColumnsOnRight:L,mainColumns:j,bodyWidth:Mn,emptyStyle:ca,rootStyle:Zn,headerWidth:Fn,footerHeight:la,mainTableHeight:Nn,fixedTableHeight:$n,leftTableWidth:kn,rightTableWidth:jn,showEmpty:ga,getRowHeight:Ca,onColumnSorted:ae,onRowHovered:Dt,onRowExpanded:Et,onRowsRendered:Sn,onRowHeightChange:_n,scrollTo:re,scrollToLeft:oe,scrollToTop:ue,scrollToRow:le,onScroll:de,onVerticalScroll:he}}const TableV2InjectionKey=Symbol("tableV2"),classType=String,columns={type:definePropType(Array),required:!0},fixedDataType={type:definePropType(Array)},dataType={...fixedDataType,required:!0},expandColumnKey=String,expandKeys={type:definePropType(Array),default:()=>mutable([])},requiredNumber={type:Number,required:!0},rowKey={type:definePropType([String,Number,Symbol]),default:"id"},styleType={type:definePropType(Object)},tableV2RowProps=buildProps({class:String,columns,columnsStyles:{type:definePropType(Object),required:!0},depth:Number,expandColumnKey,estimatedRowHeight:{...virtualizedGridProps.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:definePropType(Function)},onRowHover:{type:definePropType(Function)},onRowHeightChange:{type:definePropType(Function)},rowData:{type:definePropType(Object),required:!0},rowEventHandlers:{type:definePropType(Object)},rowIndex:{type:Number,required:!0},rowKey,style:{type:definePropType(Object)}}),requiredNumberType={type:Number,required:!0},tableV2HeaderProps=buildProps({class:String,columns,fixedHeaderData:{type:definePropType(Array)},headerData:{type:definePropType(Array),required:!0},headerHeight:{type:definePropType([Number,Array]),default:50},rowWidth:requiredNumberType,rowHeight:{type:Number,default:50},height:requiredNumberType,width:requiredNumberType}),tableV2GridProps=buildProps({columns,data:dataType,fixedData:fixedDataType,estimatedRowHeight:tableV2RowProps.estimatedRowHeight,width:requiredNumber,height:requiredNumber,headerWidth:requiredNumber,headerHeight:tableV2HeaderProps.headerHeight,bodyWidth:requiredNumber,rowHeight:requiredNumber,cache:virtualizedListProps.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:virtualizedGridProps.scrollbarAlwaysOn,scrollbarStartGap:virtualizedGridProps.scrollbarStartGap,scrollbarEndGap:virtualizedGridProps.scrollbarEndGap,class:classType,style:styleType,containerStyle:styleType,getRowHeight:{type:definePropType(Function),required:!0},rowKey:tableV2RowProps.rowKey,onRowsRendered:{type:definePropType(Function)},onScroll:{type:definePropType(Function)}}),tableV2Props=buildProps({cache:tableV2GridProps.cache,estimatedRowHeight:tableV2RowProps.estimatedRowHeight,rowKey,headerClass:{type:definePropType([String,Function])},headerProps:{type:definePropType([Object,Function])},headerCellProps:{type:definePropType([Object,Function])},headerHeight:tableV2HeaderProps.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:definePropType([String,Function])},rowProps:{type:definePropType([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:definePropType([Object,Function])},columns,data:dataType,dataGetter:{type:definePropType(Function)},fixedData:fixedDataType,expandColumnKey:tableV2RowProps.expandColumnKey,expandedRowKeys:expandKeys,defaultExpandedRowKeys:expandKeys,class:classType,fixed:Boolean,style:{type:definePropType(Object)},width:requiredNumber,height:requiredNumber,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:virtualizedGridProps.hScrollbarSize,vScrollbarSize:virtualizedGridProps.vScrollbarSize,scrollbarAlwaysOn:virtualizedScrollbarProps.alwaysOn,sortBy:{type:definePropType(Object),default:()=>({})},sortState:{type:definePropType(Object),default:void 0},onColumnSort:{type:definePropType(Function)},onExpandedRowsChange:{type:definePropType(Function)},onEndReached:{type:definePropType(Function)},onRowExpand:tableV2RowProps.onRowExpand,onScroll:tableV2GridProps.onScroll,onRowsRendered:tableV2GridProps.onRowsRendered,rowEventHandlers:tableV2RowProps.rowEventHandlers}),TableV2Cell=(e,{slots:n})=>{var r;const{cellData:g,style:y}=e,k=((r=g?.toString)==null?void 0:r.call(g))||"";return createVNode("div",{class:e.class,title:k,style:y},[n.default?n.default(e):k])};TableV2Cell.displayName="ElTableV2Cell";TableV2Cell.inheritAttrs=!1;const HeaderCell=(e,{slots:n})=>{var r,g;return n.default?n.default(e):createVNode("div",{class:e.class,title:(r=e.column)==null?void 0:r.title},[(g=e.column)==null?void 0:g.title])};HeaderCell.displayName="ElTableV2HeaderCell";HeaderCell.inheritAttrs=!1;const tableV2HeaderRowProps=buildProps({class:String,columns,columnsStyles:{type:definePropType(Object),required:!0},headerIndex:Number,style:{type:definePropType(Object)}}),TableV2HeaderRow=defineComponent({name:"ElTableV2HeaderRow",props:tableV2HeaderRowProps,setup(e,{slots:n}){return()=>{const{columns:r,columnsStyles:g,headerIndex:y,style:k}=e;let $=r.map((V,L)=>n.cell({columns:r,column:V,columnIndex:L,headerIndex:y,style:g[V.key]}));return n.header&&($=n.header({cells:$.map(V=>isArray$3(V)&&V.length===1?V[0]:V),columns:r,headerIndex:y})),createVNode("div",{class:e.class,style:k,role:"row"},[$])}}}),COMPONENT_NAME$7="ElTableV2Header",TableV2Header=defineComponent({name:COMPONENT_NAME$7,props:tableV2HeaderProps,setup(e,{slots:n,expose:r}){const g=useNamespace("table-v2"),y=ref(),k=computed(()=>enforceUnit({width:e.width,height:e.height})),$=computed(()=>enforceUnit({width:e.rowWidth,height:e.height})),V=computed(()=>castArray$1(unref(e.headerHeight))),L=ae=>{const re=unref(y);nextTick(()=>{re?.scroll&&re.scroll({left:ae})})},z=()=>{const ae=g.e("fixed-header-row"),{columns:re,fixedHeaderData:oe,rowHeight:ue}=e;return oe?.map((le,de)=>{var he;const _e=enforceUnit({height:ue,width:"100%"});return(he=n.fixed)==null?void 0:he.call(n,{class:ae,columns:re,rowData:le,rowIndex:-(de+1),style:_e})})},j=()=>{const ae=g.e("dynamic-header-row"),{columns:re}=e;return unref(V).map((oe,ue)=>{var le;const de=enforceUnit({width:"100%",height:oe});return(le=n.dynamic)==null?void 0:le.call(n,{class:ae,columns:re,headerIndex:ue,style:de})})};return r({scrollToLeft:L}),()=>{if(!(e.height<=0))return createVNode("div",{ref:y,class:e.class,style:unref(k),role:"rowgroup"},[createVNode("div",{style:unref($),class:g.e("header")},[j(),z()])])}}}),useTableRow=e=>{const{isScrolling:n}=inject(TableV2InjectionKey),r=ref(!1),g=ref(),y=computed(()=>isNumber$1(e.estimatedRowHeight)&&e.rowIndex>=0),k=(L=!1)=>{const z=unref(g);if(!z)return;const{columns:j,onRowHeightChange:ae,rowKey:re,rowIndex:oe,style:ue}=e,{height:le}=z.getBoundingClientRect();r.value=!0,nextTick(()=>{if(L||le!==Number.parseInt(ue.height)){const de=j[0],he=de?.placeholderSign===placeholderSign;ae?.({rowKey:re,height:le,rowIndex:oe},de&&!he&&de.fixed)}})},$=computed(()=>{const{rowData:L,rowIndex:z,rowKey:j,onRowHover:ae}=e,re=e.rowEventHandlers||{},oe={};return Object.entries(re).forEach(([ue,le])=>{isFunction$3(le)&&(oe[ue]=de=>{le({event:de,rowData:L,rowIndex:z,rowKey:j})})}),ae&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:ue,hovered:le})=>{const de=oe[ue];oe[ue]=he=>{ae({event:he,hovered:le,rowData:L,rowIndex:z,rowKey:j}),de?.(he)}}),oe}),V=L=>{const{onRowExpand:z,rowData:j,rowIndex:ae,rowKey:re}=e;z?.({expanded:L,rowData:j,rowIndex:ae,rowKey:re})};return onMounted(()=>{unref(y)&&k(!0)}),{isScrolling:n,measurable:y,measured:r,rowRef:g,eventHandlers:$,onExpand:V}},COMPONENT_NAME$6="ElTableV2TableRow",TableV2Row=defineComponent({name:COMPONENT_NAME$6,props:tableV2RowProps,setup(e,{expose:n,slots:r,attrs:g}){const{eventHandlers:y,isScrolling:k,measurable:$,measured:V,rowRef:L,onExpand:z}=useTableRow(e);return n({onExpand:z}),()=>{const{columns:j,columnsStyles:ae,expandColumnKey:re,depth:oe,rowData:ue,rowIndex:le,style:de}=e;let he=j.map((_e,Ce)=>{const Ne=isArray$3(ue.children)&&ue.children.length>0&&_e.key===re;return r.cell({column:_e,columns:j,columnIndex:Ce,depth:oe,style:ae[_e.key],rowData:ue,rowIndex:le,isScrolling:unref(k),expandIconProps:Ne?{rowData:ue,rowIndex:le,onExpand:z}:void 0})});if(r.row&&(he=r.row({cells:he.map(_e=>isArray$3(_e)&&_e.length===1?_e[0]:_e),style:de,columns:j,depth:oe,rowData:ue,rowIndex:le,isScrolling:unref(k)})),unref($)){const{height:_e,...Ce}=de||{},Ne=unref(V);return createVNode("div",mergeProps({ref:L,class:e.class,style:Ne?de:Ce,role:"row"},g,unref(y)),[he])}return createVNode("div",mergeProps(g,{ref:L,class:e.class,style:de,role:"row"},unref(y)),[he])}}}),SortIcon=e=>{const{sortOrder:n}=e;return createVNode(ElIcon,{size:14,class:e.class},{default:()=>[n===SortOrder.ASC?createVNode(sort_up_default,null,null):createVNode(sort_down_default,null,null)]})},ExpandIcon=e=>{const{expanded:n,expandable:r,onExpand:g,style:y,size:k}=e,$={onClick:r?()=>g(!n):void 0,class:e.class};return createVNode(ElIcon,mergeProps($,{size:k,style:y}),{default:()=>[createVNode(arrow_right_default,null,null)]})},COMPONENT_NAME$5="ElTableV2Grid",useTableGrid=e=>{const n=ref(),r=ref(),g=computed(()=>{const{data:le,rowHeight:de,estimatedRowHeight:he}=e;if(!he)return le.length*de}),y=computed(()=>{const{fixedData:le,rowHeight:de}=e;return(le?.length||0)*de}),k=computed(()=>sum(e.headerHeight)),$=computed(()=>{const{height:le}=e;return Math.max(0,le-unref(k)-unref(y))}),V=computed(()=>unref(k)+unref(y)>0),L=({data:le,rowIndex:de})=>le[de][e.rowKey];function z({rowCacheStart:le,rowCacheEnd:de,rowVisibleStart:he,rowVisibleEnd:_e}){var Ce;(Ce=e.onRowsRendered)==null||Ce.call(e,{rowCacheStart:le,rowCacheEnd:de,rowVisibleStart:he,rowVisibleEnd:_e})}function j(le,de){var he;(he=r.value)==null||he.resetAfterRowIndex(le,de)}function ae(le,de){const he=unref(n),_e=unref(r);!he||!_e||(isObject$3(le)?(he.scrollToLeft(le.scrollLeft),_e.scrollTo(le)):(he.scrollToLeft(le),_e.scrollTo({scrollLeft:le,scrollTop:de})))}function re(le){var de;(de=unref(r))==null||de.scrollTo({scrollTop:le})}function oe(le,de){var he;(he=unref(r))==null||he.scrollToItem(le,1,de)}function ue(){var le,de;(le=unref(r))==null||le.$forceUpdate(),(de=unref(n))==null||de.$forceUpdate()}return{bodyRef:r,forceUpdate:ue,fixedRowHeight:y,gridHeight:$,hasHeader:V,headerHeight:k,headerRef:n,totalHeight:g,itemKey:L,onItemRendered:z,resetAfterRowIndex:j,scrollTo:ae,scrollToTop:re,scrollToRow:oe}},TableGrid=defineComponent({name:COMPONENT_NAME$5,props:tableV2GridProps,setup(e,{slots:n,expose:r}){const{ns:g}=inject(TableV2InjectionKey),{bodyRef:y,fixedRowHeight:k,gridHeight:$,hasHeader:V,headerRef:L,headerHeight:z,totalHeight:j,forceUpdate:ae,itemKey:re,onItemRendered:oe,resetAfterRowIndex:ue,scrollTo:le,scrollToTop:de,scrollToRow:he}=useTableGrid(e);r({forceUpdate:ae,totalHeight:j,scrollTo:le,scrollToTop:de,scrollToRow:he,resetAfterRowIndex:ue});const _e=()=>e.bodyWidth;return()=>{const{cache:Ce,columns:Ne,data:$e,fixedData:xe,useIsScrolling:Ie,scrollbarAlwaysOn:ze,scrollbarEndGap:qe,scrollbarStartGap:Et,style:_n,rowHeight:Dt,bodyWidth:Sn,estimatedRowHeight:hn,headerWidth:Vn,height:Mn,width:$n,getRowHeight:Nn,onScroll:kn}=e,jn=isNumber$1(hn),Fn=jn?DynamicSizeGrid:FixedSizeGrid,Tn=unref(z);return createVNode("div",{role:"table",class:[g.e("table"),e.class],style:_n},[createVNode(Fn,{ref:y,data:$e,useIsScrolling:Ie,itemKey:re,columnCache:0,columnWidth:jn?_e:Sn,totalColumn:1,totalRow:$e.length,rowCache:Ce,rowHeight:jn?Nn:Dt,width:$n,height:unref($),class:g.e("body"),role:"rowgroup",scrollbarStartGap:Et,scrollbarEndGap:qe,scrollbarAlwaysOn:ze,onScroll:kn,onItemRendered:oe,perfMode:!1},{default:Hn=>{var la;const ca=$e[Hn.rowIndex];return(la=n.row)==null?void 0:la.call(n,{...Hn,columns:Ne,rowData:ca})}}),unref(V)&&createVNode(TableV2Header,{ref:L,class:g.e("header-wrapper"),columns:Ne,headerData:$e,headerHeight:e.headerHeight,fixedHeaderData:xe,rowWidth:Vn,rowHeight:Dt,width:$n,height:Math.min(Tn+unref(k),Mn)},{dynamic:n.header,fixed:n.row})])}}});function _isSlot$5(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!isVNode$1(e)}const MainTable=(e,{slots:n})=>{const{mainTableRef:r,...g}=e;return createVNode(TableGrid,mergeProps({ref:r},g),_isSlot$5(n)?n:{default:()=>[n]})};function _isSlot$4(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!isVNode$1(e)}const LeftTable$1=(e,{slots:n})=>{if(!e.columns.length)return;const{leftTableRef:r,...g}=e;return createVNode(TableGrid,mergeProps({ref:r},g),_isSlot$4(n)?n:{default:()=>[n]})};function _isSlot$3(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!isVNode$1(e)}const LeftTable=(e,{slots:n})=>{if(!e.columns.length)return;const{rightTableRef:r,...g}=e;return createVNode(TableGrid,mergeProps({ref:r},g),_isSlot$3(n)?n:{default:()=>[n]})};function _isSlot$2(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!isVNode$1(e)}const RowRenderer=(e,{slots:n})=>{const{columns:r,columnsStyles:g,depthMap:y,expandColumnKey:k,expandedRowKeys:$,estimatedRowHeight:V,hasFixedColumns:L,hoveringRowKey:z,rowData:j,rowIndex:ae,style:re,isScrolling:oe,rowProps:ue,rowClass:le,rowKey:de,rowEventHandlers:he,ns:_e,onRowHovered:Ce,onRowExpanded:Ne}=e,$e=tryCall(le,{columns:r,rowData:j,rowIndex:ae},""),xe=tryCall(ue,{columns:r,rowData:j,rowIndex:ae}),Ie=j[de],ze=y[Ie]||0,qe=!!k,Et=ae<0,_n=[_e.e("row"),$e,{[_e.e(`row-depth-${ze}`)]:qe&&ae>=0,[_e.is("expanded")]:qe&&$.includes(Ie),[_e.is("hovered")]:!oe&&Ie===z,[_e.is("fixed")]:!ze&&Et,[_e.is("customized")]:!!n.row}],Dt=L?Ce:void 0,Sn={...xe,columns:r,columnsStyles:g,class:_n,depth:ze,expandColumnKey:k,estimatedRowHeight:Et?void 0:V,isScrolling:oe,rowIndex:ae,rowData:j,rowKey:Ie,rowEventHandlers:he,style:re};return createVNode(TableV2Row,mergeProps(Sn,{onRowHover:Dt,onRowExpand:Ne}),_isSlot$2(n)?n:{default:()=>[n]})},CellRenderer=({columns:e,column:n,columnIndex:r,depth:g,expandIconProps:y,isScrolling:k,rowData:$,rowIndex:V,style:L,expandedRowKeys:z,ns:j,cellProps:ae,expandColumnKey:re,indentSize:oe,iconSize:ue,rowKey:le},{slots:de})=>{const he=enforceUnit(L);if(n.placeholderSign===placeholderSign)return createVNode("div",{class:j.em("row-cell","placeholder"),style:he},null);const{cellRenderer:_e,dataKey:Ce,dataGetter:Ne}=n,xe=componentToSlot(_e)||de.default||(Mn=>createVNode(TableV2Cell,Mn,null)),Ie=isFunction$3(Ne)?Ne({columns:e,column:n,columnIndex:r,rowData:$,rowIndex:V}):get($,Ce??""),ze=tryCall(ae,{cellData:Ie,columns:e,column:n,columnIndex:r,rowIndex:V,rowData:$}),qe={class:j.e("cell-text"),columns:e,column:n,columnIndex:r,cellData:Ie,isScrolling:k,rowData:$,rowIndex:V},Et=xe(qe),_n=[j.e("row-cell"),n.class,n.align===Alignment.CENTER&&j.is("align-center"),n.align===Alignment.RIGHT&&j.is("align-right")],Dt=V>=0&&re&&n.key===re,Sn=V>=0&&z.includes($[le]);let hn;const Vn=`margin-inline-start: ${g*oe}px;`;return Dt&&(isObject$3(y)?hn=createVNode(ExpandIcon,mergeProps(y,{class:[j.e("expand-icon"),j.is("expanded",Sn)],size:ue,expanded:Sn,style:Vn,expandable:!0}),null):hn=createVNode("div",{style:[Vn,`width: ${ue}px; height: ${ue}px;`].join(" ")},null)),createVNode("div",mergeProps({class:_n,style:he},ze,{role:"cell"}),[hn,Et])};CellRenderer.inheritAttrs=!1;function _isSlot$1(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!isVNode$1(e)}const HeaderRenderer=({columns:e,columnsStyles:n,headerIndex:r,style:g,headerClass:y,headerProps:k,ns:$},{slots:V})=>{const L={columns:e,headerIndex:r},z=[$.e("header-row"),tryCall(y,L,""),{[$.is("customized")]:!!V.header}],j={...tryCall(k,L),columnsStyles:n,class:z,columns:e,headerIndex:r,style:g};return createVNode(TableV2HeaderRow,j,_isSlot$1(V)?V:{default:()=>[V]})},HeaderCellRenderer=(e,{slots:n})=>{const{column:r,ns:g,style:y,onColumnSorted:k}=e,$=enforceUnit(y);if(r.placeholderSign===placeholderSign)return createVNode("div",{class:g.em("header-row-cell","placeholder"),style:$},null);const{headerCellRenderer:V,headerClass:L,sortable:z}=r,j={...e,class:g.e("header-cell-text")},re=(componentToSlot(V)||n.default||(Ne=>createVNode(HeaderCell,Ne,null)))(j),{sortBy:oe,sortState:ue,headerCellProps:le}=e;let de,he;if(ue){const Ne=ue[r.key];de=!!oppositeOrderMap[Ne],he=de?Ne:SortOrder.ASC}else de=r.key===oe.key,he=de?oe.order:SortOrder.ASC;const _e=[g.e("header-cell"),tryCall(L,e,""),r.align===Alignment.CENTER&&g.is("align-center"),r.align===Alignment.RIGHT&&g.is("align-right"),z&&g.is("sortable")],Ce={...tryCall(le,e),onClick:r.sortable?k:void 0,class:_e,style:$,"data-key":r.key};return createVNode("div",mergeProps(Ce,{role:"columnheader"}),[re,z&&createVNode(SortIcon,{class:[g.e("sort-icon"),de&&g.is("sorting")],sortOrder:he},null)])},Footer$1=(e,{slots:n})=>{var r;return createVNode("div",{class:e.class,style:e.style},[(r=n.default)==null?void 0:r.call(n)])};Footer$1.displayName="ElTableV2Footer";const Footer=(e,{slots:n})=>createVNode("div",{class:e.class,style:e.style},[n.default?n.default():createVNode(ElEmpty,null,null)]);Footer.displayName="ElTableV2Empty";const Overlay=(e,{slots:n})=>{var r;return createVNode("div",{class:e.class,style:e.style},[(r=n.default)==null?void 0:r.call(n)])};Overlay.displayName="ElTableV2Overlay";function _isSlot(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!isVNode$1(e)}const COMPONENT_NAME$4="ElTableV2",TableV2=defineComponent({name:COMPONENT_NAME$4,props:tableV2Props,setup(e,{slots:n,expose:r}){const g=useNamespace("table-v2"),{columnsStyles:y,fixedColumnsOnLeft:k,fixedColumnsOnRight:$,mainColumns:V,mainTableHeight:L,fixedTableHeight:z,leftTableWidth:j,rightTableWidth:ae,data:re,depthMap:oe,expandedRowKeys:ue,hasFixedColumns:le,hoveringRowKey:de,mainTableRef:he,leftTableRef:_e,rightTableRef:Ce,isDynamic:Ne,isResetting:$e,isScrolling:xe,bodyWidth:Ie,emptyStyle:ze,rootStyle:qe,headerWidth:Et,footerHeight:_n,showEmpty:Dt,scrollTo:Sn,scrollToLeft:hn,scrollToTop:Vn,scrollToRow:Mn,getRowHeight:$n,onColumnSorted:Nn,onRowHeightChange:kn,onRowHovered:jn,onRowExpanded:Fn,onRowsRendered:Tn,onScroll:Hn,onVerticalScroll:la}=useTable(e);return r({scrollTo:Sn,scrollToLeft:hn,scrollToTop:Vn,scrollToRow:Mn}),provide(TableV2InjectionKey,{ns:g,isResetting:$e,hoveringRowKey:de,isScrolling:xe}),()=>{const{cache:ca,cellProps:Zn,estimatedRowHeight:Bn,expandColumnKey:Wn,fixedData:da,headerHeight:ga,headerClass:Ca,headerProps:ra,headerCellProps:Gn,sortBy:vn,sortState:Kn,rowHeight:En,rowClass:kt,rowEventHandlers:At,rowKey:Dn,rowProps:Xn,scrollbarAlwaysOn:aa,indentSize:sa,iconSize:ia,useIsScrolling:ma,vScrollbarSize:ua,width:pe}=e,Oe=unref(re),Ve={cache:ca,class:g.e("main"),columns:unref(V),data:Oe,fixedData:da,estimatedRowHeight:Bn,bodyWidth:unref(Ie)+ua,headerHeight:ga,headerWidth:unref(Et),height:unref(L),mainTableRef:he,rowKey:Dn,rowHeight:En,scrollbarAlwaysOn:aa,scrollbarStartGap:2,scrollbarEndGap:ua,useIsScrolling:ma,width:pe,getRowHeight:$n,onRowsRendered:Tn,onScroll:Hn},Ue=unref(j),Pt=unref(z),Lt={cache:ca,class:g.e("left"),columns:unref(k),data:Oe,estimatedRowHeight:Bn,leftTableRef:_e,rowHeight:En,bodyWidth:Ue,headerWidth:Ue,headerHeight:ga,height:Pt,rowKey:Dn,scrollbarAlwaysOn:aa,scrollbarStartGap:2,scrollbarEndGap:ua,useIsScrolling:ma,width:Ue,getRowHeight:$n,onScroll:la},jt=unref(ae)+ua,Cn={cache:ca,class:g.e("right"),columns:unref($),data:Oe,estimatedRowHeight:Bn,rightTableRef:Ce,rowHeight:En,bodyWidth:jt,headerWidth:jt,headerHeight:ga,height:Pt,rowKey:Dn,scrollbarAlwaysOn:aa,scrollbarStartGap:2,scrollbarEndGap:ua,width:jt,style:`--${unref(g.namespace)}-table-scrollbar-size: ${ua}px`,useIsScrolling:ma,getRowHeight:$n,onScroll:la},xn=unref(y),In={ns:g,depthMap:unref(oe),columnsStyles:xn,expandColumnKey:Wn,expandedRowKeys:unref(ue),estimatedRowHeight:Bn,hasFixedColumns:unref(le),hoveringRowKey:unref(de),rowProps:Xn,rowClass:kt,rowKey:Dn,rowEventHandlers:At,onRowHovered:jn,onRowExpanded:Fn,onRowHeightChange:kn},Ln={cellProps:Zn,expandColumnKey:Wn,indentSize:sa,iconSize:ia,rowKey:Dn,expandedRowKeys:unref(ue),ns:g},An={ns:g,headerClass:Ca,headerProps:ra,columnsStyles:xn},zn={ns:g,sortBy:vn,sortState:Kn,headerCellProps:Gn,onColumnSorted:Nn},Jn={row:Pn=>createVNode(RowRenderer,mergeProps(Pn,In),{row:n.row,cell:Un=>{let On;return n.cell?createVNode(CellRenderer,mergeProps(Un,Ln,{style:xn[Un.column.key]}),_isSlot(On=n.cell(Un))?On:{default:()=>[On]}):createVNode(CellRenderer,mergeProps(Un,Ln,{style:xn[Un.column.key]}),null)}}),header:Pn=>createVNode(HeaderRenderer,mergeProps(Pn,An),{header:n.header,cell:Un=>{let On;return n["header-cell"]?createVNode(HeaderCellRenderer,mergeProps(Un,zn,{style:xn[Un.column.key]}),_isSlot(On=n["header-cell"](Un))?On:{default:()=>[On]}):createVNode(HeaderCellRenderer,mergeProps(Un,zn,{style:xn[Un.column.key]}),null)}})},Qn=[e.class,g.b(),g.e("root"),{[g.is("dynamic")]:unref(Ne)}],ta={class:g.e("footer"),style:unref(_n)};return createVNode("div",{class:Qn,style:unref(qe)},[createVNode(MainTable,Ve,_isSlot(Jn)?Jn:{default:()=>[Jn]}),createVNode(LeftTable$1,Lt,_isSlot(Jn)?Jn:{default:()=>[Jn]}),createVNode(LeftTable,Cn,_isSlot(Jn)?Jn:{default:()=>[Jn]}),n.footer&&createVNode(Footer$1,ta,{default:n.footer}),unref(Dt)&&createVNode(Footer,{class:g.e("empty"),style:unref(ze)},{default:n.empty}),n.overlay&&createVNode(Overlay,{class:g.e("overlay")},{default:n.overlay})])}}}),autoResizerProps=buildProps({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:definePropType(Function)}}),AutoResizer=defineComponent({name:"ElAutoResizer",props:autoResizerProps,setup(e,{slots:n}){const r=useNamespace("auto-resizer"),{height:g,width:y,sizer:k}=useAutoResize(e),$={width:"100%",height:"100%"};return()=>{var V;return createVNode("div",{ref:k,class:r.b(),style:$},[(V=n.default)==null?void 0:V.call(n,{height:g.value,width:y.value})])}}}),ElTableV2=withInstall(TableV2),ElAutoResizer=withInstall(AutoResizer),tabsRootContextKey=Symbol("tabsRootContextKey"),tabBarProps=buildProps({tabs:{type:definePropType(Array),default:()=>mutable([])}}),COMPONENT_NAME$3="ElTabBar",__default__$k=defineComponent({name:COMPONENT_NAME$3}),_sfc_main$1C=defineComponent({...__default__$k,props:tabBarProps,setup(e,{expose:n}){const r=e,g=getCurrentInstance(),y=inject(tabsRootContextKey);y||throwError(COMPONENT_NAME$3,"<el-tabs><el-tab-bar /></el-tabs>");const k=useNamespace("tabs"),$=ref(),V=ref(),L=()=>{let j=0,ae=0;const re=["top","bottom"].includes(y.props.tabPosition)?"width":"height",oe=re==="width"?"x":"y",ue=oe==="x"?"left":"top";return r.tabs.every(le=>{var de,he;const _e=(he=(de=g.parent)==null?void 0:de.refs)==null?void 0:he[`tab-${le.uid}`];if(!_e)return!1;if(!le.active)return!0;j=_e[`offset${capitalize$1(ue)}`],ae=_e[`client${capitalize$1(re)}`];const Ce=window.getComputedStyle(_e);return re==="width"&&(r.tabs.length>1&&(ae-=Number.parseFloat(Ce.paddingLeft)+Number.parseFloat(Ce.paddingRight)),j+=Number.parseFloat(Ce.paddingLeft)),!1}),{[re]:`${ae}px`,transform:`translate${capitalize$1(oe)}(${j}px)`}},z=()=>V.value=L();return watch(()=>r.tabs,async()=>{await nextTick(),z()},{immediate:!0}),useResizeObserver($,()=>z()),n({ref:$,update:z}),(j,ae)=>(openBlock(),createElementBlock("div",{ref_key:"barRef",ref:$,class:normalizeClass([unref(k).e("active-bar"),unref(k).is(unref(y).props.tabPosition)]),style:normalizeStyle(V.value)},null,6))}});var TabBar=_export_sfc$1(_sfc_main$1C,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const tabNavProps=buildProps({panes:{type:definePropType(Array),default:()=>mutable([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),tabNavEmits={tabClick:(e,n,r)=>r instanceof Event,tabRemove:(e,n)=>n instanceof Event},COMPONENT_NAME$2="ElTabNav",TabNav=defineComponent({name:COMPONENT_NAME$2,props:tabNavProps,emits:tabNavEmits,setup(e,{expose:n,emit:r}){const g=getCurrentInstance(),y=inject(tabsRootContextKey);y||throwError(COMPONENT_NAME$2,"<el-tabs><tab-nav /></el-tabs>");const k=useNamespace("tabs"),$=useDocumentVisibility(),V=useWindowFocus(),L=ref(),z=ref(),j=ref(),ae=ref(),re=ref(!1),oe=ref(0),ue=ref(!1),le=ref(!0),de=computed(()=>["top","bottom"].includes(y.props.tabPosition)?"width":"height"),he=computed(()=>({transform:`translate${de.value==="width"?"X":"Y"}(-${oe.value}px)`})),_e=()=>{if(!L.value)return;const qe=L.value[`offset${capitalize$1(de.value)}`],Et=oe.value;if(!Et)return;const _n=Et>qe?Et-qe:0;oe.value=_n},Ce=()=>{if(!L.value||!z.value)return;const qe=z.value[`offset${capitalize$1(de.value)}`],Et=L.value[`offset${capitalize$1(de.value)}`],_n=oe.value;if(qe-_n<=Et)return;const Dt=qe-_n>Et*2?_n+Et:qe-Et;oe.value=Dt},Ne=async()=>{const qe=z.value;if(!re.value||!j.value||!L.value||!qe)return;await nextTick();const Et=j.value.querySelector(".is-active");if(!Et)return;const _n=L.value,Dt=["top","bottom"].includes(y.props.tabPosition),Sn=Et.getBoundingClientRect(),hn=_n.getBoundingClientRect(),Vn=Dt?qe.offsetWidth-hn.width:qe.offsetHeight-hn.height,Mn=oe.value;let $n=Mn;Dt?(Sn.left<hn.left&&($n=Mn-(hn.left-Sn.left)),Sn.right>hn.right&&($n=Mn+Sn.right-hn.right)):(Sn.top<hn.top&&($n=Mn-(hn.top-Sn.top)),Sn.bottom>hn.bottom&&($n=Mn+(Sn.bottom-hn.bottom))),$n=Math.max($n,0),oe.value=Math.min($n,Vn)},$e=()=>{var qe;if(!z.value||!L.value)return;e.stretch&&((qe=ae.value)==null||qe.update());const Et=z.value[`offset${capitalize$1(de.value)}`],_n=L.value[`offset${capitalize$1(de.value)}`],Dt=oe.value;_n<Et?(re.value=re.value||{},re.value.prev=Dt,re.value.next=Dt+_n<Et,Et-Dt<_n&&(oe.value=Et-_n)):(re.value=!1,Dt>0&&(oe.value=0))},xe=qe=>{const Et=qe.code,{up:_n,down:Dt,left:Sn,right:hn}=EVENT_CODE;if(![_n,Dt,Sn,hn].includes(Et))return;const Vn=Array.from(qe.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),Mn=Vn.indexOf(qe.target);let $n;Et===Sn||Et===_n?Mn===0?$n=Vn.length-1:$n=Mn-1:Mn<Vn.length-1?$n=Mn+1:$n=0,Vn[$n].focus({preventScroll:!0}),Vn[$n].click(),Ie()},Ie=()=>{le.value&&(ue.value=!0)},ze=()=>ue.value=!1;return watch($,qe=>{qe==="hidden"?le.value=!1:qe==="visible"&&setTimeout(()=>le.value=!0,50)}),watch(V,qe=>{qe?setTimeout(()=>le.value=!0,50):le.value=!1}),useResizeObserver(j,$e),onMounted(()=>setTimeout(()=>Ne(),0)),onUpdated(()=>$e()),n({scrollToActiveTab:Ne,removeFocus:ze}),watch(()=>e.panes,()=>g.update(),{flush:"post",deep:!0}),()=>{const qe=re.value?[createVNode("span",{class:[k.e("nav-prev"),k.is("disabled",!re.value.prev)],onClick:_e},[createVNode(ElIcon,null,{default:()=>[createVNode(arrow_left_default,null,null)]})]),createVNode("span",{class:[k.e("nav-next"),k.is("disabled",!re.value.next)],onClick:Ce},[createVNode(ElIcon,null,{default:()=>[createVNode(arrow_right_default,null,null)]})])]:null,Et=e.panes.map((_n,Dt)=>{var Sn,hn,Vn,Mn;const $n=_n.uid,Nn=_n.props.disabled,kn=(hn=(Sn=_n.props.name)!=null?Sn:_n.index)!=null?hn:`${Dt}`,jn=!Nn&&(_n.isClosable||e.editable);_n.index=`${Dt}`;const Fn=jn?createVNode(ElIcon,{class:"is-icon-close",onClick:la=>r("tabRemove",_n,la)},{default:()=>[createVNode(close_default,null,null)]}):null,Tn=((Mn=(Vn=_n.slots).label)==null?void 0:Mn.call(Vn))||_n.props.label,Hn=!Nn&&_n.active?0:-1;return createVNode("div",{ref:`tab-${$n}`,class:[k.e("item"),k.is(y.props.tabPosition),k.is("active",_n.active),k.is("disabled",Nn),k.is("closable",jn),k.is("focus",ue.value)],id:`tab-${kn}`,key:`tab-${$n}`,"aria-controls":`pane-${kn}`,role:"tab","aria-selected":_n.active,tabindex:Hn,onFocus:()=>Ie(),onBlur:()=>ze(),onClick:la=>{ze(),r("tabClick",_n,kn,la)},onKeydown:la=>{jn&&(la.code===EVENT_CODE.delete||la.code===EVENT_CODE.backspace)&&r("tabRemove",_n,la)}},[Tn,Fn])});return createVNode("div",{ref:j,class:[k.e("nav-wrap"),k.is("scrollable",!!re.value),k.is(y.props.tabPosition)]},[qe,createVNode("div",{class:k.e("nav-scroll"),ref:L},[createVNode("div",{class:[k.e("nav"),k.is(y.props.tabPosition),k.is("stretch",e.stretch&&["top","bottom"].includes(y.props.tabPosition))],ref:z,style:he.value,role:"tablist",onKeydown:xe},[e.type?null:createVNode(TabBar,{ref:ae,tabs:[...e.panes]},null),Et])])])}}}),tabsProps=buildProps({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:definePropType(Function),default:()=>!0},stretch:Boolean}),isPaneName=e=>isString$3(e)||isNumber$1(e),tabsEmits={[UPDATE_MODEL_EVENT]:e=>isPaneName(e),tabClick:(e,n)=>n instanceof Event,tabChange:e=>isPaneName(e),edit:(e,n)=>["remove","add"].includes(n),tabRemove:e=>isPaneName(e),tabAdd:()=>!0};var Tabs=defineComponent({name:"ElTabs",props:tabsProps,emits:tabsEmits,setup(e,{emit:n,slots:r,expose:g}){var y,k;const $=useNamespace("tabs"),{children:V,addChild:L,removeChild:z}=useOrderedChildren(getCurrentInstance(),"ElTabPane"),j=ref(),ae=ref((k=(y=e.modelValue)!=null?y:e.activeName)!=null?k:"0"),re=he=>{ae.value=he,n(UPDATE_MODEL_EVENT,he),n("tabChange",he)},oe=async he=>{var _e,Ce,Ne;if(!(ae.value===he||isUndefined(he)))try{await((_e=e.beforeLeave)==null?void 0:_e.call(e,he,ae.value))!==!1&&(re(he),(Ne=(Ce=j.value)==null?void 0:Ce.removeFocus)==null||Ne.call(Ce))}catch{}},ue=(he,_e,Ce)=>{he.props.disabled||(oe(_e),n("tabClick",he,Ce))},le=(he,_e)=>{he.props.disabled||isUndefined(he.props.name)||(_e.stopPropagation(),n("edit",he.props.name,"remove"),n("tabRemove",he.props.name))},de=()=>{n("edit",void 0,"add"),n("tabAdd")};return useDeprecated({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},computed(()=>!!e.activeName)),watch(()=>e.activeName,he=>oe(he)),watch(()=>e.modelValue,he=>oe(he)),watch(ae,async()=>{var he;await nextTick(),(he=j.value)==null||he.scrollToActiveTab()}),provide(tabsRootContextKey,{props:e,currentName:ae,registerPane:L,unregisterPane:z}),g({currentName:ae}),()=>{const he=e.editable||e.addable?createVNode("span",{class:$.e("new-tab"),tabindex:"0",onClick:de,onKeydown:Ne=>{Ne.code===EVENT_CODE.enter&&de()}},[createVNode(ElIcon,{class:$.is("icon-plus")},{default:()=>[createVNode(plus_default,null,null)]})]):null,_e=createVNode("div",{class:[$.e("header"),$.is(e.tabPosition)]},[he,createVNode(TabNav,{ref:j,currentName:ae.value,editable:e.editable,type:e.type,panes:V.value,stretch:e.stretch,onTabClick:ue,onTabRemove:le},null)]),Ce=createVNode("div",{class:$.e("content")},[renderSlot(r,"default")]);return createVNode("div",{class:[$.b(),$.m(e.tabPosition),{[$.m("card")]:e.type==="card",[$.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[_e,Ce]:[Ce,_e]])}}});const tabPaneProps=buildProps({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),_hoisted_1$1m=["id","aria-hidden","aria-labelledby"],COMPONENT_NAME$1="ElTabPane",__default__$j=defineComponent({name:COMPONENT_NAME$1}),_sfc_main$1B=defineComponent({...__default__$j,props:tabPaneProps,setup(e){const n=e,r=getCurrentInstance(),g=useSlots(),y=inject(tabsRootContextKey);y||throwError(COMPONENT_NAME$1,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const k=useNamespace("tab-pane"),$=ref(),V=computed(()=>n.closable||y.props.closable),L=computedEager(()=>{var oe;return y.currentName.value===((oe=n.name)!=null?oe:$.value)}),z=ref(L.value),j=computed(()=>{var oe;return(oe=n.name)!=null?oe:$.value}),ae=computedEager(()=>!n.lazy||z.value||L.value);watch(L,oe=>{oe&&(z.value=!0)});const re=reactive({uid:r.uid,slots:g,props:n,paneName:j,active:L,index:$,isClosable:V});return onMounted(()=>{y.registerPane(re)}),onUnmounted(()=>{y.unregisterPane(re.uid)}),(oe,ue)=>unref(ae)?withDirectives((openBlock(),createElementBlock("div",{key:0,id:`pane-${unref(j)}`,class:normalizeClass(unref(k).b()),role:"tabpanel","aria-hidden":!unref(L),"aria-labelledby":`tab-${unref(j)}`},[renderSlot(oe.$slots,"default")],10,_hoisted_1$1m)),[[vShow,unref(L)]]):createCommentVNode("v-if",!0)}});var TabPane=_export_sfc$1(_sfc_main$1B,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const ElTabs=withInstall(Tabs,{TabPane}),ElTabPane=withNoopInstall(TabPane),textProps=buildProps({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:componentSizes,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),__default__$i=defineComponent({name:"ElText"}),_sfc_main$1A=defineComponent({...__default__$i,props:textProps,setup(e){const n=e,r=useFormSize(),g=useNamespace("text"),y=computed(()=>[g.b(),g.m(n.type),g.m(r.value),g.is("truncated",n.truncated)]);return(k,$)=>(openBlock(),createBlock(resolveDynamicComponent(k.tag),{class:normalizeClass(unref(y))},{default:withCtx(()=>[renderSlot(k.$slots,"default")]),_:3},8,["class"]))}});var Text$1=_export_sfc$1(_sfc_main$1A,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const ElText=withInstall(Text$1),timeSelectProps=buildProps({format:{type:String,default:"HH:mm"},modelValue:String,disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:String,default:"light"},clearable:{type:Boolean,default:!0},size:useSizeProp,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:String,maxTime:String,name:String,prefixIcon:{type:definePropType([String,Object]),default:()=>clock_default},clearIcon:{type:definePropType([String,Object]),default:()=>circle_close_default}}),parseTime=e=>{const n=(e||"").split(":");if(n.length>=2){let r=Number.parseInt(n[0],10);const g=Number.parseInt(n[1],10),y=e.toUpperCase();return y.includes("AM")&&r===12?r=0:y.includes("PM")&&r!==12&&(r+=12),{hours:r,minutes:g}}return null},compareTime=(e,n)=>{const r=parseTime(e);if(!r)return-1;const g=parseTime(n);if(!g)return-1;const y=r.minutes+r.hours*60,k=g.minutes+g.hours*60;return y===k?0:y>k?1:-1},padTime=e=>`${e}`.padStart(2,"0"),formatTime=e=>`${padTime(e.hours)}:${padTime(e.minutes)}`,nextTime=(e,n)=>{const r=parseTime(e);if(!r)return"";const g=parseTime(n);if(!g)return"";const y={hours:r.hours,minutes:r.minutes};return y.minutes+=g.minutes,y.hours+=g.hours,y.hours+=Math.floor(y.minutes/60),y.minutes=y.minutes%60,formatTime(y)},__default__$h=defineComponent({name:"ElTimeSelect"}),_sfc_main$1z=defineComponent({...__default__$h,props:timeSelectProps,emits:["change","blur","focus","update:modelValue"],setup(e,{expose:n}){const r=e;dayjs.extend(customParseFormat);const{Option:g}=ElSelect,y=useNamespace("input"),k=ref(),$=useFormDisabled(),V=computed(()=>r.modelValue),L=computed(()=>{const de=parseTime(r.start);return de?formatTime(de):null}),z=computed(()=>{const de=parseTime(r.end);return de?formatTime(de):null}),j=computed(()=>{const de=parseTime(r.step);return de?formatTime(de):null}),ae=computed(()=>{const de=parseTime(r.minTime||"");return de?formatTime(de):null}),re=computed(()=>{const de=parseTime(r.maxTime||"");return de?formatTime(de):null}),oe=computed(()=>{const de=[];if(r.start&&r.end&&r.step){let he=L.value,_e;for(;he&&z.value&&compareTime(he,z.value)<=0;)_e=dayjs(he,"HH:mm").format(r.format),de.push({value:_e,disabled:compareTime(he,ae.value||"-1:-1")<=0||compareTime(he,re.value||"100:100")>=0}),he=nextTime(he,j.value)}return de});return n({blur:()=>{var de,he;(he=(de=k.value)==null?void 0:de.blur)==null||he.call(de)},focus:()=>{var de,he;(he=(de=k.value)==null?void 0:de.focus)==null||he.call(de)}}),(de,he)=>(openBlock(),createBlock(unref(ElSelect),{ref_key:"select",ref:k,"model-value":unref(V),disabled:unref($),clearable:de.clearable,"clear-icon":de.clearIcon,size:de.size,effect:de.effect,placeholder:de.placeholder,"default-first-option":"",filterable:de.editable,"onUpdate:modelValue":he[0]||(he[0]=_e=>de.$emit("update:modelValue",_e)),onChange:he[1]||(he[1]=_e=>de.$emit("change",_e)),onBlur:he[2]||(he[2]=_e=>de.$emit("blur",_e)),onFocus:he[3]||(he[3]=_e=>de.$emit("focus",_e))},{prefix:withCtx(()=>[de.prefixIcon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(y).e("prefix-icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(de.prefixIcon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)]),default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(oe),_e=>(openBlock(),createBlock(unref(g),{key:_e.value,label:_e.value,value:_e.value,disabled:_e.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable"]))}});var TimeSelect=_export_sfc$1(_sfc_main$1z,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-select/src/time-select.vue"]]);TimeSelect.install=e=>{e.component(TimeSelect.name,TimeSelect)};const _TimeSelect=TimeSelect,ElTimeSelect=_TimeSelect,Timeline=defineComponent({name:"ElTimeline",setup(e,{slots:n}){const r=useNamespace("timeline");return provide("timeline",n),()=>h$1("ul",{class:[r.b()]},[renderSlot(n,"default")])}}),timelineItemProps=buildProps({timestamp:{type:String,default:""},hideTimestamp:{type:Boolean,default:!1},center:{type:Boolean,default:!1},placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:iconPropType},hollow:{type:Boolean,default:!1}}),__default__$g=defineComponent({name:"ElTimelineItem"}),_sfc_main$1y=defineComponent({...__default__$g,props:timelineItemProps,setup(e){const n=e,r=useNamespace("timeline-item"),g=computed(()=>[r.e("node"),r.em("node",n.size||""),r.em("node",n.type||""),r.is("hollow",n.hollow)]);return(y,k)=>(openBlock(),createElementBlock("li",{class:normalizeClass([unref(r).b(),{[unref(r).e("center")]:y.center}])},[createBaseVNode("div",{class:normalizeClass(unref(r).e("tail"))},null,2),y.$slots.dot?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(unref(g)),style:normalizeStyle({backgroundColor:y.color})},[y.icon?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(r).e("icon"))},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(y.icon)))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],6)),y.$slots.dot?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(r).e("dot"))},[renderSlot(y.$slots,"dot")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(r).e("wrapper"))},[!y.hideTimestamp&&y.placement==="top"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([unref(r).e("timestamp"),unref(r).is("top")])},toDisplayString$1(y.timestamp),3)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(r).e("content"))},[renderSlot(y.$slots,"default")],2),!y.hideTimestamp&&y.placement==="bottom"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass([unref(r).e("timestamp"),unref(r).is("bottom")])},toDisplayString$1(y.timestamp),3)):createCommentVNode("v-if",!0)],2)],2))}});var TimelineItem=_export_sfc$1(_sfc_main$1y,[["__file","/home/runner/work/element-plus/element-plus/packages/components/timeline/src/timeline-item.vue"]]);const ElTimeline=withInstall(Timeline,{TimelineItem}),ElTimelineItem=withNoopInstall(TimelineItem),tooltipV2CommonProps=buildProps({nowrap:Boolean});var TooltipV2Sides=(e=>(e.top="top",e.bottom="bottom",e.left="left",e.right="right",e))(TooltipV2Sides||{});const tooltipV2Sides=Object.values(TooltipV2Sides),tooltipV2ArrowProps=buildProps({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:definePropType(Object),default:null}}),tooltipV2ArrowSpecialProps=buildProps({side:{type:definePropType(String),values:tooltipV2Sides,required:!0}}),tooltipV2Strategies=["absolute","fixed"],tooltipV2Placements=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],tooltipV2ContentProps=buildProps({ariaLabel:String,arrowPadding:{type:definePropType(Number),default:5},effect:{type:String,default:""},contentClass:String,placement:{type:definePropType(String),values:tooltipV2Placements,default:"bottom"},reference:{type:definePropType(Object),default:null},offset:{type:Number,default:8},strategy:{type:definePropType(String),values:tooltipV2Strategies,default:"absolute"},showArrow:{type:Boolean,default:!1}}),tooltipV2RootProps=buildProps({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:definePropType(Function)},"onUpdate:open":{type:definePropType(Function)}}),EventHandler={type:definePropType(Function)},tooltipV2TriggerProps=buildProps({onBlur:EventHandler,onClick:EventHandler,onFocus:EventHandler,onMouseDown:EventHandler,onMouseEnter:EventHandler,onMouseLeave:EventHandler}),tooltipV2Props=buildProps({...tooltipV2RootProps,...tooltipV2ArrowProps,...tooltipV2TriggerProps,...tooltipV2ContentProps,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:definePropType(Object),default:null},teleported:Boolean,to:{type:definePropType(String),default:"body"}}),tooltipV2RootKey=Symbol("tooltipV2"),tooltipV2ContentKey=Symbol("tooltipV2Content"),TOOLTIP_V2_OPEN="tooltip_v2.open",__default__$f=defineComponent({name:"ElTooltipV2Root"}),_sfc_main$1x=defineComponent({...__default__$f,props:tooltipV2RootProps,setup(e,{expose:n}){const r=e,g=ref(r.defaultOpen),y=ref(null),k=computed({get:()=>isPropAbsent(r.open)?g.value:r.open,set:de=>{var he;g.value=de,(he=r["onUpdate:open"])==null||he.call(r,de)}}),$=computed(()=>isNumber$1(r.delayDuration)&&r.delayDuration>0),{start:V,stop:L}=useTimeoutFn(()=>{k.value=!0},computed(()=>r.delayDuration),{immediate:!1}),z=useNamespace("tooltip-v2"),j=useId(),ae=()=>{L(),k.value=!0},re=()=>{unref($)?V():ae()},oe=ae,ue=()=>{L(),k.value=!1};return watch(k,de=>{var he;de&&(document.dispatchEvent(new CustomEvent(TOOLTIP_V2_OPEN)),oe()),(he=r.onOpenChange)==null||he.call(r,de)}),onMounted(()=>{document.addEventListener(TOOLTIP_V2_OPEN,ue)}),onBeforeUnmount(()=>{L(),document.removeEventListener(TOOLTIP_V2_OPEN,ue)}),provide(tooltipV2RootKey,{contentId:j,triggerRef:y,ns:z,onClose:ue,onDelayOpen:re,onOpen:oe}),n({onOpen:oe,onClose:ue}),(de,he)=>renderSlot(de.$slots,"default",{open:unref(k)})}});var TooltipV2Root=_export_sfc$1(_sfc_main$1x,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/root.vue"]]);const __default__$e=defineComponent({name:"ElTooltipV2Arrow"}),_sfc_main$1w=defineComponent({...__default__$e,props:{...tooltipV2ArrowProps,...tooltipV2ArrowSpecialProps},setup(e){const n=e,{ns:r}=inject(tooltipV2RootKey),{arrowRef:g}=inject(tooltipV2ContentKey),y=computed(()=>{const{style:k,width:$,height:V}=n,L=r.namespace.value;return{[`--${L}-tooltip-v2-arrow-width`]:`${$}px`,[`--${L}-tooltip-v2-arrow-height`]:`${V}px`,[`--${L}-tooltip-v2-arrow-border-width`]:`${$/2}px`,[`--${L}-tooltip-v2-arrow-cover-width`]:$/2-1,...k||{}}});return(k,$)=>(openBlock(),createElementBlock("span",{ref_key:"arrowRef",ref:g,style:normalizeStyle(unref(y)),class:normalizeClass(unref(r).e("arrow"))},null,6))}});var TooltipV2Arrow=_export_sfc$1(_sfc_main$1w,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/arrow.vue"]]);const visualHiddenProps=buildProps({style:{type:definePropType([String,Object,Array]),default:()=>({})}}),__default__$d=defineComponent({name:"ElVisuallyHidden"}),_sfc_main$1v=defineComponent({...__default__$d,props:visualHiddenProps,setup(e){const n=e,r=computed(()=>[n.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]);return(g,y)=>(openBlock(),createElementBlock("span",mergeProps(g.$attrs,{style:unref(r)}),[renderSlot(g.$slots,"default")],16))}});var ElVisuallyHidden=_export_sfc$1(_sfc_main$1v,[["__file","/home/runner/work/element-plus/element-plus/packages/components/visual-hidden/src/visual-hidden.vue"]]);const _hoisted_1$1l=["data-side"],__default__$c=defineComponent({name:"ElTooltipV2Content"}),_sfc_main$1u=defineComponent({...__default__$c,props:{...tooltipV2ContentProps,...tooltipV2CommonProps},setup(e){const n=e,{triggerRef:r,contentId:g}=inject(tooltipV2RootKey),y=ref(n.placement),k=ref(n.strategy),$=ref(null),{referenceRef:V,contentRef:L,middlewareData:z,x:j,y:ae,update:re}=useFloating({placement:y,strategy:k,middleware:computed(()=>{const Ce=[offset$1(n.offset)];return n.showArrow&&Ce.push(arrowMiddleware({arrowRef:$})),Ce})}),oe=useZIndex().nextZIndex(),ue=useNamespace("tooltip-v2"),le=computed(()=>y.value.split("-")[0]),de=computed(()=>({position:unref(k),top:`${unref(ae)||0}px`,left:`${unref(j)||0}px`,zIndex:oe})),he=computed(()=>{if(!n.showArrow)return{};const{arrow:Ce}=unref(z);return{[`--${ue.namespace.value}-tooltip-v2-arrow-x`]:`${Ce?.x}px`||"",[`--${ue.namespace.value}-tooltip-v2-arrow-y`]:`${Ce?.y}px`||""}}),_e=computed(()=>[ue.e("content"),ue.is("dark",n.effect==="dark"),ue.is(unref(k)),n.contentClass]);return watch($,()=>re()),watch(()=>n.placement,Ce=>y.value=Ce),onMounted(()=>{watch(()=>n.reference||r.value,Ce=>{V.value=Ce||void 0},{immediate:!0})}),provide(tooltipV2ContentKey,{arrowRef:$}),(Ce,Ne)=>(openBlock(),createElementBlock("div",{ref_key:"contentRef",ref:L,style:normalizeStyle(unref(de)),"data-tooltip-v2-root":""},[Ce.nowrap?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:0,"data-side":unref(le),class:normalizeClass(unref(_e))},[renderSlot(Ce.$slots,"default",{contentStyle:unref(de),contentClass:unref(_e)}),createVNode(unref(ElVisuallyHidden),{id:unref(g),role:"tooltip"},{default:withCtx(()=>[Ce.ariaLabel?(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString$1(Ce.ariaLabel),1)],64)):renderSlot(Ce.$slots,"default",{key:1})]),_:3},8,["id"]),renderSlot(Ce.$slots,"arrow",{style:normalizeStyle(unref(he)),side:unref(le)})],10,_hoisted_1$1l))],4))}});var TooltipV2Content=_export_sfc$1(_sfc_main$1u,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/content.vue"]]);const forwardRefProps=buildProps({setRef:{type:definePropType(Function),required:!0},onlyChild:Boolean});var ForwardRef=defineComponent({props:forwardRefProps,setup(e,{slots:n}){const r=ref(),g=composeRefs(r,y=>{y?e.setRef(y.nextElementSibling):e.setRef(null)});return()=>{var y;const[k]=((y=n.default)==null?void 0:y.call(n))||[],$=e.onlyChild?ensureOnlyChild(k.children):k.children;return createVNode(Fragment,{ref:g},[$])}}});const __default__$b=defineComponent({name:"ElTooltipV2Trigger"}),_sfc_main$1t=defineComponent({...__default__$b,props:{...tooltipV2CommonProps,...tooltipV2TriggerProps},setup(e){const n=e,{onClose:r,onOpen:g,onDelayOpen:y,triggerRef:k,contentId:$}=inject(tooltipV2RootKey);let V=!1;const L=_e=>{k.value=_e},z=()=>{V=!1},j=composeEventHandlers(n.onMouseEnter,y),ae=composeEventHandlers(n.onMouseLeave,r),re=composeEventHandlers(n.onMouseDown,()=>{r(),V=!0,document.addEventListener("mouseup",z,{once:!0})}),oe=composeEventHandlers(n.onFocus,()=>{V||g()}),ue=composeEventHandlers(n.onBlur,r),le=composeEventHandlers(n.onClick,_e=>{_e.detail===0&&r()}),de={blur:ue,click:le,focus:oe,mousedown:re,mouseenter:j,mouseleave:ae},he=(_e,Ce,Ne)=>{_e&&Object.entries(Ce).forEach(([$e,xe])=>{_e[Ne]($e,xe)})};return watch(k,(_e,Ce)=>{he(_e,de,"addEventListener"),he(Ce,de,"removeEventListener"),_e&&_e.setAttribute("aria-describedby",$.value)}),onBeforeUnmount(()=>{he(k.value,de,"removeEventListener"),document.removeEventListener("mouseup",z)}),(_e,Ce)=>_e.nowrap?(openBlock(),createBlock(unref(ForwardRef),{key:0,"set-ref":L,"only-child":""},{default:withCtx(()=>[renderSlot(_e.$slots,"default")]),_:3})):(openBlock(),createElementBlock("button",mergeProps({key:1,ref_key:"triggerRef",ref:k},_e.$attrs),[renderSlot(_e.$slots,"default")],16))}});var TooltipV2Trigger=_export_sfc$1(_sfc_main$1t,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/trigger.vue"]]);const __default__$a=defineComponent({name:"ElTooltipV2"}),_sfc_main$1s=defineComponent({...__default__$a,props:tooltipV2Props,setup(e){const r=toRefs(e),g=reactive(pick(r,Object.keys(tooltipV2ArrowProps))),y=reactive(pick(r,Object.keys(tooltipV2ContentProps))),k=reactive(pick(r,Object.keys(tooltipV2RootProps))),$=reactive(pick(r,Object.keys(tooltipV2TriggerProps)));return(V,L)=>(openBlock(),createBlock(TooltipV2Root,normalizeProps(guardReactiveProps(k)),{default:withCtx(({open:z})=>[createVNode(TooltipV2Trigger,mergeProps($,{nowrap:""}),{default:withCtx(()=>[renderSlot(V.$slots,"trigger")]),_:3},16),(openBlock(),createBlock(Teleport,{to:V.to,disabled:!V.teleported},[V.fullTransition?(openBlock(),createBlock(Transition,normalizeProps(mergeProps({key:0},V.transitionProps)),{default:withCtx(()=>[V.alwaysOn||z?(openBlock(),createBlock(TooltipV2Content,normalizeProps(mergeProps({key:0},y)),{arrow:withCtx(({style:j,side:ae})=>[V.showArrow?(openBlock(),createBlock(TooltipV2Arrow,mergeProps({key:0},g,{style:j,side:ae}),null,16,["style","side"])):createCommentVNode("v-if",!0)]),default:withCtx(()=>[renderSlot(V.$slots,"default")]),_:3},16)):createCommentVNode("v-if",!0)]),_:2},1040)):(openBlock(),createElementBlock(Fragment,{key:1},[V.alwaysOn||z?(openBlock(),createBlock(TooltipV2Content,normalizeProps(mergeProps({key:0},y)),{arrow:withCtx(({style:j,side:ae})=>[V.showArrow?(openBlock(),createBlock(TooltipV2Arrow,mergeProps({key:0},g,{style:j,side:ae}),null,16,["style","side"])):createCommentVNode("v-if",!0)]),default:withCtx(()=>[renderSlot(V.$slots,"default")]),_:3},16)):createCommentVNode("v-if",!0)],64))],8,["to","disabled"]))]),_:3},16))}});var TooltipV2=_export_sfc$1(_sfc_main$1s,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/tooltip.vue"]]);const ElTooltipV2=withInstall(TooltipV2),LEFT_CHECK_CHANGE_EVENT="left-check-change",RIGHT_CHECK_CHANGE_EVENT="right-check-change",transferProps=buildProps({data:{type:definePropType(Array),default:()=>[]},titles:{type:definePropType(Array),default:()=>[]},buttonTexts:{type:definePropType(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:definePropType(Function)},leftDefaultChecked:{type:definePropType(Array),default:()=>[]},rightDefaultChecked:{type:definePropType(Array),default:()=>[]},renderContent:{type:definePropType(Function)},modelValue:{type:definePropType(Array),default:()=>[]},format:{type:definePropType(Object),default:()=>({})},filterable:Boolean,props:{type:definePropType(Object),default:()=>mutable({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),transferCheckedChangeFn=(e,n)=>[e,n].every(isArray$3)||isArray$3(e)&&isNil(n),transferEmits={[CHANGE_EVENT]:(e,n,r)=>[e,r].every(isArray$3)&&["left","right"].includes(n),[UPDATE_MODEL_EVENT]:e=>isArray$3(e),[LEFT_CHECK_CHANGE_EVENT]:transferCheckedChangeFn,[RIGHT_CHECK_CHANGE_EVENT]:transferCheckedChangeFn},CHECKED_CHANGE_EVENT="checked-change",transferPanelProps=buildProps({data:transferProps.data,optionRender:{type:definePropType(Function)},placeholder:String,title:String,filterable:Boolean,format:transferProps.format,filterMethod:transferProps.filterMethod,defaultChecked:transferProps.leftDefaultChecked,props:transferProps.props}),transferPanelEmits={[CHECKED_CHANGE_EVENT]:transferCheckedChangeFn},usePropsAlias=e=>{const n={label:"label",key:"key",disabled:"disabled"};return computed(()=>({...n,...e.props}))},useCheck$1=(e,n,r)=>{const g=usePropsAlias(e),y=computed(()=>e.data.filter(j=>isFunction$3(e.filterMethod)?e.filterMethod(n.query,j):String(j[g.value.label]||j[g.value.key]).toLowerCase().includes(n.query.toLowerCase()))),k=computed(()=>y.value.filter(j=>!j[g.value.disabled])),$=computed(()=>{const j=n.checked.length,ae=e.data.length,{noChecked:re,hasChecked:oe}=e.format;return re&&oe?j>0?oe.replace(/\${checked}/g,j.toString()).replace(/\${total}/g,ae.toString()):re.replace(/\${total}/g,ae.toString()):`${j}/${ae}`}),V=computed(()=>{const j=n.checked.length;return j>0&&j<k.value.length}),L=()=>{const j=k.value.map(ae=>ae[g.value.key]);n.allChecked=j.length>0&&j.every(ae=>n.checked.includes(ae))},z=j=>{n.checked=j?k.value.map(ae=>ae[g.value.key]):[]};return watch(()=>n.checked,(j,ae)=>{if(L(),n.checkChangeByUser){const re=j.concat(ae).filter(oe=>!j.includes(oe)||!ae.includes(oe));r(CHECKED_CHANGE_EVENT,j,re)}else r(CHECKED_CHANGE_EVENT,j),n.checkChangeByUser=!0}),watch(k,()=>{L()}),watch(()=>e.data,()=>{const j=[],ae=y.value.map(re=>re[g.value.key]);n.checked.forEach(re=>{ae.includes(re)&&j.push(re)}),n.checkChangeByUser=!1,n.checked=j}),watch(()=>e.defaultChecked,(j,ae)=>{if(ae&&j.length===ae.length&&j.every(ue=>ae.includes(ue)))return;const re=[],oe=k.value.map(ue=>ue[g.value.key]);j.forEach(ue=>{oe.includes(ue)&&re.push(ue)}),n.checkChangeByUser=!1,n.checked=re},{immediate:!0}),{filteredData:y,checkableData:k,checkedSummary:$,isIndeterminate:V,updateAllChecked:L,handleAllCheckedChange:z}},useCheckedChange=(e,n)=>({onSourceCheckedChange:(y,k)=>{e.leftChecked=y,k&&n(LEFT_CHECK_CHANGE_EVENT,y,k)},onTargetCheckedChange:(y,k)=>{e.rightChecked=y,k&&n(RIGHT_CHECK_CHANGE_EVENT,y,k)}}),useComputedData=e=>{const n=usePropsAlias(e),r=computed(()=>e.data.reduce((k,$)=>(k[$[n.value.key]]=$)&&k,{})),g=computed(()=>e.data.filter(k=>!e.modelValue.includes(k[n.value.key]))),y=computed(()=>e.targetOrder==="original"?e.data.filter(k=>e.modelValue.includes(k[n.value.key])):e.modelValue.reduce((k,$)=>{const V=r.value[$];return V&&k.push(V),k},[]));return{sourceData:g,targetData:y}},useMove=(e,n,r)=>{const g=usePropsAlias(e),y=(V,L,z)=>{r(UPDATE_MODEL_EVENT,V),r(CHANGE_EVENT,V,L,z)};return{addToLeft:()=>{const V=e.modelValue.slice();n.rightChecked.forEach(L=>{const z=V.indexOf(L);z>-1&&V.splice(z,1)}),y(V,"left",n.rightChecked)},addToRight:()=>{let V=e.modelValue.slice();const L=e.data.filter(z=>{const j=z[g.value.key];return n.leftChecked.includes(j)&&!e.modelValue.includes(j)}).map(z=>z[g.value.key]);V=e.targetOrder==="unshift"?L.concat(V):V.concat(L),e.targetOrder==="original"&&(V=e.data.filter(z=>V.includes(z[g.value.key])).map(z=>z[g.value.key])),y(V,"right",n.leftChecked)}}},__default__$9=defineComponent({name:"ElTransferPanel"}),_sfc_main$1r=defineComponent({...__default__$9,props:transferPanelProps,emits:transferPanelEmits,setup(e,{expose:n,emit:r}){const g=e,y=useSlots(),k=({option:Ce})=>Ce,{t:$}=useLocale(),V=useNamespace("transfer"),L=reactive({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),z=usePropsAlias(g),{filteredData:j,checkedSummary:ae,isIndeterminate:re,handleAllCheckedChange:oe}=useCheck$1(g,L,r),ue=computed(()=>!isEmpty(L.query)&&isEmpty(j.value)),le=computed(()=>!isEmpty(y.default()[0].children)),{checked:de,allChecked:he,query:_e}=toRefs(L);return n({query:_e}),(Ce,Ne)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref(V).b("panel"))},[createBaseVNode("p",{class:normalizeClass(unref(V).be("panel","header"))},[createVNode(unref(ElCheckbox),{modelValue:unref(he),"onUpdate:modelValue":Ne[0]||(Ne[0]=$e=>isRef(he)?he.value=$e:null),indeterminate:unref(re),"validate-event":!1,onChange:unref(oe)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(Ce.title)+" ",1),createBaseVNode("span",null,toDisplayString$1(unref(ae)),1)]),_:1},8,["modelValue","indeterminate","onChange"])],2),createBaseVNode("div",{class:normalizeClass([unref(V).be("panel","body"),unref(V).is("with-footer",unref(le))])},[Ce.filterable?(openBlock(),createBlock(unref(ElInput),{key:0,modelValue:unref(_e),"onUpdate:modelValue":Ne[1]||(Ne[1]=$e=>isRef(_e)?_e.value=$e:null),class:normalizeClass(unref(V).be("panel","filter")),size:"default",placeholder:Ce.placeholder,"prefix-icon":unref(search_default),clearable:"","validate-event":!1},null,8,["modelValue","class","placeholder","prefix-icon"])):createCommentVNode("v-if",!0),withDirectives(createVNode(unref(ElCheckboxGroup$1),{modelValue:unref(de),"onUpdate:modelValue":Ne[2]||(Ne[2]=$e=>isRef(de)?de.value=$e:null),"validate-event":!1,class:normalizeClass([unref(V).is("filterable",Ce.filterable),unref(V).be("panel","list")])},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(j),$e=>(openBlock(),createBlock(unref(ElCheckbox),{key:$e[unref(z).key],class:normalizeClass(unref(V).be("panel","item")),label:$e[unref(z).key],disabled:$e[unref(z).disabled],"validate-event":!1},{default:withCtx(()=>{var xe;return[createVNode(k,{option:(xe=Ce.optionRender)==null?void 0:xe.call(Ce,$e)},null,8,["option"])]}),_:2},1032,["class","label","disabled"]))),128))]),_:1},8,["modelValue","class"]),[[vShow,!unref(ue)&&!unref(isEmpty)(Ce.data)]]),withDirectives(createBaseVNode("p",{class:normalizeClass(unref(V).be("panel","empty"))},toDisplayString$1(unref(ue)?unref($)("el.transfer.noMatch"):unref($)("el.transfer.noData")),3),[[vShow,unref(ue)||unref(isEmpty)(Ce.data)]])],2),unref(le)?(openBlock(),createElementBlock("p",{key:0,class:normalizeClass(unref(V).be("panel","footer"))},[renderSlot(Ce.$slots,"default")],2)):createCommentVNode("v-if",!0)],2))}});var TransferPanel=_export_sfc$1(_sfc_main$1r,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer-panel.vue"]]);const _hoisted_1$1k={key:0},_hoisted_2$1e={key:0},__default__$8=defineComponent({name:"ElTransfer"}),_sfc_main$1q=defineComponent({...__default__$8,props:transferProps,emits:transferEmits,setup(e,{expose:n,emit:r}){const g=e,y=useSlots(),{t:k}=useLocale(),$=useNamespace("transfer"),{formItem:V}=useFormItem(),L=reactive({leftChecked:[],rightChecked:[]}),z=usePropsAlias(g),{sourceData:j,targetData:ae}=useComputedData(g),{onSourceCheckedChange:re,onTargetCheckedChange:oe}=useCheckedChange(L,r),{addToLeft:ue,addToRight:le}=useMove(g,L,r),de=ref(),he=ref(),_e=ze=>{switch(ze){case"left":de.value.query="";break;case"right":he.value.query="";break}},Ce=computed(()=>g.buttonTexts.length===2),Ne=computed(()=>g.titles[0]||k("el.transfer.titles.0")),$e=computed(()=>g.titles[1]||k("el.transfer.titles.1")),xe=computed(()=>g.filterPlaceholder||k("el.transfer.filterPlaceholder"));watch(()=>g.modelValue,()=>{var ze;g.validateEvent&&((ze=V?.validate)==null||ze.call(V,"change").catch(qe=>void 0))});const Ie=computed(()=>ze=>g.renderContent?g.renderContent(h$1,ze):y.default?y.default({option:ze}):h$1("span",ze[z.value.label]||ze[z.value.key]));return n({clearQuery:_e,leftPanel:de,rightPanel:he}),(ze,qe)=>(openBlock(),createElementBlock("div",{class:normalizeClass(unref($).b())},[createVNode(TransferPanel,{ref_key:"leftPanel",ref:de,data:unref(j),"option-render":unref(Ie),placeholder:unref(xe),title:unref(Ne),filterable:ze.filterable,format:ze.format,"filter-method":ze.filterMethod,"default-checked":ze.leftDefaultChecked,props:g.props,onCheckedChange:unref(re)},{default:withCtx(()=>[renderSlot(ze.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),createBaseVNode("div",{class:normalizeClass(unref($).e("buttons"))},[createVNode(unref(ElButton),{type:"primary",class:normalizeClass([unref($).e("button"),unref($).is("with-texts",unref(Ce))]),disabled:unref(isEmpty)(L.rightChecked),onClick:unref(ue)},{default:withCtx(()=>[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1}),unref(isUndefined)(ze.buttonTexts[0])?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",_hoisted_1$1k,toDisplayString$1(ze.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),createVNode(unref(ElButton),{type:"primary",class:normalizeClass([unref($).e("button"),unref($).is("with-texts",unref(Ce))]),disabled:unref(isEmpty)(L.leftChecked),onClick:unref(le)},{default:withCtx(()=>[unref(isUndefined)(ze.buttonTexts[1])?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",_hoisted_2$1e,toDisplayString$1(ze.buttonTexts[1]),1)),createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(arrow_right_default))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),createVNode(TransferPanel,{ref_key:"rightPanel",ref:he,data:unref(ae),"option-render":unref(Ie),placeholder:unref(xe),filterable:ze.filterable,format:ze.format,"filter-method":ze.filterMethod,title:unref($e),"default-checked":ze.rightDefaultChecked,props:g.props,onCheckedChange:unref(oe)},{default:withCtx(()=>[renderSlot(ze.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var Transfer=_export_sfc$1(_sfc_main$1q,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer.vue"]]);const ElTransfer=withInstall(Transfer),NODE_KEY="$treeNodeId",markNodeData=function(e,n){!n||n[NODE_KEY]||Object.defineProperty(n,NODE_KEY,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},getNodeKey=function(e,n){return e?n[e]:n[NODE_KEY]},handleCurrentChange=(e,n,r)=>{const g=e.value.currentNode;r();const y=e.value.currentNode;g!==y&&n("current-change",y?y.data:null,y)},getChildState=e=>{let n=!0,r=!0,g=!0;for(let y=0,k=e.length;y<k;y++){const $=e[y];($.checked!==!0||$.indeterminate)&&(n=!1,$.disabled||(g=!1)),($.checked!==!1||$.indeterminate)&&(r=!1)}return{all:n,none:r,allWithoutDisable:g,half:!n&&!r}},reInitChecked=function(e){if(e.childNodes.length===0||e.loading)return;const{all:n,none:r,half:g}=getChildState(e.childNodes);n?(e.checked=!0,e.indeterminate=!1):g?(e.checked=!1,e.indeterminate=!0):r&&(e.checked=!1,e.indeterminate=!1);const y=e.parent;!y||y.level===0||e.store.checkStrictly||reInitChecked(y)},getPropertyFromData=function(e,n){const r=e.store.props,g=e.data||{},y=r[n];if(typeof y=="function")return y(g,e);if(typeof y=="string")return g[y];if(typeof y>"u"){const k=g[n];return k===void 0?"":k}};let nodeIdSeed=0,Node$1=class vo{constructor(n){this.id=nodeIdSeed++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const r in n)hasOwn$1(n,r)&&(this[r]=n[r]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const n=this.store;if(!n)throw new Error("[Node]store is required!");n.registerNode(this);const r=n.props;if(r&&typeof r.isLeaf<"u"){const k=getPropertyFromData(this,"isLeaf");typeof k=="boolean"&&(this.isLeafByUser=k)}if(n.lazy!==!0&&this.data?(this.setData(this.data),n.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&n.lazy&&n.defaultExpandAll&&this.expand(),Array.isArray(this.data)||markNodeData(this,this.data),!this.data)return;const g=n.defaultExpandedKeys,y=n.key;y&&g&&g.includes(this.key)&&this.expand(null,n.autoExpandParent),y&&n.currentNodeKey!==void 0&&this.key===n.currentNodeKey&&(n.currentNode=this,n.currentNode.isCurrent=!0),n.lazy&&n._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(n){Array.isArray(n)||markNodeData(this,n),this.data=n,this.childNodes=[];let r;this.level===0&&Array.isArray(this.data)?r=this.data:r=getPropertyFromData(this,"children")||[];for(let g=0,y=r.length;g<y;g++)this.insertChild({data:r[g]})}get label(){return getPropertyFromData(this,"label")}get key(){const n=this.store.key;return this.data?this.data[n]:null}get disabled(){return getPropertyFromData(this,"disabled")}get nextSibling(){const n=this.parent;if(n){const r=n.childNodes.indexOf(this);if(r>-1)return n.childNodes[r+1]}return null}get previousSibling(){const n=this.parent;if(n){const r=n.childNodes.indexOf(this);if(r>-1)return r>0?n.childNodes[r-1]:null}return null}contains(n,r=!0){return(this.childNodes||[]).some(g=>g===n||r&&g.contains(n))}remove(){const n=this.parent;n&&n.removeChild(this)}insertChild(n,r,g){if(!n)throw new Error("InsertChild error: child is required.");if(!(n instanceof vo)){if(!g){const y=this.getChildren(!0);y.includes(n.data)||(typeof r>"u"||r<0?y.push(n.data):y.splice(r,0,n.data))}Object.assign(n,{parent:this,store:this.store}),n=reactive(new vo(n)),n instanceof vo&&n.initialize()}n.level=this.level+1,typeof r>"u"||r<0?this.childNodes.push(n):this.childNodes.splice(r,0,n),this.updateLeafState()}insertBefore(n,r){let g;r&&(g=this.childNodes.indexOf(r)),this.insertChild(n,g)}insertAfter(n,r){let g;r&&(g=this.childNodes.indexOf(r),g!==-1&&(g+=1)),this.insertChild(n,g)}removeChild(n){const r=this.getChildren()||[],g=r.indexOf(n.data);g>-1&&r.splice(g,1);const y=this.childNodes.indexOf(n);y>-1&&(this.store&&this.store.deregisterNode(n),n.parent=null,this.childNodes.splice(y,1)),this.updateLeafState()}removeChildByData(n){let r=null;for(let g=0;g<this.childNodes.length;g++)if(this.childNodes[g].data===n){r=this.childNodes[g];break}r&&this.removeChild(r)}expand(n,r){const g=()=>{if(r){let y=this.parent;for(;y.level>0;)y.expanded=!0,y=y.parent}this.expanded=!0,n&&n(),this.childNodes.forEach(y=>{y.canFocus=!0})};this.shouldLoadData()?this.loadData(y=>{Array.isArray(y)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||reInitChecked(this),g())}):g()}doCreateChildren(n,r={}){n.forEach(g=>{this.insertChild(Object.assign({data:g},r),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(n=>{n.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const n=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!n||n.length===0;return}this.isLeaf=!1}setChecked(n,r,g,y){if(this.indeterminate=n==="half",this.checked=n===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:$,allWithoutDisable:V}=getChildState(this.childNodes);!this.isLeaf&&!$&&V&&(this.checked=!1,n=!1);const L=()=>{if(r){const z=this.childNodes;for(let re=0,oe=z.length;re<oe;re++){const ue=z[re];y=y||n!==!1;const le=ue.disabled?ue.checked:y;ue.setChecked(le,r,!0,y)}const{half:j,all:ae}=getChildState(z);ae||(this.checked=ae,this.indeterminate=j)}};if(this.shouldLoadData()){this.loadData(()=>{L(),reInitChecked(this)},{checked:n!==!1});return}else L()}const k=this.parent;!k||k.level===0||g||reInitChecked(k)}getChildren(n=!1){if(this.level===0)return this.data;const r=this.data;if(!r)return null;const g=this.store.props;let y="children";return g&&(y=g.children||"children"),r[y]===void 0&&(r[y]=null),n&&!r[y]&&(r[y]=[]),r[y]}updateChildren(){const n=this.getChildren()||[],r=this.childNodes.map(k=>k.data),g={},y=[];n.forEach((k,$)=>{const V=k[NODE_KEY];!!V&&r.findIndex(z=>z[NODE_KEY]===V)>=0?g[V]={index:$,data:k}:y.push({index:$,data:k})}),this.store.lazy||r.forEach(k=>{g[k[NODE_KEY]]||this.removeChildByData(k)}),y.forEach(({index:k,data:$})=>{this.insertChild({data:$},k)}),this.updateLeafState()}loadData(n,r={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(r).length)){this.loading=!0;const g=y=>{this.childNodes=[],this.doCreateChildren(y,r),this.loaded=!0,this.loading=!1,this.updateLeafState(),n&&n.call(this,y)};this.store.load(this,g)}else n&&n.call(this)}};class TreeStore{constructor(n){this.currentNode=null,this.currentNodeKey=null;for(const r in n)hasOwn$1(n,r)&&(this[r]=n[r]);this.nodesMap={}}initialize(){if(this.root=new Node$1({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const n=this.load;n(this.root,r=>{this.root.doCreateChildren(r),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(n){const r=this.filterNodeMethod,g=this.lazy,y=function(k){const $=k.root?k.root.childNodes:k.childNodes;if($.forEach(V=>{V.visible=r.call(V,n,V.data,V),y(V)}),!k.visible&&$.length){let V=!0;V=!$.some(L=>L.visible),k.root?k.root.visible=V===!1:k.visible=V===!1}n&&k.visible&&!k.isLeaf&&!g&&k.expand()};y(this)}setData(n){n!==this.root.data?(this.root.setData(n),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(n){if(n instanceof Node$1)return n;const r=isObject$3(n)?getNodeKey(this.key,n):n;return this.nodesMap[r]||null}insertBefore(n,r){const g=this.getNode(r);g.parent.insertBefore({data:n},g)}insertAfter(n,r){const g=this.getNode(r);g.parent.insertAfter({data:n},g)}remove(n){const r=this.getNode(n);r&&r.parent&&(r===this.currentNode&&(this.currentNode=null),r.parent.removeChild(r))}append(n,r){const g=r?this.getNode(r):this.root;g&&g.insertChild({data:n})}_initDefaultCheckedNodes(){const n=this.defaultCheckedKeys||[],r=this.nodesMap;n.forEach(g=>{const y=r[g];y&&y.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(n){(this.defaultCheckedKeys||[]).includes(n.key)&&n.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(n){n!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=n,this._initDefaultCheckedNodes())}registerNode(n){const r=this.key;!n||!n.data||(r?n.key!==void 0&&(this.nodesMap[n.key]=n):this.nodesMap[n.id]=n)}deregisterNode(n){!this.key||!n||!n.data||(n.childNodes.forEach(g=>{this.deregisterNode(g)}),delete this.nodesMap[n.key])}getCheckedNodes(n=!1,r=!1){const g=[],y=function(k){(k.root?k.root.childNodes:k.childNodes).forEach(V=>{(V.checked||r&&V.indeterminate)&&(!n||n&&V.isLeaf)&&g.push(V.data),y(V)})};return y(this),g}getCheckedKeys(n=!1){return this.getCheckedNodes(n).map(r=>(r||{})[this.key])}getHalfCheckedNodes(){const n=[],r=function(g){(g.root?g.root.childNodes:g.childNodes).forEach(k=>{k.indeterminate&&n.push(k.data),r(k)})};return r(this),n}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(n=>(n||{})[this.key])}_getAllNodes(){const n=[],r=this.nodesMap;for(const g in r)hasOwn$1(r,g)&&n.push(r[g]);return n}updateChildren(n,r){const g=this.nodesMap[n];if(!g)return;const y=g.childNodes;for(let k=y.length-1;k>=0;k--){const $=y[k];this.remove($.data)}for(let k=0,$=r.length;k<$;k++){const V=r[k];this.append(V,g.data)}}_setCheckedKeys(n,r=!1,g){const y=this._getAllNodes().sort((V,L)=>L.level-V.level),k=Object.create(null),$=Object.keys(g);y.forEach(V=>V.setChecked(!1,!1));for(let V=0,L=y.length;V<L;V++){const z=y[V],j=z.data[n].toString();if(!$.includes(j)){z.checked&&!k[j]&&z.setChecked(!1,!1);continue}let re=z.parent;for(;re&&re.level>0;)k[re.data[n]]=!0,re=re.parent;if(z.isLeaf||this.checkStrictly){z.setChecked(!0,!1);continue}if(z.setChecked(!0,!0),r){z.setChecked(!1,!1);const oe=function(ue){ue.childNodes.forEach(de=>{de.isLeaf||de.setChecked(!1,!1),oe(de)})};oe(z)}}}setCheckedNodes(n,r=!1){const g=this.key,y={};n.forEach(k=>{y[(k||{})[g]]=!0}),this._setCheckedKeys(g,r,y)}setCheckedKeys(n,r=!1){this.defaultCheckedKeys=n;const g=this.key,y={};n.forEach(k=>{y[k]=!0}),this._setCheckedKeys(g,r,y)}setDefaultExpandedKeys(n){n=n||[],this.defaultExpandedKeys=n,n.forEach(r=>{const g=this.getNode(r);g&&g.expand(null,this.autoExpandParent)})}setChecked(n,r,g){const y=this.getNode(n);y&&y.setChecked(!!r,g)}getCurrentNode(){return this.currentNode}setCurrentNode(n){const r=this.currentNode;r&&(r.isCurrent=!1),this.currentNode=n,this.currentNode.isCurrent=!0}setUserCurrentNode(n,r=!0){const g=n[this.key],y=this.nodesMap[g];this.setCurrentNode(y),r&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(n,r=!0){if(n==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const g=this.getNode(n);g&&(this.setCurrentNode(g),r&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const _sfc_main$1p=defineComponent({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const n=useNamespace("tree"),r=inject("NodeInstance"),g=inject("RootTree");return()=>{const y=e.node,{data:k,store:$}=y;return e.renderContent?e.renderContent(h$1,{_self:r,node:y,data:k,store:$}):g.ctx.slots.default?g.ctx.slots.default({node:y,data:k}):h$1("span",{class:n.be("node","label")},[y.label])}}});var NodeContent=_export_sfc$1(_sfc_main$1p,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node-content.vue"]]);function useNodeExpandEventBroadcast(e){const n=inject("TreeNodeMap",null),r={treeNodeExpand:g=>{e.node!==g&&e.node.collapse()},children:[]};return n&&n.children.push(r),provide("TreeNodeMap",r),{broadcastExpanded:g=>{if(e.accordion)for(const y of r.children)y.treeNodeExpand(g)}}}const dragEventsKey=Symbol("dragEvents");function useDragNodeHandler({props:e,ctx:n,el$:r,dropIndicator$:g,store:y}){const k=useNamespace("tree"),$=ref({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return provide(dragEventsKey,{treeNodeDragStart:({event:j,treeNode:ae})=>{if(typeof e.allowDrag=="function"&&!e.allowDrag(ae.node))return j.preventDefault(),!1;j.dataTransfer.effectAllowed="move";try{j.dataTransfer.setData("text/plain","")}catch{}$.value.draggingNode=ae,n.emit("node-drag-start",ae.node,j)},treeNodeDragOver:({event:j,treeNode:ae})=>{const re=ae,oe=$.value.dropNode;oe&&oe.node.id!==re.node.id&&removeClass(oe.$el,k.is("drop-inner"));const ue=$.value.draggingNode;if(!ue||!re)return;let le=!0,de=!0,he=!0,_e=!0;typeof e.allowDrop=="function"&&(le=e.allowDrop(ue.node,re.node,"prev"),_e=de=e.allowDrop(ue.node,re.node,"inner"),he=e.allowDrop(ue.node,re.node,"next")),j.dataTransfer.dropEffect=de||le||he?"move":"none",(le||de||he)&&oe?.node.id!==re.node.id&&(oe&&n.emit("node-drag-leave",ue.node,oe.node,j),n.emit("node-drag-enter",ue.node,re.node,j)),(le||de||he)&&($.value.dropNode=re),re.node.nextSibling===ue.node&&(he=!1),re.node.previousSibling===ue.node&&(le=!1),re.node.contains(ue.node,!1)&&(de=!1),(ue.node===re.node||ue.node.contains(re.node))&&(le=!1,de=!1,he=!1);const Ce=re.$el.querySelector(`.${k.be("node","content")}`).getBoundingClientRect(),Ne=r.value.getBoundingClientRect();let $e;const xe=le?de?.25:he?.45:1:-1,Ie=he?de?.75:le?.55:0:1;let ze=-9999;const qe=j.clientY-Ce.top;qe<Ce.height*xe?$e="before":qe>Ce.height*Ie?$e="after":de?$e="inner":$e="none";const Et=re.$el.querySelector(`.${k.be("node","expand-icon")}`).getBoundingClientRect(),_n=g.value;$e==="before"?ze=Et.top-Ne.top:$e==="after"&&(ze=Et.bottom-Ne.top),_n.style.top=`${ze}px`,_n.style.left=`${Et.right-Ne.left}px`,$e==="inner"?addClass(re.$el,k.is("drop-inner")):removeClass(re.$el,k.is("drop-inner")),$.value.showDropIndicator=$e==="before"||$e==="after",$.value.allowDrop=$.value.showDropIndicator||_e,$.value.dropType=$e,n.emit("node-drag-over",ue.node,re.node,j)},treeNodeDragEnd:j=>{const{draggingNode:ae,dropType:re,dropNode:oe}=$.value;if(j.preventDefault(),j.dataTransfer.dropEffect="move",ae&&oe){const ue={data:ae.node.data};re!=="none"&&ae.node.remove(),re==="before"?oe.node.parent.insertBefore(ue,oe.node):re==="after"?oe.node.parent.insertAfter(ue,oe.node):re==="inner"&&oe.node.insertChild(ue),re!=="none"&&y.value.registerNode(ue),removeClass(oe.$el,k.is("drop-inner")),n.emit("node-drag-end",ae.node,oe.node,re,j),re!=="none"&&n.emit("node-drop",ae.node,oe.node,re,j)}ae&&!oe&&n.emit("node-drag-end",ae.node,null,re,j),$.value.showDropIndicator=!1,$.value.draggingNode=null,$.value.dropNode=null,$.value.allowDrop=!0}}),{dragState:$}}const _sfc_main$1o=defineComponent({name:"ElTreeNode",components:{ElCollapseTransition:_CollapseTransition,ElCheckbox,NodeContent,ElIcon,Loading:loading_default},props:{node:{type:Node$1,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(e,n){const r=useNamespace("tree"),{broadcastExpanded:g}=useNodeExpandEventBroadcast(e),y=inject("RootTree"),k=ref(!1),$=ref(!1),V=ref(null),L=ref(null),z=ref(null),j=inject(dragEventsKey),ae=getCurrentInstance();provide("NodeInstance",ae),e.node.expanded&&(k.value=!0,$.value=!0);const re=y.props.props.children||"children";watch(()=>{const qe=e.node.data[re];return qe&&[...qe]},()=>{e.node.updateChildren()}),watch(()=>e.node.indeterminate,qe=>{le(e.node.checked,qe)}),watch(()=>e.node.checked,qe=>{le(qe,e.node.indeterminate)}),watch(()=>e.node.expanded,qe=>{nextTick(()=>k.value=qe),qe&&($.value=!0)});const oe=qe=>getNodeKey(y.props.nodeKey,qe.data),ue=qe=>{const Et=e.props.class;if(!Et)return{};let _n;if(isFunction$3(Et)){const{data:Dt}=qe;_n=Et(Dt,qe)}else _n=Et;return isString$3(_n)?{[_n]:!0}:_n},le=(qe,Et)=>{(V.value!==qe||L.value!==Et)&&y.ctx.emit("check-change",e.node.data,qe,Et),V.value=qe,L.value=Et},de=qe=>{handleCurrentChange(y.store,y.ctx.emit,()=>y.store.value.setCurrentNode(e.node)),y.currentNode.value=e.node,y.props.expandOnClickNode&&_e(),y.props.checkOnClickNode&&!e.node.disabled&&Ce(null,{target:{checked:!e.node.checked}}),y.ctx.emit("node-click",e.node.data,e.node,ae,qe)},he=qe=>{y.instance.vnode.props.onNodeContextmenu&&(qe.stopPropagation(),qe.preventDefault()),y.ctx.emit("node-contextmenu",qe,e.node.data,e.node,ae)},_e=()=>{e.node.isLeaf||(k.value?(y.ctx.emit("node-collapse",e.node.data,e.node,ae),e.node.collapse()):(e.node.expand(),n.emit("node-expand",e.node.data,e.node,ae)))},Ce=(qe,Et)=>{e.node.setChecked(Et.target.checked,!y.props.checkStrictly),nextTick(()=>{const _n=y.store.value;y.ctx.emit("check",e.node.data,{checkedNodes:_n.getCheckedNodes(),checkedKeys:_n.getCheckedKeys(),halfCheckedNodes:_n.getHalfCheckedNodes(),halfCheckedKeys:_n.getHalfCheckedKeys()})})};return{ns:r,node$:z,tree:y,expanded:k,childNodeRendered:$,oldChecked:V,oldIndeterminate:L,getNodeKey:oe,getNodeClass:ue,handleSelectChange:le,handleClick:de,handleContextMenu:he,handleExpandIconClick:_e,handleCheckChange:Ce,handleChildNodeExpand:(qe,Et,_n)=>{g(Et),y.ctx.emit("node-expand",qe,Et,_n)},handleDragStart:qe=>{y.props.draggable&&j.treeNodeDragStart({event:qe,treeNode:e})},handleDragOver:qe=>{qe.preventDefault(),y.props.draggable&&j.treeNodeDragOver({event:qe,treeNode:{$el:z.value,node:e.node}})},handleDrop:qe=>{qe.preventDefault()},handleDragEnd:qe=>{y.props.draggable&&j.treeNodeDragEnd(qe)},CaretRight:caret_right_default}}}),_hoisted_1$1j=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],_hoisted_2$1d=["aria-expanded"];function _sfc_render$2(e,n,r,g,y,k){const $=resolveComponent("el-icon"),V=resolveComponent("el-checkbox"),L=resolveComponent("loading"),z=resolveComponent("node-content"),j=resolveComponent("el-tree-node"),ae=resolveComponent("el-collapse-transition");return withDirectives((openBlock(),createElementBlock("div",{ref:"node$",class:normalizeClass([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:n[1]||(n[1]=withModifiers((...re)=>e.handleClick&&e.handleClick(...re),["stop"])),onContextmenu:n[2]||(n[2]=(...re)=>e.handleContextMenu&&e.handleContextMenu(...re)),onDragstart:n[3]||(n[3]=withModifiers((...re)=>e.handleDragStart&&e.handleDragStart(...re),["stop"])),onDragover:n[4]||(n[4]=withModifiers((...re)=>e.handleDragOver&&e.handleDragOver(...re),["stop"])),onDragend:n[5]||(n[5]=withModifiers((...re)=>e.handleDragEnd&&e.handleDragEnd(...re),["stop"])),onDrop:n[6]||(n[6]=withModifiers((...re)=>e.handleDrop&&e.handleDrop(...re),["stop"]))},[createBaseVNode("div",{class:normalizeClass(e.ns.be("node","content")),style:normalizeStyle({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(openBlock(),createBlock($,{key:0,class:normalizeClass([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:withModifiers(e.handleExpandIconClick,["stop"])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0),e.showCheckbox?(openBlock(),createBlock(V,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:n[0]||(n[0]=withModifiers(()=>{},["stop"])),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):createCommentVNode("v-if",!0),e.node.loading?(openBlock(),createBlock($,{key:2,class:normalizeClass([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:withCtx(()=>[createVNode(L)]),_:1},8,["class"])):createCommentVNode("v-if",!0),createVNode(z,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),createVNode(ae,null,{default:withCtx(()=>[!e.renderAfterExpand||e.childNodeRendered?withDirectives((openBlock(),createElementBlock("div",{key:0,class:normalizeClass(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.node.childNodes,re=>(openBlock(),createBlock(j,{key:e.getNodeKey(re),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:re,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,_hoisted_2$1d)),[[vShow,e.expanded]]):createCommentVNode("v-if",!0)]),_:1})],42,_hoisted_1$1j)),[[vShow,e.node.visible]])}var ElTreeNode$1=_export_sfc$1(_sfc_main$1o,[["render",_sfc_render$2],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node.vue"]]);function useKeydown({el$:e},n){const r=useNamespace("tree"),g=shallowRef([]),y=shallowRef([]);onMounted(()=>{$()}),onUpdated(()=>{g.value=Array.from(e.value.querySelectorAll("[role=treeitem]")),y.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"))}),watch(y,V=>{V.forEach(L=>{L.setAttribute("tabindex","-1")})}),useEventListener(e,"keydown",V=>{const L=V.target;if(!L.className.includes(r.b("node")))return;const z=V.code;g.value=Array.from(e.value.querySelectorAll(`.${r.is("focusable")}[role=treeitem]`));const j=g.value.indexOf(L);let ae;if([EVENT_CODE.up,EVENT_CODE.down].includes(z)){if(V.preventDefault(),z===EVENT_CODE.up){ae=j===-1?0:j!==0?j-1:g.value.length-1;const oe=ae;for(;!n.value.getNode(g.value[ae].dataset.key).canFocus;){if(ae--,ae===oe){ae=-1;break}ae<0&&(ae=g.value.length-1)}}else{ae=j===-1?0:j<g.value.length-1?j+1:0;const oe=ae;for(;!n.value.getNode(g.value[ae].dataset.key).canFocus;){if(ae++,ae===oe){ae=-1;break}ae>=g.value.length&&(ae=0)}}ae!==-1&&g.value[ae].focus()}[EVENT_CODE.left,EVENT_CODE.right].includes(z)&&(V.preventDefault(),L.click());const re=L.querySelector('[type="checkbox"]');[EVENT_CODE.enter,EVENT_CODE.space].includes(z)&&re&&(V.preventDefault(),re.click())});const $=()=>{var V;g.value=Array.from(e.value.querySelectorAll(`.${r.is("focusable")}[role=treeitem]`)),y.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"));const L=e.value.querySelectorAll(`.${r.is("checked")}[role=treeitem]`);if(L.length){L[0].setAttribute("tabindex","0");return}(V=g.value[0])==null||V.setAttribute("tabindex","0")}}const _sfc_main$1n=defineComponent({name:"ElTree",components:{ElTreeNode:ElTreeNode$1},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:iconPropType}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,n){const{t:r}=useLocale(),g=useNamespace("tree"),y=ref(new TreeStore({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));y.value.initialize();const k=ref(y.value.root),$=ref(null),V=ref(null),L=ref(null),{broadcastExpanded:z}=useNodeExpandEventBroadcast(e),{dragState:j}=useDragNodeHandler({props:e,ctx:n,el$:V,dropIndicator$:L,store:y});useKeydown({el$:V},y);const ae=computed(()=>{const{childNodes:$n}=k.value;return!$n||$n.length===0||$n.every(({visible:Nn})=>!Nn)});watch(()=>e.currentNodeKey,$n=>{y.value.setCurrentNodeKey($n)}),watch(()=>e.defaultCheckedKeys,$n=>{y.value.setDefaultCheckedKey($n)}),watch(()=>e.defaultExpandedKeys,$n=>{y.value.setDefaultExpandedKeys($n)}),watch(()=>e.data,$n=>{y.value.setData($n)},{deep:!0}),watch(()=>e.checkStrictly,$n=>{y.value.checkStrictly=$n});const re=$n=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");y.value.filter($n)},oe=$n=>getNodeKey(e.nodeKey,$n.data),ue=$n=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const Nn=y.value.getNode($n);if(!Nn)return[];const kn=[Nn.data];let jn=Nn.parent;for(;jn&&jn!==k.value;)kn.push(jn.data),jn=jn.parent;return kn.reverse()},le=($n,Nn)=>y.value.getCheckedNodes($n,Nn),de=$n=>y.value.getCheckedKeys($n),he=()=>{const $n=y.value.getCurrentNode();return $n?$n.data:null},_e=()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const $n=he();return $n?$n[e.nodeKey]:null},Ce=($n,Nn)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");y.value.setCheckedNodes($n,Nn)},Ne=($n,Nn)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");y.value.setCheckedKeys($n,Nn)},$e=($n,Nn,kn)=>{y.value.setChecked($n,Nn,kn)},xe=()=>y.value.getHalfCheckedNodes(),Ie=()=>y.value.getHalfCheckedKeys(),ze=($n,Nn=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");handleCurrentChange(y,n.emit,()=>y.value.setUserCurrentNode($n,Nn))},qe=($n,Nn=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");handleCurrentChange(y,n.emit,()=>y.value.setCurrentNodeKey($n,Nn))},Et=$n=>y.value.getNode($n),_n=$n=>{y.value.remove($n)},Dt=($n,Nn)=>{y.value.append($n,Nn)},Sn=($n,Nn)=>{y.value.insertBefore($n,Nn)},hn=($n,Nn)=>{y.value.insertAfter($n,Nn)},Vn=($n,Nn,kn)=>{z(Nn),n.emit("node-expand",$n,Nn,kn)},Mn=($n,Nn)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");y.value.updateChildren($n,Nn)};return provide("RootTree",{ctx:n,props:e,store:y,root:k,currentNode:$,instance:getCurrentInstance()}),provide(formItemContextKey,void 0),{ns:g,store:y,root:k,currentNode:$,dragState:j,el$:V,dropIndicator$:L,isEmpty:ae,filter:re,getNodeKey:oe,getNodePath:ue,getCheckedNodes:le,getCheckedKeys:de,getCurrentNode:he,getCurrentKey:_e,setCheckedNodes:Ce,setCheckedKeys:Ne,setChecked:$e,getHalfCheckedNodes:xe,getHalfCheckedKeys:Ie,setCurrentNode:ze,setCurrentKey:qe,t:r,getNode:Et,remove:_n,append:Dt,insertBefore:Sn,insertAfter:hn,handleNodeExpand:Vn,updateKeyChildren:Mn}}});function _sfc_render$1(e,n,r,g,y,k){const $=resolveComponent("el-tree-node");return openBlock(),createElementBlock("div",{ref:"el$",class:normalizeClass([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner",e.dragState.dropType==="inner"),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.root.childNodes,V=>(openBlock(),createBlock($,{key:e.getNodeKey(V),node:V,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),e.isEmpty?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(e.ns.e("empty-block"))},[renderSlot(e.$slots,"empty",{},()=>{var V;return[createBaseVNode("span",{class:normalizeClass(e.ns.e("empty-text"))},toDisplayString$1((V=e.emptyText)!=null?V:e.t("el.tree.emptyText")),3)]})],2)):createCommentVNode("v-if",!0),withDirectives(createBaseVNode("div",{ref:"dropIndicator$",class:normalizeClass(e.ns.e("drop-indicator"))},null,2),[[vShow,e.dragState.showDropIndicator]])],2)}var Tree$1=_export_sfc$1(_sfc_main$1n,[["render",_sfc_render$1],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree.vue"]]);Tree$1.install=e=>{e.component(Tree$1.name,Tree$1)};const _Tree=Tree$1,ElTree=_Tree,useSelect=(e,{attrs:n},{tree:r,key:g})=>{const y=useNamespace("tree-select"),k={...pick(toRefs(e),Object.keys(ElSelect.props)),...n,valueKey:g,popperClass:computed(()=>{const $=[y.e("popper")];return e.popperClass&&$.push(e.popperClass),$.join(" ")}),filterMethod:($="")=>{e.filterMethod&&e.filterMethod($),nextTick(()=>{var V;(V=r.value)==null||V.filter($)})},onVisibleChange:$=>{var V;(V=n.onVisibleChange)==null||V.call(n,$),e.filterable&&$&&k.filterMethod()}};return k},component=defineComponent({extends:ElOption,setup(e,n){const r=ElOption.setup(e,n);delete r.selectOptionClick;const g=getCurrentInstance().proxy;return nextTick(()=>{r.select.cachedOptions.get(g.value)||r.select.onOptionCreate(g)}),r},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function isValidValue(e){return e||e===0}function isValidArray(e){return Array.isArray(e)&&e.length}function toValidArray(e){return Array.isArray(e)?e:isValidValue(e)?[e]:[]}function treeFind(e,n,r,g,y){for(let k=0;k<e.length;k++){const $=e[k];if(n($,k,e,y))return g?g($,k,e,y):$;{const V=r($);if(isValidArray(V)){const L=treeFind(V,n,r,g,$);if(L)return L}}}}function treeEach(e,n,r,g){for(let y=0;y<e.length;y++){const k=e[y];n(k,y,e,g);const $=r(k);isValidArray($)&&treeEach($,n,r,k)}}const useTree$1=(e,{attrs:n,slots:r,emit:g},{select:y,tree:k,key:$})=>{watch(()=>e.modelValue,()=>{e.showCheckbox&&nextTick(()=>{const re=k.value;re&&!isEqual$1(re.getCheckedKeys(),toValidArray(e.modelValue))&&re.setCheckedKeys(toValidArray(e.modelValue))})},{immediate:!0,deep:!0});const V=computed(()=>({value:$.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...e.props})),L=(re,oe)=>{var ue;const le=V.value[re];return isFunction$3(le)?le(oe,(ue=k.value)==null?void 0:ue.getNode(L("value",oe))):oe[le]},z=toValidArray(e.modelValue).map(re=>treeFind(e.data||[],oe=>L("value",oe)===re,oe=>L("children",oe),(oe,ue,le,de)=>de&&L("value",de))).filter(re=>isValidValue(re)),j=computed(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const re=[];return treeEach(e.data.concat(e.cacheData),oe=>{const ue=L("value",oe);re.push({value:ue,currentLabel:L("label",oe),isDisabled:L("disabled",oe)})},oe=>L("children",oe)),re}),ae=computed(()=>j.value.reduce((re,oe)=>({...re,[oe.value]:oe}),{}));return{...pick(toRefs(e),Object.keys(_Tree.props)),...n,nodeKey:$,expandOnClickNode:computed(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:computed(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(z):z),renderContent:(re,{node:oe,data:ue,store:le})=>re(component,{value:L("value",ue),label:L("label",ue),disabled:L("disabled",ue)},e.renderContent?()=>e.renderContent(re,{node:oe,data:ue,store:le}):r.default?()=>r.default({node:oe,data:ue,store:le}):void 0),filterNodeMethod:(re,oe,ue)=>{var le;return e.filterNodeMethod?e.filterNodeMethod(re,oe,ue):re?(le=L("label",oe))==null?void 0:le.includes(re):!0},onNodeClick:(re,oe,ue)=>{var le,de,he;if((le=n.onNodeClick)==null||le.call(n,re,oe,ue),!(e.showCheckbox&&e.checkOnClickNode))if(!e.showCheckbox&&(e.checkStrictly||oe.isLeaf)){if(!L("disabled",re)){const _e=(de=y.value)==null?void 0:de.options.get(L("value",re));(he=y.value)==null||he.handleOptionSelect(_e)}}else e.expandOnClickNode&&ue.proxy.handleExpandIconClick()},onCheck:(re,oe)=>{if(!e.showCheckbox)return;const ue=L("value",re),le=oe.checkedKeys,de=e.multiple?toValidArray(e.modelValue).filter(_e=>_e in ae.value&&!k.value.getNode(_e)&&!le.includes(_e)):[],he=le.concat(de);if(e.checkStrictly)g(UPDATE_MODEL_EVENT,e.multiple?he:he.includes(ue)?ue:void 0);else if(e.multiple)g(UPDATE_MODEL_EVENT,k.value.getCheckedKeys(!0));else{const _e=treeFind([re],$e=>!isValidArray(L("children",$e))&&!L("disabled",$e),$e=>L("children",$e)),Ce=_e?L("value",_e):void 0,Ne=isValidValue(e.modelValue)&&!!treeFind([re],$e=>L("value",$e)===e.modelValue,$e=>L("children",$e));g(UPDATE_MODEL_EVENT,Ce===e.modelValue||Ne?void 0:Ce)}nextTick(()=>{var _e;const Ce=toValidArray(e.modelValue);k.value.setCheckedKeys(Ce),(_e=n.onCheck)==null||_e.call(n,re,{checkedKeys:k.value.getCheckedKeys(),checkedNodes:k.value.getCheckedNodes(),halfCheckedKeys:k.value.getHalfCheckedKeys(),halfCheckedNodes:k.value.getHalfCheckedNodes()})})},cacheOptions:j}};var CacheOptions=defineComponent({props:{data:{type:Array,default:()=>[]}},setup(e){const n=inject(selectKey);return watch(()=>e.data,()=>{var r;e.data.forEach(y=>{n.cachedOptions.has(y.value)||n.cachedOptions.set(y.value,y)});const g=((r=n.selectWrapper)==null?void 0:r.querySelectorAll("input"))||[];Array.from(g).includes(document.activeElement)||n.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const _sfc_main$1m=defineComponent({name:"ElTreeSelect",inheritAttrs:!1,props:{...ElSelect.props,..._Tree.props,cacheData:{type:Array,default:()=>[]}},setup(e,n){const{slots:r,expose:g}=n,y=ref(),k=ref(),$=computed(()=>e.nodeKey||e.valueKey||"value"),V=useSelect(e,n,{select:y,tree:k,key:$}),{cacheOptions:L,...z}=useTree$1(e,n,{select:y,tree:k,key:$}),j=reactive({});return g(j),onMounted(()=>{Object.assign(j,{...pick(k.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...pick(y.value,["focus","blur"])})}),()=>h$1(ElSelect,reactive({...V,ref:ae=>y.value=ae}),{...r,default:()=>[h$1(CacheOptions,{data:L.value}),h$1(_Tree,reactive({...z,ref:ae=>k.value=ae}))]})}});var TreeSelect=_export_sfc$1(_sfc_main$1m,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-select/src/tree-select.vue"]]);TreeSelect.install=e=>{e.component(TreeSelect.name,TreeSelect)};const _TreeSelect=TreeSelect,ElTreeSelect=_TreeSelect,ROOT_TREE_INJECTION_KEY=Symbol(),EMPTY_NODE={key:-1,level:-1,data:{}};var TreeOptionsEnum=(e=>(e.KEY="id",e.LABEL="label",e.CHILDREN="children",e.DISABLED="disabled",e))(TreeOptionsEnum||{}),SetOperationEnum=(e=>(e.ADD="add",e.DELETE="delete",e))(SetOperationEnum||{});const itemSize={type:Number,default:26},treeProps=buildProps({data:{type:definePropType(Array),default:()=>mutable([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:definePropType(Object),default:()=>mutable({children:"children",label:"label",disabled:"disabled",value:"id"})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:definePropType(Array),default:()=>mutable([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:definePropType(Array),default:()=>mutable([])},indent:{type:Number,default:16},itemSize,icon:{type:iconPropType},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:definePropType([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:definePropType(Function)},perfMode:{type:Boolean,default:!0}}),treeNodeProps=buildProps({node:{type:definePropType(Object),default:()=>mutable(EMPTY_NODE)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1},itemSize}),treeNodeContentProps=buildProps({node:{type:definePropType(Object),required:!0}}),NODE_CLICK="node-click",NODE_EXPAND="node-expand",NODE_COLLAPSE="node-collapse",CURRENT_CHANGE="current-change",NODE_CHECK="check",NODE_CHECK_CHANGE="check-change",NODE_CONTEXTMENU="node-contextmenu",treeEmits={[NODE_CLICK]:(e,n,r)=>e&&n&&r,[NODE_EXPAND]:(e,n)=>e&&n,[NODE_COLLAPSE]:(e,n)=>e&&n,[CURRENT_CHANGE]:(e,n)=>e&&n,[NODE_CHECK]:(e,n)=>e&&n,[NODE_CHECK_CHANGE]:(e,n)=>e&&typeof n=="boolean",[NODE_CONTEXTMENU]:(e,n,r)=>e&&n&&r},treeNodeEmits={click:(e,n)=>!!(e&&n),toggle:e=>!!e,check:(e,n)=>e&&typeof n=="boolean"};function useCheck(e,n){const r=ref(new Set),g=ref(new Set),{emit:y}=getCurrentInstance();watch([()=>n.value,()=>e.defaultCheckedKeys],()=>nextTick(()=>{_e(e.defaultCheckedKeys)}),{immediate:!0});const k=()=>{if(!n.value||!e.showCheckbox||e.checkStrictly)return;const{levelTreeNodeMap:Ce,maxLevel:Ne}=n.value,$e=r.value,xe=new Set;for(let Ie=Ne-1;Ie>=1;--Ie){const ze=Ce.get(Ie);ze&&ze.forEach(qe=>{const Et=qe.children;if(Et){let _n=!0,Dt=!1;for(const Sn of Et){const hn=Sn.key;if($e.has(hn))Dt=!0;else if(xe.has(hn)){_n=!1,Dt=!0;break}else _n=!1}_n?$e.add(qe.key):Dt?(xe.add(qe.key),$e.delete(qe.key)):($e.delete(qe.key),xe.delete(qe.key))}})}g.value=xe},$=Ce=>r.value.has(Ce.key),V=Ce=>g.value.has(Ce.key),L=(Ce,Ne,$e=!0)=>{const xe=r.value,Ie=(ze,qe)=>{xe[qe?SetOperationEnum.ADD:SetOperationEnum.DELETE](ze.key);const Et=ze.children;!e.checkStrictly&&Et&&Et.forEach(_n=>{_n.disabled||Ie(_n,qe)})};Ie(Ce,Ne),k(),$e&&z(Ce,Ne)},z=(Ce,Ne)=>{const{checkedNodes:$e,checkedKeys:xe}=ue(),{halfCheckedNodes:Ie,halfCheckedKeys:ze}=le();y(NODE_CHECK,Ce.data,{checkedKeys:xe,checkedNodes:$e,halfCheckedKeys:ze,halfCheckedNodes:Ie}),y(NODE_CHECK_CHANGE,Ce.data,Ne)};function j(Ce=!1){return ue(Ce).checkedKeys}function ae(Ce=!1){return ue(Ce).checkedNodes}function re(){return le().halfCheckedKeys}function oe(){return le().halfCheckedNodes}function ue(Ce=!1){const Ne=[],$e=[];if(n?.value&&e.showCheckbox){const{treeNodeMap:xe}=n.value;r.value.forEach(Ie=>{const ze=xe.get(Ie);ze&&(!Ce||Ce&&ze.isLeaf)&&($e.push(Ie),Ne.push(ze.data))})}return{checkedKeys:$e,checkedNodes:Ne}}function le(){const Ce=[],Ne=[];if(n?.value&&e.showCheckbox){const{treeNodeMap:$e}=n.value;g.value.forEach(xe=>{const Ie=$e.get(xe);Ie&&(Ne.push(xe),Ce.push(Ie.data))})}return{halfCheckedNodes:Ce,halfCheckedKeys:Ne}}function de(Ce){r.value.clear(),g.value.clear(),_e(Ce)}function he(Ce,Ne){if(n?.value&&e.showCheckbox){const $e=n.value.treeNodeMap.get(Ce);$e&&L($e,Ne,!1)}}function _e(Ce){if(n?.value){const{treeNodeMap:Ne}=n.value;if(e.showCheckbox&&Ne&&Ce)for(const $e of Ce){const xe=Ne.get($e);xe&&!$(xe)&&L(xe,!0,!1)}}}return{updateCheckedKeys:k,toggleCheckbox:L,isChecked:$,isIndeterminate:V,getCheckedKeys:j,getCheckedNodes:ae,getHalfCheckedKeys:re,getHalfCheckedNodes:oe,setChecked:he,setCheckedKeys:de}}function useFilter(e,n){const r=ref(new Set([])),g=ref(new Set([])),y=computed(()=>isFunction$3(e.filterMethod));function k(V){var L;if(!y.value)return;const z=new Set,j=g.value,ae=r.value,re=[],oe=((L=n.value)==null?void 0:L.treeNodes)||[],ue=e.filterMethod;ae.clear();function le(de){de.forEach(he=>{re.push(he),ue?.(V,he.data)?re.forEach(Ce=>{z.add(Ce.key)}):he.isLeaf&&ae.add(he.key);const _e=he.children;if(_e&&le(_e),!he.isLeaf){if(!z.has(he.key))ae.add(he.key);else if(_e){let Ce=!0;for(const Ne of _e)if(!ae.has(Ne.key)){Ce=!1;break}Ce?j.add(he.key):j.delete(he.key)}}re.pop()})}return le(oe),z}function $(V){return g.value.has(V.key)}return{hiddenExpandIconKeySet:g,hiddenNodeKeySet:r,doFilter:k,isForceHiddenExpandIcon:$}}function useTree(e,n){const r=ref(new Set(e.defaultExpandedKeys)),g=ref(),y=shallowRef();watch(()=>e.currentNodeKey,Wn=>{g.value=Wn},{immediate:!0}),watch(()=>e.data,Wn=>{Zn(Wn)},{immediate:!0});const{isIndeterminate:k,isChecked:$,toggleCheckbox:V,getCheckedKeys:L,getCheckedNodes:z,getHalfCheckedKeys:j,getHalfCheckedNodes:ae,setChecked:re,setCheckedKeys:oe}=useCheck(e,y),{doFilter:ue,hiddenNodeKeySet:le,isForceHiddenExpandIcon:de}=useFilter(e,y),he=computed(()=>{var Wn;return((Wn=e.props)==null?void 0:Wn.value)||TreeOptionsEnum.KEY}),_e=computed(()=>{var Wn;return((Wn=e.props)==null?void 0:Wn.children)||TreeOptionsEnum.CHILDREN}),Ce=computed(()=>{var Wn;return((Wn=e.props)==null?void 0:Wn.disabled)||TreeOptionsEnum.DISABLED}),Ne=computed(()=>{var Wn;return((Wn=e.props)==null?void 0:Wn.label)||TreeOptionsEnum.LABEL}),$e=computed(()=>{const Wn=r.value,da=le.value,ga=[],Ca=y.value&&y.value.treeNodes||[];function ra(){const Gn=[];for(let vn=Ca.length-1;vn>=0;--vn)Gn.push(Ca[vn]);for(;Gn.length;){const vn=Gn.pop();if(vn&&(da.has(vn.key)||ga.push(vn),Wn.has(vn.key))){const Kn=vn.children;if(Kn){const En=Kn.length;for(let kt=En-1;kt>=0;--kt)Gn.push(Kn[kt])}}}}return ra(),ga}),xe=computed(()=>$e.value.length>0);function Ie(Wn){const da=new Map,ga=new Map;let Ca=1;function ra(vn,Kn=1,En=void 0){var kt;const At=[];for(const Dn of vn){const Xn=Et(Dn),aa={level:Kn,key:Xn,data:Dn};aa.label=Dt(Dn),aa.parent=En;const sa=qe(Dn);aa.disabled=_n(Dn),aa.isLeaf=!sa||sa.length===0,sa&&sa.length&&(aa.children=ra(sa,Kn+1,aa)),At.push(aa),da.set(Xn,aa),ga.has(Kn)||ga.set(Kn,[]),(kt=ga.get(Kn))==null||kt.push(aa)}return Kn>Ca&&(Ca=Kn),At}const Gn=ra(Wn);return{treeNodeMap:da,levelTreeNodeMap:ga,maxLevel:Ca,treeNodes:Gn}}function ze(Wn){const da=ue(Wn);da&&(r.value=da)}function qe(Wn){return Wn[_e.value]}function Et(Wn){return Wn?Wn[he.value]:""}function _n(Wn){return Wn[Ce.value]}function Dt(Wn){return Wn[Ne.value]}function Sn(Wn){r.value.has(Wn.key)?kn(Wn):Nn(Wn)}function hn(Wn){r.value=new Set(Wn)}function Vn(Wn,da){n(NODE_CLICK,Wn.data,Wn,da),Mn(Wn),e.expandOnClickNode&&Sn(Wn),e.showCheckbox&&e.checkOnClickNode&&!Wn.disabled&&V(Wn,!$(Wn),!0)}function Mn(Wn){Tn(Wn)||(g.value=Wn.key,n(CURRENT_CHANGE,Wn.data,Wn))}function $n(Wn,da){V(Wn,da)}function Nn(Wn){const da=r.value;if(y.value&&e.accordion){const{treeNodeMap:ga}=y.value;da.forEach(Ca=>{const ra=ga.get(Ca);Wn&&Wn.level===ra?.level&&da.delete(Ca)})}da.add(Wn.key),n(NODE_EXPAND,Wn.data,Wn)}function kn(Wn){r.value.delete(Wn.key),n(NODE_COLLAPSE,Wn.data,Wn)}function jn(Wn){return r.value.has(Wn.key)}function Fn(Wn){return!!Wn.disabled}function Tn(Wn){const da=g.value;return da!==void 0&&da===Wn.key}function Hn(){var Wn,da;if(g.value)return(da=(Wn=y.value)==null?void 0:Wn.treeNodeMap.get(g.value))==null?void 0:da.data}function la(){return g.value}function ca(Wn){g.value=Wn}function Zn(Wn){nextTick(()=>y.value=Ie(Wn))}function Bn(Wn){var da;const ga=isObject$3(Wn)?Et(Wn):Wn;return(da=y.value)==null?void 0:da.treeNodeMap.get(ga)}return{tree:y,flattenTree:$e,isNotEmpty:xe,getKey:Et,getChildren:qe,toggleExpand:Sn,toggleCheckbox:V,isExpanded:jn,isChecked:$,isIndeterminate:k,isDisabled:Fn,isCurrent:Tn,isForceHiddenExpandIcon:de,handleNodeClick:Vn,handleNodeCheck:$n,getCurrentNode:Hn,getCurrentKey:la,setCurrentKey:ca,getCheckedKeys:L,getCheckedNodes:z,getHalfCheckedKeys:j,getHalfCheckedNodes:ae,setChecked:re,setCheckedKeys:oe,filter:ze,setData:Zn,getNode:Bn,expandNode:Nn,collapseNode:kn,setExpandedKeys:hn}}var ElNodeContent=defineComponent({name:"ElTreeNodeContent",props:treeNodeContentProps,setup(e){const n=inject(ROOT_TREE_INJECTION_KEY),r=useNamespace("tree");return()=>{const g=e.node,{data:y}=g;return n?.ctx.slots.default?n.ctx.slots.default({node:g,data:y}):h$1("span",{class:r.be("node","label")},[g?.label])}}});const _hoisted_1$1i=["aria-expanded","aria-disabled","aria-checked","data-key","onClick"],__default__$7=defineComponent({name:"ElTreeNode"}),_sfc_main$1l=defineComponent({...__default__$7,props:treeNodeProps,emits:treeNodeEmits,setup(e,{emit:n}){const r=e,g=inject(ROOT_TREE_INJECTION_KEY),y=useNamespace("tree"),k=computed(()=>{var ae;return(ae=g?.props.indent)!=null?ae:16}),$=computed(()=>{var ae;return(ae=g?.props.icon)!=null?ae:caret_right_default}),V=ae=>{n("click",r.node,ae)},L=()=>{n("toggle",r.node)},z=ae=>{n("check",r.node,ae)},j=ae=>{var re,oe,ue,le;(ue=(oe=(re=g?.instance)==null?void 0:re.vnode)==null?void 0:oe.props)!=null&&ue.onNodeContextmenu&&(ae.stopPropagation(),ae.preventDefault()),g?.ctx.emit(NODE_CONTEXTMENU,ae,(le=r.node)==null?void 0:le.data,r.node)};return(ae,re)=>{var oe,ue,le;return openBlock(),createElementBlock("div",{ref:"node$",class:normalizeClass([unref(y).b("node"),unref(y).is("expanded",ae.expanded),unref(y).is("current",ae.current),unref(y).is("focusable",!ae.disabled),unref(y).is("checked",!ae.disabled&&ae.checked)]),role:"treeitem",tabindex:"-1","aria-expanded":ae.expanded,"aria-disabled":ae.disabled,"aria-checked":ae.checked,"data-key":(oe=ae.node)==null?void 0:oe.key,onClick:withModifiers(V,["stop"]),onContextmenu:j},[createBaseVNode("div",{class:normalizeClass(unref(y).be("node","content")),style:normalizeStyle({paddingLeft:`${(ae.node.level-1)*unref(k)}px`,height:ae.itemSize+"px"})},[unref($)?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass([unref(y).is("leaf",!!((ue=ae.node)!=null&&ue.isLeaf)),unref(y).is("hidden",ae.hiddenExpandIcon),{expanded:!((le=ae.node)!=null&&le.isLeaf)&&ae.expanded},unref(y).be("node","expand-icon")]),onClick:withModifiers(L,["stop"])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref($))))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0),ae.showCheckbox?(openBlock(),createBlock(unref(ElCheckbox),{key:1,"model-value":ae.checked,indeterminate:ae.indeterminate,disabled:ae.disabled,onChange:z,onClick:re[0]||(re[0]=withModifiers(()=>{},["stop"]))},null,8,["model-value","indeterminate","disabled"])):createCommentVNode("v-if",!0),createVNode(unref(ElNodeContent),{node:ae.node},null,8,["node"])],6)],42,_hoisted_1$1i)}}});var ElTreeNode=_export_sfc$1(_sfc_main$1l,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-v2/src/tree-node.vue"]]);const __default__$6=defineComponent({name:"ElTreeV2"}),_sfc_main$1k=defineComponent({...__default__$6,props:treeProps,emits:treeEmits,setup(e,{expose:n,emit:r}){const g=e,y=useSlots(),k=computed(()=>g.itemSize);provide(ROOT_TREE_INJECTION_KEY,{ctx:{emit:r,slots:y},props:g,instance:getCurrentInstance()}),provide(formItemContextKey,void 0);const{t:$}=useLocale(),V=useNamespace("tree"),{flattenTree:L,isNotEmpty:z,toggleExpand:j,isExpanded:ae,isIndeterminate:re,isChecked:oe,isDisabled:ue,isCurrent:le,isForceHiddenExpandIcon:de,handleNodeClick:he,handleNodeCheck:_e,toggleCheckbox:Ce,getCurrentNode:Ne,getCurrentKey:$e,setCurrentKey:xe,getCheckedKeys:Ie,getCheckedNodes:ze,getHalfCheckedKeys:qe,getHalfCheckedNodes:Et,setChecked:_n,setCheckedKeys:Dt,filter:Sn,setData:hn,getNode:Vn,expandNode:Mn,collapseNode:$n,setExpandedKeys:Nn}=useTree(g,r);return n({toggleCheckbox:Ce,getCurrentNode:Ne,getCurrentKey:$e,setCurrentKey:xe,getCheckedKeys:Ie,getCheckedNodes:ze,getHalfCheckedKeys:qe,getHalfCheckedNodes:Et,setChecked:_n,setCheckedKeys:Dt,filter:Sn,setData:hn,getNode:Vn,expandNode:Mn,collapseNode:$n,setExpandedKeys:Nn}),(kn,jn)=>{var Fn;return openBlock(),createElementBlock("div",{class:normalizeClass([unref(V).b(),{[unref(V).m("highlight-current")]:kn.highlightCurrent}]),role:"tree"},[unref(z)?(openBlock(),createBlock(unref(FixedSizeList),{key:0,"class-name":unref(V).b("virtual-list"),data:unref(L),total:unref(L).length,height:kn.height,"item-size":unref(k),"perf-mode":kn.perfMode},{default:withCtx(({data:Tn,index:Hn,style:la})=>[(openBlock(),createBlock(ElTreeNode,{key:Tn[Hn].key,style:normalizeStyle(la),node:Tn[Hn],expanded:unref(ae)(Tn[Hn]),"show-checkbox":kn.showCheckbox,checked:unref(oe)(Tn[Hn]),indeterminate:unref(re)(Tn[Hn]),"item-size":unref(k),disabled:unref(ue)(Tn[Hn]),current:unref(le)(Tn[Hn]),"hidden-expand-icon":unref(de)(Tn[Hn]),onClick:unref(he),onToggle:unref(j),onCheck:unref(_e)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(V).e("empty-block"))},[createBaseVNode("span",{class:normalizeClass(unref(V).e("empty-text"))},toDisplayString$1((Fn=kn.emptyText)!=null?Fn:unref($)("el.tree.emptyText")),3)],2))],2)}}});var TreeV2=_export_sfc$1(_sfc_main$1k,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-v2/src/tree.vue"]]);const ElTreeV2=withInstall(TreeV2),uploadContextKey=Symbol("uploadContextKey"),SCOPE$2="ElUpload";class UploadAjaxError extends Error{constructor(n,r,g,y){super(n),this.name="UploadAjaxError",this.status=r,this.method=g,this.url=y}}function getError(e,n,r){let g;return r.response?g=`${r.response.error||r.response}`:r.responseText?g=`${r.responseText}`:g=`fail to ${n.method} ${e} ${r.status}`,new UploadAjaxError(g,r.status,n.method,e)}function getBody(e){const n=e.responseText||e.response;if(!n)return n;try{return JSON.parse(n)}catch{return n}}const ajaxUpload=e=>{typeof XMLHttpRequest>"u"&&throwError(SCOPE$2,"XMLHttpRequest is undefined");const n=new XMLHttpRequest,r=e.action;n.upload&&n.upload.addEventListener("progress",k=>{const $=k;$.percent=k.total>0?k.loaded/k.total*100:0,e.onProgress($)});const g=new FormData;if(e.data)for(const[k,$]of Object.entries(e.data))isArray$3($)&&$.length?g.append(k,...$):g.append(k,$);g.append(e.filename,e.file,e.file.name),n.addEventListener("error",()=>{e.onError(getError(r,e,n))}),n.addEventListener("load",()=>{if(n.status<200||n.status>=300)return e.onError(getError(r,e,n));e.onSuccess(getBody(n))}),n.open(e.method,r,!0),e.withCredentials&&"withCredentials"in n&&(n.withCredentials=!0);const y=e.headers||{};if(y instanceof Headers)y.forEach((k,$)=>n.setRequestHeader($,k));else for(const[k,$]of Object.entries(y))isNil($)||n.setRequestHeader(k,String($));return n.send(g),n},uploadListTypes=["text","picture","picture-card"];let fileId=1;const genFileId=()=>Date.now()+fileId++,uploadBaseProps=buildProps({action:{type:String,default:"#"},headers:{type:definePropType(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>mutable({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:definePropType(Array),default:()=>mutable([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:uploadListTypes,default:"text"},httpRequest:{type:definePropType(Function),default:ajaxUpload},disabled:Boolean,limit:Number}),uploadProps=buildProps({...uploadBaseProps,beforeUpload:{type:definePropType(Function),default:NOOP},beforeRemove:{type:definePropType(Function)},onRemove:{type:definePropType(Function),default:NOOP},onChange:{type:definePropType(Function),default:NOOP},onPreview:{type:definePropType(Function),default:NOOP},onSuccess:{type:definePropType(Function),default:NOOP},onProgress:{type:definePropType(Function),default:NOOP},onError:{type:definePropType(Function),default:NOOP},onExceed:{type:definePropType(Function),default:NOOP}}),uploadListProps=buildProps({files:{type:definePropType(Array),default:()=>mutable([])},disabled:{type:Boolean,default:!1},handlePreview:{type:definePropType(Function),default:NOOP},listType:{type:String,values:uploadListTypes,default:"text"}}),uploadListEmits={remove:e=>!!e},_hoisted_1$1h=["onKeydown"],_hoisted_2$1c=["src"],_hoisted_3$L=["onClick"],_hoisted_4$H=["title"],_hoisted_5$A=["onClick"],_hoisted_6$x=["onClick"],__default__$5=defineComponent({name:"ElUploadList"}),_sfc_main$1j=defineComponent({...__default__$5,props:uploadListProps,emits:uploadListEmits,setup(e,{emit:n}){const{t:r}=useLocale(),g=useNamespace("upload"),y=useNamespace("icon"),k=useNamespace("list"),$=useFormDisabled(),V=ref(!1),L=z=>{n("remove",z)};return(z,j)=>(openBlock(),createBlock(TransitionGroup,{tag:"ul",class:normalizeClass([unref(g).b("list"),unref(g).bm("list",z.listType),unref(g).is("disabled",unref($))]),name:unref(k).b()},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(z.files,ae=>(openBlock(),createElementBlock("li",{key:ae.uid||ae.name,class:normalizeClass([unref(g).be("list","item"),unref(g).is(ae.status),{focusing:V.value}]),tabindex:"0",onKeydown:withKeys(re=>!unref($)&&L(ae),["delete"]),onFocus:j[0]||(j[0]=re=>V.value=!0),onBlur:j[1]||(j[1]=re=>V.value=!1),onClick:j[2]||(j[2]=re=>V.value=!1)},[renderSlot(z.$slots,"default",{file:ae},()=>[z.listType==="picture"||ae.status!=="uploading"&&z.listType==="picture-card"?(openBlock(),createElementBlock("img",{key:0,class:normalizeClass(unref(g).be("list","item-thumbnail")),src:ae.url,alt:""},null,10,_hoisted_2$1c)):createCommentVNode("v-if",!0),ae.status==="uploading"||z.listType!=="picture-card"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(g).be("list","item-info"))},[createBaseVNode("a",{class:normalizeClass(unref(g).be("list","item-name")),onClick:withModifiers(re=>z.handlePreview(ae),["prevent"])},[createVNode(unref(ElIcon),{class:normalizeClass(unref(y).m("document"))},{default:withCtx(()=>[createVNode(unref(document_default))]),_:1},8,["class"]),createBaseVNode("span",{class:normalizeClass(unref(g).be("list","item-file-name")),title:ae.name},toDisplayString$1(ae.name),11,_hoisted_4$H)],10,_hoisted_3$L),ae.status==="uploading"?(openBlock(),createBlock(unref(ElProgress),{key:0,type:z.listType==="picture-card"?"circle":"line","stroke-width":z.listType==="picture-card"?6:2,percentage:Number(ae.percentage),style:normalizeStyle(z.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("label",{class:normalizeClass(unref(g).be("list","item-status-label"))},[z.listType==="text"?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass([unref(y).m("upload-success"),unref(y).m("circle-check")])},{default:withCtx(()=>[createVNode(unref(circle_check_default))]),_:1},8,["class"])):["picture-card","picture"].includes(z.listType)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(y).m("upload-success"),unref(y).m("check")])},{default:withCtx(()=>[createVNode(unref(check_default))]),_:1},8,["class"])):createCommentVNode("v-if",!0)],2),unref($)?createCommentVNode("v-if",!0):(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass(unref(y).m("close")),onClick:re=>L(ae)},{default:withCtx(()=>[createVNode(unref(close_default))]),_:2},1032,["class","onClick"])),createCommentVNode(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),createCommentVNode(" This is a bug which needs to be fixed "),createCommentVNode(" TODO: Fix the incorrect navigation interaction "),unref($)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("i",{key:3,class:normalizeClass(unref(y).m("close-tip"))},toDisplayString$1(unref(r)("el.upload.deleteTip")),3)),z.listType==="picture-card"?(openBlock(),createElementBlock("span",{key:4,class:normalizeClass(unref(g).be("list","item-actions"))},[createBaseVNode("span",{class:normalizeClass(unref(g).be("list","item-preview")),onClick:re=>z.handlePreview(ae)},[createVNode(unref(ElIcon),{class:normalizeClass(unref(y).m("zoom-in"))},{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1},8,["class"])],10,_hoisted_5$A),unref($)?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(g).be("list","item-delete")),onClick:re=>L(ae)},[createVNode(unref(ElIcon),{class:normalizeClass(unref(y).m("delete"))},{default:withCtx(()=>[createVNode(unref(delete_default))]),_:1},8,["class"])],10,_hoisted_6$x))],2)):createCommentVNode("v-if",!0)])],42,_hoisted_1$1h))),128)),renderSlot(z.$slots,"append")]),_:3},8,["class","name"]))}});var UploadList=_export_sfc$1(_sfc_main$1j,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const uploadDraggerProps=buildProps({disabled:{type:Boolean,default:!1}}),uploadDraggerEmits={file:e=>isArray$3(e)},_hoisted_1$1g=["onDrop","onDragover"],COMPONENT_NAME="ElUploadDrag",__default__$4=defineComponent({name:COMPONENT_NAME}),_sfc_main$1i=defineComponent({...__default__$4,props:uploadDraggerProps,emits:uploadDraggerEmits,setup(e,{emit:n}){const r=inject(uploadContextKey);r||throwError(COMPONENT_NAME,"usage: <el-upload><el-upload-dragger /></el-upload>");const g=useNamespace("upload"),y=ref(!1),k=useFormDisabled(),$=L=>{if(k.value)return;y.value=!1,L.stopPropagation();const z=Array.from(L.dataTransfer.files),j=r.accept.value;if(!j){n("file",z);return}const ae=z.filter(re=>{const{type:oe,name:ue}=re,le=ue.includes(".")?`.${ue.split(".").pop()}`:"",de=oe.replace(/\/.*$/,"");return j.split(",").map(he=>he.trim()).filter(he=>he).some(he=>he.startsWith(".")?le===he:/\/\*$/.test(he)?de===he.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(he)?oe===he:!1)});n("file",ae)},V=()=>{k.value||(y.value=!0)};return(L,z)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(g).b("dragger"),unref(g).is("dragover",y.value)]),onDrop:withModifiers($,["prevent"]),onDragover:withModifiers(V,["prevent"]),onDragleave:z[0]||(z[0]=withModifiers(j=>y.value=!1,["prevent"]))},[renderSlot(L.$slots,"default")],42,_hoisted_1$1g))}});var UploadDragger=_export_sfc$1(_sfc_main$1i,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const uploadContentProps=buildProps({...uploadBaseProps,beforeUpload:{type:definePropType(Function),default:NOOP},onRemove:{type:definePropType(Function),default:NOOP},onStart:{type:definePropType(Function),default:NOOP},onSuccess:{type:definePropType(Function),default:NOOP},onProgress:{type:definePropType(Function),default:NOOP},onError:{type:definePropType(Function),default:NOOP},onExceed:{type:definePropType(Function),default:NOOP}}),_hoisted_1$1f=["onKeydown"],_hoisted_2$1b=["name","multiple","accept"],__default__$3=defineComponent({name:"ElUploadContent",inheritAttrs:!1}),_sfc_main$1h=defineComponent({...__default__$3,props:uploadContentProps,setup(e,{expose:n}){const r=e,g=useNamespace("upload"),y=useFormDisabled(),k=shallowRef({}),$=shallowRef(),V=ue=>{if(ue.length===0)return;const{autoUpload:le,limit:de,fileList:he,multiple:_e,onStart:Ce,onExceed:Ne}=r;if(de&&he.length+ue.length>de){Ne(ue,he);return}_e||(ue=ue.slice(0,1));for(const $e of ue){const xe=$e;xe.uid=genFileId(),Ce(xe),le&&L(xe)}},L=async ue=>{if($.value.value="",!r.beforeUpload)return z(ue);let le,de={};try{const _e=r.data,Ce=r.beforeUpload(ue);de=isObject$3(r.data)?cloneDeep(r.data):r.data,le=await Ce,isObject$3(r.data)&&isEqual$1(_e,de)&&(de=cloneDeep(r.data))}catch{le=!1}if(le===!1){r.onRemove(ue);return}let he=ue;le instanceof Blob&&(le instanceof File?he=le:he=new File([le],ue.name,{type:ue.type})),z(Object.assign(he,{uid:ue.uid}),de)},z=(ue,le)=>{const{headers:de,data:he,method:_e,withCredentials:Ce,name:Ne,action:$e,onProgress:xe,onSuccess:Ie,onError:ze,httpRequest:qe}=r,{uid:Et}=ue,_n={headers:de||{},withCredentials:Ce,file:ue,data:le??he,method:_e,filename:Ne,action:$e,onProgress:Sn=>{xe(Sn,ue)},onSuccess:Sn=>{Ie(Sn,ue),delete k.value[Et]},onError:Sn=>{ze(Sn,ue),delete k.value[Et]}},Dt=qe(_n);k.value[Et]=Dt,Dt instanceof Promise&&Dt.then(_n.onSuccess,_n.onError)},j=ue=>{const le=ue.target.files;le&&V(Array.from(le))},ae=()=>{y.value||($.value.value="",$.value.click())},re=()=>{ae()};return n({abort:ue=>{entriesOf(k.value).filter(ue?([de])=>String(ue.uid)===de:()=>!0).forEach(([de,he])=>{he instanceof XMLHttpRequest&&he.abort(),delete k.value[de]})},upload:L}),(ue,le)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(g).b(),unref(g).m(ue.listType),unref(g).is("drag",ue.drag)]),tabindex:"0",onClick:ae,onKeydown:withKeys(withModifiers(re,["self"]),["enter","space"])},[ue.drag?(openBlock(),createBlock(UploadDragger,{key:0,disabled:unref(y),onFile:V},{default:withCtx(()=>[renderSlot(ue.$slots,"default")]),_:3},8,["disabled"])):renderSlot(ue.$slots,"default",{key:1}),createBaseVNode("input",{ref_key:"inputRef",ref:$,class:normalizeClass(unref(g).e("input")),name:ue.name,multiple:ue.multiple,accept:ue.accept,type:"file",onChange:j,onClick:le[0]||(le[0]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$1b)],42,_hoisted_1$1f))}});var UploadContent=_export_sfc$1(_sfc_main$1h,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const SCOPE$1="ElUpload",revokeObjectURL=e=>{var n;(n=e.url)!=null&&n.startsWith("blob:")&&URL.revokeObjectURL(e.url)},useHandlers=(e,n)=>{const r=useVModel(e,"fileList",void 0,{passive:!0}),g=re=>r.value.find(oe=>oe.uid===re.uid);function y(re){var oe;(oe=n.value)==null||oe.abort(re)}function k(re=["ready","uploading","success","fail"]){r.value=r.value.filter(oe=>!re.includes(oe.status))}const $=(re,oe)=>{const ue=g(oe);ue&&(console.error(re),ue.status="fail",r.value.splice(r.value.indexOf(ue),1),e.onError(re,ue,r.value),e.onChange(ue,r.value))},V=(re,oe)=>{const ue=g(oe);ue&&(e.onProgress(re,ue,r.value),ue.status="uploading",ue.percentage=Math.round(re.percent))},L=(re,oe)=>{const ue=g(oe);ue&&(ue.status="success",ue.response=re,e.onSuccess(re,ue,r.value),e.onChange(ue,r.value))},z=re=>{isNil(re.uid)&&(re.uid=genFileId());const oe={name:re.name,percentage:0,status:"ready",size:re.size,raw:re,uid:re.uid};if(e.listType==="picture-card"||e.listType==="picture")try{oe.url=URL.createObjectURL(re)}catch(ue){ue.message,e.onError(ue,oe,r.value)}r.value=[...r.value,oe],e.onChange(oe,r.value)},j=async re=>{const oe=re instanceof File?g(re):re;oe||throwError(SCOPE$1,"file to be removed not found");const ue=le=>{y(le);const de=r.value;de.splice(de.indexOf(le),1),e.onRemove(le,de),revokeObjectURL(le)};e.beforeRemove?await e.beforeRemove(oe,r.value)!==!1&&ue(oe):ue(oe)};function ae(){r.value.filter(({status:re})=>re==="ready").forEach(({raw:re})=>{var oe;return re&&((oe=n.value)==null?void 0:oe.upload(re))})}return watch(()=>e.listType,re=>{re!=="picture-card"&&re!=="picture"||(r.value=r.value.map(oe=>{const{raw:ue,url:le}=oe;if(!le&&ue)try{oe.url=URL.createObjectURL(ue)}catch(de){e.onError(de,oe,r.value)}return oe}))}),watch(r,re=>{for(const oe of re)oe.uid||(oe.uid=genFileId()),oe.status||(oe.status="success")},{immediate:!0,deep:!0}),{uploadFiles:r,abort:y,clearFiles:k,handleError:$,handleProgress:V,handleStart:z,handleSuccess:L,handleRemove:j,submit:ae}},__default__$2=defineComponent({name:"ElUpload"}),_sfc_main$1g=defineComponent({...__default__$2,props:uploadProps,setup(e,{expose:n}){const r=e,g=useFormDisabled(),y=shallowRef(),{abort:k,submit:$,clearFiles:V,uploadFiles:L,handleStart:z,handleError:j,handleRemove:ae,handleSuccess:re,handleProgress:oe}=useHandlers(r,y),ue=computed(()=>r.listType==="picture-card"),le=computed(()=>({...r,fileList:L.value,onStart:z,onProgress:oe,onSuccess:re,onError:j,onRemove:ae}));return onBeforeUnmount(()=>{L.value.forEach(({url:de})=>{de?.startsWith("blob:")&&URL.revokeObjectURL(de)})}),provide(uploadContextKey,{accept:toRef(r,"accept")}),n({abort:k,submit:$,clearFiles:V,handleStart:z,handleRemove:ae}),(de,he)=>(openBlock(),createElementBlock("div",null,[unref(ue)&&de.showFileList?(openBlock(),createBlock(UploadList,{key:0,disabled:unref(g),"list-type":de.listType,files:unref(L),"handle-preview":de.onPreview,onRemove:unref(ae)},createSlots({append:withCtx(()=>[createVNode(UploadContent,mergeProps({ref_key:"uploadRef",ref:y},unref(le)),{default:withCtx(()=>[de.$slots.trigger?renderSlot(de.$slots,"trigger",{key:0}):createCommentVNode("v-if",!0),!de.$slots.trigger&&de.$slots.default?renderSlot(de.$slots,"default",{key:1}):createCommentVNode("v-if",!0)]),_:3},16)]),_:2},[de.$slots.file?{name:"default",fn:withCtx(({file:_e})=>[renderSlot(de.$slots,"file",{file:_e})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):createCommentVNode("v-if",!0),!unref(ue)||unref(ue)&&!de.showFileList?(openBlock(),createBlock(UploadContent,mergeProps({key:1,ref_key:"uploadRef",ref:y},unref(le)),{default:withCtx(()=>[de.$slots.trigger?renderSlot(de.$slots,"trigger",{key:0}):createCommentVNode("v-if",!0),!de.$slots.trigger&&de.$slots.default?renderSlot(de.$slots,"default",{key:1}):createCommentVNode("v-if",!0)]),_:3},16)):createCommentVNode("v-if",!0),de.$slots.trigger?renderSlot(de.$slots,"default",{key:2}):createCommentVNode("v-if",!0),renderSlot(de.$slots,"tip"),!unref(ue)&&de.showFileList?(openBlock(),createBlock(UploadList,{key:3,disabled:unref(g),"list-type":de.listType,files:unref(L),"handle-preview":de.onPreview,onRemove:unref(ae)},createSlots({_:2},[de.$slots.file?{name:"default",fn:withCtx(({file:_e})=>[renderSlot(de.$slots,"file",{file:_e})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):createCommentVNode("v-if",!0)]))}});var Upload=_export_sfc$1(_sfc_main$1g,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const ElUpload=withInstall(Upload);var Components=[ElAffix,ElAlert,ElAutocomplete,ElAutoResizer,ElAvatar,ElBacktop,ElBadge,ElBreadcrumb,ElBreadcrumbItem,ElButton,ElButtonGroup$1,ElCalendar,ElCard,ElCarousel,ElCarouselItem,ElCascader,ElCascaderPanel,ElCheckTag,ElCheckbox,ElCheckboxButton,ElCheckboxGroup$1,ElCol,ElCollapse,ElCollapseItem,ElCollapseTransition,ElColorPicker,ElConfigProvider,ElContainer,ElAside,ElFooter,ElHeader,ElMain,ElDatePicker,ElDescriptions,ElDescriptionsItem,ElDialog,ElDivider,ElDrawer,ElDropdown,ElDropdownItem,ElDropdownMenu,ElEmpty,ElForm,ElFormItem,ElIcon,ElImage,ElImageViewer,ElInput,ElInputNumber,ElLink,ElMenu,ElMenuItem,ElMenuItemGroup,ElSubMenu,ElPageHeader,ElPagination,ElPopconfirm,ElPopover,ElPopper,ElProgress,ElRadio,ElRadioButton,ElRadioGroup,ElRate,ElResult,ElRow,ElScrollbar,ElSelect,ElOption,ElOptionGroup,ElSelectV2,ElSkeleton,ElSkeletonItem,ElSlider,ElSpace,ElStatistic,ElCountdown,ElSteps,ElStep,ElSwitch,ElTable,ElTableColumn,ElTableV2,ElTabs,ElTabPane,ElTag,ElText,ElTimePicker,ElTimeSelect,ElTimeline,ElTimelineItem,ElTooltip,ElTooltipV2,ElTransfer,ElTree,ElTreeSelect,ElTreeV2,ElUpload];const SCOPE="ElInfiniteScroll",CHECK_INTERVAL=50,DEFAULT_DELAY=200,DEFAULT_DISTANCE=0,attributes={delay:{type:Number,default:DEFAULT_DELAY},distance:{type:Number,default:DEFAULT_DISTANCE},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},getScrollOptions=(e,n)=>Object.entries(attributes).reduce((r,[g,y])=>{var k,$;const{type:V,default:L}=y,z=e.getAttribute(`infinite-scroll-${g}`);let j=($=(k=n[z])!=null?k:z)!=null?$:L;return j=j==="false"?!1:j,j=V(j),r[g]=Number.isNaN(j)?L:j,r},{}),destroyObserver=e=>{const{observer:n}=e[SCOPE];n&&(n.disconnect(),delete e[SCOPE].observer)},handleScroll=(e,n)=>{const{container:r,containerEl:g,instance:y,observer:k,lastScrollTop:$}=e[SCOPE],{disabled:V,distance:L}=getScrollOptions(e,y),{clientHeight:z,scrollHeight:j,scrollTop:ae}=g,re=ae-$;if(e[SCOPE].lastScrollTop=ae,k||V||re<0)return;let oe=!1;if(r===e)oe=j-(z+ae)<=L;else{const{clientTop:ue,scrollHeight:le}=e,de=getOffsetTopDistance(e,g);oe=ae+z>=de+ue+le-L}oe&&n.call(y)};function checkFull(e,n){const{containerEl:r,instance:g}=e[SCOPE],{disabled:y}=getScrollOptions(e,g);y||r.clientHeight===0||(r.scrollHeight<=r.clientHeight?n.call(g):destroyObserver(e))}const InfiniteScroll={async mounted(e,n){const{instance:r,value:g}=n;isFunction$3(g)||throwError(SCOPE,"'v-infinite-scroll' binding value must be a function"),await nextTick();const{delay:y,immediate:k}=getScrollOptions(e,r),$=getScrollContainer(e,!0),V=$===window?document.documentElement:$,L=throttle(handleScroll.bind(null,e,g),y);if($){if(e[SCOPE]={instance:r,container:$,containerEl:V,delay:y,cb:g,onScroll:L,lastScrollTop:V.scrollTop},k){const z=new MutationObserver(throttle(checkFull.bind(null,e,g),CHECK_INTERVAL));e[SCOPE].observer=z,z.observe(e,{childList:!0,subtree:!0}),checkFull(e,g)}$.addEventListener("scroll",L)}},unmounted(e){const{container:n,onScroll:r}=e[SCOPE];n?.removeEventListener("scroll",r),destroyObserver(e)},async updated(e){if(!e[SCOPE])await nextTick();else{const{containerEl:n,cb:r,observer:g}=e[SCOPE];n.clientHeight&&g&&checkFull(e,r)}}},_InfiniteScroll=InfiniteScroll;_InfiniteScroll.install=e=>{e.directive("InfiniteScroll",_InfiniteScroll)};const ElInfiniteScroll=_InfiniteScroll;function createLoadingComponent(e){let n;const r=ref(!1),g=reactive({...e,originalPosition:"",originalOverflow:"",visible:!1});function y(re){g.text=re}function k(){const re=g.parent,oe=ae.ns;if(!re.vLoadingAddClassList){let ue=re.getAttribute("loading-number");ue=Number.parseInt(ue)-1,ue?re.setAttribute("loading-number",ue.toString()):(removeClass(re,oe.bm("parent","relative")),re.removeAttribute("loading-number")),removeClass(re,oe.bm("parent","hidden"))}$(),j.unmount()}function $(){var re,oe;(oe=(re=ae.$el)==null?void 0:re.parentNode)==null||oe.removeChild(ae.$el)}function V(){var re;e.beforeClose&&!e.beforeClose()||(r.value=!0,clearTimeout(n),n=window.setTimeout(L,400),g.visible=!1,(re=e.closed)==null||re.call(e))}function L(){if(!r.value)return;const re=g.parent;r.value=!1,re.vLoadingAddClassList=void 0,k()}const z=defineComponent({name:"ElLoading",setup(re,{expose:oe}){const{ns:ue,zIndex:le}=useGlobalComponentSettings("loading");return oe({ns:ue,zIndex:le}),()=>{const de=g.spinner||g.svg,he=h$1("svg",{class:"circular",viewBox:g.svgViewBox?g.svgViewBox:"0 0 50 50",...de?{innerHTML:de}:{}},[h$1("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),_e=g.text?h$1("p",{class:ue.b("text")},[g.text]):void 0;return h$1(Transition,{name:ue.b("fade"),onAfterLeave:L},{default:withCtx(()=>[withDirectives(createVNode("div",{style:{backgroundColor:g.background||""},class:[ue.b("mask"),g.customClass,g.fullscreen?"is-fullscreen":""]},[h$1("div",{class:ue.b("spinner")},[he,_e])]),[[vShow,g.visible]])])})}}}),j=createApp(z),ae=j.mount(document.createElement("div"));return{...toRefs(g),setText:y,removeElLoadingChild:$,close:V,handleAfterLeave:L,vm:ae,get $el(){return ae.$el}}}let fullscreenInstance;const Loading=function(e={}){if(!isClient)return;const n=resolveOptions(e);if(n.fullscreen&&fullscreenInstance)return fullscreenInstance;const r=createLoadingComponent({...n,closed:()=>{var y;(y=n.closed)==null||y.call(n),n.fullscreen&&(fullscreenInstance=void 0)}});addStyle(n,n.parent,r),addClassList(n,n.parent,r),n.parent.vLoadingAddClassList=()=>addClassList(n,n.parent,r);let g=n.parent.getAttribute("loading-number");return g?g=`${Number.parseInt(g)+1}`:g="1",n.parent.setAttribute("loading-number",g),n.parent.appendChild(r.$el),nextTick(()=>r.visible.value=n.visible),n.fullscreen&&(fullscreenInstance=r),r},resolveOptions=e=>{var n,r,g,y;let k;return isString$3(e.target)?k=(n=document.querySelector(e.target))!=null?n:document.body:k=e.target||document.body,{parent:k===document.body||e.body?document.body:k,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:k===document.body&&((r=e.fullscreen)!=null?r:!0),lock:(g=e.lock)!=null?g:!1,customClass:e.customClass||"",visible:(y=e.visible)!=null?y:!0,target:k}},addStyle=async(e,n,r)=>{const{nextZIndex:g}=r.vm.zIndex||r.vm._.exposed.zIndex,y={};if(e.fullscreen)r.originalPosition.value=getStyle(document.body,"position"),r.originalOverflow.value=getStyle(document.body,"overflow"),y.zIndex=g();else if(e.parent===document.body){r.originalPosition.value=getStyle(document.body,"position"),await nextTick();for(const k of["top","left"]){const $=k==="top"?"scrollTop":"scrollLeft";y[k]=`${e.target.getBoundingClientRect()[k]+document.body[$]+document.documentElement[$]-Number.parseInt(getStyle(document.body,`margin-${k}`),10)}px`}for(const k of["height","width"])y[k]=`${e.target.getBoundingClientRect()[k]}px`}else r.originalPosition.value=getStyle(n,"position");for(const[k,$]of Object.entries(y))r.$el.style[k]=$},addClassList=(e,n,r)=>{const g=r.vm.ns||r.vm._.exposed.ns;["absolute","fixed","sticky"].includes(r.originalPosition.value)?removeClass(n,g.bm("parent","relative")):addClass(n,g.bm("parent","relative")),e.fullscreen&&e.lock?addClass(n,g.bm("parent","hidden")):removeClass(n,g.bm("parent","hidden"))},INSTANCE_KEY=Symbol("ElLoading"),createInstance=(e,n)=>{var r,g,y,k;const $=n.instance,V=re=>isObject$3(n.value)?n.value[re]:void 0,L=re=>{const oe=isString$3(re)&&$?.[re]||re;return oe&&ref(oe)},z=re=>L(V(re)||e.getAttribute(`element-loading-${hyphenate(re)}`)),j=(r=V("fullscreen"))!=null?r:n.modifiers.fullscreen,ae={text:z("text"),svg:z("svg"),svgViewBox:z("svgViewBox"),spinner:z("spinner"),background:z("background"),customClass:z("customClass"),fullscreen:j,target:(g=V("target"))!=null?g:j?void 0:e,body:(y=V("body"))!=null?y:n.modifiers.body,lock:(k=V("lock"))!=null?k:n.modifiers.lock};e[INSTANCE_KEY]={options:ae,instance:Loading(ae)}},updateOptions=(e,n)=>{for(const r of Object.keys(n))isRef(n[r])&&(n[r].value=e[r])},vLoading={mounted(e,n){n.value&&createInstance(e,n)},updated(e,n){const r=e[INSTANCE_KEY];n.oldValue!==n.value&&(n.value&&!n.oldValue?createInstance(e,n):n.value&&n.oldValue?isObject$3(n.value)&&updateOptions(n.value,r.options):r?.instance.close())},unmounted(e){var n;(n=e[INSTANCE_KEY])==null||n.instance.close()}},ElLoading={install(e){e.directive("loading",vLoading),e.config.globalProperties.$loading=Loading},directive:vLoading,service:Loading},messageTypes=["success","info","warning","error"],messageDefaults=mutable({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:isClient?document.body:void 0}),messageProps=buildProps({customClass:{type:String,default:messageDefaults.customClass},center:{type:Boolean,default:messageDefaults.center},dangerouslyUseHTMLString:{type:Boolean,default:messageDefaults.dangerouslyUseHTMLString},duration:{type:Number,default:messageDefaults.duration},icon:{type:iconPropType,default:messageDefaults.icon},id:{type:String,default:messageDefaults.id},message:{type:definePropType([String,Object,Function]),default:messageDefaults.message},onClose:{type:definePropType(Function),required:!1},showClose:{type:Boolean,default:messageDefaults.showClose},type:{type:String,values:messageTypes,default:messageDefaults.type},offset:{type:Number,default:messageDefaults.offset},zIndex:{type:Number,default:messageDefaults.zIndex},grouping:{type:Boolean,default:messageDefaults.grouping},repeatNum:{type:Number,default:messageDefaults.repeatNum}}),messageEmits={destroy:()=>!0},instances=shallowReactive([]),getInstance=e=>{const n=instances.findIndex(y=>y.id===e),r=instances[n];let g;return n>0&&(g=instances[n-1]),{current:r,prev:g}},getLastOffset=e=>{const{prev:n}=getInstance(e);return n?n.vm.exposed.bottom.value:0},getOffsetOrSpace=(e,n)=>instances.findIndex(g=>g.id===e)>0?20:n,_hoisted_1$1e=["id"],_hoisted_2$1a=["innerHTML"],__default__$1=defineComponent({name:"ElMessage"}),_sfc_main$1f=defineComponent({...__default__$1,props:messageProps,emits:messageEmits,setup(e,{expose:n}){const r=e,{Close:g}=TypeComponents,{ns:y,zIndex:k}=useGlobalComponentSettings("message"),{currentZIndex:$,nextZIndex:V}=k,L=ref(),z=ref(!1),j=ref(0);let ae;const re=computed(()=>r.type?r.type==="error"?"danger":r.type:"info"),oe=computed(()=>{const Ie=r.type;return{[y.bm("icon",Ie)]:Ie&&TypeComponentsMap[Ie]}}),ue=computed(()=>r.icon||TypeComponentsMap[r.type]||""),le=computed(()=>getLastOffset(r.id)),de=computed(()=>getOffsetOrSpace(r.id,r.offset)+le.value),he=computed(()=>j.value+de.value),_e=computed(()=>({top:`${de.value}px`,zIndex:$.value}));function Ce(){r.duration!==0&&({stop:ae}=useTimeoutFn(()=>{$e()},r.duration))}function Ne(){ae?.()}function $e(){z.value=!1}function xe({code:Ie}){Ie===EVENT_CODE.esc&&$e()}return onMounted(()=>{Ce(),V(),z.value=!0}),watch(()=>r.repeatNum,()=>{Ne(),Ce()}),useEventListener(document,"keydown",xe),useResizeObserver(L,()=>{j.value=L.value.getBoundingClientRect().height}),n({visible:z,bottom:he,close:$e}),(Ie,ze)=>(openBlock(),createBlock(Transition,{name:unref(y).b("fade"),onBeforeLeave:Ie.onClose,onAfterLeave:ze[0]||(ze[0]=qe=>Ie.$emit("destroy")),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:Ie.id,ref_key:"messageRef",ref:L,class:normalizeClass([unref(y).b(),{[unref(y).m(Ie.type)]:Ie.type&&!Ie.icon},unref(y).is("center",Ie.center),unref(y).is("closable",Ie.showClose),Ie.customClass]),style:normalizeStyle(unref(_e)),role:"alert",onMouseenter:Ne,onMouseleave:Ce},[Ie.repeatNum>1?(openBlock(),createBlock(unref(ElBadge),{key:0,value:Ie.repeatNum,type:unref(re),class:normalizeClass(unref(y).e("badge"))},null,8,["value","type","class"])):createCommentVNode("v-if",!0),unref(ue)?(openBlock(),createBlock(unref(ElIcon),{key:1,class:normalizeClass([unref(y).e("icon"),unref(oe)])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(ue))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),renderSlot(Ie.$slots,"default",{},()=>[Ie.dangerouslyUseHTMLString?(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" Caution here, message could've been compromised, never use user's input as message "),createBaseVNode("p",{class:normalizeClass(unref(y).e("content")),innerHTML:Ie.message},null,10,_hoisted_2$1a)],2112)):(openBlock(),createElementBlock("p",{key:0,class:normalizeClass(unref(y).e("content"))},toDisplayString$1(Ie.message),3))]),Ie.showClose?(openBlock(),createBlock(unref(ElIcon),{key:2,class:normalizeClass(unref(y).e("closeBtn")),onClick:withModifiers($e,["stop"])},{default:withCtx(()=>[createVNode(unref(g))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],46,_hoisted_1$1e),[[vShow,z.value]])]),_:3},8,["name","onBeforeLeave"]))}});var MessageConstructor=_export_sfc$1(_sfc_main$1f,[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let seed$1=1;const normalizeOptions=e=>{const n=!e||isString$3(e)||isVNode$1(e)||isFunction$3(e)?{message:e}:e,r={...messageDefaults,...n};if(!r.appendTo)r.appendTo=document.body;else if(isString$3(r.appendTo)){let g=document.querySelector(r.appendTo);isElement$1(g)||(g=document.body),r.appendTo=g}return r},closeMessage=e=>{const n=instances.indexOf(e);if(n===-1)return;instances.splice(n,1);const{handler:r}=e;r.close()},createMessage=({appendTo:e,...n},r)=>{const g=`message_${seed$1++}`,y=n.onClose,k=document.createElement("div"),$={...n,id:g,onClose:()=>{y?.(),closeMessage(j)},onDestroy:()=>{render$2(null,k)}},V=createVNode(MessageConstructor,$,isFunction$3($.message)||isVNode$1($.message)?{default:isFunction$3($.message)?$.message:()=>$.message}:null);V.appContext=r||message._context,render$2(V,k),e.appendChild(k.firstElementChild);const L=V.component,j={id:g,vnode:V,vm:L,handler:{close:()=>{L.exposed.visible.value=!1}},props:V.component.props};return j},message=(e={},n)=>{if(!isClient)return{close:()=>{}};if(isNumber$1(messageConfig.max)&&instances.length>=messageConfig.max)return{close:()=>{}};const r=normalizeOptions(e);if(r.grouping&&instances.length){const y=instances.find(({vnode:k})=>{var $;return(($=k.props)==null?void 0:$.message)===r.message});if(y)return y.props.repeatNum+=1,y.props.type=r.type,y.handler}const g=createMessage(r,n);return instances.push(g),g.handler};messageTypes.forEach(e=>{message[e]=(n={},r)=>{const g=normalizeOptions(n);return message({...g,type:e},r)}});function closeAll$1(e){for(const n of instances)(!e||e===n.props.type)&&n.handler.close()}message.closeAll=closeAll$1;message._context=null;const ElMessage=withInstallFunction(message,"$message"),_sfc_main$1e=defineComponent({name:"ElMessageBox",directives:{TrapFocus},components:{ElButton,ElFocusTrap,ElInput,ElOverlay,ElIcon,...TypeComponents},inheritAttrs:!1,props:{buttonSize:{type:String,validator:isValidComponentSize},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{locale:r,zIndex:g,ns:y,size:k}=useGlobalComponentSettings("message-box",computed(()=>e.buttonSize)),{t:$}=r,{nextZIndex:V}=g,L=ref(!1),z=reactive({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:V()}),j=computed(()=>{const Vn=z.type;return{[y.bm("icon",Vn)]:Vn&&TypeComponentsMap[Vn]}}),ae=useId(),re=useId(),oe=computed(()=>z.icon||TypeComponentsMap[z.type]||""),ue=computed(()=>!!z.message),le=ref(),de=ref(),he=ref(),_e=ref(),Ce=ref(),Ne=computed(()=>z.confirmButtonClass);watch(()=>z.inputValue,async Vn=>{await nextTick(),e.boxType==="prompt"&&Vn!==null&&_n()},{immediate:!0}),watch(()=>L.value,Vn=>{var Mn,$n;Vn&&(e.boxType!=="prompt"&&(z.autofocus?he.value=($n=(Mn=Ce.value)==null?void 0:Mn.$el)!=null?$n:le.value:he.value=le.value),z.zIndex=V()),e.boxType==="prompt"&&(Vn?nextTick().then(()=>{var Nn;_e.value&&_e.value.$el&&(z.autofocus?he.value=(Nn=Dt())!=null?Nn:le.value:he.value=le.value)}):(z.editorErrorMessage="",z.validateError=!1))});const $e=computed(()=>e.draggable);useDraggable(le,de,$e),onMounted(async()=>{await nextTick(),e.closeOnHashChange&&window.addEventListener("hashchange",xe)}),onBeforeUnmount(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",xe)});function xe(){L.value&&(L.value=!1,nextTick(()=>{z.action&&n("action",z.action)}))}const Ie=()=>{e.closeOnClickModal&&Et(z.distinguishCancelAndClose?"close":"cancel")},ze=useSameTarget(Ie),qe=Vn=>{if(z.inputType!=="textarea")return Vn.preventDefault(),Et("confirm")},Et=Vn=>{var Mn;e.boxType==="prompt"&&Vn==="confirm"&&!_n()||(z.action=Vn,z.beforeClose?(Mn=z.beforeClose)==null||Mn.call(z,Vn,z,xe):xe())},_n=()=>{if(e.boxType==="prompt"){const Vn=z.inputPattern;if(Vn&&!Vn.test(z.inputValue||""))return z.editorErrorMessage=z.inputErrorMessage||$("el.messagebox.error"),z.validateError=!0,!1;const Mn=z.inputValidator;if(typeof Mn=="function"){const $n=Mn(z.inputValue);if($n===!1)return z.editorErrorMessage=z.inputErrorMessage||$("el.messagebox.error"),z.validateError=!0,!1;if(typeof $n=="string")return z.editorErrorMessage=$n,z.validateError=!0,!1}}return z.editorErrorMessage="",z.validateError=!1,!0},Dt=()=>{const Vn=_e.value.$refs;return Vn.input||Vn.textarea},Sn=()=>{Et("close")},hn=()=>{e.closeOnPressEscape&&Sn()};return e.lockScroll&&useLockscreen(L),{...toRefs(z),ns:y,overlayEvent:ze,visible:L,hasMessage:ue,typeClass:j,contentId:ae,inputId:re,btnSize:k,iconComponent:oe,confirmButtonClasses:Ne,rootRef:le,focusStartRef:he,headerRef:de,inputRef:_e,confirmRef:Ce,doClose:xe,handleClose:Sn,onCloseRequested:hn,handleWrapperClick:Ie,handleInputEnter:qe,handleAction:Et,t:$}}}),_hoisted_1$1d=["aria-label","aria-describedby"],_hoisted_2$19=["aria-label"],_hoisted_3$K=["id"];function _sfc_render(e,n,r,g,y,k){const $=resolveComponent("el-icon"),V=resolveComponent("close"),L=resolveComponent("el-input"),z=resolveComponent("el-button"),j=resolveComponent("el-focus-trap"),ae=resolveComponent("el-overlay");return openBlock(),createBlock(Transition,{name:"fade-in-linear",onAfterLeave:n[11]||(n[11]=re=>e.$emit("vanish")),persisted:""},{default:withCtx(()=>[withDirectives(createVNode(ae,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:withCtx(()=>[createBaseVNode("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:normalizeClass(`${e.ns.namespace.value}-overlay-message-box`),onClick:n[8]||(n[8]=(...re)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...re)),onMousedown:n[9]||(n[9]=(...re)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...re)),onMouseup:n[10]||(n[10]=(...re)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...re))},[createVNode(j,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:withCtx(()=>[createBaseVNode("div",{ref:"rootRef",class:normalizeClass([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:normalizeStyle(e.customStyle),tabindex:"-1",onClick:n[7]||(n[7]=withModifiers(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(openBlock(),createElementBlock("div",{key:0,ref:"headerRef",class:normalizeClass(e.ns.e("header"))},[createBaseVNode("div",{class:normalizeClass(e.ns.e("title"))},[e.iconComponent&&e.center?(openBlock(),createBlock($,{key:0,class:normalizeClass([e.ns.e("status"),e.typeClass])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(e.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),createBaseVNode("span",null,toDisplayString$1(e.title),1)],2),e.showClose?(openBlock(),createElementBlock("button",{key:0,type:"button",class:normalizeClass(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:n[0]||(n[0]=re=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:n[1]||(n[1]=withKeys(withModifiers(re=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[createVNode($,{class:normalizeClass(e.ns.e("close"))},{default:withCtx(()=>[createVNode(V)]),_:1},8,["class"])],42,_hoisted_2$19)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{id:e.contentId,class:normalizeClass(e.ns.e("content"))},[createBaseVNode("div",{class:normalizeClass(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(openBlock(),createBlock($,{key:0,class:normalizeClass([e.ns.e("status"),e.typeClass])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(e.iconComponent)))]),_:1},8,["class"])):createCommentVNode("v-if",!0),e.hasMessage?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(e.ns.e("message"))},[renderSlot(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(openBlock(),createBlock(resolveDynamicComponent(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(openBlock(),createBlock(resolveDynamicComponent(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:withCtx(()=>[createTextVNode(toDisplayString$1(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):createCommentVNode("v-if",!0)],2),withDirectives(createBaseVNode("div",{class:normalizeClass(e.ns.e("input"))},[createVNode(L,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":n[2]||(n[2]=re=>e.inputValue=re),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:normalizeClass({invalid:e.validateError}),onKeydown:withKeys(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),createBaseVNode("div",{class:normalizeClass(e.ns.e("errormsg")),style:normalizeStyle({visibility:e.editorErrorMessage?"visible":"hidden"})},toDisplayString$1(e.editorErrorMessage),7)],2),[[vShow,e.showInput]])],10,_hoisted_3$K),createBaseVNode("div",{class:normalizeClass(e.ns.e("btns"))},[e.showCancelButton?(openBlock(),createBlock(z,{key:0,loading:e.cancelButtonLoading,class:normalizeClass([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:n[3]||(n[3]=re=>e.handleAction("cancel")),onKeydown:n[4]||(n[4]=withKeys(withModifiers(re=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):createCommentVNode("v-if",!0),withDirectives(createVNode(z,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:normalizeClass([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:n[5]||(n[5]=re=>e.handleAction("confirm")),onKeydown:n[6]||(n[6]=withKeys(withModifiers(re=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[vShow,e.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,_hoisted_1$1d)]),_:3},8,["z-index","overlay-class","mask"]),[[vShow,e.visible]])]),_:3})}var MessageBoxConstructor=_export_sfc$1(_sfc_main$1e,[["render",_sfc_render],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const messageInstance=new Map,getAppendToElement=e=>{let n=document.body;return e.appendTo&&(isString$3(e.appendTo)&&(n=document.querySelector(e.appendTo)),isElement$1(e.appendTo)&&(n=e.appendTo),isElement$1(n)||(n=document.body)),n},initInstance=(e,n,r=null)=>{const g=createVNode(MessageBoxConstructor,e,isFunction$3(e.message)||isVNode$1(e.message)?{default:isFunction$3(e.message)?e.message:()=>e.message}:null);return g.appContext=r,render$2(g,n),getAppendToElement(e).appendChild(n.firstElementChild),g.component},genContainer=()=>document.createElement("div"),showMessage=(e,n)=>{const r=genContainer();e.onVanish=()=>{render$2(null,r),messageInstance.delete(y)},e.onAction=k=>{const $=messageInstance.get(y);let V;e.showInput?V={value:y.inputValue,action:k}:V=k,e.callback?e.callback(V,g.proxy):k==="cancel"||k==="close"?e.distinguishCancelAndClose&&k!=="cancel"?$.reject("close"):$.reject("cancel"):$.resolve(V)};const g=initInstance(e,r,n),y=g.proxy;for(const k in e)hasOwn$1(e,k)&&!hasOwn$1(y.$props,k)&&(y[k]=e[k]);return y.visible=!0,y};function MessageBox(e,n=null){if(!isClient)return Promise.reject();let r;return isString$3(e)||isVNode$1(e)?e={message:e}:r=e.callback,new Promise((g,y)=>{const k=showMessage(e,n??MessageBox._context);messageInstance.set(k,{options:e,callback:r,resolve:g,reject:y})})}const MESSAGE_BOX_VARIANTS=["alert","confirm","prompt"],MESSAGE_BOX_DEFAULT_OPTS={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};MESSAGE_BOX_VARIANTS.forEach(e=>{MessageBox[e]=messageBoxFactory(e)});function messageBoxFactory(e){return(n,r,g,y)=>{let k="";return isObject$3(r)?(g=r,k=""):isUndefined(r)?k="":k=r,MessageBox(Object.assign({title:k,message:n,type:"",...MESSAGE_BOX_DEFAULT_OPTS[e]},g,{boxType:e}),y)}}MessageBox.close=()=>{messageInstance.forEach((e,n)=>{n.doClose()}),messageInstance.clear()};MessageBox._context=null;const _MessageBox=MessageBox;_MessageBox.install=e=>{_MessageBox._context=e._context,e.config.globalProperties.$msgbox=_MessageBox,e.config.globalProperties.$messageBox=_MessageBox,e.config.globalProperties.$alert=_MessageBox.alert,e.config.globalProperties.$confirm=_MessageBox.confirm,e.config.globalProperties.$prompt=_MessageBox.prompt};const ElMessageBox=_MessageBox,notificationTypes=["success","info","warning","error"],notificationProps=buildProps({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:iconPropType},id:{type:String,default:""},message:{type:definePropType([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:definePropType(Function),default:()=>{}},onClose:{type:definePropType(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...notificationTypes,""],default:""},zIndex:Number}),notificationEmits={destroy:()=>!0},_hoisted_1$1c=["id"],_hoisted_2$18=["textContent"],_hoisted_3$J={key:0},_hoisted_4$G=["innerHTML"],__default__=defineComponent({name:"ElNotification"}),_sfc_main$1d=defineComponent({...__default__,props:notificationProps,emits:notificationEmits,setup(e,{expose:n}){const r=e,{ns:g,zIndex:y}=useGlobalComponentSettings("notification"),{nextZIndex:k,currentZIndex:$}=y,{Close:V}=CloseComponents,L=ref(!1);let z;const j=computed(()=>{const Ce=r.type;return Ce&&TypeComponentsMap[r.type]?g.m(Ce):""}),ae=computed(()=>r.type&&TypeComponentsMap[r.type]||r.icon),re=computed(()=>r.position.endsWith("right")?"right":"left"),oe=computed(()=>r.position.startsWith("top")?"top":"bottom"),ue=computed(()=>{var Ce;return{[oe.value]:`${r.offset}px`,zIndex:(Ce=r.zIndex)!=null?Ce:$.value}});function le(){r.duration>0&&({stop:z}=useTimeoutFn(()=>{L.value&&he()},r.duration))}function de(){z?.()}function he(){L.value=!1}function _e({code:Ce}){Ce===EVENT_CODE.delete||Ce===EVENT_CODE.backspace?de():Ce===EVENT_CODE.esc?L.value&&he():le()}return onMounted(()=>{le(),k(),L.value=!0}),useEventListener(document,"keydown",_e),n({visible:L,close:he}),(Ce,Ne)=>(openBlock(),createBlock(Transition,{name:unref(g).b("fade"),onBeforeLeave:Ce.onClose,onAfterLeave:Ne[1]||(Ne[1]=$e=>Ce.$emit("destroy")),persisted:""},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:Ce.id,class:normalizeClass([unref(g).b(),Ce.customClass,unref(re)]),style:normalizeStyle(unref(ue)),role:"alert",onMouseenter:de,onMouseleave:le,onClick:Ne[0]||(Ne[0]=(...$e)=>Ce.onClick&&Ce.onClick(...$e))},[unref(ae)?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass([unref(g).e("icon"),unref(j)])},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(unref(ae))))]),_:1},8,["class"])):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(unref(g).e("group"))},[createBaseVNode("h2",{class:normalizeClass(unref(g).e("title")),textContent:toDisplayString$1(Ce.title)},null,10,_hoisted_2$18),withDirectives(createBaseVNode("div",{class:normalizeClass(unref(g).e("content")),style:normalizeStyle(Ce.title?void 0:{margin:0})},[renderSlot(Ce.$slots,"default",{},()=>[Ce.dangerouslyUseHTMLString?(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" Caution here, message could've been compromised, never use user's input as message "),createBaseVNode("p",{innerHTML:Ce.message},null,8,_hoisted_4$G)],2112)):(openBlock(),createElementBlock("p",_hoisted_3$J,toDisplayString$1(Ce.message),1))])],6),[[vShow,Ce.message]]),Ce.showClose?(openBlock(),createBlock(unref(ElIcon),{key:0,class:normalizeClass(unref(g).e("closeBtn")),onClick:withModifiers(he,["stop"])},{default:withCtx(()=>[createVNode(unref(V))]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],2)],46,_hoisted_1$1c),[[vShow,L.value]])]),_:3},8,["name","onBeforeLeave"]))}});var NotificationConstructor=_export_sfc$1(_sfc_main$1d,[["__file","/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]);const notifications={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},GAP_SIZE=16;let seed=1;const notify=function(e={},n=null){if(!isClient)return{close:()=>{}};(typeof e=="string"||isVNode$1(e))&&(e={message:e});const r=e.position||"top-right";let g=e.offset||0;notifications[r].forEach(({vm:j})=>{var ae;g+=(((ae=j.el)==null?void 0:ae.offsetHeight)||0)+GAP_SIZE}),g+=GAP_SIZE;const y=`notification_${seed++}`,k=e.onClose,$={...e,offset:g,id:y,onClose:()=>{close(y,r,k)}};let V=document.body;isElement$1(e.appendTo)?V=e.appendTo:isString$3(e.appendTo)&&(V=document.querySelector(e.appendTo)),isElement$1(V)||(V=document.body);const L=document.createElement("div"),z=createVNode(NotificationConstructor,$,isVNode$1($.message)?{default:()=>$.message}:null);return z.appContext=n??notify._context,z.props.onDestroy=()=>{render$2(null,L)},render$2(z,L),notifications[r].push({vm:z}),V.appendChild(L.firstElementChild),{close:()=>{z.component.exposed.visible.value=!1}}};notificationTypes.forEach(e=>{notify[e]=(n={})=>((typeof n=="string"||isVNode$1(n))&&(n={message:n}),notify({...n,type:e}))});function close(e,n,r){const g=notifications[n],y=g.findIndex(({vm:z})=>{var j;return((j=z.component)==null?void 0:j.props.id)===e});if(y===-1)return;const{vm:k}=g[y];if(!k)return;r?.(k);const $=k.el.offsetHeight,V=n.split("-")[0];g.splice(y,1);const L=g.length;if(!(L<1))for(let z=y;z<L;z++){const{el:j,component:ae}=g[z].vm,re=Number.parseInt(j.style[V],10)-$-GAP_SIZE;ae.props.offset=re}}function closeAll(){for(const e of Object.values(notifications))e.forEach(({vm:n})=>{n.component.exposed.visible.value=!1})}notify.closeAll=closeAll;notify._context=null;const ElNotification=withInstallFunction(notify,"$notify");var Plugins=[ElInfiniteScroll,ElLoading,ElMessage,ElMessageBox,ElNotification,ElPopoverDirective],installer=makeInstaller([...Components,...Plugins]);function _isPlaceholder(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}function _curry1(e){return function n(r){return arguments.length===0||_isPlaceholder(r)?n:e.apply(this,arguments)}}function _curry2(e){return function n(r,g){switch(arguments.length){case 0:return n;case 1:return _isPlaceholder(r)?n:_curry1(function(y){return e(r,y)});default:return _isPlaceholder(r)&&_isPlaceholder(g)?n:_isPlaceholder(r)?_curry1(function(y){return e(y,g)}):_isPlaceholder(g)?_curry1(function(y){return e(r,y)}):e(r,g)}}}function _arity(e,n){switch(e){case 0:return function(){return n.apply(this,arguments)};case 1:return function(r){return n.apply(this,arguments)};case 2:return function(r,g){return n.apply(this,arguments)};case 3:return function(r,g,y){return n.apply(this,arguments)};case 4:return function(r,g,y,k){return n.apply(this,arguments)};case 5:return function(r,g,y,k,$){return n.apply(this,arguments)};case 6:return function(r,g,y,k,$,V){return n.apply(this,arguments)};case 7:return function(r,g,y,k,$,V,L){return n.apply(this,arguments)};case 8:return function(r,g,y,k,$,V,L,z){return n.apply(this,arguments)};case 9:return function(r,g,y,k,$,V,L,z,j){return n.apply(this,arguments)};case 10:return function(r,g,y,k,$,V,L,z,j,ae){return n.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function _curryN(e,n,r){return function(){for(var g=[],y=0,k=e,$=0;$<n.length||y<arguments.length;){var V;$<n.length&&(!_isPlaceholder(n[$])||y>=arguments.length)?V=n[$]:(V=arguments[y],y+=1),g[$]=V,_isPlaceholder(V)||(k-=1),$+=1}return k<=0?r.apply(this,g):_arity(k,_curryN(e,g,r))}}var curryN=_curry2(function(n,r){return n===1?_curry1(r):_arity(n,_curryN(n,[],r))});function _cloneRegExp(e){return new RegExp(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":""))}var type=_curry1(function(n){return n===null?"Null":n===void 0?"Undefined":Object.prototype.toString.call(n).slice(8,-1)});function _clone(e,n,r,g){var y=function($){for(var V=n.length,L=0;L<V;){if(e===n[L])return r[L];L+=1}n[L]=e,r[L]=$;for(var z in e)e.hasOwnProperty(z)&&($[z]=g?_clone(e[z],n,r,!0):e[z]);return $};switch(type(e)){case"Object":return y(Object.create(Object.getPrototypeOf(e)));case"Array":return y([]);case"Date":return new Date(e.valueOf());case"RegExp":return _cloneRegExp(e);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return e.slice();default:return e}}var clone=_curry1(function(n){return n!=null&&typeof n.clone=="function"?n.clone():_clone(n,[],[],!0)}),curry=_curry1(function(n){return curryN(n.length,n)});function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var localforage={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,n){(function(r){e.exports=r()})(function(){return function r(g,y,k){function $(z,j){if(!y[z]){if(!g[z]){var ae=typeof commonjsRequire=="function"&&commonjsRequire;if(!j&&ae)return ae(z,!0);if(V)return V(z,!0);var re=new Error("Cannot find module '"+z+"'");throw re.code="MODULE_NOT_FOUND",re}var oe=y[z]={exports:{}};g[z][0].call(oe.exports,function(ue){var le=g[z][1][ue];return $(le||ue)},oe,oe.exports,r,g,y,k)}return y[z].exports}for(var V=typeof commonjsRequire=="function"&&commonjsRequire,L=0;L<k.length;L++)$(k[L]);return $}({1:[function(r,g,y){(function(k){var $=k.MutationObserver||k.WebKitMutationObserver,V;if($){var L=0,z=new $(ue),j=k.document.createTextNode("");z.observe(j,{characterData:!0}),V=function(){j.data=L=++L%2}}else if(!k.setImmediate&&typeof k.MessageChannel<"u"){var ae=new k.MessageChannel;ae.port1.onmessage=ue,V=function(){ae.port2.postMessage(0)}}else"document"in k&&"onreadystatechange"in k.document.createElement("script")?V=function(){var de=k.document.createElement("script");de.onreadystatechange=function(){ue(),de.onreadystatechange=null,de.parentNode.removeChild(de),de=null},k.document.documentElement.appendChild(de)}:V=function(){setTimeout(ue,0)};var re,oe=[];function ue(){re=!0;for(var de,he,_e=oe.length;_e;){for(he=oe,oe=[],de=-1;++de<_e;)he[de]();_e=oe.length}re=!1}g.exports=le;function le(de){oe.push(de)===1&&!re&&V()}}).call(this,typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,g,y){var k=r(1);function $(){}var V={},L=["REJECTED"],z=["FULFILLED"],j=["PENDING"];g.exports=ae;function ae($e){if(typeof $e!="function")throw new TypeError("resolver must be a function");this.state=j,this.queue=[],this.outcome=void 0,$e!==$&&le(this,$e)}ae.prototype.catch=function($e){return this.then(null,$e)},ae.prototype.then=function($e,xe){if(typeof $e!="function"&&this.state===z||typeof xe!="function"&&this.state===L)return this;var Ie=new this.constructor($);if(this.state!==j){var ze=this.state===z?$e:xe;oe(Ie,ze,this.outcome)}else this.queue.push(new re(Ie,$e,xe));return Ie};function re($e,xe,Ie){this.promise=$e,typeof xe=="function"&&(this.onFulfilled=xe,this.callFulfilled=this.otherCallFulfilled),typeof Ie=="function"&&(this.onRejected=Ie,this.callRejected=this.otherCallRejected)}re.prototype.callFulfilled=function($e){V.resolve(this.promise,$e)},re.prototype.otherCallFulfilled=function($e){oe(this.promise,this.onFulfilled,$e)},re.prototype.callRejected=function($e){V.reject(this.promise,$e)},re.prototype.otherCallRejected=function($e){oe(this.promise,this.onRejected,$e)};function oe($e,xe,Ie){k(function(){var ze;try{ze=xe(Ie)}catch(qe){return V.reject($e,qe)}ze===$e?V.reject($e,new TypeError("Cannot resolve promise with itself")):V.resolve($e,ze)})}V.resolve=function($e,xe){var Ie=de(ue,xe);if(Ie.status==="error")return V.reject($e,Ie.value);var ze=Ie.value;if(ze)le($e,ze);else{$e.state=z,$e.outcome=xe;for(var qe=-1,Et=$e.queue.length;++qe<Et;)$e.queue[qe].callFulfilled(xe)}return $e},V.reject=function($e,xe){$e.state=L,$e.outcome=xe;for(var Ie=-1,ze=$e.queue.length;++Ie<ze;)$e.queue[Ie].callRejected(xe);return $e};function ue($e){var xe=$e&&$e.then;if($e&&(typeof $e=="object"||typeof $e=="function")&&typeof xe=="function")return function(){xe.apply($e,arguments)}}function le($e,xe){var Ie=!1;function ze(Dt){Ie||(Ie=!0,V.reject($e,Dt))}function qe(Dt){Ie||(Ie=!0,V.resolve($e,Dt))}function Et(){xe(qe,ze)}var _n=de(Et);_n.status==="error"&&ze(_n.value)}function de($e,xe){var Ie={};try{Ie.value=$e(xe),Ie.status="success"}catch(ze){Ie.status="error",Ie.value=ze}return Ie}ae.resolve=he;function he($e){return $e instanceof this?$e:V.resolve(new this($),$e)}ae.reject=_e;function _e($e){var xe=new this($);return V.reject(xe,$e)}ae.all=Ce;function Ce($e){var xe=this;if(Object.prototype.toString.call($e)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Ie=$e.length,ze=!1;if(!Ie)return this.resolve([]);for(var qe=new Array(Ie),Et=0,_n=-1,Dt=new this($);++_n<Ie;)Sn($e[_n],_n);return Dt;function Sn(hn,Vn){xe.resolve(hn).then(Mn,function($n){ze||(ze=!0,V.reject(Dt,$n))});function Mn($n){qe[Vn]=$n,++Et===Ie&&!ze&&(ze=!0,V.resolve(Dt,qe))}}}ae.race=Ne;function Ne($e){var xe=this;if(Object.prototype.toString.call($e)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Ie=$e.length,ze=!1;if(!Ie)return this.resolve([]);for(var qe=-1,Et=new this($);++qe<Ie;)_n($e[qe]);return Et;function _n(Dt){xe.resolve(Dt).then(function(Sn){ze||(ze=!0,V.resolve(Et,Sn))},function(Sn){ze||(ze=!0,V.reject(Et,Sn))})}}},{1:1}],3:[function(r,g,y){(function(k){typeof k.Promise!="function"&&(k.Promise=r(2))}).call(this,typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,g,y){var k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(fa){return typeof fa}:function(fa){return fa&&typeof Symbol=="function"&&fa.constructor===Symbol&&fa!==Symbol.prototype?"symbol":typeof fa};function $(fa,ka){if(!(fa instanceof ka))throw new TypeError("Cannot call a class as a function")}function V(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var L=V();function z(){try{if(!L||!L.open)return!1;var fa=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),ka=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!fa||ka)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function j(fa,ka){fa=fa||[],ka=ka||{};try{return new Blob(fa,ka)}catch(Ea){if(Ea.name!=="TypeError")throw Ea;for(var ya=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,Ta=new ya,Ba=0;Ba<fa.length;Ba+=1)Ta.append(fa[Ba]);return Ta.getBlob(ka.type)}}typeof Promise>"u"&&r(3);var ae=Promise;function re(fa,ka){ka&&fa.then(function(ya){ka(null,ya)},function(ya){ka(ya)})}function oe(fa,ka,ya){typeof ka=="function"&&fa.then(ka),typeof ya=="function"&&fa.catch(ya)}function ue(fa){return typeof fa!="string"&&(console.warn(fa+" used as a key, but it is not a string."),fa=String(fa)),fa}function le(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var de="local-forage-detect-blob-support",he=void 0,_e={},Ce=Object.prototype.toString,Ne="readonly",$e="readwrite";function xe(fa){for(var ka=fa.length,ya=new ArrayBuffer(ka),Ta=new Uint8Array(ya),Ba=0;Ba<ka;Ba++)Ta[Ba]=fa.charCodeAt(Ba);return ya}function Ie(fa){return new ae(function(ka){var ya=fa.transaction(de,$e),Ta=j([""]);ya.objectStore(de).put(Ta,"key"),ya.onabort=function(Ba){Ba.preventDefault(),Ba.stopPropagation(),ka(!1)},ya.oncomplete=function(){var Ba=navigator.userAgent.match(/Chrome\/(\d+)/),Ea=navigator.userAgent.match(/Edge\//);ka(Ea||!Ba||parseInt(Ba[1],10)>=43)}}).catch(function(){return!1})}function ze(fa){return typeof he=="boolean"?ae.resolve(he):Ie(fa).then(function(ka){return he=ka,he})}function qe(fa){var ka=_e[fa.name],ya={};ya.promise=new ae(function(Ta,Ba){ya.resolve=Ta,ya.reject=Ba}),ka.deferredOperations.push(ya),ka.dbReady?ka.dbReady=ka.dbReady.then(function(){return ya.promise}):ka.dbReady=ya.promise}function Et(fa){var ka=_e[fa.name],ya=ka.deferredOperations.pop();if(ya)return ya.resolve(),ya.promise}function _n(fa,ka){var ya=_e[fa.name],Ta=ya.deferredOperations.pop();if(Ta)return Ta.reject(ka),Ta.promise}function Dt(fa,ka){return new ae(function(ya,Ta){if(_e[fa.name]=_e[fa.name]||Tn(),fa.db)if(ka)qe(fa),fa.db.close();else return ya(fa.db);var Ba=[fa.name];ka&&Ba.push(fa.version);var Ea=L.open.apply(L,Ba);ka&&(Ea.onupgradeneeded=function(La){var Ga=Ea.result;try{Ga.createObjectStore(fa.storeName),La.oldVersion<=1&&Ga.createObjectStore(de)}catch(ja){if(ja.name==="ConstraintError")console.warn('The database "'+fa.name+'" has been upgraded from version '+La.oldVersion+" to version "+La.newVersion+', but the storage "'+fa.storeName+'" already exists.');else throw ja}}),Ea.onerror=function(La){La.preventDefault(),Ta(Ea.error)},Ea.onsuccess=function(){var La=Ea.result;La.onversionchange=function(Ga){Ga.target.close()},ya(La),Et(fa)}})}function Sn(fa){return Dt(fa,!1)}function hn(fa){return Dt(fa,!0)}function Vn(fa,ka){if(!fa.db)return!0;var ya=!fa.db.objectStoreNames.contains(fa.storeName),Ta=fa.version<fa.db.version,Ba=fa.version>fa.db.version;if(Ta&&(fa.version!==ka&&console.warn('The database "'+fa.name+`" can't be downgraded from version `+fa.db.version+" to version "+fa.version+"."),fa.version=fa.db.version),Ba||ya){if(ya){var Ea=fa.db.version+1;Ea>fa.version&&(fa.version=Ea)}return!0}return!1}function Mn(fa){return new ae(function(ka,ya){var Ta=new FileReader;Ta.onerror=ya,Ta.onloadend=function(Ba){var Ea=btoa(Ba.target.result||"");ka({__local_forage_encoded_blob:!0,data:Ea,type:fa.type})},Ta.readAsBinaryString(fa)})}function $n(fa){var ka=xe(atob(fa.data));return j([ka],{type:fa.type})}function Nn(fa){return fa&&fa.__local_forage_encoded_blob}function kn(fa){var ka=this,ya=ka._initReady().then(function(){var Ta=_e[ka._dbInfo.name];if(Ta&&Ta.dbReady)return Ta.dbReady});return oe(ya,fa,fa),ya}function jn(fa){qe(fa);for(var ka=_e[fa.name],ya=ka.forages,Ta=0;Ta<ya.length;Ta++){var Ba=ya[Ta];Ba._dbInfo.db&&(Ba._dbInfo.db.close(),Ba._dbInfo.db=null)}return fa.db=null,Sn(fa).then(function(Ea){return fa.db=Ea,Vn(fa)?hn(fa):Ea}).then(function(Ea){fa.db=ka.db=Ea;for(var La=0;La<ya.length;La++)ya[La]._dbInfo.db=Ea}).catch(function(Ea){throw _n(fa,Ea),Ea})}function Fn(fa,ka,ya,Ta){Ta===void 0&&(Ta=1);try{var Ba=fa.db.transaction(fa.storeName,ka);ya(null,Ba)}catch(Ea){if(Ta>0&&(!fa.db||Ea.name==="InvalidStateError"||Ea.name==="NotFoundError"))return ae.resolve().then(function(){if(!fa.db||Ea.name==="NotFoundError"&&!fa.db.objectStoreNames.contains(fa.storeName)&&fa.version<=fa.db.version)return fa.db&&(fa.version=fa.db.version+1),hn(fa)}).then(function(){return jn(fa).then(function(){Fn(fa,ka,ya,Ta-1)})}).catch(ya);ya(Ea)}}function Tn(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Hn(fa){var ka=this,ya={db:null};if(fa)for(var Ta in fa)ya[Ta]=fa[Ta];var Ba=_e[ya.name];Ba||(Ba=Tn(),_e[ya.name]=Ba),Ba.forages.push(ka),ka._initReady||(ka._initReady=ka.ready,ka.ready=kn);var Ea=[];function La(){return ae.resolve()}for(var Ga=0;Ga<Ba.forages.length;Ga++){var ja=Ba.forages[Ga];ja!==ka&&Ea.push(ja._initReady().catch(La))}var Ha=Ba.forages.slice(0);return ae.all(Ea).then(function(){return ya.db=Ba.db,Sn(ya)}).then(function(qa){return ya.db=qa,Vn(ya,ka._defaultConfig.version)?hn(ya):qa}).then(function(qa){ya.db=Ba.db=qa,ka._dbInfo=ya;for(var ar=0;ar<Ha.length;ar++){var dr=Ha[ar];dr!==ka&&(dr._dbInfo.db=ya.db,dr._dbInfo.version=ya.version)}})}function la(fa,ka){var ya=this;fa=ue(fa);var Ta=new ae(function(Ba,Ea){ya.ready().then(function(){Fn(ya._dbInfo,Ne,function(La,Ga){if(La)return Ea(La);try{var ja=Ga.objectStore(ya._dbInfo.storeName),Ha=ja.get(fa);Ha.onsuccess=function(){var qa=Ha.result;qa===void 0&&(qa=null),Nn(qa)&&(qa=$n(qa)),Ba(qa)},Ha.onerror=function(){Ea(Ha.error)}}catch(qa){Ea(qa)}})}).catch(Ea)});return re(Ta,ka),Ta}function ca(fa,ka){var ya=this,Ta=new ae(function(Ba,Ea){ya.ready().then(function(){Fn(ya._dbInfo,Ne,function(La,Ga){if(La)return Ea(La);try{var ja=Ga.objectStore(ya._dbInfo.storeName),Ha=ja.openCursor(),qa=1;Ha.onsuccess=function(){var ar=Ha.result;if(ar){var dr=ar.value;Nn(dr)&&(dr=$n(dr));var nr=fa(dr,ar.key,qa++);nr!==void 0?Ba(nr):ar.continue()}else Ba()},Ha.onerror=function(){Ea(Ha.error)}}catch(ar){Ea(ar)}})}).catch(Ea)});return re(Ta,ka),Ta}function Zn(fa,ka,ya){var Ta=this;fa=ue(fa);var Ba=new ae(function(Ea,La){var Ga;Ta.ready().then(function(){return Ga=Ta._dbInfo,Ce.call(ka)==="[object Blob]"?ze(Ga.db).then(function(ja){return ja?ka:Mn(ka)}):ka}).then(function(ja){Fn(Ta._dbInfo,$e,function(Ha,qa){if(Ha)return La(Ha);try{var ar=qa.objectStore(Ta._dbInfo.storeName);ja===null&&(ja=void 0);var dr=ar.put(ja,fa);qa.oncomplete=function(){ja===void 0&&(ja=null),Ea(ja)},qa.onabort=qa.onerror=function(){var nr=dr.error?dr.error:dr.transaction.error;La(nr)}}catch(nr){La(nr)}})}).catch(La)});return re(Ba,ya),Ba}function Bn(fa,ka){var ya=this;fa=ue(fa);var Ta=new ae(function(Ba,Ea){ya.ready().then(function(){Fn(ya._dbInfo,$e,function(La,Ga){if(La)return Ea(La);try{var ja=Ga.objectStore(ya._dbInfo.storeName),Ha=ja.delete(fa);Ga.oncomplete=function(){Ba()},Ga.onerror=function(){Ea(Ha.error)},Ga.onabort=function(){var qa=Ha.error?Ha.error:Ha.transaction.error;Ea(qa)}}catch(qa){Ea(qa)}})}).catch(Ea)});return re(Ta,ka),Ta}function Wn(fa){var ka=this,ya=new ae(function(Ta,Ba){ka.ready().then(function(){Fn(ka._dbInfo,$e,function(Ea,La){if(Ea)return Ba(Ea);try{var Ga=La.objectStore(ka._dbInfo.storeName),ja=Ga.clear();La.oncomplete=function(){Ta()},La.onabort=La.onerror=function(){var Ha=ja.error?ja.error:ja.transaction.error;Ba(Ha)}}catch(Ha){Ba(Ha)}})}).catch(Ba)});return re(ya,fa),ya}function da(fa){var ka=this,ya=new ae(function(Ta,Ba){ka.ready().then(function(){Fn(ka._dbInfo,Ne,function(Ea,La){if(Ea)return Ba(Ea);try{var Ga=La.objectStore(ka._dbInfo.storeName),ja=Ga.count();ja.onsuccess=function(){Ta(ja.result)},ja.onerror=function(){Ba(ja.error)}}catch(Ha){Ba(Ha)}})}).catch(Ba)});return re(ya,fa),ya}function ga(fa,ka){var ya=this,Ta=new ae(function(Ba,Ea){if(fa<0){Ba(null);return}ya.ready().then(function(){Fn(ya._dbInfo,Ne,function(La,Ga){if(La)return Ea(La);try{var ja=Ga.objectStore(ya._dbInfo.storeName),Ha=!1,qa=ja.openKeyCursor();qa.onsuccess=function(){var ar=qa.result;if(!ar){Ba(null);return}fa===0||Ha?Ba(ar.key):(Ha=!0,ar.advance(fa))},qa.onerror=function(){Ea(qa.error)}}catch(ar){Ea(ar)}})}).catch(Ea)});return re(Ta,ka),Ta}function Ca(fa){var ka=this,ya=new ae(function(Ta,Ba){ka.ready().then(function(){Fn(ka._dbInfo,Ne,function(Ea,La){if(Ea)return Ba(Ea);try{var Ga=La.objectStore(ka._dbInfo.storeName),ja=Ga.openKeyCursor(),Ha=[];ja.onsuccess=function(){var qa=ja.result;if(!qa){Ta(Ha);return}Ha.push(qa.key),qa.continue()},ja.onerror=function(){Ba(ja.error)}}catch(qa){Ba(qa)}})}).catch(Ba)});return re(ya,fa),ya}function ra(fa,ka){ka=le.apply(this,arguments);var ya=this.config();fa=typeof fa!="function"&&fa||{},fa.name||(fa.name=fa.name||ya.name,fa.storeName=fa.storeName||ya.storeName);var Ta=this,Ba;if(!fa.name)Ba=ae.reject("Invalid arguments");else{var Ea=fa.name===ya.name&&Ta._dbInfo.db,La=Ea?ae.resolve(Ta._dbInfo.db):Sn(fa).then(function(Ga){var ja=_e[fa.name],Ha=ja.forages;ja.db=Ga;for(var qa=0;qa<Ha.length;qa++)Ha[qa]._dbInfo.db=Ga;return Ga});fa.storeName?Ba=La.then(function(Ga){if(Ga.objectStoreNames.contains(fa.storeName)){var ja=Ga.version+1;qe(fa);var Ha=_e[fa.name],qa=Ha.forages;Ga.close();for(var ar=0;ar<qa.length;ar++){var dr=qa[ar];dr._dbInfo.db=null,dr._dbInfo.version=ja}var nr=new ae(function(gr,wr){var xr=L.open(fa.name,ja);xr.onerror=function(Er){var Mr=xr.result;Mr.close(),wr(Er)},xr.onupgradeneeded=function(){var Er=xr.result;Er.deleteObjectStore(fa.storeName)},xr.onsuccess=function(){var Er=xr.result;Er.close(),gr(Er)}});return nr.then(function(gr){Ha.db=gr;for(var wr=0;wr<qa.length;wr++){var xr=qa[wr];xr._dbInfo.db=gr,Et(xr._dbInfo)}}).catch(function(gr){throw(_n(fa,gr)||ae.resolve()).catch(function(){}),gr})}}):Ba=La.then(function(Ga){qe(fa);var ja=_e[fa.name],Ha=ja.forages;Ga.close();for(var qa=0;qa<Ha.length;qa++){var ar=Ha[qa];ar._dbInfo.db=null}var dr=new ae(function(nr,gr){var wr=L.deleteDatabase(fa.name);wr.onerror=function(){var xr=wr.result;xr&&xr.close(),gr(wr.error)},wr.onblocked=function(){console.warn('dropInstance blocked for database "'+fa.name+'" until all open connections are closed')},wr.onsuccess=function(){var xr=wr.result;xr&&xr.close(),nr(xr)}});return dr.then(function(nr){ja.db=nr;for(var gr=0;gr<Ha.length;gr++){var wr=Ha[gr];Et(wr._dbInfo)}}).catch(function(nr){throw(_n(fa,nr)||ae.resolve()).catch(function(){}),nr})})}return re(Ba,ka),Ba}var Gn={_driver:"asyncStorage",_initStorage:Hn,_support:z(),iterate:ca,getItem:la,setItem:Zn,removeItem:Bn,clear:Wn,length:da,key:ga,keys:Ca,dropInstance:ra};function vn(){return typeof openDatabase=="function"}var Kn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",En="~~local_forage_type~",kt=/^~~local_forage_type~([^~]+)~/,At="__lfsc__:",Dn=At.length,Xn="arbf",aa="blob",sa="si08",ia="ui08",ma="uic8",ua="si16",pe="si32",Oe="ur16",Ve="ui32",Ue="fl32",Pt="fl64",Lt=Dn+Xn.length,bn=Object.prototype.toString;function jt(fa){var ka=fa.length*.75,ya=fa.length,Ta,Ba=0,Ea,La,Ga,ja;fa[fa.length-1]==="="&&(ka--,fa[fa.length-2]==="="&&ka--);var Ha=new ArrayBuffer(ka),qa=new Uint8Array(Ha);for(Ta=0;Ta<ya;Ta+=4)Ea=Kn.indexOf(fa[Ta]),La=Kn.indexOf(fa[Ta+1]),Ga=Kn.indexOf(fa[Ta+2]),ja=Kn.indexOf(fa[Ta+3]),qa[Ba++]=Ea<<2|La>>4,qa[Ba++]=(La&15)<<4|Ga>>2,qa[Ba++]=(Ga&3)<<6|ja&63;return Ha}function Cn(fa){var ka=new Uint8Array(fa),ya="",Ta;for(Ta=0;Ta<ka.length;Ta+=3)ya+=Kn[ka[Ta]>>2],ya+=Kn[(ka[Ta]&3)<<4|ka[Ta+1]>>4],ya+=Kn[(ka[Ta+1]&15)<<2|ka[Ta+2]>>6],ya+=Kn[ka[Ta+2]&63];return ka.length%3===2?ya=ya.substring(0,ya.length-1)+"=":ka.length%3===1&&(ya=ya.substring(0,ya.length-2)+"=="),ya}function xn(fa,ka){var ya="";if(fa&&(ya=bn.call(fa)),fa&&(ya==="[object ArrayBuffer]"||fa.buffer&&bn.call(fa.buffer)==="[object ArrayBuffer]")){var Ta,Ba=At;fa instanceof ArrayBuffer?(Ta=fa,Ba+=Xn):(Ta=fa.buffer,ya==="[object Int8Array]"?Ba+=sa:ya==="[object Uint8Array]"?Ba+=ia:ya==="[object Uint8ClampedArray]"?Ba+=ma:ya==="[object Int16Array]"?Ba+=ua:ya==="[object Uint16Array]"?Ba+=Oe:ya==="[object Int32Array]"?Ba+=pe:ya==="[object Uint32Array]"?Ba+=Ve:ya==="[object Float32Array]"?Ba+=Ue:ya==="[object Float64Array]"?Ba+=Pt:ka(new Error("Failed to get type for BinaryArray"))),ka(Ba+Cn(Ta))}else if(ya==="[object Blob]"){var Ea=new FileReader;Ea.onload=function(){var La=En+fa.type+"~"+Cn(this.result);ka(At+aa+La)},Ea.readAsArrayBuffer(fa)}else try{ka(JSON.stringify(fa))}catch(La){console.error("Couldn't convert value into a JSON string: ",fa),ka(null,La)}}function In(fa){if(fa.substring(0,Dn)!==At)return JSON.parse(fa);var ka=fa.substring(Lt),ya=fa.substring(Dn,Lt),Ta;if(ya===aa&&kt.test(ka)){var Ba=ka.match(kt);Ta=Ba[1],ka=ka.substring(Ba[0].length)}var Ea=jt(ka);switch(ya){case Xn:return Ea;case aa:return j([Ea],{type:Ta});case sa:return new Int8Array(Ea);case ia:return new Uint8Array(Ea);case ma:return new Uint8ClampedArray(Ea);case ua:return new Int16Array(Ea);case Oe:return new Uint16Array(Ea);case pe:return new Int32Array(Ea);case Ve:return new Uint32Array(Ea);case Ue:return new Float32Array(Ea);case Pt:return new Float64Array(Ea);default:throw new Error("Unkown type: "+ya)}}var Ln={serialize:xn,deserialize:In,stringToBuffer:jt,bufferToString:Cn};function An(fa,ka,ya,Ta){fa.executeSql("CREATE TABLE IF NOT EXISTS "+ka.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ya,Ta)}function zn(fa){var ka=this,ya={db:null};if(fa)for(var Ta in fa)ya[Ta]=typeof fa[Ta]!="string"?fa[Ta].toString():fa[Ta];var Ba=new ae(function(Ea,La){try{ya.db=openDatabase(ya.name,String(ya.version),ya.description,ya.size)}catch(Ga){return La(Ga)}ya.db.transaction(function(Ga){An(Ga,ya,function(){ka._dbInfo=ya,Ea()},function(ja,Ha){La(Ha)})},La)});return ya.serializer=Ln,Ba}function Jn(fa,ka,ya,Ta,Ba,Ea){fa.executeSql(ya,Ta,Ba,function(La,Ga){Ga.code===Ga.SYNTAX_ERR?La.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[ka.storeName],function(ja,Ha){Ha.rows.length?Ea(ja,Ga):An(ja,ka,function(){ja.executeSql(ya,Ta,Ba,Ea)},Ea)},Ea):Ea(La,Ga)},Ea)}function Qn(fa,ka){var ya=this;fa=ue(fa);var Ta=new ae(function(Ba,Ea){ya.ready().then(function(){var La=ya._dbInfo;La.db.transaction(function(Ga){Jn(Ga,La,"SELECT * FROM "+La.storeName+" WHERE key = ? LIMIT 1",[fa],function(ja,Ha){var qa=Ha.rows.length?Ha.rows.item(0).value:null;qa&&(qa=La.serializer.deserialize(qa)),Ba(qa)},function(ja,Ha){Ea(Ha)})})}).catch(Ea)});return re(Ta,ka),Ta}function ta(fa,ka){var ya=this,Ta=new ae(function(Ba,Ea){ya.ready().then(function(){var La=ya._dbInfo;La.db.transaction(function(Ga){Jn(Ga,La,"SELECT * FROM "+La.storeName,[],function(ja,Ha){for(var qa=Ha.rows,ar=qa.length,dr=0;dr<ar;dr++){var nr=qa.item(dr),gr=nr.value;if(gr&&(gr=La.serializer.deserialize(gr)),gr=fa(gr,nr.key,dr+1),gr!==void 0){Ba(gr);return}}Ba()},function(ja,Ha){Ea(Ha)})})}).catch(Ea)});return re(Ta,ka),Ta}function Pn(fa,ka,ya,Ta){var Ba=this;fa=ue(fa);var Ea=new ae(function(La,Ga){Ba.ready().then(function(){ka===void 0&&(ka=null);var ja=ka,Ha=Ba._dbInfo;Ha.serializer.serialize(ka,function(qa,ar){ar?Ga(ar):Ha.db.transaction(function(dr){Jn(dr,Ha,"INSERT OR REPLACE INTO "+Ha.storeName+" (key, value) VALUES (?, ?)",[fa,qa],function(){La(ja)},function(nr,gr){Ga(gr)})},function(dr){if(dr.code===dr.QUOTA_ERR){if(Ta>0){La(Pn.apply(Ba,[fa,ja,ya,Ta-1]));return}Ga(dr)}})})}).catch(Ga)});return re(Ea,ya),Ea}function Un(fa,ka,ya){return Pn.apply(this,[fa,ka,ya,1])}function On(fa,ka){var ya=this;fa=ue(fa);var Ta=new ae(function(Ba,Ea){ya.ready().then(function(){var La=ya._dbInfo;La.db.transaction(function(Ga){Jn(Ga,La,"DELETE FROM "+La.storeName+" WHERE key = ?",[fa],function(){Ba()},function(ja,Ha){Ea(Ha)})})}).catch(Ea)});return re(Ta,ka),Ta}function Rn(fa){var ka=this,ya=new ae(function(Ta,Ba){ka.ready().then(function(){var Ea=ka._dbInfo;Ea.db.transaction(function(La){Jn(La,Ea,"DELETE FROM "+Ea.storeName,[],function(){Ta()},function(Ga,ja){Ba(ja)})})}).catch(Ba)});return re(ya,fa),ya}function Yn(fa){var ka=this,ya=new ae(function(Ta,Ba){ka.ready().then(function(){var Ea=ka._dbInfo;Ea.db.transaction(function(La){Jn(La,Ea,"SELECT COUNT(key) as c FROM "+Ea.storeName,[],function(Ga,ja){var Ha=ja.rows.item(0).c;Ta(Ha)},function(Ga,ja){Ba(ja)})})}).catch(Ba)});return re(ya,fa),ya}function na(fa,ka){var ya=this,Ta=new ae(function(Ba,Ea){ya.ready().then(function(){var La=ya._dbInfo;La.db.transaction(function(Ga){Jn(Ga,La,"SELECT key FROM "+La.storeName+" WHERE id = ? LIMIT 1",[fa+1],function(ja,Ha){var qa=Ha.rows.length?Ha.rows.item(0).key:null;Ba(qa)},function(ja,Ha){Ea(Ha)})})}).catch(Ea)});return re(Ta,ka),Ta}function ea(fa){var ka=this,ya=new ae(function(Ta,Ba){ka.ready().then(function(){var Ea=ka._dbInfo;Ea.db.transaction(function(La){Jn(La,Ea,"SELECT key FROM "+Ea.storeName,[],function(Ga,ja){for(var Ha=[],qa=0;qa<ja.rows.length;qa++)Ha.push(ja.rows.item(qa).key);Ta(Ha)},function(Ga,ja){Ba(ja)})})}).catch(Ba)});return re(ya,fa),ya}function pa(fa){return new ae(function(ka,ya){fa.transaction(function(Ta){Ta.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Ba,Ea){for(var La=[],Ga=0;Ga<Ea.rows.length;Ga++)La.push(Ea.rows.item(Ga).name);ka({db:fa,storeNames:La})},function(Ba,Ea){ya(Ea)})},function(Ta){ya(Ta)})})}function ha(fa,ka){ka=le.apply(this,arguments);var ya=this.config();fa=typeof fa!="function"&&fa||{},fa.name||(fa.name=fa.name||ya.name,fa.storeName=fa.storeName||ya.storeName);var Ta=this,Ba;return fa.name?Ba=new ae(function(Ea){var La;fa.name===ya.name?La=Ta._dbInfo.db:La=openDatabase(fa.name,"","",0),fa.storeName?Ea({db:La,storeNames:[fa.storeName]}):Ea(pa(La))}).then(function(Ea){return new ae(function(La,Ga){Ea.db.transaction(function(ja){function Ha(nr){return new ae(function(gr,wr){ja.executeSql("DROP TABLE IF EXISTS "+nr,[],function(){gr()},function(xr,Er){wr(Er)})})}for(var qa=[],ar=0,dr=Ea.storeNames.length;ar<dr;ar++)qa.push(Ha(Ea.storeNames[ar]));ae.all(qa).then(function(){La()}).catch(function(nr){Ga(nr)})},function(ja){Ga(ja)})})}):Ba=ae.reject("Invalid arguments"),re(Ba,ka),Ba}var ba={_driver:"webSQLStorage",_initStorage:zn,_support:vn(),iterate:ta,getItem:Qn,setItem:Un,removeItem:On,clear:Rn,length:Yn,key:na,keys:ea,dropInstance:ha};function Oa(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function va(fa,ka){var ya=fa.name+"/";return fa.storeName!==ka.storeName&&(ya+=fa.storeName+"/"),ya}function Sa(){var fa="_localforage_support_test";try{return localStorage.setItem(fa,!0),localStorage.removeItem(fa),!1}catch{return!0}}function $a(){return!Sa()||localStorage.length>0}function Da(fa){var ka=this,ya={};if(fa)for(var Ta in fa)ya[Ta]=fa[Ta];return ya.keyPrefix=va(fa,ka._defaultConfig),$a()?(ka._dbInfo=ya,ya.serializer=Ln,ae.resolve()):ae.reject()}function Na(fa){var ka=this,ya=ka.ready().then(function(){for(var Ta=ka._dbInfo.keyPrefix,Ba=localStorage.length-1;Ba>=0;Ba--){var Ea=localStorage.key(Ba);Ea.indexOf(Ta)===0&&localStorage.removeItem(Ea)}});return re(ya,fa),ya}function Va(fa,ka){var ya=this;fa=ue(fa);var Ta=ya.ready().then(function(){var Ba=ya._dbInfo,Ea=localStorage.getItem(Ba.keyPrefix+fa);return Ea&&(Ea=Ba.serializer.deserialize(Ea)),Ea});return re(Ta,ka),Ta}function Ua(fa,ka){var ya=this,Ta=ya.ready().then(function(){for(var Ba=ya._dbInfo,Ea=Ba.keyPrefix,La=Ea.length,Ga=localStorage.length,ja=1,Ha=0;Ha<Ga;Ha++){var qa=localStorage.key(Ha);if(qa.indexOf(Ea)===0){var ar=localStorage.getItem(qa);if(ar&&(ar=Ba.serializer.deserialize(ar)),ar=fa(ar,qa.substring(La),ja++),ar!==void 0)return ar}}});return re(Ta,ka),Ta}function Wa(fa,ka){var ya=this,Ta=ya.ready().then(function(){var Ba=ya._dbInfo,Ea;try{Ea=localStorage.key(fa)}catch{Ea=null}return Ea&&(Ea=Ea.substring(Ba.keyPrefix.length)),Ea});return re(Ta,ka),Ta}function Qa(fa){var ka=this,ya=ka.ready().then(function(){for(var Ta=ka._dbInfo,Ba=localStorage.length,Ea=[],La=0;La<Ba;La++){var Ga=localStorage.key(La);Ga.indexOf(Ta.keyPrefix)===0&&Ea.push(Ga.substring(Ta.keyPrefix.length))}return Ea});return re(ya,fa),ya}function Ja(fa){var ka=this,ya=ka.keys().then(function(Ta){return Ta.length});return re(ya,fa),ya}function Ra(fa,ka){var ya=this;fa=ue(fa);var Ta=ya.ready().then(function(){var Ba=ya._dbInfo;localStorage.removeItem(Ba.keyPrefix+fa)});return re(Ta,ka),Ta}function Fa(fa,ka,ya){var Ta=this;fa=ue(fa);var Ba=Ta.ready().then(function(){ka===void 0&&(ka=null);var Ea=ka;return new ae(function(La,Ga){var ja=Ta._dbInfo;ja.serializer.serialize(ka,function(Ha,qa){if(qa)Ga(qa);else try{localStorage.setItem(ja.keyPrefix+fa,Ha),La(Ea)}catch(ar){(ar.name==="QuotaExceededError"||ar.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ga(ar),Ga(ar)}})})});return re(Ba,ya),Ba}function Xa(fa,ka){if(ka=le.apply(this,arguments),fa=typeof fa!="function"&&fa||{},!fa.name){var ya=this.config();fa.name=fa.name||ya.name,fa.storeName=fa.storeName||ya.storeName}var Ta=this,Ba;return fa.name?Ba=new ae(function(Ea){fa.storeName?Ea(va(fa,Ta._defaultConfig)):Ea(fa.name+"/")}).then(function(Ea){for(var La=localStorage.length-1;La>=0;La--){var Ga=localStorage.key(La);Ga.indexOf(Ea)===0&&localStorage.removeItem(Ga)}}):Ba=ae.reject("Invalid arguments"),re(Ba,ka),Ba}var tr={_driver:"localStorageWrapper",_initStorage:Da,_support:Oa(),iterate:Ua,getItem:Va,setItem:Fa,removeItem:Ra,clear:Na,length:Ja,key:Wa,keys:Qa,dropInstance:Xa},er=function(ka,ya){return ka===ya||typeof ka=="number"&&typeof ya=="number"&&isNaN(ka)&&isNaN(ya)},or=function(ka,ya){for(var Ta=ka.length,Ba=0;Ba<Ta;){if(er(ka[Ba],ya))return!0;Ba++}return!1},rr=Array.isArray||function(fa){return Object.prototype.toString.call(fa)==="[object Array]"},sr={},cr={},ir={INDEXEDDB:Gn,WEBSQL:ba,LOCALSTORAGE:tr},Ka=[ir.INDEXEDDB._driver,ir.WEBSQL._driver,ir.LOCALSTORAGE._driver],vr=["dropInstance"],kr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(vr),Sr={description:"",driver:Ka.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function _r(fa,ka){fa[ka]=function(){var ya=arguments;return fa.ready().then(function(){return fa[ka].apply(fa,ya)})}}function Cr(){for(var fa=1;fa<arguments.length;fa++){var ka=arguments[fa];if(ka)for(var ya in ka)ka.hasOwnProperty(ya)&&(rr(ka[ya])?arguments[0][ya]=ka[ya].slice():arguments[0][ya]=ka[ya])}return arguments[0]}var Dr=function(){function fa(ka){$(this,fa);for(var ya in ir)if(ir.hasOwnProperty(ya)){var Ta=ir[ya],Ba=Ta._driver;this[ya]=Ba,sr[Ba]||this.defineDriver(Ta)}this._defaultConfig=Cr({},Sr),this._config=Cr({},this._defaultConfig,ka),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return fa.prototype.config=function(ya){if((typeof ya>"u"?"undefined":k(ya))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var Ta in ya){if(Ta==="storeName"&&(ya[Ta]=ya[Ta].replace(/\W/g,"_")),Ta==="version"&&typeof ya[Ta]!="number")return new Error("Database version must be a number.");this._config[Ta]=ya[Ta]}return"driver"in ya&&ya.driver?this.setDriver(this._config.driver):!0}else return typeof ya=="string"?this._config[ya]:this._config},fa.prototype.defineDriver=function(ya,Ta,Ba){var Ea=new ae(function(La,Ga){try{var ja=ya._driver,Ha=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ya._driver){Ga(Ha);return}for(var qa=kr.concat("_initStorage"),ar=0,dr=qa.length;ar<dr;ar++){var nr=qa[ar],gr=!or(vr,nr);if((gr||ya[nr])&&typeof ya[nr]!="function"){Ga(Ha);return}}var wr=function(){for(var Mr=function(qn){return function(){var oa=new Error("Method "+qn+" is not implemented by the current driver"),xa=ae.reject(oa);return re(xa,arguments[arguments.length-1]),xa}},Rr=0,Ar=vr.length;Rr<Ar;Rr++){var Fe=vr[Rr];ya[Fe]||(ya[Fe]=Mr(Fe))}};wr();var xr=function(Mr){sr[ja]&&console.info("Redefining LocalForage driver: "+ja),sr[ja]=ya,cr[ja]=Mr,La()};"_support"in ya?ya._support&&typeof ya._support=="function"?ya._support().then(xr,Ga):xr(!!ya._support):xr(!0)}catch(Er){Ga(Er)}});return oe(Ea,Ta,Ba),Ea},fa.prototype.driver=function(){return this._driver||null},fa.prototype.getDriver=function(ya,Ta,Ba){var Ea=sr[ya]?ae.resolve(sr[ya]):ae.reject(new Error("Driver not found."));return oe(Ea,Ta,Ba),Ea},fa.prototype.getSerializer=function(ya){var Ta=ae.resolve(Ln);return oe(Ta,ya),Ta},fa.prototype.ready=function(ya){var Ta=this,Ba=Ta._driverSet.then(function(){return Ta._ready===null&&(Ta._ready=Ta._initDriver()),Ta._ready});return oe(Ba,ya,ya),Ba},fa.prototype.setDriver=function(ya,Ta,Ba){var Ea=this;rr(ya)||(ya=[ya]);var La=this._getSupportedDrivers(ya);function Ga(){Ea._config.driver=Ea.driver()}function ja(ar){return Ea._extend(ar),Ga(),Ea._ready=Ea._initStorage(Ea._config),Ea._ready}function Ha(ar){return function(){var dr=0;function nr(){for(;dr<ar.length;){var gr=ar[dr];return dr++,Ea._dbInfo=null,Ea._ready=null,Ea.getDriver(gr).then(ja).catch(nr)}Ga();var wr=new Error("No available storage method found.");return Ea._driverSet=ae.reject(wr),Ea._driverSet}return nr()}}var qa=this._driverSet!==null?this._driverSet.catch(function(){return ae.resolve()}):ae.resolve();return this._driverSet=qa.then(function(){var ar=La[0];return Ea._dbInfo=null,Ea._ready=null,Ea.getDriver(ar).then(function(dr){Ea._driver=dr._driver,Ga(),Ea._wrapLibraryMethodsWithReady(),Ea._initDriver=Ha(La)})}).catch(function(){Ga();var ar=new Error("No available storage method found.");return Ea._driverSet=ae.reject(ar),Ea._driverSet}),oe(this._driverSet,Ta,Ba),this._driverSet},fa.prototype.supports=function(ya){return!!cr[ya]},fa.prototype._extend=function(ya){Cr(this,ya)},fa.prototype._getSupportedDrivers=function(ya){for(var Ta=[],Ba=0,Ea=ya.length;Ba<Ea;Ba++){var La=ya[Ba];this.supports(La)&&Ta.push(La)}return Ta},fa.prototype._wrapLibraryMethodsWithReady=function(){for(var ya=0,Ta=kr.length;ya<Ta;ya++)_r(this,kr[ya])},fa.prototype.createInstance=function(ya){return new fa(ya)},fa}(),Or=new Dr;g.exports=Or},{3:3}]},{},[4])(4)})})(localforage);var localforageExports=localforage.exports;const localForage=getDefaultExportFromCjs(localforageExports),isNearPoint=(e,n,r,g,y)=>distance$g(e,n,r,g)<=y,distance$g=(e,n,r,g)=>Math.sqrt((g-n)*(g-n)+(r-e)*(r-e)),leftTop=(e,n,r,g,y)=>distance$g(e,n,r,g)>4*y||distance$g(e,n,r,g)<2*y?!1:e<r&&n<g,leftBottom=(e,n,r,g,y)=>distance$g(e,n,r,g)>4*y||distance$g(e,n,r,g)<2*y?!1:e<r&&n>g,rightTop=(e,n,r,g,y)=>distance$g(e,n,r,g)>4*y||distance$g(e,n,r,g)<2*y?!1:e>r&&n<g,rightBottom=(e,n,r,g,y)=>distance$g(e,n,r,g)>4*y||distance$g(e,n,r,g)<2*y?!1:e>r&&n>g,angleBetween=(e,n)=>{const r=Math.atan(e.y/e.x),g=Math.atan(n.y/n.x);return Math.round((r-g)*180/Math.PI)},getBound$5=e=>{let n=1/0,r=1/0,g=-1/0,y=-1/0;for(let k=0;k<e.length;k++)e[k].x<n&&(n=e[k].x),e[k].x>g&&(g=e[k].x),e[k].y<r&&(r=e[k].y),e[k].y>y&&(y=e[k].y);return{x:n,y:r,w:g-n,h:y-r}},rotatePoint=(e,n,r)=>{const g=r*Math.PI/180;return{x:n.x+(e.x-n.x)*Math.cos(g)-(e.y-n.y)*Math.sin(g),y:n.y+(e.x-n.x)*Math.sin(g)+(e.y-n.y)*Math.cos(g)}},inComponentBound=(e,n,r=0)=>{const{x:g,y,w:k,h:$,rotation:V}=n,{x:L,y:z}=rotatePoint({x:e.x,y:e.y},{x:n.x+n.w/2,y:n.y+n.h/2},-V);return L>=g-r&&L<=g+k+r&&z>=y-r&&z<=y+$+r},transformPoints=(e,n)=>{const{x:r,y:g,w:y,h:k}=getBound$5(e),{x:$,y:V,w:L,h:z,rotation:j,flipX:ae,flipY:re}=n;return e.map(ue=>{let le=clone(ue);return ae&&(le.x=$+L/2+($+L/2-le.x)),re&&(le.y=V+z/2+(V+z/2-le.y)),le=rotatePoint(le,{x:r+y/2,y:g+k/2},j),le={x:le.x+($-r),y:le.y+(V-g)},le={x:$+(y?(le.x-$)*L/y:0),y:V+(k?(le.y-V)*z/k:0)},le})},getEllipsePoints=(e,n,r=1e3,g=0,y=0)=>{const k=[],$=[];for(let V=0;V<r/2;V++){const L=-e+e*2/(r/2)*V,z=Math.sqrt((1-L*L/(e*e))*n*n);k.push({x:g+L,y:y+z}),$.push({x:g+L,y:y-z})}return k.concat($.reverse())},getRectanglePoints=(e,n,r,g)=>[{x:r,y:g},{x:r+e,y:g},{x:r+e,y:g+n},{x:r,y:g+n}];let nanoid=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((n,r)=>(r&=63,r<36?n+=r.toString(36):r<62?n+=(r-26).toString(36).toUpperCase():r>62?n+="-":n+="_",n),""),lightIdCounter=0;const lightIdPrefix=Date.now().toString(36),genLightId=()=>(lightIdCounter++,`${lightIdPrefix}_${lightIdCounter.toString(36)}`),resetLightIdCounter=()=>{lightIdCounter=0},genUUID=()=>nanoid(),toUnicode=e=>e.charCodeAt(0).toString(16).padStart(4,"0"),toIconUnicode=e=>(41e3+e).toString(16);class ConstantsMap{constants;constructor(n){this.constants=n}update(n){this.constants=n}get(n){for(let r=0;r<this.constants.length;r++)if(this.constants[r].name===n)return this.constants[r].value}getByUUID(n){for(let r=0;r<this.constants.length;r++)if(this.constants[r].uuid===n)return this.constants[r].value}}ref(500);ref(500);ref(100);ref(100);reactive({img:null,left:240,right:320,top:155,bottom:290,delta:215,rotation:0});const picZoom=ref(100),step=ref(0),rThreshold=ref(128),gThreshold=ref(128),bThreshold=ref(128),localRThreshold=ref(128),localGThreshold=ref(128),localBThreshold=ref(128),localBrushSize=ref(10),localBrushX=ref(0),localBrushY=ref(0),maxError=ref(2),dropThreshold=ref(10),previewStatus=ref(0),listWidth=ref(0),editPanelDisplay=ref("edit");ref("pic");const editPanelCompFilter=ref("all"),glyphPanelCompFilter=ref("all");ref("all");var Status=(e=>(e[e.CharacterList=0]="CharacterList",e[e.GlyphList=1]="GlyphList",e[e.Edit=2]="Edit",e[e.Pic=3]="Pic",e[e.Glyph=4]="Glyph",e[e.SystemGlyphList=5]="SystemGlyphList",e[e.RadicalGlyphList=6]="RadicalGlyphList",e[e.CompGlyphList=7]="CompGlyphList",e[e.StrokeGlyphList=8]="StrokeGlyphList",e[e.AdvancedEdit=9]="AdvancedEdit",e))(Status||{});const prevStatus=ref(0),editStatus=ref(0),prevEditStatus=ref(2),coordsText=ref("0, 0"),enableLocalBrush=reactive({value:!1}),editCharacterPic=reactive({value:{data:"",img:null,thumbnailCanvas:null,thumbnailPixels:[],processPixels:[],width:0,height:0}}),contoursComponents=reactive({value:[]}),curvesComponents=reactive({value:[]}),bitmap=reactive({value:{data:[],width:0,height:0}}),setEnableLocalBrush=e=>{enableLocalBrush.value=e},setBitMap=e=>{bitmap.value=e},setEditCharacterPic=e=>{editCharacterPic.value=e},setEditPanelCompFilter=e=>{editPanelCompFilter.value=e},setGlyphPanelCompFilter=e=>{glyphPanelCompFilter.value=e},setPicZoom=e=>{picZoom.value=e},setEditStatus=e=>{editStatus.value=e},setPrevStatus=e=>{prevStatus.value=e},setStep=e=>{step.value=e},clearContoursComponent=()=>{contoursComponents.value=[]},clearCurvesComponent=()=>{curvesComponents.value=[]},addContoursComponent=e=>{contoursComponents.value.push(e)},addCurvesComponent=e=>{curvesComponents.value.push(e)},resetEditPic=()=>{editCharacterPic.value={data:"",img:null,thumbnailCanvas:null,thumbnailPixels:[],processPixels:[],width:0,height:0}},ratio=2,default_unitsPerEm=1e3,mapCanvasCoords=e=>({x:ratio*e.x,y:ratio*e.y}),mapCanvasX=e=>ratio*e,mapCanvasY=e=>ratio*e,mapCanvasWidth=e=>ratio*e,mapCanvasHeight=e=>ratio*e,getCoord=e=>editStatus.value===Status.Edit?e/width$1.value*selectedFile.value.width:editStatus.value===Status.Glyph?e/width$1.value*default_unitsPerEm:e,LIMIT16=32768,LIMIT32=2147483648,wmm=typeof WeakMap=="function"&&new WeakMap,encoder={uint8:e=>typeof e=="number"&&e>=0&&e<=255?[e]:!1,int8:e=>typeof e=="number"&&e>=-128&&e<=127?[e]:!1,uint16:e=>typeof e!="number"?!1:[e>>8&255,e&255],int16:e=>{if(typeof e!="number")return!1;let n=e;return n>=LIMIT16&&(n=-(2*LIMIT16-n)),[n>>8&255,n&255]},uint24:e=>typeof e!="number"?!1:[e>>16&255,e>>8&255,e&255],uint32:e=>typeof e!="number"?!1:[e>>24&255,e>>16&255,e>>8&255,e&255],int32:e=>{if(typeof e!="number")return!1;let n=e;return e>=LIMIT32&&(n=-(2*LIMIT32-e)),[n>>24&255,n>>16&255,n>>8&255,n&255]},Fixed:e=>typeof e!="number"?!1:[e>>24&255,e>>16&255,e>>8&255,e&255],FWORD:e=>typeof e!="number"?!1:encoder.int16(e),UFWORD:e=>typeof e!="number"?!1:encoder.uint16(e),F2DOT14:e=>{},LONGDATETIME:e=>typeof e!="number"?!1:[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,e&255],Tag:e=>e.length===4?[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]:e.tagStr&&e.tagStr.length===4?[e.tagStr.charCodeAt(0),e.tagStr.charCodeAt(1),e.tagStr.charCodeAt(2),e.tagStr.charCodeAt(3)]:!1,Offset16:e=>encoder.uint16(e),Offset24:e=>encoder.uint24(e),Offset32:e=>encoder.uint32(e),Version16Dot16:e=>encoder.Fixed(e),Card8:e=>encoder.uint8(e),Card16:e=>encoder.uint16(e),OffSize:e=>encoder.uint8(e),SID:e=>encoder.uint16(e),Name:e=>encoder.String(e),String:e=>{typeof e>"u"&&(e="");let n=[];for(let r=0;r<e.length;r+=1)n[r]=e.charCodeAt(r);return n},Operand:(e,n)=>{let r=[];if(Array.isArray(n))for(let g=0;g<n.length;g+=1)r=r.concat(encoder.Operand(e[g],n[g]));else if(n==="SID")r=r.concat(encoder.number(e));else if(n==="offset")r=r.concat(encoder.number32(e));else if(n==="number")r=r.concat(encoder.number(e));else if(n==="real")r=r.concat(encoder.real(e));else if(n==="Fixed")r=r.concat(encoder.Fixed(e));else if(n==="number16")r=r.concat(encoder.number16(e));else if(n==="number32")r=r.concat(encoder.number32(e));else throw new Error("Unknown operand type "+n);return r},number:e=>{let n=e;return n>=-107&&n<=107?[n+139]:n>=108&&n<=1131?(n=n-108,[(n>>8)+247,n&255]):n>=-1131&&n<=-108?(n=-n-108,[(n>>8)+251,n&255]):n>=-32768&&n<=32767?encoder.number16(n):encoder.number32(n)},number16:e=>typeof e!="number"?[]:[28,e>>8&255,e&255],number32:e=>typeof e!="number"?[]:[29,e>>24&255,e>>16&255,e>>8&255,e&255],real:e=>{let n=e.toString();const r=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(n);if(r){const k=parseFloat("1e"+((r[2]?+r[2]:0)+r[1].length));n=(Math.round(e*k)/k).toString()}let g="";for(let k=0,$=n.length;k<$;k+=1){const V=n[k];V==="e"?g+=n[++k]==="-"?"c":"b":V==="."?g+="a":V==="-"?g+="e":g+=V}g+=g.length&1?"f":"ff";const y=[30];for(let k=0,$=g.length;k<$;k+=2)y.push(parseInt(g.substr(k,2),16));return y},CharString:e=>{if(wmm){const g=wmm.get(e);if(g!==void 0)return g}let n=[];const r=e.length;for(let g=0;g<r;g+=1){const y=e[g];n=n.concat(encoder[y.type](y.value))}return wmm&&wmm.set(e,n),n},Operator:e=>typeof e!="number"?[]:e<1200?[e]:[12,e-1200],op:e=>encoder.uint8(e),raw:e=>e,utf16:e=>{const n=[];for(let r=0;r<e.length;r+=1){const g=e.charCodeAt(r);n[n.length]=g>>8&255,n[n.length]=g&255}return n}},setByesAt=(e,n,r)=>{for(let g=0;g<n.length;g++)e[r+g]=n[g];return e};let data,offset;const start=(e,n)=>{data=e,offset=n},end$1=()=>{data=new DataView(new ArrayBuffer(0)),offset=0},getOffset=()=>offset,setOffset=e=>{offset=e},decoder={uint8:()=>{const e=data.getUint8(offset);return offset+=1,e},int8:()=>{const e=data.getInt8(offset);return offset+=1,e},uint16:()=>{const e=data.getUint16(offset);return offset+=2,e},int16:()=>{const e=data.getInt16(offset);return offset+=2,e},uint24:()=>{const e=data.getUint8(offset),n=data.getUint8(offset+1),r=data.getUint8(offset+2),g=e<<16|n<<8|r;return offset+=3,g},uint32:()=>{const e=data.getUint32(offset);return offset+=4,e},int32:()=>{const e=data.getInt32(offset);return offset+=4,e},bigInt:()=>{const e=data.getBigInt64(offset);return offset+=8,e},Fixed:()=>decoder.int32(),FWORD:()=>decoder.int16(),UFWORD:()=>decoder.uint16(),F2DOT14:()=>{const e=data.getInt16(offset)/16384;return offset+=2,e},LONGDATETIME:()=>{const e=Number(data.getBigInt64(offset));return offset+=8,e},Tag:()=>{const e=[];let n="";for(let r=0;r<4;r++)e.push(data.getUint8(offset+r)),n+=String.fromCharCode(e[r]);return offset+=4,{tagArr:e,tagStr:n}},Offset16:()=>decoder.uint16(),Offset32:()=>decoder.uint32(),Version16Dot16:()=>{const e=data.getUint16(offset),n=data.getUint16(offset+2);return offset+=4,e+n/4096/10},Card8:()=>decoder.uint8(),Card16:()=>decoder.uint16(),OffSize:()=>decoder.uint8(),SID:()=>decoder.uint16()},types$a={version:"uint16",xAvgCharWidth:"int16",usWeightClass:"uint16",usWidthClass:"uint16",fsType:"uint16",ySubscriptXSize:"int16",ySubscriptYSize:"int16",ySubscriptXOffset:"int16",ySubscriptYOffset:"int16",ySuperscriptXSize:"int16",ySuperscriptYSize:"int16",ySuperscriptXOffset:"int16",ySuperscriptYOffset:"int16",yStrikeoutSize:"int16",yStrikeoutPosition:"int16",sFamilyClass:"int16",panose:"uint8",ulUnicodeRange1:"uint32",ulUnicodeRange2:"uint32",ulUnicodeRange3:"uint32",ulUnicodeRange4:"uint32",achVendID:"Tag",fsSelection:"uint16",usFirstCharIndex:"uint16",usLastCharIndex:"uint16",sTypoAscender:"int16",sTypoDescender:"int16",sTypoLineGap:"int16",usWinAscent:"uint16",usWinDescent:"uint16",ulCodePageRange1:"uint32",ulCodePageRange2:"uint32",sxHeight:"int16",sCapHeight:"int16",usDefaultChar:"uint16",usBreakChar:"uint16",usMaxContext:"uint16",usLowerOpticalPointSize:"uint16",usUpperOpticalPointSize:"uint16"},parse$g=(e,n,r)=>{start(e,n);const g=decoder[types$a.version](),y=decoder[types$a.xAvgCharWidth](),k=decoder[types$a.usWeightClass](),$=decoder[types$a.usWidthClass](),V=decoder[types$a.fsType](),L=decoder[types$a.ySubscriptXSize](),z=decoder[types$a.ySubscriptYSize](),j=decoder[types$a.ySubscriptXOffset](),ae=decoder[types$a.ySubscriptYOffset](),re=decoder[types$a.ySuperscriptXSize](),oe=decoder[types$a.ySuperscriptYSize](),ue=decoder[types$a.ySuperscriptXOffset](),le=decoder[types$a.ySuperscriptYOffset](),de=decoder[types$a.yStrikeoutSize](),he=decoder[types$a.yStrikeoutPosition](),_e=decoder[types$a.sFamilyClass](),Ce=[];for(let Nn=0;Nn<10;Nn++)Ce[Nn]=decoder[types$a.panose]();const Ne=decoder[types$a.ulUnicodeRange1](),$e=decoder[types$a.ulUnicodeRange2](),xe=decoder[types$a.ulUnicodeRange3](),Ie=decoder[types$a.ulUnicodeRange4](),ze=decoder[types$a.achVendID](),qe=decoder[types$a.fsSelection](),Et=decoder[types$a.usFirstCharIndex](),_n=decoder[types$a.usLastCharIndex](),Dt=decoder[types$a.sTypoAscender](),Sn=decoder[types$a.sTypoDescender](),hn=decoder[types$a.sTypoLineGap](),Vn=decoder[types$a.usWinAscent](),Mn=decoder[types$a.usWinDescent](),$n={version:g,xAvgCharWidth:y,usWeightClass:k,usWidthClass:$,fsType:V,ySubscriptXSize:L,ySubscriptYSize:z,ySubscriptXOffset:j,ySubscriptYOffset:ae,ySuperscriptXSize:re,ySuperscriptYSize:oe,ySuperscriptXOffset:ue,ySuperscriptYOffset:le,yStrikeoutSize:de,yStrikeoutPosition:he,sFamilyClass:_e,panose:Ce,ulUnicodeRange1:Ne,ulUnicodeRange2:$e,ulUnicodeRange3:xe,ulUnicodeRange4:Ie,achVendID:ze,fsSelection:qe,usFirstCharIndex:Et,usLastCharIndex:_n,sTypoAscender:Dt,sTypoDescender:Sn,sTypoLineGap:hn,usWinAscent:Vn,usWinDescent:Mn};return g>=1&&($n.ulCodePageRange1=decoder[types$a.ulCodePageRange1](),$n.ulCodePageRange2=decoder[types$a.ulCodePageRange2]()),g>=2&&($n.sxHeight=decoder[types$a.sxHeight](),$n.sCapHeight=decoder[types$a.sCapHeight](),$n.usDefaultChar=decoder[types$a.usDefaultChar](),$n.usBreakChar=decoder[types$a.usBreakChar](),$n.usMaxContext=decoder[types$a.usMaxContext]()),g>=5&&($n.usLowerOpticalPointSize=decoder[types$a.usLowerOpticalPointSize](),$n.usUpperOpticalPointSize=decoder[types$a.usUpperOpticalPointSize]()),end$1(),$n},create$c=e=>{let n=[];return Object.keys(e).forEach(r=>{const g=types$a[r],y=e[r];let k=[];if(r==="panose"){const $=y;for(let V=0;V<$.length;V++)k=k.concat(encoder[g]($[V]))}else k=k.concat(encoder[g](y));k&&(n=n.concat(k))}),n},getPanose=e=>{},unicodeRanges=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],getUnicodeRange=e=>{for(let n=0;n<unicodeRanges.length;n+=1){const r=unicodeRanges[n];if(e>=r.begin&&e<r.end)return n}return-1},os2Table=Object.freeze(Object.defineProperty({__proto__:null,create:create$c,getPanose,getUnicodeRange,parse:parse$g},Symbol.toStringTag,{value:"Module"}));var PathType=(e=>(e[e.LINE=0]="LINE",e[e.QUADRATIC_BEZIER=1]="QUADRATIC_BEZIER",e[e.CUBIC_BEZIER=2]="CUBIC_BEZIER",e))(PathType||{});const getMetrics=e=>{const n=[],r=[];for(let y=0;y<e.contours.length;y+=1)for(let k=0;k<e.contours[y].length;k++){const $=e.contours[y][k];n.push($.start.x),r.push($.start.y),n.push($.end.x),r.push($.end.y),$.type===1?(n.push($.control.x),r.push($.control.y)):$.type===2&&(n.push($.control1.x),r.push($.control1.y),n.push($.control2.x),r.push($.control2.y))}const g={xMin:Math.min.apply(null,n),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,n),yMax:Math.max.apply(null,r),leftSideBearing:e.leftSideBearing,rightSideBearing:0};return isFinite(g.xMin)||(g.xMin=0),isFinite(g.xMax)||(g.xMax=e.advanceWidth||0),isFinite(g.yMin)||(g.yMin=0),isFinite(g.yMax)||(g.yMax=0),g.leftSideBearing||(g.leftSideBearing=g.xMin),g.rightSideBearing=(e.advanceWidth||0)-g.leftSideBearing-(g.xMax-g.xMin),g},parseTablesToCharacters=e=>{const n=[],r=e.filter(y=>y.name==="cmap")[0].table,g=e.filter(y=>y.name==="hmtx")[0].table;if(e.filter(y=>y.name==="glyf")[0]){const y=e.filter(k=>k.name==="glyf")[0].table;Object.keys(r.glyphIndexMap).forEach(k=>{const $=r.glyphIndexMap[k],V=y.glyphTables[r.glyphIndexMap[k]],L=[];for(let z=0;z<V.contours.length;z++)L.push(V.contours[z].paths);n.push({unicode:Number(k),contours:L,contourNum:V.contours.length,advanceWidth:g.hMetrics[$].advanceWidth,index:r.glyphIndexMap[k],name:String.fromCharCode(Number(k))})})}else if(e.filter(y=>y.name==="CFF ")[0]){const y=e.filter(k=>k.name==="CFF ")[0].table;Object.keys(r.glyphIndexMap).forEach(k=>{const $=r.glyphIndexMap[k],V=y.glyphTables[$];V&&n.push({unicode:Number(k),contours:V.contours,contourNum:V.contours.length,advanceWidth:V.advanceWidth,index:$,name:y.charsets?.data[$]})})}return n},types$9={majorVersion:"uint16",minorVersion:"uint16",fontRevision:"Fixed",checkSumAdjustment:"uint32",magicNumber:"uint32",flags:"uint16",unitsPerEm:"uint16",created:"LONGDATETIME",modified:"LONGDATETIME",xMin:"int16",yMin:"int16",xMax:"int16",yMax:"int16",macStyle:"uint16",lowestRecPPEM:"uint16",fontDirectionHint:"int16",indexToLocFormat:"int16",glyphDataFormat:"int16"},parse$f=(e,n,r)=>{const g=Object.keys(types$9),y={};start(e,n);for(let k=0;k<g.length;k++){const $=g[k];y[$]=decoder[types$9[$]]()}return end$1(),r.settings.indexToLocFormat=y.indexToLocFormat,r.settings.unitsPerEm=y.unitsPerEm,y},create$b=e=>{let n=[];return Object.keys(e).forEach(r=>{const g=types$9[r],y=e[r],k=encoder[g](y);k&&(n=n.concat(k))}),n},headTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$b,parse:parse$f},Symbol.toStringTag,{value:"Module"})),types$8={majorVersion:"uint16",minorVersion:"uint16",ascender:"FWORD",descender:"FWORD",lineGap:"FWORD",advanceWidthMax:"UFWORD",minLeftSideBearing:"FWORD",minRightSideBearing:"FWORD",xMaxExtent:"FWORD",caretSlopeRise:"int16",caretSlopeRun:"int16",caretOffset:"int16",reserved0:"int16",reserved1:"int16",reserved2:"int16",reserved3:"int16",metricDataFormat:"int16",numberOfHMetrics:"uint16"},parse$e=(e,n,r)=>{const g=Object.keys(types$8),y={};start(e,n);for(let k=0;k<g.length;k++){const $=g[k];y[$]=decoder[types$8[$]]()}return end$1(),r.settings.numberOfHMetrics=y.numberOfHMetrics,r.settings.ascender=y.ascender,r.settings.descender=y.descender,y},create$a=e=>{let n=[];return Object.keys(e).forEach(r=>{const g=types$8[r],y=e[r],k=encoder[g](y);k&&(n=n.concat(k))}),n},hheaTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$a,parse:parse$e},Symbol.toStringTag,{value:"Module"})),getVersion=(e,n)=>{const r=e.getUint16(n),g=e.getUint16(n+2);return r+g/4096/10},getStorageString=(e,n,r)=>{const g=[];for(let y=0;y<r/2;y++)g[y]=e.getUint16(n+y*2);return String.fromCharCode.apply(null,g)},computeCheckSum=(e,n=!1)=>{let r=e;for(n||(r=Object.assign([],e));r.length%4!==0;)r.push(0);let g=0;for(let y=0;y<r.length;y+=4){const k=(r[y]<<24>>>0)+(r[y+1]<<16>>>0)+(r[y+2]<<8>>>0)+(r[y+3]>>>0);g=g+k>>>0}return g%=4294967296,g},hasChineseChar=e=>{let n=!1;for(let r=0;r<e.length;r++)isChineseChar(e[r])&&(n=!0);return n},isChineseChar=e=>/^[\u4E00-\u9FFF]$/.test(e),types$7={version:"Version16Dot16",numGlyphs:"uint16",maxPoints:"uint16",maxContours:"uint16",maxCompositePoints:"uint16",maxCompositeContours:"uint16",maxZones:"uint16",maxTwilightPoints:"uint16",maxStorage:"uint16",maxFunctionDefs:"uint16",maxInstructionDefs:"uint16",maxStackElements:"uint16",maxSizeOfInstructions:"uint16",maxComponentElements:"uint16",maxComponentDepth:"uint16"},parse$d=(e,n,r)=>{const g=getVersion(e,n),y=Object.keys(types$7),k={};start(e,n);for(let $=0;$<y.length;$++){const V=y[$];(g>=1||V==="numGlyphs"||V==="version")&&(k[V]=decoder[types$7[V]]())}return end$1(),r.settings.numGlyphs=k.numGlyphs,k},create$9=e=>{let n=[];return Object.keys(e).forEach(r=>{const g=types$7[r],y=e[r],k=encoder[g](y);k&&(n=n.concat(k))}),n},maxpTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$9,parse:parse$d},Symbol.toStringTag,{value:"Module"}));var lib={exports:{}},buffer$1={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code$4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$1=0,len=code$4.length;i$1<len;++i$1)lookup[i$1]=code$4[i$1],revLookup[code$4.charCodeAt(i$1)]=i$1;revLookup[45]=62;revLookup[95]=63;function getLens(e){var n=e.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=n);var g=r===n?0:4-r%4;return[r,g]}function byteLength(e){var n=getLens(e),r=n[0],g=n[1];return(r+g)*3/4-g}function _byteLength(e,n,r){return(n+r)*3/4-r}function toByteArray(e){var n,r=getLens(e),g=r[0],y=r[1],k=new Arr(_byteLength(e,g,y)),$=0,V=y>0?g-4:g,L;for(L=0;L<V;L+=4)n=revLookup[e.charCodeAt(L)]<<18|revLookup[e.charCodeAt(L+1)]<<12|revLookup[e.charCodeAt(L+2)]<<6|revLookup[e.charCodeAt(L+3)],k[$++]=n>>16&255,k[$++]=n>>8&255,k[$++]=n&255;return y===2&&(n=revLookup[e.charCodeAt(L)]<<2|revLookup[e.charCodeAt(L+1)]>>4,k[$++]=n&255),y===1&&(n=revLookup[e.charCodeAt(L)]<<10|revLookup[e.charCodeAt(L+1)]<<4|revLookup[e.charCodeAt(L+2)]>>2,k[$++]=n>>8&255,k[$++]=n&255),k}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[e&63]}function encodeChunk(e,n,r){for(var g,y=[],k=n;k<r;k+=3)g=(e[k]<<16&16711680)+(e[k+1]<<8&65280)+(e[k+2]&255),y.push(tripletToBase64(g));return y.join("")}function fromByteArray(e){for(var n,r=e.length,g=r%3,y=[],k=16383,$=0,V=r-g;$<V;$+=k)y.push(encodeChunk(e,$,$+k>V?V:$+k));return g===1?(n=e[r-1],y.push(lookup[n>>2]+lookup[n<<4&63]+"==")):g===2&&(n=(e[r-2]<<8)+e[r-1],y.push(lookup[n>>10]+lookup[n>>4&63]+lookup[n<<2&63]+"=")),y.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(e,n,r,g,y){var k,$,V=y*8-g-1,L=(1<<V)-1,z=L>>1,j=-7,ae=r?y-1:0,re=r?-1:1,oe=e[n+ae];for(ae+=re,k=oe&(1<<-j)-1,oe>>=-j,j+=V;j>0;k=k*256+e[n+ae],ae+=re,j-=8);for($=k&(1<<-j)-1,k>>=-j,j+=g;j>0;$=$*256+e[n+ae],ae+=re,j-=8);if(k===0)k=1-z;else{if(k===L)return $?NaN:(oe?-1:1)*(1/0);$=$+Math.pow(2,g),k=k-z}return(oe?-1:1)*$*Math.pow(2,k-g)};ieee754.write=function(e,n,r,g,y,k){var $,V,L,z=k*8-y-1,j=(1<<z)-1,ae=j>>1,re=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,oe=g?0:k-1,ue=g?1:-1,le=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(V=isNaN(n)?1:0,$=j):($=Math.floor(Math.log(n)/Math.LN2),n*(L=Math.pow(2,-$))<1&&($--,L*=2),$+ae>=1?n+=re/L:n+=re*Math.pow(2,1-ae),n*L>=2&&($++,L/=2),$+ae>=j?(V=0,$=j):$+ae>=1?(V=(n*L-1)*Math.pow(2,y),$=$+ae):(V=n*Math.pow(2,ae-1)*Math.pow(2,y),$=0));y>=8;e[r+oe]=V&255,oe+=ue,V/=256,y-=8);for($=$<<y|V,z+=y;z>0;e[r+oe]=$&255,oe+=ue,$/=256,z-=8);e[r+oe-ue]|=le*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){var n=base64Js,r=ieee754,g=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=V,e.SlowBuffer=_e,e.INSPECT_MAX_BYTES=50;var y=2147483647;e.kMaxLength=y,V.TYPED_ARRAY_SUPPORT=k(),!V.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function k(){try{var En=new Uint8Array(1),kt={foo:function(){return 42}};return Object.setPrototypeOf(kt,Uint8Array.prototype),Object.setPrototypeOf(En,kt),En.foo()===42}catch{return!1}}Object.defineProperty(V.prototype,"parent",{enumerable:!0,get:function(){if(V.isBuffer(this))return this.buffer}}),Object.defineProperty(V.prototype,"offset",{enumerable:!0,get:function(){if(V.isBuffer(this))return this.byteOffset}});function $(En){if(En>y)throw new RangeError('The value "'+En+'" is invalid for option "size"');var kt=new Uint8Array(En);return Object.setPrototypeOf(kt,V.prototype),kt}function V(En,kt,At){if(typeof En=="number"){if(typeof kt=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ae(En)}return L(En,kt,At)}V.poolSize=8192;function L(En,kt,At){if(typeof En=="string")return re(En,kt);if(ArrayBuffer.isView(En))return ue(En);if(En==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof En);if(Gn(En,ArrayBuffer)||En&&Gn(En.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Gn(En,SharedArrayBuffer)||En&&Gn(En.buffer,SharedArrayBuffer)))return le(En,kt,At);if(typeof En=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Dn=En.valueOf&&En.valueOf();if(Dn!=null&&Dn!==En)return V.from(Dn,kt,At);var Xn=de(En);if(Xn)return Xn;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof En[Symbol.toPrimitive]=="function")return V.from(En[Symbol.toPrimitive]("string"),kt,At);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof En)}V.from=function(En,kt,At){return L(En,kt,At)},Object.setPrototypeOf(V.prototype,Uint8Array.prototype),Object.setPrototypeOf(V,Uint8Array);function z(En){if(typeof En!="number")throw new TypeError('"size" argument must be of type number');if(En<0)throw new RangeError('The value "'+En+'" is invalid for option "size"')}function j(En,kt,At){return z(En),En<=0?$(En):kt!==void 0?typeof At=="string"?$(En).fill(kt,At):$(En).fill(kt):$(En)}V.alloc=function(En,kt,At){return j(En,kt,At)};function ae(En){return z(En),$(En<0?0:he(En)|0)}V.allocUnsafe=function(En){return ae(En)},V.allocUnsafeSlow=function(En){return ae(En)};function re(En,kt){if((typeof kt!="string"||kt==="")&&(kt="utf8"),!V.isEncoding(kt))throw new TypeError("Unknown encoding: "+kt);var At=Ce(En,kt)|0,Dn=$(At),Xn=Dn.write(En,kt);return Xn!==At&&(Dn=Dn.slice(0,Xn)),Dn}function oe(En){for(var kt=En.length<0?0:he(En.length)|0,At=$(kt),Dn=0;Dn<kt;Dn+=1)At[Dn]=En[Dn]&255;return At}function ue(En){if(Gn(En,Uint8Array)){var kt=new Uint8Array(En);return le(kt.buffer,kt.byteOffset,kt.byteLength)}return oe(En)}function le(En,kt,At){if(kt<0||En.byteLength<kt)throw new RangeError('"offset" is outside of buffer bounds');if(En.byteLength<kt+(At||0))throw new RangeError('"length" is outside of buffer bounds');var Dn;return kt===void 0&&At===void 0?Dn=new Uint8Array(En):At===void 0?Dn=new Uint8Array(En,kt):Dn=new Uint8Array(En,kt,At),Object.setPrototypeOf(Dn,V.prototype),Dn}function de(En){if(V.isBuffer(En)){var kt=he(En.length)|0,At=$(kt);return At.length===0||En.copy(At,0,0,kt),At}if(En.length!==void 0)return typeof En.length!="number"||vn(En.length)?$(0):oe(En);if(En.type==="Buffer"&&Array.isArray(En.data))return oe(En.data)}function he(En){if(En>=y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return En|0}function _e(En){return+En!=En&&(En=0),V.alloc(+En)}V.isBuffer=function(kt){return kt!=null&&kt._isBuffer===!0&&kt!==V.prototype},V.compare=function(kt,At){if(Gn(kt,Uint8Array)&&(kt=V.from(kt,kt.offset,kt.byteLength)),Gn(At,Uint8Array)&&(At=V.from(At,At.offset,At.byteLength)),!V.isBuffer(kt)||!V.isBuffer(At))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(kt===At)return 0;for(var Dn=kt.length,Xn=At.length,aa=0,sa=Math.min(Dn,Xn);aa<sa;++aa)if(kt[aa]!==At[aa]){Dn=kt[aa],Xn=At[aa];break}return Dn<Xn?-1:Xn<Dn?1:0},V.isEncoding=function(kt){switch(String(kt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},V.concat=function(kt,At){if(!Array.isArray(kt))throw new TypeError('"list" argument must be an Array of Buffers');if(kt.length===0)return V.alloc(0);var Dn;if(At===void 0)for(At=0,Dn=0;Dn<kt.length;++Dn)At+=kt[Dn].length;var Xn=V.allocUnsafe(At),aa=0;for(Dn=0;Dn<kt.length;++Dn){var sa=kt[Dn];if(Gn(sa,Uint8Array))aa+sa.length>Xn.length?V.from(sa).copy(Xn,aa):Uint8Array.prototype.set.call(Xn,sa,aa);else if(V.isBuffer(sa))sa.copy(Xn,aa);else throw new TypeError('"list" argument must be an Array of Buffers');aa+=sa.length}return Xn};function Ce(En,kt){if(V.isBuffer(En))return En.length;if(ArrayBuffer.isView(En)||Gn(En,ArrayBuffer))return En.byteLength;if(typeof En!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof En);var At=En.length,Dn=arguments.length>2&&arguments[2]===!0;if(!Dn&&At===0)return 0;for(var Xn=!1;;)switch(kt){case"ascii":case"latin1":case"binary":return At;case"utf8":case"utf-8":return Wn(En).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return At*2;case"hex":return At>>>1;case"base64":return Ca(En).length;default:if(Xn)return Dn?-1:Wn(En).length;kt=(""+kt).toLowerCase(),Xn=!0}}V.byteLength=Ce;function Ne(En,kt,At){var Dn=!1;if((kt===void 0||kt<0)&&(kt=0),kt>this.length||((At===void 0||At>this.length)&&(At=this.length),At<=0)||(At>>>=0,kt>>>=0,At<=kt))return"";for(En||(En="utf8");;)switch(En){case"hex":return kn(this,kt,At);case"utf8":case"utf-8":return hn(this,kt,At);case"ascii":return $n(this,kt,At);case"latin1":case"binary":return Nn(this,kt,At);case"base64":return Sn(this,kt,At);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return jn(this,kt,At);default:if(Dn)throw new TypeError("Unknown encoding: "+En);En=(En+"").toLowerCase(),Dn=!0}}V.prototype._isBuffer=!0;function $e(En,kt,At){var Dn=En[kt];En[kt]=En[At],En[At]=Dn}V.prototype.swap16=function(){var kt=this.length;if(kt%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var At=0;At<kt;At+=2)$e(this,At,At+1);return this},V.prototype.swap32=function(){var kt=this.length;if(kt%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var At=0;At<kt;At+=4)$e(this,At,At+3),$e(this,At+1,At+2);return this},V.prototype.swap64=function(){var kt=this.length;if(kt%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var At=0;At<kt;At+=8)$e(this,At,At+7),$e(this,At+1,At+6),$e(this,At+2,At+5),$e(this,At+3,At+4);return this},V.prototype.toString=function(){var kt=this.length;return kt===0?"":arguments.length===0?hn(this,0,kt):Ne.apply(this,arguments)},V.prototype.toLocaleString=V.prototype.toString,V.prototype.equals=function(kt){if(!V.isBuffer(kt))throw new TypeError("Argument must be a Buffer");return this===kt?!0:V.compare(this,kt)===0},V.prototype.inspect=function(){var kt="",At=e.INSPECT_MAX_BYTES;return kt=this.toString("hex",0,At).replace(/(.{2})/g,"$1 ").trim(),this.length>At&&(kt+=" ... "),"<Buffer "+kt+">"},g&&(V.prototype[g]=V.prototype.inspect),V.prototype.compare=function(kt,At,Dn,Xn,aa){if(Gn(kt,Uint8Array)&&(kt=V.from(kt,kt.offset,kt.byteLength)),!V.isBuffer(kt))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof kt);if(At===void 0&&(At=0),Dn===void 0&&(Dn=kt?kt.length:0),Xn===void 0&&(Xn=0),aa===void 0&&(aa=this.length),At<0||Dn>kt.length||Xn<0||aa>this.length)throw new RangeError("out of range index");if(Xn>=aa&&At>=Dn)return 0;if(Xn>=aa)return-1;if(At>=Dn)return 1;if(At>>>=0,Dn>>>=0,Xn>>>=0,aa>>>=0,this===kt)return 0;for(var sa=aa-Xn,ia=Dn-At,ma=Math.min(sa,ia),ua=this.slice(Xn,aa),pe=kt.slice(At,Dn),Oe=0;Oe<ma;++Oe)if(ua[Oe]!==pe[Oe]){sa=ua[Oe],ia=pe[Oe];break}return sa<ia?-1:ia<sa?1:0};function xe(En,kt,At,Dn,Xn){if(En.length===0)return-1;if(typeof At=="string"?(Dn=At,At=0):At>2147483647?At=2147483647:At<-2147483648&&(At=-2147483648),At=+At,vn(At)&&(At=Xn?0:En.length-1),At<0&&(At=En.length+At),At>=En.length){if(Xn)return-1;At=En.length-1}else if(At<0)if(Xn)At=0;else return-1;if(typeof kt=="string"&&(kt=V.from(kt,Dn)),V.isBuffer(kt))return kt.length===0?-1:Ie(En,kt,At,Dn,Xn);if(typeof kt=="number")return kt=kt&255,typeof Uint8Array.prototype.indexOf=="function"?Xn?Uint8Array.prototype.indexOf.call(En,kt,At):Uint8Array.prototype.lastIndexOf.call(En,kt,At):Ie(En,[kt],At,Dn,Xn);throw new TypeError("val must be string, number or Buffer")}function Ie(En,kt,At,Dn,Xn){var aa=1,sa=En.length,ia=kt.length;if(Dn!==void 0&&(Dn=String(Dn).toLowerCase(),Dn==="ucs2"||Dn==="ucs-2"||Dn==="utf16le"||Dn==="utf-16le")){if(En.length<2||kt.length<2)return-1;aa=2,sa/=2,ia/=2,At/=2}function ma(Ue,Pt){return aa===1?Ue[Pt]:Ue.readUInt16BE(Pt*aa)}var ua;if(Xn){var pe=-1;for(ua=At;ua<sa;ua++)if(ma(En,ua)===ma(kt,pe===-1?0:ua-pe)){if(pe===-1&&(pe=ua),ua-pe+1===ia)return pe*aa}else pe!==-1&&(ua-=ua-pe),pe=-1}else for(At+ia>sa&&(At=sa-ia),ua=At;ua>=0;ua--){for(var Oe=!0,Ve=0;Ve<ia;Ve++)if(ma(En,ua+Ve)!==ma(kt,Ve)){Oe=!1;break}if(Oe)return ua}return-1}V.prototype.includes=function(kt,At,Dn){return this.indexOf(kt,At,Dn)!==-1},V.prototype.indexOf=function(kt,At,Dn){return xe(this,kt,At,Dn,!0)},V.prototype.lastIndexOf=function(kt,At,Dn){return xe(this,kt,At,Dn,!1)};function ze(En,kt,At,Dn){At=Number(At)||0;var Xn=En.length-At;Dn?(Dn=Number(Dn),Dn>Xn&&(Dn=Xn)):Dn=Xn;var aa=kt.length;Dn>aa/2&&(Dn=aa/2);for(var sa=0;sa<Dn;++sa){var ia=parseInt(kt.substr(sa*2,2),16);if(vn(ia))return sa;En[At+sa]=ia}return sa}function qe(En,kt,At,Dn){return ra(Wn(kt,En.length-At),En,At,Dn)}function Et(En,kt,At,Dn){return ra(da(kt),En,At,Dn)}function _n(En,kt,At,Dn){return ra(Ca(kt),En,At,Dn)}function Dt(En,kt,At,Dn){return ra(ga(kt,En.length-At),En,At,Dn)}V.prototype.write=function(kt,At,Dn,Xn){if(At===void 0)Xn="utf8",Dn=this.length,At=0;else if(Dn===void 0&&typeof At=="string")Xn=At,Dn=this.length,At=0;else if(isFinite(At))At=At>>>0,isFinite(Dn)?(Dn=Dn>>>0,Xn===void 0&&(Xn="utf8")):(Xn=Dn,Dn=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var aa=this.length-At;if((Dn===void 0||Dn>aa)&&(Dn=aa),kt.length>0&&(Dn<0||At<0)||At>this.length)throw new RangeError("Attempt to write outside buffer bounds");Xn||(Xn="utf8");for(var sa=!1;;)switch(Xn){case"hex":return ze(this,kt,At,Dn);case"utf8":case"utf-8":return qe(this,kt,At,Dn);case"ascii":case"latin1":case"binary":return Et(this,kt,At,Dn);case"base64":return _n(this,kt,At,Dn);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Dt(this,kt,At,Dn);default:if(sa)throw new TypeError("Unknown encoding: "+Xn);Xn=(""+Xn).toLowerCase(),sa=!0}},V.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Sn(En,kt,At){return kt===0&&At===En.length?n.fromByteArray(En):n.fromByteArray(En.slice(kt,At))}function hn(En,kt,At){At=Math.min(En.length,At);for(var Dn=[],Xn=kt;Xn<At;){var aa=En[Xn],sa=null,ia=aa>239?4:aa>223?3:aa>191?2:1;if(Xn+ia<=At){var ma,ua,pe,Oe;switch(ia){case 1:aa<128&&(sa=aa);break;case 2:ma=En[Xn+1],(ma&192)===128&&(Oe=(aa&31)<<6|ma&63,Oe>127&&(sa=Oe));break;case 3:ma=En[Xn+1],ua=En[Xn+2],(ma&192)===128&&(ua&192)===128&&(Oe=(aa&15)<<12|(ma&63)<<6|ua&63,Oe>2047&&(Oe<55296||Oe>57343)&&(sa=Oe));break;case 4:ma=En[Xn+1],ua=En[Xn+2],pe=En[Xn+3],(ma&192)===128&&(ua&192)===128&&(pe&192)===128&&(Oe=(aa&15)<<18|(ma&63)<<12|(ua&63)<<6|pe&63,Oe>65535&&Oe<1114112&&(sa=Oe))}}sa===null?(sa=65533,ia=1):sa>65535&&(sa-=65536,Dn.push(sa>>>10&1023|55296),sa=56320|sa&1023),Dn.push(sa),Xn+=ia}return Mn(Dn)}var Vn=4096;function Mn(En){var kt=En.length;if(kt<=Vn)return String.fromCharCode.apply(String,En);for(var At="",Dn=0;Dn<kt;)At+=String.fromCharCode.apply(String,En.slice(Dn,Dn+=Vn));return At}function $n(En,kt,At){var Dn="";At=Math.min(En.length,At);for(var Xn=kt;Xn<At;++Xn)Dn+=String.fromCharCode(En[Xn]&127);return Dn}function Nn(En,kt,At){var Dn="";At=Math.min(En.length,At);for(var Xn=kt;Xn<At;++Xn)Dn+=String.fromCharCode(En[Xn]);return Dn}function kn(En,kt,At){var Dn=En.length;(!kt||kt<0)&&(kt=0),(!At||At<0||At>Dn)&&(At=Dn);for(var Xn="",aa=kt;aa<At;++aa)Xn+=Kn[En[aa]];return Xn}function jn(En,kt,At){for(var Dn=En.slice(kt,At),Xn="",aa=0;aa<Dn.length-1;aa+=2)Xn+=String.fromCharCode(Dn[aa]+Dn[aa+1]*256);return Xn}V.prototype.slice=function(kt,At){var Dn=this.length;kt=~~kt,At=At===void 0?Dn:~~At,kt<0?(kt+=Dn,kt<0&&(kt=0)):kt>Dn&&(kt=Dn),At<0?(At+=Dn,At<0&&(At=0)):At>Dn&&(At=Dn),At<kt&&(At=kt);var Xn=this.subarray(kt,At);return Object.setPrototypeOf(Xn,V.prototype),Xn};function Fn(En,kt,At){if(En%1!==0||En<0)throw new RangeError("offset is not uint");if(En+kt>At)throw new RangeError("Trying to access beyond buffer length")}V.prototype.readUintLE=V.prototype.readUIntLE=function(kt,At,Dn){kt=kt>>>0,At=At>>>0,Dn||Fn(kt,At,this.length);for(var Xn=this[kt],aa=1,sa=0;++sa<At&&(aa*=256);)Xn+=this[kt+sa]*aa;return Xn},V.prototype.readUintBE=V.prototype.readUIntBE=function(kt,At,Dn){kt=kt>>>0,At=At>>>0,Dn||Fn(kt,At,this.length);for(var Xn=this[kt+--At],aa=1;At>0&&(aa*=256);)Xn+=this[kt+--At]*aa;return Xn},V.prototype.readUint8=V.prototype.readUInt8=function(kt,At){return kt=kt>>>0,At||Fn(kt,1,this.length),this[kt]},V.prototype.readUint16LE=V.prototype.readUInt16LE=function(kt,At){return kt=kt>>>0,At||Fn(kt,2,this.length),this[kt]|this[kt+1]<<8},V.prototype.readUint16BE=V.prototype.readUInt16BE=function(kt,At){return kt=kt>>>0,At||Fn(kt,2,this.length),this[kt]<<8|this[kt+1]},V.prototype.readUint32LE=V.prototype.readUInt32LE=function(kt,At){return kt=kt>>>0,At||Fn(kt,4,this.length),(this[kt]|this[kt+1]<<8|this[kt+2]<<16)+this[kt+3]*16777216},V.prototype.readUint32BE=V.prototype.readUInt32BE=function(kt,At){return kt=kt>>>0,At||Fn(kt,4,this.length),this[kt]*16777216+(this[kt+1]<<16|this[kt+2]<<8|this[kt+3])},V.prototype.readIntLE=function(kt,At,Dn){kt=kt>>>0,At=At>>>0,Dn||Fn(kt,At,this.length);for(var Xn=this[kt],aa=1,sa=0;++sa<At&&(aa*=256);)Xn+=this[kt+sa]*aa;return aa*=128,Xn>=aa&&(Xn-=Math.pow(2,8*At)),Xn},V.prototype.readIntBE=function(kt,At,Dn){kt=kt>>>0,At=At>>>0,Dn||Fn(kt,At,this.length);for(var Xn=At,aa=1,sa=this[kt+--Xn];Xn>0&&(aa*=256);)sa+=this[kt+--Xn]*aa;return aa*=128,sa>=aa&&(sa-=Math.pow(2,8*At)),sa},V.prototype.readInt8=function(kt,At){return kt=kt>>>0,At||Fn(kt,1,this.length),this[kt]&128?(255-this[kt]+1)*-1:this[kt]},V.prototype.readInt16LE=function(kt,At){kt=kt>>>0,At||Fn(kt,2,this.length);var Dn=this[kt]|this[kt+1]<<8;return Dn&32768?Dn|4294901760:Dn},V.prototype.readInt16BE=function(kt,At){kt=kt>>>0,At||Fn(kt,2,this.length);var Dn=this[kt+1]|this[kt]<<8;return Dn&32768?Dn|4294901760:Dn},V.prototype.readInt32LE=function(kt,At){return kt=kt>>>0,At||Fn(kt,4,this.length),this[kt]|this[kt+1]<<8|this[kt+2]<<16|this[kt+3]<<24},V.prototype.readInt32BE=function(kt,At){return kt=kt>>>0,At||Fn(kt,4,this.length),this[kt]<<24|this[kt+1]<<16|this[kt+2]<<8|this[kt+3]},V.prototype.readFloatLE=function(kt,At){return kt=kt>>>0,At||Fn(kt,4,this.length),r.read(this,kt,!0,23,4)},V.prototype.readFloatBE=function(kt,At){return kt=kt>>>0,At||Fn(kt,4,this.length),r.read(this,kt,!1,23,4)},V.prototype.readDoubleLE=function(kt,At){return kt=kt>>>0,At||Fn(kt,8,this.length),r.read(this,kt,!0,52,8)},V.prototype.readDoubleBE=function(kt,At){return kt=kt>>>0,At||Fn(kt,8,this.length),r.read(this,kt,!1,52,8)};function Tn(En,kt,At,Dn,Xn,aa){if(!V.isBuffer(En))throw new TypeError('"buffer" argument must be a Buffer instance');if(kt>Xn||kt<aa)throw new RangeError('"value" argument is out of bounds');if(At+Dn>En.length)throw new RangeError("Index out of range")}V.prototype.writeUintLE=V.prototype.writeUIntLE=function(kt,At,Dn,Xn){if(kt=+kt,At=At>>>0,Dn=Dn>>>0,!Xn){var aa=Math.pow(2,8*Dn)-1;Tn(this,kt,At,Dn,aa,0)}var sa=1,ia=0;for(this[At]=kt&255;++ia<Dn&&(sa*=256);)this[At+ia]=kt/sa&255;return At+Dn},V.prototype.writeUintBE=V.prototype.writeUIntBE=function(kt,At,Dn,Xn){if(kt=+kt,At=At>>>0,Dn=Dn>>>0,!Xn){var aa=Math.pow(2,8*Dn)-1;Tn(this,kt,At,Dn,aa,0)}var sa=Dn-1,ia=1;for(this[At+sa]=kt&255;--sa>=0&&(ia*=256);)this[At+sa]=kt/ia&255;return At+Dn},V.prototype.writeUint8=V.prototype.writeUInt8=function(kt,At,Dn){return kt=+kt,At=At>>>0,Dn||Tn(this,kt,At,1,255,0),this[At]=kt&255,At+1},V.prototype.writeUint16LE=V.prototype.writeUInt16LE=function(kt,At,Dn){return kt=+kt,At=At>>>0,Dn||Tn(this,kt,At,2,65535,0),this[At]=kt&255,this[At+1]=kt>>>8,At+2},V.prototype.writeUint16BE=V.prototype.writeUInt16BE=function(kt,At,Dn){return kt=+kt,At=At>>>0,Dn||Tn(this,kt,At,2,65535,0),this[At]=kt>>>8,this[At+1]=kt&255,At+2},V.prototype.writeUint32LE=V.prototype.writeUInt32LE=function(kt,At,Dn){return kt=+kt,At=At>>>0,Dn||Tn(this,kt,At,4,4294967295,0),this[At+3]=kt>>>24,this[At+2]=kt>>>16,this[At+1]=kt>>>8,this[At]=kt&255,At+4},V.prototype.writeUint32BE=V.prototype.writeUInt32BE=function(kt,At,Dn){return kt=+kt,At=At>>>0,Dn||Tn(this,kt,At,4,4294967295,0),this[At]=kt>>>24,this[At+1]=kt>>>16,this[At+2]=kt>>>8,this[At+3]=kt&255,At+4},V.prototype.writeIntLE=function(kt,At,Dn,Xn){if(kt=+kt,At=At>>>0,!Xn){var aa=Math.pow(2,8*Dn-1);Tn(this,kt,At,Dn,aa-1,-aa)}var sa=0,ia=1,ma=0;for(this[At]=kt&255;++sa<Dn&&(ia*=256);)kt<0&&ma===0&&this[At+sa-1]!==0&&(ma=1),this[At+sa]=(kt/ia>>0)-ma&255;return At+Dn},V.prototype.writeIntBE=function(kt,At,Dn,Xn){if(kt=+kt,At=At>>>0,!Xn){var aa=Math.pow(2,8*Dn-1);Tn(this,kt,At,Dn,aa-1,-aa)}var sa=Dn-1,ia=1,ma=0;for(this[At+sa]=kt&255;--sa>=0&&(ia*=256);)kt<0&&ma===0&&this[At+sa+1]!==0&&(ma=1),this[At+sa]=(kt/ia>>0)-ma&255;return At+Dn},V.prototype.writeInt8=function(kt,At,Dn){return kt=+kt,At=At>>>0,Dn||Tn(this,kt,At,1,127,-128),kt<0&&(kt=255+kt+1),this[At]=kt&255,At+1},V.prototype.writeInt16LE=function(kt,At,Dn){return kt=+kt,At=At>>>0,Dn||Tn(this,kt,At,2,32767,-32768),this[At]=kt&255,this[At+1]=kt>>>8,At+2},V.prototype.writeInt16BE=function(kt,At,Dn){return kt=+kt,At=At>>>0,Dn||Tn(this,kt,At,2,32767,-32768),this[At]=kt>>>8,this[At+1]=kt&255,At+2},V.prototype.writeInt32LE=function(kt,At,Dn){return kt=+kt,At=At>>>0,Dn||Tn(this,kt,At,4,2147483647,-2147483648),this[At]=kt&255,this[At+1]=kt>>>8,this[At+2]=kt>>>16,this[At+3]=kt>>>24,At+4},V.prototype.writeInt32BE=function(kt,At,Dn){return kt=+kt,At=At>>>0,Dn||Tn(this,kt,At,4,2147483647,-2147483648),kt<0&&(kt=4294967295+kt+1),this[At]=kt>>>24,this[At+1]=kt>>>16,this[At+2]=kt>>>8,this[At+3]=kt&255,At+4};function Hn(En,kt,At,Dn,Xn,aa){if(At+Dn>En.length)throw new RangeError("Index out of range");if(At<0)throw new RangeError("Index out of range")}function la(En,kt,At,Dn,Xn){return kt=+kt,At=At>>>0,Xn||Hn(En,kt,At,4),r.write(En,kt,At,Dn,23,4),At+4}V.prototype.writeFloatLE=function(kt,At,Dn){return la(this,kt,At,!0,Dn)},V.prototype.writeFloatBE=function(kt,At,Dn){return la(this,kt,At,!1,Dn)};function ca(En,kt,At,Dn,Xn){return kt=+kt,At=At>>>0,Xn||Hn(En,kt,At,8),r.write(En,kt,At,Dn,52,8),At+8}V.prototype.writeDoubleLE=function(kt,At,Dn){return ca(this,kt,At,!0,Dn)},V.prototype.writeDoubleBE=function(kt,At,Dn){return ca(this,kt,At,!1,Dn)},V.prototype.copy=function(kt,At,Dn,Xn){if(!V.isBuffer(kt))throw new TypeError("argument should be a Buffer");if(Dn||(Dn=0),!Xn&&Xn!==0&&(Xn=this.length),At>=kt.length&&(At=kt.length),At||(At=0),Xn>0&&Xn<Dn&&(Xn=Dn),Xn===Dn||kt.length===0||this.length===0)return 0;if(At<0)throw new RangeError("targetStart out of bounds");if(Dn<0||Dn>=this.length)throw new RangeError("Index out of range");if(Xn<0)throw new RangeError("sourceEnd out of bounds");Xn>this.length&&(Xn=this.length),kt.length-At<Xn-Dn&&(Xn=kt.length-At+Dn);var aa=Xn-Dn;return this===kt&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(At,Dn,Xn):Uint8Array.prototype.set.call(kt,this.subarray(Dn,Xn),At),aa},V.prototype.fill=function(kt,At,Dn,Xn){if(typeof kt=="string"){if(typeof At=="string"?(Xn=At,At=0,Dn=this.length):typeof Dn=="string"&&(Xn=Dn,Dn=this.length),Xn!==void 0&&typeof Xn!="string")throw new TypeError("encoding must be a string");if(typeof Xn=="string"&&!V.isEncoding(Xn))throw new TypeError("Unknown encoding: "+Xn);if(kt.length===1){var aa=kt.charCodeAt(0);(Xn==="utf8"&&aa<128||Xn==="latin1")&&(kt=aa)}}else typeof kt=="number"?kt=kt&255:typeof kt=="boolean"&&(kt=Number(kt));if(At<0||this.length<At||this.length<Dn)throw new RangeError("Out of range index");if(Dn<=At)return this;At=At>>>0,Dn=Dn===void 0?this.length:Dn>>>0,kt||(kt=0);var sa;if(typeof kt=="number")for(sa=At;sa<Dn;++sa)this[sa]=kt;else{var ia=V.isBuffer(kt)?kt:V.from(kt,Xn),ma=ia.length;if(ma===0)throw new TypeError('The value "'+kt+'" is invalid for argument "value"');for(sa=0;sa<Dn-At;++sa)this[sa+At]=ia[sa%ma]}return this};var Zn=/[^+/0-9A-Za-z-_]/g;function Bn(En){if(En=En.split("=")[0],En=En.trim().replace(Zn,""),En.length<2)return"";for(;En.length%4!==0;)En=En+"=";return En}function Wn(En,kt){kt=kt||1/0;for(var At,Dn=En.length,Xn=null,aa=[],sa=0;sa<Dn;++sa){if(At=En.charCodeAt(sa),At>55295&&At<57344){if(!Xn){if(At>56319){(kt-=3)>-1&&aa.push(239,191,189);continue}else if(sa+1===Dn){(kt-=3)>-1&&aa.push(239,191,189);continue}Xn=At;continue}if(At<56320){(kt-=3)>-1&&aa.push(239,191,189),Xn=At;continue}At=(Xn-55296<<10|At-56320)+65536}else Xn&&(kt-=3)>-1&&aa.push(239,191,189);if(Xn=null,At<128){if((kt-=1)<0)break;aa.push(At)}else if(At<2048){if((kt-=2)<0)break;aa.push(At>>6|192,At&63|128)}else if(At<65536){if((kt-=3)<0)break;aa.push(At>>12|224,At>>6&63|128,At&63|128)}else if(At<1114112){if((kt-=4)<0)break;aa.push(At>>18|240,At>>12&63|128,At>>6&63|128,At&63|128)}else throw new Error("Invalid code point")}return aa}function da(En){for(var kt=[],At=0;At<En.length;++At)kt.push(En.charCodeAt(At)&255);return kt}function ga(En,kt){for(var At,Dn,Xn,aa=[],sa=0;sa<En.length&&!((kt-=2)<0);++sa)At=En.charCodeAt(sa),Dn=At>>8,Xn=At%256,aa.push(Xn),aa.push(Dn);return aa}function Ca(En){return n.toByteArray(Bn(En))}function ra(En,kt,At,Dn){for(var Xn=0;Xn<Dn&&!(Xn+At>=kt.length||Xn>=En.length);++Xn)kt[Xn+At]=En[Xn];return Xn}function Gn(En,kt){return En instanceof kt||En!=null&&En.constructor!=null&&En.constructor.name!=null&&En.constructor.name===kt.name}function vn(En){return En!==En}var Kn=function(){for(var En="0123456789abcdef",kt=new Array(256),At=0;At<16;++At)for(var Dn=At*16,Xn=0;Xn<16;++Xn)kt[Dn+Xn]=En[At]+En[Xn];return kt}()})(buffer$1);var buffer=buffer$1,Buffer$1=buffer.Buffer,safer={},key;for(key in buffer)buffer.hasOwnProperty(key)&&(key==="SlowBuffer"||key==="Buffer"||(safer[key]=buffer[key]));var Safer=safer.Buffer={};for(key in Buffer$1)Buffer$1.hasOwnProperty(key)&&(key==="allocUnsafe"||key==="allocUnsafeSlow"||(Safer[key]=Buffer$1[key]));safer.Buffer.prototype=Buffer$1.prototype;(!Safer.from||Safer.from===Uint8Array.from)&&(Safer.from=function(e,n,r){if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&typeof e.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return Buffer$1(e,n,r)});Safer.alloc||(Safer.alloc=function(e,n,r){if(typeof e!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var g=Buffer$1(e);return!n||n.length===0?g.fill(0):typeof r=="string"?g.fill(n,r):g.fill(n),g});if(!safer.kStringMaxLength)try{safer.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}safer.constants||(safer.constants={MAX_LENGTH:safer.kMaxLength},safer.kStringMaxLength&&(safer.constants.MAX_STRING_LENGTH=safer.kStringMaxLength));var safer_1=safer,bomHandling={},BOMChar="\uFEFF";bomHandling.PrependBOM=PrependBOMWrapper;function PrependBOMWrapper(e,n){this.encoder=e,this.addBOM=!0}PrependBOMWrapper.prototype.write=function(e){return this.addBOM&&(e=BOMChar+e,this.addBOM=!1),this.encoder.write(e)};PrependBOMWrapper.prototype.end=function(){return this.encoder.end()};bomHandling.StripBOM=StripBOMWrapper;function StripBOMWrapper(e,n){this.decoder=e,this.pass=!1,this.options=n||{}}StripBOMWrapper.prototype.write=function(e){var n=this.decoder.write(e);return this.pass||!n||(n[0]===BOMChar&&(n=n.slice(1),typeof this.options.stripBOM=="function"&&this.options.stripBOM()),this.pass=!0),n};StripBOMWrapper.prototype.end=function(){return this.decoder.end()};var encodings={},string_decoder={},safeBuffer={exports:{}},hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(e,n){var r=buffer$1,g=r.Buffer;function y($,V){for(var L in $)V[L]=$[L]}g.from&&g.alloc&&g.allocUnsafe&&g.allocUnsafeSlow?e.exports=r:(y(r,n),n.Buffer=k);function k($,V,L){return g($,V,L)}y(g,k),k.from=function($,V,L){if(typeof $=="number")throw new TypeError("Argument must not be a number");return g($,V,L)},k.alloc=function($,V,L){if(typeof $!="number")throw new TypeError("Argument must be a number");var z=g($);return V!==void 0?typeof L=="string"?z.fill(V,L):z.fill(V):z.fill(0),z},k.allocUnsafe=function($){if(typeof $!="number")throw new TypeError("Argument must be a number");return g($)},k.allocUnsafeSlow=function($){if(typeof $!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer($)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var e=requireSafeBuffer().Buffer,n=e.isEncoding||function(he){switch(he=""+he,he&&he.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(he){if(!he)return"utf8";for(var _e;;)switch(he){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return he;default:if(_e)return;he=(""+he).toLowerCase(),_e=!0}}function g(he){var _e=r(he);if(typeof _e!="string"&&(e.isEncoding===n||!n(he)))throw new Error("Unknown encoding: "+he);return _e||he}string_decoder.StringDecoder=y;function y(he){this.encoding=g(he);var _e;switch(this.encoding){case"utf16le":this.text=ae,this.end=re,_e=4;break;case"utf8":this.fillLast=L,_e=4;break;case"base64":this.text=oe,this.end=ue,_e=3;break;default:this.write=le,this.end=de;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(_e)}y.prototype.write=function(he){if(he.length===0)return"";var _e,Ce;if(this.lastNeed){if(_e=this.fillLast(he),_e===void 0)return"";Ce=this.lastNeed,this.lastNeed=0}else Ce=0;return Ce<he.length?_e?_e+this.text(he,Ce):this.text(he,Ce):_e||""},y.prototype.end=j,y.prototype.text=z,y.prototype.fillLast=function(he){if(this.lastNeed<=he.length)return he.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);he.copy(this.lastChar,this.lastTotal-this.lastNeed,0,he.length),this.lastNeed-=he.length};function k(he){return he<=127?0:he>>5===6?2:he>>4===14?3:he>>3===30?4:he>>6===2?-1:-2}function $(he,_e,Ce){var Ne=_e.length-1;if(Ne<Ce)return 0;var $e=k(_e[Ne]);return $e>=0?($e>0&&(he.lastNeed=$e-1),$e):--Ne<Ce||$e===-2?0:($e=k(_e[Ne]),$e>=0?($e>0&&(he.lastNeed=$e-2),$e):--Ne<Ce||$e===-2?0:($e=k(_e[Ne]),$e>=0?($e>0&&($e===2?$e=0:he.lastNeed=$e-3),$e):0))}function V(he,_e,Ce){if((_e[0]&192)!==128)return he.lastNeed=0,"";if(he.lastNeed>1&&_e.length>1){if((_e[1]&192)!==128)return he.lastNeed=1,"";if(he.lastNeed>2&&_e.length>2&&(_e[2]&192)!==128)return he.lastNeed=2,""}}function L(he){var _e=this.lastTotal-this.lastNeed,Ce=V(this,he);if(Ce!==void 0)return Ce;if(this.lastNeed<=he.length)return he.copy(this.lastChar,_e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);he.copy(this.lastChar,_e,0,he.length),this.lastNeed-=he.length}function z(he,_e){var Ce=$(this,he,_e);if(!this.lastNeed)return he.toString("utf8",_e);this.lastTotal=Ce;var Ne=he.length-(Ce-this.lastNeed);return he.copy(this.lastChar,0,Ne),he.toString("utf8",_e,Ne)}function j(he){var _e=he&&he.length?this.write(he):"";return this.lastNeed?_e+"":_e}function ae(he,_e){if((he.length-_e)%2===0){var Ce=he.toString("utf16le",_e);if(Ce){var Ne=Ce.charCodeAt(Ce.length-1);if(Ne>=55296&&Ne<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=he[he.length-2],this.lastChar[1]=he[he.length-1],Ce.slice(0,-1)}return Ce}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=he[he.length-1],he.toString("utf16le",_e,he.length-1)}function re(he){var _e=he&&he.length?this.write(he):"";if(this.lastNeed){var Ce=this.lastTotal-this.lastNeed;return _e+this.lastChar.toString("utf16le",0,Ce)}return _e}function oe(he,_e){var Ce=(he.length-_e)%3;return Ce===0?he.toString("base64",_e):(this.lastNeed=3-Ce,this.lastTotal=3,Ce===1?this.lastChar[0]=he[he.length-1]:(this.lastChar[0]=he[he.length-2],this.lastChar[1]=he[he.length-1]),he.toString("base64",_e,he.length-Ce))}function ue(he){var _e=he&&he.length?this.write(he):"";return this.lastNeed?_e+this.lastChar.toString("base64",0,3-this.lastNeed):_e}function le(he){return he.toString(this.encoding)}function de(he){return he&&he.length?this.write(he):""}return string_decoder}var internal,hasRequiredInternal;function requireInternal(){if(hasRequiredInternal)return internal;hasRequiredInternal=1;var e=safer_1.Buffer;internal={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:n};function n(L,z){this.enc=L.encodingName,this.bomAware=L.bomAware,this.enc==="base64"?this.encoder=k:this.enc==="cesu8"&&(this.enc="utf8",this.encoder=$,e.from("eda0bdedb2a9","hex").toString()!==""&&(this.decoder=V,this.defaultCharUnicode=z.defaultCharUnicode))}n.prototype.encoder=y,n.prototype.decoder=g;var r=requireString_decoder().StringDecoder;r.prototype.end||(r.prototype.end=function(){});function g(L,z){this.decoder=new r(z.enc)}g.prototype.write=function(L){return e.isBuffer(L)||(L=e.from(L)),this.decoder.write(L)},g.prototype.end=function(){return this.decoder.end()};function y(L,z){this.enc=z.enc}y.prototype.write=function(L){return e.from(L,this.enc)},y.prototype.end=function(){};function k(L,z){this.prevStr=""}k.prototype.write=function(L){L=this.prevStr+L;var z=L.length-L.length%4;return this.prevStr=L.slice(z),L=L.slice(0,z),e.from(L,"base64")},k.prototype.end=function(){return e.from(this.prevStr,"base64")};function $(L,z){}$.prototype.write=function(L){for(var z=e.alloc(L.length*3),j=0,ae=0;ae<L.length;ae++){var re=L.charCodeAt(ae);re<128?z[j++]=re:re<2048?(z[j++]=192+(re>>>6),z[j++]=128+(re&63)):(z[j++]=224+(re>>>12),z[j++]=128+(re>>>6&63),z[j++]=128+(re&63))}return z.slice(0,j)},$.prototype.end=function(){};function V(L,z){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=z.defaultCharUnicode}return V.prototype.write=function(L){for(var z=this.acc,j=this.contBytes,ae=this.accBytes,re="",oe=0;oe<L.length;oe++){var ue=L[oe];(ue&192)!==128?(j>0&&(re+=this.defaultCharUnicode,j=0),ue<128?re+=String.fromCharCode(ue):ue<224?(z=ue&31,j=1,ae=1):ue<240?(z=ue&15,j=2,ae=1):re+=this.defaultCharUnicode):j>0?(z=z<<6|ue&63,j--,ae++,j===0&&(ae===2&&z<128&&z>0?re+=this.defaultCharUnicode:ae===3&&z<2048?re+=this.defaultCharUnicode:re+=String.fromCharCode(z))):re+=this.defaultCharUnicode}return this.acc=z,this.contBytes=j,this.accBytes=ae,re},V.prototype.end=function(){var L=0;return this.contBytes>0&&(L+=this.defaultCharUnicode),L},internal}var utf32={},hasRequiredUtf32;function requireUtf32(){if(hasRequiredUtf32)return utf32;hasRequiredUtf32=1;var e=safer_1.Buffer;utf32._utf32=n;function n(z,j){this.iconv=j,this.bomAware=!0,this.isLE=z.isLE}utf32.utf32le={type:"_utf32",isLE:!0},utf32.utf32be={type:"_utf32",isLE:!1},utf32.ucs4le="utf32le",utf32.ucs4be="utf32be",n.prototype.encoder=r,n.prototype.decoder=g;function r(z,j){this.isLE=j.isLE,this.highSurrogate=0}r.prototype.write=function(z){for(var j=e.from(z,"ucs2"),ae=e.alloc(j.length*2),re=this.isLE?ae.writeUInt32LE:ae.writeUInt32BE,oe=0,ue=0;ue<j.length;ue+=2){var le=j.readUInt16LE(ue),de=55296<=le&&le<56320,he=56320<=le&&le<57344;if(this.highSurrogate)if(de||!he)re.call(ae,this.highSurrogate,oe),oe+=4;else{var _e=(this.highSurrogate-55296<<10|le-56320)+65536;re.call(ae,_e,oe),oe+=4,this.highSurrogate=0;continue}de?this.highSurrogate=le:(re.call(ae,le,oe),oe+=4,this.highSurrogate=0)}return oe<ae.length&&(ae=ae.slice(0,oe)),ae},r.prototype.end=function(){if(this.highSurrogate){var z=e.alloc(4);return this.isLE?z.writeUInt32LE(this.highSurrogate,0):z.writeUInt32BE(this.highSurrogate,0),this.highSurrogate=0,z}};function g(z,j){this.isLE=j.isLE,this.badChar=j.iconv.defaultCharUnicode.charCodeAt(0),this.overflow=[]}g.prototype.write=function(z){if(z.length===0)return"";var j=0,ae=0,re=e.alloc(z.length+4),oe=0,ue=this.isLE,le=this.overflow,de=this.badChar;if(le.length>0){for(;j<z.length&&le.length<4;j++)le.push(z[j]);le.length===4&&(ue?ae=le[j]|le[j+1]<<8|le[j+2]<<16|le[j+3]<<24:ae=le[j+3]|le[j+2]<<8|le[j+1]<<16|le[j]<<24,le.length=0,oe=y(re,oe,ae,de))}for(;j<z.length-3;j+=4)ue?ae=z[j]|z[j+1]<<8|z[j+2]<<16|z[j+3]<<24:ae=z[j+3]|z[j+2]<<8|z[j+1]<<16|z[j]<<24,oe=y(re,oe,ae,de);for(;j<z.length;j++)le.push(z[j]);return re.slice(0,oe).toString("ucs2")};function y(z,j,ae,re){if((ae<0||ae>1114111)&&(ae=re),ae>=65536){ae-=65536;var oe=55296|ae>>10;z[j++]=oe&255,z[j++]=oe>>8;var ae=56320|ae&1023}return z[j++]=ae&255,z[j++]=ae>>8,j}g.prototype.end=function(){this.overflow.length=0},utf32.utf32=k,utf32.ucs4="utf32";function k(z,j){this.iconv=j}k.prototype.encoder=$,k.prototype.decoder=V;function $(z,j){z=z||{},z.addBOM===void 0&&(z.addBOM=!0),this.encoder=j.iconv.getEncoder(z.defaultEncoding||"utf-32le",z)}$.prototype.write=function(z){return this.encoder.write(z)},$.prototype.end=function(){return this.encoder.end()};function V(z,j){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=z||{},this.iconv=j.iconv}V.prototype.write=function(z){if(!this.decoder){if(this.initialBufs.push(z),this.initialBufsLen+=z.length,this.initialBufsLen<32)return"";var j=L(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(j,this.options);for(var ae="",re=0;re<this.initialBufs.length;re++)ae+=this.decoder.write(this.initialBufs[re]);return this.initialBufs.length=this.initialBufsLen=0,ae}return this.decoder.write(z)},V.prototype.end=function(){if(!this.decoder){var z=L(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(z,this.options);for(var j="",ae=0;ae<this.initialBufs.length;ae++)j+=this.decoder.write(this.initialBufs[ae]);var re=this.decoder.end();return re&&(j+=re),this.initialBufs.length=this.initialBufsLen=0,j}return this.decoder.end()};function L(z,j){var ae=[],re=0,oe=0,ue=0,le=0,de=0;e:for(var he=0;he<z.length;he++)for(var _e=z[he],Ce=0;Ce<_e.length;Ce++)if(ae.push(_e[Ce]),ae.length===4){if(re===0){if(ae[0]===255&&ae[1]===254&&ae[2]===0&&ae[3]===0)return"utf-32le";if(ae[0]===0&&ae[1]===0&&ae[2]===254&&ae[3]===255)return"utf-32be"}if((ae[0]!==0||ae[1]>16)&&ue++,(ae[3]!==0||ae[2]>16)&&oe++,ae[0]===0&&ae[1]===0&&(ae[2]!==0||ae[3]!==0)&&de++,(ae[0]!==0||ae[1]!==0)&&ae[2]===0&&ae[3]===0&&le++,ae.length=0,re++,re>=100)break e}return de-ue>le-oe?"utf-32be":de-ue<le-oe?"utf-32le":j||"utf-32le"}return utf32}var utf16={},hasRequiredUtf16;function requireUtf16(){if(hasRequiredUtf16)return utf16;hasRequiredUtf16=1;var e=safer_1.Buffer;utf16.utf16be=n;function n(){}n.prototype.encoder=r,n.prototype.decoder=g,n.prototype.bomAware=!0;function r(){}r.prototype.write=function(L){for(var z=e.from(L,"ucs2"),j=0;j<z.length;j+=2){var ae=z[j];z[j]=z[j+1],z[j+1]=ae}return z},r.prototype.end=function(){};function g(){this.overflowByte=-1}g.prototype.write=function(L){if(L.length==0)return"";var z=e.alloc(L.length+1),j=0,ae=0;for(this.overflowByte!==-1&&(z[0]=L[0],z[1]=this.overflowByte,j=1,ae=2);j<L.length-1;j+=2,ae+=2)z[ae]=L[j+1],z[ae+1]=L[j];return this.overflowByte=j==L.length-1?L[L.length-1]:-1,z.slice(0,ae).toString("ucs2")},g.prototype.end=function(){this.overflowByte=-1},utf16.utf16=y;function y(L,z){this.iconv=z}y.prototype.encoder=k,y.prototype.decoder=$;function k(L,z){L=L||{},L.addBOM===void 0&&(L.addBOM=!0),this.encoder=z.iconv.getEncoder("utf-16le",L)}k.prototype.write=function(L){return this.encoder.write(L)},k.prototype.end=function(){return this.encoder.end()};function $(L,z){this.decoder=null,this.initialBufs=[],this.initialBufsLen=0,this.options=L||{},this.iconv=z.iconv}$.prototype.write=function(L){if(!this.decoder){if(this.initialBufs.push(L),this.initialBufsLen+=L.length,this.initialBufsLen<16)return"";var z=V(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(z,this.options);for(var j="",ae=0;ae<this.initialBufs.length;ae++)j+=this.decoder.write(this.initialBufs[ae]);return this.initialBufs.length=this.initialBufsLen=0,j}return this.decoder.write(L)},$.prototype.end=function(){if(!this.decoder){var L=V(this.initialBufs,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(L,this.options);for(var z="",j=0;j<this.initialBufs.length;j++)z+=this.decoder.write(this.initialBufs[j]);var ae=this.decoder.end();return ae&&(z+=ae),this.initialBufs.length=this.initialBufsLen=0,z}return this.decoder.end()};function V(L,z){var j=[],ae=0,re=0,oe=0;e:for(var ue=0;ue<L.length;ue++)for(var le=L[ue],de=0;de<le.length;de++)if(j.push(le[de]),j.length===2){if(ae===0){if(j[0]===255&&j[1]===254)return"utf-16le";if(j[0]===254&&j[1]===255)return"utf-16be"}if(j[0]===0&&j[1]!==0&&oe++,j[0]!==0&&j[1]===0&&re++,j.length=0,ae++,ae>=100)break e}return oe>re?"utf-16be":oe<re?"utf-16le":z||"utf-16le"}return utf16}var utf7={},hasRequiredUtf7;function requireUtf7(){if(hasRequiredUtf7)return utf7;hasRequiredUtf7=1;var e=safer_1.Buffer;utf7.utf7=n,utf7.unicode11utf7="utf7";function n(le,de){this.iconv=de}n.prototype.encoder=g,n.prototype.decoder=y,n.prototype.bomAware=!0;var r=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function g(le,de){this.iconv=de.iconv}g.prototype.write=function(le){return e.from(le.replace(r,function(de){return"+"+(de==="+"?"":this.iconv.encode(de,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},g.prototype.end=function(){};function y(le,de){this.iconv=de.iconv,this.inBase64=!1,this.base64Accum=""}for(var k=/[A-Za-z0-9\/+]/,$=[],V=0;V<256;V++)$[V]=k.test(String.fromCharCode(V));var L=43,z=45,j=38;y.prototype.write=function(le){for(var de="",he=0,_e=this.inBase64,Ce=this.base64Accum,Ne=0;Ne<le.length;Ne++)if(!_e)le[Ne]==L&&(de+=this.iconv.decode(le.slice(he,Ne),"ascii"),he=Ne+1,_e=!0);else if(!$[le[Ne]]){if(Ne==he&&le[Ne]==z)de+="+";else{var $e=Ce+this.iconv.decode(le.slice(he,Ne),"ascii");de+=this.iconv.decode(e.from($e,"base64"),"utf16-be")}le[Ne]!=z&&Ne--,he=Ne+1,_e=!1,Ce=""}if(!_e)de+=this.iconv.decode(le.slice(he),"ascii");else{var $e=Ce+this.iconv.decode(le.slice(he),"ascii"),xe=$e.length-$e.length%8;Ce=$e.slice(xe),$e=$e.slice(0,xe),de+=this.iconv.decode(e.from($e,"base64"),"utf16-be")}return this.inBase64=_e,this.base64Accum=Ce,de},y.prototype.end=function(){var le="";return this.inBase64&&this.base64Accum.length>0&&(le=this.iconv.decode(e.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",le},utf7.utf7imap=ae;function ae(le,de){this.iconv=de}ae.prototype.encoder=re,ae.prototype.decoder=oe,ae.prototype.bomAware=!0;function re(le,de){this.iconv=de.iconv,this.inBase64=!1,this.base64Accum=e.alloc(6),this.base64AccumIdx=0}re.prototype.write=function(le){for(var de=this.inBase64,he=this.base64Accum,_e=this.base64AccumIdx,Ce=e.alloc(le.length*5+10),Ne=0,$e=0;$e<le.length;$e++){var xe=le.charCodeAt($e);32<=xe&&xe<=126?(de&&(_e>0&&(Ne+=Ce.write(he.slice(0,_e).toString("base64").replace(/\//g,",").replace(/=+$/,""),Ne),_e=0),Ce[Ne++]=z,de=!1),de||(Ce[Ne++]=xe,xe===j&&(Ce[Ne++]=z))):(de||(Ce[Ne++]=j,de=!0),de&&(he[_e++]=xe>>8,he[_e++]=xe&255,_e==he.length&&(Ne+=Ce.write(he.toString("base64").replace(/\//g,","),Ne),_e=0)))}return this.inBase64=de,this.base64AccumIdx=_e,Ce.slice(0,Ne)},re.prototype.end=function(){var le=e.alloc(10),de=0;return this.inBase64&&(this.base64AccumIdx>0&&(de+=le.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),de),this.base64AccumIdx=0),le[de++]=z,this.inBase64=!1),le.slice(0,de)};function oe(le,de){this.iconv=de.iconv,this.inBase64=!1,this.base64Accum=""}var ue=$.slice();return ue[44]=!0,oe.prototype.write=function(le){for(var de="",he=0,_e=this.inBase64,Ce=this.base64Accum,Ne=0;Ne<le.length;Ne++)if(!_e)le[Ne]==j&&(de+=this.iconv.decode(le.slice(he,Ne),"ascii"),he=Ne+1,_e=!0);else if(!ue[le[Ne]]){if(Ne==he&&le[Ne]==z)de+="&";else{var $e=Ce+this.iconv.decode(le.slice(he,Ne),"ascii").replace(/,/g,"/");de+=this.iconv.decode(e.from($e,"base64"),"utf16-be")}le[Ne]!=z&&Ne--,he=Ne+1,_e=!1,Ce=""}if(!_e)de+=this.iconv.decode(le.slice(he),"ascii");else{var $e=Ce+this.iconv.decode(le.slice(he),"ascii").replace(/,/g,"/"),xe=$e.length-$e.length%8;Ce=$e.slice(xe),$e=$e.slice(0,xe),de+=this.iconv.decode(e.from($e,"base64"),"utf16-be")}return this.inBase64=_e,this.base64Accum=Ce,de},oe.prototype.end=function(){var le="";return this.inBase64&&this.base64Accum.length>0&&(le=this.iconv.decode(e.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",le},utf7}var sbcsCodec={},hasRequiredSbcsCodec;function requireSbcsCodec(){if(hasRequiredSbcsCodec)return sbcsCodec;hasRequiredSbcsCodec=1;var e=safer_1.Buffer;sbcsCodec._sbcs=n;function n(y,k){if(!y)throw new Error("SBCS codec is called without the data.");if(!y.chars||y.chars.length!==128&&y.chars.length!==256)throw new Error("Encoding '"+y.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(y.chars.length===128){for(var $="",V=0;V<128;V++)$+=String.fromCharCode(V);y.chars=$+y.chars}this.decodeBuf=e.from(y.chars,"ucs2");for(var L=e.alloc(65536,k.defaultCharSingleByte.charCodeAt(0)),V=0;V<y.chars.length;V++)L[y.chars.charCodeAt(V)]=V;this.encodeBuf=L}n.prototype.encoder=r,n.prototype.decoder=g;function r(y,k){this.encodeBuf=k.encodeBuf}r.prototype.write=function(y){for(var k=e.alloc(y.length),$=0;$<y.length;$++)k[$]=this.encodeBuf[y.charCodeAt($)];return k},r.prototype.end=function(){};function g(y,k){this.decodeBuf=k.decodeBuf}return g.prototype.write=function(y){for(var k=this.decodeBuf,$=e.alloc(y.length*2),V=0,L=0,z=0;z<y.length;z++)V=y[z]*2,L=z*2,$[L]=k[V],$[L+1]=k[V+1];return $.toString("ucs2")},g.prototype.end=function(){},sbcsCodec}var sbcsData,hasRequiredSbcsData;function requireSbcsData(){return hasRequiredSbcsData||(hasRequiredSbcsData=1,sbcsData={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},mik:{type:"_sbcs",chars:""},cp720:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",1e4:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}),sbcsData}var sbcsDataGenerated,hasRequiredSbcsDataGenerated;function requireSbcsDataGenerated(){return hasRequiredSbcsDataGenerated||(hasRequiredSbcsDataGenerated=1,sbcsDataGenerated={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\uFEFF"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}~`},iso646cn:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_\`abcdefghijklmnopqrstuvwxyz{|}`},iso646jp:{type:"_sbcs",chars:`\0\x07\b	
\v\f\r\x1B !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_\`abcdefghijklmnopqrstuvwxyz{|}`},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}),sbcsDataGenerated}var dbcsCodec={},hasRequiredDbcsCodec;function requireDbcsCodec(){if(hasRequiredDbcsCodec)return dbcsCodec;hasRequiredDbcsCodec=1;var e=safer_1.Buffer;dbcsCodec._dbcs=L;for(var n=-1,r=-2,g=-10,y=-1e3,k=new Array(256),$=-1,V=0;V<256;V++)k[V]=n;function L(re,oe){if(this.encodingName=re.encodingName,!re)throw new Error("DBCS codec is called without the data.");if(!re.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var ue=re.table();this.decodeTables=[],this.decodeTables[0]=k.slice(0),this.decodeTableSeq=[];for(var le=0;le<ue.length;le++)this._addDecodeChunk(ue[le]);if(typeof re.gb18030=="function"){this.gb18030=re.gb18030();var de=this.decodeTables.length;this.decodeTables.push(k.slice(0));var he=this.decodeTables.length;this.decodeTables.push(k.slice(0));for(var _e=this.decodeTables[0],le=129;le<=254;le++)for(var Ce=this.decodeTables[y-_e[le]],Ne=48;Ne<=57;Ne++){if(Ce[Ne]===n)Ce[Ne]=y-de;else if(Ce[Ne]>y)throw new Error("gb18030 decode tables conflict at byte 2");for(var $e=this.decodeTables[y-Ce[Ne]],xe=129;xe<=254;xe++){if($e[xe]===n)$e[xe]=y-he;else{if($e[xe]===y-he)continue;if($e[xe]>y)throw new Error("gb18030 decode tables conflict at byte 3")}for(var Ie=this.decodeTables[y-$e[xe]],ze=48;ze<=57;ze++)Ie[ze]===n&&(Ie[ze]=r)}}}this.defaultCharUnicode=oe.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var qe={};if(re.encodeSkipVals)for(var le=0;le<re.encodeSkipVals.length;le++){var Et=re.encodeSkipVals[le];if(typeof Et=="number")qe[Et]=!0;else for(var Ne=Et.from;Ne<=Et.to;Ne++)qe[Ne]=!0}if(this._fillEncodeTable(0,0,qe),re.encodeAdd)for(var _n in re.encodeAdd)Object.prototype.hasOwnProperty.call(re.encodeAdd,_n)&&this._setEncodeChar(_n.charCodeAt(0),re.encodeAdd[_n]);this.defCharSB=this.encodeTable[0][oe.defaultCharSingleByte.charCodeAt(0)],this.defCharSB===n&&(this.defCharSB=this.encodeTable[0]["?"]),this.defCharSB===n&&(this.defCharSB=63)}L.prototype.encoder=z,L.prototype.decoder=j,L.prototype._getDecodeTrieNode=function(re){for(var oe=[];re>0;re>>>=8)oe.push(re&255);oe.length==0&&oe.push(0);for(var ue=this.decodeTables[0],le=oe.length-1;le>0;le--){var de=ue[oe[le]];if(de==n)ue[oe[le]]=y-this.decodeTables.length,this.decodeTables.push(ue=k.slice(0));else if(de<=y)ue=this.decodeTables[y-de];else throw new Error("Overwrite byte in "+this.encodingName+", addr: "+re.toString(16))}return ue},L.prototype._addDecodeChunk=function(re){var oe=parseInt(re[0],16),ue=this._getDecodeTrieNode(oe);oe=oe&255;for(var le=1;le<re.length;le++){var de=re[le];if(typeof de=="string")for(var he=0;he<de.length;){var _e=de.charCodeAt(he++);if(55296<=_e&&_e<56320){var Ce=de.charCodeAt(he++);if(56320<=Ce&&Ce<57344)ue[oe++]=65536+(_e-55296)*1024+(Ce-56320);else throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+re[0])}else if(4080<_e&&_e<=4095){for(var Ne=4095-_e+2,$e=[],xe=0;xe<Ne;xe++)$e.push(de.charCodeAt(he++));ue[oe++]=g-this.decodeTableSeq.length,this.decodeTableSeq.push($e)}else ue[oe++]=_e}else if(typeof de=="number")for(var Ie=ue[oe-1]+1,he=0;he<de;he++)ue[oe++]=Ie++;else throw new Error("Incorrect type '"+typeof de+"' given in "+this.encodingName+" at chunk "+re[0])}if(oe>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+re[0]+": too long"+oe)},L.prototype._getEncodeBucket=function(re){var oe=re>>8;return this.encodeTable[oe]===void 0&&(this.encodeTable[oe]=k.slice(0)),this.encodeTable[oe]},L.prototype._setEncodeChar=function(re,oe){var ue=this._getEncodeBucket(re),le=re&255;ue[le]<=g?this.encodeTableSeq[g-ue[le]][$]=oe:ue[le]==n&&(ue[le]=oe)},L.prototype._setEncodeSequence=function(re,oe){var ue=re[0],le=this._getEncodeBucket(ue),de=ue&255,he;le[de]<=g?he=this.encodeTableSeq[g-le[de]]:(he={},le[de]!==n&&(he[$]=le[de]),le[de]=g-this.encodeTableSeq.length,this.encodeTableSeq.push(he));for(var _e=1;_e<re.length-1;_e++){var Ce=he[ue];typeof Ce=="object"?he=Ce:(he=he[ue]={},Ce!==void 0&&(he[$]=Ce))}ue=re[re.length-1],he[ue]=oe},L.prototype._fillEncodeTable=function(re,oe,ue){for(var le=this.decodeTables[re],de=!1,he={},_e=0;_e<256;_e++){var Ce=le[_e],Ne=oe+_e;if(!ue[Ne])if(Ce>=0)this._setEncodeChar(Ce,Ne),de=!0;else if(Ce<=y){var $e=y-Ce;if(!he[$e]){var xe=Ne<<8>>>0;this._fillEncodeTable($e,xe,ue)?de=!0:he[$e]=!0}}else Ce<=g&&(this._setEncodeSequence(this.decodeTableSeq[g-Ce],Ne),de=!0)}return de};function z(re,oe){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=oe.encodeTable,this.encodeTableSeq=oe.encodeTableSeq,this.defaultCharSingleByte=oe.defCharSB,this.gb18030=oe.gb18030}z.prototype.write=function(re){for(var oe=e.alloc(re.length*(this.gb18030?4:3)),ue=this.leadSurrogate,le=this.seqObj,de=-1,he=0,_e=0;;){if(de===-1){if(he==re.length)break;var Ce=re.charCodeAt(he++)}else{var Ce=de;de=-1}if(55296<=Ce&&Ce<57344)if(Ce<56320)if(ue===-1){ue=Ce;continue}else ue=Ce,Ce=n;else ue!==-1?(Ce=65536+(ue-55296)*1024+(Ce-56320),ue=-1):Ce=n;else ue!==-1&&(de=Ce,Ce=n,ue=-1);var Ne=n;if(le!==void 0&&Ce!=n){var $e=le[Ce];if(typeof $e=="object"){le=$e;continue}else typeof $e=="number"?Ne=$e:$e==null&&($e=le[$],$e!==void 0&&(Ne=$e,de=Ce));le=void 0}else if(Ce>=0){var xe=this.encodeTable[Ce>>8];if(xe!==void 0&&(Ne=xe[Ce&255]),Ne<=g){le=this.encodeTableSeq[g-Ne];continue}if(Ne==n&&this.gb18030){var Ie=ae(this.gb18030.uChars,Ce);if(Ie!=-1){var Ne=this.gb18030.gbChars[Ie]+(Ce-this.gb18030.uChars[Ie]);oe[_e++]=129+Math.floor(Ne/12600),Ne=Ne%12600,oe[_e++]=48+Math.floor(Ne/1260),Ne=Ne%1260,oe[_e++]=129+Math.floor(Ne/10),Ne=Ne%10,oe[_e++]=48+Ne;continue}}}Ne===n&&(Ne=this.defaultCharSingleByte),Ne<256?oe[_e++]=Ne:Ne<65536?(oe[_e++]=Ne>>8,oe[_e++]=Ne&255):Ne<16777216?(oe[_e++]=Ne>>16,oe[_e++]=Ne>>8&255,oe[_e++]=Ne&255):(oe[_e++]=Ne>>>24,oe[_e++]=Ne>>>16&255,oe[_e++]=Ne>>>8&255,oe[_e++]=Ne&255)}return this.seqObj=le,this.leadSurrogate=ue,oe.slice(0,_e)},z.prototype.end=function(){if(!(this.leadSurrogate===-1&&this.seqObj===void 0)){var re=e.alloc(10),oe=0;if(this.seqObj){var ue=this.seqObj[$];ue!==void 0&&(ue<256?re[oe++]=ue:(re[oe++]=ue>>8,re[oe++]=ue&255)),this.seqObj=void 0}return this.leadSurrogate!==-1&&(re[oe++]=this.defaultCharSingleByte,this.leadSurrogate=-1),re.slice(0,oe)}},z.prototype.findIdx=ae;function j(re,oe){this.nodeIdx=0,this.prevBytes=[],this.decodeTables=oe.decodeTables,this.decodeTableSeq=oe.decodeTableSeq,this.defaultCharUnicode=oe.defaultCharUnicode,this.gb18030=oe.gb18030}j.prototype.write=function(re){for(var oe=e.alloc(re.length*2),ue=this.nodeIdx,le=this.prevBytes,de=this.prevBytes.length,he=-this.prevBytes.length,_e,Ce=0,Ne=0;Ce<re.length;Ce++){var $e=Ce>=0?re[Ce]:le[Ce+de],_e=this.decodeTables[ue][$e];if(!(_e>=0))if(_e===n)_e=this.defaultCharUnicode.charCodeAt(0),Ce=he;else if(_e===r){if(Ce>=3)var xe=(re[Ce-3]-129)*12600+(re[Ce-2]-48)*1260+(re[Ce-1]-129)*10+($e-48);else var xe=(le[Ce-3+de]-129)*12600+((Ce-2>=0?re[Ce-2]:le[Ce-2+de])-48)*1260+((Ce-1>=0?re[Ce-1]:le[Ce-1+de])-129)*10+($e-48);var Ie=ae(this.gb18030.gbChars,xe);_e=this.gb18030.uChars[Ie]+xe-this.gb18030.gbChars[Ie]}else if(_e<=y){ue=y-_e;continue}else if(_e<=g){for(var ze=this.decodeTableSeq[g-_e],qe=0;qe<ze.length-1;qe++)_e=ze[qe],oe[Ne++]=_e&255,oe[Ne++]=_e>>8;_e=ze[ze.length-1]}else throw new Error("iconv-lite internal error: invalid decoding table value "+_e+" at "+ue+"/"+$e);if(_e>=65536){_e-=65536;var Et=55296|_e>>10;oe[Ne++]=Et&255,oe[Ne++]=Et>>8,_e=56320|_e&1023}oe[Ne++]=_e&255,oe[Ne++]=_e>>8,ue=0,he=Ce+1}return this.nodeIdx=ue,this.prevBytes=he>=0?Array.prototype.slice.call(re,he):le.slice(he+de).concat(Array.prototype.slice.call(re)),oe.slice(0,Ne).toString("ucs2")},j.prototype.end=function(){for(var re="";this.prevBytes.length>0;){re+=this.defaultCharUnicode;var oe=this.prevBytes.slice(1);this.prevBytes=[],this.nodeIdx=0,oe.length>0&&(re+=this.write(oe))}return this.prevBytes=[],this.nodeIdx=0,re};function ae(re,oe){if(re[0]>oe)return-1;for(var ue=0,le=re.length;ue<le-1;){var de=ue+(le-ue+1>>1);re[de]<=oe?ue=de:le=de}return ue}return dbcsCodec}const require$$0=[["0","\0",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]],require$$1=[["0","\0",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]],require$$2$1=[["0","\0",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]],require$$3=[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93],["8135f437",""]],uChars=[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],gbChars=[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189e3],require$$4={uChars,gbChars},require$$5=[["0","\0",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]],require$$6=[["0","\0",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]],require$$7=[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]];var dbcsData,hasRequiredDbcsData;function requireDbcsData(){return hasRequiredDbcsData||(hasRequiredDbcsData=1,dbcsData={shiftjis:{type:"_dbcs",table:function(){return require$$0},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return require$$1},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return require$$2$1}},gbk:{type:"_dbcs",table:function(){return require$$2$1.concat(require$$3)}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return require$$2$1.concat(require$$3)},gb18030:function(){return require$$4},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return require$$5}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return require$$6}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return require$$6.concat(require$$7)},encodeSkipVals:[36457,36463,36478,36523,36532,36557,36560,36695,36713,36718,36811,36862,36973,36986,37060,37084,37105,37311,37551,37552,37553,37554,37585,37959,38090,38361,38652,39285,39798,39800,39803,39878,39902,39916,39926,40002,40019,40034,40040,40043,40055,40124,40125,40144,40279,40282,40388,40431,40443,40617,40687,40701,40800,40907,41079,41180,41183,36812,37576,38468,38637,41636,41637,41639,41638,41676,41678]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}),dbcsData}var hasRequiredEncodings;function requireEncodings(){return hasRequiredEncodings||(hasRequiredEncodings=1,function(e){for(var n=[requireInternal(),requireUtf32(),requireUtf16(),requireUtf7(),requireSbcsCodec(),requireSbcsData(),requireSbcsDataGenerated(),requireDbcsCodec(),requireDbcsData()],r=0;r<n.length;r++){var g=n[r];for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(e[y]=g[y])}}(encodings)),encodings}var streams,hasRequiredStreams;function requireStreams(){if(hasRequiredStreams)return streams;hasRequiredStreams=1;var e=safer_1.Buffer;return streams=function(n){var r=n.Transform;function g(k,$){this.conv=k,$=$||{},$.decodeStrings=!1,r.call(this,$)}g.prototype=Object.create(r.prototype,{constructor:{value:g}}),g.prototype._transform=function(k,$,V){if(typeof k!="string")return V(new Error("Iconv encoding stream needs strings as its input."));try{var L=this.conv.write(k);L&&L.length&&this.push(L),V()}catch(z){V(z)}},g.prototype._flush=function(k){try{var $=this.conv.end();$&&$.length&&this.push($),k()}catch(V){k(V)}},g.prototype.collect=function(k){var $=[];return this.on("error",k),this.on("data",function(V){$.push(V)}),this.on("end",function(){k(null,e.concat($))}),this};function y(k,$){this.conv=k,$=$||{},$.encoding=this.encoding="utf8",r.call(this,$)}return y.prototype=Object.create(r.prototype,{constructor:{value:y}}),y.prototype._transform=function(k,$,V){if(!e.isBuffer(k)&&!(k instanceof Uint8Array))return V(new Error("Iconv decoding stream needs buffers as its input."));try{var L=this.conv.write(k);L&&L.length&&this.push(L,this.encoding),V()}catch(z){V(z)}},y.prototype._flush=function(k){try{var $=this.conv.end();$&&$.length&&this.push($,this.encoding),k()}catch(V){k(V)}},y.prototype.collect=function(k){var $="";return this.on("error",k),this.on("data",function(V){$+=V}),this.on("end",function(){k(null,$)}),this},{IconvLiteEncoderStream:g,IconvLiteDecoderStream:y}},streams}const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(__viteBrowserExternal$1);(function(e){var n=safer_1.Buffer,r=bomHandling,g=e.exports;g.encodings=null,g.defaultCharUnicode="",g.defaultCharSingleByte="?",g.encode=function($,V,L){$=""+($||"");var z=g.getEncoder(V,L),j=z.write($),ae=z.end();return ae&&ae.length>0?n.concat([j,ae]):j},g.decode=function($,V,L){typeof $=="string"&&(g.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),g.skipDecodeWarning=!0),$=n.from(""+($||""),"binary"));var z=g.getDecoder(V,L),j=z.write($),ae=z.end();return ae?j+ae:j},g.encodingExists=function($){try{return g.getCodec($),!0}catch{return!1}},g.toEncoding=g.encode,g.fromEncoding=g.decode,g._codecDataCache={},g.getCodec=function($){g.encodings||(g.encodings=requireEncodings());for(var V=g._canonicalizeEncoding($),L={};;){var z=g._codecDataCache[V];if(z)return z;var j=g.encodings[V];switch(typeof j){case"string":V=j;break;case"object":for(var ae in j)L[ae]=j[ae];L.encodingName||(L.encodingName=V),V=j.type;break;case"function":return L.encodingName||(L.encodingName=V),z=new j(L,g),g._codecDataCache[L.encodingName]=z,z;default:throw new Error("Encoding not recognized: '"+$+"' (searched as: '"+V+"')")}}},g._canonicalizeEncoding=function(k){return(""+k).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},g.getEncoder=function($,V){var L=g.getCodec($),z=new L.encoder(V,L);return L.bomAware&&V&&V.addBOM&&(z=new r.PrependBOM(z,V)),z},g.getDecoder=function($,V){var L=g.getCodec($),z=new L.decoder(V,L);return L.bomAware&&!(V&&V.stripBOM===!1)&&(z=new r.StripBOM(z,V)),z},g.enableStreamingAPI=function($){if(!g.supportsStreams){var V=requireStreams()($);g.IconvLiteEncoderStream=V.IconvLiteEncoderStream,g.IconvLiteDecoderStream=V.IconvLiteDecoderStream,g.encodeStream=function(z,j){return new g.IconvLiteEncoderStream(g.getEncoder(z,j),j)},g.decodeStream=function(z,j){return new g.IconvLiteDecoderStream(g.getDecoder(z,j),j)},g.supportsStreams=!0}};var y;try{y=require$$2}catch{}y&&y.Transform?g.enableStreamingAPI(y):g.encodeStream=g.decodeStream=function(){throw new Error("iconv-lite Streaming API is not enabled. Use iconv.enableStreamingAPI(require('stream')); to enable it.")}})(lib);var libExports=lib.exports;const iconv=getDefaultExportFromCjs(libExports),types$6={version:"uint16",count:"uint16",storageOffset:"Offset16",langTagCount:"uint16",length:"uint16",langTagOffset:"Offset16",platformID:"uint16",encodingID:"uint16",languageID:"uint16",nameID:"uint16",stringOffset:"Offset16",stringPool:"raw"},parse$c=(e,n,r)=>{start(e,n);const g=decoder[types$6.version](),y=decoder[types$6.version](),k=decoder[types$6.storageOffset](),$=[];for(let L=0;L<y;L++){const z=decoder[types$6.platformID](),j=decoder[types$6.encodingID](),ae=decoder[types$6.languageID](),re=decoder[types$6.nameID](),oe=decoder[types$6.length](),ue=decoder[types$6.stringOffset](),le=getStorageString(e,ue,oe);$.push({platformID:z,encodingID:j,languageID:ae,nameID:re,length:oe,stringOffset:ue,str:le})}const V={version:g,count:y,storageOffset:k,nameRecord:$};if(g>=1&&(V.langTagCount=decoder[types$6.version](),V.langTagRecord=[],V.langTagCount))for(let L=0;L<V.langTagCount;L++){const z=decoder[types$6.length](),j=decoder[types$6.langTagOffset](),ae=getStorageString(e,j,z);V.langTagRecord.push({length:z,langTagOffset:j,str:ae})}return end$1(),V},nameTableNames=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],macLanguages={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},windowsLanguages={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},reverseDict=e=>{const n={};for(let r in e)n[e[r]]=parseInt(r);return n},findSubArray=(e,n)=>{const r=e.length,g=n.length-r+1;e:for(let y=0;y<g;y++)for(;y<g;y++){for(let k=0;k<r;k++)if(n[y+k]!==e[k])continue e;return y}return-1},addStringToPool=(e,n)=>{let r=findSubArray(e,n);if(r<0){r=n.length;let g=0;const y=e.length;for(;g<y;++g)n.push(e[g])}return r},createTable2=e=>{const n=[],r=[];let g="",y=!1,k=!1;for(let V=0;V<e.length;V++){const L=e[V];L.nameID===4&&L.langID===1033?g=L.value:L.nameID===3&&L.langID===1033?y=!0:L.nameID===3&&L.langID===2052&&(k=!0)}!k&&e.push({nameID:3,nameLabel:"uniqueID",platformID:3,encodingID:1,langID:2052,value:g,default:!0}),!y&&e.push({nameID:3,nameLabel:"uniqueID",platformID:3,encodingID:1,langID:1033,value:g,default:!0});for(let V=0;V<e.length;V++){const{value:L,nameID:z,langID:j,encodingID:ae,platformID:re}=e[V];if(re!=3)break;let oe=encoder.utf16(L);const ue=addStringToPool(oe,r);n.push({platformID:3,encodingID:ae,languageID:j,nameID:z,length:oe.length,stringOffset:ue})}return n.sort(function(V,L){return V.platformID-L.platformID||V.encodingID-L.encodingID||V.languageID-L.languageID||V.nameID-L.nameID}),{version:0,count:n.length,storageOffset:6+n.length*12,nameRecord:n,stringPool:r}},createTable$2=(e,n)=>{let r;const g=[],y={},k=reverseDict(nameTableNames);for(let j in e){let ae=k[j];if(ae===void 0&&(ae=j),r=parseInt(ae),isNaN(r))throw new Error('Name table entry "'+j+'" does not exist, see nameTableNames for complete list.');y[r]=e[j],g.push(r)}reverseDict(macLanguages);const $=reverseDict(windowsLanguages),V=[],L=[];for(let j=0;j<g.length;j++){r=g[j];const ae=y[r];for(let re in ae){const oe=ae[re];encoder.utf16(oe),re==="zh"&&[...iconv.encode(oe,"gbk")];let ue=$[re];if(ue!==void 0){let le=encoder.utf16(oe),de=1;const he=addStringToPool(le,L);V.push({platformID:3,encodingID:de,languageID:ue,nameID:r,length:le.length,stringOffset:he})}}}return V.sort(function(j,ae){return j.platformID-ae.platformID||j.encodingID-ae.encodingID||j.languageID-ae.languageID||j.nameID-ae.nameID}),{version:0,count:V.length,storageOffset:6+V.length*12,nameRecord:V,stringPool:L}},create$8=e=>{let n=[];return Object.keys(e).forEach(r=>{const g=types$6[r],y=e[r];let k=[];if(r==="nameRecord"){const $=y;for(let V=0;V<$.length;V++){const L=$[V];Object.keys(L).forEach(z=>{if(z!=="str"){const j=types$6[z],ae=L[z];k=k.concat(encoder[j](ae))}})}}else if(r==="langTagRecord"){const $=y;for(let V=0;V<$.length;V++){const L=$[V];Object.keys(L).forEach(z=>{if(z!=="str"){const j=types$6[z],ae=L[z];k=k.concat(encoder[j](ae))}})}}else k=k.concat(encoder[g](y));k&&(n=n.concat(k))}),n},nameTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$8,createTable:createTable$2,createTable2,nameTableNames,parse:parse$c},Symbol.toStringTag,{value:"Module"})),types$5={version:"Version16Dot16",italicAngle:"Fixed",underlinePosition:"FWORD",underlineThickness:"FWORD",isFixedPitch:"uint32",minMemType42:"uint32",maxMemType42:"uint32",minMemType1:"uint32",maxMemType1:"uint32",numGlyphs:"uint16",glyphNameIndex:"uint16",stringData:"uint8",offset:"int8"},parse$b=(e,n,r)=>{start(e,n);const g=decoder[types$5.version](),y=decoder[types$5.italicAngle](),k=decoder[types$5.underlinePosition](),$=decoder[types$5.underlineThickness](),V=decoder[types$5.isFixedPitch](),L=decoder[types$5.minMemType42](),z=decoder[types$5.maxMemType42](),j=decoder[types$5.minMemType1](),ae=decoder[types$5.maxMemType1](),re={version:g,italicAngle:y,underlinePosition:k,underlineThickness:$,isFixedPitch:V,minMemType42:L,maxMemType42:z,minMemType1:j,maxMemType1:ae};if(g===2){const oe=decoder[types$5.numGlyphs](),ue=[];for(let le=0;le<oe;le++){const de=decoder[types$5.glyphNameIndex](),he={index:de};de>=258&&de<65535&&(he.code=decoder.uint8(),he.name=String.fromCharCode(he.code)),ue.push(he)}re.glyphNames=ue}if(g===2.5){const oe=decoder[types$5.numGlyphs]();for(let ue=0;ue<oe;ue++)re.offsets?.push(decoder.int8())}return end$1(),re},create$7=e=>{let n=[];return Object.keys(e).forEach(r=>{const g=types$5[r],y=e[r];let k=[];if(r==="glyphNames"){const $=y;k=k.concat(encoder[types$5.numGlyphs]($.length));for(let V=0;V<$.length;V++)k=k.concat(encoder[g]($[V].index));for(let V=0;V<$.length;V++)$[V].index>=258&&$[V].index<65535&&(k=k.concat(encoder[g]($[V].name)))}else if(r==="offsets"){const $=y;k=k.concat(encoder[types$5.numGlyphs]($.length));for(let V=0;V<$.length;V++)k=k.concat(encoder[g]($[V]))}else k=k.concat(encoder[g](y));k&&(n=n.concat(k))}),n},postTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$7,parse:parse$b},Symbol.toStringTag,{value:"Module"})),types$4={version:"uint16",numTables:"uint16",platformID:"uint16",encodingID:"uint16",subtableOffset:"Offset32",format:"uint16",length:"uint16",language:"uint16",segCountX2:"uint16",searchRange:"uint16",entrySelector:"uint16",rangeShift:"uint16",endCode:"uint16",reservedPad:"uint16",startCode:"uint16",idDelta:"int16",idRangeOffsets:"uint16",glyphIdArray:"uint16"},parse$a=(e,n,r)=>{let g=n;start(e,g);const y=decoder[types$4.version](),k=decoder[types$4.numTables]();g=getOffset(),end$1();const $=[],V={};for(let z=0;z<k;z++){start(e,g);const j=decoder[types$4.platformID](),ae=decoder[types$4.encodingID](),re=decoder[types$4.subtableOffset]();g=getOffset(),end$1();const oe=getSubTable(e,n+re,V);$.push({platformID:j,encodingID:ae,subtableOffset:re,subTable:oe})}return{version:y,numTables:k,encodingRecords:$,glyphIndexMap:V}},getSubTable=(e,n,r)=>{let g=null;start(e,n);const y=decoder[types$4.format]();switch(y){case 4:{const k=decoder[types$4.length](),$=decoder[types$4.language](),V=decoder[types$4.segCountX2](),L=decoder[types$4.searchRange](),z=decoder[types$4.entrySelector](),j=decoder[types$4.rangeShift](),ae=V/2,re=[],oe=getOffset();end$1();for(let ue=0;ue<ae;ue++){const le=e.getUint16(oe+ue*2),de=e.getUint16(oe+ae*2+2+ue*2),he=e.getInt16(oe+ae*4+2+ue*2),_e=e.getUint16(oe+ae*6+2+ue*2);re.push({endCode:le,startCode:de,idDelta:he,idRangeOffset:_e});for(let Ce=de;Ce<=le;Ce+=1){let Ne;if(_e!==0){const $e=oe+ae*6+2+ue*2+(Ce-de)*2+_e;Ne=e.getUint16($e),Ne!==0&&(Ne=Ne+he&65535)}else Ne=Ce+he&65535;r[Ce]=Ne}}g={format:y,length:k,language:$,segCount:ae,searchRange:L,entrySelector:z,rangeShift:j,glyphIndexMap:r,segments:re};break}case 12:{const k=decoder.uint16(),$=decoder.uint32(),V=decoder.uint32(),L=decoder.uint32(),z=getOffset();end$1();const j=[];for(let ae=0;ae<L;ae++){const re=e.getUint32(z+ae*12),oe=e.getUint32(z+ae*12+4);let ue=e.getUint32(z+ae*12+8);j.push({startCharCode:re,endCharCode:oe,startGlyphId:ue});for(let le=re;le<=oe;le++)r[le]=ue,ue++}return{format:y,reserved:k,length:$,language:V,groupCount:L,glyphIndexMap:r,groups:j}}}return end$1(),g},validateAndFixCharacterMapping=e=>{const n=new Set,r=new Set;for(let y=0;y<e.length;y++){const k=e[y];k.unicode!==void 0&&k.unicode!==null&&(k.unicode>=32&&k.unicode<=126?n.add(k.unicode):k.unicode>=19968&&k.unicode<=40959&&r.add(k.unicode))}const g=[];for(const y of n)r.has(y)&&g.push(y);return g.length>0&&console.warn(`Found Unicode conflicts: ${g.map(y=>`${y} (${String.fromCharCode(y)})`).join(", ")}`),e},ensureCorrectCharacterMapping=e=>{const n=e.findIndex(r=>r.unicode===0);if(n>0){const r=e.splice(n,1)[0];e.unshift(r)}if(e.length>1){const r=e.slice(1).sort((g,y)=>g.unicode===void 0||g.unicode===null?1:y.unicode===void 0||y.unicode===null?-1:g.unicode-y.unicode);e.splice(1,e.length-1,...r)}return e},createTable$1=e=>{const n=validateAndFixCharacterMapping(e),r=ensureCorrectCharacterMapping([...n]);let g=!0,y;for(y=r.length-1;y>0;y-=1)if(r[y].unicode>65535){g=!1;break}const k={version:0,numTables:g?2:3,encodingRecords:[]};k.encodingRecords.push({platformID:0,encodingID:3,subtableOffset:g?20:28}),k.encodingRecords.push({platformID:3,encodingID:1,subtableOffset:g?20:28}),g||k.encodingRecords.push({platformID:3,encodingID:10,subtableOffset:28}),k.encodingRecords[0].subTable={format:4,length:0,language:0,segCount:0,searchRange:0,entrySelector:0,rangeShift:0},k.encodingRecords[1].subTable={format:4,length:0,language:0,segCount:0,searchRange:0,entrySelector:0,rangeShift:0},g||(k.encodingRecords[k.encodingRecords.length-1].subTable={format:12,reserved:0,length:0,language:0,groupCount:0});const $=[],V=[],L={},z={},j=new Map;for(y=0;y<r.length;y++){const le=r[y];le.unicode!==void 0&&le.unicode!==null&&j.set(le.unicode,y)}let ae=[],re=null;for(let le=0;le<r.length;le++){const de=r[le];de.unicode!==void 0&&de.unicode!==null&&de.unicode<=65535?(re?de.unicode===re.endCode+1&&-(de.unicode-le)===re.idDelta?re.endCode=de.unicode:(ae.push(re),re={startCode:de.unicode,endCode:de.unicode,idDelta:-(de.unicode-le),idRangeOffset:0}):re={startCode:de.unicode,endCode:de.unicode,idDelta:-(de.unicode-le),idRangeOffset:0},L[de.unicode]=le):de.unicode!==void 0&&de.unicode!==null&&!g&&(V.push({startCharCode:de.unicode,endCharCode:de.unicode,startGlyphId:le}),z[de.unicode]=le)}re&&ae.push(re),$.length=0,$.push(...ae),$.push({endCode:65535,startCode:65535,idDelta:1,idRangeOffset:0}),$.sort(function(le,de){return le.startCode-de.startCode});const oe=Math.max(...r.map(le=>le.unicode||0));for(let le=0;le<=Math.min(oe+1e3,65535);le++)L[le]||(L[le]=0);g||(k.encodingRecords[k.encodingRecords.length-1].subTable.groups=V,k.encodingRecords[k.encodingRecords.length-1].subTable.glyphIndexMap=z),k.encodingRecords[0].subTable.segments=$,k.encodingRecords[1].subTable.segments=clone($),k.encodingRecords[0].subTable.glyphIndexMap=L,k.encodingRecords[1].subTable.glyphIndexMap=clone(L);const ue=$.length;return k.encodingRecords[0].subTable.segCount=ue,k.encodingRecords[1].subTable.segCount=ue,k.encodingRecords[0].subTable.searchRange=Math.pow(2,Math.floor(Math.log(ue)/Math.log(2)))*2,k.encodingRecords[1].subTable.searchRange=Math.pow(2,Math.floor(Math.log(ue)/Math.log(2)))*2,k.encodingRecords[0].subTable.entrySelector=Math.log(k.encodingRecords[0].subTable.searchRange/2)/Math.log(2),k.encodingRecords[1].subTable.entrySelector=Math.log(k.encodingRecords[1].subTable.searchRange/2)/Math.log(2),k.encodingRecords[0].subTable.rangeShift=ue*2-k.encodingRecords[0].subTable.searchRange,k.encodingRecords[1].subTable.rangeShift=ue*2-k.encodingRecords[1].subTable.searchRange,k.encodingRecords[0].subTable.length=16+$.length*8,k.encodingRecords[1].subTable.length=16+$.length*8,k.encodingRecords[1].subtableOffset+=k.encodingRecords[0].subTable.length,g||(k.encodingRecords[k.encodingRecords.length-1].subtableOffset+=k.encodingRecords[0].subTable.length+k.encodingRecords[1].subTable.length,k.encodingRecords[k.encodingRecords.length-1].subTable.length=16+V.length*4,k.encodingRecords[k.encodingRecords.length-1].subTable.groupCount=V.length),k},create$6=e=>{let n=[];return Object.keys(e).forEach(r=>{const g=types$4[r],y=e[r];let k=[];if(r==="encodingRecords"){const $=y;for(let V=0;V<$.length;V++){const L=$[V];Object.keys(L).forEach(z=>{if(z!=="subTable"){const j=types$4[z],ae=L[z];k=k.concat(encoder[j](ae))}})}for(let V=0;V<$.length;V++){const L=$[V].subTable;if(L.format===4){Object.keys(L).forEach(ae=>{if(ae==="segCount"){const re=types$4.segCountX2,oe=L[ae]*2;k=k.concat(encoder[re](oe))}else if(ae!=="glyphIndexMap"&&ae!=="segments"){const re=types$4[ae],oe=L[ae];k=k.concat(encoder[re](oe))}});const z=L.segments,j=k.length;setByesAt(k,encoder.uint16(0),j+z.length*2);for(let ae=0;ae<z.length;ae++){const re=z[ae];setByesAt(k,encoder[types$4.endCode](re.endCode),j+ae*2),setByesAt(k,encoder[types$4.startCode](re.startCode),j+z.length*2+2+ae*2),setByesAt(k,encoder[types$4.idDelta](re.idDelta),j+z.length*4+2+ae*2),setByesAt(k,encoder[types$4.idRangeOffsets](re.idRangeOffset),j+z.length*6+2+ae*2);for(let oe=re.startCode;oe<=re.endCode;oe+=1){const ue=L.glyphIndexMap[oe];if(re.idRangeOffset!==0){const le=j+z.length*8+2+(oe-re.startCode)*2+re.idRangeOffset;setByesAt(k,encoder[types$4.glyphIdArray](ue),le)}}}}else if(L.format===12){k=k.concat(encoder.uint16(L.format)),k=k.concat(encoder.uint16(L.reserved)),k=k.concat(encoder.uint32(L.length)),k=k.concat(encoder.uint32(L.language)),k=k.concat(encoder.uint32(L.groupCount));for(let z=0;z<L.groupCount;z++)k=k.concat(encoder.uint32(L.groups.startCharCode)),k=k.concat(encoder.uint32(L.groups.endCharCode)),k=k.concat(encoder.uint32(L.groups.startGlyphId))}}}else k=k.concat(encoder[g](y));k&&(n=n.concat(k))}),n},cmapTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$6,createTable:createTable$1,parse:parse$a},Symbol.toStringTag,{value:"Module"})),types$3={advanceWidth:"uint16",lsb:"int16",leftSideBearings:"int16"},parse$9=(e,n,r)=>{const g=r.settings.numberOfHMetrics,y=r.settings.numGlyphs,k=[],$=[];start(e,n);for(let L=0;L<g;L++){const z=decoder[types$3.advanceWidth](),j=decoder[types$3.lsb]();k.push({advanceWidth:z,lsb:j})}for(let L=0;L<y-g;L++)$.push(decoder[types$3.leftSideBearings]());const V={hMetrics:k,leftSideBearings:$};return end$1(),V},create$5=e=>{let n=[];const r=e.hMetrics;for(let y=0;y<r.length;y++){const k=r[y];Object.keys(k).forEach($=>{const V=types$3[$],L=k[$];n=n.concat(encoder[V](L))})}const g=e.leftSideBearings;if(g)for(let y=0;y<g.length;y++)n=n.concat(encoder[types$3.leftSideBearings](g[y]));return n},hmtxTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$5,parse:parse$9},Symbol.toStringTag,{value:"Module"})),transformPoint=(e,n)=>({x:n.xScale*e.x+n.scale01*e.y+n.dx,y:n.scale10*e.x+n.yScale*e.y+n.dy}),parse$8=(e,n,r)=>{const g={glyphTables:[]},y=r.settings.numGlyphs,k=(r.tables?.filter(j=>j.name==="loca")[0].table).offsets;for(let j=0;j<y;j++)g.glyphTables.push(parseGlyph(e,n+k[j]));for(let j=0;j<y;j++){const ae=g.glyphTables[j];if(ae.isComposite){ae.contours=[];for(var $=0;$<ae.components.length;$+=1){const re=ae.components[$],oe=g.glyphTables[re.glyphIndex];if(oe.contours.length){let ue=[];if(re.matchedPoints===void 0){ue=clone(oe.contours);for(let le=0;le<ue.length;le++){const de=ue[le].paths;for(let he=0;he<de.length;he++){const _e=de[he];_e.start=transformPoint(_e.start,re),_e.end=transformPoint(_e.end,re),_e.type===PathType.QUADRATIC_BEZIER&&(_e.control=transformPoint(_e.control,re))}}}else{let le=[];for(let he=0;he<ae.contours.length;he++){const _e=ae.contours[he];le=le.concat(_e.points)}let de=[];for(let he=0;he<oe.contours.length;he++){const _e=oe.contours[he];de=de.concat(_e.points)}if(re.matchedPoints[0]>le.length-1||re.matchedPoints[1]>le.length-1)break;var V=le[re.matchedPoints[0]],L=de[re.matchedPoints[1]],z={xScale:re.xScale,scale01:re.scale01,scale10:re.scale10,yScale:re.yScale,dx:0,dy:0};L=transformPoint(L,z),z.dx=V.x-L.x,z.dy=V.y-L.y,ue=clone(oe.contours);for(let he=0;he<ue.length;he++){const _e=ue[he].paths;for(let Ce=0;Ce<_e.length;Ce++){const Ne=_e[Ce];Ne.start=transformPoint(Ne.start,z),Ne.end=transformPoint(Ne.start,z),Ne.type===PathType.QUADRATIC_BEZIER&&(Ne.control=transformPoint(Ne.control,z))}}}ae.contours.push(...ue)}}}}return g},parseGlyph=(e,n,r)=>{start(e,n);const g=decoder.int16(),y=decoder.int16(),k=decoder.int16(),$=decoder.int16(),V=decoder.int16(),L=[];let z=[],j=!1;const ae=[],re=[];let oe=0,ue=0;if(g<0){j=!0,z=[];let Ce=!0,Ne;for(;Ce;){Ne=decoder.uint16();const $e={glyphIndex:decoder.uint16(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0,matchedPoints:void 0};(Ne&1)>0?(Ne&2)>0?($e.dx=decoder.int16(),$e.dy=decoder.int16()):$e.matchedPoints=[decoder.uint16(),decoder.uint16()]:(Ne&2)>0?($e.dx=decoder.int8(),$e.dy=decoder.int8()):$e.matchedPoints=[decoder.uint8(),decoder.uint8()],(Ne&8)>0?$e.xScale=$e.yScale=decoder.F2DOT14():(Ne&64)>0?($e.xScale=decoder.F2DOT14(),$e.yScale=decoder.F2DOT14()):(Ne&128)>0&&($e.xScale=decoder.F2DOT14(),$e.scale01=decoder.F2DOT14(),$e.scale10=decoder.F2DOT14(),$e.yScale=decoder.F2DOT14()),z.push($e),Ce=!!(Ne&32)}if(Ne&256){const $e=decoder.uint16();for(let xe=0;xe<$e;xe++)ae.push(decoder.uint8())}}for(let Ce=0;Ce<g;Ce++)L.push(decoder.uint16());const le=decoder.uint16();for(let Ce=0;Ce<le;Ce++)ae.push(decoder.uint8());const de=[],he=L[L.length-1]+1;for(let Ce=0;Ce<he;Ce++){const Ne=decoder.uint8();if(de.push(Ne),(Ne&8)>0){const $e=decoder.uint8();for(let xe=0;xe<$e;xe++)de.push(Ne),Ce+=1}}for(let Ce=0;Ce<g;Ce++){const Ne=[],$e=[],xe=[],Ie=[];re.push({xCoordinates:Ne,yCoordinates:$e,points:xe,paths:Ie})}for(let Ce=0;Ce<g;Ce++){const Ne=Ce>0?L[Ce-1]+1:0,$e=L[Ce];for(let xe=Ne;xe<=$e;xe++){const Ie=parseGlyphCoordinate(decoder,de[xe],oe,2,16);re[Ce].xCoordinates.push(Ie),re[Ce].points.push({x:Ie,onCurve:!!(de[xe]&1)}),oe=Ie}}for(let Ce=0;Ce<g;Ce++){const Ne=Ce>0?L[Ce-1]+1:0,$e=L[Ce];for(let xe=Ne;xe<=$e;xe++){const Ie=parseGlyphCoordinate(decoder,de[xe],ue,4,32);re[Ce].yCoordinates.push(Ie),re[Ce].points[xe-Ne].y=Ie,ue=Ie}}for(let Ce=0;Ce<g;Ce++){const Ne=re[Ce],$e=Ne.points;let xe=null,Ie=$e[$e.length-1],ze=$e[0],qe=null;Ie.onCurve?qe=Ie:ze.onCurve?qe=ze:qe={x:(Ie.x+ze.x)*.5,y:(Ie.y+ze.y)*.5};for(let Et=0;Et<$e.length;Et++)if(xe=Ie,Ie=ze,ze=$e[(Et+1)%$e.length],Ie.onCurve){const _n={type:PathType.LINE,start:{x:qe.x,y:qe.y},end:{x:Ie.x,y:Ie.y}};qe=Ie,Ne.paths.push(_n)}else{let _n=ze;xe.onCurve||((Ie.x+xe.x)*.5,(Ie.y+xe.y)*.5),ze.onCurve||(_n={x:(Ie.x+ze.x)*.5,y:(Ie.y+ze.y)*.5});const Dt={type:PathType.QUADRATIC_BEZIER,start:{x:qe.x,y:qe.y},end:{x:_n.x,y:_n.y},control:{x:Ie.x,y:Ie.y}};qe=_n,Ne.paths.push(Dt)}}return end$1(),{numberOfContours:g,xMin:y,yMin:k,xMax:$,yMax:V,endPtsOfContours:L,instructionLength:le,instructions:ae,contours:re,flags:de,isComposite:j,components:z}},parseGlyphCoordinate=(e,n,r,g,y)=>{let k;return(n&g)>0?(k=e.uint8(),n&y||(k=-k),k=r+k):(n&y)>0?k=r:k=r+e.int16(),k},create$4=e=>{},glyfTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$4,parse:parse$8},Symbol.toStringTag,{value:"Module"})),parse$7=(e,n,r)=>{const g=r.settings.indexToLocFormat,y=r.settings.numGlyphs,k={offsets:[]};if(start(e,n),g===0)for(let $=0;$<y;$++)k.offsets.push(decoder.Offset16()*2);else if(g===1)for(let $=0;$<y;$++)k.offsets.push(decoder.Offset32());return end$1(),k},create$3=(e,n)=>{let r=[];for(let g=0;g<e.offsets.length;g++)if(n.version===0){const y=encoder.Offset16(e.offsets[g]);y&&(r=r.concat(y))}else if(n.version===1){const y=encoder.Offset32(e.offsets[g]);y&&(r=r.concat(y))}return r},locaTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$3,parse:parse$7},Symbol.toStringTag,{value:"Module"})),types$2={major:"Card8",minor:"Card8",hdrSize:"Card8",offSize:"Card8"},TOP_DICT_META=[{name:"ros",op:1230,type:["SID","SID","number"]},{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset"},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],FONT_DICT_META=[{name:"ros",op:1230,type:["SID","SID","number"]},{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number"},{name:"italicAngle",op:1202,type:"number"},{name:"underlinePosition",op:1203,type:"number"},{name:"underlineThickness",op:1204,type:"number"},{name:"paintType",op:1205,type:"number"},{name:"charstringType",op:1206,type:"number"},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"]},{name:"strokeWidth",op:1208,type:"number"},{name:"xuid",op:14,type:[]},{name:"charset",op:15,type:"offset"},{name:"encoding",op:16,type:"offset"},{name:"charStrings",op:17,type:"offset"},{name:"fontName",op:1238,type:"SID"},{name:"private",op:18,type:["number","offset"]},{name:"cidFontVersion",op:1231,type:"number"},{name:"cidFontRevision",op:1232,type:"number"},{name:"cidFontType",op:1233,type:"number"},{name:"cidCount",op:1234,type:"number"},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"}],PRIVATE_DICT_META=[{name:"BlueValues",op:6,type:["number","number","number","number"]},{name:"OtherBlues",op:7,type:["number","number"]},{name:"FamilyBlues",op:8,type:"array"},{name:"FamilyOtherBlues",op:9,type:"array"},{name:"BlueScale",op:1209,type:"real"},{name:"BlueShift",op:1210,type:"number"},{name:"BlueFuzz",op:1211,type:"number"},{name:"StdHW",op:10,type:"number"},{name:"StdVW",op:11,type:"number"},{name:"StemSnapH",op:1212,type:"array"},{name:"StemSnapV",op:1213,type:"array"},{name:"ForceBold",op:1214,type:"number"},{name:"LanguageGroup",op:1217,type:"number"},{name:"ExpansionFactor",op:1218,type:"real"},{name:"initialRandomSeed",op:1219,type:"number"},{name:"Subrs",op:19,type:"offset"},{name:"defaultWidthX",op:20,type:"number"},{name:"nominalWidthX",op:21,type:"number"}],cffStandardStrings=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],cffStandardEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],cffExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],parseIndex=(e,n,r)=>{let g=[],y=n;start(e,n);let k=n;const $=decoder.uint16();g.push(e.getUint8(y)),y++,g.push(e.getUint8(y)),y++;const V=decoder.uint8();g.push(e.getUint8(y)),y++;const L=[],z=[],j=[];if($!==0){if(V<1||V>4)return{data:{configRawData:g,index:{count:0,offSize:V,offset:[],data:[]},data:[]},offset:n+3};for(let ae=0;ae<$+1;ae++)switch(V){case 1:{L.push(decoder.uint8()),g.push(e.getUint8(y)),y++;break}case 2:{L.push(decoder.uint16()),g.push(e.getUint8(y)),y++,g.push(e.getUint8(y)),y++;break}case 3:{L.push(decoder.uint24()),g.push(e.getUint8(y)),y++,g.push(e.getUint8(y)),y++,g.push(e.getUint8(y)),y++;break}case 4:{L.push(decoder.uint32()),g.push(e.getUint8(y)),y++,g.push(e.getUint8(y)),y++,g.push(e.getUint8(y)),y++,g.push(e.getUint8(y)),y++;break}}k=getOffset(),end$1();for(let ae=0;ae<L.length-1;ae++){const re=[];for(let oe=L[ae];oe<L[ae+1];oe++){let ue=0;typeof oe!="bigint"?ue=e.getUint8(k-1+oe):ue=e.getUint8(Number(BigInt(k-1)+oe)),re.push(ue)}z.push(re),j.push(r?r(re):re)}}return{data:{configRawData:g,index:{count:$,offSize:V,offset:L,data:z},data:j},offset:typeof L[$]=="bigint"?Number(BigInt(k-1)+($===0?BigInt(0):L[$])):k-1+($===0?0:L[$])}},parseType2CharString=(e,n,r,g)=>{if(!e||!Array.isArray(e)||e.length===0)return{contours:[],commands:[],advanceWidth:0};const y=[];let k=[];const $=[];let V=null,L=0,z=0,j=0,ae=[],re,oe,ue,le;if(g.settings.isCIDFont){const _e=r._fdSelect[n],Ce=r._fdArray[_e];re=Ce._subrs,oe=Ce._subrsBias,ue=Ce._defaultWidthX,le=Ce._nominalWidthX}else re=r._subrs,oe=r._subrsBias,ue=r._defaultWidthX,le=r._nominalWidthX;const de=()=>{ae.length>1&&ae.length%2!==0&&(V=ae.shift())},he=_e=>{if(!_e)return;let Ce=0;for(;Ce<_e.length;){const Ne=_e[Ce];if(typeof Ne!="number"||Ne<0||Ne>255){Ce++;continue}switch(Ce++,Ne){case 1:{V===null&&de(),L+=ae.length>>1;const $e=[];for(;ae.length;)$e.push(ae.shift());$.push({command:"hstem",data:$e});break}case 3:{V===null&&de(),L+=ae.length>>1;const $e=[];for(;ae.length;)$e.push(ae.shift());$.push({command:"vstem",data:$e});break}case 18:{V===null&&de(),L+=ae.length>>1;const $e=[];for(;ae.length;)$e.push(ae.shift());$.push({command:"hstemhm",data:$e});break}case 23:{V===null&&de(),L+=ae.length>>1;const $e=[];for(;ae.length;)$e.push(ae.shift());$.push({command:"vstemhm",data:$e});break}case 19:{V===null&&de(),L+=ae.length>>1;const $e=[];for(;ae.length;)$e.push(ae.shift());const xe=[];let Ie=L+7>>3;for(;Ie;)xe.push(_e[Ce+Ie]),Ie--;Ce+=L+7>>3,$.push({command:"hintmask",data:$e,mask:xe});break}case 20:{V===null&&de(),L+=ae.length>>1;const $e=[];for(;ae.length;)$e.push(ae.shift());const xe=[];let Ie=L+7>>3;for(;Ie;)xe.push(_e[Ce+Ie]),Ie--;Ce+=L+7>>3,$.push({command:"cntrmask",data:$e,mask:xe});break}case 21:{V===null&&de(),k.length&&(y.push(k),k=[]);const $e=ae.pop(),xe=ae.pop();z+=xe,j+=$e,isNaN(z)&&(z=0),isNaN(j)&&(j=0),$.push({command:"rmoveto",data:[xe,$e]});break}case 4:{if(V===null&&de(),k.length&&(y.push(k),k=[]),ae.length===0)j+=0;else{const $e=ae.pop();j+=$e,isNaN(j)&&(j=0),$.push({command:"vmoveto",data:[$e]})}break}case 22:{V===null&&de(),k.length&&(y.push(k),k=[]);const $e=ae.pop();z+=$e,isNaN(z)&&(z=0),$.push({command:"hmoveto",data:[$e]});break}case 5:{const $e=[];for(;ae.length;){const xe=ae.shift(),Ie=ae.shift();k.push({type:PathType.LINE,start:{x:z,y:j},end:{x:z+xe,y:j+Ie}}),z+=xe,j+=Ie,isNaN(z)&&(z=0),isNaN(j)&&(j=0),$e.push(xe),$e.push(Ie)}$.push({command:"rlineto",data:$e});break}case 6:{const $e=[];for(;ae.length;){const xe=ae.shift();if($e.push(xe),k.push({type:PathType.LINE,start:{x:z,y:j},end:{x:z+xe,y:j}}),z+=xe,ae.length){const Ie=ae.shift();$e.push(Ie),k.push({type:PathType.LINE,start:{x:z,y:j},end:{x:z,y:j+Ie}}),j+=Ie}}$.push({command:"hlineto",data:$e});break}case 7:{const $e=[];for(;ae.length;){const xe=ae.shift();if($e.push(xe),k.push({type:PathType.LINE,start:{x:z,y:j},end:{x:z,y:j+xe}}),j+=xe,ae.length){const Ie=ae.shift();$e.push(Ie),k.push({type:PathType.LINE,start:{x:z,y:j},end:{x:z+Ie,y:j}}),z+=Ie}}$.push({command:"vlineto",data:$e});break}case 8:{const $e=[];for(;ae.length;){const xe=ae.shift(),Ie=ae.shift(),ze=ae.shift(),qe=ae.shift(),Et=ae.shift(),_n=ae.shift();k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+xe,y:j+Ie},control2:{x:z+xe+ze,y:j+Ie+qe},end:{x:z+xe+ze+Et,y:j+Ie+qe+_n}}),z+=xe+ze+Et,j+=Ie+qe+_n,$e.push(xe,Ie,ze,qe,Et,_n)}$.push({command:"rrcurveto",data:$e});break}case 27:{const $e=[];let xe=0;for(ae.length%2!==0&&(xe=ae.shift(),$e.push(xe));ae.length;){const Ie=ae.shift(),ze=ae.shift(),qe=ae.shift(),Et=ae.shift();k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+Ie,y:j+xe},control2:{x:z+Ie+ze,y:j+xe+qe},end:{x:z+Ie+ze+Et,y:j+xe+qe}}),z+=Ie+ze+Et,xe?(j+=xe+qe,xe=0):j+=qe,$e.push(Ie,ze,qe,Et)}$.push({command:"hhcurveto",data:$e});break}case 26:{const $e=[];let xe=0;for(ae.length%2!==0&&(xe=ae.shift(),$e.push(xe));ae.length;){const Ie=ae.shift(),ze=ae.shift(),qe=ae.shift(),Et=ae.shift();k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+xe,y:j+Ie},control2:{x:z+xe+ze,y:j+Ie+qe},end:{x:z+xe+ze,y:j+Ie+qe+Et}}),xe?(z+=xe+ze,xe=0):z+=ze,j+=Ie+qe+Et,$e.push(Ie,ze,qe,Et)}$.push({command:"vvcurveto",data:$e});break}case 31:{const $e=[];for(;ae.length>0;){const xe=ae.shift(),Ie=ae.shift(),ze=ae.shift(),qe=ae.shift(),Et=ae.length===1?ae.shift():null;if(k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+xe,y:j},control2:{x:z+xe+Ie,y:j+ze},end:{x:Et===null?z+xe+Ie:z+xe+Ie+Et,y:j+ze+qe}}),z+=Et===null?xe+Ie:xe+Ie+Et,j+=ze+qe,$e.push(xe,Ie,ze,qe),Et!==null&&$e.push(Et),ae.length===0)break;const _n=ae.shift(),Dt=ae.shift(),Sn=ae.shift(),hn=ae.shift(),Vn=ae.length===1?ae.shift():null;k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z,y:j+_n},control2:{x:z+Dt,y:j+_n+Sn},end:{x:z+Dt+hn,y:Vn===null?j+_n+Sn:j+_n+Sn+Vn}}),z+=Dt+hn,j+=Vn===null?_n+Sn:_n+Sn+Vn,$e.push(_n,Dt,Sn,hn),Vn!==null&&$e.push(Vn)}$.push({command:"hvcurveto",data:$e});break}case 30:{const $e=[];for(;ae.length>0;){const xe=ae.shift(),Ie=ae.shift(),ze=ae.shift(),qe=ae.shift(),Et=ae.length===1?ae.shift():null;if(k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z,y:j+xe},control2:{x:z+Ie,y:j+xe+ze},end:{x:z+Ie+qe,y:Et===null?j+xe+ze:j+xe+ze+Et}}),z+=Ie+qe,j+=Et===null?xe+ze:xe+ze+Et,$e.push(xe,Ie,ze,qe),Et!==null&&$e.push(Et),ae.length===0)break;const _n=ae.shift(),Dt=ae.shift(),Sn=ae.shift(),hn=ae.shift(),Vn=ae.length===1?ae.shift():null;k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+_n,y:j},control2:{x:z+_n+Dt,y:j+Sn},end:{x:Vn===null?z+_n+Dt:z+_n+Dt+Vn,y:j+Sn+hn}}),z+=Vn===null?_n+Dt:_n+Dt+Vn,j+=Sn+hn,$e.push(_n,Dt,Sn,hn),Vn!==null&&$e.push(Vn)}$.push({command:"vhcurveto",data:$e});break}case 24:{const $e=[];for(;ae.length>2;){const ze=ae.shift(),qe=ae.shift(),Et=ae.shift(),_n=ae.shift(),Dt=ae.shift(),Sn=ae.shift();k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+ze,y:j+qe},control2:{x:z+ze+Et,y:j+qe+_n},end:{x:z+ze+Et+Dt,y:j+qe+_n+Sn}}),z+=ze+Et+Dt,j+=qe+_n+Sn,$e.push(ze,qe,Et,_n,Dt,Sn)}const xe=ae.shift(),Ie=ae.shift();k.push({type:PathType.LINE,start:{x:z,y:j},end:{x:z+xe,y:j+Ie}}),z+=xe,j+=Ie,$e.push(xe,Ie),$.push({command:"rcurveline",data:$e});break}case 25:{const $e=[];for(;ae.length>6;){const Dt=ae.shift(),Sn=ae.shift();k.push({type:PathType.LINE,start:{x:z,y:j},end:{x:z+Dt,y:j+Sn}}),z+=Dt,j+=Sn,$e.push(Dt,Sn)}const xe=ae.shift(),Ie=ae.shift(),ze=ae.shift(),qe=ae.shift(),Et=ae.shift(),_n=ae.shift();k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+xe,y:j+Ie},control2:{x:z+xe+ze,y:j+Ie+qe},end:{x:z+xe+ze+Et,y:j+Ie+qe+_n}}),z+=xe+ze+Et,j+=Ie+qe+_n,$e.push(xe,Ie,ze,qe,Et,_n),$.push({command:"rlinecurve",data:$e});break}case 12:{const $e=_e[Ce];switch(Ce++,$e){case 35:{const xe=[],Ie=ae.shift(),ze=ae.shift(),qe=ae.shift(),Et=ae.shift(),_n=ae.shift(),Dt=ae.shift(),Sn=ae.shift(),hn=ae.shift(),Vn=ae.shift(),Mn=ae.shift(),$n=ae.shift(),Nn=ae.shift(),kn=ae.shift();k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+Ie,y:j+ze},control2:{x:z+Ie+qe,y:j+ze+Et},end:{x:z+Ie+qe+_n,y:j+ze+Et+Dt}}),z+=Ie+qe+_n,j+=ze+Et+Dt,k.push({type:PathType.CUBIC_BEZIER,start:{x:z+Ie+qe+_n,y:j+ze+Et+Dt},control1:{x:z+Ie+qe+_n+Sn,y:j+ze+Et+Dt+hn},control2:{x:z+Ie+qe+_n+Sn+Vn,y:j+ze+Et+Dt+hn+Mn},end:{x:z+Ie+qe+_n+Sn+Vn+$n,y:j+ze+Et+Dt+hn+Mn+Nn}}),z+=Sn+Vn+$n,j+=hn+Mn+Nn,xe.push(Ie,ze,qe,Et,_n,Dt,Sn,hn,Vn,Mn,$n,Nn,kn),$.push({command:"flex",data:xe});break}case 34:{const xe=[],Ie=ae.shift(),ze=ae.shift(),qe=ae.shift(),Et=ae.shift(),_n=ae.shift(),Dt=ae.shift(),Sn=ae.shift();k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+Ie,y:j},control2:{x:z+Ie+ze,y:j+qe},end:{x:z+Ie+ze+Et,y:j+qe}}),k.push({type:PathType.CUBIC_BEZIER,start:{x:z+Ie+ze+Et,y:j+qe},control1:{x:z+Ie+ze+Et+_n,y:j+qe},control2:{x:z+Ie+ze+Et+_n+Dt,y:j},end:{x:z+Ie+ze+Et+_n+Dt+Sn,y:j}}),z+=Ie+ze+Et+_n+Dt+Sn,xe.push(Ie,ze,qe,Et,_n,Dt,Sn),$.push({command:"hflex",data:xe});break}case 36:{const xe=[],Ie=ae.shift(),ze=ae.shift(),qe=ae.shift(),Et=ae.shift(),_n=ae.shift(),Dt=ae.shift(),Sn=ae.shift(),hn=ae.shift(),Vn=ae.shift();k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+Ie,y:j+ze},control2:{x:z+Ie+qe,y:j+ze+Et},end:{x:z+Ie+qe+_n,y:j+ze+Et}}),k.push({type:PathType.CUBIC_BEZIER,start:{x:z+Ie+qe+_n,y:j+ze+Et},control1:{x:z+Ie+qe+_n+Dt,y:j+ze+Et},control2:{x:z+Ie+qe+_n+Dt+Sn,y:j+ze+Et+hn},end:{x:z+Ie+qe+_n+Dt+Sn+Vn,y:j}}),z+=Ie+qe+_n+Dt+Sn+Vn,xe.push(Ie,ze,qe,Et,_n,Dt,Sn,hn,Vn),$.push({command:"hflex1",data:xe});break}case 37:{const xe=[],Ie=ae.shift(),ze=ae.shift(),qe=ae.shift(),Et=ae.shift(),_n=ae.shift(),Dt=ae.shift(),Sn=ae.shift(),hn=ae.shift(),Vn=ae.shift(),Mn=ae.shift(),$n=ae.shift(),Nn=Math.abs(Ie+qe+_n+Sn+Vn)-Math.abs(ze+Et+Dt+hn+Mn);k.push({type:PathType.CUBIC_BEZIER,start:{x:z,y:j},control1:{x:z+Ie,y:j+ze},control2:{x:z+Ie+qe,y:j+ze+Et},end:{x:z+Ie+qe+_n,y:j+ze+Et+Dt}}),z+=Ie+qe+_n,j+=ze+Et+Dt,k.push({type:PathType.CUBIC_BEZIER,start:{x:z+Ie+qe+_n,y:j+ze+Et+Dt},control1:{x:z+Ie+qe+_n+Sn,y:j+ze+Et+Dt+hn},control2:{x:z+Ie+qe+_n+Sn+Vn,y:j+ze+Et+Dt+hn+Mn},end:{x:z+Ie+qe+_n+Sn+Vn+(Nn>0?$n:0),y:j+ze+Et+Dt+hn+Mn+(Nn<0?$n:0)}}),z+=Sn+Vn+(Nn>0?$n:0),j+=hn+Mn+(Nn<0?$n:0),xe.push(Ie,ze,qe,Et,_n,Dt,Sn,hn,Vn,Mn,$n),$.push({command:"flex1",data:xe});break}}break}case 10:{const $e=ae.pop()+oe,xe=re[$e];xe&&([...k],he(xe));break}case 29:{const $e=ae.pop()+g.settings.gsubrsBias,xe=g.settings.gsubrs[$e];xe&&he(xe);break}case 11:return;case 14:{V===null&&de(),k.length&&y.push(k);break}default:{if(!(Ne<32))if(Ne<247){const $e=Ne-139;ae.push($e)}else if(Ne<251){const $e=_e[Ce];Ce+=1;const xe=(Ne-247)*256+$e+108;ae.push(xe)}else if(Ne<255){const $e=_e[Ce];Ce+=1;const xe=-(Ne-251)*256-$e-108;ae.push(xe)}else{const $e=_e[Ce],xe=_e[Ce+1],Ie=_e[Ce+2],ze=_e[Ce+3];Ce+=4;const qe=($e<<24|xe<<16|Ie<<8|ze)/65536;ae.push(qe)}break}}}};return he(e),V?le!=null&&(V=le+V):V=ue,{contours:y,commands:$,advanceWidth:V}},parseDict=(e,n=0,r)=>{const g=[];let y=[];start(e,n);let k=getOffset();for(;getOffset()-k<r&&!(getOffset()>=e.byteLength);){let $=decoder.uint8();if($<=21)$===12&&($=1200+decoder.uint8()),g.push([$,y]),y=[];else{const{value:V,offset:L}=parseOperand(e,getOffset(),$);y.push(V),setOffset(L)}}return end$1(),entriesToObject(g)},parseOperand=(e,n,r)=>{let g,y,k,$;if(start(e,n),r===28)return g=decoder.uint8(),y=decoder.uint8(),{value:g<<8|y,offset:getOffset()};if(r===29)return g=decoder.uint8(),y=decoder.uint8(),k=decoder.uint8(),$=decoder.uint8(),{value:g<<24|y<<16|k<<8|$,offset:getOffset()};if(r===30)return parseFloatOperand(e,n);if(r>=32&&r<=246)return{value:r-139,offset:n};if(r>=247&&r<=250)return g=decoder.uint8(),{value:(r-247)*256+g+108,offset:getOffset()};if(r>=251&&r<=254)return g=decoder.uint8(),{value:-(r-251)*256-g-108,offset:getOffset()};throw end$1(),new Error("Invalid b0 "+r)},parseFloatOperand=(e,n)=>{let r="";const y=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];for(start(e,n);;){const k=decoder.uint8(),$=k>>4,V=k&15;if($===15||(r+=y[$],V===15))break;r+=y[V]}return{value:parseFloat(r),offset:getOffset()}},interpretDict=(e,n,r)=>{const g={};let y;for(let k=0;k<n.length;k+=1){const $=n[k];if(Array.isArray($.type)){const V=[];V.length=$.type.length;for(let L=0;L<$.type.length;L++)y=e[$.op]!==void 0?e[$.op][L]:void 0,y===void 0&&(y=$.value!==void 0&&$.value[L]!==void 0?$.value[L]:null),$.type[L]==="SID"&&(y=getString(r,y)),V[L]=y;g[$.name]=V}else y=e[$.op],y===void 0&&(y=$.value!==void 0?$.value:null),$.type==="SID"&&(y=getString(r,y)),g[$.name]=y}return g},entriesToObject=e=>{const n={};for(let r=0;r<e.length;r+=1){const g=e[r][0],y=e[r][1];let k;if(y.length===1?k=y[0]:k=y,n.hasOwnProperty(g)&&!isNaN(n[g]))throw new Error("Object "+n+" already has key "+g);n[g]=k}return n},parseTopDict=(e,n)=>{const r=parseDict(e,0,e.byteLength);return interpretDict(r,TOP_DICT_META,n)},parsePrivateDict=(e,n,r,g)=>{const y=parseDict(e,n,r);return interpretDict(y,PRIVATE_DICT_META,g)},calcSubroutineBias=e=>{let n;return e.length<1240?n=107:e.length<33900?n=1131:n=32768,n},gatherTopDicts=(e,n,r,g)=>{const y=[];for(let k=0;k<r.length;k+=1){const $=new DataView(new Uint8Array(r[k]).buffer),V=parseTopDict($,g);V._subrs=[],V._subrsBias=0,V._defaultWidthX=0,V._nominalWidthX=0;const L=V.private[0],z=V.private[1];if(L!==null&&z!==null&&L!==0&&z!==0){const j=parsePrivateDict(e,z+n,L,g);if(V._defaultWidthX=j.defaultWidthX,V._nominalWidthX=j.nominalWidthX,j.Subrs!==0){const ae=z+j.Subrs,re=parseIndex(e,ae+n);V._subrs=re.data.data,V._subrsBias=calcSubroutineBias(V._subrs)}V._privateDict=j}y.push(V)}return y},createFDSelect=e=>{const n=[];n.push(0);for(let r=0;r<e.length;r++)n.push(0);return n},parseFDSelect=(e,n,r,g)=>{const y=[];let k;const $=e.getUint8(n);if($===0)for(let V=0;V<r;V++){if(k=e.getUint8(n+1+V),k>=g)throw new Error("CFF table CID Font FDSelect has bad FD index value "+k+" (FD count "+g+")");y.push(k)}else if($===3){const V=e.getUint16(n+1);let L=e.getUint16(n+3);if(L!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+L);let z;for(let j=0;j<V;j++){if(k=e.getUint8(n+5+j*3),z=e.getUint16(n+5+j*3+1),k>=g)throw new Error("CFF table CID Font FDSelect has bad FD index value "+k+" (FD count "+g+")");if(z>r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+z);for(;L<z;L++)y.push(k);L=z}if(z!==r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+z)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+$);return y},parseHeader=(e,n)=>{start(e,n);const r=decoder.uint8(),g=decoder.uint8(),y=decoder.uint8(),k=decoder.uint8(),$={major:r,minor:g,hdrSize:y,offSize:k},V=getOffset();return end$1(),{data:$,offset:V}},parseEncodings=(e,n)=>{start(e,n);const r=decoder.uint8(),g={format:r};if(r&0){g.nCodes=decoder.uint8(),g.code=[];for(let k=0;k<g.nCodes;k+=1)g.code.push(decoder.uint8())}else if(r&1){g.nRanges=decoder.uint8(),g.Range1=[],g.code=[];for(let k=0;k<g.nRanges;k+=1){const $=decoder.uint8(),V=decoder.uint8();g.Range1.push({first:$,nLeft:V});for(let L=$;L<=$+V;L+=1)g.code.push(L)}}if(r!==0&&r!==1){g.nSups=decoder.uint8(),g.supplement=[];for(let k=0;k<g.nSups;k+=1){const $={};$.code=decoder.uint8(),$.glyph=decoder.uint8(),g.supplement.push($)}}const y=getOffset();return end$1(),{data:g,offset:y}},getString=(e,n)=>{let r="";return n<=390?r=cffStandardStrings[n]:r=e[n-391],r},parseCharsets=(e,n,r,g)=>{start(e,n);const y=r.settings.numGlyphs?r.settings.numGlyphs-1:0,k=[".notdef"],$=decoder.uint8();if($===0)for(let V=0;V<y;V+=1){const L=decoder.uint16();k.push(getString(g.data,L))}else if($===1)for(;k.length<=y;){let V=decoder.uint16(),L=decoder.uint8();for(let z=0;z<=L;z+=1)k.push(getString(g.data,V)),V+=1}else if($===2)for(;k.length<=y;){let V=decoder.uint16(),L=decoder.uint8();for(let z=0;z<=L;z+=1)k.push(getString(g.data,V)),V+=1}else throw new Error("Unknown charset format "+$);return end$1(),{format:$,data:k}},parse$6=(e,n,r)=>{const g=parseHeader(e,n),y=parseIndex(e,g.offset),k=parseIndex(e,y.offset),$=parseIndex(e,k.offset,Ce=>{let Ne="";for(let $e=0;$e<Ce.length;$e+=1)Ne+=String.fromCharCode(Ce[$e]);return Ne}),V=parseIndex(e,$.offset);r.settings.gsubrs=V.data.data,r.settings.gsubrsBias=calcSubroutineBias(V.data.data);const z=gatherTopDicts(e,V.offset,k.data.data,$.data.data)[0];if(z._privateDict&&(r.settings.defaultWidthX=z._privateDict.defaultWidthX,r.settings.nominalWidthX=z._privateDict.nominalWidthX),z.ros[0]!==void 0&&z.ros[1]!==void 0&&(r.settings.isCIDFont=!0),r.settings.isCIDFont){let Ce=z.fdArray,Ne=z.fdSelect;if(Ce===0||Ne===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");Ce+=n;const $e=parseIndex(e,Ce),xe=gatherTopDicts(e,n,$e.data.data,$.data.data);z._fdArray=xe,Ne+=n,z._fdSelect=parseFDSelect(e,Ne,r.settings.numGlyphs,xe.length)}const j=n+z.private[1],ae=parsePrivateDict(e,j,z.private[0],$.data.data);if(r.settings.defaultWidthX=ae.defaultWidthX,r.settings.nominalWidthX=ae.nominalWidthX,ae.subrs!==0){const Ce=j+ae.subrs,Ne=parseIndex(e,Ce);r.settings.subrs=Ne.data.data,r.settings.subrsBias=calcSubroutineBias(r.settings.subrs)}else r.settings.subrs=[],r.settings.subrsBias=0;let re=null;z.encoding===0?re=cffStandardEncoding:z.encoding===1?re=cffExpertEncoding:re=parseEncodings(e,n+z.encoding);const oe=parseCharsets(e,n+z.charset,r,$.data),ue=n+z.charStrings,le=parseIndex(e,ue),de=[];le.data.index.count;const he=le.data.data,_e=oe.data.length;for(let Ce=0;Ce<_e;Ce++){let Ne;Ce<he.length?Ne=he[Ce]:Ne=[];try{const $e=parseType2CharString(Ne,Ce,z,r);de.push($e)}catch{de.push({contours:[],commands:[],advanceWidth:0})}}return{header:g,nameIndex:y,topDictIndex:k,stringIndex:$,globalSubrIndex:V,encodings:re,charsets:oe,charStringIndex:le,topDict:z,glyphTables:de}},createIndex=e=>{let n=1;const r=[n];let g=[];for(let V=0;V<e.length;V+=1){const L=e[V].type,z=e[V].value,j=encoder[L](z);g=g.concat(j),n+=j.length,r.push(n)}if(g.length===0)return[0,0];const y=[],k=4,$=[void 0,encoder.uint8,encoder.uint16,encoder.uint24,encoder.uint32][k];for(let V=0;V<r.length;V+=1){const L=$(r[V]);Array.prototype.push.apply(y,L)}return Array.prototype.concat(encoder.Card16(e.length),encoder.OffSize(k),y,g)};function equals(e,n){if(e===n)return!0;if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r+=1)if(!equals(e[r],n[r]))return!1;return!0}else return!1}function encodeString(e,n){let r,g=cffStandardStrings.indexOf(e);g>=0&&(r=g);const y=encodeToASCII(e);return g=n.indexOf(y),g>=0?r=g+cffStandardStrings.length:(r=cffStandardStrings.length+n.length,n.push(y)),r}function encodeToASCII(e){return typeof e=="number"?e:e.split("").map(n=>{const r=n.charCodeAt(0);return r<128?n:`${r.toString(16).padStart(4,"0")}`}).join("")}const createDict=(e,n,r)=>{const g=[];for(let k=0;k<e.length;k+=1){const $=e[k];let V=n[$.name];if(V!==void 0&&!equals(V,$.value)){if($.type==="SID"&&(V=encodeString(V,r)),Array.isArray(V)){V=Object.assign([],V);for(let L=0;L<V.length;L++)$.type[L]==="SID"&&(V[L]=encodeString(V[L],r))}g.push({op:$.op,name:$.name,type:$.type,value:V})}}let y=[];for(let k=0;k<g.length;k+=1){const $=g[k],V=$.op;y=y.concat(encoder.Operand($.value,$.type)),y=y.concat(encoder.Operator(V))}return y},glyphToOps=e=>{const{lsb:n,xMin:r}=e,g=V=>V-r+n,y=[];y.push({name:"width",type:"number",value:e.advanceWidth});let k=0,$=0;for(let V=0;V<e.contours.length;V++){if(!e.contours[V].length)continue;const L=e.contours[V][0],z=Math.round(g(L.start.x)-k),j=Math.round(L.start.y-$);y.push({name:"dx",type:"number",value:z}),y.push({name:"dy",type:"number",value:j}),y.push({name:"rmoveto",type:"op",value:21}),k=Math.round(g(L.start.x)),$=Math.round(L.start.y);for(let ae=0;ae<e.contours[V].length;ae++){const re=e.contours[V][ae];switch(re.type){case PathType.LINE:{const oe=Math.round(g(re.end.x)-k),ue=Math.round(re.end.y-$);y.push({name:"dx",type:"number",value:oe}),y.push({name:"dy",type:"number",value:ue}),y.push({name:"rlineto",type:"op",value:5}),k=Math.round(g(re.end.x)),$=Math.round(re.end.y);break}case PathType.CUBIC_BEZIER:{const oe=Math.round(g(re.control1.x)-k),ue=Math.round(re.control1.y-$),le=Math.round(g(re.control2.x)-g(re.control1.x)),de=Math.round(re.control2.y-re.control1.y),he=Math.round(g(re.end.x)-g(re.control2.x)),_e=Math.round(re.end.y-re.control2.y);y.push({name:"dx1",type:"number",value:oe}),y.push({name:"dy1",type:"number",value:ue}),y.push({name:"dx2",type:"number",value:le}),y.push({name:"dy2",type:"number",value:de}),y.push({name:"dx",type:"number",value:he}),y.push({name:"dy",type:"number",value:_e}),y.push({name:"rrcurveto",type:"op",value:8}),k=Math.round(g(re.end.x)),$=Math.round(re.end.y)}}}}return y.push({name:"endchar",type:"op",value:14}),y},createTable=(e,n)=>{const r=1/n.unitsPerEm,g={header:{major:1,minor:0,hdrSize:4,offSize:2},nameIndex:{data:[n.postScriptName]},globalSubrIndex:{data:[]},topDict:{version:n.version,fullName:n.fullName,familyName:n.familyName,weight:n.weightName,fontBBox:n.fontBBox||[0,0,0,0],fontMatrix:[r,0,0,r,0,0],charset:999,charStrings:999,ros:["Adobe","GB1",5],cidFontVersion:1,cidFontRevision:0,cidFontType:0,cidCount:e.length,isFixedPitch:1,fdArray:0,fdSelect:0}},y=[];for(let $=1;$<e.length;$++)y.push(e[$].name);const k=[];return g.charsets={format:0,data:y},g.glyphTables=e.map($=>({numberOfContours:$.contourNum,contours:$.contours,advanceWidth:$.advanceWidth,lsb:$.leftSideBearing,rsb:$.rightSideBearing,xMin:$.xMin,xMax:$.xMax,yMin:$.yMin,yMax:$.yMax})),g.stringIndex={data:k},g},create$2=async e=>{const n=e,r=n.header;let g=[];const y=n.glyphTables;Object.keys(r).forEach(Et=>{const _n=types$2[Et],Dt=r[Et],Sn=encoder[_n](Dt);Sn&&(g=g.concat(Sn))});const k=n.nameIndex,$=createIndex(k.data.map(Et=>({type:"Name",value:Et}))),V=[],L=[0,0],z=n.charsets.data;let j=[];j=j.concat(encoder.Card8(0));for(let Et=0;Et<z.length;Et+=1){const _n=Et+1;j=j.concat(encoder.SID(_n))}const ae=[],re=100,oe=y.length;for(let Et=0;Et<oe;Et+=re){const _n=Math.min(Et+re,oe);for(let Dt=Et;Dt<_n;Dt++){loaded$1.value++;const Sn=y[Dt],hn=glyphToOps(Sn);ae.push({type:"CharString",value:hn})}await new Promise(Dt=>setTimeout(Dt,0))}const ue=createIndex(ae),le={private:[0,0],fontBBox:n.topDict.fontBBox,fontMatrix:n.topDict.fontMatrix,fontName:n.topDict.familyName,weight:n.topDict.weight};let de=createDict(FONT_DICT_META,le,V),he=createIndex([{type:"raw",value:de}]);const _e=createFDSelect(y);let Ce=createDict(TOP_DICT_META,n.topDict,V),Ne=createIndex([{type:"raw",value:Ce}]),xe=createDict(PRIVATE_DICT_META,{BlueValues:[-16,16,800,16],OtherBlues:[-216,16],BlueScale:.039625,BlueShift:7,BlueFuzz:1,ForcedBold:0,LanguageGroup:0,ExpansionFactor:.06,initialRandomSeed:0,defaultWidthX:0,nominalWidthX:0,StdHW:50,StdVW:100},V);n.stringIndex;const Ie=createIndex(V.map(Et=>({type:"Name",value:Et}))),ze=g.length+$.length+Ne.length+Ie.length+L.length;return n.topDict.charset=ze,n.topDict.charStrings=n.topDict.charset+j.length+_e.length,n.topDict.fdArray=n.topDict.charStrings+ue.length,n.topDict.fdSelect=n.topDict.charset+j.length,le.private[0]=xe.length,le.private[1]=n.topDict.charStrings+ue.length+he.length,de=createDict(FONT_DICT_META,le,V),he=createIndex([{type:"raw",value:de}]),Ce=createDict(TOP_DICT_META,n.topDict,V),Ne=createIndex([{type:"raw",value:Ce}]),[...g,...$,...Ne,...Ie,...L,...j,..._e,...ue,...he,...xe]},cffTable=Object.freeze(Object.defineProperty({__proto__:null,create:create$2,createTable,parse:parse$6,parseType2CharString},Symbol.toStringTag,{value:"Module"})),tableTool={head:headTable,hhea:hheaTable,"OS/2":os2Table,maxp:maxpTable,name:nameTable,post:postTable,cmap:cmapTable,hmtx:hmtxTable,glyf:glyfTable,loca:locaTable,"CFF ":cffTable},types$1={sfntVersion:"Tag",numTables:"uint16",searchRange:"uint16",entrySelector:"uint16",rangeShift:"uint16",tag:"Tag",checkSum:"uint32",offset:"uint32",length:"uint32"},log2=e=>Math.log(e)/Math.log(2)|0,createRecord=e=>{let n=[];return Object.keys(e).forEach(r=>{const g=types$1[r],y=e[r],k=encoder[g](y);k&&(n=n.concat(k))}),n},createConfig=e=>{let n=[];return Object.keys(e).forEach(r=>{const g=types$1[r],y=e[r],k=encoder[g](y);k&&(n=n.concat(k))}),n},updateCharactersByTables=e=>{e.characters=parseTablesToCharacters(e.tables)},parse$5=(e,n)=>{start(e,0);const r=decoder[types$1.sfntVersion](),g=decoder[types$1.numTables](),y=decoder[types$1.searchRange](),k=decoder[types$1.entrySelector](),$=decoder[types$1.rangeShift](),V={sfntVersion:r,numTables:g,searchRange:y,entrySelector:k,rangeShift:$};n.tableConfig=V;for(let z=0;z<g;z++){const j=decoder[types$1.tag](),ae=decoder[types$1.checkSum](),re=decoder[types$1.offset](),oe=decoder[types$1.length](),ue={name:j.tagStr,table:null,config:{tableTag:j,checkSum:ae,offset:re,length:oe}};n.tables.push(ue)}end$1();const L={head:1,maxp:2,loca:3,hhea:4,name:5,post:6,"OS/2":7,hmtx:8,cmap:9,glyf:10,"CFF ":11};return n.tables=n.tables.filter(z=>L[z.name]).sort((z,j)=>L[z.name]-L[j.name]),n.tables.map(z=>{z.table=tableTool[z.name]?.parse(e,z.config.offset,n)}),updateCharactersByTables(n),n},create$1=async(e,n="")=>{let r=0;const g=[],y={},k={},$=Object.keys(e),V=$.length,L=Math.pow(2,log2(V)),z=16*L,j=createConfig({sfntVersion:"OTTO",numTables:V,searchRange:z,entrySelector:log2(L),rangeShift:V*16-z});r+=computeCheckSum(j);let ae=[],re=[],oe=j.length+createRecord({tag:"xxxx",checkSum:0,offset:0,length:0}).length*V,ue=0;for(;oe%4!==0;)oe++,ue++;for(let le=0;le<$.length;le++){const de=e[$[le]];let he=null;$[le]==="CFF "?he=await tableTool[$[le]].create(de):he=tableTool[$[le]].create(de),k[$[le]]=he;let _e=computeCheckSum(he);if(_e%=4294967296,$[le]==="head"&&n==="final"){const $e=clone(de);$e.checkSumAdjustment=0;let xe=null;$[le]==="CFF "?xe=await tableTool[$[le]].create(de):xe=tableTool[$[le]].create(de),_e=computeCheckSum(xe),_e%=4294967296}const Ce=he.length,Ne=createRecord({tag:$[le],checkSum:_e,offset:oe,length:Ce});for(g.push({name:$[le],table:de,config:{tableTag:{tagStr:$[le]},checkSum:_e,offset:oe,length:Ce}}),r+=computeCheckSum(Ne),r+=computeCheckSum(he),y[$[le]]=Ne,re=re.concat(he),oe+=Ce;oe%4!==0;)oe++,re=re.concat(encoder.uint8(0))}$.sort((le,de)=>le>de?1:-1);for(let le=0;le<$.length;le++){const de=y[$[le]];ae=ae.concat(de)}for(let le=0;le<ue;le++)ae=ae.concat(encoder.uint8(0));return{data:[...j,...ae,...re],tables:g,tablesDataMap:k,checksum:r}};var UNIHANS=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],PINYINS=["A","AI","AN","ANG","AO","BA","BAI","BAN","BANG","BAO","BEI","BEN","BENG","BI","BIAN","BIAO","BIE","BIN","BING","BO","BU","CA","CAI","CAN","CANG","CAO","CE","CEN","CENG","CHA","CHAI","CHAN","CHANG","CHAO","CHE","CHEN","CHENG","CHI","CHONG","CHOU","CHU","CHUA","CHUAI","CHUAN","CHUANG","CHUI","CHUN","CHUO","CI","CONG","COU","CU","CUAN","CUI","CUN","CUO","DA","DAI","DAN","DANG","DAO","DE","DEN","DENG","DI","DIAN","DIAO","DIE","DING","DIU","DONG","DOU","DU","DUAN","DUI","DUN","DUO","E","EI","EN","ENG","ER","FA","FAN","FANG","FEI","FEN","FENG","FIAO","FO","FOU","FU","GA","GAI","GAN","GANG","GAO","GE","GEI","GEN","GENG","GONG","GOU","GU","GUA","GUAI","GUAN","GUANG","GUI","GUN","GUO","HA","HAI","HAN","HANG","HAO","HE","HEI","HEN","HENG","HM","HONG","HOU","HU","HUA","HUAI","HUAN","HUANG","HUI","HUN","HUO","JI","JIA","JIAN","JIANG","JIAO","JIE","JIN","JING","JIONG","JIU","JU","JUAN","JUE","JUN","KA","KAI","KAN","KANG","KAO","KE","KEN","KENG","KONG","KOU","KU","KUA","KUAI","KUAN","KUANG","KUI","KUN","KUO","LA","LAI","LAN","LANG","LAO","LE","LEI","LENG","LI","LIA","LIAN","LIANG","LIAO","LIE","LIN","LING","LIU","LO","LONG","LOU","LU","LV","LUAN","LVE","LUN","LUO","M","MA","MAI","MAN","MANG","MAO","ME","MEI","MEN","MENG","MI","MIAN","MIAO","MIE","MIN","MING","MIU","MO","MOU","MU","N","NA","NAI","NAN","NANG","NAO","NE","NEI","NEN","NENG","NI","NIAN","NIANG","NIAO","NIE","NIN","NING","NIU","NONG","NOU","NU","NV","NUAN","NVE","NUN","NUO","O","OU","PA","PAI","PAN","PANG","PAO","PEI","PEN","PENG","PI","PIAN","PIAO","PIE","PIN","PING","PO","POU","PU","QI","QIA","QIAN","QIANG","QIAO","QIE","QIN","QING","QIONG","QIU","QU","QUAN","QUE","QUN","RAN","RANG","RAO","RE","REN","RENG","RI","RONG","ROU","RU","RUA","RUAN","RUI","RUN","RUO","SA","SAI","SAN","SANG","SAO","SE","SEN","SENG","SHA","SHAI","SHAN","SHANG","SHAO","SHE","SHEN","SHENG","SHI","SHOU","SHU","SHUA","SHUAI","SHUAN","SHUANG","SHUI","SHUN","SHUO","SI","SONG","SOU","SU","SUAN","SUI","SUN","SUO","TA","TAI","TAN","TANG","TAO","TE","TENG","TI","TIAN","TIAO","TIE","TING","TONG","TOU","TU","TUAN","TUI","TUN","TUO","WA","WAI","WAN","WANG","WEI","WEN","WENG","WO","WU","XI","XIA","XIAN","XIANG","XIAO","XIE","XIN","XING","XIONG","XIU","XU","XUAN","XUE","XUN","YA","YAN","YANG","YAO","YE","YI","YIN","YING","YO","YONG","YOU","YU","YUAN","YUE","YUN","ZA","ZAI","ZAN","ZANG","ZAO","ZE","ZEI","ZEN","ZENG","ZHA","ZHAI","ZHAN","ZHANG","ZHAO","ZHE","ZHEN","ZHENG","ZHI","ZHONG","ZHOU","ZHU","ZHUA","ZHUAI","ZHUAN","ZHUANG","ZHUI","ZHUN","ZHUO","ZI","ZONG","ZOU","ZU","ZUAN","ZUI","ZUN","ZUO",""],EXCEPTIONS={:"ZENG",:"SHEN",:"DIA",:"ZHOU",:"GUO",:"QUE",:"KE",:"HUA",:"MO",:"MO",:"PAN",:"XI",:"PAN",:"XIAN",:"XIN",:"CHI",:"XING",:"JUN",:"CHANG",:"ZHEN",:"SHI",:"NA",:"XIONG",:"SHUI"},dict={PINYINS,UNIHANS,EXCEPTIONS},_typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DICT=dict,FIRST_PINYIN_UNIHAN="",LAST_PINYIN_UNIHAN="",LATIN=1,PINYIN=2,UNKNOWN=3,supported=null,COLLATOR=void 0;function patchDict(e){e&&(typeof e=="function"&&(e=[e]),e.forEach&&e.forEach(function(n){typeof n=="function"&&n(DICT)}))}function isSupported(e){return!e&&supported!==null||((typeof Intl>"u"?"undefined":_typeof$2(Intl))==="object"&&Intl.Collator?(COLLATOR=new Intl.Collator(["zh-Hans-CN","zh-CN"]),supported=Intl.Collator.supportedLocalesOf(["zh-CN"]).length===1):supported=!1),supported}function genToken(e){var n=DICT.UNIHANS,r=DICT.PINYINS,g=DICT.EXCEPTIONS,y={source:e};if(e in g)return y.type=PINYIN,y.target=g[e],y;var k=-1,$=void 0;if(e.charCodeAt(0)<256)return y.type=LATIN,y.target=e,y;if($=COLLATOR.compare(e,FIRST_PINYIN_UNIHAN),$<0)return y.type=UNKNOWN,y.target=e,y;if($===0)y.type=PINYIN,k=0;else{if($=COLLATOR.compare(e,LAST_PINYIN_UNIHAN),$>0)return y.type=UNKNOWN,y.target=e,y;$===0&&(y.type=PINYIN,k=n.length-1)}if(y.type=PINYIN,k<0)for(var V=0,L=n.length-1;V<=L;){k=~~((V+L)/2);var z=n[k];if($=COLLATOR.compare(e,z),$===0)break;$>0?V=k+1:L=k-1}return $<0&&k--,y.target=r[k],y.target||(y.type=UNKNOWN,y.target=y.source),y}function parse$4(e){if(typeof e!="string")throw new Error("argument should be string.");if(!isSupported())throw new Error("not support Intl or zh-CN language.");return e.split("").map(function(n){return genToken(n)})}var core={isSupported,parse:parse$4,patchDict,genToken,convertToPinyin:function(n,r,g){return parse$4(n).map(function(y){return g&&y.type===PINYIN?y.target.toLowerCase():y.target}).join(r||"")}},_56l={exports:{}};(function(e,n){n=e.exports=function(g){g.EXCEPTIONS={:"DIA",:"ZHOU",:"GUO",:"QUE",:"KE",:"HUA",:"MO",:"XI",:"PAN",:"XIAN",:"CHI",:"XING",:"ZHEN",:"XIONG",:"SHUI",:"KE"},g.UNIHANS[91]="",g.UNIHANS[347]="",g.UNIHANS[393]="",g.UNIHANS[39]="",g.UNIHANS[50]="",g.UNIHANS[369]="",g.UNIHANS[123]="",g.UNIHANS[171]="",g.UNIHANS[102]="",g.UNIHANS[126]="",g.UNIHANS[176]="",g.UNIHANS[178]="",g.UNIHANS[252]="",g.UNIHANS[330]=""},n.shouldPatch=function(g){return typeof g!="function"?!1:g("").target==="FOU"&&g("").target==="XIA"&&g("").target==="ZHONG"&&g("").target==="CHONG"&&g("").target==="CONG"&&g("").target==="YONG"&&g("").target==="HOU"&&g("").target==="LENG"&&g("").target==="GONG"&&g("").target==="HUAI"&&g("").target==="LIAO"&&g("").target==="LIN"&&g("").target==="E"}})(_56l,_56l.exports);var _56lExports=_56l.exports,pinyin=core,patcher56L=_56lExports;pinyin.isSupported()&&patcher56L.shouldPatch(pinyin.genToken)&&pinyin.patchDict(patcher56L);var dist$1=pinyin;const parseFont$1=e=>{const n=new DataView(e);return parse$5(n,{characters:[],settings:{},rawData:n,buffer:e,tables:[]})},createFont$2=async(e,n)=>{let r="";for(let En=0;En<n.familyName.length;En++){const kt=n.familyName[En].charCodeAt(0);kt>=33&&kt<=126?r+=`${n.familyName[En]}`:r+=`${kt}`}hasChineseChar(n.familyName)&&(r=dist$1.convertToPinyin(n.familyName));const g={fontFamily:{en:n.familyName||" ",zh:n.familyName||" "},fontSubfamily:{en:"Regular",zh:""},fullName:{en:n.fullName||n.familyName+" "+n.styleName,zh:n.fullName||n.familyName+" "},postScriptName:{en:n.postScriptName||(r+"-"+n.styleName).replace(/\s/g,"").slice(0,63),zh:n.postScriptName||(r+"-"+n.styleName).replace(/\s/g,"").slice(0,63)},designer:{en:n.designer||" ",zh:n.designer||" "},designerURL:{en:n.designerURL||" ",zh:n.designerURL||" "},manufacturer:{en:n.manufacturer||" ",zh:n.manufacturer||" "},manufacturerURL:{en:n.manufacturerURL||" ",zh:n.manufacturerURL||" "},license:{en:n.license||" ",zh:n.license||" "},licenseURL:{en:n.licenseURL||" ",zh:n.licenseURL||" "},version:{en:n.version||"Version 1.0",zh:n.version||"Version 1.0"},description:{en:n.description||" ",zh:n.description||" "},copyright:{en:n.copyright||" ",zh:n.copyright||" "},trademark:{en:n.trademark||" ",zh:n.trademark||" "}},y=Object.keys(g);for(let En=0;En<y.length;En++){const kt=g[y[En]].en;hasChineseChar(kt)&&(g[y[En]].en=dist$1.convertToPinyin(kt))}const k={characters:e,settings:{unitsPerEm:n.unitsPerEm||1e3,ascender:n.ascender,descender:n.descender}},$=[],V=[],L=[],z=[],j=[],ae=[],re=[];let oe,ue=0,le=0,de=0,he=0,_e=0,Ce=0;const Ne=async()=>{if(Ce>=e.length)return;loaded$1.value++,loaded$1.value>=total$1.value&&(loading$1.value=!1,loaded$1.value=0,total$1.value=0);const En=e[Ce],kt=En.unicode|0;(oe>kt||oe===void 0)&&kt>0&&(oe=kt),ue<kt&&(ue=kt);const At=getUnicodeRange(kt);if(At<32)le|=1<<At;else if(At<64)de|=1<<At-32;else if(At<96)he|=1<<At-64;else if(At<123)_e|=1<<At-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");const Dn=getMetrics(En);if($.push(Dn.xMin),V.push(Dn.yMin),L.push(Dn.xMax),z.push(Dn.yMax),ae.push(Dn.leftSideBearing),re.push(Dn.rightSideBearing),j.push(En.advanceWidth),En.xMin=Dn.xMin,En.xMax=Dn.xMax,En.yMin=Dn.yMin,En.yMax=Dn.yMax,En.rightSideBearing=Dn.rightSideBearing,En.leftSideBearing=Dn.leftSideBearing,Ce++,Ce<e.length)return Ce%100===0&&await new Promise(Xn=>setTimeout(Xn,0)),Ne()};await Ne();const $e={xMin:Math.min.apply(null,$),yMin:Math.min.apply(null,V),xMax:Math.max.apply(null,L),yMax:Math.max.apply(null,z),advanceWidthMax:Math.max.apply(null,j),advanceWidthAvg:j.reduce((En,kt)=>En+kt,0)/j.length,minLeftSideBearing:Math.min.apply(null,ae),maxLeftSideBearing:Math.max.apply(null,ae),minRightSideBearing:Math.min.apply(null,re),ascender:n.ascender,descender:n.descender};le=0,de=0,he=0,_e=0;for(let En=0;En<e.length;En++){const At=e[En].unicode|0;if(At===0)continue;const Dn=getUnicodeRange(At);Dn<32?le|=1<<Dn:Dn<64?de|=1<<Dn-32:Dn<96?he|=1<<Dn-64:Dn<123&&(_e|=1<<Dn-96)}const xe=n.tables?n.tables.head:{},Ie=En=>{let kt=0;for(let At=0;At<En.length;At++)En[At]&&(kt+=Math.pow(2,At));return kt},ze=En=>{let kt=0;for(let At=0;At<En.length;At++)En[At]&&(kt+=Math.pow(2,At));return kt},qe={majorVersion:xe.majorVersion||1,minorVersion:xe.minorVersion||0,fontRevision:xe.fontRevision||65536,checkSumAdjustment:0,magicNumber:1594834165,flags:xe.flags?Ie(xe.flags):3,unitsPerEm:n.unitsPerEm,created:xe.created?.timestamp||Math.floor(n.createdTimestamp||Date.now()/1e3)+2082844800,modified:xe.modified?.timestamp||Math.floor(Date.now()/1e3)+2082844800,xMin:0,yMin:-200,xMax:1e3,yMax:800,macStyle:xe.macStyle?ze(xe.macStyle):0,lowestRecPPEM:xe.lowestRecPPEM||7,fontDirectionHint:xe.fontDirectionHint||2,indexToLocFormat:0,glyphDataFormat:0},Et=n.tables?n.tables.hhea:{},_n={majorVersion:Et.majorVersion||1,minorVersion:Et.minorVersion||0,ascender:n.ascender,descender:n.descender,lineGap:Et.lineGap||0,advanceWidthMax:$e.advanceWidthMax,minLeftSideBearing:$e.minLeftSideBearing,minRightSideBearing:$e.minRightSideBearing,xMaxExtent:$e.maxLeftSideBearing+($e.xMax-$e.xMin),caretSlopeRise:Et.caretSlopeRise||1,caretSlopeRun:Et.caretSlopeRun||0,caretOffset:Et.caretOffset||0,reserved0:0,reserved1:0,reserved2:0,reserved3:0,metricDataFormat:0,numberOfHMetrics:e.length},Dt={version:20480,numGlyphs:e.length},Sn=n.tables?n.tables.os2:{},hn=En=>{let kt=0;for(let At=0;At<En.length;At++)En[At]&&(kt+=Math.pow(2,At));return kt},Vn={version:5,xAvgCharWidth:Math.round($e.advanceWidthAvg),usWeightClass:Sn.usWeightClass||400,usWidthClass:Sn.usWidthClass||5,fsType:Sn.fsType||0,ySubscriptXSize:Sn.ySubscriptXSize||650,ySubscriptYSize:Sn.ySubscriptYSize||699,ySubscriptXOffset:Sn.ySubscriptXOffset||0,ySubscriptYOffset:Sn.ySubscriptYOffset||140,ySuperscriptXSize:Sn.ySuperscriptXSize||650,ySuperscriptYSize:Sn.ySuperscriptYSize||699,ySuperscriptXOffset:Sn.ySuperscriptXOffset||0,ySuperscriptYOffset:Sn.ySuperscriptYOffset||479,yStrikeoutSize:Sn.yStrikeoutSize||49,yStrikeoutPosition:Sn.yStrikeoutPosition||258,sFamilyClass:Sn.sFamilyClass||0,panose:Sn.panose||[0,0,0,0,0,0,0,0,0,0],ulUnicodeRange1:le,ulUnicodeRange2:de,ulUnicodeRange3:he,ulUnicodeRange4:_e,achVendID:Sn.achVendID||"UKWN",fsSelection:Sn.fsSelection?hn(Sn.fsSelection):64,usFirstCharIndex:oe,usLastCharIndex:ue,sTypoAscender:$e.ascender,sTypoDescender:$e.descender,sTypoLineGap:Et.lineGap||0,usWinAscent:n.ascender||800,usWinDescent:-n.descender||200,ulCodePageRange1:1|1<<18|1<<20,ulCodePageRange2:0,sxHeight:metricsForChar(k,"xyvw",{yMax:Math.round($e.ascender/2)}).yMax,sCapHeight:metricsForChar(k,"HIKLEFJMNTZBDPRAGOQSUVWXY",$e).yMax,usDefaultChar:hasChar(k," ")?32:0,usBreakChar:hasChar(k," ")?32:0,usMaxContext:0,usLowerOpticalPointSize:Sn.usLowerOpticalPointSize||8,usUpperOpticalPointSize:Sn.usUpperOpticalPointSize||72},Mn={hMetrics:[]};for(let En=0;En<e.length;En++){const kt=e[En],At=kt.advanceWidth||0,Dn=Math.round(kt.leftSideBearing||0);Mn.hMetrics.push({advanceWidth:At,lsb:Dn})}const $n=createTable$1(e),Nn=En=>{const kt=g[En];if(kt)return kt.en},kn=Nn("fontFamily"),jn=Nn("fontSubfamily"),Fn=kn+"-"+jn;let Tn=Nn("postScriptName");Tn||(Tn=kn.replace(/\s/g,"")+"-"+jn);const Hn={};for(let En in g)Hn[En]=g[En];Hn.uniqueID||(Hn.uniqueID={en:Fn,zh:Fn}),Hn.postScriptName||(Hn.postScriptName={en:Tn,zh:Tn});const la=n.tables?createTable2(n.tables.name):createTable$2(Hn),ca=n.tables?n.tables.post:{},Zn={version:196608,italicAngle:ca.italicAngle||0,underlinePosition:ca.underlinePosition||0,underlineThickness:ca.underlineThickness||0,isFixedPitch:ca.isFixedPitch||1,minMemType42:ca.minMemType42||0,maxMemType42:ca.maxMemType42||0,minMemType1:ca.minMemType1||0,maxMemType1:ca.maxMemType1||0},Bn=createTable(e,{version:Nn("version"),fullName:Fn,familyName:kn,weightName:jn,postScriptName:Tn,unitsPerEm:k.settings.unitsPerEm,fontBBox:[0,$e.yMin,$e.ascender,$e.advanceWidthMax]}),Wn={head:qe,hhea:_n,maxp:Dt,"OS/2":Vn,name:la,cmap:$n,post:Zn,hmtx:Mn,"CFF ":Bn};qe.checkSumAdjustment=0;let da=await create$1(Wn,"checksum");const ga=da.checksum;qe.checkSumAdjustment=2981146554-ga%4294967296;const Ca=encoder.uint32(qe.checkSumAdjustment);qe.checkSumAdjustment<0&&(qe.checkSumAdjustment=(qe.checkSumAdjustment+4294967296)%4294967296);const{data:ra,tables:Gn,tablesDataMap:vn}=da;return ra[164]=Ca[0],ra[165]=Ca[1],ra[166]=Ca[2],ra[167]=Ca[3],k.bytes=ra,Object.keys(Wn).sort((En,kt)=>En>kt?1:-1),k.tables=Gn,k},toArrayBuffer=e=>{if(e.bytes){const n=new ArrayBuffer(e.bytes.length),r=new Uint8Array(n);for(let g=0;g<e.bytes.length;g++)r[g]=e.bytes[g];return n}else if(e.rawData)return e.rawData.buffer},metricsForChar=(e,n,r)=>{for(let g=0;g<n.length;g+=1){const y=getCharacterIndex(e,n[g]);if(y>0){const k=e.characters[y];return getMetrics(k)}}return r},getCharacterIndex=(e,n)=>{const r=n.codePointAt(0),g=e.characters;if(g){for(let y=0;y<g.length;y++)if(g[y].unicode===r)return y}return-1},hasChar=(e,n)=>getCharacterIndex(e,n)!==-1,parse$3=e=>parseFont$1(e),create=(e,n)=>createFont$2(e,n),editing$8=ref(!1),setEditing$6=e=>{editing$8.value=e},points$1=reactive({value:[]}),setPoints$1=e=>{points$1.value=e},mousedown$1=ref(!1),mousemove$1=ref(!1),editing$7=ref(!1),setEditing$5=e=>{editing$7.value=e},points=reactive({value:[]}),setPoints=e=>{points.value=e},mousedown=ref(!1),mousemove=ref(!1),editing$6=ref(!1),setEditing$4=e=>{editing$6.value=e},rectX=ref(-1),setRectX=e=>{rectX.value=e},rectY=ref(-1),setRectY=e=>{rectY.value=e},rectWidth=ref(0),setRectWidth=e=>{rectWidth.value=e},rectHeight=ref(0),setRectHeight=e=>{rectHeight.value=e},editing$5=ref(!1),setEditing$3=e=>{editing$5.value=e},ellipseX=ref(-1),setEllipseX=e=>{ellipseX.value=e},ellipseY=ref(-1),setEllipseY=e=>{ellipseY.value=e},radiusX=ref(0),setRadiusX=e=>{radiusX.value=e},radiusY=ref(0),setRadiusY=e=>{radiusY.value=e},selectControl$2=ref("null"),selectAnchor=ref(""),selectPenPoint=ref(""),hoverPenPoint=ref(""),onPenEditMode=ref(!1),setOnPenEditMode=e=>{onPenEditMode.value=e},redoStack=[],undoStack=[];var StoreType=(e=>(e[e.EditCharacter=0]="EditCharacter",e[e.EditGlyph=1]="EditGlyph",e[e.Tools=2]="Tools",e[e.Pen=3]="Pen",e[e.Polygon=4]="Polygon",e[e.Rectangle=5]="Rectangle",e[e.Ellipse=6]="Ellipse",e[e.GlyphCompnent=7]="GlyphCompnent",e[e.Status=8]="Status",e[e.Grid=9]="Grid",e))(StoreType||{}),OpType=(e=>(e[e.Undo=0]="Undo",e[e.Redo=1]="Redo",e))(OpType||{});const saveState=(e,n,r,g={newRecord:!0,undoTip:"",redoTip:""})=>{let y=[];r===1?y=redoStack:r===0&&(redoStack.length=0,y=undoStack);let k={};for(let $=0;$<n.length;$++)switch(n[$]){case 0:{k.editCharacterFile=clone(g.editCharacterFile||editCharacterFile.value);break}case 7:{k.draggable=g.draggable||draggable$1.value,k.dragOption=clone(g.dragOption||dragOption.value),k.checkRefLines=g.checkRefLines||checkRefLines.value,k.checkJoints=g.checkJoints||checkJoints.value;break}case 1:{k.editGlyph=clone(g.editGlyph||editGlyph.value);break}case 8:{k.editStatus=g.editStatus||editStatus.value;break}case 2:{k.tool=clone(g.tool||tool.value);break}case 3:{k.editingPen=clone(editing$8.value),k.pointsPen=clone(points$1.value),k.selectAnchor=clone(selectAnchor.value),k.selectPenPoint=clone(selectPenPoint.value),k.mousedownPen=mousedown$1.value,k.mousemovePen=mousemove$1.value;break}case 4:{k.editingPolygon=clone(editing$7.value),k.pointsPolygon=clone(points.value),k.mousedownPolygon=mousedown.value,k.mousemovePolygon=mousemove.value;break}case 5:{k.editingRectangle=clone(editing$6.value),k.rectX=clone(rectX.value),k.rectY=clone(rectY.value),k.rectWidth=clone(rectWidth.value),k.rectHeight=clone(rectHeight.value);break}case 6:{k.editingEllipse=clone(editing$5.value),k.ellipseX=clone(ellipseX.value),k.ellipseY=clone(ellipseY.value),k.radiusX=clone(radiusX.value),k.radiusY=clone(radiusY.value);break}case 9:{k.gridSettings=clone(g.gridSettings||gridSettings$1.value),k.gridChanged=clone(g.gridChanged||gridChanged.value);break}}if(g.newRecord||!y.length)y.push({opName:e,opStores:n,states:k,options:g});else{const $=y.pop();$.opName=e,$.opStores=n,$.states=k,$.options=g,y.push($)}},undo$2=()=>{if(!undoStack.length)return;const e=undoStack[undoStack.length-1];e.options.undoTip?ElMessageBox.confirm(e.options.undoTip,`${e.opName}`,{confirmButtonText:"",cancelButtonText:"",type:"warning"}).then(()=>{undoStack.pop(),saveState(e.opName,e.opStores,1,e.options),updateState(e),ElMessage({type:"success",message:`${e.opName}`})}).catch(()=>{}):(undoStack.pop(),saveState(e.opName,e.opStores,1,e.options),updateState(e))},redo$2=()=>{if(!redoStack.length)return;const e=redoStack[redoStack.length-1];e.options.redoTip?ElMessageBox.confirm(e.options.redoTip,`${e.opName}`,{confirmButtonText:"",cancelButtonText:"",type:"warning"}).then(()=>{redoStack.pop(),updateState(e),saveState(e.opName,e.opStores,0,e.options),ElMessage({type:"success",message:`${e.opName}`})}).catch(()=>{}):(redoStack.pop(),updateState(e),saveState(e.opName,e.opStores,0,e.options))},updateState=e=>{for(let n=0;n<e.opStores.length;n++)switch(e.opStores[n]){case 0:{for(let g=0;g<selectedFile.value.characterList.length;g++)editCharacterFileUUID.value===selectedFile.value.characterList[g].uuid&&(selectedFile.value.characterList[g]=e.states.editCharacterFile);break}case 1:{for(let g=0;g<glyphs.value.length;g++)glyphs.value[g].uuid===editGlyphUUID.value&&(glyphs.value[g]=e.states.editGlyph);for(let g=0;g<radical_glyphs.value.length;g++)radical_glyphs.value[g].uuid===editGlyphUUID.value&&(radical_glyphs.value[g]=e.states.editGlyph);for(let g=0;g<stroke_glyphs.value.length;g++)stroke_glyphs.value[g].uuid===editGlyphUUID.value&&(stroke_glyphs.value[g]=e.states.editGlyph);for(let g=0;g<comp_glyphs.value.length;g++)comp_glyphs.value[g].uuid===editGlyphUUID.value&&(comp_glyphs.value[g]=e.states.editGlyph);break}case 2:{tool.value=e.states.tool;break}case 8:{editStatus.value=e.states.editStatus;break}case 3:{points$1.value=e.states.pointsPen,editing$8.value=e.states.editingPen,selectAnchor.value=e.states.selectAnchor,selectPenPoint.value=e.states.selectPenPoint,mousedown$1.value=e.states.mousedownPen,mousemove$1.value=e.states.mousemovePen;break}case 4:{points.value=e.states.pointsPolygon,editing$7.value=e.states.editingPolygon,mousedown.value=e.states.mousedownPolygon,mousemove.value=e.states.mousemovePolygon;break}case 5:{editing$6.value=e.states.editingRectangle,rectX.value=e.states.rectX,rectY.value=e.states.rectY,rectWidth.value=e.states.rectWidth,rectHeight.value=e.states.rectHeight;break}case 6:{editing$5.value=e.states.editingEllipse,ellipseX.value=e.states.ellipseY,ellipseY.value=e.states.ellipseX,radiusX.value=e.states.radiusX,radiusY.value=e.states.radiusY;break}case 9:{gridSettings$1.value=e.gridSettings,gridChanged.value=e.gridChanged;break}}},clearState=()=>{redoStack.length=0,undoStack.length=0},initPen=(e,n=!1)=>{mousedown$1.value=!1,mousemove$1.value=!1;let r=null;const g=5;let y=!1,k,$;const V=oe=>{if(points$1.value.length||saveState("",[StoreType.Pen,n?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo),mousedown$1.value=!0,setEditing$6(!0),points$1.value.length)r={uuid:points$1.value[points$1.value.length-2].uuid,index:points$1.value.length-2};else{const ue={uuid:genUUID(),type:"anchor",x:getCoord(oe.offsetX),y:getCoord(oe.offsetY),origin:null,isShow:!0},le={uuid:genUUID(),type:"control",x:getCoord(oe.offsetX),y:getCoord(oe.offsetY),origin:ue.uuid,isShow:!0};r={uuid:ue.uuid,index:0},setPoints$1([ue,le]),r={uuid:points$1.value[0].uuid,index:0}}},L=oe=>{if(!points$1.value.length||!editing$8)return;const ue=clone(points$1.value);if(mousedown$1.value){if(k&&(ue[$]=k),r.index===0){ue[r.index];let le=ue[r.index+1];le.x=getCoord(oe.offsetX),le.y=getCoord(oe.offsetY),le.isShow=!0}else{let le=ue[r.index],de=ue[r.index-1],he=ue[r.index+1];he.x=getCoord(oe.offsetX),he.y=getCoord(oe.offsetY),he.isShow=!0,de.x=le.x-(getCoord(oe.offsetX)-le.x),de.y=le.y-(getCoord(oe.offsetY)-le.y),de.isShow=!0}mousemove$1.value=!0,setPoints$1(ue)}if(!mousedown$1.value){if(!mousemove$1.value&&ue.length){saveState("",[StoreType.Pen,n?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo),k=Object.assign({},ue[ue.length-1]),$=ue.length-1;const le={uuid:genUUID(),type:"anchor",x:getCoord(oe.offsetX),y:getCoord(oe.offsetY),origin:null,isShow:!0},de={uuid:genUUID(),type:"control",x:le.x,y:le.y,origin:le.uuid,isShow:!1},he={uuid:genUUID(),type:"control",x:le.x,y:le.y,origin:le.uuid,isShow:!1};ue.push(de,le,he),setPoints$1(ue),mousemove$1.value=!0}else if(ue.length){$=ue.length-4;const le=ue[ue.length-2],de=ue[ue.length-3],he=ue[ue.length-1];le.x=getCoord(oe.offsetX),le.y=getCoord(oe.offsetY),he.x=getCoord(oe.offsetX),he.y=getCoord(oe.offsetY),y=!1,isNearPoint(getCoord(oe.offsetX),getCoord(oe.offsetY),points$1.value[0].x,points$1.value[0].y,g)&&(le.x=points$1.value[0].x,le.y=points$1.value[0].y,he.x=points$1.value[1].x,he.y=points$1.value[1].y,de.x=points$1.value[0].x-(points$1.value[1].x-points$1.value[0].x),de.y=points$1.value[0].y-(points$1.value[1].y-points$1.value[0].y),y=!0),setPoints$1(ue),mousemove$1.value=!0}}},z=oe=>{if(!(!points$1.value.length||!editing$8)&&(mousedown$1.value=!1,mousemove$1.value=!1,r=null,y)){setEditing$6(!1);const ue=genPenComponent(clone(points$1).value,!0);setPoints$1([]),n?addComponentForCurrentGlyph(ue):addComponentForCurrentCharacterFile(ue),k=void 0,$=void 0,y=!1,r=null}},j=oe=>{if(!points$1.value.length||!editing$8)return;const ue=clone(points$1.value);if(points$1.value.length>=2){const le={uuid:genUUID(),type:"anchor",x:points$1.value[0].x,y:points$1.value[0].y,origin:null,isShow:!0},de={uuid:genUUID(),type:"control",x:points$1.value[0].x,y:points$1.value[0].y,origin:le.uuid,isShow:!1},he={uuid:genUUID(),type:"control",x:points$1.value[0].x,y:points$1.value[0].y,origin:le.uuid,isShow:!1};ue.push(de,le,he),setPoints$1(ue)}setEditing$6(!1),n?addComponentForCurrentGlyph(genPenComponent(clone(points$1).value,!0)):addComponentForCurrentCharacterFile(genPenComponent(clone(points$1).value,!0)),setPoints$1([]),k=void 0,$=void 0,y=!1,r=null},ae=oe=>{oe.code==="Enter"&&j()};return e.addEventListener("mousedown",V),e.addEventListener("mousemove",L),window.addEventListener("mouseup",z),window.addEventListener("keydown",ae),()=>{e.removeEventListener("mousedown",V),e.removeEventListener("mousemove",L),window.removeEventListener("mouseup",z),window.removeEventListener("keydown",ae),setEditing$6(!1),setPoints$1([]),k=void 0,$=void 0,y=!1,r=null}},renderPenEditor=e=>{const n=e.getContext("2d"),r=points$1.value.map(y=>({isShow:y.isShow,...mapCanvasCoords({x:y.x,y:y.y})}));if(!r.length)return;const g=10;n.strokeStyle="#000",n.lineWidth=getStrokeWidth(),n.fillStyle="#000",n.beginPath(),n.moveTo(r[0].x,r[0].y),r.length>=4&&n.bezierCurveTo(r[1].x,r[1].y,r[2].x,r[2].y,r[3].x,r[3].y);for(let y=3;y<r.length-1&&!(y+3>=r.length);y+=3)n.bezierCurveTo(r[y+1].x,r[y+1].y,r[y+2].x,r[y+2].y,r[y+3].x,r[y+3].y);n.stroke(),n.closePath();for(let y=0;y<r.length-1&&(r[y].isShow&&n.fillRect(r[y].x-g/2,r[y].y-g/2,g,g),r[y+1].isShow&&n.strokeRect(r[y+1].x-g/2,r[y+1].y-g/2,g,g),!(y+2>r.length-1));y+=3)r[y+2].isShow&&n.strokeRect(r[y+2].x-g/2,r[y+2].y-g/2,g,g);n.beginPath(),n.moveTo(r[0].x,r[0].y),n.lineTo(r[1].x,r[1].y),n.stroke(),n.closePath();for(let y=3;y<r.length-1;y+=3)r[y-1].isShow&&(n.beginPath(),n.moveTo(r[y].x,r[y].y),n.lineTo(r[y-1].x,r[y-1].y),n.stroke(),n.closePath()),r[y+1].isShow&&(n.beginPath(),n.moveTo(r[y].x,r[y].y),n.lineTo(r[y+1].x,r[y+1].y),n.stroke(),n.closePath())},genPenComponent=(e,n,r="",g="#000")=>{const{x:y,y:k,w:$,h:V}=getBound$5(e.reduce((_e,Ce)=>(_e.push({x:Ce.x,y:Ce.y}),_e),[])),L=0,z=!1,j=!1;let ae={unitsPerEm:1e3,descender:-200,advanceWidth:1e3};editStatus.value===Status.Edit&&(ae.unitsPerEm=selectedFile.value.fontSettings.unitsPerEm,ae.descender=selectedFile.value.fontSettings.descender,ae.advanceWidth=selectedFile.value.fontSettings.unitsPerEm);let re=transformPoints(e,{x:y,y:k,w:$,h:V,rotation:L,flipX:z,flipY:j});const oe=formatPoints(re,ae,1),ue=genPenContour(oe),le=100/ae.unitsPerEm,de=re.map(_e=>Object.assign({},_e,{x:_e.x*le,y:_e.y*le})),he=genPenContour(de);return{uuid:genUUID(),type:"pen",name:"pen",lock:!1,visible:!0,value:{points:e,fillColor:r,strokeColor:g,closePath:n,editMode:!1,preview:he,contour:ue},x:y,y:k,w:$,h:V,rotation:0,flipX:!1,flipY:!1,usedInCharacter:!0}},bezierCurve={q:(e,n)=>{const r=e[0],g=e[1],y=e[2],k=e[3],$=r.x*Math.pow(1-n,3)+3*g.x*n*Math.pow(1-n,2)+3*y.x*n*n*(1-n)+k.x*Math.pow(n,3),V=r.y*Math.pow(1-n,3)+3*g.y*n*Math.pow(1-n,2)+3*y.y*n*n*(1-n)+k.y*Math.pow(n,3);return{x:$,y:V}},qprime:(e,n)=>{const r=e[0],g=e[1],y=e[2],k=e[3],$=3*Math.pow(1-n,2)*(g.x-r.x)+6*(1-n)*n*(y.x-g.x)+3*Math.pow(n,2)*(k.x-y.x),V=3*Math.pow(1-n,2)*(g.y-r.y)+6*(1-n)*n*(y.y-g.y)+3*Math.pow(n,2)*(k.y-y.y);return{x:$,y:V}},qprimeprime:(e,n)=>{const r=e[0],g=e[1],y=e[2],k=e[3],$=6*(1-n)*(y.x-2*g.x+r.x)+6*n*(k.x-2*y.x+g.x),V=6*(1-n)*(y.y-2*g.y+r.y)+6*n*(k.y-2*y.y+g.y);return{x:$,y:V}}},fitCurve=(e,n)=>{const r=n,g=normalize$u({x:e[1].x-e[0].x,y:e[1].y-e[0].y}),y=normalize$u({x:e[e.length-2].x-e[e.length-1].x,y:e[e.length-2].y-e[e.length-1].y});return fitCubic(e,g,y,r)},fitCubic=(e,n,r,g)=>{if(e.length===2){const ae=norm({x:e[1].x-e[0].x,y:e[1].y-e[0].y})/3;return[[e[0],{x:e[0].x+n.x*ae,y:e[0].y+n.y*ae},{x:e[1].x+r.x*ae,y:e[1].y+r.y*ae},e[1]]]}let y=chordLengthParamerize(e),k=generateBezier(e,y,n,r);const{maxDist:$,splitPoint:V}=computeMaxError(e,k,y);if($<g)return[k];if($<Math.pow(g,2))for(let ae=0;ae<20;ae++){const re=reparameterize(k,e,y);k=generateBezier(e,re,n,r);const{maxDist:oe,splitPoint:ue}=computeMaxError(e,k,y);if(oe<g)return[k];y=re}const L=[],z=normalize$u({x:e[V-1].x-e[V+1].x,y:e[V-1].y-e[V+1].y}),j={x:-z.x,y:-z.y};return L.push(...fitCubic(e.slice(0,V+1),n,z,g)),L.push(...fitCubic(e.slice(V),j,r,g)),L},generateBezier=(e,n,r,g)=>{const y=[e[0],null,null,e[e.length-1]],k=[];for(let le=0;le<n.length;le++){const de=n[le];k[le]=[],k[le].push([r.x*3*Math.pow(1-de,2)*de,r.y*3*Math.pow(1-de,2)*de]),k[le].push([g.x*3*(1-de)*Math.pow(de,2),g.y*3*(1-de)*Math.pow(de,2)])}const $=[[0,0],[0,0]],V=[0,0];for(let le=0;le<e.length;le++){const de=e[le],he=n[le];$[0][0]+=dot$1({x:k[le][0][0],y:k[le][0][1]},{x:k[le][0][0],y:k[le][0][1]}),$[0][1]+=dot$1({x:k[le][0][0],y:k[le][0][1]},{x:k[le][1][0],y:k[le][1][1]}),$[1][0]+=dot$1({x:k[le][0][0],y:k[le][0][1]},{x:k[le][1][0],y:k[le][1][1]}),$[1][1]+=dot$1({x:k[le][1][0],y:k[le][1][1]},{x:k[le][1][0],y:k[le][1][1]});const _e=bezierCurve.q([e[0],e[0],e[e.length-1],e[e.length-1]],he),Ce={x:de.x-_e.x,y:de.y-_e.y};V[0]+=dot$1({x:k[le][0][0],y:k[le][0][1]},Ce),V[1]+=dot$1({x:k[le][1][0],y:k[le][1][1]},Ce)}const L=$[0][0]*$[1][1]-$[1][0]*$[0][1],z=$[0][0]*V[1]-$[1][0]*V[0],j=V[0]*$[1][1]-V[1]*$[0][1],ae=L===0?0:j/L,re=L===0?0:z/L,oe=norm({x:e[0].x-e[e.length-1].x,y:e[0].y-e[e.length-1].y}),ue=1e-6*oe;return ae<ue||re<ue?(y[1]={x:y[0].x+r.x*(oe/3),y:y[0].y+r.y*(oe/3)},y[2]={x:y[3].x+g.x*(oe/3),y:y[3].y+g.y*(oe/3)}):(y[1]={x:y[0].x+r.x*ae,y:y[0].y+r.y*ae},y[2]={x:y[3].x+g.x*re,y:y[3].y+g.y*re}),y},reparameterize=(e,n,r)=>{const g=[];for(let y=0;y<r.length;y++){const k=r[y],$=n[y];g.push(newtonRaphsonRootFind(e,$,k))}return g},newtonRaphsonRootFind=(e,n,r)=>{const g=bezierCurve.q(e,r),y={x:g.x-n.x,y:g.y-n.y},k=bezierCurve.qprime(e,r),$=bezierCurve.qprimeprime(e,r),V=y.x*k.x+y.y*k.y,L=Math.pow(k.x,2)+y.x*$.x+Math.pow(k.y,2)+y.y*$.y;return L===0?r:r-V/L},chordLengthParamerize=e=>{const n=[0];for(let r=1;r<e.length;r++)n.push(n[r-1]+norm({x:e[r].x-e[r-1].x,y:e[r].y-e[r-1].y}));for(let r=0;r<n.length;r++)n[r]=n[r]/n[n.length-1];return n},computeMaxError=(e,n,r)=>{let g=0,y=e.length/2;for(let k=0;k<e.length;k++){const $=bezierCurve.q(n,r[k]),V=e[k],L=norm({x:$.x-V.x,y:$.y-V.y});L>g&&(g=L,y=k)}return{maxDist:g,splitPoint:y}},normalize$u=e=>e.x===0&&e.y===0?{x:0,y:0}:{x:e.x/norm(e),y:e.y/norm(e)},norm=e=>Math.sqrt(e.x*e.x+e.y*e.y),dot$1=(e,n)=>e.x*n.x+e.y*n.y,mesh=(e,n)=>{const{unitsPerEm:r,descender:g}=selectedFile.value.fontSettings,y=.8*r,k=.6*r,$=16,V=e.width,L=e.height,z=e.getContext("2d");z.fillStyle="#dcdfe6",z.fillRect(0,0,V,L);const j=(V-mapCanvasWidth(y))/2,ae=j+mapCanvasWidth(y),re=L+mapCanvasHeight(g)-mapCanvasHeight(k),oe=[0,8,16],ue=re+mapCanvasHeight(k);for(let le=0;le<=$;le++){const de=j+mapCanvasWidth(y)/$*le;z.strokeStyle=oe.indexOf(le)!==-1?"#811616":"#cda2a2",z.lineWidth=getStrokeWidth(),z.beginPath(),z.moveTo(de,re),z.lineTo(de,ue),z.closePath(),z.stroke()}for(let le=0;le<=$;le++){const de=re+mapCanvasHeight(k)/$*le;z.strokeStyle=oe.indexOf(le)!==-1?"#811616":"#cda2a2",z.lineWidth=getStrokeWidth(),z.beginPath(),z.moveTo(j,de),z.lineTo(ae,de),z.closePath(),z.stroke()}},transparent=e=>{const n=e.width,r=e.height,g=e.getContext("2d"),y=mapCanvasWidth(grid.precision);for(let k=0;k<n;k+=2*y)for(let $=0;$<r;$+=2*y)g.fillStyle="#FFFFFF",g.fillRect(k,$,y,y),g.fillRect(k+y,$+y,y,y),g.fillStyle="#EFEFEF",g.fillRect(k+y,$,y,y),g.fillRect(k,$+y,y,y)};class PenComponent{points;hasPathBegan=!1;type="glyph-pen";usedInCharacter=!0;contour=[];contour2=[];preview=[];constructor(){}beginPath(){this.hasPathBegan=!0,this.points=[]}closePath(){this.hasPathBegan=!1}moveTo(n,r){this.hasPathBegan&&!this.points.length&&(this.points[0]={uuid:genUUID(),type:"anchor",x:n,y:r,origin:null})}bezierTo(n,r,g,y,k,$){if(this.hasPathBegan&&this.points.length){const V=this.points[this.points.length-1].uuid,L=genUUID();this.points.push({uuid:genUUID(),type:"control",x:n,y:r,origin:V}),this.points.push({uuid:genUUID(),type:"control",x:g,y,origin:L}),this.points.push({uuid:L,type:"anchor",x:k,y:$,origin:null})}}quadraticBezierTo(n,r,g,y){if(this.hasPathBegan&&this.points.length){const k=this.points[this.points.length-1].uuid,$=genUUID();this.points.push({uuid:genUUID(),type:"control",x:this.points[this.points.length-1].x+2/3*(n-this.points[this.points.length-1].x),y:this.points[this.points.length-1].y+2/3*(r-this.points[this.points.length-1].y),origin:k}),this.points.push({uuid:genUUID(),type:"control",x:g+2/3*(n-g),y:y+2/3*(r-y),origin:$}),this.points.push({uuid:$,type:"anchor",x:g,y,origin:null})}}lineTo(n,r){if(this.hasPathBegan&&this.points.length){const g=this.points[this.points.length-1].uuid,y=genUUID();this.points.push({uuid:genUUID(),type:"control",x:this.points[this.points.length-1].x,y:this.points[this.points.length-1].y,origin:g}),this.points.push({uuid:genUUID(),type:"control",x:n,y:r,origin:y}),this.points.push({uuid:y,type:"anchor",x:n,y:r,origin:null})}}render(n,r={offset:{x:0,y:0},scale:1}){const g=r.scale;if(this.points.length>=4){const y=n.getContext("2d");y.strokeStyle="#000",y.lineWidth=getStrokeWidth(),y.translate(mapCanvasX(r.offset.x)*g,mapCanvasY(r.offset.y)*g),y.beginPath(),y.moveTo(mapCanvasX(this.points[0].x)*g,mapCanvasY(this.points[0].y)*g);for(let k=1;k<this.points.length;k+=3)y.bezierCurveTo(mapCanvasX(this.points[k].x)*g,mapCanvasY(this.points[k].y)*g,mapCanvasX(this.points[k+1].x)*g,mapCanvasY(this.points[k+1].y)*g,mapCanvasX(this.points[k+2].x)*g,mapCanvasY(this.points[k+2].y)*g);y.stroke(),y.closePath(),y.setTransform(1,0,0,1,0,0)}}render_grid(n,r={offset:{x:0,y:0},scale:1,grid:null}){const g=k=>({x:r.offset.x+k.x,y:r.offset.y+k.y}),y=r.scale;if(this.points.length>=4){const k=n.getContext("2d");k.strokeStyle="#000",k.lineWidth=getStrokeWidth(),k.beginPath();const $=computeCoords(r.grid,g(this.points[0]));k.moveTo(mapCanvasX($.x)*y,mapCanvasY($.y)*y);for(let V=1;V<this.points.length;V+=3){const L=computeCoords(r.grid,g(this.points[V])),z=computeCoords(r.grid,g(this.points[V+1])),j=computeCoords(r.grid,g(this.points[V+2]));k.bezierCurveTo(mapCanvasX(L.x)*y,mapCanvasY(L.y)*y,mapCanvasX(z.x)*y,mapCanvasY(z.y)*y,mapCanvasX(j.x)*y,mapCanvasY(j.y)*y)}k.stroke(),k.closePath(),k.setTransform(1,0,0,1,0,0)}}getData=()=>({points:clone(this.points),type:this.type,hasPathBegan:this.hasPathBegan,usedInCharacter:this.usedInCharacter,contour:clone(this.contour),preview:clone(this.preview)});setData=n=>{this.points=clone(n.points),this.type=n.type,this.hasPathBegan=n.hasPathBegan,this.usedInCharacter=n.usedInCharacter,n.contour&&(this.contour=clone(n.contour)),n.preview&&(this.preview=clone(n.preview))};updateData=(n=!0,r,g)=>{let y=this.points;y=y.map(ae=>{const re=translate$1(ae,r);return g?computeCoords(g,re):re});let k={unitsPerEm:1e3,descender:-200,advanceWidth:1e3};n||(k.unitsPerEm=selectedFile.value?.fontSettings.unitsPerEm||1e3,k.descender=selectedFile.value?.fontSettings.descender||-200,k.advanceWidth=selectedFile.value?.fontSettings.unitsPerEm||1e3);const $=formatPoints(y,k,1),V=genPenContour($),L=100/k.unitsPerEm,z=y.map(ae=>Object.assign({},ae,{x:ae.x*L,y:ae.y*L})),j=genPenContour(z);this.contour=V,this.preview=j};updateData2=()=>{const n=this.points,r=genPenContour(n);this.contour2=r}}class PolygonComponent{points;type="glyph-polygon";hasPathBegan=!1;usedInCharacter=!0;contour=[];contour2=[];preview=[];constructor(){}beginPath(){this.hasPathBegan=!0,this.points=[]}closePath(){this.hasPathBegan=!1}moveTo(n,r){this.hasPathBegan&&!this.points.length&&(this.points[0]={uuid:genUUID(),x:n,y:r})}lineTo(n,r){this.hasPathBegan&&this.points.length&&this.points.push({uuid:genUUID(),x:n,y:r})}render(n,r={offset:{x:0,y:0},scale:1}){const g=r.scale;if(this.points.length>=4){const y=n.getContext("2d");y.strokeStyle="#000",y.translate(mapCanvasX(r.offset.x)*g,mapCanvasY(r.offset.y)*g),y.beginPath(),y.moveTo(mapCanvasX(this.points[0].x)*g,mapCanvasY(this.points[0].y)*g);for(let k=1;k<this.points.length;k++)y.lineTo(mapCanvasX(this.points[k].x)*g,mapCanvasY(this.points[k].y)*g);y.stroke(),y.closePath(),y.setTransform(1,0,0,1,0,0)}}render_grid(n,r={offset:{x:0,y:0},scale:1,grid:null}){const g=k=>({x:r.offset.x+k.x,y:r.offset.y+k.y}),y=r.scale;if(this.points.length>=4){const k=n.getContext("2d");k.strokeStyle="#000",k.beginPath();const $=computeCoords(r.grid,g(this.points[0]));k.moveTo(mapCanvasX($.x)*y,mapCanvasY($.y)*y);for(let V=1;V<this.points.length;V++){const{x:L,y:z}=computeCoords(r.grid,g(this.points[V]));k.lineTo(mapCanvasX(L)*y,mapCanvasY(z)*y)}k.stroke(),k.closePath(),k.setTransform(1,0,0,1,0,0)}}getData=()=>({points:clone(this.points),type:this.type,hasPathBegan:this.hasPathBegan,usedInCharacter:this.usedInCharacter,contour:clone(this.contour),preview:clone(this.preview)});setData=n=>{this.points=clone(n.points),this.type=n.type,this.hasPathBegan=n.hasPathBegan,this.usedInCharacter=n.usedInCharacter,n.contour&&(this.contour=clone(n.contour)),n.preview&&(this.preview=clone(n.preview))};updateData=(n=!0,r,g)=>{let y=this.points;y=y.map(ae=>{const re=translate$1(ae,r);return g?computeCoords(g,re):re});let k={unitsPerEm:1e3,descender:-200,advanceWidth:1e3};n||(k.unitsPerEm=selectedFile.value.fontSettings.unitsPerEm,k.descender=selectedFile.value.fontSettings.descender,k.advanceWidth=selectedFile.value.fontSettings.unitsPerEm);const $=formatPoints(y,k,1),V=genPolygonContour($),L=100/k.unitsPerEm,z=y.map(ae=>Object.assign({},ae,{x:ae.x*L,y:ae.y*L})),j=genPolygonContour(z);this.contour=V,this.preview=j};updateData2=()=>{const n=this.points,r=genPolygonContour(n);this.contour2=r}}class RectangleComponent{x;y;width;height;type="glyph-rectangle";usedInCharacter=!0;contour=[];contour2=[];preview=[];constructor(n,r,g,y){this.x=n,this.y=r,this.width=g,this.height=y}render(n,r={offset:{x:0,y:0},scale:1}){const g=r.scale,y=n.getContext("2d");y.strokeStyle="#000",y.lineWidth=getStrokeWidth(),y.translate(mapCanvasX(r.offset.x)*g,mapCanvasY(r.offset.y)*g),y.beginPath(),y.rect(mapCanvasX(this.x)*g,mapCanvasY(this.y)*g,mapCanvasX(this.width)*g,mapCanvasY(this.height)*g),y.stroke(),y.closePath(),y.setTransform(1,0,0,1,0,0)}render_grid(n,r={offset:{x:0,y:0},scale:1,grid:null}){const g=L=>({x:r.offset.x+L.x,y:r.offset.y+L.y}),y=getRectanglePoints(this.width,this.height,this.x,this.y),k=r.scale,$=n.getContext("2d");$.strokeStyle="#000",$.lineWidth=getStrokeWidth(),$.beginPath();const V=computeCoords(r.grid,g({x:y[0].x,y:y[0].y}));$.moveTo(mapCanvasX(V.x)*k,mapCanvasY(V.y)*k);for(let L=1;L<y.length;L++){const{x:z,y:j}=computeCoords(r.grid,g({x:y[L].x,y:y[L].y}));$.lineTo(mapCanvasX(z)*k,mapCanvasY(j)*k)}$.lineTo(mapCanvasX(V.x)*k,mapCanvasY(V.y)*k),$.stroke(),$.closePath(),$.setTransform(1,0,0,1,0,0)}getData=()=>({x:this.x,y:this.y,width:this.width,height:this.height,type:this.type,usedInCharacter:this.usedInCharacter,contour:clone(this.contour),preview:clone(this.preview)});setData=n=>{this.x=n.x,this.y=n.y,this.width=n.width,this.height=n.height,this.type=n.type,this.usedInCharacter=n.usedInCharacter,n.contour&&(this.contour=clone(n.contour)),n.preview&&(this.preview=clone(n.preview))};updateData=(n=!0,r,g)=>{let y=getRectanglePoints(this.width,this.height,this.x,this.y);y=y.map(ae=>{const re=translate$1(ae,r);return g?computeCoords(g,re):re}),g&&(y=y.map(ae=>computeCoords(g,ae)));let k={unitsPerEm:1e3,descender:-200,advanceWidth:1e3};n||(k.unitsPerEm=selectedFile.value.fontSettings.unitsPerEm,k.descender=selectedFile.value.fontSettings.descender,k.advanceWidth=selectedFile.value.fontSettings.unitsPerEm);const $=formatPoints(y,k,1),V=genRectangleContour($),L=100/k.unitsPerEm,z=y.map(ae=>Object.assign({},ae,{x:ae.x*L,y:ae.y*L})),j=genRectangleContour(z);this.contour=V,this.preview=j};updateData2=()=>{const n=getRectanglePoints(this.width,this.height,this.x,this.y),r=genRectangleContour(n);this.contour2=r}}class Joint{_x;_y;uuid;name;constructor(n,r){this._x=r.x,this._y=r.y,this.name=n,this.uuid=genUUID()}render(n){const g=n.getContext("2d");g.beginPath(),g.fillStyle="blue",g.fillRect(mapCanvasX(this.x)-4,mapCanvasY(this.y)-4,4*2,4*2),g.closePath(),g.setTransform(1,0,0,1,0,0)}getCoords(){return{x:this.x,y:this.y}}getPlainCoords(){return{x:this.x,y:this.y}}get x(){return this._x}get y(){return this._y}getData=()=>({_x:this._x,_y:this._y,uuid:this.uuid,name:this.name});setData=n=>{this._x=n._x,this._y=n._y,this.uuid=n.uuid,this.name=n.name}}const renderJoint=(e,n)=>{const g=e.getContext("2d");g.beginPath(),g.fillStyle="blue",g.fillRect(mapCanvasX(n.x)-4,mapCanvasY(n.y)-4,4*2,4*2),g.closePath(),g.setTransform(1,0,0,1,0,0)},renderRefLine=(e,n)=>{const r=e.getContext("2d"),g=n.start,y=n.end;r.strokeStyle=n.type==="ref"?"red":"blue",r.lineWidth=getStrokeWidth(),r.beginPath(),r.moveTo(mapCanvasX(g.x),mapCanvasY(g.y)),r.lineTo(mapCanvasX(y.x),mapCanvasY(y.y)),r.stroke()},renderJoints=(e,n)=>{const r=(g,y,k)=>{const $=g.ox+y,V=g.oy+k;g.value._o?.getJoints().map(L=>{const{x:z,y:j}=L.getCoords();renderJoint(n,{x:z+$,y:j+V})}),g.type==="glyph"&&g.value.components&&g.value.components.length&&g.value.components.map(L=>{r(L,$,V)})};r(e,0,0)},renderRefLines=(e,n)=>{const r=(g,y,k)=>{const $=g.ox+y,V=g.oy+k;g.value._o?.getRefLines().map(L=>{const z=g.value._o.getJoint(L.start),j=g.value._o.getJoint(L.end),ae={start:{x:z.x+$,y:z.y+V},end:{x:j.x+$,y:j.y+V},type:L.type};renderRefLine(n,ae)}),g.type==="glyph"&&g.value.components&&g.value.components.length&&g.value.components.map(L=>{r(L,$,V)})};r(e,0,0)},getJoints$1=(e,n)=>{let r=[];const g=(y,k,$)=>{const V=y.ox+k,L=y.oy+$;n===y.uuid&&(r=y.value._o?.getJoints().map(z=>{const{x:j,y:ae}=z.getCoords();return{name:z.name,x:j+V,y:ae+L}})),y.type==="glyph"&&y.value.components&&y.value.components.length&&y.value.components.map(z=>{g(z,V,L)})};return g(e,0,0),r};class CustomGlyph{_glyph;_joints=[];_reflines=[];_components=[];onSkeletonDrag=null;onSkeletonDragEnd=null;onSkeletonDragStart=null;getSkeleton=null;getComponentsBySkeleton=null;tempData=null;constructor(n){this._glyph=n,n._o=this}getJoints(){return this._glyph.joints?[...this._glyph.joints,...this._joints]:this._joints}getRefLines(){return this._glyph.reflines?this._glyph.reflines.concat(this._reflines):[].concat(this._reflines)}addJoint(n){this._joints.push(n)}addComponent(n){this._components.push(n)}clear(){this._joints=[],this._components=[],this._reflines=[]}render(n,r=!0,g={x:0,y:0},y=!1,k=1){const $=n.getContext("2d");renderCanvas(orderedListWithItemsForGlyph(this._glyph),n,{offset:g,scale:k,fill:!1,forceUpdate:!1}),this._components.forEach(V=>{V.render(n,{offset:g,scale:k})}),(fontRenderStyle.value==="color"||y)&&($.fillStyle="#000",$.fill())}render_forceUpdate(n,r=!0,g={x:0,y:0},y=!1,k=1){const $=n.getContext("2d");renderCanvas(orderedListWithItemsForGlyph(this._glyph),n,{offset:g,scale:k,fill:!1,forceUpdate:!0}),this._components.forEach(V=>{V.render(n,{offset:g,scale:k})}),(fontRenderStyle.value==="color"||y)&&($.fillStyle="#000",$.fill())}render_grid(n,r=!0,g={x:0,y:0},y=!1,k=1,$,V=!1){const L=n.getContext("2d");if(renderGridCanvas(orderedListWithItemsForGlyph(this._glyph),n,{offset:g,scale:k,fill:!1,forceUpdate:!1,grid:$,useSkeletonGrid:V}),!V)this._components.forEach(z=>{z.render_grid(n,{offset:g,scale:k,grid:$})});else if(this.getSkeleton&&this.getComponentsBySkeleton){const z=this.getSkeleton(),j={},ae=Object.keys(z);for(let oe=0;oe<ae.length;oe++){const ue=ae[oe],le=z[ue],de={x:le.x+g.x,y:le.y+g.y};j[ue]=computeCoords($,de)}const re=this.getComponentsBySkeleton(j);for(let oe=0;oe<re.length;oe++)re[oe].render(n,{offset:{x:0,y:0},scale:.5})}(fontRenderStyle.value==="color"||y)&&(L.fillStyle="#000",L.fill())}render_grid_forceUpdate(n,r=!0,g={x:0,y:0},y=!1,k=1,$,V=!1){const L=n.getContext("2d");renderCanvas(orderedListWithItemsForGlyph(this._glyph),n,{offset:g,scale:k,fill:!1,forceUpdate:!0,grid:$,useSkeletonGrid:V}),this._components.forEach(z=>{z.render_grid(n,{offset:g,scale:k,grid:$})}),(fontRenderStyle.value==="color"||y)&&(L.fillStyle="#000",L.fill())}renderJoints(n,r={type:"all"}){r.type==="all"?this.getJoints().forEach(g=>{g.render(n)}):r.type==="selected"&&r.joints.length&&this.getJoints().forEach(g=>{r.joints.indexOf(g.name)!==-1&&g.render(n)})}renderRefLines(n,r={type:"all"}){r.type==="all"?this.getRefLines().forEach(g=>{const y=n.getContext("2d"),k=this.getJoint(g.start).getCoords(),$=this.getJoint(g.end).getCoords();y.strokeStyle=g.type==="ref"?"red":"blue",y.lineWidth=getStrokeWidth(),y.beginPath(),y.moveTo(mapCanvasX(k.x),mapCanvasY(k.y)),y.lineTo(mapCanvasX($.x),mapCanvasY($.y)),y.stroke()}):r.type==="selected"&&r.reflines.length&&this.getRefLines().forEach(g=>{if(r.reflines.indexOf(g.name)!==-1){const y=n.getContext("2d"),k=this.getJoint(g.start).getCoords(),$=this.getJoint(g.end).getCoords();y.strokeStyle=g.type==="ref"?"red":"blue",y.lineWidth=getStrokeWidth(),y.beginPath(),y.moveTo(mapCanvasX(k.x),mapCanvasY(k.y)),y.lineTo(mapCanvasX($.x),mapCanvasY($.y)),y.stroke()}})}addRefLine(n){this._reflines.push(n)}getParam(n){return this._glyph.parameters.get(n)}getParamRange(n){return this._glyph.parameters.getRange(n)}setParam(n,r){this._glyph.parameters.set(n,r)}getJoint(n){const r=this.getJoints().filter(g=>g.name===n);return r.length?r[0]:null}get components(){return orderedListWithItemsForGlyph(this._glyph).concat(this._components)}getRatioLayout(n){return getRatioLayout2(this._glyph,n)}getComponent(n){for(let r=0;r<this._glyph.components.length;r++)if(this._glyph.components[r].name===n)return this._glyph.components[r];return null}getGlyph(n){for(let r=0;r<this._glyph.components.length;r++)if(this._glyph.components[r].name===n)return this._glyph.components[r].value._o;return null}getData=()=>({_joints:this._joints.map(n=>n?.getData()),_reflines:this._reflines,_components:this._components.map(n=>n.getData())});setData=n=>{this._joints=n._joints.map(r=>{const g=new Joint(r.name,{x:r._x,y:r._y});return g.setData(r),g}),this._reflines=n._reflines,this._components=n._components.map(r=>{let g=null;switch(r.type){case"glyph-pen":{g=new PenComponent;break}case"glyph-ellipse":{g=new EllipseComponent(r.centerX,r.centerY,r.radiusX,r.radiusY);break}case"glyph-polygon":{g=new PolygonComponent;break}case"glyph-rectangle":{g=new RectangleComponent(r.x,r.y,r.width,r.height);break}}return g.setData(r),g})}}const getRatioCoords=(e,n,r,g,y)=>{const{x1:k,x2:$,y1:V,y2:L,l:z}=y,{x:j,y:ae,w:re,h:oe}=e.rect,ue=g*z/oe,le=ae/z*ue+r;let de=0;le<=ue/3?de=Math.round(le/(ue/3)*V):le<=ue/3*2?de=V+Math.round((le-ue/3)/(ue/3)*(L-V)):de=L+Math.round((le-ue/3*2)/(ue/3)*(z-L));const he=g*z/re,_e=j/z*he+n;let Ce=0;return _e<=he/3?Ce=Math.round(_e/(he/3)*k):_e<=he/3*2?Ce=k+Math.round((_e-he/3)/(he/3)*($-k)):Ce=$+Math.round((_e-he/3*2)/(he/3)*(z-$)),{x:Ce,y:de}},renderLayout=(layoutTree,rect,level,params,canvas)=>{const ctx=canvas.getContext("2d");ctx.strokeStyle="red",ctx.fillStyle="rgba(255, 0, 0, 0.2)";const{x1,x2,y1,y2,l}=params,mapCanvas=e=>e/l*canvas.width,d=5*level;let dir="H";layoutTree[0].label===""&&(dir="V");for(let i=0;i<layoutTree.length;i++){const node=layoutTree[i];let{x:_x,y:_y,w:_w,h:_h}=rect;if(dir==="H"?(_y=rect.y,_x=eval(node.coords[0]),_w=eval(node.coords[1])-_x,_h=rect.h):dir==="V"&&(_x=rect.x,_y=eval(node.coords[0]),_w=rect.w,_h=eval(node.coords[1])-_y),ctx.fillRect(mapCanvas(_x)+d,mapCanvas(_y)+d,mapCanvas(_w)-2*d,mapCanvas(_h)-2*d),ctx.strokeRect(mapCanvas(_x)+d,mapCanvas(_y)+d,mapCanvas(_w)-2*d,mapCanvas(_h)-2*d),node.children&&node.children.length)renderLayout(node.children,{x:_x,y:_y,w:_w,h:_h},level+1,params,canvas);else if(node.showCoords==="ratio"){ctx.fillStyle="red";const e=5;for(let n=0;n<node.coordsSegment;n++)for(let r=0;r<node.coordsSegment;r++){const g=getRatioCoords(node,n,r,node.coordsSegment,params);ctx.fillRect(mapCanvas(g.x)-e,mapCanvas(g.y)-e,2*e,2*e)}ctx.fillStyle="rgba(255, 0, 0, 0.2)"}}},layoutGrid=e=>{const{dx:n,dy:r,centerSquareSize:g,size:y}=editCharacterFile.value.info.gridSettings,k=editCharacterFile.value.info.layoutTree,$=Math.round((y-g)/2)+n,V=Math.round((y-g)/2+g)+n,L=Math.round((y-g)/2)+r,z=Math.round((y-g)/2+g)+r,j=[mapCanvasWidth(y/2)+mapCanvasWidth(n),mapCanvasHeight(y/2)+mapCanvasHeight(r)],ae=e.getContext("2d");ae.strokeStyle="#811616",ae.lineWidth=getStrokeWidth(),ae.beginPath(),ae.moveTo(0,mapCanvasHeight(L)),ae.lineTo(mapCanvasWidth(y),mapCanvasHeight(L)),ae.stroke(),ae.closePath(),ae.beginPath(),ae.moveTo(0,mapCanvasHeight(z)),ae.lineTo(mapCanvasWidth(y),mapCanvasHeight(z)),ae.stroke(),ae.closePath(),ae.beginPath(),ae.moveTo(mapCanvasWidth($),0),ae.lineTo(mapCanvasWidth($),mapCanvasHeight(y)),ae.stroke(),ae.closePath(),ae.beginPath(),ae.moveTo(mapCanvasWidth(V),0),ae.lineTo(mapCanvasWidth(V),mapCanvasHeight(y)),ae.stroke(),ae.closePath(),ae.beginPath(),ae.strokeStyle="#153063",ae.rect(mapCanvasWidth(y/2-g/4),mapCanvasHeight(y/2-g/4),mapCanvasWidth(g/2),mapCanvasHeight(g/2)),ae.stroke(),ae.closePath(),ae.fillStyle="#153063",ae.lineWidth=0,ae.beginPath(),ae.arc(j[0],j[1],20,0,2*Math.PI),ae.closePath(),ae.fill(),k.length&&renderLayout(k,{x:0,y:0,w:y,h:y},1,{x1:$,x2:V,y1:L,y2:z,l:y},e)},editing$4=ref(!1),setEditing$2=e=>{editing$4.value=e},draggingJoint$2=ref(null),putAtCoord$2=ref(null),movingJoint$2=ref(null),editCharacterFileOnDragging=ref(null);computed(()=>{if(!editCharacterFileOnDragging.value)return null;const e=editCharacterFileOnDragging.value;if(!editCharacterFile.value?.selectedComponentsTree||!editCharacterFile?.selectedComponentsTree.length)return null;let n=null;for(let g=0;g<editCharacterFile.value?.selectedComponentsTree.length-1;g++){const y=editCharacterFile.value?.selectedComponentsTree[g];n?n=selectedItemByUUID(n.value.components,y):n=selectedItemByUUID(e.components,y)}return n.value.components.map(g=>selectedItemByUUID(n.value.components,g.uuid))});const SubComponentsRootOnDragging$1=computed(()=>{if(!editCharacterFileOnDragging.value)return null;const e=editCharacterFileOnDragging.value;if(!editCharacterFile.value?.selectedComponentsTree||!editCharacterFile.value?.selectedComponentsTree.length)return null;let n=null;for(let r=0;r<editCharacterFile.value?.selectedComponentsTree.length-1;r++){const g=editCharacterFile.value?.selectedComponentsTree[r];n?n=selectedItemByUUID(n.value.components,g):n=selectedItemByUUID(e.components,g)}return n}),selectedSubComponentOnDragging$1=computed(()=>{let e=null;if(!editCharacterFileOnDragging.value)e=null;else{const n=editCharacterFileOnDragging.value;if(!editCharacterFile.value?.selectedComponentsTree||!editCharacterFile.value?.selectedComponentsTree.length)e=null;else{let r=null;for(let y=0;y<editCharacterFile.value?.selectedComponentsTree.length-1;y++){const k=editCharacterFile.value?.selectedComponentsTree[y];r?r=selectedItemByUUID(r.value.components,k):r=selectedItemByUUID(n.components,k)}const g=editCharacterFile.value?.selectedComponentsTree[editCharacterFile.value?.selectedComponentsTree.length-1];g!=="null"&&(e=selectedItemByUUID(r.value.components,g))}}return e}),selectedComponentsOnDragging$1=computed(()=>{if(!editCharacterFileOnDragging.value)return null;const e=editCharacterFileOnDragging.value;return editCharacterFile.value?.selectedComponentsUUIDs.map(r=>traverseComponents(e.components,r))}),selectedComponentOnDragging$1=computed(()=>!selectedComponentsOnDragging$1.value||selectedComponentsOnDragging$1.value.length===0?null:selectedComponentsOnDragging$1.value.length===1?selectedComponentsOnDragging$1.value[0]:"multi"),clearCanvas=e=>{const n=e.getContext("2d");n.clearRect(0,0,n.canvas.width,n.canvas.height)},fillBackground=(e,n,r)=>{const g=e.width,y=e.height,k=e.getContext("2d");n.type===BackgroundType.Color&&(k.fillStyle=n.color,k.fillRect(0,0,g,y)),n.type===BackgroundType.Transparent&&transparent(e),r.type===GridType.Mesh?mesh(e,r.precision):r.type===GridType.LayoutGrid&&layoutGrid(e)},renderCanvas=(e,n,r={fill:!1,offset:{x:0,y:0},scale:1,forceUpdate:!1})=>{const g=r.scale,y=n.getContext("2d");let k=!1;e.forEach(($,V)=>{if(!(!$||$.visible===null||$.visible===void 0||!$.visible)){if($.type==="picture"){k&&(y.closePath(),(fontRenderStyle.value==="color"||r.fill)&&(y.fillStyle="#000",y.fill("nonzero")),y.stroke(),k=!1);const{x:L,y:z,w:j,h:ae,rotation:re}=$,oe=mapCanvasX(L)*g,ue=mapCanvasY(z)*g,le=mapCanvasWidth(j)*g,de=mapCanvasHeight(ae)*g,{img:he,pixelMode:_e,pixels:Ce}=$.value;if(!_e)$.opacity&&(y.globalAlpha=$.opacity),y.translate(mapCanvasX(r.offset.x),mapCanvasY(r.offset.y)),y.translate(oe+le/2,ue+de/2),y.rotate(re*Math.PI/180),y.translate(-(oe+le/2),-(ue+de/2)),y.drawImage(he,oe,ue,le,de),y.setTransform(1,0,0,1,0,0),$.opacity&&(y.globalAlpha=1);else{$.opacity&&(y.globalAlpha=$.opacity),y.translate(mapCanvasX(r.offset.x),mapCanvasY(r.offset.y)),y.translate(oe+le/2,ue+de/2),y.rotate(re*Math.PI/180),y.translate(-(oe+le/2),-(ue+de/2));for(let Ne=0;Ne<le;Ne++)for(let $e=0;$e<de;$e++){const xe=he.width,Ie=he.height,ze=Math.floor(Ne*xe/le),Et=(Math.floor($e*Ie/de)*xe+ze)*4;y.fillStyle=`rgba(${Ce[Et]}, ${Ce[Et+1]}, ${Ce[Et+2]}, ${Ce[Et+3]})`,y.fillRect(Ne,$e,1,1)}$.opacity&&(y.globalAlpha=1),y.setTransform(1,0,0,1,0,0)}return}if($.type==="glyph"){k&&(y.closePath(),(fontRenderStyle.value==="color"||r.fill)&&(y.fillStyle="#000",y.fill("nonzero")),y.stroke(),k=!1),(!$.value._o||!$.value._o.components||!$.value._o.components.length||r.forceUpdate)&&executeScript($.value);const L=$.value._o?$.value._o:new CustomGlyph($.value);r.forceUpdate?L.render_forceUpdate(n,!0,{x:r.offset.x+$.ox,y:r.offset.y+$.oy},!1,g):L.render(n,!0,{x:r.offset.x+$.ox,y:r.offset.y+$.oy},!1,g);return}if(($.type==="pen"||$.type==="polygon"||$.type==="ellipse"||$.type==="rectangle")&&(k||(y.beginPath(),k=!0)),$.type==="pen"){const{x:L,y:z,w:j,h:ae,rotation:re,flipX:oe,flipY:ue}=$,le=mapCanvasX(L)*g,de=mapCanvasY(z)*g,he=mapCanvasWidth(j)*g,_e=mapCanvasHeight(ae)*g,{strokeColor:Ce,fillColor:Ne,points:$e,closePath:xe}=$.value;y.strokeStyle=Ce||"#000",y.lineWidth=getStrokeWidth(),y.fillStyle=Ne||"rgba(0, 0, 0, 0)",Ne==="none"&&(y.fillStyle="rgba(0, 0, 0, 0)");let Ie=transformPoints($e,{x:L,y:z,w:j,h:ae,rotation:0,flipX:oe,flipY:ue});Ie=Ie.map(ze=>mapCanvasCoords({x:ze.x*g,y:ze.y*g})),y.translate(mapCanvasX(r.offset.x),mapCanvasY(r.offset.y)),y.translate(le+he/2,de+_e/2),y.rotate(re*Math.PI/180),y.translate(-(le+he/2),-(de+_e/2)),y.moveTo(Ie[0].x,Ie[0].y),Ie.length>=4&&y.bezierCurveTo(Ie[1].x,Ie[1].y,Ie[2].x,Ie[2].y,Ie[3].x,Ie[3].y);for(let ze=3;ze<Ie.length-1&&!(ze+3>=Ie.length);ze+=3)y.bezierCurveTo(Ie[ze+1].x,Ie[ze+1].y,Ie[ze+2].x,Ie[ze+2].y,Ie[ze+3].x,Ie[ze+3].y);y.setTransform(1,0,0,1,0,0)}if($.type==="polygon"){const{x:L,y:z,w:j,h:ae,rotation:re,flipX:oe,flipY:ue}=$,le=mapCanvasX(L)*g,de=mapCanvasY(z)*g,he=mapCanvasWidth(j)*g,_e=mapCanvasHeight(ae)*g,{strokeColor:Ce,fillColor:Ne,points:$e,closePath:xe}=$.value;y.strokeStyle=Ce||"#000",y.lineWidth=getStrokeWidth(),y.fillStyle=Ne||"rgba(0, 0, 0, 0)";let Ie=transformPoints($e,{x:L,y:z,w:j,h:ae,rotation:0,flipX:oe,flipY:ue});Ie=Ie.map(ze=>mapCanvasCoords({x:ze.x*g,y:ze.y*g})),y.translate(mapCanvasX(r.offset.x),mapCanvasY(r.offset.y)),y.translate(le+he/2,de+_e/2),y.rotate(re*Math.PI/180),y.translate(-(le+he/2),-(de+_e/2)),y.moveTo(Ie[0].x,Ie[0].y);for(let ze=1;ze<Ie.length;ze++)y.lineTo(Ie[ze].x,Ie[ze].y);y.setTransform(1,0,0,1,0,0)}if($.type==="ellipse"){const{x:L,y:z,w:j,h:ae,rotation:re}=$,oe=mapCanvasX(L)*g,ue=mapCanvasY(z)*g,le=mapCanvasWidth(j)*g,de=mapCanvasHeight(ae)*g,{strokeColor:he,fillColor:_e,closePath:Ce}=$.value,Ne=le/2,$e=de/2,xe=oe,Ie=ue;y.strokeStyle=he||"#000",y.lineWidth=getStrokeWidth(),y.fillStyle=_e||"rgba(0, 0, 0, 0)",y.translate(mapCanvasX(r.offset.x),mapCanvasY(r.offset.y)),y.translate(oe+le/2,ue+de/2),y.rotate(re*Math.PI/180),y.translate(-(oe+le/2),-(ue+de/2)),y.moveTo(xe+2*Ne,Ie+$e),y.ellipse(xe+Ne,Ie+$e,Ne,$e,0,0,2*Math.PI),y.setTransform(1,0,0,1,0,0)}if($.type==="rectangle"){const{x:L,y:z,w:j,h:ae,rotation:re}=$,oe=mapCanvasX(L)*g,ue=mapCanvasY(z)*g,le=mapCanvasWidth(j)*g,de=mapCanvasHeight(ae)*g,{strokeColor:he,fillColor:_e,closePath:Ce}=$.value,Ne=le,$e=de,xe=oe,Ie=ue;y.strokeStyle=he||"#000",y.lineWidth=getStrokeWidth(),y.fillStyle=_e||"rgba(0, 0, 0, 0)",y.translate(mapCanvasX(r.offset.x),mapCanvasY(r.offset.y)),y.translate(oe+le/2,ue+de/2),y.rotate(re*Math.PI/180),y.translate(-(oe+le/2),-(ue+de/2)),y.rect(xe,Ie,Ne,$e),y.setTransform(1,0,0,1,0,0)}}}),k&&(y.closePath(),(fontRenderStyle.value==="color"||r.fill)&&(y.fillStyle="#000",y.fill("nonzero")),y.stroke())},computeCoords=(e,n)=>{let{dx:r,dy:g,size:y,centerSquareSize:k,x1:$,x2:V,y1:L,y2:z}=e;(!$||!V||!L||!z)&&($=Math.round((y-k)/2)+r,V=Math.round((y-k)/2+k)+r,L=Math.round((y-k)/2)+g,z=Math.round((y-k)/2+k)+g);const{x:j,y:ae}=n;let re=j,oe=ae;return j<y/3?re=j*$/(y/3):j>=y/3&&j<y*2/3?re=$+(j-y/3)*(V-$)/(y/3):re=V+(j-y*2/3)*(y-V)/(y/3),ae<y/3?oe=ae*L/(y/3):ae>=y/3&&ae<y*2/3?oe=L+(ae-y/3)*(z-L)/(y/3):oe=z+(ae-y*2/3)*(y-z)/(y/3),{x:re,y:oe}},renderGridCanvas=(e,n,r={fill:!1,offset:{x:0,y:0},scale:1,forceUpdate:!1,grid:null,useSkeletonGrid:!1})=>{if(!r.grid)return;const g=L=>({x:r.offset.x+L.x,y:r.offset.y+L.y}),y=r.grid,k=r.scale,$=r.useSkeletonGrid,V=n.getContext("2d");V.beginPath(),e.map((L,z)=>{if(L.visible){if(L.type==="pen"){if($)return;const{x:j,y:ae,w:re,h:oe,rotation:ue,flipX:le,flipY:de}=L,{strokeColor:he,fillColor:_e,points:Ce,closePath:Ne}=L.value;V.strokeStyle=he||"#000",V.fillStyle=_e||"rgba(0, 0, 0, 0)",_e==="none"&&(V.fillStyle="rgba(0, 0, 0, 0)");let $e=transformPoints(Ce,{x:j,y:ae,w:re,h:oe,rotation:ue,flipX:le,flipY:de});$e=$e.map(xe=>{const{x:Ie,y:ze}=computeCoords(y,g(xe));return mapCanvasCoords({x:Ie*k,y:ze*k})}),V.moveTo($e[0].x,$e[0].y);for(let xe=1;xe<$e.length-2;xe+=3)V.bezierCurveTo($e[xe].x,$e[xe].y,$e[xe+1].x,$e[xe+1].y,$e[xe+2].x,$e[xe+2].y);V.stroke(),V.closePath(),V.setTransform(1,0,0,1,0,0)}if(L.type==="polygon"){if($)return;const{x:j,y:ae,w:re,h:oe,rotation:ue,flipX:le,flipY:de}=L,{strokeColor:he,fillColor:_e,points:Ce,closePath:Ne}=L.value;V.strokeStyle=he||"#000",V.fillStyle=_e||"rgba(0, 0, 0, 0)";let $e=transformPoints(Ce,{x:j,y:ae,w:re,h:oe,rotation:ue,flipX:le,flipY:de});$e=$e.map(xe=>{const{x:Ie,y:ze}=computeCoords(y,g(xe));return mapCanvasCoords({x:Ie*k,y:ze*k})}),V.beginPath(),V.moveTo($e[0].x,$e[0].y);for(let xe=1;xe<$e.length;xe++)V.lineTo($e[xe].x,$e[xe].y);V.stroke(),V.closePath(),V.setTransform(1,0,0,1,0,0)}if(L.type==="ellipse"){if($)return;const{x:j,y:ae,w:re,h:oe,rotation:ue}=L,le=re/2,de=oe/2,he=j,_e=ae;let Ce=getEllipsePoints(le,de,1e3,he+le,_e+de),Ne=transformPoints(Ce,{x:j,y:ae,w:re,h:oe,rotation:ue,flipX:!1,flipY:!1});Ne=Ne.map($e=>{const{x:xe,y:Ie}=computeCoords(y,g($e));return mapCanvasCoords({x:xe*k,y:Ie*k})}),L.value,V.beginPath(),V.moveTo(Ne[0].x,Ne[0].y);for(let $e=1;$e<Ne.length;$e++)V.lineTo(Ne[$e].x,Ne[$e].y);V.lineTo(Ne[0].x,Ne[0].y),V.stroke(),V.closePath(),V.setTransform(1,0,0,1,0,0)}if(L.type==="rectangle"){if($)return;const{x:j,y:ae,w:re,h:oe,rotation:ue}=L,le=getRectanglePoints(re,oe,j,ae);let de=transformPoints(le,{x:j,y:ae,w:re,h:oe,rotation:ue,flipX:!1,flipY:!1});de=de.map($e=>{const{x:xe,y:Ie}=computeCoords(y,g($e));return mapCanvasCoords({x:xe*he,y:Ie*he})});const he=r.scale,{strokeColor:_e,fillColor:Ce,closePath:Ne}=L.value;V.strokeStyle=_e||"#000",V.fillStyle=Ce||"rgba(0, 0, 0, 0)",V.translate(mapCanvasX(r.offset.x)*he,mapCanvasY(r.offset.y)*he),V.beginPath(),V.moveTo(de[0].x,de[0].y);for(let $e=1;$e<de.length;$e++)V.lineTo(de[$e].x,de[$e].y);V.lineTo(de[0].x,de[0].y),V.stroke(),V.closePath(),V.setTransform(1,0,0,1,0,0)}if(L.type==="glyph"){(!L.value._o||!L.value._o.components||!L.value._o.components.length||r.forceUpdate)&&executeScript(L.value);const j=L.value._o?L.value._o:new CustomGlyph(L.value);r.forceUpdate?j.render_grid_forceUpdate(n,!0,{x:r.offset.x+L.ox,y:r.offset.y+L.oy},!1,k,y,$):j.render_grid(n,!0,{x:r.offset.x+L.ox,y:r.offset.y+L.oy},!1,k,y,$)}}}),V.closePath(),(fontRenderStyle.value==="color"||r.fill)&&(V.fillStyle="#000",V.fill("nonzero")),V.stroke()},render$1=(e,n=!0,r=!1)=>{if(clearCanvas(e),n)fillBackground(e,background$1,grid);else if(background$1.color){const g=e.getContext("2d");g.fillStyle=background$1.color,g.fillRect(0,0,e.width,e.height)}if(editStatus.value===Status.Edit)editCharacterFileOnDragging.value?renderCanvas(orderedListWithItemsForCharacterFile(editCharacterFileOnDragging.value),e,{forceUpdate:r,fill:!1,offset:{x:0,y:0},scale:1}):renderCanvas(orderedListWithItemsForCurrentCharacterFile.value,e,{forceUpdate:r,fill:!1,offset:{x:0,y:0},scale:1});else if(editStatus.value===Status.Glyph){const g=editGlyph.value._o?editGlyph.value._o:new CustomGlyph(editGlyph.value);renderGlyph(g,e,n,!1,!1)}},renderGlyph=(e,n,r=!0,g=!0,y=!0,k=!1)=>{if(clearCanvas(n),r)fillBackground(n,background$1,grid);else if(background$1.color){const $=n.getContext("2d");$.fillStyle=background$1.color,$.fillRect(0,0,n.width,n.height)}e.render_forceUpdate(n),g&&e.renderJoints(n),y&&e.renderJoints(n)},renderPreview2=(e,n)=>{const r=e.getContext("2d");if(r){r.fillStyle="white",r.fillRect(0,0,e.width,e.height),r.beginPath();for(let g=0;g<n.length;g++){const y=n[g];if(!(!y||!y.length)){r.moveTo(y[0].start.x,y[0].start.y);for(let k=0;k<y.length;k++){const $=y[k];$.type===PathType.LINE?r.lineTo($.end.x,$.end.y):$.type===PathType.CUBIC_BEZIER&&r.bezierCurveTo($.control1.x,$.control1.y,$.control2.x,$.control2.y,$.end.x,$.end.y)}}}r.closePath(),r.fillStyle="#000",r.fill("nonzero")}};function mitt(e){return{all:e=e||new Map,on:function(n,r){var g=e.get(n);g?g.push(r):e.set(n,[r])},off:function(n,r){var g=e.get(n);g&&(r?g.splice(g.indexOf(r)>>>0,1):e.set(n,[]))},emit:function(n,r){var g=e.get(n);g&&g.slice().map(function(y){y(r)}),(g=e.get("*"))&&g.slice().map(function(y){y(n,r)})}}}const emitter=mitt();var FileSaver_min={exports:{}};(function(e,n){(function(r,g){g()})(commonjsGlobal$1,function(){function r(z,j){return typeof j>"u"?j={autoBom:!1}:typeof j!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),j={autoBom:!j}),j.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(z.type)?new Blob(["\uFEFF",z],{type:z.type}):z}function g(z,j,ae){var re=new XMLHttpRequest;re.open("GET",z),re.responseType="blob",re.onload=function(){L(re.response,j,ae)},re.onerror=function(){console.error("could not download file")},re.send()}function y(z){var j=new XMLHttpRequest;j.open("HEAD",z,!1);try{j.send()}catch{}return 200<=j.status&&299>=j.status}function k(z){try{z.dispatchEvent(new MouseEvent("click"))}catch{var j=document.createEvent("MouseEvents");j.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),z.dispatchEvent(j)}}var $=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal$1=="object"&&commonjsGlobal$1.global===commonjsGlobal$1?commonjsGlobal$1:void 0,V=$.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),L=$.saveAs||(typeof window!="object"||window!==$?function(){}:"download"in HTMLAnchorElement.prototype&&!V?function(z,j,ae){var re=$.URL||$.webkitURL,oe=document.createElement("a");j=j||z.name||"download",oe.download=j,oe.rel="noopener",typeof z=="string"?(oe.href=z,oe.origin===location.origin?k(oe):y(oe.href)?g(z,j,ae):k(oe,oe.target="_blank")):(oe.href=re.createObjectURL(z),setTimeout(function(){re.revokeObjectURL(oe.href)},4e4),setTimeout(function(){k(oe)},0))}:"msSaveOrOpenBlob"in navigator?function(z,j,ae){if(j=j||z.name||"download",typeof z!="string")navigator.msSaveOrOpenBlob(r(z,ae),j);else if(y(z))g(z,j,ae);else{var re=document.createElement("a");re.href=z,re.target="_blank",setTimeout(function(){k(re)})}}:function(z,j,ae,re){if(re=re||open("","_blank"),re&&(re.document.title=re.document.body.innerText="downloading..."),typeof z=="string")return g(z,j,ae);var oe=z.type==="application/octet-stream",ue=/constructor/i.test($.HTMLElement)||$.safari,le=/CriOS\/[\d]+/.test(navigator.userAgent);if((le||oe&&ue||V)&&typeof FileReader<"u"){var de=new FileReader;de.onloadend=function(){var Ce=de.result;Ce=le?Ce:Ce.replace(/^data:[^;]*;/,"data:attachment/file;"),re?re.location.href=Ce:location=Ce,re=null},de.readAsDataURL(z)}else{var he=$.URL||$.webkitURL,_e=he.createObjectURL(z);re?re.location=_e:location.href=_e,re=null,setTimeout(function(){he.revokeObjectURL(_e)},4e4)}});$.saveAs=L.saveAs=L,e.exports=L})})(FileSaver_min);var FileSaver_minExports=FileSaver_min.exports;const saveAs=getDefaultExportFromCjs(FileSaver_minExports);var jszip_min={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,n){(function(r){e.exports=r()})(function(){return function r(g,y,k){function $(z,j){if(!y[z]){if(!g[z]){var ae=typeof commonjsRequire=="function"&&commonjsRequire;if(!j&&ae)return ae(z,!0);if(V)return V(z,!0);var re=new Error("Cannot find module '"+z+"'");throw re.code="MODULE_NOT_FOUND",re}var oe=y[z]={exports:{}};g[z][0].call(oe.exports,function(ue){var le=g[z][1][ue];return $(le||ue)},oe,oe.exports,r,g,y,k)}return y[z].exports}for(var V=typeof commonjsRequire=="function"&&commonjsRequire,L=0;L<k.length;L++)$(k[L]);return $}({1:[function(r,g,y){var k=r("./utils"),$=r("./support"),V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";y.encode=function(L){for(var z,j,ae,re,oe,ue,le,de=[],he=0,_e=L.length,Ce=_e,Ne=k.getTypeOf(L)!=="string";he<L.length;)Ce=_e-he,ae=Ne?(z=L[he++],j=he<_e?L[he++]:0,he<_e?L[he++]:0):(z=L.charCodeAt(he++),j=he<_e?L.charCodeAt(he++):0,he<_e?L.charCodeAt(he++):0),re=z>>2,oe=(3&z)<<4|j>>4,ue=1<Ce?(15&j)<<2|ae>>6:64,le=2<Ce?63&ae:64,de.push(V.charAt(re)+V.charAt(oe)+V.charAt(ue)+V.charAt(le));return de.join("")},y.decode=function(L){var z,j,ae,re,oe,ue,le=0,de=0,he="data:";if(L.substr(0,he.length)===he)throw new Error("Invalid base64 input, it looks like a data url.");var _e,Ce=3*(L=L.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(L.charAt(L.length-1)===V.charAt(64)&&Ce--,L.charAt(L.length-2)===V.charAt(64)&&Ce--,Ce%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_e=$.uint8array?new Uint8Array(0|Ce):new Array(0|Ce);le<L.length;)z=V.indexOf(L.charAt(le++))<<2|(re=V.indexOf(L.charAt(le++)))>>4,j=(15&re)<<4|(oe=V.indexOf(L.charAt(le++)))>>2,ae=(3&oe)<<6|(ue=V.indexOf(L.charAt(le++))),_e[de++]=z,oe!==64&&(_e[de++]=j),ue!==64&&(_e[de++]=ae);return _e}},{"./support":30,"./utils":32}],2:[function(r,g,y){var k=r("./external"),$=r("./stream/DataWorker"),V=r("./stream/Crc32Probe"),L=r("./stream/DataLengthProbe");function z(j,ae,re,oe,ue){this.compressedSize=j,this.uncompressedSize=ae,this.crc32=re,this.compression=oe,this.compressedContent=ue}z.prototype={getContentWorker:function(){var j=new $(k.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new L("data_length")),ae=this;return j.on("end",function(){if(this.streamInfo.data_length!==ae.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),j},getCompressedWorker:function(){return new $(k.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},z.createWorkerFrom=function(j,ae,re){return j.pipe(new V).pipe(new L("uncompressedSize")).pipe(ae.compressWorker(re)).pipe(new L("compressedSize")).withStreamInfo("compression",ae)},g.exports=z},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,g,y){var k=r("./stream/GenericWorker");y.STORE={magic:"\0\0",compressWorker:function(){return new k("STORE compression")},uncompressWorker:function(){return new k("STORE decompression")}},y.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,g,y){var k=r("./utils"),$=function(){for(var V,L=[],z=0;z<256;z++){V=z;for(var j=0;j<8;j++)V=1&V?3988292384^V>>>1:V>>>1;L[z]=V}return L}();g.exports=function(V,L){return V!==void 0&&V.length?k.getTypeOf(V)!=="string"?function(z,j,ae,re){var oe=$,ue=re+ae;z^=-1;for(var le=re;le<ue;le++)z=z>>>8^oe[255&(z^j[le])];return-1^z}(0|L,V,V.length,0):function(z,j,ae,re){var oe=$,ue=re+ae;z^=-1;for(var le=re;le<ue;le++)z=z>>>8^oe[255&(z^j.charCodeAt(le))];return-1^z}(0|L,V,V.length,0):0}},{"./utils":32}],5:[function(r,g,y){y.base64=!1,y.binary=!1,y.dir=!1,y.createFolders=!0,y.date=null,y.compression=null,y.compressionOptions=null,y.comment=null,y.unixPermissions=null,y.dosPermissions=null},{}],6:[function(r,g,y){var k=null;k=typeof Promise<"u"?Promise:r("lie"),g.exports={Promise:k}},{lie:37}],7:[function(r,g,y){var k=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",$=r("pako"),V=r("./utils"),L=r("./stream/GenericWorker"),z=k?"uint8array":"array";function j(ae,re){L.call(this,"FlateWorker/"+ae),this._pako=null,this._pakoAction=ae,this._pakoOptions=re,this.meta={}}y.magic="\b\0",V.inherits(j,L),j.prototype.processChunk=function(ae){this.meta=ae.meta,this._pako===null&&this._createPako(),this._pako.push(V.transformTo(z,ae.data),!1)},j.prototype.flush=function(){L.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},j.prototype.cleanUp=function(){L.prototype.cleanUp.call(this),this._pako=null},j.prototype._createPako=function(){this._pako=new $[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var ae=this;this._pako.onData=function(re){ae.push({data:re,meta:ae.meta})}},y.compressWorker=function(ae){return new j("Deflate",ae)},y.uncompressWorker=function(){return new j("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,g,y){function k(oe,ue){var le,de="";for(le=0;le<ue;le++)de+=String.fromCharCode(255&oe),oe>>>=8;return de}function $(oe,ue,le,de,he,_e){var Ce,Ne,$e=oe.file,xe=oe.compression,Ie=_e!==z.utf8encode,ze=V.transformTo("string",_e($e.name)),qe=V.transformTo("string",z.utf8encode($e.name)),Et=$e.comment,_n=V.transformTo("string",_e(Et)),Dt=V.transformTo("string",z.utf8encode(Et)),Sn=qe.length!==$e.name.length,hn=Dt.length!==Et.length,Vn="",Mn="",$n="",Nn=$e.dir,kn=$e.date,jn={crc32:0,compressedSize:0,uncompressedSize:0};ue&&!le||(jn.crc32=oe.crc32,jn.compressedSize=oe.compressedSize,jn.uncompressedSize=oe.uncompressedSize);var Fn=0;ue&&(Fn|=8),Ie||!Sn&&!hn||(Fn|=2048);var Tn=0,Hn=0;Nn&&(Tn|=16),he==="UNIX"?(Hn=798,Tn|=function(ca,Zn){var Bn=ca;return ca||(Bn=Zn?16893:33204),(65535&Bn)<<16}($e.unixPermissions,Nn)):(Hn=20,Tn|=function(ca){return 63&(ca||0)}($e.dosPermissions)),Ce=kn.getUTCHours(),Ce<<=6,Ce|=kn.getUTCMinutes(),Ce<<=5,Ce|=kn.getUTCSeconds()/2,Ne=kn.getUTCFullYear()-1980,Ne<<=4,Ne|=kn.getUTCMonth()+1,Ne<<=5,Ne|=kn.getUTCDate(),Sn&&(Mn=k(1,1)+k(j(ze),4)+qe,Vn+="up"+k(Mn.length,2)+Mn),hn&&($n=k(1,1)+k(j(_n),4)+Dt,Vn+="uc"+k($n.length,2)+$n);var la="";return la+=`
\0`,la+=k(Fn,2),la+=xe.magic,la+=k(Ce,2),la+=k(Ne,2),la+=k(jn.crc32,4),la+=k(jn.compressedSize,4),la+=k(jn.uncompressedSize,4),la+=k(ze.length,2),la+=k(Vn.length,2),{fileRecord:ae.LOCAL_FILE_HEADER+la+ze+Vn,dirRecord:ae.CENTRAL_FILE_HEADER+k(Hn,2)+la+k(_n.length,2)+"\0\0\0\0"+k(Tn,4)+k(de,4)+ze+Vn+_n}}var V=r("../utils"),L=r("../stream/GenericWorker"),z=r("../utf8"),j=r("../crc32"),ae=r("../signature");function re(oe,ue,le,de){L.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=ue,this.zipPlatform=le,this.encodeFileName=de,this.streamFiles=oe,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}V.inherits(re,L),re.prototype.push=function(oe){var ue=oe.meta.percent||0,le=this.entriesCount,de=this._sources.length;this.accumulate?this.contentBuffer.push(oe):(this.bytesWritten+=oe.data.length,L.prototype.push.call(this,{data:oe.data,meta:{currentFile:this.currentFile,percent:le?(ue+100*(le-de-1))/le:100}}))},re.prototype.openedSource=function(oe){this.currentSourceOffset=this.bytesWritten,this.currentFile=oe.file.name;var ue=this.streamFiles&&!oe.file.dir;if(ue){var le=$(oe,ue,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:le.fileRecord,meta:{percent:0}})}else this.accumulate=!0},re.prototype.closedSource=function(oe){this.accumulate=!1;var ue=this.streamFiles&&!oe.file.dir,le=$(oe,ue,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(le.dirRecord),ue)this.push({data:function(de){return ae.DATA_DESCRIPTOR+k(de.crc32,4)+k(de.compressedSize,4)+k(de.uncompressedSize,4)}(oe),meta:{percent:100}});else for(this.push({data:le.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},re.prototype.flush=function(){for(var oe=this.bytesWritten,ue=0;ue<this.dirRecords.length;ue++)this.push({data:this.dirRecords[ue],meta:{percent:100}});var le=this.bytesWritten-oe,de=function(he,_e,Ce,Ne,$e){var xe=V.transformTo("string",$e(Ne));return ae.CENTRAL_DIRECTORY_END+"\0\0\0\0"+k(he,2)+k(he,2)+k(_e,4)+k(Ce,4)+k(xe.length,2)+xe}(this.dirRecords.length,le,oe,this.zipComment,this.encodeFileName);this.push({data:de,meta:{percent:100}})},re.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},re.prototype.registerPrevious=function(oe){this._sources.push(oe);var ue=this;return oe.on("data",function(le){ue.processChunk(le)}),oe.on("end",function(){ue.closedSource(ue.previous.streamInfo),ue._sources.length?ue.prepareNextSource():ue.end()}),oe.on("error",function(le){ue.error(le)}),this},re.prototype.resume=function(){return!!L.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},re.prototype.error=function(oe){var ue=this._sources;if(!L.prototype.error.call(this,oe))return!1;for(var le=0;le<ue.length;le++)try{ue[le].error(oe)}catch{}return!0},re.prototype.lock=function(){L.prototype.lock.call(this);for(var oe=this._sources,ue=0;ue<oe.length;ue++)oe[ue].lock()},g.exports=re},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,g,y){var k=r("../compressions"),$=r("./ZipFileWorker");y.generateWorker=function(V,L,z){var j=new $(L.streamFiles,z,L.platform,L.encodeFileName),ae=0;try{V.forEach(function(re,oe){ae++;var ue=function(_e,Ce){var Ne=_e||Ce,$e=k[Ne];if(!$e)throw new Error(Ne+" is not a valid compression method !");return $e}(oe.options.compression,L.compression),le=oe.options.compressionOptions||L.compressionOptions||{},de=oe.dir,he=oe.date;oe._compressWorker(ue,le).withStreamInfo("file",{name:re,dir:de,date:he,comment:oe.comment||"",unixPermissions:oe.unixPermissions,dosPermissions:oe.dosPermissions}).pipe(j)}),j.entriesCount=ae}catch(re){j.error(re)}return j}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,g,y){function k(){if(!(this instanceof k))return new k;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var $=new k;for(var V in this)typeof this[V]!="function"&&($[V]=this[V]);return $}}(k.prototype=r("./object")).loadAsync=r("./load"),k.support=r("./support"),k.defaults=r("./defaults"),k.version="3.10.1",k.loadAsync=function($,V){return new k().loadAsync($,V)},k.external=r("./external"),g.exports=k},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,g,y){var k=r("./utils"),$=r("./external"),V=r("./utf8"),L=r("./zipEntries"),z=r("./stream/Crc32Probe"),j=r("./nodejsUtils");function ae(re){return new $.Promise(function(oe,ue){var le=re.decompressed.getContentWorker().pipe(new z);le.on("error",function(de){ue(de)}).on("end",function(){le.streamInfo.crc32!==re.decompressed.crc32?ue(new Error("Corrupted zip : CRC32 mismatch")):oe()}).resume()})}g.exports=function(re,oe){var ue=this;return oe=k.extend(oe||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:V.utf8decode}),j.isNode&&j.isStream(re)?$.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):k.prepareContent("the loaded zip file",re,!0,oe.optimizedBinaryString,oe.base64).then(function(le){var de=new L(oe);return de.load(le),de}).then(function(le){var de=[$.Promise.resolve(le)],he=le.files;if(oe.checkCRC32)for(var _e=0;_e<he.length;_e++)de.push(ae(he[_e]));return $.Promise.all(de)}).then(function(le){for(var de=le.shift(),he=de.files,_e=0;_e<he.length;_e++){var Ce=he[_e],Ne=Ce.fileNameStr,$e=k.resolve(Ce.fileNameStr);ue.file($e,Ce.decompressed,{binary:!0,optimizedBinaryString:!0,date:Ce.date,dir:Ce.dir,comment:Ce.fileCommentStr.length?Ce.fileCommentStr:null,unixPermissions:Ce.unixPermissions,dosPermissions:Ce.dosPermissions,createFolders:oe.createFolders}),Ce.dir||(ue.file($e).unsafeOriginalName=Ne)}return de.zipComment.length&&(ue.comment=de.zipComment),ue})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,g,y){var k=r("../utils"),$=r("../stream/GenericWorker");function V(L,z){$.call(this,"Nodejs stream input adapter for "+L),this._upstreamEnded=!1,this._bindStream(z)}k.inherits(V,$),V.prototype._bindStream=function(L){var z=this;(this._stream=L).pause(),L.on("data",function(j){z.push({data:j,meta:{percent:0}})}).on("error",function(j){z.isPaused?this.generatedError=j:z.error(j)}).on("end",function(){z.isPaused?z._upstreamEnded=!0:z.end()})},V.prototype.pause=function(){return!!$.prototype.pause.call(this)&&(this._stream.pause(),!0)},V.prototype.resume=function(){return!!$.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},g.exports=V},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,g,y){var k=r("readable-stream").Readable;function $(V,L,z){k.call(this,L),this._helper=V;var j=this;V.on("data",function(ae,re){j.push(ae)||j._helper.pause(),z&&z(re)}).on("error",function(ae){j.emit("error",ae)}).on("end",function(){j.push(null)})}r("../utils").inherits($,k),$.prototype._read=function(){this._helper.resume()},g.exports=$},{"../utils":32,"readable-stream":16}],14:[function(r,g,y){g.exports={isNode:typeof Buffer<"u",newBufferFrom:function(k,$){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(k,$);if(typeof k=="number")throw new Error('The "data" argument must not be a number');return new Buffer(k,$)},allocBuffer:function(k){if(Buffer.alloc)return Buffer.alloc(k);var $=new Buffer(k);return $.fill(0),$},isBuffer:function(k){return Buffer.isBuffer(k)},isStream:function(k){return k&&typeof k.on=="function"&&typeof k.pause=="function"&&typeof k.resume=="function"}}},{}],15:[function(r,g,y){function k($e,xe,Ie){var ze,qe=V.getTypeOf(xe),Et=V.extend(Ie||{},j);Et.date=Et.date||new Date,Et.compression!==null&&(Et.compression=Et.compression.toUpperCase()),typeof Et.unixPermissions=="string"&&(Et.unixPermissions=parseInt(Et.unixPermissions,8)),Et.unixPermissions&&16384&Et.unixPermissions&&(Et.dir=!0),Et.dosPermissions&&16&Et.dosPermissions&&(Et.dir=!0),Et.dir&&($e=he($e)),Et.createFolders&&(ze=de($e))&&_e.call(this,ze,!0);var _n=qe==="string"&&Et.binary===!1&&Et.base64===!1;Ie&&Ie.binary!==void 0||(Et.binary=!_n),(xe instanceof ae&&xe.uncompressedSize===0||Et.dir||!xe||xe.length===0)&&(Et.base64=!1,Et.binary=!0,xe="",Et.compression="STORE",qe="string");var Dt=null;Dt=xe instanceof ae||xe instanceof L?xe:ue.isNode&&ue.isStream(xe)?new le($e,xe):V.prepareContent($e,xe,Et.binary,Et.optimizedBinaryString,Et.base64);var Sn=new re($e,Dt,Et);this.files[$e]=Sn}var $=r("./utf8"),V=r("./utils"),L=r("./stream/GenericWorker"),z=r("./stream/StreamHelper"),j=r("./defaults"),ae=r("./compressedObject"),re=r("./zipObject"),oe=r("./generate"),ue=r("./nodejsUtils"),le=r("./nodejs/NodejsStreamInputAdapter"),de=function($e){$e.slice(-1)==="/"&&($e=$e.substring(0,$e.length-1));var xe=$e.lastIndexOf("/");return 0<xe?$e.substring(0,xe):""},he=function($e){return $e.slice(-1)!=="/"&&($e+="/"),$e},_e=function($e,xe){return xe=xe!==void 0?xe:j.createFolders,$e=he($e),this.files[$e]||k.call(this,$e,null,{dir:!0,createFolders:xe}),this.files[$e]};function Ce($e){return Object.prototype.toString.call($e)==="[object RegExp]"}var Ne={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function($e){var xe,Ie,ze;for(xe in this.files)ze=this.files[xe],(Ie=xe.slice(this.root.length,xe.length))&&xe.slice(0,this.root.length)===this.root&&$e(Ie,ze)},filter:function($e){var xe=[];return this.forEach(function(Ie,ze){$e(Ie,ze)&&xe.push(ze)}),xe},file:function($e,xe,Ie){if(arguments.length!==1)return $e=this.root+$e,k.call(this,$e,xe,Ie),this;if(Ce($e)){var ze=$e;return this.filter(function(Et,_n){return!_n.dir&&ze.test(Et)})}var qe=this.files[this.root+$e];return qe&&!qe.dir?qe:null},folder:function($e){if(!$e)return this;if(Ce($e))return this.filter(function(qe,Et){return Et.dir&&$e.test(qe)});var xe=this.root+$e,Ie=_e.call(this,xe),ze=this.clone();return ze.root=Ie.name,ze},remove:function($e){$e=this.root+$e;var xe=this.files[$e];if(xe||($e.slice(-1)!=="/"&&($e+="/"),xe=this.files[$e]),xe&&!xe.dir)delete this.files[$e];else for(var Ie=this.filter(function(qe,Et){return Et.name.slice(0,$e.length)===$e}),ze=0;ze<Ie.length;ze++)delete this.files[Ie[ze].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function($e){var xe,Ie={};try{if((Ie=V.extend($e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:$.utf8encode})).type=Ie.type.toLowerCase(),Ie.compression=Ie.compression.toUpperCase(),Ie.type==="binarystring"&&(Ie.type="string"),!Ie.type)throw new Error("No output type specified.");V.checkSupport(Ie.type),Ie.platform!=="darwin"&&Ie.platform!=="freebsd"&&Ie.platform!=="linux"&&Ie.platform!=="sunos"||(Ie.platform="UNIX"),Ie.platform==="win32"&&(Ie.platform="DOS");var ze=Ie.comment||this.comment||"";xe=oe.generateWorker(this,Ie,ze)}catch(qe){(xe=new L("error")).error(qe)}return new z(xe,Ie.type||"string",Ie.mimeType)},generateAsync:function($e,xe){return this.generateInternalStream($e).accumulate(xe)},generateNodeStream:function($e,xe){return($e=$e||{}).type||($e.type="nodebuffer"),this.generateInternalStream($e).toNodejsStream(xe)}};g.exports=Ne},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,g,y){g.exports=r("stream")},{stream:void 0}],17:[function(r,g,y){var k=r("./DataReader");function $(V){k.call(this,V);for(var L=0;L<this.data.length;L++)V[L]=255&V[L]}r("../utils").inherits($,k),$.prototype.byteAt=function(V){return this.data[this.zero+V]},$.prototype.lastIndexOfSignature=function(V){for(var L=V.charCodeAt(0),z=V.charCodeAt(1),j=V.charCodeAt(2),ae=V.charCodeAt(3),re=this.length-4;0<=re;--re)if(this.data[re]===L&&this.data[re+1]===z&&this.data[re+2]===j&&this.data[re+3]===ae)return re-this.zero;return-1},$.prototype.readAndCheckSignature=function(V){var L=V.charCodeAt(0),z=V.charCodeAt(1),j=V.charCodeAt(2),ae=V.charCodeAt(3),re=this.readData(4);return L===re[0]&&z===re[1]&&j===re[2]&&ae===re[3]},$.prototype.readData=function(V){if(this.checkOffset(V),V===0)return[];var L=this.data.slice(this.zero+this.index,this.zero+this.index+V);return this.index+=V,L},g.exports=$},{"../utils":32,"./DataReader":18}],18:[function(r,g,y){var k=r("../utils");function $(V){this.data=V,this.length=V.length,this.index=0,this.zero=0}$.prototype={checkOffset:function(V){this.checkIndex(this.index+V)},checkIndex:function(V){if(this.length<this.zero+V||V<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+V+"). Corrupted zip ?")},setIndex:function(V){this.checkIndex(V),this.index=V},skip:function(V){this.setIndex(this.index+V)},byteAt:function(){},readInt:function(V){var L,z=0;for(this.checkOffset(V),L=this.index+V-1;L>=this.index;L--)z=(z<<8)+this.byteAt(L);return this.index+=V,z},readString:function(V){return k.transformTo("string",this.readData(V))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var V=this.readInt(4);return new Date(Date.UTC(1980+(V>>25&127),(V>>21&15)-1,V>>16&31,V>>11&31,V>>5&63,(31&V)<<1))}},g.exports=$},{"../utils":32}],19:[function(r,g,y){var k=r("./Uint8ArrayReader");function $(V){k.call(this,V)}r("../utils").inherits($,k),$.prototype.readData=function(V){this.checkOffset(V);var L=this.data.slice(this.zero+this.index,this.zero+this.index+V);return this.index+=V,L},g.exports=$},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,g,y){var k=r("./DataReader");function $(V){k.call(this,V)}r("../utils").inherits($,k),$.prototype.byteAt=function(V){return this.data.charCodeAt(this.zero+V)},$.prototype.lastIndexOfSignature=function(V){return this.data.lastIndexOf(V)-this.zero},$.prototype.readAndCheckSignature=function(V){return V===this.readData(4)},$.prototype.readData=function(V){this.checkOffset(V);var L=this.data.slice(this.zero+this.index,this.zero+this.index+V);return this.index+=V,L},g.exports=$},{"../utils":32,"./DataReader":18}],21:[function(r,g,y){var k=r("./ArrayReader");function $(V){k.call(this,V)}r("../utils").inherits($,k),$.prototype.readData=function(V){if(this.checkOffset(V),V===0)return new Uint8Array(0);var L=this.data.subarray(this.zero+this.index,this.zero+this.index+V);return this.index+=V,L},g.exports=$},{"../utils":32,"./ArrayReader":17}],22:[function(r,g,y){var k=r("../utils"),$=r("../support"),V=r("./ArrayReader"),L=r("./StringReader"),z=r("./NodeBufferReader"),j=r("./Uint8ArrayReader");g.exports=function(ae){var re=k.getTypeOf(ae);return k.checkSupport(re),re!=="string"||$.uint8array?re==="nodebuffer"?new z(ae):$.uint8array?new j(k.transformTo("uint8array",ae)):new V(k.transformTo("array",ae)):new L(ae)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,g,y){y.LOCAL_FILE_HEADER="PK",y.CENTRAL_FILE_HEADER="PK",y.CENTRAL_DIRECTORY_END="PK",y.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",y.ZIP64_CENTRAL_DIRECTORY_END="PK",y.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,g,y){var k=r("./GenericWorker"),$=r("../utils");function V(L){k.call(this,"ConvertWorker to "+L),this.destType=L}$.inherits(V,k),V.prototype.processChunk=function(L){this.push({data:$.transformTo(this.destType,L.data),meta:L.meta})},g.exports=V},{"../utils":32,"./GenericWorker":28}],25:[function(r,g,y){var k=r("./GenericWorker"),$=r("../crc32");function V(){k.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(V,k),V.prototype.processChunk=function(L){this.streamInfo.crc32=$(L.data,this.streamInfo.crc32||0),this.push(L)},g.exports=V},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,g,y){var k=r("../utils"),$=r("./GenericWorker");function V(L){$.call(this,"DataLengthProbe for "+L),this.propName=L,this.withStreamInfo(L,0)}k.inherits(V,$),V.prototype.processChunk=function(L){if(L){var z=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=z+L.data.length}$.prototype.processChunk.call(this,L)},g.exports=V},{"../utils":32,"./GenericWorker":28}],27:[function(r,g,y){var k=r("../utils"),$=r("./GenericWorker");function V(L){$.call(this,"DataWorker");var z=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,L.then(function(j){z.dataIsReady=!0,z.data=j,z.max=j&&j.length||0,z.type=k.getTypeOf(j),z.isPaused||z._tickAndRepeat()},function(j){z.error(j)})}k.inherits(V,$),V.prototype.cleanUp=function(){$.prototype.cleanUp.call(this),this.data=null},V.prototype.resume=function(){return!!$.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,k.delay(this._tickAndRepeat,[],this)),!0)},V.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(k.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},V.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var L=null,z=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":L=this.data.substring(this.index,z);break;case"uint8array":L=this.data.subarray(this.index,z);break;case"array":case"nodebuffer":L=this.data.slice(this.index,z)}return this.index=z,this.push({data:L,meta:{percent:this.max?this.index/this.max*100:0}})},g.exports=V},{"../utils":32,"./GenericWorker":28}],28:[function(r,g,y){function k($){this.name=$||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}k.prototype={push:function($){this.emit("data",$)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch($){this.emit("error",$)}return!0},error:function($){return!this.isFinished&&(this.isPaused?this.generatedError=$:(this.isFinished=!0,this.emit("error",$),this.previous&&this.previous.error($),this.cleanUp()),!0)},on:function($,V){return this._listeners[$].push(V),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function($,V){if(this._listeners[$])for(var L=0;L<this._listeners[$].length;L++)this._listeners[$][L].call(this,V)},pipe:function($){return $.registerPrevious(this)},registerPrevious:function($){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=$.streamInfo,this.mergeStreamInfo(),this.previous=$;var V=this;return $.on("data",function(L){V.processChunk(L)}),$.on("end",function(){V.end()}),$.on("error",function(L){V.error(L)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var $=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),$=!0),this.previous&&this.previous.resume(),!$},flush:function(){},processChunk:function($){this.push($)},withStreamInfo:function($,V){return this.extraStreamInfo[$]=V,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var $ in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,$)&&(this.streamInfo[$]=this.extraStreamInfo[$])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var $="Worker "+this.name;return this.previous?this.previous+" -> "+$:$}},g.exports=k},{}],29:[function(r,g,y){var k=r("../utils"),$=r("./ConvertWorker"),V=r("./GenericWorker"),L=r("../base64"),z=r("../support"),j=r("../external"),ae=null;if(z.nodestream)try{ae=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function re(ue,le){return new j.Promise(function(de,he){var _e=[],Ce=ue._internalType,Ne=ue._outputType,$e=ue._mimeType;ue.on("data",function(xe,Ie){_e.push(xe),le&&le(Ie)}).on("error",function(xe){_e=[],he(xe)}).on("end",function(){try{var xe=function(Ie,ze,qe){switch(Ie){case"blob":return k.newBlob(k.transformTo("arraybuffer",ze),qe);case"base64":return L.encode(ze);default:return k.transformTo(Ie,ze)}}(Ne,function(Ie,ze){var qe,Et=0,_n=null,Dt=0;for(qe=0;qe<ze.length;qe++)Dt+=ze[qe].length;switch(Ie){case"string":return ze.join("");case"array":return Array.prototype.concat.apply([],ze);case"uint8array":for(_n=new Uint8Array(Dt),qe=0;qe<ze.length;qe++)_n.set(ze[qe],Et),Et+=ze[qe].length;return _n;case"nodebuffer":return Buffer.concat(ze);default:throw new Error("concat : unsupported type '"+Ie+"'")}}(Ce,_e),$e);de(xe)}catch(Ie){he(Ie)}_e=[]}).resume()})}function oe(ue,le,de){var he=le;switch(le){case"blob":case"arraybuffer":he="uint8array";break;case"base64":he="string"}try{this._internalType=he,this._outputType=le,this._mimeType=de,k.checkSupport(he),this._worker=ue.pipe(new $(he)),ue.lock()}catch(_e){this._worker=new V("error"),this._worker.error(_e)}}oe.prototype={accumulate:function(ue){return re(this,ue)},on:function(ue,le){var de=this;return ue==="data"?this._worker.on(ue,function(he){le.call(de,he.data,he.meta)}):this._worker.on(ue,function(){k.delay(le,arguments,de)}),this},resume:function(){return k.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(ue){if(k.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new ae(this,{objectMode:this._outputType!=="nodebuffer"},ue)}},g.exports=oe},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,g,y){if(y.base64=!0,y.array=!0,y.string=!0,y.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",y.nodebuffer=typeof Buffer<"u",y.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")y.blob=!1;else{var k=new ArrayBuffer(0);try{y.blob=new Blob([k],{type:"application/zip"}).size===0}catch{try{var $=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);$.append(k),y.blob=$.getBlob("application/zip").size===0}catch{y.blob=!1}}}try{y.nodestream=!!r("readable-stream").Readable}catch{y.nodestream=!1}},{"readable-stream":16}],31:[function(r,g,y){for(var k=r("./utils"),$=r("./support"),V=r("./nodejsUtils"),L=r("./stream/GenericWorker"),z=new Array(256),j=0;j<256;j++)z[j]=252<=j?6:248<=j?5:240<=j?4:224<=j?3:192<=j?2:1;z[254]=z[254]=1;function ae(){L.call(this,"utf-8 decode"),this.leftOver=null}function re(){L.call(this,"utf-8 encode")}y.utf8encode=function(oe){return $.nodebuffer?V.newBufferFrom(oe,"utf-8"):function(ue){var le,de,he,_e,Ce,Ne=ue.length,$e=0;for(_e=0;_e<Ne;_e++)(64512&(de=ue.charCodeAt(_e)))==55296&&_e+1<Ne&&(64512&(he=ue.charCodeAt(_e+1)))==56320&&(de=65536+(de-55296<<10)+(he-56320),_e++),$e+=de<128?1:de<2048?2:de<65536?3:4;for(le=$.uint8array?new Uint8Array($e):new Array($e),_e=Ce=0;Ce<$e;_e++)(64512&(de=ue.charCodeAt(_e)))==55296&&_e+1<Ne&&(64512&(he=ue.charCodeAt(_e+1)))==56320&&(de=65536+(de-55296<<10)+(he-56320),_e++),de<128?le[Ce++]=de:(de<2048?le[Ce++]=192|de>>>6:(de<65536?le[Ce++]=224|de>>>12:(le[Ce++]=240|de>>>18,le[Ce++]=128|de>>>12&63),le[Ce++]=128|de>>>6&63),le[Ce++]=128|63&de);return le}(oe)},y.utf8decode=function(oe){return $.nodebuffer?k.transformTo("nodebuffer",oe).toString("utf-8"):function(ue){var le,de,he,_e,Ce=ue.length,Ne=new Array(2*Ce);for(le=de=0;le<Ce;)if((he=ue[le++])<128)Ne[de++]=he;else if(4<(_e=z[he]))Ne[de++]=65533,le+=_e-1;else{for(he&=_e===2?31:_e===3?15:7;1<_e&&le<Ce;)he=he<<6|63&ue[le++],_e--;1<_e?Ne[de++]=65533:he<65536?Ne[de++]=he:(he-=65536,Ne[de++]=55296|he>>10&1023,Ne[de++]=56320|1023&he)}return Ne.length!==de&&(Ne.subarray?Ne=Ne.subarray(0,de):Ne.length=de),k.applyFromCharCode(Ne)}(oe=k.transformTo($.uint8array?"uint8array":"array",oe))},k.inherits(ae,L),ae.prototype.processChunk=function(oe){var ue=k.transformTo($.uint8array?"uint8array":"array",oe.data);if(this.leftOver&&this.leftOver.length){if($.uint8array){var le=ue;(ue=new Uint8Array(le.length+this.leftOver.length)).set(this.leftOver,0),ue.set(le,this.leftOver.length)}else ue=this.leftOver.concat(ue);this.leftOver=null}var de=function(_e,Ce){var Ne;for((Ce=Ce||_e.length)>_e.length&&(Ce=_e.length),Ne=Ce-1;0<=Ne&&(192&_e[Ne])==128;)Ne--;return Ne<0||Ne===0?Ce:Ne+z[_e[Ne]]>Ce?Ne:Ce}(ue),he=ue;de!==ue.length&&($.uint8array?(he=ue.subarray(0,de),this.leftOver=ue.subarray(de,ue.length)):(he=ue.slice(0,de),this.leftOver=ue.slice(de,ue.length))),this.push({data:y.utf8decode(he),meta:oe.meta})},ae.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:y.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},y.Utf8DecodeWorker=ae,k.inherits(re,L),re.prototype.processChunk=function(oe){this.push({data:y.utf8encode(oe.data),meta:oe.meta})},y.Utf8EncodeWorker=re},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,g,y){var k=r("./support"),$=r("./base64"),V=r("./nodejsUtils"),L=r("./external");function z(le){return le}function j(le,de){for(var he=0;he<le.length;++he)de[he]=255&le.charCodeAt(he);return de}r("setimmediate"),y.newBlob=function(le,de){y.checkSupport("blob");try{return new Blob([le],{type:de})}catch{try{var he=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return he.append(le),he.getBlob(de)}catch{throw new Error("Bug : can't construct the Blob.")}}};var ae={stringifyByChunk:function(le,de,he){var _e=[],Ce=0,Ne=le.length;if(Ne<=he)return String.fromCharCode.apply(null,le);for(;Ce<Ne;)de==="array"||de==="nodebuffer"?_e.push(String.fromCharCode.apply(null,le.slice(Ce,Math.min(Ce+he,Ne)))):_e.push(String.fromCharCode.apply(null,le.subarray(Ce,Math.min(Ce+he,Ne)))),Ce+=he;return _e.join("")},stringifyByChar:function(le){for(var de="",he=0;he<le.length;he++)de+=String.fromCharCode(le[he]);return de},applyCanBeUsed:{uint8array:function(){try{return k.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return k.nodebuffer&&String.fromCharCode.apply(null,V.allocBuffer(1)).length===1}catch{return!1}}()}};function re(le){var de=65536,he=y.getTypeOf(le),_e=!0;if(he==="uint8array"?_e=ae.applyCanBeUsed.uint8array:he==="nodebuffer"&&(_e=ae.applyCanBeUsed.nodebuffer),_e)for(;1<de;)try{return ae.stringifyByChunk(le,he,de)}catch{de=Math.floor(de/2)}return ae.stringifyByChar(le)}function oe(le,de){for(var he=0;he<le.length;he++)de[he]=le[he];return de}y.applyFromCharCode=re;var ue={};ue.string={string:z,array:function(le){return j(le,new Array(le.length))},arraybuffer:function(le){return ue.string.uint8array(le).buffer},uint8array:function(le){return j(le,new Uint8Array(le.length))},nodebuffer:function(le){return j(le,V.allocBuffer(le.length))}},ue.array={string:re,array:z,arraybuffer:function(le){return new Uint8Array(le).buffer},uint8array:function(le){return new Uint8Array(le)},nodebuffer:function(le){return V.newBufferFrom(le)}},ue.arraybuffer={string:function(le){return re(new Uint8Array(le))},array:function(le){return oe(new Uint8Array(le),new Array(le.byteLength))},arraybuffer:z,uint8array:function(le){return new Uint8Array(le)},nodebuffer:function(le){return V.newBufferFrom(new Uint8Array(le))}},ue.uint8array={string:re,array:function(le){return oe(le,new Array(le.length))},arraybuffer:function(le){return le.buffer},uint8array:z,nodebuffer:function(le){return V.newBufferFrom(le)}},ue.nodebuffer={string:re,array:function(le){return oe(le,new Array(le.length))},arraybuffer:function(le){return ue.nodebuffer.uint8array(le).buffer},uint8array:function(le){return oe(le,new Uint8Array(le.length))},nodebuffer:z},y.transformTo=function(le,de){if(de=de||"",!le)return de;y.checkSupport(le);var he=y.getTypeOf(de);return ue[he][le](de)},y.resolve=function(le){for(var de=le.split("/"),he=[],_e=0;_e<de.length;_e++){var Ce=de[_e];Ce==="."||Ce===""&&_e!==0&&_e!==de.length-1||(Ce===".."?he.pop():he.push(Ce))}return he.join("/")},y.getTypeOf=function(le){return typeof le=="string"?"string":Object.prototype.toString.call(le)==="[object Array]"?"array":k.nodebuffer&&V.isBuffer(le)?"nodebuffer":k.uint8array&&le instanceof Uint8Array?"uint8array":k.arraybuffer&&le instanceof ArrayBuffer?"arraybuffer":void 0},y.checkSupport=function(le){if(!k[le.toLowerCase()])throw new Error(le+" is not supported by this platform")},y.MAX_VALUE_16BITS=65535,y.MAX_VALUE_32BITS=-1,y.pretty=function(le){var de,he,_e="";for(he=0;he<(le||"").length;he++)_e+="\\x"+((de=le.charCodeAt(he))<16?"0":"")+de.toString(16).toUpperCase();return _e},y.delay=function(le,de,he){setImmediate(function(){le.apply(he||null,de||[])})},y.inherits=function(le,de){function he(){}he.prototype=de.prototype,le.prototype=new he},y.extend=function(){var le,de,he={};for(le=0;le<arguments.length;le++)for(de in arguments[le])Object.prototype.hasOwnProperty.call(arguments[le],de)&&he[de]===void 0&&(he[de]=arguments[le][de]);return he},y.prepareContent=function(le,de,he,_e,Ce){return L.Promise.resolve(de).then(function(Ne){return k.blob&&(Ne instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(Ne))!==-1)&&typeof FileReader<"u"?new L.Promise(function($e,xe){var Ie=new FileReader;Ie.onload=function(ze){$e(ze.target.result)},Ie.onerror=function(ze){xe(ze.target.error)},Ie.readAsArrayBuffer(Ne)}):Ne}).then(function(Ne){var $e=y.getTypeOf(Ne);return $e?($e==="arraybuffer"?Ne=y.transformTo("uint8array",Ne):$e==="string"&&(Ce?Ne=$.decode(Ne):he&&_e!==!0&&(Ne=function(xe){return j(xe,k.uint8array?new Uint8Array(xe.length):new Array(xe.length))}(Ne))),Ne):L.Promise.reject(new Error("Can't read the data of '"+le+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,g,y){var k=r("./reader/readerFor"),$=r("./utils"),V=r("./signature"),L=r("./zipEntry"),z=r("./support");function j(ae){this.files=[],this.loadOptions=ae}j.prototype={checkSignature:function(ae){if(!this.reader.readAndCheckSignature(ae)){this.reader.index-=4;var re=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+$.pretty(re)+", expected "+$.pretty(ae)+")")}},isSignature:function(ae,re){var oe=this.reader.index;this.reader.setIndex(ae);var ue=this.reader.readString(4)===re;return this.reader.setIndex(oe),ue},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var ae=this.reader.readData(this.zipCommentLength),re=z.uint8array?"uint8array":"array",oe=$.transformTo(re,ae);this.zipComment=this.loadOptions.decodeFileName(oe)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var ae,re,oe,ue=this.zip64EndOfCentralSize-44;0<ue;)ae=this.reader.readInt(2),re=this.reader.readInt(4),oe=this.reader.readData(re),this.zip64ExtensibleData[ae]={id:ae,length:re,value:oe}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var ae,re;for(ae=0;ae<this.files.length;ae++)re=this.files[ae],this.reader.setIndex(re.localHeaderOffset),this.checkSignature(V.LOCAL_FILE_HEADER),re.readLocalPart(this.reader),re.handleUTF8(),re.processAttributes()},readCentralDir:function(){var ae;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(V.CENTRAL_FILE_HEADER);)(ae=new L({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(ae);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var ae=this.reader.lastIndexOfSignature(V.CENTRAL_DIRECTORY_END);if(ae<0)throw this.isSignature(0,V.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(ae);var re=ae;if(this.checkSignature(V.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===$.MAX_VALUE_16BITS||this.diskWithCentralDirStart===$.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===$.MAX_VALUE_16BITS||this.centralDirRecords===$.MAX_VALUE_16BITS||this.centralDirSize===$.MAX_VALUE_32BITS||this.centralDirOffset===$.MAX_VALUE_32BITS){if(this.zip64=!0,(ae=this.reader.lastIndexOfSignature(V.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(ae),this.checkSignature(V.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,V.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(V.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(V.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var oe=this.centralDirOffset+this.centralDirSize;this.zip64&&(oe+=20,oe+=12+this.zip64EndOfCentralSize);var ue=re-oe;if(0<ue)this.isSignature(re,V.CENTRAL_FILE_HEADER)||(this.reader.zero=ue);else if(ue<0)throw new Error("Corrupted zip: missing "+Math.abs(ue)+" bytes.")},prepareReader:function(ae){this.reader=k(ae)},load:function(ae){this.prepareReader(ae),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},g.exports=j},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,g,y){var k=r("./reader/readerFor"),$=r("./utils"),V=r("./compressedObject"),L=r("./crc32"),z=r("./utf8"),j=r("./compressions"),ae=r("./support");function re(oe,ue){this.options=oe,this.loadOptions=ue}re.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(oe){var ue,le;if(oe.skip(22),this.fileNameLength=oe.readInt(2),le=oe.readInt(2),this.fileName=oe.readData(this.fileNameLength),oe.skip(le),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((ue=function(de){for(var he in j)if(Object.prototype.hasOwnProperty.call(j,he)&&j[he].magic===de)return j[he];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+$.pretty(this.compressionMethod)+" unknown (inner file : "+$.transformTo("string",this.fileName)+")");this.decompressed=new V(this.compressedSize,this.uncompressedSize,this.crc32,ue,oe.readData(this.compressedSize))},readCentralPart:function(oe){this.versionMadeBy=oe.readInt(2),oe.skip(2),this.bitFlag=oe.readInt(2),this.compressionMethod=oe.readString(2),this.date=oe.readDate(),this.crc32=oe.readInt(4),this.compressedSize=oe.readInt(4),this.uncompressedSize=oe.readInt(4);var ue=oe.readInt(2);if(this.extraFieldsLength=oe.readInt(2),this.fileCommentLength=oe.readInt(2),this.diskNumberStart=oe.readInt(2),this.internalFileAttributes=oe.readInt(2),this.externalFileAttributes=oe.readInt(4),this.localHeaderOffset=oe.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");oe.skip(ue),this.readExtraFields(oe),this.parseZIP64ExtraField(oe),this.fileComment=oe.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var oe=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),oe==0&&(this.dosPermissions=63&this.externalFileAttributes),oe==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var oe=k(this.extraFields[1].value);this.uncompressedSize===$.MAX_VALUE_32BITS&&(this.uncompressedSize=oe.readInt(8)),this.compressedSize===$.MAX_VALUE_32BITS&&(this.compressedSize=oe.readInt(8)),this.localHeaderOffset===$.MAX_VALUE_32BITS&&(this.localHeaderOffset=oe.readInt(8)),this.diskNumberStart===$.MAX_VALUE_32BITS&&(this.diskNumberStart=oe.readInt(4))}},readExtraFields:function(oe){var ue,le,de,he=oe.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});oe.index+4<he;)ue=oe.readInt(2),le=oe.readInt(2),de=oe.readData(le),this.extraFields[ue]={id:ue,length:le,value:de};oe.setIndex(he)},handleUTF8:function(){var oe=ae.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=z.utf8decode(this.fileName),this.fileCommentStr=z.utf8decode(this.fileComment);else{var ue=this.findExtraFieldUnicodePath();if(ue!==null)this.fileNameStr=ue;else{var le=$.transformTo(oe,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(le)}var de=this.findExtraFieldUnicodeComment();if(de!==null)this.fileCommentStr=de;else{var he=$.transformTo(oe,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(he)}}},findExtraFieldUnicodePath:function(){var oe=this.extraFields[28789];if(oe){var ue=k(oe.value);return ue.readInt(1)!==1||L(this.fileName)!==ue.readInt(4)?null:z.utf8decode(ue.readData(oe.length-5))}return null},findExtraFieldUnicodeComment:function(){var oe=this.extraFields[25461];if(oe){var ue=k(oe.value);return ue.readInt(1)!==1||L(this.fileComment)!==ue.readInt(4)?null:z.utf8decode(ue.readData(oe.length-5))}return null}},g.exports=re},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,g,y){function k(ue,le,de){this.name=ue,this.dir=de.dir,this.date=de.date,this.comment=de.comment,this.unixPermissions=de.unixPermissions,this.dosPermissions=de.dosPermissions,this._data=le,this._dataBinary=de.binary,this.options={compression:de.compression,compressionOptions:de.compressionOptions}}var $=r("./stream/StreamHelper"),V=r("./stream/DataWorker"),L=r("./utf8"),z=r("./compressedObject"),j=r("./stream/GenericWorker");k.prototype={internalStream:function(ue){var le=null,de="string";try{if(!ue)throw new Error("No output type specified.");var he=(de=ue.toLowerCase())==="string"||de==="text";de!=="binarystring"&&de!=="text"||(de="string"),le=this._decompressWorker();var _e=!this._dataBinary;_e&&!he&&(le=le.pipe(new L.Utf8EncodeWorker)),!_e&&he&&(le=le.pipe(new L.Utf8DecodeWorker))}catch(Ce){(le=new j("error")).error(Ce)}return new $(le,de,"")},async:function(ue,le){return this.internalStream(ue).accumulate(le)},nodeStream:function(ue,le){return this.internalStream(ue||"nodebuffer").toNodejsStream(le)},_compressWorker:function(ue,le){if(this._data instanceof z&&this._data.compression.magic===ue.magic)return this._data.getCompressedWorker();var de=this._decompressWorker();return this._dataBinary||(de=de.pipe(new L.Utf8EncodeWorker)),z.createWorkerFrom(de,ue,le)},_decompressWorker:function(){return this._data instanceof z?this._data.getContentWorker():this._data instanceof j?this._data:new V(this._data)}};for(var ae=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],re=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},oe=0;oe<ae.length;oe++)k.prototype[ae[oe]]=re;g.exports=k},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,g,y){(function(k){var $,V,L=k.MutationObserver||k.WebKitMutationObserver;if(L){var z=0,j=new L(ue),ae=k.document.createTextNode("");j.observe(ae,{characterData:!0}),$=function(){ae.data=z=++z%2}}else if(k.setImmediate||k.MessageChannel===void 0)$="document"in k&&"onreadystatechange"in k.document.createElement("script")?function(){var le=k.document.createElement("script");le.onreadystatechange=function(){ue(),le.onreadystatechange=null,le.parentNode.removeChild(le),le=null},k.document.documentElement.appendChild(le)}:function(){setTimeout(ue,0)};else{var re=new k.MessageChannel;re.port1.onmessage=ue,$=function(){re.port2.postMessage(0)}}var oe=[];function ue(){var le,de;V=!0;for(var he=oe.length;he;){for(de=oe,oe=[],le=-1;++le<he;)de[le]();he=oe.length}V=!1}g.exports=function(le){oe.push(le)!==1||V||$()}}).call(this,typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,g,y){var k=r("immediate");function $(){}var V={},L=["REJECTED"],z=["FULFILLED"],j=["PENDING"];function ae(he){if(typeof he!="function")throw new TypeError("resolver must be a function");this.state=j,this.queue=[],this.outcome=void 0,he!==$&&le(this,he)}function re(he,_e,Ce){this.promise=he,typeof _e=="function"&&(this.onFulfilled=_e,this.callFulfilled=this.otherCallFulfilled),typeof Ce=="function"&&(this.onRejected=Ce,this.callRejected=this.otherCallRejected)}function oe(he,_e,Ce){k(function(){var Ne;try{Ne=_e(Ce)}catch($e){return V.reject(he,$e)}Ne===he?V.reject(he,new TypeError("Cannot resolve promise with itself")):V.resolve(he,Ne)})}function ue(he){var _e=he&&he.then;if(he&&(typeof he=="object"||typeof he=="function")&&typeof _e=="function")return function(){_e.apply(he,arguments)}}function le(he,_e){var Ce=!1;function Ne(Ie){Ce||(Ce=!0,V.reject(he,Ie))}function $e(Ie){Ce||(Ce=!0,V.resolve(he,Ie))}var xe=de(function(){_e($e,Ne)});xe.status==="error"&&Ne(xe.value)}function de(he,_e){var Ce={};try{Ce.value=he(_e),Ce.status="success"}catch(Ne){Ce.status="error",Ce.value=Ne}return Ce}(g.exports=ae).prototype.finally=function(he){if(typeof he!="function")return this;var _e=this.constructor;return this.then(function(Ce){return _e.resolve(he()).then(function(){return Ce})},function(Ce){return _e.resolve(he()).then(function(){throw Ce})})},ae.prototype.catch=function(he){return this.then(null,he)},ae.prototype.then=function(he,_e){if(typeof he!="function"&&this.state===z||typeof _e!="function"&&this.state===L)return this;var Ce=new this.constructor($);return this.state!==j?oe(Ce,this.state===z?he:_e,this.outcome):this.queue.push(new re(Ce,he,_e)),Ce},re.prototype.callFulfilled=function(he){V.resolve(this.promise,he)},re.prototype.otherCallFulfilled=function(he){oe(this.promise,this.onFulfilled,he)},re.prototype.callRejected=function(he){V.reject(this.promise,he)},re.prototype.otherCallRejected=function(he){oe(this.promise,this.onRejected,he)},V.resolve=function(he,_e){var Ce=de(ue,_e);if(Ce.status==="error")return V.reject(he,Ce.value);var Ne=Ce.value;if(Ne)le(he,Ne);else{he.state=z,he.outcome=_e;for(var $e=-1,xe=he.queue.length;++$e<xe;)he.queue[$e].callFulfilled(_e)}return he},V.reject=function(he,_e){he.state=L,he.outcome=_e;for(var Ce=-1,Ne=he.queue.length;++Ce<Ne;)he.queue[Ce].callRejected(_e);return he},ae.resolve=function(he){return he instanceof this?he:V.resolve(new this($),he)},ae.reject=function(he){var _e=new this($);return V.reject(_e,he)},ae.all=function(he){var _e=this;if(Object.prototype.toString.call(he)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Ce=he.length,Ne=!1;if(!Ce)return this.resolve([]);for(var $e=new Array(Ce),xe=0,Ie=-1,ze=new this($);++Ie<Ce;)qe(he[Ie],Ie);return ze;function qe(Et,_n){_e.resolve(Et).then(function(Dt){$e[_n]=Dt,++xe!==Ce||Ne||(Ne=!0,V.resolve(ze,$e))},function(Dt){Ne||(Ne=!0,V.reject(ze,Dt))})}},ae.race=function(he){var _e=this;if(Object.prototype.toString.call(he)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Ce=he.length,Ne=!1;if(!Ce)return this.resolve([]);for(var $e=-1,xe=new this($);++$e<Ce;)Ie=he[$e],_e.resolve(Ie).then(function(ze){Ne||(Ne=!0,V.resolve(xe,ze))},function(ze){Ne||(Ne=!0,V.reject(xe,ze))});var Ie;return xe}},{immediate:36}],38:[function(r,g,y){var k={};(0,r("./lib/utils/common").assign)(k,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),g.exports=k},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,g,y){var k=r("./zlib/deflate"),$=r("./utils/common"),V=r("./utils/strings"),L=r("./zlib/messages"),z=r("./zlib/zstream"),j=Object.prototype.toString,ae=0,re=-1,oe=0,ue=8;function le(he){if(!(this instanceof le))return new le(he);this.options=$.assign({level:re,method:ue,chunkSize:16384,windowBits:15,memLevel:8,strategy:oe,to:""},he||{});var _e=this.options;_e.raw&&0<_e.windowBits?_e.windowBits=-_e.windowBits:_e.gzip&&0<_e.windowBits&&_e.windowBits<16&&(_e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new z,this.strm.avail_out=0;var Ce=k.deflateInit2(this.strm,_e.level,_e.method,_e.windowBits,_e.memLevel,_e.strategy);if(Ce!==ae)throw new Error(L[Ce]);if(_e.header&&k.deflateSetHeader(this.strm,_e.header),_e.dictionary){var Ne;if(Ne=typeof _e.dictionary=="string"?V.string2buf(_e.dictionary):j.call(_e.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_e.dictionary):_e.dictionary,(Ce=k.deflateSetDictionary(this.strm,Ne))!==ae)throw new Error(L[Ce]);this._dict_set=!0}}function de(he,_e){var Ce=new le(_e);if(Ce.push(he,!0),Ce.err)throw Ce.msg||L[Ce.err];return Ce.result}le.prototype.push=function(he,_e){var Ce,Ne,$e=this.strm,xe=this.options.chunkSize;if(this.ended)return!1;Ne=_e===~~_e?_e:_e===!0?4:0,typeof he=="string"?$e.input=V.string2buf(he):j.call(he)==="[object ArrayBuffer]"?$e.input=new Uint8Array(he):$e.input=he,$e.next_in=0,$e.avail_in=$e.input.length;do{if($e.avail_out===0&&($e.output=new $.Buf8(xe),$e.next_out=0,$e.avail_out=xe),(Ce=k.deflate($e,Ne))!==1&&Ce!==ae)return this.onEnd(Ce),!(this.ended=!0);$e.avail_out!==0&&($e.avail_in!==0||Ne!==4&&Ne!==2)||(this.options.to==="string"?this.onData(V.buf2binstring($.shrinkBuf($e.output,$e.next_out))):this.onData($.shrinkBuf($e.output,$e.next_out)))}while((0<$e.avail_in||$e.avail_out===0)&&Ce!==1);return Ne===4?(Ce=k.deflateEnd(this.strm),this.onEnd(Ce),this.ended=!0,Ce===ae):Ne!==2||(this.onEnd(ae),!($e.avail_out=0))},le.prototype.onData=function(he){this.chunks.push(he)},le.prototype.onEnd=function(he){he===ae&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=$.flattenChunks(this.chunks)),this.chunks=[],this.err=he,this.msg=this.strm.msg},y.Deflate=le,y.deflate=de,y.deflateRaw=function(he,_e){return(_e=_e||{}).raw=!0,de(he,_e)},y.gzip=function(he,_e){return(_e=_e||{}).gzip=!0,de(he,_e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,g,y){var k=r("./zlib/inflate"),$=r("./utils/common"),V=r("./utils/strings"),L=r("./zlib/constants"),z=r("./zlib/messages"),j=r("./zlib/zstream"),ae=r("./zlib/gzheader"),re=Object.prototype.toString;function oe(le){if(!(this instanceof oe))return new oe(le);this.options=$.assign({chunkSize:16384,windowBits:0,to:""},le||{});var de=this.options;de.raw&&0<=de.windowBits&&de.windowBits<16&&(de.windowBits=-de.windowBits,de.windowBits===0&&(de.windowBits=-15)),!(0<=de.windowBits&&de.windowBits<16)||le&&le.windowBits||(de.windowBits+=32),15<de.windowBits&&de.windowBits<48&&!(15&de.windowBits)&&(de.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new j,this.strm.avail_out=0;var he=k.inflateInit2(this.strm,de.windowBits);if(he!==L.Z_OK)throw new Error(z[he]);this.header=new ae,k.inflateGetHeader(this.strm,this.header)}function ue(le,de){var he=new oe(de);if(he.push(le,!0),he.err)throw he.msg||z[he.err];return he.result}oe.prototype.push=function(le,de){var he,_e,Ce,Ne,$e,xe,Ie=this.strm,ze=this.options.chunkSize,qe=this.options.dictionary,Et=!1;if(this.ended)return!1;_e=de===~~de?de:de===!0?L.Z_FINISH:L.Z_NO_FLUSH,typeof le=="string"?Ie.input=V.binstring2buf(le):re.call(le)==="[object ArrayBuffer]"?Ie.input=new Uint8Array(le):Ie.input=le,Ie.next_in=0,Ie.avail_in=Ie.input.length;do{if(Ie.avail_out===0&&(Ie.output=new $.Buf8(ze),Ie.next_out=0,Ie.avail_out=ze),(he=k.inflate(Ie,L.Z_NO_FLUSH))===L.Z_NEED_DICT&&qe&&(xe=typeof qe=="string"?V.string2buf(qe):re.call(qe)==="[object ArrayBuffer]"?new Uint8Array(qe):qe,he=k.inflateSetDictionary(this.strm,xe)),he===L.Z_BUF_ERROR&&Et===!0&&(he=L.Z_OK,Et=!1),he!==L.Z_STREAM_END&&he!==L.Z_OK)return this.onEnd(he),!(this.ended=!0);Ie.next_out&&(Ie.avail_out!==0&&he!==L.Z_STREAM_END&&(Ie.avail_in!==0||_e!==L.Z_FINISH&&_e!==L.Z_SYNC_FLUSH)||(this.options.to==="string"?(Ce=V.utf8border(Ie.output,Ie.next_out),Ne=Ie.next_out-Ce,$e=V.buf2string(Ie.output,Ce),Ie.next_out=Ne,Ie.avail_out=ze-Ne,Ne&&$.arraySet(Ie.output,Ie.output,Ce,Ne,0),this.onData($e)):this.onData($.shrinkBuf(Ie.output,Ie.next_out)))),Ie.avail_in===0&&Ie.avail_out===0&&(Et=!0)}while((0<Ie.avail_in||Ie.avail_out===0)&&he!==L.Z_STREAM_END);return he===L.Z_STREAM_END&&(_e=L.Z_FINISH),_e===L.Z_FINISH?(he=k.inflateEnd(this.strm),this.onEnd(he),this.ended=!0,he===L.Z_OK):_e!==L.Z_SYNC_FLUSH||(this.onEnd(L.Z_OK),!(Ie.avail_out=0))},oe.prototype.onData=function(le){this.chunks.push(le)},oe.prototype.onEnd=function(le){le===L.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=$.flattenChunks(this.chunks)),this.chunks=[],this.err=le,this.msg=this.strm.msg},y.Inflate=oe,y.inflate=ue,y.inflateRaw=function(le,de){return(de=de||{}).raw=!0,ue(le,de)},y.ungzip=ue},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,g,y){var k=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";y.assign=function(L){for(var z=Array.prototype.slice.call(arguments,1);z.length;){var j=z.shift();if(j){if(typeof j!="object")throw new TypeError(j+"must be non-object");for(var ae in j)j.hasOwnProperty(ae)&&(L[ae]=j[ae])}}return L},y.shrinkBuf=function(L,z){return L.length===z?L:L.subarray?L.subarray(0,z):(L.length=z,L)};var $={arraySet:function(L,z,j,ae,re){if(z.subarray&&L.subarray)L.set(z.subarray(j,j+ae),re);else for(var oe=0;oe<ae;oe++)L[re+oe]=z[j+oe]},flattenChunks:function(L){var z,j,ae,re,oe,ue;for(z=ae=0,j=L.length;z<j;z++)ae+=L[z].length;for(ue=new Uint8Array(ae),z=re=0,j=L.length;z<j;z++)oe=L[z],ue.set(oe,re),re+=oe.length;return ue}},V={arraySet:function(L,z,j,ae,re){for(var oe=0;oe<ae;oe++)L[re+oe]=z[j+oe]},flattenChunks:function(L){return[].concat.apply([],L)}};y.setTyped=function(L){L?(y.Buf8=Uint8Array,y.Buf16=Uint16Array,y.Buf32=Int32Array,y.assign(y,$)):(y.Buf8=Array,y.Buf16=Array,y.Buf32=Array,y.assign(y,V))},y.setTyped(k)},{}],42:[function(r,g,y){var k=r("./common"),$=!0,V=!0;try{String.fromCharCode.apply(null,[0])}catch{$=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{V=!1}for(var L=new k.Buf8(256),z=0;z<256;z++)L[z]=252<=z?6:248<=z?5:240<=z?4:224<=z?3:192<=z?2:1;function j(ae,re){if(re<65537&&(ae.subarray&&V||!ae.subarray&&$))return String.fromCharCode.apply(null,k.shrinkBuf(ae,re));for(var oe="",ue=0;ue<re;ue++)oe+=String.fromCharCode(ae[ue]);return oe}L[254]=L[254]=1,y.string2buf=function(ae){var re,oe,ue,le,de,he=ae.length,_e=0;for(le=0;le<he;le++)(64512&(oe=ae.charCodeAt(le)))==55296&&le+1<he&&(64512&(ue=ae.charCodeAt(le+1)))==56320&&(oe=65536+(oe-55296<<10)+(ue-56320),le++),_e+=oe<128?1:oe<2048?2:oe<65536?3:4;for(re=new k.Buf8(_e),le=de=0;de<_e;le++)(64512&(oe=ae.charCodeAt(le)))==55296&&le+1<he&&(64512&(ue=ae.charCodeAt(le+1)))==56320&&(oe=65536+(oe-55296<<10)+(ue-56320),le++),oe<128?re[de++]=oe:(oe<2048?re[de++]=192|oe>>>6:(oe<65536?re[de++]=224|oe>>>12:(re[de++]=240|oe>>>18,re[de++]=128|oe>>>12&63),re[de++]=128|oe>>>6&63),re[de++]=128|63&oe);return re},y.buf2binstring=function(ae){return j(ae,ae.length)},y.binstring2buf=function(ae){for(var re=new k.Buf8(ae.length),oe=0,ue=re.length;oe<ue;oe++)re[oe]=ae.charCodeAt(oe);return re},y.buf2string=function(ae,re){var oe,ue,le,de,he=re||ae.length,_e=new Array(2*he);for(oe=ue=0;oe<he;)if((le=ae[oe++])<128)_e[ue++]=le;else if(4<(de=L[le]))_e[ue++]=65533,oe+=de-1;else{for(le&=de===2?31:de===3?15:7;1<de&&oe<he;)le=le<<6|63&ae[oe++],de--;1<de?_e[ue++]=65533:le<65536?_e[ue++]=le:(le-=65536,_e[ue++]=55296|le>>10&1023,_e[ue++]=56320|1023&le)}return j(_e,ue)},y.utf8border=function(ae,re){var oe;for((re=re||ae.length)>ae.length&&(re=ae.length),oe=re-1;0<=oe&&(192&ae[oe])==128;)oe--;return oe<0||oe===0?re:oe+L[ae[oe]]>re?oe:re}},{"./common":41}],43:[function(r,g,y){g.exports=function(k,$,V,L){for(var z=65535&k|0,j=k>>>16&65535|0,ae=0;V!==0;){for(V-=ae=2e3<V?2e3:V;j=j+(z=z+$[L++]|0)|0,--ae;);z%=65521,j%=65521}return z|j<<16|0}},{}],44:[function(r,g,y){g.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,g,y){var k=function(){for(var $,V=[],L=0;L<256;L++){$=L;for(var z=0;z<8;z++)$=1&$?3988292384^$>>>1:$>>>1;V[L]=$}return V}();g.exports=function($,V,L,z){var j=k,ae=z+L;$^=-1;for(var re=z;re<ae;re++)$=$>>>8^j[255&($^V[re])];return-1^$}},{}],46:[function(r,g,y){var k,$=r("../utils/common"),V=r("./trees"),L=r("./adler32"),z=r("./crc32"),j=r("./messages"),ae=0,re=4,oe=0,ue=-2,le=-1,de=4,he=2,_e=8,Ce=9,Ne=286,$e=30,xe=19,Ie=2*Ne+1,ze=15,qe=3,Et=258,_n=Et+qe+1,Dt=42,Sn=113,hn=1,Vn=2,Mn=3,$n=4;function Nn(vn,Kn){return vn.msg=j[Kn],Kn}function kn(vn){return(vn<<1)-(4<vn?9:0)}function jn(vn){for(var Kn=vn.length;0<=--Kn;)vn[Kn]=0}function Fn(vn){var Kn=vn.state,En=Kn.pending;En>vn.avail_out&&(En=vn.avail_out),En!==0&&($.arraySet(vn.output,Kn.pending_buf,Kn.pending_out,En,vn.next_out),vn.next_out+=En,Kn.pending_out+=En,vn.total_out+=En,vn.avail_out-=En,Kn.pending-=En,Kn.pending===0&&(Kn.pending_out=0))}function Tn(vn,Kn){V._tr_flush_block(vn,0<=vn.block_start?vn.block_start:-1,vn.strstart-vn.block_start,Kn),vn.block_start=vn.strstart,Fn(vn.strm)}function Hn(vn,Kn){vn.pending_buf[vn.pending++]=Kn}function la(vn,Kn){vn.pending_buf[vn.pending++]=Kn>>>8&255,vn.pending_buf[vn.pending++]=255&Kn}function ca(vn,Kn){var En,kt,At=vn.max_chain_length,Dn=vn.strstart,Xn=vn.prev_length,aa=vn.nice_match,sa=vn.strstart>vn.w_size-_n?vn.strstart-(vn.w_size-_n):0,ia=vn.window,ma=vn.w_mask,ua=vn.prev,pe=vn.strstart+Et,Oe=ia[Dn+Xn-1],Ve=ia[Dn+Xn];vn.prev_length>=vn.good_match&&(At>>=2),aa>vn.lookahead&&(aa=vn.lookahead);do if(ia[(En=Kn)+Xn]===Ve&&ia[En+Xn-1]===Oe&&ia[En]===ia[Dn]&&ia[++En]===ia[Dn+1]){Dn+=2,En++;do;while(ia[++Dn]===ia[++En]&&ia[++Dn]===ia[++En]&&ia[++Dn]===ia[++En]&&ia[++Dn]===ia[++En]&&ia[++Dn]===ia[++En]&&ia[++Dn]===ia[++En]&&ia[++Dn]===ia[++En]&&ia[++Dn]===ia[++En]&&Dn<pe);if(kt=Et-(pe-Dn),Dn=pe-Et,Xn<kt){if(vn.match_start=Kn,aa<=(Xn=kt))break;Oe=ia[Dn+Xn-1],Ve=ia[Dn+Xn]}}while((Kn=ua[Kn&ma])>sa&&--At!=0);return Xn<=vn.lookahead?Xn:vn.lookahead}function Zn(vn){var Kn,En,kt,At,Dn,Xn,aa,sa,ia,ma,ua=vn.w_size;do{if(At=vn.window_size-vn.lookahead-vn.strstart,vn.strstart>=ua+(ua-_n)){for($.arraySet(vn.window,vn.window,ua,ua,0),vn.match_start-=ua,vn.strstart-=ua,vn.block_start-=ua,Kn=En=vn.hash_size;kt=vn.head[--Kn],vn.head[Kn]=ua<=kt?kt-ua:0,--En;);for(Kn=En=ua;kt=vn.prev[--Kn],vn.prev[Kn]=ua<=kt?kt-ua:0,--En;);At+=ua}if(vn.strm.avail_in===0)break;if(Xn=vn.strm,aa=vn.window,sa=vn.strstart+vn.lookahead,ia=At,ma=void 0,ma=Xn.avail_in,ia<ma&&(ma=ia),En=ma===0?0:(Xn.avail_in-=ma,$.arraySet(aa,Xn.input,Xn.next_in,ma,sa),Xn.state.wrap===1?Xn.adler=L(Xn.adler,aa,ma,sa):Xn.state.wrap===2&&(Xn.adler=z(Xn.adler,aa,ma,sa)),Xn.next_in+=ma,Xn.total_in+=ma,ma),vn.lookahead+=En,vn.lookahead+vn.insert>=qe)for(Dn=vn.strstart-vn.insert,vn.ins_h=vn.window[Dn],vn.ins_h=(vn.ins_h<<vn.hash_shift^vn.window[Dn+1])&vn.hash_mask;vn.insert&&(vn.ins_h=(vn.ins_h<<vn.hash_shift^vn.window[Dn+qe-1])&vn.hash_mask,vn.prev[Dn&vn.w_mask]=vn.head[vn.ins_h],vn.head[vn.ins_h]=Dn,Dn++,vn.insert--,!(vn.lookahead+vn.insert<qe)););}while(vn.lookahead<_n&&vn.strm.avail_in!==0)}function Bn(vn,Kn){for(var En,kt;;){if(vn.lookahead<_n){if(Zn(vn),vn.lookahead<_n&&Kn===ae)return hn;if(vn.lookahead===0)break}if(En=0,vn.lookahead>=qe&&(vn.ins_h=(vn.ins_h<<vn.hash_shift^vn.window[vn.strstart+qe-1])&vn.hash_mask,En=vn.prev[vn.strstart&vn.w_mask]=vn.head[vn.ins_h],vn.head[vn.ins_h]=vn.strstart),En!==0&&vn.strstart-En<=vn.w_size-_n&&(vn.match_length=ca(vn,En)),vn.match_length>=qe)if(kt=V._tr_tally(vn,vn.strstart-vn.match_start,vn.match_length-qe),vn.lookahead-=vn.match_length,vn.match_length<=vn.max_lazy_match&&vn.lookahead>=qe){for(vn.match_length--;vn.strstart++,vn.ins_h=(vn.ins_h<<vn.hash_shift^vn.window[vn.strstart+qe-1])&vn.hash_mask,En=vn.prev[vn.strstart&vn.w_mask]=vn.head[vn.ins_h],vn.head[vn.ins_h]=vn.strstart,--vn.match_length!=0;);vn.strstart++}else vn.strstart+=vn.match_length,vn.match_length=0,vn.ins_h=vn.window[vn.strstart],vn.ins_h=(vn.ins_h<<vn.hash_shift^vn.window[vn.strstart+1])&vn.hash_mask;else kt=V._tr_tally(vn,0,vn.window[vn.strstart]),vn.lookahead--,vn.strstart++;if(kt&&(Tn(vn,!1),vn.strm.avail_out===0))return hn}return vn.insert=vn.strstart<qe-1?vn.strstart:qe-1,Kn===re?(Tn(vn,!0),vn.strm.avail_out===0?Mn:$n):vn.last_lit&&(Tn(vn,!1),vn.strm.avail_out===0)?hn:Vn}function Wn(vn,Kn){for(var En,kt,At;;){if(vn.lookahead<_n){if(Zn(vn),vn.lookahead<_n&&Kn===ae)return hn;if(vn.lookahead===0)break}if(En=0,vn.lookahead>=qe&&(vn.ins_h=(vn.ins_h<<vn.hash_shift^vn.window[vn.strstart+qe-1])&vn.hash_mask,En=vn.prev[vn.strstart&vn.w_mask]=vn.head[vn.ins_h],vn.head[vn.ins_h]=vn.strstart),vn.prev_length=vn.match_length,vn.prev_match=vn.match_start,vn.match_length=qe-1,En!==0&&vn.prev_length<vn.max_lazy_match&&vn.strstart-En<=vn.w_size-_n&&(vn.match_length=ca(vn,En),vn.match_length<=5&&(vn.strategy===1||vn.match_length===qe&&4096<vn.strstart-vn.match_start)&&(vn.match_length=qe-1)),vn.prev_length>=qe&&vn.match_length<=vn.prev_length){for(At=vn.strstart+vn.lookahead-qe,kt=V._tr_tally(vn,vn.strstart-1-vn.prev_match,vn.prev_length-qe),vn.lookahead-=vn.prev_length-1,vn.prev_length-=2;++vn.strstart<=At&&(vn.ins_h=(vn.ins_h<<vn.hash_shift^vn.window[vn.strstart+qe-1])&vn.hash_mask,En=vn.prev[vn.strstart&vn.w_mask]=vn.head[vn.ins_h],vn.head[vn.ins_h]=vn.strstart),--vn.prev_length!=0;);if(vn.match_available=0,vn.match_length=qe-1,vn.strstart++,kt&&(Tn(vn,!1),vn.strm.avail_out===0))return hn}else if(vn.match_available){if((kt=V._tr_tally(vn,0,vn.window[vn.strstart-1]))&&Tn(vn,!1),vn.strstart++,vn.lookahead--,vn.strm.avail_out===0)return hn}else vn.match_available=1,vn.strstart++,vn.lookahead--}return vn.match_available&&(kt=V._tr_tally(vn,0,vn.window[vn.strstart-1]),vn.match_available=0),vn.insert=vn.strstart<qe-1?vn.strstart:qe-1,Kn===re?(Tn(vn,!0),vn.strm.avail_out===0?Mn:$n):vn.last_lit&&(Tn(vn,!1),vn.strm.avail_out===0)?hn:Vn}function da(vn,Kn,En,kt,At){this.good_length=vn,this.max_lazy=Kn,this.nice_length=En,this.max_chain=kt,this.func=At}function ga(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_e,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new $.Buf16(2*Ie),this.dyn_dtree=new $.Buf16(2*(2*$e+1)),this.bl_tree=new $.Buf16(2*(2*xe+1)),jn(this.dyn_ltree),jn(this.dyn_dtree),jn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new $.Buf16(ze+1),this.heap=new $.Buf16(2*Ne+1),jn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new $.Buf16(2*Ne+1),jn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ca(vn){var Kn;return vn&&vn.state?(vn.total_in=vn.total_out=0,vn.data_type=he,(Kn=vn.state).pending=0,Kn.pending_out=0,Kn.wrap<0&&(Kn.wrap=-Kn.wrap),Kn.status=Kn.wrap?Dt:Sn,vn.adler=Kn.wrap===2?0:1,Kn.last_flush=ae,V._tr_init(Kn),oe):Nn(vn,ue)}function ra(vn){var Kn=Ca(vn);return Kn===oe&&function(En){En.window_size=2*En.w_size,jn(En.head),En.max_lazy_match=k[En.level].max_lazy,En.good_match=k[En.level].good_length,En.nice_match=k[En.level].nice_length,En.max_chain_length=k[En.level].max_chain,En.strstart=0,En.block_start=0,En.lookahead=0,En.insert=0,En.match_length=En.prev_length=qe-1,En.match_available=0,En.ins_h=0}(vn.state),Kn}function Gn(vn,Kn,En,kt,At,Dn){if(!vn)return ue;var Xn=1;if(Kn===le&&(Kn=6),kt<0?(Xn=0,kt=-kt):15<kt&&(Xn=2,kt-=16),At<1||Ce<At||En!==_e||kt<8||15<kt||Kn<0||9<Kn||Dn<0||de<Dn)return Nn(vn,ue);kt===8&&(kt=9);var aa=new ga;return(vn.state=aa).strm=vn,aa.wrap=Xn,aa.gzhead=null,aa.w_bits=kt,aa.w_size=1<<aa.w_bits,aa.w_mask=aa.w_size-1,aa.hash_bits=At+7,aa.hash_size=1<<aa.hash_bits,aa.hash_mask=aa.hash_size-1,aa.hash_shift=~~((aa.hash_bits+qe-1)/qe),aa.window=new $.Buf8(2*aa.w_size),aa.head=new $.Buf16(aa.hash_size),aa.prev=new $.Buf16(aa.w_size),aa.lit_bufsize=1<<At+6,aa.pending_buf_size=4*aa.lit_bufsize,aa.pending_buf=new $.Buf8(aa.pending_buf_size),aa.d_buf=1*aa.lit_bufsize,aa.l_buf=3*aa.lit_bufsize,aa.level=Kn,aa.strategy=Dn,aa.method=En,ra(vn)}k=[new da(0,0,0,0,function(vn,Kn){var En=65535;for(En>vn.pending_buf_size-5&&(En=vn.pending_buf_size-5);;){if(vn.lookahead<=1){if(Zn(vn),vn.lookahead===0&&Kn===ae)return hn;if(vn.lookahead===0)break}vn.strstart+=vn.lookahead,vn.lookahead=0;var kt=vn.block_start+En;if((vn.strstart===0||vn.strstart>=kt)&&(vn.lookahead=vn.strstart-kt,vn.strstart=kt,Tn(vn,!1),vn.strm.avail_out===0)||vn.strstart-vn.block_start>=vn.w_size-_n&&(Tn(vn,!1),vn.strm.avail_out===0))return hn}return vn.insert=0,Kn===re?(Tn(vn,!0),vn.strm.avail_out===0?Mn:$n):(vn.strstart>vn.block_start&&(Tn(vn,!1),vn.strm.avail_out),hn)}),new da(4,4,8,4,Bn),new da(4,5,16,8,Bn),new da(4,6,32,32,Bn),new da(4,4,16,16,Wn),new da(8,16,32,32,Wn),new da(8,16,128,128,Wn),new da(8,32,128,256,Wn),new da(32,128,258,1024,Wn),new da(32,258,258,4096,Wn)],y.deflateInit=function(vn,Kn){return Gn(vn,Kn,_e,15,8,0)},y.deflateInit2=Gn,y.deflateReset=ra,y.deflateResetKeep=Ca,y.deflateSetHeader=function(vn,Kn){return vn&&vn.state?vn.state.wrap!==2?ue:(vn.state.gzhead=Kn,oe):ue},y.deflate=function(vn,Kn){var En,kt,At,Dn;if(!vn||!vn.state||5<Kn||Kn<0)return vn?Nn(vn,ue):ue;if(kt=vn.state,!vn.output||!vn.input&&vn.avail_in!==0||kt.status===666&&Kn!==re)return Nn(vn,vn.avail_out===0?-5:ue);if(kt.strm=vn,En=kt.last_flush,kt.last_flush=Kn,kt.status===Dt)if(kt.wrap===2)vn.adler=0,Hn(kt,31),Hn(kt,139),Hn(kt,8),kt.gzhead?(Hn(kt,(kt.gzhead.text?1:0)+(kt.gzhead.hcrc?2:0)+(kt.gzhead.extra?4:0)+(kt.gzhead.name?8:0)+(kt.gzhead.comment?16:0)),Hn(kt,255&kt.gzhead.time),Hn(kt,kt.gzhead.time>>8&255),Hn(kt,kt.gzhead.time>>16&255),Hn(kt,kt.gzhead.time>>24&255),Hn(kt,kt.level===9?2:2<=kt.strategy||kt.level<2?4:0),Hn(kt,255&kt.gzhead.os),kt.gzhead.extra&&kt.gzhead.extra.length&&(Hn(kt,255&kt.gzhead.extra.length),Hn(kt,kt.gzhead.extra.length>>8&255)),kt.gzhead.hcrc&&(vn.adler=z(vn.adler,kt.pending_buf,kt.pending,0)),kt.gzindex=0,kt.status=69):(Hn(kt,0),Hn(kt,0),Hn(kt,0),Hn(kt,0),Hn(kt,0),Hn(kt,kt.level===9?2:2<=kt.strategy||kt.level<2?4:0),Hn(kt,3),kt.status=Sn);else{var Xn=_e+(kt.w_bits-8<<4)<<8;Xn|=(2<=kt.strategy||kt.level<2?0:kt.level<6?1:kt.level===6?2:3)<<6,kt.strstart!==0&&(Xn|=32),Xn+=31-Xn%31,kt.status=Sn,la(kt,Xn),kt.strstart!==0&&(la(kt,vn.adler>>>16),la(kt,65535&vn.adler)),vn.adler=1}if(kt.status===69)if(kt.gzhead.extra){for(At=kt.pending;kt.gzindex<(65535&kt.gzhead.extra.length)&&(kt.pending!==kt.pending_buf_size||(kt.gzhead.hcrc&&kt.pending>At&&(vn.adler=z(vn.adler,kt.pending_buf,kt.pending-At,At)),Fn(vn),At=kt.pending,kt.pending!==kt.pending_buf_size));)Hn(kt,255&kt.gzhead.extra[kt.gzindex]),kt.gzindex++;kt.gzhead.hcrc&&kt.pending>At&&(vn.adler=z(vn.adler,kt.pending_buf,kt.pending-At,At)),kt.gzindex===kt.gzhead.extra.length&&(kt.gzindex=0,kt.status=73)}else kt.status=73;if(kt.status===73)if(kt.gzhead.name){At=kt.pending;do{if(kt.pending===kt.pending_buf_size&&(kt.gzhead.hcrc&&kt.pending>At&&(vn.adler=z(vn.adler,kt.pending_buf,kt.pending-At,At)),Fn(vn),At=kt.pending,kt.pending===kt.pending_buf_size)){Dn=1;break}Dn=kt.gzindex<kt.gzhead.name.length?255&kt.gzhead.name.charCodeAt(kt.gzindex++):0,Hn(kt,Dn)}while(Dn!==0);kt.gzhead.hcrc&&kt.pending>At&&(vn.adler=z(vn.adler,kt.pending_buf,kt.pending-At,At)),Dn===0&&(kt.gzindex=0,kt.status=91)}else kt.status=91;if(kt.status===91)if(kt.gzhead.comment){At=kt.pending;do{if(kt.pending===kt.pending_buf_size&&(kt.gzhead.hcrc&&kt.pending>At&&(vn.adler=z(vn.adler,kt.pending_buf,kt.pending-At,At)),Fn(vn),At=kt.pending,kt.pending===kt.pending_buf_size)){Dn=1;break}Dn=kt.gzindex<kt.gzhead.comment.length?255&kt.gzhead.comment.charCodeAt(kt.gzindex++):0,Hn(kt,Dn)}while(Dn!==0);kt.gzhead.hcrc&&kt.pending>At&&(vn.adler=z(vn.adler,kt.pending_buf,kt.pending-At,At)),Dn===0&&(kt.status=103)}else kt.status=103;if(kt.status===103&&(kt.gzhead.hcrc?(kt.pending+2>kt.pending_buf_size&&Fn(vn),kt.pending+2<=kt.pending_buf_size&&(Hn(kt,255&vn.adler),Hn(kt,vn.adler>>8&255),vn.adler=0,kt.status=Sn)):kt.status=Sn),kt.pending!==0){if(Fn(vn),vn.avail_out===0)return kt.last_flush=-1,oe}else if(vn.avail_in===0&&kn(Kn)<=kn(En)&&Kn!==re)return Nn(vn,-5);if(kt.status===666&&vn.avail_in!==0)return Nn(vn,-5);if(vn.avail_in!==0||kt.lookahead!==0||Kn!==ae&&kt.status!==666){var aa=kt.strategy===2?function(sa,ia){for(var ma;;){if(sa.lookahead===0&&(Zn(sa),sa.lookahead===0)){if(ia===ae)return hn;break}if(sa.match_length=0,ma=V._tr_tally(sa,0,sa.window[sa.strstart]),sa.lookahead--,sa.strstart++,ma&&(Tn(sa,!1),sa.strm.avail_out===0))return hn}return sa.insert=0,ia===re?(Tn(sa,!0),sa.strm.avail_out===0?Mn:$n):sa.last_lit&&(Tn(sa,!1),sa.strm.avail_out===0)?hn:Vn}(kt,Kn):kt.strategy===3?function(sa,ia){for(var ma,ua,pe,Oe,Ve=sa.window;;){if(sa.lookahead<=Et){if(Zn(sa),sa.lookahead<=Et&&ia===ae)return hn;if(sa.lookahead===0)break}if(sa.match_length=0,sa.lookahead>=qe&&0<sa.strstart&&(ua=Ve[pe=sa.strstart-1])===Ve[++pe]&&ua===Ve[++pe]&&ua===Ve[++pe]){Oe=sa.strstart+Et;do;while(ua===Ve[++pe]&&ua===Ve[++pe]&&ua===Ve[++pe]&&ua===Ve[++pe]&&ua===Ve[++pe]&&ua===Ve[++pe]&&ua===Ve[++pe]&&ua===Ve[++pe]&&pe<Oe);sa.match_length=Et-(Oe-pe),sa.match_length>sa.lookahead&&(sa.match_length=sa.lookahead)}if(sa.match_length>=qe?(ma=V._tr_tally(sa,1,sa.match_length-qe),sa.lookahead-=sa.match_length,sa.strstart+=sa.match_length,sa.match_length=0):(ma=V._tr_tally(sa,0,sa.window[sa.strstart]),sa.lookahead--,sa.strstart++),ma&&(Tn(sa,!1),sa.strm.avail_out===0))return hn}return sa.insert=0,ia===re?(Tn(sa,!0),sa.strm.avail_out===0?Mn:$n):sa.last_lit&&(Tn(sa,!1),sa.strm.avail_out===0)?hn:Vn}(kt,Kn):k[kt.level].func(kt,Kn);if(aa!==Mn&&aa!==$n||(kt.status=666),aa===hn||aa===Mn)return vn.avail_out===0&&(kt.last_flush=-1),oe;if(aa===Vn&&(Kn===1?V._tr_align(kt):Kn!==5&&(V._tr_stored_block(kt,0,0,!1),Kn===3&&(jn(kt.head),kt.lookahead===0&&(kt.strstart=0,kt.block_start=0,kt.insert=0))),Fn(vn),vn.avail_out===0))return kt.last_flush=-1,oe}return Kn!==re?oe:kt.wrap<=0?1:(kt.wrap===2?(Hn(kt,255&vn.adler),Hn(kt,vn.adler>>8&255),Hn(kt,vn.adler>>16&255),Hn(kt,vn.adler>>24&255),Hn(kt,255&vn.total_in),Hn(kt,vn.total_in>>8&255),Hn(kt,vn.total_in>>16&255),Hn(kt,vn.total_in>>24&255)):(la(kt,vn.adler>>>16),la(kt,65535&vn.adler)),Fn(vn),0<kt.wrap&&(kt.wrap=-kt.wrap),kt.pending!==0?oe:1)},y.deflateEnd=function(vn){var Kn;return vn&&vn.state?(Kn=vn.state.status)!==Dt&&Kn!==69&&Kn!==73&&Kn!==91&&Kn!==103&&Kn!==Sn&&Kn!==666?Nn(vn,ue):(vn.state=null,Kn===Sn?Nn(vn,-3):oe):ue},y.deflateSetDictionary=function(vn,Kn){var En,kt,At,Dn,Xn,aa,sa,ia,ma=Kn.length;if(!vn||!vn.state||(Dn=(En=vn.state).wrap)===2||Dn===1&&En.status!==Dt||En.lookahead)return ue;for(Dn===1&&(vn.adler=L(vn.adler,Kn,ma,0)),En.wrap=0,ma>=En.w_size&&(Dn===0&&(jn(En.head),En.strstart=0,En.block_start=0,En.insert=0),ia=new $.Buf8(En.w_size),$.arraySet(ia,Kn,ma-En.w_size,En.w_size,0),Kn=ia,ma=En.w_size),Xn=vn.avail_in,aa=vn.next_in,sa=vn.input,vn.avail_in=ma,vn.next_in=0,vn.input=Kn,Zn(En);En.lookahead>=qe;){for(kt=En.strstart,At=En.lookahead-(qe-1);En.ins_h=(En.ins_h<<En.hash_shift^En.window[kt+qe-1])&En.hash_mask,En.prev[kt&En.w_mask]=En.head[En.ins_h],En.head[En.ins_h]=kt,kt++,--At;);En.strstart=kt,En.lookahead=qe-1,Zn(En)}return En.strstart+=En.lookahead,En.block_start=En.strstart,En.insert=En.lookahead,En.lookahead=0,En.match_length=En.prev_length=qe-1,En.match_available=0,vn.next_in=aa,vn.input=sa,vn.avail_in=Xn,En.wrap=Dn,oe},y.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,g,y){g.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,g,y){g.exports=function(k,$){var V,L,z,j,ae,re,oe,ue,le,de,he,_e,Ce,Ne,$e,xe,Ie,ze,qe,Et,_n,Dt,Sn,hn,Vn;V=k.state,L=k.next_in,hn=k.input,z=L+(k.avail_in-5),j=k.next_out,Vn=k.output,ae=j-($-k.avail_out),re=j+(k.avail_out-257),oe=V.dmax,ue=V.wsize,le=V.whave,de=V.wnext,he=V.window,_e=V.hold,Ce=V.bits,Ne=V.lencode,$e=V.distcode,xe=(1<<V.lenbits)-1,Ie=(1<<V.distbits)-1;e:do{Ce<15&&(_e+=hn[L++]<<Ce,Ce+=8,_e+=hn[L++]<<Ce,Ce+=8),ze=Ne[_e&xe];t:for(;;){if(_e>>>=qe=ze>>>24,Ce-=qe,(qe=ze>>>16&255)===0)Vn[j++]=65535&ze;else{if(!(16&qe)){if(!(64&qe)){ze=Ne[(65535&ze)+(_e&(1<<qe)-1)];continue t}if(32&qe){V.mode=12;break e}k.msg="invalid literal/length code",V.mode=30;break e}Et=65535&ze,(qe&=15)&&(Ce<qe&&(_e+=hn[L++]<<Ce,Ce+=8),Et+=_e&(1<<qe)-1,_e>>>=qe,Ce-=qe),Ce<15&&(_e+=hn[L++]<<Ce,Ce+=8,_e+=hn[L++]<<Ce,Ce+=8),ze=$e[_e&Ie];n:for(;;){if(_e>>>=qe=ze>>>24,Ce-=qe,!(16&(qe=ze>>>16&255))){if(!(64&qe)){ze=$e[(65535&ze)+(_e&(1<<qe)-1)];continue n}k.msg="invalid distance code",V.mode=30;break e}if(_n=65535&ze,Ce<(qe&=15)&&(_e+=hn[L++]<<Ce,(Ce+=8)<qe&&(_e+=hn[L++]<<Ce,Ce+=8)),oe<(_n+=_e&(1<<qe)-1)){k.msg="invalid distance too far back",V.mode=30;break e}if(_e>>>=qe,Ce-=qe,(qe=j-ae)<_n){if(le<(qe=_n-qe)&&V.sane){k.msg="invalid distance too far back",V.mode=30;break e}if(Sn=he,(Dt=0)===de){if(Dt+=ue-qe,qe<Et){for(Et-=qe;Vn[j++]=he[Dt++],--qe;);Dt=j-_n,Sn=Vn}}else if(de<qe){if(Dt+=ue+de-qe,(qe-=de)<Et){for(Et-=qe;Vn[j++]=he[Dt++],--qe;);if(Dt=0,de<Et){for(Et-=qe=de;Vn[j++]=he[Dt++],--qe;);Dt=j-_n,Sn=Vn}}}else if(Dt+=de-qe,qe<Et){for(Et-=qe;Vn[j++]=he[Dt++],--qe;);Dt=j-_n,Sn=Vn}for(;2<Et;)Vn[j++]=Sn[Dt++],Vn[j++]=Sn[Dt++],Vn[j++]=Sn[Dt++],Et-=3;Et&&(Vn[j++]=Sn[Dt++],1<Et&&(Vn[j++]=Sn[Dt++]))}else{for(Dt=j-_n;Vn[j++]=Vn[Dt++],Vn[j++]=Vn[Dt++],Vn[j++]=Vn[Dt++],2<(Et-=3););Et&&(Vn[j++]=Vn[Dt++],1<Et&&(Vn[j++]=Vn[Dt++]))}break}}break}}while(L<z&&j<re);L-=Et=Ce>>3,_e&=(1<<(Ce-=Et<<3))-1,k.next_in=L,k.next_out=j,k.avail_in=L<z?z-L+5:5-(L-z),k.avail_out=j<re?re-j+257:257-(j-re),V.hold=_e,V.bits=Ce}},{}],49:[function(r,g,y){var k=r("../utils/common"),$=r("./adler32"),V=r("./crc32"),L=r("./inffast"),z=r("./inftrees"),j=1,ae=2,re=0,oe=-2,ue=1,le=852,de=592;function he(Dt){return(Dt>>>24&255)+(Dt>>>8&65280)+((65280&Dt)<<8)+((255&Dt)<<24)}function _e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new k.Buf16(320),this.work=new k.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Ce(Dt){var Sn;return Dt&&Dt.state?(Sn=Dt.state,Dt.total_in=Dt.total_out=Sn.total=0,Dt.msg="",Sn.wrap&&(Dt.adler=1&Sn.wrap),Sn.mode=ue,Sn.last=0,Sn.havedict=0,Sn.dmax=32768,Sn.head=null,Sn.hold=0,Sn.bits=0,Sn.lencode=Sn.lendyn=new k.Buf32(le),Sn.distcode=Sn.distdyn=new k.Buf32(de),Sn.sane=1,Sn.back=-1,re):oe}function Ne(Dt){var Sn;return Dt&&Dt.state?((Sn=Dt.state).wsize=0,Sn.whave=0,Sn.wnext=0,Ce(Dt)):oe}function $e(Dt,Sn){var hn,Vn;return Dt&&Dt.state?(Vn=Dt.state,Sn<0?(hn=0,Sn=-Sn):(hn=1+(Sn>>4),Sn<48&&(Sn&=15)),Sn&&(Sn<8||15<Sn)?oe:(Vn.window!==null&&Vn.wbits!==Sn&&(Vn.window=null),Vn.wrap=hn,Vn.wbits=Sn,Ne(Dt))):oe}function xe(Dt,Sn){var hn,Vn;return Dt?(Vn=new _e,(Dt.state=Vn).window=null,(hn=$e(Dt,Sn))!==re&&(Dt.state=null),hn):oe}var Ie,ze,qe=!0;function Et(Dt){if(qe){var Sn;for(Ie=new k.Buf32(512),ze=new k.Buf32(32),Sn=0;Sn<144;)Dt.lens[Sn++]=8;for(;Sn<256;)Dt.lens[Sn++]=9;for(;Sn<280;)Dt.lens[Sn++]=7;for(;Sn<288;)Dt.lens[Sn++]=8;for(z(j,Dt.lens,0,288,Ie,0,Dt.work,{bits:9}),Sn=0;Sn<32;)Dt.lens[Sn++]=5;z(ae,Dt.lens,0,32,ze,0,Dt.work,{bits:5}),qe=!1}Dt.lencode=Ie,Dt.lenbits=9,Dt.distcode=ze,Dt.distbits=5}function _n(Dt,Sn,hn,Vn){var Mn,$n=Dt.state;return $n.window===null&&($n.wsize=1<<$n.wbits,$n.wnext=0,$n.whave=0,$n.window=new k.Buf8($n.wsize)),Vn>=$n.wsize?(k.arraySet($n.window,Sn,hn-$n.wsize,$n.wsize,0),$n.wnext=0,$n.whave=$n.wsize):(Vn<(Mn=$n.wsize-$n.wnext)&&(Mn=Vn),k.arraySet($n.window,Sn,hn-Vn,Mn,$n.wnext),(Vn-=Mn)?(k.arraySet($n.window,Sn,hn-Vn,Vn,0),$n.wnext=Vn,$n.whave=$n.wsize):($n.wnext+=Mn,$n.wnext===$n.wsize&&($n.wnext=0),$n.whave<$n.wsize&&($n.whave+=Mn))),0}y.inflateReset=Ne,y.inflateReset2=$e,y.inflateResetKeep=Ce,y.inflateInit=function(Dt){return xe(Dt,15)},y.inflateInit2=xe,y.inflate=function(Dt,Sn){var hn,Vn,Mn,$n,Nn,kn,jn,Fn,Tn,Hn,la,ca,Zn,Bn,Wn,da,ga,Ca,ra,Gn,vn,Kn,En,kt,At=0,Dn=new k.Buf8(4),Xn=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Dt||!Dt.state||!Dt.output||!Dt.input&&Dt.avail_in!==0)return oe;(hn=Dt.state).mode===12&&(hn.mode=13),Nn=Dt.next_out,Mn=Dt.output,jn=Dt.avail_out,$n=Dt.next_in,Vn=Dt.input,kn=Dt.avail_in,Fn=hn.hold,Tn=hn.bits,Hn=kn,la=jn,Kn=re;e:for(;;)switch(hn.mode){case ue:if(hn.wrap===0){hn.mode=13;break}for(;Tn<16;){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}if(2&hn.wrap&&Fn===35615){Dn[hn.check=0]=255&Fn,Dn[1]=Fn>>>8&255,hn.check=V(hn.check,Dn,2,0),Tn=Fn=0,hn.mode=2;break}if(hn.flags=0,hn.head&&(hn.head.done=!1),!(1&hn.wrap)||(((255&Fn)<<8)+(Fn>>8))%31){Dt.msg="incorrect header check",hn.mode=30;break}if((15&Fn)!=8){Dt.msg="unknown compression method",hn.mode=30;break}if(Tn-=4,vn=8+(15&(Fn>>>=4)),hn.wbits===0)hn.wbits=vn;else if(vn>hn.wbits){Dt.msg="invalid window size",hn.mode=30;break}hn.dmax=1<<vn,Dt.adler=hn.check=1,hn.mode=512&Fn?10:12,Tn=Fn=0;break;case 2:for(;Tn<16;){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}if(hn.flags=Fn,(255&hn.flags)!=8){Dt.msg="unknown compression method",hn.mode=30;break}if(57344&hn.flags){Dt.msg="unknown header flags set",hn.mode=30;break}hn.head&&(hn.head.text=Fn>>8&1),512&hn.flags&&(Dn[0]=255&Fn,Dn[1]=Fn>>>8&255,hn.check=V(hn.check,Dn,2,0)),Tn=Fn=0,hn.mode=3;case 3:for(;Tn<32;){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}hn.head&&(hn.head.time=Fn),512&hn.flags&&(Dn[0]=255&Fn,Dn[1]=Fn>>>8&255,Dn[2]=Fn>>>16&255,Dn[3]=Fn>>>24&255,hn.check=V(hn.check,Dn,4,0)),Tn=Fn=0,hn.mode=4;case 4:for(;Tn<16;){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}hn.head&&(hn.head.xflags=255&Fn,hn.head.os=Fn>>8),512&hn.flags&&(Dn[0]=255&Fn,Dn[1]=Fn>>>8&255,hn.check=V(hn.check,Dn,2,0)),Tn=Fn=0,hn.mode=5;case 5:if(1024&hn.flags){for(;Tn<16;){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}hn.length=Fn,hn.head&&(hn.head.extra_len=Fn),512&hn.flags&&(Dn[0]=255&Fn,Dn[1]=Fn>>>8&255,hn.check=V(hn.check,Dn,2,0)),Tn=Fn=0}else hn.head&&(hn.head.extra=null);hn.mode=6;case 6:if(1024&hn.flags&&(kn<(ca=hn.length)&&(ca=kn),ca&&(hn.head&&(vn=hn.head.extra_len-hn.length,hn.head.extra||(hn.head.extra=new Array(hn.head.extra_len)),k.arraySet(hn.head.extra,Vn,$n,ca,vn)),512&hn.flags&&(hn.check=V(hn.check,Vn,ca,$n)),kn-=ca,$n+=ca,hn.length-=ca),hn.length))break e;hn.length=0,hn.mode=7;case 7:if(2048&hn.flags){if(kn===0)break e;for(ca=0;vn=Vn[$n+ca++],hn.head&&vn&&hn.length<65536&&(hn.head.name+=String.fromCharCode(vn)),vn&&ca<kn;);if(512&hn.flags&&(hn.check=V(hn.check,Vn,ca,$n)),kn-=ca,$n+=ca,vn)break e}else hn.head&&(hn.head.name=null);hn.length=0,hn.mode=8;case 8:if(4096&hn.flags){if(kn===0)break e;for(ca=0;vn=Vn[$n+ca++],hn.head&&vn&&hn.length<65536&&(hn.head.comment+=String.fromCharCode(vn)),vn&&ca<kn;);if(512&hn.flags&&(hn.check=V(hn.check,Vn,ca,$n)),kn-=ca,$n+=ca,vn)break e}else hn.head&&(hn.head.comment=null);hn.mode=9;case 9:if(512&hn.flags){for(;Tn<16;){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}if(Fn!==(65535&hn.check)){Dt.msg="header crc mismatch",hn.mode=30;break}Tn=Fn=0}hn.head&&(hn.head.hcrc=hn.flags>>9&1,hn.head.done=!0),Dt.adler=hn.check=0,hn.mode=12;break;case 10:for(;Tn<32;){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}Dt.adler=hn.check=he(Fn),Tn=Fn=0,hn.mode=11;case 11:if(hn.havedict===0)return Dt.next_out=Nn,Dt.avail_out=jn,Dt.next_in=$n,Dt.avail_in=kn,hn.hold=Fn,hn.bits=Tn,2;Dt.adler=hn.check=1,hn.mode=12;case 12:if(Sn===5||Sn===6)break e;case 13:if(hn.last){Fn>>>=7&Tn,Tn-=7&Tn,hn.mode=27;break}for(;Tn<3;){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}switch(hn.last=1&Fn,Tn-=1,3&(Fn>>>=1)){case 0:hn.mode=14;break;case 1:if(Et(hn),hn.mode=20,Sn!==6)break;Fn>>>=2,Tn-=2;break e;case 2:hn.mode=17;break;case 3:Dt.msg="invalid block type",hn.mode=30}Fn>>>=2,Tn-=2;break;case 14:for(Fn>>>=7&Tn,Tn-=7&Tn;Tn<32;){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}if((65535&Fn)!=(Fn>>>16^65535)){Dt.msg="invalid stored block lengths",hn.mode=30;break}if(hn.length=65535&Fn,Tn=Fn=0,hn.mode=15,Sn===6)break e;case 15:hn.mode=16;case 16:if(ca=hn.length){if(kn<ca&&(ca=kn),jn<ca&&(ca=jn),ca===0)break e;k.arraySet(Mn,Vn,$n,ca,Nn),kn-=ca,$n+=ca,jn-=ca,Nn+=ca,hn.length-=ca;break}hn.mode=12;break;case 17:for(;Tn<14;){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}if(hn.nlen=257+(31&Fn),Fn>>>=5,Tn-=5,hn.ndist=1+(31&Fn),Fn>>>=5,Tn-=5,hn.ncode=4+(15&Fn),Fn>>>=4,Tn-=4,286<hn.nlen||30<hn.ndist){Dt.msg="too many length or distance symbols",hn.mode=30;break}hn.have=0,hn.mode=18;case 18:for(;hn.have<hn.ncode;){for(;Tn<3;){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}hn.lens[Xn[hn.have++]]=7&Fn,Fn>>>=3,Tn-=3}for(;hn.have<19;)hn.lens[Xn[hn.have++]]=0;if(hn.lencode=hn.lendyn,hn.lenbits=7,En={bits:hn.lenbits},Kn=z(0,hn.lens,0,19,hn.lencode,0,hn.work,En),hn.lenbits=En.bits,Kn){Dt.msg="invalid code lengths set",hn.mode=30;break}hn.have=0,hn.mode=19;case 19:for(;hn.have<hn.nlen+hn.ndist;){for(;da=(At=hn.lencode[Fn&(1<<hn.lenbits)-1])>>>16&255,ga=65535&At,!((Wn=At>>>24)<=Tn);){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}if(ga<16)Fn>>>=Wn,Tn-=Wn,hn.lens[hn.have++]=ga;else{if(ga===16){for(kt=Wn+2;Tn<kt;){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}if(Fn>>>=Wn,Tn-=Wn,hn.have===0){Dt.msg="invalid bit length repeat",hn.mode=30;break}vn=hn.lens[hn.have-1],ca=3+(3&Fn),Fn>>>=2,Tn-=2}else if(ga===17){for(kt=Wn+3;Tn<kt;){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}Tn-=Wn,vn=0,ca=3+(7&(Fn>>>=Wn)),Fn>>>=3,Tn-=3}else{for(kt=Wn+7;Tn<kt;){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}Tn-=Wn,vn=0,ca=11+(127&(Fn>>>=Wn)),Fn>>>=7,Tn-=7}if(hn.have+ca>hn.nlen+hn.ndist){Dt.msg="invalid bit length repeat",hn.mode=30;break}for(;ca--;)hn.lens[hn.have++]=vn}}if(hn.mode===30)break;if(hn.lens[256]===0){Dt.msg="invalid code -- missing end-of-block",hn.mode=30;break}if(hn.lenbits=9,En={bits:hn.lenbits},Kn=z(j,hn.lens,0,hn.nlen,hn.lencode,0,hn.work,En),hn.lenbits=En.bits,Kn){Dt.msg="invalid literal/lengths set",hn.mode=30;break}if(hn.distbits=6,hn.distcode=hn.distdyn,En={bits:hn.distbits},Kn=z(ae,hn.lens,hn.nlen,hn.ndist,hn.distcode,0,hn.work,En),hn.distbits=En.bits,Kn){Dt.msg="invalid distances set",hn.mode=30;break}if(hn.mode=20,Sn===6)break e;case 20:hn.mode=21;case 21:if(6<=kn&&258<=jn){Dt.next_out=Nn,Dt.avail_out=jn,Dt.next_in=$n,Dt.avail_in=kn,hn.hold=Fn,hn.bits=Tn,L(Dt,la),Nn=Dt.next_out,Mn=Dt.output,jn=Dt.avail_out,$n=Dt.next_in,Vn=Dt.input,kn=Dt.avail_in,Fn=hn.hold,Tn=hn.bits,hn.mode===12&&(hn.back=-1);break}for(hn.back=0;da=(At=hn.lencode[Fn&(1<<hn.lenbits)-1])>>>16&255,ga=65535&At,!((Wn=At>>>24)<=Tn);){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}if(da&&!(240&da)){for(Ca=Wn,ra=da,Gn=ga;da=(At=hn.lencode[Gn+((Fn&(1<<Ca+ra)-1)>>Ca)])>>>16&255,ga=65535&At,!(Ca+(Wn=At>>>24)<=Tn);){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}Fn>>>=Ca,Tn-=Ca,hn.back+=Ca}if(Fn>>>=Wn,Tn-=Wn,hn.back+=Wn,hn.length=ga,da===0){hn.mode=26;break}if(32&da){hn.back=-1,hn.mode=12;break}if(64&da){Dt.msg="invalid literal/length code",hn.mode=30;break}hn.extra=15&da,hn.mode=22;case 22:if(hn.extra){for(kt=hn.extra;Tn<kt;){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}hn.length+=Fn&(1<<hn.extra)-1,Fn>>>=hn.extra,Tn-=hn.extra,hn.back+=hn.extra}hn.was=hn.length,hn.mode=23;case 23:for(;da=(At=hn.distcode[Fn&(1<<hn.distbits)-1])>>>16&255,ga=65535&At,!((Wn=At>>>24)<=Tn);){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}if(!(240&da)){for(Ca=Wn,ra=da,Gn=ga;da=(At=hn.distcode[Gn+((Fn&(1<<Ca+ra)-1)>>Ca)])>>>16&255,ga=65535&At,!(Ca+(Wn=At>>>24)<=Tn);){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}Fn>>>=Ca,Tn-=Ca,hn.back+=Ca}if(Fn>>>=Wn,Tn-=Wn,hn.back+=Wn,64&da){Dt.msg="invalid distance code",hn.mode=30;break}hn.offset=ga,hn.extra=15&da,hn.mode=24;case 24:if(hn.extra){for(kt=hn.extra;Tn<kt;){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}hn.offset+=Fn&(1<<hn.extra)-1,Fn>>>=hn.extra,Tn-=hn.extra,hn.back+=hn.extra}if(hn.offset>hn.dmax){Dt.msg="invalid distance too far back",hn.mode=30;break}hn.mode=25;case 25:if(jn===0)break e;if(ca=la-jn,hn.offset>ca){if((ca=hn.offset-ca)>hn.whave&&hn.sane){Dt.msg="invalid distance too far back",hn.mode=30;break}Zn=ca>hn.wnext?(ca-=hn.wnext,hn.wsize-ca):hn.wnext-ca,ca>hn.length&&(ca=hn.length),Bn=hn.window}else Bn=Mn,Zn=Nn-hn.offset,ca=hn.length;for(jn<ca&&(ca=jn),jn-=ca,hn.length-=ca;Mn[Nn++]=Bn[Zn++],--ca;);hn.length===0&&(hn.mode=21);break;case 26:if(jn===0)break e;Mn[Nn++]=hn.length,jn--,hn.mode=21;break;case 27:if(hn.wrap){for(;Tn<32;){if(kn===0)break e;kn--,Fn|=Vn[$n++]<<Tn,Tn+=8}if(la-=jn,Dt.total_out+=la,hn.total+=la,la&&(Dt.adler=hn.check=hn.flags?V(hn.check,Mn,la,Nn-la):$(hn.check,Mn,la,Nn-la)),la=jn,(hn.flags?Fn:he(Fn))!==hn.check){Dt.msg="incorrect data check",hn.mode=30;break}Tn=Fn=0}hn.mode=28;case 28:if(hn.wrap&&hn.flags){for(;Tn<32;){if(kn===0)break e;kn--,Fn+=Vn[$n++]<<Tn,Tn+=8}if(Fn!==(4294967295&hn.total)){Dt.msg="incorrect length check",hn.mode=30;break}Tn=Fn=0}hn.mode=29;case 29:Kn=1;break e;case 30:Kn=-3;break e;case 31:return-4;case 32:default:return oe}return Dt.next_out=Nn,Dt.avail_out=jn,Dt.next_in=$n,Dt.avail_in=kn,hn.hold=Fn,hn.bits=Tn,(hn.wsize||la!==Dt.avail_out&&hn.mode<30&&(hn.mode<27||Sn!==4))&&_n(Dt,Dt.output,Dt.next_out,la-Dt.avail_out)?(hn.mode=31,-4):(Hn-=Dt.avail_in,la-=Dt.avail_out,Dt.total_in+=Hn,Dt.total_out+=la,hn.total+=la,hn.wrap&&la&&(Dt.adler=hn.check=hn.flags?V(hn.check,Mn,la,Dt.next_out-la):$(hn.check,Mn,la,Dt.next_out-la)),Dt.data_type=hn.bits+(hn.last?64:0)+(hn.mode===12?128:0)+(hn.mode===20||hn.mode===15?256:0),(Hn==0&&la===0||Sn===4)&&Kn===re&&(Kn=-5),Kn)},y.inflateEnd=function(Dt){if(!Dt||!Dt.state)return oe;var Sn=Dt.state;return Sn.window&&(Sn.window=null),Dt.state=null,re},y.inflateGetHeader=function(Dt,Sn){var hn;return Dt&&Dt.state&&2&(hn=Dt.state).wrap?((hn.head=Sn).done=!1,re):oe},y.inflateSetDictionary=function(Dt,Sn){var hn,Vn=Sn.length;return Dt&&Dt.state?(hn=Dt.state).wrap!==0&&hn.mode!==11?oe:hn.mode===11&&$(1,Sn,Vn,0)!==hn.check?-3:_n(Dt,Sn,Vn,Vn)?(hn.mode=31,-4):(hn.havedict=1,re):oe},y.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,g,y){var k=r("../utils/common"),$=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],V=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],L=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],z=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];g.exports=function(j,ae,re,oe,ue,le,de,he){var _e,Ce,Ne,$e,xe,Ie,ze,qe,Et,_n=he.bits,Dt=0,Sn=0,hn=0,Vn=0,Mn=0,$n=0,Nn=0,kn=0,jn=0,Fn=0,Tn=null,Hn=0,la=new k.Buf16(16),ca=new k.Buf16(16),Zn=null,Bn=0;for(Dt=0;Dt<=15;Dt++)la[Dt]=0;for(Sn=0;Sn<oe;Sn++)la[ae[re+Sn]]++;for(Mn=_n,Vn=15;1<=Vn&&la[Vn]===0;Vn--);if(Vn<Mn&&(Mn=Vn),Vn===0)return ue[le++]=20971520,ue[le++]=20971520,he.bits=1,0;for(hn=1;hn<Vn&&la[hn]===0;hn++);for(Mn<hn&&(Mn=hn),Dt=kn=1;Dt<=15;Dt++)if(kn<<=1,(kn-=la[Dt])<0)return-1;if(0<kn&&(j===0||Vn!==1))return-1;for(ca[1]=0,Dt=1;Dt<15;Dt++)ca[Dt+1]=ca[Dt]+la[Dt];for(Sn=0;Sn<oe;Sn++)ae[re+Sn]!==0&&(de[ca[ae[re+Sn]]++]=Sn);if(Ie=j===0?(Tn=Zn=de,19):j===1?(Tn=$,Hn-=257,Zn=V,Bn-=257,256):(Tn=L,Zn=z,-1),Dt=hn,xe=le,Nn=Sn=Fn=0,Ne=-1,$e=(jn=1<<($n=Mn))-1,j===1&&852<jn||j===2&&592<jn)return 1;for(;;){for(ze=Dt-Nn,Et=de[Sn]<Ie?(qe=0,de[Sn]):de[Sn]>Ie?(qe=Zn[Bn+de[Sn]],Tn[Hn+de[Sn]]):(qe=96,0),_e=1<<Dt-Nn,hn=Ce=1<<$n;ue[xe+(Fn>>Nn)+(Ce-=_e)]=ze<<24|qe<<16|Et|0,Ce!==0;);for(_e=1<<Dt-1;Fn&_e;)_e>>=1;if(_e!==0?(Fn&=_e-1,Fn+=_e):Fn=0,Sn++,--la[Dt]==0){if(Dt===Vn)break;Dt=ae[re+de[Sn]]}if(Mn<Dt&&(Fn&$e)!==Ne){for(Nn===0&&(Nn=Mn),xe+=hn,kn=1<<($n=Dt-Nn);$n+Nn<Vn&&!((kn-=la[$n+Nn])<=0);)$n++,kn<<=1;if(jn+=1<<$n,j===1&&852<jn||j===2&&592<jn)return 1;ue[Ne=Fn&$e]=Mn<<24|$n<<16|xe-le|0}}return Fn!==0&&(ue[xe+Fn]=Dt-Nn<<24|64<<16|0),he.bits=Mn,0}},{"../utils/common":41}],51:[function(r,g,y){g.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,g,y){var k=r("../utils/common"),$=0,V=1;function L(At){for(var Dn=At.length;0<=--Dn;)At[Dn]=0}var z=0,j=29,ae=256,re=ae+1+j,oe=30,ue=19,le=2*re+1,de=15,he=16,_e=7,Ce=256,Ne=16,$e=17,xe=18,Ie=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ze=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],qe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Et=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],_n=new Array(2*(re+2));L(_n);var Dt=new Array(2*oe);L(Dt);var Sn=new Array(512);L(Sn);var hn=new Array(256);L(hn);var Vn=new Array(j);L(Vn);var Mn,$n,Nn,kn=new Array(oe);function jn(At,Dn,Xn,aa,sa){this.static_tree=At,this.extra_bits=Dn,this.extra_base=Xn,this.elems=aa,this.max_length=sa,this.has_stree=At&&At.length}function Fn(At,Dn){this.dyn_tree=At,this.max_code=0,this.stat_desc=Dn}function Tn(At){return At<256?Sn[At]:Sn[256+(At>>>7)]}function Hn(At,Dn){At.pending_buf[At.pending++]=255&Dn,At.pending_buf[At.pending++]=Dn>>>8&255}function la(At,Dn,Xn){At.bi_valid>he-Xn?(At.bi_buf|=Dn<<At.bi_valid&65535,Hn(At,At.bi_buf),At.bi_buf=Dn>>he-At.bi_valid,At.bi_valid+=Xn-he):(At.bi_buf|=Dn<<At.bi_valid&65535,At.bi_valid+=Xn)}function ca(At,Dn,Xn){la(At,Xn[2*Dn],Xn[2*Dn+1])}function Zn(At,Dn){for(var Xn=0;Xn|=1&At,At>>>=1,Xn<<=1,0<--Dn;);return Xn>>>1}function Bn(At,Dn,Xn){var aa,sa,ia=new Array(de+1),ma=0;for(aa=1;aa<=de;aa++)ia[aa]=ma=ma+Xn[aa-1]<<1;for(sa=0;sa<=Dn;sa++){var ua=At[2*sa+1];ua!==0&&(At[2*sa]=Zn(ia[ua]++,ua))}}function Wn(At){var Dn;for(Dn=0;Dn<re;Dn++)At.dyn_ltree[2*Dn]=0;for(Dn=0;Dn<oe;Dn++)At.dyn_dtree[2*Dn]=0;for(Dn=0;Dn<ue;Dn++)At.bl_tree[2*Dn]=0;At.dyn_ltree[2*Ce]=1,At.opt_len=At.static_len=0,At.last_lit=At.matches=0}function da(At){8<At.bi_valid?Hn(At,At.bi_buf):0<At.bi_valid&&(At.pending_buf[At.pending++]=At.bi_buf),At.bi_buf=0,At.bi_valid=0}function ga(At,Dn,Xn,aa){var sa=2*Dn,ia=2*Xn;return At[sa]<At[ia]||At[sa]===At[ia]&&aa[Dn]<=aa[Xn]}function Ca(At,Dn,Xn){for(var aa=At.heap[Xn],sa=Xn<<1;sa<=At.heap_len&&(sa<At.heap_len&&ga(Dn,At.heap[sa+1],At.heap[sa],At.depth)&&sa++,!ga(Dn,aa,At.heap[sa],At.depth));)At.heap[Xn]=At.heap[sa],Xn=sa,sa<<=1;At.heap[Xn]=aa}function ra(At,Dn,Xn){var aa,sa,ia,ma,ua=0;if(At.last_lit!==0)for(;aa=At.pending_buf[At.d_buf+2*ua]<<8|At.pending_buf[At.d_buf+2*ua+1],sa=At.pending_buf[At.l_buf+ua],ua++,aa===0?ca(At,sa,Dn):(ca(At,(ia=hn[sa])+ae+1,Dn),(ma=Ie[ia])!==0&&la(At,sa-=Vn[ia],ma),ca(At,ia=Tn(--aa),Xn),(ma=ze[ia])!==0&&la(At,aa-=kn[ia],ma)),ua<At.last_lit;);ca(At,Ce,Dn)}function Gn(At,Dn){var Xn,aa,sa,ia=Dn.dyn_tree,ma=Dn.stat_desc.static_tree,ua=Dn.stat_desc.has_stree,pe=Dn.stat_desc.elems,Oe=-1;for(At.heap_len=0,At.heap_max=le,Xn=0;Xn<pe;Xn++)ia[2*Xn]!==0?(At.heap[++At.heap_len]=Oe=Xn,At.depth[Xn]=0):ia[2*Xn+1]=0;for(;At.heap_len<2;)ia[2*(sa=At.heap[++At.heap_len]=Oe<2?++Oe:0)]=1,At.depth[sa]=0,At.opt_len--,ua&&(At.static_len-=ma[2*sa+1]);for(Dn.max_code=Oe,Xn=At.heap_len>>1;1<=Xn;Xn--)Ca(At,ia,Xn);for(sa=pe;Xn=At.heap[1],At.heap[1]=At.heap[At.heap_len--],Ca(At,ia,1),aa=At.heap[1],At.heap[--At.heap_max]=Xn,At.heap[--At.heap_max]=aa,ia[2*sa]=ia[2*Xn]+ia[2*aa],At.depth[sa]=(At.depth[Xn]>=At.depth[aa]?At.depth[Xn]:At.depth[aa])+1,ia[2*Xn+1]=ia[2*aa+1]=sa,At.heap[1]=sa++,Ca(At,ia,1),2<=At.heap_len;);At.heap[--At.heap_max]=At.heap[1],function(Ve,Ue){var Pt,Lt,bn,jt,Cn,xn,In=Ue.dyn_tree,Ln=Ue.max_code,An=Ue.stat_desc.static_tree,zn=Ue.stat_desc.has_stree,Jn=Ue.stat_desc.extra_bits,Qn=Ue.stat_desc.extra_base,ta=Ue.stat_desc.max_length,Pn=0;for(jt=0;jt<=de;jt++)Ve.bl_count[jt]=0;for(In[2*Ve.heap[Ve.heap_max]+1]=0,Pt=Ve.heap_max+1;Pt<le;Pt++)ta<(jt=In[2*In[2*(Lt=Ve.heap[Pt])+1]+1]+1)&&(jt=ta,Pn++),In[2*Lt+1]=jt,Ln<Lt||(Ve.bl_count[jt]++,Cn=0,Qn<=Lt&&(Cn=Jn[Lt-Qn]),xn=In[2*Lt],Ve.opt_len+=xn*(jt+Cn),zn&&(Ve.static_len+=xn*(An[2*Lt+1]+Cn)));if(Pn!==0){do{for(jt=ta-1;Ve.bl_count[jt]===0;)jt--;Ve.bl_count[jt]--,Ve.bl_count[jt+1]+=2,Ve.bl_count[ta]--,Pn-=2}while(0<Pn);for(jt=ta;jt!==0;jt--)for(Lt=Ve.bl_count[jt];Lt!==0;)Ln<(bn=Ve.heap[--Pt])||(In[2*bn+1]!==jt&&(Ve.opt_len+=(jt-In[2*bn+1])*In[2*bn],In[2*bn+1]=jt),Lt--)}}(At,Dn),Bn(ia,Oe,At.bl_count)}function vn(At,Dn,Xn){var aa,sa,ia=-1,ma=Dn[1],ua=0,pe=7,Oe=4;for(ma===0&&(pe=138,Oe=3),Dn[2*(Xn+1)+1]=65535,aa=0;aa<=Xn;aa++)sa=ma,ma=Dn[2*(aa+1)+1],++ua<pe&&sa===ma||(ua<Oe?At.bl_tree[2*sa]+=ua:sa!==0?(sa!==ia&&At.bl_tree[2*sa]++,At.bl_tree[2*Ne]++):ua<=10?At.bl_tree[2*$e]++:At.bl_tree[2*xe]++,ia=sa,Oe=(ua=0)===ma?(pe=138,3):sa===ma?(pe=6,3):(pe=7,4))}function Kn(At,Dn,Xn){var aa,sa,ia=-1,ma=Dn[1],ua=0,pe=7,Oe=4;for(ma===0&&(pe=138,Oe=3),aa=0;aa<=Xn;aa++)if(sa=ma,ma=Dn[2*(aa+1)+1],!(++ua<pe&&sa===ma)){if(ua<Oe)for(;ca(At,sa,At.bl_tree),--ua!=0;);else sa!==0?(sa!==ia&&(ca(At,sa,At.bl_tree),ua--),ca(At,Ne,At.bl_tree),la(At,ua-3,2)):ua<=10?(ca(At,$e,At.bl_tree),la(At,ua-3,3)):(ca(At,xe,At.bl_tree),la(At,ua-11,7));ia=sa,Oe=(ua=0)===ma?(pe=138,3):sa===ma?(pe=6,3):(pe=7,4)}}L(kn);var En=!1;function kt(At,Dn,Xn,aa){la(At,(z<<1)+(aa?1:0),3),function(sa,ia,ma,ua){da(sa),ua&&(Hn(sa,ma),Hn(sa,~ma)),k.arraySet(sa.pending_buf,sa.window,ia,ma,sa.pending),sa.pending+=ma}(At,Dn,Xn,!0)}y._tr_init=function(At){En||(function(){var Dn,Xn,aa,sa,ia,ma=new Array(de+1);for(sa=aa=0;sa<j-1;sa++)for(Vn[sa]=aa,Dn=0;Dn<1<<Ie[sa];Dn++)hn[aa++]=sa;for(hn[aa-1]=sa,sa=ia=0;sa<16;sa++)for(kn[sa]=ia,Dn=0;Dn<1<<ze[sa];Dn++)Sn[ia++]=sa;for(ia>>=7;sa<oe;sa++)for(kn[sa]=ia<<7,Dn=0;Dn<1<<ze[sa]-7;Dn++)Sn[256+ia++]=sa;for(Xn=0;Xn<=de;Xn++)ma[Xn]=0;for(Dn=0;Dn<=143;)_n[2*Dn+1]=8,Dn++,ma[8]++;for(;Dn<=255;)_n[2*Dn+1]=9,Dn++,ma[9]++;for(;Dn<=279;)_n[2*Dn+1]=7,Dn++,ma[7]++;for(;Dn<=287;)_n[2*Dn+1]=8,Dn++,ma[8]++;for(Bn(_n,re+1,ma),Dn=0;Dn<oe;Dn++)Dt[2*Dn+1]=5,Dt[2*Dn]=Zn(Dn,5);Mn=new jn(_n,Ie,ae+1,re,de),$n=new jn(Dt,ze,0,oe,de),Nn=new jn(new Array(0),qe,0,ue,_e)}(),En=!0),At.l_desc=new Fn(At.dyn_ltree,Mn),At.d_desc=new Fn(At.dyn_dtree,$n),At.bl_desc=new Fn(At.bl_tree,Nn),At.bi_buf=0,At.bi_valid=0,Wn(At)},y._tr_stored_block=kt,y._tr_flush_block=function(At,Dn,Xn,aa){var sa,ia,ma=0;0<At.level?(At.strm.data_type===2&&(At.strm.data_type=function(ua){var pe,Oe=4093624447;for(pe=0;pe<=31;pe++,Oe>>>=1)if(1&Oe&&ua.dyn_ltree[2*pe]!==0)return $;if(ua.dyn_ltree[18]!==0||ua.dyn_ltree[20]!==0||ua.dyn_ltree[26]!==0)return V;for(pe=32;pe<ae;pe++)if(ua.dyn_ltree[2*pe]!==0)return V;return $}(At)),Gn(At,At.l_desc),Gn(At,At.d_desc),ma=function(ua){var pe;for(vn(ua,ua.dyn_ltree,ua.l_desc.max_code),vn(ua,ua.dyn_dtree,ua.d_desc.max_code),Gn(ua,ua.bl_desc),pe=ue-1;3<=pe&&ua.bl_tree[2*Et[pe]+1]===0;pe--);return ua.opt_len+=3*(pe+1)+5+5+4,pe}(At),sa=At.opt_len+3+7>>>3,(ia=At.static_len+3+7>>>3)<=sa&&(sa=ia)):sa=ia=Xn+5,Xn+4<=sa&&Dn!==-1?kt(At,Dn,Xn,aa):At.strategy===4||ia===sa?(la(At,2+(aa?1:0),3),ra(At,_n,Dt)):(la(At,4+(aa?1:0),3),function(ua,pe,Oe,Ve){var Ue;for(la(ua,pe-257,5),la(ua,Oe-1,5),la(ua,Ve-4,4),Ue=0;Ue<Ve;Ue++)la(ua,ua.bl_tree[2*Et[Ue]+1],3);Kn(ua,ua.dyn_ltree,pe-1),Kn(ua,ua.dyn_dtree,Oe-1)}(At,At.l_desc.max_code+1,At.d_desc.max_code+1,ma+1),ra(At,At.dyn_ltree,At.dyn_dtree)),Wn(At),aa&&da(At)},y._tr_tally=function(At,Dn,Xn){return At.pending_buf[At.d_buf+2*At.last_lit]=Dn>>>8&255,At.pending_buf[At.d_buf+2*At.last_lit+1]=255&Dn,At.pending_buf[At.l_buf+At.last_lit]=255&Xn,At.last_lit++,Dn===0?At.dyn_ltree[2*Xn]++:(At.matches++,Dn--,At.dyn_ltree[2*(hn[Xn]+ae+1)]++,At.dyn_dtree[2*Tn(Dn)]++),At.last_lit===At.lit_bufsize-1},y._tr_align=function(At){la(At,2,3),ca(At,Ce,_n),function(Dn){Dn.bi_valid===16?(Hn(Dn,Dn.bi_buf),Dn.bi_buf=0,Dn.bi_valid=0):8<=Dn.bi_valid&&(Dn.pending_buf[Dn.pending++]=255&Dn.bi_buf,Dn.bi_buf>>=8,Dn.bi_valid-=8)}(At)}},{"../utils/common":41}],53:[function(r,g,y){g.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,g,y){(function(k){(function($,V){if(!$.setImmediate){var L,z,j,ae,re=1,oe={},ue=!1,le=$.document,de=Object.getPrototypeOf&&Object.getPrototypeOf($);de=de&&de.setTimeout?de:$,L={}.toString.call($.process)==="[object process]"?function(Ne){process.nextTick(function(){_e(Ne)})}:function(){if($.postMessage&&!$.importScripts){var Ne=!0,$e=$.onmessage;return $.onmessage=function(){Ne=!1},$.postMessage("","*"),$.onmessage=$e,Ne}}()?(ae="setImmediate$"+Math.random()+"$",$.addEventListener?$.addEventListener("message",Ce,!1):$.attachEvent("onmessage",Ce),function(Ne){$.postMessage(ae+Ne,"*")}):$.MessageChannel?((j=new MessageChannel).port1.onmessage=function(Ne){_e(Ne.data)},function(Ne){j.port2.postMessage(Ne)}):le&&"onreadystatechange"in le.createElement("script")?(z=le.documentElement,function(Ne){var $e=le.createElement("script");$e.onreadystatechange=function(){_e(Ne),$e.onreadystatechange=null,z.removeChild($e),$e=null},z.appendChild($e)}):function(Ne){setTimeout(_e,0,Ne)},de.setImmediate=function(Ne){typeof Ne!="function"&&(Ne=new Function(""+Ne));for(var $e=new Array(arguments.length-1),xe=0;xe<$e.length;xe++)$e[xe]=arguments[xe+1];var Ie={callback:Ne,args:$e};return oe[re]=Ie,L(re),re++},de.clearImmediate=he}function he(Ne){delete oe[Ne]}function _e(Ne){if(ue)setTimeout(_e,0,Ne);else{var $e=oe[Ne];if($e){ue=!0;try{(function(xe){var Ie=xe.callback,ze=xe.args;switch(ze.length){case 0:Ie();break;case 1:Ie(ze[0]);break;case 2:Ie(ze[0],ze[1]);break;case 3:Ie(ze[0],ze[1],ze[2]);break;default:Ie.apply(V,ze)}})($e)}finally{he(Ne),ue=!1}}}}function Ce(Ne){Ne.source===$&&typeof Ne.data=="string"&&Ne.data.indexOf(ae)===0&&_e(+Ne.data.slice(ae.length))}})(typeof self>"u"?k===void 0?this:k:self)}).call(this,typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(jszip_min);var jszip_minExports=jszip_min.exports;const JSZip=getDefaultExportFromCjs(jszip_minExports),strokes=[{name:"",uuid:"KXIDGV2F_Pyd7r0C6_TB1",params:[{name:"",default:500,min:50,max:1e3},{name:"",default:50,min:10,max:100}]},{name:"",uuid:"aH2ns8O1EHIIESpjVzSy8",params:[{name:"",default:500,min:50,max:1e3},{name:"",default:50,min:10,max:100}]},{name:"",uuid:"LrdRipEgPadhamoHzTuJ1",params:[{name:"",default:500,min:0,max:1e3},{name:"",default:500,min:0,max:1e3},{name:"",default:.5,min:0,max:1},{name:"",default:150,min:0,max:500},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"HcR12pTrOLu4ZOAuQuriM",params:[{name:"-",default:200,min:0,max:1e3},{name:"-",default:200,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"-ubJbIG2A8mc-nSDlljeb",params:[{name:"",default:500,min:0,max:1e3},{name:"",default:500,min:0,max:1e3},{name:"",default:.5,min:0,max:1},{name:"",default:150,min:0,max:500},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"NhmE6WShXfKTOUOH4V7zk",params:[{name:"",default:500,min:0,max:1e3},{name:"",default:150,min:0,max:1e3},{name:"",default:.2,min:0,max:.5},{name:"",default:150,min:0,max:500},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"QcHLqxGmyKRhv4yyA0HqR",params:[{name:"-",default:100,min:0,max:500},{name:"-",default:150,min:0,max:500},{name:"-",default:500,min:0,max:1e3},{name:"-",default:150,min:0,max:1e3},{name:"-",default:.2,min:0,max:.5},{name:"-",default:150,min:0,max:500},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"ioUJIJq5204Sa43hz5iev",params:[{name:"",default:100,min:0,max:500},{name:"",default:150,min:0,max:500},{name:"",default:.5,min:0,max:1},{name:"",default:30,min:0,max:200},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"krVrPdyfoe9sKIT_wQX-7",params:[{name:"",default:200,min:0,max:500},{name:"",default:200,min:0,max:500},{name:"",default:.5,min:0,max:1},{name:"",default:30,min:0,max:200},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"lbMVwrKP_q4p1oPHu4anJ",params:[{name:"-",default:500,min:0,max:1e3},{name:"-",default:500,min:0,max:1e3},{name:"-",default:500,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"EPBo33qt9wCQ1qYj1u71k",params:[{name:"-",default:220,min:0,max:1e3},{name:"1-",default:150,min:0,max:1e3},{name:"1-",default:200,min:0,max:1e3},{name:"2-",default:150,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:420,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"fMIzxBo7oSEFUayQx_cCO",params:[{name:"-",default:100,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:50,min:0,max:500},{name:"-",default:100,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:50,min:0,max:500},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"OXQCmaRKaoLjigiNIwicW",params:[{name:"-",default:300,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:50,min:0,max:500},{name:"-",default:500,min:0,max:1e3},{name:"-",default:100,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:50,min:0,max:500},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"aiqF1SoB4nhfEDkhRmB3k",params:[{name:"-",default:500,min:0,max:1e3},{name:"-",default:160,min:0,max:1e3},{name:"-",default:120,min:0,max:1e3},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"JYSKwaS9xvilKQMcRZ3E0",params:[{name:"-",default:150,min:0,max:1e3},{name:"-",default:500,min:0,max:1e3},{name:"-",default:120,min:0,max:1e3},{name:"-",default:120,min:0,max:1e3},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"1Qdp3QzLK64BtwctXszQZ",params:[{name:"-",default:500,min:0,max:1e3},{name:"-",default:100,min:0,max:300},{name:"-",default:-15,min:-300,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"YENGMQs6EL4dBiMrf1-nh",params:[{name:"-",default:500,min:0,max:1e3},{name:"-",default:100,min:0,max:300},{name:"-",default:100,min:0,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"equYbH1yyUiKQ6b34jZea",params:[{name:"-",default:500,min:0,max:1e3},{name:"-",default:100,min:0,max:350},{name:"-",default:100,min:0,max:300},{name:"-",default:-30,min:-300,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"hfyoooj2emaeJLcgRctnc",params:[{name:"-",default:300,min:0,max:1e3},{name:"-",default:500,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:200,min:0,max:500},{name:"-",default:100,min:0,max:300},{name:"-",default:100,min:0,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"fr4w85QKX0poi7nSBmjFK",params:[{name:"-",default:500,min:0,max:1e3},{name:"-",default:260,min:0,max:1e3},{name:"-",default:25,min:-150,max:150},{name:"-",default:80,min:0,max:200},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"FuEXpS2xyTJA73Z2WcrOz",params:[{name:"-",default:200,min:0,max:1e3},{name:"1-",default:500,min:0,max:1e3},{name:"2-",default:100,min:0,max:1e3},{name:"2-",default:300,min:0,max:1e3},{name:"-",default:80,min:0,max:300},{name:"-",default:-60,min:-300,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"c8Pd8VSPjClASnXbxipaV",params:[{name:"-",default:500,min:0,max:1e3},{name:"-",default:100,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:80,min:0,max:300},{name:"-",default:-60,min:-300,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"3RKgyX_a2ZvPsfushHJg2",params:[{name:"-",default:300,min:0,max:1e3},{name:"-",default:100,min:0,max:1e3},{name:"-",default:500,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:100,min:0,max:350},{name:"-",default:60,min:0,max:300},{name:"-",default:60,min:0,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"R6GeGWSWvEc-yqfuzSuKo",params:[{name:"-",default:300,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:380,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:100,min:0,max:300},{name:"-",default:380,min:0,max:1e3},{name:"-",default:60,min:0,max:300},{name:"-",default:60,min:0,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"F6ywDDM5lvSxM5XkMnT35",params:[{name:"-",default:260,min:0,max:1e3},{name:"-",default:120,min:0,max:1e3},{name:"-",default:200,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:.5,min:0,max:1},{name:"-",default:150,min:0,max:500},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"vLtc_ON5tYCc27bn2gl9f",params:[{name:"-",default:350,min:0,max:1e3},{name:"1-",default:120,min:0,max:1e3},{name:"1-",default:180,min:0,max:1e3},{name:"2-",default:200,min:0,max:1e3},{name:"-",default:100,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"-",default:80,min:0,max:300},{name:"-",default:-60,min:-300,max:300},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"SeF5EncRABMJnvz2sfGC0",params:[{name:"-",default:500,min:0,max:1e3},{name:"-",default:100,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"",default:50,min:0,max:200}]},{name:"2",uuid:"IInqUl_DAjYg-8Tmw_NHE",params:[{name:"-",default:500,min:0,max:1e3},{name:"-",default:300,min:0,max:1e3},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"Di0BaW5M-zifjadwEdyPh",params:[{name:"1-",default:300,min:0,max:1e3},{name:"1-",default:50,min:0,max:1e3},{name:"1-",default:200,min:0,max:1e3},{name:"2-",default:200,min:0,max:1e3},{name:"2-",default:50,min:0,max:1e3},{name:"2-",default:200,min:0,max:1e3},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"MqIp7k0ZDGTDWdQIrVHD0",params:[{name:"-",default:0,min:-200,max:200},{name:"-",default:500,min:0,max:1e3},{name:"-",default:500,min:0,max:1e3},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"oyP7Yql1-auw4uJDNpxxw",params:[{name:"-",default:300,min:0,max:1e3},{name:"-",default:200,min:0,max:1e3},{name:"",default:50,min:0,max:200}]},{name:"",uuid:"3ogIJZDcPTAUT67ob1mmH",params:[{name:"-",default:200,min:0,max:1e3},{name:"-",default:0,min:-500,max:500},{name:"-",default:300,min:0,max:1e3},{name:"-",default:200,min:0,max:1e3},{name:"",default:50,min:0,max:200}]}],activePanel=ref("globalVariables"),constants$2=ref([]),constantsMap$2=new ConstantsMap(constants$2.value),PanelType={GlobalVariables:"globalVariables",ConditionFilter:"conditionFilter",Script:"script",StrokeReplace:"strokeReplace",StyleSwitch:"styleSwitch"},setActivePanel=e=>{activePanel.value=e},sampleCharacters=ref(""),isEditingSample=ref(!1),sampleCharactersList=ref([]),originSampleCharactersList=ref([]),updateSampleCharactersList=()=>{sampleCharactersList.value=[];for(let e=0;e<selectedFile.value.characterList.length;e++){const n=selectedFile.value.characterList[e];if(sampleCharacters.value.indexOf(n.character.text)!==-1){const r=clone(n);for(let g=0;g<r.components.length;g++){const y=r.components[g];if(y.type==="glyph"){const $=y.value.parameters.parameters;for(let V=0;V<$.length;V++){const L=$[V];L.type===ParameterType.Constant&&(L.type=ParameterType.AdvancedEditConstant)}}}sampleCharactersList.value.push(r)}}originSampleCharactersList.value=clone(sampleCharactersList.value)},updateCharactersAndPreview$1=()=>{for(let e=0;e<sampleCharactersList.value.length;e++){const n=sampleCharactersList.value[e],r=document.getElementById(`advanced-edit-preview-canvas-${n.uuid}`);if(!r)return;const g=componentsToContours(orderedListWithItemsForCharacterFile(n),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.advanceWidth,advancedEdit:!0},{x:0,y:0},!1,!0,!0);renderPreview2(r,g)}},updateCharactersList=()=>{total$1.value=selectedFile.value.characterList.length+Math.min(visibleCount.value,selectedFile.value.characterList.length),loaded$1.value=0,loading$1.value=!0,constants.value=clone(constants$2.value),constantsMap.update(constants.value);let e=0;const n=()=>{loaded$1.value++;const r=selectedFile.value.characterList[e];if(componentsToContours(orderedListWithItemsForCharacterFile(r),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.advanceWidth},{x:0,y:0},!1,!0,!0),e++,e<selectedFile.value.characterList.length)e%100===0?requestAnimationFrame(n):n();else{emitter.emit("renderPreviewCanvas");return}};requestAnimationFrame(n)},editChar$1=e=>{},generateCharacterTemplate$2=e=>{const n=document.getElementById("playground-character-template").querySelector(".char-preview").cloneNode(!0);return n.className=`character-preview character-${e.uuid}`,n.querySelector(".playground-preview-canvas").id=`advanced-edit-preview-canvas-${e.uuid}`,n.addEventListener("click",()=>editChar$1(e.uuid)),n},updatePreviewList=()=>{const e=document.getElementById("advanced-edit-characters-list");e.innerHTML="",sampleCharactersList.value.map(n=>{e.appendChild(generateCharacterTemplate$2(n));const r=document.getElementById(`advanced-edit-preview-canvas-${n.uuid}`);if(!r)return;const g=componentsToContours(orderedListWithItemsForCharacterFile(n),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.advanceWidth,advancedEdit:!0},{x:0,y:0},!1,!0,!0);renderPreview2(r,g)})},getScript$2=e=>{if(e.script)return e.script;if(e.script_reference){if(scripts_map[e.script_reference])return scripts_map[e.script_reference];{const n=getGlyphByUUID(e.script_reference);if(n.script)return n.script}}return null},executeScript$2=e=>{try{if(e._o&&e._o.tempData)return;const n=new CustomGlyph(e),r=n._glyph;for(let g=0;g<e.components.length;g++)e.components[g].type==="glyph"&&executeScript$2(e.components[g].value);window.glyph=n,constantsMap$2.update(constants$2.value),window.constantsMap=constantsMap$2;try{const g=getScript$2(e);new Function(`${g}
script_${e.uuid.replaceAll("-","_")} (glyph, constantsMap, FP)`)()}catch(g){console.error(g)}window.glyph=null,window.constantsMap=null}catch(n){console.warn(n)}},selectedStrokeUUID=ref(null),selectedStroke=computed(()=>strokeList.value.find(e=>e.uuid===selectedStrokeUUID.value)),strokeMap=new Map,strokeList=ref([]),onStrokeReplacement=ref(!1),getStrokeList=()=>{for(let e=0;e<selectedFile.value.characterList.length;e++){const n=selectedFile.value.characterList[e].components;for(let r=0;r<n.length;r++){const g=n[r];if(g.type==="glyph"){const y=g.value.uuid;if(!strokeMap.has(y)){const k=getGlyphByUUID(y);k&&(strokeMap.set(y,k),strokeList.value.push({uuid:y,name:g.value.name,style:g.value.style,replaced:!1,replacement:null,currentUUID:y}))}}}}},renderStrokePreview=e=>{if(e){const n=document.querySelectorAll(`.stroke-preview-${e}`);if(!n)return;for(let r=0;r<n.length;r++){const g=n[r];if(!g)return;const y=strokeMap.get(e);y._o||executeScript(y);const k=componentsToContours(y._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(g,k)}}else for(let n=0;n<strokeList.value.length;n++){const r=strokeList.value[n],g=document.querySelectorAll(`.stroke-preview-${r.uuid}`);if(!g)return;for(let y=0;y<g.length;y++){const k=g[y];if(!k)return;const $=strokeMap.get(r.uuid);$._o||executeScript($);const V=componentsToContours($._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(k,V)}}},setReplacementStroke=async e=>{selectedStroke.value.replaced&&(selectedStroke.value.currentUUID=selectedStroke.value.replacement.uuid),selectedStroke.value.replaced=!0;const n=getGlyphByUUID(e);strokeMap.set(e,n),selectedStroke.value.replacement={uuid:e,name:n.name,style:n.style},updateCharactersAndPreview_strokeReplace(),await nextTick(),renderStrokePreview(e)},replaceStrokeForCharacter=(e,n)=>{const r=n.uuid,g=n.replacement.uuid,y=strokeMap.get(g);for(let k=0;k<e.components.length;k++){const $=e.components[k];if($.type==="glyph"&&$.value.uuid===r){const V=clone(y);for(let L=0;L<V.parameters.parameters.length;L++){const z=V.parameters.parameters[L],j=$.value.parameters.parameters.find(ae=>ae.name===z.name);j.type!==ParameterType.Constant&&j.type!==ParameterType.AdvancedEditConstant?z.value=j.value:j.type===ParameterType.AdvancedEditConstant?(z.type=ParameterType.AdvancedEditConstant,z.value=j.value):j.type===ParameterType.Constant&&(z.type=ParameterType.Constant,z.value=j.value)}$.value=V,executeScript(V)}}},replaceStrokesForCharacter=e=>{for(let n=0;n<strokeList.value.length;n++){const r=strokeList.value[n];r.replaced&&replaceStrokeForCharacter(e,r)}},updatePreviewList_strokeReplace=()=>{const e=document.getElementById("advanced-edit-characters-list");e.innerHTML="",sampleCharactersList.value=[],originSampleCharactersList.value.map(n=>{e.appendChild(generateCharacterTemplate$2(n));const r=document.getElementById(`advanced-edit-preview-canvas-${n.uuid}`);if(!r)return;const g=clone(n);replaceStrokesForCharacter(g),sampleCharactersList.value.push(g);const y=componentsToContours(orderedListWithItemsForCharacterFile(g),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.advanceWidth,advancedEdit:!1},{x:0,y:0},!1,!0,!0);renderPreview2(r,y)})},updateCharactersAndPreview_strokeReplace=()=>{sampleCharactersList.value=[];for(let e=0;e<originSampleCharactersList.value.length;e++){const n=clone(originSampleCharactersList.value[e]),r=document.getElementById(`advanced-edit-preview-canvas-${n.uuid}`);if(!r)return;replaceStrokesForCharacter(n),sampleCharactersList.value.push(n);const g=componentsToContours(orderedListWithItemsForCharacterFile(n),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.advanceWidth,advancedEdit:!1},{x:0,y:0},!1,!0,!0);renderPreview2(r,g)}},updateCharactersList_strokeReplace=()=>{total$1.value=selectedFile.value.characterList.length+Math.min(visibleCount.value,selectedFile.value.characterList.length),loaded$1.value=0,loading$1.value=!0,constants.value=clone(constants$2.value),constantsMap.update(constants.value);let e=0;const n=()=>{loaded$1.value++;const r=selectedFile.value.characterList[e];if(replaceStrokesForCharacter(r),componentsToContours(orderedListWithItemsForCharacterFile(r),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.advanceWidth},{x:0,y:0},!1,!0,!0),e++,e<selectedFile.value.characterList.length)e%100===0?requestAnimationFrame(n):n();else{emitter.emit("renderPreviewCanvas");return}};requestAnimationFrame(n)},selectedStyleUUID=ref("default"),selectedStyle=computed(()=>styles$3.value.find(e=>e.uuid===selectedStyleUUID.value)),styles$3=ref([]),getStrokeListByStyle=e=>{const n=[];for(let r=0;r<stroke_glyphs.value.length;r++)stroke_glyphs.value[r].style===e.strokeStyle&&n.push(stroke_glyphs.value[r]);return n},switchStyle_init=e=>{for(let n=0;n<e.constants.length;n++)for(let r=0;r<constants$2.value.length;r++){const g=constants$2.value[r];g.name===e.constants[n].name&&(g.value=e.constants[n].value)}},switchStyle=(e,n)=>{if(!n)return;for(let g=0;g<n.constants.length;g++)for(let y=0;y<constants$2.value.length;y++){const k=constants$2.value[y];k.name===n.constants[g].name&&(k.value=n.constants[g].value)}const r=getStrokeListByStyle(n);for(let g=0;g<r.length;g++){const y=r[g],k=y.name;for(let $=0;$<e.components.length;$++){const V=e.components[$];if(V.type==="glyph"&&V.value.name===k){const L=clone(y);for(let z=0;z<L.parameters.parameters.length;z++){const j=L.parameters.parameters[z],ae=V.value.parameters.parameters.find(re=>re.name===j.name);if(ae&&ae.type!==ParameterType.AdvancedEditConstant){let re=!1;for(let oe=0;oe<n.parameters.length;oe++){const ue=V.value.parameters.parameters[z];ue.name===n.parameters[oe].name&&(ue.value=n.parameters[oe].value,re=!0)}re||(j.value=ae.value)}else ae&&ae.type===ParameterType.AdvancedEditConstant&&(j.type=ParameterType.AdvancedEditConstant,j.value=ae.value)}V.value=L,executeScript(L)}}}},switchStyle2=(e,n)=>{const r=getStrokeListByStyle(n);for(let g=0;g<r.length;g++){const y=r[g],k=y.name;for(let $=0;$<e.components.length;$++){const V=e.components[$];if(V.type==="glyph"&&V.value.name===k){const L=clone(y);for(let z=0;z<L.parameters.parameters.length;z++){const j=L.parameters.parameters[z],ae=V.value.parameters.parameters.find(re=>re.name===j.name);if(ae&&ae.type!==ParameterType.Constant){let re=!1;for(let oe=0;oe<n.parameters.length;oe++){const ue=V.value.parameters.parameters[z];ue.name===n.parameters[oe].name&&(ue.value=n.parameters[oe].value,re=!0)}re||(j.value=ae.value)}else ae&&ae.type===ParameterType.Constant&&(j.type=ParameterType.Constant,j.value=ae.value)}V.value=L,executeScript(L)}}}},updatePreviewList_styleSwitch=()=>{sampleCharactersList.value=[];const e=styles$3.value.find(r=>r.uuid===selectedStyleUUID.value),n=document.getElementById("advanced-edit-characters-list");n.innerHTML="",originSampleCharactersList.value.map(r=>{n.appendChild(generateCharacterTemplate$2(r));const g=document.getElementById(`advanced-edit-preview-canvas-${r.uuid}`);if(!g)return;const y=clone(r);switchStyle(y,e),sampleCharactersList.value.push(y);const k=componentsToContours(orderedListWithItemsForCharacterFile(r),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.advanceWidth,advancedEdit:!1},{x:0,y:0},!1,!0,!0);renderPreview2(g,k)})},updateCharactersAndPreview_styleSwitch=()=>{sampleCharactersList.value=[];const e=styles$3.value.find(n=>n.uuid===selectedStyleUUID.value);for(let n=0;n<originSampleCharactersList.value.length;n++){const r=clone(originSampleCharactersList.value[n]),g=document.getElementById(`advanced-edit-preview-canvas-${r.uuid}`);if(!g)return;switchStyle(r,e),sampleCharactersList.value.push(r);const y=componentsToContours(orderedListWithItemsForCharacterFile(r),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.advanceWidth,advancedEdit:!1},{x:0,y:0},!1,!0,!0);renderPreview2(g,y)}},updateCharactersList_styleSwitch=()=>{const e=styles$3.value.find(g=>g.uuid===selectedStyleUUID.value);switchStyle_init(e),total$1.value=selectedFile.value.characterList.length+Math.min(visibleCount.value,selectedFile.value.characterList.length),loaded$1.value=0,loading$1.value=!0,constants.value=clone(constants$2.value),constantsMap.update(constants.value);let n=0;const r=()=>{loaded$1.value++;const g=selectedFile.value.characterList[n];if(switchStyle2(g,e),componentsToContours(orderedListWithItemsForCharacterFile(g),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.advanceWidth},{x:0,y:0},!1,!0,!0),n++,n<selectedFile.value.characterList.length)n%100===0?requestAnimationFrame(r):r();else{emitter.emit("renderPreviewCanvas");return}};requestAnimationFrame(r)};class ParametersMap{parameters;constructor(n){this.parameters=n}get(n){for(let r=0;r<this.parameters.length;r++)if(this.parameters[r].name===n)return this.getValue(this.parameters[r])}getRange(n){for(let r=0;r<this.parameters.length;r++)if(this.parameters[r].name===n)return{min:this.parameters[r].min||0,max:this.parameters[r].max||1e3}}set(n,r){for(let g=0;g<this.parameters.length;g++){const y=this.parameters[g];y.name===n&&(r<y.min?y.value=y.min:r>y.max?y.value=y.max:y.value=r,y.type===ParameterType.Constant&&(y.type=ParameterType.Number))}}getByUUID(n){for(let r=0;r<this.parameters.length;r++)if(this.parameters[r].uuid===n)return this.getValue(this.parameters[r])}getValue(n){if(n.type===ParameterType.Number||n.type===ParameterType.RingController)return n.value;if(n.type===ParameterType.Constant)return constantsMap.getByUUID(n.value);if(n.type===ParameterType.PlaygroundConstant)return constantsMap$1.getByUUID(n.value);if(n.type===ParameterType.AdvancedEditConstant)return constantsMap$2.getByUUID(n.value);if(n.type===ParameterType.Enum)return n.value}}var paperFull={exports:{}},acorn={exports:{}},hasRequiredAcorn;function requireAcorn(){return hasRequiredAcorn||(hasRequiredAcorn=1,function(e,n){(function(r,g){g(n)})(commonjsGlobal$1,function(r){var g=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],y=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191],k="-----------------------------------------------------------------------------------------------------------------------------------------------------",$="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",V={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},L="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",z={5:L,"5module":L+" export import",6:L+" const class extends export import super"},j=/^in(stanceof)?$/,ae=new RegExp("["+$+"]"),re=new RegExp("["+$+k+"]");function oe(Fe,wn){for(var qn=65536,oa=0;oa<wn.length;oa+=2){if(qn+=wn[oa],qn>Fe)return!1;if(qn+=wn[oa+1],qn>=Fe)return!0}return!1}function ue(Fe,wn){return Fe<65?Fe===36:Fe<91?!0:Fe<97?Fe===95:Fe<123?!0:Fe<=65535?Fe>=170&&ae.test(String.fromCharCode(Fe)):wn===!1?!1:oe(Fe,y)}function le(Fe,wn){return Fe<48?Fe===36:Fe<58?!0:Fe<65?!1:Fe<91?!0:Fe<97?Fe===95:Fe<123?!0:Fe<=65535?Fe>=170&&re.test(String.fromCharCode(Fe)):wn===!1?!1:oe(Fe,y)||oe(Fe,g)}var de=function(wn,qn){qn===void 0&&(qn={}),this.label=wn,this.keyword=qn.keyword,this.beforeExpr=!!qn.beforeExpr,this.startsExpr=!!qn.startsExpr,this.isLoop=!!qn.isLoop,this.isAssign=!!qn.isAssign,this.prefix=!!qn.prefix,this.postfix=!!qn.postfix,this.binop=qn.binop||null,this.updateContext=null};function he(Fe,wn){return new de(Fe,{beforeExpr:!0,binop:wn})}var _e={beforeExpr:!0},Ce={startsExpr:!0},Ne={};function $e(Fe,wn){return wn===void 0&&(wn={}),wn.keyword=Fe,Ne[Fe]=new de(Fe,wn)}var xe={num:new de("num",Ce),regexp:new de("regexp",Ce),string:new de("string",Ce),name:new de("name",Ce),privateId:new de("privateId",Ce),eof:new de("eof"),bracketL:new de("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new de("]"),braceL:new de("{",{beforeExpr:!0,startsExpr:!0}),braceR:new de("}"),parenL:new de("(",{beforeExpr:!0,startsExpr:!0}),parenR:new de(")"),comma:new de(",",_e),semi:new de(";",_e),colon:new de(":",_e),dot:new de("."),question:new de("?",_e),questionDot:new de("?."),arrow:new de("=>",_e),template:new de("template"),invalidTemplate:new de("invalidTemplate"),ellipsis:new de("...",_e),backQuote:new de("`",Ce),dollarBraceL:new de("${",{beforeExpr:!0,startsExpr:!0}),eq:new de("=",{beforeExpr:!0,isAssign:!0}),assign:new de("_=",{beforeExpr:!0,isAssign:!0}),incDec:new de("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new de("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:he("||",1),logicalAND:he("&&",2),bitwiseOR:he("|",3),bitwiseXOR:he("^",4),bitwiseAND:he("&",5),equality:he("==/!=/===/!==",6),relational:he("</>/<=/>=",7),bitShift:he("<</>>/>>>",8),plusMin:new de("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:he("%",10),star:he("*",10),slash:he("/",10),starstar:new de("**",{beforeExpr:!0}),coalesce:he("??",1),_break:$e("break"),_case:$e("case",_e),_catch:$e("catch"),_continue:$e("continue"),_debugger:$e("debugger"),_default:$e("default",_e),_do:$e("do",{isLoop:!0,beforeExpr:!0}),_else:$e("else",_e),_finally:$e("finally"),_for:$e("for",{isLoop:!0}),_function:$e("function",Ce),_if:$e("if"),_return:$e("return",_e),_switch:$e("switch"),_throw:$e("throw",_e),_try:$e("try"),_var:$e("var"),_const:$e("const"),_while:$e("while",{isLoop:!0}),_with:$e("with"),_new:$e("new",{beforeExpr:!0,startsExpr:!0}),_this:$e("this",Ce),_super:$e("super",Ce),_class:$e("class",Ce),_extends:$e("extends",_e),_export:$e("export"),_import:$e("import",Ce),_null:$e("null",Ce),_true:$e("true",Ce),_false:$e("false",Ce),_in:$e("in",{beforeExpr:!0,binop:7}),_instanceof:$e("instanceof",{beforeExpr:!0,binop:7}),_typeof:$e("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:$e("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:$e("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Ie=/\r\n?|\n|\u2028|\u2029/,ze=new RegExp(Ie.source,"g");function qe(Fe){return Fe===10||Fe===13||Fe===8232||Fe===8233}function Et(Fe,wn,qn){qn===void 0&&(qn=Fe.length);for(var oa=wn;oa<qn;oa++){var xa=Fe.charCodeAt(oa);if(qe(xa))return oa<qn-1&&xa===13&&Fe.charCodeAt(oa+1)===10?oa+2:oa+1}return-1}var _n=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Dt=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Sn=Object.prototype,hn=Sn.hasOwnProperty,Vn=Sn.toString,Mn=Object.hasOwn||function(Fe,wn){return hn.call(Fe,wn)},$n=Array.isArray||function(Fe){return Vn.call(Fe)==="[object Array]"};function Nn(Fe){return new RegExp("^(?:"+Fe.replace(/ /g,"|")+")$")}function kn(Fe){return Fe<=65535?String.fromCharCode(Fe):(Fe-=65536,String.fromCharCode((Fe>>10)+55296,(Fe&1023)+56320))}var jn=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Fn=function(wn,qn){this.line=wn,this.column=qn};Fn.prototype.offset=function(wn){return new Fn(this.line,this.column+wn)};var Tn=function(wn,qn,oa){this.start=qn,this.end=oa,wn.sourceFile!==null&&(this.source=wn.sourceFile)};function Hn(Fe,wn){for(var qn=1,oa=0;;){var xa=Et(Fe,oa,wn);if(xa<0)return new Fn(qn,wn-oa);++qn,oa=xa}}var la={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},ca=!1;function Zn(Fe){var wn={};for(var qn in la)wn[qn]=Fe&&Mn(Fe,qn)?Fe[qn]:la[qn];if(wn.ecmaVersion==="latest"?wn.ecmaVersion=1e8:wn.ecmaVersion==null?(!ca&&typeof console=="object"&&console.warn&&(ca=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),wn.ecmaVersion=11):wn.ecmaVersion>=2015&&(wn.ecmaVersion-=2009),wn.allowReserved==null&&(wn.allowReserved=wn.ecmaVersion<5),(!Fe||Fe.allowHashBang==null)&&(wn.allowHashBang=wn.ecmaVersion>=14),$n(wn.onToken)){var oa=wn.onToken;wn.onToken=function(xa){return oa.push(xa)}}return $n(wn.onComment)&&(wn.onComment=Bn(wn,wn.onComment)),wn}function Bn(Fe,wn){return function(qn,oa,xa,Ia,Ma,Ya){var Za={type:qn?"Block":"Line",value:oa,start:xa,end:Ia};Fe.locations&&(Za.loc=new Tn(this,Ma,Ya)),Fe.ranges&&(Za.range=[xa,Ia]),wn.push(Za)}}var Wn=1,da=2,ga=4,Ca=8,ra=16,Gn=32,vn=64,Kn=128,En=256,kt=Wn|da|En;function At(Fe,wn){return da|(Fe?ga:0)|(wn?Ca:0)}var Dn=0,Xn=1,aa=2,sa=3,ia=4,ma=5,ua=function(wn,qn,oa){this.options=wn=Zn(wn),this.sourceFile=wn.sourceFile,this.keywords=Nn(z[wn.ecmaVersion>=6?6:wn.sourceType==="module"?"5module":5]);var xa="";wn.allowReserved!==!0&&(xa=V[wn.ecmaVersion>=6?6:wn.ecmaVersion===5?5:3],wn.sourceType==="module"&&(xa+=" await")),this.reservedWords=Nn(xa);var Ia=(xa?xa+" ":"")+V.strict;this.reservedWordsStrict=Nn(Ia),this.reservedWordsStrictBind=Nn(Ia+" "+V.strictBind),this.input=String(qn),this.containsEsc=!1,oa?(this.pos=oa,this.lineStart=this.input.lastIndexOf(`
`,oa-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ie).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=xe.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=wn.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&wn.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Wn),this.regexpState=null,this.privateNameStack=[]},pe={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};ua.prototype.parse=function(){var wn=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(wn)},pe.inFunction.get=function(){return(this.currentVarScope().flags&da)>0},pe.inGenerator.get=function(){return(this.currentVarScope().flags&Ca)>0&&!this.currentVarScope().inClassFieldInit},pe.inAsync.get=function(){return(this.currentVarScope().flags&ga)>0&&!this.currentVarScope().inClassFieldInit},pe.canAwait.get=function(){for(var Fe=this.scopeStack.length-1;Fe>=0;Fe--){var wn=this.scopeStack[Fe];if(wn.inClassFieldInit||wn.flags&En)return!1;if(wn.flags&da)return(wn.flags&ga)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},pe.allowSuper.get=function(){var Fe=this.currentThisScope(),wn=Fe.flags,qn=Fe.inClassFieldInit;return(wn&vn)>0||qn||this.options.allowSuperOutsideMethod},pe.allowDirectSuper.get=function(){return(this.currentThisScope().flags&Kn)>0},pe.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},pe.allowNewDotTarget.get=function(){var Fe=this.currentThisScope(),wn=Fe.flags,qn=Fe.inClassFieldInit;return(wn&(da|En))>0||qn},pe.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&En)>0},ua.extend=function(){for(var wn=[],qn=arguments.length;qn--;)wn[qn]=arguments[qn];for(var oa=this,xa=0;xa<wn.length;xa++)oa=wn[xa](oa);return oa},ua.parse=function(wn,qn){return new this(qn,wn).parse()},ua.parseExpressionAt=function(wn,qn,oa){var xa=new this(oa,wn,qn);return xa.nextToken(),xa.parseExpression()},ua.tokenizer=function(wn,qn){return new this(qn,wn)},Object.defineProperties(ua.prototype,pe);var Oe=ua.prototype,Ve=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Oe.strictDirective=function(Fe){if(this.options.ecmaVersion<5)return!1;for(;;){Dt.lastIndex=Fe,Fe+=Dt.exec(this.input)[0].length;var wn=Ve.exec(this.input.slice(Fe));if(!wn)return!1;if((wn[1]||wn[2])==="use strict"){Dt.lastIndex=Fe+wn[0].length;var qn=Dt.exec(this.input),oa=qn.index+qn[0].length,xa=this.input.charAt(oa);return xa===";"||xa==="}"||Ie.test(qn[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(xa)||xa==="!"&&this.input.charAt(oa+1)==="=")}Fe+=wn[0].length,Dt.lastIndex=Fe,Fe+=Dt.exec(this.input)[0].length,this.input[Fe]===";"&&Fe++}},Oe.eat=function(Fe){return this.type===Fe?(this.next(),!0):!1},Oe.isContextual=function(Fe){return this.type===xe.name&&this.value===Fe&&!this.containsEsc},Oe.eatContextual=function(Fe){return this.isContextual(Fe)?(this.next(),!0):!1},Oe.expectContextual=function(Fe){this.eatContextual(Fe)||this.unexpected()},Oe.canInsertSemicolon=function(){return this.type===xe.eof||this.type===xe.braceR||Ie.test(this.input.slice(this.lastTokEnd,this.start))},Oe.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},Oe.semicolon=function(){!this.eat(xe.semi)&&!this.insertSemicolon()&&this.unexpected()},Oe.afterTrailingComma=function(Fe,wn){if(this.type===Fe)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),wn||this.next(),!0},Oe.expect=function(Fe){this.eat(Fe)||this.unexpected()},Oe.unexpected=function(Fe){this.raise(Fe??this.start,"Unexpected token")};var Ue=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Oe.checkPatternErrors=function(Fe,wn){if(Fe){Fe.trailingComma>-1&&this.raiseRecoverable(Fe.trailingComma,"Comma is not permitted after the rest element");var qn=wn?Fe.parenthesizedAssign:Fe.parenthesizedBind;qn>-1&&this.raiseRecoverable(qn,wn?"Assigning to rvalue":"Parenthesized pattern")}},Oe.checkExpressionErrors=function(Fe,wn){if(!Fe)return!1;var qn=Fe.shorthandAssign,oa=Fe.doubleProto;if(!wn)return qn>=0||oa>=0;qn>=0&&this.raise(qn,"Shorthand property assignments are valid only in destructuring patterns"),oa>=0&&this.raiseRecoverable(oa,"Redefinition of __proto__ property")},Oe.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},Oe.isSimpleAssignTarget=function(Fe){return Fe.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(Fe.expression):Fe.type==="Identifier"||Fe.type==="MemberExpression"};var Pt=ua.prototype;Pt.parseTopLevel=function(Fe){var wn=Object.create(null);for(Fe.body||(Fe.body=[]);this.type!==xe.eof;){var qn=this.parseStatement(null,!0,wn);Fe.body.push(qn)}if(this.inModule)for(var oa=0,xa=Object.keys(this.undefinedExports);oa<xa.length;oa+=1){var Ia=xa[oa];this.raiseRecoverable(this.undefinedExports[Ia].start,"Export '"+Ia+"' is not defined")}return this.adaptDirectivePrologue(Fe.body),this.next(),Fe.sourceType=this.options.sourceType,this.finishNode(Fe,"Program")};var Lt={kind:"loop"},bn={kind:"switch"};Pt.isLet=function(Fe){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Dt.lastIndex=this.pos;var wn=Dt.exec(this.input),qn=this.pos+wn[0].length,oa=this.input.charCodeAt(qn);if(oa===91||oa===92)return!0;if(Fe)return!1;if(oa===123||oa>55295&&oa<56320)return!0;if(ue(oa,!0)){for(var xa=qn+1;le(oa=this.input.charCodeAt(xa),!0);)++xa;if(oa===92||oa>55295&&oa<56320)return!0;var Ia=this.input.slice(qn,xa);if(!j.test(Ia))return!0}return!1},Pt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Dt.lastIndex=this.pos;var Fe=Dt.exec(this.input),wn=this.pos+Fe[0].length,qn;return!Ie.test(this.input.slice(this.pos,wn))&&this.input.slice(wn,wn+8)==="function"&&(wn+8===this.input.length||!(le(qn=this.input.charCodeAt(wn+8))||qn>55295&&qn<56320))},Pt.parseStatement=function(Fe,wn,qn){var oa=this.type,xa=this.startNode(),Ia;switch(this.isLet(Fe)&&(oa=xe._var,Ia="let"),oa){case xe._break:case xe._continue:return this.parseBreakContinueStatement(xa,oa.keyword);case xe._debugger:return this.parseDebuggerStatement(xa);case xe._do:return this.parseDoStatement(xa);case xe._for:return this.parseForStatement(xa);case xe._function:return Fe&&(this.strict||Fe!=="if"&&Fe!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(xa,!1,!Fe);case xe._class:return Fe&&this.unexpected(),this.parseClass(xa,!0);case xe._if:return this.parseIfStatement(xa);case xe._return:return this.parseReturnStatement(xa);case xe._switch:return this.parseSwitchStatement(xa);case xe._throw:return this.parseThrowStatement(xa);case xe._try:return this.parseTryStatement(xa);case xe._const:case xe._var:return Ia=Ia||this.value,Fe&&Ia!=="var"&&this.unexpected(),this.parseVarStatement(xa,Ia);case xe._while:return this.parseWhileStatement(xa);case xe._with:return this.parseWithStatement(xa);case xe.braceL:return this.parseBlock(!0,xa);case xe.semi:return this.parseEmptyStatement(xa);case xe._export:case xe._import:if(this.options.ecmaVersion>10&&oa===xe._import){Dt.lastIndex=this.pos;var Ma=Dt.exec(this.input),Ya=this.pos+Ma[0].length,Za=this.input.charCodeAt(Ya);if(Za===40||Za===46)return this.parseExpressionStatement(xa,this.parseExpression())}return this.options.allowImportExportEverywhere||(wn||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),oa===xe._import?this.parseImport(xa):this.parseExport(xa,qn);default:if(this.isAsyncFunction())return Fe&&this.unexpected(),this.next(),this.parseFunctionStatement(xa,!0,!Fe);var pr=this.value,hr=this.parseExpression();return oa===xe.name&&hr.type==="Identifier"&&this.eat(xe.colon)?this.parseLabeledStatement(xa,pr,hr,Fe):this.parseExpressionStatement(xa,hr)}},Pt.parseBreakContinueStatement=function(Fe,wn){var qn=wn==="break";this.next(),this.eat(xe.semi)||this.insertSemicolon()?Fe.label=null:this.type!==xe.name?this.unexpected():(Fe.label=this.parseIdent(),this.semicolon());for(var oa=0;oa<this.labels.length;++oa){var xa=this.labels[oa];if((Fe.label==null||xa.name===Fe.label.name)&&(xa.kind!=null&&(qn||xa.kind==="loop")||Fe.label&&qn))break}return oa===this.labels.length&&this.raise(Fe.start,"Unsyntactic "+wn),this.finishNode(Fe,qn?"BreakStatement":"ContinueStatement")},Pt.parseDebuggerStatement=function(Fe){return this.next(),this.semicolon(),this.finishNode(Fe,"DebuggerStatement")},Pt.parseDoStatement=function(Fe){return this.next(),this.labels.push(Lt),Fe.body=this.parseStatement("do"),this.labels.pop(),this.expect(xe._while),Fe.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(xe.semi):this.semicolon(),this.finishNode(Fe,"DoWhileStatement")},Pt.parseForStatement=function(Fe){this.next();var wn=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Lt),this.enterScope(0),this.expect(xe.parenL),this.type===xe.semi)return wn>-1&&this.unexpected(wn),this.parseFor(Fe,null);var qn=this.isLet();if(this.type===xe._var||this.type===xe._const||qn){var oa=this.startNode(),xa=qn?"let":this.value;return this.next(),this.parseVar(oa,!0,xa),this.finishNode(oa,"VariableDeclaration"),(this.type===xe._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&oa.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===xe._in?wn>-1&&this.unexpected(wn):Fe.await=wn>-1),this.parseForIn(Fe,oa)):(wn>-1&&this.unexpected(wn),this.parseFor(Fe,oa))}var Ia=this.isContextual("let"),Ma=!1,Ya=new Ue,Za=this.parseExpression(wn>-1?"await":!0,Ya);return this.type===xe._in||(Ma=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===xe._in?wn>-1&&this.unexpected(wn):Fe.await=wn>-1),Ia&&Ma&&this.raise(Za.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(Za,!1,Ya),this.checkLValPattern(Za),this.parseForIn(Fe,Za)):(this.checkExpressionErrors(Ya,!0),wn>-1&&this.unexpected(wn),this.parseFor(Fe,Za))},Pt.parseFunctionStatement=function(Fe,wn,qn){return this.next(),this.parseFunction(Fe,Cn|(qn?0:xn),!1,wn)},Pt.parseIfStatement=function(Fe){return this.next(),Fe.test=this.parseParenExpression(),Fe.consequent=this.parseStatement("if"),Fe.alternate=this.eat(xe._else)?this.parseStatement("if"):null,this.finishNode(Fe,"IfStatement")},Pt.parseReturnStatement=function(Fe){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(xe.semi)||this.insertSemicolon()?Fe.argument=null:(Fe.argument=this.parseExpression(),this.semicolon()),this.finishNode(Fe,"ReturnStatement")},Pt.parseSwitchStatement=function(Fe){this.next(),Fe.discriminant=this.parseParenExpression(),Fe.cases=[],this.expect(xe.braceL),this.labels.push(bn),this.enterScope(0);for(var wn,qn=!1;this.type!==xe.braceR;)if(this.type===xe._case||this.type===xe._default){var oa=this.type===xe._case;wn&&this.finishNode(wn,"SwitchCase"),Fe.cases.push(wn=this.startNode()),wn.consequent=[],this.next(),oa?wn.test=this.parseExpression():(qn&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),qn=!0,wn.test=null),this.expect(xe.colon)}else wn||this.unexpected(),wn.consequent.push(this.parseStatement(null));return this.exitScope(),wn&&this.finishNode(wn,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(Fe,"SwitchStatement")},Pt.parseThrowStatement=function(Fe){return this.next(),Ie.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),Fe.argument=this.parseExpression(),this.semicolon(),this.finishNode(Fe,"ThrowStatement")};var jt=[];Pt.parseCatchClauseParam=function(){var Fe=this.parseBindingAtom(),wn=Fe.type==="Identifier";return this.enterScope(wn?Gn:0),this.checkLValPattern(Fe,wn?ia:aa),this.expect(xe.parenR),Fe},Pt.parseTryStatement=function(Fe){if(this.next(),Fe.block=this.parseBlock(),Fe.handler=null,this.type===xe._catch){var wn=this.startNode();this.next(),this.eat(xe.parenL)?wn.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),wn.param=null,this.enterScope(0)),wn.body=this.parseBlock(!1),this.exitScope(),Fe.handler=this.finishNode(wn,"CatchClause")}return Fe.finalizer=this.eat(xe._finally)?this.parseBlock():null,!Fe.handler&&!Fe.finalizer&&this.raise(Fe.start,"Missing catch or finally clause"),this.finishNode(Fe,"TryStatement")},Pt.parseVarStatement=function(Fe,wn,qn){return this.next(),this.parseVar(Fe,!1,wn,qn),this.semicolon(),this.finishNode(Fe,"VariableDeclaration")},Pt.parseWhileStatement=function(Fe){return this.next(),Fe.test=this.parseParenExpression(),this.labels.push(Lt),Fe.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(Fe,"WhileStatement")},Pt.parseWithStatement=function(Fe){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),Fe.object=this.parseParenExpression(),Fe.body=this.parseStatement("with"),this.finishNode(Fe,"WithStatement")},Pt.parseEmptyStatement=function(Fe){return this.next(),this.finishNode(Fe,"EmptyStatement")},Pt.parseLabeledStatement=function(Fe,wn,qn,oa){for(var xa=0,Ia=this.labels;xa<Ia.length;xa+=1){var Ma=Ia[xa];Ma.name===wn&&this.raise(qn.start,"Label '"+wn+"' is already declared")}for(var Ya=this.type.isLoop?"loop":this.type===xe._switch?"switch":null,Za=this.labels.length-1;Za>=0;Za--){var pr=this.labels[Za];if(pr.statementStart===Fe.start)pr.statementStart=this.start,pr.kind=Ya;else break}return this.labels.push({name:wn,kind:Ya,statementStart:this.start}),Fe.body=this.parseStatement(oa?oa.indexOf("label")===-1?oa+"label":oa:"label"),this.labels.pop(),Fe.label=qn,this.finishNode(Fe,"LabeledStatement")},Pt.parseExpressionStatement=function(Fe,wn){return Fe.expression=wn,this.semicolon(),this.finishNode(Fe,"ExpressionStatement")},Pt.parseBlock=function(Fe,wn,qn){for(Fe===void 0&&(Fe=!0),wn===void 0&&(wn=this.startNode()),wn.body=[],this.expect(xe.braceL),Fe&&this.enterScope(0);this.type!==xe.braceR;){var oa=this.parseStatement(null);wn.body.push(oa)}return qn&&(this.strict=!1),this.next(),Fe&&this.exitScope(),this.finishNode(wn,"BlockStatement")},Pt.parseFor=function(Fe,wn){return Fe.init=wn,this.expect(xe.semi),Fe.test=this.type===xe.semi?null:this.parseExpression(),this.expect(xe.semi),Fe.update=this.type===xe.parenR?null:this.parseExpression(),this.expect(xe.parenR),Fe.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(Fe,"ForStatement")},Pt.parseForIn=function(Fe,wn){var qn=this.type===xe._in;return this.next(),wn.type==="VariableDeclaration"&&wn.declarations[0].init!=null&&(!qn||this.options.ecmaVersion<8||this.strict||wn.kind!=="var"||wn.declarations[0].id.type!=="Identifier")&&this.raise(wn.start,(qn?"for-in":"for-of")+" loop variable declaration may not have an initializer"),Fe.left=wn,Fe.right=qn?this.parseExpression():this.parseMaybeAssign(),this.expect(xe.parenR),Fe.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(Fe,qn?"ForInStatement":"ForOfStatement")},Pt.parseVar=function(Fe,wn,qn,oa){for(Fe.declarations=[],Fe.kind=qn;;){var xa=this.startNode();if(this.parseVarId(xa,qn),this.eat(xe.eq)?xa.init=this.parseMaybeAssign(wn):!oa&&qn==="const"&&!(this.type===xe._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!oa&&xa.id.type!=="Identifier"&&!(wn&&(this.type===xe._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):xa.init=null,Fe.declarations.push(this.finishNode(xa,"VariableDeclarator")),!this.eat(xe.comma))break}return Fe},Pt.parseVarId=function(Fe,wn){Fe.id=this.parseBindingAtom(),this.checkLValPattern(Fe.id,wn==="var"?Xn:aa,!1)};var Cn=1,xn=2,In=4;Pt.parseFunction=function(Fe,wn,qn,oa,xa){this.initFunction(Fe),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!oa)&&(this.type===xe.star&&wn&xn&&this.unexpected(),Fe.generator=this.eat(xe.star)),this.options.ecmaVersion>=8&&(Fe.async=!!oa),wn&Cn&&(Fe.id=wn&In&&this.type!==xe.name?null:this.parseIdent(),Fe.id&&!(wn&xn)&&this.checkLValSimple(Fe.id,this.strict||Fe.generator||Fe.async?this.treatFunctionsAsVar?Xn:aa:sa));var Ia=this.yieldPos,Ma=this.awaitPos,Ya=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(At(Fe.async,Fe.generator)),wn&Cn||(Fe.id=this.type===xe.name?this.parseIdent():null),this.parseFunctionParams(Fe),this.parseFunctionBody(Fe,qn,!1,xa),this.yieldPos=Ia,this.awaitPos=Ma,this.awaitIdentPos=Ya,this.finishNode(Fe,wn&Cn?"FunctionDeclaration":"FunctionExpression")},Pt.parseFunctionParams=function(Fe){this.expect(xe.parenL),Fe.params=this.parseBindingList(xe.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},Pt.parseClass=function(Fe,wn){this.next();var qn=this.strict;this.strict=!0,this.parseClassId(Fe,wn),this.parseClassSuper(Fe);var oa=this.enterClassBody(),xa=this.startNode(),Ia=!1;for(xa.body=[],this.expect(xe.braceL);this.type!==xe.braceR;){var Ma=this.parseClassElement(Fe.superClass!==null);Ma&&(xa.body.push(Ma),Ma.type==="MethodDefinition"&&Ma.kind==="constructor"?(Ia&&this.raiseRecoverable(Ma.start,"Duplicate constructor in the same class"),Ia=!0):Ma.key&&Ma.key.type==="PrivateIdentifier"&&Ln(oa,Ma)&&this.raiseRecoverable(Ma.key.start,"Identifier '#"+Ma.key.name+"' has already been declared"))}return this.strict=qn,this.next(),Fe.body=this.finishNode(xa,"ClassBody"),this.exitClassBody(),this.finishNode(Fe,wn?"ClassDeclaration":"ClassExpression")},Pt.parseClassElement=function(Fe){if(this.eat(xe.semi))return null;var wn=this.options.ecmaVersion,qn=this.startNode(),oa="",xa=!1,Ia=!1,Ma="method",Ya=!1;if(this.eatContextual("static")){if(wn>=13&&this.eat(xe.braceL))return this.parseClassStaticBlock(qn),qn;this.isClassElementNameStart()||this.type===xe.star?Ya=!0:oa="static"}if(qn.static=Ya,!oa&&wn>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===xe.star)&&!this.canInsertSemicolon()?Ia=!0:oa="async"),!oa&&(wn>=9||!Ia)&&this.eat(xe.star)&&(xa=!0),!oa&&!Ia&&!xa){var Za=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?Ma=Za:oa=Za)}if(oa?(qn.computed=!1,qn.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),qn.key.name=oa,this.finishNode(qn.key,"Identifier")):this.parseClassElementName(qn),wn<13||this.type===xe.parenL||Ma!=="method"||xa||Ia){var pr=!qn.static&&An(qn,"constructor"),hr=pr&&Fe;pr&&Ma!=="method"&&this.raise(qn.key.start,"Constructor can't have get/set modifier"),qn.kind=pr?"constructor":Ma,this.parseClassMethod(qn,xa,Ia,hr)}else this.parseClassField(qn);return qn},Pt.isClassElementNameStart=function(){return this.type===xe.name||this.type===xe.privateId||this.type===xe.num||this.type===xe.string||this.type===xe.bracketL||this.type.keyword},Pt.parseClassElementName=function(Fe){this.type===xe.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),Fe.computed=!1,Fe.key=this.parsePrivateIdent()):this.parsePropertyName(Fe)},Pt.parseClassMethod=function(Fe,wn,qn,oa){var xa=Fe.key;Fe.kind==="constructor"?(wn&&this.raise(xa.start,"Constructor can't be a generator"),qn&&this.raise(xa.start,"Constructor can't be an async method")):Fe.static&&An(Fe,"prototype")&&this.raise(xa.start,"Classes may not have a static property named prototype");var Ia=Fe.value=this.parseMethod(wn,qn,oa);return Fe.kind==="get"&&Ia.params.length!==0&&this.raiseRecoverable(Ia.start,"getter should have no params"),Fe.kind==="set"&&Ia.params.length!==1&&this.raiseRecoverable(Ia.start,"setter should have exactly one param"),Fe.kind==="set"&&Ia.params[0].type==="RestElement"&&this.raiseRecoverable(Ia.params[0].start,"Setter cannot use rest params"),this.finishNode(Fe,"MethodDefinition")},Pt.parseClassField=function(Fe){if(An(Fe,"constructor")?this.raise(Fe.key.start,"Classes can't have a field named 'constructor'"):Fe.static&&An(Fe,"prototype")&&this.raise(Fe.key.start,"Classes can't have a static field named 'prototype'"),this.eat(xe.eq)){var wn=this.currentThisScope(),qn=wn.inClassFieldInit;wn.inClassFieldInit=!0,Fe.value=this.parseMaybeAssign(),wn.inClassFieldInit=qn}else Fe.value=null;return this.semicolon(),this.finishNode(Fe,"PropertyDefinition")},Pt.parseClassStaticBlock=function(Fe){Fe.body=[];var wn=this.labels;for(this.labels=[],this.enterScope(En|vn);this.type!==xe.braceR;){var qn=this.parseStatement(null);Fe.body.push(qn)}return this.next(),this.exitScope(),this.labels=wn,this.finishNode(Fe,"StaticBlock")},Pt.parseClassId=function(Fe,wn){this.type===xe.name?(Fe.id=this.parseIdent(),wn&&this.checkLValSimple(Fe.id,aa,!1)):(wn===!0&&this.unexpected(),Fe.id=null)},Pt.parseClassSuper=function(Fe){Fe.superClass=this.eat(xe._extends)?this.parseExprSubscripts(null,!1):null},Pt.enterClassBody=function(){var Fe={declared:Object.create(null),used:[]};return this.privateNameStack.push(Fe),Fe.declared},Pt.exitClassBody=function(){var Fe=this.privateNameStack.pop(),wn=Fe.declared,qn=Fe.used;if(this.options.checkPrivateFields)for(var oa=this.privateNameStack.length,xa=oa===0?null:this.privateNameStack[oa-1],Ia=0;Ia<qn.length;++Ia){var Ma=qn[Ia];Mn(wn,Ma.name)||(xa?xa.used.push(Ma):this.raiseRecoverable(Ma.start,"Private field '#"+Ma.name+"' must be declared in an enclosing class"))}};function Ln(Fe,wn){var qn=wn.key.name,oa=Fe[qn],xa="true";return wn.type==="MethodDefinition"&&(wn.kind==="get"||wn.kind==="set")&&(xa=(wn.static?"s":"i")+wn.kind),oa==="iget"&&xa==="iset"||oa==="iset"&&xa==="iget"||oa==="sget"&&xa==="sset"||oa==="sset"&&xa==="sget"?(Fe[qn]="true",!1):oa?!0:(Fe[qn]=xa,!1)}function An(Fe,wn){var qn=Fe.computed,oa=Fe.key;return!qn&&(oa.type==="Identifier"&&oa.name===wn||oa.type==="Literal"&&oa.value===wn)}Pt.parseExportAllDeclaration=function(Fe,wn){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(Fe.exported=this.parseModuleExportName(),this.checkExport(wn,Fe.exported,this.lastTokStart)):Fe.exported=null),this.expectContextual("from"),this.type!==xe.string&&this.unexpected(),Fe.source=this.parseExprAtom(),this.semicolon(),this.finishNode(Fe,"ExportAllDeclaration")},Pt.parseExport=function(Fe,wn){if(this.next(),this.eat(xe.star))return this.parseExportAllDeclaration(Fe,wn);if(this.eat(xe._default))return this.checkExport(wn,"default",this.lastTokStart),Fe.declaration=this.parseExportDefaultDeclaration(),this.finishNode(Fe,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())Fe.declaration=this.parseExportDeclaration(Fe),Fe.declaration.type==="VariableDeclaration"?this.checkVariableExport(wn,Fe.declaration.declarations):this.checkExport(wn,Fe.declaration.id,Fe.declaration.id.start),Fe.specifiers=[],Fe.source=null;else{if(Fe.declaration=null,Fe.specifiers=this.parseExportSpecifiers(wn),this.eatContextual("from"))this.type!==xe.string&&this.unexpected(),Fe.source=this.parseExprAtom();else{for(var qn=0,oa=Fe.specifiers;qn<oa.length;qn+=1){var xa=oa[qn];this.checkUnreserved(xa.local),this.checkLocalExport(xa.local),xa.local.type==="Literal"&&this.raise(xa.local.start,"A string literal cannot be used as an exported binding without `from`.")}Fe.source=null}this.semicolon()}return this.finishNode(Fe,"ExportNamedDeclaration")},Pt.parseExportDeclaration=function(Fe){return this.parseStatement(null)},Pt.parseExportDefaultDeclaration=function(){var Fe;if(this.type===xe._function||(Fe=this.isAsyncFunction())){var wn=this.startNode();return this.next(),Fe&&this.next(),this.parseFunction(wn,Cn|In,!1,Fe)}else if(this.type===xe._class){var qn=this.startNode();return this.parseClass(qn,"nullableID")}else{var oa=this.parseMaybeAssign();return this.semicolon(),oa}},Pt.checkExport=function(Fe,wn,qn){Fe&&(typeof wn!="string"&&(wn=wn.type==="Identifier"?wn.name:wn.value),Mn(Fe,wn)&&this.raiseRecoverable(qn,"Duplicate export '"+wn+"'"),Fe[wn]=!0)},Pt.checkPatternExport=function(Fe,wn){var qn=wn.type;if(qn==="Identifier")this.checkExport(Fe,wn,wn.start);else if(qn==="ObjectPattern")for(var oa=0,xa=wn.properties;oa<xa.length;oa+=1){var Ia=xa[oa];this.checkPatternExport(Fe,Ia)}else if(qn==="ArrayPattern")for(var Ma=0,Ya=wn.elements;Ma<Ya.length;Ma+=1){var Za=Ya[Ma];Za&&this.checkPatternExport(Fe,Za)}else qn==="Property"?this.checkPatternExport(Fe,wn.value):qn==="AssignmentPattern"?this.checkPatternExport(Fe,wn.left):qn==="RestElement"?this.checkPatternExport(Fe,wn.argument):qn==="ParenthesizedExpression"&&this.checkPatternExport(Fe,wn.expression)},Pt.checkVariableExport=function(Fe,wn){if(Fe)for(var qn=0,oa=wn;qn<oa.length;qn+=1){var xa=oa[qn];this.checkPatternExport(Fe,xa.id)}},Pt.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},Pt.parseExportSpecifier=function(Fe){var wn=this.startNode();return wn.local=this.parseModuleExportName(),wn.exported=this.eatContextual("as")?this.parseModuleExportName():wn.local,this.checkExport(Fe,wn.exported,wn.exported.start),this.finishNode(wn,"ExportSpecifier")},Pt.parseExportSpecifiers=function(Fe){var wn=[],qn=!0;for(this.expect(xe.braceL);!this.eat(xe.braceR);){if(qn)qn=!1;else if(this.expect(xe.comma),this.afterTrailingComma(xe.braceR))break;wn.push(this.parseExportSpecifier(Fe))}return wn},Pt.parseImport=function(Fe){return this.next(),this.type===xe.string?(Fe.specifiers=jt,Fe.source=this.parseExprAtom()):(Fe.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),Fe.source=this.type===xe.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(Fe,"ImportDeclaration")},Pt.parseImportSpecifier=function(){var Fe=this.startNode();return Fe.imported=this.parseModuleExportName(),this.eatContextual("as")?Fe.local=this.parseIdent():(this.checkUnreserved(Fe.imported),Fe.local=Fe.imported),this.checkLValSimple(Fe.local,aa),this.finishNode(Fe,"ImportSpecifier")},Pt.parseImportDefaultSpecifier=function(){var Fe=this.startNode();return Fe.local=this.parseIdent(),this.checkLValSimple(Fe.local,aa),this.finishNode(Fe,"ImportDefaultSpecifier")},Pt.parseImportNamespaceSpecifier=function(){var Fe=this.startNode();return this.next(),this.expectContextual("as"),Fe.local=this.parseIdent(),this.checkLValSimple(Fe.local,aa),this.finishNode(Fe,"ImportNamespaceSpecifier")},Pt.parseImportSpecifiers=function(){var Fe=[],wn=!0;if(this.type===xe.name&&(Fe.push(this.parseImportDefaultSpecifier()),!this.eat(xe.comma)))return Fe;if(this.type===xe.star)return Fe.push(this.parseImportNamespaceSpecifier()),Fe;for(this.expect(xe.braceL);!this.eat(xe.braceR);){if(wn)wn=!1;else if(this.expect(xe.comma),this.afterTrailingComma(xe.braceR))break;Fe.push(this.parseImportSpecifier())}return Fe},Pt.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===xe.string){var Fe=this.parseLiteral(this.value);return jn.test(Fe.value)&&this.raise(Fe.start,"An export name cannot include a lone surrogate."),Fe}return this.parseIdent(!0)},Pt.adaptDirectivePrologue=function(Fe){for(var wn=0;wn<Fe.length&&this.isDirectiveCandidate(Fe[wn]);++wn)Fe[wn].directive=Fe[wn].expression.raw.slice(1,-1)},Pt.isDirectiveCandidate=function(Fe){return this.options.ecmaVersion>=5&&Fe.type==="ExpressionStatement"&&Fe.expression.type==="Literal"&&typeof Fe.expression.value=="string"&&(this.input[Fe.start]==='"'||this.input[Fe.start]==="'")};var zn=ua.prototype;zn.toAssignable=function(Fe,wn,qn){if(this.options.ecmaVersion>=6&&Fe)switch(Fe.type){case"Identifier":this.inAsync&&Fe.name==="await"&&this.raise(Fe.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":Fe.type="ObjectPattern",qn&&this.checkPatternErrors(qn,!0);for(var oa=0,xa=Fe.properties;oa<xa.length;oa+=1){var Ia=xa[oa];this.toAssignable(Ia,wn),Ia.type==="RestElement"&&(Ia.argument.type==="ArrayPattern"||Ia.argument.type==="ObjectPattern")&&this.raise(Ia.argument.start,"Unexpected token")}break;case"Property":Fe.kind!=="init"&&this.raise(Fe.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(Fe.value,wn);break;case"ArrayExpression":Fe.type="ArrayPattern",qn&&this.checkPatternErrors(qn,!0),this.toAssignableList(Fe.elements,wn);break;case"SpreadElement":Fe.type="RestElement",this.toAssignable(Fe.argument,wn),Fe.argument.type==="AssignmentPattern"&&this.raise(Fe.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":Fe.operator!=="="&&this.raise(Fe.left.end,"Only '=' operator can be used for specifying default value."),Fe.type="AssignmentPattern",delete Fe.operator,this.toAssignable(Fe.left,wn);break;case"ParenthesizedExpression":this.toAssignable(Fe.expression,wn,qn);break;case"ChainExpression":this.raiseRecoverable(Fe.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!wn)break;default:this.raise(Fe.start,"Assigning to rvalue")}else qn&&this.checkPatternErrors(qn,!0);return Fe},zn.toAssignableList=function(Fe,wn){for(var qn=Fe.length,oa=0;oa<qn;oa++){var xa=Fe[oa];xa&&this.toAssignable(xa,wn)}if(qn){var Ia=Fe[qn-1];this.options.ecmaVersion===6&&wn&&Ia&&Ia.type==="RestElement"&&Ia.argument.type!=="Identifier"&&this.unexpected(Ia.argument.start)}return Fe},zn.parseSpread=function(Fe){var wn=this.startNode();return this.next(),wn.argument=this.parseMaybeAssign(!1,Fe),this.finishNode(wn,"SpreadElement")},zn.parseRestBinding=function(){var Fe=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==xe.name&&this.unexpected(),Fe.argument=this.parseBindingAtom(),this.finishNode(Fe,"RestElement")},zn.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case xe.bracketL:var Fe=this.startNode();return this.next(),Fe.elements=this.parseBindingList(xe.bracketR,!0,!0),this.finishNode(Fe,"ArrayPattern");case xe.braceL:return this.parseObj(!0)}return this.parseIdent()},zn.parseBindingList=function(Fe,wn,qn,oa){for(var xa=[],Ia=!0;!this.eat(Fe);)if(Ia?Ia=!1:this.expect(xe.comma),wn&&this.type===xe.comma)xa.push(null);else{if(qn&&this.afterTrailingComma(Fe))break;if(this.type===xe.ellipsis){var Ma=this.parseRestBinding();this.parseBindingListItem(Ma),xa.push(Ma),this.type===xe.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(Fe);break}else xa.push(this.parseAssignableListItem(oa))}return xa},zn.parseAssignableListItem=function(Fe){var wn=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(wn),wn},zn.parseBindingListItem=function(Fe){return Fe},zn.parseMaybeDefault=function(Fe,wn,qn){if(qn=qn||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(xe.eq))return qn;var oa=this.startNodeAt(Fe,wn);return oa.left=qn,oa.right=this.parseMaybeAssign(),this.finishNode(oa,"AssignmentPattern")},zn.checkLValSimple=function(Fe,wn,qn){wn===void 0&&(wn=Dn);var oa=wn!==Dn;switch(Fe.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(Fe.name)&&this.raiseRecoverable(Fe.start,(oa?"Binding ":"Assigning to ")+Fe.name+" in strict mode"),oa&&(wn===aa&&Fe.name==="let"&&this.raiseRecoverable(Fe.start,"let is disallowed as a lexically bound name"),qn&&(Mn(qn,Fe.name)&&this.raiseRecoverable(Fe.start,"Argument name clash"),qn[Fe.name]=!0),wn!==ma&&this.declareName(Fe.name,wn,Fe.start));break;case"ChainExpression":this.raiseRecoverable(Fe.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":oa&&this.raiseRecoverable(Fe.start,"Binding member expression");break;case"ParenthesizedExpression":return oa&&this.raiseRecoverable(Fe.start,"Binding parenthesized expression"),this.checkLValSimple(Fe.expression,wn,qn);default:this.raise(Fe.start,(oa?"Binding":"Assigning to")+" rvalue")}},zn.checkLValPattern=function(Fe,wn,qn){switch(wn===void 0&&(wn=Dn),Fe.type){case"ObjectPattern":for(var oa=0,xa=Fe.properties;oa<xa.length;oa+=1){var Ia=xa[oa];this.checkLValInnerPattern(Ia,wn,qn)}break;case"ArrayPattern":for(var Ma=0,Ya=Fe.elements;Ma<Ya.length;Ma+=1){var Za=Ya[Ma];Za&&this.checkLValInnerPattern(Za,wn,qn)}break;default:this.checkLValSimple(Fe,wn,qn)}},zn.checkLValInnerPattern=function(Fe,wn,qn){switch(wn===void 0&&(wn=Dn),Fe.type){case"Property":this.checkLValInnerPattern(Fe.value,wn,qn);break;case"AssignmentPattern":this.checkLValPattern(Fe.left,wn,qn);break;case"RestElement":this.checkLValPattern(Fe.argument,wn,qn);break;default:this.checkLValPattern(Fe,wn,qn)}};var Jn=function(wn,qn,oa,xa,Ia){this.token=wn,this.isExpr=!!qn,this.preserveSpace=!!oa,this.override=xa,this.generator=!!Ia},Qn={b_stat:new Jn("{",!1),b_expr:new Jn("{",!0),b_tmpl:new Jn("${",!1),p_stat:new Jn("(",!1),p_expr:new Jn("(",!0),q_tmpl:new Jn("`",!0,!0,function(Fe){return Fe.tryReadTemplateToken()}),f_stat:new Jn("function",!1),f_expr:new Jn("function",!0),f_expr_gen:new Jn("function",!0,!1,null,!0),f_gen:new Jn("function",!1,!1,null,!0)},ta=ua.prototype;ta.initialContext=function(){return[Qn.b_stat]},ta.curContext=function(){return this.context[this.context.length-1]},ta.braceIsBlock=function(Fe){var wn=this.curContext();return wn===Qn.f_expr||wn===Qn.f_stat?!0:Fe===xe.colon&&(wn===Qn.b_stat||wn===Qn.b_expr)?!wn.isExpr:Fe===xe._return||Fe===xe.name&&this.exprAllowed?Ie.test(this.input.slice(this.lastTokEnd,this.start)):Fe===xe._else||Fe===xe.semi||Fe===xe.eof||Fe===xe.parenR||Fe===xe.arrow?!0:Fe===xe.braceL?wn===Qn.b_stat:Fe===xe._var||Fe===xe._const||Fe===xe.name?!1:!this.exprAllowed},ta.inGeneratorContext=function(){for(var Fe=this.context.length-1;Fe>=1;Fe--){var wn=this.context[Fe];if(wn.token==="function")return wn.generator}return!1},ta.updateContext=function(Fe){var wn,qn=this.type;qn.keyword&&Fe===xe.dot?this.exprAllowed=!1:(wn=qn.updateContext)?wn.call(this,Fe):this.exprAllowed=qn.beforeExpr},ta.overrideContext=function(Fe){this.curContext()!==Fe&&(this.context[this.context.length-1]=Fe)},xe.parenR.updateContext=xe.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var Fe=this.context.pop();Fe===Qn.b_stat&&this.curContext().token==="function"&&(Fe=this.context.pop()),this.exprAllowed=!Fe.isExpr},xe.braceL.updateContext=function(Fe){this.context.push(this.braceIsBlock(Fe)?Qn.b_stat:Qn.b_expr),this.exprAllowed=!0},xe.dollarBraceL.updateContext=function(){this.context.push(Qn.b_tmpl),this.exprAllowed=!0},xe.parenL.updateContext=function(Fe){var wn=Fe===xe._if||Fe===xe._for||Fe===xe._with||Fe===xe._while;this.context.push(wn?Qn.p_stat:Qn.p_expr),this.exprAllowed=!0},xe.incDec.updateContext=function(){},xe._function.updateContext=xe._class.updateContext=function(Fe){Fe.beforeExpr&&Fe!==xe._else&&!(Fe===xe.semi&&this.curContext()!==Qn.p_stat)&&!(Fe===xe._return&&Ie.test(this.input.slice(this.lastTokEnd,this.start)))&&!((Fe===xe.colon||Fe===xe.braceL)&&this.curContext()===Qn.b_stat)?this.context.push(Qn.f_expr):this.context.push(Qn.f_stat),this.exprAllowed=!1},xe.backQuote.updateContext=function(){this.curContext()===Qn.q_tmpl?this.context.pop():this.context.push(Qn.q_tmpl),this.exprAllowed=!1},xe.star.updateContext=function(Fe){if(Fe===xe._function){var wn=this.context.length-1;this.context[wn]===Qn.f_expr?this.context[wn]=Qn.f_expr_gen:this.context[wn]=Qn.f_gen}this.exprAllowed=!0},xe.name.updateContext=function(Fe){var wn=!1;this.options.ecmaVersion>=6&&Fe!==xe.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(wn=!0),this.exprAllowed=wn};var Pn=ua.prototype;Pn.checkPropClash=function(Fe,wn,qn){if(!(this.options.ecmaVersion>=9&&Fe.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(Fe.computed||Fe.method||Fe.shorthand))){var oa=Fe.key,xa;switch(oa.type){case"Identifier":xa=oa.name;break;case"Literal":xa=String(oa.value);break;default:return}var Ia=Fe.kind;if(this.options.ecmaVersion>=6){xa==="__proto__"&&Ia==="init"&&(wn.proto&&(qn?qn.doubleProto<0&&(qn.doubleProto=oa.start):this.raiseRecoverable(oa.start,"Redefinition of __proto__ property")),wn.proto=!0);return}xa="$"+xa;var Ma=wn[xa];if(Ma){var Ya;Ia==="init"?Ya=this.strict&&Ma.init||Ma.get||Ma.set:Ya=Ma.init||Ma[Ia],Ya&&this.raiseRecoverable(oa.start,"Redefinition of property")}else Ma=wn[xa]={init:!1,get:!1,set:!1};Ma[Ia]=!0}},Pn.parseExpression=function(Fe,wn){var qn=this.start,oa=this.startLoc,xa=this.parseMaybeAssign(Fe,wn);if(this.type===xe.comma){var Ia=this.startNodeAt(qn,oa);for(Ia.expressions=[xa];this.eat(xe.comma);)Ia.expressions.push(this.parseMaybeAssign(Fe,wn));return this.finishNode(Ia,"SequenceExpression")}return xa},Pn.parseMaybeAssign=function(Fe,wn,qn){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(Fe);this.exprAllowed=!1}var oa=!1,xa=-1,Ia=-1,Ma=-1;wn?(xa=wn.parenthesizedAssign,Ia=wn.trailingComma,Ma=wn.doubleProto,wn.parenthesizedAssign=wn.trailingComma=-1):(wn=new Ue,oa=!0);var Ya=this.start,Za=this.startLoc;(this.type===xe.parenL||this.type===xe.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=Fe==="await");var pr=this.parseMaybeConditional(Fe,wn);if(qn&&(pr=qn.call(this,pr,Ya,Za)),this.type.isAssign){var hr=this.startNodeAt(Ya,Za);return hr.operator=this.value,this.type===xe.eq&&(pr=this.toAssignable(pr,!1,wn)),oa||(wn.parenthesizedAssign=wn.trailingComma=wn.doubleProto=-1),wn.shorthandAssign>=pr.start&&(wn.shorthandAssign=-1),this.type===xe.eq?this.checkLValPattern(pr):this.checkLValSimple(pr),hr.left=pr,this.next(),hr.right=this.parseMaybeAssign(Fe),Ma>-1&&(wn.doubleProto=Ma),this.finishNode(hr,"AssignmentExpression")}else oa&&this.checkExpressionErrors(wn,!0);return xa>-1&&(wn.parenthesizedAssign=xa),Ia>-1&&(wn.trailingComma=Ia),pr},Pn.parseMaybeConditional=function(Fe,wn){var qn=this.start,oa=this.startLoc,xa=this.parseExprOps(Fe,wn);if(this.checkExpressionErrors(wn))return xa;if(this.eat(xe.question)){var Ia=this.startNodeAt(qn,oa);return Ia.test=xa,Ia.consequent=this.parseMaybeAssign(),this.expect(xe.colon),Ia.alternate=this.parseMaybeAssign(Fe),this.finishNode(Ia,"ConditionalExpression")}return xa},Pn.parseExprOps=function(Fe,wn){var qn=this.start,oa=this.startLoc,xa=this.parseMaybeUnary(wn,!1,!1,Fe);return this.checkExpressionErrors(wn)||xa.start===qn&&xa.type==="ArrowFunctionExpression"?xa:this.parseExprOp(xa,qn,oa,-1,Fe)},Pn.parseExprOp=function(Fe,wn,qn,oa,xa){var Ia=this.type.binop;if(Ia!=null&&(!xa||this.type!==xe._in)&&Ia>oa){var Ma=this.type===xe.logicalOR||this.type===xe.logicalAND,Ya=this.type===xe.coalesce;Ya&&(Ia=xe.logicalAND.binop);var Za=this.value;this.next();var pr=this.start,hr=this.startLoc,Pr=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,xa),pr,hr,Ia,xa),zr=this.buildBinary(wn,qn,Fe,Pr,Za,Ma||Ya);return(Ma&&this.type===xe.coalesce||Ya&&(this.type===xe.logicalOR||this.type===xe.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(zr,wn,qn,oa,xa)}return Fe},Pn.buildBinary=function(Fe,wn,qn,oa,xa,Ia){oa.type==="PrivateIdentifier"&&this.raise(oa.start,"Private identifier can only be left side of binary expression");var Ma=this.startNodeAt(Fe,wn);return Ma.left=qn,Ma.operator=xa,Ma.right=oa,this.finishNode(Ma,Ia?"LogicalExpression":"BinaryExpression")},Pn.parseMaybeUnary=function(Fe,wn,qn,oa){var xa=this.start,Ia=this.startLoc,Ma;if(this.isContextual("await")&&this.canAwait)Ma=this.parseAwait(oa),wn=!0;else if(this.type.prefix){var Ya=this.startNode(),Za=this.type===xe.incDec;Ya.operator=this.value,Ya.prefix=!0,this.next(),Ya.argument=this.parseMaybeUnary(null,!0,Za,oa),this.checkExpressionErrors(Fe,!0),Za?this.checkLValSimple(Ya.argument):this.strict&&Ya.operator==="delete"&&Ya.argument.type==="Identifier"?this.raiseRecoverable(Ya.start,"Deleting local variable in strict mode"):Ya.operator==="delete"&&Un(Ya.argument)?this.raiseRecoverable(Ya.start,"Private fields can not be deleted"):wn=!0,Ma=this.finishNode(Ya,Za?"UpdateExpression":"UnaryExpression")}else if(!wn&&this.type===xe.privateId)(oa||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),Ma=this.parsePrivateIdent(),this.type!==xe._in&&this.unexpected();else{if(Ma=this.parseExprSubscripts(Fe,oa),this.checkExpressionErrors(Fe))return Ma;for(;this.type.postfix&&!this.canInsertSemicolon();){var pr=this.startNodeAt(xa,Ia);pr.operator=this.value,pr.prefix=!1,pr.argument=Ma,this.checkLValSimple(Ma),this.next(),Ma=this.finishNode(pr,"UpdateExpression")}}if(!qn&&this.eat(xe.starstar))if(wn)this.unexpected(this.lastTokStart);else return this.buildBinary(xa,Ia,Ma,this.parseMaybeUnary(null,!1,!1,oa),"**",!1);else return Ma};function Un(Fe){return Fe.type==="MemberExpression"&&Fe.property.type==="PrivateIdentifier"||Fe.type==="ChainExpression"&&Un(Fe.expression)}Pn.parseExprSubscripts=function(Fe,wn){var qn=this.start,oa=this.startLoc,xa=this.parseExprAtom(Fe,wn);if(xa.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return xa;var Ia=this.parseSubscripts(xa,qn,oa,!1,wn);return Fe&&Ia.type==="MemberExpression"&&(Fe.parenthesizedAssign>=Ia.start&&(Fe.parenthesizedAssign=-1),Fe.parenthesizedBind>=Ia.start&&(Fe.parenthesizedBind=-1),Fe.trailingComma>=Ia.start&&(Fe.trailingComma=-1)),Ia},Pn.parseSubscripts=function(Fe,wn,qn,oa,xa){for(var Ia=this.options.ecmaVersion>=8&&Fe.type==="Identifier"&&Fe.name==="async"&&this.lastTokEnd===Fe.end&&!this.canInsertSemicolon()&&Fe.end-Fe.start===5&&this.potentialArrowAt===Fe.start,Ma=!1;;){var Ya=this.parseSubscript(Fe,wn,qn,oa,Ia,Ma,xa);if(Ya.optional&&(Ma=!0),Ya===Fe||Ya.type==="ArrowFunctionExpression"){if(Ma){var Za=this.startNodeAt(wn,qn);Za.expression=Ya,Ya=this.finishNode(Za,"ChainExpression")}return Ya}Fe=Ya}},Pn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(xe.arrow)},Pn.parseSubscriptAsyncArrow=function(Fe,wn,qn,oa){return this.parseArrowExpression(this.startNodeAt(Fe,wn),qn,!0,oa)},Pn.parseSubscript=function(Fe,wn,qn,oa,xa,Ia,Ma){var Ya=this.options.ecmaVersion>=11,Za=Ya&&this.eat(xe.questionDot);oa&&Za&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var pr=this.eat(xe.bracketL);if(pr||Za&&this.type!==xe.parenL&&this.type!==xe.backQuote||this.eat(xe.dot)){var hr=this.startNodeAt(wn,qn);hr.object=Fe,pr?(hr.property=this.parseExpression(),this.expect(xe.bracketR)):this.type===xe.privateId&&Fe.type!=="Super"?hr.property=this.parsePrivateIdent():hr.property=this.parseIdent(this.options.allowReserved!=="never"),hr.computed=!!pr,Ya&&(hr.optional=Za),Fe=this.finishNode(hr,"MemberExpression")}else if(!oa&&this.eat(xe.parenL)){var Pr=new Ue,zr=this.yieldPos,qr=this.awaitPos,Gr=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var Jr=this.parseExprList(xe.parenR,this.options.ecmaVersion>=8,!1,Pr);if(xa&&!Za&&this.shouldParseAsyncArrow())return this.checkPatternErrors(Pr,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=zr,this.awaitPos=qr,this.awaitIdentPos=Gr,this.parseSubscriptAsyncArrow(wn,qn,Jr,Ma);this.checkExpressionErrors(Pr,!0),this.yieldPos=zr||this.yieldPos,this.awaitPos=qr||this.awaitPos,this.awaitIdentPos=Gr||this.awaitIdentPos;var jr=this.startNodeAt(wn,qn);jr.callee=Fe,jr.arguments=Jr,Ya&&(jr.optional=Za),Fe=this.finishNode(jr,"CallExpression")}else if(this.type===xe.backQuote){(Za||Ia)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Wr=this.startNodeAt(wn,qn);Wr.tag=Fe,Wr.quasi=this.parseTemplate({isTagged:!0}),Fe=this.finishNode(Wr,"TaggedTemplateExpression")}return Fe},Pn.parseExprAtom=function(Fe,wn,qn){this.type===xe.slash&&this.readRegexp();var oa,xa=this.potentialArrowAt===this.start;switch(this.type){case xe._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),oa=this.startNode(),this.next(),this.type===xe.parenL&&!this.allowDirectSuper&&this.raise(oa.start,"super() call outside constructor of a subclass"),this.type!==xe.dot&&this.type!==xe.bracketL&&this.type!==xe.parenL&&this.unexpected(),this.finishNode(oa,"Super");case xe._this:return oa=this.startNode(),this.next(),this.finishNode(oa,"ThisExpression");case xe.name:var Ia=this.start,Ma=this.startLoc,Ya=this.containsEsc,Za=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!Ya&&Za.name==="async"&&!this.canInsertSemicolon()&&this.eat(xe._function))return this.overrideContext(Qn.f_expr),this.parseFunction(this.startNodeAt(Ia,Ma),0,!1,!0,wn);if(xa&&!this.canInsertSemicolon()){if(this.eat(xe.arrow))return this.parseArrowExpression(this.startNodeAt(Ia,Ma),[Za],!1,wn);if(this.options.ecmaVersion>=8&&Za.name==="async"&&this.type===xe.name&&!Ya&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return Za=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(xe.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(Ia,Ma),[Za],!0,wn)}return Za;case xe.regexp:var pr=this.value;return oa=this.parseLiteral(pr.value),oa.regex={pattern:pr.pattern,flags:pr.flags},oa;case xe.num:case xe.string:return this.parseLiteral(this.value);case xe._null:case xe._true:case xe._false:return oa=this.startNode(),oa.value=this.type===xe._null?null:this.type===xe._true,oa.raw=this.type.keyword,this.next(),this.finishNode(oa,"Literal");case xe.parenL:var hr=this.start,Pr=this.parseParenAndDistinguishExpression(xa,wn);return Fe&&(Fe.parenthesizedAssign<0&&!this.isSimpleAssignTarget(Pr)&&(Fe.parenthesizedAssign=hr),Fe.parenthesizedBind<0&&(Fe.parenthesizedBind=hr)),Pr;case xe.bracketL:return oa=this.startNode(),this.next(),oa.elements=this.parseExprList(xe.bracketR,!0,!0,Fe),this.finishNode(oa,"ArrayExpression");case xe.braceL:return this.overrideContext(Qn.b_expr),this.parseObj(!1,Fe);case xe._function:return oa=this.startNode(),this.next(),this.parseFunction(oa,0);case xe._class:return this.parseClass(this.startNode(),!1);case xe._new:return this.parseNew();case xe.backQuote:return this.parseTemplate();case xe._import:return this.options.ecmaVersion>=11?this.parseExprImport(qn):this.unexpected();default:return this.parseExprAtomDefault()}},Pn.parseExprAtomDefault=function(){this.unexpected()},Pn.parseExprImport=function(Fe){var wn=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var qn=this.parseIdent(!0);if(this.type===xe.parenL&&!Fe)return this.parseDynamicImport(wn);if(this.type===xe.dot)return wn.meta=qn,this.parseImportMeta(wn);this.unexpected()},Pn.parseDynamicImport=function(Fe){if(this.next(),Fe.source=this.parseMaybeAssign(),!this.eat(xe.parenR)){var wn=this.start;this.eat(xe.comma)&&this.eat(xe.parenR)?this.raiseRecoverable(wn,"Trailing comma is not allowed in import()"):this.unexpected(wn)}return this.finishNode(Fe,"ImportExpression")},Pn.parseImportMeta=function(Fe){this.next();var wn=this.containsEsc;return Fe.property=this.parseIdent(!0),Fe.property.name!=="meta"&&this.raiseRecoverable(Fe.property.start,"The only valid meta property for import is 'import.meta'"),wn&&this.raiseRecoverable(Fe.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(Fe.start,"Cannot use 'import.meta' outside a module"),this.finishNode(Fe,"MetaProperty")},Pn.parseLiteral=function(Fe){var wn=this.startNode();return wn.value=Fe,wn.raw=this.input.slice(this.start,this.end),wn.raw.charCodeAt(wn.raw.length-1)===110&&(wn.bigint=wn.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(wn,"Literal")},Pn.parseParenExpression=function(){this.expect(xe.parenL);var Fe=this.parseExpression();return this.expect(xe.parenR),Fe},Pn.shouldParseArrow=function(Fe){return!this.canInsertSemicolon()},Pn.parseParenAndDistinguishExpression=function(Fe,wn){var qn=this.start,oa=this.startLoc,xa,Ia=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var Ma=this.start,Ya=this.startLoc,Za=[],pr=!0,hr=!1,Pr=new Ue,zr=this.yieldPos,qr=this.awaitPos,Gr;for(this.yieldPos=0,this.awaitPos=0;this.type!==xe.parenR;)if(pr?pr=!1:this.expect(xe.comma),Ia&&this.afterTrailingComma(xe.parenR,!0)){hr=!0;break}else if(this.type===xe.ellipsis){Gr=this.start,Za.push(this.parseParenItem(this.parseRestBinding())),this.type===xe.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else Za.push(this.parseMaybeAssign(!1,Pr,this.parseParenItem));var Jr=this.lastTokEnd,jr=this.lastTokEndLoc;if(this.expect(xe.parenR),Fe&&this.shouldParseArrow(Za)&&this.eat(xe.arrow))return this.checkPatternErrors(Pr,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=zr,this.awaitPos=qr,this.parseParenArrowList(qn,oa,Za,wn);(!Za.length||hr)&&this.unexpected(this.lastTokStart),Gr&&this.unexpected(Gr),this.checkExpressionErrors(Pr,!0),this.yieldPos=zr||this.yieldPos,this.awaitPos=qr||this.awaitPos,Za.length>1?(xa=this.startNodeAt(Ma,Ya),xa.expressions=Za,this.finishNodeAt(xa,"SequenceExpression",Jr,jr)):xa=Za[0]}else xa=this.parseParenExpression();if(this.options.preserveParens){var Wr=this.startNodeAt(qn,oa);return Wr.expression=xa,this.finishNode(Wr,"ParenthesizedExpression")}else return xa},Pn.parseParenItem=function(Fe){return Fe},Pn.parseParenArrowList=function(Fe,wn,qn,oa){return this.parseArrowExpression(this.startNodeAt(Fe,wn),qn,!1,oa)};var On=[];Pn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var Fe=this.startNode(),wn=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(xe.dot)){Fe.meta=wn;var qn=this.containsEsc;return Fe.property=this.parseIdent(!0),Fe.property.name!=="target"&&this.raiseRecoverable(Fe.property.start,"The only valid meta property for new is 'new.target'"),qn&&this.raiseRecoverable(Fe.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(Fe.start,"'new.target' can only be used in functions and class static block"),this.finishNode(Fe,"MetaProperty")}var oa=this.start,xa=this.startLoc;return Fe.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),oa,xa,!0,!1),this.eat(xe.parenL)?Fe.arguments=this.parseExprList(xe.parenR,this.options.ecmaVersion>=8,!1):Fe.arguments=On,this.finishNode(Fe,"NewExpression")},Pn.parseTemplateElement=function(Fe){var wn=Fe.isTagged,qn=this.startNode();return this.type===xe.invalidTemplate?(wn||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),qn.value={raw:this.value,cooked:null}):qn.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),qn.tail=this.type===xe.backQuote,this.finishNode(qn,"TemplateElement")},Pn.parseTemplate=function(Fe){Fe===void 0&&(Fe={});var wn=Fe.isTagged;wn===void 0&&(wn=!1);var qn=this.startNode();this.next(),qn.expressions=[];var oa=this.parseTemplateElement({isTagged:wn});for(qn.quasis=[oa];!oa.tail;)this.type===xe.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(xe.dollarBraceL),qn.expressions.push(this.parseExpression()),this.expect(xe.braceR),qn.quasis.push(oa=this.parseTemplateElement({isTagged:wn}));return this.next(),this.finishNode(qn,"TemplateLiteral")},Pn.isAsyncProp=function(Fe){return!Fe.computed&&Fe.key.type==="Identifier"&&Fe.key.name==="async"&&(this.type===xe.name||this.type===xe.num||this.type===xe.string||this.type===xe.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===xe.star)&&!Ie.test(this.input.slice(this.lastTokEnd,this.start))},Pn.parseObj=function(Fe,wn){var qn=this.startNode(),oa=!0,xa={};for(qn.properties=[],this.next();!this.eat(xe.braceR);){if(oa)oa=!1;else if(this.expect(xe.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(xe.braceR))break;var Ia=this.parseProperty(Fe,wn);Fe||this.checkPropClash(Ia,xa,wn),qn.properties.push(Ia)}return this.finishNode(qn,Fe?"ObjectPattern":"ObjectExpression")},Pn.parseProperty=function(Fe,wn){var qn=this.startNode(),oa,xa,Ia,Ma;if(this.options.ecmaVersion>=9&&this.eat(xe.ellipsis))return Fe?(qn.argument=this.parseIdent(!1),this.type===xe.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(qn,"RestElement")):(qn.argument=this.parseMaybeAssign(!1,wn),this.type===xe.comma&&wn&&wn.trailingComma<0&&(wn.trailingComma=this.start),this.finishNode(qn,"SpreadElement"));this.options.ecmaVersion>=6&&(qn.method=!1,qn.shorthand=!1,(Fe||wn)&&(Ia=this.start,Ma=this.startLoc),Fe||(oa=this.eat(xe.star)));var Ya=this.containsEsc;return this.parsePropertyName(qn),!Fe&&!Ya&&this.options.ecmaVersion>=8&&!oa&&this.isAsyncProp(qn)?(xa=!0,oa=this.options.ecmaVersion>=9&&this.eat(xe.star),this.parsePropertyName(qn)):xa=!1,this.parsePropertyValue(qn,Fe,oa,xa,Ia,Ma,wn,Ya),this.finishNode(qn,"Property")},Pn.parseGetterSetter=function(Fe){Fe.kind=Fe.key.name,this.parsePropertyName(Fe),Fe.value=this.parseMethod(!1);var wn=Fe.kind==="get"?0:1;if(Fe.value.params.length!==wn){var qn=Fe.value.start;Fe.kind==="get"?this.raiseRecoverable(qn,"getter should have no params"):this.raiseRecoverable(qn,"setter should have exactly one param")}else Fe.kind==="set"&&Fe.value.params[0].type==="RestElement"&&this.raiseRecoverable(Fe.value.params[0].start,"Setter cannot use rest params")},Pn.parsePropertyValue=function(Fe,wn,qn,oa,xa,Ia,Ma,Ya){(qn||oa)&&this.type===xe.colon&&this.unexpected(),this.eat(xe.colon)?(Fe.value=wn?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,Ma),Fe.kind="init"):this.options.ecmaVersion>=6&&this.type===xe.parenL?(wn&&this.unexpected(),Fe.kind="init",Fe.method=!0,Fe.value=this.parseMethod(qn,oa)):!wn&&!Ya&&this.options.ecmaVersion>=5&&!Fe.computed&&Fe.key.type==="Identifier"&&(Fe.key.name==="get"||Fe.key.name==="set")&&this.type!==xe.comma&&this.type!==xe.braceR&&this.type!==xe.eq?((qn||oa)&&this.unexpected(),this.parseGetterSetter(Fe)):this.options.ecmaVersion>=6&&!Fe.computed&&Fe.key.type==="Identifier"?((qn||oa)&&this.unexpected(),this.checkUnreserved(Fe.key),Fe.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=xa),Fe.kind="init",wn?Fe.value=this.parseMaybeDefault(xa,Ia,this.copyNode(Fe.key)):this.type===xe.eq&&Ma?(Ma.shorthandAssign<0&&(Ma.shorthandAssign=this.start),Fe.value=this.parseMaybeDefault(xa,Ia,this.copyNode(Fe.key))):Fe.value=this.copyNode(Fe.key),Fe.shorthand=!0):this.unexpected()},Pn.parsePropertyName=function(Fe){if(this.options.ecmaVersion>=6){if(this.eat(xe.bracketL))return Fe.computed=!0,Fe.key=this.parseMaybeAssign(),this.expect(xe.bracketR),Fe.key;Fe.computed=!1}return Fe.key=this.type===xe.num||this.type===xe.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},Pn.initFunction=function(Fe){Fe.id=null,this.options.ecmaVersion>=6&&(Fe.generator=Fe.expression=!1),this.options.ecmaVersion>=8&&(Fe.async=!1)},Pn.parseMethod=function(Fe,wn,qn){var oa=this.startNode(),xa=this.yieldPos,Ia=this.awaitPos,Ma=this.awaitIdentPos;return this.initFunction(oa),this.options.ecmaVersion>=6&&(oa.generator=Fe),this.options.ecmaVersion>=8&&(oa.async=!!wn),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(At(wn,oa.generator)|vn|(qn?Kn:0)),this.expect(xe.parenL),oa.params=this.parseBindingList(xe.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(oa,!1,!0,!1),this.yieldPos=xa,this.awaitPos=Ia,this.awaitIdentPos=Ma,this.finishNode(oa,"FunctionExpression")},Pn.parseArrowExpression=function(Fe,wn,qn,oa){var xa=this.yieldPos,Ia=this.awaitPos,Ma=this.awaitIdentPos;return this.enterScope(At(qn,!1)|ra),this.initFunction(Fe),this.options.ecmaVersion>=8&&(Fe.async=!!qn),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,Fe.params=this.toAssignableList(wn,!0),this.parseFunctionBody(Fe,!0,!1,oa),this.yieldPos=xa,this.awaitPos=Ia,this.awaitIdentPos=Ma,this.finishNode(Fe,"ArrowFunctionExpression")},Pn.parseFunctionBody=function(Fe,wn,qn,oa){var xa=wn&&this.type!==xe.braceL,Ia=this.strict,Ma=!1;if(xa)Fe.body=this.parseMaybeAssign(oa),Fe.expression=!0,this.checkParams(Fe,!1);else{var Ya=this.options.ecmaVersion>=7&&!this.isSimpleParamList(Fe.params);(!Ia||Ya)&&(Ma=this.strictDirective(this.end),Ma&&Ya&&this.raiseRecoverable(Fe.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var Za=this.labels;this.labels=[],Ma&&(this.strict=!0),this.checkParams(Fe,!Ia&&!Ma&&!wn&&!qn&&this.isSimpleParamList(Fe.params)),this.strict&&Fe.id&&this.checkLValSimple(Fe.id,ma),Fe.body=this.parseBlock(!1,void 0,Ma&&!Ia),Fe.expression=!1,this.adaptDirectivePrologue(Fe.body.body),this.labels=Za}this.exitScope()},Pn.isSimpleParamList=function(Fe){for(var wn=0,qn=Fe;wn<qn.length;wn+=1){var oa=qn[wn];if(oa.type!=="Identifier")return!1}return!0},Pn.checkParams=function(Fe,wn){for(var qn=Object.create(null),oa=0,xa=Fe.params;oa<xa.length;oa+=1){var Ia=xa[oa];this.checkLValInnerPattern(Ia,Xn,wn?null:qn)}},Pn.parseExprList=function(Fe,wn,qn,oa){for(var xa=[],Ia=!0;!this.eat(Fe);){if(Ia)Ia=!1;else if(this.expect(xe.comma),wn&&this.afterTrailingComma(Fe))break;var Ma=void 0;qn&&this.type===xe.comma?Ma=null:this.type===xe.ellipsis?(Ma=this.parseSpread(oa),oa&&this.type===xe.comma&&oa.trailingComma<0&&(oa.trailingComma=this.start)):Ma=this.parseMaybeAssign(!1,oa),xa.push(Ma)}return xa},Pn.checkUnreserved=function(Fe){var wn=Fe.start,qn=Fe.end,oa=Fe.name;if(this.inGenerator&&oa==="yield"&&this.raiseRecoverable(wn,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&oa==="await"&&this.raiseRecoverable(wn,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&oa==="arguments"&&this.raiseRecoverable(wn,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(oa==="arguments"||oa==="await")&&this.raise(wn,"Cannot use "+oa+" in class static initialization block"),this.keywords.test(oa)&&this.raise(wn,"Unexpected keyword '"+oa+"'"),!(this.options.ecmaVersion<6&&this.input.slice(wn,qn).indexOf("\\")!==-1)){var xa=this.strict?this.reservedWordsStrict:this.reservedWords;xa.test(oa)&&(!this.inAsync&&oa==="await"&&this.raiseRecoverable(wn,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(wn,"The keyword '"+oa+"' is reserved"))}},Pn.parseIdent=function(Fe){var wn=this.parseIdentNode();return this.next(!!Fe),this.finishNode(wn,"Identifier"),Fe||(this.checkUnreserved(wn),wn.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=wn.start)),wn},Pn.parseIdentNode=function(){var Fe=this.startNode();return this.type===xe.name?Fe.name=this.value:this.type.keyword?(Fe.name=this.type.keyword,(Fe.name==="class"||Fe.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),Fe},Pn.parsePrivateIdent=function(){var Fe=this.startNode();return this.type===xe.privateId?Fe.name=this.value:this.unexpected(),this.next(),this.finishNode(Fe,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(Fe.start,"Private field '#"+Fe.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(Fe)),Fe},Pn.parseYield=function(Fe){this.yieldPos||(this.yieldPos=this.start);var wn=this.startNode();return this.next(),this.type===xe.semi||this.canInsertSemicolon()||this.type!==xe.star&&!this.type.startsExpr?(wn.delegate=!1,wn.argument=null):(wn.delegate=this.eat(xe.star),wn.argument=this.parseMaybeAssign(Fe)),this.finishNode(wn,"YieldExpression")},Pn.parseAwait=function(Fe){this.awaitPos||(this.awaitPos=this.start);var wn=this.startNode();return this.next(),wn.argument=this.parseMaybeUnary(null,!0,!1,Fe),this.finishNode(wn,"AwaitExpression")};var Rn=ua.prototype;Rn.raise=function(Fe,wn){var qn=Hn(this.input,Fe);wn+=" ("+qn.line+":"+qn.column+")";var oa=new SyntaxError(wn);throw oa.pos=Fe,oa.loc=qn,oa.raisedAt=this.pos,oa},Rn.raiseRecoverable=Rn.raise,Rn.curPosition=function(){if(this.options.locations)return new Fn(this.curLine,this.pos-this.lineStart)};var Yn=ua.prototype,na=function(wn){this.flags=wn,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Yn.enterScope=function(Fe){this.scopeStack.push(new na(Fe))},Yn.exitScope=function(){this.scopeStack.pop()},Yn.treatFunctionsAsVarInScope=function(Fe){return Fe.flags&da||!this.inModule&&Fe.flags&Wn},Yn.declareName=function(Fe,wn,qn){var oa=!1;if(wn===aa){var xa=this.currentScope();oa=xa.lexical.indexOf(Fe)>-1||xa.functions.indexOf(Fe)>-1||xa.var.indexOf(Fe)>-1,xa.lexical.push(Fe),this.inModule&&xa.flags&Wn&&delete this.undefinedExports[Fe]}else if(wn===ia){var Ia=this.currentScope();Ia.lexical.push(Fe)}else if(wn===sa){var Ma=this.currentScope();this.treatFunctionsAsVar?oa=Ma.lexical.indexOf(Fe)>-1:oa=Ma.lexical.indexOf(Fe)>-1||Ma.var.indexOf(Fe)>-1,Ma.functions.push(Fe)}else for(var Ya=this.scopeStack.length-1;Ya>=0;--Ya){var Za=this.scopeStack[Ya];if(Za.lexical.indexOf(Fe)>-1&&!(Za.flags&Gn&&Za.lexical[0]===Fe)||!this.treatFunctionsAsVarInScope(Za)&&Za.functions.indexOf(Fe)>-1){oa=!0;break}if(Za.var.push(Fe),this.inModule&&Za.flags&Wn&&delete this.undefinedExports[Fe],Za.flags&kt)break}oa&&this.raiseRecoverable(qn,"Identifier '"+Fe+"' has already been declared")},Yn.checkLocalExport=function(Fe){this.scopeStack[0].lexical.indexOf(Fe.name)===-1&&this.scopeStack[0].var.indexOf(Fe.name)===-1&&(this.undefinedExports[Fe.name]=Fe)},Yn.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Yn.currentVarScope=function(){for(var Fe=this.scopeStack.length-1;;Fe--){var wn=this.scopeStack[Fe];if(wn.flags&kt)return wn}},Yn.currentThisScope=function(){for(var Fe=this.scopeStack.length-1;;Fe--){var wn=this.scopeStack[Fe];if(wn.flags&kt&&!(wn.flags&ra))return wn}};var ea=function(wn,qn,oa){this.type="",this.start=qn,this.end=0,wn.options.locations&&(this.loc=new Tn(wn,oa)),wn.options.directSourceFile&&(this.sourceFile=wn.options.directSourceFile),wn.options.ranges&&(this.range=[qn,0])},pa=ua.prototype;pa.startNode=function(){return new ea(this,this.start,this.startLoc)},pa.startNodeAt=function(Fe,wn){return new ea(this,Fe,wn)};function ha(Fe,wn,qn,oa){return Fe.type=wn,Fe.end=qn,this.options.locations&&(Fe.loc.end=oa),this.options.ranges&&(Fe.range[1]=qn),Fe}pa.finishNode=function(Fe,wn){return ha.call(this,Fe,wn,this.lastTokEnd,this.lastTokEndLoc)},pa.finishNodeAt=function(Fe,wn,qn,oa){return ha.call(this,Fe,wn,qn,oa)},pa.copyNode=function(Fe){var wn=new ea(this,Fe.start,this.startLoc);for(var qn in Fe)wn[qn]=Fe[qn];return wn};var ba="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Oa=ba+" Extended_Pictographic",va=Oa,Sa=va+" EBase EComp EMod EPres ExtPict",$a=Sa,Da=$a,Na={9:ba,10:Oa,11:va,12:Sa,13:$a,14:Da},Va="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",Ua={9:"",10:"",11:"",12:"",13:"",14:Va},Wa="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Qa="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Ja=Qa+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Ra=Ja+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Fa=Ra+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Xa=Fa+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",tr=Xa+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",er={9:Qa,10:Ja,11:Ra,12:Fa,13:Xa,14:tr},or={};function rr(Fe){var wn=or[Fe]={binary:Nn(Na[Fe]+" "+Wa),binaryOfStrings:Nn(Ua[Fe]),nonBinary:{General_Category:Nn(Wa),Script:Nn(er[Fe])}};wn.nonBinary.Script_Extensions=wn.nonBinary.Script,wn.nonBinary.gc=wn.nonBinary.General_Category,wn.nonBinary.sc=wn.nonBinary.Script,wn.nonBinary.scx=wn.nonBinary.Script_Extensions}for(var sr=0,cr=[9,10,11,12,13,14];sr<cr.length;sr+=1){var ir=cr[sr];rr(ir)}var Ka=ua.prototype,vr=function(wn){this.parser=wn,this.validFlags="gim"+(wn.options.ecmaVersion>=6?"uy":"")+(wn.options.ecmaVersion>=9?"s":"")+(wn.options.ecmaVersion>=13?"d":"")+(wn.options.ecmaVersion>=15?"v":""),this.unicodeProperties=or[wn.options.ecmaVersion>=14?14:wn.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};vr.prototype.reset=function(wn,qn,oa){var xa=oa.indexOf("v")!==-1,Ia=oa.indexOf("u")!==-1;this.start=wn|0,this.source=qn+"",this.flags=oa,xa&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=Ia&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=Ia&&this.parser.options.ecmaVersion>=9)},vr.prototype.raise=function(wn){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+wn)},vr.prototype.at=function(wn,qn){qn===void 0&&(qn=!1);var oa=this.source,xa=oa.length;if(wn>=xa)return-1;var Ia=oa.charCodeAt(wn);if(!(qn||this.switchU)||Ia<=55295||Ia>=57344||wn+1>=xa)return Ia;var Ma=oa.charCodeAt(wn+1);return Ma>=56320&&Ma<=57343?(Ia<<10)+Ma-56613888:Ia},vr.prototype.nextIndex=function(wn,qn){qn===void 0&&(qn=!1);var oa=this.source,xa=oa.length;if(wn>=xa)return xa;var Ia=oa.charCodeAt(wn),Ma;return!(qn||this.switchU)||Ia<=55295||Ia>=57344||wn+1>=xa||(Ma=oa.charCodeAt(wn+1))<56320||Ma>57343?wn+1:wn+2},vr.prototype.current=function(wn){return wn===void 0&&(wn=!1),this.at(this.pos,wn)},vr.prototype.lookahead=function(wn){return wn===void 0&&(wn=!1),this.at(this.nextIndex(this.pos,wn),wn)},vr.prototype.advance=function(wn){wn===void 0&&(wn=!1),this.pos=this.nextIndex(this.pos,wn)},vr.prototype.eat=function(wn,qn){return qn===void 0&&(qn=!1),this.current(qn)===wn?(this.advance(qn),!0):!1},vr.prototype.eatChars=function(wn,qn){qn===void 0&&(qn=!1);for(var oa=this.pos,xa=0,Ia=wn;xa<Ia.length;xa+=1){var Ma=Ia[xa],Ya=this.at(oa,qn);if(Ya===-1||Ya!==Ma)return!1;oa=this.nextIndex(oa,qn)}return this.pos=oa,!0},Ka.validateRegExpFlags=function(Fe){for(var wn=Fe.validFlags,qn=Fe.flags,oa=!1,xa=!1,Ia=0;Ia<qn.length;Ia++){var Ma=qn.charAt(Ia);wn.indexOf(Ma)===-1&&this.raise(Fe.start,"Invalid regular expression flag"),qn.indexOf(Ma,Ia+1)>-1&&this.raise(Fe.start,"Duplicate regular expression flag"),Ma==="u"&&(oa=!0),Ma==="v"&&(xa=!0)}this.options.ecmaVersion>=15&&oa&&xa&&this.raise(Fe.start,"Invalid regular expression flag")},Ka.validateRegExpPattern=function(Fe){this.regexp_pattern(Fe),!Fe.switchN&&this.options.ecmaVersion>=9&&Fe.groupNames.length>0&&(Fe.switchN=!0,this.regexp_pattern(Fe))},Ka.regexp_pattern=function(Fe){Fe.pos=0,Fe.lastIntValue=0,Fe.lastStringValue="",Fe.lastAssertionIsQuantifiable=!1,Fe.numCapturingParens=0,Fe.maxBackReference=0,Fe.groupNames.length=0,Fe.backReferenceNames.length=0,this.regexp_disjunction(Fe),Fe.pos!==Fe.source.length&&(Fe.eat(41)&&Fe.raise("Unmatched ')'"),(Fe.eat(93)||Fe.eat(125))&&Fe.raise("Lone quantifier brackets")),Fe.maxBackReference>Fe.numCapturingParens&&Fe.raise("Invalid escape");for(var wn=0,qn=Fe.backReferenceNames;wn<qn.length;wn+=1){var oa=qn[wn];Fe.groupNames.indexOf(oa)===-1&&Fe.raise("Invalid named capture referenced")}},Ka.regexp_disjunction=function(Fe){for(this.regexp_alternative(Fe);Fe.eat(124);)this.regexp_alternative(Fe);this.regexp_eatQuantifier(Fe,!0)&&Fe.raise("Nothing to repeat"),Fe.eat(123)&&Fe.raise("Lone quantifier brackets")},Ka.regexp_alternative=function(Fe){for(;Fe.pos<Fe.source.length&&this.regexp_eatTerm(Fe););},Ka.regexp_eatTerm=function(Fe){return this.regexp_eatAssertion(Fe)?(Fe.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(Fe)&&Fe.switchU&&Fe.raise("Invalid quantifier"),!0):(Fe.switchU?this.regexp_eatAtom(Fe):this.regexp_eatExtendedAtom(Fe))?(this.regexp_eatQuantifier(Fe),!0):!1},Ka.regexp_eatAssertion=function(Fe){var wn=Fe.pos;if(Fe.lastAssertionIsQuantifiable=!1,Fe.eat(94)||Fe.eat(36))return!0;if(Fe.eat(92)){if(Fe.eat(66)||Fe.eat(98))return!0;Fe.pos=wn}if(Fe.eat(40)&&Fe.eat(63)){var qn=!1;if(this.options.ecmaVersion>=9&&(qn=Fe.eat(60)),Fe.eat(61)||Fe.eat(33))return this.regexp_disjunction(Fe),Fe.eat(41)||Fe.raise("Unterminated group"),Fe.lastAssertionIsQuantifiable=!qn,!0}return Fe.pos=wn,!1},Ka.regexp_eatQuantifier=function(Fe,wn){return wn===void 0&&(wn=!1),this.regexp_eatQuantifierPrefix(Fe,wn)?(Fe.eat(63),!0):!1},Ka.regexp_eatQuantifierPrefix=function(Fe,wn){return Fe.eat(42)||Fe.eat(43)||Fe.eat(63)||this.regexp_eatBracedQuantifier(Fe,wn)},Ka.regexp_eatBracedQuantifier=function(Fe,wn){var qn=Fe.pos;if(Fe.eat(123)){var oa=0,xa=-1;if(this.regexp_eatDecimalDigits(Fe)&&(oa=Fe.lastIntValue,Fe.eat(44)&&this.regexp_eatDecimalDigits(Fe)&&(xa=Fe.lastIntValue),Fe.eat(125)))return xa!==-1&&xa<oa&&!wn&&Fe.raise("numbers out of order in {} quantifier"),!0;Fe.switchU&&!wn&&Fe.raise("Incomplete quantifier"),Fe.pos=qn}return!1},Ka.regexp_eatAtom=function(Fe){return this.regexp_eatPatternCharacters(Fe)||Fe.eat(46)||this.regexp_eatReverseSolidusAtomEscape(Fe)||this.regexp_eatCharacterClass(Fe)||this.regexp_eatUncapturingGroup(Fe)||this.regexp_eatCapturingGroup(Fe)},Ka.regexp_eatReverseSolidusAtomEscape=function(Fe){var wn=Fe.pos;if(Fe.eat(92)){if(this.regexp_eatAtomEscape(Fe))return!0;Fe.pos=wn}return!1},Ka.regexp_eatUncapturingGroup=function(Fe){var wn=Fe.pos;if(Fe.eat(40)){if(Fe.eat(63)&&Fe.eat(58)){if(this.regexp_disjunction(Fe),Fe.eat(41))return!0;Fe.raise("Unterminated group")}Fe.pos=wn}return!1},Ka.regexp_eatCapturingGroup=function(Fe){if(Fe.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(Fe):Fe.current()===63&&Fe.raise("Invalid group"),this.regexp_disjunction(Fe),Fe.eat(41))return Fe.numCapturingParens+=1,!0;Fe.raise("Unterminated group")}return!1},Ka.regexp_eatExtendedAtom=function(Fe){return Fe.eat(46)||this.regexp_eatReverseSolidusAtomEscape(Fe)||this.regexp_eatCharacterClass(Fe)||this.regexp_eatUncapturingGroup(Fe)||this.regexp_eatCapturingGroup(Fe)||this.regexp_eatInvalidBracedQuantifier(Fe)||this.regexp_eatExtendedPatternCharacter(Fe)},Ka.regexp_eatInvalidBracedQuantifier=function(Fe){return this.regexp_eatBracedQuantifier(Fe,!0)&&Fe.raise("Nothing to repeat"),!1},Ka.regexp_eatSyntaxCharacter=function(Fe){var wn=Fe.current();return kr(wn)?(Fe.lastIntValue=wn,Fe.advance(),!0):!1};function kr(Fe){return Fe===36||Fe>=40&&Fe<=43||Fe===46||Fe===63||Fe>=91&&Fe<=94||Fe>=123&&Fe<=125}Ka.regexp_eatPatternCharacters=function(Fe){for(var wn=Fe.pos,qn=0;(qn=Fe.current())!==-1&&!kr(qn);)Fe.advance();return Fe.pos!==wn},Ka.regexp_eatExtendedPatternCharacter=function(Fe){var wn=Fe.current();return wn!==-1&&wn!==36&&!(wn>=40&&wn<=43)&&wn!==46&&wn!==63&&wn!==91&&wn!==94&&wn!==124?(Fe.advance(),!0):!1},Ka.regexp_groupSpecifier=function(Fe){if(Fe.eat(63)){if(this.regexp_eatGroupName(Fe)){Fe.groupNames.indexOf(Fe.lastStringValue)!==-1&&Fe.raise("Duplicate capture group name"),Fe.groupNames.push(Fe.lastStringValue);return}Fe.raise("Invalid group")}},Ka.regexp_eatGroupName=function(Fe){if(Fe.lastStringValue="",Fe.eat(60)){if(this.regexp_eatRegExpIdentifierName(Fe)&&Fe.eat(62))return!0;Fe.raise("Invalid capture group name")}return!1},Ka.regexp_eatRegExpIdentifierName=function(Fe){if(Fe.lastStringValue="",this.regexp_eatRegExpIdentifierStart(Fe)){for(Fe.lastStringValue+=kn(Fe.lastIntValue);this.regexp_eatRegExpIdentifierPart(Fe);)Fe.lastStringValue+=kn(Fe.lastIntValue);return!0}return!1},Ka.regexp_eatRegExpIdentifierStart=function(Fe){var wn=Fe.pos,qn=this.options.ecmaVersion>=11,oa=Fe.current(qn);return Fe.advance(qn),oa===92&&this.regexp_eatRegExpUnicodeEscapeSequence(Fe,qn)&&(oa=Fe.lastIntValue),Sr(oa)?(Fe.lastIntValue=oa,!0):(Fe.pos=wn,!1)};function Sr(Fe){return ue(Fe,!0)||Fe===36||Fe===95}Ka.regexp_eatRegExpIdentifierPart=function(Fe){var wn=Fe.pos,qn=this.options.ecmaVersion>=11,oa=Fe.current(qn);return Fe.advance(qn),oa===92&&this.regexp_eatRegExpUnicodeEscapeSequence(Fe,qn)&&(oa=Fe.lastIntValue),_r(oa)?(Fe.lastIntValue=oa,!0):(Fe.pos=wn,!1)};function _r(Fe){return le(Fe,!0)||Fe===36||Fe===95||Fe===8204||Fe===8205}Ka.regexp_eatAtomEscape=function(Fe){return this.regexp_eatBackReference(Fe)||this.regexp_eatCharacterClassEscape(Fe)||this.regexp_eatCharacterEscape(Fe)||Fe.switchN&&this.regexp_eatKGroupName(Fe)?!0:(Fe.switchU&&(Fe.current()===99&&Fe.raise("Invalid unicode escape"),Fe.raise("Invalid escape")),!1)},Ka.regexp_eatBackReference=function(Fe){var wn=Fe.pos;if(this.regexp_eatDecimalEscape(Fe)){var qn=Fe.lastIntValue;if(Fe.switchU)return qn>Fe.maxBackReference&&(Fe.maxBackReference=qn),!0;if(qn<=Fe.numCapturingParens)return!0;Fe.pos=wn}return!1},Ka.regexp_eatKGroupName=function(Fe){if(Fe.eat(107)){if(this.regexp_eatGroupName(Fe))return Fe.backReferenceNames.push(Fe.lastStringValue),!0;Fe.raise("Invalid named reference")}return!1},Ka.regexp_eatCharacterEscape=function(Fe){return this.regexp_eatControlEscape(Fe)||this.regexp_eatCControlLetter(Fe)||this.regexp_eatZero(Fe)||this.regexp_eatHexEscapeSequence(Fe)||this.regexp_eatRegExpUnicodeEscapeSequence(Fe,!1)||!Fe.switchU&&this.regexp_eatLegacyOctalEscapeSequence(Fe)||this.regexp_eatIdentityEscape(Fe)},Ka.regexp_eatCControlLetter=function(Fe){var wn=Fe.pos;if(Fe.eat(99)){if(this.regexp_eatControlLetter(Fe))return!0;Fe.pos=wn}return!1},Ka.regexp_eatZero=function(Fe){return Fe.current()===48&&!ja(Fe.lookahead())?(Fe.lastIntValue=0,Fe.advance(),!0):!1},Ka.regexp_eatControlEscape=function(Fe){var wn=Fe.current();return wn===116?(Fe.lastIntValue=9,Fe.advance(),!0):wn===110?(Fe.lastIntValue=10,Fe.advance(),!0):wn===118?(Fe.lastIntValue=11,Fe.advance(),!0):wn===102?(Fe.lastIntValue=12,Fe.advance(),!0):wn===114?(Fe.lastIntValue=13,Fe.advance(),!0):!1},Ka.regexp_eatControlLetter=function(Fe){var wn=Fe.current();return Cr(wn)?(Fe.lastIntValue=wn%32,Fe.advance(),!0):!1};function Cr(Fe){return Fe>=65&&Fe<=90||Fe>=97&&Fe<=122}Ka.regexp_eatRegExpUnicodeEscapeSequence=function(Fe,wn){wn===void 0&&(wn=!1);var qn=Fe.pos,oa=wn||Fe.switchU;if(Fe.eat(117)){if(this.regexp_eatFixedHexDigits(Fe,4)){var xa=Fe.lastIntValue;if(oa&&xa>=55296&&xa<=56319){var Ia=Fe.pos;if(Fe.eat(92)&&Fe.eat(117)&&this.regexp_eatFixedHexDigits(Fe,4)){var Ma=Fe.lastIntValue;if(Ma>=56320&&Ma<=57343)return Fe.lastIntValue=(xa-55296)*1024+(Ma-56320)+65536,!0}Fe.pos=Ia,Fe.lastIntValue=xa}return!0}if(oa&&Fe.eat(123)&&this.regexp_eatHexDigits(Fe)&&Fe.eat(125)&&Dr(Fe.lastIntValue))return!0;oa&&Fe.raise("Invalid unicode escape"),Fe.pos=qn}return!1};function Dr(Fe){return Fe>=0&&Fe<=1114111}Ka.regexp_eatIdentityEscape=function(Fe){if(Fe.switchU)return this.regexp_eatSyntaxCharacter(Fe)?!0:Fe.eat(47)?(Fe.lastIntValue=47,!0):!1;var wn=Fe.current();return wn!==99&&(!Fe.switchN||wn!==107)?(Fe.lastIntValue=wn,Fe.advance(),!0):!1},Ka.regexp_eatDecimalEscape=function(Fe){Fe.lastIntValue=0;var wn=Fe.current();if(wn>=49&&wn<=57){do Fe.lastIntValue=10*Fe.lastIntValue+(wn-48),Fe.advance();while((wn=Fe.current())>=48&&wn<=57);return!0}return!1};var Or=0,fa=1,ka=2;Ka.regexp_eatCharacterClassEscape=function(Fe){var wn=Fe.current();if(ya(wn))return Fe.lastIntValue=-1,Fe.advance(),fa;var qn=!1;if(Fe.switchU&&this.options.ecmaVersion>=9&&((qn=wn===80)||wn===112)){Fe.lastIntValue=-1,Fe.advance();var oa;if(Fe.eat(123)&&(oa=this.regexp_eatUnicodePropertyValueExpression(Fe))&&Fe.eat(125))return qn&&oa===ka&&Fe.raise("Invalid property name"),oa;Fe.raise("Invalid property name")}return Or};function ya(Fe){return Fe===100||Fe===68||Fe===115||Fe===83||Fe===119||Fe===87}Ka.regexp_eatUnicodePropertyValueExpression=function(Fe){var wn=Fe.pos;if(this.regexp_eatUnicodePropertyName(Fe)&&Fe.eat(61)){var qn=Fe.lastStringValue;if(this.regexp_eatUnicodePropertyValue(Fe)){var oa=Fe.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(Fe,qn,oa),fa}}if(Fe.pos=wn,this.regexp_eatLoneUnicodePropertyNameOrValue(Fe)){var xa=Fe.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(Fe,xa)}return Or},Ka.regexp_validateUnicodePropertyNameAndValue=function(Fe,wn,qn){Mn(Fe.unicodeProperties.nonBinary,wn)||Fe.raise("Invalid property name"),Fe.unicodeProperties.nonBinary[wn].test(qn)||Fe.raise("Invalid property value")},Ka.regexp_validateUnicodePropertyNameOrValue=function(Fe,wn){if(Fe.unicodeProperties.binary.test(wn))return fa;if(Fe.switchV&&Fe.unicodeProperties.binaryOfStrings.test(wn))return ka;Fe.raise("Invalid property name")},Ka.regexp_eatUnicodePropertyName=function(Fe){var wn=0;for(Fe.lastStringValue="";Ta(wn=Fe.current());)Fe.lastStringValue+=kn(wn),Fe.advance();return Fe.lastStringValue!==""};function Ta(Fe){return Cr(Fe)||Fe===95}Ka.regexp_eatUnicodePropertyValue=function(Fe){var wn=0;for(Fe.lastStringValue="";Ba(wn=Fe.current());)Fe.lastStringValue+=kn(wn),Fe.advance();return Fe.lastStringValue!==""};function Ba(Fe){return Ta(Fe)||ja(Fe)}Ka.regexp_eatLoneUnicodePropertyNameOrValue=function(Fe){return this.regexp_eatUnicodePropertyValue(Fe)},Ka.regexp_eatCharacterClass=function(Fe){if(Fe.eat(91)){var wn=Fe.eat(94),qn=this.regexp_classContents(Fe);return Fe.eat(93)||Fe.raise("Unterminated character class"),wn&&qn===ka&&Fe.raise("Negated character class may contain strings"),!0}return!1},Ka.regexp_classContents=function(Fe){return Fe.current()===93?fa:Fe.switchV?this.regexp_classSetExpression(Fe):(this.regexp_nonEmptyClassRanges(Fe),fa)},Ka.regexp_nonEmptyClassRanges=function(Fe){for(;this.regexp_eatClassAtom(Fe);){var wn=Fe.lastIntValue;if(Fe.eat(45)&&this.regexp_eatClassAtom(Fe)){var qn=Fe.lastIntValue;Fe.switchU&&(wn===-1||qn===-1)&&Fe.raise("Invalid character class"),wn!==-1&&qn!==-1&&wn>qn&&Fe.raise("Range out of order in character class")}}},Ka.regexp_eatClassAtom=function(Fe){var wn=Fe.pos;if(Fe.eat(92)){if(this.regexp_eatClassEscape(Fe))return!0;if(Fe.switchU){var qn=Fe.current();(qn===99||ar(qn))&&Fe.raise("Invalid class escape"),Fe.raise("Invalid escape")}Fe.pos=wn}var oa=Fe.current();return oa!==93?(Fe.lastIntValue=oa,Fe.advance(),!0):!1},Ka.regexp_eatClassEscape=function(Fe){var wn=Fe.pos;if(Fe.eat(98))return Fe.lastIntValue=8,!0;if(Fe.switchU&&Fe.eat(45))return Fe.lastIntValue=45,!0;if(!Fe.switchU&&Fe.eat(99)){if(this.regexp_eatClassControlLetter(Fe))return!0;Fe.pos=wn}return this.regexp_eatCharacterClassEscape(Fe)||this.regexp_eatCharacterEscape(Fe)},Ka.regexp_classSetExpression=function(Fe){var wn=fa,qn;if(!this.regexp_eatClassSetRange(Fe))if(qn=this.regexp_eatClassSetOperand(Fe)){qn===ka&&(wn=ka);for(var oa=Fe.pos;Fe.eatChars([38,38]);){if(Fe.current()!==38&&(qn=this.regexp_eatClassSetOperand(Fe))){qn!==ka&&(wn=fa);continue}Fe.raise("Invalid character in character class")}if(oa!==Fe.pos)return wn;for(;Fe.eatChars([45,45]);)this.regexp_eatClassSetOperand(Fe)||Fe.raise("Invalid character in character class");if(oa!==Fe.pos)return wn}else Fe.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(Fe)){if(qn=this.regexp_eatClassSetOperand(Fe),!qn)return wn;qn===ka&&(wn=ka)}},Ka.regexp_eatClassSetRange=function(Fe){var wn=Fe.pos;if(this.regexp_eatClassSetCharacter(Fe)){var qn=Fe.lastIntValue;if(Fe.eat(45)&&this.regexp_eatClassSetCharacter(Fe)){var oa=Fe.lastIntValue;return qn!==-1&&oa!==-1&&qn>oa&&Fe.raise("Range out of order in character class"),!0}Fe.pos=wn}return!1},Ka.regexp_eatClassSetOperand=function(Fe){return this.regexp_eatClassSetCharacter(Fe)?fa:this.regexp_eatClassStringDisjunction(Fe)||this.regexp_eatNestedClass(Fe)},Ka.regexp_eatNestedClass=function(Fe){var wn=Fe.pos;if(Fe.eat(91)){var qn=Fe.eat(94),oa=this.regexp_classContents(Fe);if(Fe.eat(93))return qn&&oa===ka&&Fe.raise("Negated character class may contain strings"),oa;Fe.pos=wn}if(Fe.eat(92)){var xa=this.regexp_eatCharacterClassEscape(Fe);if(xa)return xa;Fe.pos=wn}return null},Ka.regexp_eatClassStringDisjunction=function(Fe){var wn=Fe.pos;if(Fe.eatChars([92,113])){if(Fe.eat(123)){var qn=this.regexp_classStringDisjunctionContents(Fe);if(Fe.eat(125))return qn}else Fe.raise("Invalid escape");Fe.pos=wn}return null},Ka.regexp_classStringDisjunctionContents=function(Fe){for(var wn=this.regexp_classString(Fe);Fe.eat(124);)this.regexp_classString(Fe)===ka&&(wn=ka);return wn},Ka.regexp_classString=function(Fe){for(var wn=0;this.regexp_eatClassSetCharacter(Fe);)wn++;return wn===1?fa:ka},Ka.regexp_eatClassSetCharacter=function(Fe){var wn=Fe.pos;if(Fe.eat(92))return this.regexp_eatCharacterEscape(Fe)||this.regexp_eatClassSetReservedPunctuator(Fe)?!0:Fe.eat(98)?(Fe.lastIntValue=8,!0):(Fe.pos=wn,!1);var qn=Fe.current();return qn<0||qn===Fe.lookahead()&&Ea(qn)||La(qn)?!1:(Fe.advance(),Fe.lastIntValue=qn,!0)};function Ea(Fe){return Fe===33||Fe>=35&&Fe<=38||Fe>=42&&Fe<=44||Fe===46||Fe>=58&&Fe<=64||Fe===94||Fe===96||Fe===126}function La(Fe){return Fe===40||Fe===41||Fe===45||Fe===47||Fe>=91&&Fe<=93||Fe>=123&&Fe<=125}Ka.regexp_eatClassSetReservedPunctuator=function(Fe){var wn=Fe.current();return Ga(wn)?(Fe.lastIntValue=wn,Fe.advance(),!0):!1};function Ga(Fe){return Fe===33||Fe===35||Fe===37||Fe===38||Fe===44||Fe===45||Fe>=58&&Fe<=62||Fe===64||Fe===96||Fe===126}Ka.regexp_eatClassControlLetter=function(Fe){var wn=Fe.current();return ja(wn)||wn===95?(Fe.lastIntValue=wn%32,Fe.advance(),!0):!1},Ka.regexp_eatHexEscapeSequence=function(Fe){var wn=Fe.pos;if(Fe.eat(120)){if(this.regexp_eatFixedHexDigits(Fe,2))return!0;Fe.switchU&&Fe.raise("Invalid escape"),Fe.pos=wn}return!1},Ka.regexp_eatDecimalDigits=function(Fe){var wn=Fe.pos,qn=0;for(Fe.lastIntValue=0;ja(qn=Fe.current());)Fe.lastIntValue=10*Fe.lastIntValue+(qn-48),Fe.advance();return Fe.pos!==wn};function ja(Fe){return Fe>=48&&Fe<=57}Ka.regexp_eatHexDigits=function(Fe){var wn=Fe.pos,qn=0;for(Fe.lastIntValue=0;Ha(qn=Fe.current());)Fe.lastIntValue=16*Fe.lastIntValue+qa(qn),Fe.advance();return Fe.pos!==wn};function Ha(Fe){return Fe>=48&&Fe<=57||Fe>=65&&Fe<=70||Fe>=97&&Fe<=102}function qa(Fe){return Fe>=65&&Fe<=70?10+(Fe-65):Fe>=97&&Fe<=102?10+(Fe-97):Fe-48}Ka.regexp_eatLegacyOctalEscapeSequence=function(Fe){if(this.regexp_eatOctalDigit(Fe)){var wn=Fe.lastIntValue;if(this.regexp_eatOctalDigit(Fe)){var qn=Fe.lastIntValue;wn<=3&&this.regexp_eatOctalDigit(Fe)?Fe.lastIntValue=wn*64+qn*8+Fe.lastIntValue:Fe.lastIntValue=wn*8+qn}else Fe.lastIntValue=wn;return!0}return!1},Ka.regexp_eatOctalDigit=function(Fe){var wn=Fe.current();return ar(wn)?(Fe.lastIntValue=wn-48,Fe.advance(),!0):(Fe.lastIntValue=0,!1)};function ar(Fe){return Fe>=48&&Fe<=55}Ka.regexp_eatFixedHexDigits=function(Fe,wn){var qn=Fe.pos;Fe.lastIntValue=0;for(var oa=0;oa<wn;++oa){var xa=Fe.current();if(!Ha(xa))return Fe.pos=qn,!1;Fe.lastIntValue=16*Fe.lastIntValue+qa(xa),Fe.advance()}return!0};var dr=function(wn){this.type=wn.type,this.value=wn.value,this.start=wn.start,this.end=wn.end,wn.options.locations&&(this.loc=new Tn(wn,wn.startLoc,wn.endLoc)),wn.options.ranges&&(this.range=[wn.start,wn.end])},nr=ua.prototype;nr.next=function(Fe){!Fe&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new dr(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},nr.getToken=function(){return this.next(),new dr(this)},typeof Symbol<"u"&&(nr[Symbol.iterator]=function(){var Fe=this;return{next:function(){var wn=Fe.getToken();return{done:wn.type===xe.eof,value:wn}}}}),nr.nextToken=function(){var Fe=this.curContext();if((!Fe||!Fe.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(xe.eof);if(Fe.override)return Fe.override(this);this.readToken(this.fullCharCodeAtPos())},nr.readToken=function(Fe){return ue(Fe,this.options.ecmaVersion>=6)||Fe===92?this.readWord():this.getTokenFromCode(Fe)},nr.fullCharCodeAtPos=function(){var Fe=this.input.charCodeAt(this.pos);if(Fe<=55295||Fe>=56320)return Fe;var wn=this.input.charCodeAt(this.pos+1);return wn<=56319||wn>=57344?Fe:(Fe<<10)+wn-56613888},nr.skipBlockComment=function(){var Fe=this.options.onComment&&this.curPosition(),wn=this.pos,qn=this.input.indexOf("*/",this.pos+=2);if(qn===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=qn+2,this.options.locations)for(var oa=void 0,xa=wn;(oa=Et(this.input,xa,this.pos))>-1;)++this.curLine,xa=this.lineStart=oa;this.options.onComment&&this.options.onComment(!0,this.input.slice(wn+2,qn),wn,this.pos,Fe,this.curPosition())},nr.skipLineComment=function(Fe){for(var wn=this.pos,qn=this.options.onComment&&this.curPosition(),oa=this.input.charCodeAt(this.pos+=Fe);this.pos<this.input.length&&!qe(oa);)oa=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(wn+Fe,this.pos),wn,this.pos,qn,this.curPosition())},nr.skipSpace=function(){e:for(;this.pos<this.input.length;){var Fe=this.input.charCodeAt(this.pos);switch(Fe){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(Fe>8&&Fe<14||Fe>=5760&&_n.test(String.fromCharCode(Fe)))++this.pos;else break e}}},nr.finishToken=function(Fe,wn){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var qn=this.type;this.type=Fe,this.value=wn,this.updateContext(qn)},nr.readToken_dot=function(){var Fe=this.input.charCodeAt(this.pos+1);if(Fe>=48&&Fe<=57)return this.readNumber(!0);var wn=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&Fe===46&&wn===46?(this.pos+=3,this.finishToken(xe.ellipsis)):(++this.pos,this.finishToken(xe.dot))},nr.readToken_slash=function(){var Fe=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):Fe===61?this.finishOp(xe.assign,2):this.finishOp(xe.slash,1)},nr.readToken_mult_modulo_exp=function(Fe){var wn=this.input.charCodeAt(this.pos+1),qn=1,oa=Fe===42?xe.star:xe.modulo;return this.options.ecmaVersion>=7&&Fe===42&&wn===42&&(++qn,oa=xe.starstar,wn=this.input.charCodeAt(this.pos+2)),wn===61?this.finishOp(xe.assign,qn+1):this.finishOp(oa,qn)},nr.readToken_pipe_amp=function(Fe){var wn=this.input.charCodeAt(this.pos+1);if(wn===Fe){if(this.options.ecmaVersion>=12){var qn=this.input.charCodeAt(this.pos+2);if(qn===61)return this.finishOp(xe.assign,3)}return this.finishOp(Fe===124?xe.logicalOR:xe.logicalAND,2)}return wn===61?this.finishOp(xe.assign,2):this.finishOp(Fe===124?xe.bitwiseOR:xe.bitwiseAND,1)},nr.readToken_caret=function(){var Fe=this.input.charCodeAt(this.pos+1);return Fe===61?this.finishOp(xe.assign,2):this.finishOp(xe.bitwiseXOR,1)},nr.readToken_plus_min=function(Fe){var wn=this.input.charCodeAt(this.pos+1);return wn===Fe?wn===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Ie.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(xe.incDec,2):wn===61?this.finishOp(xe.assign,2):this.finishOp(xe.plusMin,1)},nr.readToken_lt_gt=function(Fe){var wn=this.input.charCodeAt(this.pos+1),qn=1;return wn===Fe?(qn=Fe===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+qn)===61?this.finishOp(xe.assign,qn+1):this.finishOp(xe.bitShift,qn)):wn===33&&Fe===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(wn===61&&(qn=2),this.finishOp(xe.relational,qn))},nr.readToken_eq_excl=function(Fe){var wn=this.input.charCodeAt(this.pos+1);return wn===61?this.finishOp(xe.equality,this.input.charCodeAt(this.pos+2)===61?3:2):Fe===61&&wn===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(xe.arrow)):this.finishOp(Fe===61?xe.eq:xe.prefix,1)},nr.readToken_question=function(){var Fe=this.options.ecmaVersion;if(Fe>=11){var wn=this.input.charCodeAt(this.pos+1);if(wn===46){var qn=this.input.charCodeAt(this.pos+2);if(qn<48||qn>57)return this.finishOp(xe.questionDot,2)}if(wn===63){if(Fe>=12){var oa=this.input.charCodeAt(this.pos+2);if(oa===61)return this.finishOp(xe.assign,3)}return this.finishOp(xe.coalesce,2)}}return this.finishOp(xe.question,1)},nr.readToken_numberSign=function(){var Fe=this.options.ecmaVersion,wn=35;if(Fe>=13&&(++this.pos,wn=this.fullCharCodeAtPos(),ue(wn,!0)||wn===92))return this.finishToken(xe.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+kn(wn)+"'")},nr.getTokenFromCode=function(Fe){switch(Fe){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(xe.parenL);case 41:return++this.pos,this.finishToken(xe.parenR);case 59:return++this.pos,this.finishToken(xe.semi);case 44:return++this.pos,this.finishToken(xe.comma);case 91:return++this.pos,this.finishToken(xe.bracketL);case 93:return++this.pos,this.finishToken(xe.bracketR);case 123:return++this.pos,this.finishToken(xe.braceL);case 125:return++this.pos,this.finishToken(xe.braceR);case 58:return++this.pos,this.finishToken(xe.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(xe.backQuote);case 48:var wn=this.input.charCodeAt(this.pos+1);if(wn===120||wn===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(wn===111||wn===79)return this.readRadixNumber(8);if(wn===98||wn===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(Fe);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(Fe);case 124:case 38:return this.readToken_pipe_amp(Fe);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(Fe);case 60:case 62:return this.readToken_lt_gt(Fe);case 61:case 33:return this.readToken_eq_excl(Fe);case 63:return this.readToken_question();case 126:return this.finishOp(xe.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+kn(Fe)+"'")},nr.finishOp=function(Fe,wn){var qn=this.input.slice(this.pos,this.pos+wn);return this.pos+=wn,this.finishToken(Fe,qn)},nr.readRegexp=function(){for(var Fe,wn,qn=this.pos;;){this.pos>=this.input.length&&this.raise(qn,"Unterminated regular expression");var oa=this.input.charAt(this.pos);if(Ie.test(oa)&&this.raise(qn,"Unterminated regular expression"),Fe)Fe=!1;else{if(oa==="[")wn=!0;else if(oa==="]"&&wn)wn=!1;else if(oa==="/"&&!wn)break;Fe=oa==="\\"}++this.pos}var xa=this.input.slice(qn,this.pos);++this.pos;var Ia=this.pos,Ma=this.readWord1();this.containsEsc&&this.unexpected(Ia);var Ya=this.regexpState||(this.regexpState=new vr(this));Ya.reset(qn,xa,Ma),this.validateRegExpFlags(Ya),this.validateRegExpPattern(Ya);var Za=null;try{Za=new RegExp(xa,Ma)}catch{}return this.finishToken(xe.regexp,{pattern:xa,flags:Ma,value:Za})},nr.readInt=function(Fe,wn,qn){for(var oa=this.options.ecmaVersion>=12&&wn===void 0,xa=qn&&this.input.charCodeAt(this.pos)===48,Ia=this.pos,Ma=0,Ya=0,Za=0,pr=wn??1/0;Za<pr;++Za,++this.pos){var hr=this.input.charCodeAt(this.pos),Pr=void 0;if(oa&&hr===95){xa&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),Ya===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),Za===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),Ya=hr;continue}if(hr>=97?Pr=hr-97+10:hr>=65?Pr=hr-65+10:hr>=48&&hr<=57?Pr=hr-48:Pr=1/0,Pr>=Fe)break;Ya=hr,Ma=Ma*Fe+Pr}return oa&&Ya===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===Ia||wn!=null&&this.pos-Ia!==wn?null:Ma};function gr(Fe,wn){return wn?parseInt(Fe,8):parseFloat(Fe.replace(/_/g,""))}function wr(Fe){return typeof BigInt!="function"?null:BigInt(Fe.replace(/_/g,""))}nr.readRadixNumber=function(Fe){var wn=this.pos;this.pos+=2;var qn=this.readInt(Fe);return qn==null&&this.raise(this.start+2,"Expected number in radix "+Fe),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(qn=wr(this.input.slice(wn,this.pos)),++this.pos):ue(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(xe.num,qn)},nr.readNumber=function(Fe){var wn=this.pos;!Fe&&this.readInt(10,void 0,!0)===null&&this.raise(wn,"Invalid number");var qn=this.pos-wn>=2&&this.input.charCodeAt(wn)===48;qn&&this.strict&&this.raise(wn,"Invalid number");var oa=this.input.charCodeAt(this.pos);if(!qn&&!Fe&&this.options.ecmaVersion>=11&&oa===110){var xa=wr(this.input.slice(wn,this.pos));return++this.pos,ue(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(xe.num,xa)}qn&&/[89]/.test(this.input.slice(wn,this.pos))&&(qn=!1),oa===46&&!qn&&(++this.pos,this.readInt(10),oa=this.input.charCodeAt(this.pos)),(oa===69||oa===101)&&!qn&&(oa=this.input.charCodeAt(++this.pos),(oa===43||oa===45)&&++this.pos,this.readInt(10)===null&&this.raise(wn,"Invalid number")),ue(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var Ia=gr(this.input.slice(wn,this.pos),qn);return this.finishToken(xe.num,Ia)},nr.readCodePoint=function(){var Fe=this.input.charCodeAt(this.pos),wn;if(Fe===123){this.options.ecmaVersion<6&&this.unexpected();var qn=++this.pos;wn=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,wn>1114111&&this.invalidStringToken(qn,"Code point out of bounds")}else wn=this.readHexChar(4);return wn},nr.readString=function(Fe){for(var wn="",qn=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var oa=this.input.charCodeAt(this.pos);if(oa===Fe)break;oa===92?(wn+=this.input.slice(qn,this.pos),wn+=this.readEscapedChar(!1),qn=this.pos):oa===8232||oa===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(qe(oa)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return wn+=this.input.slice(qn,this.pos++),this.finishToken(xe.string,wn)};var xr={};nr.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(Fe){if(Fe===xr)this.readInvalidTemplateToken();else throw Fe}this.inTemplateElement=!1},nr.invalidStringToken=function(Fe,wn){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw xr;this.raise(Fe,wn)},nr.readTmplToken=function(){for(var Fe="",wn=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var qn=this.input.charCodeAt(this.pos);if(qn===96||qn===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===xe.template||this.type===xe.invalidTemplate)?qn===36?(this.pos+=2,this.finishToken(xe.dollarBraceL)):(++this.pos,this.finishToken(xe.backQuote)):(Fe+=this.input.slice(wn,this.pos),this.finishToken(xe.template,Fe));if(qn===92)Fe+=this.input.slice(wn,this.pos),Fe+=this.readEscapedChar(!0),wn=this.pos;else if(qe(qn)){switch(Fe+=this.input.slice(wn,this.pos),++this.pos,qn){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:Fe+=`
`;break;default:Fe+=String.fromCharCode(qn);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),wn=this.pos}else++this.pos}},nr.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(xe.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},nr.readEscapedChar=function(Fe){var wn=this.input.charCodeAt(++this.pos);switch(++this.pos,wn){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return kn(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),Fe){var qn=this.pos-1;this.invalidStringToken(qn,"Invalid escape sequence in template string")}default:if(wn>=48&&wn<=55){var oa=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],xa=parseInt(oa,8);return xa>255&&(oa=oa.slice(0,-1),xa=parseInt(oa,8)),this.pos+=oa.length-1,wn=this.input.charCodeAt(this.pos),(oa!=="0"||wn===56||wn===57)&&(this.strict||Fe)&&this.invalidStringToken(this.pos-1-oa.length,Fe?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(xa)}return qe(wn)?"":String.fromCharCode(wn)}},nr.readHexChar=function(Fe){var wn=this.pos,qn=this.readInt(16,Fe);return qn===null&&this.invalidStringToken(wn,"Bad character escape sequence"),qn},nr.readWord1=function(){this.containsEsc=!1;for(var Fe="",wn=!0,qn=this.pos,oa=this.options.ecmaVersion>=6;this.pos<this.input.length;){var xa=this.fullCharCodeAtPos();if(le(xa,oa))this.pos+=xa<=65535?1:2;else if(xa===92){this.containsEsc=!0,Fe+=this.input.slice(qn,this.pos);var Ia=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var Ma=this.readCodePoint();(wn?ue:le)(Ma,oa)||this.invalidStringToken(Ia,"Invalid Unicode escape"),Fe+=kn(Ma),qn=this.pos}else break;wn=!1}return Fe+this.input.slice(qn,this.pos)},nr.readWord=function(){var Fe=this.readWord1(),wn=xe.name;return this.keywords.test(Fe)&&(wn=Ne[Fe]),this.finishToken(wn,Fe)};var Er="8.10.0";ua.acorn={Parser:ua,version:Er,defaultOptions:la,Position:Fn,SourceLocation:Tn,getLineInfo:Hn,Node:ea,TokenType:de,tokTypes:xe,keywordTypes:Ne,TokContext:Jn,tokContexts:Qn,isIdentifierChar:le,isIdentifierStart:ue,Token:dr,isNewLine:qe,lineBreak:Ie,lineBreakG:ze,nonASCIIwhitespace:_n};function Mr(Fe,wn){return ua.parse(Fe,wn)}function Rr(Fe,wn,qn){return ua.parseExpressionAt(Fe,wn,qn)}function Ar(Fe,wn){return ua.tokenizer(Fe,wn)}r.Node=ea,r.Parser=ua,r.Position=Fn,r.SourceLocation=Tn,r.TokContext=Jn,r.Token=dr,r.TokenType=de,r.defaultOptions=la,r.getLineInfo=Hn,r.isIdentifierChar=le,r.isIdentifierStart=ue,r.isNewLine=qe,r.keywordTypes=Ne,r.lineBreak=Ie,r.lineBreakG=ze,r.nonASCIIwhitespace=_n,r.parse=Mr,r.parseExpressionAt=Rr,r.tokContexts=Qn,r.tokTypes=xe,r.tokenizer=Ar,r.version=Er})}(acorn,acorn.exports)),acorn.exports}/*!
 * Paper.js v0.12.18 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jrg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Jul 17 14:57:24 2024 +0200
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jrg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(e){(function(n,r){n=n||require$$2;var g=n.window,y=n.document,k=new function(){var pe=/^(statics|enumerable|beans|preserve)$/,Oe=[],Ve=Oe.slice,Ue=Object.create,Pt=Object.getOwnPropertyDescriptor,Lt=Object.defineProperty,bn=Oe.forEach||function(An,zn){for(var Jn=0,Qn=this.length;Jn<Qn;Jn++)An.call(zn,this[Jn],Jn,this)},jt=function(An,zn){for(var Jn in this)this.hasOwnProperty(Jn)&&An.call(zn,this[Jn],Jn,this)},Cn=Object.assign||function(An){for(var zn=1,Jn=arguments.length;zn<Jn;zn++){var Qn=arguments[zn];for(var ta in Qn)Qn.hasOwnProperty(ta)&&(An[ta]=Qn[ta])}return An},xn=function(An,zn,Jn){if(An){var Qn=Pt(An,"length");(Qn&&typeof Qn.value=="number"?bn:jt).call(An,zn,Jn=Jn||An)}return Jn};function In(An,zn,Jn,Qn,ta){var Pn={};function Un(ea,pa){pa=pa||(pa=Pt(zn,ea))&&(pa.get?pa:pa.value),typeof pa=="string"&&pa[0]==="#"&&(pa=An[pa.substring(1)]||pa);var ha=typeof pa=="function",ba=pa,Oa=ta||ha&&!pa.base?pa&&pa.get?ea in An:An[ea]:null,va;(!ta||!Oa)&&(ha&&Oa&&(pa.base=Oa),ha&&Qn!==!1&&(va=ea.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(Pn[va[3].toLowerCase()+va[4]]=va[2]),(!ba||ha||!ba.get||typeof ba.get!="function"||!Ln.isPlainObject(ba))&&(ba={value:ba,writable:!0}),(Pt(An,ea)||{configurable:!0}).configurable&&(ba.configurable=!0,ba.enumerable=Jn??!va),Lt(An,ea,ba))}if(zn){for(var On in zn)zn.hasOwnProperty(On)&&!pe.test(On)&&Un(On);for(var On in Pn){var Rn=Pn[On],Yn=An["set"+Rn],na=An["get"+Rn]||Yn&&An["is"+Rn];na&&(Qn===!0||na.length===0)&&Un(On,{get:na,set:Yn})}}return An}function Ln(){for(var An=0,zn=arguments.length;An<zn;An++){var Jn=arguments[An];Jn&&Cn(this,Jn)}return this}return In(Ln,{inject:function(An){if(An){var zn=An.statics===!0?An:An.statics,Jn=An.beans,Qn=An.preserve;zn!==An&&In(this.prototype,An,An.enumerable,Jn,Qn),In(this,zn,null,Jn,Qn)}for(var ta=1,Pn=arguments.length;ta<Pn;ta++)this.inject(arguments[ta]);return this},extend:function(){for(var An=this,zn,Jn,Qn=0,ta,Pn=arguments.length;Qn<Pn&&!(zn&&Jn);Qn++)ta=arguments[Qn],zn=zn||ta.initialize,Jn=Jn||ta.prototype;return zn=zn||function(){An.apply(this,arguments)},Jn=zn.prototype=Jn||Ue(this.prototype),Lt(Jn,"constructor",{value:zn,writable:!0,configurable:!0}),In(zn,this),arguments.length&&this.inject.apply(zn,arguments),zn.base=An,zn}}).inject({enumerable:!1,initialize:Ln,set:Ln,inject:function(){for(var An=0,zn=arguments.length;An<zn;An++){var Jn=arguments[An];Jn&&In(this,Jn,Jn.enumerable,Jn.beans,Jn.preserve)}return this},extend:function(){var An=Ue(this);return An.inject.apply(An,arguments)},each:function(An,zn){return xn(this,An,zn)},clone:function(){return new this.constructor(this)},statics:{set:Cn,each:xn,create:Ue,define:Lt,describe:Pt,clone:function(An){return Cn(new An.constructor,An)},isPlainObject:function(An){var zn=An!=null&&An.constructor;return zn&&(zn===Object||zn===Ln||zn.name==="Object")},pick:function(An,zn){return An!==r?An:zn},slice:function(An,zn,Jn){return Ve.call(An,zn,Jn)}}})};e.exports=k,k.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+k.each(this,function(pe,Oe){if(!/^_/.test(Oe)){var Ve=typeof pe;this.push(Oe+": "+(Ve==="number"?j.instance.number(pe):Ve==="string"?"'"+pe+"'":pe))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(pe){return k.importJSON(pe,this)},exportJSON:function(pe){return k.exportJSON(this,pe)},toJSON:function(){return k.serialize(this)},set:function(pe,Oe){return pe&&k.filter(this,pe,Oe,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function pe(){var Oe=pe.base.apply(this,arguments),Ve=Oe.prototype._class;return Ve&&!k.exports[Ve]&&(k.exports[Ve]=Oe),Oe},equals:function(pe,Oe){if(pe===Oe)return!0;if(pe&&pe.equals)return pe.equals(Oe);if(Oe&&Oe.equals)return Oe.equals(pe);if(pe&&Oe&&typeof pe=="object"&&typeof Oe=="object"){if(Array.isArray(pe)&&Array.isArray(Oe)){var Ve=pe.length;if(Ve!==Oe.length)return!1;for(;Ve--;)if(!k.equals(pe[Ve],Oe[Ve]))return!1}else{var Ue=Object.keys(pe),Ve=Ue.length;if(Ve!==Object.keys(Oe).length)return!1;for(;Ve--;){var Pt=Ue[Ve];if(!(Oe.hasOwnProperty(Pt)&&k.equals(pe[Pt],Oe[Pt])))return!1}}return!0}return!1},read:function(pe,Oe,Ve,Ue){if(this===k){var Pt=this.peek(pe,Oe);return pe.__index++,Pt}var Lt=this.prototype,bn=Lt._readIndex,jt=Oe||bn&&pe.__index||0,Cn=pe.length,xn=pe[jt];if(Ue=Ue||Cn-jt,xn instanceof this||Ve&&Ve.readNull&&xn==null&&Ue<=1)return bn&&(pe.__index=jt+1),xn&&Ve&&Ve.clone?xn.clone():xn;if(xn=k.create(Lt),bn&&(xn.__read=!0),xn=xn.initialize.apply(xn,jt>0||jt+Ue<Cn?k.slice(pe,jt,jt+Ue):pe)||xn,bn){pe.__index=jt+xn.__read;var In=xn.__filtered;In&&(pe.__filtered=In,xn.__filtered=r),xn.__read=r}return xn},peek:function(pe,Oe){return pe[pe.__index=Oe||pe.__index||0]},remain:function(pe){return pe.length-(pe.__index||0)},readList:function(pe,Oe,Ve,Ue){for(var Pt=[],Lt,bn=Oe||0,jt=Ue?bn+Ue:pe.length,Cn=bn;Cn<jt;Cn++)Pt.push(Array.isArray(Lt=pe[Cn])?this.read(Lt,0,Ve):this.read(pe,Cn,Ve,1));return Pt},readNamed:function(pe,Oe,Ve,Ue,Pt){var Lt=this.getNamed(pe,Oe),bn=Lt!==r;if(bn){var jt=pe.__filtered;if(!jt){var Cn=this.getSource(pe);jt=pe.__filtered=k.create(Cn),jt.__unfiltered=Cn}jt[Oe]=r}return this.read(bn?[Lt]:pe,Ve,Ue,Pt)},readSupported:function(pe,Oe){var Ve=this.getSource(pe),Ue=this,Pt=!1;return Ve&&Object.keys(Ve).forEach(function(Lt){if(Lt in Oe){var bn=Ue.readNamed(pe,Lt);bn!==r&&(Oe[Lt]=bn),Pt=!0}}),Pt},getSource:function(pe){var Oe=pe.__source;if(Oe===r){var Ve=pe.length===1&&pe[0];Oe=pe.__source=Ve&&k.isPlainObject(Ve)?Ve:null}return Oe},getNamed:function(pe,Oe){var Ve=this.getSource(pe);if(Ve)return Oe?Ve[Oe]:pe.__filtered||Ve},hasNamed:function(pe,Oe){return!!this.getNamed(pe,Oe)},filter:function(pe,Oe,Ve,Ue){var Pt;function Lt(In){if(!(Ve&&In in Ve)&&!(Pt&&In in Pt)){var Ln=Oe[In];Ln!==r&&(pe[In]=Ln)}}if(Ue){for(var bn={},jt=0,Cn,xn=Ue.length;jt<xn;jt++)(Cn=Ue[jt])in Oe&&(Lt(Cn),bn[Cn]=!0);Pt=bn}return Object.keys(Oe.__unfiltered||Oe).forEach(Lt),pe},isPlainValue:function(pe,Oe){return k.isPlainObject(pe)||Array.isArray(pe)||Oe&&typeof pe=="string"},serialize:function(pe,Oe,Ve,Ue){Oe=Oe||{};var Pt=!Ue,Lt;if(Pt&&(Oe.formatter=new j(Oe.precision),Ue={length:0,definitions:{},references:{},add:function(Ln,An){var zn="#"+Ln._id,Jn=this.references[zn];if(!Jn){this.length++;var Qn=An.call(Ln),ta=Ln._class;ta&&Qn[0]!==ta&&Qn.unshift(ta),this.definitions[zn]=Qn,Jn=this.references[zn]=[zn]}return Jn}}),pe&&pe._serialize){Lt=pe._serialize(Oe,Ue);var bn=pe._class;bn&&!pe._compactSerialize&&(Pt||!Ve)&&Lt[0]!==bn&&Lt.unshift(bn)}else if(Array.isArray(pe)){Lt=[];for(var jt=0,Cn=pe.length;jt<Cn;jt++)Lt[jt]=k.serialize(pe[jt],Oe,Ve,Ue)}else if(k.isPlainObject(pe)){Lt={};for(var xn=Object.keys(pe),jt=0,Cn=xn.length;jt<Cn;jt++){var In=xn[jt];Lt[In]=k.serialize(pe[In],Oe,Ve,Ue)}}else typeof pe=="number"?Lt=Oe.formatter.number(pe,Oe.precision):Lt=pe;return Pt&&Ue.length>0?[["dictionary",Ue.definitions],Lt]:Lt},deserialize:function(pe,Oe,Ve,Ue,Pt){var Lt=pe,bn=!Ve,jt=bn&&pe&&pe.length&&pe[0][0]==="dictionary";if(Ve=Ve||{},Array.isArray(pe)){var Cn=pe[0],xn=Cn==="dictionary";if(pe.length==1&&/^#/.test(Cn))return Ve.dictionary[Cn];Cn=k.exports[Cn],Lt=[];for(var In=Cn?1:0,Ln=pe.length;In<Ln;In++)Lt.push(k.deserialize(pe[In],Oe,Ve,xn,jt));if(Cn){var An=Lt;Oe?Lt=Oe(Cn,An,bn||Pt):Lt=new Cn(An)}}else if(k.isPlainObject(pe)){Lt={},Ue&&(Ve.dictionary=Lt);for(var zn in pe)Lt[zn]=k.deserialize(pe[zn],Oe,Ve)}return jt?Lt[1]:Lt},exportJSON:function(pe,Oe){var Ve=k.serialize(pe,Oe);return Oe&&Oe.asString==!1?Ve:JSON.stringify(Ve)},importJSON:function(pe,Oe){return k.deserialize(typeof pe=="string"?JSON.parse(pe):pe,function(Ve,Ue,Pt){var Lt=Pt&&Oe&&Oe.constructor===Ve,bn=Lt?Oe:k.create(Ve.prototype);if(Ue.length===1&&bn instanceof xe&&(Lt||!(bn instanceof ze))){var jt=Ue[0];k.isPlainObject(jt)&&(jt.insert=!1,Lt&&(Ue=Ue.concat([xe.INSERT])))}return(Lt?bn.set:Ve).apply(bn,Ue),Lt&&(Oe=null),bn})},push:function(pe,Oe){var Ve=Oe.length;if(Ve<4096)pe.push.apply(pe,Oe);else{var Ue=pe.length;pe.length+=Ve;for(var Pt=0;Pt<Ve;Pt++)pe[Ue+Pt]=Oe[Pt]}return pe},splice:function(pe,Oe,Ve,Ue){var Pt=Oe&&Oe.length,Lt=Ve===r;Ve=Lt?pe.length:Ve,Ve>pe.length&&(Ve=pe.length);for(var bn=0;bn<Pt;bn++)Oe[bn]._index=Ve+bn;if(Lt)return k.push(pe,Oe),[];var jt=[Ve,Ue];Oe&&k.push(jt,Oe);for(var Cn=pe.splice.apply(pe,jt),bn=0,xn=Cn.length;bn<xn;bn++)Cn[bn]._index=r;for(var bn=Ve+Pt,xn=pe.length;bn<xn;bn++)pe[bn]._index=bn;return Cn},capitalize:function(pe){return pe.replace(/\b[a-z]/g,function(Oe){return Oe.toUpperCase()})},camelize:function(pe){return pe.replace(/-(.)/g,function(Oe,Ve){return Ve.toUpperCase()})},hyphenate:function(pe){return pe.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var $={on:function(pe,Oe){if(typeof pe!="string")k.each(pe,function(Lt,bn){this.on(bn,Lt)},this);else{var Ve=this._eventTypes,Ue=Ve&&Ve[pe],Pt=this._callbacks=this._callbacks||{};Pt=Pt[pe]=Pt[pe]||[],Pt.indexOf(Oe)===-1&&(Pt.push(Oe),Ue&&Ue.install&&Pt.length===1&&Ue.install.call(this,pe))}return this},off:function(pe,Oe){if(typeof pe!="string"){k.each(pe,function(bn,jt){this.off(jt,bn)},this);return}var Ve=this._eventTypes,Ue=Ve&&Ve[pe],Pt=this._callbacks&&this._callbacks[pe],Lt;return Pt&&(!Oe||(Lt=Pt.indexOf(Oe))!==-1&&Pt.length===1?(Ue&&Ue.uninstall&&Ue.uninstall.call(this,pe),delete this._callbacks[pe]):Lt!==-1&&Pt.splice(Lt,1)),this},once:function(pe,Oe){return this.on(pe,function Ve(){Oe.apply(this,arguments),this.off(pe,Ve)})},emit:function(pe,Oe){var Ve=this._callbacks&&this._callbacks[pe];if(!Ve)return!1;var Ue=k.slice(arguments,1),Pt=Oe&&Oe.target&&!Oe.currentTarget;Ve=Ve.slice(),Pt&&(Oe.currentTarget=this);for(var Lt=0,bn=Ve.length;Lt<bn;Lt++)if(Ve[Lt].apply(this,Ue)==!1){Oe&&Oe.stop&&Oe.stop();break}return Pt&&delete Oe.currentTarget,!0},responds:function(pe){return!!(this._callbacks&&this._callbacks[pe])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(pe){var Oe=this._eventTypes,Ve=this._callbacks,Ue=pe?"install":"uninstall";if(Oe){for(var Pt in Ve)if(Ve[Pt].length>0){var Lt=Oe[Pt],bn=Lt&&Lt[Ue];bn&&bn.call(this,Pt)}}},statics:{inject:function pe(Oe){var Ve=Oe._events;if(Ve){var Ue={};k.each(Ve,function(Pt,Lt){var bn=typeof Pt=="string",jt=bn?Pt:Lt,Cn=k.capitalize(jt),xn=jt.substring(2).toLowerCase();Ue[xn]=bn?{}:Pt,jt="_"+jt,Oe["get"+Cn]=function(){return this[jt]},Oe["set"+Cn]=function(In){var Ln=this[jt];Ln&&this.off(xn,Ln),In&&this.on(xn,In),this[jt]=In}}),Oe._eventTypes=Ue}return pe.base.apply(this,arguments)}}},V=k.extend({_class:"PaperScope",initialize:function pe(){ua=this,this.settings=new k({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=pe._id++,pe._scopes[this._id]=this;var Oe=pe.prototype;if(!this.support){var Ve=aa.getContext(1,1)||{};Oe.support={nativeDash:"setLineDash"in Ve||"mozDash"in Ve,nativeBlendModes:sa.nativeModes},aa.release(Ve)}if(!this.agent){var Ue=n.navigator.userAgent.toLowerCase(),Pt=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(Ue)||[])[0],Lt=Pt==="darwin"?"mac":Pt,bn=Oe.agent=Oe.browser={platform:Lt};Lt&&(bn[Lt]=!0),Ue.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(jt,Cn,xn,In,Ln){if(!bn.chrome){var An=Cn==="opera"?In:/^(node|trident)$/.test(Cn)?Ln:xn;bn.version=An,bn.versionNumber=parseFloat(An),Cn={trident:"msie",jsdom:"node"}[Cn]||Cn,bn.name=Cn,bn[Cn]=!0}}),bn.chrome&&delete bn.webkit,bn.atom&&delete bn.chrome}},version:"0.12.18",getView:function(){var pe=this.project;return pe&&pe._view},getPaper:function(){return this},execute:function(pe,Oe){var Ve=ua.PaperScript.execute(pe,this,Oe);return Ca.updateFocus(),Ve},install:function(pe){var Oe=this;k.each(["project","view","tool"],function(Ue){k.define(pe,Ue,{configurable:!0,get:function(){return Oe[Ue]}})});for(var Ve in this)!/^_/.test(Ve)&&this[Ve]&&(pe[Ve]=this[Ve])},setup:function(pe){return ua=this,this.project=new $e(pe),this},createCanvas:function(pe,Oe){return aa.getCanvas(pe,Oe)},activate:function(){ua=this},clear:function(){for(var pe=this.projects,Oe=this.tools,Ve=pe.length-1;Ve>=0;Ve--)pe[Ve].remove();for(var Ve=Oe.length-1;Ve>=0;Ve--)Oe[Ve].remove()},remove:function(){this.clear(),delete V._scopes[this._id]},statics:new function(){function pe(Oe){return Oe+="Attribute",function(Ve,Ue){return Ve[Oe](Ue)||Ve[Oe]("data-paper-"+Ue)}}return{_scopes:{},_id:0,get:function(Oe){return this._scopes[Oe]||null},getAttribute:pe("get"),hasAttribute:pe("has")}}}),L=k.extend($,{initialize:function(pe){this._scope=ua,this._index=this._scope[this._list].push(this)-1,(pe||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var pe=this._scope[this._reference];return pe&&pe!==this&&pe.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",pe),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(k.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),z={findItemBoundsCollisions:function(pe,Oe,Ve){function Ue(bn){for(var jt=new Array(bn.length),Cn=0;Cn<bn.length;Cn++){var xn=bn[Cn].getBounds();jt[Cn]=[xn.left,xn.top,xn.right,xn.bottom]}return jt}var Pt=Ue(pe),Lt=!Oe||Oe===pe?Pt:Ue(Oe);return this.findBoundsCollisions(Pt,Lt,Ve||0)},findCurveBoundsCollisions:function(pe,Oe,Ve,Ue){function Pt(An){for(var zn=Math.min,Jn=Math.max,Qn=new Array(An.length),ta=0;ta<An.length;ta++){var Pn=An[ta];Qn[ta]=[zn(Pn[0],Pn[2],Pn[4],Pn[6]),zn(Pn[1],Pn[3],Pn[5],Pn[7]),Jn(Pn[0],Pn[2],Pn[4],Pn[6]),Jn(Pn[1],Pn[3],Pn[5],Pn[7])]}return Qn}var Lt=Pt(pe),bn=!Oe||Oe===pe?Lt:Pt(Oe);if(Ue){for(var jt=this.findBoundsCollisions(Lt,bn,Ve||0,!1,!0),Cn=this.findBoundsCollisions(Lt,bn,Ve||0,!0,!0),xn=[],In=0,Ln=jt.length;In<Ln;In++)xn[In]={hor:jt[In],ver:Cn[In]};return xn}return this.findBoundsCollisions(Lt,bn,Ve||0)},findBoundsCollisions:function(pe,Oe,Ve,Ue,Pt){var Lt=!Oe||pe===Oe,bn=Lt?pe:pe.concat(Oe),jt=pe.length,Cn=bn.length;function xn(Wa,Qa,Ja){for(var Ra=0,Fa=Wa.length;Ra<Fa;){var Xa=Fa+Ra>>>1;bn[Wa[Xa]][Qa]<Ja?Ra=Xa+1:Fa=Xa}return Ra-1}for(var In=Ue?1:0,Ln=In+2,An=Ue?0:1,zn=An+2,Jn=new Array(Cn),Qn=0;Qn<Cn;Qn++)Jn[Qn]=Qn;Jn.sort(function(Wa,Qa){return bn[Wa][In]-bn[Qa][In]});for(var ta=[],Pn=new Array(jt),Qn=0;Qn<Cn;Qn++){var Un=Jn[Qn],On=bn[Un],Rn=Lt?Un:Un-jt,Yn=Un<jt,na=Lt||!Yn,ea=Yn?[]:null;if(ta.length){var pa=xn(ta,Ln,On[In]-Ve)+1;if(ta.splice(0,pa),Lt&&Pt){ea=ea.concat(ta);for(var ha=0;ha<ta.length;ha++){var ba=ta[ha];Pn[ba].push(Rn)}}else for(var Oa=On[zn],va=On[An],ha=0;ha<ta.length;ha++){var ba=ta[ha],Sa=bn[ba],$a=ba<jt,Da=Lt||ba>=jt;(Pt||(Yn&&Da||na&&$a)&&Oa>=Sa[An]-Ve&&va<=Sa[zn]+Ve)&&(Yn&&Da&&ea.push(Lt?ba:ba-jt),na&&$a&&Pn[ba].push(Rn))}}if(Yn&&(pe===Oe&&ea.push(Un),Pn[Un]=ea),ta.length){var Na=On[Ln],Va=xn(ta,Ln,Na);ta.splice(Va+1,0,Un)}else ta.push(Un)}for(var Qn=0;Qn<Pn.length;Qn++){var Ua=Pn[Qn];Ua&&Ua.sort(function(Qa,Ja){return Qa-Ja})}return Pn}},j=k.extend({initialize:function(pe){this.precision=k.pick(pe,5),this.multiplier=Math.pow(10,this.precision)},number:function(pe){return this.precision<16?Math.round(pe*this.multiplier)/this.multiplier:pe},pair:function(pe,Oe,Ve){return this.number(pe)+(Ve||",")+this.number(Oe)},point:function(pe,Oe){return this.number(pe.x)+(Oe||",")+this.number(pe.y)},size:function(pe,Oe){return this.number(pe.width)+(Oe||",")+this.number(pe.height)},rectangle:function(pe,Oe){return this.point(pe,Oe)+(Oe||",")+this.size(pe,Oe)}});j.instance=new j;var ae=new function(){var pe=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],Oe=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],Ve=Math.abs,Ue=Math.sqrt,Pt=Math.pow,Lt=Math.log2||function(Ln){return Math.log(Ln)*Math.LOG2E},bn=1e-12,jt=112e-18;function Cn(Ln,An,zn){return Ln<An?An:Ln>zn?zn:Ln}function xn(Ln,An,zn){function Jn(pa){var ha=pa*134217729,ba=pa-ha,Oa=ba+ha,va=pa-Oa;return[Oa,va]}var Qn=An*An-Ln*zn,ta=An*An+Ln*zn;if(Ve(Qn)*3<ta){var Pn=Jn(Ln),Un=Jn(An),On=Jn(zn),Rn=An*An,Yn=Un[0]*Un[0]-Rn+2*Un[0]*Un[1]+Un[1]*Un[1],na=Ln*zn,ea=Pn[0]*On[0]-na+Pn[0]*On[1]+Pn[1]*On[0]+Pn[1]*On[1];Qn=Rn-na+(Yn-ea)}return Qn}function In(){var Ln=Math.max.apply(Math,arguments);return Ln&&(Ln<1e-8||Ln>1e8)?Pt(2,-Math.round(Lt(Ln))):0}return{EPSILON:bn,MACHINE_EPSILON:jt,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(Ue(2)-1)/3,isZero:function(Ln){return Ln>=-bn&&Ln<=bn},isMachineZero:function(Ln){return Ln>=-jt&&Ln<=jt},clamp:Cn,integrate:function(Ln,An,zn,Jn){for(var Qn=pe[Jn-2],ta=Oe[Jn-2],Pn=(zn-An)*.5,Un=Pn+An,On=0,Rn=Jn+1>>1,Yn=Jn&1?ta[On++]*Ln(Un):0;On<Rn;){var na=Pn*Qn[On];Yn+=ta[On++]*(Ln(Un+na)+Ln(Un-na))}return Pn*Yn},findRoot:function(Ln,An,zn,Jn,Qn,ta,Pn){for(var Un=0;Un<ta;Un++){var On=Ln(zn),Rn=On/An(zn),Yn=zn-Rn;if(Ve(Rn)<Pn){zn=Yn;break}On>0?(Qn=zn,zn=Yn<=Jn?(Jn+Qn)*.5:Yn):(Jn=zn,zn=Yn>=Qn?(Jn+Qn)*.5:Yn)}return Cn(zn,Jn,Qn)},solveQuadratic:function(Ln,An,zn,Jn,Qn,ta){var Pn,Un=1/0;if(Ve(Ln)<bn){if(Ve(An)<bn)return Ve(zn)<bn?-1:0;Pn=-zn/An}else{An*=-.5;var On=xn(Ln,An,zn);if(On&&Ve(On)<jt){var Rn=In(Ve(Ln),Ve(An),Ve(zn));Rn&&(Ln*=Rn,An*=Rn,zn*=Rn,On=xn(Ln,An,zn))}if(On>=-jt){var Yn=On<0?0:Ue(On),na=An+(An<0?-Yn:Yn);na===0?(Pn=zn/Ln,Un=-Pn):(Pn=na/Ln,Un=zn/na)}}var ea=0,pa=Qn==null,ha=Qn-bn,ba=ta+bn;return isFinite(Pn)&&(pa||Pn>ha&&Pn<ba)&&(Jn[ea++]=pa?Pn:Cn(Pn,Qn,ta)),Un!==Pn&&isFinite(Un)&&(pa||Un>ha&&Un<ba)&&(Jn[ea++]=pa?Un:Cn(Un,Qn,ta)),ea},solveCubic:function(Ln,An,zn,Jn,Qn,ta,Pn){var Un=In(Ve(Ln),Ve(An),Ve(zn),Ve(Jn)),On,Rn,Yn,na,ea;Un&&(Ln*=Un,An*=Un,zn*=Un,Jn*=Un);function pa(Va){On=Va;var Ua=Ln*On;Rn=Ua+An,Yn=Rn*On+zn,na=(Ua+Rn)*On+Yn,ea=Yn*On+Jn}if(Ve(Ln)<bn)Ln=An,Rn=zn,Yn=Jn,On=1/0;else if(Ve(Jn)<bn)Rn=An,Yn=zn,On=0;else{pa(-(An/Ln)/3);var ha=ea/Ln,ba=Pt(Ve(ha),1/3),Oa=ha<0?-1:1,va=-na/Ln,Sa=va>0?1.324717957244746*Math.max(ba,Ue(va)):ba,$a=On-Oa*Sa;if($a!==On){do pa($a),$a=na===0?On:On-ea/na/(1+jt);while(Oa*$a>Oa*On);Ve(Ln)*On*On>Ve(Jn/On)&&(Yn=-Jn/On,Rn=(Yn-zn)/On)}}var Da=ae.solveQuadratic(Ln,Rn,Yn,Qn,ta,Pn),Na=ta==null;return isFinite(On)&&(Da===0||Da>0&&On!==Qn[0]&&On!==Qn[1])&&(Na||On>ta-bn&&On<Pn+bn)&&(Qn[Da++]=Na?On:Cn(On,ta,Pn)),Da}}},re={_id:1,_pools:{},get:function(pe){if(pe){var Oe=this._pools[pe];return Oe||(Oe=this._pools[pe]={_id:1}),Oe._id++}else return this._id++}},oe=k.extend({_class:"Point",_readIndex:!0,initialize:function(Oe,Ve){var Ue=typeof Oe,Pt=this.__read,Lt=0;if(Ue==="number"){var bn=typeof Ve=="number";this._set(Oe,bn?Ve:Oe),Pt&&(Lt=bn?2:1)}else if(Ue==="undefined"||Oe===null)this._set(0,0),Pt&&(Lt=Oe===null?1:0);else{var jt=Ue==="string"?Oe.split(/[\s,]+/)||[]:Oe;Lt=1,Array.isArray(jt)?this._set(+jt[0],+(jt.length>1?jt[1]:jt[0])):"x"in jt?this._set(jt.x||0,jt.y||0):"width"in jt?this._set(jt.width||0,jt.height||0):"angle"in jt?(this._set(jt.length||0,0),this.setAngle(jt.angle||0)):(this._set(0,0),Lt=0)}return Pt&&(this.__read=Lt),this},set:"#initialize",_set:function(pe,Oe){return this.x=pe,this.y=Oe,this},equals:function(pe){return this===pe||pe&&(this.x===pe.x&&this.y===pe.y||Array.isArray(pe)&&this.x===pe[0]&&this.y===pe[1])||!1},clone:function(){return new oe(this.x,this.y)},toString:function(){var pe=j.instance;return"{ x: "+pe.number(this.x)+", y: "+pe.number(this.y)+" }"},_serialize:function(pe){var Oe=pe.formatter;return[Oe.number(this.x),Oe.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(pe){if(this.isZero()){var Oe=this._angle||0;this._set(Math.cos(Oe)*pe,Math.sin(Oe)*pe)}else{var Ve=pe/this.getLength();ae.isZero(Ve)&&this.getAngle(),this._set(this.x*Ve,this.y*Ve)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(pe){this.setAngleInRadians.call(this,pe*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var pe=oe.read(arguments),Oe=this.getLength()*pe.getLength();if(ae.isZero(Oe))return NaN;var Ve=this.dot(pe)/Oe;return Math.acos(Ve<-1?-1:Ve>1?1:Ve)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(pe){if(this._angle=pe,!this.isZero()){var Oe=this.getLength();this._set(Math.cos(pe)*Oe,Math.sin(pe)*Oe)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var pe=oe.read(arguments);return Math.atan2(this.cross(pe),this.dot(pe))*180/Math.PI},getDistance:function(){var pe=arguments,Oe=oe.read(pe),Ve=Oe.x-this.x,Ue=Oe.y-this.y,Pt=Ve*Ve+Ue*Ue,Lt=k.read(pe);return Lt?Pt:Math.sqrt(Pt)},normalize:function(pe){pe===r&&(pe=1);var Oe=this.getLength(),Ve=Oe!==0?pe/Oe:0,Ue=new oe(this.x*Ve,this.y*Ve);return Ve>=0&&(Ue._angle=this._angle),Ue},rotate:function(pe,Oe){if(pe===0)return this.clone();pe=pe*Math.PI/180;var Ve=Oe?this.subtract(Oe):this,Ue=Math.sin(pe),Pt=Math.cos(pe);return Ve=new oe(Ve.x*Pt-Ve.y*Ue,Ve.x*Ue+Ve.y*Pt),Oe?Ve.add(Oe):Ve},transform:function(pe){return pe?pe._transformPoint(this):this},add:function(){var pe=oe.read(arguments);return new oe(this.x+pe.x,this.y+pe.y)},subtract:function(){var pe=oe.read(arguments);return new oe(this.x-pe.x,this.y-pe.y)},multiply:function(){var pe=oe.read(arguments);return new oe(this.x*pe.x,this.y*pe.y)},divide:function(){var pe=oe.read(arguments);return new oe(this.x/pe.x,this.y/pe.y)},modulo:function(){var pe=oe.read(arguments);return new oe(this.x%pe.x,this.y%pe.y)},negate:function(){return new oe(-this.x,-this.y)},isInside:function(){return he.read(arguments).contains(this)},isClose:function(){var pe=arguments,Oe=oe.read(pe),Ve=k.read(pe);return this.getDistance(Oe)<=Ve},isCollinear:function(){var pe=oe.read(arguments);return oe.isCollinear(this.x,this.y,pe.x,pe.y)},isColinear:"#isCollinear",isOrthogonal:function(){var pe=oe.read(arguments);return oe.isOrthogonal(this.x,this.y,pe.x,pe.y)},isZero:function(){var pe=ae.isZero;return pe(this.x)&&pe(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(pe){return this.x*(pe>1&&pe<4?-1:1)>=0&&this.y*(pe>2?-1:1)>=0},dot:function(){var pe=oe.read(arguments);return this.x*pe.x+this.y*pe.y},cross:function(){var pe=oe.read(arguments);return this.x*pe.y-this.y*pe.x},project:function(){var pe=oe.read(arguments),Oe=pe.isZero()?0:this.dot(pe)/pe.dot(pe);return new oe(pe.x*Oe,pe.y*Oe)},statics:{min:function(){var pe=arguments,Oe=oe.read(pe),Ve=oe.read(pe);return new oe(Math.min(Oe.x,Ve.x),Math.min(Oe.y,Ve.y))},max:function(){var pe=arguments,Oe=oe.read(pe),Ve=oe.read(pe);return new oe(Math.max(Oe.x,Ve.x),Math.max(Oe.y,Ve.y))},random:function(){return new oe(Math.random(),Math.random())},isCollinear:function(pe,Oe,Ve,Ue){return Math.abs(pe*Ue-Oe*Ve)<=Math.sqrt((pe*pe+Oe*Oe)*(Ve*Ve+Ue*Ue))*1e-8},isOrthogonal:function(pe,Oe,Ve,Ue){return Math.abs(pe*Ve+Oe*Ue)<=Math.sqrt((pe*pe+Oe*Oe)*(Ve*Ve+Ue*Ue))*1e-8}}},k.each(["round","ceil","floor","abs"],function(pe){var Oe=Math[pe];this[pe]=function(){return new oe(Oe(this.x),Oe(this.y))}},{})),ue=oe.extend({initialize:function(Oe,Ve,Ue,Pt){this._x=Oe,this._y=Ve,this._owner=Ue,this._setter=Pt},_set:function(pe,Oe,Ve){return this._x=pe,this._y=Oe,Ve||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(pe){this._x=pe,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(pe){this._y=pe,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(pe){this._owner._changeSelection(this._getSelection(),pe)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),le=k.extend({_class:"Size",_readIndex:!0,initialize:function(Oe,Ve){var Ue=typeof Oe,Pt=this.__read,Lt=0;if(Ue==="number"){var bn=typeof Ve=="number";this._set(Oe,bn?Ve:Oe),Pt&&(Lt=bn?2:1)}else if(Ue==="undefined"||Oe===null)this._set(0,0),Pt&&(Lt=Oe===null?1:0);else{var jt=Ue==="string"?Oe.split(/[\s,]+/)||[]:Oe;Lt=1,Array.isArray(jt)?this._set(+jt[0],+(jt.length>1?jt[1]:jt[0])):"width"in jt?this._set(jt.width||0,jt.height||0):"x"in jt?this._set(jt.x||0,jt.y||0):(this._set(0,0),Lt=0)}return Pt&&(this.__read=Lt),this},set:"#initialize",_set:function(pe,Oe){return this.width=pe,this.height=Oe,this},equals:function(pe){return pe===this||pe&&(this.width===pe.width&&this.height===pe.height||Array.isArray(pe)&&this.width===pe[0]&&this.height===pe[1])||!1},clone:function(){return new le(this.width,this.height)},toString:function(){var pe=j.instance;return"{ width: "+pe.number(this.width)+", height: "+pe.number(this.height)+" }"},_serialize:function(pe){var Oe=pe.formatter;return[Oe.number(this.width),Oe.number(this.height)]},add:function(){var pe=le.read(arguments);return new le(this.width+pe.width,this.height+pe.height)},subtract:function(){var pe=le.read(arguments);return new le(this.width-pe.width,this.height-pe.height)},multiply:function(){var pe=le.read(arguments);return new le(this.width*pe.width,this.height*pe.height)},divide:function(){var pe=le.read(arguments);return new le(this.width/pe.width,this.height/pe.height)},modulo:function(){var pe=le.read(arguments);return new le(this.width%pe.width,this.height%pe.height)},negate:function(){return new le(-this.width,-this.height)},isZero:function(){var pe=ae.isZero;return pe(this.width)&&pe(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(pe,Oe){return new le(Math.min(pe.width,Oe.width),Math.min(pe.height,Oe.height))},max:function(pe,Oe){return new le(Math.max(pe.width,Oe.width),Math.max(pe.height,Oe.height))},random:function(){return new le(Math.random(),Math.random())}}},k.each(["round","ceil","floor","abs"],function(pe){var Oe=Math[pe];this[pe]=function(){return new le(Oe(this.width),Oe(this.height))}},{})),de=le.extend({initialize:function(Oe,Ve,Ue,Pt){this._width=Oe,this._height=Ve,this._owner=Ue,this._setter=Pt},_set:function(pe,Oe,Ve){return this._width=pe,this._height=Oe,Ve||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(pe){this._width=pe,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(pe){this._height=pe,this._owner[this._setter](this)}}),he=k.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(Oe,Ve,Ue,Pt){var Lt=arguments,bn=typeof Oe,jt;if(bn==="number"?(this._set(Oe,Ve,Ue,Pt),jt=4):bn==="undefined"||Oe===null?(this._set(0,0,0,0),jt=Oe===null?1:0):Lt.length===1&&(Array.isArray(Oe)?(this._set.apply(this,Oe),jt=1):Oe.x!==r||Oe.width!==r?(this._set(Oe.x||0,Oe.y||0,Oe.width||0,Oe.height||0),jt=1):Oe.from===r&&Oe.to===r&&(this._set(0,0,0,0),k.readSupported(Lt,this)&&(jt=1))),jt===r){var Cn=oe.readNamed(Lt,"from"),xn=k.peek(Lt),In=Cn.x,Ln=Cn.y,An,zn;if(xn&&xn.x!==r||k.hasNamed(Lt,"to")){var Jn=oe.readNamed(Lt,"to");An=Jn.x-In,zn=Jn.y-Ln,An<0&&(In=Jn.x,An=-An),zn<0&&(Ln=Jn.y,zn=-zn)}else{var Qn=le.read(Lt);An=Qn.width,zn=Qn.height}this._set(In,Ln,An,zn),jt=Lt.__index}var ta=Lt.__filtered;return ta&&(this.__filtered=ta),this.__read&&(this.__read=jt),this},set:"#initialize",_set:function(pe,Oe,Ve,Ue){return this.x=pe,this.y=Oe,this.width=Ve,this.height=Ue,this},clone:function(){return new he(this.x,this.y,this.width,this.height)},equals:function(pe){var Oe=k.isPlainValue(pe)?he.read(arguments):pe;return Oe===this||Oe&&this.x===Oe.x&&this.y===Oe.y&&this.width===Oe.width&&this.height===Oe.height||!1},toString:function(){var pe=j.instance;return"{ x: "+pe.number(this.x)+", y: "+pe.number(this.y)+", width: "+pe.number(this.width)+", height: "+pe.number(this.height)+" }"},_serialize:function(pe){var Oe=pe.formatter;return[Oe.number(this.x),Oe.number(this.y),Oe.number(this.width),Oe.number(this.height)]},getPoint:function(pe){var Oe=pe?oe:ue;return new Oe(this.x,this.y,this,"setPoint")},setPoint:function(){var pe=oe.read(arguments);this.x=pe.x,this.y=pe.y},getSize:function(pe){var Oe=pe?le:de;return new Oe(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var pe=le.read(arguments),Oe=this._sx,Ve=this._sy,Ue=pe.width,Pt=pe.height;Oe&&(this.x+=(this.width-Ue)*Oe),Ve&&(this.y+=(this.height-Pt)*Ve),this.width=Ue,this.height=Pt,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(pe){if(!this._fw){var Oe=pe-this.x;this.width-=this._sx===.5?Oe*2:Oe}this.x=pe,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(pe){if(!this._fh){var Oe=pe-this.y;this.height-=this._sy===.5?Oe*2:Oe}this.y=pe,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(pe){if(!this._fw){var Oe=pe-this.x;this.width=this._sx===.5?Oe*2:Oe}this.x=pe-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(pe){if(!this._fh){var Oe=pe-this.y;this.height=this._sy===.5?Oe*2:Oe}this.y=pe-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(pe){this._fw||this._sx===.5?this.x=pe-this.width/2:(this._sx&&(this.x+=(pe-this.x)*2*this._sx),this.width=(pe-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(pe){this._fh||this._sy===.5?this.y=pe-this.height/2:(this._sy&&(this.y+=(pe-this.y)*2*this._sy),this.height=(pe-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(pe){var Oe=pe?oe:ue;return new Oe(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var pe=oe.read(arguments);return this.setCenterX(pe.x),this.setCenterY(pe.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(pe){return pe&&pe.width!==r||(Array.isArray(pe)?pe:arguments).length===4?this._containsRectangle(he.read(arguments)):this._containsPoint(oe.read(arguments))},_containsPoint:function(pe){var Oe=pe.x,Ve=pe.y;return Oe>=this.x&&Ve>=this.y&&Oe<=this.x+this.width&&Ve<=this.y+this.height},_containsRectangle:function(pe){var Oe=pe.x,Ve=pe.y;return Oe>=this.x&&Ve>=this.y&&Oe+pe.width<=this.x+this.width&&Ve+pe.height<=this.y+this.height},intersects:function(){var pe=he.read(arguments),Oe=k.read(arguments)||0;return pe.x+pe.width>this.x-Oe&&pe.y+pe.height>this.y-Oe&&pe.x<this.x+this.width+Oe&&pe.y<this.y+this.height+Oe},intersect:function(){var pe=he.read(arguments),Oe=Math.max(this.x,pe.x),Ve=Math.max(this.y,pe.y),Ue=Math.min(this.x+this.width,pe.x+pe.width),Pt=Math.min(this.y+this.height,pe.y+pe.height);return new he(Oe,Ve,Ue-Oe,Pt-Ve)},unite:function(){var pe=he.read(arguments),Oe=Math.min(this.x,pe.x),Ve=Math.min(this.y,pe.y),Ue=Math.max(this.x+this.width,pe.x+pe.width),Pt=Math.max(this.y+this.height,pe.y+pe.height);return new he(Oe,Ve,Ue-Oe,Pt-Ve)},include:function(){var pe=oe.read(arguments),Oe=Math.min(this.x,pe.x),Ve=Math.min(this.y,pe.y),Ue=Math.max(this.x+this.width,pe.x),Pt=Math.max(this.y+this.height,pe.y);return new he(Oe,Ve,Ue-Oe,Pt-Ve)},expand:function(){var pe=le.read(arguments),Oe=pe.width,Ve=pe.height;return new he(this.x-Oe/2,this.y-Ve/2,this.width+Oe,this.height+Ve)},scale:function(pe,Oe){return this.expand(this.width*pe-this.width,this.height*(Oe===r?pe:Oe)-this.height)}},k.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(pe,Oe){var Ve=pe.join(""),Ue=/^[RL]/.test(Ve);Oe>=4&&(pe[1]+=Ue?"Y":"X");var Pt=pe[Ue?0:1],Lt=pe[Ue?1:0],bn="get"+Pt,jt="get"+Lt,Cn="set"+Pt,xn="set"+Lt,In="get"+Ve,Ln="set"+Ve;this[In]=function(An){var zn=An?oe:ue;return new zn(this[bn](),this[jt](),this,Ln)},this[Ln]=function(){var An=oe.read(arguments);this[Cn](An.x),this[xn](An.y)}},{beans:!0})),_e=he.extend({initialize:function(Oe,Ve,Ue,Pt,Lt,bn){this._set(Oe,Ve,Ue,Pt,!0),this._owner=Lt,this._setter=bn},_set:function(pe,Oe,Ve,Ue,Pt){return this._x=pe,this._y=Oe,this._width=Ve,this._height=Ue,Pt||this._owner[this._setter](this),this}},new function(){var pe=he.prototype;return k.each(["x","y","width","height"],function(Oe){var Ve=k.capitalize(Oe),Ue="_"+Oe;this["get"+Ve]=function(){return this[Ue]},this["set"+Ve]=function(Pt){this[Ue]=Pt,this._dontNotify||this._owner[this._setter](this)}},k.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(Oe){var Ve="set"+Oe;this[Ve]=function(){this._dontNotify=!0,pe[Ve].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(Oe){var Ve=this._owner;Ve._changeSelection&&Ve._changeSelection(2,Oe)}}))}),Ce=k.extend({_class:"Matrix",initialize:function pe(Oe,Ve){var Ue=arguments,Pt=Ue.length,Lt=!0;if(Pt>=6?this._set.apply(this,Ue):Pt===1||Pt===2?Oe instanceof pe?this._set(Oe._a,Oe._b,Oe._c,Oe._d,Oe._tx,Oe._ty,Ve):Array.isArray(Oe)?this._set.apply(this,Ve?Oe.concat([Ve]):Oe):Lt=!1:Pt?Lt=!1:this.reset(),!Lt)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(pe,Oe,Ve,Ue,Pt,Lt,bn){return this._a=pe,this._b=Oe,this._c=Ve,this._d=Ue,this._tx=Pt,this._ty=Lt,bn||this._changed(),this},_serialize:function(pe,Oe){return k.serialize(this.getValues(),pe,!0,Oe)},_changed:function(){var pe=this._owner;pe&&(pe._applyMatrix?pe.transform(null,!0):pe._changed(25))},clone:function(){return new Ce(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(pe){return pe===this||pe&&this._a===pe._a&&this._b===pe._b&&this._c===pe._c&&this._d===pe._d&&this._tx===pe._tx&&this._ty===pe._ty},toString:function(){var pe=j.instance;return"[["+[pe.number(this._a),pe.number(this._c),pe.number(this._tx)].join(", ")+"], ["+[pe.number(this._b),pe.number(this._d),pe.number(this._ty)].join(", ")+"]]"},reset:function(pe){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,pe||this._changed(),this},apply:function(pe,Oe){var Ve=this._owner;return Ve?(Ve.transform(null,k.pick(pe,!0),Oe),this.isIdentity()):!1},translate:function(){var pe=oe.read(arguments),Oe=pe.x,Ve=pe.y;return this._tx+=Oe*this._a+Ve*this._c,this._ty+=Oe*this._b+Ve*this._d,this._changed(),this},scale:function(){var pe=arguments,Oe=oe.read(pe),Ve=oe.read(pe,0,{readNull:!0});return Ve&&this.translate(Ve),this._a*=Oe.x,this._b*=Oe.x,this._c*=Oe.y,this._d*=Oe.y,Ve&&this.translate(Ve.negate()),this._changed(),this},rotate:function(pe){pe*=Math.PI/180;var Oe=oe.read(arguments,1),Ve=Oe.x,Ue=Oe.y,Pt=Math.cos(pe),Lt=Math.sin(pe),bn=Ve-Ve*Pt+Ue*Lt,jt=Ue-Ve*Lt-Ue*Pt,Cn=this._a,xn=this._b,In=this._c,Ln=this._d;return this._a=Pt*Cn+Lt*In,this._b=Pt*xn+Lt*Ln,this._c=-Lt*Cn+Pt*In,this._d=-Lt*xn+Pt*Ln,this._tx+=bn*Cn+jt*In,this._ty+=bn*xn+jt*Ln,this._changed(),this},shear:function(){var pe=arguments,Oe=oe.read(pe),Ve=oe.read(pe,0,{readNull:!0});Ve&&this.translate(Ve);var Ue=this._a,Pt=this._b;return this._a+=Oe.y*this._c,this._b+=Oe.y*this._d,this._c+=Oe.x*Ue,this._d+=Oe.x*Pt,Ve&&this.translate(Ve.negate()),this._changed(),this},skew:function(){var pe=arguments,Oe=oe.read(pe),Ve=oe.read(pe,0,{readNull:!0}),Ue=Math.PI/180,Pt=new oe(Math.tan(Oe.x*Ue),Math.tan(Oe.y*Ue));return this.shear(Pt,Ve)},append:function(pe,Oe){if(pe){var Ve=this._a,Ue=this._b,Pt=this._c,Lt=this._d,bn=pe._a,jt=pe._c,Cn=pe._b,xn=pe._d,In=pe._tx,Ln=pe._ty;this._a=bn*Ve+Cn*Pt,this._c=jt*Ve+xn*Pt,this._b=bn*Ue+Cn*Lt,this._d=jt*Ue+xn*Lt,this._tx+=In*Ve+Ln*Pt,this._ty+=In*Ue+Ln*Lt,Oe||this._changed()}return this},prepend:function(pe,Oe){if(pe){var Ve=this._a,Ue=this._b,Pt=this._c,Lt=this._d,bn=this._tx,jt=this._ty,Cn=pe._a,xn=pe._c,In=pe._b,Ln=pe._d,An=pe._tx,zn=pe._ty;this._a=Cn*Ve+xn*Ue,this._c=Cn*Pt+xn*Lt,this._b=In*Ve+Ln*Ue,this._d=In*Pt+Ln*Lt,this._tx=Cn*bn+xn*jt+An,this._ty=In*bn+Ln*jt+zn,Oe||this._changed()}return this},appended:function(pe){return this.clone().append(pe)},prepended:function(pe){return this.clone().prepend(pe)},invert:function(){var pe=this._a,Oe=this._b,Ve=this._c,Ue=this._d,Pt=this._tx,Lt=this._ty,bn=pe*Ue-Oe*Ve,jt=null;return bn&&!isNaN(bn)&&isFinite(Pt)&&isFinite(Lt)&&(this._a=Ue/bn,this._b=-Oe/bn,this._c=-Ve/bn,this._d=pe/bn,this._tx=(Ve*Lt-Ue*Pt)/bn,this._ty=(Oe*Pt-pe*Lt)/bn,jt=this),jt},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new Ce(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var pe=this._a*this._d-this._c*this._b;return pe&&!isNaN(pe)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(pe,Oe,Ve){return arguments.length<3?this._transformPoint(oe.read(arguments)):this._transformCoordinates(pe,Oe,Ve)},_transformPoint:function(pe,Oe,Ve){var Ue=pe.x,Pt=pe.y;return Oe||(Oe=new oe),Oe._set(Ue*this._a+Pt*this._c+this._tx,Ue*this._b+Pt*this._d+this._ty,Ve)},_transformCoordinates:function(pe,Oe,Ve){for(var Ue=0,Pt=2*Ve;Ue<Pt;Ue+=2){var Lt=pe[Ue],bn=pe[Ue+1];Oe[Ue]=Lt*this._a+bn*this._c+this._tx,Oe[Ue+1]=Lt*this._b+bn*this._d+this._ty}return Oe},_transformCorners:function(pe){var Oe=pe.x,Ve=pe.y,Ue=Oe+pe.width,Pt=Ve+pe.height,Lt=[Oe,Ve,Ue,Ve,Ue,Pt,Oe,Pt];return this._transformCoordinates(Lt,Lt,4)},_transformBounds:function(pe,Oe,Ve){for(var Ue=this._transformCorners(pe),Pt=Ue.slice(0,2),Lt=Pt.slice(),bn=2;bn<8;bn++){var jt=Ue[bn],Cn=bn&1;jt<Pt[Cn]?Pt[Cn]=jt:jt>Lt[Cn]&&(Lt[Cn]=jt)}return Oe||(Oe=new he),Oe._set(Pt[0],Pt[1],Lt[0]-Pt[0],Lt[1]-Pt[1],Ve)},inverseTransform:function(){return this._inverseTransform(oe.read(arguments))},_inverseTransform:function(pe,Oe,Ve){var Ue=this._a,Pt=this._b,Lt=this._c,bn=this._d,jt=this._tx,Cn=this._ty,xn=Ue*bn-Pt*Lt,In=null;if(xn&&!isNaN(xn)&&isFinite(jt)&&isFinite(Cn)){var Ln=pe.x-this._tx,An=pe.y-this._ty;Oe||(Oe=new oe),In=Oe._set((Ln*bn-An*Lt)/xn,(An*Ue-Ln*Pt)/xn,Ve)}return In},decompose:function(){var pe=this._a,Oe=this._b,Ve=this._c,Ue=this._d,Pt=pe*Ue-Oe*Ve,Lt=Math.sqrt,bn=Math.atan2,jt=180/Math.PI,Cn,xn,In;if(pe!==0||Oe!==0){var Ln=Lt(pe*pe+Oe*Oe);Cn=Math.acos(pe/Ln)*(Oe>0?1:-1),xn=[Ln,Pt/Ln],In=[bn(pe*Ve+Oe*Ue,Ln*Ln),0]}else if(Ve!==0||Ue!==0){var An=Lt(Ve*Ve+Ue*Ue);Cn=Math.asin(Ve/An)*(Ue>0?1:-1),xn=[Pt/An,An],In=[0,bn(pe*Ve+Oe*Ue,An*An)]}else Cn=0,In=xn=[0,0];return{translation:this.getTranslation(),rotation:Cn*jt,scaling:new oe(xn),skewing:new oe(In[0]*jt,In[1]*jt)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new oe(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(pe){this.isIdentity()||pe.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},k.each(["a","b","c","d","tx","ty"],function(pe){var Oe=k.capitalize(pe),Ve="_"+pe;this["get"+Oe]=function(){return this[Ve]},this["set"+Oe]=function(Ue){this[Ve]=Ue,this._changed()}},{})),Ne=k.extend({_class:"Line",initialize:function(Oe,Ve,Ue,Pt,Lt){var bn=!1;arguments.length>=4?(this._px=Oe,this._py=Ve,this._vx=Ue,this._vy=Pt,bn=Lt):(this._px=Oe.x,this._py=Oe.y,this._vx=Ve.x,this._vy=Ve.y,bn=Ue),bn||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new oe(this._px,this._py)},getVector:function(){return new oe(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(pe,Oe){return Ne.intersect(this._px,this._py,this._vx,this._vy,pe._px,pe._py,pe._vx,pe._vy,!0,Oe)},getSide:function(pe,Oe){return Ne.getSide(this._px,this._py,this._vx,this._vy,pe.x,pe.y,!0,Oe)},getDistance:function(pe){return Math.abs(this.getSignedDistance(pe))},getSignedDistance:function(pe){return Ne.getSignedDistance(this._px,this._py,this._vx,this._vy,pe.x,pe.y,!0)},isCollinear:function(pe){return oe.isCollinear(this._vx,this._vy,pe._vx,pe._vy)},isOrthogonal:function(pe){return oe.isOrthogonal(this._vx,this._vy,pe._vx,pe._vy)},statics:{intersect:function(pe,Oe,Ve,Ue,Pt,Lt,bn,jt,Cn,xn){Cn||(Ve-=pe,Ue-=Oe,bn-=Pt,jt-=Lt);var In=Ve*jt-Ue*bn;if(!ae.isMachineZero(In)){var Ln=pe-Pt,An=Oe-Lt,zn=(bn*An-jt*Ln)/In,Jn=(Ve*An-Ue*Ln)/In,Qn=1e-12,ta=-Qn,Pn=1+Qn;if(xn||ta<zn&&zn<Pn&&ta<Jn&&Jn<Pn)return xn||(zn=zn<=0?0:zn>=1?1:zn),new oe(pe+zn*Ve,Oe+zn*Ue)}},getSide:function(pe,Oe,Ve,Ue,Pt,Lt,bn,jt){bn||(Ve-=pe,Ue-=Oe);var Cn=Pt-pe,xn=Lt-Oe,In=Cn*Ue-xn*Ve;return!jt&&ae.isMachineZero(In)&&(In=(Cn*Ve+Cn*Ve)/(Ve*Ve+Ue*Ue),In>=0&&In<=1&&(In=0)),In<0?-1:In>0?1:0},getSignedDistance:function(pe,Oe,Ve,Ue,Pt,Lt,bn){return bn||(Ve-=pe,Ue-=Oe),Ve===0?Ue>0?Pt-pe:pe-Pt:Ue===0?Ve<0?Lt-Oe:Oe-Lt:((Pt-pe)*Ue-(Lt-Oe)*Ve)/(Ue>Ve?Ue*Math.sqrt(1+Ve*Ve/(Ue*Ue)):Ve*Math.sqrt(1+Ue*Ue/(Ve*Ve)))},getDistance:function(pe,Oe,Ve,Ue,Pt,Lt,bn){return Math.abs(Ne.getSignedDistance(pe,Oe,Ve,Ue,Pt,Lt,bn))}}}),$e=L.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(Oe){L.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Wn(null,null,this),this._view=Ca.create(this,Oe||aa.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(pe,Oe){return k.serialize(this._children,pe,!0,Oe)},_changed:function(pe,Oe){if(pe&1){var Ve=this._view;Ve&&(Ve._needsUpdate=!0,!Ve._requested&&Ve._autoUpdate&&Ve.requestUpdate())}var Ue=this._changes;if(Ue&&Oe){var Pt=this._changesById,Lt=Oe._id,bn=Pt[Lt];bn?bn.flags|=pe:Ue.push(Pt[Lt]={item:Oe,flags:pe})}},clear:function(){for(var pe=this._children,Oe=pe.length-1;Oe>=0;Oe--)pe[Oe].remove()},isEmpty:function(){return!this._children.length},remove:function pe(){return pe.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(pe){this._currentStyle.set(pe)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new ze({project:this,insert:!0})},getSymbolDefinitions:function(){var pe=[],Oe={};return this.getItems({class:_n,match:function(Ve){var Ue=Ve._definition,Pt=Ue._id;return Oe[Pt]||(Oe[Pt]=!0,pe.push(Ue)),!1}}),pe},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var pe=this._selectionItems,Oe=[];for(var Ve in pe){var Ue=pe[Ve],Pt=Ue._selection;Pt&1&&Ue.isInserted()?Oe.push(Ue):Pt||this._updateSelection(Ue)}return Oe},_updateSelection:function(pe){var Oe=pe._id,Ve=this._selectionItems;pe._selection?Ve[Oe]!==pe&&(this._selectionCount++,Ve[Oe]=pe):Ve[Oe]===pe&&(this._selectionCount--,delete Ve[Oe])},selectAll:function(){for(var pe=this._children,Oe=0,Ve=pe.length;Oe<Ve;Oe++)pe[Oe].setFullySelected(!0)},deselectAll:function(){var pe=this._selectionItems;for(var Oe in pe)pe[Oe].setFullySelected(!1)},addLayer:function(pe){return this.insertLayer(r,pe)},insertLayer:function(pe,Oe){if(Oe instanceof ze){Oe._remove(!1,!0),k.splice(this._children,[Oe],pe,0),Oe._setProject(this,!0);var Ve=Oe._name;Ve&&Oe.setName(Ve),this._changes&&Oe._changed(5),this._activeLayer||(this._activeLayer=Oe)}else Oe=null;return Oe},_insertItem:function(pe,Oe,Ve){return Oe=this.insertLayer(pe,Oe)||(this._activeLayer||this._insertItem(r,new ze(xe.NO_INSERT),!0)).insertChild(pe,Oe),Ve&&Oe.activate&&Oe.activate(),Oe},getItems:function(pe){return xe._getItems(this,pe)},getItem:function(pe){return xe._getItems(this,pe,null,null,!0)[0]||null},importJSON:function(pe){this.activate();var Oe=this._activeLayer;return k.importJSON(pe,Oe&&Oe.isEmpty()&&Oe)},removeOn:function(pe){var Oe=this._removeSets;if(Oe){pe==="mouseup"&&(Oe.mousedrag=null);var Ve=Oe[pe];if(Ve){for(var Ue in Ve){var Pt=Ve[Ue];for(var Lt in Oe){var bn=Oe[Lt];bn&&bn!=Ve&&delete bn[Pt._id]}Pt.remove()}Oe[pe]=null}}},draw:function(pe,Oe,Ve){this._updateVersion++,pe.save(),Oe.applyToContext(pe);for(var Ue=this._children,Pt=new k({offset:new oe(0,0),pixelRatio:Ve,viewMatrix:Oe.isIdentity()?null:Oe,matrices:[new Ce],updateMatrix:!0}),Lt=0,bn=Ue.length;Lt<bn;Lt++)Ue[Lt].draw(pe,Pt);if(pe.restore(),this._selectionCount>0){pe.save(),pe.strokeWidth=1;var jt=this._selectionItems,Cn=this._scope.settings.handleSize,xn=this._updateVersion;for(var In in jt)jt[In]._drawSelection(pe,Oe,Cn,jt,xn);pe.restore()}}}),xe=k.extend($,{statics:{extend:function pe(Oe){return Oe._serializeFields&&(Oe._serializeFields=k.set({},this.prototype._serializeFields,Oe._serializeFields)),pe.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new Ce,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var pe=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return k.each(pe,function(Oe){this._events[Oe]={install:function(Ve){this.getView()._countItemEvent(Ve,1)},uninstall:function(Ve){this.getView()._countItemEvent(Ve,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:pe}})},{initialize:function(){},_initialize:function(pe,Oe){var Ve=pe&&k.isPlainObject(pe),Ue=Ve&&pe.internal===!0,Pt=this._matrix=new Ce,Lt=Ve&&pe.project||ua.project,bn=ua.settings;return this._id=Ue?null:re.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&bn.applyMatrix,Oe&&Pt.translate(Oe),Pt._owner=this,this._style=new Wn(Lt._currentStyle,this,Lt),Ue||Ve&&pe.insert==!1||!bn.insertItems&&!(Ve&&pe.insert==!0)?this._setProject(Lt):(Ve&&pe.parent||Lt)._insertItem(r,this,!0),Ve&&pe!==xe.NO_INSERT&&pe!==xe.INSERT&&this.set(pe,{internal:!0,insert:!0,project:!0,parent:!0}),Ve},_serialize:function(pe,Oe){var Ve={},Ue=this;function Pt(Lt){for(var bn in Lt){var jt=Ue[bn];k.equals(jt,bn==="leading"?Lt.fontSize*1.2:Lt[bn])||(Ve[bn]=k.serialize(jt,pe,bn!=="data",Oe))}}return Pt(this._serializeFields),this instanceof Ie||Pt(this._style._defaults),[this._class,Ve]},_changed:function(pe){var Oe=this._symbol,Ve=this._parent||Oe,Ue=this._project;pe&8&&(this._bounds=this._position=this._decomposed=r),pe&16&&(this._globalMatrix=r),Ve&&pe&72&&xe._clearBoundsCache(Ve),pe&2&&xe._clearBoundsCache(this),Ue&&Ue._changed(pe,this),Oe&&Oe._changed(pe)},getId:function(){return this._id},getName:function(){return this._name},setName:function(pe){if(this._name&&this._removeNamed(),pe===+pe+"")throw new Error("Names consisting only of numbers are not supported.");var Oe=this._getOwner();if(pe&&Oe){var Ve=Oe._children,Ue=Oe._namedChildren;(Ue[pe]=Ue[pe]||[]).push(this),pe in Ve||(Ve[pe]=this)}this._name=pe||r,this._changed(256)},getStyle:function(){return this._style},setStyle:function(pe){this.getStyle().set(pe)}},k.each(["locked","visible","blendMode","opacity","guide"],function(pe){var Oe=k.capitalize(pe),Ve="_"+pe,Ue={locked:256,visible:265};this["get"+Oe]=function(){return this[Ve]},this["set"+Oe]=function(Pt){Pt!=this[Ve]&&(this[Ve]=Pt,this._changed(Ue[pe]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(pe){if(pe!==this._selection){this._selection=pe;var Oe=this._project;Oe&&(Oe._updateSelection(this),this._changed(257))}},_changeSelection:function(pe,Oe){var Ve=this._selection;this.setSelection(Oe?Ve|pe:Ve&~pe)},isSelected:function(){if(this._selectChildren){for(var pe=this._children,Oe=0,Ve=pe.length;Oe<Ve;Oe++)if(pe[Oe].isSelected())return!0}return!!(this._selection&1)},setSelected:function(pe){if(this._selectChildren)for(var Oe=this._children,Ve=0,Ue=Oe.length;Ve<Ue;Ve++)Oe[Ve].setSelected(pe);this._changeSelection(1,pe)},isFullySelected:function(){var pe=this._children,Oe=!!(this._selection&1);if(pe&&Oe){for(var Ve=0,Ue=pe.length;Ve<Ue;Ve++)if(!pe[Ve].isFullySelected())return!1;return!0}return Oe},setFullySelected:function(pe){var Oe=this._children;if(Oe)for(var Ve=0,Ue=Oe.length;Ve<Ue;Ve++)Oe[Ve].setFullySelected(pe);this._changeSelection(1,pe)},isClipMask:function(){return this._clipMask},setClipMask:function(pe){this._clipMask!=(pe=!!pe)&&(this._clipMask=pe,pe&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(pe){this._data=pe},getPosition:function(pe){var Oe=pe?oe:ue,Ve=this._position||(this._position=this._getPositionFromBounds());return new Oe(Ve.x,Ve.y,this,"setPosition")},setPosition:function(){this.translate(oe.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(pe){return this._pivot?this._matrix._transformPoint(this._pivot):(pe||this.getBounds()).getCenter(!0)},getPivot:function(){var pe=this._pivot;return pe?new ue(pe.x,pe.y,this,"setPivot"):null},setPivot:function(){this._pivot=oe.read(arguments,0,{clone:!0,readNull:!0}),this._position=r}},k.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(pe,Oe){this[Oe]=function(Ve){return this.getBounds(Ve,pe)}},{beans:!0,getBounds:function(pe,Oe){var Ve=Oe||pe instanceof Ce,Ue=k.set({},Ve?Oe:pe,this._boundsOptions);(!Ue.stroke||this.getStrokeScaling())&&(Ue.cacheItem=this);var Pt=this._getCachedBounds(Ve&&pe,Ue).rect;return arguments.length?Pt:new _e(Pt.x,Pt.y,Pt.width,Pt.height,this,"setBounds")},setBounds:function(){var pe=he.read(arguments),Oe=this.getBounds(),Ve=this._matrix,Ue=new Ce,Pt=pe.getCenter();Ue.translate(Pt),(pe.width!=Oe.width||pe.height!=Oe.height)&&(Ve.isInvertible()||(Ve.set(Ve._backup||new Ce().translate(Ve.getTranslation())),Oe=this.getBounds()),Ue.scale(Oe.width!==0?pe.width/Oe.width:0,Oe.height!==0?pe.height/Oe.height:0)),Pt=Oe.getCenter(),Ue.translate(-Pt.x,-Pt.y),this.transform(Ue)},_getBounds:function(pe,Oe){var Ve=this._children;return!Ve||!Ve.length?new he:(xe._updateBoundsCache(this,Oe.cacheItem),xe._getBounds(Ve,pe,Oe))},_getBoundsCacheKey:function(pe,Oe){return[pe.stroke?1:0,pe.handle?1:0,Oe?1:0].join("")},_getCachedBounds:function(pe,Oe,Ve){pe=pe&&pe._orNullIfIdentity();var Ue=Oe.internal&&!Ve,Pt=Oe.cacheItem,Lt=Ue?null:this._matrix._orNullIfIdentity(),bn=Pt&&(!pe||pe.equals(Lt))&&this._getBoundsCacheKey(Oe,Ue),jt=this._bounds;if(xe._updateBoundsCache(this._parent||this._symbol,Pt),bn&&jt&&bn in jt){var Cn=jt[bn];return{rect:Cn.rect.clone(),nonscaling:Cn.nonscaling}}var xn=this._getBounds(pe||Lt,Oe),In=xn.rect||xn,Ln=this._style,An=xn.nonscaling||Ln.hasStroke()&&!Ln.getStrokeScaling();if(bn){jt||(this._bounds=jt={});var Cn=jt[bn]={rect:In.clone(),nonscaling:An,internal:Ue}}return{rect:In,nonscaling:An}},_getStrokeMatrix:function(pe,Oe){var Ve=this.getStrokeScaling()?null:Oe&&Oe.internal?this:this._parent||this._symbol&&this._symbol._item,Ue=Ve?Ve.getViewMatrix().invert():pe;return Ue&&Ue._shiftless()},statics:{_updateBoundsCache:function(pe,Oe){if(pe&&Oe){var Ve=Oe._id,Ue=pe._boundsCache=pe._boundsCache||{ids:{},list:[]};Ue.ids[Ve]||(Ue.list.push(Oe),Ue.ids[Ve]=Oe)}},_clearBoundsCache:function(pe){var Oe=pe._boundsCache;if(Oe){pe._bounds=pe._position=pe._boundsCache=r;for(var Ve=0,Ue=Oe.list,Pt=Ue.length;Ve<Pt;Ve++){var Lt=Ue[Ve];Lt!==pe&&(Lt._bounds=Lt._position=r,Lt._boundsCache&&xe._clearBoundsCache(Lt))}}},_getBounds:function(pe,Oe,Ve){var Ue=1/0,Pt=-Ue,Lt=Ue,bn=Pt,jt=!1;Ve=Ve||{};for(var Cn=0,xn=pe.length;Cn<xn;Cn++){var In=pe[Cn];if(In._visible&&!In.isEmpty(!0)){var Ln=In._getCachedBounds(Oe&&Oe.appended(In._matrix),Ve,!0),An=Ln.rect;Ue=Math.min(An.x,Ue),Lt=Math.min(An.y,Lt),Pt=Math.max(An.x+An.width,Pt),bn=Math.max(An.y+An.height,bn),Ln.nonscaling&&(jt=!0)}}return{rect:isFinite(Ue)?new he(Ue,Lt,Pt-Ue,bn-Lt):new he,nonscaling:jt}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var pe=this._decompose();return pe?pe.rotation:0},setRotation:function(pe){var Oe=this.getRotation();if(Oe!=null&&pe!=null){var Ve=this._decomposed;this.rotate(pe-Oe),Ve&&(Ve.rotation=pe,this._decomposed=Ve)}},getScaling:function(){var pe=this._decompose(),Oe=pe&&pe.scaling;return new ue(Oe?Oe.x:1,Oe?Oe.y:1,this,"setScaling")},setScaling:function(){var pe=this.getScaling(),Oe=oe.read(arguments,0,{clone:!0,readNull:!0});if(pe&&Oe&&!pe.equals(Oe)){var Ve=this.getRotation(),Ue=this._decomposed,Pt=new Ce,Lt=ae.isZero;if(Lt(pe.x)||Lt(pe.y))Pt.translate(Ue.translation),Ve&&Pt.rotate(Ve),Pt.scale(Oe.x,Oe.y),this._matrix.set(Pt);else{var bn=this.getPosition(!0);Pt.translate(bn),Ve&&Pt.rotate(Ve),Pt.scale(Oe.x/pe.x,Oe.y/pe.y),Ve&&Pt.rotate(-Ve),Pt.translate(bn.negate()),this.transform(Pt)}Ue&&(Ue.scaling=Oe,this._decomposed=Ue)}},getMatrix:function(){return this._matrix},setMatrix:function(){var pe=this._matrix;pe.set.apply(pe,arguments)},getGlobalMatrix:function(pe){var Oe=this._globalMatrix;if(Oe)for(var Ve=this._parent,Ue=[];Ve;){if(!Ve._globalMatrix){Oe=null;for(var Pt=0,Lt=Ue.length;Pt<Lt;Pt++)Ue[Pt]._globalMatrix=null;break}Ue.push(Ve),Ve=Ve._parent}if(!Oe){Oe=this._globalMatrix=this._matrix.clone();var Ve=this._parent;Ve&&Oe.prepend(Ve.getGlobalMatrix(!0))}return pe?Oe:Oe.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(pe){(this._applyMatrix=this._canApplyMatrix&&!!pe)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(pe,Oe){if(this._project!==pe){this._project&&this._installEvents(!1),this._project=pe;for(var Ve=this._children,Ue=0,Pt=Ve&&Ve.length;Ue<Pt;Ue++)Ve[Ue]._setProject(pe);Oe=!0}Oe&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function pe(Oe){pe.base.call(this,Oe);for(var Ve=this._children,Ue=0,Pt=Ve&&Ve.length;Ue<Pt;Ue++)Ve[Ue]._installEvents(Oe)},getLayer:function(){for(var pe=this;pe=pe._parent;)if(pe instanceof ze)return pe;return null},getParent:function(){return this._parent},setParent:function(pe){return pe.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(pe){this.removeChildren(),this.addChildren(pe)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var pe=this._getOwner();return pe&&pe._children[this._index+1]||null},getPreviousSibling:function(){var pe=this._getOwner();return pe&&pe._children[this._index-1]||null},getIndex:function(){return this._index},setIndex:function(pe){var Oe=this._parent,Ve=Oe&&Oe._children;Ve&&Oe.insertChildren(pe in Ve?pe:r,[this])},equals:function(pe){return pe===this||pe&&this._class===pe._class&&this._style.equals(pe._style)&&this._matrix.equals(pe._matrix)&&this._locked===pe._locked&&this._visible===pe._visible&&this._blendMode===pe._blendMode&&this._opacity===pe._opacity&&this._clipMask===pe._clipMask&&this._guide===pe._guide&&this._equals(pe)||!1},_equals:function(pe){return k.equals(this._children,pe._children)},clone:function(pe){var Oe=new this.constructor(xe.NO_INSERT),Ve=this._children,Ue=k.pick(pe?pe.insert:r,pe===r||pe===!0),Pt=k.pick(pe?pe.deep:r,!0);Ve&&Oe.copyAttributes(this),(!Ve||Pt)&&Oe.copyContent(this),Ve||Oe.copyAttributes(this),Ue&&Oe.insertAbove(this);var Lt=this._name,bn=this._parent;if(Lt&&bn){for(var Ve=bn._children,jt=Lt,Cn=1;Ve[Lt];)Lt=jt+" "+Cn++;Lt!==jt&&Oe.setName(Lt)}return Oe},copyContent:function(pe){for(var Oe=pe._children,Ve=0,Ue=Oe&&Oe.length;Ve<Ue;Ve++)this.addChild(Oe[Ve].clone(!1),!0)},copyAttributes:function(pe,Oe){this.setStyle(pe._style);for(var Ve=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],Ue=0,Pt=Ve.length;Ue<Pt;Ue++){var Lt=Ve[Ue];pe.hasOwnProperty(Lt)&&(this[Lt]=pe[Lt])}Oe||this._matrix.set(pe._matrix,!0),this.setApplyMatrix(pe._applyMatrix),this.setPivot(pe._pivot),this.setSelection(pe._selection);var bn=pe._data,jt=pe._name;this._data=bn?k.clone(bn):null,jt&&this.setName(jt)},rasterize:function(pe,Oe){var Ve,Ue,Pt;k.isPlainObject(pe)?(Ve=pe.resolution,Ue=pe.insert,Pt=pe.raster):(Ve=pe,Ue=Oe),Pt||(Pt=new Et(xe.NO_INSERT));var Lt=this.getStrokeBounds(),bn=(Ve||this.getView().getResolution())/72,jt=Lt.getTopLeft().floor(),Cn=Lt.getBottomRight().ceil(),xn=new le(Cn.subtract(jt)),In=xn.multiply(bn);if(Pt.setSize(In,!0),!In.isZero()){var Ln=Pt.getContext(!0),An=new Ce().scale(bn).translate(jt.negate());Ln.save(),An.applyToContext(Ln),this.draw(Ln,new k({matrices:[An]})),Ln.restore()}return Pt._matrix.set(new Ce().translate(jt.add(xn.divide(2))).scale(1/bn)),(Ue===r||Ue)&&Pt.insertAbove(this),Pt},contains:function(){var pe=this._matrix;return pe.isInvertible()&&!!this._contains(pe._inverseTransform(oe.read(arguments)))},_contains:function(pe){var Oe=this._children;if(Oe){for(var Ve=Oe.length-1;Ve>=0;Ve--)if(Oe[Ve].contains(pe))return!0;return!1}return pe.isInside(this.getInternalBounds())},isInside:function(){return he.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new kn.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(pe,Oe){return pe instanceof xe?this._asPathItem().getIntersections(pe._asPathItem(),null,Oe,!0).length>0:!1}},new function(){function pe(){var Ue=arguments;return this._hitTest(oe.read(Ue),Sn.getOptions(Ue))}function Oe(){var Ue=arguments,Pt=oe.read(Ue),Lt=Sn.getOptions(Ue),bn=[];return this._hitTest(Pt,new k({all:bn},Lt)),bn}function Ve(Ue,Pt,Lt,bn){var jt=this._children;if(jt)for(var Cn=jt.length-1;Cn>=0;Cn--){var xn=jt[Cn],In=xn!==bn&&xn._hitTest(Ue,Pt,Lt);if(In&&!Pt.all)return In}return null}return $e.inject({hitTest:pe,hitTestAll:Oe,_hitTest:Ve}),{hitTest:pe,hitTestAll:Oe,_hitTestChildren:Ve}},{_hitTest:function(pe,Oe,Ve){if(this._locked||!this._visible||this._guide&&!Oe.guides||this.isEmpty())return null;var Ue=this._matrix,Pt=Ve?Ve.appended(Ue):this.getGlobalMatrix().prepend(this.getView()._matrix),Lt=Math.max(Oe.tolerance,1e-12),bn=Oe._tolerancePadding=new le(kn._getStrokePadding(Lt,Ue._shiftless().invert()));if(pe=Ue._inverseTransform(pe),!pe||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(bn.multiply(2))._containsPoint(pe))return null;var jt=!(Oe.guides&&!this._guide||Oe.selected&&!this.isSelected()||Oe.type&&Oe.type!==k.hyphenate(this._class)||Oe.class&&!(this instanceof Oe.class)),Cn=Oe.match,xn=this,In,Ln;function An(On){return On&&Cn&&!Cn(On)&&(On=null),On&&Oe.all&&Oe.all.push(On),On}function zn(On,Rn){var Yn=Rn?In["get"+Rn]():xn.getPosition();if(pe.subtract(Yn).divide(bn).length<=1)return new Sn(On,xn,{name:Rn?k.hyphenate(Rn):On,point:Yn})}var Jn=Oe.position,Qn=Oe.center,ta=Oe.bounds;if(jt&&this._parent&&(Jn||Qn||ta)){if((Qn||ta)&&(In=this.getInternalBounds()),Ln=Jn&&zn("position")||Qn&&zn("center","Center"),!Ln&&ta)for(var Pn=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],Un=0;Un<8&&!Ln;Un++)Ln=zn("bounds",Pn[Un]);Ln=An(Ln)}return Ln||(Ln=this._hitTestChildren(pe,Oe,Pt)||jt&&An(this._hitTestSelf(pe,Oe,Pt,this.getStrokeScaling()?null:Pt._shiftless().invert()))||null),Ln&&Ln.point&&(Ln.point=Ue.transform(Ln.point)),Ln},_hitTestSelf:function(pe,Oe){if(Oe.fill&&this.hasFill()&&this._contains(pe))return new Sn("fill",this)},matches:function(pe,Oe){function Ve(bn,jt){for(var Cn in bn)if(bn.hasOwnProperty(Cn)){var xn=bn[Cn],In=jt[Cn];if(k.isPlainObject(xn)&&k.isPlainObject(In)){if(!Ve(xn,In))return!1}else if(!k.equals(xn,In))return!1}return!0}var Ue=typeof pe;if(Ue==="object"){for(var Pt in pe)if(pe.hasOwnProperty(Pt)&&!this.matches(Pt,pe[Pt]))return!1;return!0}else{if(Ue==="function")return pe(this);if(pe==="match")return Oe(this);var Lt=/^(empty|editable)$/.test(pe)?this["is"+k.capitalize(pe)]():pe==="type"?k.hyphenate(this._class):this[pe];if(pe==="class"){if(typeof Oe=="function")return this instanceof Oe;Lt=this._class}if(typeof Oe=="function")return!!Oe(Lt);if(Oe){if(Oe.test)return Oe.test(Lt);if(k.isPlainObject(Oe))return Ve(Oe,Lt)}return k.equals(Lt,Oe)}},getItems:function(pe){return xe._getItems(this,pe,this._matrix)},getItem:function(pe){return xe._getItems(this,pe,this._matrix,null,!0)[0]||null},statics:{_getItems:function pe(Oe,Ve,Ue,Pt,Lt){if(!Pt){var bn=typeof Ve=="object"&&Ve,jt=bn&&bn.overlapping,Cn=bn&&bn.inside,xn=jt||Cn,An=xn&&he.read([xn]);Pt={items:[],recursive:bn&&bn.recursive!==!1,inside:!!Cn,overlapping:!!jt,rect:An,path:jt&&new kn.Rectangle({rectangle:An,insert:!1})},bn&&(Ve=k.filter({},Ve,{recursive:!0,inside:!0,overlapping:!0}))}var In=Oe._children,Ln=Pt.items,An=Pt.rect;Ue=An&&(Ue||new Ce);for(var zn=0,Jn=In&&In.length;zn<Jn;zn++){var Qn=In[zn],ta=Ue&&Ue.appended(Qn._matrix),Pn=!0;if(An){var xn=Qn.getBounds(ta);if(!An.intersects(xn))continue;An.contains(xn)||Pt.overlapping&&(xn.contains(An)||Pt.path.intersects(Qn,ta))||(Pn=!1)}if(Pn&&Qn.matches(Ve)&&(Ln.push(Qn),Lt)||(Pt.recursive!==!1&&pe(Qn,Ve,ta,Pt,Lt),Lt&&Ln.length>0))break}return Ln}}},{importJSON:function(pe){var Oe=k.importJSON(pe,this);return Oe!==this?this.addChild(Oe):Oe},addChild:function(pe){return this.insertChild(r,pe)},insertChild:function(pe,Oe){var Ve=Oe?this.insertChildren(pe,[Oe]):null;return Ve&&Ve[0]},addChildren:function(pe){return this.insertChildren(this._children.length,pe)},insertChildren:function(pe,Oe){var Ve=this._children;if(Ve&&Oe&&Oe.length>0){Oe=k.slice(Oe);for(var Ue={},Pt=Oe.length-1;Pt>=0;Pt--){var Lt=Oe[Pt],bn=Lt&&Lt._id;!Lt||Ue[bn]?Oe.splice(Pt,1):(Lt._remove(!1,!0),Ue[bn]=!0)}k.splice(Ve,Oe,pe,0);for(var jt=this._project,Cn=jt._changes,Pt=0,xn=Oe.length;Pt<xn;Pt++){var Lt=Oe[Pt],In=Lt._name;Lt._parent=this,Lt._setProject(jt,!0),In&&Lt.setName(In),Cn&&Lt._changed(5)}this._changed(11)}else Oe=null;return Oe},_insertItem:"#insertChild",_insertAt:function(pe,Oe){var Ve=pe&&pe._getOwner(),Ue=pe!==this&&Ve?this:null;return Ue&&(Ue._remove(!1,!0),Ve._insertItem(pe._index+Oe,Ue)),Ue},insertAbove:function(pe){return this._insertAt(pe,1)},insertBelow:function(pe){return this._insertAt(pe,0)},sendToBack:function(){var pe=this._getOwner();return pe?pe._insertItem(0,this):null},bringToFront:function(){var pe=this._getOwner();return pe?pe._insertItem(r,this):null},appendTop:"#addChild",appendBottom:function(pe){return this.insertChild(0,pe)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(pe){return pe._insertItem(r,this)},copyTo:function(pe){return this.clone(!1).addTo(pe)},reduce:function(pe){var Oe=this._children;if(Oe&&Oe.length===1){var Ve=Oe[0].reduce(pe);return this._parent?(Ve.insertAbove(this),this.remove()):Ve.remove(),Ve}return this},_removeNamed:function(){var pe=this._getOwner();if(pe){var Oe=pe._children,Ve=pe._namedChildren,Ue=this._name,Pt=Ve[Ue],Lt=Pt?Pt.indexOf(this):-1;Lt!==-1&&(Oe[Ue]==this&&delete Oe[Ue],Pt.splice(Lt,1),Pt.length?Oe[Ue]=Pt[0]:delete Ve[Ue])}},_remove:function(pe,Oe){var Ve=this._getOwner(),Ue=this._project,Pt=this._index;return this._style&&this._style._dispose(),Ve?(this._name&&this._removeNamed(),Pt!=null&&(Ue._activeLayer===this&&(Ue._activeLayer=this.getNextSibling()||this.getPreviousSibling()),k.splice(Ve._children,null,Pt,1)),this._installEvents(!1),pe&&Ue._changes&&this._changed(5),Oe&&Ve._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(pe){var Oe=pe&&pe.insertBelow(this);return Oe&&this.remove(),Oe},removeChildren:function(pe,Oe){if(!this._children)return null;pe=pe||0,Oe=k.pick(Oe,this._children.length);for(var Ve=k.splice(this._children,null,pe,Oe-pe),Ue=Ve.length-1;Ue>=0;Ue--)Ve[Ue]._remove(!0,!1);return Ve.length>0&&this._changed(11),Ve},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var pe=0,Oe=this._children.length;pe<Oe;pe++)this._children[pe]._index=pe;this._changed(11)}},isEmpty:function(pe){var Oe=this._children,Ve=Oe?Oe.length:0;if(pe){for(var Ue=0;Ue<Ve;Ue++)if(!Oe[Ue].isEmpty(pe))return!1;return!0}return!Ve},isEditable:function(){for(var pe=this;pe;){if(!pe._visible||pe._locked)return!1;pe=pe._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(pe){function Oe(bn){var jt=[];do jt.unshift(bn);while(bn=bn._parent);return jt}for(var Ve=Oe(this),Ue=Oe(pe),Pt=0,Lt=Math.min(Ve.length,Ue.length);Pt<Lt;Pt++)if(Ve[Pt]!=Ue[Pt])return Ve[Pt]._index<Ue[Pt]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(pe){return this._getOrder(pe)===-1},isBelow:function(pe){return this._getOrder(pe)===1},isParent:function(pe){return this._parent===pe},isChild:function(pe){return pe&&pe._parent===this},isDescendant:function(pe){for(var Oe=this;Oe=Oe._parent;)if(Oe===pe)return!0;return!1},isAncestor:function(pe){return pe?pe.isDescendant(this):!1},isSibling:function(pe){return this._parent===pe._parent},isGroupedWith:function(pe){for(var Oe=this._parent;Oe;){if(Oe._parent&&/^(Group|Layer|CompoundPath)$/.test(Oe._class)&&pe.isDescendant(Oe))return!0;Oe=Oe._parent}return!1}},k.each(["rotate","scale","shear","skew"],function(pe){var Oe=pe==="rotate";this[pe]=function(){var Ve=arguments,Ue=(Oe?k:oe).read(Ve),Pt=oe.read(Ve,0,{readNull:!0});return this.transform(new Ce()[pe](Ue,Pt||this.getPosition(!0)))}},{translate:function(){var pe=new Ce;return this.transform(pe.translate.apply(pe,arguments))},transform:function(pe,Oe,Ve){var Ue=this._matrix,Pt=pe&&!pe.isIdentity(),Lt=Ve&&this._canApplyMatrix||this._applyMatrix&&(Pt||!Ue.isIdentity()||Oe&&this._children);if(!Pt&&!Lt)return this;if(Pt){!pe.isInvertible()&&Ue.isInvertible()&&(Ue._backup=Ue.getValues()),Ue.prepend(pe,!0);var bn=this._style,jt=bn.getFillColor(!0),Cn=bn.getStrokeColor(!0);jt&&jt.transform(pe),Cn&&Cn.transform(pe)}if(Lt&&(Lt=this._transformContent(Ue,Oe,Ve))){var xn=this._pivot;xn&&Ue._transformPoint(xn,xn,!0),Ue.reset(!0),Ve&&this._canApplyMatrix&&(this._applyMatrix=!0)}var In=this._bounds,Ln=this._position;(Pt||Lt)&&this._changed(25);var An=Pt&&In&&pe.decompose();if(An&&An.skewing.isZero()&&An.rotation%90===0){for(var zn in In){var Jn=In[zn];if(Jn.nonscaling)delete In[zn];else if(Lt||!Jn.internal){var Qn=Jn.rect;pe._transformBounds(Qn,Qn)}}this._bounds=In;var ta=In[this._getBoundsCacheKey(this._boundsOptions||{})];ta&&(this._position=this._getPositionFromBounds(ta.rect))}else Pt&&Ln&&this._pivot&&(this._position=pe._transformPoint(Ln,Ln));return this},_transformContent:function(pe,Oe,Ve){var Ue=this._children;if(Ue){for(var Pt=0,Lt=Ue.length;Pt<Lt;Pt++)Ue[Pt].transform(pe,Oe,Ve);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(oe.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(oe.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(oe.read(arguments))},localToParent:function(){return this._matrix._transformPoint(oe.read(arguments))},fitBounds:function(pe,Oe){pe=he.read(arguments);var Ve=this.getBounds(),Ue=Ve.height/Ve.width,Pt=pe.height/pe.width,Lt=(Oe?Ue>Pt:Ue<Pt)?pe.width/Ve.width:pe.height/Ve.height,bn=new he(new oe,new le(Ve.width*Lt,Ve.height*Lt));bn.setCenter(pe.getCenter()),this.setBounds(bn)}}),{_setStyles:function(pe,Oe,Ve){var Ue=this._style,Pt=this._matrix;if(Ue.hasFill()&&(pe.fillStyle=Ue.getFillColor().toCanvasStyle(pe,Pt)),Ue.hasStroke()){pe.strokeStyle=Ue.getStrokeColor().toCanvasStyle(pe,Pt),pe.lineWidth=Ue.getStrokeWidth();var Lt=Ue.getStrokeJoin(),bn=Ue.getStrokeCap(),jt=Ue.getMiterLimit();if(Lt&&(pe.lineJoin=Lt),bn&&(pe.lineCap=bn),jt&&(pe.miterLimit=jt),ua.support.nativeDash){var Cn=Ue.getDashArray(),xn=Ue.getDashOffset();Cn&&Cn.length&&("setLineDash"in pe?(pe.setLineDash(Cn),pe.lineDashOffset=xn):(pe.mozDash=Cn,pe.mozDashOffset=xn))}}if(Ue.hasShadow()){var In=Oe.pixelRatio||1,Ln=Ve._shiftless().prepend(new Ce().scale(In,In)),An=Ln.transform(new oe(Ue.getShadowBlur(),0)),zn=Ln.transform(this.getShadowOffset());pe.shadowColor=Ue.getShadowColor().toCanvasStyle(pe),pe.shadowBlur=An.getLength(),pe.shadowOffsetX=zn.x,pe.shadowOffsetY=zn.y}},draw:function(pe,Oe,Ve){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var Ue=Oe.matrices,Pt=Oe.viewMatrix,Lt=this._matrix,bn=Ue[Ue.length-1].appended(Lt);if(bn.isInvertible()){Pt=Pt?Pt.appended(bn):bn,Ue.push(bn),Oe.updateMatrix&&(this._globalMatrix=bn);var jt=this._blendMode,Cn=ae.clamp(this._opacity,0,1),xn=jt==="normal",In=sa.nativeModes[jt],Ln=xn&&Cn===1||Oe.dontStart||Oe.clip||(In||xn&&Cn<1)&&this._canComposite(),An=Oe.pixelRatio||1,zn,Jn,Qn;if(!Ln){var ta=this.getStrokeBounds(Pt);if(!ta.width||!ta.height){Ue.pop();return}Qn=Oe.offset,Jn=Oe.offset=ta.getTopLeft().floor(),zn=pe,pe=aa.getContext(ta.getSize().ceil().add(1).multiply(An)),An!==1&&pe.scale(An,An)}pe.save();var Pn=Ve?Ve.appended(Lt):this._canScaleStroke&&!this.getStrokeScaling(!0)&&Pt,Un=!Ln&&Oe.clipItem,On=!Pn||Un;if(Ln?(pe.globalAlpha=Cn,In&&(pe.globalCompositeOperation=jt)):On&&pe.translate(-Jn.x,-Jn.y),On&&(Ln?Lt:Pt).applyToContext(pe),Un&&Oe.clipItem.draw(pe,Oe.extend({clip:!0})),Pn){pe.setTransform(An,0,0,An,0,0);var Rn=Oe.offset;Rn&&pe.translate(-Rn.x,-Rn.y)}this._draw(pe,Oe,Pt,Pn),pe.restore(),Ue.pop(),Oe.clip&&!Oe.dontFinish&&pe.clip(this.getFillRule()),Ln||(sa.process(jt,pe,zn,Cn,Jn.subtract(Qn).multiply(An)),aa.release(pe),Oe.offset=Qn)}}},_isUpdated:function(pe){var Oe=this._parent;if(Oe instanceof jn)return Oe._isUpdated(pe);var Ve=this._updateVersion===pe;return!Ve&&Oe&&Oe._visible&&Oe._isUpdated(pe)&&(this._updateVersion=pe,Ve=!0),Ve},_drawSelection:function(pe,Oe,Ve,Ue,Pt){var Lt=this._selection,bn=Lt&1,jt=Lt&2||bn&&this._selectBounds,Cn=Lt&4;if(this._drawSelected||(bn=!1),(bn||jt||Cn)&&this._isUpdated(Pt)){var xn,In=this.getSelectedColor(!0)||(xn=this.getLayer())&&xn.getSelectedColor(!0),Ln=Oe.appended(this.getGlobalMatrix(!0)),An=Ve/2;if(pe.strokeStyle=pe.fillStyle=In?In.toCanvasStyle(pe):"#009dec",bn&&this._drawSelected(pe,Ln,Ue),Cn){var zn=this.getPosition(!0),Jn=this._parent,Qn=Jn?Jn.localToGlobal(zn):zn,ta=Qn.x,Pn=Qn.y;pe.beginPath(),pe.arc(ta,Pn,An,0,Math.PI*2,!0),pe.stroke();for(var Un=[[0,-1],[1,0],[0,1],[-1,0]],On=An,Rn=Ve+1,Yn=0;Yn<4;Yn++){var na=Un[Yn],ea=na[0],pa=na[1];pe.moveTo(ta+ea*On,Pn+pa*On),pe.lineTo(ta+ea*Rn,Pn+pa*Rn),pe.stroke()}}if(jt){var ha=Ln._transformCorners(this.getInternalBounds());pe.beginPath();for(var Yn=0;Yn<8;Yn++)pe[Yn?"lineTo":"moveTo"](ha[Yn],ha[++Yn]);pe.closePath(),pe.stroke();for(var Yn=0;Yn<8;Yn++)pe.fillRect(ha[Yn]-An,ha[++Yn]-An,Ve,Ve)}}},_canComposite:function(){return!1}},k.each(["down","drag","up","move"],function(pe){this["removeOn"+k.capitalize(pe)]=function(){var Oe={};return Oe[pe]=!0,this.removeOn(Oe)}},{removeOn:function(pe){for(var Oe in pe)if(pe[Oe]){var Ve="mouse"+Oe,Ue=this._project,Pt=Ue._removeSets=Ue._removeSets||{};Pt[Ve]=Pt[Ve]||{},Pt[Ve][this._id]=this}return this}}),{tween:function(pe,Oe,Ve){Ve||(Ve=Oe,Oe=pe,pe=null,Ve||(Ve=Oe,Oe=null));var Ue=Ve&&Ve.easing,Pt=Ve&&Ve.start,Lt=Ve!=null&&(typeof Ve=="number"?Ve:Ve.duration),bn=new Dn(this,pe,Oe,Lt,Ue,Pt);function jt(Cn){bn._handleFrame(Cn.time*1e3),bn.running||this.off("frame",jt)}return Lt&&this.on("frame",jt),bn},tweenTo:function(pe,Oe){return this.tween(null,pe,Oe)},tweenFrom:function(pe,Oe){return this.tween(pe,null,Oe)}}),Ie=xe.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(Oe){this._children=[],this._namedChildren={},this._initialize(Oe)||this.addChildren(Array.isArray(Oe)?Oe:arguments)},_changed:function pe(Oe){pe.base.call(this,Oe),Oe&2050&&(this._clipItem=r)},_getClipItem:function(){var pe=this._clipItem;if(pe===r){pe=null;for(var Oe=this._children,Ve=0,Ue=Oe.length;Ve<Ue;Ve++)if(Oe[Ve]._clipMask){pe=Oe[Ve];break}this._clipItem=pe}return pe},isClipped:function(){return!!this._getClipItem()},setClipped:function(pe){var Oe=this.getFirstChild();Oe&&Oe.setClipMask(pe)},_getBounds:function pe(Oe,Ve){var Ue=this._getClipItem();return Ue?Ue._getCachedBounds(Ue._matrix.prepended(Oe),k.set({},Ve,{stroke:!1})):pe.base.call(this,Oe,Ve)},_hitTestChildren:function pe(Oe,Ve,Ue){var Pt=this._getClipItem();return(!Pt||Pt.contains(Oe))&&pe.base.call(this,Oe,Ve,Ue,Pt)},_draw:function(pe,Oe){var Ve=Oe.clip,Ue=!Ve&&this._getClipItem();Oe=Oe.extend({clipItem:Ue,clip:!1}),Ve?(pe.beginPath(),Oe.dontStart=Oe.dontFinish=!0):Ue&&Ue.draw(pe,Oe.extend({clip:!0}));for(var Pt=this._children,Lt=0,bn=Pt.length;Lt<bn;Lt++){var jt=Pt[Lt];jt!==Ue&&jt.draw(pe,Oe)}}}),ze=Ie.extend({_class:"Layer",initialize:function(){Ie.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function pe(){return this._parent?pe.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),qe=xe.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(Oe,Ve){this._initialize(Oe,Ve)},_equals:function(pe){return this._type===pe._type&&this._size.equals(pe._size)&&k.equals(this._radius,pe._radius)},copyContent:function(pe){this.setType(pe._type),this.setSize(pe._size),this.setRadius(pe._radius)},getType:function(){return this._type},setType:function(pe){this._type=pe},getShape:"#getType",setShape:"#setType",getSize:function(){var pe=this._size;return new de(pe.width,pe.height,this,"setSize")},setSize:function(){var pe=le.read(arguments);if(!this._size)this._size=pe.clone();else if(!this._size.equals(pe)){var Oe=this._type,Ve=pe.width,Ue=pe.height;Oe==="rectangle"?this._radius.set(le.min(this._radius,pe.divide(2).abs())):Oe==="circle"?(Ve=Ue=(Ve+Ue)/2,this._radius=Ve/2):Oe==="ellipse"&&this._radius._set(Ve/2,Ue/2),this._size._set(Ve,Ue),this._changed(9)}},getRadius:function(){var pe=this._radius;return this._type==="circle"?pe:new de(pe.width,pe.height,this,"setRadius")},setRadius:function(pe){var Oe=this._type;if(Oe==="circle"){if(pe===this._radius)return;var Ve=pe*2;this._radius=pe,this._size._set(Ve,Ve)}else if(pe=le.read(arguments),!this._radius)this._radius=pe.clone();else{if(this._radius.equals(pe))return;if(this._radius.set(pe),Oe==="rectangle"){var Ve=le.max(this._size,pe.multiply(2));this._size.set(Ve)}else Oe==="ellipse"&&this._size._set(pe.width*2,pe.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(pe){var Oe=new kn[k.capitalize(this._type)]({center:new oe,size:this._size,radius:this._radius,insert:!1});return Oe.copyAttributes(this),ua.settings.applyMatrix&&Oe.setApplyMatrix(!0),(pe===r||pe)&&Oe.insertAbove(this),Oe},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(pe,Oe,Ve,Ue){var Pt=this._style,Lt=Pt.hasFill(),bn=Pt.hasStroke(),jt=Oe.dontFinish||Oe.clip,Cn=!Ue;if(Lt||bn||jt){var xn=this._type,In=this._radius,Ln=xn==="circle";if(Oe.dontStart||pe.beginPath(),Cn&&Ln)pe.arc(0,0,In,0,Math.PI*2,!0);else{var An=Ln?In:In.width,zn=Ln?In:In.height,Jn=this._size,Qn=Jn.width,ta=Jn.height;if(Cn&&xn==="rectangle"&&An===0&&zn===0)pe.rect(-Qn/2,-ta/2,Qn,ta);else{var Pn=Qn/2,Un=ta/2,On=1-.5522847498307936,Rn=An*On,Yn=zn*On,na=[-Pn,-Un+zn,-Pn,-Un+Yn,-Pn+Rn,-Un,-Pn+An,-Un,Pn-An,-Un,Pn-Rn,-Un,Pn,-Un+Yn,Pn,-Un+zn,Pn,Un-zn,Pn,Un-Yn,Pn-Rn,Un,Pn-An,Un,-Pn+An,Un,-Pn+Rn,Un,-Pn,Un-Yn,-Pn,Un-zn];Ue&&Ue.transform(na,na,32),pe.moveTo(na[0],na[1]),pe.bezierCurveTo(na[2],na[3],na[4],na[5],na[6],na[7]),Pn!==An&&pe.lineTo(na[8],na[9]),pe.bezierCurveTo(na[10],na[11],na[12],na[13],na[14],na[15]),Un!==zn&&pe.lineTo(na[16],na[17]),pe.bezierCurveTo(na[18],na[19],na[20],na[21],na[22],na[23]),Pn!==An&&pe.lineTo(na[24],na[25]),pe.bezierCurveTo(na[26],na[27],na[28],na[29],na[30],na[31])}}pe.closePath()}!jt&&(Lt||bn)&&(this._setStyles(pe,Oe,Ve),Lt&&(pe.fill(Pt.getFillRule()),pe.shadowColor="rgba(0,0,0,0)"),bn&&pe.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(pe,Oe){var Ve=new he(this._size).setCenter(0,0),Ue=this._style,Pt=Oe.stroke&&Ue.hasStroke()&&Ue.getStrokeWidth();return pe&&(Ve=pe._transformBounds(Ve)),Pt?Ve.expand(kn._getStrokePadding(Pt,this._getStrokeMatrix(pe,Oe))):Ve}},new function(){function pe(Ve,Ue,Pt){var Lt=Ve._radius;if(!Lt.isZero())for(var bn=Ve._size.divide(2),jt=1;jt<=4;jt++){var Cn=new oe(jt>1&&jt<4?-1:1,jt>2?-1:1),xn=Cn.multiply(bn),In=xn.subtract(Cn.multiply(Lt)),Ln=new he(Pt?xn.add(Cn.multiply(Pt)):xn,In);if(Ln.contains(Ue))return{point:In,quadrant:jt}}}function Oe(Ve,Ue,Pt,Lt){var bn=Ve.divide(Ue);return(!Lt||bn.isInQuadrant(Lt))&&bn.subtract(bn.normalize()).multiply(Ue).divide(Pt).length<=1}return{_contains:function Ve(Ue){if(this._type==="rectangle"){var Pt=pe(this,Ue);return Pt?Ue.subtract(Pt.point).divide(this._radius).getLength()<=1:Ve.base.call(this,Ue)}else return Ue.divide(this.size).getLength()<=.5},_hitTestSelf:function Ve(Ue,Pt,Lt,bn){var jt=!1,Cn=this._style,xn=Pt.stroke&&Cn.hasStroke(),In=Pt.fill&&Cn.hasFill();if(xn||In){var Ln=this._type,An=this._radius,zn=xn?Cn.getStrokeWidth()/2:0,Jn=Pt._tolerancePadding.add(kn._getStrokePadding(zn,!Cn.getStrokeScaling()&&bn));if(Ln==="rectangle"){var Qn=Jn.multiply(2),ta=pe(this,Ue,Qn);if(ta)jt=Oe(Ue.subtract(ta.point),An,Jn,ta.quadrant);else{var Pn=new he(this._size).setCenter(0,0),Un=Pn.expand(Qn),On=Pn.expand(Qn.negate());jt=Un._containsPoint(Ue)&&!On._containsPoint(Ue)}}else jt=Oe(Ue,An,Jn)}return jt?new Sn(xn?"stroke":"fill",this):Ve.base.apply(this,arguments)}}},{statics:new function(){function pe(Oe,Ve,Ue,Pt,Lt){var bn=k.create(qe.prototype);return bn._type=Oe,bn._size=Ue,bn._radius=Pt,bn._initialize(k.getNamed(Lt),Ve),bn}return{Circle:function(){var Oe=arguments,Ve=oe.readNamed(Oe,"center"),Ue=k.readNamed(Oe,"radius");return pe("circle",Ve,new le(Ue*2),Ue,Oe)},Rectangle:function(){var Oe=arguments,Ve=he.readNamed(Oe,"rectangle"),Ue=le.min(le.readNamed(Oe,"radius"),Ve.getSize(!0).divide(2));return pe("rectangle",Ve.getCenter(!0),Ve.getSize(!0),Ue,Oe)},Ellipse:function(){var Oe=arguments,Ve=qe._readEllipse(Oe),Ue=Ve.radius;return pe("ellipse",Ve.center,Ue.multiply(2),Ue,Oe)},_readEllipse:function(Oe){var Ve,Ue;if(k.hasNamed(Oe,"radius"))Ve=oe.readNamed(Oe,"center"),Ue=le.readNamed(Oe,"radius");else{var Pt=he.readNamed(Oe,"rectangle");Ve=Pt.getCenter(!0),Ue=Pt.getSize(!0).divide(2)}return{center:Ve,radius:Ue}}}}}),Et=xe.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(Oe,Ve){if(!this._initialize(Oe,Ve!==r&&oe.read(arguments))){var Ue,Pt=typeof Oe,Lt=Pt==="string"?y.getElementById(Oe):Pt==="object"?Oe:null;if(Lt&&Lt!==xe.NO_INSERT){if(Lt.getContext||Lt.naturalHeight!=null)Ue=Lt;else if(Lt){var bn=le.read(arguments);bn.isZero()||(Ue=aa.getCanvas(bn))}}Ue?this.setImage(Ue):this.setSource(Oe)}this._size||(this._size=new le,this._loaded=!1)},_equals:function(pe){return this.getSource()===pe.getSource()},copyContent:function(pe){var Oe=pe._image,Ve=pe._canvas;if(Oe)this._setImage(Oe);else if(Ve){var Ue=aa.getCanvas(pe._size);Ue.getContext("2d").drawImage(Ve,0,0),this._setImage(Ue)}this._crossOrigin=pe._crossOrigin},getSize:function(){var pe=this._size;return new de(pe?pe.width:0,pe?pe.height:0,this,"setSize")},setSize:function(pe,Oe){var Ve=le.read(arguments);if(Ve.equals(this._size))Oe&&this.clear();else if(Ve.width>0&&Ve.height>0){var Ue=!Oe&&this.getElement();this._setImage(aa.getCanvas(Ve)),Ue&&this.getContext(!0).drawImage(Ue,0,0,Ve.width,Ve.height)}else this._canvas&&aa.release(this._canvas),this._size=Ve.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(pe){this.setSize(pe,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(pe){this.setSize(this.getWidth(),pe)},getLoaded:function(){return this._loaded},isEmpty:function(){var pe=this._size;return!pe||pe.width===0&&pe.height===0},getResolution:function(){var pe=this._matrix,Oe=new oe(0,0).transform(pe),Ve=new oe(1,0).transform(pe).subtract(Oe),Ue=new oe(0,1).transform(pe).subtract(Oe);return new le(72/Ve.getLength(),72/Ue.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(pe){var Oe=this;function Ve(Ue){var Pt=Oe.getView(),Lt=Ue&&Ue.type||"load";Pt&&Oe.responds(Lt)&&(ua=Pt._scope,Oe.emit(Lt,new Gn(Ue)))}this._setImage(pe),this._loaded?setTimeout(Ve,0):pe&&ga.add(pe,{load:function(Ue){Oe._setImage(pe),Ve(Ue)},error:Ve})},_setImage:function(pe){this._canvas&&aa.release(this._canvas),pe&&pe.getContext?(this._image=null,this._canvas=pe,this._loaded=!0):(this._image=pe,this._canvas=null,this._loaded=!!(pe&&pe.src&&pe.complete)),this._size=new le(pe?pe.naturalWidth||pe.width:0,pe?pe.naturalHeight||pe.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var pe=aa.getContext(this._size);try{this._image&&pe.drawImage(this._image,0,0),this._canvas=pe.canvas}catch{aa.release(pe)}}return this._canvas},setCanvas:"#setImage",getContext:function(pe){return this._context||(this._context=this.getCanvas().getContext("2d")),pe&&(this._image=null,this._changed(1025)),this._context},setContext:function(pe){this._context=pe},getSource:function(){var pe=this._image;return pe&&pe.src||this.toDataURL()},setSource:function(pe){var Oe=new n.Image,Ve=this._crossOrigin;Ve&&(Oe.crossOrigin=Ve),pe&&(Oe.src=pe),this.setImage(Oe)},getCrossOrigin:function(){var pe=this._image;return pe&&pe.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(pe){this._crossOrigin=pe;var Oe=this._image;Oe&&(Oe.crossOrigin=pe)},getSmoothing:function(){return this._smoothing},setSmoothing:function(pe){this._smoothing=typeof pe=="string"?pe:pe?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var pe=he.read(arguments),Oe=aa.getContext(pe.getSize());return Oe.drawImage(this.getCanvas(),pe.x,pe.y,pe.width,pe.height,0,0,pe.width,pe.height),Oe.canvas},getSubRaster:function(){var pe=he.read(arguments),Oe=new Et(xe.NO_INSERT);return Oe._setImage(this.getSubCanvas(pe)),Oe.translate(pe.getCenter().subtract(this.getSize().divide(2))),Oe._matrix.prepend(this._matrix),Oe.insertAbove(this),Oe},toDataURL:function(){var pe=this._image,Oe=pe&&pe.src;if(/^data:/.test(Oe))return Oe;var Ve=this.getCanvas();return Ve?Ve.toDataURL.apply(Ve,arguments):null},drawImage:function(pe){var Oe=oe.read(arguments,1);this.getContext(!0).drawImage(pe,Oe.x,Oe.y)},getAverageColor:function(pe){var Oe,Ve;if(pe?pe instanceof Nn?(Ve=pe,Oe=pe.getBounds()):typeof pe=="object"&&("width"in pe?Oe=new he(pe):"x"in pe&&(Oe=new he(pe.x-.5,pe.y-.5,1,1))):Oe=this.getBounds(),!Oe)return null;var Ue=32,Pt=Math.min(Oe.width,Ue),Lt=Math.min(Oe.height,Ue),bn=Et._sampleContext;bn?bn.clearRect(0,0,Ue+1,Ue+1):bn=Et._sampleContext=aa.getContext(new le(Ue)),bn.save();var jt=new Ce().scale(Pt/Oe.width,Lt/Oe.height).translate(-Oe.x,-Oe.y);jt.applyToContext(bn),Ve&&Ve.draw(bn,new k({clip:!0,matrices:[jt]})),this._matrix.applyToContext(bn);var Cn=this.getElement(),xn=this._size;Cn&&bn.drawImage(Cn,-xn.width/2,-xn.height/2),bn.restore();for(var In=bn.getImageData(.5,.5,Math.ceil(Pt),Math.ceil(Lt)).data,Ln=[0,0,0],An=0,zn=0,Jn=In.length;zn<Jn;zn+=4){var Qn=In[zn+3];An+=Qn,Qn/=255,Ln[0]+=In[zn]*Qn,Ln[1]+=In[zn+1]*Qn,Ln[2]+=In[zn+2]*Qn}for(var zn=0;zn<3;zn++)Ln[zn]/=An;return An?ca.read(Ln):null},getPixel:function(){var pe=oe.read(arguments),Oe=this.getContext().getImageData(pe.x,pe.y,1,1).data;return new ca("rgb",[Oe[0]/255,Oe[1]/255,Oe[2]/255],Oe[3]/255)},setPixel:function(){var pe=arguments,Oe=oe.read(pe),Ve=ca.read(pe),Ue=Ve._convert("rgb"),Pt=Ve._alpha,Lt=this.getContext(!0),bn=Lt.createImageData(1,1),jt=bn.data;jt[0]=Ue[0]*255,jt[1]=Ue[1]*255,jt[2]=Ue[2]*255,jt[3]=Pt!=null?Pt*255:255,Lt.putImageData(bn,Oe.x,Oe.y)},clear:function(){var pe=this._size;this.getContext(!0).clearRect(0,0,pe.width+1,pe.height+1)},createImageData:function(){var pe=le.read(arguments);return this.getContext().createImageData(pe.width,pe.height)},getImageData:function(){var pe=he.read(arguments);return pe.isEmpty()&&(pe=new he(this._size)),this.getContext().getImageData(pe.x,pe.y,pe.width,pe.height)},putImageData:function(pe){var Oe=oe.read(arguments,1);this.getContext(!0).putImageData(pe,Oe.x,Oe.y)},setImageData:function(pe){this.setSize(pe),this.getContext(!0).putImageData(pe,0,0)},_getBounds:function(pe,Oe){var Ve=new he(this._size).setCenter(0,0);return pe?pe._transformBounds(Ve):Ve},_hitTestSelf:function(pe){if(this._contains(pe)){var Oe=this;return new Sn("pixel",Oe,{offset:pe.add(Oe._size.divide(2)).round(),color:{get:function(){return Oe.getPixel(this.offset)}}})}},_draw:function(pe,Oe,Ve){var Ue=this.getElement();if(Ue&&Ue.width>0&&Ue.height>0){pe.globalAlpha=ae.clamp(this._opacity,0,1),this._setStyles(pe,Oe,Ve);var Pt=this._smoothing,Lt=Pt==="off";da.setPrefixed(pe,Lt?"imageSmoothingEnabled":"imageSmoothingQuality",Lt?!1:Pt),pe.drawImage(Ue,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),_n=xe.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(Oe,Ve){this._initialize(Oe,Ve!==r&&oe.read(arguments,1))||this.setDefinition(Oe instanceof Dt?Oe:new Dt(Oe))},_equals:function(pe){return this._definition===pe._definition},copyContent:function(pe){this.setDefinition(pe._definition)},getDefinition:function(){return this._definition},setDefinition:function(pe){this._definition=pe,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(pe,Oe){var Ve=this._definition._item;return Ve._getCachedBounds(Ve._matrix.prepended(pe),Oe)},_hitTestSelf:function(pe,Oe,Ve){var Ue=Oe.extend({all:!1}),Pt=this._definition._item._hitTest(pe,Ue,Ve);return Pt&&(Pt.item=this),Pt},_draw:function(pe,Oe){this._definition._item.draw(pe,Oe)}}),Dt=k.extend({_class:"SymbolDefinition",initialize:function(Oe,Ve){this._id=re.get(),this.project=ua.project,Oe&&this.setItem(Oe,Ve)},_serialize:function(pe,Oe){return Oe.add(this,function(){return k.serialize([this._class,this._item],pe,!1,Oe)})},_changed:function(pe){pe&8&&xe._clearBoundsCache(this),pe&1&&this.project._changed(pe)},getItem:function(){return this._item},setItem:function(pe,Oe){pe._symbol&&(pe=pe.clone()),this._item&&(this._item._symbol=null),this._item=pe,pe.remove(),pe.setSelected(!1),Oe||pe.setPosition(new oe),pe._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(pe){return new _n(this,pe)},clone:function(){return new Dt(this._item.clone(!1))},equals:function(pe){return pe===this||pe&&this._item.equals(pe._item)||!1}}),Sn=k.extend({_class:"HitResult",initialize:function(Oe,Ve,Ue){this.type=Oe,this.item=Ve,Ue&&this.inject(Ue)},statics:{getOptions:function(pe){var Oe=pe&&k.read(pe);return new k({type:null,tolerance:ua.settings.hitTolerance,fill:!Oe,stroke:!Oe,segments:!Oe,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},Oe)}}}),hn=k.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(Oe,Ve,Ue,Pt,Lt,bn){var jt=arguments.length,Cn,xn,In,Ln;jt>0&&(Oe==null||typeof Oe=="object"?jt===1&&Oe&&"point"in Oe?(Cn=Oe.point,xn=Oe.handleIn,In=Oe.handleOut,Ln=Oe.selection):(Cn=Oe,xn=Ve,In=Ue,Ln=Pt):(Cn=[Oe,Ve],xn=Ue!==r?[Ue,Pt]:null,In=Lt!==r?[Lt,bn]:null)),new Vn(Cn,this,"_point"),new Vn(xn,this,"_handleIn"),new Vn(In,this,"_handleOut"),Ln&&this.setSelection(Ln)},_serialize:function(pe,Oe){var Ve=this._point,Ue=this._selection,Pt=Ue||this.hasHandles()?[Ve,this._handleIn,this._handleOut]:Ve;return Ue&&Pt.push(Ue),k.serialize(Pt,pe,!0,Oe)},_changed:function(pe){var Oe=this._path;if(Oe){var Ve=Oe._curves,Ue=this._index,Pt;Ve&&((!pe||pe===this._point||pe===this._handleIn)&&(Pt=Ue>0?Ve[Ue-1]:Oe._closed?Ve[Ve.length-1]:null)&&Pt._changed(),(!pe||pe===this._point||pe===this._handleOut)&&(Pt=Ve[Ue])&&Pt._changed()),Oe._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(oe.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(oe.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(oe.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var pe=this._handleIn,Oe=this._handleOut;return!pe.isZero()&&!Oe.isZero()&&pe.isCollinear(Oe)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(pe){var Oe=this._selection,Ve=this._path;this._selection=pe=pe||0,Ve&&pe!==Oe&&(Ve._updateSelection(this,Oe,pe),Ve._changed(257))},_changeSelection:function(pe,Oe){var Ve=this._selection;this.setSelection(Oe?Ve|pe:Ve&~pe)},isSelected:function(){return!!(this._selection&7)},setSelected:function(pe){this._changeSelection(7,pe)},getIndex:function(){return this._index!==r?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var pe=this._path,Oe=this._index;return pe?(Oe>0&&!pe._closed&&Oe===pe._segments.length-1&&Oe--,pe.getCurves()[Oe]||null):null},getLocation:function(){var pe=this.getCurve();return pe?new $n(pe,this===pe._segment1?0:1):null},getNext:function(){var pe=this._path&&this._path._segments;return pe&&(pe[this._index+1]||this._path._closed&&pe[0])||null},smooth:function(pe,Oe,Ve){var Ue=pe||{},Pt=Ue.type,Lt=Ue.factor,bn=this.getPrevious(),jt=this.getNext(),Cn=(bn||this)._point,xn=this._point,In=(jt||this)._point,Ln=Cn.getDistance(xn),An=xn.getDistance(In);if(!Pt||Pt==="catmull-rom"){var zn=Lt===r?.5:Lt,Jn=Math.pow(Ln,zn),Qn=Jn*Jn,ta=Math.pow(An,zn),Pn=ta*ta;if(!Oe&&bn){var Un=2*Pn+3*ta*Jn+Qn,On=3*ta*(ta+Jn);this.setHandleIn(On!==0?new oe((Pn*Cn._x+Un*xn._x-Qn*In._x)/On-xn._x,(Pn*Cn._y+Un*xn._y-Qn*In._y)/On-xn._y):new oe)}if(!Ve&&jt){var Un=2*Qn+3*Jn*ta+Pn,On=3*Jn*(Jn+ta);this.setHandleOut(On!==0?new oe((Qn*In._x+Un*xn._x-Pn*Cn._x)/On-xn._x,(Qn*In._y+Un*xn._y-Pn*Cn._y)/On-xn._y):new oe)}}else if(Pt==="geometric"){if(bn&&jt){var Rn=Cn.subtract(In),Yn=Lt===r?.4:Lt,na=Yn*Ln/(Ln+An);Oe||this.setHandleIn(Rn.multiply(na)),Ve||this.setHandleOut(Rn.multiply(na-Yn))}}else throw new Error("Smoothing method '"+Pt+"' not supported.")},getPrevious:function(){var pe=this._path&&this._path._segments;return pe&&(pe[this._index-1]||this._path._closed&&pe[pe.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var pe=this._path;return pe&&this._index===pe._segments.length-1||!1},reverse:function(){var pe=this._handleIn,Oe=this._handleOut,Ve=pe.clone();pe.set(Oe),Oe.set(Ve)},reversed:function(){return new hn(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new hn(this._point,this._handleIn,this._handleOut)},equals:function(pe){return pe===this||pe&&this._class===pe._class&&this._point.equals(pe._point)&&this._handleIn.equals(pe._handleIn)&&this._handleOut.equals(pe._handleOut)||!1},toString:function(){var pe=["point: "+this._point];return this._handleIn.isZero()||pe.push("handleIn: "+this._handleIn),this._handleOut.isZero()||pe.push("handleOut: "+this._handleOut),"{ "+pe.join(", ")+" }"},transform:function(pe){this._transformCoordinates(pe,new Array(6),!0),this._changed()},interpolate:function(pe,Oe,Ve){var Ue=1-Ve,Pt=Ve,Lt=pe._point,bn=Oe._point,jt=pe._handleIn,Cn=Oe._handleIn,xn=Oe._handleOut,In=pe._handleOut;this._point._set(Ue*Lt._x+Pt*bn._x,Ue*Lt._y+Pt*bn._y,!0),this._handleIn._set(Ue*jt._x+Pt*Cn._x,Ue*jt._y+Pt*Cn._y,!0),this._handleOut._set(Ue*In._x+Pt*xn._x,Ue*In._y+Pt*xn._y,!0),this._changed()},_transformCoordinates:function(pe,Oe,Ve){var Ue=this._point,Pt=!Ve||!this._handleIn.isZero()?this._handleIn:null,Lt=!Ve||!this._handleOut.isZero()?this._handleOut:null,bn=Ue._x,jt=Ue._y,Cn=2;return Oe[0]=bn,Oe[1]=jt,Pt&&(Oe[Cn++]=Pt._x+bn,Oe[Cn++]=Pt._y+jt),Lt&&(Oe[Cn++]=Lt._x+bn,Oe[Cn++]=Lt._y+jt),pe&&(pe._transformCoordinates(Oe,Oe,Cn/2),bn=Oe[0],jt=Oe[1],Ve?(Ue._x=bn,Ue._y=jt,Cn=2,Pt&&(Pt._x=Oe[Cn++]-bn,Pt._y=Oe[Cn++]-jt),Lt&&(Lt._x=Oe[Cn++]-bn,Lt._y=Oe[Cn++]-jt)):(Pt||(Oe[Cn++]=bn,Oe[Cn++]=jt),Lt||(Oe[Cn++]=bn,Oe[Cn++]=jt))),Oe}}),Vn=oe.extend({initialize:function(Oe,Ve,Ue){var Pt,Lt,bn;if(!Oe)Pt=Lt=0;else if((Pt=Oe[0])!==r)Lt=Oe[1];else{var jt=Oe;(Pt=jt.x)===r&&(jt=oe.read(arguments),Pt=jt.x),Lt=jt.y,bn=jt.selected}this._x=Pt,this._y=Lt,this._owner=Ve,Ve[Ue]=this,bn&&this.setSelected(!0)},_set:function(pe,Oe){return this._x=pe,this._y=Oe,this._owner._changed(this),this},getX:function(){return this._x},setX:function(pe){this._x=pe,this._owner._changed(this)},getY:function(){return this._y},setY:function(pe){this._y=pe,this._owner._changed(this)},isZero:function(){var pe=ae.isZero;return pe(this._x)&&pe(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(pe){this._owner._changeSelection(this._getSelection(),pe)},_getSelection:function(){var pe=this._owner;return this===pe._point?1:this===pe._handleIn?2:this===pe._handleOut?4:0}}),Mn=k.extend({_class:"Curve",beans:!0,initialize:function(Oe,Ve,Ue,Pt,Lt,bn,jt,Cn){var xn=arguments.length,In,Ln,An,zn,Jn,Qn;xn===3?(this._path=Oe,In=Ve,Ln=Ue):xn?xn===1?"segment1"in Oe?(In=new hn(Oe.segment1),Ln=new hn(Oe.segment2)):"point1"in Oe?(An=Oe.point1,Jn=Oe.handle1,Qn=Oe.handle2,zn=Oe.point2):Array.isArray(Oe)&&(An=[Oe[0],Oe[1]],zn=[Oe[6],Oe[7]],Jn=[Oe[2]-Oe[0],Oe[3]-Oe[1]],Qn=[Oe[4]-Oe[6],Oe[5]-Oe[7]]):xn===2?(In=new hn(Oe),Ln=new hn(Ve)):xn===4?(An=Oe,Jn=Ve,Qn=Ue,zn=Pt):xn===8&&(An=[Oe,Ve],zn=[jt,Cn],Jn=[Ue-Oe,Pt-Ve],Qn=[Lt-jt,bn-Cn]):(In=new hn,Ln=new hn),this._segment1=In||new hn(An,null,Jn),this._segment2=Ln||new hn(zn,Qn,null)},_serialize:function(pe,Oe){return k.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],pe,!0,Oe)},_changed:function(){this._length=this._bounds=r},clone:function(){return new Mn(this._segment1,this._segment2)},toString:function(){var pe=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||pe.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||pe.push("handle2: "+this._segment2._handleIn),pe.push("point2: "+this._segment2._point),"{ "+pe.join(", ")+" }"},classify:function(){return Mn.classify(this.getValues())},remove:function(){var pe=!1;if(this._path){var Oe=this._segment2,Ve=Oe._handleOut;pe=Oe.remove(),pe&&this._segment1._handleOut.set(Ve)}return pe},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(oe.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(oe.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(oe.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(oe.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var pe=this._path&&this._path._curves;return pe&&(pe[this._segment1._index+1]||this._path._closed&&pe[0])||null},getPrevious:function(){var pe=this._path&&this._path._curves;return pe&&(pe[this._segment1._index-1]||this._path._closed&&pe[pe.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var pe=this._path;return pe&&this._segment1._index===pe._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(pe){this.getPoint1().setSelected(pe),this.getHandle1().setSelected(pe),this.getHandle2().setSelected(pe),this.getPoint2().setSelected(pe)},getValues:function(pe){return Mn.getValues(this._segment1,this._segment2,pe)},getPoints:function(){for(var pe=this.getValues(),Oe=[],Ve=0;Ve<8;Ve+=2)Oe.push(new oe(pe[Ve],pe[Ve+1]));return Oe}},{getLength:function(){return this._length==null&&(this._length=Mn.getLength(this.getValues(),0,1)),this._length},getArea:function(){return Mn.getArea(this.getValues())},getLine:function(){return new Ne(this._segment1._point,this._segment2._point)},getPart:function(pe,Oe){return new Mn(Mn.getPart(this.getValues(),pe,Oe))},getPartLength:function(pe,Oe){return Mn.getLength(this.getValues(),pe,Oe)},divideAt:function(pe){return this.divideAtTime(pe&&pe.curve===this?pe.time:this.getTimeAt(pe))},divideAtTime:function(pe,Oe){var Ve=1e-8,Ue=1-Ve,Pt=null;if(pe>=Ve&&pe<=Ue){var Lt=Mn.subdivide(this.getValues(),pe),bn=Lt[0],jt=Lt[1],Cn=Oe||this.hasHandles(),xn=this._segment1,In=this._segment2,Ln=this._path;Cn&&(xn._handleOut._set(bn[2]-bn[0],bn[3]-bn[1]),In._handleIn._set(jt[4]-jt[6],jt[5]-jt[7]));var An=bn[6],zn=bn[7],Jn=new hn(new oe(An,zn),Cn&&new oe(bn[4]-An,bn[5]-zn),Cn&&new oe(jt[2]-An,jt[3]-zn));Ln?(Ln.insert(xn._index+1,Jn),Pt=this.getNext()):(this._segment2=Jn,this._changed(),Pt=new Mn(Jn,In))}return Pt},splitAt:function(pe){var Oe=this._path;return Oe?Oe.splitAt(pe):null},splitAtTime:function(pe){return this.splitAt(this.getLocationAtTime(pe))},divide:function(pe,Oe){return this.divideAtTime(pe===r?.5:Oe?pe:this.getTimeAt(pe))},split:function(pe,Oe){return this.splitAtTime(pe===r?.5:Oe?pe:this.getTimeAt(pe))},reversed:function(){return new Mn(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(pe,Oe,Ve,Ue){var Pt=pe._point,Lt=pe._handleOut,bn=Oe._handleIn,jt=Oe._point,Cn=Pt.x,xn=Pt.y,In=jt.x,Ln=jt.y,An=Ue?[Cn,xn,Cn,xn,In,Ln,In,Ln]:[Cn,xn,Cn+Lt._x,xn+Lt._y,In+bn._x,Ln+bn._y,In,Ln];return Ve&&Ve._transformCoordinates(An,An,4),An},subdivide:function(pe,Oe){var Ve=pe[0],Ue=pe[1],Pt=pe[2],Lt=pe[3],bn=pe[4],jt=pe[5],Cn=pe[6],xn=pe[7];Oe===r&&(Oe=.5);var In=1-Oe,Ln=In*Ve+Oe*Pt,An=In*Ue+Oe*Lt,zn=In*Pt+Oe*bn,Jn=In*Lt+Oe*jt,Qn=In*bn+Oe*Cn,ta=In*jt+Oe*xn,Pn=In*Ln+Oe*zn,Un=In*An+Oe*Jn,On=In*zn+Oe*Qn,Rn=In*Jn+Oe*ta,Yn=In*Pn+Oe*On,na=In*Un+Oe*Rn;return[[Ve,Ue,Ln,An,Pn,Un,Yn,na],[Yn,na,On,Rn,Qn,ta,Cn,xn]]},getMonoCurves:function(pe,Oe){var Ve=[],Ue=Oe?0:1,Pt=pe[Ue+0],Lt=pe[Ue+2],bn=pe[Ue+4],jt=pe[Ue+6];if(Pt>=Lt==Lt>=bn&&Lt>=bn==bn>=jt||Mn.isStraight(pe))Ve.push(pe);else{var Cn=3*(Lt-bn)-Pt+jt,xn=2*(Pt+bn)-4*Lt,In=Lt-Pt,Ln=1e-8,An=1-Ln,zn=[],Jn=ae.solveQuadratic(Cn,xn,In,zn,Ln,An);if(!Jn)Ve.push(pe);else{zn.sort();var Qn=zn[0],ta=Mn.subdivide(pe,Qn);Ve.push(ta[0]),Jn>1&&(Qn=(zn[1]-Qn)/(1-Qn),ta=Mn.subdivide(ta[1],Qn),Ve.push(ta[0])),Ve.push(ta[1])}}return Ve},solveCubic:function(pe,Oe,Ve,Ue,Pt,Lt){var bn=pe[Oe],jt=pe[Oe+2],Cn=pe[Oe+4],xn=pe[Oe+6],In=0;if(!(bn<Ve&&xn<Ve&&jt<Ve&&Cn<Ve||bn>Ve&&xn>Ve&&jt>Ve&&Cn>Ve)){var Ln=3*(jt-bn),An=3*(Cn-jt)-Ln,zn=xn-bn-Ln-An;In=ae.solveCubic(zn,An,Ln,bn-Ve,Ue,Pt,Lt)}return In},getTimeOf:function(pe,Oe){var Ve=new oe(pe[0],pe[1]),Ue=new oe(pe[6],pe[7]),Pt=1e-12,Lt=1e-7,bn=Oe.isClose(Ve,Pt)?0:Oe.isClose(Ue,Pt)?1:null;if(bn===null)for(var jt=[Oe.x,Oe.y],Cn=[],xn=0;xn<2;xn++)for(var In=Mn.solveCubic(pe,xn,jt[xn],Cn,0,1),Ln=0;Ln<In;Ln++){var An=Cn[Ln];if(Oe.isClose(Mn.getPoint(pe,An),Lt))return An}return Oe.isClose(Ve,Lt)?0:Oe.isClose(Ue,Lt)?1:null},getNearestTime:function(pe,Oe){if(Mn.isStraight(pe)){var Ve=pe[0],Ue=pe[1],Pt=pe[6],Lt=pe[7],bn=Pt-Ve,jt=Lt-Ue,Cn=bn*bn+jt*jt;if(Cn===0)return 0;var xn=((Oe.x-Ve)*bn+(Oe.y-Ue)*jt)/Cn;return xn<1e-12?0:xn>.999999999999?1:Mn.getTimeOf(pe,new oe(Ve+xn*bn,Ue+xn*jt))}var In=100,Ln=1/0,An=0;function zn(ta){if(ta>=0&&ta<=1){var Pn=Oe.getDistance(Mn.getPoint(pe,ta),!0);if(Pn<Ln)return Ln=Pn,An=ta,!0}}for(var Jn=0;Jn<=In;Jn++)zn(Jn/In);for(var Qn=1/(In*2);Qn>1e-8;)!zn(An-Qn)&&!zn(An+Qn)&&(Qn/=2);return An},getPart:function(pe,Oe,Ve){var Ue=Oe>Ve;if(Ue){var Pt=Oe;Oe=Ve,Ve=Pt}return Oe>0&&(pe=Mn.subdivide(pe,Oe)[1]),Ve<1&&(pe=Mn.subdivide(pe,(Ve-Oe)/(1-Oe))[0]),Ue?[pe[6],pe[7],pe[4],pe[5],pe[2],pe[3],pe[0],pe[1]]:pe},isFlatEnough:function(pe,Oe){var Ve=pe[0],Ue=pe[1],Pt=pe[2],Lt=pe[3],bn=pe[4],jt=pe[5],Cn=pe[6],xn=pe[7],In=3*Pt-2*Ve-Cn,Ln=3*Lt-2*Ue-xn,An=3*bn-2*Cn-Ve,zn=3*jt-2*xn-Ue;return Math.max(In*In,An*An)+Math.max(Ln*Ln,zn*zn)<=16*Oe*Oe},getArea:function(pe){var Oe=pe[0],Ve=pe[1],Ue=pe[2],Pt=pe[3],Lt=pe[4],bn=pe[5],jt=pe[6],Cn=pe[7];return 3*((Cn-Ve)*(Ue+Lt)-(jt-Oe)*(Pt+bn)+Pt*(Oe-Lt)-Ue*(Ve-bn)+Cn*(Lt+Oe/3)-jt*(bn+Ve/3))/20},getBounds:function(pe){for(var Oe=pe.slice(0,2),Ve=Oe.slice(),Ue=[0,0],Pt=0;Pt<2;Pt++)Mn._addBounds(pe[Pt],pe[Pt+2],pe[Pt+4],pe[Pt+6],Pt,0,Oe,Ve,Ue);return new he(Oe[0],Oe[1],Ve[0]-Oe[0],Ve[1]-Oe[1])},_addBounds:function(pe,Oe,Ve,Ue,Pt,Lt,bn,jt,Cn){function xn(Yn,na){var ea=Yn-na,pa=Yn+na;ea<bn[Pt]&&(bn[Pt]=ea),pa>jt[Pt]&&(jt[Pt]=pa)}Lt/=2;var In=bn[Pt]+Lt,Ln=jt[Pt]-Lt;if(pe<In||Oe<In||Ve<In||Ue<In||pe>Ln||Oe>Ln||Ve>Ln||Ue>Ln)if(Oe<pe!=Oe<Ue&&Ve<pe!=Ve<Ue)xn(pe,0),xn(Ue,0);else{var An=3*(Oe-Ve)-pe+Ue,zn=2*(pe+Ve)-4*Oe,Jn=Oe-pe,Qn=ae.solveQuadratic(An,zn,Jn,Cn),ta=1e-8,Pn=1-ta;xn(Ue,0);for(var Un=0;Un<Qn;Un++){var On=Cn[Un],Rn=1-On;ta<=On&&On<=Pn&&xn(Rn*Rn*Rn*pe+3*Rn*Rn*On*Oe+3*Rn*On*On*Ve+On*On*On*Ue,Lt)}}}}},k.each(["getBounds","getStrokeBounds","getHandleBounds"],function(pe){this[pe]=function(){this._bounds||(this._bounds={});var Oe=this._bounds[pe];return Oe||(Oe=this._bounds[pe]=kn[pe]([this._segment1,this._segment2],!1,this._path)),Oe.clone()}},{}),k.each({isStraight:function(pe,Oe,Ve,Ue){if(Oe.isZero()&&Ve.isZero())return!0;var Pt=Ue.subtract(pe);if(Pt.isZero())return!1;if(Pt.isCollinear(Oe)&&Pt.isCollinear(Ve)){var Lt=new Ne(pe,Ue),bn=1e-7;if(Lt.getDistance(pe.add(Oe))<bn&&Lt.getDistance(Ue.add(Ve))<bn){var jt=Pt.dot(Pt),Cn=Pt.dot(Oe)/jt,xn=Pt.dot(Ve)/jt;return Cn>=0&&Cn<=1&&xn<=0&&xn>=-1}}return!1},isLinear:function(pe,Oe,Ve,Ue){var Pt=Ue.subtract(pe).divide(3);return Oe.equals(Pt)&&Ve.negate().equals(Pt)}},function(pe,Oe){this[Oe]=function(Ve){var Ue=this._segment1,Pt=this._segment2;return pe(Ue._point,Ue._handleOut,Pt._handleIn,Pt._point,Ve)},this.statics[Oe]=function(Ve,Ue){var Pt=Ve[0],Lt=Ve[1],bn=Ve[6],jt=Ve[7];return pe(new oe(Pt,Lt),new oe(Ve[2]-Pt,Ve[3]-Lt),new oe(Ve[4]-bn,Ve[5]-jt),new oe(bn,jt),Ue)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(pe){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(pe||0)},isCollinear:function(pe){return pe&&this.isStraight()&&pe.isStraight()&&this.getLine().isCollinear(pe.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(pe,Oe){return this.getLocationAtTime(Oe?pe:this.getTimeAt(pe))},getLocationAtTime:function(pe){return pe!=null&&pe>=0&&pe<=1?new $n(this,pe):null},getTimeAt:function(pe,Oe){return Mn.getTimeAt(this.getValues(),pe,Oe)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var pe=oe.read(arguments);return pe.isZero()?[]:Mn.getTimesWithTangent(this.getValues(),pe)},getOffsetAtTime:function(pe){return this.getPartLength(0,pe)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(oe.read(arguments)))},getOffsetOf:function(){var pe=this.getLocationOf.apply(this,arguments);return pe?pe.getOffset():null},getTimeOf:function(){return Mn.getTimeOf(this.getValues(),oe.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var pe=oe.read(arguments),Oe=this.getValues(),Ve=Mn.getNearestTime(Oe,pe),Ue=Mn.getPoint(Oe,Ve);return new $n(this,Ve,Ue,null,pe.getDistance(Ue))},getNearestPoint:function(){var pe=this.getNearestLocation.apply(this,arguments);return pe&&pe.getPoint()}},new function(){var pe=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return k.each(pe,function(Oe){this[Oe+"At"]=function(Ve,Ue){var Pt=this.getValues();return Mn[Oe](Pt,Ue?Ve:Mn.getTimeAt(Pt,Ve))},this[Oe+"AtTime"]=function(Ve){return Mn[Oe](this.getValues(),Ve)}},{statics:{_evaluateMethods:pe}})},new function(){function pe(Ue){var Pt=Ue[0],Lt=Ue[1],bn=Ue[2],jt=Ue[3],Cn=Ue[4],xn=Ue[5],In=Ue[6],Ln=Ue[7],An=9*(bn-Cn)+3*(In-Pt),zn=6*(Pt+Cn)-12*bn,Jn=3*(bn-Pt),Qn=9*(jt-xn)+3*(Ln-Lt),ta=6*(Lt+xn)-12*jt,Pn=3*(jt-Lt);return function(Un){var On=(An*Un+zn)*Un+Jn,Rn=(Qn*Un+ta)*Un+Pn;return Math.sqrt(On*On+Rn*Rn)}}function Oe(Ue,Pt){return Math.max(2,Math.min(16,Math.ceil(Math.abs(Pt-Ue)*32)))}function Ve(Ue,Pt,Lt,bn){if(Pt==null||Pt<0||Pt>1)return null;var jt=Ue[0],Cn=Ue[1],xn=Ue[2],In=Ue[3],Ln=Ue[4],An=Ue[5],zn=Ue[6],Jn=Ue[7],Qn=ae.isZero;Qn(xn-jt)&&Qn(In-Cn)&&(xn=jt,In=Cn),Qn(Ln-zn)&&Qn(An-Jn)&&(Ln=zn,An=Jn);var ta=3*(xn-jt),Pn=3*(Ln-xn)-ta,Un=zn-jt-ta-Pn,On=3*(In-Cn),Rn=3*(An-In)-On,Yn=Jn-Cn-On-Rn,na,ea;if(Lt===0)na=Pt===0?jt:Pt===1?zn:((Un*Pt+Pn)*Pt+ta)*Pt+jt,ea=Pt===0?Cn:Pt===1?Jn:((Yn*Pt+Rn)*Pt+On)*Pt+Cn;else{var pa=1e-8,ha=1-pa;if(Pt<pa?(na=ta,ea=On):Pt>ha?(na=3*(zn-Ln),ea=3*(Jn-An)):(na=(3*Un*Pt+2*Pn)*Pt+ta,ea=(3*Yn*Pt+2*Rn)*Pt+On),bn){na===0&&ea===0&&(Pt<pa||Pt>ha)&&(na=Ln-xn,ea=An-In);var ba=Math.sqrt(na*na+ea*ea);ba&&(na/=ba,ea/=ba)}if(Lt===3){var Ln=6*Un*Pt+2*Pn,An=6*Yn*Pt+2*Rn,Oa=Math.pow(na*na+ea*ea,3/2);na=Oa!==0?(na*An-ea*Ln)/Oa:0,ea=0}}return Lt===2?new oe(ea,-na):new oe(na,ea)}return{statics:{classify:function(Ue){var Pt=Ue[0],Lt=Ue[1],bn=Ue[2],jt=Ue[3],Cn=Ue[4],xn=Ue[5],In=Ue[6],Ln=Ue[7],An=Pt*(Ln-xn)+Lt*(Cn-In)+In*xn-Ln*Cn,zn=bn*(Lt-Ln)+jt*(In-Pt)+Pt*Ln-Lt*In,Jn=Cn*(jt-Lt)+xn*(Pt-bn)+bn*Lt-jt*Pt,Qn=3*Jn,ta=Qn-zn,Pn=ta-zn+An,Un=Math.sqrt(Pn*Pn+ta*ta+Qn*Qn),On=Un!==0?1/Un:0,Rn=ae.isZero,Yn="serpentine";Pn*=On,ta*=On,Qn*=On;function na(ba,Oa,va){var Sa=Oa!==r,$a=Sa&&Oa>0&&Oa<1,Da=Sa&&va>0&&va<1;return Sa&&(!($a||Da)||ba==="loop"&&!($a&&Da))&&(ba="arch",$a=Da=!1),{type:ba,roots:$a||Da?$a&&Da?Oa<va?[Oa,va]:[va,Oa]:[$a?Oa:va]:null}}if(Rn(Pn))return Rn(ta)?na(Rn(Qn)?"line":"quadratic"):na(Yn,Qn/(3*ta));var ea=3*ta*ta-4*Pn*Qn;if(Rn(ea))return na("cusp",ta/(2*Pn));var pa=ea>0?Math.sqrt(ea/3):Math.sqrt(-ea),ha=2*Pn;return na(ea>0?Yn:"loop",(ta+pa)/ha,(ta-pa)/ha)},getLength:function(Ue,Pt,Lt,bn){if(Pt===r&&(Pt=0),Lt===r&&(Lt=1),Mn.isStraight(Ue)){var jt=Ue;Lt<1&&(jt=Mn.subdivide(jt,Lt)[0],Pt/=Lt),Pt>0&&(jt=Mn.subdivide(jt,Pt)[1]);var Cn=jt[6]-jt[0],xn=jt[7]-jt[1];return Math.sqrt(Cn*Cn+xn*xn)}return ae.integrate(bn||pe(Ue),Pt,Lt,Oe(Pt,Lt))},getTimeAt:function(Ue,Pt,Lt){if(Lt===r&&(Lt=Pt<0?1:0),Pt===0)return Lt;var bn=Math.abs,jt=1e-12,Cn=Pt>0,xn=Cn?Lt:0,In=Cn?1:Lt,Ln=pe(Ue),An=Mn.getLength(Ue,xn,In,Ln),zn=bn(Pt)-An;if(bn(zn)<jt)return Cn?In:xn;if(zn>jt)return null;var Jn=Pt/An,Qn=0;function ta(Pn){return Qn+=ae.integrate(Ln,Lt,Pn,Oe(Lt,Pn)),Lt=Pn,Qn-Pt}return ae.findRoot(ta,Ln,Lt+Jn,xn,In,32,1e-12)},getPoint:function(Ue,Pt){return Ve(Ue,Pt,0,!1)},getTangent:function(Ue,Pt){return Ve(Ue,Pt,1,!0)},getWeightedTangent:function(Ue,Pt){return Ve(Ue,Pt,1,!1)},getNormal:function(Ue,Pt){return Ve(Ue,Pt,2,!0)},getWeightedNormal:function(Ue,Pt){return Ve(Ue,Pt,2,!1)},getCurvature:function(Ue,Pt){return Ve(Ue,Pt,3,!1).x},getPeaks:function(Ue){var Pt=Ue[0],Lt=Ue[1],bn=Ue[2],jt=Ue[3],Cn=Ue[4],xn=Ue[5],In=Ue[6],Ln=Ue[7],An=-Pt+3*bn-3*Cn+In,zn=3*Pt-6*bn+3*Cn,Jn=-3*Pt+3*bn,Qn=-Lt+3*jt-3*xn+Ln,ta=3*Lt-6*jt+3*xn,Pn=-3*Lt+3*jt,Un=1e-8,On=1-Un,Rn=[];return ae.solveCubic(9*(An*An+Qn*Qn),9*(An*zn+ta*Qn),2*(zn*zn+ta*ta)+3*(Jn*An+Pn*Qn),Jn*zn+ta*Pn,Rn,Un,On),Rn.sort()}}}},new function(){function pe(zn,Jn,Qn,ta,Pn,Un,On){var Rn=!On&&Qn.getPrevious()===Pn,Yn=!On&&Qn!==Pn&&Qn.getNext()===Pn,na=1e-8,ea=1-na;if(ta!==null&&ta>=(Rn?na:0)&&ta<=(Yn?ea:1)&&Un!==null&&Un>=(Yn?na:0)&&Un<=(Rn?ea:1)){var pa=new $n(Qn,ta,null,On),ha=new $n(Pn,Un,null,On);pa._intersection=ha,ha._intersection=pa,(!Jn||Jn(pa))&&$n.insert(zn,pa,!0)}}function Oe(zn,Jn,Qn,ta,Pn,Un,On,Rn,Yn,na,ea,pa,ha){if(++Yn>=4096||++Rn>=40)return Yn;var ba=1e-9,Oa=Jn[0],va=Jn[1],Sa=Jn[6],$a=Jn[7],Da=Ne.getSignedDistance,Na=Da(Oa,va,Sa,$a,Jn[2],Jn[3]),Va=Da(Oa,va,Sa,$a,Jn[4],Jn[5]),Ua=Na*Va>0?3/4:4/9,Wa=Ua*Math.min(0,Na,Va),Qa=Ua*Math.max(0,Na,Va),Ja=Da(Oa,va,Sa,$a,zn[0],zn[1]),Ra=Da(Oa,va,Sa,$a,zn[2],zn[3]),Fa=Da(Oa,va,Sa,$a,zn[4],zn[5]),Xa=Da(Oa,va,Sa,$a,zn[6],zn[7]),tr=Ve(Ja,Ra,Fa,Xa),er=tr[0],or=tr[1],rr,sr;if(Na===0&&Va===0&&Ja===0&&Ra===0&&Fa===0&&Xa===0||(rr=Ue(er,or,Wa,Qa))==null||(sr=Ue(er.reverse(),or.reverse(),Wa,Qa))==null)return Yn;var cr=na+(ea-na)*rr,ir=na+(ea-na)*sr;if(Math.max(ha-pa,ir-cr)<ba){var Ka=(cr+ir)/2,vr=(pa+ha)/2;pe(Pn,Un,On?ta:Qn,On?vr:Ka,On?Qn:ta,On?Ka:vr)}else{zn=Mn.getPart(zn,rr,sr);var kr=ha-pa;if(sr-rr>.8)if(ir-cr>kr){var Sr=Mn.subdivide(zn,.5),Ka=(cr+ir)/2;Yn=Oe(Jn,Sr[0],ta,Qn,Pn,Un,!On,Rn,Yn,pa,ha,cr,Ka),Yn=Oe(Jn,Sr[1],ta,Qn,Pn,Un,!On,Rn,Yn,pa,ha,Ka,ir)}else{var Sr=Mn.subdivide(Jn,.5),vr=(pa+ha)/2;Yn=Oe(Sr[0],zn,ta,Qn,Pn,Un,!On,Rn,Yn,pa,vr,cr,ir),Yn=Oe(Sr[1],zn,ta,Qn,Pn,Un,!On,Rn,Yn,vr,ha,cr,ir)}else kr===0||kr>=ba?Yn=Oe(Jn,zn,ta,Qn,Pn,Un,!On,Rn,Yn,pa,ha,cr,ir):Yn=Oe(zn,Jn,Qn,ta,Pn,Un,On,Rn,Yn,cr,ir,pa,ha)}return Yn}function Ve(zn,Jn,Qn,ta){var Pn=[0,zn],Un=[1/3,Jn],On=[2/3,Qn],Rn=[1,ta],Yn=Jn-(2*zn+ta)/3,na=Qn-(zn+2*ta)/3,ea;if(Yn*na<0)ea=[[Pn,Un,Rn],[Pn,On,Rn]];else{var pa=Yn/na;ea=[pa>=2?[Pn,Un,Rn]:pa<=.5?[Pn,On,Rn]:[Pn,Un,On,Rn],[Pn,Rn]]}return(Yn||na)<0?ea.reverse():ea}function Ue(zn,Jn,Qn,ta){return zn[0][1]<Qn?Pt(zn,!0,Qn):Jn[0][1]>ta?Pt(Jn,!1,ta):zn[0][0]}function Pt(zn,Jn,Qn){for(var ta=zn[0][0],Pn=zn[0][1],Un=1,On=zn.length;Un<On;Un++){var Rn=zn[Un][0],Yn=zn[Un][1];if(Jn?Yn>=Qn:Yn<=Qn)return Yn===Qn?Rn:ta+(Qn-Pn)*(Rn-ta)/(Yn-Pn);ta=Rn,Pn=Yn}return null}function Lt(zn,Jn,Qn,ta,Pn){var Un=ae.isZero;if(Un(ta)&&Un(Pn)){var On=Mn.getTimeOf(zn,new oe(Jn,Qn));return On===null?[]:[On]}for(var Rn=Math.atan2(-Pn,ta),Yn=Math.sin(Rn),na=Math.cos(Rn),ea=[],pa=[],ha=0;ha<8;ha+=2){var ba=zn[ha]-Jn,Oa=zn[ha+1]-Qn;ea.push(ba*na-Oa*Yn,ba*Yn+Oa*na)}return Mn.solveCubic(ea,1,0,pa,0,1),pa}function bn(zn,Jn,Qn,ta,Pn,Un,On){for(var Rn=Jn[0],Yn=Jn[1],na=Jn[6],ea=Jn[7],pa=Lt(zn,Rn,Yn,na-Rn,ea-Yn),ha=0,ba=pa.length;ha<ba;ha++){var Oa=pa[ha],va=Mn.getPoint(zn,Oa),Sa=Mn.getTimeOf(Jn,va);Sa!==null&&pe(Pn,Un,On?ta:Qn,On?Sa:Oa,On?Qn:ta,On?Oa:Sa)}}function jt(zn,Jn,Qn,ta,Pn,Un){var On=Ne.intersect(zn[0],zn[1],zn[6],zn[7],Jn[0],Jn[1],Jn[6],Jn[7]);On&&pe(Pn,Un,Qn,Mn.getTimeOf(zn,On),ta,Mn.getTimeOf(Jn,On))}function Cn(zn,Jn,Qn,ta,Pn,Un){var On=1e-12,Rn=Math.min,Yn=Math.max;if(Yn(zn[0],zn[2],zn[4],zn[6])+On>Rn(Jn[0],Jn[2],Jn[4],Jn[6])&&Rn(zn[0],zn[2],zn[4],zn[6])-On<Yn(Jn[0],Jn[2],Jn[4],Jn[6])&&Yn(zn[1],zn[3],zn[5],zn[7])+On>Rn(Jn[1],Jn[3],Jn[5],Jn[7])&&Rn(zn[1],zn[3],zn[5],zn[7])-On<Yn(Jn[1],Jn[3],Jn[5],Jn[7])){var na=Ln(zn,Jn);if(na)for(var ea=0;ea<2;ea++){var pa=na[ea];pe(Pn,Un,Qn,pa[0],ta,pa[1],!0)}else{var ha=Mn.isStraight(zn),ba=Mn.isStraight(Jn),Oa=ha&&ba,va=ha&&!ba,Sa=Pn.length;if((Oa?jt:ha||ba?bn:Oe)(va?Jn:zn,va?zn:Jn,va?ta:Qn,va?Qn:ta,Pn,Un,va,0,0,0,1,0,1),!Oa||Pn.length===Sa)for(var ea=0;ea<4;ea++){var $a=ea>>1,Da=ea&1,Na=$a*6,Va=Da*6,Ua=new oe(zn[Na],zn[Na+1]),Wa=new oe(Jn[Va],Jn[Va+1]);Ua.isClose(Wa,On)&&pe(Pn,Un,Qn,$a,ta,Da)}}}return Pn}function xn(zn,Jn,Qn,ta){var Pn=Mn.classify(zn);if(Pn.type==="loop"){var Un=Pn.roots;pe(Qn,ta,Jn,Un[0],Jn,Un[1])}return Qn}function In(zn,Jn,Qn,ta,Pn,Un){var On=1e-7,Rn=!Jn;Rn&&(Jn=zn);for(var Yn=zn.length,na=Jn.length,ea=new Array(Yn),pa=Rn?ea:new Array(na),ha=[],ba=0;ba<Yn;ba++)ea[ba]=zn[ba].getValues(ta);if(!Rn)for(var ba=0;ba<na;ba++)pa[ba]=Jn[ba].getValues(Pn);for(var Oa=z.findCurveBoundsCollisions(ea,pa,On),va=0;va<Yn;va++){var Sa=zn[va],$a=ea[va];Rn&&xn($a,Sa,ha,Qn);var Da=Oa[va];if(Da)for(var Na=0;Na<Da.length;Na++){if(Un&&ha.length)return ha;var Va=Da[Na];if(!Rn||Va>va){var Ua=Jn[Va],Wa=pa[Va];Cn($a,Wa,Sa,Ua,ha,Qn)}}}return ha}function Ln(zn,Jn){function Qn(Xa){var tr=Xa[6]-Xa[0],er=Xa[7]-Xa[1];return tr*tr+er*er}var ta=Math.abs,Pn=Ne.getDistance,Un=1e-8,On=1e-7,Rn=Mn.isStraight(zn),Yn=Mn.isStraight(Jn),na=Rn&&Yn,ea=Qn(zn)<Qn(Jn),pa=ea?Jn:zn,ha=ea?zn:Jn,ba=pa[0],Oa=pa[1],va=pa[6]-ba,Sa=pa[7]-Oa;if(Pn(ba,Oa,va,Sa,ha[0],ha[1],!0)<On&&Pn(ba,Oa,va,Sa,ha[6],ha[7],!0)<On)!na&&Pn(ba,Oa,va,Sa,pa[2],pa[3],!0)<On&&Pn(ba,Oa,va,Sa,pa[4],pa[5],!0)<On&&Pn(ba,Oa,va,Sa,ha[2],ha[3],!0)<On&&Pn(ba,Oa,va,Sa,ha[4],ha[5],!0)<On&&(Rn=Yn=na=!0);else if(na)return null;if(Rn^Yn)return null;for(var $a=[zn,Jn],Da=[],Na=0;Na<4&&Da.length<2;Na++){var Va=Na&1,Ua=Va^1,Wa=Na>>1,Qa=Mn.getTimeOf($a[Va],new oe($a[Ua][Wa?6:0],$a[Ua][Wa?7:1]));if(Qa!=null){var Ja=Va?[Wa,Qa]:[Qa,Wa];(!Da.length||ta(Ja[0]-Da[0][0])>Un&&ta(Ja[1]-Da[0][1])>Un)&&Da.push(Ja)}if(Na>2&&!Da.length)break}if(Da.length!==2)Da=null;else if(!na){var Ra=Mn.getPart(zn,Da[0][0],Da[1][0]),Fa=Mn.getPart(Jn,Da[0][1],Da[1][1]);(ta(Fa[2]-Ra[2])>On||ta(Fa[3]-Ra[3])>On||ta(Fa[4]-Ra[4])>On||ta(Fa[5]-Ra[5])>On)&&(Da=null)}return Da}function An(zn,Jn){var Qn=zn[0],ta=zn[1],Pn=zn[2],Un=zn[3],On=zn[4],Rn=zn[5],Yn=zn[6],na=zn[7],ea=Jn.normalize(),pa=ea.x,ha=ea.y,ba=3*Yn-9*On+9*Pn-3*Qn,Oa=3*na-9*Rn+9*Un-3*ta,va=6*On-12*Pn+6*Qn,Sa=6*Rn-12*Un+6*ta,$a=3*Pn-3*Qn,Da=3*Un-3*ta,Na=2*ba*ha-2*Oa*pa,Va=[];if(Math.abs(Na)<ae.CURVETIME_EPSILON){var Ua=ba*Da-Oa*$a,Na=ba*Sa-Oa*va;if(Na!=0){var Wa=-Ua/Na;Wa>=0&&Wa<=1&&Va.push(Wa)}}else{var Qa=(va*va-4*ba*$a)*ha*ha+(-2*va*Sa+4*Oa*$a+4*ba*Da)*pa*ha+(Sa*Sa-4*Oa*Da)*pa*pa,Ja=va*ha-Sa*pa;if(Qa>=0&&Na!=0){var Ra=Math.sqrt(Qa),Fa=-(Ja+Ra)/Na,Xa=(-Ja+Ra)/Na;Fa>=0&&Fa<=1&&Va.push(Fa),Xa>=0&&Xa<=1&&Va.push(Xa)}}return Va}return{getIntersections:function(zn){var Jn=this.getValues(),Qn=zn&&zn!==this&&zn.getValues();return Qn?Cn(Jn,Qn,this,zn,[]):xn(Jn,this,[])},statics:{getOverlaps:Ln,getIntersections:In,getCurveLineIntersections:Lt,getTimesWithTangent:An}}}),$n=k.extend({_class:"CurveLocation",initialize:function(Oe,Ve,Ue,Pt,Lt){if(Ve>=.99999999){var bn=Oe.getNext();bn&&(Ve=0,Oe=bn)}this._setCurve(Oe),this._time=Ve,this._point=Ue||Oe.getPointAtTime(Ve),this._overlap=Pt,this._distance=Lt,this._intersection=this._next=this._previous=null},_setPath:function(pe){this._path=pe,this._version=pe?pe._version:0},_setCurve:function(pe){this._setPath(pe._path),this._curve=pe,this._segment=null,this._segment1=pe._segment1,this._segment2=pe._segment2},_setSegment:function(pe){var Oe=pe.getCurve();Oe?this._setCurve(Oe):(this._setPath(pe._path),this._segment1=pe,this._segment2=null),this._segment=pe,this._time=pe===this._segment1?0:1,this._point=pe._point.clone()},getSegment:function(){var pe=this._segment;if(!pe){var Oe=this.getCurve(),Ve=this.getTime();Ve===0?pe=Oe._segment1:Ve===1?pe=Oe._segment2:Ve!=null&&(pe=Oe.getPartLength(0,Ve)<Oe.getPartLength(Ve,1)?Oe._segment1:Oe._segment2),this._segment=pe}return pe},getCurve:function(){var pe=this._path,Oe=this;pe&&pe._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function Ve(Ue){var Pt=Ue&&Ue.getCurve();if(Pt&&(Oe._time=Pt.getTimeOf(Oe._point))!=null)return Oe._setCurve(Pt),Pt}return this._curve||Ve(this._segment)||Ve(this._segment1)||Ve(this._segment2.getPrevious())},getPath:function(){var pe=this.getCurve();return pe&&pe._path},getIndex:function(){var pe=this.getCurve();return pe&&pe.getIndex()},getTime:function(){var pe=this.getCurve(),Oe=this._time;return pe&&Oe==null?this._time=pe.getTimeOf(this._point):Oe},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var pe=this._offset;if(pe==null){pe=0;var Oe=this.getPath(),Ve=this.getIndex();if(Oe&&Ve!=null)for(var Ue=Oe.getCurves(),Pt=0;Pt<Ve;Pt++)pe+=Ue[Pt].getLength();this._offset=pe+=this.getCurveOffset()}return pe},getCurveOffset:function(){var pe=this._curveOffset;if(pe==null){var Oe=this.getCurve(),Ve=this.getTime();this._curveOffset=pe=Ve!=null&&Oe&&Oe.getPartLength(0,Ve)}return pe},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var pe=this.getCurve(),Oe=pe&&pe.divideAtTime(this.getTime());return Oe&&this._setSegment(Oe._segment1),Oe},split:function(){var pe=this.getCurve(),Oe=pe._path,Ve=pe&&pe.splitAtTime(this.getTime());return Ve&&this._setSegment(Oe.getLastSegment()),Ve},equals:function(pe,Oe){var Ve=this===pe;if(!Ve&&pe instanceof $n){var Ue=this.getCurve(),Pt=pe.getCurve(),Lt=Ue._path,bn=Pt._path;if(Lt===bn){var jt=Math.abs,Cn=1e-7,xn=jt(this.getOffset()-pe.getOffset()),In=!Oe&&this._intersection,Ln=!Oe&&pe._intersection;Ve=(xn<Cn||Lt&&jt(Lt.getLength()-xn)<Cn)&&(!In&&!Ln||In&&Ln&&In.equals(Ln,!0))}}return Ve},toString:function(){var pe=[],Oe=this.getPoint(),Ve=j.instance;Oe&&pe.push("point: "+Oe);var Ue=this.getIndex();Ue!=null&&pe.push("index: "+Ue);var Pt=this.getTime();return Pt!=null&&pe.push("time: "+Ve.number(Pt)),this._distance!=null&&pe.push("distance: "+Ve.number(this._distance)),"{ "+pe.join(", ")+" }"},isTouching:function(){var pe=this._intersection;if(pe&&this.getTangent().isCollinear(pe.getTangent())){var Oe=this.getCurve(),Ve=pe.getCurve();return!(Oe.isStraight()&&Ve.isStraight()&&Oe.getLine().intersect(Ve.getLine()))}return!1},isCrossing:function(){var pe=this._intersection;if(!pe)return!1;var Oe=this.getTime(),Ve=pe.getTime(),Ue=1e-8,Pt=1-Ue,Lt=Oe>=Ue&&Oe<=Pt,bn=Ve>=Ue&&Ve<=Pt;if(Lt&&bn)return!this.isTouching();var jt=this.getCurve(),Cn=jt&&Oe<Ue?jt.getPrevious():jt,xn=pe.getCurve(),In=xn&&Ve<Ue?xn.getPrevious():xn;if(Oe>Pt&&(jt=jt.getNext()),Ve>Pt&&(xn=xn.getNext()),!Cn||!jt||!In||!xn)return!1;var Ln=[];function An(pa,ha){var ba=pa.getValues(),Oa=Mn.classify(ba).roots||Mn.getPeaks(ba),va=Oa.length,Sa=Mn.getLength(ba,ha&&va?Oa[va-1]:0,!ha&&va?Oa[0]:1);Ln.push(va?Sa:Sa/32)}function zn(pa,ha,ba){return ha<ba?pa>ha&&pa<ba:pa>ha||pa<ba}Lt||(An(Cn,!0),An(jt,!1)),bn||(An(In,!0),An(xn,!1));var Jn=this.getPoint(),Qn=Math.min.apply(Math,Ln),ta=Lt?jt.getTangentAtTime(Oe):jt.getPointAt(Qn).subtract(Jn),Pn=Lt?ta.negate():Cn.getPointAt(-Qn).subtract(Jn),Un=bn?xn.getTangentAtTime(Ve):xn.getPointAt(Qn).subtract(Jn),On=bn?Un.negate():In.getPointAt(-Qn).subtract(Jn),Rn=Pn.getAngle(),Yn=ta.getAngle(),na=On.getAngle(),ea=Un.getAngle();return!!(Lt?zn(Rn,na,ea)^zn(Yn,na,ea)&&zn(Rn,ea,na)^zn(Yn,ea,na):zn(na,Rn,Yn)^zn(ea,Rn,Yn)&&zn(na,Yn,Rn)^zn(ea,Yn,Rn))},hasOverlap:function(){return!!this._overlap}},k.each(Mn._evaluateMethods,function(pe){var Oe=pe+"At";this[pe]=function(){var Ve=this.getCurve(),Ue=this.getTime();return Ue!=null&&Ve&&Ve[Oe](Ue,!0)}},{preserve:!0}),new function(){function pe(Oe,Ve,Ue){var Pt=Oe.length,Lt=0,bn=Pt-1;function jt(Jn,Qn){for(var ta=Jn+Qn;ta>=-1&&ta<=Pt;ta+=Qn){var Pn=Oe[(ta%Pt+Pt)%Pt];if(!Ve.getPoint().isClose(Pn.getPoint(),1e-7))break;if(Ve.equals(Pn))return Pn}return null}for(;Lt<=bn;){var Cn=Lt+bn>>>1,xn=Oe[Cn],In;if(Ue&&(In=Ve.equals(xn)?xn:jt(Cn,-1)||jt(Cn,1)))return Ve._overlap&&(In._overlap=In._intersection._overlap=!0),In;var Ln=Ve.getPath(),An=xn.getPath(),zn=Ln!==An?Ln._id-An._id:Ve.getIndex()+Ve.getTime()-(xn.getIndex()+xn.getTime());zn<0?bn=Cn-1:Lt=Cn+1}return Oe.splice(Lt,0,Ve),Ve}return{statics:{insert:pe,expand:function(Oe){for(var Ve=Oe.slice(),Ue=Oe.length-1;Ue>=0;Ue--)pe(Ve,Oe[Ue]._intersection,!1);return Ve}}}}),Nn=xe.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(pe){var Oe,Ve,Ue;if(k.isPlainObject(pe)?(Ve=pe.segments,Oe=pe.pathData):Array.isArray(pe)?Ve=pe:typeof pe=="string"&&(Oe=pe),Ve){var Pt=Ve[0];Ue=Pt&&Array.isArray(Pt[0])}else Oe&&(Ue=(Oe.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(Oe));var Lt=Ue?jn:kn;return new Lt(pe)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(pe){this.isClockwise()!=(pe=!!pe)&&this.reverse()},setPathData:function(pe){var Oe=pe&&pe.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),Ve,Ue=!1,Pt,Lt,bn=new oe,jt=new oe;function Cn(On,Rn){var Yn=+Ve[On];return Ue&&(Yn+=bn[Rn]),Yn}function xn(On){return new oe(Cn(On,"x"),Cn(On+1,"y"))}this.clear();for(var In=0,Ln=Oe&&Oe.length;In<Ln;In++){var An=Oe[In],zn=An[0],Jn=zn.toLowerCase();Ve=An.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var Qn=Ve&&Ve.length;switch(Ue=zn===Jn,Pt==="z"&&!/[mz]/.test(Jn)&&this.moveTo(bn),Jn){case"m":case"l":for(var ta=Jn==="m",Pn=0;Pn<Qn;Pn+=2)this[ta?"moveTo":"lineTo"](bn=xn(Pn)),ta&&(jt=bn,ta=!1);Lt=bn;break;case"h":case"v":var Un=Jn==="h"?"x":"y";bn=bn.clone();for(var Pn=0;Pn<Qn;Pn++)bn[Un]=Cn(Pn,Un),this.lineTo(bn);Lt=bn;break;case"c":for(var Pn=0;Pn<Qn;Pn+=6)this.cubicCurveTo(xn(Pn),Lt=xn(Pn+2),bn=xn(Pn+4));break;case"s":for(var Pn=0;Pn<Qn;Pn+=4)this.cubicCurveTo(/[cs]/.test(Pt)?bn.multiply(2).subtract(Lt):bn,Lt=xn(Pn),bn=xn(Pn+2)),Pt=Jn;break;case"q":for(var Pn=0;Pn<Qn;Pn+=4)this.quadraticCurveTo(Lt=xn(Pn),bn=xn(Pn+2));break;case"t":for(var Pn=0;Pn<Qn;Pn+=2)this.quadraticCurveTo(Lt=/[qt]/.test(Pt)?bn.multiply(2).subtract(Lt):bn,bn=xn(Pn)),Pt=Jn;break;case"a":for(var Pn=0;Pn<Qn;Pn+=7)this.arcTo(bn=xn(Pn+5),new le(+Ve[Pn],+Ve[Pn+1]),+Ve[Pn+2],+Ve[Pn+4],+Ve[Pn+3]);break;case"z":this.closePath(1e-12),bn=jt;break}Pt=Jn}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(pe){var Oe=pe.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(pe):{};return Oe.onPath||!!(this.getFillRule()==="evenodd"?Oe.windingL&1||Oe.windingR&1:Oe.winding)},getIntersections:function(pe,Oe,Ve,Ue){var Pt=this===pe||!pe,Lt=this._matrix._orNullIfIdentity(),bn=Pt?Lt:(Ve||pe._matrix)._orNullIfIdentity();return Pt||this.getBounds(Lt).intersects(pe.getBounds(bn),1e-12)?Mn.getIntersections(this.getCurves(),!Pt&&pe.getCurves(),Oe,Lt,bn,Ue):[]},getCrossings:function(pe){return this.getIntersections(pe,function(Oe){return Oe.isCrossing()})},getNearestLocation:function(){for(var pe=oe.read(arguments),Oe=this.getCurves(),Ve=1/0,Ue=null,Pt=0,Lt=Oe.length;Pt<Lt;Pt++){var bn=Oe[Pt].getNearestLocation(pe);bn._distance<Ve&&(Ve=bn._distance,Ue=bn)}return Ue},getNearestPoint:function(){var pe=this.getNearestLocation.apply(this,arguments);return pe&&pe.getPoint()},interpolate:function(pe,Oe,Ve){var Ue=!this._children,Pt=Ue?"_segments":"_children",Lt=pe[Pt],bn=Oe[Pt],jt=this[Pt];if(!Lt||!bn||Lt.length!==bn.length)throw new Error("Invalid operands in interpolate() call: "+pe+", "+Oe);var Cn=jt.length,xn=bn.length;if(Cn<xn)for(var In=Ue?hn:kn,Ln=Cn;Ln<xn;Ln++)this.add(new In);else Cn>xn&&this[Ue?"removeSegments":"removeChildren"](xn,Cn);for(var Ln=0;Ln<xn;Ln++)jt[Ln].interpolate(Lt[Ln],bn[Ln],Ve);Ue&&(this.setClosed(pe._closed),this._changed(9))},compare:function(pe){var Oe=!1;if(pe){var Ve=this._children||[this],Ue=pe._children?pe._children.slice():[pe],Pt=Ve.length,Lt=Ue.length,bn=[],jt=0;Oe=!0;for(var Cn=z.findItemBoundsCollisions(Ve,Ue,ae.GEOMETRIC_EPSILON),xn=Pt-1;xn>=0&&Oe;xn--){var In=Ve[xn];Oe=!1;var Ln=Cn[xn];if(Ln)for(var An=Ln.length-1;An>=0&&!Oe;An--)In.compare(Ue[Ln[An]])&&(bn[Ln[An]]||(bn[Ln[An]]=!0,jt++),Oe=!0)}Oe=Oe&&jt===Lt}return Oe}}),kn=Nn.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(Oe){this._closed=!1,this._segments=[],this._version=0;var Ve=arguments,Ue=Array.isArray(Oe)?typeof Oe[0]=="object"?Oe:Ve:Oe&&Oe.size===r&&(Oe.x!==r||Oe.point!==r)?Ve:null;Ue&&Ue.length>0?this.setSegments(Ue):(this._curves=r,this._segmentSelection=0,!Ue&&typeof Oe=="string"&&(this.setPathData(Oe),Oe=null)),this._initialize(!Ue&&Oe)},_equals:function(pe){return this._closed===pe._closed&&k.equals(this._segments,pe._segments)},copyContent:function(pe){this.setSegments(pe._segments),this._closed=pe._closed},_changed:function pe(Oe){if(pe.base.call(this,Oe),Oe&8){if(this._length=this._area=r,Oe&32)this._version++;else if(this._curves)for(var Ve=0,Ue=this._curves.length;Ve<Ue;Ve++)this._curves[Ve]._changed()}else Oe&64&&(this._bounds=r)},getStyle:function(){var pe=this._parent;return(pe instanceof jn?pe:this)._style},getSegments:function(){return this._segments},setSegments:function(pe){var Oe=this.isFullySelected(),Ve=pe&&pe.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=r,Ve){var Ue=pe[Ve-1];typeof Ue=="boolean"&&(this.setClosed(Ue),Ve--),this._add(hn.readList(pe,0,{},Ve))}Oe&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var pe=this._curves,Oe=this._segments;if(!pe){var Ve=this._countCurves();pe=this._curves=new Array(Ve);for(var Ue=0;Ue<Ve;Ue++)pe[Ue]=new Mn(this,Oe[Ue],Oe[Ue+1]||Oe[0])}return pe},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var pe=this.getCurves();return pe[pe.length-1]},isClosed:function(){return this._closed},setClosed:function(pe){if(this._closed!=(pe=!!pe)){if(this._closed=pe,this._curves){var Oe=this._curves.length=this._countCurves();pe&&(this._curves[Oe-1]=new Mn(this,this._segments[Oe-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(pe,Oe){var Ve=this._segments,Ue=Ve.length,Pt=new j(Oe),Lt=new Array(6),bn=!0,jt,Cn,xn,In,Ln,An,zn,Jn,Qn=[];function ta(Un,On){if(Un._transformCoordinates(pe,Lt),jt=Lt[0],Cn=Lt[1],bn)Qn.push("M"+Pt.pair(jt,Cn)),bn=!1;else if(Ln=Lt[2],An=Lt[3],Ln===jt&&An===Cn&&zn===xn&&Jn===In){if(!On){var Rn=jt-xn,Yn=Cn-In;Qn.push(Rn===0?"v"+Pt.number(Yn):Yn===0?"h"+Pt.number(Rn):"l"+Pt.pair(Rn,Yn))}}else Qn.push("c"+Pt.pair(zn-xn,Jn-In)+" "+Pt.pair(Ln-xn,An-In)+" "+Pt.pair(jt-xn,Cn-In));xn=jt,In=Cn,zn=Lt[4],Jn=Lt[5]}if(!Ue)return"";for(var Pn=0;Pn<Ue;Pn++)ta(Ve[Pn]);return this._closed&&Ue>0&&(ta(Ve[0],!0),Qn.push("z")),Qn.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(pe){for(var Oe=this._segments,Ve=new Array(6),Ue=0,Pt=Oe.length;Ue<Pt;Ue++)Oe[Ue]._transformCoordinates(pe,Ve,!0);return!0},_add:function(pe,bn){for(var Ve=this._segments,Ue=this._curves,Pt=pe.length,Lt=bn==null,bn=Lt?Ve.length:bn,jt=0;jt<Pt;jt++){var Cn=pe[jt];Cn._path&&(Cn=pe[jt]=Cn.clone()),Cn._path=this,Cn._index=bn+jt,Cn._selection&&this._updateSelection(Cn,0,Cn._selection)}if(Lt)k.push(Ve,pe);else{Ve.splice.apply(Ve,[bn,0].concat(pe));for(var jt=bn+Pt,xn=Ve.length;jt<xn;jt++)Ve[jt]._index=jt}if(Ue){var In=this._countCurves(),Ln=bn>0&&bn+Pt-1===In?bn-1:bn,An=Ln,zn=Math.min(Ln+Pt,In);pe._curves&&(Ue.splice.apply(Ue,[Ln,0].concat(pe._curves)),An+=pe._curves.length);for(var jt=An;jt<zn;jt++)Ue.splice(jt,0,new Mn(this,null,null));this._adjustCurves(Ln,zn)}return this._changed(41),pe},_adjustCurves:function(pe,Oe){for(var Ve=this._segments,Ue=this._curves,Pt,Lt=pe;Lt<Oe;Lt++)Pt=Ue[Lt],Pt._path=this,Pt._segment1=Ve[Lt],Pt._segment2=Ve[Lt+1]||Ve[0],Pt._changed();(Pt=Ue[this._closed&&!pe?Ve.length-1:pe-1])&&(Pt._segment2=Ve[pe]||Ve[0],Pt._changed()),(Pt=Ue[Oe])&&(Pt._segment1=Ve[Oe],Pt._changed())},_countCurves:function(){var pe=this._segments.length;return!this._closed&&pe>0?pe-1:pe},add:function(pe){var Oe=arguments;return Oe.length>1&&typeof pe!="number"?this._add(hn.readList(Oe)):this._add([hn.read(Oe)])[0]},insert:function(pe,Oe){var Ve=arguments;return Ve.length>2&&typeof Oe!="number"?this._add(hn.readList(Ve,1),pe):this._add([hn.read(Ve,1)],pe)[0]},addSegment:function(){return this._add([hn.read(arguments)])[0]},insertSegment:function(pe){return this._add([hn.read(arguments,1)],pe)[0]},addSegments:function(pe){return this._add(hn.readList(pe))},insertSegments:function(pe,Oe){return this._add(hn.readList(Oe),pe)},removeSegment:function(pe){return this.removeSegments(pe,pe+1)[0]||null},removeSegments:function(pe,Oe,Ve){pe=pe||0,Oe=k.pick(Oe,this._segments.length);var Ue=this._segments,Pt=this._curves,Lt=Ue.length,bn=Ue.splice(pe,Oe-pe),jt=bn.length;if(!jt)return bn;for(var Cn=0;Cn<jt;Cn++){var xn=bn[Cn];xn._selection&&this._updateSelection(xn,xn._selection,0),xn._index=xn._path=null}for(var Cn=pe,In=Ue.length;Cn<In;Cn++)Ue[Cn]._index=Cn;if(Pt){for(var Ln=pe>0&&Oe===Lt+(this._closed?1:0)?pe-1:pe,Pt=Pt.splice(Ln,jt),Cn=Pt.length-1;Cn>=0;Cn--)Pt[Cn]._path=null;Ve&&(bn._curves=Pt.slice(1)),this._adjustCurves(Ln,Ln)}return this._changed(41),bn},clear:"#removeSegments",hasHandles:function(){for(var pe=this._segments,Oe=0,Ve=pe.length;Oe<Ve;Oe++)if(pe[Oe].hasHandles())return!0;return!1},clearHandles:function(){for(var pe=this._segments,Oe=0,Ve=pe.length;Oe<Ve;Oe++)pe[Oe].clearHandles()},getLength:function(){if(this._length==null){for(var pe=this.getCurves(),Oe=0,Ve=0,Ue=pe.length;Ve<Ue;Ve++)Oe+=pe[Ve].getLength();this._length=Oe}return this._length},getArea:function(){var pe=this._area;if(pe==null){var Oe=this._segments,Ve=this._closed;pe=0;for(var Ue=0,Pt=Oe.length;Ue<Pt;Ue++){var Lt=Ue+1===Pt;pe+=Mn.getArea(Mn.getValues(Oe[Ue],Oe[Lt?0:Ue+1],null,Lt&&!Ve))}this._area=pe}return pe},isFullySelected:function(){var pe=this._segments.length;return this.isSelected()&&pe>0&&this._segmentSelection===pe*7},setFullySelected:function(pe){pe&&this._selectSegments(!0),this.setSelected(pe)},setSelection:function pe(Oe){Oe&1||this._selectSegments(!1),pe.base.call(this,Oe)},_selectSegments:function(pe){var Oe=this._segments,Ve=Oe.length,Ue=pe?7:0;this._segmentSelection=Ue*Ve;for(var Pt=0;Pt<Ve;Pt++)Oe[Pt]._selection=Ue},_updateSelection:function(pe,Oe,Ve){pe._selection=Ve;var Ue=this._segmentSelection+=Ve-Oe;Ue>0&&this.setSelected(!0)},divideAt:function(pe){var Oe=this.getLocationAt(pe),Ve;return Oe&&(Ve=Oe.getCurve().divideAt(Oe.getCurveOffset()))?Ve._segment1:null},splitAt:function(pe){var Oe=this.getLocationAt(pe),Ve=Oe&&Oe.index,Ue=Oe&&Oe.time,Pt=1e-8,Lt=1-Pt;Ue>Lt&&(Ve++,Ue=0);var bn=this.getCurves();if(Ve>=0&&Ve<bn.length){Ue>=Pt&&bn[Ve++].divideAtTime(Ue);var jt=this.removeSegments(Ve,this._segments.length,!0),Cn;return this._closed?(this.setClosed(!1),Cn=this):(Cn=new kn(xe.NO_INSERT),Cn.insertAbove(this),Cn.copyAttributes(this)),Cn._add(jt,0),this.addSegment(jt[0]),Cn}return null},split:function(pe,Oe){var Ve,Ue=Oe===r?pe:(Ve=this.getCurves()[pe])&&Ve.getLocationAtTime(Oe);return Ue!=null?this.splitAt(Ue):null},join:function(pe,Oe){var Ve=Oe||0;if(pe&&pe!==this){var Ue=pe._segments,Pt=this.getLastSegment(),Lt=pe.getLastSegment();if(!Lt)return this;Pt&&Pt._point.isClose(Lt._point,Ve)&&pe.reverse();var bn=pe.getFirstSegment();if(Pt&&Pt._point.isClose(bn._point,Ve))Pt.setHandleOut(bn._handleOut),this._add(Ue.slice(1));else{var jt=this.getFirstSegment();jt&&jt._point.isClose(bn._point,Ve)&&pe.reverse(),Lt=pe.getLastSegment(),jt&&jt._point.isClose(Lt._point,Ve)?(jt.setHandleIn(Lt._handleIn),this._add(Ue.slice(0,Ue.length-1),0)):this._add(Ue.slice())}pe._closed&&this._add([Ue[0]]),pe.remove()}var Cn=this.getFirstSegment(),xn=this.getLastSegment();return Cn!==xn&&Cn._point.isClose(xn._point,Ve)&&(Cn.setHandleIn(xn._handleIn),xn.remove(),this.setClosed(!0)),this},reduce:function(pe){for(var Oe=this.getCurves(),Ve=pe&&pe.simplify,Ue=Ve?1e-7:0,Pt=Oe.length-1;Pt>=0;Pt--){var Lt=Oe[Pt];!Lt.hasHandles()&&(!Lt.hasLength(Ue)||Ve&&Lt.isCollinear(Lt.getNext()))&&Lt.remove()}return this},reverse:function(){this._segments.reverse();for(var pe=0,Oe=this._segments.length;pe<Oe;pe++){var Ve=this._segments[pe],Ue=Ve._handleIn;Ve._handleIn=Ve._handleOut,Ve._handleOut=Ue,Ve._index=pe}this._curves=null,this._changed(9)},flatten:function(pe){for(var Oe=new Fn(this,pe||.25,256,!0),Ve=Oe.parts,Ue=Ve.length,Pt=[],Lt=0;Lt<Ue;Lt++)Pt.push(new hn(Ve[Lt].curve.slice(0,2)));!this._closed&&Ue>0&&Pt.push(new hn(Ve[Ue-1].curve.slice(6))),this.setSegments(Pt)},simplify:function(pe){var Oe=new Tn(this).fit(pe||2.5);return Oe&&this.setSegments(Oe),!!Oe},smooth:function(pe){var Oe=this,Ve=pe||{},Ue=Ve.type||"asymmetric",Pt=this._segments,Lt=Pt.length,bn=this._closed;function jt(er,or){var rr=er&&er.index;if(rr!=null){var sr=er.path;if(sr&&sr!==Oe)throw new Error(er._class+" "+rr+" of "+sr+" is not part of "+Oe);or&&er instanceof Mn&&rr++}else rr=typeof er=="number"?er:or;return Math.min(rr<0&&bn?rr%Lt:rr<0?rr+Lt:rr,Lt-1)}var Cn=bn&&Ve.from===r&&Ve.to===r,xn=jt(Ve.from,0),In=jt(Ve.to,Lt-1);if(xn>In)if(bn)xn-=Lt;else{var Ln=xn;xn=In,In=Ln}if(/^(?:asymmetric|continuous)$/.test(Ue)){var An=Ue==="asymmetric",zn=Math.min,Jn=In-xn+1,Qn=Jn-1,ta=Cn?zn(Jn,4):1,Pn=ta,Un=ta,On=[];if(bn||(Pn=zn(1,xn),Un=zn(1,Lt-In-1)),Qn+=Pn+Un,Qn<=1)return;for(var Rn=0,Yn=xn-Pn;Rn<=Qn;Rn++,Yn++)On[Rn]=Pt[(Yn<0?Yn+Lt:Yn)%Lt]._point;for(var na=On[0]._x+2*On[1]._x,ea=On[0]._y+2*On[1]._y,pa=2,ha=Qn-1,ba=[na],Oa=[ea],va=[pa],Sa=[],$a=[],Rn=1;Rn<Qn;Rn++){var Da=Rn<ha,Na=Da||An?1:2,Va=Da?4:An?2:7,Ua=Da?4:An?3:8,Wa=Da?2:An?0:1,Qa=Na/pa;pa=va[Rn]=Va-Qa,na=ba[Rn]=Ua*On[Rn]._x+Wa*On[Rn+1]._x-Qa*na,ea=Oa[Rn]=Ua*On[Rn]._y+Wa*On[Rn+1]._y-Qa*ea}Sa[ha]=ba[ha]/va[ha],$a[ha]=Oa[ha]/va[ha];for(var Rn=Qn-2;Rn>=0;Rn--)Sa[Rn]=(ba[Rn]-Sa[Rn+1])/va[Rn],$a[Rn]=(Oa[Rn]-$a[Rn+1])/va[Rn];Sa[Qn]=(3*On[Qn]._x-Sa[ha])/2,$a[Qn]=(3*On[Qn]._y-$a[ha])/2;for(var Rn=Pn,Ja=Qn-Un,Yn=xn;Rn<=Ja;Rn++,Yn++){var Ra=Pt[Yn<0?Yn+Lt:Yn],Fa=Ra._point,Xa=Sa[Rn]-Fa._x,tr=$a[Rn]-Fa._y;(Cn||Rn<Ja)&&Ra.setHandleOut(Xa,tr),(Cn||Rn>Pn)&&Ra.setHandleIn(-Xa,-tr)}}else for(var Rn=xn;Rn<=In;Rn++)Pt[Rn<0?Rn+Lt:Rn].smooth(Ve,!Cn&&Rn===xn,!Cn&&Rn===In)},toShape:function(pe){if(!this._closed)return null;var Oe=this._segments,Ve,Ue,Pt,Lt;function bn(An,zn){var Jn=Oe[An],Qn=Jn.getNext(),ta=Oe[zn],Pn=ta.getNext();return Jn._handleOut.isZero()&&Qn._handleIn.isZero()&&ta._handleOut.isZero()&&Pn._handleIn.isZero()&&Qn._point.subtract(Jn._point).isCollinear(Pn._point.subtract(ta._point))}function jt(An){var zn=Oe[An],Jn=zn.getPrevious(),Qn=zn.getNext();return Jn._handleOut.isZero()&&zn._handleIn.isZero()&&zn._handleOut.isZero()&&Qn._handleIn.isZero()&&zn._point.subtract(Jn._point).isOrthogonal(Qn._point.subtract(zn._point))}function Cn(An){var zn=Oe[An],Jn=zn.getNext(),Qn=zn._handleOut,ta=Jn._handleIn,Pn=.5522847498307936;if(Qn.isOrthogonal(ta)){var Un=zn._point,On=Jn._point,Rn=new Ne(Un,Qn,!0).intersect(new Ne(On,ta,!0),!0);return Rn&&ae.isZero(Qn.getLength()/Rn.subtract(Un).getLength()-Pn)&&ae.isZero(ta.getLength()/Rn.subtract(On).getLength()-Pn)}return!1}function xn(An,zn){return Oe[An]._point.getDistance(Oe[zn]._point)}if(!this.hasHandles()&&Oe.length===4&&bn(0,2)&&bn(1,3)&&jt(1)?(Ve=qe.Rectangle,Ue=new le(xn(0,3),xn(0,1)),Lt=Oe[1]._point.add(Oe[2]._point).divide(2)):Oe.length===8&&Cn(0)&&Cn(2)&&Cn(4)&&Cn(6)&&bn(1,5)&&bn(3,7)?(Ve=qe.Rectangle,Ue=new le(xn(1,6),xn(0,3)),Pt=Ue.subtract(new le(xn(0,7),xn(1,2))).divide(2),Lt=Oe[3]._point.add(Oe[4]._point).divide(2)):Oe.length===4&&Cn(0)&&Cn(1)&&Cn(2)&&Cn(3)&&(ae.isZero(xn(0,2)-xn(1,3))?(Ve=qe.Circle,Pt=xn(0,2)/2):(Ve=qe.Ellipse,Pt=new le(xn(2,0)/2,xn(3,1)/2)),Lt=Oe[1]._point),Ve){var In=this.getPosition(!0),Ln=new Ve({center:In,size:Ue,radius:Pt,insert:!1});return Ln.copyAttributes(this,!0),Ln._matrix.prepend(this._matrix),Ln.rotate(Lt.subtract(In).getAngle()+90),(pe===r||pe)&&Ln.insertAbove(this),Ln}return null},toPath:"#clone",compare:function pe(Oe){if(!Oe||Oe instanceof jn)return pe.base.call(this,Oe);var Ve=this.getCurves(),Ue=Oe.getCurves(),Pt=Ve.length,Lt=Ue.length;if(!Pt||!Lt)return Pt==Lt;for(var bn=Ve[0].getValues(),jt=[],Cn=0,xn,In=0,Ln,An=0;An<Lt;An++){var ta=Ue[An].getValues();jt.push(ta);var zn=Mn.getOverlaps(bn,ta);if(zn){xn=!An&&zn[0][0]>0?Lt-1:An,Ln=zn[0][1];break}}for(var Jn=Math.abs,Qn=1e-8,ta=jt[xn],Pn;bn&&ta;){var zn=Mn.getOverlaps(bn,ta);if(zn){var Un=zn[0][0];if(Jn(Un-In)<Qn){In=zn[1][0],In===1&&(bn=++Cn<Pt?Ve[Cn].getValues():null,In=0);var On=zn[0][1];if(Jn(On-Ln)<Qn){if(Pn||(Pn=[xn,On]),Ln=zn[1][1],Ln===1&&(++xn>=Lt&&(xn=0),ta=jt[xn]||Ue[xn].getValues(),Ln=0),!bn)return Pn[0]===xn&&Pn[1]===Ln;continue}}}break}return!1},_hitTestSelf:function(pe,Oe,Ve,Ue){var Pt=this,Lt=this.getStyle(),bn=this._segments,jt=bn.length,Cn=this._closed,xn=Oe._tolerancePadding,In=xn,Ln,An,zn,Jn,Qn,ta,Pn=Oe.stroke&&Lt.hasStroke(),Un=Oe.fill&&Lt.hasFill(),On=Oe.curves,Rn=Pn?Lt.getStrokeWidth()/2:Un&&Oe.tolerance>0||On?0:null;Rn!==null&&(Rn>0?(Ln=Lt.getStrokeJoin(),An=Lt.getStrokeCap(),zn=Lt.getMiterLimit(),In=In.add(kn._getStrokePadding(Rn,Ue))):Ln=An="round");function Yn(Sa,$a){return pe.subtract(Sa).divide($a).length<=1}function na(Sa,$a,Da){if(!Oe.selected||$a.isSelected()){var Na=Sa._point;if($a!==Na&&($a=$a.add(Na)),Yn($a,In))return new Sn(Da,Pt,{segment:Sa,point:$a})}}function ea(Sa,$a){return($a||Oe.segments)&&na(Sa,Sa._point,"segment")||!$a&&Oe.handles&&(na(Sa,Sa._handleIn,"handle-in")||na(Sa,Sa._handleOut,"handle-out"))}function pa(Sa){Jn.add(Sa)}function ha(Sa){var $a=Cn||Sa._index>0&&Sa._index<jt-1;if(($a?Ln:An)==="round")return Yn(Sa._point,In);if(Jn=new kn({internal:!0,closed:!0}),$a?Sa.isSmooth()||kn._addBevelJoin(Sa,Ln,Rn,zn,null,Ue,pa,!0):An==="square"&&kn._addSquareCap(Sa,An,Rn,null,Ue,pa,!0),!Jn.isEmpty()){var Da;return Jn.contains(pe)||(Da=Jn.getNearestLocation(pe))&&Yn(Da.getPoint(),xn)}}if(Oe.ends&&!Oe.segments&&!Cn){if(ta=ea(bn[0],!0)||ea(bn[jt-1],!0))return ta}else if(Oe.segments||Oe.handles){for(var ba=0;ba<jt;ba++)if(ta=ea(bn[ba]))return ta}if(Rn!==null){if(Qn=this.getNearestLocation(pe),Qn){var Oa=Qn.getTime();Oa===0||Oa===1&&jt>1?ha(Qn.getSegment())||(Qn=null):Yn(Qn.getPoint(),In)||(Qn=null)}if(!Qn&&Ln==="miter"&&jt>1)for(var ba=0;ba<jt;ba++){var va=bn[ba];if(pe.getDistance(va._point)<=zn*Rn&&ha(va)){Qn=va.getLocation();break}}}return!Qn&&Un&&this._contains(pe)||Qn&&!Pn&&!On?new Sn("fill",this):Qn?new Sn(Pn?"stroke":"curve",this,{location:Qn,point:Qn.getPoint()}):null}},k.each(Mn._evaluateMethods,function(pe){this[pe+"At"]=function(Oe){var Ve=this.getLocationAt(Oe);return Ve&&Ve[pe]()}},{beans:!1,getLocationOf:function(){for(var pe=oe.read(arguments),Oe=this.getCurves(),Ve=0,Ue=Oe.length;Ve<Ue;Ve++){var Pt=Oe[Ve].getLocationOf(pe);if(Pt)return Pt}return null},getOffsetOf:function(){var pe=this.getLocationOf.apply(this,arguments);return pe?pe.getOffset():null},getLocationAt:function(pe){if(typeof pe=="number"){for(var Oe=this.getCurves(),Ve=0,Ue=0,Pt=Oe.length;Ue<Pt;Ue++){var Lt=Ve,bn=Oe[Ue];if(Ve+=bn.getLength(),Ve>pe)return bn.getLocationAt(pe-Lt)}if(Oe.length>0&&pe<=this.getLength())return new $n(Oe[Oe.length-1],1)}else if(pe&&pe.getPath&&pe.getPath()===this)return pe;return null},getOffsetsWithTangent:function(){var pe=oe.read(arguments);if(pe.isZero())return[];for(var Oe=[],Ve=0,Ue=this.getCurves(),Pt=0,Lt=Ue.length;Pt<Lt;Pt++){for(var bn=Ue[Pt],jt=bn.getTimesWithTangent(pe),Cn=0,xn=jt.length;Cn<xn;Cn++){var In=Ve+bn.getOffsetAtTime(jt[Cn]);Oe.indexOf(In)<0&&Oe.push(In)}Ve+=bn.length}return Oe}}),new function(){function pe(Ve,Ue,Pt,Lt){if(Lt<=0)return;var bn=Lt/2,jt=Lt-2,Cn=bn-1,xn=new Array(6),In,Ln;function An(Un){var On=xn[Un],Rn=xn[Un+1];(In!=On||Ln!=Rn)&&(Ve.beginPath(),Ve.moveTo(In,Ln),Ve.lineTo(On,Rn),Ve.stroke(),Ve.beginPath(),Ve.arc(On,Rn,bn,0,Math.PI*2,!0),Ve.fill())}for(var zn=0,Jn=Ue.length;zn<Jn;zn++){var Qn=Ue[zn],ta=Qn._selection;if(Qn._transformCoordinates(Pt,xn),In=xn[0],Ln=xn[1],ta&2&&An(2),ta&4&&An(4),Ve.fillRect(In-bn,Ln-bn,Lt,Lt),jt>0&&!(ta&1)){var Pn=Ve.fillStyle;Ve.fillStyle="#ffffff",Ve.fillRect(In-Cn,Ln-Cn,jt,jt),Ve.fillStyle=Pn}}}function Oe(Ve,Ue,Pt){var Lt=Ue._segments,bn=Lt.length,jt=new Array(6),Cn=!0,xn,In,Ln,An,zn,Jn,Qn,ta;function Pn(On){if(Pt)On._transformCoordinates(Pt,jt),xn=jt[0],In=jt[1];else{var Rn=On._point;xn=Rn._x,In=Rn._y}if(Cn)Ve.moveTo(xn,In),Cn=!1;else{if(Pt)zn=jt[2],Jn=jt[3];else{var Yn=On._handleIn;zn=xn+Yn._x,Jn=In+Yn._y}zn===xn&&Jn===In&&Qn===Ln&&ta===An?Ve.lineTo(xn,In):Ve.bezierCurveTo(Qn,ta,zn,Jn,xn,In)}if(Ln=xn,An=In,Pt)Qn=jt[4],ta=jt[5];else{var Yn=On._handleOut;Qn=Ln+Yn._x,ta=An+Yn._y}}for(var Un=0;Un<bn;Un++)Pn(Lt[Un]);Ue._closed&&bn>0&&Pn(Lt[0])}return{_draw:function(Ve,Ue,Pt,Lt){var bn=Ue.dontStart,jt=Ue.dontFinish||Ue.clip,Cn=this.getStyle(),xn=Cn.hasFill(),In=Cn.hasStroke(),Ln=Cn.getDashArray(),An=!ua.support.nativeDash&&In&&Ln&&Ln.length;bn||Ve.beginPath(),(xn||In&&!An||jt)&&(Oe(Ve,this,Lt),this._closed&&Ve.closePath());function zn(On){return Ln[(On%An+An)%An]}if(!jt&&(xn||In)&&(this._setStyles(Ve,Ue,Pt),xn&&(Ve.fill(Cn.getFillRule()),Ve.shadowColor="rgba(0,0,0,0)"),In)){if(An){bn||Ve.beginPath();for(var Jn=new Fn(this,.25,32,!1,Lt),Qn=Jn.length,ta=-Cn.getDashOffset(),Pn,Un=0;ta>0;)ta-=zn(Un--)+zn(Un--);for(;ta<Qn;)Pn=ta+zn(Un++),(ta>0||Pn>0)&&Jn.drawPart(Ve,Math.max(ta,0),Math.max(Pn,0)),ta=Pn+zn(Un++)}Ve.stroke()}},_drawSelected:function(Ve,Ue){Ve.beginPath(),Oe(Ve,this,Ue),Ve.stroke(),pe(Ve,this._segments,Ue,ua.settings.handleSize)}}},new function(){function pe(Oe){var Ve=Oe._segments;if(!Ve.length)throw new Error("Use a moveTo() command first");return Ve[Ve.length-1]}return{moveTo:function(){var Oe=this._segments;Oe.length===1&&this.removeSegment(0),Oe.length||this._add([new hn(oe.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new hn(oe.read(arguments))])},cubicCurveTo:function(){var Oe=arguments,Ve=oe.read(Oe),Ue=oe.read(Oe),Pt=oe.read(Oe),Lt=pe(this);Lt.setHandleOut(Ve.subtract(Lt._point)),this._add([new hn(Pt,Ue.subtract(Pt))])},quadraticCurveTo:function(){var Oe=arguments,Ve=oe.read(Oe),Ue=oe.read(Oe),Pt=pe(this)._point;this.cubicCurveTo(Ve.add(Pt.subtract(Ve).multiply(1/3)),Ve.add(Ue.subtract(Ve).multiply(1/3)),Ue)},curveTo:function(){var Oe=arguments,Ve=oe.read(Oe),Ue=oe.read(Oe),Pt=k.pick(k.read(Oe),.5),Lt=1-Pt,bn=pe(this)._point,jt=Ve.subtract(bn.multiply(Lt*Lt)).subtract(Ue.multiply(Pt*Pt)).divide(2*Pt*Lt);if(jt.isNaN())throw new Error("Cannot put a curve through points with parameter = "+Pt);this.quadraticCurveTo(jt,Ue)},arcTo:function(){var Oe=arguments,Ve=Math.abs,Ue=Math.sqrt,Pt=pe(this),Lt=Pt._point,bn=oe.read(Oe),jt,Cn=k.peek(Oe),xn=k.pick(Cn,!0),In,Ln,An,zn;if(typeof xn=="boolean")var Jn=Lt.add(bn).divide(2),jt=Jn.add(Jn.subtract(Lt).rotate(xn?-90:90));else if(k.remain(Oe)<=2)jt=bn,bn=oe.read(Oe);else if(!Lt.equals(bn)){var Qn=le.read(Oe),ta=ae.isZero;if(ta(Qn.width)||ta(Qn.height))return this.lineTo(bn);var Pn=k.read(Oe),xn=!!k.read(Oe),Un=!!k.read(Oe),Jn=Lt.add(bn).divide(2),On=Lt.subtract(Jn).rotate(-Pn),Rn=On.x,Yn=On.y,na=Ve(Qn.width),ea=Ve(Qn.height),pa=na*na,ha=ea*ea,ba=Rn*Rn,Oa=Yn*Yn,va=Ue(ba/pa+Oa/ha);if(va>1&&(na*=va,ea*=va,pa=na*na,ha=ea*ea),va=(pa*ha-pa*Oa-ha*ba)/(pa*Oa+ha*ba),Ve(va)<1e-12&&(va=0),va<0)throw new Error("Cannot create an arc with the given arguments");In=new oe(na*Yn/ea,-ea*Rn/na).multiply((Un===xn?-1:1)*Ue(va)).rotate(Pn).add(Jn),zn=new Ce().translate(In).rotate(Pn).scale(na,ea),An=zn._inverseTransform(Lt),Ln=An.getDirectedAngle(zn._inverseTransform(bn)),!xn&&Ln>0?Ln-=360:xn&&Ln<0&&(Ln+=360)}if(jt){var Sa=new Ne(Lt.add(jt).divide(2),jt.subtract(Lt).rotate(90),!0),$a=new Ne(jt.add(bn).divide(2),bn.subtract(jt).rotate(90),!0),Da=new Ne(Lt,bn),Na=Da.getSide(jt);if(In=Sa.intersect($a,!0),!In){if(!Na)return this.lineTo(bn);throw new Error("Cannot create an arc with the given arguments")}An=Lt.subtract(In),Ln=An.getDirectedAngle(bn.subtract(In));var Va=Da.getSide(In,!0);Va===0?Ln=Na*Ve(Ln):Na===Va&&(Ln+=Ln<0?360:-360)}if(Ln){for(var Ua=1e-5,Wa=Ve(Ln),Qa=Wa>=360?4:Math.ceil((Wa-Ua)/90),Ja=Ln/Qa,Ra=Ja*Math.PI/360,Fa=4/3*Math.sin(Ra)/(1+Math.cos(Ra)),Xa=[],tr=0;tr<=Qa;tr++){var On=bn,er=null;if(tr<Qa&&(er=An.rotate(90).multiply(Fa),zn?(On=zn._transformPoint(An),er=zn._transformPoint(An.add(er)).subtract(On)):On=In.add(An)),!tr)Pt.setHandleOut(er);else{var or=An.rotate(-90).multiply(Fa);zn&&(or=zn._transformPoint(An.add(or)).subtract(On)),Xa.push(new hn(On,or,er))}An=An.rotate(Ja)}this._add(Xa)}},lineBy:function(){var Oe=oe.read(arguments),Ve=pe(this)._point;this.lineTo(Ve.add(Oe))},curveBy:function(){var Oe=arguments,Ve=oe.read(Oe),Ue=oe.read(Oe),Pt=k.read(Oe),Lt=pe(this)._point;this.curveTo(Lt.add(Ve),Lt.add(Ue),Pt)},cubicCurveBy:function(){var Oe=arguments,Ve=oe.read(Oe),Ue=oe.read(Oe),Pt=oe.read(Oe),Lt=pe(this)._point;this.cubicCurveTo(Lt.add(Ve),Lt.add(Ue),Lt.add(Pt))},quadraticCurveBy:function(){var Oe=arguments,Ve=oe.read(Oe),Ue=oe.read(Oe),Pt=pe(this)._point;this.quadraticCurveTo(Pt.add(Ve),Pt.add(Ue))},arcBy:function(){var Oe=arguments,Ve=pe(this)._point,Ue=Ve.add(oe.read(Oe)),Pt=k.pick(k.peek(Oe),!0);typeof Pt=="boolean"?this.arcTo(Ue,Pt):this.arcTo(Ue,Ve.add(oe.read(Oe)))},closePath:function(Oe){this.setClosed(!0),this.join(this,Oe)}}},{_getBounds:function(pe,Oe){var Ve=Oe.handle?"getHandleBounds":Oe.stroke?"getStrokeBounds":"getBounds";return kn[Ve](this._segments,this._closed,this,pe,Oe)},statics:{getBounds:function(pe,Oe,Ve,Ue,Pt,Lt){var bn=pe[0];if(!bn)return new he;var jt=new Array(6),Cn=bn._transformCoordinates(Ue,new Array(6)),xn=Cn.slice(0,2),In=xn.slice(),Ln=new Array(2);function An(Qn){Qn._transformCoordinates(Ue,jt);for(var ta=0;ta<2;ta++)Mn._addBounds(Cn[ta],Cn[ta+4],jt[ta+2],jt[ta],ta,Lt?Lt[ta]:0,xn,In,Ln);var Pn=Cn;Cn=jt,jt=Pn}for(var zn=1,Jn=pe.length;zn<Jn;zn++)An(pe[zn]);return Oe&&An(bn),new he(xn[0],xn[1],In[0]-xn[0],In[1]-xn[1])},getStrokeBounds:function(pe,Oe,Ve,Ue,Pt){var Lt=Ve.getStyle(),bn=Lt.hasStroke(),jt=Lt.getStrokeWidth(),Cn=bn&&Ve._getStrokeMatrix(Ue,Pt),xn=bn&&kn._getStrokePadding(jt,Cn),In=kn.getBounds(pe,Oe,Ve,Ue,Pt,xn);if(!bn)return In;var Ln=jt/2,An=Lt.getStrokeJoin(),zn=Lt.getStrokeCap(),Jn=Lt.getMiterLimit(),Qn=new he(new le(xn));function ta(na){In=In.include(na)}function Pn(na){In=In.unite(Qn.setCenter(na._point.transform(Ue)))}function Un(na,ea){ea==="round"||na.isSmooth()?Pn(na):kn._addBevelJoin(na,ea,Ln,Jn,Ue,Cn,ta)}function On(na,ea){ea==="round"?Pn(na):kn._addSquareCap(na,ea,Ln,Ue,Cn,ta)}var Rn=pe.length-(Oe?0:1);if(Rn>0){for(var Yn=1;Yn<Rn;Yn++)Un(pe[Yn],An);Oe?Un(pe[0],An):(On(pe[0],zn),On(pe[pe.length-1],zn))}return In},_getStrokePadding:function(pe,Oe){if(!Oe)return[pe,pe];var Ve=new oe(pe,0).transform(Oe),Ue=new oe(0,pe).transform(Oe),Pt=Ve.getAngleInRadians(),Lt=Ve.getLength(),bn=Ue.getLength(),jt=Math.sin(Pt),Cn=Math.cos(Pt),xn=Math.tan(Pt),In=Math.atan2(bn*xn,Lt),Ln=Math.atan2(bn,xn*Lt);return[Math.abs(Lt*Math.cos(In)*Cn+bn*Math.sin(In)*jt),Math.abs(bn*Math.sin(Ln)*Cn+Lt*Math.cos(Ln)*jt)]},_addBevelJoin:function(pe,Oe,Ve,Ue,Pt,Lt,bn,jt){var Cn=pe.getCurve(),xn=Cn.getPrevious(),In=Cn.getPoint1().transform(Pt),Ln=xn.getNormalAtTime(1).multiply(Ve).transform(Lt),An=Cn.getNormalAtTime(0).multiply(Ve).transform(Lt),zn=Ln.getDirectedAngle(An);if((zn<0||zn>=180)&&(Ln=Ln.negate(),An=An.negate()),jt&&bn(In),bn(In.add(Ln)),Oe==="miter"){var Jn=new Ne(In.add(Ln),new oe(-Ln.y,Ln.x),!0).intersect(new Ne(In.add(An),new oe(-An.y,An.x),!0),!0);Jn&&In.getDistance(Jn)<=Ue*Ve&&bn(Jn)}bn(In.add(An))},_addSquareCap:function(pe,Oe,Ve,Ue,Pt,Lt,bn){var jt=pe._point.transform(Ue),Cn=pe.getLocation(),xn=Cn.getNormal().multiply(Cn.getTime()===0?Ve:-Ve).transform(Pt);Oe==="square"&&(bn&&(Lt(jt.subtract(xn)),Lt(jt.add(xn))),jt=jt.add(xn.rotate(-90))),Lt(jt.add(xn)),Lt(jt.subtract(xn))},getHandleBounds:function(pe,Oe,Ve,Ue,Pt){var Lt=Ve.getStyle(),bn=Pt.stroke&&Lt.hasStroke(),jt,Cn;if(bn){var xn=Ve._getStrokeMatrix(Ue,Pt),In=Lt.getStrokeWidth()/2,Ln=In;Lt.getStrokeJoin()==="miter"&&(Ln=In*Lt.getMiterLimit()),Lt.getStrokeCap()==="square"&&(Ln=Math.max(Ln,In*Math.SQRT2)),jt=kn._getStrokePadding(In,xn),Cn=kn._getStrokePadding(Ln,xn)}for(var An=new Array(6),zn=1/0,Jn=-zn,Qn=zn,ta=Jn,Pn=0,Un=pe.length;Pn<Un;Pn++){var On=pe[Pn];On._transformCoordinates(Ue,An);for(var Rn=0;Rn<6;Rn+=2){var Yn=Rn?jt:Cn,na=Yn?Yn[0]:0,ea=Yn?Yn[1]:0,pa=An[Rn],ha=An[Rn+1],ba=pa-na,Oa=pa+na,va=ha-ea,Sa=ha+ea;ba<zn&&(zn=ba),Oa>Jn&&(Jn=Oa),va<Qn&&(Qn=va),Sa>ta&&(ta=Sa)}}return new he(zn,Qn,Jn-zn,ta-Qn)}}});kn.inject({statics:new function(){var pe=.5522847498307936,Oe=[new hn([-1,0],[0,pe],[0,-pe]),new hn([0,-1],[-pe,0],[pe,0]),new hn([1,0],[0,-pe],[0,pe]),new hn([0,1],[pe,0],[-pe,0])];function Ve(Pt,Lt,bn){var jt=k.getNamed(bn),Cn=new kn(jt&&(jt.insert==!0?xe.INSERT:jt.insert==!1?xe.NO_INSERT:null));return Cn._add(Pt),Cn._closed=Lt,Cn.set(jt,xe.INSERT)}function Ue(Pt,Lt,bn){for(var jt=new Array(4),Cn=0;Cn<4;Cn++){var xn=Oe[Cn];jt[Cn]=new hn(xn._point.multiply(Lt).add(Pt),xn._handleIn.multiply(Lt),xn._handleOut.multiply(Lt))}return Ve(jt,!0,bn)}return{Line:function(){var Pt=arguments;return Ve([new hn(oe.readNamed(Pt,"from")),new hn(oe.readNamed(Pt,"to"))],!1,Pt)},Circle:function(){var Pt=arguments,Lt=oe.readNamed(Pt,"center"),bn=k.readNamed(Pt,"radius");return Ue(Lt,new le(bn),Pt)},Rectangle:function(){var Pt=arguments,Lt=he.readNamed(Pt,"rectangle"),bn=le.readNamed(Pt,"radius",0,{readNull:!0}),jt=Lt.getBottomLeft(!0),Cn=Lt.getTopLeft(!0),xn=Lt.getTopRight(!0),In=Lt.getBottomRight(!0),Ln;if(!bn||bn.isZero())Ln=[new hn(jt),new hn(Cn),new hn(xn),new hn(In)];else{bn=le.min(bn,Lt.getSize(!0).divide(2));var An=bn.width,zn=bn.height,Jn=An*pe,Qn=zn*pe;Ln=[new hn(jt.add(An,0),null,[-Jn,0]),new hn(jt.subtract(0,zn),[0,Qn]),new hn(Cn.add(0,zn),null,[0,-Qn]),new hn(Cn.add(An,0),[-Jn,0],null),new hn(xn.subtract(An,0),null,[Jn,0]),new hn(xn.add(0,zn),[0,-Qn],null),new hn(In.subtract(0,zn),null,[0,Qn]),new hn(In.subtract(An,0),[Jn,0])]}return Ve(Ln,!0,Pt)},RoundRectangle:"#Rectangle",Ellipse:function(){var Pt=arguments,Lt=qe._readEllipse(Pt);return Ue(Lt.center,Lt.radius,Pt)},Oval:"#Ellipse",Arc:function(){var Pt=arguments,Lt=oe.readNamed(Pt,"from"),bn=oe.readNamed(Pt,"through"),jt=oe.readNamed(Pt,"to"),Cn=k.getNamed(Pt),xn=new kn(Cn&&Cn.insert==!1&&xe.NO_INSERT);return xn.moveTo(Lt),xn.arcTo(bn,jt),xn.set(Cn)},RegularPolygon:function(){for(var Pt=arguments,Lt=oe.readNamed(Pt,"center"),bn=k.readNamed(Pt,"sides"),jt=k.readNamed(Pt,"radius"),Cn=360/bn,xn=bn%3===0,In=new oe(0,xn?-jt:jt),Ln=xn?-1:.5,An=new Array(bn),zn=0;zn<bn;zn++)An[zn]=new hn(Lt.add(In.rotate((zn+Ln)*Cn)));return Ve(An,!0,Pt)},Star:function(){for(var Pt=arguments,Lt=oe.readNamed(Pt,"center"),bn=k.readNamed(Pt,"points")*2,jt=k.readNamed(Pt,"radius1"),Cn=k.readNamed(Pt,"radius2"),xn=360/bn,In=new oe(0,-1),Ln=new Array(bn),An=0;An<bn;An++)Ln[An]=new hn(Lt.add(In.rotate(xn*An).multiply(An%2?Cn:jt)));return Ve(Ln,!0,Pt)}}}});var jn=Nn.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(Oe){this._children=[],this._namedChildren={},this._initialize(Oe)||(typeof Oe=="string"?this.setPathData(Oe):this.addChildren(Array.isArray(Oe)?Oe:arguments))},insertChildren:function pe(Oe,Ve){var Ue=Ve,Pt=Ue[0];Pt&&typeof Pt[0]=="number"&&(Ue=[Ue]);for(var Lt=Ve.length-1;Lt>=0;Lt--){var bn=Ue[Lt];Ue===Ve&&!(bn instanceof kn)&&(Ue=k.slice(Ue)),Array.isArray(bn)?Ue[Lt]=new kn({segments:bn,insert:!1}):bn instanceof jn&&(Ue.splice.apply(Ue,[Lt,1].concat(bn.removeChildren())),bn.remove())}return pe.base.call(this,Oe,Ue)},reduce:function pe(Oe){for(var Ve=this._children,Ue=Ve.length-1;Ue>=0;Ue--){var Pt=Ve[Ue].reduce(Oe);Pt.isEmpty()&&Pt.remove()}if(!Ve.length){var Pt=new kn(xe.NO_INSERT);return Pt.copyAttributes(this),Pt.insertAbove(this),this.remove(),Pt}return pe.base.call(this)},isClosed:function(){for(var pe=this._children,Oe=0,Ve=pe.length;Oe<Ve;Oe++)if(!pe[Oe]._closed)return!1;return!0},setClosed:function(pe){for(var Oe=this._children,Ve=0,Ue=Oe.length;Ve<Ue;Ve++)Oe[Ve].setClosed(pe)},getFirstSegment:function(){var pe=this.getFirstChild();return pe&&pe.getFirstSegment()},getLastSegment:function(){var pe=this.getLastChild();return pe&&pe.getLastSegment()},getCurves:function(){for(var pe=this._children,Oe=[],Ve=0,Ue=pe.length;Ve<Ue;Ve++)k.push(Oe,pe[Ve].getCurves());return Oe},getFirstCurve:function(){var pe=this.getFirstChild();return pe&&pe.getFirstCurve()},getLastCurve:function(){var pe=this.getLastChild();return pe&&pe.getLastCurve()},getArea:function(){for(var pe=this._children,Oe=0,Ve=0,Ue=pe.length;Ve<Ue;Ve++)Oe+=pe[Ve].getArea();return Oe},getLength:function(){for(var pe=this._children,Oe=0,Ve=0,Ue=pe.length;Ve<Ue;Ve++)Oe+=pe[Ve].getLength();return Oe},getPathData:function(pe,Oe){for(var Ve=this._children,Ue=[],Pt=0,Lt=Ve.length;Pt<Lt;Pt++){var bn=Ve[Pt],jt=bn._matrix;Ue.push(bn.getPathData(pe&&!jt.isIdentity()?pe.appended(jt):pe,Oe))}return Ue.join("")},_hitTestChildren:function pe(Oe,Ve,Ue){return pe.base.call(this,Oe,Ve.class===kn||Ve.type==="path"?Ve:k.set({},Ve,{fill:!1}),Ue)},_draw:function(pe,Oe,Ve,Ue){var Pt=this._children;if(Pt.length){Oe=Oe.extend({dontStart:!0,dontFinish:!0}),pe.beginPath();for(var Lt=0,bn=Pt.length;Lt<bn;Lt++)Pt[Lt].draw(pe,Oe,Ue);if(!Oe.clip){this._setStyles(pe,Oe,Ve);var jt=this._style;jt.hasFill()&&(pe.fill(jt.getFillRule()),pe.shadowColor="rgba(0,0,0,0)"),jt.hasStroke()&&pe.stroke()}}},_drawSelected:function(pe,Oe,Ve){for(var Ue=this._children,Pt=0,Lt=Ue.length;Pt<Lt;Pt++){var bn=Ue[Pt],jt=bn._matrix;Ve[bn._id]||bn._drawSelected(pe,jt.isIdentity()?Oe:Oe.appended(jt))}}},new function(){function pe(Oe,Ve){var Ue=Oe._children;if(Ve&&!Ue.length)throw new Error("Use a moveTo() command first");return Ue[Ue.length-1]}return k.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(Oe){this[Oe]=function(){var Ve=pe(this,!0);Ve[Oe].apply(Ve,arguments)}},{moveTo:function(){var Oe=pe(this),Ve=Oe&&Oe.isEmpty()?Oe:new kn(xe.NO_INSERT);Ve!==Oe&&this.addChild(Ve),Ve.moveTo.apply(Ve,arguments)},moveBy:function(){var Oe=pe(this,!0),Ve=Oe&&Oe.getLastSegment(),Ue=oe.read(arguments);this.moveTo(Ve?Ue.add(Ve._point):Ue)},closePath:function(Oe){pe(this,!0).closePath(Oe)}})},k.each(["reverse","flatten","simplify","smooth"],function(pe){this[pe]=function(Oe){for(var Ve=this._children,Ue,Pt=0,Lt=Ve.length;Pt<Lt;Pt++)Ue=Ve[Pt][pe](Oe)||Ue;return Ue}},{}));Nn.inject(new function(){var pe=Math.min,Oe=Math.max,Ve=Math.abs,Ue={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function Pt(Pn){return Pn._children||[Pn]}function Lt(Pn,Un){var On=Pn.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(Un){for(var Rn=Pt(On),Yn=0,na=Rn.length;Yn<na;Yn++){var Pn=Rn[Yn];!Pn._closed&&!Pn.isEmpty()&&(Pn.closePath(1e-12),Pn.getFirstSegment().setHandleIn(0,0),Pn.getLastSegment().setHandleOut(0,0))}On=On.resolveCrossings().reorient(On.getFillRule()==="nonzero",!0)}return On}function bn(Pn,Un,On,Rn,Yn){var na=new jn(xe.NO_INSERT);return na.addChildren(Pn,!0),na=na.reduce({simplify:Un}),Yn&&Yn.insert==!1||na.insertAbove(Rn&&On.isSibling(Rn)&&On.getIndex()<Rn.getIndex()?Rn:On),na.copyAttributes(On,!0),na}function jt(Pn){return Pn.hasOverlap()||Pn.isCrossing()}function Cn(Pn,Un,On,Rn){if(Rn&&(Rn.trace==!1||Rn.stroke)&&/^(subtract|intersect)$/.test(On))return xn(Pn,Un,On);var Yn=Lt(Pn,!0),na=Un&&Pn!==Un&&Lt(Un,!0),ea=Ue[On];ea[On]=!0,na&&(ea.subtract||ea.exclude)^(na.isClockwise()^Yn.isClockwise())&&na.reverse();var pa=zn($n.expand(Yn.getIntersections(na,jt))),ha=Pt(Yn),ba=na&&Pt(na),Oa=[],va=[],Sa;function $a(er){for(var or=0,rr=er.length;or<rr;or++){var sr=er[or];k.push(Oa,sr._segments),k.push(va,sr.getCurves()),sr._overlapsOnly=!0}}function Da(er){for(var or=[],rr=0,sr=er&&er.length;rr<sr;rr++)or.push(va[er[rr]]);return or}if(pa.length){$a(ha),ba&&$a(ba);for(var Na=new Array(va.length),Va=0,Ua=va.length;Va<Ua;Va++)Na[Va]=va[Va].getValues();for(var Wa=z.findCurveBoundsCollisions(Na,Na,0,!0),Qa={},Va=0;Va<va.length;Va++){var Ja=va[Va],Ra=Ja._path._id,Fa=Qa[Ra]=Qa[Ra]||{};Fa[Ja.getIndex()]={hor:Da(Wa[Va].hor),ver:Da(Wa[Va].ver)}}for(var Va=0,Ua=pa.length;Va<Ua;Va++)Qn(pa[Va]._segment,Yn,na,Qa,ea);for(var Va=0,Ua=Oa.length;Va<Ua;Va++){var Xa=Oa[Va],tr=Xa._intersection;Xa._winding||Qn(Xa,Yn,na,Qa,ea),tr&&tr._overlap||(Xa._path._overlapsOnly=!1)}Sa=ta(Oa,ea)}else Sa=An(ba?ha.concat(ba):ha.slice(),function(er){return!!ea[er]});return bn(Sa,!0,Pn,Un,Rn)}function xn(Pn,Un,On){var Rn=Lt(Pn),Yn=Lt(Un),na=Rn.getIntersections(Yn,jt),ea=On==="subtract",pa=On==="divide",ha={},ba=[];function Oa($a){if(!ha[$a._id]&&(pa||Yn.contains($a.getPointAt($a.getLength()/2))^ea))return ba.unshift($a),ha[$a._id]=!0}for(var va=na.length-1;va>=0;va--){var Sa=na[va].split();Sa&&(Oa(Sa)&&Sa.getFirstSegment().setHandleIn(0,0),Rn.getLastSegment().setHandleOut(0,0))}return Oa(Rn),bn(ba,!1,Pn,Un)}function In(Pn,Un){for(var On=Pn;On;){if(On===Un)return;On=On._previous}for(;Pn._next&&Pn._next!==Un;)Pn=Pn._next;if(!Pn._next){for(;Un._previous;)Un=Un._previous;Pn._next=Un,Un._previous=Pn}}function Ln(Pn){for(var Un=Pn.length-1;Un>=0;Un--)Pn[Un].clearHandles()}function An(Pn,Un,On){var Rn=Pn&&Pn.length;if(Rn){var Yn=k.each(Pn,function(Wa,Qa){this[Wa._id]={container:null,winding:Wa.isClockwise()?1:-1,index:Qa}},{}),na=Pn.slice().sort(function(Wa,Qa){return Ve(Qa.getArea())-Ve(Wa.getArea())}),ea=na[0],pa=z.findItemBoundsCollisions(na,null,ae.GEOMETRIC_EPSILON);On==null&&(On=ea.isClockwise());for(var ha=0;ha<Rn;ha++){var ba=na[ha],Oa=Yn[ba._id],va=0,Sa=pa[ha];if(Sa){for(var $a=null,Da=Sa.length-1;Da>=0;Da--)if(Sa[Da]<ha){$a=$a||ba.getInteriorPoint();var Na=na[Sa[Da]];if(Na.contains($a)){var Va=Yn[Na._id];va=Va.winding,Oa.winding+=va,Oa.container=Va.exclude?Va.container:Na;break}}}if(Un(Oa.winding)===Un(va))Oa.exclude=!0,Pn[Oa.index]=null;else{var Ua=Oa.container;ba.setClockwise(Ua?!Ua.isClockwise():On)}}}return Pn}function zn(Pn,Un,On){var Rn=Un&&[],Yn=1e-8,na=1-Yn,ea=!1,pa=On||[],ha=On&&{},ba,Oa,va;function Sa(or){return or._path._id+"."+or._segment1._index}for(var $a=(On&&On.length)-1;$a>=0;$a--){var Da=On[$a];Da._path&&(ha[Sa(Da)]=!0)}for(var $a=Pn.length-1;$a>=0;$a--){var Na=Pn[$a],Va=Na._time,Ua=Va,Wa=Un&&!Un(Na),Da=Na._curve,Qa;if(Da&&(Da!==Oa?(ea=!Da.hasHandles()||ha&&ha[Sa(Da)],ba=[],va=null,Oa=Da):va>=Yn&&(Va/=va)),Wa){ba&&ba.push(Na);continue}else Un&&Rn.unshift(Na);if(va=Ua,Va<Yn)Qa=Da._segment1;else if(Va>na)Qa=Da._segment2;else{var Ja=Da.divideAtTime(Va,!0);ea&&pa.push(Da,Ja),Qa=Ja._segment1;for(var Ra=ba.length-1;Ra>=0;Ra--){var Fa=ba[Ra];Fa._time=(Fa._time-Va)/(1-Va)}}Na._setSegment(Qa);var Xa=Qa._intersection,tr=Na._intersection;if(Xa){In(Xa,tr);for(var er=Xa;er;)In(er._intersection,Xa),er=er._next}else Qa._intersection=tr}return On||Ln(pa),Rn||Pn}function Jn(Pn,Un,On,Rn,Yn){var na=Array.isArray(Un)?Un:Un[On?"hor":"ver"],ea=On?1:0,pa=ea^1,ha=[Pn.x,Pn.y],ba=ha[ea],Oa=ha[pa],va=1e-9,Sa=1e-6,$a=ba-va,Da=ba+va,Na=0,Va=0,Ua=0,Wa=0,Qa=!1,Ja=!1,Ra=1,Fa=[],Xa,tr;function er(_r){var Cr=_r[pa+0],Dr=_r[pa+6];if(!(Oa<pe(Cr,Dr)||Oa>Oe(Cr,Dr))){var Or=_r[ea+0],fa=_r[ea+2],ka=_r[ea+4],ya=_r[ea+6];if(Cr===Dr){(Or<Da&&ya>$a||ya<Da&&Or>$a)&&(Qa=!0);return}var Ta=Oa===Cr?0:Oa===Dr||$a>Oe(Or,fa,ka,ya)||Da<pe(Or,fa,ka,ya)?1:Mn.solveCubic(_r,pa,Oa,Fa,0,1)>0?Fa[0]:1,Ba=Ta===0?Or:Ta===1?ya:Mn.getPoint(_r,Ta)[On?"y":"x"],Ea=Cr>Dr?1:-1,La=Xa[pa]>Xa[pa+6]?1:-1,Ga=Xa[ea+6];return Oa!==Cr?(Ba<$a?Ua+=Ea:Ba>Da?Wa+=Ea:Qa=!0,Ba>ba-Sa&&Ba<ba+Sa&&(Ra/=2)):(Ea!==La?Or<$a?Ua+=Ea:Or>Da&&(Wa+=Ea):Or!=Ga&&(Ga<Da&&Ba>Da?(Wa+=Ea,Qa=!0):Ga>$a&&Ba<$a&&(Ua+=Ea,Qa=!0)),Ra/=4),Xa=_r,!Yn&&Ba>$a&&Ba<Da&&Mn.getTangent(_r,Ta)[On?"x":"y"]===0&&Jn(Pn,Un,!On,Rn,!0)}}function or(_r){var Cr=_r[pa+0],Dr=_r[pa+2],Or=_r[pa+4],fa=_r[pa+6];if(Oa<=Oe(Cr,Dr,Or,fa)&&Oa>=pe(Cr,Dr,Or,fa)){for(var ka=_r[ea+0],ya=_r[ea+2],Ta=_r[ea+4],Ba=_r[ea+6],Ea=$a>Oe(ka,ya,Ta,Ba)||Da<pe(ka,ya,Ta,Ba)?[_r]:Mn.getMonoCurves(_r,On),La,Ga=0,ja=Ea.length;Ga<ja;Ga++)if(La=er(Ea[Ga]))return La}}for(var rr=0,sr=na.length;rr<sr;rr++){var cr=na[rr],ir=cr._path,Ka=cr.getValues(),vr;if((!rr||na[rr-1]._path!==ir)&&(Xa=null,ir._closed||(tr=Mn.getValues(ir.getLastCurve().getSegment2(),cr.getSegment1(),null,!Rn),tr[pa]!==tr[pa+6]&&(Xa=tr)),!Xa)){Xa=Ka;for(var kr=ir.getLastCurve();kr&&kr!==cr;){var Sr=kr.getValues();if(Sr[pa]!==Sr[pa+6]){Xa=Sr;break}kr=kr.getPrevious()}}if(vr=or(Ka))return vr;if(rr+1===sr||na[rr+1]._path!==ir){if(tr&&(vr=or(tr)))return vr;Qa&&!Ua&&!Wa&&(Ua=Wa=ir.isClockwise(Rn)^On?1:-1),Na+=Ua,Va+=Wa,Ua=Wa=0,Qa&&(Ja=!0,Qa=!1),tr=null}}return Na=Ve(Na),Va=Ve(Va),{winding:Oe(Na,Va),windingL:Na,windingR:Va,quality:Ra,onPath:Ja}}function Qn(Pn,Un,On,Rn,Yn){var na=[],ea=Pn,pa=0,va;do{var ha=Pn.getCurve();if(ha){var ba=ha.getLength();na.push({segment:Pn,curve:ha,length:ba}),pa+=ba}Pn=Pn.getNext()}while(Pn&&!Pn._intersection&&Pn!==ea);for(var Oa=[.5,.25,.75],va={winding:0,quality:-1},Sa=.001,$a=1-Sa,Da=0;Da<Oa.length&&va.quality<.5;Da++)for(var ba=pa*Oa[Da],Na=0,Va=na.length;Na<Va;Na++){var Ua=na[Na],Wa=Ua.length;if(ba<=Wa){var ha=Ua.curve,Qa=ha._path,Ja=Qa._parent,Ra=Ja instanceof jn?Ja:Qa,Fa=ae.clamp(ha.getTimeAt(ba),Sa,$a),Xa=ha.getPointAtTime(Fa),tr=Ve(ha.getTangentAtTime(Fa).y)<Math.SQRT1_2,er=null;if(Yn.subtract&&On){var or=Ra===Un?On:Un,rr=or._getWinding(Xa,tr,!0);if(Ra===Un&&rr.winding||Ra===On&&!rr.winding){if(rr.quality<1)continue;er={winding:0,quality:1}}}er=er||Jn(Xa,Rn[Qa._id][ha.getIndex()],tr,!0),er.quality>va.quality&&(va=er);break}ba-=Wa}for(var Na=na.length-1;Na>=0;Na--)na[Na].segment._winding=va}function ta(Pn,Un){var On=[],Rn;function Yn(sr){var cr;return!!(sr&&!sr._visited&&(!Un||Un[(cr=sr._winding||{}).winding]&&!(Un.unite&&cr.winding===2&&cr.windingL&&cr.windingR)))}function na(sr){if(sr){for(var cr=0,ir=Rn.length;cr<ir;cr++)if(sr===Rn[cr])return!0}return!1}function ea(sr){for(var cr=sr._segments,ir=0,Ka=cr.length;ir<Ka;ir++)cr[ir]._visited=!0}function pa(sr,cr){var ir=sr._intersection,Ka=ir,vr=[];cr&&(Rn=[sr]);function kr(Sr,_r){for(;Sr&&Sr!==_r;){var Cr=Sr._segment,Dr=Cr&&Cr._path;if(Dr){var Or=Cr.getNext()||Dr.getFirstSegment(),fa=Or._intersection;Cr!==sr&&(na(Cr)||na(Or)||Or&&Yn(Cr)&&(Yn(Or)||fa&&Yn(fa._segment)))&&vr.push(Cr),cr&&Rn.push(Cr)}Sr=Sr._next}}if(ir){for(kr(ir);ir&&ir._previous;)ir=ir._previous;kr(ir,Ka)}return vr}Pn.sort(function(sr,cr){var ir=sr._intersection,Ka=cr._intersection,vr=!!(ir&&ir._overlap),kr=!!(Ka&&Ka._overlap),Sr=sr._path,_r=cr._path;return vr^kr?vr?1:-1:!ir^!Ka?ir?1:-1:Sr!==_r?Sr._id-_r._id:sr._index-cr._index});for(var ha=0,ba=Pn.length;ha<ba;ha++){var Oa=Pn[ha],va=Yn(Oa),Sa=null,$a=!1,Da=!0,Na=[],Va,Ua,Wa;if(va&&Oa._path._overlapsOnly){var Qa=Oa._path,Ja=Oa._intersection._segment._path;Qa.compare(Ja)&&(Qa.getArea()&&On.push(Qa.clone(!1)),ea(Qa),ea(Ja),va=!1)}for(;va;){var Ra=!Sa,Fa=pa(Oa,Ra),Xa=Fa.shift(),$a=!Ra&&(na(Oa)||na(Xa)),tr=!$a&&Xa;if(Ra&&(Sa=new kn(xe.NO_INSERT),Va=null),$a){(Oa.isFirst()||Oa.isLast())&&(Da=Oa._path._closed),Oa._visited=!0;break}if(tr&&Va&&(Na.push(Va),Va=null),Va||(tr&&Fa.push(Oa),Va={start:Sa._segments.length,crossings:Fa,visited:Ua=[],handleIn:Wa}),tr&&(Oa=Xa),!Yn(Oa)){Sa.removeSegments(Va.start);for(var er=0,or=Ua.length;er<or;er++)Ua[er]._visited=!1;Ua.length=0;do Oa=Va&&Va.crossings.shift(),(!Oa||!Oa._path)&&(Oa=null,Va=Na.pop(),Va&&(Ua=Va.visited,Wa=Va.handleIn));while(Va&&!Yn(Oa));if(!Oa)break}var rr=Oa.getNext();Sa.add(new hn(Oa._point,Wa,rr&&Oa._handleOut)),Oa._visited=!0,Ua.push(Oa),Oa=rr||Oa._path.getFirstSegment(),Wa=rr&&rr._handleIn}$a&&(Da&&(Sa.getFirstSegment().setHandleIn(Wa),Sa.setClosed(Da)),Sa.getArea()!==0&&On.push(Sa))}return On}return{_getWinding:function(Pn,Un,On){return Jn(Pn,this.getCurves(),Un,On)},unite:function(Pn,Un){return Cn(this,Pn,"unite",Un)},intersect:function(Pn,Un){return Cn(this,Pn,"intersect",Un)},subtract:function(Pn,Un){return Cn(this,Pn,"subtract",Un)},exclude:function(Pn,Un){return Cn(this,Pn,"exclude",Un)},divide:function(Pn,Un){return Un&&(Un.trace==!1||Un.stroke)?xn(this,Pn,"divide"):bn([this.subtract(Pn,Un),this.intersect(Pn,Un)],!0,this,Pn,Un)},resolveCrossings:function(){var Pn=this._children,Un=Pn||[this];function On(Va,Ua){var Wa=Va&&Va._intersection;return Wa&&Wa._overlap&&Wa._path===Ua}var Rn=!1,Yn=!1,na=this.getIntersections(null,function(Va){return Va.hasOverlap()&&(Rn=!0)||Va.isCrossing()&&(Yn=!0)}),ea=Rn&&Yn&&[];if(na=$n.expand(na),Rn)for(var pa=zn(na,function(Va){return Va.hasOverlap()},ea),ha=pa.length-1;ha>=0;ha--){var ba=pa[ha],Oa=ba._path,va=ba._segment,Sa=va.getPrevious(),$a=va.getNext();On(Sa,Oa)&&On($a,Oa)&&(va.remove(),Sa._handleOut._set(0,0),$a._handleIn._set(0,0),Sa!==va&&!Sa.getCurve().hasLength()&&($a._handleIn.set(Sa._handleIn),Sa.remove()))}Yn&&(zn(na,Rn&&function(Va){var Ua=Va.getCurve(),Wa=Va.getSegment(),Qa=Va._intersection,Ja=Qa._curve,Ra=Qa._segment;if(Ua&&Ja&&Ua._path&&Ja._path)return!0;Wa&&(Wa._intersection=null),Ra&&(Ra._intersection=null)},ea),ea&&Ln(ea),Un=ta(k.each(Un,function(Va){k.push(this,Va._segments)},[])));var Da=Un.length,Na;return Da>1&&Pn?(Un!==Pn&&this.setChildren(Un),Na=this):Da===1&&!Pn&&(Un[0]!==this&&this.setSegments(Un[0].removeSegments()),Na=this),Na||(Na=new jn(xe.NO_INSERT),Na.addChildren(Un),Na=Na.reduce(),Na.copyAttributes(this),this.replaceWith(Na)),Na},reorient:function(Pn,Un){var On=this._children;return On&&On.length?this.setChildren(An(this.removeChildren(),function(Rn){return!!(Pn?Rn:Rn&1)},Un)):Un!==r&&this.setClockwise(Un),this},getInteriorPoint:function(){var Pn=this.getBounds(),Un=Pn.getCenter(!0);if(!this.contains(Un)){for(var On=this.getCurves(),Rn=Un.y,Yn=[],na=[],ea=0,pa=On.length;ea<pa;ea++){var ha=On[ea].getValues(),ba=ha[1],Oa=ha[3],va=ha[5],Sa=ha[7];if(Rn>=pe(ba,Oa,va,Sa)&&Rn<=Oe(ba,Oa,va,Sa))for(var $a=Mn.getMonoCurves(ha),Da=0,Na=$a.length;Da<Na;Da++){var Va=$a[Da],Ua=Va[1],Wa=Va[7];if(Ua!==Wa&&(Rn>=Ua&&Rn<=Wa||Rn>=Wa&&Rn<=Ua)){var Qa=Rn===Ua?Va[0]:Rn===Wa?Va[6]:Mn.solveCubic(Va,1,Rn,na,0,1)===1?Mn.getPoint(Va,na[0]).x:(Va[0]+Va[6])/2;Yn.push(Qa)}}}Yn.length>1&&(Yn.sort(function(Ja,Ra){return Ja-Ra}),Un.x=(Yn[0]+Yn[1])/2)}return Un}}});var Fn=k.extend({_class:"PathFlattener",initialize:function(pe,Oe,Ve,Ue,Pt){var Lt=[],bn=[],jt=0,Cn=1/(Ve||32),xn=pe._segments,In=xn[0],Ln;function An(ta,Pn){var Un=Mn.getValues(ta,Pn,Pt);Lt.push(Un),zn(Un,ta._index,0,1)}function zn(ta,Pn,Un,On){if(On-Un>Cn&&!(Ue&&Mn.isStraight(ta))&&!Mn.isFlatEnough(ta,Oe||.25)){var Rn=Mn.subdivide(ta,.5),Yn=(Un+On)/2;zn(Rn[0],Pn,Un,Yn),zn(Rn[1],Pn,Yn,On)}else{var na=ta[6]-ta[0],ea=ta[7]-ta[1],pa=Math.sqrt(na*na+ea*ea);pa>0&&(jt+=pa,bn.push({offset:jt,curve:ta,index:Pn,time:On}))}}for(var Jn=1,Qn=xn.length;Jn<Qn;Jn++)Ln=xn[Jn],An(In,Ln),In=Ln;pe._closed&&An(Ln||In,xn[0]),this.curves=Lt,this.parts=bn,this.length=jt,this.index=0},_get:function(pe){for(var Oe=this.parts,Ve=Oe.length,Ue,Pt=this.index;Ue=Pt,!(!Pt||Oe[--Pt].offset<pe););for(;Ue<Ve;Ue++){var Lt=Oe[Ue];if(Lt.offset>=pe){this.index=Ue;var bn=Oe[Ue-1],jt=bn&&bn.index===Lt.index?bn.time:0,Cn=bn?bn.offset:0;return{index:Lt.index,time:jt+(Lt.time-jt)*(pe-Cn)/(Lt.offset-Cn)}}}return{index:Oe[Ve-1].index,time:1}},drawPart:function(pe,Oe,Ve){for(var Ue=this._get(Oe),Pt=this._get(Ve),Lt=Ue.index,bn=Pt.index;Lt<=bn;Lt++){var jt=Mn.getPart(this.curves[Lt],Lt===Ue.index?Ue.time:0,Lt===Pt.index?Pt.time:1);Lt===Ue.index&&pe.moveTo(jt[0],jt[1]),pe.bezierCurveTo.apply(pe,jt.slice(2))}}},k.each(Mn._evaluateMethods,function(pe){this[pe+"At"]=function(Oe){var Ve=this._get(Oe);return Mn[pe](this.curves[Ve.index],Ve.time)}},{})),Tn=k.extend({initialize:function(pe){for(var Oe=this.points=[],Ve=pe._segments,Ue=pe._closed,Pt=0,Lt,bn=Ve.length;Pt<bn;Pt++){var jt=Ve[Pt].point;(!Lt||!Lt.equals(jt))&&Oe.push(Lt=jt.clone())}Ue&&(Oe.unshift(Oe[Oe.length-1]),Oe.push(Oe[1])),this.closed=Ue},fit:function(pe){var Oe=this.points,Ve=Oe.length,Ue=null;return Ve>0&&(Ue=[new hn(Oe[0])],Ve>1&&(this.fitCubic(Ue,pe,0,Ve-1,Oe[1].subtract(Oe[0]),Oe[Ve-2].subtract(Oe[Ve-1])),this.closed&&(Ue.shift(),Ue.pop()))),Ue},fitCubic:function(pe,Oe,Ve,Ue,Pt,Lt){var bn=this.points;if(Ue-Ve===1){var jt=bn[Ve],Cn=bn[Ue],xn=jt.getDistance(Cn)/3;this.addCurve(pe,[jt,jt.add(Pt.normalize(xn)),Cn.add(Lt.normalize(xn)),Cn]);return}for(var In=this.chordLengthParameterize(Ve,Ue),Ln=Math.max(Oe,Oe*Oe),An,zn=!0,Jn=0;Jn<=4;Jn++){var Qn=this.generateBezier(Ve,Ue,In,Pt,Lt),ta=this.findMaxError(Ve,Ue,Qn,In);if(ta.error<Oe&&zn){this.addCurve(pe,Qn);return}if(An=ta.index,ta.error>=Ln)break;zn=this.reparameterize(Ve,Ue,In,Qn),Ln=ta.error}var Pn=bn[An-1].subtract(bn[An+1]);this.fitCubic(pe,Oe,Ve,An,Pt,Pn),this.fitCubic(pe,Oe,An,Ue,Pn.negate(),Lt)},addCurve:function(pe,Oe){var Ve=pe[pe.length-1];Ve.setHandleOut(Oe[1].subtract(Oe[0])),pe.push(new hn(Oe[3],Oe[2].subtract(Oe[3])))},generateBezier:function(pe,Oe,Ve,Ue,Pt){for(var Lt=1e-12,bn=Math.abs,jt=this.points,Cn=jt[pe],xn=jt[Oe],In=[[0,0],[0,0]],Ln=[0,0],An=0,zn=Oe-pe+1;An<zn;An++){var Jn=Ve[An],Qn=1-Jn,ta=3*Jn*Qn,Pn=Qn*Qn*Qn,Un=ta*Qn,On=ta*Jn,Rn=Jn*Jn*Jn,Yn=Ue.normalize(Un),na=Pt.normalize(On),ea=jt[pe+An].subtract(Cn.multiply(Pn+Un)).subtract(xn.multiply(On+Rn));In[0][0]+=Yn.dot(Yn),In[0][1]+=Yn.dot(na),In[1][0]=In[0][1],In[1][1]+=na.dot(na),Ln[0]+=Yn.dot(ea),Ln[1]+=na.dot(ea)}var pa=In[0][0]*In[1][1]-In[1][0]*In[0][1],ha,ba;if(bn(pa)>Lt){var Oa=In[0][0]*Ln[1]-In[1][0]*Ln[0],va=Ln[0]*In[1][1]-Ln[1]*In[0][1];ha=va/pa,ba=Oa/pa}else{var Sa=In[0][0]+In[0][1],$a=In[1][0]+In[1][1];ha=ba=bn(Sa)>Lt?Ln[0]/Sa:bn($a)>Lt?Ln[1]/$a:0}var Da=xn.getDistance(Cn),Na=Lt*Da,Va,Ua;if(ha<Na||ba<Na)ha=ba=Da/3;else{var Wa=xn.subtract(Cn);Va=Ue.normalize(ha),Ua=Pt.normalize(ba),Va.dot(Wa)-Ua.dot(Wa)>Da*Da&&(ha=ba=Da/3,Va=Ua=null)}return[Cn,Cn.add(Va||Ue.normalize(ha)),xn.add(Ua||Pt.normalize(ba)),xn]},reparameterize:function(pe,Oe,Ve,Ue){for(var Pt=pe;Pt<=Oe;Pt++)Ve[Pt-pe]=this.findRoot(Ue,this.points[Pt],Ve[Pt-pe]);for(var Pt=1,Lt=Ve.length;Pt<Lt;Pt++)if(Ve[Pt]<=Ve[Pt-1])return!1;return!0},findRoot:function(pe,Oe,Ve){for(var Ue=[],Pt=[],Lt=0;Lt<=2;Lt++)Ue[Lt]=pe[Lt+1].subtract(pe[Lt]).multiply(3);for(var Lt=0;Lt<=1;Lt++)Pt[Lt]=Ue[Lt+1].subtract(Ue[Lt]).multiply(2);var bn=this.evaluate(3,pe,Ve),jt=this.evaluate(2,Ue,Ve),Cn=this.evaluate(1,Pt,Ve),xn=bn.subtract(Oe),In=jt.dot(jt)+xn.dot(Cn);return ae.isMachineZero(In)?Ve:Ve-xn.dot(jt)/In},evaluate:function(pe,Oe,Ve){for(var Ue=Oe.slice(),Pt=1;Pt<=pe;Pt++)for(var Lt=0;Lt<=pe-Pt;Lt++)Ue[Lt]=Ue[Lt].multiply(1-Ve).add(Ue[Lt+1].multiply(Ve));return Ue[0]},chordLengthParameterize:function(pe,Oe){for(var Ve=[0],Ue=pe+1;Ue<=Oe;Ue++)Ve[Ue-pe]=Ve[Ue-pe-1]+this.points[Ue].getDistance(this.points[Ue-1]);for(var Ue=1,Pt=Oe-pe;Ue<=Pt;Ue++)Ve[Ue]/=Ve[Pt];return Ve},findMaxError:function(pe,Oe,Ve,Ue){for(var Pt=Math.floor((Oe-pe+1)/2),Lt=0,bn=pe+1;bn<Oe;bn++){var jt=this.evaluate(3,Ve,Ue[bn-pe]),Cn=jt.subtract(this.points[bn]),xn=Cn.x*Cn.x+Cn.y*Cn.y;xn>=Lt&&(Lt=xn,Pt=bn)}return{error:Lt,index:Pt}}}),Hn=xe.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(Oe){this._content="",this._lines=[];var Ve=Oe&&k.isPlainObject(Oe)&&Oe.x===r&&Oe.y===r;this._initialize(Ve&&Oe,!Ve&&oe.read(arguments))},_equals:function(pe){return this._content===pe._content},copyContent:function(pe){this.setContent(pe._content)},getContent:function(){return this._content},setContent:function(pe){this._content=""+pe,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),la=Hn.extend({_class:"PointText",initialize:function(){Hn.apply(this,arguments)},getPoint:function(){var pe=this._matrix.getTranslation();return new ue(pe.x,pe.y,this,"setPoint")},setPoint:function(){var pe=oe.read(arguments);this.translate(pe.subtract(this._matrix.getTranslation()))},_draw:function(pe,Oe,Ve){if(this._content){this._setStyles(pe,Oe,Ve);var Ue=this._lines,Pt=this._style,Lt=Pt.hasFill(),bn=Pt.hasStroke(),jt=Pt.getLeading(),Cn=pe.shadowColor;pe.font=Pt.getFontStyle(),pe.textAlign=Pt.getJustification();for(var xn=0,In=Ue.length;xn<In;xn++){pe.shadowColor=Cn;var Ln=Ue[xn];Lt&&(pe.fillText(Ln,0,0),pe.shadowColor="rgba(0,0,0,0)"),bn&&pe.strokeText(Ln,0,0),pe.translate(0,jt)}}},_getBounds:function(pe,Oe){var Ve=this._style,Ue=this._lines,Pt=Ue.length,Lt=Ve.getJustification(),bn=Ve.getLeading(),jt=this.getView().getTextWidth(Ve.getFontStyle(),Ue),Cn=0;Lt!=="left"&&(Cn-=jt/(Lt==="center"?2:1));var xn=new he(Cn,Pt?-.75*bn:0,jt,Pt*bn);return pe?pe._transformBounds(xn,xn):xn}}),ca=k.extend(new function(){var pe={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},Oe={},Ve={transparent:[0,0,0,0]},Ue;function Pt(jt){var Cn=jt.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||jt.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),xn="rgb",In;if(Cn){var Ln=Cn[4]?4:3;In=new Array(Ln);for(var An=0;An<Ln;An++){var zn=Cn[An+1];In[An]=parseInt(zn.length==1?zn+zn:zn,16)/255}}else if(Cn=jt.match(/^(rgb|hsl)a?\((.*)\)$/)){xn=Cn[1],In=Cn[2].trim().split(/[,\s]+/g);for(var Jn=xn==="hsl",An=0,Qn=Math.min(In.length,4);An<Qn;An++){var ta=In[An],zn=parseFloat(ta);if(Jn)if(An===0){var Pn=ta.match(/([a-z]*)$/)[1];zn*={turn:360,rad:180/Math.PI,grad:.9}[Pn]||1}else An<3&&(zn/=100);else An<3&&(zn/=/%$/.test(ta)?100:255);In[An]=zn}}else{var Un=Ve[jt];if(!Un)if(g){Ue||(Ue=aa.getContext(1,1,{willReadFrequently:!0}),Ue.globalCompositeOperation="copy"),Ue.fillStyle="rgba(0,0,0,0)",Ue.fillStyle=jt,Ue.fillRect(0,0,1,1);var On=Ue.getImageData(0,0,1,1).data;Un=Ve[jt]=[On[0]/255,On[1]/255,On[2]/255]}else Un=[0,0,0];In=Un.slice()}return[xn,In]}var Lt=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],bn={"rgb-hsb":function(jt,Cn,xn){var In=Math.max(jt,Cn,xn),Ln=Math.min(jt,Cn,xn),An=In-Ln,zn=An===0?0:(In==jt?(Cn-xn)/An+(Cn<xn?6:0):In==Cn?(xn-jt)/An+2:(jt-Cn)/An+4)*60;return[zn,In===0?0:An/In,In]},"hsb-rgb":function(jt,Cn,xn){jt=(jt/60%6+6)%6;var Ln=Math.floor(jt),In=jt-Ln,Ln=Lt[Ln],An=[xn,xn*(1-Cn),xn*(1-Cn*In),xn*(1-Cn*(1-In))];return[An[Ln[0]],An[Ln[1]],An[Ln[2]]]},"rgb-hsl":function(jt,Cn,xn){var In=Math.max(jt,Cn,xn),Ln=Math.min(jt,Cn,xn),An=In-Ln,zn=An===0,Jn=zn?0:(In==jt?(Cn-xn)/An+(Cn<xn?6:0):In==Cn?(xn-jt)/An+2:(jt-Cn)/An+4)*60,Qn=(In+Ln)/2,ta=zn?0:Qn<.5?An/(In+Ln):An/(2-In-Ln);return[Jn,ta,Qn]},"hsl-rgb":function(jt,Cn,xn){if(jt=(jt/360%1+1)%1,Cn===0)return[xn,xn,xn];for(var In=[jt+1/3,jt,jt-1/3],Ln=xn<.5?xn*(1+Cn):xn+Cn-xn*Cn,An=2*xn-Ln,zn=[],Jn=0;Jn<3;Jn++){var Qn=In[Jn];Qn<0&&(Qn+=1),Qn>1&&(Qn-=1),zn[Jn]=6*Qn<1?An+(Ln-An)*6*Qn:2*Qn<1?Ln:3*Qn<2?An+(Ln-An)*(2/3-Qn)*6:An}return zn},"rgb-gray":function(jt,Cn,xn){return[jt*.2989+Cn*.587+xn*.114]},"gray-rgb":function(jt){return[jt,jt,jt]},"gray-hsb":function(jt){return[0,0,jt]},"gray-hsl":function(jt){return[0,0,jt]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return k.each(pe,function(jt,Cn){Oe[Cn]=[],k.each(jt,function(xn,In){var Ln=k.capitalize(xn),An=/^(hue|saturation)$/.test(xn),zn=Oe[Cn][In]=Cn==="gradient"?xn==="gradient"?function(Jn){var Qn=this._components[0];return Jn=Zn.read(Array.isArray(Jn)?Jn:arguments,0,{readNull:!0}),Qn!==Jn&&(Qn&&Qn._removeOwner(this),Jn&&Jn._addOwner(this)),Jn}:function(){return oe.read(arguments,0,{readNull:xn==="highlight",clone:!0})}:function(Jn){return Jn==null||isNaN(Jn)?0:+Jn};this["get"+Ln]=function(){return this._type===Cn||An&&/^hs[bl]$/.test(this._type)?this._components[In]:this._convert(Cn)[In]},this["set"+Ln]=function(Jn){this._type!==Cn&&!(An&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(Cn),this._properties=pe[Cn],this._type=Cn),this._components[In]=zn.call(this,Jn),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function jt(Cn){var xn=arguments,In=this.__read,Ln=0,An,zn,Jn,Qn;Array.isArray(Cn)&&(xn=Cn,Cn=xn[0]);var ta=Cn!=null&&typeof Cn;if(ta==="string"&&Cn in pe&&(An=Cn,Cn=xn[1],Array.isArray(Cn)?(zn=Cn,Jn=xn[2]):(In&&(Ln=1),xn=k.slice(xn,1),ta=typeof Cn)),!zn){if(Qn=ta==="number"?xn:ta==="object"&&Cn.length!=null?Cn:null,Qn){An||(An=Qn.length>=3?"rgb":"gray");var Pn=pe[An].length;Jn=Qn[Pn],In&&(Ln+=Qn===arguments?Pn+(Jn!=null?1:0):1),Qn.length>Pn&&(Qn=k.slice(Qn,0,Pn))}else if(ta==="string"){var Un=Pt(Cn);An=Un[0],zn=Un[1],zn.length===4&&(Jn=zn[3],zn.length--)}else if(ta==="object")if(Cn.constructor===jt){if(An=Cn._type,zn=Cn._components.slice(),Jn=Cn._alpha,An==="gradient")for(var On=1,Rn=zn.length;On<Rn;On++){var Yn=zn[On];Yn&&(zn[On]=Yn.clone())}}else if(Cn.constructor===Zn)An="gradient",Qn=xn;else{An="hue"in Cn?"lightness"in Cn?"hsl":"hsb":"gradient"in Cn||"stops"in Cn||"radial"in Cn?"gradient":"gray"in Cn?"gray":"rgb";var na=pe[An],ea=Oe[An];this._components=zn=[];for(var On=0,Rn=na.length;On<Rn;On++){var pa=Cn[na[On]];pa==null&&!On&&An==="gradient"&&"stops"in Cn&&(pa={stops:Cn.stops,radial:Cn.radial}),pa=ea[On].call(this,pa),pa!=null&&(zn[On]=pa)}Jn=Cn.alpha}In&&An&&(Ln=1)}if(this._type=An||"rgb",!zn){this._components=zn=[];for(var ea=Oe[this._type],On=0,Rn=ea.length;On<Rn;On++){var pa=ea[On].call(this,Qn&&Qn[On]);pa!=null&&(zn[On]=pa)}}return this._components=zn,this._properties=pe[this._type],this._alpha=Jn,In&&(this.__read=Ln),this},set:"#initialize",_serialize:function(jt,Cn){var xn=this.getComponents();return k.serialize(/^(gray|rgb)$/.test(this._type)?xn:[this._type].concat(xn),jt,!0,Cn)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(jt){var Cn;return this._type===jt?this._components.slice():(Cn=bn[this._type+"-"+jt])?Cn.apply(this,this._components):bn["rgb-"+jt].apply(this,bn[this._type+"-rgb"].apply(this,this._components))},convert:function(jt){return new ca(jt,this._convert(jt),this._alpha)},getType:function(){return this._type},setType:function(jt){this._components=this._convert(jt),this._properties=pe[jt],this._type=jt},getComponents:function(){var jt=this._components.slice();return this._alpha!=null&&jt.push(this._alpha),jt},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(jt){this._alpha=jt==null?null:Math.min(Math.max(jt,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(jt){var Cn=k.isPlainValue(jt,!0)?ca.read(arguments):jt;return Cn===this||Cn&&this._class===Cn._class&&this._type===Cn._type&&this.getAlpha()===Cn.getAlpha()&&k.equals(this._components,Cn._components)||!1},toString:function(){for(var jt=this._properties,Cn=[],xn=this._type==="gradient",In=j.instance,Ln=0,An=jt.length;Ln<An;Ln++){var zn=this._components[Ln];zn!=null&&Cn.push(jt[Ln]+": "+(xn?zn:In.number(zn)))}return this._alpha!=null&&Cn.push("alpha: "+In.number(this._alpha)),"{ "+Cn.join(", ")+" }"},toCSS:function(jt){var Cn=this._convert("rgb"),xn=jt||this._alpha==null?1:this._alpha;function In(Ln){return Math.round((Ln<0?0:Ln>1?1:Ln)*255)}return Cn=[In(Cn[0]),In(Cn[1]),In(Cn[2])],xn<1&&Cn.push(xn<0?0:xn),jt?"#"+((1<<24)+(Cn[0]<<16)+(Cn[1]<<8)+Cn[2]).toString(16).slice(1):(Cn.length==4?"rgba(":"rgb(")+Cn.join(",")+")"},toCanvasStyle:function(jt,Cn){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var xn=this._components,In=xn[0],Ln=In._stops,An=xn[1],zn=xn[2],Jn=xn[3],Qn=Cn&&Cn.inverted(),ta;if(Qn&&(An=Qn._transformPoint(An),zn=Qn._transformPoint(zn),Jn&&(Jn=Qn._transformPoint(Jn))),In._radial){var Pn=zn.getDistance(An);if(Jn){var Un=Jn.subtract(An);Un.getLength()>Pn&&(Jn=An.add(Un.normalize(Pn-.1)))}var On=Jn||An;ta=jt.createRadialGradient(On.x,On.y,0,An.x,An.y,Pn)}else ta=jt.createLinearGradient(An.x,An.y,zn.x,zn.y);for(var Rn=0,Yn=Ln.length;Rn<Yn;Rn++){var na=Ln[Rn],ea=na._offset;ta.addColorStop(ea??Rn/(Yn-1),na._color.toCanvasStyle())}return this._canvasStyle=ta},transform:function(jt){if(this._type==="gradient"){for(var Cn=this._components,xn=1,In=Cn.length;xn<In;xn++){var Ln=Cn[xn];jt._transformPoint(Ln,Ln,!0)}this._changed()}},statics:{_types:pe,random:function(){var jt=Math.random;return new ca(jt(),jt(),jt())},_setOwner:function(jt,Cn,xn){return jt&&(jt._owner&&Cn&&jt._owner!==Cn&&(jt=jt.clone()),!jt._owner^!Cn&&(jt._owner=Cn||null,jt._setter=xn||null)),jt}}})},new function(){var pe={add:function(Oe,Ve){return Oe+Ve},subtract:function(Oe,Ve){return Oe-Ve},multiply:function(Oe,Ve){return Oe*Ve},divide:function(Oe,Ve){return Oe/Ve}};return k.each(pe,function(Oe,Ve){this[Ve]=function(Ue){Ue=ca.read(arguments);for(var Pt=this._type,Lt=this._components,bn=Ue._convert(Pt),jt=0,Cn=Lt.length;jt<Cn;jt++)bn[jt]=Oe(Lt[jt],bn[jt]);return new ca(Pt,bn,this._alpha!=null?Oe(this._alpha,Ue.getAlpha()):null)}},{})}),Zn=k.extend({_class:"Gradient",initialize:function(Oe,Ve){this._id=re.get(),Oe&&k.isPlainObject(Oe)&&(this.set(Oe),Oe=Ve=null),this._stops==null&&this.setStops(Oe||["white","black"]),this._radial==null&&this.setRadial(typeof Ve=="string"&&Ve==="radial"||Ve||!1)},_serialize:function(pe,Oe){return Oe.add(this,function(){return k.serialize([this._stops,this._radial],pe,!0,Oe)})},_changed:function(){for(var pe=0,Oe=this._owners&&this._owners.length;pe<Oe;pe++)this._owners[pe]._changed()},_addOwner:function(pe){this._owners||(this._owners=[]),this._owners.push(pe)},_removeOwner:function(pe){var Oe=this._owners?this._owners.indexOf(pe):-1;Oe!=-1&&(this._owners.splice(Oe,1),this._owners.length||(this._owners=r))},clone:function(){for(var pe=[],Oe=0,Ve=this._stops.length;Oe<Ve;Oe++)pe[Oe]=this._stops[Oe].clone();return new Zn(pe,this._radial)},getStops:function(){return this._stops},setStops:function(pe){if(pe.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var Oe=this._stops;if(Oe)for(var Ve=0,Ue=Oe.length;Ve<Ue;Ve++)Oe[Ve]._owner=r;Oe=this._stops=Bn.readList(pe,0,{clone:!0});for(var Ve=0,Ue=Oe.length;Ve<Ue;Ve++)Oe[Ve]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(pe){this._radial=pe,this._changed()},equals:function(pe){if(pe===this)return!0;if(pe&&this._class===pe._class){var Oe=this._stops,Ve=pe._stops,Ue=Oe.length;if(Ue===Ve.length){for(var Pt=0;Pt<Ue;Pt++)if(!Oe[Pt].equals(Ve[Pt]))return!1;return!0}}return!1}}),Bn=k.extend({_class:"GradientStop",initialize:function(Oe,Ve){var Ue=Oe,Pt=Ve;typeof Oe=="object"&&Ve===r&&(Array.isArray(Oe)&&typeof Oe[0]!="number"?(Ue=Oe[0],Pt=Oe[1]):("color"in Oe||"offset"in Oe||"rampPoint"in Oe)&&(Ue=Oe.color,Pt=Oe.offset||Oe.rampPoint||0)),this.setColor(Ue),this.setOffset(Pt)},clone:function(){return new Bn(this._color.clone(),this._offset)},_serialize:function(pe,Oe){var Ve=this._color,Ue=this._offset;return k.serialize(Ue==null?[Ve]:[Ve,Ue],pe,!0,Oe)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(pe){this._offset=pe,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){ca._setOwner(this._color,null),this._color=ca._setOwner(ca.read(arguments,0),this,"setColor"),this._changed()},equals:function(pe){return pe===this||pe&&this._class===pe._class&&this._color.equals(pe._color)&&this._offset==pe._offset||!1}}),Wn=k.extend(new function(){var pe={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new oe,selectedColor:null},Oe=k.set({},pe,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),Ve=k.set({},Oe,{fillColor:new ca}),Ue={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},Pt={beans:!0},Lt={_class:"Style",beans:!0,initialize:function(jt,Cn,xn){this._values={},this._owner=Cn,this._project=Cn&&Cn._project||xn||ua.project,this._defaults=!Cn||Cn instanceof Ie?Oe:Cn instanceof Hn?Ve:pe,jt&&this.set(jt)}};return k.each(Oe,function(bn,jt){var Cn=/Color$/.test(jt),xn=jt==="shadowOffset",In=k.capitalize(jt),Ln=Ue[jt],An="set"+In,zn="get"+In;Lt[An]=function(Jn){var Qn=this._owner,ta=Qn&&Qn._children,Pn=ta&&ta.length>0&&!(Qn instanceof jn);if(Pn)for(var Un=0,On=ta.length;Un<On;Un++)ta[Un]._style[An](Jn);if((jt==="selectedColor"||!Pn)&&jt in this._defaults){var Rn=this._values[jt];Rn!==Jn&&(Cn&&(Rn&&(ca._setOwner(Rn,null),Rn._canvasStyle=null),Jn&&Jn.constructor===ca&&(Jn=ca._setOwner(Jn,Qn,Pn&&An))),this._values[jt]=Jn,Qn&&Qn._changed(Ln||129))}},Lt[zn]=function(Jn){var Qn=this._owner,ta=Qn&&Qn._children,Pn=ta&&ta.length>0&&!(Qn instanceof jn),Un;if(Pn&&!Jn)for(var On=0,Rn=ta.length;On<Rn;On++){var Yn=ta[On]._style[zn]();if(!On)Un=Yn;else if(!k.equals(Un,Yn))return r}else if(jt in this._defaults){var Un=this._values[jt];if(Un===r)Un=this._defaults[jt],Un&&Un.clone&&(Un=Un.clone());else{var na=Cn?ca:xn?oe:null;na&&!(Un&&Un.constructor===na)&&(this._values[jt]=Un=na.read([Un],0,{readNull:!0,clone:!0}))}}return Un&&Cn&&(Un=ca._setOwner(Un,Qn,Pn&&An)),Un},Pt[zn]=function(Jn){return this._style[zn](Jn)},Pt[An]=function(Jn){this._style[An](Jn)}}),k.each({Font:"FontFamily",WindingRule:"FillRule"},function(bn,jt){var Cn="get"+jt,xn="set"+jt;Lt[Cn]=Pt[Cn]="#get"+bn,Lt[xn]=Pt[xn]="#set"+bn}),xe.inject(Pt),Lt},{set:function(pe){var Oe=pe instanceof Wn,Ve=Oe?pe._values:pe;if(Ve){for(var Ue in Ve)if(Ue in this._defaults){var Pt=Ve[Ue];this[Ue]=Pt&&Oe&&Pt.clone?Pt.clone():Pt}}},equals:function(pe){function Oe(Ve,Ue,Pt){var Lt=Ve._values,bn=Ue._values,jt=Ue._defaults;for(var Cn in Lt){var xn=Lt[Cn],In=bn[Cn];if(!(Pt&&Cn in bn)&&!k.equals(xn,In===r?jt[Cn]:In))return!1}return!0}return pe===this||pe&&this._class===pe._class&&Oe(this,pe)&&Oe(pe,this,!0)||!1},_dispose:function(){var pe;pe=this.getFillColor(),pe&&(pe._canvasStyle=null),pe=this.getStrokeColor(),pe&&(pe._canvasStyle=null),pe=this.getShadowColor(),pe&&(pe._canvasStyle=null)},hasFill:function(){var pe=this.getFillColor();return!!pe&&pe.alpha>0},hasStroke:function(){var pe=this.getStrokeColor();return!!pe&&pe.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var pe=this.getShadowColor();return!!pe&&pe.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var pe=this.getFontSize();return this.getFontWeight()+" "+pe+(/[a-z]/i.test(pe+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function pe(){var Oe=pe.base.call(this),Ve=this.getFontSize();return/pt|em|%|px/.test(Ve)&&(Ve=this.getView().getPixelSize(Ve)),Oe??Ve*1.2}}),da=new function(){function pe(Oe,Ve,Ue,Pt){for(var Lt=["","webkit","moz","Moz","ms","o"],bn=Ve[0].toUpperCase()+Ve.substring(1),jt=0;jt<6;jt++){var Cn=Lt[jt],xn=Cn?Cn+bn:Ve;if(xn in Oe){if(Ue)Oe[xn]=Pt;else return Oe[xn];break}}}return{getStyles:function(Oe){var Ve=Oe&&Oe.nodeType!==9?Oe.ownerDocument:Oe,Ue=Ve&&Ve.defaultView;return Ue&&Ue.getComputedStyle(Oe,"")},getBounds:function(Oe,Ve){var Ue=Oe.ownerDocument,Pt=Ue.body,Lt=Ue.documentElement,bn;try{bn=Oe.getBoundingClientRect()}catch{bn={left:0,top:0,width:0,height:0}}var jt=bn.left-(Lt.clientLeft||Pt.clientLeft||0),Cn=bn.top-(Lt.clientTop||Pt.clientTop||0);if(!Ve){var xn=Ue.defaultView;jt+=xn.pageXOffset||Lt.scrollLeft||Pt.scrollLeft,Cn+=xn.pageYOffset||Lt.scrollTop||Pt.scrollTop}return new he(jt,Cn,bn.width,bn.height)},getViewportBounds:function(Oe){var Ve=Oe.ownerDocument,Ue=Ve.defaultView,Pt=Ve.documentElement;return new he(0,0,Ue.innerWidth||Pt.clientWidth,Ue.innerHeight||Pt.clientHeight)},getOffset:function(Oe,Ve){return da.getBounds(Oe,Ve).getPoint()},getSize:function(Oe){return da.getBounds(Oe,!0).getSize()},isInvisible:function(Oe){return da.getSize(Oe).equals(new le(0,0))},isInView:function(Oe){return!da.isInvisible(Oe)&&da.getViewportBounds(Oe).intersects(da.getBounds(Oe,!0))},isInserted:function(Oe){return y.body.contains(Oe)},getPrefixed:function(Oe,Ve){return Oe&&pe(Oe,Ve)},setPrefixed:function(Oe,Ve,Ue){if(typeof Ve=="object")for(var Pt in Ve)pe(Oe,Pt,!0,Ve[Pt]);else pe(Oe,Ve,!0,Ue)}}},ga={add:function(pe,Oe){if(pe)for(var Ve in Oe)for(var Ue=Oe[Ve],Pt=Ve.split(/[\s,]+/g),Lt=0,bn=Pt.length;Lt<bn;Lt++){var jt=Pt[Lt],Cn=pe===y&&(jt==="touchstart"||jt==="touchmove")?{passive:!1}:!1;pe.addEventListener(jt,Ue,Cn)}},remove:function(pe,Oe){if(pe)for(var Ve in Oe)for(var Ue=Oe[Ve],Pt=Ve.split(/[\s,]+/g),Lt=0,bn=Pt.length;Lt<bn;Lt++)pe.removeEventListener(Pt[Lt],Ue,!1)},getPoint:function(pe){var Oe=pe.targetTouches?pe.targetTouches.length?pe.targetTouches[0]:pe.changedTouches[0]:pe;return new oe(Oe.pageX||Oe.clientX+y.documentElement.scrollLeft,Oe.pageY||Oe.clientY+y.documentElement.scrollTop)},getTarget:function(pe){return pe.target||pe.srcElement},getRelatedTarget:function(pe){return pe.relatedTarget||pe.toElement},getOffset:function(pe,Oe){return ga.getPoint(pe).subtract(da.getOffset(Oe||ga.getTarget(pe)))}};ga.requestAnimationFrame=new function(){var pe=da.getPrefixed(g,"requestAnimationFrame"),Oe=!1,Ve=[],Ue;function Pt(){var Lt=Ve;Ve=[];for(var bn=0,jt=Lt.length;bn<jt;bn++)Lt[bn]();Oe=pe&&Ve.length,Oe&&pe(Pt)}return function(Lt){Ve.push(Lt),pe?Oe||(pe(Pt),Oe=!0):Ue||(Ue=setInterval(Pt,1e3/60))}};var Ca=k.extend($,{_class:"View",initialize:function pe(Oe,Ve){function Ue(Ln){return Ve[Ln]||parseInt(Ve.getAttribute(Ln),10)}function Pt(){var Ln=da.getSize(Ve);return Ln.isNaN()||Ln.isZero()?new le(Ue("width"),Ue("height")):Ln}var Lt;if(g&&Ve){this._id=Ve.getAttribute("id"),this._id==null&&Ve.setAttribute("id",this._id="paper-view-"+pe._id++),ga.add(Ve,this._viewEvents);var bn="none";if(da.setPrefixed(Ve.style,{userDrag:bn,userSelect:bn,touchCallout:bn,contentZooming:bn,tapHighlightColor:"rgba(0,0,0,0)"}),V.hasAttribute(Ve,"resize")){var jt=this;ga.add(g,this._windowEvents={resize:function(){jt.setViewSize(Pt())}})}if(Lt=Pt(),V.hasAttribute(Ve,"stats")&&typeof Stats<"u"){this._stats=new Stats;var Cn=this._stats.domElement,xn=Cn.style,In=da.getOffset(Ve);xn.position="absolute",xn.left=In.x+"px",xn.top=In.y+"px",y.body.appendChild(Cn)}}else Lt=new le(Ve),Ve=null;this._project=Oe,this._scope=Oe._scope,this._element=Ve,this._pixelRatio||(this._pixelRatio=g&&g.devicePixelRatio||1),this._setElementSize(Lt.width,Lt.height),this._viewSize=Lt,pe._views.push(this),pe._viewsById[this._id]=this,(this._matrix=new Ce)._owner=this,pe._focused||(pe._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!ua.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Ca._focused===this&&(Ca._focused=null),Ca._views.splice(Ca._views.indexOf(this),1),delete Ca._viewsById[this._id];var pe=this._project;return pe._view===this&&(pe._view=null),ga.remove(this._element,this._viewEvents),ga.remove(g,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:k.each(xe._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(pe){this[pe]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(pe){this._autoUpdate=pe,pe&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var pe=this;ga.requestAnimationFrame(function(){if(pe._requested=!1,pe._animate){pe.requestUpdate();var Oe=pe._element;(!da.getPrefixed(y,"hidden")||V.getAttribute(Oe,"keepalive")==="true")&&da.isInView(Oe)&&pe._handleFrame()}pe._autoUpdate&&pe.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){ua=this._scope;var pe=Date.now()/1e3,Oe=this._last?pe-this._last:0;this._last=pe,this.emit("frame",new k({delta:Oe,time:this._time+=Oe,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(pe,Oe){var Ve=this._frameItems;Oe?(Ve[pe._id]={item:pe,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete Ve[pe._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(pe){for(var Oe in this._frameItems){var Ve=this._frameItems[Oe];Ve.item.emit("frame",new k(pe,{time:Ve.time+=pe.delta,count:Ve.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=r},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var pe=this._viewSize;return new de(pe.width,pe.height,this,"setViewSize")},setViewSize:function(){var pe=le.read(arguments),Oe=pe.subtract(this._viewSize);Oe.isZero()||(this._setElementSize(pe.width,pe.height),this._viewSize.set(pe),this._changed(),this.emit("resize",{size:pe,delta:Oe}),this._autoUpdate&&this.update())},_setElementSize:function(pe,Oe){var Ve=this._element;Ve&&(Ve.width!==pe&&(Ve.width=pe),Ve.height!==Oe&&(Ve.height=Oe))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new he(new oe,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return da.isInView(this._element)},isInserted:function(){return da.isInserted(this._element)},getPixelSize:function(pe){var Oe=this._element,Ve;if(Oe){var Ue=Oe.parentNode,Pt=y.createElement("div");Pt.style.fontSize=pe,Ue.appendChild(Pt),Ve=parseFloat(da.getStyles(Pt).fontSize),Ue.removeChild(Pt)}else Ve=parseFloat(Ve);return Ve},getTextWidth:function(pe,Oe){return 0}},k.each(["rotate","scale","shear","skew"],function(pe){var Oe=pe==="rotate";this[pe]=function(){var Ve=arguments,Ue=(Oe?k:oe).read(Ve),Pt=oe.read(Ve,0,{readNull:!0});return this.transform(new Ce()[pe](Ue,Pt||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var pe=new Ce;return this.transform(pe.translate.apply(pe,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var pe=oe.read(arguments);this.translate(this.getCenter().subtract(pe))},getZoom:function(){var pe=this._decompose().scaling;return(pe.x+pe.y)/2},setZoom:function(pe){this.transform(new Ce().scale(pe/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(pe){var Oe=this.getRotation();Oe!=null&&pe!=null&&this.rotate(pe-Oe)},getScaling:function(){var pe=this._decompose().scaling;return new ue(pe.x,pe.y,this,"setScaling")},setScaling:function(){var pe=this.getScaling(),Oe=oe.read(arguments,0,{clone:!0,readNull:!0});pe&&Oe&&this.scale(Oe.x/pe.x,Oe.y/pe.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var pe=this._matrix;pe.set.apply(pe,arguments)},transform:function(pe){this._matrix.append(pe)},scrollBy:function(){this.translate(oe.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(oe.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(oe.read(arguments))},getEventPoint:function(pe){return this.viewToProject(ga.getOffset(pe,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(pe,Oe){y&&typeof Oe=="string"&&(Oe=y.getElementById(Oe));var Ve=g?ra:Ca;return new Ve(pe,Oe)}}},new function(){if(!g)return;var pe,Oe,Ve=!1,Ue=!1;function Pt(va){var Sa=ga.getTarget(va);return Sa.getAttribute&&Ca._viewsById[Sa.getAttribute("id")]}function Lt(){var va=Ca._focused;if(!va||!va.isVisible()){for(var Sa=0,$a=Ca._views.length;Sa<$a;Sa++)if((va=Ca._views[Sa]).isVisible()){Ca._focused=Oe=va;break}}}function bn(va,Sa,$a){va._handleMouseEvent("mousemove",Sa,$a)}var jt=g.navigator,Cn,xn,In;jt.pointerEnabled||jt.msPointerEnabled?(Cn="pointerdown MSPointerDown",xn="pointermove MSPointerMove",In="pointerup pointercancel MSPointerUp MSPointerCancel"):(Cn="touchstart",xn="touchmove",In="touchend touchcancel","ontouchstart"in g&&jt.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(Cn+=" mousedown",xn+=" mousemove",In+=" mouseup"));var Ln={},An={mouseout:function(va){var Sa=Ca._focused,$a=ga.getRelatedTarget(va);if(Sa&&(!$a||$a.nodeName==="HTML")){var Da=ga.getOffset(va,Sa._element),Na=Da.x,Va=Math.abs,Ua=Va(Na),Wa=1<<25,Qa=Ua-Wa;Da.x=Va(Qa)<Ua?Qa*(Na<0?-1:1):Na,bn(Sa,va,Sa.viewToProject(Da))}},scroll:Lt};Ln[Cn]=function(va){var Sa=Ca._focused=Pt(va);Ve||(Ve=!0,Sa._handleMouseEvent("mousedown",va))},An[xn]=function(va){var Sa=Ca._focused;if(!Ue){var $a=Pt(va);$a?Sa!==$a&&(Sa&&bn(Sa,va),pe||(pe=Sa),Sa=Ca._focused=Oe=$a):Oe&&Oe===Sa&&(pe&&!pe.isInserted()&&(pe=null),Sa=Ca._focused=pe,pe=null,Lt())}Sa&&bn(Sa,va)},An[Cn]=function(){Ue=!0},An[In]=function(va){var Sa=Ca._focused;Sa&&Ve&&Sa._handleMouseEvent("mouseup",va),Ue=Ve=!1},ga.add(y,An),ga.add(g,{load:Lt});var zn=!1,Jn=!1,Qn={doubleclick:"click",mousedrag:"mousemove"},ta=!1,Pn,Un,On,Rn,Yn,na,ea,pa;function ha(va,Sa,$a,Da,Na,Va,Ua){var Wa=!1,Qa;function Ja(Ra,Fa){if(Ra.responds(Fa)){if(Qa||(Qa=new En(Fa,Da,Na,Sa||Ra,Va?Na.subtract(Va):null)),Ra.emit(Fa,Qa)&&(zn=!0,Qa.prevented&&(Jn=!0),Qa.stopped))return Wa=!0}else{var Xa=Qn[Fa];if(Xa)return Ja(Ra,Xa)}}for(;va&&va!==Ua&&!Ja(va,$a);)va=va._parent;return Wa}function ba(va,Sa,$a,Da,Na,Va){return va._project.removeOn($a),Jn=zn=!1,Yn&&ha(Yn,null,$a,Da,Na,Va)||Sa&&Sa!==Yn&&!Sa.isDescendant(Yn)&&ha(Sa,null,$a==="mousedrag"?"mousemove":$a,Da,Na,Va,Yn)||ha(va,Yn||Sa||va,$a,Da,Na,Va)}var Oa={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:Ln,_handleMouseEvent:function(va,Sa,$a){var Da=this._itemEvents,Na=Da.native[va],Va=va==="mousemove",Ua=this._scope.tool,Wa=this;function Qa(or){return Da.virtual[or]||Wa.responds(or)||Ua&&Ua.responds(or)}Va&&Ve&&Qa("mousedrag")&&(va="mousedrag"),$a||($a=this.getEventPoint(Sa));var Ja=this.getBounds().contains($a),Ra=Na&&Ja&&Wa._project.hitTest($a,{tolerance:0,fill:!0,stroke:!0}),Fa=Ra&&Ra.item||null,Xa=!1,tr={};if(tr[va.substr(5)]=!0,Na&&Fa!==Rn&&(Rn&&ha(Rn,null,"mouseleave",Sa,$a),Fa&&ha(Fa,null,"mouseenter",Sa,$a),Rn=Fa),ta^Ja&&(ha(this,null,Ja?"mouseenter":"mouseleave",Sa,$a),Xa=!0),(Ja||tr.drag)&&!$a.equals(Un)&&(ba(this,Fa,Va?va:"mousemove",Sa,$a,Un),Xa=!0),ta=Ja,tr.down&&Ja||tr.up&&Pn){if(ba(this,Fa,va,Sa,$a,Pn),tr.down){if(pa=Fa===na&&Date.now()-ea<300,On=na=Fa,!Jn&&Fa){for(var er=Fa;er&&!er.responds("mousedrag");)er=er._parent;er&&(Yn=Fa)}Pn=$a}else tr.up&&(!Jn&&Fa===On&&(ea=Date.now(),ba(this,Fa,pa?"doubleclick":"click",Sa,$a,Pn),pa=!1),On=Yn=null);ta=!1,Xa=!0}Un=$a,Xa&&Ua&&(zn=Ua._handleMouseEvent(va,Sa,$a,tr)||zn),Sa.cancelable!==!1&&(zn&&!tr.move||tr.down&&Qa("mouseup"))&&Sa.preventDefault()},_handleKeyEvent:function(va,Sa,$a,Da){var Na=this._scope,Va=Na.tool,Ua;function Wa(Qa){Qa.responds(va)&&(ua=Na,Qa.emit(va,Ua=Ua||new vn(va,Sa,$a,Da)))}this.isVisible()&&(Wa(this),Va&&Va.responds(va)&&Wa(Va))},_countItemEvent:function(va,Sa){var $a=this._itemEvents,Da=$a.native,Na=$a.virtual;for(var Va in Oa)Da[Va]=(Da[Va]||0)+(Oa[Va][va]||0)*Sa;Na[va]=(Na[va]||0)+Sa},statics:{updateFocus:Lt,_resetState:function(){Ve=Ue=zn=ta=!1,pe=Oe=Pn=Un=On=Rn=Yn=na=ea=pa=null}}}}),ra=Ca.extend({_class:"CanvasView",initialize:function(Oe,Ve){if(!(Ve instanceof g.HTMLCanvasElement)){var Ue=le.read(arguments,1);if(Ue.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+k.slice(arguments,1));Ve=aa.getCanvas(Ue)}var Pt=this._context=Ve.getContext("2d");if(Pt.save(),this._pixelRatio=1,!/^off|false$/.test(V.getAttribute(Ve,"hidpi"))){var Lt=g.devicePixelRatio||1,bn=da.getPrefixed(Pt,"backingStorePixelRatio")||1;this._pixelRatio=Lt/bn}Ca.call(this,Oe,Ve),this._needsUpdate=!0},remove:function pe(){return this._context.restore(),pe.base.call(this)},_setElementSize:function pe(Oe,Ve){var Ue=this._pixelRatio;if(pe.base.call(this,Oe*Ue,Ve*Ue),Ue!==1){var Pt=this._element,Lt=this._context;if(!V.hasAttribute(Pt,"resize")){var bn=Pt.style;bn.width=Oe+"px",bn.height=Ve+"px"}Lt.restore(),Lt.save(),Lt.scale(Ue,Ue)}},getContext:function(){return this._context},getPixelSize:function pe(Oe){var Ve=ua.agent,Ue;if(Ve&&Ve.firefox)Ue=pe.base.call(this,Oe);else{var Pt=this._context,Lt=Pt.font;Pt.font=Oe+" serif",Ue=parseFloat(Pt.font),Pt.font=Lt}return Ue},getTextWidth:function(pe,Oe){var Ve=this._context,Ue=Ve.font,Pt=0;Ve.font=pe;for(var Lt=0,bn=Oe.length;Lt<bn;Lt++)Pt=Math.max(Pt,Ve.measureText(Oe[Lt]).width);return Ve.font=Ue,Pt},update:function(){if(!this._needsUpdate)return!1;var pe=this._project,Oe=this._context,Ve=this._viewSize;return Oe.clearRect(0,0,Ve.width+1,Ve.height+1),pe&&pe.draw(Oe,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Gn=k.extend({_class:"Event",initialize:function(Oe){this.event=Oe,this.type=Oe&&Oe.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Kn.modifiers}}),vn=Gn.extend({_class:"KeyEvent",initialize:function(Oe,Ve,Ue,Pt){this.type=Oe,this.event=Ve,this.key=Ue,this.character=Pt},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Kn=new function(){var pe={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},Oe={tab:"	",space:" ",enter:"\r"},Ve={},Ue={},Pt,Lt,bn=new k({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var xn=ua&&ua.agent;return xn&&xn.mac?this.meta:this.control}}});function jt(xn){var In=xn.key||xn.keyIdentifier;return In=/^U\+/.test(In)?String.fromCharCode(parseInt(In.substr(2),16)):/^Arrow[A-Z]/.test(In)?In.substr(5):In==="Unidentified"||In===r?String.fromCharCode(xn.keyCode):In,pe[In]||(In.length>1?k.hyphenate(In):In.toLowerCase())}function Cn(xn,In,Ln,An){var zn=Ca._focused,Jn;if(Ve[In]=xn,xn?Ue[In]=Ln:delete Ue[In],In.length>1&&(Jn=k.camelize(In))in bn){bn[Jn]=xn;var Qn=ua&&ua.agent;if(Jn==="meta"&&Qn&&Qn.mac)if(xn)Pt={};else{for(var ta in Pt)ta in Ue&&Cn(!1,ta,Pt[ta],An);Pt=null}}else xn&&Pt&&(Pt[In]=Ln);zn&&zn._handleKeyEvent(xn?"keydown":"keyup",An,In,Ln)}return ga.add(y,{keydown:function(xn){var In=jt(xn),Ln=ua&&ua.agent;In.length>1||Ln&&Ln.chrome&&(xn.altKey||Ln.mac&&xn.metaKey||!Ln.mac&&xn.ctrlKey)?Cn(!0,In,Oe[In]||(In.length>1?"":In),xn):Lt=In},keypress:function(xn){if(Lt){var In=jt(xn),Ln=xn.charCode,An=Ln>=32?String.fromCharCode(Ln):In.length>1?"":In;In!==Lt&&(In=An.toLowerCase()),Cn(!0,In,An,xn),Lt=null}},keyup:function(xn){var In=jt(xn);In in Ue&&Cn(!1,In,Ue[In],xn)}}),ga.add(g,{blur:function(xn){for(var In in Ue)Cn(!1,In,Ue[In],xn)}}),{modifiers:bn,isDown:function(xn){return!!Ve[xn]}}},En=Gn.extend({_class:"MouseEvent",initialize:function(Oe,Ve,Ue,Pt,Lt){this.type=Oe,this.event=Ve,this.point=Ue,this.target=Pt,this.delta=Lt},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),kt=Gn.extend({_class:"ToolEvent",_item:null,initialize:function(Oe,Ve,Ue){this.tool=Oe,this.type=Ve,this.event=Ue},_choosePoint:function(pe,Oe){return pe||(Oe?Oe.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(pe){this._point=pe},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(pe){this._lastPoint=pe},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(pe){this._downPoint=pe},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(pe){this._middlePoint=pe},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(pe){this._delta=pe},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(pe){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=pe},getItem:function(){if(!this._item){var pe=this.tool._scope.project.hitTest(this.getPoint());if(pe){for(var Oe=pe.item,Ve=Oe._parent;/^(Group|CompoundPath)$/.test(Ve._class);)Oe=Ve,Ve=Ve._parent;this._item=Oe}}return this._item},setItem:function(pe){this._item=pe},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),At=L.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(Oe){L.call(this),this._moveCount=-1,this._downCount=-1,this.set(Oe)},getMinDistance:function(){return this._minDistance},setMinDistance:function(pe){this._minDistance=pe,pe!=null&&this._maxDistance!=null&&pe>this._maxDistance&&(this._maxDistance=pe)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(pe){this._maxDistance=pe,this._minDistance!=null&&pe!=null&&pe<this._minDistance&&(this._minDistance=pe)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(pe){this._minDistance=this._maxDistance=pe},_handleMouseEvent:function(pe,Oe,Ve,Ue){ua=this._scope,Ue.drag&&!this.responds(pe)&&(pe="mousemove");var Pt=Ue.move||Ue.drag,Lt=this.responds(pe),bn=!1,jt=this;function Cn(In,Ln){var An=Ve,zn=Pt?jt._point:jt._downPoint||An;if(Pt){if(jt._moveCount>=0&&An.equals(zn))return!1;if(zn&&(In!=null||Ln!=null)){var Jn=An.subtract(zn),Qn=Jn.getLength();if(Qn<(In||0))return!1;Ln&&(An=zn.add(Jn.normalize(Math.min(Qn,Ln))))}jt._moveCount++}return jt._point=An,jt._lastPoint=zn||An,Ue.down&&(jt._moveCount=-1,jt._downPoint=An,jt._downCount++),!0}function xn(){Lt&&(bn=jt.emit(pe,new kt(jt,pe,Oe))||bn)}if(Ue.down)Cn(),xn();else if(Ue.up)Cn(null,this._maxDistance),xn();else if(Lt)for(;Cn(this._minDistance,this._maxDistance);)xn();return bn}}),Dn=k.extend($,{_class:"Tween",statics:{easings:new k({linear:function(pe){return pe},easeInQuad:function(pe){return pe*pe},easeOutQuad:function(pe){return pe*(2-pe)},easeInOutQuad:function(pe){return pe<.5?2*pe*pe:-1+2*(2-pe)*pe},easeInCubic:function(pe){return pe*pe*pe},easeOutCubic:function(pe){return--pe*pe*pe+1},easeInOutCubic:function(pe){return pe<.5?4*pe*pe*pe:(pe-1)*(2*pe-2)*(2*pe-2)+1},easeInQuart:function(pe){return pe*pe*pe*pe},easeOutQuart:function(pe){return 1- --pe*pe*pe*pe},easeInOutQuart:function(pe){return pe<.5?8*pe*pe*pe*pe:1-8*--pe*pe*pe*pe},easeInQuint:function(pe){return pe*pe*pe*pe*pe},easeOutQuint:function(pe){return 1+--pe*pe*pe*pe*pe},easeInOutQuint:function(pe){return pe<.5?16*pe*pe*pe*pe*pe:1+16*--pe*pe*pe*pe*pe}})},initialize:function pe(Oe,Ve,Ue,Pt,Lt,bn){this.object=Oe;var jt=typeof Lt,Cn=jt==="function";this.type=Cn?jt:jt==="string"?Lt:"linear",this.easing=Cn?Lt:pe.easings[this.type],this.duration=Pt,this.running=!1,this._then=null,this._startTime=null;var xn=Ve||Ue;this._keys=xn?Object.keys(xn):[],this._parsedKeys=this._parseKeys(this._keys),this._from=xn&&this._getState(Ve),this._to=xn&&this._getState(Ue),bn!==!1&&this.start()},then:function(pe){return this._then=pe,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(pe){if(this.running){pe>=1&&(pe=1,this.running=!1);for(var Oe=this.easing(pe),Ve=this._keys,Ue=function(In){return typeof In=="function"?In(Oe,pe):In},Pt=0,Lt=Ve&&Ve.length;Pt<Lt;Pt++){var bn=Ve[Pt],jt=Ue(this._from[bn]),Cn=Ue(this._to[bn]),xn=jt&&Cn&&jt.__add&&Cn.__add?Cn.__subtract(jt).__multiply(Oe).__add(jt):(Cn-jt)*Oe+jt;this._setProperty(this._parsedKeys[bn],xn)}this.responds("update")&&this.emit("update",new k({progress:pe,factor:Oe})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(pe){var Oe=this._startTime,Ve=Oe?(pe-Oe)/this.duration:0;Oe||(this._startTime=pe),this.update(Ve)},_getState:function(pe){for(var Oe=this._keys,Ve={},Ue=0,Pt=Oe.length;Ue<Pt;Ue++){var Lt=Oe[Ue],bn=this._parsedKeys[Lt],jt=this._getProperty(bn),Cn;if(pe){var xn=this._resolveValue(jt,pe[Lt]);this._setProperty(bn,xn),Cn=this._getProperty(bn),Cn=Cn&&Cn.clone?Cn.clone():Cn,this._setProperty(bn,jt)}else Cn=jt&&jt.clone?jt.clone():jt;Ve[Lt]=Cn}return Ve},_resolveValue:function(pe,Oe){if(Oe){if(Array.isArray(Oe)&&Oe.length===2){var Ve=Oe[0];return Ve&&Ve.match&&Ve.match(/^[+\-\*\/]=/)?this._calculate(pe,Ve[0],Oe[1]):Oe}else if(typeof Oe=="string"){var Ue=Oe.match(/^[+\-*/]=(.*)/);if(Ue){var Pt=JSON.parse(Ue[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(pe,Oe[0],Pt)}}}return Oe},_calculate:function(pe,Oe,Ve){return ua.PaperScript.calculateBinary(pe,Oe,Ve)},_parseKeys:function(pe){for(var Oe={},Ve=0,Ue=pe.length;Ve<Ue;Ve++){var Pt=pe[Ve],Lt=Pt.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");Oe[Pt]=Lt.split("/")}return Oe},_getProperty:function(pe,Oe){for(var Ve=this.object,Ue=0,Pt=pe.length-(Oe||0);Ue<Pt&&Ve;Ue++)Ve=Ve[pe[Ue]];return Ve},_setProperty:function(pe,Oe){var Ve=this._getProperty(pe,1);Ve&&(Ve[pe[pe.length-1]]=Oe)}}),Xn={request:function(pe){var Oe=new n.XMLHttpRequest;return Oe.open((pe.method||"get").toUpperCase(),pe.url,k.pick(pe.async,!0)),pe.mimeType&&Oe.overrideMimeType(pe.mimeType),Oe.onload=function(){var Ve=Oe.status;Ve===0||Ve===200?pe.onLoad&&pe.onLoad.call(Oe,Oe.responseText):Oe.onerror()},Oe.onerror=function(){var Ve=Oe.status,Ue='Could not load "'+pe.url+'" (Status: '+Ve+")";if(pe.onError)pe.onError(Ue,Ve);else throw new Error(Ue)},Oe.send(null)}},aa=k.exports.CanvasProvider={canvases:[],getCanvas:function(pe,Oe,Ve){if(!g)return null;var Ue,Pt=!0;typeof pe=="object"&&(Oe=pe.height,pe=pe.width),this.canvases.length?Ue=this.canvases.pop():(Ue=y.createElement("canvas"),Pt=!1);var Lt=Ue.getContext("2d",Ve||{});if(!Lt)throw new Error("Canvas "+Ue+" is unable to provide a 2D context.");return Ue.width===pe&&Ue.height===Oe?Pt&&Lt.clearRect(0,0,pe+1,Oe+1):(Ue.width=pe,Ue.height=Oe),Lt.save(),Ue},getContext:function(pe,Oe,Ve){var Ue=this.getCanvas(pe,Oe,Ve);return Ue?Ue.getContext("2d",Ve||{}):null},release:function(pe){var Oe=pe&&pe.canvas?pe.canvas:pe;Oe&&Oe.getContext&&(Oe.getContext("2d").restore(),this.canvases.push(Oe))}},sa=new function(){var pe=Math.min,Oe=Math.max,Ve=Math.abs,Ue,Pt,Lt,bn,jt,Cn,xn,In,Ln,An,zn;function Jn(Yn,na,ea){return .2989*Yn+.587*na+.114*ea}function Qn(Yn,na,ea,ba){var ha=ba-Jn(Yn,na,ea);Ln=Yn+ha,An=na+ha,zn=ea+ha;var ba=Jn(Ln,An,zn),Oa=pe(Ln,An,zn),va=Oe(Ln,An,zn);if(Oa<0){var Sa=ba-Oa;Ln=ba+(Ln-ba)*ba/Sa,An=ba+(An-ba)*ba/Sa,zn=ba+(zn-ba)*ba/Sa}if(va>255){var $a=255-ba,Da=va-ba;Ln=ba+(Ln-ba)*$a/Da,An=ba+(An-ba)*$a/Da,zn=ba+(zn-ba)*$a/Da}}function ta(Yn,na,ea){return Oe(Yn,na,ea)-pe(Yn,na,ea)}function Pn(Yn,na,ea,pa){var ha=[Yn,na,ea],ba=Oe(Yn,na,ea),Oa=pe(Yn,na,ea),va;Oa=Oa===Yn?0:Oa===na?1:2,ba=ba===Yn?0:ba===na?1:2,va=pe(Oa,ba)===0?Oe(Oa,ba)===1?2:1:0,ha[ba]>ha[Oa]?(ha[va]=(ha[va]-ha[Oa])*pa/(ha[ba]-ha[Oa]),ha[ba]=pa):ha[va]=ha[ba]=0,ha[Oa]=0,Ln=ha[0],An=ha[1],zn=ha[2]}var Un={multiply:function(){Ln=jt*Ue/255,An=Cn*Pt/255,zn=xn*Lt/255},screen:function(){Ln=jt+Ue-jt*Ue/255,An=Cn+Pt-Cn*Pt/255,zn=xn+Lt-xn*Lt/255},overlay:function(){Ln=jt<128?2*jt*Ue/255:255-2*(255-jt)*(255-Ue)/255,An=Cn<128?2*Cn*Pt/255:255-2*(255-Cn)*(255-Pt)/255,zn=xn<128?2*xn*Lt/255:255-2*(255-xn)*(255-Lt)/255},"soft-light":function(){var Yn=Ue*jt/255;Ln=Yn+jt*(255-(255-jt)*(255-Ue)/255-Yn)/255,Yn=Pt*Cn/255,An=Yn+Cn*(255-(255-Cn)*(255-Pt)/255-Yn)/255,Yn=Lt*xn/255,zn=Yn+xn*(255-(255-xn)*(255-Lt)/255-Yn)/255},"hard-light":function(){Ln=Ue<128?2*Ue*jt/255:255-2*(255-Ue)*(255-jt)/255,An=Pt<128?2*Pt*Cn/255:255-2*(255-Pt)*(255-Cn)/255,zn=Lt<128?2*Lt*xn/255:255-2*(255-Lt)*(255-xn)/255},"color-dodge":function(){Ln=jt===0?0:Ue===255?255:pe(255,255*jt/(255-Ue)),An=Cn===0?0:Pt===255?255:pe(255,255*Cn/(255-Pt)),zn=xn===0?0:Lt===255?255:pe(255,255*xn/(255-Lt))},"color-burn":function(){Ln=jt===255?255:Ue===0?0:Oe(0,255-(255-jt)*255/Ue),An=Cn===255?255:Pt===0?0:Oe(0,255-(255-Cn)*255/Pt),zn=xn===255?255:Lt===0?0:Oe(0,255-(255-xn)*255/Lt)},darken:function(){Ln=jt<Ue?jt:Ue,An=Cn<Pt?Cn:Pt,zn=xn<Lt?xn:Lt},lighten:function(){Ln=jt>Ue?jt:Ue,An=Cn>Pt?Cn:Pt,zn=xn>Lt?xn:Lt},difference:function(){Ln=jt-Ue,Ln<0&&(Ln=-Ln),An=Cn-Pt,An<0&&(An=-An),zn=xn-Lt,zn<0&&(zn=-zn)},exclusion:function(){Ln=jt+Ue*(255-jt-jt)/255,An=Cn+Pt*(255-Cn-Cn)/255,zn=xn+Lt*(255-xn-xn)/255},hue:function(){Pn(Ue,Pt,Lt,ta(jt,Cn,xn)),Qn(Ln,An,zn,Jn(jt,Cn,xn))},saturation:function(){Pn(jt,Cn,xn,ta(Ue,Pt,Lt)),Qn(Ln,An,zn,Jn(jt,Cn,xn))},luminosity:function(){Qn(jt,Cn,xn,Jn(Ue,Pt,Lt))},color:function(){Qn(Ue,Pt,Lt,Jn(jt,Cn,xn))},add:function(){Ln=pe(jt+Ue,255),An=pe(Cn+Pt,255),zn=pe(xn+Lt,255)},subtract:function(){Ln=Oe(jt-Ue,0),An=Oe(Cn-Pt,0),zn=Oe(xn-Lt,0)},average:function(){Ln=(jt+Ue)/2,An=(Cn+Pt)/2,zn=(xn+Lt)/2},negation:function(){Ln=255-Ve(255-Ue-jt),An=255-Ve(255-Pt-Cn),zn=255-Ve(255-Lt-xn)}},On=this.nativeModes=k.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(Yn){this[Yn]=!0},{}),Rn=aa.getContext(1,1,{willReadFrequently:!0});Rn&&(k.each(Un,function(Yn,na){var ea=na==="darken",pa=!1;Rn.save();try{Rn.fillStyle=ea?"#300":"#a00",Rn.fillRect(0,0,1,1),Rn.globalCompositeOperation=na,Rn.globalCompositeOperation===na&&(Rn.fillStyle=ea?"#a00":"#300",Rn.fillRect(0,0,1,1),pa=Rn.getImageData(0,0,1,1).data[0]!==ea?170:51)}catch{}Rn.restore(),On[na]=pa}),aa.release(Rn)),this.process=function(Yn,na,ea,pa,ha){var ba=na.canvas,Oa=Yn==="normal";if(Oa||On[Yn])ea.save(),ea.setTransform(1,0,0,1,0,0),ea.globalAlpha=pa,Oa||(ea.globalCompositeOperation=Yn),ea.drawImage(ba,ha.x,ha.y),ea.restore();else{var va=Un[Yn];if(!va)return;for(var Sa=ea.getImageData(ha.x,ha.y,ba.width,ba.height),$a=Sa.data,Da=na.getImageData(0,0,ba.width,ba.height).data,Na=0,Va=$a.length;Na<Va;Na+=4){Ue=Da[Na],jt=$a[Na],Pt=Da[Na+1],Cn=$a[Na+1],Lt=Da[Na+2],xn=$a[Na+2],bn=Da[Na+3],In=$a[Na+3],va();var Ua=bn*pa/255,Wa=1-Ua;$a[Na]=Ua*Ln+Wa*jt,$a[Na+1]=Ua*An+Wa*Cn,$a[Na+2]=Ua*zn+Wa*xn,$a[Na+3]=bn*pa+Wa*In}ea.putImageData(Sa,ha.x,ha.y)}}},ia=new function(){var pe="http://www.w3.org/2000/svg",Oe="http://www.w3.org/2000/xmlns",Ve="http://www.w3.org/1999/xlink",Ue={href:Ve,xlink:Oe,xmlns:Oe+"/","xmlns:xlink":Oe+"/"};function Pt(jt,Cn,xn){return bn(y.createElementNS(pe,jt),Cn,xn)}function Lt(jt,Cn){var xn=Ue[Cn],In=xn?jt.getAttributeNS(xn,Cn):jt.getAttribute(Cn);return In==="null"?null:In}function bn(jt,Cn,xn){for(var In in Cn){var Ln=Cn[In],An=Ue[In];typeof Ln=="number"&&xn&&(Ln=xn.number(Ln)),An?jt.setAttributeNS(An,In,Ln):jt.setAttribute(In,Ln)}return jt}return{svg:pe,xmlns:Oe,xlink:Ve,create:Pt,get:Lt,set:bn}},ma=k.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(pe,Oe){return!Oe&&(pe instanceof Nn||pe instanceof qe||pe instanceof Hn)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(pe,Oe){var Ve=k.capitalize(Oe),Ue=pe[2];this[Oe]={type:pe[1],property:Oe,attribute:pe[0],toSVG:Ue,fromSVG:Ue&&k.each(Ue,function(Pt,Lt){this[Pt]=Lt},{}),exportFilter:pe[3],get:"get"+Ve,set:"set"+Ve}},{});new function(){var pe;function Oe(Un,On,Rn){var Yn=new k,na=Un.getTranslation();if(On){var ea;Un.isInvertible()?(Un=Un._shiftless(),ea=Un._inverseTransform(na),na=null):ea=new oe,Yn[Rn?"cx":"x"]=ea.x,Yn[Rn?"cy":"y"]=ea.y}if(!Un.isIdentity()){var pa=Un.decompose();if(pa){var ha=[],ba=pa.rotation,Oa=pa.scaling,va=pa.skewing;na&&!na.isZero()&&ha.push("translate("+pe.point(na)+")"),ba&&ha.push("rotate("+pe.number(ba)+")"),(!ae.isZero(Oa.x-1)||!ae.isZero(Oa.y-1))&&ha.push("scale("+pe.point(Oa)+")"),va.x&&ha.push("skewX("+pe.number(va.x)+")"),va.y&&ha.push("skewY("+pe.number(va.y)+")"),Yn.transform=ha.join(" ")}else Yn.transform="matrix("+Un.getValues().join(",")+")"}return Yn}function Ve(Un,On){for(var Rn=Oe(Un._matrix),Yn=Un._children,na=ia.create("g",Rn,pe),ea=0,pa=Yn.length;ea<pa;ea++){var ha=Yn[ea],ba=ta(ha,On);if(ba)if(ha.isClipMask()){var Oa=ia.create("clipPath");Oa.appendChild(ba),Jn(ha,Oa,"clip"),ia.set(na,{"clip-path":"url(#"+Oa.id+")"})}else na.appendChild(ba)}return na}function Ue(Un,On){var Rn=Oe(Un._matrix,!0),Yn=Un.getSize(),na=Un.getImage();return Rn.x-=Yn.width/2,Rn.y-=Yn.height/2,Rn.width=Yn.width,Rn.height=Yn.height,Rn.href=On.embedImages==!1&&na&&na.src||Un.toDataURL(),ia.create("image",Rn,pe)}function Pt(Un,On){var Rn=On.matchShapes;if(Rn){var Yn=Un.toShape(!1);if(Yn)return Lt(Yn)}var na=Un._segments,ea=na.length,pa,ha=Oe(Un._matrix);if(Rn&&ea>=2&&!Un.hasHandles())if(ea>2){pa=Un._closed?"polygon":"polyline";for(var ba=[],Oa=0;Oa<ea;Oa++)ba.push(pe.point(na[Oa]._point));ha.points=ba.join(" ")}else{pa="line";var va=na[0]._point,Sa=na[1]._point;ha.set({x1:va.x,y1:va.y,x2:Sa.x,y2:Sa.y})}else pa="path",ha.d=Un.getPathData(null,On.precision);return ia.create(pa,ha,pe)}function Lt(Un){var On=Un._type,Rn=Un._radius,Yn=Oe(Un._matrix,!0,On!=="rectangle");if(On==="rectangle"){On="rect";var na=Un._size,ea=na.width,pa=na.height;Yn.x-=ea/2,Yn.y-=pa/2,Yn.width=ea,Yn.height=pa,Rn.isZero()&&(Rn=null)}return Rn&&(On==="circle"?Yn.r=Rn:(Yn.rx=Rn.width,Yn.ry=Rn.height)),ia.create(On,Yn,pe)}function bn(Un,On){var Rn=Oe(Un._matrix),Yn=Un.getPathData(null,On.precision);return Yn&&(Rn.d=Yn),ia.create("path",Rn,pe)}function jt(Un,On){var Rn=Oe(Un._matrix,!0),Yn=Un._definition,na=zn(Yn,"symbol"),ea=Yn._item,pa=ea.getStrokeBounds();return na||(na=ia.create("symbol",{viewBox:pe.rectangle(pa)}),na.appendChild(ta(ea,On)),Jn(Yn,na,"symbol")),Rn.href="#"+na.id,Rn.x+=pa.x,Rn.y+=pa.y,Rn.width=pa.width,Rn.height=pa.height,Rn.overflow="visible",ia.create("use",Rn,pe)}function Cn(Un){var On=zn(Un,"color");if(!On){var Rn=Un.getGradient(),Yn=Rn._radial,na=Un.getOrigin(),ea=Un.getDestination(),pa;if(Yn){pa={cx:na.x,cy:na.y,r:na.getDistance(ea)};var ha=Un.getHighlight();ha&&(pa.fx=ha.x,pa.fy=ha.y)}else pa={x1:na.x,y1:na.y,x2:ea.x,y2:ea.y};pa.gradientUnits="userSpaceOnUse",On=ia.create((Yn?"radial":"linear")+"Gradient",pa,pe);for(var ba=Rn._stops,Oa=0,va=ba.length;Oa<va;Oa++){var Sa=ba[Oa],$a=Sa._color,Da=$a.getAlpha(),Na=Sa._offset;pa={offset:Na??Oa/(va-1)},$a&&(pa["stop-color"]=$a.toCSS(!0)),Da<1&&(pa["stop-opacity"]=Da),On.appendChild(ia.create("stop",pa,pe))}Jn(Un,On,"color")}return"url(#"+On.id+")"}function xn(Un){var On=ia.create("text",Oe(Un._matrix,!0),pe);return On.textContent=Un._content,On}var In={Group:Ve,Layer:Ve,Raster:Ue,Path:Pt,Shape:Lt,CompoundPath:bn,SymbolItem:jt,PointText:xn};function Ln(Un,On,Rn,Yn){var na={},ea=!Yn&&Un.getParent(),pa=[];return Un._name!=null&&(na.id=Un._name),k.each(ma,function(ha){var ba=ha.get,Oa=ha.type,va=Un[ba]();if(ha.exportFilter?ha.exportFilter(Un,va):Rn.reduceAttributes==!1||!ea||!k.equals(ea[ba](),va)){if(Oa==="color"&&va!=null){var Sa=va.getAlpha();Sa<1&&(na[ha.attribute+"-opacity"]=Sa)}Oa==="style"?pa.push(ha.attribute+": "+va):na[ha.attribute]=va==null?"none":Oa==="color"?va.gradient?Cn(va):va.toCSS(!0):Oa==="array"?va.join(","):Oa==="lookup"?ha.toSVG[va]:va}}),pa.length&&(na.style=pa.join(";")),na.opacity===1&&delete na.opacity,Un._visible||(na.visibility="hidden"),ia.set(On,na,pe)}var An;function zn(Un,On){return An||(An={ids:{},svgs:{}}),Un&&An.svgs[On+"-"+(Un._id||Un.__id||(Un.__id=re.get("svg")))]}function Jn(Un,On,Rn){An||zn();var Yn=An.ids[Rn]=(An.ids[Rn]||0)+1;On.id=Rn+"-"+Yn,An.svgs[Rn+"-"+(Un._id||Un.__id)]=On}function Qn(Un,On){var Rn=Un,Yn=null;if(An){Rn=Un.nodeName.toLowerCase()==="svg"&&Un;for(var na in An.svgs)Yn||(Rn||(Rn=ia.create("svg"),Rn.appendChild(Un)),Yn=Rn.insertBefore(ia.create("defs"),Rn.firstChild)),Yn.appendChild(An.svgs[na]);An=null}return On.asString?new n.XMLSerializer().serializeToString(Rn):Rn}function ta(Un,On,Rn){var Yn=In[Un._class],na=Yn&&Yn(Un,On);if(na){var ea=On.onExport;ea&&(na=ea(Un,na,On)||na);var pa=JSON.stringify(Un._data);pa&&pa!=="{}"&&pa!=="null"&&na.setAttribute("data-paper-data",pa)}return na&&Ln(Un,na,On,Rn)}function Pn(Un){return Un||(Un={}),pe=new j(Un.precision),Un}xe.inject({exportSVG:function(Un){return Un=Pn(Un),Qn(ta(this,Un,!0),Un)}}),$e.inject({exportSVG:function(Un){Un=Pn(Un);var On=this._children,Rn=this.getView(),Yn=k.pick(Un.bounds,"view"),na=Un.matrix||Yn==="view"&&Rn._matrix,ea=na&&Ce.read([na]),pa=Yn==="view"?new he([0,0],Rn.getViewSize()):Yn==="content"?xe._getBounds(On,ea,{stroke:!0}).rect:he.read([Yn],0,{readNull:!0}),ha={version:"1.1",xmlns:ia.svg,"xmlns:xlink":ia.xlink};pa&&(ha.width=pa.width,ha.height=pa.height,(pa.x||pa.x===0||pa.y||pa.y===0)&&(ha.viewBox=pe.rectangle(pa)));var ba=ia.create("svg",ha,pe),Oa=ba;ea&&!ea.isIdentity()&&(Oa=ba.appendChild(ia.create("g",Oe(ea),pe)));for(var va=0,Sa=On.length;va<Sa;va++)Oa.appendChild(ta(On[va],Un,!0));return Qn(ba,Un)}})},new function(){var pe={},Oe;function Ve(On,Rn,Yn,na,ea,pa){var ha=ia.get(On,Rn)||pa,ba=ha==null?na?null:Yn?"":0:Yn?ha:parseFloat(ha);return/%\s*$/.test(ha)?ba/100*(ea?1:Oe[/x|^width/.test(Rn)?"width":"height"]):ba}function Ue(On,Rn,Yn,na,ea,pa,ha){return Rn=Ve(On,Rn||"x",!1,na,ea,pa),Yn=Ve(On,Yn||"y",!1,na,ea,ha),na&&(Rn==null||Yn==null)?null:new oe(Rn,Yn)}function Pt(On,Rn,Yn,na,ea){return Rn=Ve(On,Rn||"width",!1,na,ea),Yn=Ve(On,Yn||"height",!1,na,ea),na&&(Rn==null||Yn==null)?null:new le(Rn,Yn)}function Lt(On,Rn,Yn){return On==="none"?null:Rn==="number"?parseFloat(On):Rn==="array"?On?On.split(/[\s,]+/g).map(parseFloat):[]:Rn==="color"?ta(On)||On:Rn==="lookup"?Yn[On]:On}function bn(On,Rn,Yn,na){var ea=On.childNodes,pa=Rn==="clippath",ha=Rn==="defs",ba=new Ie,Oa=ba._project,va=Oa._currentStyle,Sa=[];if(!pa&&!ha&&(ba=Qn(ba,On,na),Oa._currentStyle=ba._style.clone()),na)for(var $a=On.querySelectorAll("defs"),Da=0,Na=$a.length;Da<Na;Da++)Pn($a[Da],Yn,!1);for(var Da=0,Na=ea.length;Da<Na;Da++){var Va=ea[Da],Ua;Va.nodeType===1&&!/^defs$/i.test(Va.nodeName)&&(Ua=Pn(Va,Yn,!1))&&!(Ua instanceof Dt)&&Sa.push(Ua)}return ba.addChildren(Sa),pa&&(ba=Qn(ba.reduce(),On,na)),Oa._currentStyle=va,(pa||ha)&&(ba.remove(),ba=null),ba}function jt(On,Rn){for(var Yn=On.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),na=[],ea=0,pa=Yn.length;ea<pa;ea+=2)na.push(new oe(parseFloat(Yn[ea]),parseFloat(Yn[ea+1])));var ha=new kn(na);return Rn==="polygon"&&ha.closePath(),ha}function Cn(On){return Nn.create(On.getAttribute("d"))}function xn(On,Rn){var Yn=(Ve(On,"href",!0)||"").substring(1),na=Rn==="radialgradient",ea;if(Yn)ea=pe[Yn].getGradient(),ea._radial^na&&(ea=ea.clone(),ea._radial=na);else{for(var pa=On.childNodes,ha=[],ba=0,Oa=pa.length;ba<Oa;ba++){var va=pa[ba];va.nodeType===1&&ha.push(Qn(new Bn,va))}ea=new Zn(ha,na)}var Sa,$a,Da,Na=Ve(On,"gradientUnits",!0)!=="userSpaceOnUse";na?(Sa=Ue(On,"cx","cy",!1,Na,"50%","50%"),$a=Sa.add(Ve(On,"r",!1,!1,Na,"50%"),0),Da=Ue(On,"fx","fy",!0,Na)):(Sa=Ue(On,"x1","y1",!1,Na,"0%","0%"),$a=Ue(On,"x2","y2",!1,Na,"100%","0%"));var Va=Qn(new ca(ea,Sa,$a,Da),On);return Va._scaleToBounds=Na,null}var In={"#document":function(On,Rn,Yn,na){for(var ea=On.childNodes,pa=0,ha=ea.length;pa<ha;pa++){var ba=ea[pa];if(ba.nodeType===1)return Pn(ba,Yn,na)}},g:bn,svg:bn,clippath:bn,polygon:jt,polyline:jt,path:Cn,lineargradient:xn,radialgradient:xn,image:function(On){var Rn=new Et(Ve(On,"href",!0));return Rn.on("load",function(){var Yn=Pt(On);this.setSize(Yn);var na=Ue(On).add(Yn.divide(2));this._matrix.append(new Ce().translate(na))}),Rn},symbol:function(On,Rn,Yn,na){return new Dt(bn(On,Rn,Yn,na),!0)},defs:bn,use:function(On){var Rn=(Ve(On,"href",!0)||"").substring(1),Yn=pe[Rn],na=Ue(On);return Yn?Yn instanceof Dt?Yn.place(na):Yn.clone().translate(na):null},circle:function(On){return new qe.Circle(Ue(On,"cx","cy"),Ve(On,"r"))},ellipse:function(On){return new qe.Ellipse({center:Ue(On,"cx","cy"),radius:Pt(On,"rx","ry")})},rect:function(On){return new qe.Rectangle(new he(Ue(On),Pt(On)),Pt(On,"rx","ry"))},line:function(On){return new kn.Line(Ue(On,"x1","y1"),Ue(On,"x2","y2"))},text:function(On){var Rn=new la(Ue(On).add(Ue(On,"dx","dy")));return Rn.setContent(On.textContent.trim()||""),Rn},switch:bn};function Ln(On,Rn,Yn,na){if(On.transform){for(var ea=(na.getAttribute(Yn)||"").split(/\)\s*/g),pa=new Ce,ha=0,ba=ea.length;ha<ba;ha++){var Oa=ea[ha];if(!Oa)break;for(var va=Oa.split(/\(\s*/),Sa=va[0].trim(),$a=va[1].split(/[\s,]+/g),Da=0,Na=$a.length;Da<Na;Da++)$a[Da]=parseFloat($a[Da]);switch(Sa){case"matrix":pa.append(new Ce($a[0],$a[1],$a[2],$a[3],$a[4],$a[5]));break;case"rotate":pa.rotate($a[0],$a[1]||0,$a[2]||0);break;case"translate":pa.translate($a[0],$a[1]||0);break;case"scale":pa.scale($a);break;case"skewX":pa.skew($a[0],0);break;case"skewY":pa.skew(0,$a[0]);break}}On.transform(pa)}}function An(On,Rn,Yn){var na=Yn==="fill-opacity"?"getFillColor":"getStrokeColor",ea=On[na]&&On[na]();ea&&ea.setAlpha(parseFloat(Rn))}var zn=k.set(k.each(ma,function(On){this[On.attribute]=function(Rn,Yn){if(Rn[On.set]&&(Rn[On.set](Lt(Yn,On.type,On.fromSVG)),On.type==="color")){var na=Rn[On.get]();if(na&&na._scaleToBounds){var ea=Rn.getBounds();na.transform(new Ce().translate(ea.getPoint()).scale(ea.getSize()))}}}},{}),{id:function(On,Rn){pe[Rn]=On,On.setName&&On.setName(Rn)},"clip-path":function(On,Rn){var Yn=ta(Rn);if(Yn)if(Yn=Yn.clone(),Yn.setClipMask(!0),On instanceof Ie)On.insertChild(0,Yn);else return new Ie(Yn,On)},gradientTransform:Ln,transform:Ln,"fill-opacity":An,"stroke-opacity":An,visibility:function(On,Rn){On.setVisible&&On.setVisible(Rn==="visible")},display:function(On,Rn){On.setVisible&&On.setVisible(Rn!==null)},"stop-color":function(On,Rn){On.setColor&&On.setColor(Rn)},"stop-opacity":function(On,Rn){On._color&&On._color.setAlpha(parseFloat(Rn))},offset:function(On,Rn){if(On.setOffset){var Yn=Rn.match(/(.*)%$/);On.setOffset(Yn?Yn[1]/100:parseFloat(Rn))}},viewBox:function(On,Rn,Yn,na,ea){var pa=new he(Lt(Rn,"array")),ha=Pt(na,null,null,!0),ba,Oa;if(On instanceof Ie){var va=ha?ha.divide(pa.getSize()):1,Oa=new Ce().scale(va).translate(pa.getPoint().negate());ba=On}else On instanceof Dt&&(ha&&pa.setSize(ha),ba=On._item);if(ba){if(Jn(na,"overflow",ea)!=="visible"){var Sa=new qe.Rectangle(pa);Sa.setClipMask(!0),ba.addChild(Sa)}Oa&&ba.transform(Oa)}}});function Jn(On,Rn,Yn){var na=On.attributes[Rn],ea=na&&na.value;if(!ea&&On.style){var pa=k.camelize(Rn);ea=On.style[pa],!ea&&Yn.node[pa]!==Yn.parent[pa]&&(ea=Yn.node[pa])}return ea?ea==="none"?null:ea:r}function Qn(On,Rn,Yn){var na=Rn.parentNode,ea={node:da.getStyles(Rn)||{},parent:!Yn&&!/^defs$/i.test(na.tagName)&&da.getStyles(na)||{}};return k.each(zn,function(pa,ha){var ba=Jn(Rn,ha,ea);On=ba!==r&&pa(On,ba,ha,Rn,ea)||On}),On}function ta(On){var Rn=On&&On.match(/\((?:["'#]*)([^"')]+)/),Yn=Rn&&Rn[1],na=Yn&&pe[g?Yn.replace(g.location.href.split("#")[0]+"#",""):Yn];return na&&na._scaleToBounds&&(na=na.clone(),na._scaleToBounds=!0),na}function Pn(On,Rn,Yn){var na=On.nodeName.toLowerCase(),ea=na!=="#document",pa=y.body,ha,ba,Oa;Yn&&ea&&(Oe=ua.getView().getSize(),Oe=Pt(On,null,null,!0)||Oe,ha=ia.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),ba=On.parentNode,Oa=On.nextSibling,ha.appendChild(On),pa.appendChild(ha));var va=ua.settings,Sa=va.applyMatrix,$a=va.insertItems;va.applyMatrix=!1,va.insertItems=!1;var Da=In[na],Na=Da&&Da(On,na,Rn,Yn)||null;if(va.insertItems=$a,va.applyMatrix=Sa,Na){ea&&!(Na instanceof Ie)&&(Na=Qn(Na,On,Yn));var Va=Rn.onImport,Ua=ea&&On.getAttribute("data-paper-data");Va&&(Na=Va(On,Na,Rn)||Na),Rn.expandShapes&&Na instanceof qe&&(Na.remove(),Na=Na.toPath()),Ua&&(Na._data=JSON.parse(Ua))}return ha&&(pa.removeChild(ha),ba&&(Oa?ba.insertBefore(On,Oa):ba.appendChild(On))),Yn&&(pe={},Na&&k.pick(Rn.applyMatrix,Sa)&&Na.matrix.apply(!0,!0)),Na}function Un(On,Rn,Yn){if(!On)return null;Rn=typeof Rn=="function"?{onLoad:Rn}:Rn||{};var na=ua,ea=null;function pa(va){try{var Sa=typeof va=="object"?va:new n.DOMParser().parseFromString(va.trim(),"image/svg+xml");if(!Sa.nodeName)throw Sa=null,new Error("Unsupported SVG source: "+On);ua=na,ea=Pn(Sa,Rn,!0),(!Rn||Rn.insert!==!1)&&Yn._insertItem(r,ea);var $a=Rn.onLoad;$a&&$a(ea,va)}catch(Da){ha(Da)}}function ha(va,Sa){var $a=Rn.onError;if($a)$a(va,Sa);else throw new Error(va)}if(typeof On=="string"&&!/^[\s\S]*</.test(On)){var ba=y.getElementById(On);ba?pa(ba):Xn.request({url:On,async:!0,onLoad:pa,onError:ha})}else if(typeof File<"u"&&On instanceof File){var Oa=new FileReader;return Oa.onload=function(){pa(Oa.result)},Oa.onerror=function(){ha(Oa.error)},Oa.readAsText(On)}else pa(On);return ea}xe.inject({importSVG:function(On,Rn){return Un(On,Rn,this)}}),$e.inject({importSVG:function(On,Rn){return this.activate(),Un(On,Rn,this)}})},k.exports.PaperScript=function(){var pe=this,Oe=pe.acorn;if(!Oe&&typeof commonjsRequire<"u")try{Oe=requireAcorn()}catch{}if(!Oe){var Ve,Ue;Oe=Ve=Ue={},function(Qn,ta){if(typeof Ve=="object"&&typeof Ue=="object")return ta(Ve);if(typeof r=="function"&&r.amd)return r(["exports"],ta);ta(Qn.acorn||(Qn.acorn={}))}(this,function(Qn){Qn.version="0.5.0";var ta,Pn,Un,On;Qn.parse=function(wa,Pa){return Pn=String(wa),Un=Pn.length,Yn(Pa),Ao(),gs(ta.program)};var Rn=Qn.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function Yn(wa){ta=wa||{};for(var Pa in Rn)Object.prototype.hasOwnProperty.call(ta,Pa)||(ta[Pa]=Rn[Pa]);On=ta.sourceFile||null}var na=Qn.getLineInfo=function(wa,Pa){for(var Aa=1,za=0;;){eo.lastIndex=za;var lr=eo.exec(wa);if(lr&&lr.index<Pa)++Aa,za=lr.index+lr[0].length;else break}return{line:Aa,column:Pa-za}};Qn.tokenize=function(wa,Pa){Pn=String(wa),Un=Pn.length,Yn(Pa),Ao();var Aa={};function za(lr){return Ua=ha,Xr(lr),Aa.start=pa,Aa.end=ha,Aa.startLoc=ba,Aa.endLoc=Oa,Aa.type=va,Aa.value=Sa,Aa}return za.jumpTo=function(lr,ur){if(ea=lr,ta.locations){Da=1,Na=eo.lastIndex=0;for(var fr;(fr=eo.exec(Pn))&&fr.index<lr;)++Da,Na=fr.index+fr[0].length}$a=ur,to()},za};var ea,pa,ha,ba,Oa,va,Sa,$a,Da,Na,Va,Ua,Wa,Qa,Ja,Ra;function Fa(wa,Pa){var Aa=na(Pn,wa);Pa+=" ("+Aa.line+":"+Aa.column+")";var za=new SyntaxError(Pa);throw za.pos=wa,za.loc=Aa,za.raisedAt=ea,za}var Xa=[],tr={type:"num"},er={type:"regexp"},or={type:"string"},rr={type:"name"},sr={type:"eof"},cr={keyword:"break"},ir={keyword:"case",beforeExpr:!0},Ka={keyword:"catch"},vr={keyword:"continue"},kr={keyword:"debugger"},Sr={keyword:"default"},_r={keyword:"do",isLoop:!0},Cr={keyword:"else",beforeExpr:!0},Dr={keyword:"finally"},Or={keyword:"for",isLoop:!0},fa={keyword:"function"},ka={keyword:"if"},ya={keyword:"return",beforeExpr:!0},Ta={keyword:"switch"},Ba={keyword:"throw",beforeExpr:!0},Ea={keyword:"try"},La={keyword:"var"},Ga={keyword:"while",isLoop:!0},ja={keyword:"with"},Ha={keyword:"new",beforeExpr:!0},qa={keyword:"this"},ar={keyword:"null",atomValue:null},dr={keyword:"true",atomValue:!0},nr={keyword:"false",atomValue:!1},gr={keyword:"in",binop:7,beforeExpr:!0},wr={break:cr,case:ir,catch:Ka,continue:vr,debugger:kr,default:Sr,do:_r,else:Cr,finally:Dr,for:Or,function:fa,if:ka,return:ya,switch:Ta,throw:Ba,try:Ea,var:La,while:Ga,with:ja,null:ar,true:dr,false:nr,new:Ha,in:gr,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:qa,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},xr={type:"[",beforeExpr:!0},Er={type:"]"},Mr={type:"{",beforeExpr:!0},Rr={type:"}"},Ar={type:"(",beforeExpr:!0},Fe={type:")"},wn={type:",",beforeExpr:!0},qn={type:";",beforeExpr:!0},oa={type:":",beforeExpr:!0},xa={type:"."},Ia={type:"?",beforeExpr:!0},Ma={binop:10,beforeExpr:!0},Ya={isAssign:!0,beforeExpr:!0},Za={isAssign:!0,beforeExpr:!0},pr={postfix:!0,prefix:!0,isUpdate:!0},hr={prefix:!0,beforeExpr:!0},Pr={binop:1,beforeExpr:!0},zr={binop:2,beforeExpr:!0},qr={binop:3,beforeExpr:!0},Gr={binop:4,beforeExpr:!0},Jr={binop:5,beforeExpr:!0},jr={binop:6,beforeExpr:!0},Wr={binop:7,beforeExpr:!0},qo={binop:8,beforeExpr:!0},Yo={binop:9,prefix:!0,beforeExpr:!0},Xo={binop:10,beforeExpr:!0};Qn.tokTypes={bracketL:xr,bracketR:Er,braceL:Mr,braceR:Rr,parenL:Ar,parenR:Fe,comma:wn,semi:qn,colon:oa,dot:xa,question:Ia,slash:Ma,eq:Ya,name:rr,eof:sr,num:tr,regexp:er,string:or};for(var No in wr)Qn.tokTypes["_"+No]=wr[No];function ao(wa){wa=wa.split(" ");var Pa="",Aa=[];e:for(var za=0;za<wa.length;++za){for(var lr=0;lr<Aa.length;++lr)if(Aa[lr][0].length==wa[za].length){Aa[lr].push(wa[za]);continue e}Aa.push([wa[za]])}function ur(br){if(br.length==1)return Pa+="return str === "+JSON.stringify(br[0])+";";Pa+="switch(str){";for(var Fr=0;Fr<br.length;++Fr)Pa+="case "+JSON.stringify(br[Fr])+":";Pa+="return true}return false;"}if(Aa.length>3){Aa.sort(function(br,Fr){return Fr.length-br.length}),Pa+="switch(str.length){";for(var za=0;za<Aa.length;++za){var fr=Aa[za];Pa+="case "+fr[0].length+":",ur(fr)}Pa+="}"}else ur(wa);return new Function("str",Pa)}var Zo=ao("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Ko=ao("class enum extends super const export import"),Bo=ao("implements interface let package private protected public static yield"),lo=ao("eval arguments"),Jo=ao("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),ts=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Io="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",ns="------------------------------------------------------------------------------------------------------------------------------------------",Vo=new RegExp("["+Io+"]"),as=new RegExp("["+Io+ns+"]"),co=/[\n\r\u2028\u2029]/,eo=/\r\n|[\n\r\u2028\u2029]/g,uo=Qn.isIdentifierStart=function(wa){return wa<65?wa===36:wa<91?!0:wa<97?wa===95:wa<123?!0:wa>=170&&Vo.test(String.fromCharCode(wa))},Mo=Qn.isIdentifierChar=function(wa){return wa<48?wa===36:wa<58?!0:wa<65?!1:wa<91?!0:wa<97?wa===95:wa<123?!0:wa>=170&&as.test(String.fromCharCode(wa))};function Yr(){this.line=Da,this.column=ea-Na}function Ao(){Da=1,ea=Na=0,$a=!0,to()}function Nr(wa,Pa){ha=ea,ta.locations&&(Oa=new Yr),va=wa,to(),Sa=Pa,$a=wa.beforeExpr}function rs(){var wa=ta.onComment&&ta.locations&&new Yr,Pa=ea,Aa=Pn.indexOf("*/",ea+=2);if(Aa===-1&&Fa(ea-2,"Unterminated comment"),ea=Aa+2,ta.locations){eo.lastIndex=Pa;for(var za;(za=eo.exec(Pn))&&za.index<ea;)++Da,Na=za.index+za[0].length}ta.onComment&&ta.onComment(!0,Pn.slice(Pa+2,Aa),Pa,ea,wa,ta.locations&&new Yr)}function yo(){for(var wa=ea,Pa=ta.onComment&&ta.locations&&new Yr,Aa=Pn.charCodeAt(ea+=2);ea<Un&&Aa!==10&&Aa!==13&&Aa!==8232&&Aa!==8233;)++ea,Aa=Pn.charCodeAt(ea);ta.onComment&&ta.onComment(!1,Pn.slice(wa+2,ea),wa,ea,Pa,ta.locations&&new Yr)}function to(){for(;ea<Un;){var wa=Pn.charCodeAt(ea);if(wa===32)++ea;else if(wa===13){++ea;var Pa=Pn.charCodeAt(ea);Pa===10&&++ea,ta.locations&&(++Da,Na=ea)}else if(wa===10||wa===8232||wa===8233)++ea,ta.locations&&(++Da,Na=ea);else if(wa>8&&wa<14)++ea;else if(wa===47){var Pa=Pn.charCodeAt(ea+1);if(Pa===42)rs();else if(Pa===47)yo();else break}else if(wa===160)++ea;else if(wa>=5760&&ts.test(String.fromCharCode(wa)))++ea;else break}}function os(){var wa=Pn.charCodeAt(ea+1);return wa>=48&&wa<=57?Lo(!0):(++ea,Nr(xa))}function ss(){var wa=Pn.charCodeAt(ea+1);return $a?(++ea,Ro()):wa===61?Br(Za,2):Br(Ma,1)}function is(){var wa=Pn.charCodeAt(ea+1);return wa===61?Br(Za,2):Br(Xo,1)}function ls(wa){var Pa=Pn.charCodeAt(ea+1);return Pa===wa?Br(wa===124?Pr:zr,2):Pa===61?Br(Za,2):Br(wa===124?qr:Jr,1)}function cs(){var wa=Pn.charCodeAt(ea+1);return wa===61?Br(Za,2):Br(Gr,1)}function us(wa){var Pa=Pn.charCodeAt(ea+1);return Pa===wa?Pa==45&&Pn.charCodeAt(ea+2)==62&&co.test(Pn.slice(Ua,ea))?(ea+=3,yo(),to(),Xr()):Br(pr,2):Pa===61?Br(Za,2):Br(Yo,1)}function ds(wa){var Pa=Pn.charCodeAt(ea+1),Aa=1;return Pa===wa?(Aa=wa===62&&Pn.charCodeAt(ea+2)===62?3:2,Pn.charCodeAt(ea+Aa)===61?Br(Za,Aa+1):Br(qo,Aa)):Pa==33&&wa==60&&Pn.charCodeAt(ea+2)==45&&Pn.charCodeAt(ea+3)==45?(ea+=4,yo(),to(),Xr()):(Pa===61&&(Aa=Pn.charCodeAt(ea+2)===61?3:2),Br(Wr,Aa))}function fs(wa){var Pa=Pn.charCodeAt(ea+1);return Pa===61?Br(jr,Pn.charCodeAt(ea+2)===61?3:2):Br(wa===61?Ya:hr,1)}function ps(wa){switch(wa){case 46:return os();case 40:return++ea,Nr(Ar);case 41:return++ea,Nr(Fe);case 59:return++ea,Nr(qn);case 44:return++ea,Nr(wn);case 91:return++ea,Nr(xr);case 93:return++ea,Nr(Er);case 123:return++ea,Nr(Mr);case 125:return++ea,Nr(Rr);case 58:return++ea,Nr(oa);case 63:return++ea,Nr(Ia);case 48:var Pa=Pn.charCodeAt(ea+1);if(Pa===120||Pa===88)return hs();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Lo(!1);case 34:case 39:return ms(wa);case 47:return ss();case 37:case 42:return is();case 124:case 38:return ls(wa);case 94:return cs();case 43:case 45:return us(wa);case 60:case 62:return ds(wa);case 61:case 33:return fs(wa);case 126:return Br(hr,1)}return!1}function Xr(wa){if(wa?ea=pa+1:pa=ea,ta.locations&&(ba=new Yr),wa)return Ro();if(ea>=Un)return Nr(sr);var Pa=Pn.charCodeAt(ea);if(uo(Pa)||Pa===92)return zo();var Aa=ps(Pa);if(Aa===!1){var za=String.fromCharCode(Pa);if(za==="\\"||Vo.test(za))return zo();Fa(ea,"Unexpected character '"+za+"'")}return Aa}function Br(wa,Pa){var Aa=Pn.slice(ea,ea+Pa);ea+=Pa,Nr(wa,Aa)}function Ro(){for(var lr="",wa,Pa,Aa=ea;;){ea>=Un&&Fa(Aa,"Unterminated regular expression");var za=Pn.charAt(ea);if(co.test(za)&&Fa(Aa,"Unterminated regular expression"),wa)wa=!1;else{if(za==="[")Pa=!0;else if(za==="]"&&Pa)Pa=!1;else if(za==="/"&&!Pa)break;wa=za==="\\"}++ea}var lr=Pn.slice(Aa,ea);++ea;var ur=Fo();ur&&!/^[gmsiy]*$/.test(ur)&&Fa(Aa,"Invalid regexp flag");try{var fr=new RegExp(lr,ur)}catch(br){br instanceof SyntaxError&&Fa(Aa,br.message),Fa(br)}return Nr(er,fr)}function ro(wa,Pa){for(var Aa=ea,za=0,lr=0,ur=Pa??1/0;lr<ur;++lr){var fr=Pn.charCodeAt(ea),br;if(fr>=97?br=fr-97+10:fr>=65?br=fr-65+10:fr>=48&&fr<=57?br=fr-48:br=1/0,br>=wa)break;++ea,za=za*wa+br}return ea===Aa||Pa!=null&&ea-Aa!==Pa?null:za}function hs(){ea+=2;var wa=ro(16);return wa==null&&Fa(pa+2,"Expected hexadecimal number"),uo(Pn.charCodeAt(ea))&&Fa(ea,"Identifier directly after number"),Nr(tr,wa)}function Lo(wa){var Pa=ea,Aa=!1,za=Pn.charCodeAt(ea)===48;!wa&&ro(10)===null&&Fa(Pa,"Invalid number"),Pn.charCodeAt(ea)===46&&(++ea,ro(10),Aa=!0);var lr=Pn.charCodeAt(ea);(lr===69||lr===101)&&(lr=Pn.charCodeAt(++ea),(lr===43||lr===45)&&++ea,ro(10)===null&&Fa(Pa,"Invalid number"),Aa=!0),uo(Pn.charCodeAt(ea))&&Fa(ea,"Identifier directly after number");var ur=Pn.slice(Pa,ea),fr;return Aa?fr=parseFloat(ur):!za||ur.length===1?fr=parseInt(ur,10):/[89]/.test(ur)||Ra?Fa(Pa,"Invalid number"):fr=parseInt(ur,8),Nr(tr,fr)}function ms(wa){ea++;for(var Pa="";;){ea>=Un&&Fa(pa,"Unterminated string constant");var Aa=Pn.charCodeAt(ea);if(Aa===wa)return++ea,Nr(or,Pa);if(Aa===92){Aa=Pn.charCodeAt(++ea);var za=/^[0-7]+/.exec(Pn.slice(ea,ea+3));for(za&&(za=za[0]);za&&parseInt(za,8)>255;)za=za.slice(0,-1);if(za==="0"&&(za=null),++ea,za)Ra&&Fa(ea-2,"Octal literal in strict mode"),Pa+=String.fromCharCode(parseInt(za,8)),ea+=za.length-1;else switch(Aa){case 110:Pa+=`
`;break;case 114:Pa+="\r";break;case 120:Pa+=String.fromCharCode(fo(2));break;case 117:Pa+=String.fromCharCode(fo(4));break;case 85:Pa+=String.fromCharCode(fo(8));break;case 116:Pa+="	";break;case 98:Pa+="\b";break;case 118:Pa+="\v";break;case 102:Pa+="\f";break;case 48:Pa+="\0";break;case 13:Pn.charCodeAt(ea)===10&&++ea;case 10:ta.locations&&(Na=ea,++Da);break;default:Pa+=String.fromCharCode(Aa);break}}else(Aa===13||Aa===10||Aa===8232||Aa===8233)&&Fa(pa,"Unterminated string constant"),Pa+=String.fromCharCode(Aa),++ea}}function fo(wa){var Pa=ro(16,wa);return Pa===null&&Fa(pa,"Bad character escape sequence"),Pa}var no;function Fo(){no=!1;for(var wa,Pa=!0,Aa=ea;;){var za=Pn.charCodeAt(ea);if(Mo(za))no&&(wa+=Pn.charAt(ea)),++ea;else if(za===92){no||(wa=Pn.slice(Aa,ea)),no=!0,Pn.charCodeAt(++ea)!=117&&Fa(ea,"Expecting Unicode escape sequence \\uXXXX"),++ea;var lr=fo(4),ur=String.fromCharCode(lr);ur||Fa(ea-1,"Invalid Unicode escape"),(Pa?uo(lr):Mo(lr))||Fa(ea-4,"Invalid Unicode escape"),wa+=ur}else break;Pa=!1}return no?wa:Pn.slice(Aa,ea)}function zo(){var wa=Fo(),Pa=rr;return!no&&Jo(wa)&&(Pa=wr[wa]),Nr(Pa,wa)}function yr(){Va=pa,Ua=ha,Wa=Oa,Xr()}function bo(wa){if(Ra=wa,ea=pa,ta.locations)for(;ea<Na;)Na=Pn.lastIndexOf(`
`,Na-2)+1,--Da;to(),Xr()}function Uo(){this.type=null,this.start=pa,this.end=null}function Go(){this.start=ba,this.end=null,On!==null&&(this.source=On)}function Ir(){var wa=new Uo;return ta.locations&&(wa.loc=new Go),ta.directSourceFile&&(wa.sourceFile=ta.directSourceFile),ta.ranges&&(wa.range=[pa,0]),wa}function Hr(wa){var Pa=new Uo;return Pa.start=wa.start,ta.locations&&(Pa.loc=new Go,Pa.loc.start=wa.loc.start),ta.ranges&&(Pa.range=[wa.range[0],0]),Pa}function mr(wa,Pa){return wa.type=Pa,wa.end=Ua,ta.locations&&(wa.loc.end=Wa),ta.ranges&&(wa.range[1]=Ua),wa}function xo(wa){return ta.ecmaVersion>=5&&wa.type==="ExpressionStatement"&&wa.expression.type==="Literal"&&wa.expression.value==="use strict"}function $r(wa){if(va===wa)return yr(),!0}function po(){return!ta.strictSemicolons&&(va===sr||va===Rr||co.test(Pn.slice(Ua,pa)))}function Zr(){!$r(qn)&&!po()&&Ur()}function Tr(wa){va===wa?yr():Ur()}function Ur(){Fa(pa,"Unexpected token")}function ho(wa){wa.type!=="Identifier"&&wa.type!=="MemberExpression"&&Fa(wa.start,"Assigning to rvalue"),Ra&&wa.type==="Identifier"&&lo(wa.name)&&Fa(wa.start,"Assigning to "+wa.name+" in strict mode")}function gs(wa){Va=Ua=ea,ta.locations&&(Wa=new Yr),Qa=Ra=null,Ja=[],Xr();var Pa=wa||Ir(),Aa=!0;for(wa||(Pa.body=[]);va!==sr;){var za=Lr();Pa.body.push(za),Aa&&xo(za)&&bo(!0),Aa=!1}return mr(Pa,"Program")}var Co={kind:"loop"},vs={kind:"switch"};function Lr(){(va===Ma||va===Za&&Sa=="/=")&&Xr(!0);var wa=va,Pa=Ir();switch(wa){case cr:case vr:yr();var Aa=wa===cr;$r(qn)||po()?Pa.label=null:va!==rr?Ur():(Pa.label=Qr(),Zr());for(var za=0;za<Ja.length;++za){var lr=Ja[za];if((Pa.label==null||lr.name===Pa.label.name)&&(lr.kind!=null&&(Aa||lr.kind==="loop")||Pa.label&&Aa))break}return za===Ja.length&&Fa(Pa.start,"Unsyntactic "+wa.keyword),mr(Pa,Aa?"BreakStatement":"ContinueStatement");case kr:return yr(),Zr(),mr(Pa,"DebuggerStatement");case _r:return yr(),Ja.push(Co),Pa.body=Lr(),Ja.pop(),Tr(Ga),Pa.test=oo(),Zr(),mr(Pa,"DoWhileStatement");case Or:if(yr(),Ja.push(Co),Tr(Ar),va===qn)return wo(Pa,null);if(va===La){var ur=Ir();return yr(),Wo(ur,!0),mr(ur,"VariableDeclaration"),ur.declarations.length===1&&$r(gr)?jo(Pa,ur):wo(Pa,ur)}var ur=Vr(!1,!0);return $r(gr)?(ho(ur),jo(Pa,ur)):wo(Pa,ur);case fa:return yr(),Po(Pa,!0);case ka:return yr(),Pa.test=oo(),Pa.consequent=Lr(),Pa.alternate=$r(Cr)?Lr():null,mr(Pa,"IfStatement");case ya:return!Qa&&!ta.allowReturnOutsideFunction&&Fa(pa,"'return' outside of function"),yr(),$r(qn)||po()?Pa.argument=null:(Pa.argument=Vr(),Zr()),mr(Pa,"ReturnStatement");case Ta:yr(),Pa.discriminant=oo(),Pa.cases=[],Tr(Mr),Ja.push(vs);for(var fr,br;va!=Rr;)if(va===ir||va===Sr){var Fr=va===ir;fr&&mr(fr,"SwitchCase"),Pa.cases.push(fr=Ir()),fr.consequent=[],yr(),Fr?fr.test=Vr():(br&&Fa(Va,"Multiple default clauses"),br=!0,fr.test=null),Tr(oa)}else fr||Ur(),fr.consequent.push(Lr());return fr&&mr(fr,"SwitchCase"),yr(),Ja.pop(),mr(Pa,"SwitchStatement");case Ba:return yr(),co.test(Pn.slice(Ua,pa))&&Fa(Ua,"Illegal newline after throw"),Pa.argument=Vr(),Zr(),mr(Pa,"ThrowStatement");case Ea:if(yr(),Pa.block=so(),Pa.handler=null,va===Ka){var Kr=Ir();yr(),Tr(Ar),Kr.param=Qr(),Ra&&lo(Kr.param.name)&&Fa(Kr.param.start,"Binding "+Kr.param.name+" in strict mode"),Tr(Fe),Kr.guard=null,Kr.body=so(),Pa.handler=mr(Kr,"CatchClause")}return Pa.guardedHandlers=Xa,Pa.finalizer=$r(Dr)?so():null,!Pa.handler&&!Pa.finalizer&&Fa(Pa.start,"Missing catch or finally clause"),mr(Pa,"TryStatement");case La:return yr(),Wo(Pa),Zr(),mr(Pa,"VariableDeclaration");case Ga:return yr(),Pa.test=oo(),Ja.push(Co),Pa.body=Lr(),Ja.pop(),mr(Pa,"WhileStatement");case ja:return Ra&&Fa(pa,"'with' in strict mode"),yr(),Pa.object=oo(),Pa.body=Lr(),mr(Pa,"WithStatement");case Mr:return so();case qn:return yr(),mr(Pa,"EmptyStatement");default:var To=Sa,go=Vr();if(wa===rr&&go.type==="Identifier"&&$r(oa)){for(var za=0;za<Ja.length;++za)Ja[za].name===To&&Fa(go.start,"Label '"+To+"' is already declared");var Ss=va.isLoop?"loop":va===Ta?"switch":null;return Ja.push({name:To,kind:Ss}),Pa.body=Lr(),Ja.pop(),Pa.label=go,mr(Pa,"LabeledStatement")}else return Pa.expression=go,Zr(),mr(Pa,"ExpressionStatement")}}function oo(){Tr(Ar);var wa=Vr();return Tr(Fe),wa}function so(wa){var Pa=Ir(),Aa=!0,za=!1,lr;for(Pa.body=[],Tr(Mr);!$r(Rr);){var ur=Lr();Pa.body.push(ur),Aa&&wa&&xo(ur)&&(lr=za,bo(za=!0)),Aa=!1}return za&&!lr&&bo(!1),mr(Pa,"BlockStatement")}function wo(wa,Pa){return wa.init=Pa,Tr(qn),wa.test=va===qn?null:Vr(),Tr(qn),wa.update=va===Fe?null:Vr(),Tr(Fe),wa.body=Lr(),Ja.pop(),mr(wa,"ForStatement")}function jo(wa,Pa){return wa.left=Pa,wa.right=Vr(),Tr(Fe),wa.body=Lr(),Ja.pop(),mr(wa,"ForInStatement")}function Wo(wa,Pa){for(wa.declarations=[],wa.kind="var";;){var Aa=Ir();if(Aa.id=Qr(),Ra&&lo(Aa.id.name)&&Fa(Aa.id.start,"Binding "+Aa.id.name+" in strict mode"),Aa.init=$r(Ya)?Vr(!0,Pa):null,wa.declarations.push(mr(Aa,"VariableDeclarator")),!$r(wn))break}return wa}function Vr(wa,Pa){var Aa=So(Pa);if(!wa&&va===wn){var za=Hr(Aa);for(za.expressions=[Aa];$r(wn);)za.expressions.push(So(Pa));return mr(za,"SequenceExpression")}return Aa}function So(wa){var Pa=_s(wa);if(va.isAssign){var Aa=Hr(Pa);return Aa.operator=Sa,Aa.left=Pa,yr(),Aa.right=So(wa),ho(Pa),mr(Aa,"AssignmentExpression")}return Pa}function _s(wa){var Pa=ys(wa);if($r(Ia)){var Aa=Hr(Pa);return Aa.test=Pa,Aa.consequent=Vr(!0),Tr(oa),Aa.alternate=Vr(!0,wa),mr(Aa,"ConditionalExpression")}return Pa}function ys(wa){return ko(Oo(),-1,wa)}function ko(wa,Pa,Aa){var za=va.binop;if(za!=null&&(!Aa||va!==gr)&&za>Pa){var lr=Hr(wa);lr.left=wa,lr.operator=Sa;var ur=va;yr(),lr.right=ko(Oo(),za,Aa);var fr=mr(lr,ur===Pr||ur===zr?"LogicalExpression":"BinaryExpression");return ko(fr,Pa,Aa)}return wa}function Oo(){if(va.prefix){var wa=Ir(),Pa=va.isUpdate;return wa.operator=Sa,wa.prefix=!0,$a=!0,yr(),wa.argument=Oo(),Pa?ho(wa.argument):Ra&&wa.operator==="delete"&&wa.argument.type==="Identifier"&&Fa(wa.start,"Deleting local variable in strict mode"),mr(wa,Pa?"UpdateExpression":"UnaryExpression")}for(var Aa=xs();va.postfix&&!po();){var wa=Hr(Aa);wa.operator=Sa,wa.prefix=!1,wa.argument=Aa,ho(Aa),yr(),Aa=mr(wa,"UpdateExpression")}return Aa}function xs(){return io($o())}function io(wa,Pa){if($r(xa)){var Aa=Hr(wa);return Aa.object=wa,Aa.property=Qr(!0),Aa.computed=!1,io(mr(Aa,"MemberExpression"),Pa)}else if($r(xr)){var Aa=Hr(wa);return Aa.object=wa,Aa.property=Vr(),Aa.computed=!0,Tr(Er),io(mr(Aa,"MemberExpression"),Pa)}else if(!Pa&&$r(Ar)){var Aa=Hr(wa);return Aa.callee=wa,Aa.arguments=Eo(Fe,!1),io(mr(Aa,"CallExpression"),Pa)}else return wa}function $o(){switch(va){case qa:var za=Ir();return yr(),mr(za,"ThisExpression");case rr:return Qr();case tr:case or:case er:var za=Ir();return za.value=Sa,za.raw=Pn.slice(pa,ha),yr(),mr(za,"Literal");case ar:case dr:case nr:var za=Ir();return za.value=va.atomValue,za.raw=va.keyword,yr(),mr(za,"Literal");case Ar:var wa=ba,Pa=pa;yr();var Aa=Vr();return Aa.start=Pa,Aa.end=ha,ta.locations&&(Aa.loc.start=wa,Aa.loc.end=Oa),ta.ranges&&(Aa.range=[Pa,ha]),Tr(Fe),Aa;case xr:var za=Ir();return yr(),za.elements=Eo(Er,!0,!0),mr(za,"ArrayExpression");case Mr:return ws();case fa:var za=Ir();return yr(),Po(za,!1);case Ha:return Cs();default:Ur()}}function Cs(){var wa=Ir();return yr(),wa.callee=io($o(),!0),$r(Ar)?wa.arguments=Eo(Fe,!1):wa.arguments=Xa,mr(wa,"NewExpression")}function ws(){var wa=Ir(),Pa=!0,Aa=!1;for(wa.properties=[],yr();!$r(Rr);){if(Pa)Pa=!1;else if(Tr(wn),ta.allowTrailingCommas&&$r(Rr))break;var za={key:Ho()},lr=!1,ur;if($r(oa)?(za.value=Vr(!0),ur=za.kind="init"):ta.ecmaVersion>=5&&za.key.type==="Identifier"&&(za.key.name==="get"||za.key.name==="set")?(lr=Aa=!0,ur=za.kind=za.key.name,za.key=Ho(),va!==Ar&&Ur(),za.value=Po(Ir(),!1)):Ur(),za.key.type==="Identifier"&&(Ra||Aa))for(var fr=0;fr<wa.properties.length;++fr){var br=wa.properties[fr];if(br.key.name===za.key.name){var Fr=ur==br.kind||lr&&br.kind==="init"||ur==="init"&&(br.kind==="get"||br.kind==="set");Fr&&!Ra&&ur==="init"&&br.kind==="init"&&(Fr=!1),Fr&&Fa(za.key.start,"Redefinition of property")}}wa.properties.push(za)}return mr(wa,"ObjectExpression")}function Ho(){return va===tr||va===or?$o():Qr(!0)}function Po(wa,Pa){va===rr?wa.id=Qr():Pa?Ur():wa.id=null,wa.params=[];var Aa=!0;for(Tr(Ar);!$r(Fe);)Aa?Aa=!1:Tr(wn),wa.params.push(Qr());var za=Qa,lr=Ja;if(Qa=!0,Ja=[],wa.body=so(!0),Qa=za,Ja=lr,Ra||wa.body.body.length&&xo(wa.body.body[0]))for(var ur=wa.id?-1:0;ur<wa.params.length;++ur){var fr=ur<0?wa.id:wa.params[ur];if((Bo(fr.name)||lo(fr.name))&&Fa(fr.start,"Defining '"+fr.name+"' in strict mode"),ur>=0)for(var br=0;br<ur;++br)fr.name===wa.params[br].name&&Fa(fr.start,"Argument name clash in strict mode")}return mr(wa,Pa?"FunctionDeclaration":"FunctionExpression")}function Eo(wa,Pa,Aa){for(var za=[],lr=!0;!$r(wa);){if(lr)lr=!1;else if(Tr(wn),Pa&&ta.allowTrailingCommas&&$r(wa))break;Aa&&va===wn?za.push(null):za.push(Vr(!0))}return za}function Qr(wa){var Pa=Ir();return wa&&ta.forbidReserved=="everywhere"&&(wa=!1),va===rr?(!wa&&(ta.forbidReserved&&(ta.ecmaVersion===3?Zo:Ko)(Sa)||Ra&&Bo(Sa))&&Pn.slice(pa,ha).indexOf("\\")==-1&&Fa(pa,"The keyword '"+Sa+"' is reserved"),Pa.name=Sa):wa&&va.keyword?Pa.name=va.keyword:Ur(),$a=!1,yr(),mr(Pa,"Identifier")}}),Oe.version||(Oe=null)}function Pt(Qn,ta){return(pe.acorn||Oe).parse(Qn,ta)}var Lt={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},bn={"-":"__negate","+":"__self"},jt=k.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(Qn){this["__"+Qn]="#"+Qn},{__self:function(){return this}});oe.inject(jt),le.inject(jt),ca.inject(jt);function Cn(Qn,ta,Pn){var Un=Lt[ta];if(Qn&&Qn[Un]){var On=Qn[Un](Pn);return ta==="!="?!On:On}switch(ta){case"+":return Qn+Pn;case"-":return Qn-Pn;case"*":return Qn*Pn;case"/":return Qn/Pn;case"%":return Qn%Pn;case"==":return Qn==Pn;case"!=":return Qn!=Pn}}function xn(Qn,ta){var Pn=bn[Qn];if(ta&&ta[Pn])return ta[Pn]();switch(Qn){case"+":return+ta;case"-":return-ta}}function In(Qn,ta){if(!Qn)return"";ta=ta||{};var Pn=[];function Un(Ra){for(var Fa=0,Xa=Pn.length;Fa<Xa;Fa++){var tr=Pn[Fa];if(tr[0]>=Ra)break;Ra+=tr[1]}return Ra}function On(Ra){return Qn.substring(Un(Ra.range[0]),Un(Ra.range[1]))}function Rn(Ra,Fa){return Qn.substring(Un(Ra.range[1]),Un(Fa.range[0]))}function Yn(Ra,Fa){for(var Xa=Un(Ra.range[0]),tr=Un(Ra.range[1]),er=0,or=Pn.length-1;or>=0;or--)if(Xa>Pn[or][0]){er=or+1;break}Pn.splice(er,0,[Xa,Fa.length-tr+Xa]),Qn=Qn.substring(0,Xa)+Fa+Qn.substring(tr)}function na(Ra,Fa){switch(Ra.type){case"UnaryExpression":if(Ra.operator in bn&&Ra.argument.type!=="Literal"){var Xa=On(Ra.argument);Yn(Ra,'$__("'+Ra.operator+'", '+Xa+")")}break;case"BinaryExpression":if(Ra.operator in Lt&&Ra.left.type!=="Literal"){var tr=On(Ra.left),er=On(Ra.right),or=Rn(Ra.left,Ra.right),rr=Ra.operator;Yn(Ra,"__$__("+tr+","+or.replace(new RegExp("\\"+rr),'"'+rr+'"')+", "+er+")")}break;case"UpdateExpression":case"AssignmentExpression":var sr=Fa&&Fa.type;if(!(sr==="ForStatement"||sr==="BinaryExpression"&&/^[=!<>]/.test(Fa.operator)||sr==="MemberExpression"&&Fa.computed)){if(Ra.type==="UpdateExpression"){var Xa=On(Ra.argument),cr="__$__("+Xa+', "'+Ra.operator[0]+'", 1)',ir=Xa+" = "+cr;Ra.prefix?ir="("+ir+")":(sr==="AssignmentExpression"||sr==="VariableDeclarator"||sr==="BinaryExpression")&&(On(Fa.left||Fa.id)===Xa&&(ir=cr),ir=Xa+"; "+ir),Yn(Ra,ir)}else if(/^.=$/.test(Ra.operator)&&Ra.left.type!=="Literal"){var tr=On(Ra.left),er=On(Ra.right),cr=tr+" = __$__("+tr+', "'+Ra.operator[0]+'", '+er+")";Yn(Ra,/^\(.*\)$/.test(On(Ra))?"("+cr+")":cr)}}break}}function ea(Ra){switch(Ra.type){case"ExportDefaultDeclaration":Yn({range:[Ra.start,Ra.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var Fa=Ra.declaration,Xa=Ra.specifiers;if(Fa){var tr=Fa.declarations;tr&&(tr.forEach(function(or){Yn(or,"module.exports."+On(or))}),Yn({range:[Ra.start,Fa.start+Fa.kind.length]},""))}else if(Xa){var er=Xa.map(function(or){var rr=On(or);return"module.exports."+rr+" = "+rr+"; "}).join("");er&&Yn(Ra,er)}break}}function pa(Ra,Fa,Xa){if(Ra){for(var tr in Ra)if(tr!=="range"&&tr!=="loc"){var er=Ra[tr];if(Array.isArray(er))for(var or=0,rr=er.length;or<rr;or++)pa(er[or],Ra,Xa);else er&&typeof er=="object"&&pa(er,Ra,Xa)}Xa.operatorOverloading!==!1&&na(Ra,Fa),Xa.moduleExports!==!1&&ea(Ra)}}function ha(Ra){var Fa="",Xa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ra=(Math.abs(Ra)<<1)+(Ra<0?1:0);Ra||!Fa;){var tr=Ra&31;Ra>>=5,Ra&&(tr|=32),Fa+=Xa[tr]}return Fa}var ba=ta.url||"",Oa=ta.sourceMaps,va=ta.paperFeatures||{},Sa=ta.source||Qn,$a=ta.offset||0,Da=ua.agent,Na=Da.versionNumber,Va=!1,Ua=/\r\n|\n|\r/mg,Wa;if(Oa&&(Da.chrome&&Na>=30||Da.webkit&&Na>=537.76||Da.firefox&&Na>=23||Da.node)){if(Da.node)$a-=2;else if(g&&ba&&!g.location.href.indexOf(ba)){var Qa=y.getElementsByTagName("html")[0].innerHTML;$a=Qa.substr(0,Qa.indexOf(Qn)+1).match(Ua).length+1}Va=$a>0&&!(Da.chrome&&Na>=36||Da.safari&&Na>=600||Da.firefox&&Na>=40||Da.node);var Ja=["AA"+ha(Va?0:$a)+"A"];Ja.length=(Qn.match(Ua)||[]).length+1+(Va?$a:0),Wa={version:3,file:ba,names:[],mappings:Ja.join(";AACA"),sourceRoot:"",sources:[ba],sourcesContent:[Sa]}}return(va.operatorOverloading!==!1||va.moduleExports!==!1)&&pa(Pt(Qn,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,va),Wa&&(Va&&(Qn=new Array($a+1).join(`
`)+Qn),/^(inline|both)$/.test(Oa)&&(Qn+=`
//# sourceMappingURL=data:application/json;base64,`+n.btoa(unescape(encodeURIComponent(JSON.stringify(Wa))))),Qn+=`
//# sourceURL=`+(ba||"paperscript")),{url:ba,source:Sa,code:Qn,map:Wa}}function Ln(Qn,ta,Pn){ua=ta;var Un=ta.getView(),On=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(Qn)&&!/\bnew\s+Tool\b/.test(Qn)?new At:null,Rn=On?On._events:[],Yn=["onFrame","onResize"].concat(Rn),na=[],ea=[],pa,ha=typeof Qn=="object"?Qn:In(Qn,Pn);Qn=ha.code;function ba(Na,Va){for(var Ua in Na)(Va||!/^_/.test(Ua))&&new RegExp("([\\b\\s\\W]|^)"+Ua.replace(/\$/g,"\\$")+"\\b").test(Qn)&&(na.push(Ua),ea.push(Na[Ua]))}ba({__$__:Cn,$__:xn,paper:ta,tool:On},!0),ba(ta),Qn="var module = { exports: {} }; "+Qn;var $a=k.each(Yn,function(Na){new RegExp("\\s+"+Na+"\\b").test(Qn)&&(na.push(Na),this.push("module.exports."+Na+" = "+Na+";"))},[]).join(`
`);$a&&(Qn+=`
`+$a),Qn+=`
return module.exports;`;var Oa=ua.agent;if(y&&(Oa.chrome||Oa.firefox&&Oa.versionNumber<40)){var va=y.createElement("script"),Sa=y.head||y.getElementsByTagName("head")[0];Oa.firefox&&(Qn=`
`+Qn),va.appendChild(y.createTextNode("document.__paperscript__ = function("+na+") {"+Qn+`
}`)),Sa.appendChild(va),pa=y.__paperscript__,delete y.__paperscript__,Sa.removeChild(va)}else pa=Function(na,Qn);var $a=pa&&pa.apply(ta,ea),Da=$a||{};return k.each(Rn,function(Na){var Va=Da[Na];Va&&(On[Na]=Va)}),Un&&(Da.onResize&&Un.setOnResize(Da.onResize),Un.emit("resize",{size:Un.size,delta:new oe}),Da.onFrame&&Un.setOnFrame(Da.onFrame),Un.requestUpdate()),$a}function An(Qn){if(/^text\/(?:x-|)paperscript$/.test(Qn.type)&&V.getAttribute(Qn,"ignore")!=="true"){var ta=V.getAttribute(Qn,"canvas"),Pn=y.getElementById(ta),Un=Qn.src||Qn.getAttribute("data-src"),On=V.hasAttribute(Qn,"async"),Rn="data-paper-scope";if(!Pn)throw new Error('Unable to find canvas with id "'+ta+'"');var Yn=V.get(Pn.getAttribute(Rn))||new V().setup(Pn);return Pn.setAttribute(Rn,Yn._id),Un?Xn.request({url:Un,async:On,mimeType:"text/plain",onLoad:function(na){Ln(na,Yn,Un)}}):Ln(Qn.innerHTML,Yn,Qn.baseURI),Qn.setAttribute("data-paper-ignore","true"),Yn}}function zn(){k.each(y&&y.getElementsByTagName("script"),An)}function Jn(Qn){return Qn?An(Qn):zn()}return g&&(y.readyState==="complete"?setTimeout(zn):ga.add(g,{load:zn})),{compile:In,execute:Ln,load:Jn,parse:Pt,calculateBinary:Cn,calculateUnary:xn}}.call(this);var ua=new(V.inject(k.exports,{Base:k,Numerical:ae,Key:Kn,DomEvent:ga,DomElement:da,document:y,window:g,Symbol:Dt,PlacedSymbol:_n}));return ua.agent.node&&require$$2(ua),typeof r=="function"&&r.amd?r("paper",ua):e&&(e.exports=ua),ua}).call(commonjsGlobal$1,typeof self=="object"?self:null)})(paperFull);var paperFullExports=paperFull.exports;const paper=getDefaultExportFromCjs(paperFullExports),characters=ref([]),glyphs$1=ref([]),constants$1=ref([{uuid:genUUID(),name:"",type:3,value:2,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]},{uuid:genUUID(),name:"",type:0,value:1,min:0,max:2},{uuid:genUUID(),name:"",type:3,value:1,options:[{value:0,label:""},{value:1,label:""}]},{uuid:genUUID(),name:"",type:0,value:1,min:1,max:2},{uuid:genUUID(),name:"",type:0,value:0,min:0,max:2},{uuid:genUUID(),name:"",type:0,value:1,min:0,max:2},{uuid:genUUID(),name:"",type:0,value:50,min:40,max:100}]),editCharacterFile$1=ref(null),loading=ref(!1),gridSettings=ref({dx:0,dy:0,centerSquareSize:1e3/3,size:1e3,default:!0});let scripts_map$1={};const constantsMap$1=new ConstantsMap(constants$1.value),orderedListWithItemsForCurrentCharacterFile$1=computed(()=>editCharacterFile$1.value.orderedList.map(e=>e.type==="group"?selectedItemByUUID(editCharacterFile$1.value.groups,e.uuid):selectedItemByUUID(editCharacterFile$1.value.components,e.uuid))),generateCharacterTemplate$1=e=>{const n=document.getElementById("playground-character-template").querySelector(".char-preview").cloneNode(!0);return n.className=`character-preview character-${e.uuid}`,n.querySelector(".playground-preview-canvas").id=`playground-preview-canvas-${e.uuid}`,n.addEventListener("click",()=>editChar(e.uuid)),n},initPlayground=async()=>{total$1.value=0,loading$1.value=!0,characters.value=[],window.FP=FP;const e=document.getElementById("playground-characters-list");e.innerHTML="";const n=await fetch(base$1+"/templates/playground.json"),r=JSON.parse(await n.text());for(let y=0;y<strokes.length;y++){const k=strokes[y],{name:$,params:V,uuid:L}=k;let j=await(await fetch(base$1+`/templates/templates2/${$}.js`)).text();const ae=[];for(let oe=0;oe<V.length;oe++){const ue=V[oe];ae.push({uuid:genUUID(),name:ue.name,type:0,value:ue.default,min:ue.min||0,max:ue.max||1e3})}ae.push({uuid:genUUID(),name:"",type:3,value:0,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]}),ae.push({uuid:genUUID(),name:"",type:3,value:2,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]}),ae.push({uuid:genUUID(),name:"",type:0,value:1,min:0,max:2}),ae.push({uuid:genUUID(),name:"",type:3,value:1,options:[{value:0,label:""},{value:1,label:""}]}),ae.push({uuid:genUUID(),name:"",type:0,value:1,min:1,max:2}),ae.push({uuid:genUUID(),name:"",type:0,value:0,min:0,max:2}),ae.push({uuid:genUUID(),name:"",type:0,value:1,min:0,max:2});const re={uuid:L,type:"system",name:$,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},parameters:new ParametersMap(ae),joints:[],script:`function script_${L.replaceAll("-","_")} (glyph, constants, FP) {
	${j}
}`};glyphs$1.value.push(re)}const g=r.file;g.characterList=g.characterList.map(y=>{const k=instanceCharacter(y);e.appendChild(generateCharacterTemplate$1(k)),characters.value.push(k);for(let L=0;L<k.components.length;L++){const z=k.components[L];if(z.type==="glyph"){const ae=z.value.parameters.parameters;for(let re=0;re<ae.length;re++){const oe=ae[re];oe.name===""&&oe.value!==0?(oe.type=4,oe.value=constants$1.value[0].uuid):oe.name===""?(oe.type=4,oe.value=constants$1.value[1].uuid):oe.name===""?(oe.type=4,oe.value=constants$1.value[2].uuid):oe.name===""?(oe.type=4,oe.value=constants$1.value[3].uuid):oe.name===""?(oe.type=4,oe.value=constants$1.value[4].uuid):oe.name===""?(oe.type=4,oe.value=constants$1.value[5].uuid):oe.name===""&&(oe.type=4,oe.value=constants$1.value[6].uuid)}}}const $=document.getElementById(`playground-preview-canvas-${y.uuid}`);if(!$)return;const V=componentsToContours(orderedListWithItemsForCharacterFile(k),{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!1,!0);renderPreview2($,V)}),editChar(characters.value[0].uuid),loading$1.value=!1},renderPreview=()=>{characters.value.map(e=>{e.info.gridSettings={dx:gridSettings.value.dx,dy:gridSettings.value.dy,size:gridSettings.value.size,centerSquareSize:gridSettings.value.centerSquareSize,default:!1};const n=document.getElementById(`playground-preview-canvas-${e.uuid}`);if(!n)return;const r=componentsToContours(orderedListWithItemsForCharacterFile(e),{unitsPerEm:1e3,descender:-200,advanceWidth:1e3,grid:gridSettings.value,useSkeletonGrid:!0,playground:!0},{x:0,y:0},!1,!0,!0);renderPreview2(n,r)})},updateCharactersAndPreview=()=>{for(let e=0;e<characters.value.length;e++){const n=characters.value[e],r=document.getElementById(`playground-preview-canvas-${n.uuid}`);if(!r)return;const g=componentsToContours(orderedListWithItemsForCharacterFile(n),{unitsPerEm:1e3,descender:-200,advanceWidth:1e3,grid:n.info.gridSettings,useSkeletonGrid:!0,playground:!0},{x:0,y:0},!1,!0,!0);renderPreview2(r,g)}},editChar=e=>{for(let n=0;n<characters.value.length;n++)characters.value[n].uuid===e&&(editCharacterFile$1.value=characters.value[n],editCharacterFile$1.value.components.map(r=>{if(r.type==="glyph"){const g=r.value;executeScript$1(g)}}),emitter.emit("refreshPlaygroundGridController"))},getScript$1=e=>{if(e.script)return e.script;if(e.script_reference){if(scripts_map$1[e.script_reference])return scripts_map$1[e.script_reference];for(let n=0;n<glyphs$1.value.length;n++){const r=glyphs$1.value[n];if(e.script_reference===r.uuid&&r.script)return r.script}}return null},exportFont$1=async()=>{if(loading.value)return;loading.value=!0,await computeOverlapRemovedContours$1();const e=await createFont$1();if(window.__TAURI_INTERNALS__){const r=toArrayBuffer(e);nativeSaveBinary(r,".otf",["otf"]),loading.value=!1}else{const r=new DataView(toArrayBuffer(e)),g=new Blob([r],{type:"font/opentype"});var n=new JSZip;n.file(".otf",g),n.generateAsync({type:"blob"}).then(function(y){saveAs(y,".zip"),loading.value=!1})}},OVERLAP_REMOVAL_CONFIG$1={PATH_PRECISION:1e-6,TOLERANCE:1e-8,MAX_SUBDIVISIONS:10,CURVE_SUBDIVISION_THRESHOLD:.1,MERGE_TOLERANCE:1e-6},createOptimizedPath$1=e=>{const n=new paper.Path;if(e.length===0)return n;const r=new paper.Point(e[0].start.x,e[0].start.y);n.moveTo(r);for(let g=0;g<e.length;g++){const y=e[g];if(y.type===PathType.LINE){const k=y,$=new paper.Point(k.end.x,k.end.y);n.lineTo($)}else if(y.type===PathType.CUBIC_BEZIER){const k=y,$=new paper.Point(k.control1.x,k.control1.y),V=new paper.Point(k.control2.x,k.control2.y),L=new paper.Point(k.end.x,k.end.y);n.cubicCurveTo($,V,L)}else if(y.type===PathType.QUADRATIC_BEZIER){const k=y,$=new paper.Point(k.control.x,k.control.y),V=new paper.Point(k.end.x,k.end.y),L=r.multiply(1/3).add($.multiply(2/3)),z=V.multiply(1/3).add($.multiply(2/3));n.cubicCurveTo(L,z,V)}r.x=y.end.x,r.y=y.end.y}return n},mergePathsWithPrecision$1=e=>{if(e.length===0)return null;if(e.length===1)return e[0];paper.settings.precision=OVERLAP_REMOVAL_CONFIG$1.PATH_PRECISION;let n=e[0].clone();for(let r=1;r<e.length;r++){const g=e[r],y=n.unite(g);y&&y.area&&Math.abs(y.area)>OVERLAP_REMOVAL_CONFIG$1.MERGE_TOLERANCE&&(n=y)}return n},isAlreadyOptimized$1=e=>{if(e.length<=1)return!0;let n=!1;for(let r=0;r<e.length;r++){for(let g=r+1;g<e.length;g++){const y=e[r],k=e[g];let $=1/0,V=1/0,L=-1/0,z=-1/0,j=1/0,ae=1/0,re=-1/0,oe=-1/0;for(let ue=0;ue<y.length;ue++){const le=y[ue];$=Math.min($,le.start.x,le.end.x),V=Math.min(V,le.start.y,le.end.y),L=Math.max(L,le.start.x,le.end.x),z=Math.max(z,le.start.y,le.end.y)}for(let ue=0;ue<k.length;ue++){const le=k[ue];j=Math.min(j,le.start.x,le.end.x),ae=Math.min(ae,le.start.y,le.end.y),re=Math.max(re,le.start.x,le.end.x),oe=Math.max(oe,le.start.y,le.end.y)}if(L>=j&&re>=$&&z>=ae&&oe>=V){n=!0;break}}if(n)break}return!n},computeOverlapRemovedContours$1=()=>{for(let r=0;r<characters.value.length;r++){let g=characters.value[r],y=componentsToContours(orderedListWithItemsForCharacterFile(g),{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!1,!1,!1);if(isAlreadyOptimized$1(y)){g.overlap_removed_contours=y;continue}let k=[];for(let z=0;z<y.length;z++){const j=y[z];if(j.length===0)continue;const ae=createOptimizedPath$1(j);ae.closed||ae.closePath(),k.push(ae)}let $=mergePathsWithPrecision$1(k);if(!$||!$.curves||$.curves.length===0){g.overlap_removed_contours=y;continue}let V=[];const L=z=>{const j=[];if(z.children&&z.children.length>0){for(let ae=0;ae<z.children.length;ae++){const re=z.children[ae];if(re instanceof paper.Path){const oe=L(re);j.push(...oe)}}return j}if(z.curves&&z.curves.length>0){const ae=[];for(let re=0;re<z.curves.length;re++){const oe=z.curves[re];if(oe.points.length>=4){const ue={type:PathType.CUBIC_BEZIER,start:{x:oe.points[0].x,y:oe.points[0].y},control1:{x:oe.points[1].x,y:oe.points[1].y},control2:{x:oe.points[2].x,y:oe.points[2].y},end:{x:oe.points[3].x,y:oe.points[3].y}};ae.push(ue)}}ae.length>0&&j.push(ae)}return j};V=L($),V.length===0?g.overlap_removed_contours=y:g.overlap_removed_contours=V}},createFont$1=async()=>{const r=[{unicode:0,name:".notdef",contours:[[]],contourNum:0,advanceWidth:Math.max(1e3,1e3),leftSideBearing:0}];let g=!1;const y=1e3,k=800,$=-200;for(let L=0;L<characters.value.length;L++){const z=characters.value[L];let j=[[]];z.overlap_removed_contours?j=z.overlap_removed_contours:j=componentsToContours(orderedListWithItemsForCharacterFile(z),{unitsPerEm:y,descender:$,advanceWidth:y},{x:0,y:0},!1,!1,!1);const{text:ae,unicode:re}=z.character;r.push({name:ae,unicode:parseInt(re,16),advanceWidth:y,leftSideBearing:0,contours:j,contourNum:j.length}),ae===" "&&(g=!0)}return g||r.push({name:" ",unicode:parseInt("0x20",16),advanceWidth:y,leftSideBearing:0,contours:[[]],contourNum:0}),r.sort((L,z)=>L.unicode-z.unicode),await create(r,{familyName:"",styleName:"Regular",unitsPerEm:y,ascender:k,descender:$,tables:null})},executeScript$1=e=>{try{if(e._o&&e._o.tempData)return;const n=new CustomGlyph(e),r=n._glyph;for(let g=0;g<e.components.length;g++)e.components[g].type==="glyph"&&executeScript$1(e.components[g].value);window.glyph=n,constantsMap$1.update(constants$1.value),window.constantsMap=constantsMap$1;try{const g=getScript$1(e);new Function(`${g}
script_${e.uuid.replaceAll("-","_")} (glyph, constantsMap, FP)`)()}catch(g){console.error(g)}window.glyph=null,window.constantsMap=null}catch(n){console.warn(n)}},contoursToComponents=(e,n)=>e.map(g=>{const y=[];for(let k=0;k<g.length;k++){const $=g[k];switch(k===0&&y.push({uuid:genLightId(),x:$.start.x,y:$.start.y,type:"anchor",origin:null,isShow:!0}),$.type){case PathType.LINE:{const V={uuid:genLightId(),x:$.start.x,y:$.start.y,type:"control",origin:y[y.length-1].uuid,isShow:!0},L={uuid:genLightId(),x:$.end.x,y:$.end.y,type:"anchor",origin:null,isShow:!0},z={uuid:genLightId(),x:$.end.x,y:$.end.y,type:"control",origin:L.uuid,isShow:!0};y.push(V,z,L);break}case PathType.QUADRATIC_BEZIER:{const V={uuid:genLightId(),x:$.start.x+.6666666666666666*($.control.x-$.start.x),y:$.start.y+.6666666666666666*($.control.y-$.start.y),type:"control",origin:y[y.length-1].uuid,isShow:!0},L={uuid:genLightId(),x:$.end.x,y:$.end.y,type:"anchor",origin:null,isShow:!0},z={uuid:genLightId(),x:$.end.x+2/3*($.control.x-$.end.x),y:$.end.y+2/3*($.control.y-$.end.y),type:"control",origin:L.uuid,isShow:!0};y.push(V,z,L);break}case PathType.CUBIC_BEZIER:{const V={uuid:genLightId(),x:$.control1.x,y:$.control1.y,type:"control",origin:y[y.length-1].uuid,isShow:!0},L={uuid:genLightId(),x:$.end.x,y:$.end.y,type:"anchor",origin:null,isShow:!0},z={uuid:genLightId(),x:$.control2.x,y:$.control2.y,type:"control",origin:L.uuid,isShow:!0};y.push(V,z,L);break}}}return y.length&&(y[y.length-1].x!==y[0].x||y[y.length-1].x!==y[0].y)&&(y.push({uuid:genLightId(),x:y[y.length-1].x,y:y[y.length-1].y,type:"control",origin:y[y.length-1].uuid,isShow:!0}),y.push({uuid:genLightId(),x:y[0].x,y:y[0].y,type:"control",origin:y[0].uuid,isShow:!0}),y.push({uuid:genLightId(),x:y[0].x,y:y[0].y,type:"anchor",origin:y[0].uuid,isShow:!0})),genPenComponent(formatPoints(y,n,0),!0)}),formatPoints=(e,n,r)=>{const{unitsPerEm:g,descender:y,advanceWidth:k}=n;return r===0?e.map(V=>{let L=V.x+(g-k)/2,z=g-V.y;return z=z+y,L*=1,z*=1,{...V,x:L,y:z}}):r===1?e.map(V=>{let L=V.x*1,z=V.y*1;return L-=(g-k)/2,z=z-y,z=g-z,{...V,x:L,y:z}}):e},translate$1=(e,n)=>({x:e.x+n.x,y:e.y+n.y}),componentsToContours=(e,n,r={x:0,y:0},g=!1,y=!0,k=!1)=>{n&&!n.advanceWidth&&(n.advanceWidth=n.unitsPerEm);const $=n&&n.useSkeletonGrid||!1;let V=[];return e.map(L=>{if(!L?.usedInCharacter)return;let{x:z,y:j,w:ae,h:re,rotation:oe,flipX:ue,flipY:le}=L;switch(L.type){case"pen":{if(!L.value.contour||k){let de=transformPoints(L.value.points,{x:z,y:j,w:ae,h:re,rotation:oe,flipX:ue,flipY:le});de=de.map(xe=>{const Ie=translate$1(xe,r);return n.grid&&!$?computeCoords(n.grid,Ie):Ie});const he=formatPoints(de,n,1),_e=genPenContour(he),Ce=100/n.unitsPerEm,Ne=de.map(xe=>Object.assign({},xe,{x:xe.x*Ce,y:xe.y*Ce})),$e=genPenContour(Ne);L.value.preview=$e,L.value.contour=_e}y?V.push(L.value.preview):V.push(L.value.contour);break}case"polygon":{if(!L.value.contour||k){let de=transformPoints(L.value.points,{x:z,y:j,w:ae,h:re,rotation:oe,flipX:ue,flipY:le});de=de.map(xe=>{const Ie=translate$1(xe,r);return n.grid&&!$?computeCoords(n.grid,Ie):Ie});const he=formatPoints(de,n,1),_e=genPolygonContour(he);V.push(_e);const Ce=100/n.unitsPerEm,Ne=de.map(xe=>Object.assign({},xe,{x:xe.x*Ce,y:xe.y*Ce})),$e=genPolygonContour(Ne);L.value.preview=$e,L.value.contour=_e}y?V.push(L.value.preview):V.push(L.value.contour);break}case"rectangle":{if(!L.value.contour||k){const de=L.value;let he=transformPoints(getRectanglePoints(de.width,de.height,L.x,L.y),{x:z,y:j,w:ae,h:re,rotation:oe,flipX:ue,flipY:le});he=he.map(Ie=>{const ze=translate$1(Ie,r);return n.grid&&!$?computeCoords(n.grid,ze):ze});const _e=formatPoints(he,n,1),Ce=genRectangleContour(_e);V.push(Ce);const Ne=100/n.unitsPerEm,$e=he.map(Ie=>Object.assign({},Ie,{x:Ie.x*Ne,y:Ie.y*Ne})),xe=genRectangleContour($e);L.value.preview=xe,L.value.contour=Ce}y?V.push(L.value.preview):V.push(L.value.contour);break}case"ellipse":{if(!L.value.contour||k){const de=L.value;let he=getEllipsePoints(de.radiusX,de.radiusY,1e3,L.x+de.radiusX,L.y+de.radiusY),_e=transformPoints(he,{x:z,y:j,w:ae,h:re,rotation:oe,flipX:ue,flipY:le});_e=_e.map(ze=>{const qe=translate$1(ze,r);return n.grid&&!$?computeCoords(n.grid,qe):qe});const Ce=formatPoints(_e,n,1),Ne=genEllipseContour(Ce);V.push(Ne);const $e=100/n.unitsPerEm,xe=_e.map(ze=>Object.assign({},ze,{x:ze.x*$e,y:ze.y*$e})),Ie=genEllipseContour(xe);L.value.preview=Ie,L.value.contour=Ne}y?V.push(L.value.preview):V.push(L.value.contour);break}case"glyph-pen":{(!L.contour||!L.contour.length||k)&&(!n.grid||$?L.updateData(g,r):L.updateData(g,r,n.grid)),y?V.push(L.preview):V.push(L.contour);break}case"glyph-polygon":{(!L.contour||!L.contour.length||k)&&(!n.grid||$?L.updateData(g,r):L.updateData(g,r,n.grid)),y?V.push(L.preview):V.push(L.contour);break}case"glyph-rectangle":{(!L.contour||!L.contour.length||k)&&(!n.grid||$?L.updateData(g,r):L.updateData(g,r,n.grid)),y?V.push(L.preview):V.push(L.contour);break}case"glyph-ellipse":{(!L.contour||!L.contour.length||k)&&(!n.grid||$?L.updateData(g,r):L.updateData(g,r,n.grid)),y?V.push(L.preview):V.push(L.contour);break}case"glyph":{const{ox:de,oy:he}=L,_e=L.value;if((!_e._o||k)&&(n&&n.playground?executeScript$1(_e):n&&n.advancedEdit?executeScript$2(_e):executeScript(_e)),$&&n.grid&&_e._o?.getSkeleton){const Ce=_e._o.getSkeleton(),Ne={},$e=Object.keys(Ce);for(let qe=0;qe<$e.length;qe++){const Et=$e[qe],_n=Ce[Et],Dt={x:_n.x+r.x+de,y:_n.y+r.y+he};Ne[Et]=computeCoords(n.grid,Dt)}const xe=_e._o.getComponentsBySkeleton(Ne),Ie=orderedListWithItemsForGlyph(_e),ze=componentsToContours(xe.concat(Ie),n,{x:0,y:0},g,y,!0);V=V.concat(ze)}else{const Ce=componentsToContours(_e._o.components,n,{x:r.x+de,y:r.y+he},g,y,!0);V=V.concat(Ce)}break}default:{const de=[];V.push(de);break}}}),V},componentsToContours2=(e,n={x:0,y:0},r=!1,g=0)=>{let y=[];if(e.map(k=>{if(!k.usedInCharacter)return;let{x:$,y:V,w:L,h:z,rotation:j,flipX:ae,flipY:re}=k;switch(k.type){case"pen":{let oe=transformPoints(k.value.points,{x:$,y:V,w:L,h:z,rotation:j,flipX:ae,flipY:re});const ue=genPenContour(oe);y.push(ue);break}case"polygon":{let oe=transformPoints(k.value.points,{x:$,y:V,w:L,h:z,rotation:j,flipX:ae,flipY:re});const ue=genPolygonContour(oe);y.push(ue);break}case"rectangle":{const oe=k.value;let ue=transformPoints(getRectanglePoints(oe.width,oe.height,k.x,k.y),{x:$,y:V,w:L,h:z,rotation:j,flipX:ae,flipY:re});const le=genRectangleContour(ue);y.push(le);break}case"ellipse":{const oe=k.value;let ue=getEllipsePoints(oe.radiusX,oe.radiusY,1e3,k.x+oe.radiusX,k.y+oe.radiusY);const le=transformPoints(ue,{x:$,y:V,w:L,h:z,rotation:j,flipX:ae,flipY:re}),de=genEllipseContour(le);y.push(de);break}case"glyph-pen":{k.updateData2(),y.push(k.contour2);break}case"glyph-polygon":{k.updateData2(),y.push(k.contour2);break}case"glyph-rectangle":{k.updateData2(),y.push(k.contour);break}case"glyph-ellipse":{k.updateData2(),y.push(k.contour);break}case"glyph":{const{ox:oe,oy:ue}=k,le=k.value;le._o||executeScript(le);const de=componentsToContours2(le._o.components,{x:oe,y:ue},r,g);y=y.concat(de);break}default:{const oe=[];y.push(oe);break}}}),n.x||n.y){if(g===0)for(let $=0;$<y.length;$++){const V=y[$];for(let L=0;L<V.length;L++){const z=V[L];z.type===PathType.LINE?(z.start.x+=n.x*1,z.start.y-=n.y*1,z.end.x+=n.x*1,z.end.y-=n.y*1):z.type===PathType.QUADRATIC_BEZIER?(z.start.x+=n.x*1,z.start.y-=n.y*1,z.end.x+=n.x*1,z.end.y-=n.y*1,z.control.x+=n.x*1,z.control.y-=n.y*1):z.type===PathType.CUBIC_BEZIER&&(z.start.x+=n.x*1,z.start.y-=n.y*1,z.end.x+=n.x*1,z.end.y-=n.y*1,z.control1.x+=n.x*1,z.control1.y-=n.y*1,z.control2.x+=n.x*1,z.control2.y-=n.y*1)}}else if(g===1)for(let $=0;$<y.length;$++){const V=y[$];for(let L=0;L<V.length;L++){const z=V[L];z.type===PathType.LINE?(z.start.x+=n.x*1,z.start.y+=n.y*1,z.end.x+=n.x*1,z.end.y+=n.y*1):z.type===PathType.QUADRATIC_BEZIER?(z.start.x+=n.x*1,z.start.y+=n.y*1,z.end.x+=n.x*1,z.end.y+=n.y*1,z.control.x+=n.x*1,z.control.y-=n.y*1):z.type===PathType.CUBIC_BEZIER&&(z.start.x+=n.x*1,z.start.y+=n.y*1,z.end.x+=n.x*1,z.end.y+=n.y*1,z.control1.x+=n.x*1,z.control1.y+=n.y*1,z.control2.x+=n.x*1,z.control2.y+=n.y*1)}}}return y},genEllipseContour=e=>{const n=[];let r=fitCurve(e,2);if(r.length)for(let g=0;g<r.length;g++){const y=r[g];n.push({type:PathType.CUBIC_BEZIER,start:{x:y[0].x,y:y[0].y},end:{x:y[3].x,y:y[3].y},control1:{x:y[1].x,y:y[1].y},control2:{x:y[2].x,y:y[2].y}})}return n},genRectangleContour=e=>{const n=[];for(let r=0;r<e.length-1;r++)n.push({type:PathType.LINE,start:{x:e[r].x,y:e[r].y},end:{x:e[r+1].x,y:e[r+1].y}});return n},genPenContour=(e,n=!1)=>{const r=[];for(let g=0;g<e.length-1&&!(g+3>=e.length);g+=3)r.push({type:PathType.CUBIC_BEZIER,start:{x:e[g].x,y:e[g].y},end:{x:e[g+3].x,y:e[g+3].y},control1:{x:e[g+1].x,y:e[g+1].y},control2:{x:e[g+2].x,y:e[g+2].y},fill:n});return r},genPolygonContour=e=>{const n=[];for(let r=0;r<e.length-1;r++)n.push({type:PathType.LINE,start:{x:e[r].x,y:e[r].y},end:{x:e[r+1].x,y:e[r+1].y}});return n};class EllipseComponent{centerX;centerY;radiusX;radiusY;type="glyph-ellipse";usedInCharacter=!0;contour=[];contour2=[];preview=[];constructor(n,r,g,y){this.centerX=n,this.centerY=r,this.radiusX=g,this.radiusY=y}render(n,r={offset:{x:0,y:0},scale:1}){const g=r.scale,y=n.getContext("2d");y.strokeStyle="#000",y.lineWidth=getStrokeWidth(),y.translate(mapCanvasX(r.offset.x)*g,mapCanvasY(r.offset.y)*g),y.beginPath(),y.ellipse(mapCanvasX(this.centerX)*g,mapCanvasY(this.centerY)*g,mapCanvasX(this.radiusX)*g,mapCanvasY(this.radiusY)*g,0,0,Math.PI*2),y.stroke(),y.closePath(),y.setTransform(1,0,0,1,0,0)}render_grid(n,r={offset:{x:0,y:0},scale:1,grid:null}){const g=L=>({x:r.offset.x+L.x,y:r.offset.y+L.y});let y=getEllipsePoints(this.radiusX,this.radiusY,1e3,this.centerX+this.radiusX,this.centerY+this.radiusY);const k=r.scale,$=n.getContext("2d");$.strokeStyle="#000",$.lineWidth=getStrokeWidth(),$.beginPath();const V=computeCoords(r.grid,g({x:y[0].x,y:y[0].y}));$.moveTo(mapCanvasX(V.x)*k,mapCanvasY(V.y)*k);for(let L=1;L<y.length;L++){const{x:z,y:j}=computeCoords(r.grid,g({x:y[L].x,y:y[L].y}));$.lineTo(mapCanvasX(z)*k,mapCanvasY(j)*k)}$.lineTo(mapCanvasX(V.x)*k,mapCanvasY(V.y)*k),$.stroke(),$.closePath(),$.setTransform(1,0,0,1,0,0)}getData=()=>({centerX:this.centerX,centerY:this.centerY,radiusX:this.radiusX,radiusY:this.radiusY,usedInCharacter:this.usedInCharacter,contour:clone(this.contour),preview:clone(this.preview)});setData=n=>{this.centerX=n.centerX,this.centerY=n.centerY,this.radiusX=n.radiusX,this.radiusY=n.radiusY,this.type=n.type,this.usedInCharacter=n.usedInCharacter,n.contour&&(this.contour=clone(n.contour)),n.preview&&(this.preview=clone(n.preview))};updateData=(n=!0,r,g)=>{let y=getEllipsePoints(this.radiusX,this.radiusY,1e3,this.centerX,this.centerY);y=y.map(ae=>{const re=translate$1(ae,r);return g?computeCoords(g,re):re}),g&&(y=y.map(ae=>computeCoords(g,ae)));let k={unitsPerEm:1e3,descender:-200,advanceWidth:1e3};n||(k.unitsPerEm=selectedFile.value.fontSettings.unitsPerEm,k.descender=selectedFile.value.fontSettings.descender,k.advanceWidth=selectedFile.value.fontSettings.unitsPerEm);const $=formatPoints(y,k,1),V=genEllipseContour($),L=100/k.unitsPerEm,z=y.map(ae=>Object.assign({},ae,{x:ae.x*L,y:ae.y*L})),j=genEllipseContour(z);this.contour=V,this.preview=j};updateData2=()=>{const n=getEllipsePoints(this.radiusX,this.radiusY,1e3,this.centerX,this.centerY),r=genEllipseContour(n);this.contour2=r}}class Skeleton{skeleton=[];weight;pointer;constructor(n){this.skeleton=[],this.weight=n}moveTo(n,r){this.pointer={x:n,y:r}}lineTo(n,r){if(!this.pointer)return!1;this.skeleton.push({type:"line",start:{x:this.pointer.x,y:this.pointer.y},end:{x:n,y:r}}),this.pointer={x:n,y:r}}quadraticBezierTo(n,r,g,y){if(!this.pointer)return!1;this.skeleton.push({type:"quadratic-bezier",start:{x:this.pointer.x,y:this.pointer.y},control1:{x:n,y:r},end:{x:g,y}}),this.pointer={x:g,y}}cubicBezierTo(n,r,g,y,k,$){if(!this.pointer)return!1;this.skeleton.push({type:"cubic-bezier",start:{x:this.pointer.x,y:this.pointer.y},control1:{x:n,y:r},control2:{x:g,y},end:{x:k,y:$}}),this.pointer={x:k,y:$}}fitCurveTo(n){if(!this.pointer)return!1;fitCurve([this.pointer,...n],2).map(g=>{this.skeleton.push({type:"cubic-bezier",start:g[0],control1:g[1],control2:g[2],end:g[3]}),this.pointer={x:g[3].x,y:g[3].y}})}genComponent(){if(!this.skeleton.length)return null;const n=[],r=[];for(let y=0;y<this.skeleton.length;y++){const k=this.skeleton[y];if(k.type==="line"){let $=1;k.start.x===k.end.x&&(y>0&&y<this.skeleton.length-1?($=this.skeleton[y-1].start.x-this.skeleton[y+1].end.x,$/=Math.abs($)):y>0?($=this.skeleton[y-1].start.x-this.skeleton[y].start.x,$/=Math.abs($)):y<this.skeleton.length-1&&($=this.skeleton[y].start.x-this.skeleton[y+1].end.x,$/=Math.abs($)));const V=-(k.start.y-k.end.y)/(k.start.x-k.end.x)*$,L=Math.atan(V),z={type:"line",start:{x:k.start.x-this.weight/2*Math.sin(L),y:k.start.y-this.weight/2*Math.cos(L)},end:{x:k.end.x-this.weight/2*Math.sin(L),y:k.end.y-this.weight/2*Math.cos(L)},k1:V},j={type:"line",start:{x:k.start.x+this.weight/2*Math.sin(L),y:k.start.y+this.weight/2*Math.cos(L)},end:{x:k.end.x+this.weight/2*Math.sin(L),y:k.end.y+this.weight/2*Math.cos(L)},k1:V};k.start.x===k.end.x?y===0?this.skeleton.length>1&&this.skeleton[y+1].end.x-k.end.x<=0?(n.push(j),r.push(z)):(n.push(z),r.push(j)):this.skeleton[y-1].start.x-k.start.x<=0?(n.push(z),r.push(j)):(n.push(j),r.push(z)):k.start.x-k.end.x<0?(n.push(z),r.push(j)):(n.push(j),r.push(z))}else if(k.type==="quadratic-bezier"){const $=[k.start,k.control1,k.control1,k.end];addContours($,n,r,[{pos:0,weight:this.weight},{pos:1,weight:this.weight}])}else if(k.type==="cubic-bezier"){const $=[k.start,k.control1,k.control2,k.end];addContours($,n,r,[{pos:0,weight:this.weight},{pos:1,weight:this.weight}])}}const g=new PenComponent;g.beginPath(),g.moveTo(n[0].start.x,n[0].start.y);for(let y=0;y<n.length;y++){const k=n[y];if(k.type==="line")if(y<n.length-1){const $=n[y+1],V=intersection(k.k1,k.start.x,getCoordY(k.start.y),$.k1,$.start.x,getCoordY($.start.y));g.lineTo(V.x,getCanvasY(V.y))}else g.lineTo(k.end.x,k.end.y);else if(k.type==="quadratic-bezier")if(y<n.length-1){const $=n[y+1],V=intersection(k.k2,k.end.x,getCoordY(k.end.y),$.k1,$.start.x,getCoordY($.start.y));g.quadraticBezierTo(k.control1.x,k.control1.y,V.x,getCanvasY(V.y))}else g.quadraticBezierTo(k.control1.x,k.control1.y,k.end.x,k.end.y);else if(k.type==="cubic-bezier")if(y<n.length-1){const $=n[y+1],V=intersection(k.k3,k.end.x,getCoordY(k.end.y),$.k1,$.start.x,getCoordY($.start.y));g.bezierTo(k.control1.x,k.control1.y,k.control2.x,k.control2.y,V.x,getCanvasY(V.y))}else g.bezierTo(k.control1.x,k.control1.y,k.control2.x,k.control2.y,k.end.x,k.end.y)}g.lineTo(r[r.length-1].end.x,r[r.length-1].end.y);for(let y=r.length-1;y>=0;y--){const k=r[y];if(k.type==="line")if(y>0){const $=r[y-1],V=$.k3?$.k3:$.k2?$.k2:$.k1,L=intersection(k.k1,k.start.x,getCoordY(k.start.y),V,$.end.x,getCoordY($.end.y));g.lineTo(L.x,getCanvasY(L.y))}else g.lineTo(k.start.x,k.start.y);else if(k.type==="quadratic-bezier")if(y>0){const $=r[y-1],V=$.k3?$.k3:$.k2?$.k2:$.k1,L=intersection(k.k1,k.start.x,getCoordY(k.start.y),V,$.end.x,getCoordY($.end.y));g.quadraticBezierTo(k.control1.x,k.control1.y,L.x,getCanvasY(L.y))}else g.quadraticBezierTo(k.control1.x,k.control1.y,k.start.x,k.start.y);else if(k.type==="cubic-bezier")if(y>0){const $=r[y-1],V=$.k3?$.k3:$.k2?$.k2:$.k1,L=intersection(k.k1,k.start.x,getCoordY(k.start.y),V,$.end.x,getCoordY($.end.y));g.bezierTo(k.control2.x,k.control2.y,k.control1.x,k.control1.y,L.x,getCanvasY(L.y))}else g.bezierTo(k.control2.x,k.control2.y,k.control1.x,k.control1.y,k.start.x,k.start.y)}return g.lineTo(n[0].start.x,n[0].start.y),g.closePath(),g}setweight(n){this.weight=n}getWeight(){return this.weight}static getContours(n,r){const g=[],y=[];return addContours(n,g,y,r),{contour1:g,contour2:y}}}const intersection=(e,n,r,g,y,k)=>{if(e===1/0||e===-1/0){const L=n,z=g*(L-y)+k;return{x:L,y:z}}else if(g===1/0||g===-1/0){const L=y,z=e*(L-n)+r;return{x:L,y:z}}const $=(k-r+(e*n-g*y))/(e-g),V=(-e*k+g*r+(y-n)*e*g)/(g-e);return{x:$,y:V}},getCoordY=e=>-(e-250),getCanvasY=e=>-e+250,addContours=(e,n,r,g)=>{const y=[],k=[];let V=bezierCurve.q(e,0),L=bezierCurve.qprime(e,0),z=Math.atan(-L.y/L.x);const j=g.sort((le,de)=>le.pos-de.pos),ae=[];let re=0;for(let le=0;le<j.length;le++){const{pos:de,weight:he}=j[le];if(de<1&&le<j.length-1){const{pos:_e,weight:Ce}=j[le+1];de===0&&(re=he);for(let Ne=Math.round(1e3*de);Ne<Math.round(1e3*_e);Ne++)ae[Ne]=re+(Ce-re)/Math.round(1e3*(_e-de))*(Ne-Math.round(1e3*de));re=ae[ae.length-1]}else for(let _e=Math.round(1e3*de);_e<1e3;_e++)ae[_e]=he}for(let le=1;le<1e3;le++){const de=ae[le],he=bezierCurve.q(e,le/1e3),_e=bezierCurve.qprime(e,le/1e3),Ce=Math.atan(-_e.y/_e.x);z<=0||he.y-V.y<0?(y.push({x:V.x-de/2*Math.sin(z),y:V.y-de/2*Math.cos(z)}),k.push({x:V.x+de/2*Math.sin(z),y:V.y+de/2*Math.cos(z)})):(k.push({x:V.x-de/2*Math.sin(z),y:V.y-de/2*Math.cos(z)}),y.push({x:V.x+de/2*Math.sin(z),y:V.y+de/2*Math.cos(z)})),V=he,L=_e,z=Ce}const oe=fitCurve(y,2),ue=fitCurve(k,2);oe.map(le=>{const de=-(le[0].y-le[1].y)/(le[0].x-le[1].x),he=-(le[2].y-le[3].y)/(le[2].x-le[3].x),_e=-(le[1].y-le[2].y)/(le[1].x-le[2].x),Ce={type:"cubic-bezier",start:le[0],control1:le[1],control2:le[2],end:le[3],k1:de,k2:he,k3:_e};n.push(Ce)}),ue.map(le=>{const de=-(le[0].y-le[1].y)/(le[0].x-le[1].x),he=-(le[2].y-le[3].y)/(le[2].x-le[3].x),_e=-(le[1].y-le[2].y)/(le[1].x-le[2].x),Ce={type:"cubic-bezier",start:le[0],control1:le[1],control2:le[2],end:le[3],k1:de,k2:he,k3:_e};r.push(Ce)})};class Character{_character;constructor(n){this._character=n,n._o=this}getComponent(n){for(let r=0;r<this._character.components.length;r++)if(this._character.components[r].name===n)return this._character.components[r];return null}getGlyph(n){for(let r=0;r<this._character.components.length;r++)if(this._character.components[r].name===n)return this._character.components[r].value._o;return null}getLayoutByID(n){if(this._character.info&&this._character.info.layoutTree){const r=this._character.info.layoutTree;return getNodeByID(n,r)}return null}getCoords(n,r,g,y){const k=n.rect,{x:$,y:V,w:L,h:z}=k,j=$+L/y*r,ae=V+z/y*g;return{x:j,y:ae}}getRatioCoords(n,r,g,y){const{dx:k,dy:$,size:V,centerSquareSize:L}=this._character.info.gridSettings,z=Math.round((V-L)/2)+k,j=Math.round((V-L)/2+L)+k,ae=Math.round((V-L)/2)+$,re=Math.round((V-L)/2+L)+$;return getRatioCoords(n,r,g,y,{x1:z,x2:j,y1:ae,y2:re,l:V})}getRatioLayout(n){return getCharacterRatioLayout(this._character,n)}}const getNodeByID=(e,n)=>{for(let r=0;r<n.length;r++){const g=n[r];if(g.id===e)return g;if(g.children){const y=getNodeByID(e,g.children);if(y)return y}}return null},getLineContours=(e,n,r,g)=>{let y=!1,k="center";g&&g.unticlockwise&&(y=g.unticlockwise),g&&g.skeletonPos&&(k=g.skeletonPos);const $=n[`${e}_start`],V=n[`${e}_end`],L=Math.atan2(V.y-$.y,V.x-$.x),z={};return k==="center"&&!y?(z[`out_${e}_start`]={x:$.x+r/2*Math.sin(L),y:$.y-r/2*Math.cos(L)},z[`in_${e}_start`]={x:$.x-r/2*Math.sin(L),y:$.y+r/2*Math.cos(L)},z[`out_${e}_end`]={x:V.x+r/2*Math.sin(L),y:V.y-r/2*Math.cos(L)},z[`in_${e}_end`]={x:V.x-r/2*Math.sin(L),y:V.y+r/2*Math.cos(L)}):k==="center"&&y?(z[`out_${e}_start`]={x:$.x-r/2*Math.sin(L),y:$.y+r/2*Math.cos(L)},z[`in_${e}_start`]={x:$.x+r/2*Math.sin(L),y:$.y-r/2*Math.cos(L)},z[`out_${e}_end`]={x:V.x-r/2*Math.sin(L),y:V.y+r/2*Math.cos(L)},z[`in_${e}_end`]={x:V.x+r/2*Math.sin(L),y:V.y-r/2*Math.cos(L)}):k==="inner"&&!y&&(z[`out_${e}_start`]={x:$.x+r*Math.sin(L),y:$.y-r*Math.cos(L)},z[`in_${e}_start`]={x:$.x,y:$.y},z[`out_${e}_end`]={x:V.x+r*Math.sin(L),y:V.y-r*Math.cos(L)},z[`in_${e}_end`]={x:V.x,y:V.y}),z},getCurveContours=(e,n,r,g)=>{let y=!1,k="center";g&&g.unticlockwise&&(y=g.unticlockwise),g&&g.skeletonPos&&(k=g.skeletonPos);const $=[n[`${e}_start`],{x:n[`${e}_start`].x+2/3*(n[`${e}_bend`].x-n[`${e}_start`].x),y:n[`${e}_start`].y+2/3*(n[`${e}_bend`].y-n[`${e}_start`].y)},{x:n[`${e}_end`].x+2/3*(n[`${e}_bend`].x-n[`${e}_end`].x),y:n[`${e}_end`].y+2/3*(n[`${e}_bend`].y-n[`${e}_end`].y)},n[`${e}_end`]],V=[],L=[],z=100,j=[];for(let he=0;he<=z&&g;he++)if(g.weightsVariation==="linear")if(g.weightsVariationDir==="reverse"){const Ce=(z-he)/z;j.push(r*Ce)}else{const _e=he/z;j.push(r*_e)}else if(g.weightsVariation==="pow")if(g.weightsVariationDir==="reverse"){const _e=z-he,Ce=Math.pow(_e/z,g.weightsVariationPower);j.push(r*Ce)}else{const _e=Math.pow(he/z,g.weightsVariationPower);j.push(r*_e)}let ae=bezierCurve.q($,0),re=bezierCurve.qprime($,0),oe=Math.atan2(re.y,re.x);for(let he=1;he<=z+1;he++){let _e=ae,Ce=re,Ne=oe;const $e=j.length?j[he-1]:r;he<z+1&&(_e=bezierCurve.q($,he/z),Ce=bezierCurve.qprime($,he/z),Ne=Math.atan2(Ce.y,Ce.x)),k==="center"&&!y?(V.push({x:ae.x+$e/2*Math.sin(oe),y:ae.y-$e/2*Math.cos(oe)}),L.push({x:ae.x-$e/2*Math.sin(oe),y:ae.y+$e/2*Math.cos(oe)})):k==="inner"&&!y?(V.push({x:ae.x+$e*Math.sin(oe),y:ae.y-$e*Math.cos(oe)}),L.push({x:ae.x,y:ae.y})):k==="center"&&y?(V.push({x:ae.x-$e/2*Math.sin(oe),y:ae.y+$e/2*Math.cos(oe)}),L.push({x:ae.x+$e/2*Math.sin(oe),y:ae.y-$e/2*Math.cos(oe)})):k==="inner"&&y&&(V.push({x:ae.x-$e*Math.sin(oe),y:ae.y+$e*Math.cos(oe)}),L.push({x:ae.x,y:ae.y})),ae=_e,re=Ce,oe=Ne}const{curves:ue}=fitCurvesByPoints(V),{curves:le}=fitCurvesByPoints(L),de={};return de[`out_${e}_points`]=V,de[`in_${e}_points`]=L,de[`out_${e}_curves`]=ue,de[`in_${e}_curves`]=le,de},getIntersection=(e,n)=>{let r=null,g=null,y=null,k=null;if(e.type==="line"?y=e:e.type==="curve"&&(r=e),n.type==="line"?y?k=n:y=n:n.type==="curve"&&(r?g=n:r=n),g)for(let $=0;$<r.points.length-1;$++){const V=r.points[$],L=r.points[$+1];for(let z=0;z<g.points.length-1;z++){const j=g.points[z],ae=g.points[z+1],re=calculateIntersection(V,L,j,ae);if(re)return{corner:re,corner_index:[$,z]}}}else{if(k)return{corner:calculateLineIntersection(y.start,y.end,k.start,k.end),corner_index:0};if(y&&r){let $=r.points[0];for(let V=1;V<r.points.length;V++){const L=r.points[V],z=calculateIntersection($,L,y.start,y.end);if(z)return{corner:z,corner_index:V}}}}return{corner:null,corner_index:0}},calculateIntersection=(e,n,r,g)=>{const y=(g.y-r.y)*(n.x-e.x)-(g.x-r.x)*(n.y-e.y);if(y===0)return n;const k=((g.x-r.x)*(e.y-r.y)-(g.y-r.y)*(e.x-r.x))/y,$=((n.x-e.x)*(e.y-r.y)-(n.y-e.y)*(e.x-r.x))/y;return k>=0&&k<=1&&$>=0&&$<=1?{x:e.x+k*(n.x-e.x),y:e.y+k*(n.y-e.y)}:null},calculateLineIntersection=(e,n,r,g)=>{const y=(g.y-r.y)*(n.x-e.x)-(g.x-r.x)*(n.y-e.y);if(y===0)return n;const k=((g.x-r.x)*(e.y-r.y)-(g.y-r.y)*(e.x-r.x))/y;return((n.x-e.x)*(e.y-r.y)-(n.y-e.y)*(e.x-r.x))/y,{x:e.x+k*(n.x-e.x),y:e.y+k*(n.y-e.y)}},fitCurvesByPoints=e=>{const n=fitCurve(e,3.5),r=[];for(let g=0;g<n.length;g++){const y=n[g];r.push({start:y[0],control1:y[1],control2:y[2],end:y[3]})}return{curves:r}},distance$f=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getRadiusPointsOnCurve=(e,n,r=!1)=>{let g=0,y=clone(e);if(r&&y.reverse(),!n){const{curves:z}=fitCurvesByPoints(y);z[0].start,z[0].control1,z[0].control2,z[0].end;const j=bezierCurve.qprime(getBezierCurve(z[0]),0),ae=Math.atan2(j.y,j.x),re={start:y[0],end:{x:y[0].x+Math.cos(ae)*100,y:y[0].y+Math.sin(ae)*100}};return{point:y[0],index:0,tangent:re,final_curves:r?reverseCurves(z):z}}for(let z=1;z<y.length;z++)if(g+=distance$f(y[z],y[z-1]),g>=n){const{curves:j}=fitCurvesByPoints(y.slice(z));j[0].start,j[0].control1,j[0].control2,j[0].end;const ae=bezierCurve.qprime(getBezierCurve(j[0]),0),re=Math.atan2(ae.y,ae.x),oe={start:y[z],end:{x:y[z].x+Math.cos(re)*100,y:y[z].y+Math.sin(re)*100}};return{point:y[z],index:z,tangent:oe,final_curves:r?reverseCurves(j):j}}const{curves:k}=fitCurvesByPoints(y);k[0].start,k[0].control1,k[0].control2,k[0].end;const $=bezierCurve.qprime(getBezierCurve(k[0]),0),V=Math.atan2($.y,$.x),L={start:y[y.length-1],end:{x:y[y.length-1].x+Math.cos(V)*100,y:y[y.length-1].y+Math.sin(V)*100}};return{point:y[y.length-1],index:y.length-1,tangent:L,final_curves:r?reverseCurves(k):k}},reverseCurves=e=>{const n=[];for(let r=e.length-1;r>=0;r--){const g={start:e[r].end,control1:e[r].control2,control2:e[r].control1,end:e[r].start};n.push(g)}return n},getBezierCurve=e=>[e.start,e.control1,e.control2,e.end],getCurvesPoints=e=>{const r=[];for(let g=0;g<e.length;g++){const y=e[g],k=[y.start,y.control1,y.control2,y.end];for(let $=0;$<=100;$++){const V=bezierCurve.q(k,$/100);r.push(V)}}return r},getTurnAngles=(e,n,r)=>{const g=Math.atan2(e.y-n.y,n.x-e.x),y=Math.atan2(r.y-n.y,n.x-r.x),k=y-g,$=g+k/2;return{angle1:g,angle2:y,inner_angle:k,mid_angle:$}},distanceAndFootPoint=(e,n,r)=>{const{x:g,y}=e,{x:k,y:$}=n,{x:V,y:L}=r,z=k-g,j=$-y,ae=Math.sqrt(z**2+j**2);let re,oe,ue;if(g===k){let Ie=L;const ze=Math.min(y,$),qe=Math.max(y,$),Et=Ie>=ze&&Ie<=qe;Et||(Ie=Ie<ze?ze:qe),re={x:g,y:Ie},oe=Et?null:{x:V,y:Ie};const _n=Math.abs(Ie-y);return ue=ae===0?0:_n/Math.abs($-y),ue=Math.min(1,Math.max(0,ue)),{distance:Math.abs(V-g),footPoint:re,newC:oe,percentageFromA:ue}}if(y===$){let Ie=V;const ze=Math.min(g,k),qe=Math.max(g,k),Et=Ie>=ze&&Ie<=qe;Et||(Ie=Ie<ze?ze:qe),re={x:Ie,y},oe=Et?null:{x:Ie,y:L};const _n=Math.abs(Ie-g);return ue=ae===0?0:_n/Math.abs(k-g),ue=Math.min(1,Math.max(0,ue)),{distance:Math.abs(L-y),footPoint:re,newC:oe,percentageFromA:ue}}const le=($-y)/(k-g),de=-1/le,he=(le*g-y+L-de*V)/(le-de),_e=le*(he-g)+y,Ce=he>=Math.min(g,k)&&he<=Math.max(g,k)&&_e>=Math.min(y,$)&&_e<=Math.max(y,$);if(Ce)re={x:he,y:_e};else{const Ie=Math.sqrt((he-g)**2+(_e-y)**2),ze=Math.sqrt((he-k)**2+(_e-$)**2);re=Ie<ze?{x:g,y}:{x:k,y:$}}oe=Ce?null:{x:V+(re.x-he),y:L+(re.y-_e)};const Ne=re.x-g,$e=re.y-y,xe=Math.sqrt(Ne**2+$e**2);return ue=ae===0?0:xe/ae,ue=Math.min(1,Math.max(0,ue)),{distance:Math.sqrt((he-V)**2+(_e-L)**2),footPoint:re,newC:oe,percentageFromA:ue}},turnLeft=(e,n,r)=>{const g=Math.atan2(e.y-n.y,n.x-e.x);return{x:n.x-r*Math.sin(g),y:n.y-r*Math.cos(g)}},turnRight=(e,n,r)=>{const g=Math.atan2(e.y-n.y,n.x-e.x);return{x:n.x+r*Math.sin(g),y:n.y+r*Math.cos(g)}},goStraight=(e,n,r)=>{const g=Math.atan2(e.y-n.y,n.x-e.x);return{x:n.x+r*Math.cos(g),y:n.y-r*Math.sin(g)}},turnAngle=(e,n,r,g)=>(Math.atan2(e.y-n.y,n.x-e.x),{x:e.x+g*Math.cos(r),y:e.y-g*Math.sin(r)}),getPointOnLine=(e,n,r)=>{const g=Math.atan2(e.y-n.y,n.x-e.x);return{x:e.x+r*Math.cos(g),y:e.y-r*Math.sin(g)}},getPointOnLineByPercentage=(e,n,r)=>({x:e.x+r*(n.x-e.x),y:e.y+r*(n.y-e.y)}),isPointOnLineSegment=(e,n,r)=>{const{x:g,y}=e,{x:k,y:$}=n,{x:V,y:L}=r,z=Math.sqrt((g-k)**2+(y-$)**2),j=Math.sqrt((g-V)**2+(y-L)**2),ae=Math.sqrt((V-k)**2+(L-$)**2);return Math.abs(z+j-ae)<1e-10},FP={EllipseComponent,PenComponent,PolygonComponent,RectangleComponent,Skeleton,Joint,Character,fitCurve,getLineContours,getCurveContours,getIntersection,fitCurvesByPoints,getRadiusPointsOnCurve,distance:distance$f,getCurvesPoints,getTurnAngles,distanceAndFootPoint,turnLeft,turnRight,goStraight,turnAngle,getPointOnLine,getPointOnLineByPercentage,isPointOnLineSegment},refline=(e,n,r)=>{const g={name:`${e.name}-${n.name}`,start:e.name,end:n.name};return r&&(g.type=r),g},range=(e,n)=>e<n.min?n.min:e>n.max?n.max:e,skeletonToBones_na=e=>{const n=[],{start:r,bend:g,end:y}=e,k=maxSegment;for(let $=0;$<k;$++){const V=$/k,L=($+1)/k,z=quadraticBezierPoint$e(r,g,y,V),j=quadraticBezierPoint$e(r,g,y,L),ae={id:`segment_${$}`,start:z,end:j,length:Math.sqrt((j.x-z.x)**2+(j.y-z.y)**2),uAxis:normalize$t({x:j.x-z.x,y:j.y-z.y}),vAxis:normalize$t({x:-(j.y-z.y),y:j.x-z.x}),children:[],bindMatrix:createIdentityMatrix$t(),currentMatrix:createIdentityMatrix$t()};$>0&&(ae.parent=`segment_${$-1}`,n[$-1].children.push(ae.id)),n.push(ae)}return n},normalize$t=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$t=()=>[1,0,0,1,0,0],quadraticBezierPoint$e=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_na=e=>{const n=new CustomGlyph(e),r={horizonalSpan:n.getParam(""),verticalSpan:n.getParam(""),bendCursor:n.getParam(""),bendDegree:Number(n.getParam(""))+30*Number(n.getParam("")),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$v(r,n)},bindSkeletonGlyph_na=e=>{e._o||instanceBasicGlyph_na(e),glyphSkeletonBind(e._o)},distance$e=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend$f=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x+r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$-g*Math.sin(L),y:V+g*Math.cos(L)}},updateGlyphByParams$v=(e,n)=>{const{horizonalSpan:r,verticalSpan:g,bendCursor:y,bendDegree:k}=e,{ox:$,oy:V}=n._glyph.skeleton,L=250+$||0,z=250+V||0,j=new FP.Joint("start",{x:L,y:z}),ae=new FP.Joint("end",{x:j.x+r,y:j.y+g});distance$e(j,ae);const re=j.x+y*r,oe=j.y+y*g,ue=Math.atan2(g,r),le=new FP.Joint("bend",{x:re-k*Math.sin(ue),y:oe+k*Math.cos(ue)});n.addJoint(j),n.addJoint(ae),n.addJoint(le);const de={start:j,bend:le,end:ae};n.addRefLine(refline(j,le)),n.addRefLine(refline(le,ae)),n.getSkeleton=()=>de},computeParamsByJoints$v=(e,n)=>{const{start:r,end:g,bend:y}=e,k=n.getParamRange(""),$=n.getParamRange(""),V=n.getParamRange(""),L=n.getParamRange(""),z=range(g.x-r.x,k),j=range(g.y-r.y,$),ae=FP.distanceAndFootPoint(r,g,y),re=range(ae.percentageFromA,V),oe=range(ae.distance,L);return{horizonalSpan:z,verticalSpan:j,bendCursor:re,bendDegree:oe,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_na=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"bend":{$.bend={x:e.tempData.bend.x+y,y:e.tempData.bend.y+k};break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};const V=getBend$f($.start,$.end,e.tempData.bendCursor,e.tempData.bendDegree);$.bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+30*Number(e.getParam("")),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$v(g,e);updateGlyphByParams$v(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$v(g,e);updateGlyphByParams$v(y,e),e.setParam("",y.horizonalSpan),e.setParam("",y.verticalSpan),e.setParam("",y.bendCursor),e.setParam("",y.bendDegree-30*Number(e.getParam(""))),e.tempData=null}},updateSkeletonListener_after_bind_na=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"bend":{$.bend={x:e.tempData.bend.x+y,y:e.tempData.bend.y+k};break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};const V=getBend$f($.start,$.end,e.tempData.bendCursor,e.tempData.bendDegree);$.bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+30*Number(e.getParam("")),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$v(g,e);updateGlyphByParams$v(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$v(g,e);updateGlyphByParams$v(y,e),updateSkeletonTransformation(e),e.setParam("",y.horizonalSpan),e.setParam("",y.verticalSpan),e.setParam("",y.bendCursor),e.setParam("",y.bendDegree-30*Number(e.getParam(""))),e.tempData=null}},skeletonToBones_dian=e=>{const n=[],{start:r,bend:g,end:y}=e,k=maxSegment;for(let $=0;$<k;$++){const V=$/k,L=($+1)/k,z=quadraticBezierPoint$d(r,g,y,V),j=quadraticBezierPoint$d(r,g,y,L),ae={id:`segment_${$}`,start:z,end:j,length:Math.sqrt((j.x-z.x)**2+(j.y-z.y)**2),uAxis:normalize$s({x:j.x-z.x,y:j.y-z.y}),vAxis:normalize$s({x:-(j.y-z.y),y:j.x-z.x}),children:[],bindMatrix:createIdentityMatrix$s(),currentMatrix:createIdentityMatrix$s()};$>0&&(ae.parent=`segment_${$-1}`,n[$-1].children.push(ae.id)),n.push(ae)}return n},normalize$s=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$s=()=>[1,0,0,1,0,0],quadraticBezierPoint$d=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_dian=e=>{const n=new CustomGlyph(e),r={horizonalSpan:n.getParam(""),verticalSpan:n.getParam(""),bendCursor:n.getParam(""),bendDegree:Number(n.getParam(""))+10*Number(n.getParam("")||1),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$u(r,n)},bindSkeletonGlyph_dian=e=>{e._o||instanceBasicGlyph_dian(e),glyphSkeletonBind(e._o)},distance$d=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend$e=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x+r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$+g*Math.sin(L),y:V+g*Math.cos(L)}},updateGlyphByParams$u=(e,n)=>{const{horizonalSpan:r,verticalSpan:g,bendCursor:y,bendDegree:k,skeletonRefPos:$,weight:V}=e,{ox:L,oy:z}=n._glyph.skeleton,j=450+L||0,ae=425+z||0,re=new FP.Joint("start",{x:j,y:ae}),oe=new FP.Joint("end",{x:re.x+r,y:re.y+g});distance$d(re,oe);const ue=re.x+y*r,le=re.y+y*g,de=Math.atan2(g,r),he=new FP.Joint("bend",{x:ue+k*Math.sin(de),y:le-k*Math.cos(de)}),_e={start:re,bend:he,end:oe};n.addJoint(re),n.addJoint(oe),n.addJoint(he),n.addRefLine(refline(re,he)),n.addRefLine(refline(he,oe)),n.getSkeleton=()=>_e},computeParamsByJoints$u=(e,n)=>{const{start:r,end:g,bend:y}=e,k=n.getParamRange(""),$=n.getParamRange(""),V=n.getParamRange(""),L=n.getParamRange(""),z=range(g.x-r.x,k),j=range(g.y-r.y,$),ae=FP.distanceAndFootPoint(r,g,y),re=range(ae.percentageFromA,V),oe=range(ae.distance,L);return{horizonalSpan:z,verticalSpan:j,bendCursor:re,bendDegree:oe,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_dian=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"bend":{$.bend={x:e.tempData.bend.x+y,y:e.tempData.bend.y+k};break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};const V=getBend$e($.start,$.end,e.tempData.bendCursor,e.tempData.bendDegree);$.bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+10*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$u(g,e);updateGlyphByParams$u(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$u(g,e);updateGlyphByParams$u(y,e),e.setParam("",y.horizonalSpan),e.setParam("",y.verticalSpan),e.setParam("",y.bendCursor),e.setParam("",y.bendDegree-10*Number(e.getParam("")||1)),e.tempData=null}},updateSkeletonListener_after_bind_dian=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"bend":{$.bend={x:e.tempData.bend.x+y,y:e.tempData.bend.y+k};break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};const V=getBend$e($.start,$.end,e.tempData.bendCursor,e.tempData.bendDegree);$.bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+10*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$u(g,e);updateGlyphByParams$u(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$u(g,e);updateGlyphByParams$u(y,e),updateSkeletonTransformation(e),e.setParam("",y.horizonalSpan),e.setParam("",y.verticalSpan),e.setParam("",y.bendCursor),e.setParam("",y.bendDegree-10*Number(e.getParam("")||1)),e.tempData=null}},skeletonToBones_tiao=e=>{const n=[],{start:r,bend:g,end:y}=e,k=maxSegment;for(let $=0;$<k;$++){const V=$/k,L=($+1)/k,z=quadraticBezierPoint$c(r,g,y,V),j=quadraticBezierPoint$c(r,g,y,L),ae={id:`segment_${$}`,start:z,end:j,length:Math.sqrt((j.x-z.x)**2+(j.y-z.y)**2),uAxis:normalize$r({x:j.x-z.x,y:j.y-z.y}),vAxis:normalize$r({x:-(j.y-z.y),y:j.x-z.x}),children:[],bindMatrix:createIdentityMatrix$r(),currentMatrix:createIdentityMatrix$r()};$>0&&(ae.parent=`segment_${$-1}`,n[$-1].children.push(ae.id)),n.push(ae)}return n},normalize$r=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$r=()=>[1,0,0,1,0,0],quadraticBezierPoint$c=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_tiao=e=>{const n=new CustomGlyph(e),r={horizonalSpan:n.getParam(""),verticalSpan:n.getParam(""),bendCursor:n.getParam(""),bendDegree:Number(n.getParam(""))+10*Number(n.getParam("")||1),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$t(r,n)},bindSkeletonGlyph_tiao=e=>{e._o||instanceBasicGlyph_tiao(e),glyphSkeletonBind(e._o)},distance$c=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend$d=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x+r*y,V=e.y-r*k,L=Math.atan2(k,y);return{x:$-g*Math.sin(L),y:V-g*Math.cos(L)}},updateGlyphByParams$t=(e,n)=>{const{horizonalSpan:r,verticalSpan:g,bendCursor:y,bendDegree:k}=e,{ox:$,oy:V}=n._glyph.skeleton,L=400+$||0,z=600+V||0,j=new FP.Joint("start",{x:L,y:z}),ae=new FP.Joint("end",{x:j.x+r,y:j.y-g});distance$c(j,ae);const re=j.x+y*r,oe=j.y-y*g,ue=Math.atan2(g,r),le=new FP.Joint("bend",{x:re-k*Math.sin(ue),y:oe-k*Math.cos(ue)});n.addJoint(j),n.addJoint(ae),n.addJoint(le);const de={start:j,bend:le,end:ae};n.addRefLine(refline(j,le)),n.addRefLine(refline(le,ae)),n.getSkeleton=()=>de},computeParamsByJoints$t=(e,n)=>{const{start:r,end:g,bend:y}=e,k=n.getParamRange(""),$=n.getParamRange(""),V=n.getParamRange(""),L=n.getParamRange(""),z=range(g.x-r.x,k),j=range(r.y-g.y,$),ae=FP.distanceAndFootPoint(r,g,y),re=range(ae.percentageFromA,V),oe=range(ae.distance,L);return{horizonalSpan:z,verticalSpan:j,bendCursor:re,bendDegree:oe,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_tiao=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"bend":{$.bend={x:e.tempData.bend.x+y,y:e.tempData.bend.y+k};break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};const V=getBend$d($.start,$.end,e.tempData.bendCursor,e.tempData.bendDegree);$.bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+10*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$t(g,e);updateGlyphByParams$t(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$t(g,e);updateGlyphByParams$t(y,e),e.setParam("",y.horizonalSpan),e.setParam("",y.verticalSpan),e.setParam("",y.bendCursor),e.setParam("",y.bendDegree-10*Number(e.getParam("")||1)),e.tempData=null}},updateSkeletonListener_after_bind_tiao=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"bend":{$.bend={x:e.tempData.bend.x+y,y:e.tempData.bend.y+k};break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};const V=getBend$d($.start,$.end,e.tempData.bendCursor,e.tempData.bendDegree);$.bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+10*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$t(g,e);updateGlyphByParams$t(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$t(g,e);updateGlyphByParams$t(y,e),updateSkeletonTransformation(e),e.setParam("",y.horizonalSpan),e.setParam("",y.verticalSpan),e.setParam("",y.bendCursor),e.setParam("",y.bendDegree-10*Number(e.getParam("")||1)),e.tempData=null}},skeletonToBones_heng_gou=e=>{const n=[],{heng_start:r,heng_end:g,gou_start:y,gou_end:k}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const $=maxSegment;for(let L=0;L<$;L++){const z=L/$,j=(L+1)/$,ae={x:r.x+(g.x-r.x)*z,y:r.y+(g.y-r.y)*z},re={x:r.x+(g.x-r.x)*j,y:r.y+(g.y-r.y)*j};n.push({id:`heng_segment_${L}`,start:ae,end:re,length:Math.sqrt((re.x-ae.x)**2+(re.y-ae.y)**2),uAxis:normalize$q({x:re.x-ae.x,y:re.y-ae.y}),vAxis:normalize$q({x:-(re.y-ae.y),y:re.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$q(),currentMatrix:createIdentityMatrix$q()})}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const V=maxSegment;for(let L=0;L<V;L++){const z=L/V,j=(L+1)/V,ae={x:y.x+(k.x-y.x)*z,y:y.y+(k.y-y.y)*z},re={x:y.x+(k.x-y.x)*j,y:y.y+(k.y-y.y)*j},oe={id:`gou_segment_${L}`,start:ae,end:re,length:Math.sqrt((re.x-ae.x)**2+(re.y-ae.y)**2),uAxis:normalize$q({x:re.x-ae.x,y:re.y-ae.y}),vAxis:normalize$q({x:-(re.y-ae.y),y:re.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$q(),currentMatrix:createIdentityMatrix$q()};L===0?(oe.parent=`heng_segment_${$-1}`,n[$-1].children.push(oe.id)):(oe.parent=`gou_segment_${L-1}`,n[$+L-1].children.push(oe.id)),n.push(oe)}return n},normalize$q=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$q=()=>[1,0,0,1,0,0],instanceBasicGlyph_heng_gou=e=>{const n=new CustomGlyph(e),r={heng_length:n.getParam("-"),gou_horizonalSpan:n.getParam("-"),gou_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$s(r,n)},bindSkeletonGlyph_heng_gou=e=>{e._o||instanceBasicGlyph_heng_gou(e),glyphSkeletonBind(e._o)},updateGlyphByParams$s=(e,n)=>{const{heng_length:r,gou_horizonalSpan:g,gou_verticalSpan:y,skeletonRefPos:k,weight:$}=e,{ox:V,oy:L}=n._glyph.skeleton,z=250+V||0,j=500+L||0;let ae,re;const oe=new FP.Joint("heng_start_ref",{x:z,y:j}),ue=new FP.Joint("heng_end_ref",{x:oe.x+r,y:oe.y});k===1?(ae=new FP.Joint("heng_start",{x:oe.x,y:oe.y+$/2}),re=new FP.Joint("heng_end",{x:ue.x,y:ue.y+$/2})):k===2?(ae=new FP.Joint("heng_start",{x:oe.x,y:oe.y-$/2}),re=new FP.Joint("heng_end",{x:ue.x,y:ue.y-$/2})):(ae=new FP.Joint("heng_start",{x:oe.x,y:oe.y}),re=new FP.Joint("heng_end",{x:ue.x,y:ue.y})),n.addJoint(oe),n.addJoint(ue),n.addRefLine(refline(oe,ue,"ref"));const le=new FP.Joint("gou_start",{x:ae.x+r,y:ae.y}),de=new FP.Joint("gou_end",{x:le.x-g,y:le.y+y});n.addJoint(ae),n.addJoint(re),n.addJoint(le),n.addJoint(de);const he={heng_start:ae,heng_end:re,gou_start:le,gou_end:de};n.addRefLine(refline(ae,re)),n.addRefLine(refline(le,de)),n.getSkeleton=()=>he},computeParamsByJoints$s=(e,n)=>{const{heng_start:r,heng_end:g,gou_start:y,gou_end:k}=e,$=n.getParamRange("-"),V=n.getParamRange("-"),L=n.getParamRange("-"),z=range(g.x-r.x,$),j=range(y.x-k.x,V),ae=range(k.y-y.y,L);return{heng_length:z,gou_horizonalSpan:j,gou_verticalSpan:ae,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"gou_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$s(g,e);updateGlyphByParams$s(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$s(g,e);updateGlyphByParams$s(y,e),e.setParam("-",y.heng_length),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_heng_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"gou_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$s(g,e);updateGlyphByParams$s(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$s(g,e);updateGlyphByParams$s(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_length),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},skeletonToBones_ping_na=e=>{const n=[],{start:r,bend:g,end:y}=e,k=maxSegment;for(let $=0;$<k;$++){const V=$/k,L=($+1)/k,z=quadraticBezierPoint$b(r,g,y,V),j=quadraticBezierPoint$b(r,g,y,L),ae={id:`segment_${$}`,start:z,end:j,length:Math.sqrt((j.x-z.x)**2+(j.y-z.y)**2),uAxis:normalize$p({x:j.x-z.x,y:j.y-z.y}),vAxis:normalize$p({x:-(j.y-z.y),y:j.x-z.x}),children:[],bindMatrix:createIdentityMatrix$p(),currentMatrix:createIdentityMatrix$p()};$>0&&(ae.parent=`segment_${$-1}`,n[$-1].children.push(ae.id)),n.push(ae)}return n},normalize$p=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$p=()=>[1,0,0,1,0,0],quadraticBezierPoint$b=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_ping_na=e=>{const n=new CustomGlyph(e),r={horizonalSpan:n.getParam(""),verticalSpan:n.getParam(""),bendCursor:n.getParam(""),bendDegree:Number(n.getParam(""))+30*Number(n.getParam("")||1),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$r(r,n)},bindSkeletonGlyph_ping_na=e=>{e._o||instanceBasicGlyph_ping_na(e),glyphSkeletonBind(e._o)},distance$b=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend$c=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x+r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$+g*Math.sin(L),y:V+g*Math.cos(L)}},updateGlyphByParams$r=(e,n)=>{const{horizonalSpan:r,verticalSpan:g,bendCursor:y,bendDegree:k}=e,{ox:$,oy:V}=n._glyph.skeleton,L=250+$||0,z=425+V||0,j=new FP.Joint("start",{x:L,y:z}),ae=new FP.Joint("end",{x:j.x+r,y:j.y+g});distance$b(j,ae);const re=j.x+y*r,oe=j.y+y*g,ue=Math.atan2(g,r),le=new FP.Joint("bend",{x:re+k*Math.sin(ue),y:oe+k*Math.cos(ue)});n.addJoint(j),n.addJoint(ae),n.addJoint(le);const de={start:j,bend:le,end:ae};n.addRefLine(refline(j,le)),n.addRefLine(refline(le,ae)),n.getSkeleton=()=>de},computeParamsByJoints$r=(e,n)=>{const{start:r,end:g,bend:y}=e,k=n.getParamRange(""),$=n.getParamRange(""),V=n.getParamRange(""),L=n.getParamRange(""),z=range(g.x-r.x,k),j=range(g.y-r.y,$),ae=FP.distanceAndFootPoint(r,g,y),re=range(ae.percentageFromA,V),oe=range(ae.distance,L);return{horizonalSpan:z,verticalSpan:j,bendCursor:re,bendDegree:oe,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_ping_na=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"bend":{$.bend={x:e.tempData.bend.x+y,y:e.tempData.bend.y+k};break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};const V=getBend$c($.start,$.end,e.tempData.bendCursor,e.tempData.bendDegree);$.bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$r(g,e);updateGlyphByParams$r(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$r(g,e);updateGlyphByParams$r(y,e),e.setParam("",y.horizonalSpan),e.setParam("",y.verticalSpan),e.setParam("",y.bendCursor),e.setParam("",y.bendDegree-30*Number(e.getParam("")||1)),e.tempData=null}},updateSkeletonListener_after_bind_ping_na=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"bend":{$.bend={x:e.tempData.bend.x+y,y:e.tempData.bend.y+k};break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};const V=getBend$c($.start,$.end,e.tempData.bendCursor,e.tempData.bendDegree);$.bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$r(g,e);updateGlyphByParams$r(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$r(g,e);updateGlyphByParams$r(y,e),updateSkeletonTransformation(e),e.setParam("",y.horizonalSpan),e.setParam("",y.verticalSpan),e.setParam("",y.bendCursor),e.setParam("",y.bendDegree-30*Number(e.getParam("")||1)),e.tempData=null}},skeletonToBones_tiao_na=e=>{const n=[],{tiao_start:r,tiao_end:g,na_start:y,na_end:k,na_bend:$}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const V=maxSegment;for(let z=0;z<V;z++){const j=z/V,ae=(z+1)/V,re={x:r.x+(g.x-r.x)*j,y:r.y+(g.y-r.y)*j},oe={x:r.x+(g.x-r.x)*ae,y:r.y+(g.y-r.y)*ae},ue={id:`tiao_segment_${z}`,start:re,end:oe,length:Math.sqrt((oe.x-re.x)**2+(oe.y-re.y)**2),uAxis:normalize$o({x:oe.x-re.x,y:oe.y-re.y}),vAxis:normalize$o({x:-(oe.y-re.y),y:oe.x-re.x}),children:[],bindMatrix:createIdentityMatrix$o(),currentMatrix:createIdentityMatrix$o()};z>0&&(ue.parent=`tiao_segment_${z-1}`,n[z-1].children.push(ue.id)),n.push(ue)}const L=maxSegment;for(let z=0;z<L;z++){const j=z/L,ae=(z+1)/L,re=quadraticBezierPoint$a(y,$,k,j),oe=quadraticBezierPoint$a(y,$,k,ae),ue={id:`na_segment_${z}`,start:re,end:oe,length:Math.sqrt((oe.x-re.x)**2+(oe.y-re.y)**2),uAxis:normalize$o({x:oe.x-re.x,y:oe.y-re.y}),vAxis:normalize$o({x:-(oe.y-re.y),y:oe.x-re.x}),children:[],bindMatrix:createIdentityMatrix$o(),currentMatrix:createIdentityMatrix$o()};z===0?(ue.parent=`tiao_segment_${V-1}`,n[V-1].children.push(ue.id)):(ue.parent=`na_segment_${z-1}`,n[V+z-1].children.push(ue.id)),n.push(ue)}return n},normalize$o=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$o=()=>[1,0,0,1,0,0],quadraticBezierPoint$a=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_tiao_na=e=>{const n=new CustomGlyph(e),r={tiao_horizonalSpan:n.getParam("-"),tiao_verticalSpan:n.getParam("-"),na_horizonalSpan:n.getParam("-"),na_verticalSpan:n.getParam("-"),na_bendCursor:n.getParam("-"),na_bendDegree:Number(n.getParam("-"))+30*Number(n.getParam("")||1),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$q(r,n)},bindSkeletonGlyph_tiao_na=e=>{e._o||instanceBasicGlyph_tiao_na(e),glyphSkeletonBind(e._o)},getBend$b=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x+r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$+g*Math.sin(L),y:V+g*Math.cos(L)}},updateGlyphByParams$q=(e,n)=>{const{tiao_horizonalSpan:r,tiao_verticalSpan:g,na_horizonalSpan:y,na_verticalSpan:k,na_bendCursor:$,na_bendDegree:V}=e,{ox:L,oy:z}=n._glyph.skeleton,j=200+L||0,ae=575+z||0,re=new FP.Joint("tiao_start",{x:j,y:ae}),oe=new FP.Joint("tiao_end",{x:re.x+r,y:re.y-g}),ue=new FP.Joint("na_start",{x:re.x+r,y:re.y-g}),le=new FP.Joint("na_end",{x:ue.x+y,y:ue.y+k}),de=new FP.Joint("na_bend",{x:ue.x+y*$,y:ue.y+V});n.addJoint(re),n.addJoint(oe),n.addJoint(ue),n.addJoint(le),n.addJoint(de);const he={tiao_start:re,tiao_end:oe,na_start:ue,na_bend:de,na_end:le};n.addRefLine(refline(re,oe)),n.addRefLine(refline(ue,de)),n.addRefLine(refline(de,le)),n.getSkeleton=()=>he},computeParamsByJoints$q=(e,n)=>{const{tiao_start:r,tiao_end:g,na_start:y,na_end:k,na_bend:$}=e,V=n.getParamRange("-"),L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=n.getParamRange("-"),re=n.getParamRange("-"),oe=range(g.x-r.x,V),ue=range(r.y-g.y,L),le=range(k.x-y.x,z),de=range(k.y-y.y,j),he=FP.distanceAndFootPoint(y,k,$),_e=range(he.percentageFromA,ae),Ce=range(he.distance,re);return{tiao_horizonalSpan:oe,tiao_verticalSpan:ue,na_horizonalSpan:le,na_verticalSpan:de,na_bendCursor:_e,na_bendDegree:Ce,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_tiao_na=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"tiao_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"tiao_end":{$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k},$.na_start={x:e.tempData.na_start.x+y,y:e.tempData.na_start.y+k},$.na_bend={x:e.tempData.na_bend.x+y,y:e.tempData.na_bend.y+k},$.na_end={x:e.tempData.na_end.x+y,y:e.tempData.na_end.y+k};break}case"na_start":{$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k},$.na_start={x:e.tempData.na_start.x+y,y:e.tempData.na_start.y+k},$.na_bend={x:e.tempData.na_bend.x+y,y:e.tempData.na_bend.y+k},$.na_end={x:e.tempData.na_end.x+y,y:e.tempData.na_end.y+k};break}case"na_bend":{$.na_bend={x:e.tempData.na_bend.x+y,y:e.tempData.na_bend.y+k};break}case"na_end":{$.na_end={x:e.tempData.na_end.x+y,y:e.tempData.na_end.y+k};const V=getBend$b($.na_start,$.na_end,e.tempData.na_bendCursor,e.tempData.na_bendDegree);$.na_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.na_bendCursor=e.getParam("-"),e.tempData.na_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$q(g,e);updateGlyphByParams$q(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$q(g,e);updateGlyphByParams$q(y,e),e.setParam("-",y.tiao_horizonalSpan),e.setParam("-",y.tiao_verticalSpan),e.setParam("-",y.na_horizonalSpan),e.setParam("-",y.na_verticalSpan),e.setParam("-",y.na_bendCursor),e.setParam("-",y.na_bendDegree-30*Number(e.getParam("")||1)),e.tempData=null}},updateSkeletonListener_after_bind_tiao_na=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"tiao_end":{$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k},$.na_start={x:e.tempData.na_start.x+y,y:e.tempData.na_start.y+k},$.na_bend={x:e.tempData.na_bend.x+y,y:e.tempData.na_bend.y+k},$.na_end={x:e.tempData.na_end.x+y,y:e.tempData.na_end.y+k};break}case"na_start":{$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k},$.na_start={x:e.tempData.na_start.x+y,y:e.tempData.na_start.y+k},$.na_bend={x:e.tempData.na_bend.x+y,y:e.tempData.na_bend.y+k},$.na_end={x:e.tempData.na_end.x+y,y:e.tempData.na_end.y+k};break}case"na_bend":{$.na_bend={x:e.tempData.na_bend.x+y,y:e.tempData.na_bend.y+k};break}case"na_end":{$.na_end={x:e.tempData.na_end.x+y,y:e.tempData.na_end.y+k};const V=getBend$b($.na_start,$.na_end,e.tempData.na_bendCursor,e.tempData.na_bendDegree);$.na_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.na_bendCursor=e.getParam("-"),e.tempData.na_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$q(g,e);updateGlyphByParams$q(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$q(g,e);updateGlyphByParams$q(y,e),updateSkeletonTransformation(e),e.setParam("-",y.tiao_horizonalSpan),e.setParam("-",y.tiao_verticalSpan),e.setParam("-",y.na_horizonalSpan),e.setParam("-",y.na_verticalSpan),e.setParam("-",y.na_bendCursor),e.setParam("-",y.na_bendDegree-30*Number(e.getParam("")||1)),e.tempData=null}},skeletonToBones_pie_dian=e=>{const n=[],{pie_start:r,pie_end:g,pie_bend:y,dian_start:k,dian_end:$,dian_bend:V}=e,L=maxSegment;for(let j=0;j<L;j++){const ae=j/L,re=(j+1)/L,oe=quadraticBezierPoint$9(r,y,g,ae),ue=quadraticBezierPoint$9(r,y,g,re),le={id:`pie_segment_${j}`,start:oe,end:ue,length:Math.sqrt((ue.x-oe.x)**2+(ue.y-oe.y)**2),uAxis:normalize$n({x:ue.x-oe.x,y:ue.y-oe.y}),vAxis:normalize$n({x:-(ue.y-oe.y),y:ue.x-oe.x}),children:[],bindMatrix:createIdentityMatrix$n(),currentMatrix:createIdentityMatrix$n()};j>0&&(le.parent=`pie_segment_${j-1}`,n[j-1].children.push(le.id)),n.push(le)}const z=maxSegment;for(let j=0;j<z;j++){const ae=j/z,re=(j+1)/z,oe=quadraticBezierPoint$9(k,V,$,ae),ue=quadraticBezierPoint$9(k,V,$,re),le={id:`dian_segment_${j}`,start:oe,end:ue,length:Math.sqrt((ue.x-oe.x)**2+(ue.y-oe.y)**2),uAxis:normalize$n({x:ue.x-oe.x,y:ue.y-oe.y}),vAxis:normalize$n({x:-(ue.y-oe.y),y:ue.x-oe.x}),children:[],bindMatrix:createIdentityMatrix$n(),currentMatrix:createIdentityMatrix$n()};j===0?(le.parent=`pie_segment_${L-1}`,n[L-1].children.push(le.id)):(le.parent=`dian_segment_${j-1}`,n[L+j-1].children.push(le.id)),n.push(le)}return n},normalize$n=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$n=()=>[1,0,0,1,0,0],quadraticBezierPoint$9=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},BENDING_DEGREE=0,instanceBasicGlyph_pie_dian=e=>{const n=new CustomGlyph(e),r={pie_horizonalSpan:n.getParam("-"),pie_verticalSpan:n.getParam("-"),pie_bendCursor:n.getParam("-"),pie_bendDegree:Number(n.getParam("-"))+BENDING_DEGREE*Number(n.getParam("")||1),dian_horizonalSpan:n.getParam("-"),dian_verticalSpan:n.getParam("-"),dian_bendCursor:n.getParam("-"),dian_bendDegree:Number(n.getParam("-"))+BENDING_DEGREE*Number(n.getParam("")||1),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$p(r,n)},bindSkeletonGlyph_pie_dian=e=>{e._o||instanceBasicGlyph_pie_dian(e),glyphSkeletonBind(e._o)},distance$a=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend$a=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x+r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$+g*Math.sin(L),y:V+g*Math.cos(L)}},updateGlyphByParams$p=(e,n)=>{const{pie_horizonalSpan:r,pie_verticalSpan:g,pie_bendCursor:y,pie_bendDegree:k,dian_horizonalSpan:$,dian_verticalSpan:V,dian_bendCursor:L,dian_bendDegree:z,skeletonRefPos:j}=e,{ox:ae,oy:re}=n._glyph.skeleton,oe=550+ae||0,ue=200+re||0,le=new FP.Joint("pie_start",{x:oe,y:ue}),de=new FP.Joint("pie_end",{x:le.x-r,y:le.y+g});distance$a(le,de);const he=le.x-y*r,_e=le.y+y*g,Ce=Math.atan2(g,r),Ne=new FP.Joint("pie_bend",{x:he+k*Math.sin(Ce),y:_e+k*Math.cos(Ce)}),$e=new FP.Joint("dian_start",{x:le.x-r,y:le.y+g}),xe=new FP.Joint("dian_end",{x:$e.x+$,y:$e.y+V});distance$a($e,xe);const Ie=$e.x+L*$,ze=$e.y+L*V,qe=Math.atan2(V,$),Et=new FP.Joint("dian_bend",{x:Ie+z*Math.sin(qe),y:ze-z*Math.cos(qe)});n.addJoint(le),n.addJoint(Ne),n.addJoint(de),n.addJoint($e),n.addJoint(Et),n.addJoint(xe);const _n={pie_start:le,pie_bend:Ne,pie_end:de,dian_start:$e,dian_bend:Et,dian_end:xe};n.addRefLine(refline(le,Ne)),n.addRefLine(refline(Ne,de)),n.addRefLine(refline($e,Et)),n.addRefLine(refline(Et,xe)),n.getSkeleton=()=>_n},computeParamsByJoints$p=(e,n)=>{const{pie_start:r,pie_bend:g,pie_end:y,dian_start:k,dian_bend:$,dian_end:V}=e,L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=n.getParamRange("-"),re=n.getParamRange("-"),oe=n.getParamRange("-"),ue=n.getParamRange("-"),le=n.getParamRange("-"),de=range(r.x-y.x,L),he=range(y.y-r.y,z),_e=FP.distanceAndFootPoint(r,y,g),Ce=range(_e.percentageFromA,j),Ne=range(_e.distance,ae),$e=range(V.x-k.x,re),xe=range(V.y-k.y,oe),Ie=FP.distanceAndFootPoint(k,V,$),ze=range(Ie.percentageFromA,ue),qe=range(Ie.distance,le);return{pie_horizonalSpan:de,pie_verticalSpan:he,pie_bendCursor:Ce,pie_bendDegree:Ne,dian_horizonalSpan:$e,dian_verticalSpan:xe,dian_bendCursor:ze,dian_bendDegree:qe,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_pie_dian=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"pie_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"pie_bend":{$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$a($.pie_start,$.pie_end,e.tempData.pie_bendCursor,e.tempData.pie_bendDegree);$.pie_bend={x:V.x,y:V.y},$.dian_start={x:e.tempData.dian_start.x+y,y:e.tempData.dian_start.y+k},$.dian_bend={x:e.tempData.dian_bend.x+y,y:e.tempData.dian_bend.y+k},$.dian_end={x:e.tempData.dian_end.x+y,y:e.tempData.dian_end.y+k};break}case"dian_start":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$a($.pie_start,$.pie_end,e.tempData.pie_bendCursor,e.tempData.pie_bendDegree);$.pie_bend={x:V.x,y:V.y},$.dian_start={x:e.tempData.dian_start.x+y,y:e.tempData.dian_start.y+k},$.dian_bend={x:e.tempData.dian_bend.x+y,y:e.tempData.dian_bend.y+k},$.dian_end={x:e.tempData.dian_end.x+y,y:e.tempData.dian_end.y+k};break}case"dian_bend":{$.dian_bend={x:e.tempData.dian_bend.x+y,y:e.tempData.dian_bend.y+k};break}case"dian_end":{$.dian_end={x:e.tempData.dian_end.x+y,y:e.tempData.dian_end.y+k};const V=getBend$a($.dian_start,$.dian_end,e.tempData.dian_bendCursor,e.tempData.dian_bendDegree);$.dian_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.pie_bendCursor=e.getParam("-"),e.tempData.pie_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.tempData.dian_bendCursor=e.getParam("-"),e.tempData.dian_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.tempData.bendDegree=Number(e.getParam(""))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$p(g,e);updateGlyphByParams$p(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$p(g,e);updateGlyphByParams$p(y,e),e.setParam("-",y.pie_horizonalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.pie_bendCursor),e.setParam("-",y.pie_bendDegree-BENDING_DEGREE*Number(e.getParam("")||1)),e.setParam("-",y.dian_horizonalSpan),e.setParam("-",y.dian_verticalSpan),e.setParam("-",y.dian_bendCursor),e.setParam("-",y.dian_bendDegree-BENDING_DEGREE*Number(e.getParam("")||1)),e.tempData=null}},updateSkeletonListener_after_bind_pie_dian=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"pie_bend":{$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$a($.pie_start,$.pie_end,e.tempData.pie_bendCursor,e.tempData.pie_bendDegree);$.pie_bend={x:V.x,y:V.y},$.dian_start={x:e.tempData.dian_start.x+y,y:e.tempData.dian_start.y+k},$.dian_bend={x:e.tempData.dian_bend.x+y,y:e.tempData.dian_bend.y+k},$.dian_end={x:e.tempData.dian_end.x+y,y:e.tempData.dian_end.y+k};break}case"dian_start":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$a($.pie_start,$.pie_end,e.tempData.pie_bendCursor,e.tempData.pie_bendDegree);$.pie_bend={x:V.x,y:V.y},$.dian_start={x:e.tempData.dian_start.x+y,y:e.tempData.dian_start.y+k},$.dian_bend={x:e.tempData.dian_bend.x+y,y:e.tempData.dian_bend.y+k},$.dian_end={x:e.tempData.dian_end.x+y,y:e.tempData.dian_end.y+k};break}case"dian_bend":{$.dian_bend={x:e.tempData.dian_bend.x+y,y:e.tempData.dian_bend.y+k};break}case"dian_end":{$.dian_end={x:e.tempData.dian_end.x+y,y:e.tempData.dian_end.y+k};const V=getBend$a($.dian_start,$.dian_end,e.tempData.dian_bendCursor,e.tempData.dian_bendDegree);$.dian_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.pie_bendCursor=e.getParam("-"),e.tempData.pie_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.tempData.dian_bendCursor=e.getParam("-"),e.tempData.dian_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.tempData.bendCursor=e.getParam(""),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$p(g,e);updateGlyphByParams$p(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$p(g,e);updateGlyphByParams$p(y,e),updateSkeletonTransformation(e),e.setParam("-",y.pie_horizonalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.pie_bendCursor),e.setParam("-",y.pie_bendDegree-BENDING_DEGREE*Number(e.getParam("")||1)),e.setParam("-",y.dian_horizonalSpan),e.setParam("-",y.dian_verticalSpan),e.setParam("-",y.dian_bendCursor),e.setParam("-",y.dian_bendDegree-BENDING_DEGREE*Number(e.getParam("")||1)),e.tempData=null}},skeletonToBones_pie_tiao=e=>{const n=[],{pie_start:r,pie_end:g,pie_bend:y,tiao_start:k,tiao_end:$,tiao_bend:V}=e,L=maxSegment;for(let j=0;j<L;j++){const ae=j/L,re=(j+1)/L,oe=quadraticBezierPoint$8(r,y,g,ae),ue=quadraticBezierPoint$8(r,y,g,re),le={id:`pie_segment_${j}`,start:oe,end:ue,length:Math.sqrt((ue.x-oe.x)**2+(ue.y-oe.y)**2),uAxis:normalize$m({x:ue.x-oe.x,y:ue.y-oe.y}),vAxis:normalize$m({x:-(ue.y-oe.y),y:ue.x-oe.x}),children:[],bindMatrix:createIdentityMatrix$m(),currentMatrix:createIdentityMatrix$m()};j>0&&(le.parent=`pie_segment_${j-1}`,n[j-1].children.push(le.id)),n.push(le)}const z=maxSegment;for(let j=0;j<z;j++){const ae=j/z,re=(j+1)/z,oe=quadraticBezierPoint$8(k,V,$,ae),ue=quadraticBezierPoint$8(k,V,$,re),le={id:`tiao_segment_${j}`,start:oe,end:ue,length:Math.sqrt((ue.x-oe.x)**2+(ue.y-oe.y)**2),uAxis:normalize$m({x:ue.x-oe.x,y:ue.y-oe.y}),vAxis:normalize$m({x:-(ue.y-oe.y),y:ue.x-oe.x}),children:[],bindMatrix:createIdentityMatrix$m(),currentMatrix:createIdentityMatrix$m()};j===0?(le.parent=`pie_segment_${L-1}`,n[L-1].children.push(le.id)):(le.parent=`tiao_segment_${j-1}`,n[L+j-1].children.push(le.id)),n.push(le)}return n},normalize$m=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$m=()=>[1,0,0,1,0,0],quadraticBezierPoint$8=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_pie_tiao=e=>{const n=new CustomGlyph(e),r={pie_horizonalSpan:n.getParam("-"),pie_verticalSpan:n.getParam("-"),pie_bendCursor:n.getParam("-"),pie_bendDegree:Number(n.getParam("-"))+10*Number(n.getParam("")||1),tiao_horizonalSpan:n.getParam("-"),tiao_verticalSpan:n.getParam("-"),tiao_bendCursor:n.getParam("-"),tiao_bendDegree:Number(n.getParam("-"))+10*Number(n.getParam("")||1),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$o(r,n)},bindSkeletonGlyph_pie_tiao=e=>{e._o||instanceBasicGlyph_pie_tiao(e),glyphSkeletonBind(e._o)},distance$9=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend$9=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x+r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$+g*Math.sin(L),y:V+g*Math.cos(L)}},updateGlyphByParams$o=(e,n)=>{const{pie_horizonalSpan:r,pie_verticalSpan:g,pie_bendCursor:y,pie_bendDegree:k,tiao_horizonalSpan:$,tiao_verticalSpan:V,tiao_bendCursor:L,tiao_bendDegree:z}=e,{ox:j,oy:ae}=n._glyph.skeleton,re=650+j||0,oe=350+ae||0,ue=new FP.Joint("pie_start",{x:re,y:oe}),le=new FP.Joint("pie_end",{x:ue.x-r,y:ue.y+g});distance$9(ue,le);const de=ue.x-y*r,he=ue.y+y*g,_e=Math.atan2(g,r),Ce=new FP.Joint("pie_bend",{x:de+k*Math.sin(_e),y:he+k*Math.cos(_e)}),Ne=new FP.Joint("tiao_start",{x:ue.x-r,y:ue.y+g}),$e=new FP.Joint("tiao_end",{x:Ne.x+$,y:Ne.y-V});distance$9(Ne,$e);const xe=Ne.x+L*$,Ie=Ne.y-L*V,ze=Math.atan2(V,$),qe=new FP.Joint("tiao_bend",{x:xe-z*Math.sin(ze),y:Ie-z*Math.cos(ze)});n.addJoint(ue),n.addJoint(Ce),n.addJoint(le),n.addJoint(Ne),n.addJoint(qe),n.addJoint($e);const Et={pie_start:ue,pie_bend:Ce,pie_end:le,tiao_start:Ne,tiao_bend:qe,tiao_end:$e};n.addRefLine(refline(ue,Ce)),n.addRefLine(refline(Ce,le)),n.addRefLine(refline(Ne,qe)),n.addRefLine(refline(qe,$e)),n.getSkeleton=()=>Et},computeParamsByJoints$o=(e,n)=>{const{pie_start:r,pie_bend:g,pie_end:y,tiao_start:k,tiao_bend:$,tiao_end:V}=e,L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=n.getParamRange("-"),re=n.getParamRange("-"),oe=n.getParamRange("-"),ue=n.getParamRange("-"),le=n.getParamRange("-"),de=range(r.x-y.x,L),he=range(y.y-r.y,z),_e=FP.distanceAndFootPoint(r,y,g),Ce=range(_e.percentageFromA,j),Ne=range(_e.distance,ae),$e=range(V.x-k.x,re),xe=range(k.y-V.y,oe),Ie=FP.distanceAndFootPoint(k,V,$),ze=range(Ie.percentageFromA,ue),qe=range(Ie.distance,le);return{pie_horizonalSpan:de,pie_verticalSpan:he,pie_bendCursor:Ce,pie_bendDegree:Ne,tiao_horizonalSpan:$e,tiao_verticalSpan:xe,tiao_bendCursor:ze,tiao_bendDegree:qe,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_pie_tiao=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"pie_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"pie_bend":{$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$9($.pie_start,$.pie_end,e.tempData.pie_bendCursor,e.tempData.pie_bendDegree);$.pie_bend={x:V.x,y:V.y},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y+k},$.tiao_bend={x:e.tempData.tiao_bend.x+y,y:e.tempData.tiao_bend.y+k},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}case"tiao_start":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$9($.pie_start,$.pie_end,e.tempData.pie_bendCursor,e.tempData.pie_bendDegree);$.pie_bend={x:V.x,y:V.y},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y+k},$.tiao_bend={x:e.tempData.tiao_bend.x+y,y:e.tempData.tiao_bend.y+k},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}case"tiao_bend":{$.tiao_bend={x:e.tempData.tiao_bend.x+y,y:e.tempData.tiao_bend.y+k};break}case"tiao_end":{$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};const V=getBend$9($.tiao_start,$.tiao_end,e.tempData.tiao_bendCursor,e.tempData.tiao_bendDegree);$.tiao_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.pie_bendCursor=e.getParam("-"),e.tempData.pie_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.tempData.tiao_bendCursor=e.getParam("-"),e.tempData.tiao_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$o(g,e);updateGlyphByParams$o(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$o(g,e);updateGlyphByParams$o(y,e),e.setParam("-",y.pie_horizonalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.pie_bendCursor),e.setParam("-",y.pie_bendDegree-10*Number(e.getParam("")||1)),e.setParam("-",y.tiao_horizonalSpan),e.setParam("-",y.tiao_verticalSpan),e.setParam("-",y.tiao_bendCursor),e.setParam("-",y.tiao_bendDegree-10*Number(e.getParam("")||1)),e.tempData=null}},updateSkeletonListener_after_bind_pie_tiao=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"pie_bend":{$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$9($.pie_start,$.pie_end,e.tempData.pie_bendCursor,e.tempData.pie_bendDegree);$.pie_bend={x:V.x,y:V.y},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y+k},$.tiao_bend={x:e.tempData.tiao_bend.x+y,y:e.tempData.tiao_bend.y+k},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}case"tiao_start":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$9($.pie_start,$.pie_end,e.tempData.pie_bendCursor,e.tempData.pie_bendDegree);$.pie_bend={x:V.x,y:V.y},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y+k},$.tiao_bend={x:e.tempData.tiao_bend.x+y,y:e.tempData.tiao_bend.y+k},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}case"tiao_bend":{$.tiao_bend={x:e.tempData.tiao_bend.x+y,y:e.tempData.tiao_bend.y+k};break}case"tiao_end":{$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};const V=getBend$9($.tiao_start,$.tiao_end,e.tempData.tiao_bendCursor,e.tempData.tiao_bendDegree);$.tiao_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.pie_bendCursor=e.getParam("-"),e.tempData.pie_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.tempData.tiao_bendCursor=e.getParam("-"),e.tempData.tiao_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$o(g,e);updateGlyphByParams$o(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$o(g,e);updateGlyphByParams$o(y,e),updateSkeletonTransformation(e),e.setParam("-",y.pie_horizonalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.pie_bendCursor),e.setParam("-",y.pie_bendDegree-10*Number(e.getParam("")||1)),e.setParam("-",y.tiao_horizonalSpan),e.setParam("-",y.tiao_verticalSpan),e.setParam("-",y.tiao_bendCursor),e.setParam("-",y.tiao_bendDegree-10*Number(e.getParam("")||1)),e.tempData=null}},skeletonToBones_heng_pie_wan_gou=e=>{const n=[],{heng_start:r,heng_end:g,pie_start:y,pie_end:k,pie_bend:$,wangou_start:V,wangou_end:L,wangou_bend:z}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const j=maxSegment;for(let ue=0;ue<j;ue++){const le=ue/j,de=(ue+1)/j,he={x:r.x+(g.x-r.x)*le,y:r.y+(g.y-r.y)*le},_e={x:r.x+(g.x-r.x)*de,y:r.y+(g.y-r.y)*de},Ce={id:`heng_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$l({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$l({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$l(),currentMatrix:createIdentityMatrix$l()};ue>0&&(Ce.parent=`heng_segment_${ue-1}`,n[ue-1].children.push(Ce.id)),n.push(Ce)}const ae=maxSegment;for(let ue=0;ue<ae;ue++){const le=ue/ae,de=(ue+1)/ae,he={x:y.x+(k.x-y.x)*le,y:y.y+(k.y-y.y)*le},_e={x:y.x+(k.x-y.x)*de,y:y.y+(k.y-y.y)*de},Ce={id:`pie_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$l({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$l({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$l(),currentMatrix:createIdentityMatrix$l()};ue===0?(Ce.parent=`heng_segment_${j-1}`,n[j-1].children.push(Ce.id)):(Ce.parent=`pie_segment_${ue-1}`,n[j+ue-1].children.push(Ce.id)),n.push(Ce)}const re=maxSegment;for(let ue=0;ue<re;ue++){const le=ue/re,de=(ue+1)/re,he=quadraticBezierPoint$7(V,z,L,le),_e=quadraticBezierPoint$7(V,z,L,de),Ce={id:`wangou_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$l({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$l({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$l(),currentMatrix:createIdentityMatrix$l()};ue===0?(Ce.parent=`pie_segment_${ae-1}`,n[j+ae-1].children.push(Ce.id)):(Ce.parent=`wangou_segment_${ue-1}`,n[j+ae+ue-1].children.push(Ce.id)),n.push(Ce)}Math.sqrt((L.x-V.x)**2+(L.y-V.y)**2);const oe=maxSegment;for(let ue=0;ue<oe;ue++){const le=ue/oe,de=(ue+1)/oe,he=quadraticBezierPoint$7(V,z,L,le),_e=quadraticBezierPoint$7(V,z,L,de),Ce={id:`gou_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$l({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$l({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$l(),currentMatrix:createIdentityMatrix$l()};ue===0?(Ce.parent=`wangou_segment_${re-1}`,n[j+ae+re-1].children.push(Ce.id)):(Ce.parent=`gou_segment_${ue-1}`,n[j+ae+re+ue-1].children.push(Ce.id)),n.push(Ce)}return n},normalize$l=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$l=()=>[1,0,0,1,0,0],quadraticBezierPoint$7=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_heng_pie_wan_gou=e=>{const n=new CustomGlyph(e),r={heng_length:n.getParam("-"),pie_horizonalSpan:n.getParam("-"),pie_verticalSpan:n.getParam("-"),wangou_verticalSpan:n.getParam("-"),wangou_bendCursor:n.getParam("-"),wangou_bendDegree:Number(n.getParam("-"))+30*Number(n.getParam("")||1),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$n(r,n)},bindSkeletonGlyph_heng_pie_wan_gou=e=>{e._o||instanceBasicGlyph_heng_pie_wan_gou(e),glyphSkeletonBind(e._o)},distance$8=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend$8=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x+r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$+g*Math.sin(L),y:V+g*Math.cos(L)}},updateGlyphByParams$n=(e,n)=>{const{heng_length:r,pie_horizonalSpan:g,pie_verticalSpan:y,wangou_verticalSpan:k,wangou_bendCursor:$,wangou_bendDegree:V,skeletonRefPos:L,weight:z}=e,{ox:j,oy:ae}=n._glyph.skeleton,re=370+j||0,oe=245+ae||0;let ue,le;const de=new FP.Joint("heng_start_ref",{x:re,y:oe}),he=new FP.Joint("heng_end_ref",{x:de.x+r,y:de.y});L===1?(ue=new FP.Joint("heng_start",{x:de.x,y:de.y+z/2}),le=new FP.Joint("heng_end",{x:he.x,y:he.y+z/2})):L===2?(ue=new FP.Joint("heng_start",{x:de.x,y:de.y-z/2}),le=new FP.Joint("heng_end",{x:he.x,y:he.y-z/2})):(ue=new FP.Joint("heng_start",{x:de.x,y:de.y}),le=new FP.Joint("heng_end",{x:he.x,y:he.y})),n.addJoint(de),n.addJoint(he),n.addRefLine(refline(de,he,"ref"));const _e=new FP.Joint("pie_start",{x:ue.x+r,y:ue.y}),Ce=new FP.Joint("pie_end",{x:_e.x-g,y:_e.y+y}),Ne=new FP.Joint("wangou_start",{x:_e.x-g,y:_e.y+y}),$e=new FP.Joint("wangou_end",{x:Ne.x,y:Ne.y+k});distance$8(Ne,$e);const xe=Ne.x,Ie=Ne.y+$*k,ze=new FP.Joint("wangou_bend",{x:xe+V,y:Ie});n.addJoint(ue),n.addJoint(le),n.addJoint(_e),n.addJoint(Ce),n.addJoint(Ne),n.addJoint(ze),n.addJoint($e);const qe={heng_start:ue,heng_end:le,pie_start:_e,pie_end:Ce,wangou_start:Ne,wangou_bend:ze,wangou_end:$e};n.addRefLine(refline(ue,le)),n.addRefLine(refline(_e,Ce)),n.addRefLine(refline(Ne,ze)),n.addRefLine(refline(ze,$e)),n.getSkeleton=()=>qe},computeParamsByJoints$n=(e,n)=>{const{heng_start:r,heng_end:g,pie_start:y,pie_end:k,wangou_start:$,wangou_bend:V,wangou_end:L}=e,z=n.getParamRange("-"),j=n.getParamRange("-"),ae=n.getParamRange("-"),re=n.getParamRange("-"),oe=n.getParamRange("-"),ue=n.getParamRange("-"),le=range(g.x-r.x,z),de=range(y.x-k.x,j),he=range(k.y-y.y,ae),_e=range(L.y-$.y,re),Ce=range((V.y-$.y)/_e,oe),Ne=range(V.x-$.x,ue);return{heng_length:le,pie_horizonalSpan:de,pie_verticalSpan:he,wangou_verticalSpan:_e,wangou_bendCursor:Ce,wangou_bendDegree:Ne,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_pie_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y},$.wangou_start={x:e.tempData.wangou_start.x+y,y:e.tempData.wangou_start.y},$.wangou_bend={x:e.tempData.wangou_bend.x+y,y:e.tempData.wangou_bend.y},$.wangou_end={x:e.tempData.wangou_end.x+y,y:e.tempData.wangou_end.y};break}case"pie_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y},$.wangou_start={x:e.tempData.wangou_start.x+y,y:e.tempData.wangou_start.y},$.wangou_bend={x:e.tempData.wangou_bend.x+y,y:e.tempData.wangou_bend.y},$.wangou_end={x:e.tempData.wangou_end.x+y,y:e.tempData.wangou_end.y};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k},$.wangou_start={x:e.tempData.wangou_start.x+y,y:e.tempData.wangou_start.y+k},$.wangou_bend={x:e.tempData.wangou_bend.x+y,y:e.tempData.wangou_bend.y+k},$.wangou_end={x:e.tempData.wangou_end.x+y,y:e.tempData.wangou_end.y+k};break}case"wangou_start":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k},$.wangou_start={x:e.tempData.wangou_start.x+y,y:e.tempData.wangou_start.y+k},$.wangou_bend={x:e.tempData.wangou_bend.x+y,y:e.tempData.wangou_bend.y+k},$.wangou_end={x:e.tempData.wangou_end.x+y,y:e.tempData.wangou_end.y+k};break}case"wangou_bend":{$.wangou_bend={x:e.tempData.wangou_bend.x+y,y:e.tempData.wangou_bend.y+k};break}case"wangou_end":{$.wangou_end={x:e.tempData.wangou_end.x,y:e.tempData.wangou_end.y+k};const V=getBend$8($.wangou_start,$.wangou_end,e.tempData.wangou_bendCursor,e.tempData.wangou_bendDegree);$.wangou_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.bendCursor=e.getParam("-"),e.tempData.bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$n(g,e);updateGlyphByParams$n(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$n(g,e);updateGlyphByParams$n(y,e),e.setParam("-",y.heng_length),e.setParam("-",y.pie_horizonalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.wangou_verticalSpan),e.setParam("-",y.wangou_bendCursor),e.setParam("-",y.wangou_bendDegree-30*Number(e.getParam("")||1)),e.tempData=null}},updateSkeletonListener_after_bind_heng_pie_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y},$.wangou_start={x:e.tempData.wangou_start.x+y,y:e.tempData.wangou_start.y},$.wangou_bend={x:e.tempData.wangou_bend.x+y,y:e.tempData.wangou_bend.y},$.wangou_end={x:e.tempData.wangou_end.x+y,y:e.tempData.wangou_end.y};break}case"pie_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y},$.wangou_start={x:e.tempData.wangou_start.x+y,y:e.tempData.wangou_start.y},$.wangou_bend={x:e.tempData.wangou_bend.x+y,y:e.tempData.wangou_bend.y},$.wangou_end={x:e.tempData.wangou_end.x+y,y:e.tempData.wangou_end.y};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k},$.wangou_start={x:e.tempData.wangou_start.x+y,y:e.tempData.wangou_start.y+k},$.wangou_bend={x:e.tempData.wangou_bend.x+y,y:e.tempData.wangou_bend.y+k},$.wangou_end={x:e.tempData.wangou_end.x+y,y:e.tempData.wangou_end.y+k};break}case"wangou_start":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k},$.wangou_start={x:e.tempData.wangou_start.x+y,y:e.tempData.wangou_start.y+k},$.wangou_bend={x:e.tempData.wangou_bend.x+y,y:e.tempData.wangou_bend.y+k},$.wangou_end={x:e.tempData.wangou_end.x+y,y:e.tempData.wangou_end.y+k};break}case"wangou_bend":{$.wangou_bend={x:e.tempData.wangou_bend.x+y,y:e.tempData.wangou_bend.y+k};break}case"wangou_end":{$.wangou_end={x:e.tempData.wangou_end.x,y:e.tempData.wangou_end.y+k};const V=getBend$8($.wangou_start,$.wangou_end,e.tempData.wangou_bendCursor,e.tempData.wangou_bendDegree);$.wangou_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.wangou_bendCursor=e.getParam("-"),e.tempData.wangou_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$n(g,e);updateGlyphByParams$n(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$n(g,e);updateGlyphByParams$n(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_length),e.setParam("-",y.pie_horizonalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.wangou_verticalSpan),e.setParam("-",y.wangou_bendCursor),e.setParam("-",y.wangou_bendDegree-30*Number(e.getParam("")||1)),e.tempData=null}},skeletonToBones_xie_gou=e=>{const n=[],{xie_start:r,xie_end:g,xie_bend:y,gou_start:k,gou_end:$}=e,V=maxSegment;for(let z=0;z<V;z++){const j=z/V,ae=(z+1)/V,re=quadraticBezierPoint$6(r,y,g,j),oe=quadraticBezierPoint$6(r,y,g,ae),ue={id:`xie_segment_${z}`,start:re,end:oe,length:Math.sqrt((oe.x-re.x)**2+(oe.y-re.y)**2),uAxis:normalize$k({x:oe.x-re.x,y:oe.y-re.y}),vAxis:normalize$k({x:-(oe.y-re.y),y:oe.x-re.x}),children:[],bindMatrix:createIdentityMatrix$k(),currentMatrix:createIdentityMatrix$k()};z>0&&(ue.parent=`xie_segment_${z-1}`,n[z-1].children.push(ue.id)),n.push(ue)}Math.sqrt(($.x-k.x)**2+($.y-k.y)**2);const L=maxSegment;for(let z=0;z<L;z++){const j=z/L,ae=(z+1)/L,re={x:k.x+($.x-k.x)*j,y:k.y+($.y-k.y)*j},oe={x:k.x+($.x-k.x)*ae,y:k.y+($.y-k.y)*ae},ue={id:`gou_segment_${z}`,start:re,end:oe,length:Math.sqrt((oe.x-re.x)**2+(oe.y-re.y)**2),uAxis:normalize$k({x:oe.x-re.x,y:oe.y-re.y}),vAxis:normalize$k({x:-(oe.y-re.y),y:oe.x-re.x}),children:[],bindMatrix:createIdentityMatrix$k(),currentMatrix:createIdentityMatrix$k()};z===0?(ue.parent=`xie_segment_${V-1}`,n[V-1].children.push(ue.id)):(ue.parent=`gou_segment_${z-1}`,n[V+z-1].children.push(ue.id)),n.push(ue)}return n},normalize$k=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$k=()=>[1,0,0,1,0,0],quadraticBezierPoint$6=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_xie_gou=e=>{const n=new CustomGlyph(e),r={xie_horizonalSpan:n.getParam("-"),xie_verticalSpan:n.getParam("-"),xie_bendCursor:n.getParam("-"),xie_bendDegree:Number(n.getParam("-"))+30*Number(n.getParam("")||1),gou_horizonalSpan:n.getParam("-"),gou_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$m(r,n)},bindSkeletonGlyph_xie_gou=e=>{e._o||instanceBasicGlyph_xie_gou(e),glyphSkeletonBind(e._o)},distance$7=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend$7=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x+r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$+g*Math.sin(L),y:V+g*Math.cos(L)}},updateGlyphByParams$m=(e,n)=>{const{xie_horizonalSpan:r,xie_verticalSpan:g,xie_bendCursor:y,xie_bendDegree:k,gou_horizonalSpan:$,gou_verticalSpan:V}=e,{ox:L,oy:z}=n._glyph.skeleton,j=350+L||0,ae=250+z||0,re=new FP.Joint("xie_start",{x:j,y:ae}),oe=new FP.Joint("xie_end",{x:re.x+r,y:re.y+g});distance$7(re,oe);const ue=re.x+y*r,le=re.y+y*g,de=Math.atan2(g,r),he=new FP.Joint("xie_bend",{x:ue-k*Math.sin(de),y:le+k*Math.cos(de)}),_e=new FP.Joint("gou_start",{x:re.x+r,y:re.y+g}),Ce=new FP.Joint("gou_end",{x:_e.x+$,y:_e.y-V});n.addJoint(re),n.addJoint(oe),n.addJoint(he),n.addJoint(_e),n.addJoint(Ce);const Ne={xie_start:re,xie_bend:he,xie_end:oe,gou_start:_e,gou_end:Ce};n.addRefLine(refline(re,he)),n.addRefLine(refline(he,oe)),n.addRefLine(refline(_e,Ce)),n.getSkeleton=()=>Ne},computeParamsByJoints$m=(e,n)=>{const{xie_start:r,xie_end:g,xie_bend:y,gou_start:k,gou_end:$}=e,V=n.getParamRange("-"),L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=n.getParamRange("-"),re=n.getParamRange("-"),oe=range(g.x-r.x,V),ue=range(g.y-r.y,L),le=FP.distanceAndFootPoint(r,g,y),de=range(le.percentageFromA,z),he=range(le.distance,j),_e=range($.x-k.x,ae),Ce=range(k.y-$.y,re);return{xie_horizonalSpan:oe,xie_verticalSpan:ue,xie_bendCursor:de,xie_bendDegree:he,gou_horizonalSpan:_e,gou_verticalSpan:Ce,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_xie_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"xie_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"xie_bend":{$.xie_bend={x:e.tempData.xie_bend.x+y,y:e.tempData.xie_bend.y+k};break}case"xie_end":{$.xie_end={x:e.tempData.xie_end.x+y,y:e.tempData.xie_end.y+k};const V=getBend$7($.xie_start,$.xie_end,e.tempData.xie_bendCursor,e.tempData.xie_bendDegree);$.xie_bend={x:V.x,y:V.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.xie_end={x:e.tempData.xie_end.x+y,y:e.tempData.xie_end.y+k};const V=getBend$7($.xie_start,$.xie_end,e.tempData.xie_bendCursor,e.tempData.xie_bendDegree);$.xie_bend={x:V.x,y:V.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.xie_bendCursor=e.getParam("-"),e.tempData.xie_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$m(g,e);updateGlyphByParams$m(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$m(g,e);updateGlyphByParams$m(y,e),e.setParam("-",y.xie_horizonalSpan),e.setParam("-",y.xie_verticalSpan),e.setParam("-",y.xie_bendCursor),e.setParam("-",y.xie_bendDegree-30*Number(e.getParam("")||1)),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_xie_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"xie_bend":{$.xie_bend={x:e.tempData.xie_bend.x+y,y:e.tempData.xie_bend.y+k};break}case"xie_end":{$.xie_end={x:e.tempData.xie_end.x+y,y:e.tempData.xie_end.y+k};const V=getBend$7($.xie_start,$.xie_end,e.tempData.xie_bendCursor,e.tempData.xie_bendDegree);$.xie_bend={x:V.x,y:V.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.xie_end={x:e.tempData.xie_end.x+y,y:e.tempData.xie_end.y+k};const V=getBend$7($.xie_start,$.xie_end,e.tempData.xie_bendCursor,e.tempData.xie_bendDegree);$.xie_bend={x:V.x,y:V.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.xie_bendCursor=e.getParam("-"),e.tempData.xie_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$m(g,e);updateGlyphByParams$m(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$m(g,e);updateGlyphByParams$m(y,e),updateSkeletonTransformation(e),e.setParam("-",y.xie_horizonalSpan),e.setParam("-",y.xie_verticalSpan),e.setParam("-",y.xie_bendCursor),e.setParam("-",y.xie_bendDegree-30*Number(e.getParam("")||1)),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},skeletonToBones_shu_zhe=e=>{const n=[],{shu_start:r,shu_end:g,zhe_start:y,zhe_end:k}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const $=maxSegment;for(let L=0;L<$;L++){const z=L/$,j=(L+1)/$,ae={x:r.x+(g.x-r.x)*z,y:r.y+(g.y-r.y)*z},re={x:r.x+(g.x-r.x)*j,y:r.y+(g.y-r.y)*j},oe={id:`shu_segment_${L}`,start:ae,end:re,length:Math.sqrt((re.x-ae.x)**2+(re.y-ae.y)**2),uAxis:normalize$j({x:re.x-ae.x,y:re.y-ae.y}),vAxis:normalize$j({x:-(re.y-ae.y),y:re.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$j(),currentMatrix:createIdentityMatrix$j()};L>0&&(oe.parent=`shu_segment_${L-1}`,n[L-1].children.push(oe.id)),n.push(oe)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const V=maxSegment;for(let L=0;L<V;L++){const z=L/V,j=(L+1)/V,ae={x:y.x+(k.x-y.x)*z,y:y.y+(k.y-y.y)*z},re={x:y.x+(k.x-y.x)*j,y:y.y+(k.y-y.y)*j},oe={id:`zhe_segment_${L}`,start:ae,end:re,length:Math.sqrt((re.x-ae.x)**2+(re.y-ae.y)**2),uAxis:normalize$j({x:re.x-ae.x,y:re.y-ae.y}),vAxis:normalize$j({x:-(re.y-ae.y),y:re.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$j(),currentMatrix:createIdentityMatrix$j()};L===0?(oe.parent=`shu_segment_${$-1}`,n[$-1].children.push(oe.id)):(oe.parent=`zhe_segment_${L-1}`,n[$+L-1].children.push(oe.id)),n.push(oe)}return n},normalize$j=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$j=()=>[1,0,0,1,0,0],instanceBasicGlyph_shu_zhe=e=>{const n=new CustomGlyph(e),r={shu_horizonalSpan:n.getParam("-"),shu_verticalSpan:n.getParam("-"),zhe_length:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$l(r,n)},bindSkeletonGlyph_shu_zhe=e=>{e._o||instanceBasicGlyph_shu_zhe(e),glyphSkeletonBind(e._o)},updateGlyphByParams$l=(e,n)=>{const{shu_horizonalSpan:r,shu_verticalSpan:g,zhe_length:y,skeletonRefPos:k,weight:$}=e,{ox:V,oy:L}=n._glyph.skeleton,z=250+V||0,j=250+L||0,ae=new FP.Joint("shu_start",{x:z,y:j}),re=new FP.Joint("shu_end",{x:ae.x+r,y:ae.y+g});let oe,ue;const le=new FP.Joint("zhe_start_ref",{x:ae.x+r,y:ae.y+g}),de=new FP.Joint("zhe_end_ref",{x:le.x+y,y:le.y});k===1?(oe=new FP.Joint("zhe_start",{x:le.x,y:le.y+$/2}),ue=new FP.Joint("zhe_end",{x:de.x,y:de.y+$/2})):k===2?(oe=new FP.Joint("zhe_start",{x:le.x,y:le.y-$/2}),ue=new FP.Joint("zhe_end",{x:de.x,y:de.y-$/2})):(oe=new FP.Joint("zhe_start",{x:le.x,y:le.y}),ue=new FP.Joint("zhe_end",{x:de.x,y:de.y})),n.addJoint(le),n.addJoint(de),n.addRefLine(refline(le,de,"ref")),n.addJoint(ae),n.addJoint(re),n.addJoint(oe),n.addJoint(ue);const he={shu_start:ae,shu_end:re,zhe_start:oe,zhe_end:ue};n.addRefLine(refline(ae,re)),n.addRefLine(refline(oe,ue)),n.getSkeleton=()=>he},computeParamsByJoints$l=(e,n)=>{const{shu_start:r,shu_end:g,zhe_start:y,zhe_end:k}=e,$=n.getParamRange("-"),V=n.getParamRange("-"),L=n.getParamRange("-"),z=range(g.x-r.x,$),j=range(g.y-r.y,V),ae=range(k.x-y.x,L);return{shu_horizonalSpan:z,shu_verticalSpan:j,zhe_length:ae,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_shu_zhe=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"shu_end":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}case"zhe_start":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$l(g,e);updateGlyphByParams$l(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$l(g,e);updateGlyphByParams$l(y,e),e.setParam("-",y.shu_horizonalSpan),e.setParam("-",y.shu_verticalSpan),e.setParam("-",y.zhe_length),e.tempData=null}},updateSkeletonListener_after_bind_shu_zhe=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_end":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}case"zhe_start":{$.shu_end={x:e.tempData.shu_end.x+y,y:e.tempData.shu_end.y+k},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y+k},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$l(g,e);updateGlyphByParams$l(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$l(g,e);updateGlyphByParams$l(y,e),updateSkeletonTransformation(e),e.setParam("-",y.shu_horizonalSpan),e.setParam("-",y.shu_verticalSpan),e.setParam("-",y.zhe_length),e.tempData=null}},skeletonToBones_shu_wan_gou=e=>{const n=[],{shu_start:r,shu_end:g,wan_start:y,wan_end:k,gou_start:$,gou_end:V}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const L=maxSegment;for(let ae=0;ae<L;ae++){const re=ae/L,oe=(ae+1)/L,ue={x:r.x+(g.x-r.x)*re,y:r.y+(g.y-r.y)*re},le={x:r.x+(g.x-r.x)*oe,y:r.y+(g.y-r.y)*oe},de={id:`shu_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$i({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$i({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$i(),currentMatrix:createIdentityMatrix$i()};ae>0&&(de.parent=`shu_segment_${ae-1}`,n[ae-1].children.push(de.id)),n.push(de)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const z=maxSegment;for(let ae=0;ae<z;ae++){const re=ae/z,oe=(ae+1)/z,ue={x:y.x+(k.x-y.x)*re,y:y.y+(k.y-y.y)*re},le={x:y.x+(k.x-y.x)*oe,y:y.y+(k.y-y.y)*oe},de={id:`wan_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$i({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$i({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$i(),currentMatrix:createIdentityMatrix$i()};ae===0?(de.parent=`shu_segment_${L-1}`,n[L-1].children.push(de.id)):(de.parent=`wan_segment_${ae-1}`,n[L+ae-1].children.push(de.id)),n.push(de)}Math.sqrt((V.x-$.x)**2+(V.y-$.y)**2);const j=maxSegment;for(let ae=0;ae<j;ae++){const re=ae/j,oe=(ae+1)/j,ue={x:$.x+(V.x-$.x)*re,y:$.y+(V.y-$.y)*re},le={x:$.x+(V.x-$.x)*oe,y:$.y+(V.y-$.y)*oe},de={id:`gou_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$i({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$i({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$i(),currentMatrix:createIdentityMatrix$i()};ae===0?(de.parent=`wan_segment_${z-1}`,n[L+z-1].children.push(de.id)):(de.parent=`gou_segment_${ae-1}`,n[L+z+ae-1].children.push(de.id)),n.push(de)}return n},normalize$i=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$i=()=>[1,0,0,1,0,0],instanceBasicGlyph_shu_wan_gou=e=>{const n=new CustomGlyph(e),r={shu_length:n.getParam("-"),wan_length:n.getParam("-"),gou_horizonalSpan:n.getParam("-"),gou_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$k(r,n)},bindSkeletonGlyph_shu_wan_gou=e=>{e._o||instanceBasicGlyph_shu_wan_gou(e),glyphSkeletonBind(e._o)},updateGlyphByParams$k=(e,n)=>{const{shu_length:r,wan_length:g,gou_horizonalSpan:y,gou_verticalSpan:k,skeletonRefPos:$,weight:V}=e,{ox:L,oy:z}=n._glyph.skeleton,j=370+L||0,ae=250+z||0,re=new FP.Joint("shu_start",{x:j,y:ae}),oe=new FP.Joint("shu_end",{x:re.x,y:re.y+r}),ue=new FP.Joint("wan_start",{x:re.x,y:re.y+r}),le=new FP.Joint("wan_end",{x:ue.x+g,y:ue.y}),de=new FP.Joint("gou_start",{x:ue.x+g,y:ue.y}),he=new FP.Joint("gou_end",{x:de.x+y,y:de.y-k});n.addJoint(re),n.addJoint(oe),n.addJoint(ue),n.addJoint(le),n.addJoint(de),n.addJoint(he);const _e={shu_start:re,shu_end:oe,wan_start:ue,wan_end:le,gou_start:de,gou_end:he};n.addRefLine(refline(re,oe)),n.addRefLine(refline(ue,le)),n.addRefLine(refline(de,he)),n.getSkeleton=()=>_e},computeParamsByJoints$k=(e,n)=>{const{shu_start:r,shu_end:g,wan_start:y,wan_end:k,gou_start:$,gou_end:V}=e,L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=n.getParamRange("-"),re=range(g.y-r.y,L),oe=range(k.x-y.x,z),ue=range(V.x-$.x,j),le=range($.y-V.y,ae);return{shu_length:re,wan_length:oe,gou_horizonalSpan:ue,gou_verticalSpan:le,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_shu_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"shu_end":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.wan_start={x:e.tempData.wan_start.x,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x,y:e.tempData.gou_end.y+k};break}case"wan_start":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.wan_start={x:e.tempData.wan_start.x,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x,y:e.tempData.gou_end.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"gou_start":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$k(g,e);updateGlyphByParams$k(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$k(g,e);updateGlyphByParams$k(y,e),e.setParam("-",y.shu_length),e.setParam("-",y.wan_length),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_shu_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_end":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.wan_start={x:e.tempData.wan_start.x,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x,y:e.tempData.gou_end.y+k};break}case"wan_start":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.wan_start={x:e.tempData.wan_start.x,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x,y:e.tempData.gou_end.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"gou_start":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$k(g,e);updateGlyphByParams$k(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$k(g,e);updateGlyphByParams$k(y,e),updateSkeletonTransformation(e),e.setParam("-",y.shu_length),e.setParam("-",y.wan_length),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},skeletonToBones_shu_wan=e=>{const n=[],{shu_start:r,shu_end:g,wan_start:y,wan_end:k}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const $=maxSegment;for(let L=0;L<$;L++){const z=L/$,j=(L+1)/$,ae={x:r.x+(g.x-r.x)*z,y:r.y+(g.y-r.y)*z},re={x:r.x+(g.x-r.x)*j,y:r.y+(g.y-r.y)*j},oe={id:`shu_segment_${L}`,start:ae,end:re,length:Math.sqrt((re.x-ae.x)**2+(re.y-ae.y)**2),uAxis:normalize$h({x:re.x-ae.x,y:re.y-ae.y}),vAxis:normalize$h({x:-(re.y-ae.y),y:re.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$h(),currentMatrix:createIdentityMatrix$h()};L>0&&(oe.parent=`shu_segment_${L-1}`,n[L-1].children.push(oe.id)),n.push(oe)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const V=maxSegment;for(let L=0;L<V;L++){const z=L/V,j=(L+1)/V,ae={x:y.x+(k.x-y.x)*z,y:y.y+(k.y-y.y)*z},re={x:y.x+(k.x-y.x)*j,y:y.y+(k.y-y.y)*j},oe={id:`wan_segment_${L}`,start:ae,end:re,length:Math.sqrt((re.x-ae.x)**2+(re.y-ae.y)**2),uAxis:normalize$h({x:re.x-ae.x,y:re.y-ae.y}),vAxis:normalize$h({x:-(re.y-ae.y),y:re.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$h(),currentMatrix:createIdentityMatrix$h()};L===0?(oe.parent=`shu_segment_${$-1}`,n[$-1].children.push(oe.id)):(oe.parent=`wan_segment_${L-1}`,n[$+L-1].children.push(oe.id)),n.push(oe)}return n},normalize$h=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$h=()=>[1,0,0,1,0,0],instanceBasicGlyph_shu_wan=e=>{const n=new CustomGlyph(e),r={shu_length:n.getParam("-"),wan_length:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$j(r,n)},bindSkeletonGlyph_shu_wan=e=>{e._o||instanceBasicGlyph_shu_wan(e),glyphSkeletonBind(e._o)},updateGlyphByParams$j=(e,n)=>{const{shu_length:r,wan_length:g,skeletonRefPos:y,weight:k}=e,{ox:$,oy:V}=n._glyph.skeleton,L=400+$||0,z=350+V||0;let j,ae;const re=new FP.Joint("shu_start_ref",{x:L,y:z}),oe=new FP.Joint("shu_end_ref",{x:re.x,y:re.y+r});y===1?(j=new FP.Joint("shu_start",{x:re.x-k/2,y:re.y}),ae=new FP.Joint("shu_end",{x:oe.x-k/2,y:oe.y})):y===2?(j=new FP.Joint("shu_start",{x:re.x+k/2,y:re.y}),ae=new FP.Joint("shu_end",{x:oe.x+k/2,y:oe.y})):(j=new FP.Joint("shu_start",{x:re.x,y:re.y}),ae=new FP.Joint("shu_end",{x:oe.x,y:oe.y})),n.addJoint(re),n.addJoint(oe),n.addRefLine(refline(re,oe,"ref"));const ue=new FP.Joint("wan_start",{x:j.x,y:j.y+r}),le=new FP.Joint("wan_end",{x:ue.x+g,y:ue.y});n.addJoint(j),n.addJoint(ae),n.addJoint(ue),n.addJoint(le);const de={shu_start:j,shu_end:ae,wan_start:ue,wan_end:le};n.addRefLine(refline(j,ae)),n.addRefLine(refline(ue,le)),n.getSkeleton=()=>de},computeParamsByJoints$j=(e,n)=>{const{shu_start:r,shu_end:g,wan_start:y,wan_end:k}=e,$=n.getParamRange("-"),V=n.getParamRange("-"),L=range(g.y-r.y,$),z=range(k.x-y.x,V);return{shu_length:L,wan_length:z,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_shu_wan=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"shu_end":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.wan_start={x:e.tempData.wan_start.x,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x,y:e.tempData.wan_end.y+k};break}case"wan_start":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.wan_start={x:e.tempData.wan_start.x,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x,y:e.tempData.wan_end.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$j(g,e);updateGlyphByParams$j(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$j(g,e);updateGlyphByParams$j(y,e),e.setParam("-",y.shu_length),e.setParam("-",y.wan_length),e.tempData=null}},updateSkeletonListener_after_bind_shu_wan=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_end":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.wan_start={x:e.tempData.wan_start.x,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x,y:e.tempData.wan_end.y+k};break}case"wan_start":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.wan_start={x:e.tempData.wan_start.x,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x,y:e.tempData.wan_end.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$j(g,e);updateGlyphByParams$j(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$j(g,e);updateGlyphByParams$j(y,e),updateSkeletonTransformation(e),e.setParam("-",y.shu_length),e.setParam("-",y.wan_length),e.tempData=null}},skeletonToBones_shu_tiao=e=>{const n=[],{shu_start:r,shu_end:g,tiao_start:y,tiao_end:k}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const $=maxSegment;for(let L=0;L<$;L++){const z=L/$,j=(L+1)/$,ae={x:r.x+(g.x-r.x)*z,y:r.y+(g.y-r.y)*z},re={x:r.x+(g.x-r.x)*j,y:r.y+(g.y-r.y)*j},oe={id:`shu_segment_${L}`,start:ae,end:re,length:Math.sqrt((re.x-ae.x)**2+(re.y-ae.y)**2),uAxis:normalize$g({x:re.x-ae.x,y:re.y-ae.y}),vAxis:normalize$g({x:-(re.y-ae.y),y:re.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$g(),currentMatrix:createIdentityMatrix$g()};L>0&&(oe.parent=`shu_segment_${L-1}`,n[L-1].children.push(oe.id)),n.push(oe)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const V=maxSegment;for(let L=0;L<V;L++){const z=L/V,j=(L+1)/V,ae={x:y.x+(k.x-y.x)*z,y:y.y+(k.y-y.y)*z},re={x:y.x+(k.x-y.x)*j,y:y.y+(k.y-y.y)*j},oe={id:`tiao_segment_${L}`,start:ae,end:re,length:Math.sqrt((re.x-ae.x)**2+(re.y-ae.y)**2),uAxis:normalize$g({x:re.x-ae.x,y:re.y-ae.y}),vAxis:normalize$g({x:-(re.y-ae.y),y:re.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$g(),currentMatrix:createIdentityMatrix$g()};L===0?(oe.parent=`shu_segment_${$-1}`,n[$-1].children.push(oe.id)):(oe.parent=`tiao_segment_${L-1}`,n[$+L-1].children.push(oe.id)),n.push(oe)}return n},normalize$g=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$g=()=>[1,0,0,1,0,0],instanceBasicGlyph_shu_tiao=e=>{const n=new CustomGlyph(e),r={shu_length:n.getParam("-"),tiao_horizonalSpan:n.getParam("-"),tiao_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$i(r,n)},bindSkeletonGlyph_shu_tiao=e=>{e._o||instanceBasicGlyph_shu_tiao(e),glyphSkeletonBind(e._o)},updateGlyphByParams$i=(e,n)=>{const{shu_length:r,tiao_horizonalSpan:g,tiao_verticalSpan:y,skeletonRefPos:k,weight:$}=e,{ox:V,oy:L}=n._glyph.skeleton,z=420+V||0,j=250+L||0;let ae,re;const oe=new FP.Joint("shu_start_ref",{x:z,y:j}),ue=new FP.Joint("shu_end_ref",{x:oe.x,y:oe.y+r});k===1?(ae=new FP.Joint("shu_start",{x:oe.x-$/2,y:oe.y}),re=new FP.Joint("shu_end",{x:ue.x-$/2,y:ue.y})):k===2?(ae=new FP.Joint("shu_start",{x:oe.x+$/2,y:oe.y}),re=new FP.Joint("shu_end",{x:ue.x+$/2,y:ue.y})):(ae=new FP.Joint("shu_start",{x:oe.x,y:oe.y}),re=new FP.Joint("shu_end",{x:ue.x,y:ue.y})),n.addJoint(oe),n.addJoint(ue),n.addRefLine(refline(oe,ue,"ref"));const le=new FP.Joint("tiao_start",{x:ae.x,y:ae.y+r}),de=new FP.Joint("tiao_end",{x:le.x+g,y:le.y-y});n.addJoint(ae),n.addJoint(re),n.addJoint(le),n.addJoint(de);const he={shu_start:ae,shu_end:re,tiao_start:le,tiao_end:de};n.addRefLine(refline(ae,re)),n.addRefLine(refline(le,de)),n.getSkeleton=()=>he},computeParamsByJoints$i=(e,n)=>{const{shu_start:r,shu_end:g,tiao_start:y,tiao_end:k}=e,$=n.getParamRange("-"),V=n.getParamRange("-"),L=n.getParamRange("-"),z=range(g.y-r.y,$),j=range(k.x-y.x,V),ae=range(y.y-k.y,L);return{shu_length:z,tiao_horizonalSpan:j,tiao_verticalSpan:ae,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_shu_tiao=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"shu_end":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.tiao_start={x:e.tempData.tiao_start.x,y:e.tempData.tiao_start.y+k},$.tiao_end={x:e.tempData.tiao_end.x,y:e.tempData.tiao_end.y+k};break}case"tiao_start":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.tiao_start={x:e.tempData.tiao_start.x,y:e.tempData.tiao_start.y+k},$.tiao_end={x:e.tempData.tiao_end.x,y:e.tempData.tiao_end.y+k};break}case"tiao_end":{$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$i(g,e);updateGlyphByParams$i(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$i(g,e);updateGlyphByParams$i(y,e),e.setParam("-",y.shu_length),e.setParam("-",y.tiao_horizonalSpan),e.setParam("-",y.tiao_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_shu_tiao=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_end":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.tiao_start={x:e.tempData.tiao_start.x,y:e.tempData.tiao_start.y+k},$.tiao_end={x:e.tempData.tiao_end.x,y:e.tempData.tiao_end.y+k};break}case"tiao_start":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.tiao_start={x:e.tempData.tiao_start.x,y:e.tempData.tiao_start.y+k},$.tiao_end={x:e.tempData.tiao_end.x,y:e.tempData.tiao_end.y+k};break}case"tiao_end":{$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$i(g,e);updateGlyphByParams$i(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$i(g,e);updateGlyphByParams$i(y,e),updateSkeletonTransformation(e),e.setParam("-",y.shu_length),e.setParam("-",y.tiao_horizonalSpan),e.setParam("-",y.tiao_verticalSpan),e.tempData=null}},skeletonToBones_shu_pie=e=>{const n=[],{shu_start:r,shu_end:g,pie_start:y,pie_bend:k,pie_end:$}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const V=maxSegment;for(let z=0;z<V;z++){const j=z/V,ae=(z+1)/V,re={x:r.x+(g.x-r.x)*j,y:r.y+(g.y-r.y)*j},oe={x:r.x+(g.x-r.x)*ae,y:r.y+(g.y-r.y)*ae};n.push({id:`shu_segment_${z}`,start:re,end:oe,length:Math.sqrt((oe.x-re.x)**2+(oe.y-re.y)**2),uAxis:normalize$f({x:oe.x-re.x,y:oe.y-re.y}),vAxis:normalize$f({x:-(oe.y-re.y),y:oe.x-re.x}),children:[],bindMatrix:createIdentityMatrix$f(),currentMatrix:createIdentityMatrix$f()})}const L=maxSegment;for(let z=0;z<L;z++){const j=z/L,ae=(z+1)/L,re=quadraticBezierPoint$5(y,k,$,j),oe=quadraticBezierPoint$5(y,k,$,ae),ue={id:`pie_segment_${z}`,start:re,end:oe,length:Math.sqrt((oe.x-re.x)**2+(oe.y-re.y)**2),uAxis:normalize$f({x:oe.x-re.x,y:oe.y-re.y}),vAxis:normalize$f({x:-(oe.y-re.y),y:oe.x-re.x}),children:[],bindMatrix:createIdentityMatrix$f(),currentMatrix:createIdentityMatrix$f()};z===0?(ue.parent=`shu_segment_${V-1}`,n[V-1].children.push(ue.id)):(ue.parent=`pie_segment_${z-1}`,n[V+z-1].children.push(ue.id)),n.push(ue)}return n},normalize$f=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$f=()=>[1,0,0,1,0,0],quadraticBezierPoint$5=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_shu_pie=e=>{const n=new CustomGlyph(e),r={shu_length:n.getParam("-"),pie_horizonalSpan:n.getParam("-"),pie_verticalSpan:n.getParam("-"),pie_bendCursor:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$h(r,n)},bindSkeletonGlyph_shu_pie=e=>{e._o||instanceBasicGlyph_shu_pie(e),glyphSkeletonBind(e._o)},getBend$6=(e,n,r)=>{const g=Math.abs(n.y-e.y);return{x:e.x,y:e.y+r*g}},updateGlyphByParams$h=(e,n)=>{const{shu_length:r,pie_horizonalSpan:g,pie_verticalSpan:y,pie_bendCursor:k,skeletonRefPos:$,weight:V}=e,{ox:L,oy:z}=n._glyph.skeleton,j=600+L||0,ae=250+z||0;let re,oe;const ue=new FP.Joint("shu_start_ref",{x:j,y:ae}),le=new FP.Joint("shu_end_ref",{x:ue.x,y:ue.y+r});$===1?(re=new FP.Joint("shu_start",{x:ue.x-V/2,y:ue.y}),oe=new FP.Joint("shu_end",{x:le.x-V/2,y:le.y})):$===2?(re=new FP.Joint("shu_start",{x:ue.x+V/2,y:ue.y}),oe=new FP.Joint("shu_end",{x:le.x+V/2,y:le.y})):(re=new FP.Joint("shu_start",{x:ue.x,y:ue.y}),oe=new FP.Joint("shu_end",{x:le.x,y:le.y})),n.addJoint(ue),n.addJoint(le),n.addRefLine(refline(ue,le,"ref"));const de=new FP.Joint("pie_start",{x:re.x,y:re.y+r}),he=new FP.Joint("pie_bend",{x:de.x,y:de.y+k*y}),_e=new FP.Joint("pie_end",{x:de.x-g,y:de.y+y});n.addJoint(re),n.addJoint(oe),n.addJoint(de),n.addJoint(_e),n.addJoint(he);const Ce={shu_start:re,shu_end:oe,pie_start:de,pie_end:_e,pie_bend:he};n.addRefLine(refline(re,oe)),n.addRefLine(refline(de,he)),n.addRefLine(refline(he,_e)),n.getSkeleton=()=>Ce},computeParamsByJoints$h=(e,n)=>{const{shu_start:r,shu_end:g,pie_start:y,pie_bend:k,pie_end:$}=e,V=n.getParamRange("-"),L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=range(g.y-r.y,V),re=range(y.x-$.x,L),oe=range($.y-y.y,z),ue=range((k.y-y.y)/oe,j);return{shu_length:ae,pie_horizonalSpan:re,pie_verticalSpan:oe,pie_bendCursor:ue,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_shu_pie=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"shu_end":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.pie_start={x:e.tempData.pie_start.x,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x,y:e.tempData.pie_end.y+k};break}case"pie_start":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.pie_start={x:e.tempData.pie_start.x,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x,y:e.tempData.pie_end.y+k};break}case"pie_bend":{$.pie_bend={x:e.tempData.pie_bend.x,y:e.tempData.pie_bend.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$6($.pie_start,$.pie_end,e.tempData.pie_bendCursor);$.pie_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.pie_bendCursor=e.getParam("-"),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$h(g,e);updateGlyphByParams$h(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$h(g,e);updateGlyphByParams$h(y,e),e.setParam("-",y.shu_length),e.setParam("-",y.pie_horizonalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.pie_bendCursor),e.tempData=null}},updateSkeletonListener_after_bind_shu_pie=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_end":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.pie_start={x:e.tempData.pie_start.x,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x,y:e.tempData.pie_end.y+k};break}case"pie_start":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.pie_start={x:e.tempData.pie_start.x,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x,y:e.tempData.pie_end.y+k};break}case"pie_bend":{$.pie_bend={x:e.tempData.pie_bend.x,y:e.tempData.pie_bend.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$6($.pie_start,$.pie_end,e.tempData.pie_bendCursor);$.pie_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.pie_bendCursor=e.getParam("-"),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$h(g,e);updateGlyphByParams$h(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$h(g,e);updateGlyphByParams$h(y,e),updateSkeletonTransformation(e),e.setParam("-",y.shu_length),e.setParam("-",y.pie_horizonalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.pie_bendCursor),e.tempData=null}},skeletonToBones_heng_zhe_tiao=e=>{const n=[],{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k,tiao_start:$,tiao_end:V}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const L=maxSegment;for(let ae=0;ae<L;ae++){const re=ae/L,oe=(ae+1)/L,ue={x:r.x+(g.x-r.x)*re,y:r.y+(g.y-r.y)*re},le={x:r.x+(g.x-r.x)*oe,y:r.y+(g.y-r.y)*oe},de={id:`heng_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$e({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$e({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$e(),currentMatrix:createIdentityMatrix$e()};ae>0&&(de.parent=`heng_segment_${ae-1}`,n[ae-1].children.push(de.id)),n.push(de)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const z=maxSegment;for(let ae=0;ae<z;ae++){const re=ae/z,oe=(ae+1)/z,ue={x:y.x+(k.x-y.x)*re,y:y.y+(k.y-y.y)*re},le={x:y.x+(k.x-y.x)*oe,y:y.y+(k.y-y.y)*oe},de={id:`zhe_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$e({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$e({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$e(),currentMatrix:createIdentityMatrix$e()};ae===0?(de.parent=`heng_segment_${L-1}`,n[L-1].children.push(de.id)):(de.parent=`zhe_segment_${ae-1}`,n[L+ae-1].children.push(de.id)),n.push(de)}Math.sqrt((V.x-$.x)**2+(V.y-$.y)**2);const j=maxSegment;for(let ae=0;ae<j;ae++){const re=ae/j,oe=(ae+1)/j,ue={x:$.x+(V.x-$.x)*re,y:$.y+(V.y-$.y)*re},le={x:$.x+(V.x-$.x)*oe,y:$.y+(V.y-$.y)*oe},de={id:`tiao_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$e({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$e({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$e(),currentMatrix:createIdentityMatrix$e()};ae===0?(de.parent=`zhe_segment_${z-1}`,n[L+z-1].children.push(de.id)):(de.parent=`tiao_segment_${ae-1}`,n[L+z+ae-1].children.push(de.id)),n.push(de)}return n},normalize$e=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$e=()=>[1,0,0,1,0,0],instanceBasicGlyph_heng_zhe_tiao=e=>{const n=new CustomGlyph(e),r={heng_length:n.getParam("-"),zhe_length:n.getParam("-"),tiao_horizonalSpan:n.getParam("-"),tiao_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$g(r,n)},bindSkeletonGlyph_heng_zhe_tiao=e=>{e._o||instanceBasicGlyph_heng_zhe_tiao(e),glyphSkeletonBind(e._o)},updateGlyphByParams$g=(e,n)=>{const{heng_length:r,zhe_length:g,tiao_horizonalSpan:y,tiao_verticalSpan:k,skeletonRefPos:$,weight:V}=e,{ox:L,oy:z}=n._glyph.skeleton,j=425+L||0,ae=245+z||0;let re,oe;const ue=new FP.Joint("heng_start_ref",{x:j,y:ae}),le=new FP.Joint("heng_end_ref",{x:ue.x+r,y:ue.y});$===1?(re=new FP.Joint("heng_start",{x:ue.x,y:ue.y+V/2}),oe=new FP.Joint("heng_end",{x:le.x,y:le.y+V/2})):$===2?(re=new FP.Joint("heng_start",{x:ue.x,y:ue.y-V/2}),oe=new FP.Joint("heng_end",{x:le.x,y:le.y-V/2})):(re=new FP.Joint("heng_start",{x:ue.x,y:ue.y}),oe=new FP.Joint("heng_end",{x:le.x,y:le.y})),n.addJoint(ue),n.addJoint(le),n.addRefLine(refline(ue,le,"ref"));let de,he;const _e=new FP.Joint("zhe_start_ref",{x:ue.x+r,y:ue.y}),Ce=new FP.Joint("zhe_end_ref",{x:_e.x,y:_e.y+g});$===1?(de=new FP.Joint("zhe_start",{x:_e.x-V/2,y:_e.y}),he=new FP.Joint("zhe_end",{x:Ce.x-V/2,y:Ce.y})):$===2?(de=new FP.Joint("zhe_start",{x:_e.x+V/2,y:_e.y}),he=new FP.Joint("zhe_end",{x:Ce.x+V/2,y:Ce.y})):(de=new FP.Joint("zhe_start",{x:_e.x,y:_e.y}),he=new FP.Joint("zhe_end",{x:Ce.x,y:Ce.y})),n.addJoint(_e),n.addJoint(Ce),n.addRefLine(refline(_e,Ce,"ref"));const Ne=new FP.Joint("tiao_start",{x:de.x,y:de.y+g}),$e=new FP.Joint("tiao_end",{x:Ne.x+y,y:Ne.y-k});n.addJoint(re),n.addJoint(oe),n.addJoint(de),n.addJoint(he),n.addJoint(Ne),n.addJoint($e);const xe={heng_start:re,heng_end:oe,zhe_start:de,zhe_end:he,tiao_start:Ne,tiao_end:$e};n.addRefLine(refline(re,oe)),n.addRefLine(refline(de,he)),n.addRefLine(refline(Ne,$e)),n.getSkeleton=()=>xe},computeParamsByJoints$g=(e,n)=>{const{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k,tiao_start:$,tiao_end:V}=e,L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=n.getParamRange("-"),re=range(g.x-r.x,L),oe=range(k.y-y.y,z),ue=range(V.x-$.x,j),le=range($.y-V.y,ae);return{heng_length:re,zhe_length:oe,tiao_horizonalSpan:ue,tiao_verticalSpan:le,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_zhe_tiao=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x,y:e.tempData.zhe_end.y+k},$.tiao_start={x:e.tempData.tiao_start.x,y:e.tempData.tiao_start.y+k},$.tiao_end={x:e.tempData.tiao_end.x,y:e.tempData.tiao_end.y+k};break}case"tiao_start":{$.zhe_end={x:e.tempData.zhe_end.x,y:e.tempData.zhe_end.y+k},$.tiao_start={x:e.tempData.tiao_start.x,y:e.tempData.tiao_start.y+k},$.tiao_end={x:e.tempData.tiao_end.x,y:e.tempData.tiao_end.y+k};break}case"tiao_end":{$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$g(g,e);updateGlyphByParams$g(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$g(g,e);updateGlyphByParams$g(y,e),e.setParam("-",y.heng_length),e.setParam("-",y.zhe_length),e.setParam("-",y.tiao_horizonalSpan),e.setParam("-",y.tiao_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_heng_zhe_tiao=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y},$.tiao_start={x:e.tempData.tiao_start.x+y,y:e.tempData.tiao_start.y},$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x,y:e.tempData.zhe_end.y+k},$.tiao_start={x:e.tempData.tiao_start.x,y:e.tempData.tiao_start.y+k},$.tiao_end={x:e.tempData.tiao_end.x,y:e.tempData.tiao_end.y+k};break}case"tiao_start":{$.zhe_end={x:e.tempData.zhe_end.x,y:e.tempData.zhe_end.y+k},$.tiao_start={x:e.tempData.tiao_start.x,y:e.tempData.tiao_start.y+k},$.tiao_end={x:e.tempData.tiao_end.x,y:e.tempData.tiao_end.y+k};break}case"tiao_end":{$.tiao_end={x:e.tempData.tiao_end.x+y,y:e.tempData.tiao_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$g(g,e);updateGlyphByParams$g(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$g(g,e);updateGlyphByParams$g(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_length),e.setParam("-",y.zhe_length),e.setParam("-",y.tiao_horizonalSpan),e.setParam("-",y.tiao_verticalSpan),e.tempData=null}},skeletonToBones_heng_zhe2=e=>{const n=[],{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const $=maxSegment;for(let L=0;L<$;L++){const z=L/$,j=(L+1)/$,ae={x:r.x+(g.x-r.x)*z,y:r.y+(g.y-r.y)*z},re={x:r.x+(g.x-r.x)*j,y:r.y+(g.y-r.y)*j},oe={id:`heng_segment_${L}`,start:ae,end:re,length:Math.sqrt((re.x-ae.x)**2+(re.y-ae.y)**2),uAxis:normalize$d({x:re.x-ae.x,y:re.y-ae.y}),vAxis:normalize$d({x:-(re.y-ae.y),y:re.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$d(),currentMatrix:createIdentityMatrix$d()};L>0&&(oe.parent=`heng_segment_${L-1}`,n[L-1].children.push(oe.id)),n.push(oe)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const V=maxSegment;for(let L=0;L<V;L++){const z=L/V,j=(L+1)/V,ae={x:y.x+(k.x-y.x)*z,y:y.y+(k.y-y.y)*z},re={x:y.x+(k.x-y.x)*j,y:y.y+(k.y-y.y)*j},oe={id:`zhe_segment_${L}`,start:ae,end:re,length:Math.sqrt((re.x-ae.x)**2+(re.y-ae.y)**2),uAxis:normalize$d({x:re.x-ae.x,y:re.y-ae.y}),vAxis:normalize$d({x:-(re.y-ae.y),y:re.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$d(),currentMatrix:createIdentityMatrix$d()};L===0?(oe.parent=`heng_segment_${$-1}`,n[$-1].children.push(oe.id)):(oe.parent=`zhe_segment_${L-1}`,n[$+L-1].children.push(oe.id)),n.push(oe)}return n},normalize$d=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$d=()=>[1,0,0,1,0,0],instanceBasicGlyph_heng_zhe2=e=>{const n=new CustomGlyph(e),r={heng_length:n.getParam("-"),zhe_length:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$f(r,n)},bindSkeletonGlyph_heng_zhe2=e=>{e._o||instanceBasicGlyph_heng_zhe2(e),glyphSkeletonBind(e._o)},updateGlyphByParams$f=(e,n)=>{const{heng_length:r,zhe_length:g,skeletonRefPos:y,weight:k}=e,{ox:$,oy:V}=n._glyph.skeleton,L=250+$||0,z=345+V||0;let j,ae;const re=new FP.Joint("heng_start_ref",{x:L,y:z}),oe=new FP.Joint("heng_end_ref",{x:re.x+r,y:re.y});y===1?(j=new FP.Joint("heng_start",{x:re.x,y:re.y+k/2}),ae=new FP.Joint("heng_end",{x:oe.x,y:oe.y+k/2})):y===2?(j=new FP.Joint("heng_start",{x:re.x,y:re.y-k/2}),ae=new FP.Joint("heng_end",{x:oe.x,y:oe.y-k/2})):(j=new FP.Joint("heng_start",{x:re.x,y:re.y}),ae=new FP.Joint("heng_end",{x:oe.x,y:oe.y})),n.addJoint(re),n.addJoint(oe),n.addRefLine(refline(re,oe,"ref"));let ue,le;const de=new FP.Joint("zhe_start_ref",{x:re.x+r,y:re.y}),he=new FP.Joint("zhe_end_ref",{x:de.x,y:de.y+g});y===1?(ue=new FP.Joint("zhe_start",{x:de.x-k/2,y:de.y}),le=new FP.Joint("zhe_end",{x:he.x-k/2,y:he.y})):y===2?(ue=new FP.Joint("zhe_start",{x:de.x+k/2,y:de.y}),le=new FP.Joint("zhe_end",{x:he.x+k/2,y:he.y})):(ue=new FP.Joint("zhe_start",{x:de.x,y:de.y}),le=new FP.Joint("zhe_end",{x:he.x,y:he.y})),n.addJoint(de),n.addJoint(he),n.addRefLine(refline(de,he,"ref")),n.addJoint(j),n.addJoint(ae),n.addJoint(ue),n.addJoint(le);const _e={heng_start:j,heng_end:ae,zhe_start:ue,zhe_end:le};n.addRefLine(refline(j,ae)),n.addRefLine(refline(ue,le)),n.getSkeleton=()=>_e},computeParamsByJoints$f=(e,n)=>{const{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k}=e,$=n.getParamRange("-"),V=n.getParamRange("-"),L=range(g.x-r.x,$),z=range(k.y-y.y,V);return{heng_length:L,zhe_length:z,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_zhe2=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x,y:e.tempData.zhe_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$f(g,e);updateGlyphByParams$f(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$f(g,e);updateGlyphByParams$f(y,e),e.setParam("-",y.heng_length),e.setParam("-",y.zhe_length),e.tempData=null}},updateSkeletonListener_after_bind_heng_zhe2=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x,y:e.tempData.zhe_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$f(g,e);updateGlyphByParams$f(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$f(g,e);updateGlyphByParams$f(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_length),e.setParam("-",y.zhe_length),e.tempData=null}},skeletonToBones_heng_zhe_wan=e=>{const n=[],{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k,wan_start:$,wan_end:V}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const L=maxSegment;for(let ae=0;ae<L;ae++){const re=ae/L,oe=(ae+1)/L,ue={x:r.x+(g.x-r.x)*re,y:r.y+(g.y-r.y)*re},le={x:r.x+(g.x-r.x)*oe,y:r.y+(g.y-r.y)*oe},de={id:`heng_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$c({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$c({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$c(),currentMatrix:createIdentityMatrix$c()};ae>0&&(de.parent=`heng_segment_${ae-1}`,n[ae-1].children.push(de.id)),n.push(de)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const z=maxSegment;for(let ae=0;ae<z;ae++){const re=ae/z,oe=(ae+1)/z,ue={x:y.x+(k.x-y.x)*re,y:y.y+(k.y-y.y)*re},le={x:y.x+(k.x-y.x)*oe,y:y.y+(k.y-y.y)*oe},de={id:`zhe_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$c({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$c({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$c(),currentMatrix:createIdentityMatrix$c()};ae===0?(de.parent=`heng_segment_${L-1}`,n[L-1].children.push(de.id)):(de.parent=`zhe_segment_${ae-1}`,n[L+ae-1].children.push(de.id)),n.push(de)}Math.sqrt((V.x-$.x)**2+(V.y-$.y)**2);const j=maxSegment;for(let ae=0;ae<j;ae++){const re=ae/j,oe=(ae+1)/j,ue={x:$.x+(V.x-$.x)*re,y:$.y+(V.y-$.y)*re},le={x:$.x+(V.x-$.x)*oe,y:$.y+(V.y-$.y)*oe},de={id:`wan_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$c({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$c({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$c(),currentMatrix:createIdentityMatrix$c()};ae===0?(de.parent=`zhe_segment_${z-1}`,n[L+z-1].children.push(de.id)):(de.parent=`wan_segment_${ae-1}`,n[L+z+ae-1].children.push(de.id)),n.push(de)}return n},normalize$c=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$c=()=>[1,0,0,1,0,0],instanceBasicGlyph_heng_zhe_wan=e=>{const n=new CustomGlyph(e),r={heng_length:n.getParam("-"),zhe_horizonalSpan:n.getParam("-"),zhe_verticalSpan:n.getParam("-"),wan_length:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$e(r,n)},bindSkeletonGlyph_heng_zhe_wan=e=>{e._o||instanceBasicGlyph_heng_zhe_wan(e),glyphSkeletonBind(e._o)},updateGlyphByParams$e=(e,n)=>{const{heng_length:r,zhe_horizonalSpan:g,zhe_verticalSpan:y,wan_length:k,skeletonRefPos:$,weight:V}=e,{ox:L,oy:z}=n._glyph.skeleton,j=300+L||0,ae=345+z||0;let re,oe;const ue=new FP.Joint("heng_start_ref",{x:j,y:ae}),le=new FP.Joint("heng_end_ref",{x:ue.x+r,y:ue.y});$===1?(re=new FP.Joint("heng_start",{x:ue.x,y:ue.y+V/2}),oe=new FP.Joint("heng_end",{x:le.x,y:le.y+V/2})):$===2?(re=new FP.Joint("heng_start",{x:ue.x,y:ue.y-V/2}),oe=new FP.Joint("heng_end",{x:le.x,y:le.y-V/2})):(re=new FP.Joint("heng_start",{x:ue.x,y:ue.y}),oe=new FP.Joint("heng_end",{x:le.x,y:le.y})),n.addJoint(ue),n.addJoint(le),n.addRefLine(refline(ue,le,"ref"));const de=new FP.Joint("zhe_start",{x:re.x+r,y:re.y}),he=new FP.Joint("zhe_end",{x:de.x-g,y:de.y+y}),_e=new FP.Joint("wan_start",{x:de.x-g,y:de.y+y}),Ce=new FP.Joint("wan_end",{x:_e.x+k,y:_e.y});n.addJoint(re),n.addJoint(oe),n.addJoint(de),n.addJoint(he),n.addJoint(_e),n.addJoint(Ce);const Ne={heng_start:re,heng_end:oe,zhe_start:de,zhe_end:he,wan_start:_e,wan_end:Ce};n.addRefLine(refline(re,oe)),n.addRefLine(refline(de,he)),n.addRefLine(refline(_e,Ce)),n.getSkeleton=()=>Ne},computeParamsByJoints$e=(e,n)=>{const{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k,wan_start:$,wan_end:V}=e,L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=n.getParamRange("-"),re=range(g.x-r.x,L),oe=range(y.x-k.x,z),ue=range(k.y-y.y,j),le=range(V.x-$.x,ae);return{heng_length:re,zhe_horizonalSpan:oe,zhe_verticalSpan:ue,wan_length:le,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_zhe_wan=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};break}case"wan_start":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$e(g,e);updateGlyphByParams$e(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$e(g,e);updateGlyphByParams$e(y,e),e.setParam("-",y.heng_length),e.setParam("-",y.zhe_horizonalSpan),e.setParam("-",y.zhe_verticalSpan),e.setParam("-",y.wan_length),e.tempData=null}},updateSkeletonListener_after_bind_heng_zhe_wan=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};break}case"wan_start":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$e(g,e);updateGlyphByParams$e(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$e(g,e);updateGlyphByParams$e(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_length),e.setParam("-",y.zhe_horizonalSpan),e.setParam("-",y.zhe_verticalSpan),e.setParam("-",y.wan_length),e.tempData=null}},skeletonToBones_er_heng_zhe=e=>{const n=[],{heng1_start:r,heng1_end:g,zhe1_start:y,zhe1_end:k,heng2_start:$,heng2_end:V,zhe2_start:L,zhe2_end:z}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const j=maxSegment;for(let ue=0;ue<j;ue++){const le=ue/j,de=(ue+1)/j,he={x:r.x+(g.x-r.x)*le,y:r.y+(g.y-r.y)*le},_e={x:r.x+(g.x-r.x)*de,y:r.y+(g.y-r.y)*de},Ce={id:`heng1_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$b({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$b({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$b(),currentMatrix:createIdentityMatrix$b()};ue>0&&(Ce.parent=`heng1_segment_${ue-1}`,n[ue-1].children.push(Ce.id)),n.push(Ce)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const ae=maxSegment;for(let ue=0;ue<ae;ue++){const le=ue/ae,de=(ue+1)/ae,he={x:y.x+(k.x-y.x)*le,y:y.y+(k.y-y.y)*le},_e={x:y.x+(k.x-y.x)*de,y:y.y+(k.y-y.y)*de},Ce={id:`zhe1_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$b({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$b({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$b(),currentMatrix:createIdentityMatrix$b()};ue===0?(Ce.parent=`heng1_segment_${j-1}`,n[j-1].children.push(Ce.id)):(Ce.parent=`zhe1_segment_${ue-1}`,n[j+ue-1].children.push(Ce.id)),n.push(Ce)}Math.sqrt((V.x-$.x)**2+(V.y-$.y)**2);const re=maxSegment;for(let ue=0;ue<re;ue++){const le=ue/re,de=(ue+1)/re,he={x:$.x+(V.x-$.x)*le,y:$.y+(V.y-$.y)*le},_e={x:$.x+(V.x-$.x)*de,y:$.y+(V.y-$.y)*de},Ce={id:`heng2_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$b({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$b({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$b(),currentMatrix:createIdentityMatrix$b()};ue===0?(Ce.parent=`zhe1_segment_${ae-1}`,n[j+ae-1].children.push(Ce.id)):(Ce.parent=`heng2_segment_${ue-1}`,n[j+ae+ue-1].children.push(Ce.id)),n.push(Ce)}Math.sqrt((z.x-L.x)**2+(z.y-L.y)**2);const oe=maxSegment;for(let ue=0;ue<oe;ue++){const le=ue/oe,de=(ue+1)/oe,he={x:L.x+(z.x-L.x)*le,y:L.y+(z.y-L.y)*le},_e={x:L.x+(z.x-L.x)*de,y:L.y+(z.y-L.y)*de},Ce={id:`zhe2_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$b({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$b({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$b(),currentMatrix:createIdentityMatrix$b()};ue===0?(Ce.parent=`heng2_segment_${re-1}`,n[j+ae+re-1].children.push(Ce.id)):(Ce.parent=`zhe2_segment_${ue-1}`,n[j+ae+re+ue-1].children.push(Ce.id)),n.push(Ce)}return n},normalize$b=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$b=()=>[1,0,0,1,0,0],instanceBasicGlyph_er_heng_zhe=e=>{const n=new CustomGlyph(e),r={heng1_length:n.getParam("1-"),zhe1_horizonalSpan:n.getParam("1-"),zhe1_verticalSpan:n.getParam("1-"),heng2_length:n.getParam("2-"),zhe2_horizonalSpan:n.getParam("2-"),zhe2_verticalSpan:n.getParam("2-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$d(r,n)},bindSkeletonGlyph_er_heng_zhe=e=>{e._o||instanceBasicGlyph_er_heng_zhe(e),glyphSkeletonBind(e._o)},updateGlyphByParams$d=(e,n)=>{const{heng1_length:r,zhe1_horizonalSpan:g,zhe1_verticalSpan:y,heng2_length:k,zhe2_horizonalSpan:$,zhe2_verticalSpan:V,skeletonRefPos:L,weight:z}=e,{ox:j,oy:ae}=n._glyph.skeleton,re=250+j||0,oe=295+ae||0;let ue,le;const de=new FP.Joint("heng1_start_ref",{x:re,y:oe}),he=new FP.Joint("heng1_end_ref",{x:de.x+r,y:de.y});L===1?(ue=new FP.Joint("heng1_start",{x:de.x,y:de.y+z/2}),le=new FP.Joint("heng1_end",{x:he.x,y:he.y+z/2})):L===2?(ue=new FP.Joint("heng1_start",{x:de.x,y:de.y-z/2}),le=new FP.Joint("heng1_end",{x:he.x,y:he.y-z/2})):(ue=new FP.Joint("heng1_start",{x:de.x,y:de.y}),le=new FP.Joint("heng1_end",{x:he.x,y:he.y})),n.addJoint(de),n.addJoint(he),n.addRefLine(refline(de,he,"ref"));const _e=new FP.Joint("zhe1_start",{x:ue.x+r,y:ue.y}),Ce=new FP.Joint("zhe1_end",{x:_e.x-g,y:_e.y+y}),Ne=new FP.Joint("heng2_start",{x:_e.x-g,y:_e.y+y}),$e=new FP.Joint("heng2_end",{x:Ne.x+k,y:Ne.y}),xe=new FP.Joint("zhe2_start",{x:Ne.x+k,y:Ne.y}),Ie=new FP.Joint("zhe2_end",{x:xe.x-$,y:xe.y+V});n.addJoint(ue),n.addJoint(le),n.addJoint(_e),n.addJoint(Ce),n.addJoint(Ne),n.addJoint($e),n.addJoint(xe),n.addJoint(Ie);const ze={heng1_start:ue,heng1_end:le,zhe1_start:_e,zhe1_end:Ce,heng2_start:Ne,heng2_end:$e,zhe2_start:xe,zhe2_end:Ie};n.addRefLine(refline(ue,le)),n.addRefLine(refline(_e,Ce)),n.addRefLine(refline(Ne,$e)),n.addRefLine(refline(xe,Ie)),n.getSkeleton=()=>ze},computeParamsByJoints$d=(e,n)=>{const{heng1_start:r,heng1_end:g,zhe1_start:y,zhe1_end:k,heng2_start:$,heng2_end:V,zhe2_start:L,zhe2_end:z}=e,j=n.getParamRange("1-"),ae=n.getParamRange("1-"),re=n.getParamRange("1-"),oe=n.getParamRange("2-"),ue=n.getParamRange("2-"),le=n.getParamRange("2-"),de=range(g.x-r.x,j),he=range(y.x-k.x,ae),_e=range(k.y-y.y,re),Ce=range(V.x-$.x,oe),Ne=range(L.x-z.x,ue),$e=range(z.y-L.y,le);return{heng1_length:de,zhe1_horizonalSpan:he,zhe1_verticalSpan:_e,heng2_length:Ce,zhe2_horizonalSpan:Ne,zhe2_verticalSpan:$e,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_er_heng_zhe=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng1_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"heng1_end":{$.heng1_end={x:e.tempData.heng1_end.x+y,y:e.tempData.heng1_end.y},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y},$.heng2_start={x:e.tempData.heng2_start.x+y,y:e.tempData.heng2_start.y},$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y};break}case"zhe1_start":{$.heng1_end={x:e.tempData.heng1_end.x+y,y:e.tempData.heng1_end.y},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y},$.heng2_start={x:e.tempData.heng2_start.x+y,y:e.tempData.heng2_start.y},$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y};break}case"zhe1_end":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.heng2_start={x:e.tempData.heng2_start.x+y,y:e.tempData.heng2_start.y+k},$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k};break}case"heng2_start":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.heng2_start={x:e.tempData.heng2_start.x+y,y:e.tempData.heng2_start.y+k},$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k};break}case"heng2_end":{$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y};break}case"zhe2_start":{$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y};break}case"zhe2_end":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$d(g,e);updateGlyphByParams$d(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$d(g,e);updateGlyphByParams$d(y,e),e.setParam("1-",y.heng1_length),e.setParam("1-",y.zhe1_horizonalSpan),e.setParam("1-",y.zhe1_verticalSpan),e.setParam("2-",y.heng2_length),e.setParam("2-",y.zhe2_horizonalSpan),e.setParam("2-",y.zhe2_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_er_heng_zhe=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng1_end":{$.heng1_end={x:e.tempData.heng1_end.x+y,y:e.tempData.heng1_end.y},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y},$.heng2_start={x:e.tempData.heng2_start.x+y,y:e.tempData.heng2_start.y},$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y};break}case"zhe1_start":{$.heng1_end={x:e.tempData.heng1_end.x+y,y:e.tempData.heng1_end.y},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y},$.heng2_start={x:e.tempData.heng2_start.x+y,y:e.tempData.heng2_start.y},$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y};break}case"zhe1_end":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.heng2_start={x:e.tempData.heng2_start.x+y,y:e.tempData.heng2_start.y+k},$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k};break}case"heng2_start":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.heng2_start={x:e.tempData.heng2_start.x+y,y:e.tempData.heng2_start.y+k},$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k};break}case"heng2_end":{$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y};break}case"zhe2_start":{$.heng2_end={x:e.tempData.heng2_end.x+y,y:e.tempData.heng2_end.y},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y};break}case"zhe2_end":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$d(g,e);updateGlyphByParams$d(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$d(g,e);updateGlyphByParams$d(y,e),updateSkeletonTransformation(e),e.setParam("1-",y.heng1_length),e.setParam("1-",y.zhe1_horizonalSpan),e.setParam("1-",y.zhe1_verticalSpan),e.setParam("2-",y.heng2_length),e.setParam("2-",y.zhe2_horizonalSpan),e.setParam("2-",y.zhe2_verticalSpan),e.tempData=null}},skeletonToBones_heng_zhe=e=>{const n=[],{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const $=maxSegment;for(let L=0;L<$;L++){const z=L/$,j=(L+1)/$,ae={x:r.x+(g.x-r.x)*z,y:r.y+(g.y-r.y)*z},re={x:r.x+(g.x-r.x)*j,y:r.y+(g.y-r.y)*j},oe={id:`heng_segment_${L}`,start:ae,end:re,length:Math.sqrt((re.x-ae.x)**2+(re.y-ae.y)**2),uAxis:normalize$a({x:re.x-ae.x,y:re.y-ae.y}),vAxis:normalize$a({x:-(re.y-ae.y),y:re.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$a(),currentMatrix:createIdentityMatrix$a()};L>0&&(oe.parent=`heng_segment_${L-1}`,n[L-1].children.push(oe.id)),n.push(oe)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const V=maxSegment;for(let L=0;L<V;L++){const z=L/V,j=(L+1)/V,ae={x:y.x+(k.x-y.x)*z,y:y.y+(k.y-y.y)*z},re={x:y.x+(k.x-y.x)*j,y:y.y+(k.y-y.y)*j},oe={id:`zhe_segment_${L}`,start:ae,end:re,length:Math.sqrt((re.x-ae.x)**2+(re.y-ae.y)**2),uAxis:normalize$a({x:re.x-ae.x,y:re.y-ae.y}),vAxis:normalize$a({x:-(re.y-ae.y),y:re.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$a(),currentMatrix:createIdentityMatrix$a()};L===0?(oe.parent=`heng_segment_${$-1}`,n[$-1].children.push(oe.id)):(oe.parent=`zhe_segment_${L-1}`,n[$+L-1].children.push(oe.id)),n.push(oe)}return n},normalize$a=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$a=()=>[1,0,0,1,0,0],instanceBasicGlyph_heng_zhe=e=>{const n=new CustomGlyph(e),r={heng_length:n.getParam("-"),zhe_horizonalSpan:n.getParam("-"),zhe_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$c(r,n)},bindSkeletonGlyph_heng_zhe=e=>{e._o||instanceBasicGlyph_heng_zhe(e),glyphSkeletonBind(e._o)},updateGlyphByParams$c=(e,n)=>{const{heng_length:r,zhe_horizonalSpan:g,zhe_verticalSpan:y,skeletonRefPos:k,weight:$}=e,{ox:V,oy:L}=n._glyph.skeleton,z=250+V||0,j=345+L||0;let ae,re;const oe=new FP.Joint("heng_start_ref",{x:z,y:j}),ue=new FP.Joint("heng_end_ref",{x:oe.x+r,y:oe.y});k===1?(ae=new FP.Joint("heng_start",{x:oe.x,y:oe.y+$/2}),re=new FP.Joint("heng_end",{x:ue.x,y:ue.y+$/2})):k===2?(ae=new FP.Joint("heng_start",{x:oe.x,y:oe.y-$/2}),re=new FP.Joint("heng_end",{x:ue.x,y:ue.y-$/2})):(ae=new FP.Joint("heng_start",{x:oe.x,y:oe.y}),re=new FP.Joint("heng_end",{x:ue.x,y:ue.y})),n.addJoint(oe),n.addJoint(ue),n.addRefLine(refline(oe,ue,"ref"));const le=new FP.Joint("zhe_start",{x:ae.x+r,y:ae.y}),de=new FP.Joint("zhe_end",{x:le.x-g,y:le.y+y});n.addJoint(ae),n.addJoint(re),n.addJoint(le),n.addJoint(de);const he={heng_start:ae,heng_end:re,zhe_start:le,zhe_end:de};n.addRefLine(refline(ae,re)),n.addRefLine(refline(le,de)),n.getSkeleton=()=>he},computeParamsByJoints$c=(e,n)=>{const{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k}=e,$=n.getParamRange("-"),V=n.getParamRange("-"),L=n.getParamRange("-"),z=range(g.x-r.x,$),j=range(y.x-k.x,V),ae=range(k.y-y.y,L);return{heng_length:z,zhe_horizonalSpan:j,zhe_verticalSpan:ae,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_zhe=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$c(g,e);updateGlyphByParams$c(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$c(g,e);updateGlyphByParams$c(y,e),e.setParam("-",y.heng_length),e.setParam("-",y.zhe_horizonalSpan),e.setParam("-",y.zhe_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_heng_zhe=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$c(g,e);updateGlyphByParams$c(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$c(g,e);updateGlyphByParams$c(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_length),e.setParam("-",y.zhe_horizonalSpan),e.setParam("-",y.zhe_verticalSpan),e.tempData=null}},skeletonToBones_heng_zhe_zhe_wan_gou=e=>{const n=[],{heng_start:r,heng_end:g,zhe1_start:y,zhe1_end:k,zhe2_start:$,zhe2_end:V,wan_start:L,wan_end:z,gou_start:j,gou_end:ae}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const re=maxSegment;for(let he=0;he<re;he++){const _e=he/re,Ce=(he+1)/re,Ne={x:r.x+(g.x-r.x)*_e,y:r.y+(g.y-r.y)*_e},$e={x:r.x+(g.x-r.x)*Ce,y:r.y+(g.y-r.y)*Ce},xe={id:`heng_segment_${he}`,start:Ne,end:$e,length:Math.sqrt(($e.x-Ne.x)**2+($e.y-Ne.y)**2),uAxis:normalize$9({x:$e.x-Ne.x,y:$e.y-Ne.y}),vAxis:normalize$9({x:-($e.y-Ne.y),y:$e.x-Ne.x}),children:[],bindMatrix:createIdentityMatrix$9(),currentMatrix:createIdentityMatrix$9()};he>0&&(xe.parent=`heng_segment_${he-1}`,n[he-1].children.push(xe.id)),n.push(xe)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const oe=maxSegment;for(let he=0;he<oe;he++){const _e=he/oe,Ce=(he+1)/oe,Ne={x:y.x+(k.x-y.x)*_e,y:y.y+(k.y-y.y)*_e},$e={x:y.x+(k.x-y.x)*Ce,y:y.y+(k.y-y.y)*Ce},xe={id:`zhe1_segment_${he}`,start:Ne,end:$e,length:Math.sqrt(($e.x-Ne.x)**2+($e.y-Ne.y)**2),uAxis:normalize$9({x:$e.x-Ne.x,y:$e.y-Ne.y}),vAxis:normalize$9({x:-($e.y-Ne.y),y:$e.x-Ne.x}),children:[],bindMatrix:createIdentityMatrix$9(),currentMatrix:createIdentityMatrix$9()};he===0?(xe.parent=`heng_segment_${re-1}`,n[re-1].children.push(xe.id)):(xe.parent=`zhe1_segment_${he-1}`,n[re+he-1].children.push(xe.id)),n.push(xe)}Math.sqrt((V.x-$.x)**2+(V.y-$.y)**2);const ue=maxSegment;for(let he=0;he<ue;he++){const _e=he/ue,Ce=(he+1)/ue,Ne={x:$.x+(V.x-$.x)*_e,y:$.y+(V.y-$.y)*_e},$e={x:$.x+(V.x-$.x)*Ce,y:$.y+(V.y-$.y)*Ce},xe={id:`zhe2_segment_${he}`,start:Ne,end:$e,length:Math.sqrt(($e.x-Ne.x)**2+($e.y-Ne.y)**2),uAxis:normalize$9({x:$e.x-Ne.x,y:$e.y-Ne.y}),vAxis:normalize$9({x:-($e.y-Ne.y),y:$e.x-Ne.x}),children:[],bindMatrix:createIdentityMatrix$9(),currentMatrix:createIdentityMatrix$9()};he===0?(xe.parent=`zhe1_segment_${oe-1}`,n[re+oe-1].children.push(xe.id)):(xe.parent=`zhe2_segment_${he-1}`,n[re+oe+he-1].children.push(xe.id)),n.push(xe)}Math.sqrt((z.x-L.x)**2+(z.y-L.y)**2);const le=maxSegment;for(let he=0;he<le;he++){const _e=he/le,Ce=(he+1)/le,Ne={x:L.x+(z.x-L.x)*_e,y:L.y+(z.y-L.y)*_e},$e={x:L.x+(z.x-L.x)*Ce,y:L.y+(z.y-L.y)*Ce},xe={id:`wan_segment_${he}`,start:Ne,end:$e,length:Math.sqrt(($e.x-Ne.x)**2+($e.y-Ne.y)**2),uAxis:normalize$9({x:$e.x-Ne.x,y:$e.y-Ne.y}),vAxis:normalize$9({x:-($e.y-Ne.y),y:$e.x-Ne.x}),children:[],bindMatrix:createIdentityMatrix$9(),currentMatrix:createIdentityMatrix$9()};he===0?(xe.parent=`zhe2_segment_${ue-1}`,n[re+oe+ue-1].children.push(xe.id)):(xe.parent=`wan_segment_${he-1}`,n[re+oe+ue+he-1].children.push(xe.id)),n.push(xe)}Math.sqrt((ae.x-j.x)**2+(ae.y-j.y)**2);const de=minSegment;for(let he=0;he<de;he++){const _e=he/de,Ce=(he+1)/de,Ne={x:j.x+(ae.x-j.x)*_e,y:j.y+(ae.y-j.y)*_e},$e={x:j.x+(ae.x-j.x)*Ce,y:j.y+(ae.y-j.y)*Ce},xe={id:`gou_segment_${he}`,start:Ne,end:$e,length:Math.sqrt(($e.x-Ne.x)**2+($e.y-Ne.y)**2),uAxis:normalize$9({x:$e.x-Ne.x,y:$e.y-Ne.y}),vAxis:normalize$9({x:-($e.y-Ne.y),y:$e.x-Ne.x}),children:[],bindMatrix:createIdentityMatrix$9(),currentMatrix:createIdentityMatrix$9()};he===0?(xe.parent=`wan_segment_${le-1}`,n[re+oe+ue+le-1].children.push(xe.id)):(xe.parent=`gou_segment_${he-1}`,n[re+oe+ue+le+he-1].children.push(xe.id)),n.push(xe)}return n},normalize$9=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$9=()=>[1,0,0,1,0,0],instanceBasicGlyph_heng_zhe_zhe_wan_gou=e=>{const n=new CustomGlyph(e),r={heng_length:n.getParam("-"),zhe1_horizonalSpan:n.getParam("1-"),zhe1_verticalSpan:n.getParam("1-"),zhe2_length:n.getParam("2-"),wan_horizonalSpan:n.getParam("-"),wan_verticalSpan:n.getParam("-"),gou_horizonalSpan:n.getParam("-"),gou_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$b(r,n)},bindSkeletonGlyph_heng_zhe_zhe_wan_gou=e=>{e._o||instanceBasicGlyph_heng_zhe_zhe_wan_gou(e),glyphSkeletonBind(e._o)},updateGlyphByParams$b=(e,n)=>{const{heng_length:r,zhe1_horizonalSpan:g,zhe1_verticalSpan:y,zhe2_length:k,wan_horizonalSpan:$,wan_verticalSpan:V,gou_horizonalSpan:L,gou_verticalSpan:z,skeletonRefPos:j,weight:ae}=e,{ox:re,oy:oe}=n._glyph.skeleton,ue=325+re||0,le=255+oe||0;let de,he;const _e=new FP.Joint("heng_start_ref",{x:ue,y:le}),Ce=new FP.Joint("heng_end_ref",{x:_e.x+r,y:_e.y});j===1?(de=new FP.Joint("heng_start",{x:_e.x,y:_e.y+ae/2}),he=new FP.Joint("heng_end",{x:Ce.x,y:Ce.y+ae/2})):j===2?(de=new FP.Joint("heng_start",{x:_e.x,y:_e.y-ae/2}),he=new FP.Joint("heng_end",{x:Ce.x,y:Ce.y-ae/2})):(de=new FP.Joint("heng_start",{x:_e.x,y:_e.y}),he=new FP.Joint("heng_end",{x:Ce.x,y:Ce.y})),n.addJoint(_e),n.addJoint(Ce),n.addRefLine(refline(_e,Ce,"ref"));const Ne=new FP.Joint("zhe1_start",{x:de.x+r,y:de.y}),$e=new FP.Joint("zhe1_end",{x:Ne.x-g,y:Ne.y+y}),xe=new FP.Joint("zhe2_start",{x:Ne.x-g,y:Ne.y+y}),Ie=new FP.Joint("zhe2_end",{x:xe.x+k,y:xe.y}),ze=new FP.Joint("wan_start",{x:xe.x+k,y:xe.y}),qe=new FP.Joint("wan_end",{x:ze.x-$,y:ze.y+V}),Et=new FP.Joint("gou_start",{x:ze.x-$,y:ze.y+V}),_n=new FP.Joint("gou_end",{x:Et.x-L,y:Et.y+z});n.addJoint(de),n.addJoint(he),n.addJoint(Ne),n.addJoint($e),n.addJoint(xe),n.addJoint(Ie),n.addJoint(ze),n.addJoint(qe),n.addJoint(Et),n.addJoint(_n);const Dt={heng_start:de,heng_end:he,zhe1_start:Ne,zhe1_end:$e,zhe2_start:xe,zhe2_end:Ie,wan_start:ze,wan_end:qe,gou_start:Et,gou_end:_n};n.addRefLine(refline(de,he)),n.addRefLine(refline(Ne,$e)),n.addRefLine(refline(xe,Ie)),n.addRefLine(refline(ze,qe)),n.addRefLine(refline(Et,_n)),n.getSkeleton=()=>Dt},computeParamsByJoints$b=(e,n)=>{const{heng_start:r,heng_end:g,zhe1_start:y,zhe1_end:k,zhe2_start:$,zhe2_end:V,wan_start:L,wan_end:z,gou_start:j,gou_end:ae}=e,re=n.getParamRange("-"),oe=n.getParamRange("1-"),ue=n.getParamRange("1-"),le=n.getParamRange("2-"),de=n.getParamRange("-"),he=n.getParamRange("-"),_e=n.getParamRange("-"),Ce=n.getParamRange("-"),Ne=range(g.x-r.x,re),$e=range(y.x-k.x,oe),xe=range(k.y-y.y,ue),Ie=range(V.x-$.x,le),ze=range(L.x-z.x,de),qe=range(z.y-L.y,he),Et=range(j.x-ae.x,_e),_n=range(ae.y-j.y,Ce);return{heng_length:Ne,zhe1_horizonalSpan:$e,zhe1_verticalSpan:xe,zhe2_length:Ie,wan_horizonalSpan:ze,wan_verticalSpan:qe,gou_horizonalSpan:Et,gou_verticalSpan:_n,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_zhe_zhe_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"zhe1_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"zhe1_end":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe2_start":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe2_end":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"wan_start":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$b(g,e);updateGlyphByParams$b(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$b(g,e);updateGlyphByParams$b(y,e),e.setParam("-",y.heng_length),e.setParam("1-",y.zhe1_horizonalSpan),e.setParam("1-",y.zhe1_verticalSpan),e.setParam("2-",y.zhe2_length),e.setParam("-",y.wan_horizonalSpan),e.setParam("-",y.wan_verticalSpan),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_heng_zhe_zhe_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"zhe1_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"zhe1_end":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe2_start":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"zhe2_end":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"wan_start":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$b(g,e);updateGlyphByParams$b(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$b(g,e);updateGlyphByParams$b(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_length),e.setParam("1-",y.zhe1_horizonalSpan),e.setParam("1-",y.zhe1_verticalSpan),e.setParam("2-",y.zhe2_length),e.setParam("-",y.wan_horizonalSpan),e.setParam("-",y.wan_verticalSpan),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},skeletonToBones_heng_zhe_wan_gou=e=>{const n=[],{heng_start:r,heng_end:g,zhe_start:y,zhe_bend:k,zhe_end:$,wan_start:V,wan_end:L,gou_start:z,gou_end:j}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const ae=maxSegment;for(let le=0;le<ae;le++){const de=le/ae,he=(le+1)/ae,_e={x:r.x+(g.x-r.x)*de,y:r.y+(g.y-r.y)*de},Ce={x:r.x+(g.x-r.x)*he,y:r.y+(g.y-r.y)*he},Ne={id:`heng_segment_${le}`,start:_e,end:Ce,length:Math.sqrt((Ce.x-_e.x)**2+(Ce.y-_e.y)**2),uAxis:normalize$8({x:Ce.x-_e.x,y:Ce.y-_e.y}),vAxis:normalize$8({x:-(Ce.y-_e.y),y:Ce.x-_e.x}),children:[],bindMatrix:createIdentityMatrix$8(),currentMatrix:createIdentityMatrix$8()};le>0&&(Ne.parent=`heng_segment_${le-1}`,n[le-1].children.push(Ne.id)),n.push(Ne)}const re=maxSegment;for(let le=0;le<re;le++){const de=le/re,he=(le+1)/re,_e=quadraticBezierPoint$4(y,k,$,de),Ce=quadraticBezierPoint$4(y,k,$,he),Ne={id:`zhe_segment_${le}`,start:_e,end:Ce,length:Math.sqrt((Ce.x-_e.x)**2+(Ce.y-_e.y)**2),uAxis:normalize$8({x:Ce.x-_e.x,y:Ce.y-_e.y}),vAxis:normalize$8({x:-(Ce.y-_e.y),y:Ce.x-_e.x}),children:[],bindMatrix:createIdentityMatrix$8(),currentMatrix:createIdentityMatrix$8()};le===0?(Ne.parent=`heng_segment_${ae-1}`,n[ae-1].children.push(Ne.id)):(Ne.parent=`zhe_segment_${le-1}`,n[n.length-1].children.push(Ne.id)),n.push(Ne)}Math.sqrt((L.x-V.x)**2+(L.y-V.y)**2);const oe=maxSegment;for(let le=0;le<oe;le++){const de=le/oe,he=(le+1)/oe,_e={x:V.x+(L.x-V.x)*de,y:V.y+(L.y-V.y)*de},Ce={x:V.x+(L.x-V.x)*he,y:V.y+(L.y-V.y)*he},Ne={id:`wan_segment_${le}`,start:_e,end:Ce,length:Math.sqrt((Ce.x-_e.x)**2+(Ce.y-_e.y)**2),uAxis:normalize$8({x:Ce.x-_e.x,y:Ce.y-_e.y}),vAxis:normalize$8({x:-(Ce.y-_e.y),y:Ce.x-_e.x}),children:[],bindMatrix:createIdentityMatrix$8(),currentMatrix:createIdentityMatrix$8()};le===0?(Ne.parent=`zhe_segment_${re-1}`,n[n.length-1].children.push(Ne.id)):(Ne.parent=`wan_segment_${le-1}`,n[n.length-1].children.push(Ne.id)),n.push(Ne)}Math.sqrt((j.x-z.x)**2+(j.y-z.y)**2);const ue=maxSegment;for(let le=0;le<ue;le++){const de=le/ue,he=(le+1)/ue,_e={x:z.x+(j.x-z.x)*de,y:z.y+(j.y-z.y)*de},Ce={x:z.x+(j.x-z.x)*he,y:z.y+(j.y-z.y)*he},Ne={id:`gou_segment_${le}`,start:_e,end:Ce,length:Math.sqrt((Ce.x-_e.x)**2+(Ce.y-_e.y)**2),uAxis:normalize$8({x:Ce.x-_e.x,y:Ce.y-_e.y}),vAxis:normalize$8({x:-(Ce.y-_e.y),y:Ce.x-_e.x}),children:[],bindMatrix:createIdentityMatrix$8(),currentMatrix:createIdentityMatrix$8()};le===0?(Ne.parent=`wan_segment_${oe-1}`,n[n.length-1].children.push(Ne.id)):(Ne.parent=`gou_segment_${le-1}`,n[n.length-1].children.push(Ne.id)),n.push(Ne)}return n},normalize$8=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$8=()=>[1,0,0,1,0,0],quadraticBezierPoint$4=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_heng_zhe_wan_gou=e=>{const n=new CustomGlyph(e),r={heng_length:n.getParam("-"),zhe_horizonalSpan:n.getParam("-"),zhe_verticalSpan:n.getParam("-"),zhe_bendCursor:n.getParam("-"),zhe_bendDegree:Number(n.getParam("-"))+30*Number(n.getParam("")||1),wan_length:n.getParam("-"),gou_horizonalSpan:n.getParam("-"),gou_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$a(r,n)},bindSkeletonGlyph_heng_zhe_wan_gou=e=>{e._o||instanceBasicGlyph_heng_zhe_wan_gou(e),glyphSkeletonBind(e._o)},distance$6=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend$5=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x+r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$+g*Math.sin(L),y:V+g*Math.cos(L)}},updateGlyphByParams$a=(e,n)=>{const{heng_length:r,zhe_horizonalSpan:g,zhe_verticalSpan:y,zhe_bendCursor:k,zhe_bendDegree:$,wan_length:V,gou_horizonalSpan:L,gou_verticalSpan:z}=e,{ox:j,oy:ae}=n._glyph.skeleton,re=350+j||0,oe=300+ae||0,ue=new FP.Joint("heng_start",{x:re,y:oe}),le=new FP.Joint("heng_end",{x:ue.x+r,y:ue.y}),de=new FP.Joint("zhe_start",{x:ue.x+r,y:ue.y}),he=new FP.Joint("zhe_end",{x:de.x-g,y:de.y+y});distance$6(de,he);const _e=de.x-k*g,Ce=de.y+k*y,Ne=Math.atan2(y,g),$e=new FP.Joint("zhe_bend",{x:_e-$*Math.sin(Ne),y:Ce-$*Math.cos(Ne)}),xe=new FP.Joint("wan_start",{x:de.x-g,y:de.y+y}),Ie=new FP.Joint("wan_end",{x:xe.x+V,y:xe.y}),ze=new FP.Joint("gou_start",{x:xe.x+V,y:xe.y}),qe=new FP.Joint("gou_end",{x:ze.x+L,y:ze.y-z});n.addJoint(ue),n.addJoint(le),n.addJoint(de),n.addJoint($e),n.addJoint(he),n.addJoint(xe),n.addJoint(Ie),n.addJoint(ze),n.addJoint(qe);const Et={heng_start:ue,heng_end:le,zhe_start:de,zhe_bend:$e,zhe_end:he,wan_start:xe,wan_end:Ie,gou_start:ze,gou_end:qe};n.addRefLine(refline(ue,le)),n.addRefLine(refline(de,$e)),n.addRefLine(refline($e,he)),n.addRefLine(refline(xe,Ie)),n.addRefLine(refline(ze,qe)),n.getSkeleton=()=>Et},computeParamsByJoints$a=(e,n)=>{const{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k,zhe_bend:$,wan_start:V,wan_end:L,gou_start:z,gou_end:j}=e,ae=n.getParamRange("-"),re=n.getParamRange("-"),oe=n.getParamRange("-"),ue=n.getParamRange("-"),le=n.getParamRange("-"),de=n.getParamRange("-"),he=n.getParamRange("-"),_e=n.getParamRange("-"),Ce=range(g.x-r.x,ae),Ne=range(y.x-k.x,re),$e=range(k.y-y.y,oe),xe=FP.distanceAndFootPoint(y,k,$),Ie=range(xe.percentageFromA,ue),ze=range(xe.distance,le),qe=range(L.x-V.x,de),Et=range(j.x-z.x,he),_n=range(z.y-j.y,_e);return{heng_length:Ce,zhe_horizonalSpan:Ne,zhe_verticalSpan:$e,zhe_bendCursor:Ie,zhe_bendDegree:ze,wan_length:qe,gou_verticalSpan:_n,gou_horizonalSpan:Et,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_zhe_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_bend={x:e.tempData.zhe_bend.x+y,y:e.tempData.zhe_bend.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_bend={x:e.tempData.zhe_bend.x+y,y:e.tempData.zhe_bend.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"zhe_bend":{$.zhe_bend={x:e.tempData.zhe_bend.x+y,y:e.tempData.zhe_bend.y+k};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};const V=getBend$5($.zhe_start,$.zhe_end,e.tempData.zhe_bendCursor,e.tempData.zhe_bendDegree);$.zhe_bend={x:V.x,y:V.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"wan_start":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};const V=getBend$5($.zhe_start,$.zhe_end,e.tempData.zhe_bendCursor,e.tempData.zhe_bendDegree);$.zhe_bend={x:V.x,y:V.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"gou_start":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.zhe_bendCursor=e.getParam("-"),e.tempData.zhe_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$a(g,e);updateGlyphByParams$a(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$a(g,e);updateGlyphByParams$a(y,e),e.setParam("-",y.heng_length),e.setParam("-",y.zhe_horizonalSpan),e.setParam("-",y.zhe_verticalSpan),e.setParam("-",y.zhe_bendCursor),e.setParam("-",y.zhe_bendDegree-30*Number(e.getParam("")||1)),e.setParam("-",y.wan_length),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_heng_zhe_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_bend={x:e.tempData.zhe_bend.x+y,y:e.tempData.zhe_bend.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_bend={x:e.tempData.zhe_bend.x+y,y:e.tempData.zhe_bend.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"zhe_bend":{$.zhe_bend={x:e.tempData.zhe_bend.x+y,y:e.tempData.zhe_bend.y+k};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};const V=getBend$5($.zhe_start,$.zhe_end,e.tempData.zhe_bendCursor,e.tempData.zhe_bendDegree);$.zhe_bend={x:V.x,y:V.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"wan_start":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k};const V=getBend$5($.zhe_start,$.zhe_end,e.tempData.zhe_bendCursor,e.tempData.zhe_bendDegree);$.zhe_bend={x:V.x,y:V.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y+k},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"gou_start":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.zhe_bendCursor=e.getParam("-"),e.tempData.zhe_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$a(g,e);updateGlyphByParams$a(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$a(g,e);updateGlyphByParams$a(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_length),e.setParam("-",y.zhe_horizonalSpan),e.setParam("-",y.zhe_verticalSpan),e.setParam("-",y.zhe_bendCursor),e.setParam("-",y.zhe_bendDegree-30*Number(e.getParam("")||1)),e.setParam("-",y.wan_length),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},skeletonToBones_heng_wan_gou=e=>{const n=[],{heng_start:r,heng_end:g,wan_start:y,wan_bend:k,wan_end:$,gou_start:V,gou_end:L}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const z=maxSegment;for(let re=0;re<z;re++){const oe=re/z,ue=(re+1)/z,le={x:r.x+(g.x-r.x)*oe,y:r.y+(g.y-r.y)*oe},de={x:r.x+(g.x-r.x)*ue,y:r.y+(g.y-r.y)*ue};n.push({id:`heng_segment_${re}`,start:le,end:de,length:Math.sqrt((de.x-le.x)**2+(de.y-le.y)**2),uAxis:normalize$7({x:de.x-le.x,y:de.y-le.y}),vAxis:normalize$7({x:-(de.y-le.y),y:de.x-le.x}),children:[],bindMatrix:createIdentityMatrix$7(),currentMatrix:createIdentityMatrix$7()})}const j=maxSegment;for(let re=0;re<j;re++){const oe=re/j,ue=(re+1)/j,le=quadraticBezierPoint$3(y,k,$,oe),de=quadraticBezierPoint$3(y,k,$,ue),he={id:`wan_segment_${re}`,start:le,end:de,length:Math.sqrt((de.x-le.x)**2+(de.y-le.y)**2),uAxis:normalize$7({x:de.x-le.x,y:de.y-le.y}),vAxis:normalize$7({x:-(de.y-le.y),y:de.x-le.x}),children:[],bindMatrix:createIdentityMatrix$7(),currentMatrix:createIdentityMatrix$7()};re===0?(he.parent=`heng_segment_${z-1}`,n[z-1].children.push(he.id)):(he.parent=`wan_segment_${re-1}`,n[z+re-1].children.push(he.id)),n.push(he)}Math.sqrt((L.x-V.x)**2+(L.y-V.y)**2);const ae=maxSegment;for(let re=0;re<ae;re++){const oe=re/ae,ue=(re+1)/ae,le={x:V.x+(L.x-V.x)*oe,y:V.y+(L.y-V.y)*oe},de={x:V.x+(L.x-V.x)*ue,y:V.y+(L.y-V.y)*ue},he={id:`gou_segment_${re}`,start:le,end:de,length:Math.sqrt((de.x-le.x)**2+(de.y-le.y)**2),uAxis:normalize$7({x:de.x-le.x,y:de.y-le.y}),vAxis:normalize$7({x:-(de.y-le.y),y:de.x-le.x}),children:[],bindMatrix:createIdentityMatrix$7(),currentMatrix:createIdentityMatrix$7()};re===0?(he.parent=`wan_segment_${j-1}`,n[z+j-1].children.push(he.id)):(he.parent=`gou_segment_${re-1}`,n[z+j+re-1].children.push(he.id)),n.push(he)}return n},normalize$7=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$7=()=>[1,0,0,1,0,0],quadraticBezierPoint$3=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_heng_wan_gou=e=>{const n=new CustomGlyph(e),r={heng_length:n.getParam("-"),wan_horizonalSpan:n.getParam("-"),wan_verticalSpan:n.getParam("-"),wan_bendCursor:n.getParam("-"),wan_bendDegree:n.getParam("-"),gou_horizonalSpan:n.getParam("-"),gou_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$9(r,n)},bindSkeletonGlyph_heng_wan_gou=e=>{e._o||instanceBasicGlyph_heng_wan_gou(e),glyphSkeletonBind(e._o)},distance$5=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend$4=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x+r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$+g*Math.sin(L),y:V+g*Math.cos(L)}},updateGlyphByParams$9=(e,n)=>{const{heng_length:r,wan_horizonalSpan:g,wan_verticalSpan:y,wan_bendCursor:k,wan_bendDegree:$,gou_horizonalSpan:V,gou_verticalSpan:L,skeletonRefPos:z,weight:j}=e,{ox:ae,oy:re}=n._glyph.skeleton,oe=300+ae||0,ue=250+re||0;let le,de;const he=new FP.Joint("heng_start_ref",{x:oe,y:ue}),_e=new FP.Joint("heng_end_ref",{x:he.x+r,y:he.y});z===1?(le=new FP.Joint("heng_start",{x:he.x,y:he.y+j/2}),de=new FP.Joint("heng_end",{x:_e.x,y:_e.y+j/2})):z===2?(le=new FP.Joint("heng_start",{x:he.x,y:he.y-j/2}),de=new FP.Joint("heng_end",{x:_e.x,y:_e.y-j/2})):(le=new FP.Joint("heng_start",{x:he.x,y:he.y}),de=new FP.Joint("heng_end",{x:_e.x,y:_e.y})),n.addJoint(he),n.addJoint(_e),n.addRefLine(refline(he,_e,"ref"));const Ce=new FP.Joint("wan_start",{x:le.x+r,y:le.y}),Ne=new FP.Joint("wan_end",{x:Ce.x+g,y:Ce.y+y});distance$5(Ce,Ne);const $e=Ce.x+k*g,xe=Ce.y+k*y,Ie=Math.atan2(y,g),ze=new FP.Joint("wan_bend",{x:$e-$*Math.sin(Ie),y:xe+$*Math.cos(Ie)}),qe=new FP.Joint("gou_start",{x:Ce.x+g,y:Ce.y+y}),Et=new FP.Joint("gou_end",{x:qe.x+V,y:qe.y-L});n.addJoint(le),n.addJoint(de),n.addJoint(Ce),n.addJoint(ze),n.addJoint(Ne),n.addJoint(qe),n.addJoint(Et);const _n={heng_start:le,heng_end:de,wan_start:Ce,wan_bend:ze,wan_end:Ne,gou_start:qe,gou_end:Et};n.addRefLine(refline(le,de)),n.addRefLine(refline(Ce,ze)),n.addRefLine(refline(ze,Ne)),n.addRefLine(refline(qe,Et)),n.getSkeleton=()=>_n},computeParamsByJoints$9=(e,n)=>{const{heng_start:r,heng_end:g,wan_start:y,wan_end:k,wan_bend:$,gou_start:V,gou_end:L}=e,z=n.getParamRange("-"),j=n.getParamRange("-"),ae=n.getParamRange("-"),re=n.getParamRange("-"),oe=n.getParamRange("-"),ue=n.getParamRange("-"),le=n.getParamRange("-"),de=range(g.x-r.x,z),he=range(k.x-y.x,j),_e=range(k.y-y.y,ae),Ce=FP.distanceAndFootPoint(y,k,$),Ne=range(Ce.percentageFromA,re),$e=range(Ce.distance,oe),xe=range(L.x-V.x,ue),Ie=range(V.y-L.y,le);return{heng_length:de,wan_horizonalSpan:he,wan_verticalSpan:_e,wan_bendCursor:Ne,wan_bendDegree:$e,gou_horizonalSpan:xe,gou_verticalSpan:Ie,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y},$.wan_bend={x:e.tempData.wan_bend.x+y,y:e.tempData.wan_bend.y},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"wan_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y},$.wan_bend={x:e.tempData.wan_bend.x+y,y:e.tempData.wan_bend.y},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"wan_bend":{$.wan_bend={x:e.tempData.wan_bend.x+y,y:e.tempData.wan_bend.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};const V=getBend$4($.wan_start,$.wan_end,e.tempData.wan_bendCursor,e.tempData.wan_bendDegree);$.wan_bend={x:V.x,y:V.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};const V=getBend$4($.wan_start,$.wan_end,e.tempData.wan_bendCursor,e.tempData.wan_bendDegree);$.wan_bend={x:V.x,y:V.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.wan_bendCursor=e.getParam("-"),e.tempData.wan_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$9(g,e);updateGlyphByParams$9(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$9(g,e);updateGlyphByParams$9(y,e),e.setParam("-",y.heng_length),e.setParam("-",y.wan_horizonalSpan),e.setParam("-",y.wan_verticalSpan),e.setParam("-",y.wan_bendCursor),e.setParam("-",y.wan_bendDegree-30*Number(e.getParam("")||1)),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_heng_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y},$.wan_bend={x:e.tempData.wan_bend.x+y,y:e.tempData.wan_bend.y},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"wan_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.wan_start={x:e.tempData.wan_start.x+y,y:e.tempData.wan_start.y},$.wan_bend={x:e.tempData.wan_bend.x+y,y:e.tempData.wan_bend.y},$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"wan_bend":{$.wan_bend={x:e.tempData.wan_bend.x+y,y:e.tempData.wan_bend.y+k};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};const V=getBend$4($.wan_start,$.wan_end,e.tempData.wan_bendCursor,e.tempData.wan_bendDegree);$.wan_bend={x:V.x,y:V.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.wan_end={x:e.tempData.wan_end.x+y,y:e.tempData.wan_end.y+k};const V=getBend$4($.wan_start,$.wan_end,e.tempData.wan_bendCursor,e.tempData.wan_bendDegree);$.wan_bend={x:V.x,y:V.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.wan_bendCursor=e.getParam("-"),e.tempData.wan_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$9(g,e);updateGlyphByParams$9(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$9(g,e);updateGlyphByParams$9(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_length),e.setParam("-",y.wan_horizonalSpan),e.setParam("-",y.wan_verticalSpan),e.setParam("-",y.wan_bendCursor),e.setParam("-",y.wan_bendDegree-30*Number(e.getParam("")||1)),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},skeletonToBones_heng_zhe_gou=e=>{const n=[],{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k,gou_start:$,gou_end:V}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const L=maxSegment;for(let ae=0;ae<L;ae++){const re=ae/L,oe=(ae+1)/L,ue={x:r.x+(g.x-r.x)*re,y:r.y+(g.y-r.y)*re},le={x:r.x+(g.x-r.x)*oe,y:r.y+(g.y-r.y)*oe},de={id:`heng_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$6({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$6({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$6(),currentMatrix:createIdentityMatrix$6()};ae>0&&(de.parent=`heng_segment_${ae-1}`,n[ae-1].children.push(de.id)),n.push(de)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const z=maxSegment;for(let ae=0;ae<z;ae++){const re=ae/z,oe=(ae+1)/z,ue={x:y.x+(k.x-y.x)*re,y:y.y+(k.y-y.y)*re},le={x:y.x+(k.x-y.x)*oe,y:y.y+(k.y-y.y)*oe},de={id:`zhe_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$6({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$6({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$6(),currentMatrix:createIdentityMatrix$6()};ae===0?(de.parent=`heng_segment_${L-1}`,n[L-1].children.push(de.id)):(de.parent=`zhe_segment_${ae-1}`,n[L+ae-1].children.push(de.id)),n.push(de)}Math.sqrt((V.x-$.x)**2+(V.y-$.y)**2);const j=maxSegment;for(let ae=0;ae<j;ae++){const re=ae/j,oe=(ae+1)/j,ue={x:$.x+(V.x-$.x)*re,y:$.y+(V.y-$.y)*re},le={x:$.x+(V.x-$.x)*oe,y:$.y+(V.y-$.y)*oe},de={id:`gou_segment_${ae}`,start:ue,end:le,length:Math.sqrt((le.x-ue.x)**2+(le.y-ue.y)**2),uAxis:normalize$6({x:le.x-ue.x,y:le.y-ue.y}),vAxis:normalize$6({x:-(le.y-ue.y),y:le.x-ue.x}),children:[],bindMatrix:createIdentityMatrix$6(),currentMatrix:createIdentityMatrix$6()};ae===0?(de.parent=`zhe_segment_${z-1}`,n[L+z-1].children.push(de.id)):(de.parent=`gou_segment_${ae-1}`,n[L+z+ae-1].children.push(de.id)),n.push(de)}return n},normalize$6=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$6=()=>[1,0,0,1,0,0],instanceBasicGlyph_heng_zhe_gou=e=>{const n=new CustomGlyph(e),r={heng_length:n.getParam("-"),zhe_horizonalSpan:n.getParam("-"),zhe_verticalSpan:n.getParam("-"),gou_horizonalSpan:n.getParam("-"),gou_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$8(r,n)},bindSkeletonGlyph_heng_zhe_gou=e=>{e._o||instanceBasicGlyph_heng_zhe_gou(e),glyphSkeletonBind(e._o)},updateGlyphByParams$8=(e,n)=>{const{heng_length:r,zhe_horizonalSpan:g,zhe_verticalSpan:y,gou_horizonalSpan:k,gou_verticalSpan:$,skeletonRefPos:V,weight:L}=e,{ox:z,oy:j}=n._glyph.skeleton,ae=250+z||0,re=350+j||0;let oe,ue;const le=new FP.Joint("heng_start_ref",{x:ae,y:re}),de=new FP.Joint("heng_end_ref",{x:le.x+r,y:le.y});V===1?(oe=new FP.Joint("heng_start",{x:le.x,y:le.y+L/2}),ue=new FP.Joint("heng_end",{x:de.x,y:de.y+L/2})):V===2?(oe=new FP.Joint("heng_start",{x:le.x,y:le.y-L/2}),ue=new FP.Joint("heng_end",{x:de.x,y:de.y-L/2})):(oe=new FP.Joint("heng_start",{x:le.x,y:le.y}),ue=new FP.Joint("heng_end",{x:de.x,y:de.y})),n.addJoint(le),n.addJoint(de),n.addRefLine(refline(le,de,"ref"));const he=new FP.Joint("zhe_start",{x:oe.x+r,y:oe.y}),_e=new FP.Joint("zhe_end",{x:he.x-g,y:he.y+y}),Ce=new FP.Joint("gou_start",{x:he.x-g,y:he.y+y}),Ne=new FP.Joint("gou_end",{x:Ce.x-k,y:Ce.y+$});n.addJoint(oe),n.addJoint(ue),n.addJoint(he),n.addJoint(_e),n.addJoint(Ce),n.addJoint(Ne);const $e={heng_start:oe,heng_end:ue,zhe_start:he,zhe_end:_e,gou_start:Ce,gou_end:Ne};n.addRefLine(refline(oe,ue)),n.addRefLine(refline(he,_e)),n.addRefLine(refline(Ce,Ne)),n.getSkeleton=()=>$e},computeParamsByJoints$8=(e,n)=>{const{heng_start:r,heng_end:g,zhe_start:y,zhe_end:k,gou_start:$,gou_end:V}=e,L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=n.getParamRange("-"),re=n.getParamRange("-"),oe=range(g.x-r.x,L),ue=range(y.x-k.x,z),le=range(k.y-y.y,j),de=range($.x-V.x,ae),he=range(V.y-$.y,re);return{heng_length:oe,zhe_horizonalSpan:ue,zhe_verticalSpan:le,gou_horizonalSpan:de,gou_verticalSpan:he,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_zhe_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$8(g,e);updateGlyphByParams$8(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$8(g,e);updateGlyphByParams$8(y,e),e.setParam("-",y.heng_length),e.setParam("-",y.zhe_horizonalSpan),e.setParam("-",y.zhe_verticalSpan),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_heng_zhe_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"zhe_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe_start={x:e.tempData.zhe_start.x+y,y:e.tempData.zhe_start.y},$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"zhe_end":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.zhe_end={x:e.tempData.zhe_end.x+y,y:e.tempData.zhe_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$8(g,e);updateGlyphByParams$8(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$8(g,e);updateGlyphByParams$8(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_length),e.setParam("-",y.zhe_horizonalSpan),e.setParam("-",y.zhe_verticalSpan),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},skeletonToBones_heng_pie=e=>{const n=[],{heng_start:r,heng_end:g,pie_start:y,pie_end:k,pie_bend:$}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const V=maxSegment;for(let z=0;z<V;z++){const j=z/V,ae=(z+1)/V,re={x:r.x+(g.x-r.x)*j,y:r.y+(g.y-r.y)*j},oe={x:r.x+(g.x-r.x)*ae,y:r.y+(g.y-r.y)*ae},ue={id:`heng_segment_${z}`,start:re,end:oe,length:Math.sqrt((oe.x-re.x)**2+(oe.y-re.y)**2),uAxis:normalize$5({x:oe.x-re.x,y:oe.y-re.y}),vAxis:normalize$5({x:-(oe.y-re.y),y:oe.x-re.x}),children:[],bindMatrix:createIdentityMatrix$5(),currentMatrix:createIdentityMatrix$5()};z>0&&(ue.parent=`heng_segment_${z-1}`,n[z-1].children.push(ue.id)),n.push(ue)}const L=maxSegment;for(let z=0;z<L;z++){const j=z/L,ae=(z+1)/L,re=quadraticBezierPoint$2(y,$,k,j),oe=quadraticBezierPoint$2(y,$,k,ae),ue={id:`pie_segment_${z}`,start:re,end:oe,length:Math.sqrt((oe.x-re.x)**2+(oe.y-re.y)**2),uAxis:normalize$5({x:oe.x-re.x,y:oe.y-re.y}),vAxis:normalize$5({x:-(oe.y-re.y),y:oe.x-re.x}),children:[],bindMatrix:createIdentityMatrix$5(),currentMatrix:createIdentityMatrix$5()};z===0?(ue.parent=`heng_segment_${V-1}`,n[V-1].children.push(ue.id)):(ue.parent=`pie_segment_${z-1}`,n[V+z-1].children.push(ue.id)),n.push(ue)}return n},normalize$5=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$5=()=>[1,0,0,1,0,0],quadraticBezierPoint$2=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_heng_pie=e=>{const n=new CustomGlyph(e),r={heng_length:n.getParam("-"),pie_horizonalSpan:n.getParam("-"),pie_verticalSpan:n.getParam("-"),pie_bendCursor:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$7(r,n)},bindSkeletonGlyph_heng_pie=e=>{e._o||instanceBasicGlyph_heng_pie(e),glyphSkeletonBind(e._o)},getBend$3=(e,n,r)=>{const g=Math.abs(n.y-e.y);return{x:e.x,y:e.y+r*g}},updateGlyphByParams$7=(e,n)=>{const{heng_length:r,pie_horizonalSpan:g,pie_verticalSpan:y,pie_bendCursor:k,skeletonRefPos:$,weight:V}=e,{ox:L,oy:z}=n._glyph.skeleton,j=250+L||0,ae=245+z||0;let re,oe;const ue=new FP.Joint("heng_start_ref",{x:j,y:ae}),le=new FP.Joint("heng_end_ref",{x:ue.x+r,y:ue.y});$===1?(re=new FP.Joint("heng_start",{x:ue.x,y:ue.y+V/2}),oe=new FP.Joint("heng_end",{x:le.x,y:le.y+V/2})):$===2?(re=new FP.Joint("heng_start",{x:ue.x,y:ue.y-V/2}),oe=new FP.Joint("heng_end",{x:le.x,y:le.y-V/2})):(re=new FP.Joint("heng_start",{x:ue.x,y:ue.y}),oe=new FP.Joint("heng_end",{x:le.x,y:le.y})),n.addJoint(ue),n.addJoint(le),n.addRefLine(refline(ue,le,"ref"));const de=new FP.Joint("pie_start",{x:oe.x,y:oe.y}),he=new FP.Joint("pie_end",{x:de.x-g,y:de.y+y}),_e=new FP.Joint("pie_bend",{x:de.x,y:de.y+k*y});n.addJoint(re),n.addJoint(oe),n.addJoint(de),n.addJoint(he),n.addJoint(_e);const Ce={heng_start:re,heng_end:oe,pie_start:de,pie_end:he,pie_bend:_e};n.addRefLine(refline(re,oe)),n.addRefLine(refline(de,_e)),n.addRefLine(refline(_e,he)),n.getSkeleton=()=>Ce},computeParamsByJoints$7=(e,n)=>{const{heng_start:r,heng_end:g,pie_start:y,pie_bend:k,pie_end:$}=e,V=n.getParamRange("-"),L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=range(g.x-r.x,V),re=range(y.x-$.x,L),oe=range($.y-y.y,z),ue=range((k.y-y.y)/oe,j);return{heng_length:ae,pie_horizonalSpan:re,pie_verticalSpan:oe,pie_bendCursor:ue,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_pie=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y};break}case"pie_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y};break}case"pie_bend":{$.pie_bend={x:e.tempData.pie_bend.x,y:e.tempData.pie_bend.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$3($.pie_start,$.pie_end,e.tempData.pie_bendCursor);$.pie_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.pie_bendCursor=e.getParam("-"),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$7(g,e);updateGlyphByParams$7(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$7(g,e);updateGlyphByParams$7(y,e),e.setParam("-",y.heng_length),e.setParam("-",y.pie_horizonalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.pie_bendCursor),e.tempData=null}},updateSkeletonListener_after_bind_heng_pie=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y};break}case"pie_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y};break}case"pie_bend":{$.pie_bend={x:e.tempData.pie_bend.x,y:e.tempData.pie_bend.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$3($.pie_start,$.pie_end,e.tempData.pie_bendCursor);$.pie_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.pie_bendCursor=e.getParam("-"),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$7(g,e);updateGlyphByParams$7(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$7(g,e);updateGlyphByParams$7(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_length),e.setParam("-",y.pie_horizonalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.pie_bendCursor),e.tempData=null}},skeletonToBones_heng_zhe_zhe_pie=e=>{const n=[],{heng_start:r,heng_end:g,zhe1_start:y,zhe1_end:k,zhe2_start:$,zhe2_end:V,pie_start:L,pie_bend:z,pie_end:j}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const ae=maxSegment;for(let de=0;de<ae;de++){const he=de/ae,_e=(de+1)/ae,Ce={x:r.x+(g.x-r.x)*he,y:r.y+(g.y-r.y)*he},Ne={x:r.x+(g.x-r.x)*_e,y:r.y+(g.y-r.y)*_e},$e={id:`heng_segment_${de}`,start:Ce,end:Ne,length:Math.sqrt((Ne.x-Ce.x)**2+(Ne.y-Ce.y)**2),uAxis:normalize$4({x:Ne.x-Ce.x,y:Ne.y-Ce.y}),vAxis:normalize$4({x:-(Ne.y-Ce.y),y:Ne.x-Ce.x}),children:[],bindMatrix:createIdentityMatrix$4(),currentMatrix:createIdentityMatrix$4()};de>0&&($e.parent=`heng_segment_${de-1}`,n[de-1].children.push($e.id)),n.push($e)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const re=maxSegment;for(let de=0;de<re;de++){const he=de/re,_e=(de+1)/re,Ce={x:y.x+(k.x-y.x)*he,y:y.y+(k.y-y.y)*he},Ne={x:y.x+(k.x-y.x)*_e,y:y.y+(k.y-y.y)*_e},$e={id:`zhe1_segment_${de}`,start:Ce,end:Ne,length:Math.sqrt((Ne.x-Ce.x)**2+(Ne.y-Ce.y)**2),uAxis:normalize$4({x:Ne.x-Ce.x,y:Ne.y-Ce.y}),vAxis:normalize$4({x:-(Ne.y-Ce.y),y:Ne.x-Ce.x}),children:[],bindMatrix:createIdentityMatrix$4(),currentMatrix:createIdentityMatrix$4()};de===0?($e.parent=`heng_segment_${ae-1}`,n[ae-1].children.push($e.id)):($e.parent=`zhe1_segment_${de-1}`,n[ae+de-1].children.push($e.id)),n.push($e)}Math.sqrt((V.x-$.x)**2+(V.y-$.y)**2);const oe=maxSegment;for(let de=0;de<oe;de++){const he=de/oe,_e=(de+1)/oe,Ce={x:$.x+(V.x-$.x)*he,y:$.y+(V.y-$.y)*he},Ne={x:$.x+(V.x-$.x)*_e,y:$.y+(V.y-$.y)*_e},$e={id:`zhe2_segment_${de}`,start:Ce,end:Ne,length:Math.sqrt((Ne.x-Ce.x)**2+(Ne.y-Ce.y)**2),uAxis:normalize$4({x:Ne.x-Ce.x,y:Ne.y-Ce.y}),vAxis:normalize$4({x:-(Ne.y-Ce.y),y:Ne.x-Ce.x}),children:[],bindMatrix:createIdentityMatrix$4(),currentMatrix:createIdentityMatrix$4()};de===0?($e.parent=`zhe1_segment_${re-1}`,n[ae+re-1].children.push($e.id)):($e.parent=`zhe2_segment_${de-1}`,n[ae+re+de-1].children.push($e.id)),n.push($e)}Math.sqrt((z.x-L.x)**2+(z.y-L.y)**2);const ue=maxSegment;for(let de=0;de<ue;de++){const he=de/ue,_e=(de+1)/ue,Ce={x:L.x+(z.x-L.x)*he,y:L.y+(z.y-L.y)*he},Ne={x:L.x+(z.x-L.x)*_e,y:L.y+(z.y-L.y)*_e},$e={id:`pie1_segment_${de}`,start:Ce,end:Ne,length:Math.sqrt((Ne.x-Ce.x)**2+(Ne.y-Ce.y)**2),uAxis:normalize$4({x:Ne.x-Ce.x,y:Ne.y-Ce.y}),vAxis:normalize$4({x:-(Ne.y-Ce.y),y:Ne.x-Ce.x}),children:[],bindMatrix:createIdentityMatrix$4(),currentMatrix:createIdentityMatrix$4()};de===0?($e.parent=`zhe2_segment_${oe-1}`,n[ae+re+oe-1].children.push($e.id)):($e.parent=`pie1_segment_${de-1}`,n[ae+re+oe+de-1].children.push($e.id)),n.push($e)}Math.sqrt((j.x-z.x)**2+(j.y-z.y)**2);const le=maxSegment;for(let de=0;de<le;de++){const he=de/le,_e=(de+1)/le,Ce={x:z.x+(j.x-z.x)*he,y:z.y+(j.y-z.y)*he},Ne={x:z.x+(j.x-z.x)*_e,y:z.y+(j.y-z.y)*_e},$e={id:`pie2_segment_${de}`,start:Ce,end:Ne,length:Math.sqrt((Ne.x-Ce.x)**2+(Ne.y-Ce.y)**2),uAxis:normalize$4({x:Ne.x-Ce.x,y:Ne.y-Ce.y}),vAxis:normalize$4({x:-(Ne.y-Ce.y),y:Ne.x-Ce.x}),children:[],bindMatrix:createIdentityMatrix$4(),currentMatrix:createIdentityMatrix$4()};de===0?($e.parent=`pie1_segment_${ue-1}`,n[ae+re+oe+ue-1].children.push($e.id)):($e.parent=`pie2_segment_${de-1}`,n[ae+re+oe+ue+de-1].children.push($e.id)),n.push($e)}return n},normalize$4=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$4=()=>[1,0,0,1,0,0],instanceBasicGlyph_heng_zhe_zhe_pie=e=>{const n=new CustomGlyph(e),r={heng_length:n.getParam("-"),zhe1_horizonalSpan:n.getParam("1-"),zhe1_verticalSpan:n.getParam("1-"),zhe2_length:n.getParam("2-"),pie_horizonalSpan:n.getParam("-"),pie_verticalSpan:n.getParam("-"),pie_bendCursor:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$6(r,n)},bindSkeletonGlyph_heng_zhe_zhe_pie=e=>{e._o||instanceBasicGlyph_heng_zhe_zhe_pie(e),glyphSkeletonBind(e._o)},getBend$2=(e,n,r)=>{const g=Math.abs(n.y-e.y);return{x:e.x,y:e.y+r*g}},updateGlyphByParams$6=(e,n)=>{const{heng_length:r,zhe1_horizonalSpan:g,zhe1_verticalSpan:y,zhe2_length:k,pie_horizonalSpan:$,pie_verticalSpan:V,pie_bendCursor:L,skeletonRefPos:z,weight:j}=e,{ox:ae,oy:re}=n._glyph.skeleton,oe=390+ae||0,ue=185+re||0;let le,de;const he=new FP.Joint("heng_start_ref",{x:oe,y:ue}),_e=new FP.Joint("heng_end_ref",{x:he.x+r,y:he.y});z===1?(le=new FP.Joint("heng_start",{x:he.x,y:he.y+j/2}),de=new FP.Joint("heng_end",{x:_e.x,y:_e.y+j/2})):z===2?(le=new FP.Joint("heng_start",{x:he.x,y:he.y-j/2}),de=new FP.Joint("heng_end",{x:_e.x,y:_e.y-j/2})):(le=new FP.Joint("heng_start",{x:he.x,y:he.y}),de=new FP.Joint("heng_end",{x:_e.x,y:_e.y})),n.addJoint(he),n.addJoint(_e),n.addRefLine(refline(he,_e,"ref"));const Ce=new FP.Joint("zhe1_start",{x:le.x+r,y:le.y}),Ne=new FP.Joint("zhe1_end",{x:Ce.x-g,y:Ce.y+y}),$e=new FP.Joint("zhe2_start",{x:Ce.x-g,y:Ce.y+y}),xe=new FP.Joint("zhe2_end",{x:$e.x+k,y:$e.y}),Ie=new FP.Joint("pie_start",{x:$e.x+k,y:$e.y}),ze=new FP.Joint("pie_end",{x:Ie.x-$,y:Ie.y+V}),qe=new FP.Joint("pie_bend",{x:Ie.x,y:Ie.y+L*V});n.addJoint(le),n.addJoint(de),n.addJoint(Ce),n.addJoint(Ne),n.addJoint($e),n.addJoint(xe),n.addJoint(Ie),n.addJoint(ze),n.addJoint(qe);const Et={heng_start:le,heng_end:de,zhe1_start:Ce,zhe1_end:Ne,zhe2_start:$e,zhe2_end:xe,pie_start:Ie,pie_end:ze,pie_bend:qe};n.addRefLine(refline(le,de)),n.addRefLine(refline(Ce,Ne)),n.addRefLine(refline($e,xe)),n.addRefLine(refline(Ie,qe)),n.addRefLine(refline(qe,ze)),n.getSkeleton=()=>Et},computeParamsByJoints$6=(e,n)=>{const{heng_start:r,heng_end:g,zhe1_start:y,zhe1_end:k,zhe2_start:$,zhe2_end:V,pie_start:L,pie_bend:z,pie_end:j}=e,ae=n.getParamRange("-"),re=n.getParamRange("1-"),oe=n.getParamRange("1-"),ue=n.getParamRange("2-"),le=n.getParamRange("-"),de=n.getParamRange("-"),he=n.getParamRange("-"),_e=range(g.x-r.x,ae),Ce=range(y.x-k.x,re),Ne=range(k.y-y.y,oe),$e=range(V.x-$.x,ue),xe=range(L.x-j.x,le),Ie=range(j.y-L.y,de),ze=range((z.y-L.y)/Ie,he);return{heng_length:_e,zhe1_horizonalSpan:Ce,zhe1_verticalSpan:Ne,zhe2_length:$e,pie_horizonalSpan:xe,pie_verticalSpan:Ie,pie_bendCursor:ze,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng_zhe_zhe_pie=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y};break}case"zhe1_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y};break}case"zhe1_end":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};break}case"zhe2_start":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};break}case"zhe2_end":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y};break}case"pie_start":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y};break}case"pie_bend":{$.pie_bend={x:e.tempData.pie_bend.x,y:e.tempData.pie_bend.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$2($.pie_start,$.pie_end,e.tempData.pie_bendCursor);$.pie_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.pie_bendCursor=e.getParam("-"),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$6(g,e);updateGlyphByParams$6(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$6(g,e);updateGlyphByParams$6(y,e),e.setParam("-",y.heng_length),e.setParam("1-",y.zhe1_horizonalSpan),e.setParam("1-",y.zhe1_verticalSpan),e.setParam("2-",y.zhe2_length),e.setParam("-",y.pie_horizonalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.pie_bendCursor),e.tempData=null}},updateSkeletonListener_after_bind_heng_zhe_zhe_pie=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"heng_end":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y};break}case"zhe1_start":{$.heng_end={x:e.tempData.heng_end.x+y,y:e.tempData.heng_end.y},$.zhe1_start={x:e.tempData.zhe1_start.x+y,y:e.tempData.zhe1_start.y},$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y};break}case"zhe1_end":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};break}case"zhe2_start":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y+k},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y+k},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};break}case"zhe2_end":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y};break}case"pie_start":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y},$.pie_start={x:e.tempData.pie_start.x+y,y:e.tempData.pie_start.y},$.pie_bend={x:e.tempData.pie_bend.x+y,y:e.tempData.pie_bend.y},$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y};break}case"pie_bend":{$.pie_bend={x:e.tempData.pie_bend.x,y:e.tempData.pie_bend.y+k};break}case"pie_end":{$.pie_end={x:e.tempData.pie_end.x+y,y:e.tempData.pie_end.y+k};const V=getBend$2($.pie_start,$.pie_end,e.tempData.pie_bendCursor);$.pie_bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.pie_bendCursor=e.getParam("-"),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$6(g,e);updateGlyphByParams$6(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$6(g,e);updateGlyphByParams$6(y,e),updateSkeletonTransformation(e),e.setParam("-",y.heng_length),e.setParam("1-",y.zhe1_horizonalSpan),e.setParam("1-",y.zhe1_verticalSpan),e.setParam("2-",y.zhe2_length),e.setParam("-",y.pie_horizonalSpan),e.setParam("-",y.pie_verticalSpan),e.setParam("-",y.pie_bendCursor),e.tempData=null}},skeletonToBones_shu_zhe_zhe_gou=e=>{const n=[],{shu_start:r,shu_end:g,zhe1_start:y,zhe1_end:k,zhe2_start:$,zhe2_end:V,gou_start:L,gou_end:z}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const j=maxSegment;for(let ue=0;ue<j;ue++){const le=ue/j,de=(ue+1)/j,he={x:r.x+(g.x-r.x)*le,y:r.y+(g.y-r.y)*le},_e={x:r.x+(g.x-r.x)*de,y:r.y+(g.y-r.y)*de},Ce={id:`shu_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$3({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$3({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$3(),currentMatrix:createIdentityMatrix$3()};ue>0&&(Ce.parent=`shu_segment_${ue-1}`,n[ue-1].children.push(Ce.id)),n.push(Ce)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const ae=maxSegment;for(let ue=0;ue<ae;ue++){const le=ue/ae,de=(ue+1)/ae,he={x:y.x+(k.x-y.x)*le,y:y.y+(k.y-y.y)*le},_e={x:y.x+(k.x-y.x)*de,y:y.y+(k.y-y.y)*de},Ce={id:`zhe1_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$3({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$3({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$3(),currentMatrix:createIdentityMatrix$3()};ue===0?(Ce.parent=`shu_segment_${j-1}`,n[j-1].children.push(Ce.id)):(Ce.parent=`zhe1_segment_${ue-1}`,n[j+ue-1].children.push(Ce.id)),n.push(Ce)}Math.sqrt((V.x-$.x)**2+(V.y-$.y)**2);const re=maxSegment;for(let ue=0;ue<re;ue++){const le=ue/re,de=(ue+1)/re,he={x:$.x+(V.x-$.x)*le,y:$.y+(V.y-$.y)*le},_e={x:$.x+(V.x-$.x)*de,y:$.y+(V.y-$.y)*de},Ce={id:`zhe2_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$3({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$3({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$3(),currentMatrix:createIdentityMatrix$3()};ue===0?(Ce.parent=`zhe1_segment_${ae-1}`,n[j+ae-1].children.push(Ce.id)):(Ce.parent=`zhe2_segment_${ue-1}`,n[j+ae+ue-1].children.push(Ce.id)),n.push(Ce)}Math.sqrt((z.x-L.x)**2+(z.y-L.y)**2);const oe=maxSegment;for(let ue=0;ue<oe;ue++){const le=ue/oe,de=(ue+1)/oe,he={x:L.x+(z.x-L.x)*le,y:L.y+(z.y-L.y)*le},_e={x:L.x+(z.x-L.x)*de,y:L.y+(z.y-L.y)*de},Ce={id:`gou_segment_${ue}`,start:he,end:_e,length:Math.sqrt((_e.x-he.x)**2+(_e.y-he.y)**2),uAxis:normalize$3({x:_e.x-he.x,y:_e.y-he.y}),vAxis:normalize$3({x:-(_e.y-he.y),y:_e.x-he.x}),children:[],bindMatrix:createIdentityMatrix$3(),currentMatrix:createIdentityMatrix$3()};ue===0?(Ce.parent=`zhe2_segment_${re-1}`,n[j+ae+re-1].children.push(Ce.id)):(Ce.parent=`gou_segment_${ue-1}`,n[j+ae+re+ue-1].children.push(Ce.id)),n.push(Ce)}return n},normalize$3=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$3=()=>[1,0,0,1,0,0],instanceBasicGlyph_shu_zhe_zhe_gou=e=>{const n=new CustomGlyph(e),r={shu_length:n.getParam("-"),zhe1_length:n.getParam("1-"),zhe2_horizonalSpan:n.getParam("2-"),zhe2_verticalSpan:n.getParam("2-"),gou_horizonalSpan:n.getParam("-"),gou_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$5(r,n)},bindSkeletonGlyph_shu_zhe_zhe_gou=e=>{e._o||instanceBasicGlyph_shu_zhe_zhe_gou(e),glyphSkeletonBind(e._o)},updateGlyphByParams$5=(e,n)=>{const{shu_length:r,zhe1_length:g,zhe2_horizonalSpan:y,zhe2_verticalSpan:k,gou_horizonalSpan:$,gou_verticalSpan:V,skeletonRefPos:L,weight:z}=e,{ox:j,oy:ae}=n._glyph.skeleton,re=250+j||0,oe=250+ae||0;let ue,le;const de=new FP.Joint("shu_start_ref",{x:re,y:oe}),he=new FP.Joint("shu_end_ref",{x:de.x,y:de.y+r});L===1?(ue=new FP.Joint("shu_start",{x:de.x-z/2,y:de.y}),le=new FP.Joint("shu_end",{x:he.x-z/2,y:he.y})):L===2?(ue=new FP.Joint("shu_start",{x:de.x+z/2,y:de.y}),le=new FP.Joint("shu_end",{x:he.x+z/2,y:he.y})):(ue=new FP.Joint("shu_start",{x:de.x,y:de.y}),le=new FP.Joint("shu_end",{x:he.x,y:he.y})),n.addJoint(de),n.addJoint(he),n.addRefLine(refline(de,he,"ref"));const _e=new FP.Joint("zhe1_start",{x:ue.x,y:ue.y+r}),Ce=new FP.Joint("zhe1_end",{x:_e.x+g,y:_e.y}),Ne=new FP.Joint("zhe2_start",{x:_e.x+g,y:_e.y}),$e=new FP.Joint("zhe2_end",{x:Ne.x-y,y:Ne.y+k}),xe=new FP.Joint("gou_start",{x:Ne.x-y,y:Ne.y+k}),Ie=new FP.Joint("gou_end",{x:xe.x-$,y:xe.y+V});n.addJoint(ue),n.addJoint(le),n.addJoint(_e),n.addJoint(Ce),n.addJoint(Ne),n.addJoint($e),n.addJoint(xe),n.addJoint(Ie);const ze={shu_start:ue,shu_end:le,zhe1_start:_e,zhe1_end:Ce,zhe2_start:Ne,zhe2_end:$e,gou_start:xe,gou_end:Ie};n.addRefLine(refline(ue,le)),n.addRefLine(refline(_e,Ce)),n.addRefLine(refline(Ne,$e)),n.addRefLine(refline(xe,Ie)),n.getSkeleton=()=>ze},computeParamsByJoints$5=(e,n)=>{const{shu_start:r,shu_end:g,zhe1_start:y,zhe1_end:k,zhe2_start:$,zhe2_end:V,gou_start:L,gou_end:z}=e,j=n.getParamRange("-"),ae=n.getParamRange("1-"),re=n.getParamRange("2-"),oe=n.getParamRange("2-"),ue=n.getParamRange("-"),le=n.getParamRange("-"),de=range(g.y-r.y,j),he=range(k.x-y.x,ae),_e=range($.x-V.x,re),Ce=range(V.y-$.y,oe),Ne=range(L.x-z.x,ue),$e=range(z.y-L.y,le);return{shu_length:de,zhe1_length:he,zhe2_horizonalSpan:_e,zhe2_verticalSpan:Ce,gou_horizonalSpan:Ne,gou_verticalSpan:$e,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_shu_zhe_zhe_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"shu_end":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.zhe1_start={x:e.tempData.zhe1_start.x,y:e.tempData.zhe1_start.y+k},$.zhe1_end={x:e.tempData.zhe1_end.x,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x,y:e.tempData.zhe2_end.y+k},$.gou_start={x:e.tempData.gou_start.x,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x,y:e.tempData.gou_end.y+k};break}case"zhe1_start":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.zhe1_start={x:e.tempData.zhe1_start.x,y:e.tempData.zhe1_start.y+k},$.zhe1_end={x:e.tempData.zhe1_end.x,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x,y:e.tempData.zhe2_end.y+k},$.gou_start={x:e.tempData.gou_start.x,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x,y:e.tempData.gou_end.y+k};break}case"zhe1_end":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"zhe2_start":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"zhe2_end":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$5(g,e);updateGlyphByParams$5(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$5(g,e);updateGlyphByParams$5(y,e),e.setParam("-",y.shu_length),e.setParam("1-",y.zhe1_length),e.setParam("2-",y.zhe2_horizonalSpan),e.setParam("2-",y.zhe2_verticalSpan),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_shu_zhe_zhe_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_end":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.zhe1_start={x:e.tempData.zhe1_start.x,y:e.tempData.zhe1_start.y+k},$.zhe1_end={x:e.tempData.zhe1_end.x,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x,y:e.tempData.zhe2_end.y+k},$.gou_start={x:e.tempData.gou_start.x,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x,y:e.tempData.gou_end.y+k};break}case"zhe1_start":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.zhe1_start={x:e.tempData.zhe1_start.x,y:e.tempData.zhe1_start.y+k},$.zhe1_end={x:e.tempData.zhe1_end.x,y:e.tempData.zhe1_end.y+k},$.zhe2_start={x:e.tempData.zhe2_start.x,y:e.tempData.zhe2_start.y+k},$.zhe2_end={x:e.tempData.zhe2_end.x,y:e.tempData.zhe2_end.y+k},$.gou_start={x:e.tempData.gou_start.x,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x,y:e.tempData.gou_end.y+k};break}case"zhe1_end":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"zhe2_start":{$.zhe1_end={x:e.tempData.zhe1_end.x+y,y:e.tempData.zhe1_end.y},$.zhe2_start={x:e.tempData.zhe2_start.x+y,y:e.tempData.zhe2_start.y},$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y};break}case"zhe2_end":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.zhe2_end={x:e.tempData.zhe2_end.x+y,y:e.tempData.zhe2_end.y+k},$.gou_start={x:e.tempData.gou_start.x+y,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$5(g,e);updateGlyphByParams$5(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$5(g,e);updateGlyphByParams$5(y,e),updateSkeletonTransformation(e),e.setParam("-",y.shu_length),e.setParam("1-",y.zhe1_length),e.setParam("2-",y.zhe2_horizonalSpan),e.setParam("2-",y.zhe2_verticalSpan),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},skeletonToBones_shu_gou=e=>{const n=[],{shu_start:r,shu_end:g,gou_start:y,gou_end:k}=e;Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);const $=maxSegment;for(let L=0;L<$;L++){const z=L/$,j=(L+1)/$,ae={x:r.x+(g.x-r.x)*z,y:r.y+(g.y-r.y)*z},re={x:r.x+(g.x-r.x)*j,y:r.y+(g.y-r.y)*j},oe={id:`shu_segment_${L}`,start:ae,end:re,length:Math.sqrt((re.x-ae.x)**2+(re.y-ae.y)**2),uAxis:normalize$2({x:re.x-ae.x,y:re.y-ae.y}),vAxis:normalize$2({x:-(re.y-ae.y),y:re.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$2(),currentMatrix:createIdentityMatrix$2()};L>0&&(oe.parent=`shu_segment_${L-1}`,n[L-1].children.push(oe.id)),n.push(oe)}Math.sqrt((k.x-y.x)**2+(k.y-y.y)**2);const V=maxSegment;for(let L=0;L<V;L++){const z=L/V,j=(L+1)/V,ae={x:y.x+(k.x-y.x)*z,y:y.y+(k.y-y.y)*z},re={x:y.x+(k.x-y.x)*j,y:y.y+(k.y-y.y)*j},oe={id:`gou_segment_${L}`,start:ae,end:re,length:Math.sqrt((re.x-ae.x)**2+(re.y-ae.y)**2),uAxis:normalize$2({x:re.x-ae.x,y:re.y-ae.y}),vAxis:normalize$2({x:-(re.y-ae.y),y:re.x-ae.x}),children:[],bindMatrix:createIdentityMatrix$2(),currentMatrix:createIdentityMatrix$2()};L===0?(oe.parent=`shu_segment_${$-1}`,n[$-1].children.push(oe.id)):(oe.parent=`gou_segment_${L-1}`,n[$+L-1].children.push(oe.id)),n.push(oe)}return n},normalize$2=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$2=()=>[1,0,0,1,0,0],instanceBasicGlyph_shu_gou=e=>{const n=new CustomGlyph(e),r={shu_length:n.getParam("-"),gou_horizonalSpan:n.getParam("-"),gou_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$4(r,n)},bindSkeletonGlyph_shu_gou=e=>{e._o||instanceBasicGlyph_shu_gou(e),glyphSkeletonBind(e._o)},updateGlyphByParams$4=(e,n)=>{const{shu_length:r,gou_horizonalSpan:g,gou_verticalSpan:y,skeletonRefPos:k,weight:$}=e,{ox:V,oy:L}=n._glyph.skeleton,z=500+V||0,j=250+L||0;let ae,re;const oe=new FP.Joint("shu_start_ref",{x:z,y:j}),ue=new FP.Joint("shu_end_ref",{x:oe.x,y:oe.y+r});k===1?(ae=new FP.Joint("shu_start",{x:oe.x-$/2,y:oe.y}),re=new FP.Joint("shu_end",{x:ue.x-$/2,y:ue.y})):k===2?(ae=new FP.Joint("shu_start",{x:oe.x+$/2,y:oe.y}),re=new FP.Joint("shu_end",{x:ue.x+$/2,y:ue.y})):(ae=new FP.Joint("shu_start",{x:oe.x,y:oe.y}),re=new FP.Joint("shu_end",{x:ue.x,y:ue.y})),n.addJoint(oe),n.addJoint(ue),n.addRefLine(refline(oe,ue,"ref"));const le=new FP.Joint("gou_start",{x:ae.x,y:ae.y+r}),de=new FP.Joint("gou_end",{x:le.x-g,y:le.y+y});n.addJoint(ae),n.addJoint(re),n.addJoint(le),n.addJoint(de);const he={shu_start:ae,shu_end:re,gou_start:le,gou_end:de};n.addRefLine(refline(ae,re)),n.addRefLine(refline(le,de)),n.getSkeleton=()=>he},computeParamsByJoints$4=(e,n)=>{const{shu_start:r,shu_end:g,gou_start:y,gou_end:k}=e,$=n.getParamRange("-"),V=n.getParamRange("-"),L=n.getParamRange("-"),z=range(g.y-r.y,$),j=range(y.x-k.x,V),ae=range(k.y-y.y,L);return{shu_length:z,gou_horizonalSpan:j,gou_verticalSpan:ae,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_shu_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"shu_end":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.gou_start={x:e.tempData.gou_start.x,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.gou_start={x:e.tempData.gou_start.x,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$4(g,e);updateGlyphByParams$4(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$4(g,e);updateGlyphByParams$4(y,e),e.setParam("-",y.shu_length),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_shu_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"shu_end":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.gou_start={x:e.tempData.gou_start.x,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x,y:e.tempData.gou_end.y+k};break}case"gou_start":{$.shu_end={x:e.tempData.shu_end.x,y:e.tempData.shu_end.y+k},$.gou_start={x:e.tempData.gou_start.x,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x,y:e.tempData.gou_end.y+k};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$4(g,e);updateGlyphByParams$4(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$4(g,e);updateGlyphByParams$4(y,e),updateSkeletonTransformation(e),e.setParam("-",y.shu_length),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},skeletonToBones_wan_gou=e=>{const n=[],{wan_start:r,wan_bend:g,wan_end:y,gou_start:k,gou_end:$}=e,V=maxSegment;for(let z=0;z<V;z++){const j=z/V,ae=(z+1)/V,re=quadraticBezierPoint$1(r,g,y,j),oe=quadraticBezierPoint$1(r,g,y,ae),ue={id:`wan_segment_${z}`,start:re,end:oe,length:Math.sqrt((oe.x-re.x)**2+(oe.y-re.y)**2),uAxis:normalize$1({x:oe.x-re.x,y:oe.y-re.y}),vAxis:normalize$1({x:-(oe.y-re.y),y:oe.x-re.x}),children:[],bindMatrix:createIdentityMatrix$1(),currentMatrix:createIdentityMatrix$1()};z>0&&(ue.parent=`wan_segment_${z-1}`,n[z-1].children.push(ue.id)),n.push(ue)}Math.sqrt(($.x-k.x)**2+($.y-k.y)**2);const L=maxSegment;for(let z=0;z<L;z++){const j=z/L,ae=(z+1)/L,re={x:k.x+($.x-k.x)*j,y:k.y+($.y-k.y)*j},oe={x:k.x+($.x-k.x)*ae,y:k.y+($.y-k.y)*ae},ue={id:`gou_segment_${z}`,start:re,end:oe,length:Math.sqrt((oe.x-re.x)**2+(oe.y-re.y)**2),uAxis:normalize$1({x:oe.x-re.x,y:oe.y-re.y}),vAxis:normalize$1({x:-(oe.y-re.y),y:oe.x-re.x}),children:[],bindMatrix:createIdentityMatrix$1(),currentMatrix:createIdentityMatrix$1()};z===0?(ue.parent=`wan_segment_${V-1}`,n[V-1].children.push(ue.id)):(ue.parent=`gou_segment_${z-1}`,n[V+z-1].children.push(ue.id)),n.push(ue)}return n},normalize$1=e=>{const n=Math.sqrt(e.x**2+e.y**2);return n>0?{x:e.x/n,y:e.y/n}:{x:0,y:0}},createIdentityMatrix$1=()=>[1,0,0,1,0,0],quadraticBezierPoint$1=(e,n,r,g)=>{const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}},instanceBasicGlyph_wan_gou=e=>{const n=new CustomGlyph(e),r={wan_length:n.getParam("-"),wan_bendDegree:Number(n.getParam("-"))+30*Number(n.getParam("")||1),gou_horizonalSpan:n.getParam("-"),gou_verticalSpan:n.getParam("-"),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$3(r,n)},bindSkeletonGlyph_wan_gou=e=>{e._o||instanceBasicGlyph_wan_gou(e),glyphSkeletonBind(e._o)},getBend$1=(e,n,r)=>{const g=Math.abs(n.y-e.y);return{x:e.x+r,y:e.y+g/2}},updateGlyphByParams$3=(e,n)=>{const{wan_length:r,wan_bendDegree:g,gou_horizonalSpan:y,gou_verticalSpan:k,skeletonRefPos:$,weight:V}=e,{ox:L,oy:z}=n._glyph.skeleton,j=500+L||0,ae=250+z||0,re=new FP.Joint("wan_start",{x:j,y:ae}),oe=new FP.Joint("wan_end",{x:re.x,y:re.y+r}),ue=new FP.Joint("wan_bend",{x:re.x+g,y:re.y+r/2}),le=new FP.Joint("gou_start",{x:re.x,y:re.y+r}),de=new FP.Joint("gou_end",{x:le.x-y,y:le.y+k});n.addJoint(re),n.addJoint(ue),n.addJoint(oe),n.addJoint(le),n.addJoint(de);const he={wan_start:re,wan_bend:ue,wan_end:oe,gou_start:le,gou_end:de};n.addRefLine(refline(re,ue)),n.addRefLine(refline(ue,oe)),n.addRefLine(refline(le,de)),n.getSkeleton=()=>he},computeParamsByJoints$3=(e,n)=>{const{wan_start:r,wan_end:g,wan_bend:y,gou_start:k,gou_end:$}=e,V=n.getParamRange("-"),L=n.getParamRange("-"),z=n.getParamRange("-"),j=n.getParamRange("-"),ae=range(g.y-r.y,V),re=range(y.x-r.x,L),oe=range(k.x-$.x,z),ue=range($.y-k.y,j);return{wan_length:ae,wan_bendDegree:re,gou_horizonalSpan:oe,gou_verticalSpan:ue,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"wan_start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"wan_bend":{$.wan_bend={x:e.tempData.wan_bend.x+y,y:e.tempData.wan_bend.y};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x,y:e.tempData.gou_end.y+k};const V=getBend$1($.wan_start,$.wan_end,e.tempData.wan_bendDegree);$.wan_bend={x:V.x,y:V.y};break}case"gou_start":{$.wan_end={x:e.tempData.wan_end.x,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x,y:e.tempData.gou_end.y+k};const V=getBend$1($.wan_start,$.wan_end,e.tempData.wan_bendDegree);$.wan_bend={x:V.x,y:V.y};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.wan_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$3(g,e);updateGlyphByParams$3(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$3(g,e);updateGlyphByParams$3(y,e),e.setParam("-",y.wan_length),e.setParam("-",y.wan_bendDegree-30*Number(e.getParam("")||1)),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},updateSkeletonListener_after_bind_wan_gou=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"wan_bend":{$.wan_bend={x:e.tempData.wan_bend.x+y,y:e.tempData.wan_bend.y};break}case"wan_end":{$.wan_end={x:e.tempData.wan_end.x,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x,y:e.tempData.gou_end.y+k};const V=getBend$1($.wan_start,$.wan_end,e.tempData.wan_bendDegree);$.wan_bend={x:V.x,y:V.y};break}case"gou_start":{$.wan_end={x:e.tempData.wan_end.x,y:e.tempData.wan_end.y+k},$.gou_start={x:e.tempData.gou_start.x,y:e.tempData.gou_start.y+k},$.gou_end={x:e.tempData.gou_end.x,y:e.tempData.gou_end.y+k};const V=getBend$1($.wan_start,$.wan_end,e.tempData.wan_bendDegree);$.wan_bend={x:V.x,y:V.y};break}case"gou_end":{$.gou_end={x:e.tempData.gou_end.x+y,y:e.tempData.gou_end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.wan_bendDegree=Number(e.getParam("-"))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$3(g,e);updateGlyphByParams$3(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$3(g,e);updateGlyphByParams$3(y,e),updateSkeletonTransformation(e),e.setParam("-",y.wan_length),e.setParam("-",y.wan_bendDegree-30*Number(e.getParam("")||1)),e.setParam("-",y.gou_horizonalSpan),e.setParam("-",y.gou_verticalSpan),e.tempData=null}},glyphSkeletonBind=e=>{const n=e.getSkeleton(),g=e.components.filter(L=>L.type==="pen");if(g.length===0){console.warn("No pen components found");return}const y=g[0],k=skeletonToBones(n),$=componentsToPoints(y),V=$.map((L,z)=>calculatePointBones(L,k,z));return e.skeletonBindData={bones:k,pointsBonesMap:V,originalPoints:$.map(L=>({x:L.x,y:L.y})),skeletonType:detectSkeletonType(n)},e._glyph.skeleton&&(e._glyph.skeleton.skeletonBindData={bones:k,pointsBonesMap:V,originalPoints:$.map(L=>({x:L.x,y:L.y})),skeletonType:detectSkeletonType(n)}),{bones:k,pointsBonesMap:V}};function detectSkeletonType(e){const n=Object.keys(e);if(n.includes("start")&&n.includes("end")&&!n.includes("bend")){const r=e.start,g=e.end;return Math.abs(g.x-r.x),Math.abs(g.y-r.y),"line"}else if(n.includes("start")&&n.includes("bend")&&n.includes("end")){const r=e.start,g=e.bend,y=e.end;return g.x-r.x,g.y-r.y,y.x-g.x,y.y-g.y,y.x-r.x,"curve"}else{if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("zhe1_start")&&n.includes("zhe1_end")&&n.includes("zhe2_start")&&n.includes("zhe2_end")&&n.includes("wan_start")&&n.includes("wan_end")&&n.includes("gou_start")&&n.includes("gou_end"))return"heng_zhe_zhe_wan_gou";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("zhe1_start")&&n.includes("zhe1_end")&&n.includes("zhe2_start")&&n.includes("zhe2_end")&&n.includes("pie_start")&&n.includes("pie_end"))return"heng_zhe_zhe_pie";if(n.includes("heng1_start")&&n.includes("heng1_end")&&n.includes("heng2_start")&&n.includes("heng2_end")&&n.includes("zhe1_start")&&n.includes("zhe1_end")&&n.includes("zhe2_start")&&n.includes("zhe2_end"))return"er_heng_zhe";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("zhe_start")&&n.includes("zhe_end")&&n.includes("wan_start")&&n.includes("wan_end")&&n.includes("gou_start")&&n.includes("gou_end"))return"heng_zhe_wan_gou";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("zhe_start")&&n.includes("zhe_end")&&n.includes("wan_start")&&n.includes("wan_end"))return"heng_zhe_wan";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("zhe_start")&&n.includes("zhe_end")&&n.includes("gou_start")&&n.includes("gou_end"))return"heng_zhe_gou";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("zhe_start")&&n.includes("zhe_end")&&n.includes("tiao_start")&&n.includes("tiao_end"))return"heng_zhe_tiao";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("zhe_start")&&n.includes("zhe_end")&&n.includes("pie_start")&&n.includes("pie_end"))return"heng_zhe_pie";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("pie_start")&&n.includes("pie_end")&&n.includes("wangou_start")&&n.includes("wangou_end"))return"heng_pie_wan_gou";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("wan_start")&&n.includes("wan_end")&&n.includes("gou_start")&&n.includes("gou_end"))return"heng_wan_gou";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("pie_start")&&n.includes("pie_bend")&&n.includes("pie_end"))return"heng_pie";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("gou_start")&&n.includes("gou_end"))return"heng_gou";if(n.includes("heng_start")&&n.includes("heng_end")&&n.includes("zhe_start")&&n.includes("zhe_end"))return"heng_zhe";if(n.includes("shu_start")&&n.includes("shu_end")&&n.includes("zhe1_start")&&n.includes("zhe1_end")&&n.includes("zhe2_start")&&n.includes("zhe2_end")&&n.includes("gou_start")&&n.includes("gou_end"))return"shu_zhe_zhe_gou";if(n.includes("shu_start")&&n.includes("shu_end")&&n.includes("wan_start")&&n.includes("wan_end")&&n.includes("gou_start")&&n.includes("gou_end"))return"shu_wan_gou";if(n.includes("shu_start")&&n.includes("shu_end")&&n.includes("gou_start")&&n.includes("gou_end"))return"shu_gou";if(n.includes("shu_start")&&n.includes("shu_end")&&n.includes("zhe_start")&&n.includes("zhe_end"))return"shu_zhe";if(n.includes("shu_start")&&n.includes("shu_end")&&n.includes("wan_start")&&n.includes("wan_end"))return"shu_wan";if(n.includes("shu_start")&&n.includes("shu_end")&&n.includes("pie_start")&&n.includes("pie_end"))return"shu_pie";if(n.includes("shu_start")&&n.includes("shu_end")&&n.includes("tiao_start")&&n.includes("tiao_end"))return"shu_tiao";if(n.includes("pie_start")&&n.includes("pie_end")&&n.includes("tiao_start")&&n.includes("tiao_end"))return"pie_tiao";if(n.includes("pie_start")&&n.includes("pie_end")&&n.includes("dian_start")&&n.includes("dian_end"))return"pie_dian";if(n.includes("tiao_start")&&n.includes("tiao_end")&&n.includes("na_start")&&n.includes("na_end"))return"tiao_na";if(n.includes("wan_start")&&n.includes("wan_end")&&n.includes("gou_start")&&n.includes("gou_end"))return"wan_gou";if(n.includes("xie_start")&&n.includes("xie_end")&&n.includes("gou_start")&&n.includes("gou_end"))return"xie_gou";if(n.includes("start")&&n.includes("end")&&n.includes("bend"))return"dian";if(n.includes("start")&&n.includes("end")){if(n.includes("heng_start")&&n.includes("heng_end"))return"heng";if(n.includes("shu_start")&&n.includes("shu_end"))return"shu";if(n.includes("pie_start")&&n.includes("pie_end"))return"pie";if(n.includes("na_start")&&n.includes("na_end"))return"na";if(n.includes("tiao_start")&&n.includes("tiao_end"))return"tiao";if(n.includes("ping_na_start")&&n.includes("ping_na_end"))return"ping_na"}}return"line"}function skeletonToBones(e){const n=[],r=detectSkeletonType(e);if(r==="line"){const g=e.start,y=e.end,k=Math.sqrt((y.x-g.x)**2+(y.y-g.y)**2),$=Math.max(20,k/maxSegment),V=Math.max(minSegment,Math.ceil(k/$));for(let L=0;L<V;L++){const z=L/V,j=(L+1)/V,ae={x:g.x+(y.x-g.x)*z,y:g.y+(y.y-g.y)*z},re={x:g.x+(y.x-g.x)*j,y:g.y+(y.y-g.y)*j},oe={id:`segment_${L}`,start:ae,end:re,length:Math.sqrt((re.x-ae.x)**2+(re.y-ae.y)**2),uAxis:normalize({x:re.x-ae.x,y:re.y-ae.y}),vAxis:normalize({x:-(re.y-ae.y),y:re.x-ae.x}),children:[],bindMatrix:createIdentityMatrix(),currentMatrix:createIdentityMatrix()};L>0&&(oe.parent=`segment_${L-1}`,n[L-1].children.push(oe.id)),n.push(oe)}}else if(r==="curve"){const g=e.start,y=e.bend,k=e.end,$=maxSegment;for(let V=0;V<$;V++){const L=V/$,z=(V+1)/$,j=quadraticBezierPoint(g,y,k,L),ae=quadraticBezierPoint(g,y,k,z),re={id:`segment_${V}`,start:j,end:ae,length:Math.sqrt((ae.x-j.x)**2+(ae.y-j.y)**2),uAxis:normalize({x:ae.x-j.x,y:ae.y-j.y}),vAxis:normalize({x:-(ae.y-j.y),y:ae.x-j.x}),children:[],bindMatrix:createIdentityMatrix(),currentMatrix:createIdentityMatrix()};V>0&&(re.parent=`segment_${V-1}`,n[V-1].children.push(re.id)),n.push(re)}}else try{const g=callStrokeSkeletonToBones(r,e);n.push(...g)}catch(g){return console.warn(`Failed to process skeleton type ${r}:`,g),skeletonToBones(e)}return n.forEach(g=>{g.bindMatrix=calculateBoneMatrix(g),g.currentMatrix=[...g.bindMatrix]}),n}function callStrokeSkeletonToBones(e,n){try{switch(e){case"heng_gou":return skeletonToBones_heng_gou(n);case"shu_pie":return skeletonToBones_shu_pie(n);case"heng_pie":return skeletonToBones_heng_pie(n);case"heng_na":return skeletonToBones_na(n);case"shu_gou":return skeletonToBones_shu_gou(n);case"heng_zhe":return skeletonToBones_heng_zhe(n);case"shu_zhe":return skeletonToBones_shu_zhe(n);case"heng_wan_gou":return skeletonToBones_heng_wan_gou(n);case"shu_wan":return skeletonToBones_shu_wan(n);case"tiao_na":return skeletonToBones_tiao_na(n);case"pie_tiao":return skeletonToBones_pie_tiao(n);case"pie_dian":return skeletonToBones_pie_dian(n);case"heng_pie_wan_gou":return skeletonToBones_heng_pie_wan_gou(n);case"heng_zhe_wan_gou":return skeletonToBones_heng_zhe_wan_gou(n);case"heng_zhe_zhe_wan_gou":return skeletonToBones_heng_zhe_zhe_wan_gou(n);case"heng_zhe_zhe_pie":return skeletonToBones_heng_zhe_zhe_pie(n);case"shu_zhe_zhe_gou":return skeletonToBones_shu_zhe_zhe_gou(n);case"heng_zhe_tiao":return skeletonToBones_heng_zhe_tiao(n);case"heng_zhe_wan":return skeletonToBones_heng_zhe_wan(n);case"heng_zhe_gou":return skeletonToBones_heng_zhe_gou(n);case"heng_zhe_pie":return skeletonToBones_heng_pie(n);case"er_heng_zhe":return skeletonToBones_er_heng_zhe(n);case"heng_zhe2":return skeletonToBones_heng_zhe2(n);case"shu_tiao":return skeletonToBones_shu_tiao(n);case"shu_wan_gou":return skeletonToBones_shu_wan_gou(n);case"xie_gou":return skeletonToBones_xie_gou(n);case"wan_gou":return skeletonToBones_wan_gou(n);case"dian":return skeletonToBones_dian(n);case"tiao":return skeletonToBones_tiao(n);case"ping_na":return skeletonToBones_ping_na(n);default:return console.warn(`No specific skeletonToBones function for type: ${e}`),[]}}catch(r){return console.warn(`Failed to call skeletonToBones for type ${e}:`,r),[]}}function quadraticBezierPoint(e,n,r,g){const y=(1-g)**2*e.x+2*(1-g)*g*n.x+g**2*r.x,k=(1-g)**2*e.y+2*(1-g)*g*n.y+g**2*r.y;return{x:y,y:k}}function componentsToPoints(e){return e.value.points.map(n=>({x:n.x,y:n.y}))}function calculatePointBones(e,n,r){const g={pointIndex:r,bones:[]};if(!e||typeof e.x!="number"||typeof e.y!="number"||isNaN(e.x)||isNaN(e.y))return console.warn("Invalid point in calculatePointBones:",e),g;if(!n||n.length===0)return console.warn("No bones available for binding"),g;const y=[];if(n.forEach((V,L)=>{if(!V||typeof V.length!="number"||isNaN(V.length)||V.length<=0){console.warn("Invalid bone in calculatePointBones:",V);return}const{distance:z,localCoords:j}=pointToBoneDistance(e,V);if(typeof z!="number"||isNaN(z)||z<0){console.warn("Invalid distance calculated:",z,"for point:",e,"bone:",V);return}if(!j||typeof j.u!="number"||typeof j.v!="number"||isNaN(j.u)||isNaN(j.v)){console.warn("Invalid local coordinates:",j,"for point:",e,"bone:",V);return}const ae=V.length*skeletonThreshold;if(z<=ae){const re=1/(z+.001);if(typeof re!="number"||isNaN(re)||re<0){console.warn("Invalid weight calculated:",re,"for distance:",z);return}const oe=j.u,ue=calculateFalloff(oe);if(typeof ue!="number"||isNaN(ue)||ue<0){console.warn("Invalid falloff calculated:",ue,"for u:",oe);return}const le=re*ue;if(typeof le!="number"||isNaN(le)||le<0){console.warn("Invalid final weight:",le,"weight:",re,"falloff:",ue);return}y.push({boneIndex:L,weight:le,localCoords:j})}}),y.length===0){console.warn(`No valid bone weights found for point ${r}, trying fallback strategy`);let V=1/0,L=-1,z={u:0,v:0};if(n.forEach((j,ae)=>{if(!j||typeof j.length!="number"||isNaN(j.length)||j.length<=0)return;const{distance:re,localCoords:oe}=pointToBoneDistance(e,j);typeof re=="number"&&!isNaN(re)&&re>=0&&typeof oe.u=="number"&&!isNaN(oe.u)&&typeof oe.v=="number"&&!isNaN(oe.v)&&re<V&&(V=re,L=ae,z=oe)}),L>=0){const j=1/(V+.001),ae=calculateFalloff(z.u),re=j*ae;y.push({boneIndex:L,weight:re,localCoords:z})}}if(y.length===0)return console.warn(`Still no valid bone weights found for point ${r} after fallback`),g;y.sort((V,L)=>V.weight-L.weight);const k=y.slice(-Math.min(4,y.length)),$=k.reduce((V,L)=>typeof L.weight!="number"||isNaN(L.weight)?(console.warn("Invalid bone weight in normalization:",L.weight),V):V+L.weight,0);return $<=0||isNaN($)?(console.warn("Invalid total weight:",$,"selectedBones:",k),k.forEach(V=>{V.weight=1/k.length})):k.forEach(V=>{V.weight/=$}),g.bones=k,g}function calculateFalloff(e){if(typeof e!="number"||isNaN(e))return console.warn("Invalid u value in calculateFalloff:",e),.5;let n;e<0?n=0:e>1?n=1:n=e;const r=1-2*(n-.5)**2;return typeof r!="number"||isNaN(r)||r<0?(console.warn("Invalid falloff result:",r,"for u:",e,"normalizedU:",n),.5):r}function pointToBoneDistance(e,n){const{x:r,y:g}=e,{start:y,end:k,uAxis:$,vAxis:V}=n;if(!y||!k||!$||!V)return console.warn("Invalid bone data in pointToBoneDistance:",n),{distance:1/0,localCoords:{u:0,v:0}};if(isNaN(r)||isNaN(g)||isNaN(y.x)||isNaN(y.y)||isNaN(k.x)||isNaN(k.y)||isNaN($.x)||isNaN($.y)||isNaN(V.x)||isNaN(V.y))return console.warn("NaN values in pointToBoneDistance:",{x:r,y:g,start:y,end:k,uAxis:$,vAxis:V}),{distance:1/0,localCoords:{u:0,v:0}};const L={x:r-y.x,y:g-y.y},z=L.x*$.x+L.y*$.y,j=L.x*V.x+L.y*V.y;if(isNaN(z)||isNaN(j))return console.warn("NaN in local coordinates calculation:",{u:z,v:j,toPoint:L,uAxis:$,vAxis:V}),{distance:1/0,localCoords:{u:0,v:0}};let ae;return z<0?ae=Math.sqrt((r-y.x)**2+(g-y.y)**2):z>n.length?ae=Math.sqrt((r-k.x)**2+(g-k.y)**2):ae=Math.abs(j),isNaN(ae)||ae<0?(console.warn("Invalid distance calculated:",ae,"for point:",e,"bone:",n),{distance:1/0,localCoords:{u:0,v:0}}):{distance:ae,localCoords:{u:z,v:j}}}function normalize(e){const n=Math.sqrt(e.x**2+e.y**2);return n===0||isNaN(n)?(console.warn("Cannot normalize zero or NaN vector:",e),{x:1,y:0}):{x:e.x/n,y:e.y/n}}function createIdentityMatrix(){return[1,0,0,1,0,0]}function calculateBoneMatrix(e){const{start:n,end:r,uAxis:g,vAxis:y}=e;return[g.x,y.x,g.y,y.y,n.x,n.y]}function calculateBoneTransformationMatrix(e,n){const r=e.bindMatrix,g=calculateBoneMatrix(n),y=invertMatrix(r);return multiplyMatrices(g,y)}function invertMatrix(e){const[n,r,g,y,k,$]=e,V=n*y-r*g;if(Math.abs(V)<.001)return console.warn("Matrix determinant too small for inversion:",V),[1,0,0,1,0,0];const L=1/V,z=y*L,j=-r*L,ae=-g*L,re=n*L,oe=-(z*k+j*$),ue=-(ae*k+re*$);return[z,j,ae,re,oe,ue]}function multiplyMatrices(e,n){const[r,g,y,k,$,V]=e,[L,z,j,ae,re,oe]=n;return[r*L+g*j,r*z+g*ae,y*L+k*j,y*z+k*ae,r*re+g*oe+$,y*re+k*oe+V]}function calculateTransformedPoints(e,n,r){const g=e._glyph.skeleton?.skeletonBindData;if(!g)return console.warn("No bind data found"),[];const{bones:y,pointsBonesMap:k,originalPoints:$}=g;let V=r||$;return!y||!k||!V?(console.warn("Invalid bind data:",g),[]):y.length===0?(console.warn("No bones found"),V.map(z=>({x:z.x,y:z.y}))):(updateBoneMatrices(y,n),k.map((z,j)=>!z||!V[j]?(console.warn("Invalid binding or original point at index:",j),{x:0,y:0}):calculatePointTransformation(z,y,V[j])))}function updateBoneMatrices(e,n){if(!n){console.warn("Invalid skeleton:",n);return}const r=detectSkeletonType(n);r==="line"?updateLinearBoneMatrices(e,n):r==="curve"?updateCurveBoneMatrices(e,n):updateCompositeBoneMatrices(e,n,r)}function updateLinearBoneMatrices(e,n){const r=n.start,g=n.end;if(!r||!g){console.warn("Invalid start or end point:",r,g);return}const y=Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2),k=Math.max(20,y/maxSegment),$=Math.max(minSegment,Math.ceil(y/k));for(let V=0;V<$&&V<e.length;V++){const L={...e[V]},z=e[V],j=V/$,ae=(V+1)/$,re={x:r.x+(g.x-r.x)*j,y:r.y+(g.y-r.y)*j},oe={x:r.x+(g.x-r.x)*ae,y:r.y+(g.y-r.y)*ae};z.start=re,z.end=oe,z.length=Math.sqrt((oe.x-re.x)**2+(oe.y-re.y)**2),(isNaN(z.length)||z.length<.001)&&(console.warn("Invalid bone length:",z.length),z.length=.001),z.uAxis=normalize({x:oe.x-re.x,y:oe.y-re.y}),z.vAxis=normalize({x:-(oe.y-re.y),y:oe.x-re.x}),z.currentMatrix=calculateBoneTransformationMatrix(L,z)}}function updateCurveBoneMatrices(e,n){const r=n.start,g=n.bend,y=n.end;if(!r||!g||!y){console.warn("Invalid skeleton points:",r,g,y);return}const k=maxSegment;for(let $=0;$<k&&$<e.length;$++){const V=$/k,L=($+1)/k,z=quadraticBezierPoint(r,g,y,V),j=quadraticBezierPoint(r,g,y,L),ae={...e[$]},re=e[$];re.start=z,re.end=j,re.length=Math.sqrt((j.x-z.x)**2+(j.y-z.y)**2),(isNaN(re.length)||re.length<.001)&&(console.warn("Invalid bone length:",re.length),re.length=.001),re.uAxis=normalize({x:j.x-z.x,y:j.y-z.y}),re.vAxis=normalize({x:-(j.y-z.y),y:j.x-z.x}),re.currentMatrix=calculateBoneTransformationMatrix(ae,re)}}function updateCompositeBoneMatrices(e,n,r){try{const g=callStrokeSkeletonToBones(r,n);if(g.length===0){console.warn(`No bones generated for skeleton type: ${r}`);return}if(g.length!==e.length){for(console.warn(`Bone count mismatch: expected ${e.length}, got ${g.length}`);e.length<g.length;)e.push(createDefaultBone(`extra_${e.length}`));for(;e.length>g.length;)e.pop()}for(let y=0;y<e.length&&y<g.length;y++){const k={...e[y]},$=g[y],V=e[y];V.start=$.start,V.end=$.end,V.length=$.length,V.uAxis=$.uAxis,V.vAxis=$.vAxis,V.children=$.children,V.parent=$.parent,(isNaN(V.length)||V.length<.001)&&(console.warn("Invalid bone length:",V.length),V.length=.001),V.currentMatrix=calculateBoneTransformationMatrix(k,V)}}catch(g){console.warn(`Failed to update composite bone matrices for type ${r}:`,g),updateLinearBoneMatrices(e,n)}}function createDefaultBone(e){return{id:e,start:{x:0,y:0},end:{x:1,y:0},length:1,uAxis:{x:1,y:0},vAxis:{x:0,y:1},children:[],bindMatrix:createIdentityMatrix(),currentMatrix:createIdentityMatrix()}}function calculatePointTransformation(e,n,r){let g=0,y=0;return!r||typeof r.x!="number"||typeof r.y!="number"?(console.warn("Invalid original point:",r),{x:0,y:0}):!e.bones||e.bones.length===0?(console.warn("No bones bound to point:",e),r):(e.bones.forEach(({boneIndex:k,weight:$,localCoords:V},L)=>{const z=n[k];if(!z){console.warn("Bone not found at index:",k);return}if(typeof $!="number"||isNaN($)||$<0){console.warn("Invalid weight:",$);return}if(!z.currentMatrix){console.warn("Invalid bone currentMatrix:",z);return}const j=transformPointToWorld(r,z.currentMatrix);if(isNaN(j.x)||isNaN(j.y)){console.warn("Invalid transformed point:",j,"for bone:",z);return}const ae=$*j.x,re=$*j.y;g+=ae,y+=re}),isNaN(g)||isNaN(y)?(console.warn("Final transformation result is NaN, returning original point"),r):{x:g,y})}function transformPointToWorld(e,n){if(!n||n.length!==6)return console.warn("Invalid matrix:",n),e;const[r,g,y,k,$,V]=n;if(isNaN(r)||isNaN(g)||isNaN(y)||isNaN(k)||isNaN($)||isNaN(V))return console.warn("Matrix contains NaN values:",n),e;const L={x:r*e.x+g*e.y+$,y:y*e.x+k*e.y+V};return isNaN(L.x)||isNaN(L.y)?(console.warn("Transform result is NaN:",L,"for point:",e,"matrix:",n),e):L}function applySkeletonTransformation(e,n){const r=e.components.filter(V=>V.type==="pen");if(r.length===0){console.warn("No pen components found in applySkeletonTransformation");return}const g=r[0],{originalPoints:y}=e._glyph.skeleton.skeletonBindData,k=clone(y);if(e._glyph?.skeleton?.dynamicWeight){const V=e.getParam(""),L=e._glyph.skeleton.originWeight;if(V&&V!==L){const z=(V-L)/2,j=y;for(let ae=0;ae<j.length-1;ae+=3){const re=[j[ae],j[ae+1],j[ae+2],j[ae+3]],oe=Math.atan2(re[1].y-re[0].y,re[1].x-re[0].x),ue=Math.atan2(re[3].y-re[2].y,re[3].x-re[2].x),le={x:re[0].x-Math.sin(oe)*z,y:re[0].y+Math.cos(oe)*z},de={x:re[1].x-Math.sin(oe)*z,y:re[1].y+Math.cos(oe)*z},he={x:re[2].x-Math.sin(ue)*z,y:re[2].y+Math.cos(ue)*z},_e={x:re[3].x-Math.sin(ue)*z,y:re[3].y+Math.cos(ue)*z};k[ae].x=le.x,k[ae].y=le.y,k[ae+1].x=de.x,k[ae+1].y=de.y,k[ae+2].x=he.x,k[ae+2].y=he.y,k[ae+3].x=_e.x,k[ae+3].y=_e.y}}}let $=calculateTransformedPoints(e,n,k);if($.length===g.value.points.length){g.value.points.forEach((L,z)=>{const j=$[z];L.x=j.x,L.y=j.y});const V=getBound$5(g.value.points);g.x=V.x,g.y=V.y,g.w=V.w,g.h=V.h}else console.warn("Transformed points length mismatch:",$.length,g.value.points.length)}const instanceBasicGlyph_heng=e=>{const n=new CustomGlyph(e),r={length:n.getParam(""),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$2(r,n)},bindSkeletonGlyph_heng=e=>{e._o||instanceBasicGlyph_heng(e),glyphSkeletonBind(e._o)},updateGlyphByParams$2=(e,n)=>{const{length:r,skeletonRefPos:g,weight:y}=e,{ox:k,oy:$}=n._glyph.skeleton,V=250+k||0,L=500+$||0;let z,j;const ae=new FP.Joint("start_ref",{x:V,y:L}),re=new FP.Joint("end_ref",{x:ae.x+r,y:ae.y});g===1?(z=new FP.Joint("start",{x:ae.x,y:ae.y+y/2}),j=new FP.Joint("end",{x:re.x,y:re.y+y/2})):g===2?(z=new FP.Joint("start",{x:ae.x,y:ae.y-y/2}),j=new FP.Joint("end",{x:re.x,y:re.y-y/2})):(z=new FP.Joint("start",{x:ae.x,y:ae.y}),j=new FP.Joint("end",{x:re.x,y:re.y})),n.addJoint(ae),n.addJoint(re),n.addRefLine(refline(ae,re,"ref")),n.addJoint(z),n.addJoint(j);const oe={start:z,end:j};n.addRefLine(refline(z,j)),n.getSkeleton=()=>oe},computeParamsByJoints$2=(e,n)=>{const{start:r,end:g}=e,y=n.getParamRange("");return{length:range(g.x-r.x,y),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_heng=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$2(g,e);updateGlyphByParams$2(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$2(g,e);updateGlyphByParams$2(y,e),e.setParam("",y.length),e.tempData=null}},updateSkeletonListener_after_bind_heng=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$2(g,e);updateGlyphByParams$2(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$2(g,e);updateGlyphByParams$2(y,e),updateSkeletonTransformation(e),e.setParam("",y.length),e.tempData=null}},instanceBasicGlyph_shu=e=>{const n=new CustomGlyph(e),r={length:n.getParam(""),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams$1(r,n)},bindSkeletonGlyph_shu=e=>{e._o||instanceBasicGlyph_shu(e),glyphSkeletonBind(e._o)},updateGlyphByParams$1=(e,n)=>{const{length:r,skeletonRefPos:g,weight:y}=e,{ox:k,oy:$}=n._glyph.skeleton,V=500+k||0,L=250+$||0;let z,j;const ae=new FP.Joint("start_ref",{x:V,y:L}),re=new FP.Joint("end_ref",{x:ae.x,y:ae.y+r});g===1?(z=new FP.Joint("start",{x:ae.x-y/2,y:ae.y}),j=new FP.Joint("end",{x:re.x-y/2,y:re.y})):g===2?(z=new FP.Joint("start",{x:ae.x+y/2,y:ae.y}),j=new FP.Joint("end",{x:re.x+y/2,y:re.y})):(z=new FP.Joint("start",{x:ae.x,y:ae.y}),j=new FP.Joint("end",{x:re.x,y:re.y})),n.addJoint(ae),n.addJoint(re),n.addRefLine(refline(ae,re,"ref")),n.addJoint(z),n.addJoint(j);const oe={start:z,end:j};n.addRefLine(refline(z,j)),n.getSkeleton=()=>oe},computeParamsByJoints$1=(e,n)=>{const{start:r,end:g}=e,y=n.getParamRange("");return{length:range(g.y-r.y,y),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_shu=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"end":{$.end={x:e.tempData.end.x,y:e.tempData.end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$1(g,e);updateGlyphByParams$1(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$1(g,e);updateGlyphByParams$1(y,e),e.setParam("",y.length),e.tempData=null}},updateSkeletonListener_after_bind_shu=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"end":{$.end={x:e.tempData.end.x,y:e.tempData.end.y+k};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$1(g,e);updateGlyphByParams$1(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints$1(g,e);updateGlyphByParams$1(y,e),updateSkeletonTransformation(e),e.setParam("",y.length),e.tempData=null}},instanceBasicGlyph_pie=e=>{const n=new CustomGlyph(e),r={horizonalSpan:n.getParam(""),verticalSpan:n.getParam(""),bendCursor:n.getParam(""),bendDegree:Number(n.getParam(""))+30*Number(n.getParam("")||1),skeletonRefPos:n.getParam(""),weight:n.getParam("")||40};updateGlyphByParams(r,n)},bindSkeletonGlyph_pie=e=>{e._o||instanceBasicGlyph_pie(e),glyphSkeletonBind(e._o)},distance$4=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),getBend=(e,n,r,g)=>{const y=Math.abs(n.x-e.x),k=Math.abs(n.y-e.y),$=e.x-r*y,V=e.y+r*k,L=Math.atan2(k,y);return{x:$+g*Math.sin(L),y:V+g*Math.cos(L)}},updateGlyphByParams=(e,n)=>{const{horizonalSpan:r,verticalSpan:g,bendCursor:y,bendDegree:k}=e,{ox:$,oy:V}=n._glyph.skeleton,L=750+$||0,z=250+V||0,j=new FP.Joint("start",{x:L,y:z}),ae=new FP.Joint("end",{x:j.x-r,y:j.y+g});distance$4(j,ae);const re=j.x-y*r,oe=j.y+y*g,ue=Math.atan2(g,r),le=new FP.Joint("bend",{x:re+k*Math.sin(ue),y:oe+k*Math.cos(ue)});n.addJoint(j),n.addJoint(ae),n.addJoint(le);const de={start:j,end:ae,bend:le};n.addRefLine(refline(j,le)),n.addRefLine(refline(le,ae)),n.getSkeleton=()=>de},computeParamsByJoints=(e,n)=>{const{start:r,end:g,bend:y}=e,k=n.getParamRange(""),$=n.getParamRange(""),V=n.getParamRange(""),L=n.getParamRange(""),z=range(r.x-g.x,k),j=range(g.y-r.y,$),ae=FP.distanceAndFootPoint(r,g,y),re=range(ae.percentageFromA,V),oe=range(ae.distance,L);return{horizonalSpan:z,verticalSpan:j,bendCursor:re,bendDegree:oe,skeletonRefPos:n.getParam(""),weight:n.getParam("")||40}},updateSkeletonListener_before_bind_pie=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"start":{const V=r.deltaX,L=r.deltaY;e._glyph.skeleton&&(e._glyph.skeleton.ox=(e.tempData.ox||0)+V,e._glyph.skeleton.oy=(e.tempData.oy||0)+L),Object.keys($).forEach(z=>{$[z]={x:e.tempData[z].x+V,y:e.tempData[z].y+L}});break}case"bend":{$.bend={x:e.tempData.bend.x+y,y:e.tempData.bend.y+k};break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};const V=getBend($.start,$.end,e.tempData.bendCursor,e.tempData.bendDegree);$.bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.ox=e._glyph.skeleton.ox,e.tempData.oy=e._glyph.skeleton.oy,e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints(g,e);updateGlyphByParams(y,e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints(g,e);updateGlyphByParams(y,e),e.setParam("",y.horizonalSpan),e.setParam("",y.verticalSpan),e.setParam("",y.bendCursor),e.setParam("",y.bendDegree-30*Number(e.getParam("")||1)),e.tempData=null}},updateSkeletonListener_after_bind_pie=e=>{const n=r=>{const{draggingJoint:g,deltaX:y,deltaY:k}=r,$=Object.assign({},e.tempData);switch(g.name){case"bend":{$.bend={x:e.tempData.bend.x+y,y:e.tempData.bend.y+k};break}case"end":{$.end={x:e.tempData.end.x+y,y:e.tempData.end.y+k};const V=getBend($.start,$.end,e.tempData.bendCursor,e.tempData.bendDegree);$.bend={x:V.x,y:V.y};break}}return $};e.onSkeletonDragStart=r=>{e.tempData={},e.tempData.bendCursor=e.getParam(""),e.tempData.bendDegree=Number(e.getParam(""))+30*Number(e.getParam("")||1),e.getJoints().map(g=>{const y={name:g.name,x:g.x,y:g.y};e.tempData[y.name]=y})},e.onSkeletonDrag=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints(g,e);updateGlyphByParams(y,e),updateSkeletonTransformation(e)},e.onSkeletonDragEnd=r=>{if(!e.tempData)return;e.clear();const g=n(r),y=computeParamsByJoints(g,e);updateGlyphByParams(y,e),updateSkeletonTransformation(e),e.setParam("",y.horizonalSpan),e.setParam("",y.verticalSpan),e.setParam("",y.bendCursor),e.setParam("",y.bendDegree-30*Number(e.getParam("")||1)),e.tempData=null}},updateSkeletonTransformation=e=>{const n=e.getSkeleton();applySkeletonTransformation(e,n)},strokeFnMap={:{instanceBasicGlyph:instanceBasicGlyph_heng,bindSkeletonGlyph:bindSkeletonGlyph_heng,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_shu,bindSkeletonGlyph:bindSkeletonGlyph_shu,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_shu,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_shu,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_pie,bindSkeletonGlyph:bindSkeletonGlyph_pie,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_pie,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_pie,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_na,bindSkeletonGlyph:bindSkeletonGlyph_na,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_na,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_na,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_dian,bindSkeletonGlyph:bindSkeletonGlyph_dian,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_dian,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_dian,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_tiao,bindSkeletonGlyph:bindSkeletonGlyph_tiao,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_tiao,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_tiao,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_gou,bindSkeletonGlyph:bindSkeletonGlyph_heng_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_wan_gou,bindSkeletonGlyph:bindSkeletonGlyph_wan_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_wan_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_wan_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_shu_gou,bindSkeletonGlyph:bindSkeletonGlyph_shu_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_shu_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_shu_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_shu_zhe_zhe_gou,bindSkeletonGlyph:bindSkeletonGlyph_shu_zhe_zhe_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_shu_zhe_zhe_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_shu_zhe_zhe_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_pie,bindSkeletonGlyph:bindSkeletonGlyph_heng_pie,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_pie,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_pie,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_zhe,bindSkeletonGlyph:bindSkeletonGlyph_heng_zhe,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_zhe,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_zhe,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_shu_pie,bindSkeletonGlyph:bindSkeletonGlyph_shu_pie,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_shu_pie,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_shu_pie,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_zhe_zhe_pie,bindSkeletonGlyph:bindSkeletonGlyph_heng_zhe_zhe_pie,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_zhe_zhe_pie,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_zhe_zhe_pie,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_zhe_gou,bindSkeletonGlyph:bindSkeletonGlyph_heng_zhe_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_zhe_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_zhe_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_zhe_wan_gou,bindSkeletonGlyph:bindSkeletonGlyph_heng_zhe_wan_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_zhe_wan_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_zhe_wan_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_wan_gou,bindSkeletonGlyph:bindSkeletonGlyph_heng_wan_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_wan_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_wan_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_zhe_zhe_wan_gou,bindSkeletonGlyph:bindSkeletonGlyph_heng_zhe_zhe_wan_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_zhe_zhe_wan_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_zhe_zhe_wan_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_er_heng_zhe,bindSkeletonGlyph:bindSkeletonGlyph_er_heng_zhe,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_er_heng_zhe,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_er_heng_zhe,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_zhe_wan,bindSkeletonGlyph:bindSkeletonGlyph_heng_zhe_wan,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_zhe_wan,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_zhe_wan,updateSkeletonTransformation},2:{instanceBasicGlyph:instanceBasicGlyph_heng_zhe2,bindSkeletonGlyph:bindSkeletonGlyph_heng_zhe2,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_zhe2,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_zhe2,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_zhe_tiao,bindSkeletonGlyph:bindSkeletonGlyph_heng_zhe_tiao,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_zhe_tiao,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_zhe_tiao,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_shu_tiao,bindSkeletonGlyph:bindSkeletonGlyph_shu_tiao,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_shu_tiao,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_shu_tiao,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_shu_wan,bindSkeletonGlyph:bindSkeletonGlyph_shu_wan,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_shu_wan,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_shu_wan,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_shu_wan_gou,bindSkeletonGlyph:bindSkeletonGlyph_shu_wan_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_shu_wan_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_shu_wan_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_shu_zhe,bindSkeletonGlyph:bindSkeletonGlyph_shu_zhe,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_shu_zhe,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_shu_zhe,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_xie_gou,bindSkeletonGlyph:bindSkeletonGlyph_xie_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_xie_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_xie_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_heng_pie_wan_gou,bindSkeletonGlyph:bindSkeletonGlyph_heng_pie_wan_gou,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_heng_pie_wan_gou,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_heng_pie_wan_gou,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_pie_tiao,bindSkeletonGlyph:bindSkeletonGlyph_pie_tiao,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_pie_tiao,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_pie_tiao,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_pie_dian,bindSkeletonGlyph:bindSkeletonGlyph_pie_dian,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_pie_dian,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_pie_dian,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_tiao_na,bindSkeletonGlyph:bindSkeletonGlyph_tiao_na,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_tiao_na,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_tiao_na,updateSkeletonTransformation},:{instanceBasicGlyph:instanceBasicGlyph_ping_na,bindSkeletonGlyph:bindSkeletonGlyph_ping_na,updateSkeletonListenerBeforeBind:updateSkeletonListener_before_bind_ping_na,updateSkeletonListenerAfterBind:updateSkeletonListener_after_bind_ping_na,updateSkeletonTransformation}},skeletonOptions=[{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"2",value:"2"},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""},{label:"",value:""}],getParentInfo=e=>({uuid:e.uuid,type:e.type});var ParameterType=(e=>(e[e.Number=0]="Number",e[e.Constant=1]="Constant",e[e.RingController=2]="RingController",e[e.Enum=3]="Enum",e[e.PlaygroundConstant=4]="PlaygroundConstant",e[e.AdvancedEditConstant=5]="AdvancedEditConstant",e))(ParameterType||{});ref(0);const selectedParam=ref(null),selectedParamType=ref(""),constants=ref([]),constantsMap=new ConstantsMap(constants.value),glyphs=ref([]),radical_glyphs=ref([]),stroke_glyphs=ref([]),comp_glyphs=ref([]);var ConstantType=(e=>(e[e.Component=0]="Component",e[e.Parameter=1]="Parameter",e))(ConstantType||{}),GlyphType=(e=>(e[e.Char=0]="Char",e[e.StrokeGlyph=1]="StrokeGlyph",e[e.RadicalGlyph=2]="RadicalGlyph",e[e.CompGlyph=3]="CompGlyph",e[e.Glyph=4]="Glyph",e))(GlyphType||{});const convertGlyphType=e=>e===Status.GlyphList?4:e===Status.StrokeGlyphList?1:e===Status.RadicalGlyphList?2:e===Status.CompGlyphList?3:e===Status.CharacterList?0:null,constantGlyphMap=new Map,editGlyphUUID=ref(""),initGlyphEnvironment=async()=>{window.FP=FP},getGlyphByUUID=e=>{let n=null;for(let r=0;r<glyphs.value.length;r++)if(glyphs.value[r].uuid===e)return n=glyphs.value[r],n;for(let r=0;r<radical_glyphs.value.length;r++)if(radical_glyphs.value[r].uuid===e)return n=radical_glyphs.value[r],n;for(let r=0;r<stroke_glyphs.value.length;r++)if(stroke_glyphs.value[r].uuid===e)return n=stroke_glyphs.value[r],n;for(let r=0;r<comp_glyphs.value.length;r++)if(comp_glyphs.value[r].uuid===e)return n=comp_glyphs.value[r],n;return n},getGlyphByName=e=>{let n=null;for(let r=0;r<glyphs.value.length;r++)if(glyphs.value[r].name===e)return n=glyphs.value[r],n;for(let r=0;r<radical_glyphs.value.length;r++)if(radical_glyphs.value[r].name===e)return n=radical_glyphs.value[r],n;for(let r=0;r<stroke_glyphs.value.length;r++)if(stroke_glyphs.value[r].name===e)return n=stroke_glyphs.value[r],n;for(let r=0;r<comp_glyphs.value.length;r++)if(comp_glyphs.value[r].name===e)return n=comp_glyphs.value[r],n;return n},getGlyphType=e=>{for(let n=0;n<glyphs.value.length;n++)if(glyphs.value[n].uuid===e)return Status.GlyphList;for(let n=0;n<radical_glyphs.value.length;n++)if(radical_glyphs.value[n].uuid===e)return Status.RadicalGlyphList;for(let n=0;n<stroke_glyphs.value.length;n++)if(stroke_glyphs.value[n].uuid===e)return Status.StrokeGlyphList;for(let n=0;n<comp_glyphs.value.length;n++)if(comp_glyphs.value[n].uuid===e)return Status.CompGlyphList;return Status.Glyph},editGlyph=ref(null),setEditGlyphByUUID=e=>{let n=getGlyphByUUID(editGlyphUUID.value);editGlyph.value=clone(n)},updateGlyphListFromEditFile=()=>{const e=getGlyphType(editGlyph.value.uuid);let n=null;if(e===Status.GlyphList?n=n.value:e===Status.RadicalGlyphList?n=radical_glyphs.value:e===Status.StrokeGlyphList?n=stroke_glyphs.value:e===Status.CompGlyphList&&(n=comp_glyphs.value),!!n){for(let r=0;r<n.length;r++)if(editGlyph.value.uuid===n[r].uuid){n[r]=clone(editGlyph.value);break}}},selectedComponent$1=computed(()=>!selectedComponents$1.value||selectedComponents$1.value.length===0?null:selectedComponents$1.value.length===1?selectedComponents$1.value[0]:"multi"),selectedComponentUUID$1=computed(()=>!selectedComponents$1.value||selectedComponents$1.value.length===0?"":selectedComponents$1.value.length===1?selectedComponents$1.value[0].uuid:"multi"),usedComponents$1=computed(()=>componentsForCurrentGlyph.value.filter(n=>n.usedInCharacter===!0)),selectedComponents$1=computed(()=>editGlyphUUID.value?editGlyph.value?.selectedComponentsUUIDs.map(n=>traverseComponents$1(editGlyph.value.components,n)):null),traverseComponents$1=(e,n)=>{for(let r=0;r<e.length;r++){const g=e[r];if(g.uuid===n)return g;if(g.value.components&&g.value.components.length){const y=traverseComponents$1(g.value.components,n);if(y)return y}}return null},SubComponents$1=computed(()=>{if(!editGlyphUUID.value||!editGlyph.value?.selectedComponentsTree||!editGlyph.value?.selectedComponentsTree.length)return null;let e=null;for(let r=0;r<editGlyph.value?.selectedComponentsTree.length-1;r++){const g=editGlyph.value?.selectedComponentsTree[r];e?e=selectedItemByUUID(e.value.components,g):e=selectedItemByUUID(editGlyph.value.components,g)}return e.value.components.map(r=>selectedItemByUUID(e.value.components,r.uuid))}),SubComponentsRoot$1=computed(()=>{if(!editGlyphUUID.value||!editGlyph.value?.selectedComponentsTree||!editGlyph.value?.selectedComponentsTree.length)return null;let e=null;for(let n=0;n<editGlyph.value?.selectedComponentsTree.length-1;n++){const r=editGlyph.value?.selectedComponentsTree[n];e?e=selectedItemByUUID(e.value.components,r):e=selectedItemByUUID(editGlyph.value.components,r)}return e}),selectedSubComponent$1=computed(()=>{let e=null;if(!editGlyphUUID.value)e=null;else if(!editGlyph.value?.selectedComponentsTree||!editGlyph.value?.selectedComponentsTree.length)e=null;else{let n=null;for(let g=0;g<editGlyph.value?.selectedComponentsTree.length-1;g++){const y=editGlyph.value?.selectedComponentsTree[g];n?n=selectedItemByUUID(n.value.components,y):n=selectedItemByUUID(editGlyph.value.components,y)}const r=editGlyph.value?.selectedComponentsTree[editGlyph.value?.selectedComponentsTree.length-1];r!=="null"&&(e=selectedItemByUUID(n.value.components,r))}return e}),componentsForCurrentGlyph=computed(()=>editGlyphUUID.value?editGlyph.value.components:[]),orderedListWithItemsForCurrentGlyph=computed(()=>editGlyphUUID.value?editGlyph.value.orderedList.map(e=>e.type==="group"?selectedItemByUUID(editGlyph.value.groups,e.uuid):selectedItemByUUID(editGlyph.value.components,e.uuid)):[]),orderedListWithItemsForGlyph=e=>e.orderedList.map(n=>n.type==="group"?selectedItemByUUID(e.groups,n.uuid):selectedItemByUUID(e.components,n.uuid)),orderedListForCurrentGlyph=computed(()=>editGlyphUUID.value?editGlyph.value.orderedList:[]),selectedComponentsUUIDs$1=computed(()=>editGlyphUUID.value?editGlyph.value.selectedComponentsUUIDs:""),getConstant=e=>{let n=null;return constants.value.forEach(r=>{r.uuid===e&&(n=r)}),n},removeOrderedItemForCurrentGlyph=e=>{const n=(()=>{for(let r=0;r<editGlyph.value.orderedList.length;r++)if(editGlyph.value.orderedList[r].uuid===e)return r;return-1})();n>=0&&editGlyph.value.orderedList.splice(n,1)},removeComponentForCurrentGlyph=e=>{const n=(()=>{for(let r=0;r<editGlyph.value.components.length;r++)if(editGlyph.value.components[r].uuid===e)return r;return-1})();removeOrderedItemForCurrentGlyph(e),editGlyph.value.glyph_script&&editGlyph.value.glyph_script[e]&&delete editGlyph.value.glyph_script[e],editGlyph.value.components.splice(n,1)},insertComponentForCurrentGlyph=(e,n)=>{editGlyph.value.components.push(e),insertOrderedItemForCurrentGlyph({type:"component",uuid:e.uuid},n)},setSelectionForCurrentGlyph=e=>{if(e)if(enableMultiSelect.value){const n=editGlyph.value.selectedComponentsUUIDs.indexOf(e);n===-1?editGlyph.value.selectedComponentsUUIDs.push(e):editGlyph.value.selectedComponentsUUIDs.splice(n,1)}else editGlyph.value.selectedComponentsUUIDs=[e];else editGlyph.value.selectedComponentsUUIDs=[]},modifySubComponent$1=e=>{if(!(!editGlyph.value?.selectedComponentsTree||!editGlyph.value?.selectedComponentsTree.length)){let n=null,r=null;const g=clone(editGlyph.value?.components);for(let $=0;$<editGlyph.value?.selectedComponentsTree.length-1;$++){const V=editGlyph.value?.selectedComponentsTree[$];n?n=selectedItemByUUID(n.value.components,V):n=selectedItemByUUID(g,V)}const y=editGlyph.value?.selectedComponentsTree[editGlyph.value?.selectedComponentsTree.length-1];y!=="null"&&(r=selectedItemByUUID(n.value.components,y));const k=Object.keys(e);for(let $=0;$<k.length;$++){const V=k[$];r[V]=e[V]}editGlyph.value.components=g}},modifyGlyph=(e,n)=>{const r=getGlyphByUUID(e);Object.keys(n).map(g=>{g==="view"?Object.keys(n.view).map(y=>{r.view[y]=n.view[y]}):r[g]=n[g]}),emitter.emit("renderGlyphPreviewCanvasByUUID",e)},modifyComponentForCurrentGlyph=(e,n)=>{const r=clone(editGlyph.value.components);r.forEach(g=>{g.uuid===e&&Object.keys(n).map(y=>{switch(y){case"type":g.type=n.type;break;case"name":g.name=n.name;break;case"lock":g.lock=n.lock;break;case"visible":g.visible=n.visible;break;case"x":g.x=n.x;break;case"y":g.y=n.y;break;case"w":g.w=n.w;break;case"h":g.h=n.h;break;case"rotation":g.rotation=n.rotation;break;case"flipX":g.flipX=n.flipX;break;case"flipY":g.flipY=n.flipY;break;case"usedInCharacter":g.usedInCharacter=n.usedInCharacter;break;case"ox":g.ox=n.ox;break;case"oy":g.oy=n.oy;break;case"opacity":g.opacity=n.opacity;break;case"value":Object.keys(n.value).map(k=>{if(g.value[k]=n.value[k],k==="points"){const{x:$,y:V,w:L,h:z}=getBound$5(n.value[k].reduce((j,ae)=>(j.push({x:ae.x,y:ae.y}),j),[]));g.x=$,g.y=V,g.w=L,g.h=z}});break}}),editGlyph.value.components=r}),emitter.emit("renderGlyphPreviewCanvasByUUID",e)},addOrderedItemForGlyph=(e,n)=>{getGlyphByUUID(e).orderedList.push(n)},addOrderedItemForCurrentGlyph=e=>{editGlyph.value.orderedList.push(e)},insertOrderedItemForCurrentGlyph=(e,n)=>{const r=(()=>{for(let g=0;g<editGlyph.value.orderedList.length;g++)if(editGlyph.value.orderedList[g].uuid===n.uuid)return g})();n.pos==="prev"&&editGlyph.value.orderedList.splice(r,0,e),n.pos==="next"&&editGlyph.value.orderedList.splice(r+1,0,e)},setOrderedListForCurrentGlyph=e=>{editGlyph.value.orderedList=e},setEditGlyphUUID=e=>{editGlyphUUID.value=e},addGlyph=(e,n)=>{n===Status.GlyphList?glyphs.value.push(e):n===Status.StrokeGlyphList?stroke_glyphs.value.push(e):n===Status.RadicalGlyphList?radical_glyphs.value.push(e):n===Status.CompGlyphList&&comp_glyphs.value.push(e)},removeGlyph=(e,n)=>{if(n===Status.GlyphList){for(let r=0;r<glyphs.value.length;r++)if(glyphs.value[r].uuid===e){glyphs.value.splice(r,1);return}}else if(n===Status.StrokeGlyphList){for(let r=0;r<stroke_glyphs.value.length;r++)if(stroke_glyphs.value[r].uuid===e){stroke_glyphs.value.splice(r,1);return}}else if(n===Status.RadicalGlyphList){for(let r=0;r<radical_glyphs.value.length;r++)if(radical_glyphs.value[r].uuid===e){radical_glyphs.value.splice(r,1);return}}else if(n===Status.CompGlyphList){for(let r=0;r<comp_glyphs.value.length;r++)if(comp_glyphs.value[r].uuid===e){comp_glyphs.value.splice(r,1);return}}},addComponentsForGlyph=(e,n)=>{getGlyphByUUID(e),n.forEach(r=>{addComponentForGlyph(e,r)})},addComponentsForCurrentGlyph=e=>{e.forEach(n=>{addComponentForCurrentGlyph(n)})},addComponentForGlyph=(e,n)=>{getGlyphByUUID(e).components.push(n),addOrderedItemForGlyph(e,{type:"component",uuid:n.uuid})},addComponentForCurrentGlyph=e=>{editGlyph.value.components.push(e),addOrderedItemForCurrentGlyph({type:"component",uuid:e.uuid}),setSelectionForCurrentGlyph(e.uuid)},scripts_map=ref({}),tempScript=e=>{if(e.type!=="text"&&e.type!=="icon"&&e.script_reference){const n=getGlyphByUUID(e.script_reference);n&&n.script&&(scripts_map.value[e.script_reference]=n.script)}for(let n=0;n<e.components.length;n++){const r=e.components[n];r.type==="glyph"&&tempScript(r.value)}},getScript=e=>{if(e.script)return e.script;if(e.script_reference){if(scripts_map[e.script_reference])return scripts_map[e.script_reference];{const n=getGlyphByUUID(e.script_reference);if(n.script)return n.script}}return null},executeScript=e=>{try{if(e._o&&e._o.tempData)return;if(e.skeleton){const g=strokeFnMap[e.skeleton.type];if(g){g.instanceBasicGlyph(e),e.skeleton.onSkeletonBind?g.updateSkeletonListenerBeforeBind(e._o):g.updateSkeletonListenerAfterBind(e._o),updateSkeletonTransformation(e._o);return}}const n=new CustomGlyph(e),r=n._glyph;for(let g=0;g<e.components.length;g++)e.components[g].type==="glyph"&&executeScript(e.components[g].value);window.glyph=n,constantsMap.update(constants.value),window.constantsMap=constantsMap;try{const g=getScript(e);g&&new Function(`${g}
script_${e.uuid.replaceAll("-","_")} (glyph, constantsMap, FP)`)()}catch(g){console.error(g)}if(e&&e.glyph_script){const g=Object.keys(e.glyph_script);for(let y=0;y<g.length;y++){const k=e.glyph_script[g[y]];new Function(`${k}`)()}}if(e&&e.param_script){const g=Object.keys(e.param_script);for(let y=0;y<g.length;y++){const k=e.param_script[g[y]];new Function(`${k}`)()}}e?.components?.map(g=>{if(window.comp_glyph=new CustomGlyph(g.value),g.value&&g.value.system_script){const y=Object.keys(g.value.system_script);for(let k=0;k<y.length;k++){const $=g.value.system_script[y[k]];window.glyph=n,new Function(`${$}`)()}}window.comp_glyph=null}),window.glyph=null,window.constantsMap=null}catch(n){console.warn(n)}},getRatioOptions=e=>{const n=[{key:0,value:"DEFAULT",label:"DEFAULT",uuid:"",type:""}];return e.layout?e.layout.type==="rect"&&(n.push({key:1,value:"width",label:"width",uuid:e.uuid,type:e.type}),n.push({key:2,value:"height",label:"height",uuid:e.uuid,type:e.type})):e.parent&&e.parent.type==="system"&&e.parent.layout?e.parent.layout.type==="rect"&&(n.push({key:1,value:"width",label:"width",uuid:e.parent.uuid,type:e.parent.type}),n.push({key:2,value:"height",label:"height",uuid:e.parent.uuid,type:e.parent.type})):e.parent&&(e.parent.type==="text"||e.parent.type==="icon")&&e.parent.info&&e.parent.info.layoutTree&&findLeafNodes$1(e.parent.info?.layoutTree).map((g,y)=>{n.push({key:`${y}-1`,value:`${g.id}-w`,label:`${g.id}-w`,uuid:e.parent.uuid,type:e.parent.type}),n.push({key:`${y}-2`,value:`${g.id}-h`,label:`${g.id}-h`,uuid:e.parent.uuid,type:e.parent.type})}),n},getRatioLayout=(e,n)=>{let r=null;if(!e.parent&&e.layout)r=e.layout.params[n];else if(e.parent&&e.parent.type==="system"&&e.parent.layout)r=e.parent.layout.params[n];else if(e.parent&&(e.parent.type==="text"||e.parent.type==="icon")&&e.parent.info&&e.parent.info.layoutTree){const g=n.split("-"),y=g.splice(g.length-1,1)[0],k=g.join("-");findLeafNodes$1(e.parent.info?.layoutTree).map(V=>{V.id===k&&(r=V.rect[y])})}return r},getRatioLayout2=(e,n)=>{let r=null;return e.layout&&(r=e.layout.params[n]),r},findLeafNodes$1=e=>{const n=[],r=g=>{!g.children||g.children.length===0?n.push(g):g.children.forEach(y=>r(y))};return e.forEach(g=>r(g)),n},deleteCharacter$1=(e,n)=>{e.stopPropagation(),removeGlyph(n,getGlyphType(n)),deleteGlyphTemplate(n,editStatus.value)},editGlyphFile=async e=>{loading$1.value=!0,total$1.value=0,await nextTick(),setTimeout(()=>{setEditGlyphUUID(e),setEditGlyphByUUID(editGlyphUUID.value),setPrevStatus(editStatus.value),setEditStatus(Status.Glyph),loading$1.value=!1},500)},renameCharacter$1=(e,n)=>{e.stopPropagation(),editedGlyphUUID.value=n,setEditGlyphDialogVisible(!0)},copyCharacter$1=(e,n)=>{e.stopPropagation(),copiedGlyphUUID.value=n,setCopyGlyphDialogVisible(!0)},generateGlyphTemplate=e=>{const n=document.getElementById("glyph-template").querySelector(".glyph").cloneNode(!0);return n.className=`glyph glyph-${e.uuid}`,n.querySelector(".preview-canvas").id=`preview-canvas-${e.uuid}`,n.querySelector(".name").innerHTML=`${e.name}`,n.querySelector(".edit-icon").addEventListener("click",r=>renameCharacter$1(r,e.uuid)),n.querySelector(".copy-icon").addEventListener("click",r=>copyCharacter$1(r,e.uuid)),n.querySelector(".delete-icon").addEventListener("click",r=>deleteCharacter$1(r,e.uuid)),n.addEventListener("click",()=>editGlyphFile(e.uuid)),n},selected_glyphs=ref([]),multi_glyph_selection=ref(!1),addSelectedGlyph=e=>{if(onStrokeReplacement.value)setReplacementStroke(e.uuid),onStrokeReplacement.value=!1,glyphComponentsDialogVisible2.value=!1;else{const n=clone(e);n.parent_reference=getParentInfo(editStatus.value===Status.Edit?editCharacterFile.value:editGlyph.value),n.script=null,n.script_reference=n.uuid;const r={uuid:genUUID(),type:"glyph",name:e.name+Date.now().toString().slice(9),lock:!1,visible:!0,value:n,ox:selectedFile.value.width/2-1e3/2,oy:selectedFile.value.height/2-1e3/2,usedInCharacter:!0};executeScript(r.value),editStatus.value===Status.Edit?addComponentForCurrentCharacterFile(r):editStatus.value===Status.Glyph&&addComponentForCurrentGlyph(r),tool.value!=="glyphDragger"&&setTool("glyphDragger"),glyphComponentsDialogVisible2.value=!1}},selectGlyph=e=>{if(!glyphComponentsDialogVisible2.value)return;const n=getGlyphByUUID(e);multi_glyph_selection.value?selected_glyphs.value.push(n):addSelectedGlyph(n)},generateGlyphSelectionTemplate=e=>{const n=document.getElementById("glyph-template").querySelector(".glyph").cloneNode(!0);return n.className=`glyph glyph-${e.uuid}`,n.querySelector(".preview-canvas").id=`preview-canvas-${e.uuid}`,n.querySelector(".name").innerHTML=`${e.name}`,n.addEventListener("click",()=>selectGlyph(e.uuid)),n},deleteGlyphTemplate=(e,n)=>{let r=document.getElementById("glyph-render-list"),g=document.getElementById("glyph-components-wrapper");n===Status.StrokeGlyphList?(r=document.getElementById("stroke-glyph-render-list"),g=document.getElementById("stroke-glyph-components-wrapper")):n===Status.RadicalGlyphList?(r=document.getElementById("radical-glyph-render-list"),g=document.getElementById("radical-glyph-components-wrapper")):n===Status.CompGlyphList&&(r=document.getElementById("comp-glyph-render-list"),g=document.getElementById("comp-glyph-components-wrapper"));const y=r.querySelector(`.glyph-${e}`);r.removeChild(y);const k=g.querySelector(`.glyph-${e}`);g.removeChild(k)},addGlyphTemplate=(e,n)=>{const r=generateGlyphTemplate(e),g=generateGlyphSelectionTemplate(e);let y=document.getElementById("glyph-components-wrapper"),k=document.getElementById("glyph-render-list");n===Status.StrokeGlyphList?(k=document.getElementById("stroke-glyph-render-list"),y=document.getElementById("stroke-glyph-components-wrapper")):n===Status.RadicalGlyphList?(k=document.getElementById("radical-glyph-render-list"),y=document.getElementById("radical-glyph-components-wrapper")):n===Status.CompGlyphList&&(k=document.getElementById("comp-glyph-render-list"),y=document.getElementById("comp-glyph-components-wrapper"));const $=k.querySelector(".default-glyph");$&&k.insertBefore(r,$),y.appendChild(g)},clearGlyphRenderList=e=>{let n=document.getElementById("glyph-render-list");if(e===Status.StrokeGlyphList?n=document.getElementById("stroke-glyph-render-list"):e===Status.RadicalGlyphList?n=document.getElementById("radical-glyph-render-list"):e===Status.CompGlyphList&&(n=document.getElementById("comp-glyph-render-list")),!n)return;const r=document.getElementById("default-glyph-template").querySelector(".default-glyph").cloneNode(!0);r.addEventListener("click",()=>setAddGlyphDialogVisible(!0)),n.innerHTML="",n.appendChild(r)},clearSelectionGlyphRenderList=e=>{let n=document.getElementById("glyph-components-wrapper");if(e===Status.StrokeGlyphList?n=document.getElementById("stroke-glyph-components-wrapper"):e===Status.RadicalGlyphList?n=document.getElementById("radical-glyph-components-wrapper"):e===Status.CompGlyphList&&(n=document.getElementById("comp-glyph-components-wrapper")),!e){clearSelectionGlyphRenderList(Status.GlyphList),clearSelectionGlyphRenderList(Status.StrokeGlyphList),clearSelectionGlyphRenderList(Status.RadicalGlyphList),clearSelectionGlyphRenderList(Status.CompGlyphList);return}n.innerHTML=""},selectedItemByUUID=(e,n)=>{let r=null;for(let g=0;g<e.length;g++)e[g].uuid===n&&(r=e[g]);return r},files=reactive({value:[]}),selectedFileUUID=ref(""),clipBoard=reactive({value:[]}),editCharacterFileUUID=ref(""),enableMultiSelect=ref(!1),selectedComponent=computed(()=>!selectedComponents.value||selectedComponents.value.length===0?null:selectedComponents.value.length===1?selectedComponents.value[0]:"multi"),selectedComponentUUID=computed(()=>!selectedComponents.value||selectedComponents.value.length===0?"":selectedComponents.value.length===1?selectedComponents.value[0].uuid:"multi"),usedComponents=computed(()=>orderedListWithItemsForCurrentCharacterFile.value.filter(n=>!!n.usedInCharacter)),editCharacterFile=ref(null),setEditCharacterFileByUUID=e=>{let n=null;const r=selectedFile.value.characterList;for(let g=0;g<r.length;g++)if(editCharacterFileUUID.value===r[g].uuid){n=r[g];break}editCharacterFile.value=clone(n)},updateCharacterListFromEditFile=()=>{const e=selectedFile.value.characterList;for(let n=0;n<e.length;n++)if(editCharacterFileUUID.value===e[n].uuid){e[n]=clone(editCharacterFile.value);break}},selectedFile=computed(()=>selectedFileUUID.value?selectedItemByUUID(files.value,selectedFileUUID.value):null),characterList=computed(()=>selectedFileUUID.value?selectedItemByUUID(files.value,selectedFileUUID.value).characterList:null),selectedComponents=computed(()=>{if(!selectedFileUUID.value)return null;const e=editCharacterFile.value;return e?.selectedComponentsUUIDs.map(r=>traverseComponents(e.components,r))}),traverseComponents=(e,n)=>{for(let r=0;r<e.length;r++){const g=e[r];if(g.uuid===n)return g;if(g.value.components&&g.value.components.length){const y=traverseComponents(g.value.components,n);if(y)return y}}return null},SubComponents=computed(()=>{if(!selectedFileUUID.value)return null;const e=editCharacterFile.value;if(!e?.selectedComponentsTree||!e?.selectedComponentsTree.length)return null;let n=null;for(let g=0;g<e?.selectedComponentsTree.length-1;g++){const y=e?.selectedComponentsTree[g];n?n=selectedItemByUUID(n.value.components,y):n=selectedItemByUUID(e.components,y)}return n.value.components.map(g=>selectedItemByUUID(n.value.components,g.uuid))}),SubComponentsRoot=computed(()=>{if(!selectedFileUUID.value)return null;const e=editCharacterFile.value;if(!e?.selectedComponentsTree||!e?.selectedComponentsTree.length)return null;let n=null;for(let r=0;r<e?.selectedComponentsTree.length-1;r++){const g=e?.selectedComponentsTree[r];n?n=selectedItemByUUID(n.value.components,g):n=selectedItemByUUID(e.components,g)}return n}),selectedSubComponent=computed(()=>{let e=null;if(!selectedFileUUID.value)e=null;else{const n=editCharacterFile.value;if(!n?.selectedComponentsTree||!n?.selectedComponentsTree.length)e=null;else{let r=null;for(let y=0;y<n?.selectedComponentsTree.length-1;y++){const k=n?.selectedComponentsTree[y];r?r=selectedItemByUUID(r.value.components,k):r=selectedItemByUUID(n.components,k)}const g=n?.selectedComponentsTree[n?.selectedComponentsTree.length-1];g!=="null"&&(e=selectedItemByUUID(r.value.components,g))}}return e}),componentsForCurrentCharacterFile=computed(()=>selectedFileUUID.value?editCharacterFile.value.components:[]),orderedListWithItemsForCurrentCharacterFile=computed(()=>{if(!selectedFileUUID.value||!editCharacterFileUUID.value)return[];const e=editCharacterFile.value;return e.orderedList.map(n=>n.type==="group"?selectedItemByUUID(e.groups,n.uuid):selectedItemByUUID(e.components,n.uuid))}),orderedListWithItemsForCharacterFile=e=>e.orderedList.map(n=>n.type==="group"?selectedItemByUUID(e.groups,n.uuid):selectedItemByUUID(e.components,n.uuid)),orderedListForCurrentCharacterFile=computed(()=>selectedFileUUID.value?editCharacterFile.value.orderedList:[]),selectedComponentsUUIDs=computed(()=>selectedFileUUID.value?editCharacterFile.value.selectedComponentsUUIDs:""),setSelectedFileUUID=e=>{selectedFileUUID.value=e,e&&(gridSettings$1.value.centerSquareSize=selectedFile.value.width/3,gridSettings$1.value.size=selectedFile.value.width)},addFile=e=>{files.value.push(e)},removeFile=e=>{selectedFileUUID.value===e&&setSelectedFileUUID(""),editCharacterFileUUID.value="";const n=(()=>{for(let r=0;r<files.value.length;r++)if(files.value[r].uuid===e)return r;return-1})();n>=0&&files.value.splice(n,1)},updateFontSettings=e=>{const n=selectedFile.value,{name:r,unitsPerEm:g,ascender:y,descender:k}=e;if(r&&(n.name=r),g!==selectedFile.value.fontSettings.unitsPerEm||y!==selectedFile.value.fontSettings.ascender||k!==selectedFile.value.fontSettings.descender){n.fontSettings={unitsPerEm:g,ascender:y,descender:k},n.width=g,n.height=g,total$1.value=n.characterList.length,loaded$1.value=0,loading$1.value=!0;for(let $=0;$<n.characterList.length;$++){const V=n.characterList[$];V._o||executeCharacterScript(V),componentsToContours(orderedListWithItemsForCharacterFile(V),{unitsPerEm:g,descender:k,advanceWidth:g},{x:0,y:0},!1,!1,!0),loaded$1.value+=1}loading$1.value=!1}},modifyCharacterFile=(e,n)=>{const r=selectedItemByUUID(files.value,selectedFileUUID.value);let g=selectedItemByUUID(r.characterList,e);Object.keys(n).map(y=>{y==="view"?Object.keys(n.view).map(k=>{g.view[k]=n.view[k]}):g[y]=n[y]}),emitter.emit("renderPreviewCanvasByUUID",e)},removeOrderedItemForCurrentCharacterFile=e=>{const n=editCharacterFile.value,r=(()=>{for(let g=0;g<n.orderedList.length;g++)if(n.orderedList[g].uuid===e)return g;return-1})();r>=0&&n.orderedList.splice(r,1)},removeComponentForCurrentCharacterFile=e=>{const n=editCharacterFile.value,r=(()=>{for(let g=0;g<n.components.length;g++)if(n.components[g].uuid===e)return g;return-1})();removeOrderedItemForCurrentCharacterFile(e),n.glyph_script&&n.glyph_script[e]&&delete n.glyph_script[e],n.components.splice(r,1)},insertComponentForCurrentCharacterFile=(e,n)=>{editCharacterFile.value.components.push(e),insertOrderedItemForCurrentCharacterFile({type:"component",uuid:e.uuid},n)},setSelectionForCurrentCharacterFile=e=>{const n=editCharacterFile.value;if(e)if(enableMultiSelect.value){const r=n.selectedComponentsUUIDs.indexOf(e);r===-1?n.selectedComponentsUUIDs.push(e):n.selectedComponentsUUIDs.splice(r,1)}else n.selectedComponentsUUIDs=[e];else n.selectedComponentsUUIDs=[]},modifySubComponent=e=>{const n=editCharacterFile.value;if(!(!n?.selectedComponentsTree||!n?.selectedComponentsTree.length)){let r=null,g=null;const y=clone(n.components);for(let V=0;V<n?.selectedComponentsTree.length-1;V++){const L=n?.selectedComponentsTree[V];r?r=selectedItemByUUID(r.value.components,L):r=selectedItemByUUID(y,L)}const k=n?.selectedComponentsTree[n?.selectedComponentsTree.length-1];k!=="null"&&(g=selectedItemByUUID(r.value.components,k));const $=Object.keys(e);for(let V=0;V<$.length;V++){const L=$[V];g[L]=e[L]}n.components=y}},modifyComponentForCurrentCharacterFile=(e,n)=>{const r=editCharacterFile.value,g=clone(r.components);g.forEach(y=>{y.uuid===e&&Object.keys(n).map(k=>{switch(k){case"type":y.type=n.type;break;case"name":y.name=n.name;break;case"lock":y.lock=n.lock;break;case"visible":y.visible=n.visible;break;case"x":y.x=n.x;break;case"y":y.y=n.y;break;case"ox":y.ox=n.ox;break;case"oy":y.oy=n.oy;break;case"w":y.w=n.w;break;case"h":y.h=n.h;break;case"rotation":y.rotation=n.rotation;break;case"flipX":y.flipX=n.flipX;break;case"flipY":y.flipY=n.flipY;break;case"usedInCharacter":y.usedInCharacter=n.usedInCharacter;break;case"opacity":y.opacity=n.opacity;break;case"value":Object.keys(n.value).map($=>{if(y.value[$]=n.value[$],$==="points"){const{x:V,y:L,w:z,h:j}=getBound$5(n.value[$].reduce((ae,re)=>(ae.push({x:re.x,y:re.y}),ae),[]));y.x=V,y.y=L,y.w=z,y.h=j}});break}}),r.components=g}),emitter.emit("renderPreviewCanvasByUUIDOnEditing",editCharacterFileUUID.value)},addOrderedItemForCurrentCharacterFile=e=>{editCharacterFile.value.orderedList.push(e)},insertOrderedItemForCurrentCharacterFile=(e,n)=>{const r=editCharacterFile.value,g=(()=>{for(let y=0;y<r.orderedList.length;y++)if(r.orderedList[y].uuid===n.uuid)return y})();n.pos==="prev"&&r.orderedList.splice(g,0,e),n.pos==="next"&&r.orderedList.splice(g+1,0,e)},setOrderedListForCurrentCharacterFile=e=>{const n=editCharacterFile.value;n.orderedList=e},setClipBoard=e=>{clipBoard.value=e},setEditCharacterFileUUID=e=>{editCharacterFileUUID.value=e},addCharacterForCurrentFile=e=>{selectedFile.value.characterList.push(e)},removeCharacterForCurrentFile=e=>{const n=selectedFile.value.characterList;for(let r=0;r<n.length;r++)if(n[r].uuid===e){n.splice(r,1);return}},addComponentForCurrentCharacterFile=e=>{editCharacterFile.value.components.push(e),addOrderedItemForCurrentCharacterFile({type:"component",uuid:e.uuid}),setSelectionForCurrentCharacterFile(e.uuid)},addComponentsForCurrentCharacterFile=e=>{const n=editCharacterFile.value;e.forEach(r=>{n.components.push(r),addOrderedItemForCurrentCharacterFile({type:"component",uuid:r.uuid})})},executeCharacterScript=e=>{if(window.character=new Character(e),constantsMap.update(constants.value),window.constantsMap=constantsMap,new Function(`${e.script}
script_${e.uuid.replaceAll("-","_")} (character, constantsMap, FP)`)(),window.character._character&&window.character._character.glyph_script){const r=Object.keys(window.character._character.glyph_script);for(let g=0;g<r.length;g++){const y=window.character._character.glyph_script[r[g]];new Function(`${y}`)()}}window.character._character?.components?.map(r=>{if(r.value.system_script){const g=Object.keys(r.value.system_script);for(let y=0;y<g.length;y++){const k=r.value.system_script[g[y]];window.comp_glyph=new CustomGlyph(r.value),new Function(`${k}`)(),window.comp_glyph=null}}})},executeCharactersGlyphsScript=e=>{const n=e.components;for(let r=0;r<n.length;r++){const g=n[r];if(g.type==="glyph"){const y=g.value;executeScript(y)}}},getCharacterRatioLayout=(e,n)=>{let r=null;if((e.type==="text"||e.type==="icon")&&e.info&&e.info.layoutTree){const g=n.split("-"),y=g.splice(g.length-1,1)[0],k=g.join("-");findLeafNodes(e.info?.layoutTree).map(V=>{V.id===k&&(r=V.rect[y])})}return r},findLeafNodes=e=>{const n=[],r=g=>{!g.children||g.children.length===0?n.push(g):g.children.forEach(y=>r(y))};return e.forEach(g=>r(g)),n},editCharacter=async e=>{loading$1.value=!0,total$1.value=0,await nextTick(),setTimeout(()=>{setEditCharacterFileUUID(e),setEditCharacterFileByUUID(editCharacterFileUUID.value),setPrevStatus(editStatus.value),setEditStatus(Status.Edit)},500)},deleteCharacter=(e,n)=>{e.stopPropagation();const r=selectedFile.value.characterList.find(g=>g.uuid===n);if(r&&r.character.text===".notdef"){ElMessage({message:".notdef",type:"warning"});return}removeCharacterForCurrentFile(n),deleteCharacterTemplate(n)},renameCharacter=(e,n)=>{e.stopPropagation();const r=selectedFile.value.characterList.find(g=>g.uuid===n);if(r&&r.character.text===".notdef"){ElMessage({message:".notdef",type:"warning"});return}editedCharacterUUID.value=n,setEditCharacterDialogVisible(!0)},copyCharacter=(e,n)=>{e.stopPropagation(),copiedCharacterUUID.value=n,setCopyCharacterDialogVisible(!0)},generateCharacterTemplate=e=>{const n=document.getElementById("character-template").querySelector(".character").cloneNode(!0);return n.className=`character character-${e.uuid}`,n.querySelector(".preview-canvas").id=`preview-canvas-${e.uuid}`,n.querySelector(".text").innerHTML=`${e.character.text}`,e.type==="text"&&(n.querySelector(".unicode").innerHTML=`0x${e.character.unicode.toString(16)}`),n.querySelector(".edit-icon").addEventListener("click",r=>renameCharacter(r,e.uuid)),n.querySelector(".copy-icon").addEventListener("click",r=>copyCharacter(r,e.uuid)),n.querySelector(".delete-icon").addEventListener("click",r=>deleteCharacter(r,e.uuid)),n.addEventListener("click",()=>editCharacter(e.uuid)),n},deleteCharacterTemplate=e=>{const n=document.getElementById("character-render-list"),r=n.querySelector(`.character-${e}`);n.removeChild(r)},addCharacterTemplate=e=>{const n=document.getElementById("character-render-list"),r=n.querySelector(".default-character");r&&n.insertBefore(e,r)},batchAddCharacterTemplates=e=>{const n=document.getElementById("character-render-list"),r=n.querySelector(".default-character");if(!r)return;const g=document.createDocumentFragment();e.forEach(y=>{g.appendChild(y)}),n.insertBefore(g,r)},clearCharacterRenderList=()=>{const e=document.getElementById("character-render-list"),n=document.getElementById("default-character-template").querySelector(".default-character").cloneNode(!0);n.addEventListener("click",()=>setAddTextDialogVisible(!0)),e.innerHTML="",e.appendChild(n)},visibleStartIndex=ref(0),visibleEndIndex=ref(500),visibleCount=ref(500),itemHeight=122,initEllipse=(e,n=!1)=>{let r=!1,g=!1,y=-1,k=-1,$=!1;const V=oe=>{saveState("",[StoreType.Ellipse,n?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo),setEditing$3(!0),r=!0,y=getCoord(oe.offsetX),k=getCoord(oe.offsetY),getCoord(oe.offsetX),getCoord(oe.offsetY)},L=oe=>{if(!r)return;const ue=getCoord(oe.offsetX),le=getCoord(oe.offsetY);if(g=!0,r)if(!$)setRadiusX(Math.abs(ue-y)/2),setRadiusY(Math.abs(le-k)/2),ue>=y&&le>=k?(setEllipseX(y),setEllipseY(k)):ue<=y&&le<=k?(setEllipseX(ue),setEllipseY(le)):ue>=y&&le<=k?(setEllipseX(y),setEllipseY(le)):(setEllipseX(ue),setEllipseY(k));else{const de=Math.max(Math.abs(ue-y),Math.abs(le-k))/2,he=Math.abs(ue-y)>Math.abs(le-k);setRadiusX(de),setRadiusY(de),ue>=y&&le>=k?(setEllipseX(y),setEllipseY(k)):ue<=y&&le<=k?(setEllipseX(y-2*de),setEllipseY(k-2*de)):ue>=y&&le<=k?he?(setEllipseX(y),setEllipseY(k-2*de)):(setEllipseX(y),setEllipseY(le)):he?(setEllipseX(ue),setEllipseY(k)):(setEllipseX(y-2*de),setEllipseY(k))}},z=oe=>{if(setEditing$3(!1),g){const ue=genEllipseComponent(ellipseX.value,ellipseY.value,radiusX.value,radiusY.value);r=!1,g=!1,y=-1,k=-1,$=!1,setEllipseX(-1),setEllipseY(-1),setRadiusX(0),setRadiusY(0),saveState("",[StoreType.Ellipse,n?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo,{newRecord:!1}),n?addComponentForCurrentGlyph(ue):addComponentForCurrentCharacterFile(ue)}else r=!1,g=!1,y=-1,k=-1,$=!1,setEllipseX(-1),setEllipseY(-1),setRadiusX(0),setRadiusY(0)},j=oe=>{oe.key==="Shift"&&($=!0)},ae=oe=>{oe.key==="Shift"&&($=!1)};return e.addEventListener("mousedown",V),window.addEventListener("mouseup",z),e.addEventListener("mousemove",L),window.addEventListener("keydown",j),window.addEventListener("keyup",ae),()=>{e.removeEventListener("mousedown",V),e.removeEventListener("mousemove",L),window.removeEventListener("mouseup",z),window.removeEventListener("keydown",j),window.removeEventListener("keyup",ae),setEditing$3(!1)}},renderEllipseEditor=(e,n=5)=>{const r=e.getContext("2d"),{x:g,y,w:k,h:$}=getBound$4(ellipseX.value,ellipseY.value,radiusX.value,radiusY.value),V=mapCanvasX(g),L=mapCanvasY(y),z=mapCanvasWidth(k),j=mapCanvasHeight($),ae=mapCanvasWidth(radiusX.value),re=mapCanvasWidth(radiusY.value);r.strokeStyle="#000",r.beginPath(),r.ellipse(V+ae,L+re,ae,re,0,0,2*Math.PI),r.closePath(),r.stroke(),r.strokeStyle="#79bbff",r.strokeRect(V,L,z,j),r.strokeRect(V-n,L-n,n*2,n*2),r.strokeRect(V+z-n,L-n,n*2,n*2),r.strokeRect(V-n,L+j-n,n*2,n*2),r.strokeRect(V+z-n,L+j-n,n*2,n*2)},getBound$4=(e,n,r,g)=>({x:e,y:n,w:2*r,h:2*g}),genEllipseComponent=(e,n,r,g)=>{let y=getEllipsePoints(r,g,1e3,e+r,n+g);const{x:k,y:$,w:V,h:L}=getBound$4(e,n,r,g),z=0,j=!1,ae=!1;let re={unitsPerEm:1e3,descender:-200,advanceWidth:1e3};editStatus.value===Status.Edit&&(re.unitsPerEm=selectedFile.value.fontSettings.unitsPerEm,re.descender=selectedFile.value.fontSettings.descender,re.advanceWidth=selectedFile.value.fontSettings.unitsPerEm);let oe=transformPoints(y,{x:k,y:$,w:V,h:L,rotation:z,flipX:j,flipY:ae});const ue=formatPoints(oe,re,1),le=genEllipseContour(ue),de=100/re.unitsPerEm,he=oe.map(Ce=>Object.assign({},Ce,{x:Ce.x*de,y:Ce.y*de})),_e=genEllipseContour(he);return{uuid:genUUID(),type:"ellipse",name:"ellipse",lock:!1,visible:!0,value:{radiusX:r,radiusY:g,fillColor:"",strokeColor:"#000",preview:_e,contour:le},x:e,y:n,w:2*r,h:2*g,rotation:0,flipX:!1,flipY:!1,usedInCharacter:!0}},initRectangle=(e,n=!1)=>{let r=!1,g=!1,y=-1,k=-1,$=!1;const V=oe=>{saveState("",[StoreType.Rectangle,n?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo),setEditing$4(!0),r=!0,y=getCoord(oe.offsetX),k=getCoord(oe.offsetY),getCoord(oe.offsetX),getCoord(oe.offsetY)},L=oe=>{if(!r)return;const ue=getCoord(oe.offsetX),le=getCoord(oe.offsetY);if(g=!0,r)if(!$)setRectWidth(Math.abs(ue-y)),setRectHeight(Math.abs(le-k)),ue>=y&&le>=k?(setRectX(y),setRectY(k)):ue<=y&&le<=k?(setRectX(ue),setRectY(le)):ue>=y&&le<=k?(setRectX(y),setRectY(le)):(setRectX(ue),setRectY(k));else{const de=Math.max(Math.abs(ue-y),Math.abs(le-k)),he=Math.abs(ue-y)>Math.abs(le-k);setRectWidth(de),setRectHeight(de),ue>=y&&le>=k?(setRectX(y),setRectY(k)):ue<=y&&le<=k?(setRectX(y-de),setRectY(k-de)):ue>=y&&le<=k?he?(setRectX(y),setRectY(k-de)):(setRectX(y),setRectY(le)):he?(setRectX(ue),setRectY(k)):(setRectX(y-de),setRectY(k))}},z=oe=>{if(setEditing$4(!1),g){const ue=genRectComponent(rectX.value,rectY.value,rectWidth.value,rectHeight.value);r=!1,g=!1,$=!1,y=-1,k=-1,setRectX(-1),setRectY(-1),setRectWidth(0),setRectWidth(0),saveState("",[StoreType.Rectangle,n?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo,{newRecord:!1}),n?addComponentForCurrentGlyph(ue):addComponentForCurrentCharacterFile(ue)}else r=!1,g=!1,$=!1,y=-1,k=-1,setRectX(-1),setRectY(-1),setRectWidth(0),setRectWidth(0)},j=oe=>{oe.key==="Shift"&&($=!0)},ae=oe=>{oe.key==="Shift"&&($=!1)};return e.addEventListener("mousedown",V),window.addEventListener("mouseup",z),e.addEventListener("mousemove",L),window.addEventListener("keydown",j),window.addEventListener("keyup",ae),()=>{e.removeEventListener("mousedown",V),window.removeEventListener("mouseup",z),e.removeEventListener("mousemove",L),window.removeEventListener("keydown",j),window.removeEventListener("keyup",ae),setEditing$4(!1)}},renderRectangleEditor=(e,n=5)=>{const r=e.getContext("2d"),{x:g,y,w:k,h:$}=getBound$3(rectX.value,rectY.value,rectWidth.value,rectHeight.value),V=mapCanvasX(g),L=mapCanvasY(y),z=mapCanvasWidth(k),j=mapCanvasHeight($);r.strokeStyle="#000",r.strokeRect(V,L,z,j),r.strokeStyle="#79bbff",r.strokeRect(V,L,z,j),r.strokeRect(V-n,L-n,n*2,n*2),r.strokeRect(V+z-n,L-n,n*2,n*2),r.strokeRect(V-n,L+j-n,n*2,n*2),r.strokeRect(V+z-n,L+j-n,n*2,n*2)},getBound$3=(e,n,r,g)=>({x:e,y:n,w:r,h:g}),genRectComponent=(e,n,r,g)=>{const y=getRectanglePoints(r,g,e,n),{x:k,y:$,w:V,h:L}=getBound$3(e,n,r,g),z=0,j=!1,ae=!1;let re={unitsPerEm:1e3,descender:-200,advanceWidth:1e3};editStatus.value===Status.Edit&&(re.unitsPerEm=selectedFile.value.fontSettings.unitsPerEm,re.descender=selectedFile.value.fontSettings.descender,re.advanceWidth=selectedFile.value.fontSettings.unitsPerEm);let oe=transformPoints(y,{x:k,y:$,w:V,h:L,rotation:z,flipX:j,flipY:ae});const ue=formatPoints(oe,re,1),le=genRectangleContour(ue),de=100/re.unitsPerEm,he=oe.map(Ce=>Object.assign({},Ce,{x:Ce.x*de,y:Ce.y*de})),_e=genRectangleContour(he);return{uuid:genUUID(),type:"rectangle",name:"rectangle",lock:!1,visible:!0,value:{width:r,height:g,fillColor:"",strokeColor:"#000",preview:_e,contour:le},x:e,y:n,w:r,h:g,rotation:0,flipX:!1,flipY:!1,usedInCharacter:!0}},initPolygon=(e,n=!1)=>{mousedown.value=!1,mousemove.value=!1;const r=5;let g=!1;const y=j=>{if(points.value.length||saveState("",[StoreType.Polygon,n?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo),setEditing$5(!0),mousedown.value=!0,!points.value.length){const ae={uuid:genUUID(),x:getCoord(j.offsetX),y:getCoord(j.offsetY)},re=clone(points.value);re.push(ae),setPoints(re)}},k=j=>{if(!points.value.length||!editing$7)return;const ae=clone(points.value);if(!mousedown.value)if(mousemove.value){const re=ae[ae.length-1];re.x=getCoord(j.offsetX),re.y=getCoord(j.offsetY),g=!1,isNearPoint(getCoord(j.offsetX),getCoord(j.offsetY),points.value[0].x,points.value[0].y,r)&&(re.x=points.value[0].x,re.y=points.value[0].y,g=!0),setPoints(ae),mousemove.value=!0}else{saveState("",[StoreType.Polygon,n?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo);const re={uuid:genUUID(),x:getCoord(j.offsetX),y:getCoord(j.offsetY)};ae.push(re),setPoints(ae),mousemove.value=!0}},$=j=>{!points.value.length||!editing$7||(mousedown.value=!1,mousemove.value=!1,g&&(setEditing$5(!1),n?addComponentForCurrentGlyph(genPolygonComponent(clone(points.value),!0)):addComponentForCurrentCharacterFile(genPolygonComponent(clone(points.value),!0)),setPoints([]),g=!1))},V=j=>{const ae=clone(points.value);if(points.value.length>=0){const re={uuid:genUUID(),x:points[0].x,y:points[0].y};ae.push(re),setPoints(ae)}setEditing$5(!1),n?addComponentForCurrentGlyph(genPolygonComponent(clone(points.value),!0)):addComponentForCurrentCharacterFile(genPolygonComponent(clone(points.value),!0)),setPoints([]),g=!1},L=j=>{j.code==="Enter"&&V()};return e.addEventListener("mousedown",y),window.addEventListener("mousemove",k),window.addEventListener("mouseup",$),window.addEventListener("keydown",L),()=>{e.removeEventListener("mousedown",y),window.removeEventListener("mouseup",$),window.removeEventListener("keydown",L),window.removeEventListener("mousemove",k),setEditing$5(!1),setPoints([]),g=!1}},renderPolygonEditor=(e,n)=>{const r=n.getContext("2d"),g=e.value.map(k=>mapCanvasCoords({x:k.x,y:k.y}));if(!g.length)return;const y=10;r.strokeStyle="#000",r.fillStyle="#000",r.beginPath(),r.moveTo(g[0].x,g[0].y);for(let k=1;k<g.length;k++)r.lineTo(g[k].x,g[k].y);r.stroke(),r.closePath();for(let k=0;k<g.length;k++)r.fillRect(g[k].x-y/2,g[k].y-y/2,y,y)},genPolygonComponent=(e,n)=>{const{x:r,y:g,w:y,h:k}=getBound$5(e.reduce((de,he)=>(de.push({x:he.x,y:he.y}),de),[])),$=0,V=!1,L=!1;let z={unitsPerEm:1e3,descender:-200,advanceWidth:1e3};editStatus.value===Status.Edit&&(z.unitsPerEm=selectedFile.value.fontSettings.unitsPerEm,z.descender=selectedFile.value.fontSettings.descender,z.advanceWidth=selectedFile.value.fontSettings.unitsPerEm);let j=transformPoints(e,{x:r,y:g,w:y,h:k,rotation:$,flipX:V,flipY:L});const ae=formatPoints(j,z,1),re=genPolygonContour(ae),oe=100/z.unitsPerEm,ue=j.map(de=>Object.assign({},de,{x:de.x*oe,y:de.y*oe})),le=genPolygonContour(ue);return{uuid:genUUID(),type:"polygon",name:"polygon",lock:!1,visible:!0,value:{points:e,fillColor:"",strokeColor:"#000",closePath:n,preview:le,contour:re},x:r,y:g,w:y,h:k,rotation:0,flipX:!1,flipY:!1,usedInCharacter:!0}},parseSvgPath=e=>{var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function g($){var V=[];return $.replace(r,(L,z,j)=>{var ae=z.toLowerCase();for(j=k(j),ae=="m"&&j.length>2&&(V.push([z].concat(j.splice(0,2))),ae="l",z=z=="m"?"l":"L");;){if(j.length==n[ae])return j.unshift(z),V.push(j);if(j.length<n[ae])throw new Error("malformed path data");V.push([z].concat(j.splice(0,n[ae])))}}),V}var y=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function k($){var V=$.match(y);return V?V.map(Number):[]}return g(e)},parseStrToSvg=e=>new DOMParser().parseFromString(e,"image/svg+xml"),parseSvgToComponents=e=>{const n=e.childNodes.length;let r=[];for(let g=0;g<n;g++){const y=e.childNodes[g],k=y.tagName;if(k==="path"){const $=parseSvgPath(y.getAttribute("d")),V=parsePathCommandsToComponents($);r=r.concat(V)}if(k==="g"&&r.push(...parseSvgToComponents(y)),k==="ellipse"){const $=Number(y.getAttribute("cx")),V=Number(y.getAttribute("cy")),L=Number(y.getAttribute("rx")),z=Number(y.getAttribute("ry")),j=genEllipseComponent($,V,L,z);j.value.fillColor=y.getAttribute("fill")||"#000",j.value.strokeColor=y.getAttribute("stroke")||"#000",r.push(j)}if(k==="rect"){const $=Number(y.getAttribute("x"))|0,V=Number(y.getAttribute("y"))|0,L=Number(y.getAttribute("width")),z=Number(y.getAttribute("height")),j=genRectComponent($,V,L,z);j.value.fillColor=y.getAttribute("fill")||"#000",j.value.strokeColor=y.getAttribute("stroke")||"#000",r.push(j)}if(k==="line"){const $=Number(y.getAttribute("x1")),V=Number(y.getAttribute("y1")),L=Number(y.getAttribute("x2")),z=Number(y.getAttribute("y2")),j=[{x:$,y:V,uuid:genUUID()},{x:L,y:z,uuid:genUUID()}],ae=genPolygonComponent(j,!1);ae.value.strokeColor=y.getAttribute("stroke")||"#000",r.push(ae)}if(k==="polygon"){const $=y.getAttribute("points").split(" ").map(L=>{const z=L.split(",");return{uuid:genUUID(),x:Number(z[0]),y:Number(z[1])}});$.push(clone($[0]));const V=genPolygonComponent($,!0);V.value.fillColor=y.getAttribute("fill")||"#000",V.value.strokeColor=y.getAttribute("stroke")||"#000",r.push(V)}if(k==="polyline"){const $=y.getAttribute("points").split(" ").map(z=>{const j=z.split(",");return{uuid:genUUID(),x:Number(j[0]),y:Number(j[1])}}),V=y.getAttribute("fill")!=="none";V&&$.push({uuid:genUUID(),x:$[0].x,y:$[0].y});const L=genPolygonComponent($,V);L.value.strokeColor=y.getAttribute("stroke")||"#000",L.value.fillColor=y.getAttribute("fill")||"#000",r.push(L)}if(k==="circle"){const $=Number(y.getAttribute("cx")),V=Number(y.getAttribute("cy")),L=Number(y.getAttribute("r")),j=genEllipseComponent($,V,L,L);j.value.fillColor=y.getAttribute("fill")||"#000",j.value.strokeColor=y.getAttribute("stroke")||"#000",r.push(j)}}return r},parsePathCommandsToComponents=e=>{const n=[[]],r=[];if(!e.length||e[0][0]!=="M")return null;const g={x:e[0][1],y:e[0][2]},y={x:e[0][1],y:e[0][2]};n[0].push({uuid:genUUID(),x:g.x,y:g.y,type:"anchor",origin:null,isShow:!0});let k=!1,$=e.length,V=0;for(let L=1;L<$;L++){const z=e[L],j=z[0];if(j==="M"||j==="m"){if(k){y.x=n[V][0].x,y.y=n[V][0].y;const ae={uuid:genUUID(),x:g.x,y:g.y,type:"control",origin:n[V][n[V].length-1].uuid,isShow:!0},re={uuid:genUUID(),x:y.x,y:y.y,type:"anchor",origin:null,isShow:!0},oe={uuid:genUUID(),x:y.x,y:y.y,type:"control",origin:re.uuid,isShow:!0};n[V].push(ae,oe,re)}r.push(genPenComponent(n[V],k)),k=!1,y.x=j==="m"?g.x+z[1]:z[1],y.y=j==="m"?g.y+z[2]:z[2],V+=1,n[V]=[{uuid:genUUID(),x:y.x,y:y.y,type:"anchor",origin:null,isShow:!0}]}else if(j==="Z"||j==="z")k=!0;else if(j==="L"||j==="l"){y.x=j==="l"?g.x+z[1]:z[1],y.y=j==="l"?g.y+z[2]:z[2];const ae={uuid:genUUID(),x:g.x,y:g.y,type:"control",origin:n[V][n[V].length-1].uuid,isShow:!0},re={uuid:genUUID(),x:y.x,y:y.y,type:"anchor",origin:null,isShow:!0},oe={uuid:genUUID(),x:y.x,y:y.y,type:"control",origin:re.uuid,isShow:!0};n[V].push(ae,oe,re)}if(j==="H"||j==="h"){y.x=j==="h"?g.x+z[1]:z[1],y.y=j===g.y;const ae={uuid:genUUID(),x:g.x,y:g.y,type:"control",origin:n[V][n[V].length-1].uuid,isShow:!0},re={uuid:genUUID(),x:y.x,y:y.y,type:"anchor",origin:null,isShow:!0},oe={uuid:genUUID(),x:y.x,y:y.y,type:"control",origin:re.uuid,isShow:!0};n[V].push(ae,oe,re)}if(j==="V"||j==="v"){y.x=j===g.x,y.y=j==="v"?g.y+z[1]:z[1];const ae={uuid:genUUID(),x:g.x,y:g.y,type:"control",origin:n[V][n[V].length-1].uuid,isShow:!0},re={uuid:genUUID(),x:y.x,y:y.y,type:"anchor",origin:null,isShow:!0},oe={uuid:genUUID(),x:y.x,y:y.y,type:"control",origin:re.uuid,isShow:!0};n[V].push(ae,oe,re)}if(j==="C"||j==="c"){y.x=j==="c"?g.x+z[5]:z[5],y.y=j==="c"?g.y+z[6]:z[6];const ae={uuid:genUUID(),x:j==="c"?g.x+z[1]:z[1],y:j==="c"?g.y+z[2]:z[2],type:"control",origin:n[V][n[V].length-1].uuid,isShow:!0},re={uuid:genUUID(),x:y.x,y:y.y,type:"anchor",origin:null,isShow:!0},oe={uuid:genUUID(),x:j==="c"?g.x+z[3]:z[3],y:j==="c"?g.y+z[4]:z[4],type:"control",origin:re.uuid,isShow:!0};n[V].push(ae,oe,re)}if(j==="S"||j==="s"){y.x=j==="s"?g.x+z[3]:z[3],y.y=j==="s"?g.y+z[4]:z[4];const ae=e[L-1][0],re={x:g.x,y:g.y};if(ae.match(/[CcSsQqTt]/g)){const de=n[V][n[V].length-2];re.x=g.x+g.x-de.x,re.y=g.y+g.y-de.y}const oe={uuid:genUUID(),x:re.x,y:re.y,type:"control",origin:n[V][n[V].length-1].uuid,isShow:!0},ue={uuid:genUUID(),x:y.x,y:y.y,type:"anchor",origin:null,isShow:!0},le={uuid:genUUID(),x:j==="s"?g.x+z[1]:z[1],y:j==="s"?g.y+z[2]:z[2],type:"control",origin:ue.uuid,isShow:!0};n[V].push(oe,le,ue)}if(j==="Q"||j==="q"){y.x=j==="q"?g.x+z[3]:z[3],y.y=j==="q"?g.y+z[4]:z[4];const ae={uuid:genUUID(),x:j==="q"?g.x+z[1]:z[1],y:j==="q"?g.y+z[2]:z[2],type:"control",origin:n[V][n[V].length-1].uuid,isShow:!0},re={uuid:genUUID(),x:y.x,y:y.y,type:"anchor",origin:null,isShow:!0},oe={uuid:genUUID(),x:j==="q"?g.x+z[1]:z[1],y:j==="q"?g.y+z[2]:z[2],type:"control",origin:re.uuid,isShow:!0};n[V].push(ae,oe,re)}if(j==="T"||j==="t"){y.x=j==="t"?g.x+z[1]:z[1],y.y=j==="t"?g.y+z[2]:z[2];const ae=e[L-1][0],re={x:g.x,y:g.y};if(ae.match(/[CcSsQqTt]/g)){const de=n[V][n[V].length-2];re.x=g.x+g.x-de.x,re.y=g.y+g.y-de.y}const oe={uuid:genUUID(),x:re.x,y:re.y,type:"control",origin:n[V][n[V].length-1].uuid,isShow:!0},ue={uuid:genUUID(),x:y.x,y:y.y,type:"anchor",origin:null,isShow:!0},le={uuid:genUUID(),x:re.x,y:re.y,type:"control",origin:ue.uuid,isShow:!0};n[V].push(oe,le,ue)}if(j==="A"||j==="a"){const ae=z[1],re=z[2],oe=z[3]*Math.PI/180,ue=z[4],le=z[5];y.x=j==="a"?g.x+z[6]:z[6],y.y=j==="a"?g.y+z[7]:z[7],convertEllipsePathToBeziers(ae,re,oe,ue,le,g.x,g.y,y.x,y.y).forEach(he=>{const _e={uuid:genUUID(),x:he.cpx1,y:he.cpy1,type:"control",origin:n[V][n[V].length-1].uuid,isShow:!0},Ce={uuid:genUUID(),x:he.en2.x,y:he.en2.y,type:"anchor",origin:null,isShow:!0},Ne={uuid:genUUID(),x:he.cpx2,y:he.cpy2,type:"control",origin:Ce.uuid,isShow:!0};n[V].push(_e,Ne,Ce)})}g.x=y.x,g.y=y.y}if(k){y.x=n[V][0].x,y.y=n[V][0].y;const L={uuid:genUUID(),x:g.x,y:g.y,type:"control",origin:n[V][n[V].length-1].uuid,isShow:!0},z={uuid:genUUID(),x:y.x,y:y.y,type:"anchor",origin:null,isShow:!0},j={uuid:genUUID(),x:y.x,y:y.y,type:"control",origin:z.uuid,isShow:!0};n[V].push(L,j,z)}return r.push(genPenComponent(n[V],k)),r},componentsToSvg=(e,n,r,g="default",y={isSub:!1,ox:0,oy:0})=>{const{isSub:k,ox:$,oy:V}=y;let L=k?"":`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${n} ${r}">`,z=g==="contour"?"":"#000000";for(let j=0;j<e.length;j++){const ae=e[j],{x:re,y:oe,w:ue,h:le,rotation:de}=ae;if(ae.type==="pen"){const{points:he,strokeColor:_e,closePath:Ce}=ae.value;g==="default"&&(z=ae.value.fillColor||"#000");const{x:Ne,y:$e,w:xe,h:Ie}=getBound$5(he),ze=re-Ne,qe=oe-$e,Et=ue/xe,_n=le/Ie,Dt=re+ue/2,Sn=oe+le/2;if(!he.length)continue;L+=`<path fill="${z}" stroke="${_e}" d="M ${he[0].x},${he[0].y} `;for(let hn=1;hn<he.length;hn+=3)L+=`C ${he[hn].x},${he[hn].y},${he[hn+1].x},${he[hn+1].y},${he[hn+2].x},${he[hn+2].y} `;Ce&&(L+="z"),L+='" ',L+=`transform="translate(${ze}, ${qe}) `,L+=`scale(${Et}, ${_n}) `,L+=`rotate(${de}, ${Dt}, ${Sn})"`,L+=" />"}else if(ae.type==="polygon"){const{points:he,strokeColor:_e,closePath:Ce}=ae.value;g==="default"&&(z=ae.value.fillColor||"#000");const{x:Ne,y:$e,w:xe,h:Ie}=getBound$5(he),ze=re-Ne,qe=oe-$e,Et=ue/xe,_n=le/Ie,Dt=re+ue/2,Sn=oe+le/2;if(!he.length)continue;L+=`<path fill="${z}" stroke="${_e}" d="M ${he[0].x},${he[0].y} `;for(let hn=1;hn<he.length;hn++)L+=`L ${he[hn].x},${he[hn].y} `;Ce&&(L+="z"),L+='" ',L+=`transform="translate(${ze}, ${qe}) `,L+=`scale(${Et}, ${_n}) `,L+=`rotate(${de}, ${Dt}, ${Sn})"`,L+=" />"}else if(ae.type==="ellipse"){const{radiusX:he,radiusY:_e,strokeColor:Ce}=ae.value;g==="default"&&(z=ae.value.fillColor||"#000");const Ne=he,$e=_e,xe=ue/(he*2),Ie=le/(_e*2),ze=re+ue/2,qe=oe+le/2;L+=`<ellipse fill="${z}" stroke="${Ce}" `,L+=`cx="${re}" cy="${oe}" rx="${he}" ry="${_e}" `,L+=`transform="translate(${Ne}, ${$e}) `,L+=`scale(${xe}, ${Ie}) `,L+=`rotate(${de}, ${ze}, ${qe})"`,L+=" />"}else if(ae.type==="rectangle"){const{width:he,height:_e,strokeColor:Ce}=ae.value;g==="default"&&(z=ae.value.fillColor||"#000");const Ne=ue/he,$e=le/_e,xe=re+ue/2,Ie=oe+le/2;L+=`<rect fill="${z}" stroke="${Ce}" `,L+=`x="${re}" y="${oe}" width="${he}" height="${_e}" `,L+='transform="translate(0, 0) ',L+=`scale(${Ne}, ${$e}) `,L+=`rotate(${de}, ${xe}, ${Ie})"`,L+=" />"}else if(ae.type==="glyph-pen"){const{points:he}=ae,_e="#000";if(g==="default"&&(z="#000"),!he.length)continue;L+=`<path fill="${z}" stroke="${_e}" d="M ${he[0].x+$},${he[0].y+V} `;for(let Ce=1;Ce<he.length;Ce+=3)L+=`C ${he[Ce].x+$},${he[Ce].y+V},${he[Ce+1].x+$},${he[Ce+1].y+V},${he[Ce+2].x+$},${he[Ce+2].y+V} `;L+="z",L+='"',L+=" />"}else if(ae.type==="glyph-polygon"){const{points:he}=ae,_e="#000";if(g==="default"&&(z="#000"),!he.length)continue;L+=`<path fill="${z}" stroke="${_e}" d="M ${he[0].x+$},${he[0].y+V} `;for(let Ce=1;Ce<he.length;Ce++)L+=`L ${he[Ce].x+$},${he[Ce].y+V} `;L+="z",L+='"',L+=" />"}else if(ae.type==="glyph-ellipse"){const{centerX:he,centerY:_e,radiusX:Ce,radiusY:Ne}=ae,$e="#000";g==="default"&&(z="#000"),L+=`<ellipse fill="${z}" stroke="${$e}" `,L+=`cx="${he+$}" cy="${_e+V}" rx="${Ce}" ry="${Ne}"`,L+=" />"}else if(ae.type==="glyph-rectangle"){const{x:he,y:_e,width:Ce,height:Ne}=ae,$e="#000";g==="default"&&(z="#000"),L+=`<rect fill="${z}" stroke="${$e}" `,L+=`x="${he+$}" y="${_e+V}" width="${Ce}" height="${Ne}" `,L+="/>"}else if(ae.type==="glyph"){const he=ae.value;he._o||executeScript(he);const _e=componentsToSvg(he._o.components,n,r,g,{isSub:!0,ox:$+ae.ox,oy:V+ae.oy});L+=_e}}return!k&&(L+="</svg>"),L},convertEllipsePathToBeziers=(e,n,r,g,y,k,$,V,L)=>{const z=(re,oe,ue)=>Math.min(Math.max(re,oe),ue),j=(re,oe,ue,le)=>{var de=re*ue+oe*le,he=Math.sqrt(re*re+oe*oe)*Math.sqrt(ue*ue+le*le),_e=Math.acos(z(de/he,-1,1));return re*le-oe*ue<0&&(_e=-_e),_e};return((re,oe,ue,le,de,he,_e,Ce,Ne)=>{var $e=Math.abs(re),xe=Math.abs(oe),Ie=(he-Ce)/2,ze=(_e-Ne)/2,qe=Math.cos(ue)*Ie+Math.sin(ue)*ze,Et=-Math.sin(ue)*Ie+Math.cos(ue)*ze,_n=$e*$e,Dt=xe*xe,Sn=qe*qe,hn=Et*Et,Vn=Sn/_n+hn/Dt;if(Vn>1){var Mn=Math.sqrt(Vn);$e=Mn*$e,xe=Mn*xe,_n=$e*$e,Dt=xe*xe}var $n=_n*hn+Dt*Sn,Nn=(_n*Dt-$n)/$n,kn=Math.sqrt(Math.max(0,Nn));le===de&&(kn=-kn);for(var jn=kn*$e*Et/xe,Fn=-kn*xe*qe/$e,Tn=Math.cos(ue)*jn-Math.sin(ue)*Fn+(he+Ce)/2,Hn=Math.sin(ue)*jn+Math.cos(ue)*Fn+(_e+Ne)/2,la=j(1,0,(qe-jn)/$e,(Et-Fn)/xe),ca=j((qe-jn)/$e,(Et-Fn)/xe,(-qe-jn)/$e,(-Et-Fn)/xe);ca>Math.PI*2;)ca-=Math.PI*2;for(;ca<0;)ca+=Math.PI*2;de||(ca-=2*Math.PI);var Zn=la,Bn=la+ca;const Wn=Kn=>{var En=Tn+re*Math.cos(ue)*Math.cos(Kn)-oe*Math.sin(ue)*Math.sin(Kn),kt=Hn+re*Math.sin(ue)*Math.cos(Kn)+oe*Math.cos(ue)*Math.sin(Kn);return{x:En,y:kt}},da=Kn=>{var En=-1*re*Math.cos(ue)*Math.sin(Kn)-oe*Math.sin(ue)*Math.cos(Kn),kt=-1*re*Math.sin(ue)*Math.sin(Kn)+oe*Math.cos(ue)*Math.cos(Kn);return{x:En,y:kt}};var ga=[];ga.push(Zn);for(var Ca=Math.PI/4;ga[ga.length-1]+Ca<Bn;)ga.push(ga[ga.length-1]+Ca);if(Bn>Zn)for(;ga[ga.length-1]+Ca<Bn;)ga.push(ga[ga.length-1]+Ca);else for(;ga[ga.length-1]-Ca>Bn;)ga.push(ga[ga.length-1]-Ca);ga.push(Bn);const ra=(Kn,En)=>{var kt=Wn(Kn),At=Wn(En),Dn=da(Kn),Xn=da(En),aa=Math.sin(En-Kn)*(Math.sqrt(4+3*Math.pow(Math.tan((En-Kn)/2),2))-1)/3;return{cpx1:kt.x+aa*Dn.x,cpy1:kt.y+aa*Dn.y,cpx2:At.x-aa*Xn.x,cpy2:At.y-aa*Xn.y,en1:kt,en2:At}};for(var Gn=[],vn=0;vn<ga.length-1;vn++)Gn.push(ra(ga[vn],ga[vn+1]));return Gn})(e,n,r,g,y,k,$,V,L)},toPixels=e=>{const n=document.createElement("canvas"),r=n.getContext("2d");return n.width=e.width,n.height=e.height,r?.drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height),r?.getImageData(0,0,n.width,n.height).data},reversePixels=(e,n,r)=>{const g=document.createElement("canvas"),y=g.getContext("2d");g.width=n,g.height=r;for(let $=0;$<n;$++)for(let V=0;V<r;V++){const L=(V*n+$)*4;y.fillStyle=`rgba(${255-e[L]}, ${255-e[L+1]}, ${255-e[L+2]}, ${255-e[L+3]})`,y.fillRect($,V,1,1)}return{pixels:y?.getImageData(0,0,g.width,g.height).data,canvas:g}},toBlackWhiteBitMap=(e,n,r)=>{const g=clone(e),{x:y,y:k,width:$,height:V,size:L}=r;let z=L,j=L;L<0&&(z=$,j=V);for(let ae=y;ae<y+z;ae++)for(let re=k;re<k+j;re++){if(ae>$||ae<0||re>V||re<0)continue;const{r:oe,g:ue,b:le,a:de}={r:e[(re*$+ae)*4],g:e[(re*$+ae)*4+1],b:e[(re*$+ae)*4+2],a:e[(re*$+ae)*4+3]};oe>n.r||ue>n.g||le>n.b?(g[(re*$+ae)*4]=255,g[(re*$+ae)*4+1]=255,g[(re*$+ae)*4+2]=255,g[(re*$+ae)*4+3]=1):(g[(re*$+ae)*4]=0,g[(re*$+ae)*4+1]=0,g[(re*$+ae)*4+2]=0,g[(re*$+ae)*4+3]=1)}return g};/*!
  * shared v9.4.1
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const inBrowser=typeof window<"u",makeSymbol=(e,n=!1)=>n?Symbol.for(e):Symbol(e),generateFormatCacheKey=(e,n,r)=>friendlyJSONstringify({l:e,k:n,s:r}),friendlyJSONstringify=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),isNumber=e=>typeof e=="number"&&isFinite(e),isDate=e=>toTypeString(e)==="[object Date]",isRegExp=e=>toTypeString(e)==="[object RegExp]",isEmptyObject=e=>isPlainObject(e)&&Object.keys(e).length===0,assign$1=Object.assign;let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function escapeHtml(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const hasOwnProperty=Object.prototype.hasOwnProperty;function hasOwn(e,n){return hasOwnProperty.call(e,n)}const isArray=Array.isArray,isFunction=e=>typeof e=="function",isString$1=e=>typeof e=="string",isBoolean=e=>typeof e=="boolean",isObject$1=e=>e!==null&&typeof e=="object",objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),isPlainObject=e=>{if(!isObject$1(e))return!1;const n=Object.getPrototypeOf(e);return n===null||n.constructor===Object},toDisplayString=e=>e==null?"":isArray(e)||isPlainObject(e)&&e.toString===objectToString?JSON.stringify(e,null,2):String(e);function join$1(e,n=""){return e.reduce((r,g,y)=>y===0?r+g:r+n+g,"")}function incrementer(e){let n=e;return()=>++n}function warn(e,n){typeof console<"u"&&(console.warn("[intlify] "+e),n&&console.warn(n.stack))}/*!
  * message-compiler v9.4.1
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */function createPosition(e,n,r){return{line:e,column:n,offset:r}}function createLocation(e,n,r){const g={start:e,end:n};return r!=null&&(g.source=r),g}const RE_ARGS=/\{([0-9a-zA-Z]+)\}/g;function format$1(e,...n){return n.length===1&&isObject(n[0])&&(n=n[0]),(!n||!n.hasOwnProperty)&&(n={}),e.replace(RE_ARGS,(r,g)=>n.hasOwnProperty(g)?n[g]:"")}const assign=Object.assign,isString=e=>typeof e=="string",isObject=e=>e!==null&&typeof e=="object";function join(e,n=""){return e.reduce((r,g,y)=>y===0?r+g:r+n+g,"")}const CompileErrorCodes={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},errorMessages={[CompileErrorCodes.EXPECTED_TOKEN]:"Expected token: '{0}'",[CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[CompileErrorCodes.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[CompileErrorCodes.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[CompileErrorCodes.EMPTY_PLACEHOLDER]:"Empty placeholder",[CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[CompileErrorCodes.INVALID_LINKED_FORMAT]:"Invalid linked format",[CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[CompileErrorCodes.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[CompileErrorCodes.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function createCompileError(e,n,r={}){const{domain:g,messages:y,args:k}=r,$=format$1((y||errorMessages)[e]||"",...k||[]),V=new SyntaxError(String($));return V.code=e,n&&(V.location=n),V.domain=g,V}function defaultOnError(e){throw e}const CHAR_SP=" ",CHAR_CR="\r",CHAR_LF=`
`,CHAR_LS="\u2028",CHAR_PS="\u2029";function createScanner(e){const n=e;let r=0,g=1,y=1,k=0;const $=Ie=>n[Ie]===CHAR_CR&&n[Ie+1]===CHAR_LF,V=Ie=>n[Ie]===CHAR_LF,L=Ie=>n[Ie]===CHAR_PS,z=Ie=>n[Ie]===CHAR_LS,j=Ie=>$(Ie)||V(Ie)||L(Ie)||z(Ie),ae=()=>r,re=()=>g,oe=()=>y,ue=()=>k,le=Ie=>$(Ie)||L(Ie)||z(Ie)?CHAR_LF:n[Ie],de=()=>le(r),he=()=>le(r+k);function _e(){return k=0,j(r)&&(g++,y=0),$(r)&&r++,r++,y++,n[r]}function Ce(){return $(r+k)&&k++,k++,n[r+k]}function Ne(){r=0,g=1,y=1,k=0}function $e(Ie=0){k=Ie}function xe(){const Ie=r+k;for(;Ie!==r;)_e();k=0}return{index:ae,line:re,column:oe,peekOffset:ue,charAt:le,currentChar:de,currentPeek:he,next:_e,peek:Ce,reset:Ne,resetPeek:$e,skipToPeek:xe}}const EOF=void 0,DOT=".",LITERAL_DELIMITER="'",ERROR_DOMAIN$3="tokenizer";function createTokenizer(e,n={}){const r=n.location!==!1,g=createScanner(e),y=()=>g.index(),k=()=>createPosition(g.line(),g.column(),g.index()),$=k(),V=y(),L={currentType:14,offset:V,startLoc:$,endLoc:$,lastType:14,lastOffset:V,lastStartLoc:$,lastEndLoc:$,braceNest:0,inLinked:!1,text:""},z=()=>L,{onError:j}=n;function ae(Gn,vn,Kn,...En){const kt=z();if(vn.column+=Kn,vn.offset+=Kn,j){const At=r?createLocation(kt.startLoc,vn):null,Dn=createCompileError(Gn,At,{domain:ERROR_DOMAIN$3,args:En});j(Dn)}}function re(Gn,vn,Kn){Gn.endLoc=k(),Gn.currentType=vn;const En={type:vn};return r&&(En.loc=createLocation(Gn.startLoc,Gn.endLoc)),Kn!=null&&(En.value=Kn),En}const oe=Gn=>re(Gn,14);function ue(Gn,vn){return Gn.currentChar()===vn?(Gn.next(),vn):(ae(CompileErrorCodes.EXPECTED_TOKEN,k(),0,vn),"")}function le(Gn){let vn="";for(;Gn.currentPeek()===CHAR_SP||Gn.currentPeek()===CHAR_LF;)vn+=Gn.currentPeek(),Gn.peek();return vn}function de(Gn){const vn=le(Gn);return Gn.skipToPeek(),vn}function he(Gn){if(Gn===EOF)return!1;const vn=Gn.charCodeAt(0);return vn>=97&&vn<=122||vn>=65&&vn<=90||vn===95}function _e(Gn){if(Gn===EOF)return!1;const vn=Gn.charCodeAt(0);return vn>=48&&vn<=57}function Ce(Gn,vn){const{currentType:Kn}=vn;if(Kn!==2)return!1;le(Gn);const En=he(Gn.currentPeek());return Gn.resetPeek(),En}function Ne(Gn,vn){const{currentType:Kn}=vn;if(Kn!==2)return!1;le(Gn);const En=Gn.currentPeek()==="-"?Gn.peek():Gn.currentPeek(),kt=_e(En);return Gn.resetPeek(),kt}function $e(Gn,vn){const{currentType:Kn}=vn;if(Kn!==2)return!1;le(Gn);const En=Gn.currentPeek()===LITERAL_DELIMITER;return Gn.resetPeek(),En}function xe(Gn,vn){const{currentType:Kn}=vn;if(Kn!==8)return!1;le(Gn);const En=Gn.currentPeek()===".";return Gn.resetPeek(),En}function Ie(Gn,vn){const{currentType:Kn}=vn;if(Kn!==9)return!1;le(Gn);const En=he(Gn.currentPeek());return Gn.resetPeek(),En}function ze(Gn,vn){const{currentType:Kn}=vn;if(!(Kn===8||Kn===12))return!1;le(Gn);const En=Gn.currentPeek()===":";return Gn.resetPeek(),En}function qe(Gn,vn){const{currentType:Kn}=vn;if(Kn!==10)return!1;const En=()=>{const At=Gn.currentPeek();return At==="{"?he(Gn.peek()):At==="@"||At==="%"||At==="|"||At===":"||At==="."||At===CHAR_SP||!At?!1:At===CHAR_LF?(Gn.peek(),En()):he(At)},kt=En();return Gn.resetPeek(),kt}function Et(Gn){le(Gn);const vn=Gn.currentPeek()==="|";return Gn.resetPeek(),vn}function _n(Gn){const vn=le(Gn),Kn=Gn.currentPeek()==="%"&&Gn.peek()==="{";return Gn.resetPeek(),{isModulo:Kn,hasSpace:vn.length>0}}function Dt(Gn,vn=!0){const Kn=(kt=!1,At="",Dn=!1)=>{const Xn=Gn.currentPeek();return Xn==="{"?At==="%"?!1:kt:Xn==="@"||!Xn?At==="%"?!0:kt:Xn==="%"?(Gn.peek(),Kn(kt,"%",!0)):Xn==="|"?At==="%"||Dn?!0:!(At===CHAR_SP||At===CHAR_LF):Xn===CHAR_SP?(Gn.peek(),Kn(!0,CHAR_SP,Dn)):Xn===CHAR_LF?(Gn.peek(),Kn(!0,CHAR_LF,Dn)):!0},En=Kn();return vn&&Gn.resetPeek(),En}function Sn(Gn,vn){const Kn=Gn.currentChar();return Kn===EOF?EOF:vn(Kn)?(Gn.next(),Kn):null}function hn(Gn){return Sn(Gn,Kn=>{const En=Kn.charCodeAt(0);return En>=97&&En<=122||En>=65&&En<=90||En>=48&&En<=57||En===95||En===36})}function Vn(Gn){return Sn(Gn,Kn=>{const En=Kn.charCodeAt(0);return En>=48&&En<=57})}function Mn(Gn){return Sn(Gn,Kn=>{const En=Kn.charCodeAt(0);return En>=48&&En<=57||En>=65&&En<=70||En>=97&&En<=102})}function $n(Gn){let vn="",Kn="";for(;vn=Vn(Gn);)Kn+=vn;return Kn}function Nn(Gn){de(Gn);const vn=Gn.currentChar();return vn!=="%"&&ae(CompileErrorCodes.EXPECTED_TOKEN,k(),0,vn),Gn.next(),"%"}function kn(Gn){let vn="";for(;;){const Kn=Gn.currentChar();if(Kn==="{"||Kn==="}"||Kn==="@"||Kn==="|"||!Kn)break;if(Kn==="%")if(Dt(Gn))vn+=Kn,Gn.next();else break;else if(Kn===CHAR_SP||Kn===CHAR_LF)if(Dt(Gn))vn+=Kn,Gn.next();else{if(Et(Gn))break;vn+=Kn,Gn.next()}else vn+=Kn,Gn.next()}return vn}function jn(Gn){de(Gn);let vn="",Kn="";for(;vn=hn(Gn);)Kn+=vn;return Gn.currentChar()===EOF&&ae(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,k(),0),Kn}function Fn(Gn){de(Gn);let vn="";return Gn.currentChar()==="-"?(Gn.next(),vn+=`-${$n(Gn)}`):vn+=$n(Gn),Gn.currentChar()===EOF&&ae(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,k(),0),vn}function Tn(Gn){de(Gn),ue(Gn,"'");let vn="",Kn="";const En=At=>At!==LITERAL_DELIMITER&&At!==CHAR_LF;for(;vn=Sn(Gn,En);)vn==="\\"?Kn+=Hn(Gn):Kn+=vn;const kt=Gn.currentChar();return kt===CHAR_LF||kt===EOF?(ae(CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,k(),0),kt===CHAR_LF&&(Gn.next(),ue(Gn,"'")),Kn):(ue(Gn,"'"),Kn)}function Hn(Gn){const vn=Gn.currentChar();switch(vn){case"\\":case"'":return Gn.next(),`\\${vn}`;case"u":return la(Gn,vn,4);case"U":return la(Gn,vn,6);default:return ae(CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE,k(),0,vn),""}}function la(Gn,vn,Kn){ue(Gn,vn);let En="";for(let kt=0;kt<Kn;kt++){const At=Mn(Gn);if(!At){ae(CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE,k(),0,`\\${vn}${En}${Gn.currentChar()}`);break}En+=At}return`\\${vn}${En}`}function ca(Gn){de(Gn);let vn="",Kn="";const En=kt=>kt!=="{"&&kt!=="}"&&kt!==CHAR_SP&&kt!==CHAR_LF;for(;vn=Sn(Gn,En);)Kn+=vn;return Kn}function Zn(Gn){let vn="",Kn="";for(;vn=hn(Gn);)Kn+=vn;return Kn}function Bn(Gn){const vn=(Kn=!1,En)=>{const kt=Gn.currentChar();return kt==="{"||kt==="%"||kt==="@"||kt==="|"||kt==="("||kt===")"||!kt||kt===CHAR_SP?En:kt===CHAR_LF||kt===DOT?(En+=kt,Gn.next(),vn(Kn,En)):(En+=kt,Gn.next(),vn(!0,En))};return vn(!1,"")}function Wn(Gn){de(Gn);const vn=ue(Gn,"|");return de(Gn),vn}function da(Gn,vn){let Kn=null;switch(Gn.currentChar()){case"{":return vn.braceNest>=1&&ae(CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER,k(),0),Gn.next(),Kn=re(vn,2,"{"),de(Gn),vn.braceNest++,Kn;case"}":return vn.braceNest>0&&vn.currentType===2&&ae(CompileErrorCodes.EMPTY_PLACEHOLDER,k(),0),Gn.next(),Kn=re(vn,3,"}"),vn.braceNest--,vn.braceNest>0&&de(Gn),vn.inLinked&&vn.braceNest===0&&(vn.inLinked=!1),Kn;case"@":return vn.braceNest>0&&ae(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,k(),0),Kn=ga(Gn,vn)||oe(vn),vn.braceNest=0,Kn;default:let kt=!0,At=!0,Dn=!0;if(Et(Gn))return vn.braceNest>0&&ae(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,k(),0),Kn=re(vn,1,Wn(Gn)),vn.braceNest=0,vn.inLinked=!1,Kn;if(vn.braceNest>0&&(vn.currentType===5||vn.currentType===6||vn.currentType===7))return ae(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,k(),0),vn.braceNest=0,Ca(Gn,vn);if(kt=Ce(Gn,vn))return Kn=re(vn,5,jn(Gn)),de(Gn),Kn;if(At=Ne(Gn,vn))return Kn=re(vn,6,Fn(Gn)),de(Gn),Kn;if(Dn=$e(Gn,vn))return Kn=re(vn,7,Tn(Gn)),de(Gn),Kn;if(!kt&&!At&&!Dn)return Kn=re(vn,13,ca(Gn)),ae(CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER,k(),0,Kn.value),de(Gn),Kn;break}return Kn}function ga(Gn,vn){const{currentType:Kn}=vn;let En=null;const kt=Gn.currentChar();switch((Kn===8||Kn===9||Kn===12||Kn===10)&&(kt===CHAR_LF||kt===CHAR_SP)&&ae(CompileErrorCodes.INVALID_LINKED_FORMAT,k(),0),kt){case"@":return Gn.next(),En=re(vn,8,"@"),vn.inLinked=!0,En;case".":return de(Gn),Gn.next(),re(vn,9,".");case":":return de(Gn),Gn.next(),re(vn,10,":");default:return Et(Gn)?(En=re(vn,1,Wn(Gn)),vn.braceNest=0,vn.inLinked=!1,En):xe(Gn,vn)||ze(Gn,vn)?(de(Gn),ga(Gn,vn)):Ie(Gn,vn)?(de(Gn),re(vn,12,Zn(Gn))):qe(Gn,vn)?(de(Gn),kt==="{"?da(Gn,vn)||En:re(vn,11,Bn(Gn))):(Kn===8&&ae(CompileErrorCodes.INVALID_LINKED_FORMAT,k(),0),vn.braceNest=0,vn.inLinked=!1,Ca(Gn,vn))}}function Ca(Gn,vn){let Kn={type:14};if(vn.braceNest>0)return da(Gn,vn)||oe(vn);if(vn.inLinked)return ga(Gn,vn)||oe(vn);switch(Gn.currentChar()){case"{":return da(Gn,vn)||oe(vn);case"}":return ae(CompileErrorCodes.UNBALANCED_CLOSING_BRACE,k(),0),Gn.next(),re(vn,3,"}");case"@":return ga(Gn,vn)||oe(vn);default:if(Et(Gn))return Kn=re(vn,1,Wn(Gn)),vn.braceNest=0,vn.inLinked=!1,Kn;const{isModulo:kt,hasSpace:At}=_n(Gn);if(kt)return At?re(vn,0,kn(Gn)):re(vn,4,Nn(Gn));if(Dt(Gn))return re(vn,0,kn(Gn));break}return Kn}function ra(){const{currentType:Gn,offset:vn,startLoc:Kn,endLoc:En}=L;return L.lastType=Gn,L.lastOffset=vn,L.lastStartLoc=Kn,L.lastEndLoc=En,L.offset=y(),L.startLoc=k(),g.currentChar()===EOF?re(L,14):Ca(g,L)}return{nextToken:ra,currentOffset:y,currentPosition:k,context:z}}const ERROR_DOMAIN$2="parser",KNOWN_ESCAPES=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function fromEscapeSequence(e,n,r){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const g=parseInt(n||r,16);return g<=55295||g>=57344?String.fromCodePoint(g):""}}}function createParser(e={}){const n=e.location!==!1,{onError:r}=e;function g(he,_e,Ce,Ne,...$e){const xe=he.currentPosition();if(xe.offset+=Ne,xe.column+=Ne,r){const Ie=n?createLocation(Ce,xe):null,ze=createCompileError(_e,Ie,{domain:ERROR_DOMAIN$2,args:$e});r(ze)}}function y(he,_e,Ce){const Ne={type:he};return n&&(Ne.start=_e,Ne.end=_e,Ne.loc={start:Ce,end:Ce}),Ne}function k(he,_e,Ce,Ne){Ne&&(he.type=Ne),n&&(he.end=_e,he.loc&&(he.loc.end=Ce))}function $(he,_e){const Ce=he.context(),Ne=y(3,Ce.offset,Ce.startLoc);return Ne.value=_e,k(Ne,he.currentOffset(),he.currentPosition()),Ne}function V(he,_e){const Ce=he.context(),{lastOffset:Ne,lastStartLoc:$e}=Ce,xe=y(5,Ne,$e);return xe.index=parseInt(_e,10),he.nextToken(),k(xe,he.currentOffset(),he.currentPosition()),xe}function L(he,_e){const Ce=he.context(),{lastOffset:Ne,lastStartLoc:$e}=Ce,xe=y(4,Ne,$e);return xe.key=_e,he.nextToken(),k(xe,he.currentOffset(),he.currentPosition()),xe}function z(he,_e){const Ce=he.context(),{lastOffset:Ne,lastStartLoc:$e}=Ce,xe=y(9,Ne,$e);return xe.value=_e.replace(KNOWN_ESCAPES,fromEscapeSequence),he.nextToken(),k(xe,he.currentOffset(),he.currentPosition()),xe}function j(he){const _e=he.nextToken(),Ce=he.context(),{lastOffset:Ne,lastStartLoc:$e}=Ce,xe=y(8,Ne,$e);return _e.type!==12?(g(he,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER,Ce.lastStartLoc,0),xe.value="",k(xe,Ne,$e),{nextConsumeToken:_e,node:xe}):(_e.value==null&&g(he,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,Ce.lastStartLoc,0,getTokenCaption(_e)),xe.value=_e.value||"",k(xe,he.currentOffset(),he.currentPosition()),{node:xe})}function ae(he,_e){const Ce=he.context(),Ne=y(7,Ce.offset,Ce.startLoc);return Ne.value=_e,k(Ne,he.currentOffset(),he.currentPosition()),Ne}function re(he){const _e=he.context(),Ce=y(6,_e.offset,_e.startLoc);let Ne=he.nextToken();if(Ne.type===9){const $e=j(he);Ce.modifier=$e.node,Ne=$e.nextConsumeToken||he.nextToken()}switch(Ne.type!==10&&g(he,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,_e.lastStartLoc,0,getTokenCaption(Ne)),Ne=he.nextToken(),Ne.type===2&&(Ne=he.nextToken()),Ne.type){case 11:Ne.value==null&&g(he,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,_e.lastStartLoc,0,getTokenCaption(Ne)),Ce.key=ae(he,Ne.value||"");break;case 5:Ne.value==null&&g(he,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,_e.lastStartLoc,0,getTokenCaption(Ne)),Ce.key=L(he,Ne.value||"");break;case 6:Ne.value==null&&g(he,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,_e.lastStartLoc,0,getTokenCaption(Ne)),Ce.key=V(he,Ne.value||"");break;case 7:Ne.value==null&&g(he,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,_e.lastStartLoc,0,getTokenCaption(Ne)),Ce.key=z(he,Ne.value||"");break;default:g(he,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY,_e.lastStartLoc,0);const $e=he.context(),xe=y(7,$e.offset,$e.startLoc);return xe.value="",k(xe,$e.offset,$e.startLoc),Ce.key=xe,k(Ce,$e.offset,$e.startLoc),{nextConsumeToken:Ne,node:Ce}}return k(Ce,he.currentOffset(),he.currentPosition()),{node:Ce}}function oe(he){const _e=he.context(),Ce=_e.currentType===1?he.currentOffset():_e.offset,Ne=_e.currentType===1?_e.endLoc:_e.startLoc,$e=y(2,Ce,Ne);$e.items=[];let xe=null;do{const qe=xe||he.nextToken();switch(xe=null,qe.type){case 0:qe.value==null&&g(he,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,_e.lastStartLoc,0,getTokenCaption(qe)),$e.items.push($(he,qe.value||""));break;case 6:qe.value==null&&g(he,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,_e.lastStartLoc,0,getTokenCaption(qe)),$e.items.push(V(he,qe.value||""));break;case 5:qe.value==null&&g(he,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,_e.lastStartLoc,0,getTokenCaption(qe)),$e.items.push(L(he,qe.value||""));break;case 7:qe.value==null&&g(he,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,_e.lastStartLoc,0,getTokenCaption(qe)),$e.items.push(z(he,qe.value||""));break;case 8:const Et=re(he);$e.items.push(Et.node),xe=Et.nextConsumeToken||null;break}}while(_e.currentType!==14&&_e.currentType!==1);const Ie=_e.currentType===1?_e.lastOffset:he.currentOffset(),ze=_e.currentType===1?_e.lastEndLoc:he.currentPosition();return k($e,Ie,ze),$e}function ue(he,_e,Ce,Ne){const $e=he.context();let xe=Ne.items.length===0;const Ie=y(1,_e,Ce);Ie.cases=[],Ie.cases.push(Ne);do{const ze=oe(he);xe||(xe=ze.items.length===0),Ie.cases.push(ze)}while($e.currentType!==14);return xe&&g(he,CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL,Ce,0),k(Ie,he.currentOffset(),he.currentPosition()),Ie}function le(he){const _e=he.context(),{offset:Ce,startLoc:Ne}=_e,$e=oe(he);return _e.currentType===14?$e:ue(he,Ce,Ne,$e)}function de(he){const _e=createTokenizer(he,assign({},e)),Ce=_e.context(),Ne=y(0,Ce.offset,Ce.startLoc);return n&&Ne.loc&&(Ne.loc.source=he),Ne.body=le(_e),e.onCacheKey&&(Ne.cacheKey=e.onCacheKey(he)),Ce.currentType!==14&&g(_e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,Ce.lastStartLoc,0,he[Ce.offset]||""),k(Ne,_e.currentOffset(),_e.currentPosition()),Ne}return{parse:de}}function getTokenCaption(e){if(e.type===14)return"EOF";const n=(e.value||"").replace(/\r?\n/gu,"\\n");return n.length>10?n.slice(0,9)+"":n}function createTransformer(e,n={}){const r={ast:e,helpers:new Set};return{context:()=>r,helper:k=>(r.helpers.add(k),k)}}function traverseNodes(e,n){for(let r=0;r<e.length;r++)traverseNode(e[r],n)}function traverseNode(e,n){switch(e.type){case 1:traverseNodes(e.cases,n),n.helper("plural");break;case 2:traverseNodes(e.items,n);break;case 6:traverseNode(e.key,n),n.helper("linked"),n.helper("type");break;case 5:n.helper("interpolate"),n.helper("list");break;case 4:n.helper("interpolate"),n.helper("named");break}}function transform(e,n={}){const r=createTransformer(e);r.helper("normalize"),e.body&&traverseNode(e.body,r);const g=r.context();e.helpers=Array.from(g.helpers)}function optimize(e){const n=e.body;return n.type===2?optimizeMessageNode(n):n.cases.forEach(r=>optimizeMessageNode(r)),e}function optimizeMessageNode(e){if(e.items.length===1){const n=e.items[0];(n.type===3||n.type===9)&&(e.static=n.value,delete n.value)}else{const n=[];for(let r=0;r<e.items.length;r++){const g=e.items[r];if(!(g.type===3||g.type===9)||g.value==null)break;n.push(g.value)}if(n.length===e.items.length){e.static=join(n);for(let r=0;r<e.items.length;r++){const g=e.items[r];(g.type===3||g.type===9)&&delete g.value}}}}const ERROR_DOMAIN$1="minifier";function minify(e){switch(e.t=e.type,e.type){case 0:const n=e;minify(n.body),n.b=n.body,delete n.body;break;case 1:const r=e,g=r.cases;for(let j=0;j<g.length;j++)minify(g[j]);r.c=g,delete r.cases;break;case 2:const y=e,k=y.items;for(let j=0;j<k.length;j++)minify(k[j]);y.i=k,delete y.items,y.static&&(y.s=y.static,delete y.static);break;case 3:case 9:case 8:case 7:const $=e;$.value&&($.v=$.value,delete $.value);break;case 6:const V=e;minify(V.key),V.k=V.key,delete V.key,V.modifier&&(minify(V.modifier),V.m=V.modifier,delete V.modifier);break;case 5:const L=e;L.i=L.index,delete L.index;break;case 4:const z=e;z.k=z.key,delete z.key;break;default:throw createCompileError(CompileErrorCodes.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:ERROR_DOMAIN$1,args:[e.type]})}delete e.type}const ERROR_DOMAIN="parser";function createCodeGenerator(e,n){const{sourceMap:r,filename:g,breakLineCode:y,needIndent:k}=n,$=n.location!==!1,V={filename:g,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:y,needIndent:k,indentLevel:0};$&&e.loc&&(V.source=e.loc.source);const L=()=>V;function z(de,he){V.code+=de}function j(de,he=!0){const _e=he?y:"";z(k?_e+"  ".repeat(de):_e)}function ae(de=!0){const he=++V.indentLevel;de&&j(he)}function re(de=!0){const he=--V.indentLevel;de&&j(he)}function oe(){j(V.indentLevel)}return{context:L,push:z,indent:ae,deindent:re,newline:oe,helper:de=>`_${de}`,needIndent:()=>V.needIndent}}function generateLinkedNode(e,n){const{helper:r}=e;e.push(`${r("linked")}(`),generateNode(e,n.key),n.modifier?(e.push(", "),generateNode(e,n.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function generateMessageNode(e,n){const{helper:r,needIndent:g}=e;e.push(`${r("normalize")}([`),e.indent(g());const y=n.items.length;for(let k=0;k<y&&(generateNode(e,n.items[k]),k!==y-1);k++)e.push(", ");e.deindent(g()),e.push("])")}function generatePluralNode(e,n){const{helper:r,needIndent:g}=e;if(n.cases.length>1){e.push(`${r("plural")}([`),e.indent(g());const y=n.cases.length;for(let k=0;k<y&&(generateNode(e,n.cases[k]),k!==y-1);k++)e.push(", ");e.deindent(g()),e.push("])")}}function generateResource(e,n){n.body?generateNode(e,n.body):e.push("null")}function generateNode(e,n){const{helper:r}=e;switch(n.type){case 0:generateResource(e,n);break;case 1:generatePluralNode(e,n);break;case 2:generateMessageNode(e,n);break;case 6:generateLinkedNode(e,n);break;case 8:e.push(JSON.stringify(n.value),n);break;case 7:e.push(JSON.stringify(n.value),n);break;case 5:e.push(`${r("interpolate")}(${r("list")}(${n.index}))`,n);break;case 4:e.push(`${r("interpolate")}(${r("named")}(${JSON.stringify(n.key)}))`,n);break;case 9:e.push(JSON.stringify(n.value),n);break;case 3:e.push(JSON.stringify(n.value),n);break;default:throw createCompileError(CompileErrorCodes.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:ERROR_DOMAIN,args:[n.type]})}}const generate=(e,n={})=>{const r=isString(n.mode)?n.mode:"normal",g=isString(n.filename)?n.filename:"message.intl",y=!!n.sourceMap,k=n.breakLineCode!=null?n.breakLineCode:r==="arrow"?";":`
`,$=n.needIndent?n.needIndent:r!=="arrow",V=e.helpers||[],L=createCodeGenerator(e,{mode:r,filename:g,sourceMap:y,breakLineCode:k,needIndent:$});L.push(r==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),L.indent($),V.length>0&&(L.push(`const { ${join(V.map(ae=>`${ae}: _${ae}`),", ")} } = ctx`),L.newline()),L.push("return "),generateNode(L,e),L.deindent($),L.push("}"),delete e.helpers;const{code:z,map:j}=L.context();return{ast:e,code:z,map:j?j.toJSON():void 0}};function baseCompile$1(e,n={}){const r=assign({},n),g=!!r.jit,y=!!r.minify,k=r.optimize==null?!0:r.optimize,V=createParser(r).parse(e);return g?(k&&optimize(V),y&&minify(V),{ast:V,code:""}):(transform(V,r),generate(V,r))}/*!
  * core-base v9.4.1
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */function initFeatureFlags$1(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(getGlobalThis().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const pathStateMachine=[];pathStateMachine[0]={w:[0],i:[3,0],"[":[4],o:[7]};pathStateMachine[1]={w:[1],".":[2],"[":[4],o:[7]};pathStateMachine[2]={w:[2],i:[3,0],0:[3,0]};pathStateMachine[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};pathStateMachine[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};pathStateMachine[5]={"'":[4,0],o:8,l:[5,0]};pathStateMachine[6]={'"':[4,0],o:8,l:[6,0]};const literalValueRE=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function isLiteral(e){return literalValueRE.test(e)}function stripQuotes(e){const n=e.charCodeAt(0),r=e.charCodeAt(e.length-1);return n===r&&(n===34||n===39)?e.slice(1,-1):e}function getPathCharType(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function formatSubPath(e){const n=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:isLiteral(n)?stripQuotes(n):"*"+n}function parse$2(e){const n=[];let r=-1,g=0,y=0,k,$,V,L,z,j,ae;const re=[];re[0]=()=>{$===void 0?$=V:$+=V},re[1]=()=>{$!==void 0&&(n.push($),$=void 0)},re[2]=()=>{re[0](),y++},re[3]=()=>{if(y>0)y--,g=4,re[0]();else{if(y=0,$===void 0||($=formatSubPath($),$===!1))return!1;re[1]()}};function oe(){const ue=e[r+1];if(g===5&&ue==="'"||g===6&&ue==='"')return r++,V="\\"+ue,re[0](),!0}for(;g!==null;)if(r++,k=e[r],!(k==="\\"&&oe())){if(L=getPathCharType(k),ae=pathStateMachine[g],z=ae[L]||ae.l||8,z===8||(g=z[0],z[1]!==void 0&&(j=re[z[1]],j&&(V=k,j()===!1))))return;if(g===7)return n}}const cache$1=new Map;function resolveWithKeyValue(e,n){return isObject$1(e)?e[n]:null}function resolveValue(e,n){if(!isObject$1(e))return null;let r=cache$1.get(n);if(r||(r=parse$2(n),r&&cache$1.set(n,r)),!r)return null;const g=r.length;let y=e,k=0;for(;k<g;){const $=y[r[k]];if($===void 0)return null;y=$,k++}return y}const DEFAULT_MODIFIER=e=>e,DEFAULT_MESSAGE=e=>"",DEFAULT_MESSAGE_DATA_TYPE="text",DEFAULT_NORMALIZE=e=>e.length===0?"":join$1(e),DEFAULT_INTERPOLATE=toDisplayString;function pluralDefault(e,n){return e=Math.abs(e),n===2?e?e>1?1:0:1:e?Math.min(e,2):0}function getPluralIndex(e){const n=isNumber(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(isNumber(e.named.count)||isNumber(e.named.n))?isNumber(e.named.count)?e.named.count:isNumber(e.named.n)?e.named.n:n:n}function normalizeNamed(e,n){n.count||(n.count=e),n.n||(n.n=e)}function createMessageContext(e={}){const n=e.locale,r=getPluralIndex(e),g=isObject$1(e.pluralRules)&&isString$1(n)&&isFunction(e.pluralRules[n])?e.pluralRules[n]:pluralDefault,y=isObject$1(e.pluralRules)&&isString$1(n)&&isFunction(e.pluralRules[n])?pluralDefault:void 0,k=he=>he[g(r,he.length,y)],$=e.list||[],V=he=>$[he],L=e.named||{};isNumber(e.pluralIndex)&&normalizeNamed(r,L);const z=he=>L[he];function j(he){const _e=isFunction(e.messages)?e.messages(he):isObject$1(e.messages)?e.messages[he]:!1;return _e||(e.parent?e.parent.message(he):DEFAULT_MESSAGE)}const ae=he=>e.modifiers?e.modifiers[he]:DEFAULT_MODIFIER,re=isPlainObject(e.processor)&&isFunction(e.processor.normalize)?e.processor.normalize:DEFAULT_NORMALIZE,oe=isPlainObject(e.processor)&&isFunction(e.processor.interpolate)?e.processor.interpolate:DEFAULT_INTERPOLATE,ue=isPlainObject(e.processor)&&isString$1(e.processor.type)?e.processor.type:DEFAULT_MESSAGE_DATA_TYPE,de={list:V,named:z,plural:k,linked:(he,..._e)=>{const[Ce,Ne]=_e;let $e="text",xe="";_e.length===1?isObject$1(Ce)?(xe=Ce.modifier||xe,$e=Ce.type||$e):isString$1(Ce)&&(xe=Ce||xe):_e.length===2&&(isString$1(Ce)&&(xe=Ce||xe),isString$1(Ne)&&($e=Ne||$e));const Ie=j(he)(de),ze=$e==="vnode"&&isArray(Ie)&&xe?Ie[0]:Ie;return xe?ae(xe)(ze,$e):ze},message:j,type:ue,interpolate:oe,normalize:re,values:assign$1({},$,L)};return de}let devtools=null;function setDevToolsHook(e){devtools=e}function initI18nDevTools(e,n,r){devtools&&devtools.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:n,meta:r})}const translateDevTools=createDevToolsHook("function:translate");function createDevToolsHook(e){return n=>devtools&&devtools.emit(e,n)}const CoreWarnCodes={NOT_FOUND_KEY:1,FALLBACK_TO_TRANSLATE:2,CANNOT_FORMAT_NUMBER:3,FALLBACK_TO_NUMBER_FORMAT:4,CANNOT_FORMAT_DATE:5,FALLBACK_TO_DATE_FORMAT:6,EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:7,__EXTEND_POINT__:8};function fallbackWithSimple(e,n,r){return[...new Set([r,...isArray(n)?n:isObject$1(n)?Object.keys(n):isString$1(n)?[n]:[r]])]}function fallbackWithLocaleChain(e,n,r){const g=isString$1(r)?r:DEFAULT_LOCALE,y=e;y.__localeChainCache||(y.__localeChainCache=new Map);let k=y.__localeChainCache.get(g);if(!k){k=[];let $=[r];for(;isArray($);)$=appendBlockToChain(k,$,n);const V=isArray(n)||!isPlainObject(n)?n:n.default?n.default:null;$=isString$1(V)?[V]:V,isArray($)&&appendBlockToChain(k,$,!1),y.__localeChainCache.set(g,k)}return k}function appendBlockToChain(e,n,r){let g=!0;for(let y=0;y<n.length&&isBoolean(g);y++){const k=n[y];isString$1(k)&&(g=appendLocaleToChain(e,n[y],r))}return g}function appendLocaleToChain(e,n,r){let g;const y=n.split("-");do{const k=y.join("-");g=appendItemToChain(e,k,r),y.splice(-1,1)}while(y.length&&g===!0);return g}function appendItemToChain(e,n,r){let g=!1;if(!e.includes(n)&&(g=!0,n)){g=n[n.length-1]!=="!";const y=n.replace(/!/g,"");e.push(y),(isArray(r)||isPlainObject(r))&&r[y]&&(g=r[y])}return g}const VERSION$1="9.4.1",NOT_REOSLVED=-1,DEFAULT_LOCALE="en-US",MISSING_RESOLVE_VALUE="",capitalize=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function getDefaultLinkedModifiers(){return{upper:(e,n)=>n==="text"&&isString$1(e)?e.toUpperCase():n==="vnode"&&isObject$1(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,n)=>n==="text"&&isString$1(e)?e.toLowerCase():n==="vnode"&&isObject$1(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,n)=>n==="text"&&isString$1(e)?capitalize(e):n==="vnode"&&isObject$1(e)&&"__v_isVNode"in e?capitalize(e.children):e}}let _compiler;function registerMessageCompiler(e){_compiler=e}let _resolver;function registerMessageResolver(e){_resolver=e}let _fallbacker;function registerLocaleFallbacker(e){_fallbacker=e}let _additionalMeta=null;const setAdditionalMeta=e=>{_additionalMeta=e},getAdditionalMeta=()=>_additionalMeta;let _fallbackContext=null;const setFallbackContext=e=>{_fallbackContext=e},getFallbackContext=()=>_fallbackContext;let _cid=0;function createCoreContext(e={}){const n=isFunction(e.onWarn)?e.onWarn:warn,r=isString$1(e.version)?e.version:VERSION$1,g=isString$1(e.locale)?e.locale:DEFAULT_LOCALE,y=isArray(e.fallbackLocale)||isPlainObject(e.fallbackLocale)||isString$1(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:g,k=isPlainObject(e.messages)?e.messages:{[g]:{}},$=isPlainObject(e.datetimeFormats)?e.datetimeFormats:{[g]:{}},V=isPlainObject(e.numberFormats)?e.numberFormats:{[g]:{}},L=assign$1({},e.modifiers||{},getDefaultLinkedModifiers()),z=e.pluralRules||{},j=isFunction(e.missing)?e.missing:null,ae=isBoolean(e.missingWarn)||isRegExp(e.missingWarn)?e.missingWarn:!0,re=isBoolean(e.fallbackWarn)||isRegExp(e.fallbackWarn)?e.fallbackWarn:!0,oe=!!e.fallbackFormat,ue=!!e.unresolving,le=isFunction(e.postTranslation)?e.postTranslation:null,de=isPlainObject(e.processor)?e.processor:null,he=isBoolean(e.warnHtmlMessage)?e.warnHtmlMessage:!0,_e=!!e.escapeParameter,Ce=isFunction(e.messageCompiler)?e.messageCompiler:_compiler,Ne=isFunction(e.messageResolver)?e.messageResolver:_resolver||resolveWithKeyValue,$e=isFunction(e.localeFallbacker)?e.localeFallbacker:_fallbacker||fallbackWithSimple,xe=isObject$1(e.fallbackContext)?e.fallbackContext:void 0,Ie=e,ze=isObject$1(Ie.__datetimeFormatters)?Ie.__datetimeFormatters:new Map,qe=isObject$1(Ie.__numberFormatters)?Ie.__numberFormatters:new Map,Et=isObject$1(Ie.__meta)?Ie.__meta:{};_cid++;const _n={version:r,cid:_cid,locale:g,fallbackLocale:y,messages:k,modifiers:L,pluralRules:z,missing:j,missingWarn:ae,fallbackWarn:re,fallbackFormat:oe,unresolving:ue,postTranslation:le,processor:de,warnHtmlMessage:he,escapeParameter:_e,messageCompiler:Ce,messageResolver:Ne,localeFallbacker:$e,fallbackContext:xe,onWarn:n,__meta:Et};return _n.datetimeFormats=$,_n.numberFormats=V,_n.__datetimeFormatters=ze,_n.__numberFormatters=qe,__INTLIFY_PROD_DEVTOOLS__&&initI18nDevTools(_n,r,Et),_n}function handleMissing(e,n,r,g,y){const{missing:k,onWarn:$}=e;if(k!==null){const V=k(e,r,n,y);return isString$1(V)?V:n}else return n}function updateFallbackLocale(e,n,r){const g=e;g.__localeChainCache=new Map,e.localeFallbacker(e,r,n)}function format(e){return r=>formatParts(r,e)}function formatParts(e,n){const r=n.b||n.body;if((r.t||r.type)===1){const g=r,y=g.c||g.cases;return e.plural(y.reduce((k,$)=>[...k,formatMessageParts(e,$)],[]))}else return formatMessageParts(e,r)}function formatMessageParts(e,n){const r=n.s||n.static;if(r)return e.type==="text"?r:e.normalize([r]);{const g=(n.i||n.items).reduce((y,k)=>[...y,formatMessagePart(e,k)],[]);return e.normalize(g)}}function formatMessagePart(e,n){const r=n.t||n.type;switch(r){case 3:const g=n;return g.v||g.value;case 9:const y=n;return y.v||y.value;case 4:const k=n;return e.interpolate(e.named(k.k||k.key));case 5:const $=n;return e.interpolate(e.list($.i||$.index));case 6:const V=n,L=V.m||V.modifier;return e.linked(formatMessagePart(e,V.k||V.key),L?formatMessagePart(e,L):void 0,e.type);case 7:const z=n;return z.v||z.value;case 8:const j=n;return j.v||j.value;default:throw new Error(`unhandled node type on format message part: ${r}`)}}const code$3=CompileErrorCodes.__EXTEND_POINT__,inc$2=incrementer(code$3),CoreErrorCodes={INVALID_ARGUMENT:code$3,INVALID_DATE_ARGUMENT:inc$2(),INVALID_ISO_DATE_ARGUMENT:inc$2(),NOT_SUPPORT_NON_STRING_MESSAGE:inc$2(),__EXTEND_POINT__:inc$2()};function createCoreError(e){return createCompileError(e,null,void 0)}const defaultOnCacheKey=e=>e;let compileCache=Object.create(null);const isMessageAST=e=>isObject$1(e)&&(e.t===0||e.type===0)&&("b"in e||"body"in e);function baseCompile(e,n={}){let r=!1;const g=n.onError||defaultOnError;return n.onError=y=>{r=!0,g(y)},{...baseCompile$1(e,n),detectError:r}}const compileToFunction=(e,n)=>{if(!isString$1(e))throw createCoreError(CoreErrorCodes.NOT_SUPPORT_NON_STRING_MESSAGE);{isBoolean(n.warnHtmlMessage)&&n.warnHtmlMessage;const g=(n.onCacheKey||defaultOnCacheKey)(e),y=compileCache[g];if(y)return y;const{code:k,detectError:$}=baseCompile(e,n),V=new Function(`return ${k}`)();return $?V:compileCache[g]=V}};function compile(e,n){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&isString$1(e)){isBoolean(n.warnHtmlMessage)&&n.warnHtmlMessage;const g=(n.onCacheKey||defaultOnCacheKey)(e),y=compileCache[g];if(y)return y;const{ast:k,detectError:$}=baseCompile(e,{...n,location:!1,jit:!0}),V=format(k);return $?V:compileCache[g]=V}else{const r=e.cacheKey;if(r){const g=compileCache[r];return g||(compileCache[r]=format(e))}else return format(e)}}const NOOP_MESSAGE_FUNCTION=()=>"",isMessageFunction=e=>isFunction(e);function translate(e,...n){const{fallbackFormat:r,postTranslation:g,unresolving:y,messageCompiler:k,fallbackLocale:$,messages:V}=e,[L,z]=parseTranslateArgs(...n),j=isBoolean(z.missingWarn)?z.missingWarn:e.missingWarn,ae=isBoolean(z.fallbackWarn)?z.fallbackWarn:e.fallbackWarn,re=isBoolean(z.escapeParameter)?z.escapeParameter:e.escapeParameter,oe=!!z.resolvedMessage,ue=isString$1(z.default)||isBoolean(z.default)?isBoolean(z.default)?k?L:()=>L:z.default:r?k?L:()=>L:"",le=r||ue!=="",de=isString$1(z.locale)?z.locale:e.locale;re&&escapeParams(z);let[he,_e,Ce]=oe?[L,de,V[de]||{}]:resolveMessageFormat(e,L,de,$,ae,j),Ne=he,$e=L;if(!oe&&!(isString$1(Ne)||isMessageAST(Ne)||isMessageFunction(Ne))&&le&&(Ne=ue,$e=Ne),!oe&&(!(isString$1(Ne)||isMessageAST(Ne)||isMessageFunction(Ne))||!isString$1(_e)))return y?NOT_REOSLVED:L;let xe=!1;const Ie=()=>{xe=!0},ze=isMessageFunction(Ne)?Ne:compileMessageFormat(e,L,_e,Ne,$e,Ie);if(xe)return Ne;const qe=getMessageContextOptions(e,_e,Ce,z),Et=createMessageContext(qe),_n=evaluateMessage(e,ze,Et),Dt=g?g(_n,L):_n;if(__INTLIFY_PROD_DEVTOOLS__){const Sn={timestamp:Date.now(),key:isString$1(L)?L:isMessageFunction(Ne)?Ne.key:"",locale:_e||(isMessageFunction(Ne)?Ne.locale:""),format:isString$1(Ne)?Ne:isMessageFunction(Ne)?Ne.source:"",message:Dt};Sn.meta=assign$1({},e.__meta,getAdditionalMeta()||{}),translateDevTools(Sn)}return Dt}function escapeParams(e){isArray(e.list)?e.list=e.list.map(n=>isString$1(n)?escapeHtml(n):n):isObject$1(e.named)&&Object.keys(e.named).forEach(n=>{isString$1(e.named[n])&&(e.named[n]=escapeHtml(e.named[n]))})}function resolveMessageFormat(e,n,r,g,y,k){const{messages:$,onWarn:V,messageResolver:L,localeFallbacker:z}=e,j=z(e,g,r);let ae={},re,oe=null;const ue="translate";for(let le=0;le<j.length&&(re=j[le],ae=$[re]||{},(oe=L(ae,n))===null&&(oe=ae[n]),!(isString$1(oe)||isMessageAST(oe)||isMessageFunction(oe)));le++){const de=handleMissing(e,n,re,k,ue);de!==n&&(oe=de)}return[oe,re,ae]}function compileMessageFormat(e,n,r,g,y,k){const{messageCompiler:$,warnHtmlMessage:V}=e;if(isMessageFunction(g)){const z=g;return z.locale=z.locale||r,z.key=z.key||n,z}if($==null){const z=()=>g;return z.locale=r,z.key=n,z}const L=$(g,getCompileContext(e,r,y,g,V,k));return L.locale=r,L.key=n,L.source=g,L}function evaluateMessage(e,n,r){return n(r)}function parseTranslateArgs(...e){const[n,r,g]=e,y={};if(!isString$1(n)&&!isNumber(n)&&!isMessageFunction(n)&&!isMessageAST(n))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const k=isNumber(n)?String(n):(isMessageFunction(n),n);return isNumber(r)?y.plural=r:isString$1(r)?y.default=r:isPlainObject(r)&&!isEmptyObject(r)?y.named=r:isArray(r)&&(y.list=r),isNumber(g)?y.plural=g:isString$1(g)?y.default=g:isPlainObject(g)&&assign$1(y,g),[k,y]}function getCompileContext(e,n,r,g,y,k){return{locale:n,key:r,warnHtmlMessage:y,onError:$=>{throw k&&k($),$},onCacheKey:$=>generateFormatCacheKey(n,r,$)}}function getMessageContextOptions(e,n,r,g){const{modifiers:y,pluralRules:k,messageResolver:$,fallbackLocale:V,fallbackWarn:L,missingWarn:z,fallbackContext:j}=e,re={locale:n,modifiers:y,pluralRules:k,messages:oe=>{let ue=$(r,oe);if(ue==null&&j){const[,,le]=resolveMessageFormat(j,oe,n,V,L,z);ue=$(le,oe)}if(isString$1(ue)||isMessageAST(ue)){let le=!1;const he=compileMessageFormat(e,oe,n,ue,oe,()=>{le=!0});return le?NOOP_MESSAGE_FUNCTION:he}else return isMessageFunction(ue)?ue:NOOP_MESSAGE_FUNCTION}};return e.processor&&(re.processor=e.processor),g.list&&(re.list=g.list),g.named&&(re.named=g.named),isNumber(g.plural)&&(re.pluralIndex=g.plural),re}function datetime(e,...n){const{datetimeFormats:r,unresolving:g,fallbackLocale:y,onWarn:k,localeFallbacker:$}=e,{__datetimeFormatters:V}=e,[L,z,j,ae]=parseDateTimeArgs(...n),re=isBoolean(j.missingWarn)?j.missingWarn:e.missingWarn;isBoolean(j.fallbackWarn)?j.fallbackWarn:e.fallbackWarn;const oe=!!j.part,ue=isString$1(j.locale)?j.locale:e.locale,le=$(e,y,ue);if(!isString$1(L)||L==="")return new Intl.DateTimeFormat(ue,ae).format(z);let de={},he,_e=null;const Ce="datetime format";for(let xe=0;xe<le.length&&(he=le[xe],de=r[he]||{},_e=de[L],!isPlainObject(_e));xe++)handleMissing(e,L,he,re,Ce);if(!isPlainObject(_e)||!isString$1(he))return g?NOT_REOSLVED:L;let Ne=`${he}__${L}`;isEmptyObject(ae)||(Ne=`${Ne}__${JSON.stringify(ae)}`);let $e=V.get(Ne);return $e||($e=new Intl.DateTimeFormat(he,assign$1({},_e,ae)),V.set(Ne,$e)),oe?$e.formatToParts(z):$e.format(z)}const DATETIME_FORMAT_OPTIONS_KEYS=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function parseDateTimeArgs(...e){const[n,r,g,y]=e,k={};let $={},V;if(isString$1(n)){const L=n.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!L)throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT);const z=L[3]?L[3].trim().startsWith("T")?`${L[1].trim()}${L[3].trim()}`:`${L[1].trim()}T${L[3].trim()}`:L[1].trim();V=new Date(z);try{V.toISOString()}catch{throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT)}}else if(isDate(n)){if(isNaN(n.getTime()))throw createCoreError(CoreErrorCodes.INVALID_DATE_ARGUMENT);V=n}else if(isNumber(n))V=n;else throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);return isString$1(r)?k.key=r:isPlainObject(r)&&Object.keys(r).forEach(L=>{DATETIME_FORMAT_OPTIONS_KEYS.includes(L)?$[L]=r[L]:k[L]=r[L]}),isString$1(g)?k.locale=g:isPlainObject(g)&&($=g),isPlainObject(y)&&($=y),[k.key||"",V,k,$]}function clearDateTimeFormat(e,n,r){const g=e;for(const y in r){const k=`${n}__${y}`;g.__datetimeFormatters.has(k)&&g.__datetimeFormatters.delete(k)}}function number$1(e,...n){const{numberFormats:r,unresolving:g,fallbackLocale:y,onWarn:k,localeFallbacker:$}=e,{__numberFormatters:V}=e,[L,z,j,ae]=parseNumberArgs(...n),re=isBoolean(j.missingWarn)?j.missingWarn:e.missingWarn;isBoolean(j.fallbackWarn)?j.fallbackWarn:e.fallbackWarn;const oe=!!j.part,ue=isString$1(j.locale)?j.locale:e.locale,le=$(e,y,ue);if(!isString$1(L)||L==="")return new Intl.NumberFormat(ue,ae).format(z);let de={},he,_e=null;const Ce="number format";for(let xe=0;xe<le.length&&(he=le[xe],de=r[he]||{},_e=de[L],!isPlainObject(_e));xe++)handleMissing(e,L,he,re,Ce);if(!isPlainObject(_e)||!isString$1(he))return g?NOT_REOSLVED:L;let Ne=`${he}__${L}`;isEmptyObject(ae)||(Ne=`${Ne}__${JSON.stringify(ae)}`);let $e=V.get(Ne);return $e||($e=new Intl.NumberFormat(he,assign$1({},_e,ae)),V.set(Ne,$e)),oe?$e.formatToParts(z):$e.format(z)}const NUMBER_FORMAT_OPTIONS_KEYS=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function parseNumberArgs(...e){const[n,r,g,y]=e,k={};let $={};if(!isNumber(n))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const V=n;return isString$1(r)?k.key=r:isPlainObject(r)&&Object.keys(r).forEach(L=>{NUMBER_FORMAT_OPTIONS_KEYS.includes(L)?$[L]=r[L]:k[L]=r[L]}),isString$1(g)?k.locale=g:isPlainObject(g)&&($=g),isPlainObject(y)&&($=y),[k.key||"",V,k,$]}function clearNumberFormat(e,n,r){const g=e;for(const y in r){const k=`${n}__${y}`;g.__numberFormatters.has(k)&&g.__numberFormatters.delete(k)}}initFeatureFlags$1();/*!
  * vue-i18n v9.4.1
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const VERSION="9.4.1";function initFeatureFlags(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(getGlobalThis().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(getGlobalThis().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(getGlobalThis().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1)}const code$1=CoreWarnCodes.__EXTEND_POINT__,inc$1=incrementer(code$1);inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1();const code$2=CoreErrorCodes.__EXTEND_POINT__,inc=incrementer(code$2),I18nErrorCodes={UNEXPECTED_RETURN_TYPE:code$2,INVALID_ARGUMENT:inc(),MUST_BE_CALL_SETUP_TOP:inc(),NOT_INSTALLED:inc(),NOT_AVAILABLE_IN_LEGACY_MODE:inc(),REQUIRED_VALUE:inc(),INVALID_VALUE:inc(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:inc(),NOT_INSTALLED_WITH_PROVIDE:inc(),UNEXPECTED_ERROR:inc(),NOT_COMPATIBLE_LEGACY_VUE_I18N:inc(),BRIDGE_SUPPORT_VUE_2_ONLY:inc(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:inc(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:inc(),__EXTEND_POINT__:inc()};function createI18nError(e,...n){return createCompileError(e,null,void 0)}const TranslateVNodeSymbol=makeSymbol("__translateVNode"),DatetimePartsSymbol=makeSymbol("__datetimeParts"),NumberPartsSymbol=makeSymbol("__numberParts"),SetPluralRulesSymbol=makeSymbol("__setPluralRules"),InejctWithOptionSymbol=makeSymbol("__injectWithOption"),DisposeSymbol=makeSymbol("__dispose");function handleFlatJson(e){if(!isObject$1(e))return e;for(const n in e)if(hasOwn(e,n))if(!n.includes("."))isObject$1(e[n])&&handleFlatJson(e[n]);else{const r=n.split("."),g=r.length-1;let y=e,k=!1;for(let $=0;$<g;$++){if(r[$]in y||(y[r[$]]={}),!isObject$1(y[r[$]])){k=!0;break}y=y[r[$]]}k||(y[r[g]]=e[n],delete e[n]),isObject$1(y[r[g]])&&handleFlatJson(y[r[g]])}return e}function getLocaleMessages(e,n){const{messages:r,__i18n:g,messageResolver:y,flatJson:k}=n,$=isPlainObject(r)?r:isArray(g)?{}:{[e]:{}};if(isArray(g)&&g.forEach(V=>{if("locale"in V&&"resource"in V){const{locale:L,resource:z}=V;L?($[L]=$[L]||{},deepCopy(z,$[L])):deepCopy(z,$)}else isString$1(V)&&deepCopy(JSON.parse(V),$)}),y==null&&k)for(const V in $)hasOwn($,V)&&handleFlatJson($[V]);return $}const isNotObjectOrIsArray=e=>!isObject$1(e)||isArray(e);function deepCopy(e,n){if(isNotObjectOrIsArray(e)||isNotObjectOrIsArray(n))throw createI18nError(I18nErrorCodes.INVALID_VALUE);for(const r in e)hasOwn(e,r)&&(isNotObjectOrIsArray(e[r])||isNotObjectOrIsArray(n[r])?n[r]=e[r]:deepCopy(e[r],n[r]))}function getComponentOptions(e){return e.type}function adjustI18nResources(e,n,r){let g=isObject$1(n.messages)?n.messages:{};"__i18nGlobal"in r&&(g=getLocaleMessages(e.locale.value,{messages:g,__i18n:r.__i18nGlobal}));const y=Object.keys(g);y.length&&y.forEach(k=>{e.mergeLocaleMessage(k,g[k])});{if(isObject$1(n.datetimeFormats)){const k=Object.keys(n.datetimeFormats);k.length&&k.forEach($=>{e.mergeDateTimeFormat($,n.datetimeFormats[$])})}if(isObject$1(n.numberFormats)){const k=Object.keys(n.numberFormats);k.length&&k.forEach($=>{e.mergeNumberFormat($,n.numberFormats[$])})}}}function createTextNode(e){return createVNode(Text$2,null,e,0)}const DEVTOOLS_META="__INTLIFY_META__";let composerID=0;function defineCoreMissingHandler(e){return(n,r,g,y)=>e(r,g,getCurrentInstance()||void 0,y)}const getMetaInfo=()=>{const e=getCurrentInstance();let n=null;return e&&(n=getComponentOptions(e)[DEVTOOLS_META])?{[DEVTOOLS_META]:n}:null};function createComposer(e={},n){const{__root:r,__injectWithOption:g}=e,y=r===void 0;let k=isBoolean(e.inheritLocale)?e.inheritLocale:!0;const $=ref(r&&k?r.locale.value:isString$1(e.locale)?e.locale:DEFAULT_LOCALE),V=ref(r&&k?r.fallbackLocale.value:isString$1(e.fallbackLocale)||isArray(e.fallbackLocale)||isPlainObject(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:$.value),L=ref(getLocaleMessages($.value,e)),z=ref(isPlainObject(e.datetimeFormats)?e.datetimeFormats:{[$.value]:{}}),j=ref(isPlainObject(e.numberFormats)?e.numberFormats:{[$.value]:{}});let ae=r?r.missingWarn:isBoolean(e.missingWarn)||isRegExp(e.missingWarn)?e.missingWarn:!0,re=r?r.fallbackWarn:isBoolean(e.fallbackWarn)||isRegExp(e.fallbackWarn)?e.fallbackWarn:!0,oe=r?r.fallbackRoot:isBoolean(e.fallbackRoot)?e.fallbackRoot:!0,ue=!!e.fallbackFormat,le=isFunction(e.missing)?e.missing:null,de=isFunction(e.missing)?defineCoreMissingHandler(e.missing):null,he=isFunction(e.postTranslation)?e.postTranslation:null,_e=r?r.warnHtmlMessage:isBoolean(e.warnHtmlMessage)?e.warnHtmlMessage:!0,Ce=!!e.escapeParameter;const Ne=r?r.modifiers:isPlainObject(e.modifiers)?e.modifiers:{};let $e=e.pluralRules||r&&r.pluralRules,xe;xe=(()=>{y&&setFallbackContext(null);const ia={version:VERSION,locale:$.value,fallbackLocale:V.value,messages:L.value,modifiers:Ne,pluralRules:$e,missing:de===null?void 0:de,missingWarn:ae,fallbackWarn:re,fallbackFormat:ue,unresolving:!0,postTranslation:he===null?void 0:he,warnHtmlMessage:_e,escapeParameter:Ce,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};ia.datetimeFormats=z.value,ia.numberFormats=j.value,ia.__datetimeFormatters=isPlainObject(xe)?xe.__datetimeFormatters:void 0,ia.__numberFormatters=isPlainObject(xe)?xe.__numberFormatters:void 0;const ma=createCoreContext(ia);return y&&setFallbackContext(ma),ma})(),updateFallbackLocale(xe,$.value,V.value);function ze(){return[$.value,V.value,L.value,z.value,j.value]}const qe=computed({get:()=>$.value,set:ia=>{$.value=ia,xe.locale=$.value}}),Et=computed({get:()=>V.value,set:ia=>{V.value=ia,xe.fallbackLocale=V.value,updateFallbackLocale(xe,$.value,ia)}}),_n=computed(()=>L.value),Dt=computed(()=>z.value),Sn=computed(()=>j.value);function hn(){return isFunction(he)?he:null}function Vn(ia){he=ia,xe.postTranslation=ia}function Mn(){return le}function $n(ia){ia!==null&&(de=defineCoreMissingHandler(ia)),le=ia,xe.missing=de}const Nn=(ia,ma,ua,pe,Oe,Ve)=>{ze();let Ue;try{__INTLIFY_PROD_DEVTOOLS__&&setAdditionalMeta(getMetaInfo()),y||(xe.fallbackContext=r?getFallbackContext():void 0),Ue=ia(xe)}finally{__INTLIFY_PROD_DEVTOOLS__&&setAdditionalMeta(null),y||(xe.fallbackContext=void 0)}if(isNumber(Ue)&&Ue===NOT_REOSLVED){const[Pt,Lt]=ma();return r&&oe?pe(r):Oe(Pt)}else{if(Ve(Ue))return Ue;throw createI18nError(I18nErrorCodes.UNEXPECTED_RETURN_TYPE)}};function kn(...ia){return Nn(ma=>Reflect.apply(translate,null,[ma,...ia]),()=>parseTranslateArgs(...ia),"translate",ma=>Reflect.apply(ma.t,ma,[...ia]),ma=>ma,ma=>isString$1(ma))}function jn(...ia){const[ma,ua,pe]=ia;if(pe&&!isObject$1(pe))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);return kn(ma,ua,assign$1({resolvedMessage:!0},pe||{}))}function Fn(...ia){return Nn(ma=>Reflect.apply(datetime,null,[ma,...ia]),()=>parseDateTimeArgs(...ia),"datetime format",ma=>Reflect.apply(ma.d,ma,[...ia]),()=>MISSING_RESOLVE_VALUE,ma=>isString$1(ma))}function Tn(...ia){return Nn(ma=>Reflect.apply(number$1,null,[ma,...ia]),()=>parseNumberArgs(...ia),"number format",ma=>Reflect.apply(ma.n,ma,[...ia]),()=>MISSING_RESOLVE_VALUE,ma=>isString$1(ma))}function Hn(ia){return ia.map(ma=>isString$1(ma)||isNumber(ma)||isBoolean(ma)?createTextNode(String(ma)):ma)}const ca={normalize:Hn,interpolate:ia=>ia,type:"vnode"};function Zn(...ia){return Nn(ma=>{let ua;const pe=ma;try{pe.processor=ca,ua=Reflect.apply(translate,null,[pe,...ia])}finally{pe.processor=null}return ua},()=>parseTranslateArgs(...ia),"translate",ma=>ma[TranslateVNodeSymbol](...ia),ma=>[createTextNode(ma)],ma=>isArray(ma))}function Bn(...ia){return Nn(ma=>Reflect.apply(number$1,null,[ma,...ia]),()=>parseNumberArgs(...ia),"number format",ma=>ma[NumberPartsSymbol](...ia),()=>[],ma=>isString$1(ma)||isArray(ma))}function Wn(...ia){return Nn(ma=>Reflect.apply(datetime,null,[ma,...ia]),()=>parseDateTimeArgs(...ia),"datetime format",ma=>ma[DatetimePartsSymbol](...ia),()=>[],ma=>isString$1(ma)||isArray(ma))}function da(ia){$e=ia,xe.pluralRules=$e}function ga(ia,ma){const ua=isString$1(ma)?ma:$.value,pe=Gn(ua);return xe.messageResolver(pe,ia)!==null}function Ca(ia){let ma=null;const ua=fallbackWithLocaleChain(xe,V.value,$.value);for(let pe=0;pe<ua.length;pe++){const Oe=L.value[ua[pe]]||{},Ve=xe.messageResolver(Oe,ia);if(Ve!=null){ma=Ve;break}}return ma}function ra(ia){const ma=Ca(ia);return ma??(r?r.tm(ia)||{}:{})}function Gn(ia){return L.value[ia]||{}}function vn(ia,ma){L.value[ia]=ma,xe.messages=L.value}function Kn(ia,ma){L.value[ia]=L.value[ia]||{},deepCopy(ma,L.value[ia]),xe.messages=L.value}function En(ia){return z.value[ia]||{}}function kt(ia,ma){z.value[ia]=ma,xe.datetimeFormats=z.value,clearDateTimeFormat(xe,ia,ma)}function At(ia,ma){z.value[ia]=assign$1(z.value[ia]||{},ma),xe.datetimeFormats=z.value,clearDateTimeFormat(xe,ia,ma)}function Dn(ia){return j.value[ia]||{}}function Xn(ia,ma){j.value[ia]=ma,xe.numberFormats=j.value,clearNumberFormat(xe,ia,ma)}function aa(ia,ma){j.value[ia]=assign$1(j.value[ia]||{},ma),xe.numberFormats=j.value,clearNumberFormat(xe,ia,ma)}composerID++,r&&inBrowser&&(watch(r.locale,ia=>{k&&($.value=ia,xe.locale=ia,updateFallbackLocale(xe,$.value,V.value))}),watch(r.fallbackLocale,ia=>{k&&(V.value=ia,xe.fallbackLocale=ia,updateFallbackLocale(xe,$.value,V.value))}));const sa={id:composerID,locale:qe,fallbackLocale:Et,get inheritLocale(){return k},set inheritLocale(ia){k=ia,ia&&r&&($.value=r.locale.value,V.value=r.fallbackLocale.value,updateFallbackLocale(xe,$.value,V.value))},get availableLocales(){return Object.keys(L.value).sort()},messages:_n,get modifiers(){return Ne},get pluralRules(){return $e||{}},get isGlobal(){return y},get missingWarn(){return ae},set missingWarn(ia){ae=ia,xe.missingWarn=ae},get fallbackWarn(){return re},set fallbackWarn(ia){re=ia,xe.fallbackWarn=re},get fallbackRoot(){return oe},set fallbackRoot(ia){oe=ia},get fallbackFormat(){return ue},set fallbackFormat(ia){ue=ia,xe.fallbackFormat=ue},get warnHtmlMessage(){return _e},set warnHtmlMessage(ia){_e=ia,xe.warnHtmlMessage=ia},get escapeParameter(){return Ce},set escapeParameter(ia){Ce=ia,xe.escapeParameter=ia},t:kn,getLocaleMessage:Gn,setLocaleMessage:vn,mergeLocaleMessage:Kn,getPostTranslationHandler:hn,setPostTranslationHandler:Vn,getMissingHandler:Mn,setMissingHandler:$n,[SetPluralRulesSymbol]:da};return sa.datetimeFormats=Dt,sa.numberFormats=Sn,sa.rt=jn,sa.te=ga,sa.tm=ra,sa.d=Fn,sa.n=Tn,sa.getDateTimeFormat=En,sa.setDateTimeFormat=kt,sa.mergeDateTimeFormat=At,sa.getNumberFormat=Dn,sa.setNumberFormat=Xn,sa.mergeNumberFormat=aa,sa[InejctWithOptionSymbol]=g,sa[TranslateVNodeSymbol]=Zn,sa[DatetimePartsSymbol]=Wn,sa[NumberPartsSymbol]=Bn,sa}function convertComposerOptions(e){const n=isString$1(e.locale)?e.locale:DEFAULT_LOCALE,r=isString$1(e.fallbackLocale)||isArray(e.fallbackLocale)||isPlainObject(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:n,g=isFunction(e.missing)?e.missing:void 0,y=isBoolean(e.silentTranslationWarn)||isRegExp(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,k=isBoolean(e.silentFallbackWarn)||isRegExp(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,$=isBoolean(e.fallbackRoot)?e.fallbackRoot:!0,V=!!e.formatFallbackMessages,L=isPlainObject(e.modifiers)?e.modifiers:{},z=e.pluralizationRules,j=isFunction(e.postTranslation)?e.postTranslation:void 0,ae=isString$1(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,re=!!e.escapeParameterHtml,oe=isBoolean(e.sync)?e.sync:!0;let ue=e.messages;if(isPlainObject(e.sharedMessages)){const $e=e.sharedMessages;ue=Object.keys($e).reduce((Ie,ze)=>{const qe=Ie[ze]||(Ie[ze]={});return assign$1(qe,$e[ze]),Ie},ue||{})}const{__i18n:le,__root:de,__injectWithOption:he}=e,_e=e.datetimeFormats,Ce=e.numberFormats,Ne=e.flatJson;return{locale:n,fallbackLocale:r,messages:ue,flatJson:Ne,datetimeFormats:_e,numberFormats:Ce,missing:g,missingWarn:y,fallbackWarn:k,fallbackRoot:$,fallbackFormat:V,modifiers:L,pluralRules:z,postTranslation:j,warnHtmlMessage:ae,escapeParameter:re,messageResolver:e.messageResolver,inheritLocale:oe,__i18n:le,__root:de,__injectWithOption:he}}function createVueI18n(e={},n){{const r=createComposer(convertComposerOptions(e)),{__extender:g}=e,y={id:r.id,get locale(){return r.locale.value},set locale(k){r.locale.value=k},get fallbackLocale(){return r.fallbackLocale.value},set fallbackLocale(k){r.fallbackLocale.value=k},get messages(){return r.messages.value},get datetimeFormats(){return r.datetimeFormats.value},get numberFormats(){return r.numberFormats.value},get availableLocales(){return r.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(k){},get missing(){return r.getMissingHandler()},set missing(k){r.setMissingHandler(k)},get silentTranslationWarn(){return isBoolean(r.missingWarn)?!r.missingWarn:r.missingWarn},set silentTranslationWarn(k){r.missingWarn=isBoolean(k)?!k:k},get silentFallbackWarn(){return isBoolean(r.fallbackWarn)?!r.fallbackWarn:r.fallbackWarn},set silentFallbackWarn(k){r.fallbackWarn=isBoolean(k)?!k:k},get modifiers(){return r.modifiers},get formatFallbackMessages(){return r.fallbackFormat},set formatFallbackMessages(k){r.fallbackFormat=k},get postTranslation(){return r.getPostTranslationHandler()},set postTranslation(k){r.setPostTranslationHandler(k)},get sync(){return r.inheritLocale},set sync(k){r.inheritLocale=k},get warnHtmlInMessage(){return r.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(k){r.warnHtmlMessage=k!=="off"},get escapeParameterHtml(){return r.escapeParameter},set escapeParameterHtml(k){r.escapeParameter=k},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(k){},get pluralizationRules(){return r.pluralRules||{}},__composer:r,t(...k){const[$,V,L]=k,z={};let j=null,ae=null;if(!isString$1($))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const re=$;return isString$1(V)?z.locale=V:isArray(V)?j=V:isPlainObject(V)&&(ae=V),isArray(L)?j=L:isPlainObject(L)&&(ae=L),Reflect.apply(r.t,r,[re,j||ae||{},z])},rt(...k){return Reflect.apply(r.rt,r,[...k])},tc(...k){const[$,V,L]=k,z={plural:1};let j=null,ae=null;if(!isString$1($))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const re=$;return isString$1(V)?z.locale=V:isNumber(V)?z.plural=V:isArray(V)?j=V:isPlainObject(V)&&(ae=V),isString$1(L)?z.locale=L:isArray(L)?j=L:isPlainObject(L)&&(ae=L),Reflect.apply(r.t,r,[re,j||ae||{},z])},te(k,$){return r.te(k,$)},tm(k){return r.tm(k)},getLocaleMessage(k){return r.getLocaleMessage(k)},setLocaleMessage(k,$){r.setLocaleMessage(k,$)},mergeLocaleMessage(k,$){r.mergeLocaleMessage(k,$)},d(...k){return Reflect.apply(r.d,r,[...k])},getDateTimeFormat(k){return r.getDateTimeFormat(k)},setDateTimeFormat(k,$){r.setDateTimeFormat(k,$)},mergeDateTimeFormat(k,$){r.mergeDateTimeFormat(k,$)},n(...k){return Reflect.apply(r.n,r,[...k])},getNumberFormat(k){return r.getNumberFormat(k)},setNumberFormat(k,$){r.setNumberFormat(k,$)},mergeNumberFormat(k,$){r.mergeNumberFormat(k,$)},getChoiceIndex(k,$){return-1}};return y.__extender=g,y}}const baseFormatProps={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function getInterpolateArg({slots:e},n){return n.length===1&&n[0]==="default"?(e.default?e.default():[]).reduce((g,y)=>[...g,...y.type===Fragment?y.children:[y]],[]):n.reduce((r,g)=>{const y=e[g];return y&&(r[g]=y()),r},{})}function getFragmentableTag(e){return Fragment}const TranslationImpl=defineComponent({name:"i18n-t",props:assign$1({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>isNumber(e)||!isNaN(e)}},baseFormatProps),setup(e,n){const{slots:r,attrs:g}=n,y=e.i18n||useI18n({useScope:e.scope,__useComponent:!0});return()=>{const k=Object.keys(r).filter(ae=>ae!=="_"),$={};e.locale&&($.locale=e.locale),e.plural!==void 0&&($.plural=isString$1(e.plural)?+e.plural:e.plural);const V=getInterpolateArg(n,k),L=y[TranslateVNodeSymbol](e.keypath,V,$),z=assign$1({},g),j=isString$1(e.tag)||isObject$1(e.tag)?e.tag:getFragmentableTag();return h$1(j,z,L)}}}),Translation=TranslationImpl;function isVNode(e){return isArray(e)&&!isString$1(e[0])}function renderFormatter(e,n,r,g){const{slots:y,attrs:k}=n;return()=>{const $={part:!0};let V={};e.locale&&($.locale=e.locale),isString$1(e.format)?$.key=e.format:isObject$1(e.format)&&(isString$1(e.format.key)&&($.key=e.format.key),V=Object.keys(e.format).reduce((re,oe)=>r.includes(oe)?assign$1({},re,{[oe]:e.format[oe]}):re,{}));const L=g(e.value,$,V);let z=[$.key];isArray(L)?z=L.map((re,oe)=>{const ue=y[re.type],le=ue?ue({[re.type]:re.value,index:oe,parts:L}):[re.value];return isVNode(le)&&(le[0].key=`${re.type}-${oe}`),le}):isString$1(L)&&(z=[L]);const j=assign$1({},k),ae=isString$1(e.tag)||isObject$1(e.tag)?e.tag:getFragmentableTag();return h$1(ae,j,z)}}const NumberFormatImpl=defineComponent({name:"i18n-n",props:assign$1({value:{type:Number,required:!0},format:{type:[String,Object]}},baseFormatProps),setup(e,n){const r=e.i18n||useI18n({useScope:"parent",__useComponent:!0});return renderFormatter(e,n,NUMBER_FORMAT_OPTIONS_KEYS,(...g)=>r[NumberPartsSymbol](...g))}}),NumberFormat=NumberFormatImpl,DatetimeFormatImpl=defineComponent({name:"i18n-d",props:assign$1({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},baseFormatProps),setup(e,n){const r=e.i18n||useI18n({useScope:"parent",__useComponent:!0});return renderFormatter(e,n,DATETIME_FORMAT_OPTIONS_KEYS,(...g)=>r[DatetimePartsSymbol](...g))}}),DatetimeFormat=DatetimeFormatImpl;function getComposer$2(e,n){const r=e;if(e.mode==="composition")return r.__getInstance(n)||e.global;{const g=r.__getInstance(n);return g!=null?g.__composer:e.global.__composer}}function vTDirective(e){const n=$=>{const{instance:V,modifiers:L,value:z}=$;if(!V||!V.$)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const j=getComposer$2(e,V.$),ae=parseValue(z);return[Reflect.apply(j.t,j,[...makeParams(ae)]),j]};return{created:($,V)=>{const[L,z]=n(V);inBrowser&&e.global===z&&($.__i18nWatcher=watch(z.locale,()=>{V.instance&&V.instance.$forceUpdate()})),$.__composer=z,$.textContent=L},unmounted:$=>{inBrowser&&$.__i18nWatcher&&($.__i18nWatcher(),$.__i18nWatcher=void 0,delete $.__i18nWatcher),$.__composer&&($.__composer=void 0,delete $.__composer)},beforeUpdate:($,{value:V})=>{if($.__composer){const L=$.__composer,z=parseValue(V);$.textContent=Reflect.apply(L.t,L,[...makeParams(z)])}},getSSRProps:$=>{const[V]=n($);return{textContent:V}}}}function parseValue(e){if(isString$1(e))return{path:e};if(isPlainObject(e)){if(!("path"in e))throw createI18nError(I18nErrorCodes.REQUIRED_VALUE,"path");return e}else throw createI18nError(I18nErrorCodes.INVALID_VALUE)}function makeParams(e){const{path:n,locale:r,args:g,choice:y,plural:k}=e,$={},V=g||{};return isString$1(r)&&($.locale=r),isNumber(y)&&($.plural=y),isNumber(k)&&($.plural=k),[n,V,$]}function apply(e,n,...r){const g=isPlainObject(r[0])?r[0]:{},y=!!g.useI18nComponentName;(isBoolean(g.globalInstall)?g.globalInstall:!0)&&([y?"i18n":Translation.name,"I18nT"].forEach($=>e.component($,Translation)),[NumberFormat.name,"I18nN"].forEach($=>e.component($,NumberFormat)),[DatetimeFormat.name,"I18nD"].forEach($=>e.component($,DatetimeFormat))),e.directive("t",vTDirective(n))}function defineMixin(e,n,r){return{beforeCreate(){const g=getCurrentInstance();if(!g)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const y=this.$options;if(y.i18n){const k=y.i18n;if(y.__i18n&&(k.__i18n=y.__i18n),k.__root=n,this===this.$root)this.$i18n=mergeToGlobal(e,k);else{k.__injectWithOption=!0,k.__extender=r.__vueI18nExtend,this.$i18n=createVueI18n(k);const $=this.$i18n;$.__extender&&($.__disposer=$.__extender(this.$i18n))}}else if(y.__i18n)if(this===this.$root)this.$i18n=mergeToGlobal(e,y);else{this.$i18n=createVueI18n({__i18n:y.__i18n,__injectWithOption:!0,__extender:r.__vueI18nExtend,__root:n});const k=this.$i18n;k.__extender&&(k.__disposer=k.__extender(this.$i18n))}else this.$i18n=e;y.__i18nGlobal&&adjustI18nResources(n,y,y),this.$t=(...k)=>this.$i18n.t(...k),this.$rt=(...k)=>this.$i18n.rt(...k),this.$tc=(...k)=>this.$i18n.tc(...k),this.$te=(k,$)=>this.$i18n.te(k,$),this.$d=(...k)=>this.$i18n.d(...k),this.$n=(...k)=>this.$i18n.n(...k),this.$tm=k=>this.$i18n.tm(k),r.__setInstance(g,this.$i18n)},mounted(){},unmounted(){const g=getCurrentInstance();if(!g)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const y=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,y.__disposer&&(y.__disposer(),delete y.__disposer,delete y.__extender),r.__deleteInstance(g),delete this.$i18n}}}function mergeToGlobal(e,n){e.locale=n.locale||e.locale,e.fallbackLocale=n.fallbackLocale||e.fallbackLocale,e.missing=n.missing||e.missing,e.silentTranslationWarn=n.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=n.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=n.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=n.postTranslation||e.postTranslation,e.warnHtmlInMessage=n.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=n.escapeParameterHtml||e.escapeParameterHtml,e.sync=n.sync||e.sync,e.__composer[SetPluralRulesSymbol](n.pluralizationRules||e.pluralizationRules);const r=getLocaleMessages(e.locale,{messages:n.messages,__i18n:n.__i18n});return Object.keys(r).forEach(g=>e.mergeLocaleMessage(g,r[g])),n.datetimeFormats&&Object.keys(n.datetimeFormats).forEach(g=>e.mergeDateTimeFormat(g,n.datetimeFormats[g])),n.numberFormats&&Object.keys(n.numberFormats).forEach(g=>e.mergeNumberFormat(g,n.numberFormats[g])),e}const I18nInjectionKey=makeSymbol("global-vue-i18n");function createI18n(e={},n){const r=__VUE_I18N_LEGACY_API__&&isBoolean(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,g=isBoolean(e.globalInjection)?e.globalInjection:!0,y=__VUE_I18N_LEGACY_API__&&r?!!e.allowComposition:!0,k=new Map,[$,V]=createGlobal(e,r),L=makeSymbol("");function z(re){return k.get(re)||null}function j(re,oe){k.set(re,oe)}function ae(re){k.delete(re)}{const re={get mode(){return __VUE_I18N_LEGACY_API__&&r?"legacy":"composition"},get allowComposition(){return y},async install(oe,...ue){if(oe.__VUE_I18N_SYMBOL__=L,oe.provide(oe.__VUE_I18N_SYMBOL__,re),isPlainObject(ue[0])){const he=ue[0];re.__composerExtend=he.__composerExtend,re.__vueI18nExtend=he.__vueI18nExtend}let le=null;!r&&g&&(le=injectGlobalFields(oe,re.global)),__VUE_I18N_FULL_INSTALL__&&apply(oe,re,...ue),__VUE_I18N_LEGACY_API__&&r&&oe.mixin(defineMixin(V,V.__composer,re));const de=oe.unmount;oe.unmount=()=>{le&&le(),re.dispose(),de()}},get global(){return V},dispose(){$.stop()},__instances:k,__getInstance:z,__setInstance:j,__deleteInstance:ae};return re}}function useI18n(e={}){const n=getCurrentInstance();if(n==null)throw createI18nError(I18nErrorCodes.MUST_BE_CALL_SETUP_TOP);if(!n.isCE&&n.appContext.app!=null&&!n.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(I18nErrorCodes.NOT_INSTALLED);const r=getI18nInstance(n),g=getGlobalComposer(r),y=getComponentOptions(n),k=getScope$1(e,y);if(__VUE_I18N_LEGACY_API__&&r.mode==="legacy"&&!e.__useComponent){if(!r.allowComposition)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_IN_LEGACY_MODE);return useI18nForLegacy(n,k,g,e)}if(k==="global")return adjustI18nResources(g,e,y),g;if(k==="parent"){let L=getComposer(r,n,e.__useComponent);return L==null&&(L=g),L}const $=r;let V=$.__getInstance(n);if(V==null){const L=assign$1({},e);"__i18n"in y&&(L.__i18n=y.__i18n),g&&(L.__root=g),V=createComposer(L),$.__composerExtend&&(V[DisposeSymbol]=$.__composerExtend(V)),setupLifeCycle($,n,V),$.__setInstance(n,V)}return V}function createGlobal(e,n,r){const g=effectScope();{const y=__VUE_I18N_LEGACY_API__&&n?g.run(()=>createVueI18n(e)):g.run(()=>createComposer(e));if(y==null)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);return[g,y]}}function getI18nInstance(e){{const n=inject(e.isCE?I18nInjectionKey:e.appContext.app.__VUE_I18N_SYMBOL__);if(!n)throw createI18nError(e.isCE?I18nErrorCodes.NOT_INSTALLED_WITH_PROVIDE:I18nErrorCodes.UNEXPECTED_ERROR);return n}}function getScope$1(e,n){return isEmptyObject(e)?"__i18n"in n?"local":"global":e.useScope?e.useScope:"local"}function getGlobalComposer(e){return e.mode==="composition"?e.global:e.global.__composer}function getComposer(e,n,r=!1){let g=null;const y=n.root;let k=getParentComponentInstance(n,r);for(;k!=null;){const $=e;if(e.mode==="composition")g=$.__getInstance(k);else if(__VUE_I18N_LEGACY_API__){const V=$.__getInstance(k);V!=null&&(g=V.__composer,r&&g&&!g[InejctWithOptionSymbol]&&(g=null))}if(g!=null||y===k)break;k=k.parent}return g}function getParentComponentInstance(e,n=!1){return e==null?null:n&&e.vnode.ctx||e.parent}function setupLifeCycle(e,n,r){onMounted(()=>{},n),onUnmounted(()=>{const g=r;e.__deleteInstance(n);const y=g[DisposeSymbol];y&&(y(),delete g[DisposeSymbol])},n)}function useI18nForLegacy(e,n,r,g={}){const y=n==="local",k=shallowRef(null);if(y&&e.proxy&&!(e.proxy.$options.i18n||e.proxy.$options.__i18n))throw createI18nError(I18nErrorCodes.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const $=isBoolean(g.inheritLocale)?g.inheritLocale:!isString$1(g.locale),V=ref(!y||$?r.locale.value:isString$1(g.locale)?g.locale:DEFAULT_LOCALE),L=ref(!y||$?r.fallbackLocale.value:isString$1(g.fallbackLocale)||isArray(g.fallbackLocale)||isPlainObject(g.fallbackLocale)||g.fallbackLocale===!1?g.fallbackLocale:V.value),z=ref(getLocaleMessages(V.value,g)),j=ref(isPlainObject(g.datetimeFormats)?g.datetimeFormats:{[V.value]:{}}),ae=ref(isPlainObject(g.numberFormats)?g.numberFormats:{[V.value]:{}}),re=y?r.missingWarn:isBoolean(g.missingWarn)||isRegExp(g.missingWarn)?g.missingWarn:!0,oe=y?r.fallbackWarn:isBoolean(g.fallbackWarn)||isRegExp(g.fallbackWarn)?g.fallbackWarn:!0,ue=y?r.fallbackRoot:isBoolean(g.fallbackRoot)?g.fallbackRoot:!0,le=!!g.fallbackFormat,de=isFunction(g.missing)?g.missing:null,he=isFunction(g.postTranslation)?g.postTranslation:null,_e=y?r.warnHtmlMessage:isBoolean(g.warnHtmlMessage)?g.warnHtmlMessage:!0,Ce=!!g.escapeParameter,Ne=y?r.modifiers:isPlainObject(g.modifiers)?g.modifiers:{},$e=g.pluralRules||y&&r.pluralRules;function xe(){return[V.value,L.value,z.value,j.value,ae.value]}const Ie=computed({get:()=>k.value?k.value.locale.value:V.value,set:vn=>{k.value&&(k.value.locale.value=vn),V.value=vn}}),ze=computed({get:()=>k.value?k.value.fallbackLocale.value:L.value,set:vn=>{k.value&&(k.value.fallbackLocale.value=vn),L.value=vn}}),qe=computed(()=>k.value?k.value.messages.value:z.value),Et=computed(()=>j.value),_n=computed(()=>ae.value);function Dt(){return k.value?k.value.getPostTranslationHandler():he}function Sn(vn){k.value&&k.value.setPostTranslationHandler(vn)}function hn(){return k.value?k.value.getMissingHandler():de}function Vn(vn){k.value&&k.value.setMissingHandler(vn)}function Mn(vn){return xe(),vn()}function $n(...vn){return k.value?Mn(()=>Reflect.apply(k.value.t,null,[...vn])):Mn(()=>"")}function Nn(...vn){return k.value?Reflect.apply(k.value.rt,null,[...vn]):""}function kn(...vn){return k.value?Mn(()=>Reflect.apply(k.value.d,null,[...vn])):Mn(()=>"")}function jn(...vn){return k.value?Mn(()=>Reflect.apply(k.value.n,null,[...vn])):Mn(()=>"")}function Fn(vn){return k.value?k.value.tm(vn):{}}function Tn(vn,Kn){return k.value?k.value.te(vn,Kn):!1}function Hn(vn){return k.value?k.value.getLocaleMessage(vn):{}}function la(vn,Kn){k.value&&(k.value.setLocaleMessage(vn,Kn),z.value[vn]=Kn)}function ca(vn,Kn){k.value&&k.value.mergeLocaleMessage(vn,Kn)}function Zn(vn){return k.value?k.value.getDateTimeFormat(vn):{}}function Bn(vn,Kn){k.value&&(k.value.setDateTimeFormat(vn,Kn),j.value[vn]=Kn)}function Wn(vn,Kn){k.value&&k.value.mergeDateTimeFormat(vn,Kn)}function da(vn){return k.value?k.value.getNumberFormat(vn):{}}function ga(vn,Kn){k.value&&(k.value.setNumberFormat(vn,Kn),ae.value[vn]=Kn)}function Ca(vn,Kn){k.value&&k.value.mergeNumberFormat(vn,Kn)}const ra={get id(){return k.value?k.value.id:-1},locale:Ie,fallbackLocale:ze,messages:qe,datetimeFormats:Et,numberFormats:_n,get inheritLocale(){return k.value?k.value.inheritLocale:$},set inheritLocale(vn){k.value&&(k.value.inheritLocale=vn)},get availableLocales(){return k.value?k.value.availableLocales:Object.keys(z.value)},get modifiers(){return k.value?k.value.modifiers:Ne},get pluralRules(){return k.value?k.value.pluralRules:$e},get isGlobal(){return k.value?k.value.isGlobal:!1},get missingWarn(){return k.value?k.value.missingWarn:re},set missingWarn(vn){k.value&&(k.value.missingWarn=vn)},get fallbackWarn(){return k.value?k.value.fallbackWarn:oe},set fallbackWarn(vn){k.value&&(k.value.missingWarn=vn)},get fallbackRoot(){return k.value?k.value.fallbackRoot:ue},set fallbackRoot(vn){k.value&&(k.value.fallbackRoot=vn)},get fallbackFormat(){return k.value?k.value.fallbackFormat:le},set fallbackFormat(vn){k.value&&(k.value.fallbackFormat=vn)},get warnHtmlMessage(){return k.value?k.value.warnHtmlMessage:_e},set warnHtmlMessage(vn){k.value&&(k.value.warnHtmlMessage=vn)},get escapeParameter(){return k.value?k.value.escapeParameter:Ce},set escapeParameter(vn){k.value&&(k.value.escapeParameter=vn)},t:$n,getPostTranslationHandler:Dt,setPostTranslationHandler:Sn,getMissingHandler:hn,setMissingHandler:Vn,rt:Nn,d:kn,n:jn,tm:Fn,te:Tn,getLocaleMessage:Hn,setLocaleMessage:la,mergeLocaleMessage:ca,getDateTimeFormat:Zn,setDateTimeFormat:Bn,mergeDateTimeFormat:Wn,getNumberFormat:da,setNumberFormat:ga,mergeNumberFormat:Ca};function Gn(vn){vn.locale.value=V.value,vn.fallbackLocale.value=L.value,Object.keys(z.value).forEach(Kn=>{vn.mergeLocaleMessage(Kn,z.value[Kn])}),Object.keys(j.value).forEach(Kn=>{vn.mergeDateTimeFormat(Kn,j.value[Kn])}),Object.keys(ae.value).forEach(Kn=>{vn.mergeNumberFormat(Kn,ae.value[Kn])}),vn.escapeParameter=Ce,vn.fallbackFormat=le,vn.fallbackRoot=ue,vn.fallbackWarn=oe,vn.missingWarn=re,vn.warnHtmlMessage=_e}return onBeforeMount(()=>{if(e.proxy==null||e.proxy.$i18n==null)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const vn=k.value=e.proxy.$i18n.__composer;n==="global"?(V.value=vn.locale.value,L.value=vn.fallbackLocale.value,z.value=vn.messages.value,j.value=vn.datetimeFormats.value,ae.value=vn.numberFormats.value):y&&Gn(vn)}),ra}const globalExportProps=["locale","fallbackLocale","availableLocales"],globalExportMethods=["t","rt","d","n","tm","te"];function injectGlobalFields(e,n){const r=Object.create(null);return globalExportProps.forEach(y=>{const k=Object.getOwnPropertyDescriptor(n,y);if(!k)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const $=isRef(k.value)?{get(){return k.value.value},set(V){k.value.value=V}}:{get(){return k.get&&k.get()}};Object.defineProperty(r,y,$)}),e.config.globalProperties.$i18n=r,globalExportMethods.forEach(y=>{const k=Object.getOwnPropertyDescriptor(n,y);if(!k||!k.value)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${y}`,k)}),()=>{delete e.config.globalProperties.$i18n,globalExportMethods.forEach(y=>{delete e.config.globalProperties[`$${y}`]})}}initFeatureFlags();__INTLIFY_JIT_COMPILATION__?registerMessageCompiler(compile):registerMessageCompiler(compileToFunction);registerMessageResolver(resolveValue);registerLocaleFallbacker(fallbackWithLocaleChain);if(__INTLIFY_PROD_DEVTOOLS__){const e=getGlobalThis();e.__INTLIFY__=!0,setDevToolsHook(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const head_data=ref({majorVersion:1,minorVersion:0,fontRevision:65536,flags:[!0,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],created:{timestamp:Math.floor(Date.now()/1e3)+2082844800,value:Date.now()},modified:{timestamp:Math.floor(Date.now()/1e3)+2082844800,value:Date.now()},macStyle:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],lowestRecPPEM:7,fontDirectionHint:2}),hhea_data=ref({majorVersion:1,minorVersion:0,lineGap:0,caretSlopeRise:1,caretSlopeRun:0,caretOffset:0}),getEnName=e=>{let n=e;return hasChineseChar(e)&&(n=dist$1.convertToPinyin(e)),n},name_data=ref([]),os2_data=ref({version:5,usWeightClass:400,usWidthClass:5,fsType:0,ySubscriptXSize:650,ySubscriptYSize:699,ySubscriptXOffset:0,ySubscriptYOffset:140,ySuperscriptXSize:650,ySuperscriptYSize:699,ySuperscriptXOffset:0,ySuperscriptYOffset:479,yStrikeoutSize:49,yStrikeoutPosition:258,sFamilyClass:0,panose:[0,0,0,0,0,0,0,0,0,0],achVendID:"UKWN",fsSelection:[!1,!1,!1,!1,!1,!1,!0,!1,!1,!1],usMaxContext:0,usLowerOpticalPointSize:8,usUpperOpticalPointSize:72}),post_data=ref({version:196608,italicAngle:0,underlinePosition:0,underlineThickness:0,isFixedPitch:1,minMemType42:0,maxMemType42:0,minMemType1:0,maxMemType1:0}),metrics_data=ref({advanceWidth:1e3,lsb:0,rsb:0,xMin:0,yMin:0,xMax:1e3,yMax:1e3}),_hoisted_1$1b={class:"dialog-footer"},_sfc_main$1c=defineComponent({__name:"CreateFileDialog",setup(e){const{tm:n,t:r}=useI18n(),g=ref("untitled"),y=ref(1e3),k=ref(800),$=ref(-200),V=ref(!0),L=async()=>{name_data.value=[{nameID:1,nameLabel:"fontFamily",platformID:3,encodingID:1,langID:2052,value:g.value,default:!0},{nameID:1,nameLabel:"fontFamily",platformID:3,encodingID:1,langID:1033,value:g.value,default:!0},{nameID:2,nameLabel:"fontSubfamily",platformID:3,encodingID:1,langID:2052,value:"",default:!0},{nameID:2,nameLabel:"fontSubfamily",platformID:3,encodingID:1,langID:1033,value:"Regular",default:!0},{nameID:4,nameLabel:"fullName",platformID:3,encodingID:1,langID:2052,value:g.value+" ",default:!0},{nameID:4,nameLabel:"fullName",platformID:3,encodingID:1,langID:1033,value:g.value+" Regular",default:!0},{nameID:5,nameLabel:"version",platformID:3,encodingID:1,langID:2052,value:"Version 1.0",default:!0},{nameID:5,nameLabel:"version",platformID:3,encodingID:1,langID:1033,value:"Version 1.0",default:!0},{nameID:6,nameLabel:"postScriptName",platformID:3,encodingID:1,langID:2052,value:(getEnName(g.value)+"-Regular").replace(/\s/g,"").slice(0,63),default:!0},{nameID:6,nameLabel:"postScriptName",platformID:3,encodingID:1,langID:1033,value:(getEnName(g.value)+"-Regular").replace(/\s/g,"").slice(0,63),default:!0}];const ue={uuid:genUUID(),width:y.value,height:y.value,name:g.value,saved:!1,characterList:[],iconsCount:0,fontSettings:{unitsPerEm:y.value,ascender:k.value,descender:$.value,tables:{head:head_data.value,hhea:hhea_data.value,os2:os2_data.value,name:name_data.value,post:post_data.value}}},le=genUUID(),de={uuid:le,type:"text",character:{uuid:genUUID(),text:".notdef",unicode:"0",components:[]},components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},info:{gridSettings:{dx:0,dy:0,centerSquareSize:y.value/3,size:y.value,default:!0},useSkeletonGrid:!1,layout:"",layoutTree:[],metrics:{advanceWidth:Math.max(y.value,y.value),lsb:0}},script:`function script_${le.replaceAll("-","_")} (character, constants, FP) {
	//Todo something
}`};ue.characterList.push(de),addFile(ue),setSelectedFileUUID(ue.uuid),setEditStatus(Status.CharacterList),loading$1.value=!0,loaded$1.value=0,total$1.value=V.value?strokes.length+20:0,router.currentRoute.value.name==="welcome"&&router.push("/editor"),setCreateFileDialogVisible(!1),V.value?await j():loading$1.value=!1},z=()=>{constants.value=[{uuid:genUUID(),name:"",type:ParameterType.Enum,value:2,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]},{uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:0,max:2},{uuid:genUUID(),name:"",type:ParameterType.Enum,value:1,options:[{value:0,label:""},{value:1,label:""}]},{uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:1,max:2},{uuid:genUUID(),name:"",type:ParameterType.Number,value:0,min:0,max:2},{uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:0,max:2},{uuid:genUUID(),name:"",type:ParameterType.Number,value:50,min:40,max:100}],constantsMap.update(constants.value)},j=async()=>{z(),await importTemplate2();const ue=await fetch(base$1+"/templates/playground.json"),de=JSON.parse(await ue.text()).file;clearCharacterRenderList();const he=selectedFile.value.characterList.find(_e=>_e.character.text===".notdef");selectedFile.value.characterList=[],he&&(selectedFile.value.characterList.push(he),addCharacterTemplate(generateCharacterTemplate(he)));for(let _e=0;_e<de.characterList.length;_e++){loaded$1.value+=1;const Ce=de.characterList[_e];for(let $e=0;$e<Ce.components.length;$e++){const xe=Ce.components[$e];xe.type==="glyph"&&xe.value.parameters.forEach(ze=>{const qe=constants.value.find(Et=>Et.name===ze.name);qe&&(ze.type=ParameterType.Constant,ze.value=qe.uuid)})}const Ne=instanceCharacter(Ce);addCharacterForCurrentFile(Ne),addCharacterTemplate(generateCharacterTemplate(Ne))}emitter.emit("renderPreviewCanvas"),loading$1.value=!1},ae=()=>{setCreateFileDialogVisible(!1)},re=()=>{$.value=k.value-y.value},oe=()=>{k.value=y.value+$.value};return(ue,le)=>{const de=resolveComponent("el-input"),he=resolveComponent("el-form-item"),_e=resolveComponent("el-input-number"),Ce=resolveComponent("el-checkbox"),Ne=resolveComponent("el-form"),$e=resolveComponent("el-button"),xe=resolveComponent("el-dialog");return openBlock(),createBlock(xe,{"model-value":unref(createFileDialogVisible),class:"create-file-dialog",title:unref(n)("dialogs.addFileDialog.title"),width:"320px","before-close":ae},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_1$1b,[createVNode($e,{onPointerdown:le[5]||(le[5]=Ie=>unref(setCreateFileDialogVisible)(!1))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.addFileDialog.cancel")),1)]),_:1}),createVNode($e,{type:"primary",onPointerdown:le[6]||(le[6]=()=>L())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.addFileDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createVNode(Ne,{class:"create-file-form","label-width":"80px"},{default:withCtx(()=>[createVNode(he,{label:unref(n)("dialogs.addFileDialog.fontName")},{default:withCtx(()=>[createVNode(de,{modelValue:g.value,"onUpdate:modelValue":le[0]||(le[0]=Ie=>g.value=Ie)},null,8,["modelValue"])]),_:1},8,["label"]),createVNode(he,{label:"unitsPerEm"},{default:withCtx(()=>[createVNode(_e,{modelValue:y.value,"onUpdate:modelValue":le[1]||(le[1]=Ie=>y.value=Ie),precision:0,disabled:"true"},null,8,["modelValue"])]),_:1}),createVNode(he,{label:"ascender"},{default:withCtx(()=>[createVNode(_e,{modelValue:k.value,"onUpdate:modelValue":le[2]||(le[2]=Ie=>k.value=Ie),precision:0,onChange:re,disabled:"true"},null,8,["modelValue"])]),_:1}),createVNode(he,{label:"descender"},{default:withCtx(()=>[createVNode(_e,{modelValue:$.value,"onUpdate:modelValue":le[3]||(le[3]=Ie=>$.value=Ie),precision:0,onChange:oe,disabled:"true"},null,8,["modelValue"])]),_:1}),createVNode(he,{"label-width":0,class:"use-default-template-form-item"},{default:withCtx(()=>[createVNode(Ce,{modelValue:V.value,"onUpdate:modelValue":le[4]||(le[4]=Ie=>V.value=Ie)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.addFileDialog.useDefaultTemplate")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value","title"])}}}),_hoisted_1$1a={class:"form-wrapper"},_hoisted_2$17={class:"dialog-footer"},_sfc_main$1b=defineComponent({__name:"LanguageSettingsDialog",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=ref(g.value),k=()=>{setLanguageSettingsDialogVisible(!1)},$=()=>{g.value=y.value,setLanguageSettingsDialogVisible(!1)},V=[{value:"zh",label:""},{value:"en",label:"English"}];return(L,z)=>{const j=resolveComponent("el-option"),ae=resolveComponent("el-select"),re=resolveComponent("el-form-item"),oe=resolveComponent("el-form"),ue=resolveComponent("el-button"),le=resolveComponent("el-dialog");return openBlock(),createBlock(le,{modelValue:unref(languageSettingsDialogVisible),"onUpdate:modelValue":z[1]||(z[1]=de=>isRef(languageSettingsDialogVisible)?languageSettingsDialogVisible.value=de:null),title:unref(n)("dialogs.languageSettingsDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$17,[createVNode(ue,{onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.languageSettingsDialog.cancel")),1)]),_:1}),createVNode(ue,{type:"primary",onPointerdown:$},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.languageSettingsDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1a,[createVNode(oe,{"label-width":"80px"},{default:withCtx(()=>[createVNode(re,{label:unref(n)("dialogs.languageSettingsDialog.label")},{default:withCtx(()=>[createVNode(ae,{modelValue:y.value,"onUpdate:modelValue":z[0]||(z[0]=de=>y.value=de),class:"edit-filter-select",placeholder:unref(n)("dialogs.languageSettingsDialog.label")},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(V,de=>createVNode(j,{key:de.value,label:de.label,value:de.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})])]),_:1},8,["modelValue","title"])}}}),_withScopeId$d=e=>(pushScopeId("data-v-95be10b9"),e=e(),popScopeId(),e),_hoisted_1$19={class:"el-loading-spinner"},_hoisted_2$16=_withScopeId$d(()=>createBaseVNode("svg",{class:"circular",viewBox:"0 0 50 50"},[createBaseVNode("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})],-1)),_hoisted_3$I={class:"loading-text"},_hoisted_4$F={class:"main-panel"},_hoisted_5$z={class:"items-wrapper"},_hoisted_6$w={class:"item-icon"},_hoisted_7$t={class:"item-name"},_hoisted_8$s={class:"description"},_hoisted_9$s={class:"item-icon"},_hoisted_10$q={class:"item-name"},_hoisted_11$p={class:"description"},_hoisted_12$n={class:"item-icon"},_hoisted_13$l={class:"item-name"},_hoisted_14$l={class:"description"},_hoisted_15$h={class:"item-icon"},_hoisted_16$f={class:"item-name"},_hoisted_17$d={class:"description"},_hoisted_18$b={class:"item-icon playground-icon"},_hoisted_19$b={class:"playground-main"},_hoisted_20$b={class:"playground-text"},_hoisted_21$b={class:"playground-description"},_hoisted_22$9={class:"language-settings"},svg$3=`
    <path class="path" d="" style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>
  `,_sfc_main$1a=defineComponent({__name:"Welcome",setup(e){const{t:n,locale:r}=useI18n();return onMounted(async()=>{await initGlyphEnvironment()}),(g,y)=>{const k=resolveComponent("el-progress"),$=resolveComponent("el-icon"),V=resolveComponent("font-awesome-icon"),L=resolveDirective("loading");return withDirectives((openBlock(),createElementBlock("div",{class:"welcome","element-loading-text":"","element-loading-spinner":svg$3,"element-loading-svg-view-box":"-10, -10, 50, 50","element-loading-background":"rgba(122, 122, 122, 0.8)"},[withDirectives(createBaseVNode("div",_hoisted_1$19,[_hoisted_2$16,createBaseVNode("div",null,toDisplayString$1(unref(loadingMsg)||unref(n)("panels.paramsPanel.loadingMsg")),1)],512),[[vShow,unref(loading$1)&&unref(total$1)===0]]),withDirectives(createBaseVNode("div",_hoisted_3$I,[createVNode(k,{"text-inside":!0,"stroke-width":20,percentage:Math.round(unref(loaded$1)/unref(total$1)*100)},null,8,["percentage"]),createBaseVNode("div",null,toDisplayString$1(unref(loadingMsg)?unref(loadingMsg)+`${Math.round(unref(loaded$1)/unref(total$1)*100)}%`:unref(n)("panels.paramsPanel.loadedMsg",{percent:Math.round(unref(loaded$1)/unref(total$1)*100)})),1)],512),[[vShow,unref(loading$1)&&unref(total$1)!=0]]),createBaseVNode("div",_hoisted_4$F,[createBaseVNode("div",_hoisted_5$z,[createBaseVNode("div",{class:"item new-project-item",onPointerdown:y[0]||(y[0]=(...z)=>unref(createFile)&&unref(createFile)(...z))},[createBaseVNode("div",_hoisted_6$w,[createVNode($,null,{default:withCtx(()=>[createVNode(unref(document_add_default))]),_:1})]),createBaseVNode("div",_hoisted_7$t,toDisplayString$1(unref(n)("welcome.new.name")),1),createBaseVNode("div",_hoisted_8$s,toDisplayString$1(unref(n)("welcome.new.description")),1)],32),createBaseVNode("div",{class:"item open-project-item",onPointerdown:y[1]||(y[1]=(...z)=>unref(openFile)&&unref(openFile)(...z))},[createBaseVNode("div",_hoisted_9$s,[createVNode($,null,{default:withCtx(()=>[createVNode(unref(folder_opened_default))]),_:1})]),createBaseVNode("div",_hoisted_10$q,toDisplayString$1(unref(n)("welcome.open.name")),1),createBaseVNode("div",_hoisted_11$p,toDisplayString$1(unref(n)("welcome.open.description")),1)],32),createBaseVNode("div",{class:"item import-font-item",onPointerdown:y[2]||(y[2]=(...z)=>unref(importFont)&&unref(importFont)(...z))},[createBaseVNode("div",_hoisted_12$n,[createVNode($,null,{default:withCtx(()=>[createVNode(unref(files_default))]),_:1})]),createBaseVNode("div",_hoisted_13$l,toDisplayString$1(unref(n)("welcome.import.name")),1),createBaseVNode("div",_hoisted_14$l,toDisplayString$1(unref(n)("welcome.import.description")),1)],32),createBaseVNode("div",{class:"item template-item",onPointerdown:y[3]||(y[3]=(...z)=>unref(importTemplate1)&&unref(importTemplate1)(...z))},[createBaseVNode("div",_hoisted_15$h,[createVNode($,null,{default:withCtx(()=>[createVNode(unref(switch_default))]),_:1})]),createBaseVNode("div",_hoisted_16$f,toDisplayString$1(unref(n)("welcome.template.name")),1),createBaseVNode("div",_hoisted_17$d,toDisplayString$1(unref(n)("welcome.template.description")),1)],32)]),createBaseVNode("div",{class:"playground-btn",onClick:y[4]||(y[4]=(...z)=>unref(openPlayground)&&unref(openPlayground)(...z))},[createBaseVNode("div",_hoisted_18$b,[createVNode($,null,{default:withCtx(()=>[createVNode(V,{icon:"fa-solid fa-gamepad"})]),_:1})]),createBaseVNode("div",_hoisted_19$b,[createBaseVNode("div",_hoisted_20$b,toDisplayString$1(unref(n)("welcome.playground.title")),1),createBaseVNode("div",_hoisted_21$b,toDisplayString$1(unref(n)("welcome.playground.description")),1)])])]),createBaseVNode("div",_hoisted_22$9,[createBaseVNode("div",{class:normalizeClass(["language-choice-item",{selected:unref(r)==="zh"}]),onClick:y[5]||(y[5]=z=>r.value="zh")},"",2),createBaseVNode("div",{class:normalizeClass(["language-choice-item",{selected:unref(r)==="en"}]),onClick:y[6]||(y[6]=z=>r.value="en")},"English",2)]),createVNode(_sfc_main$1c),createVNode(_sfc_main$1b)])),[[L,unref(loading$1)]])}}}),_export_sfc=(e,n)=>{const r=e.__vccOpts||e;for(const[g,y]of n)r[g]=y;return r},Welcome=_export_sfc(_sfc_main$1a,[["__scopeId","data-v-95be10b9"]]),dialogs={zh:{tipsDialog:{title:"",confirm:"",cancel:"",tip1:"",tip2:""},exportDialog:{title:"",confirm:"",cancel:""},exportFontDialog:{title:"",confirm:"",cancel:"",exportMsg:""},saveDialog:{title:"",confirm:"",cancel:""},saveAsDialog:{title:"",confirm:"",cancel:""},addIconDialog:{title:"",iconName:"",confirm:"",cancel:""},addTextDialog:{title:"",confirm:"",cancel:""},addGlyphDialog:{title:"",glyphName:"",confirm:"",cancel:""},editGlyphDialog:{title:"",glyphName:"",confirm:"",cancel:""},editCharacterDialog:{title:"",glyphName:"",confirm:"",cancel:""},copyGlyphDialog:{title:"",glyphName:"",confirm:"",cancel:""},copyCharacterDialog:{title:"",characterName:"",confirm:"",cancel:""},glyphComponentDialog:{title:"",confirm:"",cancel:"",multiSelection:"",singleSelection:""},addFileDialog:{title:"",fontName:"",cancel:"",confirm:"",useDefaultTemplate:""},fontSettingsDialog:{title:"",fontName:"",cancel:"",confirm:"",nameTableTip:"name",addItem:"",moreSettings:""},preferenceDialog:{title:"",background:{background:"",style:"",color:"",transparent:""},mesh:{mesh:"",style:"",none:"",mi:"",precision:"",layout:""},render:{render:"",style:"",contour:"",color:""},cancel:"",confirm:""},languageSettingsDialog:{title:"",label:"",cancel:"",confirm:""},importTemplatesDialog:{title:"",cancel:"",confirm:""},selectGlobalParamDialog:{title:"",cancel:"",confirm:"",globalParam:""},setAsGlobalParamDialog:{title:"",cancel:"",confirm:"",paramName:""}},en:{tipsDialog:{title:"Tips",confirm:"Confirm",cancel:"Cancel",tip1:"Closing the file will result in the loss of unsaved data. Are you sure you want to close?",tip2:"Saving the project file on the web will store the project in the browser's local cache and not in the cloud. If the user clears the local cache, the project data will be deleted. Are you sure you want to save the project in the cache?"},exportDialog:{title:"Export Project",confirm:"Confirm",cancel:"Cancel",exportMsg:"Please select items included in exported file:"},exportFontDialog:{title:"Export Font",confirm:"Confirm",cancel:"Cancel"},saveDialog:{title:"Save Project",confirm:"Confirm",cancel:"Cancel"},saveAsDialog:{title:"Save As Project",confirm:"Confirm",cancel:"Cancel"},addIconDialog:{title:"Add Icon",iconName:"Icon Name",confirm:"Confirm",cancel:"Cancel"},addTextDialog:{title:"Add Character",confirm:"Confirm",cancel:"Cancel"},addGlyphDialog:{title:"Add Glyph",glyphName:"Glyph Name",confirm:"Confirm",cancel:"Cancel"},editGlyphDialog:{title:"Edit Glyph Name",glyphName:"Glyph Name",confirm:"Confirm",cancel:"Cancel"},editCharacterDialog:{title:"Edit Character",glyphName:"Character",confirm:"Confirm",cancel:"Cancel"},copyGlyphDialog:{title:"Copy Glyph",glyphName:"Glyph Name",confirm:"Confirm",cancel:"Cancel"},copyCharacterDialog:{title:"Copy Character",characterName:"New Character",confirm:"Confirm",cancel:"Cancel"},glyphComponentDialog:{title:"Add Glyph Component",confirm:"Confirm",cancel:"Cancel",multiSelection:"Multiple-Select",singleSelection:"Single-Select"},addFileDialog:{title:"New Font",fontName:"Font Name",cancel:"Cancel",confirm:"Confirm",useDefaultTemplate:"Import Default Template"},fontSettingsDialog:{title:"Font Settings",fontName:"Font Name",cancel:"Cancel",confirm:"Confirm",nameTableTip:"The name table defines font-related string information for different language environments.",addItem:"Add Item",moreSettings:"More Settings"},preferenceDialog:{title:"Preference",background:{background:"Background",style:"Style",color:"Color",transparent:"Transparent"},mesh:{mesh:"Mesh",style:"Style",none:"None",mi:"Mi",precision:"Pricision",layout:"Layout"},render:{render:"Render",style:"Style",contour:"Contour",color:"Color"},cancel:"Cancel",confirm:"Confirm"},languageSettingsDialog:{title:"Language Settings",label:"Language",cancel:"Cancel",confirm:"Confirm"},importTemplatesDialog:{title:"Import Templates",cancel:"Cancel",confirm:"Confirm"},selectGlobalParamDialog:{title:"Select Global Parameter",cancel:"Cancel",confirm:"Confirm",globalParam:"Global Parameter"},setAsGlobalParamDialog:{title:"Set As Global Parameter",cancel:"Cancel",confirm:"Confirm",paramName:"Parameter Name"}}},panels={zh:{filter:{all:"",font:""},view:"",componentList:{menu:{cut:"",copy:"",paste:"",delete:""}},viewList:{thumbnail:{title:"",description:""},bitmap:{title:"",description:""},contours:{title:"",description:""},curves:{title:"",description:""},preview:{title:"",description:""}},paramsPanel:{componentName:{title:"",label:""},transform:{title:"",x:"X",y:"Y",w:"W",h:"H",rotation:"",flipX:"",flipY:""},opacity:{title:"",opacity:""},editMode:{title:"",label:""},transformToCurve:{title:"",label:""},layout:{title:"",add:"",modify:"",type:"",null:"",rect:""},params:{title:""},joints:{title:""},layoutEditing:"",interactive:"",draggable:"",draggableOption:"",dragOption:"",dragOptionNone:"",dragOptionDefault:"",dragOptionLayout:"",globalParam:"",cancelGlobalParam:"",setAsGlobalParam:"",selectGlobalParam:"",updateGlobalParam:"",applyGridTransform:"",resetGridTransform:"",applyMetricsTransform:"",resetMetricsTransform:"",loadingMsg:"",loadedMsg:"{percent}%"},picEditPanel:{cancel:"",confirm:"",remove:"",reset:"",edit:"",step1:{title:"",tip:"",localBrush:"",brush:""},step2:{title:"",content:""},step3:{title:"",maxError:"",dropThresholding:""},step4:{title:"",content:""}},settingsPanel:{background:{background:"",style:"",color:"",transparent:""},mesh:{mesh:"",style:"",none:"",mi:"",precision:"",layout:""},render:{render:"",style:"",contour:"",color:""}},bottomBar:{reset:"",coords:""}},en:{filter:{all:"All Componnents",font:"Font COmponnents"},view:"View",componentList:{menu:{cut:"Cut",copy:"Copy",paste:"Paste",delete:"Delete"}},viewList:{thumbnail:{title:"Picture Thumbnail",description:"Thumbnail of original picture"},bitmap:{title:"Bitmap",description:"Bitmap picture after thresholding processing"},contours:{title:"Contours",description:"Contours extracted from picture"},curves:{title:"Curves",description:"Curves fitted from contours"},preview:{title:"Preview",description:"Components preview"}},paramsPanel:{componentName:{title:"Component Name",label:"Name"},transform:{title:"Transform",x:"X",y:"Y",w:"W",h:"H",rotation:"Rotation",flipX:"flipX",flipY:"flipY"},opacity:{title:"Style",opacity:"Opacity"},editMode:{title:"Edit Mode",label:"Open"},transformToCurve:{title:"Transform To Pen Curve",label:"Confirm to transform"},layout:{title:"Layout",add:"Add Layout",modify:"Modify Layout",type:"Type",null:"Empty Layout",rect:"Rect Layout"},params:{title:"Parameters"},joints:{title:"Key Points"},layoutEditing:"Layout Editing",interactive:"Interactive Settings",draggable:"Draggable",draggableOption:"Option",dragOption:"Reference",dragOptionNone:"None",dragOptionDefault:"Default Punctuation",dragOptionLayout:"Layout Proportion",globalParam:"Global Parameter",cancelGlobalParam:"Clear Global Parameter",setAsGlobalParam:"Set as Global Parameter",selectGlobalParam:"Select Global Parameter",updateGlobalParam:"Update Global Parameter",applyGridTransform:"Apply Grid Transform",resetGridTransform:"Reset Grid Transform",applyMetricsTransform:"Apply Metrics Transform",resetMetricsTransform:"Reset Metrics Transform",loadingMsg:"Loading, please wait...",loadedMsg:"Loading in progress ({percent}% completed)"},picEditPanel:{cancel:"Cancel",confirm:"Confirm",remove:"Delete",reset:"Reset",edit:"Edit",step1:{title:"Step 1: Bitmap Thresholding",tip:"The effect is poor? Try",localBrush:"Local Brush",brush:"Brush"},step2:{title:"Step 2: Extract Contours",content:"Extract contours accordding to step 1's result"},step3:{title:"Step 3: Fit Curve",maxError:"Smoothing",dropThresholding:"Filter"},step4:{title:"Step 4: Fill Color",content:"Auto-fill with black color"}},settingsPanel:{background:{background:"Background",style:"Style",color:"Color",transparent:"Transparent"},mesh:{mesh:"Mesh",style:"Style",none:"None",mi:"Mi",precision:"Pricision",layout:"Layout"},render:{render:"Render",style:"Style",contour:"Contour",color:"Color"}},bottomBar:{reset:"Reset",coords:"Coords"}}},menus={zh:{app:"",about:"",file:{file:"",new:"",open:"",save:"",saveas:"",clear:"",export:"",sync_data:""},edit:{edit:"",undo:"",redo:"",cut:"",copy:"",paste:"",delete:""},import:{import:"",font:"",glyph:"",picture:"",svg:"SVG"},export:{export:"",font:"",glyph:"",jpeg:"JPEG",png:"PNG",svg:"SVG"},char:{char:"",character:"",icon:""},settings:{settings:"",font:"",preference:"",language:""},templates:{templates:"",test1:"1",test2:"",test3:"",test4:"test style 1"},tools:{remove_overlap:""}},en:{app:"FontPlayer",about:"about",file:{file:"File",new:"New File",open:"Open File",save:"Save",saveas:"Save As",clear:"Clear Cache",export:"Export Project",sync_data:"Sync Data"},edit:{edit:"Edit",undo:"Undo",redo:"Redo",cut:"Cut",copy:"Copy",paste:"Paste",delete:"Delete"},import:{import:"Import",font:"Import Font",glyph:"Import Glyph",picture:"Import From Picture",svg:"Import SVG"},export:{export:"Export",font:"Export Font",glyph:"Export Glyph",jpeg:"Export JPEG",png:"Export PNG",svg:"Export SVG"},char:{char:"Char And Icon",character:"Add Character",icon:"Add Icon"},settings:{settings:"Settings",font:"Font Settings",preference:"Preference",language:"Language"},templates:{templates:"Templates",test1:"template 1",test2:"template 2",test3:"template 3",test4:"template 4"},tools:{remove_overlap:"remove_overlap"}}},welcome={zh:{new:{name:"",description:"web"},open:{name:"",description:"web"},import:{name:"",description:"web"},sync:{name:"",description:"web"},template:{name:"",description:""},playground:{title:"",description:""}},en:{new:{name:"New Project",description:"Create new font (or web font) project"},open:{name:"Open Project",description:"Open existed font (or web font) project"},import:{name:"Import Font",description:"Import font as project"},sync:{name:"Sync Cache",description:"Sync cache"},template:{name:"Import Template",description:"Import template that FontPlayer provides for testing"},playground:{title:"Playground",description:"Quickly create a mini font library through parameterization"}}},programming={zh:{"global-constants":"","glyph-parameters":"","glyph-layout":"","new-constant":"","new-parameter":"",joint:"",refline:"",constant:"",number:"",ring:"",widget:"",controlType:"",type:"",value:"",character:"",glyph:"",radical:"",comp:"",glyph_comp:"",stroke:"",reset:"",execute:"",script:"",charCounts:"",strokeCounts:"",radicalCounts:"",compCounts:"",glyphCompCounts:""},en:{"global-constants":"Global Constants","glyph-parameters":"Glyph Parameters","glyph-layout":"Glyph Layout","new-constant":"New Constant","new-parameter":"New Parameter",joint:"Joint",refline:"Ref Line",constants:"const",number:"number",ring:"RingController",widget:"Widget",controlType:"Control Type",type:"Type",value:"value",character:"Character",glyph:"Glyph",radical:"Radical",comp:"Glyph",glyph_comp:"Component",stroke:"Stroke",reset:"Reset",execute:"Execute",script:"Script",charCounts:"Character",strokeCounts:"Stroke",radicalCounts:"Radical",compCounts:"Glyph",glyphCompCounts:"Components"}},messages={zh:{menus:menus.zh,dialogs:dialogs.zh,panels:panels.zh,welcome:welcome.zh,programming:programming.zh},en:{menus:menus.en,dialogs:dialogs.en,panels:panels.en,welcome:welcome.en,programming:programming.en}},i18nOptions={locale:"zh",fallbackLocale:"en",allowComposition:!0,messages},i18n=createI18n(i18nOptions),{tm}=i18n.global,web_menu=[{label:tm("menus.file.file"),key:"file",submenu:[{label:tm("menus.file.new"),key:"create-file",click:e=>{e["create-file"]()}},{label:tm("menus.file.open"),key:"open-file",click:e=>{e["open-file"]()}},{label:tm("menus.file.save"),key:"save-file",click:e=>{e["save-file"]()}},{label:tm("menus.file.clear"),key:"clear-cache",click:e=>{e["clear-cache"]()}},{label:tm("menus.file.sync_data"),key:"sync-data",click:e=>{e["sync-data"]()}},{label:tm("menus.file.export"),key:"save-as-json",click:e=>{e["save-as-json"]()}}]},{label:tm("menus.edit.edit"),key:"edit",submenu:[{label:tm("menus.edit.undo"),key:"undo",click:e=>{e.undo()}},{label:tm("menus.edit.redo"),key:"redo",click:e=>{e.redo()}},{label:tm("menus.edit.cut"),key:"cut",click:e=>{e.cut()}},{label:tm("menus.edit.copy"),key:"copy",click:e=>{e.copy()}},{label:tm("menus.edit.paste"),key:"paste",click:e=>{e.paste()}},{label:tm("menus.edit.delete"),key:"delete",click:e=>{e.delete()}}]},{label:tm("menus.import.import"),key:"import",submenu:[{label:tm("menus.import.font"),key:"import-font-file",click:e=>{e["import-font-file"]()}},{label:tm("menus.import.glyph"),key:"import-glyphs",click:e=>{e["import-glyphs"]()}},{label:tm("menus.import.picture"),key:"import-pic",click:e=>{e["import-pic"]()}},{label:tm("menus.import.svg"),key:"import-svg",click:e=>{e["import-svg"]()}}]},{label:tm("menus.export.export"),key:"export",submenu:[{label:tm("menus.export.font"),key:"export-font-file",click:e=>{e["export-font-file"]()}},{label:tm("menus.export.glyph"),key:"export-glyphs",click:e=>{e["export-glyphs"]()}},{label:tm("menus.export.jpeg"),key:"export-jpeg",click:e=>{e["export-jpeg"]()}},{label:tm("menus.export.png"),key:"export-png",click:e=>{e["export-png"]()}},{label:tm("menus.export.svg"),key:"export-svg",click:e=>{e["export-svg"]()}}]},{label:tm("menus.char.char"),key:"character",submenu:[{label:tm("menus.char.character"),key:"add-character",click:e=>{e["add-character"]()}},{label:tm("menus.char.icon"),key:"add-icon",click:e=>{e["add-icon"]()}}]},{label:tm("menus.settings.settings"),key:"settings",submenu:[{label:tm("menus.settings.font"),key:"font-settings",click:e=>{e["font-settings"]()}},{label:tm("menus.settings.preference"),key:"preference-settings",click:e=>{e["preference-settings"]()}},{label:tm("menus.settings.language"),key:"language-settings",click:e=>{e["language-settings"]()}}]},{label:tm("menus.templates.templates"),key:"templates",submenu:[{label:tm("menus.templates.test1"),key:"template-1",click:e=>{e["template-1"]()}},{label:tm("menus.templates.test2"),key:"template-2",click:e=>{e["template-2"]()}},{label:tm("menus.templates.test3"),key:"template-3",click:e=>{e["template-3"]()}},{label:tm("menus.templates.test4"),key:"template-4",click:e=>{e["template-4"]()}}]},{label:tm("menus.tools.tools"),key:"tools",submenu:[{label:tm("menus.tools.remove_overlap"),key:"remove_overlap",click:e=>{e.remove_overlap()}}]}],traverse_web_menu=(e,n)=>n.map(g=>{const y={};y.label=g.label,y.key=g.key,g.click&&(y.click=()=>{g&&g.click&&g.click(e)});const k=g.submenu?traverse_web_menu(e,g.submenu):null;return g.submenu&&(y.submenu=k),y}),_hoisted_1$18={key:0,class:"side-bar"},_sfc_main$19=defineComponent({__name:"SideBar",setup(e){const n=()=>!0,r=()=>editStatus.value===Status.Edit||editStatus.value===Status.Glyph,g=()=>editStatus.value===Status.CharacterList||editStatus.value===Status.GlyphList||editStatus.value===Status.StrokeGlyphList||editStatus.value===Status.RadicalGlyphList||editStatus.value===Status.CompGlyphList,y=()=>editStatus.value!==Status.Edit&&editStatus.value!==Status.Glyph&&editStatus.value!==Status.Pic,k={"create-file":g,"open-file":g,"save-file":n,"clear-cache":n,"sync-data":g,"save-as-json":n,undo:r,redo:r,cut:r,copy:r,paste:r,delete:r,"import-font-file":g,"import-templates-file":g,"import-glyphs":g,"import-pic":r,"import-svg":r,"export-font-file":n,"export-glyphs":g,"export-jpeg":r,"export-png":r,"export-svg":r,"add-character":g,"add-icon":g,"font-settings":n,"preference-settings":n,"language-settings":n,"template-1":y,"template-2":y,"template-3":y,"template-4":y,remove_overlap:r},$={file:app.component("Files"),edit:app.component("Edit"),import:app.component("Upload"),export:app.component("Download"),character:app.component("Tickets"),settings:app.component("Setting"),templates:app.component("List"),tools:app.component("Tools")},V=traverse_web_menu(web_handlers,web_menu),L=async z=>{web_handlers[z]&&web_handlers[z]()};return(z,j)=>{const ae=resolveComponent("el-icon"),re=resolveComponent("el-menu-item"),oe=resolveComponent("el-sub-menu"),ue=resolveComponent("el-menu"),le=resolveComponent("el-col");return unref(ENV)==="web"||unref(ENV)==="tauri"?(openBlock(),createElementBlock("div",_hoisted_1$18,[createVNode(le,{class:"side-bar-row"},{default:withCtx(()=>[createVNode(ue,{class:"el-menu side-bar",mode:"vertical",collapse:!0,onSelect:L},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(V),de=>(openBlock(),createBlock(oe,{index:de.key},{title:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent($[de.key])))]),_:2},1024)]),default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(de.submenu,he=>(openBlock(),createBlock(re,{index:he.key,disabled:!k[he.key]()},{default:withCtx(()=>[createTextVNode(toDisplayString$1(he.label),1)]),_:2},1032,["index","disabled"]))),256))]),_:2},1032,["index"]))),256))]),_:1})]),_:1})])):createCommentVNode("",!0)}}}),SideBar=_export_sfc(_sfc_main$19,[["__scopeId","data-v-62b34a7f"]]),genPictureComponent=async(e,n,r)=>new Promise((g,y)=>{const k=document.createElement("img");k.onload=()=>{let $=k.width,V=k.height;($>n||V>r)&&(V/r>$/n?(V=r,$=k.width/k.height*V):($=n,V=k.height/k.width*$));const L=document.createElement("canvas");L.width=$,L.height=V,L.getContext("2d").drawImage(k,0,0,k.width,k.height,0,0,$,V);const j=document.createElement("img"),ae=L.toDataURL();j.onload=()=>{const re=toPixels(j),oe={uuid:genUUID(),type:"picture",name:"picture",lock:!1,visible:!0,value:{data:ae,img:j,pixels:re,originImg:k,pixelMode:!1},x:0,y:0,w:$,h:V,rotation:0,flipX:!1,flipY:!1,opacity:.5,usedInCharacter:!1};g(oe)},j.src=ae},k.src=e});function __classPrivateFieldGet(e,n,r,g){if(r==="a"&&!g)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!g:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?g:r==="a"?g.call(e):g?g.value:n.get(e)}function __classPrivateFieldSet(e,n,r,g,y){if(g==="m")throw new TypeError("Private method is not writable");if(g==="a"&&!y)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?e!==n||!y:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return g==="a"?y.call(e,r):y?y.value=r:n.set(e,r),r}typeof SuppressedError=="function"&&SuppressedError;var _Resource_rid;const SERIALIZE_TO_IPC_FN="__TAURI_TO_IPC_KEY__";function transformCallback(e,n=!1){return window.__TAURI_INTERNALS__.transformCallback(e,n)}async function invoke(e,n={},r){return window.__TAURI_INTERNALS__.invoke(e,n,r)}class Resource{get rid(){return __classPrivateFieldGet(this,_Resource_rid,"f")}constructor(n){_Resource_rid.set(this,void 0),__classPrivateFieldSet(this,_Resource_rid,n,"f")}async close(){return invoke("plugin:resources|close",{rid:this.rid})}}_Resource_rid=new WeakMap;class LogicalSize{constructor(...n){this.type="Logical",n.length===1?"Logical"in n[0]?(this.width=n[0].Logical.width,this.height=n[0].Logical.height):(this.width=n[0].width,this.height=n[0].height):(this.width=n[0],this.height=n[1])}toPhysical(n){return new PhysicalSize(this.width*n,this.height*n)}[SERIALIZE_TO_IPC_FN](){return{width:this.width,height:this.height}}toJSON(){return this[SERIALIZE_TO_IPC_FN]()}}class PhysicalSize{constructor(...n){this.type="Physical",n.length===1?"Physical"in n[0]?(this.width=n[0].Physical.width,this.height=n[0].Physical.height):(this.width=n[0].width,this.height=n[0].height):(this.width=n[0],this.height=n[1])}toLogical(n){return new LogicalSize(this.width/n,this.height/n)}[SERIALIZE_TO_IPC_FN](){return{width:this.width,height:this.height}}toJSON(){return this[SERIALIZE_TO_IPC_FN]()}}class Size{constructor(n){this.size=n}toLogical(n){return this.size instanceof LogicalSize?this.size:this.size.toLogical(n)}toPhysical(n){return this.size instanceof PhysicalSize?this.size:this.size.toPhysical(n)}[SERIALIZE_TO_IPC_FN](){return{[`${this.size.type}`]:{width:this.size.width,height:this.size.height}}}toJSON(){return this[SERIALIZE_TO_IPC_FN]()}}class LogicalPosition{constructor(...n){this.type="Logical",n.length===1?"Logical"in n[0]?(this.x=n[0].Logical.x,this.y=n[0].Logical.y):(this.x=n[0].x,this.y=n[0].y):(this.x=n[0],this.y=n[1])}toPhysical(n){return new PhysicalPosition(this.x*n,this.y*n)}[SERIALIZE_TO_IPC_FN](){return{x:this.x,y:this.y}}toJSON(){return this[SERIALIZE_TO_IPC_FN]()}}class PhysicalPosition{constructor(...n){this.type="Physical",n.length===1?"Physical"in n[0]?(this.x=n[0].Physical.x,this.y=n[0].Physical.y):(this.x=n[0].x,this.y=n[0].y):(this.x=n[0],this.y=n[1])}toLogical(n){return new LogicalPosition(this.x/n,this.y/n)}[SERIALIZE_TO_IPC_FN](){return{x:this.x,y:this.y}}toJSON(){return this[SERIALIZE_TO_IPC_FN]()}}class Position{constructor(n){this.position=n}toLogical(n){return this.position instanceof LogicalPosition?this.position:this.position.toLogical(n)}toPhysical(n){return this.position instanceof PhysicalPosition?this.position:this.position.toPhysical(n)}[SERIALIZE_TO_IPC_FN](){return{[`${this.position.type}`]:{x:this.position.x,y:this.position.y}}}toJSON(){return this[SERIALIZE_TO_IPC_FN]()}}var TauriEvent;(function(e){e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_CREATED="tauri://window-created",e.WEBVIEW_CREATED="tauri://webview-created",e.DRAG_ENTER="tauri://drag-enter",e.DRAG_OVER="tauri://drag-over",e.DRAG_DROP="tauri://drag-drop",e.DRAG_LEAVE="tauri://drag-leave"})(TauriEvent||(TauriEvent={}));async function _unlisten(e,n){await invoke("plugin:event|unlisten",{event:e,eventId:n})}async function listen(e,n,r){var g;const y=typeof r?.target=="string"?{kind:"AnyLabel",label:r.target}:(g=r?.target)!==null&&g!==void 0?g:{kind:"Any"};return invoke("plugin:event|listen",{event:e,target:y,handler:transformCallback(n)}).then(k=>async()=>_unlisten(e,k))}async function once(e,n,r){return listen(e,g=>{_unlisten(e,g.id),n(g)},r)}async function emit(e,n){await invoke("plugin:event|emit",{event:e,payload:n})}async function emitTo(e,n,r){await invoke("plugin:event|emit_to",{target:typeof e=="string"?{kind:"AnyLabel",label:e}:e,event:n,payload:r})}let Image$1=class _o extends Resource{constructor(n){super(n)}static async new(n,r,g){return invoke("plugin:image|new",{rgba:transformImage(n),width:r,height:g}).then(y=>new _o(y))}static async fromBytes(n){return invoke("plugin:image|from_bytes",{bytes:transformImage(n)}).then(r=>new _o(r))}static async fromPath(n){return invoke("plugin:image|from_path",{path:n}).then(r=>new _o(r))}async rgba(){return invoke("plugin:image|rgba",{rid:this.rid}).then(n=>new Uint8Array(n))}async size(){return invoke("plugin:image|size",{rid:this.rid})}};function transformImage(e){return e==null?null:typeof e=="string"?e:e instanceof Image$1?e.rid:e}var UserAttentionType;(function(e){e[e.Critical=1]="Critical",e[e.Informational=2]="Informational"})(UserAttentionType||(UserAttentionType={}));class CloseRequestedEvent{constructor(n){this._preventDefault=!1,this.event=n.event,this.id=n.id}preventDefault(){this._preventDefault=!0}isPreventDefault(){return this._preventDefault}}var ProgressBarStatus;(function(e){e.None="none",e.Normal="normal",e.Indeterminate="indeterminate",e.Paused="paused",e.Error="error"})(ProgressBarStatus||(ProgressBarStatus={}));function getCurrentWindow(){return new Window$1(window.__TAURI_INTERNALS__.metadata.currentWindow.label,{skip:!0})}async function getAllWindows(){return invoke("plugin:window|get_all_windows").then(e=>e.map(n=>new Window$1(n,{skip:!0})))}const localTauriEvents$1=["tauri://created","tauri://error"];let Window$1=class{constructor(n,r={}){var g;this.label=n,this.listeners=Object.create(null),r?.skip||invoke("plugin:window|create",{options:{...r,parent:typeof r.parent=="string"?r.parent:(g=r.parent)===null||g===void 0?void 0:g.label,label:n}}).then(async()=>this.emit("tauri://created")).catch(async y=>this.emit("tauri://error",y))}static async getByLabel(n){var r;return(r=(await getAllWindows()).find(g=>g.label===n))!==null&&r!==void 0?r:null}static getCurrent(){return getCurrentWindow()}static async getAll(){return getAllWindows()}static async getFocusedWindow(){for(const n of await getAllWindows())if(await n.isFocused())return n;return null}async listen(n,r){return this._handleTauriEvent(n,r)?()=>{const g=this.listeners[n];g.splice(g.indexOf(r),1)}:listen(n,r,{target:{kind:"Window",label:this.label}})}async once(n,r){return this._handleTauriEvent(n,r)?()=>{const g=this.listeners[n];g.splice(g.indexOf(r),1)}:once(n,r,{target:{kind:"Window",label:this.label}})}async emit(n,r){if(localTauriEvents$1.includes(n)){for(const g of this.listeners[n]||[])g({event:n,id:-1,payload:r});return}return emit(n,r)}async emitTo(n,r,g){if(localTauriEvents$1.includes(r)){for(const y of this.listeners[r]||[])y({event:r,id:-1,payload:g});return}return emitTo(n,r,g)}_handleTauriEvent(n,r){return localTauriEvents$1.includes(n)?(n in this.listeners?this.listeners[n].push(r):this.listeners[n]=[r],!0):!1}async scaleFactor(){return invoke("plugin:window|scale_factor",{label:this.label})}async innerPosition(){return invoke("plugin:window|inner_position",{label:this.label}).then(n=>new PhysicalPosition(n))}async outerPosition(){return invoke("plugin:window|outer_position",{label:this.label}).then(n=>new PhysicalPosition(n))}async innerSize(){return invoke("plugin:window|inner_size",{label:this.label}).then(n=>new PhysicalSize(n))}async outerSize(){return invoke("plugin:window|outer_size",{label:this.label}).then(n=>new PhysicalSize(n))}async isFullscreen(){return invoke("plugin:window|is_fullscreen",{label:this.label})}async isMinimized(){return invoke("plugin:window|is_minimized",{label:this.label})}async isMaximized(){return invoke("plugin:window|is_maximized",{label:this.label})}async isFocused(){return invoke("plugin:window|is_focused",{label:this.label})}async isDecorated(){return invoke("plugin:window|is_decorated",{label:this.label})}async isResizable(){return invoke("plugin:window|is_resizable",{label:this.label})}async isMaximizable(){return invoke("plugin:window|is_maximizable",{label:this.label})}async isMinimizable(){return invoke("plugin:window|is_minimizable",{label:this.label})}async isClosable(){return invoke("plugin:window|is_closable",{label:this.label})}async isVisible(){return invoke("plugin:window|is_visible",{label:this.label})}async title(){return invoke("plugin:window|title",{label:this.label})}async theme(){return invoke("plugin:window|theme",{label:this.label})}async center(){return invoke("plugin:window|center",{label:this.label})}async requestUserAttention(n){let r=null;return n&&(n===UserAttentionType.Critical?r={type:"Critical"}:r={type:"Informational"}),invoke("plugin:window|request_user_attention",{label:this.label,value:r})}async setResizable(n){return invoke("plugin:window|set_resizable",{label:this.label,value:n})}async setEnabled(n){return invoke("plugin:window|set_enabled",{label:this.label,value:n})}async isEnabled(){return invoke("plugin:window|is_enabled",{label:this.label})}async setMaximizable(n){return invoke("plugin:window|set_maximizable",{label:this.label,value:n})}async setMinimizable(n){return invoke("plugin:window|set_minimizable",{label:this.label,value:n})}async setClosable(n){return invoke("plugin:window|set_closable",{label:this.label,value:n})}async setTitle(n){return invoke("plugin:window|set_title",{label:this.label,value:n})}async maximize(){return invoke("plugin:window|maximize",{label:this.label})}async unmaximize(){return invoke("plugin:window|unmaximize",{label:this.label})}async toggleMaximize(){return invoke("plugin:window|toggle_maximize",{label:this.label})}async minimize(){return invoke("plugin:window|minimize",{label:this.label})}async unminimize(){return invoke("plugin:window|unminimize",{label:this.label})}async show(){return invoke("plugin:window|show",{label:this.label})}async hide(){return invoke("plugin:window|hide",{label:this.label})}async close(){return invoke("plugin:window|close",{label:this.label})}async destroy(){return invoke("plugin:window|destroy",{label:this.label})}async setDecorations(n){return invoke("plugin:window|set_decorations",{label:this.label,value:n})}async setShadow(n){return invoke("plugin:window|set_shadow",{label:this.label,value:n})}async setEffects(n){return invoke("plugin:window|set_effects",{label:this.label,value:n})}async clearEffects(){return invoke("plugin:window|set_effects",{label:this.label,value:null})}async setAlwaysOnTop(n){return invoke("plugin:window|set_always_on_top",{label:this.label,value:n})}async setAlwaysOnBottom(n){return invoke("plugin:window|set_always_on_bottom",{label:this.label,value:n})}async setContentProtected(n){return invoke("plugin:window|set_content_protected",{label:this.label,value:n})}async setSize(n){return invoke("plugin:window|set_size",{label:this.label,value:n instanceof Size?n:new Size(n)})}async setMinSize(n){return invoke("plugin:window|set_min_size",{label:this.label,value:n instanceof Size?n:n?new Size(n):null})}async setMaxSize(n){return invoke("plugin:window|set_max_size",{label:this.label,value:n instanceof Size?n:n?new Size(n):null})}async setSizeConstraints(n){function r(g){return g?{Logical:g}:null}return invoke("plugin:window|set_size_constraints",{label:this.label,value:{minWidth:r(n?.minWidth),minHeight:r(n?.minHeight),maxWidth:r(n?.maxWidth),maxHeight:r(n?.maxHeight)}})}async setPosition(n){return invoke("plugin:window|set_position",{label:this.label,value:n instanceof Position?n:new Position(n)})}async setFullscreen(n){return invoke("plugin:window|set_fullscreen",{label:this.label,value:n})}async setFocus(){return invoke("plugin:window|set_focus",{label:this.label})}async setIcon(n){return invoke("plugin:window|set_icon",{label:this.label,value:transformImage(n)})}async setSkipTaskbar(n){return invoke("plugin:window|set_skip_taskbar",{label:this.label,value:n})}async setCursorGrab(n){return invoke("plugin:window|set_cursor_grab",{label:this.label,value:n})}async setCursorVisible(n){return invoke("plugin:window|set_cursor_visible",{label:this.label,value:n})}async setCursorIcon(n){return invoke("plugin:window|set_cursor_icon",{label:this.label,value:n})}async setBackgroundColor(n){return invoke("plugin:window|set_background_color",{color:n})}async setCursorPosition(n){return invoke("plugin:window|set_cursor_position",{label:this.label,value:n instanceof Position?n:new Position(n)})}async setIgnoreCursorEvents(n){return invoke("plugin:window|set_ignore_cursor_events",{label:this.label,value:n})}async startDragging(){return invoke("plugin:window|start_dragging",{label:this.label})}async startResizeDragging(n){return invoke("plugin:window|start_resize_dragging",{label:this.label,value:n})}async setProgressBar(n){return invoke("plugin:window|set_progress_bar",{label:this.label,value:n})}async setVisibleOnAllWorkspaces(n){return invoke("plugin:window|set_visible_on_all_workspaces",{label:this.label,value:n})}async setTitleBarStyle(n){return invoke("plugin:window|set_title_bar_style",{label:this.label,value:n})}async setTheme(n){return invoke("plugin:window|set_theme",{label:this.label,value:n})}async onResized(n){return this.listen(TauriEvent.WINDOW_RESIZED,r=>{r.payload=new PhysicalSize(r.payload),n(r)})}async onMoved(n){return this.listen(TauriEvent.WINDOW_MOVED,r=>{r.payload=new PhysicalPosition(r.payload),n(r)})}async onCloseRequested(n){return this.listen(TauriEvent.WINDOW_CLOSE_REQUESTED,async r=>{const g=new CloseRequestedEvent(r);await n(g),g.isPreventDefault()||await this.destroy()})}async onDragDropEvent(n){const r=await this.listen(TauriEvent.DRAG_ENTER,$=>{n({...$,payload:{type:"enter",paths:$.payload.paths,position:new PhysicalPosition($.payload.position)}})}),g=await this.listen(TauriEvent.DRAG_OVER,$=>{n({...$,payload:{type:"over",position:new PhysicalPosition($.payload.position)}})}),y=await this.listen(TauriEvent.DRAG_DROP,$=>{n({...$,payload:{type:"drop",paths:$.payload.paths,position:new PhysicalPosition($.payload.position)}})}),k=await this.listen(TauriEvent.DRAG_LEAVE,$=>{n({...$,payload:{type:"leave"}})});return()=>{r(),y(),g(),k()}}async onFocusChanged(n){const r=await this.listen(TauriEvent.WINDOW_FOCUS,y=>{n({...y,payload:!0})}),g=await this.listen(TauriEvent.WINDOW_BLUR,y=>{n({...y,payload:!1})});return()=>{r(),g()}}async onScaleChanged(n){return this.listen(TauriEvent.WINDOW_SCALE_FACTOR_CHANGED,n)}async onThemeChanged(n){return this.listen(TauriEvent.WINDOW_THEME_CHANGED,n)}};var Effect;(function(e){e.AppearanceBased="appearanceBased",e.Light="light",e.Dark="dark",e.MediumLight="mediumLight",e.UltraDark="ultraDark",e.Titlebar="titlebar",e.Selection="selection",e.Menu="menu",e.Popover="popover",e.Sidebar="sidebar",e.HeaderView="headerView",e.Sheet="sheet",e.WindowBackground="windowBackground",e.HudWindow="hudWindow",e.FullScreenUI="fullScreenUI",e.Tooltip="tooltip",e.ContentBackground="contentBackground",e.UnderWindowBackground="underWindowBackground",e.UnderPageBackground="underPageBackground",e.Mica="mica",e.Blur="blur",e.Acrylic="acrylic",e.Tabbed="tabbed",e.TabbedDark="tabbedDark",e.TabbedLight="tabbedLight"})(Effect||(Effect={}));var EffectState;(function(e){e.FollowsWindowActiveState="followsWindowActiveState",e.Active="active",e.Inactive="inactive"})(EffectState||(EffectState={}));function getCurrentWebview(){return new Webview(getCurrentWindow(),window.__TAURI_INTERNALS__.metadata.currentWebview.label,{skip:!0})}async function getAllWebviews(){return invoke("plugin:webview|get_all_webviews").then(e=>e.map(n=>new Webview(new Window$1(n.windowLabel,{skip:!0}),n.label,{skip:!0})))}const localTauriEvents=["tauri://created","tauri://error"];class Webview{constructor(n,r,g){this.window=n,this.label=r,this.listeners=Object.create(null),g?.skip||invoke("plugin:webview|create_webview",{windowLabel:n.label,label:r,options:g}).then(async()=>this.emit("tauri://created")).catch(async y=>this.emit("tauri://error",y))}static async getByLabel(n){var r;return(r=(await getAllWebviews()).find(g=>g.label===n))!==null&&r!==void 0?r:null}static getCurrent(){return getCurrentWebview()}static async getAll(){return getAllWebviews()}async listen(n,r){return this._handleTauriEvent(n,r)?()=>{const g=this.listeners[n];g.splice(g.indexOf(r),1)}:listen(n,r,{target:{kind:"Webview",label:this.label}})}async once(n,r){return this._handleTauriEvent(n,r)?()=>{const g=this.listeners[n];g.splice(g.indexOf(r),1)}:once(n,r,{target:{kind:"Webview",label:this.label}})}async emit(n,r){if(localTauriEvents.includes(n)){for(const g of this.listeners[n]||[])g({event:n,id:-1,payload:r});return}return emit(n,r)}async emitTo(n,r,g){if(localTauriEvents.includes(r)){for(const y of this.listeners[r]||[])y({event:r,id:-1,payload:g});return}return emitTo(n,r,g)}_handleTauriEvent(n,r){return localTauriEvents.includes(n)?(n in this.listeners?this.listeners[n].push(r):this.listeners[n]=[r],!0):!1}async position(){return invoke("plugin:webview|webview_position",{label:this.label}).then(n=>new PhysicalPosition(n))}async size(){return invoke("plugin:webview|webview_size",{label:this.label}).then(n=>new PhysicalSize(n))}async close(){return invoke("plugin:webview|close",{label:this.label})}async setSize(n){return invoke("plugin:webview|set_webview_size",{label:this.label,value:n instanceof Size?n:new Size(n)})}async setPosition(n){return invoke("plugin:webview|set_webview_position",{label:this.label,value:n instanceof Position?n:new Position(n)})}async setFocus(){return invoke("plugin:webview|set_webview_focus",{label:this.label})}async hide(){return invoke("plugin:webview|webview_hide",{label:this.label})}async show(){return invoke("plugin:webview|webview_show",{label:this.label})}async setZoom(n){return invoke("plugin:webview|set_webview_zoom",{label:this.label,value:n})}async reparent(n){return invoke("plugin:webview|reparent",{label:this.label,window:typeof n=="string"?n:n.label})}async clearAllBrowsingData(){return invoke("plugin:webview|clear_all_browsing_data")}async setBackgroundColor(n){return invoke("plugin:webview|set_webview_background_color",{color:n})}async onDragDropEvent(n){const r=await this.listen(TauriEvent.DRAG_ENTER,$=>{n({...$,payload:{type:"enter",paths:$.payload.paths,position:new PhysicalPosition($.payload.position)}})}),g=await this.listen(TauriEvent.DRAG_OVER,$=>{n({...$,payload:{type:"over",position:new PhysicalPosition($.payload.position)}})}),y=await this.listen(TauriEvent.DRAG_DROP,$=>{n({...$,payload:{type:"drop",paths:$.payload.paths,position:new PhysicalPosition($.payload.position)}})}),k=await this.listen(TauriEvent.DRAG_LEAVE,$=>{n({...$,payload:{type:"leave"}})});return()=>{r(),y(),g(),k()}}}function getCurrentWebviewWindow(){const e=getCurrentWebview();return new WebviewWindow(e.label,{skip:!0})}async function getAllWebviewWindows(){return invoke("plugin:window|get_all_windows").then(e=>e.map(n=>new WebviewWindow(n,{skip:!0})))}class WebviewWindow{constructor(n,r={}){var g;this.label=n,this.listeners=Object.create(null),r?.skip||invoke("plugin:webview|create_webview_window",{options:{...r,parent:typeof r.parent=="string"?r.parent:(g=r.parent)===null||g===void 0?void 0:g.label,label:n}}).then(async()=>this.emit("tauri://created")).catch(async y=>this.emit("tauri://error",y))}static async getByLabel(n){var r;const g=(r=(await getAllWebviewWindows()).find(y=>y.label===n))!==null&&r!==void 0?r:null;return g?new WebviewWindow(g.label,{skip:!0}):null}static getCurrent(){return getCurrentWebviewWindow()}static async getAll(){return getAllWebviewWindows()}async listen(n,r){return this._handleTauriEvent(n,r)?()=>{const g=this.listeners[n];g.splice(g.indexOf(r),1)}:listen(n,r,{target:{kind:"WebviewWindow",label:this.label}})}async once(n,r){return this._handleTauriEvent(n,r)?()=>{const g=this.listeners[n];g.splice(g.indexOf(r),1)}:once(n,r,{target:{kind:"WebviewWindow",label:this.label}})}async setBackgroundColor(n){return invoke("plugin:window|set_background_color",{color:n}).then(()=>invoke("plugin:webview|set_webview_background_color",{color:n}))}}applyMixins(WebviewWindow,[Window$1,Webview]);function applyMixins(e,n){(Array.isArray(n)?n:[n]).forEach(r=>{Object.getOwnPropertyNames(r.prototype).forEach(g=>{var y;typeof e.prototype=="object"&&e.prototype&&g in e.prototype||Object.defineProperty(e.prototype,g,(y=Object.getOwnPropertyDescriptor(r.prototype,g))!==null&&y!==void 0?y:Object.create(null))})})}const _withScopeId$c=e=>(pushScopeId("data-v-0e24e2f5"),e=e(),popScopeId(),e),_hoisted_1$17={class:"tool-bar"},_hoisted_2$15=_withScopeId$c(()=>createBaseVNode("span",{class:"to-list-label"},"",-1)),_sfc_main$18=defineComponent({__name:"ToolBar",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=async de=>{if(tool.value==="grid"&&de!=="grid"&&(g.value==="zh"?ElMessageBox.alert("","",{confirmButtonText:""}):g.value==="en"&&ElMessageBox.alert("For user convenience in component editing operations, the default layout will be restored when leaving the layout editing interface. If you have applied layout transformations, the transformed layout will be used for previewing and exporting the font library. However, the default layout will still be used for other editing operations.","Note: You have left the layout editing interface",{confirmButtonText:"Confirm"})),de!=="picture"&&(saveState("",[StoreType.Tools],OpType.Undo),setTool(de)),de==="picture")if(saveState("",[editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo),ENV.value==="tauri"){const he=await nativeImportFile(["jpg","png","jpeg"]),{name:_e,uint8Array:Ce}=he;if(!Ce)return;let Ne="";Ce.forEach(qe=>{Ne+=String.fromCharCode(qe)});const $e=btoa(Ne),Ie=`data:${_e.split(".")[1]==="png"?"imge/png":"image/jpeg"};base64,${$e}`,ze=await genPictureComponent(Ie,selectedFile.value.width,selectedFile.value.height);editStatus.value===Status.Edit?addComponentForCurrentCharacterFile(ze):editStatus.value===Status.Glyph&&addComponentForCurrentGlyph(ze)}else{const he=document.createElement("input");he.setAttribute("type","file"),he.setAttribute("style","display: none"),he.setAttribute("accept","image/*"),he.addEventListener("change",async _e=>{const Ne=_e.currentTarget.files;for(let $e=0;$e<Ne.length;$e++){const xe=window.URL.createObjectURL(Ne[$e]),Ie=await genPictureComponent(xe,selectedFile.value.width,selectedFile.value.height);editStatus.value===Status.Edit?addComponentForCurrentCharacterFile(Ie):editStatus.value===Status.Glyph&&addComponentForCurrentGlyph(Ie)}document.body.removeChild(he)}),document.body.appendChild(he),he.click()}},k=()=>{setEditStatus(prevStatus.value)};let $=!1;const V=async()=>{if(!$){if(ENV.value==="web")editStatus.value===Status.Edit?(window.__constants=constants.value,window.__script=editCharacterFile.value.script,window.__is_web=ENV.value==="web",window.addEventListener("message",le),window.open(`${location.origin}${base$1}/#/character-programming-editor`,"character",`popup,width=1280,height=800,left=${(screen.width-1280)/2}`)):editStatus.value===Status.Glyph&&(window.__constants=constants.value,window.__parameters=editGlyph.value.parameters.parameters,window.__script=editGlyph.value.script,window.__is_web=ENV.value==="web",window.addEventListener("message",le),window.open(`${location.origin}${location.pathname}#/glyph-programming-editor`,"custom-glyph",`popup,width=1280,height=800,left=${(screen.width-1280)/2}`));else if(ENV.value==="tauri"){if(editStatus.value===Status.Edit){const de={url:`${location.origin}${location.pathname}#/character-programming-editor`,width:1280,height:800,x:(screen.width-1280)/2,y:(screen.height-800)/2},he=new WebviewWindow("character-script",de);he.once("tauri://created",async()=>{console.log("webview created")}),he.once("tauri://error",function(_e){console.log("error creating webview",_e)})}else if(editStatus.value===Status.Glyph){const de={url:`${location.origin}${location.pathname}#/glyph-programming-editor`,width:1280,height:800,x:(screen.width-1280)/2,y:(screen.height-800)/2},he=new WebviewWindow("glyph-script",de);he.once("tauri://created",async()=>{console.log("webview created")}),he.once("tauri://error",function(_e){console.log("error creating webview",_e)})}}}};let L=null,z=null,j=null,ae=null,re=!1;onMounted(()=>{ENV.value==="tauri"&&(L=listen("on-webview-mounted",async de=>{editStatus.value===Status.Edit?await emit("init-data",{__constants:constants.value,__script:editCharacterFile.value.script,__isWeb:ENV.value==="web"}):editStatus.value===Status.Glyph&&await emit("init-data",{__constants:constants.value,__parameters:editGlyph.value.parameters.parameters,__script:editGlyph.value.script,__isWeb:ENV.value==="web"})}),z=listen("sync-info",async de=>{re||ue(),re=!0;const{__constants:he,__parameters:_e,__script:Ce}=de.payload;editStatus.value===Status.Glyph?(editGlyph.value.parameters.parameters=_e,constants.value=he,editGlyph.value.script=Ce):editStatus.value===Status.Edit&&(constants.value=he,editCharacterFile.value.script=Ce)}),j=listen("execute-script",async de=>{editStatus.value===Status.Glyph?(executeScript(editGlyph.value),emitter.emit("renderGlyphPreviewCanvasByUUID",editGlyph.value.uuid),emitter.emit("renderGlyph",!0)):editStatus.value===Status.Edit&&(executeCharacterScript(editCharacterFile.value),emitter.emit("renderPreviewCanvasByUUID",editCharacterFile.value.uuid),emitter.emit("renderCharacter",!0))}),ae=listen("on-webview-close",()=>{oe()}))});const oe=()=>{re=!1,$=!1},ue=()=>{saveState("",[editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo,{undoTip:"",redoTip:"",newRecord:!0})};onUnmounted(()=>{L&&L(),z&&z(),j&&j(),ae&&ae()});const le=de=>{de.data==="sync-info"?(re||ue(),re=!0,editStatus.value===Status.Glyph?(editGlyph.value.parameters.parameters=JSON.parse(localStorage.getItem("parameters")),constants.value=JSON.parse(localStorage.getItem("constants")),editGlyph.value.script=localStorage.getItem("script")):editStatus.value===Status.Edit&&(constants.value=JSON.parse(localStorage.getItem("constants")),editCharacterFile.value.script=localStorage.getItem("script"))):de.data==="execute-script"?editStatus.value===Status.Glyph?(executeScript(editGlyph.value),emitter.emit("renderGlyphPreviewCanvasByUUID",editGlyph.value.uuid),emitter.emit("renderGlyph",!0)):editStatus.value===Status.Edit&&(executeCharacterScript(editCharacterFile.value),emitter.emit("renderPreviewCanvasByUUID",editCharacterFile.value.uuid),emitter.emit("renderCharacter",!0)):de.data==="close-window"&&oe()};return(de,he)=>{const _e=resolveComponent("font-awesome-icon"),Ce=resolveComponent("el-icon"),Ne=resolveComponent("el-row");return openBlock(),createElementBlock("div",_hoisted_1$17,[createVNode(Ne,{class:"tool-bar-row"},{default:withCtx(()=>[createVNode(Ce,{class:normalizeClass({"tool-icon":!0,selected:unref(tool)==="select"}),onPointerdown:he[0]||(he[0]=$e=>y("select"))},{default:withCtx(()=>[createVNode(_e,{icon:"fa-solid fa-arrow-pointer"})]),_:1},8,["class"]),createVNode(Ce,{class:normalizeClass({"tool-icon":!0,selected:unref(tool)==="pen"}),onPointerdown:he[1]||(he[1]=$e=>y("pen"))},{default:withCtx(()=>[createVNode(_e,{icon:"fa-solid fa-pen-nib"})]),_:1},8,["class"]),createVNode(Ce,{class:normalizeClass({"tool-icon":!0,selected:unref(tool)==="ellipse"}),onPointerdown:he[2]||(he[2]=$e=>y("ellipse"))},{default:withCtx(()=>[createVNode(_e,{icon:"fa-regular fa-circle"})]),_:1},8,["class"]),createVNode(Ce,{class:normalizeClass({"tool-icon":!0,selected:unref(tool)==="rectangle"}),onPointerdown:he[3]||(he[3]=$e=>y("rectangle"))},{default:withCtx(()=>[createVNode(_e,{icon:"fa-regular fa-square"})]),_:1},8,["class"]),createVNode(Ce,{class:normalizeClass({"tool-icon":!0,selected:unref(tool)==="polygon"}),onPointerdown:he[4]||(he[4]=$e=>y("polygon"))},{default:withCtx(()=>[createVNode(_e,{icon:"fa-solid fa-draw-polygon"})]),_:1},8,["class"]),withDirectives(createVNode(Ce,{class:normalizeClass({"tool-icon":!0,selected:unref(tool)==="picture"}),onPointerdown:he[5]||(he[5]=$e=>y("picture"))},{default:withCtx(()=>[createVNode(_e,{icon:"fa-solid fa-image"})]),_:1},8,["class"]),[[vShow,unref(editStatus)===unref(Status).Edit]]),withDirectives(createVNode(Ce,{class:normalizeClass({"tool-icon":!0,selected:unref(tool)==="glyph"}),onPointerdown:he[6]||(he[6]=$e=>glyphComponentsDialogVisible2.value=!0)},{default:withCtx(()=>[createVNode(_e,{icon:["fas","font"]})]),_:1},8,["class"]),[[vShow,unref(editStatus)===unref(Status).Edit||unref(editStatus)===unref(Status).Glyph]]),withDirectives(createVNode(Ce,{class:"code-icon",onPointerdown:V},{default:withCtx(()=>[createVNode(_e,{icon:["fas","terminal"]})]),_:1},512),[[vShow,unref(editStatus)===unref(Status).Edit||unref(editStatus)===unref(Status).Glyph]]),withDirectives(createVNode(Ce,{class:normalizeClass({"tool-icon":!0,selected:unref(tool)==="params"}),onPointerdown:he[7]||(he[7]=$e=>y("params"))},{default:withCtx(()=>[createVNode(_e,{icon:["fas","sliders"]})]),_:1},8,["class"]),[[vShow,unref(editStatus)===unref(Status).Glyph]]),withDirectives(createVNode(Ce,{class:normalizeClass({"tool-icon":!0,selected:unref(tool)==="grid"}),onPointerdown:he[8]||(he[8]=$e=>y("grid"))},{default:withCtx(()=>[createVNode(_e,{icon:["fas","table-cells"]})]),_:1},8,["class"]),[[vShow,unref(editStatus)===unref(Status).Edit]]),withDirectives(createVNode(Ce,{class:normalizeClass({"tool-icon":!0,selected:unref(tool)==="metrics"}),onPointerdown:he[9]||(he[9]=$e=>y("metrics"))},{default:withCtx(()=>[createVNode(_e,{icon:["fas","text-width"]})]),_:1},8,["class"]),[[vShow,unref(editStatus)===unref(Status).Edit]]),createBaseVNode("div",{class:"to-list",onPointerdown:k},[createVNode(Ce,{class:"to-list-icon"},{default:withCtx(()=>[createVNode(unref(grid_default))]),_:1}),_hoisted_2$15],32)]),_:1})])}}}),ToolBar=_export_sfc(_sfc_main$18,[["__scopeId","data-v-0e24e2f5"]]),_hoisted_1$16={class:"list-wrapper"},_hoisted_2$14={key:0,class:"all-components-list"},_hoisted_3$H={class:"component-item-wrapper"},_hoisted_4$E=["onDragstart","onDragover","onDragend","onDrop","onPointerdown","onContextmenu"],_hoisted_5$y={class:"name"},_hoisted_6$v={class:"tool-wrapper"},_hoisted_7$s={class:"component-menu"},_hoisted_8$r=["onPointerdown"],_hoisted_9$r=["onPointerdown"],_hoisted_10$p=["onPointerdown"],_hoisted_11$o=["onPointerdown"],_hoisted_12$m={key:0,class:"font-components-list"},_hoisted_13$k={class:"component-item-wrapper"},_hoisted_14$k=["onPointerdown"],_hoisted_15$g={class:"name"},_hoisted_16$e={class:"tool-wrapper"},_hoisted_17$c={class:"component-menu"},_hoisted_18$a=["onPointerdown"],_hoisted_19$a=["onPointerdown"],_hoisted_20$a=["onPointerdown"],_hoisted_21$a=["onPointerdown"],_sfc_main$17=defineComponent({__name:"CharacterComponentList",setup(e){const{t:n}=useI18n(),r=reactive((()=>{const $e={};return orderedListWithItemsForCurrentCharacterFile.value.map(xe=>{$e[xe.uuid]=!1}),$e})()),g=ref(!1);let y="",k=-1,$=-1,V=-1;const L=($e,xe)=>{modifyComponentForCurrentCharacterFile($e,{lock:xe})},z=($e,xe)=>{modifyComponentForCurrentCharacterFile($e,{visible:xe})},j=($e,xe,Ie)=>{Ie==="pucture"||Ie==="pressPen"||modifyComponentForCurrentCharacterFile($e,{usedInCharacter:xe})},ae=($e,xe)=>{let Ie=!0;(!selectedComponent.value||selectedComponent.value&&selectedComponent.value.uuid!==xe)&&(Ie=!1),selectedComponentsUUIDs.value.indexOf(xe)!==-1&&(Ie=!0),(selectedComponent.value==="multi"&&enableMultiSelect.value||!Ie)&&setSelectionForCurrentCharacterFile(xe);const ze=selectedItemByUUID(editCharacterFile.value.components,xe);if(ze.type==="glyph"&&ze.value.components&&ze.value.components.length){let qe=!1;for(let Et=0;Et<ze.value.components.length;Et++)if(ze.value.components[Et].type==="glyph"){qe=!0;break}qe&&Ie&&(editCharacterFile.value.selectedComponentsTree||(editCharacterFile.value.selectedComponentsTree=[]),editCharacterFile.value.selectedComponentsTree.push(xe),editCharacterFile.value.selectedComponentsTree.push("null"))}ze.type==="glyph"&&setTool("glyphDragger")},re=($e,xe)=>{y=xe},oe=($e,xe)=>{$e.preventDefault();const Ie=orderedListForCurrentCharacterFile.value;for(let ze=0;ze<Ie.length;ze++)y===Ie[ze].uuid&&(k=ze),xe===Ie[ze].uuid&&($=ze);$e.offsetY<$e.target.offsetHeight/2?V=$:$e.offsetY>$e.target.offsetHeight/2&&(V=$+1)},ue=($e,xe)=>{y="",y="",k=-1,$=-1,V=-1},le=($e,xe)=>{const Ie=clone(orderedListForCurrentCharacterFile.value);k!==$&&(Ie.splice(k,1),k<=V&&(V-=1),Ie.splice(V,0,{type:"component",uuid:y}),setOrderedListForCurrentCharacterFile(Ie))},de=$e=>{if(!selectedComponents.value||!selectedComponents.value.length){const xe=selectedItemByUUID(editCharacterFile.value.components,$e);setClipBoard(clone(xe)),removeComponentForCurrentCharacterFile($e)}else{let xe=!1;if(selectedComponents.value)for(let Ie=0;Ie<selectedComponents.value?.length;Ie++)selectedComponents.value[Ie].uuid===$e&&(xe=!0);if(xe)setClipBoard(clone(selectedComponents.value)),selectedComponents.value.map(Ie=>{removeComponentForCurrentCharacterFile(Ie.uuid)});else{const Ie=selectedItemByUUID(editCharacterFile.value.components,$e);setClipBoard(clone(Ie)),removeComponentForCurrentCharacterFile($e)}}setSelectionForCurrentCharacterFile(""),g.value=!1,r[$e]=!1},he=$e=>{if(!selectedComponents.value||!selectedComponents.value.length){const xe=selectedItemByUUID(editCharacterFile.value.components,$e);setClipBoard(clone(xe))}else{let xe=!1;if(selectedComponents.value)for(let Ie=0;Ie<selectedComponents.value?.length;Ie++)selectedComponents.value[Ie].uuid===$e&&(xe=!0);if(xe)setClipBoard(clone(selectedComponents.value));else{const Ie=selectedItemByUUID(editCharacterFile.value.components,$e);setClipBoard(clone(Ie))}}g.value=!1,r[$e]=!1},_e=$e=>{const xe=clipBoard.value;let Ie=null;for(let ze=xe.length-1;ze>=0;ze--){const qe=clone(xe[ze]);qe.uuid=genUUID(),insertComponentForCurrentCharacterFile(qe,{uuid:$e,pos:"next"}),Ie=qe}Ie&&Ie.type==="glyph"?setTool("glyphDragger"):setTool("select"),g.value=!1,r[$e]=!1},Ce=$e=>{if(!selectedComponents.value||!selectedComponents.value.length)removeComponentForCurrentCharacterFile($e);else{let xe=!1;if(selectedComponents.value)for(let Ie=0;Ie<selectedComponents.value?.length;Ie++)selectedComponents.value[Ie].uuid===$e&&(xe=!0);xe?selectedComponents.value.map(Ie=>{removeComponentForCurrentCharacterFile(Ie.uuid)}):removeComponentForCurrentCharacterFile($e)}setSelectionForCurrentCharacterFile(""),g.value=!1,r[$e]=!1},Ne=($e,xe)=>{if($e.preventDefault(),g.value)return;g.value=!0,r[xe]=!0;const Ie=ze=>{ze.target.closest(".component.menu")||(g.value=!1,r[xe]=!1)};document.addEventListener("mousedown",Ie)};return($e,xe)=>{const Ie=resolveComponent("el-icon"),ze=resolveComponent("el-popover"),qe=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("div",_hoisted_1$16,[unref(editPanelCompFilter)==="all"?(openBlock(),createBlock(qe,{key:0},{default:withCtx(()=>[unref(editPanelCompFilter)==="all"?(openBlock(),createElementBlock("div",_hoisted_2$14,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(orderedListWithItemsForCurrentCharacterFile),Et=>(openBlock(),createElementBlock("div",_hoisted_3$H,[createVNode(ze,{placement:"right",width:200,trigger:"manual",visible:r[Et.uuid]},{reference:withCtx(()=>[createBaseVNode("div",{class:normalizeClass({component:!0,selected:unref(selectedComponentsUUIDs).indexOf(Et.uuid)!==-1}),draggable:!0,onDragstart:_n=>re(_n,Et.uuid),onDragover:_n=>oe(_n,Et.uuid),onDragend:_n=>ue(_n,Et.uuid),onDrop:_n=>le(_n,Et.uuid),onPointerdown:_n=>ae(_n,Et.uuid),onContextmenu:_n=>Ne(_n,Et.uuid)},[createBaseVNode("span",_hoisted_5$y,toDisplayString$1(Et.name||Et.type),1),createBaseVNode("span",_hoisted_6$v,[createVNode(Ie,{class:"tool-icon used-in-character",onPointerdown:_n=>j(Et.uuid,!Et.usedInCharacter,Et.type)},{default:withCtx(()=>[Et.usedInCharacter?(openBlock(),createBlock(unref(circle_check_default),{key:0})):createCommentVNode("",!0),Et.usedInCharacter?createCommentVNode("",!0):(openBlock(),createBlock(unref(circle_close_default),{key:1}))]),_:2},1032,["onPointerdown"]),createVNode(Ie,{class:"tool-icon lock",onPointerdown:_n=>L(Et.uuid,!Et.lock)},{default:withCtx(()=>[Et.lock?(openBlock(),createBlock(unref(unlock_default),{key:0})):createCommentVNode("",!0),Et.lock?createCommentVNode("",!0):(openBlock(),createBlock(unref(lock_default),{key:1}))]),_:2},1032,["onPointerdown"]),createVNode(Ie,{class:"tool-icon visible",onPointerdown:_n=>z(Et.uuid,!Et.visible)},{default:withCtx(()=>[Et.visible?(openBlock(),createBlock(unref(view_default),{key:0})):createCommentVNode("",!0),Et.visible?createCommentVNode("",!0):(openBlock(),createBlock(unref(hide_default),{key:1}))]),_:2},1032,["onPointerdown"])])],42,_hoisted_4$E)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_7$s,[createBaseVNode("div",{class:"component-menu-item",onPointerdown:_n=>de(Et.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.cut")),41,_hoisted_8$r),createBaseVNode("div",{class:"component-menu-item",onPointerdown:_n=>he(Et.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.copy")),41,_hoisted_9$r),createBaseVNode("div",{class:"component-menu-item",onPointerdown:_n=>_e(Et.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.paste")),41,_hoisted_10$p),createBaseVNode("div",{class:"component-menu-item",onPointerdown:_n=>Ce(Et.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.delete")),41,_hoisted_11$o)])]),_:2},1032,["visible"])]))),256))])):createCommentVNode("",!0)]),_:1})):createCommentVNode("",!0),unref(editPanelCompFilter)==="font"?(openBlock(),createBlock(qe,{key:1},{default:withCtx(()=>[unref(editPanelCompFilter)==="font"?(openBlock(),createElementBlock("div",_hoisted_12$m,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(usedComponents),Et=>(openBlock(),createElementBlock("div",_hoisted_13$k,[createVNode(ze,{placement:"right",width:200,trigger:"contextmenu"},{reference:withCtx(()=>[createBaseVNode("div",{class:normalizeClass({component:!0,selected:unref(selectedComponentsUUIDs).indexOf(Et.uuid)!==-1}),onPointerdown:_n=>ae(_n,Et.uuid)},[createBaseVNode("span",_hoisted_15$g,toDisplayString$1(Et.name||Et.type),1),createBaseVNode("span",_hoisted_16$e,[createVNode(Ie,{class:"tool-icon used-in-character",onPointerdown:_n=>j(Et.uuid,!Et.usedInCharacter,Et.type)},{default:withCtx(()=>[Et.usedInCharacter?(openBlock(),createBlock(unref(circle_check_default),{key:0})):createCommentVNode("",!0),Et.usedInCharacter?createCommentVNode("",!0):(openBlock(),createBlock(unref(circle_close_default),{key:1}))]),_:2},1032,["onPointerdown"]),createVNode(Ie,{class:"tool-icon lock",onPointerdown:_n=>L(Et.uuid,!Et.lock)},{default:withCtx(()=>[Et.lock?(openBlock(),createBlock(unref(unlock_default),{key:0})):createCommentVNode("",!0),Et.lock?createCommentVNode("",!0):(openBlock(),createBlock(unref(lock_default),{key:1}))]),_:2},1032,["onPointerdown"]),createVNode(Ie,{class:"tool-icon visible",onPointerdown:_n=>z(Et.uuid,!Et.visible)},{default:withCtx(()=>[Et.visible?(openBlock(),createBlock(unref(view_default),{key:0})):createCommentVNode("",!0),Et.visible?createCommentVNode("",!0):(openBlock(),createBlock(unref(hide_default),{key:1}))]),_:2},1032,["onPointerdown"])])],42,_hoisted_14$k)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_17$c,[createBaseVNode("div",{class:"component-menu-item",onPointerdown:_n=>de(Et.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.cut")),41,_hoisted_18$a),createBaseVNode("div",{class:"component-menu-item",onPointerdown:_n=>he(Et.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.copy")),41,_hoisted_19$a),createBaseVNode("div",{class:"component-menu-item",onPointerdown:_n=>_e(Et.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.paste")),41,_hoisted_20$a),createBaseVNode("div",{class:"component-menu-item",onPointerdown:_n=>Ce(Et.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.delete")),41,_hoisted_21$a)])]),_:2},1024)]))),256))])):createCommentVNode("",!0)]),_:1})):createCommentVNode("",!0)])}}}),CharacterComponentList=_export_sfc(_sfc_main$17,[["__scopeId","data-v-8321374d"]]),_hoisted_1$15={class:"list-wrapper"},_hoisted_2$13={key:0,class:"all-components-list"},_hoisted_3$G={class:"component-item-wrapper"},_hoisted_4$D=["onDragstart","onDragover","onDragend","onDrop","onPointerdown","onContextmenu"],_hoisted_5$x={class:"name"},_hoisted_6$u={class:"tool-wrapper"},_hoisted_7$r={class:"component-menu"},_hoisted_8$q=["onPointerdown"],_hoisted_9$q=["onPointerdown"],_hoisted_10$o=["onPointerdown"],_hoisted_11$n=["onPointerdown"],_hoisted_12$l={key:0,class:"font-components-list"},_hoisted_13$j={class:"component-item-wrapper"},_hoisted_14$j=["onPointerdown"],_hoisted_15$f={class:"name"},_hoisted_16$d={class:"tool-wrapper"},_hoisted_17$b={class:"component-menu"},_hoisted_18$9=["onPointerdown"],_hoisted_19$9=["onPointerdown"],_hoisted_20$9=["onPointerdown"],_hoisted_21$9=["onPointerdown"],_sfc_main$16=defineComponent({__name:"GlyphComponentList",setup(e){const{t:n}=useI18n(),r=reactive((()=>{const $e={};return orderedListWithItemsForCurrentGlyph.value.map(xe=>{$e[xe.uuid]=!1}),$e})()),g=ref(!1);let y="",k=-1,$=-1,V=-1;const L=($e,xe)=>{modifyComponentForCurrentGlyph($e,{lock:xe})},z=($e,xe)=>{modifyComponentForCurrentGlyph($e,{visible:xe})},j=($e,xe,Ie)=>{Ie==="pucture"||Ie==="pressPen"||modifyComponentForCurrentGlyph($e,{usedInCharacter:xe})},ae=($e,xe)=>{let Ie=!0;(!selectedComponent$1.value||selectedComponent$1.value&&selectedComponent$1.value.uuid!==xe)&&(Ie=!1),selectedComponentsUUIDs$1.value.indexOf(xe)!==-1&&(Ie=!0),!Ie&&setSelectionForCurrentGlyph(xe);const ze=selectedItemByUUID(editGlyph.value.components,xe);if(ze.type==="glyph"&&ze.value.components&&ze.value.components.length){let qe=!1;for(let Et=0;Et<ze.value.components.length;Et++)if(ze.value.components[Et].type==="glyph"){qe=!0;break}qe&&Ie&&(editGlyph.value.selectedComponentsTree||(editGlyph.value.selectedComponentsTree=[]),editGlyph.value.selectedComponentsTree.push(xe),editGlyph.value.selectedComponentsTree.push("null"))}else ze.type==="glyph"&&setTool("glyphDragger")},re=($e,xe)=>{y=xe},oe=($e,xe)=>{$e.preventDefault();const Ie=orderedListForCurrentGlyph.value;for(let ze=0;ze<Ie.length;ze++)y===Ie[ze].uuid&&(k=ze),xe===Ie[ze].uuid&&($=ze);$e.offsetY<$e.target.offsetHeight/2?V=$:$e.offsetY>$e.target.offsetHeight/2&&(V=$+1)},ue=($e,xe)=>{y="",y="",k=-1,$=-1,V=-1},le=($e,xe)=>{const Ie=clone(orderedListForCurrentGlyph.value);k!==$&&(Ie.splice(k,1),k<=V&&(V-=1),Ie.splice(V,0,{type:"component",uuid:y}),setOrderedListForCurrentGlyph(Ie))},de=$e=>{if(!selectedComponents$1.value||!selectedComponents$1.value.length){const xe=selectedItemByUUID(editGlyph.value.components,$e);setClipBoard(clone(xe)),removeComponentForCurrentGlyph($e)}else{let xe=!1;if(selectedComponents$1.value)for(let Ie=0;Ie<selectedComponents$1.value?.length;Ie++)selectedComponents$1.value[Ie].uuid===$e&&(xe=!0);if(xe)setClipBoard(clone(selectedComponents$1.value)),selectedComponents$1.value.map(Ie=>{removeComponentForCurrentGlyph(Ie.uuid)});else{const Ie=selectedItemByUUID(editGlyph.value.components,$e);setClipBoard(clone(Ie)),removeComponentForCurrentGlyph($e)}}setSelectionForCurrentGlyph(""),g.value=!1,r[$e]=!1},he=$e=>{if(!selectedComponents$1.value||!selectedComponents$1.value.length){const xe=selectedItemByUUID(editGlyph.value.components,$e);setClipBoard(clone(xe))}else{let xe=!1;if(selectedComponents$1.value)for(let Ie=0;Ie<selectedComponents$1.value?.length;Ie++)selectedComponents$1.value[Ie].uuid===$e&&(xe=!0);if(xe)setClipBoard(clone(selectedComponents$1.value));else{const Ie=selectedItemByUUID(editGlyph.value.components,$e);setClipBoard(clone(Ie))}}g.value=!1,r[$e]=!1},_e=$e=>{const xe=clipBoard.value;let Ie=null;for(let ze=xe.length-1;ze>=0;ze--){const qe=clone(xe[ze]);qe.uuid=genUUID(),insertComponentForCurrentGlyph(qe,{uuid:$e,pos:"next"}),Ie=qe}Ie&&Ie.type==="glyph"?setTool("glyphDragger"):setTool("select"),g.value=!1,r[$e]=!1},Ce=$e=>{if(r[$e]=!1,!selectedComponents$1.value||!selectedComponents$1.value.length)removeComponentForCurrentGlyph($e);else{let xe=!1;if(selectedComponents$1.value)for(let Ie=0;Ie<selectedComponents$1.value?.length;Ie++)selectedComponents$1.value[Ie].uuid===$e&&(xe=!0);xe?selectedComponents$1.value.map(Ie=>{removeComponentForCurrentGlyph(Ie.uuid)}):removeComponentForCurrentGlyph($e)}setSelectionForCurrentGlyph(""),g.value=!1},Ne=($e,xe)=>{if($e.preventDefault(),g.value)return;g.value=!0,r[xe]=!0;const Ie=ze=>{ze.target.closest(".component.menu")||(g.value=!1,r[xe]=!1)};document.addEventListener("mousedown",Ie)};return($e,xe)=>{const Ie=resolveComponent("el-icon"),ze=resolveComponent("el-popover"),qe=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("div",_hoisted_1$15,[unref(editPanelCompFilter)==="all"?(openBlock(),createBlock(qe,{key:0},{default:withCtx(()=>[unref(editPanelCompFilter)==="all"?(openBlock(),createElementBlock("div",_hoisted_2$13,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(orderedListWithItemsForCurrentGlyph),Et=>(openBlock(),createElementBlock("div",_hoisted_3$G,[createVNode(ze,{placement:"right",width:200,trigger:"manual",inert:"",visible:r[Et.uuid]},{reference:withCtx(()=>[createBaseVNode("div",{class:normalizeClass({component:!0,selected:unref(selectedComponentsUUIDs$1).indexOf(Et.uuid)!==-1}),draggable:!0,onDragstart:_n=>re(_n,Et.uuid),onDragover:_n=>oe(_n,Et.uuid),onDragend:_n=>ue(_n,Et.uuid),onDrop:_n=>le(_n,Et.uuid),onPointerdown:_n=>ae(_n,Et.uuid),onContextmenu:_n=>Ne(_n,Et.uuid)},[createBaseVNode("span",_hoisted_5$x,toDisplayString$1(Et.name||Et.type),1),createBaseVNode("span",_hoisted_6$u,[createVNode(Ie,{class:"tool-icon used-in-character",onPointerdown:_n=>j(Et.uuid,!Et.usedInCharacter,Et.type)},{default:withCtx(()=>[Et.usedInCharacter?(openBlock(),createBlock(unref(circle_check_default),{key:0})):createCommentVNode("",!0),Et.usedInCharacter?createCommentVNode("",!0):(openBlock(),createBlock(unref(circle_close_default),{key:1}))]),_:2},1032,["onPointerdown"]),createVNode(Ie,{class:"tool-icon lock",onPointerdown:_n=>L(Et.uuid,!Et.lock)},{default:withCtx(()=>[Et.lock?(openBlock(),createBlock(unref(unlock_default),{key:0})):createCommentVNode("",!0),Et.lock?createCommentVNode("",!0):(openBlock(),createBlock(unref(lock_default),{key:1}))]),_:2},1032,["onPointerdown"]),createVNode(Ie,{class:"tool-icon visible",onPointerdown:_n=>z(Et.uuid,!Et.visible)},{default:withCtx(()=>[Et.visible?(openBlock(),createBlock(unref(view_default),{key:0})):createCommentVNode("",!0),Et.visible?createCommentVNode("",!0):(openBlock(),createBlock(unref(hide_default),{key:1}))]),_:2},1032,["onPointerdown"])])],42,_hoisted_4$D)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_7$r,[createBaseVNode("div",{class:"component-menu-item",onPointerdown:_n=>de(Et.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.cut")),41,_hoisted_8$q),createBaseVNode("div",{class:"component-menu-item",onPointerdown:_n=>he(Et.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.copy")),41,_hoisted_9$q),createBaseVNode("div",{class:"component-menu-item",onPointerdown:_n=>_e(Et.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.paste")),41,_hoisted_10$o),createBaseVNode("div",{class:"component-menu-item",onPointerdown:_n=>Ce(Et.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.delete")),41,_hoisted_11$n)])]),_:2},1032,["visible"])]))),256))])):createCommentVNode("",!0)]),_:1})):createCommentVNode("",!0),unref(editPanelCompFilter)==="font"?(openBlock(),createBlock(qe,{key:1},{default:withCtx(()=>[unref(editPanelCompFilter)==="font"?(openBlock(),createElementBlock("div",_hoisted_12$l,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(usedComponents$1),Et=>(openBlock(),createElementBlock("div",_hoisted_13$j,[createVNode(ze,{placement:"right",width:200,trigger:"contextmenu"},{reference:withCtx(()=>[createBaseVNode("div",{class:normalizeClass({component:!0,selected:unref(selectedComponentsUUIDs$1).indexOf(Et.uuid)!==-1}),onPointerdown:_n=>ae(_n,Et.uuid)},[createBaseVNode("span",_hoisted_15$f,toDisplayString$1(Et.name||Et.type),1),createBaseVNode("span",_hoisted_16$d,[createVNode(Ie,{class:"tool-icon used-in-character",onPointerdown:_n=>j(Et.uuid,!Et.usedInCharacter,Et.type)},{default:withCtx(()=>[Et.usedInCharacter?(openBlock(),createBlock(unref(circle_check_default),{key:0})):createCommentVNode("",!0),Et.usedInCharacter?createCommentVNode("",!0):(openBlock(),createBlock(unref(circle_close_default),{key:1}))]),_:2},1032,["onPointerdown"]),createVNode(Ie,{class:"tool-icon lock",onPointerdown:_n=>L(Et.uuid,!Et.lock)},{default:withCtx(()=>[Et.lock?(openBlock(),createBlock(unref(unlock_default),{key:0})):createCommentVNode("",!0),Et.lock?createCommentVNode("",!0):(openBlock(),createBlock(unref(lock_default),{key:1}))]),_:2},1032,["onPointerdown"]),createVNode(Ie,{class:"tool-icon visible",onPointerdown:_n=>z(Et.uuid,!Et.visible)},{default:withCtx(()=>[Et.visible?(openBlock(),createBlock(unref(view_default),{key:0})):createCommentVNode("",!0),Et.visible?createCommentVNode("",!0):(openBlock(),createBlock(unref(hide_default),{key:1}))]),_:2},1032,["onPointerdown"])])],42,_hoisted_14$j)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_17$b,[createBaseVNode("div",{class:"component-menu-item",onPointerdown:_n=>de(Et.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.cut")),41,_hoisted_18$9),createBaseVNode("div",{class:"component-menu-item",onPointerdown:_n=>he(Et.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.copy")),41,_hoisted_19$9),createBaseVNode("div",{class:"component-menu-item",onPointerdown:_n=>_e(Et.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.paste")),41,_hoisted_20$9),createBaseVNode("div",{class:"component-menu-item",onPointerdown:_n=>Ce(Et.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.delete")),41,_hoisted_21$9)])]),_:2},1024)]))),256))])):createCommentVNode("",!0)]),_:1})):createCommentVNode("",!0)])}}}),GlyphComponentList=_export_sfc(_sfc_main$16,[["__scopeId","data-v-8b77a42c"]]),_hoisted_1$14={class:"view-list-wrapper"},_hoisted_2$12={class:"view-thumbnail"},_hoisted_3$F={class:"view-info"},_hoisted_4$C={class:"view-title"},_hoisted_5$w={class:"view-description"},_hoisted_6$t={class:"view-thumbnail"},_hoisted_7$q={class:"view-info"},_hoisted_8$p={class:"view-title"},_hoisted_9$p={class:"view-description"},_hoisted_10$n={class:"view-thumbnail"},_hoisted_11$m=["width","height"],_hoisted_12$k={class:"view-info"},_hoisted_13$i={class:"view-title"},_hoisted_14$i={class:"view-description"},_hoisted_15$e={class:"view-thumbnail"},_hoisted_16$c=["width","height"],_hoisted_17$a={class:"view-info"},_hoisted_18$8={class:"view-title"},_hoisted_19$8={class:"view-description"},_hoisted_20$8={class:"view-thumbnail"},_hoisted_21$8=["width","height"],_hoisted_22$8={class:"view-info"},_hoisted_23$8={class:"view-title"},_hoisted_24$8={class:"view-description"},_sfc_main$15=defineComponent({__name:"ViewList",setup(e){const{t:n}=useI18n(),r=ref(null),g=ref(null),y=ref(null),k=ref(null),$=ref(null),V=()=>{const ue=editCharacterPic.value.width,le=editCharacterPic.value.height;let de=68,he=de*le/ue;he>68&&(he=68,de=he*ue/le),r.value.width=mapCanvasWidth(ue),r.value.height=mapCanvasHeight(le),r.value.style.width=`${de}px`,r.value.style.height=`${he}px`,r.value.height=mapCanvasHeight(le),g.value.width=mapCanvasWidth(ue),g.value.height=mapCanvasHeight(le),g.value.style.width=`${de}px`,g.value.style.height=`${he}px`},L=()=>{const ue=r.value.getContext("2d"),{img:le,width:de,height:he}=editCharacterPic.value,_e=le;ue.drawImage(_e,0,0,_e.width,_e.height,0,0,mapCanvasWidth(de),mapCanvasWidth(he))},z=()=>{const ue=g.value.getContext("2d"),{data:le,width:de,height:he}=bitmap.value;for(let _e=0;_e<de;_e++)for(let Ce=0;Ce<he;Ce++){const Ne=(Ce*de+_e)*4,$e=`rgba(${le[Ne]}, ${le[Ne+1]}, ${le[Ne]+2}, ${le[Ne+3]})`;ue.fillStyle=$e,ue.fillRect(mapCanvasX(_e),mapCanvasY(Ce),mapCanvasWidth(1),mapCanvasHeight(1))}},j=()=>{const ue=contoursComponents.value.map(le=>{const de=clone(le);return de.value.fillColor="rgba(1, 1, 1, 0)",de});clearCanvas(y.value),renderCanvas(ue,y.value)},ae=()=>{const ue=curvesComponents.value.map(le=>{const de=clone(le);return de.value.fillColor="rgba(1, 1, 1, 0)",de});clearCanvas(k.value),renderCanvas(ue,k.value)},re=()=>{clearCanvas($.value),renderCanvas(curvesComponents.value,$.value,{fill:!0,offset:{x:0,y:0},scale:1,forceUpdate:!1})},oe=()=>{re(),L(),z(),j(),ae()};return onMounted(()=>{V(),window.addEventListener("resize",V),oe()}),watch([editCharacterPic,bitmap,contoursComponents,curvesComponents],()=>{oe()}),onBeforeUnmount(()=>{window.removeEventListener("resize",V)}),(ue,le)=>(openBlock(),createElementBlock("div",_hoisted_1$14,[createBaseVNode("div",{class:"view-item-wrapper",onPointerdown:le[0]||(le[0]=de=>previewStatus.value=0)},[createBaseVNode("span",_hoisted_2$12,[createBaseVNode("canvas",{class:"view-canvas",ref_key:"thumbnailCanvas",ref:r},null,512)]),createBaseVNode("span",_hoisted_3$F,[createBaseVNode("span",_hoisted_4$C,toDisplayString$1(unref(n)("panels.viewList.thumbnail.title")),1),createBaseVNode("span",_hoisted_5$w,toDisplayString$1(unref(n)("panels.viewList.thumbnail.description")),1)])],32),createBaseVNode("div",{class:"view-item-wrapper",onPointerdown:le[1]||(le[1]=de=>previewStatus.value=1)},[createBaseVNode("span",_hoisted_6$t,[createBaseVNode("canvas",{class:"view-canvas",ref_key:"bitmapCanvas",ref:g},null,512)]),createBaseVNode("span",_hoisted_7$q,[createBaseVNode("span",_hoisted_8$p,toDisplayString$1(unref(n)("panels.viewList.bitmap.title")),1),createBaseVNode("span",_hoisted_9$p,toDisplayString$1(unref(n)("panels.viewList.bitmap.description")),1)])],32),createBaseVNode("div",{class:"view-item-wrapper",onPointerdown:le[2]||(le[2]=de=>previewStatus.value=2)},[createBaseVNode("span",_hoisted_10$n,[createBaseVNode("canvas",{class:"view-canvas",ref_key:"contoursCanvas",ref:y,width:unref(mapCanvasWidth)(unref(selectedFile).width),height:unref(mapCanvasHeight)(unref(selectedFile).height)},null,8,_hoisted_11$m)]),createBaseVNode("span",_hoisted_12$k,[createBaseVNode("span",_hoisted_13$i,toDisplayString$1(unref(n)("panels.viewList.contours.title")),1),createBaseVNode("span",_hoisted_14$i,toDisplayString$1(unref(n)("panels.viewList.contours.description")),1)])],32),createBaseVNode("div",{class:"view-item-wrapper",onPointerdown:le[3]||(le[3]=de=>previewStatus.value=3)},[createBaseVNode("span",_hoisted_15$e,[createBaseVNode("canvas",{class:"view-canvas",ref_key:"curvesCanvas",ref:k,width:unref(mapCanvasWidth)(unref(selectedFile).width),height:unref(mapCanvasHeight)(unref(selectedFile).height)},null,8,_hoisted_16$c)]),createBaseVNode("span",_hoisted_17$a,[createBaseVNode("span",_hoisted_18$8,toDisplayString$1(unref(n)("panels.viewList.curves.title")),1),createBaseVNode("span",_hoisted_19$8,toDisplayString$1(unref(n)("panels.viewList.curves.description")),1)])],32),createBaseVNode("div",{class:"view-item-wrapper",onPointerdown:le[4]||(le[4]=de=>previewStatus.value=4)},[createBaseVNode("span",_hoisted_20$8,[createBaseVNode("canvas",{class:"view-canvas",ref_key:"previewCanvas",ref:$,width:unref(mapCanvasWidth)(unref(selectedFile).width),height:unref(mapCanvasHeight)(unref(selectedFile).height)},null,8,_hoisted_21$8)]),createBaseVNode("span",_hoisted_22$8,[createBaseVNode("span",_hoisted_23$8,toDisplayString$1(unref(n)("panels.viewList.preview.title")),1),createBaseVNode("span",_hoisted_24$8,toDisplayString$1(unref(n)("panels.viewList.preview.description")),1)])],32)]))}}),ViewList=_export_sfc(_sfc_main$15,[["__scopeId","data-v-dc474515"]]),_hoisted_1$13={class:"list-wrapper"},_hoisted_2$11={class:"root-sub-component"},_hoisted_3$E={class:"all-components-list"},_hoisted_4$B={class:"component-item-wrapper"},_hoisted_5$v=["onDragstart","onDragover","onDragend","onDrop","onPointerdown","onContextmenu"],_hoisted_6$s={class:"type"},_hoisted_7$p={class:"tool-wrapper"},_hoisted_8$o={class:"component-menu"},_hoisted_9$o=["onPointerdown"],_sfc_main$14=defineComponent({__name:"CharacterSubComponentList",setup(e){const{t:n}=useI18n(),r=reactive((()=>{const Ce={};return orderedListWithItemsForCurrentCharacterFile.value.map(Ne=>{Ce[Ne.uuid]=!1}),Ce})()),g=ref(!1);let y="",k=-1,$=-1,V=-1;const L=(Ce,Ne)=>{const $e=selectedItemByUUID(SubComponentsRoot.value.value.components,Ce);$e.lock=Ne},z=(Ce,Ne)=>{const $e=selectedItemByUUID(SubComponentsRoot.value.value.components,Ce);$e.visible=Ne},j=(Ce,Ne)=>{if(!editCharacterFile.value.selectedComponentsTree||editCharacterFile.value.selectedComponentsTree.length<2)return;editCharacterFile.value.selectedComponentsTree[editCharacterFile.value.selectedComponentsTree.length-1]=Ne;const $e=selectedItemByUUID(SubComponentsRoot.value.value.components,Ne);if($e.type==="glyph"&&$e.value.components&&$e.value.components.length){let xe=!1;for(let Ie=0;Ie<$e.value.components.length;Ie++)if($e.value.components[Ie].type==="glyph"){xe=!0;break}xe&&editCharacterFile.value.selectedComponentsTree.push("null")}else $e.type==="glyph"&&setTool("glyphDragger")},ae=(Ce,Ne)=>{y=Ne},re=(Ce,Ne)=>{Ce.preventDefault();const $e=SubComponentsRoot.value.value.orderedList;for(let xe=0;xe<$e.length;xe++)y===$e[xe].uuid&&(k=xe),Ne===$e[xe].uuid&&($=xe);Ce.offsetY<Ce.target.offsetHeight/2?V=$:Ce.offsetY>Ce.target.offsetHeight/2&&(V=$+1)},oe=(Ce,Ne)=>{y="",y="",k=-1,$=-1,V=-1},ue=(Ce,Ne)=>{const $e=clone(SubComponentsRoot.value.value.orderedList);k!==$&&($e.splice(k,1),k<=V&&(V-=1),$e.splice(V,0,{type:"component",uuid:y}),SubComponentsRoot.value.value.orderedList=$e)},le=Ce=>{const Ne=SubComponentsRoot.value,$e=(()=>{for(let Ie=0;Ie<Ne.value.components.length;Ie++)if(Ne.value.components[Ie].uuid===Ce)return Ie;return-1})();Ne.value.components.splice($e,1);const xe=(()=>{for(let Ie=0;Ie<Ne.value.orderedList.length;Ie++)if(Ne.value.orderedList[Ie].uuid===Ce)return Ie;return-1})();if(xe>=0&&Ne.value.orderedList.splice(xe,1),selectedSubComponent.value===Ce){let Ie=editCharacterFile.value.selectedComponentsTree;Ie[Ie.length-1]!=="null"&&(Ie[Ie.length-1]="null")}SubComponentsRoot.value.value.glyph_script&&SubComponentsRoot.value.value.glyph_script[Ce]&&delete SubComponentsRoot.value.value.glyph_script[Ce],g.value=!1,r[Ce]=!1},de=(Ce,Ne)=>{if(Ce.preventDefault(),g.value)return;g.value=!0,r[Ne]=!0;const $e=xe=>{xe.target.closest(".component.menu")||(g.value=!1,r[Ne]=!1)};document.addEventListener("mousedown",$e)},he=()=>{let Ce=editCharacterFile.value.selectedComponentsTree;Ce[Ce.length-1]!=="null"&&(Ce[Ce.length-1]="null"),editCharacterFile.value.selectedComponentsTree=Ce},_e=Ce=>{Ce.stopPropagation();let Ne=editCharacterFile.value.selectedComponentsTree;Ne.length<=2?Ne=null:(Ne.splice(Ne.length-2,2),Ne.push("null")),editCharacterFile.value.selectedComponentsTree=Ne};return(Ce,Ne)=>{const $e=resolveComponent("el-icon"),xe=resolveComponent("el-popover"),Ie=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("div",_hoisted_1$13,[createBaseVNode("div",{class:normalizeClass(["list-head",{selected:!unref(selectedSubComponent)}]),onPointerdown:he},[createVNode($e,{class:"back-icon",onPointerdown:_e},{default:withCtx(()=>[createVNode(unref(arrow_left_bold_default))]),_:1}),createBaseVNode("div",_hoisted_2$11,toDisplayString$1(unref(SubComponentsRoot).value.name),1)],34),createVNode(Ie,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_3$E,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(SubComponents),ze=>(openBlock(),createElementBlock("div",_hoisted_4$B,[createVNode(xe,{placement:"right",width:200,trigger:"manual",visible:r[ze.uuid]},{reference:withCtx(()=>[createBaseVNode("div",{class:normalizeClass({component:!0,selected:unref(selectedSubComponent)&&unref(selectedSubComponent).uuid===ze.uuid}),draggable:!0,onDragstart:qe=>ae(qe,ze.uuid),onDragover:qe=>re(qe,ze.uuid),onDragend:qe=>oe(qe,ze.uuid),onDrop:qe=>ue(qe,ze.uuid),onPointerdown:qe=>j(qe,ze.uuid),onContextmenu:qe=>de(qe,ze.uuid)},[createBaseVNode("span",_hoisted_6$s,toDisplayString$1(ze.name||ze.type),1),createBaseVNode("span",_hoisted_7$p,[createVNode($e,{class:"tool-icon lock",onPointerdown:qe=>L(ze.uuid,!ze.lock)},{default:withCtx(()=>[ze.lock?(openBlock(),createBlock(unref(unlock_default),{key:0})):createCommentVNode("",!0),ze.lock?createCommentVNode("",!0):(openBlock(),createBlock(unref(lock_default),{key:1}))]),_:2},1032,["onPointerdown"]),createVNode($e,{class:"tool-icon visible",onPointerdown:qe=>z(ze.uuid,!ze.visible)},{default:withCtx(()=>[ze.visible?(openBlock(),createBlock(unref(view_default),{key:0})):createCommentVNode("",!0),ze.visible?createCommentVNode("",!0):(openBlock(),createBlock(unref(hide_default),{key:1}))]),_:2},1032,["onPointerdown"])])],42,_hoisted_5$v)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_8$o,[createBaseVNode("div",{class:"component-menu-item",onPointerdown:qe=>le(ze.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.delete")),41,_hoisted_9$o)])]),_:2},1032,["visible"])]))),256))])]),_:1})])}}}),CharacterSubComponentList=_export_sfc(_sfc_main$14,[["__scopeId","data-v-df1d5fd9"]]),_hoisted_1$12={class:"list-wrapper"},_hoisted_2$10={class:"root-sub-component"},_hoisted_3$D={class:"all-components-list"},_hoisted_4$A={class:"component-item-wrapper"},_hoisted_5$u=["onDragstart","onDragover","onDragend","onDrop","onPointerdown","onContextmenu"],_hoisted_6$r={class:"type"},_hoisted_7$o={class:"tool-wrapper"},_hoisted_8$n={class:"component-menu"},_hoisted_9$n=["onPointerdown"],_sfc_main$13=defineComponent({__name:"GlyphSubComponentList",setup(e){const{t:n}=useI18n(),r=reactive((()=>{const Ce={};return orderedListWithItemsForCurrentGlyph.value.map(Ne=>{Ce[Ne.uuid]=!1}),Ce})()),g=ref(!1);let y="",k=-1,$=-1,V=-1;const L=(Ce,Ne)=>{const $e=selectedItemByUUID(SubComponentsRoot$1.value.value.components,Ce);$e.lock=Ne},z=(Ce,Ne)=>{const $e=selectedItemByUUID(SubComponentsRoot$1.value.value.components,Ce);$e.visible=Ne},j=(Ce,Ne)=>{if(!editGlyph.value.selectedComponentsTree||editGlyph.value.selectedComponentsTree.length<2)return;editGlyph.value.selectedComponentsTree[editGlyph.value.selectedComponentsTree.length-1]=Ne;const $e=selectedItemByUUID(SubComponentsRoot$1.value.value.components,Ne);if($e.type==="glyph"&&$e.value.components&&$e.value.components.length){let xe=!1;for(let Ie=0;Ie<$e.value.components.length;Ie++)if($e.value.components[Ie].type==="glyph"){xe=!0;break}xe&&editGlyph.value.selectedComponentsTree.push("null")}else $e.type==="glyph"&&setTool("glyphDragger")},ae=(Ce,Ne)=>{y=Ne},re=(Ce,Ne)=>{Ce.preventDefault();const $e=SubComponentsRoot$1.value.value.orderedList;for(let xe=0;xe<$e.length;xe++)y===$e[xe].uuid&&(k=xe),Ne===$e[xe].uuid&&($=xe);Ce.offsetY<Ce.target.offsetHeight/2?V=$:Ce.offsetY>Ce.target.offsetHeight/2&&(V=$+1)},oe=(Ce,Ne)=>{y="",y="",k=-1,$=-1,V=-1},ue=(Ce,Ne)=>{const $e=clone(SubComponentsRoot$1.value.value.orderedList);k!==$&&($e.splice(k,1),k<=V&&(V-=1),$e.splice(V,0,{type:"component",uuid:y}),SubComponentsRoot$1.value.value.orderedList=$e)},le=Ce=>{const Ne=SubComponentsRoot$1.value,$e=(()=>{for(let Ie=0;Ie<Ne.value.components.length;Ie++)if(Ne.value.components[Ie].uuid===Ce)return Ie;return-1})();Ne.value.components.splice($e,1);const xe=(()=>{for(let Ie=0;Ie<Ne.value.orderedList.length;Ie++)if(Ne.value.orderedList[Ie].uuid===Ce)return Ie;return-1})();if(xe>=0&&Ne.value.orderedList.splice(xe,1),selectedSubComponent$1.value===Ce){let Ie=editGlyph.value.selectedComponentsTree;Ie[Ie.length-1]!=="null"&&(Ie[Ie.length-1]="null")}SubComponentsRoot$1.value.value.glyph_script&&SubComponentsRoot$1.value.value.glyph_script[Ce]&&delete SubComponentsRoot$1.value.value.glyph_script[Ce],g.value=!1,r[Ce]=!1},de=(Ce,Ne)=>{if(Ce.preventDefault(),g.value)return;g.value=!0,r[Ne]=!0;const $e=xe=>{xe.target.closest(".component.menu")||(g.value=!1,r[Ne]=!1)};document.addEventListener("mousedown",$e)},he=()=>{let Ce=editGlyph.value.selectedComponentsTree;Ce[Ce.length-1]!=="null"&&(Ce[Ce.length-1]="null"),editGlyph.value.selectedComponentsTree=Ce},_e=Ce=>{Ce.stopPropagation();let Ne=editGlyph.value.selectedComponentsTree;Ne.length<=2?Ne=null:(Ne.splice(Ne.length-2,2),Ne.push("null")),editGlyph.value.selectedComponentsTree=Ne};return(Ce,Ne)=>{const $e=resolveComponent("el-icon"),xe=resolveComponent("el-popover"),Ie=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("div",_hoisted_1$12,[createBaseVNode("div",{class:normalizeClass(["list-head",{selected:!unref(selectedSubComponent$1)}]),onPointerdown:he},[createVNode($e,{class:"back-icon",onPointerdown:_e},{default:withCtx(()=>[createVNode(unref(arrow_left_bold_default))]),_:1}),createBaseVNode("div",_hoisted_2$10,toDisplayString$1(unref(SubComponentsRoot$1).value.name),1)],34),createVNode(Ie,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_3$D,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(SubComponents$1),ze=>(openBlock(),createElementBlock("div",_hoisted_4$A,[createVNode(xe,{placement:"right",width:200,trigger:"manual",visible:r[ze.uuid]},{reference:withCtx(()=>[createBaseVNode("div",{class:normalizeClass({component:!0,selected:unref(selectedSubComponent$1)&&unref(selectedSubComponent$1).uuid===ze.uuid}),draggable:!0,onDragstart:qe=>ae(qe,ze.uuid),onDragover:qe=>re(qe,ze.uuid),onDragend:qe=>oe(qe,ze.uuid),onDrop:qe=>ue(qe,ze.uuid),onPointerdown:qe=>j(qe,ze.uuid),onContextmenu:qe=>de(qe,ze.uuid)},[createBaseVNode("span",_hoisted_6$r,toDisplayString$1(ze.name||ze.type),1),createBaseVNode("span",_hoisted_7$o,[createVNode($e,{class:"tool-icon lock",onPointerdown:qe=>L(ze.uuid,!ze.lock)},{default:withCtx(()=>[ze.lock?(openBlock(),createBlock(unref(unlock_default),{key:0})):createCommentVNode("",!0),ze.lock?createCommentVNode("",!0):(openBlock(),createBlock(unref(lock_default),{key:1}))]),_:2},1032,["onPointerdown"]),createVNode($e,{class:"tool-icon visible",onPointerdown:qe=>z(ze.uuid,!ze.visible)},{default:withCtx(()=>[ze.visible?(openBlock(),createBlock(unref(view_default),{key:0})):createCommentVNode("",!0),ze.visible?createCommentVNode("",!0):(openBlock(),createBlock(unref(hide_default),{key:1}))]),_:2},1032,["onPointerdown"])])],42,_hoisted_5$u)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_8$n,[createBaseVNode("div",{class:"component-menu-item",onPointerdown:qe=>le(ze.uuid)},toDisplayString$1(unref(n)("panels.componentList.menu.delete")),41,_hoisted_9$n)])]),_:2},1032,["visible"])]))),256))])]),_:1})])}}}),GlyphSubComponentList=_export_sfc(_sfc_main$13,[["__scopeId","data-v-08b29b98"]]),_hoisted_1$11={class:"left-panel"},_hoisted_2$$={class:"left-panel-header"},_hoisted_3$C={key:2,class:"view"},_hoisted_4$z={class:"left-panel-content"},_sfc_main$12=defineComponent({__name:"LeftPanel",setup(e){const{tm:n,t:r}=useI18n(),g=[{value:"all"},{value:"font"}],y=$=>{setEditPanelCompFilter($)},k=$=>{setGlyphPanelCompFilter($)};return($,V)=>{const L=resolveComponent("el-option"),z=resolveComponent("el-select");return openBlock(),createElementBlock("div",_hoisted_1$11,[withDirectives(createBaseVNode("div",_hoisted_2$$,[unref(editStatus)===unref(Status).Edit?(openBlock(),createBlock(z,{key:0,"model-value":unref(editPanelCompFilter),class:"edit-filter-select",placeholder:"Select",onChange:y},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(g,j=>createVNode(L,{key:j.value,label:unref(n)(`panels.filter.${j.value}`),value:j.value},null,8,["label","value"])),64))]),_:1},8,["model-value"])):unref(editStatus)===unref(Status).Glyph?(openBlock(),createBlock(z,{key:1,"model-value":unref(glyphPanelCompFilter),class:"edit-filter-select",placeholder:"Select",onChange:k},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(g,j=>createVNode(L,{key:j.value,label:unref(n)(`panels.filter.${j.value}`),value:j.value},null,8,["label","value"])),64))]),_:1},8,["model-value"])):createCommentVNode("",!0),unref(editStatus)===unref(Status).Pic?(openBlock(),createElementBlock("div",_hoisted_3$C,toDisplayString$1(unref(r)("panels.view")),1)):createCommentVNode("",!0)],512),[[vShow,unref(editCharacterFile)&&(!unref(editCharacterFile).selectedComponentsTree||!unref(editCharacterFile).selectedComponentsTree.length)||unref(editGlyph)&&(!unref(editGlyph).selectedComponentsTree||!unref(editGlyph).selectedComponentsTree.length)]]),createBaseVNode("div",_hoisted_4$z,[unref(editStatus)===unref(Status).Edit&&unref(editCharacterFile)&&unref(editCharacterFile).selectedComponentsTree&&unref(editCharacterFile).selectedComponentsTree.length?(openBlock(),createBlock(CharacterSubComponentList,{key:0})):unref(editStatus)===unref(Status).Glyph&&unref(editGlyph)&&unref(editGlyph).selectedComponentsTree&&unref(editGlyph).selectedComponentsTree.length?(openBlock(),createBlock(GlyphSubComponentList,{key:1})):unref(editStatus)===unref(Status).Edit?(openBlock(),createBlock(CharacterComponentList,{key:2})):unref(editStatus)===unref(Status).Glyph?(openBlock(),createBlock(GlyphComponentList,{key:3})):unref(editStatus)===unref(Status).Pic?(openBlock(),createBlock(ViewList,{key:4})):createCommentVNode("",!0)])])}}}),LeftPanel=_export_sfc(_sfc_main$12,[["__scopeId","data-v-7c5a0160"]]),_hoisted_1$10={class:"settings-panel"},_hoisted_2$_={class:"background-style-wrap"},_hoisted_3$B={class:"title"},_hoisted_4$y={class:"form-item"},_hoisted_5$t={class:"form-label"},_hoisted_6$q={class:"form-item"},_hoisted_7$n={class:"form-label"},_hoisted_8$m={class:"grid-style-wrap"},_hoisted_9$m={class:"title"},_hoisted_10$m={class:"form-item"},_hoisted_11$l={class:"form-label"},_hoisted_12$j={class:"form-item"},_hoisted_13$h={class:"form-label"},_hoisted_14$h={class:"font-render-style-wrap"},_hoisted_15$d={class:"title"},_hoisted_16$b={class:"form-item"},_hoisted_17$9={class:"form-label"},_sfc_main$11=defineComponent({__name:"SettingsPanel",setup(e){const{t:n}=useI18n(),r=ref("transparent"),g=ref("#FFFFFF"),y=ref("none"),k=ref(20);return watch([r,g,y,k],()=>{switch(y.value){case"none":setGridType(GridType.None);break;case"mesh":setGridType(GridType.Mesh);break;case"mi":setGridType(GridType.Mi);break;case"layout":setGridType(GridType.LayoutGrid);break}switch(r.value){case"color":setBackgroundType(BackgroundType.Color);break;case"transparent":setBackgroundType(BackgroundType.Transparent);break}g.value&&setBackgroundColor(g.value),k.value&&y.value==="mesh"&&setGridPrecision(k.value)}),($,V)=>{const L=resolveComponent("el-radio"),z=resolveComponent("el-radio-group"),j=resolveComponent("el-color-picker"),ae=resolveComponent("el-form"),re=resolveComponent("el-input-number");return openBlock(),createElementBlock("div",_hoisted_1$10,[createBaseVNode("div",_hoisted_2$_,[createBaseVNode("div",_hoisted_3$B,toDisplayString$1(unref(n)("panels.settingsPanel.background.background")),1),createVNode(ae,{class:"background-form","label-width":"80px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_4$y,[createBaseVNode("div",_hoisted_5$t,toDisplayString$1(unref(n)("panels.settingsPanel.background.style")),1),createVNode(z,{modelValue:r.value,"onUpdate:modelValue":V[0]||(V[0]=oe=>r.value=oe)},{default:withCtx(()=>[createVNode(L,{label:"color"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.settingsPanel.background.color")),1)]),_:1}),createVNode(L,{label:"transparent"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.settingsPanel.background.transparent")),1)]),_:1})]),_:1},8,["modelValue"])]),withDirectives(createBaseVNode("div",_hoisted_6$q,[createBaseVNode("div",_hoisted_7$n,toDisplayString$1(unref(n)("panels.settingsPanel.background.color")),1),createVNode(j,{modelValue:g.value,"onUpdate:modelValue":V[1]||(V[1]=oe=>g.value=oe),id:"backgroundColor"},null,8,["modelValue"])],512),[[vShow,r.value==="color"]])]),_:1})]),createBaseVNode("div",_hoisted_8$m,[createBaseVNode("div",_hoisted_9$m,toDisplayString$1(unref(n)("panels.settingsPanel.mesh.mesh")),1),createVNode(ae,{class:"grid-form","label-width":"80px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_10$m,[createBaseVNode("div",_hoisted_11$l,toDisplayString$1(unref(n)("panels.settingsPanel.mesh.style")),1),createVNode(z,{modelValue:y.value,"onUpdate:modelValue":V[2]||(V[2]=oe=>y.value=oe),id:"gridStyle"},{default:withCtx(()=>[createVNode(L,{label:"none"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.settingsPanel.mesh.none")),1)]),_:1}),createVNode(L,{label:"mesh"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.settingsPanel.mesh.mesh")),1)]),_:1}),createVNode(L,{label:"mi"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.settingsPanel.mesh.mi")),1)]),_:1}),createVNode(L,{label:"layout"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.settingsPanel.mesh.layout")),1)]),_:1})]),_:1},8,["modelValue"])]),withDirectives(createBaseVNode("div",_hoisted_12$j,[createBaseVNode("div",_hoisted_13$h,toDisplayString$1(unref(n)("panels.settingsPanel.mesh.precision")),1),createVNode(re,{modelValue:k.value,"onUpdate:modelValue":V[3]||(V[3]=oe=>k.value=oe),min:10,max:50,precision:2},null,8,["modelValue"])],512),[[vShow,y.value==="mesh"]])]),_:1})]),createBaseVNode("div",_hoisted_14$h,[createBaseVNode("div",_hoisted_15$d,toDisplayString$1(unref(n)("panels.settingsPanel.render.render")),1),createVNode(ae,{class:"font-render-form","label-width":"80px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_16$b,[createBaseVNode("div",_hoisted_17$9,toDisplayString$1(unref(n)("panels.settingsPanel.render.style")),1),createVNode(z,{modelValue:unref(fontRenderStyle),"onUpdate:modelValue":V[4]||(V[4]=oe=>isRef(fontRenderStyle)?fontRenderStyle.value=oe:null),id:"renderStyle"},{default:withCtx(()=>[createVNode(L,{label:"contour"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.settingsPanel.render.contour")),1)]),_:1}),createVNode(L,{label:"color"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.settingsPanel.render.color")),1)]),_:1})]),_:1},8,["modelValue"])])]),_:1})])])}}}),SettingsPanel=_export_sfc(_sfc_main$11,[["__scopeId","data-v-c78da787"]]),_hoisted_1$$={class:"pen-edit-panel"},_hoisted_2$Z={key:0,class:"character-edit-panel"},_hoisted_3$A={class:"name-wrap"},_hoisted_4$x={class:"title"},_hoisted_5$s={class:"transform-wrap"},_hoisted_6$p={class:"title"},_hoisted_7$m={key:0,class:"edit-mode-wrap"},_hoisted_8$l={class:"title"},_hoisted_9$l={key:1,class:"glyph-edit-panel"},_hoisted_10$l={class:"name-wrap"},_hoisted_11$k={class:"title"},_hoisted_12$i={class:"transform-wrap"},_hoisted_13$g={class:"title"},_hoisted_14$g={class:"edit-mode-wrap"},_hoisted_15$c={class:"title"},_sfc_main$10=defineComponent({__name:"PenEditPanel",setup(e){const{tm:n,t:r}=useI18n(),g=()=>{saveState("",[StoreType.Pen,editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo)},y=re=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{x:re}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{x:re})},k=re=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{y:re}):editStatus.value===Status.Glyph&&modifyComponentForCurrentCharacterFile(selectedComponentUUID$1.value,{y:re})},$=re=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{w:re}):editStatus.value===Status.Glyph&&modifyComponentForCurrentCharacterFile(selectedComponentUUID$1.value,{w:re})},V=re=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{h:re}):editStatus.value===Status.Glyph&&modifyComponentForCurrentCharacterFile(selectedComponentUUID$1.value,{h:re})},L=re=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{rotation:re}):editStatus.value===Status.Glyph&&modifyComponentForCurrentCharacterFile(selectedComponentUUID$1.value,{rotation:re})},z=re=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{flipX:re}):modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{flipX:re})},j=re=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{flipY:re}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID.value,{flipY:re})},ae=re=>{g(),setOnPenEditMode(re),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{value:{editMode:re}}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{value:{editMode:re}})};return(re,oe)=>{const ue=resolveComponent("el-input"),le=resolveComponent("el-form-item"),de=resolveComponent("el-form"),he=resolveComponent("el-input-number"),_e=resolveComponent("el-switch");return openBlock(),createElementBlock("div",_hoisted_1$$,[unref(editStatus)===unref(Status).Edit?(openBlock(),createElementBlock("div",_hoisted_2$Z,[createBaseVNode("div",_hoisted_3$A,[createBaseVNode("div",_hoisted_4$x,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(de,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("panels.paramsPanel.componentName.label")},{default:withCtx(()=>[createVNode(ue,{modelValue:unref(selectedComponent).name,"onUpdate:modelValue":oe[0]||(oe[0]=Ce=>unref(selectedComponent).name=Ce)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_5$s,[createBaseVNode("div",_hoisted_6$p,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(de,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("panels.paramsPanel.transform.x")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).x,precision:1,onChange:y},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.y")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).y,precision:1,onChange:k},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.w")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).w,precision:1,onChange:$},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.h")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).h,precision:1,onChange:V},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.rotation")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).rotation,precision:1,onChange:L},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.flipX")},{default:withCtx(()=>[createVNode(_e,{"model-value":unref(selectedComponent).flipX,onChange:z},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.flipY")},{default:withCtx(()=>[createVNode(_e,{"model-value":unref(selectedComponent).flipY,onChange:j},null,8,["model-value"])]),_:1},8,["label"])]),_:1})]),unref(selectedComponent).type==="pen"?(openBlock(),createElementBlock("div",_hoisted_7$m,[createBaseVNode("div",_hoisted_8$l,toDisplayString$1(unref(r)("panels.paramsPanel.editMode.title")),1),createVNode(de,{class:"stroke-form","label-width":"80px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("panels.paramsPanel.editMode.label")},{default:withCtx(()=>[createVNode(_e,{"model-value":unref(selectedComponent).value.editMode,onChange:ae},null,8,["model-value"])]),_:1},8,["label"])]),_:1})])):createCommentVNode("",!0)])):unref(editStatus)===unref(Status).Glyph?(openBlock(),createElementBlock("div",_hoisted_9$l,[createBaseVNode("div",_hoisted_10$l,[createBaseVNode("div",_hoisted_11$k,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(de,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("panels.paramsPanel.componentName.label")},{default:withCtx(()=>[createVNode(ue,{modelValue:unref(selectedComponent$1).name,"onUpdate:modelValue":oe[1]||(oe[1]=Ce=>unref(selectedComponent$1).name=Ce)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_12$i,[createBaseVNode("div",_hoisted_13$g,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(de,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("panels.paramsPanel.transform.x")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent$1).x,precision:1,onChange:y},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.y")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent$1).y,precision:1,onChange:k},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.w")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent$1).w,precision:1,onChange:$},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.h")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent$1).h,precision:1,onChange:V},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.rotation")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent$1).rotation,precision:1,onChange:L},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.flipX")},{default:withCtx(()=>[createVNode(_e,{"model-value":unref(selectedComponent$1).flipX,onChange:z},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.flipY")},{default:withCtx(()=>[createVNode(_e,{"model-value":unref(selectedComponent$1).flipY,onChange:j},null,8,["model-value"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_14$g,[createBaseVNode("div",_hoisted_15$c,toDisplayString$1(unref(r)("panels.paramsPanel.editMode.title")),1),createVNode(de,{class:"stroke-form","label-width":"80px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("panels.paramsPanel.editMode.label")},{default:withCtx(()=>[createVNode(_e,{"model-value":unref(selectedComponent$1).value.editMode,onChange:ae},null,8,["model-value"])]),_:1},8,["label"])]),_:1})])])):createCommentVNode("",!0)])}}}),PenEditPanel=_export_sfc(_sfc_main$10,[["__scopeId","data-v-7ecdbe4a"]]),_hoisted_1$_={class:"polygon-edit-panel"},_hoisted_2$Y={key:0,class:"character-edit-panel"},_hoisted_3$z={class:"name-wrap"},_hoisted_4$w={class:"title"},_hoisted_5$r={class:"transform-wrap"},_hoisted_6$o={class:"title"},_hoisted_7$l={key:0,class:"transform-to-curve-wrap"},_hoisted_8$k={class:"title"},_hoisted_9$k={key:1,class:"glyph-edit-panel"},_hoisted_10$k={class:"name-wrap"},_hoisted_11$j={class:"title"},_hoisted_12$h={class:"transform-wrap"},_hoisted_13$f={class:"title"},_hoisted_14$f={key:0,class:"transform-to-curve-wrap"},_hoisted_15$b={class:"title"},_sfc_main$$=defineComponent({__name:"PolygonEditPanel",setup(e){const{tm:n,t:r}=useI18n(),g=()=>{saveState("",[editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo)},y=j=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{x:j}):editStatus.value===Status.Glyph&&modifyComponentForCurrentCharacterFile(selectedComponentUUID$1.value,{x:j})},k=j=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{y:j}):editStatus.value===Status.Glyph&&modifyComponentForCurrentCharacterFile(selectedComponentUUID$1.value,{y:j})},$=j=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{w:j}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{w:j})},V=j=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{h:j}):editStatus.value===Status.Glyph&&modifyComponentForCurrentCharacterFile(selectedComponentUUID$1.value,{h:j})},L=j=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{rotation:j}):editStatus.value===Status.Glyph&&modifyComponentForCurrentCharacterFile(selectedComponentUUID$1.value,{rotation:j})},z=()=>{g();const j=selectedComponent.value.value,{x:ae,y:re,w:oe,h:ue,rotation:le,flipX:de,flipY:he}=selectedComponent.value,_e=transformPoints(j.points.map(_n=>({x:_n.x,y:_n.y})),{x:ae,y:re,w:oe,h:ue,rotation:le,flipX:de,flipY:he});let Ce=[];const Ne=[];for(let _n=0;_n<_e.length-1;_n++)Ne.push([_e[_n].x,_e[_n].y]);(_e[_e.length-1].x!==_e[0].x||_e[_e.length-1].y!==_e[0].y)&&Ne.push([_e[_e.length-1].x,_e[_e.length-1].y]);let $e=new paper.Path({segments:Ne,closed:!0});$e.smooth();let xe=genUUID();for(let _n=0;_n<$e.curves.length;_n++){const Dt=$e.curves[_n],Sn=genUUID(),hn=genUUID();Ce.push({uuid:xe,x:Dt.points[0].x,y:Dt.points[0].y,type:"anchor",origin:null,isShow:!0}),Ce.push({uuid:Sn,x:Dt.points[1].x,y:Dt.points[1].y,type:"control",origin:xe,isShow:!1}),xe=genUUID(),Ce.push({uuid:hn,x:Dt.points[2].x,y:Dt.points[2].y,type:"control",origin:xe,isShow:!1}),_n>=$e.curves.length-1&&Ce.push({uuid:xe,x:Dt.points[3].x,y:Dt.points[3].y,type:"anchor",origin:null,isShow:!0})}const{x:Ie,y:ze,w:qe,h:Et}=getBound$5(Ce);editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{value:{points:Ce,editMode:!1},type:"pen",x:Ie,y:ze,w:qe,h:Et,rotation:0}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{value:{points:Ce,editMode:!1},type:"pen",x:Ie,y:ze,w:qe,h:Et,rotation:0})};return(j,ae)=>{const re=resolveComponent("el-input"),oe=resolveComponent("el-form-item"),ue=resolveComponent("el-form"),le=resolveComponent("el-input-number"),de=resolveComponent("el-button");return openBlock(),createElementBlock("div",_hoisted_1$_,[unref(editStatus)===unref(Status).Edit?(openBlock(),createElementBlock("div",_hoisted_2$Y,[createBaseVNode("div",_hoisted_3$z,[createBaseVNode("div",_hoisted_4$w,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(ue,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(oe,{label:unref(n)("panels.paramsPanel.componentName.label")},{default:withCtx(()=>[createVNode(re,{modelValue:unref(selectedComponent).name,"onUpdate:modelValue":ae[0]||(ae[0]=he=>unref(selectedComponent).name=he)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_5$r,[createBaseVNode("div",_hoisted_6$o,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(ue,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.x")},{default:withCtx(()=>[createVNode(le,{"model-value":unref(selectedComponent).x,precision:1,onChange:y},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.y")},{default:withCtx(()=>[createVNode(le,{"model-value":unref(selectedComponent).y,precision:1,onChange:k},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.w")},{default:withCtx(()=>[createVNode(le,{"model-value":unref(selectedComponent).w,precision:1,onChange:$},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.h")},{default:withCtx(()=>[createVNode(le,{"model-value":unref(selectedComponent).h,precision:1,onChange:V},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.rotation")},{default:withCtx(()=>[createVNode(le,{"model-value":unref(selectedComponent).rotation,precision:1,onChange:L},null,8,["model-value"])]),_:1},8,["label"])]),_:1})]),unref(selectedComponent).type==="polygon"?(openBlock(),createElementBlock("div",_hoisted_7$l,[createBaseVNode("div",_hoisted_8$k,toDisplayString$1(unref(r)("panels.paramsPanel.transformToCurve.title")),1),createVNode(de,{onPointerdown:z},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.transformToCurve.label")),1)]),_:1})])):createCommentVNode("",!0)])):unref(editStatus)===unref(Status).Glyph?(openBlock(),createElementBlock("div",_hoisted_9$k,[createBaseVNode("div",_hoisted_10$k,[createBaseVNode("div",_hoisted_11$j,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(ue,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(oe,{label:unref(n)("panels.paramsPanel.componentName.label")},{default:withCtx(()=>[createVNode(re,{modelValue:unref(selectedComponent$1).name,"onUpdate:modelValue":ae[1]||(ae[1]=he=>unref(selectedComponent$1).name=he)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_12$h,[createBaseVNode("div",_hoisted_13$f,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(ue,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.x")},{default:withCtx(()=>[createVNode(le,{"model-value":unref(selectedComponent$1).x,precision:1,onChange:y},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.y")},{default:withCtx(()=>[createVNode(le,{"model-value":unref(selectedComponent$1).y,precision:1,onChange:k},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.w")},{default:withCtx(()=>[createVNode(le,{"model-value":unref(selectedComponent$1).w,precision:1,onChange:$},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.h")},{default:withCtx(()=>[createVNode(le,{"model-value":unref(selectedComponent$1).h,precision:1,onChange:V},null,8,["model-value"])]),_:1},8,["label"]),createVNode(oe,{label:unref(n)("panels.paramsPanel.transform.rotation")},{default:withCtx(()=>[createVNode(le,{"model-value":unref(selectedComponent$1).rotation,precision:1,onChange:L},null,8,["model-value"])]),_:1},8,["label"])]),_:1})]),unref(selectedComponent$1).type==="polygon"?(openBlock(),createElementBlock("div",_hoisted_14$f,[createBaseVNode("div",_hoisted_15$b,toDisplayString$1(unref(r)("panels.paramsPanel.transformToCurve.title")),1),createVNode(de,{onPointerdown:z},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.transformToCurve.label")),1)]),_:1})])):createCommentVNode("",!0)])):createCommentVNode("",!0)])}}}),PolygonEditPanel=_export_sfc(_sfc_main$$,[["__scopeId","data-v-1066c99c"]]),_hoisted_1$Z={class:"picture-edit-panel"},_hoisted_2$X={class:"name-wrap"},_hoisted_3$y={class:"title"},_hoisted_4$v={class:"transform-wrap"},_hoisted_5$q={class:"title"},_hoisted_6$n={class:"opacity-wrap"},_hoisted_7$k={class:"title"},_sfc_main$_=defineComponent({__name:"PictureEditPanel",setup(e){const{tm:n,t:r}=useI18n(),g=()=>{saveState("",[editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo)},y=re=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{x:re}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{x:re})},k=re=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{y:re}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{y:re})},$=re=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{w:re}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{w:re})},V=re=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{h:re}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{h:re})},L=re=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{rotation:re}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{rotation:re})};let z=null,j=!1;const ae=re=>{z&&clearTimeout(z),z=setTimeout(()=>{j=!1,clearTimeout(z)},500),j||(g(),j=!0),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{opacity:re}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{opacity:re})};return(re,oe)=>{const ue=resolveComponent("el-input"),le=resolveComponent("el-form-item"),de=resolveComponent("el-form"),he=resolveComponent("el-input-number"),_e=resolveComponent("el-slider");return openBlock(),createElementBlock("div",_hoisted_1$Z,[createBaseVNode("div",_hoisted_2$X,[createBaseVNode("div",_hoisted_3$y,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(de,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("panels.paramsPanel.componentName.label")},{default:withCtx(()=>[createVNode(ue,{modelValue:unref(selectedComponent).name,"onUpdate:modelValue":oe[0]||(oe[0]=Ce=>unref(selectedComponent).name=Ce)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_4$v,[createBaseVNode("div",_hoisted_5$q,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(de,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("panels.paramsPanel.transform.x")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).x,precision:1,onChange:y},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.y")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).y,precision:1,onChange:k},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.w")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).w,precision:1,onChange:$},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.h")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).h,precision:1,onChange:V},null,8,["model-value"])]),_:1},8,["label"]),createVNode(le,{label:unref(n)("panels.paramsPanel.transform.rotation")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).rotation,precision:1,onChange:L},null,8,["model-value"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_6$n,[createBaseVNode("div",_hoisted_7$k,toDisplayString$1(unref(n)("panels.paramsPanel.opacity.title")),1),createVNode(de,{class:"opacitym-form","label-width":"80px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("panels.paramsPanel.opacity.opacity")},{default:withCtx(()=>[createVNode(he,{"model-value":unref(selectedComponent).opacity,min:0,max:1,step:.05,onChange:ae},null,8,["model-value"]),createVNode(_e,{"model-value":unref(selectedComponent).opacity,precision:.01,min:0,max:1,step:.05,onInput:ae},null,8,["model-value"])]),_:1},8,["label"])]),_:1})])])}}}),PictureEditPanel=_export_sfc(_sfc_main$_,[["__scopeId","data-v-7e1bd557"]]),_hoisted_1$Y={class:"rectangle-edit-panel"},_hoisted_2$W={key:0,class:"character-edit-panel"},_hoisted_3$x={class:"name-wrap"},_hoisted_4$u={class:"title"},_hoisted_5$p={class:"transform-wrap"},_hoisted_6$m={class:"title"},_hoisted_7$j={key:1,class:"glyph-edit-panel"},_hoisted_8$j={class:"name-wrap"},_hoisted_9$j={class:"title"},_hoisted_10$j={class:"transform-wrap"},_hoisted_11$i={class:"title"},_sfc_main$Z=defineComponent({__name:"RectangleEditPanel",setup(e){const{tm:n,t:r}=useI18n(),g=()=>{saveState("",[editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo)},y=z=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{x:z}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{x:z})},k=z=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{y:z}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{y:z})},$=z=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{w:z}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{w:z})},V=z=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{h:z}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{h:z})},L=z=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{rotation:z}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{rotation:z})};return(z,j)=>{const ae=resolveComponent("el-input"),re=resolveComponent("el-form-item"),oe=resolveComponent("el-form"),ue=resolveComponent("el-input-number");return openBlock(),createElementBlock("div",_hoisted_1$Y,[unref(editStatus)===unref(Status).Edit?(openBlock(),createElementBlock("div",_hoisted_2$W,[createBaseVNode("div",_hoisted_3$x,[createBaseVNode("div",_hoisted_4$u,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(oe,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(re,{label:unref(n)("panels.paramsPanel.componentName.label")},{default:withCtx(()=>[createVNode(ae,{modelValue:unref(selectedComponent).name,"onUpdate:modelValue":j[0]||(j[0]=le=>unref(selectedComponent).name=le)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_5$p,[createBaseVNode("div",_hoisted_6$m,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(oe,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(re,{label:unref(n)("panels.paramsPanel.transform.x")},{default:withCtx(()=>[createVNode(ue,{"model-value":unref(selectedComponent).x,precision:1,onChange:y},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.y")},{default:withCtx(()=>[createVNode(ue,{"model-value":unref(selectedComponent).y,precision:1,onChange:k},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.w")},{default:withCtx(()=>[createVNode(ue,{"model-value":unref(selectedComponent).w,precision:1,onChange:$},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.h")},{default:withCtx(()=>[createVNode(ue,{"model-value":unref(selectedComponent).h,precision:1,onChange:V},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.rotation")},{default:withCtx(()=>[createVNode(ue,{"model-value":unref(selectedComponent).rotation,precision:1,onChange:L},null,8,["model-value"])]),_:1},8,["label"])]),_:1})])])):unref(editStatus)===unref(Status).Glyph?(openBlock(),createElementBlock("div",_hoisted_7$j,[createBaseVNode("div",_hoisted_8$j,[createBaseVNode("div",_hoisted_9$j,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(oe,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(re,{label:unref(n)("panels.paramsPanel.componentName.label")},{default:withCtx(()=>[createVNode(ae,{modelValue:unref(selectedComponent$1).name,"onUpdate:modelValue":j[1]||(j[1]=le=>unref(selectedComponent$1).name=le)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_10$j,[createBaseVNode("div",_hoisted_11$i,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(oe,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(re,{label:unref(n)("panels.paramsPanel.transform.x")},{default:withCtx(()=>[createVNode(ue,{"model-value":unref(selectedComponent$1).x,precision:1,onChange:y},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.y")},{default:withCtx(()=>[createVNode(ue,{"model-value":unref(selectedComponent$1).y,precision:1,onChange:k},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.w")},{default:withCtx(()=>[createVNode(ue,{"model-value":unref(selectedComponent$1).w,precision:1,onChange:$},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.h")},{default:withCtx(()=>[createVNode(ue,{"model-value":unref(selectedComponent$1).h,precision:1,onChange:V},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.rotation")},{default:withCtx(()=>[createVNode(ue,{"model-value":unref(selectedComponent$1).rotation,precision:1,onChange:L},null,8,["model-value"])]),_:1},8,["label"])]),_:1})])])):createCommentVNode("",!0)])}}}),RectangleEditPanel=_export_sfc(_sfc_main$Z,[["__scopeId","data-v-cdd50d75"]]),_hoisted_1$X={class:"ellipse-edit-panel"},_hoisted_2$V={key:0,class:"character-edit-panel"},_hoisted_3$w={class:"name-wrap"},_hoisted_4$t={class:"title"},_hoisted_5$o={class:"transform-wrap"},_hoisted_6$l={class:"title"},_hoisted_7$i={key:1,class:"glyph-edit-panel"},_hoisted_8$i={class:"name-wrap"},_hoisted_9$i={class:"title"},_hoisted_10$i={class:"transform-wrap"},_hoisted_11$h={class:"title"},_sfc_main$Y=defineComponent({__name:"EllipseEditPanel",setup(e){const{tm:n,t:r}=useI18n(),g=()=>{saveState("",[editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo)},y=z=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{x:z}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{x:z})},k=z=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{y:z}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{y:z})},$=z=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{w:z}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{w:z})},V=z=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{h:z}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{h:z})},L=z=>{g(),editStatus.value===Status.Edit?modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{rotation:z}):editStatus.value===Status.Glyph&&modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{rotation:z})};return(z,j)=>{const ae=resolveComponent("el-input"),re=resolveComponent("el-form-item"),oe=resolveComponent("el-form"),ue=resolveComponent("el-input-number");return openBlock(),createElementBlock("div",_hoisted_1$X,[unref(editStatus)===unref(Status).Edit?(openBlock(),createElementBlock("div",_hoisted_2$V,[createBaseVNode("div",_hoisted_3$w,[createBaseVNode("div",_hoisted_4$t,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(oe,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(re,{label:unref(n)("panels.paramsPanel.componentName.label"),prop:"name"},{default:withCtx(()=>[createVNode(ae,{id:"name",modelValue:unref(selectedComponent).name,"onUpdate:modelValue":j[0]||(j[0]=le=>unref(selectedComponent).name=le)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_5$o,[createBaseVNode("div",_hoisted_6$l,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(oe,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(re,{label:unref(n)("panels.paramsPanel.transform.x"),prop:"x"},{default:withCtx(()=>[createVNode(ue,{id:"x","model-value":unref(selectedComponent).x,precision:1,onChange:y},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.y"),prop:"y"},{default:withCtx(()=>[createVNode(ue,{id:"y","model-value":unref(selectedComponent).y,precision:1,onChange:k},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.w"),prop:"w"},{default:withCtx(()=>[createVNode(ue,{id:"w","model-value":unref(selectedComponent).w,precision:1,onChange:$},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.h"),prop:"h"},{default:withCtx(()=>[createVNode(ue,{id:"h","model-value":unref(selectedComponent).h,precision:1,onChange:V},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.rotation"),prop:"rotation"},{default:withCtx(()=>[createVNode(ue,{id:"rotation","model-value":unref(selectedComponent).rotation,precision:1,onChange:L},null,8,["model-value"])]),_:1},8,["label"])]),_:1})])])):unref(editStatus)===unref(Status).Glyph?(openBlock(),createElementBlock("div",_hoisted_7$i,[createBaseVNode("div",_hoisted_8$i,[createBaseVNode("div",_hoisted_9$i,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(oe,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(re,{label:unref(n)("panels.paramsPanel.componentName.label"),prop:"name"},{default:withCtx(()=>[createVNode(ae,{id:"name",modelValue:unref(selectedComponent$1).name,"onUpdate:modelValue":j[1]||(j[1]=le=>unref(selectedComponent$1).name=le)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_10$i,[createBaseVNode("div",_hoisted_11$h,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(oe,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(re,{label:unref(n)("panels.paramsPanel.transform.x"),prop:"x"},{default:withCtx(()=>[createVNode(ue,{id:"x","model-value":unref(selectedComponent$1).x,precision:1,onChange:y},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.y"),prop:"y"},{default:withCtx(()=>[createVNode(ue,{id:"y","model-value":unref(selectedComponent$1).y,precision:1,onChange:k},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.w"),prop:"w"},{default:withCtx(()=>[createVNode(ue,{id:"w","model-value":unref(selectedComponent$1).w,precision:1,onChange:$},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.h"),prop:"h"},{default:withCtx(()=>[createVNode(ue,{id:"h","model-value":unref(selectedComponent$1).h,precision:1,onChange:V},null,8,["model-value"])]),_:1},8,["label"]),createVNode(re,{label:unref(n)("panels.paramsPanel.transform.rotation"),prop:"rotation"},{default:withCtx(()=>[createVNode(ue,{id:"rotation","model-value":unref(selectedComponent$1).rotation,precision:1,onChange:L},null,8,["model-value"])]),_:1},8,["label"])]),_:1})])])):createCommentVNode("",!0)])}}}),EllipseEditPanel=_export_sfc(_sfc_main$Y,[["__scopeId","data-v-d5aa5a9e"]]),_hoisted_1$W={class:"picture-edit-panel"},_hoisted_2$U={class:"effect-wrapper step-1-wrapper"},_hoisted_3$v={class:"title"},_hoisted_4$s={key:0,class:"global-effect"},_hoisted_5$n={key:0,class:"tip"},_hoisted_6$k={key:1,class:"local-brush"},_hoisted_7$h={class:"effect-wrapper"},_hoisted_8$h={class:"title"},_hoisted_9$h={class:"content"},_hoisted_10$h={class:"effect-wrapper step-3-wrapper"},_hoisted_11$g={class:"title"},_hoisted_12$g={class:"effect-wrapper"},_hoisted_13$e={class:"title"},_hoisted_14$e={class:"content"},_sfc_main$X=defineComponent({__name:"FontPicEditPanel",setup(e){const{tm:n,t:r}=useI18n();let g=rThreshold.value,y=gThreshold.value,k=bThreshold.value,$=maxError.value;const V=Ne=>{setStep(Ne),step.value===1&&(previewStatus.value=1,g=rThreshold.value,y=gThreshold.value,k=bThreshold.value),step.value===3&&(previewStatus.value=3,$=maxError.value)},L=()=>{enableLocalBrush.value?(enableLocalBrush.value=!1,emitter.emit("toggleLocalBrushEdit",!1),_e()):(g=rThreshold.value,y=gThreshold.value,k=bThreshold.value,step.value=0,_e())},z=()=>{_e()},j=()=>{},ae=()=>{},re=()=>{enableLocalBrush.value?(enableLocalBrush.value=!1,emitter.emit("toggleLocalBrushEdit",!1)):(rThreshold.value=g,gThreshold.value=y,bThreshold.value=k,step.value=0,_e())},oe=()=>{$=maxError.value,step.value=0,Ce()},ue=()=>{maxError.value=$,step.value=0,Ce()},le=()=>{Ce()},de=()=>{Ce()},he=()=>{const{thumbnailCanvas:Ne,thumbnailPixels:$e}=editCharacterPic.value,xe=toBlackWhiteBitMap($e,{r:rThreshold.value,g:gThreshold.value,b:bThreshold.value},{x:0,y:0,size:-1,width:Ne.width,height:Ne.height});setBitMap({data:xe,width:Ne.width,height:Ne.height}),editCharacterPic.value.processPixels=xe,localRThreshold.value=rThreshold.value,localGThreshold.value=gThreshold.value,localBThreshold.value=bThreshold.value,setEnableLocalBrush(!0),emitter.emit("toggleLocalBrushEdit",!0)},_e=()=>{clearContoursComponent(),clearCurvesComponent();const{thumbnailCanvas:Ne,processPixels:$e}=editCharacterPic.value;let xe=[];enableLocalBrush.value?xe=$e:xe=toBlackWhiteBitMap($e,{r:rThreshold.value,g:gThreshold.value,b:bThreshold.value},{x:0,y:0,size:-1,width:Ne.width,height:Ne.height}),setBitMap({data:xe,width:Ne.width,height:Ne.height});const{canvas:Ie}=reversePixels(xe,bitmap.value.width,bitmap.value.height),ze=Ie.getContext("2d"),qe=Ie.width,Et=Ie.height,_n=ze.getImageData(0,0,qe,Et);let Dt=cv.matFromImageData(_n);cv.cvtColor(Dt,Dt,cv.COLOR_RGBA2GRAY,0),cv.threshold(Dt,Dt,120,200,cv.THRESH_BINARY);let Sn=new cv.MatVector,hn=new cv.Mat;cv.findContours(Dt,Sn,hn,cv.RETR_CCOMP,cv.CHAIN_APPROX_NONE);const Vn=[];for(let ca=0;ca<Sn.size();ca++){const Zn=Sn.get(ca);for(let Bn=0;Bn<Zn.rows;Bn++)Vn.push({x:Zn.data32S[Bn*2],y:Zn.data32S[Bn*2+1]})}const{x:Mn,y:$n,w:Nn,h:kn}=getBound$5(Vn);let jn,Fn;const Tn=500;Nn>kn?(jn=Tn,Fn=kn/Nn*jn):(Fn=Tn,jn=Nn/kn*Fn);const Hn=jn/Nn,la=Fn/kn;for(let ca=0;ca<Sn.size();ca++){const Zn=[],Bn=Sn.get(ca);for(let At=0;At<Bn.rows;At++)Zn.push({uuid:genUUID(),x:Bn.data32S[At*2],y:Bn.data32S[At*2+1]});Zn.push({uuid:genUUID(),x:Bn.data32S[0],y:Bn.data32S[1]});const{x:Wn,y:da,w:ga,h:Ca}=getBound$5(Zn),ra=transformPoints(Zn,{x:(Wn-Mn)*Hn,y:(da-$n)*la,w:ga*Hn,h:Ca*la,rotation:0,flipX:!1,flipY:!1}).map(At=>({uuid:genUUID(),...At})),{x:Gn,y:vn,w:Kn,h:En}=getBound$5(ra.reduce((At,Dn)=>(At.push({x:Dn.x,y:Dn.y}),At),[])),kt={uuid:genUUID(),type:"polygon",name:"polygon",lock:!1,visible:!0,value:{points:ra,fillColor:hn.data32S[ca*4+3]===-1?"#000":"#fff",strokeColor:"#000",closePath:!0},x:Gn,y:vn,w:Kn,h:En,rotation:0,flipX:!1,flipY:!1,usedInCharacter:!1};addContoursComponent(kt)}contoursComponents.value.map(ca=>{if(ca.type==="polygon"){const Zn=ca.value.points,Bn=fitCurve(Zn,maxError.value);let Wn=[];Bn.map((vn,Kn)=>{const En=genUUID(),kt=genUUID(),At=genUUID(),Dn=genUUID();Wn.push({uuid:En,x:vn[0].x,y:vn[0].y,type:"anchor",origin:null,isShow:!0}),Wn.push({uuid:kt,x:vn[1].x,y:vn[1].y,type:"control",origin:En,isShow:!1}),Wn.push({uuid:At,x:vn[2].x,y:vn[2].y,type:"control",origin:Dn,isShow:!1}),Kn>=Bn.length-1&&Wn.push({uuid:Dn,x:vn[3].x,y:vn[3].y,type:"anchor",origin:null,isShow:!0})});const{x:da,y:ga,w:Ca,h:ra}=getBound$5(Wn),Gn=clone(ca);Gn.uuid=genUUID(),Gn.value.points=Wn,Gn.value.editMode=!1,Gn.type="pen",Gn.name="pic-contour",Gn.x=da,Gn.y=ga,Gn.w=Ca,Gn.h=ra,Gn.rotation=0,Gn.usedInCharacter=!0,addCurvesComponent(Gn)}})},Ce=()=>{clearCurvesComponent(),contoursComponents.value.filter(Ne=>Ne.value.points.length>=dropThreshold.value).map(Ne=>{if(Ne.type==="polygon"){const $e=Ne.value.points,xe=fitCurve($e,maxError.value);let Ie=[];if(!xe.length)return;Ie.push({uuid:genUUID(),x:xe[0][0].x,y:xe[0][0].y,type:"anchor",origin:null,isShow:!0}),xe.map((Sn,hn)=>{const Vn=genUUID(),Mn=genUUID(),$n=genUUID();Ie.push({uuid:Vn,x:Sn[1].x,y:Sn[1].y,type:"control",origin:Ie[Ie.length-1].uuid,isShow:!1}),Ie.push({uuid:Mn,x:Sn[2].x,y:Sn[2].y,type:"control",origin:$n,isShow:!1}),Ie.push({uuid:$n,x:Sn[3].x,y:Sn[3].y,type:"anchor",origin:null,isShow:!0})});const{x:ze,y:qe,w:Et,h:_n}=getBound$5(Ie),Dt=clone(Ne);Dt.uuid=genUUID(),Dt.value.points=Ie,Dt.value.editMode=!1,Dt.type="pen",Dt.name="pic-contour",Dt.x=ze,Dt.y=qe,Dt.w=Et,Dt.h=_n,Dt.rotation=0,Dt.usedInCharacter=!0,addCurvesComponent(Dt)}})};return emitter.on("resetEditFontPic",()=>{_e()}),(Ne,$e)=>{const xe=resolveComponent("el-slider"),Ie=resolveComponent("el-form-item"),ze=resolveComponent("el-button"),qe=resolveComponent("el-button-group"),Et=resolveComponent("el-form"),_n=resolveComponent("el-input-number");return openBlock(),createElementBlock("div",_hoisted_1$W,[createBaseVNode("div",_hoisted_2$U,[createBaseVNode("div",_hoisted_3$v,toDisplayString$1(unref(r)("panels.picEditPanel.step1.title")),1),createVNode(Et,{class:"bitmap-form form","label-width":"40px"},{default:withCtx(()=>[unref(enableLocalBrush).value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_4$s,[createVNode(Ie,{label:"r"},{default:withCtx(()=>[createVNode(xe,{modelValue:unref(rThreshold),"onUpdate:modelValue":$e[0]||($e[0]=Dt=>isRef(rThreshold)?rThreshold.value=Dt:null),"show-input":"",size:"small",min:0,max:255,disabled:unref(step)!==1,onChange:z},null,8,["modelValue","disabled"])]),_:1}),createVNode(Ie,{label:"g"},{default:withCtx(()=>[createVNode(xe,{modelValue:unref(gThreshold),"onUpdate:modelValue":$e[1]||($e[1]=Dt=>isRef(gThreshold)?gThreshold.value=Dt:null),"show-input":"",size:"small",min:0,max:255,disabled:unref(step)!==1,onChange:z},null,8,["modelValue","disabled"])]),_:1}),createVNode(Ie,{label:"b"},{default:withCtx(()=>[createVNode(xe,{modelValue:unref(bThreshold),"onUpdate:modelValue":$e[2]||($e[2]=Dt=>isRef(bThreshold)?bThreshold.value=Dt:null),"show-input":"",size:"small",min:0,max:255,disabled:unref(step)!==1,onChange:z},null,8,["modelValue","disabled"])]),_:1}),unref(step)===1?(openBlock(),createElementBlock("div",_hoisted_5$n,[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.step1.tip")),1),createVNode(ze,{type:"primary",text:"",onPointerdown:he},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.step1.localBrush")),1)]),_:1})])):createCommentVNode("",!0)])),unref(enableLocalBrush).value&&unref(step)===1?(openBlock(),createElementBlock("div",_hoisted_6$k,[createVNode(Ie,{label:"r"},{default:withCtx(()=>[createVNode(xe,{modelValue:unref(localRThreshold),"onUpdate:modelValue":$e[3]||($e[3]=Dt=>isRef(localRThreshold)?localRThreshold.value=Dt:null),"show-input":"",size:"small",min:0,max:255,disabled:unref(step)!==1,onChange:ae},null,8,["modelValue","disabled"])]),_:1}),createVNode(Ie,{label:"g"},{default:withCtx(()=>[createVNode(xe,{modelValue:unref(localGThreshold),"onUpdate:modelValue":$e[4]||($e[4]=Dt=>isRef(localGThreshold)?localGThreshold.value=Dt:null),"show-input":"",size:"small",min:0,max:255,disabled:unref(step)!==1,onChange:ae},null,8,["modelValue","disabled"])]),_:1}),createVNode(Ie,{label:"b"},{default:withCtx(()=>[createVNode(xe,{modelValue:unref(localBThreshold),"onUpdate:modelValue":$e[5]||($e[5]=Dt=>isRef(localBThreshold)?localBThreshold.value=Dt:null),"show-input":"",size:"small",min:0,max:255,disabled:unref(step)!==1,onChange:ae},null,8,["modelValue","disabled"])]),_:1}),createVNode(Ie,{label:unref(n)("panels.picEditPanel.step1.brush")},{default:withCtx(()=>[createVNode(xe,{modelValue:unref(localBrushSize),"onUpdate:modelValue":$e[6]||($e[6]=Dt=>isRef(localBrushSize)?localBrushSize.value=Dt:null),"show-input":"",size:"small",min:1,max:50,disabled:unref(step)!==1,onChange:j},null,8,["modelValue","disabled"])]),_:1},8,["label"])])):createCommentVNode("",!0),createVNode(qe,{class:"step-button-group"},{default:withCtx(()=>[createVNode(ze,{disabled:unref(step)!==1,onPointerdown:L,size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.confirm")),1)]),_:1},8,["disabled"]),createVNode(ze,{disabled:unref(step)!==1,onPointerdown:re,size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.cancel")),1)]),_:1},8,["disabled"]),createVNode(ze,{type:"primary",disabled:unref(step)===1,onPointerdown:$e[7]||($e[7]=Dt=>V(1)),size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.edit")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),createBaseVNode("div",_hoisted_7$h,[createBaseVNode("div",_hoisted_8$h,toDisplayString$1(unref(r)("panels.picEditPanel.step2.title")),1),createBaseVNode("div",_hoisted_9$h,toDisplayString$1(unref(r)("panels.picEditPanel.step2.content")),1)]),createBaseVNode("div",_hoisted_10$h,[createBaseVNode("div",_hoisted_11$g,toDisplayString$1(unref(r)("panels.picEditPanel.step3.title")),1),createVNode(Et,{class:"fit-curve-form form","label-width":"50px"},{default:withCtx(()=>[createVNode(Ie,{label:""},{default:withCtx(()=>[createVNode(_n,{modelValue:unref(maxError),"onUpdate:modelValue":$e[8]||($e[8]=Dt=>isRef(maxError)?maxError.value=Dt:null),min:1,max:10,disabled:unref(step)!==3,onInput:le,precision:2},null,8,["modelValue","disabled"])]),_:1}),createVNode(Ie,{label:""},{default:withCtx(()=>[createVNode(_n,{modelValue:unref(dropThreshold),"onUpdate:modelValue":$e[9]||($e[9]=Dt=>isRef(dropThreshold)?dropThreshold.value=Dt:null),min:0,max:100,disabled:unref(step)!==3,onInput:de,precision:2},null,8,["modelValue","disabled"])]),_:1}),createVNode(qe,{class:"step-button-group"},{default:withCtx(()=>[createVNode(ze,{disabled:unref(step)!==3,onPointerdown:oe,size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.confirm")),1)]),_:1},8,["disabled"]),createVNode(ze,{disabled:unref(step)!==3,onPointerdown:ue,size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.cancel")),1)]),_:1},8,["disabled"]),createVNode(ze,{type:"primary",disabled:unref(step)===3,onPointerdown:$e[10]||($e[10]=Dt=>V(3)),size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.edit")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),createBaseVNode("div",_hoisted_12$g,[createBaseVNode("div",_hoisted_13$e,toDisplayString$1(unref(r)("panels.picEditPanel.step4.title")),1),createBaseVNode("div",_hoisted_14$e,toDisplayString$1(unref(r)("panels.picEditPanel.step4.content")),1)])])}}}),FontPicEditPanel=_export_sfc(_sfc_main$X,[["__scopeId","data-v-2672c465"]]),_hoisted_1$V={class:"widget ringController"},_hoisted_2$T=["width","height"],outerSize=12,_sfc_main$W=defineComponent({__name:"RingController",props:{radius:Object({min:Number,max:Number,value:Number,name:String}),degree:Object({min:Number,max:Number,value:Number,name:String}),params:Array,size:{type:Number,default:50},onChange:Function},setup(e){const n=e,{radius:r,degree:g,params:y,size:k,onChange:$}=toRefs(n),V=ref(null),L=k.value-outerSize*2,z=Ce=>Math.PI/180*Ce,j=Ce=>Ce/Math.PI*180;onMounted(()=>{_e(),V.value.addEventListener("mousedown",le)});const ae=(Ce,Ne,$e,xe)=>Math.sqrt((Ce-$e)*(Ce-$e)+(Ne-xe)*(Ne-xe)),re=computed(()=>L/2/(r.value.max-r.value.min)*(r.value.value-r.value.min)),oe=ref("defualt");let ue=-1;const le=Ce=>{ae(Ce.offsetX,Ce.offsetY,k.value/2+re?.value*Math.cos(z(g?.value.value)),k.value/2-re?.value*Math.sin(z(g?.value.value)))<=5&&(document.body.addEventListener("mousemove",de),document.body.addEventListener("mouseup",he),Ce.offsetX,Ce.offsetY,oe.value="inner-move");for(let Ne=0;Ne<(y?.value).length;Ne++){const $e=(y?.value)[Ne],xe=2*Math.PI*Ne/(y?.value).length,Ie=xe+2*Math.PI/(y?.value).length,ze=k.value/2-outerSize/2,qe=xe+(Ie-xe)/($e.max-$e.min)*($e.value-$e.min);ae(Ce.offsetX,Ce.offsetY,k.value/2+ze*Math.cos(qe),k.value/2+ze*Math.sin(qe))<=5&&(document.body.addEventListener("mousemove",de),document.body.addEventListener("mouseup",he),Ce.offsetX,Ce.offsetY,ue=Ne,oe.value="outer-move")}},de=Ce=>{switch(oe.value){case"inner-move":{const Ne=ae(Ce.offsetX,Ce.offsetY,k.value/2,k.value/2),$e=r.value.min+Ne/(L/2)*(r.value.max-r.value.min);if(Ne<=L/2){let xe=Math.atan2(-(Ce.offsetY-k.value/2),Ce.offsetX-k.value/2);xe<0&&g.value.max>180&&(xe+=Math.PI*2);const Ie=j(xe);let ze=g.value.value;Ie>=g.value.min&&Ie<=g.value.max&&(ze=Ie),$.value($e,ze,Object.assign([],y.value)),Ce.offsetX,Ce.offsetY,oe.value="inner-move"}break}case"outer-move":{let Ne=Math.atan2(Ce.offsetY-k.value/2,Ce.offsetX-k.value/2);Ne<0&&(Ne+=Math.PI*2);const $e=y.value[ue],xe=2*Math.PI*ue/(y?.value).length,Ie=xe+2*Math.PI/(y?.value).length,ze=j(Ne),qe=$e.min+(ze-j(xe))/(j(Ie)-j(xe))*($e.max-$e.min);if(qe>=$e.min&&qe<=$e.max){const Et=Object.assign([],y.value);Et[ue].value=qe,$.value(r.value.value,g.value.value,Et),Ce.offsetX,Ce.offsetY,oe.value="outer-move"}break}}},he=()=>{oe.value="defualt",ue=-1,document.body.removeEventListener("mousemove",de),document.body.removeEventListener("mouseup",he)};watch([r,g,y,k],()=>{_e()},{deep:!0});const _e=()=>{const Ce=V.value.getContext("2d");for(let Ne=0;Ne<(y?.value).length;Ne++){const $e=(y?.value)[Ne],xe=2*Math.PI*Ne/(y?.value).length,Ie=xe+2*Math.PI/(y?.value).length,ze=k.value/2-outerSize/2,qe=xe+(Ie-xe)/($e.max-$e.min)*($e.value-$e.min);Ce.fillStyle="#153063",Ce.beginPath(),Ce.arc(k.value/2,k.value/2,k.value/2,xe,Ie),Ce.lineTo(k.value/2,k.value/2),Ce.closePath(),Ce.fill(),Ce.fillStyle="white",Ce.beginPath(),Ce.arc(k.value/2,k.value/2,k.value/2,xe+z(2),Ie-z(2)),Ce.lineTo(k.value/2,k.value/2),Ce.closePath(),Ce.fill(),Ce.fillStyle="#153063",Ce.beginPath(),Ce.arc(k.value/2+ze*Math.cos(qe),k.value/2+ze*Math.sin(qe),5,0,2*Math.PI),Ce.closePath(),Ce.fill()}Ce.fillStyle="#153063",Ce.beginPath(),Ce.arc(k.value/2,k.value/2,L/2,0,2*Math.PI),Ce.closePath(),Ce.fill(),Ce.fillStyle="white",Ce.beginPath(),Ce.arc(k.value/2,k.value/2,L/2,-z(g.value.min),-z(g.value.min)-z(g.value.max-g.value.min),!0),Ce.lineTo(k.value/2,k.value/2),Ce.closePath(),Ce.fill(),Ce.strokeStyle="#153063",Ce.lineWidth=2,Ce.beginPath(),Ce.arc(k.value/2,k.value/2,L/2,0,2*Math.PI),Ce.closePath(),Ce.stroke(),g.value.min===0&&g.value.max===360&&(Ce.beginPath(),Ce.moveTo(k.value/2,k.value/2),Ce.lineTo(k.value,k.value/2),Ce.closePath(),Ce.stroke()),Ce.fillStyle="#153063",Ce.beginPath(),Ce.arc(k.value/2+re?.value*Math.cos(z(g?.value.value)),k.value/2-re?.value*Math.sin(z(g?.value.value)),5,0,2*Math.PI),Ce.closePath(),Ce.fill()};return(Ce,Ne)=>(openBlock(),createElementBlock("div",_hoisted_1$V,[createBaseVNode("canvas",{ref_key:"canvas",ref:V,width:unref(k),height:unref(k)},null,8,_hoisted_2$T)]))}}),editing$3=ref(!1),selectControl$1=ref(""),_hoisted_1$U={class:"glyph-edit-panel"},_hoisted_2$S={key:0,class:"character-glyph-edit-panel"},_hoisted_3$u={class:"character-edit-panel"},_hoisted_4$r={class:"name-wrap"},_hoisted_5$m={class:"title"},_hoisted_6$j={key:0,class:"layout-wrap"},_hoisted_7$g={class:"title"},_hoisted_8$g={class:"ratio-item"},_hoisted_9$g={class:"interactive-settings"},_hoisted_10$g={class:"title"},_hoisted_11$f={class:"transform-wrap"},_hoisted_12$f={class:"title"},_hoisted_13$d={class:"parameters-wrap"},_hoisted_14$d={class:"title"},_hoisted_15$a={class:"param-btn-group"},_hoisted_16$a={key:0},_hoisted_17$8=["onPointerdown"],_hoisted_18$7={class:"down-menu"},_hoisted_19$7={class:"ratio-item"},_hoisted_20$7={key:1},_hoisted_21$7={key:2},_hoisted_22$7={key:0,class:"ring-controller-wrap"},_hoisted_23$7={key:1,class:"number-controller-wrap"},_hoisted_24$7={key:3},_hoisted_25$6={key:0},_hoisted_26$5={key:1},_hoisted_27$5={key:0,class:"ring-controller-wrap"},_hoisted_28$4={key:1,class:"number-controller-wrap"},_hoisted_29$4={class:"joints-wrap"},_hoisted_30$4={class:"title"},_sfc_main$V=defineComponent({__name:"GlyphEditPanel",setup(e){const{tm:n,t:r}=useI18n(),g=$e=>{saveState("",[editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo,$e)},y=computed(()=>{let $e=selectedComponent.value;return editCharacterFile.value.selectedComponentsTree&&editCharacterFile.value.selectedComponentsTree.length&&(selectedSubComponent.value?$e=selectedSubComponent.value:$e=SubComponentsRoot.value),$e});onUnmounted(()=>{draggable$1.value=!0,dragOption.value="default",checkJoints.value=!1,checkRefLines.value=!1});const k=ref(0),$=[{value:0,key:"widget"},{value:1,key:"number"}],V=ref(150);y.value.value._o?.getJoints().map($e=>{$e&&(jointsCheckedMap.value[$e.name]=!1)}),watch([y,selectedComponent],()=>{jointsCheckedMap.value={},y.value.value._o?.getJoints().map($e=>{$e&&(jointsCheckedMap.value[$e.name]=!1)})});let L=null,z=!1;watch(editCharacterFile,($e,xe)=>{L&&clearTimeout(L),L=setTimeout(()=>{z=!1,clearTimeout(L)},500),z||(g({editCharacterFile:xe,newRecord:!0}),z=!0)});const j=$e=>{editCharacterFile.value.selectedComponentsTree&&editCharacterFile.value.selectedComponentsTree.length?modifySubComponent({ox:$e}):modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{ox:$e})},ae=$e=>{editCharacterFile.value.selectedComponentsTree&&editCharacterFile.value.selectedComponentsTree.length?modifySubComponent({oy:$e}):modifyComponentForCurrentCharacterFile(selectedComponentUUID.value,{oy:$e})},re=($e,xe)=>{if($e.value=xe,$e.ratioed)if(y.value.value.system_script||(y.value.value.system_script={}),editCharacterFile.value.selectedComponentsTree&&editCharacterFile.value.selectedComponentsTree.length&&selectedSubComponent.value){let Ie=getRatioLayout2(SubComponentsRoot.value.value,$e.ratio);if(Ie){const ze=`window.comp_glyph.setParam('${$e.name}',window.glyph.getRatioLayout('${$e.ratio}') / ${Ie} * ${xe});`;y.value.value.system_script[$e.name]=ze}}else{let Ie=getCharacterRatioLayout(editCharacterFile.value,$e.ratio);if(Ie){const ze=`window.comp_glyph.setParam('${$e.name}',window.character.getRatioLayout('${$e.ratio}') / ${Ie} * ${xe});`;y.value.value.system_script[$e.name]=ze}}executeScript(y.value.value),executeCharacterScript(editCharacterFile.value),y.value.value._o.getJoints().map(Ie=>{Ie.component=y.value}),emitter.emit("renderPreviewCanvasByUUIDOnEditing",editCharacterFile.value.uuid),emitter.emit("renderCharacter",!0)},oe=($e,xe)=>{if($e.ratioed)if(y.value.value.system_script||(y.value.value.system_script={}),editCharacterFile.value.selectedComponentsTree&&editCharacterFile.value.selectedComponentsTree.length&&selectedSubComponent.value){let Ie=getRatioLayout2(SubComponentsRoot.value.value,$e.ratio);if(Ie){const ze=`window.comp_glyph.setParam('${$e.name}',window.glyph.getRatioLayout('${$e.ratio}') / ${Ie} * ${$e.value});`;y.value.value.system_script[$e.name]=ze}}else{let Ie=getCharacterRatioLayout(editCharacterFile.value,$e.ratio);if(Ie){const ze=`window.comp_glyph.setParam('${$e.name}',window.character.getRatioLayout('${$e.ratio}') / ${Ie} * ${$e.value});`;y.value.value.system_script[$e.name]=ze}}executeScript(y.value.value),executeCharacterScript(editCharacterFile.value),emitter.emit("renderPreviewCanvasByUUIDOnEditing",y.value.value.uuid),emitter.emit("renderCharacter")};watch([checkJoints,checkRefLines],()=>{emitter.emit("renderCharacter")}),watch(jointsCheckedMap,()=>{editStatus.value===Status.Edit?emitter.emit("renderCharacter"):editStatus.value===Status.Glyph&&emitter.emit("renderGlyph"),y.value.value._o?.renderJoints(canvas.value,{type:"selected",joints:Object.keys(jointsCheckedMap.value).filter($e=>!!jointsCheckedMap.value[$e])})},{deep:!0}),watch(dragOption,()=>{dragOption.value==="layout"&&(!editCharacterFile.value.selectedComponentsTree||!editCharacterFile.value.selectedComponentsTree.length)&&(grid.type=GridType.LayoutGrid)});let ue=ref({});onMounted(()=>{editStatus.value===Status.Edit&&y.value.value.parameters?.parameters.map($e=>{ue.value[$e.uuid]=!1})});const le=($e,xe,Ie,ze)=>{$e.radius.value=xe,$e.degree.value=Ie,$e.params=Object.assign([],ze),executeScript(y.value.value),executeCharacterScript(editCharacterFile.value),emitter.emit("renderPreviewCanvasByUUID",editCharacterFile.value.uuid),emitter.emit("renderCharacter",!0)},de=()=>{executeScript(y.value.value),executeCharacterScript(editCharacterFile.value),emitter.emit("renderCharacter_forceUpdate",!0),emitter.emit("renderPreviewCanvasByUUID",editCharacterFile.value.uuid)},he=$e=>{const xe=getConstant($e.value);$e.type=xe.type,$e.value=xe.value;const Ie=constantGlyphMap.get(xe.uuid);for(let ze=0;ze<Ie.length;ze++)if(Ie[ze].parameterUUID===$e.uuid){Ie.splice(ze,1);break}},_e=$e=>{selectedParam.value=$e,selectedParamType.value="character_components",setSetAsGlobalParamDialogVisible(!0)},Ce=$e=>{selectedParam.value=$e,selectedParamType.value="character_components",setSelectGlobalParamDialogVisible(!0)},Ne=$e=>{const xe=constantGlyphMap.get($e.value);for(let Ie=0;Ie<xe.length;Ie++){const ze=xe[Ie];let qe=null;if(ze.constantType===ConstantType.Parameter)qe=getGlyphByUUID(xe[Ie].glyphUUID);else if(ze.constantType===ConstantType.Component){const Et=xe[Ie].parentUUID;let _n=null;ze.glyphType===GlyphType.Char?_n=selectedItemByUUID(selectedFile.value.characterList,Et):_n=getGlyphByUUID(Et),qe=_n.value}qe&&(executeScript(qe),emitter.emit("renderGlyphPreviewCanvasByUUID",qe.uuid))}};return($e,xe)=>{const Ie=resolveComponent("el-input"),ze=resolveComponent("el-form-item"),qe=resolveComponent("el-form"),Et=resolveComponent("el-input-number"),_n=resolveComponent("font-awesome-icon"),Dt=resolveComponent("el-option"),Sn=resolveComponent("el-select"),hn=resolveComponent("el-switch"),Vn=resolveComponent("el-checkbox"),Mn=resolveComponent("el-radio"),$n=resolveComponent("el-radio-group"),Nn=resolveComponent("el-icon"),kn=resolveComponent("el-button"),jn=resolveComponent("el-popover"),Fn=resolveComponent("el-slider"),Tn=resolveComponent("el-tab-pane"),Hn=resolveComponent("el-collapse-item"),la=resolveComponent("el-collapse"),ca=resolveComponent("el-tabs");return openBlock(),createElementBlock("div",_hoisted_1$U,[unref(editStatus)===unref(Status).Edit?(openBlock(),createElementBlock("div",_hoisted_2$S,[createBaseVNode("div",_hoisted_3$u,[createBaseVNode("div",_hoisted_4$r,[createBaseVNode("div",_hoisted_5$m,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(qe,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(ze,{label:unref(n)("panels.paramsPanel.componentName.label")},{default:withCtx(()=>[createVNode(Ie,{modelValue:y.value.name,"onUpdate:modelValue":xe[0]||(xe[0]=Zn=>y.value.name=Zn)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),y.value.value.layout?(openBlock(),createElementBlock("div",_hoisted_6$j,[createBaseVNode("div",_hoisted_7$g,toDisplayString$1(unref(r)("panels.paramsPanel.layout.title")),1),createVNode(qe,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(ze,{label:unref(n)("panels.paramsPanel.layout.type")},{default:withCtx(()=>[createVNode(Ie,{disabled:"",modelValue:y.value.value.layout.type,"onUpdate:modelValue":xe[1]||(xe[1]=Zn=>y.value.value.layout.type=Zn)},null,8,["modelValue"])]),_:1},8,["label"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(Object.keys(y.value.value.layout.params),Zn=>(openBlock(),createBlock(ze,{label:Zn},{default:withCtx(()=>[createVNode(Et,{modelValue:y.value.value.layout.params[Zn],"onUpdate:modelValue":Bn=>y.value.value.layout.params[Zn]=Bn,onChange:de,precision:2},null,8,["modelValue","onUpdate:modelValue"]),createBaseVNode("div",_hoisted_8$g,[createVNode(_n,{class:normalizeClass(["ratio-icon",{selected:y.value.value.layout.ratioedMap&&y.value.value.layout.ratioedMap[Zn].ratioed}]),onPointerdown:()=>{y.value.value.layout.ratioedMap||(y.value.value.layout.ratioedMap=new Map),y.value.value.layout.ratioedMap[Zn]||y.value.value.layout.ratioedMap.set(Zn,{ratioed:!0}),y.value.value.layout.ratioedMap[Zn].ratioed=!y.value.value.layout.ratioedMap[Zn].ratioed},icon:["fas","percent"]},null,8,["class","onPointerdown"]),createVNode(Sn,{modelValue:y.value.value.layout.ratioedMap[Zn].ratio,"onUpdate:modelValue":Bn=>y.value.value.layout.ratioedMap[Zn].ratio=Bn,class:"control-type-select",placeholder:"Ratio",disabled:!y.value.value.layout.ratioedMap||!y.value.value.layout.ratioedMap[Zn].ratioed},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(getRatioOptions)(y.value.value),Bn=>(openBlock(),createBlock(Dt,{key:Bn.key,label:Bn.label,value:Bn.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])])]),_:2},1032,["label"]))),256)),createVNode(ze,{label:""},{default:withCtx(()=>[createVNode(hn,{modelValue:unref(editing$3),"onUpdate:modelValue":xe[2]||(xe[2]=Zn=>isRef(editing$3)?editing$3.value=Zn:null)},null,8,["modelValue"])]),_:1})]),_:1})])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_9$g,[createBaseVNode("div",_hoisted_10$g,toDisplayString$1(unref(r)("panels.paramsPanel.interactive")),1),createVNode(qe,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(ze,{label:unref(n)("panels.paramsPanel.draggableOption")},{default:withCtx(()=>[createVNode(Vn,{modelValue:unref(draggable$1),"onUpdate:modelValue":xe[3]||(xe[3]=Zn=>isRef(draggable$1)?draggable$1.value=Zn:null),class:"draggable-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.draggable")),1)]),_:1},8,["modelValue"])]),_:1},8,["label"]),createVNode(ze,{label:unref(n)("panels.paramsPanel.dragOption")},{default:withCtx(()=>[createVNode($n,{modelValue:unref(dragOption),"onUpdate:modelValue":xe[4]||(xe[4]=Zn=>isRef(dragOption)?dragOption.value=Zn:null),class:"radio-group"},{default:withCtx(()=>[createVNode(Mn,{value:"none",label:"none"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.dragOptionNone")),1)]),_:1}),createVNode(Mn,{value:"default",label:"default"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.dragOptionDefault")),1)]),_:1}),createVNode(Mn,{value:"layout",label:"layout",disabled:!unref(SubComponentsRoot)||!!unref(SubComponentsRoot)&&!unref(SubComponentsRoot).value.layout},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.dragOptionLayout")),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_11$f,[createBaseVNode("div",_hoisted_12$f,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(qe,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(ze,{label:unref(n)("panels.paramsPanel.transform.x")},{default:withCtx(()=>[createVNode(Et,{"model-value":y.value.ox,precision:1,onChange:j},null,8,["model-value"])]),_:1},8,["label"]),createVNode(ze,{label:unref(n)("panels.paramsPanel.transform.y")},{default:withCtx(()=>[createVNode(Et,{"model-value":y.value.oy,precision:1,onChange:ae},null,8,["model-value"])]),_:1},8,["label"])]),_:1})])]),createBaseVNode("div",_hoisted_13$d,[createBaseVNode("div",_hoisted_14$d,toDisplayString$1(unref(r)("panels.paramsPanel.params.title")),1),createVNode(qe,{class:"parameters-form","label-width":"80px"},{default:withCtx(()=>[createVNode(ze,{label:unref(n)("programming.joint")},{default:withCtx(()=>[createVNode(hn,{modelValue:unref(checkJoints),"onUpdate:modelValue":xe[5]||(xe[5]=Zn=>isRef(checkJoints)?checkJoints.value=Zn:null)},null,8,["modelValue"])]),_:1},8,["label"]),createVNode(ze,{label:unref(n)("programming.refline")},{default:withCtx(()=>[createVNode(hn,{modelValue:unref(checkRefLines),"onUpdate:modelValue":xe[6]||(xe[6]=Zn=>isRef(checkRefLines)?checkRefLines.value=Zn:null)},null,8,["modelValue"])]),_:1},8,["label"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(y.value.value.parameters.parameters,Zn=>(openBlock(),createBlock(ze,{label:Zn.name},{default:withCtx(()=>[createVNode(jn,{placement:"right",width:250,trigger:"click"},{reference:withCtx(()=>[createVNode(Nn,{class:normalizeClass(["more-btn",{ring:Zn.type===unref(ParameterType).RingController||Zn.type===unref(ParameterType).Constant&&unref(getConstant)(Zn.value).type===unref(ParameterType).RingController,show:Zn.type===unref(ParameterType).Number||Zn.type===unref(ParameterType).Constant&&unref(getConstant)(Zn.value).type!==unref(ParameterType).RingController||k.value===0}])},{default:withCtx(()=>[createVNode(unref(more_default))]),_:2},1032,["class"])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_15$a,[withDirectives(createVNode(kn,{onPointerdown:Bn=>he(Zn)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.cancelGlobalParam")),1)]),_:2},1032,["onPointerdown"]),[[vShow,Zn.type===unref(ParameterType).Constant]]),createVNode(kn,{onPointerdown:Bn=>_e(Zn)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.setAsGlobalParam")),1)]),_:2},1032,["onPointerdown"]),createVNode(kn,{onPointerdown:Bn=>Ce(Zn)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.selectGlobalParam")),1)]),_:2},1032,["onPointerdown"]),withDirectives(createVNode(kn,{type:"primary",onPointerdown:Bn=>Ne(Zn)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.updateGlobalParam")),1)]),_:2},1032,["onPointerdown"]),[[vShow,Zn.type===unref(ParameterType).Constant]])])]),_:2},1024),withDirectives(createBaseVNode("div",{class:normalizeClass(["global-param-note",{ring:Zn.type===unref(ParameterType).Constant&&unref(getConstant)(Zn.value).type===unref(ParameterType).RingController}])},toDisplayString$1(unref(r)("panels.paramsPanel.globalParam")),3),[[vShow,Zn.type===unref(ParameterType).Constant]]),Zn.type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_16$a,[createVNode(Et,{"model-value":Zn.value,step:Zn.max<=10?.01:1,min:Zn.min,max:Zn.max,precision:Zn.max<=10?2:0,disabled:Zn.type===unref(ParameterType).Constant,onChange:Bn=>re(Zn,Bn)},null,8,["model-value","step","min","max","precision","disabled","onChange"]),withDirectives(createVNode(Fn,{step:Zn.max<=10?.01:1,min:Zn.min,max:Zn.max,precision:Zn.max<=10?2:0,onInput:Bn=>re(Zn,Bn),modelValue:Zn.value,"onUpdate:modelValue":Bn=>Zn.value=Bn},null,8,["step","min","max","precision","onInput","modelValue","onUpdate:modelValue"]),[[vShow,Zn.type===unref(ParameterType).Number]]),createBaseVNode("div",{class:"down-menu-icon-wrap",onPointerdown:Bn=>unref(ue)[Zn.uuid]=!unref(ue)[Zn.uuid]},[createVNode(_n,{icon:["fas","arrow-down-wide-short"]})],40,_hoisted_17$8),withDirectives(createBaseVNode("div",_hoisted_18$7,[createBaseVNode("div",_hoisted_19$7,[createVNode(_n,{class:normalizeClass(["ratio-icon",{selected:Zn.ratioed}]),onPointerdown:()=>{Zn.ratioed=!Zn.ratioed,!Zn.ratioed&&y.value.value.system_script&&y.value.value.system_script[Zn.name]&&delete y.value.value.system_script[Zn.name]},icon:["fas","percent"]},null,8,["class","onPointerdown"]),createVNode(Sn,{modelValue:Zn.ratio,"onUpdate:modelValue":Bn=>Zn.ratio=Bn,class:"control-type-select",placeholder:"Ratio",disabled:!Zn.ratioed,onChange:Bn=>oe(Zn,Bn)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(getRatioOptions)(y.value.value),Bn=>(openBlock(),createBlock(Dt,{key:Bn.key,label:Bn.label,value:Bn.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])])],512),[[vShow,unref(ue)[Zn.uuid]]])])):Zn.type===unref(ParameterType).Enum?(openBlock(),createElementBlock("div",_hoisted_20$7,[createVNode(Sn,{modelValue:Zn.value,"onUpdate:modelValue":Bn=>Zn.value=Bn,class:"enum-param-select",placeholder:"Select",onChange:Bn=>re(Zn,Bn)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Zn.options,Bn=>(openBlock(),createBlock(Dt,{key:Bn.value,label:Bn.label,value:Bn.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):Zn.type===unref(ParameterType).RingController?(openBlock(),createElementBlock("div",_hoisted_21$7,[createVNode(Sn,{modelValue:k.value,"onUpdate:modelValue":xe[7]||(xe[7]=Bn=>k.value=Bn),class:"control-type-select",placeholder:unref(n)("programming.controlType")},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList($,Bn=>createVNode(Dt,{key:Bn.key,label:unref(n)(`programming.${Bn.key}`),value:Bn.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"]),k.value===0?(openBlock(),createElementBlock("div",_hoisted_22$7,[createVNode(_sfc_main$W,{radius:Zn.value.radius,size:V.value,degree:Zn.value.degree,params:Zn.value.params,"on-change":(Bn,Wn,da)=>le(Zn.value,Bn,Wn,da)},null,8,["radius","size","degree","params","on-change"])])):k.value===1?(openBlock(),createElementBlock("div",_hoisted_23$7,[createVNode(ca,{type:"border-card"},{default:withCtx(()=>[createVNode(Tn,{label:"radius"},{default:withCtx(()=>[createVNode(ze,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Ie,{class:"parameter-value",modelValue:Zn.value.radius.name,"onUpdate:modelValue":Bn=>Zn.value.radius.name=Bn,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(ze,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Et,{class:"parameter-value",modelValue:Zn.value.radius.value,"onUpdate:modelValue":Bn=>Zn.value.radius.value=Bn,min:Zn.value.radius.min,max:Zn.value.radius.max,precision:Zn.value.radius.max<=10?2:0,step:Zn.value.radius.max<=10?.01:1},null,8,["modelValue","onUpdate:modelValue","min","max","precision","step"]),createVNode(Fn,{onInput:Bn=>re(Zn.value.radius,Bn),modelValue:Zn.value.radius.value,"onUpdate:modelValue":Bn=>Zn.value.radius.value=Bn,min:Zn.value.radius.min,max:Zn.value.radius.max,precision:Zn.value.radius.max<=10?2:0,step:Zn.value.radius.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Tn,{label:"degree"},{default:withCtx(()=>[createVNode(ze,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Ie,{class:"parameter-value",modelValue:Zn.value.degree.name,"onUpdate:modelValue":Bn=>Zn.value.degree.name=Bn,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(ze,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Et,{class:"parameter-value",modelValue:Zn.value.degree.value,"onUpdate:modelValue":Bn=>Zn.value.degree.value=Bn,min:Zn.value.degree.min,max:Zn.value.degree.max,precision:Zn.max<=10?2:0,step:Zn.max<=10?.01:1},null,8,["modelValue","onUpdate:modelValue","min","max","precision","step"]),createVNode(Fn,{onInput:Bn=>re(Zn.value.degree,Bn),modelValue:Zn.value.degree.value,"onUpdate:modelValue":Bn=>Zn.value.degree.value=Bn,min:Zn.value.degree.min,max:Zn.value.degree.max,precision:Zn.value.degree.max<=10?2:0,step:Zn.value.degree.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Tn,{label:"params"},{default:withCtx(()=>[createVNode(la,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Zn.value.params,Bn=>(openBlock(),createBlock(Hn,{title:Bn.name,name:"1"},{default:withCtx(()=>[createVNode(ze,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Ie,{class:"parameter-value",modelValue:Bn.name,"onUpdate:modelValue":Wn=>Bn.name=Wn,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(ze,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Et,{class:"parameter-value",modelValue:Bn.value,"onUpdate:modelValue":Wn=>Bn.value=Wn,min:Bn.min,max:Bn.max,precision:Bn.max<=10?2:0,step:Bn.max<=10?.01:1},null,8,["modelValue","onUpdate:modelValue","min","max","precision","step"]),createVNode(Fn,{onInput:Wn=>re(Bn,Wn),modelValue:Bn.value,"onUpdate:modelValue":Wn=>Bn.value=Wn,min:Bn.min,max:Bn.max,precision:Bn.max<=10?2:0,step:Bn.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024)])):createCommentVNode("",!0)])):Zn.type===unref(ParameterType).Constant?(openBlock(),createElementBlock("div",_hoisted_24$7,[unref(getConstant)(Zn.value).type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_25$6,[createVNode(Et,{"model-value":unref(getConstant)(Zn.value).value,step:unref(getConstant)(Zn.value).max<=10?.01:1,min:unref(getConstant)(Zn.value).min,max:unref(getConstant)(Zn.value).max,precision:unref(getConstant)(Zn.value).max<=10?2:0,onChange:Bn=>re(unref(getConstant)(Zn.value),Bn)},null,8,["model-value","step","min","max","precision","onChange"]),createVNode(Fn,{"model-value":unref(getConstant)(Zn.value).value,step:unref(getConstant)(Zn.value).max<=10?.01:1,min:unref(getConstant)(Zn.value).min,max:unref(getConstant)(Zn.value).max,precision:unref(getConstant)(Zn.value).max<=10?2:0,onInput:Bn=>re(unref(getConstant)(Zn.value),Bn),onChange:Bn=>re(unref(getConstant)(Zn.value),Bn)},null,8,["model-value","step","min","max","precision","onInput","onChange"])])):unref(getConstant)(Zn.value).type===unref(ParameterType).RingController?(openBlock(),createElementBlock("div",_hoisted_26$5,[createVNode(Sn,{modelValue:k.value,"onUpdate:modelValue":xe[8]||(xe[8]=Bn=>k.value=Bn),class:"control-type-select",placeholder:unref(n)("programming.controlType")},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList($,Bn=>createVNode(Dt,{key:Bn.key,label:unref(n)(`programming.${Bn.key}`),value:Bn.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"]),k.value===0?(openBlock(),createElementBlock("div",_hoisted_27$5,[createVNode(_sfc_main$W,{radius:unref(getConstant)(Zn.value).value.radius,size:V.value,degree:unref(getConstant)(Zn.value).value.degree,params:unref(getConstant)(Zn.value).value.params,"on-change":(Bn,Wn,da)=>le(unref(getConstant)(Zn.value).value,Bn,Wn,da)},null,8,["radius","size","degree","params","on-change"])])):k.value===1?(openBlock(),createElementBlock("div",_hoisted_28$4,[createVNode(ca,{type:"border-card"},{default:withCtx(()=>[createVNode(Tn,{label:"radius"},{default:withCtx(()=>[createVNode(ze,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Ie,{class:"parameter-value","model-value":unref(getConstant)(Zn.value).value.radius.name,disabled:""},null,8,["model-value"])]),_:2},1024),createVNode(ze,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Et,{class:"parameter-value","model-value":unref(getConstant)(Zn.value).value.radius.value,min:unref(getConstant)(Zn.value).value.radius.min,max:unref(getConstant)(Zn.value).value.radius.max,precision:unref(getConstant)(Zn.value).value.radius.max<=10?2:0,step:unref(getConstant)(Zn.value).value.radius.max<=10?.01:1,onChange:Bn=>re(unref(getConstant)(Zn.value).value.radius,Bn)},null,8,["model-value","min","max","precision","step","onChange"]),createVNode(Fn,{onInput:Bn=>re(unref(getConstant)(Zn.value).value.radius,Bn),"model-value":unref(getConstant)(Zn.value).value.radius.value,min:unref(getConstant)(Zn.value).value.radius.min,max:unref(getConstant)(Zn.value).value.radius.max,precision:unref(getConstant)(Zn.value).value.radius.max<=10?2:0,step:unref(getConstant)(Zn.value).value.radius.max<=10?.01:1},null,8,["onInput","model-value","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Tn,{label:"degree"},{default:withCtx(()=>[createVNode(ze,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Ie,{class:"parameter-value","model-value":unref(getConstant)(Zn.value).value.degree.name,disabled:""},null,8,["model-value"])]),_:2},1024),createVNode(ze,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Et,{class:"parameter-value","model-value":unref(getConstant)(Zn.value).value.degree.value,min:unref(getConstant)(Zn.value).value.degree.min,max:unref(getConstant)(Zn.value).value.degree.max,precision:unref(getConstant)(Zn.value).value.degree.max<=10?2:0,step:unref(getConstant)(Zn.value).value.degree.max<=10?.01:1,onChange:Bn=>re(unref(getConstant)(Zn.value).value.degree,Bn)},null,8,["model-value","min","max","precision","step","onChange"]),createVNode(Fn,{onInput:Bn=>re(unref(getConstant)(Zn.value).value.degree,Bn),"model-value":unref(getConstant)(Zn.value).value.degree.value,min:unref(getConstant)(Zn.value).value.degree.min,max:unref(getConstant)(Zn.value).value.degree.max,precision:unref(getConstant)(Zn.value).value.degree.max<=10?2:0,step:unref(getConstant)(Zn.value).value.degree.max<=10?.01:1},null,8,["onInput","model-value","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Tn,{label:"params"},{default:withCtx(()=>[createVNode(la,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(getConstant)(Zn.value).value.params,Bn=>(openBlock(),createBlock(Hn,{title:Bn.name,name:"1"},{default:withCtx(()=>[createVNode(ze,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Ie,{class:"parameter-value","model-value":Bn.name,disabled:""},null,8,["model-value"])]),_:2},1024),createVNode(ze,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Et,{class:"parameter-value test","model-value":Bn.value,min:Bn.min,max:Bn.max,precision:Bn.max<=10?2:0,step:Bn.max<=10?.01:1,onChange:Wn=>re(Bn,Wn)},null,8,["model-value","min","max","precision","step","onChange"]),createVNode(Fn,{onInput:Wn=>re(Bn,Wn),modelValue:Bn.value,"onUpdate:modelValue":Wn=>Bn.value=Wn,min:Bn.min,max:Bn.max,precision:Bn.max<=10?2:0,step:Bn.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024)])):createCommentVNode("",!0)])):createCommentVNode("",!0)])):createCommentVNode("",!0)]),_:2},1032,["label"]))),256))]),_:1})]),createBaseVNode("div",_hoisted_29$4,[createBaseVNode("div",_hoisted_30$4,toDisplayString$1(unref(r)("panels.paramsPanel.joints.title")),1),createVNode(qe,{class:"joints-form","label-width":"80px"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(y.value.value._o?y.value.value._o?.getJoints():[],Zn=>(openBlock(),createBlock(Vn,{modelValue:unref(jointsCheckedMap)[Zn.name],"onUpdate:modelValue":Bn=>unref(jointsCheckedMap)[Zn.name]=Bn,label:Zn.name},null,8,["modelValue","onUpdate:modelValue","label"]))),256))]),_:1})])])):createCommentVNode("",!0)])}}}),GlyphEditPanel$1=_export_sfc(_sfc_main$V,[["__scopeId","data-v-2ebfe7b3"]]),editing$2=ref(!1),selectControl=ref(""),_hoisted_1$T={class:"glyph-edit-panel"},_hoisted_2$R={key:0,class:"character-glyph-edit-panel"},_hoisted_3$t={class:"character-edit-panel"},_hoisted_4$q={class:"name-wrap"},_hoisted_5$l={class:"title"},_hoisted_6$i={key:0,class:"layout-wrap"},_hoisted_7$f={class:"title"},_hoisted_8$f={class:"ratio-item"},_hoisted_9$f={class:"interactive-settings"},_hoisted_10$f={class:"title"},_hoisted_11$e={class:"transform-wrap"},_hoisted_12$e={class:"title"},_hoisted_13$c={class:"parameters-wrap"},_hoisted_14$c={class:"title"},_hoisted_15$9={class:"param-btn-group"},_hoisted_16$9={key:0},_hoisted_17$7=["onPointerdown"],_hoisted_18$6={class:"down-menu"},_hoisted_19$6={class:"ratio-item"},_hoisted_20$6={key:1},_hoisted_21$6={key:2},_hoisted_22$6={key:0,class:"ring-controller-wrap"},_hoisted_23$6={key:1,class:"number-controller-wrap"},_hoisted_24$6={key:3},_hoisted_25$5={key:0},_hoisted_26$4={key:1},_hoisted_27$4={key:0,class:"ring-controller-wrap"},_hoisted_28$3={key:1,class:"number-controller-wrap"},_hoisted_29$3={class:"joints-wrap"},_hoisted_30$3={class:"title"},_sfc_main$U=defineComponent({__name:"GlyphEditPanel_Glyph",setup(e){const{tm:n,t:r}=useI18n(),g=xe=>{saveState("",[editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo,xe)};let y=null,k=!1;watch(editGlyph,(xe,Ie)=>{y&&clearTimeout(y),y=setTimeout(()=>{k=!1,clearTimeout(y)},500),k||(g({editGlyph:Ie,newRecord:!0}),k=!0)});const $=computed(()=>{let xe=selectedComponent$1.value;return editGlyph.value.selectedComponentsTree&&editGlyph.value.selectedComponentsTree.length&&(selectedSubComponent$1.value?xe=selectedSubComponent$1.value:xe=SubComponentsRoot$1.value),xe});onUnmounted(()=>{draggable$1.value=!0,dragOption.value="default",checkJoints.value=!1,checkRefLines.value=!1});const V=ref(0),L=[{value:0,key:"widget"},{value:1,key:"number"}],z=ref(150),j=ref({});$.value.value._o?.getJoints().map(xe=>{xe&&(j.value[xe.name]=!1)}),watch($,()=>{j.value={},$.value.value._o?.getJoints().map(xe=>{xe&&(j.value[xe.name]=!1)})});const ae=xe=>{editGlyph.value.selectedComponentsTree&&editGlyph.value.selectedComponentsTree.length?modifySubComponent$1({ox:xe}):modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{ox:xe})},re=xe=>{editGlyph.value.selectedComponentsTree&&editGlyph.value.selectedComponentsTree.length?modifySubComponent$1({oy:xe}):modifyComponentForCurrentGlyph(selectedComponentUUID$1.value,{oy:xe})},oe=(xe,Ie)=>{if(xe.value=Ie,xe.ratioed)if($.value.value.system_script||($.value.value.system_script={}),editGlyph.value.selectedComponentsTree&&editGlyph.value.selectedComponentsTree.length&&selectedSubComponent$1.value){let ze=getRatioLayout2(SubComponentsRoot$1.value.value,xe.ratio);if(ze){const qe=`window.comp_glyph.setParam('${xe.name}',window.glyph.getRatioLayout('${xe.ratio}') / ${ze} * ${Ie});`;$.value.value.system_script[xe.name]=qe}}else{let ze=getRatioLayout(editGlyph.value,xe.ratio);if(ze){const qe=`window.comp_glyph.setParam('${xe.name}',window.glyph.getRatioLayout('${xe.ratio}') / ${ze} * ${Ie});`;$.value.value.system_script[xe.name]=qe}}executeScript(editGlyph.value),$.value.value._o.getJoints().map(ze=>{ze.component=$.value}),emitter.emit("renderGlyphPreviewCanvasByUUIDOnEditing",editGlyph.value.uuid),emitter.emit("renderGlyph")},ue=(xe,Ie)=>{if(xe.ratioed)if($.value.value.system_script||($.value.value.system_script={}),editGlyph.value.selectedComponentsTree&&editGlyph.value.selectedComponentsTree.length&&selectedSubComponent$1.value){let ze=getRatioLayout2(SubComponentsRoot$1.value.value,xe.ratio);if(ze){const qe=`window.comp_glyph.setParam('${xe.name}',window.glyph.getRatioLayout('${xe.ratio}') / ${ze} * ${xe.value});`;$.value.value.system_script[xe.name]=qe}}else{let ze=getRatioLayout(editGlyph.value,xe.ratio);if(ze){const qe=`window.comp_glyph.setParam('${xe.name}',window.glyph.getRatioLayout('${xe.ratio}') / ${ze} * ${xe.value});`;$.value.value.system_script[xe.name]=qe}}executeScript(editGlyph.value),emitter.emit("renderGlyphPreviewCanvasByUUIDOnEditing",editGlyph.value.uuid),emitter.emit("renderGlyph")};watch(j,()=>{editStatus.value===Status.Edit?emitter.emit("renderCharacter"):editStatus.value===Status.Glyph&&emitter.emit("renderGlyph"),$.value.value._o.renderJoints(canvas.value,{type:"selected",joints:Object.keys(j.value).filter(xe=>!!j.value[xe])})},{deep:!0}),watch([checkJoints,checkRefLines],()=>{emitter.emit("renderGlyph")}),watch(dragOption,()=>{});let le=ref({});onMounted(()=>{editStatus.value===Status.Edit&&$.value.value.parameters?.parameters.map(xe=>{le.value[xe.uuid]=!1})});const de=(xe,Ie,ze,qe)=>{xe.radius.value=Ie,xe.degree.value=ze,xe.params=Object.assign([],qe),executeScript(editGlyph.value),emitter.emit("renderGlyphPreviewCanvasByUUID",editGlyph.value.uuid),emitter.emit("renderGlyph",!0)},he=xe=>{const Ie=getConstant(xe.value);xe.type=Ie.type,xe.value=Ie.value;const ze=constantGlyphMap.get(Ie.uuid);for(let qe=0;qe<ze.length;qe++)if(ze[qe].parameterUUID===xe.uuid){ze.splice(qe,1);break}},_e=xe=>{selectedParam.value=xe,selectedParamType.value="glyph_components",setSetAsGlobalParamDialogVisible(!0)},Ce=xe=>{selectedParam.value=xe,selectedParamType.value="glyph_components",setSelectGlobalParamDialogVisible(!0)},Ne=xe=>{const Ie=constantGlyphMap.get(xe.value);for(let ze=0;ze<Ie.length;ze++){const qe=Ie[ze];let Et=null;if(qe.constantType===ConstantType.Parameter)Et=getGlyphByUUID(Ie[ze].glyphUUID);else if(qe.constantType===ConstantType.Component){const _n=Ie[ze].parentUUID;let Dt=null;qe.glyphType===GlyphType.Char?Dt=selectedItemByUUID(selectedFile.value.characterList,_n):Dt=getGlyphByUUID(_n),Et=Dt.value}Et&&(executeScript(Et),emitter.emit("renderGlyphPreviewCanvasByUUID",Et.uuid))}},$e=()=>{executeScript($.value.value),executeScript(editGlyph.value),emitter.emit("renderGlyph_forceUpdate",!0),emitter.emit("renderGlyphPreviewCanvasByUUID",editGlyph.value.uuid)};return(xe,Ie)=>{const ze=resolveComponent("el-input"),qe=resolveComponent("el-form-item"),Et=resolveComponent("el-form"),_n=resolveComponent("el-input-number"),Dt=resolveComponent("font-awesome-icon"),Sn=resolveComponent("el-option"),hn=resolveComponent("el-select"),Vn=resolveComponent("el-switch"),Mn=resolveComponent("el-checkbox"),$n=resolveComponent("el-radio"),Nn=resolveComponent("el-radio-group"),kn=resolveComponent("el-icon"),jn=resolveComponent("el-button"),Fn=resolveComponent("el-popover"),Tn=resolveComponent("el-slider"),Hn=resolveComponent("el-tab-pane"),la=resolveComponent("el-collapse-item"),ca=resolveComponent("el-collapse"),Zn=resolveComponent("el-tabs");return openBlock(),createElementBlock("div",_hoisted_1$T,[unref(editStatus)===unref(Status).Glyph?(openBlock(),createElementBlock("div",_hoisted_2$R,[createBaseVNode("div",_hoisted_3$t,[createBaseVNode("div",_hoisted_4$q,[createBaseVNode("div",_hoisted_5$l,toDisplayString$1(unref(r)("panels.paramsPanel.componentName.title")),1),createVNode(Et,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(qe,{label:unref(n)("panels.paramsPanel.componentName.label")},{default:withCtx(()=>[createVNode(ze,{modelValue:$.value.name,"onUpdate:modelValue":Ie[0]||(Ie[0]=Bn=>$.value.name=Bn)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),$.value.value.layout?(openBlock(),createElementBlock("div",_hoisted_6$i,[createBaseVNode("div",_hoisted_7$f,toDisplayString$1(unref(r)("panels.paramsPanel.layout.title")),1),createVNode(Et,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(qe,{label:unref(n)("panels.paramsPanel.layout.type")},{default:withCtx(()=>[createVNode(ze,{disabled:"",modelValue:$.value.value.layout.type,"onUpdate:modelValue":Ie[1]||(Ie[1]=Bn=>$.value.value.layout.type=Bn)},null,8,["modelValue"])]),_:1},8,["label"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(Object.keys($.value.value.layout.params),Bn=>(openBlock(),createBlock(qe,{label:Bn},{default:withCtx(()=>[createVNode(_n,{modelValue:$.value.value.layout.params[Bn],"onUpdate:modelValue":Wn=>$.value.value.layout.params[Bn]=Wn,onChange:$e,precision:2},null,8,["modelValue","onUpdate:modelValue"]),createBaseVNode("div",_hoisted_8$f,[createVNode(Dt,{class:normalizeClass(["ratio-icon",{selected:$.value.value.layout.ratioedMap&&$.value.value.layout.ratioedMap[Bn].ratioed}]),onPointerdown:()=>{$.value.value.layout.ratioedMap||($.value.value.layout.ratioedMap=new Map),$.value.value.layout.ratioedMap[Bn]||$.value.value.layout.ratioedMap.set(Bn,{ratioed:!0}),$.value.value.layout.ratioedMap[Bn].ratioed=!$.value.value.layout.ratioedMap[Bn].ratioed},icon:["fas","percent"]},null,8,["class","onPointerdown"]),createVNode(hn,{modelValue:$.value.value.layout.ratioedMap[Bn].ratio,"onUpdate:modelValue":Wn=>$.value.value.layout.ratioedMap[Bn].ratio=Wn,class:"control-type-select",placeholder:"Ratio",disabled:!$.value.value.layout.ratioedMap||!$.value.value.layout.ratioedMap[Bn].ratioed},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(getRatioOptions)($.value.value),Wn=>(openBlock(),createBlock(Sn,{key:Wn.key,label:Wn.label,value:Wn.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])])]),_:2},1032,["label"]))),256)),createVNode(qe,{label:unref(n)("panels.paramsPanel.latoutEditing")},{default:withCtx(()=>[createVNode(Vn,{modelValue:unref(editing$2),"onUpdate:modelValue":Ie[2]||(Ie[2]=Bn=>isRef(editing$2)?editing$2.value=Bn:null)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_9$f,[createBaseVNode("div",_hoisted_10$f,toDisplayString$1(unref(r)("panels.paramsPanel.interactive")),1),createVNode(Et,{class:"name-form","label-width":"80px"},{default:withCtx(()=>[createVNode(qe,{label:unref(n)("panels.paramsPanel.draggableOption")},{default:withCtx(()=>[createVNode(Mn,{modelValue:unref(draggable$1),"onUpdate:modelValue":Ie[3]||(Ie[3]=Bn=>isRef(draggable$1)?draggable$1.value=Bn:null),class:"draggable-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.draggable")),1)]),_:1},8,["modelValue"])]),_:1},8,["label"]),createVNode(qe,{label:unref(n)("panels.paramsPanel.dragOption")},{default:withCtx(()=>[createVNode(Nn,{modelValue:unref(dragOption),"onUpdate:modelValue":Ie[4]||(Ie[4]=Bn=>isRef(dragOption)?dragOption.value=Bn:null),class:"radio-group"},{default:withCtx(()=>[createVNode($n,{value:"none",label:"none"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.dragOptionNone")),1)]),_:1}),createVNode($n,{value:"default",label:"default"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.dragOptionDefault")),1)]),_:1}),createVNode($n,{value:"layout",label:"layout",disabled:!unref(SubComponentsRoot$1)&&!unref(editGlyph).layout||!!unref(SubComponentsRoot$1)&&!unref(SubComponentsRoot$1).value.layout},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.dragOptionLayout")),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),createBaseVNode("div",_hoisted_11$e,[createBaseVNode("div",_hoisted_12$e,toDisplayString$1(unref(r)("panels.paramsPanel.transform.title")),1),createVNode(Et,{class:"transfom-form","label-width":"80px"},{default:withCtx(()=>[createVNode(qe,{label:unref(n)("panels.paramsPanel.transform.x")},{default:withCtx(()=>[createVNode(_n,{"model-value":$.value.ox,precision:1,onChange:ae},null,8,["model-value"])]),_:1},8,["label"]),createVNode(qe,{label:unref(n)("panels.paramsPanel.transform.y")},{default:withCtx(()=>[createVNode(_n,{"model-value":$.value.oy,precision:1,onChange:re},null,8,["model-value"])]),_:1},8,["label"])]),_:1})])]),createBaseVNode("div",_hoisted_13$c,[createBaseVNode("div",_hoisted_14$c,toDisplayString$1(unref(r)("panels.paramsPanel.params.title")),1),createVNode(Et,{class:"parameters-form","label-width":"80px"},{default:withCtx(()=>[createVNode(qe,{label:unref(n)("programming.joint")},{default:withCtx(()=>[createVNode(Vn,{modelValue:unref(checkJoints),"onUpdate:modelValue":Ie[5]||(Ie[5]=Bn=>isRef(checkJoints)?checkJoints.value=Bn:null)},null,8,["modelValue"])]),_:1},8,["label"]),createVNode(qe,{label:unref(n)("programming.refline")},{default:withCtx(()=>[createVNode(Vn,{modelValue:unref(checkRefLines),"onUpdate:modelValue":Ie[6]||(Ie[6]=Bn=>isRef(checkRefLines)?checkRefLines.value=Bn:null)},null,8,["modelValue"])]),_:1},8,["label"]),(openBlock(!0),createElementBlock(Fragment,null,renderList($.value.value.parameters.parameters,Bn=>(openBlock(),createBlock(qe,{label:Bn.name},{default:withCtx(()=>[createVNode(Fn,{placement:"right",width:250,trigger:"click"},{reference:withCtx(()=>[createVNode(kn,{class:normalizeClass(["more-btn",{ring:Bn.type===unref(ParameterType).RingController||Bn.type===unref(ParameterType).Constant&&unref(getConstant)(Bn.value).type===unref(ParameterType).RingController,show:Bn.type===unref(ParameterType).Number||Bn.type===unref(ParameterType).Constant&&unref(getConstant)(Bn.value).type!==unref(ParameterType).RingController||V.value===0}])},{default:withCtx(()=>[createVNode(unref(more_default))]),_:2},1032,["class"])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_15$9,[withDirectives(createVNode(jn,{onPointerdown:Wn=>he(Bn)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.cancelGlobalParam")),1)]),_:2},1032,["onPointerdown"]),[[vShow,Bn.type===unref(ParameterType).Constant]]),createVNode(jn,{onPointerdown:Wn=>_e(Bn)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.setAsGlobalParam")),1)]),_:2},1032,["onPointerdown"]),createVNode(jn,{onPointerdown:Wn=>Ce(Bn)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.selectGlobalParam")),1)]),_:2},1032,["onPointerdown"]),withDirectives(createVNode(jn,{type:"primary",onPointerdown:Wn=>Ne(Bn)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.updateGlobalParam")),1)]),_:2},1032,["onPointerdown"]),[[vShow,Bn.type===unref(ParameterType).Constant]])])]),_:2},1024),withDirectives(createBaseVNode("div",{class:normalizeClass(["global-param-note",{ring:Bn.type===unref(ParameterType).Constant&&unref(getConstant)(Bn.value).type===unref(ParameterType).RingController}])},toDisplayString$1(unref(r)("panels.paramsPanel.globalParam")),3),[[vShow,Bn.type===unref(ParameterType).Constant]]),Bn.type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_16$9,[createVNode(_n,{"model-value":Bn.value,step:Bn.max<=10?.01:1,min:Bn.min,max:Bn.max,precision:Bn.max<=10?2:0,onChange:Wn=>oe(Bn,Wn)},null,8,["model-value","step","min","max","precision","onChange"]),createVNode(Tn,{step:Bn.max<=10?.01:1,min:Bn.min,max:Bn.max,precision:Bn.max<=10?2:0,onInput:Wn=>oe(Bn,Wn),modelValue:Bn.value,"onUpdate:modelValue":Wn=>Bn.value=Wn},null,8,["step","min","max","precision","onInput","modelValue","onUpdate:modelValue"]),createBaseVNode("div",{class:"down-menu-icon-wrap",onPointerdown:Wn=>unref(le)[Bn.uuid]=!unref(le)[Bn.uuid]},[createVNode(Dt,{icon:["fas","arrow-down-wide-short"]})],40,_hoisted_17$7),withDirectives(createBaseVNode("div",_hoisted_18$6,[createBaseVNode("div",_hoisted_19$6,[createVNode(Dt,{class:normalizeClass(["ratio-icon",{selected:Bn.ratioed}]),onPointerdown:()=>{Bn.ratioed=!Bn.ratioed,!Bn.ratioed&&$.value.value.system_script&&$.value.value.system_script[Bn.name]&&delete $.value.value.system_script[Bn.name]},icon:["fas","percent"]},null,8,["class","onPointerdown"]),createVNode(hn,{modelValue:Bn.ratio,"onUpdate:modelValue":Wn=>Bn.ratio=Wn,class:"control-type-select",placeholder:"Ratio",disabled:!Bn.ratioed,onChange:Wn=>ue(Bn,Wn)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(getRatioOptions)($.value.value),Wn=>(openBlock(),createBlock(Sn,{key:Wn.key,label:Wn.label,value:Wn.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])])],512),[[vShow,unref(le)[Bn.uuid]]])])):Bn.type===unref(ParameterType).Enum?(openBlock(),createElementBlock("div",_hoisted_20$6,[createVNode(hn,{modelValue:Bn.value,"onUpdate:modelValue":Wn=>Bn.value=Wn,class:"enum-param-select",placeholder:"Select",onChange:Wn=>oe(Bn,Wn)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Bn.options,Wn=>(openBlock(),createBlock(Sn,{key:Wn.value,label:Wn.label,value:Wn.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):Bn.type===unref(ParameterType).RingController?(openBlock(),createElementBlock("div",_hoisted_21$6,[createVNode(hn,{modelValue:V.value,"onUpdate:modelValue":Ie[7]||(Ie[7]=Wn=>V.value=Wn),class:"control-type-select",placeholder:unref(n)("programming.controlType")},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(L,Wn=>createVNode(Sn,{key:Wn.key,label:unref(n)(`programming.${Wn.key}`),value:Wn.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"]),V.value===0?(openBlock(),createElementBlock("div",_hoisted_22$6,[createVNode(_sfc_main$W,{radius:Bn.value.radius,size:z.value,degree:Bn.value.degree,params:Bn.value.params,"on-change":(Wn,da,ga)=>de(Bn.value,Wn,da,ga)},null,8,["radius","size","degree","params","on-change"])])):V.value===1?(openBlock(),createElementBlock("div",_hoisted_23$6,[createVNode(Zn,{type:"border-card"},{default:withCtx(()=>[createVNode(Hn,{label:"radius"},{default:withCtx(()=>[createVNode(qe,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(ze,{class:"parameter-value",modelValue:Bn.value.radius.name,"onUpdate:modelValue":Wn=>Bn.value.radius.name=Wn,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(qe,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(_n,{class:"parameter-value",modelValue:Bn.value.radius.value,"onUpdate:modelValue":Wn=>Bn.value.radius.value=Wn,min:Bn.value.radius.min,max:Bn.value.radius.max,precision:Bn.value.radius.max<=10?2:0,step:Bn.value.radius.max<=10?.01:1},null,8,["modelValue","onUpdate:modelValue","min","max","precision","step"]),createVNode(Tn,{onInput:Wn=>oe(Bn.value.radius,Wn),modelValue:Bn.value.radius.value,"onUpdate:modelValue":Wn=>Bn.value.radius.value=Wn,min:Bn.value.radius.min,max:Bn.value.radius.max,precision:Bn.value.radius.max<=10?2:0,step:Bn.value.radius.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Hn,{label:"degree"},{default:withCtx(()=>[createVNode(qe,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(ze,{class:"parameter-value",modelValue:Bn.value.degree.name,"onUpdate:modelValue":Wn=>Bn.value.degree.name=Wn,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(qe,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(_n,{class:"parameter-value",modelValue:Bn.value.degree.value,"onUpdate:modelValue":Wn=>Bn.value.degree.value=Wn,min:Bn.value.degree.min,max:Bn.value.degree.max,precision:Bn.value.degree.max<=10?2:0,step:Bn.value.degree.max<=10?.01:1},null,8,["modelValue","onUpdate:modelValue","min","max","precision","step"]),createVNode(Tn,{onInput:Wn=>oe(Bn.value.degree,Wn),modelValue:Bn.value.degree.value,"onUpdate:modelValue":Wn=>Bn.value.degree.value=Wn,min:Bn.value.degree.min,max:Bn.value.degree.max,precision:Bn.value.degree.max<=10?2:0,step:Bn.value.degree.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Hn,{label:"params"},{default:withCtx(()=>[createVNode(ca,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Bn.value.params,Wn=>(openBlock(),createBlock(la,{title:Wn.name,name:"1"},{default:withCtx(()=>[createVNode(qe,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(ze,{class:"parameter-value",modelValue:Wn.name,"onUpdate:modelValue":da=>Wn.name=da,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(qe,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(_n,{class:"parameter-value test",modelValue:Wn.value,"onUpdate:modelValue":da=>Wn.value=da,min:Wn.min,max:Wn.max,precision:Wn.max<=10?2:0,step:Wn.max<=10?.01:1},null,8,["modelValue","onUpdate:modelValue","min","max","precision","step"]),createVNode(Tn,{onInput:da=>oe(Wn,da),modelValue:Wn.value,"onUpdate:modelValue":da=>Wn.value=da,min:Wn.min,max:Wn.max,precision:Wn.max<=10?2:0,step:Wn.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024)])):createCommentVNode("",!0)])):Bn.type===unref(ParameterType).Constant?(openBlock(),createElementBlock("div",_hoisted_24$6,[unref(getConstant)(Bn.value).type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_25$5,[createVNode(_n,{"model-value":unref(getConstant)(Bn.value).value,step:unref(getConstant)(Bn.value).max<=10?.01:1,min:unref(getConstant)(Bn.value).min,max:unref(getConstant)(Bn.value).max,precision:unref(getConstant)(Bn.value).max<=10?2:0,onChange:Wn=>oe(unref(getConstant)(Bn.value),Wn)},null,8,["model-value","step","min","max","precision","onChange"]),createVNode(Tn,{"model-value":unref(getConstant)(Bn.value).value,step:unref(getConstant)(Bn.value).max<=10?.01:1,min:unref(getConstant)(Bn.value).min,max:unref(getConstant)(Bn.value).max,precision:unref(getConstant)(Bn.value).max<=10?2:0,onInput:Wn=>oe(unref(getConstant)(Bn.value),Wn),onChange:Wn=>oe(unref(getConstant)(Bn.value),Wn)},null,8,["model-value","step","min","max","precision","onInput","onChange"])])):unref(getConstant)(Bn.value).type===unref(ParameterType).RingController?(openBlock(),createElementBlock("div",_hoisted_26$4,[createVNode(hn,{modelValue:V.value,"onUpdate:modelValue":Ie[8]||(Ie[8]=Wn=>V.value=Wn),class:"control-type-select",placeholder:unref(n)("programming.controlType")},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(L,Wn=>createVNode(Sn,{key:Wn.key,label:unref(n)(`programming.${Wn.key}`),value:Wn.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"]),V.value===0?(openBlock(),createElementBlock("div",_hoisted_27$4,[createVNode(_sfc_main$W,{radius:unref(getConstant)(Bn.value).value.radius,size:z.value,degree:unref(getConstant)(Bn.value).value.degree,params:unref(getConstant)(Bn.value).value.params,"on-change":(Wn,da,ga)=>de(unref(getConstant)(Bn.value).value,Wn,da,ga)},null,8,["radius","size","degree","params","on-change"])])):V.value===1?(openBlock(),createElementBlock("div",_hoisted_28$3,[createVNode(Zn,{type:"border-card"},{default:withCtx(()=>[createVNode(Hn,{label:"radius"},{default:withCtx(()=>[createVNode(qe,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(ze,{class:"parameter-value","model-value":unref(getConstant)(Bn.value).value.radius.name,disabled:""},null,8,["model-value"])]),_:2},1024),createVNode(qe,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(_n,{class:"parameter-value","model-value":unref(getConstant)(Bn.value).value.radius.value,min:unref(getConstant)(Bn.value).value.radius.min,max:unref(getConstant)(Bn.value).value.radius.max,precision:unref(getConstant)(Bn.value).value.radius.max<=10?2:0,step:unref(getConstant)(Bn.value).value.radius.max<=10?.01:1,onChange:Wn=>oe(unref(getConstant)(Bn.value).value.radius,Wn)},null,8,["model-value","min","max","precision","step","onChange"]),createVNode(Tn,{onInput:Wn=>oe(unref(getConstant)(Bn.value).value.radius,Wn),"model-value":unref(getConstant)(Bn.value).value.radius.value,min:unref(getConstant)(Bn.value).value.radius.min,max:unref(getConstant)(Bn.value).value.radius.max,precision:unref(getConstant)(Bn.value).value.radius.max<=10?2:0,step:unref(getConstant)(Bn.value).value.radius.max<=10?.01:1},null,8,["onInput","model-value","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Hn,{label:"degree"},{default:withCtx(()=>[createVNode(qe,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(ze,{class:"parameter-value","model-value":unref(getConstant)(Bn.value).value.degree.name,disabled:""},null,8,["model-value"])]),_:2},1024),createVNode(qe,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(_n,{class:"parameter-value","model-value":unref(getConstant)(Bn.value).value.degree.value,min:unref(getConstant)(Bn.value).value.degree.min,max:unref(getConstant)(Bn.value).value.degree.max,precision:unref(getConstant)(Bn.value).value.degree.max<=10?2:0,step:unref(getConstant)(Bn.value).value.degree.max<=10?.01:1,onChange:Wn=>oe(unref(getConstant)(Bn.value).value.degree,Wn)},null,8,["model-value","min","max","precision","step","onChange"]),createVNode(Tn,{onInput:Wn=>oe(unref(getConstant)(Bn.value).value.degree,Wn),"model-value":unref(getConstant)(Bn.value).value.degree.value,min:unref(getConstant)(Bn.value).value.degree.min,max:unref(getConstant)(Bn.value).value.degree.max,precision:unref(getConstant)(Bn.value).value.degree.max<=10?2:0,step:unref(getConstant)(Bn.value).value.degree.max<=10?.01:1},null,8,["onInput","model-value","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Hn,{label:"params"},{default:withCtx(()=>[createVNode(ca,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(getConstant)(Bn.value).value.params,Wn=>(openBlock(),createBlock(la,{title:Wn.name,name:"1"},{default:withCtx(()=>[createVNode(qe,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(ze,{class:"parameter-value","model-value":Wn.name,disabled:""},null,8,["model-value"])]),_:2},1024),createVNode(qe,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(_n,{class:"parameter-value test","model-value":Wn.value,min:Wn.min,max:Wn.max,precision:Wn.max<=10?2:0,step:Wn.max<=10?.01:1,onChange:da=>oe(Wn,da)},null,8,["model-value","min","max","precision","step","onChange"]),createVNode(Tn,{onInput:da=>oe(Wn,da),modelValue:Wn.value,"onUpdate:modelValue":da=>Wn.value=da,min:Wn.min,max:Wn.max,precision:Wn.max<=10?2:0,step:Wn.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024)])):createCommentVNode("",!0)])):createCommentVNode("",!0)])):createCommentVNode("",!0)]),_:2},1032,["label"]))),256))]),_:1})]),createBaseVNode("div",_hoisted_29$3,[createBaseVNode("div",_hoisted_30$3,toDisplayString$1(unref(r)("panels.paramsPanel.joints.title")),1),createVNode(Et,{class:"joints-form","label-width":"80px"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList($.value.value._o?$.value.value._o?.getJoints():[],Bn=>(openBlock(),createBlock(Mn,{modelValue:j.value[Bn.name],"onUpdate:modelValue":Wn=>j.value[Bn.name]=Wn,label:Bn.name},null,8,["modelValue","onUpdate:modelValue","label"]))),256))]),_:1})])])):createCommentVNode("",!0)])}}}),GlyphEditPanelGlyph=_export_sfc(_sfc_main$U,[["__scopeId","data-v-0bd1226a"]]),editing$1=ref(!1),setEditing$1=e=>{editing$1.value=e},draggingJoint$1=ref(null),putAtCoord$1=ref(null),movingJoint$1=ref(null),editGlyphOnDragging$1=ref(null),onSkeletonSelect=ref(!1),onSkeletonBind=computed(()=>editGlyph.value?.skeleton?.onSkeletonBind),onSkeletonDragging=ref(!1),onSelectBone=ref(!1),selectedBone=ref(null),onWeightSetting=ref(!1),weightValue=ref(.5),brushSize=ref(100),currentBone=ref(null),initWeightSelector=e=>{const{bones:n}=editGlyph.value?.skeleton?.skeletonBindData;currentBone.value=null;const r=$=>{const V=getCoord($.offsetX),L=getCoord($.offsetY);currentBone.value?(selectedBone.value=currentBone.value,currentBone.value=null):onWeightSetting.value&&brushSize.value>0&&setWeight(V,L),emitter.emit("renderGlyph"),renderBoneAndWeight(e,{mouseX:V,mouseY:L})},g=$=>{const V=getCoord($.offsetX),L=getCoord($.offsetY);currentBone.value=null;for(let z=0;z<n.length;z++){const{distance:j}=pointToBoneDistance({x:V,y:L},n[z]);j<=20&&(currentBone.value=n[z],currentBone.value.index=z)}emitter.emit("renderGlyph"),renderBoneAndWeight(e,{mouseX:V,mouseY:L})},y=$=>{const V=getCoord($.offsetX),L=getCoord($.offsetY);currentBone.value=null,emitter.emit("renderGlyph"),renderBoneAndWeight(e,{mouseX:V,mouseY:L})};return e.addEventListener("mouseup",y),e.addEventListener("mousemove",g),e.addEventListener("mousedown",r),()=>{e.removeEventListener("mouseup",y),e.removeEventListener("mousemove",g),e.removeEventListener("mousedown",r),currentBone.value=null}},renderBoneAndWeight=(e,n)=>{const r=currentBone.value||selectedBone.value;if(!r)return;const{pointsBonesMap:g,originalPoints:y}=editGlyph.value?.skeleton?.skeletonBindData;if(!g)return;const k=[];if(selectedBone.value)for(let z=0;z<g.length;z++){const{pointIndex:j,bones:ae}=g[z];let re=0,oe=0;for(let ue=0;ue<ae.length;ue++){const{boneIndex:le,weight:de,localCoords:he}=ae[ue];le===r.index?re=de:oe+=de}re>0&&k.push({x:y[j].x,y:y[j].y,weight:re,otherWeight:oe})}const $=e.getContext("2d");for(let z=0;z<k.length;z++){const{x:j,y:ae,weight:re,otherWeight:oe}=k[z];$.fillStyle=getWeightColor(k[z]),$.fillRect(mapCanvasX(j),mapCanvasY(ae),10,10)}const{start:V,end:L}=r;if($.strokeStyle="red",$.lineWidth=10,$.beginPath(),$.moveTo(mapCanvasX(V.x),mapCanvasY(V.y)),$.lineTo(mapCanvasX(L.x),mapCanvasY(L.y)),$.stroke(),$.closePath(),!currentBone.value&&onWeightSetting.value){const{mouseX:z,mouseY:j}=n||{mouseX:0,mouseY:0},ae=mapCanvasX(brushSize.value);$.fillStyle="rgba(255, 0, 0, 0.5)",$.beginPath(),$.ellipse(mapCanvasX(z),mapCanvasY(j),ae/2,ae/2,0,0,2*Math.PI),$.fill(),$.closePath()}},setWeight=(e,n)=>{const{pointsBonesMap:r,originalPoints:g,bones:y}=editGlyph.value?.skeleton?.skeletonBindData;if(r)for(let k=0;k<r.length;k++){const{pointIndex:$,bones:V}=r[k],{x:L,y:z}=g[$];if(Math.sqrt((e-L)**2+(n-z)**2)<=brushSize.value/2){let ae=!1;const re=V.find(ue=>ue.boneIndex===selectedBone.value.index),oe=re?re.weight:0;for(let ue=0;ue<V.length;ue++){const{boneIndex:le,weight:de,localCoords:he}=V[ue];le===selectedBone.value.index?(V[ue].weight=weightValue.value,ae=!0):re?oe===1?V[ue].weight=0:V[ue].weight=V[ue].weight/(1-oe)*(1-weightValue.value):V[ue].weight=V[ue].weight*(1-weightValue.value)}if(!ae&&weightValue.value>0){const{distance:ue,localCoords:le}=pointToBoneDistance(g[$],y[selectedBone.value.index]);V.push({boneIndex:selectedBone.value.index,weight:weightValue.value,localCoords:le})}}}},getWeightColor=e=>{const{weight:n,otherWeight:r}=e,g=1-r-n,y=Math.round(n*255),k=Math.round(r*255),$=Math.round(g*255);return`rgba(${y}, ${$}, ${k}, 1)`},calculateGlyphWeight=e=>{const{pointsBonesMap:n,originalPoints:r,bones:g}=e.skeleton.skeletonBindData,y=e.components[0].value.points,k=getDiscretePoints(y),$=[];for(let z=0;z<g.length;z++){const{avgWeight:j,boneLength:ae}=calculateWeightAtBone(k,g[z]);$.push({avgWeight:j,boneLength:ae})}const V=$.reduce((z,j)=>z+j.boneLength,0);let L=0;for(let z=0;z<$.length;z++){const{avgWeight:j,boneLength:ae}=$[z];L+=j*ae/V}return L},getDiscretePoints=e=>{const n=[];if(e.length<4)return e;for(let g=0;g<e.length-1;g+=3){const y=[e[g],e[g+1],e[g+2],e[g+3]];for(let k=0;k<100;k++){const $=k/100,V=bezierCurve.q(y,$);n.push(V)}}return n},calculateWeightAtBone=(e,n)=>{const r=Math.atan2(n.end.y-n.start.y,n.end.x-n.start.x),g=100,y={x:n.start.x+Math.sin(r)*g,y:n.start.y-Math.cos(r)*g},k={x:n.end.x+Math.sin(r)*g,y:n.end.y-Math.cos(r)*g},$={x:n.start.x-Math.sin(r)*g,y:n.end.y+Math.cos(r)*g},V={x:n.end.x-Math.sin(r)*g,y:n.end.y+Math.cos(r)*g},{corner:L,corner_index:z}=FP.getIntersection({type:"line",start:n.start,end:y},{type:"curve",points:e}),{corner:j,corner_index:ae}=FP.getIntersection({type:"line",start:n.end,end:$},{type:"curve",points:e}),{corner:re,corner_index:oe}=FP.getIntersection({type:"line",start:n.start,end:k},{type:"curve",points:e}),{corner:ue,corner_index:le}=FP.getIntersection({type:"line",start:n.end,end:V},{type:"curve",points:e});return{avgWeight:(distance$3(L,j)+distance$3(re,ue))/2,boneLength:distance$3(n.start,n.end)}},distance$3=(e,n)=>!e||!n?0:Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2),_withScopeId$b=e=>(pushScopeId("data-v-b8129adf"),e=e(),popScopeId(),e),_hoisted_1$S={class:"glyph-edit-panel"},_hoisted_2$Q=_withScopeId$b(()=>createBaseVNode("div",{class:"title"},"",-1)),_hoisted_3$s={class:"style-tag-wrap"},_hoisted_4$p={class:"title"},_hoisted_5$k={class:"layout-wrap"},_hoisted_6$h={key:0,class:"layout-info"},_hoisted_7$e={key:0,class:"title"},_hoisted_8$e={key:1,class:"skeleton-wrap"},_hoisted_9$e={key:9,class:"weight-setting-wrap"},_hoisted_10$e={class:"parameters-wrap"},_hoisted_11$d={class:"title"},_hoisted_12$d={class:"param-btn-group"},_hoisted_13$b={key:0},_hoisted_14$b=["onPointerdown"],_hoisted_15$8={class:"down-menu"},_hoisted_16$8={class:"ratio-item"},_hoisted_17$6={key:1},_hoisted_18$5={key:2},_hoisted_19$5={key:0,class:"ring-controller-wrap"},_hoisted_20$5={key:1,class:"number-controller-wrap"},_hoisted_21$5={key:3},_hoisted_22$5={key:0},_hoisted_23$5={key:1},_hoisted_24$5={key:0,class:"ring-controller-wrap"},_hoisted_25$4={key:1,class:"number-controller-wrap"},_sfc_main$T=defineComponent({__name:"GlyphParamsPanel",setup(e){const{t:n,tm:r}=useI18n(),g=ref(!1),y=Nn=>{const kn=Nn,jn={type:kn,ox:0,oy:0};editGlyph.value.skeleton=jn;const Fn=strokes.find(Hn=>Hn.name===kn);if(Fn){const Hn=editGlyph.value.parameters.parameters;for(let la=0;la<Fn.params.length;la++){const ca=Fn.params[la];Hn.push({uuid:genUUID(),name:ca.name,type:ParameterType.Number,value:ca.default,min:ca.min||0,max:ca.max||1e3})}Hn.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:0,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]}),Hn.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:0,max:2})}const Tn=strokeFnMap[kn];Tn&&Tn.instanceBasicGlyph(editGlyph.value),Tn&&Tn.updateSkeletonListenerBeforeBind(editGlyph.value._o),onSkeletonSelect.value=!1,editGlyph.value.skeleton.onSkeletonBind=!0,onSkeletonDragging.value=!0,emitter.emit("renderGlyph")},k=()=>{if(!editGlyph.value.components.length){onSkeletonDragging.value=!1;return}const{type:Nn}=editGlyph.value.skeleton,kn=strokeFnMap[Nn];kn&&(kn.bindSkeletonGlyph(editGlyph.value),kn.updateSkeletonListenerAfterBind(editGlyph.value._o)),onSkeletonDragging.value=!1,editGlyph.value.skeleton.originWeight=calculateGlyphWeight(editGlyph.value),editGlyph.value.parameters.set("",editGlyph.value.skeleton.originWeight),editGlyph.value.skeleton.onSkeletonBind=!1},$=()=>{const{type:Nn}=editGlyph.value.skeleton;editGlyph.value.skeleton=null;const kn=strokes.find(jn=>jn.name===Nn);if(kn){kn.params.map(Tn=>{const Hn=editGlyph.value.parameters.parameters.findIndex(la=>la.name===Tn.name);Hn!==-1&&editGlyph.value.parameters.parameters.splice(Hn,1)}),editGlyph.value._o.getSkeleton=null,editGlyph.value._o.onSkeletonDragStart=null,editGlyph.value._o.onSkeletonDrag=null,editGlyph.value._o.onSkeletonDragEnd=null,editGlyph.value._o._joints=[],editGlyph.value._o._reflines=[];const jn=editGlyph.value.parameters.parameters;for(let Tn=0;Tn<kn.params.length;Tn++){const Hn=kn.params[Tn],la=jn.findIndex(ca=>ca.name===Hn.name);la!==-1&&jn.splice(la,1)}const Fn=["",""];for(let Tn=0;Tn<Fn.length;Tn++){const Hn=Fn[Tn],la=jn.findIndex(ca=>ca.name===Hn);la!==-1&&jn.splice(la,1)}emitter.emit("renderGlyph")}},V=()=>{const{type:Nn}=editGlyph.value.skeleton,kn=strokeFnMap[Nn];kn&&kn.instanceBasicGlyph(editGlyph.value),kn&&kn.updateSkeletonListenerBeforeBind(editGlyph.value._o),onSkeletonSelect.value=!1,editGlyph.value.skeleton.onSkeletonBind=!0,onSkeletonDragging.value=!0},L=Nn=>{editGlyph.value.skeleton.ox=Nn},z=Nn=>{editGlyph.value.skeleton.oy=Nn};let j=null;const ae=()=>{onWeightSetting.value=!0,onSelectBone.value=!0,j=initWeightSelector(canvas.value),emitter.emit("renderGlyph"),renderBoneAndWeight(canvas.value)},re=()=>{onWeightSetting.value=!1,onSelectBone.value=!1,j&&j(),j=null,emitter.emit("renderGlyph")},oe=computed({get:()=>selectedBone.value?selectedBone.value.index:null,set:Nn=>{selectedBone.value&&(selectedBone.value.index=Nn)}}),ue=Nn=>{selectedBone.value=editGlyph.value.skeleton.skeletonBindData.bones[Nn],selectedBone.value.index=Nn,emitter.emit("renderGlyph"),renderBoneAndWeight(canvas.value)},le=ref(0),de=[{value:0,key:"widget"},{value:1,key:"number"}],he=ref(0),_e=[{value:0,key:"null"},{value:1,key:"rect"}],Ce=ref(!1),Ne=ref(150),$e=Nn=>{saveState("",[editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo,Nn)};let xe=null,Ie=!1;watch(editGlyph,(Nn,kn)=>{xe&&clearTimeout(xe),xe=setTimeout(()=>{Ie=!1,clearTimeout(xe)},500),Ie||($e({editGlyph:kn,newRecord:!0}),Ie=!0)});const ze=(Nn,kn)=>{if(Nn.value=kn,Nn.ratioed){editGlyph.value.param_script||(editGlyph.value.param_script={});const jn=getRatioLayout(editGlyph.value,kn),Fn=`window.glyph.setParam('${Nn.name}',window.glyph.getRatioLayout('${kn}') / ${jn} * ${Nn.value});`;editGlyph.value.param_script[Nn.name]=Fn}executeScript(editGlyph.value),emitter.emit("renderGlyphPreviewCanvasByUUIDOnEditing",editGlyph.value.uuid),emitter.emit("renderGlyph")},qe=(Nn,kn)=>{if(Nn.ratioed){editGlyph.value.param_script||(editGlyph.value.param_script={});const jn=getRatioLayout(editGlyph.value,kn),Fn=`window.glyph.setParam('${Nn.name}',window.glyph.getRatioLayout('${kn}') / ${jn} * ${Nn.value});`;editGlyph.value.param_script[Nn.name]=Fn}executeScript(editGlyph.value),emitter.emit("renderGlyphPreviewCanvasByUUID",editGlyph.value.uuid),emitter.emit("renderGlyph")},Et=(Nn,kn,jn,Fn)=>{Nn.radius.value=kn,Nn.degree.value=jn,Nn.params=Object.assign([],Fn),executeScript(editGlyph.value),emitter.emit("renderGlyphPreviewCanvasByUUID",editGlyph.value.uuid),emitter.emit("renderGlyph")};watch([checkJoints,checkRefLines],()=>{emitter.emit("renderGlyph")}),watch(he,()=>{if(he.value===0)editGlyph.value.layout=null;else if(he.value===1){const Nn={width:{ratioed:!1,ratio:"DEFAULT"},height:{ratioed:!1,ratio:"DEFAULT"}};editGlyph.value.layout={type:"rect",params:{width:1e3,height:1e3},ratioedMap:Nn}}Ce.value=!1});let _n=ref({});onMounted(()=>{editGlyph.value.parameters.parameters.map(Nn=>{_n.value[Nn.uuid]=!1})});let Dt=null;const Sn=async()=>{emitter.emit("renderGlyphPreviewCanvasByUUID",editGlyph.value.uuid),Dt&&clearTimeout(Dt),Dt=setTimeout(()=>{executeScript(editGlyph.value),emitter.emit("renderGlyph",!0)},1500)},hn=Nn=>{const kn=getConstant(Nn.value);Nn.type=kn.type,Nn.value=kn.value;const jn=constantGlyphMap.get(kn.uuid);for(let Fn=0;Fn<jn.length;Fn++)if(jn[Fn].parameterUUID===Nn.uuid){jn.splice(Fn,1);break}},Vn=Nn=>{selectedParam.value=Nn,selectedParamType.value="glyph_components",setSetAsGlobalParamDialogVisible(!0)},Mn=Nn=>{selectedParam.value=Nn,selectedParamType.value="glyph_components",setSelectGlobalParamDialogVisible(!0)},$n=Nn=>{const kn=constantGlyphMap.get(Nn.value);for(let jn=0;jn<kn.length;jn++){const Fn=kn[jn];let Tn=null;if(Fn.constantType===ConstantType.Parameter)Tn=getGlyphByUUID(kn[jn].glyphUUID);else if(Fn.constantType===ConstantType.Component){const Hn=kn[jn].parentUUID;let la=null;Fn.glyphType===GlyphType.Char?la=selectedItemByUUID(selectedFile.value.characterList,Hn):la=getGlyphByUUID(Hn),Tn=la.value}Tn&&(executeScript(Tn),emitter.emit("renderGlyphPreviewCanvasByUUID",Tn.uuid))}};return(Nn,kn)=>{const jn=resolveComponent("el-icon"),Fn=resolveComponent("el-input"),Tn=resolveComponent("el-button"),Hn=resolveComponent("el-option"),la=resolveComponent("el-select"),ca=resolveComponent("el-form-item"),Zn=resolveComponent("el-input-number"),Bn=resolveComponent("el-switch"),Wn=resolveComponent("el-form"),da=resolveComponent("el-checkbox"),ga=resolveComponent("el-popover"),Ca=resolveComponent("el-slider"),ra=resolveComponent("font-awesome-icon"),Gn=resolveComponent("el-tab-pane"),vn=resolveComponent("el-collapse-item"),Kn=resolveComponent("el-collapse"),En=resolveComponent("el-tabs");return openBlock(),createElementBlock("div",_hoisted_1$S,[_hoisted_2$Q,createBaseVNode("div",_hoisted_3$s,[createVNode(Fn,{modelValue:unref(editGlyph).style,"onUpdate:modelValue":kn[2]||(kn[2]=kt=>unref(editGlyph).style=kt),disabled:!g.value},{append:withCtx(()=>[g.value?(openBlock(),createBlock(jn,{key:1,onPointerdown:kn[1]||(kn[1]=kt=>g.value=!1)},{default:withCtx(()=>[createVNode(unref(check_default))]),_:1})):(openBlock(),createBlock(jn,{key:0,onPointerdown:kn[0]||(kn[0]=kt=>g.value=!0)},{default:withCtx(()=>[createVNode(unref(edit_default))]),_:1}))]),_:1},8,["modelValue","disabled"])]),createBaseVNode("div",_hoisted_4$p,toDisplayString$1(unref(n)("panels.paramsPanel.layout.title")),1),createBaseVNode("div",_hoisted_5$k,[withDirectives(createVNode(Tn,{class:"add-layout-button",onPointerdown:kn[3]||(kn[3]=kt=>Ce.value=!0)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.paramsPanel.layout.add")),1)]),_:1},512),[[vShow,!unref(editGlyph).layout&&!Ce.value]]),withDirectives(createVNode(Tn,{class:"set-layout-button",onPointerdown:kn[4]||(kn[4]=kt=>Ce.value=!0)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.paramsPanel.layout.modify")),1)]),_:1},512),[[vShow,!!unref(editGlyph).layout&&!Ce.value]]),withDirectives(createVNode(la,{modelValue:he.value,"onUpdate:modelValue":kn[5]||(kn[5]=kt=>he.value=kt),class:"layout-type-select",placeholder:unref(r)("panels.paramsPanel.layout.title")},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(_e,kt=>createVNode(Hn,{key:kt.key,label:unref(r)(`panels.paramsPanel.layout.${kt.key}`),value:kt.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"]),[[vShow,Ce.value]]),unref(editGlyph).layout?(openBlock(),createElementBlock("div",_hoisted_6$h,[createVNode(Wn,{class:"parameters-form","label-width":"80px"},{default:withCtx(()=>[createVNode(ca,{label:unref(r)("panels.paramsPanel.layout.type")},{default:withCtx(()=>[createVNode(Fn,{disabled:"",modelValue:unref(editGlyph).layout.type,"onUpdate:modelValue":kn[6]||(kn[6]=kt=>unref(editGlyph).layout.type=kt)},null,8,["modelValue"])]),_:1},8,["label"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(Object.keys(unref(editGlyph).layout.params),kt=>(openBlock(),createBlock(ca,{label:kt},{default:withCtx(()=>[createVNode(Zn,{modelValue:unref(editGlyph).layout.params[kt],"onUpdate:modelValue":At=>unref(editGlyph).layout.params[kt]=At,onChange:Sn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]))),256)),createVNode(ca,{label:""},{default:withCtx(()=>[createVNode(Bn,{modelValue:unref(editing$2),"onUpdate:modelValue":kn[7]||(kn[7]=kt=>isRef(editing$2)?editing$2.value=kt:null)},null,8,["modelValue"])]),_:1})]),_:1})])):createCommentVNode("",!0)]),!unref(editGlyph).skeleton&&(!unref(editGlyph)._o?.getSkeleton||!unref(editGlyph)._o?.getSkeleton())||unref(editGlyph).skeleton||unref(onSkeletonSelect)||unref(onSkeletonBind)?(openBlock(),createElementBlock("div",_hoisted_7$e,"")):createCommentVNode("",!0),!unref(editGlyph).skeleton&&(!unref(editGlyph)._o?.getSkeleton||!unref(editGlyph)._o?.getSkeleton())||unref(editGlyph).skeleton||unref(onSkeletonSelect)||unref(onSkeletonBind)?(openBlock(),createElementBlock("div",_hoisted_8$e,[!unref(editGlyph).skeleton&&(!unref(editGlyph)._o?.getSkeleton||!unref(editGlyph)._o?.getSkeleton())?(openBlock(),createBlock(Tn,{key:0,onPointerdown:kn[8]||(kn[8]=kt=>onSkeletonSelect.value=!0)},{default:withCtx(()=>[createTextVNode("")]),_:1})):createCommentVNode("",!0),unref(onSkeletonSelect)?(openBlock(),createBlock(la,{key:1,"model-value":unref(editGlyph).skeleton?.type,class:"skeleton-type-select",placeholder:"",disabled:!unref(onSkeletonSelect),onChange:kn[9]||(kn[9]=kt=>y(kt))},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(skeletonOptions),kt=>(openBlock(),createBlock(Hn,{key:kt.value,label:kt.label,value:kt.value},null,8,["label","value"]))),128))]),_:1},8,["model-value","disabled"])):createCommentVNode("",!0),unref(onSkeletonBind)&&!unref(onSkeletonSelect)&&unref(editGlyph).skeleton?(openBlock(),createBlock(ca,{key:2,label:"OX"},{default:withCtx(()=>[createVNode(Zn,{"model-value":unref(editGlyph).skeleton.ox,precision:1,onChange:L},null,8,["model-value"])]),_:1})):createCommentVNode("",!0),unref(onSkeletonBind)&&!unref(onSkeletonSelect)&&unref(editGlyph).skeleton?(openBlock(),createBlock(ca,{key:3,label:"OY"},{default:withCtx(()=>[createVNode(Zn,{"model-value":unref(editGlyph).skeleton.oy,precision:1,onChange:z},null,8,["model-value"])]),_:1})):createCommentVNode("",!0),unref(onSkeletonBind)&&!unref(onSkeletonSelect)&&unref(editGlyph).skeleton?(openBlock(),createBlock(ca,{key:4,"label-width":0,class:"dynamic-weight-form-item"},{default:withCtx(()=>[createVNode(da,{modelValue:unref(editGlyph).skeleton.dynamicWeight,"onUpdate:modelValue":kn[10]||(kn[10]=kt=>unref(editGlyph).skeleton.dynamicWeight=kt)},{default:withCtx(()=>[createTextVNode("  ")]),_:1},8,["modelValue"])]),_:1})):createCommentVNode("",!0),unref(onSkeletonBind)&&!unref(onSkeletonSelect)&&unref(editGlyph).skeleton?(openBlock(),createBlock(Tn,{key:5,onPointerdown:k},{default:withCtx(()=>[createTextVNode("")]),_:1})):createCommentVNode("",!0),unref(editGlyph).skeleton&&!unref(onSkeletonBind)?(openBlock(),createBlock(Tn,{key:6,onPointerdown:ae},{default:withCtx(()=>[createTextVNode("")]),_:1})):createCommentVNode("",!0),unref(editGlyph).skeleton&&!unref(onSkeletonBind)&&!unref(onWeightSetting)?(openBlock(),createBlock(Tn,{key:7,onPointerdown:V},{default:withCtx(()=>[createTextVNode("")]),_:1})):createCommentVNode("",!0),unref(editGlyph).skeleton&&!unref(onSkeletonBind)&&!unref(onWeightSetting)?(openBlock(),createBlock(Tn,{key:8,type:"danger",onPointerdown:$},{default:withCtx(()=>[createTextVNode("")]),_:1})):createCommentVNode("",!0),unref(onWeightSetting)?(openBlock(),createElementBlock("div",_hoisted_9$e,[createVNode(ca,{label:"","label-width":80},{default:withCtx(()=>[createVNode(la,{modelValue:oe.value,"onUpdate:modelValue":kn[11]||(kn[11]=kt=>oe.value=kt),placeholder:"",onChange:ue},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(editGlyph).skeleton.skeletonBindData.bones,(kt,At)=>(openBlock(),createBlock(Hn,{key:At,label:kt.id,value:At},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),createVNode(ca,{label:"","label-width":80},{default:withCtx(()=>[createVNode(Zn,{modelValue:unref(weightValue),"onUpdate:modelValue":kn[12]||(kn[12]=kt=>isRef(weightValue)?weightValue.value=kt:null),precision:2,min:0,max:1},null,8,["modelValue"])]),_:1}),createVNode(ca,{label:"","label-width":80},{default:withCtx(()=>[createVNode(Zn,{modelValue:unref(brushSize),"onUpdate:modelValue":kn[13]||(kn[13]=kt=>isRef(brushSize)?brushSize.value=kt:null),precision:2,min:10,max:100},null,8,["modelValue"])]),_:1}),createVNode(Tn,{onPointerdown:re},{default:withCtx(()=>[createTextVNode("")]),_:1})])):createCommentVNode("",!0)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_10$e,[createBaseVNode("div",_hoisted_11$d,toDisplayString$1(unref(n)("panels.paramsPanel.params.title")),1),createVNode(Wn,{class:"parameters-form","label-width":"80px"},{default:withCtx(()=>[createVNode(ca,{label:unref(r)("programming.joint")},{default:withCtx(()=>[createVNode(Bn,{modelValue:unref(checkJoints),"onUpdate:modelValue":kn[14]||(kn[14]=kt=>isRef(checkJoints)?checkJoints.value=kt:null)},null,8,["modelValue"])]),_:1},8,["label"]),createVNode(ca,{label:unref(r)("programming.refline")},{default:withCtx(()=>[createVNode(Bn,{modelValue:unref(checkRefLines),"onUpdate:modelValue":kn[15]||(kn[15]=kt=>isRef(checkRefLines)?checkRefLines.value=kt:null)},null,8,["modelValue"])]),_:1},8,["label"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(editGlyph).parameters.parameters,kt=>(openBlock(),createBlock(ca,{label:kt.name},{default:withCtx(()=>[createVNode(ga,{placement:"right",width:250,trigger:"click"},{reference:withCtx(()=>[createVNode(jn,{class:normalizeClass(["more-btn",{ring:kt.type===unref(ParameterType).RingController||kt.type===unref(ParameterType).Constant&&unref(getConstant)(kt.value).type===unref(ParameterType).RingController,show:kt.type===unref(ParameterType).Number||kt.type===unref(ParameterType).Constant&&unref(getConstant)(kt.value).type!==unref(ParameterType).RingController||le.value===0}])},{default:withCtx(()=>[createVNode(unref(more_default))]),_:2},1032,["class"])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_12$d,[withDirectives(createVNode(Tn,{onPointerdown:At=>hn(kt)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.paramsPanel.cancelGlobalParam")),1)]),_:2},1032,["onPointerdown"]),[[vShow,kt.type===unref(ParameterType).Constant]]),createVNode(Tn,{onPointerdown:At=>Vn(kt)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.paramsPanel.setAsGlobalParam")),1)]),_:2},1032,["onPointerdown"]),createVNode(Tn,{onPointerdown:At=>Mn(kt)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.paramsPanel.selectGlobalParam")),1)]),_:2},1032,["onPointerdown"]),withDirectives(createVNode(Tn,{type:"primary",onPointerdown:At=>$n(kt)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.paramsPanel.updateGlobalParam")),1)]),_:2},1032,["onPointerdown"]),[[vShow,kt.type===unref(ParameterType).Constant]])])]),_:2},1024),withDirectives(createBaseVNode("div",{class:normalizeClass(["global-param-note",{ring:kt.type===unref(ParameterType).Constant&&unref(getConstant)(kt.value).type===unref(ParameterType).RingController}])},toDisplayString$1(unref(n)("panels.paramsPanel.globalParam")),3),[[vShow,kt.type===unref(ParameterType).Constant]]),kt.type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_13$b,[createVNode(Zn,{"model-value":kt.value,step:kt.max<=10?.01:1,min:kt.min,max:kt.max,precision:kt.max<=10?2:0,disabled:kt.type===unref(ParameterType).Constant,onChange:At=>ze(kt,At)},null,8,["model-value","step","min","max","precision","disabled","onChange"]),withDirectives(createVNode(Ca,{step:kt.max<=10?.01:1,min:kt.min,max:kt.max,precision:kt.max<=10?2:0,onInput:At=>ze(kt,At),modelValue:kt.value,"onUpdate:modelValue":At=>kt.value=At},null,8,["step","min","max","precision","onInput","modelValue","onUpdate:modelValue"]),[[vShow,kt.type===unref(ParameterType).Number]]),createBaseVNode("div",{class:"down-menu-icon-wrap",onPointerdown:At=>unref(_n)[kt.uuid]=!unref(_n)[kt.uuid]},[createVNode(ra,{icon:["fas","arrow-down-wide-short"]})],40,_hoisted_14$b),withDirectives(createBaseVNode("div",_hoisted_15$8,[createBaseVNode("div",_hoisted_16$8,[createVNode(ra,{class:normalizeClass(["ratio-icon",{selected:kt.ratioed}]),onPointerdown:()=>{kt.ratioed=!kt.ratioed,!kt.ratioed&&unref(editGlyph).system_script&&unref(editGlyph).system_script[kt.name]&&delete unref(editGlyph).system_script[kt.name]},icon:["fas","percent"]},null,8,["class","onPointerdown"]),createVNode(la,{modelValue:kt.ratio,"onUpdate:modelValue":At=>kt.ratio=At,class:"control-type-select",placeholder:"Ratio",disabled:!kt.ratioed,onChange:At=>qe(kt,At)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(getRatioOptions)(unref(editGlyph)),At=>(openBlock(),createBlock(Hn,{key:At.key,label:At.label,value:At.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onChange"])])],512),[[vShow,unref(_n)[kt.uuid]]])])):kt.type===unref(ParameterType).Enum?(openBlock(),createElementBlock("div",_hoisted_17$6,[createVNode(la,{modelValue:kt.value,"onUpdate:modelValue":At=>kt.value=At,class:"enum-param-select",placeholder:"Select",onChange:At=>ze(kt,At)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(kt.options,At=>(openBlock(),createBlock(Hn,{key:At.value,label:At.label,value:At.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):kt.type===unref(ParameterType).RingController?(openBlock(),createElementBlock("div",_hoisted_18$5,[createVNode(la,{modelValue:le.value,"onUpdate:modelValue":kn[16]||(kn[16]=At=>le.value=At),class:"control-type-select",placeholder:unref(r)("programming.controlType")},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(de,At=>createVNode(Hn,{key:At.key,label:unref(r)(`programming.${At.key}`),value:At.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"]),le.value===0?(openBlock(),createElementBlock("div",_hoisted_19$5,[createVNode(_sfc_main$W,{radius:kt.value.radius,size:Ne.value,degree:kt.value.degree,params:kt.value.params,"on-change":(At,Dn,Xn)=>Et(kt.value,At,Dn,Xn)},null,8,["radius","size","degree","params","on-change"])])):le.value===1?(openBlock(),createElementBlock("div",_hoisted_20$5,[createVNode(En,{type:"border-card"},{default:withCtx(()=>[createVNode(Gn,{label:"radius"},{default:withCtx(()=>[createVNode(ca,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Fn,{class:"parameter-value",modelValue:kt.value.radius.name,"onUpdate:modelValue":At=>kt.value.radius.name=At,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(ca,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Zn,{class:"parameter-value",modelValue:kt.value.radius.value,"onUpdate:modelValue":At=>kt.value.radius.value=At,min:kt.value.radius.min,max:kt.value.radius.max,precision:kt.value.radius.max<=10?2:0,step:kt.value.radius.max<=10?.01:1},null,8,["modelValue","onUpdate:modelValue","min","max","precision","step"]),createVNode(Ca,{onInput:At=>ze(kt.value.radius,At),modelValue:kt.value.radius.value,"onUpdate:modelValue":At=>kt.value.radius.value=At,min:kt.value.radius.min,max:kt.value.radius.max,precision:kt.value.radius.max<=10?2:0,step:kt.value.radius.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Gn,{label:"degree"},{default:withCtx(()=>[createVNode(ca,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Fn,{class:"parameter-value",modelValue:kt.value.degree.name,"onUpdate:modelValue":At=>kt.value.degree.name=At,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(ca,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Zn,{class:"parameter-value",modelValue:kt.value.degree.value,"onUpdate:modelValue":At=>kt.value.degree.value=At,min:kt.value.degree.min,max:kt.value.degree.max,precision:kt.value.degree.max<=10?2:0,step:kt.value.degree.max<=10?.01:1},null,8,["modelValue","onUpdate:modelValue","min","max","precision","step"]),createVNode(Ca,{onInput:At=>ze(kt.value.degree,At),modelValue:kt.value.degree.value,"onUpdate:modelValue":At=>kt.value.degree.value=At,min:kt.value.degree.min,max:kt.value.degree.max,precision:kt.value.degree.max<=10?2:0,step:kt.value.degree.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Gn,{label:"params"},{default:withCtx(()=>[createVNode(Kn,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(kt.value.params,At=>(openBlock(),createBlock(vn,{title:At.name,name:"1"},{default:withCtx(()=>[createVNode(ca,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Fn,{class:"parameter-value",modelValue:At.name,"onUpdate:modelValue":Dn=>At.name=Dn,disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(ca,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Zn,{class:"parameter-value",modelValue:At.value,"onUpdate:modelValue":Dn=>At.value=Dn,min:At.min,max:At.max,precision:At.max<=10?2:0,step:At.max<=10?.01:1},null,8,["modelValue","onUpdate:modelValue","min","max","precision","step"]),createVNode(Ca,{onInput:Dn=>ze(At,Dn),modelValue:At.value,"onUpdate:modelValue":Dn=>At.value=Dn,min:At.min,max:At.max,precision:At.max<=10?2:0,step:At.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024)])):createCommentVNode("",!0)])):kt.type===unref(ParameterType).Constant?(openBlock(),createElementBlock("div",_hoisted_21$5,[unref(getConstant)(kt.value).type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_22$5,[createVNode(Zn,{"model-value":unref(getConstant)(kt.value).value,step:unref(getConstant)(kt.value).max<=10?.01:1,min:unref(getConstant)(kt.value).min,max:unref(getConstant)(kt.value).max,precision:unref(getConstant)(kt.value).max<=10?2:0,onChange:At=>ze(unref(getConstant)(kt.value),At)},null,8,["model-value","step","min","max","precision","onChange"]),createVNode(Ca,{"model-value":unref(getConstant)(kt.value).value,step:unref(getConstant)(kt.value).max<=10?.01:1,min:unref(getConstant)(kt.value).min,max:unref(getConstant)(kt.value).max,precision:unref(getConstant)(kt.value).max<=10?2:0,onInput:At=>ze(kt,At),onChange:At=>ze(unref(getConstant)(kt.value),At)},null,8,["model-value","step","min","max","precision","onInput","onChange"])])):unref(getConstant)(kt.value).type===unref(ParameterType).RingController?(openBlock(),createElementBlock("div",_hoisted_23$5,[createVNode(la,{modelValue:le.value,"onUpdate:modelValue":kn[17]||(kn[17]=At=>le.value=At),class:"control-type-select",placeholder:unref(r)("programming.controlType")},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(de,At=>createVNode(Hn,{key:At.key,label:unref(r)(`programming.${At.key}`),value:At.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"]),le.value===0?(openBlock(),createElementBlock("div",_hoisted_24$5,[createVNode(_sfc_main$W,{radius:unref(getConstant)(kt.value).value.radius,size:Ne.value,degree:unref(getConstant)(kt.value).value.degree,params:unref(getConstant)(kt.value).value.params,"on-change":(At,Dn,Xn)=>Et(unref(getConstant)(kt.value).value,At,Dn,Xn)},null,8,["radius","size","degree","params","on-change"])])):le.value===1?(openBlock(),createElementBlock("div",_hoisted_25$4,[createVNode(En,{type:"border-card"},{default:withCtx(()=>[createVNode(Gn,{label:"radius"},{default:withCtx(()=>[createVNode(ca,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Fn,{class:"parameter-value","model-value":unref(getConstant)(kt.value).value.radius.name,disabled:""},null,8,["model-value"])]),_:2},1024),createVNode(ca,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Zn,{class:"parameter-value","model-value":unref(getConstant)(kt.value).value.radius.value,min:unref(getConstant)(kt.value).value.radius.min,max:unref(getConstant)(kt.value).value.radius.max,precision:unref(getConstant)(kt.value).value.radius.max<=10?2:0,step:unref(getConstant)(kt.value).value.radius.max<=10?.01:1,onChange:At=>ze(unref(getConstant)(kt.value).value.radius,At)},null,8,["model-value","min","max","precision","step","onChange"]),createVNode(Ca,{onInput:At=>ze(unref(getConstant)(kt.value).value.radius,At),"model-value":unref(getConstant)(kt.value).value.radius.value,min:unref(getConstant)(kt.value).value.radius.min,max:unref(getConstant)(kt.value).value.radius.max,precision:unref(getConstant)(kt.value).value.radius.max<=10?2:0,step:unref(getConstant)(kt.value).value.radius.max<=10?.01:1},null,8,["onInput","model-value","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Gn,{label:"degree"},{default:withCtx(()=>[createVNode(ca,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Fn,{class:"parameter-value","model-value":unref(getConstant)(kt.value).value.degree.name,disabled:""},null,8,["model-value"])]),_:2},1024),createVNode(ca,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Zn,{class:"parameter-value","model-value":unref(getConstant)(kt.value).value.degree.value,min:unref(getConstant)(kt.value).value.degree.min,max:unref(getConstant)(kt.value).value.degree.max,precision:unref(getConstant)(kt.value).value.degree.max<=10?2:0,step:unref(getConstant)(kt.value).value.degree.max<=10?.01:1,onChange:At=>ze(unref(getConstant)(kt.value).value.degree,At)},null,8,["model-value","min","max","precision","step","onChange"]),createVNode(Ca,{onInput:At=>ze(unref(getConstant)(kt.value).value.degree,At),"model-value":unref(getConstant)(kt.value).value.degree.value,min:unref(getConstant)(kt.value).value.degree.min,max:unref(getConstant)(kt.value).value.degree.max,precision:unref(getConstant)(kt.value).value.degree.max<=10?2:0,step:unref(getConstant)(kt.value).value.degree.max<=10?.01:1},null,8,["onInput","model-value","min","max","precision","step"])]),_:2},1024)]),_:2},1024),createVNode(Gn,{label:"params"},{default:withCtx(()=>[createVNode(Kn,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(getConstant)(kt.value).value.params,At=>(openBlock(),createBlock(vn,{title:At.name,name:"1"},{default:withCtx(()=>[createVNode(ca,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(Fn,{class:"parameter-value","model-value":At.name,disabled:""},null,8,["model-value"])]),_:2},1024),createVNode(ca,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Zn,{class:"parameter-value test","model-value":At.value,min:At.min,max:At.max,precision:At.max<=10?2:0,step:At.max<=10?.01:1,onChange:Dn=>ze(At,Dn)},null,8,["model-value","min","max","precision","step","onChange"]),createVNode(Ca,{onInput:Dn=>ze(At,Dn),modelValue:At.value,"onUpdate:modelValue":Dn=>At.value=Dn,min:At.min,max:At.max,precision:At.max<=10?2:0,step:At.max<=10?.01:1},null,8,["onInput","modelValue","onUpdate:modelValue","min","max","precision","step"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024)])):createCommentVNode("",!0)])):createCommentVNode("",!0)])):createCommentVNode("",!0)]),_:2},1032,["label"]))),256))]),_:1})])])}}}),GlyphParamsPanel=_export_sfc(_sfc_main$T,[["__scopeId","data-v-b8129adf"]]),_hoisted_1$R={class:"character-edit-panel"},_hoisted_2$P={class:"grid-settings"},_sfc_main$S=defineComponent({__name:"LayoutEditPanel",setup(e){const{tm:n,t:r,locale:g}=useI18n();ref(!1),ref(null),ref("");const y=()=>{saveState("",[StoreType.Grid,StoreType.EditCharacter],OpType.Undo),gridChanged.value=!1,editCharacterFile.value.info.gridSettings={dx:gridSettings$1.value.dx,dy:gridSettings$1.value.dy,size:gridSettings$1.value.size,centerSquareSize:gridSettings$1.value.centerSquareSize,default:!1},emitter.emit("renderPreviewCanvasByUUID",editCharacterFile.value.uuid),ElMessage({type:"success",message:n("panels.paramsPanel.applyGridTransform")})},k=()=>{saveState("",[StoreType.Grid,StoreType.EditCharacter],OpType.Undo),editCharacterFile.value.info.gridSettings={dx:0,dy:0,centerSquareSize:selectedFile.value.width/3,size:selectedFile.value.width,default:!0},gridSettings$1.value={dx:0,dy:0,centerSquareSize:selectedFile.value.width/3,size:selectedFile.value.width,default:!0},emitter.emit("renderPreviewCanvasByUUID",editCharacterFile.value.uuid),ElMessage({type:"success",message:n("panels.paramsPanel.resetGridTransform")})};return($,V)=>{const L=resolveComponent("el-button"),z=resolveComponent("el-switch"),j=resolveComponent("el-form-item");return openBlock(),createElementBlock("div",_hoisted_1$R,[createBaseVNode("div",_hoisted_2$P,[createVNode(L,{class:"grid-confirm-btn",disabled:!unref(gridChanged),onPointerdown:y,type:"primary"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.applyGridTransform")),1)]),_:1},8,["disabled"]),createVNode(L,{class:"grid-reset-btn",onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.resetGridTransform")),1)]),_:1}),createVNode(j,{"label-width":"120px",label:""},{default:withCtx(()=>[createVNode(z,{modelValue:unref(editCharacterFile).info.useSkeletonGrid,"onUpdate:modelValue":V[0]||(V[0]=ae=>unref(editCharacterFile).info.useSkeletonGrid=ae)},null,8,["modelValue"])]),_:1})])])}}}),LayoutEditPanel=_export_sfc(_sfc_main$S,[["__scopeId","data-v-7c9f4ee3"]]),_hoisted_1$Q={class:"character-edit-panel"},_hoisted_2$O={class:"metrics-settings"},_sfc_main$R=defineComponent({__name:"MetricsEditPanel",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=()=>{editCharacterFile.value.info.metrics={lsb:metrics_data.value.lsb,advanceWidth:metrics_data.value.advanceWidth,useDefaultValues:!1},ElMessage({type:"success",message:n("panels.paramsPanel.applyMetricsTransform")})},k=()=>{editCharacterFile.value.info.metrics={advanceWidth:1e3,lsb:0,useDefaultValues:!0};const L=$();metrics_data.value.lsb=L.lsb,metrics_data.value.advanceWidth=L.advanceWidth,metrics_data.value.xMin=L.xMin,metrics_data.value.xMax=L.xMax,metrics_data.value.yMin=L.yMin,metrics_data.value.yMax=L.yMax,selectedFile.value.fontSettings.metrics={lsb:L.lsb,advanceWidth:L.advanceWidth,useDefaultValues:!0},ElMessage({type:"success",message:n("panels.paramsPanel.resetMetricsTransform")})},$=()=>{const{unitsPerEm:L,descender:z}=selectedFile.value.fontSettings,{metrics:j}=editCharacterFile.value.info;let{advanceWidth:ae,lsb:re,useDefaultValues:oe}=j||{advanceWidth:L,lsb:0,useDefaultValues:!0};j||(oe=!0,ae=L,re=0),oe&&(ae=L);const ue=componentsToContours(orderedListWithItemsForCharacterFile(editCharacterFile.value),{unitsPerEm:L,descender:z,advanceWidth:L},{x:0,y:0},!1,!1,!0),le=[],de=[];for(let _e=0;_e<ue.length;_e+=1)for(let Ce=0;Ce<ue[_e].length;Ce++){const Ne=ue[_e][Ce];le.push(Ne.start.x),de.push(Ne.start.y),le.push(Ne.end.x),de.push(Ne.end.y),Ne.type===PathType.QUADRATIC_BEZIER?(le.push(Ne.control.x),de.push(Ne.control.y)):Ne.type===PathType.CUBIC_BEZIER&&(le.push(Ne.control1.x),de.push(Ne.control1.y),le.push(Ne.control2.x),de.push(Ne.control2.y))}const he={xMin:Math.min.apply(null,le),yMin:Math.min.apply(null,de),xMax:Math.max.apply(null,le),yMax:Math.max.apply(null,de)};return isFinite(he.xMin)||(he.xMin=0),isFinite(he.xMax)||(he.xMax=L||0),isFinite(he.yMin)||(he.yMin=0),isFinite(he.yMax)||(he.yMax=0),he.advanceWidth=ae,he.lsb=oe?he.xMin:re,he.rsb=ae-(he.lsb+he.xMax-he.xMin),he};onMounted(()=>{const L=$();metrics_data.value.lsb=L.lsb,metrics_data.value.advanceWidth=L.advanceWidth,metrics_data.value.rsb=L.rsb,metrics_data.value.xMin=L.xMin,metrics_data.value.xMax=L.xMax,metrics_data.value.yMin=L.yMin,metrics_data.value.yMax=L.yMax});const V=()=>{metrics_data.value.rsb=metrics_data.value.advanceWidth-(metrics_data.value.lsb+metrics_data.value.xMax-metrics_data.value.xMin)};return(L,z)=>{const j=resolveComponent("el-input-number"),ae=resolveComponent("el-form-item"),re=resolveComponent("el-form"),oe=resolveComponent("el-button");return openBlock(),createElementBlock("div",_hoisted_1$Q,[createVNode(re,{class:"transfom-form","label-width":"120px"},{default:withCtx(()=>[createVNode(ae,{label:"advanceWidth"},{default:withCtx(()=>[createVNode(j,{modelValue:unref(metrics_data).advanceWidth,"onUpdate:modelValue":z[0]||(z[0]=ue=>unref(metrics_data).advanceWidth=ue),controls:!1,onChange:V,precision:0},null,8,["modelValue"])]),_:1}),createVNode(ae,{label:"lsb"},{default:withCtx(()=>[createVNode(j,{modelValue:unref(metrics_data).lsb,"onUpdate:modelValue":z[1]||(z[1]=ue=>unref(metrics_data).lsb=ue),controls:!1,onChange:V,precision:0},null,8,["modelValue"])]),_:1}),createVNode(ae,{label:"rsb"},{default:withCtx(()=>[createVNode(j,{modelValue:unref(metrics_data).rsb,"onUpdate:modelValue":z[2]||(z[2]=ue=>unref(metrics_data).rsb=ue),controls:!1,precision:0,disabled:""},null,8,["modelValue"])]),_:1}),createVNode(ae,{label:"xMin"},{default:withCtx(()=>[createVNode(j,{modelValue:unref(metrics_data).xMin,"onUpdate:modelValue":z[3]||(z[3]=ue=>unref(metrics_data).xMin=ue),controls:!1,precision:0,disabled:""},null,8,["modelValue"])]),_:1}),createVNode(ae,{label:"xMax"},{default:withCtx(()=>[createVNode(j,{modelValue:unref(metrics_data).xMax,"onUpdate:modelValue":z[4]||(z[4]=ue=>unref(metrics_data).xMax=ue),controls:!1,precision:0,disabled:""},null,8,["modelValue"])]),_:1}),createVNode(ae,{label:"yMin"},{default:withCtx(()=>[createVNode(j,{modelValue:unref(metrics_data).yMin,"onUpdate:modelValue":z[5]||(z[5]=ue=>unref(metrics_data).yMin=ue),controls:!1,precision:0,disabled:""},null,8,["modelValue"])]),_:1}),createVNode(ae,{label:"yMax"},{default:withCtx(()=>[createVNode(j,{modelValue:unref(metrics_data).yMax,"onUpdate:modelValue":z[6]||(z[6]=ue=>unref(metrics_data).yMax=ue),controls:!1,precision:0,disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),createBaseVNode("div",_hoisted_2$O,[createVNode(oe,{class:"metrics-confirm-btn",onPointerdown:y,type:"primary"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.applyMetricsTransform")),1)]),_:1}),createVNode(oe,{class:"metrics-reset-btn",onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.paramsPanel.resetMetricsTransform")),1)]),_:1})])])}}}),MetricsEditPanel=_export_sfc(_sfc_main$R,[["__scopeId","data-v-2808429c"]]),_hoisted_1$P={key:0,class:"right-panel"},_hoisted_2$N={key:1,class:"right-panel"},_sfc_main$Q=defineComponent({__name:"RightPanel",setup(e){return(n,r)=>unref(editStatus)!==unref(Status).Glyph?(openBlock(),createElementBlock("div",_hoisted_1$P,[unref(editStatus)===unref(Status).Edit&&unref(tool)==="grid"?(openBlock(),createBlock(LayoutEditPanel,{key:0})):unref(editStatus)===unref(Status).Edit&&unref(tool)==="metrics"?(openBlock(),createBlock(MetricsEditPanel,{key:1})):!unref(selectedComponentUUID)&&unref(editStatus)===unref(Status).Edit?(openBlock(),createBlock(SettingsPanel,{key:2})):unref(selectedComponentUUID)&&unref(selectedComponent).type==="pen"?(openBlock(),createBlock(PenEditPanel,{key:3})):unref(selectedComponentUUID)&&unref(selectedComponent).type==="ellipse"?(openBlock(),createBlock(EllipseEditPanel,{key:4})):unref(selectedComponentUUID)&&unref(selectedComponent).type==="rectangle"?(openBlock(),createBlock(RectangleEditPanel,{key:5})):unref(selectedComponentUUID)&&unref(selectedComponent).type==="polygon"?(openBlock(),createBlock(PolygonEditPanel,{key:6})):unref(selectedComponentUUID)&&unref(selectedComponent).type==="picture"?(openBlock(),createBlock(PictureEditPanel,{key:7})):unref(tool)!=="grid"&&unref(editStatus)===unref(Status).Edit&&unref(selectedComponentUUID)&&unref(selectedComponent).type==="glyph"?(openBlock(),createBlock(GlyphEditPanel$1,{key:8})):unref(editStatus)===unref(Status).Pic?(openBlock(),createBlock(FontPicEditPanel,{key:9})):createCommentVNode("",!0)])):(openBlock(),createElementBlock("div",_hoisted_2$N,[unref(tool)==="params"?(openBlock(),createBlock(GlyphParamsPanel,{key:0})):unref(selectedComponentUUID$1)&&unref(selectedComponent$1).type==="pen"?(openBlock(),createBlock(PenEditPanel,{key:1})):unref(selectedComponentUUID$1)&&unref(selectedComponent$1).type==="ellipse"?(openBlock(),createBlock(EllipseEditPanel,{key:2})):unref(selectedComponentUUID$1)&&unref(selectedComponent$1).type==="rectangle"?(openBlock(),createBlock(RectangleEditPanel,{key:3})):unref(selectedComponentUUID$1)&&unref(selectedComponent$1).type==="polygon"?(openBlock(),createBlock(PolygonEditPanel,{key:4})):unref(tool)!=="params"&&unref(editStatus)===unref(Status).Glyph&&unref(selectedComponentUUID$1)&&unref(selectedComponent$1).type==="glyph"?(openBlock(),createBlock(GlyphEditPanelGlyph,{key:5})):createCommentVNode("",!0)]))}}),RightPanel=_export_sfc(_sfc_main$Q,[["__scopeId","data-v-c8a270d6"]]),_hoisted_1$O=["onPointerdown"],_hoisted_2$M={class:"file-name"},_hoisted_3$r=["onPointerdown"],_hoisted_4$o={key:0,class:"right-btns",style:{"margin-left":"auto"}},_hoisted_5$j={class:"info-list"},_hoisted_6$g={class:"info-item"},_hoisted_7$d={class:"info-item-name"},_hoisted_8$d={class:"info-item-content"},_hoisted_9$d={class:"info-item"},_hoisted_10$d={class:"info-item-name"},_hoisted_11$c={class:"info-item-content"},_hoisted_12$c={class:"info-item"},_hoisted_13$a={class:"info-item-name"},_hoisted_14$a={class:"info-item-content"},_hoisted_15$7={class:"info-item"},_hoisted_16$7={class:"info-item-name"},_hoisted_17$5={class:"info-item-content"},_hoisted_18$4={class:"info-item"},_hoisted_19$4={class:"info-item-name"},_hoisted_20$4={class:"info-item-content"},_hoisted_21$4={class:"language-settings"},_hoisted_22$4={class:normalizeClass({"file-tag":!0,selected:!0})},_hoisted_23$4={class:"file-info-wrapper"},_hoisted_24$4={class:"file-name"},_hoisted_25$3={class:normalizeClass({"file-tag":!0,selected:!0})},_hoisted_26$3={class:"file-info-wrapper"},_hoisted_27$3={class:"file-name"},_sfc_main$P=defineComponent({__name:"FilesBar",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=$=>{setCloseFileTipDialogVisible(!0)},k=$=>{setSelectedFileUUID($)};return($,V)=>{const L=resolveComponent("el-icon"),z=resolveComponent("el-button"),j=resolveComponent("el-popover"),ae=resolveComponent("el-row");return openBlock(),createElementBlock("div",{class:"files-bar",style:normalizeStyle({"border-bottom":unref(editStatus)===unref(Status).CharacterList||unref(editStatus)===unref(Status).GlyphList||unref(editStatus)===unref(Status).StrokeGlyphList||unref(editStatus)===unref(Status).RadicalGlyphList||unref(editStatus)===unref(Status).CompGlyphList?"none":"1px solid var(--dark-4)"})},[unref(editStatus)===unref(Status).CharacterList||unref(editStatus)===unref(Status).GlyphList||unref(editStatus)===unref(Status).StrokeGlyphList||unref(editStatus)===unref(Status).RadicalGlyphList||unref(editStatus)===unref(Status).CompGlyphList?(openBlock(),createBlock(ae,{key:0,class:"files-bar-row row-1"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(files).value,re=>(openBlock(),createElementBlock("span",{class:normalizeClass({"file-tag":!0,selected:re.uuid===unref(selectedFileUUID)})},[createBaseVNode("span",{class:"file-info-wrapper",onPointerdown:()=>k(re.uuid)},[createBaseVNode("span",_hoisted_2$M,toDisplayString$1(re.name),1)],40,_hoisted_1$O),createBaseVNode("span",{class:"close-btn",onPointerdown:()=>y(re.uuid)},[createVNode(L,null,{default:withCtx(()=>[createVNode(unref(close_default))]),_:1})],40,_hoisted_3$r)],2))),256)),withDirectives(createBaseVNode("span",{class:"advanced-edit-btn",onPointerdown:V[0]||(V[0]=()=>unref(setEditStatus)(unref(Status).AdvancedEdit))},[createVNode(z,{type:"primary",size:"small"},{default:withCtx(()=>[createVNode(L,null,{default:withCtx(()=>[createVNode(unref(tools_default))]),_:1}),createTextVNode("  ")]),_:1})],544),[[vShow,unref(files).value.length>0]]),unref(selectedFile)?(openBlock(),createElementBlock("div",_hoisted_4$o,[createVNode(L,{class:"right-btn"},{default:withCtx(()=>[createVNode(unref(search_default))]),_:1}),createVNode(j,{placement:"bottom-end",width:120,trigger:"hover","popper-class":"info-popover"},{reference:withCtx(()=>[createVNode(L,{class:"right-btn"},{default:withCtx(()=>[createVNode(unref(info_filled_default))]),_:1})]),default:withCtx(()=>[createBaseVNode("div",_hoisted_5$j,[createBaseVNode("div",_hoisted_6$g,[createBaseVNode("span",_hoisted_7$d,toDisplayString$1(unref(r)("programming.charCounts")),1),createBaseVNode("span",_hoisted_8$d,toDisplayString$1(unref(selectedFile).characterList.length),1)]),createBaseVNode("div",_hoisted_9$d,[createBaseVNode("span",_hoisted_10$d,toDisplayString$1(unref(r)("programming.strokeCounts")),1),createBaseVNode("span",_hoisted_11$c,toDisplayString$1(unref(stroke_glyphs).length),1)]),createBaseVNode("div",_hoisted_12$c,[createBaseVNode("span",_hoisted_13$a,toDisplayString$1(unref(r)("programming.radicalCounts")),1),createBaseVNode("span",_hoisted_14$a,toDisplayString$1(unref(radical_glyphs).length),1)]),createBaseVNode("div",_hoisted_15$7,[createBaseVNode("span",_hoisted_16$7,toDisplayString$1(unref(r)("programming.compCounts")),1),createBaseVNode("span",_hoisted_17$5,toDisplayString$1(unref(comp_glyphs).length),1)]),createBaseVNode("div",_hoisted_18$4,[createBaseVNode("span",_hoisted_19$4,toDisplayString$1(unref(r)("programming.glyphCompCounts")),1),createBaseVNode("span",_hoisted_20$4,toDisplayString$1(unref(glyphs).length),1)])])]),_:1}),createVNode(L,{class:"right-btn",onPointerdown:V[1]||(V[1]=re=>unref(setFontSettingsDialogVisible)(!0))},{default:withCtx(()=>[createVNode(unref(tools_default))]),_:1}),createBaseVNode("div",_hoisted_21$4,[createBaseVNode("div",{class:normalizeClass(["language-choice-item",{selected:unref(g)==="zh"}]),onClick:V[2]||(V[2]=re=>g.value="zh")},"",2),createBaseVNode("div",{class:normalizeClass(["language-choice-item",{selected:unref(g)==="en"}]),onClick:V[3]||(V[3]=re=>g.value="en")},"English",2)])])):createCommentVNode("",!0)]),_:1})):unref(editStatus)===unref(Status).Edit?(openBlock(),createBlock(ae,{key:1,class:"files-bar-row"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_22$4,[createBaseVNode("span",_hoisted_23$4,[createBaseVNode("span",_hoisted_24$4,toDisplayString$1(unref(editCharacterFile)?.character.text),1)])])]),_:1})):unref(editStatus)===unref(Status).Glyph?(openBlock(),createBlock(ae,{key:2,class:"files-bar-row"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_25$3,[createBaseVNode("span",_hoisted_26$3,[createBaseVNode("span",_hoisted_27$3,toDisplayString$1(unref(editGlyph).name),1)])])]),_:1})):createCommentVNode("",!0)],4)}}}),FilesBar=_export_sfc(_sfc_main$P,[["__scopeId","data-v-ce7b9d19"]]),_hoisted_1$N={class:"bottom-bar"},_hoisted_2$L={class:"tools-wrapper"},_hoisted_3$q={class:"translate-wrapper"},_hoisted_4$n={class:"coords-wrapper"},_hoisted_5$i={class:"zoom-settings-wrapper"},_hoisted_6$f={class:"zoom-settings-wrapper"},zoomScale$1=10,_sfc_main$O=defineComponent({__name:"BottomBar",setup(e){const{t:n}=useI18n(),r=ref("");watch([editCharacterFile],()=>{editCharacterFile.value&&(r.value=`${editCharacterFile.value.view.translateX},${editCharacterFile.value.view.translateY}`)},{deep:!0});const g=()=>{editCharacterFile.value&&editCharacterFile.value.view&&(editCharacterFile.value.view.translateX=0,editCharacterFile.value.view.translateY=0)},y=()=>{modifyCharacterFile(editCharacterFileUUID.value,{view:{zoom:editCharacterFile.value.view.zoom-zoomScale$1>=0?editCharacterFile.value.view.zoom-zoomScale$1:0}}),emitter.emit("updateCharacterView")},k=()=>{modifyCharacterFile(editCharacterFileUUID.value,{view:{zoom:editCharacterFile.value.view.zoom+zoomScale$1<=200?editCharacterFile.value.view.zoom+zoomScale$1:200}}),emitter.emit("updateCharacterView")},$=oe=>{const ue=oe<=200?oe>=0?oe:0:200;modifyCharacterFile(editCharacterFileUUID.value,{view:{zoom:ue}}),emitter.emit("updateCharacterView")},V=()=>{const oe=picZoom.value-zoomScale$1>=0?picZoom.value-zoomScale$1:0;setPicZoom(oe)},L=()=>{const oe=picZoom.value+zoomScale$1<=200?picZoom.value+zoomScale$1:200;setPicZoom(oe)},z=()=>{setTool("translateMover")},j=()=>{setTool("select")},ae=()=>{setTool("coordsViewer")},re=()=>{setTool("select")};return(oe,ue)=>{const le=resolveComponent("el-button"),de=resolveComponent("el-input"),he=resolveComponent("font-awesome-icon"),_e=resolveComponent("el-icon"),Ce=resolveComponent("el-row");return openBlock(),createElementBlock("div",_hoisted_1$N,[unref(editStatus)===unref(Status).Edit?(openBlock(),createBlock(Ce,{key:0,class:"bottom-bar-row"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_2$L,[createBaseVNode("span",_hoisted_3$q,[unref(tool)==="translateMover"?(openBlock(),createBlock(de,{key:0,modelValue:r.value,"onUpdate:modelValue":ue[0]||(ue[0]=Ne=>r.value=Ne),class:"translate-text",disabled:!0},{append:withCtx(()=>[createVNode(le,{onPointerdown:g},{default:withCtx(()=>[createTextVNode("")]),_:1})]),_:1},8,["modelValue"])):createCommentVNode("",!0),unref(tool)!=="translateMover"?(openBlock(),createBlock(he,{key:1,class:"translate-btn",onPointerdown:z,icon:"fa-regular fa-hand"})):createCommentVNode("",!0),unref(tool)==="translateMover"?(openBlock(),createBlock(he,{key:2,class:"translate-edit-btn",onPointerdown:j,icon:"fa-solid fa-hand"})):createCommentVNode("",!0)]),createBaseVNode("span",_hoisted_4$n,[unref(tool)==="coordsViewer"?(openBlock(),createBlock(de,{key:0,modelValue:unref(coordsText),"onUpdate:modelValue":ue[1]||(ue[1]=Ne=>isRef(coordsText)?coordsText.value=Ne:null),class:"coords-text",disabled:!0},{prepend:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.bottomBar.coords")),1)]),_:1},8,["modelValue"])):createCommentVNode("",!0),unref(tool)!=="coordsViewer"?(openBlock(),createBlock(he,{key:1,class:"coords-btn",onPointerdown:ae,icon:"fa-solid fa-arrow-pointer"})):unref(tool)==="coordsViewer"?(openBlock(),createBlock(he,{key:2,class:"coords-edit-btn",onPointerdown:re,icon:"fa-solid fa-arrow-pointer"})):createCommentVNode("",!0)]),createBaseVNode("span",_hoisted_5$i,[createBaseVNode("span",{class:"zoom-out",onPointerdown:y},[createVNode(_e,null,{default:withCtx(()=>[createVNode(unref(zoom_out_default))]),_:1})],32),createVNode(de,{class:"zoom-value","model-value":unref(editCharacterFile)&&unref(editCharacterFile).view.zoom,onInput:$},{append:withCtx(()=>[createTextVNode("%")]),_:1},8,["model-value"]),createBaseVNode("span",{class:"zoom-in",onPointerdown:k},[createVNode(_e,null,{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1})],32)])])]),_:1})):createCommentVNode("",!0),unref(editStatus)===unref(Status).Pic?(openBlock(),createBlock(Ce,{key:1,class:"bottom-bar-row"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_6$f,[createBaseVNode("span",{class:"zoom-out",onPointerdown:V},[createVNode(_e,null,{default:withCtx(()=>[createVNode(unref(zoom_out_default))]),_:1})],32),createVNode(de,{class:"zoom-value","model-value":unref(picZoom)},{append:withCtx(()=>[createTextVNode("%")]),_:1},8,["model-value"]),createBaseVNode("span",{class:"zoom-in",onPointerdown:L},[createVNode(_e,null,{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1})],32)])]),_:1})):createCommentVNode("",!0)])}}}),BottomBar=_export_sfc(_sfc_main$O,[["__scopeId","data-v-67784086"]]),_hoisted_1$M={class:"bottom-bar"},_hoisted_2$K={class:"tools-wrapper"},_hoisted_3$p={class:"translate-wrapper"},_hoisted_4$m={class:"coords-wrapper"},_hoisted_5$h={class:"zoom-settings-wrapper"},zoomScale=10,_sfc_main$N=defineComponent({__name:"GlyphBottomBar",setup(e){const{t:n}=useI18n(),r=ref("");watch([editGlyph],()=>{editGlyph.value&&(r.value=`${editGlyph.value.view.translateX},${editGlyph.value.view.translateY}`)},{deep:!0});const g=()=>{editGlyph.value&&editGlyph.value.view&&(editGlyph.value.view.translateX=0,editGlyph.value.view.translateY=0)},y=()=>{modifyGlyph(editGlyphUUID.value,{view:{zoom:editGlyph.value.view.zoom-zoomScale>=0?editGlyph.value.view.zoom-zoomScale:0}}),emitter.emit("updateGlyphView")},k=()=>{modifyGlyph(editGlyphUUID.value,{view:{zoom:editGlyph.value.view.zoom+zoomScale<=200?editGlyph.value.view.zoom+zoomScale:200}}),emitter.emit("updateGlyphView")},$=ae=>{const re=ae<=200?ae>=0?ae:0:200;modifyGlyph(editGlyphUUID.value,{view:{zoom:re}}),emitter.emit("updateGlyphView")},V=()=>{setTool("translateMover")},L=()=>{setTool("select")},z=()=>{setTool("coordsViewer")},j=()=>{setTool("select")};return(ae,re)=>{const oe=resolveComponent("el-button"),ue=resolveComponent("el-input"),le=resolveComponent("font-awesome-icon"),de=resolveComponent("el-icon"),he=resolveComponent("el-row");return openBlock(),createElementBlock("div",_hoisted_1$M,[createVNode(he,{class:"bottom-bar-row"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_2$K,[createBaseVNode("span",_hoisted_3$p,[unref(tool)==="translateMover"?(openBlock(),createBlock(ue,{key:0,modelValue:r.value,"onUpdate:modelValue":re[0]||(re[0]=_e=>r.value=_e),class:"translate-text",disabled:!0},{append:withCtx(()=>[createVNode(oe,{onPointerdown:g},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.bottomBar.reset")),1)]),_:1})]),_:1},8,["modelValue"])):createCommentVNode("",!0),unref(tool)!=="translateMover"?(openBlock(),createBlock(le,{key:1,class:"translate-btn",onPointerdown:V,icon:"fa-regular fa-hand"})):unref(tool)==="translateMover"?(openBlock(),createBlock(le,{key:2,class:"translate-edit-btn",onPointerdown:L,icon:"fa-solid fa-hand"})):createCommentVNode("",!0)]),createBaseVNode("span",_hoisted_4$m,[unref(tool)==="coordsViewer"?(openBlock(),createBlock(ue,{key:0,modelValue:unref(coordsText),"onUpdate:modelValue":re[1]||(re[1]=_e=>isRef(coordsText)?coordsText.value=_e:null),class:"coords-text",disabled:!0},{prepend:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("panels.bottomBar.coords")),1)]),_:1},8,["modelValue"])):createCommentVNode("",!0),unref(tool)!=="coordsViewer"?(openBlock(),createBlock(le,{key:1,class:"coords-btn",onPointerdown:z,icon:"fa-solid fa-arrow-pointer"})):unref(tool)==="coordsViewer"?(openBlock(),createBlock(le,{key:2,class:"coords-edit-btn",onPointerdown:j,icon:"fa-solid fa-arrow-pointer"})):createCommentVNode("",!0)]),createBaseVNode("span",_hoisted_5$h,[createBaseVNode("span",{class:"zoom-out",onPointerdown:y},[createVNode(de,null,{default:withCtx(()=>[createVNode(unref(zoom_out_default))]),_:1})],32),createVNode(ue,{class:"zoom-value","model-value":unref(editGlyph)&&unref(editGlyph).view.zoom,onInput:$},{append:withCtx(()=>[createTextVNode("%")]),_:1},8,["model-value"]),createBaseVNode("span",{class:"zoom-in",onPointerdown:k},[createVNode(de,null,{default:withCtx(()=>[createVNode(unref(zoom_in_default))]),_:1})],32)])])]),_:1})])}}}),GlyphBottomBar=_export_sfc(_sfc_main$N,[["__scopeId","data-v-5a1a5f85"]]),_hoisted_1$L={class:"characters-list-wrapper"},_hoisted_2$J=createBaseVNode("main",{class:"list",id:"character-render-list"},null,-1),maxCacheSize=1e3,_sfc_main$M=defineComponent({__name:"CharacterList",setup(e){const n=new Map,r=ref(),g=new Map,y=[];let k=!1;const $=new Map,V=()=>{if(g.size>maxCacheSize){const qe=Array.from(g.keys());qe.slice(0,qe.length-maxCacheSize).forEach(_n=>g.delete(_n))}},L=qe=>{if($.has(qe))return $.get(qe);const Et=document.getElementById(`preview-canvas-${qe}`);return Et&&$.set(qe,Et),Et},z=()=>{const qe=new Set,Et=selectedFile.value?.characterList||[];for(let _n=visibleStartIndex.value;_n<Math.min(visibleEndIndex.value,Et.length);_n++)qe.add(Et[_n].uuid);for(const[_n,Dt]of $.entries())qe.has(_n)||$.delete(_n)},j=()=>{const qe=selectedFile.value?selectedFile.value.characterList:[];qe.length&&("requestIdleCallback"in window?requestIdleCallback(()=>{ae(qe)},{timeout:1e3}):setTimeout(()=>{ae(qe)},0))},ae=qe=>{if(selectedFile.value.fontSettings,le){setTimeout(()=>{ae(qe)},50);return}if(visibleStartIndex.value>=qe.length){const Et=r.value?.closest(".el-scrollbar")?.querySelector(".el-scrollbar__wrap");if(Et){const _n=Et.clientHeight,Dt=Et.clientWidth,Sn=96,hn=itemHeight+10,Vn=Math.ceil(Dt/Sn),Mn=Math.max(1,Vn-1);if(Mn>0){const $n=Math.ceil(_n/hn),Nn=Math.max(0,qe.length-($n+5)*Mn);visibleStartIndex.value=Nn,visibleEndIndex.value=qe.length}}}y.length=0;for(let Et=visibleStartIndex.value;Et<Math.min(visibleEndIndex.value,qe.length);Et++){const _n=qe[Et],Dt=`${_n.uuid}_${_n._o?"rendered":"pending"}`;g.has(Dt)||y.includes(_n.uuid)||y.push(_n.uuid)}y.length>0&&(k?setTimeout(()=>{y.length>0&&!k&&re()},100):re())},re=async()=>{if(!k){if(y.length===0){k=!1;return}k=!0;try{const qe=selectedFile.value?selectedFile.value.characterList:[],{unitsPerEm:Et,descender:_n}=selectedFile.value.fontSettings;let Dt=0,Sn=0;const hn=10,Vn=Date.now(),Mn=5e3;for(;y.length>0&&Sn<hn&&(addLoaded(),!(Date.now()-Vn>Mn));){const $n=y.shift(),Nn=qe.find(Fn=>Fn.uuid===$n),kn=qe.findIndex(Fn=>Fn.uuid===$n);if(!Nn)continue;const jn=L($n);if(!jn){Sn++;continue}try{if(Nn._o||executeCharacterScript(Nn),!Nn.orderedList||!Nn.orderedList.length){g.set(`${$n}_pending`,!0);continue}const Fn=componentsToContours(orderedListWithItemsForCharacterFile(Nn),{unitsPerEm:Et,descender:_n,advanceWidth:Et},{x:0,y:0},!1,!0);renderPreview2(jn,Fn),g.set(`${$n}_rendered`,!0),Dt++,loading$1.value&&(loaded$1.value+=1,loaded$1.value>=total$1.value&&(loading$1.value=!1))}catch(Fn){console.error(`Error rendering character ${$n}:`,Fn),Sn++}Dt%5===0&&await new Promise(Fn=>requestAnimationFrame(Fn))}V(),z()}catch{}finally{k=!1}}};let oe=null,ue=0,le=!1,de=null,he=null;const _e=()=>{const qe=r.value?.closest(".el-scrollbar")?.querySelector(".el-scrollbar__wrap");if(!qe)return;const Et=qe.scrollTop;Math.abs(Et-ue)>5&&(ue=Et,Ce(qe))},Ce=qe=>{const Et=qe.scrollTop,_n=qe.clientHeight,Dt=qe.clientWidth,Sn=96,hn=itemHeight+10,Vn=Math.ceil(Dt/Sn),Mn=Math.max(1,Vn-1);if(Mn<=0)return;const $n=Math.ceil(_n/hn);(()=>{const ga=document.getElementById("character-render-list");if(ga){const Ca=ga.querySelector(".character");if(Ca){const ra=Ca.getBoundingClientRect(),Gn=ga.getBoundingClientRect();ra.top-Gn.top}}})();const kn=selectedFile.value?.characterList?.length||0;(()=>{const ga=Math.floor(Et/hn)*Mn;ga<kn&&selectedFile.value?.characterList[ga]})();const Tn=Math.ceil(kn/Mn)*hn,la=Et/(Tn-_n)>=.9,ca=Math.floor(Et/hn)*Mn,Zn=$n*Mn,Bn=Math.max(visibleCount.value/2,Math.ceil(Zn*.5)),Wn=Math.max(0,ca-Bn),da=Math.min(ca+Zn+Bn,kn);if(la){const ga=Math.min($n*Mn*3,kn),Ca=Math.max(0,kn-ga),ra=Math.min(Ca,Wn),Gn=Math.max(kn,da);visibleStartIndex.value=ra,visibleEndIndex.value=Gn}else visibleStartIndex.value=Wn,visibleEndIndex.value=da;Ie()},Ne=()=>{le=!0,de&&clearTimeout(de),oe&&clearTimeout(oe),oe=window.setTimeout(()=>{const qe=r.value?.closest(".el-scrollbar")?.querySelector(".el-scrollbar__wrap");if(!qe)return;const Et=qe.scrollTop;Math.abs(Et-ue)<itemHeight/2||(Ce(qe),ue=Et)},50),de=window.setTimeout(()=>{le=!1;const qe=r.value?.closest(".el-scrollbar")?.querySelector(".el-scrollbar__wrap");qe&&Ce(qe),j(),setTimeout(()=>{Ie()},50)},200)},$e=()=>{g.clear(),y.length=0,k=!1,$.clear()},xe=()=>{$e(),j()},Ie=()=>{const qe=selectedFile.value?.characterList||[];if(qe.length){y.length=0,g.size,g.clear();for(let Et=visibleStartIndex.value;Et<Math.min(visibleEndIndex.value,qe.length);Et++){const _n=qe[Et];y.push(_n.uuid)}if(y.length>0)if(!k)re();else{const Et=()=>{!k&&y.length>0?re():k&&requestAnimationFrame(Et)};requestAnimationFrame(Et)}}};typeof window<"u"&&(window.forceRefreshVisibleCharacters=Ie,window.checkVisibleCharacters=()=>{const qe=selectedFile.value?.characterList||[],Et=document.getElementById("character-render-list");if(Et){const _n=Et.querySelector(".character");_n&&_n.getBoundingClientRect()}for(let _n=visibleStartIndex.value;_n<Math.min(visibleEndIndex.value,qe.length);_n++)qe[_n]},window.testBottomArea=()=>{const qe=selectedFile.value?.characterList||[];if(qe.length>0){const Et=Math.max(0,qe.length-200);visibleStartIndex.value=Et,visibleEndIndex.value=qe.length,Ie()}},window.checkDOMCharacters=()=>{const qe=selectedFile.value?.characterList||[];for(let Et=Math.max(0,qe.length-10);Et<qe.length;Et++){const _n=qe[Et];document.getElementById(`preview-canvas-${_n.uuid}`),document.querySelector(`.character-${_n.uuid}`)}for(let Et=visibleStartIndex.value;Et<Math.min(visibleEndIndex.value,qe.length);Et++){const _n=qe[Et];document.getElementById(`preview-canvas-${_n.uuid}`),document.querySelector(`.character-${_n.uuid}`);const Dt=`${_n.uuid}_rendered`;g.has(Dt)}},window.debugBottomScrollInfo=()=>{const qe=selectedFile.value?.characterList||[],Et=r.value?.closest(".el-scrollbar")?.querySelector(".el-scrollbar__wrap");if(Et){const _n=Et.scrollTop,Dt=Et.clientHeight,Sn=Et.clientWidth,hn=96,Vn=itemHeight+10,Mn=Math.ceil(Sn/hn),$n=Math.max(1,Mn-1),Nn=Math.floor(_n/Vn),kn=Math.ceil(Dt/Vn);Math.min((Nn+kn+5)*$n,qe.length);const Fn=Math.ceil(qe.length/$n)*Vn-Dt;_n>=Fn-50&&Math.max(0,qe.length-(kn+5)*$n)}},window.forceProcessRenderQueue=()=>{k=!1,y.length>0&&re()},window.forceResetAndRender=()=>{k=!1,y.length=0,g.clear(),$.clear();const qe=r.value?.closest(".el-scrollbar")?.querySelector(".el-scrollbar__wrap");qe&&(Ce(qe),Ie())},window.checkCanvasElements=()=>{const qe=selectedFile.value?.characterList||[];for(let Et=visibleStartIndex.value;Et<Math.min(visibleEndIndex.value,qe.length);Et++){const _n=qe[Et];document.getElementById(`preview-canvas-${_n.uuid}`),document.querySelector(`.character-${_n.uuid}`)}});const ze=(qe,Et=!1)=>{let _n;const{unitsPerEm:Dt,descender:Sn}=selectedFile.value.fontSettings,hn=selectedFile.value?selectedFile.value.characterList:[];if(Et)_n=editCharacterFile.value;else for(let kn=0;kn<hn.length;kn++)if(hn[kn].uuid===qe){_n=hn[kn];break}if(!_n)return;executeCharacterScript(_n),_n?.components?.map(kn=>{kn.type==="glyph"&&executeScript(kn.value)});const Mn=document.getElementById("character-render-list").querySelector(`#preview-canvas-${_n.uuid}`);if(!Mn)return;let $n=!0;_n&&_n.info&&_n.info.gridSettings&&($n=_n.info.gridSettings.default);const Nn=componentsToContours(orderedListWithItemsForCharacterFile(_n),{unitsPerEm:Dt,descender:Sn,advanceWidth:Dt,grid:$n?null:_n.info.gridSettings,useSkeletonGrid:_n.info?.useSkeletonGrid||!1},{x:0,y:0},!1,!0,!0);renderPreview2(Mn,Nn)};return onMounted(async()=>{if(await nextTick(),r.value=document.getElementById("character-render-list"),r.value){const qe=r.value.closest(".el-scrollbar")?.querySelector(".el-scrollbar__wrap");qe?qe.addEventListener("scroll",Ne,{passive:!0}):r.value.addEventListener("scroll",Ne,{passive:!0})}he=window.setInterval(_e,100),emitter.on("renderPreviewCanvas",async()=>{await nextTick(),xe()}),emitter.on("renderPreviewCanvasByUUID",async qe=>{n.get(qe)&&(clearTimeout(n.get(qe)),n.set(qe,null));const _n=setTimeout(()=>{ze(qe)},1e3);n.set(qe,_n)}),emitter.on("renderPreviewCanvasByUUIDOnEditing",async qe=>{n.get(qe)&&(clearTimeout(n.get(qe)),n.set(qe,null));const _n=setTimeout(()=>{ze(qe,!0)},100);n.set(qe,_n)}),emitter.on("updateCharacterInfoPreviewCanvasByUUID",async qe=>{let Et;const _n=selectedFile.value?selectedFile.value.characterList:[];for(let hn=0;hn<_n.length&&(Et=_n[hn],Et.uuid!==qe);hn++);const Sn=document.getElementById("character-render-list").querySelector(`.character-${qe}`);Sn.querySelector(".info").querySelector(".text").innerHTML=`${Et.character.text}`,Et.type==="text"&&(Sn.querySelector(".unicode").innerHTML=`0x${Et.character.unicode.toString(16)}`)}),clearCharacterRenderList(),characterList.value?.map(qe=>{addCharacterTemplate(generateCharacterTemplate(qe))}),await nextTick(),xe()}),onUnmounted(()=>{if(r.value){const qe=r.value.closest(".el-scrollbar")?.querySelector(".el-scrollbar__wrap");qe?qe.removeEventListener("scroll",Ne):r.value.removeEventListener("scroll",Ne)}oe&&clearTimeout(oe),de&&clearTimeout(de),he&&clearInterval(he),$e(),emitter.off("updateCharacterInfoPreviewCanvasByUUID"),emitter.off("renderPreviewCanvasByUUID"),emitter.off("renderPreviewCanvas"),emitter.off("renderPreviewCanvasByUUIDOnEditing")}),(qe,Et)=>{const _n=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("section",_hoisted_1$L,[createVNode(_n,null,{default:withCtx(()=>[_hoisted_2$J]),_:1})])}}}),_hoisted_1$K={class:"glyph-list-wrapper"},_hoisted_2$I=createBaseVNode("main",{class:"list",id:"glyph-render-list"},null,-1),_sfc_main$L=defineComponent({__name:"GlyphList",setup(e){const n=new Map,r=()=>{let y=0;const k=()=>{if(y>=glyphs.value.length)return;const $=glyphs.value[y];executeScript($);const V=document.getElementById(`preview-canvas-${$.uuid}`);if(!V)return;const L=componentsToContours($._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(V,L),loading$1.value&&(loaded$1.value+=1,loaded$1.value>=total$1.value&&(loading$1.value=!1)),y++,y<glyphs.value.length&&requestAnimationFrame(k)};requestAnimationFrame(k)},g=(y,k=!1)=>{let $;if(k)$=editGlyph.value;else for(let j=0;j<glyphs.value.length&&($=glyphs.value[j],$.uuid!==y);j++);if(!$)return;executeScript($),$?.components?.map(j=>{j.type==="glyph"&&executeScript(j.value)});const L=document.getElementById("glyph-render-list").querySelector(`#preview-canvas-${$.uuid}`);if(!L)return;const z=componentsToContours($._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(L,z)};return onMounted(async()=>{emitter.on("renderGlyphPreviewCanvas",async()=>{await nextTick(),r(),emitter.emit("renderGlyphSelection")}),emitter.on("renderGlyphPreviewCanvasByUUID",async y=>{const k=getGlyphType(y);if(k===Status.GlyphList){n.get(y)&&(clearTimeout(n.get(y)),n.set(y,null));const $=setTimeout(async()=>{await nextTick(),g(y),emitter.emit("renderGlyphSelectionByUUID",y)},100);n.set(y,$)}else k===Status.StrokeGlyphList?emitter.emit("renderStrokeGlyphPreviewCanvasByUUID",y):k===Status.RadicalGlyphList?emitter.emit("renderRadicalGlyphPreviewCanvasByUUID",y):k===Status.CompGlyphList&&emitter.emit("renderCompGlyphPreviewCanvasByUUID",y)}),emitter.on("renderGlyphPreviewCanvasByUUIDOnEditing",async y=>{const k=getGlyphType(y);if(k===Status.GlyphList){n.get(y)&&(clearTimeout(n.get(y)),n.set(y,null));const $=setTimeout(async()=>{await nextTick(),g(y,!0)},1e3);n.set(y,$),emitter.emit("renderGlyphSelectionByUUIDOnEditing",y)}else k===Status.StrokeGlyphList?(emitter.emit("renderStrokeGlyphPreviewCanvasByUUIDOnEditing",y),emitter.emit("renderStrokeGlyphSelectionByUUIDOnEditing",y)):k===Status.RadicalGlyphList?(emitter.emit("renderRadicalGlyphPreviewCanvasByUUIDOnEditing",y),emitter.emit("renderRadicalGlyphSelectionByUUIDOnEditing",y)):k===Status.CompGlyphList&&(emitter.emit("renderCompGlyphPreviewCanvasByUUIDOnEditing",y),emitter.emit("renderCompGlyphSelectionByUUIDOnEditing",y))}),emitter.on("updateGlyphInfoPreviewCanvasByUUID",async y=>{const k=getGlyphType(y),$=getGlyphByUUID(y);if(k===Status.GlyphList){const L=document.getElementById("glyph-render-list").querySelector(`.glyph-${y}`);L.querySelector(".name").innerHTML=`${$.name}`;const j=document.getElementById("glyph-components-wrapper").querySelector(`.glyph-${y}`);j.querySelector(".name").innerHTML=`${$.name}`}else if(k===Status.StrokeGlyphList){const L=document.getElementById("stroke-glyph-render-list").querySelector(`.glyph-${y}`);L.querySelector(".name").innerHTML=`${$.name}`;const j=document.getElementById("stroke-glyph-components-wrapper").querySelector(`.glyph-${y}`);j.querySelector(".name").innerHTML=`${$.name}`}else if(k===Status.RadicalGlyphList){const L=document.getElementById("radical-glyph-render-list").querySelector(`.glyph-${y}`);L.querySelector(".name").innerHTML=`${$.name}`;const j=document.getElementById("radical-glyph-components-wrapper").querySelector(`.glyph-${y}`);j.querySelector(".name").innerHTML=`${$.name}`}else if(k===Status.CompGlyphList){const L=document.getElementById("comp-glyph-render-list").querySelector(`.glyph-${y}`);L.querySelector(".name").innerHTML=`${$.name}`;const j=document.getElementById("comp-glyph-components-wrapper").querySelector(`.glyph-${y}`);j.querySelector(".name").innerHTML=`${$.name}`}}),!glyphComponentsDialogVisible.value&&setGlyphComponentsDialogVisible(!0),await nextTick(),clearGlyphRenderList(Status.GlyphList),glyphs.value.map(y=>{addGlyphTemplate(y,Status.GlyphList)}),await nextTick(),r(),emitter.emit("renderGlyphSelection"),emitter.emit("renderStrokeGlyphSelection"),emitter.emit("renderRadicalGlyphSelection"),emitter.emit("renderCompGlyphSelection")}),onUnmounted(()=>{emitter.off("renderGlyphPreviewCanvas"),emitter.off("renderGlyphPreviewCanvasByUUID"),emitter.off("updateGlyphInfoPreviewCanvasByUUID"),emitter.off("renderGlyphPreviewCanvasByUUIDOnEditing")}),(y,k)=>{const $=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("section",_hoisted_1$K,[createVNode($,null,{default:withCtx(()=>[_hoisted_2$I]),_:1})])}}}),_hoisted_1$J={class:"stroke-glyph-list-wrapper"},_hoisted_2$H=createBaseVNode("main",{class:"list",id:"stroke-glyph-render-list"},null,-1),_sfc_main$K=defineComponent({__name:"StrokeGlyphList",setup(e){const n=new Map,r=()=>{let y=0;const k=()=>{if(y>=stroke_glyphs.value.length)return;const $=stroke_glyphs.value[y];$._o||executeScript($);const V=document.getElementById("stroke-glyph-render-list");if(!V)return;const L=V.querySelector(`#preview-canvas-${$.uuid}`);if(!L)return;const z=componentsToContours($._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(L,z),loading$1.value&&(loaded$1.value+=1,loaded$1.value>=total$1.value&&(loading$1.value=!1)),y++,y<stroke_glyphs.value.length&&requestAnimationFrame(k)};requestAnimationFrame(k)},g=(y,k=!1)=>{let $;if(k)$=editGlyph.value;else for(let j=0;j<stroke_glyphs.value.length&&($=stroke_glyphs.value[j],$.uuid!==y);j++);if(!$)return;executeScript($),$?.components?.map(j=>{j.type==="glyph"&&executeScript(j.value)});const V=document.getElementById("stroke-glyph-render-list");if(!V)return;const L=V.querySelector(`#preview-canvas-${$.uuid}`);if(!L)return;const z=componentsToContours($._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(L,z)};return onMounted(async()=>{emitter.on("renderStrokeGlyphPreviewCanvas",async()=>{await nextTick(),r(),emitter.emit("renderStrokeGlyphSelection")}),emitter.on("renderStrokeGlyphPreviewCanvasByUUID",async y=>{n.get(y)&&(clearTimeout(n.get(y)),n.set(y,null));const k=setTimeout(async()=>{await nextTick(),g(y),emitter.emit("renderStrokeGlyphSelectionByUUID",y)},100);n.set(y,k)}),emitter.on("renderStrokeGlyphPreviewCanvasByUUIDOnEditing",async y=>{n.get(y)&&(clearTimeout(n.get(y)),n.set(y,null));const $=setTimeout(()=>{g(y,!0)},100);n.set(y,$)}),!glyphComponentsDialogVisible.value&&setGlyphComponentsDialogVisible(!0),await nextTick(),clearGlyphRenderList(Status.StrokeGlyphList),stroke_glyphs.value.map(y=>{addGlyphTemplate(y,Status.StrokeGlyphList)}),await nextTick(),r()}),onUnmounted(()=>{emitter.off("renderStrokeGlyphPreviewCanvas"),emitter.off("renderStrokeGlyphPreviewCanvasByUUID"),emitter.off("renderStrokeGlyphPreviewCanvasByUUIDOnEditing")}),(y,k)=>{const $=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("section",_hoisted_1$J,[createVNode($,null,{default:withCtx(()=>[_hoisted_2$H]),_:1})])}}}),_hoisted_1$I={class:"radical-glyph-list-wrapper"},_hoisted_2$G=createBaseVNode("main",{class:"list",id:"radical-glyph-render-list"},null,-1),_sfc_main$J=defineComponent({__name:"RadicalGlyphList",setup(e){const n=new Map,r=()=>{console.time("timer2");let y=0;const k=()=>{if(y>=radical_glyphs.value.length)return;const $=radical_glyphs.value[y];$._o||(executeScript($),$?.components?.map(j=>{j.type==="glyph"&&executeScript(j.value)}));const V=document.getElementById("radical-glyph-render-list");if(!V)return;const L=V.querySelector(`#preview-canvas-${$.uuid}`);if(!L)return;const z=componentsToContours($._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(L,z),loading$1.value&&(loaded$1.value+=1,loaded$1.value>=total$1.value&&(loading$1.value=!1)),y++,y<radical_glyphs.value.length&&requestAnimationFrame(k)};requestAnimationFrame(k),console.timeEnd("timer2")},g=(y,k=!1)=>{let $;if(k)$=editGlyph.value;else for(let j=0;j<radical_glyphs.value.length&&($=radical_glyphs.value[j],$.uuid!==y);j++);if(!$)return;executeScript($),$?.components?.map(j=>{j.type==="glyph"&&executeScript(j.value)});const V=document.getElementById("radical-glyph-render-list");if(!V)return;const L=V.querySelector(`#preview-canvas-${$.uuid}`);if(!L)return;const z=componentsToContours($._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(L,z)};return onMounted(async()=>{emitter.on("renderRadicalGlyphPreviewCanvas",async()=>{await nextTick(),r(),emitter.emit("renderRadicalGlyphSelection")}),emitter.on("renderRadicalGlyphPreviewCanvasByUUID",async y=>{n.get(y)&&(clearTimeout(n.get(y)),n.set(y,null));const k=setTimeout(async()=>{await nextTick(),g(y),emitter.emit("renderRadicalGlyphSelectionByUUID",y)},100);n.set(y,k)}),emitter.on("renderRadicalGlyphPreviewCanvasByUUIDOnEditing",async y=>{n.get(y)&&(clearTimeout(n.get(y)),n.set(y,null));const $=setTimeout(()=>{g(y,!0)},100);n.set(y,$)}),!glyphComponentsDialogVisible.value&&setGlyphComponentsDialogVisible(!0),await nextTick(),clearGlyphRenderList(Status.RadicalGlyphList),radical_glyphs.value.map(y=>{addGlyphTemplate(y,Status.RadicalGlyphList)}),await nextTick(),r()}),onUnmounted(()=>{emitter.off("renderRadicalGlyphPreviewCanvas"),emitter.off("renderRadicalGlyphPreviewCanvasByUUID"),emitter.off("renderRadicalGlyphPreviewCanvasByUUIDOnEditing")}),(y,k)=>{const $=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("section",_hoisted_1$I,[createVNode($,null,{default:withCtx(()=>[_hoisted_2$G]),_:1})])}}}),_hoisted_1$H={class:"comp-glyph-list-wrapper"},_hoisted_2$F=createBaseVNode("main",{class:"list",id:"comp-glyph-render-list"},null,-1),_sfc_main$I=defineComponent({__name:"CompGlyphList",setup(e){const n=new Map,r=()=>{let y=0;const k=()=>{if(y>=comp_glyphs.value.length)return;const $=comp_glyphs.value[y];$._o||executeScript($);const V=document.getElementById("comp-glyph-render-list");if(!V)return;const L=V.querySelector(`#preview-canvas-${$.uuid}`);if(!L)return;const z=componentsToContours($._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(L,z),loading$1.value&&(loaded$1.value+=1,loaded$1.value>=total$1.value&&(loading$1.value=!1)),y++,y<comp_glyphs.value.length&&requestAnimationFrame(k)};requestAnimationFrame(k)},g=(y,k=!1)=>{let $;if(k)$=editGlyph.value;else for(let j=0;j<comp_glyphs.value.length&&($=comp_glyphs.value[j],$.uuid!==y);j++);if(!$)return;executeScript($),$?.components?.map(j=>{j.type==="glyph"&&executeScript(j.value)});const L=document.getElementById("comp-glyph-render-list").querySelector(`#preview-canvas-${$.uuid}`);if(!L)return;const z=componentsToContours($._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(L,z)};return onMounted(async()=>{emitter.on("renderCompGlyphPreviewCanvas",async()=>{await nextTick(),r(),emitter.emit("renderCompGlyphSelection")}),emitter.on("renderCompGlyphPreviewCanvasByUUID",async y=>{n.get(y)&&(clearTimeout(n.get(y)),n.set(y,null));const k=setTimeout(async()=>{await nextTick(),g(y),emitter.emit("renderCompGlyphSelectionByUUID",y)},100);n.set(y,k)}),emitter.on("renderCompGlyphPreviewCanvasByUUIDOnEditing",async y=>{n.get(y)&&(clearTimeout(n.get(y)),n.set(y,null));const $=setTimeout(()=>{g(y,!0)},100);n.set(y,$)}),!glyphComponentsDialogVisible.value&&setGlyphComponentsDialogVisible(!0),await nextTick(),clearGlyphRenderList(Status.CompGlyphList),comp_glyphs.value.map(y=>{addGlyphTemplate(y,Status.CompGlyphList)}),await nextTick(),r()}),onUnmounted(()=>{emitter.off("renderCompGlyphPreviewCanvas"),emitter.off("renderCompGlyphPreviewCanvasByUUID"),emitter.off("renderCompGlyphPreviewCanvasByUUIDOnEditing")}),(y,k)=>{const $=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("section",_hoisted_1$H,[createVNode($,null,{default:withCtx(()=>[_hoisted_2$F]),_:1})])}}}),listToMap=(e,n)=>{const r={};return e.map(g=>{r[g[n]]=g}),r};curry((e,n)=>{let r;return(...g)=>{clearTimeout(r),r=setTimeout(()=>n(...g),e)}});const initPenEditMode=(e,n=5,r=!1)=>{let g=!1;const y=ae=>{if(document.addEventListener("mouseup",$),e.addEventListener("keydown",L),r){g=!0;for(let _e=orderedListWithItemsForCurrentGlyph.value.length-1;_e>=0;_e--){const Ce=orderedListWithItemsForCurrentGlyph.value[_e],{x:Ne,y:$e}=rotatePoint({x:getCoord(ae.offsetX),y:getCoord(ae.offsetY)},{x:Ce.x+Ce.w/2,y:Ce.y+Ce.h/2},-Ce.rotation);if(selectedComponentUUID$1.value===Ce.uuid&&Ce.visible){const xe=transformPenPoints(selectedComponent$1.value,!1);for(let Ie=0;Ie<xe.length-1;Ie++){const ze=xe[Ie];if(distance$g(Ne,$e,ze.x,ze.y)<=n){if(ze.type==="anchor"){selectAnchor.value=ze.uuid,selectPenPoint.value=ze.uuid;return}else if(selectAnchor.value){const qe=(()=>{for(let Et=0;Et<xe.length;Et++)if(xe[Et].uuid===selectAnchor.value)return Et;return-1})();(Ie<=qe+4&&Ie>=qe-4||Ie===1&&qe===xe.length-1)&&(selectPenPoint.value=ze.uuid)}}}return}}if(!selectedComponent.value.visible){g=!1;return}const{x:re,y:oe,w:ue,h:le,rotation:de,uuid:he}=selectedComponent.value;rotatePoint({x:getCoord(ae.offsetX),y:getCoord(ae.offsetY)},{x:re+ue/2,y:oe+le/2},-de),setSelectionForCurrentGlyph("")}else{g=!0;for(let _e=orderedListWithItemsForCurrentCharacterFile.value.length-1;_e>=0;_e--){const Ce=orderedListWithItemsForCurrentCharacterFile.value[_e],{x:Ne,y:$e}=rotatePoint({x:getCoord(ae.offsetX),y:getCoord(ae.offsetY)},{x:Ce.x+Ce.w/2,y:Ce.y+Ce.h/2},-Ce.rotation);if(selectedComponentUUID.value===Ce.uuid&&Ce.visible){const xe=transformPenPoints(selectedComponent.value,!1);for(let Ie=0;Ie<xe.length-1;Ie++){const ze=xe[Ie];if(distance$g(Ne,$e,ze.x,ze.y)<=n){if(ze.type==="anchor"){selectAnchor.value=ze.uuid,selectPenPoint.value=ze.uuid;return}else if(selectAnchor.value){const qe=(()=>{for(let Et=0;Et<xe.length;Et++)if(xe[Et].uuid===selectAnchor.value)return Et;return-1})();(Ie<=qe+4&&Ie>=qe-4||Ie===1&&qe===xe.length-1)&&(selectPenPoint.value=ze.uuid)}}}return}}if(!selectedComponent.value.visible)return;const{x:re,y:oe,w:ue,h:le,rotation:de,uuid:he}=selectedComponent.value;rotatePoint({x:getCoord(ae.offsetX),y:getCoord(ae.offsetY)},{x:re+ue/2,y:oe+le/2},-de),setSelectionForCurrentCharacterFile("")}},k=ae=>{if(r){if(!selectedComponent$1.value||!selectedComponent$1.value?.visible)return;const{x:re,y:oe,w:ue,h:le,rotation:de,uuid:he}=selectedComponent$1.value,{x:_e,y:Ce}=rotatePoint({x:getCoord(ae.offsetX),y:getCoord(ae.offsetY)},{x:re+ue/2,y:oe+le/2},-de),Ne=selectedComponent$1.value.value,{points:$e,closePath:xe}=Ne;if(g){const Ie=clone($e);Ie.map((ze,qe)=>{if(selectPenPoint.value===ze.uuid){if(ze.type==="anchor"&&xe&&(qe<2||qe>Ie.length-3)){if(qe<2)for(let Et=Ie.length-2;Et<Ie.length;Et++)Ie[Et].type==="anchor"&&Ie[Et].x===ze.x&&Ie[Et].y===ze.y&&(Ie[Et].x=_e,Ie[Et].y=Ce);else if(qe>Ie.length-3)for(let Et=0;Et<2;Et++)$e[Et].type==="anchor"&&Ie[Et].x===ze.x&&Ie[Et].y===ze.y&&(Ie[Et].x=_e,Ie[Et].y=Ce)}ze.x=_e,ze.y=Ce}return ze}),modifyComponentForCurrentGlyph(he,{value:{points:Ie}})}g||$e.map((Ie,ze)=>{if(distance$g(_e,Ce,Ie.x,Ie.y)<=n){if(Ie.type==="control"&&ze===$e.length-1&&$e.length>=2&&Ie.x===$e[1].x&&Ie.y===$e[1].y)return;hoverPenPoint.value=Ie.uuid}})}else{if(!selectedComponent.value||!selectedComponent.value?.visible)return;const{x:re,y:oe,w:ue,h:le,rotation:de,uuid:he}=selectedComponent.value,{x:_e,y:Ce}=rotatePoint({x:getCoord(ae.offsetX),y:getCoord(ae.offsetY)},{x:re+ue/2,y:oe+le/2},-de),Ne=selectedComponent.value.value,{points:$e,closePath:xe}=Ne;if(g){const Ie=clone($e);Ie.map((ze,qe)=>{if(selectPenPoint.value===ze.uuid){if(ze.type==="anchor"&&xe&&(qe<2||qe>Ie.length-3)){if(qe<2)for(let Et=Ie.length-2;Et<Ie.length;Et++)Ie[Et].type==="anchor"&&Ie[Et].x===ze.x&&Ie[Et].y===ze.y&&(Ie[Et].x=_e,Ie[Et].y=Ce);else if(qe>Ie.length-3)for(let Et=0;Et<2;Et++)$e[Et].type==="anchor"&&Ie[Et].x===ze.x&&Ie[Et].y===ze.y&&(Ie[Et].x=_e,Ie[Et].y=Ce)}ze.x=_e,ze.y=Ce}return ze}),modifyComponentForCurrentCharacterFile(he,{value:{points:Ie}})}g||$e.map((Ie,ze)=>{if(distance$g(_e,Ce,Ie.x,Ie.y)<=n){if(Ie.type==="control"&&ze===$e.length-1&&$e.length>=2&&Ie.x===$e[1].x&&Ie.y===$e[1].y)return;hoverPenPoint.value=Ie.uuid}})}},$=ae=>{const re=r?selectedComponent$1.value:selectedComponent.value;!re||!re.visible||(z(),g=!1,selectControl$2.value="null",document.removeEventListener("mouseup",$),e.removeEventListener("keydown",L))},V=ae=>{const re=r?selectedComponent$1.value:selectedComponent.value;!re||!re.visible||(z(),r?setSelectionForCurrentGlyph(""):setSelectionForCurrentCharacterFile(""))},L=ae=>{ae.code==="Enter"&&V()},z=()=>{const ae=r?selectedComponent$1.value:selectedComponent.value;if(!ae||!ae.visible)return;let re=modifyComponentForCurrentCharacterFile;r&&(re=modifyComponentForCurrentGlyph);const{x:oe,y:ue,w:le,h:de,rotation:he,flipX:_e,flipY:Ce,type:Ne,uuid:$e}=ae,xe=ae.value.points;let Ie={unitsPerEm:1e3,descender:-200,advanceWidth:1e3};editStatus.value===Status.Edit&&(Ie.unitsPerEm=selectedFile.value.fontSettings.unitsPerEm,Ie.descender=selectedFile.value.fontSettings.descender,Ie.advanceWidth=selectedFile.value.fontSettings.unitsPerEm);let ze=transformPoints(xe,{x:oe,y:ue,w:le,h:de,rotation:he,flipX:_e,flipY:Ce});const qe=formatPoints(ze,Ie,1),Et=genPenContour(qe),_n=100/Ie.unitsPerEm,Dt=ze.map(hn=>Object.assign({},hn,{x:hn.x*_n,y:hn.y*_n})),Sn=genPenContour(Dt);re($e,{value:{contour:Et,preview:Sn}})};return e?.addEventListener("mousedown",y),document.addEventListener("mousemove",k),()=>{e?.removeEventListener("mousedown",y),document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",$),e.removeEventListener("keydown",L),selectAnchor.value="",selectPenPoint.value="",hoverPenPoint.value=""}},renderSelectPenEditor=(e,n=10,r=!1)=>{if(!r&&!selectedComponentUUID.value||r&&!selectedComponentUUID$1.value)return;const g=r?selectedComponent$1.value:selectedComponent.value;if(!g.visible)return;const{x:y,y:k,w:$,h:V,rotation:L,flipX:z,flipY:j,value:ae}=g,re=mapCanvasX(y),oe=mapCanvasY(k),ue=mapCanvasWidth($),le=mapCanvasHeight(V),de=e?.getContext("2d"),he=transformPenPoints(r?selectedComponent$1.value:selectedComponent.value,!0),_e=listToMap(he,"uuid"),{index:Ce,pointType:Ne}=(()=>{for(let $e=0;$e<he.length;$e++)if(he[$e].uuid===selectAnchor.value)return{index:$e,pointType:he[$e].type};return{index:-1,pointType:""}})();if(de.strokeStyle="#153063",de.translate(re+ue/2,oe+le/2),de.rotate(L*Math.PI/180),de.translate(-(re+ue/2),-(oe+le/2)),selectAnchor.value)for(let $e=0;$e<he.length-1;$e++){if(he[$e].type==="anchor"&&(de.beginPath(),de.ellipse(he[$e].x,he[$e].y,n,n,0,0,2*Math.PI),de.stroke(),de.closePath()),he[$e].type==="control"&&$e>=Ce-4&&$e<=Ce+4){const xe=he[$e].origin,Ie=_e[xe];de.strokeRect(he[$e].x-n,he[$e].y-n,2*n,2*n),de.beginPath(),de.moveTo(he[$e].x,he[$e].y),de.lineTo(Ie.x,Ie.y),de.stroke(),de.closePath()}if(Ce===he.length-1&&he[$e].type==="control"&&$e===1){const xe=he[$e].origin,Ie=_e[xe];de.strokeRect(he[$e].x-n,he[$e].y-n,2*n,2*n),de.beginPath(),de.moveTo(he[$e].x,he[$e].y),de.lineTo(Ie.x,Ie.y),de.stroke(),de.closePath()}}else for(let $e=0;$e<he.length;$e++)he[$e].type==="anchor"&&(de.beginPath(),de.ellipse(he[$e].x,he[$e].y,n,n,0,0,2*Math.PI),de.stroke(),de.closePath());for(let $e=0;$e<he.length;$e++)hoverPenPoint.value===he[$e].uuid&&(de.fillStyle="#79bbff",he[$e].type==="anchor"&&(de.beginPath(),de.ellipse(he[$e].x,he[$e].y,n,n,0,0,2*Math.PI),de.fill(),de.closePath()),he[$e].type==="control"&&$e>=Ce-4&&$e<=Ce+4&&de.fillRect(he[$e].x-n,he[$e].y-n,2*n,2*n),de.fillStyle="#fff");de.setTransform(1,0,0,1,0,0)},transformPenPoints=(e,n)=>{const{x:r,y:g,w:y,h:k,rotation:$,flipX:V,flipY:L,value:z}=e,{points:j}=z,ae=n?mapCanvasX(r):r,re=n?mapCanvasY(g):g,oe=n?mapCanvasWidth(y):y,ue=n?mapCanvasHeight(k):k;let le=j.map(Ne=>{let $e=clone(Ne);return V&&($e.x=ae+oe/2+(ae+oe/2-$e.x)),L&&($e.y=re+ue/2+(re+ue/2-$e.y)),$e});const{x:de,y:he,w:_e,h:Ce}=getBound$5(le.reduce((Ne,$e)=>(Ne.push({x:$e.x,y:$e.y}),Ne),[]));return le=le.map(Ne=>{const $e=clone(Ne),{x:xe,y:Ie}=$e;return $e.x=r+(xe-de)*y/_e,$e.y=g+(Ie-he)*k/Ce,$e}),n&&(le=le.map(Ne=>({...Ne,...mapCanvasCoords({x:Ne.x,y:Ne.y})}))),le},initSelect=(e,n=10,r=!1)=>{if(r){if(selectedComponent$1.value&&selectedComponent$1.value.type==="pen"&&selectedComponent$1.value.value.editMode)return initPenEditMode(e,n,!0)}else if(selectedComponent.value&&selectedComponent.value.type==="pen"&&selectedComponent.value.value.editMode)return initPenEditMode(e,n);let g=-1,y=-1,k=!1,$=!1;const V=ue=>{k=!0,$=!1;const le=r?selectedComponent$1.value:selectedComponent.value;if(!le||!le.visible){k=!1;return}document.addEventListener("mouseup",z),e.addEventListener("keydown",ae)},L=ue=>{if($=!0,!r&&!selectedComponent.value||r&&!selectedComponent$1.value)return;const le=r?selectedComponent$1.value:selectedComponent.value;if(!le||!le.visible)return;const{x:de,y:he,w:_e,h:Ce,rotation:Ne,uuid:$e}=le,{x:xe,y:Ie}=rotatePoint({x:getCoord(ue.offsetX),y:getCoord(ue.offsetY)},{x:de+_e/2,y:he+Ce/2},-Ne),ze={x:de,y:he},qe={x:de,y:he+Ce},Et={x:de+_e,y:he},_n={x:de+_e,y:he+Ce};let Dt=modifyComponentForCurrentCharacterFile;if(r&&(Dt=modifyComponentForCurrentGlyph),k)switch(selectControl$2.value){case"scale-left-top":Dt($e,{w:_e+de-xe,h:Ce+he-Ie,x:xe,y:Ie});break;case"scale-right-top":Dt($e,{w:xe-de,h:Ce+he-Ie,y:Ie});break;case"scale-left-bottom":Dt($e,{w:_e+de-xe,x:xe,y:Ie-he});break;case"scale-right-bottom":Dt($e,{w:xe-de,h:Ie-he});break;case"inner-area":Dt($e,{x:de+xe-g,y:he+Ie-y});break;case"rotate-left-top":Dt($e,{rotation:Ne+angleBetween({x:xe-(de+_e/2),y:Ie-(he+Ce/2)},{x:ze.x-(de+_e/2),y:ze.y-(he+Ce/2)})});break;case"rotate-right-top":Dt($e,{rotation:Ne+angleBetween({x:xe-(de+_e/2),y:Ie-(he+Ce/2)},{x:Et.x-(de+_e/2),y:Et.y-(he+Ce/2)})});break;case"rotate-left-bottom":Dt($e,{rotation:Ne+angleBetween({x:xe-(de+_e/2),y:Ie-(he+Ce/2)},{x:qe.x-(de+_e/2),y:qe.y-(he+Ce/2)})});break;case"rotate-right-bottom":Dt($e,{rotation:Ne+angleBetween({x:xe-(de+_e/2),y:Ie-(he+Ce/2)},{x:_n.x-(de+_e/2),y:_n.y-(he+Ce/2)})});break}k||(distance$g(xe,Ie,ze.x,ze.y)<=n?selectControl$2.value="scale-left-top":distance$g(xe,Ie,Et.x,Et.y)<=n?selectControl$2.value="scale-right-top":distance$g(xe,Ie,qe.x,qe.y)<=n?selectControl$2.value="scale-left-bottom":distance$g(xe,Ie,_n.x,_n.y)<=n?selectControl$2.value="scale-right-bottom":leftTop(xe,Ie,ze.x,ze.y,n)?selectControl$2.value="rotate-left-top":rightTop(xe,Ie,Et.x,Et.y,n)?selectControl$2.value="rotate-right-top":leftBottom(xe,Ie,qe.x,qe.y,n)?selectControl$2.value="rotate-left-bottom":rightBottom(xe,Ie,_n.x,_n.y,n)?selectControl$2.value="rotate-right-bottom":inComponentBound({x:xe,y:Ie},r?selectedComponent$1.value:selectedComponent.value)?selectControl$2.value="inner-area":(r?selectedComponent$1.value:selectedComponent.value,selectControl$2.value="null")),g=xe,y=Ie},z=ue=>{if(!$){if(r){for(let de=orderedListWithItemsForCurrentGlyph.value.length-1;de>=0;de--){const he=orderedListWithItemsForCurrentGlyph.value[de];if(selectedComponentUUID$1.value===he.uuid&&inComponentBound({x:getCoord(ue.offsetX),y:getCoord(ue.offsetY)},he,20)&&he.visible)return;if(inComponentBound({x:getCoord(ue.offsetX),y:getCoord(ue.offsetY)},he,20)&&he.visible){setSelectionForCurrentGlyph(he.uuid),k=!1,$=!1,selectControl$2.value="null";return}}setSelectionForCurrentGlyph("")}else{for(let de=orderedListWithItemsForCurrentCharacterFile.value.length-1;de>=0;de--){const he=orderedListWithItemsForCurrentCharacterFile.value[de];if(selectedComponentUUID.value===he.uuid&&inComponentBound({x:getCoord(ue.offsetX),y:getCoord(ue.offsetY)},he,20)&&he.visible)return;if(inComponentBound({x:getCoord(ue.offsetX),y:getCoord(ue.offsetY)},he,20)&&he.visible){setSelectionForCurrentCharacterFile(he.uuid),k=!1,$=!1,selectControl$2.value="null";return}}setSelectionForCurrentCharacterFile("")}document.removeEventListener("mouseup",z),e.removeEventListener("keydown",ae)}const le=r?selectedComponent$1.value:selectedComponent.value;!le||!le.visible||(le.type!=="picture"&&re(),k=!1,$=!1,selectControl$2.value="null")},j=ue=>{const le=r?selectedComponent$1.value:selectedComponent.value;!le||!le.visible||(le.type!=="picture"&&re(),r?setSelectionForCurrentGlyph(""):setSelectionForCurrentCharacterFile(""))},ae=ue=>{ue.code==="Space"&&j()},re=()=>{const ue=r?selectedComponent$1.value:selectedComponent.value;if(!ue)return;let le=modifyComponentForCurrentCharacterFile;r&&(le=modifyComponentForCurrentGlyph);let de=genPenContour;const{x:he,y:_e,w:Ce,h:Ne,rotation:$e,flipX:xe,flipY:Ie,type:ze,uuid:qe}=ue;let Et=[];if(ze==="polygon")Et=ue.value.points,de=genPolygonContour;else if(ze==="ellipse"){const{radiusX:Nn,radiusY:kn}=ue.value;Et=getEllipsePoints(Nn,kn,1e3,he+Nn,_e+kn),de=genEllipseContour}else if(ze==="rectangle"){const{width:Nn,height:kn}=ue.value;Et=getRectanglePoints(Nn,kn,he,_e),de=genRectangleContour}let _n={unitsPerEm:1e3,descender:-200,advanceWidth:1e3};editStatus.value===Status.Edit&&(_n.unitsPerEm=selectedFile.value.fontSettings.unitsPerEm,_n.descender=selectedFile.value.fontSettings.descender,_n.advanceWidth=selectedFile.value.fontSettings.unitsPerEm);let Dt=transformPoints(Et,{x:he,y:_e,w:Ce,h:Ne,rotation:$e,flipX:xe,flipY:Ie});const Sn=formatPoints(Dt,_n,1),hn=de(Sn),Vn=100/_n.unitsPerEm,Mn=Dt.map(Nn=>Object.assign({},Nn,{x:Nn.x*Vn,y:Nn.y*Vn})),$n=de(Mn);le(qe,{value:{contour:hn,preview:$n}})};return e?.addEventListener("mousedown",V),document.addEventListener("mousemove",L),()=>{e?.removeEventListener("mousedown",V),document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",z),e.removeEventListener("keydown",ae)}},renderSelectEditor=(e,n=10,r=!1)=>{if(!r&&!selectedComponent.value||r&&!selectedComponent$1.value)return;if(r){if(selectedComponent$1.value.type==="pen"&&selectedComponent$1.value.value.editMode){renderSelectPenEditor(e,n,!0);return}}else if(selectedComponent.value.type==="pen"&&selectedComponent.value.value.editMode){renderSelectPenEditor(e,n);return}const{x:g,y,w:k,h:$,rotation:V}=r?selectedComponent$1.value:selectedComponent.value,L=mapCanvasX(g),z=mapCanvasY(y),j=mapCanvasWidth(k),ae=mapCanvasHeight($),re=e?.getContext("2d");re.strokeStyle="#79bbff",re.lineWidth=getStrokeWidth(),re.translate(L+j/2,z+ae/2),re.rotate(V*Math.PI/180),re.translate(-(L+j/2),-(z+ae/2)),re.strokeRect(L,z,j,ae),re.strokeRect(L-n,z-n,n*2,n*2),re.strokeRect(L+j-n,z-n,n*2,n*2),re.strokeRect(L-n,z+ae-n,n*2,n*2),re.strokeRect(L+j-n,z+ae-n,n*2,n*2),re.setTransform(1,0,0,1,0,0)},getBound$2=e=>{let n=1/0,r=1/0,g=-1/0,y=-1/0;return e.map(k=>{const{x:$,y:V}=k;$<n&&(n=$),$>g&&(g=$),V<r&&(r=V),V>y&&(y=V)}),{x:n,y:r,w:g-n,h:y-r}},getLayoutCoords=(e,n)=>{for(let r=0;r<e.length;r++)if(!e[r].children||e[r].children.length===0){const{dx:g,dy:y,size:k,centerSquareSize:$}=editCharacterFile.value.info.gridSettings,V=Math.round((k-$)/2)+g,L=Math.round((k-$)/2+$)+g,z=Math.round((k-$)/2)+y,j=Math.round((k-$)/2+$)+y;for(let ae=0;ae<e[r].coordsSegment;ae++)for(let re=0;re<e[r].coordsSegment;re++){const oe=getRatioCoords(e[r],ae,re,e[r].coordsSegment,{x1:V,x2:L,y1:z,y2:j,l:k});n.push({x:oe.x,y:oe.y,col:ae,row:re,id:e[r].id,layout:e[r]})}}else e[r].children&&e[r].children.length&&getLayoutCoords(e[r].children,n)},distance$2=(e,n,r,g)=>Math.sqrt((e-r)*(e-r)+(n-g)*(n-g)),addScript$1=(e,n)=>{selectedSubComponentOnDragging$1.value?selectedSubComponentOnDragging$1.value.value:selectedComponentOnDragging$1?.value?.value;const r=selectedSubComponentOnDragging$1.value?selectedSubComponentOnDragging$1.value:selectedComponentOnDragging$1?.value,g=selectedFile.value.fontSettings?.unitsPerEm;if(editCharacterFileOnDragging.value.glyph_script||(editCharacterFileOnDragging.value.glyph_script={}),dragOption.value==="default"&&!selectedSubComponentOnDragging$1.value){if(editCharacterFileOnDragging.value?.glyph_script&&editCharacterFileOnDragging.value?.glyph_script[r.uuid]){delete editCharacterFileOnDragging.value?.glyph_script[r.uuid];return}}else if(dragOption.value==="default"&&selectedSubComponentOnDragging$1.value){if(SubComponentsRootOnDragging$1.value.value?.glyph_script&&SubComponentsRootOnDragging$1.value.value?.glyph_script[r.uuid]){delete SubComponentsRootOnDragging$1.value.value?.glyph_script[r.uuid];return}}else if(dragOption.value==="layout"&&!selectedSubComponentOnDragging$1.value){if(draggingJoint$2.value&&putAtCoord$2.value){let y=null,k=0,$=0,V=1/0;const{x:L,y:z}=putAtCoord$2.value;for(let re=0;re<n.length;re++){const oe=n[re],ue=distance$2(L,z,oe.x,oe.y);ue<V&&(V=ue,y=oe,k=L-y.x,$=z-y.y)}let ae=`${`const ratio_coord = window.character.getRatioCoords(window.character.getLayoutByID('${y.id}'),${y.col},${y.row},${y.layout.coordsSegment})`};`;ae+=`if (window.character.getComponent('${r.name}')) { window.character.getComponent('${r.name}').ox = ratio_coord.x+${k} - window.character.getGlyph('${r.name}')?.getJoint('${draggingJoint$2.value.name}')?.x; }`,ae+=`if (window.character.getComponent('${r.name}')) { window.character.getComponent('${r.name}').oy = ratio_coord.y+${$} - window.character.getGlyph('${r.name}')?.getJoint('${draggingJoint$2.value.name}')?.y; }`,editCharacterFileOnDragging.value.glyph_script[r.uuid]=ae,executeCharacterScript(editCharacterFileOnDragging.value)}else if(putAtCoord$2.value){let y=null,k=0,$=0,V=1/0;const{x:L,y:z}=putAtCoord$2.value;for(let re=0;re<n.length;re++){const oe=n[re],ue=distance$2(L,z,oe.x,oe.y);ue<V&&(V=ue,y=oe,k=L-y.x,$=z-y.y)}const ae=`${`const ratio_coord = window.character.getRatioCoords(window.character.getLayoutByID('${y.id}'),${y.col},${y.row},${y.layout.coordsSegment})`};window.character.getComponent('${r.name}')?.ox = ratio_coord.x + ${k} - ${g/2};window.character.getComponent('${r.name}')?.oy = ratio_coord.y + ${$} - ${g/2}`;editCharacterFileOnDragging.value.glyph_script[r.uuid]=ae,executeCharacterScript(editCharacterFileOnDragging.value)}}else if(dragOption.value==="layout"&&selectedSubComponentOnDragging$1.value){SubComponentsRootOnDragging$1.value.value.glyph_script||(SubComponentsRootOnDragging$1.value.value.glyph_script={});const{ox:y,oy:k}=getOrigin2$1();if(draggingJoint$2.value&&putAtCoord$2.value){const{x:$,y:V}=putAtCoord$2.value,L=getRatioLayout2(SubComponentsRootOnDragging$1.value.value,"width"),z=getRatioLayout2(SubComponentsRootOnDragging$1.value.value,"height"),j=($-(g-L)/2-y)/L,ae=(V-(g-z)/2-k)/z;selectedSubComponentOnDragging$1.value.value._o.getJoint(`${draggingJoint$2.value.name}`)?.x;let re=`if (window.glyph.getComponent('${r.name}')) { window.glyph.getComponent('${r.name}').ox = (${g} - window.glyph.getRatioLayout('width')) / 2 + window.glyph.getRatioLayout('width') * ${j} - window.glyph.getGlyph('${r.name}')?.getJoint('${draggingJoint$2.value.name}')?.x; }`;re+=`if (window.glyph.getComponent('${r.name}')) { window.glyph.getComponent('${r.name}').oy = (${g} - window.glyph.getRatioLayout('height')) / 2 + window.glyph.getRatioLayout('height') * ${ae} - window.glyph.getGlyph('${r.name}')?.getJoint('${draggingJoint$2.value.name}')?.y; }`,SubComponentsRootOnDragging$1.value.value.glyph_script[r.uuid]=re}else if(putAtCoord$2.value){const{x:$,y:V}=putAtCoord$2.value,L=$-g/2,z=V-g/2,j=getRatioLayout2(SubComponentsRootOnDragging$1.value.value,"width"),ae=getRatioLayout2(SubComponentsRootOnDragging$1.value.value,"height"),re=(L-(g-j)/2-y)/j,oe=(z-(g-ae)/2-k)/ae;let ue=`if (window.glyph.getComponent('${r.name}')) { window.glyph.getComponent('${r.name}').ox = (${g} - window.glyph.getRatioLayout('width')) / 2 + window.glyph.getRatioLayout('width') * ${re}; }`;ue+=`if (window.glyph.getComponent('${r.name}')) { window.glyph.getComponent('${r.name}').oy = (${g} - window.glyph.getRatioLayout('height')) / 2 + window.glyph.getRatioLayout('height') * ${oe}; }`,SubComponentsRootOnDragging$1.value.value.glyph_script[r.uuid]=ue}executeScript(SubComponentsRootOnDragging$1.value.value)}emitter.emit("renderCharacter",!0)},initGlyphDragger$1=(e,n=!1)=>{let r,g,y,k;const $=selectedFile.value.fontSettings?.unitsPerEm;let V=!1,L=!1,z=-1,j=-1,ae=-1,re=-1,oe=[];const ue=_e=>{if(!draggable$1.value)return;editCharacterFileOnDragging.value=clone(editCharacterFile.value);for(let Ie=0;Ie<editCharacterFileOnDragging.value.components.length;Ie++){const ze=editCharacterFileOnDragging.value.components[Ie];ze.type==="glyph"&&executeScript(ze.value)}let Ce=[],Ne=null;if(selectedSubComponentOnDragging$1.value?(Ce=getJoints$1(selectedComponentOnDragging$1?.value,selectedSubComponentOnDragging$1.value.uuid),Ne=selectedSubComponentOnDragging$1.value.value):selectedComponentOnDragging$1?.value&&(Ce=getJoints$1(selectedComponentOnDragging$1?.value,selectedComponentOnDragging$1?.value.uuid),Ne=selectedComponentOnDragging$1?.value?.value),!Ne||!Ne._o)return;oe=[],getLayoutCoords(editCharacterFileOnDragging.value.info.layoutTree,oe),ae=getCoord(_e.offsetX),re=getCoord(_e.offsetY);const $e=20;if(checkJoints.value)for(let Ie=0;Ie<Ce.length;Ie++){const{x:ze,y:qe}=Ce[Ie];distance$2(ze,qe,ae,re)<=$e&&(draggingJoint$2.value=Ce[Ie],Ne._o.onSkeletonDragStart&&Ne._o.onSkeletonDragStart({draggingJoint:draggingJoint$2.value,deltaX:0,deltaY:0}))}setEditing$2(!0),V=!0,z=getCoord(_e.offsetX),j=getCoord(_e.offsetY);const xe=getOrigin$3();r=xe.ox,g=xe.oy,y=selectedSubComponentOnDragging$1.value?selectedSubComponentOnDragging$1.value.ox:selectedComponentOnDragging$1.value.ox,k=selectedSubComponentOnDragging$1.value?selectedSubComponentOnDragging$1.value.oy:selectedComponentOnDragging$1.value.oy,window.addEventListener("mouseup",de)},le=_e=>{const Ce=getCoord(_e.offsetX)-z,Ne=getCoord(_e.offsetY)-j;let $e=null;if(editCharacterFileOnDragging.value&&selectedSubComponentOnDragging$1.value?$e=selectedSubComponentOnDragging$1.value.value:editCharacterFileOnDragging.value&&selectedComponentOnDragging$1?.value?$e=selectedComponentOnDragging$1?.value?.value:!editCharacterFileOnDragging.value&&selectedSubComponent.value?$e=selectedSubComponent.value.value:!editCharacterFileOnDragging.value&&selectedComponent?.value&&($e=selectedComponent?.value?.value),L=!0,V)if(draggingJoint$2.value)if($e._o?.onSkeletonDrag)$e._o.onSkeletonDrag({draggingJoint:draggingJoint$2.value,deltaX:Ce,deltaY:Ne}),emitter.emit("renderCharacter");else if(putAtCoord$2.value={x:r+draggingJoint$2.value.x+Ce,y:g+draggingJoint$2.value.y+Ne},selectedSubComponentOnDragging$1.value){addScript$1();for(let xe=0;xe<editCharacterFileOnDragging.value.components.length;xe++)editCharacterFileOnDragging.value.components[xe].uuid===selectedComponentUUID.value&&(editCharacterFileOnDragging.value.components[xe].ox=y+Ce,editCharacterFileOnDragging.value.components[xe].oy=k+Ne)}else{addScript$1();for(let xe=0;xe<editCharacterFileOnDragging.value.components.length;xe++)editCharacterFileOnDragging.value.components[xe].uuid===selectedComponentUUID.value&&(editCharacterFileOnDragging.value.components[xe].ox=y+Ce,editCharacterFileOnDragging.value.components[xe].oy=k+Ne)}else if(putAtCoord$2.value={x:r+Ce+$/2,y:g+Ne+$/2},selectedSubComponentOnDragging$1.value)addScript$1(),modifySubComponent({ox:y+Ce,oy:k+Ne});else{for(let xe=0;xe<editCharacterFileOnDragging.value.components.length;xe++)editCharacterFileOnDragging.value.components[xe].uuid===selectedComponentUUID.value&&(editCharacterFileOnDragging.value.components[xe].ox=y+Ce,editCharacterFileOnDragging.value.components[xe].oy=k+Ne);emitter.emit("renderCharacter")}else if(checkJoints.value){let xe=[];if(selectedSubComponent.value?xe=getJoints$1(selectedComponent?.value,selectedSubComponent.value.uuid):selectedComponent?.value&&(xe=getJoints$1(selectedComponent?.value,selectedComponent?.value.uuid)),!$e)return;const Ie=10;let ze=!1;const qe=getCoord(_e.offsetX),Et=getCoord(_e.offsetY);for(let _n=0;_n<xe.length;_n++){const{x:Dt,y:Sn}=xe[_n];distance$2(Dt,Sn,qe,Et)<=Ie&&(movingJoint$2.value=xe[_n],ze=!0)}!ze&&(movingJoint$2.value=null)}},de=_e=>{let Ce=null;selectedSubComponentOnDragging$1.value?Ce=selectedSubComponentOnDragging$1.value.value:selectedComponentOnDragging$1?.value&&(Ce=selectedComponentOnDragging$1?.value?.value);const Ne=getCoord(_e.offsetX)-z,$e=getCoord(_e.offsetY)-j;Ce._o?.onSkeletonDragEnd&&V&&Ce._o.onSkeletonDragEnd({draggingJoint:draggingJoint$2.value,deltaX:Ne,deltaY:$e}),window.removeEventListener("mouseup",de),setEditing$2(!1),L&&addScript$1(n,oe),V=!1,L=!1,ae=-1,re=-1,z=0,j=0,putAtCoord$2.value=null,draggingJoint$2.value=null,editCharacterFile.value.glyph_script=clone(editCharacterFileOnDragging.value.glyph_script),editCharacterFile.value.components=clone(editCharacterFileOnDragging.value.components),editCharacterFileOnDragging.value=null,emitter.emit("renderPreviewCanvasByUUIDOnEditing",editCharacterFile.value.uuid)};return e.addEventListener("mousedown",ue),e.addEventListener("mousemove",le),()=>{e.removeEventListener("mousedown",ue),e.removeEventListener("mousemove",le),editCharacterFileOnDragging.value=null,setEditing$2(!1)}},renderGlyphSelector$1=(e,n=!1)=>{let r=null,g=null;if(editCharacterFileOnDragging.value&&selectedSubComponentOnDragging$1.value?(r=selectedSubComponentOnDragging$1.value.value,g=selectedSubComponentOnDragging$1.value):editCharacterFileOnDragging.value&&selectedComponentOnDragging$1?.value?(r=selectedComponentOnDragging$1?.value?.value,g=selectedComponentOnDragging$1.value):!editCharacterFileOnDragging.value&&selectedSubComponent.value?(r=selectedSubComponent.value.value,g=selectedSubComponent.value):!editCharacterFileOnDragging.value&&selectedComponent?.value&&(r=selectedComponent?.value?.value,g=selectedComponent.value),!r)return;getOrigin$3();let y=getJoints$1(g,g.uuid);const k=L=>{for(let z=0;z<y.length;z++)if(y[z].name===L)return y[z];return{x:0,y:0}};getBound$2(y);const $=5,V=e.getContext("2d");if(movingJoint$2.value&&checkJoints.value){const{x:z,y:j}=k(movingJoint$2.value.name),ae=mapCanvasX(z),re=mapCanvasY(j);V.fillStyle="red",V.fillRect(ae-10,re-10,2*10,2*10)}if(draggingJoint$2.value&&checkJoints.value){const{x:L,y:z}=k(draggingJoint$2.value.name),j=10,ae=mapCanvasX(L),re=mapCanvasY(z);V.fillStyle="red",V.fillRect(ae-j,re-j,2*j,2*j)}if(putAtCoord$2.value&&putAtCoord$2.value.id){const{x:L,y:z}=putAtCoord$2.value,j=mapCanvasX(L),ae=mapCanvasY(z);V.fillStyle="red",V.fillRect(j-$,ae-$,2*$,2*$)}},getOrigin$3=()=>{if(selectedSubComponentOnDragging$1.value){let{ox:e,oy:n}=selectedComponentOnDragging$1.value,r=selectedComponentOnDragging$1.value;for(let g=1;g<editCharacterFileOnDragging.value.selectedComponentsTree.length;g++){const y=editCharacterFileOnDragging.value.selectedComponentsTree[g],k=selectedItemByUUID(r.value.components,y);r=k,e+=k.ox,n+=k.oy}return{ox:e,oy:n}}else if(selectedSubComponent.value){let{ox:e,oy:n}=selectedComponent.value,r=selectedComponent.value;for(let g=1;g<editCharacterFile.value.selectedComponentsTree.length;g++){const y=editCharacterFile.value.selectedComponentsTree[g],k=selectedItemByUUID(r.value.components,y);r=k,e+=k.ox,n+=k.oy}return{ox:e,oy:n}}return{ox:editCharacterFileOnDragging.value?selectedComponentOnDragging$1.value.ox:selectedComponent.value.ox,oy:editCharacterFileOnDragging.value?selectedComponentOnDragging$1.value.oy:selectedComponent.value.oy}},getOrigin2$1=()=>{if(selectedSubComponentOnDragging$1.value){let{ox:e,oy:n}=selectedComponentOnDragging$1.value,r=selectedComponentOnDragging$1.value;for(let g=1;g<editCharacterFileOnDragging.value.selectedComponentsTree.length-1;g++){const y=editCharacterFileOnDragging.value.selectedComponentsTree[g],k=selectedItemByUUID(r.value.components,y);r=k,e+=k.ox,n+=k.oy}return{ox:e,oy:n}}else if(selectedSubComponent.value){let{ox:e,oy:n}=selectedComponent.value,r=selectedComponent.value;for(let g=1;g<editCharacterFile.value.selectedComponentsTree.length-1;g++){const y=editCharacterFile.value.selectedComponentsTree[g],k=selectedItemByUUID(r.value.components,y);r=k,e+=k.ox,n+=k.oy}return{ox:e,oy:n}}return{ox:editCharacterFileOnDragging.value?selectedComponentOnDragging$1.value.ox:selectedComponent.value.ox,oy:editCharacterFileOnDragging.value?selectedComponentOnDragging$1.value.oy:selectedComponent.value.oy}},initTranslateMover=(e,n=!1)=>{const{translateX:r,translateY:g}=n?editGlyph.value.view:editCharacterFile.value.view;let y=-1,k=-1;const $=j=>{y=j.clientX,k=j.clientY,document.addEventListener("mousemove",V),document.addEventListener("mouseup",L)},V=j=>{n?modifyGlyph(editGlyph.value.uuid,{view:{translateX:r+getCoord(j.clientX-y),translateY:g+getCoord(j.clientY-k)}}):modifyCharacterFile(editCharacterFile.value.uuid,{view:{translateX:r+getCoord(j.clientX-y),translateY:g+getCoord(j.clientY-k)}})},L=j=>{document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",L)};return e?.addEventListener("mousedown",$),()=>{e?.removeEventListener("mousedown",$)}},initCoordsViewer=(e,n=!1)=>{const r=y=>{if(n){const $=y.offsetX/width$1.value*1e3,V=y.offsetY/height$1.value*1e3;coordsText.value=`${$}, ${V}`}else{const k=selectedFile.value.fontSettings.unitsPerEm,$=y.offsetX/width$1.value*k,V=y.offsetY/height$1.value*k;coordsText.value=`${$}, ${V}`}};return e?.addEventListener("mousemove",r),()=>{e?.removeEventListener("mousemove",r)}},_hoisted_1$G={class:"widget grid-controller"},_hoisted_2$E=["width","height"],_sfc_main$H=defineComponent({__name:"GridController",props:{dx:{type:Number,default:0},dy:{type:Number,default:0},centerSquareSize:{type:Number,default:500/3},size:{type:Number,default:500},layoutTree:{type:Array,default:[]},onChange:Function},setup(e){const n=e,{tm:r,t:g,locale:y}=useI18n(),{dx:k,dy:$,centerSquareSize:V,size:L,onChange:z,layoutTree:j}=toRefs(n),ae=computed(()=>[ue(L.value/2)+ue(k.value),ue(L.value/2)+ue($.value)]),re=ref(null),oe=(Dt,Sn,hn,Vn)=>Math.sqrt((Dt-hn)*(Dt-hn)+(Sn-Vn)*(Sn-Vn)),ue=Dt=>Dt/L.value*500,le=computed(()=>Math.round((L.value-V.value)/2)+k.value),de=computed(()=>Math.round((L.value-V.value)/2+V.value)+k.value),he=computed(()=>Math.round((L.value-V.value)/2)+$.value),_e=computed(()=>Math.round((L.value-V.value)/2+V.value)+$.value);onMounted(()=>{_n(),executeCharacterScript(editCharacterFile.value),executeCharactersGlyphsScript(editCharacterFile.value),renderGridCanvas(orderedListWithItemsForCurrentCharacterFile.value,re.value,{scale:.5,forceUpdate:!1,fill:!1,offset:{x:0,y:0},grid:{dx:k.value,dy:$.value,size:L.value,centerSquareSize:V.value,x1:le.value,x2:de.value,y1:he.value,y2:_e.value},useSkeletonGrid:editCharacterFile.value.info?.useSkeletonGrid||!1}),re.value.addEventListener("mousedown",$e),re.value.addEventListener("mousemove",xe)}),onBeforeUnmount(()=>{re.value.removeEventListener("mousedown",$e),re.value.removeEventListener("mousemove",xe),tool.value==="grid"&&(y.value==="zh"?ElMessageBox.alert("","",{confirmButtonText:""}):y.value==="en"&&ElMessageBox.alert("For user convenience in component editing operations, the default layout will be restored when leaving the layout editing interface. If you have applied layout transformations, the transformed layout will be used for previewing and exporting the font library. However, the default layout will still be used for other editing operations.","Note: You have left the layout editing interface",{confirmButtonText:"Confirm"}))});const Ce=ref("none"),Ne=ref("default"),$e=Dt=>{oe(Dt.offsetX,Dt.offsetY,ae.value[0],ae.value[1])<=20?(document.body.addEventListener("mouseup",Ie),Ce.value="inner-move"):oe(Dt.offsetX,Dt.offsetY,ue(L.value/2-V.value/4),ue(L.value/2-V.value/4))<=20?(document.body.addEventListener("mouseup",Ie),Ce.value="left-top",Ne.value="left-top"):oe(Dt.offsetX,Dt.offsetY,ue(L.value/2+V.value/4),ue(L.value/2-V.value/4))<=20?(document.body.addEventListener("mouseup",Ie),Ce.value="right-top",Ne.value="right-top"):oe(Dt.offsetX,Dt.offsetY,ue(L.value/2-V.value/4),ue(L.value/2+V.value/4))<=20?(document.body.addEventListener("mouseup",Ie),Ce.value="left-bottom",Ne.value="left-bottom"):oe(Dt.offsetX,Dt.offsetY,ue(L.value/2+V.value/4),ue(L.value/2+V.value/4))<=20&&(document.body.addEventListener("mouseup",Ie),Ce.value="right-bottom",Ne.value="right-bottom")},xe=Dt=>{switch(Ce.value){case"inner-move":{const Sn=Dt.offsetX/500*L.value-L.value/2,hn=Dt.offsetY/500*L.value-L.value/2;Math.abs(Sn)<=L.value/12&&Math.abs(hn)<=L.value/12&&z.value(Sn,hn,V.value);break}case"none":{oe(Dt.offsetX,Dt.offsetY,ue(L.value/2-V.value/4),ue(L.value/2-V.value/4))<=20?Ne.value="left-top":oe(Dt.offsetX,Dt.offsetY,ue(L.value/2+V.value/4),ue(L.value/2-V.value/4))<=20?Ne.value="right-top":oe(Dt.offsetX,Dt.offsetY,ue(L.value/2-V.value/4),ue(L.value/2+V.value/4))<=20?Ne.value="left-bottom":oe(Dt.offsetX,Dt.offsetY,ue(L.value/2+V.value/4),ue(L.value/2+V.value/4))<=20?Ne.value="right-bottom":Ne.value="default";break}default:{const Sn=Dt.offsetX/500*L.value-L.value/2,hn=Dt.offsetY/500*L.value-L.value/2;let Vn=0;if(Ce.value==="left-top"?Vn=Math.min(-Sn,-hn):Ce.value==="right-top"?Vn=Math.min(Sn,-hn):Ce.value==="left-bottom"?Vn=Math.min(-Sn,hn):Ce.value==="right-bottom"&&(Vn=Math.min(Sn,hn)),Vn=Math.abs(Vn),Vn<=L.value/6&&Vn>=L.value/24){const Mn=Vn*4,$n=k.value/V.value*Mn,Nn=$.value/V.value*Mn;z.value($n,Nn,Mn)}else if(Vn>=L.value/6){const Mn=L.value/3*2,$n=k.value/V.value*Mn,Nn=$.value/V.value*Mn;z.value($n,Nn,Mn)}else if(Vn<=L.value/24){const Mn=L.value/6,$n=k.value/V.value*Mn,Nn=$.value/V.value*Mn;z.value($n,Nn,Mn)}break}}},Ie=()=>{Ce.value="none",document.body.removeEventListener("mouseup",Ie)},ze=Dt=>{saveState("",[StoreType.Grid],OpType.Undo,Dt)};let qe=null,Et=!1;watch([gridSettings$1,gridChanged],(Dt,Sn)=>{qe&&clearTimeout(qe),qe=setTimeout(()=>{Et=!1,clearTimeout(qe)},500),Et||(ze({gridSettings:Sn[0],gridChanged:Sn[1],newRecord:!0}),Et=!0)},{deep:!0}),watch([k,$,L,V,j],(Dt,Sn)=>{_n(),executeCharacterScript(editCharacterFile.value),renderGridCanvas(orderedListWithItemsForCurrentCharacterFile.value,re.value,{scale:.5,forceUpdate:!1,fill:!1,offset:{x:0,y:0},grid:{dx:k.value,dy:$.value,size:L.value,centerSquareSize:V.value,x1:le.value,x2:de.value,y1:he.value,y2:_e.value},useSkeletonGrid:editCharacterFile.value.info?.useSkeletonGrid||!1})},{deep:!0}),watch([tool],()=>{tool.value==="grid"&&orderedListWithItemsForCurrentCharacterFile.value.length&&(_n(),executeCharacterScript(editCharacterFile.value),renderGridCanvas(orderedListWithItemsForCurrentCharacterFile.value,re.value,{scale:.5,forceUpdate:!1,fill:!1,offset:{x:0,y:0},grid:{dx:k.value,dy:$.value,size:L.value,centerSquareSize:V.value,x1:le.value,x2:de.value,y1:he.value,y2:_e.value},useSkeletonGrid:editCharacterFile.value.info?.useSkeletonGrid||!1}))},{deep:!0});const _n=()=>{const Dt=re.value.getContext("2d");Dt.clearRect(0,0,L.value,L.value),Dt.strokeStyle="#811616",Dt.lineWidth=2,Dt.beginPath(),Dt.moveTo(0,he.value),Dt.lineTo(L.value,he.value),Dt.stroke(),Dt.closePath(),Dt.beginPath(),Dt.moveTo(0,_e.value),Dt.lineTo(L.value,_e.value),Dt.stroke(),Dt.closePath(),Dt.beginPath(),Dt.moveTo(le.value,0),Dt.lineTo(le.value,L.value),Dt.stroke(),Dt.closePath(),Dt.beginPath(),Dt.moveTo(de.value,0),Dt.lineTo(de.value,L.value),Dt.stroke(),Dt.closePath(),Dt.beginPath(),Dt.strokeStyle="#153063",Dt.rect(L.value/2-V.value/4,L.value/2-V.value/4,V.value/2,V.value/2),Dt.stroke(),Dt.closePath(),Dt.fillStyle="#153063",Dt.lineWidth=0,Dt.beginPath(),Dt.arc(ae.value[0]/500*L.value,ae.value[1]/500*L.value,20,0,2*Math.PI),Dt.closePath(),Dt.fill(),j.value.length&&renderLayout(j.value,{x:0,y:0,w:L.value,h:L.value},1,{x1:le.value,x2:de.value,y1:he.value,y2:_e.value,l:L.value},re.value)};return(Dt,Sn)=>(openBlock(),createElementBlock("div",_hoisted_1$G,[createBaseVNode("canvas",{ref_key:"canvas",ref:re,width:unref(L),height:unref(L),style:{width:"500px",height:"500px"},class:normalizeClass({"left-top":Ne.value==="left-top","right-top":Ne.value==="right-top","left-bottom":Ne.value==="left-bottom","right-bottom":Ne.value==="right-bottom"})},null,10,_hoisted_2$E)]))}}),GridController$1=_export_sfc(_sfc_main$H,[["__scopeId","data-v-ad0998a5"]]),_withScopeId$a=e=>(pushScopeId("data-v-12bb0909"),e=e(),popScopeId(),e),_hoisted_1$F={class:"widget metrics-controller"},_hoisted_2$D={class:"canvas"},_hoisted_3$o=_withScopeId$a(()=>createBaseVNode("div",{class:"label"},"advanceWidth",-1)),_hoisted_4$l=_withScopeId$a(()=>createBaseVNode("div",{class:"label"},"lsb",-1)),_hoisted_5$g=_withScopeId$a(()=>createBaseVNode("div",{class:"label"},"rsb",-1)),_hoisted_6$e=[_hoisted_5$g],_sfc_main$G=defineComponent({__name:"MetricsController",setup(e){let n=0,r=0,g=!1;const y=re=>{const oe=selectedFile.value.fontSettings.unitsPerEm/500;return re*oe},k=re=>{const oe=selectedFile.value.fontSettings.unitsPerEm/500;return re/oe},$=re=>{g=!0,r=metrics_data.value.advanceWidth,n=re.clientX,document.addEventListener("mousemove",V),document.addEventListener("mouseup",L)},V=re=>{g&&(metrics_data.value.advanceWidth=r+y(re.clientX-n),metrics_data.value.rsb=metrics_data.value.advanceWidth-(metrics_data.value.lsb+metrics_data.value.xMax-metrics_data.value.xMin))},L=re=>{g=!1,n=0,r=0,document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",L)},z=re=>{g=!0,n=re.clientX,r=metrics_data.value.lsb,document.addEventListener("mousemove",j),document.addEventListener("mouseup",ae)},j=re=>{g&&(metrics_data.value.lsb=r-y(re.clientX-n),metrics_data.value.rsb=metrics_data.value.advanceWidth-(metrics_data.value.lsb+metrics_data.value.xMax-metrics_data.value.xMin))},ae=re=>{g=!1,n=0,r=0,document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",ae)};return(re,oe)=>(openBlock(),createElementBlock("div",_hoisted_1$F,[createBaseVNode("div",_hoisted_2$D,[createBaseVNode("div",{class:"advance-width-controller",style:normalizeStyle({width:`${k(unref(metrics_data).advanceWidth)}px`,left:`${k(unref(metrics_data).xMin-unref(metrics_data).lsb)}px`})},[_hoisted_3$o,createBaseVNode("div",{class:"advance-width-mover mover",onMousedown:$},null,32)],4),createBaseVNode("div",{class:"lsb-controller",style:normalizeStyle({width:`${k(unref(metrics_data).lsb)}px`,left:`${k(unref(metrics_data).xMin-unref(metrics_data).lsb)}px`})},[_hoisted_4$l,createBaseVNode("div",{class:"lsb-mover mover",onMousedown:z},null,32)],4),createBaseVNode("div",{class:"rsb-controller",style:normalizeStyle({width:`${k(unref(metrics_data).rsb)}px`,left:`${k(unref(metrics_data).xMax)}px`})},_hoisted_6$e,4)])]))}}),MetricsController=_export_sfc(_sfc_main$G,[["__scopeId","data-v-12bb0909"]]),initLayoutResizer$1=e=>{let r=!1;const g=SubComponentsRoot.value?SubComponentsRoot.value.value:selectedComponent.value.value,{ox:y,oy:k}=getOrigin$2();if(!g.layout||g.layout.type!=="rect")return;const $=j=>{r=!0},V=j=>{if(!g||!g?.layout)return;const{width:ae,height:re}=g.layout.params,oe=e.width/4+y,ue=e.height/4+k,le=mapCanvasX(oe-ae/2),de=mapCanvasY(ue-re/2),he=mapCanvasWidth(ae),_e=mapCanvasHeight(re),Ce=getCoord(j.offsetX),Ne=getCoord(j.offsetY),$e=j.offsetX*4,xe=j.offsetY*4,Ie={x:le,y:de},ze={x:Ce,y:de+_e},qe={x:le+he,y:de},Et={x:le+he,y:de+_e};if(r){switch(selectControl$1.value){case"scale-left-top":{const _n=Ce<oe?(oe-Ce)*2:ae,Dt=Ne<ue?(ue-Ne)*2:re;g.layout.params.width=_n,g.layout.params.height=Dt;break}case"scale-right-top":{const _n=Ce>oe?(Ce-oe)*2:ae,Dt=Ne<ue?(ue-Ne)*2:re;g.layout.params.width=_n,g.layout.params.height=Dt;break}case"scale-left-bottom":{const _n=Ce<oe?(oe-Ce)*2:ae,Dt=Ne>ue?(Ne-ue)*2:re;g.layout.params.width=_n,g.layout.params.height=Dt;break}case"scale-right-bottom":{const _n=Ce>oe?(Ce-oe)*2:ae,Dt=Ne>ue?(Ne-ue)*2:re;g.layout.params.width=_n,g.layout.params.height=Dt;break}}executeScript(g),emitter.emit("renderPreviewCanvasByUUID",g.uuid),emitter.emit("renderCharacter",!0),renderLayoutEditor$1(e)}r||(distance$g($e,xe,Ie.x,Ie.y)<=20?selectControl$1.value="scale-left-top":distance$g($e,xe,qe.x,qe.y)<=20?selectControl$1.value="scale-right-top":distance$g($e,xe,ze.x,ze.y)<=20?selectControl$1.value="scale-left-bottom":distance$g($e,xe,Et.x,Et.y)<=20?selectControl$1.value="scale-right-bottom":selectControl$1.value="null")},L=j=>{r=!1};return e?.addEventListener("mousedown",$),document.addEventListener("mousemove",V),document.addEventListener("mouseup",L),()=>{e?.removeEventListener("mousedown",$),document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",L)}},renderLayoutEditor$1=e=>{const r=SubComponentsRoot.value?SubComponentsRoot.value.value:selectedComponent.value.value,{ox:g,oy:y}=getOrigin$2();if(r.layout&&r.layout.type==="rect"){const{width:k,height:$}=r.layout.params,V=e.width/4+g-k/2,L=e.height/4+y-$/2,z=mapCanvasX(V),j=mapCanvasY(L),ae=mapCanvasWidth(k),re=mapCanvasHeight($),oe=e?.getContext("2d");oe.strokeStyle="#79bbff",oe.translate(z+ae/2,j+re/2),oe.translate(-(z+ae/2),-(j+re/2)),oe.strokeRect(z,j,ae,re),oe.strokeRect(z-5,j-5,5*2,5*2),oe.strokeRect(z+ae-5,j-5,5*2,5*2),oe.strokeRect(z-5,j+re-5,5*2,5*2),oe.strokeRect(z+ae-5,j+re-5,5*2,5*2),oe.setTransform(1,0,0,1,0,0)}},getOrigin$2=()=>{if(SubComponentsRoot.value){let{ox:e,oy:n}=selectedComponent.value,r=selectedComponent.value;for(let g=1;g<editCharacterFile.value.selectedComponentsTree.length-1;g++){const y=editCharacterFile.value.selectedComponentsTree[g],k=selectedItemByUUID(r.value.components,y);r=k,e+=k.ox,n+=k.oy}return{ox:e,oy:n}}return{ox:selectedComponent.value.ox,oy:selectedComponent.value.oy}},_hoisted_1$E={class:"edit-panel-wrapper"},_hoisted_2$C={class:"canvas-wrapper"},_hoisted_3$n={class:"metrics"},_hoisted_4$k={class:"grid"},_hoisted_5$f=["width","height"],_hoisted_6$d=["width","height"],_sfc_main$F=defineComponent({__name:"EditPanel",setup(e){const n=ref(!1);let r=null,g=null;const y=ref(null),k=ref(null);onMounted(async()=>{document.addEventListener("keydown",$),tempScript(editCharacterFile.value),executeCharacterScript(editCharacterFile.value);const ae=y.value;ae.style.width=`${width$1.value*editCharacterFile.value.view.zoom/100}px`,ae.style.height=`${height$1.value*editCharacterFile.value.view.zoom/100}px`,grid.precision=selectedFile.value.width/width$1.value*10,setCanvas(ae),checkJoints.value=!0,checkRefLines.value=!0,n.value=!0,L(),await nextTick(),z(),emitter.on("renderCharacter",()=>{z(),j(),tool.value==="select"&&renderSelectEditor(canvas.value),tool.value==="pen"&&renderPenEditor(canvas.value)}),emitter.on("renderCharacter_forceUpdate",()=>{render$1(canvas.value,!0,!0)}),emitter.on("updateCharacterView",()=>{const re=canvas.value;re.style.width=`${500*editCharacterFile.value.view.zoom/100}px`,re.style.height=`${500*editCharacterFile.value.view.zoom/100}px`}),await nextTick(),selectedComponentUUID.value&&selectedComponent.value.type==="glyph"&&setTool("glyphDragger"),loading$1.value=!1});const $=ae=>{const re=navigator.userAgent.includes("Mac");(re&&ae.metaKey&&ae.key==="z"||!re&&ae.ctrlKey&&ae.key==="z")&&(ae.shiftKey?redo$2():undo$2(),ae.preventDefault())};onUnmounted(()=>{scripts_map.value={},emitter.off("renderCharacter"),emitter.off("renderCharacter_forceUpdate"),emitter.off("updateCharacterView"),document.removeEventListener("keydown",$),clearState(),r&&r(),g&&g(),setTool(""),updateCharacterListFromEditFile()});const V=(ae,re,oe)=>{gridChanged.value=!0,gridSettings$1.value.dx=ae,gridSettings$1.value.dy=re,gridSettings$1.value.centerSquareSize=oe},L=()=>{switch(r&&r(),tool.value){case"pen":r=initPen(canvas.value);break;case"select":r=initSelect(canvas.value);break;case"ellipse":r=initEllipse(canvas.value);break;case"rectangle":r=initRectangle(canvas.value);break;case"polygon":r=initPolygon(canvas.value);break;case"translateMover":r=initTranslateMover(canvas.value);break;case"coordsViewer":r=initCoordsViewer(canvas.value);break;case"glyphDragger":r=initGlyphDragger$1(canvas.value);break}};watch(tool,(ae,re)=>{if(n){switch(z(),tool.value){case"select":selectedComponentUUID.value&&renderSelectEditor(canvas.value);break;case"glyphDragger":selectedComponentUUID.value&&(r=initGlyphDragger$1(canvas.value),renderGlyphSelector$1(canvas.value));break}j(),L()}}),watch([editing$3,()=>editCharacterFile.value.selectedComponentsTree],()=>{selectedSubComponent.value&&g?(g(),editing$3.value=!1):editing$3.value&&(g=initLayoutResizer$1(canvas.value),renderLayoutEditor$1(canvas.value))},{deep:!0}),watch([()=>selectedComponent.value?.value?.layout,()=>SubComponentsRoot.value?.value?.layout],()=>{z(),editing$3.value&&(selectedComponent.value||SubComponentsRoot.value)&&renderLayoutEditor$1(canvas.value),tool.value==="select"&&renderSelectEditor(canvas.value),tool.value==="pen"&&renderPenEditor(canvas.value),j(),emitter.emit("renderPreviewCanvasByUUIDOnEditing",editCharacterFile.value.uuid)},{deep:!0}),watch([background$1,grid,fontRenderStyle],()=>{z()}),watch([editCharacterFile,selectedFile],()=>{if(!editCharacterFile.value||!n)return;const ae=canvas.value;ae.width=mapCanvasWidth(selectedFile.value.width),ae.height=mapCanvasHeight(selectedFile.value.height),ae.style.width=`${width$1.value*editCharacterFile.value.view.zoom/100}px`,ae.style.height=`${height$1.value*editCharacterFile.value.view.zoom/100}px`,setCanvas(ae),z(),j(),tool.value==="select"&&renderSelectEditor(canvas.value),tool.value==="pen"&&renderPenEditor(canvas.value),emitter.emit("renderPreviewCanvasByUUIDOnEditing",editCharacterFile.value.uuid)}),watch([points$1,editing$8],()=>{z(),tool.value==="select"&&renderSelectEditor(canvas.value),tool.value==="pen"&&renderPenEditor(canvas.value),editing$8.value&&renderPenEditor(canvas.value)}),watch([points,editing$7],()=>{z(),tool.value==="select"&&renderSelectEditor(canvas.value),tool.value==="pen"&&renderPenEditor(canvas.value),editing$7.value&&renderPolygonEditor(points,canvas.value)}),watch([ellipseX,ellipseY,radiusX,radiusY,editing$5],()=>{z(),tool.value==="select"&&renderSelectEditor(canvas.value),tool.value==="pen"&&renderPenEditor(canvas.value),editing$5.value&&renderEllipseEditor(canvas.value)}),watch([rectX,rectY,rectWidth,rectHeight,editing$6],()=>{z(),tool.value==="select"&&renderSelectEditor(canvas.value),tool.value==="pen"&&renderPenEditor(canvas.value),editing$6.value&&renderRectangleEditor(canvas.value)}),watch([editing$4,draggingJoint$2,putAtCoord$2,movingJoint$2],()=>{z(),j(),renderGlyphSelector$1(canvas.value),editing$4.value}),watch([selectedComponentUUID,componentsForCurrentCharacterFile,selectedComponent],()=>{editing$3.value=!1,z(),selectedComponentUUID.value&&(tool.value==="select"&&renderSelectEditor(canvas.value),tool.value==="pen"&&renderPenEditor(canvas.value),j(),emitter.emit("renderPreviewCanvasByUUIDOnEditing",editCharacterFile.value.uuid))}),watch([orderedListWithItemsForCurrentCharacterFile],()=>{z(),j(),tool.value==="select"&&renderSelectEditor(canvas.value),tool.value==="pen"&&renderPenEditor(canvas.value),emitter.emit("renderPreviewCanvasByUUIDOnEditing",editCharacterFile.value.uuid)}),watch([onPenEditMode],()=>{r&&r(),onPenEditMode&&tool.value==="select"&&L()}),watch([selectAnchor,selectPenPoint,hoverPenPoint],()=>{tool.value==="select"&&(z(),renderSelectEditor(canvas.value))});const z=()=>{render$1(canvas.value)},j=()=>{editCharacterFileOnDragging.value?(checkJoints.value&&(selectedSubComponentOnDragging$1.value?renderJoints(selectedSubComponentOnDragging$1.value,canvas.value):SubComponentsRootOnDragging$1.value?renderJoints(SubComponentsRootOnDragging$1.value,canvas.value):selectedComponentOnDragging$1.value&&renderJoints(selectedComponentOnDragging$1.value,canvas.value)),checkRefLines.value&&(selectedSubComponentOnDragging$1.value?renderRefLines(selectedSubComponentOnDragging$1.value,canvas.value):SubComponentsRootOnDragging$1.value?renderRefLines(SubComponentsRootOnDragging$1.value,canvas.value):selectedComponentOnDragging$1.value&&renderRefLines(selectedComponentOnDragging$1.value,canvas.value))):(checkJoints.value&&(selectedSubComponent.value?renderJoints(selectedSubComponent.value,canvas.value):SubComponentsRoot.value?renderJoints(SubComponentsRoot.value,canvas.value):selectedComponent.value&&selectedComponent.value!=="multi"&&renderJoints(selectedComponent.value,canvas.value)),checkRefLines.value&&(selectedSubComponent.value?renderRefLines(selectedSubComponent.value,canvas.value):SubComponentsRoot.value?renderRefLines(SubComponentsRoot.value,canvas.value):selectedComponent.value&&selectedComponent.value!=="multi"&&renderRefLines(selectedComponent.value,canvas.value))),draggingJoint$2.value&&renderGlyphSelector$1(canvas.value)};return(ae,re)=>(openBlock(),createElementBlock("section",_hoisted_1$E,[createBaseVNode("main",_hoisted_2$C,[withDirectives(createBaseVNode("div",_hoisted_3$n,[createVNode(MetricsController)],512),[[vShow,unref(tool)==="metrics"]]),withDirectives(createBaseVNode("div",_hoisted_4$k,[createVNode(GridController$1,{size:unref(gridSettings$1).size,dx:unref(gridSettings$1).dx,dy:unref(gridSettings$1).dy,centerSquareSize:unref(gridSettings$1).centerSquareSize,onChange:V},null,8,["size","dx","dy","centerSquareSize"])],512),[[vShow,unref(tool)==="grid"]]),withDirectives(createBaseVNode("div",{class:"edit-canvas-wrapper",style:normalizeStyle({display:unref(editPanelDisplay)==="edit"&&unref(tool)!=="grid"?"flex":"none"})},[withDirectives(createBaseVNode("canvas",{ref_key:"editCanvas",ref:y,class:normalizeClass({"edit-canvas-panel":!0,"pen-on-edit":unref(tool)==="pen","rectangle-on-edit":unref(tool)==="rectangle","ellipse-on-edit":unref(tool)==="ellipse","polygon-on-edit":unref(tool)==="polygon","rotate-left-top":unref(selectControl$2)==="rotate-left-top","rotate-right-top":unref(selectControl$2)==="rotate-right-top","rotate-left-bottom":unref(selectControl$2)==="rotate-left-bottom","rotate-right-bottom":unref(selectControl$2)==="rotate-right-bottom","scale-left-top":unref(selectControl$2)==="scale-left-top"||unref(selectControl$1)==="scale-left-top","scale-right-top":unref(selectControl$2)==="scale-right-top"||unref(selectControl$1)==="scale-right-top","scale-left-bottom":unref(selectControl$2)==="scale-left-bottom"||unref(selectControl$1)==="scale-left-bottom","scale-right-bottom":unref(selectControl$2)==="scale-right-bottom"||unref(selectControl$1)==="scale-right-bottom","on-translate-move":unref(tool)==="translateMover"}),style:normalizeStyle({transform:`translate3d(${unref(editCharacterFile).view.translateX}px, ${unref(editCharacterFile).view.translateY}px, 0px)`}),width:unref(mapCanvasWidth)(unref(selectedFile).width),height:unref(mapCanvasHeight)(unref(selectedFile).height)},null,14,_hoisted_5$f),[[vShow,unref(tool)!=="grid"]])],4),[[vShow,unref(tool)!=="grid"]]),createBaseVNode("div",{class:"preview-canvas-wrapper",style:normalizeStyle({display:unref(editPanelDisplay)==="preview"?"flex":"none"})},[createBaseVNode("canvas",{ref_key:"previewCanvas",ref:k,class:"preview-canvas-panel",width:unref(mapCanvasWidth)(unref(width$1)),height:unref(mapCanvasHeight)(unref(height$1))},null,8,_hoisted_6$d)],4)])]))}}),EditPanel=_export_sfc(_sfc_main$F,[["__scopeId","data-v-b75ca350"]]),initLayoutResizer=e=>{let r=!1;const g=SubComponentsRoot$1.value?SubComponentsRoot$1.value.value:editGlyph.value,{ox:y,oy:k}=getOrigin$1();if(!g.layout||g.layout.type!=="rect")return;const $=j=>{r=!0},V=j=>{if(!g||!g?.layout)return;const{width:ae,height:re}=g.layout.params,oe=e.width/4+y,ue=e.height/4+k,le=mapCanvasX(oe-ae/2),de=mapCanvasY(ue-re/2),he=mapCanvasWidth(ae),_e=mapCanvasHeight(re),Ce=getCoord(j.offsetX),Ne=getCoord(j.offsetY),$e=j.offsetX*4,xe=j.offsetY*4,Ie={x:le,y:de},ze={x:Ce,y:de+_e},qe={x:le+he,y:de},Et={x:le+he,y:de+_e};if(r){switch(selectControl.value){case"scale-left-top":{const _n=Ce<oe?(oe-Ce)*2:ae,Dt=Ne<ue?(ue-Ne)*2:re;g.layout.params.width=_n,g.layout.params.height=Dt;break}case"scale-right-top":{const _n=Ce>oe?(Ce-oe)*2:ae,Dt=Ne<ue?(ue-Ne)*2:re;g.layout.params.width=_n,g.layout.params.height=Dt;break}case"scale-left-bottom":{const _n=Ce<oe?(oe-Ce)*2:ae,Dt=Ne>ue?(Ne-ue)*2:re;g.layout.params.width=_n,g.layout.params.height=Dt;break}case"scale-right-bottom":{const _n=Ce>oe?(Ce-oe)*2:ae,Dt=Ne>ue?(Ne-ue)*2:re;g.layout.params.width=_n,g.layout.params.height=Dt;break}}executeScript(g),emitter.emit("renderGlyphPreviewCanvasByUUID",g.uuid),emitter.emit("renderGlyph",!0)}r||(distance$g($e,xe,Ie.x,Ie.y)<=20?selectControl.value="scale-left-top":distance$g($e,xe,qe.x,qe.y)<=20?selectControl.value="scale-right-top":distance$g($e,xe,ze.x,ze.y)<=20?selectControl.value="scale-left-bottom":distance$g($e,xe,Et.x,Et.y)<=20?selectControl.value="scale-right-bottom":selectControl.value="null")},L=j=>{r=!1};return e?.addEventListener("mousedown",$),document.addEventListener("mousemove",V),document.addEventListener("mouseup",L),()=>{e?.removeEventListener("mousedown",$),document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",L)}},renderLayoutEditor=e=>{const n=SubComponentsRoot$1.value?SubComponentsRoot$1.value.value:editGlyph.value,{ox:r,oy:g}=getOrigin$1(),y=5;if(n.layout&&n.layout.type==="rect"){const{width:k,height:$}=n.layout.params,V=e.width/4+r-k/2,L=e.height/4+g-$/2,z=mapCanvasX(V),j=mapCanvasY(L),ae=mapCanvasWidth(k),re=mapCanvasHeight($),oe=e?.getContext("2d");oe.strokeStyle="#79bbff",oe.translate(z+ae/2,j+re/2),oe.translate(-(z+ae/2),-(j+re/2)),oe.strokeRect(z,j,ae,re),oe.strokeRect(z-y,j-y,y*2,y*2),oe.strokeRect(z+ae-y,j-y,y*2,y*2),oe.strokeRect(z-y,j+re-y,y*2,y*2),oe.strokeRect(z+ae-y,j+re-y,y*2,y*2),oe.setTransform(1,0,0,1,0,0)}},getOrigin$1=()=>{if(SubComponentsRoot$1.value){let{ox:e,oy:n}=selectedComponent$1.value,r=selectedComponent$1.value;for(let g=1;g<editGlyph.value.selectedComponentsTree.length-1;g++){const y=editGlyph.value.selectedComponentsTree[g],k=selectedItemByUUID(r.value.components,y);r=k,e+=k.ox,n+=k.oy}return{ox:e,oy:n}}return{ox:0,oy:0}},editing=ref(!1),setEditing=e=>{editing.value=e},draggingJoint=ref(null),putAtCoord=ref(null),movingJoint=ref(null),editGlyphOnDragging=ref(null);computed(()=>{if(!editGlyphOnDragging.value)return null;const e=editGlyphOnDragging.value;if(!editGlyph.value?.selectedComponentsTree||!editGlyph?.selectedComponentsTree.length)return null;let n=null;for(let g=0;g<editGlyph.value?.selectedComponentsTree.length-1;g++){const y=editGlyph.value?.selectedComponentsTree[g];n?n=selectedItemByUUID(n.value.components,y):n=selectedItemByUUID(e.components,y)}return n.value.components.map(g=>selectedItemByUUID(n.value.components,g.uuid))});const SubComponentsRootOnDragging=computed(()=>{if(!editGlyphOnDragging.value)return null;const e=editGlyphOnDragging.value;if(!editGlyph.value?.selectedComponentsTree||!editGlyph.value?.selectedComponentsTree.length)return null;let n=null;for(let r=0;r<editGlyph.value?.selectedComponentsTree.length-1;r++){const g=editGlyph.value?.selectedComponentsTree[r];n?n=selectedItemByUUID(n.value.components,g):n=selectedItemByUUID(e.components,g)}return n}),selectedSubComponentOnDragging=computed(()=>{let e=null;if(!editGlyphOnDragging.value)e=null;else{const n=editGlyphOnDragging.value;if(!editGlyph.value?.selectedComponentsTree||!editGlyph.value?.selectedComponentsTree.length)e=null;else{let r=null;for(let y=0;y<editGlyph.value?.selectedComponentsTree.length-1;y++){const k=editGlyph.value?.selectedComponentsTree[y];r?r=selectedItemByUUID(r.value.components,k):r=selectedItemByUUID(n.components,k)}const g=editGlyph.value?.selectedComponentsTree[editGlyph.value?.selectedComponentsTree.length-1];g!=="null"&&(e=selectedItemByUUID(r.value.components,g))}}return e}),selectedComponentsOnDragging=computed(()=>{if(!editGlyphOnDragging.value)return null;const e=editGlyphOnDragging.value;return editGlyph.value?.selectedComponentsUUIDs.map(r=>traverseComponents(e.components,r))}),selectedComponentOnDragging=computed(()=>!selectedComponentsOnDragging.value||selectedComponentsOnDragging.value.length===0?null:selectedComponentsOnDragging.value.length===1?selectedComponentsOnDragging.value[0]:"multi"),getBound$1=e=>{let n=1/0,r=1/0,g=-1/0,y=-1/0;return e.map(k=>{const{x:$,y:V}=k;$<n&&(n=$),$>g&&(g=$),V<r&&(r=V),V>y&&(y=V)}),{x:n,y:r,w:g-n,h:y-r}},distance$1=(e,n,r,g)=>Math.sqrt((e-r)*(e-r)+(n-g)*(n-g)),addScript=e=>{selectedSubComponentOnDragging.value?selectedSubComponentOnDragging.value.value:selectedComponentOnDragging?.value?.value;const n=selectedSubComponentOnDragging.value?selectedSubComponentOnDragging.value:selectedComponentOnDragging?.value,r=1e3;if(editGlyphOnDragging.value.glyph_script||(editGlyphOnDragging.value.glyph_script={}),dragOption.value==="default"&&!selectedSubComponentOnDragging.value){if(editGlyphOnDragging.value?.glyph_script&&editGlyphOnDragging.value?.glyph_script[n.uuid]){delete editGlyphOnDragging.value?.glyph_script[n.uuid];return}}else if(dragOption.value==="default"&&selectedSubComponentOnDragging.value){if(SubComponentsRootOnDragging.value.value?.glyph_script&&SubComponentsRootOnDragging.value.value?.glyph_script[n.uuid]){delete SubComponentsRootOnDragging.value.value?.glyph_script[n.uuid];return}}else if(dragOption.value==="layout"&&!selectedSubComponentOnDragging.value){if(draggingJoint.value&&putAtCoord.value){let g=null,y=0,k=0,$=1/0;const{x:V,y:L}=putAtCoord.value;for(let ae=0;ae<e.length;ae++){const re=e[ae],oe=distance$1(V,L,re.x,re.y);oe<$&&($=oe,g=re,y=V-g.x,k=L-g.y)}let j=`${`const ratio_coord = window.character.getRatioCoords(window.character.getLayoutByID('${g.id}'),${g.col},${g.row},${g.layout.coordsSegment})`};`;j+=`if (window.character.getComponent('${n.name}')) { window.character.getComponent('${n.name}').ox = ratio_coord.x+${y} - window.character.getGlyph('${n.name}')?.getJoint('${draggingJoint.value.name}')?.x; }`,j+=`if (window.character.getComponent('${n.name}')) { window.character.getComponent('${n.name}').oy = ratio_coord.y+${k} - window.character.getGlyph('${n.name}')?.getJoint('${draggingJoint.value.name}')?.y; }`,editGlyphOnDragging.value.glyph_script[n.uuid]=j,executeScript(editGlyphOnDragging.value)}else if(putAtCoord.value){let g=null,y=0,k=0,$=1/0;const{x:V,y:L}=putAtCoord.value;for(let ae=0;ae<e.length;ae++){const re=e[ae],oe=distance$1(V,L,re.x,re.y);oe<$&&($=oe,g=re,y=V-g.x,k=L-g.y)}const j=`${`const ratio_coord = window.character.getRatioCoords(window.character.getLayoutByID('${g.id}'),${g.col},${g.row},${g.layout.coordsSegment})`};window.character.getComponent('${n.name}')?.ox = ratio_coord.x + ${y} - ${r/2};window.character.getComponent('${n.name}')?.oy = ratio_coord.y + ${k} - ${r/2}`;editGlyphOnDragging.value.glyph_script[n.uuid]=j,executeScript(editGlyphOnDragging.value)}}else if(dragOption.value==="layout"&&selectedSubComponentOnDragging.value){SubComponentsRootOnDragging.value.value.glyph_script||(SubComponentsRootOnDragging.value.value.glyph_script={});const{ox:g,oy:y}=getOrigin2();if(draggingJoint.value&&putAtCoord.value){const{x:k,y:$}=putAtCoord.value,V=getRatioLayout2(SubComponentsRootOnDragging.value.value,"width"),L=getRatioLayout2(SubComponentsRootOnDragging.value.value,"height"),z=(k-(r-V)/2-g)/V,j=($-(r-L)/2-y)/L;selectedSubComponentOnDragging.value.value._o.getJoint(`${draggingJoint.value.name}`)?.x;let ae=`if (window.glyph.getComponent('${n.name}')) { window.glyph.getComponent('${n.name}').ox = (${r} - window.glyph.getRatioLayout('width')) / 2 + window.glyph.getRatioLayout('width') * ${z} - window.glyph.getGlyph('${n.name}')?.getJoint('${draggingJoint.value.name}')?.x; }`;ae+=`if (window.glyph.getComponent('${n.name}')) { window.glyph.getComponent('${n.name}').oy = (${r} - window.glyph.getRatioLayout('height')) / 2 + window.glyph.getRatioLayout('height') * ${j} - window.glyph.getGlyph('${n.name}')?.getJoint('${draggingJoint.value.name}')?.y; }`,SubComponentsRootOnDragging.value.value.glyph_script[n.uuid]=ae}else if(putAtCoord.value){const{x:k,y:$}=putAtCoord.value,V=k-r/2,L=$-r/2,z=getRatioLayout2(SubComponentsRootOnDragging.value.value,"width"),j=getRatioLayout2(SubComponentsRootOnDragging.value.value,"height"),ae=(V-(r-z)/2-g)/z,re=(L-(r-j)/2-y)/j;let oe=`if (window.glyph.getComponent('${n.name}')) { window.glyph.getComponent('${n.name}').ox = (${r} - window.glyph.getRatioLayout('width')) / 2 + window.glyph.getRatioLayout('width') * ${ae}; }`;oe+=`if (window.glyph.getComponent('${n.name}')) { window.glyph.getComponent('${n.name}').oy = (${r} - window.glyph.getRatioLayout('height')) / 2 + window.glyph.getRatioLayout('height') * ${re}; }`,SubComponentsRootOnDragging.value.value.glyph_script[n.uuid]=oe}executeScript(SubComponentsRootOnDragging.value.value)}emitter.emit("renderGlyph",!0)},initGlyphDragger=e=>{let n,r,g,y,$=!1,V=!1,L=-1,z=-1,j=-1,ae=-1,re=[];const oe=he=>{if(!draggable$1.value)return;editGlyphOnDragging.value=clone(editGlyph.value);for(let xe=0;xe<editGlyphOnDragging.value.components.length;xe++){const Ie=editGlyphOnDragging.value.components[xe];Ie.type==="glyph"&&executeScript(Ie.value)}let _e=[],Ce=null;if(selectedSubComponentOnDragging.value?(_e=getJoints$1(selectedComponentOnDragging?.value,selectedSubComponentOnDragging.value.uuid),Ce=selectedSubComponentOnDragging.value.value):selectedComponentOnDragging?.value&&(_e=getJoints$1(selectedComponentOnDragging?.value,selectedComponentOnDragging?.value.uuid),Ce=selectedComponentOnDragging?.value?.value),!Ce||!Ce._o)return;re=[],j=getCoord(he.offsetX),ae=getCoord(he.offsetY);const Ne=20;if(checkJoints.value)for(let xe=0;xe<_e.length;xe++){const{x:Ie,y:ze}=_e[xe];distance$1(Ie,ze,j,ae)<=Ne&&(draggingJoint.value=_e[xe],Ce._o.onSkeletonDragStart&&Ce._o.onSkeletonDragStart({draggingJoint:draggingJoint.value,deltaX:0,deltaY:0}))}setEditing(!0),$=!0,L=getCoord(he.offsetX),z=getCoord(he.offsetY);const $e=getOrigin();n=$e.ox,r=$e.oy,g=selectedSubComponentOnDragging.value?selectedSubComponentOnDragging.value.ox:selectedComponentOnDragging.value.ox,y=selectedSubComponentOnDragging.value?selectedSubComponentOnDragging.value.oy:selectedComponentOnDragging.value.oy,window.addEventListener("mouseup",le)},ue=he=>{const _e=getCoord(he.offsetX)-L,Ce=getCoord(he.offsetY)-z;let Ne=null;if(editGlyphOnDragging.value&&selectedSubComponentOnDragging.value?Ne=selectedSubComponentOnDragging.value.value:editGlyphOnDragging.value&&selectedComponentOnDragging?.value?Ne=selectedComponentOnDragging?.value?.value:!editGlyphOnDragging.value&&selectedSubComponent$1.value?Ne=selectedSubComponent$1.value.value:!editGlyphOnDragging.value&&selectedComponent$1?.value&&(Ne=selectedComponent$1?.value?.value),V=!0,$)if(draggingJoint.value)if(Ne._o?.onSkeletonDrag)Ne._o.onSkeletonDrag({draggingJoint:draggingJoint.value,deltaX:_e,deltaY:Ce}),emitter.emit("renderGlyph");else if(putAtCoord.value={x:n+draggingJoint.value.x+_e,y:r+draggingJoint.value.y+Ce},selectedSubComponentOnDragging.value){addScript();for(let $e=0;$e<editGlyphOnDragging.value.components.length;$e++)editGlyphOnDragging.value.components[$e].uuid===selectedComponentUUID$1.value&&(editGlyphOnDragging.value.components[$e].ox=g+_e,editGlyphOnDragging.value.components[$e].oy=y+Ce)}else{addScript();for(let $e=0;$e<editGlyphOnDragging.value.components.length;$e++)editGlyphOnDragging.value.components[$e].uuid===selectedComponentUUID$1.value&&(editGlyphOnDragging.value.components[$e].ox=g+_e,editGlyphOnDragging.value.components[$e].oy=y+Ce)}else if(putAtCoord.value={x:n+_e+1e3/2,y:r+Ce+1e3/2},selectedSubComponentOnDragging.value)addScript(),modifySubComponent$1({ox:g+_e,oy:y+Ce});else{for(let $e=0;$e<editGlyphOnDragging.value.components.length;$e++)editGlyphOnDragging.value.components[$e].uuid===selectedComponentUUID$1.value&&(editGlyphOnDragging.value.components[$e].ox=g+_e,editGlyphOnDragging.value.components[$e].oy=y+Ce);emitter.emit("renderGlyph")}else if(checkJoints.value){let $e=[];if(selectedSubComponent$1.value?$e=getJoints$1(selectedComponent$1?.value,selectedSubComponent$1.value.uuid):selectedComponent$1?.value&&($e=getJoints$1(selectedComponent$1?.value,selectedComponent$1?.value.uuid)),!Ne)return;const xe=10;let Ie=!1;const ze=getCoord(he.offsetX),qe=getCoord(he.offsetY);for(let Et=0;Et<$e.length;Et++){const{x:_n,y:Dt}=$e[Et];distance$1(_n,Dt,ze,qe)<=xe&&(movingJoint.value=$e[Et],Ie=!0)}!Ie&&(movingJoint.value=null)}},le=he=>{let _e=null;selectedSubComponentOnDragging.value?_e=selectedSubComponentOnDragging.value.value:selectedComponentOnDragging?.value&&(_e=selectedComponentOnDragging?.value?.value);const Ce=getCoord(he.offsetX)-L,Ne=getCoord(he.offsetY)-z;_e._o?.onSkeletonDragEnd&&$&&_e._o.onSkeletonDragEnd({draggingJoint:draggingJoint.value,deltaX:Ce,deltaY:Ne}),window.removeEventListener("mouseup",le),setEditing(!1),V&&addScript(re),$=!1,V=!1,j=-1,ae=-1,L=0,z=0,putAtCoord.value=null,draggingJoint.value=null,editGlyph.value.glyph_script=clone(editGlyphOnDragging.value.glyph_script),editGlyph.value.components=clone(editGlyphOnDragging.value.components),editGlyphOnDragging.value=null,emitter.emit("renderPreviewCanvasByUUIDOnEditing",editGlyph.value.uuid)};return e.addEventListener("mousedown",oe),e.addEventListener("mousemove",ue),()=>{e.removeEventListener("mousedown",oe),e.removeEventListener("mousemove",ue),editGlyphOnDragging.value=null,setEditing(!1)}},renderGlyphSelector=(e,n=!1)=>{let r=null,g=null;if(editGlyphOnDragging.value&&selectedSubComponentOnDragging.value?(r=selectedSubComponentOnDragging.value.value,g=selectedSubComponentOnDragging.value):editGlyphOnDragging.value&&selectedComponentOnDragging?.value?(r=selectedComponentOnDragging?.value?.value,g=selectedComponentOnDragging.value):!editGlyphOnDragging.value&&selectedSubComponent$1.value?(r=selectedSubComponent$1.value.value,g=selectedSubComponent$1.value):!editGlyphOnDragging.value&&selectedComponent$1?.value&&(r=selectedComponent$1?.value?.value,g=selectedComponent$1.value),!r)return;getOrigin();let y=getJoints$1(g,g.uuid);const k=L=>{for(let z=0;z<y.length;z++)if(y[z].name===L)return y[z];return{x:0,y:0}};getBound$1(y);const $=5,V=e.getContext("2d");if(movingJoint.value&&checkJoints.value){const{x:z,y:j}=k(movingJoint.value.name),ae=mapCanvasX(z),re=mapCanvasY(j);V.fillStyle="red",V.fillRect(ae-10,re-10,2*10,2*10)}if(draggingJoint.value&&checkJoints.value){const{x:L,y:z}=k(draggingJoint.value.name),j=10,ae=mapCanvasX(L),re=mapCanvasY(z);V.fillStyle="red",V.fillRect(ae-j,re-j,2*j,2*j)}if(putAtCoord.value&&putAtCoord.value.id){const{x:L,y:z}=putAtCoord.value,j=mapCanvasX(L),ae=mapCanvasY(z);V.fillStyle="red",V.fillRect(j-$,ae-$,2*$,2*$)}},getOrigin=()=>{if(selectedSubComponentOnDragging.value){let{ox:e,oy:n}=selectedComponentOnDragging.value,r=selectedComponentOnDragging.value;for(let g=1;g<editGlyphOnDragging.value.selectedComponentsTree.length;g++){const y=editGlyphOnDragging.value.selectedComponentsTree[g],k=selectedItemByUUID(r.value.components,y);r=k,e+=k.ox,n+=k.oy}return{ox:e,oy:n}}else if(selectedSubComponent$1.value){let{ox:e,oy:n}=selectedComponent$1.value,r=selectedComponent$1.value;for(let g=1;g<editGlyph.value.selectedComponentsTree.length;g++){const y=editGlyph.value.selectedComponentsTree[g],k=selectedItemByUUID(r.value.components,y);r=k,e+=k.ox,n+=k.oy}return{ox:e,oy:n}}return{ox:editGlyphOnDragging.value?selectedComponentOnDragging.value.ox:selectedComponent$1.value.ox,oy:editGlyphOnDragging.value?selectedComponentOnDragging.value.oy:selectedComponent$1.value.oy}},getOrigin2=()=>{if(selectedSubComponentOnDragging.value){let{ox:e,oy:n}=selectedComponentOnDragging.value,r=selectedComponentOnDragging.value;for(let g=1;g<editGlyphOnDragging.value.selectedComponentsTree.length-1;g++){const y=editGlyphOnDragging.value.selectedComponentsTree[g],k=selectedItemByUUID(r.value.components,y);r=k,e+=k.ox,n+=k.oy}return{ox:e,oy:n}}else if(selectedSubComponent$1.value){let{ox:e,oy:n}=selectedComponent$1.value,r=selectedComponent$1.value;for(let g=1;g<editGlyph.value.selectedComponentsTree.length-1;g++){const y=editGlyph.value.selectedComponentsTree[g],k=selectedItemByUUID(r.value.components,y);r=k,e+=k.ox,n+=k.oy}return{ox:e,oy:n}}return{ox:editGlyphOnDragging.value?selectedComponentOnDragging.value.ox:selectedComponent$1.value.ox,oy:editGlyphOnDragging.value?selectedComponentOnDragging.value.oy:selectedComponent$1.value.oy}},getBound=e=>{let n=1/0,r=1/0,g=-1/0,y=-1/0;return e.map(k=>{const{x:$,y:V}=k;$<n&&(n=$),$>g&&(g=$),V<r&&(r=V),V>y&&(y=V)}),{x:n,y:r,w:g-n,h:y-r}},distance=(e,n,r,g)=>Math.sqrt((e-r)*(e-r)+(n-g)*(n-g)),getJoints=()=>editGlyphOnDragging$1.value?editGlyphOnDragging$1.value._o?.getJoints().map(n=>{const{x:r,y:g}=n.getCoords();return{name:n.name,x:r,y:g}}):editGlyph.value._o?.getJoints().map(n=>{const{x:r,y:g}=n.getCoords();return{name:n.name,x:r,y:g}}),initSkeletonDragger=e=>{let n=!1,r=-1,g=-1,y=-1,k=-1;const $=j=>{editGlyphOnDragging$1.value=clone(editGlyph.value);let ae=getJoints(),re=editGlyphOnDragging$1.value;if(!re||!re._o)return;y=getCoord(j.offsetX),k=getCoord(j.offsetY);const oe=20;for(let ue=0;ue<ae.length;ue++){const{x:le,y:de}=ae[ue];distance(le,de,y,k)<=oe&&(draggingJoint$1.value=ae[ue],re._o.onSkeletonDragStart&&re._o.onSkeletonDragStart({draggingJoint:draggingJoint$1.value,deltaX:0,deltaY:0}))}setEditing$1(!0),n=!0,r=getCoord(j.offsetX),g=getCoord(j.offsetY),window.addEventListener("mouseup",L)},V=j=>{const ae=getCoord(j.offsetX)-r,re=getCoord(j.offsetY)-g;let oe=editGlyphOnDragging$1.value;if(n)draggingJoint$1.value&&oe._o?.onSkeletonDrag&&(oe._o.onSkeletonDrag({draggingJoint:draggingJoint$1.value,deltaX:ae,deltaY:re}),emitter.emit("renderGlyph"));else{let ue=getJoints();const le=10;let de=!1;const he=getCoord(j.offsetX),_e=getCoord(j.offsetY);for(let Ce=0;Ce<ue.length;Ce++){const{x:Ne,y:$e}=ue[Ce];distance(Ne,$e,he,_e)<=le&&(movingJoint$1.value=ue[Ce],de=!0)}!de&&(movingJoint$1.value=null)}},L=j=>{let ae=editGlyphOnDragging$1.value;const re=getCoord(j.offsetX)-r,oe=getCoord(j.offsetY)-g;ae._o?.onSkeletonDragEnd&&n&&ae._o.onSkeletonDragEnd({draggingJoint:draggingJoint$1.value,deltaX:re,deltaY:oe}),window.removeEventListener("mouseup",L),setEditing$1(!1),n=!1,y=-1,k=-1,r=0,g=0,putAtCoord$1.value=null,draggingJoint$1.value=null,editGlyphOnDragging$1.value=null};return e.addEventListener("mousedown",$),e.addEventListener("mousemove",V),()=>{e.removeEventListener("mousedown",$),e.removeEventListener("mousemove",V),editGlyphOnDragging$1.value=null,setEditing$1(!1)}},renderSkeletonSelector=(e,n=!1)=>{let r=getJoints();const g=$=>{for(let V=0;V<r.length;V++)if(r[V].name===$)return r[V];return{x:0,y:0}};getBound(r);const y=5,k=e.getContext("2d");if(movingJoint$1.value){const{x:V,y:L}=g(movingJoint$1.value.name),z=mapCanvasX(V),j=mapCanvasY(L);k.fillStyle="red",k.fillRect(z-10,j-10,2*10,2*10)}if(draggingJoint$1.value){const{x:$,y:V}=g(draggingJoint$1.value.name),L=10,z=mapCanvasX($),j=mapCanvasY(V);k.fillStyle="red",k.fillRect(z-L,j-L,2*L,2*L)}if(putAtCoord$1.value&&putAtCoord$1.value.id){const{x:$,y:V}=putAtCoord$1.value,L=mapCanvasX($),z=mapCanvasY(V);k.fillStyle="red",k.fillRect(L-y,z-y,2*y,2*y)}},_hoisted_1$D={class:"edit-panel-wrapper"},_hoisted_2$B={class:"canvas-wrapper"},_hoisted_3$m=["width","height"],_hoisted_4$j=["width","height"],width=1e3,height=1e3,_sfc_main$E=defineComponent({__name:"GlyphEditPanel",setup(e){const n=ref(!1);let r=null,g=null;const y=ref(null),k=ref(null);onMounted(async()=>{document.addEventListener("keydown",$),tempScript(editGlyph.value),editStatus.value=Status.Glyph,executeScript(editGlyph.value);const ae=y.value;ae.style.width=`${500*editGlyph.value.view.zoom/100}px`,ae.style.height=`${500*editGlyph.value.view.zoom/100}px`,grid.precision=20,setCanvas(ae),checkJoints.value=!0,checkRefLines.value=!0,n.value=!0,L(),j(),emitter.on("renderGlyph",()=>{j(),V()}),emitter.on("renderGlyph_forceUpdate",()=>{const re=editGlyph.value._o?editGlyph.value._o:new CustomGlyph(editGlyph.value);renderGlyph(re,canvas.value,!0,!1,!1,!0)}),emitter.on("updateGlyphView",()=>{const re=canvas.value;re.style.width=`${500*editGlyph.value.view.zoom/100}px`,re.style.height=`${500*editGlyph.value.view.zoom/100}px`}),await nextTick(),selectedComponentUUID$1.value&&selectedComponent$1.value.type==="glyph"&&setTool("glyphDragger")});const $=ae=>{const re=navigator.userAgent.includes("Mac");(re&&ae.metaKey&&ae.key==="z"||!re&&ae.ctrlKey&&ae.key==="z")&&(ae.shiftKey?redo$2():undo$2(),ae.preventDefault())};onUnmounted(()=>{scripts_map.value={},emitter.off("renderGlyph"),emitter.off("renderGlyph_forceUpdate"),emitter.off("updateGlyphView"),document.removeEventListener("keydown",$),clearState(),editing$2.value=!1,r&&r(),g&&g(),setTool(""),updateGlyphListFromEditFile()});const V=()=>{editGlyphOnDragging.value?(checkJoints.value&&(selectedSubComponentOnDragging.value?renderJoints(selectedSubComponentOnDragging.value,canvas.value):SubComponentsRootOnDragging.value?renderJoints(SubComponentsRootOnDragging.value,canvas.value):selectedComponentOnDragging.value&&renderJoints(selectedComponentOnDragging.value,canvas.value)),checkRefLines.value&&(selectedSubComponentOnDragging.value?renderRefLines(selectedSubComponentOnDragging.value,canvas.value):SubComponentsRootOnDragging.value?renderRefLines(SubComponentsRootOnDragging.value,canvas.value):selectedComponentOnDragging.value&&renderRefLines(selectedComponentOnDragging.value,canvas.value))):((checkJoints.value||onSkeletonBind.value)&&(selectedSubComponent$1.value?renderJoints(selectedSubComponent$1.value,canvas.value):SubComponentsRoot$1.value?renderJoints(SubComponentsRoot$1.value,canvas.value):selectedComponent$1.value&&selectedComponent$1.value!=="multi"?renderJoints(selectedComponent$1.value,canvas.value):editGlyph.value._o&&editGlyph.value._o.renderJoints(canvas.value,{type:"all"})),(checkRefLines.value||onSkeletonBind.value)&&(selectedSubComponent$1.value?renderRefLines(selectedSubComponent$1.value,canvas.value):SubComponentsRoot$1.value?renderRefLines(SubComponentsRoot$1.value,canvas.value):selectedComponent$1.value&&selectedComponent$1.value!=="multi"?renderRefLines(selectedComponent$1.value,canvas.value):editGlyph.value._o&&editGlyph.value._o.renderRefLines(canvas.value,{type:"all"}))),draggingJoint.value&&renderGlyphSelector(canvas.value)},L=()=>{switch(r&&r(),tool.value){case"pen":r=initPen(canvas.value,!0);break;case"select":r=initSelect(canvas.value,10,!0);break;case"ellipse":r=initEllipse(canvas.value,!0);break;case"rectangle":r=initRectangle(canvas.value,!0);break;case"polygon":r=initPolygon(canvas.value,!0);break;case"translateMover":r=initTranslateMover(canvas.value,!0);break;case"coordsViewer":r=initCoordsViewer(canvas.value,!0);break;case"glyphDragger":r=initGlyphDragger(canvas.value);break}};watch(tool,(ae,re)=>{if(n){switch(j(),tool.value){case"select":selectedComponentUUID$1.value&&renderSelectEditor(canvas.value,10,!0);break;case"glyphDragger":selectedComponentUUID$1.value&&(r=initGlyphDragger(canvas.value),renderGlyphSelector(canvas.value));break;case"params":setSelectionForCurrentGlyph("");break}V(),L()}});let z=null;watch([onSkeletonDragging],()=>{onSkeletonDragging.value?(z=initSkeletonDragger(canvas.value),renderSkeletonSelector(canvas.value)):z&&z()}),watch([editing$2,()=>editGlyph.value.selectedComponentsTree],()=>{selectedSubComponent$1.value&&g?(g(),editing$2.value=!1):editing$2.value&&(g=initLayoutResizer(canvas.value),renderLayoutEditor(canvas.value))},{deep:!0}),watch([()=>selectedComponent$1.value?.value?.layout,()=>SubComponentsRoot$1.value?.value?.layout],()=>{j(),editing$2.value&&(selectedComponent$1.value||SubComponentsRoot$1.value)&&renderLayoutEditor(canvas.value),tool.value==="select"&&renderSelectEditor(canvas.value,10,!0),tool.value==="pen"&&renderPenEditor(canvas.value),V(),emitter.emit("renderGlyphPreviewCanvasByUUIDOnEditing",editGlyph.value.uuid)},{deep:!0}),watch([background$1,grid,fontRenderStyle],()=>{j()}),watch([editGlyph],()=>{if(!editGlyph.value||!n)return;const ae=canvas.value;ae.width=mapCanvasWidth(1e3),ae.height=mapCanvasHeight(1e3),ae.style.width=`${500*editGlyph.value.view.zoom/100}px`,ae.style.height=`${500*editGlyph.value.view.zoom/100}px`,setCanvas(ae),j(),V(),tool.value==="select"&&renderSelectEditor(canvas.value,10,!0),tool.value==="pen"&&renderPenEditor(canvas.value),emitter.emit("renderGlyphPreviewCanvasByUUIDOnEditing",editGlyph.value.uuid)}),watch([points$1,editing$8],()=>{j(),tool.value==="select"&&renderSelectEditor(canvas.value,10,!0),tool.value==="pen"&&renderPenEditor(canvas.value),editing$8.value&&renderPenEditor(canvas.value)}),watch([points,editing$7],()=>{j(),tool.value==="select"&&renderSelectEditor(canvas.value,10,!0),tool.value==="pen"&&renderPenEditor(canvas.value),editing$7.value&&renderPolygonEditor(points,canvas.value)}),watch([ellipseX,ellipseY,radiusX,radiusY,editing$5],()=>{j(),tool.value==="select"&&renderSelectEditor(canvas.value,10,!0),tool.value==="pen"&&renderPenEditor(canvas.value),editing$5.value&&renderEllipseEditor(canvas.value)}),watch([rectX,rectY,rectWidth,rectHeight,editing$6],()=>{j(),tool.value==="select"&&renderSelectEditor(canvas.value,10,!0),tool.value==="pen"&&renderPenEditor(canvas.value),editing$6.value&&renderRectangleEditor(canvas.value)}),watch([editing,draggingJoint,putAtCoord,movingJoint],()=>{j(),V(),renderGlyphSelector(canvas.value),editing.value}),watch([editing$1,draggingJoint$1,putAtCoord$1,movingJoint$1],()=>{j(),V(),renderSkeletonSelector(canvas.value),editing$1.value}),watch([selectedComponentUUID$1,componentsForCurrentGlyph,selectedComponent$1],()=>{editing$2.value=!1,j(),selectedComponentUUID$1.value&&(tool.value==="select"&&renderSelectEditor(canvas.value,10,!0),tool.value==="pen"&&renderPenEditor(canvas.value),V(),emitter.emit("renderGlyphPreviewCanvasByUUIDOnEditing",editGlyph.value.uuid))}),watch([orderedListWithItemsForCurrentGlyph],()=>{j(),V(),tool.value==="select"&&renderSelectEditor(canvas.value,10,!0),tool.value==="pen"&&renderPenEditor(canvas.value),emitter.emit("renderGlyphPreviewCanvasByUUIDOnEditing",editGlyph.value.uuid)}),watch([onPenEditMode],()=>{r&&r(),onPenEditMode&&tool.value==="select"&&L()}),watch([selectAnchor,selectPenPoint,hoverPenPoint],()=>{tool.value==="select"&&(j(),renderSelectEditor(canvas.value,10,!0))});const j=()=>{if(editGlyphOnDragging.value){const ae=editGlyphOnDragging.value._o?editGlyphOnDragging.value._o:new CustomGlyph(editGlyphOnDragging.value);renderGlyph(ae,canvas.value,!0,!1,!1)}else{const ae=editGlyph.value._o?editGlyph.value._o:new CustomGlyph(editGlyph.value);renderGlyph(ae,canvas.value,!0,!1,!1)}};return(ae,re)=>(openBlock(),createElementBlock("section",_hoisted_1$D,[createBaseVNode("main",_hoisted_2$B,[createBaseVNode("div",{class:"edit-canvas-wrapper",style:normalizeStyle({display:unref(editPanelDisplay)==="edit"?"flex":"none"})},[createBaseVNode("canvas",{ref_key:"editCanvas",ref:y,class:normalizeClass({"edit-canvas-panel":!0,"pen-on-edit":unref(tool)==="pen","rectangle-on-edit":unref(tool)==="rectangle","ellipse-on-edit":unref(tool)==="ellipse","polygon-on-edit":unref(tool)==="polygon","rotate-left-top":unref(selectControl$2)==="rotate-left-top","rotate-right-top":unref(selectControl$2)==="rotate-right-top","rotate-left-bottom":unref(selectControl$2)==="rotate-left-bottom","rotate-right-bottom":unref(selectControl$2)==="rotate-right-bottom","scale-left-top":unref(selectControl$2)==="scale-left-top"||unref(selectControl)==="scale-left-top","scale-right-top":unref(selectControl$2)==="scale-right-top"||unref(selectControl)==="scale-right-top","scale-left-bottom":unref(selectControl$2)==="scale-left-bottom"||unref(selectControl)==="scale-left-bottom","scale-right-bottom":unref(selectControl$2)==="scale-right-bottom"||unref(selectControl)==="scale-right-bottom","on-translate-move":unref(tool)==="translateMover"}),style:normalizeStyle({transform:`translate3d(${unref(editGlyph).view.translateX}px, ${unref(editGlyph).view.translateY}px, 0px)`}),width:unref(mapCanvasWidth)(width),height:unref(mapCanvasHeight)(height)},null,14,_hoisted_3$m)],4),createBaseVNode("div",{class:"preview-canvas-wrapper",style:normalizeStyle({display:unref(editPanelDisplay)==="preview"?"flex":"none"})},[createBaseVNode("canvas",{ref_key:"previewCanvas",ref:k,class:"preview-canvas-panel",width:unref(mapCanvasWidth)(width),height:unref(mapCanvasHeight)(height)},null,8,_hoisted_4$j)],4)])]))}}),GlyphEditPanel=_export_sfc(_sfc_main$E,[["__scopeId","data-v-7b63ab23"]]),_hoisted_1$C={class:"font-edit-pic-wrapper"},_hoisted_2$A={class:"top-bar"},_hoisted_3$l={class:"main"},_hoisted_4$i={class:"canvas-list-outer-wrapper"},_hoisted_5$e={class:"canvas-wrapper"},_hoisted_6$c=["width","height"],_hoisted_7$c={class:"canvas-wrapper"},_hoisted_8$c=["width","height"],_hoisted_9$c={class:"canvas-wrapper"},_hoisted_10$c=["width","height"],_hoisted_11$b={class:"canvas-wrapper"},_hoisted_12$b=["width","height"],_hoisted_13$9={class:"canvas-wrapper"},_hoisted_14$9=["width","height"],_hoisted_15$6={class:"canvas-wrapper"},_hoisted_16$6=["width","height"],_sfc_main$D=defineComponent({__name:"ThumbnailEditPanel",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=ref(null),k=ref(null),$=ref(null),V=ref(null),L=ref(null),z=ref(null),j=["thumbnail","bitmap","contours","curves","preview"],ae=()=>{const Dt=document.querySelector(".canvas-list-outer-wrapper"),Sn=Dt.offsetWidth,hn=Dt.offsetHeight;listWidth.value=Sn;const Vn=selectedFile.value.width,Mn=selectedFile.value.height;document.querySelectorAll(".canvas-wrapper").forEach(la=>{la.style.width=`${Sn/2}px`});const Nn=editCharacterPic.value.width,kn=editCharacterPic.value.height;let jn=Sn/2>Vn?Vn:Sn/2,Fn=jn*Mn/Vn;Fn>hn&&(Fn=hn,jn=Fn*Vn/Mn);let Tn=Sn/2>Vn?Vn:Sn/2,Hn=Tn*kn/Nn;Hn>hn&&(Hn=hn,Tn=Hn*Nn/kn),y.value.style.width=`${jn}px`,y.value.style.height=`${Fn}px`,k.value.style.width=`${jn}px`,k.value.style.height=`${Fn}px`,L.value.style.width=`${jn}px`,L.value.style.height=`${Fn}px`,z.value.style.width=`${jn}px`,z.value.style.height=`${Fn}px`,$.value.width=mapCanvasWidth(Nn),$.value.height=mapCanvasHeight(kn),$.value.style.width=`${Tn}px`,$.value.style.height=`${Hn}px`,$.value.height=mapCanvasHeight(kn),V.value.width=mapCanvasWidth(Nn),V.value.height=mapCanvasHeight(kn),V.value.style.width=`${Tn}px`,V.value.style.height=`${Hn}px`},re=()=>{if(step.value===1&&enableLocalBrush.value){let Dt="";g.value==="zh"?Dt="":g.value==="en"&&(Dt="In editing, try it later."),ElMessage(Dt);return}previewStatus.value=previewStatus.value<=0?j.length-1:previewStatus.value-1},oe=()=>{if(step.value===1&&enableLocalBrush.value){let Dt="";g.value==="zh"?Dt="":g.value==="en"&&(Dt="In editing, try it later."),ElMessage(Dt);return}previewStatus.value=previewStatus.value>=j.length-1?0:previewStatus.value+1},ue=()=>{const Dt=$.value.getContext("2d"),{img:Sn,width:hn,height:Vn}=editCharacterPic.value,Mn=Sn;Dt.drawImage(Mn,0,0,Mn.width,Mn.height,0,0,mapCanvasWidth(hn),mapCanvasWidth(Vn))},le=()=>{const Dt=V.value.getContext("2d"),{data:Sn,width:hn,height:Vn}=bitmap.value;for(let Mn=0;Mn<hn;Mn++)for(let $n=0;$n<Vn;$n++){const Nn=($n*hn+Mn)*4,kn=`rgba(${Sn[Nn]}, ${Sn[Nn+1]}, ${Sn[Nn]+2}, ${Sn[Nn+3]})`;Dt.fillStyle=kn,Dt.fillRect(mapCanvasX(Mn),mapCanvasY($n),mapCanvasWidth(1),mapCanvasHeight(1))}},de=()=>{const Dt=contoursComponents.value.map(Sn=>{const hn=clone(Sn);return hn.value.fillColor="rgba(1, 1, 1, 0)",hn});clearCanvas(L.value),renderCanvas(Dt,L.value)},he=()=>{const Dt=curvesComponents.value.map(Sn=>{const hn=clone(Sn);return hn.value.fillColor="rgba(1, 1, 1, 0)",hn});clearCanvas(z.value),renderCanvas(Dt,z.value)},_e=()=>{clearCanvas(y.value),renderCanvas(curvesComponents.value,y.value),clearCanvas(k.value),renderCanvas(curvesComponents.value,k.value,{fill:!0,offset:{x:0,y:0},scale:1,forceUpdate:!1})},Ce=()=>{_e(),ue(),le(),de(),he()},Ne=()=>{ue();const Sn=$.value.getContext("2d");Sn.strokeStyle="black",Sn.strokeRect(mapCanvasX(localBrushX.value),mapCanvasY(localBrushY.value),mapCanvasWidth(localBrushSize.value),mapCanvasHeight(localBrushSize.value))};onMounted(()=>{emitter.on("toggleLocalBrushEdit",Dt=>{const Sn=$.value;Dt?(document.addEventListener("mousemove",$e),Sn.addEventListener("mousedown",ze),Ce()):(document.removeEventListener("mousemove",$e),Sn.removeEventListener("mousedown",ze),Ce())}),ae(),window.addEventListener("resize",ae),Ce()}),watch([editCharacterPic],()=>{ue()}),watch([bitmap],()=>{le()}),watch([contoursComponents],()=>{de()}),watch([curvesComponents],()=>{he(),_e()});const $e=Dt=>{const Sn=$.value,hn=Number(Sn.style.width.split("px")[0]),Vn=Number(Sn.style.height.split("px")[0]),Mn=editCharacterPic.value.width,$n=editCharacterPic.value.height;localBrushX.value=Math.round(Dt.offsetX*Mn/hn),localBrushY.value=Math.round(Dt.offsetY*$n/Vn);const{thumbnailCanvas:Nn,thumbnailPixels:kn,processPixels:jn}=editCharacterPic.value,Fn=Nn.width,Tn=Nn.height,Hn=toBlackWhiteBitMap(kn,{r:localRThreshold.value,g:localGThreshold.value,b:localBThreshold.value},{x:localBrushX.value,y:localBrushY.value,size:localBrushSize.value,width:Fn,height:Tn}),la=clone(jn);for(let ca=localBrushX.value;ca<localBrushX.value+localBrushSize.value;ca++)for(let Zn=localBrushY.value;Zn<localBrushY.value+localBrushSize.value;Zn++){const Bn=(Zn*Fn+ca)*4;la[Bn]=Hn[Bn],la[Bn+1]=Hn[Bn+1],la[Bn+2]=Hn[Bn+2],la[Bn+3]=Hn[Bn+3]}setTimeout(()=>{const ca=V.value.getContext("2d");for(let Zn=0;Zn<Fn;Zn++)for(let Bn=0;Bn<Tn;Bn++){const Wn=(Bn*Fn+Zn)*4,da=`rgba(${la[Wn]}, ${la[Wn+1]}, ${la[Wn]+2}, ${la[Wn+3]})`;ca.fillStyle=da,ca.fillRect(mapCanvasX(Zn),mapCanvasY(Bn),mapCanvasWidth(1),mapCanvasHeight(1))}},10),Ne(),Ie&&ze()},xe=()=>{Ie=!1,window.removeEventListener("mouseup",xe)};let Ie=!1;const ze=()=>{Ie=!0;const{thumbnailCanvas:Dt,thumbnailPixels:Sn,processPixels:hn}=editCharacterPic.value,Vn=Dt.width,Mn=Dt.height,$n=toBlackWhiteBitMap(Sn,{r:localRThreshold.value,g:localGThreshold.value,b:localBThreshold.value},{x:localBrushX.value,y:localBrushY.value,size:localBrushSize.value,width:Vn,height:Mn});for(let Nn=localBrushX.value;Nn<localBrushX.value+localBrushSize.value;Nn++)for(let kn=localBrushY.value;kn<localBrushY.value+localBrushSize.value;kn++){const jn=(kn*Vn+Nn)*4;hn[jn]=$n[jn],hn[jn+1]=$n[jn+1],hn[jn+2]=$n[jn+2],hn[jn+3]=$n[jn+3]}setBitMap({data:hn,width:Vn,height:Mn}),window.addEventListener("mouseup",xe)};onBeforeUnmount(()=>{window.removeEventListener("resize",ae),emitter.off("toggleLocalBrushEdit");const Dt=$.value;document.removeEventListener("mousemove",$e),Dt.removeEventListener("mousedown",ze)});const qe=async()=>{const Dt=curvesComponents.value;prevEditStatus.value===Status.Edit?(addComponentsForCurrentCharacterFile(Dt),emitter.emit("renderPreviewCanvasByUUID",editCharacterFileUUID.value),Et(),setEditStatus(Status.Edit),await nextTick(),resetEditPic()):prevEditStatus.value===Status.Glyph&&(addComponentsForCurrentGlyph(Dt),emitter.emit("renderGlyphPreviewCanvasByUUID",editGlyphUUID.value),Et(),setEditStatus(Status.Glyph),await nextTick(),resetEditPic())},Et=()=>{enableLocalBrush.value=!1,rThreshold.value=128,gThreshold.value=128,bThreshold.value=128,emitter.emit("resetEditFontPic",!0)},_n=()=>{resetEditPic(),setEditStatus(Status.Edit)};return(Dt,Sn)=>{const hn=resolveComponent("el-button"),Vn=resolveComponent("el-button-group"),Mn=resolveComponent("el-icon");return openBlock(),createElementBlock("div",_hoisted_1$C,[createBaseVNode("header",_hoisted_2$A,[createVNode(Vn,{class:"btn-group"},{default:withCtx(()=>[createVNode(hn,{class:"btn delete-btn",onPointerdown:_n,size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.remove")),1)]),_:1}),createVNode(hn,{class:"btn reset-btn",onPointerdown:Et,size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.reset")),1)]),_:1}),createVNode(hn,{type:"primary",class:"btn confitm-btn",onPointerdown:qe,size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.picEditPanel.confirm")),1)]),_:1})]),_:1})]),createBaseVNode("main",_hoisted_3$l,[createBaseVNode("div",{class:"left-mover",onPointerdown:re},[createVNode(Mn,null,{default:withCtx(()=>[createVNode(unref(arrow_left_bold_default))]),_:1})],32),createBaseVNode("div",_hoisted_4$i,[createBaseVNode("div",{class:"canvas-list-wrapper",style:normalizeStyle({left:`${-unref(previewStatus)*unref(listWidth)/2}px`})},[createBaseVNode("div",_hoisted_5$e,[createBaseVNode("canvas",{class:"preview canvas",ref_key:"previewCanvas1",ref:y,width:unref(mapCanvasWidth)(unref(selectedFile).width),height:unref(mapCanvasHeight)(unref(selectedFile).height)},null,8,_hoisted_6$c)]),createBaseVNode("div",_hoisted_7$c,[createBaseVNode("canvas",{class:"thumbnail canvas",ref_key:"thumbnailCanvas",ref:$,width:unref(mapCanvasWidth)(unref(selectedFile).width),height:unref(mapCanvasHeight)(unref(selectedFile).height)},null,8,_hoisted_8$c)]),createBaseVNode("div",_hoisted_9$c,[createBaseVNode("canvas",{class:"bitmap canvas",ref_key:"bitmapCanvas",ref:V,width:unref(mapCanvasWidth)(unref(selectedFile).width),height:unref(mapCanvasHeight)(unref(selectedFile).height)},null,8,_hoisted_10$c)]),createBaseVNode("div",_hoisted_11$b,[createBaseVNode("canvas",{class:"contours canvas",ref_key:"contoursCanvas",ref:L,width:unref(mapCanvasWidth)(unref(selectedFile).width),height:unref(mapCanvasHeight)(unref(selectedFile).height)},null,8,_hoisted_12$b)]),createBaseVNode("div",_hoisted_13$9,[createBaseVNode("canvas",{class:"curves canvas",ref_key:"curvesCanvas",ref:z,width:unref(mapCanvasWidth)(unref(selectedFile).width),height:unref(mapCanvasHeight)(unref(selectedFile).height)},null,8,_hoisted_14$9)]),createBaseVNode("div",_hoisted_15$6,[createBaseVNode("canvas",{class:"preview canvas",ref_key:"previewCanvas2",ref:k,width:unref(mapCanvasWidth)(unref(selectedFile).width),height:unref(mapCanvasHeight)(unref(selectedFile).height)},null,8,_hoisted_16$6)])],4)]),createBaseVNode("div",{class:"right-mover",onPointerdown:oe},[createVNode(Mn,null,{default:withCtx(()=>[createVNode(unref(arrow_right_bold_default))]),_:1})],32)])])}}}),ThumbnailEditPanel=_export_sfc(_sfc_main$D,[["__scopeId","data-v-5bfa19b8"]]),_hoisted_1$B={class:"font-panel"},_hoisted_2$z={class:"font-panel-empty"},_hoisted_3$k={class:"float-part"},_hoisted_4$h={class:"list-switch"},_sfc_main$C=defineComponent({__name:"FontMainPanel",setup(e){const{t:n}=useI18n();return(r,g)=>(openBlock(),createElementBlock("main",_hoisted_1$B,[withDirectives(createBaseVNode("div",_hoisted_2$z,null,512),[[vShow,!unref(selectedFile)]]),withDirectives(createVNode(_sfc_main$M,{class:"character-list"},null,512),[[vShow,unref(selectedFile)]]),withDirectives(createBaseVNode("div",_hoisted_3$k,[withDirectives(createVNode(_sfc_main$K,{class:"stroke-glyph-list"},null,512),[[vShow,unref(selectedFile)&&unref(editStatus)===unref(Status).StrokeGlyphList]]),withDirectives(createVNode(_sfc_main$J,{class:"radical-glyph-list"},null,512),[[vShow,unref(selectedFile)&&unref(editStatus)===unref(Status).RadicalGlyphList]]),withDirectives(createVNode(_sfc_main$I,{class:"comp-glyph-list"},null,512),[[vShow,unref(selectedFile)&&unref(editStatus)===unref(Status).CompGlyphList]]),withDirectives(createVNode(_sfc_main$L,{class:"glyph-list"},null,512),[[vShow,unref(selectedFile)&&unref(editStatus)===unref(Status).GlyphList]]),unref(selectedFile)&&unref(editStatus)===unref(Status).Edit?(openBlock(),createBlock(EditPanel,{key:0})):unref(selectedFile)&&unref(editStatus)===unref(Status).Glyph?(openBlock(),createBlock(GlyphEditPanel,{key:1})):unref(selectedFile)&&unref(editStatus)===unref(Status).Pic?(openBlock(),createBlock(ThumbnailEditPanel,{key:2})):createCommentVNode("",!0)],512),[[vShow,unref(editStatus)!==unref(Status).CharacterList&&unref(selectedFile)]]),withDirectives(createBaseVNode("div",_hoisted_4$h,[createBaseVNode("span",{class:normalizeClass(["character-list",{selected:unref(editStatus)===unref(Status).CharacterList}]),onPointerdown:g[0]||(g[0]=y=>editStatus.value=unref(Status).CharacterList)},toDisplayString$1(unref(n)("programming.character")),35),createBaseVNode("span",{class:normalizeClass(["stroke-glyph-list",{selected:unref(editStatus)===unref(Status).StrokeGlyphList}]),onPointerdown:g[1]||(g[1]=y=>editStatus.value=unref(Status).StrokeGlyphList)},toDisplayString$1(unref(n)("programming.stroke")),35),createBaseVNode("span",{class:normalizeClass(["radical-glyph-list",{selected:unref(editStatus)===unref(Status).RadicalGlyphList}]),onPointerdown:g[2]||(g[2]=y=>editStatus.value=unref(Status).RadicalGlyphList)},toDisplayString$1(unref(n)("programming.radical")),35),createBaseVNode("span",{class:normalizeClass(["comp-glyph-list",{selected:unref(editStatus)===unref(Status).CompGlyphList}]),onPointerdown:g[3]||(g[3]=y=>editStatus.value=unref(Status).CompGlyphList)},toDisplayString$1(unref(n)("programming.comp")),35),createBaseVNode("span",{class:normalizeClass(["glyph-list",{selected:unref(editStatus)===unref(Status).GlyphList}]),onPointerdown:g[4]||(g[4]=y=>editStatus.value=unref(Status).GlyphList)},toDisplayString$1(unref(n)("programming.glyph_comp")),35)],512),[[vShow,unref(editStatus)===unref(Status).StrokeGlyphList||unref(editStatus)===unref(Status).CompGlyphList||unref(editStatus)===unref(Status).RadicalGlyphList||unref(editStatus)===unref(Status).GlyphList||unref(editStatus)===unref(Status).CharacterList]])]))}}),FontPanel=_export_sfc(_sfc_main$C,[["__scopeId","data-v-dc007d71"]]),_hoisted_1$A={class:"form-wrapper"},_hoisted_2$y={class:"dialog-footer"},_sfc_main$B=defineComponent({__name:"AddTextDialog",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=ref(""),k=()=>{setAddTextDialogVisible(!1)},$=()=>{if(!y.value){let z="";g.value==="zh"?z="":g.value==="en"&&(z="Please input character's name."),ElMessage(z);return}if(y.value&&y.value.length>1){let z="";g.value==="zh"?z="":g.value==="en"&&(z="Please input a single character."),ElMessage(z);return}const L=y.value.split("").filter(z=>z!==".notdef");L.length!==y.value.split("").length&&ElMessage({message:".notdef",type:"warning"}),L.map(z=>{const j={uuid:genUUID(),text:z,unicode:toUnicode(z),components:[]},ae=genUUID(),re={uuid:ae,type:"text",character:j,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},info:{gridSettings:{dx:0,dy:0,centerSquareSize:selectedFile.value.width/3,size:selectedFile.value.width,default:!0},useSkeletonGrid:!1,layout:"",layoutTree:[]},script:`function script_${ae.replaceAll("-","_")} (character, constants, FP) {
	//Todo something
}`};addCharacterForCurrentFile(re),addCharacterTemplate(generateCharacterTemplate(re))}),y.value="",setAddTextDialogVisible(!1)},V=L=>{L.preventDefault(),$()};return(L,z)=>{const j=resolveComponent("el-input"),ae=resolveComponent("el-form-item"),re=resolveComponent("el-button"),oe=resolveComponent("el-dialog");return openBlock(),createBlock(oe,{modelValue:unref(addTextDialogVisible),"onUpdate:modelValue":z[1]||(z[1]=ue=>isRef(addTextDialogVisible)?addTextDialogVisible.value=ue:null),title:unref(n)("dialogs.addTextDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$y,[createVNode(re,{onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.addTextDialog.cancel")),1)]),_:1}),createVNode(re,{type:"primary",onPointerdown:$},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.addTextDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$A,[createVNode(ae,{label:unref(n)("dialogs.addTextDialog.title")},{default:withCtx(()=>[createVNode(j,{modelValue:y.value,"onUpdate:modelValue":z[0]||(z[0]=ue=>y.value=ue),onKeyup:withKeys(V,["enter"])},null,8,["modelValue","onKeyup"])]),_:1},8,["label"])])]),_:1},8,["modelValue","title"])}}}),_hoisted_1$z={class:"form-wrapper"},_hoisted_2$x={class:"dialog-footer"},_sfc_main$A=defineComponent({__name:"editGlyphDialog",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=ref(""),k=()=>{setEditGlyphDialogVisible(!1)},$=()=>{if(!y.value){let L="";g.value==="zh"?L="":g.value==="en"&&(L="Please input glyph's name."),ElMessage(L);return}modifyGlyph(editedGlyphUUID.value,{name:y.value}),emitter.emit("updateGlyphInfoPreviewCanvasByUUID",editedGlyphUUID.value),y.value="",setEditGlyphDialogVisible(!1)},V=L=>{L.preventDefault(),$()};return(L,z)=>{const j=resolveComponent("el-input"),ae=resolveComponent("el-form-item"),re=resolveComponent("el-button"),oe=resolveComponent("el-dialog");return openBlock(),createBlock(oe,{modelValue:unref(editGlyphDialogVisible),"onUpdate:modelValue":z[1]||(z[1]=ue=>isRef(editGlyphDialogVisible)?editGlyphDialogVisible.value=ue:null),title:unref(n)("dialogs.editGlyphDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$x,[createVNode(re,{onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.editGlyphDialog.cancel")),1)]),_:1}),createVNode(re,{type:"primary",onPointerdown:$},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.copyGlyphDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$z,[createVNode(ae,{label:unref(n)("dialogs.editGlyphDialog.glyphName")},{default:withCtx(()=>[createVNode(j,{modelValue:y.value,"onUpdate:modelValue":z[0]||(z[0]=ue=>y.value=ue),onKeyup:withKeys(V,["enter"])},null,8,["modelValue","onKeyup"])]),_:1},8,["label"])])]),_:1},8,["modelValue","title"])}}}),_hoisted_1$y={class:"form-wrapper"},_hoisted_2$w={class:"dialog-footer"},_sfc_main$z=defineComponent({__name:"copyGlyphDialog",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=ref(""),k=()=>{setCopyGlyphDialogVisible(!1)},$=()=>{if(!y.value){let ae="";g.value==="zh"?ae="":g.value==="en"&&(ae="Please input glyph's name."),ElMessage(ae);return}let L=clone(getGlyphByUUID(copiedGlyphUUID.value));const z=L.uuid,j=genUUID();L.uuid=j,L.name=y,L.script=L.script.replaceAll(z.replaceAll("-","_"),j.replaceAll("-","_")),addGlyph(L,editStatus.value),addGlyphTemplate(L,editStatus.value),emitter.emit("renderPreviewCanvasByUUID",L.uuid),y.value="",setCopyGlyphDialogVisible(!1)},V=L=>{L.preventDefault(),$()};return(L,z)=>{const j=resolveComponent("el-input"),ae=resolveComponent("el-form-item"),re=resolveComponent("el-button"),oe=resolveComponent("el-dialog");return openBlock(),createBlock(oe,{modelValue:unref(copyGlyphDialogVisible),"onUpdate:modelValue":z[1]||(z[1]=ue=>isRef(copyGlyphDialogVisible)?copyGlyphDialogVisible.value=ue:null),title:unref(n)("dialogs.copyGlyphDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$w,[createVNode(re,{onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.copyGlyphDialog.cancel")),1)]),_:1}),createVNode(re,{type:"primary",onPointerdown:$},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.copyGlyphDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$y,[createVNode(ae,{label:unref(n)("dialogs.copyGlyphDialog.glyphName")},{default:withCtx(()=>[createVNode(j,{modelValue:y.value,"onUpdate:modelValue":z[0]||(z[0]=ue=>y.value=ue),onKeyup:withKeys(V,["enter"])},null,8,["modelValue","onKeyup"])]),_:1},8,["label"])])]),_:1},8,["modelValue","title"])}}}),_hoisted_1$x={class:"form-wrapper"},_hoisted_2$v={class:"dialog-footer"},_sfc_main$y=defineComponent({__name:"editCharacterDialog",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=ref(""),k=()=>{setEditCharacterDialogVisible(!1)},$=()=>{if(!y.value){let z="";g.value==="zh"?z="":g.value==="en"&&(z="Please input character's name."),ElMessage(z);return}if(y.value&&y.value.length>1){let z="";g.value==="zh"?z="":g.value==="en"&&(z="Please input a single character."),ElMessage(z);return}if(y.value===".notdef"){ElMessage({message:".notdef",type:"warning"});return}const L={uuid:genUUID(),text:y.value,unicode:toUnicode(y.value),components:[]};modifyCharacterFile(editedCharacterUUID.value,{character:L}),emitter.emit("updateCharacterInfoPreviewCanvasByUUID",editedCharacterUUID.value),y.value="",setEditCharacterDialogVisible(!1)},V=L=>{L.preventDefault(),$()};return(L,z)=>{const j=resolveComponent("el-input"),ae=resolveComponent("el-form-item"),re=resolveComponent("el-button"),oe=resolveComponent("el-dialog");return openBlock(),createBlock(oe,{modelValue:unref(editCharacterDialogVisible),"onUpdate:modelValue":z[1]||(z[1]=ue=>isRef(editCharacterDialogVisible)?editCharacterDialogVisible.value=ue:null),title:unref(n)("dialogs.editCharacterDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$v,[createVNode(re,{onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.editCharacterDialog.cancel")),1)]),_:1}),createVNode(re,{type:"primary",onPointerdown:$},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.editCharacterDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$x,[createVNode(ae,{label:unref(n)("dialogs.editCharacterDialog.title")},{default:withCtx(()=>[createVNode(j,{modelValue:y.value,"onUpdate:modelValue":z[0]||(z[0]=ue=>y.value=ue),onKeyup:withKeys(V,["enter"])},null,8,["modelValue","onKeyup"])]),_:1},8,["label"])])]),_:1},8,["modelValue","title"])}}}),_hoisted_1$w={class:"form-wrapper"},_hoisted_2$u={class:"dialog-footer"},_sfc_main$x=defineComponent({__name:"copyCharacterDialog",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=ref(""),k=()=>{setCopyCharacterDialogVisible(!1)},$=()=>{if(!y.value){let z="";g.value==="zh"?z="":g.value==="en"&&(z="Please input character's name."),ElMessage(z);return}if(y.value&&y.value.length>1){let z="";g.value==="zh"?z="":g.value==="en"&&(z="Please input a single character."),ElMessage(z);return}let L=null;for(let z=0;z<selectedFile.value.characterList.length;z++)if(selectedFile.value.characterList[z].uuid===copiedCharacterUUID.value){L=clone(selectedFile.value.characterList[z]);const j=L.uuid,ae=genUUID();L.uuid=ae,L.script=L.script.replaceAll(j.replaceAll("-","_"),ae.replaceAll("-","_"));const re={uuid:genUUID(),text:y.value,unicode:toUnicode(y.value),components:[]};L.character=re;break}addCharacterForCurrentFile(L),addCharacterTemplate(generateCharacterTemplate(L)),emitter.emit("renderPreviewCanvasByUUID",L.uuid),y.value="",setCopyCharacterDialogVisible(!1)},V=L=>{L.preventDefault(),$()};return(L,z)=>{const j=resolveComponent("el-input"),ae=resolveComponent("el-form-item"),re=resolveComponent("el-button"),oe=resolveComponent("el-dialog");return openBlock(),createBlock(oe,{modelValue:unref(copyCharacterDialogVisible),"onUpdate:modelValue":z[1]||(z[1]=ue=>isRef(copyCharacterDialogVisible)?copyCharacterDialogVisible.value=ue:null),title:unref(n)("dialogs.copyCharacterDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$u,[createVNode(re,{onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.copyCharacterDialog.cancel")),1)]),_:1}),createVNode(re,{type:"primary",onPointerdown:$},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.copyCharacterDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$w,[createVNode(ae,{label:unref(n)("dialogs.copyCharacterDialog.title")},{default:withCtx(()=>[createVNode(j,{modelValue:y.value,"onUpdate:modelValue":z[0]||(z[0]=ue=>y.value=ue),onKeyup:withKeys(V,["enter"])},null,8,["modelValue","onKeyup"])]),_:1},8,["label"])])]),_:1},8,["modelValue","title"])}}}),_hoisted_1$v={class:"form-wrapper"},_hoisted_2$t={class:"dialog-footer"},_sfc_main$w=defineComponent({__name:"AddGlyphDialog",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=ref(""),k=()=>{setAddGlyphDialogVisible(!1)},$=()=>{if(!y.value){let j="";g.value==="zh"?j="":g.value==="en"&&(j="Please input glyph's name."),ElMessage(j);return}const L=genUUID(),z={uuid:L,type:"system",name:y.value,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},parameters:new ParametersMap([]),joints:[],script:`function script_${L.replaceAll("-","_")} (glyph, constants, FP) {
	//Todo something
}`};addGlyph(z,editStatus.value),addGlyphTemplate(z,editStatus.value),y.value="",setAddGlyphDialogVisible(!1)},V=L=>{L.preventDefault(),$()};return(L,z)=>{const j=resolveComponent("el-input"),ae=resolveComponent("el-form-item"),re=resolveComponent("el-button"),oe=resolveComponent("el-dialog");return openBlock(),createBlock(oe,{modelValue:unref(addGlyphDialogVisible),"onUpdate:modelValue":z[1]||(z[1]=ue=>isRef(addGlyphDialogVisible)?addGlyphDialogVisible.value=ue:null),title:unref(n)("dialogs.addGlyphDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$t,[createVNode(re,{onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.addGlyphDialog.cancel")),1)]),_:1}),createVNode(re,{type:"primary",onPointerdown:$},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.addGlyphDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$v,[createVNode(ae,{label:unref(n)("dialogs.addGlyphDialog.glyphName")},{default:withCtx(()=>[createVNode(j,{modelValue:y.value,"onUpdate:modelValue":z[0]||(z[0]=ue=>y.value=ue),onKeyup:withKeys(V,["enter"])},null,8,["modelValue","onKeyup"])]),_:1},8,["label"])])]),_:1},8,["modelValue","title"])}}}),_hoisted_1$u={class:"form-wrapper"},_hoisted_2$s={class:"dialog-footer"},_sfc_main$v=defineComponent({__name:"AddIconDialog",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=ref(""),k=()=>{setAddIconDialogVisible(!1)},$=()=>{if(!y.value){let re="";g.value==="zh"?re="":g.value==="en"&&(re="Please input icon's name."),ElMessage(re);return}const L=selectedFile.value.iconsCount,z={uuid:genUUID(),text:y.value,unicode:toIconUnicode(L),components:[]},j=genUUID(),ae={uuid:j,type:"icon",character:z,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},info:{gridSettings:{dx:0,dy:0,centerSquareSize:selectedFile.value.width/3,size:selectedFile.value.width,default:!0},useSkeletonGrid:!1,layout:"",layoutTree:[]},script:`function script_${j.replaceAll("-","_")} (character, constants, FP) {
	//Todo something
}`};y.value="",selectedFile.value.iconsCount++,addCharacterForCurrentFile(ae),addCharacterTemplate(generateCharacterTemplate(ae)),setAddIconDialogVisible(!1)},V=L=>{L.preventDefault(),$()};return(L,z)=>{const j=resolveComponent("el-input"),ae=resolveComponent("el-form-item"),re=resolveComponent("el-button"),oe=resolveComponent("el-dialog");return openBlock(),createBlock(oe,{modelValue:unref(addIconDialogVisible),"onUpdate:modelValue":z[1]||(z[1]=ue=>isRef(addIconDialogVisible)?addIconDialogVisible.value=ue:null),title:unref(n)("dialogs.addIconDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$s,[createVNode(re,{onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.addIconDialog.cancel")),1)]),_:1}),createVNode(re,{type:"primary",onPointerdown:$},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.addIconDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$u,[createVNode(ae,{label:unref(n)("dialogs.addIconDialog.iconName")},{default:withCtx(()=>[createVNode(j,{modelValue:y.value,"onUpdate:modelValue":z[0]||(z[0]=ue=>y.value=ue),onKeyup:withKeys(V,["enter"])},null,8,["modelValue","onKeyup"])]),_:1},8,["label"])])]),_:1},8,["modelValue","title"])}}}),_hoisted_1$t={class:"dialog-content"},_hoisted_2$r={class:"glyph-header"},_hoisted_3$j={class:"list-switch"},_hoisted_4$g={class:"dialog-footer"},_hoisted_5$d={class:"selected-glyphs-wrapper"},_sfc_main$u=defineComponent({__name:"GlyphComponentsDialog",setup(e){const{tm:n,t:r}=useI18n(),g=ref(Status.StrokeGlyphList),y=new Map;onMounted(async()=>{await nextTick()}),emitter.on("renderGlyphSelection",()=>{$(Status.GlyphList)}),emitter.on("renderStrokeGlyphSelection",()=>{$(Status.StrokeGlyphList)}),emitter.on("renderRadicalGlyphSelection",()=>{$(Status.RadicalGlyphList)}),emitter.on("renderCompGlyphSelection",()=>{$(Status.CompGlyphList)}),emitter.on("renderGlyphSelectionByUUID",re=>{y.get(re)&&(clearTimeout(y.get(re)),y.set(re,null));const oe=setTimeout(async()=>{await nextTick(),k(re,Status.GlyphList)},100);y.set(re,oe)}),emitter.on("renderStrokeGlyphSelectionByUUID",re=>{y.get(re)&&(clearTimeout(y.get(re)),y.set(re,null));const oe=setTimeout(async()=>{await nextTick(),k(re,Status.StrokeGlyphList)},100);y.set(re,oe)}),emitter.on("renderRadicalGlyphSelectionByUUID",re=>{y.get(re)&&(clearTimeout(y.get(re)),y.set(re,null));const oe=setTimeout(async()=>{await nextTick(),k(re,Status.RadicalGlyphList)},100);y.set(re,oe)}),emitter.on("renderCompGlyphSelectionByUUID",re=>{y.get(re)&&(clearTimeout(y.get(re)),y.set(re,null));const oe=setTimeout(async()=>{await nextTick(),k(re,Status.CompGlyphList)},100);y.set(re,oe)}),emitter.on("renderGlyphSelectionByUUIDOnEditing",re=>{y.get(re)&&(clearTimeout(y.get(re)),y.set(re,null));const oe=setTimeout(async()=>{await nextTick(),k(re,Status.GlyphList,!0)},100);y.set(re,oe)}),emitter.on("renderStrokeGlyphSelectionByUUIDOnEditing",re=>{y.get(re)&&(clearTimeout(y.get(re)),y.set(re,null));const oe=setTimeout(async()=>{await nextTick(),k(re,Status.StrokeGlyphList,!0)},100);y.set(re,oe)}),emitter.on("renderRadicalGlyphSelectionByUUIDOnEditing",re=>{y.get(re)&&(clearTimeout(y.get(re)),y.set(re,null));const oe=setTimeout(async()=>{await nextTick(),k(re,Status.RadicalGlyphList,!0)},100);y.set(re,oe)}),emitter.on("renderCompGlyphSelectionByUUIDOnEditing",re=>{y.get(re)&&(clearTimeout(y.get(re)),y.set(re,null));const oe=setTimeout(async()=>{await nextTick(),k(re,Status.CompGlyphList,!0)},100);y.set(re,oe)});const k=(re,oe,ue=!1)=>{let le=null;ue?le=editGlyph.value:le=getGlyphByUUID(re),executeScript(le),le?.components?.map(Ce=>{Ce.type==="glyph"&&executeScript(Ce.value)});let de=null;oe===Status.GlyphList?de=document.getElementById("glyph-components-wrapper"):oe===Status.StrokeGlyphList?de=document.getElementById("stroke-glyph-components-wrapper"):oe===Status.RadicalGlyphList?de=document.getElementById("radical-glyph-components-wrapper"):oe===Status.CompGlyphList&&(de=document.getElementById("comp-glyph-components-wrapper"));const he=de.querySelector(`#preview-canvas-${le.uuid}`);if(!he)return;const _e=componentsToContours(le._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(he,_e)},$=re=>{const oe=ue=>{ue._o||(executeScript(ue),ue?.components?.map(_e=>{_e.type==="glyph"&&executeScript(_e.value)}));let le=null;re===Status.GlyphList?le=document.getElementById("glyph-components-wrapper"):re===Status.StrokeGlyphList?le=document.getElementById("stroke-glyph-components-wrapper"):re===Status.RadicalGlyphList?le=document.getElementById("radical-glyph-components-wrapper"):re===Status.CompGlyphList&&(le=document.getElementById("comp-glyph-components-wrapper"));const de=le.querySelector(`#preview-canvas-${ue.uuid}`);if(!de)return;const he=componentsToContours(ue._o.components,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3},{x:0,y:0},!0,!0);renderPreview2(de,he),loading$1.value&&(loaded$1.value+=1,loaded$1.value>=total$1.value&&(loading$1.value=!1))};if(re===Status.GlyphList&&glyphs.value&&glyphs.value.length){let ue=0;const le=()=>{oe(glyphs.value[ue]),ue++,ue<glyphs.value.length&&requestAnimationFrame(le)};requestAnimationFrame(le)}else if(re===Status.StrokeGlyphList&&stroke_glyphs.value&&stroke_glyphs.value.length){let ue=0;const le=()=>{oe(stroke_glyphs.value[ue]),ue++,ue<stroke_glyphs.value.length&&requestAnimationFrame(le)};requestAnimationFrame(le)}else if(re===Status.RadicalGlyphList&&radical_glyphs.value&&radical_glyphs.value.length){let ue=0;const le=()=>{oe(radical_glyphs.value[ue]),ue++,ue<radical_glyphs.value.length&&requestAnimationFrame(le)};requestAnimationFrame(le)}else if(re===Status.CompGlyphList&&comp_glyphs.value&&comp_glyphs.value.length){let ue=0;const le=()=>{oe(comp_glyphs.value[ue]),ue++,ue<comp_glyphs.value.length&&requestAnimationFrame(le)};requestAnimationFrame(le)}},V=()=>{glyphComponentsDialogVisible2.value=!1},L=()=>{setGlyphComponentsDialogVisible(!0)},z=re=>{const oe=selected_glyphs.value.findIndex(ue=>ue.uuid===re);oe!==-1&&selected_glyphs.value.splice(oe,1)},j=()=>{onStrokeReplacement.value?(setReplacementStroke(selected_glyphs.value[0].uuid),onStrokeReplacement.value=!1,glyphComponentsDialogVisible2.value=!1):(selected_glyphs.value.map(re=>{ae(re)}),selected_glyphs.value=[],glyphComponentsDialogVisible2.value=!1)},ae=re=>{const oe=clone(re);oe.parent_reference=getParentInfo(editStatus.value===Status.Edit?editCharacterFile.value:editGlyph.value),oe.script=null,oe.script_reference=oe.uuid;const ue={uuid:genUUID(),type:"glyph",name:re.name+Date.now().toString().slice(9),lock:!1,visible:!0,value:oe,ox:selectedFile.value.width/2-1e3/2,oy:selectedFile.value.height/2-1e3/2,usedInCharacter:!0};executeScript(ue.value),editStatus.value===Status.Edit?addComponentForCurrentCharacterFile(ue):editStatus.value===Status.Glyph&&addComponentForCurrentGlyph(ue),tool.value!=="glyphDragger"&&setTool("glyphDragger")};return(re,oe)=>{const ue=resolveComponent("el-scrollbar"),le=resolveComponent("el-switch"),de=resolveComponent("el-button"),he=resolveComponent("el-dialog");return openBlock(),createElementBlock("div",{style:normalizeStyle({zIndex:unref(glyphComponentsDialogVisible2)?2e3:-999}),ref:"dialogContainer"},[createVNode(he,{modelValue:unref(glyphComponentsDialogVisible),"onUpdate:modelValue":oe[5]||(oe[5]=_e=>isRef(glyphComponentsDialogVisible)?glyphComponentsDialogVisible.value=_e:null),title:unref(n)("dialogs.glyphComponentDialog.title"),class:"glyph-components-dialog",onClose:L,width:"800px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_4$g,[createVNode(le,{modelValue:unref(multi_glyph_selection),"onUpdate:modelValue":oe[4]||(oe[4]=_e=>isRef(multi_glyph_selection)?multi_glyph_selection.value=_e:null),"active-text":unref(n)("dialogs.glyphComponentDialog.multiSelection"),"inactive-text":unref(n)("dialogs.glyphComponentDialog.singleSelection")},null,8,["modelValue","active-text","inactive-text"]),createBaseVNode("div",_hoisted_5$d,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(selected_glyphs),_e=>(openBlock(),createBlock(de,{onPointerdown:Ce=>z(_e.uuid)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(_e.name),1)]),_:2},1032,["onPointerdown"]))),256))]),createVNode(de,{disabled:!unref(glyphComponentsDialogVisible2),onPointerdown:V},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.glyphComponentDialog.cancel")),1)]),_:1},8,["disabled"]),createVNode(de,{disabled:!unref(glyphComponentsDialogVisible2),type:"primary",onPointerdown:j},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.glyphComponentDialog.confirm")),1)]),_:1},8,["disabled"])])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$t,[createBaseVNode("div",_hoisted_2$r,[createBaseVNode("div",_hoisted_3$j,[createBaseVNode("span",{class:normalizeClass(["stroke-glyph-list",{selected:g.value===unref(Status).StrokeGlyphList}]),onPointerdown:oe[0]||(oe[0]=_e=>g.value=unref(Status).StrokeGlyphList)},toDisplayString$1(unref(r)("programming.stroke")),35),createBaseVNode("span",{class:normalizeClass(["radical-glyph-list",{selected:g.value===unref(Status).RadicalGlyphList}]),onPointerdown:oe[1]||(oe[1]=_e=>g.value=unref(Status).RadicalGlyphList)},toDisplayString$1(unref(r)("programming.radical")),35),createBaseVNode("span",{class:normalizeClass(["comp-glyph-list",{selected:g.value===unref(Status).CompGlyphList}]),onPointerdown:oe[2]||(oe[2]=_e=>g.value=unref(Status).CompGlyphList)},toDisplayString$1(unref(r)("programming.comp")),35),createBaseVNode("span",{class:normalizeClass(["glyph-list",{selected:g.value===unref(Status).GlyphList}]),onPointerdown:oe[3]||(oe[3]=_e=>g.value=unref(Status).GlyphList)},toDisplayString$1(unref(r)("programming.glyph_comp")),35)])]),createVNode(ue,{height:"300px"},{default:withCtx(()=>[createBaseVNode("main",{class:"list",id:"glyph-components-wrapper",style:normalizeStyle({zIndex:g.value===unref(Status).GlyphList?2999:-1e3})},null,4),createBaseVNode("main",{class:"list",id:"stroke-glyph-components-wrapper",style:normalizeStyle({zIndex:g.value===unref(Status).StrokeGlyphList?2999:-1e3})},null,4),createBaseVNode("main",{class:"list",id:"radical-glyph-components-wrapper",style:normalizeStyle({zIndex:g.value===unref(Status).RadicalGlyphList?2999:-1e3})},null,4),createBaseVNode("main",{class:"list",id:"comp-glyph-components-wrapper",style:normalizeStyle({zIndex:g.value===unref(Status).CompGlyphList?2999:-1e3})},null,4)]),_:1})])]),_:1},8,["modelValue","title"])],4)}}}),_hoisted_1$s={class:"dialog-footer"},_sfc_main$t=defineComponent({__name:"FontSettingsDialog",setup(e){const{tm:n,t:r}=useI18n(),g=ref("untitled"),y=ref(1e3),k=ref(800),$=ref(-200);onMounted(()=>{selectedFile.value&&(g.value=selectedFile.value.name,y.value=selectedFile.value.fontSettings.unitsPerEm,k.value=selectedFile.value.fontSettings.ascender,$.value=selectedFile.value.fontSettings.descender)}),watch([()=>selectedFile.value?.name,()=>selectedFile.value?.fontSettings],()=>{if(!selectedFile.value)return;g.value=selectedFile.value.name;let re="",oe="Regular";selectedFile.value.fontSettings?.tables?.name&&selectedFile.value.fontSettings?.tables?.name.map(ue=>{ue.nameID===1&&ue.langID===2052?ue.value=g.value:ue.nameID===1&&ue.langID===1033?ue.value=getEnName(g.value):ue.nameID===4&&ue.langID===2052?ue.value=g.value+" "+re:ue.nameID===4&&ue.langID===1033?ue.value=getEnName(g.value)+" "+oe:ue.nameID===6&&ue.langID===2052?ue.value=(getEnName(g.value)+"-"+oe).replace(/\s/g,"").slice(0,63):ue.nameID===6&&ue.langID===1033&&(ue.value=(getEnName(g.value)+"-"+oe).replace(/\s/g,"").slice(0,63))}),y.value=selectedFile.value.fontSettings.unitsPerEm,k.value=selectedFile.value.fontSettings.ascender,$.value=selectedFile.value.fontSettings.descender},{deep:!0});const V=()=>{let re="",oe="Regular";if(g.value!==selectedFile.value.name)for(let ue=0;ue<name_data.value.length;ue++){const le=name_data.value[ue];le.nameID===1&&le.langID===2052?le.value=g.value:le.nameID===1&&le.langID===1033?le.value=getEnName(g.value):le.nameID===2&&le.langID===2052?re=le.value:le.nameID===2&&le.langID===1033?oe=le.value:le.nameID===4&&le.langID===2052?le.value=g.value+" "+re:le.nameID===4&&le.langID===1033?le.value=getEnName(g.value)+" "+oe:le.nameID===6&&le.langID===2052?le.value=(getEnName(g.value)+"-"+oe).replace(/\s/g,"").slice(0,63):le.nameID===6&&le.langID===1033&&(le.value=(getEnName(g.value)+"-"+oe).replace(/\s/g,"").slice(0,63))}updateFontSettings({name:g.value,unitsPerEm:y.value,ascender:k.value,descender:$.value}),setFontSettingsDialogVisible(!1)},L=()=>{setFontSettingsDialogVisible(!1)},z=()=>{$.value=k.value-y.value},j=()=>{k.value=y.value+$.value},ae=()=>{setFontSettings2DialogVisible(!0),setFontSettingsDialogVisible(!1)};return(re,oe)=>{const ue=resolveComponent("el-input"),le=resolveComponent("el-form-item"),de=resolveComponent("el-input-number"),he=resolveComponent("el-form"),_e=resolveComponent("el-button"),Ce=resolveComponent("el-dialog");return openBlock(),createBlock(Ce,{"model-value":unref(fontSettingsDialogVisible),class:"font-settings-dialog",title:unref(n)("dialogs.fontSettingsDialog.title"),width:"320px","before-close":L},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_1$s,[createVNode(_e,{onPointerdown:ae},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.fontSettingsDialog.moreSettings")),1)]),_:1}),createVNode(_e,{onPointerdown:oe[4]||(oe[4]=Ne=>unref(setFontSettingsDialogVisible)(!1))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.fontSettingsDialog.cancel")),1)]),_:1}),createVNode(_e,{type:"primary",onPointerdown:oe[5]||(oe[5]=()=>V())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.fontSettingsDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createVNode(he,{class:"create-file-form","label-width":"80px"},{default:withCtx(()=>[createVNode(le,{label:unref(n)("dialogs.fontSettingsDialog.fontName")},{default:withCtx(()=>[createVNode(ue,{modelValue:g.value,"onUpdate:modelValue":oe[0]||(oe[0]=Ne=>g.value=Ne)},null,8,["modelValue"])]),_:1},8,["label"]),createVNode(le,{label:"unitsPerEm"},{default:withCtx(()=>[createVNode(de,{modelValue:y.value,"onUpdate:modelValue":oe[1]||(oe[1]=Ne=>y.value=Ne),precision:0,disabled:"true"},null,8,["modelValue"])]),_:1}),createVNode(le,{label:"ascender"},{default:withCtx(()=>[createVNode(de,{modelValue:k.value,"onUpdate:modelValue":oe[2]||(oe[2]=Ne=>k.value=Ne),precision:0,onChange:z,disabled:"true"},null,8,["modelValue"])]),_:1}),createVNode(le,{label:"descender"},{default:withCtx(()=>[createVNode(de,{modelValue:$.value,"onUpdate:modelValue":oe[3]||(oe[3]=Ne=>$.value=Ne),precision:0,onChange:j,disabled:"true"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value","title"])}}}),validators={uint8:e=>typeof e=="number"&&e>=0&&e<=255,int8:e=>typeof e=="number"&&e>=-128&&e<=127,uint16:e=>typeof e=="number",int16:e=>typeof e=="number",uint24:e=>typeof e=="number",uint32:e=>typeof e=="number",int32:e=>typeof e=="number",Fixed:e=>typeof e=="number",FWORD:e=>typeof e=="number",UFWORD:e=>typeof e=="number",LONGDATETIME:e=>{if(typeof e!="number")return!1;const n=(e-2082844800)*1e3;return new Date(n).getTime()>0},Tag:e=>e.length===4},_withScopeId$9=e=>(pushScopeId("data-v-2384f384"),e=e(),popScopeId(),e),_hoisted_1$r={class:"table-item"},_hoisted_2$q=_withScopeId$9(()=>createBaseVNode("div",{class:"item-name"},"majorVersion",-1)),_hoisted_3$i={class:"item-content"},_hoisted_4$f={class:"tips"},_hoisted_5$c={class:"table-item"},_hoisted_6$b=_withScopeId$9(()=>createBaseVNode("div",{class:"item-name"},"minorVersion",-1)),_hoisted_7$b={class:"item-content"},_hoisted_8$b={class:"tips"},_hoisted_9$b={class:"table-item"},_hoisted_10$b=_withScopeId$9(()=>createBaseVNode("div",{class:"item-name"},"fontRevision",-1)),_hoisted_11$a={class:"item-content"},_hoisted_12$a={class:"tips"},_hoisted_13$8={class:"table-item"},_hoisted_14$8=_withScopeId$9(()=>createBaseVNode("div",{class:"item-name"},"flags",-1)),_hoisted_15$5={class:"item-content",style:{flexDirection:"column"}},_hoisted_16$5={class:"flags-item"},_hoisted_17$4={class:"flags-item-checkbox"},_hoisted_18$3=_withScopeId$9(()=>createBaseVNode("div",{class:"flags-item-name"},"Bit-0",-1)),_hoisted_19$3={class:"flags-item-description"},_hoisted_20$3={class:"flags-item"},_hoisted_21$3={class:"flags-item-checkbox"},_hoisted_22$3=_withScopeId$9(()=>createBaseVNode("div",{class:"flags-item-name"},"Bit-1",-1)),_hoisted_23$3={class:"flags-item-description"},_hoisted_24$3={class:"flags-item"},_hoisted_25$2={class:"flags-item-checkbox"},_hoisted_26$2=_withScopeId$9(()=>createBaseVNode("div",{class:"flags-item-name"},"Bit-2",-1)),_hoisted_27$2={class:"flags-item-description"},_hoisted_28$2={class:"flags-item"},_hoisted_29$2={class:"flags-item-checkbox"},_hoisted_30$2=_withScopeId$9(()=>createBaseVNode("div",{class:"flags-item-name"},"Bit-3",-1)),_hoisted_31$2={class:"flags-item-description"},_hoisted_32$2={class:"flags-item"},_hoisted_33$2={class:"flags-item-checkbox"},_hoisted_34$2=_withScopeId$9(()=>createBaseVNode("div",{class:"flags-item-name"},"Bit-4",-1)),_hoisted_35$2={class:"flags-item-description"},_hoisted_36$1={class:"flags-item"},_hoisted_37$1={class:"flags-item-checkbox"},_hoisted_38$1=_withScopeId$9(()=>createBaseVNode("div",{class:"flags-item-name"},"Bit-11",-1)),_hoisted_39$1={class:"flags-item-description"},_hoisted_40$1={class:"flags-item"},_hoisted_41$1={class:"flags-item-checkbox"},_hoisted_42$1=_withScopeId$9(()=>createBaseVNode("div",{class:"flags-item-name"},"Bit-12",-1)),_hoisted_43$1={class:"flags-item-description"},_hoisted_44$1={class:"flags-item"},_hoisted_45$1={class:"flags-item-checkbox"},_hoisted_46$1=_withScopeId$9(()=>createBaseVNode("div",{class:"flags-item-name"},"Bit-13",-1)),_hoisted_47$1={class:"flags-item-description"},_hoisted_48$1={class:"flags-item"},_hoisted_49$1={class:"flags-item-checkbox"},_hoisted_50$1=_withScopeId$9(()=>createBaseVNode("div",{class:"flags-item-name"},"Bit-14",-1)),_hoisted_51$1={class:"flags-item-description"},_hoisted_52$1={class:"table-item"},_hoisted_53$1=_withScopeId$9(()=>createBaseVNode("div",{class:"item-name"},"created",-1)),_hoisted_54$1={class:"item-content"},_hoisted_55$1={class:"table-item"},_hoisted_56$1=_withScopeId$9(()=>createBaseVNode("div",{class:"item-name"},"modified",-1)),_hoisted_57$1={class:"item-content"},_hoisted_58$1={class:"table-item"},_hoisted_59$1=_withScopeId$9(()=>createBaseVNode("div",{class:"item-name"},"macStyle",-1)),_hoisted_60$1={class:"item-content",style:{flexDirection:"column"}},_hoisted_61$1={class:"mac-style-item"},_hoisted_62$1={class:"mac-style-item-checkbox"},_hoisted_63$1=_withScopeId$9(()=>createBaseVNode("div",{class:"mac-style-item-name"},"Bit-0",-1)),_hoisted_64$1={class:"mac-style-item-description"},_hoisted_65$1={class:"mac-style-item"},_hoisted_66$1={class:"mac-style-item-checkbox"},_hoisted_67$1=_withScopeId$9(()=>createBaseVNode("div",{class:"mac-style-item-name"},"Bit-1",-1)),_hoisted_68$1={class:"mac-style-item-description"},_hoisted_69$1={class:"mac-style-item"},_hoisted_70$1={class:"mac-style-item-checkbox"},_hoisted_71$1=_withScopeId$9(()=>createBaseVNode("div",{class:"mac-style-item-name"},"Bit-2",-1)),_hoisted_72$1={class:"mac-style-item-description"},_hoisted_73$1={class:"mac-style-item"},_hoisted_74$1={class:"mac-style-item-checkbox"},_hoisted_75$1=_withScopeId$9(()=>createBaseVNode("div",{class:"mac-style-item-name"},"Bit-3",-1)),_hoisted_76$1={class:"mac-style-item-description"},_hoisted_77$1={class:"mac-style-item"},_hoisted_78$1={class:"mac-style-item-checkbox"},_hoisted_79$1=_withScopeId$9(()=>createBaseVNode("div",{class:"mac-style-item-name"},"Bit-4",-1)),_hoisted_80$1={class:"mac-style-item-description"},_hoisted_81$1={class:"mac-style-item"},_hoisted_82$1={class:"mac-style-item-checkbox"},_hoisted_83$1=_withScopeId$9(()=>createBaseVNode("div",{class:"mac-style-item-name"},"Bit-5",-1)),_hoisted_84$1={class:"mac-style-item-description"},_hoisted_85$1={class:"mac-style-item"},_hoisted_86$1={class:"mac-style-item-checkbox"},_hoisted_87$1=_withScopeId$9(()=>createBaseVNode("div",{class:"mac-style-item-name"},"Bit-6",-1)),_hoisted_88$1={class:"mac-style-item-description"},_hoisted_89$1={class:"table-item"},_hoisted_90=_withScopeId$9(()=>createBaseVNode("div",{class:"item-name"},"lowestRecPPEM",-1)),_hoisted_91={class:"item-content"},_hoisted_92={class:"tips"},_hoisted_93={class:"table-item"},_hoisted_94=_withScopeId$9(()=>createBaseVNode("div",{class:"item-name"},"fontDirectionHint",-1)),_hoisted_95={class:"item-content"},_hoisted_96={class:"tips"},_sfc_main$s=defineComponent({__name:"head",setup(e){const{locale:n}=useI18n(),r=ref({majorVersion:{valid:!0,tip:""},minorVersion:{valid:!0,tip:""},fontRevision:{valid:!0,tip:""},created:{valid:!0,tip:""},modified:{valid:!0,tip:""},lowestRecPPEM:{valid:!0,tip:""},fontDirectionHint:{valid:!0,tip:""}}),g=(le,de)=>{switch(le){case"majorVersion":{const he=validators.uint16(de);let _e="";he||(n.value==="zh"?_e="uint16":n.value==="en"&&(_e="Invalid format: uint16 required")),r.value.majorVersion.valid=he,r.value.majorVersion.tip=_e;break}case"minorVersion":{const he=validators.uint16(de);let _e="";he||(n.value==="zh"?_e="uint16":n.value==="en"&&(_e="Invalid format: uint16 required")),r.value.minorVersion.valid=he,r.value.minorVersion.tip=_e;break}case"fontRevision":{const he=validators.Fixed(de);let _e="";he||(n.value==="zh"?_e="":n.value==="en"&&(_e="Invalid format")),r.value.fontRevision.valid=he,r.value.fontRevision.tip=_e;break}case"created":{const he=validators.LONGDATETIME(de);let _e="";he||(n.value==="zh"?_e="":n.value==="en"&&(_e="Invalid format")),r.value.created.valid=he,r.value.created.tip=_e;break}case"modified":{const he=validators.LONGDATETIME(de);let _e="";he||(n.value==="zh"?_e="":n.value==="en"&&(_e="Invalid format")),r.value.modified.valid=he,r.value.modified.tip=_e;break}case"lowestRecPPEM":{const he=validators.uint16(de);let _e="";he||(n.value==="zh"?_e="uint16":n.value==="en"&&(_e="Invalid format: uint16 required")),r.value.lowestRecPPEM.valid=he,r.value.lowestRecPPEM.tip=_e;break}case"fontDirectionHint":{const he=validators.int16(de);let _e="";he||(n.value==="zh"?_e="int16":n.value==="en"&&(_e="Invalid format: int16 required")),r.value.fontDirectionHint.valid=he,r.value.fontDirectionHint.tip=_e;break}}},y=le=>{head_data.value.created.timestamp=Math.floor(le.getTime()/1e3)+2082844800},k=le=>{head_data.value.modified.timestamp=Math.floor(le.getTime()/1e3)+2082844800},$={majorVersion:"uint16",minorVersion:"uint16",fontRevision:"Fixed",created:" 1904-01-01  64 ",modified:" 1904-01-01  64 ",lowestRecPPEM:" (Pixels Per Em)",fontDirectionHint:" 0"},V=[" `y=0`"," `x=0` TrueType ","point size"," ppem Em  ppem ** hinting**","advance width"," OpenType  Apple  Apple "," OpenType "," OpenType "," OpenType "," OpenType "," OpenType ","/ ISO/IEC 14496-18MicroType ExpressWOFF 2.0 DSIG ",""," ClearType ","Last Resort font"," 0"],L=["","","","","","","","","","","","","","","",""],z={majorVersion:"Major version number of the table format, must be a uint16",minorVersion:"Minor version number of the table format, must be a uint16",fontRevision:"Font revision number defined by the font developer, format: Fixed",created:"Font creation time represented as seconds since 1904-01-01 00:00:00. Stored as 64-bit integer",modified:"Font modification time represented as seconds since 1904-01-01 00:00:00. Stored as 64-bit integer",lowestRecPPEM:"Recommended minimum pixels per em (PPEM) size for this font",fontDirectionHint:"Font layout direction hint (0 = left-to-right layout)"},j=["Baseline at y=0","Left sidebearing at x=0 (relevant for TrueType rasterizer) - see additional notes for variable fonts","Instructions may depend on point size","Force internal scaler to use integer ppem values. **Strongly recommended for hinted fonts**","Instructions may alter advance width (non-linear scaling)","[Reserved for Apple] If set, may cause vertical layout divergence on some platforms (see Apple specifications)","[Unused in OpenType] Must be 0","[Unused in OpenType] Must be 0","[Unused in OpenType] Must be 0","[Unused in OpenType] Must be 0","[Unused in OpenType] Must be 0","Font contains lossless compressed data (e.g., WOFF 2.0). Note: DSIG table may become invalid","Font contains converted metrics (compatible metrics)","Optimized for ClearType rendering","Last Resort fallback font","Reserved bit (must be 0)"],ae=["Bold","Italic","Underline","Outline","Shadow","Condensed","Extended","Reserved bit","Reserved bit","Reserved bit","Reserved bit","Reserved bit","Reserved bit","Reserved bit","Reserved bit","Reserved bit"],re=computed(()=>n.value==="zh"?$:n.value==="en"?z:$),oe=computed(()=>n.value==="zh"?V:n.value==="en"?j:V),ue=computed(()=>n.value==="zh"?L:n.value==="en"?ae:L);return(le,de)=>{const he=resolveComponent("el-input-number"),_e=resolveComponent("QuestionFilled"),Ce=resolveComponent("el-icon"),Ne=resolveComponent("el-tooltip"),$e=resolveComponent("el-checkbox"),xe=resolveComponent("el-date-picker"),Ie=resolveComponent("el-scrollbar");return openBlock(),createBlock(Ie,{height:"460px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$r,[_hoisted_2$q,createBaseVNode("div",_hoisted_3$i,[createVNode(he,{modelValue:unref(head_data).majorVersion,"onUpdate:modelValue":de[0]||(de[0]=ze=>unref(head_data).majorVersion=ze),onChange:de[1]||(de[1]=ze=>g("majorVersion",ze)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(Ne,{class:"tips",effect:"dark",content:re.value.majorVersion,placement:"bottom"},{default:withCtx(()=>[createVNode(Ce,null,{default:withCtx(()=>[createVNode(_e)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_4$f,toDisplayString$1(r.value.majorVersion.tip),1)])]),createBaseVNode("div",_hoisted_5$c,[_hoisted_6$b,createBaseVNode("div",_hoisted_7$b,[createVNode(he,{modelValue:unref(head_data).minorVersion,"onUpdate:modelValue":de[2]||(de[2]=ze=>unref(head_data).minorVersion=ze),onChange:de[3]||(de[3]=ze=>g("minorVersion",ze)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(Ne,{class:"tips",effect:"dark",content:re.value.minorVersion,placement:"bottom"},{default:withCtx(()=>[createVNode(Ce,null,{default:withCtx(()=>[createVNode(_e)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_8$b,toDisplayString$1(r.value.minorVersion.tip),1)])]),createBaseVNode("div",_hoisted_9$b,[_hoisted_10$b,createBaseVNode("div",_hoisted_11$a,[createVNode(he,{modelValue:unref(head_data).fontRevision,"onUpdate:modelValue":de[4]||(de[4]=ze=>unref(head_data).fontRevision=ze),onChange:de[5]||(de[5]=ze=>g("fontRevision",ze)),controls:!1,precision:3},null,8,["modelValue"]),createVNode(Ne,{class:"tips",effect:"dark",content:re.value.fontRevision,placement:"bottom"},{default:withCtx(()=>[createVNode(Ce,null,{default:withCtx(()=>[createVNode(_e)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_12$a,toDisplayString$1(r.value.fontRevision.tip),1)])]),createBaseVNode("div",_hoisted_13$8,[_hoisted_14$8,createBaseVNode("div",_hoisted_15$5,[createBaseVNode("div",_hoisted_16$5,[createBaseVNode("div",_hoisted_17$4,[createVNode($e,{modelValue:unref(head_data).flags[0],"onUpdate:modelValue":de[6]||(de[6]=ze=>unref(head_data).flags[0]=ze)},null,8,["modelValue"])]),_hoisted_18$3,createBaseVNode("div",_hoisted_19$3,toDisplayString$1(oe.value[0]),1)]),createBaseVNode("div",_hoisted_20$3,[createBaseVNode("div",_hoisted_21$3,[createVNode($e,{modelValue:unref(head_data).flags[1],"onUpdate:modelValue":de[7]||(de[7]=ze=>unref(head_data).flags[1]=ze)},null,8,["modelValue"])]),_hoisted_22$3,createBaseVNode("div",_hoisted_23$3,toDisplayString$1(oe.value[1]),1)]),createBaseVNode("div",_hoisted_24$3,[createBaseVNode("div",_hoisted_25$2,[createVNode($e,{modelValue:unref(head_data).flags[2],"onUpdate:modelValue":de[8]||(de[8]=ze=>unref(head_data).flags[2]=ze)},null,8,["modelValue"])]),_hoisted_26$2,createBaseVNode("div",_hoisted_27$2,toDisplayString$1(oe.value[2]),1)]),createBaseVNode("div",_hoisted_28$2,[createBaseVNode("div",_hoisted_29$2,[createVNode($e,{modelValue:unref(head_data).flags[3],"onUpdate:modelValue":de[9]||(de[9]=ze=>unref(head_data).flags[3]=ze)},null,8,["modelValue"])]),_hoisted_30$2,createBaseVNode("div",_hoisted_31$2,toDisplayString$1(oe.value[3]),1)]),createBaseVNode("div",_hoisted_32$2,[createBaseVNode("div",_hoisted_33$2,[createVNode($e,{modelValue:unref(head_data).flags[4],"onUpdate:modelValue":de[10]||(de[10]=ze=>unref(head_data).flags[4]=ze)},null,8,["modelValue"])]),_hoisted_34$2,createBaseVNode("div",_hoisted_35$2,toDisplayString$1(oe.value[1]),1)]),createBaseVNode("div",_hoisted_36$1,[createBaseVNode("div",_hoisted_37$1,[createVNode($e,{modelValue:unref(head_data).flags[11],"onUpdate:modelValue":de[11]||(de[11]=ze=>unref(head_data).flags[11]=ze)},null,8,["modelValue"])]),_hoisted_38$1,createBaseVNode("div",_hoisted_39$1,toDisplayString$1(oe.value[11]),1)]),createBaseVNode("div",_hoisted_40$1,[createBaseVNode("div",_hoisted_41$1,[createVNode($e,{modelValue:unref(head_data).flags[12],"onUpdate:modelValue":de[12]||(de[12]=ze=>unref(head_data).flags[12]=ze)},null,8,["modelValue"])]),_hoisted_42$1,createBaseVNode("div",_hoisted_43$1,toDisplayString$1(oe.value[12]),1)]),createBaseVNode("div",_hoisted_44$1,[createBaseVNode("div",_hoisted_45$1,[createVNode($e,{modelValue:unref(head_data).flags[13],"onUpdate:modelValue":de[13]||(de[13]=ze=>unref(head_data).flags[13]=ze)},null,8,["modelValue"])]),_hoisted_46$1,createBaseVNode("div",_hoisted_47$1,toDisplayString$1(oe.value[13]),1)]),createBaseVNode("div",_hoisted_48$1,[createBaseVNode("div",_hoisted_49$1,[createVNode($e,{modelValue:unref(head_data).flags[14],"onUpdate:modelValue":de[14]||(de[14]=ze=>unref(head_data).flags[14]=ze)},null,8,["modelValue"])]),_hoisted_50$1,createBaseVNode("div",_hoisted_51$1,toDisplayString$1(oe.value[14]),1)])])]),createBaseVNode("div",_hoisted_52$1,[_hoisted_53$1,createBaseVNode("div",_hoisted_54$1,[createVNode(he,{modelValue:unref(head_data).created.timestamp,"onUpdate:modelValue":de[15]||(de[15]=ze=>unref(head_data).created.timestamp=ze),controls:!1,precision:0,disabled:""},null,8,["modelValue"]),createVNode(Ne,{class:"tips",effect:"dark",content:re.value.created,placement:"bottom"},{default:withCtx(()=>[createVNode(Ce,null,{default:withCtx(()=>[createVNode(_e)]),_:1})]),_:1},8,["content"]),createVNode(xe,{class:"date-picker",modelValue:unref(head_data).created.value,"onUpdate:modelValue":de[16]||(de[16]=ze=>unref(head_data).created.value=ze),onChange:y,type:"datetime",placeholder:"Select date and time"},null,8,["modelValue"])])]),createBaseVNode("div",_hoisted_55$1,[_hoisted_56$1,createBaseVNode("div",_hoisted_57$1,[createVNode(he,{modelValue:unref(head_data).modified.timestamp,"onUpdate:modelValue":de[17]||(de[17]=ze=>unref(head_data).modified.timestamp=ze),controls:!1,precision:0,disabled:""},null,8,["modelValue"]),createVNode(Ne,{class:"tips",effect:"dark",content:re.value.modified,placement:"bottom"},{default:withCtx(()=>[createVNode(Ce,null,{default:withCtx(()=>[createVNode(_e)]),_:1})]),_:1},8,["content"]),createVNode(xe,{class:"date-picker",modelValue:unref(head_data).modified.value,"onUpdate:modelValue":de[18]||(de[18]=ze=>unref(head_data).modified.value=ze),onChange:k,type:"datetime",placeholder:"Select date and time"},null,8,["modelValue"])])]),createBaseVNode("div",_hoisted_58$1,[_hoisted_59$1,createBaseVNode("div",_hoisted_60$1,[createBaseVNode("div",_hoisted_61$1,[createBaseVNode("div",_hoisted_62$1,[createVNode($e,{modelValue:unref(head_data).macStyle[0],"onUpdate:modelValue":de[19]||(de[19]=ze=>unref(head_data).macStyle[0]=ze)},null,8,["modelValue"])]),_hoisted_63$1,createBaseVNode("div",_hoisted_64$1,toDisplayString$1(ue.value[0]),1)]),createBaseVNode("div",_hoisted_65$1,[createBaseVNode("div",_hoisted_66$1,[createVNode($e,{modelValue:unref(head_data).macStyle[1],"onUpdate:modelValue":de[20]||(de[20]=ze=>unref(head_data).macStyle[1]=ze)},null,8,["modelValue"])]),_hoisted_67$1,createBaseVNode("div",_hoisted_68$1,toDisplayString$1(ue.value[1]),1)]),createBaseVNode("div",_hoisted_69$1,[createBaseVNode("div",_hoisted_70$1,[createVNode($e,{modelValue:unref(head_data).macStyle[2],"onUpdate:modelValue":de[21]||(de[21]=ze=>unref(head_data).macStyle[2]=ze)},null,8,["modelValue"])]),_hoisted_71$1,createBaseVNode("div",_hoisted_72$1,toDisplayString$1(ue.value[2]),1)]),createBaseVNode("div",_hoisted_73$1,[createBaseVNode("div",_hoisted_74$1,[createVNode($e,{modelValue:unref(head_data).macStyle[3],"onUpdate:modelValue":de[22]||(de[22]=ze=>unref(head_data).macStyle[3]=ze)},null,8,["modelValue"])]),_hoisted_75$1,createBaseVNode("div",_hoisted_76$1,toDisplayString$1(ue.value[3]),1)]),createBaseVNode("div",_hoisted_77$1,[createBaseVNode("div",_hoisted_78$1,[createVNode($e,{modelValue:unref(head_data).macStyle[4],"onUpdate:modelValue":de[23]||(de[23]=ze=>unref(head_data).macStyle[4]=ze)},null,8,["modelValue"])]),_hoisted_79$1,createBaseVNode("div",_hoisted_80$1,toDisplayString$1(ue.value[4]),1)]),createBaseVNode("div",_hoisted_81$1,[createBaseVNode("div",_hoisted_82$1,[createVNode($e,{modelValue:unref(head_data).macStyle[5],"onUpdate:modelValue":de[24]||(de[24]=ze=>unref(head_data).macStyle[5]=ze)},null,8,["modelValue"])]),_hoisted_83$1,createBaseVNode("div",_hoisted_84$1,toDisplayString$1(ue.value[5]),1)]),createBaseVNode("div",_hoisted_85$1,[createBaseVNode("div",_hoisted_86$1,[createVNode($e,{modelValue:unref(head_data).macStyle[6],"onUpdate:modelValue":de[25]||(de[25]=ze=>unref(head_data).macStyle[6]=ze)},null,8,["modelValue"])]),_hoisted_87$1,createBaseVNode("div",_hoisted_88$1,toDisplayString$1(ue.value[6]),1)])])]),createBaseVNode("div",_hoisted_89$1,[_hoisted_90,createBaseVNode("div",_hoisted_91,[createVNode(he,{modelValue:unref(head_data).lowestRecPPEM,"onUpdate:modelValue":de[26]||(de[26]=ze=>unref(head_data).lowestRecPPEM=ze),onChange:de[27]||(de[27]=ze=>g("lowestRecPPEM",ze)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(Ne,{class:"tips",effect:"dark",content:re.value.lowestRecPPEM,placement:"bottom"},{default:withCtx(()=>[createVNode(Ce,null,{default:withCtx(()=>[createVNode(_e)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_92,toDisplayString$1(r.value.lowestRecPPEM.tip),1)])]),createBaseVNode("div",_hoisted_93,[_hoisted_94,createBaseVNode("div",_hoisted_95,[createVNode(he,{modelValue:unref(head_data).fontDirectionHint,"onUpdate:modelValue":de[28]||(de[28]=ze=>unref(head_data).fontDirectionHint=ze),onChange:de[29]||(de[29]=ze=>g("fontDirectionHint",ze)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(Ne,{class:"tips",effect:"dark",content:re.value.fontDirectionHint,placement:"bottom"},{default:withCtx(()=>[createVNode(Ce,null,{default:withCtx(()=>[createVNode(_e)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_96,toDisplayString$1(r.value.fontDirectionHint.tip),1)])])]),_:1})}}}),HeadPanel=_export_sfc(_sfc_main$s,[["__scopeId","data-v-2384f384"]]),_withScopeId$8=e=>(pushScopeId("data-v-3ad2608e"),e=e(),popScopeId(),e),_hoisted_1$q={class:"table-item"},_hoisted_2$p=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"majorVersion",-1)),_hoisted_3$h={class:"item-content"},_hoisted_4$e={class:"tips"},_hoisted_5$b={class:"table-item"},_hoisted_6$a=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"minorVersion",-1)),_hoisted_7$a={class:"item-content"},_hoisted_8$a={class:"tips"},_hoisted_9$a={class:"table-item"},_hoisted_10$a=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"lineGap",-1)),_hoisted_11$9={class:"item-content"},_hoisted_12$9={class:"tips"},_hoisted_13$7={class:"table-item"},_hoisted_14$7=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"caretSlopeRise",-1)),_hoisted_15$4={class:"item-content"},_hoisted_16$4={class:"tips"},_hoisted_17$3={class:"table-item"},_hoisted_18$2=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"caretSlopeRun",-1)),_hoisted_19$2={class:"item-content"},_hoisted_20$2={class:"tips"},_hoisted_21$2={class:"table-item"},_hoisted_22$2=_withScopeId$8(()=>createBaseVNode("div",{class:"item-name"},"caretOffset",-1)),_hoisted_23$2={class:"item-content"},_hoisted_24$2={class:"tips"},_sfc_main$r=defineComponent({__name:"hhea",setup(e){const{locale:n}=useI18n(),r=ref({majorVersion:{valid:!0,tip:""},minorVersion:{valid:!0,tip:""},lineGap:{valid:!0,tip:""},caretSlopeRise:{valid:!0,tip:""},caretSlopeRun:{valid:!0,tip:""},caretOffset:{valid:!0,tip:""}}),g=(V,L)=>{switch(V){case"majorVersion":{const z=validators.uint16(L);let j="";z||(n.value==="zh"?j="uint16":n.value==="en"&&(j="Invalid format: uint16 required")),r.value.majorVersion.valid=z,r.value.majorVersion.tip=j;break}case"minorVersion":{const z=validators.uint16(L);let j="";z||(n.value==="zh"?j="uint16":n.value==="en"&&(j="Invalid format: uint16 required")),r.value.minorVersion.valid=z,r.value.minorVersion.tip=j;break}case"lineGap":{const z=validators.FWORD(L);let j="";z||(n.value==="zh"?j="":n.value==="en"&&(j="Invalid format")),r.value.lineGap.valid=z,r.value.lineGap.tip=j;break}case"caretSlopeRise":{const z=validators.int16(L);let j="";z||(n.value==="zh"?j="uint16":n.value==="en"&&(j="Invalid format: uint16 required")),r.value.caretSlopeRise.valid=z,r.value.caretSlopeRise.tip=j;break}case"caretSlopeRun":{const z=validators.int16(L);let j="";z||(n.value==="zh"?j="int16":n.value==="en"&&(j="Invalid format: int16 required")),r.value.caretSlopeRun.valid=z,r.value.caretSlopeRun.tip=j;break}case"caretOffset":{const z=validators.int16(L);let j="";z||(n.value==="zh"?j="int16":n.value==="en"&&(j="Invalid format: int16 required")),r.value.caretOffset.valid=z,r.value.caretOffset.tip=j;break}}},y={majorVersion:"uint16",minorVersion:"uint16",lineGap:"FWORD",caretSlopeRise:" 1int16",caretSlopeRun:" 0int16",caretOffset:" 0int16"},k={majorVersion:"Major version number of the table format (uint16)",minorVersion:"Minor version number of the table format (uint16)",lineGap:"Additional space between lines (extra spacing between text rows), format: FWORD",caretSlopeRise:"Vertical slope component defining caret angle (typically 1). Format: int16",caretSlopeRun:"Horizontal slope component defining caret angle (typically 0). Format: int16",caretOffset:"Horizontal offset from standard caret position (usually 0). Format: int16"},$=computed(()=>n.value==="zh"?y:n.value==="en"?k:y);return(V,L)=>{const z=resolveComponent("el-input-number"),j=resolveComponent("QuestionFilled"),ae=resolveComponent("el-icon"),re=resolveComponent("el-tooltip"),oe=resolveComponent("el-scrollbar");return openBlock(),createBlock(oe,{height:"460px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$q,[_hoisted_2$p,createBaseVNode("div",_hoisted_3$h,[createVNode(z,{modelValue:unref(hhea_data).majorVersion,"onUpdate:modelValue":L[0]||(L[0]=ue=>unref(hhea_data).majorVersion=ue),onChange:L[1]||(L[1]=ue=>g("majorVersion",ue)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(re,{class:"tips",effect:"dark",content:$.value.majorVersion,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_4$e,toDisplayString$1(r.value.majorVersion.tip),1)])]),createBaseVNode("div",_hoisted_5$b,[_hoisted_6$a,createBaseVNode("div",_hoisted_7$a,[createVNode(z,{modelValue:unref(hhea_data).minorVersion,"onUpdate:modelValue":L[2]||(L[2]=ue=>unref(hhea_data).minorVersion=ue),onChange:L[3]||(L[3]=ue=>g("minorVersion",ue)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(re,{class:"tips",effect:"dark",content:$.value.minorVersion,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_8$a,toDisplayString$1(r.value.minorVersion.tip),1)])]),createBaseVNode("div",_hoisted_9$a,[_hoisted_10$a,createBaseVNode("div",_hoisted_11$9,[createVNode(z,{modelValue:unref(hhea_data).lineGap,"onUpdate:modelValue":L[4]||(L[4]=ue=>unref(hhea_data).lineGap=ue),onChange:L[5]||(L[5]=ue=>g("lineGap",ue)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(re,{class:"tips",effect:"dark",content:$.value.lineGap,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_12$9,toDisplayString$1(r.value.lineGap.tip),1)])]),createBaseVNode("div",_hoisted_13$7,[_hoisted_14$7,createBaseVNode("div",_hoisted_15$4,[createVNode(z,{modelValue:unref(hhea_data).caretSlopeRise,"onUpdate:modelValue":L[6]||(L[6]=ue=>unref(hhea_data).caretSlopeRise=ue),onChange:L[7]||(L[7]=ue=>g("caretSlopeRise",ue)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(re,{class:"tips",effect:"dark",content:$.value.caretSlopeRise,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_16$4,toDisplayString$1(r.value.caretSlopeRise.tip),1)])]),createBaseVNode("div",_hoisted_17$3,[_hoisted_18$2,createBaseVNode("div",_hoisted_19$2,[createVNode(z,{modelValue:unref(hhea_data).caretSlopeRun,"onUpdate:modelValue":L[8]||(L[8]=ue=>unref(hhea_data).caretSlopeRun=ue),onChange:L[9]||(L[9]=ue=>g("caretSlopeRun",ue)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(re,{class:"tips",effect:"dark",content:$.value.caretSlopeRun,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_20$2,toDisplayString$1(r.value.caretSlopeRun.tip),1)])]),createBaseVNode("div",_hoisted_21$2,[_hoisted_22$2,createBaseVNode("div",_hoisted_23$2,[createVNode(z,{modelValue:unref(hhea_data).caretOffset,"onUpdate:modelValue":L[10]||(L[10]=ue=>unref(hhea_data).caretOffset=ue),onChange:L[11]||(L[11]=ue=>g("caretOffset",ue)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(re,{class:"tips",effect:"dark",content:$.value.caretOffset,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_24$2,toDisplayString$1(r.value.caretOffset.tip),1)])])]),_:1})}}}),HheaPanel=_export_sfc(_sfc_main$r,[["__scopeId","data-v-3ad2608e"]]),_hoisted_1$p={class:"table-item"},_hoisted_2$o={class:"item-row-1"},_hoisted_3$g={class:"item-row-2"},_hoisted_4$d={class:"add-item-btn"},_sfc_main$q=defineComponent({__name:"name",setup(e){const{t:n,tm:r}=useI18n(),y=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"].map((j,ae)=>({label:j,value:ae})),k=[{label:"Unicode",value:0,disabled:!0},{label:"Macintosh",value:1,disabled:!0},{label:"Windows",value:3,disabled:!1}],$=[{label:"Unicode BMP",value:1}],V=[{label:"zh",value:2052},{label:"zh-HK",value:3076},{label:"zh-MO",value:5124},{label:"zh-SG",value:4100},{label:"zh-TW",value:1028},{label:"en",value:1033}],L=()=>{name_data.value.push({nameID:1,nameLabel:"fontFamily",platformID:3,encodingID:1,langID:2052,value:"",default:!1})},z=j=>{name_data.value[j].default||name_data.value.splice(j,1)};return(j,ae)=>{const re=resolveComponent("el-option"),oe=resolveComponent("el-select"),ue=resolveComponent("el-button"),le=resolveComponent("el-input"),de=resolveComponent("QuestionFilled"),he=resolveComponent("el-icon"),_e=resolveComponent("el-tooltip"),Ce=resolveComponent("el-scrollbar");return openBlock(),createBlock(Ce,{height:"460px"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(name_data),(Ne,$e)=>(openBlock(),createElementBlock("div",_hoisted_1$p,[createBaseVNode("div",_hoisted_2$o,[createVNode(oe,{modelValue:Ne.nameID,"onUpdate:modelValue":xe=>Ne.nameID=xe,class:"name-id-select"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(y),xe=>(openBlock(),createBlock(re,{key:xe.value,label:xe.label,value:xe.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),createVNode(oe,{modelValue:Ne.langID,"onUpdate:modelValue":xe=>Ne.langID=xe,class:"lang-id-select"},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(V,xe=>createVNode(re,{key:xe.value,label:xe.label,value:xe.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"]),createVNode(oe,{modelValue:Ne.platformID,"onUpdate:modelValue":xe=>Ne.platformID=xe,class:"lang-id-select"},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(k,xe=>createVNode(re,{key:xe.value,label:xe.label,value:xe.value,disabled:xe.disabled},null,8,["label","value","disabled"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"]),createVNode(oe,{modelValue:Ne.encodingID,"onUpdate:modelValue":xe=>Ne.encodingID=xe,class:"lang-id-select"},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList($,xe=>createVNode(re,{key:xe.value,label:xe.label,value:xe.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"]),withDirectives(createVNode(ue,{onPointerdown:()=>z($e),type:"danger",icon:unref(delete_default),style:normalizeStyle({backgroundColor:"rgb(196, 86.4, 86.4)",color:"var(--light-0)",border:"1px solid var(--light-5)"})},null,8,["onPointerdown","icon","style"]),[[vShow,!Ne.default]])]),createBaseVNode("div",_hoisted_3$g,[createVNode(le,{modelValue:Ne.value,"onUpdate:modelValue":xe=>Ne.value=xe},null,8,["modelValue","onUpdate:modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:unref(r)("dialogs.fontSettingsDialog.nameTableTip"),placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"])])]))),256)),createBaseVNode("div",_hoisted_4$d,[createVNode(ue,{onPointerdown:L},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("dialogs.fontSettingsDialog.addItem")),1)]),_:1})])]),_:1})}}}),NamePanel=_export_sfc(_sfc_main$q,[["__scopeId","data-v-f904aa49"]]),_withScopeId$7=e=>(pushScopeId("data-v-b275f007"),e=e(),popScopeId(),e),_hoisted_1$o={class:"table-item"},_hoisted_2$n=_withScopeId$7(()=>createBaseVNode("div",{class:"item-name"},"version",-1)),_hoisted_3$f={class:"item-content"},_hoisted_4$c={class:"table-item"},_hoisted_5$a=_withScopeId$7(()=>createBaseVNode("div",{class:"item-name"},"italicAngle",-1)),_hoisted_6$9={class:"item-content"},_hoisted_7$9={class:"tips"},_hoisted_8$9={class:"table-item"},_hoisted_9$9=_withScopeId$7(()=>createBaseVNode("div",{class:"item-name"},"lineGap",-1)),_hoisted_10$9={class:"item-content"},_hoisted_11$8={class:"tips"},_hoisted_12$8={class:"table-item"},_hoisted_13$6=_withScopeId$7(()=>createBaseVNode("div",{class:"item-name"},"underlineThickness",-1)),_hoisted_14$6={class:"item-content"},_hoisted_15$3={class:"tips"},_hoisted_16$3={class:"table-item"},_hoisted_17$2=_withScopeId$7(()=>createBaseVNode("div",{class:"item-name"},"isFixedPitch",-1)),_hoisted_18$1={class:"item-content"},_hoisted_19$1={class:"tips"},_hoisted_20$1={class:"table-item"},_hoisted_21$1=_withScopeId$7(()=>createBaseVNode("div",{class:"item-name"},"minMemType42",-1)),_hoisted_22$1={class:"item-content"},_hoisted_23$1={class:"tips"},_hoisted_24$1={class:"table-item"},_hoisted_25$1=_withScopeId$7(()=>createBaseVNode("div",{class:"item-name"},"maxMemType42",-1)),_hoisted_26$1={class:"item-content"},_hoisted_27$1={class:"tips"},_hoisted_28$1={class:"table-item"},_hoisted_29$1=_withScopeId$7(()=>createBaseVNode("div",{class:"item-name"},"minMemType1",-1)),_hoisted_30$1={class:"item-content"},_hoisted_31$1={class:"tips"},_hoisted_32$1={class:"table-item"},_hoisted_33$1=_withScopeId$7(()=>createBaseVNode("div",{class:"item-name"},"maxMemType1",-1)),_hoisted_34$1={class:"item-content"},_hoisted_35$1={class:"tips"},_sfc_main$p=defineComponent({__name:"post",setup(e){const{locale:n}=useI18n(),r=ref({italicAngle:{valid:!0,tip:""},underlinePosition:{valid:!0,tip:""},underlineThickness:{valid:!0,tip:""},isFixedPitch:{valid:!0,tip:""},minMemType42:{valid:!0,tip:""},maxMemType42:{valid:!0,tip:""},minMemType1:{valid:!0,tip:""},maxMemType1:{valid:!0,tip:""}}),g=(V,L)=>{switch(V){case"italicAngle":{const z=validators.Fixed(L);let j="";z||(n.value==="zh"?j="Fixed":n.value==="en"&&(j="Invalid format: Fixed required")),r.value.italicAngle.valid=z,r.value.italicAngle.tip=j;break}case"underlinePosition":{const z=validators.FWORD(L);let j="";z||(n.value==="zh"?j="FWORD":n.value==="en"&&(j="Invalid format: FWORD required")),r.value.underlinePosition.valid=z,r.value.underlinePosition.tip=j;break}case"underlineThickness":{const z=validators.FWORD(L);let j="";z||(n.value==="zh"?j="":n.value==="en"&&(j="Invalid format")),r.value.underlineThickness.valid=z,r.value.underlineThickness.tip=j;break}case"isFixedPitch":{const z=validators.uint32(L);let j="";z||(n.value==="zh"?j="uint32":n.value==="en"&&(j="Invalid format: uint32 required")),r.value.isFixedPitch.valid=z,r.value.isFixedPitch.tip=j;break}case"minMemType42":{const z=validators.uint32(L);let j="";z||(n.value==="zh"?j="uint32":n.value==="en"&&(j="Invalid format: uint32 required")),r.value.minMemType42.valid=z,r.value.minMemType42.tip=j;break}case"maxMemType42":{const z=validators.uint32(L);let j="";z||(n.value==="zh"?j="uint32":n.value==="en"&&(j="Invalid format: uint32 required")),r.value.maxMemType42.valid=z,r.value.maxMemType42.tip=j;break}case"minMemType1":{const z=validators.uint32(L);let j="";z||(n.value==="zh"?j="uint32":n.value==="en"&&(j="Invalid format: uint32 required")),r.value.minMemType1.valid=z,r.value.minMemType1.tip=j;break}case"maxMemType1":{const z=validators.uint32(L);let j="";z||(n.value==="zh"?j="uint32":n.value==="en"&&(j="Invalid format: uint32 required")),r.value.maxMemType1.valid=z,r.value.maxMemType1.tip=j;break}}},y={version:"version 3.0",italicAngle:"",underlinePosition:" y ",underlineThickness:"U+005F LOW LINE OS/2 ",isFixedPitch:" 0",minMemType42:" OpenType ",maxMemType42:" OpenType ",minMemType1:" OpenType  Type 1 ",maxMemType1:" OpenType  Type 1 "},k={version:"Version 3.0",italicAngle:"Italic angle in degrees (counter-clockwise from vertical). Positive for left-leaning, negative for right-leaning italic. Upright=0",underlinePosition:"Recommended y-coordinate for top of underline stroke",underlineThickness:"Recommended underline stroke thickness. Should match U+005F LOW LINE glyph and OS/2 table's strikeout thickness",isFixedPitch:"Non-zero value indicates monospace font; 0 indicates proportional font",minMemType42:"Minimum memory usage when downloading as OpenType/CFF font (Type 42)",maxMemType42:"Maximum memory usage when downloading as OpenType/CFF font (Type 42)",minMemType1:"Minimum memory usage when downloaded as Type 1 font",maxMemType1:"Maximum memory usage when downloaded as Type 1 font"},$=computed(()=>n.value==="zh"?y:n.value==="en"?k:y);return(V,L)=>{const z=resolveComponent("el-input"),j=resolveComponent("QuestionFilled"),ae=resolveComponent("el-icon"),re=resolveComponent("el-tooltip"),oe=resolveComponent("el-input-number"),ue=resolveComponent("el-scrollbar");return openBlock(),createBlock(ue,{height:"460px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$o,[_hoisted_2$n,createBaseVNode("div",_hoisted_3$f,[createVNode(z,{"model-value":"version 3.0",controls:!1,disabled:""}),createVNode(re,{class:"tips",effect:"dark",content:$.value.version,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"])])]),createBaseVNode("div",_hoisted_4$c,[_hoisted_5$a,createBaseVNode("div",_hoisted_6$9,[createVNode(oe,{modelValue:unref(post_data).italicAngle,"onUpdate:modelValue":L[0]||(L[0]=le=>unref(post_data).italicAngle=le),onChange:L[1]||(L[1]=le=>g("italicAngle",le)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(re,{class:"tips",effect:"dark",content:$.value.italicAngle,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_7$9,toDisplayString$1(r.value.italicAngle.tip),1)])]),createBaseVNode("div",_hoisted_8$9,[_hoisted_9$9,createBaseVNode("div",_hoisted_10$9,[createVNode(oe,{modelValue:unref(post_data).underlinePosition,"onUpdate:modelValue":L[2]||(L[2]=le=>unref(post_data).underlinePosition=le),onChange:L[3]||(L[3]=le=>g("underlinePosition",le)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(re,{class:"tips",effect:"dark",content:$.value.underlinePosition,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_11$8,toDisplayString$1(r.value.underlinePosition.tip),1)])]),createBaseVNode("div",_hoisted_12$8,[_hoisted_13$6,createBaseVNode("div",_hoisted_14$6,[createVNode(oe,{modelValue:unref(post_data).underlineThickness,"onUpdate:modelValue":L[4]||(L[4]=le=>unref(post_data).underlineThickness=le),onChange:L[5]||(L[5]=le=>g("underlineThickness",le)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(re,{class:"tips",effect:"dark",content:$.value.underlineThickness,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_15$3,toDisplayString$1(r.value.underlineThickness.tip),1)])]),createBaseVNode("div",_hoisted_16$3,[_hoisted_17$2,createBaseVNode("div",_hoisted_18$1,[createVNode(oe,{modelValue:unref(post_data).isFixedPitch,"onUpdate:modelValue":L[6]||(L[6]=le=>unref(post_data).isFixedPitch=le),onChange:L[7]||(L[7]=le=>g("isFixedPitch",le)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(re,{class:"tips",effect:"dark",content:$.value.isFixedPitch,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_19$1,toDisplayString$1(r.value.isFixedPitch.tip),1)])]),createBaseVNode("div",_hoisted_20$1,[_hoisted_21$1,createBaseVNode("div",_hoisted_22$1,[createVNode(oe,{modelValue:unref(post_data).minMemType42,"onUpdate:modelValue":L[8]||(L[8]=le=>unref(post_data).minMemType42=le),onChange:L[9]||(L[9]=le=>g("minMemType42",le)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(re,{class:"tips",effect:"dark",content:$.value.minMemType42,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_23$1,toDisplayString$1(r.value.minMemType42.tip),1)])]),createBaseVNode("div",_hoisted_24$1,[_hoisted_25$1,createBaseVNode("div",_hoisted_26$1,[createVNode(oe,{modelValue:unref(post_data).maxMemType42,"onUpdate:modelValue":L[10]||(L[10]=le=>unref(post_data).maxMemType42=le),onChange:L[11]||(L[11]=le=>g("maxMemType42",le)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(re,{class:"tips",effect:"dark",content:$.value.maxMemType42,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_27$1,toDisplayString$1(r.value.maxMemType42.tip),1)])]),createBaseVNode("div",_hoisted_28$1,[_hoisted_29$1,createBaseVNode("div",_hoisted_30$1,[createVNode(oe,{modelValue:unref(post_data).minMemType1,"onUpdate:modelValue":L[12]||(L[12]=le=>unref(post_data).minMemType1=le),onChange:L[13]||(L[13]=le=>g("minMemType1",le)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(re,{class:"tips",effect:"dark",content:$.value.minMemType1,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_31$1,toDisplayString$1(r.value.minMemType1.tip),1)])]),createBaseVNode("div",_hoisted_32$1,[_hoisted_33$1,createBaseVNode("div",_hoisted_34$1,[createVNode(oe,{modelValue:unref(post_data).maxMemType1,"onUpdate:modelValue":L[14]||(L[14]=le=>unref(post_data).maxMemType1=le),onChange:L[15]||(L[15]=le=>g("maxMemType1",le)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(re,{class:"tips",effect:"dark",content:$.value.maxMemType1,placement:"bottom"},{default:withCtx(()=>[createVNode(ae,null,{default:withCtx(()=>[createVNode(j)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_35$1,toDisplayString$1(r.value.maxMemType1.tip),1)])])]),_:1})}}}),PostPanel=_export_sfc(_sfc_main$p,[["__scopeId","data-v-b275f007"]]),_withScopeId$6=e=>(pushScopeId("data-v-fdf651ef"),e=e(),popScopeId(),e),_hoisted_1$n={class:"table-item"},_hoisted_2$m=_withScopeId$6(()=>createBaseVNode("div",{class:"item-name"},"version",-1)),_hoisted_3$e={class:"item-content"},_hoisted_4$b={class:"tips"},_hoisted_5$9={class:"table-item"},_hoisted_6$8=_withScopeId$6(()=>createBaseVNode("div",{class:"item-name"},"usWeightClass",-1)),_hoisted_7$8={class:"item-content"},_hoisted_8$8={class:"tips"},_hoisted_9$8={class:"table-item"},_hoisted_10$8=_withScopeId$6(()=>createBaseVNode("div",{class:"item-name"},"usWidthClass",-1)),_hoisted_11$7={class:"item-content"},_hoisted_12$7={class:"tips"},_hoisted_13$5={class:"table-item"},_hoisted_14$5=_withScopeId$6(()=>createBaseVNode("div",{class:"item-name"},"fsType",-1)),_hoisted_15$2={class:"item-content"},_hoisted_16$2={class:"tips"},_hoisted_17$1={class:"table-item"},_hoisted_18=_withScopeId$6(()=>createBaseVNode("div",{class:"item-name"},"ySubscriptXSize",-1)),_hoisted_19={class:"item-content"},_hoisted_20={class:"tips"},_hoisted_21={class:"table-item"},_hoisted_22=_withScopeId$6(()=>createBaseVNode("div",{class:"item-name"},"ySubscriptYSize",-1)),_hoisted_23={class:"item-content"},_hoisted_24={class:"tips"},_hoisted_25={class:"table-item"},_hoisted_26=_withScopeId$6(()=>createBaseVNode("div",{class:"item-name"},"ySubscriptXOffset",-1)),_hoisted_27={class:"item-content"},_hoisted_28={class:"tips"},_hoisted_29={class:"table-item"},_hoisted_30=_withScopeId$6(()=>createBaseVNode("div",{class:"item-name"},"ySubscriptYOffset",-1)),_hoisted_31={class:"item-content"},_hoisted_32={class:"tips"},_hoisted_33={class:"table-item"},_hoisted_34=_withScopeId$6(()=>createBaseVNode("div",{class:"item-name"},"ySuperscriptXSize",-1)),_hoisted_35={class:"item-content"},_hoisted_36={class:"tips"},_hoisted_37={class:"table-item"},_hoisted_38=_withScopeId$6(()=>createBaseVNode("div",{class:"item-name"},"ySuperscriptYSize",-1)),_hoisted_39={class:"item-content"},_hoisted_40={class:"tips"},_hoisted_41={class:"table-item"},_hoisted_42=_withScopeId$6(()=>createBaseVNode("div",{class:"item-name"},"ySuperscriptXOffset",-1)),_hoisted_43={class:"item-content"},_hoisted_44={class:"tips"},_hoisted_45={class:"table-item"},_hoisted_46=_withScopeId$6(()=>createBaseVNode("div",{class:"item-name"},"ySuperscriptYOffset",-1)),_hoisted_47={class:"item-content"},_hoisted_48={class:"tips"},_hoisted_49={class:"table-item"},_hoisted_50=_withScopeId$6(()=>createBaseVNode("div",{class:"item-name"},"yStrikeoutSize",-1)),_hoisted_51={class:"item-content"},_hoisted_52={class:"tips"},_hoisted_53={class:"table-item"},_hoisted_54=_withScopeId$6(()=>createBaseVNode("div",{class:"item-name"},"yStrikeoutPosition",-1)),_hoisted_55={class:"item-content"},_hoisted_56={class:"tips"},_hoisted_57={class:"table-item"},_hoisted_58=_withScopeId$6(()=>createBaseVNode("div",{class:"item-name"},"sFamilyClass",-1)),_hoisted_59={class:"item-content"},_hoisted_60={class:"tips"},_hoisted_61={class:"table-item"},_hoisted_62=_withScopeId$6(()=>createBaseVNode("div",{class:"item-name"},"panose",-1)),_hoisted_63={class:"item-content",style:{flexDirection:"column"}},_hoisted_64={class:"panose-item"},_hoisted_65={class:"panose-item-input"},_hoisted_66={class:"panose-item-description"},_hoisted_67={class:"table-item"},_hoisted_68=_withScopeId$6(()=>createBaseVNode("div",{class:"item-name"},"achVendID",-1)),_hoisted_69={class:"item-content"},_hoisted_70={class:"tips"},_hoisted_71={class:"table-item"},_hoisted_72=_withScopeId$6(()=>createBaseVNode("div",{class:"item-name"},"fsSelection",-1)),_hoisted_73={class:"item-content",style:{flexDirection:"column"}},_hoisted_74={class:"fs-selection-item"},_hoisted_75={class:"fs-selection-item-checkbox"},_hoisted_76={class:"fs-selection-item-name"},_hoisted_77={class:"fs-selection-item-description"},_hoisted_78={class:"table-item"},_hoisted_79=_withScopeId$6(()=>createBaseVNode("div",{class:"item-name"},"usMaxContext",-1)),_hoisted_80={class:"item-content"},_hoisted_81={class:"tips"},_hoisted_82={class:"table-item"},_hoisted_83=_withScopeId$6(()=>createBaseVNode("div",{class:"item-name"},"usLowerOpticalPointSize",-1)),_hoisted_84={class:"item-content"},_hoisted_85={class:"tips"},_hoisted_86={class:"table-item"},_hoisted_87=_withScopeId$6(()=>createBaseVNode("div",{class:"item-name"},"usUpperOpticalPointSize",-1)),_hoisted_88={class:"item-content"},_hoisted_89={class:"tips"},_sfc_main$o=defineComponent({__name:"os_2",setup(e){const{locale:n}=useI18n(),r=ref({version:{valid:!0,tip:""},usWeightClass:{valid:!0,tip:""},usWidthClass:{valid:!0,tip:""},fsType:{valid:!0,tip:""},ySubscriptXSize:{valid:!0,tip:""},ySubscriptYSize:{valid:!0,tip:""},ySubscriptXOffset:{valid:!0,tip:""},ySubscriptYOffset:{valid:!0,tip:""},ySuperscriptXSize:{valid:!0,tip:""},ySuperscriptYSize:{valid:!0,tip:""},ySuperscriptXOffset:{valid:!0,tip:""},ySuperscriptYOffset:{valid:!0,tip:""},yStrikeoutSize:{valid:!0,tip:""},yStrikeoutPosition:{valid:!0,tip:""},sFamilyClass:{valid:!0,tip:""},achVendID:{valid:!0,tip:""},usMaxContext:{valid:!0,tip:""},usLowerOpticalPointSize:{valid:!0,tip:""},usUpperOpticalPointSize:{valid:!0,tip:""}}),g=(oe,ue)=>{switch(oe){case"version":{const le=validators.uint16(ue);let de="";le||(n.value==="zh"?de="uint16":n.value==="en"&&(de="Invalid format: uint16 required")),r.value.version.valid=le,r.value.version.tip=de;break}case"usWeightClass":{const le=validators.uint16(ue);let de="";le||(n.value==="zh"?de="uint16":n.value==="en"&&(de="Invalid format: uint16 required")),r.value.usWeightClass.valid=le,r.value.usWeightClass.tip=de;break}case"usWidthClass":{const le=validators.uint16(ue);let de="";le||(n.value==="zh"?de="uint16":n.value==="en"&&(de="Invalid format: uint16 required")),r.value.usWidthClass.valid=le,r.value.usWidthClass.tip=de;break}case"fsType":{const le=validators.uint16(ue);let de="";le||(n.value==="zh"?de="":n.value==="en"&&(de="Invalid format")),r.value.fsType.valid=le,r.value.fsType.tip=de;break}case"ySubscriptXSize":{const le=validators.FWORD(ue);let de="";le||(n.value==="zh"?de="FWORD":n.value==="en"&&(de="Invalid format: FWORD required")),r.value.ySubscriptXSize.valid=le,r.value.ySubscriptXSize.tip=de;break}case"ySubscriptYSize":{const le=validators.FWORD(ue);let de="";le||(n.value==="zh"?de="FWORD":n.value==="en"&&(de="Invalid format: FWORD required")),r.value.ySubscriptYSize.valid=le,r.value.ySubscriptYSize.tip=de;break}case"ySubscriptXOffset":{const le=validators.FWORD(ue);let de="";le||(n.value==="zh"?de="FWORD":n.value==="en"&&(de="Invalid format: FWORD required")),r.value.ySubscriptXOffset.valid=le,r.value.ySubscriptXOffset.tip=de;break}case"ySubscriptYOffset":{const le=validators.FWORD(ue);let de="";le||(n.value==="zh"?de="FWORD":n.value==="en"&&(de="Invalid format: FWORD required")),r.value.ySubscriptYOffset.valid=le,r.value.ySubscriptYOffset.tip=de;break}case"ySuperscriptXSize":{const le=validators.FWORD(ue);let de="";le||(n.value==="zh"?de="FWORD":n.value==="en"&&(de="Invalid format: FWORD required")),r.value.ySuperscriptXSize.valid=le,r.value.ySuperscriptXSize.tip=de;break}case"ySuperscriptYSize":{const le=validators.FWORD(ue);let de="";le||(n.value==="zh"?de="FWORD":n.value==="en"&&(de="Invalid format: FWORD required")),r.value.ySuperscriptYSize.valid=le,r.value.ySuperscriptYSize.tip=de;break}case"ySuperscriptXOffset":{const le=validators.FWORD(ue);let de="";le||(n.value==="zh"?de="FWORD":n.value==="en"&&(de="Invalid format: FWORD required")),r.value.ySuperscriptXOffset.valid=le,r.value.ySuperscriptXOffset.tip=de;break}case"ySuperscriptYOffset":{const le=validators.FWORD(ue);let de="";le||(n.value==="zh"?de="FWORD":n.value==="en"&&(de="Invalid format: FWORD required")),r.value.ySuperscriptXOffset.valid=le,r.value.ySuperscriptYOffset.tip=de;break}case"yStrikeoutSize":{const le=validators.FWORD(ue);let de="";le||(n.value==="zh"?de="FWORD":n.value==="en"&&(de="Invalid format: FWORD required")),r.value.yStrikeoutSize.valid=le,r.value.yStrikeoutSize.tip=de;break}case"yStrikeoutPosition":{const le=validators.FWORD(ue);let de="";le||(n.value==="zh"?de="FWORD":n.value==="en"&&(de="Invalid format: FWORD required")),r.value.yStrikeoutPosition.valid=le,r.value.yStrikeoutPosition.tip=de;break}case"sFamilyClass":{const le=validators.int16(ue);let de="";le||(n.value==="zh"?de="int16":n.value==="en"&&(de="Invalid format: int16 required")),r.value.sFamilyClass.valid=le,r.value.sFamilyClass.tip=de;break}case"achVendID":{const le=validators.Tag(ue);let de="";le||(n.value==="zh"?de="Tag achVendID":n.value==="en"&&(de="Invalid format: Tag achVendID required")),r.value.achVendID.valid=le,r.value.achVendID.tip=de;break}case"usMaxContext":{const le=validators.uint16(ue);let de="";le||(n.value==="zh"?de="uint16":n.value==="en"&&(de="Invalid format: uint16 required")),r.value.usMaxContext.valid=le,r.value.usMaxContext.tip=de;break}case"usLowerOpticalPointSize":{const le=validators.uint16(ue);let de="";le||(n.value==="zh"?de="int16":n.value==="en"&&(de="Invalid format: int16 required")),r.value.usLowerOpticalPointSize.valid=le,r.value.usLowerOpticalPointSize.tip=de;break}case"usUpperOpticalPointSize":{const le=validators.uint16(ue);let de="";le||(n.value==="zh"?de="int16":n.value==="en"&&(de="Invalid format: int16 required")),r.value.usUpperOpticalPointSize.valid=le,r.value.usUpperOpticalPointSize.tip=de;break}}},y={version:"",usWeightClass:"Weight 11000 400Regular700Bold",usWidthClass:" 1Ultra-condensed 9Ultra-expanded",fsType:"",ySubscriptXSize:"",ySubscriptYSize:"",ySubscriptXOffset:" X ",ySubscriptYOffset:" Y ",ySuperscriptXSize:"",ySuperscriptYSize:"",ySuperscriptXOffset:" X ",ySuperscriptYOffset:" Y ",yStrikeoutSize:"",yStrikeoutPosition:"",sFamilyClass:" SerifSans-serif",panose:" PANOSE ",achVendID:" 4 ",fsSelection:" ItalicBoldRegular",usMaxContext:"",usLowerOpticalPointSize:"",usUpperOpticalPointSize:""},k=[{name:"Family Type ( 1)",description:"",range:"0-11"},{name:"Serif Style ( 2)",description:"",range:"0-5"},{name:"Weight ( 3)",description:"",range:"0-9"},{name:"Proportion ( 4)",description:"",range:"0-5"},{name:"Contrast ( 5)",description:"",range:"0-5"},{name:"Stroke Variation ( 6)",description:"",range:"0-3"},{name:"Arm Style ( 7)",description:"",range:"0-3"},{name:"Letterform ( 8)",description:"",range:"0-2"},{name:"Midline ( 9)",description:"",range:"0-2"},{name:"X-height ( 10)",description:' X  "x"X ',range:"0-5 X "}],$=[{name:"Italic",description:""},{name:"Underscore",description:""},{name:"Negative",description:""},{name:"Outlined",description:""},{name:"Strikeout",description:""},{name:"Bold",description:""},{name:"Regular",description:""},{name:"UseTypoMetrics",description:" OS/2  sTypoAscender  sTypoDescender"},{name:"WWS",description:"Weight, Width, Slope"},{name:"Oblique",description:" Italic "}],V={version:"Table version number",usWeightClass:"Font weight (11000 range, e.g. 400=Regular, 700=Bold)",usWidthClass:"Font width classification (1=Ultra-condensed to 9=Ultra-expanded)",fsType:"Font embedding licensing permissions (e.g., print-only embedding restrictions)",ySubscriptXSize:"Recommended horizontal size for subscript characters",ySubscriptYSize:"Recommended vertical size for subscript characters",ySubscriptXOffset:"X-axis offset from baseline for subscript positioning",ySubscriptYOffset:"Y-axis offset from baseline for subscript positioning",ySuperscriptXSize:"Recommended horizontal size for superscript characters",ySuperscriptYSize:"Recommended vertical size for superscript characters",ySuperscriptXOffset:"X-axis offset from baseline for superscript positioning",ySuperscriptYOffset:"Y-axis offset from baseline for superscript positioning",yStrikeoutSize:"Strikeout stroke thickness",yStrikeoutPosition:"Vertical position of strikeout relative to baseline",sFamilyClass:"Font family classification (e.g., Serif/Sans-serif design categories)",panose:"PANOSE classification system for visual font characteristics",achVendID:"4-character font vendor identifier",fsSelection:"Font style flags (bitmask for Italic/Bold/Regular etc.)",usMaxContext:"Maximum context length required for glyph substitution",usLowerOpticalPointSize:"Minimum recommended optical size for this font",usUpperOpticalPointSize:"Maximum recommended optical size for this font"},L=[{name:"Family Type (Byte 1)",description:"Font classification category (e.g., Sans-serif, Serif, Monospace)",range:"Range: 0-11 (No Fit/Text Display/Decorative etc.)"},{name:"Serif Style (Byte 2)",description:"Serif design characteristics (applies to Serif fonts)",range:"Range: 0-5 (No Serif/Square/Thin etc.)"},{name:"Weight (Byte 3)",description:"Stroke thickness progression from light to black",range:"Range: 0-9 (Light/Medium/Bold etc.)"},{name:"Proportion (Byte 4)",description:"Character width characteristics",range:"Range: 0-5 (Monospace/Proportional/Old Style etc.)"},{name:"Contrast (Byte 5)",description:"Stroke thickness variation between vertical/horizontal elements",range:"Range: 0-5 (No Contrast/Low/Medium/High etc.)"},{name:"Stroke Variation (Byte 6)",description:"Transition between thick/thin stroke elements",range:"Range: 0-3 (No Variation/Gradual/Abrupt etc.)"},{name:"Arm Style (Byte 7)",description:"Terminal treatment of non-curved strokes",range:"Range: 0-3 (Straight/Single Serif etc.)"},{name:"Letterform (Byte 8)",description:"Overall letter shape characteristics",range:"Range: 0-2 (Normal/Contact/Weighted etc.)"},{name:"Midline (Byte 9)",description:"Position of character midline",range:"Range: 0-2 (Standard/High/Low)"},{name:"X-height (Byte 10)",description:"Relative height of lowercase letters (without ascenders/descenders)",range:"Range: 0-5 (Constant/Small/Medium etc.)"}],z=[{name:"Italic",description:"Indicates italic style"},{name:"Underscore",description:"Font contains underline metadata (rarely used)"},{name:"Negative",description:"Reverse-video outline effect (white foreground fill)"},{name:"Outlined",description:"Font uses outline effect styling"},{name:"Strikeout",description:"Font contains strikeout metadata"},{name:"Bold",description:"Indicates bold weight style"},{name:"Regular",description:"Base style flag (non-italic/non-bold)"},{name:"UseTypoMetrics",description:"Use OS/2 tables sTypoAscender/sTypoDescender for layout"},{name:"WWS",description:"Font follows Weight-Width-Slope naming scheme"},{name:"Oblique",description:"Mechanical slant style (distinct from italic)"}],j=computed(()=>n.value==="zh"?y:n.value==="en"?V:y),ae=computed(()=>n.value==="zh"?k:n.value==="en"?L:k),re=computed(()=>n.value==="zh"?$:n.value==="en"?z:$);return(oe,ue)=>{const le=resolveComponent("el-input-number"),de=resolveComponent("QuestionFilled"),he=resolveComponent("el-icon"),_e=resolveComponent("el-tooltip"),Ce=resolveComponent("el-input"),Ne=resolveComponent("el-checkbox"),$e=resolveComponent("el-scrollbar");return openBlock(),createBlock($e,{height:"460px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$n,[_hoisted_2$m,createBaseVNode("div",_hoisted_3$e,[createVNode(le,{modelValue:unref(os2_data).version,"onUpdate:modelValue":ue[0]||(ue[0]=xe=>unref(os2_data).version=xe),onChange:ue[1]||(ue[1]=xe=>g("version",xe)),controls:!1,precision:0,disabled:""},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.version,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_4$b,toDisplayString$1(r.value.version.tip),1)])]),createBaseVNode("div",_hoisted_5$9,[_hoisted_6$8,createBaseVNode("div",_hoisted_7$8,[createVNode(le,{modelValue:unref(os2_data).usWeightClass,"onUpdate:modelValue":ue[2]||(ue[2]=xe=>unref(os2_data).usWeightClass=xe),onChange:ue[3]||(ue[3]=xe=>g("usWeightClass",xe)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.usWeightClass,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_8$8,toDisplayString$1(r.value.usWeightClass.tip),1)])]),createBaseVNode("div",_hoisted_9$8,[_hoisted_10$8,createBaseVNode("div",_hoisted_11$7,[createVNode(le,{modelValue:unref(os2_data).usWidthClass,"onUpdate:modelValue":ue[4]||(ue[4]=xe=>unref(os2_data).usWidthClass=xe),onChange:ue[5]||(ue[5]=xe=>g("usWidthClass",xe)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.usWidthClass,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_12$7,toDisplayString$1(r.value.usWidthClass.tip),1)])]),createBaseVNode("div",_hoisted_13$5,[_hoisted_14$5,createBaseVNode("div",_hoisted_15$2,[createVNode(le,{modelValue:unref(os2_data).fsType,"onUpdate:modelValue":ue[6]||(ue[6]=xe=>unref(os2_data).fsType=xe),onChange:ue[7]||(ue[7]=xe=>g("fsType",xe)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.fsType,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_16$2,toDisplayString$1(r.value.fsType.tip),1)])]),createBaseVNode("div",_hoisted_17$1,[_hoisted_18,createBaseVNode("div",_hoisted_19,[createVNode(le,{modelValue:unref(os2_data).ySubscriptXSize,"onUpdate:modelValue":ue[8]||(ue[8]=xe=>unref(os2_data).ySubscriptXSize=xe),onChange:ue[9]||(ue[9]=xe=>g("ySubscriptXSize",xe)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.ySubscriptXSize,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_20,toDisplayString$1(r.value.ySubscriptXSize.tip),1)])]),createBaseVNode("div",_hoisted_21,[_hoisted_22,createBaseVNode("div",_hoisted_23,[createVNode(le,{modelValue:unref(os2_data).ySubscriptYSize,"onUpdate:modelValue":ue[10]||(ue[10]=xe=>unref(os2_data).ySubscriptYSize=xe),onChange:ue[11]||(ue[11]=xe=>g("ySubscriptYSize",xe)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.ySubscriptYSize,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_24,toDisplayString$1(r.value.ySubscriptYSize.tip),1)])]),createBaseVNode("div",_hoisted_25,[_hoisted_26,createBaseVNode("div",_hoisted_27,[createVNode(le,{modelValue:unref(os2_data).ySubscriptXOffset,"onUpdate:modelValue":ue[12]||(ue[12]=xe=>unref(os2_data).ySubscriptXOffset=xe),onChange:ue[13]||(ue[13]=xe=>g("ySubscriptXOffset",xe)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.ySubscriptXOffset,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_28,toDisplayString$1(r.value.ySubscriptXOffset.tip),1)])]),createBaseVNode("div",_hoisted_29,[_hoisted_30,createBaseVNode("div",_hoisted_31,[createVNode(le,{modelValue:unref(os2_data).ySubscriptXOffset,"onUpdate:modelValue":ue[14]||(ue[14]=xe=>unref(os2_data).ySubscriptXOffset=xe),onChange:ue[15]||(ue[15]=xe=>g("ySubscriptYOffset",xe)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.ySubscriptYOffset,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_32,toDisplayString$1(r.value.ySubscriptYOffset.tip),1)])]),createBaseVNode("div",_hoisted_33,[_hoisted_34,createBaseVNode("div",_hoisted_35,[createVNode(le,{modelValue:unref(os2_data).ySuperscriptXSize,"onUpdate:modelValue":ue[16]||(ue[16]=xe=>unref(os2_data).ySuperscriptXSize=xe),onChange:ue[17]||(ue[17]=xe=>g("ySuperscriptXSize",xe)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.ySuperscriptXSize,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_36,toDisplayString$1(r.value.ySuperscriptXSize.tip),1)])]),createBaseVNode("div",_hoisted_37,[_hoisted_38,createBaseVNode("div",_hoisted_39,[createVNode(le,{modelValue:unref(os2_data).ySuperscriptYSize,"onUpdate:modelValue":ue[18]||(ue[18]=xe=>unref(os2_data).ySuperscriptYSize=xe),onChange:ue[19]||(ue[19]=xe=>g("ySuperscriptYSize",xe)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.ySuperscriptYSize,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_40,toDisplayString$1(r.value.ySuperscriptYSize.tip),1)])]),createBaseVNode("div",_hoisted_41,[_hoisted_42,createBaseVNode("div",_hoisted_43,[createVNode(le,{modelValue:unref(os2_data).ySuperscriptXOffset,"onUpdate:modelValue":ue[20]||(ue[20]=xe=>unref(os2_data).ySuperscriptXOffset=xe),onChange:ue[21]||(ue[21]=xe=>g("ySuperscriptXOffset",xe)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.ySuperscriptXOffset,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_44,toDisplayString$1(r.value.ySuperscriptXOffset.tip),1)])]),createBaseVNode("div",_hoisted_45,[_hoisted_46,createBaseVNode("div",_hoisted_47,[createVNode(le,{modelValue:unref(os2_data).ySuperscriptYOffset,"onUpdate:modelValue":ue[22]||(ue[22]=xe=>unref(os2_data).ySuperscriptYOffset=xe),onChange:ue[23]||(ue[23]=xe=>g("ySuperscriptYOffset",xe)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.ySuperscriptYOffset,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_48,toDisplayString$1(r.value.ySuperscriptYOffset.tip),1)])]),createBaseVNode("div",_hoisted_49,[_hoisted_50,createBaseVNode("div",_hoisted_51,[createVNode(le,{modelValue:unref(os2_data).yStrikeoutSize,"onUpdate:modelValue":ue[24]||(ue[24]=xe=>unref(os2_data).yStrikeoutSize=xe),onChange:ue[25]||(ue[25]=xe=>g("yStrikeoutSize",xe)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.yStrikeoutSize,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_52,toDisplayString$1(r.value.yStrikeoutSize.tip),1)])]),createBaseVNode("div",_hoisted_53,[_hoisted_54,createBaseVNode("div",_hoisted_55,[createVNode(le,{modelValue:unref(os2_data).yStrikeoutPosition,"onUpdate:modelValue":ue[26]||(ue[26]=xe=>unref(os2_data).yStrikeoutPosition=xe),onChange:ue[27]||(ue[27]=xe=>g("yStrikeoutPosition",xe)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.yStrikeoutPosition,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_56,toDisplayString$1(r.value.yStrikeoutPosition.tip),1)])]),createBaseVNode("div",_hoisted_57,[_hoisted_58,createBaseVNode("div",_hoisted_59,[createVNode(le,{modelValue:unref(os2_data).sFamilyClass,"onUpdate:modelValue":ue[28]||(ue[28]=xe=>unref(os2_data).sFamilyClass=xe),onChange:ue[29]||(ue[29]=xe=>g("sFamilyClass",xe)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.sFamilyClass,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_60,toDisplayString$1(r.value.sFamilyClass.tip),1)])]),createBaseVNode("div",_hoisted_61,[_hoisted_62,createBaseVNode("div",_hoisted_63,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(os2_data).panose,(xe,Ie)=>(openBlock(),createElementBlock("div",_hoisted_64,[createBaseVNode("div",_hoisted_65,[createVNode(le,{modelValue:unref(os2_data).panose[Ie],"onUpdate:modelValue":ze=>unref(os2_data).panose[Ie]=ze,controls:!1,precision:0,style:{width:"80px"}},null,8,["modelValue","onUpdate:modelValue"])]),createVNode(_e,{class:"tips",effect:"dark",content:ae.value[Ie].range,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:2},1032,["content"]),createBaseVNode("div",_hoisted_66,toDisplayString$1(ae.value[Ie].description),1)]))),256))])]),createBaseVNode("div",_hoisted_67,[_hoisted_68,createBaseVNode("div",_hoisted_69,[createVNode(Ce,{modelValue:unref(os2_data).yStrikeoutPosition,"onUpdate:modelValue":ue[30]||(ue[30]=xe=>unref(os2_data).yStrikeoutPosition=xe),onChange:ue[31]||(ue[31]=xe=>g("yStrikeoutPosition",xe)),controls:!1},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.achVendID,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_70,toDisplayString$1(r.value.achVendID.tip),1)])]),createBaseVNode("div",_hoisted_71,[_hoisted_72,createBaseVNode("div",_hoisted_73,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(os2_data).fsSelection,(xe,Ie)=>(openBlock(),createElementBlock("div",_hoisted_74,[createBaseVNode("div",_hoisted_75,[createVNode(Ne,{modelValue:unref(os2_data).fsSelection[Ie],"onUpdate:modelValue":ze=>unref(os2_data).fsSelection[Ie]=ze},null,8,["modelValue","onUpdate:modelValue"])]),createBaseVNode("div",_hoisted_76,"Bit-"+toDisplayString$1(Ie),1),createBaseVNode("div",_hoisted_77,toDisplayString$1(re.value[Ie].description),1)]))),256))])]),createBaseVNode("div",_hoisted_78,[_hoisted_79,createBaseVNode("div",_hoisted_80,[createVNode(le,{modelValue:unref(os2_data).usMaxContext,"onUpdate:modelValue":ue[32]||(ue[32]=xe=>unref(os2_data).usMaxContext=xe),onChange:ue[33]||(ue[33]=xe=>g("usMaxContext",xe)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.usMaxContext,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_81,toDisplayString$1(r.value.usMaxContext.tip),1)])]),createBaseVNode("div",_hoisted_82,[_hoisted_83,createBaseVNode("div",_hoisted_84,[createVNode(le,{modelValue:unref(os2_data).usLowerOpticalPointSize,"onUpdate:modelValue":ue[34]||(ue[34]=xe=>unref(os2_data).usLowerOpticalPointSize=xe),onChange:ue[35]||(ue[35]=xe=>g("usLowerOpticalPointSize",xe)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.usLowerOpticalPointSize,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_85,toDisplayString$1(r.value.usLowerOpticalPointSize.tip),1)])]),createBaseVNode("div",_hoisted_86,[_hoisted_87,createBaseVNode("div",_hoisted_88,[createVNode(le,{modelValue:unref(os2_data).usUpperOpticalPointSize,"onUpdate:modelValue":ue[36]||(ue[36]=xe=>unref(os2_data).usUpperOpticalPointSize=xe),onChange:ue[37]||(ue[37]=xe=>g("usUpperOpticalPointSize",xe)),controls:!1,precision:0},null,8,["modelValue"]),createVNode(_e,{class:"tips",effect:"dark",content:j.value.usUpperOpticalPointSize,placement:"bottom"},{default:withCtx(()=>[createVNode(he,null,{default:withCtx(()=>[createVNode(de)]),_:1})]),_:1},8,["content"]),createBaseVNode("div",_hoisted_89,toDisplayString$1(r.value.usUpperOpticalPointSize.tip),1)])])]),_:1})}}}),Os2Panel=_export_sfc(_sfc_main$o,[["__scopeId","data-v-fdf651ef"]]),_hoisted_1$m={class:"dialog-footer"},_sfc_main$n=defineComponent({__name:"FontSettingsDialog",setup(e){const{tm:n,t:r}=useI18n();onMounted(()=>{});const g=()=>{setFontSettings2DialogVisible(!1)},y=()=>{selectedFile.value.fontSettings&&(selectedFile.value.fontSettings.tables={head:head_data.value,hhea:hhea_data.value,os2:os2_data.value,name:name_data.value,post:post_data.value}),setFontSettings2DialogVisible(!1)};return(k,$)=>{const V=resolveComponent("el-tab-pane"),L=resolveComponent("el-tabs"),z=resolveComponent("el-button"),j=resolveComponent("el-dialog");return openBlock(),createBlock(j,{"model-value":unref(fontSettings2DialogVisible),class:"font-settings-dialog",title:unref(n)("dialogs.fontSettingsDialog.title"),width:"800px",style:{height:"640px"},"before-close":g},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_1$m,[createVNode(z,{onPointerdown:$[0]||($[0]=ae=>unref(setFontSettings2DialogVisible)(!1))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.fontSettingsDialog.cancel")),1)]),_:1}),createVNode(z,{type:"primary",onPointerdown:$[1]||($[1]=()=>y())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.fontSettingsDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createVNode(L,{"tab-position":"left",style:{height:"460px"},class:"table-tabs"},{default:withCtx(()=>[createVNode(V,{label:"head"},{default:withCtx(()=>[createVNode(HeadPanel)]),_:1}),createVNode(V,{label:"hhea"},{default:withCtx(()=>[createVNode(HheaPanel)]),_:1}),createVNode(V,{label:"name"},{default:withCtx(()=>[createVNode(NamePanel)]),_:1}),createVNode(V,{label:"os_2"},{default:withCtx(()=>[createVNode(Os2Panel)]),_:1}),createVNode(V,{label:"post"},{default:withCtx(()=>[createVNode(PostPanel)]),_:1})]),_:1})]),_:1},8,["model-value","title"])}}}),_hoisted_1$l={class:"settings-panel"},_hoisted_2$l={class:"background-style-wrap"},_hoisted_3$d={class:"title"},_hoisted_4$a={class:"form-item"},_hoisted_5$8={class:"form-label"},_hoisted_6$7={class:"grid-style-wrap"},_hoisted_7$7={class:"title"},_hoisted_8$7={class:"form-item"},_hoisted_9$7={class:"form-label"},_hoisted_10$7={class:"form-item"},_hoisted_11$6={class:"form-label"},_hoisted_12$6={class:"font-render-style-wrap"},_hoisted_13$4={class:"title"},_hoisted_14$4={class:"form-item"},_hoisted_15$1={class:"form-label"},_hoisted_16$1={class:"dialog-footer"},_sfc_main$m=defineComponent({__name:"PreferenceSettingsDialog",setup(e){const{tm:n,t:r}=useI18n(),g=()=>{switch(V.value){case"none":setGridType(GridType.None);break;case"mesh":setGridType(GridType.Mesh);break;case"mi":setGridType(GridType.Mi);break;case"layout":setGridType(GridType.LayoutGrid);break}switch(k.value){case"color":setBackgroundType(BackgroundType.Color);break;case"transparent":setBackgroundType(BackgroundType.Transparent);break}$.value&&setBackgroundColor($.value),L.value&&V.value==="mesh"&&setGridPrecision(L.value),setPreferenceSettingsDialogVisible(!1)},y=()=>{setPreferenceSettingsDialogVisible(!1)},k=ref("transparent"),$=ref("#FFFFFF"),V=ref("none"),L=ref(10);return(z,j)=>{const ae=resolveComponent("el-radio"),re=resolveComponent("el-color-picker"),oe=resolveComponent("el-radio-group"),ue=resolveComponent("el-form"),le=resolveComponent("el-input-number"),de=resolveComponent("el-button"),he=resolveComponent("el-dialog");return openBlock(),createBlock(he,{"model-value":unref(preferenceSettingsDialogVisible),class:"preference-settings-dialog",title:unref(n)("dialogs.preferenceDialog.title"),width:"360px","before-close":y},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_16$1,[createVNode(de,{onPointerdown:j[5]||(j[5]=_e=>unref(setPreferenceSettingsDialogVisible)(!1))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.preferenceDialog.cancel")),1)]),_:1}),createVNode(de,{type:"primary",onPointerdown:j[6]||(j[6]=()=>g())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.preferenceDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$l,[createBaseVNode("div",_hoisted_2$l,[createBaseVNode("div",_hoisted_3$d,toDisplayString$1(unref(r)("panels.settingsPanel.background.background")),1),createVNode(ue,{class:"background-form","label-width":"80px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_4$a,[createBaseVNode("div",_hoisted_5$8,toDisplayString$1(unref(r)("panels.settingsPanel.background.style")),1),createVNode(oe,{modelValue:k.value,"onUpdate:modelValue":j[1]||(j[1]=_e=>k.value=_e)},{default:withCtx(()=>[createVNode(ae,{label:"color"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.background.color")),1)]),_:1}),k.value==="color"?(openBlock(),createBlock(re,{key:0,class:"color-picker",style:{marginLeft:"-20px",marginRight:"20px"},modelValue:$.value,"onUpdate:modelValue":j[0]||(j[0]=_e=>$.value=_e),id:"backgroundColor"},null,8,["modelValue"])):createCommentVNode("",!0),createVNode(ae,{label:"transparent"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.background.transparent")),1)]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),createBaseVNode("div",_hoisted_6$7,[createBaseVNode("div",_hoisted_7$7,toDisplayString$1(unref(r)("panels.settingsPanel.mesh.mesh")),1),createVNode(ue,{class:"grid-form","label-width":"80px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_8$7,[createBaseVNode("div",_hoisted_9$7,toDisplayString$1(unref(r)("panels.settingsPanel.mesh.style")),1),createVNode(oe,{modelValue:V.value,"onUpdate:modelValue":j[2]||(j[2]=_e=>V.value=_e),id:"gridStyle"},{default:withCtx(()=>[createVNode(ae,{label:"none"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.mesh.none")),1)]),_:1}),createVNode(ae,{label:"mesh"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.mesh.mesh")),1)]),_:1}),createVNode(ae,{label:"mi"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.mesh.mi")),1)]),_:1}),createVNode(ae,{label:"layout"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.mesh.layout")),1)]),_:1})]),_:1},8,["modelValue"])]),withDirectives(createBaseVNode("div",_hoisted_10$7,[createBaseVNode("div",_hoisted_11$6,toDisplayString$1(unref(r)("panels.settingsPanel.mesh.precision")),1),createVNode(le,{modelValue:L.value,"onUpdate:modelValue":j[3]||(j[3]=_e=>L.value=_e),min:10,max:50,precision:2},null,8,["modelValue"])],512),[[vShow,V.value==="mesh"]])]),_:1})]),createBaseVNode("div",_hoisted_12$6,[createBaseVNode("div",_hoisted_13$4,toDisplayString$1(unref(r)("panels.settingsPanel.render.render")),1),createVNode(ue,{class:"font-render-form","label-width":"80px"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_14$4,[createBaseVNode("div",_hoisted_15$1,toDisplayString$1(unref(r)("panels.settingsPanel.render.style")),1),createVNode(oe,{modelValue:unref(fontRenderStyle),"onUpdate:modelValue":j[4]||(j[4]=_e=>isRef(fontRenderStyle)?fontRenderStyle.value=_e:null),id:"renderStyle"},{default:withCtx(()=>[createVNode(ae,{label:"contour"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.render.contour")),1)]),_:1}),createVNode(ae,{label:"color"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("panels.settingsPanel.render.color")),1)]),_:1})]),_:1},8,["modelValue"])])]),_:1})])])]),_:1},8,["model-value","title"])}}}),_hoisted_1$k={class:"form-wrapper"},_hoisted_2$k={class:"dialog-footer"},_sfc_main$l=defineComponent({__name:"SetAsGlobalParamDialog",setup(e){const{tm:n,t:r}=useI18n(),g=ref(""),y=()=>{setSetAsGlobalParamDialogVisible(!1)},k=()=>{if(selectedParam.value){const $=clone(selectedParam.value);if($.uuid=genUUID(),$.ratio="",$.ratioed=!1,$.name=g.value,constants.value.push($),constantsMap.update(constants.value),selectedParamType.value==="glyph_components"){for(let V=0;V<selectedComponent$1.value.value.parameters.parameters.length;V++)if(selectedComponent$1.value.value.parameters.parameters[V].uuid===selectedParam.value.uuid){selectedComponent$1.value.value.parameters.parameters[V].value=$.uuid,selectedComponent$1.value.value.parameters.parameters[V].type=ParameterType.Constant,selectedComponent$1.value.value.system_script&&selectedComponent$1.value.value.system_script[selectedComponent$1.value.value.parameters.parameters[V].name]&&delete selectedComponent$1.value.value.system_script[selectedComponent$1.value.value.parameters.parameters[V].name];const L=getGlyphType(editGlyphUUID.value);constantGlyphMap.get($.uuid)||constantGlyphMap.set($.uuid,[]),constantGlyphMap.get($.uuid).push({constantType:ConstantType.Component,glyphType:convertGlyphType(L),parameterUUID:selectedParam.value.uuid,parentUUID:editGlyphUUID.value,glyphUUID:selectedComponent$1.value.uuid})}}else if(selectedParamType.value==="character_components")for(let V=0;V<selectedComponent.value.value.parameters.parameters.length;V++)selectedComponent.value.value.parameters.parameters[V].uuid===selectedParam.value.uuid&&(selectedComponent.value.value.parameters.parameters[V].value=$.uuid,selectedComponent.value.value.parameters.parameters[V].type=ParameterType.Constant,selectedComponent.value.value.system_script&&selectedComponent.value.value.system_script[selectedComponent.value.value.parameters.parameters[V].name]&&delete selectedComponent.value.value.system_script[selectedComponent.value.value.parameters.parameters[V].name],constantGlyphMap.get($.uuid)||constantGlyphMap.set($.uuid,[]),constantGlyphMap.get($.uuid).push({constantType:ConstantType.Component,glyphType:GlyphType.Char,parameterUUID:selectedParam.value.uuid,parentUUID:editCharacterFileUUID.value,glyphUUID:selectedComponent.value.uuid}));else if(selectedParamType.value==="glyph_params"){for(let V=0;V<editGlyph.value.parameters.parameters.length;V++)if(editGlyph.value.parameters.parameters[V].uuid===selectedParam.value.uuid){editGlyph.value.parameters.parameters[V].value=$.uuid,editGlyph.value.parameters.parameters[V].type=ParameterType.Constant,editGlyph.value.value.system_script&&editGlyph.value.value.system_script[editGlyph.value.value.parameters.parameters[V].name]&&delete editGlyph.value.value.system_script[editGlyph.value.value.parameters.parameters[V].name];const L=getGlyphType(editGlyphUUID.value);constantGlyphMap.get($.uuid)||constantGlyphMap.set($.uuid,[]),constantGlyphMap.get($.uuid).push({constantType:ConstantType.Parameter,glyphType:convertGlyphType(L),parameterUUID:selectedParam.value.uuid,glyphUUID:editGlyphUUID.value})}}}g.value="",selectedParam.value=null,setSetAsGlobalParamDialogVisible(!1)};return($,V)=>{const L=resolveComponent("el-input"),z=resolveComponent("el-form-item"),j=resolveComponent("el-form"),ae=resolveComponent("el-button"),re=resolveComponent("el-dialog");return openBlock(),createBlock(re,{modelValue:unref(setAsGlobalParamDialogVisible),"onUpdate:modelValue":V[1]||(V[1]=oe=>isRef(setAsGlobalParamDialogVisible)?setAsGlobalParamDialogVisible.value=oe:null),title:unref(n)("dialogs.setAsGlobalParamDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$k,[createVNode(ae,{onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.setAsGlobalParamDialog.cancel")),1)]),_:1}),createVNode(ae,{type:"primary",onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.setAsGlobalParamDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$k,[createVNode(j,{"label-width":"80px"},{default:withCtx(()=>[createVNode(z,{label:unref(n)("dialogs.setAsGlobalParamDialog.paramName")},{default:withCtx(()=>[createVNode(L,{modelValue:g.value,"onUpdate:modelValue":V[0]||(V[0]=oe=>g.value=oe)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})])]),_:1},8,["modelValue","title"])}}}),_hoisted_1$j={class:"form-wrapper"},_hoisted_2$j={class:"dialog-footer"},_sfc_main$k=defineComponent({__name:"SelectGlobalParamDialog",setup(e){const{tm:n,t:r}=useI18n(),g=ref(""),y=()=>{setSelectGlobalParamDialogVisible(!1)},k=()=>{if(g.value&&selectedParam.value){if(selectedParamType.value==="glyph_components")for(let $=0;$<selectedComponent$1.value.value.parameters.parameters.length;$++){if(selectedComponent$1.value.value.parameters.parameters[$].uuid===selectedParam.value.uuid){selectedComponent$1.value.value.parameters.parameters[$].value=g.value,selectedComponent$1.value.value.parameters.parameters[$].type=ParameterType.Constant,selectedComponent$1.value.value.parameters.parameters[$].ratio="",selectedComponent$1.value.value.parameters.parameters[$].ratioed=!1,selectedComponent$1.value.value.system_script&&selectedComponent$1.value.value.system_script[selectedComponent$1.value.value.parameters.parameters[$].name]&&delete selectedComponent$1.value.value.system_script[selectedComponent$1.value.value.parameters.parameters[$].name];const V=getGlyphType(editGlyphUUID.value);constantGlyphMap.get(g.value)||constantGlyphMap.set(g.value,[]),constantGlyphMap.get(g.value).push({constantType:ConstantType.Component,glyphType:convertGlyphType(V),parameterUUID:selectedParam.value.uuid,parentUUID:editGlyphUUID.value,glyphUUID:selectedComponent$1.value.uuid})}executeScript(editGlyph.value),emitter.emit("renderGlyphPreviewCanvasByUUID",editGlyph.value.uuid),emitter.emit("renderGlyph")}else if(selectedParamType.value==="character_components")for(let $=0;$<selectedComponent.value.value.parameters.parameters.length;$++)selectedComponent.value.value.parameters.parameters[$].uuid===selectedParam.value.uuid&&(selectedComponent.value.value.parameters.parameters[$].value=g.value,selectedComponent.value.value.parameters.parameters[$].type=ParameterType.Constant,selectedComponent.value.value.parameters.parameters[$].ratio="",selectedComponent.value.value.parameters.parameters[$].ratioed=!1,selectedComponent.value.value.system_script&&selectedComponent.value.value.system_script[selectedComponent.value.value.parameters.parameters[$].name]&&delete selectedComponent.value.value.system_script[selectedComponent.value.value.parameters.parameters[$].name],constantGlyphMap.get(g.value)||constantGlyphMap.set(g.value,[]),constantGlyphMap.get(g.value).push({constantType:ConstantType.Component,glyphType:GlyphType.Char,parameterUUID:selectedParam.value.uuid,parentUUID:editCharacterFileUUID.value,glyphUUID:selectedComponent.value.uuid}),selectedComponent.value.value.type==="glyph"&&executeScript(selectedComponent.value.value),emitter.emit("renderPreviewCanvasByUUID",editCharacterFile.value.uuid),emitter.emit("renderCharacter"));else if(selectedParamType.value==="glyph_params"){for(let $=0;$<editGlyph.value.parameters.parameters.length;$++)if(editGlyph.value.parameters.parameters[$].uuid===selectedParam.value.uuid){editGlyph.value.parameters.parameters[$].value=g.value,editGlyph.value.parameters.parameters[$].type=ParameterType.Constant,editGlyph.value.parameters.parameters[$].ratio="",editGlyph.value.parameters.parameters[$].ratioed=!1,editGlyph.value.value.system_script&&editGlyph.value.value.system_script[editGlyph.value.value.parameters.parameters[$].name]&&delete editGlyph.value.value.system_script[editGlyph.value.value.parameters.parameters[$].name];const V=getGlyphType(editGlyphUUID.value);constantGlyphMap.get(g.value)||constantGlyphMap.set(g.value,[]),constantGlyphMap.get(g.value).push({constantType:ConstantType.Parameter,glyphType:convertGlyphType(V),parameterUUID:selectedParam.value.uuid,glyphUUID:editGlyphUUID.value}),executeScript(editGlyph.value),emitter.emit("renderGlyphPreviewCanvasByUUID",editGlyph.value.uuid),emitter.emit("renderGlyph")}}}g.value="",setSelectGlobalParamDialogVisible(!1)};return($,V)=>{const L=resolveComponent("el-option"),z=resolveComponent("el-select"),j=resolveComponent("el-form-item"),ae=resolveComponent("el-form"),re=resolveComponent("el-button"),oe=resolveComponent("el-dialog");return openBlock(),createBlock(oe,{modelValue:unref(selectGlobalParamDialogVisible),"onUpdate:modelValue":V[1]||(V[1]=ue=>isRef(selectGlobalParamDialogVisible)?selectGlobalParamDialogVisible.value=ue:null),title:unref(n)("dialogs.selectGlobalParamDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$j,[createVNode(re,{onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.selectGlobalParamDialog.cancel")),1)]),_:1}),createVNode(re,{type:"primary",onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.selectGlobalParamDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$j,[createVNode(ae,{"label-width":"80px"},{default:withCtx(()=>[createVNode(j,{label:unref(n)("dialogs.selectGlobalParamDialog.globalParam")},{default:withCtx(()=>[createVNode(z,{modelValue:g.value,"onUpdate:modelValue":V[0]||(V[0]=ue=>g.value=ue),class:"parameter-const-select"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(constants),ue=>(openBlock(),createBlock(L,{key:ue.uuid,label:ue.name,value:ue.uuid},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})])]),_:1},8,["modelValue","title"])}}}),_hoisted_1$i={class:"form-wrapper"},_hoisted_2$i={class:"dialog-footer"},_sfc_main$j=defineComponent({__name:"TipsDialog",setup(e){const{tm:n,t:r}=useI18n(),g=()=>{tips.value="",setTipsDialogVisible(!1)},y=()=>{tips.value="",setTipsDialogVisible(!1)};return(k,$)=>{const V=resolveComponent("el-button"),L=resolveComponent("el-dialog");return openBlock(),createBlock(L,{modelValue:unref(tipsDialogVisible),"onUpdate:modelValue":$[0]||($[0]=z=>isRef(tipsDialogVisible)?tipsDialogVisible.value=z:null),title:unref(n)("dialogs.tipsDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$i,[createVNode(V,{onPointerdown:g},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.tipsDialog.cancel")),1)]),_:1}),createVNode(V,{type:"primary",onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.tipsDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$i,toDisplayString$1(unref(tips)),1)]),_:1},8,["modelValue","title"])}}}),tipsDialog=_export_sfc(_sfc_main$j,[["__scopeId","data-v-cf6aae6b"]]),_hoisted_1$h={class:"form-wrapper"},_hoisted_2$h={class:"dialog-footer"},_sfc_main$i=defineComponent({__name:"CloseFileTipDialog",setup(e){const{tm:n,t:r}=useI18n(),g=()=>{setCloseFileTipDialogVisible(!1)},y=()=>{removeFile(files.value[0].uuid),clearCharacterRenderList(),clearGlyphRenderList(Status.GlyphList),clearGlyphRenderList(Status.StrokeGlyphList),clearGlyphRenderList(Status.RadicalGlyphList),clearGlyphRenderList(Status.CompGlyphList),clearSelectionGlyphRenderList(Status.GlyphList),clearSelectionGlyphRenderList(Status.StrokeGlyphList),clearSelectionGlyphRenderList(Status.RadicalGlyphList),clearSelectionGlyphRenderList(Status.CompGlyphList),glyphs.value=[],stroke_glyphs.value=[],radical_glyphs.value=[],comp_glyphs.value=[],setCloseFileTipDialogVisible(!1)};return(k,$)=>{const V=resolveComponent("el-button"),L=resolveComponent("el-dialog");return openBlock(),createBlock(L,{modelValue:unref(closeFileTipDialogVisible),"onUpdate:modelValue":$[0]||($[0]=z=>isRef(closeFileTipDialogVisible)?closeFileTipDialogVisible.value=z:null),title:unref(n)("dialogs.tipsDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$h,[createVNode(V,{onPointerdown:g},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.tipsDialog.cancel")),1)]),_:1}),createVNode(V,{type:"primary",onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.tipsDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$h,toDisplayString$1(unref(r)("dialogs.tipsDialog.tip1")),1)]),_:1},8,["modelValue","title"])}}}),closeFileTipDialog=_export_sfc(_sfc_main$i,[["__scopeId","data-v-e8a5b58a"]]),_hoisted_1$g={class:"form-wrapper"},_hoisted_2$g={class:"dialog-footer"},_sfc_main$h=defineComponent({__name:"SaveFileTipDialog",setup(e){const{tm:n,t:r}=useI18n(),g=()=>{setSaveFileTipDialogVisible(!1)},y=()=>{saveFile(),setSaveFileTipDialogVisible(!1)};return(k,$)=>{const V=resolveComponent("el-button"),L=resolveComponent("el-dialog");return openBlock(),createBlock(L,{modelValue:unref(saveFileTipDialogVisible),"onUpdate:modelValue":$[0]||($[0]=z=>isRef(saveFileTipDialogVisible)?saveFileTipDialogVisible.value=z:null),title:unref(n)("dialogs.tipsDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$g,[createVNode(V,{onPointerdown:g},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.tipsDialog.cancel")),1)]),_:1}),createVNode(V,{type:"primary",onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.tipsDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$g,toDisplayString$1(unref(r)("dialogs.tipsDialog.tip2")),1)]),_:1},8,["modelValue","title"])}}}),saveFileTipDialog=_export_sfc(_sfc_main$h,[["__scopeId","data-v-00af0120"]]);async function open$2(e={}){return typeof e=="object"&&Object.freeze(e),await invoke("plugin:dialog|open",{options:e})}async function save(e={}){return typeof e=="object"&&Object.freeze(e),await invoke("plugin:dialog|save",{options:e})}var BaseDirectory;(function(e){e[e.Audio=1]="Audio",e[e.Cache=2]="Cache",e[e.Config=3]="Config",e[e.Data=4]="Data",e[e.LocalData=5]="LocalData",e[e.Document=6]="Document",e[e.Download=7]="Download",e[e.Picture=8]="Picture",e[e.Public=9]="Public",e[e.Video=10]="Video",e[e.Resource=11]="Resource",e[e.Temp=12]="Temp",e[e.AppConfig=13]="AppConfig",e[e.AppData=14]="AppData",e[e.AppLocalData=15]="AppLocalData",e[e.AppCache=16]="AppCache",e[e.AppLog=17]="AppLog",e[e.Desktop=18]="Desktop",e[e.Executable=19]="Executable",e[e.Font=20]="Font",e[e.Home=21]="Home",e[e.Runtime=22]="Runtime",e[e.Template=23]="Template"})(BaseDirectory||(BaseDirectory={}));var SeekMode;(function(e){e[e.Start=0]="Start",e[e.Current=1]="Current",e[e.End=2]="End"})(SeekMode||(SeekMode={}));function parseFileInfo(e){return{isFile:e.isFile,isDirectory:e.isDirectory,isSymlink:e.isSymlink,size:e.size,mtime:e.mtime!==null?new Date(e.mtime):null,atime:e.atime!==null?new Date(e.atime):null,birthtime:e.birthtime!==null?new Date(e.birthtime):null,readonly:e.readonly,fileAttributes:e.fileAttributes,dev:e.dev,ino:e.ino,mode:e.mode,nlink:e.nlink,uid:e.uid,gid:e.gid,rdev:e.rdev,blksize:e.blksize,blocks:e.blocks}}function fromBytes(e){const n=new Uint8ClampedArray(e),r=n.byteLength;let g=0;for(let y=0;y<r;y++){const k=n[y];g*=256,g+=k}return g}class FileHandle extends Resource{async read(n){if(n.byteLength===0)return 0;const r=await invoke("plugin:fs|read",{rid:this.rid,len:n.byteLength}),g=fromBytes(r.slice(-8)),y=r instanceof ArrayBuffer?new Uint8Array(r):r;return n.set(y.slice(0,y.length-8)),g===0?null:g}async seek(n,r){return await invoke("plugin:fs|seek",{rid:this.rid,offset:n,whence:r})}async stat(){const n=await invoke("plugin:fs|fstat",{rid:this.rid});return parseFileInfo(n)}async truncate(n){await invoke("plugin:fs|ftruncate",{rid:this.rid,len:n})}async write(n){return await invoke("plugin:fs|write",{rid:this.rid,data:n})}}async function open$1(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");const r=await invoke("plugin:fs|open",{path:e instanceof URL?e.toString():e,options:n});return new FileHandle(r)}async function readFile(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");const r=await invoke("plugin:fs|read_file",{path:e instanceof URL?e.toString():e,options:n});return r instanceof ArrayBuffer?new Uint8Array(r):Uint8Array.from(r)}async function readTextFile(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");const r=await invoke("plugin:fs|read_text_file",{path:e instanceof URL?e.toString():e,options:n}),g=r instanceof ArrayBuffer?r:Uint8Array.from(r);return new TextDecoder().decode(g)}async function writeFile(e,n,r){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");if(n instanceof ReadableStream){const g=await open$1(e,r);for await(const y of n)await g.write(y);await g.close()}else await invoke("plugin:fs|write_file",n,{headers:{path:encodeURIComponent(e instanceof URL?e.toString():e),options:JSON.stringify(r)}})}async function writeTextFile(e,n,r){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");const g=new TextEncoder;await invoke("plugin:fs|write_text_file",g.encode(n),{headers:{path:encodeURIComponent(e instanceof URL?e.toString():e),options:JSON.stringify(r)}})}const _hoisted_1$f={class:"form-wrapper"},_hoisted_2$f={class:"text"},_hoisted_3$c={class:"dialog-footer"},_sfc_main$g=defineComponent({__name:"SaveDialog",setup(e){const{tm:n,t:r}=useI18n(),g=ref({characters:!0,stroke_glyphs:!0,radical_glyphs:!0,comp_glyphs:!0,glyphs:!0}),y=()=>{setSaveDialogVisible(!1)},k=async()=>{loaded$1.value=0,loading$1.value=!0,total$1.value=selectedFile.value.characterList.length+(g.value.glyphs?glyphs.value.length:0)+(g.value.stroke_glyphs?stroke_glyphs.value.length:0)+(g.value.radical_glyphs?radical_glyphs.value.length:0)+(g.value.comp_glyphs?comp_glyphs.value.length:0);const $=await plainFile(selectedFile.value);let V=[],L=[],z=[],j=[];const ae=async(ue,le)=>{for(let he=0;he<ue.length;he+=100){const _e=ue.slice(he,he+100);await new Promise(Ce=>{requestAnimationFrame(()=>{_e.forEach(Ne=>{addLoaded(),le.push(plainGlyph(Ne))}),Ce()})})}};g.value.glyphs&&await ae(glyphs.value,V),g.value.stroke_glyphs&&await ae(stroke_glyphs.value,L),g.value.radical_glyphs&&await ae(radical_glyphs.value,z),g.value.comp_glyphs&&await ae(comp_glyphs.value,j);const re=JSON.stringify({file:$,constants:constants.value,constantGlyphMap:mapToObject(constantGlyphMap),version:1,glyphs:V,stroke_glyphs:L,radical_glyphs:z,comp_glyphs:j}),oe=await save({defaultPath:`${selectedFile.value.name}.json`,filters:[{name:"JSON Filter",extensions:["json"]}]});oe&&await writeTextFile(oe,re),loading$1.value=!1,setSaveDialogVisible(!1)};return($,V)=>{const L=resolveComponent("el-checkbox"),z=resolveComponent("el-button"),j=resolveComponent("el-dialog");return openBlock(),createBlock(j,{modelValue:unref(saveDialogVisible),"onUpdate:modelValue":V[5]||(V[5]=ae=>isRef(saveDialogVisible)?saveDialogVisible.value=ae:null),title:unref(n)("dialogs.saveDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_3$c,[createVNode(z,{onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.cancel")),1)]),_:1}),createVNode(z,{type:"primary",onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$f,[createBaseVNode("div",_hoisted_2$f,toDisplayString$1(unref(r)("dialogs.exportDialog.exportMsg")),1),createVNode(L,{modelValue:g.value.characters,"onUpdate:modelValue":V[0]||(V[0]=ae=>g.value.characters=ae),class:"item-check",disabled:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.character")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.stroke_glyphs,"onUpdate:modelValue":V[1]||(V[1]=ae=>g.value.stroke_glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.stroke")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.radical_glyphs,"onUpdate:modelValue":V[2]||(V[2]=ae=>g.value.radical_glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.radical")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.comp_glyphs,"onUpdate:modelValue":V[3]||(V[3]=ae=>g.value.comp_glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.comp")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.glyphs,"onUpdate:modelValue":V[4]||(V[4]=ae=>g.value.glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.glyph_comp")),1)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","title"])}}}),saveDialog=_export_sfc(_sfc_main$g,[["__scopeId","data-v-f58d56a8"]]),_hoisted_1$e={class:"form-wrapper"},_hoisted_2$e={class:"text"},_hoisted_3$b={class:"dialog-footer"},_sfc_main$f=defineComponent({__name:"SaveAsDialog",setup(e){const{tm:n,t:r}=useI18n(),g=ref({characters:!0,stroke_glyphs:!0,radical_glyphs:!0,comp_glyphs:!0,glyphs:!0}),y=()=>{setSaveAsDialogVisible(!1)},k=async()=>{loaded$1.value=0,loading$1.value=!0,total$1.value=selectedFile.value.characterList.length+(g.value.glyphs?glyphs.value.length:0)+(g.value.stroke_glyphs?stroke_glyphs.value.length:0)+(g.value.radical_glyphs?radical_glyphs.value.length:0)+(g.value.comp_glyphs?comp_glyphs.value.length:0);const $=await plainFile(selectedFile.value);let V=[],L=[],z=[],j=[];const ae=async(ue,le)=>{for(let he=0;he<ue.length;he+=100){const _e=ue.slice(he,he+100);await new Promise(Ce=>{requestAnimationFrame(()=>{_e.forEach(Ne=>{addLoaded(),le.push(plainGlyph(Ne))}),Ce()})})}};g.value.glyphs&&await ae(glyphs.value,V),g.value.stroke_glyphs&&await ae(stroke_glyphs.value,L),g.value.radical_glyphs&&await ae(radical_glyphs.value,z),g.value.comp_glyphs&&await ae(comp_glyphs.value,j);const re=JSON.stringify({file:$,constants:constants.value,constantGlyphMap:mapToObject(constantGlyphMap),version:1,glyphs:V,stroke_glyphs:L,radical_glyphs:z,comp_glyphs:j}),oe=await save({defaultPath:`${selectedFile.value.name}.json`,filters:[{name:"JSON Filter",extensions:["json"]}]});oe&&await writeTextFile(oe,re),loading$1.value=!1,setSaveAsDialogVisible(!1)};return($,V)=>{const L=resolveComponent("el-checkbox"),z=resolveComponent("el-button"),j=resolveComponent("el-dialog");return openBlock(),createBlock(j,{modelValue:unref(saveAsDialogVisible),"onUpdate:modelValue":V[5]||(V[5]=ae=>isRef(saveAsDialogVisible)?saveAsDialogVisible.value=ae:null),title:unref(n)("dialogs.saveAsDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_3$b,[createVNode(z,{onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.cancel")),1)]),_:1}),createVNode(z,{type:"primary",onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$e,[createBaseVNode("div",_hoisted_2$e,toDisplayString$1(unref(r)("dialogs.exportDialog.exportMsg")),1),createVNode(L,{modelValue:g.value.characters,"onUpdate:modelValue":V[0]||(V[0]=ae=>g.value.characters=ae),class:"item-check",disabled:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.character")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.stroke_glyphs,"onUpdate:modelValue":V[1]||(V[1]=ae=>g.value.stroke_glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.stroke")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.radical_glyphs,"onUpdate:modelValue":V[2]||(V[2]=ae=>g.value.radical_glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.radical")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.comp_glyphs,"onUpdate:modelValue":V[3]||(V[3]=ae=>g.value.comp_glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.comp")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.glyphs,"onUpdate:modelValue":V[4]||(V[4]=ae=>g.value.glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.glyph_comp")),1)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","title"])}}}),saveAsDialog=_export_sfc(_sfc_main$f,[["__scopeId","data-v-ca1d43f0"]]),_hoisted_1$d={class:"form-wrapper"},_hoisted_2$d={class:"text"},_hoisted_3$a={class:"dialog-footer"},_sfc_main$e=defineComponent({__name:"ExportFileDialog",setup(e){const{tm:n,t:r}=useI18n(),g=ref({characters:!0,stroke_glyphs:!0,radical_glyphs:!0,comp_glyphs:!0,glyphs:!0}),y=()=>{setExportDialogVisible(!1)},k=async()=>{loaded$1.value=0,loading$1.value=!0,total$1.value=selectedFile.value.characterList.length+(g.value.glyphs?glyphs.value.length:0)+(g.value.stroke_glyphs?stroke_glyphs.value.length:0)+(g.value.radical_glyphs?radical_glyphs.value.length:0)+(g.value.comp_glyphs?comp_glyphs.value.length:0);const $=await plainFile(selectedFile.value);let V=[],L=[],z=[],j=[];const ae=async(ue,le)=>{for(let he=0;he<ue.length;he+=100){const _e=ue.slice(he,he+100);await new Promise(Ce=>{requestAnimationFrame(()=>{_e.forEach(Ne=>{addLoaded(),le.push(plainGlyph(Ne))}),Ce()})})}};g.value.glyphs&&await ae(glyphs.value,V),g.value.stroke_glyphs&&await ae(stroke_glyphs.value,L),g.value.radical_glyphs&&await ae(radical_glyphs.value,z),g.value.comp_glyphs&&await ae(comp_glyphs.value,j);const re=JSON.stringify({file:$,constants:constants.value,constantGlyphMap:mapToObject(constantGlyphMap),version:1,glyphs:V,stroke_glyphs:L,radical_glyphs:z,comp_glyphs:j}),oe=new Blob([re],{type:"text/plain;charset=utf-8"});saveAs(oe,`${selectedFile.value.name}.json`),loading$1.value=!1,setExportDialogVisible(!1)};return($,V)=>{const L=resolveComponent("el-checkbox"),z=resolveComponent("el-button"),j=resolveComponent("el-dialog");return openBlock(),createBlock(j,{modelValue:unref(exportDialogVisible),"onUpdate:modelValue":V[5]||(V[5]=ae=>isRef(exportDialogVisible)?exportDialogVisible.value=ae:null),title:unref(n)("dialogs.exportDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_3$a,[createVNode(z,{onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.cancel")),1)]),_:1}),createVNode(z,{type:"primary",onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$d,[createBaseVNode("div",_hoisted_2$d,toDisplayString$1(unref(r)("dialogs.exportDialog.exportMsg")),1),createVNode(L,{modelValue:g.value.characters,"onUpdate:modelValue":V[0]||(V[0]=ae=>g.value.characters=ae),class:"item-check",disabled:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.character")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.stroke_glyphs,"onUpdate:modelValue":V[1]||(V[1]=ae=>g.value.stroke_glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.stroke")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.radical_glyphs,"onUpdate:modelValue":V[2]||(V[2]=ae=>g.value.radical_glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.radical")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.comp_glyphs,"onUpdate:modelValue":V[3]||(V[3]=ae=>g.value.comp_glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.comp")),1)]),_:1},8,["modelValue"]),createVNode(L,{modelValue:g.value.glyphs,"onUpdate:modelValue":V[4]||(V[4]=ae=>g.value.glyphs=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("programming.glyph_comp")),1)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","title"])}}}),exportFileDialog=_export_sfc(_sfc_main$e,[["__scopeId","data-v-bfab148f"]]),_hoisted_1$c={class:"form-wrapper"},_hoisted_2$c={class:"dialog-footer"},_sfc_main$d=defineComponent({__name:"ExportFontDialog",setup(e){const{tm:n,t:r}=useI18n(),g=ref({remove_overlap:!1}),y=()=>{setExportFontDialogVisible(!1)},k=()=>{g.value.remove_overlap?total$1.value=selectedFile.value.characterList.length*4:total$1.value=selectedFile.value.characterList.length*3,loaded$1.value=0,loading$1.value=!0,loadingMsg.value="...",setTimeout(async()=>{g.value.remove_overlap&&await computeOverlapRemovedContours(),setTimeout(()=>exportFont(g.value),100),setExportFontDialogVisible(!1)},100)};return($,V)=>{const L=resolveComponent("el-checkbox"),z=resolveComponent("el-button"),j=resolveComponent("el-dialog");return openBlock(),createBlock(j,{modelValue:unref(exportFontDialogVisible),"onUpdate:modelValue":V[1]||(V[1]=ae=>isRef(exportFontDialogVisible)?exportFontDialogVisible.value=ae:null),title:unref(n)("dialogs.exportFontDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$c,[createVNode(z,{onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.cancel")),1)]),_:1}),createVNode(z,{type:"primary",onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$c,[createVNode(L,{modelValue:g.value.remove_overlap,"onUpdate:modelValue":V[0]||(V[0]=ae=>g.value.remove_overlap=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("menus.tools.remove_overlap")),1)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","title"])}}}),exportFontDialog=_export_sfc(_sfc_main$d,[["__scopeId","data-v-9c4375bf"]]),_hoisted_1$b={class:"form-wrapper"},_hoisted_2$b={class:"dialog-footer"},_sfc_main$c=defineComponent({__name:"ExportFontDialog_tauri",setup(e){const{tm:n,t:r}=useI18n(),g=ref({remove_overlap:!1}),y=()=>{setExportFontTauriDialogVisible(!1)},k=async()=>{g.value.remove_overlap?total$1.value=selectedFile.value.characterList.length*4:total$1.value=selectedFile.value.characterList.length*3,loaded$1.value=0,loading$1.value=!0,loadingMsg.value="...",setTimeout(async()=>{g.value.remove_overlap&&await computeOverlapRemovedContours(),setTimeout(()=>exportFont_tauri(g.value),100),setExportFontTauriDialogVisible(!1)},100)};return($,V)=>{const L=resolveComponent("el-checkbox"),z=resolveComponent("el-button"),j=resolveComponent("el-dialog");return openBlock(),createBlock(j,{modelValue:unref(exportFontTauriDialogVisible),"onUpdate:modelValue":V[1]||(V[1]=ae=>isRef(exportFontTauriDialogVisible)?exportFontTauriDialogVisible.value=ae:null),title:unref(n)("dialogs.exportFontDialog.title"),width:"320px"},{footer:withCtx(()=>[createBaseVNode("span",_hoisted_2$b,[createVNode(z,{onPointerdown:y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.cancel")),1)]),_:1}),createVNode(z,{type:"primary",onPointerdown:k},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("dialogs.exportDialog.confirm")),1)]),_:1})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$b,[createVNode(L,{modelValue:g.value.remove_overlap,"onUpdate:modelValue":V[0]||(V[0]=ae=>g.value.remove_overlap=ae),class:"item-check"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(r)("menus.tools.remove_overlap")),1)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","title"])}}}),exportFontTauriDialog=_export_sfc(_sfc_main$c,[["__scopeId","data-v-7f6a8439"]]),_hoisted_1$a={class:"wrap"},_hoisted_2$a={class:"global-params-panel"},_hoisted_3$9={class:"left"},_hoisted_4$9={class:"sample-characters-section"},_hoisted_5$7=createBaseVNode("h3",null,"",-1),_hoisted_6$6={class:"update-section"},_hoisted_7$6=createBaseVNode("div",{class:"main"},[createBaseVNode("div",{class:"characters",id:"advanced-edit-characters-list"})],-1),_hoisted_8$6={class:"right"},_hoisted_9$6={class:"parameters-wrap"},_hoisted_10$6=createBaseVNode("div",{class:"title"},"",-1),_hoisted_11$5={key:0,class:"param-wrapper"},_hoisted_12$5={key:1,class:"param-wrapper"},_sfc_main$b=defineComponent({__name:"GlobalParamsPanel",setup(e){onMounted(()=>{constants$2.value=clone(constants.value),updateSampleCharactersList(),updatePreviewList()});const n=()=>{isEditingSample.value=!isEditingSample.value,isEditingSample.value||(updateSampleCharactersList(),updatePreviewList())},r=()=>{updateCharactersList()},g=(y,k,$=!1)=>{$&&(y.value=k)};return watch(constants$2,()=>{updateCharactersAndPreview$1()},{deep:!0}),(y,k)=>{const $=resolveComponent("el-input"),V=resolveComponent("el-form-item"),L=resolveComponent("el-button"),z=resolveComponent("el-input-number"),j=resolveComponent("el-slider"),ae=resolveComponent("el-option"),re=resolveComponent("el-select"),oe=resolveComponent("el-form"),ue=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("div",_hoisted_1$a,[createBaseVNode("div",_hoisted_2$a,[createBaseVNode("div",_hoisted_3$9,[createBaseVNode("div",_hoisted_4$9,[_hoisted_5$7,createVNode(V,null,{default:withCtx(()=>[createVNode($,{modelValue:unref(sampleCharacters),"onUpdate:modelValue":k[0]||(k[0]=le=>isRef(sampleCharacters)?sampleCharacters.value=le:null),type:"textarea",rows:4,disabled:!unref(isEditingSample),placeholder:"20",maxlength:"20","show-word-limit":""},null,8,["modelValue","disabled"])]),_:1}),createVNode(L,{type:unref(isEditingSample)?"success":"primary",onClick:n,style:{width:"100%","margin-bottom":"20px"}},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(isEditingSample)?"":""),1)]),_:1},8,["type"])]),createBaseVNode("div",_hoisted_6$6,[createVNode(L,{type:"danger",size:"large",onClick:r},{default:withCtx(()=>[createTextVNode("  ")]),_:1})])]),_hoisted_7$6,createBaseVNode("div",_hoisted_8$6,[createVNode(ue,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_9$6,[_hoisted_10$6,createVNode(oe,{class:"parameters-form","label-width":"80px"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(constants$2),le=>(openBlock(),createBlock(V,{label:le.name},{default:withCtx(()=>[le.type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_11$5,[createVNode(z,{"model-value":le.value,step:le.max<=10?.01:1,min:le.min,max:le.max,precision:le.max<=10?2:0,onChange:de=>g(le,de,!0)},null,8,["model-value","step","min","max","precision","onChange"]),withDirectives(createVNode(j,{step:le.max<=10?.01:1,min:le.min,max:le.max,precision:le.max<=10?2:0,onInput:de=>g(le,de,!1),modelValue:le.value,"onUpdate:modelValue":de=>le.value=de},null,8,["step","min","max","precision","onInput","modelValue","onUpdate:modelValue"]),[[vShow,le.type===unref(ParameterType).Number]])])):le.type===unref(ParameterType).Enum?(openBlock(),createElementBlock("div",_hoisted_12$5,[createVNode(re,{modelValue:le.value,"onUpdate:modelValue":de=>le.value=de,class:"enum-param-select",placeholder:"Select",onChange:de=>g(le,de,!1)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(le.options,de=>(openBlock(),createBlock(ae,{key:de.value,label:de.label,value:de.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):createCommentVNode("",!0)]),_:2},1032,["label"]))),256))]),_:1})])]),_:1})])])])}}}),_withScopeId$5=e=>(pushScopeId("data-v-2a43b779"),e=e(),popScopeId(),e),_hoisted_1$9={class:"condition-filter-panel"},_hoisted_2$9=_withScopeId$5(()=>createBaseVNode("h2",null,"",-1)),_hoisted_3$8=_withScopeId$5(()=>createBaseVNode("p",null,"...",-1)),_hoisted_4$8=[_hoisted_2$9,_hoisted_3$8],_sfc_main$a=defineComponent({__name:"ConditionFilterPanel",setup(e){return(n,r)=>(openBlock(),createElementBlock("div",_hoisted_1$9,_hoisted_4$8))}}),ConditionFilterPanel=_export_sfc(_sfc_main$a,[["__scopeId","data-v-2a43b779"]]),_withScopeId$4=e=>(pushScopeId("data-v-d802c59d"),e=e(),popScopeId(),e),_hoisted_1$8={class:"scripts-panel"},_hoisted_2$8=_withScopeId$4(()=>createBaseVNode("h2",null,"",-1)),_hoisted_3$7=_withScopeId$4(()=>createBaseVNode("p",null,"...",-1)),_hoisted_4$7=[_hoisted_2$8,_hoisted_3$7],_sfc_main$9=defineComponent({__name:"ScriptsPanel",setup(e){return(n,r)=>(openBlock(),createElementBlock("div",_hoisted_1$8,_hoisted_4$7))}}),ScriptsPanel=_export_sfc(_sfc_main$9,[["__scopeId","data-v-d802c59d"]]),_hoisted_1$7={class:"wrap"},_hoisted_2$7={class:"advanced-edit-params-panel"},_hoisted_3$6={class:"left"},_hoisted_4$6={class:"sample-characters-section"},_hoisted_5$6=createBaseVNode("h3",null,"",-1),_hoisted_6$5={class:"update-section"},_hoisted_7$5=createBaseVNode("div",{class:"main"},[createBaseVNode("div",{class:"characters",id:"advanced-edit-characters-list"})],-1),_hoisted_8$5={class:"right"},_hoisted_9$5=createBaseVNode("div",{class:"title"},"",-1),_hoisted_10$5={class:"stroke-list"},_hoisted_11$4=["onClick"],_hoisted_12$4={class:"stroke-preview"},_hoisted_13$3={class:"stroke-info"},_hoisted_14$3={class:"stroke-name"},_hoisted_15={class:"stroke-style"},_hoisted_16={key:0,class:"replacement-setting-btn"},_hoisted_17={key:1,class:"replacement-setting-btn"},_sfc_main$8=defineComponent({__name:"StrokeReplacePanel",setup(e){onMounted(async()=>{getStrokeList(),updateSampleCharactersList(),updatePreviewList_strokeReplace(),await nextTick();for(let k=0;k<strokeList.value.length;k++){const $=strokeList.value[k];renderStrokePreview($.uuid)}}),onUnmounted(()=>{strokeList.value.length=0,strokeMap.clear()});const n=()=>{isEditingSample.value=!isEditingSample.value,isEditingSample.value||(updateSampleCharactersList(),updatePreviewList_strokeReplace())},r=()=>{updateCharactersList_strokeReplace()},g=async k=>{selectedStrokeUUID.value=k.uuid,await nextTick(),renderStrokePreview(k.uuid)},y=()=>{onStrokeReplacement.value=!0,glyphComponentsDialogVisible2.value=!0};return(k,$)=>{const V=resolveComponent("el-input"),L=resolveComponent("el-form-item"),z=resolveComponent("el-button"),j=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("div",_hoisted_1$7,[createBaseVNode("div",_hoisted_2$7,[createBaseVNode("div",_hoisted_3$6,[createBaseVNode("div",_hoisted_4$6,[_hoisted_5$6,createVNode(L,null,{default:withCtx(()=>[createVNode(V,{modelValue:unref(sampleCharacters),"onUpdate:modelValue":$[0]||($[0]=ae=>isRef(sampleCharacters)?sampleCharacters.value=ae:null),type:"textarea",rows:4,disabled:!unref(isEditingSample),placeholder:"20",maxlength:"20","show-word-limit":""},null,8,["modelValue","disabled"])]),_:1}),createVNode(z,{type:unref(isEditingSample)?"success":"primary",onClick:n,style:{width:"100%","margin-bottom":"20px"}},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(isEditingSample)?"":""),1)]),_:1},8,["type"])]),createBaseVNode("div",_hoisted_6$5,[createVNode(z,{type:"danger",size:"large",onClick:r},{default:withCtx(()=>[createTextVNode("  ")]),_:1})])]),_hoisted_7$5,createBaseVNode("div",_hoisted_8$5,[createVNode(j,null,{default:withCtx(()=>[_hoisted_9$5,createBaseVNode("div",_hoisted_10$5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(strokeList),ae=>(openBlock(),createElementBlock("div",{class:"stroke-item",key:ae.uuid,onClick:re=>g(ae)},[createBaseVNode("div",_hoisted_12$4,[ae.replaced?(openBlock(),createElementBlock("canvas",{key:1,class:normalizeClass(`stroke-preview-${ae.replacement.uuid}`),width:"100",height:"100"},null,2)):(openBlock(),createElementBlock("canvas",{key:0,class:normalizeClass(`stroke-preview-${ae.uuid}`),width:"100",height:"100"},null,2))]),createBaseVNode("div",_hoisted_13$3,[createBaseVNode("div",_hoisted_14$3,toDisplayString$1(ae.name),1),createBaseVNode("div",_hoisted_15,toDisplayString$1(ae.style),1),ae.replaced?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_16,[createVNode(z,{onClick:y,size:"small",type:"primary"},{default:withCtx(()=>[createTextVNode("")]),_:1})])),ae.replaced?(openBlock(),createElementBlock("div",_hoisted_17,[createVNode(z,{onClick:y,size:"small",type:"primary"},{default:withCtx(()=>[createTextVNode("")]),_:1})])):createCommentVNode("",!0)])],8,_hoisted_11$4))),128))])]),_:1})])])])}}}),_hoisted_1$6={class:"wrap"},_hoisted_2$6={class:"style-switch-panel"},_hoisted_3$5={class:"left"},_hoisted_4$5={class:"sample-characters-section"},_hoisted_5$5=createBaseVNode("h3",null,"",-1),_hoisted_6$4={class:"update-section"},_hoisted_7$4=createBaseVNode("div",{class:"main"},[createBaseVNode("div",{class:"characters",id:"advanced-edit-characters-list"})],-1),_hoisted_8$4={class:"right"},_hoisted_9$4={key:0,class:"stroke-list-section"},_hoisted_10$4=createBaseVNode("div",{class:"title"},"",-1),_hoisted_11$3={key:1,class:"parameters-wrap"},_hoisted_12$3={class:"title"},_hoisted_13$2=createBaseVNode("span",null,"",-1),_hoisted_14$2={key:0,class:"param-wrapper"},_sfc_main$7=defineComponent({__name:"StyleSwitchPanel",setup(e){const n=ref(!1);onMounted(()=>{styles$3.value=[{uuid:"default",name:"",strokeStyle:"",constants:[],parameters:[]},{uuid:genUUID(),name:"",strokeStyle:"",constants:[{name:"",value:2},{name:"",value:1},{name:"",value:1},{name:"",value:1},{name:"",value:0},{name:"",value:1}],parameters:[{name:"",value:50,min:40,max:100,type:ParameterType.Number}]},{uuid:genUUID(),name:"-",strokeStyle:"",constants:[{name:"",value:2},{name:"",value:1},{name:"",value:0},{name:"",value:1},{name:"",value:0},{name:"",value:2}],parameters:[{name:"",value:50,min:40,max:100,type:ParameterType.Number}]},{uuid:genUUID(),name:"",strokeStyle:"",constants:[],parameters:[{name:"",value:50,min:40,max:100,type:ParameterType.Number}]}],updateSampleCharactersList(),updatePreviewList_styleSwitch()}),onUnmounted(()=>{styles$3.value=[],selectedStyleUUID.value="default"});const r=()=>{isEditingSample.value=!isEditingSample.value,isEditingSample.value||(updateSampleCharactersList(),updatePreviewList_styleSwitch())},g=()=>{updateCharactersList_styleSwitch()},y=$=>{if(selectedStyle.value.uuid===$.uuid&&$.uuid!=="default"){n.value=!0;return}selectedStyleUUID.value=$.uuid,updateCharactersAndPreview_styleSwitch()},k=($,V,L=!1)=>{L&&($.value=V)};return watch(()=>selectedStyle.value?.parameters,()=>{updateCharactersAndPreview_styleSwitch()},{deep:!0}),($,V)=>{const L=resolveComponent("el-input"),z=resolveComponent("el-form-item"),j=resolveComponent("el-button"),ae=resolveComponent("el-scrollbar"),re=resolveComponent("el-icon"),oe=resolveComponent("el-input-number"),ue=resolveComponent("el-slider"),le=resolveComponent("el-form");return openBlock(),createElementBlock("div",_hoisted_1$6,[createBaseVNode("div",_hoisted_2$6,[createBaseVNode("div",_hoisted_3$5,[createBaseVNode("div",_hoisted_4$5,[_hoisted_5$5,createVNode(z,null,{default:withCtx(()=>[createVNode(L,{modelValue:unref(sampleCharacters),"onUpdate:modelValue":V[0]||(V[0]=de=>isRef(sampleCharacters)?sampleCharacters.value=de:null),type:"textarea",rows:4,disabled:!unref(isEditingSample),placeholder:"20",maxlength:"20","show-word-limit":""},null,8,["modelValue","disabled"])]),_:1}),createVNode(j,{type:unref(isEditingSample)?"success":"primary",onClick:r,style:{width:"100%","margin-bottom":"20px"}},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(isEditingSample)?"":""),1)]),_:1},8,["type"])]),createBaseVNode("div",_hoisted_6$4,[createVNode(j,{type:"danger",size:"large",onClick:g},{default:withCtx(()=>[createTextVNode("  ")]),_:1})])]),_hoisted_7$4,createBaseVNode("div",_hoisted_8$4,[n.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_9$4,[_hoisted_10$4,createVNode(ae,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(styles$3),de=>(openBlock(),createBlock(j,{class:normalizeClass(["style-item",{selected:de.uuid===unref(selectedStyle).uuid}]),key:de.uuid,type:de.uuid===unref(selectedStyle).uuid?"primary":"default",onClick:he=>y(de)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(de.name),1)]),_:2},1032,["type","class","onClick"]))),128))]),_:1})])),n.value?(openBlock(),createElementBlock("div",_hoisted_11$3,[createBaseVNode("div",_hoisted_12$3,[createVNode(re,{class:"arrow-left-icon",onClick:V[1]||(V[1]=de=>n.value=!1)},{default:withCtx(()=>[createVNode(unref(arrow_left_default))]),_:1}),_hoisted_13$2]),createVNode(le,{class:"parameters-form","label-width":"80px"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(selectedStyle).parameters,de=>(openBlock(),createBlock(z,{label:de.name},{default:withCtx(()=>[de.type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_14$2,[createVNode(oe,{"model-value":de.value,step:de.max<=10?.01:1,min:de.min,max:de.max,precision:de.max<=10?2:0,onChange:he=>k(de,he,!0)},null,8,["model-value","step","min","max","precision","onChange"]),withDirectives(createVNode(ue,{step:de.max<=10?.01:1,min:de.min,max:de.max,precision:de.max<=10?2:0,onInput:he=>k(de,he,!1),modelValue:de.value,"onUpdate:modelValue":he=>de.value=he},null,8,["step","min","max","precision","onInput","modelValue","onUpdate:modelValue"]),[[vShow,de.type===unref(ParameterType).Number]])])):createCommentVNode("",!0)]),_:2},1032,["label"]))),256))]),_:1})])):createCommentVNode("",!0)])])])}}}),_withScopeId$3=e=>(pushScopeId("data-v-6f3cb4ed"),e=e(),popScopeId(),e),_hoisted_1$5={class:"advanced-edit-panel"},_hoisted_2$5={class:"advanced-edit-panel-header"},_hoisted_3$4={class:"title"},_hoisted_4$4=_withScopeId$3(()=>createBaseVNode("span",{class:"to-list-label"},"",-1)),_hoisted_5$4={class:"advanced-edit-panel-main"},_sfc_main$6=defineComponent({__name:"AdvancedEditPanel",setup(e){const n=()=>{setEditStatus(Status.CharacterList)};return(r,g)=>{const y=resolveComponent("Tools"),k=resolveComponent("el-icon"),$=resolveComponent("el-button");return openBlock(),createElementBlock("div",_hoisted_1$5,[createBaseVNode("header",_hoisted_2$5,[createBaseVNode("div",_hoisted_3$4,[createVNode($,{onPointerdown:g[0]||(g[0]=()=>unref(setActivePanel)(unref(PanelType).GlobalVariables)),type:unref(activePanel)===unref(PanelType).GlobalVariables?"primary":"default"},{default:withCtx(()=>[createVNode(k,null,{default:withCtx(()=>[createVNode(y)]),_:1}),createTextVNode("  ")]),_:1},8,["type"]),createVNode($,{onPointerdown:g[1]||(g[1]=()=>unref(setActivePanel)(unref(PanelType).StrokeReplace)),type:unref(activePanel)===unref(PanelType).StrokeReplace?"primary":"default"},{default:withCtx(()=>[createVNode(k,null,{default:withCtx(()=>[createVNode(y)]),_:1}),createTextVNode("  ")]),_:1},8,["type"]),createVNode($,{onPointerdown:g[2]||(g[2]=()=>unref(setActivePanel)(unref(PanelType).StyleSwitch)),type:unref(activePanel)===unref(PanelType).StyleSwitch?"primary":"default"},{default:withCtx(()=>[createVNode(k,null,{default:withCtx(()=>[createVNode(y)]),_:1}),createTextVNode("  ")]),_:1},8,["type"]),createVNode($,{onPointerdown:g[3]||(g[3]=()=>unref(setActivePanel)(unref(PanelType).ConditionFilter)),type:unref(activePanel)===unref(PanelType).ConditionFilter?"primary":"default"},{default:withCtx(()=>[createVNode(k,null,{default:withCtx(()=>[createVNode(y)]),_:1}),createTextVNode("  ")]),_:1},8,["type"]),createVNode($,{onPointerdown:g[4]||(g[4]=()=>unref(setActivePanel)(unref(PanelType).Script)),type:unref(activePanel)===unref(PanelType).Script?"primary":"default"},{default:withCtx(()=>[createVNode(k,null,{default:withCtx(()=>[createVNode(y)]),_:1}),createTextVNode("  ")]),_:1},8,["type"])]),createBaseVNode("div",{class:"to-list",onPointerdown:n},[createVNode(k,{class:"to-list-icon"},{default:withCtx(()=>[createVNode(unref(grid_default))]),_:1}),_hoisted_4$4],32)]),createBaseVNode("main",_hoisted_5$4,[unref(activePanel)===unref(PanelType).GlobalVariables?(openBlock(),createBlock(_sfc_main$b,{key:0})):createCommentVNode("",!0),unref(activePanel)===unref(PanelType).ConditionFilter?(openBlock(),createBlock(ConditionFilterPanel,{key:1})):createCommentVNode("",!0),unref(activePanel)===unref(PanelType).Script?(openBlock(),createBlock(ScriptsPanel,{key:2})):createCommentVNode("",!0),unref(activePanel)===unref(PanelType).StrokeReplace?(openBlock(),createBlock(_sfc_main$8,{key:3})):createCommentVNode("",!0),unref(activePanel)===unref(PanelType).StyleSwitch?(openBlock(),createBlock(_sfc_main$7,{key:4})):createCommentVNode("",!0)])])}}}),AdvancedEditPanel=_export_sfc(_sfc_main$6,[["__scopeId","data-v-6f3cb4ed"]]),_withScopeId$2=e=>(pushScopeId("data-v-b7d8c0a8"),e=e(),popScopeId(),e),_hoisted_1$4={class:"root-wrapper"},_hoisted_2$4={class:"el-loading-spinner"},_hoisted_3$3=_withScopeId$2(()=>createBaseVNode("svg",{class:"circular",viewBox:"0 0 50 50"},[createBaseVNode("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})],-1)),_hoisted_4$3={class:"loading-text"},_hoisted_5$3={class:"main-panel"},_hoisted_6$3={key:0,class:"advanced-edit-panel-wrapper"},_hoisted_7$3={class:"inner-wrapper"},_hoisted_8$3={class:"left-panel-wrapper"},_hoisted_9$3={class:"main-wrapper"},_hoisted_10$3={class:"files-bar-wrapper"},_hoisted_11$2={class:"zoom-bar-wrapper"},_hoisted_12$2={class:"right-panel-wrapper"},svg$2=`
    <path class="path" d="" style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>
  `,_sfc_main$5=defineComponent({__name:"Editor",setup(e){const{tm:n,t:r,locale:g}=useI18n();onBeforeRouteLeave((V,L,z)=>{let j="";g.value==="zh"?j="":g.value==="en"&&(j="Exit without saving? Your changes will be lost."),window.confirm(j)?z():z(!1)});const y=V=>{if(ENV.value==="web"){V.preventDefault();let L="";return g.value==="zh"?L="":g.value==="en"&&(L="Exit without saving? Your changes will be lost."),V.returnValue=L,""}},k=V=>{if(V.key==="Shift"){if(editing$8.value||editing$7.value||editing$5.value||editing$6.value)return;V.preventDefault(),enableMultiSelect.value=!0}},$=V=>{if(V.key==="Shift"){if(editing$8.value||editing$7.value||editing$5.value||editing$6.value)return;V.preventDefault(),enableMultiSelect.value=!1}};return onMounted(async()=>{window.addEventListener("beforeunload",y),document.addEventListener("keydown",k),document.addEventListener("keyup",$),await initGlyphEnvironment()}),onUnmounted(()=>{document.removeEventListener("keydown",k),document.removeEventListener("keyup",$)}),(V,L)=>{const z=resolveComponent("el-progress"),j=resolveDirective("loading");return openBlock(),createElementBlock("div",_hoisted_1$4,[createVNode(saveFileTipDialog),createVNode(closeFileTipDialog),createVNode(tipsDialog),createVNode(_sfc_main$l),createVNode(_sfc_main$k),createVNode(_sfc_main$1c),createVNode(_sfc_main$B),createVNode(_sfc_main$v),createVNode(_sfc_main$w),createVNode(_sfc_main$A),createVNode(_sfc_main$z),createVNode(_sfc_main$y),createVNode(_sfc_main$x),createVNode(_sfc_main$u),createVNode(_sfc_main$t),createVNode(_sfc_main$n),createVNode(_sfc_main$m),createVNode(_sfc_main$1b),createVNode(saveDialog),createVNode(saveAsDialog),createVNode(exportFileDialog),createVNode(exportFontDialog),createVNode(exportFontTauriDialog),withDirectives((openBlock(),createElementBlock("div",{class:"outer-wrapper","element-loading-text":"","element-loading-spinner":svg$2,"element-loading-svg-view-box":"-10, -10, 50, 50","element-loading-background":"rgba(122, 122, 122, 0.8)"},[withDirectives(createBaseVNode("div",_hoisted_2$4,[_hoisted_3$3,createBaseVNode("div",null,toDisplayString$1(unref(loadingMsg)||unref(r)("panels.paramsPanel.loadingMsg")),1)],512),[[vShow,unref(loading$1)&&unref(total$1)===0]]),withDirectives(createBaseVNode("div",_hoisted_4$3,[createVNode(z,{"text-inside":!0,"stroke-width":20,percentage:Math.round(unref(loaded$1)/unref(total$1)*100)>=100?100:Math.round(unref(loaded$1)/unref(total$1)*100)},null,8,["percentage"]),createBaseVNode("div",null,toDisplayString$1(unref(loadingMsg)?unref(loadingMsg)+`${Math.round(unref(loaded$1)/unref(total$1)*100)}%`:unref(r)("panels.paramsPanel.loadedMsg",{percent:Math.round(unref(loaded$1)/unref(total$1)*100)})),1)],512),[[vShow,unref(loading$1)&&unref(total$1)!=0]]),createBaseVNode("div",{class:"side-bar-wrap",style:normalizeStyle({flex:(unref(ENV)==="web","0 0 36px"),borderRight:(unref(ENV)==="web","1px solid var(--primary-2)")})},[createVNode(SideBar)],4),createBaseVNode("div",_hoisted_5$3,[createBaseVNode("header",{class:"header-wrapper",style:normalizeStyle({flex:(unref(ENV)==="web",unref(editStatus)===unref(Status).CharacterList||unref(editStatus)===unref(Status).GlyphList||unref(editStatus)===unref(Status).StrokeGlyphList||unref(editStatus)===unref(Status).RadicalGlyphList||unref(editStatus)===unref(Status).CompGlyphList||unref(editStatus)===unref(Status).Pic||unref(editStatus)===unref(Status).AdvancedEdit?"0 0 0px":"0 0 50px")})},[withDirectives(createVNode(ToolBar,null,null,512),[[vShow,unref(editStatus)===unref(Status).Edit||unref(editStatus)===unref(Status).Glyph]])],4),unref(editStatus)===unref(Status).AdvancedEdit?(openBlock(),createElementBlock("main",_hoisted_6$3,[createVNode(AdvancedEditPanel)])):createCommentVNode("",!0),withDirectives(createBaseVNode("main",_hoisted_7$3,[withDirectives(createBaseVNode("aside",_hoisted_8$3,[createVNode(LeftPanel)],512),[[vShow,unref(editStatus)!==unref(Status).CharacterList&&unref(editStatus)!==unref(Status).GlyphList&&unref(editStatus)!==unref(Status).StrokeGlyphList&&unref(editStatus)!==unref(Status).RadicalGlyphList&&unref(editStatus)!==unref(Status).CompGlyphList&&unref(editStatus)!==unref(Status).AdvancedEdit]]),createBaseVNode("main",_hoisted_9$3,[withDirectives(createBaseVNode("header",_hoisted_10$3,[createVNode(FilesBar)],512),[[vShow,unref(editStatus)!==unref(Status).Pic&&unref(editStatus)!==unref(Status).AdvancedEdit]]),withDirectives(createBaseVNode("main",{class:"canvas-panel-wrapper",style:normalizeStyle({height:unref(editStatus)===unref(Status).Edit||unref(editStatus)===unref(Status).Pic?"calc(100% - 72px)":"calc(100% - 36px)"})},[createVNode(FontPanel)],4),[[vShow,unref(editStatus)!==unref(Status).AdvancedEdit]]),withDirectives(createBaseVNode("footer",_hoisted_11$2,[unref(editStatus)===unref(Status).Edit?(openBlock(),createBlock(BottomBar,{key:0})):unref(editStatus)===unref(Status).Glyph?(openBlock(),createBlock(GlyphBottomBar,{key:1})):createCommentVNode("",!0)],512),[[vShow,unref(editStatus)!==unref(Status).CharacterList&&unref(editStatus)!==unref(Status).GlyphList&&unref(editStatus)!==unref(Status).StrokeGlyphList&&unref(editStatus)!==unref(Status).RadicalGlyphList&&unref(editStatus)!==unref(Status).CompGlyphList&&unref(editStatus)!==unref(Status).AdvancedEdit]])]),withDirectives(createBaseVNode("aside",_hoisted_12$2,[createVNode(RightPanel)],512),[[vShow,unref(editStatus)!==unref(Status).CharacterList&&unref(editStatus)!==unref(Status).GlyphList&&unref(editStatus)!==unref(Status).StrokeGlyphList&&unref(editStatus)!==unref(Status).RadicalGlyphList&&unref(editStatus)!==unref(Status).CompGlyphList&&unref(editStatus)!==unref(Status).AdvancedEdit]])],512),[[vShow,unref(editStatus)!==unref(Status).AdvancedEdit]])])])),[[j,unref(loading$1)]])])}}}),Editor=_export_sfc(_sfc_main$5,[["__scopeId","data-v-b7d8c0a8"]]);let rangeFrom=[],rangeTo=[];(()=>{let e="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=0,r=0;n<e.length;n++)(n%2?rangeTo:rangeFrom).push(r=r+e[n])})();function isExtendingChar(e){if(e<768)return!1;for(let n=0,r=rangeFrom.length;;){let g=n+r>>1;if(e<rangeFrom[g])r=g;else if(e>=rangeTo[g])n=g+1;else return!0;if(n==r)return!1}}function isRegionalIndicator(e){return e>=127462&&e<=127487}const ZWJ=8205;function findClusterBreak$1(e,n,r=!0,g=!0){return(r?nextClusterBreak:prevClusterBreak)(e,n,g)}function nextClusterBreak(e,n,r){if(n==e.length)return n;n&&surrogateLow$1(e.charCodeAt(n))&&surrogateHigh$1(e.charCodeAt(n-1))&&n--;let g=codePointAt$2(e,n);for(n+=codePointSize$1(g);n<e.length;){let y=codePointAt$2(e,n);if(g==ZWJ||y==ZWJ||r&&isExtendingChar(y))n+=codePointSize$1(y),g=y;else if(isRegionalIndicator(y)){let k=0,$=n-2;for(;$>=0&&isRegionalIndicator(codePointAt$2(e,$));)k++,$-=2;if(k%2==0)break;n+=2}else break}return n}function prevClusterBreak(e,n,r){for(;n>0;){let g=nextClusterBreak(e,n-2,r);if(g<n)return g;n--}return 0}function codePointAt$2(e,n){let r=e.charCodeAt(n);if(!surrogateHigh$1(r)||n+1==e.length)return r;let g=e.charCodeAt(n+1);return surrogateLow$1(g)?(r-55296<<10)+(g-56320)+65536:r}function surrogateLow$1(e){return e>=56320&&e<57344}function surrogateHigh$1(e){return e>=55296&&e<56320}function codePointSize$1(e){return e<65536?1:2}class Text{lineAt(n){if(n<0||n>this.length)throw new RangeError(`Invalid position ${n} in document of length ${this.length}`);return this.lineInner(n,!1,1,0)}line(n){if(n<1||n>this.lines)throw new RangeError(`Invalid line number ${n} in ${this.lines}-line document`);return this.lineInner(n,!0,1,0)}replace(n,r,g){[n,r]=clip(this,n,r);let y=[];return this.decompose(0,n,y,2),g.length&&g.decompose(0,g.length,y,3),this.decompose(r,this.length,y,1),TextNode.from(y,this.length-(r-n)+g.length)}append(n){return this.replace(this.length,this.length,n)}slice(n,r=this.length){[n,r]=clip(this,n,r);let g=[];return this.decompose(n,r,g,0),TextNode.from(g,r-n)}eq(n){if(n==this)return!0;if(n.length!=this.length||n.lines!=this.lines)return!1;let r=this.scanIdentical(n,1),g=this.length-this.scanIdentical(n,-1),y=new RawTextCursor(this),k=new RawTextCursor(n);for(let $=r,V=r;;){if(y.next($),k.next($),$=0,y.lineBreak!=k.lineBreak||y.done!=k.done||y.value!=k.value)return!1;if(V+=y.value.length,y.done||V>=g)return!0}}iter(n=1){return new RawTextCursor(this,n)}iterRange(n,r=this.length){return new PartialTextCursor(this,n,r)}iterLines(n,r){let g;if(n==null)g=this.iter();else{r==null&&(r=this.lines+1);let y=this.line(n).from;g=this.iterRange(y,Math.max(y,r==this.lines+1?this.length:r<=1?0:this.line(r-1).to))}return new LineCursor(g)}toString(){return this.sliceString(0)}toJSON(){let n=[];return this.flatten(n),n}constructor(){}static of(n){if(n.length==0)throw new RangeError("A document must have at least one line");return n.length==1&&!n[0]?Text.empty:n.length<=32?new TextLeaf(n):TextNode.from(TextLeaf.split(n,[]))}}class TextLeaf extends Text{constructor(n,r=textLength(n)){super(),this.text=n,this.length=r}get lines(){return this.text.length}get children(){return null}lineInner(n,r,g,y){for(let k=0;;k++){let $=this.text[k],V=y+$.length;if((r?g:V)>=n)return new Line(y,V,g,$);y=V+1,g++}}decompose(n,r,g,y){let k=n<=0&&r>=this.length?this:new TextLeaf(sliceText(this.text,n,r),Math.min(r,this.length)-Math.max(0,n));if(y&1){let $=g.pop(),V=appendText(k.text,$.text.slice(),0,k.length);if(V.length<=32)g.push(new TextLeaf(V,$.length+k.length));else{let L=V.length>>1;g.push(new TextLeaf(V.slice(0,L)),new TextLeaf(V.slice(L)))}}else g.push(k)}replace(n,r,g){if(!(g instanceof TextLeaf))return super.replace(n,r,g);[n,r]=clip(this,n,r);let y=appendText(this.text,appendText(g.text,sliceText(this.text,0,n)),r),k=this.length+g.length-(r-n);return y.length<=32?new TextLeaf(y,k):TextNode.from(TextLeaf.split(y,[]),k)}sliceString(n,r=this.length,g=`
`){[n,r]=clip(this,n,r);let y="";for(let k=0,$=0;k<=r&&$<this.text.length;$++){let V=this.text[$],L=k+V.length;k>n&&$&&(y+=g),n<L&&r>k&&(y+=V.slice(Math.max(0,n-k),r-k)),k=L+1}return y}flatten(n){for(let r of this.text)n.push(r)}scanIdentical(){return 0}static split(n,r){let g=[],y=-1;for(let k of n)g.push(k),y+=k.length+1,g.length==32&&(r.push(new TextLeaf(g,y)),g=[],y=-1);return y>-1&&r.push(new TextLeaf(g,y)),r}}class TextNode extends Text{constructor(n,r){super(),this.children=n,this.length=r,this.lines=0;for(let g of n)this.lines+=g.lines}lineInner(n,r,g,y){for(let k=0;;k++){let $=this.children[k],V=y+$.length,L=g+$.lines-1;if((r?L:V)>=n)return $.lineInner(n,r,g,y);y=V+1,g=L+1}}decompose(n,r,g,y){for(let k=0,$=0;$<=r&&k<this.children.length;k++){let V=this.children[k],L=$+V.length;if(n<=L&&r>=$){let z=y&(($<=n?1:0)|(L>=r?2:0));$>=n&&L<=r&&!z?g.push(V):V.decompose(n-$,r-$,g,z)}$=L+1}}replace(n,r,g){if([n,r]=clip(this,n,r),g.lines<this.lines)for(let y=0,k=0;y<this.children.length;y++){let $=this.children[y],V=k+$.length;if(n>=k&&r<=V){let L=$.replace(n-k,r-k,g),z=this.lines-$.lines+L.lines;if(L.lines<z>>4&&L.lines>z>>6){let j=this.children.slice();return j[y]=L,new TextNode(j,this.length-(r-n)+g.length)}return super.replace(k,V,L)}k=V+1}return super.replace(n,r,g)}sliceString(n,r=this.length,g=`
`){[n,r]=clip(this,n,r);let y="";for(let k=0,$=0;k<this.children.length&&$<=r;k++){let V=this.children[k],L=$+V.length;$>n&&k&&(y+=g),n<L&&r>$&&(y+=V.sliceString(n-$,r-$,g)),$=L+1}return y}flatten(n){for(let r of this.children)r.flatten(n)}scanIdentical(n,r){if(!(n instanceof TextNode))return 0;let g=0,[y,k,$,V]=r>0?[0,0,this.children.length,n.children.length]:[this.children.length-1,n.children.length-1,-1,-1];for(;;y+=r,k+=r){if(y==$||k==V)return g;let L=this.children[y],z=n.children[k];if(L!=z)return g+L.scanIdentical(z,r);g+=L.length+1}}static from(n,r=n.reduce((g,y)=>g+y.length+1,-1)){let g=0;for(let oe of n)g+=oe.lines;if(g<32){let oe=[];for(let ue of n)ue.flatten(oe);return new TextLeaf(oe,r)}let y=Math.max(32,g>>5),k=y<<1,$=y>>1,V=[],L=0,z=-1,j=[];function ae(oe){let ue;if(oe.lines>k&&oe instanceof TextNode)for(let le of oe.children)ae(le);else oe.lines>$&&(L>$||!L)?(re(),V.push(oe)):oe instanceof TextLeaf&&L&&(ue=j[j.length-1])instanceof TextLeaf&&oe.lines+ue.lines<=32?(L+=oe.lines,z+=oe.length+1,j[j.length-1]=new TextLeaf(ue.text.concat(oe.text),ue.length+1+oe.length)):(L+oe.lines>y&&re(),L+=oe.lines,z+=oe.length+1,j.push(oe))}function re(){L!=0&&(V.push(j.length==1?j[0]:TextNode.from(j,z)),z=-1,L=j.length=0)}for(let oe of n)ae(oe);return re(),V.length==1?V[0]:new TextNode(V,r)}}Text.empty=new TextLeaf([""],0);function textLength(e){let n=-1;for(let r of e)n+=r.length+1;return n}function appendText(e,n,r=0,g=1e9){for(let y=0,k=0,$=!0;k<e.length&&y<=g;k++){let V=e[k],L=y+V.length;L>=r&&(L>g&&(V=V.slice(0,g-y)),y<r&&(V=V.slice(r-y)),$?(n[n.length-1]+=V,$=!1):n.push(V)),y=L+1}return n}function sliceText(e,n,r){return appendText(e,[""],n,r)}class RawTextCursor{constructor(n,r=1){this.dir=r,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[n],this.offsets=[r>0?1:(n instanceof TextLeaf?n.text.length:n.children.length)<<1]}nextInner(n,r){for(this.done=this.lineBreak=!1;;){let g=this.nodes.length-1,y=this.nodes[g],k=this.offsets[g],$=k>>1,V=y instanceof TextLeaf?y.text.length:y.children.length;if($==(r>0?V:0)){if(g==0)return this.done=!0,this.value="",this;r>0&&this.offsets[g-1]++,this.nodes.pop(),this.offsets.pop()}else if((k&1)==(r>0?0:1)){if(this.offsets[g]+=r,n==0)return this.lineBreak=!0,this.value=`
`,this;n--}else if(y instanceof TextLeaf){let L=y.text[$+(r<0?-1:0)];if(this.offsets[g]+=r,L.length>Math.max(0,n))return this.value=n==0?L:r>0?L.slice(n):L.slice(0,L.length-n),this;n-=L.length}else{let L=y.children[$+(r<0?-1:0)];n>L.length?(n-=L.length,this.offsets[g]+=r):(r<0&&this.offsets[g]--,this.nodes.push(L),this.offsets.push(r>0?1:(L instanceof TextLeaf?L.text.length:L.children.length)<<1))}}}next(n=0){return n<0&&(this.nextInner(-n,-this.dir),n=this.value.length),this.nextInner(n,this.dir)}}class PartialTextCursor{constructor(n,r,g){this.value="",this.done=!1,this.cursor=new RawTextCursor(n,r>g?-1:1),this.pos=r>g?n.length:0,this.from=Math.min(r,g),this.to=Math.max(r,g)}nextInner(n,r){if(r<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;n+=Math.max(0,r<0?this.pos-this.to:this.from-this.pos);let g=r<0?this.pos-this.from:this.to-this.pos;n>g&&(n=g),g-=n;let{value:y}=this.cursor.next(n);return this.pos+=(y.length+n)*r,this.value=y.length<=g?y:r<0?y.slice(y.length-g):y.slice(0,g),this.done=!this.value,this}next(n=0){return n<0?n=Math.max(n,this.from-this.pos):n>0&&(n=Math.min(n,this.to-this.pos)),this.nextInner(n,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(n){this.inner=n,this.afterBreak=!0,this.value="",this.done=!1}next(n=0){let{done:r,lineBreak:g,value:y}=this.inner.next(n);return r&&this.afterBreak?(this.value="",this.afterBreak=!1):r?(this.done=!0,this.value=""):g?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=y,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(n,r,g,y){this.from=n,this.to=r,this.number=g,this.text=y}get length(){return this.to-this.from}}function clip(e,n,r){return n=Math.max(0,Math.min(e.length,n)),[n,Math.max(n,Math.min(e.length,r))]}function findClusterBreak(e,n,r=!0,g=!0){return findClusterBreak$1(e,n,r,g)}function surrogateLow(e){return e>=56320&&e<57344}function surrogateHigh(e){return e>=55296&&e<56320}function codePointAt$1(e,n){let r=e.charCodeAt(n);if(!surrogateHigh(r)||n+1==e.length)return r;let g=e.charCodeAt(n+1);return surrogateLow(g)?(r-55296<<10)+(g-56320)+65536:r}function fromCodePoint(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}function codePointSize(e){return e<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(MapMode||(MapMode={}));class ChangeDesc{constructor(n){this.sections=n}get length(){let n=0;for(let r=0;r<this.sections.length;r+=2)n+=this.sections[r];return n}get newLength(){let n=0;for(let r=0;r<this.sections.length;r+=2){let g=this.sections[r+1];n+=g<0?this.sections[r]:g}return n}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(n){for(let r=0,g=0,y=0;r<this.sections.length;){let k=this.sections[r++],$=this.sections[r++];$<0?(n(g,y,k),y+=k):y+=$,g+=k}}iterChangedRanges(n,r=!1){iterChanges(this,n,r)}get invertedDesc(){let n=[];for(let r=0;r<this.sections.length;){let g=this.sections[r++],y=this.sections[r++];y<0?n.push(g,y):n.push(y,g)}return new ChangeDesc(n)}composeDesc(n){return this.empty?n:n.empty?this:composeSets(this,n)}mapDesc(n,r=!1){return n.empty?this:mapSet(this,n,r)}mapPos(n,r=-1,g=MapMode.Simple){let y=0,k=0;for(let $=0;$<this.sections.length;){let V=this.sections[$++],L=this.sections[$++],z=y+V;if(L<0){if(z>n)return k+(n-y);k+=V}else{if(g!=MapMode.Simple&&z>=n&&(g==MapMode.TrackDel&&y<n&&z>n||g==MapMode.TrackBefore&&y<n||g==MapMode.TrackAfter&&z>n))return null;if(z>n||z==n&&r<0&&!V)return n==y||r<0?k:k+L;k+=L}y=z}if(n>y)throw new RangeError(`Position ${n} is out of range for changeset of length ${y}`);return k}touchesRange(n,r=n){for(let g=0,y=0;g<this.sections.length&&y<=r;){let k=this.sections[g++],$=this.sections[g++],V=y+k;if($>=0&&y<=r&&V>=n)return y<n&&V>r?"cover":!0;y=V}return!1}toString(){let n="";for(let r=0;r<this.sections.length;){let g=this.sections[r++],y=this.sections[r++];n+=(n?" ":"")+g+(y>=0?":"+y:"")}return n}toJSON(){return this.sections}static fromJSON(n){if(!Array.isArray(n)||n.length%2||n.some(r=>typeof r!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(n)}static create(n){return new ChangeDesc(n)}}class ChangeSet extends ChangeDesc{constructor(n,r){super(n),this.inserted=r}apply(n){if(this.length!=n.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(r,g,y,k,$)=>n=n.replace(y,y+(g-r),$),!1),n}mapDesc(n,r=!1){return mapSet(this,n,r,!0)}invert(n){let r=this.sections.slice(),g=[];for(let y=0,k=0;y<r.length;y+=2){let $=r[y],V=r[y+1];if(V>=0){r[y]=V,r[y+1]=$;let L=y>>1;for(;g.length<L;)g.push(Text.empty);g.push($?n.slice(k,k+$):Text.empty)}k+=$}return new ChangeSet(r,g)}compose(n){return this.empty?n:n.empty?this:composeSets(this,n,!0)}map(n,r=!1){return n.empty?this:mapSet(this,n,r,!0)}iterChanges(n,r=!1){iterChanges(this,n,r)}get desc(){return ChangeDesc.create(this.sections)}filter(n){let r=[],g=[],y=[],k=new SectionIter(this);e:for(let $=0,V=0;;){let L=$==n.length?1e9:n[$++];for(;V<L||V==L&&k.len==0;){if(k.done)break e;let j=Math.min(k.len,L-V);addSection(y,j,-1);let ae=k.ins==-1?-1:k.off==0?k.ins:0;addSection(r,j,ae),ae>0&&addInsert(g,r,k.text),k.forward(j),V+=j}let z=n[$++];for(;V<z;){if(k.done)break e;let j=Math.min(k.len,z-V);addSection(r,j,-1),addSection(y,j,k.ins==-1?-1:k.off==0?k.ins:0),k.forward(j),V+=j}}return{changes:new ChangeSet(r,g),filtered:ChangeDesc.create(y)}}toJSON(){let n=[];for(let r=0;r<this.sections.length;r+=2){let g=this.sections[r],y=this.sections[r+1];y<0?n.push(g):y==0?n.push([g]):n.push([g].concat(this.inserted[r>>1].toJSON()))}return n}static of(n,r,g){let y=[],k=[],$=0,V=null;function L(j=!1){if(!j&&!y.length)return;$<r&&addSection(y,r-$,-1);let ae=new ChangeSet(y,k);V=V?V.compose(ae.map(V)):ae,y=[],k=[],$=0}function z(j){if(Array.isArray(j))for(let ae of j)z(ae);else if(j instanceof ChangeSet){if(j.length!=r)throw new RangeError(`Mismatched change set length (got ${j.length}, expected ${r})`);L(),V=V?V.compose(j.map(V)):j}else{let{from:ae,to:re=ae,insert:oe}=j;if(ae>re||ae<0||re>r)throw new RangeError(`Invalid change range ${ae} to ${re} (in doc of length ${r})`);let ue=oe?typeof oe=="string"?Text.of(oe.split(g||DefaultSplit)):oe:Text.empty,le=ue.length;if(ae==re&&le==0)return;ae<$&&L(),ae>$&&addSection(y,ae-$,-1),addSection(y,re-ae,le),addInsert(k,y,ue),$=re}}return z(n),L(!V),V}static empty(n){return new ChangeSet(n?[n,-1]:[],[])}static fromJSON(n){if(!Array.isArray(n))throw new RangeError("Invalid JSON representation of ChangeSet");let r=[],g=[];for(let y=0;y<n.length;y++){let k=n[y];if(typeof k=="number")r.push(k,-1);else{if(!Array.isArray(k)||typeof k[0]!="number"||k.some(($,V)=>V&&typeof $!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(k.length==1)r.push(k[0],0);else{for(;g.length<y;)g.push(Text.empty);g[y]=Text.of(k.slice(1)),r.push(k[0],g[y].length)}}}return new ChangeSet(r,g)}static createSet(n,r){return new ChangeSet(n,r)}}function addSection(e,n,r,g=!1){if(n==0&&r<=0)return;let y=e.length-2;y>=0&&r<=0&&r==e[y+1]?e[y]+=n:y>=0&&n==0&&e[y]==0?e[y+1]+=r:g?(e[y]+=n,e[y+1]+=r):e.push(n,r)}function addInsert(e,n,r){if(r.length==0)return;let g=n.length-2>>1;if(g<e.length)e[e.length-1]=e[e.length-1].append(r);else{for(;e.length<g;)e.push(Text.empty);e.push(r)}}function iterChanges(e,n,r){let g=e.inserted;for(let y=0,k=0,$=0;$<e.sections.length;){let V=e.sections[$++],L=e.sections[$++];if(L<0)y+=V,k+=V;else{let z=y,j=k,ae=Text.empty;for(;z+=V,j+=L,L&&g&&(ae=ae.append(g[$-2>>1])),!(r||$==e.sections.length||e.sections[$+1]<0);)V=e.sections[$++],L=e.sections[$++];n(y,z,k,j,ae),y=z,k=j}}}function mapSet(e,n,r,g=!1){let y=[],k=g?[]:null,$=new SectionIter(e),V=new SectionIter(n);for(let L=-1;;){if($.done&&V.len||V.done&&$.len)throw new Error("Mismatched change set lengths");if($.ins==-1&&V.ins==-1){let z=Math.min($.len,V.len);addSection(y,z,-1),$.forward(z),V.forward(z)}else if(V.ins>=0&&($.ins<0||L==$.i||$.off==0&&(V.len<$.len||V.len==$.len&&!r))){let z=V.len;for(addSection(y,V.ins,-1);z;){let j=Math.min($.len,z);$.ins>=0&&L<$.i&&$.len<=j&&(addSection(y,0,$.ins),k&&addInsert(k,y,$.text),L=$.i),$.forward(j),z-=j}V.next()}else if($.ins>=0){let z=0,j=$.len;for(;j;)if(V.ins==-1){let ae=Math.min(j,V.len);z+=ae,j-=ae,V.forward(ae)}else if(V.ins==0&&V.len<j)j-=V.len,V.next();else break;addSection(y,z,L<$.i?$.ins:0),k&&L<$.i&&addInsert(k,y,$.text),L=$.i,$.forward($.len-j)}else{if($.done&&V.done)return k?ChangeSet.createSet(y,k):ChangeDesc.create(y);throw new Error("Mismatched change set lengths")}}}function composeSets(e,n,r=!1){let g=[],y=r?[]:null,k=new SectionIter(e),$=new SectionIter(n);for(let V=!1;;){if(k.done&&$.done)return y?ChangeSet.createSet(g,y):ChangeDesc.create(g);if(k.ins==0)addSection(g,k.len,0,V),k.next();else if($.len==0&&!$.done)addSection(g,0,$.ins,V),y&&addInsert(y,g,$.text),$.next();else{if(k.done||$.done)throw new Error("Mismatched change set lengths");{let L=Math.min(k.len2,$.len),z=g.length;if(k.ins==-1){let j=$.ins==-1?-1:$.off?0:$.ins;addSection(g,L,j,V),y&&j&&addInsert(y,g,$.text)}else $.ins==-1?(addSection(g,k.off?0:k.len,L,V),y&&addInsert(y,g,k.textBit(L))):(addSection(g,k.off?0:k.len,$.off?0:$.ins,V),y&&!$.off&&addInsert(y,g,$.text));V=(k.ins>L||$.ins>=0&&$.len>L)&&(V||g.length>z),k.forward2(L),$.forward(L)}}}}class SectionIter{constructor(n){this.set=n,this.i=0,this.next()}next(){let{sections:n}=this.set;this.i<n.length?(this.len=n[this.i++],this.ins=n[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length?Text.empty:n[r]}textBit(n){let{inserted:r}=this.set,g=this.i-2>>1;return g>=r.length&&!n?Text.empty:r[g].slice(this.off,n==null?void 0:this.off+n)}forward(n){n==this.len?this.next():(this.len-=n,this.off+=n)}forward2(n){this.ins==-1?this.forward(n):n==this.ins?this.next():(this.ins-=n,this.off+=n)}}class SelectionRange{constructor(n,r,g){this.from=n,this.to=r,this.flags=g}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let n=this.flags&7;return n==7?null:n}get goalColumn(){let n=this.flags>>6;return n==16777215?void 0:n}map(n,r=-1){let g,y;return this.empty?g=y=n.mapPos(this.from,r):(g=n.mapPos(this.from,1),y=n.mapPos(this.to,-1)),g==this.from&&y==this.to?this:new SelectionRange(g,y,this.flags)}extend(n,r=n){if(n<=this.anchor&&r>=this.anchor)return EditorSelection.range(n,r);let g=Math.abs(n-this.anchor)>Math.abs(r-this.anchor)?n:r;return EditorSelection.range(this.anchor,g)}eq(n,r=!1){return this.anchor==n.anchor&&this.head==n.head&&(!r||!this.empty||this.assoc==n.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(n){if(!n||typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(n.anchor,n.head)}static create(n,r,g){return new SelectionRange(n,r,g)}}class EditorSelection{constructor(n,r){this.ranges=n,this.mainIndex=r}map(n,r=-1){return n.empty?this:EditorSelection.create(this.ranges.map(g=>g.map(n,r)),this.mainIndex)}eq(n,r=!1){if(this.ranges.length!=n.ranges.length||this.mainIndex!=n.mainIndex)return!1;for(let g=0;g<this.ranges.length;g++)if(!this.ranges[g].eq(n.ranges[g],r))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(n,r=!0){return EditorSelection.create([n].concat(this.ranges),r?0:this.mainIndex+1)}replaceRange(n,r=this.mainIndex){let g=this.ranges.slice();return g[r]=n,EditorSelection.create(g,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(n=>n.toJSON()),main:this.mainIndex}}static fromJSON(n){if(!n||!Array.isArray(n.ranges)||typeof n.main!="number"||n.main>=n.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(n.ranges.map(r=>SelectionRange.fromJSON(r)),n.main)}static single(n,r=n){return new EditorSelection([EditorSelection.range(n,r)],0)}static create(n,r=0){if(n.length==0)throw new RangeError("A selection needs at least one range");for(let g=0,y=0;y<n.length;y++){let k=n[y];if(k.empty?k.from<=g:k.from<g)return EditorSelection.normalized(n.slice(),r);g=k.to}return new EditorSelection(n,r)}static cursor(n,r=0,g,y){return SelectionRange.create(n,n,(r==0?0:r<0?8:16)|(g==null?7:Math.min(6,g))|(y??16777215)<<6)}static range(n,r,g,y){let k=(g??16777215)<<6|(y==null?7:Math.min(6,y));return r<n?SelectionRange.create(r,n,48|k):SelectionRange.create(n,r,(r>n?8:0)|k)}static normalized(n,r=0){let g=n[r];n.sort((y,k)=>y.from-k.from),r=n.indexOf(g);for(let y=1;y<n.length;y++){let k=n[y],$=n[y-1];if(k.empty?k.from<=$.to:k.from<$.to){let V=$.from,L=Math.max(k.to,$.to);y<=r&&r--,n.splice(--y,2,k.anchor>k.head?EditorSelection.range(L,V):EditorSelection.range(V,L))}}return new EditorSelection(n,r)}}function checkSelection(e,n){for(let r of e.ranges)if(r.to>n)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(n,r,g,y,k){this.combine=n,this.compareInput=r,this.compare=g,this.isStatic=y,this.id=nextID++,this.default=n([]),this.extensions=typeof k=="function"?k(this):k}get reader(){return this}static define(n={}){return new Facet(n.combine||(r=>r),n.compareInput||((r,g)=>r===g),n.compare||(n.combine?(r,g)=>r===g:sameArray$1),!!n.static,n.enables)}of(n){return new FacetProvider([],this,0,n)}compute(n,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(n,this,1,r)}computeN(n,r){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(n,this,2,r)}from(n,r){return r||(r=g=>g),this.compute([n],g=>r(g.field(n)))}}function sameArray$1(e,n){return e==n||e.length==n.length&&e.every((r,g)=>r===n[g])}class FacetProvider{constructor(n,r,g,y){this.dependencies=n,this.facet=r,this.type=g,this.value=y,this.id=nextID++}dynamicSlot(n){var r;let g=this.value,y=this.facet.compareInput,k=this.id,$=n[k]>>1,V=this.type==2,L=!1,z=!1,j=[];for(let ae of this.dependencies)ae=="doc"?L=!0:ae=="selection"?z=!0:((r=n[ae.id])!==null&&r!==void 0?r:1)&1||j.push(n[ae.id]);return{create(ae){return ae.values[$]=g(ae),1},update(ae,re){if(L&&re.docChanged||z&&(re.docChanged||re.selection)||ensureAll(ae,j)){let oe=g(ae);if(V?!compareArray(oe,ae.values[$],y):!y(oe,ae.values[$]))return ae.values[$]=oe,1}return 0},reconfigure:(ae,re)=>{let oe,ue=re.config.address[k];if(ue!=null){let le=getAddr(re,ue);if(this.dependencies.every(de=>de instanceof Facet?re.facet(de)===ae.facet(de):de instanceof StateField?re.field(de,!1)==ae.field(de,!1):!0)||(V?compareArray(oe=g(ae),le,y):y(oe=g(ae),le)))return ae.values[$]=le,0}else oe=g(ae);return ae.values[$]=oe,1}}}}function compareArray(e,n,r){if(e.length!=n.length)return!1;for(let g=0;g<e.length;g++)if(!r(e[g],n[g]))return!1;return!0}function ensureAll(e,n){let r=!1;for(let g of n)ensureAddr(e,g)&1&&(r=!0);return r}function dynamicFacetSlot(e,n,r){let g=r.map(L=>e[L.id]),y=r.map(L=>L.type),k=g.filter(L=>!(L&1)),$=e[n.id]>>1;function V(L){let z=[];for(let j=0;j<g.length;j++){let ae=getAddr(L,g[j]);if(y[j]==2)for(let re of ae)z.push(re);else z.push(ae)}return n.combine(z)}return{create(L){for(let z of g)ensureAddr(L,z);return L.values[$]=V(L),1},update(L,z){if(!ensureAll(L,k))return 0;let j=V(L);return n.compare(j,L.values[$])?0:(L.values[$]=j,1)},reconfigure(L,z){let j=ensureAll(L,g),ae=z.config.facets[n.id],re=z.facet(n);if(ae&&!j&&sameArray$1(r,ae))return L.values[$]=re,0;let oe=V(L);return n.compare(oe,re)?(L.values[$]=re,0):(L.values[$]=oe,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(n,r,g,y,k){this.id=n,this.createF=r,this.updateF=g,this.compareF=y,this.spec=k,this.provides=void 0}static define(n){let r=new StateField(nextID++,n.create,n.update,n.compare||((g,y)=>g===y),n);return n.provide&&(r.provides=n.provide(r)),r}create(n){let r=n.facet(initField).find(g=>g.field==this);return(r?.create||this.createF)(n)}slot(n){let r=n[this.id]>>1;return{create:g=>(g.values[r]=this.create(g),1),update:(g,y)=>{let k=g.values[r],$=this.updateF(k,y);return this.compareF(k,$)?0:(g.values[r]=$,1)},reconfigure:(g,y)=>y.config.address[this.id]!=null?(g.values[r]=y.field(this),0):(g.values[r]=this.create(g),1)}}init(n){return[this,initField.of({field:this,create:n})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(e){return n=>new PrecExtension(n,e)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(n,r){this.inner=n,this.prec=r}}class Compartment{of(n){return new CompartmentInstance(this,n)}reconfigure(n){return Compartment.reconfigure.of({compartment:this,extension:n})}get(n){return n.config.compartments.get(this)}}class CompartmentInstance{constructor(n,r){this.compartment=n,this.inner=r}}class Configuration{constructor(n,r,g,y,k,$){for(this.base=n,this.compartments=r,this.dynamicSlots=g,this.address=y,this.staticValues=k,this.facets=$,this.statusTemplate=[];this.statusTemplate.length<g.length;)this.statusTemplate.push(0)}staticFacet(n){let r=this.address[n.id];return r==null?n.default:this.staticValues[r>>1]}static resolve(n,r,g){let y=[],k=Object.create(null),$=new Map;for(let re of flatten(n,r,$))re instanceof StateField?y.push(re):(k[re.facet.id]||(k[re.facet.id]=[])).push(re);let V=Object.create(null),L=[],z=[];for(let re of y)V[re.id]=z.length<<1,z.push(oe=>re.slot(oe));let j=g?.config.facets;for(let re in k){let oe=k[re],ue=oe[0].facet,le=j&&j[re]||[];if(oe.every(de=>de.type==0))if(V[ue.id]=L.length<<1|1,sameArray$1(le,oe))L.push(g.facet(ue));else{let de=ue.combine(oe.map(he=>he.value));L.push(g&&ue.compare(de,g.facet(ue))?g.facet(ue):de)}else{for(let de of oe)de.type==0?(V[de.id]=L.length<<1|1,L.push(de.value)):(V[de.id]=z.length<<1,z.push(he=>de.dynamicSlot(he)));V[ue.id]=z.length<<1,z.push(de=>dynamicFacetSlot(de,ue,oe))}}let ae=z.map(re=>re(V));return new Configuration(n,$,ae,V,L,k)}}function flatten(e,n,r){let g=[[],[],[],[],[]],y=new Map;function k($,V){let L=y.get($);if(L!=null){if(L<=V)return;let z=g[L].indexOf($);z>-1&&g[L].splice(z,1),$ instanceof CompartmentInstance&&r.delete($.compartment)}if(y.set($,V),Array.isArray($))for(let z of $)k(z,V);else if($ instanceof CompartmentInstance){if(r.has($.compartment))throw new RangeError("Duplicate use of compartment in extensions");let z=n.get($.compartment)||$.inner;r.set($.compartment,z),k(z,V)}else if($ instanceof PrecExtension)k($.inner,$.prec);else if($ instanceof StateField)g[V].push($),$.provides&&k($.provides,V);else if($ instanceof FacetProvider)g[V].push($),$.facet.extensions&&k($.facet.extensions,Prec_.default);else{let z=$.extension;if(!z)throw new Error(`Unrecognized extension value in extension set (${$}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);k(z,V)}}return k(e,Prec_.default),g.reduce(($,V)=>$.concat(V))}function ensureAddr(e,n){if(n&1)return 2;let r=n>>1,g=e.status[r];if(g==4)throw new Error("Cyclic dependency between fields and/or facets");if(g&2)return g;e.status[r]=4;let y=e.computeSlot(e,e.config.dynamicSlots[r]);return e.status[r]=2|y}function getAddr(e,n){return n&1?e.config.staticValues[n>>1]:e.values[n>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:e=>e.some(n=>n),static:!0}),lineSeparator=Facet.define({combine:e=>e.length?e[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:e=>e.length?e[0]:!1});class Annotation{constructor(n,r){this.type=n,this.value=r}static define(){return new AnnotationType}}class AnnotationType{of(n){return new Annotation(this,n)}}class StateEffectType{constructor(n){this.map=n}of(n){return new StateEffect(this,n)}}class StateEffect{constructor(n,r){this.type=n,this.value=r}map(n){let r=this.type.map(this.value,n);return r===void 0?void 0:r==this.value?this:new StateEffect(this.type,r)}is(n){return this.type==n}static define(n={}){return new StateEffectType(n.map||(r=>r))}static mapEffects(n,r){if(!n.length)return n;let g=[];for(let y of n){let k=y.map(r);k&&g.push(k)}return g}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(n,r,g,y,k,$){this.startState=n,this.changes=r,this.selection=g,this.effects=y,this.annotations=k,this.scrollIntoView=$,this._doc=null,this._state=null,g&&checkSelection(g,r.newLength),k.some(V=>V.type==Transaction.time)||(this.annotations=k.concat(Transaction.time.of(Date.now())))}static create(n,r,g,y,k,$){return new Transaction(n,r,g,y,k,$)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(n){for(let r of this.annotations)if(r.type==n)return r.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(n){let r=this.annotation(Transaction.userEvent);return!!(r&&(r==n||r.length>n.length&&r.slice(0,n.length)==n&&r[n.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges(e,n){let r=[];for(let g=0,y=0;;){let k,$;if(g<e.length&&(y==n.length||n[y]>=e[g]))k=e[g++],$=e[g++];else if(y<n.length)k=n[y++],$=n[y++];else return r;!r.length||r[r.length-1]<k?r.push(k,$):r[r.length-1]<$&&(r[r.length-1]=$)}}function mergeTransaction(e,n,r){var g;let y,k,$;return r?(y=n.changes,k=ChangeSet.empty(n.changes.length),$=e.changes.compose(n.changes)):(y=n.changes.map(e.changes),k=e.changes.mapDesc(n.changes,!0),$=e.changes.compose(y)),{changes:$,selection:n.selection?n.selection.map(k):(g=e.selection)===null||g===void 0?void 0:g.map(y),effects:StateEffect.mapEffects(e.effects,y).concat(StateEffect.mapEffects(n.effects,k)),annotations:e.annotations.length?e.annotations.concat(n.annotations):n.annotations,scrollIntoView:e.scrollIntoView||n.scrollIntoView}}function resolveTransactionInner(e,n,r){let g=n.selection,y=asArray$1(n.annotations);return n.userEvent&&(y=y.concat(Transaction.userEvent.of(n.userEvent))),{changes:n.changes instanceof ChangeSet?n.changes:ChangeSet.of(n.changes||[],r,e.facet(lineSeparator)),selection:g&&(g instanceof EditorSelection?g:EditorSelection.single(g.anchor,g.head)),effects:asArray$1(n.effects),annotations:y,scrollIntoView:!!n.scrollIntoView}}function resolveTransaction(e,n,r){let g=resolveTransactionInner(e,n.length?n[0]:{},e.doc.length);n.length&&n[0].filter===!1&&(r=!1);for(let k=1;k<n.length;k++){n[k].filter===!1&&(r=!1);let $=!!n[k].sequential;g=mergeTransaction(g,resolveTransactionInner(e,n[k],$?g.changes.newLength:e.doc.length),$)}let y=Transaction.create(e,g.changes,g.selection,g.effects,g.annotations,g.scrollIntoView);return extendTransaction(r?filterTransaction(y):y)}function filterTransaction(e){let n=e.startState,r=!0;for(let y of n.facet(changeFilter)){let k=y(e);if(k===!1){r=!1;break}Array.isArray(k)&&(r=r===!0?k:joinRanges(r,k))}if(r!==!0){let y,k;if(r===!1)k=e.changes.invertedDesc,y=ChangeSet.empty(n.doc.length);else{let $=e.changes.filter(r);y=$.changes,k=$.filtered.mapDesc($.changes).invertedDesc}e=Transaction.create(n,y,e.selection&&e.selection.map(k),StateEffect.mapEffects(e.effects,k),e.annotations,e.scrollIntoView)}let g=n.facet(transactionFilter);for(let y=g.length-1;y>=0;y--){let k=g[y](e);k instanceof Transaction?e=k:Array.isArray(k)&&k.length==1&&k[0]instanceof Transaction?e=k[0]:e=resolveTransaction(n,asArray$1(k),!1)}return e}function extendTransaction(e){let n=e.startState,r=n.facet(transactionExtender),g=e;for(let y=r.length-1;y>=0;y--){let k=r[y](e);k&&Object.keys(k).length&&(g=mergeTransaction(g,resolveTransactionInner(n,k,e.changes.newLength),!0))}return g==e?e:Transaction.create(n,e.changes,e.selection,g.effects,g.annotations,g.scrollIntoView)}const none$2=[];function asArray$1(e){return e==null?none$2:Array.isArray(e)?e:[e]}var CharCategory=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}function hasWordChar(e){if(wordChar)return wordChar.test(e);for(let n=0;n<e.length;n++){let r=e[n];if(/\w/.test(r)||r>""&&(r.toUpperCase()!=r.toLowerCase()||nonASCIISingleCaseWordChar.test(r)))return!0}return!1}function makeCategorizer(e){return n=>{if(!/\S/.test(n))return CharCategory.Space;if(hasWordChar(n))return CharCategory.Word;for(let r=0;r<e.length;r++)if(n.indexOf(e[r])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(n,r,g,y,k,$){this.config=n,this.doc=r,this.selection=g,this.values=y,this.status=n.statusTemplate.slice(),this.computeSlot=k,$&&($._state=this);for(let V=0;V<this.config.dynamicSlots.length;V++)ensureAddr(this,V<<1);this.computeSlot=null}field(n,r=!0){let g=this.config.address[n.id];if(g==null){if(r)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,g),getAddr(this,g)}update(...n){return resolveTransaction(this,n,!0)}applyTransaction(n){let r=this.config,{base:g,compartments:y}=r;for(let V of n.effects)V.is(Compartment.reconfigure)?(r&&(y=new Map,r.compartments.forEach((L,z)=>y.set(z,L)),r=null),y.set(V.value.compartment,V.value.extension)):V.is(StateEffect.reconfigure)?(r=null,g=V.value):V.is(StateEffect.appendConfig)&&(r=null,g=asArray$1(g).concat(V.value));let k;r?k=n.startState.values.slice():(r=Configuration.resolve(g,y,this),k=new EditorState(r,this.doc,this.selection,r.dynamicSlots.map(()=>null),(L,z)=>z.reconfigure(L,this),null).values);let $=n.startState.facet(allowMultipleSelections)?n.newSelection:n.newSelection.asSingle();new EditorState(r,n.newDoc,$,k,(V,L)=>L.update(V,n),n)}replaceSelection(n){return typeof n=="string"&&(n=this.toText(n)),this.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:n},range:EditorSelection.cursor(r.from+n.length)}))}changeByRange(n){let r=this.selection,g=n(r.ranges[0]),y=this.changes(g.changes),k=[g.range],$=asArray$1(g.effects);for(let V=1;V<r.ranges.length;V++){let L=n(r.ranges[V]),z=this.changes(L.changes),j=z.map(y);for(let re=0;re<V;re++)k[re]=k[re].map(j);let ae=y.mapDesc(z,!0);k.push(L.range.map(ae)),y=y.compose(j),$=StateEffect.mapEffects($,j).concat(StateEffect.mapEffects(asArray$1(L.effects),ae))}return{changes:y,selection:EditorSelection.create(k,r.mainIndex),effects:$}}changes(n=[]){return n instanceof ChangeSet?n:ChangeSet.of(n,this.doc.length,this.facet(EditorState.lineSeparator))}toText(n){return Text.of(n.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(n=0,r=this.doc.length){return this.doc.sliceString(n,r,this.lineBreak)}facet(n){let r=this.config.address[n.id];return r==null?n.default:(ensureAddr(this,r),getAddr(this,r))}toJSON(n){let r={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(n)for(let g in n){let y=n[g];y instanceof StateField&&this.config.address[y.id]!=null&&(r[g]=y.spec.toJSON(this.field(n[g]),this))}return r}static fromJSON(n,r={},g){if(!n||typeof n.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let y=[];if(g){for(let k in g)if(Object.prototype.hasOwnProperty.call(n,k)){let $=g[k],V=n[k];y.push($.init(L=>$.spec.fromJSON(V,L)))}}return EditorState.create({doc:n.doc,selection:EditorSelection.fromJSON(n.selection),extensions:r.extensions?y.concat([r.extensions]):y})}static create(n={}){let r=Configuration.resolve(n.extensions||[],new Map),g=n.doc instanceof Text?n.doc:Text.of((n.doc||"").split(r.staticFacet(EditorState.lineSeparator)||DefaultSplit)),y=n.selection?n.selection instanceof EditorSelection?n.selection:EditorSelection.single(n.selection.anchor,n.selection.head):EditorSelection.single(0);return checkSelection(y,g.length),r.staticFacet(allowMultipleSelections)||(y=y.asSingle()),new EditorState(r,g,y,r.dynamicSlots.map(()=>null),(k,$)=>$.create(k),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(n,...r){for(let g of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(g,n)){n=g[n];break}return r.length&&(n=n.replace(/\$(\$|\d*)/g,(g,y)=>{if(y=="$")return"$";let k=+(y||1);return!k||k>r.length?g:r[k-1]})),n}languageDataAt(n,r,g=-1){let y=[];for(let k of this.facet(languageData))for(let $ of k(this,r,g))Object.prototype.hasOwnProperty.call($,n)&&y.push($[n]);return y}charCategorizer(n){return makeCategorizer(this.languageDataAt("wordChars",n).join(""))}wordAt(n){let{text:r,from:g,length:y}=this.doc.lineAt(n),k=this.charCategorizer(n),$=n-g,V=n-g;for(;$>0;){let L=findClusterBreak(r,$,!1);if(k(r.slice(L,$))!=CharCategory.Word)break;$=L}for(;V<y;){let L=findClusterBreak(r,V);if(k(r.slice(V,L))!=CharCategory.Word)break;V=L}return $==V?null:EditorSelection.range($+g,V+g)}}EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:e=>e.length?e[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly;EditorState.phrases=Facet.define({compare(e,n){let r=Object.keys(e),g=Object.keys(n);return r.length==g.length&&r.every(y=>e[y]==n[y])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig(e,n,r={}){let g={};for(let y of e)for(let k of Object.keys(y)){let $=y[k],V=g[k];if(V===void 0)g[k]=$;else if(!(V===$||$===void 0))if(Object.hasOwnProperty.call(r,k))g[k]=r[k](V,$);else throw new Error("Config merge conflict for field "+k)}for(let y in n)g[y]===void 0&&(g[y]=n[y]);return g}class RangeValue{eq(n){return this==n}range(n,r=n){return Range$1.create(n,r,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;let Range$1=class Qo{constructor(n,r,g){this.from=n,this.to=r,this.value=g}static create(n,r,g){return new Qo(n,r,g)}};function cmpRange(e,n){return e.from-n.from||e.value.startSide-n.value.startSide}class Chunk{constructor(n,r,g,y){this.from=n,this.to=r,this.value=g,this.maxPoint=y}get length(){return this.to[this.to.length-1]}findIndex(n,r,g,y=0){let k=g?this.to:this.from;for(let $=y,V=k.length;;){if($==V)return $;let L=$+V>>1,z=k[L]-n||(g?this.value[L].endSide:this.value[L].startSide)-r;if(L==$)return z>=0?$:V;z>=0?V=L:$=L+1}}between(n,r,g,y){for(let k=this.findIndex(r,-1e9,!0),$=this.findIndex(g,1e9,!1,k);k<$;k++)if(y(this.from[k]+n,this.to[k]+n,this.value[k])===!1)return!1}map(n,r){let g=[],y=[],k=[],$=-1,V=-1;for(let L=0;L<this.value.length;L++){let z=this.value[L],j=this.from[L]+n,ae=this.to[L]+n,re,oe;if(j==ae){let ue=r.mapPos(j,z.startSide,z.mapMode);if(ue==null||(re=oe=ue,z.startSide!=z.endSide&&(oe=r.mapPos(j,z.endSide),oe<re)))continue}else if(re=r.mapPos(j,z.startSide),oe=r.mapPos(ae,z.endSide),re>oe||re==oe&&z.startSide>0&&z.endSide<=0)continue;(oe-re||z.endSide-z.startSide)<0||($<0&&($=re),z.point&&(V=Math.max(V,oe-re)),g.push(z),y.push(re-$),k.push(oe-$))}return{mapped:g.length?new Chunk(y,k,g,V):null,pos:$}}}class RangeSet{constructor(n,r,g,y){this.chunkPos=n,this.chunk=r,this.nextLayer=g,this.maxPoint=y}static create(n,r,g,y){return new RangeSet(n,r,g,y)}get length(){let n=this.chunk.length-1;return n<0?0:Math.max(this.chunkEnd(n),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let n=this.nextLayer.size;for(let r of this.chunk)n+=r.value.length;return n}chunkEnd(n){return this.chunkPos[n]+this.chunk[n].length}update(n){let{add:r=[],sort:g=!1,filterFrom:y=0,filterTo:k=this.length}=n,$=n.filter;if(r.length==0&&!$)return this;if(g&&(r=r.slice().sort(cmpRange)),this.isEmpty)return r.length?RangeSet.of(r):this;let V=new LayerCursor(this,null,-1).goto(0),L=0,z=[],j=new RangeSetBuilder;for(;V.value||L<r.length;)if(L<r.length&&(V.from-r[L].from||V.startSide-r[L].value.startSide)>=0){let ae=r[L++];j.addInner(ae.from,ae.to,ae.value)||z.push(ae)}else V.rangeIndex==1&&V.chunkIndex<this.chunk.length&&(L==r.length||this.chunkEnd(V.chunkIndex)<r[L].from)&&(!$||y>this.chunkEnd(V.chunkIndex)||k<this.chunkPos[V.chunkIndex])&&j.addChunk(this.chunkPos[V.chunkIndex],this.chunk[V.chunkIndex])?V.nextChunk():((!$||y>V.to||k<V.from||$(V.from,V.to,V.value))&&(j.addInner(V.from,V.to,V.value)||z.push(Range$1.create(V.from,V.to,V.value))),V.next());return j.finishInner(this.nextLayer.isEmpty&&!z.length?RangeSet.empty:this.nextLayer.update({add:z,filter:$,filterFrom:y,filterTo:k}))}map(n){if(n.empty||this.isEmpty)return this;let r=[],g=[],y=-1;for(let $=0;$<this.chunk.length;$++){let V=this.chunkPos[$],L=this.chunk[$],z=n.touchesRange(V,V+L.length);if(z===!1)y=Math.max(y,L.maxPoint),r.push(L),g.push(n.mapPos(V));else if(z===!0){let{mapped:j,pos:ae}=L.map(V,n);j&&(y=Math.max(y,j.maxPoint),r.push(j),g.push(ae))}}let k=this.nextLayer.map(n);return r.length==0?k:new RangeSet(g,r,k||RangeSet.empty,y)}between(n,r,g){if(!this.isEmpty){for(let y=0;y<this.chunk.length;y++){let k=this.chunkPos[y],$=this.chunk[y];if(r>=k&&n<=k+$.length&&$.between(k,n-k,r-k,g)===!1)return}this.nextLayer.between(n,r,g)}}iter(n=0){return HeapCursor.from([this]).goto(n)}get isEmpty(){return this.nextLayer==this}static iter(n,r=0){return HeapCursor.from(n).goto(r)}static compare(n,r,g,y,k=-1){let $=n.filter(ae=>ae.maxPoint>0||!ae.isEmpty&&ae.maxPoint>=k),V=r.filter(ae=>ae.maxPoint>0||!ae.isEmpty&&ae.maxPoint>=k),L=findSharedChunks($,V,g),z=new SpanCursor($,L,k),j=new SpanCursor(V,L,k);g.iterGaps((ae,re,oe)=>compare(z,ae,j,re,oe,y)),g.empty&&g.length==0&&compare(z,0,j,0,0,y)}static eq(n,r,g=0,y){y==null&&(y=999999999);let k=n.filter(j=>!j.isEmpty&&r.indexOf(j)<0),$=r.filter(j=>!j.isEmpty&&n.indexOf(j)<0);if(k.length!=$.length)return!1;if(!k.length)return!0;let V=findSharedChunks(k,$),L=new SpanCursor(k,V,0).goto(g),z=new SpanCursor($,V,0).goto(g);for(;;){if(L.to!=z.to||!sameValues(L.active,z.active)||L.point&&(!z.point||!L.point.eq(z.point)))return!1;if(L.to>y)return!0;L.next(),z.next()}}static spans(n,r,g,y,k=-1){let $=new SpanCursor(n,null,k).goto(r),V=r,L=$.openStart;for(;;){let z=Math.min($.to,g);if($.point){let j=$.activeForPoint($.to),ae=$.pointFrom<r?j.length+1:$.point.startSide<0?j.length:Math.min(j.length,L);y.point(V,z,$.point,j,ae,$.pointRank),L=Math.min($.openEnd(z),j.length)}else z>V&&(y.span(V,z,$.active,L),L=$.openEnd(z));if($.to>g)return L+($.point&&$.to>g?1:0);V=$.to,$.next()}}static of(n,r=!1){let g=new RangeSetBuilder;for(let y of n instanceof Range$1?[n]:r?lazySort(n):n)g.add(y.from,y.to,y.value);return g.finish()}static join(n){if(!n.length)return RangeSet.empty;let r=n[n.length-1];for(let g=n.length-2;g>=0;g--)for(let y=n[g];y!=RangeSet.empty;y=y.nextLayer)r=new RangeSet(y.chunkPos,y.chunk,r,Math.max(y.maxPoint,r.maxPoint));return r}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(e){if(e.length>1)for(let n=e[0],r=1;r<e.length;r++){let g=e[r];if(cmpRange(n,g)>0)return e.slice().sort(cmpRange);n=g}return e}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(n){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,n&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(n,r,g){this.addInner(n,r,g)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(n,r,g)}addInner(n,r,g){let y=n-this.lastTo||g.startSide-this.last.endSide;if(y<=0&&(n-this.lastFrom||g.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return y<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=n),this.from.push(n-this.chunkStart),this.to.push(r-this.chunkStart),this.last=g,this.lastFrom=n,this.lastTo=r,this.value.push(g),g.point&&(this.maxPoint=Math.max(this.maxPoint,r-n)),!0)}addChunk(n,r){if((n-this.lastTo||r.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,r.maxPoint),this.chunks.push(r),this.chunkPos.push(n);let g=r.value.length-1;return this.last=r.value[g],this.lastFrom=r.from[g]+n,this.lastTo=r.to[g]+n,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(n){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return n;let r=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(n):n,this.setMaxPoint);return this.from=null,r}}function findSharedChunks(e,n,r){let g=new Map;for(let k of e)for(let $=0;$<k.chunk.length;$++)k.chunk[$].maxPoint<=0&&g.set(k.chunk[$],k.chunkPos[$]);let y=new Set;for(let k of n)for(let $=0;$<k.chunk.length;$++){let V=g.get(k.chunk[$]);V!=null&&(r?r.mapPos(V):V)==k.chunkPos[$]&&!r?.touchesRange(V,V+k.chunk[$].length)&&y.add(k.chunk[$])}return y}class LayerCursor{constructor(n,r,g,y=0){this.layer=n,this.skip=r,this.minPoint=g,this.rank=y}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(n,r=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(n,r,!1),this}gotoInner(n,r,g){for(;this.chunkIndex<this.layer.chunk.length;){let y=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(y)||this.layer.chunkEnd(this.chunkIndex)<n||y.maxPoint<this.minPoint))break;this.chunkIndex++,g=!1}if(this.chunkIndex<this.layer.chunk.length){let y=this.layer.chunk[this.chunkIndex].findIndex(n-this.layer.chunkPos[this.chunkIndex],r,!0);(!g||this.rangeIndex<y)&&this.setRangeIndex(y)}this.next()}forward(n,r){(this.to-n||this.endSide-r)<0&&this.gotoInner(n,r,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let n=this.layer.chunkPos[this.chunkIndex],r=this.layer.chunk[this.chunkIndex],g=n+r.from[this.rangeIndex];if(this.from=g,this.to=n+r.to[this.rangeIndex],this.value=r.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(n){if(n==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=n}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(n){return this.from-n.from||this.startSide-n.startSide||this.rank-n.rank||this.to-n.to||this.endSide-n.endSide}}class HeapCursor{constructor(n){this.heap=n}static from(n,r=null,g=-1){let y=[];for(let k=0;k<n.length;k++)for(let $=n[k];!$.isEmpty;$=$.nextLayer)$.maxPoint>=g&&y.push(new LayerCursor($,r,g,k));return y.length==1?y[0]:new HeapCursor(y)}get startSide(){return this.value?this.value.startSide:0}goto(n,r=-1e9){for(let g of this.heap)g.goto(n,r);for(let g=this.heap.length>>1;g>=0;g--)heapBubble(this.heap,g);return this.next(),this}forward(n,r){for(let g of this.heap)g.forward(n,r);for(let g=this.heap.length>>1;g>=0;g--)heapBubble(this.heap,g);(this.to-n||this.value.endSide-r)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let n=this.heap[0];this.from=n.from,this.to=n.to,this.value=n.value,this.rank=n.rank,n.value&&n.next(),heapBubble(this.heap,0)}}}function heapBubble(e,n){for(let r=e[n];;){let g=(n<<1)+1;if(g>=e.length)break;let y=e[g];if(g+1<e.length&&y.compare(e[g+1])>=0&&(y=e[g+1],g++),r.compare(y)<0)break;e[g]=r,e[n]=y,n=g}}class SpanCursor{constructor(n,r,g){this.minPoint=g,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(n,r,g)}goto(n,r=-1e9){return this.cursor.goto(n,r),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=n,this.endSide=r,this.openStart=-1,this.next(),this}forward(n,r){for(;this.minActive>-1&&(this.activeTo[this.minActive]-n||this.active[this.minActive].endSide-r)<0;)this.removeActive(this.minActive);this.cursor.forward(n,r)}removeActive(n){remove(this.active,n),remove(this.activeTo,n),remove(this.activeRank,n),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(n){let r=0,{value:g,to:y,rank:k}=this.cursor;for(;r<this.activeRank.length&&(k-this.activeRank[r]||y-this.activeTo[r])>0;)r++;insert(this.active,r,g),insert(this.activeTo,r,y),insert(this.activeRank,r,k),n&&insert(n,r,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let n=this.to,r=this.point;this.point=null;let g=this.openStart<0?[]:null;for(;;){let y=this.minActive;if(y>-1&&(this.activeTo[y]-this.cursor.from||this.active[y].endSide-this.cursor.startSide)<0){if(this.activeTo[y]>n){this.to=this.activeTo[y],this.endSide=this.active[y].endSide;break}this.removeActive(y),g&&remove(g,y)}else if(this.cursor.value)if(this.cursor.from>n){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let k=this.cursor.value;if(!k.point)this.addActive(g),this.cursor.next();else if(r&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=k,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=k.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(g){this.openStart=0;for(let y=g.length-1;y>=0&&g[y]<n;y--)this.openStart++}}activeForPoint(n){if(!this.active.length)return this.active;let r=[];for(let g=this.active.length-1;g>=0&&!(this.activeRank[g]<this.pointRank);g--)(this.activeTo[g]>n||this.activeTo[g]==n&&this.active[g].endSide>=this.point.endSide)&&r.push(this.active[g]);return r.reverse()}openEnd(n){let r=0;for(let g=this.activeTo.length-1;g>=0&&this.activeTo[g]>n;g--)r++;return r}}function compare(e,n,r,g,y,k){e.goto(n),r.goto(g);let $=g+y,V=g,L=g-n;for(;;){let z=e.to+L-r.to,j=z||e.endSide-r.endSide,ae=j<0?e.to+L:r.to,re=Math.min(ae,$);if(e.point||r.point?e.point&&r.point&&(e.point==r.point||e.point.eq(r.point))&&sameValues(e.activeForPoint(e.to),r.activeForPoint(r.to))||k.comparePoint(V,re,e.point,r.point):re>V&&!sameValues(e.active,r.active)&&k.compareRange(V,re,e.active,r.active),ae>$)break;(z||e.openEnd!=r.openEnd)&&k.boundChange&&k.boundChange(ae),V=ae,j<=0&&e.next(),j>=0&&r.next()}}function sameValues(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!=n[r]&&!e[r].eq(n[r]))return!1;return!0}function remove(e,n){for(let r=n,g=e.length-1;r<g;r++)e[r]=e[r+1];e.pop()}function insert(e,n,r){for(let g=e.length-1;g>=n;g--)e[g+1]=e[g];e[n]=r}function findMinIndex(e,n){let r=-1,g=1e9;for(let y=0;y<n.length;y++)(n[y]-g||e[y].endSide-e[r].endSide)<0&&(r=y,g=n[y]);return r}function countColumn(e,n,r=e.length){let g=0;for(let y=0;y<r;)e.charCodeAt(y)==9?(g+=n-g%n,y++):(g++,y=findClusterBreak(e,y));return g}function findColumn(e,n,r,g){for(let y=0,k=0;;){if(k>=n)return y;if(y==e.length)break;k+=e.charCodeAt(y)==9?r-k%r:1,y=findClusterBreak(e,y)}return g===!0?-1:e.length}const C="",COUNT=typeof Symbol>"u"?"__"+C:Symbol.for(C),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(n,r){this.rules=[];let{finish:g}=r||{};function y($){return/^@/.test($)?[$]:$.split(/,\s*/)}function k($,V,L,z){let j=[],ae=/^@(\w+)\b/.exec($[0]),re=ae&&ae[1]=="keyframes";if(ae&&V==null)return L.push($[0]+";");for(let oe in V){let ue=V[oe];if(/&/.test(oe))k(oe.split(/,\s*/).map(le=>$.map(de=>le.replace(/&/,de))).reduce((le,de)=>le.concat(de)),ue,L);else if(ue&&typeof ue=="object"){if(!ae)throw new RangeError("The value of a property ("+oe+") should be a primitive value.");k(y(oe),ue,j,re)}else ue!=null&&j.push(oe.replace(/_.*/,"").replace(/[A-Z]/g,le=>"-"+le.toLowerCase())+": "+ue+";")}(j.length||re)&&L.push((g&&!ae&&!z?$.map(g):$).join(", ")+" {"+j.join(" ")+"}")}for(let $ in n)k(y($),n[$],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let n=top[COUNT]||1;return top[COUNT]=n+1,C+n.toString(36)}static mount(n,r,g){let y=n[SET],k=g&&g.nonce;y?k&&y.setNonce(k):y=new StyleSet(n,k),y.mount(Array.isArray(r)?r:[r],n)}}let adoptedSet=new Map;class StyleSet{constructor(n,r){let g=n.ownerDocument||n,y=g.defaultView;if(!n.head&&n.adoptedStyleSheets&&y.CSSStyleSheet){let k=adoptedSet.get(g);if(k)return n[SET]=k;this.sheet=new y.CSSStyleSheet,adoptedSet.set(g,this)}else this.styleTag=g.createElement("style"),r&&this.styleTag.setAttribute("nonce",r);this.modules=[],n[SET]=this}mount(n,r){let g=this.sheet,y=0,k=0;for(let $=0;$<n.length;$++){let V=n[$],L=this.modules.indexOf(V);if(L<k&&L>-1&&(this.modules.splice(L,1),k--,L=-1),L==-1){if(this.modules.splice(k++,0,V),g)for(let z=0;z<V.rules.length;z++)g.insertRule(V.rules[z],y++)}else{for(;k<L;)y+=this.modules[k++].rules.length;y+=V.rules.length,k++}}if(g)r.adoptedStyleSheets.indexOf(this.sheet)<0&&(r.adoptedStyleSheets=[this.sheet,...r.adoptedStyleSheets]);else{let $="";for(let L=0;L<this.modules.length;L++)$+=this.modules[L].getRules()+`
`;this.styleTag.textContent=$;let V=r.head||r;this.styleTag.parentNode!=V&&V.insertBefore(this.styleTag,V.firstChild)}}setNonce(n){this.styleTag&&this.styleTag.getAttribute("nonce")!=n&&this.styleTag.setAttribute("nonce",n)}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(e){var n=mac&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||ie$1&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",r=!n&&e.key||(e.shiftKey?shift:base)[e.keyCode]||e.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}function getSelection(e){let n;return e.nodeType==11?n=e.getSelection?e:e.ownerDocument:n=e,n.getSelection()}function contains(e,n){return n?e==n||e.contains(n.nodeType!=1?n.parentNode:n):!1}function hasSelection(e,n){if(!n.anchorNode)return!1;try{return contains(e,n.anchorNode)}catch{return!1}}function clientRectsFor(e){return e.nodeType==3?textRange(e,0,e.nodeValue.length).getClientRects():e.nodeType==1?e.getClientRects():[]}function isEquivalentPosition(e,n,r,g){return r?scanFor(e,n,r,g,-1)||scanFor(e,n,r,g,1):!1}function domIndex(e){for(var n=0;;n++)if(e=e.previousSibling,!e)return n}function isBlockElement(e){return e.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}function scanFor(e,n,r,g,y){for(;;){if(e==r&&n==g)return!0;if(n==(y<0?0:maxOffset(e))){if(e.nodeName=="DIV")return!1;let k=e.parentNode;if(!k||k.nodeType!=1)return!1;n=domIndex(e)+(y<0?0:1),e=k}else if(e.nodeType==1){if(e=e.childNodes[n+(y<0?-1:0)],e.nodeType==1&&e.contentEditable=="false")return!1;n=y<0?maxOffset(e):0}else return!1}}function maxOffset(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function flattenRect(e,n){let r=n?e.left:e.right;return{left:r,right:r,top:e.top,bottom:e.bottom}}function windowRect(e){let n=e.visualViewport;return n?{left:0,right:n.width,top:0,bottom:n.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function getScale(e,n){let r=n.width/e.offsetWidth,g=n.height/e.offsetHeight;return(r>.995&&r<1.005||!isFinite(r)||Math.abs(n.width-e.offsetWidth)<1)&&(r=1),(g>.995&&g<1.005||!isFinite(g)||Math.abs(n.height-e.offsetHeight)<1)&&(g=1),{scaleX:r,scaleY:g}}function scrollRectIntoView(e,n,r,g,y,k,$,V){let L=e.ownerDocument,z=L.defaultView||window;for(let j=e,ae=!1;j&&!ae;)if(j.nodeType==1){let re,oe=j==L.body,ue=1,le=1;if(oe)re=windowRect(z);else{if(/^(fixed|sticky)$/.test(getComputedStyle(j).position)&&(ae=!0),j.scrollHeight<=j.clientHeight&&j.scrollWidth<=j.clientWidth){j=j.assignedSlot||j.parentNode;continue}let _e=j.getBoundingClientRect();({scaleX:ue,scaleY:le}=getScale(j,_e)),re={left:_e.left,right:_e.left+j.clientWidth*ue,top:_e.top,bottom:_e.top+j.clientHeight*le}}let de=0,he=0;if(y=="nearest")n.top<re.top?(he=-(re.top-n.top+$),r>0&&n.bottom>re.bottom+he&&(he=n.bottom-re.bottom+he+$)):n.bottom>re.bottom&&(he=n.bottom-re.bottom+$,r<0&&n.top-he<re.top&&(he=-(re.top+he-n.top+$)));else{let _e=n.bottom-n.top,Ce=re.bottom-re.top;he=(y=="center"&&_e<=Ce?n.top+_e/2-Ce/2:y=="start"||y=="center"&&r<0?n.top-$:n.bottom-Ce+$)-re.top}if(g=="nearest"?n.left<re.left?(de=-(re.left-n.left+k),r>0&&n.right>re.right+de&&(de=n.right-re.right+de+k)):n.right>re.right&&(de=n.right-re.right+k,r<0&&n.left<re.left+de&&(de=-(re.left+de-n.left+k))):de=(g=="center"?n.left+(n.right-n.left)/2-(re.right-re.left)/2:g=="start"==V?n.left-k:n.right-(re.right-re.left)+k)-re.left,de||he)if(oe)z.scrollBy(de,he);else{let _e=0,Ce=0;if(he){let Ne=j.scrollTop;j.scrollTop+=he/le,Ce=(j.scrollTop-Ne)*le}if(de){let Ne=j.scrollLeft;j.scrollLeft+=de/ue,_e=(j.scrollLeft-Ne)*ue}n={left:n.left-_e,top:n.top-Ce,right:n.right-_e,bottom:n.bottom-Ce},_e&&Math.abs(_e-de)<1&&(g="nearest"),Ce&&Math.abs(Ce-he)<1&&(y="nearest")}if(oe)break;j=j.assignedSlot||j.parentNode}else if(j.nodeType==11)j=j.host;else break}function scrollableParents(e){let n=e.ownerDocument,r,g;for(let y=e.parentNode;y&&!(y==n.body||r&&g);)if(y.nodeType==1)!g&&y.scrollHeight>y.clientHeight&&(g=y),!r&&y.scrollWidth>y.clientWidth&&(r=y),y=y.assignedSlot||y.parentNode;else if(y.nodeType==11)y=y.host;else break;return{x:r,y:g}}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(n){return this.anchorNode==n.anchorNode&&this.anchorOffset==n.anchorOffset&&this.focusNode==n.focusNode&&this.focusOffset==n.focusOffset}setRange(n){let{anchorNode:r,focusNode:g}=n;this.set(r,Math.min(n.anchorOffset,r?maxOffset(r):0),g,Math.min(n.focusOffset,g?maxOffset(g):0))}set(n,r,g,y){this.anchorNode=n,this.anchorOffset=r,this.focusNode=g,this.focusOffset=y}}let preventScrollSupported=null;function focusPreventScroll(e){if(e.setActive)return e.setActive();if(preventScrollSupported)return e.focus(preventScrollSupported);let n=[];for(let r=e;r&&(n.push(r,r.scrollTop,r.scrollLeft),r!=r.ownerDocument);r=r.parentNode);if(e.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let r=0;r<n.length;){let g=n[r++],y=n[r++],k=n[r++];g.scrollTop!=y&&(g.scrollTop=y),g.scrollLeft!=k&&(g.scrollLeft=k)}}}let scratchRange;function textRange(e,n,r=n){let g=scratchRange||(scratchRange=document.createRange());return g.setEnd(e,r),g.setStart(e,n),g}function dispatchKey(e,n,r,g){let y={key:n,code:n,keyCode:r,which:r,cancelable:!0};g&&({altKey:y.altKey,ctrlKey:y.ctrlKey,shiftKey:y.shiftKey,metaKey:y.metaKey}=g);let k=new KeyboardEvent("keydown",y);k.synthetic=!0,e.dispatchEvent(k);let $=new KeyboardEvent("keyup",y);return $.synthetic=!0,e.dispatchEvent($),k.defaultPrevented||$.defaultPrevented}function getRoot(e){for(;e;){if(e&&(e.nodeType==9||e.nodeType==11&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}function clearAttributes(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function atElementStart(e,n){let r=n.focusNode,g=n.focusOffset;if(!r||n.anchorNode!=r||n.anchorOffset!=g)return!1;for(g=Math.min(g,maxOffset(r));;)if(g){if(r.nodeType!=1)return!1;let y=r.childNodes[g-1];y.contentEditable=="false"?g--:(r=y,g=maxOffset(r))}else{if(r==e)return!0;g=domIndex(r),r=r.parentNode}}function isScrolledToBottom(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function textNodeBefore(e,n){for(let r=e,g=n;;){if(r.nodeType==3&&g>0)return{node:r,offset:g};if(r.nodeType==1&&g>0){if(r.contentEditable=="false")return null;r=r.childNodes[g-1],g=maxOffset(r)}else if(r.parentNode&&!isBlockElement(r))g=domIndex(r),r=r.parentNode;else return null}}function textNodeAfter(e,n){for(let r=e,g=n;;){if(r.nodeType==3&&g<r.nodeValue.length)return{node:r,offset:g};if(r.nodeType==1&&g<r.childNodes.length){if(r.contentEditable=="false")return null;r=r.childNodes[g],g=0}else if(r.parentNode&&!isBlockElement(r))g=domIndex(r)+1,r=r.parentNode;else return null}}class DOMPos{constructor(n,r,g=!0){this.node=n,this.offset=r,this.precise=g}static before(n,r){return new DOMPos(n.parentNode,domIndex(n),r)}static after(n,r){return new DOMPos(n.parentNode,domIndex(n)+1,r)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(n){let r=this.posAtStart;for(let g of this.children){if(g==n)return r;r+=g.length+g.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(n){return this.posBefore(n)+n.length}sync(n,r){if(this.flags&2){let g=this.dom,y=null,k;for(let $ of this.children){if($.flags&7){if(!$.dom&&(k=y?y.nextSibling:g.firstChild)){let V=ContentView.get(k);(!V||!V.parent&&V.canReuseDOM($))&&$.reuseDOM(k)}$.sync(n,r),$.flags&=-8}if(k=y?y.nextSibling:g.firstChild,r&&!r.written&&r.node==g&&k!=$.dom&&(r.written=!0),$.dom.parentNode==g)for(;k&&k!=$.dom;)k=rm$1(k);else g.insertBefore($.dom,k);y=$.dom}for(k=y?y.nextSibling:g.firstChild,k&&r&&r.node==g&&(r.written=!0);k;)k=rm$1(k)}else if(this.flags&1)for(let g of this.children)g.flags&7&&(g.sync(n,r),g.flags&=-8)}reuseDOM(n){}localPosFromDOM(n,r){let g;if(n==this.dom)g=this.dom.childNodes[r];else{let y=maxOffset(n)==0?0:r==0?-1:1;for(;;){let k=n.parentNode;if(k==this.dom)break;y==0&&k.firstChild!=k.lastChild&&(n==k.firstChild?y=-1:y=1),n=k}y<0?g=n:g=n.nextSibling}if(g==this.dom.firstChild)return 0;for(;g&&!ContentView.get(g);)g=g.nextSibling;if(!g)return this.length;for(let y=0,k=0;;y++){let $=this.children[y];if($.dom==g)return k;k+=$.length+$.breakAfter}}domBoundsAround(n,r,g=0){let y=-1,k=-1,$=-1,V=-1;for(let L=0,z=g,j=g;L<this.children.length;L++){let ae=this.children[L],re=z+ae.length;if(z<n&&re>r)return ae.domBoundsAround(n,r,z);if(re>=n&&y==-1&&(y=L,k=z),z>r&&ae.dom.parentNode==this.dom){$=L,V=j;break}j=re,z=re+ae.breakAfter}return{from:k,to:V<0?g+this.length:V,startDOM:(y?this.children[y-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:$<this.children.length&&$>=0?this.children[$].dom:null}}markDirty(n=!1){this.flags|=2,this.markParentsDirty(n)}markParentsDirty(n){for(let r=this.parent;r;r=r.parent){if(n&&(r.flags|=2),r.flags&1)return;r.flags|=1,n=!1}}setParent(n){this.parent!=n&&(this.parent=n,this.flags&7&&this.markParentsDirty(!0))}setDOM(n){this.dom!=n&&(this.dom&&(this.dom.cmView=null),this.dom=n,n.cmView=this)}get rootView(){for(let n=this;;){let r=n.parent;if(!r)return n;n=r}}replaceChildren(n,r,g=noChildren){this.markDirty();for(let y=n;y<r;y++){let k=this.children[y];k.parent==this&&g.indexOf(k)<0&&k.destroy()}g.length<250?this.children.splice(n,r-n,...g):this.children=[].concat(this.children.slice(0,n),g,this.children.slice(r));for(let y=0;y<g.length;y++)g[y].setParent(this)}ignoreMutation(n){return!1}ignoreEvent(n){return!1}childCursor(n=this.length){return new ChildCursor(this.children,n,this.children.length)}childPos(n,r=1){return this.childCursor().findPos(n,r)}toString(){let n=this.constructor.name.replace("View","");return n+(this.children.length?"("+this.children.join()+")":this.length?"["+(n=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(n){return n.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(n,r,g,y,k,$){return!1}become(n){return!1}canReuseDOM(n){return n.constructor==this.constructor&&!((this.flags|n.flags)&8)}getSide(){return 0}destroy(){for(let n of this.children)n.parent==this&&n.destroy();this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(e){let n=e.nextSibling;return e.parentNode.removeChild(e),n}class ChildCursor{constructor(n,r,g){this.children=n,this.pos=r,this.i=g,this.off=0}findPos(n,r=1){for(;;){if(n>this.pos||n==this.pos&&(r>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=n-this.pos,this;let g=this.children[--this.i];this.pos-=g.length+g.breakAfter}}}function replaceRange(e,n,r,g,y,k,$,V,L){let{children:z}=e,j=z.length?z[n]:null,ae=k.length?k[k.length-1]:null,re=ae?ae.breakAfter:$;if(!(n==g&&j&&!$&&!re&&k.length<2&&j.merge(r,y,k.length?ae:null,r==0,V,L))){if(g<z.length){let oe=z[g];oe&&(y<oe.length||oe.breakAfter&&ae?.breakAfter)?(n==g&&(oe=oe.split(y),y=0),!re&&ae&&oe.merge(0,y,ae,!0,0,L)?k[k.length-1]=oe:((y||oe.children.length&&!oe.children[0].length)&&oe.merge(0,y,null,!1,0,L),k.push(oe))):oe?.breakAfter&&(ae?ae.breakAfter=1:$=1),g++}for(j&&(j.breakAfter=$,r>0&&(!$&&k.length&&j.merge(r,j.length,k[0],!1,V,0)?j.breakAfter=k.shift().breakAfter:(r<j.length||j.children.length&&j.children[j.children.length-1].length==0)&&j.merge(r,j.length,null,!1,V,0),n++));n<g&&k.length;)if(z[g-1].become(k[k.length-1]))g--,k.pop(),L=k.length?0:V;else if(z[n].become(k[0]))n++,k.shift(),V=k.length?0:L;else break;!k.length&&n&&g<z.length&&!z[n-1].breakAfter&&z[g].merge(0,0,z[n-1],!1,V,L)&&n--,(n<g||k.length)&&e.replaceChildren(n,g,k)}}function mergeChildrenInto(e,n,r,g,y,k){let $=e.childCursor(),{i:V,off:L}=$.findPos(r,1),{i:z,off:j}=$.findPos(n,-1),ae=n-r;for(let re of g)ae+=re.length;e.length+=ae,replaceRange(e,z,j,V,L,g,0,y,k)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor(n){super(),this.text=n}get length(){return this.text.length}createDOM(n){this.setDOM(n||document.createTextNode(this.text))}sync(n,r){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(r&&r.node==this.dom&&(r.written=!0),this.dom.nodeValue=this.text)}reuseDOM(n){n.nodeType==3&&this.createDOM(n)}merge(n,r,g){return this.flags&8||g&&(!(g instanceof TextView)||this.length-(r-n)+g.length>MaxJoinLen||g.flags&8)?!1:(this.text=this.text.slice(0,n)+(g?g.text:"")+this.text.slice(r),this.markDirty(),!0)}split(n){let r=new TextView(this.text.slice(n));return this.text=this.text.slice(0,n),this.markDirty(),r.flags|=this.flags&8,r}localPosFromDOM(n,r){return n==this.dom?r:r?this.text.length:0}domAtPos(n){return new DOMPos(this.dom,n)}domBoundsAround(n,r,g){return{from:g,to:g+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(n,r){return textCoords(this.dom,n,r)}}class MarkView extends ContentView{constructor(n,r=[],g=0){super(),this.mark=n,this.children=r,this.length=g;for(let y of r)y.setParent(this)}setAttrs(n){if(clearAttributes(n),this.mark.class&&(n.className=this.mark.class),this.mark.attrs)for(let r in this.mark.attrs)n.setAttribute(r,this.mark.attrs[r]);return n}canReuseDOM(n){return super.canReuseDOM(n)&&!((this.flags|n.flags)&8)}reuseDOM(n){n.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(n),this.flags|=6)}sync(n,r){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(n,r)}merge(n,r,g,y,k,$){return g&&(!(g instanceof MarkView&&g.mark.eq(this.mark))||n&&k<=0||r<this.length&&$<=0)?!1:(mergeChildrenInto(this,n,r,g?g.children.slice():[],k-1,$-1),this.markDirty(),!0)}split(n){let r=[],g=0,y=-1,k=0;for(let V of this.children){let L=g+V.length;L>n&&r.push(g<n?V.split(n-g):V),y<0&&g>=n&&(y=k),g=L,k++}let $=this.length-n;return this.length=n,y>-1&&(this.children.length=y,this.markDirty()),new MarkView(this.mark,r,$)}domAtPos(n){return inlineDOMAtPos(this,n)}coordsAt(n,r){return coordsInChildren(this,n,r)}}function textCoords(e,n,r){let g=e.nodeValue.length;n>g&&(n=g);let y=n,k=n,$=0;n==0&&r<0||n==g&&r>=0?browser.chrome||browser.gecko||(n?(y--,$=1):k<g&&(k++,$=-1)):r<0?y--:k<g&&k++;let V=textRange(e,y,k).getClientRects();if(!V.length)return null;let L=V[($?$<0:r>=0)?0:V.length-1];return browser.safari&&!$&&L.width==0&&(L=Array.prototype.find.call(V,z=>z.width)||L),$?flattenRect(L,$<0):L||null}class WidgetView extends ContentView{static create(n,r,g){return new WidgetView(n,r,g)}constructor(n,r,g){super(),this.widget=n,this.length=r,this.side=g,this.prevWidget=null}split(n){let r=WidgetView.create(this.widget,this.length-n,this.side);return this.length-=n,r}sync(n){(!this.dom||!this.widget.updateDOM(this.dom,n))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(n)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(n,r,g,y,k,$){return g&&(!(g instanceof WidgetView)||!this.widget.compare(g.widget)||n>0&&k<=0||r<this.length&&$<=0)?!1:(this.length=n+(g?g.length:0)+(this.length-r),!0)}become(n){return n instanceof WidgetView&&n.side==this.side&&this.widget.constructor==n.widget.constructor?(this.widget.compare(n.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=n.widget,this.length=n.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(n){return this.widget.ignoreEvent(n)}get overrideDOMText(){if(this.length==0)return Text.empty;let n=this;for(;n.parent;)n=n.parent;let{view:r}=n,g=r&&r.state.doc,y=this.posAtStart;return g?g.slice(y,y+this.length):Text.empty}domAtPos(n){return(this.length?n==0:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,n==this.length)}domBoundsAround(){return null}coordsAt(n,r){let g=this.widget.coordsAt(this.dom,n,r);if(g)return g;let y=this.dom.getClientRects(),k=null;if(!y.length)return null;let $=this.side?this.side<0:n>0;for(let V=$?y.length-1:0;k=y[V],!(n>0?V==0:V==y.length-1||k.top<k.bottom);V+=$?-1:1);return flattenRect(k,!$)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor(n){super(),this.side=n}get length(){return 0}merge(){return!1}become(n){return n instanceof WidgetBufferView&&n.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let n=document.createElement("img");n.className="cm-widgetBuffer",n.setAttribute("aria-hidden","true"),this.setDOM(n)}}getSide(){return this.side}domAtPos(n){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(n){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text.empty}get isHidden(){return!0}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos(e,n){let r=e.dom,{children:g}=e,y=0;for(let k=0;y<g.length;y++){let $=g[y],V=k+$.length;if(!(V==k&&$.getSide()<=0)){if(n>k&&n<V&&$.dom.parentNode==r)return $.domAtPos(n-k);if(n<=k)break;k=V}}for(let k=y;k>0;k--){let $=g[k-1];if($.dom.parentNode==r)return $.domAtPos($.length)}for(let k=y;k<g.length;k++){let $=g[k];if($.dom.parentNode==r)return $.domAtPos(0)}return new DOMPos(r,0)}function joinInlineInto(e,n,r){let g,{children:y}=e;r>0&&n instanceof MarkView&&y.length&&(g=y[y.length-1])instanceof MarkView&&g.mark.eq(n.mark)?joinInlineInto(g,n.children[0],r-1):(y.push(n),n.setParent(e)),e.length+=n.length}function coordsInChildren(e,n,r){let g=null,y=-1,k=null,$=-1;function V(z,j){for(let ae=0,re=0;ae<z.children.length&&re<=j;ae++){let oe=z.children[ae],ue=re+oe.length;ue>=j&&(oe.children.length?V(oe,j-re):(!k||k.isHidden&&r>0)&&(ue>j||re==ue&&oe.getSide()>0)?(k=oe,$=j-re):(re<j||re==ue&&oe.getSide()<0&&!oe.isHidden)&&(g=oe,y=j-re)),re=ue}}V(e,n);let L=(r<0?g:k)||g||k;return L?L.coordsAt(Math.max(0,L==g?y:$),r):fallbackRect(e)}function fallbackRect(e){let n=e.dom.lastChild;if(!n)return e.dom.getBoundingClientRect();let r=clientRectsFor(n);return r[r.length-1]||null}function combineAttrs(e,n){for(let r in e)r=="class"&&n.class?n.class+=" "+e.class:r=="style"&&n.style?n.style+=";"+e.style:n[r]=e[r];return n}const noAttrs$1=Object.create(null);function attrsEq(e,n,r){if(e==n)return!0;e||(e=noAttrs$1),n||(n=noAttrs$1);let g=Object.keys(e),y=Object.keys(n);if(g.length-(r&&g.indexOf(r)>-1?1:0)!=y.length-(r&&y.indexOf(r)>-1?1:0))return!1;for(let k of g)if(k!=r&&(y.indexOf(k)==-1||e[k]!==n[k]))return!1;return!0}function updateAttrs(e,n,r){let g=!1;if(n)for(let y in n)r&&y in r||(g=!0,y=="style"?e.style.cssText="":e.removeAttribute(y));if(r)for(let y in r)n&&n[y]==r[y]||(g=!0,y=="style"?e.style.cssText=r[y]:e.setAttribute(y,r[y]));return g}function getAttrs(e){let n=Object.create(null);for(let r=0;r<e.attributes.length;r++){let g=e.attributes[r];n[g.name]=g.value}return n}class WidgetType{eq(n){return!1}updateDOM(n,r){return!1}compare(n){return this==n||this.constructor==n.constructor&&this.eq(n)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(n){return!0}coordsAt(n,r,g){return null}get isHidden(){return!1}get editable(){return!1}destroy(n){}}var BlockType=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(n,r,g,y){super(),this.startSide=n,this.endSide=r,this.widget=g,this.spec=y}get heightRelevant(){return!1}static mark(n){return new MarkDecoration(n)}static widget(n){let r=Math.max(-1e4,Math.min(1e4,n.side||0)),g=!!n.block;return r+=g&&!n.inlineOrder?r>0?3e8:-4e8:r>0?1e8:-1e8,new PointDecoration(n,r,r,g,n.widget||null,!1)}static replace(n){let r=!!n.block,g,y;if(n.isBlockGap)g=-5e8,y=4e8;else{let{start:k,end:$}=getInclusive(n,r);g=(k?r?-3e8:-1:5e8)-1,y=($?r?2e8:1:-6e8)+1}return new PointDecoration(n,g,y,r,n.widget||null,!0)}static line(n){return new LineDecoration(n)}static set(n,r=!1){return RangeSet.of(n,r)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(n){let{start:r,end:g}=getInclusive(n);super(r?-1:5e8,g?1:-6e8,null,n),this.tagName=n.tagName||"span",this.class=n.class||"",this.attrs=n.attributes||null}eq(n){var r,g;return this==n||n instanceof MarkDecoration&&this.tagName==n.tagName&&(this.class||((r=this.attrs)===null||r===void 0?void 0:r.class))==(n.class||((g=n.attrs)===null||g===void 0?void 0:g.class))&&attrsEq(this.attrs,n.attrs,"class")}range(n,r=n){if(n>=r)throw new RangeError("Mark decorations may not be empty");return super.range(n,r)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(n){super(-2e8,-2e8,null,n)}eq(n){return n instanceof LineDecoration&&this.spec.class==n.spec.class&&attrsEq(this.spec.attributes,n.spec.attributes)}range(n,r=n){if(r!=n)throw new RangeError("Line decoration ranges must be zero-length");return super.range(n,r)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(n,r,g,y,k,$){super(r,g,k,n),this.block=y,this.isReplace=$,this.mapMode=y?r<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(n){return n instanceof PointDecoration&&widgetsEq(this.widget,n.widget)&&this.block==n.block&&this.startSide==n.startSide&&this.endSide==n.endSide}range(n,r=n){if(this.isReplace&&(n>r||n==r&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&r!=n)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(n,r)}}PointDecoration.prototype.point=!0;function getInclusive(e,n=!1){let{inclusiveStart:r,inclusiveEnd:g}=e;return r==null&&(r=e.inclusive),g==null&&(g=e.inclusive),{start:r??n,end:g??n}}function widgetsEq(e,n){return e==n||!!(e&&n&&e.compare(n))}function addRange(e,n,r,g=0){let y=r.length-1;y>=0&&r[y]+g>=e?r[y]=Math.max(r[y],n):r.push(e,n)}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(n,r,g,y,k,$){if(g){if(!(g instanceof LineView))return!1;this.dom||g.transferDOM(this)}return y&&this.setDeco(g?g.attrs:null),mergeChildrenInto(this,n,r,g?g.children.slice():[],k,$),!0}split(n){let r=new LineView;if(r.breakAfter=this.breakAfter,this.length==0)return r;let{i:g,off:y}=this.childPos(n);y&&(r.append(this.children[g].split(y),0),this.children[g].merge(y,this.children[g].length,null,!1,0,0),g++);for(let k=g;k<this.children.length;k++)r.append(this.children[k],0);for(;g>0&&this.children[g-1].length==0;)this.children[--g].destroy();return this.children.length=g,this.markDirty(),this.length=n,r}transferDOM(n){this.dom&&(this.markDirty(),n.setDOM(this.dom),n.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(n){attrsEq(this.attrs,n)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=n)}append(n,r){joinInlineInto(this,n,r)}addLineDeco(n){let r=n.spec.attributes,g=n.spec.class;r&&(this.attrs=combineAttrs(r,this.attrs||{})),g&&(this.attrs=combineAttrs({class:g},this.attrs||{}))}domAtPos(n){return inlineDOMAtPos(this,n)}reuseDOM(n){n.nodeName=="DIV"&&(this.setDOM(n),this.flags|=6)}sync(n,r){var g;this.dom?this.flags&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(n,r);let y=this.dom.lastChild;for(;y&&ContentView.get(y)instanceof MarkView;)y=y.lastChild;if(!y||!this.length||y.nodeName!="BR"&&((g=ContentView.get(y))===null||g===void 0?void 0:g.isEditable)==!1&&(!browser.ios||!this.children.some(k=>k instanceof TextView))){let k=document.createElement("BR");k.cmIgnore=!0,this.dom.appendChild(k)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let n=0,r;for(let g of this.children){if(!(g instanceof TextView)||/[^ -~]/.test(g.text))return null;let y=clientRectsFor(g.dom);if(y.length!=1)return null;n+=y[0].width,r=y[0].height}return n?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:n/this.length,textHeight:r}:null}coordsAt(n,r){let g=coordsInChildren(this,n,r);if(!this.children.length&&g&&this.parent){let{heightOracle:y}=this.parent.view.viewState,k=g.bottom-g.top;if(Math.abs(k-y.lineHeight)<2&&y.textHeight<k){let $=(k-y.textHeight)/2;return{top:g.top+$,bottom:g.bottom-$,left:g.left,right:g.left}}}return g}become(n){return n instanceof LineView&&this.children.length==0&&n.children.length==0&&attrsEq(this.attrs,n.attrs)&&this.breakAfter==n.breakAfter}covers(){return!0}static find(n,r){for(let g=0,y=0;g<n.children.length;g++){let k=n.children[g],$=y+k.length;if($>=r){if(k instanceof LineView)return k;if($>r)break}y=$+k.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(n,r,g){super(),this.widget=n,this.length=r,this.deco=g,this.breakAfter=0,this.prevWidget=null}merge(n,r,g,y,k,$){return g&&(!(g instanceof BlockWidgetView)||!this.widget.compare(g.widget)||n>0&&k<=0||r<this.length&&$<=0)?!1:(this.length=n+(g?g.length:0)+(this.length-r),!0)}domAtPos(n){return n==0?DOMPos.before(this.dom):DOMPos.after(this.dom,n==this.length)}split(n){let r=this.length-n;this.length=n;let g=new BlockWidgetView(this.widget,r,this.deco);return g.breakAfter=this.breakAfter,g}get children(){return noChildren}sync(n){(!this.dom||!this.widget.updateDOM(this.dom,n))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(n)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(n){return n instanceof BlockWidgetView&&n.widget.constructor==this.widget.constructor?(n.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=n.widget,this.length=n.length,this.deco=n.deco,this.breakAfter=n.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(n){return this.widget.ignoreEvent(n)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(n,r){let g=this.widget.coordsAt(this.dom,n,r);return g||(this.widget instanceof BlockGapWidget?null:flattenRect(this.dom.getBoundingClientRect(),this.length?n==0:r<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(n){let{startSide:r,endSide:g}=this.deco;return r==g?!1:n<0?r<0:g>0}}class BlockGapWidget extends WidgetType{constructor(n){super(),this.height=n}toDOM(){let n=document.createElement("div");return n.className="cm-gap",this.updateDOM(n),n}eq(n){return n.height==this.height}updateDOM(n){return n.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ContentBuilder{constructor(n,r,g,y){this.doc=n,this.pos=r,this.end=g,this.disallowBlockEffectsFor=y,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=n.iter(),this.skip=r}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let n=this.content[this.content.length-1];return!(n.breakAfter||n instanceof BlockWidgetView&&n.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(n=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),n),n.length),this.pendingBuffer=0)}addBlockWidget(n){this.flushBuffer(),this.curLine=null,this.content.push(n)}finish(n){this.pendingBuffer&&n<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(n&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView)&&this.getLine()}buildText(n,r,g){for(;n>0;){if(this.textOff==this.text.length){let{value:k,lineBreak:$,done:V}=this.cursor.next(this.skip);if(this.skip=0,V)throw new Error("Ran out of text content when drawing inline views");if($){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,n--;continue}else this.text=k,this.textOff=0}let y=Math.min(this.text.length-this.textOff,n,512);this.flushBuffer(r.slice(r.length-g)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+y)),r),g),this.atCursorPos=!0,this.textOff+=y,n-=y,g=0}}span(n,r,g,y){this.buildText(r-n,g,y),this.pos=r,this.openStart<0&&(this.openStart=y)}point(n,r,g,y,k,$){if(this.disallowBlockEffectsFor[$]&&g instanceof PointDecoration){if(g.block)throw new RangeError("Block decorations may not be specified via plugins");if(r>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let V=r-n;if(g instanceof PointDecoration)if(g.block)g.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(g.widget||NullWidget.block,V,g));else{let L=WidgetView.create(g.widget||NullWidget.inline,V,V?0:g.startSide),z=this.atCursorPos&&!L.isEditable&&k<=y.length&&(n<r||g.startSide>0),j=!L.isEditable&&(n<r||k>y.length||g.startSide<=0),ae=this.getLine();this.pendingBuffer==2&&!z&&!L.isEditable&&(this.pendingBuffer=0),this.flushBuffer(y),z&&(ae.append(wrapMarks(new WidgetBufferView(1),y),k),k=y.length+Math.max(0,k-y.length)),ae.append(wrapMarks(L,y),k),this.atCursorPos=j,this.pendingBuffer=j?n<r||k>y.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=y.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(g);V&&(this.textOff+V<=this.text.length?this.textOff+=V:(this.skip+=V-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=r),this.openStart<0&&(this.openStart=k)}static build(n,r,g,y,k){let $=new ContentBuilder(n,r,g,k);return $.openEnd=RangeSet.spans(y,r,g,$),$.openStart<0&&($.openStart=$.openEnd),$.finish($.openEnd),$}}function wrapMarks(e,n){for(let r of n)e=new MarkView(r,[e],e.length);return e}class NullWidget extends WidgetType{constructor(n){super(),this.tag=n}eq(n){return n.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(n){return n.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}NullWidget.inline=new NullWidget("span");NullWidget.block=new NullWidget("div");var Direction=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(e){let n=[];for(let r=0;r<e.length;r++)n.push(1<<+e[r]);return n}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let e of["()","[]","{}"]){let n=e.charCodeAt(0),r=e.charCodeAt(1);Brackets[n]=r,Brackets[r]=-n}function charType(e){return e<=247?LowTypes[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?ArabicTypes[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(n,r,g){this.from=n,this.to=r,this.level=g}side(n,r){return this.dir==r==n?this.to:this.from}forward(n,r){return n==(this.dir==r)}static find(n,r,g,y){let k=-1;for(let $=0;$<n.length;$++){let V=n[$];if(V.from<=r&&V.to>=r){if(V.level==g)return $;(k<0||(y!=0?y<0?V.from<r:V.to>r:n[k].level>V.level))&&(k=$)}}if(k<0)throw new RangeError("Index out of range");return k}}function isolatesEq(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let g=e[r],y=n[r];if(g.from!=y.from||g.to!=y.to||g.direction!=y.direction||!isolatesEq(g.inner,y.inner))return!1}return!0}const types=[];function computeCharTypes(e,n,r,g,y){for(let k=0;k<=g.length;k++){let $=k?g[k-1].to:n,V=k<g.length?g[k].from:r,L=k?256:y;for(let z=$,j=L,ae=L;z<V;z++){let re=charType(e.charCodeAt(z));re==512?re=j:re==8&&ae==4&&(re=16),types[z]=re==4?2:re,re&7&&(ae=re),j=re}for(let z=$,j=L,ae=L;z<V;z++){let re=types[z];if(re==128)z<V-1&&j==types[z+1]&&j&24?re=types[z]=j:types[z]=256;else if(re==64){let oe=z+1;for(;oe<V&&types[oe]==64;)oe++;let ue=z&&j==8||oe<r&&types[oe]==8?ae==1?1:8:256;for(let le=z;le<oe;le++)types[le]=ue;z=oe-1}else re==8&&ae==1&&(types[z]=1);j=re,re&7&&(ae=re)}}}function processBracketPairs(e,n,r,g,y){let k=y==1?2:1;for(let $=0,V=0,L=0;$<=g.length;$++){let z=$?g[$-1].to:n,j=$<g.length?g[$].from:r;for(let ae=z,re,oe,ue;ae<j;ae++)if(oe=Brackets[re=e.charCodeAt(ae)])if(oe<0){for(let le=V-3;le>=0;le-=3)if(BracketStack[le+1]==-oe){let de=BracketStack[le+2],he=de&2?y:de&4?de&1?k:y:0;he&&(types[ae]=types[BracketStack[le]]=he),V=le;break}}else{if(BracketStack.length==189)break;BracketStack[V++]=ae,BracketStack[V++]=re,BracketStack[V++]=L}else if((ue=types[ae])==2||ue==1){let le=ue==y;L=le?0:1;for(let de=V-3;de>=0;de-=3){let he=BracketStack[de+2];if(he&2)break;if(le)BracketStack[de+2]|=2;else{if(he&4)break;BracketStack[de+2]|=4}}}}}function processNeutrals(e,n,r,g){for(let y=0,k=g;y<=r.length;y++){let $=y?r[y-1].to:e,V=y<r.length?r[y].from:n;for(let L=$;L<V;){let z=types[L];if(z==256){let j=L+1;for(;;)if(j==V){if(y==r.length)break;j=r[y++].to,V=y<r.length?r[y].from:n}else if(types[j]==256)j++;else break;let ae=k==1,re=(j<n?types[j]:g)==1,oe=ae==re?ae?1:2:g;for(let ue=j,le=y,de=le?r[le-1].to:e;ue>L;)ue==de&&(ue=r[--le].from,de=le?r[le-1].to:e),types[--ue]=oe;L=j}else k=z,L++}}}function emitSpans(e,n,r,g,y,k,$){let V=g%2?2:1;if(g%2==y%2)for(let L=n,z=0;L<r;){let j=!0,ae=!1;if(z==k.length||L<k[z].from){let le=types[L];le!=V&&(j=!1,ae=le==16)}let re=!j&&V==1?[]:null,oe=j?g:g+1,ue=L;e:for(;;)if(z<k.length&&ue==k[z].from){if(ae)break e;let le=k[z];if(!j)for(let de=le.to,he=z+1;;){if(de==r)break e;if(he<k.length&&k[he].from==de)de=k[he++].to;else{if(types[de]==V)break e;break}}if(z++,re)re.push(le);else{le.from>L&&$.push(new BidiSpan(L,le.from,oe));let de=le.direction==LTR!=!(oe%2);computeSectionOrder(e,de?g+1:g,y,le.inner,le.from,le.to,$),L=le.to}ue=le.to}else{if(ue==r||(j?types[ue]!=V:types[ue]==V))break;ue++}re?emitSpans(e,L,ue,g+1,y,re,$):L<ue&&$.push(new BidiSpan(L,ue,oe)),L=ue}else for(let L=r,z=k.length;L>n;){let j=!0,ae=!1;if(!z||L>k[z-1].to){let le=types[L-1];le!=V&&(j=!1,ae=le==16)}let re=!j&&V==1?[]:null,oe=j?g:g+1,ue=L;e:for(;;)if(z&&ue==k[z-1].to){if(ae)break e;let le=k[--z];if(!j)for(let de=le.from,he=z;;){if(de==n)break e;if(he&&k[he-1].to==de)de=k[--he].from;else{if(types[de-1]==V)break e;break}}if(re)re.push(le);else{le.to<L&&$.push(new BidiSpan(le.to,L,oe));let de=le.direction==LTR!=!(oe%2);computeSectionOrder(e,de?g+1:g,y,le.inner,le.from,le.to,$),L=le.from}ue=le.from}else{if(ue==n||(j?types[ue-1]!=V:types[ue-1]==V))break;ue--}re?emitSpans(e,ue,L,g+1,y,re,$):ue<L&&$.push(new BidiSpan(ue,L,oe)),L=ue}}function computeSectionOrder(e,n,r,g,y,k,$){let V=n%2?2:1;computeCharTypes(e,y,k,g,V),processBracketPairs(e,y,k,g,V),processNeutrals(y,k,g,V),emitSpans(e,y,k,n,r,g,$)}function computeOrder(e,n,r){if(!e)return[new BidiSpan(0,0,n==RTL?1:0)];if(n==LTR&&!r.length&&!BidiRE.test(e))return trivialOrder(e.length);if(r.length)for(;e.length>types.length;)types[types.length]=256;let g=[],y=n==LTR?0:1;return computeSectionOrder(e,y,y,r,0,e.length,g),g}function trivialOrder(e){return[new BidiSpan(0,e,0)]}let movedOver="";function moveVisually(e,n,r,g,y){var k;let $=g.head-e.from,V=BidiSpan.find(n,$,(k=g.bidiLevel)!==null&&k!==void 0?k:-1,g.assoc),L=n[V],z=L.side(y,r);if($==z){let re=V+=y?1:-1;if(re<0||re>=n.length)return null;L=n[V=re],$=L.side(!y,r),z=L.side(y,r)}let j=findClusterBreak(e.text,$,L.forward(y,r));(j<L.from||j>L.to)&&(j=z),movedOver=e.text.slice(Math.min($,j),Math.max($,j));let ae=V==(y?n.length-1:0)?null:n[V+(y?1:-1)];return ae&&j==z&&ae.level+(y?0:1)<L.level?EditorSelection.cursor(ae.side(!y,r)+e.from,ae.forward(y,r)?1:-1,ae.level):EditorSelection.cursor(j+e.from,L.forward(y,r)?-1:1,L.level)}function autoDirection(e,n,r){for(let g=n;g<r;g++){let y=charType(e.charCodeAt(g));if(y==1)return LTR;if(y==2||y==4)return RTL}return LTR}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),clipboardInputFilter=Facet.define(),clipboardOutputFilter=Facet.define(),perLineTextDirection=Facet.define({combine:e=>e.some(n=>n)}),nativeSelectionHidden=Facet.define({combine:e=>e.some(n=>n)}),scrollHandler=Facet.define();class ScrollTarget{constructor(n,r="nearest",g="nearest",y=5,k=5,$=!1){this.range=n,this.y=r,this.x=g,this.yMargin=y,this.xMargin=k,this.isSnapshot=$}map(n){return n.empty?this:new ScrollTarget(this.range.map(n),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(n){return this.range.to<=n.doc.length?this:new ScrollTarget(EditorSelection.cursor(n.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView$1=StateEffect.define({map:(e,n)=>e.map(n)}),setEditContextFormatting=StateEffect.define();function logException(e,n,r){let g=e.facet(exceptionSink);g.length?g[0](n):window.onerror?window.onerror(String(n),r,void 0,void 0,n):r?console.error(r+":",n):console.error(n)}const editable=Facet.define({combine:e=>e.length?e[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor(n,r,g,y,k){this.id=n,this.create=r,this.domEventHandlers=g,this.domEventObservers=y,this.extension=k(this)}static define(n,r){const{eventHandlers:g,eventObservers:y,provide:k,decorations:$}=r||{};return new ViewPlugin(nextPluginID++,n,g,y,V=>{let L=[viewPlugin.of(V)];return $&&L.push(decorations.of(z=>{let j=z.plugin(V);return j?$(j):Decoration.none})),k&&L.push(k(V)),L})}static fromClass(n,r){return ViewPlugin.define(g=>new n(g),r)}}class PluginInstance{constructor(n){this.spec=n,this.mustUpdate=null,this.value=null}update(n){if(this.value){if(this.mustUpdate){let r=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(r)}catch(g){if(logException(r.state,g,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(n)}catch(r){logException(n.state,r,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(n){var r;if(!((r=this.value)===null||r===void 0)&&r.destroy)try{this.value.destroy()}catch(g){logException(n.state,g,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),outerDecorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(e,n){let r=e.state.facet(bidiIsolatedRanges);if(!r.length)return r;let g=r.map(k=>k instanceof Function?k(e):k),y=[];return RangeSet.spans(g,n.from,n.to,{point(){},span(k,$,V,L){let z=k-n.from,j=$-n.from,ae=y;for(let re=V.length-1;re>=0;re--,L--){let oe=V[re].spec.bidiIsolate,ue;if(oe==null&&(oe=autoDirection(n.text,z,j)),L>0&&ae.length&&(ue=ae[ae.length-1]).to==z&&ue.direction==oe)ue.to=j,ae=ue.inner;else{let le={from:z,to:j,direction:oe,inner:[]};ae.push(le),ae=le.inner}}}}),y}const scrollMargins=Facet.define();function getScrollMargins(e){let n=0,r=0,g=0,y=0;for(let k of e.state.facet(scrollMargins)){let $=k(e);$&&($.left!=null&&(n=Math.max(n,$.left)),$.right!=null&&(r=Math.max(r,$.right)),$.top!=null&&(g=Math.max(g,$.top)),$.bottom!=null&&(y=Math.max(y,$.bottom)))}return{left:n,right:r,top:g,bottom:y}}const styleModule=Facet.define();class ChangedRange{constructor(n,r,g,y){this.fromA=n,this.toA=r,this.fromB=g,this.toB=y}join(n){return new ChangedRange(Math.min(this.fromA,n.fromA),Math.max(this.toA,n.toA),Math.min(this.fromB,n.fromB),Math.max(this.toB,n.toB))}addToSet(n){let r=n.length,g=this;for(;r>0;r--){let y=n[r-1];if(!(y.fromA>g.toA)){if(y.toA<g.fromA)break;g=g.join(y),n.splice(r-1,1)}}return n.splice(r,0,g),n}static extendWithRanges(n,r){if(r.length==0)return n;let g=[];for(let y=0,k=0,$=0,V=0;;y++){let L=y==n.length?null:n[y],z=$-V,j=L?L.fromB:1e9;for(;k<r.length&&r[k]<j;){let ae=r[k],re=r[k+1],oe=Math.max(V,ae),ue=Math.min(j,re);if(oe<=ue&&new ChangedRange(oe+z,ue+z,oe,ue).addToSet(g),re>j)break;k+=2}if(!L)return g;new ChangedRange(L.fromA,L.toA,L.fromB,L.toB).addToSet(g),$=L.toA,V=L.toB}}}class ViewUpdate{constructor(n,r,g){this.view=n,this.state=r,this.transactions=g,this.flags=0,this.startState=n.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let k of g)this.changes=this.changes.compose(k.changes);let y=[];this.changes.iterChangedRanges((k,$,V,L)=>y.push(new ChangedRange(k,$,V,L))),this.changedRanges=y}static create(n,r,g){return new ViewUpdate(n,r,g)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(n=>n.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(n){super(),this.view=n,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Decoration.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(n.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,n.state.doc.length)],0,null)}update(n){var r;let g=n.changedRanges;this.minWidth>0&&g.length&&(g.every(({fromA:z,toA:j})=>j<this.minWidthFrom||z>this.minWidthTo)?(this.minWidthFrom=n.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=n.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(n);let y=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((r=this.domChanged)===null||r===void 0)&&r.newSel?y=this.domChanged.newSel.head:!touchesComposition(n.changes,this.hasComposition)&&!n.selectionSet&&(y=n.state.selection.main.head));let k=y>-1?findCompositionRange(this.view,n.changes,y):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:z,to:j}=this.hasComposition;g=new ChangedRange(z,j,n.changes.mapPos(z,-1),n.changes.mapPos(j,1)).addToSet(g.slice())}this.hasComposition=k?{from:k.range.fromB,to:k.range.toB}:null,(browser.ie||browser.chrome)&&!k&&n&&n.state.doc.lines!=n.startState.doc.lines&&(this.forceSelection=!0);let $=this.decorations,V=this.updateDeco(),L=findChangedDeco($,V,n.changes);return g=ChangedRange.extendWithRanges(g,L),!(this.flags&7)&&g.length==0?!1:(this.updateInner(g,n.startState.doc.length,k),n.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(n,r,g){this.view.viewState.mustMeasureContent=!0,this.updateChildren(n,r,g);let{observer:y}=this.view;y.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let $=browser.chrome||browser.ios?{node:y.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,$),this.flags&=-8,$&&($.written||y.selectionRange.focusNode!=$.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach($=>$.flags&=-9);let k=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let $ of this.children)$ instanceof BlockWidgetView&&$.widget instanceof BlockGapWidget&&k.push($.dom);y.updateGaps(k)}updateChildren(n,r,g){let y=g?g.range.addToSet(n.slice()):n,k=this.childCursor(r);for(let $=y.length-1;;$--){let V=$>=0?y[$]:null;if(!V)break;let{fromA:L,toA:z,fromB:j,toB:ae}=V,re,oe,ue,le;if(g&&g.range.fromB<ae&&g.range.toB>j){let Ne=ContentBuilder.build(this.view.state.doc,j,g.range.fromB,this.decorations,this.dynamicDecorationMap),$e=ContentBuilder.build(this.view.state.doc,g.range.toB,ae,this.decorations,this.dynamicDecorationMap);oe=Ne.breakAtStart,ue=Ne.openStart,le=$e.openEnd;let xe=this.compositionView(g);$e.breakAtStart?xe.breakAfter=1:$e.content.length&&xe.merge(xe.length,xe.length,$e.content[0],!1,$e.openStart,0)&&(xe.breakAfter=$e.content[0].breakAfter,$e.content.shift()),Ne.content.length&&xe.merge(0,0,Ne.content[Ne.content.length-1],!0,0,Ne.openEnd)&&Ne.content.pop(),re=Ne.content.concat(xe).concat($e.content)}else({content:re,breakAtStart:oe,openStart:ue,openEnd:le}=ContentBuilder.build(this.view.state.doc,j,ae,this.decorations,this.dynamicDecorationMap));let{i:de,off:he}=k.findPos(z,1),{i:_e,off:Ce}=k.findPos(L,-1);replaceRange(this,_e,Ce,de,he,re,oe,ue,le)}g&&this.fixCompositionDOM(g)}updateEditContextFormatting(n){this.editContextFormatting=this.editContextFormatting.map(n.changes);for(let r of n.transactions)for(let g of r.effects)g.is(setEditContextFormatting)&&(this.editContextFormatting=g.value)}compositionView(n){let r=new TextView(n.text.nodeValue);r.flags|=8;for(let{deco:y}of n.marks)r=new MarkView(y,[r],r.length);let g=new LineView;return g.append(r,0),g}fixCompositionDOM(n){let r=(k,$)=>{$.flags|=8|($.children.some(L=>L.flags&7)?1:0),this.markedForComposition.add($);let V=ContentView.get(k);V&&V!=$&&(V.dom=null),$.setDOM(k)},g=this.childPos(n.range.fromB,1),y=this.children[g.i];r(n.line,y);for(let k=n.marks.length-1;k>=-1;k--)g=y.childPos(g.off,1),y=y.children[g.i],r(k>=0?n.marks[k].node:n.text,y)}updateSelection(n=!1,r=!1){(n||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let g=this.view.root.activeElement,y=g==this.dom,k=!y&&!(this.view.state.facet(editable)||this.dom.tabIndex>-1)&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(g&&this.dom.contains(g));if(!(y||r||k))return;let $=this.forceSelection;this.forceSelection=!1;let V=this.view.state.selection.main,L=this.moveToLine(this.domAtPos(V.anchor)),z=V.empty?L:this.moveToLine(this.domAtPos(V.head));if(browser.gecko&&V.empty&&!this.hasComposition&&betweenUneditable(L)){let ae=document.createTextNode("");this.view.observer.ignore(()=>L.node.insertBefore(ae,L.node.childNodes[L.offset]||null)),L=z=new DOMPos(ae,0),$=!0}let j=this.view.observer.selectionRange;($||!j.focusNode||(!isEquivalentPosition(L.node,L.offset,j.anchorNode,j.anchorOffset)||!isEquivalentPosition(z.node,z.offset,j.focusNode,j.focusOffset))&&!this.suppressWidgetCursorChange(j,V))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(j.focusNode)&&inUneditable(j.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let ae=getSelection(this.view.root);if(ae)if(V.empty){if(browser.gecko){let re=nextToUneditable(L.node,L.offset);if(re&&re!=3){let oe=(re==1?textNodeBefore:textNodeAfter)(L.node,L.offset);oe&&(L=new DOMPos(oe.node,oe.offset))}}ae.collapse(L.node,L.offset),V.bidiLevel!=null&&ae.caretBidiLevel!==void 0&&(ae.caretBidiLevel=V.bidiLevel)}else if(ae.extend){ae.collapse(L.node,L.offset);try{ae.extend(z.node,z.offset)}catch{}}else{let re=document.createRange();V.anchor>V.head&&([L,z]=[z,L]),re.setEnd(z.node,z.offset),re.setStart(L.node,L.offset),ae.removeAllRanges(),ae.addRange(re)}k&&this.view.root.activeElement==this.dom&&(this.dom.blur(),g&&g.focus())}),this.view.observer.setSelectionRange(L,z)),this.impreciseAnchor=L.precise?null:new DOMPos(j.anchorNode,j.anchorOffset),this.impreciseHead=z.precise?null:new DOMPos(j.focusNode,j.focusOffset)}suppressWidgetCursorChange(n,r){return this.hasComposition&&r.empty&&isEquivalentPosition(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)&&this.posFromDOM(n.focusNode,n.focusOffset)==r.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:n}=this,r=n.state.selection.main,g=getSelection(n.root),{anchorNode:y,anchorOffset:k}=n.observer.selectionRange;if(!g||!r.empty||!r.assoc||!g.modify)return;let $=LineView.find(this,r.head);if(!$)return;let V=$.posAtStart;if(r.head==V||r.head==V+$.length)return;let L=this.coordsAt(r.head,-1),z=this.coordsAt(r.head,1);if(!L||!z||L.bottom>z.top)return;let j=this.domAtPos(r.head+r.assoc);g.collapse(j.node,j.offset),g.modify("move",r.assoc<0?"forward":"backward","lineboundary"),n.observer.readSelectionRange();let ae=n.observer.selectionRange;n.docView.posFromDOM(ae.anchorNode,ae.anchorOffset)!=r.from&&g.collapse(y,k)}moveToLine(n){let r=this.dom,g;if(n.node!=r)return n;for(let y=n.offset;!g&&y<r.childNodes.length;y++){let k=ContentView.get(r.childNodes[y]);k instanceof LineView&&(g=k.domAtPos(0))}for(let y=n.offset-1;!g&&y>=0;y--){let k=ContentView.get(r.childNodes[y]);k instanceof LineView&&(g=k.domAtPos(k.length))}return g?new DOMPos(g.node,g.offset,!0):n}nearest(n){for(let r=n;r;){let g=ContentView.get(r);if(g&&g.rootView==this)return g;r=r.parentNode}return null}posFromDOM(n,r){let g=this.nearest(n);if(!g)throw new RangeError("Trying to find position for a DOM position outside of the document");return g.localPosFromDOM(n,r)+g.posAtStart}domAtPos(n){let{i:r,off:g}=this.childCursor().findPos(n,-1);for(;r<this.children.length-1;){let y=this.children[r];if(g<y.length||y instanceof LineView)break;r++,g=0}return this.children[r].domAtPos(g)}coordsAt(n,r){let g=null,y=0;for(let k=this.length,$=this.children.length-1;$>=0;$--){let V=this.children[$],L=k-V.breakAfter,z=L-V.length;if(L<n)break;if(z<=n&&(z<n||V.covers(-1))&&(L>n||V.covers(1))&&(!g||V instanceof LineView&&!(g instanceof LineView&&r>=0)))g=V,y=z;else if(g&&z==n&&L==n&&V instanceof BlockWidgetView&&Math.abs(r)<2){if(V.deco.startSide<0)break;$&&(g=null)}k=z}return g?g.coordsAt(n-y,r):null}coordsForChar(n){let{i:r,off:g}=this.childPos(n,1),y=this.children[r];if(!(y instanceof LineView))return null;for(;y.children.length;){let{i:V,off:L}=y.childPos(g,1);for(;;V++){if(V==y.children.length)return null;if((y=y.children[V]).length)break}g=L}if(!(y instanceof TextView))return null;let k=findClusterBreak(y.text,g);if(k==g)return null;let $=textRange(y.dom,g,k).getClientRects();for(let V=0;V<$.length;V++){let L=$[V];if(V==$.length-1||L.top<L.bottom&&L.left<L.right)return L}return null}measureVisibleLineHeights(n){let r=[],{from:g,to:y}=n,k=this.view.contentDOM.clientWidth,$=k>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,V=-1,L=this.view.textDirection==Direction.LTR;for(let z=0,j=0;j<this.children.length;j++){let ae=this.children[j],re=z+ae.length;if(re>y)break;if(z>=g){let oe=ae.dom.getBoundingClientRect();if(r.push(oe.height),$){let ue=ae.dom.lastChild,le=ue?clientRectsFor(ue):[];if(le.length){let de=le[le.length-1],he=L?de.right-oe.left:oe.right-de.left;he>V&&(V=he,this.minWidth=k,this.minWidthFrom=z,this.minWidthTo=re)}}}z=re+ae.breakAfter}return r}textDirectionAt(n){let{i:r}=this.childPos(n,1);return getComputedStyle(this.children[r].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let k of this.children)if(k instanceof LineView){let $=k.measureTextSize();if($)return $}let n=document.createElement("div"),r,g,y;return n.className="cm-line",n.style.width="99999px",n.style.position="absolute",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(n);let k=clientRectsFor(n.firstChild)[0];r=n.getBoundingClientRect().height,g=k?k.width/27:7,y=k?k.height:r,n.remove()}),{lineHeight:r,charWidth:g,textHeight:y}}childCursor(n=this.length){let r=this.children.length;return r&&(n-=this.children[--r].length),new ChildCursor(this.children,n,r)}computeBlockGapDeco(){let n=[],r=this.view.viewState;for(let g=0,y=0;;y++){let k=y==r.viewports.length?null:r.viewports[y],$=k?k.from-1:this.length;if($>g){let V=(r.lineBlockAt($).bottom-r.lineBlockAt(g).top)/this.view.scaleY;n.push(Decoration.replace({widget:new BlockGapWidget(V),block:!0,inclusive:!0,isBlockGap:!0}).range(g,$))}if(!k)break;g=k.to+1}return Decoration.set(n)}updateDeco(){let n=1,r=this.view.state.facet(decorations).map(k=>(this.dynamicDecorationMap[n++]=typeof k=="function")?k(this.view):k),g=!1,y=this.view.state.facet(outerDecorations).map((k,$)=>{let V=typeof k=="function";return V&&(g=!0),V?k(this.view):k});for(y.length&&(this.dynamicDecorationMap[n++]=g,r.push(RangeSet.join(y))),this.decorations=[this.editContextFormatting,...r,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];n<this.decorations.length;)this.dynamicDecorationMap[n++]=!1;return this.decorations}scrollIntoView(n){if(n.isSnapshot){let z=this.view.viewState.lineBlockAt(n.range.head);this.view.scrollDOM.scrollTop=z.top-n.yMargin,this.view.scrollDOM.scrollLeft=n.xMargin;return}for(let z of this.view.state.facet(scrollHandler))try{if(z(this.view,n.range,n))return!0}catch(j){logException(this.view.state,j,"scroll handler")}let{range:r}=n,g=this.coordsAt(r.head,r.empty?r.assoc:r.head>r.anchor?-1:1),y;if(!g)return;!r.empty&&(y=this.coordsAt(r.anchor,r.anchor>r.head?-1:1))&&(g={left:Math.min(g.left,y.left),top:Math.min(g.top,y.top),right:Math.max(g.right,y.right),bottom:Math.max(g.bottom,y.bottom)});let k=getScrollMargins(this.view),$={left:g.left-k.left,top:g.top-k.top,right:g.right+k.right,bottom:g.bottom+k.bottom},{offsetWidth:V,offsetHeight:L}=this.view.scrollDOM;scrollRectIntoView(this.view.scrollDOM,$,r.head<r.anchor?-1:1,n.x,n.y,Math.max(Math.min(n.xMargin,V),-V),Math.max(Math.min(n.yMargin,L),-L),this.view.textDirection==Direction.LTR)}}function betweenUneditable(e){return e.node.nodeType==1&&e.node.firstChild&&(e.offset==0||e.node.childNodes[e.offset-1].contentEditable=="false")&&(e.offset==e.node.childNodes.length||e.node.childNodes[e.offset].contentEditable=="false")}function findCompositionNode(e,n){let r=e.observer.selectionRange;if(!r.focusNode)return null;let g=textNodeBefore(r.focusNode,r.focusOffset),y=textNodeAfter(r.focusNode,r.focusOffset),k=g||y;if(y&&g&&y.node!=g.node){let V=ContentView.get(y.node);if(!V||V instanceof TextView&&V.text!=y.node.nodeValue)k=y;else if(e.docView.lastCompositionAfterCursor){let L=ContentView.get(g.node);!L||L instanceof TextView&&L.text!=g.node.nodeValue||(k=y)}}if(e.docView.lastCompositionAfterCursor=k!=g,!k)return null;let $=n-k.offset;return{from:$,to:$+k.node.nodeValue.length,node:k.node}}function findCompositionRange(e,n,r){let g=findCompositionNode(e,r);if(!g)return null;let{node:y,from:k,to:$}=g,V=y.nodeValue;if(/[\n\r]/.test(V)||e.state.doc.sliceString(g.from,g.to)!=V)return null;let L=n.invertedDesc,z=new ChangedRange(L.mapPos(k),L.mapPos($),k,$),j=[];for(let ae=y.parentNode;;ae=ae.parentNode){let re=ContentView.get(ae);if(re instanceof MarkView)j.push({node:ae,deco:re.mark});else{if(re instanceof LineView||ae.nodeName=="DIV"&&ae.parentNode==e.contentDOM)return{range:z,text:y,marks:j,line:ae};if(ae!=e.contentDOM)j.push({node:ae,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs(ae),tagName:ae.tagName.toLowerCase()})});else return null}}}function nextToUneditable(e,n){return e.nodeType!=1?0:(n&&e.childNodes[n-1].contentEditable=="false"?1:0)|(n<e.childNodes.length&&e.childNodes[n].contentEditable=="false"?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange(n,r){addRange(n,r,this.changes)}comparePoint(n,r){addRange(n,r,this.changes)}boundChange(n){addRange(n,n,this.changes)}};function findChangedDeco(e,n,r){let g=new DecorationComparator$1;return RangeSet.compare(e,n,r,g),g.changes}function inUneditable(e,n){for(let r=e;r&&r!=n;r=r.assignedSlot||r.parentNode)if(r.nodeType==1&&r.contentEditable=="false")return!0;return!1}function touchesComposition(e,n){let r=!1;return n&&e.iterChangedRanges((g,y)=>{g<n.to&&y>n.from&&(r=!0)}),r}function groupAt(e,n,r=1){let g=e.charCategorizer(n),y=e.doc.lineAt(n),k=n-y.from;if(y.length==0)return EditorSelection.cursor(n);k==0?r=1:k==y.length&&(r=-1);let $=k,V=k;r<0?$=findClusterBreak(y.text,k,!1):V=findClusterBreak(y.text,k);let L=g(y.text.slice($,V));for(;$>0;){let z=findClusterBreak(y.text,$,!1);if(g(y.text.slice(z,$))!=L)break;$=z}for(;V<y.length;){let z=findClusterBreak(y.text,V);if(g(y.text.slice(V,z))!=L)break;V=z}return EditorSelection.range($+y.from,V+y.from)}function getdx(e,n){return n.left>e?n.left-e:Math.max(0,e-n.right)}function getdy(e,n){return n.top>e?n.top-e:Math.max(0,e-n.bottom)}function yOverlap(e,n){return e.top<n.bottom-1&&e.bottom>n.top+1}function upTop(e,n){return n<e.top?{top:n,left:e.left,right:e.right,bottom:e.bottom}:e}function upBot(e,n){return n>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:n}:e}function domPosAtCoords(e,n,r){let g,y,k,$,V=!1,L,z,j,ae;for(let ue=e.firstChild;ue;ue=ue.nextSibling){let le=clientRectsFor(ue);for(let de=0;de<le.length;de++){let he=le[de];y&&yOverlap(y,he)&&(he=upTop(upBot(he,y.bottom),y.top));let _e=getdx(n,he),Ce=getdy(r,he);if(_e==0&&Ce==0)return ue.nodeType==3?domPosInText(ue,n,r):domPosAtCoords(ue,n,r);if(!g||$>Ce||$==Ce&&k>_e){g=ue,y=he,k=_e,$=Ce;let Ne=Ce?r<he.top?-1:1:_e?n<he.left?-1:1:0;V=!Ne||(Ne>0?de<le.length-1:de>0)}_e==0?r>he.bottom&&(!j||j.bottom<he.bottom)?(L=ue,j=he):r<he.top&&(!ae||ae.top>he.top)&&(z=ue,ae=he):j&&yOverlap(j,he)?j=upBot(j,he.bottom):ae&&yOverlap(ae,he)&&(ae=upTop(ae,he.top))}}if(j&&j.bottom>=r?(g=L,y=j):ae&&ae.top<=r&&(g=z,y=ae),!g)return{node:e,offset:0};let re=Math.max(y.left,Math.min(y.right,n));if(g.nodeType==3)return domPosInText(g,re,r);if(V&&g.contentEditable!="false")return domPosAtCoords(g,re,r);let oe=Array.prototype.indexOf.call(e.childNodes,g)+(n>=(y.left+y.right)/2?1:0);return{node:e,offset:oe}}function domPosInText(e,n,r){let g=e.nodeValue.length,y=-1,k=1e9,$=0;for(let V=0;V<g;V++){let L=textRange(e,V,V+1).getClientRects();for(let z=0;z<L.length;z++){let j=L[z];if(j.top==j.bottom)continue;$||($=n-j.left);let ae=(j.top>r?j.top-r:r-j.bottom)-1;if(j.left-1<=n&&j.right+1>=n&&ae<k){let re=n>=(j.left+j.right)/2,oe=re;if((browser.chrome||browser.gecko)&&textRange(e,V).getBoundingClientRect().left==j.right&&(oe=!re),ae<=0)return{node:e,offset:V+(oe?1:0)};y=V+(oe?1:0),k=ae}}}return{node:e,offset:y>-1?y:$>0?e.nodeValue.length:0}}function posAtCoords(e,n,r,g=-1){var y,k;let $=e.contentDOM.getBoundingClientRect(),V=$.top+e.viewState.paddingTop,L,{docHeight:z}=e.viewState,{x:j,y:ae}=n,re=ae-V;if(re<0)return 0;if(re>z)return e.state.doc.length;for(let Ne=e.viewState.heightOracle.textHeight/2,$e=!1;L=e.elementAtHeight(re),L.type!=BlockType.Text;)for(;re=g>0?L.bottom+Ne:L.top-Ne,!(re>=0&&re<=z);){if($e)return r?null:0;$e=!0,g=-g}ae=V+re;let oe=L.from;if(oe<e.viewport.from)return e.viewport.from==0?0:r?null:posAtCoordsImprecise(e,$,L,j,ae);if(oe>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:r?null:posAtCoordsImprecise(e,$,L,j,ae);let ue=e.dom.ownerDocument,le=e.root.elementFromPoint?e.root:ue,de=le.elementFromPoint(j,ae);de&&!e.contentDOM.contains(de)&&(de=null),de||(j=Math.max($.left+1,Math.min($.right-1,j)),de=le.elementFromPoint(j,ae),de&&!e.contentDOM.contains(de)&&(de=null));let he,_e=-1;if(de&&((y=e.docView.nearest(de))===null||y===void 0?void 0:y.isEditable)!=!1){if(ue.caretPositionFromPoint){let Ne=ue.caretPositionFromPoint(j,ae);Ne&&({offsetNode:he,offset:_e}=Ne)}else if(ue.caretRangeFromPoint){let Ne=ue.caretRangeFromPoint(j,ae);Ne&&({startContainer:he,startOffset:_e}=Ne,(!e.contentDOM.contains(he)||browser.safari&&isSuspiciousSafariCaretResult(he,_e,j)||browser.chrome&&isSuspiciousChromeCaretResult(he,_e,j))&&(he=void 0))}he&&(_e=Math.min(maxOffset(he),_e))}if(!he||!e.docView.dom.contains(he)){let Ne=LineView.find(e.docView,oe);if(!Ne)return re>L.top+L.height/2?L.to:L.from;({node:he,offset:_e}=domPosAtCoords(Ne.dom,j,ae))}let Ce=e.docView.nearest(he);if(!Ce)return null;if(Ce.isWidget&&((k=Ce.dom)===null||k===void 0?void 0:k.nodeType)==1){let Ne=Ce.dom.getBoundingClientRect();return n.y<Ne.top||n.y<=Ne.bottom&&n.x<=(Ne.left+Ne.right)/2?Ce.posAtStart:Ce.posAtEnd}else return Ce.localPosFromDOM(he,_e)+Ce.posAtStart}function posAtCoordsImprecise(e,n,r,g,y){let k=Math.round((g-n.left)*e.defaultCharacterWidth);if(e.lineWrapping&&r.height>e.defaultLineHeight*1.5){let V=e.viewState.heightOracle.textHeight,L=Math.floor((y-r.top-(e.defaultLineHeight-V)*.5)/V);k+=L*e.viewState.heightOracle.lineLength}let $=e.state.sliceDoc(r.from,r.to);return r.from+findColumn($,k,e.state.tabSize)}function isSuspiciousSafariCaretResult(e,n,r){let g;if(e.nodeType!=3||n!=(g=e.nodeValue.length))return!1;for(let y=e.nextSibling;y;y=y.nextSibling)if(y.nodeType!=1||y.nodeName!="BR")return!1;return textRange(e,g-1,g).getBoundingClientRect().left>r}function isSuspiciousChromeCaretResult(e,n,r){if(n!=0)return!1;for(let y=e;;){let k=y.parentNode;if(!k||k.nodeType!=1||k.firstChild!=y)return!1;if(k.classList.contains("cm-line"))break;y=k}let g=e.nodeType==1?e.getBoundingClientRect():textRange(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect();return r-g.left>5}function blockAt(e,n){let r=e.lineBlockAt(n);if(Array.isArray(r.type)){for(let g of r.type)if(g.to>n||g.to==n&&(g.to==r.to||g.type==BlockType.Text))return g}return r}function moveToLineBoundary(e,n,r,g){let y=blockAt(e,n.head),k=!g||y.type!=BlockType.Text||!(e.lineWrapping||y.widgetLineBreaks)?null:e.coordsAtPos(n.assoc<0&&n.head>y.from?n.head-1:n.head);if(k){let $=e.dom.getBoundingClientRect(),V=e.textDirectionAt(y.from),L=e.posAtCoords({x:r==(V==Direction.LTR)?$.right-1:$.left+1,y:(k.top+k.bottom)/2});if(L!=null)return EditorSelection.cursor(L,r?-1:1)}return EditorSelection.cursor(r?y.to:y.from,r?-1:1)}function moveByChar(e,n,r,g){let y=e.state.doc.lineAt(n.head),k=e.bidiSpans(y),$=e.textDirectionAt(y.from);for(let V=n,L=null;;){let z=moveVisually(y,k,$,V,r),j=movedOver;if(!z){if(y.number==(r?e.state.doc.lines:1))return V;j=`
`,y=e.state.doc.line(y.number+(r?1:-1)),k=e.bidiSpans(y),z=e.visualLineSide(y,!r)}if(L){if(!L(j))return V}else{if(!g)return z;L=g(j)}V=z}}function byGroup(e,n,r){let g=e.state.charCategorizer(n),y=g(r);return k=>{let $=g(k);return y==CharCategory.Space&&(y=$),y==$}}function moveVertically(e,n,r,g){let y=n.head,k=r?1:-1;if(y==(r?e.state.doc.length:0))return EditorSelection.cursor(y,n.assoc);let $=n.goalColumn,V,L=e.contentDOM.getBoundingClientRect(),z=e.coordsAtPos(y,n.assoc||-1),j=e.documentTop;if(z)$==null&&($=z.left-L.left),V=k<0?z.top:z.bottom;else{let oe=e.viewState.lineBlockAt(y);$==null&&($=Math.min(L.right-L.left,e.defaultCharacterWidth*(y-oe.from))),V=(k<0?oe.top:oe.bottom)+j}let ae=L.left+$,re=g??e.viewState.heightOracle.textHeight>>1;for(let oe=0;;oe+=10){let ue=V+(re+oe)*k,le=posAtCoords(e,{x:ae,y:ue},!1,k);if(ue<L.top||ue>L.bottom||(k<0?le<y:le>y)){let de=e.docView.coordsForChar(le),he=!de||ue<de.top?-1:1;return EditorSelection.cursor(le,he,void 0,$)}}}function skipAtomicRanges(e,n,r){for(;;){let g=0;for(let y of e)y.between(n-1,n+1,(k,$,V)=>{if(n>k&&n<$){let L=g||r||(n-k<$-n?-1:1);n=L<0?k:$,g=L}});if(!g)return n}}function skipAtoms(e,n,r){let g=skipAtomicRanges(e.state.facet(atomicRanges).map(y=>y(e)),r.from,n.head>r.from?-1:1);return g==r.from?r:EditorSelection.cursor(g,g<r.from?1:-1)}const LineBreakPlaceholder="";class DOMReader{constructor(n,r){this.points=n,this.text="",this.lineSeparator=r.facet(EditorState.lineSeparator)}append(n){this.text+=n}lineBreak(){this.text+=LineBreakPlaceholder}readRange(n,r){if(!n)return this;let g=n.parentNode;for(let y=n;;){this.findPointBefore(g,y);let k=this.text.length;this.readNode(y);let $=y.nextSibling;if($==r)break;let V=ContentView.get(y),L=ContentView.get($);(V&&L?V.breakAfter:(V?V.breakAfter:isBlockElement(y))||isBlockElement($)&&(y.nodeName!="BR"||y.cmIgnore)&&this.text.length>k)&&this.lineBreak(),y=$}return this.findPointBefore(g,r),this}readTextNode(n){let r=n.nodeValue;for(let g of this.points)g.node==n&&(g.pos=this.text.length+Math.min(g.offset,r.length));for(let g=0,y=this.lineSeparator?null:/\r\n?|\n/g;;){let k=-1,$=1,V;if(this.lineSeparator?(k=r.indexOf(this.lineSeparator,g),$=this.lineSeparator.length):(V=y.exec(r))&&(k=V.index,$=V[0].length),this.append(r.slice(g,k<0?r.length:k)),k<0)break;if(this.lineBreak(),$>1)for(let L of this.points)L.node==n&&L.pos>this.text.length&&(L.pos-=$-1);g=k+$}}readNode(n){if(n.cmIgnore)return;let r=ContentView.get(n),g=r&&r.overrideDOMText;if(g!=null){this.findPointInside(n,g.length);for(let y=g.iter();!y.next().done;)y.lineBreak?this.lineBreak():this.append(y.value)}else n.nodeType==3?this.readTextNode(n):n.nodeName=="BR"?n.nextSibling&&this.lineBreak():n.nodeType==1&&this.readRange(n.firstChild,null)}findPointBefore(n,r){for(let g of this.points)g.node==n&&n.childNodes[g.offset]==r&&(g.pos=this.text.length)}findPointInside(n,r){for(let g of this.points)(n.nodeType==3?g.node==n:n.contains(g.node))&&(g.pos=this.text.length+(isAtEnd(n,g.node,g.offset)?r:0))}}function isAtEnd(e,n,r){for(;;){if(!n||r<maxOffset(n))return!1;if(n==e)return!0;r=domIndex(n)+1,n=n.parentNode}}class DOMPoint{constructor(n,r){this.node=n,this.offset=r,this.pos=-1}}class DOMChange{constructor(n,r,g,y){this.typeOver=y,this.bounds=null,this.text="",this.domChanged=r>-1;let{impreciseHead:k,impreciseAnchor:$}=n.docView;if(n.state.readOnly&&r>-1)this.newSel=null;else if(r>-1&&(this.bounds=n.docView.domBoundsAround(r,g,0))){let V=k||$?[]:selectionPoints(n),L=new DOMReader(V,n.state);L.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=L.text,this.newSel=selectionFromPoints(V,this.bounds.from)}else{let V=n.observer.selectionRange,L=k&&k.node==V.focusNode&&k.offset==V.focusOffset||!contains(n.contentDOM,V.focusNode)?n.state.selection.main.head:n.docView.posFromDOM(V.focusNode,V.focusOffset),z=$&&$.node==V.anchorNode&&$.offset==V.anchorOffset||!contains(n.contentDOM,V.anchorNode)?n.state.selection.main.anchor:n.docView.posFromDOM(V.anchorNode,V.anchorOffset),j=n.viewport;if((browser.ios||browser.chrome)&&n.state.selection.main.empty&&L!=z&&(j.from>0||j.to<n.state.doc.length)){let ae=Math.min(L,z),re=Math.max(L,z),oe=j.from-ae,ue=j.to-re;(oe==0||oe==1||ae==0)&&(ue==0||ue==-1||re==n.state.doc.length)&&(L=0,z=n.state.doc.length)}this.newSel=EditorSelection.single(z,L)}}}function applyDOMChange(e,n){let r,{newSel:g}=n,y=e.state.selection.main,k=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(n.bounds){let{from:$,to:V}=n.bounds,L=y.from,z=null;(k===8||browser.android&&n.text.length<V-$)&&(L=y.to,z="end");let j=findDiff(e.state.doc.sliceString($,V,LineBreakPlaceholder),n.text,L-$,z);j&&(browser.chrome&&k==13&&j.toB==j.from+2&&n.text.slice(j.from,j.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&j.toB--,r={from:$+j.from,to:$+j.toA,insert:Text.of(n.text.slice(j.from,j.toB).split(LineBreakPlaceholder))})}else g&&(!e.hasFocus&&e.state.facet(editable)||g.main.eq(y))&&(g=null);if(!r&&!g)return!1;if(!r&&n.typeOver&&!y.empty&&g&&g.main.empty?r={from:y.from,to:y.to,insert:e.state.doc.slice(y.from,y.to)}:r&&r.from>=y.from&&r.to<=y.to&&(r.from!=y.from||r.to!=y.to)&&y.to-y.from-(r.to-r.from)<=4?r={from:y.from,to:y.to,insert:e.state.doc.slice(y.from,r.from).append(r.insert).append(e.state.doc.slice(r.to,y.to))}:(browser.mac||browser.android)&&r&&r.from==r.to&&r.from==y.head-1&&/^\. ?$/.test(r.insert.toString())&&e.contentDOM.getAttribute("autocorrect")=="off"?(g&&r.insert.length==2&&(g=EditorSelection.single(g.main.anchor-1,g.main.head-1)),r={from:y.from,to:y.to,insert:Text.of([" "])}):browser.chrome&&r&&r.from==r.to&&r.from==y.head&&r.insert.toString()==`
 `&&e.lineWrapping&&(g&&(g=EditorSelection.single(g.main.anchor-1,g.main.head-1)),r={from:y.from,to:y.to,insert:Text.of([" "])}),r)return applyDOMChangeInner(e,r,g,k);if(g&&!g.main.eq(y)){let $=!1,V="select";return e.inputState.lastSelectionTime>Date.now()-50&&(e.inputState.lastSelectionOrigin=="select"&&($=!0),V=e.inputState.lastSelectionOrigin),e.dispatch({selection:g,scrollIntoView:$,userEvent:V}),!0}else return!1}function applyDOMChangeInner(e,n,r,g=-1){if(browser.ios&&e.inputState.flushIOSKey(n))return!0;let y=e.state.selection.main;if(browser.android&&(n.to==y.to&&(n.from==y.from||n.from==y.from-1&&e.state.sliceDoc(n.from,y.from)==" ")&&n.insert.length==1&&n.insert.lines==2&&dispatchKey(e.contentDOM,"Enter",13)||(n.from==y.from-1&&n.to==y.to&&n.insert.length==0||g==8&&n.insert.length<n.to-n.from&&n.to>y.head)&&dispatchKey(e.contentDOM,"Backspace",8)||n.from==y.from&&n.to==y.to+1&&n.insert.length==0&&dispatchKey(e.contentDOM,"Delete",46)))return!0;let k=n.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let $,V=()=>$||($=applyDefaultInsert(e,n,r));return e.state.facet(inputHandler$1).some(L=>L(e,n.from,n.to,k,V))||e.dispatch(V()),!0}function applyDefaultInsert(e,n,r){let g,y=e.state,k=y.selection.main;if(n.from>=k.from&&n.to<=k.to&&n.to-n.from>=(k.to-k.from)/3&&(!r||r.main.empty&&r.main.from==n.from+n.insert.length)&&e.inputState.composing<0){let V=k.from<n.from?y.sliceDoc(k.from,n.from):"",L=k.to>n.to?y.sliceDoc(n.to,k.to):"";g=y.replaceSelection(e.state.toText(V+n.insert.sliceString(0,void 0,e.state.lineBreak)+L))}else{let V=y.changes(n),L=r&&r.main.to<=V.newLength?r.main:void 0;if(y.selection.ranges.length>1&&e.inputState.composing>=0&&n.to<=k.to&&n.to>=k.to-10){let z=e.state.sliceDoc(n.from,n.to),j,ae=r&&findCompositionNode(e,r.main.head);if(ae){let ue=n.insert.length-(n.to-n.from);j={from:ae.from,to:ae.to-ue}}else j=e.state.doc.lineAt(k.head);let re=k.to-n.to,oe=k.to-k.from;g=y.changeByRange(ue=>{if(ue.from==k.from&&ue.to==k.to)return{changes:V,range:L||ue.map(V)};let le=ue.to-re,de=le-z.length;if(ue.to-ue.from!=oe||e.state.sliceDoc(de,le)!=z||ue.to>=j.from&&ue.from<=j.to)return{range:ue};let he=y.changes({from:de,to:le,insert:n.insert}),_e=ue.to-k.to;return{changes:he,range:L?EditorSelection.range(Math.max(0,L.anchor+_e),Math.max(0,L.head+_e)):ue.map(he)}})}else g={changes:V,selection:L&&y.selection.replaceRange(L)}}let $="input.type";return(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,$+=".compose",e.inputState.compositionFirstChange&&($+=".start",e.inputState.compositionFirstChange=!1)),y.update(g,{userEvent:$,scrollIntoView:!0})}function findDiff(e,n,r,g){let y=Math.min(e.length,n.length),k=0;for(;k<y&&e.charCodeAt(k)==n.charCodeAt(k);)k++;if(k==y&&e.length==n.length)return null;let $=e.length,V=n.length;for(;$>0&&V>0&&e.charCodeAt($-1)==n.charCodeAt(V-1);)$--,V--;if(g=="end"){let L=Math.max(0,k-Math.min($,V));r-=$+L-k}if($<k&&e.length<n.length){let L=r<=k&&r>=$?k-r:0;k-=L,V=k+(V-$),$=k}else if(V<k){let L=r<=k&&r>=V?k-r:0;k-=L,$=k+($-V),V=k}return{from:k,toA:$,toB:V}}function selectionPoints(e){let n=[];if(e.root.activeElement!=e.contentDOM)return n;let{anchorNode:r,anchorOffset:g,focusNode:y,focusOffset:k}=e.observer.selectionRange;return r&&(n.push(new DOMPoint(r,g)),(y!=r||k!=g)&&n.push(new DOMPoint(y,k))),n}function selectionFromPoints(e,n){if(e.length==0)return null;let r=e[0].pos,g=e.length==2?e[1].pos:r;return r>-1&&g>-1?EditorSelection.single(r+n,g+n):null}class InputState{setSelectionOrigin(n){this.lastSelectionOrigin=n,this.lastSelectionTime=Date.now()}constructor(n){this.view=n,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=n.hasFocus,browser.safari&&n.contentDOM.addEventListener("input",()=>null),browser.gecko&&firefoxCopyCutHack(n.contentDOM.ownerDocument)}handleEvent(n){!eventBelongsToEditor(this.view,n)||this.ignoreDuringComposition(n)||n.type=="keydown"&&this.keydown(n)||this.runHandlers(n.type,n)}runHandlers(n,r){let g=this.handlers[n];if(g){for(let y of g.observers)y(this.view,r);for(let y of g.handlers){if(r.defaultPrevented)break;if(y(this.view,r)){r.preventDefault();break}}}}ensureHandlers(n){let r=computeHandlers(n),g=this.handlers,y=this.view.contentDOM;for(let k in r)if(k!="scroll"){let $=!r[k].handlers.length,V=g[k];V&&$!=!V.handlers.length&&(y.removeEventListener(k,this.handleEvent),V=null),V||y.addEventListener(k,this.handleEvent,{passive:$})}for(let k in g)k!="scroll"&&!r[k]&&y.removeEventListener(k,this.handleEvent);this.handlers=r}keydown(n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&n.keyCode!=27&&modifierCodes.indexOf(n.keyCode)<0&&(this.tabFocusMode=-1),browser.android&&browser.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return this.view.observer.delayAndroidKey(n.key,n.keyCode),!0;let r;return browser.ios&&!n.synthetic&&!n.altKey&&!n.metaKey&&((r=PendingKeys.find(g=>g.keyCode==n.keyCode))&&!n.ctrlKey||EmacsyPendingKeys.indexOf(n.key)>-1&&n.ctrlKey&&!n.shiftKey)?(this.pendingIOSKey=r||n,setTimeout(()=>this.flushIOSKey(),250),!0):(n.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(n){let r=this.pendingIOSKey;return!r||r.key=="Enter"&&n&&n.from<n.to&&/^\S+$/.test(n.insert.toString())?!1:(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,r.key,r.keyCode,r instanceof KeyboardEvent?r:void 0))}ignoreDuringComposition(n){return/^key/.test(n.type)?this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(n){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=n}update(n){this.view.observer.update(n),this.mouseSelection&&this.mouseSelection.update(n),this.draggedContent&&n.docChanged&&(this.draggedContent=this.draggedContent.map(n.changes)),n.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(e,n){return(r,g)=>{try{return n.call(e,g,r)}catch(y){logException(r.state,y)}}}function computeHandlers(e){let n=Object.create(null);function r(g){return n[g]||(n[g]={observers:[],handlers:[]})}for(let g of e){let y=g.spec;if(y&&y.domEventHandlers)for(let k in y.domEventHandlers){let $=y.domEventHandlers[k];$&&r(k).handlers.push(bindHandler(g.value,$))}if(y&&y.domEventObservers)for(let k in y.domEventObservers){let $=y.domEventObservers[k];$&&r(k).observers.push(bindHandler(g.value,$))}}for(let g in handlers)r(g).handlers.push(handlers[g]);for(let g in observers)r(g).observers.push(observers[g]);return n}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(e){return Math.max(0,e)*.7+8}function dist(e,n){return Math.max(Math.abs(e.clientX-n.clientX),Math.abs(e.clientY-n.clientY))}class MouseSelection{constructor(n,r,g,y){this.view=n,this.startEvent=r,this.style=g,this.mustSelect=y,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=r,this.scrollParents=scrollableParents(n.contentDOM),this.atoms=n.state.facet(atomicRanges).map($=>$(n));let k=n.contentDOM.ownerDocument;k.addEventListener("mousemove",this.move=this.move.bind(this)),k.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=r.shiftKey,this.multiple=n.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(n,r),this.dragging=isInPrimarySelection(n,r)&&getClickType(r)==1?null:!1}start(n){this.dragging===!1&&this.select(n)}move(n){if(n.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist(this.startEvent,n)<10)return;this.select(this.lastEvent=n);let r=0,g=0,y=0,k=0,$=this.view.win.innerWidth,V=this.view.win.innerHeight;this.scrollParents.x&&({left:y,right:$}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:k,bottom:V}=this.scrollParents.y.getBoundingClientRect());let L=getScrollMargins(this.view);n.clientX-L.left<=y+dragScrollMargin?r=-dragScrollSpeed(y-n.clientX):n.clientX+L.right>=$-dragScrollMargin&&(r=dragScrollSpeed(n.clientX-$)),n.clientY-L.top<=k+dragScrollMargin?g=-dragScrollSpeed(k-n.clientY):n.clientY+L.bottom>=V-dragScrollMargin&&(g=dragScrollSpeed(n.clientY-V)),this.setScrollSpeed(r,g)}up(n){this.dragging==null&&this.select(this.lastEvent),this.dragging||n.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let n=this.view.contentDOM.ownerDocument;n.removeEventListener("mousemove",this.move),n.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(n,r){this.scrollSpeed={x:n,y:r},n||r?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:n,y:r}=this.scrollSpeed;n&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=n,n=0),r&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=r,r=0),(n||r)&&this.view.win.scrollBy(n,r),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(n){let r=null;for(let g=0;g<n.ranges.length;g++){let y=n.ranges[g],k=null;if(y.empty){let $=skipAtomicRanges(this.atoms,y.from,0);$!=y.from&&(k=EditorSelection.cursor($,-1))}else{let $=skipAtomicRanges(this.atoms,y.from,-1),V=skipAtomicRanges(this.atoms,y.to,1);($!=y.from||V!=y.to)&&(k=EditorSelection.range(y.from==y.anchor?$:V,y.from==y.head?$:V))}k&&(r||(r=n.ranges.slice()),r[g]=k)}return r?EditorSelection.create(r,n.mainIndex):n}select(n){let{view:r}=this,g=this.skipAtoms(this.style.get(n,this.extend,this.multiple));(this.mustSelect||!g.eq(r.state.selection,this.dragging===!1))&&this.view.dispatch({selection:g,userEvent:"select.pointer"}),this.mustSelect=!1}update(n){n.transactions.some(r=>r.isUserEvent("input.type"))?this.destroy():this.style.update(n)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(e,n){let r=e.state.facet(clickAddsSelectionRange);return r.length?r[0](n):browser.mac?n.metaKey:n.ctrlKey}function dragMovesSelection(e,n){let r=e.state.facet(dragMovesSelection$1);return r.length?r[0](n):browser.mac?!n.altKey:!n.ctrlKey}function isInPrimarySelection(e,n){let{main:r}=e.state.selection;if(r.empty)return!1;let g=getSelection(e.root);if(!g||g.rangeCount==0)return!0;let y=g.getRangeAt(0).getClientRects();for(let k=0;k<y.length;k++){let $=y[k];if($.left<=n.clientX&&$.right>=n.clientX&&$.top<=n.clientY&&$.bottom>=n.clientY)return!0}return!1}function eventBelongsToEditor(e,n){if(!n.bubbles)return!0;if(n.defaultPrevented)return!1;for(let r=n.target,g;r!=e.contentDOM;r=r.parentNode)if(!r||r.nodeType==11||(g=ContentView.get(r))&&g.ignoreEvent(n))return!1;return!0}const handlers=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(e){let n=e.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(()=>{e.focus(),r.remove(),doPaste(e,r.value)},50)}function textFilter(e,n,r){for(let g of e.facet(n))r=g(r,e);return r}function doPaste(e,n){n=textFilter(e.state,clipboardInputFilter,n);let{state:r}=e,g,y=1,k=r.toText(n),$=k.lines==r.selection.ranges.length;if(lastLinewiseCopy!=null&&r.selection.ranges.every(L=>L.empty)&&lastLinewiseCopy==k.toString()){let L=-1;g=r.changeByRange(z=>{let j=r.doc.lineAt(z.from);if(j.from==L)return{range:z};L=j.from;let ae=r.toText(($?k.line(y++).text:n)+r.lineBreak);return{changes:{from:j.from,insert:ae},range:EditorSelection.cursor(z.from+ae.length)}})}else $?g=r.changeByRange(L=>{let z=k.line(y++);return{changes:{from:L.from,to:L.to,insert:z.text},range:EditorSelection.cursor(L.from+z.length)}}):g=r.replaceSelection(k);e.dispatch(g,{userEvent:"input.paste",scrollIntoView:!0})}observers.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft};handlers.keydown=(e,n)=>(e.inputState.setSelectionOrigin("select"),n.keyCode==27&&e.inputState.tabFocusMode!=0&&(e.inputState.tabFocusMode=Date.now()+2e3),!1);observers.touchstart=(e,n)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")};observers.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")};handlers.mousedown=(e,n)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let r=null;for(let g of e.state.facet(mouseSelectionStyle))if(r=g(e,n),r)break;if(!r&&n.button==0&&(r=basicMouseSelection(e,n)),r){let g=!e.hasFocus;e.inputState.startMouseSelection(new MouseSelection(e,n,r,g)),g&&e.observer.ignore(()=>{focusPreventScroll(e.contentDOM);let k=e.root.activeElement;k&&!k.contains(e.contentDOM)&&k.blur()});let y=e.inputState.mouseSelection;if(y)return y.start(n),y.dragging===!1}return!1};function rangeForClick(e,n,r,g){if(g==1)return EditorSelection.cursor(n,r);if(g==2)return groupAt(e.state,n,r);{let y=LineView.find(e.docView,n),k=e.state.doc.lineAt(y?y.posAtEnd:n),$=y?y.posAtStart:k.from,V=y?y.posAtEnd:k.to;return V<e.state.doc.length&&V==k.to&&V++,EditorSelection.range($,V)}}let inside=(e,n,r)=>n>=r.top&&n<=r.bottom&&e>=r.left&&e<=r.right;function findPositionSide(e,n,r,g){let y=LineView.find(e.docView,n);if(!y)return 1;let k=n-y.posAtStart;if(k==0)return 1;if(k==y.length)return-1;let $=y.coordsAt(k,-1);if($&&inside(r,g,$))return-1;let V=y.coordsAt(k,1);return V&&inside(r,g,V)?1:$&&$.bottom>=g?-1:1}function queryPos(e,n){let r=e.posAtCoords({x:n.clientX,y:n.clientY},!1);return{pos:r,bias:findPositionSide(e,r,n.clientX,n.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(e){if(!BadMouseDetail)return e.detail;let n=lastMouseDown,r=lastMouseDownTime;return lastMouseDown=e,lastMouseDownTime=Date.now(),lastMouseDownCount=!n||r>Date.now()-400&&Math.abs(n.clientX-e.clientX)<2&&Math.abs(n.clientY-e.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(e,n){let r=queryPos(e,n),g=getClickType(n),y=e.state.selection;return{update(k){k.docChanged&&(r.pos=k.changes.mapPos(r.pos),y=y.map(k.changes))},get(k,$,V){let L=queryPos(e,k),z,j=rangeForClick(e,L.pos,L.bias,g);if(r.pos!=L.pos&&!$){let ae=rangeForClick(e,r.pos,r.bias,g),re=Math.min(ae.from,j.from),oe=Math.max(ae.to,j.to);j=re<j.from?EditorSelection.range(re,oe):EditorSelection.range(oe,re)}return $?y.replaceRange(y.main.extend(j.from,j.to)):V&&g==1&&y.ranges.length>1&&(z=removeRangeAround(y,L.pos))?z:V?y.addRange(j):EditorSelection.create([j])}}}function removeRangeAround(e,n){for(let r=0;r<e.ranges.length;r++){let{from:g,to:y}=e.ranges[r];if(g<=n&&y>=n)return EditorSelection.create(e.ranges.slice(0,r).concat(e.ranges.slice(r+1)),e.mainIndex==r?0:e.mainIndex-(e.mainIndex>r?1:0))}return null}handlers.dragstart=(e,n)=>{let{selection:{main:r}}=e.state;if(n.target.draggable){let y=e.docView.nearest(n.target);if(y&&y.isWidget){let k=y.posAtStart,$=k+y.length;(k>=r.to||$<=r.from)&&(r=EditorSelection.range(k,$))}}let{inputState:g}=e;return g.mouseSelection&&(g.mouseSelection.dragging=!0),g.draggedContent=r,n.dataTransfer&&(n.dataTransfer.setData("Text",textFilter(e.state,clipboardOutputFilter,e.state.sliceDoc(r.from,r.to))),n.dataTransfer.effectAllowed="copyMove"),!1};handlers.dragend=e=>(e.inputState.draggedContent=null,!1);function dropText(e,n,r,g){if(r=textFilter(e.state,clipboardInputFilter,r),!r)return;let y=e.posAtCoords({x:n.clientX,y:n.clientY},!1),{draggedContent:k}=e.inputState,$=g&&k&&dragMovesSelection(e,n)?{from:k.from,to:k.to}:null,V={from:y,insert:r},L=e.state.changes($?[$,V]:V);e.focus(),e.dispatch({changes:L,selection:{anchor:L.mapPos(y,-1),head:L.mapPos(y,1)},userEvent:$?"move.drop":"input.drop"}),e.inputState.draggedContent=null}handlers.drop=(e,n)=>{if(!n.dataTransfer)return!1;if(e.state.readOnly)return!0;let r=n.dataTransfer.files;if(r&&r.length){let g=Array(r.length),y=0,k=()=>{++y==r.length&&dropText(e,n,g.filter($=>$!=null).join(e.state.lineBreak),!1)};for(let $=0;$<r.length;$++){let V=new FileReader;V.onerror=k,V.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(V.result)||(g[$]=V.result),k()},V.readAsText(r[$])}return!0}else{let g=n.dataTransfer.getData("Text");if(g)return dropText(e,n,g,!0),!0}return!1};handlers.paste=(e,n)=>{if(e.state.readOnly)return!0;e.observer.flush();let r=brokenClipboardAPI?null:n.clipboardData;return r?(doPaste(e,r.getData("text/plain")||r.getData("text/uri-list")),!0):(capturePaste(e),!1)};function captureCopy(e,n){let r=e.dom.parentNode;if(!r)return;let g=r.appendChild(document.createElement("textarea"));g.style.cssText="position: fixed; left: -10000px; top: 10px",g.value=n,g.focus(),g.selectionEnd=n.length,g.selectionStart=0,setTimeout(()=>{g.remove(),e.focus()},50)}function copiedRange(e){let n=[],r=[],g=!1;for(let y of e.selection.ranges)y.empty||(n.push(e.sliceDoc(y.from,y.to)),r.push(y));if(!n.length){let y=-1;for(let{from:k}of e.selection.ranges){let $=e.doc.lineAt(k);$.number>y&&(n.push($.text),r.push({from:$.from,to:Math.min(e.doc.length,$.to+1)})),y=$.number}g=!0}return{text:textFilter(e,clipboardOutputFilter,n.join(e.lineBreak)),ranges:r,linewise:g}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(e,n)=>{let{text:r,ranges:g,linewise:y}=copiedRange(e.state);if(!r&&!y)return!1;lastLinewiseCopy=y?r:null,n.type=="cut"&&!e.state.readOnly&&e.dispatch({changes:g,scrollIntoView:!0,userEvent:"delete.cut"});let k=brokenClipboardAPI?null:n.clipboardData;return k?(k.clearData(),k.setData("text/plain",r),!0):(captureCopy(e,r),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(e,n){let r=[];for(let g of e.facet(focusChangeEffect)){let y=g(e,n);y&&r.push(y)}return r?e.update({effects:r,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(e){setTimeout(()=>{let n=e.hasFocus;if(n!=e.inputState.notifiedFocused){let r=focusChangeTransaction(e.state,n);r?e.dispatch(r):e.update([])}},10)}observers.focus=e=>{e.inputState.lastFocusTime=Date.now(),!e.scrollDOM.scrollTop&&(e.inputState.lastScrollTop||e.inputState.lastScrollLeft)&&(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),updateForFocusChange(e)};observers.blur=e=>{e.observer.clearSelectionRange(),updateForFocusChange(e)};observers.compositionstart=observers.compositionupdate=e=>{e.observer.editContext||(e.inputState.compositionFirstChange==null&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))};observers.compositionend=e=>{e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,browser.chrome&&browser.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then(()=>e.observer.flush()):setTimeout(()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])},50))};observers.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()};handlers.beforeinput=(e,n)=>{var r,g;if(n.inputType=="insertReplacementText"&&e.observer.editContext){let k=(r=n.dataTransfer)===null||r===void 0?void 0:r.getData("text/plain"),$=n.getTargetRanges();if(k&&$.length){let V=$[0],L=e.posAtDOM(V.startContainer,V.startOffset),z=e.posAtDOM(V.endContainer,V.endOffset);return applyDOMChangeInner(e,{from:L,to:z,insert:e.state.toText(k)},null),!0}}let y;if(browser.chrome&&browser.android&&(y=PendingKeys.find(k=>k.inputType==n.inputType))&&(e.observer.delayAndroidKey(y.key,y.keyCode),y.key=="Backspace"||y.key=="Delete")){let k=((g=window.visualViewport)===null||g===void 0?void 0:g.height)||0;setTimeout(()=>{var $;((($=window.visualViewport)===null||$===void 0?void 0:$.height)||0)>k+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())},100)}return browser.ios&&n.inputType=="deleteContentForward"&&e.observer.flushSoon(),browser.safari&&n.inputType=="insertText"&&e.inputState.composing>=0&&setTimeout(()=>observers.compositionend(e,n),20),!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack(e){appliedFirefoxHack.has(e)||(appliedFirefoxHack.add(e),e.addEventListener("copy",()=>{}),e.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];let heightChangeFlag=!1;function clearHeightChangeFlag(){heightChangeFlag=!1}class HeightOracle{constructor(n){this.lineWrapping=n,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(n,r){let g=this.doc.lineAt(r).number-this.doc.lineAt(n).number+1;return this.lineWrapping&&(g+=Math.max(0,Math.ceil((r-n-g*this.lineLength*.5)/this.lineLength))),this.lineHeight*g}heightForLine(n){return this.lineWrapping?(1+Math.max(0,Math.ceil((n-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(n){return this.doc=n,this}mustRefreshForWrapping(n){return wrappingWhiteSpace.indexOf(n)>-1!=this.lineWrapping}mustRefreshForHeights(n){let r=!1;for(let g=0;g<n.length;g++){let y=n[g];y<0?g++:this.heightSamples[Math.floor(y*10)]||(r=!0,this.heightSamples[Math.floor(y*10)]=!0)}return r}refresh(n,r,g,y,k,$){let V=wrappingWhiteSpace.indexOf(n)>-1,L=Math.round(r)!=Math.round(this.lineHeight)||this.lineWrapping!=V;if(this.lineWrapping=V,this.lineHeight=r,this.charWidth=g,this.textHeight=y,this.lineLength=k,L){this.heightSamples={};for(let z=0;z<$.length;z++){let j=$[z];j<0?z++:this.heightSamples[Math.floor(j*10)]=!0}}return L}}class MeasuredHeights{constructor(n,r){this.from=n,this.heights=r,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(n,r,g,y,k){this.from=n,this.length=r,this.top=g,this.height=y,this._content=k}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(n){let r=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(n._content)?n._content:[n]);return new BlockInfo(this.from,this.length+n.length,this.top,this.height+n.height,r)}}var QueryType$1=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(n,r,g=2){this.length=n,this.height=r,this.flags=g}get outdated(){return(this.flags&2)>0}set outdated(n){this.flags=(n?2:0)|this.flags&-3}setHeight(n){this.height!=n&&(Math.abs(this.height-n)>Epsilon&&(heightChangeFlag=!0),this.height=n)}replace(n,r,g){return HeightMap.of(g)}decomposeLeft(n,r){r.push(this)}decomposeRight(n,r){r.push(this)}applyChanges(n,r,g,y){let k=this,$=g.doc;for(let V=y.length-1;V>=0;V--){let{fromA:L,toA:z,fromB:j,toB:ae}=y[V],re=k.lineAt(L,QueryType$1.ByPosNoHeight,g.setDoc(r),0,0),oe=re.to>=z?re:k.lineAt(z,QueryType$1.ByPosNoHeight,g,0,0);for(ae+=oe.to-z,z=oe.to;V>0&&re.from<=y[V-1].toA;)L=y[V-1].fromA,j=y[V-1].fromB,V--,L<re.from&&(re=k.lineAt(L,QueryType$1.ByPosNoHeight,g,0,0));j+=re.from-L,L=re.from;let ue=NodeBuilder.build(g.setDoc($),n,j,ae);k=replace(k,k.replace(L,z,ue))}return k.updateHeight(g,0)}static empty(){return new HeightMapText(0,0)}static of(n){if(n.length==1)return n[0];let r=0,g=n.length,y=0,k=0;for(;;)if(r==g)if(y>k*2){let V=n[r-1];V.break?n.splice(--r,1,V.left,null,V.right):n.splice(--r,1,V.left,V.right),g+=1+V.break,y-=V.size}else if(k>y*2){let V=n[g];V.break?n.splice(g,1,V.left,null,V.right):n.splice(g,1,V.left,V.right),g+=2+V.break,k-=V.size}else break;else if(y<k){let V=n[r++];V&&(y+=V.size)}else{let V=n[--g];V&&(k+=V.size)}let $=0;return n[r-1]==null?($=1,r--):n[r]==null&&($=1,g++),new HeightMapBranch(HeightMap.of(n.slice(0,r)),$,HeightMap.of(n.slice(g)))}}function replace(e,n){return e==n?e:(e.constructor!=n.constructor&&(heightChangeFlag=!0),n)}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(n,r,g){super(n,r),this.deco=g}blockAt(n,r,g,y){return new BlockInfo(y,this.length,g,this.height,this.deco||0)}lineAt(n,r,g,y,k){return this.blockAt(0,g,y,k)}forEachLine(n,r,g,y,k,$){n<=k+this.length&&r>=k&&$(this.blockAt(0,g,y,k))}updateHeight(n,r=0,g=!1,y){return y&&y.from<=r&&y.more&&this.setHeight(y.heights[y.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(n,r){super(n,r,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(n,r,g,y){return new BlockInfo(y,this.length,g,this.height,this.breaks)}replace(n,r,g){let y=g[0];return g.length==1&&(y instanceof HeightMapText||y instanceof HeightMapGap&&y.flags&4)&&Math.abs(this.length-y.length)<10?(y instanceof HeightMapGap?y=new HeightMapText(y.length,this.height):y.height=this.height,this.outdated||(y.outdated=!1),y):HeightMap.of(g)}updateHeight(n,r=0,g=!1,y){return y&&y.from<=r&&y.more?this.setHeight(y.heights[y.index++]):(g||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,n.heightForLine(this.length-this.collapsed))+this.breaks*n.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(n){super(n,0)}heightMetrics(n,r){let g=n.doc.lineAt(r).number,y=n.doc.lineAt(r+this.length).number,k=y-g+1,$,V=0;if(n.lineWrapping){let L=Math.min(this.height,n.lineHeight*k);$=L/k,this.length>k+1&&(V=(this.height-L)/(this.length-k-1))}else $=this.height/k;return{firstLine:g,lastLine:y,perLine:$,perChar:V}}blockAt(n,r,g,y){let{firstLine:k,lastLine:$,perLine:V,perChar:L}=this.heightMetrics(r,y);if(r.lineWrapping){let z=y+(n<r.lineHeight?0:Math.round(Math.max(0,Math.min(1,(n-g)/this.height))*this.length)),j=r.doc.lineAt(z),ae=V+j.length*L,re=Math.max(g,n-ae/2);return new BlockInfo(j.from,j.length,re,ae,0)}else{let z=Math.max(0,Math.min($-k,Math.floor((n-g)/V))),{from:j,length:ae}=r.doc.line(k+z);return new BlockInfo(j,ae,g+V*z,V,0)}}lineAt(n,r,g,y,k){if(r==QueryType$1.ByHeight)return this.blockAt(n,g,y,k);if(r==QueryType$1.ByPosNoHeight){let{from:oe,to:ue}=g.doc.lineAt(n);return new BlockInfo(oe,ue-oe,0,0,0)}let{firstLine:$,perLine:V,perChar:L}=this.heightMetrics(g,k),z=g.doc.lineAt(n),j=V+z.length*L,ae=z.number-$,re=y+V*ae+L*(z.from-k-ae);return new BlockInfo(z.from,z.length,Math.max(y,Math.min(re,y+this.height-j)),j,0)}forEachLine(n,r,g,y,k,$){n=Math.max(n,k),r=Math.min(r,k+this.length);let{firstLine:V,perLine:L,perChar:z}=this.heightMetrics(g,k);for(let j=n,ae=y;j<=r;){let re=g.doc.lineAt(j);if(j==n){let ue=re.number-V;ae+=L*ue+z*(n-k-ue)}let oe=L+z*re.length;$(new BlockInfo(re.from,re.length,ae,oe,0)),ae+=oe,j=re.to+1}}replace(n,r,g){let y=this.length-r;if(y>0){let k=g[g.length-1];k instanceof HeightMapGap?g[g.length-1]=new HeightMapGap(k.length+y):g.push(null,new HeightMapGap(y-1))}if(n>0){let k=g[0];k instanceof HeightMapGap?g[0]=new HeightMapGap(n+k.length):g.unshift(new HeightMapGap(n-1),null)}return HeightMap.of(g)}decomposeLeft(n,r){r.push(new HeightMapGap(n-1),null)}decomposeRight(n,r){r.push(null,new HeightMapGap(this.length-n-1))}updateHeight(n,r=0,g=!1,y){let k=r+this.length;if(y&&y.from<=r+this.length&&y.more){let $=[],V=Math.max(r,y.from),L=-1;for(y.from>r&&$.push(new HeightMapGap(y.from-r-1).updateHeight(n,r));V<=k&&y.more;){let j=n.doc.lineAt(V).length;$.length&&$.push(null);let ae=y.heights[y.index++];L==-1?L=ae:Math.abs(ae-L)>=Epsilon&&(L=-2);let re=new HeightMapText(j,ae);re.outdated=!1,$.push(re),V+=j+1}V<=k&&$.push(null,new HeightMapGap(k-V).updateHeight(n,V));let z=HeightMap.of($);return(L<0||Math.abs(z.height-this.height)>=Epsilon||Math.abs(L-this.heightMetrics(n,r).perLine)>=Epsilon)&&(heightChangeFlag=!0),replace(this,z)}else(g||this.outdated)&&(this.setHeight(n.heightForGap(r,r+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(n,r,g){super(n.length+r+g.length,n.height+g.height,r|(n.outdated||g.outdated?2:0)),this.left=n,this.right=g,this.size=n.size+g.size}get break(){return this.flags&1}blockAt(n,r,g,y){let k=g+this.left.height;return n<k?this.left.blockAt(n,r,g,y):this.right.blockAt(n,r,k,y+this.left.length+this.break)}lineAt(n,r,g,y,k){let $=y+this.left.height,V=k+this.left.length+this.break,L=r==QueryType$1.ByHeight?n<$:n<V,z=L?this.left.lineAt(n,r,g,y,k):this.right.lineAt(n,r,g,$,V);if(this.break||(L?z.to<V:z.from>V))return z;let j=r==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return L?z.join(this.right.lineAt(V,j,g,$,V)):this.left.lineAt(V,j,g,y,k).join(z)}forEachLine(n,r,g,y,k,$){let V=y+this.left.height,L=k+this.left.length+this.break;if(this.break)n<L&&this.left.forEachLine(n,r,g,y,k,$),r>=L&&this.right.forEachLine(n,r,g,V,L,$);else{let z=this.lineAt(L,QueryType$1.ByPos,g,y,k);n<z.from&&this.left.forEachLine(n,z.from-1,g,y,k,$),z.to>=n&&z.from<=r&&$(z),r>z.to&&this.right.forEachLine(z.to+1,r,g,V,L,$)}}replace(n,r,g){let y=this.left.length+this.break;if(r<y)return this.balanced(this.left.replace(n,r,g),this.right);if(n>this.left.length)return this.balanced(this.left,this.right.replace(n-y,r-y,g));let k=[];n>0&&this.decomposeLeft(n,k);let $=k.length;for(let V of g)k.push(V);if(n>0&&mergeGaps(k,$-1),r<this.length){let V=k.length;this.decomposeRight(r,k),mergeGaps(k,V)}return HeightMap.of(k)}decomposeLeft(n,r){let g=this.left.length;if(n<=g)return this.left.decomposeLeft(n,r);r.push(this.left),this.break&&(g++,n>=g&&r.push(null)),n>g&&this.right.decomposeLeft(n-g,r)}decomposeRight(n,r){let g=this.left.length,y=g+this.break;if(n>=y)return this.right.decomposeRight(n-y,r);n<g&&this.left.decomposeRight(n,r),this.break&&n<y&&r.push(null),r.push(this.right)}balanced(n,r){return n.size>2*r.size||r.size>2*n.size?HeightMap.of(this.break?[n,null,r]:[n,r]):(this.left=replace(this.left,n),this.right=replace(this.right,r),this.setHeight(n.height+r.height),this.outdated=n.outdated||r.outdated,this.size=n.size+r.size,this.length=n.length+this.break+r.length,this)}updateHeight(n,r=0,g=!1,y){let{left:k,right:$}=this,V=r+k.length+this.break,L=null;return y&&y.from<=r+k.length&&y.more?L=k=k.updateHeight(n,r,g,y):k.updateHeight(n,r,g),y&&y.from<=V+$.length&&y.more?L=$=$.updateHeight(n,V,g,y):$.updateHeight(n,V,g),L?this.balanced(k,$):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(e,n){let r,g;e[n]==null&&(r=e[n-1])instanceof HeightMapGap&&(g=e[n+1])instanceof HeightMapGap&&e.splice(n-1,3,new HeightMapGap(r.length+1+g.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(n,r){this.pos=n,this.oracle=r,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=n}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(n,r){if(this.lineStart>-1){let g=Math.min(r,this.lineEnd),y=this.nodes[this.nodes.length-1];y instanceof HeightMapText?y.length+=g-this.pos:(g>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(g-this.pos,-1)),this.writtenTo=g,r>g&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=r}point(n,r,g){if(n<r||g.heightRelevant){let y=g.widget?g.widget.estimatedHeight:0,k=g.widget?g.widget.lineBreaks:0;y<0&&(y=this.oracle.lineHeight);let $=r-n;g.block?this.addBlock(new HeightMapBlock($,y,g)):($||k||y>=relevantWidgetHeight)&&this.addLineDeco(y,k,$)}else r>n&&this.span(n,r);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:n,to:r}=this.oracle.doc.lineAt(this.pos);this.lineStart=n,this.lineEnd=r,this.writtenTo<n&&((this.writtenTo<n-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,n-1)),this.nodes.push(null)),this.pos>n&&this.nodes.push(new HeightMapText(this.pos-n,-1)),this.writtenTo=this.pos}blankContent(n,r){let g=new HeightMapGap(r-n);return this.oracle.doc.lineAt(n).to==r&&(g.flags|=4),g}ensureLine(){this.enterLine();let n=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(n instanceof HeightMapText)return n;let r=new HeightMapText(0,-1);return this.nodes.push(r),r}addBlock(n){this.enterLine();let r=n.deco;r&&r.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(n),this.writtenTo=this.pos=this.pos+n.length,r&&r.endSide>0&&(this.covering=n)}addLineDeco(n,r,g){let y=this.ensureLine();y.length+=g,y.collapsed+=g,y.widgetHeight=Math.max(y.widgetHeight,n),y.breaks+=r,this.writtenTo=this.pos=this.pos+g}finish(n){let r=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(r instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||r==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let g=n;for(let y of this.nodes)y instanceof HeightMapText&&y.updateHeight(this.oracle,g),g+=y?y.length:1;return this.nodes}static build(n,r,g,y){let k=new NodeBuilder(g,n);return RangeSet.spans(r,g,y,k,0),k.finish(g)}}function heightRelevantDecoChanges(e,n,r){let g=new DecorationComparator2;return RangeSet.compare(e,n,r,g,0),g.changes}class DecorationComparator2{constructor(){this.changes=[]}compareRange(){}comparePoint(n,r,g,y){(n<r||g&&g.heightRelevant||y&&y.heightRelevant)&&addRange(n,r,this.changes,5)}}function visiblePixelRange(e,n){let r=e.getBoundingClientRect(),g=e.ownerDocument,y=g.defaultView||window,k=Math.max(0,r.left),$=Math.min(y.innerWidth,r.right),V=Math.max(0,r.top),L=Math.min(y.innerHeight,r.bottom);for(let z=e.parentNode;z&&z!=g.body;)if(z.nodeType==1){let j=z,ae=window.getComputedStyle(j);if((j.scrollHeight>j.clientHeight||j.scrollWidth>j.clientWidth)&&ae.overflow!="visible"){let re=j.getBoundingClientRect();k=Math.max(k,re.left),$=Math.min($,re.right),V=Math.max(V,re.top),L=Math.min(z==e.parentNode?y.innerHeight:L,re.bottom)}z=ae.position=="absolute"||ae.position=="fixed"?j.offsetParent:j.parentNode}else if(z.nodeType==11)z=z.host;else break;return{left:k-r.left,right:Math.max(k,$)-r.left,top:V-(r.top+n),bottom:Math.max(V,L)-(r.top+n)}}function fullPixelRange(e,n){let r=e.getBoundingClientRect();return{left:0,right:r.right-r.left,top:n,bottom:r.bottom-(r.top+n)}}class LineGap{constructor(n,r,g,y){this.from=n,this.to=r,this.size=g,this.displaySize=y}static same(n,r){if(n.length!=r.length)return!1;for(let g=0;g<n.length;g++){let y=n[g],k=r[g];if(y.from!=k.from||y.to!=k.to||y.size!=k.size)return!1}return!0}draw(n,r){return Decoration.replace({widget:new LineGapWidget(this.displaySize*(r?n.scaleY:n.scaleX),r)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(n,r){super(),this.size=n,this.vertical=r}eq(n){return n.size==this.size&&n.vertical==this.vertical}toDOM(){let n=document.createElement("div");return this.vertical?n.style.height=this.size+"px":(n.style.width=this.size+"px",n.style.height="2px",n.style.display="inline-block"),n}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(n){this.state=n,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let r=n.facet(contentAttributes).some(g=>typeof g!="function"&&g.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(r),this.stateDeco=n.facet(decorations).filter(g=>typeof g!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(n.doc),[new ChangedRange(0,0,0,n.doc.length)]);for(let g=0;g<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());g++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(g=>g.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let n=[this.viewport],{main:r}=this.state.selection;for(let g=0;g<=1;g++){let y=g?r.head:r.anchor;if(!n.some(({from:k,to:$})=>y>=k&&y<=$)){let{from:k,to:$}=this.lineBlockAt(y);n.push(new Viewport(k,$))}}return this.viewports=n.sort((g,y)=>g.from-y.from),this.updateScaler()}updateScaler(){let n=this.scaler;return this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports),n.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,n=>{this.viewportLines.push(scaleBlock(n,this.scaler))})}update(n,r=null){this.state=n.state;let g=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(j=>typeof j!="function");let y=n.changedRanges,k=ChangedRange.extendWithRanges(y,heightRelevantDecoChanges(g,this.stateDeco,n?n.changes:ChangeSet.empty(this.state.doc.length))),$=this.heightMap.height,V=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);clearHeightChangeFlag(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,n.startState.doc,this.heightOracle.setDoc(this.state.doc),k),(this.heightMap.height!=$||heightChangeFlag)&&(n.flags|=2),V?(this.scrollAnchorPos=n.changes.mapPos(V.from,-1),this.scrollAnchorHeight=V.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let L=k.length?this.mapViewport(this.viewport,n.changes):this.viewport;(r&&(r.range.head<L.from||r.range.head>L.to)||!this.viewportIsAppropriate(L))&&(L=this.getViewport(0,r));let z=L.from!=this.viewport.from||L.to!=this.viewport.to;this.viewport=L,n.flags|=this.updateForViewport(),(z||!n.changes.empty||n.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,n.changes))),n.flags|=this.computeVisibleRanges(n.changes),r&&(this.scrollTarget=r),!this.mustEnforceCursorAssoc&&n.selectionSet&&n.view.lineWrapping&&n.state.selection.main.empty&&n.state.selection.main.assoc&&!n.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(n){let r=n.contentDOM,g=window.getComputedStyle(r),y=this.heightOracle,k=g.whiteSpace;this.defaultTextDirection=g.direction=="rtl"?Direction.RTL:Direction.LTR;let $=this.heightOracle.mustRefreshForWrapping(k),V=r.getBoundingClientRect(),L=$||this.mustMeasureContent||this.contentDOMHeight!=V.height;this.contentDOMHeight=V.height,this.mustMeasureContent=!1;let z=0,j=0;if(V.width&&V.height){let{scaleX:Ne,scaleY:$e}=getScale(r,V);(Ne>.005&&Math.abs(this.scaleX-Ne)>.005||$e>.005&&Math.abs(this.scaleY-$e)>.005)&&(this.scaleX=Ne,this.scaleY=$e,z|=16,$=L=!0)}let ae=(parseInt(g.paddingTop)||0)*this.scaleY,re=(parseInt(g.paddingBottom)||0)*this.scaleY;(this.paddingTop!=ae||this.paddingBottom!=re)&&(this.paddingTop=ae,this.paddingBottom=re,z|=18),this.editorWidth!=n.scrollDOM.clientWidth&&(y.lineWrapping&&(L=!0),this.editorWidth=n.scrollDOM.clientWidth,z|=16);let oe=n.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=oe&&(this.scrollAnchorHeight=-1,this.scrollTop=oe),this.scrolledToBottom=isScrolledToBottom(n.scrollDOM);let ue=(this.printing?fullPixelRange:visiblePixelRange)(r,this.paddingTop),le=ue.top-this.pixelViewport.top,de=ue.bottom-this.pixelViewport.bottom;this.pixelViewport=ue;let he=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(he!=this.inView&&(this.inView=he,he&&(L=!0)),!this.inView&&!this.scrollTarget)return 0;let _e=V.width;if((this.contentDOMWidth!=_e||this.editorHeight!=n.scrollDOM.clientHeight)&&(this.contentDOMWidth=V.width,this.editorHeight=n.scrollDOM.clientHeight,z|=16),L){let Ne=n.docView.measureVisibleLineHeights(this.viewport);if(y.mustRefreshForHeights(Ne)&&($=!0),$||y.lineWrapping&&Math.abs(_e-this.contentDOMWidth)>y.charWidth){let{lineHeight:$e,charWidth:xe,textHeight:Ie}=n.docView.measureTextSize();$=$e>0&&y.refresh(k,$e,xe,Ie,_e/xe,Ne),$&&(n.docView.minWidth=0,z|=16)}le>0&&de>0?j=Math.max(le,de):le<0&&de<0&&(j=Math.min(le,de)),clearHeightChangeFlag();for(let $e of this.viewports){let xe=$e.from==this.viewport.from?Ne:n.docView.measureVisibleLineHeights($e);this.heightMap=($?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,n.state.doc.length)]):this.heightMap).updateHeight(y,0,$,new MeasuredHeights($e.from,xe))}heightChangeFlag&&(z|=2)}let Ce=!this.viewportIsAppropriate(this.viewport,j)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return Ce&&(z&2&&(z|=this.updateScaler()),this.viewport=this.getViewport(j,this.scrollTarget),z|=this.updateForViewport()),(z&2||Ce)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps($?[]:this.lineGaps,n)),z|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,n.docView.enforceCursorAssoc()),z}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(n,r){let g=.5-Math.max(-.5,Math.min(.5,n/1e3/2)),y=this.heightMap,k=this.heightOracle,{visibleTop:$,visibleBottom:V}=this,L=new Viewport(y.lineAt($-g*1e3,QueryType$1.ByHeight,k,0,0).from,y.lineAt(V+(1-g)*1e3,QueryType$1.ByHeight,k,0,0).to);if(r){let{head:z}=r.range;if(z<L.from||z>L.to){let j=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),ae=y.lineAt(z,QueryType$1.ByPos,k,0,0),re;r.y=="center"?re=(ae.top+ae.bottom)/2-j/2:r.y=="start"||r.y=="nearest"&&z<L.from?re=ae.top:re=ae.bottom-j,L=new Viewport(y.lineAt(re-1e3/2,QueryType$1.ByHeight,k,0,0).from,y.lineAt(re+j+1e3/2,QueryType$1.ByHeight,k,0,0).to)}}return L}mapViewport(n,r){let g=r.mapPos(n.from,-1),y=r.mapPos(n.to,1);return new Viewport(this.heightMap.lineAt(g,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(y,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:n,to:r},g=0){if(!this.inView)return!0;let{top:y}=this.heightMap.lineAt(n,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:k}=this.heightMap.lineAt(r,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:$,visibleBottom:V}=this;return(n==0||y<=$-Math.max(10,Math.min(-g,250)))&&(r==this.state.doc.length||k>=V+Math.max(10,Math.min(g,250)))&&y>$-2*1e3&&k<V+2*1e3}mapLineGaps(n,r){if(!n.length||r.empty)return n;let g=[];for(let y of n)r.touchesRange(y.from,y.to)||g.push(new LineGap(r.mapPos(y.from),r.mapPos(y.to),y.size,y.displaySize));return g}ensureLineGaps(n,r){let g=this.heightOracle.lineWrapping,y=g?1e4:2e3,k=y>>1,$=y<<1;if(this.defaultTextDirection!=Direction.LTR&&!g)return[];let V=[],L=(j,ae,re,oe)=>{if(ae-j<k)return;let ue=this.state.selection.main,le=[ue.from];ue.empty||le.push(ue.to);for(let he of le)if(he>j&&he<ae){L(j,he-10,re,oe),L(he+10,ae,re,oe);return}let de=find(n,he=>he.from>=re.from&&he.to<=re.to&&Math.abs(he.from-j)<k&&Math.abs(he.to-ae)<k&&!le.some(_e=>he.from<_e&&he.to>_e));if(!de){if(ae<re.to&&r&&g&&r.visibleRanges.some(Ce=>Ce.from<=ae&&Ce.to>=ae)){let Ce=r.moveToLineBoundary(EditorSelection.cursor(ae),!1,!0).head;Ce>j&&(ae=Ce)}let he=this.gapSize(re,j,ae,oe),_e=g||he<2e6?he:2e6;de=new LineGap(j,ae,he,_e)}V.push(de)},z=j=>{if(j.length<$||j.type!=BlockType.Text)return;let ae=lineStructure(j.from,j.to,this.stateDeco);if(ae.total<$)return;let re=this.scrollTarget?this.scrollTarget.range.head:null,oe,ue;if(g){let le=y/this.heightOracle.lineLength*this.heightOracle.lineHeight,de,he;if(re!=null){let _e=findFraction(ae,re),Ce=((this.visibleBottom-this.visibleTop)/2+le)/j.height;de=_e-Ce,he=_e+Ce}else de=(this.visibleTop-j.top-le)/j.height,he=(this.visibleBottom-j.top+le)/j.height;oe=findPosition(ae,de),ue=findPosition(ae,he)}else{let le=ae.total*this.heightOracle.charWidth,de=y*this.heightOracle.charWidth,he=0;if(le>2e6)for(let xe of n)xe.from>=j.from&&xe.from<j.to&&xe.size!=xe.displaySize&&xe.from*this.heightOracle.charWidth+he<this.pixelViewport.left&&(he=xe.size-xe.displaySize);let _e=this.pixelViewport.left+he,Ce=this.pixelViewport.right+he,Ne,$e;if(re!=null){let xe=findFraction(ae,re),Ie=((Ce-_e)/2+de)/le;Ne=xe-Ie,$e=xe+Ie}else Ne=(_e-de)/le,$e=(Ce+de)/le;oe=findPosition(ae,Ne),ue=findPosition(ae,$e)}oe>j.from&&L(j.from,oe,j,ae),ue<j.to&&L(ue,j.to,j,ae)};for(let j of this.viewportLines)Array.isArray(j.type)?j.type.forEach(z):z(j);return V}gapSize(n,r,g,y){let k=findFraction(y,g)-findFraction(y,r);return this.heightOracle.lineWrapping?n.height*k:y.total*this.heightOracle.charWidth*k}updateLineGaps(n){LineGap.same(n,this.lineGaps)||(this.lineGaps=n,this.lineGapDeco=Decoration.set(n.map(r=>r.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(n){let r=this.stateDeco;this.lineGaps.length&&(r=r.concat(this.lineGapDeco));let g=[];RangeSet.spans(r,this.viewport.from,this.viewport.to,{span(k,$){g.push({from:k,to:$})},point(){}},20);let y=0;if(g.length!=this.visibleRanges.length)y=12;else for(let k=0;k<g.length&&!(y&8);k++){let $=this.visibleRanges[k],V=g[k];($.from!=V.from||$.to!=V.to)&&(y|=4,n&&n.mapPos($.from,-1)==V.from&&n.mapPos($.to,1)==V.to||(y|=8))}return this.visibleRanges=g,y}lineBlockAt(n){return n>=this.viewport.from&&n<=this.viewport.to&&this.viewportLines.find(r=>r.from<=n&&r.to>=n)||scaleBlock(this.heightMap.lineAt(n,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(n){return n>=this.viewportLines[0].top&&n<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(r=>r.top<=n&&r.bottom>=n)||scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(n),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(n){let r=this.lineBlockAtHeight(n+8);return r.from>=this.viewport.from||this.viewportLines[0].top-n>200?r:this.viewportLines[0]}elementAtHeight(n){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(n),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(n,r){this.from=n,this.to=r}}function lineStructure(e,n,r){let g=[],y=e,k=0;return RangeSet.spans(r,e,n,{span(){},point($,V){$>y&&(g.push({from:y,to:$}),k+=$-y),y=V}},20),y<n&&(g.push({from:y,to:n}),k+=n-y),{total:k,ranges:g}}function findPosition({total:e,ranges:n},r){if(r<=0)return n[0].from;if(r>=1)return n[n.length-1].to;let g=Math.floor(e*r);for(let y=0;;y++){let{from:k,to:$}=n[y],V=$-k;if(g<=V)return k+g;g-=V}}function findFraction(e,n){let r=0;for(let{from:g,to:y}of e.ranges){if(n<=y){r+=n-g;break}r+=y-g}return r/e.total}function find(e,n){for(let r of e)if(n(r))return r}const IdScaler={toDOM(e){return e},fromDOM(e){return e},scale:1,eq(e){return e==this}};class BigScaler{constructor(n,r,g){let y=0,k=0,$=0;this.viewports=g.map(({from:V,to:L})=>{let z=r.lineAt(V,QueryType$1.ByPos,n,0,0).top,j=r.lineAt(L,QueryType$1.ByPos,n,0,0).bottom;return y+=j-z,{from:V,to:L,top:z,bottom:j,domTop:0,domBottom:0}}),this.scale=(7e6-y)/(r.height-y);for(let V of this.viewports)V.domTop=$+(V.top-k)*this.scale,$=V.domBottom=V.domTop+(V.bottom-V.top),k=V.bottom}toDOM(n){for(let r=0,g=0,y=0;;r++){let k=r<this.viewports.length?this.viewports[r]:null;if(!k||n<k.top)return y+(n-g)*this.scale;if(n<=k.bottom)return k.domTop+(n-k.top);g=k.bottom,y=k.domBottom}}fromDOM(n){for(let r=0,g=0,y=0;;r++){let k=r<this.viewports.length?this.viewports[r]:null;if(!k||n<k.domTop)return g+(n-y)/this.scale;if(n<=k.domBottom)return k.top+(n-k.domTop);g=k.bottom,y=k.domBottom}}eq(n){return n instanceof BigScaler?this.scale==n.scale&&this.viewports.length==n.viewports.length&&this.viewports.every((r,g)=>r.from==n.viewports[g].from&&r.to==n.viewports[g].to):!1}}function scaleBlock(e,n){if(n.scale==1)return e;let r=n.toDOM(e.top),g=n.toDOM(e.bottom);return new BlockInfo(e.from,e.length,r,g-r,Array.isArray(e._content)?e._content.map(y=>scaleBlock(y,n)):e._content)}const theme=Facet.define({combine:e=>e.join(" ")}),darkTheme=Facet.define({combine:e=>e.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(e,n,r){return new StyleModule(n,{finish(g){return/&/.test(g)?g.replace(/&\w*/,y=>{if(y=="&")return e;if(!r||!r[y])throw new RangeError(`Unsupported selector: ${y}`);return r[y]}):e+" "+g}})}const baseTheme$1$3=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(n){this.view=n,this.active=!1,this.editContext=null,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=n.contentDOM,this.observer=new MutationObserver(r=>{for(let g of r)this.queue.push(g);(browser.ie&&browser.ie_version<=11||browser.ios&&n.composing)&&r.some(g=>g.type=="childList"&&g.removedNodes.length||g.type=="characterData"&&g.oldValue.length>g.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&n.constructor.EDIT_CONTEXT!==!1&&!(browser.chrome&&browser.chrome_version<126)&&(this.editContext=new EditContextManager(n),n.state.facet(editable)&&(n.contentDOM.editContext=this.editContext.editContext)),useCharData&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var r;((r=this.view.docView)===null||r===void 0?void 0:r.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(n.scrollDOM)),this.addWindowListeners(this.win=n.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(r=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),r.length>0&&r[r.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(r=>{r.length>0&&r[r.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(n){this.view.inputState.runHandlers("scroll",n),this.intersecting&&this.view.measure()}onScroll(n){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(n)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(n){(n.type=="change"||!n.type)&&!n.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(n){if(this.gapIntersection&&(n.length!=this.gaps.length||this.gaps.some((r,g)=>r!=n[g]))){this.gapIntersection.disconnect();for(let r of n)this.gapIntersection.observe(r);this.gaps=n}}onSelectionChange(n){let r=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:g}=this,y=this.selectionRange;if(g.state.facet(editable)?g.root.activeElement!=this.dom:!hasSelection(this.dom,y))return;let k=y.anchorNode&&g.docView.nearest(y.anchorNode);if(k&&k.ignoreEvent(n)){r||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!g.state.selection.main.empty&&y.focusNode&&isEquivalentPosition(y.focusNode,y.focusOffset,y.anchorNode,y.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:n}=this,r=getSelection(n.root);if(!r)return!1;let g=browser.safari&&n.root.nodeType==11&&n.root.activeElement==this.dom&&safariSelectionRangeHack(this.view,r)||r;if(!g||this.selectionRange.eq(g))return!1;let y=hasSelection(this.dom,g);return y&&!this.selectionChanged&&n.inputState.lastFocusTime>Date.now()-200&&n.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,g)?(this.view.inputState.lastFocusTime=0,n.docView.updateSelection(),!1):(this.selectionRange.setRange(g),y&&(this.selectionChanged=!0),!0)}setSelectionRange(n,r){this.selectionRange.set(n.node,n.offset,r.node,r.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let n=0,r=null;for(let g=this.dom;g;)if(g.nodeType==1)!r&&n<this.scrollTargets.length&&this.scrollTargets[n]==g?n++:r||(r=this.scrollTargets.slice(0,n)),r&&r.push(g),g=g.assignedSlot||g.parentNode;else if(g.nodeType==11)g=g.host;else break;if(n<this.scrollTargets.length&&!r&&(r=this.scrollTargets.slice(0,n)),r){for(let g of this.scrollTargets)g.removeEventListener("scroll",this.onScroll);for(let g of this.scrollTargets=r)g.addEventListener("scroll",this.onScroll)}}ignore(n){if(!this.active)return n();try{return this.stop(),n()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(n,r){var g;if(!this.delayedAndroidKey){let y=()=>{let k=this.delayedAndroidKey;k&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=k.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&k.force&&dispatchKey(this.dom,k.key,k.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(y)}(!this.delayedAndroidKey||n=="Enter")&&(this.delayedAndroidKey={key:n,keyCode:r,force:this.lastChange<Date.now()-50||!!(!((g=this.delayedAndroidKey)===null||g===void 0)&&g.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let n of this.observer.takeRecords())this.queue.push(n);return this.queue}processRecords(){let n=this.pendingRecords();n.length&&(this.queue=[]);let r=-1,g=-1,y=!1;for(let k of n){let $=this.readMutation(k);$&&($.typeOver&&(y=!0),r==-1?{from:r,to:g}=$:(r=Math.min($.from,r),g=Math.max($.to,g)))}return{from:r,to:g,typeOver:y}}readChange(){let{from:n,to:r,typeOver:g}=this.processRecords(),y=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(n<0&&!y)return null;n>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let k=new DOMChange(this.view,n,r,g);return this.view.docView.domChanged={newSel:k.newSel?k.newSel.main:null},k}flush(n=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;n&&this.readSelectionRange();let r=this.readChange();if(!r)return this.view.requestMeasure(),!1;let g=this.view.state,y=applyDOMChange(this.view,r);return this.view.state==g&&(r.domChanged||r.newSel&&!r.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),y}readMutation(n){let r=this.view.docView.nearest(n.target);if(!r||r.ignoreMutation(n))return null;if(r.markDirty(n.type=="attributes"),n.type=="attributes"&&(r.flags|=4),n.type=="childList"){let g=findChild(r,n.previousSibling||n.target.previousSibling,-1),y=findChild(r,n.nextSibling||n.target.nextSibling,1);return{from:g?r.posAfter(g):r.posAtStart,to:y?r.posBefore(y):r.posAtEnd,typeOver:!1}}else return n.type=="characterData"?{from:r.posAtStart,to:r.posAtEnd,typeOver:n.target.nodeValue==n.oldValue}:null}setWindow(n){n!=this.win&&(this.removeWindowListeners(this.win),this.win=n,this.addWindowListeners(this.win))}addWindowListeners(n){n.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):n.addEventListener("beforeprint",this.onPrint),n.addEventListener("scroll",this.onScroll),n.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(n){n.removeEventListener("scroll",this.onScroll),n.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):n.removeEventListener("beforeprint",this.onPrint),n.document.removeEventListener("selectionchange",this.onSelectionChange)}update(n){this.editContext&&(this.editContext.update(n),n.startState.facet(editable)!=n.state.facet(editable)&&(n.view.contentDOM.editContext=n.state.facet(editable)?this.editContext.editContext:null))}destroy(){var n,r,g;this.stop(),(n=this.intersection)===null||n===void 0||n.disconnect(),(r=this.gapIntersection)===null||r===void 0||r.disconnect(),(g=this.resizeScroll)===null||g===void 0||g.disconnect();for(let y of this.scrollTargets)y.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function findChild(e,n,r){for(;n;){let g=ContentView.get(n);if(g&&g.parent==e)return g;let y=n.parentNode;n=y!=e.dom?y:r>0?n.nextSibling:n.previousSibling}return null}function buildSelectionRangeFromRange(e,n){let r=n.startContainer,g=n.startOffset,y=n.endContainer,k=n.endOffset,$=e.docView.domAtPos(e.state.selection.main.anchor);return isEquivalentPosition($.node,$.offset,y,k)&&([r,g,y,k]=[y,k,r,g]),{anchorNode:r,anchorOffset:g,focusNode:y,focusOffset:k}}function safariSelectionRangeHack(e,n){if(n.getComposedRanges){let y=n.getComposedRanges(e.root)[0];if(y)return buildSelectionRangeFromRange(e,y)}let r=null;function g(y){y.preventDefault(),y.stopImmediatePropagation(),r=y.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",g,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",g,!0),r?buildSelectionRangeFromRange(e,r):null}class EditContextManager{constructor(n){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(n.state);let r=this.editContext=new window.EditContext({text:n.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,n.state.selection.main.anchor))),selectionEnd:this.toContextPos(n.state.selection.main.head)});this.handlers.textupdate=g=>{let{anchor:y}=n.state.selection.main,k=this.toEditorPos(g.updateRangeStart),$=this.toEditorPos(g.updateRangeEnd);n.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:g.updateRangeStart,editorBase:k,drifted:!1});let V={from:k,to:$,insert:Text.of(g.text.split(`
`))};if(V.from==this.from&&y<this.from?V.from=y:V.to==this.to&&y>this.to&&(V.to=y),!(V.from==V.to&&!V.insert.length)){if(this.pendingContextChange=V,!n.state.readOnly){let L=this.to-this.from+(V.to-V.from+V.insert.length);applyDOMChangeInner(n,V,EditorSelection.single(this.toEditorPos(g.selectionStart,L),this.toEditorPos(g.selectionEnd,L)))}this.pendingContextChange&&(this.revertPending(n.state),this.setSelection(n.state))}},this.handlers.characterboundsupdate=g=>{let y=[],k=null;for(let $=this.toEditorPos(g.rangeStart),V=this.toEditorPos(g.rangeEnd);$<V;$++){let L=n.coordsForChar($);k=L&&new DOMRect(L.left,L.top,L.right-L.left,L.bottom-L.top)||k||new DOMRect,y.push(k)}r.updateCharacterBounds(g.rangeStart,y)},this.handlers.textformatupdate=g=>{let y=[];for(let k of g.getTextFormats()){let $=k.underlineStyle,V=k.underlineThickness;if($!="None"&&V!="None"){let L=this.toEditorPos(k.rangeStart),z=this.toEditorPos(k.rangeEnd);if(L<z){let j=`text-decoration: underline ${$=="Dashed"?"dashed ":$=="Squiggle"?"wavy ":""}${V=="Thin"?1:2}px`;y.push(Decoration.mark({attributes:{style:j}}).range(L,z))}}}n.dispatch({effects:setEditContextFormatting.of(Decoration.set(y))})},this.handlers.compositionstart=()=>{n.inputState.composing<0&&(n.inputState.composing=0,n.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(n.inputState.composing=-1,n.inputState.compositionFirstChange=null,this.composing){let{drifted:g}=this.composing;this.composing=null,g&&this.reset(n.state)}};for(let g in this.handlers)r.addEventListener(g,this.handlers[g]);this.measureReq={read:g=>{this.editContext.updateControlBounds(g.contentDOM.getBoundingClientRect());let y=getSelection(g.root);y&&y.rangeCount&&this.editContext.updateSelectionBounds(y.getRangeAt(0).getBoundingClientRect())}}}applyEdits(n){let r=0,g=!1,y=this.pendingContextChange;return n.changes.iterChanges((k,$,V,L,z)=>{if(g)return;let j=z.length-($-k);if(y&&$>=y.to)if(y.from==k&&y.to==$&&y.insert.eq(z)){y=this.pendingContextChange=null,r+=j,this.to+=j;return}else y=null,this.revertPending(n.state);if(k+=r,$+=r,$<=this.from)this.from+=j,this.to+=j;else if(k<this.to){if(k<this.from||$>this.to||this.to-this.from+z.length>3e4){g=!0;return}this.editContext.updateText(this.toContextPos(k),this.toContextPos($),z.toString()),this.to+=j}r+=j}),y&&!g&&this.revertPending(n.state),!g}update(n){let r=this.pendingContextChange;this.composing&&(this.composing.drifted||n.transactions.some(g=>!g.isUserEvent("input.type")&&g.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=n.changes.mapPos(this.composing.editorBase)):!this.applyEdits(n)||!this.rangeIsValid(n.state)?(this.pendingContextChange=null,this.reset(n.state)):(n.docChanged||n.selectionSet||r)&&this.setSelection(n.state),(n.geometryChanged||n.docChanged||n.selectionSet)&&n.view.requestMeasure(this.measureReq)}resetRange(n){let{head:r}=n.selection.main;this.from=Math.max(0,r-1e4),this.to=Math.min(n.doc.length,r+1e4)}reset(n){this.resetRange(n),this.editContext.updateText(0,this.editContext.text.length,n.doc.sliceString(this.from,this.to)),this.setSelection(n)}revertPending(n){let r=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(r.from),this.toContextPos(r.from+r.insert.length),n.doc.sliceString(r.from,r.to))}setSelection(n){let{main:r}=n.selection,g=this.toContextPos(Math.max(this.from,Math.min(this.to,r.anchor))),y=this.toContextPos(r.head);(this.editContext.selectionStart!=g||this.editContext.selectionEnd!=y)&&this.editContext.updateSelection(g,y)}rangeIsValid(n){let{head:r}=n.selection.main;return!(this.from>0&&r-this.from<500||this.to<n.doc.length&&this.to-r<500||this.to-this.from>1e4*3)}toEditorPos(n,r=this.to-this.from){n=Math.min(n,r);let g=this.composing;return g&&g.drifted?g.editorBase+(n-g.contextBase):n+this.from}toContextPos(n){let r=this.composing;return r&&r.drifted?r.contextBase+(n-r.editorBase):n-this.from}destroy(){for(let n in this.handlers)this.editContext.removeEventListener(n,this.handlers[n])}}class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(n={}){var r;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),n.parent&&n.parent.appendChild(this.dom);let{dispatch:g}=n;this.dispatchTransactions=n.dispatchTransactions||g&&(y=>y.forEach(k=>g(k,this)))||(y=>this.update(y)),this.dispatch=this.dispatch.bind(this),this._root=n.root||getRoot(n.parent)||document,this.viewState=new ViewState(n.state||EditorState.create(n)),n.scrollTo&&n.scrollTo.is(scrollIntoView$1)&&(this.viewState.scrollTarget=n.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(y=>new PluginInstance(y));for(let y of this.plugins)y.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((r=document.fonts)===null||r===void 0)&&r.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...n){let r=n.length==1&&n[0]instanceof Transaction?n:n.length==1&&Array.isArray(n[0])?n[0]:[this.state.update(...n)];this.dispatchTransactions(r,this)}update(n){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let r=!1,g=!1,y,k=this.state;for(let re of n){if(re.startState!=k)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");k=re.state}if(this.destroyed){this.viewState.state=k;return}let $=this.hasFocus,V=0,L=null;n.some(re=>re.annotation(isFocusChange))?(this.inputState.notifiedFocused=$,V=1):$!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=$,L=focusChangeTransaction(k,$),L||(V=1));let z=this.observer.delayedAndroidKey,j=null;if(z?(this.observer.clearDelayedAndroidKey(),j=this.observer.readChange(),(j&&!this.state.doc.eq(k.doc)||!this.state.selection.eq(k.selection))&&(j=null)):this.observer.clear(),k.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(k);y=ViewUpdate.create(this,k,n),y.flags|=V;let ae=this.viewState.scrollTarget;try{this.updateState=2;for(let re of n){if(ae&&(ae=ae.map(re.changes)),re.scrollIntoView){let{main:oe}=re.state.selection;ae=new ScrollTarget(oe.empty?oe:EditorSelection.cursor(oe.head,oe.head>oe.anchor?-1:1))}for(let oe of re.effects)oe.is(scrollIntoView$1)&&(ae=oe.value.clip(this.state))}this.viewState.update(y,ae),this.bidiCache=CachedOrder.update(this.bidiCache,y.changes),y.empty||(this.updatePlugins(y),this.inputState.update(y)),r=this.docView.update(y),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),g=this.updateAttrs(),this.showAnnouncements(n),this.docView.updateSelection(r,n.some(re=>re.isUserEvent("select.pointer")))}finally{this.updateState=0}if(y.startState.facet(theme)!=y.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(r||g||ae||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),r&&this.docViewUpdate(),!y.empty)for(let re of this.state.facet(updateListener))try{re(y)}catch(oe){logException(this.state,oe,"update listener")}(L||j)&&Promise.resolve().then(()=>{L&&this.state==L.startState&&this.dispatch(L),j&&!applyDOMChange(this,j)&&z.force&&dispatchKey(this.contentDOM,z.key,z.keyCode)})}setState(n){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=n;return}this.updateState=2;let r=this.hasFocus;try{for(let g of this.plugins)g.destroy(this);this.viewState=new ViewState(n),this.plugins=n.facet(viewPlugin).map(g=>new PluginInstance(g)),this.pluginMap.clear();for(let g of this.plugins)g.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}r&&this.focus(),this.requestMeasure()}updatePlugins(n){let r=n.startState.facet(viewPlugin),g=n.state.facet(viewPlugin);if(r!=g){let y=[];for(let k of g){let $=r.indexOf(k);if($<0)y.push(new PluginInstance(k));else{let V=this.plugins[$];V.mustUpdate=n,y.push(V)}}for(let k of this.plugins)k.mustUpdate!=n&&k.destroy(this);this.plugins=y,this.pluginMap.clear()}else for(let y of this.plugins)y.mustUpdate=n;for(let y=0;y<this.plugins.length;y++)this.plugins[y].update(this);r!=g&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let n of this.plugins){let r=n.value;if(r&&r.docViewUpdate)try{r.docViewUpdate(this)}catch(g){logException(this.state,g,"doc view update listener")}}}measure(n=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,n&&this.observer.forceFlush();let r=null,g=this.scrollDOM,y=g.scrollTop*this.scaleY,{scrollAnchorPos:k,scrollAnchorHeight:$}=this.viewState;Math.abs(y-this.viewState.scrollTop)>1&&($=-1),this.viewState.scrollAnchorHeight=-1;try{for(let V=0;;V++){if($<0)if(isScrolledToBottom(g))k=-1,$=this.viewState.heightMap.height;else{let oe=this.viewState.scrollAnchorAt(y);k=oe.from,$=oe.top}this.updateState=1;let L=this.viewState.measure(this);if(!L&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(V>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let z=[];L&4||([this.measureRequests,z]=[z,this.measureRequests]);let j=z.map(oe=>{try{return oe.read(this)}catch(ue){return logException(this.state,ue),BadMeasure}}),ae=ViewUpdate.create(this,this.state,[]),re=!1;ae.flags|=L,r?r.flags|=L:r=ae,this.updateState=2,ae.empty||(this.updatePlugins(ae),this.inputState.update(ae),this.updateAttrs(),re=this.docView.update(ae),re&&this.docViewUpdate());for(let oe=0;oe<z.length;oe++)if(j[oe]!=BadMeasure)try{let ue=z[oe];ue.write&&ue.write(j[oe],this)}catch(ue){logException(this.state,ue)}if(re&&this.docView.updateSelection(!0),!ae.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,$=-1;continue}else{let ue=(k<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(k).top)-$;if(ue>1||ue<-1){y=y+ue,g.scrollTop=y/this.scaleY,$=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(r&&!r.empty)for(let V of this.state.facet(updateListener))V(r)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let n=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),r={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(r["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,r);let g=this.observer.ignore(()=>{let y=updateAttrs(this.contentDOM,this.contentAttrs,r),k=updateAttrs(this.dom,this.editorAttrs,n);return y||k});return this.editorAttrs=n,this.contentAttrs=r,g}showAnnouncements(n){let r=!0;for(let g of n)for(let y of g.effects)if(y.is(EditorView.announce)){r&&(this.announceDOM.textContent=""),r=!1;let k=this.announceDOM.appendChild(document.createElement("div"));k.textContent=y.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let n=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$3).reverse(),n?{nonce:n}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(n){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),n){if(this.measureRequests.indexOf(n)>-1)return;if(n.key!=null){for(let r=0;r<this.measureRequests.length;r++)if(this.measureRequests[r].key===n.key){this.measureRequests[r]=n;return}}this.measureRequests.push(n)}}plugin(n){let r=this.pluginMap.get(n);return(r===void 0||r&&r.spec!=n)&&this.pluginMap.set(n,r=this.plugins.find(g=>g.spec==n)||null),r&&r.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(n){return this.readMeasured(),this.viewState.elementAtHeight(n)}lineBlockAtHeight(n){return this.readMeasured(),this.viewState.lineBlockAtHeight(n)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(n){return this.viewState.lineBlockAt(n)}get contentHeight(){return this.viewState.contentHeight}moveByChar(n,r,g){return skipAtoms(this,n,moveByChar(this,n,r,g))}moveByGroup(n,r){return skipAtoms(this,n,moveByChar(this,n,r,g=>byGroup(this,n.head,g)))}visualLineSide(n,r){let g=this.bidiSpans(n),y=this.textDirectionAt(n.from),k=g[r?g.length-1:0];return EditorSelection.cursor(k.side(r,y)+n.from,k.forward(!r,y)?1:-1)}moveToLineBoundary(n,r,g=!0){return moveToLineBoundary(this,n,r,g)}moveVertically(n,r,g){return skipAtoms(this,n,moveVertically(this,n,r,g))}domAtPos(n){return this.docView.domAtPos(n)}posAtDOM(n,r=0){return this.docView.posFromDOM(n,r)}posAtCoords(n,r=!0){return this.readMeasured(),posAtCoords(this,n,r)}coordsAtPos(n,r=1){this.readMeasured();let g=this.docView.coordsAt(n,r);if(!g||g.left==g.right)return g;let y=this.state.doc.lineAt(n),k=this.bidiSpans(y),$=k[BidiSpan.find(k,n-y.from,-1,r)];return flattenRect(g,$.dir==Direction.LTR==r>0)}coordsForChar(n){return this.readMeasured(),this.docView.coordsForChar(n)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(n){return!this.state.facet(perLineTextDirection)||n<this.viewport.from||n>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(n))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(n){if(n.length>MaxBidiLine)return trivialOrder(n.length);let r=this.textDirectionAt(n.from),g;for(let k of this.bidiCache)if(k.from==n.from&&k.dir==r&&(k.fresh||isolatesEq(k.isolates,g=getIsolatedRanges(this,n))))return k.order;g||(g=getIsolatedRanges(this,n));let y=computeOrder(n.text,r,g);return this.bidiCache.push(new CachedOrder(n.from,n.to,r,g,!0,y)),y}get hasFocus(){var n;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((n=this.inputState)===null||n===void 0?void 0:n.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(n){this._root!=n&&(this._root=n,this.observer.setWindow((n.nodeType==9?n:n.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let n of this.plugins)n.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(n,r={}){return scrollIntoView$1.of(new ScrollTarget(typeof n=="number"?EditorSelection.cursor(n):n,r.y,r.x,r.yMargin,r.xMargin))}scrollSnapshot(){let{scrollTop:n,scrollLeft:r}=this.scrollDOM,g=this.viewState.scrollAnchorAt(n);return scrollIntoView$1.of(new ScrollTarget(EditorSelection.cursor(g.from),"start","start",g.top-n,r,!0))}setTabFocusMode(n){n==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof n=="boolean"?this.inputState.tabFocusMode=n?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+n)}static domEventHandlers(n){return ViewPlugin.define(()=>({}),{eventHandlers:n})}static domEventObservers(n){return ViewPlugin.define(()=>({}),{eventObservers:n})}static theme(n,r){let g=StyleModule.newName(),y=[theme.of(g),styleModule.of(buildTheme(`.${g}`,n))];return r&&r.dark&&y.push(darkTheme.of(!0)),y}static baseTheme(n){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,n,lightDarkIDs)))}static findFromDOM(n){var r;let g=n.querySelector(".cm-content"),y=g&&ContentView.get(g)||ContentView.get(n);return((r=y?.rootView)===null||r===void 0?void 0:r.view)||null}}EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler$1;EditorView.clipboardInputFilter=clipboardInputFilter;EditorView.clipboardOutputFilter=clipboardOutputFilter;EditorView.scrollHandler=scrollHandler;EditorView.focusChangeEffect=focusChangeEffect;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.outerDecorations=outerDecorations;EditorView.atomicRanges=atomicRanges;EditorView.bidiIsolatedRanges=bidiIsolatedRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.cspNonce=Facet.define({combine:e=>e.length?e[0]:""});EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(n,r,g,y,k,$){this.from=n,this.to=r,this.dir=g,this.isolates=y,this.fresh=k,this.order=$}static update(n,r){if(r.empty&&!n.some(k=>k.fresh))return n;let g=[],y=n.length?n[n.length-1].dir:Direction.LTR;for(let k=Math.max(0,n.length-10);k<n.length;k++){let $=n[k];$.dir==y&&!r.touchesRange($.from,$.to)&&g.push(new CachedOrder(r.mapPos($.from,1),r.mapPos($.to,-1),$.dir,$.isolates,!1,$.order))}return g}}function attrsFromFacet(e,n,r){for(let g=e.state.facet(n),y=g.length-1;y>=0;y--){let k=g[y],$=typeof k=="function"?k(e):k;$&&combineAttrs($,r)}return r}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(e,n){const r=e.split(/-(?!$)/);let g=r[r.length-1];g=="Space"&&(g=" ");let y,k,$,V;for(let L=0;L<r.length-1;++L){const z=r[L];if(/^(cmd|meta|m)$/i.test(z))V=!0;else if(/^a(lt)?$/i.test(z))y=!0;else if(/^(c|ctrl|control)$/i.test(z))k=!0;else if(/^s(hift)?$/i.test(z))$=!0;else if(/^mod$/i.test(z))n=="mac"?V=!0:k=!0;else throw new Error("Unrecognized modifier name: "+z)}return y&&(g="Alt-"+g),k&&(g="Ctrl-"+g),V&&(g="Meta-"+g),$&&(g="Shift-"+g),g}function modifiers(e,n,r){return n.altKey&&(e="Alt-"+e),n.ctrlKey&&(e="Ctrl-"+e),n.metaKey&&(e="Meta-"+e),r!==!1&&n.shiftKey&&(e="Shift-"+e),e}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(e,n){return runHandlers(getKeymap(n.state),e,n,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(e){let n=e.facet(keymap),r=Keymaps.get(n);return r||Keymaps.set(n,r=buildKeymap(n.reduce((g,y)=>g.concat(y),[]))),r}function runScopeHandlers(e,n,r){return runHandlers(getKeymap(e.state),n,e,r)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(e,n=currentPlatform){let r=Object.create(null),g=Object.create(null),y=($,V)=>{let L=g[$];if(L==null)g[$]=V;else if(L!=V)throw new Error("Key binding "+$+" is used both as a regular binding and as a multi-stroke prefix")},k=($,V,L,z,j)=>{var ae,re;let oe=r[$]||(r[$]=Object.create(null)),ue=V.split(/ (?!$)/).map(he=>normalizeKeyName(he,n));for(let he=1;he<ue.length;he++){let _e=ue.slice(0,he).join(" ");y(_e,!0),oe[_e]||(oe[_e]={preventDefault:!0,stopPropagation:!1,run:[Ce=>{let Ne=storedPrefix={view:Ce,prefix:_e,scope:$};return setTimeout(()=>{storedPrefix==Ne&&(storedPrefix=null)},PrefixTimeout),!0}]})}let le=ue.join(" ");y(le,!1);let de=oe[le]||(oe[le]={preventDefault:!1,stopPropagation:!1,run:((re=(ae=oe._any)===null||ae===void 0?void 0:ae.run)===null||re===void 0?void 0:re.slice())||[]});L&&de.run.push(L),z&&(de.preventDefault=!0),j&&(de.stopPropagation=!0)};for(let $ of e){let V=$.scope?$.scope.split(" "):["editor"];if($.any)for(let z of V){let j=r[z]||(r[z]=Object.create(null));j._any||(j._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:ae}=$;for(let re in j)j[re].run.push(oe=>ae(oe,currentKeyEvent))}let L=$[n]||$.key;if(L)for(let z of V)k(z,L,$.run,$.preventDefault,$.stopPropagation),$.shift&&k(z,"Shift-"+L,$.shift,$.preventDefault,$.stopPropagation)}return r}let currentKeyEvent=null;function runHandlers(e,n,r,g){currentKeyEvent=n;let y=keyName(n),k=codePointAt$1(y,0),$=codePointSize(k)==y.length&&y!=" ",V="",L=!1,z=!1,j=!1;storedPrefix&&storedPrefix.view==r&&storedPrefix.scope==g&&(V=storedPrefix.prefix+" ",modifierCodes.indexOf(n.keyCode)<0&&(z=!0,storedPrefix=null));let ae=new Set,re=de=>{if(de){for(let he of de.run)if(!ae.has(he)&&(ae.add(he),he(r)))return de.stopPropagation&&(j=!0),!0;de.preventDefault&&(de.stopPropagation&&(j=!0),z=!0)}return!1},oe=e[g],ue,le;return oe&&(re(oe[V+modifiers(y,n,!$)])?L=!0:$&&(n.altKey||n.metaKey||n.ctrlKey)&&!(browser.windows&&n.ctrlKey&&n.altKey)&&(ue=base[n.keyCode])&&ue!=y?(re(oe[V+modifiers(ue,n,!0)])||n.shiftKey&&(le=shift[n.keyCode])!=y&&le!=ue&&re(oe[V+modifiers(le,n,!1)]))&&(L=!0):$&&n.shiftKey&&re(oe[V+modifiers(y,n,!0)])&&(L=!0),!L&&re(oe._any)&&(L=!0)),z&&(L=!0),L&&j&&n.stopPropagation(),currentKeyEvent=null,L}class RectangleMarker{constructor(n,r,g,y,k){this.className=n,this.left=r,this.top=g,this.width=y,this.height=k}draw(){let n=document.createElement("div");return n.className=this.className,this.adjust(n),n}update(n,r){return r.className!=this.className?!1:(this.adjust(n),!0)}adjust(n){n.style.left=this.left+"px",n.style.top=this.top+"px",this.width!=null&&(n.style.width=this.width+"px"),n.style.height=this.height+"px"}eq(n){return this.left==n.left&&this.top==n.top&&this.width==n.width&&this.height==n.height&&this.className==n.className}static forRange(n,r,g){if(g.empty){let y=n.coordsAtPos(g.head,g.assoc||1);if(!y)return[];let k=getBase(n);return[new RectangleMarker(r,y.left-k.left,y.top-k.top,null,y.bottom-y.top)]}else return rectanglesForRange(n,r,g)}}function getBase(e){let n=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==Direction.LTR?n.left:n.right-e.scrollDOM.clientWidth*e.scaleX)-e.scrollDOM.scrollLeft*e.scaleX,top:n.top-e.scrollDOM.scrollTop*e.scaleY}}function wrappedLine(e,n,r,g){let y=e.coordsAtPos(n,r*2);if(!y)return g;let k=e.dom.getBoundingClientRect(),$=(y.top+y.bottom)/2,V=e.posAtCoords({x:k.left+1,y:$}),L=e.posAtCoords({x:k.right-1,y:$});return V==null||L==null?g:{from:Math.max(g.from,Math.min(V,L)),to:Math.min(g.to,Math.max(V,L))}}function rectanglesForRange(e,n,r){if(r.to<=e.viewport.from||r.from>=e.viewport.to)return[];let g=Math.max(r.from,e.viewport.from),y=Math.min(r.to,e.viewport.to),k=e.textDirection==Direction.LTR,$=e.contentDOM,V=$.getBoundingClientRect(),L=getBase(e),z=$.querySelector(".cm-line"),j=z&&window.getComputedStyle(z),ae=V.left+(j?parseInt(j.paddingLeft)+Math.min(0,parseInt(j.textIndent)):0),re=V.right-(j?parseInt(j.paddingRight):0),oe=blockAt(e,g),ue=blockAt(e,y),le=oe.type==BlockType.Text?oe:null,de=ue.type==BlockType.Text?ue:null;if(le&&(e.lineWrapping||oe.widgetLineBreaks)&&(le=wrappedLine(e,g,1,le)),de&&(e.lineWrapping||ue.widgetLineBreaks)&&(de=wrappedLine(e,y,-1,de)),le&&de&&le.from==de.from&&le.to==de.to)return _e(Ce(r.from,r.to,le));{let $e=le?Ce(r.from,null,le):Ne(oe,!1),xe=de?Ce(null,r.to,de):Ne(ue,!0),Ie=[];return(le||oe).to<(de||ue).from-(le&&de?1:0)||oe.widgetLineBreaks>1&&$e.bottom+e.defaultLineHeight/2<xe.top?Ie.push(he(ae,$e.bottom,re,xe.top)):$e.bottom<xe.top&&e.elementAtHeight(($e.bottom+xe.top)/2).type==BlockType.Text&&($e.bottom=xe.top=($e.bottom+xe.top)/2),_e($e).concat(Ie).concat(_e(xe))}function he($e,xe,Ie,ze){return new RectangleMarker(n,$e-L.left,xe-L.top,Ie-$e,ze-xe)}function _e({top:$e,bottom:xe,horizontal:Ie}){let ze=[];for(let qe=0;qe<Ie.length;qe+=2)ze.push(he(Ie[qe],$e,Ie[qe+1],xe));return ze}function Ce($e,xe,Ie){let ze=1e9,qe=-1e9,Et=[];function _n(hn,Vn,Mn,$n,Nn){let kn=e.coordsAtPos(hn,hn==Ie.to?-2:2),jn=e.coordsAtPos(Mn,Mn==Ie.from?2:-2);!kn||!jn||(ze=Math.min(kn.top,jn.top,ze),qe=Math.max(kn.bottom,jn.bottom,qe),Nn==Direction.LTR?Et.push(k&&Vn?ae:kn.left,k&&$n?re:jn.right):Et.push(!k&&$n?ae:jn.left,!k&&Vn?re:kn.right))}let Dt=$e??Ie.from,Sn=xe??Ie.to;for(let hn of e.visibleRanges)if(hn.to>Dt&&hn.from<Sn)for(let Vn=Math.max(hn.from,Dt),Mn=Math.min(hn.to,Sn);;){let $n=e.state.doc.lineAt(Vn);for(let Nn of e.bidiSpans($n)){let kn=Nn.from+$n.from,jn=Nn.to+$n.from;if(kn>=Mn)break;jn>Vn&&_n(Math.max(kn,Vn),$e==null&&kn<=Dt,Math.min(jn,Mn),xe==null&&jn>=Sn,Nn.dir)}if(Vn=$n.to+1,Vn>=Mn)break}return Et.length==0&&_n(Dt,$e==null,Sn,xe==null,e.textDirection),{top:ze,bottom:qe,horizontal:Et}}function Ne($e,xe){let Ie=V.top+(xe?$e.top:$e.bottom);return{top:Ie,bottom:Ie,horizontal:[]}}}function sameMarker(e,n){return e.constructor==n.constructor&&e.eq(n)}class LayerView{constructor(n,r){this.view=n,this.layer=r,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=n.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),r.above&&this.dom.classList.add("cm-layer-above"),r.class&&this.dom.classList.add(r.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(n.state),n.requestMeasure(this.measureReq),r.mount&&r.mount(this.dom,n)}update(n){n.startState.facet(layerOrder)!=n.state.facet(layerOrder)&&this.setOrder(n.state),(this.layer.update(n,this.dom)||n.geometryChanged)&&(this.scale(),n.view.requestMeasure(this.measureReq))}docViewUpdate(n){this.layer.updateOnDocViewUpdate!==!1&&n.requestMeasure(this.measureReq)}setOrder(n){let r=0,g=n.facet(layerOrder);for(;r<g.length&&g[r]!=this.layer;)r++;this.dom.style.zIndex=String((this.layer.above?150:-1)-r)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:n,scaleY:r}=this.view;(n!=this.scaleX||r!=this.scaleY)&&(this.scaleX=n,this.scaleY=r,this.dom.style.transform=`scale(${1/n}, ${1/r})`)}draw(n){if(n.length!=this.drawn.length||n.some((r,g)=>!sameMarker(r,this.drawn[g]))){let r=this.dom.firstChild,g=0;for(let y of n)y.update&&r&&y.constructor&&this.drawn[g].constructor&&y.update(r,this.drawn[g])?(r=r.nextSibling,g++):this.dom.insertBefore(y.draw(),r);for(;r;){let y=r.nextSibling;r.remove(),r=y}this.drawn=n}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(e){return[ViewPlugin.define(n=>new LayerView(n,e)),layerOrder.of(e)]}const CanHidePrimary=!(browser.ios&&browser.webkit&&browser.webkit_version<534),selectionConfig=Facet.define({combine(e){return combineConfig(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(n,r)=>Math.min(n,r),drawRangeCursor:(n,r)=>n||r})}});function drawSelection(e={}){return[selectionConfig.of(e),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(e){return e.startState.facet(selectionConfig)!=e.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(e){let{state:n}=e,r=n.facet(selectionConfig),g=[];for(let y of n.selection.ranges){let k=y==n.selection.main;if(y.empty?!k||CanHidePrimary:r.drawRangeCursor){let $=k?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",V=y.empty?y:EditorSelection.cursor(y.head,y.head>y.anchor?-1:1);for(let L of RectangleMarker.forRange(e,$,V))g.push(L)}}return g},update(e,n){e.transactions.some(g=>g.selection)&&(n.style.animationName=n.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let r=configChanged(e);return r&&setBlinkRate(e.state,n),e.docChanged||e.selectionSet||r},mount(e,n){setBlinkRate(n.state,e)},class:"cm-cursorLayer"});function setBlinkRate(e,n){n.style.animationDuration=e.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(e){return e.state.selection.ranges.map(n=>n.empty?[]:RectangleMarker.forRange(e,"cm-selectionBackground",n)).reduce((n,r)=>n.concat(r))},update(e,n){return e.docChanged||e.selectionSet||e.viewportChanged||configChanged(e)},class:"cm-selectionLayer"}),themeSpec={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};CanHidePrimary&&(themeSpec[".cm-line"].caretColor=themeSpec[".cm-content"].caretColor="transparent !important");const hideNativeSelection=Prec.highest(EditorView.theme(themeSpec)),setDropCursorPos=StateEffect.define({map(e,n){return e==null?null:n.mapPos(e)}}),dropCursorPos=StateField.define({create(){return null},update(e,n){return e!=null&&(e=n.changes.mapPos(e)),n.effects.reduce((r,g)=>g.is(setDropCursorPos)?g.value:r,e)}}),drawDropCursor=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var n;let r=e.state.field(dropCursorPos);r==null?this.cursor!=null&&((n=this.cursor)===null||n===void 0||n.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(dropCursorPos)!=r||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:e}=this,n=e.state.field(dropCursorPos),r=n!=null&&e.coordsAtPos(n);if(!r)return null;let g=e.scrollDOM.getBoundingClientRect();return{left:r.left-g.left+e.scrollDOM.scrollLeft*e.scaleX,top:r.top-g.top+e.scrollDOM.scrollTop*e.scaleY,height:r.bottom-r.top}}drawCursor(e){if(this.cursor){let{scaleX:n,scaleY:r}=this.view;e?(this.cursor.style.left=e.left/n+"px",this.cursor.style.top=e.top/r+"px",this.cursor.style.height=e.height/r+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(dropCursorPos)!=e&&this.view.dispatch({effects:setDropCursorPos.of(e)})}},{eventObservers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){(e.target==this.view.contentDOM||!this.view.contentDOM.contains(e.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches(e,n,r,g,y){n.lastIndex=0;for(let k=e.iterRange(r,g),$=r,V;!k.next().done;$+=k.value.length)if(!k.lineBreak)for(;V=n.exec(k.value);)y($+V.index,V)}function matchRanges(e,n){let r=e.visibleRanges;if(r.length==1&&r[0].from==e.viewport.from&&r[0].to==e.viewport.to)return r;let g=[];for(let{from:y,to:k}of r)y=Math.max(e.state.doc.lineAt(y).from,y-n),k=Math.min(e.state.doc.lineAt(k).to,k+n),g.length&&g[g.length-1].to>=y?g[g.length-1].to=k:g.push({from:y,to:k});return g}class MatchDecorator{constructor(n){const{regexp:r,decoration:g,decorate:y,boundary:k,maxLength:$=1e3}=n;if(!r.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=r,y)this.addMatch=(V,L,z,j)=>y(j,z,z+V[0].length,V,L);else if(typeof g=="function")this.addMatch=(V,L,z,j)=>{let ae=g(V,L,z);ae&&j(z,z+V[0].length,ae)};else if(g)this.addMatch=(V,L,z,j)=>j(z,z+V[0].length,g);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=k,this.maxLength=$}createDeco(n){let r=new RangeSetBuilder,g=r.add.bind(r);for(let{from:y,to:k}of matchRanges(n,this.maxLength))iterMatches(n.state.doc,this.regexp,y,k,($,V)=>this.addMatch(V,n,$,g));return r.finish()}updateDeco(n,r){let g=1e9,y=-1;return n.docChanged&&n.changes.iterChanges((k,$,V,L)=>{L>=n.view.viewport.from&&V<=n.view.viewport.to&&(g=Math.min(V,g),y=Math.max(L,y))}),n.viewportMoved||y-g>1e3?this.createDeco(n.view):y>-1?this.updateRange(n.view,r.map(n.changes),g,y):r}updateRange(n,r,g,y){for(let k of n.visibleRanges){let $=Math.max(k.from,g),V=Math.min(k.to,y);if(V>$){let L=n.state.doc.lineAt($),z=L.to<V?n.state.doc.lineAt(V):L,j=Math.max(k.from,L.from),ae=Math.min(k.to,z.to);if(this.boundary){for(;$>L.from;$--)if(this.boundary.test(L.text[$-1-L.from])){j=$;break}for(;V<z.to;V++)if(this.boundary.test(z.text[V-z.from])){ae=V;break}}let re=[],oe,ue=(le,de,he)=>re.push(he.range(le,de));if(L==z)for(this.regexp.lastIndex=j-L.from;(oe=this.regexp.exec(L.text))&&oe.index<ae-L.from;)this.addMatch(oe,n,oe.index+L.from,ue);else iterMatches(n.state.doc,this.regexp,j,ae,(le,de)=>this.addMatch(de,n,le,ue));r=r.update({filterFrom:j,filterTo:ae,filter:(le,de)=>le<j||de>ae,add:re})}}return r}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var e;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let n=document.body.style;_supportsTabSize=((e=n.tabSize)!==null&&e!==void 0?e:n.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(e){let n=combineConfig(e,{render:null,specialChars:Specials,addSpecialChars:null});return(n.replaceTabs=!supportsTabSize())&&(n.specialChars=new RegExp("	|"+n.specialChars.source,UnicodeRegexpSupport)),n.addSpecialChars&&(n.specialChars=new RegExp(n.specialChars.source+"|"+n.addSpecialChars.source,UnicodeRegexpSupport)),n}});function highlightSpecialChars(e={}){return[specialCharConfig.of(e),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new MatchDecorator({regexp:e.specialChars,decoration:(n,r,g)=>{let{doc:y}=r.state,k=codePointAt$1(n[0],0);if(k==9){let $=y.lineAt(g),V=r.state.tabSize,L=countColumn($.text,V,g-$.from);return Decoration.replace({widget:new TabWidget((V-L%V)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[k]||(this.decorationCache[k]=Decoration.replace({widget:new SpecialCharWidget(e,k)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let n=e.state.facet(specialCharConfig);e.startState.facet(specialCharConfig)!=n?(this.decorator=this.makeDecorator(n),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))}const DefaultPlaceholder="";function placeholder$1(e){return e>=32?DefaultPlaceholder:e==10?"":String.fromCharCode(9216+e)}class SpecialCharWidget extends WidgetType{constructor(n,r){super(),this.options=n,this.code=r}eq(n){return n.code==this.code}toDOM(n){let r=placeholder$1(this.code),g=n.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),y=this.options.render&&this.options.render(this.code,g,r);if(y)return y;let k=document.createElement("span");return k.textContent=r,k.title=g,k.setAttribute("aria-label",g),k.className="cm-specialChar",k}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(n){super(),this.width=n}eq(n){return n.width==this.width}toDOM(){let n=document.createElement("span");return n.textContent="	",n.className="cm-tab",n.style.width=this.width+"px",n}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let n=-1,r=[];for(let g of e.state.selection.ranges){let y=e.lineBlockAt(g.head);y.from>n&&(r.push(lineDeco.range(y.from)),n=y.from)}return Decoration.set(r)}},{decorations:e=>e.decorations}),MaxOff=2e3;function rectangleFor(e,n,r){let g=Math.min(n.line,r.line),y=Math.max(n.line,r.line),k=[];if(n.off>MaxOff||r.off>MaxOff||n.col<0||r.col<0){let $=Math.min(n.off,r.off),V=Math.max(n.off,r.off);for(let L=g;L<=y;L++){let z=e.doc.line(L);z.length<=V&&k.push(EditorSelection.range(z.from+$,z.to+V))}}else{let $=Math.min(n.col,r.col),V=Math.max(n.col,r.col);for(let L=g;L<=y;L++){let z=e.doc.line(L),j=findColumn(z.text,$,e.tabSize,!0);if(j<0)k.push(EditorSelection.cursor(z.to));else{let ae=findColumn(z.text,V,e.tabSize);k.push(EditorSelection.range(z.from+j,z.from+ae))}}}return k}function absoluteColumn(e,n){let r=e.coordsAtPos(e.viewport.from);return r?Math.round(Math.abs((r.left-n)/e.defaultCharacterWidth)):-1}function getPos(e,n){let r=e.posAtCoords({x:n.clientX,y:n.clientY},!1),g=e.state.doc.lineAt(r),y=r-g.from,k=y>MaxOff?-1:y==g.length?absoluteColumn(e,n.clientX):countColumn(g.text,e.state.tabSize,r-g.from);return{line:g.number,col:k,off:y}}function rectangleSelectionStyle(e,n){let r=getPos(e,n),g=e.state.selection;return r?{update(y){if(y.docChanged){let k=y.changes.mapPos(y.startState.doc.line(r.line).from),$=y.state.doc.lineAt(k);r={line:$.number,col:r.col,off:Math.min(r.off,$.length)},g=g.map(y.changes)}},get(y,k,$){let V=getPos(e,y);if(!V)return g;let L=rectangleFor(e.state,r,V);return L.length?$?EditorSelection.create(L.concat(g.ranges)):EditorSelection.create(L):g}}:null}function rectangularSelection(e){let n=e?.eventFilter||(r=>r.altKey&&r.button==0);return EditorView.mouseSelectionStyle.of((r,g)=>n(g)?rectangleSelectionStyle(r,g):null)}const keys={Alt:[18,e=>!!e.altKey],Control:[17,e=>!!e.ctrlKey],Shift:[16,e=>!!e.shiftKey],Meta:[91,e=>!!e.metaKey]},showCrosshair={style:"cursor: crosshair"};function crosshairCursor(e={}){let[n,r]=keys[e.key||"Alt"],g=ViewPlugin.fromClass(class{constructor(y){this.view=y,this.isDown=!1}set(y){this.isDown!=y&&(this.isDown=y,this.view.update([]))}},{eventObservers:{keydown(y){this.set(y.keyCode==n||r(y))},keyup(y){(y.keyCode==n||!r(y))&&this.set(!1)},mousemove(y){this.set(r(y))}}});return[g,EditorView.contentAttributes.of(y=>{var k;return!((k=y.plugin(g))===null||k===void 0)&&k.isDown?showCrosshair:null})]}const Outside="-10000px";class TooltipViewManager{constructor(n,r,g,y){this.facet=r,this.createTooltipView=g,this.removeTooltipView=y,this.input=n.state.facet(r),this.tooltips=this.input.filter($=>$);let k=null;this.tooltipViews=this.tooltips.map($=>k=g($,k))}update(n,r){var g;let y=n.state.facet(this.facet),k=y.filter(L=>L);if(y===this.input){for(let L of this.tooltipViews)L.update&&L.update(n);return!1}let $=[],V=r?[]:null;for(let L=0;L<k.length;L++){let z=k[L],j=-1;if(z){for(let ae=0;ae<this.tooltips.length;ae++){let re=this.tooltips[ae];re&&re.create==z.create&&(j=ae)}if(j<0)$[L]=this.createTooltipView(z,L?$[L-1]:null),V&&(V[L]=!!z.above);else{let ae=$[L]=this.tooltipViews[j];V&&(V[L]=r[j]),ae.update&&ae.update(n)}}}for(let L of this.tooltipViews)$.indexOf(L)<0&&(this.removeTooltipView(L),(g=L.destroy)===null||g===void 0||g.call(L));return r&&(V.forEach((L,z)=>r[z]=L),r.length=V.length),this.input=y,this.tooltips=k,this.tooltipViews=$,!0}}function windowSpace(e){let{win:n}=e;return{top:0,left:0,bottom:n.innerHeight,right:n.innerWidth}}const tooltipConfig=Facet.define({combine:e=>{var n,r,g;return{position:browser.ios?"absolute":((n=e.find(y=>y.position))===null||n===void 0?void 0:n.position)||"fixed",parent:((r=e.find(y=>y.parent))===null||r===void 0?void 0:r.parent)||null,tooltipSpace:((g=e.find(y=>y.tooltipSpace))===null||g===void 0?void 0:g.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let n=e.state.facet(tooltipConfig);this.position=n.position,this.parent=n.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new TooltipViewManager(e,showTooltip,(r,g)=>this.createTooltip(r,g),r=>{this.resizeObserver&&this.resizeObserver.unobserve(r.dom),r.dom.remove()}),this.above=this.manager.tooltips.map(r=>!!r.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(r=>{Date.now()>this.lastTransaction-50&&r.length>0&&r[r.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let n=this.manager.update(e,this.above);n&&this.observeIntersection();let r=n||e.geometryChanged,g=e.state.facet(tooltipConfig);if(g.position!=this.position&&!this.madeAbsolute){this.position=g.position;for(let y of this.manager.tooltipViews)y.dom.style.position=this.position;r=!0}if(g.parent!=this.parent){this.parent&&this.container.remove(),this.parent=g.parent,this.createContainer();for(let y of this.manager.tooltipViews)this.container.appendChild(y.dom);r=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);r&&this.maybeMeasure()}createTooltip(e,n){let r=e.create(this.view),g=n?n.dom:null;if(r.dom.classList.add("cm-tooltip"),e.arrow&&!r.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let y=document.createElement("div");y.className="cm-tooltip-arrow",r.dom.appendChild(y)}return r.dom.style.position=this.position,r.dom.style.top=Outside,r.dom.style.left="0px",this.container.insertBefore(r.dom,g),r.mount&&r.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(r.dom),r}destroy(){var e,n,r;this.view.win.removeEventListener("resize",this.measureSoon);for(let g of this.manager.tooltipViews)g.dom.remove(),(e=g.destroy)===null||e===void 0||e.call(g);this.parent&&this.container.remove(),(n=this.resizeObserver)===null||n===void 0||n.disconnect(),(r=this.intersectionObserver)===null||r===void 0||r.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=1,n=1,r=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:k}=this.manager.tooltipViews[0];if(browser.gecko)r=k.offsetParent!=this.container.ownerDocument.body;else if(k.style.top==Outside&&k.style.left=="0px"){let $=k.getBoundingClientRect();r=Math.abs($.top+1e4)>1||Math.abs($.left)>1}}if(r||this.position=="absolute")if(this.parent){let k=this.parent.getBoundingClientRect();k.width&&k.height&&(e=k.width/this.parent.offsetWidth,n=k.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:n}=this.view.viewState);let g=this.view.scrollDOM.getBoundingClientRect(),y=getScrollMargins(this.view);return{visible:{left:g.left+y.left,top:g.top+y.top,right:g.right-y.right,bottom:g.bottom-y.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((k,$)=>{let V=this.manager.tooltipViews[$];return V.getCoords?V.getCoords(k.pos):this.view.coordsAtPos(k.pos)}),size:this.manager.tooltipViews.map(({dom:k})=>k.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view),scaleX:e,scaleY:n,makeAbsolute:r}}writeMeasure(e){var n;if(e.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let V of this.manager.tooltipViews)V.dom.style.position="absolute"}let{visible:r,space:g,scaleX:y,scaleY:k}=e,$=[];for(let V=0;V<this.manager.tooltips.length;V++){let L=this.manager.tooltips[V],z=this.manager.tooltipViews[V],{dom:j}=z,ae=e.pos[V],re=e.size[V];if(!ae||L.clip!==!1&&(ae.bottom<=Math.max(r.top,g.top)||ae.top>=Math.min(r.bottom,g.bottom)||ae.right<Math.max(r.left,g.left)-.1||ae.left>Math.min(r.right,g.right)+.1)){j.style.top=Outside;continue}let oe=L.arrow?z.dom.querySelector(".cm-tooltip-arrow"):null,ue=oe?7:0,le=re.right-re.left,de=(n=knownHeight.get(z))!==null&&n!==void 0?n:re.bottom-re.top,he=z.offset||noOffset,_e=this.view.textDirection==Direction.LTR,Ce=re.width>g.right-g.left?_e?g.left:g.right-re.width:_e?Math.max(g.left,Math.min(ae.left-(oe?14:0)+he.x,g.right-le)):Math.min(Math.max(g.left,ae.left-le+(oe?14:0)-he.x),g.right-le),Ne=this.above[V];!L.strictSide&&(Ne?ae.top-de-ue-he.y<g.top:ae.bottom+de+ue+he.y>g.bottom)&&Ne==g.bottom-ae.bottom>ae.top-g.top&&(Ne=this.above[V]=!Ne);let $e=(Ne?ae.top-g.top:g.bottom-ae.bottom)-ue;if($e<de&&z.resize!==!1){if($e<this.view.defaultLineHeight){j.style.top=Outside;continue}knownHeight.set(z,de),j.style.height=(de=$e)/k+"px"}else j.style.height&&(j.style.height="");let xe=Ne?ae.top-de-ue-he.y:ae.bottom+ue+he.y,Ie=Ce+le;if(z.overlap!==!0)for(let ze of $)ze.left<Ie&&ze.right>Ce&&ze.top<xe+de&&ze.bottom>xe&&(xe=Ne?ze.top-de-2-ue:ze.bottom+ue+2);if(this.position=="absolute"?(j.style.top=(xe-e.parent.top)/k+"px",setLeftStyle(j,(Ce-e.parent.left)/y)):(j.style.top=xe/k+"px",setLeftStyle(j,Ce/y)),oe){let ze=ae.left+(_e?he.x:-he.x)-(Ce+14-7);oe.style.left=ze/y+"px"}z.overlap!==!0&&$.push({left:Ce,top:xe,right:Ie,bottom:xe+de}),j.classList.toggle("cm-tooltip-above",Ne),j.classList.toggle("cm-tooltip-below",!Ne),z.positioned&&z.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=Outside}},{eventObservers:{scroll(){this.maybeMeasure()}}});function setLeftStyle(e,n){let r=parseInt(e.style.left,10);(isNaN(r)||Math.abs(n-r)>1)&&(e.style.left=n+"px")}const baseTheme$4=EditorView.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$4]}),showHoverTooltip=Facet.define({combine:e=>e.reduce((n,r)=>n.concat(r),[])});class HoverTooltipHost{static create(n){return new HoverTooltipHost(n)}constructor(n){this.view=n,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(n,showHoverTooltip,(r,g)=>this.createHostedView(r,g),r=>r.dom.remove())}createHostedView(n,r){let g=n.create(this.view);return g.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(g.dom,r?r.dom.nextSibling:this.dom.firstChild),this.mounted&&g.mount&&g.mount(this.view),g}mount(n){for(let r of this.manager.tooltipViews)r.mount&&r.mount(n);this.mounted=!0}positioned(n){for(let r of this.manager.tooltipViews)r.positioned&&r.positioned(n)}update(n){this.manager.update(n)}destroy(){var n;for(let r of this.manager.tooltipViews)(n=r.destroy)===null||n===void 0||n.call(r)}passProp(n){let r;for(let g of this.manager.tooltipViews){let y=g[n];if(y!==void 0){if(r===void 0)r=y;else if(r!==y)return}}return r}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],e=>{let n=e.facet(showHoverTooltip);return n.length===0?null:{pos:Math.min(...n.map(r=>r.pos)),end:Math.max(...n.map(r=>{var g;return(g=r.end)!==null&&g!==void 0?g:r.pos})),create:HoverTooltipHost.create,above:n[0].above,arrow:n.some(r=>r.arrow)}});class HoverPlugin{constructor(n,r,g,y,k){this.view=n,this.source=r,this.field=g,this.setHover=y,this.hoverTime=k,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:n.dom,time:0},this.checkHover=this.checkHover.bind(this),n.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),n.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let n=Date.now()-this.lastMove.time;n<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-n):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:n,lastMove:r}=this,g=n.docView.nearest(r.target);if(!g)return;let y,k=1;if(g instanceof WidgetView)y=g.posAtStart;else{if(y=n.posAtCoords(r),y==null)return;let V=n.coordsAtPos(y);if(!V||r.y<V.top||r.y>V.bottom||r.x<V.left-n.defaultCharacterWidth||r.x>V.right+n.defaultCharacterWidth)return;let L=n.bidiSpans(n.state.doc.lineAt(y)).find(j=>j.from<=y&&j.to>=y),z=L&&L.dir==Direction.RTL?-1:1;k=r.x<V.left?-z:z}let $=this.source(n,y,k);if($?.then){let V=this.pending={pos:y};$.then(L=>{this.pending==V&&(this.pending=null,L&&!(Array.isArray(L)&&!L.length)&&n.dispatch({effects:this.setHover.of(Array.isArray(L)?L:[L])}))},L=>logException(n.state,L,"hover tooltip"))}else $&&!(Array.isArray($)&&!$.length)&&n.dispatch({effects:this.setHover.of(Array.isArray($)?$:[$])})}get tooltip(){let n=this.view.plugin(tooltipPlugin),r=n?n.manager.tooltips.findIndex(g=>g.create==HoverTooltipHost.create):-1;return r>-1?n.manager.tooltipViews[r]:null}mousemove(n){var r,g;this.lastMove={x:n.clientX,y:n.clientY,target:n.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:y,tooltip:k}=this;if(y.length&&k&&!isInTooltip(k.dom,n)||this.pending){let{pos:$}=y[0]||this.pending,V=(g=(r=y[0])===null||r===void 0?void 0:r.end)!==null&&g!==void 0?g:$;($==V?this.view.posAtCoords(this.lastMove)!=$:!isOverRange(this.view,$,V,n.clientX,n.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(n){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:r}=this;if(r.length){let{tooltip:g}=this;g&&g.dom.contains(n.relatedTarget)?this.watchTooltipLeave(g.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(n){let r=g=>{n.removeEventListener("mouseleave",r),this.active.length&&!this.view.dom.contains(g.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};n.addEventListener("mouseleave",r)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const tooltipMargin=4;function isInTooltip(e,n){let{left:r,right:g,top:y,bottom:k}=e.getBoundingClientRect(),$;if($=e.querySelector(".cm-tooltip-arrow")){let V=$.getBoundingClientRect();y=Math.min(V.top,y),k=Math.max(V.bottom,k)}return n.clientX>=r-tooltipMargin&&n.clientX<=g+tooltipMargin&&n.clientY>=y-tooltipMargin&&n.clientY<=k+tooltipMargin}function isOverRange(e,n,r,g,y,k){let $=e.scrollDOM.getBoundingClientRect(),V=e.documentTop+e.documentPadding.top+e.contentHeight;if($.left>g||$.right<g||$.top>y||Math.min($.bottom,V)<y)return!1;let L=e.posAtCoords({x:g,y},!1);return L>=n&&L<=r}function hoverTooltip(e,n={}){let r=StateEffect.define(),g=StateField.define({create(){return[]},update(y,k){if(y.length&&(n.hideOnChange&&(k.docChanged||k.selection)?y=[]:n.hideOn&&(y=y.filter($=>!n.hideOn(k,$))),k.docChanged)){let $=[];for(let V of y){let L=k.changes.mapPos(V.pos,-1,MapMode.TrackDel);if(L!=null){let z=Object.assign(Object.create(null),V);z.pos=L,z.end!=null&&(z.end=k.changes.mapPos(z.end)),$.push(z)}}y=$}for(let $ of k.effects)$.is(r)&&(y=$.value),$.is(closeHoverTooltipEffect)&&(y=[]);return y},provide:y=>showHoverTooltip.from(y)});return{active:g,extension:[g,ViewPlugin.define(y=>new HoverPlugin(y,e,g,r,n.hoverTime||300)),showHoverTooltipHost]}}function getTooltip(e,n){let r=e.plugin(tooltipPlugin);if(!r)return null;let g=r.manager.tooltips.indexOf(n);return g<0?null:r.manager.tooltipViews[g]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(e){let n,r;for(let g of e)n=n||g.topContainer,r=r||g.bottomContainer;return{topContainer:n,bottomContainer:r}}});function getPanel(e,n){let r=e.plugin(panelPlugin),g=r?r.specs.indexOf(n):-1;return g>-1?r.panels[g]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(e){this.input=e.state.facet(showPanel),this.specs=this.input.filter(r=>r),this.panels=this.specs.map(r=>r(e));let n=e.state.facet(panelConfig);this.top=new PanelGroup(e,!0,n.topContainer),this.bottom=new PanelGroup(e,!1,n.bottomContainer),this.top.sync(this.panels.filter(r=>r.top)),this.bottom.sync(this.panels.filter(r=>!r.top));for(let r of this.panels)r.dom.classList.add("cm-panel"),r.mount&&r.mount()}update(e){let n=e.state.facet(panelConfig);this.top.container!=n.topContainer&&(this.top.sync([]),this.top=new PanelGroup(e.view,!0,n.topContainer)),this.bottom.container!=n.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(e.view,!1,n.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let r=e.state.facet(showPanel);if(r!=this.input){let g=r.filter(L=>L),y=[],k=[],$=[],V=[];for(let L of g){let z=this.specs.indexOf(L),j;z<0?(j=L(e.view),V.push(j)):(j=this.panels[z],j.update&&j.update(e)),y.push(j),(j.top?k:$).push(j)}this.specs=g,this.panels=y,this.top.sync(k),this.bottom.sync($);for(let L of V)L.dom.classList.add("cm-panel"),L.mount&&L.mount()}else for(let g of this.panels)g.update&&g.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>EditorView.scrollMargins.of(n=>{let r=n.plugin(e);return r&&{top:r.top.scrollMargin(),bottom:r.bottom.scrollMargin()}})});class PanelGroup{constructor(n,r,g){this.view=n,this.top=r,this.container=g,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(n){for(let r of this.panels)r.destroy&&n.indexOf(r)<0&&r.destroy();this.panels=n,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let r=this.container||this.view.dom;r.insertBefore(this.dom,this.top?r.firstChild:null)}let n=this.dom.firstChild;for(let r of this.panels)if(r.dom.parentNode==this.dom){for(;n!=r.dom;)n=rm(n);n=n.nextSibling}else this.dom.insertBefore(r.dom,n);for(;n;)n=rm(n)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let n of this.classes.split(" "))n&&this.container.classList.remove(n);for(let n of(this.classes=this.view.themeClasses).split(" "))n&&this.container.classList.add(n)}}}function rm(e){let n=e.nextSibling;return e.remove(),n}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(n){return this==n||this.constructor==n.constructor&&this.eq(n)}eq(n){return!1}destroy(n){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),gutterWidgetClass=Facet.define(),defaults$1={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>RangeSet.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},activeGutters=Facet.define();function gutter(e){return[gutters(),activeGutters.of(Object.assign(Object.assign({},defaults$1),e))]}const unfixGutters=Facet.define({combine:e=>e.some(n=>n)});function gutters(e){let n=[gutterView];return e&&e.fixed===!1&&n.push(unfixGutters.of(!0)),n}const gutterView=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(activeGutters).map(n=>new SingleGutterView(e,n));for(let n of this.gutters)this.dom.appendChild(n.dom);this.fixed=!e.state.facet(unfixGutters),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let n=this.prevViewport,r=e.view.viewport,g=Math.min(n.to,r.to)-Math.max(n.from,r.from);this.syncGutters(g<(r.to-r.from)*.8)}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let n=this.dom.nextSibling;e&&this.dom.remove();let r=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),g=[],y=this.gutters.map(k=>new UpdateContext(k,this.view.viewport,-this.view.documentPadding.top));for(let k of this.view.viewportLineBlocks)if(g.length&&(g=[]),Array.isArray(k.type)){let $=!0;for(let V of k.type)if(V.type==BlockType.Text&&$){advanceCursor(r,g,V.from);for(let L of y)L.line(this.view,V,g);$=!1}else if(V.widget)for(let L of y)L.widget(this.view,V)}else if(k.type==BlockType.Text){advanceCursor(r,g,k.from);for(let $ of y)$.line(this.view,k,g)}else if(k.widget)for(let $ of y)$.widget(this.view,k);for(let k of y)k.finish();e&&this.view.scrollDOM.insertBefore(this.dom,n)}updateGutters(e){let n=e.startState.facet(activeGutters),r=e.state.facet(activeGutters),g=e.docChanged||e.heightChanged||e.viewportChanged||!RangeSet.eq(e.startState.facet(gutterLineClass),e.state.facet(gutterLineClass),e.view.viewport.from,e.view.viewport.to);if(n==r)for(let y of this.gutters)y.update(e)&&(g=!0);else{g=!0;let y=[];for(let k of r){let $=n.indexOf(k);$<0?y.push(new SingleGutterView(this.view,k)):(this.gutters[$].update(e),y.push(this.gutters[$]))}for(let k of this.gutters)k.dom.remove(),y.indexOf(k)<0&&k.destroy();for(let k of y)this.dom.appendChild(k.dom);this.gutters=y}return g}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>EditorView.scrollMargins.of(n=>{let r=n.plugin(e);return!r||r.gutters.length==0||!r.fixed?null:n.textDirection==Direction.LTR?{left:r.dom.offsetWidth*n.scaleX}:{right:r.dom.offsetWidth*n.scaleX}})});function asArray(e){return Array.isArray(e)?e:[e]}function advanceCursor(e,n,r){for(;e.value&&e.from<=r;)e.from==r&&n.push(e.value),e.next()}class UpdateContext{constructor(n,r,g){this.gutter=n,this.height=g,this.i=0,this.cursor=RangeSet.iter(n.markers,r.from)}addElement(n,r,g){let{gutter:y}=this,k=(r.top-this.height)/n.scaleY,$=r.height/n.scaleY;if(this.i==y.elements.length){let V=new GutterElement(n,$,k,g);y.elements.push(V),y.dom.appendChild(V.dom)}else y.elements[this.i].update(n,$,k,g);this.height=r.bottom,this.i++}line(n,r,g){let y=[];advanceCursor(this.cursor,y,r.from),g.length&&(y=y.concat(g));let k=this.gutter.config.lineMarker(n,r,y);k&&y.unshift(k);let $=this.gutter;y.length==0&&!$.config.renderEmptyElements||this.addElement(n,r,y)}widget(n,r){let g=this.gutter.config.widgetMarker(n,r.widget,r),y=g?[g]:null;for(let k of n.state.facet(gutterWidgetClass)){let $=k(n,r.widget,r);$&&(y||(y=[])).push($)}y&&this.addElement(n,r,y)}finish(){let n=this.gutter;for(;n.elements.length>this.i;){let r=n.elements.pop();n.dom.removeChild(r.dom),r.destroy()}}}class SingleGutterView{constructor(n,r){this.view=n,this.config=r,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let g in r.domEventHandlers)this.dom.addEventListener(g,y=>{let k=y.target,$;if(k!=this.dom&&this.dom.contains(k)){for(;k.parentNode!=this.dom;)k=k.parentNode;let L=k.getBoundingClientRect();$=(L.top+L.bottom)/2}else $=y.clientY;let V=n.lineBlockAtHeight($-n.documentTop);r.domEventHandlers[g](n,V,y)&&y.preventDefault()});this.markers=asArray(r.markers(n)),r.initialSpacer&&(this.spacer=new GutterElement(n,0,0,[r.initialSpacer(n)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(n){let r=this.markers;if(this.markers=asArray(this.config.markers(n.view)),this.spacer&&this.config.updateSpacer){let y=this.config.updateSpacer(this.spacer.markers[0],n);y!=this.spacer.markers[0]&&this.spacer.update(n.view,0,0,[y])}let g=n.view.viewport;return!RangeSet.eq(this.markers,r,g.from,g.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(n):!1)}destroy(){for(let n of this.elements)n.destroy()}}class GutterElement{constructor(n,r,g,y){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(n,r,g,y)}update(n,r,g,y){this.height!=r&&(this.height=r,this.dom.style.height=r+"px"),this.above!=g&&(this.dom.style.marginTop=(this.above=g)?g+"px":""),sameMarkers(this.markers,y)||this.setMarkers(n,y)}setMarkers(n,r){let g="cm-gutterElement",y=this.dom.firstChild;for(let k=0,$=0;;){let V=$,L=k<r.length?r[k++]:null,z=!1;if(L){let j=L.elementClass;j&&(g+=" "+j);for(let ae=$;ae<this.markers.length;ae++)if(this.markers[ae].compare(L)){V=ae,z=!0;break}}else V=this.markers.length;for(;$<V;){let j=this.markers[$++];if(j.toDOM){j.destroy(y);let ae=y.nextSibling;y.remove(),y=ae}}if(!L)break;L.toDOM&&(z?y=y.nextSibling:this.dom.insertBefore(L.toDOM(n),y)),z&&$++}this.dom.className=g,this.markers=r}destroy(){this.setMarkers(null,[])}}function sameMarkers(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].compare(n[r]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberWidgetMarker=Facet.define(),lineNumberConfig=Facet.define({combine(e){return combineConfig(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(n,r){let g=Object.assign({},n);for(let y in r){let k=g[y],$=r[y];g[y]=k?(V,L,z)=>k(V,L,z)||$(V,L,z):$}return g}})}});class NumberMarker extends GutterMarker{constructor(n){super(),this.number=n}eq(n){return this.number==n.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(e,n){return e.state.facet(lineNumberConfig).formatNumber(n,e.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(n){return n.state.facet(lineNumberMarkers)},lineMarker(n,r,g){return g.some(y=>y.toDOM)?null:new NumberMarker(formatNumber(n,n.state.doc.lineAt(r.from).number))},widgetMarker:(n,r,g)=>{for(let y of n.state.facet(lineNumberWidgetMarker)){let k=y(n,r,g);if(k)return k}return null},lineMarkerChange:n=>n.startState.facet(lineNumberConfig)!=n.state.facet(lineNumberConfig),initialSpacer(n){return new NumberMarker(formatNumber(n,maxLineNumber(n.state.doc.lines)))},updateSpacer(n,r){let g=formatNumber(r.view,maxLineNumber(r.view.state.doc.lines));return g==n.number?n:new NumberMarker(g)},domEventHandlers:e.facet(lineNumberConfig).domEventHandlers}));function lineNumbers(e={}){return[lineNumberConfig.of(e),gutters(),lineNumberGutter]}function maxLineNumber(e){let n=9;for(;n<e;)n=n*10+9;return n}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],e=>{let n=[],r=-1;for(let g of e.selection.ranges){let y=e.doc.lineAt(g.head).from;y>r&&(r=y,n.push(activeLineGutterMarker.range(y)))}return RangeSet.of(n)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}const DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(n,r){this.from=n,this.to=r}}class NodeProp{constructor(n={}){this.id=nextPropID++,this.perNode=!!n.perNode,this.deserialize=n.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(n){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof n!="function"&&(n=NodeType.match(n)),r=>{let g=n(r);return g===void 0?null:[this,g]}}}NodeProp.closedBy=new NodeProp({deserialize:e=>e.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:e=>e.split(" ")});NodeProp.group=new NodeProp({deserialize:e=>e.split(" ")});NodeProp.isolate=new NodeProp({deserialize:e=>{if(e&&e!="rtl"&&e!="ltr"&&e!="auto")throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor(n,r,g){this.tree=n,this.overlay=r,this.parser=g}static get(n){return n&&n.props&&n.props[NodeProp.mounted.id]}}const noProps=Object.create(null);class NodeType{constructor(n,r,g,y=0){this.name=n,this.props=r,this.id=g,this.flags=y}static define(n){let r=n.props&&n.props.length?Object.create(null):noProps,g=(n.top?1:0)|(n.skipped?2:0)|(n.error?4:0)|(n.name==null?8:0),y=new NodeType(n.name||"",r,n.id,g);if(n.props){for(let k of n.props)if(Array.isArray(k)||(k=k(y)),k){if(k[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");r[k[0].id]=k[1]}}return y}prop(n){return this.props[n.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(n){if(typeof n=="string"){if(this.name==n)return!0;let r=this.prop(NodeProp.group);return r?r.indexOf(n)>-1:!1}return this.id==n}static match(n){let r=Object.create(null);for(let g in n)for(let y of g.split(" "))r[y]=n[g];return g=>{for(let y=g.prop(NodeProp.group),k=-1;k<(y?y.length:0);k++){let $=r[k<0?g.name:y[k]];if($)return $}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(n){this.types=n;for(let r=0;r<n.length;r++)if(n[r].id!=r)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...n){let r=[];for(let g of this.types){let y=null;for(let k of n){let $=k(g);$&&(y||(y=Object.assign({},g.props)),y[$[0].id]=$[1])}r.push(y?new NodeType(g.name,y,g.id,g.flags):g)}return new NodeSet(r)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor(n,r,g,y,k){if(this.type=n,this.children=r,this.positions=g,this.length=y,this.props=null,k&&k.length){this.props=Object.create(null);for(let[$,V]of k)this.props[typeof $=="number"?$:$.id]=V}}toString(){let n=MountedTree.get(this);if(n&&!n.overlay)return n.tree.toString();let r="";for(let g of this.children){let y=g.toString();y&&(r&&(r+=","),r+=y)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(r.length?"("+r+")":""):r}cursor(n=0){return new TreeCursor(this.topNode,n)}cursorAt(n,r=0,g=0){let y=CachedNode.get(this)||this.topNode,k=new TreeCursor(y);return k.moveTo(n,r),CachedNode.set(this,k._tree),k}get topNode(){return new TreeNode(this,0,0,null)}resolve(n,r=0){let g=resolveNode(CachedNode.get(this)||this.topNode,n,r,!1);return CachedNode.set(this,g),g}resolveInner(n,r=0){let g=resolveNode(CachedInnerNode.get(this)||this.topNode,n,r,!0);return CachedInnerNode.set(this,g),g}resolveStack(n,r=0){return stackIterator(this,n,r)}iterate(n){let{enter:r,leave:g,from:y=0,to:k=this.length}=n,$=n.mode||0,V=($&IterMode.IncludeAnonymous)>0;for(let L=this.cursor($|IterMode.IncludeAnonymous);;){let z=!1;if(L.from<=k&&L.to>=y&&(!V&&L.type.isAnonymous||r(L)!==!1)){if(L.firstChild())continue;z=!0}for(;z&&g&&(V||!L.type.isAnonymous)&&g(L),!L.nextSibling();){if(!L.parent())return;z=!0}}}prop(n){return n.perNode?this.props?this.props[n.id]:void 0:this.type.prop(n)}get propValues(){let n=[];if(this.props)for(let r in this.props)n.push([+r,this.props[r]]);return n}balance(n={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(r,g,y)=>new Tree(this.type,r,g,y,this.propValues),n.makeTree||((r,g,y)=>new Tree(NodeType.none,r,g,y)))}static build(n){return buildTree(n)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(n,r){this.buffer=n,this.index=r}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(n,r,g){this.buffer=n,this.length=r,this.set=g}get type(){return NodeType.none}toString(){let n=[];for(let r=0;r<this.buffer.length;)n.push(this.childString(r)),r=this.buffer[r+3];return n.join(",")}childString(n){let r=this.buffer[n],g=this.buffer[n+3],y=this.set.types[r],k=y.name;if(/\W/.test(k)&&!y.isError&&(k=JSON.stringify(k)),n+=4,g==n)return k;let $=[];for(;n<g;)$.push(this.childString(n)),n=this.buffer[n+3];return k+"("+$.join(",")+")"}findChild(n,r,g,y,k){let{buffer:$}=this,V=-1;for(let L=n;L!=r&&!(checkSide(k,y,$[L+1],$[L+2])&&(V=L,g>0));L=$[L+3]);return V}slice(n,r,g){let y=this.buffer,k=new Uint16Array(r-n),$=0;for(let V=n,L=0;V<r;){k[L++]=y[V++],k[L++]=y[V++]-g;let z=k[L++]=y[V++]-g;k[L++]=y[V++]-n,$=Math.max($,z)}return new TreeBuffer(k,$,this.set)}}function checkSide(e,n,r,g){switch(e){case-2:return r<n;case-1:return g>=n&&r<n;case 0:return r<n&&g>n;case 1:return r<=n&&g>n;case 2:return g>n;case 4:return!0}}function resolveNode(e,n,r,g){for(var y;e.from==e.to||(r<1?e.from>=n:e.from>n)||(r>-1?e.to<=n:e.to<n);){let $=!g&&e instanceof TreeNode&&e.index<0?null:e.parent;if(!$)return e;e=$}let k=g?0:IterMode.IgnoreOverlays;if(g)for(let $=e,V=$.parent;V;$=V,V=$.parent)$ instanceof TreeNode&&$.index<0&&((y=V.enter(n,r,k))===null||y===void 0?void 0:y.from)!=$.from&&(e=V);for(;;){let $=e.enter(n,r,k);if(!$)return e;e=$}}class BaseNode{cursor(n=0){return new TreeCursor(this,n)}getChild(n,r=null,g=null){let y=getChildren(this,n,r,g);return y.length?y[0]:null}getChildren(n,r=null,g=null){return getChildren(this,n,r,g)}resolve(n,r=0){return resolveNode(this,n,r,!1)}resolveInner(n,r=0){return resolveNode(this,n,r,!0)}matchContext(n){return matchNodeContext(this.parent,n)}enterUnfinishedNodesBefore(n){let r=this.childBefore(n),g=this;for(;r;){let y=r.lastChild;if(!y||y.to!=r.to)break;y.type.isError&&y.from==y.to?(g=r,r=y.prevSibling):r=y}return g}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(n,r,g,y){super(),this._tree=n,this.from=r,this.index=g,this._parent=y}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(n,r,g,y,k=0){for(let $=this;;){for(let{children:V,positions:L}=$._tree,z=r>0?V.length:-1;n!=z;n+=r){let j=V[n],ae=L[n]+$.from;if(checkSide(y,g,ae,ae+j.length)){if(j instanceof TreeBuffer){if(k&IterMode.ExcludeBuffers)continue;let re=j.findChild(0,j.buffer.length,r,g-ae,y);if(re>-1)return new BufferNode(new BufferContext($,j,n,ae),null,re)}else if(k&IterMode.IncludeAnonymous||!j.type.isAnonymous||hasChild(j)){let re;if(!(k&IterMode.IgnoreMounts)&&(re=MountedTree.get(j))&&!re.overlay)return new TreeNode(re.tree,ae,n,$);let oe=new TreeNode(j,ae,n,$);return k&IterMode.IncludeAnonymous||!oe.type.isAnonymous?oe:oe.nextChild(r<0?j.children.length-1:0,r,g,y)}}}if(k&IterMode.IncludeAnonymous||!$.type.isAnonymous||($.index>=0?n=$.index+r:n=r<0?-1:$._parent._tree.children.length,$=$._parent,!$))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(n){return this.nextChild(0,1,n,2)}childBefore(n){return this.nextChild(this._tree.children.length-1,-1,n,-2)}enter(n,r,g=0){let y;if(!(g&IterMode.IgnoreOverlays)&&(y=MountedTree.get(this._tree))&&y.overlay){let k=n-this.from;for(let{from:$,to:V}of y.overlay)if((r>0?$<=k:$<k)&&(r<0?V>=k:V>k))return new TreeNode(y.tree,y.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,n,r,g)}nextSignificantParent(){let n=this;for(;n.type.isAnonymous&&n._parent;)n=n._parent;return n}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(e,n,r,g){let y=e.cursor(),k=[];if(!y.firstChild())return k;if(r!=null){for(let $=!1;!$;)if($=y.type.is(r),!y.nextSibling())return k}for(;;){if(g!=null&&y.type.is(g))return k;if(y.type.is(n)&&k.push(y.node),!y.nextSibling())return g==null?k:[]}}function matchNodeContext(e,n,r=n.length-1){for(let g=e;r>=0;g=g.parent){if(!g)return!1;if(!g.type.isAnonymous){if(n[r]&&n[r]!=g.name)return!1;r--}}return!0}class BufferContext{constructor(n,r,g,y){this.parent=n,this.buffer=r,this.index=g,this.start=y}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(n,r,g){super(),this.context=n,this._parent=r,this.index=g,this.type=n.buffer.set.types[n.buffer.buffer[g]]}child(n,r,g){let{buffer:y}=this.context,k=y.findChild(this.index+4,y.buffer[this.index+3],n,r-this.context.start,g);return k<0?null:new BufferNode(this.context,this,k)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(n){return this.child(1,n,2)}childBefore(n){return this.child(-1,n,-2)}enter(n,r,g=0){if(g&IterMode.ExcludeBuffers)return null;let{buffer:y}=this.context,k=y.findChild(this.index+4,y.buffer[this.index+3],r>0?1:-1,n-this.context.start,r);return k<0?null:new BufferNode(this.context,this,k)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(n){return this._parent?null:this.context.parent.nextChild(this.context.index+n,n,0,4)}get nextSibling(){let{buffer:n}=this.context,r=n.buffer[this.index+3];return r<(this._parent?n.buffer[this._parent.index+3]:n.buffer.length)?new BufferNode(this.context,this._parent,r):this.externalSibling(1)}get prevSibling(){let{buffer:n}=this.context,r=this._parent?this._parent.index+4:0;return this.index==r?this.externalSibling(-1):new BufferNode(this.context,this._parent,n.findChild(r,this.index,-1,0,4))}get tree(){return null}toTree(){let n=[],r=[],{buffer:g}=this.context,y=this.index+4,k=g.buffer[this.index+3];if(k>y){let $=g.buffer[this.index+1];n.push(g.slice(y,k,$)),r.push(0)}return new Tree(this.type,n,r,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(e){if(!e.length)return null;let n=0,r=e[0];for(let k=1;k<e.length;k++){let $=e[k];($.from>r.from||$.to<r.to)&&(r=$,n=k)}let g=r instanceof TreeNode&&r.index<0?null:r.parent,y=e.slice();return g?y[n]=g:y.splice(n,1),new StackIterator(y,r)}class StackIterator{constructor(n,r){this.heads=n,this.node=r}get next(){return iterStack(this.heads)}}function stackIterator(e,n,r){let g=e.resolveInner(n,r),y=null;for(let k=g instanceof TreeNode?g:g.context.parent;k;k=k.parent)if(k.index<0){let $=k.parent;(y||(y=[g])).push($.resolve(n,r)),k=$}else{let $=MountedTree.get(k.tree);if($&&$.overlay&&$.overlay[0].from<=n&&$.overlay[$.overlay.length-1].to>=n){let V=new TreeNode($.tree,$.overlay[0].from+k.from,-1,k);(y||(y=[g])).push(resolveNode(V,n,r,!1))}}return y?iterStack(y):g}class TreeCursor{get name(){return this.type.name}constructor(n,r=0){if(this.mode=r,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,n instanceof TreeNode)this.yieldNode(n);else{this._tree=n.context.parent,this.buffer=n.context;for(let g=n._parent;g;g=g._parent)this.stack.unshift(g.index);this.bufferNode=n,this.yieldBuf(n.index)}}yieldNode(n){return n?(this._tree=n,this.type=n.type,this.from=n.from,this.to=n.to,!0):!1}yieldBuf(n,r){this.index=n;let{start:g,buffer:y}=this.buffer;return this.type=r||y.set.types[y.buffer[n]],this.from=g+y.buffer[n+1],this.to=g+y.buffer[n+2],!0}yield(n){return n?n instanceof TreeNode?(this.buffer=null,this.yieldNode(n)):(this.buffer=n.context,this.yieldBuf(n.index,n.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(n,r,g){if(!this.buffer)return this.yield(this._tree.nextChild(n<0?this._tree._tree.children.length-1:0,n,r,g,this.mode));let{buffer:y}=this.buffer,k=y.findChild(this.index+4,y.buffer[this.index+3],n,r-this.buffer.start,g);return k<0?!1:(this.stack.push(this.index),this.yieldBuf(k))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(n){return this.enterChild(1,n,2)}childBefore(n){return this.enterChild(-1,n,-2)}enter(n,r,g=this.mode){return this.buffer?g&IterMode.ExcludeBuffers?!1:this.enterChild(1,n,r):this.yield(this._tree.enter(n,r,g))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let n=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(n)}sibling(n){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+n,n,0,4,this.mode)):!1;let{buffer:r}=this.buffer,g=this.stack.length-1;if(n<0){let y=g<0?0:this.stack[g]+4;if(this.index!=y)return this.yieldBuf(r.findChild(y,this.index,-1,0,4))}else{let y=r.buffer[this.index+3];if(y<(g<0?r.buffer.length:r.buffer[this.stack[g]+3]))return this.yieldBuf(y)}return g<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+n,n,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(n){let r,g,{buffer:y}=this;if(y){if(n>0){if(this.index<y.buffer.buffer.length)return!1}else for(let k=0;k<this.index;k++)if(y.buffer.buffer[k+3]<this.index)return!1;({index:r,parent:g}=y)}else({index:r,_parent:g}=this._tree);for(;g;{index:r,_parent:g}=g)if(r>-1)for(let k=r+n,$=n<0?-1:g._tree.children.length;k!=$;k+=n){let V=g._tree.children[k];if(this.mode&IterMode.IncludeAnonymous||V instanceof TreeBuffer||!V.type.isAnonymous||hasChild(V))return!1}return!0}move(n,r){if(r&&this.enterChild(n,0,4))return!0;for(;;){if(this.sibling(n))return!0;if(this.atLastNode(n)||!this.parent())return!1}}next(n=!0){return this.move(1,n)}prev(n=!0){return this.move(-1,n)}moveTo(n,r=0){for(;(this.from==this.to||(r<1?this.from>=n:this.from>n)||(r>-1?this.to<=n:this.to<n))&&this.parent(););for(;this.enterChild(1,n,r););return this}get node(){if(!this.buffer)return this._tree;let n=this.bufferNode,r=null,g=0;if(n&&n.context==this.buffer)e:for(let y=this.index,k=this.stack.length;k>=0;){for(let $=n;$;$=$._parent)if($.index==y){if(y==this.index)return $;r=$,g=k+1;break e}y=this.stack[--k]}for(let y=g;y<this.stack.length;y++)r=new BufferNode(this.buffer,r,this.stack[y]);return this.bufferNode=new BufferNode(this.buffer,r,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(n,r){for(let g=0;;){let y=!1;if(this.type.isAnonymous||n(this)!==!1){if(this.firstChild()){g++;continue}this.type.isAnonymous||(y=!0)}for(;;){if(y&&r&&r(this),y=this.type.isAnonymous,!g)return;if(this.nextSibling())break;this.parent(),g--,y=!0}}}matchContext(n){if(!this.buffer)return matchNodeContext(this.node.parent,n);let{buffer:r}=this.buffer,{types:g}=r.set;for(let y=n.length-1,k=this.stack.length-1;y>=0;k--){if(k<0)return matchNodeContext(this._tree,n,y);let $=g[r.buffer[this.stack[k]]];if(!$.isAnonymous){if(n[y]&&n[y]!=$.name)return!1;y--}}return!0}}function hasChild(e){return e.children.some(n=>n instanceof TreeBuffer||!n.type.isAnonymous||hasChild(n))}function buildTree(e){var n;let{buffer:r,nodeSet:g,maxBufferLength:y=DefaultBufferLength,reused:k=[],minRepeatType:$=g.types.length}=e,V=Array.isArray(r)?new FlatBufferCursor(r,r.length):r,L=g.types,z=0,j=0;function ae($e,xe,Ie,ze,qe,Et){let{id:_n,start:Dt,end:Sn,size:hn}=V,Vn=j,Mn=z;for(;hn<0;)if(V.next(),hn==-1){let Fn=k[_n];Ie.push(Fn),ze.push(Dt-$e);return}else if(hn==-3){z=_n;return}else if(hn==-4){j=_n;return}else throw new RangeError(`Unrecognized record size: ${hn}`);let $n=L[_n],Nn,kn,jn=Dt-$e;if(Sn-Dt<=y&&(kn=de(V.pos-xe,qe))){let Fn=new Uint16Array(kn.size-kn.skip),Tn=V.pos-kn.size,Hn=Fn.length;for(;V.pos>Tn;)Hn=he(kn.start,Fn,Hn);Nn=new TreeBuffer(Fn,Sn-kn.start,g),jn=kn.start-$e}else{let Fn=V.pos-hn;V.next();let Tn=[],Hn=[],la=_n>=$?_n:-1,ca=0,Zn=Sn;for(;V.pos>Fn;)la>=0&&V.id==la&&V.size>=0?(V.end<=Zn-y&&(ue(Tn,Hn,Dt,ca,V.end,Zn,la,Vn,Mn),ca=Tn.length,Zn=V.end),V.next()):Et>2500?re(Dt,Fn,Tn,Hn):ae(Dt,Fn,Tn,Hn,la,Et+1);if(la>=0&&ca>0&&ca<Tn.length&&ue(Tn,Hn,Dt,ca,Dt,Zn,la,Vn,Mn),Tn.reverse(),Hn.reverse(),la>-1&&ca>0){let Bn=oe($n,Mn);Nn=balanceRange($n,Tn,Hn,0,Tn.length,0,Sn-Dt,Bn,Bn)}else Nn=le($n,Tn,Hn,Sn-Dt,Vn-Sn,Mn)}Ie.push(Nn),ze.push(jn)}function re($e,xe,Ie,ze){let qe=[],Et=0,_n=-1;for(;V.pos>xe;){let{id:Dt,start:Sn,end:hn,size:Vn}=V;if(Vn>4)V.next();else{if(_n>-1&&Sn<_n)break;_n<0&&(_n=hn-y),qe.push(Dt,Sn,hn),Et++,V.next()}}if(Et){let Dt=new Uint16Array(Et*4),Sn=qe[qe.length-2];for(let hn=qe.length-3,Vn=0;hn>=0;hn-=3)Dt[Vn++]=qe[hn],Dt[Vn++]=qe[hn+1]-Sn,Dt[Vn++]=qe[hn+2]-Sn,Dt[Vn++]=Vn;Ie.push(new TreeBuffer(Dt,qe[2]-Sn,g)),ze.push(Sn-$e)}}function oe($e,xe){return(Ie,ze,qe)=>{let Et=0,_n=Ie.length-1,Dt,Sn;if(_n>=0&&(Dt=Ie[_n])instanceof Tree){if(!_n&&Dt.type==$e&&Dt.length==qe)return Dt;(Sn=Dt.prop(NodeProp.lookAhead))&&(Et=ze[_n]+Dt.length+Sn)}return le($e,Ie,ze,qe,Et,xe)}}function ue($e,xe,Ie,ze,qe,Et,_n,Dt,Sn){let hn=[],Vn=[];for(;$e.length>ze;)hn.push($e.pop()),Vn.push(xe.pop()+Ie-qe);$e.push(le(g.types[_n],hn,Vn,Et-qe,Dt-Et,Sn)),xe.push(qe-Ie)}function le($e,xe,Ie,ze,qe,Et,_n){if(Et){let Dt=[NodeProp.contextHash,Et];_n=_n?[Dt].concat(_n):[Dt]}if(qe>25){let Dt=[NodeProp.lookAhead,qe];_n=_n?[Dt].concat(_n):[Dt]}return new Tree($e,xe,Ie,ze,_n)}function de($e,xe){let Ie=V.fork(),ze=0,qe=0,Et=0,_n=Ie.end-y,Dt={size:0,start:0,skip:0};e:for(let Sn=Ie.pos-$e;Ie.pos>Sn;){let hn=Ie.size;if(Ie.id==xe&&hn>=0){Dt.size=ze,Dt.start=qe,Dt.skip=Et,Et+=4,ze+=4,Ie.next();continue}let Vn=Ie.pos-hn;if(hn<0||Vn<Sn||Ie.start<_n)break;let Mn=Ie.id>=$?4:0,$n=Ie.start;for(Ie.next();Ie.pos>Vn;){if(Ie.size<0)if(Ie.size==-3)Mn+=4;else break e;else Ie.id>=$&&(Mn+=4);Ie.next()}qe=$n,ze+=hn,Et+=Mn}return(xe<0||ze==$e)&&(Dt.size=ze,Dt.start=qe,Dt.skip=Et),Dt.size>4?Dt:void 0}function he($e,xe,Ie){let{id:ze,start:qe,end:Et,size:_n}=V;if(V.next(),_n>=0&&ze<$){let Dt=Ie;if(_n>4){let Sn=V.pos-(_n-4);for(;V.pos>Sn;)Ie=he($e,xe,Ie)}xe[--Ie]=Dt,xe[--Ie]=Et-$e,xe[--Ie]=qe-$e,xe[--Ie]=ze}else _n==-3?z=ze:_n==-4&&(j=ze);return Ie}let _e=[],Ce=[];for(;V.pos>0;)ae(e.start||0,e.bufferStart||0,_e,Ce,-1,0);let Ne=(n=e.length)!==null&&n!==void 0?n:_e.length?Ce[0]+_e[0].length:0;return new Tree(L[e.topID],_e.reverse(),Ce.reverse(),Ne)}const nodeSizeCache=new WeakMap;function nodeSize(e,n){if(!e.isAnonymous||n instanceof TreeBuffer||n.type!=e)return 1;let r=nodeSizeCache.get(n);if(r==null){r=1;for(let g of n.children){if(g.type!=e||!(g instanceof Tree)){r=1;break}r+=nodeSize(e,g)}nodeSizeCache.set(n,r)}return r}function balanceRange(e,n,r,g,y,k,$,V,L){let z=0;for(let ue=g;ue<y;ue++)z+=nodeSize(e,n[ue]);let j=Math.ceil(z*1.5/8),ae=[],re=[];function oe(ue,le,de,he,_e){for(let Ce=de;Ce<he;){let Ne=Ce,$e=le[Ce],xe=nodeSize(e,ue[Ce]);for(Ce++;Ce<he;Ce++){let Ie=nodeSize(e,ue[Ce]);if(xe+Ie>=j)break;xe+=Ie}if(Ce==Ne+1){if(xe>j){let Ie=ue[Ne];oe(Ie.children,Ie.positions,0,Ie.children.length,le[Ne]+_e);continue}ae.push(ue[Ne])}else{let Ie=le[Ce-1]+ue[Ce-1].length-$e;ae.push(balanceRange(e,ue,le,Ne,Ce,$e,Ie,null,L))}re.push($e+_e-k)}}return oe(n,r,g,y,0),(V||L)(ae,re,$)}class NodeWeakMap{constructor(){this.map=new WeakMap}setBuffer(n,r,g){let y=this.map.get(n);y||this.map.set(n,y=new Map),y.set(r,g)}getBuffer(n,r){let g=this.map.get(n);return g&&g.get(r)}set(n,r){n instanceof BufferNode?this.setBuffer(n.context.buffer,n.index,r):n instanceof TreeNode&&this.map.set(n.tree,r)}get(n){return n instanceof BufferNode?this.getBuffer(n.context.buffer,n.index):n instanceof TreeNode?this.map.get(n.tree):void 0}cursorSet(n,r){n.buffer?this.setBuffer(n.buffer.buffer,n.index,r):this.map.set(n.tree,r)}cursorGet(n){return n.buffer?this.getBuffer(n.buffer.buffer,n.index):this.map.get(n.tree)}}class TreeFragment{constructor(n,r,g,y,k=!1,$=!1){this.from=n,this.to=r,this.tree=g,this.offset=y,this.open=(k?1:0)|($?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(n,r=[],g=!1){let y=[new TreeFragment(0,n.length,n,0,!1,g)];for(let k of r)k.to>n.length&&y.push(k);return y}static applyChanges(n,r,g=128){if(!r.length)return n;let y=[],k=1,$=n.length?n[0]:null;for(let V=0,L=0,z=0;;V++){let j=V<r.length?r[V]:null,ae=j?j.fromA:1e9;if(ae-L>=g)for(;$&&$.from<ae;){let re=$;if(L>=re.from||ae<=re.to||z){let oe=Math.max(re.from,L)-z,ue=Math.min(re.to,ae)-z;re=oe>=ue?null:new TreeFragment(oe,ue,re.tree,re.offset+z,V>0,!!j)}if(re&&y.push(re),$.to>ae)break;$=k<n.length?n[k++]:null}if(!j)break;L=j.toA,z=j.toA-j.toB}return y}}class Parser{startParse(n,r,g){return typeof n=="string"&&(n=new StringInput(n)),g=g?g.length?g.map(y=>new Range(y.from,y.to)):[new Range(0,0)]:[new Range(0,n.length)],this.createParse(n,r||[],g)}parse(n,r,g){let y=this.startParse(n,r,g);for(;;){let k=y.advance();if(k)return k}}}class StringInput{constructor(n){this.string=n}get length(){return this.string.length}chunk(n){return this.string.slice(n)}get lineChunks(){return!1}read(n,r){return this.string.slice(n,r)}}new NodeProp({perNode:!0});let nextTagID=0;class Tag{constructor(n,r,g,y){this.name=n,this.set=r,this.base=g,this.modified=y,this.id=nextTagID++}toString(){let{name:n}=this;for(let r of this.modified)r.name&&(n=`${r.name}(${n})`);return n}static define(n,r){let g=typeof n=="string"?n:"?";if(n instanceof Tag&&(r=n),r?.base)throw new Error("Can not derive from a modified tag");let y=new Tag(g,[],null,[]);if(y.set.push(y),r)for(let k of r.set)y.set.push(k);return y}static defineModifier(n){let r=new Modifier(n);return g=>g.modified.indexOf(r)>-1?g:Modifier.get(g.base||g,g.modified.concat(r).sort((y,k)=>y.id-k.id))}}let nextModifierID=0;class Modifier{constructor(n){this.name=n,this.instances=[],this.id=nextModifierID++}static get(n,r){if(!r.length)return n;let g=r[0].instances.find(V=>V.base==n&&sameArray(r,V.modified));if(g)return g;let y=[],k=new Tag(n.name,y,n,r);for(let V of r)V.instances.push(k);let $=powerSet(r);for(let V of n.set)if(!V.modified.length)for(let L of $)y.push(Modifier.get(V,L));return k}}function sameArray(e,n){return e.length==n.length&&e.every((r,g)=>r==n[g])}function powerSet(e){let n=[[]];for(let r=0;r<e.length;r++)for(let g=0,y=n.length;g<y;g++)n.push(n[g].concat(e[r]));return n.sort((r,g)=>g.length-r.length)}function styleTags(e){let n=Object.create(null);for(let r in e){let g=e[r];Array.isArray(g)||(g=[g]);for(let y of r.split(" "))if(y){let k=[],$=2,V=y;for(let ae=0;;){if(V=="..."&&ae>0&&ae+3==y.length){$=1;break}let re=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(V);if(!re)throw new RangeError("Invalid path: "+y);if(k.push(re[0]=="*"?"":re[0][0]=='"'?JSON.parse(re[0]):re[0]),ae+=re[0].length,ae==y.length)break;let oe=y[ae++];if(ae==y.length&&oe=="!"){$=0;break}if(oe!="/")throw new RangeError("Invalid path: "+y);V=y.slice(ae)}let L=k.length-1,z=k[L];if(!z)throw new RangeError("Invalid path: "+y);let j=new Rule(g,$,L>0?k.slice(0,L):null);n[z]=j.sort(n[z])}}return ruleNodeProp.add(n)}const ruleNodeProp=new NodeProp;class Rule{constructor(n,r,g,y){this.tags=n,this.mode=r,this.context=g,this.next=y}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(n){return!n||n.depth<this.depth?(this.next=n,this):(n.next=this.sort(n.next),n)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(e,n){let r=Object.create(null);for(let k of e)if(!Array.isArray(k.tag))r[k.tag.id]=k.class;else for(let $ of k.tag)r[$.id]=k.class;let{scope:g,all:y=null}=n||{};return{style:k=>{let $=y;for(let V of k)for(let L of V.set){let z=r[L.id];if(z){$=$?$+" "+z:z;break}}return $},scope:g}}function highlightTags(e,n){let r=null;for(let g of e){let y=g.style(n);y&&(r=r?r+" "+y:y)}return r}function highlightTree(e,n,r,g=0,y=e.length){let k=new HighlightBuilder(g,Array.isArray(n)?n:[n],r);k.highlightRange(e.cursor(),g,y,"",k.highlighters),k.flush(y)}class HighlightBuilder{constructor(n,r,g){this.at=n,this.highlighters=r,this.span=g,this.class=""}startSpan(n,r){r!=this.class&&(this.flush(n),n>this.at&&(this.at=n),this.class=r)}flush(n){n>this.at&&this.class&&this.span(this.at,n,this.class)}highlightRange(n,r,g,y,k){let{type:$,from:V,to:L}=n;if(V>=g||L<=r)return;$.isTop&&(k=this.highlighters.filter(oe=>!oe.scope||oe.scope($)));let z=y,j=getStyleTags(n)||Rule.empty,ae=highlightTags(k,j.tags);if(ae&&(z&&(z+=" "),z+=ae,j.mode==1&&(y+=(y?" ":"")+ae)),this.startSpan(Math.max(r,V),z),j.opaque)return;let re=n.tree&&n.tree.prop(NodeProp.mounted);if(re&&re.overlay){let oe=n.node.enter(re.overlay[0].from+V,1),ue=this.highlighters.filter(de=>!de.scope||de.scope(re.tree.type)),le=n.firstChild();for(let de=0,he=V;;de++){let _e=de<re.overlay.length?re.overlay[de]:null,Ce=_e?_e.from+V:L,Ne=Math.max(r,he),$e=Math.min(g,Ce);if(Ne<$e&&le)for(;n.from<$e&&(this.highlightRange(n,Ne,$e,y,k),this.startSpan(Math.min($e,n.to),z),!(n.to>=Ce||!n.nextSibling())););if(!_e||Ce>g)break;he=_e.to+V,he>r&&(this.highlightRange(oe.cursor(),Math.max(r,_e.from+V),Math.min(g,he),"",ue),this.startSpan(Math.min(g,he),z))}le&&n.parent()}else if(n.firstChild()){re&&(y="");do if(!(n.to<=r)){if(n.from>=g)break;this.highlightRange(n,r,g,y,k),this.startSpan(Math.min(g,n.to),z)}while(n.nextSibling());n.parent()}}}function getStyleTags(e){let n=e.type.prop(ruleNodeProp);for(;n&&n.context&&!e.matchContext(n.context);)n=n.next;return n||null}const t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier("definition"),constant:Tag.defineModifier("constant"),function:Tag.defineModifier("function"),standard:Tag.defineModifier("standard"),local:Tag.defineModifier("local"),special:Tag.defineModifier("special")};for(let e in tags){let n=tags[e];n instanceof Tag&&(n.name=e)}tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);var _a;const languageDataProp=new NodeProp;function defineLanguageFacet(e){return Facet.define({combine:e?n=>n.concat(e):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(n,r,g=[],y=""){this.data=n,this.name=y,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=r,this.extension=[language.of(this),EditorState.languageData.of((k,$,V)=>{let L=topNodeAt(k,$,V),z=L.type.prop(languageDataProp);if(!z)return[];let j=k.facet(z),ae=L.type.prop(sublanguageProp);if(ae){let re=L.resolve($-L.from,V);for(let oe of ae)if(oe.test(re,k)){let ue=k.facet(oe.facet);return oe.type=="replace"?ue:ue.concat(j)}}return j})].concat(g)}isActiveAt(n,r,g=-1){return topNodeAt(n,r,g).type.prop(languageDataProp)==this.data}findRegions(n){let r=n.facet(language);if(r?.data==this.data)return[{from:0,to:n.doc.length}];if(!r||!r.allowsNesting)return[];let g=[],y=(k,$)=>{if(k.prop(languageDataProp)==this.data){g.push({from:$,to:$+k.length});return}let V=k.prop(NodeProp.mounted);if(V){if(V.tree.prop(languageDataProp)==this.data){if(V.overlay)for(let L of V.overlay)g.push({from:L.from+$,to:L.to+$});else g.push({from:$,to:$+k.length});return}else if(V.overlay){let L=g.length;if(y(V.tree,V.overlay[0].from+$),g.length>L)return}}for(let L=0;L<k.children.length;L++){let z=k.children[L];z instanceof Tree&&y(z,k.positions[L]+$)}};return y(syntaxTree(n),0),g}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(e,n,r){let g=e.facet(language),y=syntaxTree(e).topNode;if(!g||g.allowsNesting)for(let k=y;k;k=k.enter(n,r,IterMode.ExcludeBuffers))k.type.isTop&&(y=k);return y}class LRLanguage extends Language{constructor(n,r,g){super(n,r,[],g),this.parser=r}static define(n){let r=defineLanguageFacet(n.languageData);return new LRLanguage(r,n.parser.configure({props:[languageDataProp.add(g=>g.isTop?r:void 0)]}),n.name)}configure(n,r){return new LRLanguage(this.data,this.parser.configure(n),r||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(e){let n=e.field(Language.state,!1);return n?n.tree:Tree.empty}class DocInput{constructor(n){this.doc=n,this.cursorPos=0,this.string="",this.cursor=n.iter()}get length(){return this.doc.length}syncTo(n){return this.string=this.cursor.next(n-this.cursorPos).value,this.cursorPos=n+this.string.length,this.cursorPos-this.string.length}chunk(n){return this.syncTo(n),this.string}get lineChunks(){return!0}read(n,r){let g=this.cursorPos-this.string.length;return n<g||r>=this.cursorPos?this.doc.sliceString(n,r):this.string.slice(n-g,r-g)}}let currentContext=null;class ParseContext{constructor(n,r,g=[],y,k,$,V,L){this.parser=n,this.state=r,this.fragments=g,this.tree=y,this.treeLen=k,this.viewport=$,this.skipped=V,this.scheduleOn=L,this.parse=null,this.tempSkipped=[]}static create(n,r,g){return new ParseContext(n,r,[],Tree.empty,0,g,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(n,r){return r!=null&&r>=this.state.doc.length&&(r=void 0),this.tree!=Tree.empty&&this.isDone(r??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var g;if(typeof n=="number"){let y=Date.now()+n;n=()=>Date.now()>y}for(this.parse||(this.parse=this.startParse()),r!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>r)&&r<this.state.doc.length&&this.parse.stopAt(r);;){let y=this.parse.advance();if(y)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(y,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(g=this.parse.stoppedAt)!==null&&g!==void 0?g:this.state.doc.length,this.tree=y,this.parse=null,this.treeLen<(r??this.state.doc.length))this.parse=this.startParse();else return!0;if(n())return!1}})}takeTree(){let n,r;this.parse&&(n=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&this.parse.stopAt(n),this.withContext(()=>{for(;!(r=this.parse.advance()););}),this.treeLen=n,this.tree=r,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(n){let r=currentContext;currentContext=this;try{return n()}finally{currentContext=r}}withoutTempSkipped(n){for(let r;r=this.tempSkipped.pop();)n=cutFragments(n,r.from,r.to);return n}changes(n,r){let{fragments:g,tree:y,treeLen:k,viewport:$,skipped:V}=this;if(this.takeTree(),!n.empty){let L=[];if(n.iterChangedRanges((z,j,ae,re)=>L.push({fromA:z,toA:j,fromB:ae,toB:re})),g=TreeFragment.applyChanges(g,L),y=Tree.empty,k=0,$={from:n.mapPos($.from,-1),to:n.mapPos($.to,1)},this.skipped.length){V=[];for(let z of this.skipped){let j=n.mapPos(z.from,1),ae=n.mapPos(z.to,-1);j<ae&&V.push({from:j,to:ae})}}}return new ParseContext(this.parser,r,g,y,k,$,V,this.scheduleOn)}updateViewport(n){if(this.viewport.from==n.from&&this.viewport.to==n.to)return!1;this.viewport=n;let r=this.skipped.length;for(let g=0;g<this.skipped.length;g++){let{from:y,to:k}=this.skipped[g];y<n.to&&k>n.from&&(this.fragments=cutFragments(this.fragments,y,k),this.skipped.splice(g--,1))}return this.skipped.length>=r?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(n,r){this.skipped.push({from:n,to:r})}static getSkippingParser(n){return new class extends Parser{createParse(r,g,y){let k=y[0].from,$=y[y.length-1].to;return{parsedPos:k,advance(){let L=currentContext;if(L){for(let z of y)L.tempSkipped.push(z);n&&(L.scheduleOn=L.scheduleOn?Promise.all([L.scheduleOn,n]):n)}return this.parsedPos=$,new Tree(NodeType.none,[],[],$-k)},stoppedAt:null,stopAt(){}}}}}isDone(n){n=Math.min(n,this.state.doc.length);let r=this.fragments;return this.treeLen>=n&&r.length&&r[0].from==0&&r[0].to>=n}static get(){return currentContext}}function cutFragments(e,n,r){return TreeFragment.applyChanges(e,[{fromA:n,toA:r,fromB:n,toB:r}])}class LanguageState{constructor(n){this.context=n,this.tree=n.tree}apply(n){if(!n.docChanged&&this.tree==this.context.tree)return this;let r=this.context.changes(n.changes,n.state),g=this.context.treeLen==n.startState.doc.length?void 0:Math.max(n.changes.mapPos(this.context.treeLen),r.viewport.to);return r.work(20,g)||r.takeTree(),new LanguageState(r)}static init(n){let r=Math.min(3e3,n.doc.length),g=ParseContext.create(n.facet(language).parser,n,{from:0,to:r});return g.work(20,r)||g.takeTree(),new LanguageState(g)}}Language.state=StateField.define({create:LanguageState.init,update(e,n){for(let r of n.effects)if(r.is(Language.setState))return r.value;return n.startState.facet(language)!=n.state.facet(language)?LanguageState.init(n.state):e.apply(n)}});let requestIdle=e=>{let n=setTimeout(()=>e(),500);return()=>clearTimeout(n)};typeof requestIdleCallback<"u"&&(requestIdle=e=>{let n=-1,r=setTimeout(()=>{n=requestIdleCallback(e,{timeout:400})},100);return()=>n<0?clearTimeout(r):cancelIdleCallback(n)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(n){this.view=n,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(n){let r=this.view.state.field(Language.state).context;(r.updateViewport(n.view.viewport)||this.view.viewport.to>r.treeLen)&&this.scheduleWork(),(n.docChanged||n.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(r)}scheduleWork(){if(this.working)return;let{state:n}=this.view,r=n.field(Language.state);(r.tree!=r.context.tree||!r.context.isDone(n.doc.length))&&(this.working=requestIdle(this.work))}work(n){this.working=null;let r=Date.now();if(this.chunkEnd<r&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=r+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:g,viewport:{to:y}}=this.view,k=g.field(Language.state);if(k.tree==k.context.tree&&k.context.isDone(y+1e5))return;let $=Date.now()+Math.min(this.chunkBudget,100,n&&!isInputPending?Math.max(25,n.timeRemaining()-5):1e9),V=k.context.treeLen<y&&g.doc.length>y+1e3,L=k.context.work(()=>isInputPending&&isInputPending()||Date.now()>$,y+(V?0:1e5));this.chunkBudget-=Date.now()-r,(L||this.chunkBudget<=0)&&(k.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(k.context))})),this.chunkBudget>0&&!(L&&!V)&&this.scheduleWork(),this.checkAsyncSchedule(k.context)}checkAsyncSchedule(n){n.scheduleOn&&(this.workScheduled++,n.scheduleOn.then(()=>this.scheduleWork()).catch(r=>logException(this.view.state,r)).then(()=>this.workScheduled--),n.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(e){return e.length?e[0]:null},enables:e=>[Language.state,parseWorker,EditorView.contentAttributes.compute([e],n=>{let r=n.facet(e);return r&&r.name?{"data-language":r.name}:{}})]});class LanguageSupport{constructor(n,r=[]){this.language=n,this.support=r,this.extension=[n,r]}}const indentService=Facet.define(),indentUnit=Facet.define({combine:e=>{if(!e.length)return"  ";let n=e[0];if(!n||/\S/.test(n)||Array.from(n).some(r=>r!=n[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return n}});function getIndentUnit(e){let n=e.facet(indentUnit);return n.charCodeAt(0)==9?e.tabSize*n.length:n.length}function indentString(e,n){let r="",g=e.tabSize,y=e.facet(indentUnit)[0];if(y=="	"){for(;n>=g;)r+="	",n-=g;y=" "}for(let k=0;k<n;k++)r+=y;return r}function getIndentation(e,n){e instanceof EditorState&&(e=new IndentContext(e));for(let g of e.state.facet(indentService)){let y=g(e,n);if(y!==void 0)return y}let r=syntaxTree(e.state);return r.length>=n?syntaxIndentation(e,r,n):null}class IndentContext{constructor(n,r={}){this.state=n,this.options=r,this.unit=getIndentUnit(n)}lineAt(n,r=1){let g=this.state.doc.lineAt(n),{simulateBreak:y,simulateDoubleBreak:k}=this.options;return y!=null&&y>=g.from&&y<=g.to?k&&y==n?{text:"",from:n}:(r<0?y<n:y<=n)?{text:g.text.slice(y-g.from),from:y}:{text:g.text.slice(0,y-g.from),from:g.from}:g}textAfterPos(n,r=1){if(this.options.simulateDoubleBreak&&n==this.options.simulateBreak)return"";let{text:g,from:y}=this.lineAt(n,r);return g.slice(n-y,Math.min(g.length,n+100-y))}column(n,r=1){let{text:g,from:y}=this.lineAt(n,r),k=this.countColumn(g,n-y),$=this.options.overrideIndentation?this.options.overrideIndentation(y):-1;return $>-1&&(k+=$-this.countColumn(g,g.search(/\S|$/))),k}countColumn(n,r=n.length){return countColumn(n,this.state.tabSize,r)}lineIndent(n,r=1){let{text:g,from:y}=this.lineAt(n,r),k=this.options.overrideIndentation;if(k){let $=k(y);if($>-1)return $}return this.countColumn(g,g.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(e,n,r){let g=n.resolveStack(r),y=n.resolveInner(r,-1).resolve(r,0).enterUnfinishedNodesBefore(r);if(y!=g.node){let k=[];for(let $=y;$&&!($.from==g.node.from&&$.type==g.node.type);$=$.parent)k.push($);for(let $=k.length-1;$>=0;$--)g={node:k[$],next:g}}return indentFor(g,e,r)}function indentFor(e,n,r){for(let g=e;g;g=g.next){let y=indentStrategy(g.node);if(y)return y(TreeIndentContext.create(n,r,g))}return 0}function ignoreClosed(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}function indentStrategy(e){let n=e.type.prop(indentNodeProp);if(n)return n;let r=e.firstChild,g;if(r&&(g=r.type.prop(NodeProp.closedBy))){let y=e.lastChild,k=y&&g.indexOf(y.name)>-1;return $=>delimitedStrategy($,!0,1,void 0,k&&!ignoreClosed($)?y.from:void 0)}return e.parent==null?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(n,r,g){super(n.state,n.options),this.base=n,this.pos=r,this.context=g}get node(){return this.context.node}static create(n,r,g){return new TreeIndentContext(n,r,g)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(n){let r=this.state.doc.lineAt(n.from);for(;;){let g=n.resolve(r.from);for(;g.parent&&g.parent.from==g.from;)g=g.parent;if(isParent(g,n))break;r=this.state.doc.lineAt(g.from)}return this.lineIndent(r.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(e,n){for(let r=n;r;r=r.parent)if(e==r)return!0;return!1}function bracketedAligned(e){let n=e.node,r=n.childAfter(n.from),g=n.lastChild;if(!r)return null;let y=e.options.simulateBreak,k=e.state.doc.lineAt(r.from),$=y==null||y<=k.from?k.to:Math.min(k.to,y);for(let V=r.to;;){let L=n.childAfter(V);if(!L||L==g)return null;if(!L.type.isSkipped){if(L.from>=$)return null;let z=/^ */.exec(k.text.slice(r.to-k.from))[0].length;return{from:r.from,to:r.to+z}}V=L.to}}function delimitedIndent({closing:e,align:n=!0,units:r=1}){return g=>delimitedStrategy(g,n,r,e)}function delimitedStrategy(e,n,r,g,y){let k=e.textAfter,$=k.match(/^\s*/)[0].length,V=g&&k.slice($,$+g.length)==g||y==e.pos+$,L=n?bracketedAligned(e):null;return L?V?e.column(L.from):e.column(L.to):e.baseIndent+(V?0:e.unit*r)}const flatIndent=e=>e.baseIndent;function continuedIndent({except:e,units:n=1}={}){return r=>{let g=e&&e.test(r.textAfter);return r.baseIndent+(g?0:n*r.unit)}}const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let n=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!n.length)return e;let r=e.newDoc,{head:g}=e.newSelection.main,y=r.lineAt(g);if(g>y.from+DontIndentBeyond)return e;let k=r.sliceString(y.from,g);if(!n.some(z=>z.test(k)))return e;let{state:$}=e,V=-1,L=[];for(let{head:z}of $.selection.ranges){let j=$.doc.lineAt(z);if(j.from==V)continue;V=j.from;let ae=getIndentation($,j.from);if(ae==null)continue;let re=/^\s*/.exec(j.text)[0],oe=indentString($,ae);re!=oe&&L.push({from:j.from,to:j.from+re.length,insert:oe})}return L.length?[e,{changes:L,sequential:!0}]:e})}const foldService=Facet.define(),foldNodeProp=new NodeProp;function foldInside(e){let n=e.firstChild,r=e.lastChild;return n&&n.to<r.from?{from:n.to,to:r.type.isError?e.to:r.from}:null}function syntaxFolding(e,n,r){let g=syntaxTree(e);if(g.length<r)return null;let y=g.resolveStack(r,1),k=null;for(let $=y;$;$=$.next){let V=$.node;if(V.to<=r||V.from>r)continue;if(k&&V.from<n)break;let L=V.type.prop(foldNodeProp);if(L&&(V.to<g.length-50||g.length==e.doc.length||!isUnfinished(V))){let z=L(V,e);z&&z.from<=r&&z.from>=n&&z.to>r&&(k=z)}}return k}function isUnfinished(e){let n=e.lastChild;return n&&n.to==e.to&&n.type.isError}function foldable(e,n,r){for(let g of e.facet(foldService)){let y=g(e,n,r);if(y)return y}return syntaxFolding(e,n,r)}function mapRange(e,n){let r=n.mapPos(e.from,1),g=n.mapPos(e.to,-1);return r>=g?void 0:{from:r,to:g}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(e){let n=[];for(let{head:r}of e.state.selection.ranges)n.some(g=>g.from<=r&&g.to>=r)||n.push(e.lineBlockAt(r));return n}const foldState=StateField.define({create(){return Decoration.none},update(e,n){e=e.map(n.changes);for(let r of n.effects)if(r.is(foldEffect)&&!foldExists(e,r.value.from,r.value.to)){let{preparePlaceholder:g}=n.state.facet(foldConfig),y=g?Decoration.replace({widget:new PreparedFoldWidget(g(n.state,r.value))}):foldWidget;e=e.update({add:[y.range(r.value.from,r.value.to)]})}else r.is(unfoldEffect)&&(e=e.update({filter:(g,y)=>r.value.from!=g||r.value.to!=y,filterFrom:r.value.from,filterTo:r.value.to}));if(n.selection){let r=!1,{head:g}=n.selection.main;e.between(g,g,(y,k)=>{y<g&&k>g&&(r=!0)}),r&&(e=e.update({filterFrom:g,filterTo:g,filter:(y,k)=>k<=g||y>=g}))}return e},provide:e=>EditorView.decorations.from(e),toJSON(e,n){let r=[];return e.between(0,n.doc.length,(g,y)=>{r.push(g,y)}),r},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let n=[];for(let r=0;r<e.length;){let g=e[r++],y=e[r++];if(typeof g!="number"||typeof y!="number")throw new RangeError("Invalid JSON for fold state");n.push(foldWidget.range(g,y))}return Decoration.set(n,!0)}});function findFold(e,n,r){var g;let y=null;return(g=e.field(foldState,!1))===null||g===void 0||g.between(n,r,(k,$)=>{(!y||y.from>k)&&(y={from:k,to:$})}),y}function foldExists(e,n,r){let g=!1;return e.between(n,n,(y,k)=>{y==n&&k==r&&(g=!0)}),g}function maybeEnable(e,n){return e.field(foldState,!1)?n:n.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=e=>{for(let n of selectedLines(e)){let r=foldable(e.state,n.from,n.to);if(r)return e.dispatch({effects:maybeEnable(e.state,[foldEffect.of(r),announceFold(e,r)])}),!0}return!1},unfoldCode=e=>{if(!e.state.field(foldState,!1))return!1;let n=[];for(let r of selectedLines(e)){let g=findFold(e.state,r.from,r.to);g&&n.push(unfoldEffect.of(g),announceFold(e,g,!1))}return n.length&&e.dispatch({effects:n}),n.length>0};function announceFold(e,n,r=!0){let g=e.state.doc.lineAt(n.from).number,y=e.state.doc.lineAt(n.to).number;return EditorView.announce.of(`${e.state.phrase(r?"Folded lines":"Unfolded lines")} ${g} ${e.state.phrase("to")} ${y}.`)}const foldAll=e=>{let{state:n}=e,r=[];for(let g=0;g<n.doc.length;){let y=e.lineBlockAt(g),k=foldable(n,y.from,y.to);k&&r.push(foldEffect.of(k)),g=(k?e.lineBlockAt(k.to):y).to+1}return r.length&&e.dispatch({effects:maybeEnable(e.state,r)}),!!r.length},unfoldAll=e=>{let n=e.state.field(foldState,!1);if(!n||!n.size)return!1;let r=[];return n.between(0,e.state.doc.length,(g,y)=>{r.push(unfoldEffect.of({from:g,to:y}))}),e.dispatch({effects:r}),!0},foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Ctrl-Alt-[",run:foldAll},{key:"Ctrl-Alt-]",run:unfoldAll}],defaultConfig={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},foldConfig=Facet.define({combine(e){return combineConfig(e,defaultConfig)}});function codeFolding(e){let n=[foldState,baseTheme$1$2];return e&&n.push(foldConfig.of(e)),n}function widgetToDOM(e,n){let{state:r}=e,g=r.facet(foldConfig),y=$=>{let V=e.lineBlockAt(e.posAtDOM($.target)),L=findFold(e.state,V.from,V.to);L&&e.dispatch({effects:unfoldEffect.of(L)}),$.preventDefault()};if(g.placeholderDOM)return g.placeholderDOM(e,y,n);let k=document.createElement("span");return k.textContent=g.placeholderText,k.setAttribute("aria-label",r.phrase("folded code")),k.title=r.phrase("unfold"),k.className="cm-foldPlaceholder",k.onclick=y,k}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(e){return widgetToDOM(e,null)}}});class PreparedFoldWidget extends WidgetType{constructor(n){super(),this.value=n}eq(n){return this.value==n.value}toDOM(n){return widgetToDOM(n,this.value)}}const foldGutterDefaults={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class FoldMarker extends GutterMarker{constructor(n,r){super(),this.config=n,this.open=r}eq(n){return this.config==n.config&&this.open==n.open}toDOM(n){if(this.config.markerDOM)return this.config.markerDOM(this.open);let r=document.createElement("span");return r.textContent=this.open?this.config.openText:this.config.closedText,r.title=n.state.phrase(this.open?"Fold line":"Unfold line"),r}}function foldGutter(e={}){let n=Object.assign(Object.assign({},foldGutterDefaults),e),r=new FoldMarker(n,!0),g=new FoldMarker(n,!1),y=ViewPlugin.fromClass(class{constructor($){this.from=$.viewport.from,this.markers=this.buildMarkers($)}update($){($.docChanged||$.viewportChanged||$.startState.facet(language)!=$.state.facet(language)||$.startState.field(foldState,!1)!=$.state.field(foldState,!1)||syntaxTree($.startState)!=syntaxTree($.state)||n.foldingChanged($))&&(this.markers=this.buildMarkers($.view))}buildMarkers($){let V=new RangeSetBuilder;for(let L of $.viewportLineBlocks){let z=findFold($.state,L.from,L.to)?g:foldable($.state,L.from,L.to)?r:null;z&&V.add(L.from,L.from,z)}return V.finish()}}),{domEventHandlers:k}=n;return[y,gutter({class:"cm-foldGutter",markers($){var V;return((V=$.plugin(y))===null||V===void 0?void 0:V.markers)||RangeSet.empty},initialSpacer(){return new FoldMarker(n,!1)},domEventHandlers:Object.assign(Object.assign({},k),{click:($,V,L)=>{if(k.click&&k.click($,V,L))return!0;let z=findFold($.state,V.from,V.to);if(z)return $.dispatch({effects:unfoldEffect.of(z)}),!0;let j=foldable($.state,V.from,V.to);return j?($.dispatch({effects:foldEffect.of(j)}),!0):!1}})}),codeFolding()]}const baseTheme$1$2=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(n,r){this.specs=n;let g;function y(V){let L=StyleModule.newName();return(g||(g=Object.create(null)))["."+L]=V,L}const k=typeof r.all=="string"?r.all:r.all?y(r.all):void 0,$=r.scope;this.scope=$ instanceof Language?V=>V.prop(languageDataProp)==$.data:$?V=>V==$:void 0,this.style=tagHighlighter(n.map(V=>({tag:V.tag,class:V.class||y(Object.assign({},V,{tag:null}))})),{all:k}).style,this.module=g?new StyleModule(g):null,this.themeType=r.themeType}static define(n,r){return new HighlightStyle(n,r||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(e){return e.length?[e[0]]:null}});function getHighlighters(e){let n=e.facet(highlighterFacet);return n.length?n:e.facet(fallbackHighlighter)}function syntaxHighlighting(e,n){let r=[treeHighlighter],g;return e instanceof HighlightStyle&&(e.module&&r.push(EditorView.styleModule.of(e.module)),g=e.themeType),n?.fallback?r.push(fallbackHighlighter.of(e)):g?r.push(highlighterFacet.computeN([EditorView.darkTheme],y=>y.facet(EditorView.darkTheme)==(g=="dark")?[e]:[])):r.push(highlighterFacet.of(e)),r}class TreeHighlighter{constructor(n){this.markCache=Object.create(null),this.tree=syntaxTree(n.state),this.decorations=this.buildDeco(n,getHighlighters(n.state)),this.decoratedTo=n.viewport.to}update(n){let r=syntaxTree(n.state),g=getHighlighters(n.state),y=g!=getHighlighters(n.startState),{viewport:k}=n.view,$=n.changes.mapPos(this.decoratedTo,1);r.length<k.to&&!y&&r.type==this.tree.type&&$>=k.to?(this.decorations=this.decorations.map(n.changes),this.decoratedTo=$):(r!=this.tree||n.viewportChanged||y)&&(this.tree=r,this.decorations=this.buildDeco(n.view,g),this.decoratedTo=k.to)}buildDeco(n,r){if(!r||!this.tree.length)return Decoration.none;let g=new RangeSetBuilder;for(let{from:y,to:k}of n.visibleRanges)highlightTree(this.tree,r,($,V,L)=>{g.add($,V,this.markCache[L]||(this.markCache[L]=Decoration.mark({class:L})))},y,k);return g.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:e=>e.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$3=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(e){return combineConfig(e,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(e){let n=[],r=e.matched?matchingMark:nonmatchingMark;return n.push(r.range(e.start.from,e.start.to)),e.end&&n.push(r.range(e.end.from,e.end.to)),n}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(e,n){if(!n.docChanged&&!n.selection)return e;let r=[],g=n.state.facet(bracketMatchingConfig);for(let y of n.state.selection.ranges){if(!y.empty)continue;let k=matchBrackets(n.state,y.head,-1,g)||y.head>0&&matchBrackets(n.state,y.head-1,1,g)||g.afterCursor&&(matchBrackets(n.state,y.head,1,g)||y.head<n.state.doc.length&&matchBrackets(n.state,y.head+1,-1,g));k&&(r=r.concat(g.renderMatch(k,n.state)))}return Decoration.set(r,!0)},provide:e=>EditorView.decorations.from(e)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$3];function bracketMatching(e={}){return[bracketMatchingConfig.of(e),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes(e,n,r){let g=e.prop(n<0?NodeProp.openedBy:NodeProp.closedBy);if(g)return g;if(e.name.length==1){let y=r.indexOf(e.name);if(y>-1&&y%2==(n<0?1:0))return[r[y+n]]}return null}function findHandle(e){let n=e.type.prop(bracketMatchingHandle);return n?n(e.node):e}function matchBrackets(e,n,r,g={}){let y=g.maxScanDistance||DefaultScanDist,k=g.brackets||DefaultBrackets,$=syntaxTree(e),V=$.resolveInner(n,r);for(let L=V;L;L=L.parent){let z=matchingNodes(L.type,r,k);if(z&&L.from<L.to){let j=findHandle(L);if(j&&(r>0?n>=j.from&&n<j.to:n>j.from&&n<=j.to))return matchMarkedBrackets(e,n,r,L,j,z,k)}}return matchPlainBrackets(e,n,r,$,V.type,y,k)}function matchMarkedBrackets(e,n,r,g,y,k,$){let V=g.parent,L={from:y.from,to:y.to},z=0,j=V?.cursor();if(j&&(r<0?j.childBefore(g.from):j.childAfter(g.to)))do if(r<0?j.to<=g.from:j.from>=g.to){if(z==0&&k.indexOf(j.type.name)>-1&&j.from<j.to){let ae=findHandle(j);return{start:L,end:ae?{from:ae.from,to:ae.to}:void 0,matched:!0}}else if(matchingNodes(j.type,r,$))z++;else if(matchingNodes(j.type,-r,$)){if(z==0){let ae=findHandle(j);return{start:L,end:ae&&ae.from<ae.to?{from:ae.from,to:ae.to}:void 0,matched:!1}}z--}}while(r<0?j.prevSibling():j.nextSibling());return{start:L,matched:!1}}function matchPlainBrackets(e,n,r,g,y,k,$){let V=r<0?e.sliceDoc(n-1,n):e.sliceDoc(n,n+1),L=$.indexOf(V);if(L<0||L%2==0!=r>0)return null;let z={from:r<0?n-1:n,to:r>0?n+1:n},j=e.doc.iterRange(n,r>0?e.doc.length:0),ae=0;for(let re=0;!j.next().done&&re<=k;){let oe=j.value;r<0&&(re+=oe.length);let ue=n+re*r;for(let le=r>0?0:oe.length-1,de=r>0?oe.length:-1;le!=de;le+=r){let he=$.indexOf(oe[le]);if(!(he<0||g.resolveInner(ue+le,1).type!=y))if(he%2==0==r>0)ae++;else{if(ae==1)return{start:z,end:{from:ue+le,to:ue+le+1},matched:he>>1==L>>1};ae--}}r>0&&(re+=oe.length)}return j.done?{start:z,matched:!1}:null}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[e,n]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[e]=createTokenType(noTokens,n);function warnForPart(e,n){warned.indexOf(e)>-1||(warned.push(e),console.warn(n))}function createTokenType(e,n){let r=[];for(let V of n.split(" ")){let L=[];for(let z of V.split(".")){let j=e[z]||tags[z];j?typeof j=="function"?L.length?L=L.map(j):warnForPart(z,`Modifier ${z} used at start of tag`):L.length?warnForPart(z,`Tag ${z} used as modifier`):L=Array.isArray(j)?j:[j]:warnForPart(z,`Unknown highlighting tag ${z}`)}for(let z of L)r.push(z)}if(!r.length)return 0;let g=n.replace(/ /g,"_"),y=g+" "+r.map(V=>V.id),k=byTag[y];if(k)return k.id;let $=byTag[y]=NodeType.define({id:typeArray.length,name:g,props:[styleTags({[g]:r})]});return typeArray.push($),$.id}Direction.RTL,Direction.LTR;const toggleComment=e=>{let{state:n}=e,r=n.doc.lineAt(n.selection.main.from),g=getConfig(e.state,r.from);return g.line?toggleLineComment(e):g.block?toggleBlockCommentByLine(e):!1};function command(e,n){return({state:r,dispatch:g})=>{if(r.readOnly)return!1;let y=e(n,r);return y?(g(r.update(y)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((e,n)=>changeBlockComment(e,n,selectedLineRanges(n)),0);function getConfig(e,n){let r=e.languageDataAt("commentTokens",n);return r.length?r[0]:{}}const SearchMargin=50;function findBlockComment(e,{open:n,close:r},g,y){let k=e.sliceDoc(g-SearchMargin,g),$=e.sliceDoc(y,y+SearchMargin),V=/\s*$/.exec(k)[0].length,L=/^\s*/.exec($)[0].length,z=k.length-V;if(k.slice(z-n.length,z)==n&&$.slice(L,L+r.length)==r)return{open:{pos:g-V,margin:V&&1},close:{pos:y+L,margin:L&&1}};let j,ae;y-g<=2*SearchMargin?j=ae=e.sliceDoc(g,y):(j=e.sliceDoc(g,g+SearchMargin),ae=e.sliceDoc(y-SearchMargin,y));let re=/^\s*/.exec(j)[0].length,oe=/\s*$/.exec(ae)[0].length,ue=ae.length-oe-r.length;return j.slice(re,re+n.length)==n&&ae.slice(ue,ue+r.length)==r?{open:{pos:g+re+n.length,margin:/\s/.test(j.charAt(re+n.length))?1:0},close:{pos:y-oe-r.length,margin:/\s/.test(ae.charAt(ue-1))?1:0}}:null}function selectedLineRanges(e){let n=[];for(let r of e.selection.ranges){let g=e.doc.lineAt(r.from),y=r.to<=g.to?g:e.doc.lineAt(r.to);y.from>g.from&&y.from==r.to&&(y=r.to==g.to+1?g:e.doc.lineAt(r.to-1));let k=n.length-1;k>=0&&n[k].to>g.from?n[k].to=y.to:n.push({from:g.from+/^\s*/.exec(g.text)[0].length,to:y.to})}return n}function changeBlockComment(e,n,r=n.selection.ranges){let g=r.map(k=>getConfig(n,k.from).block);if(!g.every(k=>k))return null;let y=r.map((k,$)=>findBlockComment(n,g[$],k.from,k.to));if(e!=2&&!y.every(k=>k))return{changes:n.changes(r.map((k,$)=>y[$]?[]:[{from:k.from,insert:g[$].open+" "},{from:k.to,insert:" "+g[$].close}]))};if(e!=1&&y.some(k=>k)){let k=[];for(let $=0,V;$<y.length;$++)if(V=y[$]){let L=g[$],{open:z,close:j}=V;k.push({from:z.pos-L.open.length,to:z.pos+z.margin},{from:j.pos-j.margin,to:j.pos+L.close.length})}return{changes:k}}return null}function changeLineComment(e,n,r=n.selection.ranges){let g=[],y=-1;for(let{from:k,to:$}of r){let V=g.length,L=1e9,z=getConfig(n,k).line;if(z){for(let j=k;j<=$;){let ae=n.doc.lineAt(j);if(ae.from>y&&(k==$||$>ae.from)){y=ae.from;let re=/^\s*/.exec(ae.text)[0].length,oe=re==ae.length,ue=ae.text.slice(re,re+z.length)==z?re:-1;re<ae.text.length&&re<L&&(L=re),g.push({line:ae,comment:ue,token:z,indent:re,empty:oe,single:!1})}j=ae.to+1}if(L<1e9)for(let j=V;j<g.length;j++)g[j].indent<g[j].line.text.length&&(g[j].indent=L);g.length==V+1&&(g[V].single=!0)}}if(e!=2&&g.some(k=>k.comment<0&&(!k.empty||k.single))){let k=[];for(let{line:V,token:L,indent:z,empty:j,single:ae}of g)(ae||!j)&&k.push({from:V.from+z,insert:L+" "});let $=n.changes(k);return{changes:$,selection:n.selection.map($,1)}}else if(e!=1&&g.some(k=>k.comment>=0)){let k=[];for(let{line:$,comment:V,token:L}of g)if(V>=0){let z=$.from+V,j=z+L.length;$.text[j-$.from]==" "&&j++,k.push({from:z,to:j})}return{changes:k}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(e){return combineConfig(e,{minDepth:100,newGroupDelay:500,joinToEvent:(n,r)=>r},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(n,r)=>(g,y)=>n(g,y)||r(g,y)})}}),historyField_=StateField.define({create(){return HistoryState.empty},update(e,n){let r=n.state.facet(historyConfig),g=n.annotation(fromHistory);if(g){let L=HistEvent.fromTransaction(n,g.selection),z=g.side,j=z==0?e.undone:e.done;return L?j=updateBranch(j,j.length,r.minDepth,L):j=addSelection(j,n.startState.selection),new HistoryState(z==0?g.rest:j,z==0?j:g.rest)}let y=n.annotation(isolateHistory);if((y=="full"||y=="before")&&(e=e.isolate()),n.annotation(Transaction.addToHistory)===!1)return n.changes.empty?e:e.addMapping(n.changes.desc);let k=HistEvent.fromTransaction(n),$=n.annotation(Transaction.time),V=n.annotation(Transaction.userEvent);return k?e=e.addChanges(k,$,V,r,n):n.selection&&(e=e.addSelection(n.startState.selection,$,V,r.newGroupDelay)),(y=="full"||y=="after")&&(e=e.isolate()),e},toJSON(e){return{done:e.done.map(n=>n.toJSON()),undone:e.undone.map(n=>n.toJSON())}},fromJSON(e){return new HistoryState(e.done.map(HistEvent.fromJSON),e.undone.map(HistEvent.fromJSON))}});function history$1(e={}){return[historyField_,historyConfig.of(e),EditorView.domEventHandlers({beforeinput(n,r){let g=n.inputType=="historyUndo"?undo$1:n.inputType=="historyRedo"?redo$1:null;return g?(n.preventDefault(),g(r)):!1}})]}function cmd(e,n){return function({state:r,dispatch:g}){if(!n&&r.readOnly)return!1;let y=r.field(historyField_,!1);if(!y)return!1;let k=y.pop(e,r,n);return k?(g(k),!0):!1}}const undo$1=cmd(0,!1),redo$1=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(n,r,g,y,k){this.changes=n,this.effects=r,this.mapped=g,this.startSelection=y,this.selectionsAfter=k}setSelAfter(n){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,n)}toJSON(){var n,r,g;return{changes:(n=this.changes)===null||n===void 0?void 0:n.toJSON(),mapped:(r=this.mapped)===null||r===void 0?void 0:r.toJSON(),startSelection:(g=this.startSelection)===null||g===void 0?void 0:g.toJSON(),selectionsAfter:this.selectionsAfter.map(y=>y.toJSON())}}static fromJSON(n){return new HistEvent(n.changes&&ChangeSet.fromJSON(n.changes),[],n.mapped&&ChangeDesc.fromJSON(n.mapped),n.startSelection&&EditorSelection.fromJSON(n.startSelection),n.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(n,r){let g=none$1;for(let y of n.startState.facet(invertedEffects)){let k=y(n);k.length&&(g=g.concat(k))}return!g.length&&n.changes.empty?null:new HistEvent(n.changes.invert(n.startState.doc),g,void 0,r||n.startState.selection,none$1)}static selection(n){return new HistEvent(void 0,none$1,void 0,void 0,n)}}function updateBranch(e,n,r,g){let y=n+1>r+20?n-r-1:0,k=e.slice(y,n);return k.push(g),k}function isAdjacent(e,n){let r=[],g=!1;return e.iterChangedRanges((y,k)=>r.push(y,k)),n.iterChangedRanges((y,k,$,V)=>{for(let L=0;L<r.length;){let z=r[L++],j=r[L++];V>=z&&$<=j&&(g=!0)}}),g}function eqSelectionShape(e,n){return e.ranges.length==n.ranges.length&&e.ranges.filter((r,g)=>r.empty!=n.ranges[g].empty).length===0}function conc(e,n){return e.length?n.length?e.concat(n):e:n}const none$1=[],MaxSelectionsPerEvent=200;function addSelection(e,n){if(e.length){let r=e[e.length-1],g=r.selectionsAfter.slice(Math.max(0,r.selectionsAfter.length-MaxSelectionsPerEvent));return g.length&&g[g.length-1].eq(n)?e:(g.push(n),updateBranch(e,e.length-1,1e9,r.setSelAfter(g)))}else return[HistEvent.selection([n])]}function popSelection(e){let n=e[e.length-1],r=e.slice();return r[e.length-1]=n.setSelAfter(n.selectionsAfter.slice(0,n.selectionsAfter.length-1)),r}function addMappingToBranch(e,n){if(!e.length)return e;let r=e.length,g=none$1;for(;r;){let y=mapEvent(e[r-1],n,g);if(y.changes&&!y.changes.empty||y.effects.length){let k=e.slice(0,r);return k[r-1]=y,k}else n=y.mapped,r--,g=y.selectionsAfter}return g.length?[HistEvent.selection(g)]:none$1}function mapEvent(e,n,r){let g=conc(e.selectionsAfter.length?e.selectionsAfter.map(V=>V.map(n)):none$1,r);if(!e.changes)return HistEvent.selection(g);let y=e.changes.map(n),k=n.mapDesc(e.changes,!0),$=e.mapped?e.mapped.composeDesc(k):k;return new HistEvent(y,StateEffect.mapEffects(e.effects,n),$,e.startSelection.map(k),g)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(n,r,g=0,y=void 0){this.done=n,this.undone=r,this.prevTime=g,this.prevUserEvent=y}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(n,r,g,y,k){let $=this.done,V=$[$.length-1];return V&&V.changes&&!V.changes.empty&&n.changes&&(!g||joinableUserEvent.test(g))&&(!V.selectionsAfter.length&&r-this.prevTime<y.newGroupDelay&&y.joinToEvent(k,isAdjacent(V.changes,n.changes))||g=="input.type.compose")?$=updateBranch($,$.length-1,y.minDepth,new HistEvent(n.changes.compose(V.changes),conc(StateEffect.mapEffects(n.effects,V.changes),V.effects),V.mapped,V.startSelection,none$1)):$=updateBranch($,$.length,y.minDepth,n),new HistoryState($,none$1,r,g)}addSelection(n,r,g,y){let k=this.done.length?this.done[this.done.length-1].selectionsAfter:none$1;return k.length>0&&r-this.prevTime<y&&g==this.prevUserEvent&&g&&/^select($|\.)/.test(g)&&eqSelectionShape(k[k.length-1],n)?this:new HistoryState(addSelection(this.done,n),this.undone,r,g)}addMapping(n){return new HistoryState(addMappingToBranch(this.done,n),addMappingToBranch(this.undone,n),this.prevTime,this.prevUserEvent)}pop(n,r,g){let y=n==0?this.done:this.undone;if(y.length==0)return null;let k=y[y.length-1],$=k.selectionsAfter[0]||r.selection;if(g&&k.selectionsAfter.length)return r.update({selection:k.selectionsAfter[k.selectionsAfter.length-1],annotations:fromHistory.of({side:n,rest:popSelection(y),selection:$}),userEvent:n==0?"select.undo":"select.redo",scrollIntoView:!0});if(k.changes){let V=y.length==1?none$1:y.slice(0,y.length-1);return k.mapped&&(V=addMappingToBranch(V,k.mapped)),r.update({changes:k.changes,selection:k.startSelection,effects:k.effects,annotations:fromHistory.of({side:n,rest:V,selection:$}),filter:!1,userEvent:n==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none$1,none$1);const historyKeymap=[{key:"Mod-z",run:undo$1,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo$1,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo$1,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(e,n){return EditorSelection.create(e.ranges.map(n),e.mainIndex)}function setSel(e,n){return e.update({selection:n,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:e,dispatch:n},r){let g=updateSel(e.selection,r);return g.eq(e.selection,!0)?!1:(n(setSel(e,g)),!0)}function rangeEnd(e,n){return EditorSelection.cursor(n?e.to:e.from)}function cursorByChar(e,n){return moveSel(e,r=>r.empty?e.moveByChar(r,n):rangeEnd(r,n))}function ltrAtCursor(e){return e.textDirectionAt(e.state.selection.main.head)==Direction.LTR}const cursorCharLeft=e=>cursorByChar(e,!ltrAtCursor(e)),cursorCharRight=e=>cursorByChar(e,ltrAtCursor(e));function cursorByGroup(e,n){return moveSel(e,r=>r.empty?e.moveByGroup(r,n):rangeEnd(r,n))}const cursorGroupLeft=e=>cursorByGroup(e,!ltrAtCursor(e)),cursorGroupRight=e=>cursorByGroup(e,ltrAtCursor(e));function interestingNode(e,n,r){if(n.type.prop(r))return!0;let g=n.to-n.from;return g&&(g>2||/[^\s,.;:]/.test(e.sliceDoc(n.from,n.to)))||n.firstChild}function moveBySyntax(e,n,r){let g=syntaxTree(e).resolveInner(n.head),y=r?NodeProp.closedBy:NodeProp.openedBy;for(let L=n.head;;){let z=r?g.childAfter(L):g.childBefore(L);if(!z)break;interestingNode(e,z,y)?g=z:L=r?z.to:z.from}let k=g.type.prop(y),$,V;return k&&($=r?matchBrackets(e,g.from,1):matchBrackets(e,g.to,-1))&&$.matched?V=r?$.end.to:$.end.from:V=r?g.to:g.from,EditorSelection.cursor(V,r?-1:1)}const cursorSyntaxLeft=e=>moveSel(e,n=>moveBySyntax(e.state,n,!ltrAtCursor(e))),cursorSyntaxRight=e=>moveSel(e,n=>moveBySyntax(e.state,n,ltrAtCursor(e)));function cursorByLine(e,n){return moveSel(e,r=>{if(!r.empty)return rangeEnd(r,n);let g=e.moveVertically(r,n);return g.head!=r.head?g:e.moveToLineBoundary(r,n)})}const cursorLineUp=e=>cursorByLine(e,!1),cursorLineDown=e=>cursorByLine(e,!0);function pageInfo(e){let n=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,r=0,g=0,y;if(n){for(let k of e.state.facet(EditorView.scrollMargins)){let $=k(e);$?.top&&(r=Math.max($?.top,r)),$?.bottom&&(g=Math.max($?.bottom,g))}y=e.scrollDOM.clientHeight-r-g}else y=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:g,selfScroll:n,height:Math.max(e.defaultLineHeight,y-5)}}function cursorByPage(e,n){let r=pageInfo(e),{state:g}=e,y=updateSel(g.selection,$=>$.empty?e.moveVertically($,n,r.height):rangeEnd($,n));if(y.eq(g.selection))return!1;let k;if(r.selfScroll){let $=e.coordsAtPos(g.selection.main.head),V=e.scrollDOM.getBoundingClientRect(),L=V.top+r.marginTop,z=V.bottom-r.marginBottom;$&&$.top>L&&$.bottom<z&&(k=EditorView.scrollIntoView(y.main.head,{y:"start",yMargin:$.top-L}))}return e.dispatch(setSel(g,y),{effects:k}),!0}const cursorPageUp=e=>cursorByPage(e,!1),cursorPageDown=e=>cursorByPage(e,!0);function moveByLineBoundary(e,n,r){let g=e.lineBlockAt(n.head),y=e.moveToLineBoundary(n,r);if(y.head==n.head&&y.head!=(r?g.to:g.from)&&(y=e.moveToLineBoundary(n,r,!1)),!r&&y.head==g.from&&g.length){let k=/^\s*/.exec(e.state.sliceDoc(g.from,Math.min(g.from+100,g.to)))[0].length;k&&n.head!=g.from+k&&(y=EditorSelection.cursor(g.from+k))}return y}const cursorLineBoundaryForward=e=>moveSel(e,n=>moveByLineBoundary(e,n,!0)),cursorLineBoundaryBackward=e=>moveSel(e,n=>moveByLineBoundary(e,n,!1)),cursorLineBoundaryLeft=e=>moveSel(e,n=>moveByLineBoundary(e,n,!ltrAtCursor(e))),cursorLineBoundaryRight=e=>moveSel(e,n=>moveByLineBoundary(e,n,ltrAtCursor(e))),cursorLineStart=e=>moveSel(e,n=>EditorSelection.cursor(e.lineBlockAt(n.head).from,1)),cursorLineEnd=e=>moveSel(e,n=>EditorSelection.cursor(e.lineBlockAt(n.head).to,-1));function toMatchingBracket(e,n,r){let g=!1,y=updateSel(e.selection,k=>{let $=matchBrackets(e,k.head,-1)||matchBrackets(e,k.head,1)||k.head>0&&matchBrackets(e,k.head-1,1)||k.head<e.doc.length&&matchBrackets(e,k.head+1,-1);if(!$||!$.end)return k;g=!0;let V=$.start.from==k.head?$.end.to:$.end.from;return r?EditorSelection.range(k.anchor,V):EditorSelection.cursor(V)});return g?(n(setSel(e,y)),!0):!1}const cursorMatchingBracket=({state:e,dispatch:n})=>toMatchingBracket(e,n,!1);function extendSel(e,n){let r=updateSel(e.state.selection,g=>{let y=n(g);return EditorSelection.range(g.anchor,y.head,y.goalColumn,y.bidiLevel||void 0)});return r.eq(e.state.selection)?!1:(e.dispatch(setSel(e.state,r)),!0)}function selectByChar(e,n){return extendSel(e,r=>e.moveByChar(r,n))}const selectCharLeft=e=>selectByChar(e,!ltrAtCursor(e)),selectCharRight=e=>selectByChar(e,ltrAtCursor(e));function selectByGroup(e,n){return extendSel(e,r=>e.moveByGroup(r,n))}const selectGroupLeft=e=>selectByGroup(e,!ltrAtCursor(e)),selectGroupRight=e=>selectByGroup(e,ltrAtCursor(e)),selectSyntaxLeft=e=>extendSel(e,n=>moveBySyntax(e.state,n,!ltrAtCursor(e))),selectSyntaxRight=e=>extendSel(e,n=>moveBySyntax(e.state,n,ltrAtCursor(e)));function selectByLine(e,n){return extendSel(e,r=>e.moveVertically(r,n))}const selectLineUp=e=>selectByLine(e,!1),selectLineDown=e=>selectByLine(e,!0);function selectByPage(e,n){return extendSel(e,r=>e.moveVertically(r,n,pageInfo(e).height))}const selectPageUp=e=>selectByPage(e,!1),selectPageDown=e=>selectByPage(e,!0),selectLineBoundaryForward=e=>extendSel(e,n=>moveByLineBoundary(e,n,!0)),selectLineBoundaryBackward=e=>extendSel(e,n=>moveByLineBoundary(e,n,!1)),selectLineBoundaryLeft=e=>extendSel(e,n=>moveByLineBoundary(e,n,!ltrAtCursor(e))),selectLineBoundaryRight=e=>extendSel(e,n=>moveByLineBoundary(e,n,ltrAtCursor(e))),selectLineStart=e=>extendSel(e,n=>EditorSelection.cursor(e.lineBlockAt(n.head).from)),selectLineEnd=e=>extendSel(e,n=>EditorSelection.cursor(e.lineBlockAt(n.head).to)),cursorDocStart=({state:e,dispatch:n})=>(n(setSel(e,{anchor:0})),!0),cursorDocEnd=({state:e,dispatch:n})=>(n(setSel(e,{anchor:e.doc.length})),!0),selectDocStart=({state:e,dispatch:n})=>(n(setSel(e,{anchor:e.selection.main.anchor,head:0})),!0),selectDocEnd=({state:e,dispatch:n})=>(n(setSel(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0),selectAll=({state:e,dispatch:n})=>(n(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0),selectLine=({state:e,dispatch:n})=>{let r=selectedLineBlocks(e).map(({from:g,to:y})=>EditorSelection.range(g,Math.min(y+1,e.doc.length)));return n(e.update({selection:EditorSelection.create(r),userEvent:"select"})),!0},selectParentSyntax=({state:e,dispatch:n})=>{let r=updateSel(e.selection,g=>{let y=syntaxTree(e),k=y.resolveStack(g.from,1);if(g.empty){let $=y.resolveStack(g.from,-1);$.node.from>=k.node.from&&$.node.to<=k.node.to&&(k=$)}for(let $=k;$;$=$.next){let{node:V}=$;if((V.from<g.from&&V.to>=g.to||V.to>g.to&&V.from<=g.from)&&$.next)return EditorSelection.range(V.to,V.from)}return g});return r.eq(e.selection)?!1:(n(setSel(e,r)),!0)},simplifySelection=({state:e,dispatch:n})=>{let r=e.selection,g=null;return r.ranges.length>1?g=EditorSelection.create([r.main]):r.main.empty||(g=EditorSelection.create([EditorSelection.cursor(r.main.head)])),g?(n(setSel(e,g)),!0):!1};function deleteBy(e,n){if(e.state.readOnly)return!1;let r="delete.selection",{state:g}=e,y=g.changeByRange(k=>{let{from:$,to:V}=k;if($==V){let L=n(k);L<$?(r="delete.backward",L=skipAtomic(e,L,!1)):L>$&&(r="delete.forward",L=skipAtomic(e,L,!0)),$=Math.min($,L),V=Math.max(V,L)}else $=skipAtomic(e,$,!1),V=skipAtomic(e,V,!0);return $==V?{range:k}:{changes:{from:$,to:V},range:EditorSelection.cursor($,$<k.head?-1:1)}});return y.changes.empty?!1:(e.dispatch(g.update(y,{scrollIntoView:!0,userEvent:r,effects:r=="delete.selection"?EditorView.announce.of(g.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(e,n,r){if(e instanceof EditorView)for(let g of e.state.facet(EditorView.atomicRanges).map(y=>y(e)))g.between(n,n,(y,k)=>{y<n&&k>n&&(n=r?k:y)});return n}const deleteByChar=(e,n,r)=>deleteBy(e,g=>{let y=g.from,{state:k}=e,$=k.doc.lineAt(y),V,L;if(r&&!n&&y>$.from&&y<$.from+200&&!/[^ \t]/.test(V=$.text.slice(0,y-$.from))){if(V[V.length-1]=="	")return y-1;let z=countColumn(V,k.tabSize),j=z%getIndentUnit(k)||getIndentUnit(k);for(let ae=0;ae<j&&V[V.length-1-ae]==" ";ae++)y--;L=y}else L=findClusterBreak($.text,y-$.from,n,n)+$.from,L==y&&$.number!=(n?k.doc.lines:1)?L+=n?1:-1:!n&&/[\ufe00-\ufe0f]/.test($.text.slice(L-$.from,y-$.from))&&(L=findClusterBreak($.text,L-$.from,!1,!1)+$.from);return L}),deleteCharBackward=e=>deleteByChar(e,!1,!0),deleteCharForward=e=>deleteByChar(e,!0,!1),deleteByGroup=(e,n)=>deleteBy(e,r=>{let g=r.head,{state:y}=e,k=y.doc.lineAt(g),$=y.charCategorizer(g);for(let V=null;;){if(g==(n?k.to:k.from)){g==r.head&&k.number!=(n?y.doc.lines:1)&&(g+=n?1:-1);break}let L=findClusterBreak(k.text,g-k.from,n)+k.from,z=k.text.slice(Math.min(g,L)-k.from,Math.max(g,L)-k.from),j=$(z);if(V!=null&&j!=V)break;(z!=" "||g!=r.head)&&(V=j),g=L}return g}),deleteGroupBackward=e=>deleteByGroup(e,!1),deleteGroupForward=e=>deleteByGroup(e,!0),deleteToLineEnd=e=>deleteBy(e,n=>{let r=e.lineBlockAt(n.head).to;return n.head<r?r:Math.min(e.state.doc.length,n.head+1)}),deleteLineBoundaryBackward=e=>deleteBy(e,n=>{let r=e.moveToLineBoundary(n,!1).head;return n.head>r?r:Math.max(0,n.head-1)}),deleteLineBoundaryForward=e=>deleteBy(e,n=>{let r=e.moveToLineBoundary(n,!0).head;return n.head<r?r:Math.min(e.state.doc.length,n.head+1)}),splitLine=({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(g=>({changes:{from:g.from,to:g.to,insert:Text.of(["",""])},range:EditorSelection.cursor(g.from)}));return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(g=>{if(!g.empty||g.from==0||g.from==e.doc.length)return{range:g};let y=g.from,k=e.doc.lineAt(y),$=y==k.from?y-1:findClusterBreak(k.text,y-k.from,!1)+k.from,V=y==k.to?y+1:findClusterBreak(k.text,y-k.from,!0)+k.from;return{changes:{from:$,to:V,insert:e.doc.slice(y,V).append(e.doc.slice($,y))},range:EditorSelection.cursor(V)}});return r.changes.empty?!1:(n(e.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(e){let n=[],r=-1;for(let g of e.selection.ranges){let y=e.doc.lineAt(g.from),k=e.doc.lineAt(g.to);if(!g.empty&&g.to==k.from&&(k=e.doc.lineAt(g.to-1)),r>=y.number){let $=n[n.length-1];$.to=k.to,$.ranges.push(g)}else n.push({from:y.from,to:k.to,ranges:[g]});r=k.number+1}return n}function moveLine(e,n,r){if(e.readOnly)return!1;let g=[],y=[];for(let k of selectedLineBlocks(e)){if(r?k.to==e.doc.length:k.from==0)continue;let $=e.doc.lineAt(r?k.to+1:k.from-1),V=$.length+1;if(r){g.push({from:k.to,to:$.to},{from:k.from,insert:$.text+e.lineBreak});for(let L of k.ranges)y.push(EditorSelection.range(Math.min(e.doc.length,L.anchor+V),Math.min(e.doc.length,L.head+V)))}else{g.push({from:$.from,to:k.from},{from:k.to,insert:e.lineBreak+$.text});for(let L of k.ranges)y.push(EditorSelection.range(L.anchor-V,L.head-V))}}return g.length?(n(e.update({changes:g,scrollIntoView:!0,selection:EditorSelection.create(y,e.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:e,dispatch:n})=>moveLine(e,n,!1),moveLineDown=({state:e,dispatch:n})=>moveLine(e,n,!0);function copyLine(e,n,r){if(e.readOnly)return!1;let g=[];for(let y of selectedLineBlocks(e))r?g.push({from:y.from,insert:e.doc.slice(y.from,y.to)+e.lineBreak}):g.push({from:y.to,insert:e.lineBreak+e.doc.slice(y.from,y.to)});return n(e.update({changes:g,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:e,dispatch:n})=>copyLine(e,n,!1),copyLineDown=({state:e,dispatch:n})=>copyLine(e,n,!0),deleteLine=e=>{if(e.state.readOnly)return!1;let{state:n}=e,r=n.changes(selectedLineBlocks(n).map(({from:y,to:k})=>(y>0?y--:k<n.doc.length&&k++,{from:y,to:k}))),g=updateSel(n.selection,y=>{let k;if(e.lineWrapping){let $=e.lineBlockAt(y.head),V=e.coordsAtPos(y.head,y.assoc||1);V&&(k=$.bottom+e.documentTop-V.bottom+e.defaultLineHeight/2)}return e.moveVertically(y,!0,k)}).map(r);return e.dispatch({changes:r,selection:g,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(e,n){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(n-1,n+1)))return{from:n,to:n};let r=syntaxTree(e).resolveInner(n),g=r.childBefore(n),y=r.childAfter(n),k;return g&&y&&g.to<=n&&y.from>=n&&(k=g.type.prop(NodeProp.closedBy))&&k.indexOf(y.name)>-1&&e.doc.lineAt(g.to).from==e.doc.lineAt(y.from).from&&!/\S/.test(e.sliceDoc(g.to,y.from))?{from:g.to,to:y.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let g=n.changeByRange(y=>{let{from:k,to:$}=y,V=n.doc.lineAt(k),L=!e&&k==$&&isBetweenBrackets(n,k);e&&(k=$=($<=V.to?V:n.doc.lineAt($)).to);let z=new IndentContext(n,{simulateBreak:k,simulateDoubleBreak:!!L}),j=getIndentation(z,k);for(j==null&&(j=countColumn(/^\s*/.exec(n.doc.lineAt(k).text)[0],n.tabSize));$<V.to&&/\s/.test(V.text[$-V.from]);)$++;L?{from:k,to:$}=L:k>V.from&&k<V.from+100&&!/\S/.test(V.text.slice(0,k))&&(k=V.from);let ae=["",indentString(n,j)];return L&&ae.push(indentString(n,z.lineIndent(V.from,-1))),{changes:{from:k,to:$,insert:Text.of(ae)},range:EditorSelection.cursor(k+1+ae[1].length)}});return r(n.update(g,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(e,n){let r=-1;return e.changeByRange(g=>{let y=[];for(let $=g.from;$<=g.to;){let V=e.doc.lineAt($);V.number>r&&(g.empty||g.to>V.from)&&(n(V,y,g),r=V.number),$=V.to+1}let k=e.changes(y);return{changes:y,range:EditorSelection.range(k.mapPos(g.anchor,1),k.mapPos(g.head,1))}})}const indentSelection=({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=Object.create(null),g=new IndentContext(e,{overrideIndentation:k=>{let $=r[k];return $??-1}}),y=changeBySelectedLine(e,(k,$,V)=>{let L=getIndentation(g,k.from);if(L==null)return;/\S/.test(k.text)||(L=0);let z=/^\s*/.exec(k.text)[0],j=indentString(e,L);(z!=j||V.from<k.from+z.length)&&(r[k.from]=L,$.push({from:k.from,to:k.from+z.length,insert:j}))});return y.changes.empty||n(e.update(y,{userEvent:"indent"})),!0},indentMore=({state:e,dispatch:n})=>e.readOnly?!1:(n(e.update(changeBySelectedLine(e,(r,g)=>{g.push({from:r.from,insert:e.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:e,dispatch:n})=>e.readOnly?!1:(n(e.update(changeBySelectedLine(e,(r,g)=>{let y=/^\s*/.exec(r.text)[0];if(!y)return;let k=countColumn(y,e.tabSize),$=0,V=indentString(e,Math.max(0,k-getIndentUnit(e)));for(;$<y.length&&$<V.length&&y.charCodeAt($)==V.charCodeAt($);)$++;g.push({from:r.from+$,to:r.from+y.length,insert:V.slice($)})}),{userEvent:"delete.dedent"})),!0),toggleTabFocusMode=e=>(e.setTabFocusMode(),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent,shift:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward},{mac:"Mod-Delete",run:deleteLineBoundaryForward}].concat(emacsStyleKeymap.map(e=>({mac:e.key,run:e.run,shift:e.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment},{key:"Ctrl-m",mac:"Shift-Alt-m",run:toggleTabFocusMode}].concat(standardKeymap);function crelt(){var e=arguments[0];typeof e=="string"&&(e=document.createElement(e));var n=1,r=arguments[1];if(r&&typeof r=="object"&&r.nodeType==null&&!Array.isArray(r)){for(var g in r)if(Object.prototype.hasOwnProperty.call(r,g)){var y=r[g];typeof y=="string"?e.setAttribute(g,y):y!=null&&(e[g]=y)}n++}for(;n<arguments.length;n++)add(e,arguments[n]);return e}function add(e,n){if(typeof n=="string")e.appendChild(document.createTextNode(n));else if(n!=null)if(n.nodeType!=null)e.appendChild(n);else if(Array.isArray(n))for(var r=0;r<n.length;r++)add(e,n[r]);else throw new RangeError("Unsupported child node: "+n)}const basicNormalize=typeof String.prototype.normalize=="function"?e=>e.normalize("NFKD"):e=>e;class SearchCursor{constructor(n,r,g=0,y=n.length,k,$){this.test=$,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=n.iterRange(g,y),this.bufferStart=g,this.normalize=k?V=>k(basicNormalize(V)):basicNormalize,this.query=this.normalize(r)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt$1(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let n=this.peek();if(n<0)return this.done=!0,this;let r=fromCodePoint(n),g=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(n);let y=this.normalize(r);if(y.length)for(let k=0,$=g;;k++){let V=y.charCodeAt(k),L=this.match(V,$,this.bufferPos+this.bufferStart);if(k==y.length-1){if(L)return this.value=L,this;break}$==g&&k<r.length&&r.charCodeAt(k)==V&&$++}}}match(n,r,g){let y=null;for(let k=0;k<this.matches.length;k+=2){let $=this.matches[k],V=!1;this.query.charCodeAt($)==n&&($==this.query.length-1?y={from:this.matches[k+1],to:g}:(this.matches[k]++,V=!0)),V||(this.matches.splice(k,2),k-=2)}return this.query.charCodeAt(0)==n&&(this.query.length==1?y={from:r,to:g}:this.matches.push(1,r)),y&&this.test&&!this.test(y.from,y.to,this.buffer,this.bufferStart)&&(y=null),y}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(n,r,g,y=0,k=n.length){if(this.text=n,this.to=k,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(r))return new MultilineRegExpCursor(n,r,g,y,k);this.re=new RegExp(r,baseFlags+(g?.ignoreCase?"i":"")),this.test=g?.test,this.iter=n.iter();let $=n.lineAt(y);this.curLineStart=$.from,this.matchPos=toCharEnd(n,y),this.getLine(this.curLineStart)}getLine(n){this.iter.next(n),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let n=this.matchPos-this.curLineStart;;){this.re.lastIndex=n;let r=this.matchPos<=this.to&&this.re.exec(this.curLine);if(r){let g=this.curLineStart+r.index,y=g+r[0].length;if(this.matchPos=toCharEnd(this.text,y+(g==y?1:0)),g==this.curLineStart+this.curLine.length&&this.nextLine(),(g<y||g>this.value.to)&&(!this.test||this.test(g,y,r)))return this.value={from:g,to:y,match:r},this;n=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),n=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(n,r){this.from=n,this.text=r}get to(){return this.from+this.text.length}static get(n,r,g){let y=flattened.get(n);if(!y||y.from>=g||y.to<=r){let V=new FlattenedDoc(r,n.sliceString(r,g));return flattened.set(n,V),V}if(y.from==r&&y.to==g)return y;let{text:k,from:$}=y;return $>r&&(k=n.sliceString(r,$)+k,$=r),y.to<g&&(k+=n.sliceString(y.to,g)),flattened.set(n,new FlattenedDoc($,k)),new FlattenedDoc(r,k.slice(r-$,g-$))}}class MultilineRegExpCursor{constructor(n,r,g,y,k){this.text=n,this.to=k,this.done=!1,this.value=empty,this.matchPos=toCharEnd(n,y),this.re=new RegExp(r,baseFlags+(g?.ignoreCase?"i":"")),this.test=g?.test,this.flat=FlattenedDoc.get(n,y,this.chunkEnd(y+5e3))}chunkEnd(n){return n>=this.to?this.to:this.text.lineAt(n).to}next(){for(;;){let n=this.re.lastIndex=this.matchPos-this.flat.from,r=this.re.exec(this.flat.text);if(r&&!r[0]&&r.index==n&&(this.re.lastIndex=n+1,r=this.re.exec(this.flat.text)),r){let g=this.flat.from+r.index,y=g+r[0].length;if((this.flat.to>=this.to||r.index+r[0].length<=this.flat.text.length-10)&&(!this.test||this.test(g,y,r)))return this.value={from:g,to:y,match:r},this.matchPos=toCharEnd(this.text,y+(g==y?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(e){try{return new RegExp(e,baseFlags),!0}catch{return!1}}function toCharEnd(e,n){if(n>=e.length)return n;let r=e.lineAt(n),g;for(;n<r.to&&(g=r.text.charCodeAt(n-r.from))>=56320&&g<57344;)n++;return n}function createLineDialog(e){let n=String(e.state.doc.lineAt(e.state.selection.main.head).number),r=crelt("input",{class:"cm-textfield",name:"line",value:n}),g=crelt("form",{class:"cm-gotoLine",onkeydown:k=>{k.keyCode==27?(k.preventDefault(),e.dispatch({effects:dialogEffect.of(!1)}),e.focus()):k.keyCode==13&&(k.preventDefault(),y())},onsubmit:k=>{k.preventDefault(),y()}},crelt("label",e.state.phrase("Go to line"),": ",r)," ",crelt("button",{class:"cm-button",type:"submit"},e.state.phrase("go")));function y(){let k=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(r.value);if(!k)return;let{state:$}=e,V=$.doc.lineAt($.selection.main.head),[,L,z,j,ae]=k,re=j?+j.slice(1):0,oe=z?+z:V.number;if(z&&ae){let de=oe/100;L&&(de=de*(L=="-"?-1:1)+V.number/$.doc.lines),oe=Math.round($.doc.lines*de)}else z&&L&&(oe=oe*(L=="-"?-1:1)+V.number);let ue=$.doc.line(Math.max(1,Math.min($.doc.lines,oe))),le=EditorSelection.cursor(ue.from+Math.max(0,Math.min(re,ue.length)));e.dispatch({effects:[dialogEffect.of(!1),EditorView.scrollIntoView(le.from,{y:"center"})],selection:le}),e.focus()}return{dom:g}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(e,n){for(let r of n.effects)r.is(dialogEffect)&&(e=r.value);return e},provide:e=>showPanel.from(e,n=>n?createLineDialog:null)}),gotoLine=e=>{let n=getPanel(e,createLineDialog);if(!n){let r=[dialogEffect.of(!0)];e.state.field(dialogField,!1)==null&&r.push(StateEffect.appendConfig.of([dialogField,baseTheme$1$1])),e.dispatch({effects:r}),n=getPanel(e,createLineDialog)}return n&&n.dom.querySelector("input").select(),!0},baseTheme$1$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),defaultHighlightOptions={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},highlightConfig=Facet.define({combine(e){return combineConfig(e,defaultHighlightOptions,{highlightWordAroundCursor:(n,r)=>n||r,minSelectionLength:Math.min,maxMatches:Math.min})}});function highlightSelectionMatches(e){let n=[defaultTheme,matchHighlighter];return e&&n.push(highlightConfig.of(e)),n}const matchDeco=Decoration.mark({class:"cm-selectionMatch"}),mainMatchDeco=Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries(e,n,r,g){return(r==0||e(n.sliceDoc(r-1,r))!=CharCategory.Word)&&(g==n.doc.length||e(n.sliceDoc(g,g+1))!=CharCategory.Word)}function insideWord(e,n,r,g){return e(n.sliceDoc(r,r+1))==CharCategory.Word&&e(n.sliceDoc(g-1,g))==CharCategory.Word}const matchHighlighter=ViewPlugin.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let n=e.state.facet(highlightConfig),{state:r}=e,g=r.selection;if(g.ranges.length>1)return Decoration.none;let y=g.main,k,$=null;if(y.empty){if(!n.highlightWordAroundCursor)return Decoration.none;let L=r.wordAt(y.head);if(!L)return Decoration.none;$=r.charCategorizer(y.head),k=r.sliceDoc(L.from,L.to)}else{let L=y.to-y.from;if(L<n.minSelectionLength||L>200)return Decoration.none;if(n.wholeWords){if(k=r.sliceDoc(y.from,y.to),$=r.charCategorizer(y.head),!(insideWordBoundaries($,r,y.from,y.to)&&insideWord($,r,y.from,y.to)))return Decoration.none}else if(k=r.sliceDoc(y.from,y.to),!k)return Decoration.none}let V=[];for(let L of e.visibleRanges){let z=new SearchCursor(r.doc,k,L.from,L.to);for(;!z.next().done;){let{from:j,to:ae}=z.value;if((!$||insideWordBoundaries($,r,j,ae))&&(y.empty&&j<=y.from&&ae>=y.to?V.push(mainMatchDeco.range(j,ae)):(j>=y.to||ae<=y.from)&&V.push(matchDeco.range(j,ae)),V.length>n.maxMatches))return Decoration.none}}return Decoration.set(V)}},{decorations:e=>e.decorations}),defaultTheme=EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),selectWord=({state:e,dispatch:n})=>{let{selection:r}=e,g=EditorSelection.create(r.ranges.map(y=>e.wordAt(y.head)||EditorSelection.cursor(y.head)),r.mainIndex);return g.eq(r)?!1:(n(e.update({selection:g})),!0)};function findNextOccurrence(e,n){let{main:r,ranges:g}=e.selection,y=e.wordAt(r.head),k=y&&y.from==r.from&&y.to==r.to;for(let $=!1,V=new SearchCursor(e.doc,n,g[g.length-1].to);;)if(V.next(),V.done){if($)return null;V=new SearchCursor(e.doc,n,0,Math.max(0,g[g.length-1].from-1)),$=!0}else{if($&&g.some(L=>L.from==V.value.from))continue;if(k){let L=e.wordAt(V.value.from);if(!L||L.from!=V.value.from||L.to!=V.value.to)continue}return V.value}}const selectNextOccurrence=({state:e,dispatch:n})=>{let{ranges:r}=e.selection;if(r.some(k=>k.from===k.to))return selectWord({state:e,dispatch:n});let g=e.sliceDoc(r[0].from,r[0].to);if(e.selection.ranges.some(k=>e.sliceDoc(k.from,k.to)!=g))return!1;let y=findNextOccurrence(e,g);return y?(n(e.update({selection:e.selection.addRange(EditorSelection.range(y.from,y.to),!1),effects:EditorView.scrollIntoView(y.to)})),!0):!1},searchConfigFacet=Facet.define({combine(e){return combineConfig(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:n=>new SearchPanel(n),scrollToMatch:n=>EditorView.scrollIntoView(n)})}});class SearchQuery{constructor(n){this.search=n.search,this.caseSensitive=!!n.caseSensitive,this.literal=!!n.literal,this.regexp=!!n.regexp,this.replace=n.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!n.wholeWord}unquote(n){return this.literal?n:n.replace(/\\([nrt\\])/g,(r,g)=>g=="n"?`
`:g=="r"?"\r":g=="t"?"	":"\\")}eq(n){return this.search==n.search&&this.replace==n.replace&&this.caseSensitive==n.caseSensitive&&this.regexp==n.regexp&&this.wholeWord==n.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(n,r=0,g){let y=n.doc?n:EditorState.create({doc:n});return g==null&&(g=y.doc.length),this.regexp?regexpCursor(this,y,r,g):stringCursor(this,y,r,g)}}class QueryType{constructor(n){this.spec=n}}function stringCursor(e,n,r,g){return new SearchCursor(n.doc,e.unquoted,r,g,e.caseSensitive?void 0:y=>y.toLowerCase(),e.wholeWord?stringWordTest(n.doc,n.charCategorizer(n.selection.main.head)):void 0)}function stringWordTest(e,n){return(r,g,y,k)=>((k>r||k+y.length<g)&&(k=Math.max(0,r-2),y=e.sliceString(k,Math.min(e.length,g+2))),(n(charBefore(y,r-k))!=CharCategory.Word||n(charAfter(y,r-k))!=CharCategory.Word)&&(n(charAfter(y,g-k))!=CharCategory.Word||n(charBefore(y,g-k))!=CharCategory.Word))}class StringQuery extends QueryType{constructor(n){super(n)}nextMatch(n,r,g){let y=stringCursor(this.spec,n,g,n.doc.length).nextOverlapping();if(y.done){let k=Math.min(n.doc.length,r+this.spec.unquoted.length);y=stringCursor(this.spec,n,0,k).nextOverlapping()}return y.done||y.value.from==r&&y.value.to==g?null:y.value}prevMatchInRange(n,r,g){for(let y=g;;){let k=Math.max(r,y-1e4-this.spec.unquoted.length),$=stringCursor(this.spec,n,k,y),V=null;for(;!$.nextOverlapping().done;)V=$.value;if(V)return V;if(k==r)return null;y-=1e4}}prevMatch(n,r,g){let y=this.prevMatchInRange(n,0,r);return y||(y=this.prevMatchInRange(n,Math.max(0,g-this.spec.unquoted.length),n.doc.length)),y&&(y.from!=r||y.to!=g)?y:null}getReplacement(n){return this.spec.unquote(this.spec.replace)}matchAll(n,r){let g=stringCursor(this.spec,n,0,n.doc.length),y=[];for(;!g.next().done;){if(y.length>=r)return null;y.push(g.value)}return y}highlight(n,r,g,y){let k=stringCursor(this.spec,n,Math.max(0,r-this.spec.unquoted.length),Math.min(g+this.spec.unquoted.length,n.doc.length));for(;!k.next().done;)y(k.value.from,k.value.to)}}function regexpCursor(e,n,r,g){return new RegExpCursor(n.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?regexpWordTest(n.charCategorizer(n.selection.main.head)):void 0},r,g)}function charBefore(e,n){return e.slice(findClusterBreak(e,n,!1),n)}function charAfter(e,n){return e.slice(n,findClusterBreak(e,n))}function regexpWordTest(e){return(n,r,g)=>!g[0].length||(e(charBefore(g.input,g.index))!=CharCategory.Word||e(charAfter(g.input,g.index))!=CharCategory.Word)&&(e(charAfter(g.input,g.index+g[0].length))!=CharCategory.Word||e(charBefore(g.input,g.index+g[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(n,r,g){let y=regexpCursor(this.spec,n,g,n.doc.length).next();return y.done&&(y=regexpCursor(this.spec,n,0,r).next()),y.done?null:y.value}prevMatchInRange(n,r,g){for(let y=1;;y++){let k=Math.max(r,g-y*1e4),$=regexpCursor(this.spec,n,k,g),V=null;for(;!$.next().done;)V=$.value;if(V&&(k==r||V.from>k+10))return V;if(k==r)return null}}prevMatch(n,r,g){return this.prevMatchInRange(n,0,r)||this.prevMatchInRange(n,g,n.doc.length)}getReplacement(n){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(r,g)=>g=="$"?"$":g=="&"?n.match[0]:g!="0"&&+g<n.match.length?n.match[g]:r)}matchAll(n,r){let g=regexpCursor(this.spec,n,0,n.doc.length),y=[];for(;!g.next().done;){if(y.length>=r)return null;y.push(g.value)}return y}highlight(n,r,g,y){let k=regexpCursor(this.spec,n,Math.max(0,r-250),Math.min(g+250,n.doc.length));for(;!k.next().done;)y(k.value.from,k.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(e){return new SearchState(defaultQuery(e).create(),null)},update(e,n){for(let r of n.effects)r.is(setSearchQuery)?e=new SearchState(r.value.create(),e.panel):r.is(togglePanel$1)&&(e=new SearchState(e.query,r.value?createSearchPanel:null));return e},provide:e=>showPanel.from(e,n=>n.panel)});class SearchState{constructor(n,r){this.query=n,this.panel=r}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(searchState))}update(e){let n=e.state.field(searchState);(n!=e.startState.field(searchState)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(n))}highlight({query:e,panel:n}){if(!n||!e.spec.valid)return Decoration.none;let{view:r}=this,g=new RangeSetBuilder;for(let y=0,k=r.visibleRanges,$=k.length;y<$;y++){let{from:V,to:L}=k[y];for(;y<$-1&&L>k[y+1].from-2*250;)L=k[++y].to;e.highlight(r.state,V,L,(z,j)=>{let ae=r.state.selection.ranges.some(re=>re.from==z&&re.to==j);g.add(z,j,ae?selectedMatchMark:matchMark)})}return g.finish()}},{decorations:e=>e.decorations});function searchCommand(e){return n=>{let r=n.state.field(searchState,!1);return r&&r.query.spec.valid?e(n,r):openSearchPanel(n)}}const findNext=searchCommand((e,{query:n})=>{let{to:r}=e.state.selection.main,g=n.nextMatch(e.state,r,r);if(!g)return!1;let y=EditorSelection.single(g.from,g.to),k=e.state.facet(searchConfigFacet);return e.dispatch({selection:y,effects:[announceMatch(e,g),k.scrollToMatch(y.main,e)],userEvent:"select.search"}),selectSearchInput(e),!0}),findPrevious=searchCommand((e,{query:n})=>{let{state:r}=e,{from:g}=r.selection.main,y=n.prevMatch(r,g,g);if(!y)return!1;let k=EditorSelection.single(y.from,y.to),$=e.state.facet(searchConfigFacet);return e.dispatch({selection:k,effects:[announceMatch(e,y),$.scrollToMatch(k.main,e)],userEvent:"select.search"}),selectSearchInput(e),!0}),selectMatches=searchCommand((e,{query:n})=>{let r=n.matchAll(e.state,1e3);return!r||!r.length?!1:(e.dispatch({selection:EditorSelection.create(r.map(g=>EditorSelection.range(g.from,g.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:e,dispatch:n})=>{let r=e.selection;if(r.ranges.length>1||r.main.empty)return!1;let{from:g,to:y}=r.main,k=[],$=0;for(let V=new SearchCursor(e.doc,e.sliceDoc(g,y));!V.next().done;){if(k.length>1e3)return!1;V.value.from==g&&($=k.length),k.push(EditorSelection.range(V.value.from,V.value.to))}return n(e.update({selection:EditorSelection.create(k,$),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((e,{query:n})=>{let{state:r}=e,{from:g,to:y}=r.selection.main;if(r.readOnly)return!1;let k=n.nextMatch(r,g,g);if(!k)return!1;let $=k,V=[],L,z,j=[];if($.from==g&&$.to==y&&(z=r.toText(n.getReplacement($)),V.push({from:$.from,to:$.to,insert:z}),$=n.nextMatch(r,$.from,$.to),j.push(EditorView.announce.of(r.phrase("replaced match on line $",r.doc.lineAt(g).number)+"."))),$){let ae=V.length==0||V[0].from>=k.to?0:k.to-k.from-z.length;L=EditorSelection.single($.from-ae,$.to-ae),j.push(announceMatch(e,$)),j.push(r.facet(searchConfigFacet).scrollToMatch(L.main,e))}return e.dispatch({changes:V,selection:L,effects:j,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((e,{query:n})=>{if(e.state.readOnly)return!1;let r=n.matchAll(e.state,1e9).map(y=>{let{from:k,to:$}=y;return{from:k,to:$,insert:n.getReplacement(y)}});if(!r.length)return!1;let g=e.state.phrase("replaced $ matches",r.length)+".";return e.dispatch({changes:r,effects:EditorView.announce.of(g),userEvent:"input.replace.all"}),!0});function createSearchPanel(e){return e.state.facet(searchConfigFacet).createPanel(e)}function defaultQuery(e,n){var r,g,y,k,$;let V=e.selection.main,L=V.empty||V.to>V.from+100?"":e.sliceDoc(V.from,V.to);if(n&&!L)return n;let z=e.facet(searchConfigFacet);return new SearchQuery({search:((r=n?.literal)!==null&&r!==void 0?r:z.literal)?L:L.replace(/\n/g,"\\n"),caseSensitive:(g=n?.caseSensitive)!==null&&g!==void 0?g:z.caseSensitive,literal:(y=n?.literal)!==null&&y!==void 0?y:z.literal,regexp:(k=n?.regexp)!==null&&k!==void 0?k:z.regexp,wholeWord:($=n?.wholeWord)!==null&&$!==void 0?$:z.wholeWord})}function getSearchInput(e){let n=getPanel(e,createSearchPanel);return n&&n.dom.querySelector("[main-field]")}function selectSearchInput(e){let n=getSearchInput(e);n&&n==e.root.activeElement&&n.select()}const openSearchPanel=e=>{let n=e.state.field(searchState,!1);if(n&&n.panel){let r=getSearchInput(e);if(r&&r!=e.root.activeElement){let g=defaultQuery(e.state,n.query.spec);g.valid&&e.dispatch({effects:setSearchQuery.of(g)}),r.focus(),r.select()}}else e.dispatch({effects:[togglePanel$1.of(!0),n?setSearchQuery.of(defaultQuery(e.state,n.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=e=>{let n=e.state.field(searchState,!1);if(!n||!n.panel)return!1;let r=getPanel(e,createSearchPanel);return r&&r.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:togglePanel$1.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Mod-Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor(n){this.view=n;let r=this.query=n.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:r.search,placeholder:phrase(n,"Find"),"aria-label":phrase(n,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:r.replace,placeholder:phrase(n,"Replace"),"aria-label":phrase(n,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:r.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:r.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:r.wholeWord,onchange:this.commit});function g(y,k,$){return crelt("button",{class:"cm-button",name:y,onclick:k,type:"button"},$)}this.dom=crelt("div",{onkeydown:y=>this.keydown(y),class:"cm-search"},[this.searchField,g("next",()=>findNext(n),[phrase(n,"next")]),g("prev",()=>findPrevious(n),[phrase(n,"previous")]),g("select",()=>selectMatches(n),[phrase(n,"all")]),crelt("label",null,[this.caseField,phrase(n,"match case")]),crelt("label",null,[this.reField,phrase(n,"regexp")]),crelt("label",null,[this.wordField,phrase(n,"by word")]),...n.state.readOnly?[]:[crelt("br"),this.replaceField,g("replace",()=>replaceNext(n),[phrase(n,"replace")]),g("replaceAll",()=>replaceAll(n),[phrase(n,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(n),"aria-label":phrase(n,"close"),type:"button"},[""])])}commit(){let n=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});n.eq(this.query)||(this.query=n,this.view.dispatch({effects:setSearchQuery.of(n)}))}keydown(n){runScopeHandlers(this.view,n,"search-panel")?n.preventDefault():n.keyCode==13&&n.target==this.searchField?(n.preventDefault(),(n.shiftKey?findPrevious:findNext)(this.view)):n.keyCode==13&&n.target==this.replaceField&&(n.preventDefault(),replaceNext(this.view))}update(n){for(let r of n.transactions)for(let g of r.effects)g.is(setSearchQuery)&&!g.value.eq(this.query)&&this.setQuery(g.value)}setQuery(n){this.query=n,this.searchField.value=n.search,this.replaceField.value=n.replace,this.caseField.checked=n.caseSensitive,this.reField.checked=n.regexp,this.wordField.checked=n.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(e,n){return e.state.phrase(n)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(e,{from:n,to:r}){let g=e.state.doc.lineAt(n),y=e.state.doc.lineAt(r).to,k=Math.max(g.from,n-AnnounceMargin),$=Math.min(y,r+AnnounceMargin),V=e.state.sliceDoc(k,$);if(k!=g.from){for(let L=0;L<AnnounceMargin;L++)if(!Break.test(V[L+1])&&Break.test(V[L])){V=V.slice(L);break}}if($!=y){for(let L=V.length-1;L>V.length-AnnounceMargin;L--)if(!Break.test(V[L-1])&&Break.test(V[L])){V=V.slice(0,L);break}}return EditorView.announce.of(`${e.state.phrase("current match")}. ${V} ${e.state.phrase("on line")} ${g.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.low(searchHighlighter),baseTheme$2];class CompletionContext{constructor(n,r,g,y){this.state=n,this.pos=r,this.explicit=g,this.view=y,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(n){let r=syntaxTree(this.state).resolveInner(this.pos,-1);for(;r&&n.indexOf(r.name)<0;)r=r.parent;return r?{from:r.from,to:this.pos,text:this.state.sliceDoc(r.from,this.pos),type:r.type}:null}matchBefore(n){let r=this.state.doc.lineAt(this.pos),g=Math.max(r.from,this.pos-250),y=r.text.slice(g-r.from,this.pos-r.from),k=y.search(ensureAnchor(n,!1));return k<0?null:{from:g+k,to:this.pos,text:y.slice(k)}}get aborted(){return this.abortListeners==null}addEventListener(n,r,g){n=="abort"&&this.abortListeners&&(this.abortListeners.push(r),g&&g.onDocChange&&(this.abortOnDocChange=!0))}}function toSet(e){let n=Object.keys(e).join(""),r=/\w/.test(n);return r&&(n=n.replace(/\w/g,"")),`[${r?"\\w":""}${n.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(e){let n=Object.create(null),r=Object.create(null);for(let{label:y}of e){n[y[0]]=!0;for(let k=1;k<y.length;k++)r[y[k]]=!0}let g=toSet(n)+toSet(r)+"*$";return[new RegExp("^"+g),new RegExp(g)]}function completeFromList(e){let n=e.map(y=>typeof y=="string"?{label:y}:y),[r,g]=n.every(y=>/^\w+$/.test(y.label))?[/\w*$/,/\w+$/]:prefixMatch(n);return y=>{let k=y.matchBefore(g);return k||y.explicit?{from:k?k.from:y.pos,options:n,validFor:r}:null}}function ifNotIn(e,n){return r=>{for(let g=syntaxTree(r.state).resolveInner(r.pos,-1);g;g=g.parent){if(e.indexOf(g.name)>-1)return null;if(g.type.isTop)break}return n(r)}}class Option{constructor(n,r,g,y){this.completion=n,this.source=r,this.match=g,this.score=y}}function cur(e){return e.selection.main.from}function ensureAnchor(e,n){var r;let{source:g}=e,y=n&&g[0]!="^",k=g[g.length-1]!="$";return!y&&!k?e:new RegExp(`${y?"^":""}(?:${g})${k?"$":""}`,(r=e.flags)!==null&&r!==void 0?r:e.ignoreCase?"i":"")}const pickedCompletion=Annotation.define();function insertCompletionText(e,n,r,g){let{main:y}=e.selection,k=r-y.from,$=g-y.from;return Object.assign(Object.assign({},e.changeByRange(V=>{if(V!=y&&r!=g&&e.sliceDoc(V.from+k,V.from+$)!=e.sliceDoc(r,g))return{range:V};let L=e.toText(n);return{changes:{from:V.from+k,to:g==y.from?V.to:V.from+$,insert:L},range:EditorSelection.cursor(V.from+k+L.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const SourceCache=new WeakMap;function asSource(e){if(!Array.isArray(e))return e;let n=SourceCache.get(e);return n||SourceCache.set(e,n=completeFromList(e)),n}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define();class FuzzyMatcher{constructor(n){this.pattern=n,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let r=0;r<n.length;){let g=codePointAt$1(n,r),y=codePointSize(g);this.chars.push(g);let k=n.slice(r,r+y),$=k.toUpperCase();this.folded.push(codePointAt$1($==k?k.toLowerCase():$,0)),r+=y}this.astral=n.length!=this.chars.length}ret(n,r){return this.score=n,this.matched=r,this}match(n){if(this.pattern.length==0)return this.ret(-100,[]);if(n.length<this.pattern.length)return null;let{chars:r,folded:g,any:y,precise:k,byWord:$}=this;if(r.length==1){let _e=codePointAt$1(n,0),Ce=codePointSize(_e),Ne=Ce==n.length?0:-100;if(_e!=r[0])if(_e==g[0])Ne+=-200;else return null;return this.ret(Ne,[0,Ce])}let V=n.indexOf(this.pattern);if(V==0)return this.ret(n.length==this.pattern.length?0:-100,[0,this.pattern.length]);let L=r.length,z=0;if(V<0){for(let _e=0,Ce=Math.min(n.length,200);_e<Ce&&z<L;){let Ne=codePointAt$1(n,_e);(Ne==r[z]||Ne==g[z])&&(y[z++]=_e),_e+=codePointSize(Ne)}if(z<L)return null}let j=0,ae=0,re=!1,oe=0,ue=-1,le=-1,de=/[a-z]/.test(n),he=!0;for(let _e=0,Ce=Math.min(n.length,200),Ne=0;_e<Ce&&ae<L;){let $e=codePointAt$1(n,_e);V<0&&(j<L&&$e==r[j]&&(k[j++]=_e),oe<L&&($e==r[oe]||$e==g[oe]?(oe==0&&(ue=_e),le=_e+1,oe++):oe=0));let xe,Ie=$e<255?$e>=48&&$e<=57||$e>=97&&$e<=122?2:$e>=65&&$e<=90?1:0:(xe=fromCodePoint($e))!=xe.toLowerCase()?1:xe!=xe.toUpperCase()?2:0;(!_e||Ie==1&&de||Ne==0&&Ie!=0)&&(r[ae]==$e||g[ae]==$e&&(re=!0)?$[ae++]=_e:$.length&&(he=!1)),Ne=Ie,_e+=codePointSize($e)}return ae==L&&$[0]==0&&he?this.result(-100+(re?-200:0),$,n):oe==L&&ue==0?this.ret(-200-n.length+(le==n.length?0:-100),[0,le]):V>-1?this.ret(-700-n.length,[V,V+this.pattern.length]):oe==L?this.ret(-900-n.length,[ue,le]):ae==L?this.result(-100+(re?-200:0)+-700+(he?0:-1100),$,n):r.length==2?null:this.result((y[0]?-700:0)+-200+-1100,y,n)}result(n,r,g){let y=[],k=0;for(let $ of r){let V=$+(this.astral?codePointSize(codePointAt$1(g,$)):1);k&&y[k-1]==$?y[k-1]=V:(y[k++]=$,y[k++]=V)}return this.ret(n-g.length,y)}}class StrictMatcher{constructor(n){this.pattern=n,this.matched=[],this.score=0,this.folded=n.toLowerCase()}match(n){if(n.length<this.pattern.length)return null;let r=n.slice(0,this.pattern.length),g=r==this.pattern?0:r.toLowerCase()==this.folded?-200:null;return g==null?null:(this.matched=[0,r.length],this.score=g+(n.length==this.pattern.length?0:-100),this)}}const completionConfig=Facet.define({combine(e){return combineConfig(e,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,filterStrict:!1,compareCompletions:(n,r)=>n.label.localeCompare(r.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(n,r)=>n&&r,closeOnBlur:(n,r)=>n&&r,icons:(n,r)=>n&&r,tooltipClass:(n,r)=>g=>joinClass(n(g),r(g)),optionClass:(n,r)=>g=>joinClass(n(g),r(g)),addToOptions:(n,r)=>n.concat(r),filterStrict:(n,r)=>n||r})}});function joinClass(e,n){return e?n?e+" "+n:e:n}function defaultPositionInfo(e,n,r,g,y,k){let $=e.textDirection==Direction.RTL,V=$,L=!1,z="top",j,ae,re=n.left-y.left,oe=y.right-n.right,ue=g.right-g.left,le=g.bottom-g.top;if(V&&re<Math.min(ue,oe)?V=!1:!V&&oe<Math.min(ue,re)&&(V=!0),ue<=(V?re:oe))j=Math.max(y.top,Math.min(r.top,y.bottom-le))-n.top,ae=Math.min(400,V?re:oe);else{L=!0,ae=Math.min(400,($?n.right:y.right-n.left)-30);let _e=y.bottom-n.bottom;_e>=le||_e>n.top?j=r.bottom-n.top:(z="bottom",j=n.bottom-r.top)}let de=(n.bottom-n.top)/k.offsetHeight,he=(n.right-n.left)/k.offsetWidth;return{style:`${z}: ${j/de}px; max-width: ${ae/he}px`,class:"cm-completionInfo-"+(L?$?"left-narrow":"right-narrow":V?"left":"right")}}function optionContent(e){let n=e.addToOptions.slice();return e.icons&&n.push({render(r){let g=document.createElement("div");return g.classList.add("cm-completionIcon"),r.type&&g.classList.add(...r.type.split(/\s+/g).map(y=>"cm-completionIcon-"+y)),g.setAttribute("aria-hidden","true"),g},position:20}),n.push({render(r,g,y,k){let $=document.createElement("span");$.className="cm-completionLabel";let V=r.displayLabel||r.label,L=0;for(let z=0;z<k.length;){let j=k[z++],ae=k[z++];j>L&&$.appendChild(document.createTextNode(V.slice(L,j)));let re=$.appendChild(document.createElement("span"));re.appendChild(document.createTextNode(V.slice(j,ae))),re.className="cm-completionMatchedText",L=ae}return L<V.length&&$.appendChild(document.createTextNode(V.slice(L))),$},position:50},{render(r){if(!r.detail)return null;let g=document.createElement("span");return g.className="cm-completionDetail",g.textContent=r.detail,g},position:80}),n.sort((r,g)=>r.position-g.position).map(r=>r.render)}function rangeAroundSelected(e,n,r){if(e<=r)return{from:0,to:e};if(n<0&&(n=0),n<=e>>1){let y=Math.floor(n/r);return{from:y*r,to:(y+1)*r}}let g=Math.floor((e-n)/r);return{from:e-(g+1)*r,to:e-g*r}}class CompletionTooltip{constructor(n,r,g){this.view=n,this.stateField=r,this.applyCompletion=g,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:L=>this.placeInfo(L),key:this},this.space=null,this.currentClass="";let y=n.state.field(r),{options:k,selected:$}=y.open,V=n.state.facet(completionConfig);this.optionContent=optionContent(V),this.optionClass=V.optionClass,this.tooltipClass=V.tooltipClass,this.range=rangeAroundSelected(k.length,$,V.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(n.state),this.dom.addEventListener("mousedown",L=>{let{options:z}=n.state.field(r).open;for(let j=L.target,ae;j&&j!=this.dom;j=j.parentNode)if(j.nodeName=="LI"&&(ae=/-(\d+)$/.exec(j.id))&&+ae[1]<z.length){this.applyCompletion(n,z[+ae[1]]),L.preventDefault();return}}),this.dom.addEventListener("focusout",L=>{let z=n.state.field(this.stateField,!1);z&&z.tooltip&&n.state.facet(completionConfig).closeOnBlur&&L.relatedTarget!=n.contentDOM&&n.dispatch({effects:closeCompletionEffect.of(null)})}),this.showOptions(k,y.id)}mount(){this.updateSel()}showOptions(n,r){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n,r,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(n){var r;let g=n.state.field(this.stateField),y=n.startState.field(this.stateField);if(this.updateTooltipClass(n.state),g!=y){let{options:k,selected:$,disabled:V}=g.open;(!y.open||y.open.options!=k)&&(this.range=rangeAroundSelected(k.length,$,n.state.facet(completionConfig).maxRenderedOptions),this.showOptions(k,g.id)),this.updateSel(),V!=((r=y.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!V)}}updateTooltipClass(n){let r=this.tooltipClass(n);if(r!=this.currentClass){for(let g of this.currentClass.split(" "))g&&this.dom.classList.remove(g);for(let g of r.split(" "))g&&this.dom.classList.add(g);this.currentClass=r}}positioned(n){this.space=n,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let n=this.view.state.field(this.stateField),r=n.open;if((r.selected>-1&&r.selected<this.range.from||r.selected>=this.range.to)&&(this.range=rangeAroundSelected(r.options.length,r.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.showOptions(r.options,n.id)),this.updateSelectedOption(r.selected)){this.destroyInfo();let{completion:g}=r.options[r.selected],{info:y}=g;if(!y)return;let k=typeof y=="string"?document.createTextNode(y):y(g);if(!k)return;"then"in k?k.then($=>{$&&this.view.state.field(this.stateField,!1)==n&&this.addInfoPane($,g)}).catch($=>logException(this.view.state,$,"completion info")):this.addInfoPane(k,g)}}addInfoPane(n,r){this.destroyInfo();let g=this.info=document.createElement("div");if(g.className="cm-tooltip cm-completionInfo",n.nodeType!=null)g.appendChild(n),this.infoDestroy=null;else{let{dom:y,destroy:k}=n;g.appendChild(y),this.infoDestroy=k||null}this.dom.appendChild(g),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(n){let r=null;for(let g=this.list.firstChild,y=this.range.from;g;g=g.nextSibling,y++)g.nodeName!="LI"||!g.id?y--:y==n?g.hasAttribute("aria-selected")||(g.setAttribute("aria-selected","true"),r=g):g.hasAttribute("aria-selected")&&g.removeAttribute("aria-selected");return r&&scrollIntoView(this.list,r),r}measureInfo(){let n=this.dom.querySelector("[aria-selected]");if(!n||!this.info)return null;let r=this.dom.getBoundingClientRect(),g=this.info.getBoundingClientRect(),y=n.getBoundingClientRect(),k=this.space;if(!k){let $=this.dom.ownerDocument.defaultView||window;k={left:0,top:0,right:$.innerWidth,bottom:$.innerHeight}}return y.top>Math.min(k.bottom,r.bottom)-10||y.bottom<Math.max(k.top,r.top)+10?null:this.view.state.facet(completionConfig).positionInfo(this.view,r,y,g,k,this.dom)}placeInfo(n){this.info&&(n?(n.style&&(this.info.style.cssText=n.style),this.info.className="cm-tooltip cm-completionInfo "+(n.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(n,r,g){const y=document.createElement("ul");y.id=r,y.setAttribute("role","listbox"),y.setAttribute("aria-expanded","true"),y.setAttribute("aria-label",this.view.state.phrase("Completions"));let k=null;for(let $=g.from;$<g.to;$++){let{completion:V,match:L}=n[$],{section:z}=V;if(z){let re=typeof z=="string"?z:z.name;if(re!=k&&($>g.from||g.from==0))if(k=re,typeof z!="string"&&z.header)y.appendChild(z.header(z));else{let oe=y.appendChild(document.createElement("completion-section"));oe.textContent=re}}const j=y.appendChild(document.createElement("li"));j.id=r+"-"+$,j.setAttribute("role","option");let ae=this.optionClass(V);ae&&(j.className=ae);for(let re of this.optionContent){let oe=re(V,this.view.state,this.view,L);oe&&j.appendChild(oe)}}return g.from&&y.classList.add("cm-completionListIncompleteTop"),g.to<n.length&&y.classList.add("cm-completionListIncompleteBottom"),y}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function completionTooltip(e,n){return r=>new CompletionTooltip(r,e,n)}function scrollIntoView(e,n){let r=e.getBoundingClientRect(),g=n.getBoundingClientRect(),y=r.height/e.offsetHeight;g.top<r.top?e.scrollTop-=(r.top-g.top)/y:g.bottom>r.bottom&&(e.scrollTop+=(g.bottom-r.bottom)/y)}function score(e){return(e.boost||0)*100+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}function sortOptions(e,n){let r=[],g=null,y=z=>{r.push(z);let{section:j}=z.completion;if(j){g||(g=[]);let ae=typeof j=="string"?j:j.name;g.some(re=>re.name==ae)||g.push(typeof j=="string"?{name:ae}:j)}},k=n.facet(completionConfig);for(let z of e)if(z.hasResult()){let j=z.result.getMatch;if(z.result.filter===!1)for(let ae of z.result.options)y(new Option(ae,z.source,j?j(ae):[],1e9-r.length));else{let ae=n.sliceDoc(z.from,z.to),re,oe=k.filterStrict?new StrictMatcher(ae):new FuzzyMatcher(ae);for(let ue of z.result.options)if(re=oe.match(ue.label)){let le=ue.displayLabel?j?j(ue,re.matched):[]:re.matched;y(new Option(ue,z.source,le,re.score+(ue.boost||0)))}}}if(g){let z=Object.create(null),j=0,ae=(re,oe)=>{var ue,le;return((ue=re.rank)!==null&&ue!==void 0?ue:1e9)-((le=oe.rank)!==null&&le!==void 0?le:1e9)||(re.name<oe.name?-1:1)};for(let re of g.sort(ae))j-=1e5,z[re.name]=j;for(let re of r){let{section:oe}=re.completion;oe&&(re.score+=z[typeof oe=="string"?oe:oe.name])}}let $=[],V=null,L=k.compareCompletions;for(let z of r.sort((j,ae)=>ae.score-j.score||L(j.completion,ae.completion))){let j=z.completion;!V||V.label!=j.label||V.detail!=j.detail||V.type!=null&&j.type!=null&&V.type!=j.type||V.apply!=j.apply||V.boost!=j.boost?$.push(z):score(z.completion)>score(V)&&($[$.length-1]=z),V=z.completion}return $}class CompletionDialog{constructor(n,r,g,y,k,$){this.options=n,this.attrs=r,this.tooltip=g,this.timestamp=y,this.selected=k,this.disabled=$}setSelected(n,r){return n==this.selected||n>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(r,n),this.tooltip,this.timestamp,n,this.disabled)}static build(n,r,g,y,k,$){if(y&&!$&&n.some(z=>z.isPending))return y.setDisabled();let V=sortOptions(n,r);if(!V.length)return y&&n.some(z=>z.isPending)?y.setDisabled():null;let L=r.facet(completionConfig).selectOnOpen?0:-1;if(y&&y.selected!=L&&y.selected!=-1){let z=y.options[y.selected].completion;for(let j=0;j<V.length;j++)if(V[j].completion==z){L=j;break}}return new CompletionDialog(V,makeAttrs(g,L),{pos:n.reduce((z,j)=>j.hasResult()?Math.min(z,j.from):z,1e8),create:createTooltip,above:k.aboveCursor},y?y.timestamp:Date.now(),L,!1)}map(n){return new CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:n.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new CompletionDialog(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class CompletionState{constructor(n,r,g){this.active=n,this.id=r,this.open=g}static start(){return new CompletionState(none,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(n){let{state:r}=n,g=r.facet(completionConfig),k=(g.override||r.languageDataAt("autocomplete",cur(r)).map(asSource)).map(L=>(this.active.find(j=>j.source==L)||new ActiveSource(L,this.active.some(j=>j.state!=0)?1:0)).update(n,g));k.length==this.active.length&&k.every((L,z)=>L==this.active[z])&&(k=this.active);let $=this.open,V=n.effects.some(L=>L.is(setActiveEffect));$&&n.docChanged&&($=$.map(n.changes)),n.selection||k.some(L=>L.hasResult()&&n.changes.touchesRange(L.from,L.to))||!sameResults(k,this.active)||V?$=CompletionDialog.build(k,r,this.id,$,g,V):$&&$.disabled&&!k.some(L=>L.isPending)&&($=null),!$&&k.every(L=>!L.isPending)&&k.some(L=>L.hasResult())&&(k=k.map(L=>L.hasResult()?new ActiveSource(L.source,0):L));for(let L of n.effects)L.is(setSelectedEffect)&&($=$&&$.setSelected(L.value,this.id));return k==this.active&&$==this.open?this:new CompletionState(k,this.id,$)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?baseAttrs:noAttrs}}function sameResults(e,n){if(e==n)return!0;for(let r=0,g=0;;){for(;r<e.length&&!e[r].hasResult();)r++;for(;g<n.length&&!n[g].hasResult();)g++;let y=r==e.length,k=g==n.length;if(y||k)return y==k;if(e[r++].result!=n[g++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"},noAttrs={};function makeAttrs(e,n){let r={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return n>-1&&(r["aria-activedescendant"]=e+"-"+n),r}const none=[];function getUpdateType(e,n){if(e.isUserEvent("input.complete")){let g=e.annotation(pickedCompletion);if(g&&n.activateOnCompletion(g))return 12}let r=e.isUserEvent("input.type");return r&&n.activateOnTyping?5:r?1:e.isUserEvent("delete.backward")?2:e.selection?8:e.docChanged?16:0}class ActiveSource{constructor(n,r,g=!1){this.source=n,this.state=r,this.explicit=g}hasResult(){return!1}get isPending(){return this.state==1}update(n,r){let g=getUpdateType(n,r),y=this;(g&8||g&16&&this.touches(n))&&(y=new ActiveSource(y.source,0)),g&4&&y.state==0&&(y=new ActiveSource(this.source,1)),y=y.updateFor(n,g);for(let k of n.effects)if(k.is(startCompletionEffect))y=new ActiveSource(y.source,1,k.value);else if(k.is(closeCompletionEffect))y=new ActiveSource(y.source,0);else if(k.is(setActiveEffect))for(let $ of k.value)$.source==y.source&&(y=$);return y}updateFor(n,r){return this.map(n.changes)}map(n){return this}touches(n){return n.changes.touchesRange(cur(n.state))}}class ActiveResult extends ActiveSource{constructor(n,r,g,y,k,$){super(n,3,r),this.limit=g,this.result=y,this.from=k,this.to=$}hasResult(){return!0}updateFor(n,r){var g;if(!(r&3))return this.map(n.changes);let y=this.result;y.map&&!n.changes.empty&&(y=y.map(y,n.changes));let k=n.changes.mapPos(this.from),$=n.changes.mapPos(this.to,1),V=cur(n.state);if(V>$||!y||r&2&&(cur(n.startState)==this.from||V<this.limit))return new ActiveSource(this.source,r&4?1:0);let L=n.changes.mapPos(this.limit);return checkValid(y.validFor,n.state,k,$)?new ActiveResult(this.source,this.explicit,L,y,k,$):y.update&&(y=y.update(y,k,$,new CompletionContext(n.state,V,!1)))?new ActiveResult(this.source,this.explicit,L,y,y.from,(g=y.to)!==null&&g!==void 0?g:cur(n.state)):new ActiveSource(this.source,1,this.explicit)}map(n){return n.empty?this:(this.result.map?this.result.map(this.result,n):this.result)?new ActiveResult(this.source,this.explicit,n.mapPos(this.limit),this.result,n.mapPos(this.from),n.mapPos(this.to,1)):new ActiveSource(this.source,0)}touches(n){return n.changes.touchesRange(this.from,this.to)}}function checkValid(e,n,r,g){if(!e)return!1;let y=n.sliceDoc(r,g);return typeof e=="function"?e(y,r,g,n):ensureAnchor(e,!0).test(y)}const setActiveEffect=StateEffect.define({map(e,n){return e.map(r=>r.map(n))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(e,n){return e.update(n)},provide:e=>[showTooltip.from(e,n=>n.tooltip),EditorView.contentAttributes.from(e,n=>n.attrs)]});function applyCompletion(e,n){const r=n.completion.apply||n.completion.label;let g=e.state.field(completionState).active.find(y=>y.source==n.source);return g instanceof ActiveResult?(typeof r=="string"?e.dispatch(Object.assign(Object.assign({},insertCompletionText(e.state,r,g.from,g.to)),{annotations:pickedCompletion.of(n.completion)})):r(e,n.completion,g.from,g.to),!0):!1}const createTooltip=completionTooltip(completionState,applyCompletion);function moveCompletionSelection(e,n="option"){return r=>{let g=r.state.field(completionState,!1);if(!g||!g.open||g.open.disabled||Date.now()-g.open.timestamp<r.state.facet(completionConfig).interactionDelay)return!1;let y=1,k;n=="page"&&(k=getTooltip(r,g.open.tooltip))&&(y=Math.max(2,Math.floor(k.dom.offsetHeight/k.dom.querySelector("li").offsetHeight)-1));let{length:$}=g.open.options,V=g.open.selected>-1?g.open.selected+y*(e?1:-1):e?0:$-1;return V<0?V=n=="page"?0:$-1:V>=$&&(V=n=="page"?$-1:0),r.dispatch({effects:setSelectedEffect.of(V)}),!0}}const acceptCompletion=e=>{let n=e.state.field(completionState,!1);return e.state.readOnly||!n||!n.open||n.open.selected<0||n.open.disabled||Date.now()-n.open.timestamp<e.state.facet(completionConfig).interactionDelay?!1:applyCompletion(e,n.open.options[n.open.selected])},startCompletion=e=>e.state.field(completionState,!1)?(e.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=e=>{let n=e.state.field(completionState,!1);return!n||!n.active.some(r=>r.state!=0)?!1:(e.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(n,r){this.active=n,this.context=r,this.time=Date.now(),this.updates=[],this.done=void 0}}const MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let n of e.state.field(completionState).active)n.isPending&&this.startQuery(n)}update(e){let n=e.state.field(completionState),r=e.state.facet(completionConfig);if(!e.selectionSet&&!e.docChanged&&e.startState.field(completionState)==n)return;let g=e.transactions.some(k=>{let $=getUpdateType(k,r);return $&8||(k.selection||k.docChanged)&&!($&3)});for(let k=0;k<this.running.length;k++){let $=this.running[k];if(g||$.context.abortOnDocChange&&e.docChanged||$.updates.length+e.transactions.length>MaxUpdateCount&&Date.now()-$.time>MinAbortTime){for(let V of $.context.abortListeners)try{V()}catch(L){logException(this.view.state,L)}$.context.abortListeners=null,this.running.splice(k--,1)}else $.updates.push(...e.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),e.transactions.some(k=>k.effects.some($=>$.is(startCompletionEffect)))&&(this.pendingStart=!0);let y=this.pendingStart?50:r.activateOnTypingDelay;if(this.debounceUpdate=n.active.some(k=>k.isPending&&!this.running.some($=>$.active.source==k.source))?setTimeout(()=>this.startUpdate(),y):-1,this.composing!=0)for(let k of e.transactions)k.isUserEvent("input.type")?this.composing=2:this.composing==2&&k.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:e}=this.view,n=e.field(completionState);for(let r of n.active)r.isPending&&!this.running.some(g=>g.active.source==r.source)&&this.startQuery(r);this.running.length&&n.open&&n.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}startQuery(e){let{state:n}=this.view,r=cur(n),g=new CompletionContext(n,r,e.explicit,this.view),y=new RunningQuery(e,g);this.running.push(y),Promise.resolve(e.source(g)).then(k=>{y.context.aborted||(y.done=k||null,this.scheduleAccept())},k=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,k)})}scheduleAccept(){this.running.every(e=>e.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let n=[],r=this.view.state.facet(completionConfig),g=this.view.state.field(completionState);for(let y=0;y<this.running.length;y++){let k=this.running[y];if(k.done===void 0)continue;if(this.running.splice(y--,1),k.done){let V=cur(k.updates.length?k.updates[0].startState:this.view.state),L=Math.min(V,k.done.from+(k.active.explicit?0:1)),z=new ActiveResult(k.active.source,k.active.explicit,L,k.done,k.done.from,(e=k.done.to)!==null&&e!==void 0?e:V);for(let j of k.updates)z=z.update(j,r);if(z.hasResult()){n.push(z);continue}}let $=g.active.find(V=>V.source==k.active.source);if($&&$.isPending)if(k.done==null){let V=new ActiveSource(k.active.source,0);for(let L of k.updates)V=V.update(L,r);V.isPending||n.push(V)}else this.startQuery($)}(n.length||g.open&&g.open.disabled)&&this.view.dispatch({effects:setActiveEffect.of(n)})}},{eventHandlers:{blur(e){let n=this.view.state.field(completionState,!1);if(n&&n.tooltip&&this.view.state.facet(completionConfig).closeOnBlur){let r=n.open&&getTooltip(this.view,n.open.tooltip);(!r||!r.dom.contains(e.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:closeCompletionEffect.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),windows=typeof navigator=="object"&&/Win/.test(navigator.platform),commitCharacters=Prec.highest(EditorView.domEventHandlers({keydown(e,n){let r=n.state.field(completionState,!1);if(!r||!r.open||r.open.disabled||r.open.selected<0||e.key.length>1||e.ctrlKey&&!(windows&&e.altKey)||e.metaKey)return!1;let g=r.open.options[r.open.selected],y=r.active.find($=>$.source==g.source),k=g.completion.commitCharacters||y.result.commitCharacters;return k&&k.indexOf(e.key)>-1&&applyCompletion(n,g),!1}})),baseTheme$1=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(n,r,g,y){this.field=n,this.line=r,this.from=g,this.to=y}}class FieldRange{constructor(n,r,g){this.field=n,this.from=r,this.to=g}map(n){let r=n.mapPos(this.from,-1,MapMode.TrackDel),g=n.mapPos(this.to,1,MapMode.TrackDel);return r==null||g==null?null:new FieldRange(this.field,r,g)}}class Snippet{constructor(n,r){this.lines=n,this.fieldPositions=r}instantiate(n,r){let g=[],y=[r],k=n.doc.lineAt(r),$=/^\s*/.exec(k.text)[0];for(let L of this.lines){if(g.length){let z=$,j=/^\t*/.exec(L)[0].length;for(let ae=0;ae<j;ae++)z+=n.facet(indentUnit);y.push(r+z.length-j),L=z+L.slice(j)}g.push(L),r+=L.length+1}let V=this.fieldPositions.map(L=>new FieldRange(L.field,y[L.line]+L.from,y[L.line]+L.to));return{text:g,ranges:V}}static parse(n){let r=[],g=[],y=[],k;for(let $ of n.split(/\r\n?|\n/)){for(;k=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec($);){let V=k[1]?+k[1]:null,L=k[2]||k[3]||"",z=-1,j=L.replace(/\\[{}]/g,ae=>ae[1]);for(let ae=0;ae<r.length;ae++)(V!=null?r[ae].seq==V:j&&r[ae].name==j)&&(z=ae);if(z<0){let ae=0;for(;ae<r.length&&(V==null||r[ae].seq!=null&&r[ae].seq<V);)ae++;r.splice(ae,0,{seq:V,name:j}),z=ae;for(let re of y)re.field>=z&&re.field++}y.push(new FieldPos(z,g.length,k.index,k.index+j.length)),$=$.slice(0,k.index)+L+$.slice(k.index+k[0].length)}$=$.replace(/\\([{}])/g,(V,L,z)=>{for(let j of y)j.line==g.length&&j.from>z&&(j.from--,j.to--);return L}),g.push($)}return new Snippet(g,y)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(n,r){this.ranges=n,this.active=r,this.deco=Decoration.set(n.map(g=>(g.from==g.to?fieldMarker:fieldRange).range(g.from,g.to)))}map(n){let r=[];for(let g of this.ranges){let y=g.map(n);if(!y)return null;r.push(y)}return new ActiveSnippet(r,this.active)}selectionInsideField(n){return n.ranges.every(r=>this.ranges.some(g=>g.field==this.active&&g.from<=r.from&&g.to>=r.to))}}const setActive=StateEffect.define({map(e,n){return e&&e.map(n)}}),moveToField=StateEffect.define(),snippetState=StateField.define({create(){return null},update(e,n){for(let r of n.effects){if(r.is(setActive))return r.value;if(r.is(moveToField)&&e)return new ActiveSnippet(e.ranges,r.value)}return e&&n.docChanged&&(e=e.map(n.changes)),e&&n.selection&&!e.selectionInsideField(n.selection)&&(e=null),e},provide:e=>EditorView.decorations.from(e,n=>n?n.deco:Decoration.none)});function fieldSelection(e,n){return EditorSelection.create(e.filter(r=>r.field==n).map(r=>EditorSelection.range(r.from,r.to)))}function snippet(e){let n=Snippet.parse(e);return(r,g,y,k)=>{let{text:$,ranges:V}=n.instantiate(r.state,y),{main:L}=r.state.selection,z={changes:{from:y,to:k==L.from?L.to:k,insert:Text.of($)},scrollIntoView:!0,annotations:g?[pickedCompletion.of(g),Transaction.userEvent.of("input.complete")]:void 0};if(V.length&&(z.selection=fieldSelection(V,0)),V.some(j=>j.field>0)){let j=new ActiveSnippet(V,0),ae=z.effects=[setActive.of(j)];r.state.field(snippetState,!1)===void 0&&ae.push(StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme$1]))}r.dispatch(r.state.update(z))}}function moveField(e){return({state:n,dispatch:r})=>{let g=n.field(snippetState,!1);if(!g||e<0&&g.active==0)return!1;let y=g.active+e,k=e>0&&!g.ranges.some($=>$.field==y+e);return r(n.update({selection:fieldSelection(g.ranges,y),effects:setActive.of(k?null:new ActiveSnippet(g.ranges,y)),scrollIntoView:!0})),!0}}const clearSnippet=({state:e,dispatch:n})=>e.field(snippetState,!1)?(n(e.update({effects:setActive.of(null)})),!0):!1,nextSnippetField=moveField(1),prevSnippetField=moveField(-1),defaultSnippetKeymap=[{key:"Tab",run:nextSnippetField,shift:prevSnippetField},{key:"Escape",run:clearSnippet}],snippetKeymap=Facet.define({combine(e){return e.length?e[0]:defaultSnippetKeymap}}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],e=>e.facet(snippetKeymap)));function snippetCompletion(e,n){return Object.assign(Object.assign({},n),{apply:snippet(e)})}const snippetPointerHandler=EditorView.domEventHandlers({mousedown(e,n){let r=n.state.field(snippetState,!1),g;if(!r||(g=n.posAtCoords({x:e.clientX,y:e.clientY}))==null)return!1;let y=r.ranges.find(k=>k.from<=g&&k.to>=g);return!y||y.field==r.active?!1:(n.dispatch({selection:fieldSelection(r.ranges,y.field),effects:setActive.of(r.ranges.some(k=>k.field>y.field)?new ActiveSnippet(r.ranges,y.field):null),scrollIntoView:!0}),!0)}}),defaults={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(e,n){let r=n.mapPos(e,-1,MapMode.TrackAfter);return r??void 0}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(e,n){if(e=e.map(n.changes),n.selection){let r=n.state.doc.lineAt(n.selection.main.head);e=e.update({filter:g=>g>=r.from&&g<=r.to})}for(let r of n.effects)r.is(closeBracketEffect)&&(e=e.update({add:[closedBracket.range(r.value,r.value+1)]}));return e}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(e){for(let n=0;n<definedClosing.length;n+=2)if(definedClosing.charCodeAt(n)==e)return definedClosing.charAt(n+1);return fromCodePoint(e<128?e:e+1)}function config$1(e,n){return e.languageDataAt("closeBrackets",n)[0]||defaults}const android$1=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((e,n,r,g)=>{if((android$1?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let y=e.state.selection.main;if(g.length>2||g.length==2&&codePointSize(codePointAt$1(g,0))==1||n!=y.from||r!=y.to)return!1;let k=insertBracket(e.state,g);return k?(e.dispatch(k),!0):!1}),deleteBracketPair=({state:e,dispatch:n})=>{if(e.readOnly)return!1;let g=config$1(e,e.selection.main.head).brackets||defaults.brackets,y=null,k=e.changeByRange($=>{if($.empty){let V=prevChar(e.doc,$.head);for(let L of g)if(L==V&&nextChar(e.doc,$.head)==closing(codePointAt$1(L,0)))return{changes:{from:$.head-L.length,to:$.head+L.length},range:EditorSelection.cursor($.head-L.length)}}return{range:y=$}});return y||n(e.update(k,{scrollIntoView:!0,userEvent:"delete.backward"})),!y},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket(e,n){let r=config$1(e,e.selection.main.head),g=r.brackets||defaults.brackets;for(let y of g){let k=closing(codePointAt$1(y,0));if(n==y)return k==y?handleSame(e,y,g.indexOf(y+y+y)>-1,r):handleOpen(e,y,k,r.before||defaults.before);if(n==k&&closedBracketAt(e,e.selection.main.from))return handleClose(e,y,k)}return null}function closedBracketAt(e,n){let r=!1;return e.field(bracketState).between(0,e.doc.length,g=>{g==n&&(r=!0)}),r}function nextChar(e,n){let r=e.sliceString(n,n+2);return r.slice(0,codePointSize(codePointAt$1(r,0)))}function prevChar(e,n){let r=e.sliceString(n-2,n);return codePointSize(codePointAt$1(r,0))==r.length?r:r.slice(1)}function handleOpen(e,n,r,g){let y=null,k=e.changeByRange($=>{if(!$.empty)return{changes:[{insert:n,from:$.from},{insert:r,from:$.to}],effects:closeBracketEffect.of($.to+n.length),range:EditorSelection.range($.anchor+n.length,$.head+n.length)};let V=nextChar(e.doc,$.head);return!V||/\s/.test(V)||g.indexOf(V)>-1?{changes:{insert:n+r,from:$.head},effects:closeBracketEffect.of($.head+n.length),range:EditorSelection.cursor($.head+n.length)}:{range:y=$}});return y?null:e.update(k,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(e,n,r){let g=null,y=e.changeByRange(k=>k.empty&&nextChar(e.doc,k.head)==r?{changes:{from:k.head,to:k.head+r.length,insert:r},range:EditorSelection.cursor(k.head+r.length)}:g={range:k});return g?null:e.update(y,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(e,n,r,g){let y=g.stringPrefixes||defaults.stringPrefixes,k=null,$=e.changeByRange(V=>{if(!V.empty)return{changes:[{insert:n,from:V.from},{insert:n,from:V.to}],effects:closeBracketEffect.of(V.to+n.length),range:EditorSelection.range(V.anchor+n.length,V.head+n.length)};let L=V.head,z=nextChar(e.doc,L),j;if(z==n){if(nodeStart(e,L))return{changes:{insert:n+n,from:L},effects:closeBracketEffect.of(L+n.length),range:EditorSelection.cursor(L+n.length)};if(closedBracketAt(e,L)){let re=r&&e.sliceDoc(L,L+n.length*3)==n+n+n?n+n+n:n;return{changes:{from:L,to:L+re.length,insert:re},range:EditorSelection.cursor(L+re.length)}}}else{if(r&&e.sliceDoc(L-2*n.length,L)==n+n&&(j=canStartStringAt(e,L-2*n.length,y))>-1&&nodeStart(e,j))return{changes:{insert:n+n+n+n,from:L},effects:closeBracketEffect.of(L+n.length),range:EditorSelection.cursor(L+n.length)};if(e.charCategorizer(L)(z)!=CharCategory.Word&&canStartStringAt(e,L,y)>-1&&!probablyInString(e,L,n,y))return{changes:{insert:n+n,from:L},effects:closeBracketEffect.of(L+n.length),range:EditorSelection.cursor(L+n.length)}}return{range:k=V}});return k?null:e.update($,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(e,n){let r=syntaxTree(e).resolveInner(n+1);return r.parent&&r.from==n}function probablyInString(e,n,r,g){let y=syntaxTree(e).resolveInner(n,-1),k=g.reduce(($,V)=>Math.max($,V.length),0);for(let $=0;$<5;$++){let V=e.sliceDoc(y.from,Math.min(y.to,y.from+r.length+k)),L=V.indexOf(r);if(!L||L>-1&&g.indexOf(V.slice(0,L))>-1){let j=y.firstChild;for(;j&&j.from==y.from&&j.to-j.from>r.length+L;){if(e.sliceDoc(j.to-r.length,j.to)==r)return!1;j=j.firstChild}return!0}let z=y.to==n&&y.parent;if(!z)break;y=z}return!1}function canStartStringAt(e,n,r){let g=e.charCategorizer(n);if(g(e.sliceDoc(n-1,n))!=CharCategory.Word)return n;for(let y of r){let k=n-y.length;if(e.sliceDoc(k,n)==y&&g(e.sliceDoc(k-1,k))!=CharCategory.Word)return k}return-1}function autocompletion(e={}){return[commitCharacters,completionState,completionConfig.of(e),completionPlugin,completionKeymapExt,baseTheme$1]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{mac:"Alt-`",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],e=>e.facet(completionConfig).defaultKeymap?[completionKeymap]:[]));class SelectedDiagnostic{constructor(n,r,g){this.from=n,this.to=r,this.diagnostic=g}}class LintState{constructor(n,r,g){this.diagnostics=n,this.panel=r,this.selected=g}static init(n,r,g){let y=n,k=g.facet(lintConfig).markerFilter;k&&(y=k(y,g));let $=n.slice().sort((ae,re)=>ae.from-re.from||ae.to-re.to),V=new RangeSetBuilder,L=[],z=0;for(let ae=0;;){let re=ae==$.length?null:$[ae];if(!re&&!L.length)break;let oe,ue;for(L.length?(oe=z,ue=L.reduce((de,he)=>Math.min(de,he.to),re&&re.from>oe?re.from:1e8)):(oe=re.from,ue=re.to,L.push(re),ae++);ae<$.length;){let de=$[ae];if(de.from==oe&&(de.to>de.from||de.to==oe))L.push(de),ae++,ue=Math.min(de.to,ue);else{ue=Math.min(de.from,ue);break}}let le=maxSeverity(L);if(L.some(de=>de.from==de.to||de.from==de.to-1&&g.doc.lineAt(de.from).to==de.from))V.add(oe,oe,Decoration.widget({widget:new DiagnosticWidget(le),diagnostics:L.slice()}));else{let de=L.reduce((he,_e)=>_e.markClass?he+" "+_e.markClass:he,"");V.add(oe,ue,Decoration.mark({class:"cm-lintRange cm-lintRange-"+le+de,diagnostics:L.slice(),inclusiveEnd:L.some(he=>he.to>ue)}))}z=ue;for(let de=0;de<L.length;de++)L[de].to<=z&&L.splice(de--,1)}let j=V.finish();return new LintState(j,r,findDiagnostic(j))}}function findDiagnostic(e,n=null,r=0){let g=null;return e.between(r,1e9,(y,k,{spec:$})=>{if(!(n&&$.diagnostics.indexOf(n)<0))if(!g)g=new SelectedDiagnostic(y,k,n||$.diagnostics[0]);else{if($.diagnostics.indexOf(g.diagnostic)<0)return!1;g=new SelectedDiagnostic(g.from,k,g.diagnostic)}}),g}function hideTooltip(e,n){let r=n.pos,g=n.end||r,y=e.state.facet(lintConfig).hideOn(e,r,g);if(y!=null)return y;let k=e.startState.doc.lineAt(n.pos);return!!(e.effects.some($=>$.is(setDiagnosticsEffect))||e.changes.touchesRange(k.from,Math.max(k.to,g)))}function maybeEnableLint(e,n){return e.field(lintState,!1)?n:n.concat(StateEffect.appendConfig.of(lintExtensions))}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(e,n){if(n.docChanged&&e.diagnostics.size){let r=e.diagnostics.map(n.changes),g=null,y=e.panel;if(e.selected){let k=n.changes.mapPos(e.selected.from,1);g=findDiagnostic(r,e.selected.diagnostic,k)||findDiagnostic(r,null,k)}!r.size&&y&&n.state.facet(lintConfig).autoPanel&&(y=null),e=new LintState(r,y,g)}for(let r of n.effects)if(r.is(setDiagnosticsEffect)){let g=n.state.facet(lintConfig).autoPanel?r.value.length?LintPanel.open:null:e.panel;e=LintState.init(r.value,g,n.state)}else r.is(togglePanel)?e=new LintState(e.diagnostics,r.value?LintPanel.open:null,e.selected):r.is(movePanelSelection)&&(e=new LintState(e.diagnostics,e.panel,r.value));return e},provide:e=>[showPanel.from(e,n=>n.panel),EditorView.decorations.from(e,n=>n.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(e,n,r){let{diagnostics:g}=e.state.field(lintState),y,k=-1,$=-1;g.between(n-(r<0?1:0),n+(r>0?1:0),(L,z,{spec:j})=>{if(n>=L&&n<=z&&(L==z||(n>L||r>0)&&(n<z||r<0)))return y=j.diagnostics,k=L,$=z,!1});let V=e.state.facet(lintConfig).tooltipFilter;return y&&V&&(y=V(y,e.state)),y?{pos:k,end:$,above:e.state.doc.lineAt(k).to<$,create(){return{dom:diagnosticsTooltip(e,y)}}}:null}function diagnosticsTooltip(e,n){return crelt("ul",{class:"cm-tooltip-lint"},n.map(r=>renderDiagnostic(e,r,!1)))}const openLintPanel=e=>{let n=e.state.field(lintState,!1);(!n||!n.panel)&&e.dispatch({effects:maybeEnableLint(e.state,[togglePanel.of(!0)])});let r=getPanel(e,LintPanel.open);return r&&r.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=e=>{let n=e.state.field(lintState,!1);return!n||!n.panel?!1:(e.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=e=>{let n=e.state.field(lintState,!1);if(!n)return!1;let r=e.state.selection.main,g=n.diagnostics.iter(r.to+1);return!g.value&&(g=n.diagnostics.iter(0),!g.value||g.from==r.from&&g.to==r.to)?!1:(e.dispatch({selection:{anchor:g.from,head:g.to},scrollIntoView:!0}),!0)},lintKeymap=[{key:"Mod-Shift-m",run:openLintPanel,preventDefault:!0},{key:"F8",run:nextDiagnostic}],lintConfig=Facet.define({combine(e){return Object.assign({sources:e.map(n=>n.source).filter(n=>n!=null)},combineConfig(e.map(n=>n.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(n,r)=>n?r?g=>n(g)||r(g):n:r}))}});function assignKeys(e){let n=[];if(e)e:for(let{name:r}of e){for(let g=0;g<r.length;g++){let y=r[g];if(/[a-zA-Z]/.test(y)&&!n.some(k=>k.toLowerCase()==y.toLowerCase())){n.push(y);continue e}}n.push("")}return n}function renderDiagnostic(e,n,r){var g;let y=r?assignKeys(n.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+n.severity},crelt("span",{class:"cm-diagnosticText"},n.renderMessage?n.renderMessage(e):n.message),(g=n.actions)===null||g===void 0?void 0:g.map((k,$)=>{let V=!1,L=re=>{if(re.preventDefault(),V)return;V=!0;let oe=findDiagnostic(e.state.field(lintState).diagnostics,n);oe&&k.apply(e,oe.from,oe.to)},{name:z}=k,j=y[$]?z.indexOf(y[$]):-1,ae=j<0?z:[z.slice(0,j),crelt("u",z.slice(j,j+1)),z.slice(j+1)];return crelt("button",{type:"button",class:"cm-diagnosticAction",onclick:L,onmousedown:L,"aria-label":` Action: ${z}${j<0?"":` (access key "${y[$]})"`}.`},ae)}),n.source&&crelt("div",{class:"cm-diagnosticSource"},n.source))}class DiagnosticWidget extends WidgetType{constructor(n){super(),this.sev=n}eq(n){return n.sev==this.sev}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class PanelItem{constructor(n,r){this.diagnostic=r,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic(n,r,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(n){this.view=n,this.items=[];let r=y=>{if(y.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(y.keyCode==38||y.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(y.keyCode==40||y.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(y.keyCode==36)this.moveSelection(0);else if(y.keyCode==35)this.moveSelection(this.items.length-1);else if(y.keyCode==13)this.view.focus();else if(y.keyCode>=65&&y.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:k}=this.items[this.selectedIndex],$=assignKeys(k.actions);for(let V=0;V<$.length;V++)if($[V].toUpperCase().charCodeAt(0)==y.keyCode){let L=findDiagnostic(this.view.state.field(lintState).diagnostics,k);L&&k.actions[V].apply(n,L.from,L.to)}}else return;y.preventDefault()},g=y=>{for(let k=0;k<this.items.length;k++)this.items[k].dom.contains(y.target)&&this.moveSelection(k)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:r,onclick:g}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"")),this.update()}get selectedIndex(){let n=this.view.state.field(lintState).selected;if(!n)return-1;for(let r=0;r<this.items.length;r++)if(this.items[r].diagnostic==n.diagnostic)return r;return-1}update(){let{diagnostics:n,selected:r}=this.view.state.field(lintState),g=0,y=!1,k=null,$=new Set;for(n.between(0,this.view.state.doc.length,(V,L,{spec:z})=>{for(let j of z.diagnostics){if($.has(j))continue;$.add(j);let ae=-1,re;for(let oe=g;oe<this.items.length;oe++)if(this.items[oe].diagnostic==j){ae=oe;break}ae<0?(re=new PanelItem(this.view,j),this.items.splice(g,0,re),y=!0):(re=this.items[ae],ae>g&&(this.items.splice(g,ae-g),y=!0)),r&&re.diagnostic==r.diagnostic?re.dom.hasAttribute("aria-selected")||(re.dom.setAttribute("aria-selected","true"),k=re):re.dom.hasAttribute("aria-selected")&&re.dom.removeAttribute("aria-selected"),g++}});g<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)y=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),y=!0),k?(this.list.setAttribute("aria-activedescendant",k.id),this.view.requestMeasure({key:this,read:()=>({sel:k.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:V,panel:L})=>{let z=L.height/this.list.offsetHeight;V.top<L.top?this.list.scrollTop-=(L.top-V.top)/z:V.bottom>L.bottom&&(this.list.scrollTop+=(V.bottom-L.bottom)/z)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),y&&this.sync()}sync(){let n=this.list.firstChild;function r(){let g=n;n=g.nextSibling,g.remove()}for(let g of this.items)if(g.dom.parentNode==this.list){for(;n!=g.dom;)r();n=g.dom.nextSibling}else this.list.insertBefore(g.dom,n);for(;n;)r()}moveSelection(n){if(this.selectedIndex<0)return;let r=this.view.state.field(lintState),g=findDiagnostic(r.diagnostics,this.items[n].diagnostic);g&&this.view.dispatch({selection:{anchor:g.from,head:g.to},scrollIntoView:!0,effects:movePanelSelection.of(g)})}static open(n){return new LintPanel(n)}}function svg$1(e,n='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${n}>${encodeURIComponent(e)}</svg>')`}function underline(e){return svg$1(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-hint":{backgroundImage:underline("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function severityWeight(e){return e=="error"?4:e=="warning"?3:e=="info"?2:1}function maxSeverity(e){let n="hint",r=1;for(let g of e){let y=severityWeight(g.severity);y>r&&(r=y,n=g.severity)}return n}const lintExtensions=[lintState,EditorView.decorations.compute([lintState],e=>{let{selected:n,panel:r}=e.field(lintState);return!n||!r||n.from==n.to?Decoration.none:Decoration.set([activeMark.range(n.from,n.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme],basicSetup=[lineNumbers(),highlightActiveLineGutter(),highlightSpecialChars(),history$1(),foldGutter(),drawSelection(),dropCursor(),EditorState.allowMultipleSelections.of(!0),indentOnInput(),syntaxHighlighting(defaultHighlightStyle,{fallback:!0}),bracketMatching(),closeBrackets(),autocompletion(),rectangularSelection(),crosshairCursor(),highlightActiveLine(),highlightSelectionMatches(),keymap.of([...closeBracketsKeymap,...defaultKeymap,...searchKeymap,...historyKeymap,...foldKeymap,...completionKeymap,...lintKeymap])];var define_process_env_default={};class Stack{constructor(n,r,g,y,k,$,V,L,z,j=0,ae){this.p=n,this.stack=r,this.state=g,this.reducePos=y,this.pos=k,this.score=$,this.buffer=V,this.bufferBase=L,this.curContext=z,this.lookAhead=j,this.parent=ae}toString(){return`[${this.stack.filter((n,r)=>r%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(n,r,g=0){let y=n.parser.context;return new Stack(n,[],r,g,g,0,[],0,y?new StackContext(y,y.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(n,r){this.stack.push(this.state,r,this.bufferBase+this.buffer.length),this.state=n}reduce(n){var r;let g=n>>19,y=n&65535,{parser:k}=this.p,$=this.reducePos<this.pos-25;$&&this.setLookAhead(this.pos);let V=k.dynamicPrecedence(y);if(V&&(this.score+=V),g==0){this.pushState(k.getGoto(this.state,y,!0),this.reducePos),y<k.minRepeatTerm&&this.storeNode(y,this.reducePos,this.reducePos,$?8:4,!0),this.reduceContext(y,this.reducePos);return}let L=this.stack.length-(g-1)*3-(n&262144?6:0),z=L?this.stack[L-2]:this.p.ranges[0].from,j=this.reducePos-z;j>=2e3&&!(!((r=this.p.parser.nodeSet.types[y])===null||r===void 0)&&r.isAnonymous)&&(z==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=j):this.p.lastBigReductionSize<j&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=z,this.p.lastBigReductionSize=j));let ae=L?this.stack[L-1]:0,re=this.bufferBase+this.buffer.length-ae;if(y<k.minRepeatTerm||n&131072){let oe=k.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(y,z,oe,re+4,!0)}if(n&262144)this.state=this.stack[L];else{let oe=this.stack[L-3];this.state=k.getGoto(oe,y,!0)}for(;this.stack.length>L;)this.stack.pop();this.reduceContext(y,z)}storeNode(n,r,g,y=4,k=!1){if(n==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let $=this,V=this.buffer.length;if(V==0&&$.parent&&(V=$.bufferBase-$.parent.bufferBase,$=$.parent),V>0&&$.buffer[V-4]==0&&$.buffer[V-1]>-1){if(r==g)return;if($.buffer[V-2]>=r){$.buffer[V-2]=g;return}}}if(!k||this.pos==g)this.buffer.push(n,r,g,y);else{let $=this.buffer.length;if($>0&&this.buffer[$-4]!=0){let V=!1;for(let L=$;L>0&&this.buffer[L-2]>g;L-=4)if(this.buffer[L-1]>=0){V=!0;break}if(V)for(;$>0&&this.buffer[$-2]>g;)this.buffer[$]=this.buffer[$-4],this.buffer[$+1]=this.buffer[$-3],this.buffer[$+2]=this.buffer[$-2],this.buffer[$+3]=this.buffer[$-1],$-=4,y>4&&(y-=4)}this.buffer[$]=n,this.buffer[$+1]=r,this.buffer[$+2]=g,this.buffer[$+3]=y}}shift(n,r,g,y){if(n&131072)this.pushState(n&65535,this.pos);else if(n&262144)this.pos=y,this.shiftContext(r,g),r<=this.p.parser.maxNode&&this.buffer.push(r,g,y,4);else{let k=n,{parser:$}=this.p;(y>this.pos||r<=$.maxNode)&&(this.pos=y,$.stateFlag(k,1)||(this.reducePos=y)),this.pushState(k,g),this.shiftContext(r,g),r<=$.maxNode&&this.buffer.push(r,g,y,4)}}apply(n,r,g,y){n&65536?this.reduce(n):this.shift(n,r,g,y)}useNode(n,r){let g=this.p.reused.length-1;(g<0||this.p.reused[g]!=n)&&(this.p.reused.push(n),g++);let y=this.pos;this.reducePos=this.pos=y+n.length,this.pushState(r,y),this.buffer.push(g,y,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,n,this,this.p.stream.reset(this.pos-n.length)))}split(){let n=this,r=n.buffer.length;for(;r>0&&n.buffer[r-2]>n.reducePos;)r-=4;let g=n.buffer.slice(r),y=n.bufferBase+r;for(;n&&y==n.bufferBase;)n=n.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,g,y,this.curContext,this.lookAhead,n)}recoverByDelete(n,r){let g=n<=this.p.parser.maxNode;g&&this.storeNode(n,this.pos,r,4),this.storeNode(0,this.pos,r,g?8:4),this.pos=this.reducePos=r,this.score-=190}canShift(n){for(let r=new SimulatedStack(this);;){let g=this.p.parser.stateSlot(r.state,4)||this.p.parser.hasAction(r.state,n);if(g==0)return!1;if(!(g&65536))return!0;r.reduce(g)}}recoverByInsert(n){if(this.stack.length>=300)return[];let r=this.p.parser.nextStates(this.state);if(r.length>8||this.stack.length>=120){let y=[];for(let k=0,$;k<r.length;k+=2)($=r[k+1])!=this.state&&this.p.parser.hasAction($,n)&&y.push(r[k],$);if(this.stack.length<120)for(let k=0;y.length<8&&k<r.length;k+=2){let $=r[k+1];y.some((V,L)=>L&1&&V==$)||y.push(r[k],$)}r=y}let g=[];for(let y=0;y<r.length&&g.length<4;y+=2){let k=r[y+1];if(k==this.state)continue;let $=this.split();$.pushState(k,this.pos),$.storeNode(0,$.pos,$.pos,4,!0),$.shiftContext(r[y],this.pos),$.reducePos=this.pos,$.score-=200,g.push($)}return g}forceReduce(){let{parser:n}=this.p,r=n.stateSlot(this.state,5);if(!(r&65536))return!1;if(!n.validAction(this.state,r)){let g=r>>19,y=r&65535,k=this.stack.length-g*3;if(k<0||n.getGoto(this.stack[k],y,!1)<0){let $=this.findForcedReduction();if($==null)return!1;r=$}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(r),!0}findForcedReduction(){let{parser:n}=this.p,r=[],g=(y,k)=>{if(!r.includes(y))return r.push(y),n.allActions(y,$=>{if(!($&393216))if($&65536){let V=($>>19)-k;if(V>1){let L=$&65535,z=this.stack.length-V*3;if(z>=0&&n.getGoto(this.stack[z],L,!1)>=0)return V<<19|65536|L}}else{let V=g($,k+1);if(V!=null)return V}})};return g(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:n}=this.p;return n.data[n.stateSlot(this.state,1)]==65535&&!n.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(n){if(this.state!=n.state||this.stack.length!=n.stack.length)return!1;for(let r=0;r<this.stack.length;r+=3)if(this.stack[r]!=n.stack[r])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(n){return this.p.parser.dialect.flags[n]}shiftContext(n,r){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,n,this,this.p.stream.reset(r)))}reduceContext(n,r){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,n,this,this.p.stream.reset(r)))}emitContext(){let n=this.buffer.length-1;(n<0||this.buffer[n]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let n=this.buffer.length-1;(n<0||this.buffer[n]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(n){if(n!=this.curContext.context){let r=new StackContext(this.curContext.tracker,n);r.hash!=this.curContext.hash&&this.emitContext(),this.curContext=r}}setLookAhead(n){n>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=n)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor(n,r){this.tracker=n,this.context=r,this.hash=n.strict?n.hash(r):0}}class SimulatedStack{constructor(n){this.start=n,this.state=n.state,this.stack=n.stack,this.base=this.stack.length}reduce(n){let r=n&65535,g=n>>19;g==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(g-1)*3;let y=this.start.p.parser.getGoto(this.stack[this.base-3],r,!0);this.state=y}}class StackBufferCursor{constructor(n,r,g){this.stack=n,this.pos=r,this.index=g,this.buffer=n.buffer,this.index==0&&this.maybeNext()}static create(n,r=n.bufferBase+n.buffer.length){return new StackBufferCursor(n,r,r-n.bufferBase)}maybeNext(){let n=this.stack.parent;n!=null&&(this.index=this.stack.bufferBase-n.bufferBase,this.stack=n,this.buffer=n.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(e,n=Uint16Array){if(typeof e!="string")return e;let r=null;for(let g=0,y=0;g<e.length;){let k=0;for(;;){let $=e.charCodeAt(g++),V=!1;if($==126){k=65535;break}$>=92&&$--,$>=34&&$--;let L=$-32;if(L>=46&&(L-=46,V=!0),k+=L,V)break;k*=46}r?r[y++]=k:r=new n(k)}return r}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(n,r){this.input=n,this.ranges=r,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=r[0].from,this.range=r[0],this.end=r[r.length-1].to,this.readNext()}resolveOffset(n,r){let g=this.range,y=this.rangeIndex,k=this.pos+n;for(;k<g.from;){if(!y)return null;let $=this.ranges[--y];k-=g.from-$.to,g=$}for(;r<0?k>g.to:k>=g.to;){if(y==this.ranges.length-1)return null;let $=this.ranges[++y];k+=$.from-g.to,g=$}return k}clipPos(n){if(n>=this.range.from&&n<this.range.to)return n;for(let r of this.ranges)if(r.to>n)return Math.max(n,r.from);return this.end}peek(n){let r=this.chunkOff+n,g,y;if(r>=0&&r<this.chunk.length)g=this.pos+n,y=this.chunk.charCodeAt(r);else{let k=this.resolveOffset(n,1);if(k==null)return-1;if(g=k,g>=this.chunk2Pos&&g<this.chunk2Pos+this.chunk2.length)y=this.chunk2.charCodeAt(g-this.chunk2Pos);else{let $=this.rangeIndex,V=this.range;for(;V.to<=g;)V=this.ranges[++$];this.chunk2=this.input.chunk(this.chunk2Pos=g),g+this.chunk2.length>V.to&&(this.chunk2=this.chunk2.slice(0,V.to-g)),y=this.chunk2.charCodeAt(0)}}return g>=this.token.lookAhead&&(this.token.lookAhead=g+1),y}acceptToken(n,r=0){let g=r?this.resolveOffset(r,-1):this.pos;if(g==null||g<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=n,this.token.end=g}acceptTokenTo(n,r){this.token.value=n,this.token.end=r}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:n,chunkPos:r}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=n,this.chunk2Pos=r,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let n=this.input.chunk(this.pos),r=this.pos+n.length;this.chunk=r>this.range.to?n.slice(0,this.range.to-this.pos):n,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(n=1){for(this.chunkOff+=n;this.pos+n>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();n-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=n,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(n,r){if(r?(this.token=r,r.start=n,r.lookAhead=n+1,r.value=r.extended=-1):this.token=nullToken,this.pos!=n){if(this.pos=n,n==this.end)return this.setDone(),this;for(;n<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;n>=this.range.to;)this.range=this.ranges[++this.rangeIndex];n>=this.chunkPos&&n<this.chunkPos+this.chunk.length?this.chunkOff=n-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(n,r){if(n>=this.chunkPos&&r<=this.chunkPos+this.chunk.length)return this.chunk.slice(n-this.chunkPos,r-this.chunkPos);if(n>=this.chunk2Pos&&r<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(n-this.chunk2Pos,r-this.chunk2Pos);if(n>=this.range.from&&r<=this.range.to)return this.input.read(n,r);let g="";for(let y of this.ranges){if(y.from>=r)break;y.to>n&&(g+=this.input.read(Math.max(y.from,n),Math.min(y.to,r)))}return g}}class TokenGroup{constructor(n,r){this.data=n,this.id=r}token(n,r){let{parser:g}=r.p;readToken(this.data,n,r,this.id,g.data,g.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class LocalTokenGroup{constructor(n,r,g){this.precTable=r,this.elseToken=g,this.data=typeof n=="string"?decodeArray(n):n}token(n,r){let g=n.pos,y=0;for(;;){let k=n.next<0,$=n.resolveOffset(1,1);if(readToken(this.data,n,r,0,this.data,this.precTable),n.token.value>-1)break;if(this.elseToken==null)return;if(k||y++,$==null)break;n.reset($,n.token)}y&&(n.reset(g,n.token),n.acceptToken(this.elseToken,y))}}LocalTokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class ExternalTokenizer{constructor(n,r={}){this.token=n,this.contextual=!!r.contextual,this.fallback=!!r.fallback,this.extend=!!r.extend}}function readToken(e,n,r,g,y,k){let $=0,V=1<<g,{dialect:L}=r.p.parser;e:for(;V&e[$];){let z=e[$+1];for(let oe=$+3;oe<z;oe+=2)if((e[oe+1]&V)>0){let ue=e[oe];if(L.allows(ue)&&(n.token.value==-1||n.token.value==ue||overrides(ue,n.token.value,y,k))){n.acceptToken(ue);break}}let j=n.next,ae=0,re=e[$+2];if(n.next<0&&re>ae&&e[z+re*3-3]==65535){$=e[z+re*3-1];continue e}for(;ae<re;){let oe=ae+re>>1,ue=z+oe+(oe<<1),le=e[ue],de=e[ue+1]||65536;if(j<le)re=oe;else if(j>=de)ae=oe+1;else{$=e[ue+2],n.advance();continue e}}break}}function findOffset(e,n,r){for(let g=n,y;(y=e[g])!=65535;g++)if(y==r)return g-n;return-1}function overrides(e,n,r,g){let y=findOffset(r,g,n);return y<0||findOffset(r,g,e)<y}const verbose=typeof process<"u"&&define_process_env_default&&/\bparse\b/.test(define_process_env_default.LOG);let stackIDs=null;function cutAt(e,n,r){let g=e.cursor(IterMode.IncludeAnonymous);for(g.moveTo(n);;)if(!(r<0?g.childBefore(n):g.childAfter(n)))for(;;){if((r<0?g.to<n:g.from>n)&&!g.type.isError)return r<0?Math.max(0,Math.min(g.to-1,n-25)):Math.min(e.length,Math.max(g.from+1,n+25));if(r<0?g.prevSibling():g.nextSibling())break;if(!g.parent())return r<0?0:e.length}}class FragmentCursor{constructor(n,r){this.fragments=n,this.nodeSet=r,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let n=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(n){for(this.safeFrom=n.openStart?cutAt(n.tree,n.from+n.offset,1)-n.offset:n.from,this.safeTo=n.openEnd?cutAt(n.tree,n.to+n.offset,-1)-n.offset:n.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(n.tree),this.start.push(-n.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(n){if(n<this.nextStart)return null;for(;this.fragment&&this.safeTo<=n;)this.nextFragment();if(!this.fragment)return null;for(;;){let r=this.trees.length-1;if(r<0)return this.nextFragment(),null;let g=this.trees[r],y=this.index[r];if(y==g.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let k=g.children[y],$=this.start[r]+g.positions[y];if($>n)return this.nextStart=$,null;if(k instanceof Tree){if($==n){if($<this.safeFrom)return null;let V=$+k.length;if(V<=this.safeTo){let L=k.prop(NodeProp.lookAhead);if(!L||V+L<this.fragment.to)return k}}this.index[r]++,$+k.length>=Math.max(this.safeFrom,n)&&(this.trees.push(k),this.start.push($),this.index.push(0))}else this.index[r]++,this.nextStart=$+k.length}}}class TokenCache{constructor(n,r){this.stream=r,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=n.tokenizers.map(g=>new CachedToken)}getActions(n){let r=0,g=null,{parser:y}=n.p,{tokenizers:k}=y,$=y.stateSlot(n.state,3),V=n.curContext?n.curContext.hash:0,L=0;for(let z=0;z<k.length;z++){if(!(1<<z&$))continue;let j=k[z],ae=this.tokens[z];if(!(g&&!j.fallback)&&((j.contextual||ae.start!=n.pos||ae.mask!=$||ae.context!=V)&&(this.updateCachedToken(ae,j,n),ae.mask=$,ae.context=V),ae.lookAhead>ae.end+25&&(L=Math.max(ae.lookAhead,L)),ae.value!=0)){let re=r;if(ae.extended>-1&&(r=this.addActions(n,ae.extended,ae.end,r)),r=this.addActions(n,ae.value,ae.end,r),!j.extend&&(g=ae,r>re))break}}for(;this.actions.length>r;)this.actions.pop();return L&&n.setLookAhead(L),!g&&n.pos==this.stream.end&&(g=new CachedToken,g.value=n.p.parser.eofTerm,g.start=g.end=n.pos,r=this.addActions(n,g.value,g.end,r)),this.mainToken=g,this.actions}getMainToken(n){if(this.mainToken)return this.mainToken;let r=new CachedToken,{pos:g,p:y}=n;return r.start=g,r.end=Math.min(g+1,y.stream.end),r.value=g==y.stream.end?y.parser.eofTerm:0,r}updateCachedToken(n,r,g){let y=this.stream.clipPos(g.pos);if(r.token(this.stream.reset(y,n),g),n.value>-1){let{parser:k}=g.p;for(let $=0;$<k.specialized.length;$++)if(k.specialized[$]==n.value){let V=k.specializers[$](this.stream.read(n.start,n.end),g);if(V>=0&&g.p.parser.dialect.allows(V>>1)){V&1?n.extended=V>>1:n.value=V>>1;break}}}else n.value=0,n.end=this.stream.clipPos(y+1)}putAction(n,r,g,y){for(let k=0;k<y;k+=3)if(this.actions[k]==n)return y;return this.actions[y++]=n,this.actions[y++]=r,this.actions[y++]=g,y}addActions(n,r,g,y){let{state:k}=n,{parser:$}=n.p,{data:V}=$;for(let L=0;L<2;L++)for(let z=$.stateSlot(k,L?2:1);;z+=3){if(V[z]==65535)if(V[z+1]==1)z=pair(V,z+2);else{y==0&&V[z+1]==2&&(y=this.putAction(pair(V,z+2),r,g,y));break}V[z]==r&&(y=this.putAction(pair(V,z+1),r,g,y))}return y}}class Parse{constructor(n,r,g,y){this.parser=n,this.input=r,this.ranges=y,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(r,y),this.tokens=new TokenCache(n,this.stream),this.topTerm=n.top[1];let{from:k}=y[0];this.stacks=[Stack.start(this,n.top[0],k)],this.fragments=g.length&&this.stream.end-k>n.bufferLength*4?new FragmentCursor(g,n.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let n=this.stacks,r=this.minStackPos,g=this.stacks=[],y,k;if(this.bigReductionCount>300&&n.length==1){let[$]=n;for(;$.forceReduce()&&$.stack.length&&$.stack[$.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let $=0;$<n.length;$++){let V=n[$];for(;;){if(this.tokens.mainToken=null,V.pos>r)g.push(V);else{if(this.advanceStack(V,g,n))continue;{y||(y=[],k=[]),y.push(V);let L=this.tokens.getMainToken(V);k.push(L.value,L.end)}}break}}if(!g.length){let $=y&&findFinished(y);if($)return verbose&&console.log("Finish with "+this.stackID($)),this.stackToTree($);if(this.parser.strict)throw verbose&&y&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&y){let $=this.stoppedAt!=null&&y[0].pos>this.stoppedAt?y[0]:this.runRecovery(y,k,g);if($)return verbose&&console.log("Force-finish "+this.stackID($)),this.stackToTree($.forceAll())}if(this.recovering){let $=this.recovering==1?1:this.recovering*3;if(g.length>$)for(g.sort((V,L)=>L.score-V.score);g.length>$;)g.pop();g.some(V=>V.reducePos>r)&&this.recovering--}else if(g.length>1){e:for(let $=0;$<g.length-1;$++){let V=g[$];for(let L=$+1;L<g.length;L++){let z=g[L];if(V.sameState(z)||V.buffer.length>500&&z.buffer.length>500)if((V.score-z.score||V.buffer.length-z.buffer.length)>0)g.splice(L--,1);else{g.splice($--,1);continue e}}}g.length>12&&g.splice(12,g.length-12)}this.minStackPos=g[0].pos;for(let $=1;$<g.length;$++)g[$].pos<this.minStackPos&&(this.minStackPos=g[$].pos);return null}stopAt(n){if(this.stoppedAt!=null&&this.stoppedAt<n)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=n}advanceStack(n,r,g){let y=n.pos,{parser:k}=this,$=verbose?this.stackID(n)+" -> ":"";if(this.stoppedAt!=null&&y>this.stoppedAt)return n.forceReduce()?n:null;if(this.fragments){let z=n.curContext&&n.curContext.tracker.strict,j=z?n.curContext.hash:0;for(let ae=this.fragments.nodeAt(y);ae;){let re=this.parser.nodeSet.types[ae.type.id]==ae.type?k.getGoto(n.state,ae.type.id):-1;if(re>-1&&ae.length&&(!z||(ae.prop(NodeProp.contextHash)||0)==j))return n.useNode(ae,re),verbose&&console.log($+this.stackID(n)+` (via reuse of ${k.getName(ae.type.id)})`),!0;if(!(ae instanceof Tree)||ae.children.length==0||ae.positions[0]>0)break;let oe=ae.children[0];if(oe instanceof Tree&&ae.positions[0]==0)ae=oe;else break}}let V=k.stateSlot(n.state,4);if(V>0)return n.reduce(V),verbose&&console.log($+this.stackID(n)+` (via always-reduce ${k.getName(V&65535)})`),!0;if(n.stack.length>=8400)for(;n.stack.length>6e3&&n.forceReduce(););let L=this.tokens.getActions(n);for(let z=0;z<L.length;){let j=L[z++],ae=L[z++],re=L[z++],oe=z==L.length||!g,ue=oe?n:n.split(),le=this.tokens.mainToken;if(ue.apply(j,ae,le?le.start:ue.pos,re),verbose&&console.log($+this.stackID(ue)+` (via ${j&65536?`reduce of ${k.getName(j&65535)}`:"shift"} for ${k.getName(ae)} @ ${y}${ue==n?"":", split"})`),oe)return!0;ue.pos>y?r.push(ue):g.push(ue)}return!1}advanceFully(n,r){let g=n.pos;for(;;){if(!this.advanceStack(n,null,null))return!1;if(n.pos>g)return pushStackDedup(n,r),!0}}runRecovery(n,r,g){let y=null,k=!1;for(let $=0;$<n.length;$++){let V=n[$],L=r[$<<1],z=r[($<<1)+1],j=verbose?this.stackID(V)+" -> ":"";if(V.deadEnd&&(k||(k=!0,V.restart(),verbose&&console.log(j+this.stackID(V)+" (restarted)"),this.advanceFully(V,g))))continue;let ae=V.split(),re=j;for(let oe=0;ae.forceReduce()&&oe<10&&(verbose&&console.log(re+this.stackID(ae)+" (via force-reduce)"),!this.advanceFully(ae,g));oe++)verbose&&(re=this.stackID(ae)+" -> ");for(let oe of V.recoverByInsert(L))verbose&&console.log(j+this.stackID(oe)+" (via recover-insert)"),this.advanceFully(oe,g);this.stream.end>V.pos?(z==V.pos&&(z++,L=0),V.recoverByDelete(L,z),verbose&&console.log(j+this.stackID(V)+` (via recover-delete ${this.parser.getName(L)})`),pushStackDedup(V,g)):(!y||y.score<V.score)&&(y=V)}return y}stackToTree(n){return n.close(),Tree.build({buffer:StackBufferCursor.create(n),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:n.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(n){let r=(stackIDs||(stackIDs=new WeakMap)).get(n);return r||stackIDs.set(n,r=String.fromCodePoint(this.nextStackID++)),r+n}}function pushStackDedup(e,n){for(let r=0;r<n.length;r++){let g=n[r];if(g.pos==e.pos&&g.sameState(e)){n[r].score<e.score&&(n[r]=e);return}}n.push(e)}class Dialect{constructor(n,r,g){this.source=n,this.flags=r,this.disabled=g}allows(n){return!this.disabled||this.disabled[n]==0}}const id=e=>e;class ContextTracker{constructor(n){this.start=n.start,this.shift=n.shift||id,this.reduce=n.reduce||id,this.reuse=n.reuse||id,this.hash=n.hash||(()=>0),this.strict=n.strict!==!1}}class LRParser extends Parser{constructor(n){if(super(),this.wrappers=[],n.version!=14)throw new RangeError(`Parser version (${n.version}) doesn't match runtime version (14)`);let r=n.nodeNames.split(" ");this.minRepeatTerm=r.length;for(let V=0;V<n.repeatNodeCount;V++)r.push("");let g=Object.keys(n.topRules).map(V=>n.topRules[V][1]),y=[];for(let V=0;V<r.length;V++)y.push([]);function k(V,L,z){y[V].push([L,L.deserialize(String(z))])}if(n.nodeProps)for(let V of n.nodeProps){let L=V[0];typeof L=="string"&&(L=NodeProp[L]);for(let z=1;z<V.length;){let j=V[z++];if(j>=0)k(j,L,V[z++]);else{let ae=V[z+-j];for(let re=-j;re>0;re--)k(V[z++],L,ae);z++}}}this.nodeSet=new NodeSet(r.map((V,L)=>NodeType.define({name:L>=this.minRepeatTerm?void 0:V,id:L,props:y[L],top:g.indexOf(L)>-1,error:L==0,skipped:n.skippedNodes&&n.skippedNodes.indexOf(L)>-1}))),n.propSources&&(this.nodeSet=this.nodeSet.extend(...n.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let $=decodeArray(n.tokenData);this.context=n.context,this.specializerSpecs=n.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let V=0;V<this.specializerSpecs.length;V++)this.specialized[V]=this.specializerSpecs[V].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(n.states,Uint32Array),this.data=decodeArray(n.stateData),this.goto=decodeArray(n.goto),this.maxTerm=n.maxTerm,this.tokenizers=n.tokenizers.map(V=>typeof V=="number"?new TokenGroup($,V):V),this.topRules=n.topRules,this.dialects=n.dialects||{},this.dynamicPrecedences=n.dynamicPrecedences||null,this.tokenPrecTable=n.tokenPrec,this.termNames=n.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(n,r,g){let y=new Parse(this,n,r,g);for(let k of this.wrappers)y=k(y,n,r,g);return y}getGoto(n,r,g=!1){let y=this.goto;if(r>=y[0])return-1;for(let k=y[r+1];;){let $=y[k++],V=$&1,L=y[k++];if(V&&g)return L;for(let z=k+($>>1);k<z;k++)if(y[k]==n)return L;if(V)return-1}}hasAction(n,r){let g=this.data;for(let y=0;y<2;y++)for(let k=this.stateSlot(n,y?2:1),$;;k+=3){if(($=g[k])==65535)if(g[k+1]==1)$=g[k=pair(g,k+2)];else{if(g[k+1]==2)return pair(g,k+2);break}if($==r||$==0)return pair(g,k+1)}return 0}stateSlot(n,r){return this.states[n*6+r]}stateFlag(n,r){return(this.stateSlot(n,0)&r)>0}validAction(n,r){return!!this.allActions(n,g=>g==r?!0:null)}allActions(n,r){let g=this.stateSlot(n,4),y=g?r(g):void 0;for(let k=this.stateSlot(n,1);y==null;k+=3){if(this.data[k]==65535)if(this.data[k+1]==1)k=pair(this.data,k+2);else break;y=r(pair(this.data,k+1))}return y}nextStates(n){let r=[];for(let g=this.stateSlot(n,1);;g+=3){if(this.data[g]==65535)if(this.data[g+1]==1)g=pair(this.data,g+2);else break;if(!(this.data[g+2]&1)){let y=this.data[g+1];r.some((k,$)=>$&1&&k==y)||r.push(this.data[g],y)}}return r}configure(n){let r=Object.assign(Object.create(LRParser.prototype),this);if(n.props&&(r.nodeSet=this.nodeSet.extend(...n.props)),n.top){let g=this.topRules[n.top];if(!g)throw new RangeError(`Invalid top rule name ${n.top}`);r.top=g}return n.tokenizers&&(r.tokenizers=this.tokenizers.map(g=>{let y=n.tokenizers.find(k=>k.from==g);return y?y.to:g})),n.specializers&&(r.specializers=this.specializers.slice(),r.specializerSpecs=this.specializerSpecs.map((g,y)=>{let k=n.specializers.find(V=>V.from==g.external);if(!k)return g;let $=Object.assign(Object.assign({},g),{external:k.to});return r.specializers[y]=getSpecializer($),$})),n.contextTracker&&(r.context=n.contextTracker),n.dialect&&(r.dialect=this.parseDialect(n.dialect)),n.strict!=null&&(r.strict=n.strict),n.wrap&&(r.wrappers=r.wrappers.concat(n.wrap)),n.bufferLength!=null&&(r.bufferLength=n.bufferLength),r}hasWrappers(){return this.wrappers.length>0}getName(n){return this.termNames?this.termNames[n]:String(n<=this.maxNode&&this.nodeSet.types[n].name||n)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(n){let r=this.dynamicPrecedences;return r==null?0:r[n]||0}parseDialect(n){let r=Object.keys(this.dialects),g=r.map(()=>!1);if(n)for(let k of n.split(" ")){let $=r.indexOf(k);$>=0&&(g[$]=!0)}let y=null;for(let k=0;k<r.length;k++)if(!g[k])for(let $=this.dialects[r[k]],V;(V=this.data[$++])!=65535;)(y||(y=new Uint8Array(this.maxTerm+1)))[V]=1;return new Dialect(n,g,y)}static deserialize(n){return new LRParser(n)}}function pair(e,n){return e[n]|e[n+1]<<16}function findFinished(e){let n=null;for(let r of e){let g=r.p.stoppedAt;(r.pos==r.p.stream.end||g!=null&&r.pos>g)&&r.p.parser.stateFlag(r.state,2)&&(!n||n.score<r.score)&&(n=r)}return n}function getSpecializer(e){if(e.external){let n=e.extend?1:0;return(r,g)=>e.external(r,g)<<1|n}return e.get}const noSemi=314,noSemiType=315,incdec=1,incdecPrefix=2,questionDot=3,JSXStartTag=4,insertSemi=316,spaces=318,newline=319,LineComment=5,BlockComment=6,Dialect_jsx=0,space=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],braceR=125,semicolon=59,slash=47,star=42,plus=43,minus=45,lt=60,comma=44,question=63,dot=46,bracketL=91,trackNewline=new ContextTracker({start:!1,shift(e,n){return n==LineComment||n==BlockComment||n==spaces?e:n==newline},strict:!1}),insertSemicolon=new ExternalTokenizer((e,n)=>{let{next:r}=e;(r==braceR||r==-1||n.context)&&e.acceptToken(insertSemi)},{contextual:!0,fallback:!0}),noSemicolon=new ExternalTokenizer((e,n)=>{let{next:r}=e,g;space.indexOf(r)>-1||r==slash&&((g=e.peek(1))==slash||g==star)||r!=braceR&&r!=semicolon&&r!=-1&&!n.context&&e.acceptToken(noSemi)},{contextual:!0}),noSemicolonType=new ExternalTokenizer((e,n)=>{e.next==bracketL&&!n.context&&e.acceptToken(noSemiType)},{contextual:!0}),operatorToken=new ExternalTokenizer((e,n)=>{let{next:r}=e;if(r==plus||r==minus){if(e.advance(),r==e.next){e.advance();let g=!n.context&&n.canShift(incdec);e.acceptToken(g?incdec:incdecPrefix)}}else r==question&&e.peek(1)==dot&&(e.advance(),e.advance(),(e.next<48||e.next>57)&&e.acceptToken(questionDot))},{contextual:!0});function identifierChar(e,n){return e>=65&&e<=90||e>=97&&e<=122||e==95||e>=192||!n&&e>=48&&e<=57}const jsx=new ExternalTokenizer((e,n)=>{if(e.next!=lt||!n.dialectEnabled(Dialect_jsx)||(e.advance(),e.next==slash))return;let r=0;for(;space.indexOf(e.next)>-1;)e.advance(),r++;if(identifierChar(e.next,!0)){for(e.advance(),r++;identifierChar(e.next,!1);)e.advance(),r++;for(;space.indexOf(e.next)>-1;)e.advance(),r++;if(e.next==comma)return;for(let g=0;;g++){if(g==7){if(!identifierChar(e.next,!0))return;break}if(e.next!="extends".charCodeAt(g))break;e.advance(),r++}}e.acceptToken(JSXStartTag,-r)}),jsHighlight=styleTags({"get set async static":tags.modifier,"for while do if else switch try catch finally return throw break continue default case":tags.controlKeyword,"in of await yield void typeof delete instanceof":tags.operatorKeyword,"let var const using function class extends":tags.definitionKeyword,"import export from":tags.moduleKeyword,"with debugger as new":tags.keyword,TemplateString:tags.special(tags.string),super:tags.atom,BooleanLiteral:tags.bool,this:tags.self,null:tags.null,Star:tags.modifier,VariableName:tags.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":tags.function(tags.variableName),VariableDefinition:tags.definition(tags.variableName),Label:tags.labelName,PropertyName:tags.propertyName,PrivatePropertyName:tags.special(tags.propertyName),"CallExpression/MemberExpression/PropertyName":tags.function(tags.propertyName),"FunctionDeclaration/VariableDefinition":tags.function(tags.definition(tags.variableName)),"ClassDeclaration/VariableDefinition":tags.definition(tags.className),"NewExpression/VariableName":tags.className,PropertyDefinition:tags.definition(tags.propertyName),PrivatePropertyDefinition:tags.definition(tags.special(tags.propertyName)),UpdateOp:tags.updateOperator,"LineComment Hashbang":tags.lineComment,BlockComment:tags.blockComment,Number:tags.number,String:tags.string,Escape:tags.escape,ArithOp:tags.arithmeticOperator,LogicOp:tags.logicOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,RegExp:tags.regexp,Equals:tags.definitionOperator,Arrow:tags.function(tags.punctuation),": Spread":tags.punctuation,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,"InterpolationStart InterpolationEnd":tags.special(tags.brace),".":tags.derefOperator,", ;":tags.separator,"@":tags.meta,TypeName:tags.typeName,TypeDefinition:tags.definition(tags.typeName),"type enum interface implements namespace module declare":tags.definitionKeyword,"abstract global Privacy readonly override":tags.modifier,"is keyof unique infer asserts":tags.operatorKeyword,JSXAttributeValue:tags.attributeValue,JSXText:tags.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":tags.angleBracket,"JSXIdentifier JSXNameSpacedName":tags.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":tags.attributeName,"JSXBuiltin/JSXIdentifier":tags.standard(tags.tagName)}),spec_identifier={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,const:52,extends:56,this:60,true:68,false:68,null:80,void:84,typeof:88,super:104,new:138,delete:150,yield:159,await:163,class:168,public:231,private:231,protected:231,readonly:233,instanceof:252,satisfies:255,in:256,import:290,keyof:347,unique:351,infer:357,asserts:393,is:395,abstract:415,implements:417,type:419,let:422,var:424,using:427,interface:433,enum:437,namespace:443,module:445,declare:449,global:453,for:472,of:481,while:484,with:488,do:492,if:496,else:498,switch:502,case:508,try:514,catch:518,finally:522,return:526,throw:530,break:534,continue:538,debugger:542},spec_word={__proto__:null,async:125,get:127,set:129,declare:191,public:193,private:193,protected:193,static:195,abstract:197,override:199,readonly:205,accessor:207,new:399},spec_LessThan={__proto__:null,"<":189},parser=LRParser.deserialize({version:14,states:"$EOQ%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#D_O.QQlO'#DeO.bQlO'#DpO%[QlO'#DxO0fQlO'#EQOOQ!0Lf'#EY'#EYO1PQ`O'#EVOOQO'#En'#EnOOQO'#Ij'#IjO1XQ`O'#GrO1dQ`O'#EmO1iQ`O'#EmO3hQ!0MxO'#JpO6[Q!0MxO'#JqO6uQ`O'#F[O6zQ,UO'#FsOOQ!0Lf'#Fe'#FeO7VO7dO'#FeO7eQMhO'#F{O9UQ`O'#FzOOQ!0Lf'#Jq'#JqOOQ!0Lb'#Jp'#JpO9ZQ`O'#GvOOQ['#K]'#K]O9fQ`O'#IWO9kQ!0LrO'#IXOOQ['#J^'#J^OOQ['#I]'#I]Q`QlOOQ`QlOOO9sQ!L^O'#DtO9zQlO'#D|O:RQlO'#EOO9aQ`O'#GrO:YQMhO'#CoO:hQ`O'#ElO:sQ`O'#EwO:xQMhO'#FdO;gQ`O'#GrOOQO'#K^'#K^O;lQ`O'#K^O;zQ`O'#GzO;zQ`O'#G{O;zQ`O'#G}O9aQ`O'#HQO<qQ`O'#HTO>YQ`O'#CeO>jQ`O'#HaO>rQ`O'#HgO>rQ`O'#HiO`QlO'#HkO>rQ`O'#HmO>rQ`O'#HpO>wQ`O'#HvO>|Q!0LsO'#H|O%[QlO'#IOO?XQ!0LsO'#IQO?dQ!0LsO'#ISO9kQ!0LrO'#IUO?oQ!0MxO'#CiO@qQpO'#DjQOQ`OOO%[QlO'#EOOAXQ`O'#ERO:YQMhO'#ElOAdQ`O'#ElOAoQ!bO'#FdOOQ['#Cg'#CgOOQ!0Lb'#Do'#DoOOQ!0Lb'#Jt'#JtO%[QlO'#JtOOQO'#Jw'#JwOOQO'#If'#IfOBoQpO'#EeOOQ!0Lb'#Ed'#EdOOQ!0Lb'#J{'#J{OCkQ!0MSO'#EeOCuQpO'#EUOOQO'#Jv'#JvODZQpO'#JwOEhQpO'#EUOCuQpO'#EePEuO&2DjO'#CbPOOO)CD{)CD{OOOO'#I^'#I^OFQO#tO,59UOOQ!0Lh,59U,59UOOOO'#I_'#I_OF`O&jO,59UOFnQ!L^O'#DaOOOO'#Ia'#IaOFuO#@ItO,59yOOQ!0Lf,59y,59yOGTQlO'#IbOGhQ`O'#JrOIgQ!fO'#JrO+}QlO'#JrOInQ`O,5:POJUQ`O'#EnOJcQ`O'#KROJnQ`O'#KQOJnQ`O'#KQOJvQ`O,5;[OJ{Q`O'#KPOOQ!0Ln,5:[,5:[OKSQlO,5:[OMQQ!0MxO,5:dOMqQ`O,5:lON[Q!0LrO'#KOONcQ`O'#J}O9ZQ`O'#J}ONwQ`O'#J}O! PQ`O,5;ZO! UQ`O'#J}O!#ZQ!fO'#JqOOQ!0Lh'#Ci'#CiO%[QlO'#EQO!#yQ!fO,5:qOOQS'#Jx'#JxOOQO-E<h-E<hO9aQ`O,5=^O!$aQ`O,5=^O!$fQlO,5;XO!&iQMhO'#EiO!(SQ`O,5;XO!(XQlO'#DwO!(cQpO,5;bO!(kQpO,5;bO%[QlO,5;bOOQ['#FS'#FSOOQ['#FU'#FUO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cOOQ['#FY'#FYO!(yQlO,5;sOOQ!0Lf,5;x,5;xOOQ!0Lf,5;y,5;yOOQ!0Lf,5;{,5;{O%[QlO'#InO!*|Q!0LrO,5<hO%[QlO,5;cO!&iQMhO,5;cO!+kQMhO,5;cO!-]QMhO'#E[O%[QlO,5;vOOQ!0Lf,5;z,5;zO!-dQ,UO'#FiO!.aQ,UO'#KVO!-{Q,UO'#KVO!.hQ,UO'#KVOOQO'#KV'#KVO!.|Q,UO,5<ROOOW,5<_,5<_O!/_QlO'#FuOOOW'#Im'#ImO7VO7dO,5<PO!/fQ,UO'#FwOOQ!0Lf,5<P,5<PO!0VQ$IUO'#CwOOQ!0Lh'#C{'#C{O!0jO#@ItO'#DPO!1WQMjO,5<dO!1_Q`O,5<gO!2zQ(CWO'#GWO!3XQ`O'#GXO!3^Q`O'#GXO!4|Q(CWO'#G]O!6RQpO'#GaOOQO'#Gm'#GmO!+rQMhO'#GlOOQO'#Go'#GoO!+rQMhO'#GnO!6tQ$IUO'#JjOOQ!0Lh'#Jj'#JjO!7OQ`O'#JiO!7^Q`O'#JhO!7fQ`O'#CuOOQ!0Lh'#Cy'#CyO!7qQ`O'#C{OOQ!0Lh'#DT'#DTOOQ!0Lh'#DV'#DVO1SQ`O'#DXO!+rQMhO'#GOO!+rQMhO'#GQO!7vQ`O'#GSO!7{Q`O'#GTO!3^Q`O'#GZO!+rQMhO'#G`O;zQ`O'#JiO!8QQ`O'#EoO!8oQ`O,5<fOOQ!0Lb'#Cr'#CrO!8wQ`O'#EpO!9qQpO'#EqOOQ!0Lb'#KP'#KPO!9xQ!0LrO'#K_O9kQ!0LrO,5=bO`QlO,5>rOOQ['#Jf'#JfOOQ[,5>s,5>sOOQ[-E<Z-E<ZO!;wQ!0MxO,5:`O!9lQpO,5:^O!>bQ!0MxO,5:hO%[QlO,5:hO!@xQ!0MxO,5:jOOQO,5@x,5@xO!AiQMhO,5=^O!AwQ!0LrO'#JgO9UQ`O'#JgO!BYQ!0LrO,59ZO!BeQpO,59ZO!BmQMhO,59ZO:YQMhO,59ZO!BxQ`O,5;XO!CQQ`O'#H`O!CfQ`O'#KbO%[QlO,5;|O!9lQpO,5<OO!CnQ`O,5=yO!CsQ`O,5=yO!CxQ`O,5=yO9kQ!0LrO,5=yO;zQ`O,5=iOOQO'#Cw'#CwO!DWQpO,5=fO!D`QMhO,5=gO!DkQ`O,5=iO!DpQ!bO,5=lO!DxQ`O'#K^O>wQ`O'#HVO9aQ`O'#HXO!D}Q`O'#HXO:YQMhO'#HZO!ESQ`O'#HZOOQ[,5=o,5=oO!EXQ`O'#H[O!EjQ`O'#CoO!EoQ`O,59PO!EyQ`O,59PO!HOQlO,59POOQ[,59P,59PO!H`Q!0LrO,59PO%[QlO,59PO!JkQlO'#HcOOQ['#Hd'#HdOOQ['#He'#HeO`QlO,5={O!KRQ`O,5={O`QlO,5>RO`QlO,5>TO!KWQ`O,5>VO`QlO,5>XO!K]Q`O,5>[O!KbQlO,5>bOOQ[,5>h,5>hO%[QlO,5>hO9kQ!0LrO,5>jOOQ[,5>l,5>lO# lQ`O,5>lOOQ[,5>n,5>nO# lQ`O,5>nOOQ[,5>p,5>pO#!YQpO'#D]O%[QlO'#JtO#!{QpO'#JtO##VQpO'#DkO##hQpO'#DkO#%yQlO'#DkO#&QQ`O'#JsO#&YQ`O,5:UO#&_Q`O'#ErO#&mQ`O'#KSO#&uQ`O,5;]O#&zQpO'#DkO#'XQpO'#ETOOQ!0Lf,5:m,5:mO%[QlO,5:mO#'`Q`O,5:mO>wQ`O,5;WO!BeQpO,5;WO!BmQMhO,5;WO:YQMhO,5;WO#'hQ`O,5@`O#'mQ07dO,5:qOOQO-E<d-E<dO#(sQ!0MSO,5;POCuQpO,5:pO#(}QpO,5:pOCuQpO,5;PO!BYQ!0LrO,5:pOOQ!0Lb'#Eh'#EhOOQO,5;P,5;PO%[QlO,5;PO#)[Q!0LrO,5;PO#)gQ!0LrO,5;PO!BeQpO,5:pOOQO,5;V,5;VO#)uQ!0LrO,5;PPOOO'#I['#I[P#*ZO&2DjO,58|POOO,58|,58|OOOO-E<[-E<[OOQ!0Lh1G.p1G.pOOOO-E<]-E<]OOOO,59{,59{O#*fQ!bO,59{OOOO-E<_-E<_OOQ!0Lf1G/e1G/eO#*kQ!fO,5>|O+}QlO,5>|OOQO,5?S,5?SO#*uQlO'#IbOOQO-E<`-E<`O#+SQ`O,5@^O#+[Q!fO,5@^O#+cQ`O,5@lOOQ!0Lf1G/k1G/kO%[QlO,5@mO#+kQ`O'#IhOOQO-E<f-E<fO#+cQ`O,5@lOOQ!0Lb1G0v1G0vOOQ!0Ln1G/v1G/vOOQ!0Ln1G0W1G0WO%[QlO,5@jO#,PQ!0LrO,5@jO#,bQ!0LrO,5@jO#,iQ`O,5@iO9ZQ`O,5@iO#,qQ`O,5@iO#-PQ`O'#IkO#,iQ`O,5@iOOQ!0Lb1G0u1G0uO!(cQpO,5:sO!(nQpO,5:sOOQS,5:u,5:uO#-qQdO,5:uO#-yQMhO1G2xO9aQ`O1G2xOOQ!0Lf1G0s1G0sO#.XQ!0MxO1G0sO#/^Q!0MvO,5;TOOQ!0Lh'#GV'#GVO#/zQ!0MzO'#JjO!$fQlO1G0sO#2VQ!fO'#JuO%[QlO'#JuO#2aQ`O,5:cOOQ!0Lh'#D]'#D]OOQ!0Lf1G0|1G0|O%[QlO1G0|OOQ!0Lf1G1e1G1eO#2fQ`O1G0|O#4zQ!0MxO1G0}O#5RQ!0MxO1G0}O#7iQ!0MxO1G0}O#7pQ!0MxO1G0}O#:WQ!0MxO1G0}O#<nQ!0MxO1G0}O#<uQ!0MxO1G0}O#<|Q!0MxO1G0}O#?dQ!0MxO1G0}O#?kQ!0MxO1G0}O#AxQ?MtO'#CiO#CsQ?MtO1G1_O#CzQ?MtO'#JqO#D_Q!0MxO,5?YOOQ!0Lb-E<l-E<lO#FlQ!0MxO1G0}O#GiQ!0MzO1G0}OOQ!0Lf1G0}1G0}O#HlQMjO'#JzO#HvQ`O,5:vO#H{Q!0MxO1G1bO#IoQ,UO,5<VO#IwQ,UO,5<WO#JPQ,UO'#FnO#JhQ`O'#FmOOQO'#KW'#KWOOQO'#Il'#IlO#JmQ,UO1G1mOOQ!0Lf1G1m1G1mOOOW1G1x1G1xO#KOQ?MtO'#JpO#KYQ`O,5<aO!(yQlO,5<aOOOW-E<k-E<kOOQ!0Lf1G1k1G1kO#K_QpO'#KVOOQ!0Lf,5<c,5<cO#KgQpO,5<cO#KlQMhO'#DROOOO'#I`'#I`O#KsO#@ItO,59kOOQ!0Lh,59k,59kO%[QlO1G2OO!7{Q`O'#IpO#LOQ`O,5<yOOQ!0Lh,5<v,5<vO!+rQMhO'#IsO#LlQMjO,5=WO!+rQMhO'#IuO#M_QMjO,5=YO!&iQMhO,5=[OOQO1G2R1G2RO#MiQ!dO'#CrO#M|Q(CWO'#EpO$ RQpO'#GaO$ iQ!dO,5<rO$ pQ`O'#KYO9ZQ`O'#KYO$!OQ`O,5<tO!+rQMhO,5<sO$!TQ`O'#GYO$!fQ`O,5<sO$!kQ!dO'#GVO$!xQ!dO'#KZO$#SQ`O'#KZO!&iQMhO'#KZO$#XQ`O,5<wO$#^QlO'#JtO$#hQpO'#GbO##hQpO'#GbO$#yQ`O'#GfO!3^Q`O'#GjO$$OQ!0LrO'#IrO$$ZQpO,5<{OOQ!0Lp,5<{,5<{O$$bQpO'#GbO$$oQpO'#GcO$%QQpO'#GcO$%VQMjO,5=WO$%gQMjO,5=YOOQ!0Lh,5=],5=]O!+rQMhO,5@TO!+rQMhO,5@TO$%wQ`O'#IwO$&VQ`O,5@SO$&_Q`O,59aOOQ!0Lh,59g,59gO$'UQ$IYO,59sOOQ!0Lh'#Jn'#JnO$'wQMjO,5<jO$(jQMjO,5<lO@iQ`O,5<nOOQ!0Lh,5<o,5<oO$(tQ`O,5<uO$(yQMjO,5<zO$)ZQ`O,5@TO$)iQ`O'#J}O!$fQlO1G2QO$)nQ`O1G2QO9ZQ`O'#KQO9ZQ`O'#ErO%[QlO'#ErO9ZQ`O'#IyO$)sQ!0LrO,5@yOOQ[1G2|1G2|OOQ[1G4^1G4^OOQ!0Lf1G/z1G/zOOQ!0Lf1G/x1G/xO$+uQ!0MxO1G0SOOQ[1G2x1G2xO!&iQMhO1G2xO%[QlO1G2xO#-|Q`O1G2xO$-yQMhO'#EiOOQ!0Lb,5@R,5@RO$.WQ!0LrO,5@ROOQ[1G.u1G.uO!BYQ!0LrO1G.uO!BeQpO1G.uO!BmQMhO1G.uO$.iQ`O1G0sO$.nQ`O'#CiO$.yQ`O'#KcO$/RQ`O,5=zO$/WQ`O'#KcO$/]Q`O'#KcO$/kQ`O'#JPO$/yQ`O,5@|O$0RQ!fO1G1hOOQ!0Lf1G1j1G1jO9aQ`O1G3eO@iQ`O1G3eO$0YQ`O1G3eO$0_Q`O1G3eOOQ[1G3e1G3eO!DkQ`O1G3TO!&iQMhO1G3QO$0dQ`O1G3QOOQ[1G3R1G3RO!&iQMhO1G3RO$0iQ`O1G3RO$0qQpO'#HPOOQ[1G3T1G3TO!5|QpO'#I{O!DpQ!bO1G3WOOQ[1G3W1G3WOOQ[,5=q,5=qO$0yQMhO,5=sO9aQ`O,5=sO$#yQ`O,5=uO9UQ`O,5=uO!BeQpO,5=uO!BmQMhO,5=uO:YQMhO,5=uO$1XQ`O'#KaO$1dQ`O,5=vOOQ[1G.k1G.kO$1iQ!0LrO1G.kO@iQ`O1G.kO$1tQ`O1G.kO9kQ!0LrO1G.kO$3|Q!fO,5AOO$4ZQ`O,5AOO9ZQ`O,5AOO$4fQlO,5=}O$4mQ`O,5=}OOQ[1G3g1G3gO`QlO1G3gOOQ[1G3m1G3mOOQ[1G3o1G3oO>rQ`O1G3qO$4rQlO1G3sO$8vQlO'#HrOOQ[1G3v1G3vO$9TQ`O'#HxO>wQ`O'#HzOOQ[1G3|1G3|O$9]QlO1G3|O9kQ!0LrO1G4SOOQ[1G4U1G4UOOQ!0Lb'#G^'#G^O9kQ!0LrO1G4WO9kQ!0LrO1G4YO$=dQ`O,5@`O!(yQlO,5;^O9ZQ`O,5;^O>wQ`O,5:VO!(yQlO,5:VO!BeQpO,5:VO$=iQ?MtO,5:VOOQO,5;^,5;^O$=sQpO'#IcO$>ZQ`O,5@_OOQ!0Lf1G/p1G/pO$>cQpO'#IiO$>mQ`O,5@nOOQ!0Lb1G0w1G0wO##hQpO,5:VOOQO'#Ie'#IeO$>uQpO,5:oOOQ!0Ln,5:o,5:oO#'cQ`O1G0XOOQ!0Lf1G0X1G0XO%[QlO1G0XOOQ!0Lf1G0r1G0rO>wQ`O1G0rO!BeQpO1G0rO!BmQMhO1G0rOOQ!0Lb1G5z1G5zO!BYQ!0LrO1G0[OOQO1G0k1G0kO%[QlO1G0kO$>|Q!0LrO1G0kO$?XQ!0LrO1G0kO!BeQpO1G0[OCuQpO1G0[O$?gQ!0LrO1G0kOOQO1G0[1G0[O$?{Q!0MxO1G0kPOOO-E<Y-E<YPOOO1G.h1G.hOOOO1G/g1G/gO$@VQ!bO,5<hO$@_Q!fO1G4hOOQO1G4n1G4nO%[QlO,5>|O$@iQ`O1G5xO$@qQ`O1G6WO$@yQ!fO1G6XO9ZQ`O,5?SO$ATQ!0MxO1G6UO%[QlO1G6UO$AeQ!0LrO1G6UO$AvQ`O1G6TO$AvQ`O1G6TO9ZQ`O1G6TO$BOQ`O,5?VO9ZQ`O,5?VOOQO,5?V,5?VO$BdQ`O,5?VO$)iQ`O,5?VOOQO-E<i-E<iOOQS1G0_1G0_OOQS1G0a1G0aO#-tQ`O1G0aOOQ[7+(d7+(dO!&iQMhO7+(dO%[QlO7+(dO$BrQ`O7+(dO$B}QMhO7+(dO$C]Q!0MzO,5=WO$EhQ!0MzO,5=YO$GsQ!0MzO,5=WO$JUQ!0MzO,5=YO$LgQ!0MzO,59sO$NlQ!0MzO,5<jO%!wQ!0MzO,5<lO%%SQ!0MzO,5<zOOQ!0Lf7+&_7+&_O%'eQ!0MxO7+&_O%(XQlO'#IdO%(fQ`O,5@aO%(nQ!fO,5@aOOQ!0Lf1G/}1G/}O%(xQ`O7+&hOOQ!0Lf7+&h7+&hO%(}Q?MtO,5:dO%[QlO7+&yO%)XQ?MtO,5:`O%)fQ?MtO,5:hO%)pQ?MtO,5:jO%)zQMhO'#IgO%*UQ`O,5@fOOQ!0Lh1G0b1G0bOOQO1G1q1G1qOOQO1G1r1G1rO%*^Q!jO,5<YO!(yQlO,5<XOOQO-E<j-E<jOOQ!0Lf7+'X7+'XOOOW7+'d7+'dOOOW1G1{1G1{O%*iQ`O1G1{OOQ!0Lf1G1}1G1}OOOO,59m,59mO%*nQ!dO,59mOOOO-E<^-E<^OOQ!0Lh1G/V1G/VO%*uQ!0MxO7+'jOOQ!0Lh,5?[,5?[O%+iQMhO1G2eP%+pQ`O'#IpPOQ!0Lh-E<n-E<nO%,^QMjO,5?_OOQ!0Lh-E<q-E<qO%-PQMjO,5?aOOQ!0Lh-E<s-E<sO%-ZQ!dO1G2vO%-bQ!dO'#CrO%-xQMhO'#KQO$#^QlO'#JtOOQ!0Lh1G2^1G2^O%.PQ`O'#IoO%.eQ`O,5@tO%.eQ`O,5@tO%.mQ`O,5@tO%.xQ`O,5@tOOQO1G2`1G2`O%/WQMjO1G2_O!+rQMhO1G2_O%/hQ(CWO'#IqO%/uQ`O,5@uO!&iQMhO,5@uO%/}Q!dO,5@uOOQ!0Lh1G2c1G2cO%2_Q!fO'#CiO%2iQ`O,5=OOOQ!0Lb,5<|,5<|O%2qQpO,5<|OOQ!0Lb,5<},5<}OCfQ`O,5<|O%2|QpO,5<|OOQ!0Lb,5=Q,5=QO$)iQ`O,5=UOOQO,5?^,5?^OOQO-E<p-E<pOOQ!0Lp1G2g1G2gO##hQpO,5<|O$#^QlO,5=OO%3[Q`O,5<}O%3gQpO,5<}O!+rQMhO'#IsO%4aQMjO1G2rO!+rQMhO'#IuO%5SQMjO1G2tO%5^QMjO1G5oO%5hQMjO1G5oOOQO,5?c,5?cOOQO-E<u-E<uOOQO1G.{1G.{O!9lQpO,59uO%[QlO,59uOOQ!0Lh,5<i,5<iO%5uQ`O1G2YO!+rQMhO1G2aO!+rQMhO1G5oO!+rQMhO1G5oO%5zQ!0MxO7+'lOOQ!0Lf7+'l7+'lO!$fQlO7+'lO%6nQ`O,5;^OOQ!0Lb,5?e,5?eOOQ!0Lb-E<w-E<wO%6sQ!dO'#K[O#'cQ`O7+(dO4UQ!fO7+(dO$BuQ`O7+(dO%6}Q!0MvO'#CiO%7nQ!0LrO,5=RO%8PQ!0MvO,5=RO%8dQ`O,5=ROOQ!0Lb1G5m1G5mOOQ[7+$a7+$aO!BYQ!0LrO7+$aO!BeQpO7+$aO!$fQlO7+&_O%8lQ`O'#JOO%9TQ`O,5@}OOQO1G3f1G3fO9aQ`O,5@}O%9TQ`O,5@}O%9]Q`O,5@}OOQO,5?k,5?kOOQO-E<}-E<}OOQ!0Lf7+'S7+'SO%9bQ`O7+)PO9kQ!0LrO7+)PO9aQ`O7+)PO@iQ`O7+)POOQ[7+(o7+(oO%9gQ!0MvO7+(lO!&iQMhO7+(lO!DfQ`O7+(mOOQ[7+(m7+(mO!&iQMhO7+(mO%9qQ`O'#K`O%9|Q`O,5=kOOQO,5?g,5?gOOQO-E<y-E<yOOQ[7+(r7+(rO%;`QpO'#HYOOQ[1G3_1G3_O!&iQMhO1G3_O%[QlO1G3_O%;gQ`O1G3_O%;rQMhO1G3_O9kQ!0LrO1G3aO$#yQ`O1G3aO9UQ`O1G3aO!BeQpO1G3aO!BmQMhO1G3aO%<QQ`O'#I}O%<fQ`O,5@{O%<nQpO,5@{OOQ!0Lb1G3b1G3bOOQ[7+$V7+$VO@iQ`O7+$VO9kQ!0LrO7+$VO%<yQ`O7+$VO%[QlO1G6jO%[QlO1G6kO%=OQ!0LrO1G6jO%=YQlO1G3iO%=aQ`O1G3iO%=fQlO1G3iOOQ[7+)R7+)RO9kQ!0LrO7+)]O`QlO7+)_OOQ['#Kf'#KfOOQ['#JQ'#JQO%=mQlO,5>^OOQ[,5>^,5>^O%[QlO'#HsO%=zQ`O'#HuOOQ[,5>d,5>dO9ZQ`O,5>dOOQ[,5>f,5>fOOQ[7+)h7+)hOOQ[7+)n7+)nOOQ[7+)r7+)rOOQ[7+)t7+)tO%>PQpO1G5zO%>kQ?MtO1G0xO%>uQ`O1G0xOOQO1G/q1G/qO%?QQ?MtO1G/qO>wQ`O1G/qO!(yQlO'#DkOOQO,5>},5>}OOQO-E<a-E<aOOQO,5?T,5?TOOQO-E<g-E<gO!BeQpO1G/qOOQO-E<c-E<cOOQ!0Ln1G0Z1G0ZOOQ!0Lf7+%s7+%sO#'cQ`O7+%sOOQ!0Lf7+&^7+&^O>wQ`O7+&^O!BeQpO7+&^OOQO7+%v7+%vO$?{Q!0MxO7+&VOOQO7+&V7+&VO%[QlO7+&VO%?[Q!0LrO7+&VO!BYQ!0LrO7+%vO!BeQpO7+%vO%?gQ!0LrO7+&VO%?uQ!0MxO7++pO%[QlO7++pO%@VQ`O7++oO%@VQ`O7++oOOQO1G4q1G4qO9ZQ`O1G4qO%@_Q`O1G4qOOQS7+%{7+%{O#'cQ`O<<LOO4UQ!fO<<LOO%@mQ`O<<LOOOQ[<<LO<<LOO!&iQMhO<<LOO%[QlO<<LOO%@uQ`O<<LOO%AQQ!0MzO,5?_O%C]Q!0MzO,5?aO%EhQ!0MzO1G2_O%GyQ!0MzO1G2rO%JUQ!0MzO1G2tO%LaQ!fO,5?OO%[QlO,5?OOOQO-E<b-E<bO%LkQ`O1G5{OOQ!0Lf<<JS<<JSO%LsQ?MtO1G0sO%NzQ?MtO1G0}O& RQ?MtO1G0}O&#SQ?MtO1G0}O&#ZQ?MtO1G0}O&%[Q?MtO1G0}O&']Q?MtO1G0}O&'dQ?MtO1G0}O&'kQ?MtO1G0}O&)lQ?MtO1G0}O&)sQ?MtO1G0}O&)zQ!0MxO<<JeO&+rQ?MtO1G0}O&,oQ?MvO1G0}O&-rQ?MvO'#JjO&/xQ?MtO1G1bO&0VQ?MtO1G0SO&0aQMjO,5?ROOQO-E<e-E<eO!(yQlO'#FpOOQO'#KX'#KXOOQO1G1t1G1tO&0kQ`O1G1sO&0pQ?MtO,5?YOOOW7+'g7+'gOOOO1G/X1G/XO&0zQ!dO1G4vOOQ!0Lh7+(P7+(PP!&iQMhO,5?[O!+rQMhO7+(bO&1RQ`O,5?ZO9ZQ`O,5?ZOOQO-E<m-E<mO&1aQ`O1G6`O&1aQ`O1G6`O&1iQ`O1G6`O&1tQMjO7+'yO&2UQ!dO,5?]O&2`Q`O,5?]O!&iQMhO,5?]OOQO-E<o-E<oO&2eQ!dO1G6aO&2oQ`O1G6aO&2wQ`O1G2jO!&iQMhO1G2jOOQ!0Lb1G2h1G2hOOQ!0Lb1G2i1G2iO%2qQpO1G2hO!BeQpO1G2hOCfQ`O1G2hOOQ!0Lb1G2p1G2pO&2|QpO1G2hO&3[Q`O1G2jO$)iQ`O1G2iOCfQ`O1G2iO$#^QlO1G2jO&3dQ`O1G2iO&4WQMjO,5?_OOQ!0Lh-E<r-E<rO&4yQMjO,5?aOOQ!0Lh-E<t-E<tO!+rQMhO7++ZOOQ!0Lh1G/a1G/aO&5TQ`O1G/aOOQ!0Lh7+'t7+'tO&5YQMjO7+'{O&5jQMjO7++ZO&5tQMjO7++ZO&6RQ!0MxO<<KWOOQ!0Lf<<KW<<KWO&6uQ`O1G0xO!&iQMhO'#IxO&6zQ`O,5@vO&8|Q!fO<<LOO!&iQMhO1G2mO&9TQ!0LrO1G2mOOQ[<<G{<<G{O!BYQ!0LrO<<G{O&9fQ!0MxO<<IyOOQ!0Lf<<Iy<<IyOOQO,5?j,5?jO&:YQ`O,5?jO&:_Q`O,5?jOOQO-E<|-E<|O&:mQ`O1G6iO&:mQ`O1G6iO9aQ`O1G6iO@iQ`O<<LkOOQ[<<Lk<<LkO&:uQ`O<<LkO9kQ!0LrO<<LkOOQ[<<LW<<LWO%9gQ!0MvO<<LWOOQ[<<LX<<LXO!DfQ`O<<LXO&:zQpO'#IzO&;VQ`O,5@zO!(yQlO,5@zOOQ[1G3V1G3VOOQO'#I|'#I|O9kQ!0LrO'#I|O&;_QpO,5=tOOQ[,5=t,5=tO&;fQpO'#EeO&;mQpO'#GdO&;rQ`O7+(yO&;wQ`O7+(yOOQ[7+(y7+(yO!&iQMhO7+(yO%[QlO7+(yO&<PQ`O7+(yOOQ[7+({7+({O9kQ!0LrO7+({O$#yQ`O7+({O9UQ`O7+({O!BeQpO7+({O&<[Q`O,5?iOOQO-E<{-E<{OOQO'#H]'#H]O&<gQ`O1G6gO9kQ!0LrO<<GqOOQ[<<Gq<<GqO@iQ`O<<GqO&<oQ`O7+,UO&<tQ`O7+,VO%[QlO7+,UO%[QlO7+,VOOQ[7+)T7+)TO&<yQ`O7+)TO&=OQlO7+)TO&=VQ`O7+)TOOQ[<<Lw<<LwOOQ[<<Ly<<LyOOQ[-E=O-E=OOOQ[1G3x1G3xO&=[Q`O,5>_OOQ[,5>a,5>aO&=aQ`O1G4OO9ZQ`O7+&dO!(yQlO7+&dOOQO7+%]7+%]O&=fQ?MtO1G6XO>wQ`O7+%]OOQ!0Lf<<I_<<I_OOQ!0Lf<<Ix<<IxO>wQ`O<<IxOOQO<<Iq<<IqO$?{Q!0MxO<<IqO%[QlO<<IqOOQO<<Ib<<IbO!BYQ!0LrO<<IbO&=pQ!0LrO<<IqO&={Q!0MxO<= [O&>]Q`O<= ZOOQO7+*]7+*]O9ZQ`O7+*]OOQ[ANAjANAjO&>eQ!fOANAjO!&iQMhOANAjO#'cQ`OANAjO4UQ!fOANAjO&>lQ`OANAjO%[QlOANAjO&>tQ!0MzO7+'yO&AVQ!0MzO,5?_O&CbQ!0MzO,5?aO&EmQ!0MzO7+'{O&HOQ!fO1G4jO&HYQ?MtO7+&_O&J^Q?MvO,5=WO&LeQ?MvO,5=YO&LuQ?MvO,5=WO&MVQ?MvO,5=YO&MgQ?MvO,59sO' mQ?MvO,5<jO'#pQ?MvO,5<lO'&UQ?MvO,5<zO''zQ?MtO7+'jO'(XQ?MtO7+'lO'(fQ`O,5<[OOQO7+'_7+'_OOQ!0Lh7+*b7+*bO'(kQMjO<<K|OOQO1G4u1G4uO'(rQ`O1G4uO'(}Q`O1G4uO')]Q`O7++zO')]Q`O7++zO!&iQMhO1G4wO')eQ!dO1G4wO')oQ`O7++{O')wQ`O7+(UO'*SQ!dO7+(UOOQ!0Lb7+(S7+(SOOQ!0Lb7+(T7+(TO!BeQpO7+(SOCfQ`O7+(SO'*^Q`O7+(UO!&iQMhO7+(UO$)iQ`O7+(TO'*cQ`O7+(UOCfQ`O7+(TO'*kQMjO<<NuOOQ!0Lh7+${7+${O!+rQMhO<<NuO'*uQ!dO,5?dOOQO-E<v-E<vO'+PQ!0MvO7+(XO!&iQMhO7+(XOOQ[AN=gAN=gO9aQ`O1G5UOOQO1G5U1G5UO'+aQ`O1G5UO'+fQ`O7+,TO'+fQ`O7+,TO9kQ!0LrOANBVO@iQ`OANBVOOQ[ANBVANBVOOQ[ANArANArOOQ[ANAsANAsO'+nQ`O,5?fOOQO-E<x-E<xO'+yQ?MtO1G6fOOQO,5?h,5?hOOQO-E<z-E<zOOQ[1G3`1G3`O',TQ`O,5=OOOQ[<<Le<<LeO!&iQMhO<<LeO&;rQ`O<<LeO',YQ`O<<LeO%[QlO<<LeOOQ[<<Lg<<LgO9kQ!0LrO<<LgO$#yQ`O<<LgO9UQ`O<<LgO',bQpO1G5TO',mQ`O7+,ROOQ[AN=]AN=]O9kQ!0LrOAN=]OOQ[<= p<= pOOQ[<= q<= qO',uQ`O<= pO',zQ`O<= qOOQ[<<Lo<<LoO'-PQ`O<<LoO'-UQlO<<LoOOQ[1G3y1G3yO>wQ`O7+)jO'-]Q`O<<JOO'-hQ?MtO<<JOOOQO<<Hw<<HwOOQ!0LfAN?dAN?dOOQOAN?]AN?]O$?{Q!0MxOAN?]OOQOAN>|AN>|O%[QlOAN?]OOQO<<Mw<<MwOOQ[G27UG27UO!&iQMhOG27UO#'cQ`OG27UO'-rQ!fOG27UO4UQ!fOG27UO'-yQ`OG27UO'.RQ?MtO<<JeO'.`Q?MvO1G2_O'0UQ?MvO,5?_O'2XQ?MvO,5?aO'4[Q?MvO1G2rO'6_Q?MvO1G2tO'8bQ?MtO<<KWO'8oQ?MtO<<IyOOQO1G1v1G1vO!+rQMhOANAhOOQO7+*a7+*aO'8|Q`O7+*aO'9XQ`O<= fO'9aQ!dO7+*cOOQ!0Lb<<Kp<<KpO$)iQ`O<<KpOCfQ`O<<KpO'9kQ`O<<KpO!&iQMhO<<KpOOQ!0Lb<<Kn<<KnO!BeQpO<<KnO'9vQ!dO<<KpOOQ!0Lb<<Ko<<KoO':QQ`O<<KpO!&iQMhO<<KpO$)iQ`O<<KoO':VQMjOANDaO':aQ!0MvO<<KsOOQO7+*p7+*pO9aQ`O7+*pO':qQ`O<= oOOQ[G27qG27qO9kQ!0LrOG27qO!(yQlO1G5QO':yQ`O7+,QO';RQ`O1G2jO&;rQ`OANBPOOQ[ANBPANBPO!&iQMhOANBPO';WQ`OANBPOOQ[ANBRANBRO9kQ!0LrOANBRO$#yQ`OANBROOQO'#H^'#H^OOQO7+*o7+*oOOQ[G22wG22wOOQ[ANE[ANE[OOQ[ANE]ANE]OOQ[ANBZANBZO';`Q`OANBZOOQ[<<MU<<MUO!(yQlOAN?jOOQOG24wG24wO$?{Q!0MxOG24wO#'cQ`OLD,pOOQ[LD,pLD,pO!&iQMhOLD,pO';eQ!fOLD,pO';lQ?MvO7+'yO'=bQ?MvO,5?_O'?eQ?MvO,5?aO'AhQ?MvO7+'{O'C^QMjOG27SOOQO<<M{<<M{OOQ!0LbANA[ANA[O$)iQ`OANA[OCfQ`OANA[O'CnQ!dOANA[OOQ!0LbANAYANAYO'CuQ`OANA[O!&iQMhOANA[O'DQQ!dOANA[OOQ!0LbANAZANAZOOQO<<N[<<N[OOQ[LD-]LD-]O'D[Q?MtO7+*lOOQO'#Ge'#GeOOQ[G27kG27kO&;rQ`OG27kO!&iQMhOG27kOOQ[G27mG27mO9kQ!0LrOG27mOOQ[G27uG27uO'DfQ?MtOG25UOOQOLD*cLD*cOOQ[!$(![!$(![O#'cQ`O!$(![O!&iQMhO!$(![O'DpQ!0MzOG27SOOQ!0LbG26vG26vO$)iQ`OG26vO'GRQ`OG26vOCfQ`OG26vO'G^Q!dOG26vO!&iQMhOG26vOOQ[LD-VLD-VO&;rQ`OLD-VOOQ[LD-XLD-XOOQ[!)9Ev!)9EvO#'cQ`O!)9EvOOQ!0LbLD,bLD,bO$)iQ`OLD,bOCfQ`OLD,bO'GeQ`OLD,bO'GpQ!dOLD,bOOQ[!$(!q!$(!qOOQ[!.K;b!.K;bO'GwQ?MvOG27SOOQ!0Lb!$( |!$( |O$)iQ`O!$( |OCfQ`O!$( |O'ImQ`O!$( |OOQ!0Lb!)9Eh!)9EhO$)iQ`O!)9EhOCfQ`O!)9EhOOQ!0Lb!.K;S!.K;SO$)iQ`O!.K;SOOQ!0Lb!4/0n!4/0nO!(yQlO'#DxO1PQ`O'#EVO'IxQ!fO'#JpO'JPQ!L^O'#DtO'JWQlO'#D|O'J_Q!fO'#CiO'LuQ!fO'#CiO!(yQlO'#EOO'MVQlO,5;XO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO'#InO( YQ`O,5<hO!(yQlO,5;cO( bQMhO,5;cO(!{QMhO,5;cO!(yQlO,5;vO!&iQMhO'#GlO( bQMhO'#GlO!&iQMhO'#GnO( bQMhO'#GnO1SQ`O'#DXO1SQ`O'#DXO!&iQMhO'#GOO( bQMhO'#GOO!&iQMhO'#GQO( bQMhO'#GQO!&iQMhO'#G`O( bQMhO'#G`O!(yQlO,5:hO(#SQpO'#D]O(#^QpO'#JtO!(yQlO,5@mO'MVQlO1G0sO(#hQ?MtO'#CiO!(yQlO1G2OO!&iQMhO'#IsO( bQMhO'#IsO!&iQMhO'#IuO( bQMhO'#IuO(#rQ!dO'#CrO!&iQMhO,5<sO( bQMhO,5<sO'MVQlO1G2QO!(yQlO7+&yO!&iQMhO1G2_O( bQMhO1G2_O!&iQMhO'#IsO( bQMhO'#IsO!&iQMhO'#IuO( bQMhO'#IuO!&iQMhO1G2aO( bQMhO1G2aO'MVQlO7+'lO'MVQlO7+&_O!&iQMhOANAhO( bQMhOANAhO($VQ`O'#EmO($[Q`O'#EmO($dQ`O'#F[O($iQ`O'#EwO($nQ`O'#KRO($yQ`O'#KPO(%UQ`O,5;XO(%ZQMjO,5<dO(%bQ`O'#GXO(%gQ`O'#GXO(%lQ`O,5<fO(%tQ`O,5;XO(%|Q?MtO1G1_O(&TQ`O,5<sO(&YQ`O,5<sO(&_Q`O,5<uO(&dQ`O,5<uO(&iQ`O1G2QO(&nQ`O1G0sO(&sQMjO<<K|O(&zQMjO<<K|O7eQMhO'#F{O9UQ`O'#FzOAdQ`O'#ElO!(yQlO,5;sO!3^Q`O'#GXO!3^Q`O'#GXO!3^Q`O'#GZO!3^Q`O'#GZO!+rQMhO7+(bO!+rQMhO7+(bO%-ZQ!dO1G2vO%-ZQ!dO1G2vO!&iQMhO,5=[O!&iQMhO,5=[",stateData:"((P~O'zOS'{OSTOS'|RQ~OPYOQYOSfOY!VOaqOdzOeyOj!POnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]XO!guO!jZO!mYO!nYO!oYO!qvO!swO!vxO!z]O$V|O$miO%g}O%i!QO%k!OO%l!OO%m!OO%p!RO%r!SO%u!TO%v!TO%x!UO&U!WO&[!XO&^!YO&`!ZO&b![O&e!]O&k!^O&q!_O&s!`O&u!aO&w!bO&y!cO(RSO(TTO(WUO(_VO(m[O~OWtO~P`OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(R!dO(TTO(WUO(_VO(m[O~Oa!wOq!nO!Q!oO!`!yO!a!vO!b!vO!z;wO#R!pO#S!pO#T!xO#U!pO#V!pO#Y!zO#Z!zO(S!lO(TTO(WUO(c!mO(m!sO~O'|!{O~OP]XR]X[]Xa]Xp]X!O]X!Q]X!Z]X!j]X!n]X#P]X#Q]X#^]X#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X'x]X(_]X(p]X(w]X(x]X~O!e%QX~P(qO_!}O(T#PO(U!}O(V#PO~O_#QO(V#PO(W#PO(X#QO~Ov#SO!S#TO(`#TO(a#VO~OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(R;{O(TTO(WUO(_VO(m[O~O!Y#ZO!Z#WO!W(fP!W(tP~P+}O![#cO~P`OPYOQYOSfOd!jOe!iOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(TTO(WUO(_VO(m[O~On#mO!Y#iO!z]O#g#lO#h#iO(R;|O!i(qP~P.iO!j#oO(R#nO~O!v#sO!z]O%g#tO~O#i#uO~O!e#vO#i#uO~OP$[OR#zO[$cOp$aO!O#yO!Q#{O!Z$_O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO#y$WO#z$XO(_VO(p$YO(w#|O(x#}O~Oa(dX'x(dX'u(dX!i(dX!W(dX!](dX%h(dX!e(dX~P1qO#Q$dO#^$eO$P$eOP(eXR(eX[(eXp(eX!O(eX!Q(eX!Z(eX!j(eX!n(eX#P(eX#l(eX#m(eX#n(eX#o(eX#p(eX#q(eX#r(eX#s(eX#t(eX#u(eX#w(eX#y(eX#z(eX(_(eX(p(eX(w(eX(x(eX!](eX%h(eX~Oa(eX'x(eX'u(eX!W(eX!i(eXt(eX!e(eX~P4UO#^$eO~O$[$hO$^$gO$e$mO~OSfO!]$nO$h$oO$j$qO~Oh%VOj%cOn%WOp%XOq$tOr$tOx%YOz%ZO|%[O!Q${O!]$|O!g%aO!j$xO#h%bO$V%_O$s%]O$u%^O$x%`O(R$sO(TTO(WUO(_$uO(w$}O(x%POg([P~O!j%dO~O!Q%gO!]%hO(R%fO~O!e%lO~Oa%mO'x%mO~O!O%qO~P%[O(S!lO~P%[O%m%uO~P%[Oh%VO!j%dO(R%fO(S!lO~Oe%|O!j%dO(R%fO~O#t$RO~O!O&RO!]&OO!j&QO%i&UO(R%fO(S!lO(TTO(WUO`)UP~O!v#sO~O%r&WO!Q)QX!])QX(R)QX~O(R&XO~Oj!PO!s&^O%i!QO%k!OO%l!OO%m!OO%p!RO%r!SO%u!TO%v!TO~Od&cOe&bO!v&`O%g&aO%z&_O~P<POd&fOeyOj!PO!]&eO!s&^O!vxO!z]O%g}O%k!OO%l!OO%m!OO%p!RO%r!SO%u!TO%v!TO%x!UO~Ob&iO#^&lO%i&gO(S!lO~P=UO!j&mO!s&qO~O!j#oO~O!]XO~Oa%mO'v&yO'x%mO~Oa%mO'v&|O'x%mO~Oa%mO'v'OO'x%mO~O'u]X!W]Xt]X!i]X&Y]X!]]X%h]X!e]X~P(qO!`']O!a'UO!b'UO(S!lO(TTO(WUO~Oq'SO!Q'RO!Y'VO(c'QO![(gP![(vP~P@]Ol'`O!]'^O(R%fO~Oe'eO!j%dO(R%fO~O!O&RO!j&QO~Oq!nO!Q!oO!z;wO#R!pO#S!pO#U!pO#V!pO(S!lO(TTO(WUO(c!mO(m!sO~O!`'kO!a'jO!b'jO#T!pO#Y'lO#Z'lO~PAwOa%mOh%VO!e#vO!j%dO'x%mO(p'nO~O!n'rO#^'pO~PCVOq!nO!Q!oO(TTO(WUO(c!mO(m!sO~O!]XOq(kX!Q(kX!`(kX!a(kX!b(kX!z(kX#R(kX#S(kX#T(kX#U(kX#V(kX#Y(kX#Z(kX(S(kX(T(kX(W(kX(c(kX(m(kX~O!a'jO!b'jO(S!lO~PCuO'}'vO(O'vO(P'xO~O_!}O(T'zO(U!}O(V'zO~O_#QO(V'zO(W'zO(X#QO~Ot'|O~P%[Ov#SO!S#TO(`#TO(a(PO~O!Y(RO!W'UX!W'[X!Z'UX!Z'[X~P+}O!Z(TO!W(fX~OP$[OR#zO[$cOp$aO!O#yO!Q#{O!Z(TO!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO#y$WO#z$XO(_VO(p$YO(w#|O(x#}O~O!W(fX~PGpO!W(YO~O!W(sX!Z(sX!e(sX!i(sX(p(sX~O#^(sX#i#bX![(sX~PIsO#^(ZO!W(uX!Z(uX~O!Z([O!W(tX~O!W(_O~O#^$eO~PIsO![(`O~P`OR#zO!O#yO!Q#{O!j#xO(_VOP!la[!lap!la!Z!la!n!la#P!la#l!la#m!la#n!la#o!la#p!la#q!la#r!la#s!la#t!la#u!la#w!la#y!la#z!la(p!la(w!la(x!la~Oa!la'x!la'u!la!W!la!i!lat!la!]!la%h!la!e!la~PKZO!i(aO~O!e#vO#^(bO(p'nO!Z(rXa(rX'x(rX~O!i(rX~PMvO!Q%gO!]%hO!z]O#g(gO#h(fO(R%fO~O!Z(hO!i(qX~O!i(jO~O!Q%gO!]%hO#h(fO(R%fO~OP(eXR(eX[(eXp(eX!O(eX!Q(eX!Z(eX!j(eX!n(eX#P(eX#l(eX#m(eX#n(eX#o(eX#p(eX#q(eX#r(eX#s(eX#t(eX#u(eX#w(eX#y(eX#z(eX(_(eX(p(eX(w(eX(x(eX~O!e#vO!i(eX~P! dOR(lO!O(kO!j#xO#Q$dO!z!ya!Q!ya~O!v!ya%g!ya!]!ya#g!ya#h!ya(R!ya~P!#eO!v(pO~OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]XO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(R!dO(TTO(WUO(_VO(m[O~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<eO!Q${O!]$|O!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(R(tO(TTO(WUO(_$uO(w$}O(x%PO~O#i(vO~O!Y(xO!i(iP~P%[O(c(zO(m[O~O!Q(|O!j#xO(c(zO(m[O~OP;vOQ;vOSfOd=rOe!iOnkOp;vOqkOrkOxkOz;vO|;vO!QWO!UkO!VkO!]!eO!g;yO!jZO!m;vO!n;vO!o;vO!q;zO!s;}O!v!hO$V!kO$m=pO(R)ZO(TTO(WUO(_VO(m[O~O!Z$_Oa$pa'x$pa'u$pa!i$pa!W$pa!]$pa%h$pa!e$pa~Oj)bO~P!&iOh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|%[O!Q${O!]$|O!g%aO!j$xO#h%bO$V%_O$s%]O$u%^O$x%`O(R(tO(TTO(WUO(_$uO(w$}O(x%PO~Og(nP~P!+rO!O)gO!e)fO!]$]X$Y$]X$[$]X$^$]X$e$]X~O!e)fO!](yX$Y(yX$[(yX$^(yX$e(yX~O!O)gO~P!-{O!O)gO!](yX$Y(yX$[(yX$^(yX$e(yX~O!])iO$Y)mO$[)hO$^)hO$e)nO~O!Y)qO~P!(yO$[$hO$^$gO$e)uO~Ol$yX!O$yX#Q$yX'w$yX(w$yX(x$yX~OgkXg$yXlkX!ZkX#^kX~P!/qOv)wO(`)xO(a)zO~Ol*TO!O)|O'w)}O(w$}O(x%PO~Og){O~P!0uOg*UO~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<eO!Q*WO!]*XO!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(TTO(WUO(_$uO(w$}O(x%PO~O!Y*[O(R*VO!i(|P~P!1dO#i*^O~O!j*_O~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<eO!Q${O!]$|O!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(R*aO(TTO(WUO(_$uO(w$}O(x%PO~O!Y*dO!W(}P~P!3cOp*pOq!nO!Q*fO!`*nO!a*hO!b*hO!j*_O#Y*oO%_*jO(S!lO(TTO(WUO(c!mO~O![*mO~P!5WO#Q$dOl(^X!O(^X'w(^X(w(^X(x(^X!Z(^X#^(^X~Og(^X#}(^X~P!6YOl*uO#^*tOg(]X!Z(]X~O!Z*vOg([X~Oj%cO(R&XOg([P~Oq*yO~O!j+OO~O(R(tO~On+TO!Q%gO!Y#iO!]%hO!z]O#g#lO#h#iO(R%fO!i(qP~O!e#vO#i+UO~O!Q%gO!Y+WO!Z([O!]%hO(R%fO!W(tP~Oq'YO!Q+YO!Y+XO(TTO(WUO(c(zO~O![(vP~P!9]O!Z+ZOa)RX'x)RX~OP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO#y$WO#z$XO(_VO(p$YO(w#|O(x#}O~Oa!ha!Z!ha'x!ha'u!ha!W!ha!i!hat!ha!]!ha%h!ha!e!ha~P!:TOR#zO!O#yO!Q#{O!j#xO(_VOP!pa[!pap!pa!Z!pa!n!pa#P!pa#l!pa#m!pa#n!pa#o!pa#p!pa#q!pa#r!pa#s!pa#t!pa#u!pa#w!pa#y!pa#z!pa(p!pa(w!pa(x!pa~Oa!pa'x!pa'u!pa!W!pa!i!pat!pa!]!pa%h!pa!e!pa~P!<kOR#zO!O#yO!Q#{O!j#xO(_VOP!ra[!rap!ra!Z!ra!n!ra#P!ra#l!ra#m!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#w!ra#y!ra#z!ra(p!ra(w!ra(x!ra~Oa!ra'x!ra'u!ra!W!ra!i!rat!ra!]!ra%h!ra!e!ra~P!?ROh%VOl+dO!]'^O%h+cO~O!e+fOa(ZX!](ZX'x(ZX!Z(ZX~Oa%mO!]XO'x%mO~Oh%VO!j%dO~Oh%VO!j%dO(R%fO~O!e#vO#i(vO~Ob+qO%i+rO(R+nO(TTO(WUO![)VP~O!Z+sO`)UX~O[+wO~O`+xO~O!]&OO(R%fO(S!lO`)UP~Oh%VO#^+}O~Oh%VOl,QO!]$|O~O!],SO~O!O,UO!]XO~O%m%uO~O!v,ZO~Oe,`O~Ob,aO(R#nO(TTO(WUO![)TP~Oe%|O~O%i!QO(R&XO~P=UO[,fO`,eO~OPYOQYOSfOdzOeyOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!guO!jZO!mYO!nYO!oYO!qvO!vxO!z]O$miO%g}O(TTO(WUO(_VO(m[O~O!]!eO!s!gO$V!kO(R!dO~P!FRO`,eOa%mO'x%mO~OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!v!hO$V!kO$miO(R!dO(TTO(WUO(_VO(m[O~Oa,kOj!OO!swO%k!OO%l!OO%m!OO~P!HkO!j&mO~O&[,qO~O!],sO~O&m,uO&o,vOP&jaQ&jaS&jaY&jaa&jad&jae&jaj&jan&jap&jaq&jar&jax&jaz&ja|&ja!Q&ja!U&ja!V&ja!]&ja!g&ja!j&ja!m&ja!n&ja!o&ja!q&ja!s&ja!v&ja!z&ja$V&ja$m&ja%g&ja%i&ja%k&ja%l&ja%m&ja%p&ja%r&ja%u&ja%v&ja%x&ja&U&ja&[&ja&^&ja&`&ja&b&ja&e&ja&k&ja&q&ja&s&ja&u&ja&w&ja&y&ja'u&ja(R&ja(T&ja(W&ja(_&ja(m&ja![&ja&c&jab&ja&h&ja~O(R,{O~Oh!cX!Z!PX![!PX!e!PX!e!cX!j!cX#^!PX~O!Z!cX![!cX~P# qO!e-QO#^-POh(hX!Z#fX![#fX!e(hX!j(hX~O!Z(hX![(hX~P#!dOh%VO!e-SO!j%dO!Z!_X![!_X~Oq!nO!Q!oO(TTO(WUO(c!mO~OP;vOQ;vOSfOd=rOe!iOnkOp;vOqkOrkOxkOz;vO|;vO!QWO!UkO!VkO!]!eO!g;yO!jZO!m;vO!n;vO!o;vO!q;zO!s;}O!v!hO$V!kO$m=pO(TTO(WUO(_VO(m[O~O(R<rO~P##yO!Z-WO![(gX~O![-YO~O!e-QO#^-PO!Z#fX![#fX~O!Z-ZO![(vX~O![-]O~O!a-^O!b-^O(S!lO~P##hO![-aO~P'_Ol-dO!]'^O~O!W-iO~Oq!ya!`!ya!a!ya!b!ya#R!ya#S!ya#T!ya#U!ya#V!ya#Y!ya#Z!ya(S!ya(T!ya(W!ya(c!ya(m!ya~P!#eO!n-nO#^-lO~PCVO!a-pO!b-pO(S!lO~PCuOa%mO#^-lO'x%mO~Oa%mO!e#vO#^-lO'x%mO~Oa%mO!e#vO!n-nO#^-lO'x%mO(p'nO~O'}'vO(O'vO(P-uO~Ot-vO~O!W'Ua!Z'Ua~P!:TO!Y-zO!W'UX!Z'UX~P%[O!Z(TO!W(fa~O!W(fa~PGpO!Z([O!W(ta~O!Q%gO!Y.OO!]%hO(R%fO!W'[X!Z'[X~O#^.QO!Z(ra!i(raa(ra'x(ra~O!e#vO~P#,PO!Z(hO!i(qa~O!Q%gO!]%hO#h.UO(R%fO~On.ZO!Q%gO!Y.WO!]%hO!z]O#g.YO#h.WO(R%fO!Z'_X!i'_X~OR._O!j#xO~Oh%VOl.bO!]'^O%h.aO~Oa#ai!Z#ai'x#ai'u#ai!W#ai!i#ait#ai!]#ai%h#ai!e#ai~P!:TOl=|O!O)|O'w)}O(w$}O(x%PO~O#i#]aa#]a#^#]a'x#]a!Z#]a!i#]a!]#]a!W#]a~P#.{O#i(^XP(^XR(^X[(^Xa(^Xp(^X!Q(^X!j(^X!n(^X#P(^X#l(^X#m(^X#n(^X#o(^X#p(^X#q(^X#r(^X#s(^X#t(^X#u(^X#w(^X#y(^X#z(^X'x(^X(_(^X(p(^X!i(^X!W(^X'u(^Xt(^X!](^X%h(^X!e(^X~P!6YO!Z.oO!i(iX~P!:TO!i.rO~O!W.tO~OP$[OR#zO!O#yO!Q#{O!j#xO!n$[O(_VO[#kia#kip#ki!Z#ki#P#ki#m#ki#n#ki#o#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki'x#ki(p#ki(w#ki(x#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#l#ki~P#2kO#l$OO~P#2kOP$[OR#zOp$aO!O#yO!Q#{O!j#xO!n$[O#l$OO#m$PO#n$PO#o$PO(_VO[#kia#ki!Z#ki#P#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki'x#ki(p#ki(w#ki(x#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#p#ki~P#5YO#p$QO~P#5YOP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO(_VOa#ki!Z#ki#w#ki#y#ki#z#ki'x#ki(p#ki(w#ki(x#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#u#ki~P#7wOP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO(_VO(x#}Oa#ki!Z#ki#y#ki#z#ki'x#ki(p#ki(w#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#w$UO~P#:_O#w#ki~P#:_O#u$SO~P#7wOP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO(_VO(w#|O(x#}Oa#ki!Z#ki#z#ki'x#ki(p#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#y#ki~P#=TO#y$WO~P#=TOP]XR]X[]Xp]X!O]X!Q]X!j]X!n]X#P]X#Q]X#^]X#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X(_]X(p]X(w]X(x]X!Z]X![]X~O#}]X~P#?rOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO#u<TO#w<VO#y<XO#z<YO(_VO(p$YO(w#|O(x#}O~O#}.vO~P#BPO#Q$dO#^<`O$P<`O#}(eX![(eX~P! dOa'ba!Z'ba'x'ba'u'ba!i'ba!W'bat'ba!]'ba%h'ba!e'ba~P!:TO[#kia#kip#ki!Z#ki#P#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki'x#ki(p#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~OP$[OR#zO!O#yO!Q#{O!j#xO!n$[O#l$OO#m$PO#n$PO#o$PO(_VO(w#ki(x#ki~P#EROl=|O!O)|O'w)}O(w$}O(x%POP#kiR#ki!Q#ki!j#ki!n#ki#l#ki#m#ki#n#ki#o#ki(_#ki~P#ERO!Z.zOg(nX~P!0uOg.|O~Oa$Oi!Z$Oi'x$Oi'u$Oi!W$Oi!i$Oit$Oi!]$Oi%h$Oi!e$Oi~P!:TO$[.}O$^.}O~O$[/OO$^/OO~O!e)fO#^/PO!]$bX$Y$bX$[$bX$^$bX$e$bX~O!Y/QO~O!])iO$Y/SO$[)hO$^)hO$e/TO~O!Z<ZO![(dX~P#BPO![/UO~O!e)fO$e(yX~O$e/WO~Ot/XO~P!&iOv)wO(`)xO(a/[O~O!Q/_O~O(w$}Ol%`a!O%`a'w%`a(x%`a!Z%`a#^%`a~Og%`a#}%`a~P#LTO(x%POl%ba!O%ba'w%ba(w%ba!Z%ba#^%ba~Og%ba#}%ba~P#LvO!ZfX!efX!ifX!i$yX(pfX~P!/qO!Y/hO!Z([O(R/gO!W(tP!W(}P~P!1dOp*pO!`*nO!a*hO!b*hO!j*_O#Y*oO%_*jO(S!lO(TTO(WUO~Oq<oO!Q/iO!Y+XO![*mO(c<nO![(vP~P#NaO!i/jO~P#.{O!Z/kO!e#vO(p'nO!i(|X~O!i/pO~O!Q%gO!Y*[O!]%hO(R%fO!i(|P~O#i/rO~O!W$yX!Z$yX!e%QX~P!/qO!Z/sO!W(}X~P#.{O!e/uO~O!W/wO~OnkO(R/xO~P.iOh%VOp/}O!e#vO!j%dO(p'nO~O!e+fO~Oa%mO!Z0RO'x%mO~O![0TO~P!5WO!a0UO!b0UO(S!lO~P##hOq!nO!Q0VO(TTO(WUO(c!mO~O#Y0XO~Og%`a!Z%`a#^%`a#}%`a~P!0uOg%ba!Z%ba#^%ba#}%ba~P!0uOj%cO(R&XOg'kX!Z'kX~O!Z*vOg([a~Og0bO~OR0cO!O0cO!Q0dO#Q$dOl{a'w{a(w{a(x{a!Z{a#^{a~Og{a#}{a~P$&dO!O)|O'w)}Ol$ra(w$ra(x$ra!Z$ra#^$ra~Og$ra#}$ra~P$'`O!O)|O'w)}Ol$ta(w$ta(x$ta!Z$ta#^$ta~Og$ta#}$ta~P$(RO#i0gO~Og%Sa!Z%Sa#^%Sa#}%Sa~P!0uOl0iO#^0hOg(]a!Z(]a~O!e#vO~O#i0lO~O!Z+ZOa)Ra'x)Ra~OR#zO!O#yO!Q#{O!j#xO(_VOP!pi[!pip!pi!Z!pi!n!pi#P!pi#l!pi#m!pi#n!pi#o!pi#p!pi#q!pi#r!pi#s!pi#t!pi#u!pi#w!pi#y!pi#z!pi(p!pi(w!pi(x!pi~Oa!pi'x!pi'u!pi!W!pi!i!pit!pi!]!pi%h!pi!e!pi~P$*OOh%VOp%XOq$tOr$tOx%YOz%ZO|<eO!Q${O!]$|O!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(TTO(WUO(_$uO(w$}O(x%PO~On0vO%[0wO(R0tO~P$,fO!e+fOa(Za!](Za'x(Za!Z(Za~O#i0|O~O[]X!ZfX![fX~O!Z0}O![)VX~O![1PO~O[1QO~Ob1SO(R+nO(TTO(WUO~O!]&OO(R%fO`'sX!Z'sX~O!Z+sO`)Ua~O!i1VO~P!:TO[1YO~O`1ZO~O#^1^O~Ol1aO!]$|O~O(c(zO![)SP~Oh%VOl1jO!]1gO%h1iO~O[1tO!Z1rO![)TX~O![1uO~O`1wOa%mO'x%mO~O(R#nO(TTO(WUO~O#Q$dO#^$eO$P$eOP(eXR(eX[(eXp(eX!O(eX!Q(eX!Z(eX!j(eX!n(eX#P(eX#l(eX#m(eX#n(eX#o(eX#p(eX#q(eX#r(eX#s(eX#u(eX#w(eX#y(eX#z(eX(_(eX(p(eX(w(eX(x(eX~O#t1zO&Y1{Oa(eX~P$2PO#^$eO#t1zO&Y1{O~Oa1}O~P%[Oa2PO~O&c2SOP&aiQ&aiS&aiY&aia&aid&aie&aij&ain&aip&aiq&air&aix&aiz&ai|&ai!Q&ai!U&ai!V&ai!]&ai!g&ai!j&ai!m&ai!n&ai!o&ai!q&ai!s&ai!v&ai!z&ai$V&ai$m&ai%g&ai%i&ai%k&ai%l&ai%m&ai%p&ai%r&ai%u&ai%v&ai%x&ai&U&ai&[&ai&^&ai&`&ai&b&ai&e&ai&k&ai&q&ai&s&ai&u&ai&w&ai&y&ai'u&ai(R&ai(T&ai(W&ai(_&ai(m&ai![&aib&ai&h&ai~Ob2YO![2WO&h2XO~P`O!]XO!j2[O~O&o,vOP&jiQ&jiS&jiY&jia&jid&jie&jij&jin&jip&jiq&jir&jix&jiz&ji|&ji!Q&ji!U&ji!V&ji!]&ji!g&ji!j&ji!m&ji!n&ji!o&ji!q&ji!s&ji!v&ji!z&ji$V&ji$m&ji%g&ji%i&ji%k&ji%l&ji%m&ji%p&ji%r&ji%u&ji%v&ji%x&ji&U&ji&[&ji&^&ji&`&ji&b&ji&e&ji&k&ji&q&ji&s&ji&u&ji&w&ji&y&ji'u&ji(R&ji(T&ji(W&ji(_&ji(m&ji![&ji&c&jib&ji&h&ji~O!W2bO~O!Z!_a![!_a~P#BPOq!nO!Q!oO!Y2hO(c!mO!Z'VX!['VX~P@]O!Z-WO![(ga~O!Z']X![']X~P!9]O!Z-ZO![(va~O![2oO~P'_Oa%mO#^2xO'x%mO~Oa%mO!e#vO#^2xO'x%mO~Oa%mO!e#vO!n2|O#^2xO'x%mO(p'nO~Oa%mO'x%mO~P!:TO!Z$_Ot$pa~O!W'Ui!Z'Ui~P!:TO!Z(TO!W(fi~O!Z([O!W(ti~O!W(ui!Z(ui~P!:TO!Z(ri!i(ria(ri'x(ri~P!:TO#^3OO!Z(ri!i(ria(ri'x(ri~O!Z(hO!i(qi~O!Q%gO!]%hO!z]O#g3TO#h3SO(R%fO~O!Q%gO!]%hO#h3SO(R%fO~Ol3[O!]'^O%h3ZO~Oh%VOl3[O!]'^O%h3ZO~O#i%`aP%`aR%`a[%`aa%`ap%`a!Q%`a!j%`a!n%`a#P%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#t%`a#u%`a#w%`a#y%`a#z%`a'x%`a(_%`a(p%`a!i%`a!W%`a'u%`at%`a!]%`a%h%`a!e%`a~P#LTO#i%baP%baR%ba[%baa%bap%ba!Q%ba!j%ba!n%ba#P%ba#l%ba#m%ba#n%ba#o%ba#p%ba#q%ba#r%ba#s%ba#t%ba#u%ba#w%ba#y%ba#z%ba'x%ba(_%ba(p%ba!i%ba!W%ba'u%bat%ba!]%ba%h%ba!e%ba~P#LvO#i%`aP%`aR%`a[%`aa%`ap%`a!Q%`a!Z%`a!j%`a!n%`a#P%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#t%`a#u%`a#w%`a#y%`a#z%`a'x%`a(_%`a(p%`a!i%`a!W%`a'u%`a#^%`at%`a!]%`a%h%`a!e%`a~P#.{O#i%baP%baR%ba[%baa%bap%ba!Q%ba!Z%ba!j%ba!n%ba#P%ba#l%ba#m%ba#n%ba#o%ba#p%ba#q%ba#r%ba#s%ba#t%ba#u%ba#w%ba#y%ba#z%ba'x%ba(_%ba(p%ba!i%ba!W%ba'u%ba#^%bat%ba!]%ba%h%ba!e%ba~P#.{O#i{aP{a[{aa{ap{a!j{a!n{a#P{a#l{a#m{a#n{a#o{a#p{a#q{a#r{a#s{a#t{a#u{a#w{a#y{a#z{a'x{a(_{a(p{a!i{a!W{a'u{at{a!]{a%h{a!e{a~P$&dO#i$raP$raR$ra[$raa$rap$ra!Q$ra!j$ra!n$ra#P$ra#l$ra#m$ra#n$ra#o$ra#p$ra#q$ra#r$ra#s$ra#t$ra#u$ra#w$ra#y$ra#z$ra'x$ra(_$ra(p$ra!i$ra!W$ra'u$rat$ra!]$ra%h$ra!e$ra~P$'`O#i$taP$taR$ta[$taa$tap$ta!Q$ta!j$ta!n$ta#P$ta#l$ta#m$ta#n$ta#o$ta#p$ta#q$ta#r$ta#s$ta#t$ta#u$ta#w$ta#y$ta#z$ta'x$ta(_$ta(p$ta!i$ta!W$ta'u$tat$ta!]$ta%h$ta!e$ta~P$(RO#i%SaP%SaR%Sa[%Saa%Sap%Sa!Q%Sa!Z%Sa!j%Sa!n%Sa#P%Sa#l%Sa#m%Sa#n%Sa#o%Sa#p%Sa#q%Sa#r%Sa#s%Sa#t%Sa#u%Sa#w%Sa#y%Sa#z%Sa'x%Sa(_%Sa(p%Sa!i%Sa!W%Sa'u%Sa#^%Sat%Sa!]%Sa%h%Sa!e%Sa~P#.{Oa#aq!Z#aq'x#aq'u#aq!W#aq!i#aqt#aq!]#aq%h#aq!e#aq~P!:TO!Y3dO!Z'WX!i'WX~P%[O!Z.oO!i(ia~O!Z.oO!i(ia~P!:TO!W3gO~O#}!la![!la~PKZO#}!ha!Z!ha![!ha~P#BPO#}!pa![!pa~P!<kO#}!ra![!ra~P!?ROg'ZX!Z'ZX~P!+rO!Z.zOg(na~OSfO!]3{O$c3|O~O![4QO~Ot4RO~P#.{Oa$lq!Z$lq'x$lq'u$lq!W$lq!i$lqt$lq!]$lq%h$lq!e$lq~P!:TO!W4TO~P!&iO!Q4UO~O!O)|O'w)}O(x%POl'ga(w'ga!Z'ga#^'ga~Og'ga#}'ga~P%+uO!O)|O'w)}Ol'ia(w'ia(x'ia!Z'ia#^'ia~Og'ia#}'ia~P%,hO(p$YO~P#.{O!WfX!W$yX!ZfX!Z$yX!e%QX#^fX~P!/qO(R<xO~P!1dO!Q%gO!Y4XO!]%hO(R%fO!Z'cX!i'cX~O!Z/kO!i(|a~O!Z/kO!e#vO!i(|a~O!Z/kO!e#vO(p'nO!i(|a~Og${i!Z${i#^${i#}${i~P!0uO!Y4aO!W'eX!Z'eX~P!3cO!Z/sO!W(}a~O!Z/sO!W(}a~P#.{OP]XR]X[]Xp]X!O]X!Q]X!W]X!Z]X!j]X!n]X#P]X#Q]X#^]X#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X(_]X(p]X(w]X(x]X~O!e%XX#t%XX~P%0XO!e#vO#t4fO~Oh%VO!e#vO!j%dO~Oh%VOp4kO!j%dO(p'nO~Op4pO!e#vO(p'nO~Oq!nO!Q4qO(TTO(WUO(c!mO~O(w$}Ol%`i!O%`i'w%`i(x%`i!Z%`i#^%`i~Og%`i#}%`i~P%3xO(x%POl%bi!O%bi'w%bi(w%bi!Z%bi#^%bi~Og%bi#}%bi~P%4kOg(]i!Z(]i~P!0uO#^4wOg(]i!Z(]i~P!0uO!i4zO~Oa$nq!Z$nq'x$nq'u$nq!W$nq!i$nqt$nq!]$nq%h$nq!e$nq~P!:TO!W5QO~O!Z5RO!])OX~P#.{Oa]Xa$yX!]]X!]$yX%]]X'x]X'x$yX!Z]X!Z$yX~P!/qO%]5UOa%Za!]%Za'x%Za!Z%Za~OlmX!OmX'wmX(wmX(xmX~P%7nOn5VO(R#nO~Ob5]O%i5^O(R+nO(TTO(WUO!Z'rX!['rX~O!Z0}O![)Va~O[5bO~O`5cO~Oa%mO'x%mO~P#.{O!Z5kO#^5mO![)SX~O![5nO~Op5tOq!nO!Q*fO!`!yO!a!vO!b!vO!z;wO#R!pO#S!pO#T!pO#U!pO#V!pO#Y5sO#Z!zO(S!lO(TTO(WUO(c!mO(m!sO~O![5rO~P%:ROl5yO!]1gO%h5xO~Oh%VOl5yO!]1gO%h5xO~Ob6QO(R#nO(TTO(WUO!Z'qX!['qX~O!Z1rO![)Ta~O(TTO(WUO(c6SO~O`6WO~O#t6ZO&Y6[O~PMvO!i6]O~P%[Oa6_O~Oa6_O~P%[Ob2YO![6dO&h2XO~P`O!e6fO~O!e6hOh(hi!Z(hi![(hi!e(hi!j(hip(hi(p(hi~O!Z#fi![#fi~P#BPO#^6iO!Z#fi![#fi~O!Z!_i![!_i~P#BPOa%mO#^6rO'x%mO~Oa%mO!e#vO#^6rO'x%mO~O!Z(rq!i(rqa(rq'x(rq~P!:TO!Z(hO!i(qq~O!Q%gO!]%hO#h6yO(R%fO~O!]'^O%h6|O~Ol7QO!]'^O%h6|O~O#i'gaP'gaR'ga['gaa'gap'ga!Q'ga!j'ga!n'ga#P'ga#l'ga#m'ga#n'ga#o'ga#p'ga#q'ga#r'ga#s'ga#t'ga#u'ga#w'ga#y'ga#z'ga'x'ga(_'ga(p'ga!i'ga!W'ga'u'gat'ga!]'ga%h'ga!e'ga~P%+uO#i'iaP'iaR'ia['iaa'iap'ia!Q'ia!j'ia!n'ia#P'ia#l'ia#m'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#w'ia#y'ia#z'ia'x'ia(_'ia(p'ia!i'ia!W'ia'u'iat'ia!]'ia%h'ia!e'ia~P%,hO#i${iP${iR${i[${ia${ip${i!Q${i!Z${i!j${i!n${i#P${i#l${i#m${i#n${i#o${i#p${i#q${i#r${i#s${i#t${i#u${i#w${i#y${i#z${i'x${i(_${i(p${i!i${i!W${i'u${i#^${it${i!]${i%h${i!e${i~P#.{O#i%`iP%`iR%`i[%`ia%`ip%`i!Q%`i!j%`i!n%`i#P%`i#l%`i#m%`i#n%`i#o%`i#p%`i#q%`i#r%`i#s%`i#t%`i#u%`i#w%`i#y%`i#z%`i'x%`i(_%`i(p%`i!i%`i!W%`i'u%`it%`i!]%`i%h%`i!e%`i~P%3xO#i%biP%biR%bi[%bia%bip%bi!Q%bi!j%bi!n%bi#P%bi#l%bi#m%bi#n%bi#o%bi#p%bi#q%bi#r%bi#s%bi#t%bi#u%bi#w%bi#y%bi#z%bi'x%bi(_%bi(p%bi!i%bi!W%bi'u%bit%bi!]%bi%h%bi!e%bi~P%4kO!Z'Wa!i'Wa~P!:TO!Z.oO!i(ii~O#}#ai!Z#ai![#ai~P#BPOP$[OR#zO!O#yO!Q#{O!j#xO!n$[O(_VO[#kip#ki#P#ki#m#ki#n#ki#o#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki#}#ki(p#ki(w#ki(x#ki!Z#ki![#ki~O#l#ki~P%MQO#l<PO~P%MQOP$[OR#zOp<]O!O#yO!Q#{O!j#xO!n$[O#l<PO#m<QO#n<QO#o<QO(_VO[#ki#P#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki#}#ki(p#ki(w#ki(x#ki!Z#ki![#ki~O#p#ki~P& YO#p<RO~P& YOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO(_VO#w#ki#y#ki#z#ki#}#ki(p#ki(w#ki(x#ki!Z#ki![#ki~O#u#ki~P&#bOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO#u<TO(_VO(x#}O#y#ki#z#ki#}#ki(p#ki(w#ki!Z#ki![#ki~O#w<VO~P&%cO#w#ki~P&%cO#u<TO~P&#bOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO#u<TO#w<VO(_VO(w#|O(x#}O#z#ki#}#ki(p#ki!Z#ki![#ki~O#y#ki~P&'rO#y<XO~P&'rOa#{y!Z#{y'x#{y'u#{y!W#{y!i#{yt#{y!]#{y%h#{y!e#{y~P!:TO[#kip#ki#P#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki#}#ki(p#ki!Z#ki![#ki~OP$[OR#zO!O#yO!Q#{O!j#xO!n$[O#l<PO#m<QO#n<QO#o<QO(_VO(w#ki(x#ki~P&*nOl=}O!O)|O'w)}O(w$}O(x%POP#kiR#ki!Q#ki!j#ki!n#ki#l#ki#m#ki#n#ki#o#ki(_#ki~P&*nO#Q$dOP(^XR(^X[(^Xl(^Xp(^X!O(^X!Q(^X!j(^X!n(^X#P(^X#l(^X#m(^X#n(^X#o(^X#p(^X#q(^X#r(^X#s(^X#t(^X#u(^X#w(^X#y(^X#z(^X#}(^X'w(^X(_(^X(p(^X(w(^X(x(^X!Z(^X![(^X~O#}$Oi!Z$Oi![$Oi~P#BPO#}!pi![!pi~P$*OOg'Za!Z'Za~P!0uO![7dO~O!Z'ba!['ba~P#BPO!W7eO~P#.{O!e#vO(p'nO!Z'ca!i'ca~O!Z/kO!i(|i~O!Z/kO!e#vO!i(|i~Og${q!Z${q#^${q#}${q~P!0uO!W'ea!Z'ea~P#.{O!e7lO~O!Z/sO!W(}i~P#.{O!Z/sO!W(}i~O!W7oO~Oh%VOp7tO!j%dO(p'nO~O!e#vO#t7vO~Op7yO!e#vO(p'nO~O!O)|O'w)}O(x%POl'ha(w'ha!Z'ha#^'ha~Og'ha#}'ha~P&3oO!O)|O'w)}Ol'ja(w'ja(x'ja!Z'ja#^'ja~Og'ja#}'ja~P&4bO!W7{O~Og$}q!Z$}q#^$}q#}$}q~P!0uOg(]q!Z(]q~P!0uO#^7|Og(]q!Z(]q~P!0uOa$ny!Z$ny'x$ny'u$ny!W$ny!i$nyt$ny!]$ny%h$ny!e$ny~P!:TO!e6hO~O!Z5RO!])Oa~O!]'^OP$SaR$Sa[$Sap$Sa!O$Sa!Q$Sa!Z$Sa!j$Sa!n$Sa#P$Sa#l$Sa#m$Sa#n$Sa#o$Sa#p$Sa#q$Sa#r$Sa#s$Sa#t$Sa#u$Sa#w$Sa#y$Sa#z$Sa(_$Sa(p$Sa(w$Sa(x$Sa~O%h6|O~P&7SO%]8QOa%Zi!]%Zi'x%Zi!Z%Zi~Oa#ay!Z#ay'x#ay'u#ay!W#ay!i#ayt#ay!]#ay%h#ay!e#ay~P!:TO[8SO~Ob8UO(R+nO(TTO(WUO~O!Z0}O![)Vi~O`8YO~O(c(zO!Z'nX!['nX~O!Z5kO![)Sa~O![8cO~P%:RO(m!sO~P$$oO#Y8dO~O!]1gO~O!]1gO%h8fO~Ol8iO!]1gO%h8fO~O[8nO!Z'qa!['qa~O!Z1rO![)Ti~O!i8rO~O!i8sO~O!i8vO~O!i8vO~P%[Oa8xO~O!e8yO~O!i8zO~O!Z(ui![(ui~P#BPOa%mO#^9SO'x%mO~O!Z(ry!i(rya(ry'x(ry~P!:TO!Z(hO!i(qy~O%h9VO~P&7SO!]'^O%h9VO~O#i${qP${qR${q[${qa${qp${q!Q${q!Z${q!j${q!n${q#P${q#l${q#m${q#n${q#o${q#p${q#q${q#r${q#s${q#t${q#u${q#w${q#y${q#z${q'x${q(_${q(p${q!i${q!W${q'u${q#^${qt${q!]${q%h${q!e${q~P#.{O#i'haP'haR'ha['haa'hap'ha!Q'ha!j'ha!n'ha#P'ha#l'ha#m'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#w'ha#y'ha#z'ha'x'ha(_'ha(p'ha!i'ha!W'ha'u'hat'ha!]'ha%h'ha!e'ha~P&3oO#i'jaP'jaR'ja['jaa'jap'ja!Q'ja!j'ja!n'ja#P'ja#l'ja#m'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#w'ja#y'ja#z'ja'x'ja(_'ja(p'ja!i'ja!W'ja'u'jat'ja!]'ja%h'ja!e'ja~P&4bO#i$}qP$}qR$}q[$}qa$}qp$}q!Q$}q!Z$}q!j$}q!n$}q#P$}q#l$}q#m$}q#n$}q#o$}q#p$}q#q$}q#r$}q#s$}q#t$}q#u$}q#w$}q#y$}q#z$}q'x$}q(_$}q(p$}q!i$}q!W$}q'u$}q#^$}qt$}q!]$}q%h$}q!e$}q~P#.{O!Z'Wi!i'Wi~P!:TO#}#aq!Z#aq![#aq~P#BPO(w$}OP%`aR%`a[%`ap%`a!Q%`a!j%`a!n%`a#P%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#t%`a#u%`a#w%`a#y%`a#z%`a#}%`a(_%`a(p%`a!Z%`a![%`a~Ol%`a!O%`a'w%`a(x%`a~P&HgO(x%POP%baR%ba[%bap%ba!Q%ba!j%ba!n%ba#P%ba#l%ba#m%ba#n%ba#o%ba#p%ba#q%ba#r%ba#s%ba#t%ba#u%ba#w%ba#y%ba#z%ba#}%ba(_%ba(p%ba!Z%ba![%ba~Ol%ba!O%ba'w%ba(w%ba~P&JnOl=}O!O)|O'w)}O(x%PO~P&HgOl=}O!O)|O'w)}O(w$}O~P&JnOR0cO!O0cO!Q0dO#Q$dOP{a[{al{ap{a!j{a!n{a#P{a#l{a#m{a#n{a#o{a#p{a#q{a#r{a#s{a#t{a#u{a#w{a#y{a#z{a#}{a'w{a(_{a(p{a(w{a(x{a!Z{a![{a~O!O)|O'w)}OP$raR$ra[$ral$rap$ra!Q$ra!j$ra!n$ra#P$ra#l$ra#m$ra#n$ra#o$ra#p$ra#q$ra#r$ra#s$ra#t$ra#u$ra#w$ra#y$ra#z$ra#}$ra(_$ra(p$ra(w$ra(x$ra!Z$ra![$ra~O!O)|O'w)}OP$taR$ta[$tal$tap$ta!Q$ta!j$ta!n$ta#P$ta#l$ta#m$ta#n$ta#o$ta#p$ta#q$ta#r$ta#s$ta#t$ta#u$ta#w$ta#y$ta#z$ta#}$ta(_$ta(p$ta(w$ta(x$ta!Z$ta![$ta~Ol=}O!O)|O'w)}O(w$}O(x%PO~OP%SaR%Sa[%Sap%Sa!Q%Sa!j%Sa!n%Sa#P%Sa#l%Sa#m%Sa#n%Sa#o%Sa#p%Sa#q%Sa#r%Sa#s%Sa#t%Sa#u%Sa#w%Sa#y%Sa#z%Sa#}%Sa(_%Sa(p%Sa!Z%Sa![%Sa~P'%sO#}$lq!Z$lq![$lq~P#BPO#}$nq!Z$nq![$nq~P#BPO![9dO~O#}9eO~P!0uO!e#vO!Z'ci!i'ci~O!e#vO(p'nO!Z'ci!i'ci~O!Z/kO!i(|q~O!W'ei!Z'ei~P#.{O!Z/sO!W(}q~Op9lO!e#vO(p'nO~O[9nO!W9mO~P#.{O!W9mO~O!e#vO#t9tO~Og(]y!Z(]y~P!0uO!Z'la!]'la~P#.{Oa%Zq!]%Zq'x%Zq!Z%Zq~P#.{O[9yO~O!Z0}O![)Vq~O#^9}O!Z'na!['na~O!Z5kO![)Si~P#BPO!Q:PO~O!]1gO%h:SO~O(TTO(WUO(c:XO~O!Z1rO![)Tq~O!i:[O~O!i:]O~O!i:^O~O!i:^O~P%[O#^:aO!Z#fy![#fy~O!Z#fy![#fy~P#BPO%h:fO~P&7SO!]'^O%h:fO~O#}#{y!Z#{y![#{y~P#BPOP${iR${i[${ip${i!Q${i!j${i!n${i#P${i#l${i#m${i#n${i#o${i#p${i#q${i#r${i#s${i#t${i#u${i#w${i#y${i#z${i#}${i(_${i(p${i!Z${i![${i~P'%sO!O)|O'w)}O(x%POP'gaR'ga['gal'gap'ga!Q'ga!j'ga!n'ga#P'ga#l'ga#m'ga#n'ga#o'ga#p'ga#q'ga#r'ga#s'ga#t'ga#u'ga#w'ga#y'ga#z'ga#}'ga(_'ga(p'ga(w'ga!Z'ga!['ga~O!O)|O'w)}OP'iaR'ia['ial'iap'ia!Q'ia!j'ia!n'ia#P'ia#l'ia#m'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#w'ia#y'ia#z'ia#}'ia(_'ia(p'ia(w'ia(x'ia!Z'ia!['ia~O(w$}OP%`iR%`i[%`il%`ip%`i!O%`i!Q%`i!j%`i!n%`i#P%`i#l%`i#m%`i#n%`i#o%`i#p%`i#q%`i#r%`i#s%`i#t%`i#u%`i#w%`i#y%`i#z%`i#}%`i'w%`i(_%`i(p%`i(x%`i!Z%`i![%`i~O(x%POP%biR%bi[%bil%bip%bi!O%bi!Q%bi!j%bi!n%bi#P%bi#l%bi#m%bi#n%bi#o%bi#p%bi#q%bi#r%bi#s%bi#t%bi#u%bi#w%bi#y%bi#z%bi#}%bi'w%bi(_%bi(p%bi(w%bi!Z%bi![%bi~O#}$ny!Z$ny![$ny~P#BPO#}#ay!Z#ay![#ay~P#BPO!e#vO!Z'cq!i'cq~O!Z/kO!i(|y~O!W'eq!Z'eq~P#.{Op:pO!e#vO(p'nO~O[:tO!W:sO~P#.{O!W:sO~Og(]!R!Z(]!R~P!0uOa%Zy!]%Zy'x%Zy!Z%Zy~P#.{O!Z0}O![)Vy~O!Z5kO![)Sq~O(R:zO~O!]1gO%h:}O~O!i;QO~O%h;VO~P&7SOP${qR${q[${qp${q!Q${q!j${q!n${q#P${q#l${q#m${q#n${q#o${q#p${q#q${q#r${q#s${q#t${q#u${q#w${q#y${q#z${q#}${q(_${q(p${q!Z${q![${q~P'%sO!O)|O'w)}O(x%POP'haR'ha['hal'hap'ha!Q'ha!j'ha!n'ha#P'ha#l'ha#m'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#w'ha#y'ha#z'ha#}'ha(_'ha(p'ha(w'ha!Z'ha!['ha~O!O)|O'w)}OP'jaR'ja['jal'jap'ja!Q'ja!j'ja!n'ja#P'ja#l'ja#m'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#w'ja#y'ja#z'ja#}'ja(_'ja(p'ja(w'ja(x'ja!Z'ja!['ja~OP$}qR$}q[$}qp$}q!Q$}q!j$}q!n$}q#P$}q#l$}q#m$}q#n$}q#o$}q#p$}q#q$}q#r$}q#s$}q#t$}q#u$}q#w$}q#y$}q#z$}q#}$}q(_$}q(p$}q!Z$}q![$}q~P'%sOg%d!Z!Z%d!Z#^%d!Z#}%d!Z~P!0uO!W;ZO~P#.{Op;[O!e#vO(p'nO~O[;^O!W;ZO~P#.{O!Z'nq!['nq~P#BPO!Z#f!Z![#f!Z~P#BPO#i%d!ZP%d!ZR%d!Z[%d!Za%d!Zp%d!Z!Q%d!Z!Z%d!Z!j%d!Z!n%d!Z#P%d!Z#l%d!Z#m%d!Z#n%d!Z#o%d!Z#p%d!Z#q%d!Z#r%d!Z#s%d!Z#t%d!Z#u%d!Z#w%d!Z#y%d!Z#z%d!Z'x%d!Z(_%d!Z(p%d!Z!i%d!Z!W%d!Z'u%d!Z#^%d!Zt%d!Z!]%d!Z%h%d!Z!e%d!Z~P#.{Op;fO!e#vO(p'nO~O!W;gO~P#.{Op;nO!e#vO(p'nO~O!W;oO~P#.{OP%d!ZR%d!Z[%d!Zp%d!Z!Q%d!Z!j%d!Z!n%d!Z#P%d!Z#l%d!Z#m%d!Z#n%d!Z#o%d!Z#p%d!Z#q%d!Z#r%d!Z#s%d!Z#t%d!Z#u%d!Z#w%d!Z#y%d!Z#z%d!Z#}%d!Z(_%d!Z(p%d!Z!Z%d!Z![%d!Z~P'%sOp;rO!e#vO(p'nO~Ot(dX~P1qO!O%qO~P!(yO(S!lO~P!(yO!WfX!ZfX#^fX~P%0XOP]XR]X[]Xp]X!O]X!Q]X!Z]X!ZfX!j]X!n]X#P]X#Q]X#^]X#^fX#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X(_]X(p]X(w]X(x]X~O!efX!i]X!ifX(pfX~P'JlOP;vOQ;vOSfOd=rOe!iOnkOp;vOqkOrkOxkOz;vO|;vO!QWO!UkO!VkO!]XO!g;yO!jZO!m;vO!n;vO!o;vO!q;zO!s;}O!v!hO$V!kO$m=pO(R)ZO(TTO(WUO(_VO(m[O~O!Z<ZO![$pa~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<fO!Q${O!]$|O!g=wO!j$xO#h<lO$V%_O$s<hO$u<jO$x%`O(R(tO(TTO(WUO(_$uO(w$}O(x%PO~Oj)bO~P( bOp!cX(p!cX~P# qOp(hX(p(hX~P#!dO![]X![fX~P'JlO!WfX!W$yX!ZfX!Z$yX#^fX~P!/qO#i<OO~O!e#vO#i<OO~O#^<`O~O#t<SO~O#^<pO!Z(uX![(uX~O#^<`O!Z(sX![(sX~O#i<qO~Og<sO~P!0uO#i<yO~O#i<zO~O!e#vO#i<{O~O!e#vO#i<qO~O#}<|O~P#BPO#i<}O~O#i=OO~O#i=TO~O#i=UO~O#i=VO~O#i=WO~O#}=XO~P!0uO#}=YO~P!0uO#Q#R#S#U#V#Y#g#h#s$m$s$u$x%[%]%g%h%i%p%r%u%v%x%z~'|T#m!V'z(S#nq#l#op!O'{$['{(R$^(c~",goto:"$8f)ZPPPPPP)[PP)_P)pP+Q/VPPPP6aPP6wPP<oP@cP@yP@yPPP@yPCRP@yP@yP@yPCVPC[PCyPHsPPPHwPPPPHwKzPPPLQLrPHwPHwPP! QHwPPPHwPHwP!#XHwP!&o!'t!'}P!(q!(u!(q!,SPPPPPPP!,s!'tPP!-T!.uP!2RHwHw!2W!5d!:Q!:Q!>PPPP!>XHwPPPPPPPPPP!AhP!BuPPHw!DWPHwPHwHwHwHwHwPHw!EjP!HtP!KzP!LO!LY!L^!L^P!HqP!Lb!LbP# hP# lHwPHw# r#$wCV@yP@yP@y@yP#&U@y@y#(h@y#+`@y#-l@y@y#.[#0p#0p#0u#1O#0p#1ZPP#0pP@y#1s@y#5r@y@y6aPPP#9wPPP#:b#:bP#:bP#:x#:bPP#;OP#:uP#:u#;c#:u#;}#<T#<W)_#<Z)_P#<b#<b#<bP)_P)_P)_P)_PP)_P#<h#<kP#<k)_P#<oP#<rP)_P)_P)_P)_P)_P)_)_PP#<x#=O#=Z#=a#=g#=m#=s#>R#>X#>c#>i#>s#>y#?Z#?a#@R#@e#@k#@q#AP#Af#CZ#Ci#Cp#E[#Ej#G[#Gj#Gp#Gv#G|#HW#H^#Hd#Hn#IQ#IWPPPPPPPPPPP#I^PPPPPPP#JR#MY#Nr#Ny$ RPPP$&mP$&v$)o$0Y$0]$0`$1_$1b$1i$1qP$1w$1zP$2h$2l$3d$4r$4w$5_PP$5d$5j$5n$5q$5u$5y$6u$7^$7u$7y$7|$8P$8V$8Y$8^$8bR!|RoqOXst!Z#d%l&p&r&s&u,n,s2S2VY!vQ'^-`1g5qQ%svQ%{yQ&S|Q&h!VS'U!e-WQ'd!iS'j!r!yU*h$|*X*lQ+l%|Q+y&UQ,_&bQ-^']Q-h'eQ-p'kQ0U*nQ1q,`R<m;z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9SS#q];w!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU*{%[<e<fQ+q&OQ,a&eQ,h&mQ0r+dQ0u+fQ1S+rQ1y,fQ3W.bQ5V0wQ5]0}Q6Q1rQ7O3[Q8U5^R9Y7Q'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s!S!nQ!r!v!y!z$|'U']'^'j'k'l*h*l*n*o-W-^-`-p0U0X1g5q5s%[$ti#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q&V|Q'S!eS'Y%h-ZQ+q&OQ,a&eQ0f+OQ1S+rQ1X+xQ1x,eQ1y,fQ5]0}Q5f1ZQ6Q1rQ6T1tQ6U1wQ8U5^Q8X5cQ8q6WQ9|8YQ:Y8nR<o*XrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR,c&i&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=r=s[#]WZ#W#Z'V(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ%vxQ%zyS&P|&UQ&]!TQ'a!hQ'c!iQ(o#sS+k%{%|Q+o&OQ,Y&`Q,^&bS-g'd'eQ.d(pQ0{+lQ1R+rQ1T+sQ1W+wQ1l,ZS1p,_,`Q2t-hQ5[0}Q5`1QQ5e1YQ6P1qQ8T5^Q8W5bQ9x8SR:w9y!U$zi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y!^%xy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pQ+e%vQ,O&YQ,R&ZQ,]&bQ.c(oQ1k,YU1o,^,_,`Q3].dQ5z1lS6O1p1qQ8m6P#f=t#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o=u<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YW%Ti%V*v=pS&Y!Q&gQ&Z!RQ&[!SQ+S%cR+|&W%]%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}T)x$u)yV*{%[<e<fW'Y!e%h*X-ZS({#y#zQ+`%qQ+v&RS.](k(lQ1b,SQ4x0cR8^5k'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s$i$^c#Y#e%p%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.w.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ'W!eR2i-W!W!nQ!e!r!v!y!z$|'U']'^'j'k'l*X*h*l*n*o-W-^-`-p0U0X1g5q5sR1d,UnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&w!^Q't!xS(q#u<OQ+i%yQ,W&]Q,X&_Q-e'bQ-r'mS.m(v<qS0k+U<{Q0y+jQ1f,VQ2Z,uQ2],vQ2e-RQ2r-fQ2u-jS5P0l=VQ5W0zS5Z0|=WQ6j2gQ6n2sQ6s2zQ8R5XQ8}6lQ9O6oQ9R6tR:`8z$d$]c#Y#e%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gS(m#p'gQ(}#zS+_%p.wS.^(l(nR3U._'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS#q];wQ&r!XQ&s!YQ&u![Q&v!]R2R,qQ'_!hQ+b%vQ-c'aS.`(o+eQ2p-bW3Y.c.d0q0sQ6m2qW6z3V3X3]5TU9U6{6}7PU:e9W9X9ZS;T:d:gQ;b;UR;j;cU!wQ'^-`T5o1g5q!Q_OXZ`st!V!Z#d#h%d%l&g&i&p&r&s&u(h,n,s.V2S2V]!pQ!r'^-`1g5qT#q];w%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS({#y#zS.](k(l!s=^$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU$fd)],hS(n#p'gU*s%R(u3vU0e*z.i7]Q5T0rQ6{3WQ9X7OR:g9Ym!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sQ'r!uS(d#g1|S-n'i'uQ/n*ZQ/{*gQ2|-qQ4]/oQ4i/}Q4j0OQ4o0WQ7h4WS7s4k4mS7w4p4rQ9g7iQ9k7oQ9p7tQ9u7yS:o9l9mS;Y:p:sS;e;Z;[S;m;f;gS;q;n;oR;t;rQ#wbQ'q!uS(c#g1|S(e#m+TQ+V%eQ+g%wQ+m%}U-m'i'r'uQ.R(dQ/m*ZQ/|*gQ0P*iQ0x+hQ1m,[S2y-n-qQ3R.ZS4[/n/oQ4e/yS4h/{0WQ4l0QQ5|1nQ6u2|Q7g4WQ7k4]U7r4i4o4rQ7u4nQ8k5}S9f7h7iQ9j7oQ9r7wQ9s7xQ:V8lQ:m9gS:n9k9mQ:v9uQ;P:WS;X:o:sS;d;Y;ZS;l;e;gS;p;m;oQ;s;qQ;u;tQ=a=[Q=l=eR=m=fV!wQ'^-`%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS#wz!j!r=Z$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=a=r%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SQ%ej!^%wy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pS%}z!jQ+h%xQ,[&bW1n,],^,_,`U5}1o1p1qS8l6O6PQ:W8m!r=[$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ=e=qR=f=r%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SY#bWZ#W#Z(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ,i&m!p=]$Z$n)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=`'VU'Z!e%h*XR2k-Z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9S!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ,h&mQ0r+dQ3W.bQ7O3[R9Y7Q!b$Tc#Y%p(Q(W(r(w)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!P<U)[)o-U.w2c2f3h3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!f$Vc#Y%p(Q(W(r(w)U)V)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!T<W)[)o-U.w2c2f3h3n3o3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!^$Zc#Y%p(Q(W(r(w)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;xQ4V/fz=s)[)o-U.w2c2f3h3w4P6k7W7a7b8`8|9[9b9c:y;R=gQ=x=zR=y={'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS$oh$pR3|/P'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$kf$qQ$ifS)h$l)lR)t$qT$jf$qT)j$l)l'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$oh$pQ$rhR)s$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9S!s=q$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s#glOPXZst!Z!`!o#S#d#o#{$n%l&i&l&m&p&r&s&u&y'R'`(|)q*f+Y+d,k,n,s-d.b/Q/i0V0d1j1z1{1}2P2S2V2X3[3{4q5y6Z6[6_7Q8i8x!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}Q+P%`Q/^)|o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!U$yi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yQ*`$zU*i$|*X*lQ+Q%aQ0Q*j#f=c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n=d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YQ=h=tQ=i=uQ=j=vR=k=w!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YnoOXst!Z#d%l&p&r&s&u,n,s2S2VS*c${*WQ,|&|Q,}'OR4`/s%[%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q,P&ZQ1`,RQ5i1_R8]5jV*k$|*X*lU*k$|*X*lT5p1g5qS/y*f/iQ4n0VT7x4q:PQ+g%wQ0P*iQ0x+hQ1m,[Q5|1nQ8k5}Q:V8lR;P:W!U%Oi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yx*P$v)c*Q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=oS0Y*q0Z#f<a#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<b<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!d<t(s)a*Y*b.e.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={`<u3u7X7[7`9]:h:k;kS=P.g3aT=Q7Z9`!U%Qi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y|*R$v)c*S*q+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=oS0[*r0]#f<c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!h<v(s)a*Y*b.f.g.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={d<w3u7Y7Z7`9]9^:h:i:k;kS=R.h3bT=S7[9arnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ&d!UR,k&mrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR&d!UQ,T&[R1[+|snOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ1h,YS5w1k1lU8e5u5v5zS:R8g8hS:{:Q:TQ;_:|R;i;`Q&k!VR,d&gR6T1tR:Y8nS&P|&UR1T+sQ&p!WR,n&qR,t&vT2T,s2VR,x&wQ,w&wR2^,xQ'w!{R-t'wSsOtQ#dXT%os#dQ#OTR'y#OQ#RUR'{#RQ)y$uR/Z)yQ#UVR(O#UQ#XWU(U#X(V-{Q(V#YR-{(WQ-X'WR2j-XQ.p(wS3e.p3fR3f.qQ-`'^R2n-`Y!rQ'^-`1g5qR'h!rQ.{)cR3z.{U#_W%g*WU(]#_(^-|Q(^#`R-|(XQ-['ZR2l-[t`OXst!V!Z#d%l&g&i&p&r&s&u,n,s2S2VS#hZ%dU#r`#h.VR.V(hQ(i#jQ.S(eW.[(i.S3P6wQ3P.TR6w3QQ)l$lR/R)lQ$phR)r$pQ$`cU)_$`-w<[Q-w;xR<[)oQ/l*ZW4Y/l4Z7j9hU4Z/m/n/oS7j4[4]R9h7k$e*O$v(s)a)c*Y*b*q*r*|*}+R.g.h.j.k.l/Y/b/d/f/q/v0^0_0p1]3^3_3`3u3y4S4^4_4c4s4u4{4|4}5h7R7S7T7U7Z7[7^7_7`7f7m7p7z7}8P9]9^9_9i9q9v9w:h:i:j:k:l:q:u;W;];h;k=b=n=o=z={Q/t*bU4b/t4d7nQ4d/vR7n4cS*l$|*XR0S*lx*Q$v)c*q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=o!d.e(s)a*Y*b.g.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/c*Q.e7Xa7X3u7Z7[7`9]:h:k;kQ0Z*qQ3a.gU4t0Z3a9`R9`7Z|*S$v)c*q*r+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=o!h.f(s)a*Y*b.g.h.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/e*S.f7Ye7Y3u7Z7[7`9]9^:h:i:k;kQ0]*rQ3b.hU4v0]3b9aR9a7[Q*w%UR0a*wQ5S0pR8O5SQ+[%jR0o+[Q5l1bS8_5l:OR:O8`Q,V&]R1e,VQ5q1gR8b5qQ1s,aS6R1s8oR8o6TQ1O+oW5_1O5a8V9zQ5a1RQ8V5`R9z8WQ+t&PR1U+tQ2V,sR6c2VYrOXst#dQ&t!ZQ+^%lQ,m&pQ,o&rQ,p&sQ,r&uQ2Q,nS2T,s2VR6b2SQ%npQ&x!_Q&{!aQ&}!bQ'P!cQ'o!uQ+]%kQ+i%yQ+{&VQ,c&kQ,z&zW-k'i'q'r'uQ-r'mQ0R*kQ0y+jS1v,d,gQ2_,yQ2`,|Q2a,}Q2u-jW2w-m-n-q-sQ5W0zQ5d1XQ5g1]Q5{1mQ6V1xQ6a2RU6p2v2y2|Q6s2zQ8R5XQ8Z5fQ8[5hQ8a5pQ8j5|Q8p6US9P6q6uQ9R6tQ9{8XQ:U8kQ:Z8qQ:b9QQ:x9|Q;O:VQ;S:cR;a;PQ%yyQ'b!iQ'm!uU+j%z%{%|Q-R'TU-f'c'd'eS-j'i'sQ/z*gS0z+k+lQ2g-TS2s-g-hQ2z-oS4g/{0OQ5X0{Q6l2mQ6o2tQ6t2{U7q4i4j4mQ9o7sR:r9pS$wi=pR*x%VU%Ui%V=pR0`*vQ$viS(s#v+fS)a$b$cQ)c$dQ*Y$xS*b${*WQ*q%OQ*r%QQ*|%]Q*}%^Q+R%bQ.g<aQ.h<cQ.j<gQ.k<iQ.l<kQ/Y)wQ/b*PQ/d*RQ/f*TQ/q*^S/v*d/hQ0^*tQ0_*ul0p+c,Q.a1a1i3Z5x6|8f9V:S:f:};VQ1]+}Q3^<tQ3_<vQ3`<yS3u<^<_Q3y.zS4S/_4UQ4^/rQ4_/sQ4c/uQ4s0YQ4u0[Q4{0gQ4|0hQ4}0iQ5h1^Q7R<}Q7S=PQ7T=RQ7U=TQ7Z<bQ7[<dQ7^<hQ7_<jQ7`<lQ7f4VQ7m4aQ7p4fQ7z4wQ7}5RQ8P5UQ9]<zQ9^<uQ9_<wQ9i7lQ9q7vQ9v7|Q9w8QQ:h=OQ:i=QQ:j=SQ:k=UQ:l9eQ:q9nQ:u9tQ;W=XQ;]:tQ;h;^Q;k=YQ=b=pQ=n=xQ=o=yQ=z=|R={=}Q*z%[Q.i<eR7]<fnpOXst!Z#d%l&p&r&s&u,n,s2S2VQ!fPS#fZ#oQ&z!`W'f!o*f0V4qQ'}#SQ)O#{Q)p$nS,g&i&lQ,l&mQ,y&yS-O'R/iQ-b'`Q.s(|Q/V)qQ0m+YQ0s+dQ2O,kQ2q-dQ3X.bQ4O/QQ4y0dQ5v1jQ6X1zQ6Y1{Q6^1}Q6`2PQ6e2XQ7P3[Q7c3{Q8h5yQ8t6ZQ8u6[Q8w6_Q9Z7QQ:T8iR:_8x#[cOPXZst!Z!`!o#d#o#{%l&i&l&m&p&r&s&u&y'R'`(|*f+Y+d,k,n,s-d.b/i0V0d1j1z1{1}2P2S2V2X3[4q5y6Z6[6_7Q8i8xQ#YWQ#eYQ%puQ%rvS%tw!gS(Q#W(TQ(W#ZQ(r#uQ(w#xQ)P$OQ)Q$PQ)R$QQ)S$RQ)T$SQ)U$TQ)V$UQ)W$VQ)X$WQ)Y$XQ)[$ZQ)^$_Q)`$aQ)e$eW)o$n)q/Q3{Q+a%sQ+u&QS-U'V2hQ-s'pS-x(R-zQ-}(ZQ.P(bQ.n(vQ.q(xQ.u;vQ.w;yQ.x;zQ.y;}Q/]){Q0j+UQ2c-PQ2f-SQ2v-lQ2}.QQ3c.oQ3h<OQ3i<PQ3j<QQ3k<RQ3l<SQ3m<TQ3n<UQ3o<VQ3p<WQ3q<XQ3r<YQ3s.vQ3t<]Q3w<`Q3x<mQ4P<ZQ5O0lQ5Y0|Q6k<pQ6q2xQ6v3OQ7V3dQ7W<qQ7a<sQ7b<{Q8`5mQ8|6iQ9Q6rQ9[<|Q9b=VQ9c=WQ:c9SQ:y9}Q;R:aQ;x#SR=g=sR#[WR'X!el!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sS'T!e-WU*g$|*X*lS-T'U']S0O*h*nQ0W*oQ2m-^Q4m0UR4r0XR(y#xQ!fQT-_'^-`]!qQ!r'^-`1g5qQ#p]R'g;wR)d$dY!uQ'^-`1g5qQ'i!rS's!v!yS'u!z5sS-o'j'kQ-q'lR2{-pT#kZ%dS#jZ%dS%jm,jU(e#h#i#lS.T(f(gQ.X(hQ0n+ZQ3Q.UU3R.V.W.YS6x3S3TR9T6yd#^W#W#Z%g(R([*W+W.O/hr#gZm#h#i#l%d(f(g(h+Z.U.V.W.Y3S3T6yS*Z$x*_Q/o*[Q1|,jQ2d-QQ4W/kQ6g2[Q7i4XQ8{6hT=_'V+XV#aW%g*WU#`W%g*WS(S#W([U(X#Z+W/hS-V'V+XT-y(R.OV'[!e%h*XQ$lfR)v$qT)k$l)lR3}/PT*]$x*_T*e${*WQ0q+cQ1_,QQ3V.aQ5j1aQ5u1iQ6}3ZQ8g5xQ9W6|Q:Q8fQ:d9VQ:|:SQ;U:fQ;`:}R;c;VnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&j!VR,c&gtmOXst!U!V!Z#d%l&g&p&r&s&u,n,s2S2VR,j&mT%km,jR1c,SR,b&eQ&T|R+z&UR+p&OT&n!W&qT&o!W&qT2U,s2V",nodeNames:" ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:378,context:trackNewline,nodeProps:[["isolate",-8,5,6,14,35,37,49,51,53,""],["group",-26,9,17,19,66,206,210,214,215,217,220,223,233,235,241,243,245,247,250,256,262,264,266,268,270,272,273,"Statement",-34,13,14,30,33,34,40,49,52,53,55,60,68,70,74,78,80,82,83,108,109,118,119,135,138,140,141,142,143,144,146,147,166,168,170,"Expression",-23,29,31,35,39,41,43,172,174,176,177,179,180,181,183,184,185,187,188,189,200,202,204,205,"Type",-3,86,101,107,"ClassItem"],["openedBy",23,"<",36,"InterpolationStart",54,"[",58,"{",71,"(",159,"JSXStartCloseTag"],["closedBy",-2,24,167,">",38,"InterpolationEnd",48,"]",59,"}",72,")",164,"JSXEndTag"]],propSources:[jsHighlight],skippedNodes:[0,5,6,276],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$h&j(X!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(X!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$h&j(UpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(UpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$h&j(Up(X!b'z0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(V#S$h&j'{0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$h&j(Up(X!b'{0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$h&j!n),Q(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#u(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#u(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(T':f$h&j(X!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$h&j(X!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$h&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$c`$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$c``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$c`$h&j(X!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(X!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$c`(X!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$h&j(Up(X!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$h&j(Up(X!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$h&j(X!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$h&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(X!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$h&j(UpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(UpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Up(X!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$h&j(m%1l(Up(X!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$h&j(Up(X!b$[#t(R,2j(c$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$h&j(Up(X!b$[#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$h&j(Up(X!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$h&j$P(Ch(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(x+JY$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$h&j#y(Ch(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(W';W$h&j(UpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$h&j(UpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$h&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$c`$h&j(UpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(UpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$c`(UpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!j/.^$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!i!Lf$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$h&j(Up(X!b(S%&f#o(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$h&j(Up(X!b#l(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$h&j(Up(X!bp+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!Z+Jf$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$h&j(Up(X!b!O.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_!Y!L^$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$h&j(Up(X!b#m(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$h&j(Up(X!b!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$h&j(X!b!V7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$h&j!V7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$h&j!V7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!V7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!V7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$h&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$h&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$h&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$h&j(X!b!V7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(X!b!V7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(X!b!V7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(X!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$h&j(X!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$h&j(Up!V7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$h&j(Up!V7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Up!V7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Up!V7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(UpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$h&j(UpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$h&j(Up(X!b!V7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Up(X!b!V7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Up(X!b!V7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Up(X!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$h&j(Up(X!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$h&j(Up(X!b'|0/l!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$h&j(Up(X!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$h&j(X!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$h&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(X!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$h&j(UpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(UpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Up(X!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$h&j$P(Ch(Up(X!b!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Y#t$h&j(Up(X!b!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!e$b$h&j#})Lv(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#P-<U(Up(X!b$m7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$j&j(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#p(Ch(Up(X!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$P(Ch(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#q(Ch(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#^*!Y$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#i(Cl$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#q(Ch$e#|$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#q(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#p(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#p(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(p(Ct$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$h&j#z(Ch(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!z$Ip$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!Q0,v$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$h&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$h&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$h&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$h&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$h&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!W#)l$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#w(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$h&j(Up(X!b(_+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$h&j(Up(X!b(R,2j$^#t(c$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$h&j(Up(X!b$^#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!]#Hb(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(w+JY$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_![(CdtBr$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!o7`$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$h&j(Up(X!b'z0/l$[#t(R,2j(c$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$h&j(Up(X!b'{0/l$[#t(R,2j(c$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[noSemicolon,noSemicolonType,operatorToken,jsx,2,3,4,5,6,7,8,9,10,11,12,13,14,insertSemicolon,new LocalTokenGroup("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOv~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!S~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(a~~",141,338),new LocalTokenGroup("j~RQYZXz{^~^O(O~~aP!P!Qd~iO(P~~",25,321)],topRules:{Script:[0,7],SingleExpression:[1,274],SingleClassItem:[2,275]},dialects:{jsx:0,ts:15091},dynamicPrecedences:{78:1,80:1,92:1,168:1,198:1},specialized:[{term:325,get:e=>spec_identifier[e]||-1},{term:341,get:e=>spec_word[e]||-1},{term:93,get:e=>spec_LessThan[e]||-1}],tokenPrec:15116}),snippets=[snippetCompletion("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),snippetCompletion("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),snippetCompletion("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),snippetCompletion("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),snippetCompletion(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),snippetCompletion('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),snippetCompletion('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],typescriptSnippets=snippets.concat([snippetCompletion("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),snippetCompletion("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),snippetCompletion("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),cache=new NodeWeakMap,ScopeNodes=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function defID(e){return(n,r)=>{let g=n.node.getChild("VariableDefinition");return g&&r(g,e),!0}}const functionContext=["FunctionDeclaration"],gatherCompletions={FunctionDeclaration:defID("function"),ClassDeclaration:defID("class"),ClassExpression:()=>!0,EnumDeclaration:defID("constant"),TypeAliasDeclaration:defID("type"),NamespaceDeclaration:defID("namespace"),VariableDefinition(e,n){e.matchContext(functionContext)||n(e,"variable")},TypeDefinition(e,n){n(e,"type")},__proto__:null};function getScope(e,n){let r=cache.get(n);if(r)return r;let g=[],y=!0;function k($,V){let L=e.sliceString($.from,$.to);g.push({label:L,type:V})}return n.cursor(IterMode.IncludeAnonymous).iterate($=>{if(y)y=!1;else if($.name){let V=gatherCompletions[$.name];if(V&&V($,k)||ScopeNodes.has($.name))return!1}else if($.to-$.from>8192){for(let V of getScope(e,$.node))g.push(V);return!1}}),cache.set(n,g),g}const Identifier=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,dontComplete=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName",".","?."];function localCompletionSource(e){let n=syntaxTree(e.state).resolveInner(e.pos,-1);if(dontComplete.indexOf(n.name)>-1)return null;let r=n.name=="VariableName"||n.to-n.from<20&&Identifier.test(e.state.sliceDoc(n.from,n.to));if(!r&&!e.explicit)return null;let g=[];for(let y=n;y;y=y.parent)ScopeNodes.has(y.name)&&(g=g.concat(getScope(e.state.doc,y)));return{options:g,from:r?n.from:e.pos,validFor:Identifier}}const javascriptLanguage=LRLanguage.define({name:"javascript",parser:parser.configure({props:[indentNodeProp.add({IfStatement:continuedIndent({except:/^\s*({|else\b)/}),TryStatement:continuedIndent({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:flatIndent,SwitchBody:e=>{let n=e.textAfter,r=/^\s*\}/.test(n),g=/^\s*(case|default)\b/.test(n);return e.baseIndent+(r?0:g?1:2)*e.unit},Block:delimitedIndent({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":continuedIndent({except:/^{/}),JSXElement(e){let n=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(n?0:e.unit)},JSXEscape(e){let n=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(n?0:e.unit)},"JSXOpenTag JSXSelfClosingTag"(e){return e.column(e.node.from)+e.unit}}),foldNodeProp.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":foldInside,BlockComment(e){return{from:e.from+2,to:e.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),jsxSublanguage={test:e=>/^JSX/.test(e.name),facet:defineLanguageFacet({commentTokens:{block:{open:"{/*",close:"*/}"}}})},typescriptLanguage=javascriptLanguage.configure({dialect:"ts"},"typescript"),jsxLanguage=javascriptLanguage.configure({dialect:"jsx",props:[sublanguageProp.add(e=>e.isTop?[jsxSublanguage]:void 0)]}),tsxLanguage=javascriptLanguage.configure({dialect:"jsx ts",props:[sublanguageProp.add(e=>e.isTop?[jsxSublanguage]:void 0)]},"typescript");let kwCompletion=e=>({label:e,type:"keyword"});const keywords="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(kwCompletion),typescriptKeywords=keywords.concat(["declare","implements","private","protected","public"].map(kwCompletion));function javascript(e={}){let n=e.jsx?e.typescript?tsxLanguage:jsxLanguage:e.typescript?typescriptLanguage:javascriptLanguage,r=e.typescript?typescriptSnippets.concat(typescriptKeywords):snippets.concat(keywords);return new LanguageSupport(n,[javascriptLanguage.data.of({autocomplete:ifNotIn(dontComplete,completeFromList(r))}),javascriptLanguage.data.of({autocomplete:localCompletionSource}),e.jsx?autoCloseTags:[]])}function findOpenTag(e){for(;;){if(e.name=="JSXOpenTag"||e.name=="JSXSelfClosingTag"||e.name=="JSXFragmentTag")return e;if(e.name=="JSXEscape"||!e.parent)return null;e=e.parent}}function elementName(e,n,r=e.length){for(let g=n?.firstChild;g;g=g.nextSibling)if(g.name=="JSXIdentifier"||g.name=="JSXBuiltin"||g.name=="JSXNamespacedName"||g.name=="JSXMemberExpression")return e.sliceString(g.from,Math.min(g.to,r));return""}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),autoCloseTags=EditorView.inputHandler.of((e,n,r,g,y)=>{if((android?e.composing:e.compositionStarted)||e.state.readOnly||n!=r||g!=">"&&g!="/"||!javascriptLanguage.isActiveAt(e.state,n,-1))return!1;let k=y(),{state:$}=k,V=$.changeByRange(L=>{var z;let{head:j}=L,ae=syntaxTree($).resolveInner(j-1,-1),re;if(ae.name=="JSXStartTag"&&(ae=ae.parent),!($.doc.sliceString(j-1,j)!=g||ae.name=="JSXAttributeValue"&&ae.to>j)){if(g==">"&&ae.name=="JSXFragmentTag")return{range:L,changes:{from:j,insert:"</>"}};if(g=="/"&&ae.name=="JSXStartCloseTag"){let oe=ae.parent,ue=oe.parent;if(ue&&oe.from==j-2&&((re=elementName($.doc,ue.firstChild,j))||((z=ue.firstChild)===null||z===void 0?void 0:z.name)=="JSXFragmentTag")){let le=`${re}>`;return{range:EditorSelection.cursor(j+le.length,-1),changes:{from:j,insert:le}}}}else if(g==">"){let oe=findOpenTag(ae);if(oe&&oe.name=="JSXOpenTag"&&!/^\/?>|^<\//.test($.doc.sliceString(j,j+2))&&(re=elementName($.doc,oe,j)))return{range:L,changes:{from:j,insert:`</${re}>`}}}}return{range:L}});return V.changes.empty?!1:(e.dispatch([k,$.update(V,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),chalky="#e5c07b",coral="#e06c75",cyan="#56b6c2",invalid="#ffffff",ivory="#abb2bf",stone="#7d8799",malibu="#61afef",sage="#98c379",whiskey="#d19a66",violet="#c678dd",darkBackground="#21252b",highlightBackground="#2c313a",background="#282c34",tooltipBackground="#353a42",selection="#3E4451",cursor="#528bff",oneDarkTheme=EditorView.theme({"&":{color:ivory,backgroundColor:background},".cm-content":{caretColor:cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:cursor},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:selection},".cm-panels":{backgroundColor:darkBackground,color:ivory},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:background,color:stone,border:"none"},".cm-activeLineGutter":{backgroundColor:highlightBackground},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tooltipBackground,borderBottomColor:tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:highlightBackground,color:ivory}}},{dark:!0}),oneDarkHighlightStyle=HighlightStyle.define([{tag:tags.keyword,color:violet},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:coral},{tag:[tags.function(tags.variableName),tags.labelName],color:malibu},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:whiskey},{tag:[tags.definition(tags.name),tags.separator],color:ivory},{tag:[tags.typeName,tags.className,tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:chalky},{tag:[tags.operator,tags.operatorKeyword,tags.url,tags.escape,tags.regexp,tags.link,tags.special(tags.string)],color:cyan},{tag:[tags.meta,tags.comment],color:stone},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.link,color:stone,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:coral},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:whiskey},{tag:[tags.processingInstruction,tags.string,tags.inserted],color:sage},{tag:tags.invalid,color:invalid}]),oneDark=[oneDarkTheme,syntaxHighlighting(oneDarkHighlightStyle)];async function writeText(e,n){await invoke("plugin:clipboard-manager|write_text",{label:n?.label,text:e})}async function readText(){return await invoke("plugin:clipboard-manager|read_text")}const _withScopeId$1=e=>(pushScopeId("data-v-ce736aee"),e=e(),popScopeId(),e),_hoisted_1$3={class:"glyph-programming-editor"},_hoisted_2$3={class:"left-panel"},_hoisted_3$2={class:"constant-item"},_hoisted_4$2={class:"parameter-name"},_hoisted_5$2={key:0},_hoisted_6$2={key:2},_hoisted_7$2={class:"right-panel"},_hoisted_8$2={class:"codes-header"},_hoisted_9$2={class:"codes-title"},_hoisted_10$2=_withScopeId$1(()=>createBaseVNode("div",{id:"codes-container"},null,-1)),_sfc_main$4=defineComponent({__name:"CharacterProgrammingEditor",setup(e){const{t:n,tm:r}=useI18n(),g=ref([]),y=ref(""),k=ref({}),$=ref("global-constants");let V,L=null;onMounted(async()=>{if(window.__TAURI_INTERNALS__){const Ce=await getCurrentWindow().onCloseRequested(async Ne=>{try{V&&(V.toTextArea(),V=null,document.getElementById("codes-container").innerHTML=""),await emit("on-webview-close"),L&&L(),Ce&&Ce()}catch($e){console.error($e)}});L=await listen("init-data",Ne=>{const{__constants:$e,__script:xe,__isWeb:Ie}=Ne.payload;window.__constants=$e,window.__script=xe,window.__is_web=Ie,g.value=$e,y.value=xe,g.value?.map(qe=>{k.value[qe.uuid]=!1}),V=new EditorView({doc:y.value,extensions:[basicSetup,javascript(),oneDark,EditorView.updateListener.of(qe=>{y.value=qe.state.doc.toString()})],parent:document.getElementById("codes-container")});const ze=navigator.userAgent.includes("Mac");V.dom.addEventListener("keydown",async qe=>{if((ze?qe.metaKey:qe.ctrlKey)&&qe.key==="c"){const{from:Et,to:_n}=V.state.selection.main,Dt=V.state.doc.slice(Et,_n).toString();Dt&&await writeText(Dt),qe.preventDefault()}if((ze?qe.metaKey:qe.ctrlKey)&&qe.key==="v"){const Et=await readText();if(Et){const{from:_n}=V.state.selection.main,Dt=V.state.update({changes:{from:_n,insert:Et}});V.dispatch(Dt)}qe.preventDefault()}})}),await emit("on-webview-mounted")}else{const Ce=Ne=>{window.opener.postMessage("close-window",location.origin),window.removeEventListener("beforeunload",Ce)};window.addEventListener("beforeunload",Ce),g.value=window.opener.__constants,y.value=window.opener.__script,window.opener.__is_web,g.value.map(Ne=>{k.value[Ne.uuid]=!1}),V=new EditorView({doc:y.value,extensions:[basicSetup,javascript(),oneDark,EditorView.updateListener.of(Ne=>{y.value=Ne.state.doc.toString()})],parent:document.getElementById("codes-container")})}}),onUnmounted(()=>{const Ce=V.getWrapperElement();Ce.parentNode.removeChild(Ce),V=null});const z=(Ce,Ne)=>{k.value[Ce]=Ne},j=()=>{const Ce=genUUID();g.value.push({uuid:Ce,name:Ce.slice(0,5),value:0,type:ParameterType.Number,min:0,max:1e3})},ae=Ce=>{g.value.map((Ne,$e)=>{Ne.uuid===Ce&&g.value.splice($e,1)})};watch([g,y],()=>{oe()},{deep:!0});const re=[{value:ParameterType.Constant,key:"constant"},{value:ParameterType.Number,key:"number"},{value:ParameterType.RingController,key:"ring"}],oe=async()=>{window.__TAURI_INTERNALS__?await emit("sync-info",{__constants:g.value,__script:y.value}):(localStorage.setItem("constants",JSON.stringify(g.value)),localStorage.setItem("script",y.value),window.opener.postMessage("sync-info",location.origin))},ue=async()=>{window.__TAURI_INTERNALS__?await emit("execute-script"):window.opener.postMessage("execute-script",location.origin)},le=Ce=>{Ce.params.push({name:"",min:0,max:1e3,value:500})},de=Ce=>{let Ne=!1;g.value.map(($e,xe)=>{if($e.uuid===Ce&&xe!==g.value.length-1&&!Ne){const Ie=g.value.splice(xe,1);g.value.splice(xe+1,0,Ie[0]),Ne=!0}})},he=Ce=>{let Ne=!1;g.value.map(($e,xe)=>{if($e.uuid===Ce&&xe!==0&&!Ne){const Ie=g.value.splice(xe,1);g.value.splice(xe-1,0,Ie[0]),Ne=!0}})},_e=Ce=>{Ce.type===ParameterType.Number?Ce.value=0:Ce.type===ParameterType.Constant?Ce.value="":Ce.type===ParameterType.RingController&&(Ce.value={radius:{name:"",min:0,max:1e3,value:500},degree:{name:"",min:0,max:360,value:60},params:[]})};return(Ce,Ne)=>{const $e=resolveComponent("el-button"),xe=resolveComponent("el-input"),Ie=resolveComponent("el-icon"),ze=resolveComponent("el-option"),qe=resolveComponent("el-select"),Et=resolveComponent("el-input-number"),_n=resolveComponent("el-form-item"),Dt=resolveComponent("el-tab-pane"),Sn=resolveComponent("el-collapse-item"),hn=resolveComponent("el-collapse"),Vn=resolveComponent("el-tabs"),Mn=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$3,[createVNode(Vn,{modelValue:$.value,"onUpdate:modelValue":Ne[0]||(Ne[0]=$n=>$.value=$n),class:"tabs"},{default:withCtx(()=>[createVNode(Dt,{label:unref(r)("programming.global-constants"),name:"global-constants"},{default:withCtx(()=>[createVNode(Mn,null,{default:withCtx(()=>[createVNode($e,{class:"add-constant-button",onPointerdown:j},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.new-constant")),1)]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value,$n=>(openBlock(),createElementBlock("div",_hoisted_3$2,[createBaseVNode("div",_hoisted_4$2,[withDirectives(createBaseVNode("span",{class:"parameter-name-label"},toDisplayString$1($n.name),513),[[vShow,!k.value[$n.uuid]]]),withDirectives(createVNode(xe,{class:"parameter-name-input",modelValue:$n.name,"onUpdate:modelValue":Nn=>$n.name=Nn,onKeyup:withKeys(Nn=>z($n.uuid,!1),["enter","native"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"]),[[vShow,k.value[$n.uuid]]]),withDirectives(createVNode(Ie,{class:"edit-icon",onPointerdown:Nn=>z($n.uuid,!0)},{default:withCtx(()=>[createVNode(unref(edit_default))]),_:2},1032,["onPointerdown"]),[[vShow,!k.value[$n.uuid]]])]),createVNode(qe,{modelValue:$n.type,"onUpdate:modelValue":Nn=>$n.type=Nn,class:"parameter-type-select",placeholder:unref(r)("programming.type"),onChange:Nn=>_e($n)},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(re,Nn=>createVNode(ze,{key:Nn.key,label:unref(r)(`programming.${Nn.key}`),value:Nn.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"]),$n.type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_5$2,[createVNode(Et,{class:"parameter-value",modelValue:$n.value,"onUpdate:modelValue":Nn=>$n.value=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"]),createVNode(_n,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(Et,{class:"parameter-value",modelValue:$n.min,"onUpdate:modelValue":Nn=>$n.min=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(_n,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(Et,{class:"parameter-value",modelValue:$n.max,"onUpdate:modelValue":Nn=>$n.max=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])):$n.type===unref(ParameterType).Constant?(openBlock(),createBlock(qe,{key:1,modelValue:$n.value,"onUpdate:modelValue":Nn=>$n.value=Nn,class:"parameter-const-select",placeholder:unref(r)("programming.value")},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value,Nn=>(openBlock(),createBlock(ze,{key:Nn.uuid,label:Nn.name,value:Nn.uuid},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):$n.type===unref(ParameterType).RingController?(openBlock(),createElementBlock("div",_hoisted_6$2,[createVNode(Vn,{type:"border-card"},{default:withCtx(()=>[createVNode(Dt,{label:"radius"},{default:withCtx(()=>[createVNode(_n,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(xe,{class:"parameter-value",modelValue:$n.value.radius.name,"onUpdate:modelValue":Nn=>$n.value.radius.name=Nn},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(_n,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Et,{class:"parameter-value",modelValue:$n.value.radius.value,"onUpdate:modelValue":Nn=>$n.value.radius.value=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(_n,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(Et,{class:"parameter-value",modelValue:$n.value.radius.min,"onUpdate:modelValue":Nn=>$n.value.radius.min=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(_n,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(Et,{class:"parameter-value",modelValue:$n.value.radius.max,"onUpdate:modelValue":Nn=>$n.value.radius.max=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),createVNode(Dt,{label:"degree"},{default:withCtx(()=>[createVNode(_n,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(xe,{class:"parameter-value",modelValue:$n.value.degree.name,"onUpdate:modelValue":Nn=>$n.value.degree.name=Nn},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(_n,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Et,{class:"parameter-value",modelValue:$n.value.degree.value,"onUpdate:modelValue":Nn=>$n.value.degree.value=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(_n,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(Et,{class:"parameter-value",modelValue:$n.value.degree.min,"onUpdate:modelValue":Nn=>$n.value.degree.min=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(_n,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(Et,{class:"parameter-value",modelValue:$n.value.degree.max,"onUpdate:modelValue":Nn=>$n.value.degree.max=Nn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),createVNode(Dt,{label:"params"},{default:withCtx(()=>[createVNode($e,{class:"add-parameter-button",onPointerdown:Nn=>le($n.value)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.new-parameter")),1)]),_:2},1032,["onPointerdown"]),createVNode(hn,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList($n.value.params,Nn=>(openBlock(),createBlock(Sn,{title:Nn.name,name:"1"},{default:withCtx(()=>[createVNode(_n,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(xe,{class:"parameter-value",modelValue:Nn.name,"onUpdate:modelValue":kn=>Nn.name=kn},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(_n,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Et,{class:"parameter-value",modelValue:Nn.value,"onUpdate:modelValue":kn=>Nn.value=kn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(_n,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(Et,{class:"parameter-value",modelValue:Nn.min,"onUpdate:modelValue":kn=>Nn.min=kn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(_n,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(Et,{class:"parameter-value",modelValue:Nn.max,"onUpdate:modelValue":kn=>Nn.max=kn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024)])):createCommentVNode("",!0),createVNode(Ie,{class:"sort-down-btn",onPointerdown:Nn=>de($n.uuid)},{default:withCtx(()=>[createVNode(unref(sort_down_default))]),_:2},1032,["onPointerdown"]),createVNode(Ie,{class:"sort-up-btn",onPointerdown:Nn=>he($n.uuid)},{default:withCtx(()=>[createVNode(unref(sort_up_default))]),_:2},1032,["onPointerdown"]),createVNode(Ie,{class:"remove-btn",onPointerdown:Nn=>ae($n.uuid)},{default:withCtx(()=>[createVNode(unref(close_default))]),_:2},1032,["onPointerdown"])]))),256))]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])]),createBaseVNode("div",_hoisted_7$2,[createBaseVNode("div",_hoisted_8$2,[createBaseVNode("div",_hoisted_9$2,toDisplayString$1(unref(n)("programming.script")),1),createVNode($e,{class:"reset-btn"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.reset")),1)]),_:1}),createVNode($e,{class:"execute-btn",type:"primary",onPointerdown:Ne[1]||(Ne[1]=$n=>ue())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.execute")),1)]),_:1})]),_hoisted_10$2])])}}}),CharacterProgrammingEditor=_export_sfc(_sfc_main$4,[["__scopeId","data-v-ce736aee"]]),_withScopeId=e=>(pushScopeId("data-v-5e8f57b6"),e=e(),popScopeId(),e),_hoisted_1$2={class:"glyph-programming-editor"},_hoisted_2$2={class:"left-panel"},_hoisted_3$1={class:"constant-item"},_hoisted_4$1={class:"parameter-name"},_hoisted_5$1={key:0},_hoisted_6$1={key:2},_hoisted_7$1={class:"parameter-item"},_hoisted_8$1={class:"parameter-name"},_hoisted_9$1={key:0},_hoisted_10$1={key:2},_hoisted_11$1={class:"right-panel"},_hoisted_12$1={class:"codes-header"},_hoisted_13$1={class:"codes-title"},_hoisted_14$1=_withScopeId(()=>createBaseVNode("div",{id:"codes-container"},null,-1)),_sfc_main$3=defineComponent({__name:"GlyphProgrammingEditor",setup(e){const{t:n,tm:r}=useI18n(),g=ref([]),y=ref([]),k=ref(""),$=ref({}),V=ref("global-constants");let L=null;const z=[{value:ParameterType.Constant,key:"constant"},{value:ParameterType.Number,key:"number"},{value:ParameterType.RingController,key:"ring"}];let j=null;onMounted(async()=>{if(window.__TAURI_INTERNALS__){const ze=await getCurrentWindow().onCloseRequested(async qe=>{try{L&&(L.toTextArea(),L=null,document.getElementById("codes-container").innerHTML=""),await emit("on-webview-close"),j&&j(),ze&&ze()}catch(Et){console.error(Et)}});j=await listen("init-data",qe=>{const{__constants:Et,__parameters:_n,__script:Dt,__isWeb:Sn}=qe.payload;window.__constants=Et,window.__parameters=_n,window.__script=Dt,window.__is_web=Sn,g.value=Et,y.value=_n,k.value=Dt,g.value?.map(Vn=>{$.value[Vn.uuid]=!1}),y.value?.map(Vn=>{$.value[Vn.uuid]=!1}),L=new EditorView({doc:k.value,extensions:[basicSetup,javascript(),oneDark,EditorView.updateListener.of(Vn=>{k.value=Vn.state.doc.toString()})],parent:document.getElementById("codes-container")});const hn=navigator.userAgent.includes("Mac");L.dom.addEventListener("keydown",async Vn=>{if((hn?Vn.metaKey:Vn.ctrlKey)&&Vn.key==="c"){const{from:Mn,to:$n}=L.state.selection.main,Nn=L.state.doc.slice(Mn,$n).toString();Nn&&await writeText(Nn),Vn.preventDefault()}if((hn?Vn.metaKey:Vn.ctrlKey)&&Vn.key==="v"){const Mn=await readText();if(Mn){const{from:$n}=L.state.selection.main,Nn=L.state.update({changes:{from:$n,insert:Mn}});L.dispatch(Nn)}Vn.preventDefault()}})}),await emit("on-webview-mounted")}else{const ze=qe=>{window.opener.postMessage("close-window",location.origin),window.removeEventListener("beforeunload",ze)};window.addEventListener("beforeunload",ze),g.value=window.opener.__constants,y.value=window.opener.__parameters,k.value=window.opener.__script,window.opener.__is_web,g.value.map(qe=>{$.value[qe.uuid]=!1}),y.value.map(qe=>{$.value[qe.uuid]=!1}),L=new EditorView({doc:k.value,extensions:[basicSetup,javascript(),oneDark,EditorView.updateListener.of(qe=>{k.value=qe.state.doc.toString()})],parent:document.getElementById("codes-container")})}}),onUnmounted(()=>{const ze=L.getWrapperElement();ze.parentNode.removeChild(ze),L=null});const ae=(ze,qe)=>{$.value[ze]=qe},re=()=>{const ze=genUUID();g.value.push({uuid:ze,name:ze.slice(0,5),value:0,type:ParameterType.Number,min:0,max:1e3})},oe=()=>{const ze=genUUID();y.value.push({uuid:ze,name:ze.slice(0,5).replaceAll("-","_"),type:ParameterType.Number,value:0,min:0,max:1e3})},ue=ze=>{g.value.map((qe,Et)=>{qe.uuid===ze&&g.value.splice(Et,1)})},le=ze=>{y.value.map((qe,Et)=>{qe.uuid===ze&&y.value.splice(Et,1)})},de=ze=>{let qe=!1;y.value.map((Et,_n)=>{if(Et.uuid===ze&&_n!==y.value.length-1&&!qe){const Dt=y.value.splice(_n,1);y.value.splice(_n+1,0,Dt[0]),qe=!0}})},he=ze=>{let qe=!1;y.value.map((Et,_n)=>{if(Et.uuid===ze&&_n!==0&&!qe){const Dt=y.value.splice(_n,1);y.value.splice(_n-1,0,Dt[0]),qe=!0}})},_e=ze=>{let qe=!1;g.value.map((Et,_n)=>{if(Et.uuid===ze&&_n!==g.value.length-1&&!qe){const Dt=g.value.splice(_n,1);g.value.splice(_n+1,0,Dt[0]),qe=!0}})},Ce=ze=>{let qe=!1;g.value.map((Et,_n)=>{if(Et.uuid===ze&&_n!==0&&!qe){const Dt=g.value.splice(_n,1);g.value.splice(_n-1,0,Dt[0]),qe=!0}})};watch([g,y,k],()=>{Ne()},{deep:!0});const Ne=async()=>{window.__TAURI_INTERNALS__?await emit("sync-info",{__constants:g.value,__parameters:y.value,__script:k.value}):(localStorage.setItem("constants",JSON.stringify(g.value)),localStorage.setItem("parameters",JSON.stringify(y.value)),localStorage.setItem("script",k.value),window.opener.postMessage("sync-info",location.origin))},$e=async()=>{window.__TAURI_INTERNALS__?await emit("execute-script"):window.opener.postMessage("execute-script",location.origin)},xe=ze=>{ze.params.push({name:"",min:0,max:1e3,value:500})},Ie=ze=>{ze.type===ParameterType.Number?ze.value=0:ze.type===ParameterType.Constant?ze.value="":ze.type===ParameterType.RingController&&(ze.value={radius:{name:"",min:0,max:1e3,value:500},degree:{name:"",min:0,max:360,value:60},params:[]})};return(ze,qe)=>{const Et=resolveComponent("el-button"),_n=resolveComponent("el-input"),Dt=resolveComponent("el-icon"),Sn=resolveComponent("el-option"),hn=resolveComponent("el-select"),Vn=resolveComponent("el-input-number"),Mn=resolveComponent("el-form-item"),$n=resolveComponent("el-tab-pane"),Nn=resolveComponent("el-collapse-item"),kn=resolveComponent("el-collapse"),jn=resolveComponent("el-tabs"),Fn=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$2,[createVNode(jn,{modelValue:V.value,"onUpdate:modelValue":qe[0]||(qe[0]=Tn=>V.value=Tn),class:"tabs"},{default:withCtx(()=>[createVNode($n,{label:unref(r)("programming.global-constants"),name:"global-constants"},{default:withCtx(()=>[createVNode(Fn,null,{default:withCtx(()=>[createVNode(Et,{class:"add-constant-button",onPointerdown:re},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.new-constant")),1)]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value,Tn=>(openBlock(),createElementBlock("div",_hoisted_3$1,[createBaseVNode("div",_hoisted_4$1,[withDirectives(createBaseVNode("span",{class:"parameter-name-label"},toDisplayString$1(Tn.name),513),[[vShow,!$.value[Tn.uuid]]]),withDirectives(createVNode(_n,{class:"parameter-name-input",modelValue:Tn.name,"onUpdate:modelValue":Hn=>Tn.name=Hn,onKeyup:withKeys(Hn=>ae(Tn.uuid,!1),["enter","native"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"]),[[vShow,$.value[Tn.uuid]]]),withDirectives(createVNode(Dt,{class:"edit-icon",onPointerdown:Hn=>ae(Tn.uuid,!0)},{default:withCtx(()=>[createVNode(unref(edit_default))]),_:2},1032,["onPointerdown"]),[[vShow,!$.value[Tn.uuid]]])]),createVNode(hn,{modelValue:Tn.type,"onUpdate:modelValue":Hn=>Tn.type=Hn,class:"parameter-type-select",placeholder:unref(r)("programming.type"),onChange:Hn=>Ie(Tn)},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(z,Hn=>createVNode(Sn,{key:Hn.key,label:unref(r)(`programming.${Hn.key}`),value:Hn.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"]),Tn.type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_5$1,[createVNode(Vn,{class:"parameter-value",modelValue:Tn.value,"onUpdate:modelValue":Hn=>Tn.value=Hn,precision:2},null,8,["modelValue","onUpdate:modelValue"]),createVNode(Mn,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Tn.min,"onUpdate:modelValue":Hn=>Tn.min=Hn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Mn,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Tn.max,"onUpdate:modelValue":Hn=>Tn.max=Hn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])):Tn.type===unref(ParameterType).Constant?(openBlock(),createBlock(hn,{key:1,modelValue:Tn.value,"onUpdate:modelValue":Hn=>Tn.value=Hn,class:"parameter-const-select",placeholder:unref(r)("programming.value")},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value,Hn=>(openBlock(),createBlock(Sn,{key:Hn.uuid,label:Hn.name,value:Hn.uuid},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):Tn.type===unref(ParameterType).RingController?(openBlock(),createElementBlock("div",_hoisted_6$1,[createVNode(jn,{type:"border-card"},{default:withCtx(()=>[createVNode($n,{label:"radius"},{default:withCtx(()=>[createVNode(Mn,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(_n,{class:"parameter-value",modelValue:Tn.value.radius.name,"onUpdate:modelValue":Hn=>Tn.value.radius.name=Hn},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Mn,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Tn.value.radius.value,"onUpdate:modelValue":Hn=>Tn.value.radius.value=Hn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Mn,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Tn.value.radius.min,"onUpdate:modelValue":Hn=>Tn.value.radius.min=Hn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Mn,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Tn.value.radius.max,"onUpdate:modelValue":Hn=>Tn.value.radius.max=Hn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),createVNode($n,{label:"degree"},{default:withCtx(()=>[createVNode(Mn,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(_n,{class:"parameter-value",modelValue:Tn.value.degree.name,"onUpdate:modelValue":Hn=>Tn.value.degree.name=Hn},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Mn,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Tn.value.degree.value,"onUpdate:modelValue":Hn=>Tn.value.degree.value=Hn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Mn,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Tn.value.degree.min,"onUpdate:modelValue":Hn=>Tn.value.degree.min=Hn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Mn,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Tn.value.degree.max,"onUpdate:modelValue":Hn=>Tn.value.degree.max=Hn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),createVNode($n,{label:"params"},{default:withCtx(()=>[createVNode(Et,{class:"add-parameter-button",onPointerdown:Hn=>xe(Tn.value)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.new-parameter")),1)]),_:2},1032,["onPointerdown"]),createVNode(kn,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Tn.value.params,Hn=>(openBlock(),createBlock(Nn,{title:Hn.name,name:"1"},{default:withCtx(()=>[createVNode(Mn,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(_n,{class:"parameter-value",modelValue:Hn.name,"onUpdate:modelValue":la=>Hn.name=la},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Mn,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Hn.value,"onUpdate:modelValue":la=>Hn.value=la,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Mn,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Hn.min,"onUpdate:modelValue":la=>Hn.min=la,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Mn,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Hn.max,"onUpdate:modelValue":la=>Hn.max=la,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024)])):createCommentVNode("",!0),createVNode(Dt,{class:"sort-down-btn",onPointerdown:Hn=>_e(Tn.uuid)},{default:withCtx(()=>[createVNode(unref(sort_down_default))]),_:2},1032,["onPointerdown"]),createVNode(Dt,{class:"sort-up-btn",onPointerdown:Hn=>Ce(Tn.uuid)},{default:withCtx(()=>[createVNode(unref(sort_up_default))]),_:2},1032,["onPointerdown"]),createVNode(Dt,{class:"remove-btn",onPointerdown:Hn=>ue(Tn.uuid)},{default:withCtx(()=>[createVNode(unref(close_default))]),_:2},1032,["onPointerdown"])]))),256))]),_:1})]),_:1},8,["label"]),createVNode($n,{label:unref(r)("programming.glyph-parameters"),name:"glyph-parameters"},{default:withCtx(()=>[createVNode(Fn,null,{default:withCtx(()=>[createVNode(Et,{class:"add-parameter-button",onPointerdown:oe},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.new-parameter")),1)]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(y.value,Tn=>(openBlock(),createElementBlock("div",_hoisted_7$1,[createBaseVNode("div",_hoisted_8$1,[withDirectives(createBaseVNode("span",{class:"parameter-name-label"},toDisplayString$1(Tn.name),513),[[vShow,!$.value[Tn.uuid]]]),withDirectives(createVNode(_n,{class:"parameter-name-input",modelValue:Tn.name,"onUpdate:modelValue":Hn=>Tn.name=Hn,onKeyup:withKeys(Hn=>ae(Tn.uuid,!1),["enter","native"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"]),[[vShow,$.value[Tn.uuid]]]),withDirectives(createVNode(Dt,{class:"edit-icon",onPointerdown:Hn=>ae(Tn.uuid,!0)},{default:withCtx(()=>[createVNode(unref(edit_default))]),_:2},1032,["onPointerdown"]),[[vShow,!$.value[Tn.uuid]]])]),createVNode(hn,{modelValue:Tn.type,"onUpdate:modelValue":Hn=>Tn.type=Hn,class:"parameter-type-select",placeholder:unref(r)("programming.type"),onChange:Hn=>Ie(Tn)},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(z,Hn=>createVNode(Sn,{key:Hn.key,label:unref(r)(`programming.${Hn.key}`),value:Hn.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"]),Tn.type===unref(ParameterType).Number?(openBlock(),createElementBlock("div",_hoisted_9$1,[createVNode(Vn,{class:"parameter-value",modelValue:Tn.value,"onUpdate:modelValue":Hn=>Tn.value=Hn,precision:2},null,8,["modelValue","onUpdate:modelValue"]),createVNode(Mn,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Tn.min,"onUpdate:modelValue":Hn=>Tn.min=Hn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Mn,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Tn.max,"onUpdate:modelValue":Hn=>Tn.max=Hn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])):Tn.type===unref(ParameterType).Constant?(openBlock(),createBlock(hn,{key:1,modelValue:Tn.value,"onUpdate:modelValue":Hn=>Tn.value=Hn,class:"parameter-const-select",placeholder:unref(r)("programming.value")},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value,Hn=>(openBlock(),createBlock(Sn,{key:Hn.uuid,label:Hn.name,value:Hn.uuid},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):Tn.type===unref(ParameterType).RingController?(openBlock(),createElementBlock("div",_hoisted_10$1,[createVNode(jn,{type:"border-card"},{default:withCtx(()=>[createVNode($n,{label:"radius"},{default:withCtx(()=>[createVNode(Mn,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(_n,{class:"parameter-value",modelValue:Tn.value.radius.name,"onUpdate:modelValue":Hn=>Tn.value.radius.name=Hn},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Mn,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Tn.value.radius.value,"onUpdate:modelValue":Hn=>Tn.value.radius.value=Hn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Mn,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Tn.value.radius.min,"onUpdate:modelValue":Hn=>Tn.value.radius.min=Hn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Mn,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Tn.value.radius.max,"onUpdate:modelValue":Hn=>Tn.value.radius.max=Hn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),createVNode($n,{label:"degree"},{default:withCtx(()=>[createVNode(Mn,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(_n,{class:"parameter-value",modelValue:Tn.value.degree.name,"onUpdate:modelValue":Hn=>Tn.value.degree.name=Hn},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Mn,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Tn.value.degree.value,"onUpdate:modelValue":Hn=>Tn.value.degree.value=Hn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Mn,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Tn.value.degree.min,"onUpdate:modelValue":Hn=>Tn.value.degree.min=Hn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Mn,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Tn.value.degree.max,"onUpdate:modelValue":Hn=>Tn.value.degree.max=Hn,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),createVNode($n,{label:"params"},{default:withCtx(()=>[createVNode(Et,{class:"add-parameter-button",onPointerdown:Hn=>xe(Tn.value)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.new-parameter")),1)]),_:2},1032,["onPointerdown"]),createVNode(kn,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Tn.value.params,Hn=>(openBlock(),createBlock(Nn,{title:Hn.name,name:"1"},{default:withCtx(()=>[createVNode(Mn,{label:"name","label-width":"42px"},{default:withCtx(()=>[createVNode(_n,{class:"parameter-value",modelValue:Hn.name,"onUpdate:modelValue":la=>Hn.name=la},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Mn,{label:"value","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Hn.value,"onUpdate:modelValue":la=>Hn.value=la,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Mn,{label:"min","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Hn.min,"onUpdate:modelValue":la=>Hn.min=la,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),createVNode(Mn,{label:"max","label-width":"42px"},{default:withCtx(()=>[createVNode(Vn,{class:"parameter-value",modelValue:Hn.max,"onUpdate:modelValue":la=>Hn.max=la,precision:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024)])):createCommentVNode("",!0),createVNode(Dt,{class:"sort-down-btn",onPointerdown:Hn=>de(Tn.uuid)},{default:withCtx(()=>[createVNode(unref(sort_down_default))]),_:2},1032,["onPointerdown"]),createVNode(Dt,{class:"sort-up-btn",onPointerdown:Hn=>he(Tn.uuid)},{default:withCtx(()=>[createVNode(unref(sort_up_default))]),_:2},1032,["onPointerdown"]),createVNode(Dt,{class:"remove-btn",onPointerdown:Hn=>le(Tn.uuid)},{default:withCtx(()=>[createVNode(unref(close_default))]),_:2},1032,["onPointerdown"])]))),256))]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])]),createBaseVNode("div",_hoisted_11$1,[createBaseVNode("div",_hoisted_12$1,[createBaseVNode("div",_hoisted_13$1,toDisplayString$1(unref(n)("programming.script")),1),createVNode(Et,{class:"reset-btn"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.reset")),1)]),_:1}),createVNode(Et,{class:"execute-btn",type:"primary",onPointerdown:qe[1]||(qe[1]=Tn=>$e())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(n)("programming.execute")),1)]),_:1})]),_hoisted_14$1])])}}}),GlyphProgrammingEditor=_export_sfc(_sfc_main$3,[["__scopeId","data-v-5e8f57b6"]]),_hoisted_1$1={class:"widget grid-controller"},_hoisted_2$1=["width","height"],_sfc_main$2=defineComponent({__name:"GridController_playground",props:{dx:{type:Number,default:0},dy:{type:Number,default:0},centerSquareSize:{type:Number,default:500/3},size:{type:Number,default:500},onChange:Function},setup(e){const n=e,{dx:r,dy:g,centerSquareSize:y,size:k,onChange:$}=toRefs(n),V=computed(()=>[j(k.value/2)+j(r.value),j(k.value/2)+j(g.value)]),L=ref(null),z=($e,xe,Ie,ze)=>Math.sqrt(($e-Ie)*($e-Ie)+(xe-ze)*(xe-ze)),j=$e=>$e/k.value*500,ae=computed(()=>Math.round((k.value-y.value)/2)+r.value),re=computed(()=>Math.round((k.value-y.value)/2+y.value)+r.value),oe=computed(()=>Math.round((k.value-y.value)/2)+g.value),ue=computed(()=>Math.round((k.value-y.value)/2+y.value)+g.value);onMounted(()=>{L.value.addEventListener("mousedown",he),L.value.addEventListener("mousemove",_e)}),onBeforeUnmount(()=>{L.value.removeEventListener("mousedown",he),L.value.removeEventListener("mousemove",_e)});const le=ref("none"),de=ref("default"),he=$e=>{z($e.offsetX,$e.offsetY,V.value[0],V.value[1])<=20?(document.body.addEventListener("mouseup",Ce),le.value="inner-move"):z($e.offsetX,$e.offsetY,j(k.value/2-y.value/4),j(k.value/2-y.value/4))<=20?(document.body.addEventListener("mouseup",Ce),le.value="left-top",de.value="left-top"):z($e.offsetX,$e.offsetY,j(k.value/2+y.value/4),j(k.value/2-y.value/4))<=20?(document.body.addEventListener("mouseup",Ce),le.value="right-top",de.value="right-top"):z($e.offsetX,$e.offsetY,j(k.value/2-y.value/4),j(k.value/2+y.value/4))<=20?(document.body.addEventListener("mouseup",Ce),le.value="left-bottom",de.value="left-bottom"):z($e.offsetX,$e.offsetY,j(k.value/2+y.value/4),j(k.value/2+y.value/4))<=20&&(document.body.addEventListener("mouseup",Ce),le.value="right-bottom",de.value="right-bottom")},_e=$e=>{switch(le.value){case"inner-move":{const xe=$e.offsetX/500*k.value-k.value/2,Ie=$e.offsetY/500*k.value-k.value/2;Math.abs(xe)<=k.value/12&&Math.abs(Ie)<=k.value/12&&$.value(xe,Ie,y.value);break}case"none":{z($e.offsetX,$e.offsetY,j(k.value/2-y.value/4),j(k.value/2-y.value/4))<=20?de.value="left-top":z($e.offsetX,$e.offsetY,j(k.value/2+y.value/4),j(k.value/2-y.value/4))<=20?de.value="right-top":z($e.offsetX,$e.offsetY,j(k.value/2-y.value/4),j(k.value/2+y.value/4))<=20?de.value="left-bottom":z($e.offsetX,$e.offsetY,j(k.value/2+y.value/4),j(k.value/2+y.value/4))<=20?de.value="right-bottom":de.value="default";break}default:{const xe=$e.offsetX/500*k.value-k.value/2,Ie=$e.offsetY/500*k.value-k.value/2;let ze=0;if(le.value==="left-top"?ze=Math.min(-xe,-Ie):le.value==="right-top"?ze=Math.min(xe,-Ie):le.value==="left-bottom"?ze=Math.min(-xe,Ie):le.value==="right-bottom"&&(ze=Math.min(xe,Ie)),ze=Math.abs(ze),ze<=k.value/6&&ze>=k.value/24){const qe=ze*4,Et=r.value/y.value*qe,_n=g.value/y.value*qe;$.value(Et,_n,qe)}else if(ze>=k.value/6){const qe=k.value/3*2,Et=r.value/y.value*qe,_n=g.value/y.value*qe;$.value(Et,_n,qe)}else if(ze<=k.value/24){const qe=k.value/6,Et=r.value/y.value*qe,_n=g.value/y.value*qe;$.value(Et,_n,qe)}break}}},Ce=()=>{le.value="none",document.body.removeEventListener("mouseup",Ce)};emitter.on("refreshPlaygroundGridController",()=>{Ne(),renderGridCanvas(orderedListWithItemsForCurrentCharacterFile$1.value,L.value,{scale:.5,forceUpdate:!1,fill:!1,offset:{x:0,y:0},grid:{dx:r.value,dy:g.value,size:k.value,centerSquareSize:y.value,x1:ae.value,x2:re.value,y1:oe.value,y2:ue.value},useSkeletonGrid:!1})}),watch([r,g,k,y],($e,xe)=>{Ne(),renderGridCanvas(orderedListWithItemsForCurrentCharacterFile$1.value,L.value,{scale:.5,forceUpdate:!1,fill:!1,offset:{x:0,y:0},grid:{dx:r.value,dy:g.value,size:k.value,centerSquareSize:y.value,x1:ae.value,x2:re.value,y1:oe.value,y2:ue.value},useSkeletonGrid:!0})},{deep:!0});const Ne=()=>{const $e=L.value.getContext("2d");$e.clearRect(0,0,k.value,k.value),$e.strokeStyle="#811616",$e.lineWidth=2,$e.beginPath(),$e.moveTo(0,oe.value),$e.lineTo(k.value,oe.value),$e.stroke(),$e.closePath(),$e.beginPath(),$e.moveTo(0,ue.value),$e.lineTo(k.value,ue.value),$e.stroke(),$e.closePath(),$e.beginPath(),$e.moveTo(ae.value,0),$e.lineTo(ae.value,k.value),$e.stroke(),$e.closePath(),$e.beginPath(),$e.moveTo(re.value,0),$e.lineTo(re.value,k.value),$e.stroke(),$e.closePath(),$e.beginPath(),$e.strokeStyle="#153063",$e.rect(k.value/2-y.value/4,k.value/2-y.value/4,y.value/2,y.value/2),$e.stroke(),$e.closePath(),$e.fillStyle="#153063",$e.lineWidth=0,$e.beginPath(),$e.arc(V.value[0]/500*k.value,V.value[1]/500*k.value,20,0,2*Math.PI),$e.closePath(),$e.fill()};return($e,xe)=>(openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("canvas",{ref_key:"canvas",ref:L,width:unref(k),height:unref(k),style:{width:"500px",height:"500px"},class:normalizeClass({"left-top":de.value==="left-top","right-top":de.value==="right-top","left-bottom":de.value==="left-bottom","right-bottom":de.value==="right-bottom"})},null,10,_hoisted_2$1)]))}}),GridController=_export_sfc(_sfc_main$2,[["__scopeId","data-v-a0ec22ff"]]),_hoisted_1={class:"playground"},_hoisted_2={class:"el-loading-spinner"},_hoisted_3=createBaseVNode("svg",{class:"circular",viewBox:"0 0 50 50"},[createBaseVNode("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})],-1),_hoisted_4={class:"loading-text"},_hoisted_5={class:"left"},_hoisted_6={class:"characters",id:"playground-characters-list"},_hoisted_7={class:"character-preview"},_hoisted_8={class:"params-panel"},_hoisted_9={class:"column column-1"},_hoisted_10={class:"column"},_hoisted_11={class:"right"},_hoisted_12={class:"edit-panel"},_hoisted_13=createBaseVNode("div",{class:"tips"},null,-1),_hoisted_14={class:"control-panel"},svg=`
  <path class="path" d="" style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>
`,_sfc_main$1=defineComponent({__name:"Playground",setup(e){const{tm:n,t:r,locale:g}=useI18n(),y=ref([]);onMounted(()=>{initPlayground()});const k=(L,z,j)=>{gridSettings.value.dx=L,gridSettings.value.dy=z,gridSettings.value.centerSquareSize=j,renderPreview()};watch(constants$1,()=>{updateCharactersAndPreview(),emitter.emit("refreshPlaygroundGridController")},{deep:!0});const $=()=>{let L=constants$1.value[0].value;L+=1,L>=constants$1.value[0].options.length&&(L=0),constants$1.value[0].value=L},V=()=>{let L=constants$1.value[2].value;L+=1,L>=constants$1.value[2].options.length&&(L=0),constants$1.value[2].value=L};return(L,z)=>{const j=resolveComponent("el-progress"),ae=resolveComponent("el-button"),re=resolveComponent("el-slider"),oe=resolveComponent("el-form-item"),ue=resolveDirective("loading");return withDirectives((openBlock(),createElementBlock("div",{class:"wrap","element-loading-text":"","element-loading-spinner":svg,"element-loading-svg-view-box":"-10, -10, 50, 50","element-loading-background":"rgba(122, 122, 122, 0.8)"},[createBaseVNode("div",_hoisted_1,[withDirectives(createBaseVNode("div",_hoisted_2,[_hoisted_3,createBaseVNode("div",null,toDisplayString$1(unref(r)("panels.paramsPanel.loadingMsg")),1)],512),[[vShow,unref(loading$1)&&unref(total$1)===0]]),withDirectives(createBaseVNode("div",_hoisted_4,[createVNode(j,{"text-inside":!0,"stroke-width":20,percentage:Math.round(unref(loaded$1)/unref(total$1)*100)},null,8,["percentage"]),createBaseVNode("div",null,toDisplayString$1(unref(r)("panels.paramsPanel.loadedMsg",{percent:Math.round(unref(loaded$1)/unref(total$1)*100)})),1)],512),[[vShow,unref(loading$1)&&unref(total$1)!=0]]),createBaseVNode("div",_hoisted_5,[createBaseVNode("div",_hoisted_6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(y.value,le=>(openBlock(),createElementBlock("div",_hoisted_7,toDisplayString$1(le),1))),256))]),createBaseVNode("div",_hoisted_8,[createBaseVNode("div",_hoisted_9,[createVNode(oe,{"label-width":"80px",label:""},{default:withCtx(()=>[createVNode(ae,{size:"small",onPointerdown:$},{default:withCtx(()=>[createTextVNode("")]),_:1}),createVNode(re,{size:"small",step:.05,modelValue:unref(constants$1)[1].value,"onUpdate:modelValue":z[0]||(z[0]=le=>unref(constants$1)[1].value=le),min:unref(constants$1)[1].min,max:unref(constants$1)[1].max},null,8,["modelValue","min","max"])]),_:1}),createVNode(oe,{"label-width":"80px",label:""},{default:withCtx(()=>[createVNode(ae,{size:"small",onPointerdown:V},{default:withCtx(()=>[createTextVNode("")]),_:1}),createVNode(re,{size:"small",step:.05,modelValue:unref(constants$1)[3].value,"onUpdate:modelValue":z[1]||(z[1]=le=>unref(constants$1)[3].value=le),min:unref(constants$1)[3].min,max:unref(constants$1)[3].max},null,8,["modelValue","min","max"])]),_:1})]),createBaseVNode("div",_hoisted_10,[createVNode(oe,{"label-width":"80px",label:""},{default:withCtx(()=>[createVNode(re,{size:"small",modelValue:unref(constants$1)[6].value,"onUpdate:modelValue":z[2]||(z[2]=le=>unref(constants$1)[6].value=le),min:unref(constants$1)[6].min,max:unref(constants$1)[6].max},null,8,["modelValue","min","max"])]),_:1}),createVNode(oe,{"label-width":"80px",label:""},{default:withCtx(()=>[createVNode(re,{size:"small",step:.05,modelValue:unref(constants$1)[5].value,"onUpdate:modelValue":z[3]||(z[3]=le=>unref(constants$1)[5].value=le),min:unref(constants$1)[5].min,max:unref(constants$1)[5].max},null,8,["modelValue","min","max"])]),_:1}),createVNode(oe,{"label-width":"80px",label:""},{default:withCtx(()=>[createVNode(re,{size:"small",step:.05,modelValue:unref(constants$1)[4].value,"onUpdate:modelValue":z[4]||(z[4]=le=>unref(constants$1)[4].value=le),min:unref(constants$1)[4].min,max:unref(constants$1)[4].max},null,8,["modelValue","min","max"])]),_:1})])])]),createBaseVNode("div",_hoisted_11,[createBaseVNode("div",_hoisted_12,[createVNode(GridController,{size:unref(gridSettings).size,dx:unref(gridSettings).dx,dy:unref(gridSettings).dy,centerSquareSize:unref(gridSettings).centerSquareSize,onChange:k},null,8,["size","dx","dy","centerSquareSize"])]),_hoisted_13,createBaseVNode("div",_hoisted_14,[createVNode(ae,{type:"primary",onClick:unref(exportFont$1)},{default:withCtx(()=>[createTextVNode("")]),_:1},8,["onClick"])])])])])),[[ue,unref(loading$1)]])}}}),router=createRouter({history:createWebHashHistory(),routes:[{path:"/",name:"welcome",component:Welcome},{path:"/editor",name:"editor",component:Editor},{path:"/character-programming-editor",name:"character-programming-editor",component:CharacterProgrammingEditor},{path:"/glyph-programming-editor",name:"glyph-programming-editor",component:GlyphProgrammingEditor},{path:"/playground",name:"playground",component:_sfc_main$1}]});router.beforeEach((e,n,r)=>{r()});const initWorker=()=>{let e=null;return window.Worker&&(e=new Worker(new URL("/fontplayer_demo/assets/worker-bn2URQOs.js",import.meta.url))),e};var WorkerEventType=(e=>(e[e.ParseFont=0]="ParseFont",e))(WorkerEventType||{});const plainCompnent=e=>(e._o&&delete e._o,e),plainGlyph=(e,n={clearScript:!1})=>{const{clearScript:r}=n,g={uuid:e.uuid,type:e.type,name:e.name,components:e.components.map(y=>{const k=Object.assign({},y);return k.value.contour&&(k.value.contour=null),k.value.preview&&(k.value.preview=null),y.type==="glyph"?k.value=plainGlyph(y.value,{clearScript:!0}):k.value=plainCompnent(y.value),k}),groups:clone(e.groups),orderedList:clone(e.orderedList),selectedComponentsUUIDs:clone(e.selectedComponentsUUIDs),view:clone(e.view),parameters:e.parameters.parameters,joints:e.joints.map(y=>({name:y.name,uuid:y.uuid,x:y.x,y:y.y})),reflines:e.reflines?clone(e.reflines):[],script:r?null:e.script,skeleton:e.skeleton?clone(e.skeleton):null,style:e.style};return r&&(g.script_reference=e.uuid),e.layout&&(g.layout=clone(e.layout)),e.glyph_script&&(g.glyph_script=clone(e.glyph_script)),e.system_script&&(g.system_script=clone(e.system_script)),e._o&&(g.objData=e._o.getData(),g.objData._components.map(y=>{y.contour&&(y.contour=null),y.preview&&(y.preview=null)})),g},mapToObject=e=>{let n={};return e.forEach((r,g)=>{n[g]=r}),n},plainFile=async e=>{const n=[];return await(async g=>{for(let k=0;k<g.length;k+=100){const $=g.slice(k,k+100);await new Promise(V=>{requestAnimationFrame(()=>{$.forEach(L=>{n.push(plainCharacter(L))}),V()})})}})(e.characterList),{uuid:e.uuid,characterList:n,name:e.name,width:e.width,height:e.height,saved:e.saved,iconsCount:e.iconsCount,fontSettings:clone(e.fontSettings)}},plainCharacter=e=>{addLoaded();const n={uuid:e.uuid,type:e.type,character:clone(e.character),components:e.components.map(r=>{const g=Object.assign({},r);return g.value.contour&&(g.value.contour=null),g.value.preview&&(g.value.preview=null),r.type==="glyph"?g.value=plainGlyph(r.value,{clearScript:!0}):g.value=plainCompnent(r.value),g}),groups:clone(e.groups),orderedList:clone(e.orderedList),selectedComponentsUUIDs:clone(e.selectedComponentsUUIDs),script:e.script||`function script_${e.uuid.replaceAll("-","_")} (character, constants, FP) {
	//Todo something
}`,view:clone(e.view)};return e.glyph_script&&(n.glyph_script=clone(e.glyph_script)),e.info&&(n.info=clone(e.info)),n},instanceGlyph=(e,n)=>{e.parameters=new ParametersMap(e.parameters),e.joints=e.joints.map(g=>new Joint(g.name,{x:g.x,y:g.y})),e.components=e.components.length?e.components.map(g=>(g.type==="glyph"&&(g.value=instanceGlyph(g.value,!1),g.value.parent_reference=getParentInfo(e)),g)):[];const r=new CustomGlyph(e);return e.objData&&r.setData(e.objData),n&&n?.updateContoursAndPreview&&componentsToContours(orderedListWithItemsForCharacterFile(e),{unitsPerEm:n.unitsPerEm,descender:n.descender,advanceWidth:n.advanceWidth},{x:0,y:0},!1,!1,!0),e},instanceCharacter=(e,n)=>(e.script||(e.script=`function script_${e.uuid.replaceAll("-","_")} (character, constants, FP) {
	//Todo something
}`),e.components=e.components.length?e.components.map(r=>(r.type==="glyph"&&(r.value=instanceGlyph(r.value,{unitsPerEm:1e3,descender:-200,advanceWidth:1e3,updateContoursAndPreview:n?.updateContoursAndPreview}),r.value.parent_reference=getParentInfo(e)),r)):[],new Character(e),n&&n?.updateContoursAndPreview&&componentsToContours(orderedListWithItemsForCharacterFile(e),{unitsPerEm:n.unitsPerEm,descender:n.descender,advanceWidth:n.advanceWidth},{x:0,y:0},!1,!1,!1),e),saveFile_tauri=async()=>{setSaveDialogVisible(!0)},saveAs_tauri=async()=>{setSaveDialogVisible(!0)},base64ToArrayBuffer=e=>{const n=e.replace(/^data:.+;base64,/,""),r=atob(n),g=new ArrayBuffer(r.length),y=new Uint8Array(g);for(let k=0;k<r.length;k++)y[k]=r.charCodeAt(k);return g},nativeSaveText=async(e,n,r)=>{const g=await save({defaultPath:n,filters:[{name:"Filter",extensions:r}]});g&&await writeTextFile(g,e)},nativeSaveBinary=async(e,n,r)=>{const g=await save({defaultPath:n,filters:[{name:"Filter",extensions:r}]});g&&await writeFile(g,e)},exportGlyphs_tauri=async()=>{loaded$1.value=0;let e=null,n="",r=[];editStatus.value===Status.GlyphList?(e=glyphs.value,n="glyphs.json"):editStatus.value===Status.StrokeGlyphList?(e=stroke_glyphs.value,n="stroke_glyphs.json"):editStatus.value===Status.RadicalGlyphList?(e=radical_glyphs.value,n="radical_glyphs.json"):editStatus.value===Status.CompGlyphList?(e=comp_glyphs.value,n="comp_glyphs.json"):(e=glyphs.value,n="glyphs.json"),total$1.value=e.length,loading$1.value=!0,setTimeout(async()=>{requestAnimationFrame(()=>g(0));const g=async y=>{if(r.push(plainGlyph(e[y])),loaded$1.value+=1,loaded$1.value>=total$1.value){loading$1.value=!1;const k=JSON.stringify({glyphs:r,constants:constants.value,constantGlyphMap:mapToObject(constantGlyphMap),version:1});await nativeSaveText(k,n,["json"])}else y%100===0?requestAnimationFrame(()=>g(y+1)):g(y+1)}},50)},exportJPEG_tauri=async()=>{const n=canvas.value.toDataURL("image/jpeg"),r=base64ToArrayBuffer(n);let g="untitled.jpg";editStatus.value===Status.Edit?g=`${editCharacterFile.value.character.text}.jpg`:g=`${editGlyph.value.name}.jpg`,nativeSaveBinary(r,g,["jpg","jpeg"])},exportPNG_tauri=async()=>{const e=canvas.value;render$1(e,!1);const n=e.toDataURL("image/png"),r=base64ToArrayBuffer(n);let g="untitled.png";editStatus.value===Status.Edit?g=`${editCharacterFile.value.character.text}.png`:g=`${editGlyph.value.name}.png`,nativeSaveBinary(r,g,["png"]),render$1(e,!0)},exportSVG_tauri=async()=>{if(editStatus.value!==Status.Edit&&editStatus.value!==Status.Glyph)return;const e=editStatus.value===Status.Edit?orderedListWithItemsForCurrentCharacterFile.value:editGlyph.value._o.components,n=componentsToSvg(e,selectedFile.value.width,selectedFile.value.height);let r="untitled.svg";editStatus.value===Status.Edit?r=`${editCharacterFile.value.character.text}.svg`:r=`${editGlyph.value.name}.svg`,nativeSaveText(n,r,["svg"])},exportFont_tauri=async e=>{const n=await createFont(e);loadingMsg.value="...";const r=toArrayBuffer(n),g=`${selectedFile.value.name}.otf`;nativeSaveBinary(r,g,["otf"]),loading$1.value=!1,loaded$1.value=0,total$1.value=0,loadingMsg.value=""},showExportFontDialog_tauri=()=>{setExportFontTauriDialogVisible(!0)},showExportFontDialog=()=>{ENV.value==="tauri"?showExportFontDialog_tauri():setExportFontDialogVisible(!0)},createFile=()=>{files.value&&files.value.length?(tips.value="",tipsDialogVisible.value=!0):setCreateFileDialogVisible(!0)},openFile_tauri=async()=>{if(files.value&&files.value.length)tips.value="",tipsDialogVisible.value=!0;else{const{data:e}=await nativeImportTextFile(["json"]);if(!e)return;const n=JSON.parse(e);await __openFile(n)}},addLoaded=()=>{loading$1.value&&(loaded$1.value+=1,loaded$1.value>=total$1.value&&(loading$1.value=!1))},__openFile=async e=>{total$1.value=e.file.characterList.length*1+Math.min(visibleCount.value,e.file.characterList.length)+(e.glyphs.length+e.stroke_glyphs.length+e.radical_glyphs.length+e.comp_glyphs.length)*3,loaded$1.value=0,loading$1.value=!0;const n=async(k,$)=>new Promise(V=>{const L=k.map(ae=>instanceGlyph(ae,{updateContoursAndPreview:!0,unitsPerEm:1e3,descender:-200,advanceWidth:1e3}));let z=0;const j=()=>{if(z>=L.length){V();return}const ae=L[z];addGlyph(ae,$),addGlyphTemplate(ae,$),addLoaded(),z++,z%100===0?requestAnimationFrame(j):j()};j()}),r=async k=>new Promise($=>{let V=0;const L=()=>{if(V>=k.characterList.length){$();return}const z=k.characterList[V];addLoaded();const j=instanceCharacter(z,{updateContoursAndPreview:!0,unitsPerEm:k.fontSettings.unitsPerEm,descender:k.fontSettings.descender,advanceWidth:k.fontSettings.advanceWidth});k.characterList[V]=j,V++,V%100===0?requestAnimationFrame(L):L()};L()});await n(e.glyphs,Status.GlyphList),await n(e.stroke_glyphs,Status.StrokeGlyphList),await n(e.radical_glyphs,Status.RadicalGlyphList),await n(e.comp_glyphs,Status.CompGlyphList);const g=e.file;if(e.constants)for(let k=0;k<e.constants.length;k++)constantsMap.getByUUID(e.constants[k].uuid)||constants.value.push(e.constants[k]);if(e.constantGlyphMap){const k=Object.keys(e.constantGlyphMap);for(let $=0;$<k.length;$++)constantGlyphMap.set(k[$],e.constantGlyphMap[k[$]])}await r(g);let y=!0;for(let k=0;k<files.value.length;k++)files.value[k].uuid===g.uuid&&(y=!1,ElNotification({title:"",message:h$1("i",`${g.name}`),type:"error"}));y&&(emitter.emit("renderGlyphPreviewCanvas"),emitter.emit("renderStrokeGlyphPreviewCanvas"),emitter.emit("renderRadicalGlyphPreviewCanvas"),emitter.emit("renderCompGlyphPreviewCanvas"),addFile(g),setSelectedFileUUID(g.uuid),setEditStatus(Status.CharacterList),router.currentRoute.value.name==="welcome"?router.push("/editor"):(clearCharacterRenderList(),characterList.value.map(k=>{addCharacterTemplate(generateCharacterTemplate(k))}),emitter.emit("renderPreviewCanvas")))},openFile=async()=>{if(ENV.value==="tauri"){router.currentRoute.value.name==="welcome"&&(router.push("/editor"),await nextTick(),await new Promise(e=>setTimeout(e,100))),await openFile_tauri();return}files.value&&files.value.length?(tips.value="",tipsDialogVisible.value=!0):(router.currentRoute.value.name==="welcome"&&(router.push("/editor"),await nextTick(),await new Promise(e=>setTimeout(e,100))),await _openFile())},_openFile=async()=>{const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("style","display: none"),e.setAttribute("accept",".json"),e.addEventListener("change",async n=>{const g=n.currentTarget.files;for(let y=0;y<g.length;y++){const k=new FileReader;k.readAsText(g[y]),k.onload=async()=>{const $=JSON.parse(k.result);await __openFile($)}}document.body.removeChild(e)}),document.body.appendChild(e),e.click()},saveFile_web=()=>{setSaveFileTipDialogVisible(!0)},saveFile=async()=>{loading$1.value=!0,loaded$1.value=0,total$1.value=selectedFile.value.characterList.length+glyphs.value.length+stroke_glyphs.value.length+radical_glyphs.value.length+comp_glyphs.value.length;const e=JSON.stringify(constants.value);await localForage.setItem("constants",e);const n=JSON.stringify(mapToObject(constantGlyphMap));await localForage.setItem("constantGlyphMap",n);const r=await plainFile(selectedFile.value),g=JSON.stringify(r);await localForage.setItem("file",g);const y=glyphs.value.map(re=>(loaded$1.value+=1,plainGlyph(re))),k=JSON.stringify(y);await localForage.setItem("glyphs",k);const $=stroke_glyphs.value.map(re=>(loaded$1.value+=1,plainGlyph(re))),V=JSON.stringify($);await localForage.setItem("stroke_glyphs",V);const L=radical_glyphs.value.map(re=>(loaded$1.value+=1,plainGlyph(re))),z=JSON.stringify(L);await localForage.setItem("radical_glyphs",z);const j=comp_glyphs.value.map(re=>(loaded$1.value+=1,plainGlyph(re))),ae=JSON.stringify(j);await localForage.setItem("comp_glyphs",ae),await localForage.setItem("version",1),loading$1.value=!1,ElNotification({title:"",message:h$1("i",{style:"color: teal"},`${r.name}`)})},clearCache=async()=>{localForage.clear(),ElNotification({title:"",message:h$1("i",{style:"color: teal"},"")})},nativeImportFile=async e=>{const n=await open$2({filters:[{name:"Filter",extensions:e}]});let r=null,g="untitled";return n&&(r=await readFile(n),g=n.split("/").pop().split(".")[0]),{uint8Array:r,name:g}},nativeImportTextFile=async e=>{const n=await open$2({filters:[{name:"Filter",extensions:e}]});let r=null,g="untitled";return n&&(r=await readTextFile(n),g=n.split("/").pop().split(".")[0]),{data:r,name:g}},importFont_tauri=async()=>{if(files.value&&files.value.length)tips.value="",tipsDialogVisible.value=!0;else{const e=await nativeImportFile(["otf","ttf"]);await _importFont_tauri(e)}},_importFont_tauri=e=>{const{uint8Array:n,name:r}=e;if(!n)return;const g=n.buffer,y=parse$3(g),k={uuid:genUUID(),width:y.settings.unitsPerEm,height:y.settings.unitsPerEm,name:r,saved:!1,characterList:[],iconsCount:0,fontSettings:{unitsPerEm:y.settings.unitsPerEm,ascender:y.settings.ascender,descender:y.settings.descender}};addFile(k),setSelectedFileUUID(k.uuid),setEditStatus(Status.CharacterList),loaded$1.value=0,total$1.value=0,loading$1.value=!0,worker.onmessage=$=>{const V=$.data;selectedFile.value.characterList=V,clearCharacterRenderList(),characterList.value.map(L=>{addCharacterTemplate(generateCharacterTemplate(L))}),loading$1.value=!1,emitter.emit("renderPreviewCanvas",!0)},worker.postMessage([WorkerEventType.ParseFont,y,selectedFile.value.width])},importFont=()=>{const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("style","display: none"),e.setAttribute("accept",".otf, .ttf"),e.addEventListener("blur",async()=>{loading$1.value=!1}),e.addEventListener("change",async n=>{await nextTick();const y=n.currentTarget.files[0],k=y.name,$=k.substring(0,k.lastIndexOf(".")),V=y.arrayBuffer(),L=parse$3(await V);loaded$1.value=0,total$1.value=L.characters.length*2+Math.min(visibleCount.value,L.characters.length),loading$1.value=!0,await new Promise(oe=>{requestAnimationFrame(()=>{oe()})});const z={uuid:genUUID(),width:L.settings.unitsPerEm,height:L.settings.unitsPerEm,name:$,saved:!1,characterList:[],iconsCount:0,fontSettings:{unitsPerEm:L.settings.unitsPerEm,ascender:L.settings.ascender,descender:L.settings.descender}};addFile(z),setSelectedFileUUID(z.uuid),setEditStatus(Status.CharacterList),router.currentRoute.value.name==="welcome"&&router.push("/editor");const j=await parseFont(L);selectedFile.value.characterList=j,clearCharacterRenderList();const ae=500,re=[];for(let oe=0;oe<j.length;oe++)re.push(generateCharacterTemplate(j[oe])),addLoaded(),(re.length>=ae||oe===j.length-1)&&(batchAddCharacterTemplates(re),re.length=0,await new Promise(ue=>{requestAnimationFrame(()=>{ue()})}));emitter.emit("renderPreviewCanvas",!0),document.body.removeChild(e)}),document.body.appendChild(e),e.click()},parseFont=async e=>{resetLightIdCounter();const n=e.settings.unitsPerEm,r=e.settings.descender,g=selectedFile.value.width,y=[];for(let k=0;k<e.characters.length;k++){addLoaded();const $=e.characters[k];if(!$.unicode&&!$.name)continue;const V={uuid:genLightId(),text:$.unicode?String.fromCharCode($.unicode):$.name,unicode:$.unicode?$.unicode.toString(16).padStart(4,"0"):""},L=genLightId(),z={uuid:L,type:"text",character:V,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},info:{gridSettings:{dx:0,dy:0,centerSquareSize:g/3,size:g,default:!0},useSkeletonGrid:!1,layout:"",layoutTree:[]},script:`function script_${L.replaceAll("-","_")} (character, constants, FP) {
	//Todo something
}`};contoursToComponents($.contours,{unitsPerEm:n,descender:r,advanceWidth:$.advanceWidth}).forEach(ae=>{z.components.push(ae),z.orderedList.push({type:"component",uuid:ae.uuid})}),y.push(z),k%100===0&&await new Promise(ae=>{requestAnimationFrame(()=>{ae()})})}return y},importTemplates=()=>{setImportTemplatesDialogVisible(!0)},importGlyphs_tauri=async()=>{let e=!1;const{data:n}=await nativeImportTextFile(["json"]);if(!n)return;const r=JSON.parse(n),g=r.glyphs;if(loading$1.value=!0,loaded$1.value=0,total$1.value=g.length,r.constants)for(let $=0;$<r.constants.length;$++)constantsMap.getByUUID(r.constants[$].uuid)||constants.value.push(r.constants[$]);if(r.constantGlyphMap){const $=Object.keys(r.constantGlyphMap);for(let V=0;V<$.length;V++)constantGlyphMap.set($[V],r.constantGlyphMap[$[V]])}const y=[];if(await(async $=>{for(let L=0;L<$.length;L+=100){const z=$.slice(L,L+100);await new Promise(j=>{requestAnimationFrame(()=>{z.forEach(ae=>{const re=instanceGlyph(ae,{updateContoursAndPreview:!0,unitsPerEm:1e3,descender:-200,advanceWidth:1e3});y.push(re),loaded$1.value++}),j()})})}})(g),y.forEach($=>{getGlyphByUUID($.uuid)?e=!0:(addGlyph($,editStatus.value),addGlyphTemplate($,editStatus.value))}),editStatus.value===Status.GlyphList?emitter.emit("renderGlyphPreviewCanvas"):editStatus.value===Status.StrokeGlyphList?emitter.emit("renderStrokeGlyphPreviewCanvas"):editStatus.value===Status.RadicalGlyphList?emitter.emit("renderRadicalGlyphPreviewCanvas"):editStatus.value===Status.CompGlyphList&&emitter.emit("renderCompGlyphPreviewCanvas"),e){const{locale:$}=i18n.global;$==="zh"?ElMessageBox.alert("uuid","Note",{confirmButtonText:""}):$==="en"&&ElMessageBox.alert("Duplicate glyphs with the same UUID as existing ones were detected during import and have been automatically ignored.","Note",{confirmButtonText:"Confirm"})}loading$1.value=!1,loaded$1.value=0,total$1.value=0},importGlyphs=()=>{let e=!1;const n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("style","display: none"),n.setAttribute("accept",".json"),n.addEventListener("change",async r=>{const y=r.currentTarget.files;for(let k=0;k<y.length;k++){const $=new FileReader;$.readAsText(y[k]),$.onload=async()=>{const V=JSON.parse($.result),L=V.glyphs;if(loading$1.value=!0,loaded$1.value=0,total$1.value=L.length,V.constants)for(let ae=0;ae<V.constants.length;ae++)constantsMap.getByUUID(V.constants[ae].uuid)||constants.value.push(V.constants[ae]);if(V.constantGlyphMap){const ae=Object.keys(V.constantGlyphMap);for(let re=0;re<ae.length;re++)constantGlyphMap.set(ae[re],V.constantGlyphMap[ae[re]])}const z=[];if(await(async ae=>{for(let oe=0;oe<ae.length;oe+=100){const ue=ae.slice(oe,oe+100);await new Promise(le=>{requestAnimationFrame(()=>{ue.forEach(de=>{const he=instanceGlyph(de,{updateContoursAndPreview:!0,unitsPerEm:1e3,descender:-200,advanceWidth:1e3});z.push(he),loaded$1.value++}),le()})})}})(L),z.forEach(ae=>{getGlyphByUUID(ae.uuid)?e=!0:(addGlyph(ae,editStatus.value),addGlyphTemplate(ae,editStatus.value))}),editStatus.value===Status.GlyphList?emitter.emit("renderGlyphPreviewCanvas"):editStatus.value===Status.StrokeGlyphList?emitter.emit("renderStrokeGlyphPreviewCanvas"):editStatus.value===Status.RadicalGlyphList?emitter.emit("renderRadicalGlyphPreviewCanvas"):editStatus.value===Status.CompGlyphList&&emitter.emit("renderCompGlyphPreviewCanvas"),e){const{locale:ae}=i18n.global;ae==="zh"?ElMessageBox.alert("uuid","",{confirmButtonText:""}):ae==="en"&&ElMessageBox.alert("Duplicate glyphs with the same UUID as existing entries were detected during import and have been automatically ignored.","Note",{confirmButtonText:"Confirm"})}loading$1.value=!1,loaded$1.value=0,total$1.value=0}}document.body.removeChild(n)}),document.body.appendChild(n),n.click()},importSVG_tauri=async()=>{const{data:e}=await nativeImportTextFile(["svg"]);if(!e)return;const n=parseStrToSvg(e).childNodes[0];parseSvgToComponents(n).forEach(g=>{addComponentForCurrentCharacterFile(g)})},importSVG=()=>{if(ENV.value==="tauri"){importSVG_tauri();return}const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("style","display: none"),e.setAttribute("accept",".svg"),e.addEventListener("change",async n=>{const g=n.currentTarget.files;for(let y=0;y<g.length;y++){const k=new FileReader;k.readAsText(g[y]),k.onload=()=>{const $=parseStrToSvg(k.result).childNodes[0];parseSvgToComponents($).forEach(L=>{addComponentForCurrentCharacterFile(L)})}}document.body.removeChild(e)}),document.body.appendChild(e),e.click()},exportJSON=()=>{ENV.value==="tauri"?saveAs_tauri():setExportDialogVisible(!0)},exportGlyphs=()=>{if(editStatus.value===Status.CharacterList){const{locale:e}=i18n.global;e==="zh"?ElMessageBox.alert("","",{confirmButtonText:""}):e==="en"&&ElMessageBox.alert("The character list cannot be exported. Only Stroke, Radical, Glyph, and Component lists support exporting their corresponding glyph types.","Note",{confirmButtonText:"Confirm"});return}if(ENV.value==="tauri")exportGlyphs_tauri();else{loaded$1.value=0;let e=null,n="",r=[];editStatus.value===Status.GlyphList?(e=glyphs.value,n="glyphs.json"):editStatus.value===Status.StrokeGlyphList?(e=stroke_glyphs.value,n="stroke_glyphs.json"):editStatus.value===Status.RadicalGlyphList?(e=radical_glyphs.value,n="radical_glyphs.json"):editStatus.value===Status.CompGlyphList?(e=comp_glyphs.value,n="comp_glyphs.json"):(e=glyphs.value,n="glyphs.json"),total$1.value=e.length,loading$1.value=!0,setTimeout(()=>{requestAnimationFrame(()=>g(0));const g=y=>{if(r.push(plainGlyph(e[y])),loaded$1.value+=1,loaded$1.value>=total$1.value){loading$1.value=!1;const k=JSON.stringify({glyphs:r,constants:constants.value,constantGlyphMap:mapToObject(constantGlyphMap),version:1}),$=new Blob([k],{type:"text/plain;charset=utf-8"});FileSaver_minExports.saveAs($,n)}else y%100===0?requestAnimationFrame(()=>g(y+1)):g(y+1)}},50)}},exportJPEG=()=>{if(ENV.value==="tauri")exportJPEG_tauri();else{const n=canvas.value.toDataURL("image/jpeg"),r=document.createElement("a");let g="untitled";editStatus.value===Status.Edit?g=`${editCharacterFile.value.character.text}`:g=`${editGlyph.value.name}`,r.download=g,r.href=n,document.body.appendChild(r),r.click(),document.body.removeChild(r)}},exportPNG=()=>{if(ENV.value==="tauri")exportPNG_tauri();else{const e=canvas.value;render$1(e,!1);const n=e.toDataURL("image/png"),r=document.createElement("a");let g="untitled";editStatus.value===Status.Edit?g=`${editCharacterFile.value.character.text}`:g=`${editGlyph.value.name}`,r.download=g,r.href=n,document.body.appendChild(r),r.click(),document.body.removeChild(r),render$1(e,!0)}},exportSVG=()=>{if(ENV.value==="tauri")exportSVG_tauri();else{if(editStatus.value!==Status.Edit&&editStatus.value!==Status.Glyph)return;editStatus.value===Status.Glyph&&!editGlyph.value._o&&executeScript(editGlyph.value);const e=editStatus.value===Status.Edit?orderedListWithItemsForCurrentCharacterFile.value:editGlyph.value._o.components,n=componentsToSvg(e,selectedFile.value.width,selectedFile.value.height,fontRenderStyle.value),r=new Blob([n],{type:"image/svg+xml"});let g="untitled.svg";editStatus.value===Status.Edit?g=`${editCharacterFile.value.character.text}.svg`:g=`${editGlyph.value.name}.svg`,FileSaver_minExports.saveAs(r,g)}},createFont=async e=>{const n=selectedFile.value.width,r=selectedFile.value.height;let g=null;for(let j=0;j<selectedFile.value.characterList.length;j++){const ae=selectedFile.value.characterList[j];if(ae.character.text===".notdef"){g=ae;break}}const y=[];if(g){let j=[[]];e&&e.remove_overlap&&g.overlap_removed_contours?.length?j=g.overlap_removed_contours:j=componentsToContours(orderedListWithItemsForCharacterFile(g),{unitsPerEm:selectedFile.value.fontSettings.unitsPerEm,descender:selectedFile.value.fontSettings.descender,advanceWidth:selectedFile.value.fontSettings.unitsPerEm},{x:0,y:0},!1,!1,!1),y.push({unicode:0,name:".notdef",contours:j,contourNum:j.length,advanceWidth:g.info?.metrics?.advanceWidth||Math.max(n,r),leftSideBearing:g.info?.metrics?.lsb||0})}else y.push({unicode:0,name:".notdef",contours:[[]],contourNum:0,advanceWidth:Math.max(n,r),leftSideBearing:0});let k=!1;const{unitsPerEm:$,ascender:V,descender:L}=selectedFile.value.fontSettings;for(let j=0;j<selectedFile.value.characterList.length;j++){loaded$1.value++,loaded$1.value>=total$1.value&&(loading$1.value=!1,loaded$1.value=0,total$1.value=0);const ae=selectedFile.value.characterList[j];if(ae.character.text===".notdef")continue;let re=[[]];e&&e.remove_overlap&&ae.overlap_removed_contours?.length?re=ae.overlap_removed_contours:re=componentsToContours(orderedListWithItemsForCharacterFile(ae),{unitsPerEm:$,descender:L,advanceWidth:$},{x:0,y:0},!1,!1,!1);const{text:oe,unicode:ue}=ae.character;y.push({name:oe,unicode:parseInt(ue,16),advanceWidth:ae.info?.metrics?.advanceWidth||$,leftSideBearing:ae.info?.metrics?.lsb||void 0,contours:re,contourNum:re.length}),oe===" "&&(k=!0)}return k||y.push({name:" ",unicode:parseInt("0x20",16),advanceWidth:$,leftSideBearing:0,contours:[[]],contourNum:0}),y.sort((j,ae)=>j.unicode-ae.unicode),await create(y,{familyName:selectedFile.value.name,styleName:"Regular",unitsPerEm:$,ascender:V,descender:L,tables:selectedFile.value.fontSettings.tables||null})},exportFont=async e=>{const n=await createFont(e);loadingMsg.value="...";const r=new DataView(toArrayBuffer(n)),g=new Blob([r],{type:"font/opentype"});var y=new JSZip;y.file(`${selectedFile.value.name}.otf`,g),y.generateAsync({type:"blob"}).then(function(k){FileSaver_minExports.saveAs(k,`${selectedFile.value.name}.zip`),loading$1.value=!1,loaded$1.value=0,total$1.value=0,loadingMsg.value=""})},addCharacter=()=>{setAddTextDialogVisible(!0)},addIcon=()=>{setAddIconDialogVisible(!0)},undo=()=>{undo$2()},redo=()=>{redo$2()},copy=()=>{selectedComponent.value&&setClipBoard(clone(selectedComponents.value))},paste=()=>{const e=clipBoard.value;let n=null;e.map(r=>{const g=clone(r);g.uuid=genUUID(),addComponentForCurrentCharacterFile(g),n=g}),n&&n.type==="glyph"?setTool("glyphDragger"):setTool("select")},cut=()=>{selectedComponent.value&&(setClipBoard(clone(selectedComponents.value)),selectedComponents.value.map(e=>{removeComponentForCurrentCharacterFile(e.uuid)}),setSelectionForCurrentCharacterFile(""))},del=()=>{selectedComponents.value.map(e=>{removeComponentForCurrentCharacterFile(e.uuid)}),setSelectionForCurrentCharacterFile("")},fontSettings=()=>{setFontSettingsDialogVisible(!0)},preferenceSettings=()=>{setPreferenceSettingsDialogVisible(!0)},languageSettings=()=>{setLanguageSettingsDialogVisible(!0)},importPic=()=>{if(ENV.value==="tauri"){importPic_tauri();return}getFromPic()},importPic_tauri=async()=>{const e=await nativeImportFile(["jpg","png","jpeg"]),{name:n,uint8Array:r}=e;if(!r)return;saveState("",[StoreType.Status,editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo,{undoTip:"",redoTip:""});let g="";r.forEach(L=>{g+=String.fromCharCode(L)});const y=btoa(g),$=`data:${n.split(".")[1]==="png"?"image/png":"image/jpeg"};base64,${y}`;total$1.value=0,loaded$1.value=0,loading$1.value=!0;const V=document.createElement("img");V.onload=()=>{setTimeout(()=>{prevEditStatus.value=editStatus.value,thumbnail($,V,1e3),setEditStatus(Status.Pic),loading$1.value=!1},100)},V.src=$},getFromFontPic=()=>{const n=editCharacterFile.value.fontPic.toDataURL(),r=document.createElement("img");r.onload=()=>{prevEditStatus.value=editStatus.value,thumbnail(n,r,r.width),setEditStatus(Status.Pic)},r.src=n},getFromPic=()=>{if(editStatus.value===Status.Edit&&editCharacterFile.value.fontPic){getFromFontPic();return}const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("style","display: none"),e.setAttribute("accept","image/*"),e.addEventListener("change",async n=>{const g=n.currentTarget.files;for(let y=0;y<g.length;y++){total$1.value=0,loaded$1.value=0,loading$1.value=!0;const k=window.URL.createObjectURL(g[y]),$=document.createElement("img");$.onload=()=>{saveState("",[StoreType.Status,editStatus.value===Status.Glyph?StoreType.EditGlyph:StoreType.EditCharacter],OpType.Undo,{undoTip:"",redoTip:""}),prevEditStatus.value=editStatus.value,thumbnail(k,$,1e3),setEditStatus(Status.Pic),loading$1.value=!1},$.src=k}document.body.removeChild(e)}),document.body.appendChild(e),e.click()},thumbnail=(e,n,r)=>{const g=document.createElement("canvas");n.width>r||n.height>r?(g.width=r,g.height=r*n.height/n.width):(g.width=n.width,g.height=n.height);const y=g.getContext("2d");y.drawImage(n,0,0,n.width,n.height,0,0,g.width,g.height);const k=y.getImageData(0,0,g.width,g.height).data;setEditCharacterPic({data:e,img:n,thumbnailCanvas:g,thumbnailPixels:k,processPixels:k,width:g.width,height:g.height});const $=toBlackWhiteBitMap(k,{r:rThreshold.value,g:gThreshold.value,b:bThreshold.value},{x:0,y:0,size:-1,width:g.width,height:g.height});setBitMap({data:$,width:g.width,height:g.height}),clearContoursComponent();const{canvas:V}=reversePixels($,bitmap.value.width,bitmap.value.height),L=V.getContext("2d",{willReadFrequently:!0}),z=V.width,j=V.height,ae=L.getImageData(0,0,z,j);let re=cv.matFromImageData(ae);cv.cvtColor(re,re,cv.COLOR_RGBA2GRAY,0),cv.threshold(re,re,120,200,cv.THRESH_BINARY);let oe=new cv.MatVector,ue=new cv.Mat;cv.findContours(re,oe,ue,cv.RETR_CCOMP,cv.CHAIN_APPROX_NONE);const le=[];for(let de=0;de<oe.size();de++){const he=oe.get(de);for(let _e=0;_e<he.rows;_e++)le.push({x:he.data32S[_e*2],y:he.data32S[_e*2+1]})}getBound$5(le),selectedFile.value?.fontSettings?.unitsPerEm;for(let de=0;de<oe.size();de++){const he=[],_e=oe.get(de);for(let qe=0;qe<_e.rows;qe++)he.push({uuid:genUUID(),x:_e.data32S[qe*2],y:_e.data32S[qe*2+1]});he.push({uuid:genUUID(),x:_e.data32S[0],y:_e.data32S[1]}),getBound$5(he);const Ce=he.map(qe=>({uuid:genUUID(),...qe})),{x:Ne,y:$e,w:xe,h:Ie}=getBound$5(Ce.reduce((qe,Et)=>(qe.push({x:Et.x,y:Et.y}),qe),[])),ze={uuid:genUUID(),type:"polygon",name:"polygon",lock:!1,visible:!0,value:{points:Ce,fillColor:ue.data32S[de*4+3]===-1?"#000":"#fff",strokeColor:"#000",closePath:!0},x:Ne,y:$e,w:xe,h:Ie,rotation:0,flipX:!1,flipY:!1,usedInCharacter:!1};addContoursComponent(ze)}clearCurvesComponent(),contoursComponents.value.map(de=>{if(de.type==="polygon"){const he=de.value.points,_e=fitCurve(he,maxError.value);let Ce=[];if(!_e.length)return;Ce.push({uuid:genUUID(),x:_e[0][0].x,y:_e[0][0].y,type:"anchor",origin:null,isShow:!0}),_e.map((qe,Et)=>{const _n=genUUID(),Dt=genUUID(),Sn=genUUID();Ce.push({uuid:_n,x:qe[1].x,y:qe[1].y,type:"control",origin:Ce[Ce.length-1].uuid,isShow:!1}),Ce.push({uuid:Dt,x:qe[2].x,y:qe[2].y,type:"control",origin:Sn,isShow:!1}),Ce.push({uuid:Sn,x:qe[3].x,y:qe[3].y,type:"anchor",origin:null,isShow:!0})});const{x:Ne,y:$e,w:xe,h:Ie}=getBound$5(Ce),ze=clone(de);ze.uuid=genUUID(),ze.value.points=Ce,ze.value.editMode=!1,ze.type="pen",ze.name="pic-contour",ze.x=Ne,ze.y=$e,ze.w=xe,ze.h=Ie,ze.rotation=0,ze.usedInCharacter=!0,addCurvesComponent(ze)}})},syncData=async()=>{files.value&&files.value.length?(tips.value="",tipsDialogVisible.value=!0):await _syncData()},_syncData=async()=>{clearGlyphRenderList(Status.GlyphList),clearGlyphRenderList(Status.StrokeGlyphList),clearGlyphRenderList(Status.RadicalGlyphList),clearGlyphRenderList(Status.CompGlyphList);const e=JSON.parse(await localForage.getItem("constants"));if(e)for(let ue=0;ue<e.length;ue++)constantsMap.getByUUID(e[ue].uuid)||constants.value.push(e[ue]);const n=JSON.parse(await localForage.getItem("constantGlyphMap"));if(n){const ue=Object.keys(n);for(let le=0;le<ue.length;le++)constantGlyphMap.set(ue[le],n[ue[le]])}const r=await localForage.getItem("glyphs");let g=[];r&&(g=JSON.parse(r));const y=await localForage.getItem("stroke_glyphs");let k=[];y&&(k=JSON.parse(y));const $=await localForage.getItem("radical_glyphs");let V=[];$&&(V=JSON.parse($));const L=await localForage.getItem("comp_glyphs");let z=[];L&&(z=JSON.parse(L));const j=await localForage.getItem("file");let ae=null;if(j&&(ae=JSON.parse(j)),loaded$1.value=0,total$1.value=ae?ae.characterList.length*1+Math.min(visibleCount.value,ae.characterList.length):0+(g.length+k.length+V.length+z.length)*3,total$1.value===0){const{locale:ue}=i18n.global;ue==="zh"?ElMessageBox.alert("","",{confirmButtonText:""}):ue==="en"&&ElMessageBox.alert("No cached data available","Note",{confirmButtonText:"Confirm"});return}loading$1.value=!0;const re=async(ue,le)=>new Promise(de=>{if(ue.length===0){de();return}const he=ue.map(Ne=>instanceGlyph(Ne,{updateContoursAndPreview:!0,unitsPerEm:1e3,descender:-200,advanceWidth:1e3}));let _e=0;const Ce=()=>{if(_e>=he.length){de();return}const Ne=he[_e];addGlyph(Ne,le),addGlyphTemplate(Ne,le),addLoaded(),_e++,_e%100===0?requestAnimationFrame(Ce):Ce()};Ce()}),oe=async ue=>new Promise(le=>{if(!ue||!ue.characterList||ue.characterList.length===0){le();return}let de=0;const he=()=>{if(de>=ue.characterList.length){le();return}const _e=ue.characterList[de];addLoaded();const Ce=instanceCharacter(_e,{updateContoursAndPreview:!0,unitsPerEm:ue.fontSettings.unitsPerEm,descender:ue.fontSettings.descender,advanceWidth:ue.fontSettings.advanceWidth});ue.characterList[de]=Ce,de++,de%100===0?requestAnimationFrame(he):he()};he()});if(r&&(glyphs.value=[],await re(g,Status.GlyphList)),y&&(stroke_glyphs.value=[],await re(k,Status.StrokeGlyphList)),$&&(radical_glyphs.value=[],await re(V,Status.RadicalGlyphList)),L&&(comp_glyphs.value=[],await re(z,Status.CompGlyphList)),j){await oe(ae);let ue=!0;for(let le=0;le<files.value.length;le++)files.value[le].uuid===ae.uuid&&(ue=!1,ElNotification({title:"",message:h$1("i",`${ae.name}`),type:"error"}));ue&&(emitter.emit("renderGlyphPreviewCanvas"),emitter.emit("renderStrokeGlyphPreviewCanvas"),emitter.emit("renderRadicalGlyphPreviewCanvas"),emitter.emit("renderCompGlyphPreviewCanvas"),addFile(ae),setSelectedFileUUID(ae.uuid),setEditStatus(Status.CharacterList),router.currentRoute.value.name==="welcome"?router.push("/editor"):(clearCharacterRenderList(),characterList.value.map(le=>{addCharacterTemplate(generateCharacterTemplate(le))}),emitter.emit("renderPreviewCanvas")))}},importTemplate2=async()=>{for(let e=0;e<strokes.length;e++){loaded$1.value+=1;const n=strokes[e],{name:r,params:g,uuid:y}=n,k=[];for(let z=0;z<g.length;z++){const j=g[z];k.push({uuid:genUUID(),name:j.name,type:ParameterType.Number,value:j.default,min:j.min||0,max:j.max||1e3})}k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:0,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:2,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:0,max:2}),k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:1,options:[{value:0,label:""},{value:1,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:1,max:2}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:0,min:0,max:2}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:0,max:2});let V=await(await fetch(base$1+`/templates/templates2/${r}.js`)).text();const L={uuid:y,type:"system",name:r,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},parameters:new ParametersMap(k),joints:[],style:"",script:`function script_${y.replaceAll("-","_")} (glyph, constants, FP) {
	${V}
}`};addGlyph(L,Status.StrokeGlyphList),addGlyphTemplate(L,Status.StrokeGlyphList)}emitter.emit("renderStrokeGlyphPreviewCanvas")},importTemplate4=async()=>{for(let e=0;e<strokes.length;e++){loaded$1.value+=1;const n=strokes[e],{name:r,params:g}=n,y=genUUID(),k=[];for(let z=0;z<g.length;z++){const j=g[z];k.push({uuid:genUUID(),name:j.name,type:ParameterType.Number,value:j.default,min:j.min||0,max:j.max||1e3})}k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:0,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:2,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:0,max:2}),k.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:1,options:[{value:0,label:""},{value:1,label:""}]}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:1,max:2}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:0,min:0,max:2}),k.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:0,max:2});let V=await(await fetch(base$1+`/templates/stroke_template_1/${r}.js`)).text();const L={uuid:y,type:"system",name:r,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},parameters:new ParametersMap(k),joints:[],style:"test style 1",script:`function script_${y.replaceAll("-","_")} (glyph, constants, FP) {
	${V}
}`};addGlyph(L,Status.StrokeGlyphList),addGlyphTemplate(L,Status.StrokeGlyphList)}emitter.emit("renderStrokeGlyphPreviewCanvas")},importTemplate1=async()=>{if(files.value&&files.value.length)tips.value="",tipsDialogVisible.value=!0;else{router.currentRoute.value.name==="welcome"&&router.push("/editor");const e="",n={uuid:genUUID(),width:1e3,height:1e3,name:"",saved:!1,characterList:[],iconsCount:0,fontSettings:{unitsPerEm:1e3,ascender:800,descender:-200}};name_data.value=[{nameID:1,nameLabel:"fontFamily",platformID:3,encodingID:1,langID:2052,value:e,default:!0},{nameID:1,nameLabel:"fontFamily",platformID:3,encodingID:1,langID:1033,value:getEnName(e),default:!0},{nameID:2,nameLabel:"fontSubfamily",platformID:3,encodingID:1,langID:2052,value:"",default:!0},{nameID:2,nameLabel:"fontSubfamily",platformID:3,encodingID:1,langID:1033,value:"Regular",default:!0},{nameID:4,nameLabel:"fullName",platformID:3,encodingID:1,langID:2052,value:e+" ",default:!0},{nameID:4,nameLabel:"fullName",platformID:3,encodingID:1,langID:1033,value:getEnName(e)+" Regular",default:!0},{nameID:5,nameLabel:"version",platformID:3,encodingID:1,langID:2052,value:" 1.0",default:!0},{nameID:5,nameLabel:"version",platformID:3,encodingID:1,langID:1033,value:"Version 1.0",default:!0},{nameID:6,nameLabel:"postScriptName",platformID:3,encodingID:1,langID:2052,value:(getEnName(e)+"-Regular").replace(/\s/g,"").slice(0,63),default:!0},{nameID:6,nameLabel:"postScriptName",platformID:3,encodingID:1,langID:1033,value:(getEnName(e)+"-Regular").replace(/\s/g,"").slice(0,63),default:!0}],addFile(n),setSelectedFileUUID(n.uuid),setEditStatus(Status.CharacterList),total$1.value=0,loading$1.value=!0;let g=await(await fetch(base$1+"/templates/template1.json")).text();console.time("timer1");let y=await fetch(base$1+"/glyphs/stroke_glyphs_data_v7_v4.json"),k=await y.text();if(k){const L=JSON.parse(k);for(let ae=0;ae<L.constants.length;ae++)constantsMap.getByUUID(L.constants[ae].uuid)||constants.value.push(L.constants[ae]);L.glyphs.map(ae=>instanceGlyph(ae,{updateContoursAndPreview:!0,unitsPerEm:1e3,descender:-200,advanceWidth:1e3})).map(ae=>{addGlyph(ae,Status.StrokeGlyphList)})}if(y=await fetch(base$1+"/glyphs/radical_glyphs_data_v7_v5.json"),k=await y.text(),k){const L=JSON.parse(k);for(let ae=0;ae<L.constants.length;ae++)constantsMap.getByUUID(L.constants[ae].uuid)||constants.value.push(L.constants[ae]);L.glyphs.map(ae=>instanceGlyph(ae,{updateContoursAndPreview:!0,unitsPerEm:1e3,descender:-200,advanceWidth:1e3})).map(ae=>{addGlyph(ae,Status.RadicalGlyphList)})}if(y=await fetch(base$1+"/glyphs/comp_glyphs_data_v7_v4.json"),k=await y.text(),k){const L=JSON.parse(k);for(let ae=0;ae<L.constants.length;ae++)constantsMap.getByUUID(L.constants[ae].uuid)||constants.value.push(L.constants[ae]);L.glyphs.map(ae=>instanceGlyph(ae,{updateContoursAndPreview:!0,unitsPerEm:1e3,descender:-200,advanceWidth:1e3})).map(ae=>{addGlyph(ae,Status.CompGlyphList)})}console.timeEnd("timer1");let $=null;g&&($=JSON.parse(g));const V=$?$.template.length:0;if(total$1.value=V+(glyphs.value.length+stroke_glyphs.value.length+radical_glyphs.value.length+comp_glyphs.value.length)*2,loaded$1.value=0,$)for(let L=0;L<$.template.length;L++){loaded$1.value+=1;const z=$.template[L],j=parseLayout(z),ae=generateCharFile(j);addCharacterForCurrentFile(ae),addCharacterTemplate(generateCharacterTemplate(ae)),emitter.emit("renderPreviewCanvasByUUID",ae.uuid)}stroke_glyphs.value.map(L=>{addGlyphTemplate(L,Status.StrokeGlyphList)}),radical_glyphs.value.map(L=>{addGlyphTemplate(L,Status.RadicalGlyphList)}),comp_glyphs.value.map(L=>{addGlyphTemplate(L,Status.CompGlyphList)}),glyphs.value.map(L=>{addGlyphTemplate(L,Status.GlyphList)}),emitter.emit("renderPreviewCanvas"),emitter.emit("renderGlyphPreviewCanvas"),emitter.emit("renderStrokeGlyphPreviewCanvas"),emitter.emit("renderRadicalGlyphPreviewCanvas"),emitter.emit("renderCompGlyphPreviewCanvas")}},importTemplate3=async()=>{loaded$1.value=0,total$1.value=strokes.length,loading$1.value=!0;const e=[];for(let n=0;n<strokes.length;n++){const r=strokes[n],{name:g}=r,y=genUUID(),k={uuid:y,type:"system",name:g,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},parameters:new ParametersMap([]),joints:[],style:"",script:""};e.push({uuid:y,name:g}),addGlyph(k,Status.StrokeGlyphList),addGlyphTemplate(k,Status.StrokeGlyphList)}for(let n=0;n<e.length;n++){const{uuid:r,name:g}=e[n];try{const k=await(await fetch(`/strokes/${g}.png`)).blob();await new Promise(($,V)=>{const L=new Image,z=URL.createObjectURL(k);L.onload=()=>{maxError.value=5,thumbnail(z,L,1e3);const j=[];for(let ae=0;ae<curvesComponents.value.length;ae++){const re=curvesComponents.value[ae],oe=re.value.points;let ue=0,le=oe[0];for(let de=1;de<oe.length;de++){const he=oe[de];ue+=Math.sqrt(Math.pow(he.x-le.x,2)+Math.pow(he.y-le.y,2)),le=he}ue>200&&j.push(re)}addComponentsForGlyph(r,j),maxError.value=2,$(L)},L.onerror=V,L.src=z})}catch(y){throw console.error("Failed to fetch font image:",y),y}loaded$1.value++,loaded$1.value>=total$1.value&&(loading$1.value=!1,loaded$1.value=0,total$1.value=0)}for(let n=0;n<e.length;n++){const{uuid:r,name:g}=e[n],y=getGlyphByUUID(r),k=g,$={type:k,ox:0,oy:0,dynamicWeight:!1};y.skeleton=$;const V=strokes.find(z=>z.name===k);if(V){const z=y.parameters.parameters;for(let j=0;j<V.params.length;j++){const ae=V.params[j];z.push({uuid:genUUID(),name:ae.name,type:ParameterType.Number,value:ae.default,min:ae.min||0,max:ae.max||1e3})}z.push({uuid:genUUID(),name:"",type:ParameterType.Enum,value:0,options:[{value:0,label:""},{value:1,label:""},{value:2,label:""}]}),z.push({uuid:genUUID(),name:"",type:ParameterType.Number,value:1,min:0,max:2})}const L=strokeFnMap[k];L&&L.instanceBasicGlyph(y),L.bindSkeletonGlyph(y),L.updateSkeletonListenerAfterBind(y._o),emitter.emit("renderStrokeGlyphPreviewCanvasByUUID",r)}loading$1.value=!1},parseLayout=e=>{const{char:n,layout:r,data:g}=e;if(r===""){const y=g.indexOf(""),k=g.slice(2,y-1),$=g.slice(y+2,g.length-1);return{name:n,layout:r,left:parseData(k),right:parseData($)}}return{name:n,layout:r}},parseData=e=>{const n=e.split(","),r=n[0],g=Number(n[1]),y=Number(n[2]),k=Number(n[3]),$=Number(n[4]);return{glyph_name:r,x:g,y,w:k,h:$}},generateCharFile=e=>{const n={uuid:genUUID(),text:e.name,unicode:toUnicode(e.name),components:[]},r=genUUID(),g={uuid:r,type:"text",character:n,components:[],groups:[],orderedList:[],selectedComponentsUUIDs:[],view:{zoom:100,translateX:0,translateY:0},info:{gridSettings:{dx:0,dy:0,centerSquareSize:selectedFile.value.width/3,size:selectedFile.value.width,default:!0},useSkeletonGrid:!1,layout:"",layoutTree:[]},script:`function script_${r.replaceAll("-","_")} (character, constants, FP) {
	//Todo something
}`},y=generateComponent(e.left),k=generateComponent(e.right);return g.components.push(y),g.components.push(k),g.orderedList.push({type:"component",uuid:y.uuid}),g.orderedList.push({type:"component",uuid:k.uuid}),g},generateComponent=e=>{const n=getGlyphByName(e.glyph_name),r=clone(n);r.layout.params.width=e.w,r.layout.params.height=e.h;const g={uuid:genUUID(),type:"glyph",name:n.name+Date.now().toString().slice(9),lock:!1,visible:!0,value:r,ox:e.x-(1e3-e.w)/2,oy:e.y-(1e3-e.h)/2,usedInCharacter:!0};return executeScript(g.value),g},isAlreadyOptimized=e=>{if(e.length<=1)return!0;let n=!1;for(let r=0;r<e.length;r++){for(let g=r+1;g<e.length;g++){const y=e[r],k=e[g];let $=1/0,V=1/0,L=-1/0,z=-1/0,j=1/0,ae=1/0,re=-1/0,oe=-1/0;for(let ue=0;ue<y.length;ue++){const le=y[ue];$=Math.min($,le.start.x,le.end.x),V=Math.min(V,le.start.y,le.end.y),L=Math.max(L,le.start.x,le.end.x),z=Math.max(z,le.start.y,le.end.y)}for(let ue=0;ue<k.length;ue++){const le=k[ue];j=Math.min(j,le.start.x,le.end.x),ae=Math.min(ae,le.start.y,le.end.y),re=Math.max(re,le.start.x,le.end.x),oe=Math.max(oe,le.start.y,le.end.y)}if(L>=j&&re>=$&&z>=ae&&oe>=V){n=!0;break}}if(n)break}return!n},computeOverlapRemovedContours=async()=>{const{unitsPerEm:e,descender:n}=selectedFile.value.fontSettings;let r=0;const g=async()=>{if(r>=selectedFile.value.characterList.length)return;let y=selectedFile.value.characterList[r],k=componentsToContours(orderedListWithItemsForCharacterFile(y),{unitsPerEm:e,descender:n,advanceWidth:e},{x:0,y:0},!1,!1,!1);if(isAlreadyOptimized(k)){if(y.overlap_removed_contours=k,r++,loaded$1.value++,loaded$1.value>=total$1.value){loading$1.value=!1,loaded$1.value=0,total$1.value=0;return}return await new Promise(re=>setTimeout(re,0)),g()}let $=[];for(let re=0;re<k.length;re++){const oe=k[re];if(oe.length===0)continue;const ue=createOptimizedPath(oe);ue.closed||ue.closePath(),$.push(ue)}let V=null,L=!1,z=!1;for(let re=0;re<$.length;re++){const oe=$[re];if(!oe.area)continue;const ue=oe.area;Math.abs(ue)>1e-6&&(ue>0?z=!0:L=!0)}if(L&&z){const re=[],oe=[];for(let ue=0;ue<$.length;ue++){const le=$[ue];le.area&&(le.area>0?re.push(le):oe.push(le))}if(re.length===0)V=mergePathsWithPrecision($);else{V=re[0].clone();for(let ue=1;ue<re.length;ue++){const le=V.unite(re[ue]);le&&le.area&&Math.abs(le.area)>1e-6&&(V=le)}for(let ue=0;ue<oe.length;ue++){const le=V.exclude(oe[ue]);le&&le.area&&Math.abs(le.area)>1e-6&&(V=le)}(!V||!V.area||Math.abs(V.area)<1e-6)&&(V=mergePathsWithPrecision($))}}else V=mergePathsWithPrecision($);if(!V){if(r++,loaded$1.value++,loaded$1.value>=total$1.value){loading$1.value=!1,loaded$1.value=0,total$1.value=0;return}return await new Promise(re=>setTimeout(re,0)),g()}let j=[];const ae=re=>{const oe=[];if(re.children&&re.children.length>0){for(let ue=0;ue<re.children.length;ue++){const le=re.children[ue];if(le instanceof paper.Path){const de=ae(le);oe.push(...de)}}return oe}if(re.curves&&re.curves.length>0){const ue=[];for(let le=0;le<re.curves.length;le++){const de=re.curves[le];if(de.points.length>=4){const he={type:PathType.CUBIC_BEZIER,start:{x:de.points[0].x,y:de.points[0].y},control1:{x:de.points[1].x,y:de.points[1].y},control2:{x:de.points[2].x,y:de.points[2].y},end:{x:de.points[3].x,y:de.points[3].y}};ue.push(he)}}ue.length>0&&oe.push(ue)}return oe};if(j=ae(V),y.overlap_removed_contours=j,r++,loaded$1.value++,loaded$1.value>=total$1.value){loading$1.value=!1,loaded$1.value=0,total$1.value=0;return}if(r<selectedFile.value.characterList.length)return r%100===0&&await new Promise(re=>setTimeout(re,0)),g()};await g()},removeOverlap=async()=>{let e=editCharacterFile.value;editStatus.value===Status.Glyph&&(e=editGlyph.value),selectedFile.value.fontSettings;let n=componentsToContours2(orderedListWithItemsForCharacterFile(e),{x:0,y:0},!1,1);if(editStatus.value==Status.Glyph&&(n=componentsToContours2(e._o.components,{x:0,y:0},!0,1)),isAlreadyOptimized(n))return;let r=[];for(let V=0;V<n.length;V++){const L=n[V];if(L.length===0)continue;const z=createOptimizedPath(L);z.closed||z.closePath(),r.push(z)}let g=null,y=!1,k=!1;for(let V=0;V<r.length;V++){const L=r[V];if(!L.area)continue;const z=L.area;Math.abs(z)>1e-6&&(z>0?k=!0:y=!0)}if(y&&k){const V=[],L=[];for(let z=0;z<r.length;z++){const j=r[z];j.area&&(j.area>0?V.push(j):L.push(j))}if(V.length===0)g=mergePathsWithPrecision(r);else{g=V[0].clone();for(let z=1;z<V.length;z++){const j=g.unite(V[z]);j&&j.area&&Math.abs(j.area)>1e-6&&(g=j)}for(let z=0;z<L.length;z++){const j=g.exclude(L[z]);j&&j.area&&Math.abs(j.area)>1e-6&&(g=j)}(!g||!g.area||Math.abs(g.area)<1e-6)&&(g=mergePathsWithPrecision(r))}}else g=mergePathsWithPrecision(r);let $=[];if(g){const V=L=>{const z=[];if(L.children&&L.children.length>0){for(let j=0;j<L.children.length;j++){const ae=L.children[j];if(ae instanceof paper.Path){const re=V(ae);z.push(...re)}}return z}if(L.curves&&L.curves.length>0){let j=[];j.push({uuid:genUUID(),type:"anchor",x:L.curves[0].points[0].x,y:L.curves[0].points[0].y,origin:null,isShow:!0});for(let ae=0;ae<L.curves.length;ae++){const re=L.curves[ae];if(re.points.length>=4){const oe={uuid:genUUID(),type:"control",x:re.points[1].x,y:re.points[1].y,origin:j[j.length-1].uuid,isShow:!0},ue=genUUID(),le={uuid:genUUID(),type:"control",x:re.points[2].x,y:re.points[2].y,origin:ue,isShow:!0},de={uuid:ue,type:"anchor",x:re.points[3].x,y:re.points[3].y,origin:null,isShow:!0};j.push(oe,le,de)}}j.length>=3&&z.push(genPenComponent(j,!0))}return z};$=V(g)}if(editStatus.value===Status.Edit){editCharacterFile.value.script=`function script_${editCharacterFile.value.uuid.replaceAll("-","_")} (character, constants, FP) {
	//Todo something
}`,editCharacterFile.value.glyph_script=null,editCharacterFile.value.system_script=null,editCharacterFile.value.orderedList=[],editCharacterFile.value.components=[];for(let V=0;V<$.length;V++)addComponentForCurrentCharacterFile($[V]);emitter.emit("renderCharacter")}else if(editStatus.value===Status.Glyph){editGlyph.value.script=`function script_${editGlyph.value.uuid.replaceAll("-","_")} (glyph, constants, FP) {
	//Todo something
}`,editGlyph.value.glyph_script=null,editGlyph.value.system_script=null;for(let V=0;V<$.length;V++)addComponentForCurrentGlyph($[V]);emitter.emit("renderGlyph")}},openPlayground=()=>{if(window.__TAURI_INTERNALS__){const e={url:`${location.origin}${location.pathname}#/playground`,width:1280,height:800,x:(screen.width-1280)/2,y:(screen.height-800)/2},n=new WebviewWindow("glyph-script",e);n.once("tauri://created",async()=>{console.log("webview created")}),n.once("tauri://error",function(r){console.log("error creating webview",r)})}else window.open(`${location.origin}${location.pathname}#/playground`,"playground",`popup,width=1280,height=800,left=${(screen.width-1280)/2}`)},OVERLAP_REMOVAL_CONFIG={PATH_PRECISION:1e-6,TOLERANCE:1e-8,MAX_SUBDIVISIONS:10,CURVE_SUBDIVISION_THRESHOLD:.1,MERGE_TOLERANCE:1e-6},createOptimizedPath=e=>{const n=new paper.Path;if(e.length===0)return n;const r=new paper.Point(e[0].start.x,e[0].start.y);n.moveTo(r);for(let g=0;g<e.length;g++){const y=e[g];if(y.type===PathType.LINE){const k=y,$=new paper.Point(k.end.x,k.end.y);n.lineTo($)}else if(y.type===PathType.CUBIC_BEZIER){const k=y,$=new paper.Point(k.control1.x,k.control1.y),V=new paper.Point(k.control2.x,k.control2.y),L=new paper.Point(k.end.x,k.end.y);n.cubicCurveTo($,V,L)}else if(y.type===PathType.QUADRATIC_BEZIER){const k=y,$=new paper.Point(k.control.x,k.control.y),V=new paper.Point(k.end.x,k.end.y),L=r.multiply(1/3).add($.multiply(2/3)),z=V.multiply(1/3).add($.multiply(2/3));n.cubicCurveTo(L,z,V)}r.x=y.end.x,r.y=y.end.y}return n},mergePathsWithPrecision=e=>{if(e.length===0)return null;if(e.length===1)return e[0];paper.settings.precision=OVERLAP_REMOVAL_CONFIG.PATH_PRECISION;let n=e[0].clone();for(let r=1;r<e.length;r++){const g=e[r];n=n.unite(g)}return n},tauri_handlers={"create-file":createFile,"open-file":openFile_tauri,"save-file":saveFile_tauri,"save-as":saveAs_tauri,undo,redo,cut,copy,paste,delete:del,"import-font-file":importFont_tauri,"import-templates-file":importTemplates,"import-glyphs":importGlyphs_tauri,"import-pic":importPic_tauri,"import-svg":importSVG_tauri,"export-font-file":showExportFontDialog_tauri,"export-glyphs":exportGlyphs_tauri,"export-jpeg":exportJPEG_tauri,"export-png":exportPNG_tauri,"export-svg":exportSVG_tauri,"add-character":addCharacter,"add-icon":addIcon,"font-settings":fontSettings,"preference-settings":preferenceSettings,"language-settings":languageSettings,"template-1":importTemplate1,"template-2":importTemplate2,"template-3":importTemplate3,"template-4":importTemplate4,remove_overlap:removeOverlap},web_handlers={"create-file":createFile,"open-file":openFile,"save-file":saveFile_web,"clear-cache":clearCache,"sync-data":syncData,"save-as-json":exportJSON,undo,redo,cut,copy,paste,delete:del,"import-font-file":importFont,"import-templates-file":importTemplates,"import-glyphs":importGlyphs,"import-pic":importPic,"import-svg":importSVG,"export-font-file":showExportFontDialog,"export-glyphs":exportGlyphs,"export-jpeg":exportJPEG,"export-png":exportPNG,"export-svg":exportSVG,"add-character":addCharacter,"add-icon":addIcon,"font-settings":fontSettings,"preference-settings":preferenceSettings,"language-settings":languageSettings,"template-1":importTemplate1,"template-2":importTemplate2,"template-3":importTemplate3,"template-4":importTemplate4,remove_overlap:removeOverlap},editStatusToString=e=>editStatus.value===Status.Edit?"edit":editStatus.value===Status.Glyph?"glyph":editStatus.value===Status.Pic?"pic":"list";watch(editStatus,()=>{ENV.value==="tauri"&&invoke("toggle_menu_disabled",{editStatus:editStatusToString(editStatus.value)})});const initTauri=()=>{if(window.__TAURI_INTERNALS__){ENV.value="tauri";const e=Object.keys(tauri_handlers);for(let n=0;n<e.length;n++){const r=e[n];listen(r,g=>{tauri_handlers[r]()})}}},_sfc_main=defineComponent({__name:"App",setup(e){initTauri();let n=document.createElement("canvas");return paper.setup(n),(r,g)=>(openBlock(),createBlock(unref(RouterView)))}});function ownKeys$1(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);n&&(g=g.filter(function(y){return Object.getOwnPropertyDescriptor(e,y).enumerable})),r.push.apply(r,g)}return r}function _objectSpread2$1(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$1(Object(r),!0).forEach(function(g){_defineProperty$1(e,g,r[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach(function(g){Object.defineProperty(e,g,Object.getOwnPropertyDescriptor(r,g))})}return e}function _typeof$1(e){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$1(e)}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var r=0;r<n.length;r++){var g=n[r];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(e,g.key,g)}}function _createClass(e,n,r){return n&&_defineProperties(e.prototype,n),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty$1(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function _slicedToArray(e,n){return _arrayWithHoles(e)||_iterableToArrayLimit(e,n)||_unsupportedIterableToArray(e,n)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _iterableToArrayLimit(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var g=[],y=!0,k=!1,$,V;try{for(r=r.call(e);!(y=($=r.next()).done)&&(g.push($.value),!(n&&g.length===n));y=!0);}catch(L){k=!0,V=L}finally{try{!y&&r.return!=null&&r.return()}finally{if(k)throw V}}return g}}function _unsupportedIterableToArray(e,n){if(e){if(typeof e=="string")return _arrayLikeToArray(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,n)}}function _arrayLikeToArray(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,g=new Array(n);r<n;r++)g[r]=e[r];return g}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var noop=function e(){},_WINDOW={},_DOCUMENT={},_MUTATION_OBSERVER=null,_PERFORMANCE={mark:noop,measure:noop};try{typeof window<"u"&&(_WINDOW=window),typeof document<"u"&&(_DOCUMENT=document),typeof MutationObserver<"u"&&(_MUTATION_OBSERVER=MutationObserver),typeof performance<"u"&&(_PERFORMANCE=performance)}catch(e){}var _ref=_WINDOW.navigator||{},_ref$userAgent=_ref.userAgent,userAgent=_ref$userAgent===void 0?"":_ref$userAgent,WINDOW=_WINDOW,DOCUMENT=_DOCUMENT,MUTATION_OBSERVER=_MUTATION_OBSERVER,PERFORMANCE=_PERFORMANCE;WINDOW.document;var IS_DOM=!!DOCUMENT.documentElement&&!!DOCUMENT.head&&typeof DOCUMENT.addEventListener=="function"&&typeof DOCUMENT.createElement=="function",IS_IE=~userAgent.indexOf("MSIE")||~userAgent.indexOf("Trident/"),_familyProxy,_familyProxy2,_familyProxy3,_familyProxy4,_familyProxy5,NAMESPACE_IDENTIFIER="___FONT_AWESOME___",UNITS_IN_GRID=16,DEFAULT_CSS_PREFIX="fa",DEFAULT_REPLACEMENT_CLASS="svg-inline--fa",DATA_FA_I2SVG="data-fa-i2svg",DATA_FA_PSEUDO_ELEMENT="data-fa-pseudo-element",DATA_FA_PSEUDO_ELEMENT_PENDING="data-fa-pseudo-element-pending",DATA_PREFIX="data-prefix",DATA_ICON="data-icon",HTML_CLASS_I2SVG_BASE_CLASS="fontawesome-i2svg",MUTATION_APPROACH_ASYNC="async",TAGNAMES_TO_SKIP_FOR_PSEUDOELEMENTS=["HTML","HEAD","STYLE","SCRIPT"],PRODUCTION$1=function(){try{return!0}catch{return!1}}(),FAMILY_CLASSIC="classic",FAMILY_SHARP="sharp",FAMILIES=[FAMILY_CLASSIC,FAMILY_SHARP];function familyProxy(e){return new Proxy(e,{get:function(r,g){return g in r?r[g]:r[FAMILY_CLASSIC]}})}var PREFIX_TO_STYLE=familyProxy((_familyProxy={},_defineProperty$1(_familyProxy,FAMILY_CLASSIC,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),_defineProperty$1(_familyProxy,FAMILY_SHARP,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light"}),_familyProxy)),STYLE_TO_PREFIX=familyProxy((_familyProxy2={},_defineProperty$1(_familyProxy2,FAMILY_CLASSIC,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),_defineProperty$1(_familyProxy2,FAMILY_SHARP,{solid:"fass",regular:"fasr",light:"fasl"}),_familyProxy2)),PREFIX_TO_LONG_STYLE=familyProxy((_familyProxy3={},_defineProperty$1(_familyProxy3,FAMILY_CLASSIC,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),_defineProperty$1(_familyProxy3,FAMILY_SHARP,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light"}),_familyProxy3)),LONG_STYLE_TO_PREFIX=familyProxy((_familyProxy4={},_defineProperty$1(_familyProxy4,FAMILY_CLASSIC,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),_defineProperty$1(_familyProxy4,FAMILY_SHARP,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl"}),_familyProxy4)),ICON_SELECTION_SYNTAX_PATTERN=/fa(s|r|l|t|d|b|k|ss|sr|sl)?[\-\ ]/,LAYERS_TEXT_CLASSNAME="fa-layers-text",FONT_FAMILY_PATTERN=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,FONT_WEIGHT_TO_PREFIX=familyProxy((_familyProxy5={},_defineProperty$1(_familyProxy5,FAMILY_CLASSIC,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),_defineProperty$1(_familyProxy5,FAMILY_SHARP,{900:"fass",400:"fasr",300:"fasl"}),_familyProxy5)),oneToTen=[1,2,3,4,5,6,7,8,9,10],oneToTwenty=oneToTen.concat([11,12,13,14,15,16,17,18,19,20]),ATTRIBUTES_WATCHED_FOR_MUTATION=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],DUOTONE_CLASSES={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},prefixes=new Set;Object.keys(STYLE_TO_PREFIX[FAMILY_CLASSIC]).map(prefixes.add.bind(prefixes));Object.keys(STYLE_TO_PREFIX[FAMILY_SHARP]).map(prefixes.add.bind(prefixes));var RESERVED_CLASSES=[].concat(FAMILIES,_toConsumableArray(prefixes),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",DUOTONE_CLASSES.GROUP,DUOTONE_CLASSES.SWAP_OPACITY,DUOTONE_CLASSES.PRIMARY,DUOTONE_CLASSES.SECONDARY]).concat(oneToTen.map(function(e){return"".concat(e,"x")})).concat(oneToTwenty.map(function(e){return"w-".concat(e)})),initial=WINDOW.FontAwesomeConfig||{};function getAttrConfig(e){var n=DOCUMENT.querySelector("script["+e+"]");if(n)return n.getAttribute(e)}function coerce(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(DOCUMENT&&typeof DOCUMENT.querySelector=="function"){var attrs=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];attrs.forEach(function(e){var n=_slicedToArray(e,2),r=n[0],g=n[1],y=coerce(getAttrConfig(r));y!=null&&(initial[g]=y)})}var _default={styleDefault:"solid",familyDefault:"classic",cssPrefix:DEFAULT_CSS_PREFIX,replacementClass:DEFAULT_REPLACEMENT_CLASS,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};initial.familyPrefix&&(initial.cssPrefix=initial.familyPrefix);var _config=_objectSpread2$1(_objectSpread2$1({},_default),initial);_config.autoReplaceSvg||(_config.observeMutations=!1);var config={};Object.keys(_default).forEach(function(e){Object.defineProperty(config,e,{enumerable:!0,set:function(r){_config[e]=r,_onChangeCb.forEach(function(g){return g(config)})},get:function(){return _config[e]}})});Object.defineProperty(config,"familyPrefix",{enumerable:!0,set:function e(n){_config.cssPrefix=n,_onChangeCb.forEach(function(r){return r(config)})},get:function e(){return _config.cssPrefix}});WINDOW.FontAwesomeConfig=config;var _onChangeCb=[];function onChange(e){return _onChangeCb.push(e),function(){_onChangeCb.splice(_onChangeCb.indexOf(e),1)}}var d=UNITS_IN_GRID,meaninglessTransform={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function insertCss(e){if(!(!e||!IS_DOM)){var n=DOCUMENT.createElement("style");n.setAttribute("type","text/css"),n.innerHTML=e;for(var r=DOCUMENT.head.childNodes,g=null,y=r.length-1;y>-1;y--){var k=r[y],$=(k.tagName||"").toUpperCase();["STYLE","LINK"].indexOf($)>-1&&(g=k)}return DOCUMENT.head.insertBefore(n,g),e}}var idPool="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function nextUniqueId(){for(var e=12,n="";e-- >0;)n+=idPool[Math.random()*62|0];return n}function toArray(e){for(var n=[],r=(e||[]).length>>>0;r--;)n[r]=e[r];return n}function classArray(e){return e.classList?toArray(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(n){return n})}function htmlEscape(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function joinAttributes(e){return Object.keys(e||{}).reduce(function(n,r){return n+"".concat(r,'="').concat(htmlEscape(e[r]),'" ')},"").trim()}function joinStyles(e){return Object.keys(e||{}).reduce(function(n,r){return n+"".concat(r,": ").concat(e[r].trim(),";")},"")}function transformIsMeaningful(e){return e.size!==meaninglessTransform.size||e.x!==meaninglessTransform.x||e.y!==meaninglessTransform.y||e.rotate!==meaninglessTransform.rotate||e.flipX||e.flipY}function transformForSvg(e){var n=e.transform,r=e.containerWidth,g=e.iconWidth,y={transform:"translate(".concat(r/2," 256)")},k="translate(".concat(n.x*32,", ").concat(n.y*32,") "),$="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),V="rotate(".concat(n.rotate," 0 0)"),L={transform:"".concat(k," ").concat($," ").concat(V)},z={transform:"translate(".concat(g/2*-1," -256)")};return{outer:y,inner:L,path:z}}function transformForCss(e){var n=e.transform,r=e.width,g=r===void 0?UNITS_IN_GRID:r,y=e.height,k=y===void 0?UNITS_IN_GRID:y,$=e.startCentered,V=$===void 0?!1:$,L="";return V&&IS_IE?L+="translate(".concat(n.x/d-g/2,"em, ").concat(n.y/d-k/2,"em) "):V?L+="translate(calc(-50% + ".concat(n.x/d,"em), calc(-50% + ").concat(n.y/d,"em)) "):L+="translate(".concat(n.x/d,"em, ").concat(n.y/d,"em) "),L+="scale(".concat(n.size/d*(n.flipX?-1:1),", ").concat(n.size/d*(n.flipY?-1:1),") "),L+="rotate(".concat(n.rotate,"deg) "),L}var baseStyles=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function css(){var e=DEFAULT_CSS_PREFIX,n=DEFAULT_REPLACEMENT_CLASS,r=config.cssPrefix,g=config.replacementClass,y=baseStyles;if(r!==e||g!==n){var k=new RegExp("\\.".concat(e,"\\-"),"g"),$=new RegExp("\\--".concat(e,"\\-"),"g"),V=new RegExp("\\.".concat(n),"g");y=y.replace(k,".".concat(r,"-")).replace($,"--".concat(r,"-")).replace(V,".".concat(g))}return y}var _cssInserted=!1;function ensureCss(){config.autoAddCss&&!_cssInserted&&(insertCss(css()),_cssInserted=!0)}var InjectCSS={mixout:function e(){return{dom:{css,insertCss:ensureCss}}},hooks:function e(){return{beforeDOMElementCreation:function(){ensureCss()},beforeI2svg:function(){ensureCss()}}}},w=WINDOW||{};w[NAMESPACE_IDENTIFIER]||(w[NAMESPACE_IDENTIFIER]={});w[NAMESPACE_IDENTIFIER].styles||(w[NAMESPACE_IDENTIFIER].styles={});w[NAMESPACE_IDENTIFIER].hooks||(w[NAMESPACE_IDENTIFIER].hooks={});w[NAMESPACE_IDENTIFIER].shims||(w[NAMESPACE_IDENTIFIER].shims=[]);var namespace=w[NAMESPACE_IDENTIFIER],functions=[],listener=function e(){DOCUMENT.removeEventListener("DOMContentLoaded",e),loaded=1,functions.map(function(n){return n()})},loaded=!1;IS_DOM&&(loaded=(DOCUMENT.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(DOCUMENT.readyState),loaded||DOCUMENT.addEventListener("DOMContentLoaded",listener));function domready(e){IS_DOM&&(loaded?setTimeout(e,0):functions.push(e))}function toHtml(e){var n=e.tag,r=e.attributes,g=r===void 0?{}:r,y=e.children,k=y===void 0?[]:y;return typeof e=="string"?htmlEscape(e):"<".concat(n," ").concat(joinAttributes(g),">").concat(k.map(toHtml).join(""),"</").concat(n,">")}function iconFromMapping(e,n,r){if(e&&e[n]&&e[n][r])return{prefix:n,iconName:r,icon:e[n][r]}}var bindInternal4=function e(n,r){return function(g,y,k,$){return n.call(r,g,y,k,$)}},reduce=function e(n,r,g,y){var k=Object.keys(n),$=k.length,V=y!==void 0?bindInternal4(r,y):r,L,z,j;for(g===void 0?(L=1,j=n[k[0]]):(L=0,j=g);L<$;L++)z=k[L],j=V(j,n[z],z,n);return j};function ucs2decode(e){for(var n=[],r=0,g=e.length;r<g;){var y=e.charCodeAt(r++);if(y>=55296&&y<=56319&&r<g){var k=e.charCodeAt(r++);(k&64512)==56320?n.push(((y&1023)<<10)+(k&1023)+65536):(n.push(y),r--)}else n.push(y)}return n}function toHex(e){var n=ucs2decode(e);return n.length===1?n[0].toString(16):null}function codePointAt(e,n){var r=e.length,g=e.charCodeAt(n),y;return g>=55296&&g<=56319&&r>n+1&&(y=e.charCodeAt(n+1),y>=56320&&y<=57343)?(g-55296)*1024+y-56320+65536:g}function normalizeIcons(e){return Object.keys(e).reduce(function(n,r){var g=e[r],y=!!g.icon;return y?n[g.iconName]=g.icon:n[r]=g,n},{})}function defineIcons(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},g=r.skipHooks,y=g===void 0?!1:g,k=normalizeIcons(n);typeof namespace.hooks.addPack=="function"&&!y?namespace.hooks.addPack(e,normalizeIcons(n)):namespace.styles[e]=_objectSpread2$1(_objectSpread2$1({},namespace.styles[e]||{}),k),e==="fas"&&defineIcons("fa",n)}var _LONG_STYLE,_PREFIXES,_PREFIXES_FOR_FAMILY,styles=namespace.styles,shims=namespace.shims,LONG_STYLE=(_LONG_STYLE={},_defineProperty$1(_LONG_STYLE,FAMILY_CLASSIC,Object.values(PREFIX_TO_LONG_STYLE[FAMILY_CLASSIC])),_defineProperty$1(_LONG_STYLE,FAMILY_SHARP,Object.values(PREFIX_TO_LONG_STYLE[FAMILY_SHARP])),_LONG_STYLE),_defaultUsablePrefix=null,_byUnicode={},_byLigature={},_byOldName={},_byOldUnicode={},_byAlias={},PREFIXES=(_PREFIXES={},_defineProperty$1(_PREFIXES,FAMILY_CLASSIC,Object.keys(PREFIX_TO_STYLE[FAMILY_CLASSIC])),_defineProperty$1(_PREFIXES,FAMILY_SHARP,Object.keys(PREFIX_TO_STYLE[FAMILY_SHARP])),_PREFIXES);function isReserved(e){return~RESERVED_CLASSES.indexOf(e)}function getIconName(e,n){var r=n.split("-"),g=r[0],y=r.slice(1).join("-");return g===e&&y!==""&&!isReserved(y)?y:null}var build=function e(){var n=function(k){return reduce(styles,function($,V,L){return $[L]=reduce(V,k,{}),$},{})};_byUnicode=n(function(y,k,$){if(k[3]&&(y[k[3]]=$),k[2]){var V=k[2].filter(function(L){return typeof L=="number"});V.forEach(function(L){y[L.toString(16)]=$})}return y}),_byLigature=n(function(y,k,$){if(y[$]=$,k[2]){var V=k[2].filter(function(L){return typeof L=="string"});V.forEach(function(L){y[L]=$})}return y}),_byAlias=n(function(y,k,$){var V=k[2];return y[$]=$,V.forEach(function(L){y[L]=$}),y});var r="far"in styles||config.autoFetchSvg,g=reduce(shims,function(y,k){var $=k[0],V=k[1],L=k[2];return V==="far"&&!r&&(V="fas"),typeof $=="string"&&(y.names[$]={prefix:V,iconName:L}),typeof $=="number"&&(y.unicodes[$.toString(16)]={prefix:V,iconName:L}),y},{names:{},unicodes:{}});_byOldName=g.names,_byOldUnicode=g.unicodes,_defaultUsablePrefix=getCanonicalPrefix(config.styleDefault,{family:config.familyDefault})};onChange(function(e){_defaultUsablePrefix=getCanonicalPrefix(e.styleDefault,{family:config.familyDefault})});build();function byUnicode(e,n){return(_byUnicode[e]||{})[n]}function byLigature(e,n){return(_byLigature[e]||{})[n]}function byAlias(e,n){return(_byAlias[e]||{})[n]}function byOldName(e){return _byOldName[e]||{prefix:null,iconName:null}}function byOldUnicode(e){var n=_byOldUnicode[e],r=byUnicode("fas",e);return n||(r?{prefix:"fas",iconName:r}:null)||{prefix:null,iconName:null}}function getDefaultUsablePrefix(){return _defaultUsablePrefix}var emptyCanonicalIcon=function e(){return{prefix:null,iconName:null,rest:[]}};function getCanonicalPrefix(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.family,g=r===void 0?FAMILY_CLASSIC:r,y=PREFIX_TO_STYLE[g][e],k=STYLE_TO_PREFIX[g][e]||STYLE_TO_PREFIX[g][y],$=e in namespace.styles?e:null;return k||$||null}var PREFIXES_FOR_FAMILY=(_PREFIXES_FOR_FAMILY={},_defineProperty$1(_PREFIXES_FOR_FAMILY,FAMILY_CLASSIC,Object.keys(PREFIX_TO_LONG_STYLE[FAMILY_CLASSIC])),_defineProperty$1(_PREFIXES_FOR_FAMILY,FAMILY_SHARP,Object.keys(PREFIX_TO_LONG_STYLE[FAMILY_SHARP])),_PREFIXES_FOR_FAMILY);function getCanonicalIcon(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=r.skipLookups,y=g===void 0?!1:g,k=(n={},_defineProperty$1(n,FAMILY_CLASSIC,"".concat(config.cssPrefix,"-").concat(FAMILY_CLASSIC)),_defineProperty$1(n,FAMILY_SHARP,"".concat(config.cssPrefix,"-").concat(FAMILY_SHARP)),n),$=null,V=FAMILY_CLASSIC;(e.includes(k[FAMILY_CLASSIC])||e.some(function(z){return PREFIXES_FOR_FAMILY[FAMILY_CLASSIC].includes(z)}))&&(V=FAMILY_CLASSIC),(e.includes(k[FAMILY_SHARP])||e.some(function(z){return PREFIXES_FOR_FAMILY[FAMILY_SHARP].includes(z)}))&&(V=FAMILY_SHARP);var L=e.reduce(function(z,j){var ae=getIconName(config.cssPrefix,j);if(styles[j]?(j=LONG_STYLE[V].includes(j)?LONG_STYLE_TO_PREFIX[V][j]:j,$=j,z.prefix=j):PREFIXES[V].indexOf(j)>-1?($=j,z.prefix=getCanonicalPrefix(j,{family:V})):ae?z.iconName=ae:j!==config.replacementClass&&j!==k[FAMILY_CLASSIC]&&j!==k[FAMILY_SHARP]&&z.rest.push(j),!y&&z.prefix&&z.iconName){var re=$==="fa"?byOldName(z.iconName):{},oe=byAlias(z.prefix,z.iconName);re.prefix&&($=null),z.iconName=re.iconName||oe||z.iconName,z.prefix=re.prefix||z.prefix,z.prefix==="far"&&!styles.far&&styles.fas&&!config.autoFetchSvg&&(z.prefix="fas")}return z},emptyCanonicalIcon());return(e.includes("fa-brands")||e.includes("fab"))&&(L.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(L.prefix="fad"),!L.prefix&&V===FAMILY_SHARP&&(styles.fass||config.autoFetchSvg)&&(L.prefix="fass",L.iconName=byAlias(L.prefix,L.iconName)||L.iconName),(L.prefix==="fa"||$==="fa")&&(L.prefix=getDefaultUsablePrefix()||"fas"),L}var Library=function(){function e(){_classCallCheck(this,e),this.definitions={}}return _createClass(e,[{key:"add",value:function(){for(var r=this,g=arguments.length,y=new Array(g),k=0;k<g;k++)y[k]=arguments[k];var $=y.reduce(this._pullDefinitions,{});Object.keys($).forEach(function(V){r.definitions[V]=_objectSpread2$1(_objectSpread2$1({},r.definitions[V]||{}),$[V]),defineIcons(V,$[V]);var L=PREFIX_TO_LONG_STYLE[FAMILY_CLASSIC][V];L&&defineIcons(L,$[V]),build()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(r,g){var y=g.prefix&&g.iconName&&g.icon?{0:g}:g;return Object.keys(y).map(function(k){var $=y[k],V=$.prefix,L=$.iconName,z=$.icon,j=z[2];r[V]||(r[V]={}),j.length>0&&j.forEach(function(ae){typeof ae=="string"&&(r[V][ae]=z)}),r[V][L]=z}),r}}]),e}(),_plugins=[],_hooks={},providers={},defaultProviderKeys=Object.keys(providers);function registerPlugins(e,n){var r=n.mixoutsTo;return _plugins=e,_hooks={},Object.keys(providers).forEach(function(g){defaultProviderKeys.indexOf(g)===-1&&delete providers[g]}),_plugins.forEach(function(g){var y=g.mixout?g.mixout():{};if(Object.keys(y).forEach(function($){typeof y[$]=="function"&&(r[$]=y[$]),_typeof$1(y[$])==="object"&&Object.keys(y[$]).forEach(function(V){r[$]||(r[$]={}),r[$][V]=y[$][V]})}),g.hooks){var k=g.hooks();Object.keys(k).forEach(function($){_hooks[$]||(_hooks[$]=[]),_hooks[$].push(k[$])})}g.provides&&g.provides(providers)}),r}function chainHooks(e,n){for(var r=arguments.length,g=new Array(r>2?r-2:0),y=2;y<r;y++)g[y-2]=arguments[y];var k=_hooks[e]||[];return k.forEach(function($){n=$.apply(null,[n].concat(g))}),n}function callHooks(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),g=1;g<n;g++)r[g-1]=arguments[g];var y=_hooks[e]||[];y.forEach(function(k){k.apply(null,r)})}function callProvided(){var e=arguments[0],n=Array.prototype.slice.call(arguments,1);return providers[e]?providers[e].apply(null,n):void 0}function findIconDefinition(e){e.prefix==="fa"&&(e.prefix="fas");var n=e.iconName,r=e.prefix||getDefaultUsablePrefix();if(n)return n=byAlias(r,n)||n,iconFromMapping(library.definitions,r,n)||iconFromMapping(namespace.styles,r,n)}var library=new Library,noAuto=function e(){config.autoReplaceSvg=!1,config.observeMutations=!1,callHooks("noAuto")},dom={i2svg:function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return IS_DOM?(callHooks("beforeI2svg",n),callProvided("pseudoElements2svg",n),callProvided("i2svg",n)):Promise.reject("Operation requires a DOM of some kind.")},watch:function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.autoReplaceSvgRoot;config.autoReplaceSvg===!1&&(config.autoReplaceSvg=!0),config.observeMutations=!0,domready(function(){autoReplace({autoReplaceSvgRoot:r}),callHooks("watch",n)})}},parse={icon:function e(n){if(n===null)return null;if(_typeof$1(n)==="object"&&n.prefix&&n.iconName)return{prefix:n.prefix,iconName:byAlias(n.prefix,n.iconName)||n.iconName};if(Array.isArray(n)&&n.length===2){var r=n[1].indexOf("fa-")===0?n[1].slice(3):n[1],g=getCanonicalPrefix(n[0]);return{prefix:g,iconName:byAlias(g,r)||r}}if(typeof n=="string"&&(n.indexOf("".concat(config.cssPrefix,"-"))>-1||n.match(ICON_SELECTION_SYNTAX_PATTERN))){var y=getCanonicalIcon(n.split(" "),{skipLookups:!0});return{prefix:y.prefix||getDefaultUsablePrefix(),iconName:byAlias(y.prefix,y.iconName)||y.iconName}}if(typeof n=="string"){var k=getDefaultUsablePrefix();return{prefix:k,iconName:byAlias(k,n)||n}}}},api={noAuto,config,dom,parse,library,findIconDefinition,toHtml},autoReplace=function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.autoReplaceSvgRoot,g=r===void 0?DOCUMENT:r;(Object.keys(namespace.styles).length>0||config.autoFetchSvg)&&IS_DOM&&config.autoReplaceSvg&&api.dom.i2svg({node:g})};function domVariants(e,n){return Object.defineProperty(e,"abstract",{get:n}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(g){return toHtml(g)})}}),Object.defineProperty(e,"node",{get:function(){if(IS_DOM){var g=DOCUMENT.createElement("div");return g.innerHTML=e.html,g.children}}}),e}function asIcon(e){var n=e.children,r=e.main,g=e.mask,y=e.attributes,k=e.styles,$=e.transform;if(transformIsMeaningful($)&&r.found&&!g.found){var V=r.width,L=r.height,z={x:V/L/2,y:.5};y.style=joinStyles(_objectSpread2$1(_objectSpread2$1({},k),{},{"transform-origin":"".concat(z.x+$.x/16,"em ").concat(z.y+$.y/16,"em")}))}return[{tag:"svg",attributes:y,children:n}]}function asSymbol(e){var n=e.prefix,r=e.iconName,g=e.children,y=e.attributes,k=e.symbol,$=k===!0?"".concat(n,"-").concat(config.cssPrefix,"-").concat(r):k;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:_objectSpread2$1(_objectSpread2$1({},y),{},{id:$}),children:g}]}]}function makeInlineSvgAbstract(e){var n=e.icons,r=n.main,g=n.mask,y=e.prefix,k=e.iconName,$=e.transform,V=e.symbol,L=e.title,z=e.maskId,j=e.titleId,ae=e.extra,re=e.watchable,oe=re===void 0?!1:re,ue=g.found?g:r,le=ue.width,de=ue.height,he=y==="fak",_e=[config.replacementClass,k?"".concat(config.cssPrefix,"-").concat(k):""].filter(function(qe){return ae.classes.indexOf(qe)===-1}).filter(function(qe){return qe!==""||!!qe}).concat(ae.classes).join(" "),Ce={children:[],attributes:_objectSpread2$1(_objectSpread2$1({},ae.attributes),{},{"data-prefix":y,"data-icon":k,class:_e,role:ae.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(le," ").concat(de)})},Ne=he&&!~ae.classes.indexOf("fa-fw")?{width:"".concat(le/de*16*.0625,"em")}:{};oe&&(Ce.attributes[DATA_FA_I2SVG]=""),L&&(Ce.children.push({tag:"title",attributes:{id:Ce.attributes["aria-labelledby"]||"title-".concat(j||nextUniqueId())},children:[L]}),delete Ce.attributes.title);var $e=_objectSpread2$1(_objectSpread2$1({},Ce),{},{prefix:y,iconName:k,main:r,mask:g,maskId:z,transform:$,symbol:V,styles:_objectSpread2$1(_objectSpread2$1({},Ne),ae.styles)}),xe=g.found&&r.found?callProvided("generateAbstractMask",$e)||{children:[],attributes:{}}:callProvided("generateAbstractIcon",$e)||{children:[],attributes:{}},Ie=xe.children,ze=xe.attributes;return $e.children=Ie,$e.attributes=ze,V?asSymbol($e):asIcon($e)}function makeLayersTextAbstract(e){var n=e.content,r=e.width,g=e.height,y=e.transform,k=e.title,$=e.extra,V=e.watchable,L=V===void 0?!1:V,z=_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},$.attributes),k?{title:k}:{}),{},{class:$.classes.join(" ")});L&&(z[DATA_FA_I2SVG]="");var j=_objectSpread2$1({},$.styles);transformIsMeaningful(y)&&(j.transform=transformForCss({transform:y,startCentered:!0,width:r,height:g}),j["-webkit-transform"]=j.transform);var ae=joinStyles(j);ae.length>0&&(z.style=ae);var re=[];return re.push({tag:"span",attributes:z,children:[n]}),k&&re.push({tag:"span",attributes:{class:"sr-only"},children:[k]}),re}function makeLayersCounterAbstract(e){var n=e.content,r=e.title,g=e.extra,y=_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},g.attributes),r?{title:r}:{}),{},{class:g.classes.join(" ")}),k=joinStyles(g.styles);k.length>0&&(y.style=k);var $=[];return $.push({tag:"span",attributes:y,children:[n]}),r&&$.push({tag:"span",attributes:{class:"sr-only"},children:[r]}),$}var styles$1=namespace.styles;function asFoundIcon(e){var n=e[0],r=e[1],g=e.slice(4),y=_slicedToArray(g,1),k=y[0],$=null;return Array.isArray(k)?$={tag:"g",attributes:{class:"".concat(config.cssPrefix,"-").concat(DUOTONE_CLASSES.GROUP)},children:[{tag:"path",attributes:{class:"".concat(config.cssPrefix,"-").concat(DUOTONE_CLASSES.SECONDARY),fill:"currentColor",d:k[0]}},{tag:"path",attributes:{class:"".concat(config.cssPrefix,"-").concat(DUOTONE_CLASSES.PRIMARY),fill:"currentColor",d:k[1]}}]}:$={tag:"path",attributes:{fill:"currentColor",d:k}},{found:!0,width:n,height:r,icon:$}}var missingIconResolutionMixin={found:!1,width:512,height:512};function maybeNotifyMissing(e,n){!PRODUCTION$1&&!config.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(n,'" is missing.'))}function findIcon(e,n){var r=n;return n==="fa"&&config.styleDefault!==null&&(n=getDefaultUsablePrefix()),new Promise(function(g,y){if(callProvided("missingIconAbstract"),r==="fa"){var k=byOldName(e)||{};e=k.iconName||e,n=k.prefix||n}if(e&&n&&styles$1[n]&&styles$1[n][e]){var $=styles$1[n][e];return g(asFoundIcon($))}maybeNotifyMissing(e,n),g(_objectSpread2$1(_objectSpread2$1({},missingIconResolutionMixin),{},{icon:config.showMissingIcons&&e?callProvided("missingIconAbstract")||{}:{}}))})}var noop$1=function e(){},p=config.measurePerformance&&PERFORMANCE&&PERFORMANCE.mark&&PERFORMANCE.measure?PERFORMANCE:{mark:noop$1,measure:noop$1},preamble='FA "6.4.2"',begin=function e(n){return p.mark("".concat(preamble," ").concat(n," begins")),function(){return end(n)}},end=function e(n){p.mark("".concat(preamble," ").concat(n," ends")),p.measure("".concat(preamble," ").concat(n),"".concat(preamble," ").concat(n," begins"),"".concat(preamble," ").concat(n," ends"))},perf={begin,end},noop$2=function e(){};function isWatched(e){var n=e.getAttribute?e.getAttribute(DATA_FA_I2SVG):null;return typeof n=="string"}function hasPrefixAndIcon(e){var n=e.getAttribute?e.getAttribute(DATA_PREFIX):null,r=e.getAttribute?e.getAttribute(DATA_ICON):null;return n&&r}function hasBeenReplaced(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(config.replacementClass)}function getMutator(){if(config.autoReplaceSvg===!0)return mutators.replace;var e=mutators[config.autoReplaceSvg];return e||mutators.replace}function createElementNS(e){return DOCUMENT.createElementNS("http://www.w3.org/2000/svg",e)}function createElement(e){return DOCUMENT.createElement(e)}function convertSVG(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.ceFn,g=r===void 0?e.tag==="svg"?createElementNS:createElement:r;if(typeof e=="string")return DOCUMENT.createTextNode(e);var y=g(e.tag);Object.keys(e.attributes||[]).forEach(function($){y.setAttribute($,e.attributes[$])});var k=e.children||[];return k.forEach(function($){y.appendChild(convertSVG($,{ceFn:g}))}),y}function nodeAsComment(e){var n=" ".concat(e.outerHTML," ");return n="".concat(n,"Font Awesome fontawesome.com "),n}var mutators={replace:function e(n){var r=n[0];if(r.parentNode)if(n[1].forEach(function(y){r.parentNode.insertBefore(convertSVG(y),r)}),r.getAttribute(DATA_FA_I2SVG)===null&&config.keepOriginalSource){var g=DOCUMENT.createComment(nodeAsComment(r));r.parentNode.replaceChild(g,r)}else r.remove()},nest:function e(n){var r=n[0],g=n[1];if(~classArray(r).indexOf(config.replacementClass))return mutators.replace(n);var y=new RegExp("".concat(config.cssPrefix,"-.*"));if(delete g[0].attributes.id,g[0].attributes.class){var k=g[0].attributes.class.split(" ").reduce(function(V,L){return L===config.replacementClass||L.match(y)?V.toSvg.push(L):V.toNode.push(L),V},{toNode:[],toSvg:[]});g[0].attributes.class=k.toSvg.join(" "),k.toNode.length===0?r.removeAttribute("class"):r.setAttribute("class",k.toNode.join(" "))}var $=g.map(function(V){return toHtml(V)}).join(`
`);r.setAttribute(DATA_FA_I2SVG,""),r.innerHTML=$}};function performOperationSync(e){e()}function perform(e,n){var r=typeof n=="function"?n:noop$2;if(e.length===0)r();else{var g=performOperationSync;config.mutateApproach===MUTATION_APPROACH_ASYNC&&(g=WINDOW.requestAnimationFrame||performOperationSync),g(function(){var y=getMutator(),k=perf.begin("mutate");e.map(y),k(),r()})}}var disabled=!1;function disableObservation(){disabled=!0}function enableObservation(){disabled=!1}var mo=null;function observe(e){if(MUTATION_OBSERVER&&config.observeMutations){var n=e.treeCallback,r=n===void 0?noop$2:n,g=e.nodeCallback,y=g===void 0?noop$2:g,k=e.pseudoElementsCallback,$=k===void 0?noop$2:k,V=e.observeMutationsRoot,L=V===void 0?DOCUMENT:V;mo=new MUTATION_OBSERVER(function(z){if(!disabled){var j=getDefaultUsablePrefix();toArray(z).forEach(function(ae){if(ae.type==="childList"&&ae.addedNodes.length>0&&!isWatched(ae.addedNodes[0])&&(config.searchPseudoElements&&$(ae.target),r(ae.target)),ae.type==="attributes"&&ae.target.parentNode&&config.searchPseudoElements&&$(ae.target.parentNode),ae.type==="attributes"&&isWatched(ae.target)&&~ATTRIBUTES_WATCHED_FOR_MUTATION.indexOf(ae.attributeName))if(ae.attributeName==="class"&&hasPrefixAndIcon(ae.target)){var re=getCanonicalIcon(classArray(ae.target)),oe=re.prefix,ue=re.iconName;ae.target.setAttribute(DATA_PREFIX,oe||j),ue&&ae.target.setAttribute(DATA_ICON,ue)}else hasBeenReplaced(ae.target)&&y(ae.target)})}}),IS_DOM&&mo.observe(L,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function disconnect(){mo&&mo.disconnect()}function styleParser(e){var n=e.getAttribute("style"),r=[];return n&&(r=n.split(";").reduce(function(g,y){var k=y.split(":"),$=k[0],V=k.slice(1);return $&&V.length>0&&(g[$]=V.join(":").trim()),g},{})),r}function classParser(e){var n=e.getAttribute("data-prefix"),r=e.getAttribute("data-icon"),g=e.innerText!==void 0?e.innerText.trim():"",y=getCanonicalIcon(classArray(e));return y.prefix||(y.prefix=getDefaultUsablePrefix()),n&&r&&(y.prefix=n,y.iconName=r),y.iconName&&y.prefix||(y.prefix&&g.length>0&&(y.iconName=byLigature(y.prefix,e.innerText)||byUnicode(y.prefix,toHex(e.innerText))),!y.iconName&&config.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(y.iconName=e.firstChild.data)),y}function attributesParser(e){var n=toArray(e.attributes).reduce(function(y,k){return y.name!=="class"&&y.name!=="style"&&(y[k.name]=k.value),y},{}),r=e.getAttribute("title"),g=e.getAttribute("data-fa-title-id");return config.autoA11y&&(r?n["aria-labelledby"]="".concat(config.replacementClass,"-title-").concat(g||nextUniqueId()):(n["aria-hidden"]="true",n.focusable="false")),n}function blankMeta(){return{iconName:null,title:null,titleId:null,prefix:null,transform:meaninglessTransform,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function parseMeta(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},r=classParser(e),g=r.iconName,y=r.prefix,k=r.rest,$=attributesParser(e),V=chainHooks("parseNodeAttributes",{},e),L=n.styleParser?styleParser(e):[];return _objectSpread2$1({iconName:g,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:y,transform:meaninglessTransform,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:k,styles:L,attributes:$}},V)}var styles$2=namespace.styles;function generateMutation(e){var n=config.autoReplaceSvg==="nest"?parseMeta(e,{styleParser:!1}):parseMeta(e);return~n.extra.classes.indexOf(LAYERS_TEXT_CLASSNAME)?callProvided("generateLayersText",e,n):callProvided("generateSvgReplacementMutation",e,n)}var knownPrefixes=new Set;FAMILIES.map(function(e){knownPrefixes.add("fa-".concat(e))});Object.keys(PREFIX_TO_STYLE[FAMILY_CLASSIC]).map(knownPrefixes.add.bind(knownPrefixes));Object.keys(PREFIX_TO_STYLE[FAMILY_SHARP]).map(knownPrefixes.add.bind(knownPrefixes));knownPrefixes=_toConsumableArray(knownPrefixes);function onTree(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!IS_DOM)return Promise.resolve();var r=DOCUMENT.documentElement.classList,g=function(ae){return r.add("".concat(HTML_CLASS_I2SVG_BASE_CLASS,"-").concat(ae))},y=function(ae){return r.remove("".concat(HTML_CLASS_I2SVG_BASE_CLASS,"-").concat(ae))},k=config.autoFetchSvg?knownPrefixes:FAMILIES.map(function(j){return"fa-".concat(j)}).concat(Object.keys(styles$2));k.includes("fa")||k.push("fa");var $=[".".concat(LAYERS_TEXT_CLASSNAME,":not([").concat(DATA_FA_I2SVG,"])")].concat(k.map(function(j){return".".concat(j,":not([").concat(DATA_FA_I2SVG,"])")})).join(", ");if($.length===0)return Promise.resolve();var V=[];try{V=toArray(e.querySelectorAll($))}catch{}if(V.length>0)g("pending"),y("complete");else return Promise.resolve();var L=perf.begin("onTree"),z=V.reduce(function(j,ae){try{var re=generateMutation(ae);re&&j.push(re)}catch(oe){PRODUCTION$1||oe.name==="MissingIcon"&&console.error(oe)}return j},[]);return new Promise(function(j,ae){Promise.all(z).then(function(re){perform(re,function(){g("active"),g("complete"),y("pending"),typeof n=="function"&&n(),L(),j()})}).catch(function(re){L(),ae(re)})})}function onNode(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;generateMutation(e).then(function(r){r&&perform([r],n)})}function resolveIcons(e){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=(n||{}).icon?n:findIconDefinition(n||{}),y=r.mask;return y&&(y=(y||{}).icon?y:findIconDefinition(y||{})),e(g,_objectSpread2$1(_objectSpread2$1({},r),{},{mask:y}))}}var render=function e(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=r.transform,y=g===void 0?meaninglessTransform:g,k=r.symbol,$=k===void 0?!1:k,V=r.mask,L=V===void 0?null:V,z=r.maskId,j=z===void 0?null:z,ae=r.title,re=ae===void 0?null:ae,oe=r.titleId,ue=oe===void 0?null:oe,le=r.classes,de=le===void 0?[]:le,he=r.attributes,_e=he===void 0?{}:he,Ce=r.styles,Ne=Ce===void 0?{}:Ce;if(n){var $e=n.prefix,xe=n.iconName,Ie=n.icon;return domVariants(_objectSpread2$1({type:"icon"},n),function(){return callHooks("beforeDOMElementCreation",{iconDefinition:n,params:r}),config.autoA11y&&(re?_e["aria-labelledby"]="".concat(config.replacementClass,"-title-").concat(ue||nextUniqueId()):(_e["aria-hidden"]="true",_e.focusable="false")),makeInlineSvgAbstract({icons:{main:asFoundIcon(Ie),mask:L?asFoundIcon(L.icon):{found:!1,width:null,height:null,icon:{}}},prefix:$e,iconName:xe,transform:_objectSpread2$1(_objectSpread2$1({},meaninglessTransform),y),symbol:$,title:re,maskId:j,titleId:ue,extra:{attributes:_e,styles:Ne,classes:de}})})}},ReplaceElements={mixout:function e(){return{icon:resolveIcons(render)}},hooks:function e(){return{mutationObserverCallbacks:function(r){return r.treeCallback=onTree,r.nodeCallback=onNode,r}}},provides:function e(n){n.i2svg=function(r){var g=r.node,y=g===void 0?DOCUMENT:g,k=r.callback,$=k===void 0?function(){}:k;return onTree(y,$)},n.generateSvgReplacementMutation=function(r,g){var y=g.iconName,k=g.title,$=g.titleId,V=g.prefix,L=g.transform,z=g.symbol,j=g.mask,ae=g.maskId,re=g.extra;return new Promise(function(oe,ue){Promise.all([findIcon(y,V),j.iconName?findIcon(j.iconName,j.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(le){var de=_slicedToArray(le,2),he=de[0],_e=de[1];oe([r,makeInlineSvgAbstract({icons:{main:he,mask:_e},prefix:V,iconName:y,transform:L,symbol:z,maskId:ae,title:k,titleId:$,extra:re,watchable:!0})])}).catch(ue)})},n.generateAbstractIcon=function(r){var g=r.children,y=r.attributes,k=r.main,$=r.transform,V=r.styles,L=joinStyles(V);L.length>0&&(y.style=L);var z;return transformIsMeaningful($)&&(z=callProvided("generateAbstractTransformGrouping",{main:k,transform:$,containerWidth:k.width,iconWidth:k.width})),g.push(z||k.icon),{children:g,attributes:y}}}},Layers={mixout:function e(){return{layer:function(r){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=g.classes,k=y===void 0?[]:y;return domVariants({type:"layer"},function(){callHooks("beforeDOMElementCreation",{assembler:r,params:g});var $=[];return r(function(V){Array.isArray(V)?V.map(function(L){$=$.concat(L.abstract)}):$=$.concat(V.abstract)}),[{tag:"span",attributes:{class:["".concat(config.cssPrefix,"-layers")].concat(_toConsumableArray(k)).join(" ")},children:$}]})}}}},LayersCounter={mixout:function e(){return{counter:function(r){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=g.title,k=y===void 0?null:y,$=g.classes,V=$===void 0?[]:$,L=g.attributes,z=L===void 0?{}:L,j=g.styles,ae=j===void 0?{}:j;return domVariants({type:"counter",content:r},function(){return callHooks("beforeDOMElementCreation",{content:r,params:g}),makeLayersCounterAbstract({content:r.toString(),title:k,extra:{attributes:z,styles:ae,classes:["".concat(config.cssPrefix,"-layers-counter")].concat(_toConsumableArray(V))}})})}}}},LayersText={mixout:function e(){return{text:function(r){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=g.transform,k=y===void 0?meaninglessTransform:y,$=g.title,V=$===void 0?null:$,L=g.classes,z=L===void 0?[]:L,j=g.attributes,ae=j===void 0?{}:j,re=g.styles,oe=re===void 0?{}:re;return domVariants({type:"text",content:r},function(){return callHooks("beforeDOMElementCreation",{content:r,params:g}),makeLayersTextAbstract({content:r,transform:_objectSpread2$1(_objectSpread2$1({},meaninglessTransform),k),title:V,extra:{attributes:ae,styles:oe,classes:["".concat(config.cssPrefix,"-layers-text")].concat(_toConsumableArray(z))}})})}}},provides:function e(n){n.generateLayersText=function(r,g){var y=g.title,k=g.transform,$=g.extra,V=null,L=null;if(IS_IE){var z=parseInt(getComputedStyle(r).fontSize,10),j=r.getBoundingClientRect();V=j.width/z,L=j.height/z}return config.autoA11y&&!y&&($.attributes["aria-hidden"]="true"),Promise.resolve([r,makeLayersTextAbstract({content:r.innerHTML,width:V,height:L,transform:k,title:y,extra:$,watchable:!0})])}}},CLEAN_CONTENT_PATTERN=new RegExp('"',"ug"),SECONDARY_UNICODE_RANGE=[1105920,1112319];function hexValueFromContent(e){var n=e.replace(CLEAN_CONTENT_PATTERN,""),r=codePointAt(n,0),g=r>=SECONDARY_UNICODE_RANGE[0]&&r<=SECONDARY_UNICODE_RANGE[1],y=n.length===2?n[0]===n[1]:!1;return{value:toHex(y?n[0]:n),isSecondary:g||y}}function replaceForPosition(e,n){var r="".concat(DATA_FA_PSEUDO_ELEMENT_PENDING).concat(n.replace(":","-"));return new Promise(function(g,y){if(e.getAttribute(r)!==null)return g();var k=toArray(e.children),$=k.filter(function(Ie){return Ie.getAttribute(DATA_FA_PSEUDO_ELEMENT)===n})[0],V=WINDOW.getComputedStyle(e,n),L=V.getPropertyValue("font-family").match(FONT_FAMILY_PATTERN),z=V.getPropertyValue("font-weight"),j=V.getPropertyValue("content");if($&&!L)return e.removeChild($),g();if(L&&j!=="none"&&j!==""){var ae=V.getPropertyValue("content"),re=~["Sharp"].indexOf(L[2])?FAMILY_SHARP:FAMILY_CLASSIC,oe=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(L[2])?STYLE_TO_PREFIX[re][L[2].toLowerCase()]:FONT_WEIGHT_TO_PREFIX[re][z],ue=hexValueFromContent(ae),le=ue.value,de=ue.isSecondary,he=L[0].startsWith("FontAwesome"),_e=byUnicode(oe,le),Ce=_e;if(he){var Ne=byOldUnicode(le);Ne.iconName&&Ne.prefix&&(_e=Ne.iconName,oe=Ne.prefix)}if(_e&&!de&&(!$||$.getAttribute(DATA_PREFIX)!==oe||$.getAttribute(DATA_ICON)!==Ce)){e.setAttribute(r,Ce),$&&e.removeChild($);var $e=blankMeta(),xe=$e.extra;xe.attributes[DATA_FA_PSEUDO_ELEMENT]=n,findIcon(_e,oe).then(function(Ie){var ze=makeInlineSvgAbstract(_objectSpread2$1(_objectSpread2$1({},$e),{},{icons:{main:Ie,mask:emptyCanonicalIcon()},prefix:oe,iconName:Ce,extra:xe,watchable:!0})),qe=DOCUMENT.createElementNS("http://www.w3.org/2000/svg","svg");n==="::before"?e.insertBefore(qe,e.firstChild):e.appendChild(qe),qe.outerHTML=ze.map(function(Et){return toHtml(Et)}).join(`
`),e.removeAttribute(r),g()}).catch(y)}else g()}else g()})}function replace2(e){return Promise.all([replaceForPosition(e,"::before"),replaceForPosition(e,"::after")])}function processable(e){return e.parentNode!==document.head&&!~TAGNAMES_TO_SKIP_FOR_PSEUDOELEMENTS.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(DATA_FA_PSEUDO_ELEMENT)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function searchPseudoElements(e){if(IS_DOM)return new Promise(function(n,r){var g=toArray(e.querySelectorAll("*")).filter(processable).map(replace2),y=perf.begin("searchPseudoElements");disableObservation(),Promise.all(g).then(function(){y(),enableObservation(),n()}).catch(function(){y(),enableObservation(),r()})})}var PseudoElements={hooks:function e(){return{mutationObserverCallbacks:function(r){return r.pseudoElementsCallback=searchPseudoElements,r}}},provides:function e(n){n.pseudoElements2svg=function(r){var g=r.node,y=g===void 0?DOCUMENT:g;config.searchPseudoElements&&searchPseudoElements(y)}}},_unwatched=!1,MutationObserver$1={mixout:function e(){return{dom:{unwatch:function(){disableObservation(),_unwatched=!0}}}},hooks:function e(){return{bootstrap:function(){observe(chainHooks("mutationObserverCallbacks",{}))},noAuto:function(){disconnect()},watch:function(r){var g=r.observeMutationsRoot;_unwatched?enableObservation():observe(chainHooks("mutationObserverCallbacks",{observeMutationsRoot:g}))}}}},parseTransformString=function e(n){var r={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return n.toLowerCase().split(" ").reduce(function(g,y){var k=y.toLowerCase().split("-"),$=k[0],V=k.slice(1).join("-");if($&&V==="h")return g.flipX=!0,g;if($&&V==="v")return g.flipY=!0,g;if(V=parseFloat(V),isNaN(V))return g;switch($){case"grow":g.size=g.size+V;break;case"shrink":g.size=g.size-V;break;case"left":g.x=g.x-V;break;case"right":g.x=g.x+V;break;case"up":g.y=g.y-V;break;case"down":g.y=g.y+V;break;case"rotate":g.rotate=g.rotate+V;break}return g},r)},PowerTransforms={mixout:function e(){return{parse:{transform:function(r){return parseTransformString(r)}}}},hooks:function e(){return{parseNodeAttributes:function(r,g){var y=g.getAttribute("data-fa-transform");return y&&(r.transform=parseTransformString(y)),r}}},provides:function e(n){n.generateAbstractTransformGrouping=function(r){var g=r.main,y=r.transform,k=r.containerWidth,$=r.iconWidth,V={transform:"translate(".concat(k/2," 256)")},L="translate(".concat(y.x*32,", ").concat(y.y*32,") "),z="scale(".concat(y.size/16*(y.flipX?-1:1),", ").concat(y.size/16*(y.flipY?-1:1),") "),j="rotate(".concat(y.rotate," 0 0)"),ae={transform:"".concat(L," ").concat(z," ").concat(j)},re={transform:"translate(".concat($/2*-1," -256)")},oe={outer:V,inner:ae,path:re};return{tag:"g",attributes:_objectSpread2$1({},oe.outer),children:[{tag:"g",attributes:_objectSpread2$1({},oe.inner),children:[{tag:g.icon.tag,children:g.icon.children,attributes:_objectSpread2$1(_objectSpread2$1({},g.icon.attributes),oe.path)}]}]}}}},ALL_SPACE={x:0,y:0,width:"100%",height:"100%"};function fillBlack(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||n)&&(e.attributes.fill="black"),e}function deGroup(e){return e.tag==="g"?e.children:[e]}var Masks={hooks:function e(){return{parseNodeAttributes:function(r,g){var y=g.getAttribute("data-fa-mask"),k=y?getCanonicalIcon(y.split(" ").map(function($){return $.trim()})):emptyCanonicalIcon();return k.prefix||(k.prefix=getDefaultUsablePrefix()),r.mask=k,r.maskId=g.getAttribute("data-fa-mask-id"),r}}},provides:function e(n){n.generateAbstractMask=function(r){var g=r.children,y=r.attributes,k=r.main,$=r.mask,V=r.maskId,L=r.transform,z=k.width,j=k.icon,ae=$.width,re=$.icon,oe=transformForSvg({transform:L,containerWidth:ae,iconWidth:z}),ue={tag:"rect",attributes:_objectSpread2$1(_objectSpread2$1({},ALL_SPACE),{},{fill:"white"})},le=j.children?{children:j.children.map(fillBlack)}:{},de={tag:"g",attributes:_objectSpread2$1({},oe.inner),children:[fillBlack(_objectSpread2$1({tag:j.tag,attributes:_objectSpread2$1(_objectSpread2$1({},j.attributes),oe.path)},le))]},he={tag:"g",attributes:_objectSpread2$1({},oe.outer),children:[de]},_e="mask-".concat(V||nextUniqueId()),Ce="clip-".concat(V||nextUniqueId()),Ne={tag:"mask",attributes:_objectSpread2$1(_objectSpread2$1({},ALL_SPACE),{},{id:_e,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[ue,he]},$e={tag:"defs",children:[{tag:"clipPath",attributes:{id:Ce},children:deGroup(re)},Ne]};return g.push($e,{tag:"rect",attributes:_objectSpread2$1({fill:"currentColor","clip-path":"url(#".concat(Ce,")"),mask:"url(#".concat(_e,")")},ALL_SPACE)}),{children:g,attributes:y}}}},MissingIconIndicator={provides:function e(n){var r=!1;WINDOW.matchMedia&&(r=WINDOW.matchMedia("(prefers-reduced-motion: reduce)").matches),n.missingIconAbstract=function(){var g=[],y={fill:"currentColor"},k={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};g.push({tag:"path",attributes:_objectSpread2$1(_objectSpread2$1({},y),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var $=_objectSpread2$1(_objectSpread2$1({},k),{},{attributeName:"opacity"}),V={tag:"circle",attributes:_objectSpread2$1(_objectSpread2$1({},y),{},{cx:"256",cy:"364",r:"28"}),children:[]};return r||V.children.push({tag:"animate",attributes:_objectSpread2$1(_objectSpread2$1({},k),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:_objectSpread2$1(_objectSpread2$1({},$),{},{values:"1;0;1;1;0;1;"})}),g.push(V),g.push({tag:"path",attributes:_objectSpread2$1(_objectSpread2$1({},y),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:r?[]:[{tag:"animate",attributes:_objectSpread2$1(_objectSpread2$1({},$),{},{values:"1;0;0;0;0;1;"})}]}),r||g.push({tag:"path",attributes:_objectSpread2$1(_objectSpread2$1({},y),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:_objectSpread2$1(_objectSpread2$1({},$),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:g}}}},SvgSymbols={hooks:function e(){return{parseNodeAttributes:function(r,g){var y=g.getAttribute("data-fa-symbol"),k=y===null?!1:y===""?!0:y;return r.symbol=k,r}}}},plugins=[InjectCSS,ReplaceElements,Layers,LayersCounter,LayersText,PseudoElements,MutationObserver$1,PowerTransforms,Masks,MissingIconIndicator,SvgSymbols];registerPlugins(plugins,{mixoutsTo:api});api.noAuto;api.config;var library$1=api.library;api.dom;var parse$1=api.parse;api.findIconDefinition;api.toHtml;var icon2=api.icon;api.layer;api.text;api.counter;function ownKeys(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);n&&(g=g.filter(function(y){return Object.getOwnPropertyDescriptor(e,y).enumerable})),r.push.apply(r,g)}return r}function _objectSpread2(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ownKeys(Object(r),!0).forEach(function(g){_defineProperty(e,g,r[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(g){Object.defineProperty(e,g,Object.getOwnPropertyDescriptor(r,g))})}return e}function _typeof(e){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(e)}function _defineProperty(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function _objectWithoutPropertiesLoose(e,n){if(e==null)return{};var r={},g=Object.keys(e),y,k;for(k=0;k<g.length;k++)y=g[k],!(n.indexOf(y)>=0)&&(r[y]=e[y]);return r}function _objectWithoutProperties(e,n){if(e==null)return{};var r=_objectWithoutPropertiesLoose(e,n),g,y;if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(e);for(y=0;y<k.length;y++)g=k[y],!(n.indexOf(g)>=0)&&Object.prototype.propertyIsEnumerable.call(e,g)&&(r[g]=e[g])}return r}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},humps$1={exports:{}};(function(e){(function(n){var r=function(he,_e,Ce){if(!z(_e)||ae(_e)||re(_e)||oe(_e)||L(_e))return _e;var Ne,$e=0,xe=0;if(j(_e))for(Ne=[],xe=_e.length;$e<xe;$e++)Ne.push(r(he,_e[$e],Ce));else{Ne={};for(var Ie in _e)Object.prototype.hasOwnProperty.call(_e,Ie)&&(Ne[he(Ie,Ce)]=r(he,_e[Ie],Ce))}return Ne},g=function(he,_e){_e=_e||{};var Ce=_e.separator||"_",Ne=_e.split||/(?=[A-Z])/;return he.split(Ne).join(Ce)},y=function(he){return ue(he)?he:(he=he.replace(/[\-_\s]+(.)?/g,function(_e,Ce){return Ce?Ce.toUpperCase():""}),he.substr(0,1).toLowerCase()+he.substr(1))},k=function(he){var _e=y(he);return _e.substr(0,1).toUpperCase()+_e.substr(1)},$=function(he,_e){return g(he,_e).toLowerCase()},V=Object.prototype.toString,L=function(he){return typeof he=="function"},z=function(he){return he===Object(he)},j=function(he){return V.call(he)=="[object Array]"},ae=function(he){return V.call(he)=="[object Date]"},re=function(he){return V.call(he)=="[object RegExp]"},oe=function(he){return V.call(he)=="[object Boolean]"},ue=function(he){return he=he-0,he===he},le=function(he,_e){var Ce=_e&&"process"in _e?_e.process:_e;return typeof Ce!="function"?he:function(Ne,$e){return Ce(Ne,he,$e)}},de={camelize:y,decamelize:$,pascalize:k,depascalize:$,camelizeKeys:function(he,_e){return r(le(y,_e),he)},decamelizeKeys:function(he,_e){return r(le($,_e),he,_e)},pascalizeKeys:function(he,_e){return r(le(k,_e),he)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};e.exports?e.exports=de:n.humps=de})(commonjsGlobal)})(humps$1);var humps=humps$1.exports,_excluded=["class","style"];function styleToObject(e){return e.split(";").map(function(n){return n.trim()}).filter(function(n){return n}).reduce(function(n,r){var g=r.indexOf(":"),y=humps.camelize(r.slice(0,g)),k=r.slice(g+1).trim();return n[y]=k,n},{})}function classToObject(e){return e.split(/\s+/).reduce(function(n,r){return n[r]=!0,n},{})}function convert(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var g=(e.children||[]).map(function(L){return convert(L)}),y=Object.keys(e.attributes||{}).reduce(function(L,z){var j=e.attributes[z];switch(z){case"class":L.class=classToObject(j);break;case"style":L.style=styleToObject(j);break;default:L.attrs[z]=j}return L},{attrs:{},class:{},style:{}});r.class;var k=r.style,$=k===void 0?{}:k,V=_objectWithoutProperties(r,_excluded);return h$1(e.tag,_objectSpread2(_objectSpread2(_objectSpread2({},n),{},{class:y.class,style:_objectSpread2(_objectSpread2({},y.style),$)},y.attrs),V),g)}var PRODUCTION=!1;try{PRODUCTION=!0}catch(e){}function log(){if(!PRODUCTION&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function objectWithKey(e,n){return Array.isArray(n)&&n.length>0||!Array.isArray(n)&&n?_defineProperty({},e,n):{}}function classList(e){var n,r=(n={"fa-spin":e.spin,"fa-pulse":e.pulse,"fa-fw":e.fixedWidth,"fa-border":e.border,"fa-li":e.listItem,"fa-inverse":e.inverse,"fa-flip":e.flip===!0,"fa-flip-horizontal":e.flip==="horizontal"||e.flip==="both","fa-flip-vertical":e.flip==="vertical"||e.flip==="both"},_defineProperty(n,"fa-".concat(e.size),e.size!==null),_defineProperty(n,"fa-rotate-".concat(e.rotation),e.rotation!==null),_defineProperty(n,"fa-pull-".concat(e.pull),e.pull!==null),_defineProperty(n,"fa-swap-opacity",e.swapOpacity),_defineProperty(n,"fa-bounce",e.bounce),_defineProperty(n,"fa-shake",e.shake),_defineProperty(n,"fa-beat",e.beat),_defineProperty(n,"fa-fade",e.fade),_defineProperty(n,"fa-beat-fade",e.beatFade),_defineProperty(n,"fa-flash",e.flash),_defineProperty(n,"fa-spin-pulse",e.spinPulse),_defineProperty(n,"fa-spin-reverse",e.spinReverse),n);return Object.keys(r).map(function(g){return r[g]?g:null}).filter(function(g){return g})}function normalizeIconArgs(e){if(e&&_typeof(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(parse$1.icon)return parse$1.icon(e);if(e===null)return null;if(_typeof(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}var FontAwesomeIcon=defineComponent({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function e(n){return[!0,!1,"horizontal","vertical","both"].indexOf(n)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function e(n){return["right","left"].indexOf(n)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function e(n){return[90,180,270].indexOf(Number.parseInt(n,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function e(n){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(n)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup:function e(n,r){var g=r.attrs,y=computed(function(){return normalizeIconArgs(n.icon)}),k=computed(function(){return objectWithKey("classes",classList(n))}),$=computed(function(){return objectWithKey("transform",typeof n.transform=="string"?parse$1.transform(n.transform):n.transform)}),V=computed(function(){return objectWithKey("mask",normalizeIconArgs(n.mask))}),L=computed(function(){return icon2(y.value,_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({},k.value),$.value),V.value),{},{symbol:n.symbol,title:n.title}))});watch(L,function(j){if(!j)return log("Could not find one or more icon(s)",y.value,V.value)},{immediate:!0});var z=computed(function(){return L.value?convert(L.value.abstract[0],{},g):null});return function(){return z.value}}}),faGamepad={prefix:"fas",iconName:"gamepad",icon:[640,512,[],"f11b","M192 64C86 64 0 150 0 256S86 448 192 448H448c106 0 192-86 192-192s-86-192-192-192H192zM496 168a40 40 0 1 1 0 80 40 40 0 1 1 0-80zM392 304a40 40 0 1 1 80 0 40 40 0 1 1 -80 0zM168 200c0-13.3 10.7-24 24-24s24 10.7 24 24v32h32c13.3 0 24 10.7 24 24s-10.7 24-24 24H216v32c0 13.3-10.7 24-24 24s-24-10.7-24-24V280H136c-13.3 0-24-10.7-24-24s10.7-24 24-24h32V200z"]},faHand$1={prefix:"fas",iconName:"hand",icon:[512,512,[129306,9995,"hand-paper"],"f256","M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V240c0 8.8-7.2 16-16 16s-16-7.2-16-16V64c0-17.7-14.3-32-32-32s-32 14.3-32 32V336c0 1.5 0 3.1 .1 4.6L67.6 283c-16-15.2-41.3-14.6-56.6 1.4s-14.6 41.3 1.4 56.6L124.8 448c43.1 41.1 100.4 64 160 64H304c97.2 0 176-78.8 176-176V128c0-17.7-14.3-32-32-32s-32 14.3-32 32V240c0 8.8-7.2 16-16 16s-16-7.2-16-16V64c0-17.7-14.3-32-32-32s-32 14.3-32 32V240c0 8.8-7.2 16-16 16s-16-7.2-16-16V32z"]},faArrowPointer={prefix:"fas",iconName:"arrow-pointer",icon:[320,512,["mouse-pointer"],"f245","M0 55.2V426c0 12.2 9.9 22 22 22c6.3 0 12.4-2.7 16.6-7.5L121.2 346l58.1 116.3c7.9 15.8 27.1 22.2 42.9 14.3s22.2-27.1 14.3-42.9L179.8 320H297.9c12.2 0 22.1-9.9 22.1-22.1c0-6.3-2.7-12.3-7.4-16.5L38.6 37.9C34.3 34.1 28.9 32 23.2 32C10.4 32 0 42.4 0 55.2z"]},faImage={prefix:"fas",iconName:"image",icon:[512,512,[],"f03e","M0 96C0 60.7 28.7 32 64 32H448c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96zM323.8 202.5c-4.5-6.6-11.9-10.5-19.8-10.5s-15.4 3.9-19.8 10.5l-87 127.6L170.7 297c-4.6-5.7-11.5-9-18.7-9s-14.2 3.3-18.7 9l-64 80c-5.8 7.2-6.9 17.1-2.9 25.4s12.4 13.6 21.6 13.6h96 32H424c8.9 0 17.1-4.9 21.2-12.8s3.6-17.4-1.4-24.7l-120-176zM112 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"]},faArrowDownWideShort={prefix:"fas",iconName:"arrow-down-wide-short",icon:[576,512,["sort-amount-asc","sort-amount-down"],"f160","M151.6 469.6C145.5 476.2 137 480 128 480s-17.5-3.8-23.6-10.4l-88-96c-11.9-13-11.1-33.3 2-45.2s33.3-11.1 45.2 2L96 365.7V64c0-17.7 14.3-32 32-32s32 14.3 32 32V365.7l32.4-35.4c11.9-13 32.2-13.9 45.2-2s13.9 32.2 2 45.2l-88 96zM320 480c-17.7 0-32-14.3-32-32s14.3-32 32-32h32c17.7 0 32 14.3 32 32s-14.3 32-32 32H320zm0-128c-17.7 0-32-14.3-32-32s14.3-32 32-32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H320zm0-128c-17.7 0-32-14.3-32-32s14.3-32 32-32H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H320zm0-128c-17.7 0-32-14.3-32-32s14.3-32 32-32H544c17.7 0 32 14.3 32 32s-14.3 32-32 32H320z"]},faSquare$1={prefix:"fas",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M0 96C0 60.7 28.7 32 64 32H384c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96z"]},faCircle$1={prefix:"fas",iconName:"circle",icon:[512,512,[128308,128309,128992,128993,128994,128995,128996,9679,9898,9899,11044,61708,61915],"f111","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"]},faTerminal={prefix:"fas",iconName:"terminal",icon:[576,512,[],"f120","M9.4 86.6C-3.1 74.1-3.1 53.9 9.4 41.4s32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256 9.4 86.6zM256 416H544c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},faTextWidth={prefix:"fas",iconName:"text-width",icon:[448,512,[],"f035","M64 128V96H192l0 128H176c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H256l0-128H384v32c0 17.7 14.3 32 32 32s32-14.3 32-32V80c0-26.5-21.5-48-48-48H224 48C21.5 32 0 53.5 0 80v48c0 17.7 14.3 32 32 32s32-14.3 32-32zM9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3l64 64c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6V416H320v32c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l64-64c12.5-12.5 12.5-32.8 0-45.3l-64-64c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6v32H128V320c0-12.9-7.8-24.6-19.8-29.6s-25.7-2.2-34.9 6.9l-64 64z"]},faTableCells={prefix:"fas",iconName:"table-cells",icon:[512,512,["th"],"f00a","M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm88 64v64H64V96h88zm56 0h88v64H208V96zm240 0v64H360V96h88zM64 224h88v64H64V224zm232 0v64H208V224h88zm64 0h88v64H360V224zM152 352v64H64V352h88zm56 0h88v64H208V352zm240 0v64H360V352h88z"]},faSliders={prefix:"fas",iconName:"sliders",icon:[512,512,["sliders-h"],"f1de","M0 416c0 17.7 14.3 32 32 32l54.7 0c12.3 28.3 40.5 48 73.3 48s61-19.7 73.3-48L480 448c17.7 0 32-14.3 32-32s-14.3-32-32-32l-246.7 0c-12.3-28.3-40.5-48-73.3-48s-61 19.7-73.3 48L32 384c-17.7 0-32 14.3-32 32zm128 0a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zM320 256a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm32-80c-32.8 0-61 19.7-73.3 48L32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l246.7 0c12.3 28.3 40.5 48 73.3 48s61-19.7 73.3-48l54.7 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-54.7 0c-12.3-28.3-40.5-48-73.3-48zM192 128a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm73.3-64C253 35.7 224.8 16 192 16s-61 19.7-73.3 48L32 64C14.3 64 0 78.3 0 96s14.3 32 32 32l86.7 0c12.3 28.3 40.5 48 73.3 48s61-19.7 73.3-48L480 128c17.7 0 32-14.3 32-32s-14.3-32-32-32L265.3 64z"]},faFont={prefix:"fas",iconName:"font",icon:[448,512,[],"f031","M254 52.8C249.3 40.3 237.3 32 224 32s-25.3 8.3-30 20.8L57.8 416H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32h-1.8l18-48H303.8l18 48H320c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H390.2L254 52.8zM279.8 304H168.2L224 155.1 279.8 304z"]},faPercent={prefix:"fas",iconName:"percent",icon:[384,512,[62101,62785,"percentage"],"25","M374.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-320 320c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l320-320zM128 128A64 64 0 1 0 0 128a64 64 0 1 0 128 0zM384 384a64 64 0 1 0 -128 0 64 64 0 1 0 128 0z"]},faPenNib={prefix:"fas",iconName:"pen-nib",icon:[512,512,[10001],"f5ad","M368.4 18.3L312.7 74.1 437.9 199.3l55.7-55.7c21.9-21.9 21.9-57.3 0-79.2L447.6 18.3c-21.9-21.9-57.3-21.9-79.2 0zM288 94.6l-9.2 2.8L134.7 140.6c-19.9 6-35.7 21.2-42.3 41L3.8 445.8c-3.8 11.3-1 23.9 7.3 32.4L164.7 324.7c-3-6.3-4.7-13.3-4.7-20.7c0-26.5 21.5-48 48-48s48 21.5 48 48s-21.5 48-48 48c-7.4 0-14.4-1.7-20.7-4.7L33.7 500.9c8.6 8.3 21.1 11.2 32.4 7.3l264.3-88.6c19.7-6.6 35-22.4 41-42.3l43.2-144.1 2.8-9.2L288 94.6z"]},faDrawPolygon={prefix:"fas",iconName:"draw-polygon",icon:[448,512,[],"f5ee","M96 151.4V360.6c9.7 5.6 17.8 13.7 23.4 23.4H328.6c0-.1 .1-.2 .1-.3l-4.5-7.9-32-56 0 0c-1.4 .1-2.8 .1-4.2 .1c-35.3 0-64-28.7-64-64s28.7-64 64-64c1.4 0 2.8 0 4.2 .1l0 0 32-56 4.5-7.9-.1-.3H119.4c-5.6 9.7-13.7 17.8-23.4 23.4zM384.3 352c35.2 .2 63.7 28.7 63.7 64c0 35.3-28.7 64-64 64c-23.7 0-44.4-12.9-55.4-32H119.4c-11.1 19.1-31.7 32-55.4 32c-35.3 0-64-28.7-64-64c0-23.7 12.9-44.4 32-55.4V151.4C12.9 140.4 0 119.7 0 96C0 60.7 28.7 32 64 32c23.7 0 44.4 12.9 55.4 32H328.6c11.1-19.1 31.7-32 55.4-32c35.3 0 64 28.7 64 64c0 35.3-28.5 63.8-63.7 64l-4.5 7.9-32 56-2.3 4c4.2 8.5 6.5 18 6.5 28.1s-2.3 19.6-6.5 28.1l2.3 4 32 56 4.5 7.9z"]},faHand={prefix:"far",iconName:"hand",icon:[512,512,[129306,9995,"hand-paper"],"f256","M256 0c-25.3 0-47.2 14.7-57.6 36c-7-2.6-14.5-4-22.4-4c-35.3 0-64 28.7-64 64V261.5l-2.7-2.7c-25-25-65.5-25-90.5 0s-25 65.5 0 90.5L106.5 437c48 48 113.1 75 181 75H296h8c1.5 0 3-.1 4.5-.4c91.7-6.2 165-79.4 171.1-171.1c.3-1.5 .4-3 .4-4.5V160c0-35.3-28.7-64-64-64c-5.5 0-10.9 .7-16 2V96c0-35.3-28.7-64-64-64c-7.9 0-15.4 1.4-22.4 4C303.2 14.7 281.3 0 256 0zM240 96.1c0 0 0-.1 0-.1V64c0-8.8 7.2-16 16-16s16 7.2 16 16V95.9c0 0 0 .1 0 .1V232c0 13.3 10.7 24 24 24s24-10.7 24-24V96c0 0 0 0 0-.1c0-8.8 7.2-16 16-16s16 7.2 16 16v55.9c0 0 0 .1 0 .1v80c0 13.3 10.7 24 24 24s24-10.7 24-24V160.1c0 0 0-.1 0-.1c0-8.8 7.2-16 16-16s16 7.2 16 16V332.9c-.1 .6-.1 1.3-.2 1.9c-3.4 69.7-59.3 125.6-129 129c-.6 0-1.3 .1-1.9 .2H296h-8.5c-55.2 0-108.1-21.9-147.1-60.9L52.7 315.3c-6.2-6.2-6.2-16.4 0-22.6s16.4-6.2 22.6 0L119 336.4c6.9 6.9 17.2 8.9 26.2 5.2s14.8-12.5 14.8-22.2V96c0-8.8 7.2-16 16-16c8.8 0 16 7.1 16 15.9V232c0 13.3 10.7 24 24 24s24-10.7 24-24V96.1z"]},faSquare={prefix:"far",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M384 80c8.8 0 16 7.2 16 16V416c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V96c0-8.8 7.2-16 16-16H384zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z"]},faCircle={prefix:"far",iconName:"circle",icon:[512,512,[128308,128309,128992,128993,128994,128995,128996,9679,9898,9899,11044,61708,61915],"f111","M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z"]};localForage.config({driver:localForage.INDEXEDDB,name:"myDatabase",version:1,size:4980736,storeName:"keyvaluepairs",description:"my database"});library$1.add(faArrowPointer,faCircle$1,faPercent,faArrowDownWideShort,faPenNib,faSquare$1,faDrawPolygon,faImage,faFont,faTerminal,faSliders,faTableCells,faHand,faSquare,faCircle,faHand$1,faTextWidth,faGamepad);const app=createApp(_sfc_main);app.config.errorHandler=(e,n,r)=>{console.error(":",e)};app.component("font-awesome-icon",FontAwesomeIcon);app.use(installer);app.component("Files",files_default);app.component("Edit",edit_default);app.component("Upload",upload_default);app.component("Download",download_default);app.component("Tickets",tickets_default);app.component("Setting",setting_default);app.component("List",list_default);app.component("Tools",tools_default);app.component("QuestionFilled",question_filled_default);app.use(router);app.use(i18n);app.mount("#app");const worker=initWorker();
